"use strict";(self.webpackChunkconcierge=self.webpackChunkconcierge||[]).push([["apps_concierge_src_app_catering_catering_module_ts"],{9937:(ct,C,o)=>{o.r(C),o.d(C,{CateringModule:()=>rt});var c=o(6477),m=o(9542),l=o(647),Z=o(2128),w=o(1031),y=o(3045),d=o(9743),t=o(6839),M=o(4945),g=o(7728),_=o(8501),b=o(2189),f=o(1670),U=o(5670),A=o(3910),J=o(5912),u=o(5185),z=o(2921),I=o(7486),N=o(8441),O=o(8750),j=o(6508),Q=o(2423),R=o(5306);function Y(n,a){if(1&n&&(t.TgZ(0,"mat-option",3),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij(" ",e.display_name||e.name," ")}}function k(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"button",12),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.addItem())}),t.TgZ(1,"app-icon",13),t._uU(2,"add"),t.qZA()()}}function P(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"button",14),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.editConfig())}),t.TgZ(1,"app-icon",13),t._uU(2,"menu_book"),t.qZA()()}}function F(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"button",15),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.importMenu())}),t.TgZ(1,"app-icon",13),t._uU(2,"cloud_upload"),t.qZA()()}}function S(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"button",16),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.setRoomAvailability())}),t.TgZ(1,"app-icon",13),t._uU(2,"event_available"),t.qZA()()}}function E(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"button",17),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.setChargeCodes())}),t.TgZ(1,"app-icon",13),t._uU(2,"payments"),t.qZA()()}}let v=(()=>{class n extends d.cx{get building(){return this._org.building}constructor(e,i,r,s,h,st){super(),this._orders=e,this._catering=i,this._org=r,this._route=s,this._router=h,this._dialog=st,this.zones=[],this.levels=this._org.active_levels,this.setDate=p=>this._orders.filters={...this._orders.filters,date:p},this.updateZones=p=>{this._router.navigate([],{relativeTo:this._route,queryParams:{zone_ids:p.join(",")}}),this._orders.filters={...this._orders.filters,zones:[p]},this._catering.zone=p[0]||this._catering.zone},this.addItem=()=>this._catering.addItem(),this.editConfig=()=>this._catering.editConfig(),this.importMenu=()=>this._catering.importMenu()}ngOnInit(){var e=this;return(0,f.Z)(function*(){yield e._org.initialised.pipe((0,U.P)(i=>i)).toPromise(),e._catering.zone=(e._orders.filters?.zones||[])[0]||e._org.building?.id,e.subscription("route.query",e._route.queryParamMap.subscribe(i=>{if(i.has("zone_ids")){const r=i.get("zone_ids").split(",");if(!r.length)return;const s=e._org.levelWithID(r);if(e.zones=r,!s)return;e._org.building=e._org.buildings.find(h=>h.id===s.parent_id)}})),e.subscription("route.params",e._route.paramMap.subscribe(i=>e.page=i.has("view")?i.get("view"):"")),e.subscription("levels",e._org.active_levels.subscribe(i=>{e.zones=e.zones.filter(r=>i.find(s=>s.id===r)),!e.zones.length&&i.length&&e.zones.push(i[0].id),e.updateZones(e.zones)}))})()}setRoomAvailability(){var e=this;return(0,f.Z)(function*(){const i=e._dialog.open(z.z4,{data:{type:"Catering",disabled_rooms:yield e._catering.availability.pipe((0,A.q)(1)).toPromise()}});e.subscription("room-availability",i.componentInstance.change.subscribe(function(){var r=(0,f.Z)(function*(s){yield e._catering.saveSettings({disabled_rooms:s}).catch(),i.componentInstance.loading=!1});return function(s){return r.apply(this,arguments)}}()))})()}setChargeCodes(){this._dialog.open(u.F7)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(u.Ii),t.Y36(u.jW),t.Y36(J.w7),t.Y36(l.gz),t.Y36(l.F0),t.Y36(I.uw))},n.\u0275cmp=t.Xpm({type:n,selectors:[["catering-topbar"]],features:[t.qOj],decls:14,vars:10,consts:[[1,"flex","items-center","bg-base-100","h-20","px-4","border-b","border-base-200","space-x-2"],["appearance","outline"],["placeholder","All Levels",3,"ngModel","ngModelChange"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["btn","","matRipple","","matTooltip","Add Item",3,"click",4,"ngIf"],["btn","","matRipple","","matTooltip","Edit Config",3,"click",4,"ngIf"],["btn","","matRipple","","matTooltip","Import Menu",3,"click",4,"ngIf"],["btn","","matRipple","","matTooltip","Room Availability",3,"click",4,"ngIf"],["btn","","matRipple","","matTooltip","Charge Codes",3,"click",4,"ngIf"],[1,"flex-1","w-2"],[3,"dateChange"],["btn","","matRipple","","matTooltip","Add Item",3,"click"],[1,"text-2xl"],["btn","","matRipple","","matTooltip","Edit Config",3,"click"],["btn","","matRipple","","matTooltip","Import Menu",3,"click"],["btn","","matRipple","","matTooltip","Room Availability",3,"click"],["btn","","matRipple","","matTooltip","Charge Codes",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"mat-form-field",1)(2,"mat-select",2),t.NdJ("ngModelChange",function(s){return i.zones[0]=s})("ngModelChange",function(s){return i.updateZones([s])}),t.TgZ(3,"mat-option",3),t._uU(4," All Levels "),t.qZA(),t.YNc(5,Y,2,2,"mat-option",4),t.ALo(6,"async"),t.qZA()(),t.YNc(7,k,3,0,"button",5),t.YNc(8,P,3,0,"button",6),t.YNc(9,F,3,0,"button",7),t.YNc(10,S,3,0,"button",8),t.YNc(11,E,3,0,"button",9),t._UZ(12,"div",10),t.TgZ(13,"date-options",11),t.NdJ("dateChange",function(s){return i.setDate(s)}),t.qZA()()),2&e&&(t.xp6(2),t.Q6J("ngModel",i.zones[0]),t.xp6(1),t.Q6J("value",null==i.building?null:i.building.id),t.xp6(2),t.Q6J("ngForOf",t.lcZ(6,8,i.levels)),t.xp6(2),t.Q6J("ngIf","menu"===i.page&&(!i.zones[0]||i.zones[0]===(null==i.building?null:i.building.id))),t.xp6(1),t.Q6J("ngIf","menu"===i.page),t.xp6(1),t.Q6J("ngIf","menu"===i.page),t.xp6(1),t.Q6J("ngIf","menu"===i.page),t.xp6(1),t.Q6J("ngIf","menu"===i.page))},dependencies:[c.sg,c.O5,m.JJ,m.On,N.E,O.KE,j.gD,g.ey,Q.gM,g.wG,R.o,c.Ov],styles:["mat-form-field[_ngcontent-%COMP%]{height:3.25em;width:8em}\n/*# sourceMappingURL=catering-topbar.component.ts-angular-inline--151.css.map*/"]}),n})();const L=["app-catering",""];function D(n,a){1&n&&(t.TgZ(0,"div",7),t._uU(1,' To edit the menu select "All Levels" from the top left '),t.qZA())}function G(n,a){1&n&&t._UZ(0,"catering-order-list",8)}function H(n,a){1&n&&t._UZ(0,"catering-menu",8)}const B=function(){return["/book","catering","menu"]},K=function(){return["/book","catering","orders"]};function V(n,a){1&n&&(t.TgZ(0,"div",9)(1,"a",10)(2,"div",11),t._UZ(3,"div",12),t.TgZ(4,"span",13),t._uU(5,"Menus and Pricing"),t.qZA()(),t.TgZ(6,"div",14),t._uU(7," View and Edit Menus and Pricing "),t.qZA()(),t.TgZ(8,"a",10)(9,"div",11),t._UZ(10,"div",12),t.TgZ(11,"span",13),t._uU(12,"Today's Orders"),t.qZA()(),t.TgZ(13,"div",14),t._uU(14," View Catering Orders and their statuses upon arrival "),t.qZA()()()),2&n&&(t.xp6(1),t.Q6J("routerLink",t.DdM(6,B)),t.xp6(1),t.Udp("background-image","url(assets/menus.jpg)"),t.xp6(6),t.Q6J("routerLink",t.DdM(7,K)),t.xp6(1),t.Udp("background-image","url(assets/orders.jpg)"))}let x=(()=>{class n extends d.cx{constructor(e){super(),this._route=e}ngOnInit(){this.subscription("route.params",this._route.paramMap.subscribe(e=>this.page=e.has("view")?e.get("view"):""))}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(l.gz))},n.\u0275cmp=t.Xpm({type:n,selectors:[["","app-catering",""]],features:[t.qOj],attrs:L,decls:9,vars:4,consts:[[1,"relative","w-full","flex","flex-col","bg-base-200"],[1,"relative","z-10"],["class","p-2 flex items-center justify-center bg-info text-info-content text-sm",4,"ngIf"],[1,"flex","flex-1","h-1/2","w-full","overflow-auto"],[3,"ngSwitch"],["class","flex-1",4,"ngSwitchCase"],["class","flex flex-1 flex-wrap items-center justify-center",4,"ngSwitchDefault"],[1,"p-2","flex","items-center","justify-center","bg-info","text-info-content","text-sm"],[1,"flex-1"],[1,"flex","flex-1","flex-wrap","items-center","justify-center"],["matRipple","",1,"rounded","flex","flex-col","items-center","bg-base-100","shadow","text-black",3,"routerLink"],["name","img",1,"relative","w-full","flex","flex-1","items-center","justify-center","text-2xl","text-white","bg-center","bg-cover"],[1,"absolute","inset-0","bg-neutral","opacity-60","z-0"],[1,"z-10"],[1,"p-2","h-14","w-full","text-sm","text-center","flex","items-center","justify-center"]],template:function(e,i){1&e&&(t._UZ(0,"sidebar"),t.TgZ(1,"main",0),t._UZ(2,"catering-topbar",1),t.YNc(3,D,2,0,"div",2),t.TgZ(4,"div",3),t.ynx(5,4),t.YNc(6,G,1,0,"catering-order-list",5),t.YNc(7,H,1,0,"catering-menu",5),t.YNc(8,V,15,8,"div",6),t.BQk(),t.qZA()()),2&e&&(t.xp6(3),t.Q6J("ngIf","menu"===i.page),t.xp6(2),t.Q6J("ngSwitch",i.page),t.xp6(1),t.Q6J("ngSwitchCase","orders"),t.xp6(1),t.Q6J("ngSwitchCase","menu"))},dependencies:[c.O5,c.RF,c.n9,c.ED,M.k,g.wG,_.B,b.I,l.rH,v],styles:["[_nghost-%COMP%]{display:flex;height:100%;width:100%}a[_ngcontent-%COMP%]{width:28rem;height:16rem;margin-left:.5rem;text-decoration:none;transition:background .2s}a[_ngcontent-%COMP%]:hover{opacity:.8}a[_ngcontent-%COMP%]:first-child{margin:0}\n/*# sourceMappingURL=catering.component.ts-angular-inline--150.css.map*/"]}),n})();var X=o(6866),W=o(3320);const q=["app-new-catering",""];function $(n,a){1&n&&(t.TgZ(0,"div",8),t._uU(1,' To edit the menu select "All Levels" from the top left '),t.qZA())}function tt(n,a){1&n&&t._UZ(0,"catering-order-list",9)}function et(n,a){1&n&&t._UZ(0,"catering-menu",9)}const nt=function(){return["/catering","menu"]},it=function(){return["/catering","orders"]};function ot(n,a){1&n&&(t.TgZ(0,"div",10)(1,"a",11)(2,"div",12),t._UZ(3,"div",13),t.TgZ(4,"span",14),t._uU(5,"Menus and Pricing"),t.qZA()(),t.TgZ(6,"div",15),t._uU(7," View and Edit Menus and Pricing "),t.qZA()(),t.TgZ(8,"a",11)(9,"div",12),t._UZ(10,"div",13),t.TgZ(11,"span",14),t._uU(12,"Today's Orders"),t.qZA()(),t.TgZ(13,"div",15),t._uU(14," View Catering Orders and their statuses upon arrival "),t.qZA()()()),2&n&&(t.xp6(1),t.Q6J("routerLink",t.DdM(6,nt)),t.xp6(1),t.Udp("background-image","url(assets/menus.jpg)"),t.xp6(6),t.Q6J("routerLink",t.DdM(7,it)),t.xp6(1),t.Udp("background-image","url(assets/orders.jpg)"))}let T=(()=>{class n extends d.cx{constructor(e){super(),this._route=e}ngOnInit(){this.subscription("route.params",this._route.paramMap.subscribe(e=>this.page=e.has("view")?e.get("view"):""))}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(l.gz))},n.\u0275cmp=t.Xpm({type:n,selectors:[["","app-new-catering",""]],features:[t.qOj],attrs:q,decls:11,vars:4,consts:[[1,"flex","flex-1","h-px"],[1,"flex","flex-col","flex-1","w-1/2","h-full"],[1,"relative","z-10"],["class","p-2 flex items-center justify-center bg-info text-white text-sm",4,"ngIf"],[1,"flex","flex-1","h-1/2","w-full","overflow-auto"],[3,"ngSwitch"],["class","flex-1",4,"ngSwitchCase"],["class","flex flex-1 flex-wrap items-center justify-center",4,"ngSwitchDefault"],[1,"p-2","flex","items-center","justify-center","bg-info","text-white","text-sm"],[1,"flex-1"],[1,"flex","flex-1","flex-wrap","items-center","justify-center"],["matRipple","",1,"rounded","flex","flex-col","items-center","bg-base-100","shadow","text-black",3,"routerLink"],["name","img",1,"relative","w-full","flex","flex-1","items-center","justify-center","text-2xl","text-white","bg-center","bg-cover"],[1,"absolute","inset-0","bg-neutral","opacity-60","z-0"],[1,"z-10"],[1,"p-2","h-14","w-full","text-sm","text-center","flex","items-center","justify-center"]],template:function(e,i){1&e&&(t._UZ(0,"app-topbar"),t.TgZ(1,"div",0),t._UZ(2,"app-sidebar"),t.TgZ(3,"main",1),t._UZ(4,"catering-topbar",2),t.YNc(5,$,2,0,"div",3),t.TgZ(6,"div",4),t.ynx(7,5),t.YNc(8,tt,1,0,"catering-order-list",6),t.YNc(9,et,1,0,"catering-menu",6),t.YNc(10,ot,15,8,"div",7),t.BQk(),t.qZA()()()),2&e&&(t.xp6(5),t.Q6J("ngIf","menu"===i.page),t.xp6(2),t.Q6J("ngSwitch",i.page),t.xp6(1),t.Q6J("ngSwitchCase","orders"),t.xp6(1),t.Q6J("ngSwitchCase","menu"))},dependencies:[c.O5,c.RF,c.n9,c.ED,X.O,W.u,g.wG,_.B,b.I,l.rH,v],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%;width:100%;background-color:var(--b1)}a[_ngcontent-%COMP%]{width:28rem;height:16rem;margin-left:.5rem;text-decoration:none;transition:background .2s}a[_ngcontent-%COMP%]:hover{opacity:.8}a[_ngcontent-%COMP%]:first-child{margin:0}\n/*# sourceMappingURL=new-catering.component.ts-angular-inline--152.css.map*/"]}),n})();const at=[{path:"",component:x},{path:"new",component:T},{path:":view",component:x},{path:"new/:view",component:T}];let rt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[c.ez,m.u5,y.v,Z.Nh,w.Hi,u.uy,l.Bz.forChild(at)]}),n})()}}]);
//# sourceMappingURL=apps_concierge_src_app_catering_catering_module_ts.js.map