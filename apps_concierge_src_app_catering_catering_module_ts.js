"use strict";(self.webpackChunkconcierge=self.webpackChunkconcierge||[]).push([["apps_concierge_src_app_catering_catering_module_ts"],{419:(k,m,i)=>{i.r(m),i.d(m,{CateringModule:()=>L});var c=i(6362),p=i(587),g=i(9481),C=i(2379),v=i(1196),_=i(2656),d=i(3294),t=i(3184),b=i(4945),x=i(4929),T=i(5670),M=i(3619),u=i(7027),Z=i(4770),y=i(1434),f=i(1130),O=i(7317),z=i(8441);function U(n,r){if(1&n&&(t.TgZ(0,"mat-option",6),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij(" ",e.display_name||e.name," ")}}function J(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",7),t.NdJ("click",function(){return t.CHM(e),t.oxw().addItem()}),t._uU(1," Add Item "),t.qZA()}}function j(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",7),t.NdJ("click",function(){return t.CHM(e),t.oxw().editConfig()}),t._uU(1," Edit Config "),t.qZA()}}function A(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",7),t.NdJ("click",function(){return t.CHM(e),t.oxw().importMenu()}),t._uU(1," Import Menu "),t.qZA()}}let P=(()=>{class n extends d.KG{constructor(e,o,s,a,R){super(),this._orders=e,this._catering=o,this._org=s,this._route=a,this._router=R,this.zones=[],this.levels=this._org.active_levels,this.setDate=l=>this._orders.filters=Object.assign(Object.assign({},this._orders.filters),{date:l}),this.updateZones=l=>{this._router.navigate([],{relativeTo:this._route,queryParams:{zone_ids:l.join(",")}}),this._orders.filters=Object.assign(Object.assign({},this._orders.filters),{zones:[l]})},this.addItem=()=>this._catering.addItem(),this.editConfig=()=>this._catering.editConfig(),this.importMenu=()=>this._catering.importMenu()}ngOnInit(){return(0,x.mG)(this,void 0,void 0,function*(){yield this._org.initialised.pipe((0,T.P)(e=>e)).toPromise(),this.subscription("route.query",this._route.queryParamMap.subscribe(e=>{if(e.has("zone_ids")){const o=e.get("zone_ids").split(",");if(!o.length)return;const s=this._org.levelWithID(o);if(this.zones=o,!s)return;this._org.building=this._org.buildings.find(a=>a.id===s.parent_id)}})),this.subscription("route.params",this._route.paramMap.subscribe(e=>this.page=e.has("view")?e.get("view"):"")),this.subscription("levels",this._org.active_levels.subscribe(e=>{this.zones=this.zones.filter(o=>e.find(s=>s.id===o)),!this.zones.length&&e.length&&this.zones.push(e[0].id),this.updateZones(this.zones)}))})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(u.Ii),t.Y36(u.jW),t.Y36(M.w7),t.Y36(g.gz),t.Y36(g.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["catering-topbar"]],features:[t.qOj],decls:9,vars:7,consts:[["appearance","outline"],["multiple","","placeholder","All Levels",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["mat-button","",3,"click",4,"ngIf"],[1,"flex-1","w-2"],[3,"dateChange"],[3,"value"],["mat-button","",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"mat-form-field",0)(1,"mat-select",1),t.NdJ("ngModelChange",function(a){return o.zones=a})("ngModelChange",function(a){return o.updateZones(a)}),t.YNc(2,U,2,2,"mat-option",2),t.ALo(3,"async"),t.qZA()(),t.YNc(4,J,2,0,"button",3),t.YNc(5,j,2,0,"button",3),t.YNc(6,A,2,0,"button",3),t._UZ(7,"div",4),t.TgZ(8,"date-options",5),t.NdJ("dateChange",function(a){return o.setDate(a)}),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngModel",o.zones),t.xp6(1),t.Q6J("ngForOf",t.lcZ(3,5,o.levels)),t.xp6(2),t.Q6J("ngIf","menu"===o.page),t.xp6(1),t.Q6J("ngIf","menu"===o.page),t.xp6(1),t.Q6J("ngIf","menu"===o.page))},directives:[Z.KE,y.gD,p.JJ,p.On,c.sg,f.ey,c.O5,O.lW,z.E],pipes:[c.Ov],styles:["[_nghost-%COMP%]{display:flex;align-items:center;background-color:#fff;height:5em;padding:0 1em;border-bottom:1px solid #ccc}[_nghost-%COMP%] > *[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-left:.5rem}mat-form-field[_ngcontent-%COMP%]{height:3.25em;width:8em}\n/*# sourceMappingURL=catering-topbar.component.ts-angular-inline--96.css.map*/"]}),n})();var I=i(2189),N=i(8501);const Y=["app-catering",""];function w(n,r){1&n&&t._UZ(0,"catering-order-list",5)}function Q(n,r){1&n&&t._UZ(0,"catering-menu",5)}const F=function(){return["/catering","menu"]},E=function(){return["/catering","orders"]};function S(n,r){1&n&&(t.TgZ(0,"div",6)(1,"a",7)(2,"div",8),t._UZ(3,"div",9),t.TgZ(4,"span",10),t._uU(5,"Menus and Pricing"),t.qZA()(),t.TgZ(6,"div",11),t._uU(7," View and Edit Menus and Pricing "),t.qZA()(),t.TgZ(8,"a",7)(9,"div",8),t._UZ(10,"div",9),t.TgZ(11,"span",10),t._uU(12,"Today's Orders"),t.qZA()(),t.TgZ(13,"div",11),t._uU(14," View Catering Orders and their statuses upon arrival "),t.qZA()()()),2&n&&(t.xp6(1),t.Q6J("routerLink",t.DdM(6,F)),t.xp6(1),t.Udp("background-image","url(assets/menus.jpg)"),t.xp6(6),t.Q6J("routerLink",t.DdM(7,E)),t.xp6(1),t.Udp("background-image","url(assets/orders.jpg)"))}let h=(()=>{class n extends d.KG{constructor(e){super(),this._route=e}ngOnInit(){this.subscription("route.params",this._route.paramMap.subscribe(e=>this.page=e.has("view")?e.get("view"):""))}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(g.gz))},n.\u0275cmp=t.Xpm({type:n,selectors:[["","app-catering",""]],features:[t.qOj],attrs:Y,decls:7,vars:3,consts:[[1,"relative","w-full","flex","flex-col"],[1,"relative","z-10"],[3,"ngSwitch"],["class","flex-1",4,"ngSwitchCase"],["class","flex flex-1 items-center justify-center",4,"ngSwitchDefault"],[1,"flex-1"],[1,"flex","flex-1","items-center","justify-center"],["matRipple","",1,"rounded","flex","flex-col","items-center","bg-white","shadow","text-black",3,"routerLink"],["name","img",1,"relative","w-full","flex","flex-1","items-center","justify-center","text-2xl","text-white","bg-center","bg-cover"],[1,"absolute","inset-0","bg-black","opacity-60","z-0"],[1,"z-10"],[1,"p-2","h-14","w-full","text-sm","text-center","flex","items-center","justify-center"]],template:function(e,o){1&e&&(t._UZ(0,"sidebar"),t.TgZ(1,"main",0),t._UZ(2,"catering-topbar",1),t.ynx(3,2),t.YNc(4,w,1,0,"catering-order-list",3),t.YNc(5,Q,1,0,"catering-menu",3),t.YNc(6,S,15,8,"div",4),t.BQk(),t.qZA()),2&e&&(t.xp6(3),t.Q6J("ngSwitch",o.page),t.xp6(1),t.Q6J("ngSwitchCase","orders"),t.xp6(1),t.Q6J("ngSwitchCase","menu"))},directives:[b.k,P,c.RF,c.n9,I.I,N.B,c.ED,g.yS,f.wG],styles:["[_nghost-%COMP%]{display:flex;height:100%;width:100%;background:var(--bg)}a[_ngcontent-%COMP%]{width:28rem;height:16rem;margin-left:.5rem;text-decoration:none;transition:background .2s}a[_ngcontent-%COMP%]:hover{background-color:#00000001!important}a[_ngcontent-%COMP%]:first-child{margin:0}\n/*# sourceMappingURL=catering.component.ts-angular-inline--95.css.map*/"]}),n})();const D=[{path:"",component:h},{path:":view",component:h}];let L=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[c.ez,p.u5,_.v,C.Nh,v.Hi,u.uy,g.Bz.forChild(D)]]}),n})()}}]);
//# sourceMappingURL=apps_concierge_src_app_catering_catering_module_ts.js.map