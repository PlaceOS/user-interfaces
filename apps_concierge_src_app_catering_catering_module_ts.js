"use strict";(self.webpackChunkconcierge=self.webpackChunkconcierge||[]).push([["apps_concierge_src_app_catering_catering_module_ts"],{28206:(bt,v,r)=>{r.r(v),r.d(v,{CateringModule:()=>ut});var s=r(60316),f=r(34456),p=r(26842),y=r(38223),j=r(12772),R=r(40363),m=r(77375),t=r(7404),w=r(74605),d=r(85060),b=r(48519),x=r(41623),h=r(89204),I=r(35443),F=r(57871),k=r(33602),G=r(12185),u=r(75566),M=r(46815),$=r(42175),E=r(12587),V=r(94584),Y=r(12236),S=r(24950),N=r(25175),O=r(80640),X=r(69434),z=r(56062);function P(e,a){if(1&e&&(t.j41(0,"div",18),t.EFF(1),t.nI1(2,"building"),t.j41(3,"span",19),t.EFF(4," - "),t.k0s()()),2&e){let n;const o=t.XpG().$implicit;t.R7$(),t.SpI(" ",null==(n=t.bMT(2,1,o.parent_id))?null:n.display_name," ")}}function U(e,a){if(1&e&&(t.j41(0,"mat-option",15)(1,"div",16),t.DNE(2,P,5,3,"div",17),t.j41(3,"div"),t.EFF(4),t.k0s()()()),2&e){const n=a.$implicit,o=t.XpG();t.Y8G("value",n.id),t.R7$(2),t.Y8G("ngIf",o.use_region),t.R7$(2),t.SpI(" ",n.display_name||n.name," ")}}function D(e,a){1&e&&t.nrm(0,"div",20)}function B(e,a){if(1&e){const n=t.RV6();t.j41(0,"button",21),t.bIt("click",function(){t.eBV(n);const i=t.XpG();return t.Njj(i.addItem())}),t.j41(1,"app-icon",22),t.EFF(2,"add"),t.k0s()()}}function L(e,a){if(1&e){const n=t.RV6();t.j41(0,"button",23),t.bIt("click",function(){t.eBV(n);const i=t.XpG();return t.Njj(i.editConfig())}),t.j41(1,"app-icon",22),t.EFF(2,"menu_book"),t.k0s()()}}function A(e,a){if(1&e){const n=t.RV6();t.j41(0,"button",24),t.bIt("click",function(){t.eBV(n);const i=t.XpG();return t.Njj(i.importMenu())}),t.j41(1,"app-icon",22),t.EFF(2,"cloud_upload"),t.k0s()()}}function J(e,a){if(1&e){const n=t.RV6();t.j41(0,"button",25),t.bIt("click",function(){t.eBV(n);const i=t.XpG();return t.Njj(i.setRoomAvailability())}),t.j41(1,"app-icon",22),t.EFF(2,"event_available"),t.k0s()()}}function W(e,a){if(1&e){const n=t.RV6();t.j41(0,"button",26),t.bIt("click",function(){t.eBV(n);const i=t.XpG();return t.Njj(i.setChargeCodes())}),t.j41(1,"app-icon",22),t.EFF(2,"payments"),t.k0s()()}}function Z(e,a){1&e&&t.nrm(0,"div",20)}function Q(e,a){if(1&e){const n=t.RV6();t.j41(0,"date-options",27),t.bIt("dateChange",function(i){t.eBV(n);const c=t.XpG();return t.Njj(c.setDate(i))}),t.k0s()}}let C=(()=>{class e extends m.Tv{get building(){return this._org.building}get use_region(){return!!this._settings.get("app.use_region")}constructor(n,o,i,c,g,ft,ht){super(),this._orders=n,this._catering=o,this._org=i,this._route=c,this._router=g,this._dialog=ft,this._settings=ht,this.zones=[],this.filters=this._orders.filters,this.levels=(0,$.zV)([this._org.active_building,this._org.active_region]).pipe((0,I.T)(([l,vt])=>this._settings.get("app.use_region")?this._org.levelsForRegion(vt):this._org.levelsForBuilding(l))),this.setDate=l=>this._orders.filters={...this._orders.filters,date:l},this.setSearch=l=>this._orders.filters={...this._orders.filters,search:l},this.updateZones=l=>{this._router.navigate([],{relativeTo:this._route,queryParams:{zone_ids:l.join(",")}}),this._orders.filters={...this._orders.filters,zones:[l]},this._catering.zone=l[0]},this.addItem=()=>this._catering.addItem(),this.editConfig=()=>this._catering.editConfig(),this.importMenu=()=>this._catering.importMenu()}ngOnInit(){var n=this;return(0,h.A)(function*(){yield n._org.initialised.pipe((0,F.$)(o=>o)).toPromise(),n._catering.zone=(n._orders.filters?.zones||[])[0]||n._org.building?.id,n.subscription("route.query",n._route.queryParamMap.subscribe(o=>{if(o.has("zone_ids")){const i=o.get("zone_ids").split(",");if(!i.length)return;const c=n._org.levelWithID(i);if(n.zones=i,!c)return;n._org.building=n._org.buildings.find(g=>g.id===c.parent_id)}})),n.subscription("route.params",n._route.paramMap.subscribe(o=>n.page=o.has("view")?o.get("view"):""))})()}setRoomAvailability(){var n=this;return(0,h.A)(function*(){const o=n._dialog.open(M.DJ,{data:{type:"Catering",disabled_rooms:yield n._catering.availability.pipe((0,k.s)(1)).toPromise()}});n.subscription("room-availability",o.componentInstance.change.subscribe(function(){var i=(0,h.A)(function*(c){yield n._catering.saveSettings({disabled_rooms:c}).catch(),o.componentInstance.loading=!1});return function(c){return i.apply(this,arguments)}}()))})()}setChargeCodes(){this._dialog.open(u.sp)}static#t=this.\u0275fac=function(o){return new(o||e)(t.rXU(u.QB),t.rXU(u._I),t.rXU(G.yb),t.rXU(p.nX),t.rXU(p.Ix),t.rXU(E.bZ),t.rXU(m.h$))};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["catering-topbar"]],features:[t.Vt3],decls:18,vars:14,consts:[[1,"flex","items-center","w-full","pt-4","pb-2","px-8","space-x-2"],[1,"text-2xl","font-medium"],[1,"flex-1","w-px"],[1,"mr-2",3,"modelChange","model"],[1,"flex","items-center","bg-base-100","h-20","px-8","space-x-2"],["appearance","outline",1,"no-subscript","w-60"],["placeholder","All Levels","multiple","",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["class","flex-1 w-2",4,"ngIf"],["icon","","matRipple","","matTooltip","Add Item","class","bg-secondary text-secondary-content rounded h-12 w-12",3,"click",4,"ngIf"],["icon","","matRipple","","matTooltip","Edit Config","class","bg-secondary text-secondary-content rounded h-12 w-12",3,"click",4,"ngIf"],["icon","","matRipple","","matTooltip","Import Menu","class","bg-secondary text-secondary-content rounded h-12 w-12",3,"click",4,"ngIf"],["icon","","matRipple","","matTooltip","Room Availability","class","bg-secondary text-secondary-content rounded h-12 w-12",3,"click",4,"ngIf"],["icon","","matRipple","","matTooltip","Charge Codes","class","bg-secondary text-secondary-content rounded h-12 w-12",3,"click",4,"ngIf"],[3,"dateChange",4,"ngIf"],[3,"value"],[1,"flex","flex-col-reverse"],["class","text-xs opacity-30",4,"ngIf"],[1,"text-xs","opacity-30"],[1,"opacity-0"],[1,"flex-1","w-2"],["icon","","matRipple","","matTooltip","Add Item",1,"bg-secondary","text-secondary-content","rounded","h-12","w-12",3,"click"],[1,"text-2xl"],["icon","","matRipple","","matTooltip","Edit Config",1,"bg-secondary","text-secondary-content","rounded","h-12","w-12",3,"click"],["icon","","matRipple","","matTooltip","Import Menu",1,"bg-secondary","text-secondary-content","rounded","h-12","w-12",3,"click"],["icon","","matRipple","","matTooltip","Room Availability",1,"bg-secondary","text-secondary-content","rounded","h-12","w-12",3,"click"],["icon","","matRipple","","matTooltip","Charge Codes",1,"bg-secondary","text-secondary-content","rounded","h-12","w-12",3,"click"],[3,"dateChange"]],template:function(o,i){1&o&&(t.j41(0,"div",0)(1,"h2",1),t.EFF(2),t.k0s(),t.nrm(3,"div",2),t.j41(4,"searchbar",3),t.bIt("modelChange",function(g){return i.setSearch(g)}),t.k0s()(),t.j41(5,"div",4)(6,"mat-form-field",5)(7,"mat-select",6),t.bIt("ngModelChange",function(g){return i.updateZones(g)}),t.DNE(8,U,5,3,"mat-option",7),t.nI1(9,"async"),t.k0s()(),t.DNE(10,D,1,0,"div",8)(11,B,3,0,"button",9)(12,L,3,0,"button",10)(13,A,3,0,"button",11)(14,J,3,0,"button",12)(15,W,3,0,"button",13)(16,Z,1,0,"div",8)(17,Q,1,0,"date-options",14),t.k0s()),2&o&&(t.R7$(2),t.SpI(" Catering ","menu"===i.page?"Menu":"Orders"," "),t.R7$(2),t.Y8G("model",null==i.filters?null:i.filters.search),t.R7$(3),t.Y8G("ngModel",null==i.filters?null:i.filters.zones),t.R7$(),t.Y8G("ngForOf",t.bMT(9,12,i.levels)),t.R7$(2),t.Y8G("ngIf","menu"===i.page),t.R7$(),t.Y8G("ngIf","menu"===i.page&&(!i.zones[0]||i.zones[0]===(null==i.building?null:i.building.id))),t.R7$(),t.Y8G("ngIf","menu"===i.page),t.R7$(),t.Y8G("ngIf","menu"===i.page),t.R7$(),t.Y8G("ngIf","menu"===i.page),t.R7$(),t.Y8G("ngIf","menu"===i.page),t.R7$(),t.Y8G("ngIf","menu"!==i.page),t.R7$(),t.Y8G("ngIf","menu"!==i.page))},dependencies:[s.Sq,s.bT,f.BC,f.vS,V.o,Y.x,S.rl,N.VO,d.wT,O.oV,d.r6,X.R,s.Jj,z.b],styles:["mat-form-field[_ngcontent-%COMP%]{height:3.25em;width:8em}\n\n/*# sourceMappingURL=catering-topbar.component.ts-angular-inline--158.css.map*/"]})}return e})();const H=["app-catering",""],K=()=>["/book","catering","menu"],q=()=>["/book","catering","orders"];function tt(e,a){1&e&&(t.j41(0,"div",7),t.EFF(1,' To edit the menu select "All Levels" from the top left '),t.k0s())}function et(e,a){1&e&&t.nrm(0,"catering-order-list",8)}function nt(e,a){1&e&&t.nrm(0,"catering-menu",8)}function it(e,a){1&e&&(t.j41(0,"div",9)(1,"a",10)(2,"div",11),t.nrm(3,"div",12),t.j41(4,"span",13),t.EFF(5,"Menus and Pricing"),t.k0s()(),t.j41(6,"div",14),t.EFF(7," View and Edit Menus and Pricing "),t.k0s()(),t.j41(8,"a",10)(9,"div",11),t.nrm(10,"div",12),t.j41(11,"span",13),t.EFF(12,"Today's Orders"),t.k0s()(),t.j41(13,"div",14),t.EFF(14," View Catering Orders and their statuses upon arrival "),t.k0s()()()),2&e&&(t.R7$(),t.Y8G("routerLink",t.lJ4(6,K)),t.R7$(),t.xc7("background-image","url(assets/menus.jpg)"),t.R7$(6),t.Y8G("routerLink",t.lJ4(7,q)),t.R7$(),t.xc7("background-image","url(assets/orders.jpg)"))}let _=(()=>{class e extends m.Tv{constructor(n){super(),this._route=n}ngOnInit(){this.subscription("route.params",this._route.paramMap.subscribe(n=>this.page=n.has("view")?n.get("view"):""))}static#t=this.\u0275fac=function(o){return new(o||e)(t.rXU(p.nX))};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["","app-catering",""]],features:[t.Vt3],attrs:H,decls:9,vars:4,consts:[[1,"relative","w-full","flex","flex-col","bg-base-200"],[1,"relative","z-10"],["class","p-2 flex items-center justify-center bg-info text-info-content text-sm",4,"ngIf"],[1,"flex","flex-1","h-1/2","w-full","overflow-auto"],[3,"ngSwitch"],["class","flex-1",4,"ngSwitchCase"],["class","flex flex-1 flex-wrap items-center justify-center",4,"ngSwitchDefault"],[1,"p-2","flex","items-center","justify-center","bg-info","text-info-content","text-sm"],[1,"flex-1"],[1,"flex","flex-1","flex-wrap","items-center","justify-center"],["matRipple","",1,"rounded","flex","flex-col","items-center","bg-base-100","shadow","text-black",3,"routerLink"],["name","img",1,"relative","w-full","flex","flex-1","items-center","justify-center","text-2xl","text-white","bg-center","bg-cover"],[1,"absolute","inset-0","bg-neutral","opacity-60","z-0"],[1,"z-10"],[1,"p-2","h-14","w-full","text-sm","text-center","flex","items-center","justify-center"]],template:function(o,i){1&o&&(t.nrm(0,"sidebar"),t.j41(1,"main",0),t.nrm(2,"catering-topbar",1),t.DNE(3,tt,2,0,"div",2),t.j41(4,"div",3),t.qex(5,4),t.DNE(6,et,1,0,"catering-order-list",5)(7,nt,1,0,"catering-menu",5)(8,it,15,8,"div",6),t.bVm(),t.k0s()()),2&o&&(t.R7$(3),t.Y8G("ngIf","menu"===i.page),t.R7$(2),t.Y8G("ngSwitch",i.page),t.R7$(),t.Y8G("ngSwitchCase","orders"),t.R7$(),t.Y8G("ngSwitchCase","menu"))},dependencies:[s.bT,s.ux,s.e1,s.fG,w.k,d.r6,b.o,x.r,p.Wk,C],styles:["[_nghost-%COMP%]{display:flex;height:100%;width:100%}a[_ngcontent-%COMP%]{width:28rem;height:16rem;margin-left:.5rem;text-decoration:none;transition:background .2s}a[_ngcontent-%COMP%]:hover{opacity:.8}a[_ngcontent-%COMP%]:first-child{margin:0}\n\n/*# sourceMappingURL=catering.component.ts-angular-inline--157.css.map*/"]})}return e})();var ot=r(45189),rt=r(96843);const at=["app-new-catering",""],st=()=>["/catering","menu"],ct=()=>["/catering","orders"];function lt(e,a){1&e&&(t.j41(0,"div",9),t.EFF(1," To edit the menu de-select all levels from the top left "),t.k0s())}function pt(e,a){1&e&&t.nrm(0,"catering-order-list",10)}function gt(e,a){1&e&&t.nrm(0,"catering-menu",10)}function mt(e,a){1&e&&(t.j41(0,"div",11)(1,"a",12)(2,"div",13),t.nrm(3,"div",14),t.j41(4,"span",15),t.EFF(5,"Menus and Pricing"),t.k0s()(),t.j41(6,"div",16),t.EFF(7," View and Edit Menus and Pricing "),t.k0s()(),t.j41(8,"a",12)(9,"div",13),t.nrm(10,"div",14),t.j41(11,"span",15),t.EFF(12,"Today's Orders"),t.k0s()(),t.j41(13,"div",16),t.EFF(14," View Catering Orders and their statuses upon arrival "),t.k0s()()()),2&e&&(t.R7$(),t.Y8G("routerLink",t.lJ4(6,st)),t.R7$(),t.xc7("background-image","url(assets/menus.jpg)"),t.R7$(6),t.Y8G("routerLink",t.lJ4(7,ct)),t.R7$(),t.xc7("background-image","url(assets/orders.jpg)"))}let T=(()=>{class e extends m.Tv{constructor(n){super(),this._route=n}ngOnInit(){this.subscription("route.params",this._route.paramMap.subscribe(n=>this.page=n.has("view")?n.get("view"):""))}static#t=this.\u0275fac=function(o){return new(o||e)(t.rXU(p.nX))};static#e=this.\u0275cmp=t.VBU({type:e,selectors:[["","app-new-catering",""]],features:[t.Vt3],attrs:at,decls:12,vars:4,consts:[[1,"flex","flex-1","h-px"],[1,"flex","flex-col","flex-1","w-1/2","h-full"],[1,"relative","z-10"],[1,"flex","flex-col","px-8","flex-1","h-1/2"],["class","p-2 flex items-center justify-center bg-info text-white text-sm mb-4 rounded",4,"ngIf"],[1,"flex","flex-1","h-1/2","w-full","overflow-auto"],[3,"ngSwitch"],["class","flex-1",4,"ngSwitchCase"],["class","flex flex-1 flex-wrap items-center justify-center",4,"ngSwitchDefault"],[1,"p-2","flex","items-center","justify-center","bg-info","text-white","text-sm","mb-4","rounded"],[1,"flex-1"],[1,"flex","flex-1","flex-wrap","items-center","justify-center"],["matRipple","",1,"rounded","flex","flex-col","items-center","bg-base-100","shadow","text-black",3,"routerLink"],["name","img",1,"relative","w-full","flex","flex-1","items-center","justify-center","text-2xl","text-white","bg-center","bg-cover"],[1,"absolute","inset-0","bg-neutral","opacity-60","z-0"],[1,"z-10"],[1,"p-2","h-14","w-full","text-sm","text-center","flex","items-center","justify-center"]],template:function(o,i){1&o&&(t.nrm(0,"app-topbar"),t.j41(1,"div",0),t.nrm(2,"app-sidebar"),t.j41(3,"main",1),t.nrm(4,"catering-topbar",2),t.j41(5,"div",3),t.DNE(6,lt,2,0,"div",4),t.j41(7,"div",5),t.qex(8,6),t.DNE(9,pt,1,0,"catering-order-list",7)(10,gt,1,0,"catering-menu",7)(11,mt,15,8,"div",8),t.bVm(),t.k0s()()()()),2&o&&(t.R7$(6),t.Y8G("ngIf","menu"===i.page),t.R7$(2),t.Y8G("ngSwitch",i.page),t.R7$(),t.Y8G("ngSwitchCase","orders"),t.R7$(),t.Y8G("ngSwitchCase","menu"))},dependencies:[s.bT,s.ux,s.e1,s.fG,ot.S,rt.c,d.r6,b.o,x.r,p.Wk,C],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%;width:100%;background-color:var(--b1)}a[_ngcontent-%COMP%]{width:28rem;height:16rem;margin-left:.5rem;text-decoration:none;transition:background .2s}a[_ngcontent-%COMP%]:hover{opacity:.8}a[_ngcontent-%COMP%]:first-child{margin:0}\n\n/*# sourceMappingURL=new-catering.component.ts-angular-inline--159.css.map*/"]})}return e})();const dt=[{path:"",component:_},{path:"new",component:T},{path:":view",component:_},{path:"new/:view",component:T}];let ut=(()=>{class e{static#t=this.\u0275fac=function(o){return new(o||e)};static#e=this.\u0275mod=t.$C({type:e});static#n=this.\u0275inj=t.G2t({imports:[s.MD,f.YN,R.r,y.RI,j.YN,u.bR,p.iI.forChild(dt)]})}return e})()}}]);
//# sourceMappingURL=apps_concierge_src_app_catering_catering_module_ts.js.map