"use strict";(self.webpackChunkconcierge=self.webpackChunkconcierge||[]).push([["apps_concierge_src_app_catering_catering_module_ts"],{28206:(ct,b,r)=>{r.r(b),r.d(b,{CateringModule:()=>at});var s=r(60316),d=r(34456),p=r(26842),j=r(38223),R=r(12772),y=r(40363),f=r(82333),t=r(68559),w=r(74605),m=r(85060),v=r(48519),C=r(41623),h=r(89204),F=r(57871),I=r(33602),k=r(12185),u=r(75566),M=r(46815),G=r(12587),E=r(94584),$=r(24950),z=r(25175),V=r(80640),Y=r(69434);function O(n,a){if(1&n&&(t.j41(0,"mat-option",3),t.EFF(1),t.k0s()),2&n){const e=a.$implicit;t.Y8G("value",e.id),t.R7$(),t.SpI(" ",e.display_name||e.name," ")}}function N(n,a){if(1&n){const e=t.RV6();t.j41(0,"button",12),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.addItem())}),t.j41(1,"app-icon",13),t.EFF(2,"add"),t.k0s()()}}function S(n,a){if(1&n){const e=t.RV6();t.j41(0,"button",14),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.editConfig())}),t.j41(1,"app-icon",13),t.EFF(2,"menu_book"),t.k0s()()}}function P(n,a){if(1&n){const e=t.RV6();t.j41(0,"button",15),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.importMenu())}),t.j41(1,"app-icon",13),t.EFF(2,"cloud_upload"),t.k0s()()}}function X(n,a){if(1&n){const e=t.RV6();t.j41(0,"button",16),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.setRoomAvailability())}),t.j41(1,"app-icon",13),t.EFF(2,"event_available"),t.k0s()()}}function U(n,a){if(1&n){const e=t.RV6();t.j41(0,"button",17),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.setChargeCodes())}),t.j41(1,"app-icon",13),t.EFF(2,"payments"),t.k0s()()}}let _=(()=>{class n extends f.Tv{get building(){return this._org.building}constructor(e,o,i,c,l,st){super(),this._orders=e,this._catering=o,this._org=i,this._route=c,this._router=l,this._dialog=st,this.zones=[],this.levels=this._org.active_levels,this.setDate=g=>this._orders.filters={...this._orders.filters,date:g},this.updateZones=g=>{this._router.navigate([],{relativeTo:this._route,queryParams:{zone_ids:g.join(",")}}),this._orders.filters={...this._orders.filters,zones:[g]},this._catering.zone=g[0]||this._catering.zone},this.addItem=()=>this._catering.addItem(),this.editConfig=()=>this._catering.editConfig(),this.importMenu=()=>this._catering.importMenu()}ngOnInit(){var e=this;return(0,h.A)(function*(){yield e._org.initialised.pipe((0,F.$)(o=>o)).toPromise(),e._catering.zone=(e._orders.filters?.zones||[])[0]||e._org.building?.id,e.subscription("route.query",e._route.queryParamMap.subscribe(o=>{if(o.has("zone_ids")){const i=o.get("zone_ids").split(",");if(!i.length)return;const c=e._org.levelWithID(i);if(e.zones=i,!c)return;e._org.building=e._org.buildings.find(l=>l.id===c.parent_id)}})),e.subscription("route.params",e._route.paramMap.subscribe(o=>e.page=o.has("view")?o.get("view"):"")),e.subscription("levels",e._org.active_levels.subscribe(o=>{e.zones=e.zones.filter(i=>o.find(c=>c.id===i)),!e.zones.length&&o.length&&e.zones.push(o[0].id),e.updateZones(e.zones)}))})()}setRoomAvailability(){var e=this;return(0,h.A)(function*(){const o=e._dialog.open(M.DJ,{data:{type:"Catering",disabled_rooms:yield e._catering.availability.pipe((0,I.s)(1)).toPromise()}});e.subscription("room-availability",o.componentInstance.change.subscribe(function(){var i=(0,h.A)(function*(c){yield e._catering.saveSettings({disabled_rooms:c}).catch(),o.componentInstance.loading=!1});return function(c){return i.apply(this,arguments)}}()))})()}setChargeCodes(){this._dialog.open(u.sp)}static#t=this.\u0275fac=function(o){return new(o||n)(t.rXU(u.QB),t.rXU(u._I),t.rXU(k.yb),t.rXU(p.nX),t.rXU(p.Ix),t.rXU(G.bZ))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["catering-topbar"]],features:[t.Vt3],decls:14,vars:10,consts:[[1,"flex","items-center","bg-base-100","h-20","px-4","border-b","border-base-200","space-x-2"],["appearance","outline"],["placeholder","All Levels",3,"ngModelChange","ngModel"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["btn","","matRipple","","matTooltip","Add Item",3,"click",4,"ngIf"],["btn","","matRipple","","matTooltip","Edit Config",3,"click",4,"ngIf"],["btn","","matRipple","","matTooltip","Import Menu",3,"click",4,"ngIf"],["btn","","matRipple","","matTooltip","Room Availability",3,"click",4,"ngIf"],["btn","","matRipple","","matTooltip","Charge Codes",3,"click",4,"ngIf"],[1,"flex-1","w-2"],[3,"dateChange"],["btn","","matRipple","","matTooltip","Add Item",3,"click"],[1,"text-2xl"],["btn","","matRipple","","matTooltip","Edit Config",3,"click"],["btn","","matRipple","","matTooltip","Import Menu",3,"click"],["btn","","matRipple","","matTooltip","Room Availability",3,"click"],["btn","","matRipple","","matTooltip","Charge Codes",3,"click"]],template:function(o,i){1&o&&(t.j41(0,"div",0)(1,"mat-form-field",1)(2,"mat-select",2),t.mxI("ngModelChange",function(l){return t.DH7(i.zones[0],l)||(i.zones[0]=l),l}),t.bIt("ngModelChange",function(l){return i.updateZones([l])}),t.j41(3,"mat-option",3),t.EFF(4," All Levels "),t.k0s(),t.DNE(5,O,2,2,"mat-option",4),t.nI1(6,"async"),t.k0s()(),t.DNE(7,N,3,0,"button",5)(8,S,3,0,"button",6)(9,P,3,0,"button",7)(10,X,3,0,"button",8)(11,U,3,0,"button",9),t.nrm(12,"div",10),t.j41(13,"date-options",11),t.bIt("dateChange",function(l){return i.setDate(l)}),t.k0s()()),2&o&&(t.R7$(2),t.R50("ngModel",i.zones[0]),t.R7$(),t.Y8G("value",null==i.building?null:i.building.id),t.R7$(2),t.Y8G("ngForOf",t.bMT(6,8,i.levels)),t.R7$(2),t.Y8G("ngIf","menu"===i.page&&(!i.zones[0]||i.zones[0]===(null==i.building?null:i.building.id))),t.R7$(),t.Y8G("ngIf","menu"===i.page),t.R7$(),t.Y8G("ngIf","menu"===i.page),t.R7$(),t.Y8G("ngIf","menu"===i.page),t.R7$(),t.Y8G("ngIf","menu"===i.page))},dependencies:[s.Sq,s.bT,d.BC,d.vS,E.o,$.rl,z.VO,m.wT,V.oV,m.r6,Y.R,s.Jj],styles:["mat-form-field[_ngcontent-%COMP%]{height:3.25em;width:8em}\n\n/*# sourceMappingURL=catering-topbar.component.ts-angular-inline--155.css.map*/"]})}return n})();const D=["app-catering",""],A=()=>["/book","catering","menu"],L=()=>["/book","catering","orders"];function B(n,a){1&n&&(t.j41(0,"div",7),t.EFF(1,' To edit the menu select "All Levels" from the top left '),t.k0s())}function J(n,a){1&n&&t.nrm(0,"catering-order-list",8)}function Z(n,a){1&n&&t.nrm(0,"catering-menu",8)}function W(n,a){1&n&&(t.j41(0,"div",9)(1,"a",10)(2,"div",11),t.nrm(3,"div",12),t.j41(4,"span",13),t.EFF(5,"Menus and Pricing"),t.k0s()(),t.j41(6,"div",14),t.EFF(7," View and Edit Menus and Pricing "),t.k0s()(),t.j41(8,"a",10)(9,"div",11),t.nrm(10,"div",12),t.j41(11,"span",13),t.EFF(12,"Today's Orders"),t.k0s()(),t.j41(13,"div",14),t.EFF(14," View Catering Orders and their statuses upon arrival "),t.k0s()()()),2&n&&(t.R7$(),t.Y8G("routerLink",t.lJ4(6,A)),t.R7$(),t.xc7("background-image","url(assets/menus.jpg)"),t.R7$(6),t.Y8G("routerLink",t.lJ4(7,L)),t.R7$(),t.xc7("background-image","url(assets/orders.jpg)"))}let x=(()=>{class n extends f.Tv{constructor(e){super(),this._route=e}ngOnInit(){this.subscription("route.params",this._route.paramMap.subscribe(e=>this.page=e.has("view")?e.get("view"):""))}static#t=this.\u0275fac=function(o){return new(o||n)(t.rXU(p.nX))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["","app-catering",""]],features:[t.Vt3],attrs:D,decls:9,vars:4,consts:[[1,"relative","w-full","flex","flex-col","bg-base-200"],[1,"relative","z-10"],["class","p-2 flex items-center justify-center bg-info text-info-content text-sm",4,"ngIf"],[1,"flex","flex-1","h-1/2","w-full","overflow-auto"],[3,"ngSwitch"],["class","flex-1",4,"ngSwitchCase"],["class","flex flex-1 flex-wrap items-center justify-center",4,"ngSwitchDefault"],[1,"p-2","flex","items-center","justify-center","bg-info","text-info-content","text-sm"],[1,"flex-1"],[1,"flex","flex-1","flex-wrap","items-center","justify-center"],["matRipple","",1,"rounded","flex","flex-col","items-center","bg-base-100","shadow","text-black",3,"routerLink"],["name","img",1,"relative","w-full","flex","flex-1","items-center","justify-center","text-2xl","text-white","bg-center","bg-cover"],[1,"absolute","inset-0","bg-neutral","opacity-60","z-0"],[1,"z-10"],[1,"p-2","h-14","w-full","text-sm","text-center","flex","items-center","justify-center"]],template:function(o,i){1&o&&(t.nrm(0,"sidebar"),t.j41(1,"main",0),t.nrm(2,"catering-topbar",1),t.DNE(3,B,2,0,"div",2),t.j41(4,"div",3),t.qex(5,4),t.DNE(6,J,1,0,"catering-order-list",5)(7,Z,1,0,"catering-menu",5)(8,W,15,8,"div",6),t.bVm(),t.k0s()()),2&o&&(t.R7$(3),t.Y8G("ngIf","menu"===i.page),t.R7$(2),t.Y8G("ngSwitch",i.page),t.R7$(),t.Y8G("ngSwitchCase","orders"),t.R7$(),t.Y8G("ngSwitchCase","menu"))},dependencies:[s.bT,s.ux,s.e1,s.fG,w.k,m.r6,v.o,C.r,p.Wk,_],styles:["[_nghost-%COMP%]{display:flex;height:100%;width:100%}a[_ngcontent-%COMP%]{width:28rem;height:16rem;margin-left:.5rem;text-decoration:none;transition:background .2s}a[_ngcontent-%COMP%]:hover{opacity:.8}a[_ngcontent-%COMP%]:first-child{margin:0}\n\n/*# sourceMappingURL=catering.component.ts-angular-inline--154.css.map*/"]})}return n})();var H=r(45189),Q=r(96843);const K=["app-new-catering",""],q=()=>["/catering","menu"],tt=()=>["/catering","orders"];function et(n,a){1&n&&(t.j41(0,"div",8),t.EFF(1,' To edit the menu select "All Levels" from the top left '),t.k0s())}function nt(n,a){1&n&&t.nrm(0,"catering-order-list",9)}function it(n,a){1&n&&t.nrm(0,"catering-menu",9)}function ot(n,a){1&n&&(t.j41(0,"div",10)(1,"a",11)(2,"div",12),t.nrm(3,"div",13),t.j41(4,"span",14),t.EFF(5,"Menus and Pricing"),t.k0s()(),t.j41(6,"div",15),t.EFF(7," View and Edit Menus and Pricing "),t.k0s()(),t.j41(8,"a",11)(9,"div",12),t.nrm(10,"div",13),t.j41(11,"span",14),t.EFF(12,"Today's Orders"),t.k0s()(),t.j41(13,"div",15),t.EFF(14," View Catering Orders and their statuses upon arrival "),t.k0s()()()),2&n&&(t.R7$(),t.Y8G("routerLink",t.lJ4(6,q)),t.R7$(),t.xc7("background-image","url(assets/menus.jpg)"),t.R7$(6),t.Y8G("routerLink",t.lJ4(7,tt)),t.R7$(),t.xc7("background-image","url(assets/orders.jpg)"))}let T=(()=>{class n extends f.Tv{constructor(e){super(),this._route=e}ngOnInit(){this.subscription("route.params",this._route.paramMap.subscribe(e=>this.page=e.has("view")?e.get("view"):""))}static#t=this.\u0275fac=function(o){return new(o||n)(t.rXU(p.nX))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["","app-new-catering",""]],features:[t.Vt3],attrs:K,decls:11,vars:4,consts:[[1,"flex","flex-1","h-px"],[1,"flex","flex-col","flex-1","w-1/2","h-full"],[1,"relative","z-10"],["class","p-2 flex items-center justify-center bg-info text-white text-sm",4,"ngIf"],[1,"flex","flex-1","h-1/2","w-full","overflow-auto"],[3,"ngSwitch"],["class","flex-1",4,"ngSwitchCase"],["class","flex flex-1 flex-wrap items-center justify-center",4,"ngSwitchDefault"],[1,"p-2","flex","items-center","justify-center","bg-info","text-white","text-sm"],[1,"flex-1"],[1,"flex","flex-1","flex-wrap","items-center","justify-center"],["matRipple","",1,"rounded","flex","flex-col","items-center","bg-base-100","shadow","text-black",3,"routerLink"],["name","img",1,"relative","w-full","flex","flex-1","items-center","justify-center","text-2xl","text-white","bg-center","bg-cover"],[1,"absolute","inset-0","bg-neutral","opacity-60","z-0"],[1,"z-10"],[1,"p-2","h-14","w-full","text-sm","text-center","flex","items-center","justify-center"]],template:function(o,i){1&o&&(t.nrm(0,"app-topbar"),t.j41(1,"div",0),t.nrm(2,"app-sidebar"),t.j41(3,"main",1),t.nrm(4,"catering-topbar",2),t.DNE(5,et,2,0,"div",3),t.j41(6,"div",4),t.qex(7,5),t.DNE(8,nt,1,0,"catering-order-list",6)(9,it,1,0,"catering-menu",6)(10,ot,15,8,"div",7),t.bVm(),t.k0s()()()),2&o&&(t.R7$(5),t.Y8G("ngIf","menu"===i.page),t.R7$(2),t.Y8G("ngSwitch",i.page),t.R7$(),t.Y8G("ngSwitchCase","orders"),t.R7$(),t.Y8G("ngSwitchCase","menu"))},dependencies:[s.bT,s.ux,s.e1,s.fG,H.S,Q.c,m.r6,v.o,C.r,p.Wk,_],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%;width:100%;background-color:var(--b1)}a[_ngcontent-%COMP%]{width:28rem;height:16rem;margin-left:.5rem;text-decoration:none;transition:background .2s}a[_ngcontent-%COMP%]:hover{opacity:.8}a[_ngcontent-%COMP%]:first-child{margin:0}\n\n/*# sourceMappingURL=new-catering.component.ts-angular-inline--156.css.map*/"]})}return n})();const rt=[{path:"",component:x},{path:"new",component:T},{path:":view",component:x},{path:"new/:view",component:T}];let at=(()=>{class n{static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275mod=t.$C({type:n});static#n=this.\u0275inj=t.G2t({imports:[s.MD,d.YN,y.r,j.RI,R.YN,u.bR,p.iI.forChild(rt)]})}return n})()}}]);
//# sourceMappingURL=apps_concierge_src_app_catering_catering_module_ts.js.map