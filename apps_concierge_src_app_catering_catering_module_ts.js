(self.webpackChunkplaceos=self.webpackChunkplaceos||[]).push([["apps_concierge_src_app_catering_catering_module_ts"],{5699:(t,e,n)=>{"use strict";n.r(e),n.d(e,{CateringModule:()=>jn});var i=n(1511),o=n(6073),a=n(6898),s=n(4621),r=n(6337),l=n(6899),c=n(2619),d=n(1522),u=n(3490),g=n(5959),m=n(7570),p=n(1906),h=n(7254),f=n(878),b=n(2132),_=n(709),x=n(6238),v=n(8720),Z=n(5416),y=n(9861),w=n(1353),T=n(5842),A=n(2526),C=n(856);
/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
function q(t,e){1&t&&c.Hsn(0)}const I=["*"];function O(t,e){}const k=function(t){return{animationDuration:t}},M=function(t,e){return{value:t,params:e}},U=["tabBodyWrapper"],P=["tabHeader"];function N(t,e){}function J(t,e){if(1&t&&c.YNc(0,N,0,0,"ng-template",9),2&t){const t=c.oxw().$implicit;c.Q6J("cdkPortalOutlet",t.templateLabel)}}function Y(t,e){if(1&t&&c._uU(0),2&t){const t=c.oxw().$implicit;c.Oqu(t.textLabel)}}function F(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"div",6),c.NdJ("click",function(){const e=c.CHM(t),n=e.$implicit,i=e.index,o=c.oxw(),a=c.MAs(1);return o._handleClick(n,a,i)})("cdkFocusChange",function(e){const n=c.CHM(t).index;return c.oxw()._tabFocusChanged(e,n)}),c.TgZ(1,"div",7),c.YNc(2,J,1,1,"ng-template",8),c.YNc(3,Y,1,1,"ng-template",8),c.qZA(),c.qZA()}if(2&t){const t=e.$implicit,n=e.index,i=c.oxw();c.ekj("mat-tab-label-active",i.selectedIndex==n),c.Q6J("id",i._getTabLabelId(n))("disabled",t.disabled)("matRippleDisabled",t.disabled||i.disableRipple),c.uIk("tabIndex",i._getTabIndex(t,n))("aria-posinset",n+1)("aria-setsize",i._tabs.length)("aria-controls",i._getTabContentId(n))("aria-selected",i.selectedIndex==n)("aria-label",t.ariaLabel||null)("aria-labelledby",!t.ariaLabel&&t.ariaLabelledby?t.ariaLabelledby:null),c.xp6(2),c.Q6J("ngIf",t.templateLabel),c.xp6(1),c.Q6J("ngIf",!t.templateLabel)}}function Q(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"mat-tab-body",10),c.NdJ("_onCentered",function(){return c.CHM(t),c.oxw()._removeTabBodyWrapperHeight()})("_onCentering",function(e){return c.CHM(t),c.oxw()._setTabBodyWrapperHeight(e)}),c.qZA()}if(2&t){const t=e.$implicit,n=e.index,i=c.oxw();c.ekj("mat-tab-body-active",i.selectedIndex==n),c.Q6J("id",i._getTabContentId(n))("content",t.content)("position",t.position)("origin",t.origin)("animationDuration",i.animationDuration),c.uIk("aria-labelledby",i._getTabLabelId(n))}}const j=["tabListContainer"],S=["tabList"],L=["nextPaginator"],D=["previousPaginator"],R=new c.OlP("MatInkBarPositioner",{providedIn:"root",factory:function(){return t=>({left:t?(t.offsetLeft||0)+"px":"0",width:t?(t.offsetWidth||0)+"px":"0"})}});let E=(()=>{class t{constructor(t,e,n,i){this._elementRef=t,this._ngZone=e,this._inkBarPositioner=n,this._animationMode=i}alignToElement(t){this.show(),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this._setStyles(t))}):this._setStyles(t)}show(){this._elementRef.nativeElement.style.visibility="visible"}hide(){this._elementRef.nativeElement.style.visibility="hidden"}_setStyles(t){const e=this._inkBarPositioner(t),n=this._elementRef.nativeElement;n.style.left=e.left,n.style.width=e.width}}return t.\u0275fac=function(e){return new(e||t)(c.Y36(c.SBq),c.Y36(c.R0b),c.Y36(R),c.Y36(u.Qb,8))},t.\u0275dir=c.lG2({type:t,selectors:[["mat-ink-bar"]],hostAttrs:[1,"mat-ink-bar"],hostVars:2,hostBindings:function(t,e){2&t&&c.ekj("_mat-animation-noopable","NoopAnimations"===e._animationMode)}}),t})();
/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */const B=new c.OlP("MatTabContent"),H=new c.OlP("MatTabLabel");
/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
class G{}const $=(0,d.Id)(G),W=new c.OlP("MAT_TAB_GROUP");let z=(()=>{class t extends ${constructor(t,e){super(),this._viewContainerRef=t,this._closestTabGroup=e,this.textLabel="",this._contentPortal=null,this._stateChanges=new g.xQ,this.position=null,this.origin=null,this.isActive=!1}get templateLabel(){return this._templateLabel}set templateLabel(t){this._setTemplateLabelInput(t)}get content(){return this._contentPortal}ngOnChanges(t){(t.hasOwnProperty("textLabel")||t.hasOwnProperty("disabled"))&&this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}ngOnInit(){this._contentPortal=new l.UE(this._explicitContent||this._implicitContent,this._viewContainerRef)}_setTemplateLabelInput(t){t&&(this._templateLabel=t)}}return t.\u0275fac=function(e){return new(e||t)(c.Y36(c.s_b),c.Y36(W))},t.\u0275cmp=c.Xpm({type:t,selectors:[["mat-tab"]],contentQueries:function(t,e,n){if(1&t&&(c.Suo(n,H,5),c.Suo(n,B,7,c.Rgc)),2&t){let t;c.iGM(t=c.CRH())&&(e.templateLabel=t.first),c.iGM(t=c.CRH())&&(e._explicitContent=t.first)}},viewQuery:function(t,e){if(1&t&&c.Gf(c.Rgc,7),2&t){let t;c.iGM(t=c.CRH())&&(e._implicitContent=t.first)}},inputs:{disabled:"disabled",textLabel:["label","textLabel"],ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"]},exportAs:["matTab"],features:[c.qOj,c.TTD],ngContentSelectors:I,decls:1,vars:0,template:function(t,e){1&t&&(c.F$t(),c.YNc(0,q,1,0,"ng-template"))},encapsulation:2}),t})();
/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */const X={translateTab:(0,_.X$)("translateTab",[(0,_.SB)("center, void, left-origin-center, right-origin-center",(0,_.oB)({transform:"none"})),(0,_.SB)("left",(0,_.oB)({transform:"translate3d(-100%, 0, 0)",minHeight:"1px"})),(0,_.SB)("right",(0,_.oB)({transform:"translate3d(100%, 0, 0)",minHeight:"1px"})),(0,_.eR)("* => left, * => right, left => center, right => center",(0,_.jt)("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")),(0,_.eR)("void => left-origin-center",[(0,_.oB)({transform:"translate3d(-100%, 0, 0)"}),(0,_.jt)("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")]),(0,_.eR)("void => right-origin-center",[(0,_.oB)({transform:"translate3d(100%, 0, 0)"}),(0,_.jt)("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")])])};let V=(()=>{class t extends l.Pl{constructor(t,e,n,i){super(t,e,i),this._host=n,this._centeringSub=m.w.EMPTY,this._leavingSub=m.w.EMPTY}ngOnInit(){super.ngOnInit(),this._centeringSub=this._host._beforeCentering.pipe((0,x.O)(this._host._isCenterPosition(this._host._position))).subscribe(t=>{t&&!this.hasAttached()&&this.attach(this._host._content)}),this._leavingSub=this._host._afterLeavingCenter.subscribe(()=>{this.detach()})}ngOnDestroy(){super.ngOnDestroy(),this._centeringSub.unsubscribe(),this._leavingSub.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(c.Y36(c._Vd),c.Y36(c.s_b),c.Y36((0,c.Gpc)(()=>tt)),c.Y36(i.K0))},t.\u0275dir=c.lG2({type:t,selectors:[["","matTabBodyHost",""]],features:[c.qOj]}),t})(),K=(()=>{class t{constructor(t,e,n){this._elementRef=t,this._dir=e,this._dirChangeSubscription=m.w.EMPTY,this._translateTabComplete=new g.xQ,this._onCentering=new c.vpe,this._beforeCentering=new c.vpe,this._afterLeavingCenter=new c.vpe,this._onCentered=new c.vpe(!0),this.animationDuration="500ms",e&&(this._dirChangeSubscription=e.change.subscribe(t=>{this._computePositionAnimationState(t),n.markForCheck()})),this._translateTabComplete.pipe((0,v.x)((t,e)=>t.fromState===e.fromState&&t.toState===e.toState)).subscribe(t=>{this._isCenterPosition(t.toState)&&this._isCenterPosition(this._position)&&this._onCentered.emit(),this._isCenterPosition(t.fromState)&&!this._isCenterPosition(this._position)&&this._afterLeavingCenter.emit()})}set position(t){this._positionIndex=t,this._computePositionAnimationState()}ngOnInit(){"center"==this._position&&null!=this.origin&&(this._position=this._computePositionFromOrigin(this.origin))}ngOnDestroy(){this._dirChangeSubscription.unsubscribe(),this._translateTabComplete.complete()}_onTranslateTabStarted(t){const e=this._isCenterPosition(t.toState);this._beforeCentering.emit(e),e&&this._onCentering.emit(this._elementRef.nativeElement.clientHeight)}_getLayoutDirection(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}_isCenterPosition(t){return"center"==t||"left-origin-center"==t||"right-origin-center"==t}_computePositionAnimationState(t=this._getLayoutDirection()){this._position=this._positionIndex<0?"ltr"==t?"left":"right":this._positionIndex>0?"ltr"==t?"right":"left":"center"}_computePositionFromOrigin(t){const e=this._getLayoutDirection();return"ltr"==e&&t<=0||"rtl"==e&&t>0?"left-origin-center":"right-origin-center"}}return t.\u0275fac=function(e){return new(e||t)(c.Y36(c.SBq),c.Y36(A.Is,8),c.Y36(c.sBO))},t.\u0275dir=c.lG2({type:t,inputs:{animationDuration:"animationDuration",position:"position",_content:["content","_content"],origin:"origin"},outputs:{_onCentering:"_onCentering",_beforeCentering:"_beforeCentering",_afterLeavingCenter:"_afterLeavingCenter",_onCentered:"_onCentered"}}),t})(),tt=(()=>{class t extends K{constructor(t,e,n){super(t,e,n)}}return t.\u0275fac=function(e){return new(e||t)(c.Y36(c.SBq),c.Y36(A.Is,8),c.Y36(c.sBO))},t.\u0275cmp=c.Xpm({type:t,selectors:[["mat-tab-body"]],viewQuery:function(t,e){if(1&t&&c.Gf(l.Pl,5),2&t){let t;c.iGM(t=c.CRH())&&(e._portalHost=t.first)}},hostAttrs:[1,"mat-tab-body"],features:[c.qOj],decls:3,vars:6,consts:[["cdkScrollable","",1,"mat-tab-body-content"],["content",""],["matTabBodyHost",""]],template:function(t,e){1&t&&(c.TgZ(0,"div",0,1),c.NdJ("@translateTab.start",function(t){return e._onTranslateTabStarted(t)})("@translateTab.done",function(t){return e._translateTabComplete.next(t)}),c.YNc(2,O,0,0,"ng-template",2),c.qZA()),2&t&&c.Q6J("@translateTab",c.WLB(3,M,e._position,c.VKq(1,k,e.animationDuration)))},directives:[V],styles:[".mat-tab-body-content{height:100%;overflow:auto}.mat-tab-group-dynamic-height .mat-tab-body-content{overflow:hidden}\n"],encapsulation:2,data:{animation:[X.translateTab]}}),t})();
/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
const et=new c.OlP("MAT_TABS_CONFIG");
/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */let nt=0;class it{}class ot{constructor(t){this._elementRef=t}}const at=(0,d.pj)((0,d.Kr)(ot),"primary");let st=(()=>{class t extends at{constructor(t,e,n,i){super(t),this._changeDetectorRef=e,this._animationMode=i,this._tabs=new c.n_E,this._indexToSelect=0,this._tabBodyWrapperHeight=0,this._tabsSubscription=m.w.EMPTY,this._tabLabelSubscription=m.w.EMPTY,this._selectedIndex=null,this.headerPosition="above",this.selectedIndexChange=new c.vpe,this.focusChange=new c.vpe,this.animationDone=new c.vpe,this.selectedTabChange=new c.vpe(!0),this._groupId=nt++,this.animationDuration=n&&n.animationDuration?n.animationDuration:"500ms",this.disablePagination=!(!n||null==n.disablePagination)&&n.disablePagination,this.dynamicHeight=!(!n||null==n.dynamicHeight)&&n.dynamicHeight}get dynamicHeight(){return this._dynamicHeight}set dynamicHeight(t){this._dynamicHeight=(0,y.Ig)(t)}get selectedIndex(){return this._selectedIndex}set selectedIndex(t){this._indexToSelect=(0,y.su)(t,null)}get animationDuration(){return this._animationDuration}set animationDuration(t){this._animationDuration=/^\d+$/.test(t)?t+"ms":t}get backgroundColor(){return this._backgroundColor}set backgroundColor(t){const e=this._elementRef.nativeElement;e.classList.remove(`mat-background-${this.backgroundColor}`),t&&e.classList.add(`mat-background-${t}`),this._backgroundColor=t}ngAfterContentChecked(){const t=this._indexToSelect=this._clampTabIndex(this._indexToSelect);if(this._selectedIndex!=t){const e=null==this._selectedIndex;e||this.selectedTabChange.emit(this._createChangeEvent(t)),Promise.resolve().then(()=>{this._tabs.forEach((e,n)=>e.isActive=n===t),e||this.selectedIndexChange.emit(t)})}this._tabs.forEach((e,n)=>{e.position=n-t,null==this._selectedIndex||0!=e.position||e.origin||(e.origin=t-this._selectedIndex)}),this._selectedIndex!==t&&(this._selectedIndex=t,this._changeDetectorRef.markForCheck())}ngAfterContentInit(){this._subscribeToAllTabChanges(),this._subscribeToTabLabels(),this._tabsSubscription=this._tabs.changes.subscribe(()=>{if(this._clampTabIndex(this._indexToSelect)===this._selectedIndex){const t=this._tabs.toArray();for(let e=0;e<t.length;e++)if(t[e].isActive){this._indexToSelect=this._selectedIndex=e;break}}this._changeDetectorRef.markForCheck()})}_subscribeToAllTabChanges(){this._allTabs.changes.pipe((0,x.O)(this._allTabs)).subscribe(t=>{this._tabs.reset(t.filter(t=>t._closestTabGroup===this)),this._tabs.notifyOnChanges()})}ngOnDestroy(){this._tabs.destroy(),this._tabsSubscription.unsubscribe(),this._tabLabelSubscription.unsubscribe()}realignInkBar(){this._tabHeader&&this._tabHeader._alignInkBarToSelectedTab()}_focusChanged(t){this.focusChange.emit(this._createChangeEvent(t))}_createChangeEvent(t){const e=new it;return e.index=t,this._tabs&&this._tabs.length&&(e.tab=this._tabs.toArray()[t]),e}_subscribeToTabLabels(){this._tabLabelSubscription&&this._tabLabelSubscription.unsubscribe(),this._tabLabelSubscription=(0,p.T)(...this._tabs.map(t=>t._stateChanges)).subscribe(()=>this._changeDetectorRef.markForCheck())}_clampTabIndex(t){return Math.min(this._tabs.length-1,Math.max(t||0,0))}_getTabLabelId(t){return`mat-tab-label-${this._groupId}-${t}`}_getTabContentId(t){return`mat-tab-content-${this._groupId}-${t}`}_setTabBodyWrapperHeight(t){if(!this._dynamicHeight||!this._tabBodyWrapperHeight)return;const e=this._tabBodyWrapper.nativeElement;e.style.height=this._tabBodyWrapperHeight+"px",this._tabBodyWrapper.nativeElement.offsetHeight&&(e.style.height=t+"px")}_removeTabBodyWrapperHeight(){const t=this._tabBodyWrapper.nativeElement;this._tabBodyWrapperHeight=t.clientHeight,t.style.height="",this.animationDone.emit()}_handleClick(t,e,n){t.disabled||(this.selectedIndex=e.focusIndex=n)}_getTabIndex(t,e){return t.disabled?null:this.selectedIndex===e?0:-1}_tabFocusChanged(t,e){t&&(this._tabHeader.focusIndex=e)}}return t.\u0275fac=function(e){return new(e||t)(c.Y36(c.SBq),c.Y36(c.sBO),c.Y36(et,8),c.Y36(u.Qb,8))},t.\u0275dir=c.lG2({type:t,inputs:{headerPosition:"headerPosition",animationDuration:"animationDuration",disablePagination:"disablePagination",dynamicHeight:"dynamicHeight",selectedIndex:"selectedIndex",backgroundColor:"backgroundColor"},outputs:{selectedIndexChange:"selectedIndexChange",focusChange:"focusChange",animationDone:"animationDone",selectedTabChange:"selectedTabChange"},features:[c.qOj]}),t})(),rt=(()=>{class t extends st{constructor(t,e,n,i){super(t,e,n,i)}}return t.\u0275fac=function(e){return new(e||t)(c.Y36(c.SBq),c.Y36(c.sBO),c.Y36(et,8),c.Y36(u.Qb,8))},t.\u0275cmp=c.Xpm({type:t,selectors:[["mat-tab-group"]],contentQueries:function(t,e,n){if(1&t&&c.Suo(n,z,5),2&t){let t;c.iGM(t=c.CRH())&&(e._allTabs=t)}},viewQuery:function(t,e){if(1&t&&(c.Gf(U,5),c.Gf(P,5)),2&t){let t;c.iGM(t=c.CRH())&&(e._tabBodyWrapper=t.first),c.iGM(t=c.CRH())&&(e._tabHeader=t.first)}},hostAttrs:[1,"mat-tab-group"],hostVars:4,hostBindings:function(t,e){2&t&&c.ekj("mat-tab-group-dynamic-height",e.dynamicHeight)("mat-tab-group-inverted-header","below"===e.headerPosition)},inputs:{color:"color",disableRipple:"disableRipple"},exportAs:["matTabGroup"],features:[c._Bn([{provide:W,useExisting:t}]),c.qOj],decls:6,vars:7,consts:[[3,"selectedIndex","disableRipple","disablePagination","indexFocused","selectFocusedIndex"],["tabHeader",""],["class","mat-tab-label mat-focus-indicator","role","tab","matTabLabelWrapper","","mat-ripple","","cdkMonitorElementFocus","",3,"id","mat-tab-label-active","disabled","matRippleDisabled","click","cdkFocusChange",4,"ngFor","ngForOf"],[1,"mat-tab-body-wrapper"],["tabBodyWrapper",""],["role","tabpanel",3,"id","mat-tab-body-active","content","position","origin","animationDuration","_onCentered","_onCentering",4,"ngFor","ngForOf"],["role","tab","matTabLabelWrapper","","mat-ripple","","cdkMonitorElementFocus","",1,"mat-tab-label","mat-focus-indicator",3,"id","disabled","matRippleDisabled","click","cdkFocusChange"],[1,"mat-tab-label-content"],[3,"ngIf"],[3,"cdkPortalOutlet"],["role","tabpanel",3,"id","content","position","origin","animationDuration","_onCentered","_onCentering"]],template:function(t,e){1&t&&(c.TgZ(0,"mat-tab-header",0,1),c.NdJ("indexFocused",function(t){return e._focusChanged(t)})("selectFocusedIndex",function(t){return e.selectedIndex=t}),c.YNc(2,F,4,14,"div",2),c.qZA(),c.TgZ(3,"div",3,4),c.YNc(5,Q,1,8,"mat-tab-body",5),c.qZA()),2&t&&(c.Q6J("selectedIndex",e.selectedIndex||0)("disableRipple",e.disableRipple)("disablePagination",e.disablePagination),c.xp6(2),c.Q6J("ngForOf",e._tabs),c.xp6(1),c.ekj("_mat-animation-noopable","NoopAnimations"===e._animationMode),c.xp6(2),c.Q6J("ngForOf",e._tabs))},directives:function(){return[pt,i.sg,dt,d.wG,s.kH,i.O5,l.Pl,tt]},styles:[".mat-tab-group{display:flex;flex-direction:column}.mat-tab-group.mat-tab-group-inverted-header{flex-direction:column-reverse}.mat-tab-label{height:48px;padding:0 24px;cursor:pointer;box-sizing:border-box;opacity:.6;min-width:160px;text-align:center;display:inline-flex;justify-content:center;align-items:center;white-space:nowrap;position:relative}.mat-tab-label:focus{outline:none}.mat-tab-label:focus:not(.mat-tab-disabled){opacity:1}.cdk-high-contrast-active .mat-tab-label:focus{outline:dotted 2px;outline-offset:-2px}.mat-tab-label.mat-tab-disabled{cursor:default}.cdk-high-contrast-active .mat-tab-label.mat-tab-disabled{opacity:.5}.mat-tab-label .mat-tab-label-content{display:inline-flex;justify-content:center;align-items:center;white-space:nowrap}.cdk-high-contrast-active .mat-tab-label{opacity:1}@media(max-width: 599px){.mat-tab-label{padding:0 12px}}@media(max-width: 959px){.mat-tab-label{padding:0 12px}}.mat-tab-group[mat-stretch-tabs]>.mat-tab-header .mat-tab-label{flex-basis:0;flex-grow:1}.mat-tab-body-wrapper{position:relative;overflow:hidden;display:flex;transition:height 500ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable.mat-tab-body-wrapper{transition:none;animation:none}.mat-tab-body{top:0;left:0;right:0;bottom:0;position:absolute;display:block;overflow:hidden;flex-basis:100%}.mat-tab-body.mat-tab-body-active{position:relative;overflow-x:hidden;overflow-y:auto;z-index:1;flex-grow:1}.mat-tab-group.mat-tab-group-dynamic-height .mat-tab-body.mat-tab-body-active{overflow-y:hidden}\n"],encapsulation:2}),t})();
/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
class lt{}const ct=(0,d.Id)(lt);let dt=(()=>{class t extends ct{constructor(t){super(),this.elementRef=t}focus(){this.elementRef.nativeElement.focus()}getOffsetLeft(){return this.elementRef.nativeElement.offsetLeft}getOffsetWidth(){return this.elementRef.nativeElement.offsetWidth}}return t.\u0275fac=function(e){return new(e||t)(c.Y36(c.SBq))},t.\u0275dir=c.lG2({type:t,selectors:[["","matTabLabelWrapper",""]],hostVars:3,hostBindings:function(t,e){2&t&&(c.uIk("aria-disabled",!!e.disabled),c.ekj("mat-tab-disabled",e.disabled))},inputs:{disabled:"disabled"},features:[c.qOj]}),t})();
/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */const ut=(0,w.i$)({passive:!0});let gt=(()=>{class t{constructor(t,e,n,i,o,a,s){this._elementRef=t,this._changeDetectorRef=e,this._viewportRuler=n,this._dir=i,this._ngZone=o,this._platform=a,this._animationMode=s,this._scrollDistance=0,this._selectedIndexChanged=!1,this._destroyed=new g.xQ,this._showPaginationControls=!1,this._disableScrollAfter=!0,this._disableScrollBefore=!0,this._stopScrolling=new g.xQ,this.disablePagination=!1,this._selectedIndex=0,this.selectFocusedIndex=new c.vpe,this.indexFocused=new c.vpe,o.runOutsideAngular(()=>{(0,h.R)(t.nativeElement,"mouseleave").pipe((0,Z.R)(this._destroyed)).subscribe(()=>{this._stopInterval()})})}get selectedIndex(){return this._selectedIndex}set selectedIndex(t){t=(0,y.su)(t),this._selectedIndex!=t&&(this._selectedIndexChanged=!0,this._selectedIndex=t,this._keyManager&&this._keyManager.updateActiveItem(t))}ngAfterViewInit(){(0,h.R)(this._previousPaginator.nativeElement,"touchstart",ut).pipe((0,Z.R)(this._destroyed)).subscribe(()=>{this._handlePaginatorPress("before")}),(0,h.R)(this._nextPaginator.nativeElement,"touchstart",ut).pipe((0,Z.R)(this._destroyed)).subscribe(()=>{this._handlePaginatorPress("after")})}ngAfterContentInit(){const t=this._dir?this._dir.change:(0,f.of)(null),e=this._viewportRuler.change(150),n=()=>{this.updatePagination(),this._alignInkBarToSelectedTab()};this._keyManager=new s.Em(this._items).withHorizontalOrientation(this._getLayoutDirection()).withHomeAndEnd().withWrap(),this._keyManager.updateActiveItem(this._selectedIndex),"undefined"!=typeof requestAnimationFrame?requestAnimationFrame(n):n(),(0,p.T)(t,e,this._items.changes).pipe((0,Z.R)(this._destroyed)).subscribe(()=>{Promise.resolve().then(n),this._keyManager.withHorizontalOrientation(this._getLayoutDirection())}),this._keyManager.change.pipe((0,Z.R)(this._destroyed)).subscribe(t=>{this.indexFocused.emit(t),this._setTabFocus(t)})}ngAfterContentChecked(){this._tabLabelCount!=this._items.length&&(this.updatePagination(),this._tabLabelCount=this._items.length,this._changeDetectorRef.markForCheck()),this._selectedIndexChanged&&(this._scrollToLabel(this._selectedIndex),this._checkScrollingControls(),this._alignInkBarToSelectedTab(),this._selectedIndexChanged=!1,this._changeDetectorRef.markForCheck()),this._scrollDistanceChanged&&(this._updateTabScrollPosition(),this._scrollDistanceChanged=!1,this._changeDetectorRef.markForCheck())}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete(),this._stopScrolling.complete()}_handleKeydown(t){if(!(0,T.Vb)(t))switch(t.keyCode){case T.K5:case T.L_:this.focusIndex!==this.selectedIndex&&(this.selectFocusedIndex.emit(this.focusIndex),this._itemSelected(t));break;default:this._keyManager.onKeydown(t)}}_onContentChanges(){const t=this._elementRef.nativeElement.textContent;t!==this._currentTextContent&&(this._currentTextContent=t||"",this._ngZone.run(()=>{this.updatePagination(),this._alignInkBarToSelectedTab(),this._changeDetectorRef.markForCheck()}))}updatePagination(){this._checkPaginationEnabled(),this._checkScrollingControls(),this._updateTabScrollPosition()}get focusIndex(){return this._keyManager?this._keyManager.activeItemIndex:0}set focusIndex(t){this._isValidIndex(t)&&this.focusIndex!==t&&this._keyManager&&this._keyManager.setActiveItem(t)}_isValidIndex(t){if(!this._items)return!0;const e=this._items?this._items.toArray()[t]:null;return!!e&&!e.disabled}_setTabFocus(t){if(this._showPaginationControls&&this._scrollToLabel(t),this._items&&this._items.length){this._items.toArray()[t].focus();const e=this._tabListContainer.nativeElement,n=this._getLayoutDirection();e.scrollLeft="ltr"==n?0:e.scrollWidth-e.offsetWidth}}_getLayoutDirection(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}_updateTabScrollPosition(){if(this.disablePagination)return;const t=this.scrollDistance,e="ltr"===this._getLayoutDirection()?-t:t;this._tabList.nativeElement.style.transform=`translateX(${Math.round(e)}px)`,(this._platform.TRIDENT||this._platform.EDGE)&&(this._tabListContainer.nativeElement.scrollLeft=0)}get scrollDistance(){return this._scrollDistance}set scrollDistance(t){this._scrollTo(t)}_scrollHeader(t){return this._scrollTo(this._scrollDistance+("before"==t?-1:1)*this._tabListContainer.nativeElement.offsetWidth/3)}_handlePaginatorClick(t){this._stopInterval(),this._scrollHeader(t)}_scrollToLabel(t){if(this.disablePagination)return;const e=this._items?this._items.toArray()[t]:null;if(!e)return;const n=this._tabListContainer.nativeElement.offsetWidth,{offsetLeft:i,offsetWidth:o}=e.elementRef.nativeElement;let a,s;"ltr"==this._getLayoutDirection()?(a=i,s=a+o):(s=this._tabList.nativeElement.offsetWidth-i,a=s-o);const r=this.scrollDistance,l=this.scrollDistance+n;a<r?this.scrollDistance-=r-a+60:s>l&&(this.scrollDistance+=s-l+60)}_checkPaginationEnabled(){if(this.disablePagination)this._showPaginationControls=!1;else{const t=this._tabList.nativeElement.scrollWidth>this._elementRef.nativeElement.offsetWidth;t||(this.scrollDistance=0),t!==this._showPaginationControls&&this._changeDetectorRef.markForCheck(),this._showPaginationControls=t}}_checkScrollingControls(){this.disablePagination?this._disableScrollAfter=this._disableScrollBefore=!0:(this._disableScrollBefore=0==this.scrollDistance,this._disableScrollAfter=this.scrollDistance==this._getMaxScrollDistance(),this._changeDetectorRef.markForCheck())}_getMaxScrollDistance(){return this._tabList.nativeElement.scrollWidth-this._tabListContainer.nativeElement.offsetWidth||0}_alignInkBarToSelectedTab(){const t=this._items&&this._items.length?this._items.toArray()[this.selectedIndex]:null,e=t?t.elementRef.nativeElement:null;e?this._inkBar.alignToElement(e):this._inkBar.hide()}_stopInterval(){this._stopScrolling.next()}_handlePaginatorPress(t,e){e&&null!=e.button&&0!==e.button||(this._stopInterval(),(0,b.H)(650,100).pipe((0,Z.R)((0,p.T)(this._stopScrolling,this._destroyed))).subscribe(()=>{const{maxScrollDistance:e,distance:n}=this._scrollHeader(t);(0===n||n>=e)&&this._stopInterval()}))}_scrollTo(t){if(this.disablePagination)return{maxScrollDistance:0,distance:0};const e=this._getMaxScrollDistance();return this._scrollDistance=Math.max(0,Math.min(e,t)),this._scrollDistanceChanged=!0,this._checkScrollingControls(),{maxScrollDistance:e,distance:this._scrollDistance}}}return t.\u0275fac=function(e){return new(e||t)(c.Y36(c.SBq),c.Y36(c.sBO),c.Y36(C.rL),c.Y36(A.Is,8),c.Y36(c.R0b),c.Y36(w.t4),c.Y36(u.Qb,8))},t.\u0275dir=c.lG2({type:t,inputs:{disablePagination:"disablePagination"}}),t})(),mt=(()=>{class t extends gt{constructor(t,e,n,i,o,a,s){super(t,e,n,i,o,a,s),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=(0,y.Ig)(t)}_itemSelected(t){t.preventDefault()}}return t.\u0275fac=function(e){return new(e||t)(c.Y36(c.SBq),c.Y36(c.sBO),c.Y36(C.rL),c.Y36(A.Is,8),c.Y36(c.R0b),c.Y36(w.t4),c.Y36(u.Qb,8))},t.\u0275dir=c.lG2({type:t,inputs:{disableRipple:"disableRipple"},features:[c.qOj]}),t})(),pt=(()=>{class t extends mt{constructor(t,e,n,i,o,a,s){super(t,e,n,i,o,a,s)}}return t.\u0275fac=function(e){return new(e||t)(c.Y36(c.SBq),c.Y36(c.sBO),c.Y36(C.rL),c.Y36(A.Is,8),c.Y36(c.R0b),c.Y36(w.t4),c.Y36(u.Qb,8))},t.\u0275cmp=c.Xpm({type:t,selectors:[["mat-tab-header"]],contentQueries:function(t,e,n){if(1&t&&c.Suo(n,dt,4),2&t){let t;c.iGM(t=c.CRH())&&(e._items=t)}},viewQuery:function(t,e){if(1&t&&(c.Gf(E,7),c.Gf(j,7),c.Gf(S,7),c.Gf(L,5),c.Gf(D,5)),2&t){let t;c.iGM(t=c.CRH())&&(e._inkBar=t.first),c.iGM(t=c.CRH())&&(e._tabListContainer=t.first),c.iGM(t=c.CRH())&&(e._tabList=t.first),c.iGM(t=c.CRH())&&(e._nextPaginator=t.first),c.iGM(t=c.CRH())&&(e._previousPaginator=t.first)}},hostAttrs:[1,"mat-tab-header"],hostVars:4,hostBindings:function(t,e){2&t&&c.ekj("mat-tab-header-pagination-controls-enabled",e._showPaginationControls)("mat-tab-header-rtl","rtl"==e._getLayoutDirection())},inputs:{selectedIndex:"selectedIndex"},outputs:{selectFocusedIndex:"selectFocusedIndex",indexFocused:"indexFocused"},features:[c.qOj],ngContentSelectors:I,decls:13,vars:8,consts:[["aria-hidden","true","mat-ripple","",1,"mat-tab-header-pagination","mat-tab-header-pagination-before","mat-elevation-z4",3,"matRippleDisabled","click","mousedown","touchend"],["previousPaginator",""],[1,"mat-tab-header-pagination-chevron"],[1,"mat-tab-label-container",3,"keydown"],["tabListContainer",""],["role","tablist",1,"mat-tab-list",3,"cdkObserveContent"],["tabList",""],[1,"mat-tab-labels"],["aria-hidden","true","mat-ripple","",1,"mat-tab-header-pagination","mat-tab-header-pagination-after","mat-elevation-z4",3,"matRippleDisabled","mousedown","click","touchend"],["nextPaginator",""]],template:function(t,e){1&t&&(c.F$t(),c.TgZ(0,"div",0,1),c.NdJ("click",function(){return e._handlePaginatorClick("before")})("mousedown",function(t){return e._handlePaginatorPress("before",t)})("touchend",function(){return e._stopInterval()}),c._UZ(2,"div",2),c.qZA(),c.TgZ(3,"div",3,4),c.NdJ("keydown",function(t){return e._handleKeydown(t)}),c.TgZ(5,"div",5,6),c.NdJ("cdkObserveContent",function(){return e._onContentChanges()}),c.TgZ(7,"div",7),c.Hsn(8),c.qZA(),c._UZ(9,"mat-ink-bar"),c.qZA(),c.qZA(),c.TgZ(10,"div",8,9),c.NdJ("mousedown",function(t){return e._handlePaginatorPress("after",t)})("click",function(){return e._handlePaginatorClick("after")})("touchend",function(){return e._stopInterval()}),c._UZ(12,"div",2),c.qZA()),2&t&&(c.ekj("mat-tab-header-pagination-disabled",e._disableScrollBefore),c.Q6J("matRippleDisabled",e._disableScrollBefore||e.disableRipple),c.xp6(5),c.ekj("_mat-animation-noopable","NoopAnimations"===e._animationMode),c.xp6(5),c.ekj("mat-tab-header-pagination-disabled",e._disableScrollAfter),c.Q6J("matRippleDisabled",e._disableScrollAfter||e.disableRipple))},directives:[d.wG,r.wD,E],styles:['.mat-tab-header{display:flex;overflow:hidden;position:relative;flex-shrink:0}.mat-tab-header-pagination{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:relative;display:none;justify-content:center;align-items:center;min-width:32px;cursor:pointer;z-index:2;-webkit-tap-highlight-color:transparent;touch-action:none}.mat-tab-header-pagination-controls-enabled .mat-tab-header-pagination{display:flex}.mat-tab-header-pagination-before,.mat-tab-header-rtl .mat-tab-header-pagination-after{padding-left:4px}.mat-tab-header-pagination-before .mat-tab-header-pagination-chevron,.mat-tab-header-rtl .mat-tab-header-pagination-after .mat-tab-header-pagination-chevron{transform:rotate(-135deg)}.mat-tab-header-rtl .mat-tab-header-pagination-before,.mat-tab-header-pagination-after{padding-right:4px}.mat-tab-header-rtl .mat-tab-header-pagination-before .mat-tab-header-pagination-chevron,.mat-tab-header-pagination-after .mat-tab-header-pagination-chevron{transform:rotate(45deg)}.mat-tab-header-pagination-chevron{border-style:solid;border-width:2px 2px 0 0;content:"";height:8px;width:8px}.mat-tab-header-pagination-disabled{box-shadow:none;cursor:default}.mat-tab-list{flex-grow:1;position:relative;transition:transform 500ms cubic-bezier(0.35, 0, 0.25, 1)}.mat-ink-bar{position:absolute;bottom:0;height:2px;transition:500ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable.mat-ink-bar{transition:none;animation:none}.mat-tab-group-inverted-header .mat-ink-bar{bottom:auto;top:0}.cdk-high-contrast-active .mat-ink-bar{outline:solid 2px;height:0}.mat-tab-labels{display:flex}[mat-align-tabs=center]>.mat-tab-header .mat-tab-labels{justify-content:center}[mat-align-tabs=end]>.mat-tab-header .mat-tab-labels{justify-content:flex-end}.mat-tab-label-container{display:flex;flex-grow:1;overflow:hidden;z-index:1}._mat-animation-noopable.mat-tab-list{transition:none;animation:none}.mat-tab-label{height:48px;padding:0 24px;cursor:pointer;box-sizing:border-box;opacity:.6;min-width:160px;text-align:center;display:inline-flex;justify-content:center;align-items:center;white-space:nowrap;position:relative}.mat-tab-label:focus{outline:none}.mat-tab-label:focus:not(.mat-tab-disabled){opacity:1}.cdk-high-contrast-active .mat-tab-label:focus{outline:dotted 2px;outline-offset:-2px}.mat-tab-label.mat-tab-disabled{cursor:default}.cdk-high-contrast-active .mat-tab-label.mat-tab-disabled{opacity:.5}.mat-tab-label .mat-tab-label-content{display:inline-flex;justify-content:center;align-items:center;white-space:nowrap}.cdk-high-contrast-active .mat-tab-label{opacity:1}@media(max-width: 599px){.mat-tab-label{min-width:72px}}\n'],encapsulation:2}),t})(),ht=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.oAB({type:t}),t.\u0275inj=c.cJS({imports:[[i.ez,d.BQ,l.eL,d.si,r.Q8,s.rt],d.BQ]}),t})();
/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var ft=n(33),bt=n(787),_t=n(8223),xt=n(1490),vt=n(4762),Zt=n(3530),yt=n(84),wt=n(4608),Tt=n(8055),At=n(1950);const Ct=[{id:"after_hour",name:"After Hour"},{id:"before_hour",name:"Before Hour"},{id:"min_length",name:"Min. Meeting Length"},{id:"max_length",name:"Max. Meeting Length"},{id:"is_before",name:"Is Before Time"},{id:"is_after",name:"Is After Time"},{id:"visitor_type",name:"Visitor Type"},{id:"groups",name:"User in Groups"}];var qt=n(5980),It=n(1548),Ot=n(6283),kt=n(6756),Mt=n(4786);function Ut(t,e){1&t&&(c.TgZ(0,"button",5),c.TgZ(1,"app-icon"),c._uU(2,"close"),c.qZA(),c.qZA())}function Pt(t,e){if(1&t&&(c.TgZ(0,"mat-option",18),c._uU(1),c.qZA()),2&t){const t=e.$implicit;c.Q6J("value",t.id),c.xp6(1),c.hij(" ",t.name," ")}}function Nt(t,e){if(1&t&&(c.TgZ(0,"div",14),c.TgZ(1,"mat-form-field",8),c.TgZ(2,"mat-select",15),c.NdJ("ngModelChange",function(t){return e.$implicit[0]=t}),c.YNc(3,Pt,2,2,"mat-option",16),c.qZA(),c.qZA(),c.TgZ(4,"mat-form-field",8),c.TgZ(5,"input",17),c.NdJ("ngModelChange",function(t){return e.$implicit[1]=t}),c.qZA(),c.TgZ(6,"mat-error"),c._uU(7,"Rule value is required"),c.qZA(),c.qZA(),c.qZA()),2&t){const t=e.$implicit,n=c.oxw(2);c.xp6(2),c.Q6J("ngModel",t[0]),c.xp6(1),c.Q6J("ngForOf",n.rule_types),c.xp6(2),c.Q6J("ngModel",t[1])}}function Jt(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"div",6),c.TgZ(1,"div",7),c.TgZ(2,"mat-form-field",8),c.TgZ(3,"input",9),c.NdJ("ngModelChange",function(t){return e.$implicit.name=t}),c.qZA(),c.TgZ(4,"mat-error"),c._uU(5,"Ruleset name is required"),c.qZA(),c.qZA(),c.TgZ(6,"button",10),c.NdJ("click",function(){const e=c.CHM(t).$implicit,n=c.oxw();return e.rules.push(["",""]),n.show_rules=e.id}),c.TgZ(7,"app-icon"),c._uU(8,"add"),c.qZA(),c.qZA(),c.TgZ(9,"button",11),c.NdJ("click",function(){const e=c.CHM(t).$implicit,n=c.oxw();return n.show_rules=n.show_rules!==e.id?e.id:""}),c.TgZ(10,"app-icon"),c._uU(11),c.qZA(),c.qZA(),c.qZA(),c.TgZ(12,"div",12),c.YNc(13,Nt,8,3,"div",13),c.qZA(),c.qZA()}if(2&t){const t=e.$implicit,n=c.oxw();c.xp6(3),c.Q6J("ngModel",t.name),c.xp6(6),c.Q6J("disabled",!t.rules.length),c.xp6(2),c.Oqu(n.show_rules===t.id?"expand_less":"expand_more"),c.xp6(1),c.Udp("height",(n.show_rules===t.id?3.5*t.rules.length:0)+"em"),c.xp6(1),c.Q6J("ngForOf",t.rules)}}let Yt=(()=>{class t{constructor(t){this._data=t,this.event=new c.vpe,this.loading=!1,this.rule_types=Ct,this.rulesets=(t.config||[]).map(t=>(t.rules=t.rules.map(t=>[t[0],JSON.stringify(t[1])]),t))}get new_id(){return"ruleset-"+Math.floor(99999999*Math.random())}saveChanges(){this.loading=!0;const t=this.rulesets.map(t=>Object.assign(Object.assign({},t),{rules:t.rules.map(t=>{let e=t[1];try{e=JSON.parse(t[1])}catch(n){}return[t[0],e]})}));this.event.emit({reason:"done",metadata:t})}}return t.\u0275fac=function(e){return new(e||t)(c.Y36(wt.WI))},t.\u0275cmp=c.Xpm({type:t,selectors:[["catering-config-modal"]],outputs:{event:"event"},decls:11,vars:2,consts:[["mat-icon-button","","mat-dialog-close","",4,"ngIf"],[1,"overflow-auto","text-center"],["mat-button","",3,"click"],["class","ruleset",4,"ngFor","ngForOf"],[1,"flex","p-2","items-center","justify-center","border-none","border-t","border-solid","border-gray-300"],["mat-icon-button","","mat-dialog-close",""],[1,"ruleset"],[1,"flex"],["appearance","outline",1,"flex-1"],["matInput","","name","name","placeholder","Zone ID, Category or Tag","required","",3,"ngModel","ngModelChange"],["mat-icon-button","",1,"mb-6",3,"click"],["mat-icon-button","",1,"mb-6",3,"disabled","click"],["name","rules",1,"bg-gray-100","rounded","overflow-hidden"],["class","flex px-2 h-14 space-x-2",4,"ngFor","ngForOf"],[1,"flex","px-2","h-14","space-x-2"],["name","booking-type","placeholder","Select Rule",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["matInput","","name","value","placeholder","Rule value","required","",3,"ngModel","ngModelChange"],[3,"value"]],template:function(t,e){1&t&&(c.TgZ(0,"header"),c.TgZ(1,"h3"),c._uU(2,"Edit Catering Configuration"),c.qZA(),c.YNc(3,Ut,3,0,"button",0),c.qZA(),c.TgZ(4,"main",1),c.TgZ(5,"button",2),c.NdJ("click",function(){return e.rulesets.push({id:e.new_id,rules:[]})}),c._uU(6," New Ruleset "),c.qZA(),c.YNc(7,Jt,14,6,"div",3),c.qZA(),c.TgZ(8,"footer",4),c.TgZ(9,"button",2),c.NdJ("click",function(){return e.saveChanges()}),c._uU(10,"Save Changes"),c.qZA(),c.qZA()),2&t&&(c.xp6(3),c.Q6J("ngIf",!e.loading),c.xp6(4),c.Q6J("ngForOf",e.rulesets))},directives:[i.O5,qt.lW,i.sg,wt.ZT,It.o,Ot.KE,kt.Nt,Ot.TO,Mt.gD,d.ey],styles:["[name=rules][_ngcontent-%COMP%]{transition:height .2s}main[_ngcontent-%COMP%]{width:32em;padding:.5em 1em 1em}main[_ngcontent-%COMP%]   button.mat-button[_ngcontent-%COMP%]{margin:0 auto .5em;min-width:12em}"]}),t})();var Ft=n(3016),Qt=n(7806);function jt(t,e){1&t&&(c.TgZ(0,"button",7),c.TgZ(1,"app-icon"),c._uU(2,"close"),c.qZA(),c.qZA())}function St(t,e){if(1&t&&(c.TgZ(0,"div",10),c.TgZ(1,"label",11),c._uU(2," Name"),c.TgZ(3,"span"),c._uU(4,"*"),c.qZA(),c._uU(5,": "),c.qZA(),c.TgZ(6,"mat-form-field",12),c._UZ(7,"input",13),c.TgZ(8,"mat-error"),c._uU(9,"Name is required"),c.qZA(),c.qZA(),c.qZA()),2&t){const t=c.oxw(2);c.xp6(1),c.ekj("error",t.form.controls.name.invalid&&t.form.controls.name.touched)}}function Lt(t,e){if(1&t&&(c.TgZ(0,"div",10),c.TgZ(1,"label",14),c._uU(2," Category"),c.TgZ(3,"span"),c._uU(4,"*"),c.qZA(),c._uU(5,": "),c.qZA(),c.TgZ(6,"mat-form-field",12),c._UZ(7,"input",15),c.TgZ(8,"mat-error"),c._uU(9,"Category is required"),c.qZA(),c.qZA(),c.qZA()),2&t){const t=c.oxw(2),e=c.MAs(9);c.xp6(1),c.ekj("error",t.form.controls.category.invalid&&t.form.controls.category.touched),c.xp6(6),c.Q6J("matAutocomplete",e)}}const Dt=function(){return{class:"material-icons",content:"close"}};function Rt(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"mat-chip",22),c.NdJ("removed",function(){const e=c.CHM(t).$implicit;return c.oxw(3).removeTag(e)}),c._uU(1),c._UZ(2,"app-icon",23),c.qZA()}if(2&t){const t=e.$implicit;c.Q6J("selectable",!0)("removable",!0),c.xp6(1),c.hij(" ",t," "),c.xp6(1),c.Q6J("icon",c.DdM(4,Dt))}}function Et(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"div",10),c.TgZ(1,"label",16),c.SDv(2,17),c.qZA(),c.TgZ(3,"mat-form-field",12),c.TgZ(4,"mat-chip-list",18,19),c.YNc(6,Rt,3,5,"mat-chip",20),c.TgZ(7,"input",21),c.NdJ("matChipInputTokenEnd",function(e){return c.CHM(t),c.oxw(2).addTag(e)}),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&t){const t=c.MAs(5),e=c.oxw(2);c.xp6(1),c.ekj("error",e.form.controls.tags.invalid&&e.form.controls.tags.touched),c.xp6(5),c.Q6J("ngForOf",e.tag_list),c.xp6(1),c.Q6J("matChipInputFor",t)("matChipInputSeparatorKeyCodes",e.separators)("matChipInputAddOnBlur",!0)}}function Bt(t,e){1&t&&(c.TgZ(0,"div",10),c.TgZ(1,"label",24),c._uU(2,"Description:"),c.qZA(),c.TgZ(3,"mat-form-field",12),c._UZ(4,"textarea",25),c.qZA(),c.qZA())}function Ht(t,e){if(1&t&&(c.TgZ(0,"div",10),c.TgZ(1,"label",11),c._uU(2," Unit Price"),c.TgZ(3,"span"),c._uU(4,"*"),c.qZA(),c._uU(5,": "),c.qZA(),c.TgZ(6,"mat-form-field",12),c._UZ(7,"input",26),c.TgZ(8,"mat-error"),c._uU(9,"Unit Price is required"),c.qZA(),c.qZA(),c.qZA()),2&t){const t=c.oxw(2);c.xp6(1),c.ekj("error",t.form.controls.unit_price.invalid&&t.form.controls.unit_price.touched)}}function Gt(t,e){if(1&t&&(c.TgZ(0,"form",8),c.YNc(1,St,10,2,"div",9),c.YNc(2,Lt,10,3,"div",9),c.YNc(3,Et,8,6,"div",9),c.YNc(4,Bt,5,0,"div",9),c.YNc(5,Ht,10,2,"div",9),c.qZA()),2&t){const t=c.oxw();c.Q6J("formGroup",t.form),c.xp6(1),c.Q6J("ngIf",t.form.controls.name),c.xp6(1),c.Q6J("ngIf",t.form.controls.category),c.xp6(1),c.Q6J("ngIf",t.form.controls.tags),c.xp6(1),c.Q6J("ngIf",t.form.controls.description),c.xp6(1),c.Q6J("ngIf",t.form.controls.unit_price)}}function $t(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"footer",27),c.TgZ(1,"button",28),c.NdJ("click",function(){return c.CHM(t),c.oxw().saveChanges()}),c._uU(2," Save "),c.qZA(),c.qZA()}if(2&t){const t=c.oxw();c.xp6(1),c.Q6J("disabled",!t.form.dirty)}}function Wt(t,e){1&t&&(c.TgZ(0,"div",29),c._UZ(1,"mat-spinner",30),c.TgZ(2,"p"),c._uU(3,"Saving catering item..."),c.qZA(),c.qZA())}function zt(t,e){if(1&t&&(c.TgZ(0,"mat-option",31),c._uU(1),c.qZA()),2&t){const t=e.$implicit;c.Q6J("value",t),c.xp6(1),c.hij(" ",t," ")}}let Xt=(()=>{class t{constructor(t){this._data=t,this.event=new c.vpe,this.loading=!1,this.separators=[T.K5,T.OC,T.L_]}get item(){return this._data.item}get categories(){return this._data.categories||[]}get tag_list(){return this.form.controls.tags.value}ngOnInit(){this.form=new o.cw({name:new o.NI(this.item.name||"",[o.kI.required]),description:new o.NI(this.item.description||""),category:new o.NI(this.item.category||"",[o.kI.required]),unit_price:new o.NI(this.item.unit_price,[o.kI.required]),tags:new o.NI(this.item.tags||[])})}addTag(t){if(!this.form||!this.form.controls.tags)return;this.form.controls.tags.markAsDirty();const e=t.input,n=t.value,i=this.tag_list;(n||"").trim()&&(i.push(n),this.form.controls.tags.setValue(i)),e&&(e.value="")}removeTag(t){if(!this.form||!this.form.controls.tags)return;const e=this.tag_list;this.form.controls.tags.markAsDirty();const n=e.indexOf(t);n>=0&&(e.splice(n,1),this.form.controls.tags.setValue(e))}saveChanges(){this.loading=!0,this.event.emit({reason:"done",metadata:{item:new Ft.U(Object.assign(Object.assign(Object.assign({},this.item),{id:this.item.id||`item-${(0,_t.Iy)(99999999)}`}),this.form.value))}})}}return t.\u0275fac=function(e){return new(e||t)(c.Y36(wt.WI))},t.\u0275cmp=c.Xpm({type:t,selectors:[["catering-item-modal"]],outputs:{event:"event"},decls:11,vars:6,consts:function(){let t,e;return t=$localize`:@@tagsLabel␟800ffadd463cfe152c5af3fa9f13803ab2e77b93␟4746186018558508280: Tags: `,e=$localize`:@@zoneTagsPlaceholder␟8dc7c13b0c6b8ad9c770bce0ad72e14b4aef8456␟3986010900542572161:Zone tags...`,[["mat-dialog-title",""],["mat-icon-button","","mat-dialog-close","",4,"ngIf"],["class","p-4 overflow-auto",3,"formGroup",4,"ngIf","ngIfElse"],["class","flex p-2 items-center justify-center border-none border-t border-solid border-gray-300",4,"ngIf"],["load_state",""],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["mat-icon-button","","mat-dialog-close",""],[1,"p-4","overflow-auto",3,"formGroup"],["class","field",4,"ngIf"],[1,"field"],["for","title"],["appearance","outline"],["matInput","","name","name","placeholder","Item name","formControlName","name"],["for","category"],["matInput","","name","category","placeholder","Category","formControlName","category",3,"matAutocomplete"],["for","tags"],t,["aria-label","Item Tags"],["chipList",""],[3,"selectable","removable","removed",4,"ngFor","ngForOf"],["name","tags","placeholder",e,3,"matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputAddOnBlur","matChipInputTokenEnd"],[3,"selectable","removable","removed"],["matChipRemove","",3,"icon"],["for","description"],["matInput","","name","description","placeholder","Item Description","formControlName","description"],["matInput","","name","unit-price","type","number","placeholder","Unit Price","formControlName","unit_price"],[1,"flex","p-2","items-center","justify-center","border-none","border-t","border-solid","border-gray-300"],["mat-button","",3,"disabled","click"],[1,"flex","flex-col","items-center","p-8","space-y-2","w-64"],["diameter","32"],[3,"value"]]},template:function(t,e){if(1&t&&(c.TgZ(0,"header"),c.TgZ(1,"h3",0),c._uU(2),c.qZA(),c.YNc(3,jt,3,0,"button",1),c.qZA(),c.YNc(4,Gt,6,6,"form",2),c.YNc(5,$t,3,1,"footer",3),c.YNc(6,Wt,4,0,"ng-template",null,4,c.W1O),c.TgZ(8,"mat-autocomplete",null,5),c.YNc(10,zt,2,2,"mat-option",6),c.qZA()),2&t){const t=c.MAs(7);c.xp6(2),c.hij("",e.item.id?"Edit":"Add"," Item"),c.xp6(1),c.Q6J("ngIf",!e.loading),c.xp6(1),c.Q6J("ngIf",e.form&&!e.loading)("ngIfElse",t),c.xp6(1),c.Q6J("ngIf",!e.loading),c.xp6(5),c.Q6J("ngForOf",e.categories)}},directives:[wt.uh,i.O5,yt.XC,i.sg,qt.lW,wt.ZT,It.o,Ot.KE,kt.Nt,Ot.TO,yt.ZL,ft.qn,ft.oH,ft.HS,ft.qH,Qt.$g,d.ey],styles:[".field[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}"]}),t})();var Vt=n(4554),Kt=n(8512),te=n(7276);function ee(t,e){1&t&&(c.TgZ(0,"button",7),c.TgZ(1,"app-icon"),c._uU(2,"close"),c.qZA(),c.qZA())}function ne(t,e){if(1&t&&(c.TgZ(0,"div",10),c.TgZ(1,"label",11),c._uU(2," Name"),c.TgZ(3,"span"),c._uU(4,"*"),c.qZA(),c._uU(5,": "),c.qZA(),c.TgZ(6,"mat-form-field",12),c._UZ(7,"input",13),c.TgZ(8,"mat-error"),c._uU(9,"Name is required"),c.qZA(),c.qZA(),c.qZA()),2&t){const t=c.oxw(2);c.xp6(1),c.ekj("error",t.form.controls.name.invalid&&t.form.controls.name.touched)}}function ie(t,e){if(1&t&&(c.TgZ(0,"div",10),c.TgZ(1,"label",14),c._uU(2," Type"),c.TgZ(3,"span"),c._uU(4,"*"),c.qZA(),c._uU(5,": "),c.qZA(),c.TgZ(6,"mat-form-field",12),c._UZ(7,"input",15),c.TgZ(8,"mat-error"),c._uU(9,"Type is required"),c.qZA(),c.qZA(),c.qZA()),2&t){const t=c.oxw(2),e=c.MAs(9);c.xp6(1),c.ekj("error",t.form.controls.group.invalid&&t.form.controls.group.touched),c.xp6(6),c.Q6J("matAutocomplete",e)}}function oe(t,e){1&t&&(c.TgZ(0,"div",10),c.TgZ(1,"label",11),c._uU(2,"Unit Price:"),c.qZA(),c.TgZ(3,"mat-form-field",12),c._UZ(4,"input",16),c.qZA(),c.qZA())}function ae(t,e){1&t&&(c.TgZ(0,"div",10),c.TgZ(1,"mat-checkbox",17),c._uU(2," Can select multiple of type "),c.qZA(),c.qZA())}function se(t,e){if(1&t&&(c.TgZ(0,"form",8),c.YNc(1,ne,10,2,"div",9),c.YNc(2,ie,10,3,"div",9),c.YNc(3,oe,5,0,"div",9),c.YNc(4,ae,3,0,"div",9),c.qZA()),2&t){const t=c.oxw();c.Q6J("formGroup",t.form),c.xp6(1),c.Q6J("ngIf",t.form.controls.name),c.xp6(1),c.Q6J("ngIf",t.form.controls.group),c.xp6(1),c.Q6J("ngIf",t.form.controls.unit_price),c.xp6(1),c.Q6J("ngIf",t.form.controls.multiple)}}function re(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"footer",18),c.TgZ(1,"button",19),c.NdJ("click",function(){return c.CHM(t),c.oxw().saveChanges()}),c._uU(2," Save "),c.qZA(),c.qZA()}if(2&t){const t=c.oxw();c.xp6(1),c.Q6J("disabled",!t.form.dirty)}}function le(t,e){1&t&&(c.TgZ(0,"div",20),c._UZ(1,"mat-spinner",21),c.TgZ(2,"p"),c._uU(3,"Saving catering item option..."),c.qZA(),c.qZA())}function ce(t,e){if(1&t&&(c.TgZ(0,"mat-option",22),c._uU(1),c.qZA()),2&t){const t=e.$implicit;c.Q6J("value",t),c.xp6(1),c.hij(" ",t," ")}}let de=(()=>{class t{constructor(t){this._data=t,this.event=new c.vpe,this.loading=!1}get option(){return this._data.option}get types(){return this._data.types||[]}ngOnInit(){this.form=new o.cw({name:new o.NI(this.option.name||"",[o.kI.required]),group:new o.NI(this.option.group||"",[o.kI.required]),unit_price:new o.NI(this.option.unit_price),multiple:new o.NI(!!this.option.multiple,[])})}saveChanges(){this.loading=!0;const t=Object.assign(Object.assign(Object.assign({},this.option),{id:this.option.id||`option-${(0,te.Iy)(99999999)}`}),this.form.value);this.event.emit({reason:"done",metadata:{item:new Ft.U(Object.assign(Object.assign({},this._data.parent),{options:this._data.parent.options.filter(e=>e.id!==t.id).concat([t])}))}})}}return t.\u0275fac=function(e){return new(e||t)(c.Y36(wt.WI))},t.\u0275cmp=c.Xpm({type:t,selectors:[["catering-option-modal"]],outputs:{event:"event"},decls:11,vars:6,consts:[["mat-dialog-title",""],["mat-icon-button","","mat-dialog-close","",4,"ngIf"],["class","p-4 overflow-auto",3,"formGroup",4,"ngIf","ngIfElse"],["class","flex p-2 items-center justify-center border-none border-t border-solid border-gray-300",4,"ngIf"],["load_state",""],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["mat-icon-button","","mat-dialog-close",""],[1,"p-4","overflow-auto",3,"formGroup"],["class","field",4,"ngIf"],[1,"field"],["for","title"],["appearance","outline"],["matInput","","name","name","placeholder","Item name","formControlName","name"],["for","group"],["matInput","","name","group","placeholder","Type of option e.g. Number of sugars","formControlName","group",3,"matAutocomplete"],["matInput","","name","unit-price","type","number","placeholder","Unit Price","formControlName","unit_price"],["name","multiple","formControlName","multiple"],[1,"flex","p-2","items-center","justify-center","border-none","border-t","border-solid","border-gray-300"],["mat-button","",3,"disabled","click"],[1,"flex","flex-col","items-center","p-8","space-y-2","w-64"],["diameter","32"],[3,"value"]],template:function(t,e){if(1&t&&(c.TgZ(0,"header"),c.TgZ(1,"h3",0),c._uU(2),c.qZA(),c.YNc(3,ee,3,0,"button",1),c.qZA(),c.YNc(4,se,5,5,"form",2),c.YNc(5,re,3,1,"footer",3),c.YNc(6,le,4,0,"ng-template",null,4,c.W1O),c.TgZ(8,"mat-autocomplete",null,5),c.YNc(10,ce,2,2,"mat-option",6),c.qZA()),2&t){const t=c.MAs(7);c.xp6(2),c.hij(" ",e.option.id?"Edit":"Add"," Item Option "),c.xp6(1),c.Q6J("ngIf",!e.loading),c.xp6(1),c.Q6J("ngIf",e.form&&!e.loading)("ngIfElse",t),c.xp6(1),c.Q6J("ngIf",!e.loading),c.xp6(5),c.Q6J("ngForOf",e.types)}},directives:[wt.uh,i.O5,yt.XC,i.sg,qt.lW,wt.ZT,It.o,Ot.KE,kt.Nt,Ot.TO,yt.ZL,Qt.$g,d.ey],styles:[".field[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}"]}),t})();var ue=n(7968),ge=n(8774),me=n(847),pe=n(9310),he=n(9996),fe=n(391);function be(t,e){1&t&&(c.TgZ(0,"div",17),c._uU(1," Options Available "),c.qZA())}const _e=function(){return{class:"material-icons",content:"add"}};function xe(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"div",11),c.TgZ(1,"div",12),c.TgZ(2,"div",12),c._uU(3),c.qZA(),c.YNc(4,be,2,0,"div",13),c.qZA(),c.TgZ(5,"div",14),c._uU(6),c.ALo(7,"currency"),c.qZA(),c.TgZ(8,"button",15),c.NdJ("click",function(){const e=c.CHM(t).$implicit;return c.oxw(5).addItem(e)}),c._UZ(9,"app-icon",16),c.qZA(),c.qZA()}if(2&t){const t=e.$implicit;c.xp6(3),c.hij(" ",t.name," "),c.xp6(1),c.Q6J("ngIf",t.options.length),c.xp6(2),c.hij(" ",c.lcZ(7,4,t.unit_price/100)," "),c.xp6(3),c.Q6J("icon",c.DdM(6,_e))}}const ve=function(){return{}};function Ze(t,e){if(1&t&&(c.TgZ(0,"mat-tab",8),c.TgZ(1,"div",9),c.YNc(2,xe,10,7,"div",10),c.ALo(3,"async"),c.qZA(),c.qZA()),2&t){const t=c.oxw().$implicit,e=c.oxw(3);c.Q6J("label",t),c.xp6(2),c.Q6J("ngForOf",(c.lcZ(3,2,e.menu_items$)||c.DdM(4,ve))[t])}}function ye(t,e){if(1&t&&(c.ynx(0),c.YNc(1,Ze,4,5,"mat-tab",7),c.ALo(2,"async"),c.BQk()),2&t){const t=e.$implicit,n=c.oxw(3);c.xp6(1),c.Q6J("ngIf",(c.lcZ(2,1,n.menu_items$)||c.DdM(3,ve))[t].length)}}function we(t,e){if(1&t&&(c.ynx(0),c.TgZ(1,"mat-tab-group"),c.YNc(2,ye,3,4,"ng-container",6),c.ALo(3,"async"),c.qZA(),c.BQk()),2&t){const t=c.oxw(2);c.xp6(2),c.Q6J("ngForOf",c.lcZ(3,1,t.categories))}}function Te(t,e){if(1&t&&(c.TgZ(0,"div",4),c.YNc(1,we,4,3,"ng-container",5),c.qZA()),2&t){const t=c.oxw(),e=c.MAs(5);c.xp6(1),c.Q6J("ngIf",!t.show_order_details)("ngIfElse",e)}}function Ae(t,e){if(1&t){const t=c.EpF();c.ynx(0),c.TgZ(1,"button",19),c._uU(2," Cancel "),c.qZA(),c.TgZ(3,"button",20),c.NdJ("click",function(){return c.CHM(t),c.oxw(2).show_order_details=!0}),c._uU(4," Confirm "),c.qZA(),c.BQk()}if(2&t){const t=c.oxw(2);c.xp6(3),c.Q6J("disabled",!t.order.item_count)("matBadge",t.order.item_count)("matBadgeHidden",!t.order.item_count)}}function Ce(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"button",21),c.NdJ("click",function(){return c.CHM(t),c.oxw(2).show_order_details=!1}),c._uU(1," Back "),c.qZA(),c.TgZ(2,"button",22),c.NdJ("click",function(){return c.CHM(t),c.oxw(2).saveOrder()}),c._uU(3," Save Order "),c.qZA()}}function qe(t,e){if(1&t&&(c.TgZ(0,"footer"),c.YNc(1,Ae,5,3,"ng-container",5),c.YNc(2,Ce,4,0,"ng-template",null,18,c.W1O),c.qZA()),2&t){const t=c.MAs(3),e=c.oxw();c.xp6(1),c.Q6J("ngIf",!e.show_order_details)("ngIfElse",t)}}function Ie(t,e){if(1&t&&(c.TgZ(0,"div",23),c._UZ(1,"mat-spinner",24),c.TgZ(2,"p"),c._uU(3),c.qZA(),c.qZA()),2&t){const t=c.oxw();c.xp6(3),c.Oqu(t.loading)}}function Oe(t,e){if(1&t&&(c.TgZ(0,"div",30),c._uU(1),c.qZA()),2&t){const t=c.oxw().$implicit,e=c.oxw(2);c.Q6J("matTooltip",e.optionsFor(t)),c.xp6(1),c.AsE(" ",t.options.length," option",1===t.options.length?"":"s"," selected ")}}function ke(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"div",11),c.TgZ(1,"div",12),c.TgZ(2,"div",12),c._uU(3),c.qZA(),c.YNc(4,Oe,2,3,"div",28),c.qZA(),c.TgZ(5,"div",14),c._uU(6),c.ALo(7,"currency"),c.qZA(),c.TgZ(8,"a-counter",29),c.NdJ("ngModelChange",function(e){const n=c.CHM(t).$implicit;return c.oxw(2).updateItemQuantity(n,e)}),c.qZA(),c.qZA()}if(2&t){const t=e.$implicit;c.xp6(3),c.Oqu(t.name),c.xp6(1),c.Q6J("ngIf",t.options.length),c.xp6(2),c.hij(" ",c.lcZ(7,4,t.total_cost/100)," "),c.xp6(2),c.Q6J("ngModel",t.quantity)}}function Me(t,e){if(1&t&&(c.TgZ(0,"header",25),c.TgZ(1,"h3"),c._uU(2,"Confirm Order"),c.qZA(),c.qZA(),c.TgZ(3,"div",9),c.YNc(4,ke,9,6,"div",10),c.qZA(),c.TgZ(5,"div",26),c._UZ(6,"input",27),c.qZA()),2&t){const t=c.oxw();c.xp6(4),c.Q6J("ngForOf",t.order.items),c.xp6(1),c.Q6J("formGroup",t.form),c.xp6(1),c.ekj("error",t.form.controls.charge_code.touched&&t.form.controls.charge_code.invalid)}}function Ue(t,e,n){var i;let o=!0;for(const a of e)if(t.category===a.name||t.tags.includes(a.name)||(null===(i=n.space)||void 0===i?void 0:i.zones.includes(a.name))||"*"===a.name){let t=0;for(const e of a.rules){const i=new Date(n.date);switch(e[0]){case"after_hour":t+=(0,ge.Z)(i,(0,me.Z)(i,e[1]))?1:0;break;case"before_hour":t+=(0,pe.Z)(i,(0,me.Z)(i,e[1]))?1:0;break;case"min_length":t+=n.duration>=(0,fe.H1)(e[1])?1:0;break;case"max_length":t+=n.duration<=(0,fe.H1)(e[1])?1:0;break;case"visitor_type":t+=n.ext("visitor_type")===e[1]?1:0;break;default:t++}}o=t>=a.rules.length}return o}let Pe=(()=>{class t extends _t.KG{constructor(t){super(),this._data=t,this.event=new c.vpe,this.loading="",this.loading="Loading menu...",this.menu_items$=this._data.menu.pipe((0,he.U)(t=>{const e=(0,_t.Tw)(t.map(t=>t.category)),n={};for(const i of e)n[i]=t.filter(t=>t.category===i&&Ue(t,this.rules,this.order.event));return n})),this.order=new ue.G(this._data.order),this.form=new o.cw({charge_code:new o.NI(this.order.charge_code,[o.kI.required])}),this.subscription("charge_code",this.form.controls.charge_code.valueChanges.subscribe(t=>this.order=new ue.G(Object.assign(Object.assign({},this.order),{charge_code:t})))),this.subscription("loading",this._data.loading.subscribe(t=>this.loading=t?"Loading menu...":"")),this.loading="Loading menu...",this.timeout("loading",()=>this.loading="",1e3)}get categories(){return this._data.menu.pipe((0,he.U)(t=>(0,_t.Tw)(t.map(t=>t.category))))}ngOnInit(){var t,e,n;return(0,vt.mG)(this,void 0,void 0,function*(){this.rules=yield this._data.getCateringConfig(null===(n=null===(e=null===(t=this.order.event)||void 0===t?void 0:t.space)||void 0===e?void 0:e.level)||void 0===n?void 0:n.parent_id)})}addItem(t,e=!0){var n;const i=this.order.items.find(e=>e.id===t.id&&e.options.length===e.options.reduce((e,n)=>e+(t.options.find(t=>n.id===t.id)?1:0),0));e&&(null===(n=t.options)||void 0===n?void 0:n.length)?this._data.selectOptions(t.options).then(e=>{const n=new Ft.U(Object.assign(Object.assign({},t),{options:e}));this.addItem(n,!1)}):this.order=new ue.G(Object.assign(Object.assign({},this.order),i?{items:this.order.items.filter(t=>t!==i&&t.options.length===i.options.length).concat([new Ft.U(Object.assign(Object.assign({},t),{quantity:i.quantity+1}))])}:{items:this.order.items.concat([new Ft.U(Object.assign(Object.assign({},t),{quantity:1}))])}))}updateItemQuantity(t,e){const n=this.order.items.find(e=>e.id===t.id&&t.options.length===t.options.reduce((t,n)=>t+(e.options.find(t=>n.id===t.id)?1:0),0));let i=[...this.order.items];i=n?this.order.items.filter(e=>e.id!==t.id).concat([new Ft.U(Object.assign(Object.assign({},t),{quantity:e}))]):this.order.items.concat([new Ft.U(Object.assign(Object.assign({},t),{quantity:e}))]),i.sort((t,e)=>t.name.localeCompare(e.name)),this.order=new ue.G(Object.assign(Object.assign({},this.order),{items:i}))}optionsFor(t){return t.options.map(t=>t.name).join("\n")}saveOrder(){this.form.markAllAsTouched(),this.form.valid&&this.event.emit({reason:"done",metadata:{order:this.order}})}}return t.\u0275fac=function(e){return new(e||t)(c.Y36(wt.WI))},t.\u0275cmp=c.Xpm({type:t,selectors:[["app-catering-order-modal"]],outputs:{event:"event"},features:[c.qOj],decls:6,vars:3,consts:[["class","main min-w-[20rem]",4,"ngIf","ngIfElse"],[4,"ngIf"],["load_state",""],["order_details",""],[1,"main","min-w-[20rem]"],[4,"ngIf","ngIfElse"],[4,"ngFor","ngForOf"],[3,"label",4,"ngIf"],[3,"label"],[1,"list"],["item","","class","flex items-center p-2 border-b border-gray-50",4,"ngFor","ngForOf"],["item","",1,"flex","items-center","p-2","border-b","border-gray-50"],[1,"flex-1","w-1/2"],["class","info no-underline",4,"ngIf"],[1,"bg-primary","text-xs","rounded","px-4","py-2","mx-2","text-white","font-medium"],["mat-icon-button","",3,"click"],[3,"icon"],[1,"info","no-underline"],["order_actions",""],["mat-button","","mat-dialog-close","",1,"inverse"],["confirm","","mat-button","","matBadgeColor","warn",3,"disabled","matBadge","matBadgeHidden","click"],["mat-button","",1,"inverse",3,"click"],["save","","mat-button","",3,"click"],[1,"flex","flex-col","w-64","p-8","items-center","space-y-2"],["diameter","32"],[1,"h-[3.25rem]"],[1,"charge-code",3,"formGroup"],["formControlName","charge_code","placeholder","Charge Code*","required",""],["class","text-xs underline",3,"matTooltip",4,"ngIf"],[3,"ngModel","ngModelChange"],[1,"text-xs","underline",3,"matTooltip"]],template:function(t,e){if(1&t&&(c.YNc(0,Te,2,2,"div",0),c.YNc(1,qe,4,2,"footer",1),c.YNc(2,Ie,4,1,"ng-template",null,2,c.W1O),c.YNc(4,Me,7,4,"ng-template",null,3,c.W1O)),2&t){const t=c.MAs(3);c.Q6J("ngIf",!e.loading)("ngIfElse",t),c.xp6(1),c.Q6J("ngIf",!e.loading)}},directives:[i.O5,rt,i.sg,z,qt.lW,It.o,wt.ZT,Qt.$g],pipes:[i.Ov,i.H9],styles:[".list[_ngcontent-%COMP%]{height:24em;min-width:24em;max-width:calc(100vw - 1em)}footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:8em}input[_ngcontent-%COMP%]{position:relative;width:100%;padding:1em;border-radius:0!important;border:1px solid #ccc;border-right:none;border-left:none;outline:none;font-size:1em;&:focus{border:none;border-top:2px solid var(--primary);border-bottom:2px solid var(--primary);box-shadow:none}&.error::placeholder{color:rgba(var(--error),.45)}}"]}),t})();function Ne(t,e){if(1&t&&(c.TgZ(0,"div",16),c._uU(1),c.ALo(2,"currency"),c.qZA()),2&t){const t=c.oxw().$implicit;c.xp6(1),c.hij(" +",c.lcZ(2,1,t.unit_price/100)," ")}}function Je(t,e){if(1&t&&(c.TgZ(0,"mat-radio-button",12),c.TgZ(1,"div",13),c.TgZ(2,"div",14),c._uU(3),c.qZA(),c.YNc(4,Ne,3,3,"div",15),c.qZA(),c.qZA()),2&t){const t=e.$implicit;c.Q6J("value",t.id),c.xp6(3),c.hij(" ",t.name," "),c.xp6(1),c.Q6J("ngIf",t.unit_price)}}function Ye(t,e){if(1&t){const t=c.EpF();c.ynx(0),c.TgZ(1,"mat-radio-group",9),c.NdJ("ngModelChange",function(e){c.CHM(t);const n=c.oxw().$implicit;return c.oxw().updateGroupOption(n,e)}),c.TgZ(2,"mat-radio-button",10),c._uU(3," None "),c.qZA(),c.YNc(4,Je,5,3,"mat-radio-button",11),c.qZA(),c.BQk()}if(2&t){const t=c.oxw().$implicit;c.xp6(4),c.Q6J("ngForOf",null==t?null:t.options)}}function Fe(t,e){if(1&t&&(c.TgZ(0,"div",16),c._uU(1),c.ALo(2,"currency"),c.qZA()),2&t){const t=c.oxw().$implicit;c.xp6(1),c.hij(" +",c.lcZ(2,1,t.unit_price/100)," ")}}function Qe(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"mat-checkbox",18),c.NdJ("ngModelChange",function(e){const n=c.CHM(t).$implicit;return c.oxw(3).option_state[n.id]=e}),c.TgZ(1,"div",13),c.TgZ(2,"div",14),c._uU(3),c.qZA(),c.YNc(4,Fe,3,3,"div",15),c.qZA(),c.qZA()}if(2&t){const t=e.$implicit,n=c.oxw(3);c.Q6J("ngModel",n.option_state[t.id]),c.xp6(3),c.hij(" ",t.name," "),c.xp6(1),c.Q6J("ngIf",t.unit_price)}}function je(t,e){if(1&t&&c.YNc(0,Qe,5,3,"mat-checkbox",17),2&t){const t=c.oxw().$implicit;c.Q6J("ngForOf",null==t?null:t.options)}}function Se(t,e){if(1&t&&(c.TgZ(0,"div",4),c.TgZ(1,"div",5),c._uU(2),c.qZA(),c.TgZ(3,"div",6),c.YNc(4,Ye,5,1,"ng-container",7),c.YNc(5,je,1,1,"ng-template",null,8,c.W1O),c.qZA(),c.qZA()),2&t){const t=e.$implicit,n=c.MAs(6);c.uIk("group",t.name),c.xp6(2),c.Oqu(t.name),c.xp6(2),c.Q6J("ngIf",!t.multiple)("ngIfElse",n)}}let Le=(()=>{class t{constructor(t){this._data=t,this.event=new c.vpe,this.option_state={};const e=(0,te.Tw)(this._data.options.map(t=>t.group||"Other")),n=[];for(const i of e){const t=this._data.options.filter(t=>t.group===i);n.push({name:i,multiple:!!t.find(t=>t.multiple),options:t})}this.groups=n}updateGroupOption(t,e){for(const n of t.options)this.option_state[n.id]=n.id===e}saveOptions(){const t=this._data.options.filter(t=>this.option_state[t.id]);this.event.emit({reason:"done",metadata:{options:t}})}}return t.\u0275fac=function(e){return new(e||t)(c.Y36(wt.WI))},t.\u0275cmp=c.Xpm({type:t,selectors:[["app-catering-options-modal"]],outputs:{event:"event"},decls:11,vars:1,consts:[["mat-icon-button","","mat-dialog-close",""],[1,"overflow-auto"],["class","pt-1 pb-2 border-b border-gray-200",4,"ngFor","ngForOf"],["mat-button","",3,"click"],[1,"pt-1","pb-2","border-b","border-gray-200"],[1,"font-medium","p-2"],[1,"flex","flex-col","pl-6"],[4,"ngIf","ngIfElse"],["multi_options",""],["aria-label","Select an option","ngModel","",1,"flex","flex-col",3,"ngModelChange"],["value","",1,"my-1","mx-0"],["class","my-1 mx-0",3,"value",4,"ngFor","ngForOf"],[1,"my-1","mx-0",3,"value"],[1,"flex","items-center","justify-center"],[1,"font-medium","p-2","flex-1","w-1/2"],["class","opacity-60 text-xs",4,"ngIf"],[1,"opacity-60","text-xs"],[3,"ngModel","ngModelChange",4,"ngFor","ngForOf"],[3,"ngModel","ngModelChange"]],template:function(t,e){1&t&&(c.TgZ(0,"header"),c.TgZ(1,"h3"),c._uU(2,"Select options"),c.qZA(),c.TgZ(3,"button",0),c.TgZ(4,"app-icon"),c._uU(5,"close"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(6,"main",1),c.YNc(7,Se,7,4,"div",2),c.qZA(),c.TgZ(8,"footer"),c.TgZ(9,"button",3),c.NdJ("click",function(){return e.saveOptions()}),c._uU(10,"Save"),c.qZA(),c.qZA()),2&t&&(c.xp6(7),c.Q6J("ngForOf",e.groups))},directives:[qt.lW,wt.ZT,It.o,i.sg,i.O5],pipes:[i.H9],styles:["main[_ngcontent-%COMP%]{min-height:24em}"]}),t})();var De=n(9294);let Re=(()=>{class t extends _t.KG{constructor(t,e){super(),this._org=t,this._dialog=e,this._menu=new Kt.X([]),this._loading=new Kt.X(!1),this._currency=new Kt.X("USD"),this.menu=this._menu.asObservable(),this.loading=this._loading.asObservable(),this.currency=this._currency.asObservable(),this.subscription("building",this._org.active_building.subscribe(t=>(0,vt.mG)(this,void 0,void 0,function*(){if(t){const e=(yield this.getCateringForZone(t.id)).map(t=>new Ft.U(t));this._currency.next(t.currency||"USD"),this._menu.next(e)}})))}get categories(){const t=this._menu.getValue();return(0,_t.Tw)(t.map(t=>t.category))}manageCateringOrder(t){var e;return(0,vt.mG)(this,void 0,void 0,function*(){const n=this._dialog.open(Pe,{data:{order:t,menu:this.menu,loading:this.loading,getCateringConfig:t=>this.getCateringConfig(t),selectOptions:t=>this.selectOptions(t)}}),i=yield Promise.race([n.componentInstance.event.pipe((0,Zt.P)(t=>"done"===t.reason)).toPromise(),n.afterClosed().toPromise()]);return(null===(e=null==i?void 0:i.metadata)||void 0===e?void 0:e.order)||t})}addItem(t=new Ft.U){return(0,vt.mG)(this,void 0,void 0,function*(){const e=this._dialog.open(Xt,{data:{item:t,categories:this.categories}}),n=yield Promise.race([e.componentInstance.event.pipe((0,Zt.P)(t=>"done"===t.reason)).toPromise(),e.afterClosed().toPromise()]);if("done"!==(null==n?void 0:n.reason))return;const i=this._menu.getValue(),o=i.findIndex(e=>e.id===t.id);o>=0?i.splice(o,1,n.metadata.item):i.push(n.metadata.item),this.updateMenu(this._org.building.id,i).then(()=>{this._menu.next([...i]),e.close()},()=>e.componentInstance.loading=!1)})}addOption(t,e={}){return(0,vt.mG)(this,void 0,void 0,function*(){const n=(0,_t.Tw)(t.options.map(t=>t.group)),i=this._dialog.open(de,{data:{parent:t,option:e,types:n}}),o=yield Promise.race([i.componentInstance.event.pipe((0,Zt.P)(t=>"done"===t.reason)).toPromise(),i.afterClosed().toPromise()]);if("done"!==(null==o?void 0:o.reason))return;const a=this._menu.getValue(),s=a.findIndex(e=>e.id===t.id);s>=0?a.splice(s,1,o.metadata.item):a.push(o.metadata.item),this.updateMenu(this._org.building.id,a).then(()=>{this._menu.next([...a]),i.close()},()=>i.componentInstance.loading=!1)})}selectOptions(t){return(0,vt.mG)(this,void 0,void 0,function*(){const e=this._dialog.open(Le,{data:{options:t}}),n=yield Promise.race([e.componentInstance.event.pipe((0,Zt.P)(t=>"done"===t.reason)).toPromise(),e.afterClosed().toPromise()]);return"done"!==(null==n?void 0:n.reason)?[]:(e.close(),n.metadata.options)})}deleteItem(t){return(0,vt.mG)(this,void 0,void 0,function*(){const e=yield(0,_t._5)({title:"Delete Catering Item",content:`Are you sure you wish to remove the catering item ${t.name} from the menu?`,icon:{type:"icon",class:"material-icons",content:"delete"}},this._dialog);if("done"!==e.reason)return;e.loading("Removing catering item...");const n=this._menu.getValue().filter(e=>t.id!==e.id);this.updateMenu(this._org.building.id,n).then(()=>{this._menu.next([...n]),e.close()},()=>e.loading(""))})}deleteOption(t,e){return(0,vt.mG)(this,void 0,void 0,function*(){const n=yield(0,_t._5)({title:"Delete Catering Item Option",content:`Are you sure you wish to remove the catering option "${e.name}" from "${t.name}"?`,icon:{type:"icon",class:"material-icons",content:"delete"}},this._dialog);if("done"!==n.reason)return;n.loading("Removing catering item option...");const i=this._menu.getValue();i.splice(i.findIndex(e=>e.id===t.id),1,new Ft.U(Object.assign(Object.assign({},t),{options:t.options.filter(t=>t.id!==e.id)}))),this.updateMenu(this._org.building.id,i).then(()=>{this._menu.next([...i]),n.close()},()=>n.loading(""))})}editConfig(){return(0,vt.mG)(this,void 0,void 0,function*(){const t=yield this.getCateringConfig(this._org.building.id),e=this._menu.getValue(),n=(0,_t.Tw)((0,_t.xH)(e.map(t=>[t.category,...t.tags]))),i=this._dialog.open(Yt,{data:{config:t,types:n}}),o=yield Promise.race([i.componentInstance.event.pipe((0,Zt.P)(t=>"done"===t.reason)).toPromise(),i.afterClosed().toPromise()]);"done"===(null==o?void 0:o.reason)&&this.updateConfig(this._org.building.id,o.metadata).then(()=>i.close(),()=>i.componentInstance.loading=!1)})}updateMenu(t,e){return(0,Vt.Ymr)(t,{id:t,name:"catering",details:e,description:`Catering menu for ${t}`}).toPromise()}getCateringForZone(t){return(0,vt.mG)(this,void 0,void 0,function*(){const e=(yield(0,Vt.rlq)(t,{name:"catering"}).toPromise()).details;return e instanceof Array?e:[]})}getCateringConfig(t=this._org.building.id){return(0,vt.mG)(this,void 0,void 0,function*(){const e=(yield(0,Vt.rlq)(t,{name:"catering_config"}).toPromise()).details;return e instanceof Array?e:[]})}updateConfig(t,e){return(0,Vt.Ymr)(t,{id:t,name:"catering_config",details:e,description:`Catering menu config for ${t}`}).toPromise()}addItemToOrder(t,e){let n=t.items;const i=n.find(t=>{var n,i;return t.id===e.id&&(null===(n=e.options)||void 0===n?void 0:n.length)===(null===(i=t.options)||void 0===i?void 0:i.reduce((t,n)=>t+(e.options.find(t=>n.id===t.id)?1:0),0))});return i?i.quantity+=1:n=n.concat([new Ft.U(Object.assign(Object.assign({},e),{quantity:1}))]),new ue.G(Object.assign(Object.assign({},t),{items:n,event:null}))}}return t.\u0275fac=function(e){return new(e||t)(c.LFG(De.w7),c.LFG(wt.uw))},t.\u0275prov=c.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const Ee=["catering-menu-item",""];function Be(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"div",5),c.TgZ(1,"div",6),c.TgZ(2,"div",7),c.TgZ(3,"div"),c._uU(4),c.qZA(),c.TgZ(5,"div",8),c._uU(6),c.qZA(),c.qZA(),c.TgZ(7,"div",9),c._uU(8),c.ALo(9,"currency"),c.ALo(10,"async"),c.qZA(),c.qZA(),c.TgZ(11,"button",10),c.TgZ(12,"app-icon"),c._uU(13,"more_vert"),c.qZA(),c.qZA(),c.TgZ(14,"button",11),c.NdJ("click",function(){c.CHM(t);const e=c.oxw();return e.show_options=!e.show_options}),c.TgZ(15,"app-icon"),c._uU(16,"expand_more"),c.qZA(),c.qZA(),c.qZA()}if(2&t){const t=c.oxw(),e=c.MAs(3);c.xp6(4),c.Oqu(t.item.name),c.xp6(2),c.hij(" ",t.item.category," "),c.xp6(2),c.hij(" ",c.xi3(9,5,t.item.unit_price/100,c.lcZ(10,8,t.symbol))," "),c.xp6(3),c.Q6J("matMenuTriggerFor",e),c.xp6(3),c.Q6J("disabled",!t.item.options.length)}}function He(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"div",14),c.TgZ(1,"div",15),c.TgZ(2,"div",16),c._uU(3),c.qZA(),c.TgZ(4,"div",8),c._uU(5),c.qZA(),c.qZA(),c.TgZ(6,"button",17),c.NdJ("click",function(){const e=c.CHM(t).$implicit;return c.oxw(2).editOption(e)}),c.TgZ(7,"app-icon"),c._uU(8,"edit"),c.qZA(),c.qZA(),c.TgZ(9,"button",18),c.NdJ("click",function(){const e=c.CHM(t).$implicit;return c.oxw(2).removeOption(e)}),c.TgZ(10,"app-icon"),c._uU(11,"delete"),c.qZA(),c.qZA(),c.qZA()}if(2&t){const t=e.$implicit;c.xp6(3),c.Oqu(t.name),c.xp6(2),c.Oqu(t.group)}}function Ge(t,e){if(1&t&&(c.TgZ(0,"div",12),c.YNc(1,He,12,2,"div",13),c.qZA()),2&t){const t=c.oxw();c.Udp("height",t.show_options?3.5*t.item.options.length+"rem":"0"),c.xp6(1),c.Q6J("ngForOf",t.item.options)}}let $e=(()=>{class t{constructor(t){this._catering=t,this.show_options=!1,this.addOption=()=>this._catering.addOption(this.item),this.editOption=t=>this._catering.addOption(this.item,t),this.removeOption=t=>this._catering.deleteOption(this.item,t),this.editItem=()=>this._catering.addItem(this.item),this.removeItem=()=>this._catering.deleteItem(this.item)}get symbol(){return this._catering.currency}}return t.\u0275fac=function(e){return new(e||t)(c.Y36(Re))},t.\u0275cmp=c.Xpm({type:t,selectors:[["","catering-menu-item",""]],inputs:{item:"item"},attrs:Ee,decls:19,vars:2,consts:[["item","","class","flex items-center px-2",4,"ngIf"],["options","","class","bg-gray-100 overflow-hidden",3,"height",4,"ngIf"],["menu","matMenu"],["mat-menu-item","",1,"flex","items-center",3,"click"],[1,"ml-2"],["item","",1,"flex","items-center","px-2"],[1,"flex","items-center","p-2","flex-1"],[1,"flex-1"],[1,"text-xs","text-dark-fade"],[1,"p-2","m-2","text-xs","font-bold","text-white","rounded","bg-primary"],["mat-icon-button","",3,"matMenuTriggerFor"],["mat-icon-button","",3,"disabled","click"],["options","",1,"bg-gray-100","overflow-hidden"],["class","flex p-2 items-center border-none border-t border-solid border-gray-300",4,"ngFor","ngForOf"],[1,"flex","p-2","items-center","border-none","border-t","border-solid","border-gray-300"],[1,"flex-1","px-2"],[1,"text"],["edit","","mat-icon-button","",1,"mx-2",3,"click"],["remove","","mat-icon-button","",1,"mx-2",3,"click"]],template:function(t,e){1&t&&(c.YNc(0,Be,17,10,"div",0),c.YNc(1,Ge,2,3,"div",1),c.TgZ(2,"mat-menu",null,2),c.TgZ(4,"button",3),c.NdJ("click",function(){return e.addOption()}),c.TgZ(5,"app-icon"),c._uU(6,"add"),c.qZA(),c.TgZ(7,"div",4),c._uU(8,"Add Option"),c.qZA(),c.qZA(),c.TgZ(9,"button",3),c.NdJ("click",function(){return e.editItem()}),c.TgZ(10,"app-icon"),c._uU(11,"edit"),c.qZA(),c.TgZ(12,"div",4),c._uU(13,"Edit Item"),c.qZA(),c.qZA(),c.TgZ(14,"button",3),c.NdJ("click",function(){return e.removeItem()}),c.TgZ(15,"app-icon"),c._uU(16,"delete"),c.qZA(),c.TgZ(17,"div",4),c._uU(18,"Remove Item"),c.qZA(),c.qZA(),c.qZA()),2&t&&(c.Q6J("ngIf",e.item),c.xp6(1),c.Q6J("ngIf",e.item))},directives:[i.O5,Tt.VK,Tt.OP,It.o,qt.lW,Tt.p6,i.sg],pipes:[i.H9,i.Ov],styles:["[_nghost-%COMP%]{background-color:#fff;border:1px solid #ccc;border-radius:.25rem;overflow:hidden;width:768px;margin:.5rem auto;max-width:calc(100vw - 1rem)}button[mat-menu-item][_ngcontent-%COMP%]{display:flex}[options][_ngcontent-%COMP%]{transition:height .2s}"]}),t})();function We(t,e){if(1&t&&(c.ynx(0),c._UZ(1,"div",6),c.BQk()),2&t){const t=e.$implicit;c.xp6(1),c.Q6J("item",t)}}function ze(t,e){if(1&t&&(c.ynx(0),c.YNc(1,We,2,1,"ng-container",5),c.ALo(2,"async"),c.BQk()),2&t){const t=c.oxw();c.xp6(1),c.Q6J("ngForOf",c.lcZ(2,1,t.menu))}}function Xe(t,e){if(1&t&&(c.ynx(0),c._UZ(1,"div",6),c.BQk()),2&t){const t=e.$implicit;c.xp6(1),c.Q6J("item",t)}}function Ve(t,e){if(1&t&&(c.TgZ(0,"mat-tab",7),c.YNc(1,Xe,2,1,"ng-container",5),c.ALo(2,"async"),c.qZA()),2&t){const t=e.$implicit,n=c.oxw();c.Q6J("label",t),c.xp6(1),c.Q6J("ngForOf",c.lcZ(2,2,n.tab_menu)[t])}}function Ke(t,e){1&t&&(c.TgZ(0,"div",8),c.TgZ(1,"app-icon"),c._uU(2,"close"),c.qZA(),c.TgZ(3,"p"),c._uU(4,"No items in menu"),c.qZA(),c.qZA())}let tn=(()=>{class t{constructor(t){this._catering=t,this.menu=this._catering.menu,this.shown_tab=new Kt.X(""),this.tab_menu=this.menu.pipe((0,he.U)(t=>{const e={};for(const n of this.categories)e[n]=t.filter(t=>t.category===n);return e}))}get categories(){return this._catering.categories}}return t.\u0275fac=function(e){return new(e||t)(c.Y36(Re))},t.\u0275cmp=c.Xpm({type:t,selectors:[["catering-menu"]],decls:7,vars:5,consts:[[1,"h-full",3,"selectedIndexChange"],["label","All Items"],[4,"ngIf","ngIfElse"],[3,"label",4,"ngFor","ngForOf"],["empty_state",""],[4,"ngFor","ngForOf"],["catering-menu-item","",3,"item"],[3,"label"],[1,"flex","flex-col","items-center","p-8","space-y-2"]],template:function(t,e){if(1&t&&(c.TgZ(0,"mat-tab-group",0),c.NdJ("selectedIndexChange",function(t){return e.shown_tab.next(0===t?"":e.categories[t-1])}),c.TgZ(1,"mat-tab",1),c.YNc(2,ze,3,3,"ng-container",2),c.ALo(3,"async"),c.qZA(),c.YNc(4,Ve,3,4,"mat-tab",3),c.qZA(),c.YNc(5,Ke,5,0,"ng-template",null,4,c.W1O)),2&t){const t=c.MAs(6);let n;c.xp6(2),c.Q6J("ngIf",null==(n=c.lcZ(3,3,e.menu))?null:n.length)("ngIfElse",t),c.xp6(2),c.Q6J("ngForOf",e.categories)}},directives:[rt,z,i.O5,i.sg,$e,It.o],pipes:[i.Ov],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:90%;width:100%}"]}),t})();const en=["catering-order-item",""];let nn=(()=>{class t{constructor(){this.active=!1}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=c.Xpm({type:t,selectors:[["","catering-order-item",""]],inputs:{item:"item"},attrs:en,decls:8,vars:8,consts:[[1,"w-20","text-right"],["name","item-bar",1,"bg-gray-300"],[1,"w-12","mr-4"],["mat-icon-button","",1,"border","border-gray-300","border-dashed","text-2xl","text-dark-fade"],[1,"flex-1","border-b","border-gray-300","border-solid","py-4"]],template:function(t,e){1&t&&(c.TgZ(0,"div",0),c._UZ(1,"div",1),c.qZA(),c.TgZ(2,"div",2),c.TgZ(3,"button",3),c.TgZ(4,"app-icon"),c._uU(5),c.qZA(),c.qZA(),c.qZA(),c.TgZ(6,"div",4),c._uU(7),c.qZA()),2&t&&(c.xp6(3),c.ekj("bg-success",e.active)("text-white",e.active)("border-solid",e.active),c.xp6(2),c.Oqu(e.active?"done":"local_pizza"),c.xp6(2),c.hij(" ",null==e.item?null:e.item.name," "))},directives:[qt.lW,It.o],styles:["[_nghost-%COMP%]:last-child > div[_ngcontent-%COMP%]{border:none!important}[name=item-bar][_ngcontent-%COMP%]{height:2px;margin-left:auto;margin-right:1rem;width:calc(50% - .9375rem)}"]}),t})();const on=[{id:"pending",name:"Pending",icon:{class:"custom-pending"},colour:"#ccc"},{id:"accepted",name:"Accepted",icon:{class:"custom-accepted"},colour:"#3996B6"},{id:"preparing",name:"Preparing",icon:{class:"custom-preparing"},colour:"#E7536B"},{id:"ready",name:"Ready",icon:{class:"custom-ready"},colour:"#FFD028"},{id:"delivered",name:"Delivered",icon:{class:"custom-delivered"},colour:"#75BB43"},{id:"cancelled",name:"Cancelled",icon:{class:"custom-cancelled"},colour:"#747474"}];var an=n(3080),sn=n(7701),rn=n(4689),ln=n(4019),cn=n(8303),dn=n(4914),un=n(205),gn=n(8125),mn=n(3499),pn=n(9005);let hn=(()=>{class t extends _t.KG{constructor(){super(),this._poll=new Kt.X(0),this._loading=new Kt.X(!1),this._filters=new Kt.X({}),this.orders=(0,an.aj)([this._filters,this._poll]).pipe((0,sn.b)(500),(0,rn.w)(([t])=>{this._loading.next(!0);const e=(0,dn.Z)((0,un.Z)(t.date||Date.now())),n=(0,dn.Z)((0,gn.Z)(t.date||Date.now()));return(0,mn.u$)({zone_ids:(t.zones||[]).join(","),period_start:e,period_end:n})}),(0,he.U)(t=>(0,_t.xH)(t.map(t=>t.ext("catering")))),(0,ln.b)(()=>this._loading.next(!1)),(0,cn.d)(1)),this.loading=this._loading.asObservable(),this.filtered=this.orders.pipe((0,he.U)(t=>t.filter(t=>function(t,e){const n=(e.search||"").toLowerCase();return!!t.items.find(t=>t.name.toLowerCase().includes(n)||!!t.options.find(t=>t.name.toLowerCase().includes(n)))}(t,this._filters.getValue())))),this.subscription("changes",this.orders.subscribe())}get filters(){return this._filters.getValue()}set filters(t){this._filters.next(t)}startPolling(t=15e3){this.interval("polling",()=>this._poll.next((new Date).valueOf()),t)}stopPolling(){this.clearInterval("polling")}updateStatus(t,e){const n=new ue.G(Object.assign(Object.assign({},t),{status:e})),i=new pn.y(Object.assign(Object.assign({},t.event),{catering:[...t.event.ext("catering").filter(e=>e.id!==t.id),n].map(t=>new ue.G(Object.assign({},t)))}));return(0,mn.ry)(i)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=c.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function fn(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"div",4),c.TgZ(1,"div",5),c.TgZ(2,"div",6),c.TgZ(3,"app-icon"),c._uU(4,"room_service"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(5,"div",7),c._uU(6),c.ALo(7,"date"),c.qZA(),c.TgZ(8,"div",8),c._uU(9),c.qZA(),c.TgZ(10,"div",9),c._uU(11),c.qZA(),c.TgZ(12,"div",7),c._uU(13),c.qZA(),c.TgZ(14,"div",10),c._uU(15),c.qZA(),c.TgZ(16,"div",11),c.TgZ(17,"button",12),c.TgZ(18,"div",13),c._uU(19),c.qZA(),c.TgZ(20,"app-icon",14),c._uU(21,"arrow_drop_down"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(22,"div",15),c.TgZ(23,"button",16),c.NdJ("click",function(){c.CHM(t);const e=c.oxw();return e.show_items=!e.show_items}),c.TgZ(24,"app-icon"),c._uU(25),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&t){const t=c.oxw(),e=c.MAs(3);c.ekj("shown",t.show_items),c.xp6(6),c.Oqu(c.xi3(7,12,t.order.deliver_at,"shortTime")),c.xp6(3),c.hij(" ",(null==t.order.event?null:t.order.event.space.display_name)||(null==t.order.event?null:t.order.event.space.name)||"~ No Location ~"," "),c.xp6(2),c.hij(" ",(null==t.order.event||null==t.order.event.organiser?null:t.order.event.organiser.name)||(null==t.order.event?null:t.order.event.host)||"~ Unknown Host ~"," "),c.xp6(2),c.Oqu(t.order.charge_code||"~ No Code ~"),c.xp6(2),c.hij(" ",t.order.invoice_number||"~ No Invoice ~"," "),c.xp6(2),c.Udp("background",null==t.status?null:t.status.colour),c.Q6J("matMenuTriggerFor",e),c.xp6(2),c.hij(" ",null==t.status?null:t.status.name," "),c.xp6(6),c.Oqu(t.show_items?"keyboard_arrow_down":"keyboard_arrow_right")}}function bn(t,e){1&t&&c._UZ(0,"li",20),2&t&&c.Q6J("item",e.$implicit)}function _n(t,e){if(1&t&&(c.TgZ(0,"ul",17),c._UZ(1,"div",18),c.YNc(2,bn,1,1,"li",19),c.qZA()),2&t){const t=c.oxw();c.ekj("shown",t.show_items),c.Q6J("@show",t.show_items?"show":"hide"),c.xp6(1),c.Udp("height",3.125*t.order.items.length-1+"rem"),c.xp6(1),c.Q6J("ngForOf",t.order.items)}}function xn(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"button",21),c.NdJ("click",function(){const e=c.CHM(t).$implicit;return c.oxw().updateStatus(e.id)}),c._UZ(1,"div",22),c.TgZ(2,"span",23),c._uU(3),c.qZA(),c.qZA()}if(2&t){const t=e.$implicit;c.xp6(1),c.Udp("background-color",t.colour),c.xp6(2),c.Oqu(t.name)}}let vn=(()=>{class t{constructor(t){this._orders=t,this.show_items=!1,this.statuses=on,this.updateStatus=t=>this._orders.updateStatus(this.order,t)}get status(){return this.statuses.find(t=>t.id===this.order.status)}}return t.\u0275fac=function(e){return new(e||t)(c.Y36(hn))},t.\u0275cmp=c.Xpm({type:t,selectors:[["catering-order"]],inputs:{order:"order"},decls:5,vars:3,consts:[["class","w-full flex items-center py-2 bg-gray-100",3,"shown",4,"ngIf"],["class","list-none p-0 m-0 w-full relative",3,"shown",4,"ngIf"],["menu","matMenu"],["mat-menu-item","","class","flex items-center",3,"click",4,"ngFor","ngForOf"],[1,"w-full","flex","items-center","py-2","bg-gray-100"],[1,"w-20","flex","items-center","justify-center"],[1,"rounded-full","bg-gray-300","p-2","text-2xl","text-dark-fade","flex","items-center","justify-center"],[1,"w-24"],[1,"flex-1"],[1,"w-56"],[1,"w-28"],[1,"w-36"],["name","status","matRipple","",1,"text-base","border-none","h-10","px-4","flex","items-center","text-white","w-36",3,"matMenuTriggerFor"],[1,"flex","text-center","capitalize","mx-2"],[1,"pl-2"],[1,"w-12"],["mat-icon-button","",3,"click"],[1,"list-none","p-0","m-0","w-full","relative"],["name","bar",1,"absolute","top-0","bg-gray-300"],["catering-order-item","","class","flex items-center",3,"item",4,"ngFor","ngForOf"],["catering-order-item","",1,"flex","items-center",3,"item"],["mat-menu-item","",1,"flex","items-center",3,"click"],[1,"rounded-full","h-4","w-4","mr-2"],[1,"mr-2","w-20"]],template:function(t,e){1&t&&(c.YNc(0,fn,26,15,"div",0),c.YNc(1,_n,3,6,"ul",1),c.TgZ(2,"mat-menu",null,2),c.YNc(4,xn,4,3,"button",3),c.qZA()),2&t&&(c.Q6J("ngIf",e.order),c.xp6(1),c.Q6J("ngIf",null==e.order?null:e.order.items.length),c.xp6(3),c.Q6J("ngForOf",e.statuses))},directives:[i.O5,Tt.VK,i.sg,It.o,Tt.p6,qt.lW,nn,Tt.OP],pipes:[i.uU],styles:["[name=status][_ngcontent-%COMP%]{border-radius:1.55rem}button[mat-menu-item][_ngcontent-%COMP%]{display:flex}.shown[_ngcontent-%COMP%]{background-color:#eee}[name=bar][_ngcontent-%COMP%]{width:2px;top:-.5rem;left:calc(2.5rem - 1px)}"],data:{animation:[_t.X7]}}),t})();function Zn(t,e){if(1&t&&(c.TgZ(0,"li",12),c._UZ(1,"catering-order",13),c.qZA()),2&t){const t=e.$implicit;c.xp6(1),c.Q6J("order",t)}}function yn(t,e){1&t&&(c.TgZ(0,"div",14),c.TgZ(1,"p"),c._uU(2,"No Catering Orders"),c.qZA(),c.qZA())}function wn(t,e){1&t&&c._UZ(0,"mat-progress-bar",15)}let Tn=(()=>{class t{constructor(t){this._orders=t,this.order_list=this._orders.filtered,this.loading=this._orders.loading}ngOnInit(){this._orders.startPolling()}ngOnDestroy(){this._orders.stopPolling()}trackByFn(t,e){return e?e.id:void 0}}return t.\u0275fac=function(e){return new(e||t)(c.Y36(hn))},t.\u0275cmp=c.Xpm({type:t,selectors:[["catering-order-list"]],decls:22,vars:10,consts:[[1,"w-full","text-sm","font-medium","flex","items-center","py-4","border-solid","border-b","border-gray-300","bg-white"],[1,"w-20"],[1,"w-24"],[1,"flex-1"],[1,"w-56"],[1,"w-28"],[1,"w-36"],[1,"w-12"],[1,"list-none","p-0","m-0","w-full","flex-1","overflow-auto"],["class","border-solid border-b border-gray-300",4,"ngFor","ngForOf","ngForTrackBy"],["empty","","class","info-block text-dark-fade",4,"ngIf"],["class","w-full","mode","indeterminate",4,"ngIf"],[1,"border-solid","border-b","border-gray-300"],[3,"order"],["empty","",1,"info-block","text-dark-fade"],["mode","indeterminate",1,"w-full"]],template:function(t,e){if(1&t&&(c.TgZ(0,"div",0),c._UZ(1,"div",1),c.TgZ(2,"div",2),c._uU(3,"Time"),c.qZA(),c.TgZ(4,"div",3),c._uU(5,"Location"),c.qZA(),c.TgZ(6,"div",4),c._uU(7,"Host"),c.qZA(),c.TgZ(8,"div",2),c._uU(9,"Charge Code"),c.qZA(),c.TgZ(10,"div",5),c._uU(11,"Invoice No."),c.qZA(),c.TgZ(12,"div",6),c._uU(13,"Status"),c.qZA(),c._UZ(14,"div",7),c.qZA(),c.TgZ(15,"ul",8),c.YNc(16,Zn,2,1,"li",9),c.ALo(17,"async"),c.YNc(18,yn,3,0,"div",10),c.ALo(19,"async"),c.qZA(),c.YNc(20,wn,1,0,"mat-progress-bar",11),c.ALo(21,"async")),2&t){let t;c.xp6(16),c.Q6J("ngForOf",c.lcZ(17,4,e.order_list))("ngForTrackBy",e.trackByFn),c.xp6(2),c.Q6J("ngIf",!(null!=(t=c.lcZ(19,6,e.order_list))&&t.length)),c.xp6(2),c.Q6J("ngIf",c.lcZ(21,8,e.loading))}},directives:[i.sg,i.O5,vn],pipes:[i.Ov],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%;width:100%}"]}),t})(),An=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.oAB({type:t}),t.\u0275inj=c.cJS({providers:[],imports:[[i.ez,Tt.Tx,ht,yt.Bb,wt.Is,At.Kk]]}),t})();var Cn=n(1521);function qn(t,e){if(1&t&&(c.TgZ(0,"mat-option",6),c._uU(1),c.qZA()),2&t){const t=e.$implicit;c.Q6J("value",t.id),c.xp6(1),c.hij(" ",t.display_name||t.name," ")}}function In(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"button",7),c.NdJ("click",function(){return c.CHM(t),c.oxw().addItem()}),c._uU(1,"Add Item"),c.qZA()}}function On(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"button",7),c.NdJ("click",function(){return c.CHM(t),c.oxw().editConfig()}),c._uU(1,"Edit Config"),c.qZA()}}let kn=(()=>{class t extends _t.KG{constructor(t,e,n,i,o){super(),this._orders=t,this._catering=e,this._org=n,this._route=i,this._router=o,this.zones=[],this.setDate=t=>this._orders.filters=Object.assign(Object.assign({},this._orders.filters),{date:t}),this.levels=this._org.active_levels,this.updateZones=t=>{this._router.navigate([],{relativeTo:this._route,queryParams:{zone_ids:t.join(",")}}),this._orders.filters=Object.assign(Object.assign({},this._orders.filters),{zones:[t]})},this.addItem=()=>this._catering.addItem(),this.editConfig=()=>this._catering.editConfig()}ngOnInit(){return(0,vt.mG)(this,void 0,void 0,function*(){yield this._org.initialised.pipe((0,Zt.P)(t=>t)).toPromise(),this.subscription("route.query",this._route.queryParamMap.subscribe(t=>{if(t.has("zone_ids")){const e=t.get("zone_ids").split(",");if(e.length){const t=this._org.levelWithID(e);if(!t)return;this._org.building=this._org.buildings.find(e=>e.id===t.parent_id),this.zones=e}}})),this.subscription("route.params",this._route.paramMap.subscribe(t=>this.page=t.has("view")?t.get("view"):"")),this.subscription("levels",this._org.active_levels.subscribe(t=>{this.zones=this.zones.filter(e=>t.find(t=>t.id===e)),!this.zones.length&&t.length&&this.zones.push(t[0].id),this.updateZones(this.zones)}))})}}return t.\u0275fac=function(e){return new(e||t)(c.Y36(hn),c.Y36(Re),c.Y36(De.w7),c.Y36(a.gz),c.Y36(a.F0))},t.\u0275cmp=c.Xpm({type:t,selectors:[["catering-topbar"]],features:[c.qOj],decls:8,vars:6,consts:[["appearance","outline"],["multiple","","placeholder","All Levels",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["mat-button","",3,"click",4,"ngIf"],[1,"flex-1","w-2"],[3,"dateChange"],[3,"value"],["mat-button","",3,"click"]],template:function(t,e){1&t&&(c.TgZ(0,"mat-form-field",0),c.TgZ(1,"mat-select",1),c.NdJ("ngModelChange",function(t){return e.zones=t})("ngModelChange",function(t){return e.updateZones(t)}),c.YNc(2,qn,2,2,"mat-option",2),c.ALo(3,"async"),c.qZA(),c.qZA(),c.YNc(4,In,2,0,"button",3),c.YNc(5,On,2,0,"button",3),c._UZ(6,"div",4),c.TgZ(7,"date-options",5),c.NdJ("dateChange",function(t){return e.setDate(t)}),c.qZA()),2&t&&(c.xp6(1),c.Q6J("ngModel",e.zones),c.xp6(1),c.Q6J("ngForOf",c.lcZ(3,4,e.levels)),c.xp6(2),c.Q6J("ngIf","menu"===e.page),c.xp6(1),c.Q6J("ngIf","menu"===e.page))},directives:[Ot.KE,Mt.gD,o.JJ,o.On,i.sg,i.O5,Cn.E,d.ey,qt.lW],pipes:[i.Ov],styles:["[_nghost-%COMP%]{display:flex;align-items:center;background-color:#fff;height:5em;padding:0 1em;border-bottom:1px solid #ccc}[_nghost-%COMP%] > *[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-left:.5rem}mat-form-field[_ngcontent-%COMP%]{height:3.25em;width:8em}"]}),t})();const Mn=["app-catering",""];function Un(t,e){1&t&&c._UZ(0,"catering-order-list",5)}function Pn(t,e){1&t&&c._UZ(0,"catering-menu",5)}const Nn=function(){return["/catering","menu"]},Jn=function(){return["/catering","orders"]};function Yn(t,e){1&t&&(c.TgZ(0,"div",6),c.TgZ(1,"a",7),c.TgZ(2,"div",8),c._UZ(3,"div",9),c.TgZ(4,"span",10),c._uU(5,"Menus and Pricing"),c.qZA(),c.qZA(),c.TgZ(6,"div",11),c._uU(7," View and Edit Menus and Pricing "),c.qZA(),c.qZA(),c.TgZ(8,"a",7),c.TgZ(9,"div",8),c._UZ(10,"div",9),c.TgZ(11,"span",10),c._uU(12,"Today's Orders"),c.qZA(),c.qZA(),c.TgZ(13,"div",11),c._uU(14," View Catering Orders and their statuses upon arrival "),c.qZA(),c.qZA(),c.qZA()),2&t&&(c.xp6(1),c.Q6J("routerLink",c.DdM(6,Nn)),c.xp6(1),c.Udp("background-image","url(assets/menus.jpg)"),c.xp6(6),c.Q6J("routerLink",c.DdM(7,Jn)),c.xp6(1),c.Udp("background-image","url(assets/orders.jpg)"))}let Fn=(()=>{class t extends _t.KG{constructor(t){super(),this._route=t}ngOnInit(){this.subscription("route.params",this._route.paramMap.subscribe(t=>this.page=t.has("view")?t.get("view"):""))}}return t.\u0275fac=function(e){return new(e||t)(c.Y36(a.gz))},t.\u0275cmp=c.Xpm({type:t,selectors:[["","app-catering",""]],features:[c.qOj],attrs:Mn,decls:7,vars:3,consts:[[1,"relative","w-full","flex","flex-col"],[1,"relative","z-10"],[3,"ngSwitch"],["class","flex-1",4,"ngSwitchCase"],["class","flex flex-1 items-center justify-center",4,"ngSwitchDefault"],[1,"flex-1"],[1,"flex","flex-1","items-center","justify-center"],["matRipple","",1,"rounded","flex","flex-col","items-center","bg-white","shadow","text-black",3,"routerLink"],["name","img",1,"relative","w-full","flex","flex-1","items-center","justify-center","text-2xl","text-white","bg-center","bg-cover"],[1,"absolute","inset-0","bg-black","opacity-60","z-0"],[1,"z-10"],[1,"p-2","h-14","w-full","text-sm","text-center","flex","items-center","justify-center"]],template:function(t,e){1&t&&(c._UZ(0,"sidebar"),c.TgZ(1,"main",0),c._UZ(2,"catering-topbar",1),c.ynx(3,2),c.YNc(4,Un,1,0,"catering-order-list",3),c.YNc(5,Pn,1,0,"catering-menu",3),c.YNc(6,Yn,15,8,"div",4),c.BQk(),c.qZA()),2&t&&(c.xp6(3),c.Q6J("ngSwitch",e.page),c.xp6(1),c.Q6J("ngSwitchCase","orders"),c.xp6(1),c.Q6J("ngSwitchCase","menu"))},directives:[xt.k,kn,i.RF,i.n9,i.ED,Tn,tn,a.yS,d.wG],styles:["[_nghost-%COMP%]{display:flex;height:100%;width:100%;background:var(--bg)}a[_ngcontent-%COMP%]{width:28rem;height:16rem;margin-left:.5rem;text-decoration:none;transition:background .2s}a[_ngcontent-%COMP%]:hover{background-color:rgba(0,0,0,.00392156862745098)!important}a[_ngcontent-%COMP%]:first-child{margin:0}"]}),t})();const Qn=[{path:"",component:Fn},{path:":view",component:Fn}];let jn=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.oAB({type:t}),t.\u0275inj=c.cJS({imports:[[i.ez,o.u5,bt.v,ht,ft.Hi,An,a.Bz.forChild(Qn)]]}),t})()}}]);
//# sourceMappingURL=apps_concierge_src_app_catering_catering_module_ts.js.map