"use strict";(self.webpackChunkconcierge=self.webpackChunkconcierge||[]).push([[722],{1722:(_n,U_,a)=>{a.d(U_,{$N:()=>G_.$,jT:()=>I.jT,FD:()=>I.FD,ad:()=>I.ad,F2:()=>I.F2,FP:()=>I.FP,km:()=>I.km,Fo:()=>I.Fo,Wp:()=>I.Wp});var c=a(6895),r=a(4006),k_=a(4859),n_=a(6709),x_=a(9602),T=a(5938),M=a(9549),d_=a(4144),v=a(1572),P_=a(1948),Z_=a(4693),K_=a(5170),_=a(4650),G_=a(6962),C=a(5861),u=a(9112),o_=a(6725),W=a(6221),I_=a(9756),N_=a(9833),X=a(9925),I=a(354),E=a(5306),Q=a(9136),S_=a(2581),p_=a(8255),g=a(3238);function $_(n,t){1&n&&_._UZ(0,"div",22)}function B_(n,t){if(1&n&&(_.TgZ(0,"div",23),_._UZ(1,"image-carousel",24),_.qZA()),2&n){const e=_.oxw();_.xp6(1),_.Q6J("images",null==e.booking||null==e.booking.extension_data?null:e.booking.extension_data.images)}}function y_(n,t){if(1&n&&(_.TgZ(0,"div",31)(1,"app-icon"),_._uU(2),_.qZA(),_.TgZ(3,"div",32),_._uU(4),_.qZA()()),2&n){const e=_.oxw(3);_.xp6(2),_.Oqu(e.booking.checked_in?"done":"arrow_back"),_.xp6(2),_.hij(" ",e.booking.checked_in?"Checked in":"Check in"," ")}}function w_(n,t){1&n&&_._UZ(0,"mat-spinner",33),2&n&&_.Q6J("diameter",32)}function Y_(n,t){if(1&n){const e=_.EpF();_.TgZ(0,"button",28),_.NdJ("click",function(){_.CHM(e);const i=_.oxw(2);return _.KtG(i.toggleCheckedIn())}),_.YNc(1,y_,5,2,"div",29),_.YNc(2,w_,1,1,"ng-template",null,30,_.W1O),_.qZA()}if(2&n){const e=_.MAs(3),o=_.oxw(2);_.ekj("bg-green-600",o.booking.checked_in),_.Q6J("disabled",o.checking_in),_.xp6(1),_.Q6J("ngIf",!o.checking_in)("ngIfElse",e)}}function q_(n,t){if(1&n&&(_.TgZ(0,"div",25),_.YNc(1,Y_,4,5,"button",26),_.TgZ(2,"button",27)(3,"app-icon"),_._uU(4,"more_horiz"),_.qZA()()()),2&n){const e=_.oxw(),o=_.MAs(46);_.xp6(1),_.Q6J("ngIf",!e.auto_checkin),_.xp6(1),_.Q6J("matMenuTriggerFor",o)}}const J_=function(){return{disable_pan:!0,disable_zoom:!0}};function W_(n,t){if(1&n&&_._UZ(0,"interactive-map",34),2&n){const e=_.oxw();_.Q6J("src",null==e.level?null:e.level.map_id)("features",e.features)("options",_.DdM(3,J_))}}function X_(n,t){if(1&n){const e=_.EpF();_.TgZ(0,"button",35),_.NdJ("click",function(){_.CHM(e);const i=_.oxw();return _.KtG(i.remove.emit())}),_.TgZ(1,"app-icon"),_._uU(2,"delete"),_.qZA(),_.TgZ(3,"div"),_.SDv(4,36),_.qZA()()}}function Q_(n,t){if(1&n){const e=_.EpF();_.TgZ(0,"button",35),_.NdJ("click",function(){_.CHM(e);const i=_.oxw();return _.KtG(i.end.emit())}),_.TgZ(1,"app-icon"),_._uU(2,"delete"),_.qZA(),_.TgZ(3,"div"),_.SDv(4,37),_.qZA()()}}class D{get level(){return this._org.levelWithID(this.booking?.zones||[])}get building(){return this._org.buildings.find(t=>(this.booking?.zones||[]).includes(t.id))}get auto_checkin(){return this._settings.get(`app.${this.booking?.type||"bookings"}.auto_checkin`)}get is_in_progress(){const t=Date.now(),e=1e3*this.booking?.booking_start;return this.booking?.all_day?e<=t:e<=t&&t<=1e3*this.booking?.booking_end}constructor(t,e,o,i){this._booking=t,this._settings=e,this._org=o,this._dialog=i,this.edit=new _.vpe,this.remove=new _.vpe,this.end=new _.vpe,this.booking=this._booking,this.hide_map=!1,this.checking_in=!1,this.features=[{location:this.booking?.asset_id,content:o_.qL}]}get period(){if(this.booking?.all_day)return"All Day";const t=this.booking?.date||Date.now(),e=this.booking?.duration||60,o=(0,I_.Z)(t,e),i=(0,N_.Z)({hours:Math.floor(e/60),minutes:e%60}).replace(" hour","hr").replace(" minute","min");return`${(0,X.Z)(t,"h:mm a")} - ${(0,X.Z)(o,"h:mm a")} (${i})`}toggleCheckedIn(){var t=this;return(0,C.Z)(function*(){t.checking_in=!0,yield(0,I.FD)(t.booking.id,!t.booking.checked_in).toPromise(),t.booking.checked_in=!t.booking.checked_in,(0,u.t5)("Successfully "+(t.booking.checked_in?"checked in":"ended booking")),t.checking_in=!1})()}viewLocation(){this.hide_map=!0,this._dialog.open(o_.p6,{maxWidth:"95vw",maxHeight:"95vh",data:{item:{id:this._booking.asset_id,name:this._booking.asset_name,map_id:this._booking.extension_data.map_id,level:this.level}}}).afterClosed().subscribe(()=>this.hide_map=!1)}}D.\u0275fac=function(t){return new(t||D)(_.Y36(T.WI),_.Y36(u.gb),_.Y36(W.w7),_.Y36(T.uw))},D.\u0275cmp=_.Xpm({type:D,selectors:[["booking-details-modal"]],outputs:{edit:"edit",remove:"remove",end:"end"},decls:49,vars:36,consts:function(){let n,t,e;return n=$localize`:␟2c8ce65c566300dc9063f69c615fda2e3a6b896a␟2102851380219026584: Details `,t=$localize`:␟55883ef2b67c24d30f999a5ade421493fdc9e14a␟1139994899162365077:Delete booking`,e=$localize`:␟2f3dfd27ad1999e91bb66ad271f967d6e543956f␟834898868131691573:End booking`,[[1,"w-[100vw]","h-[100vh]","sm:relative","sm:inset-auto","sm:w-[51rem]","sm:h-auto","sm:max-h-[80vh]","bg-white","sm:bg-gray-100","sm:dark:bg-neutral-600","dark:bg-neutral-700","sm:rounded","overflow-auto","space-y-2","pb-2"],[1,"sm:flex","flex-col","items-center","pb-4","max-h-screen","sm:max-h-[80vh]","sm:px-16","sm:border-b","bg-white","dark:bg-neutral-700","border-gray-300","dark:border-neutral-500"],["class","h-8 w-full sm:hidden block",4,"ngIf"],["class","bg-black/20 dark:bg-white/20 w-full h-64 sm:rounded-b overflow-hidden",4,"ngIf"],["title","",1,"px-3","mt-2","text-xl","font-medium","w-full"],[1,"sm:flex","items-center","justify-between","w-full"],[1,"flex","m-2"],[1,"flex","items-center","bg-opacity-30","rounded-2xl","p-1","text-sm","space-x-2","pr-2","font-medium"],[1,"rounded-full","h-5","w-5","flex","items-center","justify-center","text-white"],[1,"pr-1"],["actions","","class","flex items-center space-x-2 px-2",4,"ngIf"],[1,"sm:flex","flex-wrap","sm:px-12"],[1,"sm:p-4","sm:bg-white","sm:dark:bg-neutral-700","rounded","sm:m-2","sm:border","border-gray-200","dark:border-neutral-500","flex-grow-[4]","min-w-1/3","sm:w-[16rem]"],[1,"px-3","mt-2","text-lg","font-medium","mb-2"],n,[1,"flex","items-center","px-2","space-x-2"],["map","",1,"mt-4","sm:my-2","h-64","sm:h-48","relative","border","border-gray-200","dark:border-neutral-500","overflow-hidden","rounded","sm:bg-white","m-2","flex-grow-[3]","min-w-1/3","w-[calc(100%-1rem)]","p-2","sm:w-[16rem]",3,"click"],["class","pointer-events-none",3,"src","features","options",4,"ngIf"],["icon","","matRipple","","mat-dialog-close","",1,"absolute","top-0","left-2","bg-black/30","text-white"],["xPosition","before"],["menu","matMenu"],["mat-menu-item","","class","flex items-center space-x-2 text-base",3,"click",4,"ngIf"],[1,"h-8","w-full","sm:hidden","block"],[1,"bg-black/20","dark:bg-white/20","w-full","h-64","sm:rounded-b","overflow-hidden"],[1,"w-full","h-64",3,"images"],["actions","",1,"flex","items-center","space-x-2","px-2"],["btn","","matRipple","","class","flex-1 h-10 border-none",3,"bg-green-600","disabled","click",4,"ngIf"],["icon","","matRipple","",1,"bg-primary","rounded","text-white","h-10","w-10",3,"matMenuTriggerFor"],["btn","","matRipple","",1,"flex-1","h-10","border-none",3,"disabled","click"],["class","flex items-center space-x-2 justify-center",4,"ngIf","ngIfElse"],["loading_state",""],[1,"flex","items-center","space-x-2","justify-center"],[1,"mr-4"],[1,"mx-auto",3,"diameter"],[1,"pointer-events-none",3,"src","features","options"],["mat-menu-item","",1,"flex","items-center","space-x-2","text-base",3,"click"],t,e]},template:function(t,e){1&t&&(_.TgZ(0,"div",0)(1,"div",1),_.YNc(2,$_,1,0,"div",2),_.YNc(3,B_,2,1,"div",3),_.TgZ(4,"h3",4),_._uU(5),_.qZA(),_.TgZ(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"app-icon"),_._uU(11),_.qZA()(),_.TgZ(12,"div",9),_._uU(13),_.qZA()()(),_.YNc(14,q_,5,2,"div",10),_.qZA()(),_.TgZ(15,"div",11)(16,"div",12)(17,"h3",13),_.SDv(18,14),_.qZA(),_.TgZ(19,"div",15)(20,"app-icon"),_._uU(21,"event"),_.qZA(),_.TgZ(22,"div"),_._uU(23),_.ALo(24,"date"),_.qZA()(),_.TgZ(25,"div",15)(26,"app-icon"),_._uU(27,"schedule"),_.qZA(),_.TgZ(28,"div"),_._uU(29),_.qZA()(),_.TgZ(30,"div",15)(31,"app-icon"),_._uU(32,"map"),_.qZA(),_.TgZ(33,"div"),_._uU(34),_.qZA()(),_.TgZ(35,"div",15)(36,"app-icon"),_._uU(37,"place"),_.qZA(),_.TgZ(38,"div"),_._uU(39),_.qZA()()(),_.TgZ(40,"button",16),_.NdJ("click",function(){return e.viewLocation()}),_.YNc(41,W_,1,4,"interactive-map",17),_.qZA()(),_.TgZ(42,"button",18)(43,"app-icon"),_._uU(44,"close"),_.qZA()()(),_.TgZ(45,"mat-menu",19,20),_.YNc(47,X_,5,0,"button",21),_.YNc(48,Q_,5,0,"button",21),_.qZA()),2&t&&(_.xp6(2),_.Q6J("ngIf",!(null!=e.booking&&null!=e.booking.extension_data&&null!=e.booking.extension_data.images&&e.booking.extension_data.images.length)),_.xp6(1),_.Q6J("ngIf",null==e.booking||null==e.booking.extension_data||null==e.booking.extension_data.images?null:e.booking.extension_data.images.length),_.xp6(1),_.ekj("pt-4",!(null!=e.booking&&null!=e.booking.extension_data&&e.booking.extension_data.images)),_.xp6(1),_.hij(" ",e.booking.title," "),_.xp6(3),_.ekj("bg-green-600",!e.booking.is_done&&"approved"===(null==e.booking?null:e.booking.status))("bg-yellow-500",!e.booking.is_done&&"tentative"===(null==e.booking?null:e.booking.status))("bg-red-600",!e.booking.is_done&&"declined"===(null==e.booking?null:e.booking.status))("bg-gray-300",e.booking.is_done),_.xp6(1),_.ekj("bg-success",!e.booking.is_done&&"approved"===(null==e.booking?null:e.booking.status))("text-pending",!e.booking.is_done&&"tentative"===(null==e.booking?null:e.booking.status))("bg-error",!e.booking.is_done&&"declined"===(null==e.booking?null:e.booking.status))("text-neutral-600",e.booking.is_done),_.xp6(2),_.hij(" ",e.booking.is_done?"not_interested":"approved"===(null==e.booking?null:e.booking.status)?"done":"tentative"===(null==e.booking?null:e.booking.status)?"warning":"close"," "),_.xp6(2),_.Oqu(e.period),_.xp6(1),_.Q6J("ngIf",!e.booking.is_done),_.xp6(9),_.Oqu(_.xi3(24,33,e.booking.date,"EEEE, dd LLLL y")),_.xp6(6),_.Oqu(e.period),_.xp6(5),_.AsE(" ",(null==e.level?null:e.level.display_name)||(null==e.level?null:e.level.name),", ",e.booking.asset_name||e.booking.asset_id," "),_.xp6(5),_.AsE(" ",(null==e.building?null:e.building.display_name)||(null==e.building?null:e.building.name)," ",null!=e.building&&e.building.address?", "+e.building.address:""," "),_.xp6(2),_.Q6J("ngIf",!e.hide_map),_.xp6(6),_.Q6J("ngIf",!e.is_in_progress),_.xp6(1),_.Q6J("ngIf",e.is_in_progress))},dependencies:[c.O5,T.ZT,v.Ou,E.o,Q.p,S_.K,p_.VK,p_.OP,p_.p6,g.wG,c.uU]});var z_=a(4871),g_=a(565),V_=a(2641),j_=a(3007);function H_(n,t){if(1&n&&(_.TgZ(0,"span",6),_._uU(1),_.qZA()),2&n){const e=_.oxw(2);_.xp6(1),_.hij("",e.day,", ")}}function _e(n,t){if(1&n&&(_.TgZ(0,"h4",3),_.YNc(1,H_,2,1,"span",4),_._uU(2),_.ALo(3,"date"),_.TgZ(4,"span",5),_._uU(5),_.ALo(6,"date"),_.qZA()()),2&n){const e=_.oxw();_.xp6(1),_.Q6J("ngIf",e.show_day),_.xp6(1),_.hij(" ",_.xi3(3,3,null==e.booking?null:e.booking.date,"h:mm a")," "),_.xp6(3),_.hij("(",_.xi3(6,6,null==e.booking?null:e.booking.date,"z"),")")}}function ee(n,t){if(1&n&&(_.TgZ(0,"app-icon"),_._uU(1),_.qZA()),2&n){const e=_.oxw(2);_.xp6(1),_.Oqu(e.type)}}function te(n,t){if(1&n&&(_.TgZ(0,"div",15)(1,"app-icon"),_._uU(2,"place"),_.qZA(),_.TgZ(3,"div",17),_._uU(4),_.qZA()()),2&n){const e=_.oxw(2);_.xp6(4),_.Oqu(e.location)}}const ne=function(){return["./"]},oe=function(n){return{booking:n}};function ie(n,t){if(1&n){const e=_.EpF();_.TgZ(0,"a",7),_.NdJ("click",function(){_.CHM(e);const i=_.oxw();return _.KtG(i.viewDetails())}),_.TgZ(1,"div",8)(2,"h4",9),_._uU(3),_.qZA(),_.TgZ(4,"div",10)(5,"div",11)(6,"div",12)(7,"app-icon"),_._uU(8),_.qZA()(),_.TgZ(9,"div",13),_._uU(10),_.qZA()()(),_.TgZ(11,"div",14)(12,"div",15),_.YNc(13,ee,2,1,"app-icon",16),_.TgZ(14,"div",17),_._uU(15),_.qZA()(),_.YNc(16,te,5,1,"div",18),_.qZA(),_.TgZ(17,"app-icon",19),_._uU(18," chevron_right "),_.qZA()()()}if(2&n){const e=_.oxw(),o=_.MAs(3);_.Q6J("routerLink",_.DdM(25,ne))("queryParams",_.VKq(26,oe,null==e.booking?null:e.booking.id)),_.xp6(3),_.Oqu(null==e.booking?null:e.booking.title),_.xp6(2),_.ekj("bg-green-600",!e.booking.is_done&&"approved"===(null==e.booking?null:e.booking.status))("bg-yellow-500",!e.booking.is_done&&"tentative"===(null==e.booking?null:e.booking.status))("bg-red-600",!e.booking.is_done&&"declined"===(null==e.booking?null:e.booking.status))("bg-gray-300",e.booking.is_done),_.xp6(1),_.ekj("bg-success",!e.booking.is_done&&"approved"===(null==e.booking?null:e.booking.status))("text-pending",!e.booking.is_done&&"tentative"===(null==e.booking?null:e.booking.status))("bg-error",!e.booking.is_done&&"declined"===(null==e.booking?null:e.booking.status))("text-neutral-600",e.booking.is_done),_.xp6(2),_.hij(" ",e.booking.is_done?"not_interested":"approved"===(null==e.booking?null:e.booking.status)?"done":"tentative"===(null==e.booking?null:e.booking.status)?"warning":"close"," "),_.xp6(2),_.Oqu(e.period),_.xp6(3),_.Q6J("ngIf","desk"!==e.type)("ngIfElse",o),_.xp6(2),_.hij(" ",(null==e.booking?null:e.booking.description)||(null==e.booking?null:e.booking.asset_id)," "),_.xp6(1),_.Q6J("ngIf",e.location)}}function se(n,t){1&n&&_._UZ(0,"img",20)}class z extends z_.c{constructor(t,e,o){super(),this._dialog=t,this._route=e,this._org=o,this.show_day=!1,this.edit=new _.vpe,this.remove=new _.vpe,this.end=new _.vpe}ngOnInit(){this.subscription("route.query",this._route.queryParamMap.subscribe(t=>t.has("booking")&&this.booking?.id===t.get("event")?this.viewDetails():""))}get type(){return"desk"===this.booking?.type?"desk":"parking"===this.booking?.type?"drive_eta":"book"}get day(){const t=this.booking?.date||Date.now();return`${(0,V_.Z)(Date.now(),t)?"Today":(0,X.Z)(t,"EEEE")}`}get location(){const t=this._org.levelWithID(this.booking?.zones||[]);return`${t?.display_name||t?.name||""}`}get period(){if(this.booking?.all_day)return"All Day";const t=this.booking?.date||Date.now(),e=this.booking?.duration||60,o=(0,I_.Z)(t,e),i=(0,N_.Z)({hours:Math.floor(e/60),minutes:e%60}).replace(" hour","hr").replace(" minute","min");return`${(0,X.Z)(t,"h:mm a")} - ${(0,X.Z)(o,"h:mm a")} (${i})`}viewDetails(){this.booking&&this.timeout("open",()=>{const t=this._dialog.open(D,{data:this.booking});this.subscription("edit",t.componentInstance.edit.subscribe(()=>this.edit.emit())),this.subscription("remove",t.componentInstance.remove.subscribe(()=>this.remove.emit())),this.subscription("end",t.componentInstance.end.subscribe(()=>this.end.emit()))})}}z.\u0275fac=function(t){return new(t||z)(_.Y36(T.uw),_.Y36(j_.gz),_.Y36(g_.w))},z.\u0275cmp=_.Xpm({type:z,selectors:[["booking-card"]],inputs:{booking:"booking",show_day:"show_day"},outputs:{edit:"edit",remove:"remove",end:"end"},features:[_.qOj],decls:4,vars:2,consts:[["class","mb-2 flex items-center",4,"ngIf"],["name","view-booking-details","class","w-full cursor-pointer overflow-hidden relative",3,"routerLink","queryParams","click",4,"ngIf"],["desk_icon",""],[1,"mb-2","flex","items-center"],["day","",4,"ngIf"],[1,"text-xs","px-2"],["day",""],["name","view-booking-details",1,"w-full","cursor-pointer","overflow-hidden","relative",3,"routerLink","queryParams","click"],[1,"w-full","bg-white","dark:bg-[#1F2021]","rounded-xl","shadow","py-4","relative"],[1,"px-4","text-lg"],[1,"flex","mx-4","my-2"],[1,"flex","items-center","bg-opacity-30","rounded-2xl","p-1","text-base","space-x-2","pr-2","font-medium"],[1,"rounded-full","h-5","w-5","flex","items-center","justify-center","text-white"],[1,"pr-1"],[1,"flex","flex-wrap","flex-col","sm:flex-row","sm:divide-x","divide-neutral-500","py-2","space-y-2","sm:space-y-0"],[1,"flex","items-center","px-4"],[4,"ngIf","ngIfElse"],[1,"mx-2","truncate"],["class","flex items-center px-4",4,"ngIf"],[1,"absolute","top-1/2","right-1","text-4xl","-translate-y-1/2"],["src","assets/icons/desk-outline.svg",1,"w-5","h-5"]],template:function(t,e){1&t&&(_.YNc(0,_e,7,9,"h4",0),_.YNc(1,ie,19,28,"a",1),_.YNc(2,se,1,0,"ng-template",null,2,_.W1O)),2&t&&(_.Q6J("ngIf",e.booking),_.xp6(1),_.Q6J("ngIf",e.booking))},dependencies:[c.O5,E.o,c.uU],styles:["[_nghost-%COMP%]{display:block;width:100%;overflow:hidden;position:relative}"]});var i_=a(2329),le=a(9697);function ae(n,t){1&n&&(_.TgZ(0,"button",5)(1,"i",6),_._uU(2,"close"),_.qZA()())}function ce(n,t){if(1&n){const e=_.EpF();_.TgZ(0,"div",18)(1,"label"),_.SDv(2,19),_.qZA(),_.TgZ(3,"a-user-search-field",20),_.NdJ("ngModelChange",function(i){_.CHM(e);const s=_.oxw(2);return _.KtG(s.host=i)}),_.qZA()()}if(2&n){const e=_.oxw(2);_.xp6(3),_.Q6J("ngModel",e.host)}}function re(n,t){if(1&n&&(_.TgZ(0,"div"),_._uU(1),_.ALo(2,"date"),_.qZA()),2&n){const e=_.oxw(2);_.xp6(1),_.hij(" ",_.xi3(2,1,e.date,"mediumDate")," ")}}function de(n,t){if(1&n){const e=_.EpF();_.TgZ(0,"a-date-field",20),_.NdJ("ngModelChange",function(i){_.CHM(e);const s=_.oxw(2);return _.KtG(s.date=i)}),_.qZA()}if(2&n){const e=_.oxw(2);_.Q6J("ngModel",e.date)}}function Se(n,t){if(1&n){const e=_.EpF();_.TgZ(0,"div",21)(1,"label"),_.SDv(2,22),_.qZA(),_.TgZ(3,"mat-form-field",23)(4,"input",24),_.NdJ("ngModelChange",function(i){_.CHM(e);const s=_.oxw(2);return _.KtG(s.reason=i)}),_.qZA()()()}if(2&n){const e=_.oxw(2);_.xp6(4),_.Q6J("ngModel",e.reason)}}function pe(n,t){if(1&n){const e=_.EpF();_.ynx(0),_.TgZ(1,"main",7),_.YNc(2,ce,4,1,"div",8),_.TgZ(3,"div",9)(4,"label"),_.SDv(5,10),_.qZA(),_.YNc(6,re,3,4,"div",11),_.YNc(7,de,1,1,"a-date-field",12),_.qZA(),_.YNc(8,Se,5,1,"div",13),_.TgZ(9,"p"),_.SDv(10,14),_.qZA()(),_.TgZ(11,"footer",15)(12,"button",16),_.NdJ("click",function(){_.CHM(e);const i=_.oxw();return _.KtG(i.confirm())}),_.SDv(13,17),_.qZA()(),_.BQk()}if(2&n){const e=_.oxw();_.xp6(2),_.Q6J("ngIf",e.can_set_host),_.xp6(4),_.Q6J("ngIf",!e.can_set_date),_.xp6(1),_.Q6J("ngIf",e.can_set_date),_.xp6(1),_.Q6J("ngIf",!e.hide_reason),_.xp6(2),_.pQV(1===e.desks.length?"":"s")(e.desk_list)((null==e.level?null:e.level.display_name)||(null==e.level?null:e.level.name)),_.QtT(10)}}function ge(n,t){if(1&n&&(_.TgZ(0,"main",25),_._UZ(1,"mat-spinner",26),_.TgZ(2,"p"),_._uU(3),_.qZA()()),2&n){const e=_.oxw();_.xp6(1),_.Q6J("diameter",48),_.xp6(2),_.Oqu(e.loading)}}class b{get desk_list(){return this.desks.map(t=>t.name).join(", ")}get hide_reason(){return!!this._settings.get("app.desks.hide_reason")}get can_set_host(){return!!this._settings.get("app.desks.can_book_for_others")}constructor(t,e){this._data=t,this._settings=e,this.event=new _.vpe,this.desks=this._data.desks||[],this.date=this._data.date,this.host=this._data.host,this.can_set_date=this._data.can_set_date,this.reason=this._data.reason,this.level=this._data.level}confirm(){this.loading="Requesting desk booking...",this.event.emit({reason:"done"})}}b.\u0275fac=function(t){return new(t||b)(_.Y36(T.WI),_.Y36(u.gb))},b.\u0275cmp=_.Xpm({type:b,selectors:[["desk-flow-confirm-modal-component"]],outputs:{event:"event"},decls:8,vars:3,consts:function(){let n,t,e,o,i,s;return n=$localize`:␟d513554c23b779e029147a285f1f84f1479488fc␟1554073776118278895:Confirm Booking`,t=$localize`:␟2f933b826a570836cab04f683970a2d22068458c␟3973931101896534797:Date`,e=$localize`:␟5012a6a10d31e79f5865c2fc7f680b84a14accca␟4161419473863623687: Your desk${"\ufffd0\ufffd"}:INTERPOLATION: will be ${"\ufffd1\ufffd"}:INTERPOLATION_1: on ${"\ufffd2\ufffd"}:INTERPOLATION_2: `,o=$localize`:␟68e710782ccb5398b3acb8844caf0b199da2c3da␟9178182467454450952:Confirm`,i=$localize`:␟fe22ca53e651df951dac25b67c17894b0980f767␟6641024648411549335:Host`,s=$localize`:␟4ba250869daa372b54d24fafc0ea934769ee4076␟4775550080689015987:Reason`,[n,[1,"flex-1"],["icon","","mat-dialog-close","",4,"ngIf"],[4,"ngIf","ngIfElse"],["load_state",""],["icon","","mat-dialog-close",""],[1,"material-icons"],[1,"p-4"],["host","","class","flex flex-col",4,"ngIf"],["date","",1,"mb-4"],t,[4,"ngIf"],[3,"ngModel","ngModelChange",4,"ngIf"],["reason","","class","flex flex-col mb-4",4,"ngIf"],e,[1,"flex","items-center","justify-center","p-2"],["btn","","matRipple","",3,"click"],o,["host","",1,"flex","flex-col"],i,[3,"ngModel","ngModelChange"],["reason","",1,"flex","flex-col","mb-4"],s,["appearance","outline"],["matInput","","placeholder","Reason",3,"ngModel","ngModelChange"],["load","",1,"flex","flex-col","p-12","items-center","justify-center"],[1,"mb-4",3,"diameter"]]},template:function(t,e){if(1&t&&(_.TgZ(0,"header")(1,"h2"),_.SDv(2,0),_.qZA(),_._UZ(3,"div",1),_.YNc(4,ae,3,0,"button",2),_.qZA(),_.YNc(5,pe,14,7,"ng-container",3),_.YNc(6,ge,4,2,"ng-template",null,4,_.W1O)),2&t){const o=_.MAs(7);_.xp6(4),_.Q6J("ngIf",!e.loading),_.xp6(1),_.Q6J("ngIf",!e.loading)("ngIfElse",o)}},dependencies:[c.O5,r.Fj,r.JJ,r.On,d_.Nt,M.KE,T.ZT,v.Ou,i_.Q,le.d,g.wG,c.uU],styles:["main[_ngcontent-%COMP%]{width:24rem;max-width:calc(100vw - 4.5rem)}"]});var R_=a(4282),ue=a(4702);function Ee(n,t){if(1&n&&_._UZ(0,"image-carousel",21),2&n){const e=_.oxw(2);_.Q6J("images",e.desk.images)}}function fe(n,t){if(1&n&&(_.TgZ(0,"div",25)(1,"div",26),_._uU(2),_.qZA()()),2&n){const e=t.$implicit;_.xp6(2),_.Oqu(e)}}const Te=function(){return[]};function Oe(n,t){if(1&n&&(_.TgZ(0,"section",22)(1,"h2",10),_.SDv(2,23),_.qZA(),_.YNc(3,fe,3,1,"div",24),_.qZA()),2&n){const e=_.oxw(2);_.xp6(3),_.Q6J("ngForOf",e.desk.features||_.DdM(1,Te))}}const me=function(){return{disable_pan:!0,disable_zoom:!0}};function Ie(n,t){if(1&n){const e=_.EpF();_.ynx(0),_.TgZ(1,"section",2),_.YNc(2,Ee,1,1,"image-carousel",3),_.TgZ(3,"button",4),_.NdJ("click",function(){_.CHM(e);const i=_.oxw();return _.KtG(i.close.emit())}),_.TgZ(4,"app-icon"),_._uU(5,"arrow_back"),_.qZA()(),_.TgZ(6,"button",5),_.NdJ("click",function(){_.CHM(e);const i=_.oxw();return _.KtG(i.toggleFav.emit())}),_.TgZ(7,"app-icon"),_._uU(8),_.qZA()()(),_.TgZ(9,"div",6)(10,"section",7)(11,"h2",8),_._uU(12),_.qZA()(),_.TgZ(13,"section",9)(14,"h2",10),_._uU(15,"Details"),_.qZA(),_.TgZ(16,"div",11)(17,"app-icon"),_._uU(18,"person"),_.qZA(),_.TgZ(19,"p"),_.SDv(20,12),_.qZA()(),_.TgZ(21,"div",11)(22,"app-icon"),_._uU(23,"desk"),_.qZA(),_.TgZ(24,"p"),_._uU(25),_.qZA()(),_.TgZ(26,"div",11)(27,"app-icon"),_._uU(28,"place"),_.qZA(),_.TgZ(29,"p"),_._uU(30),_.qZA()()(),_.YNc(31,Oe,4,2,"section",13),_.TgZ(32,"section",14),_._UZ(33,"interactive-map",15),_.qZA()(),_.TgZ(34,"div",16)(35,"button",17),_.NdJ("click",function(){_.CHM(e);const i=_.oxw();return i.active=!i.active,_.KtG(i.activeChange.emit(i.active))}),_.TgZ(36,"div",18)(37,"app-icon",19),_._uU(38),_.qZA(),_.TgZ(39,"p"),_.SDv(40,20),_.qZA()()()(),_.BQk()}if(2&n){const e=_.oxw();_.xp6(1),_.ekj("sm:h-64",null==e.desk.images?null:e.desk.images.length)("h-40",null==e.desk.images?null:e.desk.images.length)("sm:h-0",!(null!=e.desk.images&&e.desk.images.length))("h-12",!(null!=e.desk.images&&e.desk.images.length))("!bg-transparent",!(null!=e.desk.images&&e.desk.images.length)),_.xp6(1),_.Q6J("ngIf",null==e.desk.images?null:e.desk.images.length),_.xp6(4),_.ekj("text-white",!e.fav)("text-blue-400",e.fav),_.xp6(2),_.Oqu(e.fav?"favorite":"favorite_border"),_.xp6(4),_.hij(" ",e.desk.display_name||e.desk.name||e.desk.id," "),_.xp6(13),_.hij(" ",e.desk.display_name||e.desk.name||e.desk.id," "),_.xp6(5),_.Oqu((null==e.desk.zone?null:e.desk.zone.display_name)||(null==e.desk.zone?null:e.desk.zone.name)),_.xp6(1),_.Q6J("ngIf",null==e.desk.features?null:e.desk.features.length),_.xp6(2),_.Q6J("src",e.map_url)("features",e.features)("options",_.DdM(27,me)),_.xp6(2),_.ekj("inverse",e.active),_.xp6(3),_.Oqu(e.active?"remove":"add"),_.xp6(2),_.pQV(e.active),_.QtT(40)}}function Ne(n,t){1&n&&(_.TgZ(0,"div",27)(1,"p",28),_.SDv(2,29),_.qZA()())}class h{constructor(){this.fav=!1,this.active=!1,this.close=new _.vpe,this.toggleFav=new _.vpe,this.activeChange=new _.vpe,this.map_url="",this.features=[]}ngOnChanges(t){t.desk&&this.desk&&this.updateFeature()}updateFeature(){this.map_url=this.desk.zone.map_id,this.features=[{location:this.desk.map_id||this.desk.id,content:ue.q}]}}h.\u0275fac=function(t){return new(t||h)},h.\u0275cmp=_.Xpm({type:h,selectors:[["desk-details"]],inputs:{desk:"desk",fav:"fav",active:"active"},outputs:{close:"close",toggleFav:"toggleFav",activeChange:"activeChange"},features:[_.TTD],decls:3,vars:2,consts:function(){let n,t,e,o,i;return n=$localize`:␟f3cd229363e020d7ceb13bb351bb87f86dda78ef␟6431414344811875961:Single desk`,t=$localize`:␟193cbdbbcae6ad83fa2f2ac8d7dcb6b41c384a89␟2952235329246771628:{VAR_SELECT, select, true {Remove from booking } false {Add to booking }}`,t=_.Zx4(t,{VAR_SELECT:"\ufffd0\ufffd"}),e=$localize`:␟fc6b8194e480db3111367487d3a97bdf5a6333a7␟5607930927273386767: ${t}:ICU: `,o=$localize`:␟bf10c600bd861cfd0a23f4759562ee0ae9dbe19f␟1551920764795208868:Facilities`,i=$localize`:␟c6efe811f5410838382ce9adb2636cb75d783ebc␟4621791550614740403: Select a desk to view it's details `,[[4,"ngIf","ngIfElse"],["emptyState",""],["image","",1,"relative","w-full","bg-black/20"],["class","absolute inset-0",3,"images",4,"ngIf"],["icon","","matRipple","","name","close-desk-details",1,"absolute","top-2","left-2","bg-black/40","sm:hidden","text-white",3,"click"],["icon","","matRipple","","name","toggle-desk-favourite-details",1,"absolute","top-2","right-2","bg-black/40",3,"click"],[1,"p-2","space-y-2","flex-1","h-[calc(100%-19.75rem)]","overflow-auto"],["actions","",1,"z-0","pb-2","border-b"],[1,"text-xl","font-medium","mb-2","mt-4"],["details","",1,"space-y-2","pb-2","border-b","dark:border-neutral-500"],[1,"text-xl","font-medium"],[1,"flex","items-center","space-x-2"],n,["facilities","","class","space-y-2 pb-2 border-b dark:border-neutral-500",4,"ngIf"],["map","",1,"w-full","mx-auto","h-64","sm:h-48","relative","border","border-gray-200","dark:border-neutral-500","overflow-hidden","rounded"],[1,"pointer-events-none",3,"src","features","options"],[1,"px-2","pt-2","pb-[5.5rem]","border-t","border-gray-200","dark:border-neutral-500","shadow","sm:hidden"],["btn","","matRipple","","name","toggle-desk-details",1,"w-full",3,"click"],[1,"flex","items-center","justify-center"],[1,"text-2xl"],e,[1,"absolute","inset-0",3,"images"],["facilities","",1,"space-y-2","pb-2","border-b","dark:border-neutral-500"],o,["class","flex items-center flex-wrap space-x-2",4,"ngFor","ngForOf"],[1,"flex","items-center","flex-wrap","space-x-2"],["for","feat",1,"flex-1","w-1/2"],["empty","",1,"p-16","flex","flex-col","items-center","justify-center","space-y-2"],[1,"opacity-30","text-center"],i]},template:function(t,e){if(1&t&&(_.YNc(0,Ie,41,28,"ng-container",0),_.YNc(1,Ne,3,0,"ng-template",null,1,_.W1O)),2&t){const o=_.MAs(2);_.Q6J("ngIf",e.desk)("ngIfElse",o)}},dependencies:[c.sg,c.O5,E.o,Q.p,S_.K,g.wG],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;width:30%;min-width:20rem;height:100%;min-height:65vh;background:white}"]});var s_=a(2722),Re=a(5650),F=a(2084),l_=a(8242),u_=a(1022),E_=a(7303),V=a(4385),Ce=a(9383);function Fe(n,t){if(1&n){const e=_.EpF();_.TgZ(0,"button",29),_.NdJ("click",function(){_.CHM(e);const i=_.oxw();return _.KtG(i.close())}),_.TgZ(1,"app-icon"),_._uU(2,"keyboard_arrow_left"),_.qZA()()}}function Me(n,t){if(1&n&&(_.TgZ(0,"mat-option",35),_._uU(1),_.qZA()),2&n){const e=t.$implicit;_.Q6J("value",e),_.xp6(1),_.hij(" ",e.display_name||e.name," ")}}const j=function(){return{standalone:!0}};function Ae(n,t){if(1&n){const e=_.EpF();_.TgZ(0,"div",30)(1,"label"),_.SDv(2,31),_.qZA(),_.TgZ(3,"mat-form-field",32)(4,"mat-select",33),_.NdJ("ngModelChange",function(i){_.CHM(e);const s=_.oxw();return _.KtG(s.building=i)})("ngModelChange",function(i){_.CHM(e);const s=_.oxw();return _.KtG(s.setOptions({zone_id:null==i?null:i.id}))}),_.YNc(5,Me,2,2,"mat-option",34),_.ALo(6,"async"),_.qZA()()()}if(2&n){const e=_.oxw();_.xp6(4),_.Q6J("ngModel",e.building)("ngModelOptions",_.DdM(5,j)),_.xp6(1),_.Q6J("ngForOf",_.lcZ(6,3,e.buildings))}}function Le(n,t){if(1&n&&(_.TgZ(0,"mat-option",35),_._uU(1),_.qZA()),2&n){const e=t.$implicit;_.Q6J("value",e.id),_.xp6(1),_.hij(" ",e.display_name||e.name," ")}}function ve(n,t){if(1&n){const e=_.EpF();_.TgZ(0,"div",30)(1,"label"),_._uU(2,"Level"),_.qZA(),_.TgZ(3,"mat-form-field",36)(4,"mat-select",37),_.NdJ("ngModelChange",function(i){_.CHM(e);const s=_.oxw();return _.KtG(s.setOptions({zone_id:i||s.building.id}))}),_.YNc(5,Le,2,2,"mat-option",34),_.ALo(6,"async"),_.qZA()()()}if(2&n){const e=_.oxw();_.xp6(4),_.Q6J("disabled",!e.building)("ngModelOptions",_.DdM(5,j)),_.xp6(1),_.Q6J("ngForOf",_.lcZ(6,3,e.levels))}}function De(n,t){1&n&&(_.TgZ(0,"div",38)(1,"mat-checkbox",39),_.SDv(2,40),_.qZA()())}const be=function(){return[]};function he(n,t){if(1&n){const e=_.EpF();_.TgZ(0,"div",44)(1,"div",45),_._uU(2),_.qZA(),_.TgZ(3,"mat-checkbox",46),_.NdJ("ngModelChange",function(i){const l=_.CHM(e).$implicit,d=_.oxw(2);return _.KtG(d.setFeature(l,i))}),_.ALo(4,"async"),_.qZA()()}if(2&n){const e=t.$implicit,o=_.oxw(2);let i;_.xp6(2),_.Oqu(e),_.xp6(1),_.Q6J("ngModel",((null==(i=_.lcZ(4,3,o.options))?null:i.features)||_.DdM(5,be)).includes(e))("ngModelOptions",_.DdM(6,j))}}function Ue(n,t){if(1&n&&(_.TgZ(0,"section",41)(1,"h2",8),_.SDv(2,42),_.qZA(),_.YNc(3,he,5,7,"div",43),_.ALo(4,"async"),_.qZA()),2&n){const e=_.oxw();_.xp6(3),_.Q6J("ngForOf",_.lcZ(4,1,e.features))}}function ke(n,t){if(1&n){const e=_.EpF();_.TgZ(0,"div",47)(1,"button",48),_.NdJ("click",function(){_.CHM(e);const i=_.oxw();return _.KtG(i.close())}),_.SDv(2,49),_.qZA()()}}class A{get building(){return this._org.building}set building(t){this._org.building=t}get allow_time_changes(){return!!this._settings.get("app.desks.allow_time_changes")}get allow_all_day(){return this.allow_time_changes&&!!this._settings.get("app.desks.allow_all_day")}get end_date(){return(0,s_.Z)((0,Re.Z)(Date.now(),this._settings.get("app.desks.available_period")||90))}constructor(t,e,o,i){this._bsheet_ref=t,this._state=e,this._org=o,this._settings=i,this.can_close=!1,this.options=this._state.options,this.features=this._state.features,this.buildings=this._org.active_buildings,this.levels=this._org.active_levels,this.form=this._state.form,this.close=()=>this._bsheet_ref.dismiss(),this.setOptions=s=>this._state.setOptions(s),this.setFeature=(s,l)=>this._state.setFeature(s,l),this.setLevel=s=>{},this.can_close=!!this._bsheet_ref}}function xe(n,t){if(1&n){const e=_.EpF();_.TgZ(0,"div",13)(1,"p"),_._uU(2),_.qZA(),_.TgZ(3,"button",14),_.NdJ("click",function(){const s=_.CHM(e).$implicit,l=_.oxw();return _.KtG(l.setFeature(s,!1))}),_.TgZ(4,"app-icon"),_._uU(5,"close"),_.qZA()()()}if(2&n){const e=t.$implicit;_.xp6(2),_.Oqu(e)}}function Pe(n,t){if(1&n){const e=_.EpF();_.TgZ(0,"div",15)(1,"span"),_.SDv(2,16),_.qZA(),_.TgZ(3,"button",17),_.NdJ("click",function(){_.CHM(e);const i=_.oxw();return _.KtG(i.setOptions({show_fav:!1}))}),_.TgZ(4,"app-icon"),_._uU(5,"close"),_.qZA()()()}}A.\u0275fac=function(t){return new(t||A)(_.Y36(l_.oL,8),_.Y36(F.f),_.Y36(g_.w),_.Y36(u.gb))},A.\u0275cmp=_.Xpm({type:A,selectors:[["desk-filters"]],decls:43,vars:36,consts:function(){let n,t,e,o,i,s,l,d,S,O,R;return n=$localize`:␟a42190bd19b1cc93828e70bd0ef7a119f4c22aca␟7734428352389083660:Desk Filters`,t=$localize`:␟4f8b2bb476981727ab34ed40fde1218361f92c45␟5028777105388019087:Details`,e=$localize`:␟2f933b826a570836cab04f683970a2d22068458c␟3973931101896534797:Date`,o=$localize`:␟7c0a71d337783e527c1c8e91e433b301c5b1d8a8␟4204880191779081093:Start Time`,i=$localize`:␟e1f10d9bf4d3c37490cd5bf82007444ae7af46b1␟3845185958891849368:End Time`,s=$localize`:␟bde3d9fd949ba4c6014b8e64c1362753bca1cf0c␟5010873675481014004: ${"\ufffd0\ufffd"}:INTERPOLATION: `,l=$localize`:␟cd942cf7297cb47f1a116efdedff1c8547c6ea3e␟5737771872454551963: ${"\ufffd0\ufffd"}:INTERPOLATION: `,d=$localize`:␟6e8be3c170a661414dbcf0e4be5ce2ba65f62615␟5782981899482871069:Building`,S=$localize`:␟d7f43e20f3a729fa3de32bc7a1f709ccd722eae5␟835486935962207481: All Day `,O=$localize`:␟f61c6867295f3b53d23557021f2f4e0aa1d0b8fc␟8650499415827640724:Type`,R=$localize`:␟c17e2cc448524a39eb83b2937cea3235a2e8bf37␟2296888311792137027: Apply Filters `,[[1,"flex","rounded-t-md","items-center","border-b","border-gray-200","dark:border-neutral-500","pb-2","sm:p-4"],[1,"flex-1","pl-2"],["icon","","matRipple","","name","close-desk-filters","class","sm:hidden",3,"click",4,"ngIf"],[1,"font-medium","flex-2","text-center"],n,[1,"flex-1"],[1,"max-h-[65vh]","p-2","overflow-y-auto","overflow-x-hidden","divide-y","divide-gray-200","w-full","max-w-[100vw]","sm:max-w-[30vw]",3,"formGroup"],["details",""],[1,"text-lg","font-medium"],t,["class","flex-1 min-w-[256px] flex flex-col",4,"ngIf"],[1,"flex-1","min-w-[256px]"],e,["name","date","formControlName","date",3,"to"],[1,"flex","items-center","space-x-2"],[1,"flex-1","w-1/3"],o,["name","start-time",3,"ngModel","ngModelOptions","ngModelChange"],i,["formControlName","duration",3,"time","max","min","step","disabled"],["class","flex justify-end -mt-2 mb-2",4,"ngIf"],["favs","",1,"space-y-2","pb-4"],s,[1,"flex","items-center"],["for","fav",1,"flex-1","w-1/2"],l,["name","fav",3,"ngModel","ngModelOptions","ngModelChange"],["class","space-y-2","features","",4,"ngIf"],["class","px-2 py-2 w-full border-t border-gray-200",4,"ngIf"],["icon","","matRipple","","name","close-desk-filters",1,"sm:hidden",3,"click"],[1,"flex-1","min-w-[256px]","flex","flex-col"],d,["appearance","outline",1,"w-full"],["name","building","placeholder","Select building",3,"ngModel","ngModelOptions","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["appearance","outline"],["placeholder","Any Level","ngModel","",3,"disabled","ngModelOptions","ngModelChange"],[1,"flex","justify-end","-mt-2","mb-2"],["formControlName","all_day"],S,["features","",1,"space-y-2"],O,["class","flex items-center flex-wrap space-x-2",4,"ngFor","ngForOf"],[1,"flex","items-center","flex-wrap","space-x-2"],["for","feat",1,"flex-1","w-1/2"],[3,"ngModel","ngModelOptions","ngModelChange"],[1,"px-2","py-2","w-full","border-t","border-gray-200"],["btn","","matRipple","","name","apply-desk-filters",1,"w-full",3,"click"],R]},template:function(t,e){if(1&t&&(_.TgZ(0,"div",0)(1,"div",1),_.YNc(2,Fe,3,0,"button",2),_.qZA(),_.TgZ(3,"h3",3),_.SDv(4,4),_.qZA(),_._UZ(5,"div",5),_.qZA(),_.TgZ(6,"form",6)(7,"section",7)(8,"h2",8),_.SDv(9,9),_.qZA(),_.YNc(10,Ae,7,6,"div",10),_.ALo(11,"async"),_.YNc(12,ve,7,6,"div",10),_.ALo(13,"async"),_.TgZ(14,"div",11)(15,"label"),_.SDv(16,12),_.qZA(),_.TgZ(17,"a-date-field",13),_._uU(18),_.ALo(19,"translate"),_.qZA()(),_.TgZ(20,"div",14)(21,"div",15)(22,"label"),_.SDv(23,16),_.qZA(),_.TgZ(24,"a-time-field",17),_.NdJ("ngModelChange",function(i){return e.form.patchValue({date:i})}),_.qZA()(),_.TgZ(25,"div",15)(26,"label"),_.SDv(27,18),_.qZA(),_._UZ(28,"a-duration-field",19),_.qZA()(),_.YNc(29,De,3,0,"div",20),_.qZA(),_.TgZ(30,"section",21)(31,"h2",8),_.SDv(32,22),_.ALo(33,"translate"),_.qZA(),_.TgZ(34,"div",23)(35,"div",24),_.SDv(36,25),_.ALo(37,"translate"),_.qZA(),_.TgZ(38,"mat-checkbox",26),_.NdJ("ngModelChange",function(i){return e.setOptions({show_fav:i})}),_.ALo(39,"async"),_.qZA()()(),_.YNc(40,Ue,5,3,"section",27),_.ALo(41,"async"),_.qZA(),_.YNc(42,ke,3,0,"div",28)),2&t){let o,i,s,l,d;_.xp6(2),_.Q6J("ngIf",e.can_close),_.xp6(4),_.Q6J("formGroup",e.form),_.xp6(4),_.Q6J("ngIf",null==(o=_.lcZ(11,20,e.buildings))?null:o.length),_.xp6(2),_.Q6J("ngIf",(null==(i=_.lcZ(13,22,e.levels))?null:i.length)>1),_.xp6(5),_.Q6J("to",e.end_date),_.xp6(1),_.hij(" ",_.lcZ(19,24,"FORM.DATE_ERROR")," "),_.xp6(6),_.Q6J("ngModel",e.form.value.date)("ngModelOptions",_.DdM(34,j)),_.xp6(4),_.Q6J("time",null==(s=e.form.get("date"))?null:s.value)("max",720)("min",60)("step",60)("disabled",e.form.value.all_day),_.xp6(1),_.Q6J("ngIf",e.allow_all_day),_.xp6(4),_.pQV(_.lcZ(33,26,"COMMON.FAVOURITES")),_.QtT(32),_.xp6(4),_.pQV(_.lcZ(37,28,"DESKS.SHOW_FAVOURITES")),_.QtT(36),_.xp6(1),_.Q6J("ngModel",null==(l=_.lcZ(39,30,e.options))?null:l.show_fav)("ngModelOptions",_.DdM(35,j)),_.xp6(2),_.Q6J("ngIf",null==(d=_.lcZ(41,32,e.features))?null:d.length),_.xp6(2),_.Q6J("ngIf",e.can_close)}},dependencies:[c.sg,c.O5,r._Y,r.JJ,r.JL,r.On,r.sg,r.u,M.KE,n_.oG,g.ey,i_.Q,u_.B,E_.N,E.o,V.gD,g.wG,c.Ov,Ce.X$],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;width:100%;max-width:100vw}"]});const Ze=function(){return[]};class U extends u.cx{get start(){return this._state.form.value.date}get end(){const{date:t,duration:e,all_day:o}=this._state.form.value;return o?(0,s_.Z)(t):t+60*e*1e3}constructor(t,e){super(),this._bsheet=t,this._state=e,this.view="list",this.viewChange=new _.vpe,this.options=this._state.options,this.setOptions=o=>this._state.setOptions(o),this.setFeature=(o,i)=>this._state.setFeature(o,i),this.editFilter=()=>this._bsheet.open(A)}}U.\u0275fac=function(t){return new(t||U)(_.Y36(l_.ch),_.Y36(F.f))},U.\u0275cmp=_.Xpm({type:U,selectors:[["desk-filters-display"]],inputs:{view:"view"},outputs:{viewChange:"viewChange"},features:[_.qOj],decls:20,vars:23,consts:function(){let n,t,e,o;return n=$localize`:␟19eaa5cd51d70d9ea957eecac78cfd811e9b93d8␟5208858215712453646: Filters `,t=$localize`:␟992a9a6a193a56c5b8846dc972c5e1977ee5f1aa␟8553228906889869186: Map `,e=$localize`:␟4b286e90831dd637c5cd3eb20544664ee7112669␟7787942140742011951: List `,o=$localize`:␟d6ad8326be48837fe776a268abc758d1c7ba4f05␟1305804744685886428:Favourites Only`,[["actions","",1,"sm:hidden","space-x-2","flex","flex-row","items-center","p-2"],["btn","","matRipple","","name","edit-desk-filters",1,"flex-1","w-1/2",3,"click"],n,[1,"flex","items-center"],["btn","","matRipple","","name","view-desk-map",1,"rounded-l","rounded-r-none",3,"click"],t,["btn","","matRipple","","name","view-desk-list",1,"rounded-r","rounded-l-none",3,"click"],e,["filters","",1,"flex","items-center","flex-wrap","p-2"],["filter-item","","date",""],["filter-item","","time",""],["filter-item","","features","",4,"ngFor","ngForOf"],["filter-item","",4,"ngIf"],["filter-item","","features",""],["icon","","matRipple","","name","remove-desk-filter",1,"-mr-4",3,"click"],["filter-item",""],o,["icon","","matRipple","","name","remove-desk-favs-filter",1,"-mr-4",3,"click"]]},template:function(t,e){if(1&t&&(_.TgZ(0,"section",0)(1,"button",1),_.NdJ("click",function(){return e.editFilter()}),_.SDv(2,2),_.qZA(),_.TgZ(3,"div",3)(4,"button",4),_.NdJ("click",function(){return e.view="map",e.viewChange.emit(e.view)}),_.SDv(5,5),_.qZA(),_.TgZ(6,"button",6),_.NdJ("click",function(){return e.view="list",e.viewChange.emit(e.view)}),_.SDv(7,7),_.qZA()()(),_.TgZ(8,"section",8)(9,"div",9),_._uU(10),_.ALo(11,"date"),_.qZA(),_.TgZ(12,"div",10),_._uU(13),_.ALo(14,"date"),_.ALo(15,"date"),_.qZA(),_.YNc(16,xe,6,1,"div",11),_.ALo(17,"async"),_.YNc(18,Pe,6,0,"div",12),_.ALo(19,"async"),_.qZA()),2&t){let o,i;_.xp6(4),_.ekj("inverse","map"!==e.view),_.xp6(2),_.ekj("inverse","list"!==e.view),_.xp6(4),_.Oqu(_.xi3(11,9,e.start,"mediumDate")),_.xp6(3),_.AsE(" ",_.xi3(14,12,e.start,"shortTime")," \u2014 ",_.xi3(15,15,e.end,"shortTime")," "),_.xp6(3),_.Q6J("ngForOf",(null==(o=_.lcZ(17,18,e.options))?null:o.features)||_.DdM(22,Ze)),_.xp6(2),_.Q6J("ngIf",null==(i=_.lcZ(19,20,e.options))?null:i.show_fav)}},dependencies:[c.sg,c.O5,E.o,g.wG,c.Ov,c.uU],styles:["[filter-item][_ngcontent-%COMP%]{display:flex;align-items:center;padding:0 1rem;height:2rem;font-size:.875rem;border:1px solid rgba(0,0,0,.2);border-radius:1.25rem;margin-right:.5rem;margin-bottom:.5rem}[filter-item][_ngcontent-%COMP%]:hover{background:rgba(0,0,0,.1)}[filter-item][_ngcontent-%COMP%] > *[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-left:.5rem}"]});var C_=a(3426),N=a(4850);function Ke(n,t){1&n&&(_.TgZ(0,"div",22)(1,"app-icon"),_._uU(2,"done"),_.qZA()())}function Ge(n,t){if(1&n&&_._UZ(0,"img",23),2&n){const e=_.oxw().$implicit;_.Q6J("src",e.images[0],_.LSH)}}function $e(n,t){1&n&&_._UZ(0,"img",24)}function Be(n,t){if(1&n){const e=_.EpF();_.TgZ(0,"li",10)(1,"button",11),_.NdJ("click",function(){const s=_.CHM(e).$implicit,l=_.oxw(3);return _.KtG(l.selectDesk(s))}),_.TgZ(2,"div",12),_.YNc(3,Ke,3,0,"div",13),_.YNc(4,Ge,1,1,"img",14),_.YNc(5,$e,1,0,"ng-template",null,15,_.W1O),_.qZA(),_.TgZ(7,"div",16)(8,"span",17),_._uU(9),_.qZA(),_.TgZ(10,"div",18)(11,"app-icon",19),_._uU(12,"place"),_.qZA(),_.TgZ(13,"p",20),_._uU(14),_.qZA()()()(),_.TgZ(15,"button",21),_.NdJ("click",function(){const s=_.CHM(e).$implicit,l=_.oxw(3);return _.KtG(l.toggleFav.emit(s))}),_.TgZ(16,"app-icon"),_._uU(17),_.qZA()()()}if(2&n){const e=t.$implicit,o=_.MAs(6),i=_.oxw(3);_.ekj("!border-blue-400",i.active===e.id),_.xp6(3),_.Q6J("ngIf",i.selected.includes(e.id)),_.xp6(1),_.Q6J("ngIf",null==e.images?null:e.images.length)("ngIfElse",o),_.xp6(5),_.hij(" ",e.name||e.id||"Desk"," "),_.xp6(5),_.hij(" ",(null==e.zone?null:e.zone.display_name)||(null==e.zone?null:e.zone.name)||"<No Level>"," "),_.xp6(1),_.ekj("text-blue-400",i.isFavourite(e.id)),_.xp6(2),_.Oqu(i.isFavourite(e.id)?"favorite":"favorite_border")}}function ye(n,t){if(1&n&&(_.TgZ(0,"ul",8),_.YNc(1,Be,18,10,"li",9),_.ALo(2,"async"),_.qZA()),2&n){const e=_.oxw(2);_.xp6(1),_.Q6J("ngForOf",_.lcZ(2,1,e.desks))}}function we(n,t){if(1&n&&(_.ynx(0),_.YNc(1,ye,3,3,"ul",7),_.ALo(2,"async"),_.BQk()),2&n){const e=_.oxw(),o=_.MAs(10);let i;_.xp6(1),_.Q6J("ngIf",null==(i=_.lcZ(2,2,e.desks))?null:i.length)("ngIfElse",o)}}function Ye(n,t){1&n&&(_.TgZ(0,"div",25),_._UZ(1,"mat-spinner",26),_.TgZ(2,"p",27),_._uU(3,"Finding available desks..."),_.qZA()()),2&n&&(_.xp6(1),_.Q6J("diameter",32))}function qe(n,t){1&n&&(_.TgZ(0,"div",28)(1,"p",29),_._uU(2," No available desk for selected time and/or filters "),_.qZA()())}class k{constructor(t){this._state=t,this.active="",this.selected="",this.favorites=[],this.onSelect=new _.vpe,this.toggleFav=new _.vpe,this.desks=(0,C_.aj)([this._state.options,this._state.available_resources]).pipe((0,N.U)(([{show_fav:e},o])=>o.filter(i=>!e||this.isFavourite(i.id)))),this.loading=this._state.loading}isFavourite(t){return this.favorites.includes(t)}selectDesk(t){this.onSelect.emit(t)}}function Je(n,t){if(1&n&&(_.TgZ(0,"mat-option",10),_._uU(1),_.qZA()),2&n){const e=t.$implicit;_.Q6J("value",e),_.xp6(1),_.hij(" ",e.display_name||e.name," ")}}k.\u0275fac=function(t){return new(t||k)(_.Y36(F.f))},k.\u0275cmp=_.Xpm({type:k,selectors:[["desk-list"]],inputs:{active:"active",selected:"selected",favorites:"favorites"},outputs:{onSelect:"onSelect",toggleFav:"toggleFav"},decls:11,vars:7,consts:function(){let n,t;return n=$localize`:␟80ed5b776a26a78099e230e0e89d96c33ba44e24␟5968132631442328843:Results`,t=$localize`:␟99a2ae2a83b9fba5f9d4547746782447904ccf7b␟1931205204318295377: ${"\ufffd0\ufffd"}:INTERPOLATION: result(s) found `,[[1,"font-bold"],n,["count","",1,"text-sm","opacity-60","mb-4"],t,[4,"ngIf","ngIfElse"],["load_state",""],["empty_state",""],["class","list-style-none space-y-2",4,"ngIf","ngIfElse"],[1,"list-style-none","space-y-2"],["desk","","class","relative rounded-lg w-full shadow border bg-white dark:bg-neutral-600 border-gray-200 dark:border-neutral-500 overflow-hidden",3,"!border-blue-400",4,"ngFor","ngForOf"],["desk","",1,"relative","rounded-lg","w-full","shadow","border","bg-white","dark:bg-neutral-600","border-gray-200","dark:border-neutral-500","overflow-hidden"],["name","select-desk","matRipple","",1,"w-full","h-full","flex","p-2",3,"click"],[1,"relative","w-20","h-20","rounded-xl","bg-black/20","mr-4","flex","items-center","justify-center"],["class","absolute top-1 left-1 border border-white bg-black/50 rounded-full h-6 w-6 flex items-center justify-center text-white",4,"ngIf"],["class","object-cover h-full",3,"src",4,"ngIf","ngIfElse"],["placeholder",""],[1,"space-y-2","pt-2","flex-1","text-left"],[1,"font-medium"],[1,"flex","items-center","text-sm","space-x-2"],[1,"text-blue-500"],[1,"text-xs"],["icon","","matRipple","","name","toggle-desk-favourite",1,"absolute","top-1","right-1",3,"click"],[1,"absolute","top-1","left-1","border","border-white","bg-black/50","rounded-full","h-6","w-6","flex","items-center","justify-center","text-white"],[1,"object-cover","h-full",3,"src"],["src","assets/icons/desk-placeholder.svg",1,"m-auto"],["loading","",1,"p-16","flex","flex-col","items-center","justify-center","space-y-2"],[3,"diameter"],[1,"opacity-30"],["empty","",1,"p-16","flex","flex-col","items-center","justify-center","space-y-2"],[1,"opacity-30","text-center"]]},template:function(t,e){if(1&t&&(_.TgZ(0,"h3",0),_.SDv(1,1),_.qZA(),_.TgZ(2,"p",2),_.SDv(3,3),_.ALo(4,"async"),_.qZA(),_.YNc(5,we,3,4,"ng-container",4),_.ALo(6,"async"),_.YNc(7,Ye,4,1,"ng-template",null,5,_.W1O),_.YNc(9,qe,3,0,"ng-template",null,6,_.W1O)),2&t){const o=_.MAs(8);let i,s;_.xp6(4),_.pQV((null==(i=_.lcZ(4,3,e.desks))?null:i.length)||0),_.QtT(3),_.xp6(1),_.Q6J("ngIf",!(null!=(s=_.lcZ(6,5,e.loading))&&s.length))("ngIfElse",o)}},dependencies:[c.sg,c.O5,v.Ou,E.o,g.wG,c.Ov],styles:["[_nghost-%COMP%]{width:100%;height:100%;padding:.5rem;background:rgba(0,0,0,.05);overflow-y:auto}"]});const We=function(){return{standalone:!0}};class x extends u.cx{get map_url(){return this.level?.map_id||""}constructor(t){super(),this._state=t,this.is_displayed=!1,this.onSelect=new _.vpe,this.desks=this._state.available_resources,this.loading=this._state.loading,this.zoom=1,this.center={x:.5,y:.5},this.setOptions=e=>this._state.setOptions(e),this.levels=this._state.available_resources.pipe((0,N.U)(e=>(0,u.Tw)(e.map(o=>o.zone),"id"))),this.actions=this._state.available_resources.pipe((0,N.U)(e=>e.map(o=>({id:o.map_id||o.id,action:["touchend","mouseup"],callback:()=>this.selectDesk(o)})))),this.features=this._state.available_resources.pipe((0,N.U)(e=>e.map(o=>({location:o.map_id||o.id,content:'<span class="flex h-4 w-4 rounded-full absolute top-1/4 left-1/4 transform -translate-x-1/2 -translate-y-1/2 border-[3px] shadow" >\n                            <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-green-800 opacity-75"></span>\n                            <span class="relative inline-flex rounded-full h-full w-full bg-green-800"></span>\n                        </span>'}))))}ngOnInit(){this.subscription("levels_update",this.levels.subscribe(t=>{t.find(e=>e.id===this.level?.id)||(this.level=t[0])}))}selectDesk(t){this.onSelect.emit(t)}setZoom(t){this.zoom=Math.max(.5,Math.min(10,t))}resetMap(){this.zoom=1,this.center={x:.5,y:.5}}}function Xe(n,t){if(1&n){const e=_.EpF();_.TgZ(0,"desk-list",29),_.NdJ("toggleFav",function(i){_.CHM(e);const s=_.oxw();return _.KtG(s.toggleFavourite(i))})("onSelect",function(i){_.CHM(e);const s=_.oxw();return _.KtG(s.displayed=i)}),_.qZA()}if(2&n){const e=_.oxw();_.Q6J("active",null==e.displayed?null:e.displayed.id)("selected",e.selected_ids)("favorites",e.favorites)}}function Qe(n,t){if(1&n){const e=_.EpF();_.TgZ(0,"button",30),_.NdJ("click",function(){_.CHM(e);const i=_.oxw();return _.KtG(i.displayed=null)}),_.SDv(1,31),_.qZA()}}function ze(n,t){if(1&n){const e=_.EpF();_.TgZ(0,"desk-map",32),_.NdJ("onSelect",function(i){_.CHM(e);const s=_.oxw();return _.KtG(s.displayed=i)}),_.qZA()}if(2&n){const e=_.oxw();_.Q6J("is_displayed",!!e.displayed)}}x.\u0275fac=function(t){return new(t||x)(_.Y36(F.f))},x.\u0275cmp=_.Xpm({type:x,selectors:[["desk-map"]],inputs:{is_displayed:"is_displayed"},outputs:{onSelect:"onSelect"},features:[_.qOj],decls:20,vars:15,consts:[[3,"src","zoom","center","features","actions","zoomChange","centerChange"],[1,"absolute","inset-x-0","top-0","bg-white","p-2","border-b","border-gray-200"],["levels","","appearance","outline",1,"w-full","h-[3.25rem]"],[3,"ngModel","ngModelOptions","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["zoom","",1,"absolute","bottom-2","right-2","rounded-lg","border","border-gray-200","bg-white","flex","flex-col","overflow-hidden"],["zoom-in","","icon","","matRipple","",3,"click"],[1,"border-t","border-gray-200","w-full"],["zoom-out","","icon","","matRipple","",3,"click"],["reset","","icon","","matRipple","",3,"click"],[3,"value"]],template:function(t,e){1&t&&(_.TgZ(0,"i-map",0),_.NdJ("zoomChange",function(i){return e.zoom=i})("centerChange",function(i){return e.center=i}),_.ALo(1,"async"),_.ALo(2,"async"),_.qZA(),_.TgZ(3,"div",1)(4,"mat-form-field",2)(5,"mat-select",3),_.NdJ("ngModelChange",function(i){return e.level=i}),_.YNc(6,Je,2,2,"mat-option",4),_.ALo(7,"async"),_.qZA()()(),_.TgZ(8,"div",5)(9,"button",6),_.NdJ("click",function(){return e.setZoom(1.1*e.zoom)}),_.TgZ(10,"app-icon"),_._uU(11,"zoom_in"),_.qZA()(),_._UZ(12,"div",7),_.TgZ(13,"button",8),_.NdJ("click",function(){return e.setZoom(e.zoom*(1/1.1))}),_.TgZ(14,"app-icon"),_._uU(15,"zoom_out"),_.qZA()(),_._UZ(16,"div",7),_.TgZ(17,"button",9),_.NdJ("click",function(){return e.resetMap()}),_.TgZ(18,"app-icon"),_._uU(19,"refresh"),_.qZA()()()),2&t&&(_.Q6J("src",e.map_url)("zoom",e.zoom)("center",e.center)("features",_.lcZ(1,8,e.features))("actions",_.lcZ(2,10,e.actions)),_.xp6(5),_.Q6J("ngModel",e.level)("ngModelOptions",_.DdM(14,We)),_.xp6(1),_.Q6J("ngForOf",_.lcZ(7,12,e.levels)))},dependencies:[c.sg,r.JJ,r.On,M.KE,g.ey,E.o,Q.p,V.gD,g.wG,c.Ov],styles:["[_nghost-%COMP%]{position:relative;background:rgba(0,0,0,.05);padding-top:4rem}button[_ngcontent-%COMP%]{border-radius:0}"]});const P="favourite_desks";class Z{get selected_ids(){return this.selected.map(t=>t.id).join(",")}get favorites(){return this._settings.get(P)||[]}constructor(t,e,o,i){this._dialog_ref=t,this._settings=e,this._event_form=o,this._data=i,this.selected=[],this.view="list",this.selected=[...i.items||[]],this._event_form.setOptions(i.options)}isSelected(t){return t&&this.selected_ids.includes(t)}setSelected(t,e){const o=this.selected.filter(i=>i.id!==t.id);e&&o.push(t),this.selected=o,!this._data.options.group&&e&&this._dialog_ref.close([t])}toggleFavourite(t){const e=this.favorites;e.includes(t.id)?this._settings.saveUserSetting(P,e.filter(i=>i!==t.id)):this._settings.saveUserSetting(P,[...e,t.id])}}Z.\u0275fac=function(t){return new(t||Z)(_.Y36(T.so),_.Y36(u.gb),_.Y36(F.f),_.Y36(T.WI))},Z.\u0275cmp=_.Xpm({type:Z,selectors:[["desk-select-modal"]],decls:39,vars:25,consts:function(){let n,t,e,o,i,s;return n=$localize`:␟4221741642af22ed8e17ee106c326def85e70c61␟1749010714240797250:Find Desk`,t=$localize`:␟30d3439b0e0095fe69503245f3bd7a2e9498be7c␟8443571736703532556: View List `,e=$localize`:␟18843b85d1a4f17fefafd07bc5cde636dca44295␟819716823718458903:Back to form`,o=$localize`:␟f566e50852be3f327b040870cbf63b59ea3b8d8c␟3611851363359647609: ${"\ufffd0\ufffd"}:INTERPOLATION: desk(s) added `,i=$localize`:␟f45c34c7afdabef75762747a20f4113d65eb2312␟6426755559249487826: ${"\ufffd0\ufffd"}:INTERPOLATION: `,s=$localize`:␟ccda1d41ca79703a85a3a598c1d97e040a32b766␟874721418273731876: Back `,[[1,"w-[100vw]","h-[100vh]","sm:relative","sm:w-auto","sm:h-auto","flex","flex-col","bg-white","dark:bg-neutral-700"],[1,"flex","items-center","space-x-4","w-full"],["icon","","mat-dialog-close","",1,"bg-black/20"],n,[1,"hidden","sm:flex","items-center","justify-end","flex-1"],["btn","","matRipple","","name","view-desk-map",1,"rounded-l","rounded-r-none",3,"click"],["btn","","matRipple","","name","view-desk-list",1,"rounded-r","rounded-l-none",3,"click"],[1,"flex-1","flex","items-center","divide-x","divide-gray-200","dark:divide-neutral-500","min-h-[65vh]","h-[65vh]","sm:max-h-[65vh]","sm:max-w-[95vw]","w-full","overflow-hidden"],[1,"h-full","hidden","sm:flex","max-w-[20rem]","sm:h-[65vh]","sm:max-h-full"],[1,"flex","flex-col","items-center","flex-1","w-1/2","h-full","sm:h-[65vh]"],[1,"w-full","border-b","border-gray-200","dark:border-neutral-500",3,"view","viewChange"],["class","flex-1 h-1/2 bg-black/5 dark:bg-white/10",3,"active","selected","favorites","toggleFav","onSelect",4,"ngIf","ngIfElse"],[1,"h-full","w-full","sm:h-[65vh]","absolute","sm:relative","sm:flex","sm:max-w-[20rem]","z-20","bg-white","dark:bg-neutral-600","block",3,"desk","active","fav","activeChange","toggleFav","close"],[1,"flex","sm:hidden","flex-col-reverse","items-center","justify-end","px-2","pt-2","pb-[5.5rem]","border-t","border-gray-200","dark:border-neutral-500","w-full"],["btn","","matRipple","","name","desk-return","class","inverse sm:hidden w-full",3,"click",4,"ngIf"],["btn","","matRipple","","name","save-desks",1,"w-full","sm:w-32","sm:mb-0",3,"mat-dialog-close"],t,[1,"hidden","sm:flex","items-center","justify-between","p-2","border-t","border-gray-200","dark:border-neutral-500","w-full"],["btn","","matRipple","","name","desk-return",1,"clear","text-primary",3,"mat-dialog-close"],[1,"flex","items-center"],[1,"text-xl"],[1,"mr-1","underline"],e,[1,"opacity-60","text-sm"],o,["btn","","matRipple","","name","toggle-desk",3,"disabled","click"],[1,"mr-1"],i,["map_view",""],[1,"flex-1","h-1/2","bg-black/5","dark:bg-white/10",3,"active","selected","favorites","toggleFav","onSelect"],["btn","","matRipple","","name","desk-return",1,"inverse","sm:hidden","w-full",3,"click"],s,[1,"flex-1","h-1/2","w-full",3,"is_displayed","onSelect"]]},template:function(t,e){if(1&t&&(_.TgZ(0,"div",0)(1,"header",1)(2,"button",2)(3,"app-icon"),_._uU(4,"close"),_.qZA()(),_.TgZ(5,"h3"),_.SDv(6,3),_.qZA(),_.TgZ(7,"div",4)(8,"button",5),_.NdJ("click",function(){return e.view="map"}),_._uU(9," Map "),_.qZA(),_.TgZ(10,"button",6),_.NdJ("click",function(){return e.view="list"}),_._uU(11," List "),_.qZA()()(),_.TgZ(12,"main",7),_._UZ(13,"desk-filters",8),_.TgZ(14,"div",9)(15,"desk-filters-display",10),_.NdJ("viewChange",function(i){return e.view=i}),_.qZA(),_.YNc(16,Xe,1,3,"desk-list",11),_.qZA(),_.TgZ(17,"desk-details",12),_.NdJ("activeChange",function(i){return e.setSelected(e.displayed,i)})("toggleFav",function(){return e.toggleFavourite(e.displayed)})("close",function(){return e.displayed=null}),_.qZA()(),_.TgZ(18,"footer",13),_.YNc(19,Qe,2,0,"button",14),_.TgZ(20,"button",15),_.SDv(21,16),_.qZA()(),_.TgZ(22,"footer",17)(23,"button",18)(24,"div",19)(25,"app-icon",20),_._uU(26,"arrow_back"),_.qZA(),_.TgZ(27,"div",21),_.SDv(28,22),_.qZA()()(),_.TgZ(29,"p",23),_.SDv(30,24),_.qZA(),_.TgZ(31,"button",25),_.NdJ("click",function(){return e.setSelected(e.displayed,!e.isSelected(null==e.displayed?null:e.displayed.id))}),_.TgZ(32,"div",19)(33,"app-icon",20),_._uU(34),_.qZA(),_.TgZ(35,"div",26),_.SDv(36,27),_.qZA()()()()(),_.YNc(37,ze,1,1,"ng-template",null,28,_.W1O)),2&t){const o=_.MAs(38);_.xp6(8),_.ekj("inverse","map"!==e.view),_.xp6(2),_.ekj("inverse","list"!==e.view),_.xp6(5),_.Q6J("view",e.view),_.xp6(1),_.Q6J("ngIf","list"===e.view)("ngIfElse",o),_.xp6(1),_.ekj("hidden",!e.displayed)("inset-0",e.displayed),_.Q6J("desk",e.displayed)("active",e.selected_ids.includes(null==e.displayed?null:e.displayed.id))("fav",e.displayed&&e.favorites.includes(null==e.displayed?null:e.displayed.id)),_.xp6(2),_.Q6J("ngIf",e.displayed),_.xp6(1),_.ekj("mb-2",e.displayed),_.Q6J("mat-dialog-close",e.selected),_.xp6(3),_.Q6J("mat-dialog-close",e.selected),_.xp6(7),_.pQV(e.selected.length),_.QtT(30),_.xp6(1),_.ekj("inverse",e.isSelected(null==e.displayed?null:e.displayed.id)),_.Q6J("disabled",!e.displayed),_.xp6(3),_.Oqu(e.isSelected(null==e.displayed?null:e.displayed.id)?"remove":"add"),_.xp6(2),_.pQV(e.isSelected(null==e.displayed?null:e.displayed.id)?"Remove from Booking":"Add to booking"),_.QtT(36)}},dependencies:[c.O5,T.ZT,E.o,g.wG,h,A,U,k,x],encapsulation:2});var f_=a(7224),T_=a(8296),F_=a(3245),M_=a(1529),O_=a(7957),Ve=a(6471);function je(n,t){if(1&n&&(_.TgZ(0,"mat-option",35),_._uU(1),_.qZA()),2&n){const e=t.$implicit;_.Q6J("value",e.id),_.xp6(1),_.hij(" ",e.display_name||e.name," ")}}const He=function(){return{standalone:!0}};function _t(n,t){if(1&n){const e=_.EpF();_.TgZ(0,"div",15)(1,"label",31),_.tHW(2,32),_._UZ(3,"span"),_.N_p(),_.qZA(),_.TgZ(4,"mat-form-field",29)(5,"mat-select",33),_.NdJ("ngModelChange",function(i){_.CHM(e);const s=_.oxw(4);return _.KtG(s.form.patchValue({zones:[i]}))}),_.YNc(6,je,2,2,"mat-option",34),_.ALo(7,"async"),_.qZA()()()}if(2&n){const e=_.oxw(4);_.xp6(5),_.Q6J("ngModel",e.form.value.zones[0])("ngModelOptions",_.DdM(5,He)),_.xp6(1),_.Q6J("ngForOf",_.lcZ(7,3,e.buildings))}}function et(n,t){if(1&n){const e=_.EpF();_.TgZ(0,"mat-option",48),_.NdJ("click",function(){const s=_.CHM(e).$implicit,l=_.oxw(5);return _.KtG(l.setVisitor(s))}),_.TgZ(1,"div",49)(2,"div"),_._uU(3),_.qZA(),_.TgZ(4,"div",50),_._uU(5),_.qZA()()()}if(2&n){const e=t.$implicit;_.Q6J("value",e.name),_.xp6(3),_.Oqu(e.name),_.xp6(2),_.AsE(" ",e.email," ",e.company?"| "+e.company:""," ")}}function tt(n,t){if(1&n){const e=_.EpF();_.TgZ(0,"mat-option",48),_.NdJ("click",function(){const s=_.CHM(e).$implicit,l=_.oxw(5);return _.KtG(l.setVisitor(s))}),_.TgZ(1,"div",49)(2,"div"),_._uU(3),_.qZA(),_.TgZ(4,"div",50),_._uU(5),_.qZA()()()}if(2&n){const e=t.$implicit;_.Q6J("value",e.email),_.xp6(3),_.Oqu(e.name),_.xp6(2),_.AsE(" ",e.email," ",e.company?"| "+e.company:""," ")}}function nt(n,t){if(1&n){const e=_.EpF();_.ynx(0),_.TgZ(1,"div",15)(2,"label",36),_.tHW(3,37),_._UZ(4,"span"),_.N_p(),_.qZA(),_.TgZ(5,"mat-form-field",29)(6,"input",38),_.NdJ("focus",function(){_.CHM(e);const i=_.oxw(4);return _.KtG(i.filterVisitors(i.form.value.asset_name))}),_.qZA()(),_.TgZ(7,"mat-autocomplete",null,39),_.YNc(9,et,6,4,"mat-option",40),_.qZA()(),_.TgZ(10,"div",15)(11,"label",41),_.tHW(12,42),_._UZ(13,"span"),_.N_p(),_.qZA(),_.TgZ(14,"mat-form-field",29)(15,"input",43),_.NdJ("focus",function(){_.CHM(e);const i=_.oxw(4);return _.KtG(i.filterVisitors(i.form.value.asset_id))}),_.qZA(),_.TgZ(16,"mat-error"),_.SDv(17,44),_.qZA()(),_.TgZ(18,"mat-autocomplete",null,45),_.YNc(20,tt,6,4,"mat-option",40),_.qZA()(),_.TgZ(21,"div",15)(22,"label",36),_.SDv(23,46),_.qZA(),_.TgZ(24,"mat-form-field",29),_._UZ(25,"input",47),_.qZA()(),_.BQk()}if(2&n){const e=_.MAs(8),o=_.MAs(19),i=_.oxw(4);_.xp6(6),_.Q6J("matAutocomplete",e),_.xp6(3),_.Q6J("ngForOf",i.filtered_visitors),_.xp6(6),_.Q6J("matAutocomplete",o),_.xp6(5),_.Q6J("ngForOf",i.filtered_visitors)}}function ot(n,t){if(1&n&&(_.TgZ(0,"form",13),_.YNc(1,_t,8,6,"div",14),_.TgZ(2,"div",15)(3,"label",16),_.tHW(4,17),_._UZ(5,"span"),_.N_p(),_.qZA(),_._UZ(6,"a-date-field",18),_.qZA(),_.TgZ(7,"div",19)(8,"div",20)(9,"label",21),_.tHW(10,22),_._UZ(11,"span"),_.N_p(),_.qZA(),_._UZ(12,"a-time-field",23),_.qZA(),_.TgZ(13,"div",20)(14,"label",24),_.tHW(15,25),_._UZ(16,"span"),_.N_p(),_.qZA(),_._UZ(17,"a-duration-field",26),_.qZA()(),_.YNc(18,nt,26,4,"ng-container",0),_.TgZ(19,"div",15)(20,"label",27),_.SDv(21,28),_.qZA(),_.TgZ(22,"mat-form-field",29),_._UZ(23,"input",30),_.qZA()()()),2&n){const e=_.oxw(3),o=_.MAs(6);_.Q6J("formGroup",e.form),_.xp6(1),_.Q6J("ngIf",(null==e.buildings?null:e.buildings.length)>1),_.xp6(16),_.Q6J("time",e.form.value.date),_.xp6(1),_.Q6J("ngIf",!e.multiple)("ngIfElse",o)}}function it(n,t){if(1&n){const e=_.EpF();_.TgZ(0,"div",5)(1,"div",6)(2,"h2",7),_.SDv(3,8),_.qZA()(),_.YNc(4,ot,24,5,"form",9),_.TgZ(5,"div",10)(6,"button",11),_.NdJ("click",function(){_.CHM(e);const i=_.oxw(2);return _.KtG(i.sendInvite())}),_.SDv(7,12),_.qZA()()()}if(2&n){const e=_.oxw(2);_.xp6(4),_.Q6J("ngIf",e.form)}}function st(n,t){if(1&n&&(_.ynx(0),_.YNc(1,it,8,1,"div",4),_.ALo(2,"async"),_.BQk()),2&n){const e=_.oxw(),o=_.MAs(4);_.xp6(1),_.Q6J("ngIf",!_.lcZ(2,2,e.loading))("ngIfElse",o)}}function lt(n,t){if(1&n&&(_.tHW(0,54,1),_.GkF(1),_.N_p()),2&n){const e=_.oxw(2);_.xp6(1),_.pQV((null==e.last_success?null:e.last_success.asset_name)||(null==e.last_success?null:e.last_success.asset_id)),_.QtT(0)}}function at(n,t){if(1&n&&(_.tHW(0,54,2),_.GkF(1),_.N_p()),2&n){const e=_.oxw(2);_.xp6(1),_.pQV(e.last_count)(1==e.last_count?"":"s"),_.QtT(0)}}function ct(n,t){if(1&n&&(_.tHW(0,57,1),_.GkF(1),_.N_p()),2&n){const e=_.oxw(2);_.xp6(1),_.pQV((null==e.last_success?null:e.last_success.asset_name)||(null==e.last_success?null:e.last_success.asset_id)),_.QtT(0)}}function rt(n,t){if(1&n&&(_.tHW(0,57,2),_.GkF(1),_.N_p()),2&n){const e=_.oxw(2);_.xp6(1),_.pQV(e.last_count)(1==e.last_count?"":"s"),_.QtT(0)}}function dt(n,t){if(1&n){const e=_.EpF();_.TgZ(0,"div",51)(1,"div",52)(2,"h2",53),_.tHW(3,54),_.YNc(4,lt,2,1,"ng-container",55),_.YNc(5,at,2,2,"ng-container",55),_.N_p(),_.qZA(),_._UZ(6,"img",56),_.TgZ(7,"p"),_.tHW(8,57),_.TgZ(9,"i"),_.YNc(10,ct,2,1,"ng-container",55),_.YNc(11,rt,2,2,"ng-container",55),_.qZA(),_.ALo(12,"date"),_.ALo(13,"date"),_.N_p(),_.qZA()(),_.TgZ(14,"div",58)(15,"div",59)(16,"button",60),_.NdJ("click",function(){_.CHM(e);const i=_.oxw();return _.KtG(i.onDone())}),_.SDv(17,61),_.qZA(),_.TgZ(18,"button",60),_.NdJ("click",function(){_.CHM(e);const i=_.oxw();return _.KtG(i.sent=!1)}),_.SDv(19,62),_.qZA()()()()}if(2&n){const e=_.oxw();_.xp6(4),_.Q6J("ngIf",!e.multiple),_.xp6(1),_.Q6J("ngIf",e.multiple),_.xp6(5),_.Q6J("ngIf",!e.multiple),_.xp6(1),_.Q6J("ngIf",e.multiple),_.xp6(2),_.pQV((null==e.building?null:e.building.display_name)||(null==e.building?null:e.building.name))(_.xi3(12,7,null==e.last_success?null:e.last_success.date,"mediumDate"))(_.xi3(13,10,null==e.last_success?null:e.last_success.date,"shortTime")),_.QtT(8)}}function St(n,t){1&n&&(_.TgZ(0,"div",63),_._UZ(1,"mat-spinner",64),_.TgZ(2,"p"),_.SDv(3,65),_.qZA()()),2&n&&(_.xp6(1),_.Q6J("diameter",32))}function pt(n,t){if(1&n&&(_.TgZ(0,"div",66)(1,"label",36),_.tHW(2,67),_._UZ(3,"span"),_.N_p(),_.qZA(),_._UZ(4,"a-user-list-field",68),_.qZA()),2&n){const e=_.oxw();_.Q6J("formGroup",e.form),_.xp6(4),_.Q6J("guests_only",!0)}}class H extends u.cx{get multiple(){return this._settings.get("app.booking.multiple_visitors")}get building(){return this._org.building}get form(){return this._service.form}constructor(t,e,o){super(),this._service=t,this._settings=e,this._org=o,this.done=new _.vpe,this.sent=!1,this.loading=this._service.loading,this.buildings=this._org.active_buildings,this.last_success=this._service.last_success,this.last_count=0,this.visitors=[],this.filtered_visitors=[]}ngOnInit(){var t=this;return(0,C.Z)(function*(){t.sent=!1,t._service.clearOldState(),yield t.initFormZone(),t.form.get("asset_id").setValidators([r.kI.required,r.kI.email]);const e=t._settings.get("visitor-invitees")||[];for(const o of e){const[i,s,l]=o.split("|");t.visitors.push({email:i,name:s,company:l})}t.filterVisitors(""),t.subscription("email",t.form.get("asset_id").valueChanges.subscribe(o=>t.filterVisitors(o))),t.subscription("name",t.form.get("asset_name").valueChanges.subscribe(o=>t.filterVisitors(o))),t.multiple&&t.form.patchValue({asset_id:"multiple@place.tech"})})()}setVisitor(t){this.form.patchValue({asset_id:t.email,asset_name:t.name,company:t.company})}filterVisitors(t){const e=(t||"").toLowerCase();this.filtered_visitors=this.visitors.filter(({email:o,name:i,company:s})=>o.toLowerCase().includes(e)||i.toLowerCase().includes(e)||s.toLowerCase().includes(e))}onDone(){this.done.emit(),this.sent=!1}sendInvite(){var t=this;return(0,C.Z)(function*(){if(t.form.markAllAsTouched(),!t.form.valid||t.multiple&&!t.form.value.assets.length)return(0,T_.cB)(`Some fields are invalid. [${(0,F_.RD)(t.form).join(", ")||"visitors"}]`);const{asset_id:e,asset_name:o,company:i}=t.form.value,l=`${e}|${o}|${i}`,d=t._settings.get("visitor-invitees")||[];t._settings.saveUserSetting("visitor-invitees",[...d.filter(S=>!S.includes(e)),l]),yield t.multiple?t._bookForMany():t._bookForOne(),t.last_success=t._service.last_success,yield t.initFormZone(),t.sent=!0})()}initFormZone(){var t=this;return(0,C.Z)(function*(){yield t._org.initialised.pipe((0,f_.P)(e=>e)).toPromise(),t._service.setOptions({type:"visitor"}),t.form.patchValue({zones:[t._org.building?.id]})})()}_bookForOne(){var t=this;return(0,C.Z)(function*(){const e=t.form.value;t.form.patchValue({name:e.asset_name,attendees:[new M_.n5({name:e.asset_name,email:e.asset_id,organisation:e.company})]}),yield t._service.postForm().catch(o=>{throw(0,T_.cB)(o),o})})()}_bookForMany(){var t=this;return(0,C.Z)(function*(){const e=`grp-${(0,F_.O1)(8)}`,o=t.form.value,i=o.assets;t.last_count=i.length;for(const s of i)t.form.patchValue({...o,asset_id:s.email,asset_name:s.name,description:e,name:s.name,assets:[],attendees:[new M_.n5({name:s.name,email:s.email,organisation:s.company||s.organisation})]}),yield t._service.postForm().catch(l=>{throw(0,T_.cB)(l),l})})()}}function gt(n,t){if(1&n&&_._UZ(0,"image-carousel",25),2&n){const e=_.oxw(2);_.Q6J("images",e.space.images)}}H.\u0275fac=function(t){return new(t||H)(_.Y36(F.f),_.Y36(u.gb),_.Y36(g_.w))},H.\u0275cmp=_.Xpm({type:H,selectors:[["invite-visitor-form"]],outputs:{done:"done"},features:[_.qOj],decls:7,vars:2,consts:function(){let n,t,e,o,i,s,l,d,S,O,R,p,c_,m,J,r_,b_,h_;return n=$localize`:␟5ce047ca92a7474d89cf5b08a9913b0a93d28404␟4809719174148656467:Invite Visitor`,t=$localize`:␟207022d8123aa7a8693ff4c53cd28fea3d5bdff2␟994966389368964414: Send Visitor Invite `,e=$localize`:␟04cfb5fd033651743bc4b9408bd52ba4ee894070␟3158758063619980932:Date${"\ufffd#5\ufffd"}:START_TAG_SPAN:*${"\ufffd/#5\ufffd"}:CLOSE_TAG_SPAN:`,o=$localize`:␟eac10bd97a4b6b06a0221c661de781836b7a1e1c␟145741817832495807: Start Time${"\ufffd#11\ufffd"}:START_TAG_SPAN:*${"\ufffd/#11\ufffd"}:CLOSE_TAG_SPAN:`,i=$localize`:␟85d5c3a89bab9a7475a7db095089e161586cb7a1␟5960185837188220843:End Time${"\ufffd#16\ufffd"}:START_TAG_SPAN:*${"\ufffd/#16\ufffd"}:CLOSE_TAG_SPAN:`,s=$localize`:␟8aaaa9966e2e05be99e9b239f3b257767366b8bf␟495507623260232513:Reason for visit`,l=$localize`:␟029554be61f13a5f5f40b24ff6a076e8cf3ce232␟5030059473688609624:Building${"\ufffd#3\ufffd"}:START_TAG_SPAN:*${"\ufffd/#3\ufffd"}:CLOSE_TAG_SPAN:`,d=$localize`:␟a2a7f73f9ff1df08f9f055ead8f1b25a91c060a3␟4333771954088602266:Select building`,S=$localize`:␟cf671ca02377cd191d8b3c68c7befb5984469f16␟4464638374806874490:Visitor Name${"\ufffd#4\ufffd"}:START_TAG_SPAN:*${"\ufffd/#4\ufffd"}:CLOSE_TAG_SPAN:`,O=$localize`:␟df470c6a7cce24cc7887968eabb3ee0c1bbd3f7c␟195607823904920605: Visitor Email${"\ufffd#13\ufffd"}:START_TAG_SPAN:*${"\ufffd/#13\ufffd"}:CLOSE_TAG_SPAN:`,R=$localize`:␟66a4553914df830f0bc1dd1f0a42c57fd85864de␟6407494155279173358:A valid email is required`,p=$localize`:␟6ef0619a37140118b9e640c6cc36ee4e9fb4372a␟1826215573205981970:Company`,c_=$localize`:␟af6a082ad33b2635f588016703e454c8fb7f7e0f␟7858372686370953213: Great, thanks `,m=$localize`:␟63356c3f7d6177e1e29a68e272010f75eacb3c97␟3676425961094889121: Book Another Visitor `,J=$localize`:␟3813db8d52465bf6153aa3eab78e731607297455␟2924076986947727128: Visitor invite sent to ${"\ufffd*4:1\ufffd\ufffd#1:1\ufffd"}:START_TAG_NG_CONTAINER: ${"\ufffd0:1\ufffd"}:INTERPOLATION: ${"[\ufffd/#1:1\ufffd\ufffd/*4:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*5:2\ufffd]"}:CLOSE_TAG_NG_CONTAINER:${"\ufffd*5:2\ufffd\ufffd#1:2\ufffd"}:START_TAG_NG_CONTAINER_1: ${"\ufffd0:2\ufffd"}:INTERPOLATION_1: visitor${"\ufffd1:2\ufffd"}:INTERPOLATION_2: ${"[\ufffd/#1:1\ufffd\ufffd/*4:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*5:2\ufffd]"}:CLOSE_TAG_NG_CONTAINER:`,J=_.Zx4(J),r_=$localize`:␟38065decae495a48a4becaac6b9d99a6c157f75d␟1736021785242784159: Invite has been sent to ${"\ufffd#9\ufffd"}:START_ITALIC_TEXT:${"\ufffd*10:1\ufffd\ufffd#1:1\ufffd"}:START_TAG_NG_CONTAINER: ${"\ufffd0:1\ufffd"}:INTERPOLATION: ${"[\ufffd/#1:1\ufffd\ufffd/*10:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*11:2\ufffd]"}:CLOSE_TAG_NG_CONTAINER:${"\ufffd*11:2\ufffd\ufffd#1:2\ufffd"}:START_TAG_NG_CONTAINER_1: ${"\ufffd0:2\ufffd"}:INTERPOLATION_1: visitor${"\ufffd1:2\ufffd"}:INTERPOLATION_2: ${"[\ufffd/#1:1\ufffd\ufffd/*10:1\ufffd|\ufffd/#1:2\ufffd\ufffd/*11:2\ufffd]"}:CLOSE_TAG_NG_CONTAINER:${"\ufffd/#9\ufffd"}:CLOSE_ITALIC_TEXT: to attend ${"\ufffd0\ufffd"}:INTERPOLATION_3: from ${"\ufffd1\ufffd"}:INTERPOLATION_4: at ${"\ufffd2\ufffd"}:INTERPOLATION_5: `,r_=_.Zx4(r_),b_=$localize`:␟59c7bf21621b0422b39735ebc6af2ccb26d894e3␟6183159301460846057:Sending invitation...`,h_=$localize`:␟6e457c162b83dc787ae4a7a9bda0ca1f3b021b6c␟5958588135415093025:Visitors${"\ufffd#3\ufffd"}:START_TAG_SPAN:*${"\ufffd/#3\ufffd"}:CLOSE_TAG_SPAN:`,[[4,"ngIf","ngIfElse"],["send_state",""],["load_state",""],["multi_state",""],["class","relative flex flex-col bg-white dark:bg-neutral-700 overflow-auto max-h-full",4,"ngIf","ngIfElse"],[1,"relative","flex","flex-col","bg-white","dark:bg-neutral-700","overflow-auto","max-h-full"],[1,"w-full","border-b","border-gray-200","dark:border-neutral-500","px-4","py-2"],[1,"text-2xl"],n,["class","p-4",3,"formGroup",4,"ngIf"],[1,"sticky","p-4","border-t","bg-white","border-gray-200","dark:border-neutral-500","bottom-0"],["btn","","matRipple","","send","",1,"w-full","sm:w-auto",3,"click"],t,[1,"p-4",3,"formGroup"],["class","flex flex-col",4,"ngIf"],[1,"flex","flex-col"],["for","date"],e,["name","date","formControlName","date"],[1,"flex","items-center","space-x-2"],[1,"flex-1","flex","flex-col","w-1/3"],["for","start-time"],o,["name","start-time","formControlName","date"],["for","end-time"],i,["name","end-time","formControlName","duration",3,"time"],["for","reason"],s,["appearance","outline"],["name","reason","matInput","","formControlName","description","placeholder","e.g. Meeting Catchup"],["for","building"],l,["name","building","placeholder",d,3,"ngModel","ngModelOptions","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["for","visitor-name"],S,["matInput","","name","visitor-name","formControlName","asset_name","placeholder","Name of the visitor",3,"matAutocomplete","focus"],["name_auto","matAutocomplete"],[3,"value","click",4,"ngFor","ngForOf"],["for","visitor-email"],O,["matInput","","name","visitor-email","type","email","formControlName","asset_id","placeholder","Email of the visitor",3,"matAutocomplete","focus"],R,["email_auto","matAutocomplete"],p,["matInput","","name","company","formControlName","company","placeholder","Company of the visitor"],[3,"value","click"],[1,"flex","flex-col","leading-tight"],[1,"text-xs","opacity-60"],["sent","",1,"absolute","inset-0","bg-white","dark:bg-neutral-700","flex","flex-col","items-center","justify-center","text-center"],[1,"w-full","max-w-[32rem]","flex-1","h-1/2","space-y-2","m-8"],[1,"text-3xl"],J,[4,"ngIf"],["src","assets/icons/sent.svg",1,"mx-auto"],r_,[1,"w-full","p-2","border-t","border-gray-200","dark:border-neutral-500"],[1,"mx-auto","flex","items-center","space-x-2","w-full","max-w-[32rem]"],["btn","","matRipple","",1,"flex-1",3,"click"],c_,m,["loading","",1,"relative","flex","flex-col","items-center","justify-center","rounded","overflow-hidden","w-full","h-full","min-h-[18rem]"],[3,"diameter"],b_,[1,"flex","flex-col",3,"formGroup"],h_,["formControlName","assets",3,"guests_only"]]},template:function(t,e){if(1&t&&(_.YNc(0,st,3,4,"ng-container",0),_.YNc(1,dt,20,13,"ng-template",null,1,_.W1O),_.YNc(3,St,4,1,"ng-template",null,2,_.W1O),_.YNc(5,pt,5,2,"ng-template",null,3,_.W1O)),2&t){const o=_.MAs(2);_.Q6J("ngIf",!e.sent)("ngIfElse",o)}},dependencies:[c.sg,c.O5,r._Y,r.Fj,r.JJ,r.JL,r.On,r.sg,r.u,d_.Nt,M.KE,M.TO,v.Ou,O_.XC,g.ey,O_.ZL,i_.Q,u_.B,E_.N,Ve.E,V.gD,g.wG,c.Ov,c.uU]});const ut=function(){return{disable_pan:!0,disable_zoom:!0}};function Et(n,t){if(1&n){const e=_.EpF();_.ynx(0),_.TgZ(1,"section",2),_.YNc(2,gt,1,1,"image-carousel",3),_.TgZ(3,"button",4),_.NdJ("click",function(){_.CHM(e);const i=_.oxw();return _.KtG(i.close.emit())}),_.TgZ(4,"app-icon"),_._uU(5,"arrow_back"),_.qZA()(),_.TgZ(6,"button",5),_.NdJ("click",function(){_.CHM(e);const i=_.oxw();return _.KtG(i.toggleFav.emit())}),_.TgZ(7,"app-icon"),_._uU(8),_.qZA()()(),_.TgZ(9,"div",6)(10,"section",7)(11,"h2",8),_._uU(12),_.qZA()(),_._UZ(13,"hr"),_.TgZ(14,"section",9)(15,"h2",10),_.SDv(16,11),_.qZA(),_.TgZ(17,"div",12)(18,"app-icon"),_._uU(19,"people"),_.qZA(),_.TgZ(20,"p"),_.SDv(21,13),_.qZA()(),_.TgZ(22,"div",12)(23,"app-icon"),_._uU(24,"meeting_room"),_.qZA(),_.TgZ(25,"p"),_._uU(26),_.qZA()(),_.TgZ(27,"div",12)(28,"app-icon"),_._uU(29,"place"),_.qZA(),_.TgZ(30,"p"),_._uU(31),_.qZA()()(),_._UZ(32,"hr"),_.TgZ(33,"section",14)(34,"h2",10),_.SDv(35,15),_.qZA(),_.TgZ(36,"div",12)(37,"app-icon"),_._uU(38,"people"),_.qZA(),_.TgZ(39,"p"),_.SDv(40,16),_.qZA()(),_.TgZ(41,"div",12)(42,"app-icon"),_._uU(43,"restaurant"),_.qZA(),_.TgZ(44,"p"),_.SDv(45,17),_.qZA()(),_.TgZ(46,"div",12)(47,"app-icon"),_._uU(48,"edit"),_.qZA(),_.TgZ(49,"p"),_.SDv(50,18),_.qZA()()(),_.TgZ(51,"section",19),_._UZ(52,"interactive-map",20),_.qZA()(),_.TgZ(53,"div",21)(54,"button",22),_.NdJ("click",function(){_.CHM(e);const i=_.oxw();return i.active=!i.active,_.KtG(i.activeChange.emit(i.active))}),_.TgZ(55,"div",23)(56,"app-icon",24),_._uU(57),_.qZA(),_.TgZ(58,"p"),_._uU(59),_.qZA()()()(),_.BQk()}if(2&n){const e=_.oxw();_.xp6(1),_.ekj("sm:h-40",null==e.space.images?null:e.space.images.length)("h-64",null==e.space.images?null:e.space.images.length)("sm:h-0",!(null!=e.space.images&&e.space.images.length))("h-12",!(null!=e.space.images&&e.space.images.length))("!bg-transparent",!(null!=e.space.images&&e.space.images.length)),_.xp6(1),_.Q6J("ngIf",null==e.space.images?null:e.space.images.length),_.xp6(4),_.ekj("text-white",!e.fav)("text-blue-400",e.fav),_.xp6(2),_.Oqu(e.fav?"favorite":"favorite_border"),_.xp6(4),_.hij(" ",e.space.display_name||e.space.name," "),_.xp6(9),_.pQV(e.space.capacity),_.QtT(21),_.xp6(5),_.hij(" ",(null==e.level?null:e.level.display_name)||(null==e.level?null:e.level.name)," "),_.xp6(5),_.hij(" ",(null==e.building?null:e.building.address)||(null==e.building?null:e.building.display_name)||(null==e.building?null:e.building.name)," "),_.xp6(21),_.Q6J("src",e.map_url)("features",e.features)("options",_.DdM(27,ut)),_.xp6(2),_.ekj("inverse",e.active),_.xp6(3),_.Oqu(e.active?"remove":"add"),_.xp6(2),_.hij(" ",e.active?"Remove this room":"Add this room"," ")}}function ft(n,t){1&n&&(_.TgZ(0,"div",26)(1,"p",27),_.SDv(2,28),_.qZA()())}class K{get level(){return this._org.levelWithID([this.space?.zone.id])||this.space?.zone}get building(){return this._org.buildings.find(t=>this.space?.zone.id===t.id||this.space?.zone.parent_id===t.id)}constructor(t){this._org=t,this.fav=!1,this.active=!1,this.activeChange=new _.vpe,this.close=new _.vpe,this.toggleFav=new _.vpe,this.map_url="",this.features=[]}ngOnChanges(t){t.space&&this.space&&this._updateFeature()}_updateFeature(){this.map_url=this.level?.map_id,this.features=[{location:this.space?.map_id,content:o_.qL}]}}K.\u0275fac=function(t){return new(t||K)(_.Y36(W.w7))},K.\u0275cmp=_.Xpm({type:K,selectors:[["parking-space-details"]],inputs:{space:"space",fav:"fav",active:"active"},outputs:{activeChange:"activeChange",close:"close",toggleFav:"toggleFav"},features:[_.TTD],decls:3,vars:2,consts:function(){let n,t,e,o,i,s,l;return n=$localize`:␟4f8b2bb476981727ab34ed40fde1218361f92c45␟5028777105388019087:Details`,t=$localize`:␟2fe5caca246424da5e7fcee12a1fe341335e1286␟2731085793954892186:${"\ufffd0\ufffd"}:INTERPOLATION: People`,e=$localize`:␟45b5b90d7df8adeb648858761739fa700117c0d5␟3223773701700202859:Room Facilities`,o=$localize`:␟49db2433248cbe017b956cb5baefb0196dd788f1␟2658260878259066313:WiFi Available`,i=$localize`:␟551b6a6b5ecee7d32448ac4ef3a1fb883dd8e13c␟8309048761278776852:Catering Available`,s=$localize`:␟9169207ff2581dc7ac8b9125088b0cb3dc789824␟3473226617663475632:Whiteboard`,l=$localize`:␟2d39d1ca65d735d7f800e458ce54af6a25652395␟7182911930527299079: Select a space to view it's details `,[[4,"ngIf","ngIfElse"],["empty_state",""],["image","",1,"relative","w-full","bg-black/20"],["class","absolute inset-0",3,"images",4,"ngIf"],["icon","","matRipple","","close","",1,"absolute","top-2","left-2","bg-black/40","sm:hidden","text-white",3,"click"],["icon","","matRipple","","fav","",1,"absolute","top-2","right-2","bg-black/40",3,"click"],[1,"p-2","space-y-2","flex-1","h-1/2","overflow-auto"],["actions","",1,"z-0"],[1,"text-xl","font-medium","mb-2","mt-4"],["details","",1,"space-y-2"],[1,"text-xl","font-medium"],n,[1,"flex","items-center","space-x-2"],t,["facilities","",1,"space-y-2"],e,o,i,s,["map","",1,"w-full","mx-auto","h-64","sm:h-48","relative","border","border-gray-200","overflow-hidden","rounded"],[1,"pointer-events-none",3,"src","features","options"],[1,"p-2","border-t","border-gray-200","shadow","sm:hidden"],["btn","","matRipple","",1,"w-full",3,"click"],[1,"flex","items-center","justify-center"],[1,"text-2xl"],[1,"absolute","inset-0",3,"images"],["empty","",1,"p-16","flex","flex-col","items-center","justify-center","space-y-2"],[1,"opacity-30","text-center"],l]},template:function(t,e){if(1&t&&(_.YNc(0,Et,60,28,"ng-container",0),_.YNc(1,ft,3,0,"ng-template",null,1,_.W1O)),2&t){const o=_.MAs(2);_.Q6J("ngIf",e.space)("ngIfElse",o)}},dependencies:[c.O5,E.o,Q.p,S_.K,g.wG],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;width:30%;min-width:20rem;height:100%;min-height:65vh}"]});var A_=a(9830),L_=a(2986);function Tt(n,t){if(1&n){const e=_.EpF();_.TgZ(0,"button",37),_.NdJ("click",function(){_.CHM(e);const i=_.oxw();return _.KtG(i.close())}),_.TgZ(1,"app-icon"),_._uU(2,"keyboard_arrow_left"),_.qZA()()}}function Ot(n,t){if(1&n&&(_.TgZ(0,"mat-option",38),_._uU(1),_.qZA()),2&n){const e=t.$implicit;_.Q6J("value",e.id),_.xp6(1),_.AsE(" ",e.bld,", ",e.display_name||e.name," ")}}const a_=function(){return{standalone:!0}};function mt(n,t){if(1&n){const e=_.EpF();_.TgZ(0,"div",31)(1,"div",42),_._uU(2),_.qZA(),_.TgZ(3,"mat-checkbox",43),_.NdJ("ngModelChange",function(i){const l=_.CHM(e).$implicit,d=_.oxw(2);return _.KtG(d.toggleFeature(l,i))}),_.ALo(4,"async"),_.qZA()()}if(2&n){const e=t.$implicit,o=_.oxw(2);let i;_.xp6(2),_.Oqu(e),_.xp6(1),_.Q6J("ngModel",null==(i=_.lcZ(4,3,o.options))||null==i.features?null:i.features.includes(e))("ngModelOptions",_.DdM(5,a_))}}function It(n,t){if(1&n&&(_.TgZ(0,"section",39)(1,"h2",8),_.SDv(2,40),_.qZA(),_.YNc(3,mt,5,6,"div",41),_.ALo(4,"async"),_.qZA()),2&n){const e=_.oxw();_.xp6(3),_.Q6J("ngForOf",_.lcZ(4,1,e.features))}}function Nt(n,t){if(1&n){const e=_.EpF();_.TgZ(0,"div",44)(1,"button",45),_.NdJ("click",function(){_.CHM(e);const i=_.oxw();return _.KtG(i.close())}),_.SDv(2,46),_.qZA()()}}class L{get bld(){return this._org.building}get form(){return this._form.form}get max_duration(){return this._settings.get("app.events.max_duration")||480}constructor(t,e,o,i){this._bsheet_ref=t,this._settings=e,this._form=o,this._org=i,this.can_close=!1,this.options=this._form.options,this.levels=this._org.level_list.pipe((0,N.U)(s=>{for(const l of s){const d=this._org.buildings.find(S=>S.id===l.parent_id);l.bld=d?.display_name||d?.name||""}return s})),this.features=this._form.features,this.close=()=>this._bsheet_ref.dismiss(),this.setOptions=s=>this._form.setOptions(s),this.can_close=!!this._bsheet_ref}toggleFeature(t,e){var o=this;return(0,C.Z)(function*(){const{features:i}=yield o.options.pipe((0,L_.q)(1)).toPromise(),s=(i||[]).filter(l=>t!==l);e&&s.push(t),o.setOptions({features:s})})()}}function Rt(n,t){if(1&n&&(_.TgZ(0,"div",15),_._uU(1),_.qZA()),2&n){const e=_.oxw();_.xp6(1),_.hij(" ",e.location," ")}}function Ct(n,t){if(1&n){const e=_.EpF();_.TgZ(0,"div",16)(1,"p"),_._uU(2),_.qZA(),_.TgZ(3,"button",17),_.NdJ("click",function(){const s=_.CHM(e).$implicit,l=_.oxw();return _.KtG(l.removeFeature(s))}),_.TgZ(4,"app-icon"),_._uU(5,"close"),_.qZA()()()}if(2&n){const e=t.$implicit;_.xp6(2),_.Oqu(e)}}L.\u0275fac=function(t){return new(t||L)(_.Y36(l_.oL,8),_.Y36(u.gb),_.Y36(F.f),_.Y36(W.w7))},L.\u0275cmp=_.Xpm({type:L,selectors:[["parking-space-filters"]],decls:46,vars:26,consts:function(){let n,t,e,o,i,s,l,d,S,O,R;return n=$localize`:␟36173168a4643aa78634e9242a63f3a40862f166␟7173310086383878456:Space Filters`,t=$localize`:␟4f8b2bb476981727ab34ed40fde1218361f92c45␟5028777105388019087:Details`,e=$localize`:␟ed31c09fd77c36238c13d83635f3fe5294c733d2␟471816275243265264:Location`,o=$localize`:␟04cfb5fd033651743bc4b9408bd52ba4ee894070␟3158758063619980932:Date${"\ufffd#21\ufffd"}:START_TAG_SPAN:*${"\ufffd/#21\ufffd"}:CLOSE_TAG_SPAN:`,i=$localize`:␟e06c2195d60fdee7b259bd3ff16eb3d594c42b2b␟608708688936992021: Date and time must be in the future `,s=$localize`:␟34a7595cdc15925514038224946986bfd90dc0ed␟3039786638368843634:Start Time${"\ufffd#28\ufffd"}:START_TAG_SPAN:*${"\ufffd/#28\ufffd"}:CLOSE_TAG_SPAN:`,l=$localize`:␟85d5c3a89bab9a7475a7db095089e161586cb7a1␟5960185837188220843:End Time${"\ufffd#33\ufffd"}:START_TAG_SPAN:*${"\ufffd/#33\ufffd"}:CLOSE_TAG_SPAN:`,d=$localize`:␟62ab0c2bf8d16ce7baf2c8b1da2c561d99522256␟4158925728608139729:Favourites`,S=$localize`:␟ac378c0b437746af89a84b4909ab5b83c5ff55a3␟165958440274527719: Only show favourite spaces `,O=$localize`:␟bf10c600bd861cfd0a23f4759562ee0ae9dbe19f␟1551920764795208868:Facilities`,R=$localize`:␟c17e2cc448524a39eb83b2937cea3235a2e8bf37␟2296888311792137027: Apply Filters `,[[1,"flex","items-center","border-b","border-gray-200","pb-2","sm:hidden"],[1,"flex-1","pl-2"],["icon","","matRipple","","close","",3,"click",4,"ngIf"],[1,"font-medium","flex-2","text-center"],n,[1,"flex-1"],[1,"max-h-[65vh]","p-2","overflow-y-auto","overflow-x-hidden","divide-y","divide-gray-200","w-full","max-w-[100vw]",3,"formGroup"],["details",""],[1,"text-lg","font-medium"],t,[1,"flex-1","min-w-[256px]","flex","flex-col"],["for","location"],e,["appearance","outline",1,"w-full"],["name","location",3,"ngModel","ngModelOptions","placeholder","multiple","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"flex-1","min-w-[256px]"],["for","date"],o,["name","date","formControlName","date"],i,[1,"flex","items-center","space-x-2"],[1,"flex-1","w-1/3"],["for","start-time"],s,["name","start-time",3,"ngModel","ngModelOptions","ngModelChange"],["for","end-time"],l,["name","end-time","formControlName","duration",3,"time","max"],["favs","",1,"space-y-2","pb-4"],d,[1,"flex","items-center"],["for","fav",1,"flex-1","w-1/2"],S,["name","fav",3,"ngModel","ngModelOptions","ngModelChange"],["features","","class","space-y-2",4,"ngIf"],["class","px-2 pt-2 w-full border-t border-gray-200",4,"ngIf"],["icon","","matRipple","","close","",3,"click"],[3,"value"],["features","",1,"space-y-2"],O,["class","flex items-center",4,"ngFor","ngForOf"],["for","feat",1,"flex-1","w-1/2"],["name","feat",3,"ngModel","ngModelOptions","ngModelChange"],[1,"px-2","pt-2","w-full","border-t","border-gray-200"],["btn","","matRipple","","close","",1,"w-full",3,"click"],R]},template:function(t,e){if(1&t&&(_.TgZ(0,"div",0)(1,"div",1),_.YNc(2,Tt,3,0,"button",2),_.qZA(),_.TgZ(3,"h3",3),_.SDv(4,4),_.qZA(),_._UZ(5,"div",5),_.qZA(),_.TgZ(6,"form",6)(7,"section",7)(8,"h2",8),_.SDv(9,9),_.qZA(),_.TgZ(10,"div",10)(11,"label",11),_.SDv(12,12),_.qZA(),_.TgZ(13,"mat-form-field",13)(14,"mat-select",14),_.NdJ("ngModelChange",function(i){return e.setOptions({zone_ids:i})}),_.ALo(15,"async"),_.YNc(16,Ot,2,3,"mat-option",15),_.ALo(17,"async"),_.qZA()()(),_.TgZ(18,"div",16)(19,"label",17),_.tHW(20,18),_._UZ(21,"span"),_.N_p(),_.qZA(),_.TgZ(22,"a-date-field",19),_.SDv(23,20),_.qZA()(),_.TgZ(24,"div",21)(25,"div",22)(26,"label",23),_.tHW(27,24),_._UZ(28,"span"),_.N_p(),_.qZA(),_.TgZ(29,"a-time-field",25),_.NdJ("ngModelChange",function(i){return e.form.patchValue({date:i})}),_.qZA()(),_.TgZ(30,"div",22)(31,"label",26),_.tHW(32,27),_._UZ(33,"span"),_.N_p(),_.qZA(),_._UZ(34,"a-duration-field",28),_.qZA()()(),_.TgZ(35,"section",29)(36,"h2",8),_.SDv(37,30),_.qZA(),_.TgZ(38,"div",31)(39,"div",32),_.SDv(40,33),_.qZA(),_.TgZ(41,"mat-checkbox",34),_.NdJ("ngModelChange",function(i){return e.setOptions({show_fav:i})}),_.ALo(42,"async"),_.qZA()()(),_.YNc(43,It,5,3,"section",35),_.ALo(44,"async"),_.qZA(),_.YNc(45,Nt,3,0,"div",36)),2&t){let o,i,s;_.xp6(2),_.Q6J("ngIf",e.can_close),_.xp6(4),_.Q6J("formGroup",e.form),_.xp6(8),_.Q6J("ngModel",null==(o=_.lcZ(15,15,e.options))?null:o.zone_ids)("ngModelOptions",_.DdM(23,a_))("placeholder",(null==e.bld?null:e.bld.display_name)||(null==e.bld?null:e.bld.name))("multiple",!0),_.xp6(2),_.Q6J("ngForOf",_.lcZ(17,17,e.levels)),_.xp6(13),_.Q6J("ngModel",e.form.value.date)("ngModelOptions",_.DdM(24,a_)),_.xp6(5),_.Q6J("time",null==e.form||null==e.form.value?null:e.form.value.date)("max",e.max_duration),_.xp6(7),_.Q6J("ngModel",null==(i=_.lcZ(42,19,e.options))?null:i.show_fav)("ngModelOptions",_.DdM(25,a_)),_.xp6(2),_.Q6J("ngIf",null==(s=_.lcZ(44,21,e.features))?null:s.length),_.xp6(2),_.Q6J("ngIf",e.can_close)}},dependencies:[c.sg,c.O5,r._Y,r.JJ,r.JL,r.On,r.sg,r.u,M.KE,n_.oG,g.ey,i_.Q,u_.B,E_.N,E.o,V.gD,g.wG,c.Ov],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;width:100%;max-width:100vw}"]});class G extends u.cx{get start(){return this._event_form.form.value.date}get end(){const{date:t,duration:e}=this._event_form.form.value;return t+60*e*1e3}constructor(t,e,o){super(),this._bsheet=t,this._event_form=e,this._org=o,this.view="list",this.viewChange=new _.vpe,this.options=this._event_form.options,this.location="",this.editFilters=()=>this._bsheet.open(L)}ngOnInit(){this.subscription("opts",this.options.subscribe(({zone_ids:t})=>this._updateLocation(t)))}removeFeature(t){var e=this;return(0,C.Z)(function*(){const o=yield e._event_form.options.pipe((0,L_.q)(1)).toPromise();e._event_form.setOptions({...o,features:(o.features||[]).filter(i=>i!==t)})})()}_updateLocation(t=[]){const o=this._org.levelWithID(t)||this._org.building;this.location=o?.display_name||o?.name||""}}function Ft(n,t){1&n&&(_.TgZ(0,"div",22)(1,"app-icon"),_._uU(2,"done"),_.qZA()())}function Mt(n,t){if(1&n&&_._UZ(0,"img",23),2&n){const e=_.oxw().$implicit;_.Q6J("src",e.images[0],_.LSH)}}function At(n,t){1&n&&_._UZ(0,"img",24)}function Lt(n,t){if(1&n){const e=_.EpF();_.TgZ(0,"li",10)(1,"button",11),_.NdJ("click",function(){const s=_.CHM(e).$implicit,l=_.oxw(3);return _.KtG(l.selectSpace(s))}),_.TgZ(2,"div",12),_.YNc(3,Ft,3,0,"div",13),_.YNc(4,Mt,1,1,"img",14),_.YNc(5,At,1,0,"ng-template",null,15,_.W1O),_.qZA(),_.TgZ(7,"div",16)(8,"div",17),_._uU(9),_.qZA(),_.TgZ(10,"div",18)(11,"app-icon",19),_._uU(12,"place"),_.qZA(),_.TgZ(13,"p"),_._uU(14),_.qZA()(),_.TgZ(15,"div",18)(16,"app-icon",19),_._uU(17,"people"),_.qZA(),_.TgZ(18,"p"),_.SDv(19,20),_.qZA()()()(),_.TgZ(20,"button",21),_.NdJ("click",function(){const s=_.CHM(e).$implicit,l=_.oxw(3);return _.KtG(l.toggleFav.emit(s))}),_.TgZ(21,"app-icon"),_._uU(22),_.qZA()()()}if(2&n){const e=t.$implicit,o=_.MAs(6),i=_.oxw(3);_.ekj("!border-blue-400",i.active===e.id),_.xp6(3),_.Q6J("ngIf",i.selected.includes(e.id)),_.xp6(1),_.Q6J("ngIf",null==e.images?null:e.images.length)("ngIfElse",o),_.xp6(5),_.hij(" ",e.name||"Meeting Space"," "),_.xp6(5),_.hij(" ",e.location||(null==e.level?null:e.level.display_name)||(null==e.level?null:e.level.name)," "),_.xp6(5),_.pQV(e.capacity<1?2:e.capacity),_.QtT(19),_.xp6(1),_.ekj("text-blue-400",i.isFavourite(e.id)),_.xp6(2),_.Oqu(i.isFavourite(e.id)?"favorite":"favorite_border")}}function vt(n,t){if(1&n&&(_.TgZ(0,"ul",8),_.YNc(1,Lt,23,11,"li",9),_.ALo(2,"async"),_.qZA()),2&n){const e=_.oxw(2);_.xp6(1),_.Q6J("ngForOf",_.lcZ(2,1,e.assets))}}function Dt(n,t){if(1&n&&(_.ynx(0),_.YNc(1,vt,3,3,"ul",7),_.ALo(2,"async"),_.BQk()),2&n){const e=_.oxw(),o=_.MAs(8);let i;_.xp6(1),_.Q6J("ngIf",null==(i=_.lcZ(2,2,e.assets))?null:i.length)("ngIfElse",o)}}function bt(n,t){1&n&&(_.TgZ(0,"div",25)(1,"p",26),_.SDv(2,27),_.qZA()())}function ht(n,t){1&n&&(_.TgZ(0,"div",28),_._UZ(1,"mat-spinner",29),_.TgZ(2,"p",30),_.SDv(3,31),_.qZA()()),2&n&&(_.xp6(1),_.Q6J("diameter",32))}G.\u0275fac=function(t){return new(t||G)(_.Y36(l_.ch),_.Y36(A_.MH),_.Y36(W.w7))},G.\u0275cmp=_.Xpm({type:G,selectors:[["parking-space-filters-display"]],inputs:{view:"view"},outputs:{viewChange:"viewChange"},features:[_.qOj],decls:22,vars:23,consts:function(){let n,t,e,o;return n=$localize`:␟19eaa5cd51d70d9ea957eecac78cfd811e9b93d8␟5208858215712453646: Filters `,t=$localize`:␟992a9a6a193a56c5b8846dc972c5e1977ee5f1aa␟8553228906889869186: Map `,e=$localize`:␟4b286e90831dd637c5cd3eb20544664ee7112669␟7787942140742011951: List `,o=$localize`:␟e1bcafb95323d9492bfdfa190a129131e6255cdb␟7211304359187007121: Min. ${"\ufffd0\ufffd"}:INTERPOLATION: People `,[["actions","",1,"sm:hidden","space-x-2","flex","items-center","p-2"],["matRipple","","filters","",1,"flex-1","w-1/2",3,"click"],n,[1,"flex","items-center"],["matRipple","","map","",1,"rounded-l","rounded-r-none",3,"click"],t,["matRipple","","list","",1,"rounded-r","rounded-l-none",3,"click"],e,["filters","",1,"flex","items-center","flex-wrap","p-2"],["filter-item","","zone","","class","dark:border-neutral-500",4,"ngIf"],["filter-item","","date","",1,"dark:border-neutral-500"],["filter-item","","time","",1,"dark:border-neutral-500"],["filter-item","","count","",1,"dark:border-neutral-500"],o,["filter-item","",4,"ngFor","ngForOf"],["filter-item","","zone","",1,"dark:border-neutral-500"],["filter-item",""],["icon","","matRipple","",1,"-mr-4","dark:border-neutral-500",3,"click"]]},template:function(t,e){if(1&t&&(_.TgZ(0,"section",0)(1,"button",1),_.NdJ("click",function(){return e.editFilters()}),_.SDv(2,2),_.qZA(),_.TgZ(3,"div",3)(4,"button",4),_.NdJ("click",function(){return e.view="map",e.viewChange.emit(e.view)}),_.SDv(5,5),_.qZA(),_.TgZ(6,"button",6),_.NdJ("click",function(){return e.view="list",e.viewChange.emit(e.view)}),_.SDv(7,7),_.qZA()()(),_.TgZ(8,"section",8),_.YNc(9,Rt,2,1,"div",9),_.TgZ(10,"div",10),_._uU(11),_.ALo(12,"date"),_.qZA(),_.TgZ(13,"div",11),_._uU(14),_.ALo(15,"date"),_.ALo(16,"date"),_.qZA(),_.TgZ(17,"div",12),_.SDv(18,13),_.ALo(19,"async"),_.qZA(),_.YNc(20,Ct,6,1,"div",14),_.ALo(21,"async"),_.qZA()),2&t){let o,i;_.xp6(4),_.ekj("inverse","map"!==e.view),_.xp6(2),_.ekj("inverse","list"!==e.view),_.xp6(3),_.Q6J("ngIf",e.location),_.xp6(2),_.hij(" ",_.xi3(12,10,e.start,"mediumDate")," "),_.xp6(3),_.AsE(" ",_.xi3(15,13,e.start,"shortTime")," \u2014 ",_.xi3(16,16,e.end,"shortTime")," "),_.xp6(5),_.pQV((null==(o=_.lcZ(19,19,e.options))?null:o.capcaity)||2),_.QtT(18),_.xp6(1),_.Q6J("ngForOf",null==(i=_.lcZ(21,21,e.options))?null:i.features)}},dependencies:[c.sg,c.O5,E.o,g.wG,c.Ov,c.uU],styles:["[filter-item][_ngcontent-%COMP%]{display:flex;align-items:center;padding:0 1rem;height:2rem;font-size:.875rem;border:1px solid rgba(0,0,0,.2);border-radius:1.25rem;margin-right:.5rem;margin-bottom:.5rem}[filter-item][_ngcontent-%COMP%]:hover{background:rgba(0,0,0,.1)}[filter-item][_ngcontent-%COMP%] > *[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-left:.5rem}"]});class ${constructor(t){this._form=t,this.active="",this.selected="",this.favorites=[],this.onSelect=new _.vpe,this.toggleFav=new _.vpe,this.assets=(0,C_.aj)([this._form.options,this._form.available_resources]).pipe((0,N.U)(([{show_fav:e},o])=>o.filter(i=>!e||this.isFavourite(i.id)))),this.loading=this._form.loading}isFavourite(t){return this.favorites.includes(t)}selectSpace(t){this.onSelect.emit(t)}}function Ut(n,t){1&n&&_._UZ(0,"div",16)}function kt(n,t){1&n&&(_.TgZ(0,"app-icon",17),_._uU(1," done "),_.qZA())}$.\u0275fac=function(t){return new(t||$)(_.Y36(F.f))},$.\u0275cmp=_.Xpm({type:$,selectors:[["parking-space-list"]],inputs:{active:"active",selected:"selected",favorites:"favorites"},outputs:{onSelect:"onSelect",toggleFav:"toggleFav"},decls:11,vars:7,consts:function(){let n,t,e,o,i;return n=$localize`:␟80ed5b776a26a78099e230e0e89d96c33ba44e24␟5968132631442328843:Results`,t=$localize`:␟dd662afda8b27e3c6818b705321ddcc36bd571c0␟4264834071624535187: ${"\ufffd0\ufffd"}:INTERPOLATION: result(s) found `,e=$localize`:␟08719ea79f574b595da7d187fda2fa8c491b5de7␟4552898751936658514: ${"\ufffd0\ufffd"}:INTERPOLATION: People `,o=$localize`:␟027c29534f5dc45741b226edfebb3f7f578384b0␟3831747985282777621: No available spaces for selected time and/or filters `,i=$localize`:␟8dad32dda6491a1051df9156e98031c0e634b413␟126579492602011343:Finding available spaces...`,[[1,"font-bold"],n,["count","",1,"text-sm","opacity-60","mb-4"],t,[4,"ngIf","ngIfElse"],["empty_state",""],["load_state",""],["class","list-style-none space-y-2",4,"ngIf","ngIfElse"],[1,"list-style-none","space-y-2"],["space","","class","relative p-2 rounded-lg w-full shadow border bg-white dark:bg-neutral-700 border-gray-200 dark:border-neutral-500",3,"!border-blue-400",4,"ngFor","ngForOf"],["space","",1,"relative","p-2","rounded-lg","w-full","shadow","border","bg-white","dark:bg-neutral-700","border-gray-200","dark:border-neutral-500"],["matRipple","","select","",1,"w-full","h-full","flex","items-center",3,"click"],[1,"relative","w-20","h-20","rounded-xl","bg-black/20","dark:bg-white/30","mr-4","overflow-hidden","flex","items-center","justify-center"],["class","absolute top-1 left-1 border border-white bg-black/50 rounded-full h-6 w-6 flex items-center justify-center text-white",4,"ngIf"],["class","object-cover h-full",3,"src",4,"ngIf","ngIfElse"],["placeholder",""],[1,"space-y-2"],[1,"font-medium","truncate","mr-10"],[1,"flex","items-center","text-sm","space-x-2"],[1,"text-blue-500"],e,["icon","","matRipple","","fav","",1,"absolute","top-1","right-1",3,"click"],[1,"absolute","top-1","left-1","border","border-white","bg-black/50","rounded-full","h-6","w-6","flex","items-center","justify-center","text-white"],[1,"object-cover","h-full",3,"src"],["src","assets/icons/car-placeholder.svg",1,"m-auto"],["empty","",1,"p-16","flex","flex-col","items-center","justify-center","space-y-2"],[1,"opacity-30","text-center"],o,["loading","",1,"p-16","flex","flex-col","items-center","justify-center","space-y-2"],[3,"diameter"],[1,"opacity-30"],i]},template:function(t,e){if(1&t&&(_.TgZ(0,"h3",0),_.SDv(1,1),_.qZA(),_.TgZ(2,"p",2),_.SDv(3,3),_.ALo(4,"async"),_.qZA(),_.YNc(5,Dt,3,4,"ng-container",4),_.ALo(6,"async"),_.YNc(7,bt,3,0,"ng-template",null,5,_.W1O),_.YNc(9,ht,4,1,"ng-template",null,6,_.W1O)),2&t){const o=_.MAs(10);let i;_.xp6(4),_.pQV((null==(i=_.lcZ(4,3,e.assets))?null:i.length)||0),_.QtT(3),_.xp6(1),_.Q6J("ngIf",!_.lcZ(6,5,e.loading))("ngIfElse",o)}},dependencies:[c.sg,c.O5,v.Ou,E.o,g.wG,c.Ov],styles:["[_nghost-%COMP%]{width:100%;height:100%;padding:.5rem;overflow:auto}"]});class B{get selected(){return!0===this._data.selected}constructor(t){this._data=t}}B.\u0275fac=function(t){return new(t||B)(_.Y36(o_.ui))},B.\u0275cmp=_.Xpm({type:B,selectors:[["parking-space-location-pin"]],decls:17,vars:2,consts:[[1,"absolute","bottom-0","left-1/2","-translate-x-1/2"],["width","66","height","80","viewBox","0 0 66 80","fill","none","xmlns","http://www.w3.org/2000/svg"],["filter","url(#filter0_d_1065_10313)"],["d","M19.724 53.0408C25.0871 60.3435 30.5582 65.8583 31.0184 66.3178C31.4558 66.755 32.0489 67.0007 32.6674 67.0008H32.6678C33.2863 67.0007 33.8795 66.755 34.3169 66.3178C34.7771 65.8583 40.2481 60.3435 45.6112 53.0408C48.2928 49.3894 50.963 45.2701 52.9663 41.0957C54.9629 36.935 56.3331 32.6459 56.3342 28.6724C56.364 25.5564 55.7725 22.4657 54.5941 19.5809C53.415 16.6946 51.6722 14.0724 49.4675 11.8677C47.2629 9.66308 44.6407 7.92024 41.7544 6.74121C38.8711 5.5634 35.782 4.97184 32.6676 5.00103C29.5533 4.97184 26.4642 5.5634 23.5809 6.74121C20.6946 7.92024 18.0724 9.66308 15.8677 11.8677C13.6631 14.0724 11.9202 16.6946 10.7412 19.5809C9.56278 22.4657 8.97122 25.5565 9.00108 28.6726C9.0022 32.646 10.3724 36.9351 12.369 41.0957C14.3723 45.2701 17.0425 49.3894 19.724 53.0408Z","fill","#309251","stroke","#0B421D","stroke-width","2"],["id","filter0_d_1065_10313","x","0","y","0","width","65.3353","height","80.001","filterUnits","userSpaceOnUse","color-interpolation-filters","sRGB"],["flood-opacity","0","result","BackgroundImageFix"],["in","SourceAlpha","type","matrix","values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0","result","hardAlpha"],["dy","4"],["stdDeviation","4"],["in2","hardAlpha","operator","out"],["type","matrix","values","0 0 0 0 0.0196078 0 0 0 0 0.109804 0 0 0 0 0.172549 0 0 0 0.2 0"],["mode","normal","in2","BackgroundImageFix","result","effect1_dropShadow_1065_10313"],["mode","normal","in","SourceGraphic","in2","effect1_dropShadow_1065_10313","result","shape"],[1,"absolute","top-0","left-0","w-full","h-3/4","flex","items-center","justify-center"],["class","relative z-10 h-4 w-4 rounded-full bg-white border-2 border-[#0B421D]",4,"ngIf"],["class","relative text-white z-10 text-2xl",4,"ngIf"],[1,"relative","z-10","h-4","w-4","rounded-full","bg-white","border-2","border-[#0B421D]"],[1,"relative","text-white","z-10","text-2xl"]],template:function(t,e){1&t&&(_.TgZ(0,"div",0),_.O4$(),_.TgZ(1,"svg",1)(2,"g",2),_._UZ(3,"path",3),_.qZA(),_.TgZ(4,"defs")(5,"filter",4),_._UZ(6,"feFlood",5)(7,"feColorMatrix",6)(8,"feOffset",7)(9,"feGaussianBlur",8)(10,"feComposite",9)(11,"feColorMatrix",10)(12,"feBlend",11)(13,"feBlend",12),_.qZA()()(),_.kcU(),_.TgZ(14,"div",13),_.YNc(15,Ut,1,0,"div",14),_.YNc(16,kt,2,0,"app-icon",15),_.qZA()()),2&t&&(_.xp6(15),_.Q6J("ngIf",!e.selected),_.xp6(1),_.Q6J("ngIf",e.selected))},dependencies:[c.O5,E.o],encapsulation:2});var xt=a(13);function Pt(n,t){if(1&n){const e=_.EpF();_.TgZ(0,"i-map",10),_.NdJ("zoomChange",function(i){_.CHM(e);const s=_.oxw();return _.KtG(s.zoom=i)})("centerChange",function(i){_.CHM(e);const s=_.oxw();return _.KtG(s.center=i)}),_.ALo(1,"async"),_.ALo(2,"async"),_.qZA()}if(2&n){const e=_.oxw();_.Q6J("src",e.map_url)("features",_.lcZ(1,5,e.features))("actions",_.lcZ(2,7,e.actions))("zoom",e.zoom)("center",e.center)}}function Zt(n,t){if(1&n&&(_.TgZ(0,"mat-option",11),_._uU(1),_.qZA()),2&n){const e=t.$implicit;_.Q6J("value",e),_.xp6(1),_.hij(" ",e.display_name||e.name," ")}}class y extends u.cx{get map_url(){return this.level?.map_id||""}constructor(t){super(),this._event_form=t,this.selected=[],this.is_displayed=!1,this.onSelect=new _.vpe,this.zoom=1,this.center={x:.5,y:.5},this._seletedSpace=e=>()=>this.onSelect.emit(e),this.level=null,this.levels=this._event_form.available_spaces.pipe((0,N.U)(e=>(0,u.Tw)(e.map(({level:o})=>o)))),this.features=this._event_form.available_spaces.pipe((0,xt.b)(1e3),(0,N.U)(e=>e.map(o=>({location:o.map_id,content:B,data:{...o,selected:this.selected.includes(o.id)}})))),this.actions=this._event_form.available_spaces.pipe((0,N.U)(e=>e.map(o=>({id:o.map_id,action:["touchend","mouseup"],callback:this._seletedSpace(o)}))))}ngOnInit(){this.subscription("spaces",this._event_form.available_spaces.subscribe(t=>{!this.level&&t.length&&(this.level=t[0].level)}))}setZoom(t){this.zoom=Math.max(.5,Math.min(10,t))}resetMap(){this.zoom=1,this.center={x:.5,y:.5}}}function Kt(n,t){if(1&n){const e=_.EpF();_.TgZ(0,"parking-space-list",25),_.NdJ("toggleFav",function(i){_.CHM(e);const s=_.oxw();return _.KtG(s.toggleFavourite(i))})("onSelect",function(i){_.CHM(e);const s=_.oxw();return _.KtG(s.displayed=i)}),_.qZA()}if(2&n){const e=_.oxw();_.Q6J("active",null==e.displayed?null:e.displayed.id)("selected",e.selected_ids)("favorites",e.favorites)}}function Gt(n,t){if(1&n){const e=_.EpF();_.TgZ(0,"button",26),_.NdJ("click",function(){_.CHM(e);const i=_.oxw();return _.KtG(i.displayed=null)}),_.SDv(1,27),_.qZA()}}function $t(n,t){if(1&n){const e=_.EpF();_.TgZ(0,"parking-space-map",28),_.NdJ("onSelect",function(i){_.CHM(e);const s=_.oxw();return _.KtG(s.displayed=i)}),_.qZA()}if(2&n){const e=_.oxw();_.Q6J("selected",e.selected_ids)("is_displayed",!!e.displayed)}}y.\u0275fac=function(t){return new(t||y)(_.Y36(A_.MH))},y.\u0275cmp=_.Xpm({type:y,selectors:[["parking-space-map"]],inputs:{selected:"selected",is_displayed:"is_displayed"},outputs:{onSelect:"onSelect"},features:[_.qOj],decls:18,vars:5,consts:[[3,"src","features","actions","zoom","center","zoomChange","centerChange",4,"ngIf"],[1,"absolute","inset-x-0","top-0","bg-white","p-2","border-b","border-gray-200"],["levels","","appearance","outline",1,"w-full","h-[3.25rem]"],[3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["zoom","",1,"absolute","bottom-2","right-2","rounded-lg","border","border-gray-200","bg-white","flex","flex-col","overflow-hidden"],["zoom-in","","icon","","matRipple","",3,"click"],[1,"border-t","border-gray-200","w-full"],["zoom-out","","icon","","matRipple","",3,"click"],["reset","","icon","","matRipple","",3,"click"],[3,"src","features","actions","zoom","center","zoomChange","centerChange"],[3,"value"]],template:function(t,e){1&t&&(_.YNc(0,Pt,3,9,"i-map",0),_.TgZ(1,"div",1)(2,"mat-form-field",2)(3,"mat-select",3),_.NdJ("ngModelChange",function(i){return e.level=i}),_.YNc(4,Zt,2,2,"mat-option",4),_.ALo(5,"async"),_.qZA()()(),_.TgZ(6,"div",5)(7,"button",6),_.NdJ("click",function(){return e.setZoom(1.1*e.zoom)}),_.TgZ(8,"app-icon"),_._uU(9,"zoom_in"),_.qZA()(),_._UZ(10,"div",7),_.TgZ(11,"button",8),_.NdJ("click",function(){return e.setZoom(e.zoom*(1/1.1))}),_.TgZ(12,"app-icon"),_._uU(13,"zoom_out"),_.qZA()(),_._UZ(14,"div",7),_.TgZ(15,"button",9),_.NdJ("click",function(){return e.resetMap()}),_.TgZ(16,"app-icon"),_._uU(17,"refresh"),_.qZA()()()),2&t&&(_.Q6J("ngIf",!e.is_displayed),_.xp6(3),_.Q6J("ngModel",e.level),_.xp6(1),_.Q6J("ngForOf",_.lcZ(5,3,e.levels)))},dependencies:[c.sg,c.O5,r.JJ,r.On,M.KE,g.ey,E.o,Q.p,V.gD,g.wG,c.Ov],styles:["[_nghost-%COMP%]{position:relative;background:rgba(0,0,0,.05);padding-top:4rem}button[_ngcontent-%COMP%]{border-radius:0}"]});const __="favourite_parking_spaces";class w{get selected_ids(){return this.selected.map(t=>t.id).join(",")}get favorites(){return this._settings.get(__)||[]}constructor(t,e,o,i){this._dialog_ref=t,this._settings=e,this._event_form=o,this._data=i,this.selected=[],this.view="list",this.selected=[...i.spaces||[]],this._event_form.setOptions(i.options)}isSelected(t){return t&&this.selected_ids.includes(t)}setSelected(t,e){const o=this.selected.filter(i=>i.id!==t.id);e&&o.push(t),this.selected=o,!this._data.options.group&&e&&this._dialog_ref.close([t])}toggleFavourite(t){const e=this.favorites;e.includes(t.id)?this._settings.saveUserSetting(__,e.filter(i=>i!==t.id)):this._settings.saveUserSetting(__,[...e,t.id])}}w.\u0275fac=function(t){return new(t||w)(_.Y36(T.so),_.Y36(u.gb),_.Y36(F.f),_.Y36(T.WI))},w.\u0275cmp=_.Xpm({type:w,selectors:[["parking-space-select-modal"]],decls:34,vars:21,consts:function(){let n,t,e,o,i;return n=$localize`:␟8db1ccf77dfb75785bcf8e9090ad65ea6ab69884␟6275162452894389177:Find Parking Space`,t=$localize`:␟30d3439b0e0095fe69503245f3bd7a2e9498be7c␟8443571736703532556: View List `,e=$localize`:␟18843b85d1a4f17fefafd07bc5cde636dca44295␟819716823718458903:Back to form`,o=$localize`:␟f5e618f8255889ca7743db771c50b6181b8eb362␟7685760017883569970: ${"\ufffd0\ufffd"}:INTERPOLATION: bay(s) added `,i=$localize`:␟ccda1d41ca79703a85a3a598c1d97e040a32b766␟874721418273731876: Back `,[[1,"w-[100vw]","h-[100vh]","sm:relative","sm:w-auto","sm:h-auto","flex","flex-col","bg-white","dark:bg-neutral-700"],[1,"flex","items-center","space-x-4","w-full"],["icon","","matRipple","","mat-dialog-close","",1,"bg-black/20"],n,[1,"flex-1","flex","items-center","divide-x","divide-gray-200","dark:divide-neutral-500","min-h-[65vh]","h-[65vh]","sm:max-h-[65vh]","sm:max-w-[95vw]","w-full","overflow-hidden"],[1,"h-full","hidden","sm:flex","max-w-[20rem]","sm:h-[65vh]","sm:max-h-full"],[1,"flex","flex-col","items-center","flex-1","w-1/2","h-full","sm:h-[65vh]"],[1,"w-full","border-b","border-gray-200","dark:border-neutral-500",3,"view","viewChange"],["class","flex-1 h-1/2 bg-black/5 dark:bg-white/10",3,"active","selected","favorites","toggleFav","onSelect",4,"ngIf","ngIfElse"],[1,"h-full","w-full","sm:h-[65vh]","absolute","sm:relative","sm:flex","sm:max-w-[20rem]","z-20","bg-white","dark:bg-neutral-600","block",3,"space","active","fav","activeChange","toggleFav","close"],[1,"flex","sm:hidden","flex-col-reverse","items-center","justify-end","p-2","border-t","border-gray-200","dark:border-neutral-500","w-full"],["btn","","matRipple","","return","","class","inverse sm:hidden w-full",3,"click",4,"ngIf"],["btn","","matRipple","","save","",1,"w-full","sm:w-32","sm:mb-0",3,"mat-dialog-close"],t,[1,"hidden","sm:flex","items-center","justify-between","p-2","border-t","border-gray-200","dark:border-neutral-500","w-full"],["btn","","matRipple","",1,"clear","text-primary",3,"mat-dialog-close"],[1,"flex","items-center"],[1,"text-xl"],[1,"mr-1","underline"],e,[1,"opacity-60","text-sm"],o,["btn","","matRipple","",3,"disabled","click"],[1,"mr-1"],["map_view",""],[1,"flex-1","h-1/2","bg-black/5","dark:bg-white/10",3,"active","selected","favorites","toggleFav","onSelect"],["btn","","matRipple","","return","",1,"inverse","sm:hidden","w-full",3,"click"],i,[1,"flex-1","h-1/2","w-full",3,"selected","is_displayed","onSelect"]]},template:function(t,e){if(1&t&&(_.TgZ(0,"div",0)(1,"header",1)(2,"button",2)(3,"app-icon"),_._uU(4,"close"),_.qZA()(),_.TgZ(5,"h3"),_.SDv(6,3),_.qZA()(),_.TgZ(7,"main",4),_._UZ(8,"parking-space-filters",5),_.TgZ(9,"div",6)(10,"parking-space-filters-display",7),_.NdJ("viewChange",function(i){return e.view=i}),_.qZA(),_.YNc(11,Kt,1,3,"parking-space-list",8),_.qZA(),_.TgZ(12,"parking-space-details",9),_.NdJ("activeChange",function(i){return e.setSelected(e.displayed,i)})("toggleFav",function(){return e.toggleFavourite(e.displayed)})("close",function(){return e.displayed=null}),_.qZA()(),_.TgZ(13,"footer",10),_.YNc(14,Gt,2,0,"button",11),_.TgZ(15,"button",12),_.SDv(16,13),_.qZA()(),_.TgZ(17,"footer",14)(18,"button",15)(19,"div",16)(20,"app-icon",17),_._uU(21,"arrow_back"),_.qZA(),_.TgZ(22,"div",18),_.SDv(23,19),_.qZA()()(),_.TgZ(24,"p",20),_.SDv(25,21),_.qZA(),_.TgZ(26,"button",22),_.NdJ("click",function(){return e.setSelected(e.displayed,!e.isSelected(null==e.displayed?null:e.displayed.id))}),_.TgZ(27,"div",16)(28,"app-icon",17),_._uU(29),_.qZA(),_.TgZ(30,"div",23),_._uU(31),_.qZA()()()()(),_.YNc(32,$t,1,2,"ng-template",null,24,_.W1O)),2&t){const o=_.MAs(33);_.xp6(10),_.Q6J("view",e.view),_.xp6(1),_.Q6J("ngIf","list"===e.view)("ngIfElse",o),_.xp6(1),_.ekj("hidden",!e.displayed)("inset-0",e.displayed),_.Q6J("space",e.displayed)("active",e.selected_ids.includes(null==e.displayed?null:e.displayed.id))("fav",e.displayed&&e.favorites.includes(null==e.displayed?null:e.displayed.id)),_.xp6(2),_.Q6J("ngIf",e.displayed),_.xp6(1),_.ekj("mb-2",e.displayed),_.Q6J("mat-dialog-close",e.selected),_.xp6(3),_.Q6J("mat-dialog-close",e.selected),_.xp6(7),_.pQV(e.selected.length),_.QtT(25),_.xp6(1),_.ekj("inverse",e.isSelected(null==e.displayed?null:e.displayed.id)),_.Q6J("disabled",!e.displayed),_.xp6(3),_.Oqu(e.isSelected(null==e.displayed?null:e.displayed.id)?"remove":"add"),_.xp6(2),_.hij(" ",e.isSelected(null==e.displayed?null:e.displayed.id)?"Remove from Booking":"Add to booking"," ")}},dependencies:[c.O5,T.ZT,E.o,g.wG,L,G,$,y,K]});var v_=a(719);function Bt(n,t){if(1&n&&_._UZ(0,"img",23),2&n){const e=_.oxw().$implicit;_.Q6J("src",e.images[0],_.LSH)}}function yt(n,t){1&n&&_._UZ(0,"img",24)}function wt(n,t){if(1&n){const e=_.EpF();_.TgZ(0,"div",7)(1,"div",8),_.YNc(2,Bt,1,1,"img",9),_.YNc(3,yt,1,0,"ng-template",null,10,_.W1O),_.qZA(),_.TgZ(5,"div",11)(6,"div",12),_._uU(7),_.qZA(),_.TgZ(8,"div",13)(9,"app-icon",14),_._uU(10,"place"),_.qZA(),_.TgZ(11,"p"),_._uU(12),_.qZA()(),_.TgZ(13,"div",13)(14,"app-icon",14),_._uU(15,"people"),_.qZA(),_.TgZ(16,"p"),_.SDv(17,15),_.qZA()(),_.TgZ(18,"div",16)(19,"button",17),_.NdJ("click",function(){const s=_.CHM(e).$implicit,l=_.oxw();return _.KtG(l.changeResources(s))}),_.TgZ(20,"div",18),_.tHW(21,19),_._UZ(22,"app-icon"),_.N_p(),_.qZA()(),_.TgZ(23,"button",20),_.NdJ("click",function(){const s=_.CHM(e).$implicit,l=_.oxw();return _.KtG(l.removeResource(s))}),_.TgZ(24,"div",18),_.tHW(25,21),_._UZ(26,"app-icon"),_.N_p(),_.qZA()()()(),_.TgZ(27,"button",22),_.NdJ("click",function(){_.CHM(e);const i=_.oxw();return _.KtG(i.toggleFavourite(i.asset))}),_.TgZ(28,"app-icon"),_._uU(29),_.qZA()()()}if(2&n){const e=t.$implicit,o=_.MAs(4),i=_.oxw();_.xp6(2),_.Q6J("ngIf",null==e.images?null:e.images.length)("ngIfElse",o),_.xp6(5),_.hij(" ",e.name||"Meeting Resource"," "),_.xp6(5),_.Oqu(e.location),_.xp6(5),_.pQV(e.capacity<1?2:e.capacity)(e.capacity),_.QtT(17),_.xp6(10),_.ekj("text-blue-400",i.favorites.includes(null==i.asset?null:i.asset.id)),_.xp6(2),_.Oqu(i.favorites.includes(null==i.asset?null:i.asset.id)?"favorite":"favorite_border")}}const Yt=[];class Y{get favorites(){return this._settings.get("favourite_spaces")||Yt}constructor(t,e){this._settings=t,this._dialog=e,this.room_size=3,this.spaces=[],this.disabled=!1,this.registerOnChange=o=>this._onChange=o,this.registerOnTouched=o=>this._onTouch=o,this.setDisabledState=o=>this.disabled=o}changeResources(){this._dialog.open(w,{data:{spaces:this.spaces,options:{capacity:this.room_size}}}).afterClosed().subscribe(e=>{e&&this.setValue(e)})}removeResource(t){this.setValue(this.spaces.filter(e=>e.id!==t.id))}setValue(t){this.spaces=t,this._onChange&&this._onChange(this.spaces)}writeValue(t){this.spaces=t||[]}toggleFavourite(t){const e=this.favorites;e.includes(t.id)?this._settings.saveUserSetting(__,e.filter(i=>i!==t.id)):this._settings.saveUserSetting(__,[...e,t.id])}}Y.\u0275fac=function(t){return new(t||Y)(_.Y36(v_.g),_.Y36(T.uw))},Y.\u0275cmp=_.Xpm({type:Y,selectors:[["parking-space-list-field"]],features:[_._Bn([{provide:r.JU,useExisting:(0,_.Gpc)(()=>Y),multi:!0}])],decls:10,vars:1,consts:function(){let n,t,e,o,i;return n=$localize`:␟45491a2ead2b592aec7b4d19300c0715230f334d␟1439078713747050312:Add Parking Resource`,t=$localize`:␟ed210c8c0f2511082633f06a2c94b8410f6cd9bf␟426413428618668868:{VAR_PLURAL, plural, =1 {Person } other {People
                            }}`,t=_.Zx4(t,{VAR_PLURAL:"\ufffd1\ufffd"}),e=$localize`:␟ddc17cbb67fd49c13c14733c877b09fb9bd86d87␟686822217414553756: ${"\ufffd0\ufffd"}:INTERPOLATION: ${t}:ICU: `,o=$localize`:␟ca9092fdbbb85e5828de77fdf85c49b918cec128␟559636443235347532:${"\ufffd#22\ufffd"}:START_TAG_APP_ICON:edit${"\ufffd/#22\ufffd"}:CLOSE_TAG_APP_ICON: Change `,i=$localize`:␟a386ba350cdee69beeb12a908d96f0724ddc2054␟2582674642057285571:${"\ufffd#26\ufffd"}:START_TAG_APP_ICON:close${"\ufffd/#26\ufffd"}:CLOSE_TAG_APP_ICON: Remove `,[["list","",1,"space-y-2"],["space","","class","relative p-2 rounded-lg w-full flex items-center shadow border border-gray-200",4,"ngFor","ngForOf"],["btn","","matRipple","","add-space","",1,"w-full","inverse","mt-2",3,"click"],[1,"flex","items-center","justify-center","space-x-2"],n,[1,"flex","items-center","flex-wrap","sm:space-x-2","mb-2"],[1,"flex-1","min-w-[256px]","space-y-2"],["space","",1,"relative","p-2","rounded-lg","w-full","flex","items-center","shadow","border","border-gray-200"],[1,"w-24","h-24","rounded-xl","bg-black/20","mr-4","overflow-hidden","flex","items-center","justify-center"],["class","object-cover h-full",3,"src",4,"ngIf","ngIfElse"],["placeholder",""],[1,"space-y-2","pb-4"],[1,"font-medium"],[1,"flex","items-center","text-sm","space-x-2"],[1,"text-blue-500"],e,[1,"absolute","bottom-0","right-0","flex","items-center","justify-end","text-xs"],["btn","","matRipple","","edit-space","",1,"clear",3,"click"],[1,"flex","items-center","space-x-2"],o,["btn","","matRipple","","remove-space","",1,"clear",3,"click"],i,["icon","","matRipple","","fav","",1,"absolute","top-1","right-1",3,"click"],[1,"object-cover","h-full",3,"src"],["src","assets/icons/car-placeholder.svg",1,"m-auto"]]},template:function(t,e){1&t&&(_.TgZ(0,"div",0),_.YNc(1,wt,30,9,"div",1),_.qZA(),_.TgZ(2,"button",2),_.NdJ("click",function(){return e.changeResources()}),_.TgZ(3,"div",3)(4,"app-icon"),_._uU(5,"search"),_.qZA(),_.TgZ(6,"span"),_.SDv(7,4),_.qZA()()(),_.TgZ(8,"div",5),_._UZ(9,"div",6),_.qZA()),2&t&&(_.xp6(1),_.Q6J("ngForOf",e.spaces))},dependencies:[c.sg,c.O5,E.o,g.wG]});const qt=function(){return[]},Jt=function(){return{standalone:!0}};function Wt(n,t){if(1&n){const e=_.EpF();_.TgZ(0,"mat-checkbox",27),_.NdJ("ngModelChange",function(i){const l=_.CHM(e).$implicit,d=_.oxw(3);return _.KtG(d.setFeature(l,i))}),_._uU(1),_.qZA()}if(2&n){const e=t.$implicit,o=_.oxw(3);_.Q6J("ngModel",(o.selected_features||_.DdM(3,qt)).includes(e))("ngModelOptions",_.DdM(4,Jt)),_.xp6(1),_.hij(" ",e," ")}}function Xt(n,t){if(1&n&&(_.TgZ(0,"div",23)(1,"label",24),_._uU(2,"Type"),_.qZA(),_.TgZ(3,"div",25),_.YNc(4,Wt,2,5,"mat-checkbox",26),_.qZA()()),2&n){const e=_.oxw(2);_.xp6(4),_.Q6J("ngForOf",e.features)}}function Qt(n,t){if(1&n&&_._UZ(0,"img",28),2&n){const e=_.oxw().$implicit;_.Q6J("src",e.images[0],_.LSH)}}function zt(n,t){1&n&&_._UZ(0,"img",29)}function Vt(n,t){if(1&n){const e=_.EpF();_.TgZ(0,"div",7),_.YNc(1,Xt,5,1,"div",8),_.TgZ(2,"div",9),_.YNc(3,Qt,1,1,"img",10),_.YNc(4,zt,1,0,"ng-template",null,11,_.W1O),_.qZA(),_.TgZ(6,"div",12)(7,"div",13),_._uU(8),_.qZA(),_.TgZ(9,"div",14)(10,"app-icon",15),_._uU(11,"place"),_.qZA(),_.TgZ(12,"p"),_._uU(13),_.qZA()(),_.TgZ(14,"div",16)(15,"button",17),_.NdJ("click",function(){const s=_.CHM(e).$implicit,l=_.oxw();return _.KtG(l.changeResources(s))}),_.TgZ(16,"div",18),_.tHW(17,19),_._UZ(18,"app-icon"),_.N_p(),_.qZA()(),_.TgZ(19,"button",20),_.NdJ("click",function(){const s=_.CHM(e).$implicit,l=_.oxw();return _.KtG(l.removeResource(s))}),_.TgZ(20,"div",18),_.tHW(21,21),_._UZ(22,"app-icon"),_.N_p(),_.qZA()()()(),_.TgZ(23,"button",22),_.NdJ("click",function(){_.CHM(e);const i=_.oxw();return _.KtG(i.toggleFavourite(i.asset))}),_.TgZ(24,"app-icon"),_._uU(25),_.qZA()()()}if(2&n){const e=t.$implicit,o=_.MAs(5),i=_.oxw();_.xp6(1),_.Q6J("ngIf",null==i.features?null:i.features.length),_.xp6(2),_.Q6J("ngIf",null==e.images?null:e.images.length)("ngIfElse",o),_.xp6(5),_.hij(" ",e.name||"Desk"," "),_.xp6(5),_.Oqu((null==e.zone?null:e.zone.display_name)||(null==e.zone?null:e.zone.name)),_.xp6(10),_.ekj("text-blue-400",i.favorites.includes(null==i.asset?null:i.asset.id)),_.xp6(2),_.Oqu(i.favorites.includes(null==i.asset?null:i.asset.id)?"favorite":"favorite_border")}}const jt=[];class q{get favorites(){return this._settings.get(P)||jt}constructor(t,e){this._settings=t,this._dialog=e,this.features=[],this.room_size=3,this.items=[],this.disabled=!1,this.selected_features=[],this.registerOnChange=o=>this._onChange=o,this.registerOnTouched=o=>this._onTouch=o,this.setDisabledState=o=>this.disabled=o}changeResources(){const t=this._dialog.open(Z,{data:{items:this.items,options:{capacity:this.room_size}}});t.afterClosed().subscribe(e=>{e||(e=t.componentInstance.selected),this.setValue(e)})}removeResource(t){this.setValue(this.items.filter(e=>e.id!==t.id))}setValue(t){this.items=t,this._onChange&&this._onChange(this.items)}writeValue(t){this.items=t||[]}toggleFavourite(t){const e=this.favorites;e.includes(t.id)?this._settings.saveUserSetting(P,e.filter(i=>i!==t.id)):this._settings.saveUserSetting(P,[...e,t.id])}}q.\u0275fac=function(t){return new(t||q)(_.Y36(v_.g),_.Y36(T.uw))},q.\u0275cmp=_.Xpm({type:q,selectors:[["desk-list-field"]],inputs:{features:"features"},features:[_._Bn([{provide:r.JU,useExisting:(0,_.Gpc)(()=>q),multi:!0}])],decls:10,vars:1,consts:function(){let n,t,e;return n=$localize`:␟76b072e559d819bff20d8a487e73f64b3afe4f86␟1087109089519255800:Add Desk`,t=$localize`:␟ca9092fdbbb85e5828de77fdf85c49b918cec128␟559636443235347532:${"\ufffd#18\ufffd"}:START_TAG_APP_ICON:edit${"\ufffd/#18\ufffd"}:CLOSE_TAG_APP_ICON: Change `,e=$localize`:␟a386ba350cdee69beeb12a908d96f0724ddc2054␟2582674642057285571:${"\ufffd#22\ufffd"}:START_TAG_APP_ICON:close${"\ufffd/#22\ufffd"}:CLOSE_TAG_APP_ICON: Remove `,[["list","",1,"space-y-2"],["desk","","class","relative p-2 rounded-lg w-full flex items-center shadow border border-gray-200",4,"ngFor","ngForOf"],["btn","","matRipple","","name","add-desk",1,"w-full","inverse","mt-2",3,"click"],[1,"flex","items-center","justify-center","space-x-2"],n,[1,"flex","items-center","flex-wrap","sm:space-x-2","mb-2"],[1,"flex-1","min-w-[256px]","space-y-2"],["desk","",1,"relative","p-2","rounded-lg","w-full","flex","items-center","shadow","border","border-gray-200"],["class","flex flex-col",4,"ngIf"],[1,"w-20","h-20","rounded-xl","bg-black/20","mr-4","overflow-hidden","flex","items-center","justify-center"],["class","min-h-full object-cover",3,"src",4,"ngIf","ngIfElse"],["placeholder",""],[1,"space-y-2","pb-4"],[1,"font-medium"],[1,"flex","items-center","text-sm","space-x-2"],[1,"text-blue-500"],[1,"absolute","bottom-0","right-0","flex","items-center","justify-end","text-xs"],["btn","","matRipple","","name","edit-desk",1,"clear",3,"click"],[1,"flex","items-center","space-x-2"],t,["btn","","matRipple","","name","remove-desk",1,"clear",3,"click"],e,["icon","","matRipple","","name","toggle-desk-favourite",1,"absolute","top-1","right-1",3,"click"],[1,"flex","flex-col"],["for","title"],["features","",1,"flex","items-center","flex-wrap","space-x-2"],[3,"ngModel","ngModelOptions","ngModelChange",4,"ngFor","ngForOf"],[3,"ngModel","ngModelOptions","ngModelChange"],[1,"min-h-full","object-cover",3,"src"],["src","assets/icons/desk-placeholder.svg",1,"m-auto"]]},template:function(t,e){1&t&&(_.TgZ(0,"div",0),_.YNc(1,Vt,26,8,"div",1),_.qZA(),_.TgZ(2,"button",2),_.NdJ("click",function(){return e.changeResources()}),_.TgZ(3,"div",3)(4,"app-icon"),_._uU(5,"search"),_.qZA(),_.TgZ(6,"span"),_.SDv(7,4),_.qZA()()(),_.TgZ(8,"div",5),_._UZ(9,"div",6),_.qZA()),2&t&&(_.xp6(1),_.Q6J("ngForOf",e.items))},dependencies:[c.sg,c.O5,r.JJ,r.On,n_.oG,E.o,g.wG]}),a(4367);class e_{}e_.\u0275fac=function(t){return new(t||e_)},e_.\u0275mod=_.oAB({type:e_}),e_.\u0275inj=_.cJS({providers:[r.UX],imports:[c.ez,r.u5,r.UX,P_.Fk,d_.c,M.lN,x_.FA,k_.ot,T.Is,v.Cq,n_.p9,O_.Bb,K_.W,Z_.K,g.si]}),a(1980);var m_=a(9972),D_=a(8115);class t_{constructor(t,e){this._org=t,this._dialog=e,this.can_set_date=!0,this.error_on_host=!0}bookDesk({desks:t,host:e,reason:o,attendees:i,date:s}){var l=this;return(0,C.Z)(function*(){if(l.error_on_host&&!e)return(0,u.cB)("You need to select a host to book a desk.");e=e||(0,u.ar)(),o=o||"";const d=l._org.levelWithID(t[0].zone instanceof Array?t[0].zone:[t[0].zone?.id]);let S=l._dialog.open(R_.I),O=yield Promise.race([S.componentInstance.event.pipe((0,f_.P)(m=>"done"===m.reason)).toPromise(),S.afterClosed().pipe((0,N.U)(m=>null)).toPromise()]);if(!O||(S.close(),S=l._dialog.open(b,{data:{host:e,desks:t,date:s?new Date(s):new Date,reason:o,level:d,can_set_date:l.can_set_date}}),O=yield Promise.race([S.componentInstance.event.pipe((0,f_.P)(m=>"done"===m.reason)).toPromise(),S.afterClosed().pipe((0,N.U)(m=>null)).toPromise()]),!O))return;if(s=S.componentInstance.date||s,o=S.componentInstance.reason||o,!(e=S.componentInstance.host||e))return S.close(),(0,u.cB)("You need to select a host to book a desk. ");if(S.componentInstance.loading="Checking for existing desk bookings...",(yield(0,I.F2)({type:"desk",period_start:(0,m_.Z)((0,D_.Z)(s||new Date)),period_end:(0,m_.Z)((0,s_.Z)(s||new Date))}).toPromise()).filter(m=>m.user_email.toLowerCase()===e.email.toLowerCase())?.length)return S.close(),(0,u.cB)("You currently already have a desk booked for the selected date.");S.componentInstance.loading="Booking desk...";const c_=[e,...i||[]];return yield Promise.all([t.map((m,J)=>l.makeDeskBooking(m,e,s.valueOf()||(new Date).valueOf(),o,c_[J]))]),(0,u.t5)("Successfully booked desk"),S.close(),!0})()}makeDeskBooking(t,e,o,i,s=null){var l=this;return(0,C.Z)(function*(){const d=`${t.zone?.name}-${t.id}`,S=l._org.levelWithID(t.zone instanceof Array?t.zone:[t.zone?.id]),O=t.zone?.id?[t.zone?.id,S?.parent_id]:[S?.parent_id],R={booking_start:(0,m_.Z)((0,D_.Z)(o)),user_id:s?.id||e.id,user_name:s?.name||e.name,user_email:s?.email||e.email,booking_end:Math.floor((0,s_.Z)(o).valueOf()/1e3),asset_id:t.id,asset_name:t.name,title:i,description:d,zones:O,booking_type:"desk",extension_data:{map_id:t?.map_id||t?.id,groups:t.groups,for_user:s?.email}};return(0,I.km)(R).toPromise()})()}}t_.\u0275fac=function(t){return new(t||t_)(_.LFG(W.w7),_.LFG(T.uw))},t_.\u0275prov=_.Yz7({token:t_,factory:t_.\u0275fac,providedIn:"root"})}}]);