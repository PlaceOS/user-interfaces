{"version":3,"sources":["./src/app/visitors/visitor-listings.component.ts","./src/app/visitors/visitors.module.ts","./src/app/visitors/visitors-topbar.component.ts","./src/app/visitors/visitors.component.ts","./src/app/visitors/visitor-event.component.ts","./src/app/visitors/visitor-details.component.ts","./src/app/visitors/visitors-state.service.ts"],"names":[],"mappings":"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","file":"visitors-visitors-module.js","sourcesContent":["import { Component } from '@angular/core';\nimport { CalendarEvent } from '@user-interfaces/events';\nimport { VisitorsStateService } from './visitors-state.service';\n\n@Component({\n    selector: 'visitor-listings',\n    template: `\n        <div class=\"w-full flex-1 text-sm\">\n            <div\n                class=\"w-full flex items-center bg-white border-b border-gray-500 p-2 font-medium\"\n            >\n                <div class=\"w-12 p-2\"></div>\n                <div class=\"w-24 p-2\">Time</div>\n                <div class=\"w-48 p-2\">Host</div>\n                <div flex class=\"p-2 flex-1\">Title</div>\n                <div class=\"w-64 p-2\">Location</div>\n                <div class=\"w-32 p-2\">Actions</div>\n                <div class=\"w-16 p-2\"></div>\n            </div>\n            <div class=\"w-full flex-1 overflow-auto\">\n                <ng-container\n                    *ngIf=\"(bookings | async)?.length; else empty_state\"\n                >\n                    <visitor-event\n                        *ngFor=\"let event of bookings | async; trackBy: trackByFn\"\n                        [event]=\"event\"\n                    ></visitor-event>\n                </ng-container>\n            </div>\n        </div>\n        <ng-template #empty_state>\n            <div class=\"h-full w-full flex items-center justify-center\">\n                <p class=\"p-8\">\n                    There are no visitors for the currently selected date.\n                </p>\n            </div>\n        </ng-template>\n    `,\n    styles: [``],\n})\nexport class VisitorListingsComponent {\n    public readonly bookings = this._state.filtered_events;\n\n    constructor(private _state: VisitorsStateService) { }\n\n    /* istanbul ignore next */\n    public trackByFn(index: number, event: CalendarEvent) {\n        return event ? event.id : undefined;\n    }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { RouterModule, Route } from '@angular/router';\n\nimport { UIModule } from '../ui/ui.module';\n\nimport { VisitorsComponent } from './visitors.component';\nimport { VisitorsTopbarComponent } from './visitors-topbar.component';\nimport { VisitorListingsComponent } from './visitor-listings.component';\nimport { VisitorEventComponent } from './visitor-event.component';\nimport { VisitorDetailsComponent } from './visitor-details.component';\n\nconst ROUTES: Route[] = [{ path: '', component: VisitorsComponent }];\n\n@NgModule({\n    declarations: [\n        VisitorsComponent,\n        VisitorsTopbarComponent,\n        VisitorListingsComponent,\n        VisitorEventComponent,\n        VisitorDetailsComponent\n    ],\n    imports: [\n        CommonModule,\n        FormsModule,\n        UIModule,\n        RouterModule.forChild(ROUTES),\n    ],\n})\nexport class VisitorsModule {}\n\n/**\nzone_ids: zone-EmWVhHG3Bhz\nperiod_start: 1604926800\nperiod_end: 1605013199\n\nperiod_start: 1605013200\nperiod_end: 1605099599\nzones: zone-EmWVhHG3Bhz\n\n*/\n","import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { first } from 'rxjs/operators';\n\nimport { BaseClass } from '@user-interfaces/common';\nimport { OrganisationService } from '@user-interfaces/organisation';\nimport { VisitorsStateService } from './visitors-state.service';\n\n@Component({\n    selector: 'visitors-topbar',\n    template: `\n        <mat-form-field appearance=\"outline\">\n            <mat-select\n                multiple\n                [(ngModel)]=\"zones\"\n                (ngModelChange)=\"updateZones($event)\"\n                placeholder=\"All Levels\"\n            >\n                <mat-option\n                    *ngFor=\"let level of levels | async\"\n                    [value]=\"level.id\"\n                >\n                    {{ level.display_name || level.name }}\n                </mat-option>\n            </mat-select>\n        </mat-form-field>\n        <mat-slide-toggle\n            class=\"m-2\"\n            [ngModel]=\"(filters | async)?.all_bookings\"\n            (ngModelChange)=\"setFilters({ all_bookings: $event })\"\n            ><div class=\"text-xs\">All Bookings</div></mat-slide-toggle\n        >\n        <div class=\"flex-1 w-2\"></div>\n        <searchbar class=\"mr-2\" (modelChange)=\"setSearch($event)\"></searchbar>\n        <date-options (dateChange)=\"setDate($event)\"></date-options>\n    `,\n    styles: [\n        `\n            :host {\n                display: flex;\n                align-items: center;\n                background-color: #fff;\n                height: 5em;\n                padding: 0 2em;\n                border-bottom: 1px solid #ccc;\n            }\n\n            :host > * + * {\n                margin-left: 0.5rem;\n            }\n\n            mat-form-field {\n                height: 3.25em;\n                width: 8em;\n            }\n        `,\n    ],\n})\nexport class VisitorsTopbarComponent extends BaseClass implements OnInit {\n    /** List of selected levels */\n    public zones: string[] = [];\n    /** List of levels for the active building */\n    public readonly levels = this._org.active_levels;\n\n    public readonly filters = this._state.filters;\n    /** Set filtered date */\n    public readonly setDate = (date) => this._state.setFilters({ date });\n    /** Set filtered date */\n    public readonly setFilters = (filters) => this._state.setFilters(filters);\n    /** Set filter string */\n    public readonly setSearch = (str) => this._state.setSearchString(str);\n    /** Update active zones for desks */\n    public readonly updateZones = (zones) => {\n        this._router.navigate([], {\n            relativeTo: this._route,\n            queryParams: { zone_ids: zones.join(',') },\n        });\n        this._state.setFilters({ zones })\n    };\n\n    constructor(\n        private _state: VisitorsStateService,\n        private _org: OrganisationService,\n        private _route: ActivatedRoute,\n        private _router: Router\n    ) {\n        super();\n    }\n\n    public async ngOnInit() {\n        await this._org.initialised.pipe(first((_) => _)).toPromise();\n        this.subscription(\n            'route.query',\n            this._route.queryParamMap.subscribe((params) => {\n                if (params.has('zone_ids')) {\n                    const zones = params.get('zone_ids').split(',');\n                    if (zones.length) {\n                        const level = this._org.levelWithID(zones);\n                        if (!level) {\n                            return;\n                        }\n                        this._org.building = this._org.buildings.find(\n                            (bld) => bld.id === level.parent_id\n                        );\n                        this.zones = zones;\n                    }\n                }\n            })\n        );\n        this.subscription(\n            'levels',\n            this._org.active_levels.subscribe((levels) => {\n                this.zones = this.zones.filter((zone) =>\n                    levels.find((lvl) => lvl.id === zone)\n                );\n                if (!this.zones.length && levels.length) {\n                    this.zones.push(levels[0].id);\n                }\n                this.updateZones(this.zones);\n            })\n        );\n        this.setSearch('');\n    }\n}\n","import { Component, OnDestroy, OnInit } from '@angular/core';\nimport { VisitorsStateService } from './visitors-state.service';\n\n@Component({\n    selector: 'app-visitors',\n    template: `\n        <sidebar></sidebar>\n        <main class=\"relative overflow-hidden flex-1 flex flex-col\">\n            <visitors-topbar class=\"w-full\"></visitors-topbar>\n            <visitor-listings class=\"w-full flex-1 h-0\"></visitor-listings>\n            <mat-progress-bar class=\"w-full\" *ngIf=\"loading | async\" mode=\"indeterminate\"></mat-progress-bar>\n        </main>\n    `,\n    styles: [\n        `\n            :host {\n                display: flex;\n                height: 100%;\n                width: 100%;\n            }\n        `\n    ],\n})\nexport class VisitorsComponent implements OnInit, OnDestroy {\n    public readonly loading = this._state.loading;\n\n    constructor(private _state: VisitorsStateService) {}\n\n    public ngOnInit() {\n        this._state.startPolling();\n    }\n\n    public ngOnDestroy() {\n        this._state.stopPolling();\n    }\n}\n","import { Component, Input, OnInit, SimpleChanges } from '@angular/core';\nimport { HashMap } from '@placeos/ts-client/dist/esm/utilities/types';\nimport { BaseClass } from '@user-interfaces/common';\nimport { CalendarEvent } from '@user-interfaces/events';\nimport { VisitorsStateService } from './visitors-state.service';\n\n@Component({\n    selector: 'visitor-event',\n    template: `\n        <div class=\"flex items-center px-2 bg-gray-100\">\n            <div class=\"w-12 text-lg flex justify-center\">\n                <i class=\"p-2 rounded-full material-icons bg-gray-400\" *ngIf=\"event?.status !== 'cancelled' && event?.state !== 'done'\">event</i>\n                <i class=\"p-2 rounded-full material-icons bg-gray-400\" *ngIf=\"event?.status === 'cancelled'\">close</i>\n                <i class=\"p-2 rounded-full material-icons bg-gray-400\" *ngIf=\"event?.state === 'done' && event?.status !== 'cancelled'\">done</i>\n            </div>\n            <div class=\"w-24 p-2\">{{ event?.date | date: 'shortTime' }}</div>\n            <div class=\"w-48 p-2\">\n                {{ event?.organiser?.name || event?.organiser?.email }}\n            </div>\n            <div flex class=\"p-2 flex-1\">{{ event?.title }}</div>\n            <div class=\"w-64 p-2 truncate\">{{ event?.location }}</div>\n            <div class=\"w-32 p-2 flex items-center justify-end\">\n                <action-icon\n                    matTooltip=\"Checkin All Guests\"\n                    [loading]=\"loading === 'checkin'\"\n                    [disabled]=\"guestCount <= 0\"\n                    className=\"material-icons\"\n                    content=\"event_available\"\n                    (click)=\"checkinGuests()\"\n                >\n                </action-icon>\n                <action-icon\n                    matTooltip=\"Checkout All Guests\"\n                    [loading]=\"loading === 'checkout'\"\n                    [disabled]=\"guestCount <= 0\"\n                    className=\"material-icons\"\n                    content=\"event_busy\"\n                    (click)=\"checkoutGuests()\"\n                >\n                </action-icon>\n                <a\n                    mat-icon-button\n                    [href]=\"'mailto:' + event?.organiser?.email\"\n                    matTooltip=\"Email Host\"\n                >\n                    <app-icon className=\"material-icons\">email</app-icon>\n                </a>\n            </div>\n            <div class=\"w-16 p-2\">\n                <button\n                    mat-icon-button\n                    (click)=\"show_attendees = !show_attendees\"\n                    [disabled]=\"!event?.attendees?.length\"\n                    [matTooltip]=\"\n                        show_attendees || has_search\n                            ? 'Hide Attendees'\n                            : 'Show Attendees'\n                    \"\n                >\n                    <app-icon className=\"material-icons\">{{\n                        show_attendees\n                            ? 'keyboard_arrow_down'\n                            : 'keyboard_arrow_right'\n                    }}</app-icon>\n                </button>\n            </div>\n        </div>\n        <div\n            attendees\n            class=\"w-full overflow-hidden relative border-b border-gray-300\"\n            [style.height]=\"\n                !show_attendees && !has_search\n                    ? '0rem'\n                    : event.attendees.length * 3.5 + 'rem'\n            \"\n        >\n            <div\n                bar\n                class=\"absolute top-0 bg-gray-400 z-10\"\n                [style.height]=\"\n                    'calc(' +\n                    ((event.attendees.length - 1) * 3.5 + 1.75) +\n                    'rem + 1px)'\n                \"\n            ></div>\n            <div\n                visitor\n                class=\"relative w-full pl-12 bg-gray-200\"\n                *ngFor=\"let user of event.attendees\"\n            >\n                <div l-bar class=\"absolute bg-gray-400\"></div>\n                <visitor-details\n                    [attr.disabled]=\"!matches[user.email]\"\n                    [visitor]=\"user\"\n                    [(event)]=\"event\"\n                ></visitor-details>\n            </div>\n        </div>\n    `,\n    styles: [\n        `\n            :host {\n                width: 100%;\n            }\n\n            visitor-details {\n                transition: opacity 200ms;\n            }\n\n            [attendees] {\n                transition: height 200ms;\n            }\n\n            [visitor] {\n                height: 3.5rem;\n            }\n\n            [bar] {\n                width: 2px;\n                left: calc(2rem - 1px);\n            }\n\n            [l-bar] {\n                height: 2px;\n                left: 2rem;\n                top: calc(50% - 1px);\n                width: 1rem;\n            }\n\n            [disabled=\"true\"] {\n                opacity: 0.35;\n            }\n        `,\n    ],\n})\nexport class VisitorEventComponent extends BaseClass implements OnInit {\n    @Input() public event: CalendarEvent;\n\n    public show_attendees: boolean;\n    public loading: string;\n    public matches: HashMap<boolean> = {};\n\n    public readonly checkinGuests = async () => {\n        this.loading = 'checkin';\n        this.event = await this._state\n            .checkAllGuestsIn(this.event)\n            .catch((e) => this.event);\n        this.loading = '';\n    };\n    public readonly checkoutGuests = async () => {\n        this.loading = 'checkout';\n        this.event = await this._state\n            .checkAllGuestsOut(this.event)\n            .catch((e) => this.event);\n        this.loading = '';\n    };\n\n    public get guestCount() {\n        return this.event?.attendees.reduce((c, u) => c + (u.is_external && !u.organizer ? 1 : 0), 0) || 0;\n    }\n\n    public get has_search() {\n        return this._state.search;\n    }\n\n    constructor(private _state: VisitorsStateService) {\n        super();\n    }\n\n    public ngOnInit(): void {\n        this.subscription('events', this._state.filtered_events.subscribe(() => this.updateMatches()));\n    }\n\n    public updateMatches() {\n        this.matches = {};\n        const filter = (this._state.search || '').toLowerCase();\n        for (const user of this.event.attendees) {\n            this.matches[user.email] =\n                !filter ||\n                user.email.toLowerCase().includes(filter) ||\n                user.name.toLowerCase().includes(filter);\n        }\n    }\n}\n","import { Component, EventEmitter, Input, Output } from '@angular/core';\nimport { CalendarEvent } from '@user-interfaces/events';\nimport { User } from '@user-interfaces/users';\nimport { VisitorsStateService } from './visitors-state.service';\n\n@Component({\n    selector: 'visitor-details',\n    template: `\n        <div class=\"w-12 text-lg flex justify-center\">\n            <ng-container *ngIf=\"!visitor.organizer; else host_state\">\n                <i\n                    *ngIf=\"!visitor?.checked_in; else checkin_state\"\n                    class=\"p-2 rounded-full material-icons border-2 border-dotted border-gray-600\"\n                    >face</i\n                >\n            </ng-container>\n            <ng-template #checkin_state>\n                <i\n                    class=\"p-2 rounded-full material-icons bg-green-600 border-2 border-green-600 text-white\"\n                    >done</i\n                >\n            </ng-template>\n            <ng-template #host_state>\n                <i\n                    class=\"p-2 rounded-full material-icons bg-blue-600 border-2 border-blue-600 text-white\"\n                    >assignment_ind</i\n                >\n            </ng-template>\n        </div>\n        <div flex class=\"p-2 flex-1\">{{ visitor?.name || visitor?.email }}</div>\n        <div class=\"w-32 p-2 flex items-center justify-end\">\n            <action-icon\n                matTooltip=\"Checkin Guest\"\n                [loading]=\"loading === 'checkin'\"\n                [state]=\"visitor?.checked_in ? 'success' : ''\"\n                className=\"material-icons\"\n                content=\"event_available\"\n                (click)=\"checkin()\"\n                [class.invisible]=\"!visitor?.is_external || visitor?.organizer\"\n            >\n            </action-icon>\n            <action-icon\n                matTooltip=\"Checkout Guest\"\n                [loading]=\"loading === 'checkout'\"\n                className=\"material-icons\"\n                content=\"event_busy\"\n                (click)=\"checkout()\"\n                [class.invisible]=\"!visitor?.is_external || visitor?.organizer\"\n            >\n            </action-icon>\n            <a\n                [href]=\"'mailto:' + visitor?.email\"\n                mat-icon-button\n                [matTooltip]=\"visitor?.organizer ? 'Email Host' : 'Email Guest'\"\n            >\n                <app-icon className=\"material-icons\">email</app-icon>\n            </a>\n        </div>\n        <div class=\"w-16 p-2\"></div>\n    `,\n    styles: [\n        `\n            :host {\n                display: flex;\n                align-items: center;\n                width: 100%;\n                padding: 0 0.5rem;\n            }\n\n            :host > div {\n                display: flex;\n                align-items: center;\n                height: 100%;\n                border-bottom: 1px solid #ccc;\n                height: 3.5rem;\n            }\n\n            :host > div:first-child {\n                border: none;\n            }\n\n            .invisible {\n                opacity: 0;\n                pointer-events: none;\n            }\n        `,\n    ],\n})\nexport class VisitorDetailsComponent {\n    @Input() public event: CalendarEvent;\n    @Input() public visitor: User;\n    @Output() public eventChange = new EventEmitter<CalendarEvent>();\n\n    public show_attendees: boolean;\n    public loading: string;\n\n    public readonly checkin = async () => {\n        this.loading = 'checkin';\n        this.event = await this._state\n            .checkGuestIn(this.event, this.visitor)\n            .catch((e) => this.event);\n        this.eventChange.emit(this.event);\n        this.loading = '';\n    };\n    public readonly checkout = async () => {\n        this.loading = 'checkout';\n        this.event = await this._state\n            .checkGuestOut(this.event, this.visitor)\n            .catch((e) => this.event);\n        this.eventChange.emit(this.event);\n        this.loading = '';\n    };\n\n    constructor(private _state: VisitorsStateService) {}\n}\n","import { Injectable } from '@angular/core';\nimport {\n    BaseClass,\n    notifyError,\n    notifySuccess,\n    unique,\n} from '@user-interfaces/common';\nimport { CalendarEvent, EventsService } from '@user-interfaces/events';\nimport { User } from '@user-interfaces/users';\nimport { endOfDay, startOfDay } from 'date-fns';\nimport { BehaviorSubject, combineLatest } from 'rxjs';\nimport { debounceTime, map, shareReplay, switchMap } from 'rxjs/operators';\n\nexport interface VisitorFilters {\n    date?: number;\n    zones?: string[];\n    all_bookings?: boolean;\n}\n\n@Injectable({\n    providedIn: 'root',\n})\nexport class VisitorsStateService extends BaseClass {\n    private _filters = new BehaviorSubject<VisitorFilters>({});\n\n    private _search = new BehaviorSubject<string>('');\n\n    private _loading = new BehaviorSubject<boolean>(false);\n\n    public readonly loading = this._loading.asObservable();\n\n    public readonly filters = this._filters.asObservable();\n\n    public readonly events = combineLatest([this._filters]).pipe(\n        debounceTime(500),\n        switchMap((details) => {\n            this._loading.next(true);\n            const [filters] = details;\n            const date = filters.date ? new Date(filters.date) : new Date();\n            return this._events.query({\n                period_start: Math.floor(startOfDay(date).valueOf() / 1000),\n                period_end: Math.floor(endOfDay(date).valueOf() / 1000),\n                zone_ids: (filters.zones || []).join(','),\n            });\n        }),\n        map((list) => {\n            this._loading.next(false);\n            return this._filters.getValue().all_bookings ? list : list.filter(\n                (event) => event.has_visitors && event.attendees.length > 1\n            );\n        }),\n        shareReplay()\n    );\n\n    public readonly filtered_events = combineLatest([\n        this._search,\n        this.events,\n    ]).pipe(\n        map((details) => {\n            const [search, events] = details;\n            const filter = search.toLowerCase();\n            return events.filter((event) =>\n                event.attendees.find(\n                    (user) =>\n                        user.name.toLowerCase().includes(filter) ||\n                        user.email.toLowerCase().includes(filter)\n                )\n            );\n        })\n    );\n\n    public get search() {\n        return this._search.getValue();\n    }\n\n    constructor(private _events: EventsService) {\n        super();\n    }\n\n    public setFilters(filters: VisitorFilters) {\n        this._filters.next({ ...this._filters.getValue(), ...filters });\n    }\n\n    public setSearchString(search: string) {\n        this._search.next(search);\n    }\n\n    public startPolling(delay: number = 30 * 1000) {\n        this.interval(\n            'poll',\n            () => this.setFilters(this._filters.getValue()),\n            delay\n        );\n    }\n\n    public stopPolling() {\n        this.clearInterval('poll');\n    }\n\n    public async checkGuestIn(event: CalendarEvent, user: User) {\n        const new_user = await this._events\n            .checkInGuest(event.id, user.id, {\n                system_id: event.system.id,\n                state: true,\n            })\n            .catch((e) => {\n                notifyError(\n                    `Error checking in ${user.name} for ${event.organiser.name}'s meeting`\n                );\n                throw e;\n            });\n        notifySuccess(\n            `Successfully checked in ${user.name} for ${event.organiser.name}'s meeting`\n        );\n        const new_attendees = unique([new_user, ...event.attendees], 'email');\n        new_attendees.sort((a, b) =>\n            a.organizer ? -1 : a.email.localeCompare(b.email)\n        );\n        return new CalendarEvent({\n            ...event,\n            attendees: new_attendees,\n        });\n    }\n\n    public async checkGuestOut(event: CalendarEvent, user: User) {\n        const new_user = await this._events\n            .checkInGuest(event.id, user.id, {\n                system_id: event.system.id,\n                state: false,\n            })\n            .catch((e) => {\n                notifyError(\n                    `Error checking out ${user.name} from ${event.organiser.name}'s meeting`\n                );\n                throw e;\n            });\n        notifySuccess(\n            `Successfully checked out ${user.name} from ${event.organiser.name}'s meeting`\n        );\n        const new_attendees = unique([new_user, ...event.attendees], 'email');\n        new_attendees.sort((a, b) =>\n            a.organizer ? -1 : a.email.localeCompare(b.email)\n        );\n        return new CalendarEvent({\n            ...event,\n            attendees: new_attendees,\n        });\n    }\n\n    public async checkAllGuestsIn(event: CalendarEvent) {\n        const guests = event.attendees.filter(\n            (user) => user.is_external && !user.checked_in\n        );\n        if (guests.length <= 0) throw new Error('No Guests to checkin');\n        const attendees = await Promise.all(\n            guests.map((user) =>\n                this._events.checkInGuest(event.id, user.id, {\n                    system_id: event.system.id,\n                    state: true,\n                })\n            )\n        ).catch((e) => {\n            notifyError(\n                `Error checking in all guests for ${event.organiser.name}'s meeting`\n            );\n            throw e;\n        });\n        notifySuccess(\n            `Successfully checked in all guests for ${event.organiser.name}'s meeting`\n        );\n        const new_attendees = unique(\n            [...attendees, ...event.attendees],\n            'email'\n        );\n        new_attendees.sort((a, b) =>\n            a.organizer ? -1 : a.email.localeCompare(b.email)\n        );\n        return new CalendarEvent({\n            ...event,\n            attendees: new_attendees,\n        });\n    }\n\n    public async checkAllGuestsOut(event: CalendarEvent) {\n        const guests = event.attendees.filter(\n            (user) => user.is_external && user.checked_in && !user.organizer\n        );\n        if (guests.length <= 0) throw new Error('No Guests to checkout');\n        const attendees = await Promise.all(\n            guests.map((user) =>\n                this._events.checkInGuest(event.id, user.id, {\n                    system_id: event.system.id,\n                    state: false,\n                })\n            )\n        ).catch((e) => {\n            notifyError(\n                `Error checking out all guests from ${event.organiser.name}'s meeting`\n            );\n            throw e;\n        });\n        notifySuccess(\n            `Successfully checked out all guests from ${event.organiser.name}'s meeting`\n        );\n        const new_attendees = unique(\n            [...attendees, ...event.attendees],\n            'email'\n        );\n        new_attendees.sort((a, b) =>\n            a.organizer ? -1 : a.email.localeCompare(b.email)\n        );\n        return new CalendarEvent({\n            ...event,\n            attendees: new_attendees,\n        });\n    }\n}\n"],"sourceRoot":"webpack:///"}