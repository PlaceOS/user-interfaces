(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{KlkT:function(n,t,e){"use strict";e.r(t),e.d(t,"DirectoryModule",(function(){return N}));var c=e("2kYt"),o=e("sEIs"),a=e("R3Ii"),i=e("ZTXN"),s=e("mWib"),r=e("Ohay"),g=e("TLy2"),l=e("YtkY"),u=e("20lr"),b=e("EM62"),f=e("mjT4"),d=e("e81E"),h=e("ek5h"),m=e("C9Ki"),_=e("d4mj"),p=e("PBFl"),C=e("FGQ9"),O=e("81Qw");function P(n,t){if(1&n&&(b.Vb(0,"div",11),b.Qb(1,"a-user-avatar",12),b.Ub()),2&n){const n=b.jc(2);b.Db(1),b.qc("user",n.user)}}function M(n,t){if(1&n){const n=b.Wb();b.Vb(0,"a",13),b.fc("click",(function(){return b.Ac(n),b.jc(2).sendCallEvent()})),b.kc(1,"safe"),b.Nc(2," Call "),b.Ub()}if(2&n){const n=b.jc(2);b.qc("href",b.mc(1,1,"tel:"+n.user.phone,"url"),b.Cc)}}const y=function(){return["/explore"]},w=function(n){return{user:n}};function v(n,t){if(1&n){const n=b.Wb();b.Vb(0,"div",1),b.Vb(1,"div",2),b.Lc(2,P,2,1,"div",3),b.Vb(3,"div",4),b.Vb(4,"div",5),b.Nc(5),b.Ub(),b.Vb(6,"div",6),b.Vb(7,"a",7),b.kc(8,"safe"),b.Nc(9),b.Ub(),b.Ub(),b.Ub(),b.Ub(),b.Vb(10,"div",8),b.Vb(11,"a",9),b.fc("click",(function(){return b.Ac(n),b.jc().sendLocateEvent()})),b.Nc(12," Locate "),b.Ub(),b.Lc(13,M,3,4,"a",10),b.Ub(),b.Ub()}if(2&n){const n=b.jc();b.Hb("with-image",n.show_image),b.Db(2),b.qc("ngIf",n.show_image),b.Db(3),b.Oc(n.user.name),b.Db(2),b.qc("href",b.mc(8,9,"mailto:"+n.user.email,"url"),b.Cc),b.Db(2),b.Oc(n.user.email),b.Db(2),b.qc("routerLink",b.tc(12,y))("queryParams",b.uc(13,w,n.user.email)),b.Db(2),b.qc("ngIf",n.user.phone)}}let x=(()=>{class n{constructor(n){this._settings=n}get show_image(){return this._settings.get("app.directory.show_avatars")}sendLocateEvent(){}sendCallEvent(){}}return n.\u0275fac=function(t){return new(t||n)(b.Pb(u.f))},n.\u0275cmp=b.Jb({type:n,selectors:[["a-directory-user-list-item"]],inputs:{user:"user"},decls:1,vars:1,consts:[["class","space-details",3,"with-image",4,"ngIf"],[1,"space-details"],[1,"group"],["class","avatar",4,"ngIf"],[1,"details"],[1,"name"],[1,"info"],["name","email",3,"href"],[1,"actions"],["mat-flat-button","","color","primary","button","","name","locate",3,"routerLink","queryParams","click"],["mat-flat-button","","color","primary","button","","name","call",3,"href","click",4,"ngIf"],[1,"avatar"],[3,"user"],["mat-flat-button","","color","primary","button","","name","call",3,"href","click"]],template:function(n,t){1&n&&b.Lc(0,v,14,15,"div",0),2&n&&b.qc("ngIf",t.user)},directives:[c.n,p.a,o.f,C.a],pipes:[O.b],styles:[".space-details[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;background-color:#fff;flex-wrap:wrap;overflow:hidden;transition:all .2s;padding:0 1em}.space-details[_ngcontent-%COMP%]:hover{background:rgba(0,0,0,.1)}.space-details[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{display:none}.with-image[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{display:initial}.group[_ngcontent-%COMP%]{display:flex;align-items:center;flex:1}@media screen and (max-width:639px){.group[_ngcontent-%COMP%]{border-bottom:1px solid #ccc}}.details[_ngcontent-%COMP%]{flex:1;min-width:50%;padding:.5em 1em}@media screen and (max-width:639px){.details[_ngcontent-%COMP%]{padding:1em}}.info[_ngcontent-%COMP%]{display:flex;align-items:center}.info[_ngcontent-%COMP%], .info[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:rgba(0,0,0,.65)}.name[_ngcontent-%COMP%]{font-size:1.2em}.location[_ngcontent-%COMP%]{font-size:.8em;flex:1;min-width:50%}.actions[_ngcontent-%COMP%], .capacity[_ngcontent-%COMP%]{display:flex;align-items:center}.actions[_ngcontent-%COMP%]{justify-content:center;flex-direction:column}@media screen and (max-width:639px){.actions[_ngcontent-%COMP%]{flex-direction:row;flex:1}}a[button][_ngcontent-%COMP%]{width:8em;margin:.5em .5em 0}a[button][_ngcontent-%COMP%]:last-child{margin-bottom:.5em}@media screen and (max-width:639px){a[button][_ngcontent-%COMP%]{width:12em;margin:.5em}}"]}),n})();var k=e("ukpX");function U(n,t){1&n&&b.Qb(0,"a-directory-user-list-item",14),2&n&&b.qc("user",t.$implicit)}function V(n,t){if(1&n&&(b.Tb(0),b.Vb(1,"div",12),b.Nc(2),b.Ub(),b.Lc(3,U,1,1,"a-directory-user-list-item",13),b.Sb()),2&n){const n=b.jc().$implicit,t=b.jc(2);b.Db(2),b.Oc(n),b.Db(1),b.qc("ngForOf",t.groupedUsers[n])}}function j(n,t){if(1&n&&(b.Tb(0),b.Lc(1,V,4,2,"ng-container",11),b.Sb()),2&n){const n=t.$implicit,e=b.jc(2);b.Db(1),b.qc("ngIf",e.groupedUsers[n].length)}}function q(n,t){if(1&n&&(b.Tb(0),b.Lc(1,j,2,1,"ng-container",10),b.Sb()),2&n){const n=b.jc();b.Db(1),b.qc("ngForOf",n.letters)}}const D=function(n){return{type:"icon",class:"material-icons",content:n}};function I(n,t){if(1&n&&(b.Vb(0,"div",15),b.Vb(1,"div",16),b.Vb(2,"div",17),b.Qb(3,"app-icon",18),b.Ub(),b.Vb(4,"div",19),b.Nc(5),b.Ub(),b.Ub(),b.Ub()),2&n){const n=b.jc();b.Db(3),b.qc("icon",b.uc(2,D,n.search_str&&n.search_str.length>=n.min_search_length?"close":"arrow_upward")),b.Db(2),b.Pc(" ",n.search_str&&n.search_str.length>=n.min_search_length?' No matches for "'+n.search_str+'"':"Type above to search for users"," ")}}const L="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),E=[{path:"",component:(()=>{class n extends u.c{constructor(n,t){super(),this._settings=n,this._users=t,this.user_list=[],this.search$=new i.b,this.groupedUsers={}}get min_search_length(){const n=this._settings.get("app.directory.min_search_length");return"number"==typeof n&&n>=0?n:3}ngOnInit(){this.search_results$=this.search$.pipe(Object(s.a)(400),Object(r.a)(),Object(g.a)(n=>(this.loading=!0,n.length>=this.min_search_length?this._users.query({q:n}).catch(()=>[]):Promise.resolve(this.user_list||[]))),Object(l.a)(n=>(this.loading=!1,n))),this.subscription("search_results",this.search_results$.subscribe(n=>{this.user_list=n,this.buildGroups(this.user_list)})),this.search$.next("")}get letters(){return L}buildGroups(n){const t=n.sort((n,t)=>n.name.localeCompare(t.name));for(const e of this.letters)this.groupedUsers[e]=t.filter(n=>n.name.startsWith(e))}}return n.\u0275fac=function(t){return new(t||n)(b.Pb(u.f),b.Pb(f.d))},n.\u0275cmp=b.Jb({type:n,selectors:[["a-directory-user-list"]],features:[b.Ab],decls:13,vars:12,consts:[[1,"directory","page"],[1,"header"],[3,"menu","menuChange"],[1,"actions"],[1,"search"],["placeholder","Search for a person...",3,"value","loading","autofocus","flat","valueChange"],[4,"ngIf","ngIfElse"],[1,"footer"],["empty_state",""],[3,"show","showChange"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"letter"],[3,"user",4,"ngFor","ngForOf"],[3,"user"],[1,"list"],[1,"info-block"],[1,"icon"],[3,"icon"],[1,"text"]],template:function(n,t){if(1&n&&(b.Vb(0,"div",0),b.Vb(1,"header",1),b.Vb(2,"a-topbar-header",2),b.fc("menuChange",(function(n){return t.show_menu=n})),b.Ub(),b.Ub(),b.Vb(3,"div",3),b.Vb(4,"div",4),b.Vb(5,"a-searchbar",5),b.fc("valueChange",(function(n){return t.search_str=n}))("valueChange",(function(n){return t.search$.next(n)})),b.Ub(),b.Ub(),b.Ub(),b.Vb(6,"main"),b.Lc(7,q,2,1,"ng-container",6),b.Ub(),b.Vb(8,"footer",7),b.Qb(9,"a-footer-menu"),b.Ub(),b.Ub(),b.Lc(10,I,6,4,"ng-template",null,8,b.Mc),b.Vb(12,"a-overlay-menu",9),b.fc("showChange",(function(n){return t.show_menu=n})),b.Ub()),2&n){const n=b.xc(11);b.Db(2),b.qc("menu",t.show_menu),b.Db(1),b.Hb("blank",!1)("has-back",!1),b.Db(2),b.qc("value",t.search_str)("loading",t.loading)("autofocus",!0)("flat",!0),b.Db(2),b.qc("ngIf",t.groupedUsers&&t.user_list.length)("ngIfElse",n),b.Db(5),b.qc("show",t.show_menu)}},directives:[d.a,h.a,c.n,m.a,_.a,c.m,x,k.a],styles:[".page[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;bottom:0;display:flex;flex-direction:column;background:#f0f0f0}.page[_ngcontent-%COMP%]   main[_ngcontent-%COMP%]{flex:1;overflow:auto}.page[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{height:3.5em}.page[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{background:#fff;display:flex;align-items:center;flex-wrap:wrap}.page[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.page[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .back[_ngcontent-%COMP%]{display:flex;align-items:center;flex:1}.page[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .back[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:none}.page[_ngcontent-%COMP%]   .actions.has-back[_ngcontent-%COMP%]   .back[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:block}.page[_ngcontent-%COMP%]   .actions.has-back[_ngcontent-%COMP%]   .back[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   app-icon[_ngcontent-%COMP%]{margin-left:.5em;font-size:1.5em}.page[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]{height:100%}.page[_ngcontent-%COMP%]   .actions.blank[_ngcontent-%COMP%]{background:transparent}.page[_ngcontent-%COMP%]   .actions.blank[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%], .page[_ngcontent-%COMP%]   .actions.blank[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]{display:none}.page[_ngcontent-%COMP%]   footer[_ngcontent-%COMP%]{height:3.5em;background:#fff}.page.directory[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center}.page.directory[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .back[_ngcontent-%COMP%]{display:none;width:0}.page.directory[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]{width:100%}.page.directory[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   a-searchbar[_ngcontent-%COMP%]   .searchbar[_ngcontent-%COMP%]{border-radius:unset;box-shadow:none}.page.directory[_ngcontent-%COMP%]   main[_ngcontent-%COMP%]{display:flex;flex-direction:column}.page.directory[_ngcontent-%COMP%]   main[_ngcontent-%COMP%]   a-directory-user-list-item[_ngcontent-%COMP%]{width:100%;margin-bottom:.5em}.page.directory[_ngcontent-%COMP%]   main[_ngcontent-%COMP%]   .letter[_ngcontent-%COMP%]{font-weight:700;font-size:1.2em;padding:.25em 1em}"]}),n})()}];let N=(()=>{class n{}return n.\u0275mod=b.Nb({type:n}),n.\u0275inj=b.Mb({factory:function(t){return new(t||n)},imports:[[c.c,o.g.forChild(E),a.a]]}),n})()}}]);
//# sourceMappingURL=directory-directory-module.4261f712b8c6d788220e.js.map