{"version":3,"file":"apps_concierge_src_app_day-view_day-view_module_ts.js","mappings":"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","names":["i0","space_r8","display_name","name","value_r9","ctx_r5","timeToOffset","now","offset_y","event_r15","_r17","$implicit","ctx_r16","viewEvent","i_r13","ctx_r14","date","endToOffset","duration","organiser","hjost","title","RoomBookingsTimelineComponent_ng_container_37_div_1_Template","ctx_r7","events","space_r12","id","_c1","RoomBookingsTimelineComponent","AsyncHandler","startOfMinute","Date","valueOf","is_today","isSameDay","this","constructor","_state","_dialog","super","offset_x","w_slots","h_slots","hours","Array","from","length","_","i","spaces","combineLatest","filtered","pipe","map","space","filter","event","resources","find","item","email","shareReplay","resetDate","setDate","previousDate","addDays","nextDate","ngOnInit","subscription","startPolling","console","log","differenceInMinutes","startOfDay","onResize","Math","floor","window","innerWidth","innerHeight","onScroll","_scroll_container","nativeElement","scrollLeft","scrollTop","open","EventDetailsModalComponent","data","t","i1","i2","core","Xpm","selectors","viewQuery","rf","ctx","RoomBookingsTimelineComponent_div_12_Template","RoomBookingsTimelineComponent_div_20_Template","RoomBookingsTimelineComponent_div_25_Template","RoomBookingsTimelineComponent_div_29_Template","RoomBookingsTimelineComponent_div_31_Template","RoomBookingsTimelineComponent_div_32_Template","RoomBookingsTimelineComponent_ng_container_37_Template","tmp_14_0","event_r2","tmp_2_0","images","tmp_3_0","host","_r4","ctx_r3","show","RoomBookingsApprovalsComponent","pending","decls","vars","consts","template","RoomBookingsApprovalsComponent_div_12_Template","RoomBookingsApprovalsComponent_button_14_Template","level_r1","RoomBookingsComponent","_org","_router","_route","zones","ui_options","options","levels","active_levels","updateZones","z","navigate","relativeTo","queryParams","zone_ids","join","setZones","updateUIOptions","o","setUIOptions","_this","queryParamMap","subscribe","params","has","get","split","level","levelWithID","building","buildings","bld","parent_id","_ref","_asyncToGenerator","take","toPromise","zone","lvl","push","_x","apply","arguments","i3","features","$event","RoomBookingsComponent_mat_option_13_Template","show_overflow","DayViewComponent","links","_settings","route","includes","attrs","_c0","ROUTES","path","component","DayViewModule","oAB","cJS","CommonModule","FormsModule","UIModule","SharedSpacesModule","SharedUsersModule","SharedCateringModule","RouterModule"],"sourceRoot":"webpack:///","sources":["./apps/concierge/src/app/day-view/room-timeline.component.ts","./apps/concierge/src/app/day-view/room-approvals.component.ts","./apps/concierge/src/app/day-view/room-bookings.component.ts","./apps/concierge/src/app/day-view/day-view.component.ts","./apps/concierge/src/app/day-view/day-view.module.ts"],"sourcesContent":["import { Component, ElementRef, ViewChild } from '@angular/core';\nimport {\n    add,\n    addDays,\n    differenceInMinutes,\n    isSameDay,\n    startOfDay,\n    startOfMinute,\n} from 'date-fns';\nimport { EventsStateService } from './events-state.service';\nimport { combineLatest } from 'rxjs';\nimport { map, shareReplay } from 'rxjs/operators';\nimport { AsyncHandler } from '@placeos/common';\nimport { MatDialog } from '@angular/material/dialog';\nimport { EventDetailsModalComponent } from '@placeos/events';\nimport { time } from 'console';\n\n@Component({\n    selector: 'room-bookings-timeline',\n    template: `\n        <div\n            class=\"relative flex items-center justify-center p-2 space-x-2 border-b border-gray-200\"\n        >\n            <app-icon class=\"text-2xl\">event</app-icon>\n            <h3 (dblclick)=\"resetDate()\">\n                {{ date | date: 'mediumDate' }}\n            </h3>\n            <button btn icon matRipple (click)=\"previousDate()\">\n                <app-icon>chevron_left</app-icon>\n            </button>\n            <button btn icon matRipple (click)=\"nextDate()\">\n                <app-icon>chevron_right</app-icon>\n            </button>\n            <div\n                class=\"absolute top-1/2 -translate-y-1/2 left-4 text-blue-500 text-sm\"\n                *ngIf=\"is_today\"\n            >\n                Today\n            </div>\n        </div>\n        <div\n            class=\"flex flex-col w-full flex-1 overflow-hidden\"\n            (window:resize)=\"onResize()\"\n        >\n            <div header class=\"flex items-center w-full h-16\">\n                <div\n                    times\n                    class=\"w-16 h-full flex flex-col items-center justify-end text-xs pb-2 opacity-60\"\n                >\n                    {{ date | date: 'z' }}\n                </div>\n                <div\n                    spaces\n                    class=\"relative flex-1 h-full overflow-hidden border-r border-gray-200\"\n                >\n                    <div\n                        class=\"flex absolute inset-y-0\"\n                        [style.left]=\"-offset_x + 'px'\"\n                    >\n                        <div\n                            class=\"flex flex-col items-center justify-center h-full w-56\"\n                            *ngFor=\"let space of spaces | async\"\n                        >\n                            {{ space.display_name || space.name }}\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div content class=\"flex w-full flex-1 h-px\">\n                <div\n                    times\n                    class=\"relative w-16 h-full overflow-y-hidden overflow-x-visible border-r border-gray-200\"\n                >\n                    <div\n                        class=\"absolute inset-x-0\"\n                        [style.top]=\"-offset_y + 'px'\"\n                    >\n                        <div\n                            class=\"relative block h-12\"\n                            *ngFor=\"let value of hours\"\n                        >\n                            <div\n                                class=\"absolute top-0 right-0 w-2 h-px bg-gray-200\"\n                            ></div>\n                            <div\n                                class=\"absolute top-0 right-3 -translate-y-1/2 text-xs opacity-60\"\n                            >\n                                {{ value % 12 ? value % 12 : '12'\n                                }}{{ value >= 12 ? 'PM' : 'AM' }}\n                            </div>\n                        </div>\n                        <div\n                            class=\"absolute bg-primary right-0 translate-x-1/2 -translate-y-1/2 h-2 w-2 rounded-full z-30\"\n                            [style.top]=\"timeToOffset(now) + 'px'\"\n                        ></div>\n                    </div>\n                </div>\n                <div spaces class=\"relative flex-1 h-full overflow-hidden w-px\">\n                    <div\n                        class=\"absolute top-0 flex h-full pointer-events-none\"\n                        [style.left]=\"-(offset_x % 224) + 'px'\"\n                    >\n                        <div\n                            *ngFor=\"let _ of w_slots\"\n                            class=\"w-56 h-full border-r border-gray-200\"\n                        ></div>\n                    </div>\n                    <div\n                        class=\"absolute left-0 w-full pointer-events-none\"\n                        [style.top]=\"-(offset_y % 48) + 'px'\"\n                    >\n                        <div\n                            *ngFor=\"let _ of h_slots\"\n                            class=\"h-12 w-full border-t border-gray-200\"\n                        ></div>\n                        <div\n                            *ngIf=\"is_today\"\n                            class=\"absolute inset-x-0 -translate-y-px h-0.5 bg-primary z-30\"\n                            [style.top]=\"\n                                timeToOffset(now) -\n                                offset_y -\n                                (48 - (offset_y % 48)) +\n                                48 +\n                                'px'\n                            \"\n                        >\n                            <div\n                                class=\"absolute bg-primary top-1/2 left-0 -translate-x-1/2 -translate-y-1/2 h-2 w-2 rounded-full\"\n                            ></div>\n                        </div>\n                    </div>\n                    <div\n                        #scroll_container\n                        class=\"relative w-full h-full overflow-auto z-10\"\n                        (scroll)=\"onScroll()\"\n                    >\n                        <div\n                            class=\"overflow-hidden relative\"\n                            [style.height]=\"24 * 3 + 'rem'\"\n                            [style.width]=\"\n                                (spaces | async)?.length * 14 + 'rem'\n                            \"\n                        >\n                            <ng-container\n                                *ngFor=\"\n                                    let space of spaces | async;\n                                    let i = index\n                                \"\n                            >\n                                <div\n                                    event\n                                    *ngFor=\"\n                                        let event of (events | async)[\n                                            space.id\n                                        ] || []\n                                    \"\n                                    class=\"absolute w-[13.625rem] bg-gray-100 shadow hover:border-gray-300 rounded-lg border border-gray-100 overflow-hidden px-3 py-2 text-xs\"\n                                    [style.left]=\"i * 14 + 0.125 + 'rem'\"\n                                    [style.top]=\"\n                                        timeToOffset(event.date) + 'px'\n                                    \"\n                                    [style.height]=\"\n                                        endToOffset(\n                                            event.date,\n                                            event.duration\n                                        ) + 'px'\n                                    \"\n                                    (click)=\"viewEvent(event)\"\n                                >\n                                    <div\n                                        class=\"absolute left-0 inset-y-0 w-1 bg-pink-600\"\n                                    ></div>\n                                    <p class=\"truncate\">\n                                        {{ event.date | date: 'shortTime' }}\n                                        &ndash;\n                                        {{\n                                            event.organiser?.name || event.hjost\n                                        }}\n                                    </p>\n                                    <p class=\"truncate\">{{ event.title }}</p>\n                                </div>\n                            </ng-container>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    `,\n    styles: [\n        `\n            :host {\n                display: flex;\n                flex-direction: column;\n            }\n        `,\n    ],\n})\nexport class RoomBookingsTimelineComponent extends AsyncHandler {\n    public date = Date.now();\n    public offset_x = 0;\n    public offset_y = 0;\n    public w_slots = [];\n    public h_slots = [];\n    public hours = Array.from({ length: 24 }, (_, i) => i);\n    public readonly spaces = this._state.spaces;\n    public readonly events = combineLatest([\n        this._state.spaces,\n        this._state.filtered,\n    ]).pipe(\n        map(([spaces, events]) => {\n            const map = {};\n            for (const space of spaces) {\n                map[space.id] = events.filter((event) =>\n                    event.resources.find(\n                        (item) =>\n                            item.id === space.id || item.email === space.email\n                    )\n                );\n            }\n            return map;\n        }),\n        shareReplay(1)\n    );\n\n    public get now() {\n        return startOfMinute(Date.now()).valueOf();\n    }\n\n    public readonly resetDate = () => {\n        this.date = Date.now();\n        this._state.setDate(this.date);\n    };\n    public readonly previousDate = () => {\n        this.date = addDays(this.date, -1).valueOf();\n        this._state.setDate(this.date);\n    };\n    public readonly nextDate = () => {\n        this.date = addDays(this.date, 1).valueOf();\n        this._state.setDate(this.date);\n    };\n\n    public get is_today() {\n        return isSameDay(this.date, Date.now());\n    }\n\n    @ViewChild('scroll_container', { static: true })\n    private _scroll_container: ElementRef<HTMLDivElement>;\n\n    constructor(\n        private _state: EventsStateService,\n        private _dialog: MatDialog\n    ) {\n        super();\n    }\n\n    public ngOnInit() {\n        this.subscription('poll', this._state.startPolling());\n        const date = Date.now();\n        console.log(\n            'Date Offset:',\n            this.timeToOffset(date),\n            new Date(),\n            differenceInMinutes(date, startOfDay(date))\n        );\n        this.onResize();\n    }\n\n    public timeToOffset(date: number) {\n        const diff = differenceInMinutes(date, startOfDay(date));\n        return (diff / 60) * 48;\n    }\n\n    public endToOffset(date: number, duration: number) {\n        const diff = differenceInMinutes(date, startOfDay(date));\n        return (diff / 60 + duration / 60) * 48;\n    }\n\n    public onResize() {\n        const w_slots = Math.floor(window.innerWidth / 224) + 1;\n        const h_slots = Math.floor(window.innerHeight / 48);\n        this.w_slots = Array.from({ length: w_slots }, (_, i) => i);\n        this.h_slots = Array.from({ length: h_slots }, (_, i) => i);\n    }\n\n    public onScroll() {\n        this.offset_x = this._scroll_container.nativeElement.scrollLeft;\n        this.offset_y = this._scroll_container.nativeElement.scrollTop;\n    }\n\n    public viewEvent(event: Event) {\n        this._dialog.open(EventDetailsModalComponent, {\n            data: event,\n        });\n    }\n}\n","import { Component } from '@angular/core';\nimport { EventsStateService } from './events-state.service';\n\n@Component({\n    selector: 'room-bookings-approvals',\n    template: `\n        <div\n            class=\"flex flex-col h-full overflow-hidden border-l border-gray-200\"\n            [style.width]=\"show ? '' : '0px'\"\n        >\n            <div\n                class=\"flex items-center p-2 border-b border-gray-200 space-x-2\"\n            >\n                <button\n                    btn\n                    icon\n                    matRipple\n                    class=\"bg-gray-200\"\n                    (click)=\"show = !show\"\n                >\n                    <app-icon>chevron_right</app-icon>\n                </button>\n                <h3 class=\"flex-1\">\n                    Pending Approval ({{ (pending | async).length || '0' }})\n                </h3>\n                <button btn icon matRipple>\n                    <app-icon>search</app-icon>\n                </button>\n            </div>\n            <div class=\"flex-1 overflow-auto p-2 space-y-2\">\n                <div\n                    *ngFor=\"let event of pending | async\"\n                    class=\"relative border border-gray-200 p-2 w-full rounded\"\n                >\n                    <h3>{{ event.title }}</h3>\n                    <p class=\"opacity-30 text-xs mb-2\">\n                        {{ event.date | date: 'medium' }}\n                    </p>\n                    <div class=\"w-64 h-32 overflow-hidden mb-2\">\n                        <img\n                            class=\"object-cover min-w-full min-h-full\"\n                            [src]=\"\n                                (event.resources[0].email | space | async)\n                                    ?.images[0]\n                            \"\n                        />\n                    </div>\n                    <div class=\"flex items-center space-x-2 mb-2\">\n                        <div\n                            class=\"h-8 w-8 bg-gray-100 rounded-full flex items-center justify-center\"\n                        >\n                            <app-icon class=\"text-xl\">place</app-icon>\n                        </div>\n                        <div class=\"flex-1 text-xs\">\n                            {{\n                                (event.resources[0].email | space | async)\n                                    ?.display_name ||\n                                    (event.resources[0].email | space | async)\n                                        ?.name ||\n                                    'No Location'\n                            }}\n                        </div>\n                    </div>\n                    <div class=\"flex items-center space-x-2 mb-2\">\n                        <div\n                            class=\"h-8 w-8 bg-gray-100 rounded-full flex items-center justify-center\"\n                        >\n                            <app-icon class=\"text-xl\">person</app-icon>\n                        </div>\n                        <div class=\"flex-1 text-xs\">\n                            {{ event.organiser?.name || event.host }}\n                        </div>\n                    </div>\n                    <div class=\"flex items-center space-x-2\">\n                        <button\n                            btn\n                            matRipple\n                            class=\"border-green-600 bg-green-600/30 flex items-center space-x-2 text-black\"\n                        >\n                            <div>Approve</div>\n                            <app-icon class=\"text-green-600\">done</app-icon>\n                        </button>\n                        <button\n                            btn\n                            matRipple\n                            class=\"border-red-600 bg-red-600/30 flex items-center space-x-2 text-black\"\n                        >\n                            <div>Decline</div>\n                            <app-icon class=\"text-red-600\">close</app-icon>\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <button\n            btn\n            icon\n            matRipple\n            class=\"bg-pending absolute top-2 -left-8 shadow text-white\"\n            *ngIf=\"!show\"\n            (click)=\"show = !show\"\n        >\n            <app-icon>chevron_left</app-icon>\n        </button>\n    `,\n    styles: [\n        `\n            :host {\n                display: block;\n                position: relative;\n                height: 100%;\n            }\n        `,\n    ],\n})\nexport class RoomBookingsApprovalsComponent {\n    public show = true;\n    public readonly pending = this._state.pending;\n\n    constructor(private _state: EventsStateService) {}\n}\n","import { Component } from '@angular/core';\nimport { OrganisationService } from '@placeos/organisation';\nimport { EventsStateService } from './events-state.service';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { AsyncHandler } from '@placeos/common';\nimport { take } from 'rxjs/operators';\n\n@Component({\n    selector: 'room-bookings',\n    template: `\n        <div class=\"absolute inset-0 flex flex-col overflow-hidden pl-8\">\n            <div class=\"flex items-center justify-between w-full py-4 pr-8\">\n                <h2 class=\"text-2xl font-medium\">Room Bookings</h2>\n                <button btn matRipple class=\"space-x-2\">\n                    <div>New Booking</div>\n                    <app-icon>add</app-icon>\n                </button>\n            </div>\n            <div class=\"w-full flex items-center\">\n                <mat-form-field appearance=\"outline\" class=\"h-[3.5rem]\">\n                    <mat-select\n                        multiple\n                        [ngModel]=\"zones | async\"\n                        (ngModelChange)=\"updateZones($event)\"\n                        placeholder=\"All Levels\"\n                    >\n                        <mat-option\n                            *ngFor=\"let level of levels | async\"\n                            [value]=\"level.id\"\n                        >\n                            {{ level.display_name || level.name }}\n                        </mat-option>\n                    </mat-select>\n                </mat-form-field>\n                <div class=\"border-l h-full ml-8 mr-4\"></div>\n                <mat-slide-toggle\n                    class=\"m-2\"\n                    [ngModel]=\"(ui_options | async)?.show_overflow\"\n                    (ngModelChange)=\"updateUIOptions({ show_overflow: $event })\"\n                >\n                    <div class=\"text-xs\">Setup / Breakdown</div>\n                </mat-slide-toggle>\n            </div>\n            <div class=\"flex w-full flex-1 h-px border-t mt-4 border-gray-200\">\n                <room-bookings-timeline class=\"flex-1\"/>\n                <room-bookings-approvals/>\n            </div>\n        </div>\n    `,\n    styles: [``],\n})\nexport class RoomBookingsComponent extends AsyncHandler {\n    public readonly zones = this._state.zones;\n    public readonly ui_options = this._state.options;\n    /** List of levels for the active building */\n    public readonly levels = this._org.active_levels;\n    /** List of levels for the active building */\n    public readonly updateZones = (z) => {\n        this._router.navigate([], {\n            relativeTo: this._route,\n            queryParams: { zone_ids: z.join(',') },\n        });\n        this._state.setZones(z);\n    };\n    public readonly updateUIOptions = (o) => this._state.setUIOptions(o);\n\n    constructor(\n        private _org: OrganisationService,\n        private _state: EventsStateService,\n        private _router: Router,\n        private _route: ActivatedRoute\n    ) {\n        super();\n    }\n\n    public ngOnInit() {\n        this.subscription(\n            'route.query',\n            this._route.queryParamMap.subscribe((params) => {\n                if (params.has('zone_ids')) {\n                    const zones = params.get('zone_ids').split(',');\n                    if (zones.length) {\n                        const level = this._org.levelWithID(zones);\n                        if (!level) return;\n                        this._org.building = this._org.buildings.find(\n                            (bld) => bld.id === level.parent_id\n                        );\n                    }\n                }\n            })\n        );\n        this.subscription(\n            'levels',\n            this._org.active_levels.subscribe(async (levels) => {\n                const zones = (\n                    await this.zones.pipe(take(1)).toPromise()\n                ).filter((zone) => levels.find((lvl) => lvl.id === zone));\n                if (!zones.length && levels.length) {\n                    zones.push(levels[0].id);\n                }\n                this.updateZones(zones);\n            })\n        );\n    }\n}\n","import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { ApplicationLinkInternal, SettingsService } from '@placeos/common';\n\n@Component({\n    selector: '[app-dayview]',\n    template: `\n        <app-topbar></app-topbar>\n        <div class=\"flex flex-1 h-px\">\n            <app-sidebar></app-sidebar>\n            <main class=\"relative flex flex-col flex-1 w-1/2 h-full\">\n                <room-bookings></room-bookings>\n                <!-- <dayview-topbar></dayview-topbar>\n                <dayview-timeline></dayview-timeline> -->\n            </main>\n        </div>\n    `,\n    styles: [\n        `\n            :host {\n                display: flex;\n                flex-direction: column;\n                height: 100%;\n                width: 100%;\n                background-color: #fff;\n            }\n        `,\n    ],\n})\nexport class DayViewComponent implements OnInit {\n    public get links(): ApplicationLinkInternal[] {\n        return this._settings.get('app.general.menu') || [];\n    }\n\n    constructor(private _settings: SettingsService, private _router: Router) {}\n\n    public ngOnInit() {\n        if (!this.links.find((_) => _.route.includes('day-view'))) {\n            this._router.navigate([`/${this.links[0].route}`]);\n        }\n    }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { RouterModule, Route } from '@angular/router';\n\nimport { UIModule } from '../ui/ui.module';\n\nimport { DayViewComponent } from './day-view.component';\nimport { DayviewTopbarComponent } from './dayview-topbar.component';\nimport { DayviewTimelineComponent } from './dayview-timeline.component';\nimport { DayviewSpaceComponent } from './dayview-space.component';\nimport { DayviewEventComponent } from './dayview-event.component';\n\nimport { BookingModalComponent } from './booking-modal.component';\nimport { EventFormComponent } from './event-form.component';\nimport { SharedSpacesModule } from '@placeos/spaces';\nimport { SharedUsersModule } from '@placeos/users';\nimport { SharedCateringModule } from '@placeos/catering';\nimport { RoomBookingsComponent } from './room-bookings.component';\nimport { RoomBookingsTimelineComponent } from './room-timeline.component';\nimport { RoomBookingsApprovalsComponent } from './room-approvals.component';\n\nconst ROUTES: Route[] = [{ path: '', component: DayViewComponent }];\n\n@NgModule({\n    declarations: [\n        DayViewComponent,\n        DayviewTopbarComponent,\n        DayviewTimelineComponent,\n        DayviewSpaceComponent,\n        DayviewEventComponent,\n\n        BookingModalComponent,\n        EventFormComponent,\n\n        RoomBookingsComponent,\n        RoomBookingsTimelineComponent,\n        RoomBookingsApprovalsComponent,\n    ],\n    imports: [\n        CommonModule,\n        FormsModule,\n        UIModule,\n        SharedSpacesModule,\n        SharedUsersModule,\n        SharedCateringModule,\n        RouterModule.forChild(ROUTES),\n    ],\n})\nexport class DayViewModule {}\n"],"x_google_ignoreList":[]}