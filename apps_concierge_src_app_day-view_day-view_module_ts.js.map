{"version":3,"file":"apps_concierge_src_app_day-view_day-view_module_ts.js","mappings":"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","names":["i0","space_r7","display_name","name","value_r8","event_r14","_r16","$implicit","ctx_r15","viewEvent","i_r12","ctx_r13","timeToOffset","date","endToOffset","duration","organiser","hjost","title","RoomBookingsTimelineComponent_ng_container_35_div_1_Template","ctx_r6","events","space_r11","id","_c1","RoomBookingsTimelineComponent","AsyncHandler","is_today","isSameDay","this","Date","now","constructor","_state","_dialog","super","offset_x","offset_y","w_slots","h_slots","hours","Array","from","length","_","i","spaces","combineLatest","filtered","pipe","map","space","filter","event","resources","find","item","email","shareReplay","resetDate","setDate","previousDate","addDays","valueOf","nextDate","ngOnInit","subscription","startPolling","onResize","differenceInMinutes","startOfDay","Math","floor","window","innerWidth","innerHeight","onScroll","_scroll_container","nativeElement","scrollLeft","scrollTop","open","EventDetailsModalComponent","data","t","i1","i2","core","Xpm","selectors","viewQuery","rf","ctx","RoomBookingsTimelineComponent_div_12_Template","RoomBookingsTimelineComponent_div_20_Template","RoomBookingsTimelineComponent_div_25_Template","RoomBookingsTimelineComponent_div_28_Template","RoomBookingsTimelineComponent_div_30_Template","RoomBookingsTimelineComponent_ng_container_35_Template","tmp_12_0","_r2","ctx_r1","show","RoomBookingsApprovalsComponent","approvals","decls","vars","consts","template","RoomBookingsApprovalsComponent_button_11_Template","level_r1","RoomBookingsComponent","_org","_router","_route","zones","ui_options","options","levels","active_levels","updateZones","z","navigate","relativeTo","queryParams","zone_ids","join","setZones","updateUIOptions","o","setUIOptions","_this","queryParamMap","subscribe","params","has","get","split","level","levelWithID","building","buildings","bld","parent_id","_ref","_asyncToGenerator","take","toPromise","zone","lvl","push","_x","apply","arguments","i3","features","$event","RoomBookingsComponent_mat_option_13_Template","show_overflow","tmp_2_0","DayViewComponent","links","_settings","route","includes","attrs","_c0","ROUTES","path","component","DayViewModule","oAB","cJS","CommonModule","FormsModule","UIModule","SharedSpacesModule","SharedUsersModule","SharedCateringModule","RouterModule"],"sourceRoot":"webpack:///","sources":["./apps/concierge/src/app/day-view/room-timeline.component.ts","./apps/concierge/src/app/day-view/room-approvals.component.ts","./apps/concierge/src/app/day-view/room-bookings.component.ts","./apps/concierge/src/app/day-view/day-view.component.ts","./apps/concierge/src/app/day-view/day-view.module.ts"],"sourcesContent":["import { Component, ElementRef, ViewChild } from '@angular/core';\nimport {\n    add,\n    addDays,\n    differenceInMinutes,\n    isSameDay,\n    startOfDay,\n} from 'date-fns';\nimport { EventsStateService } from './events-state.service';\nimport { combineLatest } from 'rxjs';\nimport { map, shareReplay } from 'rxjs/operators';\nimport { AsyncHandler } from '@placeos/common';\nimport { MatDialog } from '@angular/material/dialog';\nimport { EventDetailsModalComponent } from '@placeos/events';\n\n@Component({\n    selector: 'room-bookings-timeline',\n    template: `\n        <div\n            class=\"relative flex items-center justify-center p-2 space-x-2 border-b border-gray-200\"\n        >\n            <app-icon class=\"text-2xl\">event</app-icon>\n            <h3 (dblclick)=\"resetDate()\">\n                {{ date | date: 'mediumDate' }}\n            </h3>\n            <button btn icon matRipple (click)=\"previousDate()\">\n                <app-icon>chevron_left</app-icon>\n            </button>\n            <button btn icon matRipple (click)=\"nextDate()\">\n                <app-icon>chevron_right</app-icon>\n            </button>\n            <div\n                class=\"absolute top-1/2 -translate-y-1/2 left-4 text-blue-500 text-sm\"\n                *ngIf=\"is_today\"\n            >\n                Today\n            </div>\n        </div>\n        <div\n            class=\"flex flex-col w-full flex-1 overflow-hidden\"\n            (window:resize)=\"onResize()\"\n        >\n            <div header class=\"flex items-center w-full h-16\">\n                <div\n                    times\n                    class=\"w-16 h-full flex flex-col items-center justify-end text-xs pb-2 opacity-60\"\n                >\n                    {{ date | date: 'z' }}\n                </div>\n                <div\n                    spaces\n                    class=\"relative flex-1 h-full overflow-hidden border-r border-gray-200\"\n                >\n                    <div\n                        class=\"flex absolute inset-y-0\"\n                        [style.left]=\"-offset_x + 'px'\"\n                    >\n                        <div\n                            class=\"flex flex-col items-center justify-center h-full w-56\"\n                            *ngFor=\"let space of spaces | async\"\n                        >\n                            {{ space.display_name || space.name }}\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div content class=\"flex w-full flex-1 h-px\">\n                <div\n                    times\n                    class=\"relative w-16 h-full overflow-hidden border-r border-gray-200\"\n                >\n                    <div\n                        class=\"absolute inset-x-0\"\n                        [style.top]=\"-offset_y + 'px'\"\n                    >\n                        <div\n                            class=\"relative block h-12\"\n                            *ngFor=\"let value of hours\"\n                        >\n                            <div\n                                class=\"absolute top-0 right-0 w-2 h-px bg-gray-200\"\n                            ></div>\n                            <div\n                                class=\"absolute top-0 right-3 -translate-y-1/2 text-xs opacity-60\"\n                            >\n                                {{ value % 12 ? value % 12 : '12'\n                                }}{{ value >= 12 ? 'PM' : 'AM' }}\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div spaces class=\"relative flex-1 h-full overflow-hidden w-px\">\n                    <div\n                        class=\"absolute top-0 flex h-full pointer-events-none\"\n                        [style.left]=\"-(offset_x % 224) + 'px'\"\n                    >\n                        <div\n                            *ngFor=\"let _ of w_slots\"\n                            class=\"w-56 h-full border-r border-gray-200\"\n                        ></div>\n                    </div>\n                    <div\n                        class=\"absolute left-0 w-full pointer-events-none\"\n                        [style.top]=\"-(offset_y % 48) + 'px'\"\n                    >\n                        <div\n                            *ngFor=\"let _ of h_slots\"\n                            class=\"h-12 w-full border-t border-gray-200\"\n                        ></div>\n                    </div>\n                    <div\n                        #scroll_container\n                        class=\"relative w-full h-full overflow-auto\"\n                        (scroll)=\"onScroll()\"\n                    >\n                        <div\n                            class=\"overflow-hidden relative\"\n                            [style.height]=\"24 * 3 + 'rem'\"\n                            [style.width]=\"\n                                (spaces | async)?.length * 14 + 'rem'\n                            \"\n                        >\n                            <ng-container\n                                *ngFor=\"\n                                    let space of spaces | async;\n                                    let i = index\n                                \"\n                            >\n                                <div\n                                    event\n                                    *ngFor=\"\n                                        let event of (events | async)[\n                                            space.id\n                                        ] || []\n                                    \"\n                                    class=\"absolute w-[13.625rem] bg-gray-100 shadow hover:border-gray-300 rounded-lg border border-gray-100 overflow-hidden px-3 py-2 text-xs\"\n                                    [style.left]=\"i * 14 + 0.125 + 'rem'\"\n                                    [style.top]=\"\n                                        timeToOffset(event.date) + 'px'\n                                    \"\n                                    [style.height]=\"\n                                        endToOffset(\n                                            event.date,\n                                            event.duration\n                                        ) + 'px'\n                                    \"\n                                    (click)=\"viewEvent(event)\"\n                                >\n                                    <div\n                                        class=\"absolute left-0 inset-y-0 w-1 bg-pink-600\"\n                                    ></div>\n                                    <p class=\"truncate\">\n                                        {{ event.date | date: 'shortTime' }}\n                                        &ndash;\n                                        {{\n                                            event.organiser?.name || event.hjost\n                                        }}\n                                    </p>\n                                    <p class=\"truncate\">{{ event.title }}</p>\n                                </div>\n                            </ng-container>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    `,\n    styles: [\n        `\n            :host {\n                display: flex;\n                flex-direction: column;\n            }\n        `,\n    ],\n})\nexport class RoomBookingsTimelineComponent extends AsyncHandler {\n    public date = Date.now();\n    public offset_x = 0;\n    public offset_y = 0;\n    public w_slots = [];\n    public h_slots = [];\n    public hours = Array.from({ length: 24 }, (_, i) => i);\n    public readonly spaces = this._state.spaces;\n    public readonly events = combineLatest([\n        this._state.spaces,\n        this._state.filtered,\n    ]).pipe(\n        map(([spaces, events]) => {\n            const map = {};\n            for (const space of spaces) {\n                map[space.id] = events.filter((event) =>\n                    event.resources.find(\n                        (item) =>\n                            item.id === space.id || item.email === space.email\n                    )\n                );\n            }\n            return map;\n        }),\n        shareReplay(1)\n    );\n\n    public readonly resetDate = () => {\n        this.date = Date.now();\n        this._state.setDate(this.date);\n    };\n    public readonly previousDate = () => {\n        this.date = addDays(this.date, -1).valueOf();\n        this._state.setDate(this.date);\n    };\n    public readonly nextDate = () => {\n        this.date = addDays(this.date, 1).valueOf();\n        this._state.setDate(this.date);\n    };\n\n    public get is_today() {\n        return isSameDay(this.date, Date.now());\n    }\n\n    @ViewChild('scroll_container', { static: true })\n    private _scroll_container: ElementRef<HTMLDivElement>;\n\n    constructor(\n        private _state: EventsStateService,\n        private _dialog: MatDialog\n    ) {\n        super();\n    }\n\n    public ngOnInit() {\n        this.subscription('poll', this._state.startPolling());\n        this.onResize();\n    }\n\n    public timeToOffset(date: number) {\n        const diff = differenceInMinutes(date, startOfDay(date));\n        return (diff / 60) * 48;\n    }\n\n    public endToOffset(date: number, duration: number) {\n        const diff = differenceInMinutes(date, startOfDay(date));\n        return (diff / 60 + duration / 60) * 48;\n    }\n\n    public onResize() {\n        const w_slots = Math.floor(window.innerWidth / 224) + 1;\n        const h_slots = Math.floor(window.innerHeight / 48);\n        this.w_slots = Array.from({ length: w_slots }, (_, i) => i);\n        this.h_slots = Array.from({ length: h_slots }, (_, i) => i);\n    }\n\n    public onScroll() {\n        this.offset_x = this._scroll_container.nativeElement.scrollLeft;\n        this.offset_y = this._scroll_container.nativeElement.scrollTop;\n    }\n\n    public viewEvent(event: Event) {\n        this._dialog.open(EventDetailsModalComponent, {\n            data: event,\n        });\n    }\n}\n","import { Component } from '@angular/core';\n\n@Component({\n    selector: 'room-bookings-approvals',\n    template: `\n        <div\n            class=\"flex flex-col h-full overflow-hidden border-l border-gray-200\"\n            [style.width]=\"show ? '' : '0px'\"\n        >\n            <div\n                class=\"flex items-center p-2 border-b border-gray-200 space-x-2\"\n            >\n                <button\n                    btn\n                    icon\n                    matRipple\n                    class=\"bg-gray-200\"\n                    (click)=\"show = !show\"\n                >\n                    <app-icon>chevron_right</app-icon>\n                </button>\n                <h3 class=\"flex-1\">\n                    Pending Approval ({{ approvals.length || '0' }})\n                </h3>\n                <button btn icon matRipple>\n                    <app-icon>search</app-icon>\n                </button>\n            </div>\n            <div class=\"flex-1 overflow-auto\"></div>\n        </div>\n        <button\n            btn\n            icon\n            matRipple\n            class=\"bg-pending absolute top-2 -left-8 shadow text-white\"\n            *ngIf=\"!show\"\n            (click)=\"show = !show\"\n        >\n            <app-icon>chevron_left</app-icon>\n        </button>\n    `,\n    styles: [\n        `\n            :host {\n                display: block;\n                position: relative;\n                height: 100%;\n            }\n        `,\n    ],\n})\nexport class RoomBookingsApprovalsComponent {\n    public show = true;\n    public readonly approvals = [];\n}\n","import { Component } from '@angular/core';\nimport { OrganisationService } from '@placeos/organisation';\nimport { EventsStateService } from './events-state.service';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { AsyncHandler } from '@placeos/common';\nimport { take } from 'rxjs/operators';\n\n@Component({\n    selector: 'room-bookings',\n    template: `\n        <div class=\"absolute inset-0 flex flex-col overflow-hidden pl-8\">\n            <div class=\"flex items-center justify-between w-full py-4 pr-8\">\n                <h2 class=\"text-2xl font-medium\">Room Bookings</h2>\n                <button btn matRipple class=\"space-x-2\">\n                    <div>New Booking</div>\n                    <app-icon>add</app-icon>\n                </button>\n            </div>\n            <div class=\"w-full flex items-center\">\n                <mat-form-field appearance=\"outline\" class=\"h-[3.5rem]\">\n                    <mat-select\n                        multiple\n                        [ngModel]=\"zones | async\"\n                        (ngModelChange)=\"updateZones($event)\"\n                        placeholder=\"All Levels\"\n                    >\n                        <mat-option\n                            *ngFor=\"let level of levels | async\"\n                            [value]=\"level.id\"\n                        >\n                            {{ level.display_name || level.name }}\n                        </mat-option>\n                    </mat-select>\n                </mat-form-field>\n                <div class=\"border-l h-full ml-8 mr-4\"></div>\n                <mat-slide-toggle\n                    class=\"m-2\"\n                    [ngModel]=\"(ui_options | async)?.show_overflow\"\n                    (ngModelChange)=\"updateUIOptions({ show_overflow: $event })\"\n                >\n                    <div class=\"text-xs\">Setup / Breakdown</div>\n                </mat-slide-toggle>\n            </div>\n            <div class=\"flex w-full flex-1 h-px border-t mt-4 border-gray-200\">\n                <room-bookings-timeline class=\"flex-1\"/>\n                <room-bookings-approvals/>\n            </div>\n        </div>\n    `,\n    styles: [``],\n})\nexport class RoomBookingsComponent extends AsyncHandler {\n    public readonly zones = this._state.zones;\n    public readonly ui_options = this._state.options;\n    /** List of levels for the active building */\n    public readonly levels = this._org.active_levels;\n    /** List of levels for the active building */\n    public readonly updateZones = (z) => {\n        this._router.navigate([], {\n            relativeTo: this._route,\n            queryParams: { zone_ids: z.join(',') },\n        });\n        this._state.setZones(z);\n    };\n    public readonly updateUIOptions = (o) => this._state.setUIOptions(o);\n\n    constructor(\n        private _org: OrganisationService,\n        private _state: EventsStateService,\n        private _router: Router,\n        private _route: ActivatedRoute\n    ) {\n        super();\n    }\n\n    public ngOnInit() {\n        this.subscription(\n            'route.query',\n            this._route.queryParamMap.subscribe((params) => {\n                if (params.has('zone_ids')) {\n                    const zones = params.get('zone_ids').split(',');\n                    if (zones.length) {\n                        const level = this._org.levelWithID(zones);\n                        if (!level) return;\n                        this._org.building = this._org.buildings.find(\n                            (bld) => bld.id === level.parent_id\n                        );\n                    }\n                }\n            })\n        );\n        this.subscription(\n            'levels',\n            this._org.active_levels.subscribe(async (levels) => {\n                const zones = (\n                    await this.zones.pipe(take(1)).toPromise()\n                ).filter((zone) => levels.find((lvl) => lvl.id === zone));\n                if (!zones.length && levels.length) {\n                    zones.push(levels[0].id);\n                }\n                this.updateZones(zones);\n            })\n        );\n    }\n}\n","import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { ApplicationLinkInternal, SettingsService } from '@placeos/common';\n\n@Component({\n    selector: '[app-dayview]',\n    template: `\n        <app-topbar></app-topbar>\n        <div class=\"flex flex-1 h-px\">\n            <app-sidebar></app-sidebar>\n            <main class=\"relative flex flex-col flex-1 w-1/2 h-full\">\n                <room-bookings></room-bookings>\n                <!-- <dayview-topbar></dayview-topbar>\n                <dayview-timeline></dayview-timeline> -->\n            </main>\n        </div>\n    `,\n    styles: [\n        `\n            :host {\n                display: flex;\n                flex-direction: column;\n                height: 100%;\n                width: 100%;\n                background-color: #fff;\n            }\n        `,\n    ],\n})\nexport class DayViewComponent implements OnInit {\n    public get links(): ApplicationLinkInternal[] {\n        return this._settings.get('app.general.menu') || [];\n    }\n\n    constructor(private _settings: SettingsService, private _router: Router) {}\n\n    public ngOnInit() {\n        if (!this.links.find((_) => _.route.includes('day-view'))) {\n            this._router.navigate([`/${this.links[0].route}`]);\n        }\n    }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { RouterModule, Route } from '@angular/router';\n\nimport { UIModule } from '../ui/ui.module';\n\nimport { DayViewComponent } from './day-view.component';\nimport { DayviewTopbarComponent } from './dayview-topbar.component';\nimport { DayviewTimelineComponent } from './dayview-timeline.component';\nimport { DayviewSpaceComponent } from './dayview-space.component';\nimport { DayviewEventComponent } from './dayview-event.component';\n\nimport { BookingModalComponent } from './booking-modal.component';\nimport { EventFormComponent } from './event-form.component';\nimport { SharedSpacesModule } from '@placeos/spaces';\nimport { SharedUsersModule } from '@placeos/users';\nimport { SharedCateringModule } from '@placeos/catering';\nimport { RoomBookingsComponent } from './room-bookings.component';\nimport { RoomBookingsTimelineComponent } from './room-timeline.component';\nimport { RoomBookingsApprovalsComponent } from './room-approvals.component';\n\nconst ROUTES: Route[] = [{ path: '', component: DayViewComponent }];\n\n@NgModule({\n    declarations: [\n        DayViewComponent,\n        DayviewTopbarComponent,\n        DayviewTimelineComponent,\n        DayviewSpaceComponent,\n        DayviewEventComponent,\n\n        BookingModalComponent,\n        EventFormComponent,\n\n        RoomBookingsComponent,\n        RoomBookingsTimelineComponent,\n        RoomBookingsApprovalsComponent,\n    ],\n    imports: [\n        CommonModule,\n        FormsModule,\n        UIModule,\n        SharedSpacesModule,\n        SharedUsersModule,\n        SharedCateringModule,\n        RouterModule.forChild(ROUTES),\n    ],\n})\nexport class DayViewModule {}\n"],"x_google_ignoreList":[]}