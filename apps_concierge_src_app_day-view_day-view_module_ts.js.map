{"version":3,"file":"apps_concierge_src_app_day-view_day-view_module_ts.js","mappings":"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","sources":["./apps/concierge/src/app/day-view/booking-modal.component.ts","./apps/concierge/src/app/day-view/day-view.component.ts","./apps/concierge/src/app/day-view/day-view.module.ts","./apps/concierge/src/app/day-view/dayview-event.component.ts","./apps/concierge/src/app/day-view/dayview-space.component.ts","./apps/concierge/src/app/day-view/dayview-timeline.component.ts","./apps/concierge/src/app/day-view/dayview-topbar.component.ts","./apps/concierge/src/app/day-view/event-form.component.ts","./apps/concierge/src/app/day-view/new-dayview.component.ts","./apps/concierge/src/app/day-view/room-approvals.component.ts","./apps/concierge/src/app/day-view/room-booking-search.component.ts","./apps/concierge/src/app/day-view/room-bookings.component.ts","./apps/concierge/src/app/day-view/room-timeline.component.ts","./apps/concierge/src/app/day-view/room-week-timeline.component.ts","./libs/users/src/index.ts","./libs/users/src/lib/location.class.ts","./node_modules/date-fns/isSameWeek.mjs"],"sourcesContent":["import { Component, EventEmitter, Inject, OnInit, Output } from '@angular/core';\nimport { MatDialogRef, MAT_DIALOG_DATA } from '@angular/material/dialog';\n\nimport {\n    DialogEvent,\n    SettingsService,\n    notifyError,\n    notifySuccess,\n} from '@placeos/common';\nimport { CalendarEvent, EventFormService, queryEvents } from '@placeos/events';\n\nexport interface BookingModalData {\n    event?: CalendarEvent;\n}\n\n@Component({\n    selector: 'booking-modal',\n    template: `\n        <header>\n            <h2>{{ form?.value.id ? 'Edit' : 'New' }} Booking</h2>\n            <div class=\"flex-1 w-0\"></div>\n            <button icon mat-dialog-close>\n                <app-icon>close</app-icon>\n            </button>\n        </header>\n        <main class=\"relative p-4\" [class.overflow-auto]=\"!(loading | async)\">\n            <event-form\n                [class.pointer-events-none]=\"loading | async\"\n                [form]=\"form\"\n            ></event-form>\n            <div\n                loading\n                class=\"absolute inset-0 flex flex-col items-center justify-center\"\n                *ngIf=\"loading | async\"\n            >\n                <mat-spinner [diameter]=\"48\" class=\"mb-4\"></mat-spinner>\n                <p>{{ loading | async }}</p>\n            </div>\n        </main>\n        <footer\n            *ngIf=\"!(loading | async)\"\n            class=\"flex justify-center items-center p-2 border-t border-base-200\"\n        >\n            <button btn matRipple class=\"w-32\" (click)=\"save()\">Save</button>\n        </footer>\n    `,\n    styles: [\n        `\n            main {\n                width: 32rem;\n                max-height: 65vh;\n                max-width: calc(100vw - 4rem);\n            }\n        `,\n    ],\n})\nexport class BookingModalComponent implements OnInit {\n    @Output() public event = new EventEmitter<DialogEvent>();\n    /** Observable for the loading state of the form */\n    public readonly loading = this._service.loading;\n\n    public get form() {\n        return this._service.form;\n    }\n\n    constructor(\n        @Inject(MAT_DIALOG_DATA) private _data: BookingModalData,\n        private _service: EventFormService,\n        private _dialog_ref: MatDialogRef<BookingModalComponent>,\n        private _settings: SettingsService,\n    ) {}\n\n    public async ngOnInit() {\n        let event = this._data.event;\n        if (event?.creator !== event?.mailbox) {\n            event =\n                (\n                    await queryEvents({\n                        period_start: event.event_start,\n                        period_end: event.event_end,\n                        ical_uid: event.ical_uid,\n                    }).toPromise()\n                ).find((_) => _.ical_uid === (event as any).ical_uid) || event;\n        }\n        if (event && !event.id) {\n            (event as any).all_day =\n                this._settings.get('app.events.all_day_default') ??\n                event.all_day;\n        }\n        this._service.newForm(event);\n    }\n\n    public async save() {\n        const event = await this._service.postForm().catch((_) => {\n            notifyError(_);\n            throw _;\n        });\n        this.event.emit({ reason: 'done', metadata: event });\n        notifySuccess('Successfully created booking');\n        this._dialog_ref.close();\n    }\n}\n","import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { ApplicationLinkInternal, SettingsService } from '@placeos/common';\n\n@Component({\n    selector: '[app-dayview]',\n    template: `\n        <sidebar class=\"h-full\"></sidebar>\n        <main\n            class=\"relative overflow-hidden flex flex-col flex-1 w-1/2 h-full bg-base-200\"\n        >\n            <dayview-topbar></dayview-topbar>\n            <dayview-timeline></dayview-timeline>\n        </main>\n    `,\n    styles: [\n        `\n            :host {\n                display: flex;\n                height: 100%;\n                width: 100%;\n            }\n        `,\n    ],\n})\nexport class DayViewComponent implements OnInit {\n    public get links(): ApplicationLinkInternal[] {\n        return this._settings.get('app.general.menu') || [];\n    }\n\n    constructor(private _settings: SettingsService, private _router: Router) {}\n\n    public ngOnInit() {\n        if (!this.links.find((_) => _.route.includes('day-view'))) {\n            this._router.navigate([`/${this.links[0].route}`]);\n        }\n    }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule, DatePipe } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { RouterModule, Route } from '@angular/router';\n\nimport { UIModule } from '../ui/ui.module';\n\nimport { DayViewComponent } from './day-view.component';\nimport { DayviewTopbarComponent } from './dayview-topbar.component';\nimport { DayviewTimelineComponent } from './dayview-timeline.component';\nimport { DayviewSpaceComponent } from './dayview-space.component';\nimport { DayviewEventComponent } from './dayview-event.component';\n\nimport { BookingModalComponent } from './booking-modal.component';\nimport { EventFormComponent } from './event-form.component';\nimport { SharedSpacesModule } from '@placeos/spaces';\nimport { SharedUsersModule } from '@placeos/users';\nimport { SharedCateringModule } from '@placeos/catering';\nimport { RoomBookingsComponent } from './room-bookings.component';\nimport { RoomBookingsTimelineComponent } from './room-timeline.component';\nimport { RoomBookingsApprovalsComponent } from './room-approvals.component';\nimport { NewDayViewComponent } from './new-dayview.component';\nimport { MeetingFormDetailsComponent } from 'apps/workplace/src/app/book/meeting-flow/meeting-form-details.component';\nimport { EventBookModalComponent } from './event-book-modal.component';\nimport { RoomWeekBookingsTimelineComponent } from './room-week-timeline.component';\nimport { RoomBookingSearchComponent } from './room-booking-search.component';\n\nconst ROUTES: Route[] = [\n    { path: '', component: DayViewComponent },\n    { path: 'new', component: NewDayViewComponent },\n];\n\n@NgModule({\n    declarations: [\n        DayViewComponent,\n        DayviewTopbarComponent,\n        DayviewTimelineComponent,\n        DayviewSpaceComponent,\n        DayviewEventComponent,\n        NewDayViewComponent,\n\n        BookingModalComponent,\n        EventFormComponent,\n\n        RoomBookingsComponent,\n        RoomBookingsTimelineComponent,\n        RoomBookingsApprovalsComponent,\n        RoomBookingSearchComponent,\n        EventBookModalComponent,\n        MeetingFormDetailsComponent,\n        RoomWeekBookingsTimelineComponent,\n    ],\n    imports: [\n        CommonModule,\n        FormsModule,\n        UIModule,\n        SharedSpacesModule,\n        SharedUsersModule,\n        SharedCateringModule,\n        RouterModule.forChild(ROUTES),\n    ],\n})\nexport class DayViewModule {}\n","import { Component, Input, OnChanges, SimpleChanges } from '@angular/core';\nimport { startOfDay, differenceInMinutes, format, addMinutes } from 'date-fns';\n\nimport { CalendarEvent } from '@placeos/events';\nimport { EventsStateService } from './events-state.service';\nimport { SettingsService } from '@placeos/common';\n\nconst DAY_IN_MINUTES = 24 * 60;\n\n@Component({\n    selector: 'dayview-event',\n    template: `\n        <div\n            *ngIf=\"(ui_options | async)?.show_overflow\"\n            [class]=\"\n                'overflow-block absolute rounded overflow-hidden w-full ' + type\n            \"\n            [style.top]=\"overflow_top * 100 + '%'\"\n            [style.height]=\"overflow_height * 100 + '%'\"\n        ></div>\n        <div\n            event\n            matRipple\n            [class]=\"\n                'absolute rounded overflow-hidden text-sm border border-base-200 shadow-sm z-10 hover:z-30 ' +\n                type\n            \"\n            *ngIf=\"event\"\n            [style.top]=\"top * 100 + '%'\"\n            [style.height]=\"height * 100 + '%'\"\n            (click)=\"view(event)\"\n        >\n            <div class=\"px-2 py-1 font-medium\">{{ event.organiser?.name }}</div>\n            <div class=\"py-1 flex items-center\" *ngIf=\"event.duration > 30\">\n                <app-icon class=\"mx-2\">title</app-icon>\n                {{ event.title }}\n            </div>\n            <div class=\"py-1 flex items-center\" *ngIf=\"event.duration > 60\">\n                <app-icon class=\"mx-2\">schedule</app-icon>\n                {{ time }}\n            </div>\n            <div class=\"py-1 flex items-center\" *ngIf=\"event.duration > 90\">\n                <app-icon class=\"mx-2\">people</app-icon>\n                {{ event.attendees.length }} Attendee{{\n                    event.attendees.length === 1 ? '' : 's'\n                }}\n            </div>\n        </div>\n        <div\n            *ngIf=\"event && (ui_options | async)?.show_cleaning\"\n            cleaning\n            class=\"absolute rounded overflow-hidden flex w-full shadow p-2 bg-base-100 z-20 hover:!h-48\"\n            [style.top]=\"top * 100 + '%'\"\n            [style.height]=\"height * 100 + '%'\"\n        >\n            <div\n                [class]=\"\n                    'icon flex items-center justify-center mr-2 text-3xl rounded h-12 w-12 text-pending ' +\n                    event.ext('cleaning_status')\n                \"\n            >\n                <app-icon>{{\n                    event.ext('cleaning_status') === 'done' ? 'done' : 'warning'\n                }}</app-icon>\n            </div>\n            <div class=\"flex-1 w-1/2\">\n                {{\n                    event.ext('cleaning_status') === 'done'\n                        ? 'Finished'\n                        : 'Scheduled to'\n                }}\n                clean at\n                {{\n                    event.ext('cleaning_time') || event.event_end * 1000\n                        | date: time_format\n                }}\n            </div>\n        </div>\n    `,\n    styles: [\n        `\n            [event] {\n                background-color: #ccc;\n                width: 12rem;\n                z-index: 100;\n                transition: box-shadow 200ms;\n            }\n\n            [event]:hover {\n                box-shadow: 0 1px 3px 1px rgba(0, 0, 0, 0.2),\n                    0 1px 1px 0 rgba(0, 0, 0, 0.14),\n                    0 2px 1px -1px rgba(0, 0, 0, 0.12) !important;\n                cursor: pointer;\n            }\n\n            .overflow-block {\n                opacity: 0.3;\n                width: 12rem;\n            }\n\n            .internal {\n                background-color: #1565c0;\n                color: #fff;\n            }\n\n            .icon {\n                background-color: #f0f0f0;\n            }\n\n            .icon.done {\n                color: #21a453;\n            }\n\n            .external {\n                background-color: #ad1457;\n                color: #fff;\n            }\n\n            .cancelled {\n                background-color: #ccc;\n            }\n        `,\n    ],\n})\nexport class DayviewEventComponent implements OnChanges {\n    /** Event to display */\n    @Input() public event: CalendarEvent;\n    /** Top position for the event */\n    public top = -999;\n    /** Height of the event on the calendar */\n    public height = 0;\n    /** Top position for the event */\n    public overflow_top = -999;\n    /** Height of the event on the calendar */\n    public overflow_height = 0;\n\n    public readonly ui_options = this._state.options;\n\n    public readonly view = (e) => this._state.setEvent(e);\n\n    public get time() {\n        const date = new Date(this.event.date);\n        return (\n            format(date, this.time_format) +\n            ' - ' +\n            format(addMinutes(date, this.event.duration), this.time_format)\n        );\n    }\n\n    public get type() {\n        return this.event.guests.length\n            ? 'external'\n            : this.event.status === 'declined'\n            ? 'cancelled'\n            : 'internal';\n    }\n\n    public get time_format() {\n        return this._settings.time_format;\n    }\n\n    constructor(\n        private _state: EventsStateService,\n        private _settings: SettingsService\n    ) {}\n\n    public ngOnChanges(changes: SimpleChanges) {\n        if (changes.event && this.event) {\n            const start = startOfDay(new Date(this.event.date));\n            const diff = differenceInMinutes(new Date(this.event.date), start);\n            this.top = diff / DAY_IN_MINUTES;\n            this.height = this.event.duration / DAY_IN_MINUTES;\n            this.overflow_top =\n                (diff - (this.event.setup_time || 0)) / DAY_IN_MINUTES;\n            this.overflow_height =\n                (this.event.duration +\n                    (this.event.setup_time || 0) +\n                    (this.event.breakdown_time || 0)) /\n                DAY_IN_MINUTES;\n        }\n    }\n}\n","import { Component, Input, OnInit } from '@angular/core';\nimport { map } from 'rxjs/operators';\n\nimport { CalendarEvent } from '@placeos/events';\nimport { Space } from '@placeos/spaces';\nimport { EventsStateService } from './events-state.service';\nimport { AsyncHandler } from '@placeos/common';\n\n@Component({\n    selector: 'dayview-space',\n    template: `\n        <ng-container *ngIf=\"space\">\n            <dayview-event\n                *ngFor=\"let event of events | async\"\n                [event]=\"event\"\n            ></dayview-event>\n        </ng-container>\n    `,\n    styles: [\n        `\n            :host {\n                position: relative;\n            }\n        `,\n    ],\n})\nexport class DayviewSpaceComponent extends AsyncHandler implements OnInit {\n    /** Space to display events for */\n    @Input() public space: Space;\n\n    public shown_event: CalendarEvent;\n    /** List of events for the selected space */\n    public readonly events = this._state.filtered.pipe(\n        map((bookings) => {\n            return bookings.filter((bkn) =>\n                bkn.resources.find((space) => this.space.email === space.email)\n            );\n        })\n    );\n\n    constructor(private _state: EventsStateService) {\n        super();\n    }\n\n    public ngOnInit(): void {\n        this.subscription('events', this._state.filtered.subscribe());\n    }\n}\n","import { Component, OnDestroy, OnInit } from '@angular/core';\nimport { querySystems } from '@placeos/ts-client';\nimport { combineLatest, of } from 'rxjs';\nimport {\n    catchError,\n    filter,\n    map,\n    shareReplay,\n    switchMap,\n} from 'rxjs/operators';\n\nimport { AsyncHandler } from '@placeos/common';\nimport { OrganisationService } from '@placeos/organisation';\nimport { Space } from '@placeos/spaces';\nimport { EventsStateService } from './events-state.service';\n\nconst HOUR_BLOCKS = new Array(24).fill(0).map((_, idx) => {\n    return (idx % 12 === 0 ? 12 : idx % 12) + (idx >= 12 ? ' PM' : ' AM');\n});\n\n@Component({\n    selector: 'dayview-timeline',\n    template: `\n        <div class=\"absolute inset-0 flex\">\n            <div class=\"time h-full w-24 overflow-hidden bg-base-100 relative\">\n                <div header class=\"relative h-16 z-50\">\n                    <div\n                        class=\"bg-base-100 absolute top-0 left-0 right-0 bottom-8\"\n                    ></div>\n                </div>\n                <div\n                    *ngFor=\"let time of blocks\"\n                    change-transform\n                    class=\"relative h-16 border-r border-base-300 z-10\"\n                    [style.transform]=\"'translateY(-' + scroll.y + 'px)'\"\n                >\n                    <div\n                        class=\"absolute text-center w-full text-xs top-0 transform -translate-y-1/2 opacity-40\"\n                    >\n                        {{ time }}\n                    </div>\n                    <div\n                        class=\"absolute h-px w-2 top-0 right-0 bg-base-300\"\n                    ></div>\n                </div>\n                <div class=\"absolute h-8 w-px top-8 right-0 bg-base-300\"></div>\n            </div>\n            <div class=\"h-full flex-1 flex flex-col w-1/2\">\n                <div\n                    header\n                    class=\"flex relative overflow-hidden border-b border-base-300 border-opacity-50 bg-base-100 h-16 w-full\"\n                >\n                    <div\n                        *ngFor=\"let space of space_list | async\"\n                        change-transform\n                        class=\"relative h-16 w-48 min-w-[12rem]\"\n                        [style.transform]=\"'translateX(-' + scroll.x + 'px)'\"\n                    >\n                        <div\n                            bar\n                            class=\"absolute h-8 w-px bottom-0 -left-px bg-base-300\"\n                        ></div>\n                        <div class=\"name m-2 text-center\">\n                            {{ space.display_name || space.name }}\n                        </div>\n                    </div>\n                </div>\n                <div\n                    #scroll_el\n                    content\n                    class=\"relative flex flex-1 overflow-auto\"\n                    (scroll)=\"onScroll($event)\"\n                >\n                    <dayview-space\n                        *ngFor=\"let space of space_list | async\"\n                        [space]=\"space\"\n                        class=\"w-48 min-w-[12rem] h-[96rem] border-r border-base-300\"\n                    ></dayview-space>\n                    <div\n                        *ngFor=\"let time of blocks; let i = index\"\n                        class=\"absolute bg-base-300 h-px min-w-full left-0\"\n                        [style.width]=\"\n                            (space_list | async)?.length * 12 + 'rem'\n                        \"\n                        [style.top]=\"i * 4 + 'rem'\"\n                    ></div>\n                </div>\n            </div>\n            <mat-progress-bar\n                *ngIf=\"loading | async\"\n                mode=\"indeterminate\"\n                class=\"absolute bottom-0 left-0 right-0\"\n            ></mat-progress-bar>\n            <view-event-details\n                *ngIf=\"event | async\"\n                [event]=\"event | async\"\n            ></view-event-details>\n        </div>\n    `,\n    styles: [\n        `\n            :host {\n                position: relative;\n                height: 100%;\n                width: 100%;\n            }\n\n            [change-transform] {\n                will-change: transform;\n            }\n        `,\n    ],\n})\nexport class DayviewTimelineComponent\n    extends AsyncHandler\n    implements OnInit, OnDestroy\n{\n    /** Time blocks to display */\n    public readonly blocks: string[] = HOUR_BLOCKS;\n    /** Current scroll position of the content */\n    public scroll: { x: number; y: number } = { x: 0, y: 0 };\n    /** Whether event data is loading */\n    public readonly loading = this._state.loading;\n    /** Event to show more details about */\n    public readonly event = this._state.event;\n\n    public readonly spaces = this._org.active_building.pipe(\n        filter((_) => !!_),\n        switchMap(({ id }) =>\n            querySystems({ zone_id: id, limit: 1000 }).pipe(\n                catchError(() => of({ data: [] }))\n            )\n        ),\n        map(({ data }) =>\n            data.map(\n                (_) =>\n                    new Space({\n                        ..._,\n                        level: this._org.levelWithID(_.zones),\n                    } as any)\n            )\n        ),\n        shareReplay(1)\n    );\n    /** List of spaces to display */\n    public readonly space_list = combineLatest([\n        this.spaces,\n        this._state.zones,\n    ]).pipe(\n        map(\n            ([spaces, zones]) =>\n                spaces.filter(\n                    (space) =>\n                        !zones?.length ||\n                        space.zones.find((z) => zones.includes(z))\n                ) || []\n        )\n    );\n\n    constructor(\n        private _org: OrganisationService,\n        private _state: EventsStateService\n    ) {\n        super();\n    }\n\n    public ngOnInit() {\n        this._state.startPolling();\n    }\n\n    public ngOnDestroy() {\n        this._state.stopPolling();\n    }\n\n    public onScroll(e) {\n        requestAnimationFrame(\n            () =>\n                (this.scroll = {\n                    x: e.srcElement.scrollLeft,\n                    y: e.srcElement.scrollTop,\n                })\n        );\n    }\n}\n","import { Component } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { debounceTime, first } from 'rxjs/operators';\n\nimport { AsyncHandler, Identity, SettingsService } from '@placeos/common';\nimport { OrganisationService } from '@placeos/organisation';\nimport { BookingUIOptions, EventsStateService } from './events-state.service';\n\n@Component({\n    selector: 'dayview-topbar',\n    template: `\n        <div\n            class=\"flex items-center px-4 h-20 bg-base-100 border-b border-base-200\"\n        >\n            <button\n                btn\n                matRipple\n                new\n                class=\"w-12 xl:w-auto overflow-hidden\"\n                (click)=\"newBooking()\"\n            >\n                <div class=\"flex items-center\">\n                    <app-icon\n                        class=\"mr-2\"\n                        [icon]=\"{ class: 'material-icons', content: 'add' }\"\n                    ></app-icon>\n                    <div class=\"hidden xl:block\">New Booking</div>\n                </div>\n            </button>\n            <mat-form-field appearance=\"outline\">\n                <mat-select\n                    multiple\n                    [(ngModel)]=\"zones\"\n                    (ngModelChange)=\"updateZones($event)\"\n                    placeholder=\"All Levels\"\n                >\n                    <mat-option\n                        *ngFor=\"let level of levels | async\"\n                        [value]=\"level.id\"\n                    >\n                        {{ level.display_name || level.name }}\n                    </mat-option>\n                </mat-select>\n            </mat-form-field>\n            <mat-form-field appearance=\"outline\">\n                <mat-select\n                    multiple\n                    [(ngModel)]=\"type_list\"\n                    (ngModelChange)=\"updateTypes($event)\"\n                    placeholder=\"No Events\"\n                >\n                    <mat-select-trigger>Legend</mat-select-trigger>\n                    <mat-option *ngFor=\"let type of types\" [value]=\"type.id\">\n                        {{ type.name }}\n                    </mat-option>\n                </mat-select>\n            </mat-form-field>\n            <mat-slide-toggle\n                class=\"m-2\"\n                [ngModel]=\"(ui_options | async)?.show_overflow\"\n                (ngModelChange)=\"updateUIOptions({ show_overflow: $event })\"\n                *ngIf=\"allow_setup_breakdown\"\n            >\n                <div class=\"text-xs\">Setup / Breakdown</div>\n            </mat-slide-toggle>\n            <div class=\"flex-1 w-0\"></div>\n            <!-- <searchbar class=\"mr-2\"></searchbar> -->\n            <date-options (dateChange)=\"setDate($event)\"></date-options>\n        </div>\n    `,\n    styles: [\n        `\n            button {\n                min-width: 0;\n                padding: 0 0.85rem;\n            }\n\n            mat-form-field {\n                height: 3.25em;\n                width: 8em;\n                margin-left: 1em;\n            }\n\n            mat-slide-toggle div {\n                width: 5.5em;\n                white-space: initial;\n                line-height: 1.2em;\n            }\n        `,\n    ],\n})\nexport class DayviewTopbarComponent extends AsyncHandler {\n    /** List of selected levels */\n    public zones: string[] = [];\n\n    public readonly types: Identity[] = [\n        { id: 'internal', name: 'Internal' },\n        { id: 'external', name: 'External' },\n        { id: 'cancelled', name: 'Cancelled' },\n    ];\n    /** List of selected types */\n    public type_list: string[] = this.types.map((i) => `${i.id}`);\n    /** List of levels for the active building */\n    public readonly levels = this._org.active_levels;\n    /** List of levels for the active building */\n    public readonly ui_options = this._state.options;\n    /** Set filtered date */\n    public readonly setDate = (d) => this._state.setDate(d);\n    /**  */\n    public readonly newBooking = (d?) => this._state.newBooking(d);\n    /** List of levels for the active building */\n    public readonly updateZones = (z) => {\n        this._router.navigate([], {\n            relativeTo: this._route,\n            queryParams: { zone_ids: z.join(',') },\n        });\n    };\n    /** List of levels for the active building */\n    public readonly updateTypes = (types) =>\n        this._state.setFilters({\n            hide_type: this.types.reduce((list, item) => {\n                !types.includes(item.id) ? list.push(item) : '';\n                return list;\n            }, []),\n        });\n\n    public updateUIOptions(options: BookingUIOptions) {\n        this._state.setUIOptions(options);\n    }\n\n    public get allow_setup_breakdown() {\n        return this._settings.get('app.events.allow_setup_breakdown');\n    }\n\n    constructor(\n        private _state: EventsStateService,\n        private _org: OrganisationService,\n        private _route: ActivatedRoute,\n        private _router: Router,\n        private _settings: SettingsService,\n    ) {\n        super();\n    }\n\n    public async ngOnInit() {\n        await this._org.initialised.pipe(first((_) => _)).toPromise();\n        this.subscription(\n            'route.query',\n            this._route.queryParamMap.subscribe((params) => {\n                if (params.has('zone_ids')) {\n                    const zones = params.get('zone_ids').split(',');\n                    if (zones.length) {\n                        this.zones = zones;\n                        const level = this._org.levelWithID(zones);\n                        if (!level) return;\n                        this._org.building = this._org.buildings.find(\n                            (bld) => bld.id === level.parent_id,\n                        );\n                    }\n                }\n            }),\n        );\n        this.updateTypes(this.type_list);\n    }\n}\n","import { Component, Input } from '@angular/core';\nimport { FormGroup } from '@angular/forms';\nimport { MatDialog } from '@angular/material/dialog';\nimport { SettingsService } from '@placeos/common';\nimport { CateringOrderStateService } from 'libs/catering/src/lib/catering-order-modal/catering-order-state.service';\nimport { BehaviorSubject, combineLatest } from 'rxjs';\nimport { map, tap } from 'rxjs/operators';\n\n@Component({\n    selector: 'event-form',\n    template: `\n        <form *ngIf=\"form\" [formGroup]=\"form\">\n            <div class=\"flex flex-col\">\n                <label for=\"title\">Title<span>*</span>:</label>\n                <mat-form-field appearance=\"outline\">\n                    <input\n                        matInput\n                        name=\"title\"\n                        formControlName=\"title\"\n                        placeholder=\"Meeting Title\"\n                    />\n                    <mat-error>A valid title is required</mat-error>\n                </mat-form-field>\n            </div>\n            <div class=\"flex flex-col relative\">\n                <label for=\"date\">Date<span>*</span>:</label>\n                <a-date-field name=\"date\" formControlName=\"date\"></a-date-field>\n                <mat-checkbox\n                    formControlName=\"all_day\"\n                    *ngIf=\"allow_all_day\"\n                    class=\"absolute -top-2 right-0\"\n                >\n                    {{ 'FORM.ALL_DAY' | translate }}\n                </mat-checkbox>\n            </div>\n            <div class=\"flex space-x-2\" *ngIf=\"!form.value.all_day\">\n                <div class=\"flex flex-col flex-1\">\n                    <label for=\"start-time\">Start Time<span>*</span>:</label>\n                    <a-time-field\n                        name=\"start-time\"\n                        [ngModel]=\"form.get('date').value\"\n                        (ngModelChange)=\"form.patchValue({ date: $event })\"\n                        [ngModelOptions]=\"{ standalone: true }\"\n                        [use_24hr]=\"use_24hr_time\"\n                    ></a-time-field>\n                </div>\n                <div class=\"flex flex-col flex-1\">\n                    <label for=\"duration\">Duration<span>*</span>:</label>\n                    <a-duration-field\n                        name=\"duration\"\n                        [time]=\"form.controls?.date?.value\"\n                        formControlName=\"duration\"\n                        [use_24hr]=\"use_24hr_time\"\n                    ></a-duration-field>\n                </div>\n            </div>\n            <div class=\"flex flex-col flex-1\">\n                <label for=\"organiser\">Host<span>*</span>:</label>\n                <a-user-search-field\n                    name=\"organiser\"\n                    formControlName=\"organiser\"\n                    class=\"mb-4\"\n                ></a-user-search-field>\n            </div>\n            <div class=\"flex flex-col flex-1\">\n                <label for=\"attendees\">Attendees<span>*</span>:</label>\n                <a-user-list-field\n                    name=\"attendees\"\n                    formControlName=\"attendees\"\n                ></a-user-list-field>\n            </div>\n            <div class=\"flex flex-col flex-1\">\n                <label for=\"space\">Space<span>*</span>:</label>\n                <space-list-field\n                    class=\"w-full\"\n                    formControlName=\"resources\"\n                ></space-list-field>\n            </div>\n            <div\n                class=\"py-2\"\n                *ngIf=\"(has_catering | async) && form.contains('catering')\"\n            >\n                <label for=\"catering\">Catering:</label>\n                <catering-list-field\n                    name=\"catering\"\n                    formControlName=\"catering\"\n                    [options]=\"{\n                        date: form.value.date,\n                        duration: form.value.duration,\n                        all_day: form.value.all_day,\n                        zone_id: form.value.resources[0]?.level?.parent_id\n                    }\"\n                ></catering-list-field>\n                <mat-form-field\n                    appearance=\"outline\"\n                    class=\"w-full mt-2\"\n                    *ngIf=\"form.value.catering?.length && has_codes | async\"\n                    (openedChange)=\"focusInput()\"\n                >\n                    <mat-select\n                        formControlName=\"catering_charge_code\"\n                        placeholder=\"Charge Code\"\n                    >\n                        <input\n                            #input\n                            class=\"sticky top-0 bg-base-100 px-4 py-3 text-base border-x-0 border-t-0 border-b focus:border-b border-base-200 w-full rounded-none z-50\"\n                            [ngModel]=\"code_filter.getValue()\"\n                            (ngModelChange)=\"code_filter.next($event)\"\n                            [ngModelOptions]=\"{ standalone: true }\"\n                            placeholder=\"Search charge codes...\"\n                        />\n                        <mat-option class=\"hidden\"></mat-option>\n                        <mat-option\n                            *ngFor=\"let code of filtered_codes | async\"\n                            [value]=\"code\"\n                        >\n                            {{ code }}\n                        </mat-option>\n                    </mat-select>\n                    <mat-error> Catering charge code is required </mat-error>\n                </mat-form-field>\n                <mat-form-field\n                    appearance=\"outline\"\n                    class=\"w-full\"\n                    [class.mt-2]=\"\n                        !(form.value.catering?.length && has_codes | async)\n                    \"\n                    *ngIf=\"form.value.catering?.length\"\n                >\n                    <textarea\n                        matInput\n                        formControlName=\"catering_notes\"\n                        placeholder=\"Extra catering details...\"\n                    ></textarea>\n                    <mat-error> Catering Order notes are required </mat-error>\n                </mat-form-field>\n            </div>\n            <div class=\"flex flex-col flex-1 mb-4\" *ngIf=\"has_assets\">\n                <label for=\"space\">Assets:</label>\n                <asset-list-field\n                    [date]=\"form.value.date\"\n                    [duration]=\"form.value.duration\"\n                    formControlName=\"assets\"\n                ></asset-list-field>\n            </div>\n            <div class=\"flex space-x-2\">\n                <div class=\"flex flex-col space-y-2 flex-1\">\n                    <label for=\"setup\">Setup Duration</label>\n                    <a-duration-field\n                        name=\"setup\"\n                        formControlName=\"setup_time\"\n                        [min]=\"0\"\n                        [custom_options]=\"[5, 10]\"\n                    ></a-duration-field>\n                </div>\n                <div class=\"flex flex-col space-y-2 flex-1\">\n                    <label for=\"breakdown\">Breakdown Duration</label>\n                    <a-duration-field\n                        name=\"breakdown\"\n                        [min]=\"0\"\n                        formControlName=\"breakdown_time\"\n                        [custom_options]=\"[5, 10]\"\n                    ></a-duration-field>\n                </div>\n            </div>\n        </form>\n    `,\n    styles: [``],\n})\nexport class EventFormComponent {\n    @Input() public form: FormGroup;\n\n    public code_filter = new BehaviorSubject('');\n\n    public readonly has_catering = this._catering.available_menu.pipe(\n        map((l) => l.length > 0)\n    );\n\n    public readonly has_codes = this._catering.charge_codes.pipe(\n        map((l) => l.length > 0),\n        tap((has_codes) => {\n            if (!has_codes) {\n                this.form.get('catering_charge_code').setValidators([]);\n                this.form.updateValueAndValidity();\n            }\n        })\n    );\n\n    public readonly filtered_codes = combineLatest([\n        this.code_filter,\n        this._catering.charge_codes,\n    ]).pipe(\n        map(([s, l]) =>\n            l.filter((_) => _.toLowerCase().includes(s.toLowerCase()))\n        )\n    );\n\n    public get allow_all_day() {\n        return !!this._settings.get('app.events.allow_all_day');\n    }\n\n    public get has_assets() {\n        return !!this._settings.get('app.events.has_assets');\n    }\n\n    public get use_24hr_time() {\n        return this._settings.get('app.use_24_hour_time');\n    }\n\n    constructor(\n        private _dialog: MatDialog,\n        private _settings: SettingsService,\n        private _catering: CateringOrderStateService\n    ) {}\n}\n","import { Component } from '@angular/core';\n\n@Component({\n    selector: '[app-new-dayview]',\n    template: `\n        <app-topbar></app-topbar>\n        <div class=\"flex flex-1 h-px\">\n            <app-sidebar></app-sidebar>\n            <main class=\"relative flex flex-col flex-1 w-1/2 h-full\">\n                <room-bookings></room-bookings>\n            </main>\n        </div>\n    `,\n    styles: [\n        `\n            :host {\n                display: flex;\n                flex-direction: column;\n                height: 100%;\n                width: 100%;\n                background-color: var(--b1);\n            }\n\n            @media print {\n                :host {\n                    display: none;\n                }\n            }\n        `,\n    ],\n})\nexport class NewDayViewComponent {}\n","import { Component } from '@angular/core';\nimport { EventsStateService } from './events-state.service';\nimport { OrganisationService } from '@placeos/organisation';\nimport { getModule } from '@placeos/ts-client';\nimport { CalendarEvent } from '@placeos/events';\nimport { BehaviorSubject, combineLatest } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { getTimezoneOffsetString, SettingsService } from '@placeos/common';\n\n@Component({\n    selector: 'room-bookings-approvals',\n    template: `\n        <div\n            class=\"flex flex-col h-full overflow-hidden border-l border-base-200 w-[20rem]\"\n            [style.width]=\"show ? '' : '0px'\"\n        >\n            <div\n                class=\"flex items-center p-2 justify-center border-b border-base-200 space-x-2 relative\"\n            >\n                <button\n                    btn\n                    icon\n                    matRipple\n                    class=\"absolute top-4 left-2 bg-base-200\"\n                    matTooltip=\"Hide Pending Approvals\"\n                    matTooltipPosition=\"left\"\n                    (click)=\"show = !show\"\n                >\n                    <app-icon>chevron_right</app-icon>\n                </button>\n                <h3 class=\"flex-1 py-4 text-center\">\n                    Pending Approval ({{\n                        (filtered_pending | async)?.length || '0'\n                    }}\n                    of {{ (pending | async)?.length || '0' }})\n                </h3>\n            </div>\n            <div class=\"border-b border-base-200 relative\">\n                <input\n                    type=\"text\"\n                    placeholder=\"Search...\"\n                    class=\"w-full py-3 pr-4 pl-10\"\n                    [ngModel]=\"search | async\"\n                    (ngModelChange)=\"search.next($event)\"\n                />\n                <app-icon\n                    class=\"absolute top-1/2 left-2 -translate-y-1/2 text-2xl pointer-events-none\"\n                >\n                    search\n                </app-icon>\n            </div>\n            <div class=\"flex-1 overflow-auto p-2 space-y-2\">\n                <div\n                    *ngIf=\"!(filtered_pending | async)?.length\"\n                    class=\"w-full h-full flex flex-col items-center justify-center space-y-2\"\n                >\n                    <img src=\"assets/icons/no-pending.svg\" />\n                    <p>No pending requests</p>\n                </div>\n                <div\n                    *ngFor=\"let event of filtered_pending | async\"\n                    class=\"relative border border-base-200 p-2 w-full rounded\"\n                >\n                    <h3>{{ event.title }}</h3>\n                    <p class=\"opacity-30 text-xs mb-2\">\n                        {{ event.date | date: 'mediumDate' : tz }}\n                        {{ event.date | date: time_format : tz }}\n                        <span *ngIf=\"tz\">{{\n                            event.date | date: 'z' : tz\n                        }}</span>\n                    </p>\n                    <div class=\"w-64 h-32 overflow-hidden mb-2 bg-base-200\">\n                        <img\n                            auth\n                            class=\"object-cover min-w-full min-h-full\"\n                            [source]=\"\n                                (event.resources[0]?.email | space | async)\n                                    ?.images[0]\n                            \"\n                            *ngIf=\"event.resources.length\"\n                        />\n                    </div>\n                    <div class=\"flex items-center space-x-2 mb-2\">\n                        <div\n                            class=\"h-8 w-8 bg-base-200 rounded-full flex items-center justify-center\"\n                        >\n                            <app-icon class=\"text-xl\">place</app-icon>\n                        </div>\n                        <div class=\"flex-1 text-xs\">\n                            {{\n                                (\n                                    event.resources.length &&\n                                    (event.resources[0]?.email | space | async)\n                                )?.display_name ||\n                                    (event.resources[0]?.email | space | async)\n                                        ?.name ||\n                                    'No Location'\n                            }}\n                        </div>\n                    </div>\n                    <div class=\"flex items-center space-x-2 mb-2\">\n                        <div\n                            class=\"h-8 w-8 bg-base-200 rounded-full flex items-center justify-center\"\n                        >\n                            <app-icon class=\"text-xl\">person</app-icon>\n                        </div>\n                        <div class=\"flex-1 text-xs\">\n                            {{ event.organiser?.name || event.host }}\n                        </div>\n                    </div>\n                    <div class=\"flex items-center space-x-2\">\n                        <button\n                            btn\n                            matRipple\n                            class=\"border-success bg-success-light text-black flex flex-1 items-center space-x-2\"\n                            [disabled]=\"status[event.id] === 'accept'\"\n                            (click)=\"approve(event)\"\n                        >\n                            <div>\n                                {{\n                                    status[event.id] === 'accept'\n                                        ? 'Approved'\n                                        : 'Approve'\n                                }}\n                            </div>\n                            <app-icon class=\"text-success\">done</app-icon>\n                        </button>\n                        <button\n                            btn\n                            matRipple\n                            class=\"border-error bg-error-light text-black flex flex-1 items-center space-x-2 \"\n                            [disabled]=\"status[event.id] === 'decline'\"\n                            (click)=\"reject(event)\"\n                        >\n                            <div>\n                                {{\n                                    status[event.id] === 'decline'\n                                        ? 'Declined'\n                                        : 'Decline'\n                                }}\n                            </div>\n                            <app-icon class=\"text-error\">close</app-icon>\n                        </button>\n                    </div>\n                </div>\n            </div>\n            <div\n                class=\"absolute bottom-0 left-0 right-0 top-14 p-2 flex flex-col items-center justify-center space-y-2\"\n                *ngIf=\"loading\"\n            >\n                <div class=\"absolute inset-0 bg-base-100 opacity-80 z-0\"></div>\n                <mat-spinner diameter=\"32\"></mat-spinner>\n                <p class=\"relative z-10\">Processing...</p>\n            </div>\n        </div>\n        <button\n            btn\n            icon\n            matRipple\n            class=\"bg-warning absolute top-2 -left-8 shadow text-warning-content\"\n            *ngIf=\"!show\"\n            (click)=\"show = !show\"\n            matTooltip=\"Show Pending Approvals\"\n            matTooltipPosition=\"left\"\n        >\n            <app-icon>chevron_left</app-icon>\n        </button>\n    `,\n    styles: [\n        `\n            :host {\n                display: block;\n                position: relative;\n                height: 100%;\n            }\n        `,\n    ],\n})\nexport class RoomBookingsApprovalsComponent {\n    private _show = true;\n    public loading = false;\n    public status: Record<string, 'accept' | 'decline' | undefined> = {};\n    public readonly search = new BehaviorSubject('');\n\n    public readonly pending = this._state.pending;\n\n    public get time_format() {\n        return this._settings.time_format;\n    }\n\n    private _local_tz = getTimezoneOffsetString(\n        Intl.DateTimeFormat().resolvedOptions().timeZone,\n    );\n\n    public get timezone() {\n        return this._settings.get('app.events.use_building_timezone')\n            ? this._org.building.timezone\n            : '';\n    }\n\n    public get tz() {\n        const tz = this.timezone;\n        if (!tz) return '';\n        const tz_offset = getTimezoneOffsetString(tz);\n        return tz_offset === this._local_tz ? '' : tz_offset;\n    }\n\n    public readonly filtered_pending = combineLatest([\n        this._state.pending,\n        this.search,\n    ]).pipe(\n        map(([list, search]) =>\n            list.filter(\n                (event) =>\n                    event.title.toLowerCase().includes(search.toLowerCase()) ||\n                    event.host.toLowerCase().includes(search.toLowerCase()) ||\n                    event.organiser?.name\n                        .toLowerCase()\n                        .includes(search.toLowerCase()),\n            ),\n        ),\n    );\n\n    public set show(value: boolean) {\n        this._show = value;\n        sessionStorage.setItem(\n            'PlaceOS.Concierge.show_room_approvals',\n            `${value}`,\n        );\n    }\n\n    public get show() {\n        return this._show;\n    }\n\n    constructor(\n        private _state: EventsStateService,\n        private _org: OrganisationService,\n        private _settings: SettingsService,\n    ) {}\n\n    public ngOnInit() {\n        this._show =\n            sessionStorage.getItem('PlaceOS.Concierge.show_room_approvals') !==\n            'false';\n    }\n\n    public async approve(event: CalendarEvent) {\n        const system_id = this._org.binding('approvals');\n        if (!system_id) return;\n        const mod = getModule(system_id, 'RoomBookingApproval', 1);\n        if (!mod) return;\n        this.loading = true;\n        await mod.execute('accept_event', [event.mailbox, event.id]).catch();\n        this.loading = false;\n        this.status[event.id] = 'accept';\n    }\n\n    public async reject(event: CalendarEvent) {\n        const system_id = this._org.binding('approvals');\n        if (!system_id) return;\n        const mod = getModule(system_id, 'RoomBookingApproval', 1);\n        if (!mod) return;\n        this.loading = true;\n        await mod.execute('decline_event', [event.mailbox, event.id]).catch();\n        this.loading = false;\n        this.status[event.id] = 'decline';\n    }\n}\n","import {\n    Component,\n    ElementRef,\n    EventEmitter,\n    Output,\n    ViewChild,\n} from '@angular/core';\nimport { EventsStateService } from './events-state.service';\nimport { BehaviorSubject, combineLatest } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { AsyncHandler, SettingsService } from '@placeos/common';\nimport { CalendarEvent } from '@placeos/events';\n\n@Component({\n    selector: 'room-booking-search',\n    template: `\n        <div class=\"relative\">\n            <button icon matRipple (click)=\"showSearch()\">\n                <app-icon>search</app-icon>\n            </button>\n            <input\n                #input_el\n                [class.opacity-0]=\"!show\"\n                [class.pointer-events-none]=\"!show\"\n                class=\"absolute top-1/2 -translate-y-1/2 w-[20rem] right-0 rounded-full pl-10 pr-4 py-3 border border-base-300 shadow bg-base-100\"\n                [ngModel]=\"search.getValue()\"\n                (ngModelChange)=\"search.next($event)\"\n                (blur)=\"hideSearch()\"\n                placeholder=\"Search day's events...\"\n            />\n            <app-icon\n                *ngIf=\"show\"\n                class=\"text-2xl absolute top-1/2 -translate-y-1/2 right-[17.5rem]\"\n            >\n                search\n            </app-icon>\n            <div\n                class=\"absolute top-full translate-y-2 w-[18rem] right-4 rounded border border-base-300 bg-base-100 max-h-[65vh] overflow-auto shadow\"\n                *ngIf=\"show\"\n            >\n                <div class=\"sticky top-0 p-4 bg-base-100 rounded z-10\">\n                    <div class=\"opacity-60 text-xs\">\n                        {{ (filtered | async)?.length }} of\n                        {{ (events | async)?.length }} Event(s)\n                    </div>\n                </div>\n                <div\n                    *ngIf=\"!(filtered | async).length\"\n                    class=\"opacity-30 p-4 flex items-center justify-center text-sm text-center\"\n                >\n                    {{\n                        (events | async).length\n                            ? 'No matching events found.'\n                            : 'No events for the currently selected date and zone'\n                    }}\n                </div>\n                <div class=\"px-2 pb-2 -mt-2\">\n                    <button\n                        matRipple\n                        *ngFor=\"let event of filtered | async\"\n                        class=\"relative flex items-center p-2 hover:bg-base-200 rounded w-full text-left space-x-2 z-0\"\n                        (click)=\"selected.next(event)\"\n                    >\n                        <div\n                            class=\"h-10 w-1 rounded-full\"\n                            [style.background-color]=\"typeColor(event)\"\n                        ></div>\n                        <div date class=\"leading-tight\">\n                            <div class=\"text-2xl mx-auto\">\n                                {{ event.date | date: 'dd' }}\n                            </div>\n                            <div\n                                class=\"font-medium text-sm uppercase mx-auto -mt-1\"\n                            >\n                                {{ event.date | date: 'MMM' }}\n                            </div>\n                        </div>\n                        <div class=\"flex-1 w-1/2\">\n                            <div class=\"flex items-center space-x-2 w-full\">\n                                <div\n                                    class=\"text-sm flex-1 truncate\"\n                                    [class.line-through]=\"\n                                        event.state === 'done'\n                                    \"\n                                >\n                                    {{ event.title }}\n                                </div>\n                                <div class=\"opacity-60 text-xs\">\n                                    {{ event.date | date: time_format }}\n                                    &ndash;\n                                    {{ event.date_end | date: time_format }}\n                                </div>\n                            </div>\n                            <div class=\"text-xs opacity-30 truncate\">\n                                {{ event.system?.display_name }}\n                            </div>\n                            <div class=\"text-xs opacity-30 truncate\">\n                                {{ (event.host | user)?.name || event.host }}\n                            </div>\n                        </div>\n                    </button>\n                </div>\n            </div>\n        </div>\n    `,\n    styles: [``],\n})\nexport class RoomBookingSearchComponent extends AsyncHandler {\n    @Output() public selected = new EventEmitter<CalendarEvent>();\n    public show = false;\n    public readonly search = new BehaviorSubject('');\n    public readonly events = this._state.filtered;\n\n    public readonly types: any[] = [\n        { id: 'internal', name: 'Internal', color: '#D81B60' },\n        { id: 'external', name: 'External', color: '#1E88E5' },\n        { id: 'cancelled', name: 'Cancelled', color: '#eeeeee' },\n    ];\n\n    public readonly filtered = combineLatest([this.search, this.events]).pipe(\n        map(([search, event_list]) => {\n            search = search.toLowerCase();\n            return event_list.filter((e) => {\n                return (\n                    !e.is_system_event &&\n                    (e.title.toLowerCase().includes(search) ||\n                        e.organiser?.name.toLowerCase().includes(search) ||\n                        e.host.toLowerCase().includes(search) ||\n                        e.system?.display_name.toLowerCase().includes(search) ||\n                        e.system?.name.toLowerCase().includes(search) ||\n                        e.resources[0]?.display_name\n                            .toLowerCase()\n                            ?.includes(search) ||\n                        e.resources[0]?.name.toLowerCase()?.includes(search) ||\n                        e.resources[0]?.email.toLowerCase()?.includes(search))\n                );\n            });\n        }),\n    );\n\n    @ViewChild('input_el', { static: true })\n    private _input_element: ElementRef<HTMLInputElement>;\n\n    public get time_format() {\n        return this._settings.time_format;\n    }\n\n    public typeColor(event) {\n        const type = this.types.find((_) => _.id === event.type);\n        return type?.color || '#EEE';\n    }\n\n    constructor(\n        private _state: EventsStateService,\n        private _settings: SettingsService,\n    ) {\n        super();\n    }\n\n    public showSearch() {\n        this.show = true;\n        this._input_element.nativeElement.focus();\n    }\n\n    public hideSearch() {\n        if (!this.show) return;\n        this.timeout('hide', () => (this.show = false));\n    }\n}\n","import { Component } from '@angular/core';\nimport { OrganisationService } from '@placeos/organisation';\nimport { EventsStateService } from './events-state.service';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { AsyncHandler, SettingsService } from '@placeos/common';\nimport { debounceTime, filter, map, take } from 'rxjs/operators';\nimport { combineLatest } from 'rxjs';\n\nconst EMPTY = [];\n@Component({\n    selector: 'room-bookings',\n    template: `\n        <div class=\"absolute inset-0 flex flex-col overflow-hidden pl-8\">\n            <div class=\"flex items-center w-full py-4 pr-8 space-x-4\">\n                <h2 class=\"text-2xl font-medium\">Room Bookings</h2>\n                <div class=\"flex-1 w-px\"></div>\n                <mat-form-field appearance=\"outline\" class=\"no-subscript w-32\">\n                    <mat-select\n                        [ngModel]=\"period | async\"\n                        (ngModelChange)=\"setPeriod($event)\"\n                    >\n                        <mat-option value=\"day\">Day</mat-option>\n                        <mat-option value=\"week\">Week</mat-option>\n                    </mat-select>\n                </mat-form-field>\n                <button btn matRipple class=\"space-x-2\" (click)=\"newBooking()\">\n                    <div>New Booking</div>\n                    <app-icon>add</app-icon>\n                </button>\n            </div>\n            <div class=\"w-full flex items-center\">\n                <mat-form-field appearance=\"outline\" class=\"no-subscript w-52\">\n                    <mat-select\n                        [ngModel]=\"zones | async\"\n                        (ngModelChange)=\"updateZones($event)\"\n                        placeholder=\"All Levels\"\n                        multiple\n                    >\n                        <mat-option\n                            *ngFor=\"let level of levels | async\"\n                            [value]=\"level.id\"\n                        >\n                            <div class=\"flex flex-col-reverse\">\n                                <div\n                                    class=\"text-xs opacity-30\"\n                                    *ngIf=\"use_region\"\n                                >\n                                    {{\n                                        (level.parent_id | building)\n                                            ?.display_name\n                                    }}\n                                    <span class=\"opacity-0\"> - </span>\n                                </div>\n                                <div>\n                                    {{ level.display_name || level.name }}\n                                </div>\n                            </div>\n                        </mat-option>\n                    </mat-select>\n                </mat-form-field>\n                <ng-container *ngIf=\"allow_setup_breakdown\">\n                    <div\n                        class=\"border-l h-full ml-8 mr-4\"\n                        *ngIf=\"!use_region\"\n                    ></div>\n                    <mat-slide-toggle\n                        class=\"m-2\"\n                        [ngModel]=\"(ui_options | async)?.show_overflow\"\n                        (ngModelChange)=\"\n                            updateUIOptions({ show_overflow: $event })\n                        \"\n                    >\n                        <div class=\"text-xs\">Setup / Breakdown</div>\n                    </mat-slide-toggle>\n                </ng-container>\n                <div class=\"border-l h-full ml-8 mr-4\"></div>\n                <div\n                    class=\"flex items-center space-x-2 max-w-[calc(100%-16rem)] flex-1\"\n                >\n                    <button\n                        btn\n                        matRipple\n                        class=\"inverse\"\n                        [matMenuTriggerFor]=\"menu\"\n                    >\n                        <app-icon>filter_list</app-icon>\n                        <div class=\"mx-2\">Filters</div>\n                    </button>\n                    <mat-menu #menu=\"matMenu\" class=\"\">\n                        <div\n                            class=\"flex flex-col space-y-2 overflow-hidden w-48\"\n                        >\n                            <mat-checkbox\n                                *ngFor=\"let type of types\"\n                                [ngModel]=\"!type_list.includes(type.id)\"\n                                (ngModelChange)=\"setFilter(type.id, !$event)\"\n                            >\n                                {{ type.name }}\n                            </mat-checkbox>\n                        </div>\n                    </mat-menu>\n                    <div\n                        class=\"flex items-center overflow-x-auto flex-1 w-px space-x-2 px-2\"\n                    >\n                        @for (type of types; track type.id) {\n                            <div\n                                class=\"flex items-center border border-base-200 rounded-3xl\"\n                                *ngIf=\"!type_list.includes(type.id)\"\n                            >\n                                <div\n                                    class=\"h-4 w-4 m-2 rounded-full\"\n                                    [style.background-color]=\"type.color\"\n                                ></div>\n                                <div>{{ type.name }}</div>\n                                <button\n                                    icon\n                                    matRipple\n                                    (click)=\"setFilter(type.id, true)\"\n                                >\n                                    <app-icon>close</app-icon>\n                                </button>\n                            </div>\n                        }\n                    </div>\n                </div>\n            </div>\n            <div class=\"flex w-full flex-1 h-px border-t mt-4 border-base-200\">\n                <room-bookings-timeline\n                    *ngIf=\"(period | async) === 'day'\"\n                    class=\"relative flex-1 w-1/2 z-0\"\n                />\n                <room-week-bookings-timeline\n                    *ngIf=\"(period | async) === 'week'\"\n                    class=\"relative flex-1 w-1/2 z-0\"\n                />\n                <room-bookings-approvals\n                    class=\"relative z-10\"\n                    *ngIf=\"has_approvals\"\n                />\n            </div>\n        </div>\n    `,\n    styles: [``],\n})\nexport class RoomBookingsComponent extends AsyncHandler {\n    public readonly zones = this._state.zones;\n    public readonly period = this._state.period;\n    public readonly ui_options = this._state.options;\n    public readonly levels = combineLatest([\n        this._org.active_building,\n        this._org.active_region,\n    ]).pipe(\n        map(([bld, region]) =>\n            this.use_region\n                ? this._org.levelsForRegion(region)\n                : this._org.levelsForBuilding(bld),\n        ),\n    );\n    /** List of levels for the active building */\n    public readonly updateZones = (z) => {\n        console.warn('Update Zones:', z);\n        this._router.navigate([], {\n            relativeTo: this._route,\n            queryParams: { zone_ids: z.join(',') },\n            queryParamsHandling: 'merge',\n        });\n        this._state.setZones(z);\n    };\n    public readonly updateUIOptions = (o) => this._state.setUIOptions(o);\n    public readonly setPeriod = (p) => {\n        console.warn('Set Period:', p);\n        this._router.navigate([], {\n            relativeTo: this._route,\n            queryParams: { period: p },\n            queryParamsHandling: 'merge',\n        });\n        this._state.setPeriod(p);\n    };\n    /**  */\n    public readonly newBooking = (d?) => this._state.newBooking(d);\n\n    public readonly types: any[] = [\n        { id: 'internal', name: 'Internal', color: '#D81B60' },\n        { id: 'external', name: 'External', color: '#1E88E5' },\n        { id: 'cancelled', name: 'Cancelled', color: '#eeeeee' },\n    ];\n\n    public get type_list() {\n        return this._state.filters.hide_type || EMPTY;\n    }\n\n    public get has_approvals() {\n        return this._org.binding('approvals');\n    }\n\n    public get allow_setup_breakdown() {\n        return this._settings.get('app.events.allow_setup_breakdown');\n    }\n\n    public get use_region() {\n        return this._settings.get('app.use_region');\n    }\n\n    constructor(\n        private _org: OrganisationService,\n        private _state: EventsStateService,\n        private _router: Router,\n        private _route: ActivatedRoute,\n        private _settings: SettingsService,\n    ) {\n        super();\n    }\n\n    public ngOnInit() {\n        this.subscription(\n            'route.query',\n            this._route.queryParamMap.subscribe((params) => {\n                if (params.has('period')) {\n                    this._state.setPeriod(\n                        params.get('period') === 'day' ? 'day' : 'week',\n                    );\n                }\n                if (this.use_region) return;\n                if (params.has('zone_ids')) {\n                    const zones = params.get('zone_ids').split(',');\n                    if (zones.length) {\n                        const level = this._org.levelWithID(zones);\n                        if (!level) return;\n                        this._org.building = this._org.buildings.find(\n                            (bld) => bld.id === level.parent_id,\n                        );\n                        this.updateZones(zones);\n                    }\n                }\n            }),\n        );\n        this.subscription(\n            'levels',\n            this._org.active_levels\n                .pipe(debounceTime(300))\n                .subscribe(async (levels) => {\n                    if (this.use_region) return;\n                    const zones = (\n                        await this.zones.pipe(take(1)).toPromise()\n                    ).filter((zone) => levels.find((lvl) => lvl.id === zone));\n                    if (!zones.length && levels.length) {\n                        zones.push(levels[0].id);\n                    }\n                    this.updateZones(zones);\n                }),\n        );\n        this.subscription(\n            'region',\n            this._org.active_region\n                .pipe(filter((_) => !!_))\n                .subscribe(async (_) => {\n                    const zones = await this.zones.pipe(take(1)).toPromise();\n                    if (zones.length) return;\n                    this.updateZones([_.id]);\n                }),\n        );\n    }\n\n    public setFilter(id: string, value: boolean) {\n        const filters = this._state.filters;\n        let hide_type = filters.hide_type || [];\n        hide_type = hide_type.filter((i) => i !== id);\n        if (value) hide_type.push(id as any);\n        this._state.setFilters({ hide_type });\n    }\n}\n","import { Component } from '@angular/core';\nimport {\n    addHours,\n    differenceInMinutes,\n    format,\n    isSameDay,\n    setHours,\n    startOfDay,\n    startOfMinute,\n} from 'date-fns';\nimport { EventsStateService } from './events-state.service';\nimport { combineLatest } from 'rxjs';\nimport { debounceTime, map, shareReplay, startWith } from 'rxjs/operators';\nimport {\n    AsyncHandler,\n    SettingsService,\n    getTimezoneDifferenceInHours,\n    getTimezoneOffsetString,\n    notifyError,\n    notifySuccess,\n    openConfirmModal,\n} from '@placeos/common';\nimport { MatDialog } from '@angular/material/dialog';\nimport {\n    CalendarEvent,\n    EventDetailsModalComponent,\n    SetupBreakdownModalComponent,\n    declineEvent,\n} from '@placeos/events';\nimport { DatePipe } from '@angular/common';\nimport { OrganisationService } from '@placeos/organisation';\n\n@Component({\n    selector: 'room-bookings-timeline',\n    template: `\n        <div\n            class=\"mx-2 mt-2 p-2 w-[calc(100%-1rem)] bg-info text-info-content rounded-lg text-center text-xs\"\n            *ngIf=\"timezone && tz\"\n        >\n            Timezone of the building is displayed and is different from your\n            local timezone.\n        </div>\n        <div\n            class=\"relative flex items-center justify-center p-2 space-x-2 border-b border-base-200 z-20\"\n        >\n            <date-options\n                [date]=\"date | async\"\n                (dateChange)=\"setDate($event)\"\n                [is_new]=\"true\"\n            ></date-options>\n            <div\n                class=\"absolute top-1/2 -translate-y-1/2 left-4 text-info text-sm\"\n                *ngIf=\"is_today | async\"\n            >\n                Today\n            </div>\n            <div class=\"absolute top-1/2 -translate-y-1/2 right-8\">\n                <room-booking-search\n                    (selected)=\"viewEvent($event, $event.system?.id, true)\"\n                ></room-booking-search>\n            </div>\n        </div>\n        <div timeline class=\"grid overflow-auto w-full h-1/2 flex-1 z-0\">\n            <div\n                timezone\n                class=\"sticky top-0 left-0 z-30 bg-base-100 flex items-center justify-center\"\n            >\n                <div class=\"text-xs opacity-30\">\n                    {{ date | async | date: 'z' : tz }}\n                </div>\n                <div\n                    class=\"absolute h-2 w-px right-0 bottom-0 bg-base-300\"\n                ></div>\n                <div\n                    class=\"absolute w-2 h-px right-0 bottom-0 bg-base-300\"\n                ></div>\n            </div>\n            <div\n                space-headers\n                class=\"sticky top-0 z-20 border-b border-base-300 flex items-center bg-base-100\"\n                [style.width]=\"(spaces | async)?.length * block_width + 'rem'\"\n            >\n                <div\n                    *ngFor=\"let space of spaces | async\"\n                    class=\"relative h-full w-56 flex items-center justify-center\"\n                >\n                    <div class=\"truncate\">\n                        {{ space.display_name || space.name }}\n                    </div>\n                    <div\n                        class=\"absolute h-2 w-px -left-px bottom-0 bg-base-300\"\n                    ></div>\n                </div>\n            </div>\n            <div\n                hour-blocks\n                class=\"sticky left-0 z-10 border-r border-base-300 bg-base-100 overflow-visible\"\n                [style.height]=\"block_range * block_height + 'rem'\"\n            >\n                <div\n                    *ngFor=\"let hour of hours; let i = index\"\n                    class=\"relative w-full\"\n                    [style.height]=\"block_height + 'rem'\"\n                >\n                    <div\n                        class=\"absolute -top-px right-0 w-2 h-px bg-base-300\"\n                    ></div>\n                    <div\n                        class=\"absolute -top-px right-3 -translate-y-1/2 text-xs opacity-60\"\n                        *ngIf=\"i !== 0\"\n                    >\n                        {{ formatHour(hour) }}\n                    </div>\n                </div>\n                <div\n                    class=\"absolute bg-secondary right-0 translate-x-1/2 -translate-y-1/2 h-2 w-2 rounded-full\"\n                    *ngIf=\"(show_time | async) && timeToOffset(now) < 100\"\n                    [style.top]=\"'calc(' + timeToOffset(now) + '% + 1px)'\"\n                ></div>\n            </div>\n            <div space-blocks class=\"relative overflow-hidden\">\n                <div\n                    *ngFor=\"let hour of hours; let i = index\"\n                    class=\"relative w-full border-b border-base-200\"\n                    [style.height]=\"block_height + 'rem'\"\n                ></div>\n                <div\n                    *ngFor=\"let space of spaces | async; let i = index\"\n                    class=\"absolute w-px h-full bg-base-200 top-0\"\n                    [style.left]=\"'calc(' + i * block_width + 'rem - 1px)'\"\n                ></div>\n\n                <ng-container\n                    *ngFor=\"let space of spaces | async; let i = index\"\n                >\n                    <ng-container\n                        *ngFor=\"let event of (events | async)[space.id] || []\"\n                    >\n                        <button\n                            event\n                            matRipple\n                            class=\"absolute w-52 hover:opacity-90 text-left\"\n                            [style.left]=\"i * block_width + 0.25 + 'rem'\"\n                            [style.top]=\"timeToOffset(event.date) + '%'\"\n                            [style.height]=\"endToOffset(event.duration) + '%'\"\n                            (click)=\"viewEvent(event, space.id)\"\n                            [matTooltip]=\"eventTooltip(event)\"\n                            *ngIf=\"\n                                !event.is_system_event ||\n                                (ui_options | async).show_overflow\n                            \"\n                        >\n                            <div\n                                class=\"relative w-full h-full shadow bg-base-100 border border-base-200 hover:bg-base-200 rounded-lg overflow-hidden px-3 py-1 text-xs\"\n                                [class.opacity-60]=\"event.state === 'done'\"\n                                [class.!rounded-none]=\"event.is_system_event\"\n                                [class.!border-secondary]=\"\n                                    event.is_system_event\n                                \"\n                            >\n                                <ng-container *ngIf=\"event.is_system_event\">\n                                    <div\n                                        class=\"absolute -inset-px bg-secondary opacity-30\"\n                                    ></div>\n                                </ng-container>\n                                <ng-container *ngIf=\"!event.is_system_event\">\n                                    <div\n                                        class=\"absolute left-0 inset-y-0 w-1 \"\n                                        [class.bg-secondary]=\"\n                                            event.status !== 'cancelled'\n                                        \"\n                                        [class.bg-error]=\"\n                                            event.status === 'cancelled'\n                                        \"\n                                    ></div>\n                                    <p\n                                        class=\"truncate\"\n                                        [class.opacity-60]=\"\n                                            event.status === 'cancelled'\n                                        \"\n                                    >\n                                        {{\n                                            event.all_day\n                                                ? 'All Day'\n                                                : (event.date\n                                                  | date: time_format : tz)\n                                        }}\n                                        &ndash;\n                                        {{ event.title }}\n                                    </p>\n                                    <p\n                                        class=\"truncate\"\n                                        [class.opacity-60]=\"\n                                            event.status === 'cancelled'\n                                        \"\n                                    >\n                                        {{\n                                            event.organiser?.name || event.host\n                                        }}\n                                    </p>\n                                </ng-container>\n                            </div>\n                        </button>\n                    </ng-container>\n                </ng-container>\n                <div\n                    *ngIf=\"show_time | async\"\n                    class=\"absolute inset-x-0 h-[2px] bg-secondary\"\n                    [style.top]=\"timeToOffset(now) + '%'\"\n                ></div>\n            </div>\n        </div>\n    `,\n    styles: [\n        `\n            :host {\n                display: flex;\n                flex-direction: column;\n                max-width: 100%;\n            }\n\n            [timeline] {\n                grid-template-columns: 4rem auto;\n                grid-template-rows: 3.5rem auto;\n            }\n        `,\n    ],\n})\nexport class RoomBookingsTimelineComponent extends AsyncHandler {\n    public block_width = 14;\n    public readonly ui_options = this._state.options;\n    public readonly spaces = this._state.spaces;\n    public readonly date = this._state.date;\n    public readonly is_today = this.date.pipe(\n        map((d) => isSameDay(d, Date.now())),\n    );\n    public readonly show_time = combineLatest([\n        this.date,\n        this._org.active_building,\n    ]).pipe(\n        map(([d]) => {\n            const today = isSameDay(d, Date.now());\n            const offset = this.timezone\n                ? getTimezoneDifferenceInHours(this.timezone)\n                : 0;\n            const start = addHours(\n                setHours(startOfDay(Date.now()), this.block_start),\n                -offset,\n            ).valueOf();\n            const end = addHours(\n                setHours(startOfDay(Date.now()), this.block_end),\n                -offset,\n            ).valueOf();\n            return today && Date.now() >= start && Date.now() <= end;\n        }),\n    );\n    public readonly events = combineLatest([\n        this._state.spaces,\n        this._state.filtered,\n        this.date,\n    ]).pipe(\n        debounceTime(300),\n        map(([spaces, events, date]) => {\n            const map = {};\n            const offset = this.timezone\n                ? getTimezoneDifferenceInHours(this.timezone)\n                : 0;\n            const start = addHours(\n                setHours(startOfDay(date), this.block_start),\n                -offset,\n            ).valueOf();\n            const end = addHours(\n                setHours(startOfDay(date), this.block_end),\n                -offset,\n            ).valueOf();\n            for (const space of spaces) {\n                map[space.id] = events\n                    .filter(\n                        (event) =>\n                            event.resources.find(\n                                (item) =>\n                                    item.id === space.id ||\n                                    item.email === space.email,\n                            ) ||\n                            event.system?.id === space.id ||\n                            event.system?.email === space.email,\n                    )\n                    .filter(\n                        (event) => event.date_end >= start && event.date <= end,\n                    );\n            }\n            return map;\n        }),\n        startWith({}),\n        shareReplay(1),\n    );\n\n    private _hour_list = Array.from({ length: 24 }, (_, i) => i);\n    public hours: number[] = [];\n\n    public get now() {\n        return startOfMinute(Date.now()).valueOf();\n    }\n\n    public readonly edit = (e) => this._state.newBooking(e);\n    public readonly setDate = (d) => this._state.setDate(d);\n\n    private _local_tz = getTimezoneOffsetString(\n        Intl.DateTimeFormat().resolvedOptions().timeZone,\n    );\n\n    public get timezone() {\n        return this._settings.get('app.events.use_building_timezone')\n            ? this._org.building.timezone\n            : '';\n    }\n\n    public get tz() {\n        const tz = this.timezone;\n        if (!tz) return '';\n        const tz_offset = getTimezoneOffsetString(tz);\n        return tz_offset === this._local_tz ? '' : tz_offset;\n    }\n\n    public get block_start() {\n        return +this._settings.get('app.events.block_start') || 0;\n    }\n\n    public get block_end() {\n        return +this._settings.get('app.events.block_end') || 24;\n    }\n\n    public get block_range() {\n        return Math.min(24, Math.max(this.block_end - this.block_start, 1));\n    }\n\n    public get block_height() {\n        return +this._settings.get('app.events.block_height') || 3;\n    }\n\n    public get time_format() {\n        return this._settings.time_format;\n    }\n\n    constructor(\n        private _state: EventsStateService,\n        private _dialog: MatDialog,\n        private _settings: SettingsService,\n        private _org: OrganisationService,\n    ) {\n        super();\n    }\n\n    public formatHour(hour: number) {\n        const date = setHours(Date.now(), hour);\n        return this._settings.get('app.use_24_hour_time')\n            ? format(date, 'HH:00')\n            : format(date, 'h a');\n    }\n\n    private _date_pipe = new DatePipe('en');\n\n    public eventTooltip(event: CalendarEvent) {\n        const tooltip = `Start: ${event.all_day ? 'All Day' : this._date_pipe.transform(event.date, this.time_format)}\nTitle:  ${event.title}\nHost:  ${event.organiser?.name || event.host}`;\n        return tooltip;\n    }\n\n    public ngOnInit() {\n        this.subscription('poll', this._state.startPolling());\n        this.subscription(\n            'hour_list',\n            this._org.active_building.subscribe(() => {\n                this.hours = this._hour_list.filter(\n                    (h) => h >= this.block_start && h < this.block_end,\n                );\n            }),\n        );\n        this.hours = this._hour_list.filter(\n            (h) => h >= this.block_start && h < this.block_end,\n        );\n        const current_tz = Intl.DateTimeFormat().resolvedOptions().timeZone;\n        const offset = !this.timezone\n            ? 0\n            : getTimezoneDifferenceInHours(current_tz, this.timezone);\n    }\n\n    public timeToOffset(date: number) {\n        const current_tz = Intl.DateTimeFormat().resolvedOptions().timeZone;\n        const offset = !this.timezone\n            ? 0\n            : getTimezoneDifferenceInHours(this.timezone, current_tz);\n        const start_time = setHours(\n            startOfDay(this._state.getDate()),\n            this.block_start - offset,\n        );\n        const diff = differenceInMinutes(date, start_time);\n\n        return (Math.max(0, diff / 60) / this.block_range) * 100;\n    }\n\n    public endToOffset(duration: number) {\n        return (\n            (Math.min(this.block_range, duration / 60) / this.block_range) * 100\n        );\n    }\n\n    public viewEvent(\n        event: CalendarEvent,\n        space_id: string,\n        scroll_to: boolean = false,\n    ) {\n        if (event.is_system_event) return;\n        const ref = this._dialog.open(EventDetailsModalComponent, {\n            data: event,\n        });\n        ref.componentInstance.hide_edit = !this._settings.get(\n            'app.events.allow_edit',\n        );\n        this.subscription(\n            'remove',\n            ref.componentInstance.remove.subscribe(() =>\n                this.remove(event, space_id),\n            ),\n        );\n        this.subscription(\n            'edit',\n            ref.componentInstance.edit.subscribe(() => this.edit(event)),\n        );\n        this.subscription(\n            'actions',\n            ref.componentInstance.action.subscribe(async (action) => {\n                if (!action.includes('breakdown')) return;\n                const ref = this._dialog.open(SetupBreakdownModalComponent, {\n                    data: event,\n                });\n                const data = await ref.afterClosed().toPromise();\n                if (data) this._state.replace(data);\n            }),\n        );\n    }\n\n    public async remove(item: CalendarEvent, space_id: string) {\n        const time = `${format(item.date, 'dd MMM yyyy ' + this.time_format)}`;\n        const resource_name = item.space?.display_name;\n        const content = `Delete the booking for ${resource_name} at ${time}`;\n        const resp = await openConfirmModal(\n            { title: `Delete booking`, content, icon: { content: 'delete' } },\n            this._dialog,\n        );\n        if (resp.reason !== 'done') return;\n        resp.loading('Requesting booking deletion...');\n        await declineEvent(item.id, {\n            calendar: item.calendar || item.mailbox || item.host,\n            system_id: space_id,\n        })\n            .toPromise()\n            .catch((e) => {\n                notifyError(`Unable to delete booking. ${e}`);\n                resp.close();\n                throw e;\n            });\n        notifySuccess('Successfully deleted booking.');\n        this._dialog.closeAll();\n    }\n}\n","import { Component } from '@angular/core';\nimport {\n    addDays,\n    isSameDay,\n    isSameWeek,\n    startOfMinute,\n    startOfWeek,\n    format,\n    setHours,\n} from 'date-fns';\nimport { EventsStateService } from './events-state.service';\nimport { MatDialog } from '@angular/material/dialog';\nimport {\n    AsyncHandler,\n    getTimezoneOffsetInMinutes,\n    getTimezoneOffsetString,\n    notifyError,\n    notifySuccess,\n    openConfirmModal,\n    SettingsService,\n} from '@placeos/common';\nimport { map, shareReplay } from 'rxjs/operators';\nimport { combineLatest } from 'rxjs';\nimport {\n    CalendarEvent,\n    declineEvent,\n    EventDetailsModalComponent,\n    SetupBreakdownModalComponent,\n} from '@placeos/events';\nimport { OrganisationService } from '@placeos/organisation';\nimport { DatePipe } from '@angular/common';\n\n@Component({\n    selector: 'room-week-bookings-timeline',\n    template: `\n        <div\n            class=\"mx-2 mt-2 p-2 w-[calc(100%-1rem)] bg-info text-info-content rounded-lg text-center text-xs\"\n            *ngIf=\"timezone && tz\"\n        >\n            Timezone of the building is displayed and is different from your\n            local timezone.\n        </div>\n        <div\n            class=\"relative flex items-center justify-center p-2 space-x-2 border-b border-base-200 z-20\"\n        >\n            <date-options\n                [date]=\"date | async\"\n                [step]=\"7\"\n                (dateChange)=\"setDate($event)\"\n                [is_new]=\"true\"\n            ></date-options>\n            <div\n                class=\"absolute top-1/2 -translate-y-1/2 left-4 text-info text-sm\"\n                *ngIf=\"this_week | async\"\n            >\n                This Week\n            </div>\n            <div class=\"absolute top-1/2 -translate-y-1/2 right-8\">\n                <room-booking-search\n                    (selected)=\"viewEvent($event, $event.system?.id, true)\"\n                ></room-booking-search>\n            </div>\n        </div>\n        <div timeline class=\"grid overflow-auto w-full h-1/2 flex-1 z-0\">\n            <div\n                timezone\n                class=\"sticky top-0 left-0 z-30 bg-base-100 flex items-center justify-center\"\n            >\n                <div class=\"text-xs opacity-30\">\n                    {{ date | async | date: 'z' : tz }}\n                </div>\n                <div\n                    class=\"absolute h-2 w-px right-0 bottom-0 bg-base-300\"\n                ></div>\n                <div\n                    class=\"absolute w-2 h-px right-0 bottom-0 bg-base-300\"\n                ></div>\n            </div>\n            <div\n                day-headers\n                class=\"sticky top-0 z-20 border-b border-base-300 flex items-center bg-base-100 min-w-[calc(100%-3rem)]\"\n                [style.width]=\"(days | async)?.length * 12 + 'rem'\"\n            >\n                <div\n                    *ngFor=\"let date of days | async\"\n                    class=\"relative flex-1 h-full min-w-48 flex flex-col items-center justify-center leading-tight\"\n                >\n                    <div class=\"truncate\">\n                        {{ date | date: 'EEE, MMM d' : tz }}\n                    </div>\n                    <div\n                        class=\"text-info text-xs absolute bottom-1 left-1/2 -translate-x-1/2\"\n                        *ngIf=\"isToday(date)\"\n                    >\n                        Today\n                    </div>\n                    <div\n                        class=\"absolute h-2 w-px -left-px bottom-0 bg-base-300\"\n                    ></div>\n                </div>\n            </div>\n            <div\n                empty-block\n                class=\"sticky left-0 z-10 border-r border-base-300 bg-base-100 min-h-full\"\n                [style.height]=\"\n                    (event_max_count | async)\n                        ? (event_max_count | async) * 5.375 + 'rem'\n                        : ''\n                \"\n            ></div>\n            <div\n                date-blocks\n                class=\"relative overflow-hidden min-w-[calc(100%-3rem)] flex\"\n                [style.width]=\"(days | async)?.length * 12 + 'rem'\"\n            >\n                <div\n                    class=\"flex-1 min-w-48 overflow-hidden p-2 border-r border-base-200\"\n                    *ngFor=\"let date of days | async; let i = index\"\n                >\n                    <button\n                        matRipple\n                        *ngFor=\"let event of (events | async)[date] || []\"\n                        class=\"flex p-2 w-full space-x-2 hover:bg-base-200 rounded text-left\"\n                        (click)=\"viewEvent(event)\"\n                    >\n                        <div\n                            class=\"h-2 w-2 rounded-full my-1.5\"\n                            [style.background-color]=\"typeColor(event.type)\"\n                        ></div>\n                        <div class=\"flex-1 w-1/2\">\n                            <div\n                                class=\"text-sm truncate\"\n                                [class.line-through]=\"event.state === 'done'\"\n                            >\n                                {{ event.title }}\n                            </div>\n                            <div class=\"text-xs opacity-60 flex-1\">\n                                {{ event.date | date: time_format : tz }}\n                                &ndash;\n                                {{ event.date_end | date: time_format : tz }}\n                                <span *ngIf=\"tz\">{{\n                                    event.date_end | date: 'z' : tz\n                                }}</span>\n                            </div>\n                            <div class=\"text-xs truncate opacity-30\">\n                                {{ event.system?.display_name }}\n                            </div>\n                            <div class=\"text-xs truncate opacity-30\">\n                                {{ (event.host | user)?.name || event.host }}\n                            </div>\n                        </div>\n                    </button>\n                </div>\n            </div>\n        </div>\n    `,\n    styles: [\n        `\n            :host {\n                display: flex;\n                flex-direction: column;\n                max-width: 100%;\n            }\n\n            [timeline] {\n                grid-template-columns: 4rem auto;\n                grid-template-rows: 3.5rem auto;\n            }\n        `,\n    ],\n})\nexport class RoomWeekBookingsTimelineComponent extends AsyncHandler {\n    public hours = Array.from({ length: 24 }, (_, i) => i);\n    public readonly ui_options = this._state.options;\n    public readonly date = this._state.date;\n\n    public readonly types: any[] = [\n        { id: 'internal', name: 'Internal', color: '#D81B60' },\n        { id: 'external', name: 'External', color: '#1E88E5' },\n        { id: 'cancelled', name: 'Cancelled', color: '#eeeeee' },\n    ];\n\n    public readonly days = this.date.pipe(\n        map((d) =>\n            new Array(7)\n                .fill(0)\n                .map((_, idx) =>\n                    addDays(\n                        setHours(\n                            startOfWeek(d),\n                            12 - Math.floor(this.timezone_offset / 60),\n                        ),\n                        idx,\n                    ).valueOf(),\n                ),\n        ),\n    );\n    public readonly this_week = this.date.pipe(\n        map((d) => isSameWeek(d, Date.now())),\n    );\n\n    private _data_pipe = new DatePipe('en');\n\n    public readonly events = combineLatest([\n        this.days,\n        this._state.filtered,\n        this._state.zones,\n    ]).pipe(\n        map(([day_list, events, zones]) => {\n            if (zones.length) {\n                events = events.filter((_) =>\n                    _.system?.zones.find((_) => zones.includes(_)),\n                );\n            }\n\n            const map: Record<string, CalendarEvent[]> = {};\n            for (const date of day_list) {\n                const date_value = this._data_pipe.transform(\n                    date,\n                    'yyyy-MM-dd',\n                    this.tz,\n                );\n                map[date] = events.filter((event) => {\n                    const event_date_value = this._data_pipe.transform(\n                        event.date,\n                        'yyyy-MM-dd',\n                        this.tz,\n                    );\n                    return (\n                        date_value === event_date_value &&\n                        !event.is_system_event\n                    );\n                });\n            }\n            return map;\n        }),\n        shareReplay(1),\n    );\n\n    public readonly event_max_count = this.events.pipe(\n        map((e) => {\n            let length = 0;\n            for (const date in e) {\n                if (e[date].length > length) length = e[date].length;\n            }\n            return length;\n        }),\n    );\n\n    private _local_tz = getTimezoneOffsetString(\n        Intl.DateTimeFormat().resolvedOptions().timeZone,\n    );\n\n    public get timezone() {\n        return this._settings.get('app.events.use_building_timezone')\n            ? this._org.building.timezone\n            : '';\n    }\n\n    public get tz() {\n        const tz = this.timezone;\n        if (!tz) return '';\n        const tz_offset = getTimezoneOffsetString(tz);\n        return tz_offset === this._local_tz ? '' : tz_offset;\n    }\n\n    public get timezone_offset() {\n        return getTimezoneOffsetInMinutes(\n            this.timezone || Intl.DateTimeFormat().resolvedOptions().timeZone,\n        );\n    }\n\n    public get now() {\n        return startOfMinute(Date.now()).valueOf();\n    }\n\n    public isToday(date: number) {\n        return isSameDay(date, Date.now());\n    }\n\n    public readonly edit = (e) => this._state.newBooking(e);\n    public readonly setDate = (d) => this._state.setDate(d);\n\n    public get time_format() {\n        return this._settings.time_format;\n    }\n\n    constructor(\n        private _state: EventsStateService,\n        private _dialog: MatDialog,\n        private _settings: SettingsService,\n        private _org: OrganisationService,\n    ) {\n        super();\n    }\n\n    public ngOnInit() {\n        this.subscription('poll', this._state.poll());\n    }\n\n    public typeColor(type: string) {\n        return this.types.find((_) => _.id === type)?.color || '#EEE';\n    }\n\n    public viewEvent(\n        event: CalendarEvent,\n        space_id: string,\n        scroll_to: boolean = false,\n    ) {\n        if (event.is_system_event) return;\n        const ref = this._dialog.open(EventDetailsModalComponent, {\n            data: event,\n        });\n        ref.componentInstance.hide_edit = !this._settings.get(\n            'app.events.allow_edit',\n        );\n        this.subscription(\n            'remove',\n            ref.componentInstance.remove.subscribe(() =>\n                this.remove(event, space_id),\n            ),\n        );\n        this.subscription(\n            'edit',\n            ref.componentInstance.edit.subscribe(() => this.edit(event)),\n        );\n        this.subscription(\n            'actions',\n            ref.componentInstance.action.subscribe(async (action) => {\n                if (!action.includes('breakdown')) return;\n                const ref = this._dialog.open(SetupBreakdownModalComponent, {\n                    data: event,\n                });\n                const data = await ref.afterClosed().toPromise();\n                if (data) this._state.replace(data);\n            }),\n        );\n    }\n\n    public async remove(item: CalendarEvent, space_id: string) {\n        const time = `${format(item.date, 'dd MMM yyyy ' + this.time_format)}`;\n        const resource_name = item.space?.display_name;\n        const content = `Delete the booking for ${resource_name} at ${time}`;\n        const resp = await openConfirmModal(\n            { title: `Delete booking`, content, icon: { content: 'delete' } },\n            this._dialog,\n        );\n        if (resp.reason !== 'done') return;\n        resp.loading('Requesting booking deletion...');\n        await declineEvent(item.id, {\n            calendar: item.calendar || item.mailbox || item.host,\n            system_id: space_id,\n        })\n            .toPromise()\n            .catch((e) => {\n                notifyError(`Unable to delete booking. ${e}`);\n                resp.close();\n                throw e;\n            });\n        notifySuccess('Successfully deleted booking.');\n        this._dialog.closeAll();\n    }\n}\n","export * from './lib/users.module';\nexport * from './lib/new-user-modal.component';\nexport * from './lib/find-availability-modal/find-availability-modal.component';\nexport * from './lib/user-form.component';\nexport * from './lib/location.class';\nexport * from './lib/user.class';\nexport * from './lib/user.utilities';\nexport * from './lib/users.module';\nexport * from './lib/guests.fn';\nexport * from './lib/staff.fn';\n","import { HashMap } from '@placeos/common';\nimport { getUnixTime } from 'date-fns';\n\nexport class MapLocation {\n    /** Source that the location was generated */\n    public type: 'desk' | 'wireless' | 'meeting' | 'other';\n    /** Details of the location */\n    public position: string | { x: number, y: number };\n    /** Accuracy of the location data */\n    public variance: number;\n    /** Unix epoch in seconds that the data was last updated */\n    public last_seen: number;\n    /** ID of the level associated with the location */\n    public level: string;\n    /** ID of the building associated with the location */\n    public building: string;\n    /** Whether user is currently at the location if fixed */\n    public at_location: boolean;\n    /**  */\n    public coordinates_from:\n        | 'top-left'\n        | 'top-right'\n        | 'bottom-left'\n        | 'bottom-right';\n\n    constructor(_data: HashMap = {}) {\n        this.type = _data.type || _data.location || 'other';\n        this.position = _data.position ||\n            _data.map_id || _data.asset_id || {\n                x: _data.x / _data.map_width || 0,\n                y: _data.y / _data.map_height || 0,\n            };\n        this.variance = _data.variance || 0;\n        this.last_seen = _data.last_seen || getUnixTime(new Date());\n        this.level = _data.level;\n        this.building = _data.building;\n        this.at_location = !!_data.at_location;\n        this.coordinates_from = _data.coordinates_from || 'top-left';\n    }\n}\n","import { startOfWeek } from \"./startOfWeek.mjs\";\n\n/**\n * The {@link isSameWeek} function options.\n */\n\n/**\n * @name isSameWeek\n * @category Week Helpers\n * @summary Are the given dates in the same week (and month and year)?\n *\n * @description\n * Are the given dates in the same week (and month and year)?\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n *\n * @param dateLeft - The first date to check\n * @param dateRight - The second date to check\n * @param options - An object with options\n *\n * @returns The dates are in the same week (and month and year)\n *\n * @example\n * // Are 31 August 2014 and 4 September 2014 in the same week?\n * const result = isSameWeek(new Date(2014, 7, 31), new Date(2014, 8, 4))\n * //=> true\n *\n * @example\n * // If week starts with Monday,\n * // are 31 August 2014 and 4 September 2014 in the same week?\n * const result = isSameWeek(new Date(2014, 7, 31), new Date(2014, 8, 4), {\n *   weekStartsOn: 1\n * })\n * //=> false\n *\n * @example\n * // Are 1 January 2014 and 1 January 2015 in the same week?\n * const result = isSameWeek(new Date(2014, 0, 1), new Date(2015, 0, 1))\n * //=> false\n */\nexport function isSameWeek(dateLeft, dateRight, options) {\n  const dateLeftStartOfWeek = startOfWeek(dateLeft, options);\n  const dateRightStartOfWeek = startOfWeek(dateRight, options);\n\n  return +dateLeftStartOfWeek === +dateRightStartOfWeek;\n}\n\n// Fallback for modularized imports:\nexport default isSameWeek;\n"],"names":["EventEmitter","MatDialogRef","MAT_DIALOG_DATA","SettingsService","notifyError","notifySuccess","EventFormService","queryEvents","i0","elementStart","element","text","elementEnd","advance","property","textInterpolate","pipeBind1","ctx_r0","loading","listener","BookingModalComponent_footer_13_Template_button_click_1_listener","restoreView","_r2","nextContext","resetView","save","BookingModalComponent","form","_service","constructor","_data","_dialog_ref","_settings","event","ngOnInit","_this","_asyncToGenerator","creator","mailbox","period_start","event_start","period_end","event_end","ical_uid","toPromise","find","_","id","all_day","get","newForm","_this2","postForm","catch","emit","reason","metadata","close","directiveInject","i1","i2","i3","_2","selectors","outputs","decls","vars","consts","template","BookingModalComponent_Template","rf","ctx","template","BookingModalComponent_div_11_Template","BookingModalComponent_footer_13_Template","textInterpolate1","value","classProp","Router","DayViewComponent","links","_router","route","includes","navigate","attrs","_c0","DayViewComponent_Template","CommonModule","FormsModule","RouterModule","UIModule","DayviewTopbarComponent","DayviewTimelineComponent","DayviewSpaceComponent","DayviewEventComponent","EventFormComponent","SharedSpacesModule","SharedUsersModule","SharedCateringModule","RoomBookingsComponent","RoomBookingsTimelineComponent","RoomBookingsApprovalsComponent","NewDayViewComponent","MeetingFormDetailsComponent","EventBookModalComponent","RoomWeekBookingsTimelineComponent","RoomBookingSearchComponent","ROUTES","path","component","DayViewModule","_3","forChild","declarations","imports","SimpleChanges","startOfDay","differenceInMinutes","format","addMinutes","CalendarEvent","EventsStateService","classMap","type","styleProp","overflow_top","overflow_height","title","time","textInterpolate2","attendees","length","DayviewEventComponent_div_2_Template_div_click_0_listener","view","DayviewEventComponent_div_2_div_3_Template","DayviewEventComponent_div_2_div_4_Template","DayviewEventComponent_div_2_div_5_Template","top","height","organiser","name","duration","ext","pipeBind2","time_format","DAY_IN_MINUTES","date","Date","guests","status","_state","ui_options","options","e","setEvent","ngOnChanges","changes","start","diff","setup_time","breakdown_time","inputs","features","NgOnChangesFeature","DayviewEventComponent_Template","DayviewEventComponent_div_0_Template","DayviewEventComponent_div_2_Template","DayviewEventComponent_div_3_Template","tmp_0_0","show_overflow","tmp_2_0","show_cleaning","map","Space","AsyncHandler","event_r1","elementContainerStart","DayviewSpaceComponent_ng_container_0_dayview_event_1_Template","ctx_r1","events","filtered","pipe","bookings","filter","bkn","resources","space","email","subscription","subscribe","InheritDefinitionFeature","DayviewSpaceComponent_Template","DayviewSpaceComponent_ng_container_0_Template","querySystems","combineLatest","of","catchError","shareReplay","switchMap","OrganisationService","ctx_r2","scroll","y","time_r2","x","space_r4","display_name","space_r5","tmp_4_0","space_list","i_r6","HOUR_BLOCKS","Array","fill","idx","_org","blocks","spaces","active_building","zone_id","limit","data","level","levelWithID","zones","z","startPolling","ngOnDestroy","stopPolling","onScroll","requestAnimationFrame","srcElement","scrollLeft","scrollTop","DayviewTimelineComponent_Template","DayviewTimelineComponent_div_4_Template","DayviewTimelineComponent_div_8_Template","DayviewTimelineComponent_Template_div_scroll_10_listener","$event","_r1","DayviewTimelineComponent_dayview_space_12_Template","DayviewTimelineComponent_div_14_Template","DayviewTimelineComponent_mat_progress_bar_15_Template","DayviewTimelineComponent_view_event_details_17_Template","ActivatedRoute","first","level_r1","type_r2","DayviewTopbarComponent_mat_slide_toggle_15_Template_mat_slide_toggle_ngModelChange_0_listener","_r3","ctx_r3","updateUIOptions","tmp_1_0","setUIOptions","allow_setup_breakdown","_route","types","type_list","i","levels","active_levels","setDate","d","newBooking","updateZones","relativeTo","queryParams","zone_ids","join","updateTypes","setFilters","hide_type","reduce","list","item","push","initialised","queryParamMap","params","has","split","building","buildings","bld","parent_id","i4","DayviewTopbarComponent_Template","DayviewTopbarComponent_Template_button_click_1_listener","twoWayListener","DayviewTopbarComponent_Template_mat_select_ngModelChange_7_listener","twoWayBindingSet","DayviewTopbarComponent_mat_option_8_Template","DayviewTopbarComponent_Template_mat_select_ngModelChange_11_listener","DayviewTopbarComponent_mat_option_14_Template","DayviewTopbarComponent_mat_slide_toggle_15_Template","DayviewTopbarComponent_Template_date_options_dateChange_17_listener","pureFunction0","twoWayProperty","FormGroup","MatDialog","CateringOrderStateService","BehaviorSubject","tap","EventFormComponent_form_0_div_19_Template_a_time_field_ngModelChange_7_listener","patchValue","_c1","use_24hr_time","controls","code_r4","EventFormComponent_form_0_div_41_mat_form_field_4_Template_mat_form_field_openedChange_0_listener","focusInput","EventFormComponent_form_0_div_41_mat_form_field_4_Template_input_ngModelChange_2_listener","code_filter","next","EventFormComponent_form_0_div_41_mat_form_field_4_mat_option_5_Template","getValue","filtered_codes","catering","has_codes","EventFormComponent_form_0_div_41_mat_form_field_4_Template","EventFormComponent_form_0_div_41_mat_form_field_6_Template","pureFunction4","_c2","EventFormComponent_form_0_mat_checkbox_18_Template","EventFormComponent_form_0_div_19_Template","EventFormComponent_form_0_div_41_Template","EventFormComponent_form_0_div_43_Template","allow_all_day","has_catering","contains","has_assets","_dialog","_catering","available_menu","l","charge_codes","setValidators","updateValueAndValidity","s","toLowerCase","EventFormComponent_Template","EventFormComponent_form_0_Template","NewDayViewComponent_Template","getModule","getTimezoneOffsetString","pipeBind3","event_r2","tz","tmp_3_0","images","RoomBookingsApprovalsComponent_div_17_span_7_Template","RoomBookingsApprovalsComponent_div_17_img_9_Template","RoomBookingsApprovalsComponent_div_17_Template_button_click_27_listener","$implicit","approve","RoomBookingsApprovalsComponent_div_17_Template_button_click_32_listener","reject","tmp_6_0","host","RoomBookingsApprovalsComponent_button_20_Template_button_click_0_listener","_r4","show","timezone","tz_offset","_local_tz","_show","sessionStorage","setItem","search","pending","Intl","DateTimeFormat","resolvedOptions","timeZone","filtered_pending","getItem","system_id","binding","mod","execute","RoomBookingsApprovalsComponent_Template","RoomBookingsApprovalsComponent_Template_button_click_2_listener","RoomBookingsApprovalsComponent_Template_input_ngModelChange_10_listener","RoomBookingsApprovalsComponent_div_15_Template","RoomBookingsApprovalsComponent_div_17_Template","RoomBookingsApprovalsComponent_div_19_Template","RoomBookingsApprovalsComponent_button_20_Template","ElementRef","RoomBookingSearchComponent_div_7_button_9_Template_button_click_0_listener","event_r4","selected","typeColor","state","date_end","system","tmp_11_0","RoomBookingSearchComponent_div_7_div_6_Template","RoomBookingSearchComponent_div_7_button_9_Template","color","event_list","is_system_event","showSearch","_input_element","nativeElement","focus","hideSearch","timeout","viewQuery","RoomBookingSearchComponent_Query","RoomBookingSearchComponent_Template_button_click_1_listener","RoomBookingSearchComponent_Template_input_ngModelChange_4_listener","RoomBookingSearchComponent_Template_input_blur_4_listener","RoomBookingSearchComponent_app_icon_6_Template","RoomBookingSearchComponent_div_7_Template","debounceTime","take","level_r2","RoomBookingsComponent_mat_option_21_div_2_Template","use_region","RoomBookingsComponent_ng_container_23_div_1_Template","RoomBookingsComponent_ng_container_23_Template_mat_slide_toggle_ngModelChange_2_listener","RoomBookingsComponent_mat_checkbox_34_Template_mat_checkbox_ngModelChange_0_listener","type_r6","_r5","setFilter","RoomBookingsComponent_For_37_div_0_Template_button_click_4_listener","_r7","type_r8","RoomBookingsComponent_For_37_div_0_Template","EMPTY","filters","has_approvals","period","active_region","region","levelsForRegion","levelsForBuilding","console","warn","queryParamsHandling","setZones","o","setPeriod","p","_ref","zone","lvl","_x","apply","arguments","_ref2","_x2","RoomBookingsComponent_Template","RoomBookingsComponent_Template_mat_select_ngModelChange_6_listener","RoomBookingsComponent_Template_button_click_12_listener","RoomBookingsComponent_Template_mat_select_ngModelChange_19_listener","RoomBookingsComponent_mat_option_21_Template","RoomBookingsComponent_ng_container_23_Template","RoomBookingsComponent_mat_checkbox_34_Template","repeaterCreate","RoomBookingsComponent_For_37_Template","_forTrack0","RoomBookingsComponent_room_bookings_timeline_39_Template","RoomBookingsComponent_room_week_bookings_timeline_41_Template","RoomBookingsComponent_room_bookings_approvals_43_Template","menu_r9","repeater","addHours","isSameDay","setHours","startOfMinute","startWith","getTimezoneDifferenceInHours","openConfirmModal","EventDetailsModalComponent","SetupBreakdownModalComponent","declineEvent","DatePipe","space_r1","formatHour","hour_r2","RoomBookingsTimelineComponent_div_21_div_2_Template","block_height","i_r4","timeToOffset","now","i_r5","block_width","event_r7","RoomBookingsTimelineComponent_ng_container_28_ng_container_1_button_1_Template_button_click_0_listener","_r6","space_r8","viewEvent","RoomBookingsTimelineComponent_ng_container_28_ng_container_1_button_1_ng_container_2_Template","RoomBookingsTimelineComponent_ng_container_28_ng_container_1_button_1_ng_container_3_Template","i_r9","endToOffset","eventTooltip","RoomBookingsTimelineComponent_ng_container_28_ng_container_1_button_1_Template","RoomBookingsTimelineComponent_ng_container_28_ng_container_1_Template","valueOf","block_start","block_end","block_range","Math","min","max","is_today","show_time","today","offset","end","_hour_list","from","hours","edit","_date_pipe","hour","tooltip","transform","h","current_tz","start_time","getDate","space_id","scroll_to","ref","open","componentInstance","hide_edit","remove","action","afterClosed","replace","resource_name","content","resp","icon","calendar","closeAll","RoomBookingsTimelineComponent_Template","RoomBookingsTimelineComponent_div_0_Template","RoomBookingsTimelineComponent_Template_date_options_dateChange_2_listener","RoomBookingsTimelineComponent_div_4_Template","RoomBookingsTimelineComponent_Template_room_booking_search_selected_7_listener","RoomBookingsTimelineComponent_div_18_Template","RoomBookingsTimelineComponent_div_21_Template","RoomBookingsTimelineComponent_div_22_Template","RoomBookingsTimelineComponent_div_25_Template","RoomBookingsTimelineComponent_div_26_Template","RoomBookingsTimelineComponent_ng_container_28_Template","RoomBookingsTimelineComponent_div_30_Template","tmp_5_0","addDays","isSameWeek","startOfWeek","getTimezoneOffsetInMinutes","RoomWeekBookingsTimelineComponent_div_18_div_4_Template","date_r1","isToday","RoomWeekBookingsTimelineComponent_div_25_button_1_Template_button_click_0_listener","RoomWeekBookingsTimelineComponent_div_25_button_1_span_9_Template","RoomWeekBookingsTimelineComponent_div_25_button_1_Template","date_r5","timezone_offset","days","floor","this_week","_data_pipe","day_list","date_value","event_date_value","event_max_count","poll","RoomWeekBookingsTimelineComponent_Template","RoomWeekBookingsTimelineComponent_div_0_Template","RoomWeekBookingsTimelineComponent_Template_date_options_dateChange_2_listener","RoomWeekBookingsTimelineComponent_div_4_Template","RoomWeekBookingsTimelineComponent_Template_room_booking_search_selected_7_listener","RoomWeekBookingsTimelineComponent_div_18_Template","RoomWeekBookingsTimelineComponent_div_25_Template","tmp_9_0","getUnixTime","MapLocation","location","position","map_id","asset_id","map_width","map_height","variance","last_seen","at_location","coordinates_from","dateLeft","dateRight","dateLeftStartOfWeek","dateRightStartOfWeek"],"sourceRoot":"webpack:///","x_google_ignoreList":[16]}