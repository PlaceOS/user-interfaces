"use strict";(self.webpackChunkworkplace=self.webpackChunkworkplace||[]).push([["common"],{8676:(T,O,t)=>{t.d(O,{I:()=>B});var h=t(4509),o=t(6365),D=t(8426),i=t(1810),P=t(9377),M=t(312),c=t(3200),n=t(4505),v=t(7716),p=t(4350),g=t(823),K=t(522),l=t(7418),I=t(6942),u=t(8759),C=t(9128),d=t(6723);let B=(()=>{class a extends o.KG{constructor(){super(...arguments),this._poll=new n.X(0),this._options=new n.X({start:Date.now()}),this._loading=new n.X(""),this._schedule=new n.X([]),this.options=this._options.asObservable(),this.loading=this._loading.asObservable(),this.schedule=this._loading.asObservable(),this.events=(0,v.aj)([this._options,this._poll]).pipe((0,g.b)(1e3),(0,K.zg)(([s])=>{this._loading.next("Loading schedule...");const _={period_start:(0,i.Z)((0,P.Z)(s.start)),period_end:(0,i.Z)((0,M.Z)((0,c.Z)(s.start),6))};return s.calendar&&(_.calendar=s.calendar),this._schedule.next(this._schedule.getValue().filter(e=>!(0,o.MZ)(1e3*_.period_start,1e3*_.period_end,e.date,e.date+60*e.duration*1e3))),(0,p.D)([(0,D.u$)(Object.assign({},_)).pipe((0,l.K)(e=>[])),(0,h.F2)(Object.assign(Object.assign({},_),{type:"desk"})).pipe((0,l.K)(e=>[]))])}),(0,I.U)(([s,_])=>{const e=[...this._schedule.getValue(),...s,..._.filter(E=>"declined"!==E.status)].sort((E,L)=>E.date-L.date);return this._schedule.next((0,o.Tw)(e,"id")),e}),(0,l.K)(s=>[]),(0,u.b)(s=>this._loading.next("")),(0,C.d)(1))}startPolling(s=15e3){this.interval("poll",()=>this._poll.next(Date.now()),s)}stopPolling(){this.clearInterval("poll")}setOptions(s){this._options.next(Object.assign(Object.assign({},this._options.getValue()),s))}}return a.\u0275fac=function(){let r;return function(_){return(r||(r=d.n5z(a)))(_||a)}}(),a.\u0275prov=d.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})()}}]);
//# sourceMappingURL=common.js.map