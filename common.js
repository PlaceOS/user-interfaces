"use strict";(self.webpackChunkworkplace=self.webpackChunkworkplace||[]).push([["common"],{8676:(T,i,t)=>{t.d(i,{I:()=>B});var O=t(4509),o=t(6365),h=t(8426),E=t(1810),D=t(9377),P=t(312),M=t(3200),n=t(4505),c=t(7716),v=t(4350),g=t(823),I=t(522),u=t(6942),C=t(7418),K=t(8759),p=t(9128),d=t(6723);let B=(()=>{class e extends o.KG{constructor(){super(...arguments),this._poll=new n.X(0),this._options=new n.X({start:Date.now()}),this._loading=new n.X(""),this._schedule=new n.X([]),this.options=this._options.asObservable(),this.loading=this._loading.asObservable(),this.schedule=this._loading.asObservable(),this.events=(0,c.aj)([this._options,this._poll]).pipe((0,g.b)(1e3),(0,I.zg)(([s])=>{this._loading.next("Loading schedule...");const _={period_start:(0,E.Z)((0,D.Z)(s.start)),period_end:(0,E.Z)((0,P.Z)((0,M.Z)(s.start),6))};return s.calendar&&(_.calendar=s.calendar),this._schedule.next(this._schedule.getValue().filter(a=>!(0,o.MZ)(1e3*_.period_start,1e3*_.period_end,a.date,a.date+60*a.duration*1e3))),(0,v.D)([(0,h.u$)(Object.assign({},_)),(0,O.F2)(Object.assign(Object.assign({},_),{type:"desk"}))])}),(0,u.U)(([s,_])=>{const a=[...this._schedule.getValue(),...s,..._.filter(r=>"declined"!==r.status)].sort((r,L)=>r.date-L.date);return this._schedule.next((0,o.Tw)(a,"id")),a}),(0,C.K)(s=>[]),(0,K.b)(s=>this._loading.next("")),(0,p.d)(1))}startPolling(s=15e3){this.interval("poll",()=>this._poll.next(Date.now()),s)}stopPolling(){this.clearInterval("poll")}setOptions(s){this._options.next(Object.assign(Object.assign({},this._options.getValue()),s))}}return e.\u0275fac=function(){let l;return function(_){return(l||(l=d.n5z(e)))(_||e)}}(),e.\u0275prov=d.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);
//# sourceMappingURL=common.js.map