"use strict";(self.webpackChunkworkplace=self.webpackChunkworkplace||[]).push([["common"],{8676:(x,P,t)=>{t.d(P,{I:()=>R});var M=t(9638),h=t(9434),n=t(4549),v=t(8426),d=t(1810),c=t(9377),K=t(312),p=t(3200),e=t(4505),C=t(1942),I=t(7716),B=t(4350),L=t(9095),O=t(8759),i=t(9128),T=t(823),U=t(522),l=t(7418),A=t(6942),D=t(9676);let R=(()=>{class o extends n.KG{constructor(){super(...arguments),this._poll=new e.X(0),this._options=new e.X({start:Date.now()}),this._loading=new e.X(""),this._schedule=new e.X([]),this.options=this._options.asObservable(),this.loading=this._loading.asObservable(),this.schedule=this._loading.asObservable(),this.calendars=(0,C.H)(1e3).pipe((0,L.w)(s=>(0,h.yJ)()),(0,O.b)(s=>console.log("Calendars:",s)),(0,i.d)(1)),this.events=(0,I.aj)([this._options,this._poll]).pipe((0,T.b)(1e3),(0,U.zg)(([s])=>{this._loading.next("Loading schedule...");const _={period_start:(0,d.Z)((0,c.Z)(s.start)),period_end:(0,d.Z)((0,K.Z)((0,p.Z)(s.start),6))};return s.calendar&&(_.calendar=s.calendar),this._schedule.next(this._schedule.getValue().filter(a=>!(0,n.MZ)(1e3*_.period_start,1e3*_.period_end,a.date,a.date+60*a.duration*1e3))),(0,B.D)([(0,v.u$)({..._}).pipe((0,l.K)(a=>[])),(0,M.F2)({..._,type:"desk"}).pipe((0,l.K)(a=>[]))])}),(0,A.U)(([s,_])=>{const a=[...this._schedule.getValue(),...s,..._.filter(E=>"declined"!==E.status)].sort((E,W)=>E.date-W.date);return this._schedule.next((0,n.Tw)(a,"id")),a}),(0,l.K)(s=>[]),(0,O.b)(s=>this._loading.next("")),(0,i.d)(1))}startPolling(s=15e3){this.interval("poll",()=>this._poll.next(Date.now()),s)}stopPolling(){this.clearInterval("poll")}setOptions(s){this._options.next({...this._options.getValue(),...s})}}return o.\u0275fac=function(){let r;return function(_){return(r||(r=D.n5z(o)))(_||o)}}(),o.\u0275prov=D.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})()}}]);
//# sourceMappingURL=common.js.map