"use strict";(self.webpackChunkworkplace=self.webpackChunkworkplace||[]).push([["common"],{8676:(U,h,t)=>{t.d(h,{I:()=>L});var O=t(2088),n=t(6365),D=t(8426),d=t(1810),P=t(9377),M=t(312),v=t(3200),o=t(4505),c=t(7716),p=t(4350),K=t(823),I=t(522),l=t(7418),u=t(6942),C=t(8759),B=t(9128),i=t(9676);let L=(()=>{class a extends n.KG{constructor(){super(...arguments),this._poll=new o.X(0),this._options=new o.X({start:Date.now()}),this._loading=new o.X(""),this._schedule=new o.X([]),this.options=this._options.asObservable(),this.loading=this._loading.asObservable(),this.schedule=this._loading.asObservable(),this.events=(0,c.aj)([this._options,this._poll]).pipe((0,K.b)(1e3),(0,I.zg)(([s])=>{this._loading.next("Loading schedule...");const _={period_start:(0,d.Z)((0,P.Z)(s.start)),period_end:(0,d.Z)((0,M.Z)((0,v.Z)(s.start),6))};return s.calendar&&(_.calendar=s.calendar),this._schedule.next(this._schedule.getValue().filter(e=>!(0,n.MZ)(1e3*_.period_start,1e3*_.period_end,e.date,e.date+60*e.duration*1e3))),(0,p.D)([(0,D.u$)({..._}).pipe((0,l.K)(e=>[])),(0,O.F2)({..._,type:"desk"}).pipe((0,l.K)(e=>[]))])}),(0,u.U)(([s,_])=>{const e=[...this._schedule.getValue(),...s,..._.filter(E=>"declined"!==E.status)].sort((E,T)=>E.date-T.date);return this._schedule.next((0,n.Tw)(e,"id")),e}),(0,l.K)(s=>[]),(0,C.b)(s=>this._loading.next("")),(0,B.d)(1))}startPolling(s=15e3){this.interval("poll",()=>this._poll.next(Date.now()),s)}stopPolling(){this.clearInterval("poll")}setOptions(s){this._options.next({...this._options.getValue(),...s})}}return a.\u0275fac=function(){let r;return function(_){return(r||(r=i.n5z(a)))(_||a)}}(),a.\u0275prov=i.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})()}}]);
//# sourceMappingURL=common.js.map