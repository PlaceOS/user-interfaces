"use strict";(self.webpackChunkconcierge=self.webpackChunkconcierge||[]).push([[909],{9909:(k_,I,a)=>{a.r(I),a.d(I,{RoomManagerModule:()=>E});var d=a(6895),s=a(4006),g=a(3007),k=a(3045),U=a(2886),B=a(1529),_=a(4650),V=a(4945),v=a(5861),T=a(6221),m=a(8186),H=a(591),__=a(1086),e_=a(3426),o_=a(2198),t_=a(7545),C=a(4850),n_=a(7221),a_=a(5154),P=a(9521),R=a(1426),A=a(5938),u=a(9549),i_=a(4144),h=a(4385),b=a(3238),l_=a(6709),r_=a(1572),L=a(7957),s_=a(3670),G=a(5306),S=a(7331);function m_(t,e){1&t&&(_.TgZ(0,"button",4)(1,"app-icon"),_._uU(2,"close"),_.qZA()())}function c_(t,e){if(1&t&&(_.TgZ(0,"mat-option",22),_._uU(1),_.qZA()),2&t){const o=e.$implicit;_.Q6J("value",o.id),_.xp6(1),_.hij(" ",o.display_name||o.name," ")}}function d_(t,e){if(1&t&&(_.TgZ(0,"div",11)(1,"label",19),_.tHW(2,20),_._UZ(3,"span"),_.N_p(),_.qZA(),_.TgZ(4,"mat-form-field",13)(5,"mat-select",21),_.YNc(6,c_,2,2,"mat-option",17),_.ALo(7,"async"),_.qZA(),_.TgZ(8,"mat-error"),_._uU(9,"Level is required"),_.qZA()()()),2&t){const o=_.oxw(3);_.xp6(1),_.ekj("error",o.form.controls.zone.invalid&&o.form.controls.zone.touched),_.xp6(5),_.Q6J("ngForOf",_.lcZ(7,3,o.levels))}}function R_(t,e){1&t&&(_.TgZ(0,"mat-error"),_.SDv(1,28),_.qZA())}function E_(t,e){if(1&t&&(_.TgZ(0,"div",23)(1,"label",24),_.tHW(2,25),_._UZ(3,"span"),_.N_p(),_.qZA(),_.TgZ(4,"mat-form-field",13),_._UZ(5,"input",26),_.YNc(6,R_,2,0,"mat-error",27),_.qZA()()),2&t){const o=_.oxw(3);_.xp6(1),_.ekj("error",o.form.controls.name.invalid&&o.form.controls.name.touched),_.xp6(5),_.Q6J("ngIf",o.form.controls.name.invalid)}}function O_(t,e){1&t&&(_.TgZ(0,"mat-error"),_.SDv(1,32),_.qZA())}function S_(t,e){if(1&t&&(_.TgZ(0,"div",23)(1,"label",29),_.SDv(2,30),_.qZA(),_.TgZ(3,"mat-form-field",13),_._UZ(4,"input",31),_.YNc(5,O_,2,0,"mat-error",27),_.qZA()()),2&t){const o=_.oxw(3);_.xp6(1),_.ekj("error",o.form.controls.email.invalid&&o.form.controls.email.touched),_.xp6(4),_.Q6J("ngIf",o.form.controls.email.invalid)}}function f_(t,e){1&t&&(_.TgZ(0,"div",23)(1,"label",33),_.SDv(2,34),_.qZA(),_.TgZ(3,"mat-form-field",13),_._UZ(4,"input",35),_.qZA()())}function p_(t,e){1&t&&(_.TgZ(0,"div",23)(1,"label",36),_.SDv(2,37),_.qZA(),_.TgZ(3,"mat-form-field",13),_._UZ(4,"input",38),_.qZA()())}function M_(t,e){1&t&&(_.TgZ(0,"mat-error"),_.SDv(1,42),_.qZA())}function N_(t,e){if(1&t&&(_.TgZ(0,"div",11)(1,"label",39),_.SDv(2,40),_.qZA(),_.TgZ(3,"mat-form-field",13),_._UZ(4,"input",41),_.YNc(5,M_,2,0,"mat-error",27),_.qZA()()),2&t){const o=_.oxw(3);_.xp6(1),_.ekj("error",o.form.controls.support_url.invalid&&o.form.controls.support_url.touched),_.xp6(4),_.Q6J("ngIf",o.form.controls.support_url.invalid)}}function C_(t,e){1&t&&(_.TgZ(0,"mat-error"),_.SDv(1,46),_.qZA())}function A_(t,e){if(1&t&&(_.TgZ(0,"div",23)(1,"label",43),_.SDv(2,44),_.qZA(),_.TgZ(3,"mat-form-field",13),_._UZ(4,"input",45),_.YNc(5,C_,2,0,"mat-error",27),_.qZA()()),2&t){const o=_.oxw(3);_.xp6(1),_.ekj("error",o.form.controls.capacity.invalid&&o.form.controls.capacity.touched),_.xp6(4),_.Q6J("ngIf",o.form.controls.capacity.invalid)}}function u_(t,e){1&t&&(_.TgZ(0,"div",11)(1,"mat-checkbox",47),_.SDv(2,48),_.qZA()())}function g_(t,e){1&t&&(_.TgZ(0,"div",11)(1,"label",49),_.SDv(2,50),_.qZA(),_.TgZ(3,"mat-form-field",13),_._UZ(4,"textarea",51),_.qZA()())}function T_(t,e){if(1&t){const o=_.EpF();_.TgZ(0,"mat-chip-row",57),_.NdJ("removed",function(){const l=_.CHM(o).$implicit,O=_.oxw(4);return _.KtG(O.removeFeature(l))}),_._uU(1),_.TgZ(2,"app-icon",58),_._uU(3,"close"),_.qZA()()}if(2&t){const o=e.$implicit;_.Q6J("selectable",!0)("removable",!0),_.xp6(1),_.hij(" ",o," ")}}function P_(t,e){if(1&t){const o=_.EpF();_.TgZ(0,"div",11)(1,"label"),_.SDv(2,52),_.qZA(),_.TgZ(3,"mat-form-field",13)(4,"mat-chip-grid",53,54),_.YNc(6,T_,4,3,"mat-chip-row",55),_.TgZ(7,"input",56),_.NdJ("matChipInputTokenEnd",function(i){_.CHM(o);const l=_.oxw(3);return _.KtG(l.addFeature(i))}),_.qZA()()()()}if(2&t){const o=_.MAs(5),n=_.oxw(3);_.xp6(1),_.ekj("error",n.form.controls.features.invalid&&n.form.controls.features.touched),_.xp6(5),_.Q6J("ngForOf",n.feature_list),_.xp6(1),_.Q6J("matChipInputFor",o)("matChipInputSeparatorKeyCodes",n.separators)("matChipInputAddOnBlur",!0)}}function I_(t,e){1&t&&(_.TgZ(0,"div",11)(1,"label",59),_.SDv(2,60),_.qZA(),_.TgZ(3,"mat-form-field",13),_._UZ(4,"input",61),_.qZA()())}function U_(t,e){if(1&t&&(_.TgZ(0,"mat-option",22),_._uU(1),_.qZA()),2&t){const o=e.$implicit;_.Q6J("value",o),_.xp6(1),_.Oqu(o)}}function v_(t,e){1&t&&(_.TgZ(0,"mat-option",62),_._uU(1," No matching timezones "),_.qZA()),2&t&&_.Q6J("disabled",!0)}function h_(t,e){1&t&&(_.TgZ(0,"div",11)(1,"label",63),_.SDv(2,64),_.qZA(),_._UZ(3,"image-list-field",65),_.qZA())}function b_(t,e){if(1&t&&(_.TgZ(0,"form",7),_.YNc(1,d_,10,5,"div",8),_.TgZ(2,"div",9),_.YNc(3,E_,7,3,"div",10),_.YNc(4,S_,6,3,"div",10),_.qZA(),_.TgZ(5,"div",9),_.YNc(6,f_,5,0,"div",10),_.YNc(7,p_,5,0,"div",10),_.qZA(),_.YNc(8,N_,6,3,"div",8),_.TgZ(9,"div",9),_.YNc(10,A_,6,3,"div",10),_.YNc(11,u_,3,0,"div",8),_.qZA(),_.YNc(12,g_,5,0,"div",8),_.YNc(13,P_,8,6,"div",8),_.YNc(14,I_,5,0,"div",8),_.TgZ(15,"div",11)(16,"label",12),_._uU(17,"Timezone"),_.qZA(),_.TgZ(18,"mat-form-field",13)(19,"app-icon",14),_._uU(20,"search"),_.qZA(),_._UZ(21,"input",15),_.qZA(),_.TgZ(22,"mat-autocomplete",null,16),_.YNc(24,U_,2,2,"mat-option",17),_.YNc(25,v_,2,1,"mat-option",18),_.qZA()(),_.YNc(26,h_,4,0,"div",8),_.qZA()),2&t){const o=_.MAs(23),n=_.oxw(2);_.Q6J("formGroup",n.form),_.xp6(1),_.Q6J("ngIf",n.form.controls.zone),_.xp6(2),_.Q6J("ngIf",n.form.controls.name),_.xp6(1),_.Q6J("ngIf",n.form.controls.email),_.xp6(2),_.Q6J("ngIf",n.form.controls.display_name),_.xp6(1),_.Q6J("ngIf",n.form.controls.display_name),_.xp6(1),_.Q6J("ngIf",n.form.controls.support_url),_.xp6(2),_.Q6J("ngIf",n.form.controls.capacity),_.xp6(1),_.Q6J("ngIf",n.form.controls.bookable),_.xp6(1),_.Q6J("ngIf",n.form.controls.description),_.xp6(1),_.Q6J("ngIf",n.form.controls.features),_.xp6(1),_.Q6J("ngIf",n.form.controls.map_id),_.xp6(7),_.Q6J("matAutocomplete",o),_.xp6(3),_.Q6J("ngForOf",n.filtered_timezones),_.xp6(1),_.Q6J("ngIf",!n.timezones.length),_.xp6(1),_.Q6J("ngIf",n.form.controls.images)}}function L_(t,e){if(1&t&&(_.TgZ(0,"main",5),_.YNc(1,b_,27,16,"form",6),_.qZA()),2&t){const o=_.oxw();_.xp6(1),_.Q6J("ngIf",o.form)}}function G_(t,e){1&t&&(_.TgZ(0,"footer",66)(1,"button",67),_._uU(2,"Save"),_.qZA()())}function x_(t,e){1&t&&(_.TgZ(0,"div",68),_._UZ(1,"mat-spinner",69),_.TgZ(2,"p",70),_._uU(3,"Saving room..."),_.qZA()())}class f extends R.cx{get feature_list(){return this.form.controls.features.value}constructor(e,o,n){super(),this._data=e,this._dialog_ref=o,this._org=n,this.loading=!1,this.timezones=[],this.filtered_timezones=[],this.levels=this._org.active_levels,this.form=(0,U.ji)(this._data.room),this.encryption_levels=[{id:m.sUp.None,name:"None"},{id:m.sUp.Support,name:"Support"},{id:m.sUp.Admin,name:"Admin"},{id:m.sUp.NeverDisplay,name:"Never Display"}],this.query_fn=i=>(0,m.I0G)({q:i}).pipe((0,C.U)(l=>l.data)),this.separators=[P.K5,P.OC,P.L_]}ngOnChanges(e){e.form&&(this.updateTimezoneList(),this.subscription("tz-change",this.form.valueChanges.subscribe(({timezone:o})=>this.filtered_timezones=this.timezones.filter(n=>n.toLowerCase().includes(o.toLowerCase())))))}addFeature(e){if(!this.form||!this.form.controls.features)return;const o=e.input,n=e.value,i=this.feature_list;(n||"").trim()&&(i.push(n),this.form.controls.features.setValue(i)),o&&(o.value="")}removeFeature(e){if(!this.form||!this.form.controls.features)return;const o=this.feature_list,n=o.indexOf(e);n>=0&&(o.splice(n,1),this.form.controls.features.setValue(o))}updateTimezoneList(){const e=this.form?.value?.timezone||"";this.timezones=R.sM,this.filtered_timezones=this.timezones.filter(o=>o.toLowerCase().includes(e.toLowerCase()))}save(){var e=this;return(0,v.Z)(function*(){if(!e.form.valid)return(0,R.cB)(`Some form fields are invalid. [${(0,R.RD)(e.form).join(", ")}]`);e.form.value.id||e.form.patchValue({zones:(0,R.Tw)([e._org.organisation.id,e._org.building.parent_id,e._org.building.id,e.form.value.zone?.id])}),e.loading=!0,e._dialog_ref.disableClose=!0;const o=e.form.getRawValue();yield(o.id?(0,m.EQg)(o.id,o):(0,m.tgw)(o)).toPromise(),e._dialog_ref.disableClose=!1,e._dialog_ref.close(),e.loading=!1})()}}f.\u0275fac=function(e){return new(e||f)(_.Y36(A.WI),_.Y36(A.so),_.Y36(T.w7))},f.\u0275cmp=_.Xpm({type:f,selectors:[["room-form-modal"]],features:[_.qOj,_.TTD],decls:8,vars:5,consts:function(){let t,e,o,n,i,l,O,x,D,Z,y,F,$,Y,z,K,W,X,J,w,q,Q,j;return t=$localize`:@@zoneLabel␟805d5ab24c829f98df246a63541ee827ce04a4c4␟6308222021008136210: Level${"\ufffd#3\ufffd"}:START_TAG_SPAN:*${"\ufffd/#3\ufffd"}:CLOSE_TAG_SPAN:: `,e=$localize`:@@nameLabel␟ce22d533a3bc86b04d363cdacf055e861f719107␟253967969926135345: Name${"\ufffd#3\ufffd"}:START_TAG_SPAN:*${"\ufffd/#3\ufffd"}:CLOSE_TAG_SPAN:: `,o=$localize`:@@systemNamePlaceholder␟412d74982a750ad38d528a416090cad259267cf7␟3270670506078615677:Room Name`,n=$localize`:@@systemNameError␟a76167ad44bb224b5e970e7cdce5e03ba50bbf34␟4944106304667909261:Room name is required`,i=$localize`:@@emailLabel␟7e7d6d1958ec577b1f852c495aa8abb88a5a4e8c␟3680148548084285501: Email: `,l=$localize`:@@systemEmailPlaceholder␟796480f8af4a196dc6343cf00d09c7841f270f3a␟3140960526772549616:Room Email`,O=$localize`:@@emailError␟66a4553914df830f0bc1dd1f0a42c57fd85864de␟6407494155279173358:A valid email is required`,x=$localize`:@@displayNameLabel␟e966586c3aadb81b0555b483a36f46776d9792c8␟6691873398244034720:Display Name: `,D=$localize`:@@displayNamePlaceholder␟e438ba78cbafdb5bcbce0820bfaad995a504f222␟3013055597615607317:Display Name`,Z=$localize`:@@codeNameLabel␟61275d3a79a1234bf3fcb50f72d8dc798ef57e27␟7610172352109675938:Code: `,y=$localize`:@@codeNamePlaceholder␟68572de01b84c678be4bf8a27b990ecac2f41ce9␟8186013988289067040:Code`,F=$localize`:@@supportUrlLabel␟168d80b4bd6d50c9bf727b7c091b2328098fb9fb␟7529216744352106375: Support URL: `,$=$localize`:@@suportUrlPlaceholder␟bf9ae7f0e3cf343578967894e31ba3db4d5622c4␟5567034448630716072:Support URL`,Y=$localize`:@@urlError␟2c15d675ec84f445a1ea8641feb348be27d8c0cc␟2156189077122705793: A valid URL is required `,z=$localize`:@@capacityLabel␟4fdfe5d0bf8898e5def2c3f9d5971f5e23e753d9␟255201359546348839: Capacity: `,K=$localize`:@@capacityPlaceholder␟ce9dfdc6dccb28dc75a78c704e09dc18fb02dcfa␟7825570888384392250:Capacity`,W=$localize`:@@capacityError␟dedde35e8848b99432791a4326aa103b8ec774c4␟8134498951699811316: A valid positive number is required `,X=$localize`:@@bookableLabel␟96462a3176e48f64fd7d25d58a6d49afe4628700␟414602767324525018: Bookable `,J=$localize`:@@descriptionLabel␟4a22c6843133f0b0d7dc0d28f864f2f90c1de7ad␟6996799422725544865:Description:`,w=$localize`:@@featuresLabel␟048b3adb78b9aabee65dbb43d9c5aadcda49015f␟1939786999396738714: Features: `,q=$localize`:@@mapIdLabel␟46a8087017d0d929ed6d398ba5d3a5ea1be7ab9b␟1613414518051599973:Map ID:`,Q=$localize`:@@mapIdPlaceholder␟8936f99965a07edd4b09a0e4120f4dd5de79604d␟609514156045819245:Map SVG ID selector e.g. area-01.10-status`,j=$localize`:@@imagesLabel␟e5d9e00faa06714d7671b164cad364b26f4c585b␟5137125764814732349:Images:`,[["btn","","icon","","mat-dialog-close","",4,"ngIf"],["class","max-h-[65vh] overflow-y-auto overflow-x-hidden p-4",4,"ngIf","ngIfElse"],["class","p-2 flex justify-end border-t border-gray-200",4,"ngIf"],["load_state",""],["btn","","icon","","mat-dialog-close",""],[1,"max-h-[65vh]","overflow-y-auto","overflow-x-hidden","p-4"],["system","","class","flex flex-col w-[36rem] max-w-[calc(100vw-4rem)]",3,"formGroup",4,"ngIf"],["system","",1,"flex","flex-col","w-[36rem]","max-w-[calc(100vw-4rem)]",3,"formGroup"],["class","flex flex-col",4,"ngIf"],[1,"flex","space-x-2"],["class","flex flex-col flex-1",4,"ngIf"],[1,"flex","flex-col"],["for","timezone"],["appearance","outline"],["matPrefix","",1,"text-2xl"],["matInput","","formControlName","timezone","placeholder","Room timezone",3,"matAutocomplete"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"disabled",4,"ngIf"],["for","zone"],t,["formControlName","zone","placeholder","Select Level"],[3,"value"],[1,"flex","flex-col","flex-1"],["for","system-name"],e,["matInput","","name","system-name","placeholder",o,"formControlName","name","required",""],[4,"ngIf"],n,["for","system-email"],i,["matInput","","name","system-email","placeholder",l,"formControlName","email"],O,["for","display-name"],x,["matInput","","name","display-name","placeholder",D,"formControlName","display_name"],["for","code-name"],Z,["matInput","","name","code-name","placeholder",y,"formControlName","code"],["for","support-url"],F,["matInput","","name","support-url","placeholder",$,"formControlName","support_url"],Y,["for","capacity"],z,["matInput","","name","capacity","type","number","placeholder",K,"formControlName","capacity"],W,["name","bookable","formControlName","bookable"],X,["for","description"],J,["matInput","","name","description","placeholder","Description","formControlName","description"],w,["aria-label","Room features"],["chipList",""],[3,"selectable","removable","removed",4,"ngFor","ngForOf"],["placeholder","New feature...",3,"matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputAddOnBlur","matChipInputTokenEnd"],[3,"selectable","removable","removed"],["matChipRemove",""],["for","map_id"],q,["matInput","","name","map_id","placeholder",Q,"formControlName","map_id"],[3,"disabled"],["for","images"],j,["name","images","formControlName","images"],[1,"p-2","flex","justify-end","border-t","border-gray-200"],["btn","",1,"w-32"],[1,"flex","flex-col","items-center","justify-center","w-64","h-64"],["diameter","32"],[1,"mt-4"]]},template:function(e,o){if(1&e&&(_.TgZ(0,"header")(1,"h2"),_._uU(2),_.qZA(),_.YNc(3,m_,3,0,"button",0),_.qZA(),_.YNc(4,L_,2,1,"main",1),_.YNc(5,G_,3,0,"footer",2),_.YNc(6,x_,4,0,"ng-template",null,3,_.W1O)),2&e){const n=_.MAs(7);_.xp6(2),_.hij("",o.form.value.id?"Edit":"Add"," Room"),_.xp6(1),_.Q6J("ngIf",!o.loading),_.xp6(1),_.Q6J("ngIf",!o.loading)("ngIfElse",n),_.xp6(1),_.Q6J("ngIf",!o.loading)}},dependencies:[d.sg,d.O5,s._Y,s.Fj,s.wV,s.JJ,s.JL,s.Q7,u.KE,u.TO,u.qo,i_.Nt,h.gD,b.ey,l_.oG,r_.Ou,A.ZT,L.XC,L.ZL,s.sg,s.u,s_.h,G.o,S.RA,S.oH,S.qH,S.z3,d.Ov],styles:["mat-checkbox[_ngcontent-%COMP%]{margin-top:2.5em;margin-bottom:1.5em}@media screen and (max-width: 640px){mat-checkbox[_ngcontent-%COMP%]{margin-top:0}}"]});class c{constructor(e,o){this._org=e,this._dialog=o,this._options=new H.X({}),this.options=this._options.asObservable(),this.room_list=this._org.active_building.pipe((0,o_.h)(n=>!!n?.id),(0,t_.w)(n=>(0,m.vIL)({zone_id:n.id}).pipe((0,C.U)(({data:i})=>i),(0,n_.K)(()=>(0,__.of)([])))),(0,C.U)(n=>n.filter(i=>this._org.levelWithID(i.zones)).sort((i,l)=>i.name.localeCompare(l.name))),(0,a_.d)(1)),this.filtered_rooms=(0,e_.aj)([this.room_list,this._options]).pipe((0,C.U)(([n,i])=>(i.zone&&(n=n.filter(l=>l.zones.includes(i.zone))),i.search&&(n=n.filter(l=>l.name.toLowerCase().includes(i.search.toLowerCase()))),n)))}setFilters(e){this._options.next({...this._options.getValue(),...e})}setSearchString(e){this._options.next({...this._options.getValue(),search:e})}editRoom(e=new m.G6j){this._dialog.open(f,{data:{room:e}})}}c.\u0275fac=function(e){return new(e||c)(_.LFG(T.w7),_.LFG(A.uw))},c.\u0275prov=_.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"});var D_=a(7224),Z_=a(9396);function y_(t,e){if(1&t&&(_.TgZ(0,"mat-option",3),_._uU(1),_.qZA()),2&t){const o=e.$implicit;_.Q6J("value",o.id),_.xp6(1),_.hij(" ",o.display_name||o.name," ")}}class p extends R.cx{get building(){return this._org.building}constructor(e,o,n,i){super(),this._manager=e,this._org=o,this._route=n,this._router=i,this.levels=this._org.active_levels,this.filters=this._manager.options,this.setFilters=l=>this._manager.setFilters(l),this.setSearch=l=>this._manager.setSearchString(l),this.updateZones=l=>{this._router.navigate([],{relativeTo:this._route,queryParams:{zone_id:l}}),this._manager.setFilters({zone:l})},this.newRoom=()=>this._manager.editRoom()}ngOnInit(){var e=this;return(0,v.Z)(function*(){yield e._org.initialised.pipe((0,D_.P)(o=>o)).toPromise(),e.subscription("route.query",e._route.queryParamMap.subscribe(o=>{if(o.has("zone_id")){const n=o.get("zone_id");if(n.length){const i=e._org.levelWithID([n]);if(!i)return;e._org.building=e._org.buildings.find(l=>l.id===i.parent_id),e.setFilters({zone:n})}}})),e.subscription("levels",e._org.active_levels.subscribe(o=>{var n=o.find(i=>i.id===n);!n&&o.length&&(n=o[0].id),e.updateZones(n)})),e.setSearch("")})()}}p.\u0275fac=function(e){return new(e||p)(_.Y36(c),_.Y36(T.w7),_.Y36(g.gz),_.Y36(g.F0))},p.\u0275cmp=_.Xpm({type:p,selectors:[["room-manager-topbar"]],features:[_.qOj],decls:12,vars:7,consts:[[1,"flex","items-center","bg-white","dark:bg-neutral-700","h-20","px-4","border-b","border-gray-300","dark:border-neutral-500","space-x-2"],["appearance","outline"],["placeholder","All Levels",3,"ngModel","ngModelChange"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["btn","",1,"w-32",3,"click"],[1,"flex-1","w-2"],[1,"mr-2",3,"modelChange"]],template:function(e,o){if(1&e&&(_.TgZ(0,"div",0)(1,"mat-form-field",1)(2,"mat-select",2),_.NdJ("ngModelChange",function(i){return o.updateZones(i)}),_.ALo(3,"async"),_.TgZ(4,"mat-option",3),_._uU(5,"All Levels"),_.qZA(),_.YNc(6,y_,2,2,"mat-option",4),_.ALo(7,"async"),_.qZA()(),_.TgZ(8,"button",5),_.NdJ("click",function(){return o.newRoom()}),_._uU(9,"New Room"),_.qZA(),_._UZ(10,"div",6),_.TgZ(11,"searchbar",7),_.NdJ("modelChange",function(i){return o.setSearch(i)}),_.qZA()()),2&e){let n;_.xp6(2),_.Q6J("ngModel",null==(n=_.lcZ(3,3,o.filters))?null:n.zone),_.xp6(2),_.Q6J("value",null==o.building?null:o.building.id),_.xp6(2),_.Q6J("ngForOf",_.lcZ(7,5,o.levels))}},dependencies:[d.sg,s.JJ,s.On,Z_.U,u.KE,h.gD,b.ey,d.Ov],styles:["mat-form-field[_ngcontent-%COMP%]{height:3.25rem}"]});var F_=a(266),$_=a(1110),Y_=a(3838);function z_(t,e){if(1&t&&(_._uU(0),_.ALo(1,"level"),_.ALo(2,"level")),2&t){const o=e.data;let n;_.hij(" ",(null==(n=_.lcZ(1,1,o))?null:n.display_name)||(null==(n=_.lcZ(2,3,o))?null:n.name)," ")}}function K_(t,e){if(1&t&&(_.TgZ(0,"div",5)(1,"app-icon"),_._uU(2),_.qZA()()),2&t){const o=e.data;_.ekj("bg-red-500",!o)("bg-green-500",o),_.xp6(2),_.Oqu(o?"done":"close")}}function W_(t,e){if(1&t){const o=_.EpF();_.TgZ(0,"div",6)(1,"button",7),_.NdJ("click",function(){const l=_.CHM(o).row,O=_.oxw();return _.KtG(O.editRoom(l))}),_.TgZ(2,"app-icon"),_._uU(3,"edit"),_.qZA()(),_.TgZ(4,"button",8)(5,"app-icon"),_._uU(6,"more_horiz"),_.qZA()()()}}const X_=function(){return["display_name","zones","capacity","type","bookable","actions"]},J_=function(){return["Room Name","Level","Capacity","Room Type","Bookable"," "]},w_=function(){return["flex","8r","6r","8r","6r","12r"]},q_=function(t,e,o){return{bookable:t,zones:e,actions:o}};class M{constructor(e){this._manager=e,this.rooms=this._manager.filtered_rooms,this.editRoom=o=>this._manager.editRoom(o)}}M.\u0275fac=function(e){return new(e||M)(_.Y36(c))},M.\u0275cmp=_.Xpm({type:M,selectors:[["room-list"]],decls:8,vars:12,consts:[[1,"absolute","inset-0","overflow-auto"],["empty","No rooms for selected level or building",1,"block","min-w-[56rem]","w-full","h-full",3,"dataSource","columns","display_column","column_size","template"],["level_template",""],["bool_template",""],["action_template",""],[1,"rounded","h-8","w-8","flex","items-center","justify-center","text-2xl","text-white","mx-auto"],[1,"w-full","flex","justify-end","space-x-2"],["btn","","icon","","matTooltip","Edit Room",3,"click"],["btn","","icon","","matTooltip","Room Details"]],template:function(e,o){if(1&e&&(_.TgZ(0,"div",0),_._UZ(1,"custom-table",1),_.qZA(),_.YNc(2,z_,3,5,"ng-template",null,2,_.W1O),_.YNc(4,K_,3,5,"ng-template",null,3,_.W1O),_.YNc(6,W_,7,0,"ng-template",null,4,_.W1O)),2&e){const n=_.MAs(3),i=_.MAs(5),l=_.MAs(7);_.xp6(1),_.Q6J("dataSource",o.rooms)("columns",_.DdM(5,X_))("display_column",_.DdM(6,J_))("column_size",_.DdM(7,w_))("template",_.kEZ(8,q_,i,n,l))}},dependencies:[F_.gM,G.o,$_.C,Y_.M]});class N{}N.\u0275fac=function(e){return new(e||N)},N.\u0275cmp=_.Xpm({type:N,selectors:[["","app-weekview",""]],attrs:["app-weekview",""],decls:4,vars:0,consts:[[1,"relative","overflow-hidden","flex","flex-col"],[1,"block","w-full"],[1,"block","w-full","relative","flex-1","h-1/2"]],template:function(e,o){1&e&&(_._UZ(0,"sidebar"),_.TgZ(1,"main",0),_._UZ(2,"room-manager-topbar",1)(3,"room-list",2),_.qZA())},dependencies:[V.k,p,M],styles:["[_nghost-%COMP%]{display:flex;height:100%;width:100%;background:var(--bg)}sidebar[_ngcontent-%COMP%]{height:100%}main[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1;min-width:50%;height:100%}"]});const j_=[{path:"",component:N}];class E{}E.\u0275fac=function(e){return new(e||E)},E.\u0275mod=_.oAB({type:E}),E.\u0275inj=_.cJS({imports:[d.ez,s.u5,k.v,U.YR,B.PP,S.Hi,g.Bz.forChild(j_)]})}}]);