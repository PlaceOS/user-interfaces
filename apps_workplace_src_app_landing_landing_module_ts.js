"use strict";(self.webpackChunkworkplace=self.webpackChunkworkplace||[]).push([["apps_workplace_src_app_landing_landing_module_ts"],{368:($e,M,l)=>{l.r(M),l.d(M,{AppLandingModule:()=>Pe});var u=l(4666),Z=l(2508),f=l(959),E=l(8147),d=l(1670),C=l(6221),x=l(3690),v=l(4505),L=l(4139),w=l(6942),$=l(823),G=l(9095),k=l(7418),B=l(8759),D=l(9128),R=l(5670),K=l(9151),H=l(3200),g=l(232),_=l(1299),y=l(3149),X=l(9434),V=l(7625),e=l(9676);let U=(()=>{class i extends g.KG{constructor(t,n,o){super(),this._calendar=t,this._schedule=n,this._org=o,this._options=new v.X({}),this._loading=new v.X(""),this._loading_spaces=new v.X(!1),this._free_spaces=new v.X([]),this._contacts=new v.X([]),this._level_occupancy=new v.X([]),this.free_spaces=this._free_spaces.asObservable(),this.upcoming_events=this._schedule.filtered_bookings.pipe((0,w.U)(a=>a.filter(c=>c instanceof _.ym))),this.contacts=this._contacts.asObservable(),this.options=this._options.asObservable(),this.loading=this._loading.asObservable(),this.loading_spaces=this._loading_spaces.asObservable(),this.search_results=this._options.pipe((0,$.b)(500),(0,G.w)(({search:a})=>(this._loading.next("Loading users..."),a?(0,y.VE)(a).pipe((0,k.K)(()=>(0,L.of)([]))):(0,L.of)([]))),(0,B.b)(()=>this._loading.next("")),(0,D.d)(1)),this.level_occupancy=this._level_occupancy.asObservable(),this.init()}init(){var t=this;return(0,d.Z)(function*(){yield t._org.initialised.pipe((0,R.P)(a=>a)).toPromise(),t.subscription("building",t._org.active_building.pipe((0,K.h)(a=>!!a)).subscribe(()=>t.updateBuildingMetadata()));let n=t._org.binding("area_management");if(!n)return;const o=(0,x.rTZ)(n,"AreaManagement").binding("overview");o.listen().subscribe(a=>t.updateOccupancy(a||{})),o.bind()})()}setOptions(t){this._options.next({...this._options.getValue(),...t})}pollFreeSpaces(t=6e4){this._loading_spaces.next(!0),this.updateFreeSpaces(),this.interval("free_spaces",()=>this.updateFreeSpaces(),t)}stopPollingFreeSpaces(){this.clearInterval("free_spaces")}pollUpcomingEvents(t=1e4){return this._schedule.setDate(Date.now()),this._schedule.startPolling(t)}stopPollingUpcomingEvents(){this._schedule.stopPolling()}updateContacts(){var t=this;return(0,d.Z)(function*(){const n=yield(0,x.rlq)((0,g.ar)().id,"contacts").toPromise();t._contacts.next((n.details instanceof Array?n.details:[]).map(a=>new y.n5(a)))})()}addContact(t){var n=this;return(0,d.Z)(function*(){let o=[...n._contacts.getValue()];o.push(t),o=(0,g.Tw)(o,"email");const a=yield(0,x.Ymr)((0,g.ar)().id,{name:"contacts",description:"Contacts for the User",details:o}).toPromise();n._contacts.next((a.details instanceof Array?a.details:[]).map(r=>new y.n5(r)))})()}removeContact(t){var n=this;return(0,d.Z)(function*(){let o=[...n._contacts.getValue()];o=o.filter(r=>r.email!==t.email);const a=yield(0,x.Ymr)((0,g.ar)().id,{name:"contacts",description:"Contacts for the User",details:o}).toPromise();n._contacts.next((a.details instanceof Array?a.details:[]).map(r=>new y.n5(r)))})()}updateOccupancy(t){var n=this;return(0,d.Z)(function*(){const o=[...n._org.levels];o.sort((a,c)=>t[a.id]?.recommendation-t[c.id]?.recommendation),n._level_occupancy.next(o)})()}updateFreeSpaces(){var t=this;return(0,d.Z)(function*(){if(!t._org.building)return;t._loading_spaces.next(!0);const n=Math.floor((new Date).valueOf()/1e3),o=Math.floor((0,H.Z)(new Date).valueOf()/1e3),a=yield t._calendar.freeBusy({period_start:n,period_end:o,zone_ids:t._org.building.id}).pipe((0,w.U)(c=>c.filter(r=>!r.availability.length||r.availability.find(p=>"busy"!==p.status))),(0,k.K)(c=>(0,L.of)([]))).toPromise();a.sort((c,r)=>c.capacity-r.capacity),t._free_spaces.next(a),t._loading_spaces.next(!1)})()}updateBuildingMetadata(){var t=this;return(0,d.Z)(function*(){t._level_occupancy.next([]);const n=t._org.binding("occupancy");if(!n)return;const{sys:o,module:a,index:c}=n,r=(0,x.rTZ)(o,a,c);!r||(t._occupancy_binding&&t._occupancy_binding.unbind(),t._occupancy_binding=r.binding("occupancy"),t._occupancy_binding.bind(),t.subscription("occupancy_binding",t._occupancy_binding.listen().subscribe(p=>{const b=Object.keys(p).map(m=>({id:m,...p[m]}));b.sort((m,Ee)=>m.recommendation_factor-Ee.recommendation_factor),t._level_occupancy.next(b.map(m=>t._org.levelWithID([m.id])))})))})()}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(X.ot),e.LFG(V.I),e.LFG(C.w7))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var T=l(5306),J=l(1708),F=l(207),A=l(6198);const Y=function(){return["/explore"]},z=function(i){return{level:i}};function W(i,s){if(1&i&&(e.TgZ(0,"button",8)(1,"div",9),e._UZ(2,"img",10),e.qZA(),e.TgZ(3,"div",11)(4,"div",12),e._uU(5),e.qZA(),e.TgZ(6,"div",13)(7,"app-icon",14),e._uU(8,"place"),e.qZA(),e.TgZ(9,"span"),e._uU(10),e.qZA()()()()),2&i){const t=s.$implicit,n=e.oxw();let o;e.Q6J("routerLink",e.DdM(4,Y))("queryParams",e.VKq(5,z,t.id)),e.xp6(5),e.hij(" ",t.display_name||t.name," "),e.xp6(5),e.Oqu((null==(o=n.building(t.parent_id))?null:o.display_name)||(null==(o=n.building(t.parent_id))?null:o.name))}}function ee(i,s){1&i&&(e.TgZ(0,"span",15),e._uU(1," No free spaces "),e.qZA())}function te(i,s){1&i&&e._UZ(0,"mat-spinner",16)}function ne(i,s){if(1&i&&(e._UZ(0,"img",19),e.ALo(1,"async"),e.ALo(2,"space")),2&i){const t=e.oxw().$implicit;let n;e.Q6J("src",null==(n=e.lcZ(1,1,e.lcZ(2,3,t.id)))?null:n.images[0],e.LSH)}}const ie=function(i){return{space:i}};function oe(i,s){if(1&i&&(e.TgZ(0,"button",8)(1,"div",17),e.YNc(2,ne,3,5,"img",18),e.ALo(3,"async"),e.ALo(4,"space"),e.qZA(),e.TgZ(5,"div",11)(6,"div",12),e._uU(7),e.qZA(),e.TgZ(8,"div",13)(9,"app-icon",14),e._uU(10,"place"),e.qZA(),e.TgZ(11,"span"),e._uU(12),e.qZA()()()()),2&i){const t=s.$implicit;e.oxw();const n=e.MAs(22);let o;e.Q6J("routerLink",e.DdM(10,Y))("queryParams",e.VKq(11,ie,t.email)),e.xp6(2),e.Q6J("ngIf",null==(o=e.lcZ(3,6,e.lcZ(4,8,t.id)))||null==o.images?null:o.images.length)("ngIfElse",n),e.xp6(5),e.hij(" ",t.display_name||t.name," "),e.xp6(5),e.Oqu(t.level.display_name||t.level.name)}}function ae(i,s){1&i&&(e.TgZ(0,"span",15),e._uU(1," No free rooms "),e.qZA())}function se(i,s){1&i&&e._UZ(0,"img",20)}let N=(()=>{class i{constructor(t,n){this._state=t,this._org=n,this.space_list=this._state.free_spaces,this.loading_spaces=this._state.loading_spaces,this.levels_free=this._state.level_occupancy}building(t){return this._org.buildings.find(n=>n.id===t)}ngOnInit(){var t=this;return(0,d.Z)(function*(){t._state.pollFreeSpaces()})()}ngOnDestroy(){this._state.stopPollingFreeSpaces()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(U),e.Y36(C.w7))},i.\u0275cmp=e.Xpm({type:i,selectors:[["landing-availability"]],decls:23,vars:15,consts:[[1,"py-2"],[1,"sm:text-lg","font-medium","mb-2","sm:mb-4","px-4"],[1,"flex","items-center","text-sm","sm:text-base","px-4","space-x-2"],[1,"w-full","overflow-auto","flex","items-center","space-x-4","px-4","py-2"],["matRipple","","class","flex items-center h-24 min-w-[12.5rem] rounded-lg bg-white dark:bg-[#1F2021] shadow p-4 space-x-2",3,"routerLink","queryParams",4,"ngFor","ngForOf"],["class","opacity-60 text-sm mb-2",4,"ngIf"],["diameter","24",4,"ngIf"],["space_placeholder",""],["matRipple","",1,"flex","items-center","h-24","min-w-[12.5rem]","rounded-lg","bg-white","dark:bg-[#1F2021]","shadow","p-4","space-x-2",3,"routerLink","queryParams"],[1,"min-w-[4.5rem]","h-[4.5rem]","rounded","bg-gray-200","dark:bg-neutral-800","flex","items-center","justify-center"],["src","assets/icons/desk-placeholder.svg",1,"m-auto"],[1,"text-left"],[1,"max-w-full","truncate","px-1.5"],[1,"max-w-full","truncate","text-sm","opacity-60","flex","items-center"],[1,"text-blue-500","text-lg"],[1,"opacity-60","text-sm","mb-2"],["diameter","24"],[1,"w-[4.5rem]","h-[4.5rem]","rounded","bg-gray-200","dark:bg-neutral-800","overflow-hidden","flex","items-center","justify-center"],["class","min-h-full object-cover",3,"src",4,"ngIf","ngIfElse"],[1,"min-h-full","object-cover",3,"src"],["src","assets/icons/room-placeholder.svg",1,"m-auto"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._uU(2," Available Now "),e.qZA(),e.TgZ(3,"div",2)(4,"div"),e._uU(5,"Spaces"),e.qZA()(),e.TgZ(6,"div",3),e.YNc(7,W,11,7,"button",4),e.ALo(8,"async"),e.YNc(9,ee,2,0,"span",5),e.ALo(10,"async"),e.qZA(),e.TgZ(11,"div",2)(12,"div"),e._uU(13,"Rooms"),e.qZA(),e.YNc(14,te,1,0,"mat-spinner",6),e.ALo(15,"async"),e.qZA(),e.TgZ(16,"div",3),e.YNc(17,oe,13,13,"button",4),e.ALo(18,"async"),e.YNc(19,ae,2,0,"span",5),e.ALo(20,"async"),e.qZA()(),e.YNc(21,se,1,0,"ng-template",null,7,e.W1O)),2&t&&(e.xp6(7),e.Q6J("ngForOf",e.lcZ(8,5,n.levels_free)),e.xp6(2),e.Q6J("ngIf",!e.lcZ(10,7,n.levels_free).length),e.xp6(5),e.Q6J("ngIf",e.lcZ(15,9,n.loading_spaces)),e.xp6(3),e.Q6J("ngForOf",e.lcZ(18,11,n.space_list)),e.xp6(2),e.Q6J("ngIf",!e.lcZ(20,13,n.space_list).length))},dependencies:[u.sg,u.O5,T.o,J.Ou,F.wG,f.rH,u.Ov,A.X],styles:["*[_ngcontent-%COMP%]{flex-shrink:0}\n/*# sourceMappingURL=landing-availability.component.ts-angular-inline--72.css.map*/"]}),i})();var le=l(7716),ce=l(9685),h=l(8589),O=l(4522);const re=["search_input"];function pe(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",14)(1,"div",15),e._UZ(2,"a-user-avatar",16)(3,"div",17),e.qZA(),e.TgZ(4,"div",18)(5,"div",19),e._uU(6),e.qZA(),e.TgZ(7,"div",20),e._uU(8),e.qZA(),e.TgZ(9,"div",21),e._uU(10),e.qZA()(),e.TgZ(11,"button",22)(12,"app-icon"),e._uU(13,"more_horiz"),e.qZA()(),e.TgZ(14,"mat-menu",23,24)(16,"button",25),e.NdJ("click",function(){const a=e.CHM(t).$implicit,c=e.oxw(2);return e.KtG(c.newMeeting(a))}),e.TgZ(17,"app-icon",26),e._uU(18,"today"),e.qZA(),e.TgZ(19,"div"),e._uU(20,"Create Meeting"),e.qZA()(),e.TgZ(21,"button",25),e.NdJ("click",function(){const a=e.CHM(t).$implicit,c=e.oxw(2);return e.KtG(c.removeContact(a))}),e.TgZ(22,"app-icon",26),e._uU(23,"cancel"),e.qZA(),e.TgZ(24,"div"),e._uU(25,"Remove Colleague"),e.qZA()()()()}if(2&i){const t=s.$implicit,n=e.MAs(15);e.xp6(2),e.Q6J("user",t),e.xp6(1),e.ekj("bg-error",!t.location)("bg-success",t.location),e.xp6(3),e.Oqu(t.name),e.xp6(2),e.hij(" ",t.organisation," "),e.xp6(2),e.hij(" ",t.location," "),e.xp6(1),e.Q6J("matMenuTriggerFor",n)}}function ue(i,s){if(1&i&&(e.ynx(0),e.YNc(1,pe,26,9,"div",13),e.ALo(2,"async"),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",e.lcZ(2,1,t.contacts))}}function ge(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"button",29),e.NdJ("click",function(){const a=e.CHM(t).$implicit,c=e.oxw(3);return e.KtG(c.addUser(a))}),e.TgZ(1,"div",30),e._UZ(2,"a-user-avatar",16)(3,"div",17),e.qZA(),e.TgZ(4,"div",31)(5,"div",19),e._uU(6),e.qZA(),e.TgZ(7,"div",20),e._uU(8),e.qZA()()()}if(2&i){const t=s.$implicit;e.xp6(2),e.Q6J("user",t),e.xp6(1),e.ekj("bg-error",!t.location)("bg-success",t.location),e.xp6(3),e.Oqu(t.name),e.xp6(2),e.hij(" ",t.organisation," ")}}function de(i,s){if(1&i&&(e.ynx(0),e.YNc(1,ge,9,7,"button",28),e.ALo(2,"async"),e.BQk()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",e.lcZ(2,1,t.search_results))}}function me(i,s){if(1&i&&(e.TgZ(0,"div",27),e.YNc(1,de,3,3,"ng-container",3),e.ALo(2,"async"),e.qZA()),2&i){const t=e.oxw(),n=e.MAs(21);let o;e.xp6(1),e.Q6J("ngIf",null==(o=e.lcZ(2,2,t.search_results))?null:o.length)("ngIfElse",n)}}function _e(i,s){1&i&&(e.TgZ(0,"div",32),e._UZ(1,"img",33),e.TgZ(2,"p",34),e._uU(3,' You have no colleagues added. Please select the "Add" button to get started. '),e.qZA()())}function fe(i,s){if(1&i&&(e.TgZ(0,"div",32)(1,"p",34),e._uU(2),e.ALo(3,"async"),e.ALo(4,"async"),e.qZA()()),2&i){const t=e.oxw();let n;e.xp6(2),e.hij(" ",null!=(n=e.lcZ(3,1,t.options))&&n.search?'Unable for find any users matching "'+(null==(n=e.lcZ(4,3,t.options))?null:n.search)+'"':"Start typing to search for users."," ")}}function ve(i,s){1&i&&(e.TgZ(0,"div",32),e._UZ(1,"mat-spinner",35),e.TgZ(2,"p",34),e._uU(3,"Searching users..."),e.qZA()())}let q=(()=>{class i extends g.KG{constructor(t,n,o,a){var c;super(),c=this,this._state=t,this._settings=n,this._event_form=o,this._router=a,this.show_search=!1,this.contacts=this._state.contacts,this.search_results=(0,le.aj)([this._state.search_results,this._state.contacts]).pipe((0,w.U)(([r,p])=>r.filter(b=>!p.find(m=>m.id!==b.id&&m.email!==b.email)))),this.options=this._state.options,this.loading=this._state.loading,this.addUser=function(){var r=(0,d.Z)(function*(p){yield c._state.addContact(p),(0,g.t5)(`Successfully added "${p.name}" to contacts`),c.show_search=!1});return function(p){return r.apply(this,arguments)}}(),this.removeUser=function(){var r=(0,d.Z)(function*(p){yield c._state.removeContact(p),(0,g.t5)(`Successfully removed "${p.name}" from contacts`)});return function(p){return r.apply(this,arguments)}}(),this.updateSearch=r=>this._state.setOptions({search:r})}newMeeting(t){this._event_form.newForm(),this._event_form.form.patchValue({attendees:[t]}),this._settings.get("app.new_features")?this._router.navigate(["/book","meeting"]):this._router.navigate(["/book","spaces"])}openSearch(){this.updateSearch(""),this.show_search=!0,this.timeout("open",()=>this._input_el.nativeElement.focus(),100)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(U),e.Y36(g.gb),e.Y36(_.MH),e.Y36(f.F0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["landing-colleagues"]],viewQuery:function(t,n){if(1&t&&e.Gf(re,7),2&t){let o;e.iGM(o=e.CRH())&&(n._input_el=o.first)}},features:[e.qOj],decls:24,vars:16,consts:[[1,"flex","items-center","justify-between","py-2","mx-2","border-b","border-gray-200"],[1,"mx-2"],[1,"flex-1","h-1/2","w-full","space-y-4","overflow-auto","pt-4"],[4,"ngIf","ngIfElse"],["mat-button","",1,"inverse","w-[calc(100%-1rem)]","m-2",3,"click"],["search","",1,"absolute","inset-x-2","top-2","bottom-[3.5rem]","rounded-lg","overflow-hidden","flex","flex-col","bg-white","dark:bg-neutral-600","shadow","border","border-gray-200"],["placeholder","Search for users...",1,"w-full","border-b","border-gray-200","p-2","rounded-t-lg",3,"ngModel","ngModelChange"],["search_input",""],["mat-icon-button","",1,"absolute","top-0","right-0",3,"click"],["class","overflow-auto flex-1 h-1/2 flex flex-col space-y-2",4,"ngIf","ngIfElse"],["empty_state",""],["search_empty",""],["load_state",""],["class","flex items-center px-2 space-x-2 relative","user","",4,"ngFor","ngForOf"],["user","",1,"flex","items-center","px-2","space-x-2","relative"],[1,"text-xl","relative"],[3,"user"],[1,"rounded-full","h-3","w-3","border","border-white","dark:border-neutral-400","absolute","bottom-1","right-1"],[1,"leading-tight","flex-1"],[1,"truncate"],[1,"text-sm","truncate"],[1,"text-xs","opacity-60","truncate"],["mat-icon-button","",1,"rounded","bg-gray-300",3,"matMenuTriggerFor"],["xPosition","before"],["menu","matMenu"],["mat-menu-item","",1,"flex","items-center","space-x-2",3,"click"],[1,"text-2xl"],[1,"overflow-auto","flex-1","h-1/2","flex","flex-col","space-y-2"],["matRipple","","class","flex items-center p-2 space-x-2 w-full text-left",3,"click",4,"ngFor","ngForOf"],["matRipple","",1,"flex","items-center","p-2","space-x-2","w-full","text-left",3,"click"],[1,"text-base","relative"],[1,"leading-tight"],[1,"w-full","h-full","flex","flex-col","items-center","justify-center","space-y-2","p-8"],["src","assets/icons/no-contacts.svg"],[1,"opacity-60","text-sm","text-center"],["diameter","32"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"h2",1),e._uU(2),e.ALo(3,"async"),e.qZA()(),e.TgZ(4,"div",2),e.YNc(5,ue,3,3,"ng-container",3),e.ALo(6,"async"),e.qZA(),e.TgZ(7,"button",4),e.NdJ("click",function(){return n.openSearch()}),e._uU(8," Add "),e.qZA(),e.TgZ(9,"div",5)(10,"input",6,7),e.NdJ("ngModelChange",function(a){return n.updateSearch(a)}),e.ALo(12,"async"),e.qZA(),e.TgZ(13,"button",8),e.NdJ("click",function(){return n.show_search=!1}),e.TgZ(14,"app-icon"),e._uU(15,"close"),e.qZA()(),e.YNc(16,me,3,4,"div",9),e.ALo(17,"async"),e.qZA(),e.YNc(18,_e,4,0,"ng-template",null,10,e.W1O),e.YNc(20,fe,5,5,"ng-template",null,11,e.W1O),e.YNc(22,ve,4,0,"ng-template",null,12,e.W1O)),2&t){const o=e.MAs(19),a=e.MAs(23);let c,r,p;e.xp6(2),e.hij("",(null==(c=e.lcZ(3,8,n.contacts))?null:c.length)||0," People"),e.xp6(3),e.Q6J("ngIf",null==(r=e.lcZ(6,10,n.contacts))?null:r.length)("ngIfElse",o),e.xp6(4),e.ekj("hidden",!n.show_search),e.xp6(1),e.Q6J("ngModel",null==(p=e.lcZ(12,12,n.options))?null:p.search),e.xp6(6),e.Q6J("ngIf",!e.lcZ(17,14,n.loading))("ngIfElse",a)}},dependencies:[u.sg,u.O5,T.o,ce.k,h.VK,h.OP,h.p6,O.lW,J.Ou,F.wG,Z.Fj,Z.JJ,Z.On,u.Ov],styles:["[user][_ngcontent-%COMP%]:hover   button[_ngcontent-%COMP%]{opacity:1}[_nghost-%COMP%]{height:100%;width:100%;display:flex;flex-direction:column}\n/*# sourceMappingURL=landing-colleagues.component.ts-angular-inline--73.css.map*/"]}),i})();function he(i,s){if(1&i&&(e._UZ(0,"img",22),e.ALo(1,"async"),e.ALo(2,"space")),2&i){const t=e.oxw().$implicit;let n;e.Q6J("src",null==(n=e.lcZ(1,1,e.lcZ(2,3,t)))?null:n.images[0],e.LSH)}}function xe(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",6)(1,"div",7)(2,"div",8),e.YNc(3,he,3,5,"img",9),e.ALo(4,"async"),e.ALo(5,"space"),e.qZA(),e.TgZ(6,"div",10)(7,"div",11),e._uU(8),e.ALo(9,"async"),e.ALo(10,"space"),e.ALo(11,"async"),e.ALo(12,"space"),e.qZA(),e.TgZ(13,"div",12)(14,"app-icon",13),e._uU(15,"place"),e.qZA(),e.TgZ(16,"div"),e._uU(17),e.ALo(18,"async"),e.ALo(19,"space"),e.qZA()(),e.TgZ(20,"div",14)(21,"app-icon",13),e._uU(22,"people"),e.qZA(),e.TgZ(23,"div"),e._uU(24),e.ALo(25,"async"),e.ALo(26,"space"),e.qZA()()()(),e.TgZ(27,"button",15),e.NdJ("click",function(){const a=e.CHM(t).$implicit,c=e.oxw(2);return e.KtG(c.newSpaceMeeting(a))}),e._uU(28," Book "),e.qZA(),e.TgZ(29,"button",16)(30,"app-icon"),e._uU(31,"more_horiz"),e.qZA()(),e.TgZ(32,"mat-menu",17,18)(34,"button",19)(35,"app-icon",20),e._uU(36,"info"),e.qZA(),e.TgZ(37,"div"),e._uU(38,"View Details"),e.qZA()(),e.TgZ(39,"button",21),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.toggleFavourite("space",o.id))}),e.TgZ(40,"app-icon",20),e._uU(41,"cancel"),e.qZA(),e.TgZ(42,"div"),e._uU(43,"Remove Favourite"),e.qZA()()()()}if(2&i){const t=s.$implicit,n=e.MAs(33);let o,a,c,r;e.xp6(3),e.Q6J("ngIf",null==(o=e.lcZ(4,5,e.lcZ(5,7,t)))||null==o.images?null:o.images.length),e.xp6(5),e.hij(" ",(null==(a=e.lcZ(9,9,e.lcZ(10,11,t)))?null:a.display_name)||(null==(a=e.lcZ(11,13,e.lcZ(12,15,t)))?null:a.name)," "),e.xp6(9),e.hij(" ",null==(c=e.lcZ(18,17,e.lcZ(19,19,t)))||null==c.level?null:c.level.display_name," "),e.xp6(7),e.hij(" ",(null==(r=e.lcZ(25,21,e.lcZ(26,23,t)))?null:r.capacity)||2," People "),e.xp6(5),e.Q6J("matMenuTriggerFor",n)}}function be(i,s){if(1&i&&(e.ynx(0),e.YNc(1,xe,44,25,"div",5),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.spaces)}}function Ze(i,s){1&i&&(e.TgZ(0,"div",23),e._UZ(1,"img",24),e.TgZ(2,"p",25),e._uU(3," You have no favourites hearted. To add a favourites heart a room, desk or parking space. "),e.qZA()())}const ye=[];let I=(()=>{class i extends g.KG{constructor(t,n,o,a){super(),this._settings=t,this._space_pipe=n,this._event_form=o,this._router=a}get spaces(){return this._settings.get("favourite_spaces")||ye}toggleFavourite(t,n){const o="space"===t?this.spaces:[],a="space"===t?"favourite_spaces":"";o.includes(n)?this._settings.saveUserSetting(a,o.filter(r=>r!==n)):this._settings.saveUserSetting(a,[...o,n])}newSpaceMeeting(t){var n=this;return(0,d.Z)(function*(){const o=yield n._space_pipe.transform(t);!o||(n._event_form.newForm(),n._event_form.form.patchValue({resources:[o]}),n._settings.get("app.new_features")?n._router.navigate(["/book","meeting"]):n._router.navigate(["/book","spaces"]))})()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(g.gb),e.Y36(A.X),e.Y36(_.MH),e.Y36(f.F0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["landing-favourites"]],features:[e._Bn([A.X]),e.qOj],decls:7,vars:3,consts:[[1,"flex","items-center","justify-between","py-2","mx-2","border-b","border-gray-200"],[1,"mx-2"],[1,"flex-1","h-1/2","w-full","space-y-2","overflow-auto","pt-4","divide-y","divide-gray-300"],[4,"ngIf","ngIfElse"],["empty_state",""],["class","flex flex-col items-center mx-2 pt-4 space-y-2 relative","item","",4,"ngFor","ngForOf"],["item","",1,"flex","flex-col","items-center","mx-2","pt-4","space-y-2","relative"],[1,"flex","w-full","items-center","space-x-2","relative"],[1,"w-24","h-20","overflow-hidden","rounded","relative"],["class","absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 object-cover min-w-full min-h-full",3,"src",4,"ngIf"],[1,"h-20"],[1,"truncate","mb-4"],[1,"flex","items-center","text-xs","opacity-60","truncate","space-x-2","mb-2"],[1,"text-blue-500"],[1,"flex","items-center","text-xs","opacity-60","truncate","space-x-2"],["mat-button","",1,"w-full","inverse",3,"click"],["mat-icon-button","",1,"absolute","top-2","right-0","bg-gray-200","dark:bg-neutral-600","rounded","!m-0",3,"matMenuTriggerFor"],["xPosition","before"],["menu","matMenu"],["mat-menu-item","",1,"flex","items-center","space-x-2"],[1,"text-2xl"],["mat-menu-item","",1,"flex","items-center","space-x-2",3,"click"],[1,"absolute","top-1/2","left-1/2","-translate-x-1/2","-translate-y-1/2","object-cover","min-w-full","min-h-full",3,"src"],[1,"w-full","h-full","flex","flex-col","items-center","justify-center","space-y-2","p-8"],["src","assets/icons/no-favourites.svg"],[1,"opacity-60","text-sm","text-center"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"h2",1),e._uU(2),e.qZA()(),e.TgZ(3,"div",2),e.YNc(4,be,2,1,"ng-container",3),e.qZA(),e.YNc(5,Ze,4,0,"ng-template",null,4,e.W1O)),2&t){const o=e.MAs(6);e.xp6(2),e.hij("",(null==n.spaces?null:n.spaces.length)||0," Resources"),e.xp6(2),e.Q6J("ngIf",null==n.spaces?null:n.spaces.length)("ngIfElse",o)}},dependencies:[u.sg,u.O5,T.o,h.VK,h.OP,h.p6,O.lW,u.Ov,A.X],styles:["[user][_ngcontent-%COMP%]:hover   button[_ngcontent-%COMP%]{opacity:1}[_nghost-%COMP%]{height:100%;width:100%;display:flex;flex-direction:column}\n/*# sourceMappingURL=landing-favourites.component.ts-angular-inline--74.css.map*/"]}),i})();var Q=l(9638),Te=l(5148),Ae=l(1484),Ce=l(2551),Le=l(4088);function we(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"event-card",12),e.NdJ("edit",function(){e.CHM(t);const o=e.oxw().$implicit,a=e.oxw(2);return e.KtG(a.edit(o))})("remove",function(){e.CHM(t);const o=e.oxw().$implicit,a=e.oxw(2);return e.KtG(a.remove(o))}),e.qZA()}if(2&i){const t=e.oxw().$implicit;e.Q6J("event",t)("show_day",!0)}}function Ue(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"booking-card",13),e.NdJ("remove",function(){e.CHM(t);const o=e.oxw().$implicit,a=e.oxw(2);return e.KtG(a.remove(o))}),e.qZA()}if(2&i){const t=e.oxw().$implicit;e.Q6J("booking",t)("show_day",!0)}}function Fe(i,s){if(1&i&&(e.ynx(0)(1,9),e.YNc(2,we,1,2,"event-card",10),e.YNc(3,Ue,1,2,"booking-card",11),e.BQk()()),2&i){const t=s.$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("ngSwitch",n.type(t)),e.xp6(1),e.Q6J("ngSwitchCase","event"),e.xp6(1),e.Q6J("ngSwitchCase","booking")}}function Oe(i,s){if(1&i&&(e.ynx(0),e.YNc(1,Fe,4,3,"ng-container",8),e.ALo(2,"slice"),e.ALo(3,"async"),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",e.Dn7(2,2,e.lcZ(3,6,t.upcoming_events),0,3))("ngForTrackBy",t.trackByFn)}}function Me(i,s){1&i&&(e.TgZ(0,"div",14),e._UZ(1,"img",15),e.TgZ(2,"p",16),e._uU(3,"You have no upcoming bookings"),e.qZA()())}const S=function(){return["/your-bookings"]};let j=(()=>{class i{constructor(t,n,o,a){this._state=t,this._event_form=n,this._router=o,this._dialog=a,this.upcoming_events=this._state.upcoming_events}type(t){return t instanceof Q.$N?"booking":"event"}ngOnInit(){this._state.pollUpcomingEvents()}ngOnDestroy(){this._state.stopPollingUpcomingEvents()}trackByFn(t,n){return n?.id}edit(t){this._router.navigate(["/book","meeting","form"]),this._event_form.newForm(t)}remove(t){var n=this;return(0,d.Z)(function*(){const o=`${(0,Te.Z)(t.date,"dd MMM yyyy h:mma")}`,c=`Delete the booking for ${t instanceof _.ym?t.space?.display_name:t.asset_name||t.asset_id} at ${o}`,r=yield(0,g._5)({title:"Delete booking",content:c,icon:{content:"delete"}},n._dialog);"done"===r.reason&&(r.loading("Requesting booking deletion..."),yield(t instanceof _.ym?_.xC:Q.pv)(t.id).toPromise().catch(p=>{throw(0,g.cB)(`Unable to delete booking. ${p}`),r.close(),p}),(0,g.t5)("Successfully deleted booking."),r.close())})()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(U),e.Y36(_.MH),e.Y36(f.F0),e.Y36(Ae.uw))},i.\u0275cmp=e.Xpm({type:i,selectors:[["landing-upcoming"]],decls:13,vars:8,consts:[[1,"py-2"],[1,"flex","items-center","justify-between","mb-2","sm:mb-4","px-4"],[1,"sm:text-lg","font-medium"],["button","","mat-button","",1,"inverse","hidden","sm:block",3,"routerLink"],[1,"inverse","block","sm:hidden","text-blue-500","underline","relative","top-8",3,"routerLink"],[1,"space-y-4","px-4"],[4,"ngIf","ngIfElse"],["empty_state",""],[4,"ngFor","ngForOf","ngForTrackBy"],[3,"ngSwitch"],[3,"event","show_day","edit","remove",4,"ngSwitchCase"],[3,"booking","show_day","remove",4,"ngSwitchCase"],[3,"event","show_day","edit","remove"],[3,"booking","show_day","remove"],[1,"w-full","p-8","flex","flex-col","items-center","justify-center","space-y-4"],["src","assets/img/no-events.svg",1,"mr-4"],[1,"opacity-30"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3,"Your Bookings"),e.qZA(),e.TgZ(4,"a",3),e._uU(5," View All "),e.qZA(),e.TgZ(6,"a",4),e._uU(7," View All "),e.qZA()(),e.TgZ(8,"div",5),e.YNc(9,Oe,4,8,"ng-container",6),e.ALo(10,"async"),e.qZA()(),e.YNc(11,Me,4,0,"ng-template",null,7,e.W1O)),2&t){const o=e.MAs(12);let a;e.xp6(4),e.Q6J("routerLink",e.DdM(6,S)),e.xp6(2),e.Q6J("routerLink",e.DdM(7,S)),e.xp6(3),e.Q6J("ngIf",null==(a=e.lcZ(10,4,n.upcoming_events))?null:a.length)("ngIfElse",o)}},dependencies:[u.sg,u.O5,u.RF,u.n9,O.zs,Ce.j,Le.E,f.yS,u.Ov,u.OU]}),i})();var ke=l(6361),Je=l(4187),Ye=l(6012);function Ne(i,s){1&i&&e._UZ(0,"topbar",16)}function qe(i,s){1&i&&e._UZ(0,"landing-colleagues")}function Ie(i,s){1&i&&e._UZ(0,"landing-favourites")}function Qe(i,s){if(1&i&&(e.TgZ(0,"div",17),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",t.building.address||t.building.display_name||t.building.name," ")}}function Se(i,s){1&i&&e._UZ(0,"footer-menu")}const je=[{path:"",component:(()=>{class i{constructor(t){this._org=t,this.tab="people"}get hide_nav(){return"true"===localStorage.getItem("PlaceOS.hide_nav")}get date(){return(0,ke.Z)(this.time||Date.now())}get user(){return(0,g.ar)()}get building(){return this._org.building}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(C.w7))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-dashboard"]],decls:32,vars:26,consts:[["class","z-10",4,"ngIf"],[1,"flex","flex-1","h-1/2","bg-[#F8F8FA]","dark:bg-neutral-900"],[1,"relative","hidden","sm:flex","flex-col","w-[18rem]","h-full","overflow-hidden","bg-white","dark:bg-[#1F2021]","border-r","border-gray-200","dark:border-neutral-700"],[1,"flex","items-center","divide-x","divide-gray-300"],["matRipple","",1,"flex-1","font-medium","p-2","flex","items-center","justify-center","space-x-2",3,"click"],[1,"flex-1","w-full","h-1/2"],[4,"ngIf"],[1,"flex-1","h-full","w-1/2","sm:px-4","overflow-auto","z-0"],[1,"sticky","top-0","z-50","bg-[#ECF0F3]","dark:bg-zinc-800","px-4","sm:rounded-b","flex","items-center","justify-between","overflow-hidden"],[1,""],[1,"sm:text-xl","font-medium"],["date","",1,"text-sm","sm:text-base"],["class","text-sm sm:text-base",4,"ngIf"],[1,"h-32","pt-4"],["src","assets/img/landing.svg"],[1,"mx-4","w-[calc(100%-2rem)]","h-px","bg-gray-300","mb-2"],[1,"z-10"],[1,"text-sm","sm:text-base"]],template:function(t,n){1&t&&(e.YNc(0,Ne,1,0,"topbar",0),e.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"button",4),e.NdJ("click",function(){return n.tab="people"}),e.TgZ(5,"app-icon"),e._uU(6,"people"),e.qZA(),e.TgZ(7,"div"),e._uU(8,"Colleages"),e.qZA()(),e.TgZ(9,"button",4),e.NdJ("click",function(){return n.tab="fav"}),e.TgZ(10,"app-icon"),e._uU(11,"favorite"),e.qZA(),e.TgZ(12,"div"),e._uU(13,"Favourites"),e.qZA()()(),e.TgZ(14,"div",5),e.YNc(15,qe,1,0,"landing-colleagues",6),e.YNc(16,Ie,1,0,"landing-favourites",6),e.qZA()(),e.TgZ(17,"div",7)(18,"header",8)(19,"div",9)(20,"div",10),e._uU(21),e.qZA(),e.TgZ(22,"div",11),e._uU(23),e.ALo(24,"date"),e.qZA(),e.YNc(25,Qe,2,1,"div",12),e.qZA(),e.TgZ(26,"div",13),e._UZ(27,"img",14),e.qZA()(),e._UZ(28,"landing-availability")(29,"div",15)(30,"landing-upcoming"),e.qZA()(),e.YNc(31,Se,1,0,"footer-menu",6)),2&t&&(e.Q6J("ngIf",!n.hide_nav),e.xp6(4),e.ekj("border-b","people"!==n.tab)("border-gray-300","people"!==n.tab)("bg-black","people"!==n.tab)("bg-opacity-5","people"!==n.tab),e.xp6(5),e.ekj("border-b","fav"!==n.tab)("border-gray-300","fav"!==n.tab)("bg-black","fav"!==n.tab)("bg-opacity-5","fav"!==n.tab),e.xp6(6),e.Q6J("ngIf","people"===n.tab),e.xp6(1),e.Q6J("ngIf","fav"===n.tab),e.xp6(5),e.hij(" Hello ",null==n.user?null:n.user.name,", "),e.xp6(2),e.hij(" ",e.xi3(24,23,n.date,"fullDate")," "),e.xp6(2),e.Q6J("ngIf",(null==n.building?null:n.building.address)||(null==n.building?null:n.building.name)),e.xp6(6),e.Q6J("ngIf",!n.hide_nav))},dependencies:[u.O5,Je.o,Ye.i,T.o,F.wG,q,N,j,I,u.uU],styles:["[_nghost-%COMP%]{position:absolute;top:0;left:0;right:0;bottom:0;overflow:hidden;display:flex;flex-direction:column}main[_ngcontent-%COMP%]{min-height:50%}\n/*# sourceMappingURL=landing.component.ts-angular-inline--75.css.map*/"]}),i})()}];let Pe=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[u.ez,E.v,Z.u5,f.Bz.forChild(je)]}),i})()}}]);
//# sourceMappingURL=apps_workplace_src_app_landing_landing_module_ts.js.map