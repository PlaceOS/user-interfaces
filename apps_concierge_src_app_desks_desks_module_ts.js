"use strict";(self.webpackChunkconcierge=self.webpackChunkconcierge||[]).push([["apps_concierge_src_app_desks_desks_module_ts"],{51397:(ln,$,r)=>{r.r($),r.d($,{DesksModule:()=>an});var d=r(60316),u=r(34456),h=r(26842),te=r(53804),I=r(38223),R=r(23685),ne=r(40363),_=r(77375),D=r(71578),e=r(7404),se=r(74605),A=r(26354),g=r(89204),oe=r(57871),x=r(33602),b=r(12185),f=r(57915),ie=r(90521),E=r(12587),P=r(41134),v=r(85060),T=r(69434),ae=r(56441),le=r(28797),re=r(77177),O=r(99908),C=r(24950),G=r(87984),B=r(97024),_e=r(19608),ce=r(83476),pe=r(81413),de=r(840),L=r(18e3),me=r(83138),ue=r(83618),ge=r(56416),fe=r(597);const S=()=>({standalone:!0}),ke=()=>[],he=(s,a,t)=>({date:s,duration:a,all_day:t});function be(s,a){if(1&s){const t=e.RV6();e.j41(0,"section",33)(1,"button",34),e.nI1(2,"async"),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.setOptions({group:!1,members:[]}))}),e.j41(3,"app-icon",35),e.EFF(4,"person"),e.k0s(),e.j41(5,"div",36),e.pXf(6,4),e.k0s(),e.nrm(7,"div",37),e.nI1(8,"async"),e.nI1(9,"async"),e.k0s(),e.j41(10,"button",34),e.nI1(11,"async"),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.setOptions({group:!0}))}),e.j41(12,"app-icon",35),e.EFF(13,"group_add"),e.k0s(),e.j41(14,"div",36),e.pXf(15,5),e.k0s(),e.nrm(16,"div",37),e.nI1(17,"async"),e.nI1(18,"async"),e.k0s()()}if(2&s){let t,o,n,i,l,c;const p=e.XpG(2);e.R7$(),e.AVh("text-secondary",!(null!=(t=e.bMT(2,12,p.options))&&t.group)),e.R7$(6),e.AVh("bg-base-200",null==(o=e.bMT(8,14,p.options))?null:o.group)("bg-secondary",!(null!=(n=e.bMT(9,16,p.options))&&n.group)),e.R7$(3),e.AVh("text-secondary",null==(i=e.bMT(11,18,p.options))?null:i.group),e.R7$(6),e.AVh("bg-base-200",!(null!=(l=e.bMT(17,20,p.options))&&l.group))("bg-secondary",null==(c=e.bMT(18,22,p.options))?null:c.group)}}function ve(s,a){1&s&&(e.j41(0,"div",38)(1,"label",23),e.EFF(2,"Host"),e.j41(3,"span"),e.EFF(4,"*"),e.k0s()(),e.nrm(5,"a-user-search-field",39),e.k0s())}function De(s,a){1&s&&(e.j41(0,"mat-checkbox",40),e.pXf(1,6),e.k0s())}function Te(s,a){if(1&s){const t=e.RV6();e.j41(0,"div",41)(1,"div",42)(2,"label",43),e.PLo(3,7),e.nrm(4,"span"),e.YFu(),e.k0s(),e.j41(5,"a-time-field",44),e.bIt("ngModelChange",function(n){e.eBV(t);const i=e.XpG(2);return e.Njj(i.form.patchValue({date:n}))}),e.k0s()(),e.j41(6,"div",42)(7,"label",45),e.PLo(8,8),e.nrm(9,"span"),e.YFu(),e.k0s(),e.nrm(10,"a-duration-field",46),e.k0s()()}if(2&s){let t;const o=e.XpG(2);e.R7$(5),e.Y8G("ngModel",o.form.value.date)("ngModelOptions",e.lJ4(10,S))("use_24hr",o.use_24hr)("timezone",o.timezone),e.R7$(5),e.Y8G("time",null==(t=o.form.get("date"))?null:t.value)("max",600)("min",60)("step",60)("use_24hr",o.use_24hr)("timezone",o.timezone)}}function Ee(s,a){1&s&&(e.j41(0,"mat-checkbox",51),e.EFF(1," Update all future events "),e.k0s())}function Fe(s,a){if(1&s){const t=e.RV6();e.j41(0,"div",47)(1,"label",48),e.EFF(2),e.nI1(3,"translate"),e.j41(4,"span"),e.EFF(5,"*"),e.k0s()(),e.j41(6,"recurrence-field",49),e.mxI("ngModelChange",function(n){e.eBV(t);const i=e.XpG(2);return e.DH7(i.recurrence,n)||(i.recurrence=n),e.Njj(n)}),e.bIt("ngModelChange",function(n){e.eBV(t);const i=e.XpG(2);return e.Njj(i.onRecurrenceChange(n))}),e.k0s(),e.DNE(7,Ee,2,0,"mat-checkbox",50),e.k0s()}if(2&s){const t=e.XpG(2);e.R7$(2),e.SpI(" ",e.bMT(3,5,"FORM.RECURRENCE"),""),e.R7$(4),e.Y8G("date",t.form.getRawValue().date),e.R50("ngModel",t.recurrence),e.Y8G("ngModelOptions",e.lJ4(7,S)),e.R7$(),e.Y8G("ngIf",t.form.value.id)}}function Ce(s,a){if(1&s){const t=e.RV6();e.j41(0,"div",41)(1,"div",42)(2,"mat-checkbox",52),e.bIt("ngModelChange",function(n){e.eBV(t);const i=e.XpG(2);return e.Njj(i.form.patchValue({secondary_resource:n?"locker":""}))}),e.pXf(3,9),e.k0s()()()}if(2&s){const t=e.XpG(2);e.R7$(2),e.Y8G("ngModel",!!t.form.value.secondary_resource)("ngModelOptions",e.lJ4(2,S))}}function Re(s,a){if(1&s){const t=e.RV6();e.j41(0,"section",16)(1,"h3",53)(2,"div",18),e.EFF(3," 2 "),e.k0s(),e.j41(4,"div",19),e.pXf(5,10),e.k0s(),e.nrm(6,"div",54),e.k0s(),e.j41(7,"div",55)(8,"a-user-list-field",56),e.nI1(9,"async"),e.bIt("ngModelChange",function(n){e.eBV(t);const i=e.XpG(2);return e.Njj(i.setOptions({members:n}))}),e.k0s()()()}if(2&s){let t;const o=e.XpG(2);e.R7$(8),e.Y8G("ngModel",(null==(t=e.bMT(9,2,o.options))?null:t.members)||e.lJ4(4,ke))("ngModelOptions",e.lJ4(5,S))}}function xe(s,a){1&s&&(e.j41(0,"p",59),e.EFF(1," Desks nearby to the selected desk will booked for group members "),e.k0s())}function Se(s,a){if(1&s&&(e.j41(0,"section",16)(1,"h3",17)(2,"div",18),e.EFF(3),e.nI1(4,"async"),e.k0s(),e.j41(5,"div",19),e.pXf(6,11),e.k0s()(),e.nrm(7,"desk-list-field",57),e.DNE(8,xe,2,0,"p",58),e.nI1(9,"async"),e.k0s()),2&s){let t,o;const n=e.XpG(2);e.R7$(3),e.SpI(" ",null!=(t=e.bMT(4,2,n.options))&&t.group?3:2," "),e.R7$(5),e.Y8G("ngIf",null==(o=e.bMT(9,4,n.options))?null:o.group)}}function Me(s,a){if(1&s&&(e.j41(0,"section",16)(1,"h3",17)(2,"div",18),e.EFF(3),e.nI1(4,"async"),e.k0s(),e.j41(5,"div",19),e.pXf(6,12),e.k0s()(),e.nrm(7,"asset-list-field",60),e.k0s()),2&s){let t;const o=e.XpG(2);e.R7$(3),e.SpI(" ",null!=(t=e.bMT(4,2,o.options))&&t.group?4:3," "),e.R7$(4),e.Y8G("options",e.sMw(4,he,o.form.getRawValue().date,o.form.value.duration,o.form.value.all_day))}}function ye(s,a){if(1&s&&(e.j41(0,"div",14),e.DNE(1,be,19,24,"section",15),e.j41(2,"section",16)(3,"h3",17)(4,"div",18),e.EFF(5," 1 "),e.k0s(),e.j41(6,"div",19),e.pXf(7,0),e.k0s()(),e.DNE(8,ve,6,0,"div",20),e.nI1(9,"async"),e.j41(10,"div",21)(11,"div",22)(12,"label",23),e.EFF(13,"Add Title"),e.j41(14,"span"),e.EFF(15,"*"),e.k0s()(),e.j41(16,"mat-form-field",24),e.nrm(17,"input",25),e.j41(18,"mat-error"),e.pXf(19,1),e.k0s()()(),e.j41(20,"div",26)(21,"label",27),e.PLo(22,2),e.nrm(23,"span"),e.YFu(),e.k0s(),e.j41(24,"a-date-field",28),e.pXf(25,3),e.k0s(),e.DNE(26,De,2,0,"mat-checkbox",29),e.k0s()(),e.DNE(27,Te,11,11,"div",30)(28,Fe,8,8,"div",31)(29,Ce,4,3,"div",30),e.k0s(),e.DNE(30,Re,10,6,"section",32),e.nI1(31,"async"),e.DNE(32,Se,10,6,"section",32)(33,Me,8,8,"section",32),e.k0s()),2&s){let t,o;const n=e.XpG();e.Y8G("formGroup",n.form),e.R7$(),e.Y8G("ngIf",n.allow_groups),e.R7$(),e.AVh("!border-none",n.allow_groups),e.R7$(6),e.Y8G("ngIf",n.can_book_for_others&&!(null!=(t=e.bMT(9,14,n.options))&&t.group)),e.R7$(16),e.Y8G("to",n.end_date)("timezone",n.timezone),e.R7$(2),e.Y8G("ngIf",n.allow_all_day),e.R7$(),e.Y8G("ngIf",!n.form.value.all_day),e.R7$(),e.Y8G("ngIf",n.can_recurr),e.R7$(),e.Y8G("ngIf",n.can_book_lockers),e.R7$(),e.Y8G("ngIf",null==(o=e.bMT(31,16,n.options))?null:o.group),e.R7$(2),e.Y8G("ngIf",n.form.contains("resources")),e.R7$(),e.Y8G("ngIf",n.has_assets)}}let Ne=(()=>{class s extends _.Tv{get building(){return this._org.building}set building(t){this._org.building=t}get can_book_for_others(){return this._settings.get("app.desks.can_book_for_others")}get can_book_lockers(){return this._settings.get("app.desks.can_book_lockers")}get can_recurr(){return this._settings.get("app.desks.allow_recurrence")}get allow_groups(){return this._settings.get("app.desks.allow_groups")}get has_assets(){return!!this._settings.get("app.desks.has_assets")}get needs_reason(){return!0===this._settings.get("app.desks.needs_reason")}get allow_time_changes(){return!!this._settings.get("app.desks.allow_time_changes")}get allow_all_day(){return this.allow_time_changes&&!!this._settings.get("app.desks.allow_all_day")}get timezone(){return this._settings.get("app.desks.use_building_timezone")?this._org.building.timezone:""}get end_date(){return(0,ae.D)((0,le.f)(Date.now(),this._settings.get("app.desks.available_period")||90)).valueOf()}get use_24hr(){return this._settings.get("app.use_24_hour_time")}constructor(t,o,n){super(),this._state=t,this._org=o,this._settings=n,this.find=new e.bkB,this.buildings=this._org.building_list,this.levels=this._org.active_levels,this.options=this._state.options,this.features=this._state.features,this.force_time=(0,re.h)(Date.now(),{hours:6,minutes:0}).valueOf(),this.from_id=!1,this.recurrence_options=["daily","weekly","monthly"],this.setOptions=i=>this._state.setOptions(i),this.setFeature=(i,l)=>this._state.setFeature(i,l)}ngOnChanges(t){t.form&&this.form&&(this.selected_desk?.id&&this.form.patchValue({resources:[this.selected_desk]}),this.initialiseRecurrence())}initialiseRecurrence(){const{recurrence_type:t,recurrence_days:o,recurrence_interval:n,recurrence_end:i,date:l}=this.form.value;this.can_recurr&&(this.recurrence={pattern:t,days_of_week:new Array(7).fill(0).map((c,p)=>p).filter(c=>o&f.me[c]),interval:n,start:l,end:i})}onRecurrenceChange(t){if(t.pattern)if("daily"===t.pattern)this.form.patchValue({recurrence_type:"daily",recurrence_days:f.WS.MONDAY|f.WS.TUESDAY|f.WS.WEDNESDAY|f.WS.THURSDAY|f.WS.FRIDAY,recurrence_interval:t.interval,recurrence_end:(0,O._)(t.end)});else if("weekly"===t.pattern)this.form.patchValue({recurrence_type:"weekly",recurrence_days:t.days_of_week.reduce((o,n)=>o|f.me[n],0),recurrence_interval:t.interval,recurrence_end:(0,O._)(t.end)});else if("monthly"===t.pattern||"month_day"===t.pattern){const o=new Date(this.form.value.date).getDate();let n=Math.floor(o/7)+(o%7?1:0);(4===n&&o>=25||5===n)&&(n=-1),this.form.patchValue({recurrence_type:"monthly",recurrence_interval:t.interval,recurrence_nth_of_month:n,recurrence_end:(0,O._)(t.end)})}else this.form.patchValue({recurrence_type:"none"});else this.form.patchValue({recurrence_type:"none"})}static#e=this.\u0275fac=function(o){return new(o||s)(e.rXU(f.nx),e.rXU(b.yb),e.rXU(_.h$))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["new-desk-form-details"]],inputs:{form:"form"},outputs:{find:"find"},features:[e.Vt3,e.OA$],decls:1,vars:1,consts:()=>{let t,o,n,i,l,c,p,m,F,y,N,j,ee;return t=$localize`:␟4f8b2bb476981727ab34ed40fde1218361f92c45␟5028777105388019087:Details`,o=$localize`:␟3501a14ee1e89ea7009e8c9d1d6796a9ac9c3718␟4954033536980360307:Booking title is required.`,n=$localize`:␟04cfb5fd033651743bc4b9408bd52ba4ee894070␟3158758063619980932:Date${"\ufffd#23\ufffd"}:START_TAG_SPAN:*${"\ufffd/#23\ufffd"}:CLOSE_TAG_SPAN:`,i=$localize`:␟407bcc42df8640bf3b85c58145c8d24572bb47b6␟6682406734296000735: Date and time must be in the future `,l=$localize`:␟ee6b1f617dd5320b23fbed018c38ac092db5e40a␟3413004253239957216:Single`,c=$localize`:␟4c90059afafb7e160384d9f512797c95bb95c6dc␟8623978917681527907:Group`,p=$localize`:␟8a5018aa2d4dd0e8a98f4499d4b7b4a9255441a5␟8093595438228616861: All Day `,m=$localize`:␟02d39ddac5bbf95c424df03d5f0d22cc257556bd␟4735431816432396893: Start Time${"\ufffd#4\ufffd"}:START_TAG_SPAN:*${"\ufffd/#4\ufffd"}:CLOSE_TAG_SPAN:`,F=$localize`:␟96ca8377bef76dbcd3eb3b4d39e5414763c7033b␟7899923133926994657: End Time${"\ufffd#9\ufffd"}:START_TAG_SPAN:*${"\ufffd/#9\ufffd"}:CLOSE_TAG_SPAN:`,y=$localize`:␟f1701d7a0d6bfb739979f9e406793d97acd138e3␟8675972661523566351: Require locker `,N=$localize`:␟60ae849c087ccc322073478a12b2504433fbdd61␟9086691296106045671:Group Members`,j=$localize`:␟654c7e59b2003acf985bee710bad11e8cdd461f8␟6078724721705612215:Desk`,ee=$localize`:␟1bdfc0dfd2ac89f5d0d2af3a66e5e959d094b39c␟8637135334686190699:Request Asset`,[t,o,n,i,l,c,p,m,F,y,N,j,ee,["class","p-0 sm:py-4 sm:px-16 divide-y divide-base-200 space-y-2",3,"formGroup",4,"ngIf"],[1,"p-0","sm:py-4","sm:px-16","divide-y","divide-base-200","space-y-2",3,"formGroup"],["class","flex items-center",4,"ngIf"],[1,"p-2"],[1,"space-x-2","flex","items-center","mb-4"],[1,"bg-base-200","rounded-full","h-6","w-6","flex","items-center","justify-center"],[1,"text-xl"],["class","w-full",4,"ngIf"],[1,"flex","items-center","flex-wrap","sm:space-x-2"],[1,"flex-1","min-w-[256px]"],["for","title"],["appearance","outline",1,"w-full"],["matInput","","name","title","formControlName","title","placeholder","e.g. Focus Time"],[1,"flex-1","min-w-[256px]","relative"],["for","date"],["name","date","formControlName","date",3,"to","timezone"],["formControlName","all_day","class","absolute -top-2 right-0",4,"ngIf"],["class","flex items-center space-x-2",4,"ngIf"],["class","flex flex-col",4,"ngIf"],["class","p-2",4,"ngIf"],[1,"flex","items-center"],["matRipple","",1,"relative","h-16","flex","items-center","justify-center","flex-1","space-x-2",3,"click"],[1,"text-2xl"],[1,""],[1,"absolute","h-1","inset-x-0","bottom-0","!m-0"],[1,"w-full"],["formControlName","user",1,"mb-4"],["formControlName","all_day",1,"absolute","-top-2","right-0"],[1,"flex","items-center","space-x-2"],[1,"flex-1","w-1/3"],["for","start-time"],["name","start-time",3,"ngModelChange","ngModel","ngModelOptions","use_24hr","timezone"],["for","end-time"],["name","end-time","formControlName","duration",3,"time","max","min","step","use_24hr","timezone"],[1,"flex","flex-col"],["for","recurrence"],["name","recurrence",3,"ngModelChange","date","ngModel","ngModelOptions"],["formControlName","update_master",4,"ngIf"],["formControlName","update_master"],[3,"ngModelChange","ngModel","ngModelOptions"],[1,"space-x-2","flex","items-center"],[1,"flex-1","w-px"],[1,"overflow-hidden"],[1,"mt-4",3,"ngModelChange","ngModel","ngModelOptions"],["formControlName","resources"],["class","text-center rounded px-2 py-1 bg-warning shadow text-xs",4,"ngIf"],[1,"text-center","rounded","px-2","py-1","bg-warning","shadow","text-xs"],["formControlName","assets",3,"options"]]},template:function(o,n){1&o&&e.DNE(0,ye,34,18,"div",13),2&o&&e.Y8G("ngIf",n.form)},dependencies:[d.bT,u.me,u.BC,u.cb,u.vS,u.j4,u.JD,C.rl,C.TL,G.fg,B.So,v.r6,_e.G,ce.y,pe.t,de.T,L.$,me.E,T.R,ue.Q,ge.d,d.Jj,fe.D9],encapsulation:2})}return s})();function je(s,a){if(1&s&&(e.j41(0,"main",5),e.nrm(1,"new-desk-form-details",6),e.k0s()),2&s){const t=e.XpG();e.R7$(),e.Y8G("form",t.form)}}function Ie(s,a){if(1&s){const t=e.RV6();e.j41(0,"footer",7)(1,"button",8),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.save())}),e.EFF(2,"Save"),e.k0s()()}}function Oe(s,a){1&s&&(e.j41(0,"main",9),e.nrm(1,"mat-spinner",10),e.j41(2,"p"),e.EFF(3,"Making booking request..."),e.k0s()()),2&s&&(e.R7$(),e.Y8G("diameter",48))}let V=(()=>{class s{get form(){return this._booking_form.form}constructor(t,o){this._booking_form=t,this._dialog_ref=o,this.event=new e.bkB,this.loading=new ie.t(!1)}save(){var t=this;return(0,g.A)(function*(){t.loading.next(!0),t.form.patchValue({booking_type:"desk"});const o=yield t._booking_form.postForm().catch(n=>{throw(0,_.UG)(n),t.loading.next(!1),n});t.event.emit({reason:"done",metadata:o}),(0,_.VX)("Successfully created booking"),t._dialog_ref.close(),t.loading.next(!1)})()}static#e=this.\u0275fac=function(o){return new(o||s)(e.rXU(f.nx),e.rXU(E.CP))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["desk-book-modal"]],outputs:{event:"event"},decls:13,vars:7,consts:[["load_state",""],[1,"flex-1","w-0"],["icon","","mat-dialog-close",""],["class","overflow-auto p-4 max-h-[65vh]",4,"ngIf","ngIfElse"],["class","flex justify-center items-center p-2 border-t border-base-200",4,"ngIf"],[1,"overflow-auto","p-4","max-h-[65vh]"],[3,"form"],[1,"flex","justify-center","items-center","p-2","border-t","border-base-200"],["btn","","matRipple","",1,"w-32",3,"click"],["loading","",1,"h-64","flex","flex-col","items-center","justify-center"],[1,"mb-4",3,"diameter"]],template:function(o,n){if(1&o&&(e.j41(0,"header")(1,"h2"),e.EFF(2,"New Desk Booking"),e.k0s(),e.nrm(3,"div",1),e.j41(4,"button",2)(5,"app-icon"),e.EFF(6,"close"),e.k0s()()(),e.DNE(7,je,2,1,"main",3),e.nI1(8,"async"),e.DNE(9,Ie,3,0,"footer",4),e.nI1(10,"async"),e.DNE(11,Oe,4,1,"ng-template",null,0,e.C5r)),2&o){const i=e.sdS(12);e.R7$(7),e.Y8G("ngIf",!e.bMT(8,3,n.loading))("ngIfElse",i),e.R7$(2),e.Y8G("ngIf",!e.bMT(10,5,n.loading))}},dependencies:[d.bT,P.LG,E.tx,v.r6,T.R,Ne,d.Jj]})}return s})();var X=r(46864),W=r(94584),K=r(12236),Y=r(25175),M=r(80640);function we(s,a){1&s&&(e.j41(0,"mat-option",13),e.EFF(1," All Levels "),e.k0s())}function $e(s,a){if(1&s&&(e.j41(0,"mat-option",14),e.EFF(1),e.k0s()),2&s){const t=a.$implicit;e.Y8G("value",t.id),e.R7$(),e.SpI(" ",t.display_name||t.name," ")}}function Ae(s,a){if(1&s){const t=e.RV6();e.j41(0,"button",15),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.newDeskBooking())}),e.EFF(1," New Booking "),e.k0s()}}function Pe(s,a){if(1&s){const t=e.RV6();e.j41(0,"button",16),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.newDesk())}),e.j41(1,"app-icon"),e.EFF(2,"add"),e.k0s()()}}function Ge(s,a){if(1&s){const t=e.RV6();e.j41(0,"button",17)(1,"app-icon"),e.EFF(2,"cloud_upload"),e.k0s(),e.j41(3,"input",18),e.bIt("change",function(n){e.eBV(t);const i=e.XpG();return e.Njj(i.loadCSVData(n))}),e.k0s()()}}function Be(s,a){if(1&s){const t=e.RV6();e.j41(0,"button",19),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.downloadTemplate())}),e.j41(1,"app-icon"),e.EFF(2,"download"),e.k0s()()}}function Le(s,a){if(1&s){const t=e.RV6();e.j41(0,"button",20),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.manageRestrictions())}),e.j41(1,"app-icon"),e.EFF(2,"lock_open"),e.k0s()()}}let Ve=(()=>{class s extends _.Tv{constructor(t,o,n,i,l){super(),this._desks=t,this._org=o,this._route=n,this._router=i,this._dialog=l,this.levels=this._org.active_levels,this.filters=this._desks.filters,this.manage=!1,this.is_map=!1,this.setDate=c=>this._desks.setFilters({date:c}),this.setFilters=c=>this._desks.setFilters(c),this.updateZones=c=>{this._router.navigate([],{relativeTo:this._route,queryParams:{zone_ids:c.join(",")},queryParamsHandling:"merge"}),this._desks.setFilters({zones:c})}}ngOnInit(){var t=this;return(0,g.A)(function*(){yield t._org.initialised.pipe((0,oe.$)(o=>o)).toPromise(),t.subscription("route.query",t._route.queryParamMap.subscribe(o=>{if(o.has("zone_ids")){const n=o.get("zone_ids").split(",");if(n.length){t.updateZones(n);const i=t._org.levelWithID(n);if(!i)return;t._org.building=t._org.buildings.find(l=>l.id===i.parent_id)}}o.has("date")&&t.setDate(new Date(+o.get("date"))),o.has("approve")?t.approve(o.get("approve")):o.has("reject")&&t.reject(o.get("reject")),t.manage=t._router.url?.includes("manage"),t.is_map=t._router.url?.includes("map")})),t.subscription("router.events",t._router.events.subscribe(()=>{t.manage=t._router.url?.includes("manage"),t.is_map=t._router.url?.includes("map")})),t.subscription("levels",t._org.active_levels.subscribe(function(){var o=(0,g.A)(function*(n){const l=(yield t.filters.pipe((0,x.s)(1)).toPromise())?.zones?.filter(c=>n.find(p=>p.id===c)||"All"===c)||[];!l.length&&n.length&&l.push(n[0].id),t.updateZones(l)});return function(n){return o.apply(this,arguments)}}())),t.manage=t._router.url?.includes("manage"),t.is_map=t._router.url?.includes("map")})()}newDesk(){const t=new b.gB({id:`desk-${(0,_.HO)(999999)}`});t.staff_name="[NEW_DESK]",this._desks.addDesks([t]),(0,_.uA)("New desk added to local data.",void 0,()=>(0,_.uA)("Make sure to save the new desk before using it."))}newDeskBooking(){this._dialog.open(V,{})}manageRestrictions(){this._dialog.open(X.F,{data:{type:"desk"}})}loadCSVData(t){var o=this;return(0,g.A)(function*(){const n=yield(0,_.sT)(t).catch(([i,l])=>{throw(0,_.UG)(i),l});try{const i=(0,_.a6)(n)||[];o._desks.addDesks(i.map(l=>new b.gB({...l,id:l.id||`desk-${(0,_.HO)(999999)}`})))}catch(i){console.error(i)}})()}downloadTemplate(){const t=new b.gB({id:"desk-123",name:"Test Desk",bookable:!0,groups:["test-desk-group","desk-bookers"],features:["Standing Desk","Dual Monitor"]}).toJSON();delete t.images;const o=(0,_.SL)([t]);(0,_.PE)("desk-template.csv",o)}approve(t){var o=this;return(0,g.A)(function*(){const n=yield(0,f.DO)(t).toPromise();n&&o._desks.approveDesk(n)})()}reject(t){var o=this;return(0,g.A)(function*(){const n=yield(0,f.DO)(t).toPromise();n&&o._desks.rejectDesk(n)})()}static#e=this.\u0275fac=function(o){return new(o||s)(e.rXU(D.v),e.rXU(b.yb),e.rXU(h.nX),e.rXU(h.Ix),e.rXU(E.bZ))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["desks-topbar"]],features:[e.Vt3],decls:17,vars:17,consts:[[1,"flex","items-center","bg-base-100","h-20","px-4","border-b","border-base-200","space-x-2"],["appearance","outline"],["placeholder","All Levels",3,"ngModelChange","ngModel"],["value","All",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],["btn","","matRipple","","class","mx-2 w-40","matTooltip","New Desk Booking",3,"click",4,"ngIf"],["btn","","icon","","matRipple","","class","bg-primary mx-2 text-white rounded","matTooltip","New Desk",3,"click",4,"ngIf"],["btn","","icon","","matRipple","","class","bg-primary relative text-white rounded","matTooltip","Upload Desks CSV",4,"ngIf"],["btn","","icon","","matRipple","","class","bg-primary mx-2 text-white rounded","matTooltip","Download Template Desk CSV",3,"click",4,"ngIf"],["btn","","icon","","matRipple","","class","bg-primary mx-2 text-white rounded","matTooltip","Desk Restrictions",3,"click",4,"ngIf"],[1,"flex-1","w-2"],[1,"mr-2",3,"modelChange","model"],[3,"dateChange"],["value","All"],[3,"value"],["btn","","matRipple","","matTooltip","New Desk Booking",1,"mx-2","w-40",3,"click"],["btn","","icon","","matRipple","","matTooltip","New Desk",1,"bg-primary","mx-2","text-white","rounded",3,"click"],["btn","","icon","","matRipple","","matTooltip","Upload Desks CSV",1,"bg-primary","relative","text-white","rounded"],["type","file",1,"absolute","inset-0","opacity-0",3,"change"],["btn","","icon","","matRipple","","matTooltip","Download Template Desk CSV",1,"bg-primary","mx-2","text-white","rounded",3,"click"],["btn","","icon","","matRipple","","matTooltip","Desk Restrictions",1,"bg-primary","mx-2","text-white","rounded",3,"click"]],template:function(o,n){if(1&o&&(e.j41(0,"div",0)(1,"mat-form-field",1)(2,"mat-select",2),e.nI1(3,"async"),e.nI1(4,"async"),e.bIt("ngModelChange",function(l){return n.updateZones([l])}),e.DNE(5,we,2,0,"mat-option",3)(6,$e,2,2,"mat-option",4),e.nI1(7,"async"),e.k0s()(),e.DNE(8,Ae,2,0,"button",5)(9,Pe,3,0,"button",6)(10,Ge,4,0,"button",7)(11,Be,3,0,"button",8)(12,Le,3,0,"button",9),e.nrm(13,"div",10),e.j41(14,"searchbar",11),e.nI1(15,"async"),e.bIt("modelChange",function(l){return n.setFilters({search:l})}),e.k0s(),e.j41(16,"date-options",12),e.bIt("dateChange",function(l){return n.setDate(l)}),e.k0s()()),2&o){let i;e.R7$(2),e.Y8G("ngModel",e.bMT(3,9,n.filters).zones?e.bMT(4,11,n.filters).zones[0]:"All"),e.R7$(3),e.Y8G("ngIf",!n.is_map),e.R7$(),e.Y8G("ngForOf",e.bMT(7,13,n.levels)),e.R7$(2),e.Y8G("ngIf",!n.manage),e.R7$(),e.Y8G("ngIf",n.manage),e.R7$(),e.Y8G("ngIf",n.manage),e.R7$(),e.Y8G("ngIf",n.manage),e.R7$(),e.Y8G("ngIf",n.manage),e.R7$(2),e.Y8G("model",null==(i=e.bMT(15,15,n.filters))?null:i.search)}},dependencies:[d.Sq,d.bT,u.BC,u.vS,W.o,K.x,C.rl,Y.VO,v.wT,M.oV,v.r6,T.R,d.Jj],styles:["mat-form-field[_ngcontent-%COMP%]{height:3.25em;width:8em}\n\n/*# sourceMappingURL=desks-topbar.component.ts-angular-inline--127.css.map*/"]})}return s})();const Xe=["app-desks",""],We=()=>["/book","desks","events"],Ke=()=>["/book","desks","map"],Ye=()=>["/book","desks","manage"];function Ue(s,a){1&s&&e.nrm(0,"mat-progress-bar",7)}let ze=(()=>{class s extends _.Tv{constructor(t,o){super(),this._state=t,this._router=o,this.loading=this._state.loading}ngOnInit(){this._state.refresh(),this.subscription("router.events",this._router.events.subscribe(o=>{if(o instanceof h.wF){const n=this._router.url?.split("/")||[""];this.path=n[t.length-1].split("?")[0]}}));const t=this._router.url?.split("/")||[""];this.path=t[t.length-1].split("?")[0]}ngOnDestroy(){super.ngOnDestroy()}static#e=this.\u0275fac=function(o){return new(o||s)(e.rXU(D.v),e.rXU(h.Ix))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["","app-desks",""]],features:[e.Vt3],attrs:Xe,decls:15,vars:12,consts:[[1,"flex-1","relative","w-1/2","flex","flex-col","bg-base-100","overflow-hidden"],[1,"w-full"],[1,"dark"],["mat-tab-nav-bar",""],["mat-tab-link","","queryParamsHandling","merge",3,"routerLink","active"],[1,"flex-1","h-1/2","w-full","relative","overflow-auto"],["class","w-full","mode","indeterminate",4,"ngIf"],["mode","indeterminate",1,"w-full"]],template:function(o,n){1&o&&(e.nrm(0,"sidebar"),e.j41(1,"main",0),e.nrm(2,"desks-topbar",1),e.j41(3,"div",2)(4,"nav",3)(5,"a",4),e.EFF(6," Bookings "),e.k0s(),e.j41(7,"a",4),e.EFF(8," Map View "),e.k0s(),e.j41(9,"a",4),e.EFF(10," Manage Desks "),e.k0s()()(),e.j41(11,"div",5),e.nrm(12,"router-outlet"),e.k0s(),e.DNE(13,Ue,1,0,"mat-progress-bar",6),e.nI1(14,"async"),e.k0s()),2&o&&(e.R7$(5),e.Y8G("routerLink",e.lJ4(9,We))("active","events"===n.path),e.R7$(2),e.Y8G("routerLink",e.lJ4(10,Ke))("active","map"===n.path),e.R7$(2),e.Y8G("routerLink",e.lJ4(11,Ye))("active","manage"===n.path),e.R7$(4),e.Y8G("ngIf",e.bMT(14,7,n.loading)))},dependencies:[d.bT,I.Bu,I.Ql,se.k,A.HM,h.n3,h.Wk,Ve,d.Jj],styles:["[_nghost-%COMP%]{display:flex;height:100%;width:100%}\n\n/*# sourceMappingURL=desks.component.ts-angular-inline--125.css.map*/"]})}return s})();var w=r(31034),U=r(88328);const Je=s=>({key:"date",name:"Date",content:s,size:"4rem",sortable:!1}),Qe=s=>({key:"period",name:"Period",content:s,size:"9rem"}),He=s=>({key:"user_name",name:"Person",content:s}),Ze=s=>({key:"group",name:"Group",content:s}),qe=()=>({key:"asset_name",name:"Desk"}),et=()=>({key:"approver",name:"Approver"}),tt=s=>({key:"status",name:"Status",content:s,size:"8.5rem",sortable:!1}),nt=s=>({key:"checked_in",name:"Checked In",content:s,size:"7rem",sortable:!1}),st=(s,a,t,o,n,i,l,c)=>[s,a,t,o,n,i,l,c];function ot(s,a){if(1&s&&(e.j41(0,"div",13)(1,"div",14),e.EFF(2),e.nI1(3,"date"),e.k0s(),e.j41(4,"div",15),e.EFF(5),e.nI1(6,"date"),e.k0s()()),2&s){const t=a.data;e.R7$(2),e.JRh(e.i5U(3,2,t,"MMM")),e.R7$(3),e.JRh(e.i5U(6,5,t,"dd"))}}function it(s,a){1&s&&(e.j41(0,"span",18),e.EFF(1," No Group "),e.k0s())}function at(s,a){if(1&s&&(e.j41(0,"div",16),e.EFF(1),e.DNE(2,it,2,0,"span",17),e.k0s()),2&s){const t=a.row;e.R7$(),e.SpI(" ",t.group||(null==t.extension_data?null:t.extension_data.group)," "),e.R7$(),e.Y8G("ngIf",!(t.group||null!=t.extension_data&&t.extension_data.group))}}function lt(s,a){if(1&s&&(e.qex(0),e.EFF(1),e.nI1(2,"date"),e.nI1(3,"date"),e.bVm()),2&s){const t=e.XpG(2).row,o=e.XpG();e.R7$(),e.Lme(" ",e.i5U(2,2,t.date,o.time_format)," \u2013 ",e.i5U(3,5,t.date_end,o.time_format)," ")}}function rt(s,a){1&s&&(e.qex(0),e.EFF(1,"All Day"),e.bVm())}function _t(s,a){if(1&s&&(e.qex(0),e.j41(1,"div",19),e.DNE(2,lt,4,8,"ng-container",20)(3,rt,2,0,"ng-container",20),e.k0s(),e.bVm()),2&s){const t=e.XpG().row;e.R7$(2),e.Y8G("ngIf",!t.all_day),e.R7$(),e.Y8G("ngIf",t.all_day)}}function ct(s,a){if(1&s&&(e.qex(0),e.j41(1,"div",21),e.EFF(2),e.k0s(),e.bVm()),2&s){const t=e.XpG().row;e.R7$(2),e.SpI(" ","ended"===t.status?"Manually Ended":"Expired"," ")}}function pt(s,a){if(1&s&&(e.j41(0,"div",19),e.DNE(1,_t,4,2,"ng-container",20)(2,ct,3,1,"ng-container",20),e.k0s()),2&s){const t=a.row;e.R7$(),e.Y8G("ngIf","declined"!==t.status&&!t.deleted&&"ended"!==t.status),e.R7$(),e.Y8G("ngIf","declined"===t.status||t.deleted||"ended"===t.status)}}function dt(s,a){if(1&s&&(e.j41(0,"div",25),e.EFF(1),e.k0s()),2&s){const t=e.XpG().row;e.R7$(),e.SpI(" ",t.user_email," ")}}function mt(s,a){if(1&s&&(e.j41(0,"div",22)(1,"div",23),e.EFF(2),e.k0s(),e.DNE(3,dt,2,1,"div",24),e.k0s()),2&s){const t=a.row;e.R7$(2),e.SpI(" ",t.user_name||t.user_email||t.booked_by_name||t.booked_by_email," "),e.R7$(),e.Y8G("ngIf",t.user_name)}}function ut(s,a){if(1&s){const t=e.RV6();e.j41(0,"div",26)(1,"button",27)(2,"div",28)(3,"div",29),e.EFF(4),e.k0s(),e.j41(5,"app-icon",30),e.EFF(6,"arrow_drop_down"),e.k0s()()()(),e.j41(7,"mat-menu",null,6)(9,"button",12),e.bIt("click",function(){const n=e.eBV(t).row,i=e.XpG();return e.Njj(i.approve(n))}),e.j41(10,"div",31)(11,"app-icon",30),e.EFF(12,"event_available"),e.k0s(),e.j41(13,"div",32),e.EFF(14,"Approve Desk"),e.k0s()()(),e.j41(15,"button",12),e.bIt("click",function(){const n=e.eBV(t).row,i=e.XpG();return e.Njj(i.reject(n))}),e.j41(16,"div",31)(17,"app-icon",30),e.EFF(18,"event_busy"),e.k0s(),e.j41(19,"div",32),e.EFF(20,"Decline Desk"),e.k0s()()()()}if(2&s){const t=a.row,o=e.sdS(8);e.R7$(),e.AVh("!text-success-content","approved"===(null==t?null:t.status))("!bg-success","approved"===(null==t?null:t.status))("!text-error-content","declined"===(null==t?null:t.status))("!bg-error","declined"===(null==t?null:t.status))("!text-neutral-content","ended"===(null==t?null:t.status))("!bg-neutral","ended"===(null==t?null:t.status))("opacity-30","ended"===(null==t?null:t.status)),e.Y8G("matMenuTriggerFor",o)("disabled","ended"===(null==t?null:t.status)),e.R7$(3),e.SpI(" ","ended"===(null==t?null:t.status)?"Ended":"approved"===(null==t?null:t.status)?"Approved":"declined"===(null==t?null:t.status)?"Declined":"Pending"," ")}}function gt(s,a){if(1&s){const t=e.RV6();e.j41(0,"div",26)(1,"button",33)(2,"div",28)(3,"div",29),e.EFF(4),e.k0s(),e.j41(5,"app-icon",30),e.EFF(6," arrow_drop_down "),e.k0s()()()(),e.j41(7,"mat-menu",null,7)(9,"button",12),e.bIt("click",function(){const n=e.eBV(t).row,i=e.XpG();return e.Njj(i.checkin(n,!0))}),e.j41(10,"div",31)(11,"app-icon",30),e.EFF(12,"check"),e.k0s(),e.j41(13,"div"),e.EFF(14,"Check-in"),e.k0s()()(),e.j41(15,"button",12),e.bIt("click",function(){const n=e.eBV(t).row,i=e.XpG();return e.Njj(i.checkin(n,!1))}),e.j41(16,"div",31)(17,"app-icon",30),e.EFF(18,"cancel"),e.k0s(),e.j41(19,"div"),e.EFF(20,"Check-out"),e.k0s()()()()}if(2&s){const t=a.data,o=a.row,n=e.sdS(8);e.R7$(),e.AVh("!bg-neutral",!t)("!text-neutral-content",!t)("!bg-success",t)("!text-success-content",t)("opacity-30","ended"===o.status),e.Y8G("matMenuTriggerFor",n)("disabled","ended"===o.status)("matTooltip","ended"===o.status?"Desk booking has ended":"Check-in or check-out desk"),e.R7$(3),e.SpI(" ",t?"Yes":"No"," ")}}function ft(s,a){if(1&s){const t=e.RV6();e.j41(0,"button",34),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.loadMore())}),e.EFF(1," Load More "),e.k0s()}}let z=(()=>{class s{get columns(){return["date","period","user_name","group","asset_name","approver_name","status","checked_in"]}get time_format(){return this._settings.time_format}constructor(t,o){var n=this;this._state=t,this._settings=o,this.filters=this._state.filters,this.has_more_pages=this._state.has_more_pages,this.bookings=this._state.bookings,this.rejectAll=()=>this._state.rejectAllDesks(),this.loadMore=()=>this._state.nextPage(),this.checkin=(i,l)=>this.runMethod("checkin",(0,g.A)(function*(){yield n._state.checkinDesk(i,l),i.checked_in=l??!0})),this.approve=i=>this.runMethod("approve",(0,g.A)(function*(){return n._state.approveDesk(i)})),this.reject=i=>this.runMethod("reject",(0,g.A)(function*(){return n._state.rejectDesk(i)}))}runMethod(t,o){var n=this;return(0,g.A)(function*(){n.loading=t,yield o().catch(i=>null),n.loading=""})()}static#e=this.\u0275fac=function(o){return new(o||s)(e.rXU(D.v),e.rXU(_.h$))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["desk-bookings"]],decls:25,vars:36,consts:[["date_template",""],["group_template",""],["period_template",""],["user_template",""],["status_template",""],["option_template",""],["menu","matMenu"],["checkinMenu","matMenu"],[1,"overflow-auto","h-full","w-full","pb-4"],[1,"min-w-[72rem]","block","text-sm",3,"data","filter","columns","empty_message","sortable"],["btn","","matRipple","","class","absolute bottom-2 left-2 w-32 mx-auto my-4",3,"click",4,"ngIf"],["icon","","matRipple","",1,"absolute","bottom-2","right-2","bg-base-100","shadow",3,"matMenuTriggerFor"],["mat-menu-item","",3,"click"],[1,"flex","flex-col","items-center","justify-center","w-full","py-2"],[1,"opacity-60"],[1,"text-xl"],[1,"p-4","text-[0.625rem]","font-mono"],["class","opacity-30",4,"ngIf"],[1,"opacity-30"],[1,"p-2"],[4,"ngIf"],[1,"text-xs","py-2","px-4","bg-error","rounded-3xl","text-white"],[1,"flex","flex-col","justify-center","px-4","py-2"],[1,"select-all"],["class","text-xs opacity-30 select-all",4,"ngIf"],[1,"text-xs","opacity-30","select-all"],[1,"px-2"],["matRipple","",1,"rounded-3xl","bg-warning","text-warning-content","border-none","w-[7.5rem]","h-10",3,"matMenuTriggerFor","disabled"],[1,"flex","items-center","pl-4","pr-2","space-x-2"],[1,"flex-1","text-left"],[1,"text-2xl"],[1,"flex","items-center","space-x-2"],[1,"pr-2"],["matRipple","",1,"rounded-3xl","bg-warning","text-warning-content","border-none","w-[4.5rem]","h-10",3,"matMenuTriggerFor","disabled","matTooltip"],["btn","","matRipple","",1,"absolute","bottom-2","left-2","w-32","mx-auto","my-4",3,"click"]],template:function(o,n){if(1&o){const i=e.RV6();e.j41(0,"div",8),e.nrm(1,"simple-table",9),e.nI1(2,"async"),e.nI1(3,"async"),e.DNE(4,ot,7,8,"ng-template",null,0,e.C5r)(6,at,3,2,"ng-template",null,1,e.C5r)(8,pt,3,2,"ng-template",null,2,e.C5r)(10,mt,4,2,"ng-template",null,3,e.C5r)(12,ut,21,17,"ng-template",null,4,e.C5r)(14,gt,21,14,"ng-template",null,5,e.C5r),e.k0s(),e.DNE(16,ft,2,0,"button",10),e.nI1(17,"async"),e.j41(18,"button",11)(19,"app-icon"),e.EFF(20,"more_vert"),e.k0s()(),e.j41(21,"mat-menu",null,6)(23,"button",12),e.bIt("click",function(){return e.eBV(i),e.Njj(n.rejectAll())}),e.EFF(24,"Reject All"),e.k0s()()}if(2&o){let i,l;const c=e.sdS(5),p=e.sdS(7),m=e.sdS(9),F=e.sdS(11),y=e.sdS(13),N=e.sdS(15),j=e.sdS(22);e.R7$(),e.Y8G("data",n.bookings)("filter",null==(i=e.bMT(2,7,n.filters))?null:i.search)("columns",e.lV(27,st,e.eq3(13,Je,c),e.eq3(15,Qe,m),e.eq3(17,He,F),e.eq3(19,Ze,p),e.lJ4(21,qe),e.lJ4(22,et),e.eq3(23,tt,y),e.eq3(25,nt,N)))("empty_message",null!=(l=e.bMT(3,9,n.filters))&&l.search?"No matching desk bookings":"There are no desk booking for the currently selected date.")("sortable",!0),e.R7$(15),e.Y8G("ngIf",!n.loading&&e.bMT(17,11,n.has_more_pages)),e.R7$(2),e.Y8G("matMenuTriggerFor",j)}},dependencies:[d.bT,w.kk,w.fb,w.Cp,M.oV,v.r6,T.R,U.O,d.Jj,d.vh],styles:["[_nghost-%COMP%]{position:relative;display:flex;flex-direction:column;height:100%;width:100%}\n\n/*# sourceMappingURL=desk-bookings.component.ts-angular-inline--126.css.map*/"]})}return s})();var kt=r(24918),ht=r(69801);let J=(()=>{class s extends _.Tv{constructor(t,o,n,i){super(),this._state=t,this._desk=o,this._desks_state=n,this._org=i,this.url=this._state.map_url,this.styles=this._state.map_styles,this.positions=this._state.map_positions,this.actions=this._state.map_actions,this.features=this._state.map_features,this.setHost=l=>this._desks_state.setOptions({host:l})}ngOnInit(){this._desks_state.setOptions({use_api:!0}),this.subscription("date",this._desk.filters.subscribe(t=>{const o=this._org.levelWithID(t.zones);o&&this._state.setLevel(o.id),this._desks_state.setOptions({date:t.date||Date.now(),all_day:!0,zones:t.zones})}))}static#e=this.\u0275fac=function(o){return new(o||s)(e.rXU(R.Oe),e.rXU(D.v),e.rXU(R.vz),e.rXU(b.yb))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["desk-map-view"]],features:[e.Jv_([R.vz]),e.Vt3],decls:13,vars:19,consts:[["map","",1,"h-full","w-full","relative"],[3,"src","zoom","center","styles","features","actions"],[1,"absolute","bottom-2","right-2"],[1,"absolute","top-0","left-0","p-2","text-black"],["placeholder","User for bookings...",1,"white",3,"ngModelChange","ngModel"],["info","",1,"absolute","bottom-0","rounded","p-2","m-2","bg-base-100","shadow","text-center"]],template:function(o,n){1&o&&(e.j41(0,"div",0),e.nrm(1,"interactive-map",1),e.nI1(2,"async"),e.nI1(3,"async"),e.nI1(4,"async"),e.nI1(5,"async"),e.nI1(6,"async"),e.nI1(7,"async"),e.nrm(8,"explore-zoom-controls",2),e.j41(9,"div",3)(10,"a-user-search-field",4),e.bIt("ngModelChange",function(l){return n.setHost(l)}),e.k0s()(),e.j41(11,"div",5),e.EFF(12," Click/Tap an available desk to book it. "),e.k0s()()),2&o&&(e.R7$(),e.Y8G("src",e.bMT(2,7,n.url))("zoom",e.bMT(3,9,n.positions).zoom)("center",e.bMT(4,11,n.positions).center)("styles",e.bMT(5,13,n.styles))("features",e.bMT(6,15,n.features))("actions",e.bMT(7,17,n.actions)),e.R7$(9),e.Y8G("ngModel",null))},dependencies:[u.BC,u.vS,L.$,kt.S,ht.l,d.Jj],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;position:relative;height:100%;width:100%}[info][_ngcontent-%COMP%]{left:50%;transform:translate(-50%)}\n\n/*# sourceMappingURL=desk-map-view.component.ts-angular-inline--128.css.map*/"]})}return s})();var bt=r(3998),Q=r(83259),vt=r(52352),Dt=r(22238),Tt=r(74846),H=r(26781);const Et=s=>({key:"id",name:"Desk ID",content:s,size:"10rem"}),Ft=()=>({key:"name",name:"Desk Name"}),Ct=s=>({key:"groups",name:"Groups",content:s}),Rt=s=>({key:"features",name:"Features",content:s}),xt=s=>({key:"bookable",name:"Bookable",content:s,size:"5.5rem"}),St=s=>({key:"actions",name:" ",content:s,size:"8.5rem",sortable:!1}),Mt=(s,a,t,o,n,i)=>[s,a,t,o,n,i];function yt(s,a){if(1&s&&(e.j41(0,"div",11),e.EFF(1),e.k0s()),2&s){const t=e.XpG().row;e.R7$(),e.SpI(" ",t.map_id," ")}}function Nt(s,a){if(1&s){const t=e.RV6();e.j41(0,"button",9),e.bIt("click",function(){const n=e.eBV(t).row,i=e.XpG();return e.Njj(i.copyToClipboard(n.map_id||n.id))}),e.j41(1,"div"),e.EFF(2),e.k0s(),e.DNE(3,yt,2,1,"div",10),e.k0s()}if(2&s){const t=a.row;e.R7$(2),e.JRh(t.id||t.map_id),e.R7$(),e.Y8G("ngIf",t.id&&t.map_id!==t.id)}}function jt(s,a){if(1&s&&(e.j41(0,"span",14),e.EFF(1),e.k0s()),2&s){const t=a.$implicit;e.R7$(),e.SpI(" ",t," ")}}function It(s,a){if(1&s&&(e.j41(0,"div",12),e.DNE(1,jt,2,1,"span",13),e.k0s()),2&s){const t=a.data;e.R7$(),e.Y8G("ngForOf",t)}}function Ot(s,a){if(1&s&&(e.j41(0,"div",15)(1,"app-icon"),e.EFF(2),e.k0s()()),2&s){const t=a.data;e.AVh("bg-error",!t)("bg-success",t),e.R7$(2),e.JRh(t?"done":"close")}}function wt(s,a){if(1&s){const t=e.RV6();e.j41(0,"div",21)(1,"div",22)(2,"a",23),e.nI1(3,"safe"),e.nrm(4,"img",24),e.k0s(),e.j41(5,"div",25),e.EFF(6),e.k0s()(),e.j41(7,"button",26),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.print())}),e.EFF(8," Print QR Code "),e.k0s()()}if(2&s){const t=e.XpG().row;e.R7$(2),e.Y8G("href",e.i5U(3,3,t.qr_link,"url"),e.B4B),e.R7$(2),e.Y8G("src",t.qr_code,e.B4B),e.R7$(2),e.SpI(" ",t.name||t.id," ")}}function $t(s,a){if(1&s){const t=e.RV6();e.j41(0,"div",16)(1,"button",17),e.bIt("click",function(){const n=e.eBV(t).row,i=e.XpG();return e.Njj(i.loadQrCode(n))}),e.j41(2,"app-icon"),e.EFF(3,"qr_code"),e.k0s()(),e.j41(4,"button",18),e.bIt("click",function(){const n=e.eBV(t).row,i=e.XpG();return e.Njj(i.editDesk(n))}),e.j41(5,"app-icon"),e.EFF(6,"edit"),e.k0s()(),e.j41(7,"button",19),e.bIt("click",function(){const n=e.eBV(t).row,i=e.XpG();return e.Njj(i.removeDesk(n))}),e.j41(8,"app-icon",20),e.EFF(9,"delete"),e.k0s()(),e.DNE(10,wt,9,6,"ng-template",null,4,e.C5r),e.k0s()}if(2&s){const t=e.sdS(11);e.R7$(),e.Y8G("content",t)}}function At(s,a){if(1&s&&(e.j41(0,"div",27),e.nrm(1,"mat-spinner",28),e.j41(2,"p"),e.EFF(3),e.k0s()()),2&s){const t=e.XpG();e.R7$(3),e.JRh(t.loading)}}function Pt(s,a){if(1&s){const t=e.RV6();e.j41(0,"div",29)(1,"div",30)(2,"div",31),e.EFF(3," Drop CSV file to add desks "),e.k0s()(),e.j41(4,"input",32),e.bIt("change",function(n){e.eBV(t);const i=e.XpG();return e.Njj(i.loadCSVData(n))}),e.k0s()()}}let Z=(()=>{class s extends _.Tv{constructor(t,o,n,i,l,c){super(),this._state=t,this._org=o,this._dialog=n,this._settings=i,this._element=l,this._clipboard=c,this.dragging=!1,this.filters=this._state.filters,this.desks=this._state.desks,this.editDesk=p=>this._state.editDesk(p),this.copyToClipboard=p=>{this._clipboard.copy(p)&&(0,_.VX)("Desk ID copied to clipboard.")}}removeDesk(t){var o=this;return(0,g.A)(function*(){const n=yield(0,_.GE)({title:"Remove desk",content:`Remove desk ${t.name}?`,icon:{content:"delete"}},o._dialog);if("done"!==n.reason)return;n.close();const l=(yield o.desks.pipe((0,x.s)(1)).toPromise()).filter(m=>m.id!==t.id),c=yield o.filters.pipe((0,x.s)(1)).toPromise(),p=o._org.levelWithID(c.zones);o.loading="Removing desk...",yield(0,bt.D58)(p.id,{name:"desks",description:"desks",details:l}).toPromise().catch(m=>{throw o.loading="",(0,_.UG)(`Error saving desk data. Error: ${m.message||m}`),m}),(0,_.VX)("Successfully updated desks"),o._state.setFilters({}),o.loading=""})()}get kiosk_url(){const t=this._settings.get("app.workplace_url_path")||"/workplace";return`${window.location.origin}${t}`}loadQrCode(t){const o=`${this.kiosk_url}/#/book/code?asset_id=${encodeURIComponent(t.id)}`;t.qr_link=o,t.qr_code=(0,Q.C)(o)}print(){window.print()}loadCSVData(t){var o=this;return(0,g.A)(function*(){o.loading="Loading CSV file...",o.dragging=!1;const n=yield(0,_.sT)(t).catch(([i,l])=>{throw(0,_.UG)(i),l});try{const i=(0,_.a6)(n)||[];o._state.addDesks(i.map(l=>new b.gB({...l,id:l.id||`desk-${(0,_.HO)(999999)}`})))}catch(i){console.error(i)}o.loading=""})()}handleDrag(t,o){this.dragging="enter"===t}static#e=this.\u0275fac=function(o){return new(o||s)(e.rXU(D.v),e.rXU(b.yb),e.rXU(E.bZ),e.rXU(_.h$),e.rXU(e.aKT),e.rXU(vt.B0))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["desks-manage"]],features:[e.Vt3],decls:14,vars:29,consts:[["name_template",""],["item_list_template",""],["bool_template",""],["action_template",""],["qr_menu",""],[1,"overflow-auto","h-full","w-full","pb-4",3,"dragenter","dragend"],[1,"min-w-[72rem]","w-full","block","text-sm",3,"filter","data","columns","sortable","empty_message"],["class","absolute inset-0 flex flex-col items-center justify-center space-y-2 bg-base-100 bg-opacity-60",4,"ngIf"],["class","absolute inset-0 bg-neutral flex items-center justify-center",4,"ngIf"],[1,"flex","flex-col","px-4","py-2","text-left","leading-tight",3,"click"],["class","text-[0.625rem] opacity-30 font-mono",4,"ngIf"],[1,"text-[0.625rem]","opacity-30","font-mono"],[1,"flex","flex-wrap","p-2"],["class","m-1 py-1 px-2 rounded-2xl text-xs font-mono bg-info text-info-content",4,"ngFor","ngForOf"],[1,"m-1","py-1","px-2","rounded-2xl","text-xs","font-mono","bg-info","text-info-content"],[1,"rounded","h-8","w-8","flex","items-center","justify-center","text-2xl","text-white","mx-auto"],[1,"flex","items-center","justify-end","space-x-2","p-2"],["icon","","matRipple","","customTooltip","","matTooltip","Print QR Code",3,"click","content"],["icon","","matRipple","","matTooltip","Edit Desk",3,"click"],["icon","","matRipple","","matTooltip","Remove Desk",3,"click"],[1,"text-error"],[1,"bg-base-100","py-2","shadow","rounded"],["printable","",1,""],["target","_blank","ref","noopener noreferrer",1,"block","p-2","mx-4","my-2","rounded-lg","border","border-base-200","bg-base-100",3,"href"],[1,"w-48",3,"src"],[1,"w-[calc(100%-2rem)]","text-center","mt-2","font-mono","text-sm","bg-base-200","rounded","p-2","mx-4"],["btn","","matRipple","",1,"w-[calc(100%-2rem)]","mx-4","my-2",3,"click"],[1,"absolute","inset-0","flex","flex-col","items-center","justify-center","space-y-2","bg-base-100","bg-opacity-60"],["diameter","32"],[1,"absolute","inset-0","bg-neutral","flex","items-center","justify-center"],[1,"bg-base-100","p-4","rounded","shadow"],[1,"border-4","border-base-200","border-dashed","rounded","flex","flex-col","items-center","justify-center","w-64","h-64"],["type","file",1,"absolute","inset-0","opacity-0",3,"change"]],template:function(o,n){if(1&o){const i=e.RV6();e.j41(0,"div",5),e.bIt("dragenter",function(c){return e.eBV(i),e.Njj(n.handleDrag("enter",c))})("dragend",function(c){return e.eBV(i),e.Njj(n.handleDrag("end",c))},!1,e.tSv),e.nrm(1,"simple-table",6),e.nI1(2,"async"),e.nI1(3,"async"),e.DNE(4,Nt,4,2,"ng-template",null,0,e.C5r)(6,It,2,1,"ng-template",null,1,e.C5r)(8,Ot,3,5,"ng-template",null,2,e.C5r)(10,$t,12,1,"ng-template",null,3,e.C5r)(12,At,4,1,"div",7)(13,Pt,5,0,"div",8),e.k0s()}if(2&o){let i,l;const c=e.sdS(5),p=e.sdS(7),m=e.sdS(9),F=e.sdS(11);e.R7$(),e.Y8G("filter",null==(i=e.bMT(2,7,n.filters))?null:i.search)("data",n.desks)("columns",e.l4e(22,Mt,e.eq3(11,Et,c),e.lJ4(13,Ft),e.eq3(14,Ct,p),e.eq3(16,Rt,p),e.eq3(18,xt,m),e.eq3(20,St,F)))("sortable",!0)("empty_message",null!=(l=e.bMT(3,9,n.filters))&&l.search?"No matching desks":"No desks for selected level"),e.R7$(11),e.Y8G("ngIf",n.loading),e.R7$(),e.Y8G("ngIf",n.dragging)}},dependencies:[d.Sq,d.bT,M.oV,P.LG,v.r6,T.R,Dt.I,U.O,Tt.L,d.Jj,H.m]})}return s})();var Gt=r(63046),Bt=r(42175),q=r(35443);function Lt(s,a){if(1&s&&(e.j41(0,"a",6),e.nI1(1,"safe"),e.j41(2,"div",7),e.nrm(3,"img",8),e.k0s(),e.j41(4,"div",9),e.EFF(5),e.k0s()()),2&s){const t=a.$implicit;e.Y8G("href",e.i5U(1,3,t.qr_link,"url"),e.B4B),e.R7$(3),e.Y8G("src",t.qr_code,e.B4B),e.R7$(2),e.SpI(" ",t.name||t.id," ")}}let Vt=(()=>{class s{get kiosk_url(){const t=this._settings.get("app.workplace_url_path")||"/workplace";return`${window.location.origin}${t}`}constructor(t,o){this._settings=t,this._state=o,this.desks=this._state.desks.pipe((0,q.T)(n=>n.map(i=>(this.loadQrCode(i),i))))}loadQrCode(t){const o=`${this.kiosk_url}/#/book/code?asset_id=${encodeURIComponent(t.id)}`;return t.qr_link=o,t.qr_code=(0,Q.C)(o),t.qr_code}print(){window.print()}static#e=this.\u0275fac=function(o){return new(o||s)(e.rXU(_.h$),e.rXU(D.v))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["desk-qr-code-modal"]],decls:10,vars:3,consts:[[1,"relative","w-screen","min-h-screen","bg-base-100","rounded-none"],[1,"sticky","top-0","flex","items-center","justify-between","print:hidden","p-4","w-full"],["btn","","matRipple","",3,"click"],["icon","","matRipple","","mat-dialog-close",""],[1,"flex","flex-wrap","overflow-auto","print:h-auto","h-[calc(100vh-5rem)]"],["target","_blank","ref","noopener noreferrer","class","flex flex-col items-center justify-center w-[28%] landscape:w-[21%] print:landscape:h-[33.33vh] print:h-[25vh] mx-auto",3,"href",4,"ngFor","ngForOf"],["target","_blank","ref","noopener noreferrer",1,"flex","flex-col","items-center","justify-center","w-[28%]","landscape:w-[21%]","print:landscape:h-[33.33vh]","print:h-[25vh]","mx-auto",3,"href"],[1,"block","p-2","mx-4","my-2","rounded-lg","border","border-base-200","bg-base-100"],[1,"w-48",3,"src"],[1,"w-[calc(100%-2rem)]","text-center","my-1","font-mono","text-sm","bg-base-200","rounded","p-1","mx-4"]],template:function(o,n){1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"button",2),e.bIt("click",function(){return n.print()}),e.EFF(3,"Print QR Codes"),e.k0s(),e.j41(4,"button",3)(5,"app-icon"),e.EFF(6,"close"),e.k0s()()(),e.j41(7,"div",4),e.DNE(8,Lt,6,6,"a",5),e.nI1(9,"async"),e.k0s()()),2&o&&(e.R7$(8),e.Y8G("ngForOf",e.bMT(9,1,n.desks)))},dependencies:[d.Sq,E.tx,v.r6,T.R,d.Jj,H.m]})}return s})();var Xt=r(45189),Wt=r(96843),Kt=r(56062);const Yt=["app-new-desks",""];function Ut(s,a){if(1&s){const t=e.RV6();e.j41(0,"button",13),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.newDeskBooking())}),e.j41(1,"div",14),e.EFF(2,"New Booking"),e.k0s(),e.j41(3,"app-icon",15),e.EFF(4,"add"),e.k0s()()}}function zt(s,a){if(1&s){const t=e.RV6();e.j41(0,"button",13),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.editDesk())}),e.j41(1,"div",14),e.EFF(2,"New Desk"),e.k0s(),e.j41(3,"app-icon",15),e.EFF(4,"add"),e.k0s()()}}function Jt(s,a){if(1&s&&(e.j41(0,"div",22),e.EFF(1),e.nI1(2,"building"),e.j41(3,"span",23),e.EFF(4," - "),e.k0s()()),2&s){let t;const o=e.XpG().$implicit;e.R7$(),e.SpI(" ",null==(t=e.bMT(2,1,o.parent_id))?null:t.display_name," ")}}function Qt(s,a){if(1&s&&(e.j41(0,"mat-option",19)(1,"div",20),e.DNE(2,Jt,5,3,"div",21),e.j41(3,"div"),e.EFF(4),e.k0s()()()),2&s){const t=a.$implicit,o=e.XpG(2);e.Y8G("value",t.id),e.R7$(2),e.Y8G("ngIf",o.use_region),e.R7$(2),e.SpI(" ",t.display_name||t.name," ")}}function Ht(s,a){if(1&s){const t=e.RV6();e.j41(0,"mat-form-field",16)(1,"mat-select",17),e.nI1(2,"async"),e.bIt("ngModelChange",function(n){e.eBV(t);const i=e.XpG();return e.Njj(i.updateZones(n))}),e.DNE(3,Qt,5,3,"mat-option",18),e.nI1(4,"async"),e.k0s()()}if(2&s){let t;const o=e.XpG();e.R7$(),e.Y8G("ngModel",null==(t=e.bMT(2,2,o.filters))?null:t.zones),e.R7$(2),e.Y8G("ngForOf",e.bMT(4,4,o.levels))}}function Zt(s,a){if(1&s&&(e.j41(0,"div",22),e.EFF(1),e.nI1(2,"building"),e.j41(3,"span",23),e.EFF(4," - "),e.k0s()()),2&s){let t;const o=e.XpG().$implicit;e.R7$(),e.SpI(" ",null==(t=e.bMT(2,1,o.parent_id))?null:t.display_name," ")}}function qt(s,a){if(1&s&&(e.j41(0,"mat-option",19)(1,"div",20),e.DNE(2,Zt,5,3,"div",21),e.j41(3,"div"),e.EFF(4),e.k0s()()()),2&s){const t=a.$implicit,o=e.XpG(2);e.Y8G("value",t.id),e.R7$(2),e.Y8G("ngIf",o.use_region),e.R7$(2),e.SpI(" ",t.display_name||t.name," ")}}function en(s,a){if(1&s){const t=e.RV6();e.j41(0,"mat-form-field",16)(1,"mat-select",24),e.nI1(2,"async"),e.nI1(3,"async"),e.bIt("ngModelChange",function(n){e.eBV(t);const i=e.XpG();return e.Njj(i.updateZones([n]))}),e.DNE(4,qt,5,3,"mat-option",18),e.nI1(5,"async"),e.k0s()()}if(2&s){let t;const o=e.XpG();e.R7$(),e.Y8G("ngModel",null!=(t=e.bMT(2,2,o.filters))&&null!=t.zones&&t.zones.length?null==(t=e.bMT(3,4,o.filters))?null:t.zones[0]:""),e.R7$(3),e.Y8G("ngForOf",e.bMT(5,6,o.levels))}}function tn(s,a){if(1&s){const t=e.RV6();e.qex(0),e.j41(1,"date-options",25),e.bIt("dateChange",function(n){e.eBV(t);const i=e.XpG();return e.Njj(i.setDate(n))}),e.k0s(),e.j41(2,"button",26),e.nI1(3,"async"),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.refresh())}),e.j41(4,"app-icon"),e.EFF(5,"refresh"),e.k0s()(),e.bVm()}if(2&s){const t=e.XpG();e.R7$(2),e.Y8G("disabled",e.bMT(3,1,t.loading))}}function nn(s,a){if(1&s){const t=e.RV6();e.qex(0),e.j41(1,"button",27),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.viewQRCodes())}),e.j41(2,"app-icon"),e.EFF(3,"qr_code"),e.k0s()(),e.j41(4,"button",28)(5,"app-icon"),e.EFF(6,"cloud_upload"),e.k0s(),e.j41(7,"input",29),e.bIt("change",function(n){e.eBV(t);const i=e.XpG();return e.Njj(i.loadCSVData(n))}),e.k0s()(),e.j41(8,"button",30),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.downloadTemplate())}),e.j41(9,"app-icon"),e.EFF(10,"download"),e.k0s()(),e.j41(11,"button",31),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.manageRestrictions())}),e.j41(12,"app-icon"),e.EFF(13,"lock_open"),e.k0s()(),e.bVm()}}function sn(s,a){1&s&&e.nrm(0,"mat-progress-bar",32)}const on=[{path:"new",component:(()=>{class s extends _.Tv{get use_region(){return!!this._settings.get("app.use_region")}constructor(t,o,n,i,l,c){super(),this._state=t,this._router=o,this._route=n,this._dialog=i,this._org=l,this._settings=c,this.loading=this._state.loading,this.manage=!1,this.filters=this._state.filters,this.levels=(0,Bt.zV)([this._org.active_building,this._org.active_region]).pipe((0,q.T)(([p,m])=>this._settings.get("app.use_region")?this._org.levelsForRegion(m):this._org.levelsForBuilding(p))),this.setDate=p=>this._state.setFilters({date:p}),this.setFilters=p=>this._state.setFilters(p),this.refresh=()=>this._state.refresh(),this.editDesk=()=>this._state.editDesk(),this.updateZones=p=>{this._router.navigate([],{relativeTo:this._route,queryParams:{zone_ids:p.join(",")},queryParamsHandling:"merge"})}}ngOnInit(){this._state.refresh(),this.subscription("router.events",this._router.events.subscribe(o=>{if(o instanceof h.wF){const n=this._router.url?.split("/")||[""];this.path=n[t.length-1].split("?")[0],this._checkManage()}})),this.subscription("route.query",this._route.queryParamMap.subscribe(o=>{if(o.has("zone_ids")){const n=o.get("zone_ids").split(",");if(!n.length)return;const i=this._org.levelWithID(n);if(this._state.setFilters({zones:n}),!i)return;this._org.building=this._org.buildings.find(l=>l.id===i.parent_id)}}));const t=this._router.url?.split("/")||[""];this.path=t[t.length-1].split("?")[0],this._checkManage()}ngOnDestroy(){super.ngOnDestroy()}viewQRCodes(){this._dialog.open(Vt)}newDeskBooking(){this._dialog.open(V,{}).afterClosed().subscribe(o=>{this._state.refresh()})}manageRestrictions(){this._dialog.open(X.F,{data:{type:"desk"}})}downloadTemplate(){const t=new b.gB({id:"desk-123",name:"Test Desk",bookable:!0,groups:["test-desk-group","desk-bookers"],features:["Standing Desk","Dual Monitor"]}).toJSON();delete t.images;const o=(0,_.SL)([t]);(0,_.PE)("desk-template.csv",o)}loadCSVData(t){var o=this;return(0,g.A)(function*(){const n=yield(0,_.sT)(t).catch(([i,l])=>{throw(0,_.UG)(i),l});try{const i=(0,_.a6)(n)||[];o._state.addDesks(i.map(l=>new b.gB({...l,id:l.id||`desk-${(0,_.HO)(999999)}`})))}catch(i){console.error(i)}})()}_checkManage(){var t=this;this.manage=this.path.includes("manage"),this.manage?this.subscription("zone-changes",this._org.active_levels.subscribe(function(){var o=(0,g.A)(function*(n){if(!n.length)return;const{zones:i}=yield t._state.filters.pipe((0,x.s)(1)).toPromise();i?.length&&i.some(c=>n.find(p=>p.id===c))||t.updateZones([n[0].id])});return function(n){return o.apply(this,arguments)}}())):this.unsub("zone-changes")}static#e=this.\u0275fac=function(o){return new(o||s)(e.rXU(D.v),e.rXU(h.Ix),e.rXU(h.nX),e.rXU(E.bZ),e.rXU(b.yb),e.rXU(_.h$))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["","app-new-desks",""]],features:[e.Vt3],attrs:Yt,decls:22,vars:13,consts:[[1,"print:hidden"],[1,"flex","flex-1","h-px","print:hidden"],[1,"flex","flex-col","flex-1","w-1/2","h-full"],[1,"flex","items-center","w-full","py-4","px-8","space-x-2"],[1,"text-2xl","font-medium"],[1,"flex-1","w-px"],[1,"mr-2",3,"modelChange","model"],["btn","","matRipple","","class","space-x-2 w-44",3,"click",4,"ngIf"],[1,"w-full","flex","items-center","px-8","space-x-2","mb-4"],["appearance","outline","class","no-subscript w-60",4,"ngIf"],[4,"ngIf"],[1,"flex-1","h-1/2","px-8","w-full","relative","overflow-auto"],["class","w-full","mode","indeterminate",4,"ngIf"],["btn","","matRipple","",1,"space-x-2","w-44",3,"click"],[1,"pl-2"],[1,"text-2xl"],["appearance","outline",1,"no-subscript","w-60"],["placeholder","All Levels","multiple","",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"flex","flex-col-reverse"],["class","text-xs opacity-30",4,"ngIf"],[1,"text-xs","opacity-30"],[1,"opacity-0"],["placeholder","All Levels",3,"ngModelChange","ngModel"],[3,"dateChange"],["btn","","icon","","matRipple","","matTooltip","Refresh List",1,"ml-2","rounded","border","border-base-200",3,"click","disabled"],["btn","","icon","","matRipple","","matTooltip","View Desk QR Codes",1,"bg-secondary","text-secondary-content","rounded","h-12","w-12",3,"click"],["btn","","icon","","matRipple","","matTooltip","Upload Desks CSV",1,"bg-secondary","text-secondary-content","rounded","h-12","w-12"],["type","file",1,"absolute","inset-0","opacity-0",3,"change"],["btn","","icon","","matRipple","","matTooltip","Download Template Desk CSV",1,"bg-secondary","text-secondary-content","rounded","h-12","w-12",3,"click"],["icon","","matRipple","","matTooltip","Desk Restrictions",1,"bg-secondary","text-secondary-content","rounded","h-12","w-12",3,"click"],["mode","indeterminate",1,"w-full"]],template:function(o,n){if(1&o&&(e.nrm(0,"app-topbar",0),e.j41(1,"div",1),e.nrm(2,"app-sidebar"),e.j41(3,"main",2)(4,"div",3)(5,"h2",4),e.EFF(6),e.k0s(),e.nrm(7,"div",5),e.j41(8,"searchbar",6),e.nI1(9,"async"),e.bIt("modelChange",function(l){return n.setFilters({search:l})}),e.k0s(),e.DNE(10,Ut,5,0,"button",7)(11,zt,5,0,"button",7),e.k0s(),e.j41(12,"div",8),e.DNE(13,Ht,5,6,"mat-form-field",9)(14,en,6,8,"mat-form-field",9),e.nrm(15,"div",5),e.DNE(16,tn,6,3,"ng-container",10)(17,nn,14,0,"ng-container",10),e.k0s(),e.j41(18,"div",11),e.nrm(19,"router-outlet"),e.k0s(),e.DNE(20,sn,1,0,"mat-progress-bar",12),e.nI1(21,"async"),e.k0s()()),2&o){let i;e.R7$(6),e.SpI(" ",n.manage?"Desk Management":"Desk Bookings"," "),e.R7$(2),e.Y8G("model",null==(i=e.bMT(9,9,n.filters))?null:i.search),e.R7$(2),e.Y8G("ngIf","manage"!==n.path),e.R7$(),e.Y8G("ngIf","manage"===n.path),e.R7$(2),e.Y8G("ngIf",!n.manage),e.R7$(),e.Y8G("ngIf",n.manage),e.R7$(2),e.Y8G("ngIf","events"===n.path),e.R7$(),e.Y8G("ngIf","manage"===n.path),e.R7$(3),e.Y8G("ngIf",e.bMT(21,11,n.loading)&&"events"===n.path)}},dependencies:[d.Sq,d.bT,u.BC,u.vS,W.o,K.x,Xt.S,Wt.c,C.rl,Y.VO,v.wT,M.oV,A.HM,v.r6,T.R,h.n3,d.Jj,Kt.b],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%;width:100%;background-color:var(--b1)}\n\n/*# sourceMappingURL=new-desks.component.ts-angular-inline--129.css.map*/"]})}return s})(),children:[{path:"events",component:z},{path:"map",component:J},{path:"manage",component:Z},{path:"**",redirectTo:"events"}]},{path:"",component:ze,children:[{path:"events",component:z},{path:"map",component:J},{path:"manage",component:Z},{path:"**",redirectTo:"events"}]}];let an=(()=>{class s{static#e=this.\u0275fac=function(o){return new(o||s)};static#t=this.\u0275mod=e.$C({type:s});static#n=this.\u0275inj=e.G2t({imports:[d.MD,u.YN,I.RI,u.X1,ne.r,R.Rp,f.SG,Gt.cQ,te.Wk,C.RG,B.g7,G.fS,h.iI.forChild(on)]})}return s})()}}]);
//# sourceMappingURL=apps_concierge_src_app_desks_desks_module_ts.js.map