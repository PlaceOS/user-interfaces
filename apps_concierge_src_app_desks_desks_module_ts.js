(self.webpackChunkplaceos=self.webpackChunkplaceos||[]).push([["apps_concierge_src_app_desks_desks_module_ts"],{7198:(e,t,s)=>{"use strict";s.r(t),s.d(t,{DesksModule:()=>fe});var i=s(1511),n=s(6073),o=s(6898),l=s(4810),a=s(787),r=s(2619),d=s(4762),c=s(8512),u=s(7701),g=s(4689),p=s(9996),h=s(7727),f=s(8303),m=s(3530),_=s(205),v=s(8125),Z=s(4441),k=s(2547),b=s(8223),A=s(4554),x=s(9294),w=s(1950),q=s(4608),y=s(3080),T=s(5980),U=s(1548),M=s(2319),O=s(9236),C=s(7789),P=s(7806);function J(e,t){if(1&e&&(r.TgZ(0,"div",22),r.TgZ(1,"div",14),r._uU(2),r.qZA(),r.TgZ(3,"div",15),r._uU(4),r.qZA(),r.TgZ(5,"div",16),r.TgZ(6,"mat-checkbox",23),r.NdJ("ngModelChange",function(e){return t.$implicit.bookable=e}),r.qZA(),r.qZA(),r.TgZ(7,"div",24),r.TgZ(8,"item-list-field",25),r.NdJ("ngModelChange",function(e){return t.$implicit.groups=e}),r.qZA(),r.qZA(),r.qZA()),2&e){const e=t.$implicit;r.xp6(2),r.hij(" ",e.id," "),r.xp6(2),r.Oqu(e.name),r.xp6(2),r.Q6J("ngModel",e.bookable),r.xp6(2),r.Q6J("ngModel",e.groups)}}function j(e,t){if(1&e){const e=r.EpF();r.ynx(0),r.TgZ(1,"main",5),r.TgZ(2,"div",6),r.TgZ(3,"searchbar",7),r.NdJ("modelChange",function(t){return r.CHM(e),r.oxw().filter$.next(t)}),r.ALo(4,"async"),r.qZA(),r._UZ(5,"div",8),r.TgZ(6,"button",9),r._uU(7," Upload List "),r.TgZ(8,"input",10),r.NdJ("change",function(t){return r.CHM(e),r.oxw().upload(t)}),r.qZA(),r.qZA(),r.TgZ(9,"button",11),r.NdJ("click",function(){return r.CHM(e),r.oxw().download()}),r._uU(10," Download List "),r.qZA(),r.qZA(),r.TgZ(11,"div",12),r.TgZ(12,"div",13),r.TgZ(13,"div",14),r._uU(14,"ID"),r.qZA(),r.TgZ(15,"div",15),r._uU(16,"Name"),r.qZA(),r.TgZ(17,"div",16),r._uU(18,"Bookable"),r.qZA(),r.TgZ(19,"div",17),r._uU(20,"Groups"),r.qZA(),r.qZA(),r.TgZ(21,"div",18),r.YNc(22,J,9,4,"div",19),r.ALo(23,"async"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(24,"footer",20),r.TgZ(25,"button",21),r.NdJ("click",function(){return r.CHM(e),r.oxw().save()}),r._uU(26,"Save"),r.qZA(),r.qZA(),r.BQk()}if(2&e){const e=r.oxw();r.xp6(3),r.Q6J("model",r.lcZ(4,2,e.filter$)),r.xp6(19),r.Q6J("ngForOf",r.lcZ(23,4,e.desk_list))}}function D(e,t){if(1&e&&(r.TgZ(0,"main",26),r._UZ(1,"mat-spinner",27),r.TgZ(2,"p"),r._uU(3),r.qZA(),r.qZA()),2&e){const e=r.oxw();r.xp6(1),r.Q6J("diameter",48),r.xp6(2),r.Oqu(e.loading)}}let L=(()=>{class e{constructor(e,t){this._data=e,this._dialog_ref=t,this.building=this._data.building,this.level=this._data.level,this.desks$=new c.X(this._data.desks),this.filter$=new c.X(""),this.desk_list=(0,y.aj)([this.filter$,this.desks$]).pipe((0,p.U)(e=>{const[t,s]=e;return s.filter(e=>e.name.toLowerCase().includes(t.toLowerCase())||e.id.toLowerCase().includes(t.toLowerCase()))}))}download(){const e=this.desks$.getValue().map(e=>e.format()),t=(0,b.o3)(e),s=this.level.display_name.split(" ").join("-").toLowerCase();(0,b.Sv)(`desks_${s}.csv`,t)}upload(e){if(e.target){const t=e.target.files[0];if(t){this.loading="Uploading...";const e=new FileReader;e.readAsText(t,"UTF-8"),e.onload=()=>{this.processCSV(e.result),this.loading=""},e.onerror=e=>{this.loading="",(0,b.cB)("Error reading file.")}}}}save(){return(0,d.mG)(this,void 0,void 0,function*(){this.loading="Saving changes to desks...",yield(0,A.Ymr)(this.level.id,{name:"desks",description:"desks",details:this.desks$.getValue()}).toPromise().catch(e=>{throw this.loading="",(0,b.cB)(`Error saving desk data. Error: ${e.message||e}`),e}),(0,b.t5)("Successfully updated desks"),this.loading="",this._dialog_ref.close()})}processCSV(e){const t=(0,b.n5)(e);this.desks$.next(t.map(e=>new x.nk(e))),(0,b.t5)("Upload was sucessful. Click Save Button to save the changes")}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(q.WI),r.Y36(q.so))},e.\u0275cmp=r.Xpm({type:e,selectors:[["desk-list-modal"]],decls:11,vars:4,consts:[[1,"flex","items-center"],[2,"margin-right","1rem"],["mat-icon-button","","mat-dialog-close",""],[4,"ngIf","ngIfElse"],["load_state",""],[1,"flex","flex-col"],[1,"flex","items-center","p-2","space-x-2","w-full","border-b","border-gray-300"],[3,"model","modelChange"],[1,"flex-1","w-0"],["mat-button","",1,"relative"],["type","file",1,"absolute","inset-0","opacity-0",3,"change"],["mat-button","",3,"click"],[1,"flex","flex-col","flex-1","w-full"],[1,"flex","items-center","p-2","border-b","border-gray-300","font-medium"],["flex","",1,"w-40","p-1","flex-1"],[1,"w-32","p-1"],[1,"w-24","p-1"],[1,"w-52","p-1"],["table","",1,"flex-1","overflow-auto"],["class","flex item-center p-2 border-b border-gray-200",4,"ngFor","ngForOf"],[1,"flex","items-center","justify-center","space-x-2","p-2","border-t","border-gray-300"],["mat-button","",1,"w-32",3,"click"],[1,"flex","item-center","p-2","border-b","border-gray-200"],[3,"ngModel","ngModelChange"],[1,"w-52"],["hide-outline","","no-wrapper","",3,"ngModel","ngModelChange"],[1,"w-64","h-48","mx-auto","flex","flex-col","items-center","justify-center"],[1,"m-4",3,"diameter"]],template:function(e,t){if(1&e&&(r.TgZ(0,"header",0),r.TgZ(1,"h2",1),r.TgZ(2,"strong"),r._uU(3,"List of Desks"),r.qZA(),r._uU(4),r.qZA(),r.TgZ(5,"button",2),r.TgZ(6,"app-icon"),r._uU(7,"close"),r.qZA(),r.qZA(),r.qZA(),r.YNc(8,j,27,6,"ng-container",3),r.YNc(9,D,4,2,"ng-template",null,4,r.W1O)),2&e){const e=r.MAs(10);r.xp6(4),r.AsE(" - ",t.building.display_name||t.building.name,", ",t.level.display_name||t.level.name," "),r.xp6(4),r.Q6J("ngIf",!t.loading)("ngIfElse",e)}},directives:[T.lW,q.ZT,U.o,i.O5,M.U,i.sg,O.oG,n.JJ,n.On,C.q9,P.$g],pipes:[i.Ov],styles:["main[_ngcontent-%COMP%]{max-height:65vh}[table][_ngcontent-%COMP%]{height:1px;max-height:50vh}"]}),e})(),F=(()=>{class e extends b.KG{constructor(e,t){super(),this._org=e,this._dialog=t,this._filters=new c.X({}),this._desk_bookings=[],this._desks=[],this._loading=new c.X(!1),this.loading=this._loading.asObservable(),this.filters=this._filters.asObservable(),this.desks=this._filters.pipe((0,u.b)(500),(0,g.w)(e=>{var t;const s=e.zones||[];return s.includes("All")?(0,A.BW_)(null===(t=this._org.building)||void 0===t?void 0:t.id,{name:"desks"}).pipe((0,p.U)(e=>e.map(e=>e.metadata.desks.details).reduce((e,t)=>[...e,...t],[]))):(0,A.rlq)(s[0],{name:"desks"}).pipe((0,p.U)(e=>e.details))}),(0,h.K)(e=>[]),(0,p.U)(e=>(e instanceof Array||(e=[]),e.sort((e,t)=>e.name.localeCompare(t.name)),this._desks=e.map(e=>new x.nk(e)),this._desks)),(0,f.d)()),this.bookings=this._filters.pipe((0,u.b)(500),(0,g.w)(e=>{this._loading.next(!0);const t=e.date?new Date(e.date):new Date;let s=(e.zones||[]).filter(e=>-1!==e&&"-1"!==e&&"All"!==e);return(null==s?void 0:s.length)||(s=this._org.levelsForBuilding(this._org.building).map(e=>e.id)),(0,k.F2)({period_start:Math.floor((0,_.Z)(t).valueOf()/1e3),period_end:Math.floor((0,v.Z)(t).valueOf()/1e3),type:"desk",zones:(s||[]).join(",")})}),(0,p.U)(e=>(e.sort((e,t)=>e.date-t.date),this._desk_bookings=e,this._loading.next(!1),e)),(0,f.d)())}setFilters(e){var t,s,i;(null===(t=e.zones)||void 0===t?void 0:t.includes("All"))?e.zones=["All",...this._org.levelsForBuilding(this._org.building).map(e=>e.id)]:e.zones&&(null===(i=null===(s=this._filters.getValue())||void 0===s?void 0:s.zones)||void 0===i?void 0:i.includes("All"))&&(e.zones=[]),console.warn("Zones:",e.zones),this._filters.next(Object.assign(Object.assign({},this._filters.getValue()),e))}startPolling(e=3e4){this.interval("poll",()=>this.setFilters(this._filters.getValue()),e)}stopPolling(){this.clearInterval("poll")}checkinDesk(e){return(0,d.mG)(this,void 0,void 0,function*(){"failed"===(yield(0,k.FD)(e.id,!0).toPromise().catch(e=>"failed"))?(0,b.cB)("Error checking in desk booking"):(0,b.t5)(`Checked in ${e.user_name}.`)})}approveDesk(e){return(0,d.mG)(this,void 0,void 0,function*(){"failed"===(yield(0,k.jT)(e.id).toPromise().catch(e=>"failed"))?(0,b.cB)("Error approving in desk booking"):(0,b.t5)(`Approved desk booking for ${e.user_name} on ${(0,Z.Z)(e.date,"MMM Do")}.`)})}rejectDesk(e){return(0,d.mG)(this,void 0,void 0,function*(){"failed"===(yield(0,k.FP)(e.id).toPromise().catch(e=>"failed"))?(0,b.cB)("Error rejecting in desk booking"):(0,b.t5)(`Rejected desk booking for ${e.user_name} on ${(0,Z.Z)(e.date,"MMM Do")}.`)})}giveAccess(e){return(0,d.mG)(this,void 0,void 0,function*(){const t=yield(0,k.km)(new k.$N(Object.assign(Object.assign({},e),{access:!0}))).toPromise().catch(e=>"failed");if("failed"===t)return(0,b.cB)("Error giving building access booking host");(0,b.t5)(`Successfully gave building access to ${e.user_name} for desk booking.`),this._desk_bookings=[...this._desk_bookings,t]})}rejectAllDesks(){return(0,d.mG)(this,void 0,void 0,function*(){const e=this._desk_bookings||[];if(e.length>0){const t=this._dialog.open(w.z5,{data:{title:"Cancel all desk bookings",content:"Are you sure you want to cancel all bookings for the selected date?",icon:{type:"icon",class:"material-icons",content:"delete"}}});return new Promise((s,i)=>(0,d.mG)(this,void 0,void 0,function*(){let n=!1;t.componentInstance.event.pipe((0,m.P)(e=>"done"===e.reason)).subscribe(()=>(0,d.mG)(this,void 0,void 0,function*(){t.componentInstance.loading="Rejecting all desks for selected date...",n=!0,yield Promise.all(e.map(e=>(0,k.FP)(e.id).toPromise())),s(""),(0,b.t5)("Successfull rejected all desk bookings for selected date."),t.close()})),yield t.afterClosed().toPromise(),n||i()}))}(0,b.QD)("No desks to reject for the selected date")})}updateDesks(){return(0,d.mG)(this,void 0,void 0,function*(){const e=this._dialog.open(L,{data:{level:this._org.levelWithID(this._filters.getValue().zones)||this._org.level_list[0],building:this._org.building,desks:this._desks}});yield e.afterClosed().toPromise(),this._desks=e.componentInstance.desks$.getValue()})}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(x.w7),r.LFG(q.uw))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var z=s(1490),N=s(611),I=s(6283),Y=s(4786),Q=s(1522),G=s(1521);function $(e,t){if(1&e&&(r.TgZ(0,"mat-option",7),r._uU(1),r.qZA()),2&e){const e=t.$implicit;r.Q6J("value",e.id),r.xp6(1),r.hij(" ",e.display_name||e.name," ")}}const E=function(){return["/desks"]},B=function(e){return{show_map:e}};function S(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"a",8),r.NdJ("click",function(){return r.CHM(e),r.oxw().toggleMapShow()}),r.ALo(1,"async"),r._uU(2),r.ALo(3,"async"),r.qZA()}if(2&e){const e=r.oxw();let t,s;r.Q6J("routerLink",r.DdM(7,E))("queryParams",r.VKq(8,B,!(null!=(t=r.lcZ(1,3,e.filters))&&t.show_map))),r.xp6(2),r.hij(" ",null!=(s=r.lcZ(3,5,e.filters))&&s.show_map?"Show List View":"Show Map View"," ")}}const X=function(){return[]};let V=(()=>{class e extends b.KG{constructor(e,t,s,i){super(),this._desks=e,this._org=t,this._route=s,this._router=i,this.levels=this._org.active_levels,this.filters=this._desks.filters,this.toggleMapShow=()=>{this._desks.setFilters({show_map:!this.show_map}),this.show_map=!this.show_map},this.setDate=e=>this._desks.setFilters({date:e}),this.updateZones=e=>{this._router.navigate([],{relativeTo:this._route,queryParams:{zone_ids:e.join(",")},queryParamsHandling:"merge"}),this._desks.setFilters({zones:e})}}ngOnInit(){return(0,d.mG)(this,void 0,void 0,function*(){yield this._org.initialised.pipe((0,m.P)(e=>e)).toPromise(),this.subscription("route.query",this._route.queryParamMap.subscribe(e=>{if(e.has("zone_ids")){const t=e.get("zone_ids").split(",");if(t.length){const e=this._org.levelWithID(t);if(!e)return;this._org.building=this._org.buildings.find(t=>t.id===e.parent_id),this.updateZones(t)}}e.has("date")&&this.setDate(new Date(+e.get("date"))),e.has("approve")?this.approve(e.get("approve")):e.has("reject")&&this.reject(e.get("reject")),this.show_map=e.has("show_map")&&"true"===e.get("show_map"),this._desks.setFilters({show_map:this.show_map})})),this.subscription("levels",this._org.active_levels.subscribe(e=>(0,d.mG)(this,void 0,void 0,function*(){var t;const s=(null===(t=(yield this.filters.pipe((0,N.q)(1)).toPromise()).zones)||void 0===t?void 0:t.filter(t=>e.find(e=>e.id===t)||"All"===t))||[];!s.length&&e.length&&s.push(e[0].id),this.updateZones(s)})))})}approve(e){return(0,d.mG)(this,void 0,void 0,function*(){const t=yield(0,k.Fo)(e).toPromise();t&&this._desks.approveDesk(t)})}reject(e){return(0,d.mG)(this,void 0,void 0,function*(){const t=yield(0,k.Fo)(e).toPromise();t&&this._desks.rejectDesk(t)})}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(F),r.Y36(x.w7),r.Y36(o.gz),r.Y36(o.F0))},e.\u0275cmp=r.Xpm({type:e,selectors:[["desks-topbar"]],features:[r.qOj],decls:11,vars:10,consts:[["appearance","outline"],["multiple","","placeholder","All Levels",3,"ngModel","ngModelChange"],["value","All"],[3,"value",4,"ngFor","ngForOf"],["button","","mat-button","","queryParamsHandling","merge",3,"routerLink","queryParams","click",4,"ngIf"],[1,"flex-1","w-2"],[3,"dateChange"],[3,"value"],["button","","mat-button","","queryParamsHandling","merge",3,"routerLink","queryParams","click"]],template:function(e,t){1&e&&(r.TgZ(0,"mat-form-field",0),r.TgZ(1,"mat-select",1),r.NdJ("ngModelChange",function(e){return t.updateZones(e)}),r.ALo(2,"async"),r.TgZ(3,"mat-option",2),r._uU(4,"All Levels"),r.qZA(),r.YNc(5,$,2,2,"mat-option",3),r.ALo(6,"async"),r.qZA(),r.qZA(),r.YNc(7,S,4,10,"a",4),r.ALo(8,"async"),r._UZ(9,"div",5),r.TgZ(10,"date-options",6),r.NdJ("dateChange",function(e){return t.setDate(e)}),r.qZA()),2&e&&(r.xp6(1),r.Q6J("ngModel",r.lcZ(2,3,t.filters).zones||r.DdM(9,X)),r.xp6(4),r.Q6J("ngForOf",r.lcZ(6,5,t.levels)),r.xp6(2),r.Q6J("ngIf",1===(null==r.lcZ(8,7,t.filters).zones?null:r.lcZ(8,7,t.filters).zones.length)))},directives:[I.KE,Y.gD,n.JJ,n.On,Q.ey,i.sg,i.O5,G.E,T.zs,o.yS],pipes:[i.Ov],styles:["[_nghost-%COMP%]{display:flex;align-items:center;background-color:#fff;height:5em;padding:0 1em;border-bottom:1px solid #ccc}[_nghost-%COMP%] > *[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-left:.5rem}mat-form-field[_ngcontent-%COMP%]{height:3.25em;width:8em}"]}),e})();var H=s(8055),W=s(9436);let K=(()=>{class e{constructor(e){this._state=e,this.checkin=()=>this.runMethod("checkin",()=>(0,d.mG)(this,void 0,void 0,function*(){return this._state.checkinDesk(this.desk)})),this.approve=()=>this.runMethod("approve",()=>(0,d.mG)(this,void 0,void 0,function*(){return this._state.approveDesk(this.desk)})),this.reject=()=>this.runMethod("reject",()=>(0,d.mG)(this,void 0,void 0,function*(){return this._state.rejectDesk(this.desk)}))}runMethod(e,t){return(0,d.mG)(this,void 0,void 0,function*(){this.loading=e,yield t().catch(e=>null),this.loading=""})}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(F))},e.\u0275cmp=r.Xpm({type:e,selectors:[["desk-details"]],inputs:{desk:"desk"},decls:21,vars:19,consts:[[1,"w-32","p-2","bg"],[1,"w-32","p-2"],[1,"w-24","p-2"],["flex","",1,"p-2","flex-1","truncate"],[1,"w-32","p-2","flex","items-center"],["mat-icon-button","","content","how_to_reg",3,"loading","state","click"],["mat-icon-button","","content","event_available",3,"loading","state","click"],["mat-icon-button","","content","event_busy",3,"loading","state","click"]],template:function(e,t){1&e&&(r.TgZ(0,"div",0),r._uU(1),r.qZA(),r.TgZ(2,"div",1),r._uU(3),r.qZA(),r.TgZ(4,"div",2),r._uU(5),r.ALo(6,"date"),r.qZA(),r.TgZ(7,"div",3),r._uU(8),r.qZA(),r.TgZ(9,"div"),r._uU(10),r.qZA(),r.TgZ(11,"div",1),r._uU(12),r.qZA(),r.TgZ(13,"div",1),r._uU(14),r.qZA(),r.TgZ(15,"div",2),r._uU(16),r.qZA(),r.TgZ(17,"div",4),r.TgZ(18,"action-icon",5),r.NdJ("click",function(){return t.checkin()}),r.qZA(),r.TgZ(19,"action-icon",6),r.NdJ("click",function(){return t.approve()}),r.qZA(),r.TgZ(20,"action-icon",7),r.NdJ("click",function(){return t.reject()}),r.qZA(),r.qZA()),2&e&&(r.xp6(1),r.Oqu(null==t.desk?null:t.desk.user_name),r.xp6(2),r.Oqu(null==t.desk||null==t.desk.extension_data?null:t.desk.extension_data.group),r.xp6(2),r.Oqu(r.xi3(6,16,t.desk.date,"shortTime")),r.xp6(3),r.Oqu(null==t.desk?null:t.desk.description),r.xp6(1),r.Tol("w-24 p-2 capitalize text-red-600 "+(null==t.desk?null:t.desk.status)),r.xp6(1),r.hij(" ",null==t.desk?null:t.desk.status," "),r.xp6(2),r.Oqu(null==t.desk?null:t.desk.approver_name),r.xp6(2),r.Oqu(null!=t.desk&&t.desk.checked_in?"Yes":"No"),r.xp6(2),r.Oqu(null!=t.desk&&t.desk.access?"Yes":"No"),r.xp6(2),r.Q6J("loading","checkin"===t.loading)("state",null!=t.desk&&t.desk.checked_in?"success":""),r.xp6(1),r.Q6J("loading","approve"===t.loading)("state",null!=t.desk&&t.desk.approved?"success":""),r.xp6(1),r.Q6J("loading","reject"===t.loading)("state","declined"===(null==t.desk?null:t.desk.status)?"success":""))},directives:[W.m],pipes:[i.uU],styles:["[_nghost-%COMP%]{width:100%;display:flex;align-items:center;padding:0 .5rem;background-color:#f8f8f8;border-bottom:1px solid #ccc}[_nghost-%COMP%]:hover{background-color:#f0f0f0}.tentative[_ngcontent-%COMP%]{color:#ffa000!important}.approved[_ngcontent-%COMP%]{color:#388e3c!important}"]}),e})();var R=s(6393),ee=s(7256),te=s(2571),se=s(3881);let ie=(()=>{class e extends b.KG{constructor(e,t,s){super(),this._state=e,this._desk=t,this._desks_state=s,this.url=this._state.map_url,this.styles=this._state.map_styles,this.positions=this._state.map_positions,this.actions=this._state.map_actions,this.features=this._state.map_features,this.setHost=e=>this._desks_state.setOptions({host:e})}ngOnInit(){this.subscription("date",this._desk.filters.subscribe(e=>{this._desks_state.setOptions({date:e.date?new Date(e.date):new Date,zones:e.zones})}))}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(R.ck),r.Y36(F),r.Y36(R.Xp))},e.\u0275cmp=r.Xpm({type:e,selectors:[["desk-map-view"]],features:[r._Bn([R.Xp]),r.qOj],decls:13,vars:19,consts:[["map","",1,"h-full","w-full","relative"],[3,"src","zoom","center","styles","features","actions"],[1,"absolute","bottom-0","right-0"],[1,"absolute","top-0","left-0","p-2","text-black"],["placeholder","User for bookings...",3,"ngModel","ngModelChange"],["info","",1,"absolute","bottom-0","rounded","p-2","m-2","bg-white","shadow","text-center"]],template:function(e,t){1&e&&(r.TgZ(0,"div",0),r._UZ(1,"i-map",1),r.ALo(2,"async"),r.ALo(3,"async"),r.ALo(4,"async"),r.ALo(5,"async"),r.ALo(6,"async"),r.ALo(7,"async"),r._UZ(8,"explore-zoom-controls",2),r.TgZ(9,"div",3),r.TgZ(10,"a-user-search-field",4),r.NdJ("ngModelChange",function(e){return t.setHost(e)}),r.qZA(),r.qZA(),r.TgZ(11,"div",5),r._uU(12," Click/Tap an available desk to book it. "),r.qZA(),r.qZA()),2&e&&(r.xp6(1),r.Q6J("src",r.lcZ(2,7,t.url))("zoom",r.lcZ(3,9,t.positions).zoom)("center",r.lcZ(4,11,t.positions).center)("styles",r.lcZ(5,13,t.styles))("features",r.lcZ(6,15,t.features))("actions",r.lcZ(7,17,t.actions)),r.xp6(9),r.Q6J("ngModel",null))},directives:[ee.p,te.s,se.d,n.JJ,n.On],pipes:[i.Ov],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;position:relative;height:100%;width:100%}[info][_ngcontent-%COMP%]{left:50%;transform:translateX(-50%)}"]}),e})();function ne(e,t){if(1&e&&(r.TgZ(0,"button",18),r.TgZ(1,"app-icon"),r._uU(2,"more_vert"),r.qZA(),r.qZA()),2&e){r.oxw(2);const e=r.MAs(5);r.Q6J("matMenuTriggerFor",e)}}function oe(e,t){1&e&&r._UZ(0,"desk-details",20),2&e&&r.Q6J("desk",t.$implicit)}function le(e,t){if(1&e&&(r.ynx(0),r.YNc(1,oe,1,1,"desk-details",19),r.ALo(2,"async"),r.BQk()),2&e){const e=r.oxw(2);r.xp6(1),r.Q6J("ngForOf",r.lcZ(2,1,e.bookings))}}function ae(e,t){if(1&e&&(r.ynx(0),r.TgZ(1,"div",7),r._UZ(2,"div",8),r.TgZ(3,"div",9),r._uU(4),r.ALo(5,"async"),r.qZA(),r.TgZ(6,"div",10),r._uU(7),r.ALo(8,"async"),r.ALo(9,"async"),r.qZA(),r.YNc(10,ne,3,1,"button",11),r.ALo(11,"async"),r.qZA(),r.TgZ(12,"div",12),r.TgZ(13,"div",13),r.TgZ(14,"div",14),r._uU(15,"Person"),r.qZA(),r.TgZ(16,"div",14),r._uU(17,"Group"),r.qZA(),r.TgZ(18,"div",15),r._uU(19,"Date"),r.qZA(),r.TgZ(20,"div",16),r._uU(21,"Desk"),r.qZA(),r.TgZ(22,"div",15),r._uU(23,"Status"),r.qZA(),r.TgZ(24,"div",14),r._uU(25,"Approver"),r.qZA(),r.TgZ(26,"div",14),r._uU(27,"Checked In"),r.qZA(),r.TgZ(28,"div",15),r._uU(29,"Access"),r.qZA(),r._UZ(30,"div",14),r.qZA(),r.TgZ(31,"div",17),r.YNc(32,le,3,3,"ng-container",0),r.ALo(33,"async"),r.qZA(),r.qZA(),r.BQk()),2&e){const e=r.oxw(),t=r.MAs(3);let s,i,n;r.xp6(4),r.hij(" Requests: ",(null==(s=r.lcZ(5,5,e.bookings))?null:s.length)||"0"," "),r.xp6(3),r.hij(" Free Desks: ",((null==(i=r.lcZ(8,7,e.desks))?null:i.length)||0)-((null==(i=r.lcZ(9,9,e.bookings))?null:i.length)||0)," "),r.xp6(3),r.Q6J("ngIf",null==r.lcZ(11,11,e.filters).zones?null:r.lcZ(11,11,e.filters).zones.length),r.xp6(22),r.Q6J("ngIf",null==(n=r.lcZ(33,13,e.bookings))?null:n.length)("ngIfElse",t)}}function re(e,t){1&e&&(r.TgZ(0,"div",21),r.TgZ(1,"p",22),r._uU(2," There are no desks for the currently selected date. "),r.qZA(),r.qZA())}function de(e,t){1&e&&(r.TgZ(0,"div",23),r._UZ(1,"desk-map-view"),r.qZA())}let ce=(()=>{class e{constructor(e){this._state=e,this.filters=this._state.filters,this.desks=this._state.desks.pipe((0,p.U)(e=>e.filter(e=>e.bookable))),this.bookings=this._state.bookings,this.rejectAll=()=>this._state.rejectAllDesks(),this.updateDesks=()=>this._state.updateDesks()}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(F))},e.\u0275cmp=r.Xpm({type:e,selectors:[["desk-listings"]],decls:20,vars:4,consts:[[4,"ngIf","ngIfElse"],["empty_state",""],["menu","matMenu"],["mat-menu-item","",3,"click"],[1,"flex","items-center"],[1,"pl-2"],["map_state",""],["details","",1,"w-full","bg-gray-900","text-white","flex","items-center","px-2"],[1,"flex-1","w-0"],[1,"p-2"],[1,"px-8"],["mat-icon-button","",3,"matMenuTriggerFor",4,"ngIf"],[1,"w-full","flex","flex-col","flex-1","text-sm","h-1/2"],[1,"w-full","flex","items-center","bg-white","border-b","border-gray-500","p-2","font-medium"],[1,"w-32","p-2"],[1,"w-24","p-2"],["flex","",1,"p-2","flex-1"],[1,"w-full","flex-1","overflow-auto","h-1/2"],["mat-icon-button","",3,"matMenuTriggerFor"],[3,"desk",4,"ngFor","ngForOf"],[3,"desk"],[1,"h-full","w-full","flex","items-center","justify-center"],[1,"p-8"],[1,"absolute","inset-0"]],template:function(e,t){if(1&e&&(r.YNc(0,ae,34,15,"ng-container",0),r.ALo(1,"async"),r.YNc(2,re,3,0,"ng-template",null,1,r.W1O),r.TgZ(4,"mat-menu",null,2),r.TgZ(6,"button",3),r.NdJ("click",function(){return t.updateDesks()}),r.TgZ(7,"div",4),r.TgZ(8,"app-icon"),r._uU(9,"edit"),r.qZA(),r.TgZ(10,"span",5),r._uU(11,"Edit Desks"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(12,"button",3),r.NdJ("click",function(){return t.rejectAll()}),r.TgZ(13,"div",4),r.TgZ(14,"app-icon"),r._uU(15,"event_busy"),r.qZA(),r.TgZ(16,"span",5),r._uU(17,"Reject All"),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.YNc(18,de,2,0,"ng-template",null,6,r.W1O)),2&e){const e=r.MAs(19);let s;r.Q6J("ngIf",!(null!=(s=r.lcZ(1,2,t.filters))&&s.show_map))("ngIfElse",e)}},directives:[i.O5,H.VK,H.OP,U.o,T.lW,H.p6,i.sg,K,ie],pipes:[i.Ov],styles:["[_nghost-%COMP%]{position:relative;display:flex;flex-direction:column;height:100%;width:100%;overflow:hidden}[details][_ngcontent-%COMP%]{height:3.5rem}[flex][_ngcontent-%COMP%]{min-width:8rem}"]}),e})();var ue=s(5994);const ge=["app-desks",""];function pe(e,t){1&e&&r._UZ(0,"mat-progress-bar",4)}const he=[{path:"",component:(()=>{class e{constructor(e){this._state=e,this.loading=this._state.loading}ngOnInit(){this._state.startPolling()}ngOnDestroy(){this._state.stopPolling()}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(F))},e.\u0275cmp=r.Xpm({type:e,selectors:[["","app-desks",""]],attrs:ge,decls:6,vars:3,consts:[[1,"relative","overflow-hidden","flex-1","flex","flex-col"],[1,"w-full"],[1,"w-full","flex-1","h-0"],["class","w-full","mode","indeterminate",4,"ngIf"],["mode","indeterminate",1,"w-full"]],template:function(e,t){1&e&&(r._UZ(0,"sidebar"),r.TgZ(1,"main",0),r._UZ(2,"desks-topbar",1),r._UZ(3,"desk-listings",2),r.YNc(4,pe,1,0,"mat-progress-bar",3),r.ALo(5,"async"),r.qZA()),2&e&&(r.xp6(4),r.Q6J("ngIf",r.lcZ(5,1,t.loading)))},directives:[z.k,V,ce,i.O5,ue.pW],pipes:[i.Ov],styles:["[_nghost-%COMP%]{display:flex;height:100%;width:100%;background:var(--bg)}"]}),e})()}];let fe=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({imports:[[i.ez,n.u5,n.UX,a.v,R.P2,l.Fk,o.Bz.forChild(he)]]}),e})()}}]);
//# sourceMappingURL=apps_concierge_src_app_desks_desks_module_ts.js.map