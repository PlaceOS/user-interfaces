(self.webpackChunkplaceos=self.webpackChunkplaceos||[]).push([["apps_concierge_src_app_points_points_module_ts"],{7958:(e,t,n)=>{"use strict";n.r(t),n.d(t,{PointsModule:()=>R});var o=n(1511),i=n(6073),r=n(33),s=n(5109),c=n(6898),a=n(787),l=n(2619),u=n(1354),p=n(1548);function d(e,t){if(1&e&&(l.TgZ(0,"span",5),l._uU(1),l.qZA()),2&e){const e=t.data;l.xp6(1),l.Oqu(e)}}function g(e,t){if(1&e&&(l.TgZ(0,"span",6),l._uU(1),l.ALo(2,"currency"),l.qZA()),2&e){const e=t.data;l.xp6(1),l.hij(" ",l.lcZ(2,1,e/100)," per hour ")}}function m(e,t){if(1&e&&(l.TgZ(0,"div",7),l.TgZ(1,"app-icon",8),l._uU(2),l.qZA(),l.qZA()),2&e){const e=t.data;l.xp6(1),l.ekj("text-success",e)("text-error",!e),l.xp6(1),l.hij(" ",e?"check_circle":"cancel"," ")}}function f(e,t){if(1&e&&(l.TgZ(0,"div",9),l._uU(1),l.qZA()),2&e){const e=t.data;l.xp6(1),l.hij("",e,"%")}}const Z=function(){return["name","type","unit_price","accept_points","discount_cap"]},_=function(){return["Name","Type","Unit Price","Accepts Points","Discount %"]},h=function(){return["flex"]},v=function(e,t,n,o){return{type:e,unit_price:t,accept_points:n,discount_cap:o}};let A=(()=>{class e{constructor(){this.asset_list=[{id:"1",name:"Meeting Room 1.01",type:"space",unit_price:3e3,accept_points:!1,discount_cap:99,custom_rates:[]},{id:"2",name:"Meeting Room 1.02",type:"space",unit_price:2800,accept_points:!0,discount_cap:30,custom_rates:[]}]}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=l.Xpm({type:e,selectors:[["points-assets"]],decls:9,vars:13,consts:[["empty","No priced assets",1,"w-full","h-full",3,"dataSource","columns","display_column","column_size","template"],["type_template",""],["price_template",""],["accept_template",""],["discount_template",""],[1,"p-2","bg-gray-200","rounded","capitalize"],[1,"text-xs"],[1,"flex","justify-center","h-px"],[1,"text-2xl"],[1,"text-right","px-4"]],template:function(e,t){if(1&e&&(l._UZ(0,"custom-table",0),l.YNc(1,d,2,1,"ng-template",null,1,l.W1O),l.YNc(3,g,3,3,"ng-template",null,2,l.W1O),l.YNc(5,m,3,5,"ng-template",null,3,l.W1O),l.YNc(7,f,2,1,"ng-template",null,4,l.W1O)),2&e){const e=l.MAs(2),n=l.MAs(4),o=l.MAs(6),i=l.MAs(8);l.Q6J("dataSource",t.asset_list)("columns",l.DdM(5,Z))("display_column",l.DdM(6,_))("column_size",l.DdM(7,h))("template",l.l5B(8,v,e,n,o,i))}},directives:[u.C,p.o],pipes:[o.H9],styles:["[_nghost-%COMP%]{height:100%;width:100%;overflow-x:auto;overflow-y:hidden}"]}),e})();var x=n(5135),w=n(6828);let b=(()=>{class e{constructor(){this.points={value:.1,desk_checkin:2,room_checkin:2,booking_cancel:3,wellness_card:1}}ngOnInit(){this.loadPoints()}renderPrice(e=0){return`$${null==e?void 0:e.toFixed(2)}`}loadPoints(){this.points=Object.assign(Object.assign({},this.points),JSON.parse(localStorage.getItem("PLACEOS.point_details")||"{}"))}storePoints(){localStorage.setItem("PLACEOS.point_details",JSON.stringify(this.points))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=l.Xpm({type:e,selectors:[["points-overview"]],decls:31,vars:7,consts:[[1,"p-2","bg-secondary","text-white","w-full","font-medium","text-lg"],[1,"bg-white","w-full"],[1,"p-2","underline","font-medium","text-lg"],[1,"flex","items-center","space-x-2","p-2","mb-4"],[1,"bg-white","rounded","border","border-gray-200",3,"step","ngModel","render_fn","ngModelChange"],["matTooltip","Set point redemption caps on menu items"],[1,"bg-white","w-full","flex-1"],[1,"p-4"],[1,"flex","items-center","space-x-2","p-2","border-b","border-gray-200"],[1,"bg-white","rounded","border","border-gray-200",3,"ngModel","ngModelChange"],[1,"flex","items-center","space-x-2","p-2"]],template:function(e,t){1&e&&(l.TgZ(0,"h2",0),l._uU(1," Point Overview "),l.qZA(),l.TgZ(2,"section",1),l.TgZ(3,"h2",2),l._uU(4,"Point Value"),l.qZA(),l.TgZ(5,"div",3),l.TgZ(6,"span"),l._uU(7,"1 point ="),l.qZA(),l.TgZ(8,"a-counter",4),l.NdJ("ngModelChange",function(e){return t.points.value=e})("ngModelChange",function(){return t.storePoints()}),l.qZA(),l.TgZ(9,"app-icon",5),l._uU(10," info "),l.qZA(),l.qZA(),l.qZA(),l.TgZ(11,"section",6),l.TgZ(12,"h2",2),l._uU(13,"Automatic Rewards"),l.qZA(),l.TgZ(14,"div",7),l.TgZ(15,"div",8),l.TgZ(16,"a-counter",9),l.NdJ("ngModelChange",function(e){return t.points.desk_checkin=e})("ngModelChange",function(){return t.storePoints()}),l.qZA(),l.TgZ(17,"span"),l._uU(18,"Points for desk check-in"),l.qZA(),l.qZA(),l.TgZ(19,"div",8),l.TgZ(20,"a-counter",9),l.NdJ("ngModelChange",function(e){return t.points.room_checkin=e})("ngModelChange",function(){return t.storePoints()}),l.qZA(),l.TgZ(21,"span"),l._uU(22,"Points for room check-in"),l.qZA(),l.qZA(),l.TgZ(23,"div",8),l.TgZ(24,"a-counter",9),l.NdJ("ngModelChange",function(e){return t.points.booking_cancel=e})("ngModelChange",function(){return t.storePoints()}),l.qZA(),l.TgZ(25,"span"),l._uU(26,"Points for booking cancellation with 24 hour notice"),l.qZA(),l.qZA(),l.TgZ(27,"div",10),l.TgZ(28,"a-counter",9),l.NdJ("ngModelChange",function(e){return t.points.wellness_card=e})("ngModelChange",function(){return t.storePoints()}),l.qZA(),l.TgZ(29,"span"),l._uU(30,"Points for completing wellness card"),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&e&&(l.xp6(8),l.Q6J("step",.1)("ngModel",t.points.value)("render_fn",t.renderPrice),l.xp6(8),l.Q6J("ngModel",t.points.desk_checkin),l.xp6(4),l.Q6J("ngModel",t.points.room_checkin),l.xp6(4),l.Q6J("ngModel",t.points.booking_cancel),l.xp6(4),l.Q6J("ngModel",t.points.wellness_card))},directives:[x.R,i.JJ,i.On,p.o,w.gM],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column}"]}),e})();var T=n(8223),q=n(5980),y=n(4608),M=n(9236);function P(e,t){if(1&e&&(l.TgZ(0,"main",4),l.TgZ(1,"section",5),l.TgZ(2,"div",6),l.TgZ(3,"label",7),l._uU(4,"Standard hourly rate"),l.qZA(),l._UZ(5,"a-counter",8),l.qZA(),l.TgZ(6,"div",9),l.TgZ(7,"h2"),l._uU(8,"Rate Rules"),l.qZA(),l._UZ(9,"div"),l.qZA(),l.qZA(),l.TgZ(10,"section",10),l.TgZ(11,"div",6),l.TgZ(12,"label"),l._uU(13,"Accept Points?"),l.qZA(),l._UZ(14,"mat-checkbox",11),l.qZA(),l.TgZ(15,"div",6),l.TgZ(16,"label",7),l._uU(17,"Discount Cap"),l.qZA(),l._UZ(18,"a-counter",12),l.qZA(),l.qZA(),l.qZA()),2&e){const e=l.oxw();l.Q6J("formGroup",e.form),l.xp6(5),l.Q6J("min",500)("max",8e4)("step",500)("render_fn",e.renderPrice),l.xp6(13),l.Q6J("min",0)("max",100)("step",5)("render_fn",e.renderPercent)}}let C=(()=>{class e{renderPrice(e=0){var t;return`$${null===(t=e/100)||void 0===t?void 0:t.toFixed(2)}`}renderPercent(e=0){return`${e}%`}ngOnInit(){this.form=new i.cw({id:new i.NI(`PA-${(0,T.Iy)(999999999)}`),name:new i.NI(""),type:new i.NI(""),accept_points:new i.NI(!1),discount_cap:new i.NI(50),unit_price:new i.NI(1e3),custom_rates:new i.NI([])})}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=l.Xpm({type:e,selectors:[["points-asset-modal"]],decls:9,vars:1,consts:[["class","min-w-[24rem] overflow-hidden",3,"formGroup",4,"ngIf"],[1,"flex","items-center","justify-center","p-2","space-x-2","border-t","border-gray-200"],["mat-button","","mat-dialog-close","",1,"inverse","flex-1"],["mat-button","",1,"flex-1"],[1,"min-w-[24rem]","overflow-hidden",3,"formGroup"],[1,"p-2"],[1,"flex","items-center"],[1,"flex-1"],["formControlName","unit_price",1,"border","border-gray-200","rounded",3,"min","max","step","render_fn"],[1,""],[1,"border-t","border-gray-200","p-2"],["formControlName","accept_points"],["formControlName","discount_cap",1,"border","border-gray-200","rounded",3,"min","max","step","render_fn"]],template:function(e,t){1&e&&(l.TgZ(0,"header"),l.TgZ(1,"h2"),l._uU(2,"New Points Asset"),l.qZA(),l.qZA(),l.YNc(3,P,19,9,"main",0),l.TgZ(4,"footer",1),l.TgZ(5,"button",2),l._uU(6," Cancel "),l.qZA(),l.TgZ(7,"button",3),l._uU(8,"Save"),l.qZA(),l.qZA()),2&e&&(l.xp6(3),l.Q6J("ngIf",t.form))},directives:[o.O5,q.lW,y.ZT,i.JL,i.sg,x.R,i.JJ,i.u,M.oG],styles:["label[_ngcontent-%COMP%]{width:auto;min-width:0;margin:0 1rem 0 0}"]}),e})();var U=n(1490),k=n(4762),O=n(3530),N=n(9294),J=n(1521);const I=["*"];let S=(()=>{class e extends T.KG{constructor(e){super(),this._org=e}ngOnInit(){return(0,k.mG)(this,void 0,void 0,function*(){yield this._org.initialised.pipe((0,O.P)(e=>e)).toPromise()})}}return e.\u0275fac=function(t){return new(t||e)(l.Y36(N.w7))},e.\u0275cmp=l.Xpm({type:e,selectors:[["points-topbar"]],features:[l.qOj],ngContentSelectors:I,decls:3,vars:0,consts:[[1,"flex-1","w-2"]],template:function(e,t){1&e&&(l.F$t(),l.TgZ(0,"div",0),l.Hsn(1),l.qZA(),l._UZ(2,"date-options"))},directives:[J.E],styles:["[_nghost-%COMP%]{display:flex;align-items:center;background-color:#fff;height:5em;padding:0 1em;border-bottom:1px solid #ccc}[_nghost-%COMP%] > *[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-left:.5rem}mat-form-field[_ngcontent-%COMP%]{height:3.25em;width:8em}"]}),e})();function Q(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"button",6),l.NdJ("click",function(){return l.CHM(e),l.oxw().newAsset()}),l._uU(1,"New Asset"),l.qZA()}}const j=function(){return["/points","overview"]},Y=function(){return["/points","assets"]},L=[{path:"",component:(()=>{class e extends T.KG{constructor(e,t){super(),this._dialog=e,this._router=t}ngOnInit(){this.subscription("route.params",this._router.events.subscribe(()=>{const e=this._router.url.split("/");this.page=e[e.length-1],console.log("URL:",this.page)}));const e=this._router.url.split("/");this.page=e[e.length-1]}newAsset(){this._dialog.open(C)}}return e.\u0275fac=function(t){return new(t||e)(l.Y36(y.uw),l.Y36(c.F0))},e.\u0275cmp=l.Xpm({type:e,selectors:[["placeos-points"]],features:[l.qOj],decls:11,vars:7,consts:[[1,"relative","w-full","flex","flex-col"],[1,"relative","z-10"],["mat-button","",3,"click",4,"ngIf"],["mat-tab-nav-bar",""],["mat-tab-link","",3,"routerLink","active"],[1,"flex-1","w-full","h-1/2","overflow-auto"],["mat-button","",3,"click"]],template:function(e,t){1&e&&(l._UZ(0,"sidebar"),l.TgZ(1,"main",0),l.TgZ(2,"points-topbar",1),l.YNc(3,Q,2,0,"button",2),l.qZA(),l.TgZ(4,"nav",3),l.TgZ(5,"a",4),l._uU(6," Overview "),l.qZA(),l.TgZ(7,"a",4),l._uU(8," Assets "),l.qZA(),l.qZA(),l.TgZ(9,"div",5),l._UZ(10,"router-outlet"),l.qZA(),l.qZA()),2&e&&(l.xp6(3),l.Q6J("ngIf","assets"===t.page),l.xp6(2),l.Q6J("routerLink",l.DdM(5,j))("active","overview"===t.page),l.xp6(2),l.Q6J("routerLink",l.DdM(6,Y))("active","assets"===t.page))},directives:[U.k,S,o.O5,s.BU,c.yS,s.Nj,c.lC,q.lW],styles:["[_nghost-%COMP%]{display:flex;height:100%;width:100%;background:var(--bg)}"]}),e})(),children:[{path:"",redirectTo:"overview"},{path:"assets",component:A},{path:"overview",component:b},{path:"*",redirectTo:"overview"}]}];let R=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l.oAB({type:e}),e.\u0275inj=l.cJS({imports:[[o.ez,i.u5,a.v,s.Nh,r.Hi,c.Bz.forChild(L)]]}),e})()}}]);
//# sourceMappingURL=apps_concierge_src_app_points_points_module_ts.js.map