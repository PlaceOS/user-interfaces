"use strict";(self.webpackChunkworkplace=self.webpackChunkworkplace||[]).push([["apps_workplace_src_app_directory_directory_module_ts"],{2274:(H,u,r)=>{r.r(u),r.d(u,{DirectoryModule:()=>W});var l=r(316),h=r(9805),g=r(3119),d=r(9803),_=r(6109),x=r(1963),v=r(5443),p=r(2768),y=r(8390),e=r(7404),m=r(4456),C=r(7434),I=r(895),U=r(9434),f=r(4950),D=r(7984),G=r(1134),R=r(3574),E=r(5060),F=r(6781);const L=()=>["/explore"],T=s=>({user:s});function $(s,o){if(1&s&&e.nrm(0,"a-user-avatar",9),2&s){const t=e.XpG(2);e.Y8G("user",t.user)}}function j(s,o){if(1&s){const t=e.RV6();e.j41(0,"a",10),e.nI1(1,"safe"),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.sendCallEvent())}),e.EFF(2," Call "),e.k0s()}if(2&s){const t=e.XpG(2);e.Y8G("href",e.i5U(1,1,"tel:"+t.user.phone,"url"),e.B4B)}}function N(s,o){if(1&s){const t=e.RV6();e.j41(0,"div",1),e.DNE(1,$,1,1,"a-user-avatar",2),e.j41(2,"div",3)(3,"div",4),e.EFF(4),e.k0s(),e.j41(5,"a",5),e.nI1(6,"safe"),e.EFF(7),e.k0s()(),e.j41(8,"div",6)(9,"a",7),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.sendLocateEvent())}),e.EFF(10," Locate "),e.k0s(),e.DNE(11,j,3,4,"a",8),e.k0s()()}if(2&s){const t=e.XpG();e.AVh("with-image",t.show_image),e.R7$(),e.Y8G("ngIf",t.show_image),e.R7$(3),e.JRh(t.user.name),e.R7$(),e.Y8G("href",e.i5U(6,9,"mailto:"+t.user.email,"url"),e.B4B),e.R7$(2),e.SpI(" ",t.user.email," "),e.R7$(2),e.Y8G("routerLink",e.lJ4(12,L))("queryParams",e.eq3(13,T,t.user.email)),e.R7$(2),e.Y8G("ngIf",t.user.phone)}}let V=(()=>{class s{get show_image(){return this._settings.get("app.users.show_avatars")}sendLocateEvent(){}sendCallEvent(){}constructor(t){this._settings=t}static#e=this.\u0275fac=function(n){return new(n||s)(e.rXU(p.h$))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["a-directory-user-list-item"]],inputs:{user:"user"},decls:1,vars:1,consts:[["class","flex flex-wrap items-center sm:space-x-4 bg-base-100 hover:bg-base-200 overflow-hidden p-4 mb-2",3,"with-image",4,"ngIf"],[1,"flex","flex-wrap","items-center","sm:space-x-4","bg-base-100","hover:bg-base-200","overflow-hidden","p-4","mb-2"],[3,"user",4,"ngIf"],[1,"flex","flex-col","flex-1","w-1/2","ml-4","sm:ml-0"],[1,"name"],["name","email",1,"text-sm","underline",3,"href"],[1,"flex","w-full","sm:w-auto","sm:flex-col","items-center","space-x-2","sm:space-x-0","sm:space-y-2","mt-4","sm:mt-0"],["btn","","matRipple","","locate","",1,"w-32","flex-1","sm:flex-none",3,"click","routerLink","queryParams"],["btn","","matRipple","","class","w-32 flex-1 sm:flex-nones","call","",3,"href","click",4,"ngIf"],[3,"user"],["btn","","matRipple","","call","",1,"w-32","flex-1","sm:flex-nones",3,"click","href"]],template:function(n,i){1&n&&e.DNE(0,N,12,15,"div",0),2&n&&e.Y8G("ngIf",i.user)},dependencies:[l.bT,h.Wk,R.a,E.r6,F.m]})}return s})();const Y=["a-directory-user-list",""];function M(s,o){1&s&&e.nrm(0,"mat-spinner",10),2&s&&e.Y8G("diameter",32)}function w(s,o){1&s&&e.nrm(0,"a-directory-user-list-item",15),2&s&&e.Y8G("user",o.$implicit)}function B(s,o){if(1&s&&(e.qex(0),e.j41(1,"div",13),e.EFF(2),e.k0s(),e.DNE(3,w,1,1,"a-directory-user-list-item",14),e.bVm()),2&s){const t=e.XpG().$implicit,n=e.XpG(2);e.R7$(2),e.SpI(" ",t," "),e.R7$(),e.Y8G("ngForOf",n.groupedUsers[t])}}function b(s,o){if(1&s&&(e.qex(0),e.DNE(1,B,4,2,"ng-container",12),e.bVm()),2&s){const t=o.$implicit,n=e.XpG(2);e.R7$(),e.Y8G("ngIf",n.groupedUsers[t].length)}}function S(s,o){if(1&s&&(e.qex(0),e.DNE(1,b,2,1,"ng-container",11),e.bVm()),2&s){const t=e.XpG();e.R7$(),e.Y8G("ngForOf",t.letters)}}function X(s,o){if(1&s&&(e.j41(0,"div",16)(1,"app-icon",17),e.EFF(2),e.k0s(),e.j41(3,"div",18),e.EFF(4),e.k0s()()),2&s){const t=e.XpG();e.R7$(2),e.JRh(t.search_str&&t.search_str.length>=t.min_search_length?"close":"arrow_upward"),e.R7$(2),e.SpI(" ",t.search_str&&t.search_str.length>=t.min_search_length?' No matches for "'+t.search_str+'"':"Type above to search for users"," ")}}const O="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");let k=(()=>{class s extends p.Tv{get min_search_length(){const t=this._settings.get("app.users.min_search_length");return"number"==typeof t&&t>=0?t:3}constructor(t){super(),this._settings=t,this.user_list=[],this.groupedUsers={},this.search$=new g.B7,this.search_results$=this.search$.pipe((0,d.B)(400),(0,_.F)(),(0,x.n)(n=>(this.loading=!0,n.length>=this.min_search_length?(0,y.N8)(n).toPromise().catch(()=>[]):Promise.resolve(this.user_list||[]))),(0,v.T)(n=>(this.loading=!1,n)))}ngOnInit(){this.subscription("search_results",this.search_results$.subscribe(t=>{this.user_list=t,this.buildGroups(this.user_list)})),this.search$.next("")}get letters(){return O}buildGroups(t){const n=t.sort((i,a)=>i.name.localeCompare(a.name));for(const i of this.letters)this.groupedUsers[i]=n.filter(a=>a.name.startsWith(i))}static#e=this.\u0275fac=function(n){return new(n||s)(e.rXU(p.h$))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["","a-directory-user-list",""]],features:[e.Vt3],attrs:Y,decls:14,vars:4,consts:[["empty_state",""],[1,"flex-1","flex","sm:flex-row","flex-col-reverse","h-1/2"],[1,"relative","z-0","flex","flex-col","flex-1","h-1/2","sm:h-auto","overflow-hidden"],[1,"w-full","flex","items-center","justify-center","p-2"],["overlay","","appearance","outline",1,"rounded"],["matPrefix","",1,"text-xl"],["matInput","","placeholder","Search for a person...",3,"ngModelChange","ngModel"],["matSuffix","","class","top-2",3,"diameter",4,"ngIf"],[1,"flex-1","h-1/2","w-full"],[4,"ngIf","ngIfElse"],["matSuffix","",1,"top-2",3,"diameter"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"py-2","px-4","font-medium"],[3,"user",4,"ngFor","ngForOf"],[3,"user"],[1,"flex","flex-col","items-center","p-8"],[1,"text-5xl"],[1,"text"]],template:function(n,i){if(1&n){const a=e.RV6();e.nrm(0,"topbar"),e.j41(1,"div",1)(2,"div",2)(3,"div",3)(4,"mat-form-field",4)(5,"app-icon",5),e.EFF(6,"search"),e.k0s(),e.j41(7,"input",6),e.mxI("ngModelChange",function(c){return e.eBV(a),e.DH7(i.search_str,c)||(i.search_str=c),e.Njj(c)}),e.bIt("ngModelChange",function(c){return e.eBV(a),e.Njj(i.search$.next(c))}),e.k0s(),e.DNE(8,M,1,1,"mat-spinner",7),e.k0s()(),e.j41(9,"main",8),e.DNE(10,S,2,1,"ng-container",9),e.k0s()()(),e.nrm(11,"footer-menu"),e.DNE(12,X,5,2,"ng-template",null,0,e.C5r)}if(2&n){const a=e.sdS(13);e.R7$(7),e.R50("ngModel",i.search_str),e.R7$(),e.Y8G("ngIf",i.loading),e.R7$(2),e.Y8G("ngIf",i.groupedUsers&&i.user_list.length)("ngIfElse",a)}},dependencies:[l.Sq,l.bT,m.me,m.BC,m.vS,C.G,I.e,U.R,f.rl,f.JW,f.yw,D.fg,G.LG,V],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%;width:100%;background:#f0f0f0}mat-form-field[_ngcontent-%COMP%]{width:48rem;max-width:calc(100% - 2rem)}\n\n/*# sourceMappingURL=user-list.component.ts-angular-inline--129.css.map*/"]})}return s})();var P=r(6591);const J=[{path:"",component:k}];let W=(()=>{class s{static#e=this.\u0275fac=function(n){return new(n||s)};static#t=this.\u0275mod=e.$C({type:s});static#s=this.\u0275inj=e.G2t({imports:[l.MD,m.YN,h.iI.forChild(J),P.p]})}return s})()}}]);
//# sourceMappingURL=apps_workplace_src_app_directory_directory_module_ts.js.map