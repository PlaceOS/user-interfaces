{"version":3,"file":"default-apps_concierge_src_app_parking_parking-state_service_ts.js","mappings":"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","sources":["./apps/concierge/src/app/parking/parking-booking-modal.component.ts","./apps/concierge/src/app/parking/parking-space-modal.component.ts","./apps/concierge/src/app/parking/parking-state.service.ts","./apps/concierge/src/app/parking/parking-user-modal.component.ts","./libs/bookings/src/index.ts","./libs/bookings/src/lib/desk.service.ts"],"sourcesContent":["import { Component, Inject } from '@angular/core';\nimport { Validators } from '@angular/forms';\nimport { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material/dialog';\nimport { Booking, BookingFormService, ParkingSpace } from '@placeos/bookings';\nimport {\n    AsyncHandler,\n    currentUser,\n    notifyError,\n    notifySuccess,\n    SettingsService,\n} from '@placeos/common';\nimport { BuildingLevel } from '@placeos/organisation';\nimport { User } from '@placeos/users';\nimport { addDays, endOfDay } from 'date-fns';\n\n@Component({\n    selector: 'parking-booking-modal',\n    template: `\n        <div class=\"w-[32rem]\">\n            <header class=\"flex items-center justify-between px-2 w-full\">\n                <h2 class=\"px-2\">\n                    {{ id ? 'Edit' : 'New' }} Parking Reservation\n                </h2>\n                <button *ngIf=\"!loading\" icon matRipple mat-dialog-close>\n                    <app-icon>close</app-icon>\n                </button>\n            </header>\n            <main\n                *ngIf=\"!loading; else load_state\"\n                class=\"p-4 flex flex-col max-h-[65vh] overflow-auto\"\n                [formGroup]=\"form\"\n            >\n                <div class=\"flex items-center space-x-2 mb-4\" *ngIf=\"!user\">\n                    <a-user-search-field\n                        name=\"user\"\n                        formControlName=\"user\"\n                        class=\"flex-1\"\n                    ></a-user-search-field>\n                </div>\n                <div class=\"flex items-center space-x-2\">\n                    <div class=\"flex-1\">\n                        <label for=\"user-name\">Name</label>\n                        <mat-form-field appearance=\"outline\" class=\"w-full\">\n                            <input\n                                matInput\n                                name=\"user-name\"\n                                formControlName=\"user_name\"\n                                placeholder=\"Name\"\n                            />\n                            <mat-error>A name is required</mat-error>\n                        </mat-form-field>\n                    </div>\n                    <div class=\"flex-1\">\n                        <label for=\"email\">Email</label>\n                        <mat-form-field appearance=\"outline\" class=\"w-full\">\n                            <input\n                                matInput\n                                name=\"email\"\n                                formControlName=\"user_email\"\n                                placeholder=\"Email\"\n                            />\n                            <mat-error>An email is required</mat-error>\n                        </mat-form-field>\n                    </div>\n                </div>\n                <div class=\"relative\">\n                    <label for=\"date\">Date</label>\n                    <a-date-field formControlName=\"date\"></a-date-field>\n                    <mat-checkbox\n                        formControlName=\"all_day\"\n                        *ngIf=\"allow_all_day\"\n                        class=\"absolute -top-2 right-0\"\n                        i18n\n                    >\n                        All Day\n                    </mat-checkbox>\n                </div>\n                <div\n                    class=\"flex items-center space-x-2\"\n                    *ngIf=\"!form.value.all_day\"\n                >\n                    <div class=\"flex-1 w-1/3\">\n                        <label for=\"start-time\" i18n\n                            >Start Time<span>*</span></label\n                        >\n                        <a-time-field\n                            name=\"start-time\"\n                            [ngModel]=\"form.value.date\"\n                            (ngModelChange)=\"form.patchValue({ date: $event })\"\n                            [ngModelOptions]=\"{ standalone: true }\"\n                            [disabled]=\"form.controls.date.disabled\"\n                            [use_24hr]=\"use_24hr\"\n                        ></a-time-field>\n                    </div>\n                    <div class=\"flex-1 w-1/3 relative\">\n                        <label for=\"end-time\" i18n\n                            >End Time<span>*</span></label\n                        >\n                        <a-duration-field\n                            name=\"end-time\"\n                            formControlName=\"duration\"\n                            [time]=\"form?.getRawValue()?.date\"\n                            [max]=\"max_duration\"\n                            [use_24hr]=\"use_24hr\"\n                        >\n                        </a-duration-field>\n                    </div>\n                </div>\n                <label for=\"parking-space\">Parking Space</label>\n                <parking-space-list-field\n                    name=\"parking-space\"\n                    formControlName=\"resources\"\n                    class=\"mb-2\"\n                ></parking-space-list-field>\n                <label for=\"plate-number\">\n                    Plate Number<span *ngIf=\"user\">*</span>\n                </label>\n                <mat-form-field appearance=\"outline\" class=\"w-full\">\n                    <input\n                        matInput\n                        name=\"plate-number\"\n                        formControlName=\"plate_number\"\n                        placeholder=\"Plate Number\"\n                    />\n                    <mat-error>A plate number is required</mat-error>\n                </mat-form-field>\n            </main>\n            <footer\n                *ngIf=\"!loading\"\n                class=\"flex items-center justify-end space-x-2 p-2 border-t border-base-200\"\n            >\n                <button btn matRipple class=\"w-32 inverse\" mat-dialog-close>\n                    Cancel\n                </button>\n                <button btn matRipple class=\"w-32\" (click)=\"postForm()\">\n                    Save\n                </button>\n            </footer>\n        </div>\n        <ng-template #load_state>\n            <main\n                class=\"p-8 flex flex-col items-center justify-center user-y-2\"\n            >\n                <mat-spinner diameter=\"32\"></mat-spinner>\n                <p>Saving parking reservation...</p>\n            </main>\n        </ng-template>\n    `,\n    styles: [``],\n})\nexport class ParkingBookingModalComponent extends AsyncHandler {\n    public loading: boolean = false;\n    public readonly user = this._data.user;\n    public readonly date = this._data.date;\n    public readonly allow_time_changes = this._data.allow_time_changes;\n\n    public form = this._booking_form.form;\n\n    public get id() {\n        return this.form.value.id;\n    }\n\n    public get end_date() {\n        return endOfDay(\n            addDays(\n                Date.now(),\n                this._settings.get('app.parking.available_period') || 7,\n            ),\n        );\n    }\n\n    public get max_duration() {\n        return this._settings.get('app.bookings.max_duration') || 480;\n    }\n\n    public get allow_all_day() {\n        return this._settings.get('app.parking.allow_all_day') || true;\n    }\n\n    public get use_24hr() {\n        return this._settings.get('app.use_24_hour_time');\n    }\n\n    constructor(\n        @Inject(MAT_DIALOG_DATA)\n        private _data: {\n            booking: Booking;\n            user?: User;\n            link_id?: string;\n            date?: number;\n            level?: BuildingLevel;\n            space?: ParkingSpace;\n            allow_time_changes?: boolean;\n            external_user?: boolean;\n        },\n        private _booking_form: BookingFormService,\n        private _dialog_ref: MatDialogRef<ParkingBookingModalComponent>,\n        private _settings: SettingsService,\n    ) {\n        super();\n    }\n\n    public ngOnInit() {\n        this._booking_form.newForm(this._data.booking);\n        this._booking_form.setOptions({ type: 'parking' });\n        this.subscription(\n            'user_changes',\n            this.form.controls.user.valueChanges.subscribe((user) => {\n                if (!user) return;\n                this.form.patchValue({\n                    user_name: user.name,\n                    user_email: user.email,\n                    attendees: [user],\n                });\n            }),\n        );\n        this.form.patchValue({\n            booking_type: 'parking',\n            all_day: this._data.booking\n                ? this._data.booking.duration > 12 * 60\n                : true,\n        });\n        if (!this.form.value.user) {\n            this.form.patchValue({\n                user:\n                    (this._data.booking?.attendees[0] as any) || currentUser(),\n            });\n        }\n        if (this._data.user) {\n            this.form.patchValue({\n                user_email: this._data.user.email,\n                user_name: this._data.user.name,\n                attendees: [this._data.user],\n            });\n            this.form.controls.plate_number.setValidators([\n                Validators.required,\n            ]);\n            this.form.controls.user_name.disable();\n            this.form.controls.user_email.disable();\n        }\n        if (this._data.level) {\n            this._booking_form.setOptions({ zone_id: this._data.level.id });\n        }\n        if (this._data.link_id) {\n            this.form.patchValue({ parent_id: this._data.link_id });\n        }\n        if (this._data.space) {\n            this.form.patchValue({ resources: [this._data.space] });\n        }\n        if (this._data.date) {\n            this.timeout(\n                'init_date',\n                () => {\n                    this.form.patchValue({ date: this._data.date });\n                    if (!this._data.allow_time_changes) {\n                        this.form.get('date').disable();\n                        this.form.get('duration').disable();\n                    }\n                },\n                300,\n            );\n            if (!this._data.allow_time_changes) {\n                this.subscription(\n                    'form_change',\n                    this.form.valueChanges.subscribe((v) => {\n                        this.timeout(\n                            'disable_date',\n                            () => {\n                                this.form\n                                    .get('date')\n                                    .disable({ emitEvent: false });\n                                this.form\n                                    .get('duration')\n                                    .disable({ emitEvent: false });\n                            },\n                            50,\n                        );\n                    }),\n                );\n            }\n        }\n    }\n\n    public async postForm() {\n        this.form.markAllAsTouched();\n        this.form.updateValueAndValidity();\n        if (!this.form.valid) return;\n        this.loading = true;\n        const id = this.form.value.id;\n        this.form.patchValue({ user_id: undefined });\n        const result = await this._booking_form.postForm().catch((e) => {\n            this.loading = false;\n            this.form.controls.plate_number.setValidators([]);\n            notifyError(e);\n            throw e;\n        });\n        this.form.controls.plate_number.setValidators([]);\n        notifySuccess(\n            `Successfully ${id ? 'updated' : 'created'} parking reservation`,\n        );\n        this._dialog_ref.close(result.id);\n    }\n}\n","import { Component, EventEmitter, Inject, Input, Output } from '@angular/core';\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\nimport { MatDialogRef, MAT_DIALOG_DATA } from '@angular/material/dialog';\nimport { DialogEvent } from '@placeos/common';\nimport { showStaff, User } from '@placeos/users';\nimport { ParkingSpace } from './parking-state.service';\nimport { showUser } from '@placeos/ts-client';\n\n@Component({\n    selector: 'parking-space-modal',\n    template: `\n        <div class=\"w-[28rem]\">\n            <header class=\"flex items-center justify-between px-2 w-full\">\n                <h2 class=\"px-2\">{{ id ? 'Edit' : 'New' }} Parking Space</h2>\n                <button *ngIf=\"!loading\" icon matRipple mat-dialog-close>\n                    <app-icon>close</app-icon>\n                </button>\n            </header>\n            <main\n                *ngIf=\"!loading; else load_state\"\n                class=\"p-4 flex flex-col\"\n                [formGroup]=\"form\"\n            >\n                <label for=\"name\">Parking Space Name/Bay Number</label>\n                <mat-form-field appearance=\"outline\">\n                    <input matInput name=\"name\" formControlName=\"name\" />\n                    <mat-error>A name is required for parking spaces</mat-error>\n                </mat-form-field>\n                <label for=\"map-id\">Map ID</label>\n                <mat-form-field appearance=\"outline\">\n                    <input matInput name=\"map-id\" formControlName=\"map_id\" />\n                    <mat-error>\n                        A map ID is required for parking spaces\n                    </mat-error>\n                </mat-form-field>\n                <label for=\"user\">Assigned User</label>\n                <div class=\"flex items-center space-x-2 mb-4\">\n                    <a-user-search-field\n                        name=\"user\"\n                        formControlName=\"assigned_user\"\n                        class=\"flex-1\"\n                    ></a-user-search-field>\n                    <button\n                        icon\n                        matRipple\n                        class=\"h-12 w-12 min-w-12 rounded bg-secondary text-secondary-content\"\n                        matTooltip=\"Clear Assigned User\"\n                        (click)=\"\n                            form.patchValue({\n                                assigned_user: null,\n                                assigned_to: null,\n                                assigned_name: null,\n                            })\n                        \"\n                    >\n                        <app-icon className=\"material-symbols-outlined\">\n                            person_cancel\n                        </app-icon>\n                    </button>\n                </div>\n                <label for=\"notes\">Notes</label>\n                <mat-form-field appearance=\"outline\">\n                    <textarea\n                        matInput\n                        name=\"notes\"\n                        formControlName=\"notes\"\n                    ></textarea>\n                </mat-form-field>\n                <!-- <label for=\"map-rotation\">Map Rotation</label>\n                <mat-form-field appearance=\"outline\">\n                    <textarea\n                        matInput\n                        name=\"map-rotation\"\n                        formControlName=\"map_rotation\"\n                    ></textarea>\n                </mat-form-field> -->\n                <div class=\"flex items-center justify-center space-x-2\">\n                    <button btn matRipple class=\"w-32 inverse\" mat-dialog-close>\n                        Cancel\n                    </button>\n                    <button btn matRipple class=\"w-32\" (click)=\"postForm()\">\n                        Save\n                    </button>\n                </div>\n            </main>\n        </div>\n        <ng-template #load_state>\n            <main\n                class=\"p-8 flex flex-col items-center justify-center space-y-2\"\n            >\n                <mat-spinner diameter=\"32\"></mat-spinner>\n                <p>Saving parking space details...</p>\n            </main>\n        </ng-template>\n    `,\n    styles: [``],\n})\nexport class ParkingSpaceModalComponent {\n    @Output() public readonly event = new EventEmitter<DialogEvent>();\n    public loading: boolean;\n\n    public get id() {\n        return this._data?.id || '';\n    }\n\n    public readonly form = new FormGroup({\n        id: new FormControl(''),\n        name: new FormControl('', [Validators.required]),\n        map_id: new FormControl('', [Validators.required]),\n        assigned_user: new FormControl<User>(null),\n        assigned_to: new FormControl(''),\n        assigned_name: new FormControl(''),\n        notes: new FormControl(''),\n        map_rotation: new FormControl(0),\n    });\n\n    constructor(\n        @Inject(MAT_DIALOG_DATA) private _data: ParkingSpace,\n        private _dialog_ref: MatDialogRef<ParkingSpaceModalComponent>,\n    ) {\n        if (_data) this.form.patchValue(_data);\n    }\n\n    public async ngOnInit() {\n        if (this._data.assigned_to) {\n            const user = await showStaff(this._data.assigned_to).toPromise();\n            if (user) {\n                this.form.patchValue({\n                    assigned_user: user,\n                    assigned_to: user.email,\n                    assigned_name: user.name,\n                });\n            }\n        }\n    }\n\n    public postForm() {\n        if (!this.form.valid) return;\n        this.loading = true;\n        const value = { ...this.form.getRawValue() };\n        if (value.assigned_user) {\n            value.assigned_to = value.assigned_user.email;\n            value.assigned_name = value.assigned_user.name;\n            delete value.assigned_user;\n        }\n        this._dialog_ref.disableClose = true;\n        this.event.emit({ reason: 'done', metadata: value });\n    }\n}\n","import { Injectable } from '@angular/core';\nimport { MatDialog } from '@angular/material/dialog';\nimport {\n    approveBooking,\n    approveBookingInstance,\n    Booking,\n    checkinBooking,\n    checkinBookingInstance,\n    queryBookings,\n    RecurrenceDays,\n    rejectBooking,\n    rejectBookingInstance,\n    removeBooking,\n    saveBooking,\n} from '@placeos/bookings';\nimport {\n    AsyncHandler,\n    notifyError,\n    notifySuccess,\n    openConfirmModal,\n    SettingsService,\n    unique,\n} from '@placeos/common';\nimport { OrganisationService } from '@placeos/organisation';\nimport { showMetadata, updateMetadata } from '@placeos/ts-client';\nimport { randomInt } from '@placeos/common';\nimport { endOfDay, format, getUnixTime, startOfDay } from 'date-fns';\nimport { BehaviorSubject, combineLatest, of } from 'rxjs';\nimport {\n    debounceTime,\n    filter,\n    first,\n    map,\n    shareReplay,\n    switchMap,\n    take,\n    tap,\n} from 'rxjs/operators';\nimport { ParkingSpaceModalComponent } from './parking-space-modal.component';\nimport { ParkingUserModalComponent } from './parking-user-modal.component';\nimport { ParkingBookingModalComponent } from './parking-booking-modal.component';\nimport { User } from '@placeos/users';\n\nexport interface ParkingOptions {\n    date: number;\n    search: string;\n    zones: string[];\n}\n\nexport interface ParkingSpace {\n    id: string;\n    map_id: string;\n    name: string;\n    notes: string;\n    assigned_to: string;\n    zone_id?: string;\n}\n\nexport interface ParkingUser {\n    id: string;\n    name: string;\n    email: string;\n    car_model: string;\n    car_colour: string;\n    plate_number: string;\n    phone: string;\n    notes: string;\n    deny: boolean;\n}\n\n@Injectable({\n    providedIn: 'root',\n})\nexport class ParkingStateService extends AsyncHandler {\n    private _poll = new BehaviorSubject<number>(0);\n    private _change = new BehaviorSubject(0);\n    private _options = new BehaviorSubject<ParkingOptions>({\n        date: Date.now(),\n        search: '',\n        zones: [],\n    });\n    private _loading = new BehaviorSubject<string[]>([]);\n    /** List of available parking levels for the current building */\n    public levels = combineLatest([\n        this._org.active_region,\n        this._org.active_building,\n    ]).pipe(\n        map(([_, bld]) => {\n            const levels = this._org.levels.filter((_) =>\n                _.tags.includes('parking'),\n            );\n            if (this._settings.get('app.use_region')) {\n                const blds = this._org.buildingsForRegion();\n                const bld_ids = blds.map((bld) => bld.id);\n                const list = levels.filter((lvl) =>\n                    bld_ids.includes(lvl.parent_id),\n                );\n                list.map((lvl) => ({\n                    ...lvl,\n                    display_name: `${\n                        blds.find((_) => _.id === lvl.parent_id)?.display_name\n                    } - ${lvl.display_name}`,\n                }));\n                return list;\n            }\n            return levels.filter((lvl) => lvl.parent_id === bld.id);\n        }),\n    );\n    /** List of parking spaces for the current building/level */\n    public spaces = combineLatest([\n        this.levels,\n        this._options,\n        this._change,\n    ]).pipe(\n        switchMap(([levels, options]) => {\n            if (!(options.zones[0] || levels[0]?.id)) {\n                return of([] as ParkingSpace[]);\n            }\n            this._loading.next([...this._loading.getValue(), 'spaces']);\n            return showMetadata(\n                options.zones[0] || levels[0]?.id,\n                'parking-spaces',\n            ).pipe(\n                map(\n                    ({ details }) =>\n                        (details instanceof Array ? details : []).map(\n                            (space) =>\n                                ({\n                                    ...space,\n                                    zone_id: options.zones[0] || levels[0]?.id,\n                                }) as ParkingSpace,\n                        ) as ParkingSpace[],\n                ),\n            );\n        }),\n        tap(() =>\n            this._loading.next(\n                this._loading.getValue().filter((_) => _ !== 'spaces'),\n            ),\n        ),\n        shareReplay(1),\n    );\n    /** List of parking spaces for the current building/level */\n    public users = combineLatest([\n        this._org.active_building,\n        this._change,\n    ]).pipe(\n        filter(([bld]) => !!bld?.id),\n        switchMap(([bld]) => {\n            this._loading.next([...this._loading.getValue(), 'users']);\n            return showMetadata(bld.id, 'parking-users');\n        }),\n        map(\n            (metadata) =>\n                (metadata.details instanceof Array\n                    ? metadata.details\n                    : []) as ParkingUser[],\n        ),\n        tap(() =>\n            this._loading.next(\n                this._loading.getValue().filter((_) => _ !== 'users'),\n            ),\n        ),\n        shareReplay(1),\n    );\n    /** List of parking bookings for the current building/level */\n    public bookings = combineLatest([\n        this._org.active_building,\n        this._options,\n        this.users,\n        this._poll,\n        this._change,\n    ]).pipe(\n        debounceTime(500),\n        switchMap(([bld, options, users]) => {\n            this._loading.next([...this._loading.getValue(), 'bookings']);\n            return queryBookings({\n                period_start: getUnixTime(startOfDay(options.date)),\n                period_end: getUnixTime(endOfDay(options.date)),\n                type: 'parking',\n                zones: options.zones?.length\n                    ? options.zones.join(',')\n                    : (this._settings.get('app.use_region')\n                          ? this._org.region?.id\n                          : '') || bld?.id,\n                include_checked_out: true,\n            }).pipe(\n                map((list) => {\n                    for (const booking of list) {\n                        const user = users.find(\n                            (_) =>\n                                _.email.toLowerCase() ===\n                                booking.user_email.toLowerCase(),\n                        );\n                        if (user) {\n                            booking.extension_data.plate_number =\n                                booking.extension_data.plate_number ||\n                                user.plate_number;\n                        }\n                    }\n                    return list;\n                }),\n            );\n        }),\n        tap(() =>\n            this._loading.next(\n                this._loading.getValue().filter((_) => _ !== 'bookings'),\n            ),\n        ),\n        shareReplay(1),\n    );\n\n    public readonly options = this._options.asObservable();\n    public readonly loading = this._loading.asObservable();\n\n    constructor(\n        private _org: OrganisationService,\n        private _dialog: MatDialog,\n        private _settings: SettingsService,\n    ) {\n        super();\n    }\n\n    public setOptions(options: Partial<ParkingOptions>) {\n        this._options.next({ ...this._options.getValue(), ...options });\n    }\n\n    public startPolling(delay = 2 * 60 * 1000) {\n        this._poll.next(Date.now());\n        this.interval('poll', () => this._poll.next(Date.now()), delay);\n        return () => this.stopPolling();\n    }\n\n    public stopPolling() {\n        this.clearInterval('poll');\n    }\n\n    /** Add or update a space in the available list */\n    public async editSpace(space: ParkingSpace = {} as any) {\n        const ref = this._dialog.open(ParkingSpaceModalComponent, {\n            data: space,\n        });\n        const state = await Promise.race([\n            ref.afterClosed().toPromise(),\n            ref.componentInstance.event\n                .pipe(first((_) => _.reason === 'done'))\n                .toPromise(),\n        ]);\n        if (state?.reason !== 'done') return;\n        const zone =\n            this._options.getValue().zones[0] ||\n            space.zone_id ||\n            this._org.levelsForBuilding()[0]?.id;\n        const new_space = {\n            ...state.metadata,\n            zone,\n            id: state.metadata.id || `parking-${zone}.${randomInt(999_999)}`,\n        };\n        const spaces = await this.spaces.pipe(take(1)).toPromise();\n        const idx = spaces.findIndex((_) => _.id === new_space.id);\n        if (space.assigned_to && space.assigned_to !== new_space.assigned_to) {\n            const booking_list = await queryBookings({\n                period_start: getUnixTime(startOfDay(Date.now())),\n                period_end: getUnixTime(endOfDay(Date.now())),\n                type: 'parking',\n                email: new_space.assigned_to,\n                include_checked_out: true,\n            }).toPromise();\n            const filtered = booking_list.filter(\n                (_) => _.asset_id === space.id,\n            );\n            await Promise.all(\n                filtered.map((_) => removeBooking(_.id).toPromise()),\n            );\n        }\n        if (\n            space.assigned_to !== new_space.assigned_to &&\n            new_space.assigned_to\n        ) {\n            await saveBooking(\n                new Booking({\n                    user_id: new_space.assigned_to,\n                    user_email: new_space.assigned_to,\n                    booking_start: getUnixTime(startOfDay(Date.now())),\n                    booking_end: getUnixTime(endOfDay(Date.now())),\n                    type: 'parking',\n                    booking_type: 'parking',\n                    asset_id: new_space.id,\n                    asset_name: new_space.name,\n                    recurrence_type: 'daily',\n                    recurrence_days:\n                        RecurrenceDays.MONDAY |\n                        RecurrenceDays.TUESDAY |\n                        RecurrenceDays.WEDNESDAY |\n                        RecurrenceDays.THURSDAY |\n                        RecurrenceDays.FRIDAY,\n                    zones: unique([\n                        this._org.organisation.id,\n                        this._org.region?.id,\n                        this._org.building?.id,\n                        new_space.zone_id ||\n                            new_space.zone?.id ||\n                            new_space.zone,\n                    ]),\n                    extension_data: {\n                        asset_name: new_space.name,\n                    },\n                }),\n            ).toPromise();\n        }\n        if (idx >= 0) spaces[idx] = new_space;\n        else spaces.push(new_space);\n        const new_space_list = spaces;\n        await updateMetadata(zone, {\n            name: 'parking-spaces',\n            details: new_space_list,\n            description: 'List of available parking spaces',\n        }).toPromise();\n        this._change.next(Date.now());\n        ref.close();\n    }\n\n    /** Remove the given space from the available list */\n    public async removeSpace(space: ParkingSpace) {\n        const state = await openConfirmModal(\n            {\n                title: 'Remove Parking Space',\n                content: `Are you sure you wish to remove the parking space \"${space.name}\"?`,\n                icon: { content: 'delete' },\n            },\n            this._dialog,\n        );\n        if (state?.reason !== 'done') return;\n        state.loading('Removing parking space...');\n        const zone = this._options.getValue().zones[0];\n        const spaces = await this.spaces.pipe(take(1)).toPromise();\n        await updateMetadata(zone, {\n            name: 'parking-spaces',\n            details: spaces.filter((_) => _.id !== space.id),\n            description: 'List of available parking spaces',\n        }).toPromise();\n        state.close();\n    }\n\n    /** Add or update a space in the available list */\n    public async editUser(user?: ParkingUser) {\n        const ref = this._dialog.open(ParkingUserModalComponent, {\n            data: user,\n        });\n        const state = await Promise.race([\n            ref.afterClosed().toPromise(),\n            ref.componentInstance.event\n                .pipe(first((_) => _.reason === 'done'))\n                .toPromise(),\n        ]);\n        if (state?.reason !== 'done') return;\n        const zone = this._org.building.id;\n        const new_user = {\n            ...state.metadata,\n            id: state.metadata.id || `P:USR-${randomInt(999_999)}`,\n        };\n        if ('user' in new_user) delete new_user.user;\n        const users = await this.users.pipe(take(1)).toPromise();\n        const idx = users.findIndex((_) => _.id === new_user.id);\n        if (idx >= 0) users[idx] = new_user;\n        else users.push(new_user);\n        await updateMetadata(zone, {\n            name: 'parking-users',\n            details: users,\n            description: 'List of available parking users',\n        }).toPromise();\n        this._change.next(Date.now());\n        ref.close();\n    }\n\n    /** Remove the given space from the available list */\n    public async removeUser(user: ParkingUser) {\n        const state = await openConfirmModal(\n            {\n                title: 'Remove Parking User',\n                content: `Are you sure you wish to remove the parking user \"${user.name}\"?`,\n                icon: { content: 'delete' },\n            },\n            this._dialog,\n        );\n        if (state?.reason !== 'done') return;\n        state.loading('Removing parking user...');\n        const zone = this._org.building.id;\n        const users = await this.users.pipe(take(1)).toPromise();\n        await updateMetadata(zone, {\n            name: 'parking-users',\n            details: users.filter((_) => _.id !== user.id),\n            description: 'List of available parking users',\n        }).toPromise();\n        state.close();\n        this._change.next(Date.now());\n    }\n\n    public editReservation(\n        reservation?: Booking,\n        {\n            user,\n            link_id,\n            date,\n            space,\n            allow_time_changes,\n            external_user,\n        }: {\n            user?: User;\n            link_id?: string;\n            date?: number;\n            space?: ParkingSpace;\n            allow_time_changes?: boolean;\n            external_user?: boolean;\n        } = {},\n    ) {\n        return new Promise<string>(async (resolve) => {\n            const levels = await this.levels.pipe(take(1)).toPromise();\n            const spaces = await this.spaces.pipe(take(1)).toPromise();\n            if (!space && reservation?.asset_id) {\n                space = spaces.find((_) => _.id === reservation.asset_id);\n            }\n            const ref = this._dialog.open(ParkingBookingModalComponent, {\n                data: {\n                    booking: reservation,\n                    user,\n                    link_id,\n                    date,\n                    level: levels[0],\n                    space,\n                    allow_time_changes,\n                    external_user,\n                },\n            });\n            ref.afterClosed().subscribe((id) => {\n                resolve(id);\n                this._poll.next(Date.now());\n            });\n        });\n    }\n\n    public async setBookingCheckinState(\n        booking: Booking,\n        state: boolean = true,\n    ) {\n        const promise = (\n            booking.instance\n                ? checkinBookingInstance(booking.id, booking.instance, state)\n                : checkinBooking(booking.id, state)\n        )\n            .toPromise()\n            .catch((_) => 'failed');\n        const success = await promise;\n        success === 'failed'\n            ? notifyError('Error setting checkin state of parking booking')\n            : notifySuccess(\n                  `${state ? 'Checked in to' : 'Checked out of'} parking reservation for ${\n                      booking.user_name\n                  } on ${format(booking.date, 'MMM Do')}.`,\n              );\n        if (success !== 'failed') this._change.next(Date.now());\n    }\n\n    public async approveBooking(booking: Booking) {\n        const promise = (\n            booking.instance\n                ? approveBookingInstance(booking.id, booking.instance)\n                : approveBooking(booking.id)\n        )\n            .toPromise()\n            .catch((_) => 'failed');\n        const success = await promise;\n        success === 'failed'\n            ? notifyError('Error approving in parking booking')\n            : notifySuccess(\n                  `Approved parking reservation for ${\n                      booking.user_name\n                  } on ${format(booking.date, 'MMM Do')}.`,\n              );\n        if (success !== 'failed') this._change.next(Date.now());\n    }\n\n    public async rejectBooking(booking: Booking) {\n        const promise = (\n            booking.instance\n                ? rejectBookingInstance(booking.id, booking.instance)\n                : rejectBooking(booking.id)\n        )\n            .toPromise()\n            .catch((_) => 'failed');\n        const success = await promise;\n        success === 'failed'\n            ? notifyError('Error rejecting in parking booking')\n            : notifySuccess(\n                  `Rejected parking reservation for ${\n                      booking.user_name\n                  } on ${format(booking.date, 'MMM dd')}.`,\n              );\n        if (success !== 'failed') this._change.next(Date.now());\n    }\n}\n","import { Component, EventEmitter, Inject, Input, Output } from '@angular/core';\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\nimport { MatDialogRef, MAT_DIALOG_DATA } from '@angular/material/dialog';\nimport { AsyncHandler, DialogEvent } from '@placeos/common';\nimport { User } from '@placeos/users';\nimport { ParkingUser } from './parking-state.service';\n\n@Component({\n    selector: 'parking-user-modal',\n    template: `\n        <div class=\"w-[28rem]\">\n            <header class=\"flex items-center justify-between px-2 w-full\">\n                <h2 class=\"px-2\">{{ id ? 'Edit' : 'New' }} Parking User</h2>\n                <button *ngIf=\"!loading\" icon matRipple mat-dialog-close>\n                    <app-icon>close</app-icon>\n                </button>\n            </header>\n            <main\n                *ngIf=\"!loading; else load_state\"\n                class=\"p-4 flex flex-col max-h-[65vh] overflow-auto\"\n                [formGroup]=\"form\"\n            >\n                <div class=\"flex items-center space-x-2 mb-4\">\n                    <a-user-search-field\n                        name=\"user\"\n                        formControlName=\"user\"\n                        class=\"flex-1\"\n                    ></a-user-search-field>\n                    <button\n                        icon\n                        matRipple\n                        class=\"h-12 w-12 min-w-12 rounded bg-secondary text-secondary-content\"\n                        matTooltip=\"Clear Selected User\"\n                        (click)=\"\n                            form.patchValue({\n                                user: null,\n                                email: null,\n                                name: null,\n                                phone: null,\n                            })\n                        \"\n                    >\n                        <app-icon className=\"material-symbols-outlined\">\n                            person_cancel\n                        </app-icon>\n                    </button>\n                </div>\n                <label for=\"name\">Name</label>\n                <mat-form-field appearance=\"outline\">\n                    <input\n                        matInput\n                        name=\"name\"\n                        formControlName=\"name\"\n                        placeholder=\"Name\"\n                    />\n                    <mat-error>A name is required</mat-error>\n                </mat-form-field>\n                <label for=\"email\">Email</label>\n                <mat-form-field appearance=\"outline\">\n                    <input\n                        matInput\n                        name=\"email\"\n                        formControlName=\"email\"\n                        placeholder=\"Email\"\n                    />\n                    <mat-error>An email is required</mat-error>\n                </mat-form-field>\n                <div class=\"flex items-center space-x-2\">\n                    <div class=\"flex-1 w-1/3\">\n                        <label for=\"plate-number\">Car Number Plate</label>\n                        <mat-form-field appearance=\"outline\" class=\"w-full\">\n                            <input\n                                matInput\n                                name=\"plate-number\"\n                                formControlName=\"plate_number\"\n                                placeholder=\"Car Plate Number\"\n                            />\n                        </mat-form-field>\n                    </div>\n                    <div class=\"flex-1 w-1/3\">\n                        <label for=\"car-color\">Car Colour</label>\n                        <mat-form-field appearance=\"outline\" class=\"w-full\">\n                            <input\n                                matInput\n                                name=\"car-color\"\n                                formControlName=\"car_color\"\n                                placeholder=\"Car Colour\"\n                            />\n                        </mat-form-field>\n                    </div>\n                </div>\n                <label for=\"notes\">Notes</label>\n                <mat-form-field appearance=\"outline\">\n                    <textarea\n                        matInput\n                        name=\"notes\"\n                        formControlName=\"notes\"\n                        placeholder=\"User's Notes\"\n                    ></textarea>\n                </mat-form-field>\n                <div class=\"px-2 pb-2\">\n                    <mat-checkbox\n                        name=\"deny\"\n                        formControlName=\"deny\"\n                        i18n=\"@@deny\"\n                    >\n                        Deny User Parking Access\n                    </mat-checkbox>\n                </div>\n            </main>\n            <footer\n                *ngIf=\"!loading\"\n                class=\"flex items-center justify-end space-x-2 p-2 border-t border-base-200\"\n            >\n                <button btn matRipple class=\"w-32 inverse\" mat-dialog-close>\n                    Cancel\n                </button>\n                <button btn matRipple class=\"w-32\" (click)=\"postForm()\">\n                    Save\n                </button>\n            </footer>\n        </div>\n        <ng-template #load_state>\n            <main\n                class=\"p-8 flex flex-col items-center justify-center user-y-2\"\n            >\n                <mat-spinner diameter=\"32\"></mat-spinner>\n                <p>Saving parking user details...</p>\n            </main>\n        </ng-template>\n    `,\n    styles: [``],\n})\nexport class ParkingUserModalComponent extends AsyncHandler {\n    @Output() public readonly event = new EventEmitter<DialogEvent>();\n    public loading: boolean = false;\n\n    public get id() {\n        return this._data?.id || '';\n    }\n\n    public readonly form = new FormGroup({\n        id: new FormControl(''),\n        user: new FormControl<User>(null),\n        name: new FormControl('', [Validators.required]),\n        email: new FormControl('', [Validators.required]),\n        plate_number: new FormControl(''),\n        car_color: new FormControl(''),\n        notes: new FormControl(''),\n        deny: new FormControl(false),\n    });\n\n    constructor(\n        @Inject(MAT_DIALOG_DATA) private _data: ParkingUser,\n        private _dialog_ref: MatDialogRef<ParkingUserModalComponent>,\n    ) {\n        super();\n        if (_data) this.form.patchValue(_data);\n    }\n\n    public ngOnInit() {\n        this.subscription(\n            'user',\n            this.form.valueChanges.subscribe((value) => {\n                if (value.user) {\n                    this.form.patchValue({\n                        email: value.user.email,\n                        name: value.user.name,\n                    });\n                }\n            }),\n        );\n    }\n\n    public postForm() {\n        if (!this.form.valid) return;\n        this.loading = true;\n        const value = this.form.value;\n        if (value.user) {\n            value.email = value.user.email;\n            value.name = value.user.name;\n        }\n        this._dialog_ref.disableClose = true;\n        this.event.emit({ reason: 'done', metadata: value });\n    }\n}\n","export * from './lib/bookings.module';\nexport * from './lib/booking-form.service';\nexport * from './lib/booking.class';\nexport * from './lib/booking.utilities';\nexport * from './lib/bookings.fn';\nexport * from './lib/bookings.module';\nexport * from './lib/desk.service';\nexport * from './lib/lockers.service';\nexport * from './lib/booking-details-modal.component';\nexport * from './lib/booking-card.component';\nexport * from './lib/parking-select-modal/parking-select-modal.component';\n\nexport * from './lib/parking.service';\n","import { Injectable } from '@angular/core';\nimport { MatDialog, MatDialogRef } from '@angular/material/dialog';\nimport {\n    currentUser,\n    DialogEvent,\n    notifyError,\n    notifySuccess,\n} from '@placeos/common';\nimport { endOfDay, getUnixTime, startOfDay } from 'date-fns';\nimport { first, map } from 'rxjs/operators';\n\nimport { OrganisationService } from 'libs/organisation/src/lib/organisation.service';\nimport { Desk } from 'libs/organisation/src/lib/desk.class';\nimport { StaffUser, User } from 'libs/users/src/lib/user.class';\n\nimport { queryBookings, saveBooking } from './bookings.fn';\nimport { DeskConfirmModalComponent } from './desk-confirm-modal.component';\nimport { DeskQuestionsModalComponent } from './desk-questions-modal.component';\n\n@Injectable({\n    providedIn: 'root',\n})\nexport class DesksService {\n    public can_set_date = true;\n    public error_on_host = true;\n\n    constructor(\n        private _org: OrganisationService,\n        private _dialog: MatDialog\n    ) {}\n\n    public async bookDesk({\n        desks,\n        host,\n        reason,\n        attendees,\n        date,\n    }: {\n        desks: Desk[];\n        host?: StaffUser;\n        attendees?: User[];\n        reason?: string;\n        date?: Date;\n    }) {\n        if (this.error_on_host && !host) {\n            return notifyError('You need to select a host to book a desk.');\n        } else {\n            host = host || currentUser();\n        }\n        reason = reason || '';\n        const level = this._org.levelWithID(\n            desks[0].zone instanceof Array ? desks[0].zone : [desks[0].zone?.id]\n        );\n        let ref: MatDialogRef<any> = this._dialog.open(\n            DeskQuestionsModalComponent\n        );\n        let success = await Promise.race([\n            ref.componentInstance.event\n                .pipe(first((_: DialogEvent) => _.reason === 'done'))\n                .toPromise(),\n            ref\n                .afterClosed()\n                .pipe(map((_) => null))\n                .toPromise(),\n        ]);\n        if (!success) return;\n        ref.close();\n        ref = this._dialog.open(DeskConfirmModalComponent, {\n            data: {\n                host,\n                desks,\n                date: date ? new Date(date) : new Date(),\n                reason,\n                level,\n                can_set_date: this.can_set_date,\n            },\n        });\n        success = await Promise.race([\n            ref.componentInstance.event\n                .pipe(first((_: DialogEvent) => _.reason === 'done'))\n                .toPromise(),\n            ref\n                .afterClosed()\n                .pipe(map((_) => null))\n                .toPromise(),\n        ]);\n        if (!success) return;\n        host = ref.componentInstance.host || host;\n        date = ref.componentInstance.date || date;\n        reason = ref.componentInstance.reason || reason;\n        if (!host) {\n            ref.close();\n            return notifyError('You need to select a host to book a desk. ');\n        }\n        ref.componentInstance.loading =\n            'Checking for existing desk bookings...';\n        const bookings = await queryBookings({\n            type: 'desk',\n            period_start: getUnixTime(startOfDay(date || new Date())),\n            period_end: getUnixTime(endOfDay(date || new Date())),\n        }).toPromise();\n        const desk_list = bookings.filter(\n            (d) => d.user_email.toLowerCase() === host.email.toLowerCase()\n        );\n        if (desk_list?.length) {\n            ref.close();\n            return notifyError(\n                'You currently already have a desk booked for the selected date.'\n            );\n        }\n        ref.componentInstance.loading = 'Booking desk...';\n        const users = [host, ...(attendees || [])];\n        await Promise.all([\n            desks.map((desk, idx) =>\n                this.makeDeskBooking(\n                    desk,\n                    host,\n                    date.valueOf() || new Date().valueOf(),\n                    reason,\n                    users[idx]\n                )\n            ),\n        ]);\n        notifySuccess('Successfully booked desk');\n        ref.close();\n        return true;\n    }\n\n    private async makeDeskBooking(\n        desk: Desk,\n        host: StaffUser,\n        date: number,\n        reason: string,\n        for_user: User = null\n    ) {\n        const location = `${desk.zone?.name}-${desk.id}`;\n        const level = this._org.levelWithID(\n            desk.zone instanceof Array ? desk.zone : [desk.zone?.id]\n        );\n        const zones = desk.zone?.id\n            ? [desk.zone?.id, level?.parent_id]\n            : [level?.parent_id];\n        const booking_data = {\n            booking_start: getUnixTime(startOfDay(date)),\n            user_id: for_user?.id || host.id,\n            user_name: for_user?.name || host.name,\n            user_email: for_user?.email || host.email,\n            booking_end: Math.floor(endOfDay(date).valueOf() / 1000),\n            asset_id: desk.id,\n            asset_name: desk.name,\n            title: reason,\n            description: location,\n            zones,\n            booking_type: 'desk',\n            extension_data: {\n                map_id: desk?.map_id || desk?.id,\n                groups: desk.groups,\n                for_user: for_user?.email,\n            },\n        };\n        return saveBooking(booking_data as any).toPromise();\n    }\n}\n"],"names":["Validators","MAT_DIALOG_DATA","MatDialogRef","BookingFormService","AsyncHandler","currentUser","notifyError","notifySuccess","SettingsService","addDays","endOfDay","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵelement","ɵɵi18n","ɵɵi18nStart","ɵɵi18nEnd","ɵɵlistener","ParkingBookingModalComponent_main_5_div_22_Template_a_time_field_ngModelChange_5_listener","$event","ɵɵrestoreView","_r1","ctx_r1","ɵɵnextContext","ɵɵresetView","form","patchValue","date","ɵɵadvance","ɵɵproperty","value","ɵɵpureFunction0","_c0","controls","disabled","use_24hr","tmp_7_0","getRawValue","max_duration","ɵɵtemplate","ParkingBookingModalComponent_main_5_div_1_Template","ParkingBookingModalComponent_main_5_mat_checkbox_21_Template","ParkingBookingModalComponent_main_5_div_22_Template","ParkingBookingModalComponent_main_5_span_28_Template","user","allow_all_day","all_day","ParkingBookingModalComponent_footer_6_Template_button_click_3_listener","_r3","postForm","ParkingBookingModalComponent","id","end_date","Date","now","_settings","get","constructor","_data","_booking_form","_dialog_ref","loading","allow_time_changes","ngOnInit","newForm","booking","setOptions","type","subscription","valueChanges","subscribe","user_name","name","user_email","email","attendees","booking_type","duration","plate_number","setValidators","required","disable","level","zone_id","link_id","parent_id","space","resources","timeout","v","emitEvent","_this","_asyncToGenerator","markAllAsTouched","updateValueAndValidity","valid","user_id","undefined","result","catch","e","close","_","ɵɵdirectiveInject","i1","i2","i3","_2","selectors","features","ɵɵInheritDefinitionFeature","decls","vars","consts","i18n_0","ngI18nClosureMode","$localize","ParkingBookingModalComponent_button_4_Template","ParkingBookingModalComponent_main_5_Template","ParkingBookingModalComponent_footer_6_Template","ParkingBookingModalComponent_ng_template_7_Template","ɵɵtemplateRefExtractor","ɵɵtextInterpolate1","ctx","load_state_r4","EventEmitter","FormControl","FormGroup","showStaff","ParkingSpaceModalComponent_main_5_Template_button_click_17_listener","assigned_user","assigned_to","assigned_name","ParkingSpaceModalComponent_main_5_Template_button_click_27_listener","ParkingSpaceModalComponent","event","map_id","notes","map_rotation","toPromise","disableClose","emit","reason","metadata","outputs","template","ParkingSpaceModalComponent_Template","rf","ParkingSpaceModalComponent_button_4_Template","ParkingSpaceModalComponent_main_5_Template","ParkingSpaceModalComponent_ng_template_6_Template","load_state_r3","MatDialog","approveBooking","approveBookingInstance","Booking","checkinBooking","checkinBookingInstance","queryBookings","RecurrenceDays","rejectBooking","rejectBookingInstance","removeBooking","saveBooking","openConfirmModal","unique","OrganisationService","showMetadata","updateMetadata","randomInt","format","getUnixTime","startOfDay","BehaviorSubject","combineLatest","of","debounceTime","filter","first","map","shareReplay","switchMap","take","tap","ParkingUserModalComponent","ParkingStateService","_org","_dialog","_poll","_change","_options","search","zones","_loading","levels","active_region","active_building","pipe","bld","tags","includes","blds","buildingsForRegion","bld_ids","list","lvl","display_name","find","spaces","options","next","getValue","details","Array","users","bookings","period_start","period_end","length","join","region","include_checked_out","toLowerCase","extension_data","asObservable","startPolling","delay","interval","stopPolling","clearInterval","editSpace","ref","open","data","state","Promise","race","afterClosed","componentInstance","zone","levelsForBuilding","new_space","idx","findIndex","booking_list","filtered","asset_id","all","booking_start","booking_end","asset_name","recurrence_type","recurrence_days","MONDAY","TUESDAY","WEDNESDAY","THURSDAY","FRIDAY","organisation","building","push","new_space_list","description","removeSpace","_this2","title","content","icon","editUser","_this3","new_user","removeUser","_this4","editReservation","reservation","external_user","_this5","_ref","resolve","_x","apply","arguments","setBookingCheckinState","_this6","promise","instance","success","_this7","_this8","ɵɵinject","factory","ɵfac","providedIn","ParkingUserModalComponent_main_5_Template_button_click_3_listener","phone","ParkingUserModalComponent_footer_6_Template_button_click_3_listener","car_color","deny","ParkingUserModalComponent_button_4_Template","ParkingUserModalComponent_main_5_Template","ParkingUserModalComponent_footer_6_Template","ParkingUserModalComponent_ng_template_7_Template","DeskConfirmModalComponent","DeskQuestionsModalComponent","DesksService","can_set_date","error_on_host","bookDesk","desks","host","levelWithID","desk_list","d","desk","makeDeskBooking","valueOf","for_user","location","booking_data","Math","floor","groups"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}