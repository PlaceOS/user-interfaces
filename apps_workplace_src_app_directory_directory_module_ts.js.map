{"version":3,"file":"apps_workplace_src_app_directory_directory_module_ts.js","mappings":"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","names":["i0","ctx_r1","user","_r4","ctx_r3","sendCallEvent","ctx_r2","phone","DirectoryUserListItemComponent_div_0_a_user_avatar_1_Template","_r6","ctx_r5","sendLocateEvent","DirectoryUserListItemComponent_div_0_a_11_Template","ctx_r0","show_image","name","email","_c0","_c1","DirectoryUserListItemComponent","this","_settings","get","constructor","static","t","i1","core","Xpm","selectors","inputs","decls","vars","consts","template","rf","ctx","DirectoryUserListItemComponent_div_0_Template","DirectoryUserListComponent_ng_container_10_ng_container_1_ng_container_1_a_directory_user_list_item_3_Template","letter_r5","ctx_r6","groupedUsers","DirectoryUserListComponent_ng_container_10_ng_container_1_ng_container_1_Template","ctx_r4","length","DirectoryUserListComponent_ng_container_10_ng_container_1_Template","letters","search_str","min_search_length","LETTERS","split","DirectoryUserListComponent","AsyncHandler","super","user_list","search$","Subject","search_results$","pipe","debounceTime","distinctUntilChanged","switchMap","query","loading","searchStaff","toPromise","catch","Promise","resolve","map","list","ngOnInit","subscription","subscribe","buildGroups","next","users","sorted","sort","a","b","localeCompare","letter","filter","f","startsWith","features","attrs","$event","DirectoryUserListComponent_mat_spinner_8_Template","DirectoryUserListComponent_ng_container_10_Template","DirectoryUserListComponent_ng_template_12_Template","_r2","ROUTES","path","component","DirectoryModule","oAB","cJS","CommonModule","FormsModule","RouterModule","forChild","SharedComponentModule"],"sourceRoot":"webpack:///","sources":["./apps/workplace/src/app/directory/user-details.component.ts","./apps/workplace/src/app/directory/user-list.component.ts","./apps/workplace/src/app/directory/directory.module.ts"],"sourcesContent":["import { Component, Input } from '@angular/core';\n\nimport { SettingsService } from '@placeos/common';\nimport { User } from '@placeos/users';\n\n@Component({\n    selector: 'a-directory-user-list-item',\n    template: `\n        <div\n            class=\"flex flex-wrap items-center sm:space-x-4 bg-base-100 hover:bg-base-200 overflow-hidden p-4 mb-2\"\n            *ngIf=\"user\"\n            [class.with-image]=\"show_image\"\n        >\n            <a-user-avatar *ngIf=\"show_image\" [user]=\"user\"></a-user-avatar>\n            <div class=\"flex flex-col flex-1 w-1/2 ml-4 sm:ml-0\">\n                <div class=\"name\">{{ user.name }}</div>\n                <a\n                    class=\"text-sm underline\"\n                    name=\"email\"\n                    [href]=\"'mailto:' + user.email | safe: 'url'\"\n                >\n                    {{ user.email }}\n                </a>\n            </div>\n            <div\n                class=\"flex w-full sm:w-auto sm:flex-col items-center space-x-2 sm:space-x-0 sm:space-y-2 mt-4 sm:mt-0\"\n            >\n                <a\n                    btn\n                    matRipple\n                    button\n                    class=\"w-32 flex-1 sm:flex-none\"\n                    locate\n                    [routerLink]=\"['/explore']\"\n                    [queryParams]=\"{ user: user.email }\"\n                    (click)=\"sendLocateEvent()\"\n                >\n                    Locate\n                </a>\n                <a\n                    btn\n                    matRipple\n                    button\n                    class=\"w-32 flex-1 sm:flex-nones\"\n                    call\n                    *ngIf=\"user.phone\"\n                    [href]=\"'tel:' + user.phone | safe: 'url'\"\n                    (click)=\"sendCallEvent()\"\n                >\n                    Call\n                </a>\n            </div>\n        </div>\n    `,\n    styles: [``],\n})\nexport class DirectoryUserListItemComponent {\n    /** Space to display */\n    @Input() public user: User;\n\n    public get show_image() {\n        return this._settings.get('app.users.show_avatars');\n    }\n\n    public sendLocateEvent() {\n        // this._service.Analytics.event('Locate', `locate_clicked_user_${this.user.name}`);\n    }\n\n    public sendCallEvent() {\n        // this._service.Analytics.event('Call', `call_clicked_user_${this.user.name}`);\n    }\n\n    constructor(private _settings: SettingsService) {}\n}\n","import { Component, OnInit } from '@angular/core';\nimport { Subject, Observable } from 'rxjs';\nimport {\n    switchMap,\n    debounceTime,\n    distinctUntilChanged,\n    map,\n} from 'rxjs/operators';\n\nimport { AsyncHandler, SettingsService } from '@placeos/common';\nimport { searchStaff, User } from '@placeos/users';\n\nconst LETTERS = `ABCDEFGHIJKLMNOPQRSTUVWXYZ`.split('');\n\n@Component({\n    selector: '[a-directory-user-list]',\n    template: `\n        <topbar></topbar>\n        <div class=\"flex-1 flex sm:flex-row flex-col-reverse h-1/2\">\n            <div\n                class=\"relative z-0 flex flex-col flex-1 h-1/2 sm:h-auto overflow-hidden\"\n            >\n                <div class=\"w-full flex items-center justify-center p-2\">\n                    <mat-form-field\n                        overlay\n                        class=\"rounded\"\n                        appearance=\"outline\"\n                    >\n                        <app-icon class=\"text-xl\" matPrefix>search</app-icon>\n                        <input\n                            matInput\n                            [(ngModel)]=\"search_str\"\n                            (ngModelChange)=\"search$.next($event)\"\n                            placeholder=\"Search for a person...\"\n                        />\n                        <mat-spinner\n                            matSuffix\n                            class=\"top-2\"\n                            *ngIf=\"loading\"\n                            [diameter]=\"32\"\n                        ></mat-spinner>\n                    </mat-form-field>\n                </div>\n                <main class=\"flex-1 h-1/2 w-full\">\n                    <ng-container\n                        *ngIf=\"\n                            groupedUsers && user_list.length;\n                            else empty_state\n                        \"\n                    >\n                        <ng-container *ngFor=\"let letter of letters\">\n                            <ng-container *ngIf=\"groupedUsers[letter].length\">\n                                <div class=\"py-2 px-4 font-medium\">\n                                    {{ letter }}\n                                </div>\n                                <a-directory-user-list-item\n                                    *ngFor=\"let user of groupedUsers[letter]\"\n                                    [user]=\"user\"\n                                ></a-directory-user-list-item>\n                            </ng-container>\n                        </ng-container>\n                    </ng-container>\n                </main>\n            </div>\n        </div>\n        <footer-menu></footer-menu>\n        <ng-template #empty_state>\n            <div class=\"flex flex-col items-center p-8\">\n                <app-icon class=\"text-5xl\">{{\n                    search_str && search_str.length >= min_search_length\n                        ? 'close'\n                        : 'arrow_upward'\n                }}</app-icon>\n                <div class=\"text\">\n                    {{\n                        search_str && search_str.length >= min_search_length\n                            ? ' No matches for \"' + search_str + '\"'\n                            : 'Type above to search for users'\n                    }}\n                </div>\n            </div>\n        </ng-template>\n    `,\n    styles: [\n        `\n            :host {\n                display: flex;\n                flex-direction: column;\n                height: 100%;\n                width: 100%;\n                background: #f0f0f0;\n            }\n\n            mat-form-field {\n                width: 48rem;\n                max-width: calc(100% - 2rem);\n            }\n        `,\n    ],\n})\nexport class DirectoryUserListComponent extends AsyncHandler implements OnInit {\n    /** List of searchable users */\n    public user_list: User[] = [];\n    /** String  */\n    public search_str: string;\n    /** Whether space list is being filtered */\n    public loading: boolean;\n    /** Whether to show menu */\n    public show_menu: boolean;\n\n    public groupedUsers: { [id: string]: User[] } = {};\n    /** Subject holding the value of the search */\n    public readonly search$ = new Subject<string>();\n    /** List of users from an API search */\n    public search_results$: Observable<User[]> = this.search$.pipe(\n        debounceTime(400),\n        distinctUntilChanged(),\n        switchMap((query) => {\n            this.loading = true;\n            const retVal =\n                query.length >= this.min_search_length\n                    ? searchStaff(query)\n                          .toPromise()\n                          .catch(() => [])\n                    : Promise.resolve(this.user_list || []);\n            return retVal;\n        }),\n        map((list: User[]) => {\n            this.loading = false;\n            return list;\n        })\n    );\n\n    /** Minimum length of the search string needed to initial a search */\n    public get min_search_length(): number {\n        const length = this._settings.get('app.users.min_search_length');\n        return typeof length === 'number' && length >= 0 ? length : 3;\n    }\n\n    constructor(private _settings: SettingsService) {\n        super();\n    }\n\n    public ngOnInit(): void {\n        // Process API results\n        this.subscription(\n            'search_results',\n            this.search_results$.subscribe((list) => {\n                this.user_list = list;\n                this.buildGroups(this.user_list);\n            })\n        );\n        this.search$.next('');\n    }\n\n    public get letters(): string[] {\n        return LETTERS;\n    }\n\n    private buildGroups(users: User[]) {\n        const sorted = users.sort((a, b) => a.name.localeCompare(b.name));\n        for (const letter of this.letters) {\n            this.groupedUsers[letter] = sorted.filter((f) =>\n                f.name.startsWith(letter)\n            );\n        }\n    }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { RouterModule, Route } from '@angular/router';\n\nimport { DirectoryUserListComponent } from './user-list.component';\nimport { DirectoryUserListItemComponent } from './user-details.component';\nimport { FormsModule } from '@angular/forms';\nimport { SharedComponentModule } from '../components/shared.module';\n\nconst ROUTES: Route[] = [{ path: '', component: DirectoryUserListComponent }];\n\n@NgModule({\n    declarations: [DirectoryUserListComponent, DirectoryUserListItemComponent],\n    imports: [\n        CommonModule,\n        FormsModule,\n        RouterModule.forChild(ROUTES),\n        SharedComponentModule,\n    ],\n})\nexport class DirectoryModule {}\n"],"x_google_ignoreList":[]}