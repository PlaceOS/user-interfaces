(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{Bhho:function(n,e,t){"use strict";t.r(e),t.d(e,"DayViewModule",(function(){return cn}));var i=t("2kYt"),o=t("nIj0"),c=t("sEIs"),s=t("oRDy"),r=t("EM62"),a=t("UfDH"),l=t("D57K"),d=t("jOdJ"),b=t("20lr"),f=t("HWRp"),h=t("dJst"),m=t("PBFl"),g=t("0/Ep"),u=t("29Wa"),p=t("R7+U"),v=t("k8N0"),_=t("wrRZ"),w=t("mFH5");function O(n,e){if(1&n&&(r.Vb(0,"mat-option",12),r.Ic(1),r.Ub()),2&n){const n=e.$implicit;r.nc("value",n.id),r.Db(1),r.Kc(" ",n.display_name||n.name," ")}}function y(n,e){if(1&n&&(r.Vb(0,"mat-option",12),r.Ic(1),r.Ub()),2&n){const n=e.$implicit;r.nc("value",n.id),r.Db(1),r.Kc(" ",n.name," ")}}const x=function(){return{class:"material-icons",content:"add"}};let C=(()=>{class n extends b.b{constructor(n,e,t,i){super(),this._state=n,this._org=e,this._route=t,this._router=i,this.zones=[],this.types=[{id:"internal",name:"Internal"},{id:"external",name:"External"},{id:"cancelled",name:"Cancelled"}],this.type_list=this.types.map(n=>""+n.id),this.setDate=n=>this._state.setDate(n),this.newBooking=n=>this._state.newBooking(n),this.levels=this._org.active_levels,this.ui_options=this._state.options,this.updateZones=n=>{this._router.navigate([],{relativeTo:this._route,queryParams:{zone_ids:n.join(",")}}),this._state.setZones(n)},this.updateTypes=n=>this._state.setFilters({hide_type:this.types.reduce((e,t)=>(!n.includes(t.id)&&e.push(t),e),[])})}updateUIOptions(n){this._state.setUIOptions(n)}ngOnInit(){return Object(l.a)(this,void 0,void 0,(function*(){yield this._org.initialised.pipe(Object(d.a)(n=>n)).toPromise(),this.subscription("route.query",this._route.queryParamMap.subscribe(n=>{if(n.has("zone_ids")){const e=n.get("zone_ids").split(",");if(e.length){const n=this._org.levelWithID(e);if(!n)return;this._org.building=this._org.buildings.find(e=>e.id===n.parent_id),this.zones=e}}})),this.subscription("levels",this._org.active_levels.subscribe(n=>{this.zones=this.zones.filter(e=>n.find(n=>n.id===e)),!this.zones.length&&n.length&&this.zones.push(n[0].id),this.updateZones(this.zones)})),this.updateTypes(this.type_list)}))}}return n.\u0275fac=function(e){return new(e||n)(r.Pb(f.a),r.Pb(h.c),r.Pb(c.a),r.Pb(c.d))},n.\u0275cmp=r.Jb({type:n,selectors:[["dayview-topbar"]],features:[r.Ab],decls:24,vars:14,consts:[["mat-button","",1,"w-12","xl:w-auto",3,"click"],[1,"flex","items-center"],[1,"mr-2",3,"icon"],[1,"hidden","xl:block"],["appearance","outline"],["multiple","","placeholder","All Levels",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["multiple","","placeholder","No Events",3,"ngModel","ngModelChange"],[1,"m-2",3,"ngModel","ngModelChange"],[1,"text-xs"],[1,"flex-1","w-0"],[3,"dateChange"],[3,"value"]],template:function(n,e){if(1&n&&(r.Vb(0,"button",0),r.dc("click",(function(){return e.newBooking()})),r.Vb(1,"div",1),r.Qb(2,"app-icon",2),r.Vb(3,"div",3),r.Ic(4,"New Booking"),r.Ub(),r.Ub(),r.Ub(),r.Vb(5,"mat-form-field",4),r.Vb(6,"mat-select",5),r.dc("ngModelChange",(function(n){return e.zones=n}))("ngModelChange",(function(n){return e.updateZones(n)})),r.Gc(7,O,2,2,"mat-option",6),r.ic(8,"async"),r.Ub(),r.Ub(),r.Vb(9,"mat-form-field",4),r.Vb(10,"mat-select",7),r.dc("ngModelChange",(function(n){return e.type_list=n}))("ngModelChange",(function(n){return e.updateTypes(n)})),r.Vb(11,"mat-select-trigger"),r.Ic(12,"Legend"),r.Ub(),r.Gc(13,y,2,2,"mat-option",6),r.Ub(),r.Ub(),r.Vb(14,"mat-slide-toggle",8),r.dc("ngModelChange",(function(n){return e.updateUIOptions({show_overflow:n})})),r.ic(15,"async"),r.Vb(16,"div",9),r.Ic(17,"Setup / Breakdown"),r.Ub(),r.Ub(),r.Vb(18,"mat-slide-toggle",8),r.dc("ngModelChange",(function(n){return e.updateUIOptions({show_cleaning:n})})),r.ic(19,"async"),r.Vb(20,"div",9),r.Ic(21,"Cleaners View"),r.Ub(),r.Ub(),r.Qb(22,"div",10),r.Vb(23,"date-options",11),r.dc("dateChange",(function(n){return e.setDate(n)})),r.Ub()),2&n){let n=null,t=null;r.Db(2),r.nc("icon",r.oc(13,x)),r.Db(4),r.nc("ngModel",e.zones),r.Db(1),r.nc("ngForOf",r.jc(8,7,e.levels)),r.Db(3),r.nc("ngModel",e.type_list),r.Db(3),r.nc("ngForOf",e.types),r.Db(1),r.nc("ngModel",null==(n=r.jc(15,9,e.ui_options))?null:n.show_overflow),r.Db(4),r.nc("ngModel",null==(t=r.jc(19,11,e.ui_options))?null:t.show_cleaning)}},directives:[m.b,g.a,u.c,p.a,o.l,o.o,i.m,p.c,v.a,_.a,w.j],pipes:[i.b],styles:["[_nghost-%COMP%] {\n                display: flex;\n                align-items: center;\n                background-color: #fff;\n                height: 5em;\n                padding: 0 1em;\n            }\n\n            button[_ngcontent-%COMP%] {\n                min-width: 0;\n                padding: 0 .85rem;\n            }\n\n            mat-form-field[_ngcontent-%COMP%] {\n                height: 3.25em;\n                width: 8em;\n                margin-left: 1em;\n            }\n\n            mat-slide-toggle[_ngcontent-%COMP%]   div[_ngcontent-%COMP%] {\n                width: 5.5em;\n                white-space: initial;\n                line-height: 1.2em\n            }"]}),n})();var I=t("HM3f"),M=t("YtkY"),P=t("6CBO"),U=t("CzDk"),V=t("WPBw"),D=t("9MvL"),k=t("w+hZ");function j(n,e){if(1&n&&r.Qb(0,"div"),2&n){const n=r.hc();r.Fb("overflow-block absolute rounded overflow-hidden w-full "+n.type),r.Dc("top",100*n.overflow_top+"%")("height",100*n.overflow_height+"%")}}const G=function(){return{class:"material-icons",content:"title"}};function Q(n,e){if(1&n&&(r.Vb(0,"div",6),r.Qb(1,"app-icon",7),r.Ic(2),r.Ub()),2&n){const n=r.hc(2);r.Db(1),r.nc("icon",r.oc(2,G)),r.Db(1),r.Kc(" ",n.event.title," ")}}const z=function(){return{class:"material-icons",content:"schedule"}};function F(n,e){if(1&n&&(r.Vb(0,"div",6),r.Qb(1,"app-icon",7),r.Ic(2),r.Ub()),2&n){const n=r.hc(2);r.Db(1),r.nc("icon",r.oc(2,z)),r.Db(1),r.Kc(" ",n.time," ")}}const E=function(){return{class:"material-icons",content:"user"}};function A(n,e){if(1&n&&(r.Vb(0,"div",6),r.Qb(1,"app-icon",7),r.Ic(2),r.Ub()),2&n){const n=r.hc(2);r.Db(1),r.nc("icon",r.oc(3,E)),r.Db(1),r.Lc(" ",n.event.attendees.length," Attendee",1===n.event.attendees.length?"":"s"," ")}}function J(n,e){if(1&n){const n=r.Wb();r.Vb(0,"div",3),r.dc("click",(function(){r.vc(n);const e=r.hc();return e.view(e.event)})),r.Vb(1,"div",4),r.Ic(2),r.Ub(),r.Gc(3,Q,3,3,"div",5),r.Gc(4,F,3,3,"div",5),r.Gc(5,A,3,4,"div",5),r.Ub()}if(2&n){const n=r.hc();r.Fb("absolute rounded overflow-hidden text-sm "+n.type),r.Dc("top",100*n.top+"%")("height",100*n.height+"%"),r.Db(2),r.Jc(null==n.event.organiser?null:n.event.organiser.name),r.Db(1),r.nc("ngIf",n.event.duration>30),r.Db(1),r.nc("ngIf",n.event.duration>60),r.Db(1),r.nc("ngIf",n.event.duration>90)}}const N=function(n){return{class:"material-icons",content:n}};function q(n,e){if(1&n&&(r.Vb(0,"div",8),r.Vb(1,"div"),r.Qb(2,"app-icon",9),r.Ub(),r.Vb(3,"div",10),r.Ic(4),r.Ub(),r.Ub()),2&n){const n=r.hc();r.Dc("top",100*n.overflow_top+"%")("height",100*n.overflow_height+"%"),r.Db(1),r.Fb("icon flex mr-2 text-3xl rounded "+n.event.cleaning_status),r.Db(1),r.nc("icon",r.pc(9,N,"done"===n.event.cleaning_status?"done":"warning")),r.Db(2),r.Lc("","done"===n.event.cleaning_status?"Finished":"Scheduled to"," clean at ",n.event.cleaning_time,"")}}let B=(()=>{class n{constructor(n){this._state=n,this.top=-999,this.height=0,this.overflow_top=-999,this.overflow_height=0,this.view=n=>this._state.setEvent(n),this.ui_options=this._state.options}get time(){const n=new Date(this.event.date);return Object(U.a)(n,"h:mm a")+" - "+Object(U.a)(Object(V.a)(n,this.event.duration),"h:mm a")}get type(){return this.event.has_visitors?"external":"cancelled"===this.event.status?"cancelled":"internal"}ngOnChanges(n){if(n.event&&this.event){const n=Object(D.a)(new Date(this.event.date)),e=Object(k.a)(new Date(this.event.date),n);this.top=e/1440,this.height=this.event.duration/1440,this.overflow_top=(e-this.event.setup)/1440,this.overflow_height=(this.event.duration+this.event.setup+this.event.breakdown)/1440}}}return n.\u0275fac=function(e){return new(e||n)(r.Pb(f.a))},n.\u0275cmp=r.Jb({type:n,selectors:[["dayview-event"]],inputs:{event:"event"},features:[r.Bb],decls:5,vars:7,consts:[[3,"class","top","height",4,"ngIf"],["name","event","matRipple","",3,"class","top","height","click",4,"ngIf"],["class","catering-block absolute rounded overflow-hidden flex w-full shadow p-2",3,"top","height",4,"ngIf"],["name","event","matRipple","",3,"click"],[1,"info"],["class","info flex items-center",4,"ngIf"],[1,"info","flex","items-center"],[1,"mx-2",3,"icon"],[1,"catering-block","absolute","rounded","overflow-hidden","flex","w-full","shadow","p-2"],[3,"icon"],[1,"text"]],template:function(n,e){if(1&n&&(r.Gc(0,j,1,6,"div",0),r.ic(1,"async"),r.Gc(2,J,6,10,"div",1),r.Gc(3,q,5,11,"div",2),r.ic(4,"async")),2&n){let n=null,t=null;r.nc("ngIf",null==(n=r.jc(1,3,e.ui_options))?null:n.show_overflow),r.Db(2),r.nc("ngIf",e.event),r.Db(1),r.nc("ngIf",null==(t=r.jc(4,5,e.ui_options))?null:t.show_cleaning)}},directives:[i.n,w.m,g.a],pipes:[i.b],styles:["[_nghost-%COMP%] {\n                border-right: 1px solid rgba(0, 0, 0, 0.1);\n            }\n\n            [name='event'][_ngcontent-%COMP%] {\n                background-color: #ccc;\n                width: 12rem;\n                z-index: 100;\n                transition: box-shadow 200ms;\n            }\n\n            [name='event'][_ngcontent-%COMP%]:hover {\n                box-shadow: 0 1px 3px 1px rgba(0, 0, 0, 0.2), 0 1px 1px 0 rgba(0, 0, 0, 0.14),\n                    0 2px 1px -1px rgba(0, 0, 0, 0.12);\n                cursor: pointer;\n                z-index: 999;\n            }\n\n            .overflow-block[_ngcontent-%COMP%] {\n                opacity: .3;\n                width: 12rem;\n            }\n\n            .catering-block[_ngcontent-%COMP%] {\n                background-color: #fff;\n                width: 12rem;\n                z-index: 999;\n            }\n\n            .internal[_ngcontent-%COMP%] {\n                background-color: #00a4c7;\n                color: #fff;\n            }\n\n            .icon[_ngcontent-%COMP%] {\n                height: 1.5em;\n                width: 1.5em;\n                color: #ffbf1f;\n                background-color: #f0f0f0;\n            }\n\n            .icon.done[_ngcontent-%COMP%] {\n                color: #21a453;\n            }\n\n            .external[_ngcontent-%COMP%] {\n                background-color: #d85be0;\n                color: #fff;\n            }\n\n            .cancelled[_ngcontent-%COMP%] {\n                background-color: #eee;\n            }\n\n            .info[_ngcontent-%COMP%]:first-child {\n                padding: 0.75em 0.5em;\n            }\n\n            .info[_ngcontent-%COMP%] {\n                padding: 0.25em 0.5em;\n            }"]}),n})();function H(n,e){1&n&&r.Qb(0,"dayview-event",1),2&n&&r.nc("event",e.$implicit)}let R=(()=>{class n{constructor(n){this._state=n,this.events=this._state.filtered.pipe(Object(M.a)(n=>n.filter(n=>n.resources.find(n=>this.space.email===n.email))))}ngOnInit(){this._state.filtered.subscribe(n=>{})}}return n.\u0275fac=function(e){return new(e||n)(r.Pb(f.a))},n.\u0275cmp=r.Jb({type:n,selectors:[["dayview-space"]],inputs:{space:"space"},decls:2,vars:3,consts:[[3,"event",4,"ngFor","ngForOf"],[3,"event"]],template:function(n,e){1&n&&(r.Gc(0,H,1,1,"dayview-event",0),r.ic(1,"async")),2&n&&r.nc("ngForOf",r.jc(1,1,e.events))},directives:[i.m,B],pipes:[i.b],styles:["[_nghost-%COMP%] {\n                position: relative;\n                border-right: 1px solid rgba(0, 0, 0, 0.1);\n            }"]}),n})();var T=t("66mq");const $=["ref"];function S(n,e){if(1&n&&(r.Vb(0,"div",16),r.Vb(1,"div",17),r.Ic(2),r.Ub(),r.Qb(3,"div",6),r.Ub()),2&n){const n=e.$implicit,t=r.hc();r.Dc("transform","translateY(-"+t.scroll.y+"px)"),r.Db(2),r.Jc(n)}}function W(n,e){if(1&n&&(r.Vb(0,"div",18),r.Qb(1,"div",6),r.Vb(2,"div",19),r.Ic(3),r.Ub(),r.Ub()),2&n){const n=e.$implicit,t=r.hc();r.Dc("transform","translateX(-"+t.scroll.x+"px)"),r.Db(3),r.Jc(n.display_name||n.name)}}function Y(n,e){1&n&&r.Qb(0,"dayview-space",20),2&n&&r.nc("space",e.$implicit)}function Z(n,e){if(1&n&&(r.Qb(0,"div",21),r.ic(1,"async")),2&n){const n=e.index,t=r.hc();r.Dc("width",12*r.jc(1,4,t.space_list).length+"em")("top",4*n+"em")}}function K(n,e){1&n&&r.Qb(0,"mat-progress-bar",22)}function L(n,e){if(1&n&&(r.Qb(0,"dayview-event-details",23),r.ic(1,"async")),2&n){const n=r.hc();r.nc("event",r.jc(1,1,n.event))}}const X=new Array(24).fill(0).map((n,e)=>(e%12==0?12:e%12)+(e>=12?" PM":" AM"));let nn=(()=>{class n extends b.b{constructor(n,e,t){super(),this._org=n,this._spaces=e,this._state=t,this.blocks=X,this.scroll={x:0,y:0},this.loading=this._state.loading,this.event=this._state.event,this.space_list=Object(I.b)([this._org.active_building,this._spaces.list,this._state.zones]).pipe(Object(M.a)(n=>{const[e,t,i]=n;return t.filter(n=>n.zones.includes(e.id)&&(!(null==i?void 0:i.length)||n.zones.find(n=>i.includes(n))))||[]}))}ngOnInit(){this._state.startPolling()}ngOnDestroy(){this._state.stopPolling()}ngAfterViewInit(){this.box=this._ref_el.nativeElement.getBoundingClientRect()}onScroll(n){this._ref_el&&requestAnimationFrame(()=>this.scroll={x:n.srcElement.scrollLeft,y:n.srcElement.scrollTop})}}return n.\u0275fac=function(e){return new(e||n)(r.Pb(h.c),r.Pb(P.c),r.Pb(f.a))},n.\u0275cmp=r.Jb({type:n,selectors:[["dayview-timeline"]],viewQuery:function(n,e){if(1&n&&r.Mc($,!0),2&n){let n;r.rc(n=r.ec())&&(e._ref_el=n.first)}},features:[r.Ab],decls:20,vars:14,consts:[[1,"time","h-full","overflow-hidden"],[1,"headers","relative"],[1,"white-space","absolute","inset-0",2,"bottom","1em"],["name","change-transform","class","relative",3,"transform",4,"ngFor","ngForOf"],[1,"h-full","flex-1","flex","flex-col"],[1,"headers","flex","relative","overflow-hidden"],[1,"bar","absolute"],["name","change-transform","class","relative w",3,"transform",4,"ngFor","ngForOf"],[1,"content","relative","flex","flex-1","overflow-auto",3,"scroll"],["scroll_el",""],[1,"ref","absolute"],["ref",""],[3,"space",4,"ngFor","ngForOf"],["class","block absolute w-full",3,"width","top",4,"ngFor","ngForOf"],["mode","indeterminate",4,"ngIf"],[3,"event",4,"ngIf"],["name","change-transform",1,"relative"],[1,"text","absolute","w-full","text-xs"],["name","change-transform",1,"relative","w"],[1,"name","m-2","text-center"],[3,"space"],[1,"block","absolute","w-full"],["mode","indeterminate"],[3,"event"]],template:function(n,e){1&n&&(r.Vb(0,"div",0),r.Vb(1,"div",1),r.Qb(2,"div",2),r.Ub(),r.Gc(3,S,4,3,"div",3),r.Ub(),r.Vb(4,"div",4),r.Vb(5,"div",5),r.Qb(6,"div",6),r.Gc(7,W,4,3,"div",7),r.ic(8,"async"),r.Ub(),r.Vb(9,"div",8,9),r.dc("scroll",(function(n){return e.onScroll(n)})),r.Qb(11,"div",10,11),r.Gc(13,Y,1,1,"dayview-space",12),r.ic(14,"async"),r.Gc(15,Z,2,6,"div",13),r.Ub(),r.Ub(),r.Gc(16,K,1,0,"mat-progress-bar",14),r.ic(17,"async"),r.Gc(18,L,2,3,"dayview-event-details",15),r.ic(19,"async")),2&n&&(r.Db(3),r.nc("ngForOf",e.blocks),r.Db(4),r.nc("ngForOf",r.jc(8,6,e.space_list)),r.Db(6),r.nc("ngForOf",r.jc(14,8,e.space_list)),r.Db(2),r.nc("ngForOf",e.blocks),r.Db(1),r.nc("ngIf",r.jc(17,10,e.loading)),r.Db(2),r.nc("ngIf",r.jc(19,12,e.event)))},directives:[i.m,i.n,R,T.a],pipes:[i.b],styles:['[_nghost-%COMP%] {\n                display: flex;\n                align-items: center;\n                flex: 1;\n                min-height: 50%;\n            }\n\n            .time[_ngcontent-%COMP%] {\n                width: 6em;\n            }\n\n            .time[_ngcontent-%COMP%]    > div[_ngcontent-%COMP%]:not(.headers) {\n                height: 4em;\n            }\n\n            .bar[_ngcontent-%COMP%] {\n                width: 1em;\n                top: 0;\n                right: 0;\n                height: 1px;\n                background-color: rgba(0, 0, 0, 0.1);\n                z-index: 0;\n            }\n\n            .headers[_ngcontent-%COMP%] {\n                height: 4em;\n                max-width: calc(100vw - 12em);\n            }\n\n            .white-space[_ngcontent-%COMP%] {\n                background-color: #f0f0f0;\n                z-index: 999;\n            }\n\n            .headers[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%] {\n                width: 1px;\n                bottom: 0;\n                right: -1px;\n                height: 2em;\n                background-color: rgba(0, 0, 0, 0.1);\n                top: auto;\n            }\n\n            .headers[_ngcontent-%COMP%]    > .bar[_ngcontent-%COMP%]:first-child {\n                width: 1px;\n                bottom: 0;\n                right: auto;\n                left: 0;\n                height: 2em;\n                background-color: rgba(0, 0, 0, 0.1);\n                top: auto;\n            }\n\n            .w[_ngcontent-%COMP%], dayview-space[_ngcontent-%COMP%] {\n                width: 12em;\n                min-width: 12em;\n            }\n\n            dayview-space[_ngcontent-%COMP%] {\n                height: 96em;\n            }\n\n            .block[_ngcontent-%COMP%] {\n                height: 4em;\n                border-bottom: 1px solid rgba(0, 0, 0, 0.1);\n                pointer-events: none;\n                min-width: 100%;\n                z-index: 0;\n            }\n\n            .text[_ngcontent-%COMP%] {\n                text-align: center;\n                transform: translateY(-50%);\n                padding: 0 2.5em;\n                opacity: 0.65;\n            }\n\n            .ref[_ngcontent-%COMP%] {\n                top: 0;\n                left: 0;\n                height: 1px;\n                width: 1px;\n                height: 96em;\n            }\n\n            .content[_ngcontent-%COMP%] {\n                max-width: calc(100vw - 12em);\n                border-top: 1px solid rgba(0, 0, 0, 0.1);\n                border-left: 1px solid rgba(0, 0, 0, 0.1);\n            }\n\n            mat-progress-bar[_ngcontent-%COMP%] {\n                position: absolute;\n                left: 0;\n                right: 0;\n                bottom: 0;\n            }\n\n            [name="change-transform"][_ngcontent-%COMP%] {\n                will-change: transform;\n            }']}),n})(),en=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=r.Jb({type:n,selectors:[["app-dayview"]],decls:4,vars:0,consts:[[1,"relative","overflow-hidden"]],template:function(n,e){1&n&&(r.Qb(0,"sidebar"),r.Vb(1,"main",0),r.Qb(2,"dayview-topbar"),r.Qb(3,"dayview-timeline"),r.Ub())},directives:[a.a,C,nn],styles:["[_nghost-%COMP%] {\n                display: flex;\n                height: 100%;\n                width: 100%;\n            }\n\n            sidebar[_ngcontent-%COMP%] {\n                height: 100%;\n            }\n\n            main[_ngcontent-%COMP%] {\n                display: flex;\n                flex-direction: column;\n                flex: 1;\n                min-width: 50%;\n                height: 100%;\n            }"]}),n})();var tn=t("mjT4");const on=[{path:"",component:en}];let cn=(()=>{class n{}return n.\u0275mod=r.Nb({type:n}),n.\u0275inj=r.Mb({factory:function(e){return new(e||n)},imports:[[i.c,o.h,s.a,P.a,tn.b,c.g.forChild(on)]]}),n})()},mjT4:function(n,e,t){"use strict";t.d(e,"a",(function(){return D})),t.d(e,"b",(function(){return z})),t.d(e,"c",(function(){return N})),t.d(e,"d",(function(){return q}));var i=t("EM62"),o=t("OZ4H"),c=t("20lr"),s=t("xuqh"),r=t("HTl7");function a(n,e){if(1&n&&(i.Vb(0,"div",7),i.Qb(1,"user-form",8),i.Ub()),2&n){const n=i.hc();i.Db(1),i.nc("form",n.form)}}function l(n,e){if(1&n){const n=i.Wb();i.Vb(0,"footer"),i.Vb(1,"button",9),i.Ic(2,"Cancel"),i.Ub(),i.Vb(3,"button",10),i.dc("click",(function(){return i.vc(n),i.hc().saveChanges()})),i.Ic(4,"Save"),i.Ub(),i.Ub()}}function d(n,e){1&n&&(i.Vb(0,"div",7),i.Vb(1,"div",11),i.Vb(2,"div",12),i.Qb(3,"mat-spinner",13),i.Ub(),i.Vb(4,"div",14),i.Ic(5,"Saving attendee..."),i.Ub(),i.Ub(),i.Ub())}const b=function(){return{type:"icon",class:"material-icons",content:"close"}};let f=(()=>{class n extends c.b{constructor(n){super(),this._data=n,this.event=new i.o}ngOnInit(){this.user=this._data.user||{},this.form=Object(r.c)(this.user)}saveChanges(){if(this.form.markAllAsTouched(),this.form.valid){const n=new s.c(Object.assign(Object.assign({},this.form.value),{type:"external",visit_expected:!this.form.value.email.endsWith("place.tech")}));this.event.emit({reason:"done",metadata:n})}}}return n.\u0275fac=function(e){return new(e||n)(i.Pb(o.a))},n.\u0275cmp=i.Jb({type:n,selectors:[["new-user-modal"]],outputs:{event:"event"},features:[i.Ab],decls:12,vars:6,consts:[["mat-dialog-title","",1,"heading"],[1,"flex-1"],["mat-icon-button","","mat-dialog-close",""],[3,"icon"],["class","body",4,"ngIf","ngIfElse"],[4,"ngIf"],["load_state",""],[1,"body"],[3,"form"],["mat-button","","mat-dialog-close","",1,"inverse"],["mat-button","",3,"click"],[1,"info-block"],[1,"icon"],["diameter","32"],[1,"text"]],template:function(n,e){if(1&n&&(i.Vb(0,"header"),i.Vb(1,"div",0),i.Ic(2),i.Ub(),i.Qb(3,"div",1),i.Vb(4,"button",2),i.Qb(5,"app-icon",3),i.Ub(),i.Ub(),i.Vb(6,"mat-dialog-content"),i.Gc(7,a,2,1,"div",4),i.Ub(),i.Vb(8,"mat-dialog-actions"),i.Gc(9,l,5,0,"footer",5),i.Ub(),i.Gc(10,d,6,0,"ng-template",null,6,i.Hc)),2&n){const n=i.sc(11);i.Db(2),i.Kc("",null!=e.user&&e.user.id?"Edit":"Add"," External Attendee"),i.Db(3),i.nc("icon",i.oc(5,b)),i.Db(2),i.nc("ngIf",!e.loading)("ngIfElse",n),i.Db(2),i.nc("ngIf",!e.loading)}},styles:[".body[_ngcontent-%COMP%]{position:relative;flex-direction:column;min-height:20em!important}.body[_ngcontent-%COMP%], footer[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%}footer[_ngcontent-%COMP%]{justify-content:center;padding:.35em;border-top:1px solid #ccc}footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:8em}.icon[_ngcontent-%COMP%]{height:1.2em;width:1.2em;display:flex;align-items:center;justify-content:center;font-size:2em}.content[_ngcontent-%COMP%]{width:16rem;text-align:center;font-size:.8em}app-icon[_ngcontent-%COMP%]{transition:font-size .2s}.close[_ngcontent-%COMP%]{font-size:1em;cursor:pointer}.close[_ngcontent-%COMP%]:hover   app-icon[_ngcontent-%COMP%]{font-size:.8em}button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;font-size:1rem;margin:0 .25em}"]}),n})();var h=t("2kYt"),m=t("nIj0"),g=t("29Wa"),u=t("Cd2c"),p=t("+Tre");function v(n,e){1&n&&(i.Vb(0,"mat-error"),i.Ic(1,"Name is required"),i.Ub())}function _(n,e){if(1&n&&(i.Vb(0,"div",4),i.Vb(1,"label",5),i.Ic(2,"Name"),i.Vb(3,"span"),i.Ic(4,"*"),i.Ub(),i.Ic(5,":"),i.Ub(),i.Vb(6,"mat-form-field",6),i.Qb(7,"input",7),i.Gc(8,v,2,0,"mat-error",8),i.Ub(),i.Ub()),2&n){const n=i.hc(2);i.Db(1),i.Hb("error",n.form.controls.name.invalid&&n.form.controls.name.touched),i.Db(7),i.nc("ngIf",n.form.controls.name.invalid)}}function w(n,e){1&n&&(i.Vb(0,"mat-error"),i.Ic(1,"A valid email is required"),i.Ub())}function O(n,e){if(1&n&&(i.Vb(0,"div",4),i.Vb(1,"label",9),i.Ic(2,"Email"),i.Vb(3,"span"),i.Ic(4,"*"),i.Ub(),i.Ic(5,":"),i.Ub(),i.Vb(6,"mat-form-field",6),i.Qb(7,"input",10),i.Gc(8,w,2,0,"mat-error",8),i.Ub(),i.Ub()),2&n){const n=i.hc(2);i.Db(1),i.Hb("error",n.form.controls.email.invalid&&n.form.controls.email.touched),i.Db(7),i.nc("ngIf",n.form.controls.email.invalid)}}function y(n,e){1&n&&(i.Vb(0,"mat-error"),i.Ic(1,"Organisation is required"),i.Ub())}function x(n,e){if(1&n&&(i.Vb(0,"div",4),i.Vb(1,"label",11),i.Ic(2,"Organisation"),i.Vb(3,"span"),i.Ic(4,"*"),i.Ub(),i.Ic(5,":"),i.Ub(),i.Vb(6,"mat-form-field",6),i.Qb(7,"input",12),i.Gc(8,y,2,0,"mat-error",8),i.Ub(),i.Ub()),2&n){const n=i.hc(2);i.Db(1),i.Hb("error",n.form.controls.organisation.invalid&&n.form.controls.organisation.touched),i.Db(7),i.nc("ngIf",n.form.controls.organisation.invalid)}}function C(n,e){1&n&&(i.Vb(0,"mat-error"),i.Ic(1,"Phone format is invalid"),i.Ub())}function I(n,e){if(1&n&&(i.Vb(0,"div",4),i.Vb(1,"label",13),i.Ic(2,"Phone:"),i.Ub(),i.Vb(3,"mat-form-field",6),i.Qb(4,"input",14),i.Gc(5,C,2,0,"mat-error",8),i.Ub(),i.Ub()),2&n){const n=i.hc(2);i.Db(1),i.Hb("error",n.form.controls.phone.invalid&&n.form.controls.phone.touched),i.Db(4),i.nc("ngIf",n.form.controls.phone.invalid)}}function M(n,e){1&n&&(i.Vb(0,"div",4),i.Vb(1,"mat-checkbox",15),i.Ic(2,"Assistance required"),i.Ub(),i.Ub())}function P(n,e){1&n&&(i.Vb(0,"div",4),i.Vb(1,"mat-checkbox",16),i.Ic(2,"Visit expected"),i.Ub(),i.Ub())}function U(n,e){if(1&n&&(i.Vb(0,"div",1),i.Vb(1,"form",2),i.Gc(2,_,9,3,"div",3),i.Gc(3,O,9,3,"div",3),i.Gc(4,x,9,3,"div",3),i.Gc(5,I,6,3,"div",3),i.Gc(6,M,3,0,"div",3),i.Gc(7,P,3,0,"div",3),i.Ub(),i.Ub()),2&n){const n=i.hc();i.Db(1),i.nc("formGroup",n.form),i.Db(1),i.nc("ngIf",n.form.controls.name),i.Db(1),i.nc("ngIf",n.form.controls.email),i.Db(1),i.nc("ngIf",n.form.controls.organisation),i.Db(1),i.nc("ngIf",n.form.controls.phone),i.Db(1),i.nc("ngIf",n.form.controls.assistance_required),i.Db(1),i.nc("ngIf",n.form.controls.visit_expected)}}let V=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=i.Jb({type:n,selectors:[["user-form"]],inputs:{form:"form"},decls:1,vars:1,consts:[["class","user form",4,"ngIf"],[1,"user","form"],[3,"formGroup"],["class","field",4,"ngIf"],[1,"field"],["for","name"],["appearance","outline"],["matInput","","name","name","placeholder","Name","formControlName","name"],[4,"ngIf"],["for","email"],["matInput","","name","email","placeholder","Email Address","formControlName","email"],["for","organisation"],["matInput","","name","organisation","placeholder","Organisation","formControlName","organisation"],["for","phone"],["matInput","","name","phone","placeholder","Phone","formControlName","phone"],["color","primary","formControlName","assistance_required"],["color","primary","formControlName","visit_expected"]],template:function(n,e){1&n&&i.Gc(0,U,8,7,"div",0),2&n&&i.nc("ngIf",e.form)},directives:[h.n,m.r,m.m,m.g,g.c,u.b,m.c,m.l,m.e,g.b,p.a],styles:["label[_ngcontent-%COMP%]{min-width:100%;margin-right:1em;font-weight:700;font-size:.8em;width:100%;margin-top:0;margin-bottom:.5em}label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--pending)}label.error[_ngcontent-%COMP%]{color:var(--error)}.field[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}mat-form-field[_ngcontent-%COMP%]{width:100%}"]}),n})();class D{constructor(n){this.type=n.type||n.location||"other",this.position=n.position||n.map_id||{x:n.x/n.map_width,y:n.y/n.map_height},this.variance=n.variance||0,this.last_seen=n.last_seen||Math.floor((new Date).valueOf()/1e3),this.level=n.level,this.building=n.building,this.at_location=!!n.at_location}}var k=t("Rc+I"),j=t("PBFl"),G=t("0/Ep"),Q=t("csyo");let z=(()=>{class n{}return n.\u0275mod=i.Nb({type:n}),n.\u0275inj=i.Mb({factory:function(e){return new(e||n)},imports:[[h.c,m.h,m.p,o.f,k.b,p.b]]}),n})();i.yc(f,[o.h,j.b,o.d,G.a,o.e,h.n,V,o.c,Q.b],[]);var F=t("/It1"),E=t("YtkY"),A=(t("SUR7"),t("SQ91"));const J="/api/staff/v1/people";function N(n){const e=Object(A.a)({q:n});return Object(F.d)(`${J}${e?"?"+e:""}`).pipe(Object(E.a)(n=>n.map(n=>new s.b(n))))}function q(n){return Object(F.d)(`${J}/${encodeURIComponent(n)}`).pipe(Object(E.a)(n=>new s.b(n)))}}}]);
//# sourceMappingURL=day-view-day-view-module.85830f35b701451ae750.js.map