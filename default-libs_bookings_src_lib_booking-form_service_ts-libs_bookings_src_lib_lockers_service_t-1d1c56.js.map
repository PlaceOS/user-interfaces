{"version":3,"file":"default-libs_bookings_src_lib_booking-form_service_ts-libs_bookings_src_lib_lockers_service_t-1d1c56.js","mappings":"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AG,EAAE,EAAE,GAAG,GAAG,EAAE,EAAE,GAAG,GAAG,EAAE,EAAE,GAAG,GAAG,EAAE,EAAE,GAAG,GAAG,EAAE,EAAE,GAAG,GAAG,EAAE,EAAE,GAAG,GAAG,EAAE,EAAE,GAAG,GAAG,EAAE,EAAE,GAAG,GAAG,EAAE,EAAE,GAAG,GAAG,EAAE,EAAE,GAAG,GAAG,EAAE,EAAE,GAAG,GAAG,EAAE,EAAE,GAAG,GAAG,EAAE,EAAE,IAAI,GAAG,EAAE,EAAE,GAAG,GAAG,EAAE,EAAE,GAAG,GAAG,EAAE,EAAE,GAAG,GAAG,EAAE,EAAE,GAAG,GAAG,EAAE,EAAE,GAAG,GAAG,EAAE,EAAE,GAAG,GAAG,EAAE,EAAE,GAAG,GAAG,EAAE,EAAE,GAAG,GAAG,EAAE,EAAE,GAAG,GAAG,EAAE,EAAE,GAAG,GAAG,EAAE,EAAE,GAAG,GAAG,EAAE,EAAE,GAAG,GAAG,EAAE,EAAE,GAAG,GAAG,EAAE,EAAE,GAAG,GAAG,EAAE,EAAE,GAAG,GAAG,EAAE,EAAE,IAAI,GAAG,EAAE,EAAE,GAAG,GAAG,EAAE,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,EAAE,EAAE,IAAI,GAAG,EAAE,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,EAAE,EAAE,GAAG,GAAG,EAAE,EAAE,GAAG,GAAG,EAAE,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,EAAE,EAAE,GAAG,GAAG,EAAE,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,EAAE,IAAI,GAAG,GAAG,EAAE,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,EAAE,IAAI,GAAG,EAAE,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,EAAE,IAAI,GAAG,EAAE,GAAG,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,EAAE,IAAI,GAAG,EAAE,GAAG,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,EAAE,EAAE,IAAI,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,EAAE,EAAE,IAAI,GAAG,GAAG,EAAE,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,EAAE,EAAE,IAAI,GAAG,EAAE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,EAAE,EAAE,IAAI,GAAG,EAAE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,EAAE,EAAE,IAAI,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,EAAE,IAAI,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,EAAE,EAAE,IAAI,GAAG,GAAG,EAAE,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,EAAE,GAAG,IAAI,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,EAAE,EAAE,IAAI,GAAG,GAAG,EAAE,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,EAAE,GAAG,IAAI,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,EAAE,IAAI,GAAG,EAAE,GAAG,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,EAAE,IAAI,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,EAAE,IAAI,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,EAAE,IAAI,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,IAAI,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,EAAE,GAAG,IAAI,GAAG,EAAE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,GAAG,EAAE,IAAI,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,EAAE,GAAG,IAAI,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,EAAE,IAAI,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,EAAE,IAAI,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,IAAIpD,EAAUoC,KAAK,CAAC,IAAI,EAAE,EAAE,GAAG,EAAE,GAAG,GAAG,IAAI,EAAE,IAAI,GAAG,IAAI,GAAG,IAAI,IAAI,GAAG,EAAE,IAAI,IAAI,GAAG,GAAG,IAAI,IAAI,IAAI,GAAG,IAAI,IAAI,IAAI,IAAI,EAAE,GAAG,IAAI,EAAE,IAAI,IAAI,GAAG,IAAI,GAAG,GAAG,GAAG,GAAG,IAAI,IAAI,IAAI,IAAI,GAAG,IAAI,GAAG,GAAG,IAAI,IAAI,IAAI,IAAI,GAAG,IAAI,IAAI,IAAI,IAAI,EAAE,IAAI,GAAG,IAAI,IAAI,IAAI,EAAE,IAAI,IAAI,GAAG,IAAI,IAAI,GAAG,IAAI,IAAI,IAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,GAAG,GAAG,IAAI,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,IAAI,IAAI,GAAG,IAAI,IAAI,IAAI,GAAG,GAAG,GAAG,IAAI,IAAI,IAAI,GAAG,IAAI,GAAG,IAAI,IAAI,GAAG,GAAG,IAAI,GAAG,GAAG,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,GAAG,EAAE,IAAI,IAAI,IAAI,IAAI,IAAI,GAAG,GAAG,IAAI,GAAG,IAAI,IAAI,GAAG,IAAI,IAAI,GAAG,IAAI,IAAI,IAAI,IAAI,GAAG,IAAI,IAAI,IAAI,GAAG,GAAG,IAAI,IAAI,GAAG,GAAG,IAAI,GAAG,GAAG,GAAG,IAAI,GAAG,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,GAAG,IAAI,GAAG,IAAI,IAAI,GAAG,GAAG,GAAG,IAAI,IAAI,GAAG,GAAG,GAAG,GAAG,IAAI,GAAG,IAAI,GAAG,GAAG,GAAG,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,GAAG,GAAG,IAAI,IAAI,GAAG,IAAI,IAAI,IAAI,IAAI,GAAG,GAAG,GAAG,IAAI,GAAG,IAAI,IAAI,GAAG,IAAI,IAAI,IAAI,IAAI,GAAG,GAAG,IAAI,GAAG,GAAG,IAAI,IAAI,IAAI,IAAI,GAAG,GAAG,IAAI,GAAG,IAAI,IAAI,IAAI,GAAG,IAAI,GAAG,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,GAAG,GAAG,KAAKpC,EAAUmC,KAAK,CAAC,EAAE,EAAE,EAAE,EAAE,GAAG,GAAG,GAAG,IAAI,GAAG,GAAG,IAAI,IAAI,IAAI,IAAI,GAAG,GAAG,GAAG,IAAI,GAAG,GAAG,IAAI,IAAI,IAAI,IAAI,IAAI,EAAE,EAAE,GAAG,GAAG,GAAG,GAAG,IAAI,IAAI,GAAG,GAAG,IAAI,GAAG,GAAG,IAAI,GAAG,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,GAAG,GAAG,IAAI,EAAE,GAAG,GAAG,GAAG,GAAG,IAAI,GAAG,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,GAAG,IAAI,GAAG,IAAI,IAAI,GAAG,GAAG,IAAI,IAAI,IAAI,IAAI,GAAG,GAAG,GAAG,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,GAAG,IAAI,IAAI,IAAI,IAAI,IAAI,GAAG,IAAI,GAAG,GAAG,GAAG,IAAI,GAAG,GAAG,GAAG,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,GAAG,GAAG,IAAI,IAAI,IAAI,IAAI,IAAI,GAAG,IAAI,IAAI,IAAI,IAAI,GAAG,IAAI,IAAI,IAAI,GAAG,GAAG,GAAG,IAAI,IAAI,IAAI,IAAI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","names":["BOOKING_URLS","BookingFormService","AsyncHandler","view","this","_view","getValue","booking","_booking","newForm","Booking","form","reset","patchValue","cleanObject","extension_data","undefined","subscription","valueChanges","subscribe","storeForm","next","_options","type","constructor","_router","_settings","_org","_dialog","_payments","super","BehaviorSubject","JSON","parse","sessionStorage","getItem","_loading","asObservable","pipe","shareReplay","generateBookingForm","options","debounceTime","distinctUntilKeyChanged","switchMap","building","of","loadResourceList","tap","resources","map","resource","list","features","Array","forEach","_","push","unique","sort","a","b","localeCompare","combineLatest","merge","timer","filter","getRawValue","date","duration","queryBookings","period_start","getUnixTime","period_end","addMinutes","zones","zone_id","bookings","asset","groups","length","some","grp","currentUser","includes","bookable","every","zone","id","parent_id","find","bkn","asset_id","status","available_resources","asset_list","members","group","pop","events","NavigationEnd","url","clearForm","initialised","first","setOptions","setView","value","setFeature","feature","enable","splice","findIndex","e","resetForm","user","booked_by","removeItem","setItem","stringify","loadForm","data","booking_data","clearOldState","last_success","openBookingLinkModal","force","markAllAsTouched","valid","event","open","BookingLinkModalComponent","confirmPost","_this","checkQuestions","content","asset_name","format","details","openConfirmModal","title","icon","reason","loading","postFormForGroup","catch","notifyError","close","postForm","ignore_check","_this2","getInvalidFields","join","booking_type","checkResourceAvailable","all_day","set","hours","minutes","valueOf","payment_module","receipt","makePayment","resource_name","success","invoice","invoice_id","assets","updateAssetRequestsForResource","booked_by_email","host","result","saveBooking","description","user_name","name","user_id","department","approved","get","toPromise","_this3","extra_members","email","take","active_resource","map_id","level","levelWithID","_getNearbyResources","group_members","Promise","all","idx","user_email","i","organisation","_this4","ref","DeskQuestionsModalComponent","race","componentInstance","afterClosed","key","allowed_bookings","_this5","current","listChildMetadata","flatten","metadata","d","map_url","count","nearby_resources","item","findNearbyFeature","_angular_core__WEBPACK_IMPORTED_MODULE_30__","factory","_event","generateMicrosoftCalendarLink","generateGoogleCalendarLink","generateCalendarFileLink","_angular_core__WEBPACK_IMPORTED_MODULE_6__","MAT_DIALOG_DATA","selectors","$localize","i0","EventEmitter","FormGroup","travelled","FormControl","unwell","contact","submit","Object","keys","failure","emit","LockersService","setLevel","_level","active_building","_change","bld","showMetadata","catchError","PlaceMetadata","lockers_banks$","lockers","bank","bank_id","lockers$","level_id","saveLockers","updateMetadata","Date","now","_angular_core__WEBPACK_IMPORTED_MODULE_11__","VanillaQR","r","revision","imageTypes","bmp","gif","jpeg","jpg","png","tiff","webp","toTable","domElement","document","createElement","size","qrc","colorLight","colorDark","ecclevel","noBorder","borderSize","o","t","n","l","f","c","s","g","h","v","m","u","p","gexp","glog","R","Q","V","N1","N3","k","N2","N4","genframe","x","C","w","E","N","T","eccblocks","y","z","slice","adelta","vpat","charCodeAt","fmtword","init","tableWrite","canvasWrite","generateQRCode","code","toImage","src","prototype","getContext","lineWidth","Math","round","canvas","width","height","clearRect","fillStyle","fillRect","style","cssText","cloneNode","firstChild","insertBefore","appendChild","innerHTML","console","log","Error","Image","toDataURL","ExploreBookQrComponent","_data","space","location","origin","replace","_angular_core__WEBPACK_IMPORTED_MODULE_3__","ExploreBookingModalComponent","_event_form","max_duration","_dialog_ref","ngOnInit","organiser","save","app_name","toLowerCase","navigate","notifySuccess","_angular_core__WEBPACK_IMPORTED_MODULE_4__","ExploreSpaceInfoComponent","show_features","_details","_element","setTimeout","updateOffset","pos","nativeElement","getBoundingClientRect","x_pos","body","clientWidth","y_pos","clientHeight","available_until","MAP_FEATURE_DATA","ctx","DEFAULT_COLOURS","free","pending","reserved","busy","unknown","ExploreSpacesService","_state","spaces","unsubWith","_statuses","mod","getModule","binding","listen","handleBookingsChange","bind","handleStatusChange","updateActions","updateHoverElements","_bind","bookSpace","openEventLinkModal","display_name","_bookings","CalendarEvent","timeout","clearTimeout","updateStatus","style_map","colours","fill","opacity","setStyles","full_size","no_scale","Space","setFeatures","actions","action","callback","setActions","ExploreStateService","positions","_positions","active_level","_spaces","zoom","center","disable","_message","querySystems","limit","lvl","_features","disable_features","concat","_actions","disable_actions","_labels","labels","disable_labels","_styles","styles","style_mappings","text","display","disable_styles","level_list","levelsForBuilding","old_options","setPositions","feature_map","actions_map","setLabels","labels_map","_angular_core__WEBPACK_IMPORTED_MODULE_16__"],"sourceRoot":"webpack:///","sources":["./libs/bookings/src/lib/booking-form.service.ts","./libs/bookings/src/lib/booking-link-modal.component.ts","./libs/bookings/src/lib/desk-questions-modal.component.ts","./libs/bookings/src/lib/lockers.service.ts","./libs/common/src/lib/vanillaqr.min.ts","./libs/common/src/lib/qr-code.ts","./libs/explore/src/lib/explore-book-qr.component.ts","./libs/explore/src/lib/explore-booking-modal.component.ts","./libs/explore/src/lib/explore-space-info.component.ts","./libs/explore/src/lib/explore-spaces.service.ts","./libs/explore/src/lib/explore-state.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { MatDialog } from '@angular/material/dialog';\nimport { Event, NavigationEnd, Router } from '@angular/router';\nimport {\n    AsyncHandler,\n    currentUser,\n    flatten,\n    getInvalidFields,\n    notifyError,\n    openConfirmModal,\n    SettingsService,\n    unique,\n} from '@placeos/common';\nimport { cleanObject, listChildMetadata, PlaceZone } from '@placeos/ts-client';\nimport { format, getUnixTime, addMinutes, set } from 'date-fns';\nimport {\n    BehaviorSubject,\n    combineLatest,\n    merge,\n    Observable,\n    of,\n    timer,\n} from 'rxjs';\nimport {\n    debounceTime,\n    distinctUntilKeyChanged,\n    filter,\n    first,\n    map,\n    shareReplay,\n    switchMap,\n    take,\n    tap,\n} from 'rxjs/operators';\n\nimport { OrganisationService } from 'libs/organisation/src/lib/organisation.service';\nimport { User } from 'libs/users/src/lib/user.class';\nimport { Booking, BookingType } from './booking.class';\nimport { generateBookingForm } from './booking.utilities';\nimport { queryBookings, saveBooking } from './bookings.fn';\nimport { DeskQuestionsModalComponent } from './desk-questions-modal.component';\nimport { findNearbyFeature } from './booking.utilities';\nimport { PaymentsService } from 'libs/payments/src/lib/payments.service';\nimport { BookingLinkModalComponent } from './booking-link-modal.component';\nimport { updateAssetRequestsForResource } from 'libs/assets/src/lib/assets.fn';\n\nexport type BookingFlowView = 'form' | 'map' | 'confirm' | 'success';\n\nconst BOOKING_URLS = [\n    'book/desks',\n    'book/parking',\n    'book/new-desks',\n    'book/new-parking',\n];\n\nexport interface BookingFlowOptions {\n    /** Type of booking being made */\n    type: BookingType;\n    /** Zone to check available */\n    zone_id?: string;\n    /** List of features that the asset should associate */\n    features?: string[];\n    /** Whether booking is for a group */\n    group?: boolean;\n    /** Recurrence Pattern */\n    pattern?: 'none' | 'daily' | 'weekly' | 'monthly';\n    /** Recurrence ending */\n    recurr_end?: number;\n    /** List of group members to book for */\n    members?: User[];\n    /** Whether to only show favourite rooms */\n    show_fav?: boolean;\n}\n\nexport interface BookingAsset {\n    id: string;\n    map_id: string;\n    name: string;\n    bookable: boolean;\n    zone?: PlaceZone;\n    groups?: string[];\n    features: string[];\n}\n\n@Injectable({\n    providedIn: 'root',\n})\nexport class BookingFormService extends AsyncHandler {\n    private _view = new BehaviorSubject<BookingFlowView>('form');\n    private _options = new BehaviorSubject<BookingFlowOptions>({\n        type: 'desk',\n    });\n    private _booking = new BehaviorSubject<Booking>(null);\n    private _loading = new BehaviorSubject<string>('');\n\n    public last_success: Booking = new Booking(\n        JSON.parse(\n            sessionStorage.getItem('PLACEOS.last_booked_booking') || '{}'\n        )\n    );\n    public readonly loading = this._loading.asObservable();\n    public readonly options = this._options.pipe(shareReplay(1));\n    public readonly form = generateBookingForm();\n\n    public readonly resources: Observable<BookingAsset[]> = this.options.pipe(\n        debounceTime(300),\n        distinctUntilKeyChanged('type'),\n        switchMap(({ type }) => {\n            if (!this._org.building) return of([]);\n            switch (type) {\n                case 'desk':\n                    this._loading.next(`Loading desks...`);\n                    return this.loadResourceList('desks' as any);\n                case 'parking':\n                    this._loading.next(`Loading parking spaces...`);\n                    return this.loadResourceList('parking_spaces' as any);\n            }\n            return of([]);\n        }),\n        tap(() => this._loading.next(``)),\n        shareReplay(1)\n    );\n\n    public readonly features: Observable<string[]> = this.resources.pipe(\n        map((resource) => {\n            const list: string[] = [];\n            for (const { features } of resource) {\n                features instanceof Array\n                    ? features.forEach((_) => list.push(_))\n                    : null;\n            }\n            return unique(list).sort((a, b) => a.localeCompare(b));\n        }),\n        shareReplay(1)\n    );\n\n    public readonly available_resources = combineLatest([\n        this.options,\n        this.resources,\n        merge(this.form.valueChanges, timer(1000)),\n    ]).pipe(\n        filter(\n            () =>\n                this.form.getRawValue().date > 0 &&\n                this.form.getRawValue().duration > 0\n        ),\n        debounceTime(500),\n        tap(([{ type }]) =>\n            this._loading.next(`Checking ${type} availability...`)\n        ),\n        switchMap(([options, resources]) =>\n            queryBookings({\n                period_start: getUnixTime(this.form.getRawValue().date),\n                period_end: getUnixTime(\n                    addMinutes(\n                        this.form.getRawValue().date,\n                        this.form.getRawValue().duration || 24 * 60\n                    )\n                ),\n                type: options.type,\n                zones: options.zone_id,\n            }).pipe(\n                map((bookings) =>\n                    resources.filter(\n                        (asset) =>\n                            (!asset.groups?.length ||\n                                asset.groups.some((grp) =>\n                                    currentUser().groups.includes(grp)\n                                )) &&\n                            asset.bookable !== false &&\n                            (!options.features ||\n                                options.features?.every((_) =>\n                                    asset.features.includes(_)\n                                )) &&\n                            (!options.zone_id ||\n                                options.zone_id === asset.zone?.id ||\n                                options.zone_id === asset.zone?.parent_id) &&\n                            !bookings.find(\n                                (bkn) =>\n                                    bkn.asset_id === asset.id &&\n                                    bkn.status !== 'declined'\n                            )\n                    )\n                )\n            )\n        ),\n        tap(() => this._loading.next('')),\n        shareReplay(1)\n    );\n\n    public readonly grouped_availability = combineLatest([\n        this.options,\n        this.available_resources,\n    ]).pipe(\n        map(([options, resource]) => {\n            const groups = [];\n            const asset_list = [...resource].sort((a, b) =>\n                a.zone?.id?.localeCompare(b.zone?.id)\n            );\n            const members = options.members?.length\n                ? options.members\n                : [currentUser()];\n            while (asset_list.length) {\n                const group = [];\n                let asset = asset_list.pop();\n                while (group.length < members.length) {\n                    if (\n                        group.length &&\n                        !group.find((_) => _.zone?.id === asset.zone?.id)\n                    ) {\n                        break;\n                    }\n                    group.push(asset);\n                    asset = asset_list.pop();\n                }\n                if (group.length < members.length) continue;\n                groups.push(group);\n            }\n            return groups;\n        })\n    );\n\n    public get view() {\n        return this._view.getValue();\n    }\n\n    public get booking() {\n        return this._booking.getValue();\n    }\n\n    public newForm(booking: Booking = new Booking()) {\n        this.form.reset();\n        this.form.patchValue(\n            cleanObject(\n                {\n                    ...booking,\n                    ...booking.extension_data,\n                },\n                [null, undefined, '']\n            )\n        );\n        this.subscription(\n            'form_change',\n            this.form.valueChanges.subscribe(() => this.storeForm())\n        );\n        this._booking.next(booking);\n        this._options.next({ type: this._options.getValue().type });\n    }\n\n    constructor(\n        private _router: Router,\n        private _settings: SettingsService,\n        private _org: OrganisationService,\n        private _dialog: MatDialog,\n        private _payments: PaymentsService\n    ) {\n        super();\n        this.subscription(\n            'router.bookings',\n            this._router.events.subscribe((booking: Event) => {\n                if (\n                    booking instanceof NavigationEnd &&\n                    !BOOKING_URLS.find((_) => booking.url.includes(_))\n                ) {\n                    this.clearForm();\n                }\n            })\n        );\n        this._org.initialised\n            .pipe(first((_) => _))\n            .subscribe(() => this.setOptions({}));\n    }\n\n    public setView(value: BookingFlowView) {\n        this._view.next(value);\n    }\n\n    public setOptions(value: Partial<BookingFlowOptions>) {\n        this._options.next({ ...this._options.getValue(), ...value });\n    }\n\n    public setFeature(feature: string, enable: boolean) {\n        if (!feature?.length) return;\n        const features = this._options.getValue()?.features || [];\n        if (enable && !features.includes(feature)) features.push(feature);\n        if (!enable && features.includes(feature))\n            features.splice(\n                features.findIndex((e) => e === feature),\n                1\n            );\n        this.setOptions({ features });\n    }\n\n    public resetForm() {\n        const booking = this._booking.getValue();\n        this.form.reset({ user: currentUser(), booked_by: currentUser() });\n        this.form.patchValue(\n            cleanObject(\n                {\n                    ...(booking || {}),\n                    ...(booking?.extension_data || {}),\n                },\n                [null, undefined, '']\n            )\n        );\n        this._options.next({ type: this._options.getValue().type });\n    }\n\n    public clearForm() {\n        sessionStorage.removeItem('PLACEOS.booking_form');\n        sessionStorage.removeItem('PLACEOS.booking_form_options');\n        this.newForm();\n    }\n\n    public storeForm() {\n        sessionStorage.setItem(\n            'PLACEOS.booking_form',\n            JSON.stringify(this.form.getRawValue() || {})\n        );\n        sessionStorage.setItem(\n            'PLACEOS.booking_form_filters',\n            JSON.stringify(this._options.getValue() || {})\n        );\n    }\n\n    public loadForm() {\n        this.form.reset({ user: currentUser(), booked_by: currentUser() });\n        const data = JSON.parse(\n            sessionStorage.getItem('PLACEOS.booking_form') || '{}'\n        );\n        const booking = new Booking(data);\n        this._booking.next(booking);\n        const booking_data = cleanObject(\n            {\n                ...data,\n                ...(booking || {}),\n                ...(booking?.extension_data || {}),\n            },\n            [null, undefined, '']\n        );\n        this.form.patchValue(booking_data);\n        this.setOptions({\n            zone_id: this._org.building?.id,\n            ...JSON.parse(\n                sessionStorage.getItem('PLACEOS.booking_form_filters') || '{}'\n            ),\n        });\n    }\n\n    public clearOldState() {\n        sessionStorage.removeItem('PLACEOS.last_booked_booking');\n        this.last_success = new Booking();\n    }\n\n    public openBookingLinkModal(force: boolean = false) {\n        this.form.markAllAsTouched();\n        if (!this.form.valid && !force) return;\n        const event = new Booking({\n            ...this.booking,\n            ...this.form.getRawValue(),\n        });\n        this._dialog.open(BookingLinkModalComponent, { data: event });\n    }\n\n    public async confirmPost() {\n        await this.checkQuestions();\n        const options = this._options.getValue();\n        const value = this.form.getRawValue();\n        let content = `Would you like to book the ${options.type} ${\n            value.asset_name\n        } for ${format(value.date, 'dd MMM yyyy')}${\n            value.duration < 12 * 60\n                ? ' at ' + format(value.date, 'h:mm a')\n                : ''\n        }`;\n        if (options.group) {\n            content = `${content}.<br>You group members will be assigned desks nearby your selected desk.`;\n        }\n        const details = await openConfirmModal(\n            {\n                title: `Book ${options.type}`,\n                content,\n                icon: { content: 'event_available' },\n            },\n            this._dialog\n        );\n        if (details?.reason !== 'done') throw 'User cancelled';\n        details.loading('Performing booking request...');\n        if (options.group) {\n            await this.postFormForGroup().catch((_) => {\n                notifyError(JSON.stringify(_));\n                details.close();\n                throw _;\n            });\n        } else\n            await this.postForm().catch((_) => {\n                notifyError(JSON.stringify(_));\n                details.close();\n                throw _;\n            });\n        details.close();\n    }\n\n    public async postForm(ignore_check = false) {\n        if (!this.form) throw 'No form for booking';\n        if (!this.form.valid)\n            throw `Some form fields are invalid. [${getInvalidFields(\n                this.form\n            ).join(', ')}]`;\n        this.form.patchValue({\n            booking_type:\n                this.form.getRawValue().booking_type ||\n                this._options.getValue().type,\n        });\n        let value = this.form.getRawValue();\n        let booking = this._booking.getValue() || new Booking();\n        if (!ignore_check) {\n            await this.checkResourceAvailable(\n                value,\n                this._options.getValue().type\n            );\n        }\n        if (value.duration >= 12 * 60 || value.all_day) {\n            this.form.patchValue({\n                date: set(value.date, { hours: 11, minutes: 59 }).valueOf(),\n                duration: 12 * 60,\n            });\n            value = this.form.getRawValue();\n        }\n        if (this._payments.payment_module) {\n            const receipt = await this._payments.makePayment({\n                type: this._options.getValue().type,\n                resource_name: value.asset_name,\n                date: value.date,\n                duration: value.duration,\n                all_day: value.all_day,\n            });\n            if (!receipt?.success) return;\n            (value as any).extension_data = {\n                invoice: receipt,\n                invoice_id: receipt.invoice_id,\n            };\n        }\n        if (value.assets?.length || booking.extension_data.assets?.length) {\n            await updateAssetRequestsForResource(\n                `${value.booked_by_email}|${value.date}`,\n                {\n                    date: value.date,\n                    duration: value.duration,\n                    host: value.booked_by_email,\n                },\n                value.assets,\n                booking.extension_data.assets\n            );\n        }\n        this._loading.next('Saving booking');\n        const result = await saveBooking(\n            new Booking({\n                ...this._options.getValue(),\n                ...value,\n                description: value.asset_name || value.description,\n                user_name: value.user?.name,\n                user_id:\n                    (!value.user?.id?.includes('@') ? value?.user?.id : '') ||\n                    currentUser()?.id,\n                extension_data: {\n                    ...((value as any).extension_data || {}),\n                    department:\n                        value.user?.department || currentUser()?.department,\n                },\n                approved: !!this._settings.get('app.bookings.no_approval'),\n            })\n        )\n            .toPromise()\n            .catch((e) => {\n                this._loading.next('');\n                throw e;\n            });\n        this._loading.next('');\n        const { booking_type } = value;\n        this.clearForm();\n        this.form?.patchValue({ booking_type });\n        this.last_success = result;\n        sessionStorage.setItem(\n            'PLACEOS.last_booked_booking',\n            JSON.stringify(result)\n        );\n        this.setView('success');\n        return result;\n    }\n\n    public async postFormForGroup() {\n        const { members, group, type } = this._options.getValue();\n        if (!group) throw 'No group available to book for';\n        const extra_members = members.filter(\n            (_) => _.email !== currentUser().email\n        );\n        if (extra_members.length <= 0)\n            throw 'No members in your group to book for.';\n        const form = this.form.value;\n        const asset_list = await this.available_resources\n            .pipe(take(1))\n            .toPromise();\n        const active_resource = asset_list.find(\n            (_) => _.id === form.asset_id || _.map_id === form.asset_id\n        );\n        const level = this._org.levelWithID([active_resource.zone?.id]);\n        const resources = [\n            active_resource,\n            ...(await this._getNearbyResources(\n                level.map_id,\n                form.asset_id,\n                asset_list,\n                extra_members.length\n            )),\n        ];\n        const group_members = unique(\n            [currentUser(), ...extra_members],\n            'email'\n        );\n        await Promise.all(\n            group_members.map((_, idx) =>\n                this.checkResourceAvailable(\n                    {\n                        ...form,\n                        asset_id: resources[idx].map_id || resources[idx].id,\n                        user_email: _.email,\n                    },\n                    type\n                )\n            )\n        );\n        for (let i = 0; i < group_members.length; i++) {\n            const user = group_members[i];\n            const asset = resources[i];\n            this.form.patchValue({\n                ...form,\n                user: user as any,\n                user_email: user.email,\n                user_id: user.id,\n                asset_id: asset?.id,\n                asset_name: asset.name,\n                description: asset.name,\n                map_id: asset?.map_id || asset?.id,\n                zones: asset.zone\n                    ? unique([\n                          this._org.organisation.id,\n                          asset.zone?.parent_id,\n                          asset.zone?.id,\n                      ])\n                    : [this._org.organisation.id],\n            });\n            this.postForm(true);\n        }\n    }\n\n    private async checkQuestions() {\n        if (this._settings.get('app.desks.ignore_questions') !== false) return;\n        const ref = this._dialog.open(DeskQuestionsModalComponent);\n        const result = await Promise.race([\n            ref.componentInstance.event\n                .pipe(first((_) => _.reason === 'done'))\n                .toPromise(),\n            ref.afterClosed().toPromise(),\n        ]);\n        if (result?.reason !== 'done') throw 'User cancelled';\n        const form = ref.componentInstance.form.getRawValue();\n        for (const key in form) {\n            if (form[key]) throw 'User failed questionaire';\n        }\n        ref.close();\n    }\n\n    /** Check if the given resource is available for the selected user to book */\n    private async checkResourceAvailable(\n        { asset_id, date, duration, user_email, all_day }: Partial<Booking>,\n        type: BookingType\n    ) {\n        duration = all_day ? 12 * 60 : duration || 60;\n        const bookings = await queryBookings({\n            period_start: getUnixTime(date),\n            period_end: getUnixTime(date + duration * 60 * 1000),\n            type,\n        }).toPromise();\n        if (bookings.find((_) => _.asset_id === asset_id)) {\n            if (asset_id.includes('@')) {\n                throw `${asset_id} already has an invite for the selected time`;\n            } else {\n                throw `${asset_id} is not available at the selected time`;\n            }\n        }\n        const allowed_bookings =\n            this._settings.get(`app.booking.allowed_daily_${type}_count`) ?? 1;\n        if (\n            allowed_bookings > 0 &&\n            bookings.filter(\n                (_) =>\n                    _.user_email === (user_email || currentUser()?.email) &&\n                    _.status !== 'declined'\n            ).length >= allowed_bookings\n        ) {\n            const current = user_email === currentUser()?.email;\n            throw `${current ? 'You' : user_email} already ${\n                current ? 'have' : 'has'\n            } a ${type} booked`;\n        }\n        return true;\n    }\n\n    public loadResourceList(type: BookingType) {\n        return listChildMetadata(this._org.building.id, {\n            name: type,\n        }).pipe(\n            map((data) =>\n                flatten(\n                    data.map((_) =>\n                        (_.metadata[type]?.details instanceof Array\n                            ? _.metadata[type]?.details\n                            : []\n                        ).map((d) => ({\n                            ...d,\n                            id: d.id || d.map_id,\n                            zone: _.zone,\n                        }))\n                    )\n                )\n            )\n        );\n    }\n\n    private async _getNearbyResources(\n        map_url: string,\n        id: string,\n        resources: BookingAsset[],\n        count: number\n    ): Promise<BookingAsset[]> {\n        const nearby_resources = [];\n        let asset_list = resources.filter(\n            (_) => _.id !== id && _.map_id !== id\n        );\n        for (let i = 0; i < count; i++) {\n            const item = await findNearbyFeature(\n                map_url,\n                id,\n                asset_list.map((_) => _.map_id || _.id)\n            );\n            if (item) {\n                nearby_resources.push(\n                    resources.find((_) => _.id === item || _.map_id === item)\n                );\n                asset_list = asset_list.filter(\n                    (_) => _.id !== item && _.map_id !== item\n                );\n            }\n        }\n        return nearby_resources;\n    }\n}\n","import { Component, Inject } from '@angular/core';\nimport { MAT_DIALOG_DATA } from '@angular/material/dialog';\nimport { SettingsService } from 'libs/common/src/lib/settings.service';\nimport {\n    generateCalendarFileLink,\n    generateGoogleCalendarLink,\n    generateMicrosoftCalendarLink,\n} from 'libs/common/src/lib/calendar-links';\nimport { Booking } from './booking.class';\n\n@Component({\n    selector: 'booking-link-modal',\n    template: `\n        <div class=\"p-4 w-full pb-2\">Add event to your calendar</div>\n        <div class=\"flex flex-col items-center space-y-4 p-4 relative\">\n            <a\n                button\n                matRipple\n                class=\"flex items-center p-2 space-x-2 pr-4 w-64 rounded inverse\"\n                [href]=\"outlook_link | sanitize: 'url'\"\n                target=\"_blank\"\n                rel=\"noopener noreferer\"\n            >\n                <img src=\"assets/icons/outlook.svg\" class=\"w-6\" />\n                <span i18n>Create in Outlook</span>\n            </a>\n            <a\n                button\n                matRipple\n                class=\"flex items-center p-2 space-x-2 pr-4 w-64 rounded inverse\"\n                [href]=\"google_link | sanitize: 'url'\"\n                target=\"_blank\"\n                rel=\"noopener noreferer\"\n            >\n                <img src=\"assets/icons/gcal.svg\" class=\"w-6\" />\n                <span i18n>Create in Google Calendar</span>\n            </a>\n            <a\n                button\n                matRipple\n                class=\"flex items-center p-2 space-x-2 pr-4 w-64 rounded inverse\"\n                [href]=\"ical_link | safe: 'url'\"\n                target=\"_blank\"\n                rel=\"noopener noreferer\"\n            >\n                <app-icon class=\"text-xl\">download</app-icon>\n                <span i18n>Download iCal File</span>\n            </a>\n        </div>\n        <button icon mat-dialog-close class=\"absolute top-2 right-0\">\n            <app-icon>close</app-icon>\n        </button>\n    `,\n    styles: [\n        `\n            :host {\n                position: relative;\n            }\n        `,\n    ],\n})\nexport class BookingLinkModalComponent {\n    public readonly outlook_link = generateMicrosoftCalendarLink(\n        this._event as any\n    );\n    public readonly google_link = generateGoogleCalendarLink(\n        this._event as any\n    );\n    public readonly ical_link = generateCalendarFileLink(this._event as any);\n\n    constructor(\n        @Inject(MAT_DIALOG_DATA) private _event: Booking,\n        private _settings: SettingsService\n    ) {}\n}\n","import { Component, EventEmitter, OnInit, Output } from '@angular/core';\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\nimport { DialogEvent, notifyError } from '@placeos/common';\n\n@Component({\n    selector: 'desk-question-modal',\n    template: `\n        <div *ngIf=\"!failure; else fail_state\" class=\"relative\">\n            <h2 class=\"p-4 text-xl\" i18n>COVID-19 Questionnaire</h2>\n            <main class=\"p-4\" [formGroup]=\"form\">\n                <div class=\"flex flex-col mb-4\">\n                    <label i18n>\n                        Have you travelled overseas within the last 14\n                        days?<span>*</span>\n                    </label>\n                    <mat-radio-group\n                        formControlName=\"travelled\"\n                        class=\"space-x-2\"\n                    >\n                        <mat-radio-button [value]=\"true\">Yes</mat-radio-button>\n                        <mat-radio-button [value]=\"false\">No</mat-radio-button>\n                    </mat-radio-group>\n                </div>\n                <div class=\"flex flex-col mb-4\">\n                    <label i18n>\n                        Are you unwell or experiencing any cold or flu-like\n                        symptoms?<span>*</span>\n                    </label>\n                    <mat-radio-group formControlName=\"unwell\" class=\"space-x-2\">\n                        <mat-radio-button [value]=\"true\">Yes</mat-radio-button>\n                        <mat-radio-button [value]=\"false\">No</mat-radio-button>\n                    </mat-radio-group>\n                </div>\n                <div class=\"flex flex-col\">\n                    <label i18n>\n                        Have you had contact with anyone with suspected\n                        COVID-19?<span>*</span>\n                    </label>\n                    <mat-radio-group\n                        formControlName=\"contact\"\n                        class=\"space-x-2\"\n                    >\n                        <mat-radio-button [value]=\"true\">Yes</mat-radio-button>\n                        <mat-radio-button [value]=\"false\">No</mat-radio-button>\n                    </mat-radio-group>\n                </div>\n            </main>\n            <footer class=\"flex justify-center items-center p-2\">\n                <button btn matRipple (click)=\"submit()\" i18n>Submit</button>\n            </footer>\n            <button close icon matRipple mat-dialog-close>\n                <i class=\"material-icons\">close</i>\n            </button>\n        </div>\n        <ng-template #fail_state>\n            <main failure class=\"pt-8 relative\">\n                <p class=\"p-4\" i18n>\n                    Your request to work from the office has been rejected based\n                    on your response to the compulsory Covid-19 questions.\n                    Please feel free to submit a new request when circumstances\n                    change in a way that changes your answer to the questions.\n                </p>\n                <button close icon matRipple mat-dialog-close>\n                    <i class=\"material-icons\">close</i>\n                </button>\n            </main>\n        </ng-template>\n    `,\n    styles: [\n        `\n            main {\n                width: 24rem;\n                max-width: calc(100vw - 4.5rem);\n            }\n\n            [close] {\n                position: absolute;\n                top: 0.5rem;\n                right: 0.5rem;\n            }\n        `,\n    ],\n})\nexport class DeskQuestionsModalComponent {\n    @Output() public event = new EventEmitter<DialogEvent>();\n\n    public form = new FormGroup({\n        travelled: new FormControl(false),\n        unwell: new FormControl(false),\n        contact: new FormControl(false),\n    });\n    public failure: boolean;\n\n    public submit() {\n        this.form.markAllAsTouched();\n        if (\n            Object.keys(this.form.value).find(\n                (key) =>\n                    this.form.value[key] === true ||\n                    this.form.value[key] === 'true'\n            )\n        ) {\n            this.failure = true;\n            return;\n        }\n        this.event.emit({ reason: 'done' });\n    }\n}\n","import { Injectable } from '@angular/core';\nimport { OrganisationService } from '@placeos/organisation';\nimport {\n    PlaceMetadata,\n    showMetadata,\n    updateMetadata,\n} from '@placeos/ts-client';\nimport { BehaviorSubject, combineLatest, of } from 'rxjs';\nimport {\n    catchError,\n    filter,\n    map,\n    shareReplay,\n    switchMap,\n} from 'rxjs/operators';\n\nexport interface LockerBank {\n    id: string;\n    map_id: string;\n    level_id: string;\n    name: string;\n    height: number;\n    lockers: Locker[];\n}\n\nexport interface Locker {\n    id: string;\n    bank_id: string;\n    name: string;\n    accessible: boolean;\n    bookable: boolean;\n    position: [number, number];\n    size: [number, number];\n}\n\n@Injectable({\n    providedIn: 'root',\n})\nexport class LockersService {\n    private _level = new BehaviorSubject('');\n    private _change = new BehaviorSubject(0);\n    public readonly lockers_banks$ = combineLatest([\n        this._org.active_building,\n        this._change,\n    ]).pipe(\n        filter(([bld]) => !!bld),\n        switchMap(([bld]) =>\n            showMetadata(bld.id, 'lockers').pipe(\n                catchError(() => of(new PlaceMetadata()))\n            )\n        ),\n        map((_) => (_.details || []) as LockerBank[]),\n        shareReplay(1)\n    );\n\n    public readonly lockers$ = this.lockers_banks$.pipe(\n        map((_) => {\n            const lockers = [];\n            for (const bank of _) {\n                lockers.push(\n                    ...bank.lockers.map(\n                        (_) => ({ ..._, bank_id: bank.id } as Locker)\n                    )\n                );\n            }\n            return lockers;\n        })\n    );\n\n    public readonly filtered_lockers$ = combineLatest([\n        this._level,\n        this.lockers$,\n    ]).pipe(\n        map(([level, lockers]) =>\n            lockers.filter(\n                (_) => (!level || _.level_id === level) && _.bookable\n            )\n        )\n    );\n\n    public setLevel(level: string) {\n        this._level.next(level);\n    }\n\n    constructor(private _org: OrganisationService) {}\n\n    public async saveLockers(lockers: LockerBank[]) {\n        await updateMetadata(this._org.building.id, {\n            name: 'lockers',\n            description: '',\n            details: lockers,\n        });\n        this._change.next(Date.now());\n    }\n}\n","// @ts-nocheck\n/** From https://github.com/chuckfairy/VanillaQR.js */\nexport function VanillaQR(r){var e=this;r=\"object\"==typeof r?r:{},e.revision=3,e.imageTypes={bmp:\"image/bmp\",gif:\"image/gif\",jpeg:\"image/jpeg\",jpg:\"image/jpg\",png:\"image/png\",\"svg+xml\":\"image/svg+xml\",tiff:\"image/tiff\",webp:\"image/webp\",\"x-icon\":\"image/x-icon\"},e.toTable=r.toTable,e.domElement=e.toTable?document.createElement(\"div\"):document.createElement(\"canvas\"),e.url=r.url||\"\",e.size=r.size||280,e.qrc=!1,e.colorLight=r.colorLight||\"#fff\",e.colorDark=r.colorDark||\"#000\",e.ecclevel=r.ecclevel||1,e.noBorder=r.noBorder,e.borderSize=r.borderSize||4;var o,a,t,i,n,l,f,c=[],s=[],d=[],g=[],h=[],v=[],m=function(r,e){var o;r>e&&(o=r,r=e,e=o),o=e,o*=e,o+=e,o>>=1,g[o+=r]=1},u=function(r,e){var o;for(d[r+t*e]=1,o=-2;o<2;o++)d[r+o+t*(e-2)]=1,d[r-2+t*(e+o+1)]=1,d[r+2+t*(e+o)]=1,d[r+o+1+t*(e+2)]=1;for(o=0;o<2;o++)m(r-1,e+o),m(r+1,e-o),m(r-o,e-1),m(r+o,e+1)},p=function(r){for(;r>=255;)r=((r-=255)>>8)+(255&r);return r},b=function(r,e,o,a){var t,i,n,l=VanillaQR.gexp,f=VanillaQR.glog;for(t=0;t<a;t++)c[o+t]=0;for(t=0;t<e;t++){if(255!=(n=f[c[r+t]^c[o]]))for(i=1;i<a;i++)c[o+i-1]=c[o+i]^l[p(n+v[a-i])];else for(i=o;i<o+a;i++)c[i]=c[i+1];c[o+a-1]=255==n?0:l[p(n+v[0])]}},R=function(r,e){var o;return r>e&&(o=r,r=e,e=o),o=e,o+=e*e,o>>=1,g[o+=r]},Q=function(r){var e,o,a,i;switch(r){case 0:for(o=0;o<t;o++)for(e=0;e<t;e++)e+o&1||R(e,o)||(d[e+o*t]^=1);break;case 1:for(o=0;o<t;o++)for(e=0;e<t;e++)1&o||R(e,o)||(d[e+o*t]^=1);break;case 2:for(o=0;o<t;o++)for(a=0,e=0;e<t;e++,a++)3==a&&(a=0),a||R(e,o)||(d[e+o*t]^=1);break;case 3:for(i=0,o=0;o<t;o++,i++)for(3==i&&(i=0),a=i,e=0;e<t;e++,a++)3==a&&(a=0),a||R(e,o)||(d[e+o*t]^=1);break;case 4:for(o=0;o<t;o++)for(a=0,i=o>>1&1,e=0;e<t;e++,a++)3==a&&(a=0,i=!i),i||R(e,o)||(d[e+o*t]^=1);break;case 5:for(i=0,o=0;o<t;o++,i++)for(3==i&&(i=0),a=0,e=0;e<t;e++,a++)3==a&&(a=0),(e&o&1)+!(!a|!i)||R(e,o)||(d[e+o*t]^=1);break;case 6:for(i=0,o=0;o<t;o++,i++)for(3==i&&(i=0),a=0,e=0;e<t;e++,a++)3==a&&(a=0),(e&o&1)+(a&&a==i)&1||R(e,o)||(d[e+o*t]^=1);break;case 7:for(i=0,o=0;o<t;o++,i++)for(3==i&&(i=0),a=0,e=0;e<t;e++,a++)3==a&&(a=0),(a&&a==i)+(e+o&1)&1||R(e,o)||(d[e+o*t]^=1)}},V=function(r){var e,o=0;for(e=0;e<=r;e++)h[e]>=5&&(o+=VanillaQR.N1+h[e]-5);for(e=3;e<r-1;e+=2)h[e-2]==h[e+2]&&h[e+2]==h[e-1]&&h[e-1]==h[e+1]&&3*h[e-1]==h[e]&&(0==h[e-3]||e+3>r||3*h[e-3]>=4*h[e]||3*h[e+3]>=4*h[e])&&(o+=VanillaQR.N3);return o},k=function(){var r,e,o,a,i,n=0,l=0;for(e=0;e<t-1;e++)for(r=0;r<t-1;r++)(d[r+t*e]&&d[r+1+t*e]&&d[r+t*(e+1)]&&d[r+1+t*(e+1)]||!(d[r+t*e]||d[r+1+t*e]||d[r+t*(e+1)]||d[r+1+t*(e+1)]))&&(n+=VanillaQR.N2);for(e=0;e<t;e++){for(h[0]=0,o=a=r=0;r<t;r++)(i=d[r+t*e])==a?h[o]++:h[++o]=1,l+=(a=i)?1:-1;n+=V(o)}l<0&&(l=-l);var f=l,c=0;for(f+=f<<2,f<<=1;f>t*t;)f-=t*t,c++;for(n+=c*VanillaQR.N4,r=0;r<t;r++){for(h[0]=0,o=a=e=0;e<t;e++)(i=d[r+t*e])==a?h[o]++:h[++o]=1,a=i;n+=V(o)}return n};e.genframe=function(r){var e,h,V,x,C,w,E,N,T=VanillaQR.eccblocks,y=VanillaQR.gexp,z=VanillaQR.glog;x=r.length,a=0;do{if(a++,V=4*(o-1)+16*(a-1),i=T[V++],n=T[V++],l=T[V++],f=T[V],x<=(V=l*(i+n)+n-3+(a<=9)))break}while(a<40);for(t=17+4*a,C=l+(l+f)*(i+n)+n,x=0;x<C;x++)s[x]=0;for(c=r.slice(0),x=0;x<t*t;x++)d[x]=0;for(x=0;x<(t*(t+1)+1)/2;x++)g[x]=0;for(x=0;x<3;x++){for(V=0,h=0,1==x&&(V=t-7),2==x&&(h=t-7),d[h+3+t*(V+3)]=1,e=0;e<6;e++)d[h+e+t*V]=1,d[h+t*(V+e+1)]=1,d[h+6+t*(V+e)]=1,d[h+e+1+t*(V+6)]=1;for(e=1;e<5;e++)m(h+e,V+1),m(h+1,V+e+1),m(h+5,V+e),m(h+e+1,V+5);for(e=2;e<4;e++)d[h+e+t*(V+2)]=1,d[h+2+t*(V+e+1)]=1,d[h+4+t*(V+e)]=1,d[h+e+1+t*(V+4)]=1}if(a>1)for(x=VanillaQR.adelta[a],h=t-7;;){for(e=t-7;e>x-3&&(u(e,h),!(e<x));)e-=x;if(h<=x+9)break;u(6,h-=x),u(h,6)}for(d[8+t*(t-8)]=1,h=0;h<7;h++)m(7,h),m(t-8,h),m(7,h+t-7);for(e=0;e<8;e++)m(e,7),m(e+t-8,7),m(e,t-8);for(e=0;e<9;e++)m(e,8);for(e=0;e<8;e++)m(e+t-8,8),m(8,e);for(h=0;h<7;h++)m(8,h+t-7);for(e=0;e<t-14;e++)1&e?(m(8+e,6),m(6,8+e)):(d[8+e+6*t]=1,d[6+t*(8+e)]=1);if(a>6)for(x=VanillaQR.vpat[a-7],V=17,e=0;e<6;e++)for(h=0;h<3;h++,V--)1&(V>11?a>>V-12:x>>V)?(d[5-e+t*(2-h+t-11)]=1,d[2-h+t-11+t*(5-e)]=1):(m(5-e,2-h+t-11),m(2-h+t-11,5-e));for(h=0;h<t;h++)for(e=0;e<=h;e++)d[e+t*h]&&m(e,h);for(C=c.length,w=0;w<C;w++)s[w]=c.charCodeAt(w);if(c=s.slice(0),C>=(e=l*(i+n)+n)-2&&(C=e-2,a>9&&C--),w=C,a>9){for(c[w+2]=0,c[w+3]=0;w--;)x=c[w],c[w+3]|=255&x<<4,c[w+2]=x>>4;c[2]|=255&C<<4,c[1]=C>>4,c[0]=64|C>>12}else{for(c[w+1]=0,c[w+2]=0;w--;)x=c[w],c[w+2]|=255&x<<4,c[w+1]=x>>4;c[1]|=255&C<<4,c[0]=64|C>>4}for(w=C+3-(a<10);w<e;)c[w++]=236,c[w++]=17;for(v[0]=1,w=0;w<f;w++){for(v[w+1]=1,E=w;E>0;E--)v[E]=v[E]?v[E-1]^y[p(z[v[E]]+w)]:v[E-1];v[0]=y[p(z[v[0]]+w)]}for(w=0;w<=f;w++)v[w]=z[v[w]];for(V=e,h=0,w=0;w<i;w++)b(h,l,V,f),h+=l,V+=f;for(w=0;w<n;w++)b(h,l+1,V,f),h+=l+1,V+=f;for(h=0,w=0;w<l;w++){for(E=0;E<i;E++)s[h++]=c[w+E*l];for(E=0;E<n;E++)s[h++]=c[i*l+w+E*(l+1)]}for(E=0;E<n;E++)s[h++]=c[i*l+w+E*(l+1)];for(w=0;w<f;w++)for(E=0;E<i+n;E++)s[h++]=c[e+w+E*f];for(c=s,e=h=t-1,V=C=1,N=(l+f)*(i+n)+n,w=0;w<N;w++)for(x=c[w],E=0;E<8;E++,x<<=1){128&x&&(d[e+t*h]=1);do{C?e--:(e++,V?0!=h?h--:(V=!V,6==(e-=2)&&(e--,h=9)):h!=t-1?h++:(V=!V,6==(e-=2)&&(e--,h-=8))),C=!C}while(R(e,h))}for(c=d.slice(0),x=0,h=3e4,V=0;V<8&&(Q(V),(e=k())<h&&(h=e,x=V),7!=x);V++)d=c.slice(0);for(x!=V&&Q(x),h=VanillaQR.fmtword[x+(o-1<<3)],V=0;V<8;V++,h>>=1)1&h&&(d[t-1-V+8*t]=1,V<6?d[8+t*V]=1:d[8+t*(V+1)]=1);for(V=0;V<7;V++,h>>=1)1&h&&(d[8+t*(t-7+V)]=1,V?d[6-V+8*t]=1:d[7+8*t]=1);return d},e.init=function(){o=e.ecclevel;var r=e.genframe(e.url);e.toTable?e.tableWrite(r,t):e.canvasWrite(r,t)},e.init()}VanillaQR.prototype={canvasWrite:function(r,e){if(!this.qrc&&(this.qrc=this.getContext(this.domElement),!this.qrc))return this.toTable=!0,this.domElement=document.createElement(\"div\"),void this.tableWrite(r,e);var o=this.size,a=this.qrc;a.lineWidth=1;var t=o;t/=e+10,t=Math.round(t-.5);var i=4;this.noBorder?(a.canvas.width=a.canvas.height=t*e,i=0):a.canvas.width=a.canvas.height=o,a.clearRect(0,0,o,o),a.fillStyle=this.colorLight,a.fillRect(0,0,t*(e+8),t*(e+8)),a.fillStyle=this.colorDark;for(var n=0;n<e;n++)for(var l=0;l<e;l++)r[l*e+n]&&a.fillRect(t*(i+n),t*(i+l),t,t)},tableWrite:function(r,e){var o=this,a=Math.round(this.size/e-3.5)+\"px\",t=e+(o.noBorder?0:2*o.borderSize),i=o.borderSize,n=\"width:\"+a+\";height:\"+a+\";\",l=o.colorLight,f=o.colorDark,c=document.createElement(\"table\");c.style.cssText=\"border:0;border-collapse:collapse;\";for(var s,d=document.createElement(\"tr\"),g=document.createElement(\"td\"),h=function(){return g.cloneNode()},v=function(){var r=h();return r.style.cssText=n+\"background:\"+l,r},m=function(r){for(var e=r.firstChild,o=0;o<i;o++)r.insertBefore(v(),e),r.appendChild(v())},u=0;u<e;u++){var p=d.cloneNode();c.appendChild(p);for(var b=0;b<e;b++)if(1===r[u*e+b]){var R=(s=void 0,(s=h()).style.cssText=n+\"background:\"+f,s);p.appendChild(R)}else{var Q=v();p.appendChild(Q)}o.noBorder||m(p)}o.noBorder||function(r){for(var e=r.firstChild,a=0;a<o.borderSize;a++){for(var i=d.cloneNode(),n=0;n<t;n++){var l=v();i.appendChild(l)}r.appendChild(i),r.insertBefore(i.cloneNode(!0),e)}}(c),o.domElement.innerHTML=\"\",o.domElement.appendChild(c)},getContext:function(r){return r.getContext&&r.getContext(\"2d\")?r.getContext(\"2d\"):(console.log(\"Browser does not have 2d Canvas support\"),!1)},toImage:function(r){if(this.qrc){var e=this.imageTypes[r];if(!e)throw new Error(r+\" is not a valid image type \");var o=new Image;return o.src=this.domElement.toDataURL(e),o}}},VanillaQR.adelta=[0,11,15,19,23,27,31,16,18,20,22,24,26,28,20,22,24,24,26,28,28,22,24,24,26,26,28,28,24,24,26,26,26,28,28,24,26,26,26,28,28],VanillaQR.vpat=[3220,1468,2713,1235,3062,1890,2119,1549,2344,2936,1117,2583,1330,2470,1667,2249,2028,3780,481,4011,142,3098,831,3445,592,2517,1776,2234,1951,2827,1070,2660,1345,3177],VanillaQR.fmtword=[30660,29427,32170,30877,26159,25368,27713,26998,21522,20773,24188,23371,17913,16590,20375,19104,13663,12392,16177,14854,9396,8579,11994,11245,5769,5054,7399,6608,1890,597,3340,2107],VanillaQR.eccblocks=[1,0,19,7,1,0,16,10,1,0,13,13,1,0,9,17,1,0,34,10,1,0,28,16,1,0,22,22,1,0,16,28,1,0,55,15,1,0,44,26,2,0,17,18,2,0,13,22,1,0,80,20,2,0,32,18,2,0,24,26,4,0,9,16,1,0,108,26,2,0,43,24,2,2,15,18,2,2,11,22,2,0,68,18,4,0,27,16,4,0,19,24,4,0,15,28,2,0,78,20,4,0,31,18,2,4,14,18,4,1,13,26,2,0,97,24,2,2,38,22,4,2,18,22,4,2,14,26,2,0,116,30,3,2,36,22,4,4,16,20,4,4,12,24,2,2,68,18,4,1,43,26,6,2,19,24,6,2,15,28,4,0,81,20,1,4,50,30,4,4,22,28,3,8,12,24,2,2,92,24,6,2,36,22,4,6,20,26,7,4,14,28,4,0,107,26,8,1,37,22,8,4,20,24,12,4,11,22,3,1,115,30,4,5,40,24,11,5,16,20,11,5,12,24,5,1,87,22,5,5,41,24,5,7,24,30,11,7,12,24,5,1,98,24,7,3,45,28,15,2,19,24,3,13,15,30,1,5,107,28,10,1,46,28,1,15,22,28,2,17,14,28,5,1,120,30,9,4,43,26,17,1,22,28,2,19,14,28,3,4,113,28,3,11,44,26,17,4,21,26,9,16,13,26,3,5,107,28,3,13,41,26,15,5,24,30,15,10,15,28,4,4,116,28,17,0,42,26,17,6,22,28,19,6,16,30,2,7,111,28,17,0,46,28,7,16,24,30,34,0,13,24,4,5,121,30,4,14,47,28,11,14,24,30,16,14,15,30,6,4,117,30,6,14,45,28,11,16,24,30,30,2,16,30,8,4,106,26,8,13,47,28,7,22,24,30,22,13,15,30,10,2,114,28,19,4,46,28,28,6,22,28,33,4,16,30,8,4,122,30,22,3,45,28,8,26,23,30,12,28,15,30,3,10,117,30,3,23,45,28,4,31,24,30,11,31,15,30,7,7,116,30,21,7,45,28,1,37,23,30,19,26,15,30,5,10,115,30,19,10,47,28,15,25,24,30,23,25,15,30,13,3,115,30,2,29,46,28,42,1,24,30,23,28,15,30,17,0,115,30,10,23,46,28,10,35,24,30,19,35,15,30,17,1,115,30,14,21,46,28,29,19,24,30,11,46,15,30,13,6,115,30,14,23,46,28,44,7,24,30,59,1,16,30,12,7,121,30,12,26,47,28,39,14,24,30,22,41,15,30,6,14,121,30,6,34,47,28,46,10,24,30,2,64,15,30,17,4,122,30,29,14,46,28,49,10,24,30,24,46,15,30,4,18,122,30,13,32,46,28,48,14,24,30,42,32,15,30,20,4,117,30,40,7,47,28,43,22,24,30,10,67,15,30,19,6,118,30,18,31,47,28,34,34,24,30,20,61,15,30],VanillaQR.glog=[255,0,1,25,2,50,26,198,3,223,51,238,27,104,199,75,4,100,224,14,52,141,239,129,28,193,105,248,200,8,76,113,5,138,101,47,225,36,15,33,53,147,142,218,240,18,130,69,29,181,194,125,106,39,249,185,201,154,9,120,77,228,114,166,6,191,139,98,102,221,48,253,226,152,37,179,16,145,34,136,54,208,148,206,143,150,219,189,241,210,19,92,131,56,70,64,30,66,182,163,195,72,126,110,107,58,40,84,250,133,186,61,202,94,155,159,10,21,121,43,78,212,229,172,115,243,167,87,7,112,192,247,140,128,99,13,103,74,222,237,49,197,254,24,227,165,153,119,38,184,180,124,17,68,146,217,35,32,137,46,55,63,209,91,149,188,207,205,144,135,151,178,220,252,190,97,242,86,211,171,20,42,93,158,132,60,57,83,71,109,65,162,31,45,67,216,183,123,164,118,196,23,73,236,127,12,111,246,108,161,59,82,41,157,85,170,251,96,134,177,187,204,62,90,203,89,95,176,156,169,160,81,11,245,22,235,122,117,44,215,79,174,213,233,230,231,173,232,116,214,244,234,168,80,88,175],VanillaQR.gexp=[1,2,4,8,16,32,64,128,29,58,116,232,205,135,19,38,76,152,45,90,180,117,234,201,143,3,6,12,24,48,96,192,157,39,78,156,37,74,148,53,106,212,181,119,238,193,159,35,70,140,5,10,20,40,80,160,93,186,105,210,185,111,222,161,95,190,97,194,153,47,94,188,101,202,137,15,30,60,120,240,253,231,211,187,107,214,177,127,254,225,223,163,91,182,113,226,217,175,67,134,17,34,68,136,13,26,52,104,208,189,103,206,129,31,62,124,248,237,199,147,59,118,236,197,151,51,102,204,133,23,46,92,184,109,218,169,79,158,33,66,132,21,42,84,168,77,154,41,82,164,85,170,73,146,57,114,228,213,183,115,230,209,191,99,198,145,63,126,252,229,215,179,123,246,241,255,227,219,171,75,150,49,98,196,149,55,110,220,165,87,174,65,130,25,50,100,200,141,7,14,28,56,112,224,221,167,83,166,81,162,89,178,121,242,249,239,195,155,43,86,172,69,138,9,18,36,72,144,61,122,244,245,247,243,251,235,203,139,11,22,44,88,176,125,250,233,207,131,27,54,108,216,173,71,142,0],VanillaQR.N1=3,VanillaQR.N2=3,VanillaQR.N3=40,VanillaQR.N4=10;\n","import { VanillaQR } from './vanillaqr.min';\n\n/** Generates a DataURL for QR code image */\nexport function generateQRCode(code: string, colorLight = '#fff0', colorDark = '#000') {\n    const qr = new VanillaQR({\n        url: code || 'Hello',\n        size: 360,\n        colorLight,\n        colorDark,\n        toTable: false,\n        ecclevel: 1,\n        noBorder: true,\n        borderSize: 0,\n    });\n    return qr?.toImage('svg+xml')?.src;\n}\n","import { Component, Inject } from '@angular/core';\nimport { MAT_DIALOG_DATA } from '@angular/material/dialog';\n\nimport { SettingsService } from 'libs/common/src/lib/settings.service';\nimport { Space } from 'libs/spaces/src/lib/space.class';\nimport { generateQRCode } from 'libs/common/src/lib/qr-code';\n\nconst DEFAULT_PATH = `workplace/#/explore?space={{id}}`;\n\n@Component({\n    selector: 'explore-book-qr',\n    template: `\n        <header>\n            <h2 class=\"truncate\" i18n>Book - {{ space?.name }}</h2>\n            <div class=\"flex-1\"></div>\n            <button icon mat-dialog-close>\n                <app-icon>close</app-icon>\n            </button>\n        </header>\n        <main class=\"p-4\">\n            <img class=\"w-64 h-64 m-auto\" [src]=\"qr_code\" />\n        </main>\n    `,\n    styles: [``],\n})\nexport class ExploreBookQrComponent {\n    public readonly space = this._data.space;\n    public readonly qr_code = generateQRCode(\n        `${location.origin}${(\n            this._settings.get('app.booking_qr_path') || DEFAULT_PATH\n        ).replace('{{id}}', this._data.space?.email)}`\n    );\n    constructor(\n        @Inject(MAT_DIALOG_DATA) public _data: { space: Space },\n        private _settings: SettingsService\n    ) {}\n}\n","import { Component, Inject, OnInit } from '@angular/core';\nimport { MatDialogRef, MAT_DIALOG_DATA } from '@angular/material/dialog';\nimport { currentUser, notifySuccess, SettingsService } from '@placeos/common';\n\nimport { Space } from 'libs/spaces/src/lib/space.class';\nimport { EventFormService } from 'libs/events/src/lib/event-form.service';\nimport { Router } from '@angular/router';\n\nexport interface ExploreBookingModalData {\n    space: Space;\n}\n\n@Component({\n    selector: 'explore-booking-modal',\n    template: `\n        <header>\n            <h2 i18n>New Booking</h2>\n            <div class=\"flex-1\"></div>\n            <button *ngIf=\"!(loading | async)\" icon matRipple mat-dialog-close>\n                <app-icon>close</app-icon>\n            </button>\n        </header>\n        <ng-container *ngIf=\"!(loading | async); else load_state\">\n            <main *ngIf=\"form\" [formGroup]=\"form\" class=\"p-4 max-w-[85vw]\">\n                <div class=\"flex flex-col\">\n                    <label for=\"title\">Title<span>*</span>:</label>\n                    <mat-form-field appearance=\"outline\">\n                        <input\n                            matInput\n                            name=\"title\"\n                            formControlName=\"title\"\n                            placeholder=\"Booking Title\"\n                            i18n-placeholder\n                        />\n                        <mat-error i18n>Booking title is required</mat-error>\n                    </mat-form-field>\n                </div>\n                <div class=\"flex flex-col\">\n                    <label i18n>Space:</label>\n                    <div name=\"space\" class=\"sm:mt-4 mb-4\">\n                        {{\n                            form.controls.resources?.value[0]?.display_name ||\n                                form.controls.resources?.value[0]?.name\n                        }}\n                    </div>\n                </div>\n                <div class=\"flex sm:space-x-4 flex-wrap\">\n                    <div class=\"flex flex-col\" *ngIf=\"form.controls.date\">\n                        <label i18n>Date:</label>\n                        <div class=\"sm:mt-4 mb-4\">\n                            {{ form.controls.date?.value | date: 'medium' }}\n                        </div>\n                    </div>\n                    <div\n                        class=\"flex flex-col w-full sm:w-auto\"\n                        *ngIf=\"form.controls.duration\"\n                    >\n                        <label i18n>Duration:</label>\n                        <a-duration-field\n                            formControlName=\"duration\"\n                            [time]=\"form.value.date\"\n                            [max]=\"max_duration\"\n                            class=\"w-full\"\n                        ></a-duration-field>\n                    </div>\n                </div>\n            </main>\n            <footer class=\"flex justify-center p-2 border-t border-gray-200\">\n                <button btn matRipple class=\"w-32\" (click)=\"save()\" i18n>\n                    Save\n                </button>\n            </footer>\n        </ng-container>\n        <ng-template #load_state>\n            <div load class=\"h-64 flex flex-col items-center justify-center\">\n                <mat-spinner class=\"m-4\" [diameter]=\"48\"></mat-spinner>\n                <p>{{ loading | async }}</p>\n            </div>\n        </ng-template>\n    `,\n    styles: [\n        `\n            header {\n                max-width: calc(100vw + 100%);\n            }\n\n            [load] {\n                width: 32rem;\n                max-width: calc(100vw - 2rem);\n            }\n        `,\n    ],\n})\nexport class ExploreBookingModalComponent implements OnInit {\n    public readonly loading = this._event_form.loading;\n\n    public get form() {\n        return this._event_form.form;\n    }\n\n    public get max_duration() {\n        return this._settings.get('app.events.max_duration') || 4 * 60;\n    }\n\n    constructor(\n        @Inject(MAT_DIALOG_DATA) private _data: ExploreBookingModalData,\n        private _settings: SettingsService,\n        private _event_form: EventFormService,\n        private _dialog_ref: MatDialogRef<ExploreBookingModalComponent>,\n        private _router: Router\n    ) {}\n\n    public ngOnInit() {\n        this._event_form.newForm();\n        this.form.patchValue({\n            resources: [this._data.space],\n            host: currentUser().email,\n            organiser: currentUser(),\n        });\n    }\n\n    public async save() {\n        await this._event_form.postForm();\n        if (this._settings.app_name.toLowerCase().includes('workplace')) {\n            this._router.navigate(['/book', 'meeting', 'success']);\n        } else {\n            notifySuccess('Succefully booked room.');\n        }\n        this._dialog_ref.close();\n    }\n}\n","import { Component, ElementRef, Inject, OnInit } from '@angular/core';\nimport { SettingsService } from 'libs/common/src/lib/settings.service';\nimport { MAP_FEATURE_DATA } from 'libs/components/src/lib/interactive-map.component';\nimport { CalendarEvent } from 'libs/events/src/lib/event.class';\nimport { Space } from 'libs/spaces/src/lib/space.class';\n\nexport interface SpaceInfoData {\n    space: Space;\n    events: CalendarEvent[];\n    status:\n        | 'free'\n        | 'busy'\n        | 'pending'\n        | 'reserved'\n        | 'not-bookable'\n        | 'unknown'\n        | '';\n}\n\n@Component({\n    selector: 'explore-space-info',\n    template: `\n        <div\n            #tooltip\n            customTooltip\n            [content]=\"space_tooltip\"\n            [backdrop]=\"false\"\n            [xPosition]=\"'center'\"\n            [yPosition]=\"'center'\"\n            [hover]=\"true\"\n            [delay]=\"3000\"\n            [attr.id]=\"space?.map_id || space?.id\"\n            (mouseenter)=\"updateOffset()\"\n            class=\"h-full w-full pointer-events-auto relative hidden sm:block\"\n        ></div>\n        <ng-template #space_tooltip>\n            <div\n                name=\"space-info\"\n                [id]=\"space?.id\"\n                class=\"\n                    absolute rounded bg-white dark:bg-neutral-800 top-0 left-0 transform shadow pointer-events-none overflow-hidden\n                \"\n                [class.-translate-x-full]=\"x_pos === 'end'\"\n                [class.-translate-y-full]=\"y_pos === 'bottom'\"\n            >\n                <div class=\"arrow\"></div>\n                <div class=\"relative\">\n                    <div\n                        class=\"w-full overflow-hidden flex items-center justify-center relative bg-opacity-20\"\n                        [class.bg-black]=\"space.images[0]\"\n                        [class.h-32]=\"space.images[0]\"\n                        [class.h-8]=\"!space.images[0]\"\n                    >\n                        <img\n                            *ngIf=\"space.images[0]\"\n                            [src]=\"space.images[0]\"\n                            class=\"object-cover min-h-full min-w-full\"\n                        />\n                        <div\n                            class=\"absolute inset-0 bg-black/30\"\n                            *ngIf=\"space.images[0]\"\n                        ></div>\n                    </div>\n                    <div class=\"absolute top-2 left-2 flex flex-wrap text-sm \">\n                        <div\n                            status\n                            [class]=\"\n                                'capitalize rounded p-1 px-2 text-light border border-white shadow ' +\n                                status\n                            \"\n                        >\n                            { status, select, free { Free } busy { Busy }\n                            pending { Pending } reserved { Reserved } other {\n                            Not Bookable } }\n                        </div>\n                        <div available-until *ngIf=\"status !== 'not-bookable'\">\n                            {{ available_until }}\n                        </div>\n                    </div>\n                    <div class=\"flex flex-col py-4 px-2\">\n                        <h4 class=\"font-medium text-xl mb-2 px-2\">\n                            {{ space.display_name || space.name }}\n                        </h4>\n                        <div\n                            capacity\n                            class=\"text-base px-2 mb-2\"\n                            *ngIf=\"space.capacity >= 0\"\n                        >\n                            <span i18n>Capacity: </span>{{ space.capacity }}\n                            {{ space.capacity === 1 ? 'person' : 'people' }}\n                        </div>\n                        <ul\n                            class=\"flex flex-wrap\"\n                            *ngIf=\"space.features?.length > 0 && show_features\"\n                        >\n                            <li\n                                class=\"text-xs px-2 py-1 m-1 rounded-2xl bg-gray-200 dark:bg-neutral-600 font-medium\"\n                                *ngFor=\"let feature of space.features\"\n                            >\n                                {{ feature }}\n                            </li>\n                        </ul>\n                    </div>\n                </div>\n            </div>\n        </ng-template>\n    `,\n    styles: [\n        `\n            [name='space-info'] {\n                width: 16rem;\n            }\n\n            [status] {\n                background-color: #43a047;\n                font-weight: 500;\n            }\n\n            [status].busy {\n                background-color: #e53935;\n            }\n\n            [status].pending {\n                background-color: #ffb300;\n            }\n\n            [status].not-bookable {\n                background-color: #757575;\n            }\n        `,\n    ],\n})\nexport class ExploreSpaceInfoComponent implements OnInit {\n    /** Space to display details for */\n    public readonly space = this._details.space;\n    /** List of upcoming events for space */\n    public readonly events = this._details.events;\n    /** Current status of the space */\n    public readonly status = this._details.status;\n\n    public y_pos: 'top' | 'bottom';\n\n    public x_pos: 'start' | 'end';\n\n    public get show_features() {\n        return !this._settings.get('app.spaces.hide_features');\n    }\n\n    constructor(\n        @Inject(MAP_FEATURE_DATA) private _details: SpaceInfoData,\n        private _settings: SettingsService,\n        private _element: ElementRef<HTMLElement>\n    ) {}\n\n    public ngOnInit() {\n        setTimeout(() => this.updateOffset(), 200);\n    }\n\n    public updateOffset() {\n        const pos = this._element.nativeElement.getBoundingClientRect();\n        this.x_pos = pos.x < document.body.clientWidth / 2 ? 'start' : 'end';\n        this.y_pos = pos.y < document.body.clientHeight / 2 ? 'top' : 'bottom';\n    }\n\n    public get available_until() {\n        return '';\n    }\n}\n","import { Injectable, OnDestroy } from '@angular/core';\nimport { MatDialog } from '@angular/material/dialog';\nimport { getModule } from '@placeos/ts-client';\nimport { ViewAction, ViewerFeature } from '@placeos/svg-viewer';\nimport { map } from 'rxjs/operators';\n\nimport {\n    AsyncHandler,\n    currentUser,\n    HashMap,\n    SettingsService,\n} from '@placeos/common';\nimport { notifyError } from 'libs/common/src/lib/notifications';\nimport { Space } from 'libs/spaces/src/lib/space.class';\nimport { CalendarEvent } from 'libs/events/src/lib/event.class';\n\nimport { ExploreStateService } from './explore-state.service';\nimport { ExploreSpaceInfoComponent } from './explore-space-info.component';\nimport { ExploreBookingModalComponent } from './explore-booking-modal.component';\nimport { ExploreBookQrComponent } from './explore-book-qr.component';\nimport { EventFormService } from 'libs/events/src/lib/event-form.service';\n\nexport const DEFAULT_COLOURS = {\n    free: '#43a047',\n    pending: '#ffb300',\n    reserved: '#e65100',\n    busy: '#e53935',\n    'signs-of-life': '#1565c0',\n    'not-bookable': '#757575',\n    unknown: '#757575',\n};\n\n@Injectable()\nexport class ExploreSpacesService extends AsyncHandler implements OnDestroy {\n    private _bookings: HashMap<CalendarEvent[]> = {};\n    private _statuses: HashMap<string> = {};\n\n    private _bind = this._state.spaces.pipe(\n        map((list) => {\n            this.unsubWith('b-');\n            this.unsubWith('s-');\n            this._statuses = {};\n            if (!list?.length) return;\n            for (const space of list) {\n                const mod = getModule(space.id, 'Bookings');\n                let binding = mod.binding('bookings');\n                this.subscription(\n                    `b-${space.id}`,\n                    binding\n                        .listen()\n                        .subscribe((d) =>\n                            this.handleBookingsChange(list, space, d)\n                        )\n                );\n                this.subscription(`b-bind-${space.id}`, binding.bind());\n                binding = mod.binding('status');\n                this.subscription(\n                    `s-${space.id}`,\n                    binding\n                        .listen()\n                        .subscribe((d) =>\n                            this.handleStatusChange(list, space, d)\n                        )\n                );\n                this.subscription(`s-bind-${space.id}`, binding.bind());\n            }\n            this.updateActions(list);\n            this.updateHoverElements(list);\n        })\n    );\n\n    constructor(\n        private _state: ExploreStateService,\n        private _settings: SettingsService,\n        private _event_form: EventFormService,\n        private _dialog: MatDialog\n    ) {\n        super();\n        this.subscription('spaces', this._bind.subscribe());\n    }\n\n    public bookSpace(space: Space) {\n        if (this._statuses[space.id] !== 'free' || !space.bookable) {\n            return notifyError(\n                `${\n                    space.display_name || space.name\n                } is unavailable at the current time`\n            );\n        }\n        this._event_form.newForm();\n        this._event_form.form.patchValue({\n            host: currentUser()?.email,\n            resources: [space],\n        });\n        if (this._settings.get('app.events.booking_unavailable')) {\n            return this._event_form.openEventLinkModal();\n        }\n        this._dialog.open(\n            (this._settings.get('app.explore.show_booking_qr')\n                ? ExploreBookQrComponent\n                : ExploreBookingModalComponent) as any,\n            {\n                data: { space },\n            }\n        );\n    }\n\n    public handleBookingsChange(\n        spaces: Space[],\n        space: Space,\n        bookings: HashMap[]\n    ) {\n        if (!bookings) return;\n        this._bookings[space.id] = bookings.map((i) => new CalendarEvent(i));\n        this.timeout(\n            'update_hover_els',\n            () => this.updateHoverElements(spaces),\n            100\n        );\n    }\n\n    public handleStatusChange(spaces: Space[], space: Space, status: string) {\n        this._statuses[space.id] = space.bookable\n            ? status || 'free'\n            : 'not-bookable';\n        this.timeout(\n            'update_statuses',\n            () => {\n                this.clearTimeout('update_hover_els');\n                this.updateStatus(spaces);\n                this.updateHoverElements(spaces);\n            },\n            100\n        );\n    }\n\n    private updateStatus(spaces: Space[]) {\n        const style_map = {};\n        const colours = this._settings.get('app.explore.colors') || {};\n        for (const space of spaces) {\n            const status = this._statuses[space.id] || 'not-bookable';\n            style_map[`#${space.map_id}`] = {\n                fill:\n                    colours[`space-${status}`] ||\n                    colours[`${status}`] ||\n                    DEFAULT_COLOURS[`${status}`],\n                opacity: 0.6,\n            };\n        }\n        this._state.setStyles('spaces', style_map);\n    }\n\n    private updateHoverElements(spaces: Space[]) {\n        const features: ViewerFeature[] = [];\n        for (const space of spaces) {\n            if (!space.map_id) continue;\n            features.push({\n                location: space.map_id,\n                full_size: true,\n                no_scale: true,\n                content: ExploreSpaceInfoComponent,\n                data: {\n                    space: new Space(space),\n                    events: this._bookings[space.id],\n                    status: this._statuses[space.id],\n                },\n            } as any);\n        }\n        this._state.setFeatures('spaces', features);\n    }\n\n    private updateActions(spaces: Space[]) {\n        const actions: ViewAction[] = [];\n        for (const space of spaces) {\n            if (!space.map_id) continue;\n            actions.push({\n                id: space.map_id,\n                action: 'click',\n                callback: () => this.bookSpace(space),\n            });\n            actions.push({\n                id: space.map_id,\n                action: 'touchend',\n                callback: () => this.bookSpace(space),\n            });\n        }\n        this.timeout(\n            'set-actions',\n            () => this._state.setActions('spaces', actions),\n            50\n        );\n    }\n}\n","import { Injectable } from '@angular/core';\nimport {\n    Point,\n    ViewAction,\n    ViewerFeature,\n    ViewerLabel,\n    ViewerStyles,\n} from '@placeos/svg-viewer';\nimport { querySystems } from '@placeos/ts-client';\nimport { BehaviorSubject, combineLatest, of } from 'rxjs';\nimport {\n    catchError,\n    debounceTime,\n    filter,\n    first,\n    map,\n    shareReplay,\n    switchMap,\n} from 'rxjs/operators';\n\nimport {\n    AsyncHandler,\n    HashMap,\n    SettingsService,\n    unique,\n} from '@placeos/common';\nimport { BuildingLevel } from 'libs/organisation/src/lib/level.class';\nimport { OrganisationService } from 'libs/organisation/src/lib/organisation.service';\nimport { Space } from 'libs/spaces/src/lib/space.class';\nimport { SpacesService } from 'libs/spaces/src/lib/spaces.service';\n\nexport interface MapOptions {\n    /** List of keys to ignore for any map resource */\n    disable?: string[];\n    /** List of keys to ignore for map labels */\n    disable_labels?: string[];\n    /** List of keys to ignore for map actions */\n    disable_actions?: string[];\n    /** List of keys to ignore for map features */\n    disable_features?: string[];\n    /** List of keys to ignore for map styles */\n    disable_styles?: string[];\n}\n\n@Injectable({\n    providedIn: 'root',\n})\nexport class ExploreStateService extends AsyncHandler {\n    /** Currently active level */\n    private _level = new BehaviorSubject<BuildingLevel>(null);\n    /** Currently active level */\n    private _positions = new BehaviorSubject<{ zoom: number; center: Point }>({\n        zoom: 1,\n        center: { x: 0.5, y: 0.5 },\n    });\n    /** Mapping of groups to their styles */\n    private _styles = new BehaviorSubject<HashMap<ViewerStyles>>({});\n    /** Mapping of groups to their features */\n    private _features = new BehaviorSubject<HashMap<ViewerFeature[]>>({});\n    /** Mapping of groups to their actions */\n    private _actions = new BehaviorSubject<HashMap<ViewAction[]>>({});\n    /** Mapping of groups to their actions */\n    private _labels = new BehaviorSubject<HashMap<ViewerLabel[]>>({});\n\n    private _options = new BehaviorSubject<MapOptions>({\n        disable: ['zones', 'devices'],\n    });\n\n    private _message = new BehaviorSubject<string>('');\n\n    /** Currently active level */\n    public readonly level = this._level.asObservable();\n    /** Currently active level */\n    public readonly message = this._message.asObservable();\n    /** Spaces associated with the active level */\n    public readonly spaces = this._level.pipe(\n        switchMap((level) =>\n            querySystems({ zone_id: level?.id, limit: 50 }).pipe(\n                map(({ data }) => data.map((_) => new Space(_ as any))),\n                catchError((_) => of([] as Space[]))\n            )\n        ),\n        shareReplay(1)\n    );\n    /** Currently shown space's map URL */\n    public readonly map_url = this._level.pipe(\n        map((lvl) => (lvl ? lvl.map_id : '') || '')\n    );\n    /** Currently center and zoom positions for map */\n    public readonly map_positions = this._positions.asObservable();\n    /** Currently center and zoom positions for map */\n    public readonly map_features = combineLatest([\n        this._features,\n        this._options,\n    ]).pipe(\n        debounceTime(200),\n        map(([features, options]) => {\n            let list = [];\n            for (const key in features) {\n                if (\n                    options.disable?.includes(key) ||\n                    options.disable_features?.includes(key)\n                )\n                    continue;\n                list = list.concat(features[key]);\n            }\n            return list;\n        })\n    );\n    /** Currently center and zoom positions for map */\n    public readonly map_actions = combineLatest([\n        this._actions,\n        this._options,\n    ]).pipe(\n        debounceTime(200),\n        map(([actions, options]) => {\n            let list = [];\n            for (const key in actions) {\n                if (\n                    options.disable?.includes(key) ||\n                    options.disable_actions?.includes(key)\n                )\n                    continue;\n                list = list.concat(actions[key]);\n            }\n            return list;\n        })\n    );\n    /** Currently center and zoom positions for map */\n    public readonly map_labels = combineLatest([\n        this._labels,\n        this._options,\n    ]).pipe(\n        debounceTime(200),\n        map(([labels, options]) => {\n            let list = [];\n            for (const key in labels) {\n                if (\n                    options.disable?.includes(key) ||\n                    options.disable_labels?.includes(key)\n                )\n                    continue;\n                list = list.concat(labels[key]);\n            }\n            return list;\n        })\n    );\n    /** Current map styles */\n    public readonly map_styles = combineLatest([\n        this._styles,\n        this._options,\n    ]).pipe(\n        debounceTime(200),\n        map(([styles, options]) => {\n            let style_mappings = { text: { display: 'none' } };\n            for (const key in styles) {\n                if (\n                    options.disable?.includes(key) ||\n                    options.disable_styles?.includes(key)\n                )\n                    continue;\n                style_mappings = { ...style_mappings, ...styles[key] };\n            }\n            if (options.disable?.includes('zones')) {\n                style_mappings['#zones'] = { display: 'none' };\n                style_mappings['#Zones'] = { display: 'none' };\n            }\n            return style_mappings;\n        })\n    );\n\n    public readonly options = this._options.asObservable();\n\n    public get positions() {\n        return this._positions.getValue();\n    }\n\n    public get active_level() {\n        return this._level.getValue();\n    }\n\n    constructor(\n        private _org: OrganisationService,\n        private _spaces: SpacesService,\n        private _settings: SettingsService\n    ) {\n        super();\n        this.init();\n    }\n\n    public async init() {\n        await this._org.initialised.pipe(first((_) => _)).toPromise();\n        this._org.active_building.pipe(filter((_) => !!_)).subscribe((bld) => {\n            const level = this._level.getValue();\n            const level_list = this._org.levelsForBuilding(bld);\n            const has_level = level_list.find((lvl) => level?.id === lvl.id);\n            if (!has_level && level_list.length) {\n                this.setLevel(level_list[0].id);\n            }\n            if (this._settings.get('app.explore.disable_actions')) {\n                this.setOptions({\n                    disable_actions: this._settings.get(\n                        'app.explore.disable_actions'\n                    ),\n                });\n            }\n            if (this._settings.get('app.explore.disable_labels')) {\n                this.setOptions({\n                    disable_labels: this._settings.get(\n                        'app.explore.disable_labels'\n                    ),\n                });\n            }\n            if (this._settings.get('app.explore.disable_features')) {\n                this.setOptions({\n                    disable_features: this._settings.get(\n                        'app.explore.disable_features'\n                    ),\n                });\n            }\n            if (this._settings.get('app.explore.disable_styles')) {\n                this.setOptions({\n                    disable_styles: this._settings.get(\n                        'app.explore.disable_styles'\n                    ),\n                });\n            }\n        });\n    }\n\n    public setOptions(options: MapOptions) {\n        const old_options = this._options.getValue();\n        const disable = unique([\n            ...(options.disable || old_options.disable),\n            ...(this._settings.get('app.explore.disable') || []),\n        ]);\n        this._options.next({\n            ...this._options.getValue(),\n            ...options,\n            disable,\n        });\n    }\n\n    public reset() {\n        this._styles.next({});\n        this._features.next({});\n        this._labels.next({});\n        this._actions.next({});\n        this.setPositions(1, { x: 0.5, y: 0.5 });\n    }\n\n    public setLevel(zone_id: string) {\n        const lvl = this._org.levelWithID([zone_id]);\n        if (lvl) this._level.next(lvl);\n    }\n\n    public setStyles(name: string, styles: ViewerStyles) {\n        const style_map = this._styles.getValue();\n        style_map[name] = styles;\n        this._styles.next(style_map);\n    }\n\n    public setFeatures(name: string, features: ViewerFeature[]) {\n        const feature_map = this._features.getValue();\n        feature_map[name] = features;\n        this._features.next(feature_map);\n    }\n\n    public setActions(name: string, actions: ViewAction[]) {\n        const actions_map = this._actions.getValue();\n        actions_map[name] = actions;\n        this._actions.next(actions_map);\n    }\n\n    public setLabels(name: string, labels: ViewerLabel[]) {\n        const labels_map = this._labels.getValue();\n        labels_map[name] = labels;\n        this._labels.next(labels_map);\n    }\n\n    public setPositions(zoom: number, center: Point) {\n        this._positions.next({ zoom, center });\n    }\n}\n"],"x_google_ignoreList":[]}