(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"2h+Z":function(t,n,e){"use strict";e.d(n,"a",(function(){return a}));var o=e("Rc+I"),i=e("EM62"),s=e("2kYt");function c(t,n){if(1&t&&(i.Vb(0,"p",6),i.Ic(1),i.Ub()),2&t){const t=i.hc();i.Db(1),i.Jc(t.user)}}function r(t,n){if(1&t&&(i.Vb(0,"p",7),i.Ic(1),i.ic(2,"date"),i.ic(3,"date"),i.Ub()),2&t){const t=i.hc();i.Db(1),i.Lc(" ",i.kc(2,2,t.start,"shortTime")," \u2013 ",i.kc(3,5,t.end,"shortTime")," ")}}let a=(()=>{class t{constructor(t,n){this._details=t,this._element=n,this.map_id=this._details.map_id,this.user=this._details.user,this.start=this._details.start,this.end=this._details.end}ngOnInit(t=0){t>10||setTimeout(()=>{var n;const e=null===(n=this._element.nativeElement.parentElement)||void 0===n?void 0:n.parentElement;if(!e)return this.ngOnInit(++t);const o=parseInt(e.style.top,10)/100,i=parseInt(e.style.left,10)/100;this.y_pos=o>=.5?"bottom":"top",this.x_pos=i>=.5?"right":"left"},200)}get available_until(){return""}}return t.\u0275fac=function(n){return new(n||t)(i.Pb(o.d),i.Pb(i.m))},t.\u0275cmp=i.Jb({type:t,selectors:[["explore-desk-info"]],decls:7,vars:6,consts:[["name","space-info",3,"id"],[1,"arrow"],[1,"details"],[1,"m-0","font-medium"],["class","mt-2 text-sm",4,"ngIf"],["class","mt-1 text-sm",4,"ngIf"],[1,"mt-2","text-sm"],[1,"mt-1","text-sm"]],template:function(t,n){1&t&&(i.Vb(0,"div",0),i.Qb(1,"div",1),i.Vb(2,"div",2),i.Vb(3,"h4",3),i.Ic(4),i.Ub(),i.Gc(5,c,2,1,"p",4),i.Gc(6,r,4,8,"p",5),i.Ub(),i.Ub()),2&t&&(i.Fb("absolute rounded bg-white p-4 top-0 left-0 shadow "+n.x_pos+" "+n.y_pos),i.nc("id",n.map_id),i.Db(4),i.Jc(n.map_id),i.Db(1),i.nc("ngIf",n.user),i.Db(1),i.nc("ngIf",n.start))},directives:[s.n],pipes:[s.f],styles:["[_nghost-%COMP%] {\n                position: absolute;\n                top: 50%;\n                left: 50%;\n                transform: translate(-50%, -50%);\n                pointer-events: none;\n                z-index: 1;\n            }\n\n            [name='space-info'][_ngcontent-%COMP%] {\n                width: 16rem;\n            }\n\n            [name='status'][_ngcontent-%COMP%] {\n                background-color: #43a047;\n                font-weight: 500;\n            }\n\n            [name='status'].busy[_ngcontent-%COMP%] {\n                background-color: #e53935;\n            }\n\n            [name='status'].pending[_ngcontent-%COMP%] {\n                background-color: #ffb300;\n            }\n\n            [name='status'].not-bookable[_ngcontent-%COMP%] {\n                background-color: #757575;\n            }"]}),t})()},T50y:function(t,n,e){"use strict";e.d(n,"a",(function(){return d}));var o=e("C05f"),i=e("HM3f"),s=e("YtkY"),c=e("jOdJ"),r=e("xVbo"),a=e("20lr"),l=e("EM62"),b=e("dJst"),m=e("6CBO");let d=(()=>{class t extends a.b{constructor(t,n,e){super(),this._org=t,this._spaces=n,this._settings=e,this._level=new o.a(null),this._positions=new o.a({zoom:1,center:{x:.5,y:.5}}),this._styles=new o.a({}),this._features=new o.a({}),this._actions=new o.a({}),this._labels=new o.a({}),this._options=new o.a({}),this.level=this._level.asObservable(),this.spaces=Object(i.b)([this._level,this._spaces.list]).pipe(Object(s.a)(t=>t[1].filter(n=>n.zones.includes(t[0].id)))),this.map_url=this._level.pipe(Object(s.a)(t=>(t?t.map_id:"")||"")),this.map_positions=this._positions.asObservable(),this.map_features=Object(i.b)([this._features,this._options]).pipe(Object(s.a)(t=>{const[n,e]=t;let o=[];for(const i in n)("devices"!==i||e.show_zones&&!1!==this._settings.get("app.explore.display_devices"))&&(o=o.concat(n[i]));return o})),this.map_actions=this._actions.pipe(Object(s.a)(t=>Object.values(t).reduce((t,n)=>t.concat(n),[]))),this.map_labels=Object(i.b)([this._labels,this._options]).pipe(Object(s.a)(t=>{const[n,e]=t;let o=[];for(const i in n)("zones"!==i||e.show_zones)&&(o=o.concat(n[i]));return o})),this.map_styles=Object(i.b)([this._styles,this._options]).pipe(Object(s.a)(t=>{const[n,e]=t,o=Object.keys(n).reduce((t,e)=>Object.assign(Object.assign({},t),n[e]),{});return e.show_zones||(o["#zones"]={display:"none"},o["#Zones"]={display:"none"}),o.text={display:"none"},o})),this.options=this._options.asObservable(),this._org.initialised.pipe(Object(c.a)(t=>t)).subscribe(()=>{this.subscription("building",this._org.active_building.pipe(Object(r.a)(t=>!!t)).subscribe(t=>{const n=this._level.getValue(),e=this._org.levelsForBuilding(t);!e.find(t=>(null==n?void 0:n.id)===t.id)&&e.length&&this.setLevel(e[0].id)}))})}get positions(){return this._positions.getValue()}get active_level(){return this._level.getValue()}setOptions(t){this._options.next(Object.assign(Object.assign({},this._options.getValue()),t))}setLevel(t){const n=this._org.levelWithID([t]);n&&this._level.next(n)}setStyles(t,n){const e=this._styles.getValue();e[t]=n,this._styles.next(e)}setFeatures(t,n){const e=this._features.getValue();e[t]=n,this._features.next(e)}setActions(t,n){const e=this._actions.getValue();e[t]=n,this._actions.next(e)}setLabels(t,n){const e=this._labels.getValue();e[t]=n,this._labels.next(e)}setPositions(t,n){this._positions.next({zoom:t,center:n})}}return t.\u0275fac=function(n){return new(n||t)(l.ac(b.c),l.ac(m.c),l.ac(a.e))},t.\u0275prov=l.Lb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},aAMe:function(t,n,e){"use strict";e.d(n,"a",(function(){return a})),e.d(n,"b",(function(){return r.a})),e.d(n,"c",(function(){return b})),e("/It1"),e("C05f"),e("HM3f"),e("20lr"),e("eZII");var o=e("Rc+I"),i=e("EM62"),s=e("2kYt");e("D57K"),e("OZ4H"),e("7JBE"),e("PBFl"),e("0/Ep");var c=e("nIj0");e("29Wa"),e("Cd2c"),e("csyo");var r=e("T50y");const a={free:"#43a047",pending:"#ffb300",reserved:"#e65100",busy:"#e53935","not-bookable":"#757575",unknown:"#757575"};e("dJst"),e("JuBR"),e("mrqE"),e("BySP"),e("dI1K"),e("njY1"),e("2h+Z"),e("TLy2"),e("YtkY"),e("4e/d"),e("R7+U"),e("mFH5"),e("jOdJ"),e("mjT4"),e("sEIs"),e("6CBO"),e("lYMz"),e("gGs/");var l=e("k8N0");e("ulve");let b=(()=>{class t{}return t.\u0275mod=i.Nb({type:t}),t.\u0275inj=i.Mb({factory:function(n){return new(n||t)},imports:[[s.c,o.b,c.h,c.p,l.b]]}),t})()},"gGs/":function(t,n,e){"use strict";e.d(n,"a",(function(){return r}));var o=e("EM62"),i=e("T50y"),s=e("PBFl"),c=e("0/Ep");let r=(()=>{class t{constructor(t){this._state=t,this.zoomIn=()=>this._state.setPositions(Math.min(10,1.2*this._state.positions.zoom),this._state.positions.center),this.zoomOut=()=>this._state.setPositions(Math.max(1,this._state.positions.zoom*(1/1.2)),this._state.positions.center),this.reset=()=>this._state.setPositions(1,{x:.5,y:.5})}}return t.\u0275fac=function(n){return new(n||t)(o.Pb(i.a))},t.\u0275cmp=o.Jb({type:t,selectors:[["explore-zoom-controls"]],decls:9,vars:0,consts:[["mat-icon-button","",1,"bg-white",3,"click"],["className","material-icons"]],template:function(t,n){1&t&&(o.Vb(0,"button",0),o.dc("click",(function(){return n.zoomIn()})),o.Vb(1,"app-icon",1),o.Ic(2,"add"),o.Ub(),o.Ub(),o.Vb(3,"button",0),o.dc("click",(function(){return n.zoomOut()})),o.Vb(4,"app-icon",1),o.Ic(5,"remove"),o.Ub(),o.Ub(),o.Vb(6,"button",0),o.dc("click",(function(){return n.reset()})),o.Vb(7,"app-icon",1),o.Ic(8,"autorenew"),o.Ub(),o.Ub())},directives:[s.b,c.a],styles:["[_nghost-%COMP%] {\n                display: flex;\n                flex-direction: column;\n                padding: .5rem;\n            }\n\n            button[_ngcontent-%COMP%] {\n                border: 1px solid #ccc;\n                border-radius: 0;\n            }\n\n            button[_ngcontent-%COMP%]:first-child {\n                border-radius: 0.25rem 0.25rem 0 0;\n                border-bottom: none;\n            }\n\n            button[_ngcontent-%COMP%]:last-child {\n                border-radius: 0 0 0.25rem 0.25rem;\n                border-top: none;\n            }"]}),t})()},mjT4:function(t,n,e){"use strict";e.d(n,"a",(function(){return j})),e.d(n,"b",(function(){return G})),e.d(n,"c",(function(){return Y})),e.d(n,"d",(function(){return A}));var o=e("EM62"),i=e("OZ4H"),s=e("20lr"),c=e("xuqh"),r=e("HTl7");function a(t,n){if(1&t&&(o.Vb(0,"div",7),o.Qb(1,"user-form",8),o.Ub()),2&t){const t=o.hc();o.Db(1),o.nc("form",t.form)}}function l(t,n){if(1&t){const t=o.Wb();o.Vb(0,"footer"),o.Vb(1,"button",9),o.Ic(2,"Cancel"),o.Ub(),o.Vb(3,"button",10),o.dc("click",(function(){return o.vc(t),o.hc().saveChanges()})),o.Ic(4,"Save"),o.Ub(),o.Ub()}}function b(t,n){1&t&&(o.Vb(0,"div",7),o.Vb(1,"div",11),o.Vb(2,"div",12),o.Qb(3,"mat-spinner",13),o.Ub(),o.Vb(4,"div",14),o.Ic(5,"Saving attendee..."),o.Ub(),o.Ub(),o.Ub())}const m=function(){return{type:"icon",class:"material-icons",content:"close"}};let d=(()=>{class t extends s.b{constructor(t){super(),this._data=t,this.event=new o.o}ngOnInit(){this.user=this._data.user||{},this.form=Object(r.c)(this.user)}saveChanges(){if(this.form.markAllAsTouched(),this.form.valid){const t=new c.c(Object.assign(Object.assign({},this.form.value),{type:"external",visit_expected:!this.form.value.email.endsWith("place.tech")}));this.event.emit({reason:"done",metadata:t})}}}return t.\u0275fac=function(n){return new(n||t)(o.Pb(i.a))},t.\u0275cmp=o.Jb({type:t,selectors:[["new-user-modal"]],outputs:{event:"event"},features:[o.Ab],decls:12,vars:6,consts:[["mat-dialog-title","",1,"heading"],[1,"flex-1"],["mat-icon-button","","mat-dialog-close",""],[3,"icon"],["class","body",4,"ngIf","ngIfElse"],[4,"ngIf"],["load_state",""],[1,"body"],[3,"form"],["mat-button","","mat-dialog-close","",1,"inverse"],["mat-button","",3,"click"],[1,"info-block"],[1,"icon"],["diameter","32"],[1,"text"]],template:function(t,n){if(1&t&&(o.Vb(0,"header"),o.Vb(1,"div",0),o.Ic(2),o.Ub(),o.Qb(3,"div",1),o.Vb(4,"button",2),o.Qb(5,"app-icon",3),o.Ub(),o.Ub(),o.Vb(6,"mat-dialog-content"),o.Gc(7,a,2,1,"div",4),o.Ub(),o.Vb(8,"mat-dialog-actions"),o.Gc(9,l,5,0,"footer",5),o.Ub(),o.Gc(10,b,6,0,"ng-template",null,6,o.Hc)),2&t){const t=o.sc(11);o.Db(2),o.Kc("",null!=n.user&&n.user.id?"Edit":"Add"," External Attendee"),o.Db(3),o.nc("icon",o.oc(5,m)),o.Db(2),o.nc("ngIf",!n.loading)("ngIfElse",t),o.Db(2),o.nc("ngIf",!n.loading)}},styles:[".body[_ngcontent-%COMP%]{position:relative;flex-direction:column;min-height:20em!important}.body[_ngcontent-%COMP%], footer[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%}footer[_ngcontent-%COMP%]{justify-content:center;padding:.35em;border-top:1px solid #ccc}footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:8em}.icon[_ngcontent-%COMP%]{height:1.2em;width:1.2em;display:flex;align-items:center;justify-content:center;font-size:2em}.content[_ngcontent-%COMP%]{width:16rem;text-align:center;font-size:.8em}app-icon[_ngcontent-%COMP%]{transition:font-size .2s}.close[_ngcontent-%COMP%]{font-size:1em;cursor:pointer}.close[_ngcontent-%COMP%]:hover   app-icon[_ngcontent-%COMP%]{font-size:.8em}button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;font-size:1rem;margin:0 .25em}"]}),t})();var u=e("2kYt"),f=e("nIj0"),p=e("29Wa"),h=e("Cd2c"),g=e("+Tre");function _(t,n){1&t&&(o.Vb(0,"mat-error"),o.Ic(1,"Name is required"),o.Ub())}function v(t,n){if(1&t&&(o.Vb(0,"div",4),o.Vb(1,"label",5),o.Ic(2,"Name"),o.Vb(3,"span"),o.Ic(4,"*"),o.Ub(),o.Ic(5,":"),o.Ub(),o.Vb(6,"mat-form-field",6),o.Qb(7,"input",7),o.Gc(8,_,2,0,"mat-error",8),o.Ub(),o.Ub()),2&t){const t=o.hc(2);o.Db(1),o.Hb("error",t.form.controls.name.invalid&&t.form.controls.name.touched),o.Db(7),o.nc("ngIf",t.form.controls.name.invalid)}}function I(t,n){1&t&&(o.Vb(0,"mat-error"),o.Ic(1,"A valid email is required"),o.Ub())}function O(t,n){if(1&t&&(o.Vb(0,"div",4),o.Vb(1,"label",9),o.Ic(2,"Email"),o.Vb(3,"span"),o.Ic(4,"*"),o.Ub(),o.Ic(5,":"),o.Ub(),o.Vb(6,"mat-form-field",6),o.Qb(7,"input",10),o.Gc(8,I,2,0,"mat-error",8),o.Ub(),o.Ub()),2&t){const t=o.hc(2);o.Db(1),o.Hb("error",t.form.controls.email.invalid&&t.form.controls.email.touched),o.Db(7),o.nc("ngIf",t.form.controls.email.invalid)}}function y(t,n){1&t&&(o.Vb(0,"mat-error"),o.Ic(1,"Organisation is required"),o.Ub())}function V(t,n){if(1&t&&(o.Vb(0,"div",4),o.Vb(1,"label",11),o.Ic(2,"Organisation"),o.Vb(3,"span"),o.Ic(4,"*"),o.Ub(),o.Ic(5,":"),o.Ub(),o.Vb(6,"mat-form-field",6),o.Qb(7,"input",12),o.Gc(8,y,2,0,"mat-error",8),o.Ub(),o.Ub()),2&t){const t=o.hc(2);o.Db(1),o.Hb("error",t.form.controls.organisation.invalid&&t.form.controls.organisation.touched),o.Db(7),o.nc("ngIf",t.form.controls.organisation.invalid)}}function U(t,n){1&t&&(o.Vb(0,"mat-error"),o.Ic(1,"Phone format is invalid"),o.Ub())}function w(t,n){if(1&t&&(o.Vb(0,"div",4),o.Vb(1,"label",13),o.Ic(2,"Phone:"),o.Ub(),o.Vb(3,"mat-form-field",6),o.Qb(4,"input",14),o.Gc(5,U,2,0,"mat-error",8),o.Ub(),o.Ub()),2&t){const t=o.hc(2);o.Db(1),o.Hb("error",t.form.controls.phone.invalid&&t.form.controls.phone.touched),o.Db(4),o.nc("ngIf",t.form.controls.phone.invalid)}}function x(t,n){1&t&&(o.Vb(0,"div",4),o.Vb(1,"mat-checkbox",15),o.Ic(2,"Assistance required"),o.Ub(),o.Ub())}function C(t,n){1&t&&(o.Vb(0,"div",4),o.Vb(1,"mat-checkbox",16),o.Ic(2,"Visit expected"),o.Ub(),o.Ub())}function P(t,n){if(1&t&&(o.Vb(0,"div",1),o.Vb(1,"form",2),o.Gc(2,v,9,3,"div",3),o.Gc(3,O,9,3,"div",3),o.Gc(4,V,9,3,"div",3),o.Gc(5,w,6,3,"div",3),o.Gc(6,x,3,0,"div",3),o.Gc(7,C,3,0,"div",3),o.Ub(),o.Ub()),2&t){const t=o.hc();o.Db(1),o.nc("formGroup",t.form),o.Db(1),o.nc("ngIf",t.form.controls.name),o.Db(1),o.nc("ngIf",t.form.controls.email),o.Db(1),o.nc("ngIf",t.form.controls.organisation),o.Db(1),o.nc("ngIf",t.form.controls.phone),o.Db(1),o.nc("ngIf",t.form.controls.assistance_required),o.Db(1),o.nc("ngIf",t.form.controls.visit_expected)}}let M=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=o.Jb({type:t,selectors:[["user-form"]],inputs:{form:"form"},decls:1,vars:1,consts:[["class","user form",4,"ngIf"],[1,"user","form"],[3,"formGroup"],["class","field",4,"ngIf"],[1,"field"],["for","name"],["appearance","outline"],["matInput","","name","name","placeholder","Name","formControlName","name"],[4,"ngIf"],["for","email"],["matInput","","name","email","placeholder","Email Address","formControlName","email"],["for","organisation"],["matInput","","name","organisation","placeholder","Organisation","formControlName","organisation"],["for","phone"],["matInput","","name","phone","placeholder","Phone","formControlName","phone"],["color","primary","formControlName","assistance_required"],["color","primary","formControlName","visit_expected"]],template:function(t,n){1&t&&o.Gc(0,P,8,7,"div",0),2&t&&o.nc("ngIf",n.form)},directives:[u.n,f.r,f.m,f.g,p.c,h.b,f.c,f.l,f.e,p.b,g.a],styles:["label[_ngcontent-%COMP%]{min-width:100%;margin-right:1em;font-weight:700;font-size:.8em;width:100%;margin-top:0;margin-bottom:.5em}label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--pending)}label.error[_ngcontent-%COMP%]{color:var(--error)}.field[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}mat-form-field[_ngcontent-%COMP%]{width:100%}"]}),t})();class j{constructor(t){this.type=t.type||t.location||"other",this.position=t.position||t.map_id||{x:t.x/t.map_width,y:t.y/t.map_height},this.variance=t.variance||0,this.last_seen=t.last_seen||Math.floor((new Date).valueOf()/1e3),this.level=t.level,this.building=t.building,this.at_location=!!t.at_location}}var k=e("Rc+I"),D=e("PBFl"),z=e("0/Ep"),E=e("csyo");let G=(()=>{class t{}return t.\u0275mod=o.Nb({type:t}),t.\u0275inj=o.Mb({factory:function(n){return new(n||t)},imports:[[u.c,f.h,f.p,i.f,k.b,g.b]]}),t})();o.yc(d,[i.h,D.b,i.d,z.a,i.e,u.n,M,i.c,E.b],[]);var J=e("/It1"),N=e("YtkY"),T=(e("SUR7"),e("SQ91"));const H="/api/staff/v1/people";function Y(t){const n=Object(T.a)({q:t});return Object(J.d)(`${H}${n?"?"+n:""}`).pipe(Object(N.a)(t=>t.map(t=>new c.b(t))))}function A(t){return Object(J.d)(`${H}/${encodeURIComponent(t)}`).pipe(Object(N.a)(t=>new c.b(t)))}}}]);
//# sourceMappingURL=default~desks-desks-module~facilities-facilities-module.82aef082d3378be1d848.js.map