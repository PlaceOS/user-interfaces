"use strict";
(self["webpackChunkcaterer_ui"] = self["webpackChunkcaterer_ui"] || []).push([["main"],{

/***/ 17827:
/*!*******************************************************!*\
  !*** ./apps/caterer-ui/src/app/app-routing.module.ts ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AppRoutingModule: () => (/* binding */ AppRoutingModule)
/* harmony export */ });
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/router */ 95072);
/* harmony import */ var _placeos_components__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/components */ 51588);
/* harmony import */ var _catering_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./catering.component */ 95725);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/core */ 37580);





const routes = [{
  path: 'unauthorised',
  component: _placeos_components__WEBPACK_IMPORTED_MODULE_0__.UnauthorisedComponent
}, {
  path: '',
  component: _catering_component__WEBPACK_IMPORTED_MODULE_1__.CateringComponent
}, {
  path: ':view',
  component: _catering_component__WEBPACK_IMPORTED_MODULE_1__.CateringComponent
}, {
  path: '**',
  redirectTo: ''
}];
class AppRoutingModule {
  static #_ = this.ɵfac = function AppRoutingModule_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || AppRoutingModule)();
  };
  static #_2 = this.ɵmod = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdefineNgModule"]({
    type: AppRoutingModule
  });
  static #_3 = this.ɵinj = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdefineInjector"]({
    imports: [_angular_router__WEBPACK_IMPORTED_MODULE_3__.RouterModule.forRoot(routes, {
      useHash: true
    }), _angular_router__WEBPACK_IMPORTED_MODULE_3__.RouterModule]
  });
}
(function () {
  (typeof ngJitMode === "undefined" || ngJitMode) && _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵsetNgModuleScope"](AppRoutingModule, {
    imports: [_angular_router__WEBPACK_IMPORTED_MODULE_3__.RouterModule],
    exports: [_angular_router__WEBPACK_IMPORTED_MODULE_3__.RouterModule]
  });
})();

/***/ }),

/***/ 41922:
/*!***********************************************!*\
  !*** ./apps/caterer-ui/src/app/app.module.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AppModule: () => (/* binding */ AppModule),
/* harmony export */   HttpLoaderFactory: () => (/* binding */ HttpLoaderFactory)
/* harmony export */ });
/* harmony import */ var _angular_platform_browser__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @angular/platform-browser */ 80436);
/* harmony import */ var _angular_platform_browser_animations__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @angular/platform-browser/animations */ 43835);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @angular/router */ 95072);
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! @angular/forms */ 34456);
/* harmony import */ var _angular_service_worker__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! @angular/service-worker */ 46140);
/* harmony import */ var _angular_material_snack_bar__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! @angular/material/snack-bar */ 3347);
/* harmony import */ var _angular_material_dialog__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! @angular/material/dialog */ 12587);
/* harmony import */ var _angular_material_progress_spinner__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! @angular/material/progress-spinner */ 41134);
/* harmony import */ var _angular_material_tabs__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! @angular/material/tabs */ 38223);
/* harmony import */ var _angular_material_chips__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! @angular/material/chips */ 12772);
/* harmony import */ var _ngx_translate_http_loader__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @ngx-translate/http-loader */ 15101);
/* harmony import */ var _ngx_translate_core__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! @ngx-translate/core */ 597);
/* harmony import */ var _placeos_catering__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/catering */ 4157);
/* harmony import */ var _placeos_components__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @placeos/components */ 51588);
/* harmony import */ var _app_routing_module__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./app-routing.module */ 17827);
/* harmony import */ var _libs_components_src_lib_app_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../libs/components/src/lib/app.component */ 83070);
/* harmony import */ var _environments_environment__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../environments/environment */ 50313);
/* harmony import */ var _catering_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./catering.component */ 95725);
/* harmony import */ var _catering_topbar_component__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./catering-topbar.component */ 16396);
/* harmony import */ var _sentry_angular__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @sentry/angular */ 41025);
/* harmony import */ var _angular_material_core__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! @angular/material/core */ 74646);
/* harmony import */ var _placeos_payments__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @placeos/payments */ 99831);
/* harmony import */ var _placeos_assets__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @placeos/assets */ 20949);
/* harmony import */ var _placeos_spaces__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @placeos/spaces */ 44855);
/* harmony import */ var _placeos_explore__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @placeos/explore */ 27009);
/* harmony import */ var _angular_common_http__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! @angular/common/http */ 46443);
/* harmony import */ var apps_concierge_src_app_ui_date_options_component__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! apps/concierge/src/app/ui/date-options.component */ 94584);
/* harmony import */ var _placeos_form_fields__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @placeos/form-fields */ 63046);
































// AoT requires an exported function for factories
function HttpLoaderFactory(http) {
  return new _ngx_translate_http_loader__WEBPACK_IMPORTED_MODULE_13__.TranslateHttpLoader(http, './assets/locale/', '.json');
}
class AppModule {
  static #_ = this.ɵfac = function AppModule_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || AppModule)();
  };
  static #_2 = this.ɵmod = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_14__["ɵɵdefineNgModule"]({
    type: AppModule,
    bootstrap: [_libs_components_src_lib_app_component__WEBPACK_IMPORTED_MODULE_3__.AppComponent]
  });
  static #_3 = this.ɵinj = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_14__["ɵɵdefineInjector"]({
    providers: [{
      provide: _angular_core__WEBPACK_IMPORTED_MODULE_14__.ErrorHandler,
      useValue: _sentry_angular__WEBPACK_IMPORTED_MODULE_15__.createErrorHandler({
        showDialog: false
      })
    }, {
      provide: _sentry_angular__WEBPACK_IMPORTED_MODULE_15__.TraceService,
      deps: [_angular_router__WEBPACK_IMPORTED_MODULE_16__.Router]
    }, {
      provide: _angular_core__WEBPACK_IMPORTED_MODULE_14__.APP_INITIALIZER,
      useFactory: () => () => {},
      deps: [_sentry_angular__WEBPACK_IMPORTED_MODULE_15__.TraceService],
      multi: true
    }],
    imports: [_angular_platform_browser__WEBPACK_IMPORTED_MODULE_17__.BrowserModule, _angular_platform_browser_animations__WEBPACK_IMPORTED_MODULE_18__.BrowserAnimationsModule, _angular_forms__WEBPACK_IMPORTED_MODULE_19__.FormsModule, _angular_forms__WEBPACK_IMPORTED_MODULE_19__.ReactiveFormsModule, _app_routing_module__WEBPACK_IMPORTED_MODULE_2__.AppRoutingModule, _angular_material_snack_bar__WEBPACK_IMPORTED_MODULE_20__.MatSnackBarModule, _angular_material_dialog__WEBPACK_IMPORTED_MODULE_21__.MatDialogModule, _angular_material_progress_spinner__WEBPACK_IMPORTED_MODULE_22__.MatProgressSpinnerModule, _angular_material_tabs__WEBPACK_IMPORTED_MODULE_23__.MatTabsModule, _angular_material_chips__WEBPACK_IMPORTED_MODULE_24__.MatChipsModule, _placeos_catering__WEBPACK_IMPORTED_MODULE_0__.SharedCateringModule, _placeos_components__WEBPACK_IMPORTED_MODULE_1__.ComponentsModule, _placeos_spaces__WEBPACK_IMPORTED_MODULE_9__.SharedSpacesModule, _placeos_explore__WEBPACK_IMPORTED_MODULE_10__.SharedExploreModule, _placeos_form_fields__WEBPACK_IMPORTED_MODULE_12__.FormFieldsModule, _angular_material_core__WEBPACK_IMPORTED_MODULE_25__.MatRippleModule, _placeos_payments__WEBPACK_IMPORTED_MODULE_7__.PaymentsModule, _placeos_assets__WEBPACK_IMPORTED_MODULE_8__.AssetsModule, _angular_service_worker__WEBPACK_IMPORTED_MODULE_26__.ServiceWorkerModule.register('ngsw-worker.js', {
      enabled: _environments_environment__WEBPACK_IMPORTED_MODULE_4__.environment.production
    }), _ngx_translate_core__WEBPACK_IMPORTED_MODULE_27__.TranslateModule.forRoot({
      defaultLanguage: 'en',
      loader: {
        provide: _ngx_translate_core__WEBPACK_IMPORTED_MODULE_27__.TranslateLoader,
        useFactory: HttpLoaderFactory,
        deps: [_angular_common_http__WEBPACK_IMPORTED_MODULE_28__.HttpClient]
      }
    })]
  });
}
(function () {
  (typeof ngJitMode === "undefined" || ngJitMode) && _angular_core__WEBPACK_IMPORTED_MODULE_14__["ɵɵsetNgModuleScope"](AppModule, {
    declarations: [_libs_components_src_lib_app_component__WEBPACK_IMPORTED_MODULE_3__.AppComponent, _placeos_components__WEBPACK_IMPORTED_MODULE_1__.UnauthorisedComponent, _catering_component__WEBPACK_IMPORTED_MODULE_5__.CateringComponent, _catering_topbar_component__WEBPACK_IMPORTED_MODULE_6__.CateringTopbarComponent, apps_concierge_src_app_ui_date_options_component__WEBPACK_IMPORTED_MODULE_11__.DateOptionsComponent],
    imports: [_angular_platform_browser__WEBPACK_IMPORTED_MODULE_17__.BrowserModule, _angular_platform_browser_animations__WEBPACK_IMPORTED_MODULE_18__.BrowserAnimationsModule, _angular_forms__WEBPACK_IMPORTED_MODULE_19__.FormsModule, _angular_forms__WEBPACK_IMPORTED_MODULE_19__.ReactiveFormsModule, _app_routing_module__WEBPACK_IMPORTED_MODULE_2__.AppRoutingModule, _angular_material_snack_bar__WEBPACK_IMPORTED_MODULE_20__.MatSnackBarModule, _angular_material_dialog__WEBPACK_IMPORTED_MODULE_21__.MatDialogModule, _angular_material_progress_spinner__WEBPACK_IMPORTED_MODULE_22__.MatProgressSpinnerModule, _angular_material_tabs__WEBPACK_IMPORTED_MODULE_23__.MatTabsModule, _angular_material_chips__WEBPACK_IMPORTED_MODULE_24__.MatChipsModule, _placeos_catering__WEBPACK_IMPORTED_MODULE_0__.SharedCateringModule, _placeos_components__WEBPACK_IMPORTED_MODULE_1__.ComponentsModule, _placeos_spaces__WEBPACK_IMPORTED_MODULE_9__.SharedSpacesModule, _placeos_explore__WEBPACK_IMPORTED_MODULE_10__.SharedExploreModule, _placeos_form_fields__WEBPACK_IMPORTED_MODULE_12__.FormFieldsModule, _angular_material_core__WEBPACK_IMPORTED_MODULE_25__.MatRippleModule, _placeos_payments__WEBPACK_IMPORTED_MODULE_7__.PaymentsModule, _placeos_assets__WEBPACK_IMPORTED_MODULE_8__.AssetsModule, _angular_service_worker__WEBPACK_IMPORTED_MODULE_26__.ServiceWorkerModule, _ngx_translate_core__WEBPACK_IMPORTED_MODULE_27__.TranslateModule]
  });
})();

/***/ }),

/***/ 16396:
/*!**************************************************************!*\
  !*** ./apps/caterer-ui/src/app/catering-topbar.component.ts ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CateringTopbarComponent: () => (/* binding */ CateringTopbarComponent)
/* harmony export */ });
/* harmony import */ var _home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 89204);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! rxjs/operators */ 35443);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! rxjs/operators */ 57871);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! rxjs/operators */ 33602);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var _placeos_organisation__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @placeos/organisation */ 2510);
/* harmony import */ var _placeos_catering__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @placeos/catering */ 4157);
/* harmony import */ var _placeos_components__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @placeos/components */ 51588);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! rxjs */ 68824);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @angular/router */ 95072);
/* harmony import */ var _angular_material_dialog__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @angular/material/dialog */ 12587);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @angular/forms */ 34456);
/* harmony import */ var _libs_components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../libs/components/src/lib/icon.component */ 69434);
/* harmony import */ var _angular_material_core__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @angular/material/core */ 74646);
/* harmony import */ var _angular_material_form_field__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @angular/material/form-field */ 24950);
/* harmony import */ var _angular_material_select__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! @angular/material/select */ 25175);
/* harmony import */ var _angular_material_input__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! @angular/material/input */ 95541);
/* harmony import */ var _angular_material_tooltip__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! @angular/material/tooltip */ 80640);
/* harmony import */ var apps_concierge_src_app_ui_date_options_component__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! apps/concierge/src/app/ui/date-options.component */ 94584);
/* harmony import */ var _libs_components_src_lib_building_pipe__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../libs/components/src/lib/building.pipe */ 56062);

























const _c0 = () => ["/"];
function CateringTopbarComponent_mat_option_15_div_2_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](0, "div", 23);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipe"](2, "building");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](3, "span", 24);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](4, " - ");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    let tmp_3_0;
    const level_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"]().$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtextInterpolate1"](" ", (tmp_3_0 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipeBind1"](2, 1, level_r1.parent_id)) == null ? null : tmp_3_0.display_name, " ");
  }
}
function CateringTopbarComponent_mat_option_15_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](0, "mat-option", 20)(1, "div", 21);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtemplate"](2, CateringTopbarComponent_mat_option_15_div_2_Template, 5, 3, "div", 22);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](3, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]()()();
  }
  if (rf & 2) {
    const level_r1 = ctx.$implicit;
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("value", level_r1.id);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngIf", ctx_r1.use_region);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtextInterpolate1"](" ", level_r1.display_name || level_r1.name, " ");
  }
}
function CateringTopbarComponent_div_17_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelement"](0, "div", 25);
  }
}
function CateringTopbarComponent_button_18_Template(rf, ctx) {
  if (rf & 1) {
    const _r3 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](0, "button", 26);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵlistener"]("click", function CateringTopbarComponent_button_18_Template_button_click_0_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵrestoreView"](_r3);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵresetView"](ctx_r1.addItem());
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](1, "app-icon", 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](2, "add");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]()();
  }
}
function CateringTopbarComponent_button_19_Template(rf, ctx) {
  if (rf & 1) {
    const _r4 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](0, "button", 27);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵlistener"]("click", function CateringTopbarComponent_button_19_Template_button_click_0_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵrestoreView"](_r4);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵresetView"](ctx_r1.editConfig());
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](1, "app-icon", 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](2, "menu_book");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]()();
  }
}
function CateringTopbarComponent_button_20_Template(rf, ctx) {
  if (rf & 1) {
    const _r5 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](0, "button", 28);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵlistener"]("click", function CateringTopbarComponent_button_20_Template_button_click_0_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵrestoreView"](_r5);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵresetView"](ctx_r1.importMenu());
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](1, "app-icon", 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](2, "cloud_upload");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]()();
  }
}
function CateringTopbarComponent_button_21_Template(rf, ctx) {
  if (rf & 1) {
    const _r6 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](0, "button", 29);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵlistener"]("click", function CateringTopbarComponent_button_21_Template_button_click_0_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵrestoreView"](_r6);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵresetView"](ctx_r1.setRoomAvailability());
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](1, "app-icon", 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](2, "event_available");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]()();
  }
}
function CateringTopbarComponent_button_22_Template(rf, ctx) {
  if (rf & 1) {
    const _r7 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](0, "button", 30);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵlistener"]("click", function CateringTopbarComponent_button_22_Template_button_click_0_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵrestoreView"](_r7);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵresetView"](ctx_r1.setChargeCodes());
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](1, "app-icon", 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](2, "payments");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]()();
  }
}
function CateringTopbarComponent_div_23_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelement"](0, "div", 25);
  }
}
function CateringTopbarComponent_date_options_24_Template(rf, ctx) {
  if (rf & 1) {
    const _r8 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](0, "date-options", 31);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵlistener"]("dateChange", function CateringTopbarComponent_date_options_24_Template_date_options_dateChange_0_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵrestoreView"](_r8);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵresetView"](ctx_r1.setDate($event));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
  }
}
class CateringTopbarComponent extends _placeos_common__WEBPACK_IMPORTED_MODULE_1__.AsyncHandler {
  get building() {
    return this._org.building;
  }
  get use_region() {
    return !!this._settings.get('app.use_region');
  }
  constructor(_orders, _catering, _org, _route, _router, _dialog, _settings) {
    super();
    this._orders = _orders;
    this._catering = _catering;
    this._org = _org;
    this._route = _route;
    this._router = _router;
    this._dialog = _dialog;
    this._settings = _settings;
    /** List of selected levels */
    this.zones = [];
    this.filters = this._orders.filters;
    /** List of levels for the active building */
    this.levels = (0,rxjs__WEBPACK_IMPORTED_MODULE_9__.combineLatest)([this._org.active_building, this._org.active_region]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.map)(([bld, region]) => this._settings.get('app.use_region') ? this._org.levelsForRegion(region) : this._org.levelsForBuilding(bld)));
    /** Set filtered date */
    this.setDate = date => this._orders.filters = {
      ...this._orders.filters,
      date
    };
    this.setSearch = str => this._orders.filters = {
      ...this._orders.filters,
      search: str
    };
    /** List of levels for the active building */
    this.updateZones = z => {
      this._router.navigate([], {
        relativeTo: this._route,
        queryParams: {
          zone_ids: z.join(',')
        }
      });
      this._orders.filters = {
        ...this._orders.filters,
        zones: [z]
      };
      this._catering.zone = z[0];
    };
    this.addItem = () => this._catering.addItem();
    this.editConfig = () => this._catering.editConfig();
    this.importMenu = () => this._catering.importMenu();
  }
  ngOnInit() {
    var _this = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      yield _this._org.initialised.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_11__.first)(_ => _)).toPromise();
      _this._catering.zone = (_this._orders.filters?.zones || [])[0] || _this._org.building?.id;
      _this.subscription('route.query', _this._route.queryParamMap.subscribe(params => {
        if (params.has('zone_ids')) {
          const zones = params.get('zone_ids').split(',');
          if (!zones.length) return;
          const level = _this._org.levelWithID(zones);
          _this.zones = zones;
          if (!level) return;
          _this._org.building = _this._org.buildings.find(bld => bld.id === level.parent_id);
        }
        if (params.has('building_id')) {
          _this._org.building = _this._org.buildings.find(bld => bld.id === params.get('building_id'));
        }
      }));
      _this.subscription('route.params', _this._route.paramMap.subscribe(params => _this.page = params.has('view') ? params.get('view') : ''));
    })();
  }
  setRoomAvailability() {
    var _this2 = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      const ref = _this2._dialog.open(_placeos_components__WEBPACK_IMPORTED_MODULE_4__.AvailableRoomsStateModalComponent, {
        data: {
          type: 'Catering',
          disabled_rooms: yield _this2._catering.availability.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.take)(1)).toPromise()
        }
      });
      _this2.subscription('room-availability', ref.componentInstance.change.subscribe( /*#__PURE__*/function () {
        var _ref = (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* (list) {
          yield _this2._catering.saveSettings({
            disabled_rooms: list
          }).catch();
          ref.componentInstance.loading = false;
        });
        return function (_x) {
          return _ref.apply(this, arguments);
        };
      }()));
    })();
  }
  setChargeCodes() {
    this._dialog.open(_placeos_catering__WEBPACK_IMPORTED_MODULE_3__.ChargeCodeListModalComponent);
  }
  static #_ = this.ɵfac = function CateringTopbarComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || CateringTopbarComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵdirectiveInject"](_placeos_catering__WEBPACK_IMPORTED_MODULE_3__.CateringOrdersService), _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵdirectiveInject"](_placeos_catering__WEBPACK_IMPORTED_MODULE_3__.CateringStateService), _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵdirectiveInject"](_placeos_organisation__WEBPACK_IMPORTED_MODULE_2__.OrganisationService), _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵdirectiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_13__.ActivatedRoute), _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵdirectiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_13__.Router), _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵdirectiveInject"](_angular_material_dialog__WEBPACK_IMPORTED_MODULE_14__.MatDialog), _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵdirectiveInject"](_placeos_common__WEBPACK_IMPORTED_MODULE_1__.SettingsService));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵdefineComponent"]({
    type: CateringTopbarComponent,
    selectors: [["catering-topbar"]],
    features: [_angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵInheritDefinitionFeature"]],
    decls: 25,
    vars: 16,
    consts: [[1, "flex", "items-center", "w-full", "pt-4", "pb-2", "px-8", "space-x-2"], ["icon", "", "matRipple", "", "matTooltip", "Back to Home", 1, "h-12", "w-12", 3, "routerLink"], [1, "text-2xl"], [1, "text-2xl", "font-medium"], [1, "flex-1", "w-px"], ["appearance", "outline", 1, "no-subscript", "w-64"], ["matInput", "", "placeholder", "Search...", 3, "ngModelChange", "ngModel"], ["matSuffix", "", 1, "text-xl"], [1, "flex", "items-center", "bg-base-100", "px-8", "pt-2", "pb-4", "space-x-2"], [1, "w-12"], ["appearance", "outline", 1, "no-subscript", "w-60"], ["placeholder", "All Levels", "multiple", "", 3, "ngModelChange", "ngModel"], [3, "value", 4, "ngFor", "ngForOf"], ["class", "flex-1 w-2", 4, "ngIf"], ["icon", "", "matRipple", "", "matTooltip", "Add Item", "class", "bg-secondary text-secondary-content rounded h-12 w-12", 3, "click", 4, "ngIf"], ["icon", "", "matRipple", "", "matTooltip", "Edit Config", "class", "bg-secondary text-secondary-content rounded h-12 w-12", 3, "click", 4, "ngIf"], ["icon", "", "matRipple", "", "matTooltip", "Import Menu", "class", "bg-secondary text-secondary-content rounded h-12 w-12", 3, "click", 4, "ngIf"], ["icon", "", "matRipple", "", "matTooltip", "Room Availability", "class", "bg-secondary text-secondary-content rounded h-12 w-12", 3, "click", 4, "ngIf"], ["icon", "", "matRipple", "", "matTooltip", "Charge Codes", "class", "bg-secondary text-secondary-content rounded h-12 w-12", 3, "click", 4, "ngIf"], [3, "dateChange", 4, "ngIf"], [3, "value"], [1, "flex", "flex-col-reverse"], ["class", "text-xs opacity-30", 4, "ngIf"], [1, "text-xs", "opacity-30"], [1, "opacity-0"], [1, "flex-1", "w-2"], ["icon", "", "matRipple", "", "matTooltip", "Add Item", 1, "bg-secondary", "text-secondary-content", "rounded", "h-12", "w-12", 3, "click"], ["icon", "", "matRipple", "", "matTooltip", "Edit Config", 1, "bg-secondary", "text-secondary-content", "rounded", "h-12", "w-12", 3, "click"], ["icon", "", "matRipple", "", "matTooltip", "Import Menu", 1, "bg-secondary", "text-secondary-content", "rounded", "h-12", "w-12", 3, "click"], ["icon", "", "matRipple", "", "matTooltip", "Room Availability", 1, "bg-secondary", "text-secondary-content", "rounded", "h-12", "w-12", 3, "click"], ["icon", "", "matRipple", "", "matTooltip", "Charge Codes", 1, "bg-secondary", "text-secondary-content", "rounded", "h-12", "w-12", 3, "click"], [3, "dateChange"]],
    template: function CateringTopbarComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](0, "div", 0)(1, "a", 1)(2, "app-icon", 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](3, "arrow_back");
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](4, "h2", 3);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](5);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelement"](6, "div", 4);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](7, "mat-form-field", 5)(8, "input", 6);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵlistener"]("ngModelChange", function CateringTopbarComponent_Template_input_ngModelChange_8_listener($event) {
          return ctx.setSearch($event);
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](9, "app-icon", 7);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](10, "search");
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]()()();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](11, "div", 8);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelement"](12, "div", 9);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](13, "mat-form-field", 10)(14, "mat-select", 11);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵlistener"]("ngModelChange", function CateringTopbarComponent_Template_mat_select_ngModelChange_14_listener($event) {
          return ctx.updateZones($event);
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtemplate"](15, CateringTopbarComponent_mat_option_15_Template, 5, 3, "mat-option", 12);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipe"](16, "async");
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtemplate"](17, CateringTopbarComponent_div_17_Template, 1, 0, "div", 13)(18, CateringTopbarComponent_button_18_Template, 3, 0, "button", 14)(19, CateringTopbarComponent_button_19_Template, 3, 0, "button", 15)(20, CateringTopbarComponent_button_20_Template, 3, 0, "button", 16)(21, CateringTopbarComponent_button_21_Template, 3, 0, "button", 17)(22, CateringTopbarComponent_button_22_Template, 3, 0, "button", 18)(23, CateringTopbarComponent_div_23_Template, 1, 0, "div", 13)(24, CateringTopbarComponent_date_options_24_Template, 1, 0, "date-options", 19);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
      }
      if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("routerLink", _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpureFunction0"](15, _c0));
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](4);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtextInterpolate1"](" Catering ", ctx.page === "menu" ? "Menu" : "Orders", " ");
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngModel", ctx.filters == null ? null : ctx.filters.search);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](6);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngModel", ctx.filters == null ? null : ctx.filters.zones);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngForOf", _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipeBind1"](16, 13, ctx.levels));
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngIf", ctx.page === "menu");
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngIf", ctx.page === "menu" && (!ctx.zones[0] || ctx.zones[0] === (ctx.building == null ? null : ctx.building.id)));
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngIf", ctx.page === "menu");
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngIf", ctx.page === "menu");
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngIf", ctx.page === "menu");
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngIf", ctx.page === "menu");
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngIf", ctx.page !== "menu");
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngIf", ctx.page !== "menu");
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_15__.NgForOf, _angular_common__WEBPACK_IMPORTED_MODULE_15__.NgIf, _angular_forms__WEBPACK_IMPORTED_MODULE_16__.DefaultValueAccessor, _angular_forms__WEBPACK_IMPORTED_MODULE_16__.NgControlStatus, _angular_forms__WEBPACK_IMPORTED_MODULE_16__.NgModel, _angular_router__WEBPACK_IMPORTED_MODULE_13__.RouterLink, _libs_components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_5__.IconComponent, _angular_material_core__WEBPACK_IMPORTED_MODULE_17__.MatOption, _angular_material_form_field__WEBPACK_IMPORTED_MODULE_18__.MatFormField, _angular_material_form_field__WEBPACK_IMPORTED_MODULE_18__.MatSuffix, _angular_material_select__WEBPACK_IMPORTED_MODULE_19__.MatSelect, _angular_material_core__WEBPACK_IMPORTED_MODULE_17__.MatRipple, _angular_material_input__WEBPACK_IMPORTED_MODULE_20__.MatInput, _angular_material_tooltip__WEBPACK_IMPORTED_MODULE_21__.MatTooltip, apps_concierge_src_app_ui_date_options_component__WEBPACK_IMPORTED_MODULE_6__.DateOptionsComponent, _angular_common__WEBPACK_IMPORTED_MODULE_15__.AsyncPipe, _libs_components_src_lib_building_pipe__WEBPACK_IMPORTED_MODULE_7__.BuildingPipe],
    styles: ["mat-form-field[_ngcontent-%COMP%] {\n                height: 3.25em;\n                width: 8em;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNhdGVyaW5nLXRvcGJhci5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLGNBQWM7Z0JBQ2QsVUFBVTtZQUNkIiwiZmlsZSI6ImNhdGVyaW5nLXRvcGJhci5jb21wb25lbnQudHMiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIG1hdC1mb3JtLWZpZWxkIHtcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDMuMjVlbTtcbiAgICAgICAgICAgICAgICB3aWR0aDogOGVtO1xuICAgICAgICAgICAgfVxuICAgICAgICAiXX0= */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2FwcHMvY2F0ZXJlci11aS9zcmMvYXBwL2NhdGVyaW5nLXRvcGJhci5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLGNBQWM7Z0JBQ2QsVUFBVTtZQUNkOztBQUVaLHdiQUF3YiIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgbWF0LWZvcm0tZmllbGQge1xuICAgICAgICAgICAgICAgIGhlaWdodDogMy4yNWVtO1xuICAgICAgICAgICAgICAgIHdpZHRoOiA4ZW07XG4gICAgICAgICAgICB9XG4gICAgICAgICJdLCJzb3VyY2VSb290IjoiIn0= */"]
  });
}

/***/ }),

/***/ 95725:
/*!*******************************************************!*\
  !*** ./apps/caterer-ui/src/app/catering.component.ts ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CateringComponent: () => (/* binding */ CateringComponent)
/* harmony export */ });
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/router */ 95072);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _libs_catering_src_lib_catering_menu_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../libs/catering/src/lib/catering-menu.component */ 48519);
/* harmony import */ var _libs_catering_src_lib_catering_order_list_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../libs/catering/src/lib/catering-order-list.component */ 41623);
/* harmony import */ var _angular_material_core__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @angular/material/core */ 74646);
/* harmony import */ var _catering_topbar_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./catering-topbar.component */ 16396);









const _c0 = () => ["/menu"];
const _c1 = () => ["/orders"];
function CateringComponent_catering_topbar_1_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelement"](0, "catering-topbar", 6);
  }
}
function CateringComponent_div_2_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](0, "div", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](1, " To edit the menu de-select all levels from the top left ");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
  }
}
function CateringComponent_catering_order_list_4_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelement"](0, "catering-order-list", 8);
  }
}
function CateringComponent_catering_menu_5_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelement"](0, "catering-menu", 8);
  }
}
function CateringComponent_div_6_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](0, "div", 9)(1, "a", 10)(2, "div", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelement"](3, "div", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](4, "div", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](5, " Menus and Pricing ");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](6, "div", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](7, " View and Edit Menus and Pricing ");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](8, "a", 10)(9, "div", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelement"](10, "div", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](11, "div", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](12, " Today's Orders ");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](13, "div", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](14, " View Catering Orders and their statuses upon arrival ");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]()()();
  }
  if (rf & 2) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("routerLink", _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpureFunction0"](6, _c0));
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵstyleProp"]("background", "url(assets/img/menus.jpg)");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](6);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("routerLink", _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpureFunction0"](7, _c1));
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵstyleProp"]("background", "url(assets/img/orders.jpg)");
  }
}
class CateringComponent extends _placeos_common__WEBPACK_IMPORTED_MODULE_0__.AsyncHandler {
  constructor(_route) {
    super();
    this._route = _route;
  }
  ngOnInit() {
    this.subscription('route.params', this._route.paramMap.subscribe(params => this.page = params.has('view') ? params.get('view') : ''));
  }
  static #_ = this.ɵfac = function CateringComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || CateringComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵdirectiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_5__.ActivatedRoute));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵdefineComponent"]({
    type: CateringComponent,
    selectors: [["app-catering"]],
    features: [_angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵInheritDefinitionFeature"]],
    decls: 7,
    vars: 5,
    consts: [[1, "relative", "w-full", "flex", "flex-col", "bg-base-100"], ["class", "relative z-10", 4, "ngIf"], ["class", "p-2 flex items-center justify-center bg-info text-white text-sm mb-4 mx-8 rounded", 4, "ngIf"], [1, "flex", "flex-col", "flex-1", "h-1/2", "px-8", 3, "ngSwitch"], ["class", "flex-1", 4, "ngSwitchCase"], ["class", "flex flex-1 items-center justify-center h-1/2 w-full my-8 bg-base-200 rounded-2xl", 4, "ngSwitchDefault"], [1, "relative", "z-10"], [1, "p-2", "flex", "items-center", "justify-center", "bg-info", "text-white", "text-sm", "mb-4", "mx-8", "rounded"], [1, "flex-1"], [1, "flex", "flex-1", "items-center", "justify-center", "h-1/2", "w-full", "my-8", "bg-base-200", "rounded-2xl"], ["matRipple", "", 1, "w-[28rem]", "h-64", "rounded", "flex", "flex-col", "items-center", "bg-base-100", "text-base-content", "overflow-hidden", "m-2", "border", "border-base-300", 3, "routerLink"], [1, "relative", "w-full", "flex", "flex-1", "items-center", "justify-center"], [1, "absolute", "inset-0", "bg-base-content", "opacity-40", "z-0"], [1, "text-2xl", "text-base-100", "z-10"], [1, "p-2", "h-14", "w-full", "text-sm", "text-center", "flex", "items-center", "justify-center"]],
    template: function CateringComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](0, "main", 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](1, CateringComponent_catering_topbar_1_Template, 1, 0, "catering-topbar", 1)(2, CateringComponent_div_2_Template, 2, 0, "div", 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](3, "div", 3);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](4, CateringComponent_catering_order_list_4_Template, 1, 0, "catering-order-list", 4)(5, CateringComponent_catering_menu_5_Template, 1, 0, "catering-menu", 4)(6, CateringComponent_div_6_Template, 15, 8, "div", 5);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]()();
      }
      if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngIf", ctx.page);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngIf", ctx.page === "menu");
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngSwitch", ctx.page);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngSwitchCase", "orders");
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngSwitchCase", "menu");
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_6__.NgIf, _angular_common__WEBPACK_IMPORTED_MODULE_6__.NgSwitch, _angular_common__WEBPACK_IMPORTED_MODULE_6__.NgSwitchCase, _angular_common__WEBPACK_IMPORTED_MODULE_6__.NgSwitchDefault, _angular_router__WEBPACK_IMPORTED_MODULE_5__.RouterLink, _libs_catering_src_lib_catering_menu_component__WEBPACK_IMPORTED_MODULE_1__.CateringMenuComponent, _libs_catering_src_lib_catering_order_list_component__WEBPACK_IMPORTED_MODULE_2__.CateringOrderListComponent, _angular_material_core__WEBPACK_IMPORTED_MODULE_7__.MatRipple, _catering_topbar_component__WEBPACK_IMPORTED_MODULE_3__.CateringTopbarComponent],
    styles: ["[_nghost-%COMP%] {\n                display: flex;\n                height: 100%;\n                width: 100%;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNhdGVyaW5nLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1lBQ1k7Z0JBQ0ksYUFBYTtnQkFDYixZQUFZO2dCQUNaLFdBQVc7WUFDZiIsImZpbGUiOiJjYXRlcmluZy5jb21wb25lbnQudHMiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIDpob3N0IHtcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl19 */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2FwcHMvY2F0ZXJlci11aS9zcmMvYXBwL2NhdGVyaW5nLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1lBQ1k7Z0JBQ0ksYUFBYTtnQkFDYixZQUFZO2dCQUNaLFdBQVc7WUFDZjs7QUFFWixnZEFBZ2QiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIDpob3N0IHtcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl0sInNvdXJjZVJvb3QiOiIifQ== */"]
  });
}

/***/ }),

/***/ 50313:
/*!*********************************************************!*\
  !*** ./apps/caterer-ui/src/environments/environment.ts ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   environment: () => (/* binding */ environment)
/* harmony export */ });
// This file can be replaced durinx build by using the `fileReplacements` array.
// `nx build --prod` replaces `environment.ts` with `environment.prod.ts`.
// The list of file replacements can be found in `angular.json`.
const environment = {
  production: false
};
/*
 * For easier debugging in development mode, you can import the following file
 * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.
 *
 * This import should be commented out in production mode because it will have a negative impact
 * on performance if an error is thrown.
 */
// import 'zone.js/plugins/zone-error';  // Included with Angular CLI.

/***/ }),

/***/ 64592:
/*!*************************************!*\
  !*** ./apps/caterer-ui/src/main.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _angular_platform_browser__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/platform-browser */ 80436);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _app_app_module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./app/app.module */ 41922);
/* harmony import */ var _environments_environment__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./environments/environment */ 50313);




if (_environments_environment__WEBPACK_IMPORTED_MODULE_1__.environment.production) {
  (0,_angular_core__WEBPACK_IMPORTED_MODULE_2__.enableProdMode)();
}
_angular_platform_browser__WEBPACK_IMPORTED_MODULE_3__.platformBrowser().bootstrapModule(_app_app_module__WEBPACK_IMPORTED_MODULE_0__.AppModule).catch(err => console.error(err));

/***/ }),

/***/ 94584:
/*!*************************************************************!*\
  !*** ./apps/concierge/src/app/ui/date-options.component.ts ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DateOptionsComponent: () => (/* binding */ DateOptionsComponent)
/* harmony export */ });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! date-fns */ 12786);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! date-fns */ 28797);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @angular/forms */ 34456);
/* harmony import */ var _libs_components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../libs/components/src/lib/icon.component */ 69434);
/* harmony import */ var _libs_components_src_lib_custom_tooltip_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../../libs/components/src/lib/custom-tooltip.component */ 22238);
/* harmony import */ var _angular_material_core__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @angular/material/core */ 74646);
/* harmony import */ var _libs_form_fields_src_lib_date_calendar_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../../libs/form-fields/src/lib/date-calendar.component */ 89058);









function DateOptionsComponent_button_0_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "button", 6)(1, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](2, "today");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
    const calendar_picker_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵreference"](11);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵclassProp"]("pointer-events-none", ctx_r1.disabled)("opacity-30", ctx_r1.disabled);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("content", calendar_picker_r3);
  }
}
function DateOptionsComponent_button_4_Template(rf, ctx) {
  if (rf & 1) {
    const _r4 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "button", 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵlistener"]("click", function DateOptionsComponent_button_4_Template_button_click_0_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵrestoreView"](_r4);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵresetView"](ctx_r1.nextDay());
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](1, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](2, "keyboard_arrow_right");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()();
  }
}
function DateOptionsComponent_button_8_Template(rf, ctx) {
  if (rf & 1) {
    const _r5 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "button", 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵlistener"]("click", function DateOptionsComponent_button_8_Template_button_click_0_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵrestoreView"](_r5);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵresetView"](ctx_r1.nextDay());
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](1, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](2, "keyboard_arrow_right");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()();
  }
}
function DateOptionsComponent_button_9_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "button", 7)(1, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](2, "today");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
    const calendar_picker_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵreference"](11);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵclassProp"]("pointer-events-none", ctx_r1.disabled)("opacity-30", ctx_r1.disabled);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("content", calendar_picker_r3);
  }
}
function DateOptionsComponent_ng_template_10_Template(rf, ctx) {
  if (rf & 1) {
    const _r6 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "div", 8)(1, "date-calendar", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵlistener"]("ngModelChange", function DateOptionsComponent_ng_template_10_Template_date_calendar_ngModelChange_1_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵrestoreView"](_r6);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
      ctx_r1.date = $event;
      return _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵresetView"](ctx_r1.dateChange.emit($event));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngModel", ctx_r1.date)("offset_weekday", ctx_r1.week_start);
  }
}
class DateOptionsComponent {
  constructor() {
    this.is_new = false;
    this.disabled = false;
    /** Index of the day to start the week on when displaying the calendar */
    this.week_start = 0;
    /** Currently selected date */
    this.date = new Date().valueOf();
    /** Emitter for changes to the date */
    this.dateChange = new _angular_core__WEBPACK_IMPORTED_MODULE_3__.EventEmitter();
    /** Change date to the previous date */
    this.previousDay = () => {
      this.date = (0,date_fns__WEBPACK_IMPORTED_MODULE_4__.subDays)(new Date(this.date), 1).valueOf();
      this.dateChange.emit(this.date);
    };
    /** Change date to the next date */
    this.nextDay = () => {
      this.date = (0,date_fns__WEBPACK_IMPORTED_MODULE_5__.addDays)(new Date(this.date), 1).valueOf();
      this.dateChange.emit(this.date);
    };
  }
  ngOnChanges(changes) {
    if (changes.date) {
      this.date = this.date || Date.now();
    }
  }
  static #_ = this.ɵfac = function DateOptionsComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || DateOptionsComponent)();
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵdefineComponent"]({
    type: DateOptionsComponent,
    selectors: [["date-options"]],
    inputs: {
      is_new: "is_new",
      disabled: "disabled",
      week_start: "week_start",
      date: "date"
    },
    outputs: {
      dateChange: "dateChange"
    },
    features: [_angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵNgOnChangesFeature"]],
    decls: 12,
    vars: 8,
    consts: [["calendar_picker", ""], ["icon", "", "matRipple", "", "class", "rounded relative", "customTooltip", "", "yPosition", "top", 3, "content", "pointer-events-none", "opacity-30", 4, "ngIf"], ["icon", "", "matRipple", "", 3, "click"], ["icon", "", "matRipple", "", 3, "click", 4, "ngIf"], [1, "display", "m-4", "text-center", 2, "width", "7em"], ["icon", "", "matRipple", "", "class", "rounded relative border border-base-200", "customTooltip", "", "yPosition", "top", 3, "content", "pointer-events-none", "opacity-30", 4, "ngIf"], ["icon", "", "matRipple", "", "customTooltip", "", "yPosition", "top", 1, "rounded", "relative", 3, "content"], ["icon", "", "matRipple", "", "customTooltip", "", "yPosition", "top", 1, "rounded", "relative", "border", "border-base-200", 3, "content"], [1, "relative", "w-[19rem]", "rounded", "bg-base-100", "px-2", "py-4"], [3, "ngModelChange", "ngModel", "offset_weekday"]],
    template: function DateOptionsComponent_Template(rf, ctx) {
      if (rf & 1) {
        const _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵgetCurrentView"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](0, DateOptionsComponent_button_0_Template, 3, 5, "button", 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](1, "button", 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵlistener"]("click", function DateOptionsComponent_Template_button_click_1_listener() {
          _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵrestoreView"](_r1);
          return _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵresetView"](ctx.previousDay());
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](2, "app-icon");
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](3, "keyboard_arrow_left");
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](4, DateOptionsComponent_button_4_Template, 3, 0, "button", 3);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](5, "div", 4);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](6);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipe"](7, "date");
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](8, DateOptionsComponent_button_8_Template, 3, 0, "button", 3)(9, DateOptionsComponent_button_9_Template, 3, 5, "button", 5)(10, DateOptionsComponent_ng_template_10_Template, 2, 2, "ng-template", null, 0, _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplateRefExtractor"]);
      }
      if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", ctx.is_new);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](4);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", !ctx.is_new);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipeBind2"](7, 5, ctx.date, "mediumDate"), " ");
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", ctx.is_new);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", !ctx.is_new);
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_6__.NgIf, _angular_forms__WEBPACK_IMPORTED_MODULE_7__.NgControlStatus, _angular_forms__WEBPACK_IMPORTED_MODULE_7__.NgModel, _libs_components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_0__.IconComponent, _libs_components_src_lib_custom_tooltip_component__WEBPACK_IMPORTED_MODULE_1__.CustomTooltipComponent, _angular_material_core__WEBPACK_IMPORTED_MODULE_8__.MatRipple, _libs_form_fields_src_lib_date_calendar_component__WEBPACK_IMPORTED_MODULE_2__.DateCalendarComponent, _angular_common__WEBPACK_IMPORTED_MODULE_6__.DatePipe],
    styles: ["[_nghost-%COMP%] {\n                display: flex;\n                align-items: center;\n            }\n\n            input[_ngcontent-%COMP%] {\n                opacity: 0;\n                width: 100%;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRhdGUtb3B0aW9ucy5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLGFBQWE7Z0JBQ2IsbUJBQW1CO1lBQ3ZCOztZQUVBO2dCQUNJLFVBQVU7Z0JBQ1YsV0FBVztZQUNmIiwiZmlsZSI6ImRhdGUtb3B0aW9ucy5jb21wb25lbnQudHMiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIDpob3N0IHtcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlucHV0IHtcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAwO1xuICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgfVxuICAgICAgICAiXX0= */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2FwcHMvY29uY2llcmdlL3NyYy9hcHAvdWkvZGF0ZS1vcHRpb25zLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1lBQ1k7Z0JBQ0ksYUFBYTtnQkFDYixtQkFBbUI7WUFDdkI7O1lBRUE7Z0JBQ0ksVUFBVTtnQkFDVixXQUFXO1lBQ2Y7O0FBRVosZ21CQUFnbUIiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIDpob3N0IHtcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlucHV0IHtcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAwO1xuICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgfVxuICAgICAgICAiXSwic291cmNlUm9vdCI6IiJ9 */"]
  });
}

/***/ }),

/***/ 20949:
/*!**********************************!*\
  !*** ./libs/assets/src/index.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Asset: () => (/* reexport safe */ _lib_asset_class__WEBPACK_IMPORTED_MODULE_1__.Asset),
/* harmony export */   AssetCategory: () => (/* reexport safe */ _lib_asset_class__WEBPACK_IMPORTED_MODULE_1__.AssetCategory),
/* harmony export */   AssetGroup: () => (/* reexport safe */ _lib_asset_class__WEBPACK_IMPORTED_MODULE_1__.AssetGroup),
/* harmony export */   AssetGroupPipe: () => (/* reexport safe */ _lib_asset_group_pipe__WEBPACK_IMPORTED_MODULE_4__.AssetGroupPipe),
/* harmony export */   AssetPurchaseOrder: () => (/* reexport safe */ _lib_asset_class__WEBPACK_IMPORTED_MODULE_1__.AssetPurchaseOrder),
/* harmony export */   AssetSelectModalComponent: () => (/* reexport safe */ _lib_assets_module__WEBPACK_IMPORTED_MODULE_0__.AssetSelectModalComponent),
/* harmony export */   AssetsModule: () => (/* reexport safe */ _lib_assets_module__WEBPACK_IMPORTED_MODULE_0__.AssetsModule),
/* harmony export */   addAsset: () => (/* reexport safe */ _lib_assets_fn__WEBPACK_IMPORTED_MODULE_3__.addAsset),
/* harmony export */   addAssetCategory: () => (/* reexport safe */ _lib_assets_fn__WEBPACK_IMPORTED_MODULE_3__.addAssetCategory),
/* harmony export */   addAssetGroup: () => (/* reexport safe */ _lib_assets_fn__WEBPACK_IMPORTED_MODULE_3__.addAssetGroup),
/* harmony export */   addAssetPurchaseOrder: () => (/* reexport safe */ _lib_assets_fn__WEBPACK_IMPORTED_MODULE_3__.addAssetPurchaseOrder),
/* harmony export */   addAssetsInBulk: () => (/* reexport safe */ _lib_assets_fn__WEBPACK_IMPORTED_MODULE_3__.addAssetsInBulk),
/* harmony export */   assetAvailable: () => (/* reexport safe */ _lib_asset_utilities__WEBPACK_IMPORTED_MODULE_2__.assetAvailable),
/* harmony export */   deleteAsset: () => (/* reexport safe */ _lib_assets_fn__WEBPACK_IMPORTED_MODULE_3__.deleteAsset),
/* harmony export */   deleteAssetCategory: () => (/* reexport safe */ _lib_assets_fn__WEBPACK_IMPORTED_MODULE_3__.deleteAssetCategory),
/* harmony export */   deleteAssetGroup: () => (/* reexport safe */ _lib_assets_fn__WEBPACK_IMPORTED_MODULE_3__.deleteAssetGroup),
/* harmony export */   deleteAssetPurchaseOrder: () => (/* reexport safe */ _lib_assets_fn__WEBPACK_IMPORTED_MODULE_3__.deleteAssetPurchaseOrder),
/* harmony export */   deleteAssetsInBulk: () => (/* reexport safe */ _lib_assets_fn__WEBPACK_IMPORTED_MODULE_3__.deleteAssetsInBulk),
/* harmony export */   differenceBetweenAssetRequests: () => (/* reexport safe */ _lib_assets_fn__WEBPACK_IMPORTED_MODULE_3__.differenceBetweenAssetRequests),
/* harmony export */   generateAssetCategoryForm: () => (/* reexport safe */ _lib_asset_utilities__WEBPACK_IMPORTED_MODULE_2__.generateAssetCategoryForm),
/* harmony export */   generateAssetForm: () => (/* reexport safe */ _lib_asset_utilities__WEBPACK_IMPORTED_MODULE_2__.generateAssetForm),
/* harmony export */   generateAssetGroupForm: () => (/* reexport safe */ _lib_asset_utilities__WEBPACK_IMPORTED_MODULE_2__.generateAssetGroupForm),
/* harmony export */   generateAssetPurchaseOrderForm: () => (/* reexport safe */ _lib_asset_utilities__WEBPACK_IMPORTED_MODULE_2__.generateAssetPurchaseOrderForm),
/* harmony export */   getAssetRulesForZone: () => (/* reexport safe */ _lib_asset_utilities__WEBPACK_IMPORTED_MODULE_2__.getAssetRulesForZone),
/* harmony export */   getGroupsWithAssets: () => (/* reexport safe */ _lib_assets_fn__WEBPACK_IMPORTED_MODULE_3__.getGroupsWithAssets),
/* harmony export */   queryAssetCategories: () => (/* reexport safe */ _lib_assets_fn__WEBPACK_IMPORTED_MODULE_3__.queryAssetCategories),
/* harmony export */   queryAssetGroups: () => (/* reexport safe */ _lib_assets_fn__WEBPACK_IMPORTED_MODULE_3__.queryAssetGroups),
/* harmony export */   queryAssetGroupsExtended: () => (/* reexport safe */ _lib_assets_fn__WEBPACK_IMPORTED_MODULE_3__.queryAssetGroupsExtended),
/* harmony export */   queryAssetPurchaseOrders: () => (/* reexport safe */ _lib_assets_fn__WEBPACK_IMPORTED_MODULE_3__.queryAssetPurchaseOrders),
/* harmony export */   queryAssets: () => (/* reexport safe */ _lib_assets_fn__WEBPACK_IMPORTED_MODULE_3__.queryAssets),
/* harmony export */   queryAvailableAssets: () => (/* reexport safe */ _lib_assets_fn__WEBPACK_IMPORTED_MODULE_3__.queryAvailableAssets),
/* harmony export */   queryGroupAvailability: () => (/* reexport safe */ _lib_assets_fn__WEBPACK_IMPORTED_MODULE_3__.queryGroupAvailability),
/* harmony export */   removeAssetRequests: () => (/* reexport safe */ _lib_assets_fn__WEBPACK_IMPORTED_MODULE_3__.removeAssetRequests),
/* harmony export */   saveAsset: () => (/* reexport safe */ _lib_assets_fn__WEBPACK_IMPORTED_MODULE_3__.saveAsset),
/* harmony export */   saveAssetCategory: () => (/* reexport safe */ _lib_assets_fn__WEBPACK_IMPORTED_MODULE_3__.saveAssetCategory),
/* harmony export */   saveAssetGroup: () => (/* reexport safe */ _lib_assets_fn__WEBPACK_IMPORTED_MODULE_3__.saveAssetGroup),
/* harmony export */   saveAssetPurchaseOrder: () => (/* reexport safe */ _lib_assets_fn__WEBPACK_IMPORTED_MODULE_3__.saveAssetPurchaseOrder),
/* harmony export */   saveAssetsInBulk: () => (/* reexport safe */ _lib_assets_fn__WEBPACK_IMPORTED_MODULE_3__.saveAssetsInBulk),
/* harmony export */   showAsset: () => (/* reexport safe */ _lib_assets_fn__WEBPACK_IMPORTED_MODULE_3__.showAsset),
/* harmony export */   showAssetCategory: () => (/* reexport safe */ _lib_assets_fn__WEBPACK_IMPORTED_MODULE_3__.showAssetCategory),
/* harmony export */   showAssetGroup: () => (/* reexport safe */ _lib_assets_fn__WEBPACK_IMPORTED_MODULE_3__.showAssetGroup),
/* harmony export */   showAssetPurchaseOrder: () => (/* reexport safe */ _lib_assets_fn__WEBPACK_IMPORTED_MODULE_3__.showAssetPurchaseOrder),
/* harmony export */   showGroupFull: () => (/* reexport safe */ _lib_assets_fn__WEBPACK_IMPORTED_MODULE_3__.showGroupFull),
/* harmony export */   updateAsset: () => (/* reexport safe */ _lib_assets_fn__WEBPACK_IMPORTED_MODULE_3__.updateAsset),
/* harmony export */   updateAssetCategory: () => (/* reexport safe */ _lib_assets_fn__WEBPACK_IMPORTED_MODULE_3__.updateAssetCategory),
/* harmony export */   updateAssetGroup: () => (/* reexport safe */ _lib_assets_fn__WEBPACK_IMPORTED_MODULE_3__.updateAssetGroup),
/* harmony export */   updateAssetGroupList: () => (/* reexport safe */ _lib_asset_group_pipe__WEBPACK_IMPORTED_MODULE_4__.updateAssetGroupList),
/* harmony export */   updateAssetPurchaseOrder: () => (/* reexport safe */ _lib_assets_fn__WEBPACK_IMPORTED_MODULE_3__.updateAssetPurchaseOrder),
/* harmony export */   updateAssetsInBulk: () => (/* reexport safe */ _lib_assets_fn__WEBPACK_IMPORTED_MODULE_3__.updateAssetsInBulk),
/* harmony export */   validateAssetRequestsForResource: () => (/* reexport safe */ _lib_assets_fn__WEBPACK_IMPORTED_MODULE_3__.validateAssetRequestsForResource)
/* harmony export */ });
/* harmony import */ var _lib_assets_module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./lib/assets.module */ 99708);
/* harmony import */ var _lib_asset_class__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./lib/asset.class */ 84011);
/* harmony import */ var _lib_asset_utilities__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./lib/asset.utilities */ 82615);
/* harmony import */ var _lib_assets_fn__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./lib/assets.fn */ 75204);
/* harmony import */ var _lib_asset_group_pipe__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./lib/asset-group.pipe */ 68965);






/***/ }),

/***/ 68965:
/*!*************************************************!*\
  !*** ./libs/assets/src/lib/asset-group.pipe.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AssetGroupPipe: () => (/* binding */ AssetGroupPipe),
/* harmony export */   updateAssetGroupList: () => (/* binding */ updateAssetGroupList)
/* harmony export */ });
/* harmony import */ var _home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 89204);
/* harmony import */ var _asset_class__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./asset.class */ 84011);
/* harmony import */ var _assets_fn__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./assets.fn */ 75204);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/core */ 37580);




const ASSET_GROUP_LIST = [];
const EMPTY_ASSET_GROUP = new _asset_class__WEBPACK_IMPORTED_MODULE_1__.AssetGroup();
function updateAssetGroupList(assetgroup_list) {
  for (const assetgroup of assetgroup_list) {
    if (!ASSET_GROUP_LIST.find(({
      id
    }) => id === assetgroup.id)) {
      ASSET_GROUP_LIST.push(assetgroup);
    }
  }
}
class AssetGroupPipe {
  /**
   * Get details of the assetgroup with the given ID
   * @param assetgroup_id ID or Email of the assetgroup
   */
  transform(group_id) {
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      if (!group_id) return EMPTY_ASSET_GROUP;
      let asset_group = ASSET_GROUP_LIST.find(({
        id
      }) => id === group_id);
      if (asset_group) return asset_group;
      const group = yield (0,_assets_fn__WEBPACK_IMPORTED_MODULE_2__.showAssetGroup)(group_id).toPromise().catch(_ => null);
      if (group) {
        asset_group = {
          ...group
        };
        ASSET_GROUP_LIST.push(asset_group);
        return asset_group;
      }
      return EMPTY_ASSET_GROUP;
    })();
  }
  updateAssetGroupList(assetgroup_list) {
    updateAssetGroupList(assetgroup_list);
  }
  static #_ = this.ɵfac = function AssetGroupPipe_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || AssetGroupPipe)();
  };
  static #_2 = this.ɵpipe = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵdefinePipe"]({
    name: "assetgroup",
    type: AssetGroupPipe,
    pure: true
  });
}

/***/ }),

/***/ 83618:
/*!***********************************************************!*\
  !*** ./libs/assets/src/lib/asset-list-field.component.ts ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AssetListFieldComponent: () => (/* binding */ AssetListFieldComponent)
/* harmony export */ });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @angular/forms */ 34456);
/* harmony import */ var libs_common_src_lib_settings_service__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! libs/common/src/lib/settings.service */ 14233);
/* harmony import */ var libs_assets_src_lib_asset_select_modal_asset_select_modal_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! libs/assets/src/lib/asset-select-modal/asset-select-modal.component */ 47471);
/* harmony import */ var _asset_state_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./asset-state.service */ 46088);
/* harmony import */ var _asset_request_class__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./asset-request.class */ 33747);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! date-fns */ 56441);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! date-fns */ 33240);
/* harmony import */ var _angular_material_dialog__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @angular/material/dialog */ 12587);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../components/src/lib/icon.component */ 69434);
/* harmony import */ var _angular_material_core__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @angular/material/core */ 74646);
/* harmony import */ var _angular_material_tooltip__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @angular/material/tooltip */ 80640);

















function AssetListFieldComponent_div_1_div_8_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](0, "div", 15)(1, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](2, "priority_high");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const request_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵnextContext"]().$implicit;
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("matTooltip", ctx_r2.err_tooltip(request_r2));
  }
}
function AssetListFieldComponent_div_1_div_22_Template(rf, ctx) {
  if (rf & 1) {
    const _r4 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](0, "div", 16)(1, "div", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](3, "div", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](5, "button", 19);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵlistener"]("click", function AssetListFieldComponent_div_1_div_22_Template_button_click_5_listener() {
      const item_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵrestoreView"](_r4).$implicit;
      const request_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵnextContext"]().$implicit;
      const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵresetView"](ctx_r2.removeRequestItem(request_r2, item_r5));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](6, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](7, "delete");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](8, "button", 20);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵlistener"]("click", function AssetListFieldComponent_div_1_div_22_Template_button_click_8_listener() {
      const item_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵrestoreView"](_r4).$implicit;
      const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵnextContext"](2);
      return _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵresetView"](ctx_r2.toggleFavourite(item_r5));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](9, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](10);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]()()();
  }
  if (rf & 2) {
    const item_r5 = ctx.$implicit;
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtextInterpolate1"](" ", item_r5.name || "Item", " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtextInterpolate1"](" x", item_r5.quantity, " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵclassProp"]("text-blue-400", ctx_r2.favorites.includes(item_r5.id));
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("matTooltip", ctx_r2.favorites.includes(item_r5.id) ? "Remove from favourites" : "Add to favourites");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtextInterpolate"](ctx_r2.favorites.includes(item_r5.id) ? "favorite" : "favorite_border");
  }
}
function AssetListFieldComponent_div_1_Template(rf, ctx) {
  if (rf & 1) {
    const _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](0, "div", 4)(1, "div", 5)(2, "div", 6)(3, "div", 7)(4, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpipe"](6, "date");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpipe"](7, "date");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtemplate"](8, AssetListFieldComponent_div_1_div_8_Template, 3, 1, "div", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](9, "button", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵlistener"]("click", function AssetListFieldComponent_div_1_Template_button_click_9_listener() {
      const request_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵrestoreView"](_r1).$implicit;
      const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵresetView"](ctx_r2.duplicateRequest(request_r2));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](10, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](11, "content_copy");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](12, "button", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵlistener"]("click", function AssetListFieldComponent_div_1_Template_button_click_12_listener() {
      const request_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵrestoreView"](_r1).$implicit;
      const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵresetView"](ctx_r2.editRequest(request_r2));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](13, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](14, "edit");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](15, "button", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵlistener"]("click", function AssetListFieldComponent_div_1_Template_button_click_15_listener() {
      const request_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵrestoreView"](_r1).$implicit;
      const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵresetView"](ctx_r2.removeRequest(request_r2));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](16, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](17, "delete");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](18, "button", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵlistener"]("click", function AssetListFieldComponent_div_1_Template_button_click_18_listener() {
      const request_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵrestoreView"](_r1).$implicit;
      const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵresetView"](ctx_r2.show_request[request_r2.id] = !ctx_r2.show_request[request_r2.id]);
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](19, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](20);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]()()();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](21, "div", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtemplate"](22, AssetListFieldComponent_div_1_div_22_Template, 11, 6, "div", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const request_r2 = ctx.$implicit;
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵclassProp"]("border-error", ctx_r2.end_time < request_r2.deliver_at)("border-base-300", ctx_r2.end_time >= request_r2.deliver_at);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtextInterpolate2"](" Request for ", _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpipeBind2"](6, 11, request_r2.deliver_at_time, "mediumDate"), " at ", _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpipeBind2"](7, 14, request_r2.deliver_at_time, ctx_r2.time_format), " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("ngIf", ctx_r2.end_time <= request_r2.deliver_at || ctx_r2.rejected_ids.includes(request_r2.id) || request_r2.conflict);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](10);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("matTooltip", ctx_r2.show_request[request_r2.id] ? "Hide order items" : "Show order items");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtextInterpolate1"](" ", ctx_r2.show_request[request_r2.id] ? "expand_less" : "expand_more", " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("@show", ctx_r2.show_request[request_r2.id] ? "show" : "hide");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("ngForOf", request_r2.items);
  }
}
const EMPTY_FAVS = [];
class AssetListFieldComponent {
  err_tooltip(request) {
    return this.rejected_ids.includes(request.id) || request.conflict ? 'Some of the items are not available for the selected date and time.' : 'Delivery time is outside of the event time.\nThis order will be ignored.';
  }
  get favorites() {
    return this._settings.get('favourite_assets') || EMPTY_FAVS;
  }
  get end_time() {
    const time = (this.options.date || Date.now()) + (this.options.duration || 30) * 60 * 1000;
    return this.options.all_day ? (0,date_fns__WEBPACK_IMPORTED_MODULE_7__.endOfDay)(time).valueOf() : time;
  }
  get time_format() {
    return this._settings.time_format || 'shortTime';
  }
  constructor(_settings, _dialog, _state) {
    this._settings = _settings;
    this._dialog = _dialog;
    this._state = _state;
    this.options = {};
    this.rejected_ids = [];
    this.asset_requests = [];
    this.disabled = false;
    this.show_request = {};
    this.selected = [];
    this.registerOnChange = fn => this._onChange = fn;
    this.registerOnTouched = fn => this._onTouch = fn;
    this.setDisabledState = s => this.disabled = s;
  }
  ngOnChanges(changes) {
    if (changes.options) {
      this.asset_requests = (this.asset_requests || []).map(_ => new _asset_request_class__WEBPACK_IMPORTED_MODULE_3__.AssetRequest({
        ..._,
        event: this.options
      }));
      this._state.setOptions({
        date: this.options.date,
        duration: this.options.duration
      });
    }
  }
  /**
   * Update the form field value
   * @param new_value New value to set on the form field
   */
  setValue(new_value) {
    this.asset_requests = new_value;
    if (this._onChange) this._onChange(this.asset_requests);
  }
  /**
   * Update local value when form control value is changed
   * @param value The new value for the component
   */
  writeValue(value) {
    this.asset_requests = (value || []).map(_ => new _asset_request_class__WEBPACK_IMPORTED_MODULE_3__.AssetRequest({
      ..._,
      event: this.options,
      state: _.state
    }));
  }
  editRequest(order = new _asset_request_class__WEBPACK_IMPORTED_MODULE_3__.AssetRequest()) {
    const order_list = this.asset_requests.filter(_ => _.id !== order.id);
    const requested = {};
    for (const order of order_list) {
      for (const item of order.items) {
        requested[item.id] = (requested[item.id] || 0) + item?.quantity || 0;
      }
    }
    const ref = this._dialog.open(libs_assets_src_lib_asset_select_modal_asset_select_modal_component__WEBPACK_IMPORTED_MODULE_1__.AssetSelectModalComponent, {
      data: {
        items: order.items,
        details: {
          ...this.options,
          date: this.options.all_day ? (0,date_fns__WEBPACK_IMPORTED_MODULE_8__.startOfDay)(this.options.date).valueOf() : this.options.date,
          duration: this.options.all_day ? Math.max(24 * 60, this.options.duration) : this.options.duration
        },
        exact_time: !!order.deliver_time,
        offset: order.deliver_offset,
        offset_day: order.deliver_day_offset,
        requested
      }
    });
    ref.afterClosed().subscribe(items => {
      const orders = this.asset_requests.filter(_ => _.id !== order.id);
      if (!items?.length) return;
      for (const item of items) {
        if (item.assets?.length) {
          const list = [];
          item.item_ids = new Array(item.quantity).fill(0).map(_ => {
            let id = '';
            let count = 0;
            while ((!id || list.includes(id)) && count < item.assets.length) {
              id = item.assets[(0,_placeos_common__WEBPACK_IMPORTED_MODULE_4__.randomInt)(item.assets.length)].id;
            }
            list.push(id);
            return id;
          });
        }
      }
      const time = new Date(this.options.date);
      const new_order = new _asset_request_class__WEBPACK_IMPORTED_MODULE_3__.AssetRequest({
        ...order,
        conflict: false,
        _changed: order._changed || order.items.find(_ => items.find(__ => __.id === _.id)?.quantity !== _.quantity),
        items: items.map(_ => ({
          ..._
        })),
        event: this.options,
        deliver_offset: ref.componentInstance.offset,
        deliver_time: ref.componentInstance.exact_time ? time.getHours() + time.getMinutes() / 60 : null,
        deliver_day_offset: ref.componentInstance.offset_day || 0
      });
      for (const item of new_order.items) {
        const total = orders.reduce((t, c) => t += c.items.find(_ => _.id === item.id)?.quantity || 0, 0);
        if (total + item.quantity > item.assets.length) {
          (0,_placeos_common__WEBPACK_IMPORTED_MODULE_4__.notifyError)(`Not enough assets available to meet request [${item.name}].
                        Another request for this asset has been made in this meeting.`, undefined, undefined, {
            duration: 5000
          });
          return;
        }
      }
      if (new_order.item_count <= 0) return;
      this.setValue([...orders, new_order]);
    });
  }
  removeRequest(request) {
    const updated_list = this.asset_requests.filter(_ => _.id !== request.id);
    this.setValue(updated_list);
  }
  duplicateRequest(order) {
    const new_order = new _asset_request_class__WEBPACK_IMPORTED_MODULE_3__.AssetRequest({
      ...order,
      id: `order-${(0,_placeos_common__WEBPACK_IMPORTED_MODULE_4__.randomString)(8)}`
    });
    this.setValue([...this.asset_requests, new_order]);
  }
  removeRequestItem(order, item) {
    const new_order = new _asset_request_class__WEBPACK_IMPORTED_MODULE_3__.AssetRequest({
      ...order,
      items: order.items.filter(_ => _.id !== item.id)
    });
    const updated_list = this.asset_requests.filter(_ => _.id !== order.id);
    if (new_order.items.length > 0) {
      this.setValue([...updated_list, new_order]);
    } else this.setValue(updated_list);
  }
  toggleFavourite(asset) {
    const fav_list = this.favorites;
    const new_state = !fav_list.includes(asset.id);
    if (new_state) {
      this._settings.saveUserSetting('favourite_assets', [...fav_list, asset.id]);
    } else {
      this._settings.saveUserSetting('favourite_assets', fav_list.filter(_ => _ !== asset.id));
    }
  }
  static #_ = this.ɵfac = function AssetListFieldComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || AssetListFieldComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵdirectiveInject"](libs_common_src_lib_settings_service__WEBPACK_IMPORTED_MODULE_0__.SettingsService), _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵdirectiveInject"](_angular_material_dialog__WEBPACK_IMPORTED_MODULE_9__.MatDialog), _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵdirectiveInject"](_asset_state_service__WEBPACK_IMPORTED_MODULE_2__.AssetStateService));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵdefineComponent"]({
    type: AssetListFieldComponent,
    selectors: [["asset-list-field"]],
    inputs: {
      options: "options",
      rejected_ids: "rejected_ids"
    },
    features: [_angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵProvidersFeature"]([{
      provide: _angular_forms__WEBPACK_IMPORTED_MODULE_10__.NG_VALUE_ACCESSOR,
      /* istanbul ignore next */
      useExisting: (0,_angular_core__WEBPACK_IMPORTED_MODULE_6__.forwardRef)(() => AssetListFieldComponent),
      multi: true
    }]), _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵNgOnChangesFeature"]],
    decls: 8,
    vars: 2,
    consts: [["list", "", 1, "space-y-2"], ["request", "", "class", "border shadow bg-base-100 rounded-xl overflow-hidden", 3, "border-error", "border-base-300", 4, "ngFor", "ngForOf"], ["btn", "", "matRipple", "", "add-space", "", 1, "w-full", "inverse", "mt-2", 3, "click", "disabled"], [1, "flex", "items-center", "justify-center", "space-x-2"], ["request", "", 1, "border", "shadow", "bg-base-100", "rounded-xl", "overflow-hidden"], [1, "flex", "items-center", "space-x-2", "p-4"], [1, "flex-1"], [1, "flex", "items-center", "space-x-4"], ["class", "flex items-center justify-center h-6 w-6 rounded-full bg-error text-error-content", 3, "matTooltip", 4, "ngIf"], ["icon", "", "matRipple", "", "matTooltip", "Duplicate Request", 3, "click"], ["icon", "", "matRipple", "", "matTooltip", "Edit Request", 3, "click"], ["icon", "", "matRipple", "", "matTooltip", "Remove Request", 1, "text-error", 3, "click"], ["icon", "", "matRipple", "", 3, "click", "matTooltip"], [1, "flex", "flex-col", "bg-base-200", "divide-y", "divide-base-100"], ["class", "flex items-center px-4 py-1 space-x-2 hover:opacity-90", 4, "ngFor", "ngForOf"], [1, "flex", "items-center", "justify-center", "h-6", "w-6", "rounded-full", "bg-error", "text-error-content", 3, "matTooltip"], [1, "flex", "items-center", "px-4", "py-1", "space-x-2", "hover:opacity-90"], [1, "flex", "items-center", "flex-1"], [1, "rounded", "bg-success", "text-success-content", "text-xs", "px-2", "py-1"], ["icon", "", "matRipple", "", "matTooltip", "Remove Request Item", 1, "text-error", 3, "click"], ["icon", "", "matRipple", "", "name", "toggle-catering-item-favourite", 3, "click", "matTooltip"]],
    template: function AssetListFieldComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](0, "div", 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtemplate"](1, AssetListFieldComponent_div_1_Template, 23, 17, "div", 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](2, "button", 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵlistener"]("click", function AssetListFieldComponent_Template_button_click_2_listener() {
          return ctx.editRequest();
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](3, "div", 3)(4, "app-icon");
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](5, "search");
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](6, "span");
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](7, "Add Asset");
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]()()();
      }
      if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("ngForOf", ctx.asset_requests);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("disabled", ctx.disabled);
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_11__.NgForOf, _angular_common__WEBPACK_IMPORTED_MODULE_11__.NgIf, _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_5__.IconComponent, _angular_material_core__WEBPACK_IMPORTED_MODULE_12__.MatRipple, _angular_material_tooltip__WEBPACK_IMPORTED_MODULE_13__.MatTooltip, _angular_common__WEBPACK_IMPORTED_MODULE_11__.DatePipe],
    data: {
      animation: [_placeos_common__WEBPACK_IMPORTED_MODULE_4__.ANIMATION_SHOW_CONTRACT_EXPAND]
    }
  });
}

/***/ }),

/***/ 33747:
/*!****************************************************!*\
  !*** ./libs/assets/src/lib/asset-request.class.ts ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AssetRequest: () => (/* binding */ AssetRequest)
/* harmony export */ });
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! date-fns */ 77177);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! date-fns */ 28797);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! date-fns */ 33240);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! date-fns */ 49675);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! date-fns */ 23206);


function deliverAtTime(request) {
  let date = request.event?.date || request._time;
  if (request.deliver_time) {
    date = (0,date_fns__WEBPACK_IMPORTED_MODULE_1__.set)(date, {
      hours: Math.floor(request.deliver_time),
      minutes: request.deliver_time % 1 * 60
    }).valueOf();
  }
  if (request.deliver_day_offset > 0 || request.event?.all_day) {
    date = (0,date_fns__WEBPACK_IMPORTED_MODULE_2__.addDays)((0,date_fns__WEBPACK_IMPORTED_MODULE_3__.startOfDay)(date), request.deliver_day_offset).valueOf();
  }
  return (0,date_fns__WEBPACK_IMPORTED_MODULE_4__.addMinutes)(date, request.deliver_offset).valueOf();
}
class AssetRequest {
  get deliver_at() {
    return deliverAtTime(this);
  }
  get status() {
    return this._status;
  }
  set status(value) {
    this._status = value;
    this[`${this.event_id}_status`] = value;
  }
  constructor(data = {}) {
    this.conflict = false;
    this._changed = false;
    this._time = (0,date_fns__WEBPACK_IMPORTED_MODULE_5__.startOfMinute)(Date.now()).valueOf();
    this.id = data.id || `order-${(0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.randomInt)(9_999_999, 1_000_000)}`;
    this.event_id = data.event_id || data.parent_id || '';
    this.items = data.items || data.asset_ids?.map(_ => ({
      id: _,
      quantity: 1
    })) || [];
    this.item_count = this.items.reduce((amount, item) => amount + item.quantity, 0);
    this._status = data[`${this.event_id}_status`] || data.status || (data.extension_data || {})[`${this.event_id}_status`] || data.extension_data?.status || 'in_storage';
    this.event = data.event || data || null;
    const booking = this.event?.linked_bookings?.find(_ => _.extension_data.request_id === this.id);
    this._booking = booking || data.booking || null;
    this._changed = !!data._changed || !booking;
    this.notes = data.notes || data.description || '';
    this.deliver_time = data.deliver_time || data.extension_data?.deliver_time || undefined;
    this.deliver_offset = data.deliver_offset || data.extension_data?.deliver_offset || 0;
    this.deliver_day_offset = data.deliver_day_offset || data.extension_data?.deliver_day_offset || 0;
    this.deliver_at_time = deliverAtTime(this);
    this.conflict = !!data.conflict;
    this.ref_id = `${this.deliver_at_time}|${this.items.map(_ => `${_.id}:${_.quantity}`).join('|')}`;
  }
  toJSON() {
    const blob = {
      ...this
    };
    delete blob.event;
    delete blob._changed;
    delete blob._status;
    delete blob._time;
    delete blob.deliver_at_time;
    delete blob.deliver_at;
    blob.items = blob.items.map(_ => ({
      id: _.id,
      category_id: _.category_id,
      quantity: _.quantity,
      name: _.name,
      item_ids: _.item_ids
    }));
    return blob;
  }
}

/***/ }),

/***/ 48751:
/*!***************************************************************************!*\
  !*** ./libs/assets/src/lib/asset-select-modal/asset-details.component.ts ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AssetDetailsComponent: () => (/* binding */ AssetDetailsComponent)
/* harmony export */ });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _asset_class__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../asset.class */ 84011);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _form_fields_src_lib_counter_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../form-fields/src/lib/counter.component */ 55507);
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @angular/forms */ 34456);
/* harmony import */ var _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../components/src/lib/icon.component */ 69434);
/* harmony import */ var _components_src_lib_image_carousel_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../components/src/lib/image-carousel.component */ 65277);
/* harmony import */ var _angular_material_core__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @angular/material/core */ 74646);









function AssetDetailsComponent_ng_container_0_Template(rf, ctx) {
  if (rf & 1) {
    const _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](1, "section", 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelement"](2, "image-carousel", 3);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](3, "button", 4);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵlistener"]("click", function AssetDetailsComponent_ng_container_0_Template_button_click_3_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵrestoreView"](_r1);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵresetView"](ctx_r1.close.emit());
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](4, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](5, "arrow_back");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](6, "button", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵlistener"]("click", function AssetDetailsComponent_ng_container_0_Template_button_click_6_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵrestoreView"](_r1);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵresetView"](ctx_r1.toggleFav.emit());
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](7, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](8);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]()()();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](9, "div", 6)(10, "section", 7)(11, "div")(12, "h2", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](13);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](14, "p");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](15);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](16, "a-counter", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtwoWayListener"]("ngModelChange", function AssetDetailsComponent_ng_container_0_Template_a_counter_ngModelChange_16_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵrestoreView"](_r1);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"]();
      _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtwoWayBindingSet"](ctx_r1.item.quantity, $event) || (ctx_r1.item.quantity = $event);
      return _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵresetView"]($event);
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵlistener"]("ngModelChange", function AssetDetailsComponent_ng_container_0_Template_a_counter_ngModelChange_16_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵrestoreView"](_r1);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵresetView"](ctx_r1.countChange.emit($event));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelement"](17, "hr");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](18, "section", 10)(19, "h2", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](20, "Details");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](21, "div", 12)(22, "p");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](23);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]()()()();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](24, "div", 13)(25, "button", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵlistener"]("click", function AssetDetailsComponent_ng_container_0_Template_button_click_25_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵrestoreView"](_r1);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"]();
      ctx_r1.active = !ctx_r1.active;
      return _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵresetView"](ctx_r1.activeChange.emit(ctx_r1.active));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](26, "div", 15)(27, "app-icon", 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](28);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](29, "p");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](30);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]()()()();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementContainerEnd"]();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("images", ctx_r1.item.images);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵclassProp"]("text-info-content", ctx_r1.fav)("!bg-info", ctx_r1.fav);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtextInterpolate1"](" ", ctx_r1.fav ? "favorite" : "favorite_border", " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtextInterpolate1"](" ", ctx_r1.item.name, " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtextInterpolate1"](" ", (ctx_r1.item.available != null ? ctx_r1.item.available : ctx_r1.item.assets == null ? null : ctx_r1.item.assets.length) || 0, " Available ");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtwoWayProperty"]("ngModel", ctx_r1.item.quantity);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("min", 1)("max", (ctx_r1.item.available != null ? ctx_r1.item.available : ctx_r1.item.assets == null ? null : ctx_r1.item.assets.length) || 1);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](7);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtextInterpolate"](ctx_r1.item.description || "No description");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵclassProp"]("inverse", ctx_r1.active);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtextInterpolate1"](" ", ctx_r1.active ? "remove" : "add", " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtextInterpolate1"](" ", ctx_r1.active ? "Remove this asset" : "Add this asset", " ");
  }
}
function AssetDetailsComponent_ng_template_1_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](0, "div", 17)(1, "p", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](2, " Select an asset to view it's details ");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]()();
  }
}
class AssetDetailsComponent {
  constructor() {
    this.active = false;
    this.fav = false;
    this.toggleFav = new _angular_core__WEBPACK_IMPORTED_MODULE_4__.EventEmitter();
    this.activeChange = new _angular_core__WEBPACK_IMPORTED_MODULE_4__.EventEmitter();
    this.countChange = new _angular_core__WEBPACK_IMPORTED_MODULE_4__.EventEmitter();
    this.close = new _angular_core__WEBPACK_IMPORTED_MODULE_4__.EventEmitter();
  }
  ngOnInit() {
    if (this.item && !this.item.quantity) this.item.quantity = 1;
  }
  ngOnChanges(changes) {
    if (changes.item && this.item) {
      if (!this.item.quantity) this.item.quantity = 1;
    }
  }
  static #_ = this.ɵfac = function AssetDetailsComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || AssetDetailsComponent)();
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵdefineComponent"]({
    type: AssetDetailsComponent,
    selectors: [["asset-details"]],
    inputs: {
      item: "item",
      active: "active",
      fav: "fav"
    },
    outputs: {
      toggleFav: "toggleFav",
      activeChange: "activeChange",
      countChange: "countChange",
      close: "close"
    },
    features: [_angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵNgOnChangesFeature"]],
    decls: 3,
    vars: 2,
    consts: [["empty_state", ""], [4, "ngIf", "ngIfElse"], ["image", "", 1, "relative", "w-full", "h-64", "sm:h-40", "bg-base-200"], [1, "absolute", "inset-0", 3, "images"], ["icon", "", "matRipple", "", "close", "", 1, "absolute", "top-2", "left-2", "bg-base-200", "sm:hidden", 3, "click"], ["icon", "", "matRipple", "", "fav", "", 1, "absolute", "top-2", "right-2", "bg-base-200", 3, "click"], [1, "p-2", "space-y-2", "flex-1", "h-1/2", "overflow-auto"], ["actions", "", 1, "z-0", "flex", "items-center", "justify-between"], [1, "text-xl", "font-medium", "mb-2", "mt-4"], [3, "ngModelChange", "ngModel", "min", "max"], ["details", "", 1, "space-y-2"], [1, "text-xl", "font-medium"], [1, "flex", "items-center", "space-x-2"], [1, "p-2", "border-t", "border-base-200", "shadow", "sm:hidden"], ["btn", "", "matRipple", "", "select", "", 1, "w-full", 3, "click"], [1, "flex", "items-center", "justify-center"], [1, "text-2xl"], ["empty", "", 1, "p-16", "flex", "flex-col", "items-center", "justify-center", "space-y-2"], [1, "opacity-30", "text-center"]],
    template: function AssetDetailsComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](0, AssetDetailsComponent_ng_container_0_Template, 31, 16, "ng-container", 1)(1, AssetDetailsComponent_ng_template_1_Template, 3, 0, "ng-template", null, 0, _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplateRefExtractor"]);
      }
      if (rf & 2) {
        const empty_state_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵreference"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngIf", ctx.item)("ngIfElse", empty_state_r3);
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_5__.NgIf, _form_fields_src_lib_counter_component__WEBPACK_IMPORTED_MODULE_1__.CounterComponent, _angular_forms__WEBPACK_IMPORTED_MODULE_6__.NgControlStatus, _angular_forms__WEBPACK_IMPORTED_MODULE_6__.NgModel, _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_2__.IconComponent, _components_src_lib_image_carousel_component__WEBPACK_IMPORTED_MODULE_3__.ImageCarouselComponent, _angular_material_core__WEBPACK_IMPORTED_MODULE_7__.MatRipple],
    styles: ["[_nghost-%COMP%] {\n                display: flex;\n                flex-direction: column;\n                width: 30%;\n                min-width: 20rem;\n                height: 100%;\n                min-height: 65vh;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0LWRldGFpbHMuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxhQUFhO2dCQUNiLHNCQUFzQjtnQkFDdEIsVUFBVTtnQkFDVixnQkFBZ0I7Z0JBQ2hCLFlBQVk7Z0JBQ1osZ0JBQWdCO1lBQ3BCIiwiZmlsZSI6ImFzc2V0LWRldGFpbHMuY29tcG9uZW50LnRzIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICA6aG9zdCB7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgICAgICAgIHdpZHRoOiAzMCU7XG4gICAgICAgICAgICAgICAgbWluLXdpZHRoOiAyMHJlbTtcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgICAgICAgICAgbWluLWhlaWdodDogNjV2aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl19 */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvYXNzZXRzL3NyYy9saWIvYXNzZXQtc2VsZWN0LW1vZGFsL2Fzc2V0LWRldGFpbHMuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxhQUFhO2dCQUNiLHNCQUFzQjtnQkFDdEIsVUFBVTtnQkFDVixnQkFBZ0I7Z0JBQ2hCLFlBQVk7Z0JBQ1osZ0JBQWdCO1lBQ3BCOztBQUVaLHdxQkFBd3FCIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICA6aG9zdCB7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgICAgICAgIHdpZHRoOiAzMCU7XG4gICAgICAgICAgICAgICAgbWluLXdpZHRoOiAyMHJlbTtcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgICAgICAgICAgbWluLWhlaWdodDogNjV2aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl0sInNvdXJjZVJvb3QiOiIifQ== */"]
  });
}

/***/ }),

/***/ 76041:
/*!***********************************************************************************!*\
  !*** ./libs/assets/src/lib/asset-select-modal/asset-filters-display.component.ts ***!
  \***********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AssetFiltersDisplayComponent: () => (/* binding */ AssetFiltersDisplayComponent)
/* harmony export */ });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ 37580);

class AssetFiltersDisplayComponent {
  static #_ = this.ɵfac = function AssetFiltersDisplayComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || AssetFiltersDisplayComponent)();
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({
    type: AssetFiltersDisplayComponent,
    selectors: [["asset-filters-display"]],
    decls: 0,
    vars: 0,
    template: function AssetFiltersDisplayComponent_Template(rf, ctx) {}
  });
}

/***/ }),

/***/ 64358:
/*!***************************************************************************!*\
  !*** ./libs/assets/src/lib/asset-select-modal/asset-filters.component.ts ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AssetFiltersComponent: () => (/* binding */ AssetFiltersComponent)
/* harmony export */ });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _asset_state_service__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../asset-state.service */ 46088);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! date-fns */ 33240);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! date-fns */ 28797);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! date-fns */ 56441);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! date-fns */ 49675);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! date-fns */ 1874);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _form_fields_src_lib_duration_field_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../form-fields/src/lib/duration-field.component */ 83476);
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @angular/forms */ 34456);
/* harmony import */ var _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../components/src/lib/icon.component */ 69434);
/* harmony import */ var _angular_material_core__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @angular/material/core */ 74646);
/* harmony import */ var _angular_material_form_field__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @angular/material/form-field */ 24950);
/* harmony import */ var _angular_material_select__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @angular/material/select */ 25175);
/* harmony import */ var _angular_material_input__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @angular/material/input */ 95541);
/* harmony import */ var _angular_material_tooltip__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @angular/material/tooltip */ 80640);
/* harmony import */ var _angular_material_checkbox__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @angular/material/checkbox */ 97024);

















function AssetFiltersComponent_h3_6_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](0, "h3", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵi18n"](1, 0);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
  }
}
function AssetFiltersComponent_div_7_ng_container_3_mat_option_5_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](0, "mat-option", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpipe"](2, "date");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const day_r4 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("value", day_r4.id);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpipeBind2"](2, 2, day_r4.value, "mediumDate"), " ");
  }
}
function AssetFiltersComponent_div_7_ng_container_3_Template(rf, ctx) {
  if (rf & 1) {
    const _r3 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](1, "label");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](2, "Deliver Date:");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](3, "mat-form-field", 15)(4, "mat-select", 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtwoWayListener"]("ngModelChange", function AssetFiltersComponent_div_7_ng_container_3_Template_mat_select_ngModelChange_4_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵrestoreView"](_r3);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"](2);
      _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtwoWayBindingSet"](ctx_r1.offset_day, $event) || (ctx_r1.offset_day = $event);
      return _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵresetView"]($event);
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵlistener"]("ngModelChange", function AssetFiltersComponent_div_7_ng_container_3_Template_mat_select_ngModelChange_4_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵrestoreView"](_r3);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"](2);
      return _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵresetView"](ctx_r1.offset_dayChange.next($event));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](5, AssetFiltersComponent_div_7_ng_container_3_mat_option_5_Template, 3, 5, "mat-option", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementContainerEnd"]();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtwoWayProperty"]("ngModel", ctx_r1.offset_day);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngForOf", ctx_r1.day_options);
  }
}
function AssetFiltersComponent_div_7_Template(rf, ctx) {
  if (rf & 1) {
    const _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](0, "div", 9)(1, "mat-checkbox", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtwoWayListener"]("ngModelChange", function AssetFiltersComponent_div_7_Template_mat_checkbox_ngModelChange_1_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵrestoreView"](_r1);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"]();
      _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtwoWayBindingSet"](ctx_r1.at_time, $event) || (ctx_r1.at_time = $event);
      return _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵresetView"]($event);
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵlistener"]("ngModelChange", function AssetFiltersComponent_div_7_Template_mat_checkbox_ngModelChange_1_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵrestoreView"](_r1);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵresetView"](ctx_r1.at_timeChange.next($event));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](2, " Exact Time ");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](3, AssetFiltersComponent_div_7_ng_container_3_Template, 6, 2, "ng-container", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](4, "label");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](5, "Deliver After:");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](6, "a-duration-field", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpipe"](7, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtwoWayListener"]("ngModelChange", function AssetFiltersComponent_div_7_Template_a_duration_field_ngModelChange_6_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵrestoreView"](_r1);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"]();
      _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtwoWayBindingSet"](ctx_r1.offset, $event) || (ctx_r1.offset = $event);
      return _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵresetView"]($event);
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵlistener"]("ngModelChange", function AssetFiltersComponent_div_7_Template_a_duration_field_ngModelChange_6_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵrestoreView"](_r1);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵresetView"](ctx_r1.offsetChange.next($event));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    let tmp_5_0;
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtwoWayProperty"]("ngModel", ctx_r1.at_time);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("matTooltip", ctx_r1.exact_tooltip);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngIf", ctx_r1.day_options.length > 1);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtwoWayProperty"]("ngModel", ctx_r1.offset);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("time", ctx_r1.offset_day > 0 ? ctx_r1.start_of_date : (tmp_5_0 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpipeBind1"](7, 9, ctx_r1.options)) == null ? null : tmp_5_0.date)("step", ctx_r1.step_interval)("min", ctx_r1.min_offset)("max", ctx_r1.max_offset - 1)("use_24hr", ctx_r1.use_24hr);
  }
}
function AssetFiltersComponent_h3_8_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](0, "h3", 19);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵi18n"](1, 1);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
  }
}
function AssetFiltersComponent_mat_checkbox_10_Template(rf, ctx) {
  if (rf & 1) {
    const _r5 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](0, "mat-checkbox", 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpipe"](1, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵlistener"]("ngModelChange", function AssetFiltersComponent_mat_checkbox_10_Template_mat_checkbox_ngModelChange_0_listener() {
      const item_r6 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵrestoreView"](_r5).$implicit;
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵresetView"](ctx_r1.toggleCategory(item_r6.id));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const item_r6 = ctx.$implicit;
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngModel", _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpipeBind1"](1, 3, ctx_r1.category) === item_r6.id);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵattribute"]("name", item_r6);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtextInterpolate1"](" ", item_r6.name, " ");
  }
}
class AssetFiltersComponent extends _placeos_common__WEBPACK_IMPORTED_MODULE_1__.AsyncHandler {
  get start_of_date() {
    return (0,date_fns__WEBPACK_IMPORTED_MODULE_5__.startOfDay)((0,date_fns__WEBPACK_IMPORTED_MODULE_6__.addDays)(this._state.getOptions().date, this.offset_day)).valueOf();
  }
  get min_offset() {
    return this.offset_day > 0 ? 0 : this._min_offset;
  }
  get step_interval() {
    return this._settings.get('app.assets.step_interval') || 5;
  }
  get max_offset() {
    const end = Math.min((0,date_fns__WEBPACK_IMPORTED_MODULE_7__.endOfDay)((0,date_fns__WEBPACK_IMPORTED_MODULE_6__.addDays)(this._state.getOptions().date, this.offset_day)).valueOf(), (0,date_fns__WEBPACK_IMPORTED_MODULE_8__.addMinutes)(this._state.getOptions().date, this._state.getOptions().duration).valueOf());
    const diff = (0,date_fns__WEBPACK_IMPORTED_MODULE_9__.differenceInMinutes)(end, this._state.getOptions().date);
    return Math.min(diff, Math.min(24 * 60 - 1, this._max_offset));
  }
  get use_24hr() {
    return this._settings.get('app.use_24_hour_time');
  }
  constructor(_state, _settings) {
    super();
    this._state = _state;
    this._settings = _settings;
    this.search = false;
    this.at_time = false;
    this.at_timeChange = new _angular_core__WEBPACK_IMPORTED_MODULE_4__.EventEmitter();
    this.offset = 0;
    this.offsetChange = new _angular_core__WEBPACK_IMPORTED_MODULE_4__.EventEmitter();
    this.offset_day = 0;
    this.offset_dayChange = new _angular_core__WEBPACK_IMPORTED_MODULE_4__.EventEmitter();
    this._min_offset = 0;
    this._max_offset = 60;
    this.search_value = this._state.search;
    this.category = this._state.category;
    this.categories = this._state.category_list;
    this.options = this._state.options;
    this.exact_tooltip = 'Deliver at exactly specified time. \nNote that changes to the booking will not be \nreflected in the order if this is set.';
    this.day_options = [];
    this.setSearch = s => this._state.setSearch(s);
    this.toggleCategory = c => this._state.toggleCategory(c);
  }
  ngOnInit() {
    this._min_offset = Math.max(this._settings.get('app.assets.min_offset'), 0);
    this.subscription('filters', this._state.options.subscribe(() => {
      this._max_offset = Math.max(15, (this._state.getOptions().duration || 60) - this._settings.get('app.assets.end_offset'));
      this._updateDayOptions();
    }));
    this._updateDayOptions();
  }
  _updateDayOptions() {
    const {
      date,
      duration
    } = this._state.getOptions();
    if (duration <= 24 * 60) return this.day_options = [];
    let day = (0,date_fns__WEBPACK_IMPORTED_MODULE_5__.startOfDay)(date);
    let count = 0;
    const end = (0,date_fns__WEBPACK_IMPORTED_MODULE_7__.endOfDay)((0,date_fns__WEBPACK_IMPORTED_MODULE_8__.addMinutes)(date, duration)).valueOf();
    const options = [];
    while (day.valueOf() <= end) {
      options.push({
        id: count,
        value: day.valueOf()
      });
      day = (0,date_fns__WEBPACK_IMPORTED_MODULE_6__.addDays)(day, 1);
      count++;
    }
    this.day_options = options;
  }
  static #_ = this.ɵfac = function AssetFiltersComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || AssetFiltersComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵdirectiveInject"](_asset_state_service__WEBPACK_IMPORTED_MODULE_0__.AssetStateService), _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵdirectiveInject"](_placeos_common__WEBPACK_IMPORTED_MODULE_1__.SettingsService));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵdefineComponent"]({
    type: AssetFiltersComponent,
    selectors: [["asset-filters"]],
    inputs: {
      search: "search",
      at_time: "at_time",
      offset: "offset",
      offset_day: "offset_day"
    },
    outputs: {
      at_timeChange: "at_timeChange",
      offsetChange: "offsetChange",
      offset_dayChange: "offset_dayChange"
    },
    features: [_angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵInheritDefinitionFeature"]],
    decls: 12,
    vars: 15,
    consts: () => {
      let i18n_0;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_637156553417356107$$LIBS_ASSETS_SRC_LIB_ASSET_SELECT_MODAL_ASSET_FILTERS_COMPONENT_TS_0 = goog.getMsg(" Options ");
        i18n_0 = MSG_EXTERNAL_637156553417356107$$LIBS_ASSETS_SRC_LIB_ASSET_SELECT_MODAL_ASSET_FILTERS_COMPONENT_TS_0;
      } else {
        i18n_0 = $localize`:␟07b96192315617e1c3c3f020fed4749eafda31eb␟637156553417356107: Options `;
      }
      let i18n_1;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_3888583854485349732$$LIBS_ASSETS_SRC_LIB_ASSET_SELECT_MODAL_ASSET_FILTERS_COMPONENT_TS_1 = goog.getMsg(" Catergories ");
        i18n_1 = MSG_EXTERNAL_3888583854485349732$$LIBS_ASSETS_SRC_LIB_ASSET_SELECT_MODAL_ASSET_FILTERS_COMPONENT_TS_1;
      } else {
        i18n_1 = $localize`:␟24300e769843b029b0346b3ea18e51e4e97a3502␟3888583854485349732: Catergories `;
      }
      return [i18n_0, i18n_1, [1, "px-4", "mt-3", "mb-2"], ["appearance", "outline", 1, "w-full", "h-14"], ["matPrefix", "", 1, "text-xl"], ["matInput", "", "placeholder", "Search menu...", 3, "ngModelChange", "ngModel"], ["class", "hidden sm:block font-medium px-2 py-2", 4, "ngIf"], ["class", "flex flex-col px-2", 4, "ngIf"], ["class", "hidden sm:block font-medium px-2 py-4", 4, "ngIf"], [1, "flex", "flex-col", "px-2"], [3, "ngModel", "ngModelChange", 4, "ngFor", "ngForOf"], [1, "hidden", "sm:block", "font-medium", "px-2", "py-2"], [3, "ngModelChange", "ngModel", "matTooltip"], [4, "ngIf"], [3, "ngModelChange", "ngModel", "time", "step", "min", "max", "use_24hr"], ["appearance", "outline", 1, "w-full", "no-subscript", "mb-4"], [3, "ngModelChange", "ngModel"], [3, "value", 4, "ngFor", "ngForOf"], [3, "value"], [1, "hidden", "sm:block", "font-medium", "px-2", "py-4"]];
    },
    template: function AssetFiltersComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](0, "div", 2)(1, "mat-form-field", 3)(2, "app-icon", 4);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](3, "search");
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](4, "input", 5);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpipe"](5, "async");
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵlistener"]("ngModelChange", function AssetFiltersComponent_Template_input_ngModelChange_4_listener($event) {
          return ctx.setSearch($event);
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]()()();
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](6, AssetFiltersComponent_h3_6_Template, 2, 0, "h3", 6)(7, AssetFiltersComponent_div_7_Template, 8, 11, "div", 7)(8, AssetFiltersComponent_h3_8_Template, 2, 0, "h3", 8);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](9, "div", 9);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](10, AssetFiltersComponent_mat_checkbox_10_Template, 3, 5, "mat-checkbox", 10);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpipe"](11, "async");
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
      }
      if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵclassProp"]("sm:hidden", !ctx.search);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](4);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngModel", _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpipeBind1"](5, 11, ctx.search_value));
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngIf", !ctx.search);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngIf", !ctx.search);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngIf", !ctx.search);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵclassProp"]("sm:hidden", ctx.search)("sm:pt-1", !ctx.search);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngForOf", _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpipeBind1"](11, 13, ctx.categories));
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_10__.NgForOf, _angular_common__WEBPACK_IMPORTED_MODULE_10__.NgIf, _form_fields_src_lib_duration_field_component__WEBPACK_IMPORTED_MODULE_2__.DurationFieldComponent, _angular_forms__WEBPACK_IMPORTED_MODULE_11__.DefaultValueAccessor, _angular_forms__WEBPACK_IMPORTED_MODULE_11__.NgControlStatus, _angular_forms__WEBPACK_IMPORTED_MODULE_11__.NgModel, _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_3__.IconComponent, _angular_material_core__WEBPACK_IMPORTED_MODULE_12__.MatOption, _angular_material_form_field__WEBPACK_IMPORTED_MODULE_13__.MatFormField, _angular_material_form_field__WEBPACK_IMPORTED_MODULE_13__.MatPrefix, _angular_material_select__WEBPACK_IMPORTED_MODULE_14__.MatSelect, _angular_material_input__WEBPACK_IMPORTED_MODULE_15__.MatInput, _angular_material_tooltip__WEBPACK_IMPORTED_MODULE_16__.MatTooltip, _angular_material_checkbox__WEBPACK_IMPORTED_MODULE_17__.MatCheckbox, _angular_common__WEBPACK_IMPORTED_MODULE_10__.AsyncPipe, _angular_common__WEBPACK_IMPORTED_MODULE_10__.DatePipe],
    styles: ["[_nghost-%COMP%] {\n                display: flex;\n                flex-direction: column;\n                min-width: 16rem;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0LWZpbHRlcnMuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxhQUFhO2dCQUNiLHNCQUFzQjtnQkFDdEIsZ0JBQWdCO1lBQ3BCIiwiZmlsZSI6ImFzc2V0LWZpbHRlcnMuY29tcG9uZW50LnRzIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICA6aG9zdCB7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgICAgICAgIG1pbi13aWR0aDogMTZyZW07XG4gICAgICAgICAgICB9XG4gICAgICAgICJdfQ== */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvYXNzZXRzL3NyYy9saWIvYXNzZXQtc2VsZWN0LW1vZGFsL2Fzc2V0LWZpbHRlcnMuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxhQUFhO2dCQUNiLHNCQUFzQjtnQkFDdEIsZ0JBQWdCO1lBQ3BCOztBQUVaLDRmQUE0ZiIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgOmhvc3Qge1xuICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgICAgICAgICBtaW4td2lkdGg6IDE2cmVtO1xuICAgICAgICAgICAgfVxuICAgICAgICAiXSwic291cmNlUm9vdCI6IiJ9 */"]
  });
}

/***/ }),

/***/ 67807:
/*!************************************************************************!*\
  !*** ./libs/assets/src/lib/asset-select-modal/asset-list.component.ts ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AssetListComponent: () => (/* binding */ AssetListComponent)
/* harmony export */ });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _asset_state_service__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../asset-state.service */ 46088);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! rxjs */ 90521);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! rxjs */ 68824);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! rxjs/operators */ 35443);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../components/src/lib/icon.component */ 69434);
/* harmony import */ var _components_src_lib_authenticated_image_directive__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../components/src/lib/authenticated-image.directive */ 93208);
/* harmony import */ var _angular_material_core__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @angular/material/core */ 74646);
/* harmony import */ var _angular_material_progress_spinner__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @angular/material/progress-spinner */ 41134);











function AssetListComponent_ng_container_6_ul_1_li_1_div_3_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "div", 20)(1, "span", 21);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const asset_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]().$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtextInterpolate1"](" ", asset_r2.quantity || 1, " ");
  }
}
function AssetListComponent_ng_container_6_ul_1_li_1_img_4_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelement"](0, "img", 22);
  }
  if (rf & 2) {
    const asset_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]().$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("source", asset_r2.images[0]);
  }
}
function AssetListComponent_ng_container_6_ul_1_li_1_ng_template_5_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelement"](0, "img", 23);
  }
}
function AssetListComponent_ng_container_6_ul_1_li_1_Template(rf, ctx) {
  if (rf & 1) {
    const _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "li", 10)(1, "button", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵlistener"]("click", function AssetListComponent_ng_container_6_ul_1_li_1_Template_button_click_1_listener() {
      const asset_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵrestoreView"](_r1).$implicit;
      const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"](3);
      return _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵresetView"](ctx_r2.selectAsset(asset_r2));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](2, "div", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](3, AssetListComponent_ng_container_6_ul_1_li_1_div_3_Template, 3, 1, "div", 13)(4, AssetListComponent_ng_container_6_ul_1_li_1_img_4_Template, 1, 1, "img", 14)(5, AssetListComponent_ng_container_6_ul_1_li_1_ng_template_5_Template, 1, 0, "ng-template", null, 2, _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplateRefExtractor"]);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](7, "div", 15)(8, "div", 16)(9, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](10);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](11, "div", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](12);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](13, "div", 18)(14, "p");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](15);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()()()();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](16, "button", 19);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵlistener"]("click", function AssetListComponent_ng_container_6_ul_1_li_1_Template_button_click_16_listener() {
      const asset_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵrestoreView"](_r1).$implicit;
      const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"](3);
      return _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵresetView"](ctx_r2.toggleFav.emit(asset_r2));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](17, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](18);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()()();
  }
  if (rf & 2) {
    const asset_r2 = ctx.$implicit;
    const placeholder_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵreference"](6);
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", ctx_r2.selected.includes(asset_r2.id));
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", asset_r2.images == null ? null : asset_r2.images.length)("ngIfElse", placeholder_r4);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](6);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtextInterpolate"](asset_r2.name || "Asset");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtextInterpolate1"](" ", asset_r2.category, " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtextInterpolate1"](" ", asset_r2.available || (asset_r2.assets == null ? null : asset_r2.assets.length) || "0", " Available ");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵclassProp"]("text-info", ctx_r2.isFavourite(asset_r2.id));
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtextInterpolate"](ctx_r2.isFavourite(asset_r2.id) ? "favorite" : "favorite_border");
  }
}
function AssetListComponent_ng_container_6_ul_1_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "ul", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](1, AssetListComponent_ng_container_6_ul_1_li_1_Template, 19, 9, "li", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipe"](2, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngForOf", _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipeBind1"](2, 1, ctx_r2.assets));
  }
}
function AssetListComponent_ng_container_6_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](1, AssetListComponent_ng_container_6_ul_1_Template, 3, 3, "ul", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipe"](2, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementContainerEnd"]();
  }
  if (rf & 2) {
    let tmp_3_0;
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
    const empty_state_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵreference"](9);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", (tmp_3_0 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipeBind1"](2, 2, ctx_r2.assets)) == null ? null : tmp_3_0.length)("ngIfElse", empty_state_r5);
  }
}
function AssetListComponent_ng_template_8_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "div", 24)(1, "p", 25);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](2, " No available assets for selected time and/or filters ");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()();
  }
}
function AssetListComponent_ng_template_10_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "div", 26);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelement"](1, "mat-spinner", 27);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](2, "p", 28);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](3, "Finding available assets...");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("diameter", 32);
  }
}
class AssetListComponent {
  constructor(_asset_state) {
    this._asset_state = _asset_state;
    this.selected = '';
    this.favorites = [];
    this.selected_items = [];
    this.requested = {};
    this.toggleFav = new _angular_core__WEBPACK_IMPORTED_MODULE_3__.EventEmitter();
    this.onSelect = new _angular_core__WEBPACK_IMPORTED_MODULE_3__.EventEmitter();
    this._requested_items = new rxjs__WEBPACK_IMPORTED_MODULE_4__.BehaviorSubject({});
    this.counts = new rxjs__WEBPACK_IMPORTED_MODULE_4__.BehaviorSubject({});
    this.loading = this._asset_state.loading;
    this.assets = (0,rxjs__WEBPACK_IMPORTED_MODULE_5__.combineLatest)([this.counts, this._asset_state.filtered_assets, this._requested_items]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.map)(([counts, assets, requested]) => {
      for (const item of assets) {
        item.quantity = counts[item.id] || 0;
        const selected = this.selected_items.find(i => i.id === item.id);
        if (selected) selected.assets = item.assets;
        if (requested[item.id] !== undefined) {
          item.available = Math.max((item.assets?.length || 0) - requested[item.id], 0);
        }
      }
      return assets.filter(_ => _.available != null && _.available > 0 || _.available == null && _.assets?.length > 0);
    }));
  }
  ngOnChanges(changes) {
    if (changes.selected_items && this.selected_items?.length) {
      const counts = {};
      for (const item of this.selected_items) {
        counts[item.id] = item.quantity;
      }
      this.counts.next(counts);
    }
    if (changes.requested) {
      this._requested_items.next(this.requested);
    }
  }
  isFavourite(asset_id) {
    return this.favorites.includes(asset_id);
  }
  selectAsset(asset) {
    this.onSelect.emit(asset);
  }
  static #_ = this.ɵfac = function AssetListComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || AssetListComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵdirectiveInject"](_asset_state_service__WEBPACK_IMPORTED_MODULE_0__.AssetStateService));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵdefineComponent"]({
    type: AssetListComponent,
    selectors: [["asset-list"]],
    inputs: {
      selected: "selected",
      favorites: "favorites",
      selected_items: "selected_items",
      requested: "requested"
    },
    outputs: {
      toggleFav: "toggleFav",
      onSelect: "onSelect"
    },
    features: [_angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵNgOnChangesFeature"]],
    decls: 12,
    vars: 7,
    consts: [["empty_state", ""], ["load_state", ""], ["placeholder", ""], [1, "w-full", "h-full", "overflow-auto", "py-2", "bg-base-200"], [1, "font-bold", "px-2"], ["count", "", 1, "text-sm", "opacity-60", "mb-4", "px-2"], [4, "ngIf", "ngIfElse"], ["class", "list-style-none space-y-2 p-2", 4, "ngIf", "ngIfElse"], [1, "list-style-none", "space-y-2", "p-2"], ["asset", "", "matRipple", "", "class", "relative p-2 rounded-lg w-full shadow border bg-base-100 border-base-200", 4, "ngFor", "ngForOf"], ["asset", "", "matRipple", "", 1, "relative", "p-2", "rounded-lg", "w-full", "shadow", "border", "bg-base-100", "border-base-200"], ["select", "", 1, "w-full", "h-full", "flex", "items-center", "pr-10", 3, "click"], [1, "relative", "w-16", "h-16", "rounded-xl", "bg-base-200", "mr-4", "flex", "items-center", "justify-center", "overflow-hidden", "border", "border-base-200"], ["class", "absolute top-1 left-1 border border-base-300 bg-base-200 rounded-full h-6 w-6 flex items-center justify-center", 4, "ngIf"], ["auth", "", "class", "object-cover h-full", 3, "source", 4, "ngIf", "ngIfElse"], [1, "space-y-2", "text-left", "flex-1"], [1, "font-medium", "flex", "items-center", "justify-between"], [1, "opacity-60", "text-xs"], [1, "flex", "items-center", "text-sm", "space-x-2"], ["icon", "", "matRipple", "", "fav", "", 1, "absolute", "top-1", "right-1", 3, "click"], [1, "absolute", "top-1", "left-1", "border", "border-base-300", "bg-base-200", "rounded-full", "h-6", "w-6", "flex", "items-center", "justify-center"], [1, "text-xs"], ["auth", "", 1, "object-cover", "h-full", 3, "source"], ["src", "assets/icons/asset-placeholder.svg", 1, "m-auto"], ["empty", "", 1, "p-16", "flex", "flex-col", "items-center", "justify-center", "space-y-2"], [1, "opacity-30", "text-center"], ["loading", "", 1, "p-16", "flex", "flex-col", "items-center", "justify-center", "space-y-2"], [3, "diameter"], [1, "opacity-30"]],
    template: function AssetListComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "div", 3)(1, "h3", 4);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](2, "Results");
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](3, "p", 5);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](4);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipe"](5, "async");
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](6, AssetListComponent_ng_container_6_Template, 3, 4, "ng-container", 6);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipe"](7, "async");
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](8, AssetListComponent_ng_template_8_Template, 3, 0, "ng-template", null, 0, _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplateRefExtractor"])(10, AssetListComponent_ng_template_10_Template, 4, 1, "ng-template", null, 1, _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplateRefExtractor"]);
      }
      if (rf & 2) {
        let tmp_2_0;
        const load_state_r6 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵreference"](11);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](4);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtextInterpolate1"](" ", ((tmp_2_0 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipeBind1"](5, 3, ctx.assets)) == null ? null : tmp_2_0.length) || 0, " result(s) found ");
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", !_angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipeBind1"](7, 5, ctx.loading))("ngIfElse", load_state_r6);
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_7__.NgForOf, _angular_common__WEBPACK_IMPORTED_MODULE_7__.NgIf, _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_1__.IconComponent, _components_src_lib_authenticated_image_directive__WEBPACK_IMPORTED_MODULE_2__.AuthenticatedImageDirective, _angular_material_core__WEBPACK_IMPORTED_MODULE_8__.MatRipple, _angular_material_progress_spinner__WEBPACK_IMPORTED_MODULE_9__.MatProgressSpinner, _angular_common__WEBPACK_IMPORTED_MODULE_7__.AsyncPipe],
    styles: ["[_nghost-%COMP%] {\n                width: 100%;\n                height: 100%;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0LWxpc3QuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxXQUFXO2dCQUNYLFlBQVk7WUFDaEIiLCJmaWxlIjoiYXNzZXQtbGlzdC5jb21wb25lbnQudHMiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIDpob3N0IHtcbiAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgICAgICB9XG4gICAgICAgICJdfQ== */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvYXNzZXRzL3NyYy9saWIvYXNzZXQtc2VsZWN0LW1vZGFsL2Fzc2V0LWxpc3QuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxXQUFXO2dCQUNYLFlBQVk7WUFDaEI7O0FBRVosZ2FBQWdhIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICA6aG9zdCB7XG4gICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgICAgICAgfVxuICAgICAgICAiXSwic291cmNlUm9vdCI6IiJ9 */"]
  });
}

/***/ }),

/***/ 47471:
/*!********************************************************************************!*\
  !*** ./libs/assets/src/lib/asset-select-modal/asset-select-modal.component.ts ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AssetSelectModalComponent: () => (/* binding */ AssetSelectModalComponent)
/* harmony export */ });
/* harmony import */ var _angular_material_dialog__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @angular/material/dialog */ 12587);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var _asset_state_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../asset-state.service */ 46088);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../components/src/lib/icon.component */ 69434);
/* harmony import */ var _angular_material_core__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @angular/material/core */ 74646);
/* harmony import */ var _asset_details_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./asset-details.component */ 48751);
/* harmony import */ var _asset_filters_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./asset-filters.component */ 64358);
/* harmony import */ var _asset_filters_display_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./asset-filters-display.component */ 76041);
/* harmony import */ var _asset_list_component__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./asset-list.component */ 67807);














function AssetSelectModalComponent_button_15_Template(rf, ctx) {
  if (rf & 1) {
    const _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](0, "button", 21);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵlistener"]("click", function AssetSelectModalComponent_button_15_Template_button_click_0_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵrestoreView"](_r1);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵresetView"](ctx_r1.displayed = null);
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtext"](1, " Back ");
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]();
  }
}
const EMPTY_FAVS = [];
class AssetSelectModalComponent {
  get favorites() {
    return this._settings.get('favourite_assets') || EMPTY_FAVS;
  }
  get selected_ids() {
    return this.selected.map(_ => _.id).join(',');
  }
  get count() {
    return this.selected.reduce((t, i) => t + i.quantity, 0);
  }
  isSelected(id) {
    return id && this.selected_ids.includes(id);
  }
  constructor(_settings, _state, _data) {
    this._settings = _settings;
    this._state = _state;
    this._data = _data;
    this.displayed = null;
    this.selected = [...(this._data.items || [])];
    this.exact_time = this._data.exact_time ?? false;
    this.requested = this._data.requested;
    const {
      duration
    } = this._data.details;
    this._state.setOptions(this._data.details);
    this.offset = Math.min(Math.max(this._settings.get('app.assets.min_offset'), this._data.offset || 0), (duration || 60) - this._settings.get('app.assets.end_offset'));
    this.offset_day = this._data.offset_day || 0;
  }
  setSelected(group, state) {
    const list = this.selected.filter(_ => _.id !== group.id);
    if (state) list.push(group);
    this.selected = [...list];
  }
  updateSelectedCount(count) {
    if (!this.displayed) return;
    const item = this.selected.find(_ => _.id === this.displayed.id);
    if (item) {
      item.quantity = count;
      item.assets = this.displayed.assets;
    }
  }
  toggleFavourite(asset) {
    const fav_list = this.favorites;
    const new_state = !fav_list.includes(asset.id);
    if (new_state) {
      this._settings.saveUserSetting('favourite_assets', [...fav_list, asset.id]);
    } else {
      this._settings.saveUserSetting('favourite_assets', fav_list.filter(_ => _ !== asset.id));
    }
  }
  static #_ = this.ɵfac = function AssetSelectModalComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || AssetSelectModalComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵdirectiveInject"](_placeos_common__WEBPACK_IMPORTED_MODULE_0__.SettingsService), _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵdirectiveInject"](_asset_state_service__WEBPACK_IMPORTED_MODULE_1__.AssetStateService), _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵdirectiveInject"](_angular_material_dialog__WEBPACK_IMPORTED_MODULE_8__.MAT_DIALOG_DATA));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵdefineComponent"]({
    type: AssetSelectModalComponent,
    selectors: [["asset-select-modal"]],
    decls: 33,
    vars: 25,
    consts: [[1, "w-[100vw]", "h-[100vh]", "sm:relative", "sm:w-auto", "sm:h-auto", "flex", "flex-col", "bg-base-100"], [1, "flex", "items-center", "space-x-4", "w-full"], ["icon", "", "mat-dialog-close", "", 1, "bg-base-200"], [1, "flex-1", "flex", "items-center", "divide-x", "divide-base-200", "min-h-[65vh]", "h-[65vh]", "sm:max-h-[65vh]", "sm:max-w-[95vw]", "w-full", "overflow-hidden"], [1, "flex", "flex-col", "items-center", "flex-1", "w-1/2", "h-full", "sm:h-[65vh]"], [1, "h-full", "hidden", "sm:block", 3, "at_timeChange", "offsetChange", "offset_dayChange", "at_time", "offset", "offset_day"], [1, "flex", "flex-col", "items-center", "flex-1", "w-1/2", "h-full", "sm:min-w-[20rem]", "sm:h-[65vh]"], [1, "w-full", "border-b", "border-base-200"], [1, "flex-1", "h-1/2", "w-full", "overflow-hidden", 3, "toggleFav", "onSelect", "selected", "favorites", "selected_items", "requested"], [1, "h-full", "w-full", "sm:h-[65vh]", "absolute", "sm:relative", "sm:flex", "sm:max-w-[20rem]", "bg-base-100", "z-20", 3, "activeChange", "countChange", "toggleFav", "close", "item", "active", "fav"], [1, "flex", "sm:hidden", "flex-col-reverse", "items-center", "justify-end", "p-2", "border-t", "border-base-200"], ["btn", "", "matRipple", "", "back-btn", "", "class", "inverse sm:hidden w-full sm:w-auto", 3, "click", 4, "ngIf"], ["btn", "", "matRipple", "", "save", "", 1, "w-full", "sm:w-auto", "sm:mb-0", 3, "mat-dialog-close"], [1, "hidden", "sm:flex", "items-center", "justify-between", "p-2", "border-t", "border-base-200", "w-full"], ["btn", "", "matRipple", "", 1, "clear", "text-secondary", 3, "mat-dialog-close"], [1, "flex", "items-center"], [1, "text-xl"], [1, "mr-1", "underline"], [1, "opacity-60", "text-sm"], ["btn", "", "matRipple", "", 3, "click", "disabled"], [1, "mr-1"], ["btn", "", "matRipple", "", "back-btn", "", 1, "inverse", "sm:hidden", "w-full", "sm:w-auto", 3, "click"]],
    template: function AssetSelectModalComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](0, "div", 0)(1, "header", 1)(2, "button", 2)(3, "app-icon");
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtext"](4, "close");
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](5, "h3");
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtext"](6, "Add Assets");
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](7, "main", 3)(8, "div", 4)(9, "asset-filters", 5);
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtwoWayListener"]("at_timeChange", function AssetSelectModalComponent_Template_asset_filters_at_timeChange_9_listener($event) {
          _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtwoWayBindingSet"](ctx.exact_time, $event) || (ctx.exact_time = $event);
          return $event;
        })("offsetChange", function AssetSelectModalComponent_Template_asset_filters_offsetChange_9_listener($event) {
          _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtwoWayBindingSet"](ctx.offset, $event) || (ctx.offset = $event);
          return $event;
        })("offset_dayChange", function AssetSelectModalComponent_Template_asset_filters_offset_dayChange_9_listener($event) {
          _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtwoWayBindingSet"](ctx.offset_day, $event) || (ctx.offset_day = $event);
          return $event;
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](10, "div", 6);
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelement"](11, "asset-filters-display", 7);
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](12, "asset-list", 8);
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵlistener"]("toggleFav", function AssetSelectModalComponent_Template_asset_list_toggleFav_12_listener($event) {
          return ctx.toggleFavourite($event);
        })("onSelect", function AssetSelectModalComponent_Template_asset_list_onSelect_12_listener($event) {
          return ctx.displayed = $event;
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](13, "asset-details", 9);
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵlistener"]("activeChange", function AssetSelectModalComponent_Template_asset_details_activeChange_13_listener($event) {
          return ctx.setSelected(ctx.displayed, $event);
        })("countChange", function AssetSelectModalComponent_Template_asset_details_countChange_13_listener($event) {
          return ctx.updateSelectedCount($event);
        })("toggleFav", function AssetSelectModalComponent_Template_asset_details_toggleFav_13_listener() {
          return ctx.toggleFavourite(ctx.displayed);
        })("close", function AssetSelectModalComponent_Template_asset_details_close_13_listener() {
          return ctx.displayed = null;
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](14, "footer", 10);
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtemplate"](15, AssetSelectModalComponent_button_15_Template, 2, 0, "button", 11);
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](16, "button", 12);
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtext"](17, " View List ");
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](18, "footer", 13)(19, "button", 14)(20, "div", 15)(21, "app-icon", 16);
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtext"](22, "arrow_back");
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](23, "div", 17);
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtext"](24, "Back to form");
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]()()();
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](25, "p", 18);
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtext"](26);
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](27, "button", 19);
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵlistener"]("click", function AssetSelectModalComponent_Template_button_click_27_listener() {
          return ctx.setSelected(ctx.displayed, !ctx.isSelected(ctx.displayed == null ? null : ctx.displayed.id));
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](28, "div", 15)(29, "app-icon", 16);
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtext"](30);
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](31, "div", 20);
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtext"](32);
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]()()()()();
      }
      if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"](9);
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtwoWayProperty"]("at_time", ctx.exact_time)("offset", ctx.offset)("offset_day", ctx.offset_day);
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵproperty"]("selected", ctx.selected_ids)("favorites", ctx.favorites)("selected_items", ctx.selected)("requested", ctx.requested);
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵclassProp"]("hidden", !ctx.displayed)("inset-0", ctx.displayed);
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵproperty"]("item", ctx.displayed)("active", ctx.selected_ids.includes((ctx.displayed == null ? null : ctx.displayed.id) || ""))("fav", !!ctx.displayed && ctx.favorites.includes((ctx.displayed == null ? null : ctx.displayed.id) || ""));
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵproperty"]("ngIf", ctx.displayed);
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵclassProp"]("mb-2", ctx.displayed);
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵproperty"]("mat-dialog-close", ctx.selected);
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵproperty"]("mat-dialog-close", ctx.selected);
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"](7);
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtextInterpolate1"]("", ctx.count, " asset(s) added");
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵclassProp"]("inverse", ctx.isSelected(ctx.displayed == null ? null : ctx.displayed.id));
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵproperty"]("disabled", !ctx.displayed);
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtextInterpolate1"](" ", ctx.isSelected(ctx.displayed == null ? null : ctx.displayed.id) ? "remove" : "add", " ");
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtextInterpolate1"](" ", ctx.isSelected(ctx.displayed == null ? null : ctx.displayed.id) ? "Remove from Booking" : "Add to booking", " ");
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_9__.NgIf, _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_2__.IconComponent, _angular_material_core__WEBPACK_IMPORTED_MODULE_10__.MatRipple, _angular_material_dialog__WEBPACK_IMPORTED_MODULE_8__.MatDialogClose, _asset_details_component__WEBPACK_IMPORTED_MODULE_3__.AssetDetailsComponent, _asset_filters_component__WEBPACK_IMPORTED_MODULE_4__.AssetFiltersComponent, _asset_filters_display_component__WEBPACK_IMPORTED_MODULE_5__.AssetFiltersDisplayComponent, _asset_list_component__WEBPACK_IMPORTED_MODULE_6__.AssetListComponent]
  });
}

/***/ }),

/***/ 46088:
/*!****************************************************!*\
  !*** ./libs/assets/src/lib/asset-state.service.ts ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AssetStateService: () => (/* binding */ AssetStateService)
/* harmony export */ });
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! rxjs */ 90521);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! rxjs */ 68824);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! rxjs */ 71536);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! rxjs/operators */ 8627);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! rxjs/operators */ 19803);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! rxjs/operators */ 71963);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! rxjs/operators */ 66000);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! rxjs/operators */ 7841);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! rxjs/operators */ 29314);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! rxjs/operators */ 35443);
/* harmony import */ var _assets_fn__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./assets.fn */ 75204);
/* harmony import */ var libs_bookings_src_lib_bookings_fn__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! libs/bookings/src/lib/bookings.fn */ 18026);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! date-fns */ 99908);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! date-fns */ 33240);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! date-fns */ 56441);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! date-fns */ 23206);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! date-fns */ 5469);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! date-fns */ 49675);
/* harmony import */ var _asset_group_pipe__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./asset-group.pipe */ 68965);
/* harmony import */ var _placeos_organisation__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @placeos/organisation */ 2510);
/* harmony import */ var _asset_utilities__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./asset.utilities */ 82615);
/* harmony import */ var _placeos_ts_client__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @placeos/ts-client */ 35713);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! @angular/core */ 37580);











class AssetStateService {
  constructor(_org) {
    this._org = _org;
    this._options = new rxjs__WEBPACK_IMPORTED_MODULE_6__.BehaviorSubject({
      date: Date.now()
    });
    this._search = new rxjs__WEBPACK_IMPORTED_MODULE_6__.BehaviorSubject('');
    this._category = new rxjs__WEBPACK_IMPORTED_MODULE_6__.BehaviorSubject([]);
    this._loading = new rxjs__WEBPACK_IMPORTED_MODULE_6__.BehaviorSubject('');
    this.search = this._search.asObservable();
    this.category = this._category.asObservable();
    this.options = this._options.asObservable();
    this.loading = this._loading.asObservable();
    this.rules = (0,rxjs__WEBPACK_IMPORTED_MODULE_7__.combineLatest)([this._options, this._org.active_building]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.filter)(([_, bld]) => !!bld), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.debounceTime)(300), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.switchMap)(([options, bld]) => {
      this._loading.next(this._loading.getValue() + '[Rules]');
      return (0,_asset_utilities__WEBPACK_IMPORTED_MODULE_4__.getAssetRulesForZone)(bld.id || options.zone || '');
    }), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_11__.tap)(_ => this._loading.next(this._loading.getValue().replace(/\[Rules\]/g, ''))), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.shareReplay)(1));
    this.asset_list = (0,rxjs__WEBPACK_IMPORTED_MODULE_13__.of)(0).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.switchMap)(() => {
      this._loading.next(this._loading.getValue() + '[Assets]');
      return (0,_assets_fn__WEBPACK_IMPORTED_MODULE_0__.queryAssets)();
    }), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_11__.tap)(_ => this._loading.next(this._loading.getValue().replace(/\[Assets\]/g, ''))), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.shareReplay)(1));
    this.asset_bookings = this._options.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.debounceTime)(300), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.switchMap)(({
      zone,
      date
    }) => {
      this._loading.next(this._loading.getValue() + '[Bookings]');
      return (0,libs_bookings_src_lib_bookings_fn__WEBPACK_IMPORTED_MODULE_1__.queryBookings)({
        zones: zone || '',
        period_start: (0,date_fns__WEBPACK_IMPORTED_MODULE_14__.getUnixTime)((0,date_fns__WEBPACK_IMPORTED_MODULE_15__.startOfDay)(date)),
        period_end: (0,date_fns__WEBPACK_IMPORTED_MODULE_14__.getUnixTime)((0,date_fns__WEBPACK_IMPORTED_MODULE_16__.endOfDay)(date)),
        type: 'asset-request'
      });
    }), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_11__.tap)(_ => this._loading.next(this._loading.getValue().replace(/\[Bookings\]/g, ''))), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.shareReplay)(1));
    this.available_groups = (0,rxjs__WEBPACK_IMPORTED_MODULE_7__.combineLatest)([this._options, this._org.active_building]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.debounceTime)(300), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.switchMap)(([{
      zone,
      date,
      duration,
      ignore
    }, bld]) => {
      return (0,_assets_fn__WEBPACK_IMPORTED_MODULE_0__.queryGroupAvailability)({
        zones: bld.id || zone || '',
        period_start: (0,date_fns__WEBPACK_IMPORTED_MODULE_14__.getUnixTime)((0,date_fns__WEBPACK_IMPORTED_MODULE_17__.startOfMinute)(date)),
        period_end: (0,date_fns__WEBPACK_IMPORTED_MODULE_14__.getUnixTime)((0,date_fns__WEBPACK_IMPORTED_MODULE_18__.endOfMinute)((0,date_fns__WEBPACK_IMPORTED_MODULE_19__.addMinutes)(date, duration || 30))),
        type: 'asset-request',
        rejected: false
      }, ignore).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_20__.catchError)(() => (0,rxjs__WEBPACK_IMPORTED_MODULE_13__.of)([])));
    }), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_21__.map)(list => list.sort((a, b) => a.name.localeCompare(b.name))), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_11__.tap)(_ => (0,_asset_group_pipe__WEBPACK_IMPORTED_MODULE_2__.updateAssetGroupList)(_)), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.shareReplay)(1));
    this.category_list = this._org.active_building.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.switchMap)(bld => (0,_assets_fn__WEBPACK_IMPORTED_MODULE_0__.queryAssetCategories)({
      zone_id: bld.id
    })), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_21__.map)(_ => _.sort((a, b) => a.name.localeCompare(b.name))), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.shareReplay)(1));
    this.filtered_assets = (0,rxjs__WEBPACK_IMPORTED_MODULE_7__.combineLatest)([this._search, this._category, this.available_groups, this.rules]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_21__.map)(([search, category, assets, rules]) => {
      const s = search.toLowerCase();
      let list = assets.filter(_ => _.assets?.length && (!category.length || category.includes(_.category_id)) && (_.name.toLowerCase().includes(s) || _.description.toLowerCase().includes(s)) && (0,_asset_utilities__WEBPACK_IMPORTED_MODULE_4__.assetAvailable)(_, rules, this._options.getValue()));
      return list;
    }), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.shareReplay)(1));
    this.settings = (0,rxjs__WEBPACK_IMPORTED_MODULE_7__.combineLatest)([this._org.active_building]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.filter)(([_]) => !!_), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.switchMap)(([_]) => (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_5__.showMetadata)(_.id, 'assets-settings').pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_20__.catchError)(_ => (0,rxjs__WEBPACK_IMPORTED_MODULE_13__.of)({})))), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_21__.map)(_ => _.details || {}), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.shareReplay)(1));
    this.disabled_rooms = this.settings.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_21__.map)(_ => _.disabled_rooms || []));
  }
  setSearch(value) {
    this._search.next(`${value}`);
  }
  toggleCategory(value) {
    const categories = this._category.getValue();
    if (categories.includes(value)) {
      this._category.next(categories.filter(_ => _ !== value));
    } else {
      this._category.next([...categories, value]);
    }
  }
  getOptions() {
    return this._options.getValue();
  }
  setOptions(options) {
    this._options.next({
      ...this._options.value,
      ...options
    });
  }
  static #_ = this.ɵfac = function AssetStateService_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || AssetStateService)(_angular_core__WEBPACK_IMPORTED_MODULE_22__["ɵɵinject"](_placeos_organisation__WEBPACK_IMPORTED_MODULE_3__.OrganisationService));
  };
  static #_2 = this.ɵprov = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_22__["ɵɵdefineInjectable"]({
    token: AssetStateService,
    factory: AssetStateService.ɵfac,
    providedIn: 'root'
  });
}

/***/ }),

/***/ 84011:
/*!********************************************!*\
  !*** ./libs/assets/src/lib/asset.class.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Asset: () => (/* binding */ Asset),
/* harmony export */   AssetCategory: () => (/* binding */ AssetCategory),
/* harmony export */   AssetGroup: () => (/* binding */ AssetGroup),
/* harmony export */   AssetPurchaseOrder: () => (/* binding */ AssetPurchaseOrder)
/* harmony export */ });
class AssetCategory {
  constructor(data) {
    this.id = '';
    this.name = '';
    this.description = '';
    this.parent_category_id = '';
    this.created_at = Date.now();
    this.updated_at = Date.now();
    Object.assign(this, data);
  }
}
class AssetPurchaseOrder {
  constructor(data) {
    Object.assign(this, data);
  }
}
class AssetGroup {
  constructor(data) {
    this.images = [];
    Object.assign(this, data);
  }
}
class Asset {
  constructor(data) {
    this.id = '';
    this.type_id = '';
    this.description = '';
    this.serial_number = '';
    this.barcode = '';
    this.identifier = '';
    this.other_data = {};
    this.purchase_order_id = '';
    this.created_at = Date.now();
    this.updated_at = Date.now();
    Object.assign(this, data);
  }
}

/***/ }),

/***/ 82615:
/*!************************************************!*\
  !*** ./libs/assets/src/lib/asset.utilities.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   assetAvailable: () => (/* binding */ assetAvailable),
/* harmony export */   generateAssetCategoryForm: () => (/* binding */ generateAssetCategoryForm),
/* harmony export */   generateAssetForm: () => (/* binding */ generateAssetForm),
/* harmony export */   generateAssetGroupForm: () => (/* binding */ generateAssetGroupForm),
/* harmony export */   generateAssetPurchaseOrderForm: () => (/* binding */ generateAssetPurchaseOrderForm),
/* harmony export */   getAssetRulesForZone: () => (/* binding */ getAssetRulesForZone)
/* harmony export */ });
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/forms */ 34456);
/* harmony import */ var _asset_class__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./asset.class */ 84011);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! date-fns */ 55882);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! date-fns */ 28848);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! date-fns */ 91543);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! date-fns */ 3330);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! rxjs/operators */ 35443);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! rxjs/operators */ 29314);
/* harmony import */ var _placeos_ts_client__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @placeos/ts-client */ 35713);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! rxjs */ 71536);







function generateAssetCategoryForm(category = {}) {
  return new _angular_forms__WEBPACK_IMPORTED_MODULE_3__.FormGroup({
    id: new _angular_forms__WEBPACK_IMPORTED_MODULE_3__.FormControl(category.id),
    name: new _angular_forms__WEBPACK_IMPORTED_MODULE_3__.FormControl(category.name || '', [_angular_forms__WEBPACK_IMPORTED_MODULE_3__.Validators.required]),
    parent_category_id: new _angular_forms__WEBPACK_IMPORTED_MODULE_3__.FormControl(category.parent_category_id)
  });
}
function generateAssetPurchaseOrderForm(order = {}) {
  return new _angular_forms__WEBPACK_IMPORTED_MODULE_3__.FormGroup({
    id: new _angular_forms__WEBPACK_IMPORTED_MODULE_3__.FormControl(order.id),
    order_number: new _angular_forms__WEBPACK_IMPORTED_MODULE_3__.FormControl(order.order_number || order.purchase_order_number || '', [_angular_forms__WEBPACK_IMPORTED_MODULE_3__.Validators.required]),
    invoice_number: new _angular_forms__WEBPACK_IMPORTED_MODULE_3__.FormControl(order.invoice_number || ''),
    unit_price: new _angular_forms__WEBPACK_IMPORTED_MODULE_3__.FormControl(order.unit_price || 0),
    purchase_date: new _angular_forms__WEBPACK_IMPORTED_MODULE_3__.FormControl(order.purchase_date * 1000 || null),
    expected_service_start_date: new _angular_forms__WEBPACK_IMPORTED_MODULE_3__.FormControl(order.expected_service_start_date * 1000 || order.depreciation_start_date || null),
    expected_service_end_date: new _angular_forms__WEBPACK_IMPORTED_MODULE_3__.FormControl(order.expected_service_end_date * 1000 || order.depreciation_end_date || null)
  });
}
function generateAssetGroupForm(group = new _asset_class__WEBPACK_IMPORTED_MODULE_0__.AssetGroup()) {
  return new _angular_forms__WEBPACK_IMPORTED_MODULE_3__.FormGroup({
    id: new _angular_forms__WEBPACK_IMPORTED_MODULE_3__.FormControl(group.id),
    category_id: new _angular_forms__WEBPACK_IMPORTED_MODULE_3__.FormControl(group.category_id || '', [_angular_forms__WEBPACK_IMPORTED_MODULE_3__.Validators.required]),
    images: new _angular_forms__WEBPACK_IMPORTED_MODULE_3__.FormControl(group.images || []),
    brand: new _angular_forms__WEBPACK_IMPORTED_MODULE_3__.FormControl(group.brand || ''),
    name: new _angular_forms__WEBPACK_IMPORTED_MODULE_3__.FormControl(group.name || '', [_angular_forms__WEBPACK_IMPORTED_MODULE_3__.Validators.required]),
    description: new _angular_forms__WEBPACK_IMPORTED_MODULE_3__.FormControl(group.description || '')
  });
}
function generateAssetForm(asset = new _asset_class__WEBPACK_IMPORTED_MODULE_0__.Asset()) {
  return new _angular_forms__WEBPACK_IMPORTED_MODULE_3__.FormGroup({
    id: new _angular_forms__WEBPACK_IMPORTED_MODULE_3__.FormControl(asset.id),
    type_id: new _angular_forms__WEBPACK_IMPORTED_MODULE_3__.FormControl(asset.type_id || '', [_angular_forms__WEBPACK_IMPORTED_MODULE_3__.Validators.required]),
    description: new _angular_forms__WEBPACK_IMPORTED_MODULE_3__.FormControl(asset.description || ''),
    serial_number: new _angular_forms__WEBPACK_IMPORTED_MODULE_3__.FormControl(asset.serial_number || ''),
    barcode: new _angular_forms__WEBPACK_IMPORTED_MODULE_3__.FormControl(asset.barcode || ''),
    identifier: new _angular_forms__WEBPACK_IMPORTED_MODULE_3__.FormControl(asset.identifier || ''),
    other_data: new _angular_forms__WEBPACK_IMPORTED_MODULE_3__.FormControl(asset.other_data || {}),
    purchase_order_id: new _angular_forms__WEBPACK_IMPORTED_MODULE_3__.FormControl(asset.purchase_order_id)
  });
}
const RULE_REQUESTS = {};
function getAssetRulesForZone(zone_id, fresh = false) {
  if (!zone_id) return (0,rxjs__WEBPACK_IMPORTED_MODULE_4__.of)([]);
  if (!RULE_REQUESTS[zone_id] || fresh) RULE_REQUESTS[zone_id] = (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_2__.showMetadata)(zone_id, 'assets_config').pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.map)(_ => _.details instanceof Array ? _.details : []), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.catchError)(e => (0,rxjs__WEBPACK_IMPORTED_MODULE_4__.of)([])));
  return RULE_REQUESTS[zone_id];
}
function assetAvailable(item, rules, event) {
  const current_date = Date.now();
  const event_date = new Date(event.date);
  const isRuleMatch = rule => item.name === rule.name || item.category.name.includes(rule.name) || event.resources.some(resource => resource.zones.includes(rule.name)) || event.space?.zones.includes(rule.name) || rule.name === '*';
  const countMatches = rule => rule.rules.reduce((matches, condition) => {
    switch (condition[0]) {
      case 'is_before':
        return matches + ((0,date_fns__WEBPACK_IMPORTED_MODULE_7__.isBefore)(current_date, (0,date_fns__WEBPACK_IMPORTED_MODULE_8__.subHours)(event_date, condition[1])) ? 1 : 0);
      case 'within_hours':
        return matches + ((0,date_fns__WEBPACK_IMPORTED_MODULE_9__.isAfter)(current_date, (0,date_fns__WEBPACK_IMPORTED_MODULE_8__.subHours)(event_date, condition[1])) ? 1 : 0);
      case 'after_hour':
        return matches + ((0,date_fns__WEBPACK_IMPORTED_MODULE_9__.isAfter)(event_date, (0,date_fns__WEBPACK_IMPORTED_MODULE_10__.setHours)(event_date, condition[1])) ? 1 : 0);
      case 'before_hour':
        return matches + ((0,date_fns__WEBPACK_IMPORTED_MODULE_7__.isBefore)(event_date, (0,date_fns__WEBPACK_IMPORTED_MODULE_10__.setHours)(event_date, condition[1])) ? 1 : 0);
      case 'min_length':
        return matches + (event.duration >= (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.stringToMinutes)(condition[1]) ? 1 : 0);
      case 'max_length':
        return matches + (event.duration <= (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.stringToMinutes)(condition[1]) ? 1 : 0);
      case 'visitor_type':
        return matches + (event.ext('visitor_type') === condition[1] ? 1 : 0);
      default:
        return matches + 1;
    }
  }, 0);
  for (const rule of rules) {
    if (isRuleMatch(rule)) {
      if (countMatches(rule) < rule.rules.length) {
        return false;
      }
    }
  }
  return true;
}

/***/ }),

/***/ 75204:
/*!******************************************!*\
  !*** ./libs/assets/src/lib/assets.fn.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   addAsset: () => (/* binding */ addAsset),
/* harmony export */   addAssetCategory: () => (/* binding */ addAssetCategory),
/* harmony export */   addAssetGroup: () => (/* binding */ addAssetGroup),
/* harmony export */   addAssetPurchaseOrder: () => (/* binding */ addAssetPurchaseOrder),
/* harmony export */   addAssetsInBulk: () => (/* binding */ addAssetsInBulk),
/* harmony export */   deleteAsset: () => (/* binding */ deleteAsset),
/* harmony export */   deleteAssetCategory: () => (/* binding */ deleteAssetCategory),
/* harmony export */   deleteAssetGroup: () => (/* binding */ deleteAssetGroup),
/* harmony export */   deleteAssetPurchaseOrder: () => (/* binding */ deleteAssetPurchaseOrder),
/* harmony export */   deleteAssetsInBulk: () => (/* binding */ deleteAssetsInBulk),
/* harmony export */   differenceBetweenAssetRequests: () => (/* binding */ differenceBetweenAssetRequests),
/* harmony export */   getGroupsWithAssets: () => (/* binding */ getGroupsWithAssets),
/* harmony export */   queryAssetCategories: () => (/* binding */ queryAssetCategories),
/* harmony export */   queryAssetGroups: () => (/* binding */ queryAssetGroups),
/* harmony export */   queryAssetGroupsExtended: () => (/* binding */ queryAssetGroupsExtended),
/* harmony export */   queryAssetPurchaseOrders: () => (/* binding */ queryAssetPurchaseOrders),
/* harmony export */   queryAssets: () => (/* binding */ queryAssets),
/* harmony export */   queryAvailableAssets: () => (/* binding */ queryAvailableAssets),
/* harmony export */   queryGroupAvailability: () => (/* binding */ queryGroupAvailability),
/* harmony export */   removeAssetRequests: () => (/* binding */ removeAssetRequests),
/* harmony export */   saveAsset: () => (/* binding */ saveAsset),
/* harmony export */   saveAssetCategory: () => (/* binding */ saveAssetCategory),
/* harmony export */   saveAssetGroup: () => (/* binding */ saveAssetGroup),
/* harmony export */   saveAssetPurchaseOrder: () => (/* binding */ saveAssetPurchaseOrder),
/* harmony export */   saveAssetsInBulk: () => (/* binding */ saveAssetsInBulk),
/* harmony export */   showAsset: () => (/* binding */ showAsset),
/* harmony export */   showAssetCategory: () => (/* binding */ showAssetCategory),
/* harmony export */   showAssetGroup: () => (/* binding */ showAssetGroup),
/* harmony export */   showAssetPurchaseOrder: () => (/* binding */ showAssetPurchaseOrder),
/* harmony export */   showGroupFull: () => (/* binding */ showGroupFull),
/* harmony export */   updateAsset: () => (/* binding */ updateAsset),
/* harmony export */   updateAssetCategory: () => (/* binding */ updateAssetCategory),
/* harmony export */   updateAssetGroup: () => (/* binding */ updateAssetGroup),
/* harmony export */   updateAssetPurchaseOrder: () => (/* binding */ updateAssetPurchaseOrder),
/* harmony export */   updateAssetsInBulk: () => (/* binding */ updateAssetsInBulk),
/* harmony export */   validateAssetRequestsForResource: () => (/* binding */ validateAssetRequestsForResource)
/* harmony export */ });
/* harmony import */ var _home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 89204);
/* harmony import */ var _placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @placeos/ts-client */ 35713);
/* harmony import */ var libs_common_src_lib_api__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! libs/common/src/lib/api */ 38385);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! rxjs/operators */ 35443);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! rxjs/operators */ 71963);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! rxjs/operators */ 66000);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! rxjs */ 71536);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! rxjs */ 68757);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! rxjs */ 68824);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! date-fns */ 99908);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! date-fns */ 33240);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! date-fns */ 56441);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! date-fns */ 49675);
/* harmony import */ var libs_bookings_src_lib_bookings_fn__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! libs/bookings/src/lib/bookings.fn */ 18026);
/* harmony import */ var libs_bookings_src_lib_booking_class__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! libs/bookings/src/lib/booking.class */ 53857);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var _asset_request_class__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./asset-request.class */ 33747);










const BASE_ENDPOINT = '/api/engine/v2';
////////////////////////////////
////    Asset Categories    ////
////////////////////////////////
function queryAssetCategories(query = {}) {
  const q = (0,libs_common_src_lib_api__WEBPACK_IMPORTED_MODULE_2__.toQueryString)(query);
  return (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.get)(`${BASE_ENDPOINT}/asset_categories${q ? '?' + q : ''}`).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.map)(_ => _));
}
function addAssetCategory(category) {
  return (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.post)(`${BASE_ENDPOINT}/asset_categories`, (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.cleanObject)(category, [undefined, null, ''])).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.map)(_ => _));
}
function updateAssetCategory(id, category) {
  return (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.put)(`${BASE_ENDPOINT}/asset_categories/${id}`, (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.cleanObject)(category, [undefined, null, ''])).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.map)(_ => _));
}
function saveAssetCategory(category) {
  return category.id ? updateAssetCategory(category.id, category) : addAssetCategory(category);
}
function showAssetCategory(id) {
  return (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.get)(`${BASE_ENDPOINT}/asset_categories/${id}`).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.map)(_ => _));
}
function deleteAssetCategory(id) {
  return (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.del)(`${BASE_ENDPOINT}/asset_categories/${id}`);
}
//////////////////////////////
////     Asset Groups     ////
//////////////////////////////
function queryAssetGroups(query = {}) {
  const q = (0,libs_common_src_lib_api__WEBPACK_IMPORTED_MODULE_2__.toQueryString)(query);
  return (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.get)(`${BASE_ENDPOINT}/asset_types${q ? '?' + q : ''}`).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.map)(_ => _));
}
const groups_cache = new Map();
function queryAssetGroupsExtended(query = {}) {
  const q = (0,libs_common_src_lib_api__WEBPACK_IMPORTED_MODULE_2__.toQueryString)(query);
  if (groups_cache.has(query.zones)) {
    return (0,rxjs__WEBPACK_IMPORTED_MODULE_8__.of)(groups_cache.get(query.zones));
  }
  return (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.get)(`${BASE_ENDPOINT}/asset_types${q ? '?' + q : ''}`).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.map)(_ => _), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.switchMap)(list => (0,rxjs__WEBPACK_IMPORTED_MODULE_10__.forkJoin)(list.map(group => queryAssets({
    limit: 200,
    ...query,
    type_id: group.id
  }).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.map)(assets => ({
    ...group,
    assets
  })))))), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_11__.tap)(_ => {
    groups_cache.set(query.zones, _);
    // Clear cache after 5 minutes
    setTimeout(() => groups_cache.delete(query.zones), 5 * 60 * 1000);
  }));
}
function addAssetGroup(product) {
  return (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.post)(`${BASE_ENDPOINT}/asset_types`, (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.cleanObject)(product, [undefined, null, ''])).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.map)(_ => _));
}
function updateAssetGroup(id, product) {
  return (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.put)(`${BASE_ENDPOINT}/asset_types/${id}`, (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.cleanObject)(product, [undefined, null, ''])).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.map)(_ => _));
}
function saveAssetGroup(product) {
  return product.id ? updateAssetGroup(product.id, product) : addAssetGroup(product);
}
function showAssetGroup(id) {
  return (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.get)(`${BASE_ENDPOINT}/asset_types/${id}`).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.map)(_ => _));
}
function deleteAssetGroup(id) {
  return (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.del)(`${BASE_ENDPOINT}/asset_types/${id}`);
}
////////////////////////////////
////          Assets        ////
////////////////////////////////
function queryAssets(query = {}) {
  const q = (0,libs_common_src_lib_api__WEBPACK_IMPORTED_MODULE_2__.toQueryString)(query);
  return (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.get)(`${BASE_ENDPOINT}/assets${q ? '?' + q : ''}`).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.map)(_ => _));
}
function addAsset(asset) {
  return (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.post)(`${BASE_ENDPOINT}/assets`, (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.cleanObject)(asset, [undefined, null, ''])).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.map)(_ => _));
}
function updateAsset(id, asset) {
  return (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.put)(`${BASE_ENDPOINT}/assets/${id}`, (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.cleanObject)(asset, [undefined, null, ''])).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.map)(_ => _));
}
function saveAsset(asset) {
  return asset.id ? updateAsset(asset.id, {
    ...asset,
    asset_type_id: asset.type_id
  }) : addAsset({
    ...asset,
    asset_type_id: asset.type_id
  });
}
function showAsset(id) {
  return (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.get)(`${BASE_ENDPOINT}/assets/${id}`).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.map)(_ => _));
}
function deleteAsset(id) {
  return (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.del)(`${BASE_ENDPOINT}/assets/${id}`);
}
////////////////////////////////
////      Assets (Bulk)     ////
////////////////////////////////
function addAssetsInBulk(assets) {
  assets.map(_ => _.asset_type_id = _.type_id);
  return (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.post)(`${BASE_ENDPOINT}/assets/bulk`, assets.map(_ => (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.cleanObject)(_, [undefined, null, '']))).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.map)(_ => _));
}
function updateAssetsInBulk(assets) {
  assets.map(_ => _.asset_type_id = _.type_id);
  return (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.put)(`${BASE_ENDPOINT}/assets/bulk`, assets.map(_ => (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.cleanObject)(_, [undefined, null, '']))).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.map)(_ => _));
}
function saveAssetsInBulk(assets) {
  if (!assets?.length) return (0,rxjs__WEBPACK_IMPORTED_MODULE_8__.of)([]);
  return assets.every(item => item?.id) ? updateAssetsInBulk(assets) : addAssetsInBulk(assets);
}
function deleteAssetsInBulk(id_list) {
  return (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.del)(`${BASE_ENDPOINT}/assets/bulk`, {
    body: {
      id_list
    }
  });
}
/////////////////////////////////
////  Asset Purchase Orders  ////
/////////////////////////////////
function queryAssetPurchaseOrders(query = {}) {
  const q = (0,libs_common_src_lib_api__WEBPACK_IMPORTED_MODULE_2__.toQueryString)(query);
  return (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.get)(`${BASE_ENDPOINT}/asset_purchase_orders${q ? '?' + q : ''}`).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.map)(_ => _));
}
function addAssetPurchaseOrder(order) {
  return (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.post)(`${BASE_ENDPOINT}/asset_purchase_orders`, (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.cleanObject)(order, [undefined, null, ''])).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.map)(_ => _));
}
function updateAssetPurchaseOrder(id, order) {
  return (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.put)(`${BASE_ENDPOINT}/asset_purchase_orders/${id}`, (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.cleanObject)(order, [undefined, null, ''])).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.map)(_ => _));
}
function saveAssetPurchaseOrder(order) {
  return order.id ? updateAssetPurchaseOrder(order.id, {
    ...order,
    purchase_order_number: order.order_number
  }) : addAssetPurchaseOrder({
    ...order,
    purchase_order_number: order.order_number
  });
}
function showAssetPurchaseOrder(id) {
  return (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.get)(`${BASE_ENDPOINT}/asset_purchase_orders/${id}`).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.map)(_ => _));
}
function deleteAssetPurchaseOrder(id) {
  return (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.del)(`${BASE_ENDPOINT}/asset_purchase_orders/${id}`);
}
//////////////////////////////////////
////     Asset Helper Methods     ////
//////////////////////////////////////
function getGroupsWithAssets(query = {}) {
  return (0,rxjs__WEBPACK_IMPORTED_MODULE_12__.combineLatest)([queryAssetGroups(query)]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.map)(([products]) => products));
}
function showGroupFull(id, query = {}) {
  return (0,rxjs__WEBPACK_IMPORTED_MODULE_12__.combineLatest)([showAssetGroup(id), queryAssetCategories(), queryAssets({
    ...query,
    type_id: id,
    limit: 2000
  }), queryAssetPurchaseOrders()]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.map)(([product, categories, assets, purchase_orders]) => {
    product.category = categories.find(category => category.id === product.category_id);
    product.assets = assets.filter(asset => asset.type_id === product.id || asset.asset_type_id === product.id);
    for (const asset of product.assets) {
      asset.order_number = purchase_orders.find(_ => _.id === asset.purchase_order_id)?.purchase_order_number;
    }
    product.purchase_orders = purchase_orders.filter(order => product.assets.find(asset => asset.purchase_order_id === order.id));
    return product;
  }));
}
function queryAvailableAssets(query, ignore) {
  query.type = 'asset-request';
  return (0,rxjs__WEBPACK_IMPORTED_MODULE_12__.combineLatest)([queryAssets(query), (0,libs_bookings_src_lib_bookings_fn__WEBPACK_IMPORTED_MODULE_3__.queryBookings)(query)]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.map)(([assets, bookings]) => assets.filter(asset => ignore?.includes(asset.id) || !bookings.find(booking => booking.asset_id === asset.id || booking.asset_ids?.includes(asset.id)))));
}
function queryGroupAvailability(query, ignore) {
  query.type = 'asset-request';
  return (0,rxjs__WEBPACK_IMPORTED_MODULE_12__.combineLatest)([queryAssetGroupsExtended(query), (0,libs_bookings_src_lib_bookings_fn__WEBPACK_IMPORTED_MODULE_3__.queryBookings)(query)]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.map)(([products, bookings]) => {
    bookings = bookings.filter(_ => _.status !== 'declined' && _.status !== 'cancelled');
    return products.map(product => ({
      ...product,
      assets: product.assets.filter(asset => ignore?.includes(asset.id) || !bookings.find(booking => !ignore.includes(booking.id) && (booking.asset_id === asset.id || booking.asset_ids?.includes(asset.id))))
    }));
  }));
}
function removeAssetRequests(_x) {
  return _removeAssetRequests.apply(this, arguments);
}
function _removeAssetRequests() {
  _removeAssetRequests = (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* (id) {
    const requests = yield (0,libs_bookings_src_lib_bookings_fn__WEBPACK_IMPORTED_MODULE_3__.queryBookings)({
      period_start: (0,date_fns__WEBPACK_IMPORTED_MODULE_13__.getUnixTime)((0,date_fns__WEBPACK_IMPORTED_MODULE_14__.startOfDay)(new Date())),
      period_end: (0,date_fns__WEBPACK_IMPORTED_MODULE_13__.getUnixTime)((0,date_fns__WEBPACK_IMPORTED_MODULE_15__.endOfDay)(new Date())),
      type: 'asset-request'
    }).toPromise();
    return Promise.all(requests.filter(_ => _.asset_id === id || _.asset_ids?.includes(id)).map(request => (0,libs_bookings_src_lib_bookings_fn__WEBPACK_IMPORTED_MODULE_3__.removeBooking)(request.id).toPromise()));
  });
  return _removeAssetRequests.apply(this, arguments);
}
function differenceBetweenAssetRequests(new_assets, old_assets, reset_state = false) {
  if ((!new_assets || new_assets?.length <= 0) && old_assets?.length) return [];
  if (!old_assets) return [];
  const changed = [];
  for (const request of new_assets) {
    const match = old_assets.find(_ => _.id === request.id);
    if (!match || match.ref_id !== request.ref_id) {
      changed.push(request.id);
    }
  }
  return changed;
}
function validateAssetRequestsForResource(_x2, _x3) {
  return _validateAssetRequestsForResource.apply(this, arguments);
}
function _validateAssetRequestsForResource() {
  _validateAssetRequestsForResource = (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* ({
    id,
    ical_uid,
    from_booking
  }, {
    date,
    duration,
    all_day,
    host,
    location_name,
    location_id,
    zones,
    reset_state
  }, new_assets = [], force_create = false) {
    const requests = yield (0,libs_bookings_src_lib_bookings_fn__WEBPACK_IMPORTED_MODULE_3__.queryBookings)({
      period_start: (0,date_fns__WEBPACK_IMPORTED_MODULE_13__.getUnixTime)(all_day ? (0,date_fns__WEBPACK_IMPORTED_MODULE_14__.startOfDay)(date) : date),
      period_end: (0,date_fns__WEBPACK_IMPORTED_MODULE_13__.getUnixTime)(all_day ? (0,date_fns__WEBPACK_IMPORTED_MODULE_15__.endOfDay)((0,date_fns__WEBPACK_IMPORTED_MODULE_16__.addMinutes)(date, duration)) : (0,date_fns__WEBPACK_IMPORTED_MODULE_16__.addMinutes)(date, duration)),
      type: 'asset-request',
      zones: zones.join(',')
    }).toPromise();
    const bookings = id && ical_uid ? yield (0,libs_bookings_src_lib_bookings_fn__WEBPACK_IMPORTED_MODULE_3__.queryBookings)({
      period_start: (0,date_fns__WEBPACK_IMPORTED_MODULE_13__.getUnixTime)((0,date_fns__WEBPACK_IMPORTED_MODULE_14__.startOfDay)(date)),
      period_end: (0,date_fns__WEBPACK_IMPORTED_MODULE_13__.getUnixTime)((0,date_fns__WEBPACK_IMPORTED_MODULE_15__.endOfDay)(date)),
      type: 'asset-request',
      email: host,
      event_id: from_booking ? '' : id,
      booking_id: from_booking ? id : '',
      ical_uid
    }).toPromise() : [];
    const booking_list = bookings.map(_ => [_.id, new _asset_request_class__WEBPACK_IMPORTED_MODULE_6__.AssetRequest(_.extension_data.request)]);
    new_assets?.forEach(_ => _.conflict = false);
    let changed = force_create ? new_assets.map(_ => _.id) : differenceBetweenAssetRequests(new_assets, booking_list.map(([_, r]) => r), reset_state);
    if (reset_state) {
      const has_state = bookings.filter(_ => _.approved || _.rejected);
      changed = (0,_placeos_common__WEBPACK_IMPORTED_MODULE_5__.unique)([...changed, ...has_state.map(_ => _.extension_data.request_id)]);
    }
    const unchanged = booking_list.filter(([_, request]) => !changed.includes(request.id));
    const changed_requests = booking_list.filter(([_, {
      id
    }]) => changed.includes(id));
    const changed_assets = new_assets.filter(({
      id
    }) => changed.includes(id));
    const filtered = requests.filter(req => !req.rejected && (!bookings.find(b => b.id === req.id) || unchanged.find(([id]) => req.event_id === id)));
    let used_ids = (0,_placeos_common__WEBPACK_IMPORTED_MODULE_5__.flatten)(filtered.map(_ => _.asset_ids));
    for (const [_, request] of unchanged) {
      used_ids = [...used_ids, ...(0,_placeos_common__WEBPACK_IMPORTED_MODULE_5__.flatten)(request.items.map(_ => _.item_ids))];
    }
    const available_groups = yield queryGroupAvailability({
      period_start: (0,date_fns__WEBPACK_IMPORTED_MODULE_13__.getUnixTime)(all_day ? (0,date_fns__WEBPACK_IMPORTED_MODULE_14__.startOfDay)(date) : date),
      period_end: (0,date_fns__WEBPACK_IMPORTED_MODULE_13__.getUnixTime)(all_day ? (0,date_fns__WEBPACK_IMPORTED_MODULE_15__.endOfDay)((0,date_fns__WEBPACK_IMPORTED_MODULE_16__.addMinutes)(date, duration)) : (0,date_fns__WEBPACK_IMPORTED_MODULE_16__.addMinutes)(date, duration)),
      type: 'asset-request'
    }, bookings.map(_ => _.id)).toPromise();
    console.log('Used IDs:', used_ids);
    console.log('Changed Assets:', changed_assets);
    console.log('Requests:', requests);
    console.log('Bookings:', bookings);
    console.log('Filtered:', filtered);
    console.log('Unchanged:', unchanged);
    console.log('Available Groups:', available_groups);
    const processed_requests = changed_assets.map(request => {
      // Handle duplicate asset ids
      let asset_ids = (0,_placeos_common__WEBPACK_IMPORTED_MODULE_5__.flatten)(request.items.map(({
        id,
        item_ids,
        quantity
      }) => {
        const assets = available_groups.find(_ => _.id === id)?.assets;
        if (!assets) return item_ids;
        const list = [];
        return new Array(quantity).fill(0).map((_, idx) => {
          const item = used_ids.includes(item_ids[idx]) || list.includes(item_ids[idx]) || !item_ids[idx] ? assets?.find(({
            id
          }) => {
            return !used_ids.includes(id) && !list.includes(id);
          })?.id : item_ids[idx];
          if (!item) {
            request.conflict = true;
            throw 'Unable to find available asset for request';
          }
          list.push(item);
          return item;
        });
      }));
      // Grab any existing bookings for the asset for the parent event/booking
      const booking = bookings.find(_ => _.asset_ids.find(id => request.items?.find(i => i.item_ids.includes(id))));
      used_ids = [...used_ids, ...asset_ids];
      return (0,libs_bookings_src_lib_bookings_fn__WEBPACK_IMPORTED_MODULE_3__.createBooking)(new libs_bookings_src_lib_booking_class__WEBPACK_IMPORTED_MODULE_4__.Booking({
        type: 'asset-request',
        booking_type: 'asset-request',
        date,
        duration,
        all_day,
        description: location_name,
        user_email: host,
        asset_id: asset_ids[0],
        asset_ids,
        asset_name: request.items.map(_ => _.name).join(', '),
        title: request.items.map(_ => _.name).join(', '),
        approved: !reset_state && booking?.approved && !request._changed,
        rejected: !reset_state && booking?.rejected && !request._changed,
        extension_data: {
          parent_id: id,
          request_id: request.id,
          location_id,
          request: new _asset_request_class__WEBPACK_IMPORTED_MODULE_6__.AssetRequest({
            ...request,
            event: null
          })
        },
        zones: zones || []
      }), {
        ical_uid,
        event_id: from_booking ? '' : id
      });
    });
    return /*#__PURE__*/(0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      yield Promise.all(changed_requests.map(([id]) => (0,libs_bookings_src_lib_bookings_fn__WEBPACK_IMPORTED_MODULE_3__.removeBooking)(id).toPromise()));
      yield Promise.all(processed_requests.map(r => r.toPromise()));
    });
  });
  return _validateAssetRequestsForResource.apply(this, arguments);
}

/***/ }),

/***/ 99708:
/*!**********************************************!*\
  !*** ./libs/assets/src/lib/assets.module.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AssetSelectModalComponent: () => (/* reexport safe */ _asset_select_modal_asset_select_modal_component__WEBPACK_IMPORTED_MODULE_2__.AssetSelectModalComponent),
/* harmony export */   AssetsModule: () => (/* binding */ AssetsModule)
/* harmony export */ });
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _placeos_components__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/components */ 51588);
/* harmony import */ var _placeos_form_fields__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @placeos/form-fields */ 63046);
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @angular/forms */ 34456);
/* harmony import */ var _asset_select_modal_asset_select_modal_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./asset-select-modal/asset-select-modal.component */ 47471);
/* harmony import */ var _asset_select_modal_asset_details_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./asset-select-modal/asset-details.component */ 48751);
/* harmony import */ var _asset_select_modal_asset_filters_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./asset-select-modal/asset-filters.component */ 64358);
/* harmony import */ var _asset_select_modal_asset_filters_display_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./asset-select-modal/asset-filters-display.component */ 76041);
/* harmony import */ var _asset_select_modal_asset_list_component__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./asset-select-modal/asset-list.component */ 67807);
/* harmony import */ var _asset_group_pipe__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./asset-group.pipe */ 68965);
/* harmony import */ var _asset_list_field_component__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./asset-list-field.component */ 83618);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @angular/core */ 37580);













const COMPONENTS = [_asset_select_modal_asset_select_modal_component__WEBPACK_IMPORTED_MODULE_2__.AssetSelectModalComponent, _asset_list_field_component__WEBPACK_IMPORTED_MODULE_8__.AssetListFieldComponent];
const MODULE_COMPONENTS = [_asset_select_modal_asset_details_component__WEBPACK_IMPORTED_MODULE_3__.AssetDetailsComponent, _asset_select_modal_asset_filters_component__WEBPACK_IMPORTED_MODULE_4__.AssetFiltersComponent, _asset_select_modal_asset_filters_display_component__WEBPACK_IMPORTED_MODULE_5__.AssetFiltersDisplayComponent, _asset_select_modal_asset_list_component__WEBPACK_IMPORTED_MODULE_6__.AssetListComponent, _asset_group_pipe__WEBPACK_IMPORTED_MODULE_7__.AssetGroupPipe];
class AssetsModule {
  static #_ = this.ɵfac = function AssetsModule_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || AssetsModule)();
  };
  static #_2 = this.ɵmod = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵdefineNgModule"]({
    type: AssetsModule
  });
  static #_3 = this.ɵinj = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵdefineInjector"]({
    imports: [_angular_common__WEBPACK_IMPORTED_MODULE_10__.CommonModule, _placeos_form_fields__WEBPACK_IMPORTED_MODULE_1__.FormFieldsModule, _angular_forms__WEBPACK_IMPORTED_MODULE_11__.FormsModule, _angular_forms__WEBPACK_IMPORTED_MODULE_11__.ReactiveFormsModule, _placeos_components__WEBPACK_IMPORTED_MODULE_0__.ComponentsModule]
  });
}
(function () {
  (typeof ngJitMode === "undefined" || ngJitMode) && _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵsetNgModuleScope"](AssetsModule, {
    declarations: [_asset_select_modal_asset_select_modal_component__WEBPACK_IMPORTED_MODULE_2__.AssetSelectModalComponent, _asset_list_field_component__WEBPACK_IMPORTED_MODULE_8__.AssetListFieldComponent, _asset_select_modal_asset_details_component__WEBPACK_IMPORTED_MODULE_3__.AssetDetailsComponent, _asset_select_modal_asset_filters_component__WEBPACK_IMPORTED_MODULE_4__.AssetFiltersComponent, _asset_select_modal_asset_filters_display_component__WEBPACK_IMPORTED_MODULE_5__.AssetFiltersDisplayComponent, _asset_select_modal_asset_list_component__WEBPACK_IMPORTED_MODULE_6__.AssetListComponent, _asset_group_pipe__WEBPACK_IMPORTED_MODULE_7__.AssetGroupPipe],
    imports: [_angular_common__WEBPACK_IMPORTED_MODULE_10__.CommonModule, _placeos_form_fields__WEBPACK_IMPORTED_MODULE_1__.FormFieldsModule, _angular_forms__WEBPACK_IMPORTED_MODULE_11__.FormsModule, _angular_forms__WEBPACK_IMPORTED_MODULE_11__.ReactiveFormsModule, _placeos_components__WEBPACK_IMPORTED_MODULE_0__.ComponentsModule],
    exports: [_asset_select_modal_asset_select_modal_component__WEBPACK_IMPORTED_MODULE_2__.AssetSelectModalComponent, _asset_list_field_component__WEBPACK_IMPORTED_MODULE_8__.AssetListFieldComponent]
  });
})();

/***/ }),

/***/ 27547:
/*!*********************************************************!*\
  !*** ./libs/bookings/src/lib/booking-card.component.ts ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   BookingCardComponent: () => (/* binding */ BookingCardComponent)
/* harmony export */ });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! date-fns */ 31257);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! date-fns */ 45726);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! date-fns */ 49675);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! date-fns */ 99134);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! rxjs/operators */ 35443);
/* harmony import */ var _booking_class__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./booking.class */ 53857);
/* harmony import */ var _booking_details_modal_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./booking-details-modal.component */ 1781);
/* harmony import */ var libs_common_src_lib_async_handler_class__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! libs/common/src/lib/async-handler.class */ 75354);
/* harmony import */ var libs_organisation_src_lib_organisation_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! libs/organisation/src/lib/organisation.service */ 19863);
/* harmony import */ var _parking_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./parking.service */ 1593);
/* harmony import */ var _events_src_lib_group_event_details_modal_component__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../events/src/lib/group-event-details-modal.component */ 58094);
/* harmony import */ var _angular_material_dialog__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @angular/material/dialog */ 12587);
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @angular/router */ 95072);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../components/src/lib/icon.component */ 69434);
/* harmony import */ var _components_src_lib_status_pill_component__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../components/src/lib/status-pill.component */ 50907);





















const _c0 = () => ["./"];
const _c1 = a0 => ({
  booking: a0
});
function BookingCardComponent_h4_0_span_1_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](0, "span", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtextInterpolate1"]("", ctx_r0.day, ",\u00A0");
  }
}
function BookingCardComponent_h4_0_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](0, "h4", 3);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtemplate"](1, BookingCardComponent_h4_0_span_1_Template, 2, 1, "span", 4);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpipe"](3, "date");
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](4, "span", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtext"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpipe"](6, "date");
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵproperty"]("ngIf", ctx_r0.show_day);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpipeBind2"](3, 3, ctx_r0.booking == null ? null : ctx_r0.booking.date, ctx_r0.time_format), " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtextInterpolate1"]("(", _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpipeBind2"](6, 6, ctx_r0.booking == null ? null : ctx_r0.booking.date, "z"), ")");
  }
}
function BookingCardComponent_a_1_app_icon_9_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](0, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtextInterpolate"](ctx_r0.type);
  }
}
function BookingCardComponent_a_1_div_12_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](0, "div", 19)(1, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtext"](2, "place");
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](3, "div", 20);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtextInterpolate"](ctx_r0.location);
  }
}
function BookingCardComponent_a_1_div_15_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](0, "div", 21);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtext"](1, " Associate ");
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]();
  }
}
function BookingCardComponent_a_1_div_16_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](0, "div", 21);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtext"](1, " Event ");
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]();
  }
}
function BookingCardComponent_a_1_div_17_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](0, "div", 21);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtextInterpolate1"](" ", ctx_r0.booking.status !== "declined" ? "RESERVED" : "RELEASED", " ");
  }
}
function BookingCardComponent_a_1_Template(rf, ctx) {
  if (rf & 1) {
    const _r2 = _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](0, "a", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵlistener"]("click", function BookingCardComponent_a_1_Template_a_click_0_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵrestoreView"](_r2);
      const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵresetView"](ctx_r0.viewDetails());
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](1, "div", 8)(2, "h4", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](4, "div", 10)(5, "status-pill", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtext"](6);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](7, "div", 12)(8, "div", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtemplate"](9, BookingCardComponent_a_1_app_icon_9_Template, 2, 1, "app-icon", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](10, "div", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtext"](11);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtemplate"](12, BookingCardComponent_a_1_div_12_Template, 5, 1, "div", 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementStart"](13, "app-icon", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtext"](14, " chevron_right ");
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtemplate"](15, BookingCardComponent_a_1_div_15_Template, 2, 0, "div", 18)(16, BookingCardComponent_a_1_div_16_Template, 2, 0, "div", 18)(17, BookingCardComponent_a_1_div_17_Template, 2, 1, "div", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpipe"](18, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵnextContext"]();
    const desk_icon_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵreference"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵproperty"]("routerLink", _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpureFunction0"](14, _c0))("queryParams", _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpureFunction1"](15, _c1, ctx_r0.booking == null ? null : ctx_r0.booking.id));
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtextInterpolate"](ctx_r0.booking == null ? null : ctx_r0.booking.title);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵproperty"]("status", ctx_r0.status);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtextInterpolate"](ctx_r0.period);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵproperty"]("ngIf", ctx_r0.type !== "desk")("ngIfElse", desk_icon_r3);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtextInterpolate1"](" ", ctx_r0.raw_description || (ctx_r0.booking == null ? null : ctx_r0.booking.asset_name) || (ctx_r0.booking == null ? null : ctx_r0.booking.asset_id), " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵproperty"]("ngIf", ctx_r0.location);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵproperty"]("ngIf", !ctx_r0.for_current_user && (ctx_r0.booking == null ? null : ctx_r0.booking.booking_type) !== "group-event");
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵproperty"]("ngIf", (ctx_r0.booking == null ? null : ctx_r0.booking.booking_type) === "group-event");
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵproperty"]("ngIf", _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵpipeBind1"](18, 12, ctx_r0.is_reserved_parking_space));
  }
}
function BookingCardComponent_ng_template_2_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵelement"](0, "img", 22);
  }
}
class BookingCardComponent extends libs_common_src_lib_async_handler_class__WEBPACK_IMPORTED_MODULE_3__.AsyncHandler {
  get for_current_user() {
    return this.booking?.user_email.toLowerCase() === (0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.currentUser)()?.email.toLowerCase();
  }
  get time_format() {
    return this._settings.time_format;
  }
  get status() {
    if (this.booking?.is_done) return 'neutral';
    if (this.booking?.status === 'approved') return 'success';
    if (this.booking?.status === 'declined') return 'error';
    if (this.booking?.status === 'cancelled') return 'error';
    if (this.booking?.status === 'tentative') return 'warning';
    return 'warning';
  }
  constructor(_dialog, _route, _org, _settings, _parking) {
    super();
    this._dialog = _dialog;
    this._route = _route;
    this._org = _org;
    this._settings = _settings;
    this._parking = _parking;
    this.show_day = false;
    this.edit = new _angular_core__WEBPACK_IMPORTED_MODULE_9__.EventEmitter();
    this.remove = new _angular_core__WEBPACK_IMPORTED_MODULE_9__.EventEmitter();
    this.end = new _angular_core__WEBPACK_IMPORTED_MODULE_9__.EventEmitter();
    this.raw_description = '';
    this.is_reserved_parking_space = this._parking.assigned_space.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.map)(space => this.booking.booking_type === 'parking' && space && this.booking.asset_id === space.id));
  }
  ngOnInit() {
    this.subscription('route.query', this._route.queryParamMap.subscribe(params => params.has('booking') && this.booking?.id === params.get('event') ? this.viewDetails() : ''));
  }
  ngOnChanges(changes) {
    if (changes.booking) {
      this.raw_description = this.removeHtmlTags(this.booking?.description);
    }
  }
  get type() {
    if (this.booking?.type === 'desk') return 'desk';
    if (this.booking?.type === 'parking') return 'drive_eta';
    return 'book';
  }
  get day() {
    const date = this.booking?.date || Date.now();
    const is_today = (0,date_fns__WEBPACK_IMPORTED_MODULE_11__.isSameDay)(Date.now(), date);
    return `${is_today ? 'Today' : (0,date_fns__WEBPACK_IMPORTED_MODULE_12__.format)(date, 'EEEE')}`;
  }
  get location() {
    const level = this._org.levelWithID(this.booking?.zones || []);
    return `${level?.display_name || level?.name || ''}`;
  }
  get period() {
    if (this.booking?.is_all_day) return 'All Day';
    const start = this.booking?.date || Date.now();
    const duration = this.booking?.duration || 60;
    const end = (0,date_fns__WEBPACK_IMPORTED_MODULE_13__.addMinutes)(start, duration);
    const dur = (0,date_fns__WEBPACK_IMPORTED_MODULE_14__.formatDuration)({
      hours: Math.floor(duration / 60),
      minutes: duration % 60
    }).replace(' hour', 'hr').replace(' minute', 'min');
    return `${(0,date_fns__WEBPACK_IMPORTED_MODULE_12__.format)(start, this.time_format)} - ${(0,date_fns__WEBPACK_IMPORTED_MODULE_12__.format)(end, this.time_format)} (${dur})`;
  }
  removeHtmlTags(html) {
    const doc = new DOMParser().parseFromString(html, 'text/html');
    return doc.body.textContent || '';
  }
  viewDetails() {
    if (!this.booking) return;
    this.timeout('open', () => {
      const view_component = this.booking.booking_type === 'group-event' ? _events_src_lib_group_event_details_modal_component__WEBPACK_IMPORTED_MODULE_6__.GroupEventDetailsModalComponent : _booking_details_modal_component__WEBPACK_IMPORTED_MODULE_2__.BookingDetailsModalComponent;
      const data = this.booking.booking_type === 'group-event' ? {
        booking: this.booking,
        concierge: false
      } : this.booking;
      const ref = this._dialog.open(view_component, {
        data
      });
      this.subscription('edit', ref.componentInstance.edit?.subscribe(() => this.edit.emit()));
      this.subscription('remove', ref.componentInstance.remove?.subscribe(() => this.remove.emit()));
      this.subscription('end', ref.componentInstance.end?.subscribe(() => this.end.emit()));
    });
  }
  static #_ = this.ɵfac = function BookingCardComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || BookingCardComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵdirectiveInject"](_angular_material_dialog__WEBPACK_IMPORTED_MODULE_15__.MatDialog), _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵdirectiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_16__.ActivatedRoute), _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵdirectiveInject"](libs_organisation_src_lib_organisation_service__WEBPACK_IMPORTED_MODULE_4__.OrganisationService), _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵdirectiveInject"](_placeos_common__WEBPACK_IMPORTED_MODULE_0__.SettingsService), _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵdirectiveInject"](_parking_service__WEBPACK_IMPORTED_MODULE_5__.ParkingService));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵdefineComponent"]({
    type: BookingCardComponent,
    selectors: [["booking-card"]],
    inputs: {
      booking: "booking",
      show_day: "show_day"
    },
    outputs: {
      edit: "edit",
      remove: "remove",
      end: "end"
    },
    features: [_angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵInheritDefinitionFeature"], _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵNgOnChangesFeature"]],
    decls: 4,
    vars: 2,
    consts: [["desk_icon", ""], ["class", "mb-2 flex items-center", 4, "ngIf"], ["name", "view-booking-details", "class", "w-full cursor-pointer overflow-hidden relative", 3, "routerLink", "queryParams", "click", 4, "ngIf"], [1, "mb-2", "flex", "items-center"], ["day", "", 4, "ngIf"], [1, "text-xs", "px-2"], ["day", ""], ["name", "view-booking-details", 1, "w-full", "cursor-pointer", "overflow-hidden", "relative", 3, "click", "routerLink", "queryParams"], [1, "w-full", "bg-base-100", "border", "border-base-300", "rounded-xl", "shadow", "py-4", "relative"], [1, "px-4", "text-lg"], [1, "flex", "mx-4", "my-2"], [3, "status"], [1, "flex", "flex-wrap", "flex-col", "sm:flex-row", "sm:divide-x", "divide-base-200-500", "py-2", "space-y-2", "sm:space-y-0"], [1, "flex", "items-center", "px-4", "max-w-[33%]"], [4, "ngIf", "ngIfElse"], [1, "mx-2", "truncate", "flex-1", "w-1/2"], ["class", "flex items-center px-4", 4, "ngIf"], [1, "absolute", "top-1/2", "right-1", "text-4xl", "-translate-y-1/2"], ["class", "absolute top-2 right-2 bg-warning/50 rounded-xl px-2 py-1 text-xs", 4, "ngIf"], [1, "flex", "items-center", "px-4"], [1, "mx-2", "truncate"], [1, "absolute", "top-2", "right-2", "bg-warning/50", "rounded-xl", "px-2", "py-1", "text-xs"], ["src", "assets/icons/desk-outline.svg", 1, "w-5", "h-5"]],
    template: function BookingCardComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtemplate"](0, BookingCardComponent_h4_0_Template, 7, 9, "h4", 1)(1, BookingCardComponent_a_1_Template, 19, 17, "a", 2)(2, BookingCardComponent_ng_template_2_Template, 1, 0, "ng-template", null, 0, _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵtemplateRefExtractor"]);
      }
      if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵproperty"]("ngIf", ctx.booking);
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵproperty"]("ngIf", ctx.booking);
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_17__.NgIf, _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_7__.IconComponent, _components_src_lib_status_pill_component__WEBPACK_IMPORTED_MODULE_8__.StatusPillComponent, _angular_common__WEBPACK_IMPORTED_MODULE_17__.AsyncPipe, _angular_common__WEBPACK_IMPORTED_MODULE_17__.DatePipe],
    styles: ["[_nghost-%COMP%] {\n                display: block;\n                width: 100%;\n                position: relative;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJvb2tpbmctY2FyZC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLGNBQWM7Z0JBQ2QsV0FBVztnQkFDWCxrQkFBa0I7WUFDdEIiLCJmaWxlIjoiYm9va2luZy1jYXJkLmNvbXBvbmVudC50cyIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgOmhvc3Qge1xuICAgICAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl19 */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvYm9va2luZ3Mvc3JjL2xpYi9ib29raW5nLWNhcmQuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxjQUFjO2dCQUNkLFdBQVc7Z0JBQ1gsa0JBQWtCO1lBQ3RCOztBQUVaLHdlQUF3ZSIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgOmhvc3Qge1xuICAgICAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl0sInNvdXJjZVJvb3QiOiIifQ== */"]
  });
}

/***/ }),

/***/ 1781:
/*!******************************************************************!*\
  !*** ./libs/bookings/src/lib/booking-details-modal.component.ts ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   BookingDetailsModalComponent: () => (/* binding */ BookingDetailsModalComponent)
/* harmony export */ });
/* harmony import */ var _home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 89204);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_material_dialog__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @angular/material/dialog */ 12587);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! date-fns */ 49675);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! date-fns */ 99134);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! date-fns */ 45726);
/* harmony import */ var libs_components_src_lib_map_locate_modal_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! libs/components/src/lib/map-locate-modal.component */ 90620);
/* harmony import */ var libs_components_src_lib_map_pin_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! libs/components/src/lib/map-pin.component */ 71865);
/* harmony import */ var libs_organisation_src_lib_organisation_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! libs/organisation/src/lib/organisation.service */ 19863);
/* harmony import */ var _booking_class__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./booking.class */ 53857);
/* harmony import */ var _bookings_fn__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./bookings.fn */ 18026);
/* harmony import */ var _desk_settings_modal_component__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./desk-settings-modal.component */ 77904);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _angular_material_progress_spinner__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @angular/material/progress-spinner */ 41134);
/* harmony import */ var _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../components/src/lib/icon.component */ 69434);
/* harmony import */ var _components_src_lib_interactive_map_component__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../components/src/lib/interactive-map.component */ 24918);
/* harmony import */ var _components_src_lib_image_carousel_component__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../components/src/lib/image-carousel.component */ 65277);
/* harmony import */ var _components_src_lib_status_pill_component__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../components/src/lib/status-pill.component */ 50907);
/* harmony import */ var _angular_material_menu__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! @angular/material/menu */ 31034);
/* harmony import */ var _angular_material_core__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! @angular/material/core */ 74646);
/* harmony import */ var _angular_material_tooltip__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! @angular/material/tooltip */ 80640);

























const _c0 = () => ({
  disable_pan: true,
  disable_zoom: true
});
function BookingDetailsModalComponent_div_2_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelement"](0, "div", 27);
  }
}
function BookingDetailsModalComponent_div_3_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](0, "div", 28);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelement"](1, "image-carousel", 29);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵproperty"]("images", ctx_r1.booking == null ? null : ctx_r1.booking.extension_data == null ? null : ctx_r1.booking.extension_data.images);
  }
}
function BookingDetailsModalComponent_div_10_button_1_div_1_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](0, "div", 35)(1, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](3, "div", 36);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtextInterpolate"](ctx_r1.booking.checked_in ? "done" : "arrow_back");
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtextInterpolate1"](" ", ctx_r1.booking.checked_in ? "Checked in" : "Check in", " ");
  }
}
function BookingDetailsModalComponent_div_10_button_1_ng_template_2_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelement"](0, "mat-spinner", 37);
  }
  if (rf & 2) {
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵproperty"]("diameter", 32);
  }
}
function BookingDetailsModalComponent_div_10_button_1_Template(rf, ctx) {
  if (rf & 1) {
    const _r3 = _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](0, "button", 33);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵlistener"]("click", function BookingDetailsModalComponent_div_10_button_1_Template_button_click_0_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵrestoreView"](_r3);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵnextContext"](2);
      return _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵresetView"](ctx_r1.toggleCheckedIn());
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtemplate"](1, BookingDetailsModalComponent_div_10_button_1_div_1_Template, 5, 2, "div", 34)(2, BookingDetailsModalComponent_div_10_button_1_ng_template_2_Template, 1, 1, "ng-template", null, 1, _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtemplateRefExtractor"]);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const loading_state_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵreference"](3);
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵclassProp"]("bg-success", ctx_r1.booking.checked_in)("text-success-content", ctx_r1.booking.checked_in);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵproperty"]("disabled", ctx_r1.checking_in);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵproperty"]("ngIf", !ctx_r1.checking_in)("ngIfElse", loading_state_r4);
  }
}
function BookingDetailsModalComponent_div_10_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](0, "div", 30);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtemplate"](1, BookingDetailsModalComponent_div_10_button_1_Template, 4, 7, "button", 31);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](2, "button", 32)(3, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtext"](4, "more_horiz");
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]()()();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵnextContext"]();
    const menu_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵreference"](43);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵproperty"]("ngIf", !ctx_r1.booking.checked_out_at && !ctx_r1.checked_out && !ctx_r1.auto_checkin && (ctx_r1.booking.state === "upcoming" || ctx_r1.booking.state === "in_progress") && ctx_r1.booking.status !== "declined");
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵproperty"]("matMenuTriggerFor", menu_r5);
  }
}
function BookingDetailsModalComponent_ng_container_36_div_5_div_13_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](0, "div", 51)(1, "div", 52)(2, "span", 45);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](4, "div", 53);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtext"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const item_r8 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtextInterpolate"](item_r8.name || "Item");
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtextInterpolate1"](" x", item_r8.quantity, " ");
  }
}
function BookingDetailsModalComponent_ng_container_36_div_5_Template(rf, ctx) {
  if (rf & 1) {
    const _r6 = _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](0, "div", 42)(1, "button", 43);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵlistener"]("click", function BookingDetailsModalComponent_ng_container_36_div_5_Template_button_click_1_listener() {
      const request_r7 = _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵrestoreView"](_r6).$implicit;
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵnextContext"](2);
      return _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵresetView"](ctx_r1.show_request[request_r7.id] = !ctx_r1.show_request[request_r7.id]);
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](2, "div", 44)(3, "div", 45);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵpipe"](5, "date");
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](6, "div", 46)(7, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtext"](8);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](9, "div", 47)(10, "app-icon", 48);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtext"](11);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]()()();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](12, "div", 49);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtemplate"](13, BookingDetailsModalComponent_ng_container_36_div_5_div_13_Template, 6, 2, "div", 50);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const request_r7 = ctx.$implicit;
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtextInterpolate1"](" Requested for ", _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵpipeBind2"](5, 18, request_r7.deliver_at, "MMM d, " + ctx_r1.time_format), " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵclassProp"]("bg-success", request_r7.state === "approved")("text-success-content", request_r7.state === "approved")("bg-warning", request_r7.state !== "approved" && request_r7.state !== "rejected")("text-warning-content", request_r7.state !== "approved" && request_r7.state !== "rejected")("bg-error", request_r7.state === "rejected")("text-error-content", request_r7.state === "rejected");
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵproperty"]("matTooltip", request_r7.state || "Tentative");
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtextInterpolate1"](" ", request_r7.state === "approved" ? "done" : request_r7.state === "rejected" ? "close" : "schedule", " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtextInterpolate1"](" ", ctx_r1.show_request[request_r7.id] ? "expand_less" : "expand_more", " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵproperty"]("@show", ctx_r1.show_request[request_r7.id] ? "show" : "hide");
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵproperty"]("ngForOf", request_r7.items);
  }
}
function BookingDetailsModalComponent_ng_container_36_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](1, "div", 38)(2, "h3", 39);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵi18n"](3, 3);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](4, "div", 40);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtemplate"](5, BookingDetailsModalComponent_ng_container_36_div_5_Template, 14, 21, "div", 41);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementContainerEnd"]();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵi18nExp"]((ctx_r1.booking.valid_assets == null ? null : ctx_r1.booking.valid_assets.length) || 0);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵi18nApply"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵproperty"]("ngForOf", ctx_r1.booking.valid_assets);
  }
}
function BookingDetailsModalComponent_ng_container_38_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelement"](1, "interactive-map", 54);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementContainerEnd"]();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵproperty"]("src", ctx_r1.level == null ? null : ctx_r1.level.map_id)("features", ctx_r1.features)("options", _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵpureFunction0"](3, _c0));
  }
}
function BookingDetailsModalComponent_button_44_Template(rf, ctx) {
  if (rf & 1) {
    const _r9 = _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](0, "button", 55);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵlistener"]("click", function BookingDetailsModalComponent_button_44_Template_button_click_0_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵrestoreView"](_r9);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵresetView"](ctx_r1.edit.emit());
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](1, "div", 56)(2, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtext"](3, "edit");
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](4, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵi18n"](5, 4);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]()()();
  }
}
function BookingDetailsModalComponent_button_45_Template(rf, ctx) {
  if (rf & 1) {
    const _r10 = _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](0, "button", 57);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵlistener"]("click", function BookingDetailsModalComponent_button_45_Template_button_click_0_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵrestoreView"](_r10);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵresetView"](ctx_r1.setDeskHeight());
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](1, "div", 56)(2, "app-icon", 58);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtext"](3, " height ");
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](4, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵi18n"](5, 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]()()();
  }
}
function BookingDetailsModalComponent_button_46_Template(rf, ctx) {
  if (rf & 1) {
    const _r11 = _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](0, "button", 57);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵlistener"]("click", function BookingDetailsModalComponent_button_46_Template_button_click_0_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵrestoreView"](_r11);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵresetView"](ctx_r1.remove.emit());
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](1, "div", 56)(2, "app-icon", 59);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtext"](3, "delete");
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](4, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵi18n"](5, 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]()()();
  }
}
function BookingDetailsModalComponent_button_47_Template(rf, ctx) {
  if (rf & 1) {
    const _r12 = _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](0, "button", 57);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵlistener"]("click", function BookingDetailsModalComponent_button_47_Template_button_click_0_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵrestoreView"](_r12);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵresetView"](ctx_r1.end.emit());
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](1, "div", 56)(2, "app-icon", 59);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtext"](3, "delete");
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](4, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵi18n"](5, 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]()()();
  }
}
class BookingDetailsModalComponent {
  get level() {
    return this._org.levelWithID(this.booking?.zones || []);
  }
  get building() {
    const building = this._org.buildings.find(bld => (this.booking?.zones || []).includes(bld.id));
    if (this._settings.get('app.use_region')) {
      const region = this._org.regions.find(region => (this.booking?.zones || []).includes(region.id) || region.id === building?.parent_id);
      if (region) return region;
    }
    return building;
  }
  get can_edit() {
    return this.booking.booking_type !== 'visitor' && this.booking.booking_type !== 'parking';
  }
  get auto_checkin() {
    return this._settings.get(`app.${this.booking?.type || 'bookings'}.auto_checkin`);
  }
  get is_checked_in() {
    return this.booking.checked_in;
  }
  get desk_height_enabled() {
    return this.booking?.type === 'desk' && this._settings.get('app.desks.height_enabled');
  }
  get is_in_progress() {
    const ts = Date.now();
    const start = this.booking?.booking_start * 1000;
    const end = this.booking?.booking_end * 1000;
    if (this.booking?.all_day) return start <= ts;
    return start <= ts && ts <= end;
  }
  get time_format() {
    return this._settings.time_format;
  }
  get booking_status() {
    if (this.booking?.is_done) return 'neutral';
    if (this.booking?.status === 'approved') return 'success';
    if (this.booking?.status === 'declined') return 'error';
    if (this.booking?.status === 'tentative') return 'warning';
    return 'warning';
  }
  constructor(_booking, _settings, _org, _dialog) {
    this._booking = _booking;
    this._settings = _settings;
    this._org = _org;
    this._dialog = _dialog;
    this.edit = new _angular_core__WEBPACK_IMPORTED_MODULE_12__.EventEmitter();
    this.remove = new _angular_core__WEBPACK_IMPORTED_MODULE_12__.EventEmitter();
    this.end = new _angular_core__WEBPACK_IMPORTED_MODULE_12__.EventEmitter();
    this.booking = this._booking;
    this.hide_map = false;
    this.checked_out = false;
    this.checking_in = false;
    this.features = [{
      location: this.booking?.extension_data?.map_id || this.booking?.asset_id,
      content: libs_components_src_lib_map_pin_component__WEBPACK_IMPORTED_MODULE_3__.MapPinComponent
    }];
    this.has_assets = !!this.booking?.linked_bookings?.find(_ => _.booking_type === 'asset-request');
  }
  get period() {
    if (this.booking?.is_all_day) return 'All Day';
    const start = this.booking?.date || Date.now();
    const duration = this.booking?.duration || 60;
    const end = (0,date_fns__WEBPACK_IMPORTED_MODULE_13__.addMinutes)(start, duration);
    const dur = (0,date_fns__WEBPACK_IMPORTED_MODULE_14__.formatDuration)({
      hours: Math.floor(duration / 60),
      minutes: duration % 60
    }).replace(' hour', 'hr').replace(' minute', 'min');
    return `${(0,date_fns__WEBPACK_IMPORTED_MODULE_15__.format)(start, this.time_format)} - ${(0,date_fns__WEBPACK_IMPORTED_MODULE_15__.format)(end, this.time_format)} (${dur})`;
  }
  toggleCheckedIn() {
    var _this = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      _this.checking_in = true;
      const bkn = _this.booking;
      const promise = (bkn.instance ? (0,_bookings_fn__WEBPACK_IMPORTED_MODULE_6__.checkinBookingInstance)(bkn.id, bkn.instance, !_this.booking.checked_in) : (0,_bookings_fn__WEBPACK_IMPORTED_MODULE_6__.checkinBooking)(_this.booking.id, !_this.booking.checked_in)).toPromise().catch(_ => {
        (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.notifyError)('Error checking in booking');
        _this.checking_in = false;
        throw _;
      });
      yield promise;
      _this.booking.checked_in = !_this.booking.checked_in;
      _this.checked_out = !_this.booking.checked_in;
      (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.notifySuccess)(`Successfully ${_this.booking.checked_in ? 'checked in' : 'ended booking'}`);
      _this.checking_in = false;
    })();
  }
  status(id) {
    const booking = this.booking.linked_bookings.find(_ => _.asset_id === id);
    if (booking.status) return booking.status;
    return booking ? booking.approved ? 'approved' : booking.rejected ? 'rejected' : 'pending' : 'pending';
  }
  viewLocation() {
    this.hide_map = true;
    const ref = this._dialog.open(libs_components_src_lib_map_locate_modal_component__WEBPACK_IMPORTED_MODULE_2__.MapLocateModalComponent, {
      maxWidth: '95vw',
      maxHeight: '95vh',
      data: {
        item: {
          id: this._booking.asset_id,
          name: this._booking.asset_name,
          map_id: this._booking.extension_data.map_id || this.booking.asset_id,
          level: this.level
        }
      }
    });
    ref.afterClosed().subscribe(() => this.hide_map = false);
  }
  setDeskHeight() {
    this._dialog.open(_desk_settings_modal_component__WEBPACK_IMPORTED_MODULE_7__.DeskSettingsModalComponent, {
      data: {
        id: this.booking.asset_ids[0] || this.booking.asset_id
      }
    });
  }
  static #_ = this.ɵfac = function BookingDetailsModalComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || BookingDetailsModalComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵdirectiveInject"](_angular_material_dialog__WEBPACK_IMPORTED_MODULE_16__.MAT_DIALOG_DATA), _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵdirectiveInject"](_placeos_common__WEBPACK_IMPORTED_MODULE_1__.SettingsService), _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵdirectiveInject"](libs_organisation_src_lib_organisation_service__WEBPACK_IMPORTED_MODULE_4__.OrganisationService), _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵdirectiveInject"](_angular_material_dialog__WEBPACK_IMPORTED_MODULE_16__.MatDialog));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵdefineComponent"]({
    type: BookingDetailsModalComponent,
    selectors: [["booking-details-modal"]],
    outputs: {
      edit: "edit",
      remove: "remove",
      end: "end"
    },
    decls: 48,
    vars: 23,
    consts: () => {
      let i18n_0;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_2102851380219026584$$LIBS_BOOKINGS_SRC_LIB_BOOKING_DETAILS_MODAL_COMPONENT_TS_0 = goog.getMsg(" Details ");
        i18n_0 = MSG_EXTERNAL_2102851380219026584$$LIBS_BOOKINGS_SRC_LIB_BOOKING_DETAILS_MODAL_COMPONENT_TS_0;
      } else {
        i18n_0 = $localize`:␟2c8ce65c566300dc9063f69c615fda2e3a6b896a␟2102851380219026584: Details `;
      }
      let i18n_1;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_31749697777503671$$LIBS_BOOKINGS_SRC_LIB_BOOKING_DETAILS_MODAL_COMPONENT_TS_1 = goog.getMsg(" Assets ({$interpolation}) ", {
          "interpolation": "\uFFFD0\uFFFD"
        }, {
          original_code: {
            "interpolation": "{{ booking.valid_assets?.length || 0 }}"
          }
        });
        i18n_1 = MSG_EXTERNAL_31749697777503671$$LIBS_BOOKINGS_SRC_LIB_BOOKING_DETAILS_MODAL_COMPONENT_TS_1;
      } else {
        i18n_1 = $localize`:␟9e3da900d415898c8ff7b522c5eecccfe4de018e␟31749697777503671: Assets (${"\uFFFD0\uFFFD"}:INTERPOLATION:) `;
      }
      let i18n_2;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_1612171114840935381$$LIBS_BOOKINGS_SRC_LIB_BOOKING_DETAILS_MODAL_COMPONENT_TS_2 = goog.getMsg("Edit booking");
        i18n_2 = MSG_EXTERNAL_1612171114840935381$$LIBS_BOOKINGS_SRC_LIB_BOOKING_DETAILS_MODAL_COMPONENT_TS_2;
      } else {
        i18n_2 = $localize`:␟53f264e5fad94a425174c18cf299eeac7482f258␟1612171114840935381:Edit booking`;
      }
      let i18n_3;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_7190557592686051728$$LIBS_BOOKINGS_SRC_LIB_BOOKING_DETAILS_MODAL_COMPONENT_TS_3 = goog.getMsg("Set Desk Height");
        i18n_3 = MSG_EXTERNAL_7190557592686051728$$LIBS_BOOKINGS_SRC_LIB_BOOKING_DETAILS_MODAL_COMPONENT_TS_3;
      } else {
        i18n_3 = $localize`:␟35729dbbde462f39a391c9abc24a3f79eebfba7a␟7190557592686051728:Set Desk Height`;
      }
      let i18n_4;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_1139994899162365077$$LIBS_BOOKINGS_SRC_LIB_BOOKING_DETAILS_MODAL_COMPONENT_TS_4 = goog.getMsg("Delete booking");
        i18n_4 = MSG_EXTERNAL_1139994899162365077$$LIBS_BOOKINGS_SRC_LIB_BOOKING_DETAILS_MODAL_COMPONENT_TS_4;
      } else {
        i18n_4 = $localize`:␟55883ef2b67c24d30f999a5ade421493fdc9e14a␟1139994899162365077:Delete booking`;
      }
      let i18n_5;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_834898868131691573$$LIBS_BOOKINGS_SRC_LIB_BOOKING_DETAILS_MODAL_COMPONENT_TS_5 = goog.getMsg("End booking");
        i18n_5 = MSG_EXTERNAL_834898868131691573$$LIBS_BOOKINGS_SRC_LIB_BOOKING_DETAILS_MODAL_COMPONENT_TS_5;
      } else {
        i18n_5 = $localize`:␟2f3dfd27ad1999e91bb66ad271f967d6e543956f␟834898868131691573:End booking`;
      }
      return [["menu", "matMenu"], ["loading_state", ""], i18n_0, i18n_1, i18n_2, i18n_3, i18n_4, i18n_5, [1, "w-[100vw]", "h-[100vh]", "sm:relative", "sm:inset-auto", "sm:w-[51rem]", "sm:h-auto", "sm:max-h-[80vh]", "bg-base-100", "sm:bg-base-200", "sm:dark:bg-neutral-600", "sm:rounded", "overflow-auto", "space-y-2", "pb-2"], [1, "sm:flex", "flex-col", "items-center", "pb-4", "max-h-screen", "sm:max-h-[80vh]", "sm:px-16", "sm:border-b", "bg-base-100", "border-base-200"], ["class", "h-8 w-full sm:hidden block", 4, "ngIf"], ["class", "bg-neutral w-full h-64 sm:rounded-b overflow-hidden", 4, "ngIf"], ["title", "", 1, "px-3", "mt-2", "text-xl", "font-medium", "w-full"], [1, "sm:flex", "items-center", "justify-between", "w-full"], [1, "flex", "m-2"], [3, "status"], ["actions", "", "class", "flex items-center space-x-2 px-2", 4, "ngIf"], [1, "sm:flex", "flex-wrap", "sm:px-12"], [1, "sm:p-4", "sm:bg-base-100", "sm:dark:bg-neutral-700", "rounded", "sm:m-2", "sm:border", "border-base-200", "flex-grow-[4]", "min-w-1/3", "sm:w-[16rem]"], [1, "px-3", "mt-2", "text-lg", "font-medium", "mb-2"], [1, "flex", "items-center", "px-2", "space-x-2"], [4, "ngIf"], ["map", "", 1, "mt-4", "sm:my-2", "h-64", "sm:h-48", "relative", "border", "border-base-200", "overflow-hidden", "rounded", "sm:bg-base-100", "m-2", "flex-grow-[3]", "min-w-1/3", "w-[calc(100%-1rem)]", "p-2", "sm:w-[16rem]", 3, "click"], ["icon", "", "matRipple", "", "mat-dialog-close", "", 1, "absolute", "top-0", "left-2", "bg-neutral", "text-white"], ["xPosition", "before"], ["mat-menu-item", "", "mat-dialog-close", "", 3, "click", 4, "ngIf"], ["mat-menu-item", "", 3, "click", 4, "ngIf"], [1, "h-8", "w-full", "sm:hidden", "block"], [1, "bg-neutral", "w-full", "h-64", "sm:rounded-b", "overflow-hidden"], [1, "w-full", "h-64", 3, "images"], ["actions", "", 1, "flex", "items-center", "space-x-2", "px-2"], ["btn", "", "matRipple", "", "class", "flex-1 h-10 border-none", 3, "bg-success", "text-success-content", "disabled", "click", 4, "ngIf"], ["icon", "", "matRipple", "", 1, "bg-secondary", "rounded", "text-white", "h-12", "w-12", 3, "matMenuTriggerFor"], ["btn", "", "matRipple", "", 1, "flex-1", "h-10", "border-none", 3, "click", "disabled"], ["class", "flex items-center space-x-2 justify-center", 4, "ngIf", "ngIfElse"], [1, "flex", "items-center", "space-x-2", "justify-center"], [1, "mr-4"], [1, "mx-auto", 3, "diameter"], [1, "mt-4", "sm:p-4", "sm:bg-base-100", "sm:dark:bg-neutral-700", "rounded", "sm:m-2", "sm:border", "border-base-200", "flex-grow-[3]", "min-w-1/3", "sm:w-[16rem]"], [1, "mx-3", "pt-2", "text-lg", "font-medium"], [1, "flex", "flex-col", "space-y-2"], ["request", "", "class", "border border-base-300 bg-base-100 rounded-xl overflow-hidden", 4, "ngFor", "ngForOf"], ["request", "", 1, "border", "border-base-300", "bg-base-100", "rounded-xl", "overflow-hidden"], ["matRipple", "", 1, "flex", "items-center", "space-x-2", "p-3", "w-full", 3, "click"], [1, "flex-1", "text-left"], [1, "text-sm"], [1, "flex", "items-center", "justify-center", "rounded-full", "w-8", "h-8", 3, "matTooltip"], [1, "flex", "items-center", "justify-center", "rounded-full", "w-8", "h-8"], [1, "text-2xl"], [1, "flex", "flex-col", "bg-base-200", "divide-y", "divide-base-100"], ["class", "flex items-center px-3 py-1 space-x-2 hover:opacity-90", 4, "ngFor", "ngForOf"], [1, "flex", "items-center", "px-3", "py-1", "space-x-2", "hover:opacity-90"], [1, "flex", "items-center", "flex-1"], [1, "rounded", "bg-success", "text-success-content", "text-xs", "px-2", "py-1"], [1, "pointer-events-none", 3, "src", "features", "options"], ["mat-menu-item", "", "mat-dialog-close", "", 3, "click"], [1, "flex", "items-center", "space-x-2", "text-base"], ["mat-menu-item", "", 3, "click"], ["className", "material-symbols-rounded"], [1, "text-error"]];
    },
    template: function BookingDetailsModalComponent_Template(rf, ctx) {
      if (rf & 1) {
        const _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵgetCurrentView"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](0, "div", 8)(1, "div", 9);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtemplate"](2, BookingDetailsModalComponent_div_2_Template, 1, 0, "div", 10)(3, BookingDetailsModalComponent_div_3_Template, 2, 1, "div", 11);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](4, "h3", 12);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtext"](5);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](6, "div", 13)(7, "div", 14)(8, "status-pill", 15);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtext"](9);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtemplate"](10, BookingDetailsModalComponent_div_10_Template, 5, 2, "div", 16);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](11, "div", 17)(12, "div", 18)(13, "h3", 19);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵi18n"](14, 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](15, "div", 20)(16, "app-icon");
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtext"](17, "event");
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](18, "div");
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtext"](19);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵpipe"](20, "date");
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](21, "div", 20)(22, "app-icon");
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtext"](23, "schedule");
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](24, "div");
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtext"](25);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](26, "div", 20)(27, "app-icon");
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtext"](28, "map");
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](29, "div");
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtext"](30);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](31, "div", 20)(32, "app-icon");
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtext"](33, "place");
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](34, "div");
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtext"](35);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]()()();
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtemplate"](36, BookingDetailsModalComponent_ng_container_36_Template, 6, 2, "ng-container", 21);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](37, "button", 22);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵlistener"]("click", function BookingDetailsModalComponent_Template_button_click_37_listener() {
          _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵrestoreView"](_r1);
          return _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵresetView"](ctx.viewLocation());
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtemplate"](38, BookingDetailsModalComponent_ng_container_38_Template, 2, 4, "ng-container", 21);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](39, "button", 23)(40, "app-icon");
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtext"](41, "close");
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]()()();
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](42, "mat-menu", 24, 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtemplate"](44, BookingDetailsModalComponent_button_44_Template, 6, 0, "button", 25)(45, BookingDetailsModalComponent_button_45_Template, 6, 0, "button", 26)(46, BookingDetailsModalComponent_button_46_Template, 6, 0, "button", 26)(47, BookingDetailsModalComponent_button_47_Template, 6, 0, "button", 26);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]();
      }
      if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵproperty"]("ngIf", !(ctx.booking == null ? null : ctx.booking.extension_data == null ? null : ctx.booking.extension_data.images == null ? null : ctx.booking.extension_data.images.length));
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵproperty"]("ngIf", ctx.booking == null ? null : ctx.booking.extension_data == null ? null : ctx.booking.extension_data.images == null ? null : ctx.booking.extension_data.images.length);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵclassProp"]("pt-4", !(ctx.booking == null ? null : ctx.booking.extension_data == null ? null : ctx.booking.extension_data.images));
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtextInterpolate1"](" ", ctx.booking.title, " ");
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵproperty"]("status", ctx.booking_status);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtextInterpolate1"](" ", ctx.period, " ");
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵproperty"]("ngIf", !ctx.booking.is_done);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"](9);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtextInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵpipeBind2"](20, 20, ctx.booking.date, "EEEE, dd LLLL y"));
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"](6);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtextInterpolate"](ctx.period);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"](5);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtextInterpolate2"](" ", (ctx.level == null ? null : ctx.level.display_name) || (ctx.level == null ? null : ctx.level.name), ", ", ctx.booking.asset_name || ctx.booking.asset_id, " ");
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"](5);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtextInterpolate2"](" ", (ctx.building == null ? null : ctx.building.display_name) || (ctx.building == null ? null : ctx.building.name), " ", (ctx.building == null ? null : ctx.building.address) ? ", " + ctx.building.address : "", " ");
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵproperty"]("ngIf", ctx.has_assets);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵproperty"]("ngIf", !ctx.hide_map);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"](6);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵproperty"]("ngIf", ctx.can_edit);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵproperty"]("ngIf", ctx.is_checked_in && ctx.desk_height_enabled);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵproperty"]("ngIf", !ctx.is_in_progress);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵproperty"]("ngIf", ctx.is_in_progress);
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_17__.NgForOf, _angular_common__WEBPACK_IMPORTED_MODULE_17__.NgIf, _angular_material_dialog__WEBPACK_IMPORTED_MODULE_16__.MatDialogClose, _angular_material_progress_spinner__WEBPACK_IMPORTED_MODULE_18__.MatProgressSpinner, _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_8__.IconComponent, _components_src_lib_interactive_map_component__WEBPACK_IMPORTED_MODULE_9__.InteractiveMapComponent, _components_src_lib_image_carousel_component__WEBPACK_IMPORTED_MODULE_10__.ImageCarouselComponent, _components_src_lib_status_pill_component__WEBPACK_IMPORTED_MODULE_11__.StatusPillComponent, _angular_material_menu__WEBPACK_IMPORTED_MODULE_19__.MatMenu, _angular_material_menu__WEBPACK_IMPORTED_MODULE_19__.MatMenuItem, _angular_material_menu__WEBPACK_IMPORTED_MODULE_19__.MatMenuTrigger, _angular_material_core__WEBPACK_IMPORTED_MODULE_20__.MatRipple, _angular_material_tooltip__WEBPACK_IMPORTED_MODULE_21__.MatTooltip, _angular_common__WEBPACK_IMPORTED_MODULE_17__.DatePipe]
  });
}

/***/ }),

/***/ 18379:
/*!*******************************************************!*\
  !*** ./libs/bookings/src/lib/booking-form.service.ts ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   BookingFormService: () => (/* binding */ BookingFormService)
/* harmony export */ });
/* harmony import */ var _home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 89204);
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! @angular/router */ 95072);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var _placeos_ts_client__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @placeos/ts-client */ 35713);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! date-fns */ 33240);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! date-fns */ 99908);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! date-fns */ 49675);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! date-fns */ 45726);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! rxjs */ 90521);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! rxjs */ 68824);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! rxjs */ 71536);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! rxjs */ 97405);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! rxjs */ 26320);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! rxjs */ 68757);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! rxjs/operators */ 7841);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! rxjs/operators */ 47504);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! rxjs/operators */ 19803);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! rxjs/operators */ 71963);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! rxjs/operators */ 66000);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! rxjs/operators */ 35443);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! rxjs/operators */ 8627);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! rxjs/operators */ 29314);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! rxjs/operators */ 57871);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! rxjs/operators */ 33602);
/* harmony import */ var libs_organisation_src_lib_organisation_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! libs/organisation/src/lib/organisation.service */ 19863);
/* harmony import */ var _booking_class__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./booking.class */ 53857);
/* harmony import */ var _booking_utilities__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./booking.utilities */ 17141);
/* harmony import */ var _bookings_fn__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./bookings.fn */ 18026);
/* harmony import */ var _desk_questions_modal_component__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./desk-questions-modal.component */ 67254);
/* harmony import */ var libs_payments_src_lib_payments_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! libs/payments/src/lib/payments.service */ 34525);
/* harmony import */ var _booking_link_modal_component__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./booking-link-modal.component */ 84089);
/* harmony import */ var libs_assets_src_lib_assets_fn__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! libs/assets/src/lib/assets.fn */ 75204);
/* harmony import */ var libs_assets_src_lib_asset_state_service__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! libs/assets/src/lib/asset-state.service */ 46088);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_material_dialog__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! @angular/material/dialog */ 12587);

























const BOOKING_TYPES = ['desk', 'parking', 'locker', 'catering'];
class BookingFormService extends _placeos_common__WEBPACK_IMPORTED_MODULE_1__.AsyncHandler {
  get view() {
    return this._view.getValue();
  }
  get booking() {
    return this._booking.getValue();
  }
  resourceUserName(id) {
    return this._resource_use[id];
  }
  newForm(booking = new _booking_class__WEBPACK_IMPORTED_MODULE_4__.Booking({
    all_day: this._settings.get('app.bookings.all_day_default')
  })) {
    this.form.reset();
    this.form.patchValue((0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_2__.cleanObject)({
      ...booking,
      ...booking.extension_data
    }, [null, undefined, '']));
    this.subscription('form_change', this.form.valueChanges.subscribe(() => {
      const {
        date,
        duration
      } = this.form.getRawValue();
      this._assets.setOptions({
        date,
        duration
      });
      this.storeForm();
    }));
    this.timeout('date', () => {
      this.form.patchValue({
        date: booking.date,
        duration: booking.duration
      });
    });
    this._booking.next(new _booking_class__WEBPACK_IMPORTED_MODULE_4__.Booking(booking));
    this._options.next({
      type: this._options.getValue().type
    });
  }
  constructor(_router, _settings, _org, _dialog, _payments, _assets) {
    super();
    this._router = _router;
    this._settings = _settings;
    this._org = _org;
    this._dialog = _dialog;
    this._payments = _payments;
    this._assets = _assets;
    this._view = new rxjs__WEBPACK_IMPORTED_MODULE_12__.BehaviorSubject('form');
    this._options = new rxjs__WEBPACK_IMPORTED_MODULE_12__.BehaviorSubject({
      type: 'desk'
    });
    this._booking = new rxjs__WEBPACK_IMPORTED_MODULE_12__.BehaviorSubject(null);
    this._resource_use = {};
    this._loading = new rxjs__WEBPACK_IMPORTED_MODULE_12__.BehaviorSubject('');
    this.last_success = new _booking_class__WEBPACK_IMPORTED_MODULE_4__.Booking(JSON.parse(sessionStorage.getItem('PLACEOS.last_booked_booking') || '{}'));
    this.loading = this._loading.asObservable();
    this.options = this._options.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.shareReplay)(1));
    this.form = (0,_booking_utilities__WEBPACK_IMPORTED_MODULE_5__.generateBookingForm)();
    this.resources = (0,rxjs__WEBPACK_IMPORTED_MODULE_14__.combineLatest)([this._org.active_building, this.options.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_15__.distinctUntilKeyChanged)('type'))]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_16__.debounceTime)(300), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_17__.switchMap)(([bld, {
      type
    }]) => {
      if (!bld) return (0,rxjs__WEBPACK_IMPORTED_MODULE_18__.of)([]);
      switch (type) {
        case 'desk':
          this._loading.next(`Loading desks...`);
          return this.loadResourceList('desks');
        case 'parking':
          this._loading.next(`Loading parking spaces...`);
          return this.loadResourceList('parking-spaces');
        case 'locker':
          this._loading.next(`Loading lockers...`);
          return this.loadResourceList('lockers');
      }
      return (0,rxjs__WEBPACK_IMPORTED_MODULE_18__.of)([]);
    }), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_19__.tap)(() => this._loading.next(``)), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.shareReplay)(1));
    this.features = this.resources.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_20__.map)(resource => {
      const list = [];
      for (const {
        features
      } of resource) {
        features instanceof Array ? features.forEach(_ => list.push(_)) : null;
      }
      return (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.unique)(list).sort((a, b) => a.localeCompare(b));
    }), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.shareReplay)(1));
    this.booking_rules = (0,rxjs__WEBPACK_IMPORTED_MODULE_14__.combineLatest)([this._org.building_list, this._options]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_17__.switchMap)(([list, {
      type
    }]) => Promise.all(list.map(bld => (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_2__.showMetadata)(bld.id, `${type}_booking_rules`).toPromise()))), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_20__.map)(building_rules => {
      const mapping = {};
      for (const rules of building_rules) {
        mapping[rules.id] = rules.details instanceof Array ? rules.details : [];
      }
      return mapping;
    }), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.shareReplay)(1));
    this.available_resources = (0,rxjs__WEBPACK_IMPORTED_MODULE_14__.combineLatest)([this.options, this.resources, this.booking_rules, (0,rxjs__WEBPACK_IMPORTED_MODULE_21__.merge)(this.form.get('date').valueChanges, (0,rxjs__WEBPACK_IMPORTED_MODULE_22__.timer)(1000)), (0,rxjs__WEBPACK_IMPORTED_MODULE_21__.merge)(this.form.get('duration').valueChanges, (0,rxjs__WEBPACK_IMPORTED_MODULE_22__.timer)(1000))]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_23__.filter)(() => this.form.getRawValue().date > 0 && this.form.getRawValue().duration > 0), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_16__.debounceTime)(500), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_19__.tap)(([{
      type
    }]) => this._loading.next(`Checking ${type} availability...`)), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_17__.switchMap)(([options, resources, restrictions]) => {
      var {
        all_day,
        date,
        duration,
        user
      } = this.form.getRawValue();
      if (all_day) {
        date = (0,date_fns__WEBPACK_IMPORTED_MODULE_24__.startOfDay)(date).valueOf();
        duration = 24 * 60 - 1;
      }
      return (0,_bookings_fn__WEBPACK_IMPORTED_MODULE_6__.bookedResourceList)({
        period_start: (0,date_fns__WEBPACK_IMPORTED_MODULE_25__.getUnixTime)(date),
        period_end: (0,date_fns__WEBPACK_IMPORTED_MODULE_25__.getUnixTime)((0,date_fns__WEBPACK_IMPORTED_MODULE_26__.addMinutes)(date, duration)),
        type: options.type,
        zones: options.zone_id || (this._settings.get('app.use_region') ? this._org.region?.id : this._org.building?.id) || this._org.organisation.id
      }).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_20__.map)(booked_ids => {
        const start = this.form.getRawValue().date;
        const end = (0,date_fns__WEBPACK_IMPORTED_MODULE_26__.addMinutes)(start, this.form.getRawValue().duration).valueOf();
        this._resource_use = {};
        for (const id of booked_ids) {
          this._resource_use[id] = ' ';
        }
        const available = resources.filter(asset => {
          const is_restricted = (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.rulesForResource)({
            date,
            duration,
            resource: asset,
            host: user || (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.currentUser)()
          }, restrictions[asset.zone?.id] || restrictions[asset.zone?.parent_id] || restrictions[this._org.building.id] || []).hidden;
          return !is_restricted && (!asset.groups?.length || asset.groups.some(grp => (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.currentUser)().groups.includes(grp))) && asset.bookable !== false && (!options.features || options.features?.every(_ => asset.features.includes(_))) && (!options.zone_id || options.zone_id === asset.zone?.id || options.zone_id === asset.zone?.parent_id) && !booked_ids.includes(asset.id);
        });
        console.log('Resources:', resources, available);
        return available;
      }, (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_27__.catchError)(_ => (0,rxjs__WEBPACK_IMPORTED_MODULE_18__.of)([]))));
    }), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_19__.tap)(_ => this._loading.next('')), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.shareReplay)(1));
    this.grouped_availability = (0,rxjs__WEBPACK_IMPORTED_MODULE_14__.combineLatest)([this.options, this.available_resources]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_20__.map)(([options, resource]) => {
      const groups = [];
      const asset_list = [...resource].sort((a, b) => a.zone?.id?.localeCompare(b.zone?.id));
      const members = options.members?.length ? options.members : [(0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.currentUser)()];
      while (asset_list.length) {
        const group = [];
        let asset = asset_list.pop();
        while (group.length < members.length) {
          if (group.length && !group.find(_ => _.zone?.id === asset.zone?.id)) {
            break;
          }
          group.push(asset);
          asset = asset_list.pop();
        }
        if (group.length < members.length) continue;
        groups.push(group);
      }
      return groups;
    }));
    this.subscription('router.bookings', this._router.events.subscribe(booking => {
      if (booking instanceof _angular_router__WEBPACK_IMPORTED_MODULE_28__.NavigationEnd && !booking.url.includes('book') && !BOOKING_TYPES.find(_ => booking.url.includes(_))) {
        this.clearForm();
      }
    }));
    this._org.initialised.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_29__.first)(_ => _)).subscribe(() => this.setOptions({}));
  }
  setView(value) {
    this._view.next(value);
  }
  setOptions(value) {
    this._options.next({
      ...this._options.getValue(),
      ...value
    });
  }
  setFeature(feature, enable) {
    if (!feature?.length) return;
    const features = this._options.getValue()?.features || [];
    if (enable && !features.includes(feature)) features.push(feature);
    if (!enable && features.includes(feature)) features.splice(features.findIndex(e => e === feature), 1);
    this.setOptions({
      features
    });
  }
  resetForm() {
    if (!sessionStorage.getItem('PLACEOS.booking_form')) {
      return this.newForm();
    }
    const booking = this._booking.getValue();
    this.form.reset({
      user: (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.currentUser)(),
      booked_by: (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.currentUser)()
    });
    this.form.patchValue((0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_2__.cleanObject)({
      ...(booking || {}),
      ...(booking?.extension_data || {})
    }, [null, undefined, '']));
    this._options.next({
      type: this._options.getValue().type
    });
  }
  clearForm() {
    sessionStorage.removeItem('PLACEOS.booking_form');
    sessionStorage.removeItem('PLACEOS.booking_form_options');
    this.newForm();
  }
  storeForm() {
    sessionStorage.setItem('PLACEOS.booking_form', JSON.stringify({
      ...this._booking.getValue(),
      ...(0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_2__.cleanObject)(this.form.getRawValue() || {}, [null, undefined, ''])
    }));
    sessionStorage.setItem('PLACEOS.booking_form_filters', JSON.stringify(this._options.getValue() || {}));
  }
  loadForm() {
    this.form.reset({
      user: (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.currentUser)(),
      booked_by: (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.currentUser)()
    });
    const data = JSON.parse(sessionStorage.getItem('PLACEOS.booking_form') || '{}');
    const booking = new _booking_class__WEBPACK_IMPORTED_MODULE_4__.Booking(data);
    this._booking.next(booking);
    const booking_data = (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_2__.cleanObject)({
      ...data,
      ...(booking || {}),
      ...(booking?.extension_data || {})
    }, [null, undefined, '']);
    this.form.patchValue(booking_data);
    this.setOptions({
      ...JSON.parse(sessionStorage.getItem('PLACEOS.booking_form_filters') || '{}')
    });
  }
  clearOldState() {
    sessionStorage.removeItem('PLACEOS.last_booked_booking');
    this.last_success = new _booking_class__WEBPACK_IMPORTED_MODULE_4__.Booking();
  }
  openBookingLinkModal(force = false) {
    this.form.markAllAsTouched();
    if (!this.form.valid && !force) return;
    const event = new _booking_class__WEBPACK_IMPORTED_MODULE_4__.Booking({
      ...this.booking,
      ...this.form.getRawValue()
    });
    this._dialog.open(_booking_link_modal_component__WEBPACK_IMPORTED_MODULE_9__.BookingLinkModalComponent, {
      data: event
    });
  }
  confirmPost() {
    var _this = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      yield _this.checkQuestions();
      const options = _this._options.getValue();
      const value = _this.form.getRawValue();
      let content = `Would you like to book the ${options.type} ${value.asset_name} for ${(0,date_fns__WEBPACK_IMPORTED_MODULE_30__.format)(value.date, 'dd MMM yyyy')}${value.duration < 12 * 60 ? ' at ' + (0,date_fns__WEBPACK_IMPORTED_MODULE_30__.format)(value.date, 'h:mm a') : ''}`;
      if (options.group) {
        content = `${content}.<br>You group members will be assigned desks nearby your selected desk.`;
      }
      const details = yield (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.openConfirmModal)({
        title: `Book ${options.type}`,
        content,
        icon: {
          content: 'event_available'
        }
      }, _this._dialog);
      if (details?.reason !== 'done') throw 'User cancelled';
      details.loading('Performing booking request...');
      if (options.group) {
        yield _this.postFormForGroup().catch(_ => {
          (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.notifyError)(JSON.stringify(_));
          details.close();
          throw _;
        });
      } else yield _this.postForm().catch(_ => {
        (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.notifyError)(JSON.stringify(_));
        details.close();
        throw _;
      });
      details.close();
    })();
  }
  postForm(ignore_check = false) {
    var _this2 = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      if (!_this2.form) throw 'No form for booking';
      if (!_this2.form.valid) throw `Some form fields are invalid. [${(0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.getInvalidFields)(_this2.form).join(', ')}]`;
      _this2.form.patchValue({
        booking_type: _this2.form.getRawValue().booking_type || _this2._options.getValue().type
      });
      let value = _this2.form.getRawValue();
      let booking = _this2._booking.getValue() || new _booking_class__WEBPACK_IMPORTED_MODULE_4__.Booking();
      if (!ignore_check) {
        yield _this2.checkResourceAvailable({
          ...booking,
          ...value
        }, _this2._options.getValue().type);
      }
      if (_this2._payments.payment_module) {
        const receipt = yield _this2._payments.makePayment({
          type: _this2._options.getValue().type,
          resource_name: value.asset_name,
          date: value.date,
          duration: value.duration,
          all_day: value.all_day
        });
        if (!receipt?.success) return;
        value.extension_data = {
          invoice: receipt,
          invoice_id: receipt.invoice_id
        };
      }
      if (!value.zones?.length && _this2._booking.getValue().zones?.length) {
        value.zones = _this2._booking.getValue().zones;
      }
      _this2._loading.next('Saving booking');
      delete value.booking_asset;
      if (value.all_day) {
        value.date = (0,date_fns__WEBPACK_IMPORTED_MODULE_24__.startOfDay)(value.date).valueOf();
        value.duration = 24 * 60 - 1;
      }
      const {
        event_id,
        parent_id
      } = value;
      delete value.event_id;
      delete value.parent_id;
      const resources = value.resources || [];
      const zones = resources[0]?.zone ? (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.unique)([_this2._org.organisation.id, _this2._org.region?.id, resources[0]?.zone?.parent_id, resources[0]?.zone?.id]) : [_this2._org.organisation.id, _this2._org.region?.id];
      const q = event_id ? {
        ical_uid: value.ical_uid,
        event_id: event_id
      } : parent_id ? {
        booking_id: parent_id
      } : {};
      if (booking.instance && !value.update_master) {
        q.instance = true;
        q.start_time = booking.booking_start;
      }
      const result = yield (0,_bookings_fn__WEBPACK_IMPORTED_MODULE_6__.saveBooking)(new _booking_class__WEBPACK_IMPORTED_MODULE_4__.Booking({
        ..._this2._options.getValue(),
        ...value,
        description: value.asset_name || value.description,
        user_name: value.user?.name || value.user_name,
        user_email: value.user?.email || value.user_email,
        extension_data: {
          ...(value.extension_data || {}),
          group: value.group,
          phone: value.phone,
          department: value.user?.department || (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.currentUser)()?.department
        },
        approved: !_this2._settings.get('app.bookings.no_approval'),
        zones: (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.unique)([...zones, ...(value.zones || [])]).filter(_ => _)
      }), q).toPromise().catch(e => {
        _this2._loading.next('');
        throw e?.error || e;
      });
      if (value.assets?.length || booking.extension_data.assets?.length) {
        const requests = yield (0,libs_assets_src_lib_assets_fn__WEBPACK_IMPORTED_MODULE_10__.validateAssetRequestsForResource)({
          ...result,
          from_booking: true
        }, {
          date: value.date,
          duration: value.duration,
          all_day: value.all_day,
          host: value.booked_by_email,
          zones: (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.unique)([...zones, ...(value.zones || [])]).filter(_ => _)
        }, value.assets).catch(e => {
          console.error("Couldn't update asset requests", e);
          if (e?.status === 409) {
            (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.notifyError)('Some assets are already booked for the selected time');
          }
          _this2._loading.next('');
          throw e?.error || e;
        });
        if (!requests) throw 'Unable to validate asset requests';
        yield requests();
      }
      _this2._loading.next('');
      const {
        booking_type
      } = value;
      _this2.clearForm();
      _this2.form?.patchValue({
        booking_type
      });
      _this2.last_success = result;
      sessionStorage.setItem('PLACEOS.last_booked_booking', JSON.stringify(result));
      _this2.setView('success');
      return result;
    })();
  }
  postFormForGroup() {
    var _this3 = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      const {
        members,
        group,
        type
      } = _this3._options.getValue();
      if (!group) throw 'No group available to book for';
      const extra_members = members.filter(_ => _.email !== (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.currentUser)().email);
      if (extra_members.length <= 0) throw 'No members in your group to book for.';
      const form = _this3.form.getRawValue();
      const asset_list = yield _this3.available_resources.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_31__.take)(1)).toPromise();
      const active_resource = asset_list.find(_ => _.id === form.asset_id || _.map_id === form.asset_id);
      const level = _this3._org.levelWithID([active_resource.zone?.id]);
      const resources = [active_resource, ...(yield _this3._getNearbyResources(level.map_id, form.asset_id, asset_list, extra_members.length))];
      const group_members = (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.unique)([(0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.currentUser)(), ...extra_members], 'email');
      const available = yield Promise.all(group_members.map((_, idx) => _this3.checkResourceAvailable({
        ...form,
        asset_id: resources[idx].map_id || resources[idx].id,
        user_email: _.email
      }, type)));
      const unavailable = group_members.filter((_, idx) => !available[idx]);
      const group_name = `${(0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.currentUser)().email}[${(0,date_fns__WEBPACK_IMPORTED_MODULE_30__.format)(Date.now(), 'yyyy-MM-dd')}]`;
      let id = '';
      for (let i = 0; i < group_members.length; i++) {
        if (!available[i]) continue;
        const user = group_members[i];
        const asset = resources[i];
        _this3.form.patchValue({
          ...form,
          parent_id: id,
          user: user,
          user_email: user.email,
          user_id: user.id,
          asset_id: asset?.id,
          asset_name: asset.name,
          description: asset.name,
          map_id: asset?.map_id || asset?.id,
          group: group_name,
          zones: (asset.zone ? (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.unique)([_this3._org.organisation.id, _this3._org.region?.id, asset?.zone?.parent_id, asset?.zone?.id]) : [_this3._org.organisation.id, _this3._org.region?.id]).filter(_ => _)
        });
        const bkn = yield _this3.postForm(true);
        if (bkn.id && !id) id = bkn.id;
      }
      if (unavailable.length) {
        (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.notifyWarn)(`Some members of your group already have a desk booking. [${unavailable.map(_ => _.name || _.email)?.join(', ')}]`);
      }
    })();
  }
  checkQuestions() {
    var _this4 = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      if (_this4._settings.get('app.desks.ignore_questions') !== false) return;
      const ref = _this4._dialog.open(_desk_questions_modal_component__WEBPACK_IMPORTED_MODULE_7__.DeskQuestionsModalComponent);
      const result = yield Promise.race([ref.componentInstance.event.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_29__.first)(_ => _.reason === 'done')).toPromise(), ref.afterClosed().toPromise()]);
      if (result?.reason !== 'done') throw 'User cancelled';
      const form = ref.componentInstance.form.getRawValue();
      for (const key in form) {
        if (form[key]) throw 'User failed questionaire';
      }
      ref.close();
    })();
  }
  /** Check if the given resource is available for the selected user to book */
  checkResourceAvailable({
    id,
    asset_id,
    date,
    duration,
    user_email
  }, type) {
    var _this5 = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      if (!user_email) throw 'No user was selected to book for';
      if (type === 'group-event') return true;
      const bookings = yield (0,_bookings_fn__WEBPACK_IMPORTED_MODULE_6__.queryBookings)({
        period_start: (0,date_fns__WEBPACK_IMPORTED_MODULE_25__.getUnixTime)(date),
        period_end: (0,date_fns__WEBPACK_IMPORTED_MODULE_25__.getUnixTime)(date + duration * 60 * 1000),
        type,
        email: user_email,
        limit: 1000
      }).toPromise();
      let active_bookings = bookings.filter(_ => _.status !== 'declined' && _.status !== 'cancelled' && !_.rejected);
      if (active_bookings.find(_ => _.asset_id === asset_id && id !== _.id)) {
        if (asset_id.includes('@')) {
          throw `${asset_id} already has an invite for the selected time`;
        } else {
          throw `${asset_id} is not available at the selected time`;
        }
      }
      const allowed_bookings = _this5._settings.get(`app.bookings.allowed_daily_${type}_count`) ?? 1;
      if (allowed_bookings > 0 && active_bookings.filter(_ => _.user_email.toLowerCase() === (user_email || (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.currentUser)()?.email).toLowerCase() && _.id !== id).length >= allowed_bookings) {
        const current = user_email === (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.currentUser)()?.email;
        throw `${current ? 'You' : user_email} already ${current ? 'have' : 'has'} a booking at the selected time`;
      }
      return true;
    })();
  }
  loadResourceList(type) {
    const use_region = this._settings.get('app.use_region');
    const map_metadata = _ => (_?.metadata[type]?.details instanceof Array ? _.metadata[type]?.details : []).map(d => type !== 'lockers' ? {
      ...d,
      id: d.id || d.map_id,
      zone: _.zone
    } : d.lockers?.map(locker => ({
      ...locker,
      bank_id: d.id,
      zone: _.zone
    })) || []);
    const id = use_region ? this._org.building.parent_id : this._org.building.id;
    if (use_region) {
      const id = this._org.building.parent_id;
      const buildings = this._org.buildings.filter(_ => _.parent_id === id);
      return (0,rxjs__WEBPACK_IMPORTED_MODULE_32__.forkJoin)(buildings.map(_ => (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_2__.listChildMetadata)(_.id, {
        name: type
      }).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_20__.map)(data => (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.flatten)(data.map(map_metadata)))))).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_20__.map)(_ => (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.flatten)(_)));
    }
    return (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_2__.listChildMetadata)(id, {
      name: type
    }).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_20__.map)(data => (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.flatten)(data.map(map_metadata))));
  }
  _getNearbyResources(map_url, id, resources, count) {
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      const nearby_resources = [];
      let asset_list = resources.filter(_ => _.id !== id && _.map_id !== id);
      for (let i = 0; i < count; i++) {
        const item = yield (0,_booking_utilities__WEBPACK_IMPORTED_MODULE_5__.findNearbyFeature)(map_url, id, asset_list.map(_ => _.map_id || _.id));
        if (item) {
          nearby_resources.push(resources.find(_ => _.id === item || _.map_id === item));
          asset_list = asset_list.filter(_ => _.id !== item && _.map_id !== item);
        }
      }
      return nearby_resources;
    })();
  }
  static #_ = this.ɵfac = function BookingFormService_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || BookingFormService)(_angular_core__WEBPACK_IMPORTED_MODULE_33__["ɵɵinject"](_angular_router__WEBPACK_IMPORTED_MODULE_28__.Router), _angular_core__WEBPACK_IMPORTED_MODULE_33__["ɵɵinject"](_placeos_common__WEBPACK_IMPORTED_MODULE_1__.SettingsService), _angular_core__WEBPACK_IMPORTED_MODULE_33__["ɵɵinject"](libs_organisation_src_lib_organisation_service__WEBPACK_IMPORTED_MODULE_3__.OrganisationService), _angular_core__WEBPACK_IMPORTED_MODULE_33__["ɵɵinject"](_angular_material_dialog__WEBPACK_IMPORTED_MODULE_34__.MatDialog), _angular_core__WEBPACK_IMPORTED_MODULE_33__["ɵɵinject"](libs_payments_src_lib_payments_service__WEBPACK_IMPORTED_MODULE_8__.PaymentsService), _angular_core__WEBPACK_IMPORTED_MODULE_33__["ɵɵinject"](libs_assets_src_lib_asset_state_service__WEBPACK_IMPORTED_MODULE_11__.AssetStateService));
  };
  static #_2 = this.ɵprov = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_33__["ɵɵdefineInjectable"]({
    token: BookingFormService,
    factory: BookingFormService.ɵfac,
    providedIn: 'root'
  });
}

/***/ }),

/***/ 84089:
/*!***************************************************************!*\
  !*** ./libs/bookings/src/lib/booking-link-modal.component.ts ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   BookingLinkModalComponent: () => (/* binding */ BookingLinkModalComponent)
/* harmony export */ });
/* harmony import */ var _angular_material_dialog__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @angular/material/dialog */ 12587);
/* harmony import */ var libs_common_src_lib_settings_service__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! libs/common/src/lib/settings.service */ 14233);
/* harmony import */ var libs_common_src_lib_calendar_links__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! libs/common/src/lib/calendar-links */ 44571);
/* harmony import */ var _booking_class__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./booking.class */ 53857);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../components/src/lib/icon.component */ 69434);
/* harmony import */ var _angular_material_core__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @angular/material/core */ 74646);
/* harmony import */ var _components_src_lib_safe_pipe__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../components/src/lib/safe.pipe */ 26781);
/* harmony import */ var _components_src_lib_sanitise_pipe__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../components/src/lib/sanitise.pipe */ 54616);












class BookingLinkModalComponent {
  constructor(_event, _settings) {
    this._event = _event;
    this._settings = _settings;
    this.outlook_link = (0,libs_common_src_lib_calendar_links__WEBPACK_IMPORTED_MODULE_1__.generateMicrosoftCalendarLink)(this._event);
    this.google_link = (0,libs_common_src_lib_calendar_links__WEBPACK_IMPORTED_MODULE_1__.generateGoogleCalendarLink)(this._event);
    this.ical_link = (0,libs_common_src_lib_calendar_links__WEBPACK_IMPORTED_MODULE_1__.generateCalendarFileLink)(this._event);
  }
  static #_ = this.ɵfac = function BookingLinkModalComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || BookingLinkModalComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵdirectiveInject"](_angular_material_dialog__WEBPACK_IMPORTED_MODULE_7__.MAT_DIALOG_DATA), _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵdirectiveInject"](libs_common_src_lib_settings_service__WEBPACK_IMPORTED_MODULE_0__.SettingsService));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵdefineComponent"]({
    type: BookingLinkModalComponent,
    selectors: [["booking-link-modal"]],
    decls: 22,
    vars: 12,
    consts: () => {
      let i18n_0;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_4015832758698516701$$LIBS_BOOKINGS_SRC_LIB_BOOKING_LINK_MODAL_COMPONENT_TS_0 = goog.getMsg("Create in Outlook");
        i18n_0 = MSG_EXTERNAL_4015832758698516701$$LIBS_BOOKINGS_SRC_LIB_BOOKING_LINK_MODAL_COMPONENT_TS_0;
      } else {
        i18n_0 = $localize`:␟34c16b14ad0e33db574c8bea543e66e766aa3a01␟4015832758698516701:Create in Outlook`;
      }
      let i18n_1;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_3788591245559456526$$LIBS_BOOKINGS_SRC_LIB_BOOKING_LINK_MODAL_COMPONENT_TS_1 = goog.getMsg("Create in Google Calendar");
        i18n_1 = MSG_EXTERNAL_3788591245559456526$$LIBS_BOOKINGS_SRC_LIB_BOOKING_LINK_MODAL_COMPONENT_TS_1;
      } else {
        i18n_1 = $localize`:␟f745484670e6b6bbb8a1c327c222e665fb25b863␟3788591245559456526:Create in Google Calendar`;
      }
      let i18n_2;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_4894641609416495396$$LIBS_BOOKINGS_SRC_LIB_BOOKING_LINK_MODAL_COMPONENT_TS_2 = goog.getMsg("Download iCal File");
        i18n_2 = MSG_EXTERNAL_4894641609416495396$$LIBS_BOOKINGS_SRC_LIB_BOOKING_LINK_MODAL_COMPONENT_TS_2;
      } else {
        i18n_2 = $localize`:␟1af54061e7f4bcfb1048ffaa05c9b8f7c4b41679␟4894641609416495396:Download iCal File`;
      }
      return [i18n_0, i18n_1, i18n_2, [1, "p-4", "w-full", "pb-2"], [1, "flex", "flex-col", "items-center", "space-y-4", "p-4", "relative"], ["btn", "", "matRipple", "", "target", "_blank", "rel", "noopener noreferer", 1, "flex", "items-center", "p-2", "space-x-2", "pr-4", "w-64", "rounded", "inverse", 3, "href"], ["src", "assets/icons/outlook.svg", 1, "w-6"], ["src", "assets/icons/gcal.svg", 1, "w-6"], [1, "text-xl"], ["icon", "", "mat-dialog-close", "", 1, "absolute", "top-2", "right-0"]];
    },
    template: function BookingLinkModalComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](0, "div", 3);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](1, "Add event to your calendar");
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](2, "div", 4)(3, "a", 5);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpipe"](4, "sanitize");
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelement"](5, "img", 6);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](6, "span");
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵi18n"](7, 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](8, "a", 5);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpipe"](9, "sanitize");
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelement"](10, "img", 7);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](11, "span");
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵi18n"](12, 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](13, "a", 5);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpipe"](14, "safe");
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](15, "app-icon", 8);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](16, "download");
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](17, "span");
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵi18n"](18, 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]()()();
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](19, "button", 9)(20, "app-icon");
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](21, "close");
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]()();
      }
      if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("href", _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpipeBind2"](4, 3, ctx.outlook_link, "url"), _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵsanitizeUrl"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](5);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("href", _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpipeBind2"](9, 6, ctx.google_link, "url"), _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵsanitizeUrl"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](5);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("href", _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpipeBind2"](14, 9, ctx.ical_link, "url"), _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵsanitizeUrl"]);
      }
    },
    dependencies: [_angular_material_dialog__WEBPACK_IMPORTED_MODULE_7__.MatDialogClose, _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_3__.IconComponent, _angular_material_core__WEBPACK_IMPORTED_MODULE_8__.MatRipple, _components_src_lib_safe_pipe__WEBPACK_IMPORTED_MODULE_4__.SafePipe, _components_src_lib_sanitise_pipe__WEBPACK_IMPORTED_MODULE_5__.SanitizePipe],
    styles: ["[_nghost-%COMP%] {\n                position: relative;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJvb2tpbmctbGluay1tb2RhbC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLGtCQUFrQjtZQUN0QiIsImZpbGUiOiJib29raW5nLWxpbmstbW9kYWwuY29tcG9uZW50LnRzIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICA6aG9zdCB7XG4gICAgICAgICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgICAgICAgfVxuICAgICAgICAiXX0= */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvYm9va2luZ3Mvc3JjL2xpYi9ib29raW5nLWxpbmstbW9kYWwuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxrQkFBa0I7WUFDdEI7O0FBRVosd1lBQXdZIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICA6aG9zdCB7XG4gICAgICAgICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgICAgICAgfVxuICAgICAgICAiXSwic291cmNlUm9vdCI6IiJ9 */"]
  });
}

/***/ }),

/***/ 53857:
/*!************************************************!*\
  !*** ./libs/bookings/src/lib/booking.class.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Booking: () => (/* binding */ Booking),
/* harmony export */   RecurrenceDays: () => (/* binding */ RecurrenceDays)
/* harmony export */ });
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! date-fns */ 49675);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! date-fns */ 99908);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! date-fns */ 5647);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! date-fns */ 1874);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! date-fns */ 33240);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! date-fns */ 56441);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! date-fns */ 31257);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! date-fns */ 29533);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! date-fns */ 91543);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! date-fns */ 55882);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! date-fns */ 83680);
/* harmony import */ var libs_assets_src_lib_asset_request_class__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! libs/assets/src/lib/asset-request.class */ 33747);



const IGNORE_EXT_KEYS = ['user', 'booked_by', 'resources', 'assets', 'members'];
var RecurrenceDays;
(function (RecurrenceDays) {
  RecurrenceDays[RecurrenceDays["SUNDAY"] = 64] = "SUNDAY";
  RecurrenceDays[RecurrenceDays["MONDAY"] = 32] = "MONDAY";
  RecurrenceDays[RecurrenceDays["TUESDAY"] = 16] = "TUESDAY";
  RecurrenceDays[RecurrenceDays["WEDNESDAY"] = 8] = "WEDNESDAY";
  RecurrenceDays[RecurrenceDays["THURSDAY"] = 4] = "THURSDAY";
  RecurrenceDays[RecurrenceDays["FRIDAY"] = 2] = "FRIDAY";
  RecurrenceDays[RecurrenceDays["SATURDAY"] = 1] = "SATURDAY";
})(RecurrenceDays || (RecurrenceDays = {}));
/** General purpose booking class */
class Booking {
  get group() {
    return this.extension_data.group || '';
  }
  get is_all_day() {
    return this.all_day || this.duration >= 12 * 60;
  }
  get valid_assets() {
    if (this._b_valid_cache_expiry > Date.now() && this._b_valid_asset_cache.length) {
      return this._b_valid_asset_cache;
    }
    const list = this.linked_bookings;
    this._b_valid_asset_cache = (this.extension_data.assets || []).map(request => new libs_assets_src_lib_asset_request_class__WEBPACK_IMPORTED_MODULE_1__.AssetRequest({
      ...request,
      event: this
    })).filter(request => request.deliver_at < this.date_end).map(request => {
      const booking = list.find(_ => _.extension_data.request_id === request.id);
      if (booking) {
        request.state = booking.approved ? 'approved' : booking.rejected ? 'rejected' : 'pending';
      }
      return request;
    });
    this._b_valid_cache_expiry = (0,date_fns__WEBPACK_IMPORTED_MODULE_2__.addMinutes)(Date.now(), 5).valueOf();
    return this._b_valid_asset_cache;
  }
  constructor(data = {}) {
    this._b_valid_asset_cache = [];
    this._b_valid_cache_expiry = 0;
    this.id = data.id || '';
    this.parent_id = data.parent_id || '';
    this.asset_id = data.asset_id || '';
    this.asset_ids = data.asset_ids || [data.asset_id].filter(_ => _);
    this.asset_name = data.asset_name || data.extension_data?.asset_name || data.description || data.asset_id || '';
    this.zones = data.zones || [];
    this.booking_start = Math.floor(data.date / 1000) || data.booking_start || (0,date_fns__WEBPACK_IMPORTED_MODULE_3__.getUnixTime)((0,date_fns__WEBPACK_IMPORTED_MODULE_4__.roundToNearestMinutes)((0,date_fns__WEBPACK_IMPORTED_MODULE_2__.addMinutes)(Date.now(), 5), {
      nearestTo: 5
    }));
    this.booking_end = Math.floor(data.date / 1000) + data.duration * 60 || data.booking_end || (0,date_fns__WEBPACK_IMPORTED_MODULE_3__.getUnixTime)((0,date_fns__WEBPACK_IMPORTED_MODULE_2__.addMinutes)(this.booking_start * 1000, data.duration || 60));
    this.booking_type = data.booking_type || ' ';
    this.type = data.type || data.booking_type || 'booking';
    this.date = data.date || this.booking_start * 1000 || Date.now();
    this.duration = data.duration || Math.abs((0,date_fns__WEBPACK_IMPORTED_MODULE_5__.differenceInMinutes)(this.booking_start * 1000, this.booking_end * 1000)) || 60;
    this.date_end = this.booking_end * 1000 || this.date + this.duration * 60 * 1000;
    this.timezone = data.timezone || Intl.DateTimeFormat().resolvedOptions().timeZone;
    this.user_email = data.user_email || '';
    this.user_id = data.user_id || '';
    this.user_name = data.user_name || '';
    this.title = data.title ?? (this.booking_type ? `${(0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.capitalizeFirstLetter)(this.booking_type)} Booking`.trim() : '');
    this.description = data.description || '';
    this.checked_in = !!data.checked_in;
    this.rejected = !!data.rejected;
    this.approved = !!data.approved;
    this.deleted = !!data.deleted;
    this.booked_by_id = data.booked_by_id || '';
    this.booked_by_name = data.booked_by_name || '';
    this.booked_by_email = data.booked_by_email || '';
    this.approver_id = data.approver_id || '';
    this.approver_email = data.approver_email || '';
    this.approver_name = data.approver_name || '';
    this.extension_data = data.extension_data || {};
    this.access = !!data.extension_data?.access;
    this.event_id = data.event_id;
    this.permission = (data.permission || 'PRIVATE').toUpperCase();
    this.attendees = data.attendees || data.guests || data.members || [];
    this.tags = data.tags || data.extension_data?.tags || [];
    this.images = data.images || [];
    this.all_day = data.all_day || this.duration >= 24 * 60;
    this.induction = data.induction || undefined;
    if (this.all_day) {
      this.date = (0,date_fns__WEBPACK_IMPORTED_MODULE_6__.startOfDay)(this.date).getTime();
      this.duration = Math.max(24 * 60 - 1, this.duration - (this.duration % 24 * 60 === 0 ? 1 : 0));
      this.date_end = (0,date_fns__WEBPACK_IMPORTED_MODULE_7__.endOfDay)((0,date_fns__WEBPACK_IMPORTED_MODULE_2__.addMinutes)(this.date, this.duration - 1).valueOf()).getTime();
    }
    this.checked_out_at = data.checked_out_at;
    this.checked_in_at = data.checked_in_at;
    this.linked_event = data.linked_event || null;
    this.linked_bookings = data.linked_bookings || [];
    this.images = data.images || [];
    this.status = this.checked_out_at > 0 ? 'ended' : this.rejected || this.deleted ? 'declined' : this.approved ? 'approved' : 'tentative';
    this.process_state = data.process_state || 'pending';
    this.recurrence_type = data.recurrence_type || 'none';
    this.recurrence_days = data.recurrence_days;
    this.recurrence_nth_of_month = data.recurrence_nth_of_month;
    this.recurrence_interval = data.recurrence_interval;
    this.recurrence_end = data.recurrence_end;
    this.instance = data.instance;
    for (const key in data) {
      if (!(key in this) && !IGNORE_EXT_KEYS.includes(key) && data[key]) {
        this.extension_data[key] = data[key] || this.extension_data[key];
      }
    }
    this.extension_data.assets = (this.extension_data.assets || []).map(i => new libs_assets_src_lib_asset_request_class__WEBPACK_IMPORTED_MODULE_1__.AssetRequest({
      ...i,
      event: this,
      date: this.date
    }));
    this.extension_data.tags = data.tags || [];
    if (this.extension_data.request) {
      this.extension_data.request = new libs_assets_src_lib_asset_request_class__WEBPACK_IMPORTED_MODULE_1__.AssetRequest({
        ...this.extension_data.request,
        event: this,
        date: this.date
      });
    }
  }
  toJSON() {
    const data = {
      ...this
    };
    if (!this.id) delete data.id;
    data.extension_data.assets = data.extension_data.assets.map(i => new libs_assets_src_lib_asset_request_class__WEBPACK_IMPORTED_MODULE_1__.AssetRequest({
      ...i,
      event: null
    }));
    if (data.extension_data.request) {
      data.extension_data.request = new libs_assets_src_lib_asset_request_class__WEBPACK_IMPORTED_MODULE_1__.AssetRequest({
        ...data.extension_data.request,
        event: null
      });
    }
    if (!data.parent_id) delete data.parent_id;
    data.zones = data.zones.filter(_ => _);
    delete data.date;
    delete data.duration;
    (0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.removeEmptyFields)(data);
    return data;
  }
  get location() {
    return this.extension_data?.location || this.description;
  }
  /** Whether the booking occurs today */
  get is_today() {
    return (0,date_fns__WEBPACK_IMPORTED_MODULE_8__.isSameDay)(this.date, new Date());
  }
  /** Whether booking is done */
  get is_done() {
    const start = new Date();
    const end = this.all_day ? (0,date_fns__WEBPACK_IMPORTED_MODULE_9__.addHours)(this.date, 24) : (0,date_fns__WEBPACK_IMPORTED_MODULE_2__.addMinutes)(this.date, this.duration);
    const checked_out = (this.checked_out_at || this.extension_data.checked_out_at || 0) * 1000;
    let end_time = end.getTime();
    if (checked_out && Date.now() > checked_out) return true;
    return (0,date_fns__WEBPACK_IMPORTED_MODULE_10__.isAfter)(start, new Date(end_time));
  }
  /** Status of the booking */
  get state() {
    const now = new Date();
    const date = this.date;
    if ((0,date_fns__WEBPACK_IMPORTED_MODULE_11__.isBefore)(now, (0,date_fns__WEBPACK_IMPORTED_MODULE_12__.add)(date, {
      minutes: -15
    }))) return 'future';
    if ((0,date_fns__WEBPACK_IMPORTED_MODULE_11__.isBefore)(now, date)) return 'upcoming';
    if ((0,date_fns__WEBPACK_IMPORTED_MODULE_11__.isBefore)(now, (0,date_fns__WEBPACK_IMPORTED_MODULE_12__.add)(date, {
      minutes: 15
    }))) return 'started';
    if ((0,date_fns__WEBPACK_IMPORTED_MODULE_11__.isBefore)(now, (0,date_fns__WEBPACK_IMPORTED_MODULE_12__.add)(date, {
      minutes: this.duration
    }))) return 'in_progress';
    return 'done';
  }
}

/***/ }),

/***/ 17141:
/*!****************************************************!*\
  !*** ./libs/bookings/src/lib/booking.utilities.ts ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   findNearbyFeature: () => (/* binding */ findNearbyFeature),
/* harmony export */   generateBookingForm: () => (/* binding */ generateBookingForm),
/* harmony export */   newBookingFromCalendarEvent: () => (/* binding */ newBookingFromCalendarEvent)
/* harmony export */ });
/* harmony import */ var _home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 89204);
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/forms */ 34456);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var libs_events_src_lib_validators__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! libs/events/src/lib/validators */ 90690);
/* harmony import */ var _placeos_svg_viewer__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @placeos/svg-viewer */ 50304);
/* harmony import */ var _booking_class__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./booking.class */ 53857);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! date-fns */ 5647);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! date-fns */ 49675);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! date-fns */ 1874);







function setBookingAsset(form, resource) {
  if (!resource) return form.patchValue({
    asset_id: undefined
  });
  form.patchValue({
    asset_id: resource.id,
    asset_name: resource.name,
    map_id: resource.map_id || resource.id,
    description: resource.name,
    zones: resource.zone ? [resource.zone?.parent_id, resource.zone?.id] : [],
    booking_asset: resource
  }, {
    emitEvent: false
  });
}
function generateBookingForm(booking = new _booking_class__WEBPACK_IMPORTED_MODULE_4__.Booking()) {
  const form = new _angular_forms__WEBPACK_IMPORTED_MODULE_5__.FormGroup({
    id: new _angular_forms__WEBPACK_IMPORTED_MODULE_5__.FormControl(booking.id || ''),
    parent_id: new _angular_forms__WEBPACK_IMPORTED_MODULE_5__.FormControl(booking.parent_id || ''),
    event_id: new _angular_forms__WEBPACK_IMPORTED_MODULE_5__.FormControl(booking.event_id || ''),
    ical_uid: new _angular_forms__WEBPACK_IMPORTED_MODULE_5__.FormControl(booking.extension_data.ical_uid || ''),
    date: new _angular_forms__WEBPACK_IMPORTED_MODULE_5__.FormControl(booking.date, [_angular_forms__WEBPACK_IMPORTED_MODULE_5__.Validators.required]),
    date_end: new _angular_forms__WEBPACK_IMPORTED_MODULE_5__.FormControl(booking.date_end),
    all_day: new _angular_forms__WEBPACK_IMPORTED_MODULE_5__.FormControl(booking.all_day ?? false),
    name: new _angular_forms__WEBPACK_IMPORTED_MODULE_5__.FormControl(booking.extension_data.name || booking.asset_name || ''),
    duration: new _angular_forms__WEBPACK_IMPORTED_MODULE_5__.FormControl(booking.duration, [libs_events_src_lib_validators__WEBPACK_IMPORTED_MODULE_2__.endInFuture]),
    booking_type: new _angular_forms__WEBPACK_IMPORTED_MODULE_5__.FormControl(booking.booking_type),
    zones: new _angular_forms__WEBPACK_IMPORTED_MODULE_5__.FormControl(booking.zones),
    title: new _angular_forms__WEBPACK_IMPORTED_MODULE_5__.FormControl(booking.title),
    description: new _angular_forms__WEBPACK_IMPORTED_MODULE_5__.FormControl(booking.description),
    booking_asset: new _angular_forms__WEBPACK_IMPORTED_MODULE_5__.FormControl(null),
    resources: new _angular_forms__WEBPACK_IMPORTED_MODULE_5__.FormControl([]),
    company: new _angular_forms__WEBPACK_IMPORTED_MODULE_5__.FormControl(''),
    asset_id: new _angular_forms__WEBPACK_IMPORTED_MODULE_5__.FormControl(booking.asset_id, [_angular_forms__WEBPACK_IMPORTED_MODULE_5__.Validators.required]),
    asset_name: new _angular_forms__WEBPACK_IMPORTED_MODULE_5__.FormControl(booking.description),
    assets: new _angular_forms__WEBPACK_IMPORTED_MODULE_5__.FormControl(booking.extension_data?.assets || []),
    attendees: new _angular_forms__WEBPACK_IMPORTED_MODULE_5__.FormControl(booking.attendees || []),
    map_id: new _angular_forms__WEBPACK_IMPORTED_MODULE_5__.FormControl(booking.extension_data?.map_id),
    featured: new _angular_forms__WEBPACK_IMPORTED_MODULE_5__.FormControl(booking.extension_data?.featured || false),
    user: new _angular_forms__WEBPACK_IMPORTED_MODULE_5__.FormControl((0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.currentUser)()),
    user_id: new _angular_forms__WEBPACK_IMPORTED_MODULE_5__.FormControl(booking.user_id),
    group: new _angular_forms__WEBPACK_IMPORTED_MODULE_5__.FormControl(booking.group),
    user_email: new _angular_forms__WEBPACK_IMPORTED_MODULE_5__.FormControl(booking.user_email),
    user_name: new _angular_forms__WEBPACK_IMPORTED_MODULE_5__.FormControl(booking.user_name),
    timezone: new _angular_forms__WEBPACK_IMPORTED_MODULE_5__.FormControl(booking.timezone || ''),
    booked_by: new _angular_forms__WEBPACK_IMPORTED_MODULE_5__.FormControl((0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.currentUser)()),
    booked_by_id: new _angular_forms__WEBPACK_IMPORTED_MODULE_5__.FormControl(booking.booked_by_id),
    booked_by_email: new _angular_forms__WEBPACK_IMPORTED_MODULE_5__.FormControl(booking.booked_by_email),
    secondary_resource: new _angular_forms__WEBPACK_IMPORTED_MODULE_5__.FormControl(booking.extension_data?.other_asset_type || booking.extension_data?.secondary_resource),
    location: new _angular_forms__WEBPACK_IMPORTED_MODULE_5__.FormControl(booking.extension_data.location || ''),
    attendance_type: new _angular_forms__WEBPACK_IMPORTED_MODULE_5__.FormControl(booking.extension_data.attendance_type || 'ANY'),
    phone: new _angular_forms__WEBPACK_IMPORTED_MODULE_5__.FormControl(booking.extension_data.phone || ''),
    permission: new _angular_forms__WEBPACK_IMPORTED_MODULE_5__.FormControl(booking.permission || 'PRIVATE'),
    images: new _angular_forms__WEBPACK_IMPORTED_MODULE_5__.FormControl(booking.images || []),
    tags: new _angular_forms__WEBPACK_IMPORTED_MODULE_5__.FormControl(booking.tags || []),
    plate_number: new _angular_forms__WEBPACK_IMPORTED_MODULE_5__.FormControl(booking.extension_data.plate_number || ''),
    recurrence_type: new _angular_forms__WEBPACK_IMPORTED_MODULE_5__.FormControl(booking.recurrence_type || 'none'),
    recurrence_days: new _angular_forms__WEBPACK_IMPORTED_MODULE_5__.FormControl(booking.recurrence_days),
    recurrence_nth_of_month: new _angular_forms__WEBPACK_IMPORTED_MODULE_5__.FormControl(booking.recurrence_nth_of_month),
    recurrence_interval: new _angular_forms__WEBPACK_IMPORTED_MODULE_5__.FormControl(booking.recurrence_interval),
    recurrence_end: new _angular_forms__WEBPACK_IMPORTED_MODULE_5__.FormControl(booking.recurrence_end),
    notes: new _angular_forms__WEBPACK_IMPORTED_MODULE_5__.FormControl(booking.extension_data.notes || ''),
    update_master: new _angular_forms__WEBPACK_IMPORTED_MODULE_5__.FormControl(false)
  });
  form.valueChanges.subscribe(v => {
    if (form.getRawValue().date < Date.now() && form.value.id) {
      form.get('date')?.disable({
        emitEvent: false
      });
    } else {
      form.get('date')?.enable({
        emitEvent: false
      });
    }
  });
  form.controls.user.valueChanges.subscribe(user => {
    if (!user) return;
    form.patchValue({
      user: user,
      user_id: user?.id,
      user_email: user?.email,
      user_name: user?.name
    }, {
      emitEvent: false
    });
  });
  _placeos_common__WEBPACK_IMPORTED_MODULE_1__.current_user.subscribe(user => {
    if (!user) return;
    form.patchValue({
      booked_by: user,
      booked_by_id: user?.id,
      booked_by_email: user?.email,
      name: user?.name
    }, {
      emitEvent: false
    });
  });
  form.controls.resources.valueChanges.subscribe(resources => setBookingAsset(form, (resources || [])[0]));
  form.controls.duration.valueChanges.subscribe(duration => {
    form.patchValue({
      date_end: (0,date_fns__WEBPACK_IMPORTED_MODULE_6__.roundToNearestMinutes)((0,date_fns__WEBPACK_IMPORTED_MODULE_7__.addMinutes)(form.getRawValue().date, duration), {
        nearestTo: 5,
        roundingMethod: 'ceil'
      }).valueOf()
    }, {
      emitEvent: false
    });
  });
  form.controls.date_end.valueChanges.subscribe(date => {
    if (date < (0,date_fns__WEBPACK_IMPORTED_MODULE_7__.addMinutes)(form.getRawValue().date, 30).valueOf()) {
      form.patchValue({
        date_end: (0,date_fns__WEBPACK_IMPORTED_MODULE_6__.roundToNearestMinutes)((0,date_fns__WEBPACK_IMPORTED_MODULE_7__.addMinutes)(form.getRawValue().date, 30), {
          nearestTo: 5,
          roundingMethod: 'ceil'
        }).valueOf(),
        duration: 30
      }, {
        emitEvent: false
      });
    } else {
      form.patchValue({
        duration: (0,date_fns__WEBPACK_IMPORTED_MODULE_8__.differenceInMinutes)(date, form.getRawValue().date)
      }, {
        emitEvent: false
      });
    }
  });
  form.controls.date.valueChanges.subscribe(date => {
    form.patchValue({
      date_end: (0,date_fns__WEBPACK_IMPORTED_MODULE_6__.roundToNearestMinutes)((0,date_fns__WEBPACK_IMPORTED_MODULE_7__.addMinutes)(date, form.value.duration), {
        nearestTo: 5,
        roundingMethod: 'ceil'
      }).valueOf()
    }, {
      emitEvent: false
    });
    if (date < Date.now() && !form.value.id) {
      form.patchValue({
        date: (0,date_fns__WEBPACK_IMPORTED_MODULE_6__.roundToNearestMinutes)(Date.now(), {
          nearestTo: 5,
          roundingMethod: 'ceil'
        }).valueOf()
      }, {
        emitEvent: false
      });
    }
  });
  if (booking.state === 'started') form.get('date').disable();
  return form;
}
function findNearbyFeature(_x, _x2) {
  return _findNearbyFeature.apply(this, arguments);
}
function _findNearbyFeature() {
  _findNearbyFeature = (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* (map_url, centered_at, desk_ids = []) {
    const element = document.createElement('div');
    element.style.position = 'absolute';
    element.style.top = '-9999px';
    element.style.width = '1000px';
    element.style.height = '1000px';
    document.body.appendChild(element);
    const id = yield (0,_placeos_svg_viewer__WEBPACK_IMPORTED_MODULE_3__.createViewer)({
      url: map_url,
      element
    });
    const viewer = (0,_placeos_svg_viewer__WEBPACK_IMPORTED_MODULE_3__.getViewer)(id);
    const point = (typeof centered_at === 'string' ? viewer.mappings[centered_at] : centered_at) || {
      x: 0.5,
      y: 0.5
    };
    let dist = 10;
    let closest = '';
    for (const desk of desk_ids) {
      const {
        x,
        y
      } = viewer.mappings[desk] || {
        x: 2,
        y: 2
      };
      const d = Math.sqrt((x - point.x) * (x - point.x) + (y - point.y) * (y - point.y));
      if (d < dist) {
        dist = d;
        closest = desk;
      }
    }
    document.body.removeChild(element);
    (0,_placeos_svg_viewer__WEBPACK_IMPORTED_MODULE_3__.removeViewer)(id);
    return closest;
  });
  return _findNearbyFeature.apply(this, arguments);
}
function newBookingFromCalendarEvent(event) {
  return new _booking_class__WEBPACK_IMPORTED_MODULE_4__.Booking({
    id: event.id,
    user_email: event.host,
    asset_id: event.system?.id,
    asset_name: event.system?.display_name || event.system?.name,
    booking_type: 'room',
    approved: event.status === 'approved',
    extension_data: {
      ...event
    }
  });
}

/***/ }),

/***/ 18026:
/*!**********************************************!*\
  !*** ./libs/bookings/src/lib/bookings.fn.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   approveBooking: () => (/* binding */ approveBooking),
/* harmony export */   approveBookingInstance: () => (/* binding */ approveBookingInstance),
/* harmony export */   bookedResourceList: () => (/* binding */ bookedResourceList),
/* harmony export */   bookingAddGuest: () => (/* binding */ bookingAddGuest),
/* harmony export */   bookingRemoveGuest: () => (/* binding */ bookingRemoveGuest),
/* harmony export */   checkinBooking: () => (/* binding */ checkinBooking),
/* harmony export */   checkinBookingAttendee: () => (/* binding */ checkinBookingAttendee),
/* harmony export */   checkinBookingGuest: () => (/* binding */ checkinBookingGuest),
/* harmony export */   checkinBookingInstance: () => (/* binding */ checkinBookingInstance),
/* harmony export */   createBooking: () => (/* binding */ createBooking),
/* harmony export */   createBookingsForEvent: () => (/* binding */ createBookingsForEvent),
/* harmony export */   isResourceAvailable: () => (/* binding */ isResourceAvailable),
/* harmony export */   queryAllBookings: () => (/* binding */ queryAllBookings),
/* harmony export */   queryBookingGuests: () => (/* binding */ queryBookingGuests),
/* harmony export */   queryBookings: () => (/* binding */ queryBookings),
/* harmony export */   queryPagedBookings: () => (/* binding */ queryPagedBookings),
/* harmony export */   queryResourceAvailability: () => (/* binding */ queryResourceAvailability),
/* harmony export */   rejectBooking: () => (/* binding */ rejectBooking),
/* harmony export */   rejectBookingInstance: () => (/* binding */ rejectBookingInstance),
/* harmony export */   removeBooking: () => (/* binding */ removeBooking),
/* harmony export */   removeBookingInstance: () => (/* binding */ removeBookingInstance),
/* harmony export */   saveBooking: () => (/* binding */ saveBooking),
/* harmony export */   setBookingState: () => (/* binding */ setBookingState),
/* harmony export */   showBooking: () => (/* binding */ showBooking),
/* harmony export */   updateBooking: () => (/* binding */ updateBooking),
/* harmony export */   updateBookingInductionStatus: () => (/* binding */ updateBookingInductionStatus),
/* harmony export */   updateBookingInstance: () => (/* binding */ updateBookingInstance)
/* harmony export */ });
/* harmony import */ var _home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 89204);
/* harmony import */ var _placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @placeos/ts-client */ 35713);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! rxjs */ 71536);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! rxjs/operators */ 35443);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! rxjs/operators */ 29314);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! rxjs/operators */ 71963);
/* harmony import */ var libs_common_src_lib_api__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! libs/common/src/lib/api */ 38385);
/* harmony import */ var _booking_class__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./booking.class */ 53857);
/* harmony import */ var libs_users_src_lib_user_class__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! libs/users/src/lib/user.class */ 93693);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! date-fns */ 99908);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! date-fns */ 49675);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @placeos/common */ 22797);









const BOOKINGS_ENDPOINT = `/api/staff/v1/bookings`;
/**
 * Get a single page of bookings
 * @param q Parameters to pass to the API request
 */
function queryBookings(q) {
  const query = (0,libs_common_src_lib_api__WEBPACK_IMPORTED_MODULE_2__.toQueryString)(q);
  return (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.get)(`${BOOKINGS_ENDPOINT}${query ? '?' + query : ''}`).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.map)(list => list.map(item => new _booking_class__WEBPACK_IMPORTED_MODULE_3__.Booking(item))), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.catchError)(_ => (0,rxjs__WEBPACK_IMPORTED_MODULE_8__.of)([])));
}
/**
 * List resources that are booked within the given parameters
 * @param q Parameters to pass to the API request
 */
function bookedResourceList(q) {
  const query = (0,libs_common_src_lib_api__WEBPACK_IMPORTED_MODULE_2__.toQueryString)(q);
  return (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.get)(`${BOOKINGS_ENDPOINT}/booked${query ? '?' + query : ''}`).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.map)(list => list), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.catchError)(_ => (0,rxjs__WEBPACK_IMPORTED_MODULE_8__.of)([])));
}
/**
 * List bookings with link to next page of bookings
 * @param q Parameters to pass to the API request
 */
function queryPagedBookings(q) {
  return (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.query)({
    query_params: q,
    fn: item => new _booking_class__WEBPACK_IMPORTED_MODULE_3__.Booking(item),
    endpoint: BOOKINGS_ENDPOINT,
    path: ''
  });
}
/**
 * List all bookings
 * @param q Parameters to pass to the API request
 */
function queryAllBookings(q) {
  return (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.query)({
    query_params: q,
    fn: item => new _booking_class__WEBPACK_IMPORTED_MODULE_3__.Booking(item),
    endpoint: BOOKINGS_ENDPOINT,
    path: ''
  }).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.switchMap)( /*#__PURE__*/function () {
    var _ref = (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* ({
      data,
      next
    }) {
      let list = [...data];
      while (next) {
        const resp = yield next().toPromise();
        data = resp.data;
        next = resp.next;
        list = [...list, ...data];
      }
      return list;
    });
    return function (_x) {
      return _ref.apply(this, arguments);
    };
  }()), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.catchError)(_ => (0,rxjs__WEBPACK_IMPORTED_MODULE_8__.of)([])));
}
/**
 * Get booking details
 * @param id ID of the booking to grab
 * @param q Parameters to pass to the API request
 */
function showBooking(id) {
  return (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.get)(`${BOOKINGS_ENDPOINT}/${encodeURIComponent(id)}`).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.map)(item => new _booking_class__WEBPACK_IMPORTED_MODULE_3__.Booking(item)));
}
/**
 * Create new booking and add it to the database
 * @param data New booking fields
 */
function createBooking(data, q) {
  const query = (0,libs_common_src_lib_api__WEBPACK_IMPORTED_MODULE_2__.toQueryString)(q);
  return (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.post)(`${BOOKINGS_ENDPOINT}${query ? '?' + query : ''}`, data).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.map)(item => new _booking_class__WEBPACK_IMPORTED_MODULE_3__.Booking(item)));
}
/**
 * Update an existing booking
 * @param id ID of the booking to update
 * @param data New values for booking fields
 * @param method HTTP verb to use with API request
 */
function updateBooking(id, data, method = 'patch') {
  return (method === 'patch' ? _placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.patch : _placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.put)(`${BOOKINGS_ENDPOINT}/${encodeURIComponent(id)}`, data).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.map)(item => new _booking_class__WEBPACK_IMPORTED_MODULE_3__.Booking(item)));
}
/**
 * Update the induction status of an existing booking
 * @param id ID of the booking to update
 * @param status New induction status of the booking
 */
function updateBookingInductionStatus(id, status) {
  return (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.post)(`${BOOKINGS_ENDPOINT}/${encodeURIComponent(id)}/update_induction?induction=${encodeURIComponent(status)}`, {}).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.map)(item => new _booking_class__WEBPACK_IMPORTED_MODULE_3__.Booking(item)));
}
/**
 * Update instance of an existing booking series
 * @param id ID of the booking to update
 * @param start_time Unix seconds of the start time of the booking
 * @param data New values for booking fields
 * @param method HTTP verb to use with API request
 */
function updateBookingInstance(id, start_time, data, method = 'patch') {
  return (method === 'patch' ? _placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.patch : _placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.put)(`${BOOKINGS_ENDPOINT}/${encodeURIComponent(id)}/instance/${start_time}`, data).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.map)(item => new _booking_class__WEBPACK_IMPORTED_MODULE_3__.Booking(item)));
}
/**
 * Save changes to or create a booking
 * @param data State of the booking
 * @param q Parameters to pass to the API request
 */
const saveBooking = (data, q) => {
  const id = data.id;
  delete data.id;
  const instance = q?.instance;
  if (q) delete q.instance;
  return id ? instance ? updateBookingInstance(id, data.instance, data) : updateBooking(id, data) : createBooking(data, q);
};
/**
 * Remove booking from the database
 * @param id ID of the booking to remove
 */
function removeBooking(id, q = {}) {
  if (q.instance) {
    return removeBookingInstance(id, q.start_time);
  }
  return (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.del)(`${BOOKINGS_ENDPOINT}/${encodeURIComponent(id)}`, {
    response_type: 'void'
  });
}
/**
 * Remove instance of an existing booking series
 * @param id ID of the booking to update
 * @param start_time Unix seconds of the start time of the booking
 */
function removeBookingInstance(id, start_time) {
  return (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.del)(`${BOOKINGS_ENDPOINT}/${encodeURIComponent(id)}/instance/${start_time}`, {
    response_type: 'void'
  });
}
/**
 * Set the approval state of the booking to `approved`
 * @param id ID of the booking to approve
 * @param system_id Associated system to approve
 */
function approveBooking(id) {
  return (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.post)(`${BOOKINGS_ENDPOINT}/${encodeURIComponent(id)}/approve`, '').pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.map)(item => new _booking_class__WEBPACK_IMPORTED_MODULE_3__.Booking(item)));
}
/**
 * Set the approval state of the booking instance to `approved`
 * @param id ID of the booking to reject
 * @param start_time Start time of the booking instance
 */
function approveBookingInstance(id, start_time) {
  return (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.post)(`${BOOKINGS_ENDPOINT}/${encodeURIComponent(id)}/approve`, '').pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.map)(item => new _booking_class__WEBPACK_IMPORTED_MODULE_3__.Booking(item)));
}
/**
 * Set the approval state of the booking to `rejected`
 * @param id ID of the booking to reject
 * @param system_id Associated system to reject
 */
function rejectBooking(id) {
  return (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.post)(`${BOOKINGS_ENDPOINT}/${encodeURIComponent(id)}/reject`, '').pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.map)(item => new _booking_class__WEBPACK_IMPORTED_MODULE_3__.Booking(item)));
}
/**
 * Set the approval state of the booking instance to `rejected`
 * @param id ID of the booking to reject
 * @param start_time Start time of the booking instance
 */
function rejectBookingInstance(id, start_time) {
  return (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.post)(`${BOOKINGS_ENDPOINT}/${encodeURIComponent(id)}/reject`, '').pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.map)(item => new _booking_class__WEBPACK_IMPORTED_MODULE_3__.Booking(item)));
}
function setBookingState(id, state, utm_source) {
  const query = (0,libs_common_src_lib_api__WEBPACK_IMPORTED_MODULE_2__.toQueryString)({
    state,
    utm_source
  });
  return (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.post)(`${BOOKINGS_ENDPOINT}/${encodeURIComponent(id)}/update_state${query ? '?' + query : ''}`, {}).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.map)(item => new _booking_class__WEBPACK_IMPORTED_MODULE_3__.Booking(item)));
}
/**
 * List the guests in a booking
 * @param id ID of the booking to reject
 */
function queryBookingGuests(id) {
  return (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.post)(`${BOOKINGS_ENDPOINT}/${encodeURIComponent(id)}/guests`, '').pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.map)(item => new libs_users_src_lib_user_class__WEBPACK_IMPORTED_MODULE_4__.GuestUser(item)));
}
/**
 * Set the checkin state of a guest in a booking
 * @param id ID of the booking to reject
 * @param guest_id ID of the guest to check in
 */
function checkinBookingGuest(id, guest_id, state = true) {
  return (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.post)(`${BOOKINGS_ENDPOINT}/${encodeURIComponent(id)}/guests/${encodeURIComponent(guest_id)}/check_in?state=${state}`, '').pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.map)(item => new libs_users_src_lib_user_class__WEBPACK_IMPORTED_MODULE_4__.GuestUser(item)));
}
/**
 * Add a guest to a booking
 * @param id ID of the booking
 * @param guest Guest to add to the booking
 */
function bookingAddGuest(id, guest) {
  return (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.post)(`${BOOKINGS_ENDPOINT}/${encodeURIComponent(id)}/attendee`, guest).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.map)(item => new libs_users_src_lib_user_class__WEBPACK_IMPORTED_MODULE_4__.GuestUser(item)));
}
/**
 * Remove an attendee from a booking
 * @param id ID of the booking
 * @param guest Guest to remove from the booking
 */
function bookingRemoveGuest(id, guest) {
  return (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.del)(`${BOOKINGS_ENDPOINT}/${encodeURIComponent(id)}/attendee/${encodeURIComponent(guest.email)}`).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.map)(item => new libs_users_src_lib_user_class__WEBPACK_IMPORTED_MODULE_4__.GuestUser(item)));
}
/**
 * Set the checkin state of a booking
 * @param id ID of the booking to grab
 * @param state New checkin state of the booking
 */
function checkinBooking(id, state) {
  const query = (0,libs_common_src_lib_api__WEBPACK_IMPORTED_MODULE_2__.toQueryString)({
    state
  });
  return (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.post)(`${BOOKINGS_ENDPOINT}/${encodeURIComponent(id)}/check_in?${query}`, '').pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.map)(item => new _booking_class__WEBPACK_IMPORTED_MODULE_3__.Booking(item)), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.catchError)( /*#__PURE__*/function () {
    var _ref2 = (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* (e) {
      const body = yield e.json();
      throw body.error || body.message || body;
    });
    return function (_x2) {
      return _ref2.apply(this, arguments);
    };
  }()));
}
/**
 * Set the checkin state of a booking instance
 * @param id ID of the booking to grab
 * @param start_time Start time of the booking instance
 * @param state New checkin state of the booking instance
 */
function checkinBookingInstance(id, start_time, state) {
  const query = (0,libs_common_src_lib_api__WEBPACK_IMPORTED_MODULE_2__.toQueryString)({
    state
  });
  return (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.post)(`${BOOKINGS_ENDPOINT}/${encodeURIComponent(id)}/check_in/${start_time}?${query}`, '').pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.map)(item => new _booking_class__WEBPACK_IMPORTED_MODULE_3__.Booking(item)), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.catchError)( /*#__PURE__*/function () {
    var _ref3 = (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* (e) {
      const body = yield e.json();
      throw body.error || body.message || body;
    });
    return function (_x3) {
      return _ref3.apply(this, arguments);
    };
  }()));
}
/**
 * Set the checkin state of a booking
 * @param id ID of the booking to grab
 * @param state New checkin state of the booking
 */
function checkinBookingAttendee(id, email, state) {
  const query = (0,libs_common_src_lib_api__WEBPACK_IMPORTED_MODULE_2__.toQueryString)({
    state
  });
  return (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.post)(`${BOOKINGS_ENDPOINT}/${encodeURIComponent(id)}/guests/${encodeURIComponent(email)}/check_in?${query}`, '').pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.map)(item => new libs_users_src_lib_user_class__WEBPACK_IMPORTED_MODULE_4__.GuestUser(item)));
}
/**
 * Filter list of resources based of the bookings found in the given query
 * @param asset_id_list List of resource IDs
 * @param query Booking query
 */
function queryResourceAvailability(id_list, start, duration, ignore, type = 'room', ignore_period = [0, 0]) {
  return queryBookings({
    type,
    period_start: (0,date_fns__WEBPACK_IMPORTED_MODULE_10__.getUnixTime)(start),
    period_end: (0,date_fns__WEBPACK_IMPORTED_MODULE_10__.getUnixTime)((0,date_fns__WEBPACK_IMPORTED_MODULE_11__.addMinutes)(start, duration))
  }).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.map)(_ => id_list.map(id => !_.find(b => b.asset_id === id && (!ignore || ignore !== b.id)))));
}
function isResourceAvailable(id, start, duration, ignore, type = 'room') {
  return queryBookings({
    type,
    period_start: (0,date_fns__WEBPACK_IMPORTED_MODULE_10__.getUnixTime)(start),
    period_end: (0,date_fns__WEBPACK_IMPORTED_MODULE_10__.getUnixTime)((0,date_fns__WEBPACK_IMPORTED_MODULE_11__.addMinutes)(start, duration))
  }).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.map)(_ => _.filter(_ => _.asset_id === id && _.id !== ignore).length === 0));
}
/**
 *
 * @param event
 * @param type
 * @param resources
 */
function createBookingsForEvent(_x4, _x5, _x6) {
  return _createBookingsForEvent.apply(this, arguments);
}
function _createBookingsForEvent() {
  _createBookingsForEvent = (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* (event, type, resources) {
    const bookings = yield queryBookings({
      type,
      period_start: (0,date_fns__WEBPACK_IMPORTED_MODULE_10__.getUnixTime)(event.date),
      period_end: (0,date_fns__WEBPACK_IMPORTED_MODULE_10__.getUnixTime)((0,date_fns__WEBPACK_IMPORTED_MODULE_11__.addMinutes)(event.date, event.duration))
    }).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.map)(_ => _.filter(_ => _.parent_id === event.id))).toPromise();
    yield Promise.all(bookings.map(_ => removeBooking(_.id).toPromise()));
    yield Promise.all(event.linked_bookings.filter(_ => _.booking_type === type).map(_ => removeBooking(_.id).toPromise()));
    const zones = event.system?.zones || (0,_placeos_common__WEBPACK_IMPORTED_MODULE_5__.unique)((0,_placeos_common__WEBPACK_IMPORTED_MODULE_5__.flatten)(event.resources.map(_ => _.zones))) || [];
    yield Promise.all(resources.map(item => {
      const booking = bookings.find(_ => _.asset_ids.find(id => item.items?.find(i => i.item_ids.includes(id))));
      return createBooking(new _booking_class__WEBPACK_IMPORTED_MODULE_3__.Booking({
        type,
        booking_type: type,
        date: event.date,
        duration: event.duration,
        description: event.title,
        user_email: event.host,
        asset_id: item.email,
        asset_name: item.name,
        title: item.name,
        attendees: [item],
        approved: booking?.approved && !item._changed,
        rejected: booking?.rejected && !item._changed,
        extension_data: {
          parent_id: event.id,
          name: item.name,
          location_id: event.location
        },
        zones
      }), {
        ical_uid: event.ical_uid,
        event_id: event.id
      }).toPromise();
    }));
  });
  return _createBookingsForEvent.apply(this, arguments);
}

/***/ }),

/***/ 38742:
/*!**************************************************!*\
  !*** ./libs/bookings/src/lib/bookings.module.ts ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SharedBookingsModule: () => (/* binding */ SharedBookingsModule)
/* harmony export */ });
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! @angular/forms */ 34456);
/* harmony import */ var _angular_material_button__WEBPACK_IMPORTED_MODULE_41__ = __webpack_require__(/*! @angular/material/button */ 84175);
/* harmony import */ var _angular_material_checkbox__WEBPACK_IMPORTED_MODULE_44__ = __webpack_require__(/*! @angular/material/checkbox */ 97024);
/* harmony import */ var _angular_material_datepicker__WEBPACK_IMPORTED_MODULE_40__ = __webpack_require__(/*! @angular/material/datepicker */ 61977);
/* harmony import */ var _angular_material_dialog__WEBPACK_IMPORTED_MODULE_42__ = __webpack_require__(/*! @angular/material/dialog */ 12587);
/* harmony import */ var _angular_material_form_field__WEBPACK_IMPORTED_MODULE_39__ = __webpack_require__(/*! @angular/material/form-field */ 24950);
/* harmony import */ var _angular_material_input__WEBPACK_IMPORTED_MODULE_38__ = __webpack_require__(/*! @angular/material/input */ 95541);
/* harmony import */ var _angular_material_progress_spinner__WEBPACK_IMPORTED_MODULE_43__ = __webpack_require__(/*! @angular/material/progress-spinner */ 41134);
/* harmony import */ var _angular_material_radio__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(/*! @angular/material/radio */ 53804);
/* harmony import */ var libs_components_src_lib_components_module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! libs/components/src/lib/components.module */ 14974);
/* harmony import */ var libs_form_fields_src_lib_form_fields_module__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! libs/form-fields/src/lib/form-fields.module */ 77066);
/* harmony import */ var libs_events_src_lib_events_module__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! libs/events/src/lib/events.module */ 2704);
/* harmony import */ var libs_spaces_src_lib_spaces_module__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! libs/spaces/src/lib/spaces.module */ 34360);
/* harmony import */ var libs_users_src_lib_users_module__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! libs/users/src/lib/users.module */ 34426);
/* harmony import */ var _booking_card_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./booking-card.component */ 27547);
/* harmony import */ var _booking_details_modal_component__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./booking-details-modal.component */ 1781);
/* harmony import */ var _desk_confirm_modal_component__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./desk-confirm-modal.component */ 3367);
/* harmony import */ var _desk_questions_modal_component__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./desk-questions-modal.component */ 67254);
/* harmony import */ var _desk_select_modal_desk_details_component__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./desk-select-modal/desk-details.component */ 42280);
/* harmony import */ var _desk_select_modal_desk_filters_display_component__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./desk-select-modal/desk-filters-display.component */ 24174);
/* harmony import */ var _desk_select_modal_desk_filters_component__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./desk-select-modal/desk-filters.component */ 4365);
/* harmony import */ var _desk_select_modal_desk_list_component__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./desk-select-modal/desk-list.component */ 93662);
/* harmony import */ var _desk_select_modal_desk_map_component__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./desk-select-modal/desk-map.component */ 42596);
/* harmony import */ var _desk_select_modal_desk_select_modal_component__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./desk-select-modal/desk-select-modal.component */ 50622);
/* harmony import */ var _invite_visitor_form_component__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./invite-visitor-form.component */ 68874);
/* harmony import */ var _parking_select_modal_parking_details_component__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./parking-select-modal/parking-details.component */ 6724);
/* harmony import */ var _parking_select_modal_parking_filters_display_component__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./parking-select-modal/parking-filters-display.component */ 19138);
/* harmony import */ var _parking_select_modal_parking_filters_component__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./parking-select-modal/parking-filters.component */ 39145);
/* harmony import */ var _parking_select_modal_parking_list_component__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./parking-select-modal/parking-list.component */ 30258);
/* harmony import */ var _parking_select_modal_parking_location_pin_component__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./parking-select-modal/parking-location-pin.component */ 48559);
/* harmony import */ var _parking_select_modal_parking_map_component__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./parking-select-modal/parking-map.component */ 88952);
/* harmony import */ var _parking_select_modal_parking_select_modal_component__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./parking-select-modal/parking-select-modal.component */ 67642);
/* harmony import */ var _parking_space_list_field_component__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./parking-space-list-field.component */ 24844);
/* harmony import */ var _desk_list_field_component__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./desk-list-field.component */ 56416);
/* harmony import */ var _booking_link_modal_component__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./booking-link-modal.component */ 84089);
/* harmony import */ var _angular_material_autocomplete__WEBPACK_IMPORTED_MODULE_45__ = __webpack_require__(/*! @angular/material/autocomplete */ 79771);
/* harmony import */ var _angular_material_core__WEBPACK_IMPORTED_MODULE_46__ = __webpack_require__(/*! @angular/material/core */ 74646);
/* harmony import */ var _locker_grid_component__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./locker-grid.component */ 84854);
/* harmony import */ var _angular_material_tooltip__WEBPACK_IMPORTED_MODULE_47__ = __webpack_require__(/*! @angular/material/tooltip */ 80640);
/* harmony import */ var _locker_select_modal_locker_select_modal_component__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./locker-select-modal/locker-select-modal.component */ 90482);
/* harmony import */ var _locker_list_field_component__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./locker-list-field.component */ 71511);
/* harmony import */ var _locker_select_modal_locker_filters_component__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ./locker-select-modal/locker-filters.component */ 22657);
/* harmony import */ var _locker_select_modal_locker_filters_display_component__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ./locker-select-modal/locker-filters-display.component */ 42394);
/* harmony import */ var _locker_select_modal_locker_bank_list_component__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ./locker-select-modal/locker-bank-list.component */ 90647);
/* harmony import */ var _locker_select_modal_locker_map_component__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! ./locker-select-modal/locker-map.component */ 38720);
/* harmony import */ var _desk_settings_modal_component__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! ./desk-settings-modal.component */ 77904);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! @angular/core */ 37580);
















































const COMPONENTS = [_desk_questions_modal_component__WEBPACK_IMPORTED_MODULE_8__.DeskQuestionsModalComponent, _desk_confirm_modal_component__WEBPACK_IMPORTED_MODULE_7__.DeskConfirmModalComponent, _invite_visitor_form_component__WEBPACK_IMPORTED_MODULE_15__.InviteVisitorFormComponent, _booking_details_modal_component__WEBPACK_IMPORTED_MODULE_6__.BookingDetailsModalComponent, _booking_card_component__WEBPACK_IMPORTED_MODULE_5__.BookingCardComponent, _booking_link_modal_component__WEBPACK_IMPORTED_MODULE_25__.BookingLinkModalComponent, _parking_select_modal_parking_select_modal_component__WEBPACK_IMPORTED_MODULE_22__.ParkingSpaceSelectModalComponent, _parking_select_modal_parking_filters_component__WEBPACK_IMPORTED_MODULE_18__.ParkingSpaceFiltersComponent, _parking_select_modal_parking_filters_display_component__WEBPACK_IMPORTED_MODULE_17__.ParkingSpaceFiltersDisplayComponent, _parking_select_modal_parking_list_component__WEBPACK_IMPORTED_MODULE_19__.ParkingSpaceListComponent, _parking_select_modal_parking_location_pin_component__WEBPACK_IMPORTED_MODULE_20__.ParkingSpaceLocationPinComponent, _parking_select_modal_parking_map_component__WEBPACK_IMPORTED_MODULE_21__.ParkingSpaceSelectMapComponent, _parking_select_modal_parking_details_component__WEBPACK_IMPORTED_MODULE_16__.ParkingSpaceDetailsComponent, _parking_space_list_field_component__WEBPACK_IMPORTED_MODULE_23__.ParkingSpaceListFieldComponent, _desk_select_modal_desk_select_modal_component__WEBPACK_IMPORTED_MODULE_14__.DeskSelectModalComponent, _desk_select_modal_desk_details_component__WEBPACK_IMPORTED_MODULE_9__.DeskDetailsComponent, _desk_select_modal_desk_filters_component__WEBPACK_IMPORTED_MODULE_11__.DeskFiltersComponent, _desk_select_modal_desk_filters_display_component__WEBPACK_IMPORTED_MODULE_10__.DeskFiltersDisplayComponent, _desk_select_modal_desk_list_component__WEBPACK_IMPORTED_MODULE_12__.DeskListComponent, _desk_select_modal_desk_map_component__WEBPACK_IMPORTED_MODULE_13__.DeskMapComponent, _desk_list_field_component__WEBPACK_IMPORTED_MODULE_24__.DeskListFieldComponent, _desk_settings_modal_component__WEBPACK_IMPORTED_MODULE_33__.DeskSettingsModalComponent, _locker_grid_component__WEBPACK_IMPORTED_MODULE_26__.LockerGridComponent, _locker_list_field_component__WEBPACK_IMPORTED_MODULE_28__.LockerListFieldComponent, _locker_select_modal_locker_select_modal_component__WEBPACK_IMPORTED_MODULE_27__.LockerSelectModalComponent, _locker_select_modal_locker_filters_component__WEBPACK_IMPORTED_MODULE_29__.LockerFiltersComponent, _locker_select_modal_locker_filters_display_component__WEBPACK_IMPORTED_MODULE_30__.LockerFiltersDisplayComponent, _locker_select_modal_locker_bank_list_component__WEBPACK_IMPORTED_MODULE_31__.LockerBankListComponent, _locker_select_modal_locker_map_component__WEBPACK_IMPORTED_MODULE_32__.LockerMapComponent];
class SharedBookingsModule {
  static #_ = this.ɵfac = function SharedBookingsModule_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || SharedBookingsModule)();
  };
  static #_2 = this.ɵmod = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_34__["ɵɵdefineNgModule"]({
    type: SharedBookingsModule
  });
  static #_3 = this.ɵinj = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_34__["ɵɵdefineInjector"]({
    providers: [_angular_forms__WEBPACK_IMPORTED_MODULE_35__.ReactiveFormsModule],
    imports: [_angular_common__WEBPACK_IMPORTED_MODULE_36__.CommonModule, _angular_forms__WEBPACK_IMPORTED_MODULE_35__.FormsModule, _angular_forms__WEBPACK_IMPORTED_MODULE_35__.ReactiveFormsModule, _angular_material_radio__WEBPACK_IMPORTED_MODULE_37__.MatRadioModule, _angular_material_input__WEBPACK_IMPORTED_MODULE_38__.MatInputModule, _angular_material_form_field__WEBPACK_IMPORTED_MODULE_39__.MatFormFieldModule, _angular_material_datepicker__WEBPACK_IMPORTED_MODULE_40__.MatDatepickerModule, _angular_material_button__WEBPACK_IMPORTED_MODULE_41__.MatButtonModule, _angular_material_dialog__WEBPACK_IMPORTED_MODULE_42__.MatDialogModule, _angular_material_progress_spinner__WEBPACK_IMPORTED_MODULE_43__.MatProgressSpinnerModule, _angular_material_checkbox__WEBPACK_IMPORTED_MODULE_44__.MatCheckboxModule, _angular_material_autocomplete__WEBPACK_IMPORTED_MODULE_45__.MatAutocompleteModule, libs_form_fields_src_lib_form_fields_module__WEBPACK_IMPORTED_MODULE_1__.FormFieldsModule, libs_components_src_lib_components_module__WEBPACK_IMPORTED_MODULE_0__.ComponentsModule, _angular_material_core__WEBPACK_IMPORTED_MODULE_46__.MatRippleModule, _angular_material_tooltip__WEBPACK_IMPORTED_MODULE_47__.MatTooltipModule, libs_spaces_src_lib_spaces_module__WEBPACK_IMPORTED_MODULE_3__.SharedSpacesModule, libs_events_src_lib_events_module__WEBPACK_IMPORTED_MODULE_2__.SharedEventsModule, libs_users_src_lib_users_module__WEBPACK_IMPORTED_MODULE_4__.SharedUsersModule]
  });
}
(function () {
  (typeof ngJitMode === "undefined" || ngJitMode) && _angular_core__WEBPACK_IMPORTED_MODULE_34__["ɵɵsetNgModuleScope"](SharedBookingsModule, {
    declarations: [_desk_questions_modal_component__WEBPACK_IMPORTED_MODULE_8__.DeskQuestionsModalComponent, _desk_confirm_modal_component__WEBPACK_IMPORTED_MODULE_7__.DeskConfirmModalComponent, _invite_visitor_form_component__WEBPACK_IMPORTED_MODULE_15__.InviteVisitorFormComponent, _booking_details_modal_component__WEBPACK_IMPORTED_MODULE_6__.BookingDetailsModalComponent, _booking_card_component__WEBPACK_IMPORTED_MODULE_5__.BookingCardComponent, _booking_link_modal_component__WEBPACK_IMPORTED_MODULE_25__.BookingLinkModalComponent, _parking_select_modal_parking_select_modal_component__WEBPACK_IMPORTED_MODULE_22__.ParkingSpaceSelectModalComponent, _parking_select_modal_parking_filters_component__WEBPACK_IMPORTED_MODULE_18__.ParkingSpaceFiltersComponent, _parking_select_modal_parking_filters_display_component__WEBPACK_IMPORTED_MODULE_17__.ParkingSpaceFiltersDisplayComponent, _parking_select_modal_parking_list_component__WEBPACK_IMPORTED_MODULE_19__.ParkingSpaceListComponent, _parking_select_modal_parking_location_pin_component__WEBPACK_IMPORTED_MODULE_20__.ParkingSpaceLocationPinComponent, _parking_select_modal_parking_map_component__WEBPACK_IMPORTED_MODULE_21__.ParkingSpaceSelectMapComponent, _parking_select_modal_parking_details_component__WEBPACK_IMPORTED_MODULE_16__.ParkingSpaceDetailsComponent, _parking_space_list_field_component__WEBPACK_IMPORTED_MODULE_23__.ParkingSpaceListFieldComponent, _desk_select_modal_desk_select_modal_component__WEBPACK_IMPORTED_MODULE_14__.DeskSelectModalComponent, _desk_select_modal_desk_details_component__WEBPACK_IMPORTED_MODULE_9__.DeskDetailsComponent, _desk_select_modal_desk_filters_component__WEBPACK_IMPORTED_MODULE_11__.DeskFiltersComponent, _desk_select_modal_desk_filters_display_component__WEBPACK_IMPORTED_MODULE_10__.DeskFiltersDisplayComponent, _desk_select_modal_desk_list_component__WEBPACK_IMPORTED_MODULE_12__.DeskListComponent, _desk_select_modal_desk_map_component__WEBPACK_IMPORTED_MODULE_13__.DeskMapComponent, _desk_list_field_component__WEBPACK_IMPORTED_MODULE_24__.DeskListFieldComponent, _desk_settings_modal_component__WEBPACK_IMPORTED_MODULE_33__.DeskSettingsModalComponent, _locker_grid_component__WEBPACK_IMPORTED_MODULE_26__.LockerGridComponent, _locker_list_field_component__WEBPACK_IMPORTED_MODULE_28__.LockerListFieldComponent, _locker_select_modal_locker_select_modal_component__WEBPACK_IMPORTED_MODULE_27__.LockerSelectModalComponent, _locker_select_modal_locker_filters_component__WEBPACK_IMPORTED_MODULE_29__.LockerFiltersComponent, _locker_select_modal_locker_filters_display_component__WEBPACK_IMPORTED_MODULE_30__.LockerFiltersDisplayComponent, _locker_select_modal_locker_bank_list_component__WEBPACK_IMPORTED_MODULE_31__.LockerBankListComponent, _locker_select_modal_locker_map_component__WEBPACK_IMPORTED_MODULE_32__.LockerMapComponent],
    imports: [_angular_common__WEBPACK_IMPORTED_MODULE_36__.CommonModule, _angular_forms__WEBPACK_IMPORTED_MODULE_35__.FormsModule, _angular_forms__WEBPACK_IMPORTED_MODULE_35__.ReactiveFormsModule, _angular_material_radio__WEBPACK_IMPORTED_MODULE_37__.MatRadioModule, _angular_material_input__WEBPACK_IMPORTED_MODULE_38__.MatInputModule, _angular_material_form_field__WEBPACK_IMPORTED_MODULE_39__.MatFormFieldModule, _angular_material_datepicker__WEBPACK_IMPORTED_MODULE_40__.MatDatepickerModule, _angular_material_button__WEBPACK_IMPORTED_MODULE_41__.MatButtonModule, _angular_material_dialog__WEBPACK_IMPORTED_MODULE_42__.MatDialogModule, _angular_material_progress_spinner__WEBPACK_IMPORTED_MODULE_43__.MatProgressSpinnerModule, _angular_material_checkbox__WEBPACK_IMPORTED_MODULE_44__.MatCheckboxModule, _angular_material_autocomplete__WEBPACK_IMPORTED_MODULE_45__.MatAutocompleteModule, libs_form_fields_src_lib_form_fields_module__WEBPACK_IMPORTED_MODULE_1__.FormFieldsModule, libs_components_src_lib_components_module__WEBPACK_IMPORTED_MODULE_0__.ComponentsModule, _angular_material_core__WEBPACK_IMPORTED_MODULE_46__.MatRippleModule, _angular_material_tooltip__WEBPACK_IMPORTED_MODULE_47__.MatTooltipModule, libs_spaces_src_lib_spaces_module__WEBPACK_IMPORTED_MODULE_3__.SharedSpacesModule, libs_events_src_lib_events_module__WEBPACK_IMPORTED_MODULE_2__.SharedEventsModule, libs_users_src_lib_users_module__WEBPACK_IMPORTED_MODULE_4__.SharedUsersModule],
    exports: [_desk_questions_modal_component__WEBPACK_IMPORTED_MODULE_8__.DeskQuestionsModalComponent, _desk_confirm_modal_component__WEBPACK_IMPORTED_MODULE_7__.DeskConfirmModalComponent, _invite_visitor_form_component__WEBPACK_IMPORTED_MODULE_15__.InviteVisitorFormComponent, _booking_details_modal_component__WEBPACK_IMPORTED_MODULE_6__.BookingDetailsModalComponent, _booking_card_component__WEBPACK_IMPORTED_MODULE_5__.BookingCardComponent, _booking_link_modal_component__WEBPACK_IMPORTED_MODULE_25__.BookingLinkModalComponent, _parking_select_modal_parking_select_modal_component__WEBPACK_IMPORTED_MODULE_22__.ParkingSpaceSelectModalComponent, _parking_select_modal_parking_filters_component__WEBPACK_IMPORTED_MODULE_18__.ParkingSpaceFiltersComponent, _parking_select_modal_parking_filters_display_component__WEBPACK_IMPORTED_MODULE_17__.ParkingSpaceFiltersDisplayComponent, _parking_select_modal_parking_list_component__WEBPACK_IMPORTED_MODULE_19__.ParkingSpaceListComponent, _parking_select_modal_parking_location_pin_component__WEBPACK_IMPORTED_MODULE_20__.ParkingSpaceLocationPinComponent, _parking_select_modal_parking_map_component__WEBPACK_IMPORTED_MODULE_21__.ParkingSpaceSelectMapComponent, _parking_select_modal_parking_details_component__WEBPACK_IMPORTED_MODULE_16__.ParkingSpaceDetailsComponent, _parking_space_list_field_component__WEBPACK_IMPORTED_MODULE_23__.ParkingSpaceListFieldComponent, _desk_select_modal_desk_select_modal_component__WEBPACK_IMPORTED_MODULE_14__.DeskSelectModalComponent, _desk_select_modal_desk_details_component__WEBPACK_IMPORTED_MODULE_9__.DeskDetailsComponent, _desk_select_modal_desk_filters_component__WEBPACK_IMPORTED_MODULE_11__.DeskFiltersComponent, _desk_select_modal_desk_filters_display_component__WEBPACK_IMPORTED_MODULE_10__.DeskFiltersDisplayComponent, _desk_select_modal_desk_list_component__WEBPACK_IMPORTED_MODULE_12__.DeskListComponent, _desk_select_modal_desk_map_component__WEBPACK_IMPORTED_MODULE_13__.DeskMapComponent, _desk_list_field_component__WEBPACK_IMPORTED_MODULE_24__.DeskListFieldComponent, _desk_settings_modal_component__WEBPACK_IMPORTED_MODULE_33__.DeskSettingsModalComponent, _locker_grid_component__WEBPACK_IMPORTED_MODULE_26__.LockerGridComponent, _locker_list_field_component__WEBPACK_IMPORTED_MODULE_28__.LockerListFieldComponent, _locker_select_modal_locker_select_modal_component__WEBPACK_IMPORTED_MODULE_27__.LockerSelectModalComponent, _locker_select_modal_locker_filters_component__WEBPACK_IMPORTED_MODULE_29__.LockerFiltersComponent, _locker_select_modal_locker_filters_display_component__WEBPACK_IMPORTED_MODULE_30__.LockerFiltersDisplayComponent, _locker_select_modal_locker_bank_list_component__WEBPACK_IMPORTED_MODULE_31__.LockerBankListComponent, _locker_select_modal_locker_map_component__WEBPACK_IMPORTED_MODULE_32__.LockerMapComponent]
  });
})();

/***/ }),

/***/ 3367:
/*!***************************************************************!*\
  !*** ./libs/bookings/src/lib/desk-confirm-modal.component.ts ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DeskConfirmModalComponent: () => (/* binding */ DeskConfirmModalComponent)
/* harmony export */ });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_material_dialog__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/material/dialog */ 12587);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @angular/forms */ 34456);
/* harmony import */ var _angular_material_input__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @angular/material/input */ 95541);
/* harmony import */ var _angular_material_form_field__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @angular/material/form-field */ 24950);
/* harmony import */ var _angular_material_progress_spinner__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @angular/material/progress-spinner */ 41134);
/* harmony import */ var _form_fields_src_lib_date_field_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../form-fields/src/lib/date-field.component */ 19608);
/* harmony import */ var _form_fields_src_lib_user_search_field_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../form-fields/src/lib/user-search-field.component */ 18000);
/* harmony import */ var _angular_material_core__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @angular/material/core */ 74646);














function DeskConfirmModalComponent_button_4_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "button", 10)(1, "i", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](2, "close");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()();
  }
}
function DeskConfirmModalComponent_ng_container_5_div_2_Template(rf, ctx) {
  if (rf & 1) {
    const _r2 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "div", 20)(1, "label");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵi18n"](2, 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](3, "a-user-search-field", 21);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtwoWayListener"]("ngModelChange", function DeskConfirmModalComponent_ng_container_5_div_2_Template_a_user_search_field_ngModelChange_3_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵrestoreView"](_r2);
      const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"](2);
      _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtwoWayBindingSet"](ctx_r2.host, $event) || (ctx_r2.host = $event);
      return _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵresetView"]($event);
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtwoWayProperty"]("ngModel", ctx_r2.host);
  }
}
function DeskConfirmModalComponent_ng_container_5_div_6_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipe"](2, "date");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipeBind2"](2, 1, ctx_r2.date, "mediumDate"), " ");
  }
}
function DeskConfirmModalComponent_ng_container_5_a_date_field_7_Template(rf, ctx) {
  if (rf & 1) {
    const _r4 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "a-date-field", 22);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtwoWayListener"]("ngModelChange", function DeskConfirmModalComponent_ng_container_5_a_date_field_7_Template_a_date_field_ngModelChange_0_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵrestoreView"](_r4);
      const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"](2);
      _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtwoWayBindingSet"](ctx_r2.date, $event) || (ctx_r2.date = $event);
      return _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵresetView"]($event);
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtwoWayProperty"]("ngModel", ctx_r2.date);
  }
}
function DeskConfirmModalComponent_ng_container_5_div_8_Template(rf, ctx) {
  if (rf & 1) {
    const _r5 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "div", 23)(1, "label");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵi18n"](2, 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](3, "mat-form-field", 24)(4, "input", 25);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtwoWayListener"]("ngModelChange", function DeskConfirmModalComponent_ng_container_5_div_8_Template_input_ngModelChange_4_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵrestoreView"](_r5);
      const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"](2);
      _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtwoWayBindingSet"](ctx_r2.reason, $event) || (ctx_r2.reason = $event);
      return _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵresetView"]($event);
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()()();
  }
  if (rf & 2) {
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtwoWayProperty"]("ngModel", ctx_r2.reason);
  }
}
function DeskConfirmModalComponent_ng_container_5_Template(rf, ctx) {
  if (rf & 1) {
    const _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](1, "main", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](2, DeskConfirmModalComponent_ng_container_5_div_2_Template, 4, 1, "div", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](3, "div", 14)(4, "label");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵi18n"](5, 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](6, DeskConfirmModalComponent_ng_container_5_div_6_Template, 3, 4, "div", 15)(7, DeskConfirmModalComponent_ng_container_5_a_date_field_7_Template, 1, 1, "a-date-field", 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](8, DeskConfirmModalComponent_ng_container_5_div_8_Template, 5, 1, "div", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](9, "p");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵi18n"](10, 3);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](11, "footer", 18)(12, "button", 19);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵlistener"]("click", function DeskConfirmModalComponent_ng_container_5_Template_button_click_12_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵrestoreView"](_r1);
      const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵresetView"](ctx_r2.confirm());
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵi18n"](13, 4);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementContainerEnd"]();
  }
  if (rf & 2) {
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", ctx_r2.can_set_host);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", !ctx_r2.can_set_date);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", ctx_r2.can_set_date);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", !ctx_r2.hide_reason);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵi18nExp"](ctx_r2.desks.length === 1 ? "" : "s")(ctx_r2.desk_list)((ctx_r2.level == null ? null : ctx_r2.level.display_name) || (ctx_r2.level == null ? null : ctx_r2.level.name));
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵi18nApply"](10);
  }
}
function DeskConfirmModalComponent_ng_template_6_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "main", 26);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelement"](1, "mat-spinner", 27);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](2, "p");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("diameter", 48);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtextInterpolate"](ctx_r2.loading);
  }
}
class DeskConfirmModalComponent {
  get desk_list() {
    return this.desks.map(_ => _.name).join(', ');
  }
  get hide_reason() {
    return !!this._settings.get('app.desks.hide_reason');
  }
  get can_set_host() {
    return !!this._settings.get('app.desks.can_book_for_others');
  }
  constructor(_data, _settings) {
    this._data = _data;
    this._settings = _settings;
    this.event = new _angular_core__WEBPACK_IMPORTED_MODULE_3__.EventEmitter();
    this.desks = this._data.desks || [];
    this.date = this._data.date;
    this.host = this._data.host;
    this.can_set_date = this._data.can_set_date;
    this.reason = this._data.reason;
    this.level = this._data.level;
  }
  confirm() {
    this.loading = 'Requesting desk booking...';
    this.event.emit({
      reason: 'done'
    });
  }
  static #_ = this.ɵfac = function DeskConfirmModalComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || DeskConfirmModalComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵdirectiveInject"](_angular_material_dialog__WEBPACK_IMPORTED_MODULE_4__.MAT_DIALOG_DATA), _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵdirectiveInject"](_placeos_common__WEBPACK_IMPORTED_MODULE_0__.SettingsService));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵdefineComponent"]({
    type: DeskConfirmModalComponent,
    selectors: [["desk-flow-confirm-modal-component"]],
    outputs: {
      event: "event"
    },
    decls: 8,
    vars: 3,
    consts: () => {
      let i18n_0;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_1554073776118278895$$LIBS_BOOKINGS_SRC_LIB_DESK_CONFIRM_MODAL_COMPONENT_TS_0 = goog.getMsg("Confirm Booking");
        i18n_0 = MSG_EXTERNAL_1554073776118278895$$LIBS_BOOKINGS_SRC_LIB_DESK_CONFIRM_MODAL_COMPONENT_TS_0;
      } else {
        i18n_0 = $localize`:␟d513554c23b779e029147a285f1f84f1479488fc␟1554073776118278895:Confirm Booking`;
      }
      let i18n_1;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_3973931101896534797$$LIBS_BOOKINGS_SRC_LIB_DESK_CONFIRM_MODAL_COMPONENT_TS_1 = goog.getMsg("Date");
        i18n_1 = MSG_EXTERNAL_3973931101896534797$$LIBS_BOOKINGS_SRC_LIB_DESK_CONFIRM_MODAL_COMPONENT_TS_1;
      } else {
        i18n_1 = $localize`:␟2f933b826a570836cab04f683970a2d22068458c␟3973931101896534797:Date`;
      }
      let i18n_2;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_4161419473863623687$$LIBS_BOOKINGS_SRC_LIB_DESK_CONFIRM_MODAL_COMPONENT_TS_2 = goog.getMsg(" Your desk{$interpolation} will be {$interpolation_1} on {$interpolation_2} ", {
          "interpolation": "\uFFFD0\uFFFD",
          "interpolation_1": "\uFFFD1\uFFFD",
          "interpolation_2": "\uFFFD2\uFFFD"
        }, {
          original_code: {
            "interpolation": "{{ desks.length === 1 ? '' : 's' }}",
            "interpolation_1": "{{ desk_list }}",
            "interpolation_2": "{{ level?.display_name || level?.name }}"
          }
        });
        i18n_2 = MSG_EXTERNAL_4161419473863623687$$LIBS_BOOKINGS_SRC_LIB_DESK_CONFIRM_MODAL_COMPONENT_TS_2;
      } else {
        i18n_2 = $localize`:␟5012a6a10d31e79f5865c2fc7f680b84a14accca␟4161419473863623687: Your desk${"\uFFFD0\uFFFD"}:INTERPOLATION: will be ${"\uFFFD1\uFFFD"}:INTERPOLATION_1: on ${"\uFFFD2\uFFFD"}:INTERPOLATION_2: `;
      }
      let i18n_3;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_9178182467454450952$$LIBS_BOOKINGS_SRC_LIB_DESK_CONFIRM_MODAL_COMPONENT_TS_3 = goog.getMsg("Confirm");
        i18n_3 = MSG_EXTERNAL_9178182467454450952$$LIBS_BOOKINGS_SRC_LIB_DESK_CONFIRM_MODAL_COMPONENT_TS_3;
      } else {
        i18n_3 = $localize`:␟68e710782ccb5398b3acb8844caf0b199da2c3da␟9178182467454450952:Confirm`;
      }
      let i18n_4;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_6641024648411549335$$LIBS_BOOKINGS_SRC_LIB_DESK_CONFIRM_MODAL_COMPONENT_TS_4 = goog.getMsg("Host");
        i18n_4 = MSG_EXTERNAL_6641024648411549335$$LIBS_BOOKINGS_SRC_LIB_DESK_CONFIRM_MODAL_COMPONENT_TS_4;
      } else {
        i18n_4 = $localize`:␟fe22ca53e651df951dac25b67c17894b0980f767␟6641024648411549335:Host`;
      }
      let i18n_5;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_4775550080689015987$$LIBS_BOOKINGS_SRC_LIB_DESK_CONFIRM_MODAL_COMPONENT_TS_5 = goog.getMsg("Reason");
        i18n_5 = MSG_EXTERNAL_4775550080689015987$$LIBS_BOOKINGS_SRC_LIB_DESK_CONFIRM_MODAL_COMPONENT_TS_5;
      } else {
        i18n_5 = $localize`:␟4ba250869daa372b54d24fafc0ea934769ee4076␟4775550080689015987:Reason`;
      }
      return [["load_state", ""], i18n_0, i18n_1, i18n_2, i18n_3, i18n_4, i18n_5, [1, "flex-1"], ["icon", "", "mat-dialog-close", "", 4, "ngIf"], [4, "ngIf", "ngIfElse"], ["icon", "", "mat-dialog-close", ""], [1, "material-icons"], [1, "p-4"], ["host", "", "class", "flex flex-col", 4, "ngIf"], ["date", "", 1, "mb-4"], [4, "ngIf"], [3, "ngModel", "ngModelChange", 4, "ngIf"], ["reason", "", "class", "flex flex-col mb-4", 4, "ngIf"], [1, "flex", "items-center", "justify-center", "p-2"], ["btn", "", "matRipple", "", 3, "click"], ["host", "", 1, "flex", "flex-col"], [1, "mb-4", 3, "ngModelChange", "ngModel"], [3, "ngModelChange", "ngModel"], ["reason", "", 1, "flex", "flex-col", "mb-4"], ["appearance", "outline"], ["matInput", "", "placeholder", "Reason", 3, "ngModelChange", "ngModel"], ["load", "", 1, "flex", "flex-col", "p-12", "items-center", "justify-center"], [1, "mb-4", 3, "diameter"]];
    },
    template: function DeskConfirmModalComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "header")(1, "h2");
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵi18n"](2, 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelement"](3, "div", 7);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](4, DeskConfirmModalComponent_button_4_Template, 3, 0, "button", 8);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](5, DeskConfirmModalComponent_ng_container_5_Template, 14, 7, "ng-container", 9)(6, DeskConfirmModalComponent_ng_template_6_Template, 4, 2, "ng-template", null, 0, _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplateRefExtractor"]);
      }
      if (rf & 2) {
        const load_state_r6 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵreference"](7);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](4);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", !ctx.loading);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", !ctx.loading)("ngIfElse", load_state_r6);
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_5__.NgIf, _angular_forms__WEBPACK_IMPORTED_MODULE_6__.DefaultValueAccessor, _angular_forms__WEBPACK_IMPORTED_MODULE_6__.NgControlStatus, _angular_forms__WEBPACK_IMPORTED_MODULE_6__.NgModel, _angular_material_input__WEBPACK_IMPORTED_MODULE_7__.MatInput, _angular_material_form_field__WEBPACK_IMPORTED_MODULE_8__.MatFormField, _angular_material_dialog__WEBPACK_IMPORTED_MODULE_4__.MatDialogClose, _angular_material_progress_spinner__WEBPACK_IMPORTED_MODULE_9__.MatProgressSpinner, _form_fields_src_lib_date_field_component__WEBPACK_IMPORTED_MODULE_1__.DateFieldComponent, _form_fields_src_lib_user_search_field_component__WEBPACK_IMPORTED_MODULE_2__.UserSearchFieldComponent, _angular_material_core__WEBPACK_IMPORTED_MODULE_10__.MatRipple, _angular_common__WEBPACK_IMPORTED_MODULE_5__.DatePipe],
    styles: ["main[_ngcontent-%COMP%] {\n                width: 24rem;\n                max-width: calc(100vw - 4.5rem);\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRlc2stY29uZmlybS1tb2RhbC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLFlBQVk7Z0JBQ1osK0JBQStCO1lBQ25DIiwiZmlsZSI6ImRlc2stY29uZmlybS1tb2RhbC5jb21wb25lbnQudHMiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIG1haW4ge1xuICAgICAgICAgICAgICAgIHdpZHRoOiAyNHJlbTtcbiAgICAgICAgICAgICAgICBtYXgtd2lkdGg6IGNhbGMoMTAwdncgLSA0LjVyZW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAiXX0= */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvYm9va2luZ3Mvc3JjL2xpYi9kZXNrLWNvbmZpcm0tbW9kYWwuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxZQUFZO2dCQUNaLCtCQUErQjtZQUNuQzs7QUFFWixnZEFBZ2QiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIG1haW4ge1xuICAgICAgICAgICAgICAgIHdpZHRoOiAyNHJlbTtcbiAgICAgICAgICAgICAgICBtYXgtd2lkdGg6IGNhbGMoMTAwdncgLSA0LjVyZW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAiXSwic291cmNlUm9vdCI6IiJ9 */"]
  });
}

/***/ }),

/***/ 56416:
/*!************************************************************!*\
  !*** ./libs/bookings/src/lib/desk-list-field.component.ts ***!
  \************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DeskListFieldComponent: () => (/* binding */ DeskListFieldComponent)
/* harmony export */ });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @angular/forms */ 34456);
/* harmony import */ var libs_common_src_lib_settings_service__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! libs/common/src/lib/settings.service */ 14233);
/* harmony import */ var _desk_select_modal_desk_select_modal_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./desk-select-modal/desk-select-modal.component */ 50622);
/* harmony import */ var _angular_material_dialog__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/material/dialog */ 12587);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _angular_material_checkbox__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @angular/material/checkbox */ 97024);
/* harmony import */ var _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../components/src/lib/icon.component */ 69434);
/* harmony import */ var _components_src_lib_authenticated_image_directive__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../components/src/lib/authenticated-image.directive */ 93208);
/* harmony import */ var _angular_material_core__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @angular/material/core */ 74646);














const _c0 = () => [];
const _c1 = () => ({
  standalone: true
});
function DeskListFieldComponent_div_1_div_1_mat_checkbox_4_Template(rf, ctx) {
  if (rf & 1) {
    const _r2 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](0, "mat-checkbox", 27);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵlistener"]("ngModelChange", function DeskListFieldComponent_div_1_div_1_mat_checkbox_4_Template_mat_checkbox_ngModelChange_0_listener($event) {
      const opt_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵrestoreView"](_r2).$implicit;
      const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"](3);
      return _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵresetView"](ctx_r3.setFeature(opt_r3, $event));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const opt_r3 = ctx.$implicit;
    const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngModel", (ctx_r3.selected_features || _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpureFunction0"](3, _c0)).includes(opt_r3))("ngModelOptions", _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpureFunction0"](4, _c1));
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtextInterpolate1"](" ", opt_r3, " ");
  }
}
function DeskListFieldComponent_div_1_div_1_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](0, "div", 23)(1, "label", 24);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](2, "Type");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](3, "div", 25);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](4, DeskListFieldComponent_div_1_div_1_mat_checkbox_4_Template, 2, 5, "mat-checkbox", 26);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngForOf", ctx_r3.features);
  }
}
function DeskListFieldComponent_div_1_img_3_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelement"](0, "img", 28);
  }
  if (rf & 2) {
    const item_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"]().$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("source", item_r5.images[0]);
  }
}
function DeskListFieldComponent_div_1_ng_template_4_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelement"](0, "img", 29);
  }
}
function DeskListFieldComponent_div_1_Template(rf, ctx) {
  if (rf & 1) {
    const _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](0, "div", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](1, DeskListFieldComponent_div_1_div_1_Template, 5, 1, "div", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](2, "div", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](3, DeskListFieldComponent_div_1_img_3_Template, 1, 1, "img", 13)(4, DeskListFieldComponent_div_1_ng_template_4_Template, 1, 0, "ng-template", null, 0, _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplateRefExtractor"]);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](6, "div", 14)(7, "div", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](8);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](9, "div", 16)(10, "app-icon", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](11, "place");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](12, "p");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](13);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](14, "div", 18)(15, "button", 19);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵlistener"]("click", function DeskListFieldComponent_div_1_Template_button_click_15_listener() {
      const item_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵrestoreView"](_r1).$implicit;
      const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵresetView"](ctx_r3.changeResources(item_r5));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](16, "div", 20);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵi18nStart"](17, 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelement"](18, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵi18nEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](19, "button", 21);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵlistener"]("click", function DeskListFieldComponent_div_1_Template_button_click_19_listener() {
      const item_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵrestoreView"](_r1).$implicit;
      const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵresetView"](ctx_r3.removeResource(item_r5));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](20, "div", 20);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵi18nStart"](21, 3);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelement"](22, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵi18nEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]()()()();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](23, "button", 22);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵlistener"]("click", function DeskListFieldComponent_div_1_Template_button_click_23_listener() {
      const item_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵrestoreView"](_r1).$implicit;
      const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵresetView"](ctx_r3.toggleFavourite(item_r5));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](24, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](25);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]()()();
  }
  if (rf & 2) {
    const item_r5 = ctx.$implicit;
    const placeholder_r6 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵreference"](5);
    const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngIf", ctx_r3.features == null ? null : ctx_r3.features.length);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngIf", item_r5.images == null ? null : item_r5.images.length)("ngIfElse", placeholder_r6);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtextInterpolate1"](" ", item_r5.name || item_r5.id || item_r5.map_id || "Desk", " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtextInterpolate"]((item_r5.zone == null ? null : item_r5.zone.display_name) || (item_r5.zone == null ? null : item_r5.zone.name));
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](10);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵclassProp"]("text-blue-400", ctx_r3.favorites.includes(item_r5 == null ? null : item_r5.id));
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtextInterpolate"](ctx_r3.favorites.includes(item_r5 == null ? null : item_r5.id) ? "favorite" : "favorite_border");
  }
}
const EMPTY_FAVS = [];
class DeskListFieldComponent {
  get favorites() {
    return this._settings.get(_desk_select_modal_desk_select_modal_component__WEBPACK_IMPORTED_MODULE_1__.FAV_DESK_KEY) || EMPTY_FAVS;
  }
  constructor(_settings, _dialog) {
    this._settings = _settings;
    this._dialog = _dialog;
    this.features = [];
    this.room_size = 3;
    this.items = [];
    this.disabled = false;
    this.selected_features = [];
    /* istanbul ignore next */
    this.registerOnChange = fn => this._onChange = fn;
    /* istanbul ignore next */
    this.registerOnTouched = fn => this._onTouch = fn;
    this.setDisabledState = s => this.disabled = s;
  }
  /** Add or edit selected items */
  changeResources() {
    const ref = this._dialog.open(_desk_select_modal_desk_select_modal_component__WEBPACK_IMPORTED_MODULE_1__.DeskSelectModalComponent, {
      data: {
        items: this.items,
        options: {
          capacity: this.room_size
        }
      }
    });
    ref.afterClosed().subscribe(items => {
      if (!items) items = ref.componentInstance.selected;
      this.setValue(items);
    });
  }
  /** Remove the selected space from the list */
  removeResource(space) {
    this.setValue(this.items.filter(_ => _.id !== space.id));
  }
  /**
   * Update the form field value
   * @param new_value New value to set on the form field
   */
  setValue(new_value) {
    this.items = new_value;
    if (this._onChange) this._onChange(this.items);
  }
  /* istanbul ignore next */
  /**
   * Update local value when form control value is changed
   * @param value The new value for the component
   */
  writeValue(value) {
    this.items = value || [];
  }
  toggleFavourite(space) {
    if (!space?.id) return;
    const fav_list = this.favorites;
    const new_state = !fav_list.includes(space.id);
    if (new_state) {
      this._settings.saveUserSetting(_desk_select_modal_desk_select_modal_component__WEBPACK_IMPORTED_MODULE_1__.FAV_DESK_KEY, [...fav_list, space.id]);
    } else {
      this._settings.saveUserSetting(_desk_select_modal_desk_select_modal_component__WEBPACK_IMPORTED_MODULE_1__.FAV_DESK_KEY, fav_list.filter(_ => _ !== space.id));
    }
  }
  static #_ = this.ɵfac = function DeskListFieldComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || DeskListFieldComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵdirectiveInject"](libs_common_src_lib_settings_service__WEBPACK_IMPORTED_MODULE_0__.SettingsService), _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵdirectiveInject"](_angular_material_dialog__WEBPACK_IMPORTED_MODULE_5__.MatDialog));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵdefineComponent"]({
    type: DeskListFieldComponent,
    selectors: [["desk-list-field"]],
    inputs: {
      features: "features"
    },
    features: [_angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵProvidersFeature"]([{
      provide: _angular_forms__WEBPACK_IMPORTED_MODULE_6__.NG_VALUE_ACCESSOR,
      useExisting: (0,_angular_core__WEBPACK_IMPORTED_MODULE_4__.forwardRef)(() => DeskListFieldComponent),
      multi: true
    }])],
    decls: 10,
    vars: 1,
    consts: () => {
      let i18n_0;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_1087109089519255800$$LIBS_BOOKINGS_SRC_LIB_DESK_LIST_FIELD_COMPONENT_TS_0 = goog.getMsg("Add Desk");
        i18n_0 = MSG_EXTERNAL_1087109089519255800$$LIBS_BOOKINGS_SRC_LIB_DESK_LIST_FIELD_COMPONENT_TS_0;
      } else {
        i18n_0 = $localize`:␟76b072e559d819bff20d8a487e73f64b3afe4f86␟1087109089519255800:Add Desk`;
      }
      let i18n_1;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_559636443235347532$$LIBS_BOOKINGS_SRC_LIB_DESK_LIST_FIELD_COMPONENT_TS_1 = goog.getMsg("{$startTagAppIcon}edit{$closeTagAppIcon} Change ", {
          "closeTagAppIcon": "\uFFFD/#18\uFFFD",
          "startTagAppIcon": "\uFFFD#18\uFFFD"
        }, {
          original_code: {
            "closeTagAppIcon": "</app-icon>",
            "startTagAppIcon": "<app-icon>"
          }
        });
        i18n_1 = MSG_EXTERNAL_559636443235347532$$LIBS_BOOKINGS_SRC_LIB_DESK_LIST_FIELD_COMPONENT_TS_1;
      } else {
        i18n_1 = $localize`:␟ca9092fdbbb85e5828de77fdf85c49b918cec128␟559636443235347532:${"\uFFFD#18\uFFFD"}:START_TAG_APP_ICON:edit${"\uFFFD/#18\uFFFD"}:CLOSE_TAG_APP_ICON: Change `;
      }
      let i18n_2;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_2582674642057285571$$LIBS_BOOKINGS_SRC_LIB_DESK_LIST_FIELD_COMPONENT_TS_2 = goog.getMsg("{$startTagAppIcon}close{$closeTagAppIcon} Remove ", {
          "closeTagAppIcon": "\uFFFD/#22\uFFFD",
          "startTagAppIcon": "\uFFFD#22\uFFFD"
        }, {
          original_code: {
            "closeTagAppIcon": "</app-icon>",
            "startTagAppIcon": "<app-icon>"
          }
        });
        i18n_2 = MSG_EXTERNAL_2582674642057285571$$LIBS_BOOKINGS_SRC_LIB_DESK_LIST_FIELD_COMPONENT_TS_2;
      } else {
        i18n_2 = $localize`:␟a386ba350cdee69beeb12a908d96f0724ddc2054␟2582674642057285571:${"\uFFFD#22\uFFFD"}:START_TAG_APP_ICON:close${"\uFFFD/#22\uFFFD"}:CLOSE_TAG_APP_ICON: Remove `;
      }
      return [["placeholder", ""], i18n_0, i18n_1, i18n_2, ["list", "", 1, "space-y-2"], ["desk", "", "class", "relative p-2 rounded-lg w-full flex items-center shadow border border-base-200", 4, "ngFor", "ngForOf"], ["btn", "", "matRipple", "", "name", "add-desk", 1, "w-full", "inverse", "mt-2", 3, "click"], [1, "flex", "items-center", "justify-center", "space-x-2"], [1, "flex", "items-center", "flex-wrap", "sm:space-x-2", "mb-2"], [1, "flex-1", "min-w-[256px]", "space-y-2"], ["desk", "", 1, "relative", "p-2", "rounded-lg", "w-full", "flex", "items-center", "shadow", "border", "border-base-200"], ["class", "flex flex-col", 4, "ngIf"], [1, "w-20", "h-20", "rounded-xl", "bg-base-200", "mr-4", "overflow-hidden", "flex", "items-center", "justify-center"], ["auth", "", "class", "min-h-full object-cover", 3, "source", 4, "ngIf", "ngIfElse"], [1, "space-y-2", "pb-4"], [1, "font-medium"], [1, "flex", "items-center", "text-sm", "space-x-2"], [1, "text-blue-500"], [1, "absolute", "bottom-0", "right-0", "flex", "items-center", "justify-end", "text-xs"], ["btn", "", "matRipple", "", "name", "edit-desk", 1, "clear", 3, "click"], [1, "flex", "items-center", "space-x-2"], ["btn", "", "matRipple", "", "name", "remove-desk", 1, "clear", 3, "click"], ["icon", "", "matRipple", "", "name", "toggle-desk-favourite", 1, "absolute", "top-1", "right-1", 3, "click"], [1, "flex", "flex-col"], ["for", "title"], ["features", "", 1, "flex", "items-center", "flex-wrap", "space-x-2"], [3, "ngModel", "ngModelOptions", "ngModelChange", 4, "ngFor", "ngForOf"], [3, "ngModelChange", "ngModel", "ngModelOptions"], ["auth", "", 1, "min-h-full", "object-cover", 3, "source"], ["src", "assets/icons/desk-placeholder.svg", 1, "m-auto"]];
    },
    template: function DeskListFieldComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](0, "div", 4);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](1, DeskListFieldComponent_div_1_Template, 26, 8, "div", 5);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](2, "button", 6);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵlistener"]("click", function DeskListFieldComponent_Template_button_click_2_listener() {
          return ctx.changeResources();
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](3, "div", 7)(4, "app-icon");
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](5, "search");
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](6, "span");
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵi18n"](7, 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]()()();
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](8, "div", 8);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelement"](9, "div", 9);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
      }
      if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngForOf", ctx.items);
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_7__.NgForOf, _angular_common__WEBPACK_IMPORTED_MODULE_7__.NgIf, _angular_forms__WEBPACK_IMPORTED_MODULE_6__.NgControlStatus, _angular_forms__WEBPACK_IMPORTED_MODULE_6__.NgModel, _angular_material_checkbox__WEBPACK_IMPORTED_MODULE_8__.MatCheckbox, _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_2__.IconComponent, _components_src_lib_authenticated_image_directive__WEBPACK_IMPORTED_MODULE_3__.AuthenticatedImageDirective, _angular_material_core__WEBPACK_IMPORTED_MODULE_9__.MatRipple]
  });
}

/***/ }),

/***/ 67254:
/*!*****************************************************************!*\
  !*** ./libs/bookings/src/lib/desk-questions-modal.component.ts ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DeskQuestionsModalComponent: () => (/* binding */ DeskQuestionsModalComponent)
/* harmony export */ });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/forms */ 34456);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _angular_material_radio__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/material/radio */ 53804);
/* harmony import */ var _angular_material_dialog__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/material/dialog */ 12587);
/* harmony import */ var _angular_material_core__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @angular/material/core */ 74646);









function DeskQuestionsModalComponent_div_0_Template(rf, ctx) {
  if (rf & 1) {
    const _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div", 8)(1, "h2", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵi18n"](2, 1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](3, "main", 10)(4, "div", 11)(5, "label");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵi18nStart"](6, 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](7, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵi18nEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](8, "mat-radio-group", 12)(9, "mat-radio-button", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](10, "Yes");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](11, "mat-radio-button", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](12, "No");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]()()();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](13, "div", 11)(14, "label");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵi18nStart"](15, 3);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](16, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵi18nEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](17, "mat-radio-group", 14)(18, "mat-radio-button", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](19, "Yes");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](20, "mat-radio-button", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](21, "No");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]()()();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](22, "div", 15)(23, "label");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵi18nStart"](24, 4);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](25, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵi18nEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](26, "mat-radio-group", 16)(27, "mat-radio-button", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](28, "Yes");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](29, "mat-radio-button", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](30, "No");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]()()()();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](31, "footer", 17)(32, "button", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function DeskQuestionsModalComponent_div_0_Template_button_click_32_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r1);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵresetView"](ctx_r1.submit());
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵi18n"](33, 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](34, "button", 19)(35, "i", 20);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](36, "close");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]()()();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("formGroup", ctx_r1.form);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](6);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("value", true);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("value", false);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](7);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("value", true);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("value", false);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](7);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("value", true);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("value", false);
  }
}
function DeskQuestionsModalComponent_ng_template_1_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "main", 21)(1, "p", 22);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵi18n"](2, 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](3, "button", 19)(4, "i", 20);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](5, "close");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]()()();
  }
}
class DeskQuestionsModalComponent {
  constructor() {
    this.event = new _angular_core__WEBPACK_IMPORTED_MODULE_1__.EventEmitter();
    this.form = new _angular_forms__WEBPACK_IMPORTED_MODULE_2__.FormGroup({
      travelled: new _angular_forms__WEBPACK_IMPORTED_MODULE_2__.FormControl(false),
      unwell: new _angular_forms__WEBPACK_IMPORTED_MODULE_2__.FormControl(false),
      contact: new _angular_forms__WEBPACK_IMPORTED_MODULE_2__.FormControl(false)
    });
  }
  submit() {
    this.form.markAllAsTouched();
    if (Object.keys(this.form.value).find(key => this.form.value[key] === true || this.form.value[key] === 'true')) {
      this.failure = true;
      return;
    }
    this.event.emit({
      reason: 'done'
    });
  }
  static #_ = this.ɵfac = function DeskQuestionsModalComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || DeskQuestionsModalComponent)();
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdefineComponent"]({
    type: DeskQuestionsModalComponent,
    selectors: [["desk-question-modal"]],
    outputs: {
      event: "event"
    },
    decls: 3,
    vars: 2,
    consts: () => {
      let i18n_0;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_877348132538805077$$LIBS_BOOKINGS_SRC_LIB_DESK_QUESTIONS_MODAL_COMPONENT_TS_0 = goog.getMsg("COVID-19 Questionnaire");
        i18n_0 = MSG_EXTERNAL_877348132538805077$$LIBS_BOOKINGS_SRC_LIB_DESK_QUESTIONS_MODAL_COMPONENT_TS_0;
      } else {
        i18n_0 = $localize`:␟02006a13b8e6aacb7a6e15bafd8004ed529f5d81␟877348132538805077:COVID-19 Questionnaire`;
      }
      let i18n_1;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_1650520403092579087$$LIBS_BOOKINGS_SRC_LIB_DESK_QUESTIONS_MODAL_COMPONENT_TS_1 = goog.getMsg(" Have you travelled overseas within the last 14 days?{$startTagSpan}*{$closeTagSpan}", {
          "closeTagSpan": "\uFFFD/#7\uFFFD",
          "startTagSpan": "\uFFFD#7\uFFFD"
        }, {
          original_code: {
            "closeTagSpan": "</span>",
            "startTagSpan": "<span>"
          }
        });
        i18n_1 = MSG_EXTERNAL_1650520403092579087$$LIBS_BOOKINGS_SRC_LIB_DESK_QUESTIONS_MODAL_COMPONENT_TS_1;
      } else {
        i18n_1 = $localize`:␟dad7efbd2320e5ea935aef911f18cbcb24690133␟1650520403092579087: Have you travelled overseas within the last 14 days?${"\uFFFD#7\uFFFD"}:START_TAG_SPAN:*${"\uFFFD/#7\uFFFD"}:CLOSE_TAG_SPAN:`;
      }
      let i18n_2;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_1182497320820036810$$LIBS_BOOKINGS_SRC_LIB_DESK_QUESTIONS_MODAL_COMPONENT_TS_2 = goog.getMsg(" Are you unwell or experiencing any cold or flu-like symptoms?{$startTagSpan}*{$closeTagSpan}", {
          "closeTagSpan": "\uFFFD/#16\uFFFD",
          "startTagSpan": "\uFFFD#16\uFFFD"
        }, {
          original_code: {
            "closeTagSpan": "</span>",
            "startTagSpan": "<span>"
          }
        });
        i18n_2 = MSG_EXTERNAL_1182497320820036810$$LIBS_BOOKINGS_SRC_LIB_DESK_QUESTIONS_MODAL_COMPONENT_TS_2;
      } else {
        i18n_2 = $localize`:␟cf50bf8de6c6db836da440c89a375631f7ba3fb0␟1182497320820036810: Are you unwell or experiencing any cold or flu-like symptoms?${"\uFFFD#16\uFFFD"}:START_TAG_SPAN:*${"\uFFFD/#16\uFFFD"}:CLOSE_TAG_SPAN:`;
      }
      let i18n_3;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_737527639567676154$$LIBS_BOOKINGS_SRC_LIB_DESK_QUESTIONS_MODAL_COMPONENT_TS_3 = goog.getMsg(" Have you had contact with anyone with suspected COVID-19?{$startTagSpan}*{$closeTagSpan}", {
          "closeTagSpan": "\uFFFD/#25\uFFFD",
          "startTagSpan": "\uFFFD#25\uFFFD"
        }, {
          original_code: {
            "closeTagSpan": "</span>",
            "startTagSpan": "<span>"
          }
        });
        i18n_3 = MSG_EXTERNAL_737527639567676154$$LIBS_BOOKINGS_SRC_LIB_DESK_QUESTIONS_MODAL_COMPONENT_TS_3;
      } else {
        i18n_3 = $localize`:␟273153c91358de15d124ff2966859d9949080f4c␟737527639567676154: Have you had contact with anyone with suspected COVID-19?${"\uFFFD#25\uFFFD"}:START_TAG_SPAN:*${"\uFFFD/#25\uFFFD"}:CLOSE_TAG_SPAN:`;
      }
      let i18n_4;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_935187492052582731$$LIBS_BOOKINGS_SRC_LIB_DESK_QUESTIONS_MODAL_COMPONENT_TS_4 = goog.getMsg("Submit");
        i18n_4 = MSG_EXTERNAL_935187492052582731$$LIBS_BOOKINGS_SRC_LIB_DESK_QUESTIONS_MODAL_COMPONENT_TS_4;
      } else {
        i18n_4 = $localize`:␟71c77bb8cecdf11ec3eead24dd1ba506573fa9cd␟935187492052582731:Submit`;
      }
      let i18n_5;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_4401678084033805848$$LIBS_BOOKINGS_SRC_LIB_DESK_QUESTIONS_MODAL_COMPONENT_TS_5 = goog.getMsg(" Your request to work from the office has been rejected based on your response to the compulsory Covid-19 questions. Please feel free to submit a new request when circumstances change in a way that changes your answer to the questions. ");
        i18n_5 = MSG_EXTERNAL_4401678084033805848$$LIBS_BOOKINGS_SRC_LIB_DESK_QUESTIONS_MODAL_COMPONENT_TS_5;
      } else {
        i18n_5 = $localize`:␟17d62f424c2c025579e1ec0e3f5ad971f57681df␟4401678084033805848: Your request to work from the office has been rejected based on your response to the compulsory Covid-19 questions. Please feel free to submit a new request when circumstances change in a way that changes your answer to the questions. `;
      }
      return [["fail_state", ""], i18n_0, i18n_1, i18n_2, i18n_3, i18n_4, i18n_5, ["class", "relative", 4, "ngIf", "ngIfElse"], [1, "relative"], [1, "p-4", "text-xl"], [1, "p-4", 3, "formGroup"], [1, "flex", "flex-col", "mb-4"], ["formControlName", "travelled", 1, "space-x-2"], [3, "value"], ["formControlName", "unwell", 1, "space-x-2"], [1, "flex", "flex-col"], ["formControlName", "contact", 1, "space-x-2"], [1, "flex", "justify-center", "items-center", "p-2"], ["btn", "", "matRipple", "", 3, "click"], ["close", "", "icon", "", "matRipple", "", "mat-dialog-close", ""], [1, "material-icons"], ["failure", "", 1, "pt-8", "relative"], [1, "p-4"]];
    },
    template: function DeskQuestionsModalComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](0, DeskQuestionsModalComponent_div_0_Template, 37, 7, "div", 7)(1, DeskQuestionsModalComponent_ng_template_1_Template, 6, 0, "ng-template", null, 0, _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplateRefExtractor"]);
      }
      if (rf & 2) {
        const fail_state_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵreference"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", !ctx.failure)("ngIfElse", fail_state_r3);
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_3__.NgIf, _angular_forms__WEBPACK_IMPORTED_MODULE_2__.NgControlStatus, _angular_forms__WEBPACK_IMPORTED_MODULE_2__.NgControlStatusGroup, _angular_forms__WEBPACK_IMPORTED_MODULE_2__.FormGroupDirective, _angular_forms__WEBPACK_IMPORTED_MODULE_2__.FormControlName, _angular_material_radio__WEBPACK_IMPORTED_MODULE_4__.MatRadioGroup, _angular_material_radio__WEBPACK_IMPORTED_MODULE_4__.MatRadioButton, _angular_material_dialog__WEBPACK_IMPORTED_MODULE_5__.MatDialogClose, _angular_material_core__WEBPACK_IMPORTED_MODULE_6__.MatRipple],
    styles: ["main[_ngcontent-%COMP%] {\n                width: 24rem;\n                max-width: calc(100vw - 4.5rem);\n            }\n\n            [close][_ngcontent-%COMP%] {\n                position: absolute;\n                top: 0.5rem;\n                right: 0.5rem;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRlc2stcXVlc3Rpb25zLW1vZGFsLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1lBQ1k7Z0JBQ0ksWUFBWTtnQkFDWiwrQkFBK0I7WUFDbkM7O1lBRUE7Z0JBQ0ksa0JBQWtCO2dCQUNsQixXQUFXO2dCQUNYLGFBQWE7WUFDakIiLCJmaWxlIjoiZGVzay1xdWVzdGlvbnMtbW9kYWwuY29tcG9uZW50LnRzIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICBtYWluIHtcbiAgICAgICAgICAgICAgICB3aWR0aDogMjRyZW07XG4gICAgICAgICAgICAgICAgbWF4LXdpZHRoOiBjYWxjKDEwMHZ3IC0gNC41cmVtKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgW2Nsb3NlXSB7XG4gICAgICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICAgICAgICAgIHRvcDogMC41cmVtO1xuICAgICAgICAgICAgICAgIHJpZ2h0OiAwLjVyZW07XG4gICAgICAgICAgICB9XG4gICAgICAgICJdfQ== */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvYm9va2luZ3Mvc3JjL2xpYi9kZXNrLXF1ZXN0aW9ucy1tb2RhbC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLFlBQVk7Z0JBQ1osK0JBQStCO1lBQ25DOztZQUVBO2dCQUNJLGtCQUFrQjtnQkFDbEIsV0FBVztnQkFDWCxhQUFhO1lBQ2pCOztBQUVaLGd0QkFBZ3RCIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICBtYWluIHtcbiAgICAgICAgICAgICAgICB3aWR0aDogMjRyZW07XG4gICAgICAgICAgICAgICAgbWF4LXdpZHRoOiBjYWxjKDEwMHZ3IC0gNC41cmVtKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgW2Nsb3NlXSB7XG4gICAgICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICAgICAgICAgIHRvcDogMC41cmVtO1xuICAgICAgICAgICAgICAgIHJpZ2h0OiAwLjVyZW07XG4gICAgICAgICAgICB9XG4gICAgICAgICJdLCJzb3VyY2VSb290IjoiIn0= */"]
  });
}

/***/ }),

/***/ 42280:
/*!***************************************************************************!*\
  !*** ./libs/bookings/src/lib/desk-select-modal/desk-details.component.ts ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DeskDetailsComponent: () => (/* binding */ DeskDetailsComponent)
/* harmony export */ });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var libs_components_src_lib_map_pin_component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! libs/components/src/lib/map-pin.component */ 71865);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../components/src/lib/icon.component */ 69434);
/* harmony import */ var _components_src_lib_interactive_map_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../components/src/lib/interactive-map.component */ 24918);
/* harmony import */ var _components_src_lib_image_carousel_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../components/src/lib/image-carousel.component */ 65277);
/* harmony import */ var _angular_material_core__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @angular/material/core */ 74646);








const _c0 = () => [];
const _c1 = () => ({
  disable_pan: true,
  disable_zoom: true
});
function DeskDetailsComponent_ng_container_0_image_carousel_2_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelement"](0, "image-carousel", 22);
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("images", ctx_r1.desk.images);
  }
}
function DeskDetailsComponent_ng_container_0_section_31_div_3_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](0, "div", 25)(1, "div", 26);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const feat_r3 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtextInterpolate"](feat_r3);
  }
}
function DeskDetailsComponent_ng_container_0_section_31_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](0, "section", 23)(1, "h2", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵi18n"](2, 3);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](3, DeskDetailsComponent_ng_container_0_section_31_div_3_Template, 3, 1, "div", 24);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngForOf", ctx_r1.desk.features || _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpureFunction0"](1, _c0));
  }
}
function DeskDetailsComponent_ng_container_0_section_32_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](0, "section", 27);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelement"](1, "interactive-map", 28);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("src", ctx_r1.map_url)("focus", ctx_r1.desk.map_id || ctx_r1.desk.id)("features", ctx_r1.features)("options", _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpureFunction0"](4, _c1));
  }
}
function DeskDetailsComponent_ng_container_0_Template(rf, ctx) {
  if (rf & 1) {
    const _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](1, "section", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](2, DeskDetailsComponent_ng_container_0_image_carousel_2_Template, 1, 1, "image-carousel", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](3, "button", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵlistener"]("click", function DeskDetailsComponent_ng_container_0_Template_button_click_3_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵrestoreView"](_r1);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵresetView"](ctx_r1.close.emit());
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](4, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](5, "arrow_back");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](6, "button", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵlistener"]("click", function DeskDetailsComponent_ng_container_0_Template_button_click_6_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵrestoreView"](_r1);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵresetView"](ctx_r1.toggleFav.emit());
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](7, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](8);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]()()();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](9, "div", 10)(10, "section", 11)(11, "h2", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](12);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](13, "section", 13)(14, "h2", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](15, "Details");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](16, "div", 15)(17, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](18, "person");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](19, "p");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵi18n"](20, 1);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](21, "div", 15)(22, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](23, "desk");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](24, "p");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](25);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](26, "div", 15)(27, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](28, "place");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](29, "p");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](30);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]()()();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](31, DeskDetailsComponent_ng_container_0_section_31_Template, 4, 2, "section", 16)(32, DeskDetailsComponent_ng_container_0_section_32_Template, 2, 5, "section", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](33, "div", 18)(34, "button", 19);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵlistener"]("click", function DeskDetailsComponent_ng_container_0_Template_button_click_34_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵrestoreView"](_r1);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"]();
      ctx_r1.active = !ctx_r1.active;
      return _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵresetView"](ctx_r1.activeChange.emit(ctx_r1.active));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](35, "div", 20)(36, "app-icon", 21);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](37);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](38, "p");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵi18n"](39, 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]()()()();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementContainerEnd"]();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵclassProp"]("sm:h-64", ctx_r1.desk.images == null ? null : ctx_r1.desk.images.length)("h-40", ctx_r1.desk.images == null ? null : ctx_r1.desk.images.length)("sm:h-0", !(ctx_r1.desk.images == null ? null : ctx_r1.desk.images.length))("h-12", !(ctx_r1.desk.images == null ? null : ctx_r1.desk.images.length))("!bg-transparent", !(ctx_r1.desk.images == null ? null : ctx_r1.desk.images.length));
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngIf", ctx_r1.desk.images == null ? null : ctx_r1.desk.images.length);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵclassProp"]("text-info-content", ctx_r1.fav)("!bg-info", ctx_r1.fav);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtextInterpolate"](ctx_r1.fav ? "favorite" : "favorite_border");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtextInterpolate1"](" ", ctx_r1.desk.display_name || ctx_r1.desk.name || ctx_r1.desk.id, " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](13);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtextInterpolate1"](" ", ctx_r1.desk.display_name || ctx_r1.desk.name || ctx_r1.desk.id, " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtextInterpolate"]((ctx_r1.desk.zone == null ? null : ctx_r1.desk.zone.display_name) || (ctx_r1.desk.zone == null ? null : ctx_r1.desk.zone.name));
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngIf", ctx_r1.desk.features == null ? null : ctx_r1.desk.features.length);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngIf", !ctx_r1.hide_map);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵclassProp"]("inverse", ctx_r1.active);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtextInterpolate"](ctx_r1.active ? "remove" : "add");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵi18nExp"](ctx_r1.active);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵi18nApply"](39);
  }
}
function DeskDetailsComponent_ng_template_1_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](0, "div", 29)(1, "p", 30);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵi18n"](2, 4);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]()();
  }
}
class DeskDetailsComponent {
  constructor() {
    this.fav = false;
    this.active = false;
    this.hide_map = false;
    this.close = new _angular_core__WEBPACK_IMPORTED_MODULE_4__.EventEmitter();
    this.toggleFav = new _angular_core__WEBPACK_IMPORTED_MODULE_4__.EventEmitter();
    this.activeChange = new _angular_core__WEBPACK_IMPORTED_MODULE_4__.EventEmitter();
    this.map_url = '';
    this.features = [];
  }
  ngOnChanges(changes) {
    if (changes.desk && this.desk) {
      this.updateFeature();
    }
  }
  updateFeature() {
    this.map_url = this.desk.zone.map_id;
    this.features = [{
      location: this.desk.map_id || this.desk.id,
      content: libs_components_src_lib_map_pin_component__WEBPACK_IMPORTED_MODULE_0__.MapPinComponent
    }];
  }
  static #_ = this.ɵfac = function DeskDetailsComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || DeskDetailsComponent)();
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵdefineComponent"]({
    type: DeskDetailsComponent,
    selectors: [["desk-details"]],
    inputs: {
      desk: "desk",
      fav: "fav",
      active: "active",
      hide_map: "hide_map"
    },
    outputs: {
      close: "close",
      toggleFav: "toggleFav",
      activeChange: "activeChange"
    },
    features: [_angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵNgOnChangesFeature"]],
    decls: 3,
    vars: 2,
    consts: () => {
      let i18n_0;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_6431414344811875961$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_DETAILS_COMPONENT_TS_0 = goog.getMsg("Single desk");
        i18n_0 = MSG_EXTERNAL_6431414344811875961$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_DETAILS_COMPONENT_TS_0;
      } else {
        i18n_0 = $localize`:␟f3cd229363e020d7ceb13bb351bb87f86dda78ef␟6431414344811875961:Single desk`;
      }
      let i18n_1;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_2952235329246771628$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_DETAILS_COMPONENT_TS_1 = goog.getMsg("{VAR_SELECT, select, true {Remove from booking } false {Add to booking }}");
        i18n_1 = MSG_EXTERNAL_2952235329246771628$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_DETAILS_COMPONENT_TS_1;
      } else {
        i18n_1 = $localize`:␟193cbdbbcae6ad83fa2f2ac8d7dcb6b41c384a89␟2952235329246771628:{VAR_SELECT, select, true {Remove from booking } false {Add to booking }}`;
      }
      i18n_1 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵi18nPostprocess"](i18n_1, {
        "VAR_SELECT": "\uFFFD0\uFFFD"
      });
      let i18n_2;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_5607930927273386767$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_DETAILS_COMPONENT_TS_2 = goog.getMsg(" {$icu} ", {
          "icu": i18n_1
        }, {
          original_code: {
            "icu": "{ active, select, true { Remove from booking } false\n                            { Add to booking } }"
          }
        });
        i18n_2 = MSG_EXTERNAL_5607930927273386767$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_DETAILS_COMPONENT_TS_2;
      } else {
        i18n_2 = $localize`:␟fc6b8194e480db3111367487d3a97bdf5a6333a7␟5607930927273386767: ${i18n_1}:ICU: `;
      }
      let i18n_3;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_1551920764795208868$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_DETAILS_COMPONENT_TS_3 = goog.getMsg("Facilities");
        i18n_3 = MSG_EXTERNAL_1551920764795208868$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_DETAILS_COMPONENT_TS_3;
      } else {
        i18n_3 = $localize`:␟bf10c600bd861cfd0a23f4759562ee0ae9dbe19f␟1551920764795208868:Facilities`;
      }
      let i18n_4;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_4621791550614740403$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_DETAILS_COMPONENT_TS_4 = goog.getMsg(" Select a desk to view it's details ");
        i18n_4 = MSG_EXTERNAL_4621791550614740403$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_DETAILS_COMPONENT_TS_4;
      } else {
        i18n_4 = $localize`:␟c6efe811f5410838382ce9adb2636cb75d783ebc␟4621791550614740403: Select a desk to view it's details `;
      }
      return [["emptyState", ""], i18n_0, i18n_2, i18n_3, i18n_4, [4, "ngIf", "ngIfElse"], ["image", "", 1, "relative", "w-full", "bg-base-300"], ["class", "absolute inset-0", 3, "images", 4, "ngIf"], ["icon", "", "matRipple", "", "name", "close-desk-details", 1, "absolute", "top-2", "left-2", "bg-base-200", "sm:hidden", "text-base-content", 3, "click"], ["icon", "", "matRipple", "", "name", "toggle-desk-favourite-details", 1, "absolute", "top-2", "right-2", "bg-base-200", 3, "click"], [1, "p-2", "space-y-2", "flex-1", "h-[calc(100%-19.75rem)]", "overflow-auto"], ["actions", "", 1, "z-0", "pb-2", "border-b"], [1, "text-xl", "font-medium", "mb-2", "mt-4"], ["details", "", 1, "space-y-2", "pb-2", "border-b"], [1, "text-xl", "font-medium"], [1, "flex", "items-center", "space-x-2"], ["facilities", "", "class", "space-y-2 pb-2 border-b", 4, "ngIf"], ["map", "", "class", "w-full mx-auto h-64 sm:h-48 relative border border-base-200 overflow-hidden rounded", 4, "ngIf"], [1, "px-2", "pt-2", "pb-[5.5rem]", "border-t", "border-base-200", "shadow", "sm:hidden"], ["btn", "", "matRipple", "", "name", "toggle-desk-details", 1, "w-full", 3, "click"], [1, "flex", "items-center", "justify-center"], [1, "text-2xl"], [1, "absolute", "inset-0", 3, "images"], ["facilities", "", 1, "space-y-2", "pb-2", "border-b"], ["class", "flex items-center flex-wrap space-x-2", 4, "ngFor", "ngForOf"], [1, "flex", "items-center", "flex-wrap", "space-x-2"], ["for", "feat", 1, "flex-1", "w-1/2"], ["map", "", 1, "w-full", "mx-auto", "h-64", "sm:h-48", "relative", "border", "border-base-200", "overflow-hidden", "rounded"], [1, "pointer-events-none", 3, "src", "focus", "features", "options"], ["empty", "", 1, "p-16", "flex", "flex-col", "items-center", "justify-center", "space-y-2"], [1, "opacity-30", "text-center"]];
    },
    template: function DeskDetailsComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](0, DeskDetailsComponent_ng_container_0_Template, 40, 25, "ng-container", 5)(1, DeskDetailsComponent_ng_template_1_Template, 3, 0, "ng-template", null, 0, _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplateRefExtractor"]);
      }
      if (rf & 2) {
        const emptyState_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵreference"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngIf", ctx.desk)("ngIfElse", emptyState_r4);
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_5__.NgForOf, _angular_common__WEBPACK_IMPORTED_MODULE_5__.NgIf, _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_1__.IconComponent, _components_src_lib_interactive_map_component__WEBPACK_IMPORTED_MODULE_2__.InteractiveMapComponent, _components_src_lib_image_carousel_component__WEBPACK_IMPORTED_MODULE_3__.ImageCarouselComponent, _angular_material_core__WEBPACK_IMPORTED_MODULE_6__.MatRipple],
    styles: ["[_nghost-%COMP%] {\n                display: flex;\n                flex-direction: column;\n                width: 30%;\n                min-width: 20rem;\n                height: 100%;\n                min-height: 65vh;\n                background: white;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRlc2stZGV0YWlscy5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLGFBQWE7Z0JBQ2Isc0JBQXNCO2dCQUN0QixVQUFVO2dCQUNWLGdCQUFnQjtnQkFDaEIsWUFBWTtnQkFDWixnQkFBZ0I7Z0JBQ2hCLGlCQUFpQjtZQUNyQiIsImZpbGUiOiJkZXNrLWRldGFpbHMuY29tcG9uZW50LnRzIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICA6aG9zdCB7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgICAgICAgIHdpZHRoOiAzMCU7XG4gICAgICAgICAgICAgICAgbWluLXdpZHRoOiAyMHJlbTtcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgICAgICAgICAgbWluLWhlaWdodDogNjV2aDtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiB3aGl0ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl19 */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvYm9va2luZ3Mvc3JjL2xpYi9kZXNrLXNlbGVjdC1tb2RhbC9kZXNrLWRldGFpbHMuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxhQUFhO2dCQUNiLHNCQUFzQjtnQkFDdEIsVUFBVTtnQkFDVixnQkFBZ0I7Z0JBQ2hCLFlBQVk7Z0JBQ1osZ0JBQWdCO2dCQUNoQixpQkFBaUI7WUFDckI7O0FBRVosd3VCQUF3dUIiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIDpob3N0IHtcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgICAgICAgICAgd2lkdGg6IDMwJTtcbiAgICAgICAgICAgICAgICBtaW4td2lkdGg6IDIwcmVtO1xuICAgICAgICAgICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgICAgICAgICBtaW4taGVpZ2h0OiA2NXZoO1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IHdoaXRlO1xuICAgICAgICAgICAgfVxuICAgICAgICAiXSwic291cmNlUm9vdCI6IiJ9 */"]
  });
}

/***/ }),

/***/ 24174:
/*!***********************************************************************************!*\
  !*** ./libs/bookings/src/lib/desk-select-modal/desk-filters-display.component.ts ***!
  \***********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DeskFiltersDisplayComponent: () => (/* binding */ DeskFiltersDisplayComponent)
/* harmony export */ });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var _desk_filters_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./desk-filters.component */ 4365);
/* harmony import */ var _booking_form_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../booking-form.service */ 18379);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! date-fns */ 56441);
/* harmony import */ var _angular_material_bottom_sheet__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @angular/material/bottom-sheet */ 15244);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../components/src/lib/icon.component */ 69434);
/* harmony import */ var _angular_material_core__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @angular/material/core */ 74646);













const _c0 = () => [];
function DeskFiltersDisplayComponent_ng_container_13_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpipe"](2, "date");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpipe"](3, "date");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementContainerEnd"]();
  }
  if (rf & 2) {
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtextInterpolate2"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpipeBind2"](2, 2, ctx_r0.start, ctx_r0.time_format), " \u2014 ", _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpipeBind2"](3, 5, ctx_r0.end, ctx_r0.time_format), " ");
  }
}
function DeskFiltersDisplayComponent_ng_container_14_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](1, "All Day");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementContainerEnd"]();
  }
}
function DeskFiltersDisplayComponent_div_15_Template(rf, ctx) {
  if (rf & 1) {
    const _r2 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](0, "div", 15)(1, "p");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](3, "button", 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵlistener"]("click", function DeskFiltersDisplayComponent_div_15_Template_button_click_3_listener() {
      const feat_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵrestoreView"](_r2).$implicit;
      const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵresetView"](ctx_r0.setFeature(feat_r3, false));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](4, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](5, "close");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]()()();
  }
  if (rf & 2) {
    const feat_r3 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtextInterpolate"](feat_r3);
  }
}
function DeskFiltersDisplayComponent_div_17_Template(rf, ctx) {
  if (rf & 1) {
    const _r4 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](0, "div", 17)(1, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵi18n"](2, 3);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](3, "button", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵlistener"]("click", function DeskFiltersDisplayComponent_div_17_Template_button_click_3_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵrestoreView"](_r4);
      const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵresetView"](ctx_r0.setOptions({
        show_fav: false
      }));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](4, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](5, "close");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]()()();
  }
}
class DeskFiltersDisplayComponent extends _placeos_common__WEBPACK_IMPORTED_MODULE_0__.AsyncHandler {
  get all_day() {
    return this._state.form.value.all_day;
  }
  get start() {
    return this._state.form.value.date;
  }
  get end() {
    const {
      date,
      duration,
      all_day
    } = this._state.form.value;
    if (all_day) return (0,date_fns__WEBPACK_IMPORTED_MODULE_5__.endOfDay)(date);
    return date + duration * 60 * 1000;
  }
  get time_format() {
    return this._settings.time_format;
  }
  constructor(_bsheet, _state, _settings) {
    super();
    this._bsheet = _bsheet;
    this._state = _state;
    this._settings = _settings;
    this.view = 'list';
    this.viewChange = new _angular_core__WEBPACK_IMPORTED_MODULE_4__.EventEmitter();
    this.options = this._state.options;
    this.setOptions = o => this._state.setOptions(o);
    this.setFeature = (f, e) => this._state.setFeature(f, e);
    this.editFilter = () => this._bsheet.open(_desk_filters_component__WEBPACK_IMPORTED_MODULE_1__.DeskFiltersComponent);
  }
  static #_ = this.ɵfac = function DeskFiltersDisplayComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || DeskFiltersDisplayComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵdirectiveInject"](_angular_material_bottom_sheet__WEBPACK_IMPORTED_MODULE_6__.MatBottomSheet), _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵdirectiveInject"](_booking_form_service__WEBPACK_IMPORTED_MODULE_2__.BookingFormService), _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵdirectiveInject"](_placeos_common__WEBPACK_IMPORTED_MODULE_0__.SettingsService));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵdefineComponent"]({
    type: DeskFiltersDisplayComponent,
    selectors: [["desk-filters-display"]],
    inputs: {
      view: "view"
    },
    outputs: {
      viewChange: "viewChange"
    },
    features: [_angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵInheritDefinitionFeature"]],
    decls: 19,
    vars: 17,
    consts: () => {
      let i18n_0;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_5208858215712453646$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_FILTERS_DISPLAY_COMPONENT_TS_0 = goog.getMsg(" Filters ");
        i18n_0 = MSG_EXTERNAL_5208858215712453646$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_FILTERS_DISPLAY_COMPONENT_TS_0;
      } else {
        i18n_0 = $localize`:␟19eaa5cd51d70d9ea957eecac78cfd811e9b93d8␟5208858215712453646: Filters `;
      }
      let i18n_1;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_8553228906889869186$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_FILTERS_DISPLAY_COMPONENT_TS_1 = goog.getMsg(" Map ");
        i18n_1 = MSG_EXTERNAL_8553228906889869186$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_FILTERS_DISPLAY_COMPONENT_TS_1;
      } else {
        i18n_1 = $localize`:␟992a9a6a193a56c5b8846dc972c5e1977ee5f1aa␟8553228906889869186: Map `;
      }
      let i18n_2;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_7787942140742011951$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_FILTERS_DISPLAY_COMPONENT_TS_2 = goog.getMsg(" List ");
        i18n_2 = MSG_EXTERNAL_7787942140742011951$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_FILTERS_DISPLAY_COMPONENT_TS_2;
      } else {
        i18n_2 = $localize`:␟4b286e90831dd637c5cd3eb20544664ee7112669␟7787942140742011951: List `;
      }
      let i18n_3;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_1305804744685886428$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_FILTERS_DISPLAY_COMPONENT_TS_3 = goog.getMsg("Favourites Only");
        i18n_3 = MSG_EXTERNAL_1305804744685886428$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_FILTERS_DISPLAY_COMPONENT_TS_3;
      } else {
        i18n_3 = $localize`:␟d6ad8326be48837fe776a268abc758d1c7ba4f05␟1305804744685886428:Favourites Only`;
      }
      return [i18n_0, i18n_1, i18n_2, i18n_3, ["actions", "", 1, "sm:hidden", "space-x-2", "flex", "flex-row", "items-center", "p-2"], ["btn", "", "matRipple", "", "name", "edit-desk-filters", 1, "flex-1", "w-1/2", 3, "click"], [1, "flex", "items-center"], ["btn", "", "matRipple", "", "name", "view-desk-map", 1, "rounded-l", "rounded-r-none", 3, "click"], ["btn", "", "matRipple", "", "name", "view-desk-list", 1, "rounded-r", "rounded-l-none", 3, "click"], ["filters", "", 1, "flex", "items-center", "flex-wrap", "p-2", "w-[35rem]", "max-w-full", "sm:max-w-[35rem]"], ["filter-item", "", "date", ""], ["filter-item", "", "time", ""], [4, "ngIf"], ["filter-item", "", "features", "", 4, "ngFor", "ngForOf"], ["filter-item", "", 4, "ngIf"], ["filter-item", "", "features", ""], ["icon", "", "matRipple", "", "name", "remove-desk-filter", 1, "-mr-4", 3, "click"], ["filter-item", ""], ["icon", "", "matRipple", "", "name", "remove-desk-favs-filter", 1, "-mr-4", 3, "click"]];
    },
    template: function DeskFiltersDisplayComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](0, "section", 4)(1, "button", 5);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵlistener"]("click", function DeskFiltersDisplayComponent_Template_button_click_1_listener() {
          return ctx.editFilter();
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵi18n"](2, 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](3, "div", 6)(4, "button", 7);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵlistener"]("click", function DeskFiltersDisplayComponent_Template_button_click_4_listener() {
          ctx.view = "map";
          return ctx.viewChange.emit(ctx.view);
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵi18n"](5, 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](6, "button", 8);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵlistener"]("click", function DeskFiltersDisplayComponent_Template_button_click_6_listener() {
          ctx.view = "list";
          return ctx.viewChange.emit(ctx.view);
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵi18n"](7, 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]()()();
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](8, "section", 9)(9, "div", 10);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](10);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpipe"](11, "date");
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](12, "div", 11);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](13, DeskFiltersDisplayComponent_ng_container_13_Template, 4, 8, "ng-container", 12)(14, DeskFiltersDisplayComponent_ng_container_14_Template, 2, 0, "ng-container", 12);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](15, DeskFiltersDisplayComponent_div_15_Template, 6, 1, "div", 13);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpipe"](16, "async");
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](17, DeskFiltersDisplayComponent_div_17_Template, 6, 0, "div", 14);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpipe"](18, "async");
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
      }
      if (rf & 2) {
        let tmp_5_0;
        let tmp_6_0;
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](4);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵclassProp"]("inverse", ctx.view !== "map");
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵclassProp"]("inverse", ctx.view !== "list");
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](4);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtextInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpipeBind2"](11, 9, ctx.start, "mediumDate"));
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngIf", !ctx.all_day);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngIf", ctx.all_day);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngForOf", ((tmp_5_0 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpipeBind1"](16, 12, ctx.options)) == null ? null : tmp_5_0.features) || _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpureFunction0"](16, _c0));
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngIf", (tmp_6_0 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpipeBind1"](18, 14, ctx.options)) == null ? null : tmp_6_0.show_fav);
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_7__.NgForOf, _angular_common__WEBPACK_IMPORTED_MODULE_7__.NgIf, _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_3__.IconComponent, _angular_material_core__WEBPACK_IMPORTED_MODULE_8__.MatRipple, _angular_common__WEBPACK_IMPORTED_MODULE_7__.AsyncPipe, _angular_common__WEBPACK_IMPORTED_MODULE_7__.DatePipe],
    styles: ["[filter-item][_ngcontent-%COMP%] {\n                display: flex;\n                align-items: center;\n                padding: 0 1rem;\n                height: 2rem;\n                font-size: 0.875rem;\n                border: 1px solid rgba(0, 0, 0, 0.2);\n                border-radius: 1.25rem;\n                margin-right: 0.5rem;\n                margin-bottom: 0.5rem;\n            }\n\n            [filter-item][_ngcontent-%COMP%]:hover {\n                background: rgba(0, 0, 0, 0.1);\n            }\n\n            [filter-item][_ngcontent-%COMP%]    > *[_ngcontent-%COMP%]    + *[_ngcontent-%COMP%] {\n                margin-left: 0.5rem;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRlc2stZmlsdGVycy1kaXNwbGF5LmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1lBQ1k7Z0JBQ0ksYUFBYTtnQkFDYixtQkFBbUI7Z0JBQ25CLGVBQWU7Z0JBQ2YsWUFBWTtnQkFDWixtQkFBbUI7Z0JBQ25CLG9DQUFvQztnQkFDcEMsc0JBQXNCO2dCQUN0QixvQkFBb0I7Z0JBQ3BCLHFCQUFxQjtZQUN6Qjs7WUFFQTtnQkFDSSw4QkFBOEI7WUFDbEM7O1lBRUE7Z0JBQ0ksbUJBQW1CO1lBQ3ZCIiwiZmlsZSI6ImRlc2stZmlsdGVycy1kaXNwbGF5LmNvbXBvbmVudC50cyIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgW2ZpbHRlci1pdGVtXSB7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICAgICAgICAgIHBhZGRpbmc6IDAgMXJlbTtcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDJyZW07XG4gICAgICAgICAgICAgICAgZm9udC1zaXplOiAwLjg3NXJlbTtcbiAgICAgICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCByZ2JhKDAsIDAsIDAsIDAuMik7XG4gICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMS4yNXJlbTtcbiAgICAgICAgICAgICAgICBtYXJnaW4tcmlnaHQ6IDAuNXJlbTtcbiAgICAgICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAwLjVyZW07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIFtmaWx0ZXItaXRlbV06aG92ZXIge1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IHJnYmEoMCwgMCwgMCwgMC4xKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgW2ZpbHRlci1pdGVtXSA+ICogKyAqIHtcbiAgICAgICAgICAgICAgICBtYXJnaW4tbGVmdDogMC41cmVtO1xuICAgICAgICAgICAgfVxuICAgICAgICAiXX0= */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvYm9va2luZ3Mvc3JjL2xpYi9kZXNrLXNlbGVjdC1tb2RhbC9kZXNrLWZpbHRlcnMtZGlzcGxheS5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLGFBQWE7Z0JBQ2IsbUJBQW1CO2dCQUNuQixlQUFlO2dCQUNmLFlBQVk7Z0JBQ1osbUJBQW1CO2dCQUNuQixvQ0FBb0M7Z0JBQ3BDLHNCQUFzQjtnQkFDdEIsb0JBQW9CO2dCQUNwQixxQkFBcUI7WUFDekI7O1lBRUE7Z0JBQ0ksOEJBQThCO1lBQ2xDOztZQUVBO2dCQUNJLG1CQUFtQjtZQUN2Qjs7QUFFWixvd0NBQW93QyIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgW2ZpbHRlci1pdGVtXSB7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICAgICAgICAgIHBhZGRpbmc6IDAgMXJlbTtcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDJyZW07XG4gICAgICAgICAgICAgICAgZm9udC1zaXplOiAwLjg3NXJlbTtcbiAgICAgICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCByZ2JhKDAsIDAsIDAsIDAuMik7XG4gICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMS4yNXJlbTtcbiAgICAgICAgICAgICAgICBtYXJnaW4tcmlnaHQ6IDAuNXJlbTtcbiAgICAgICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAwLjVyZW07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIFtmaWx0ZXItaXRlbV06aG92ZXIge1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IHJnYmEoMCwgMCwgMCwgMC4xKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgW2ZpbHRlci1pdGVtXSA+ICogKyAqIHtcbiAgICAgICAgICAgICAgICBtYXJnaW4tbGVmdDogMC41cmVtO1xuICAgICAgICAgICAgfVxuICAgICAgICAiXSwic291cmNlUm9vdCI6IiJ9 */"]
  });
}

/***/ }),

/***/ 4365:
/*!***************************************************************************!*\
  !*** ./libs/bookings/src/lib/desk-select-modal/desk-filters.component.ts ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DeskFiltersComponent: () => (/* binding */ DeskFiltersComponent)
/* harmony export */ });
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! date-fns */ 56441);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! date-fns */ 28797);
/* harmony import */ var libs_organisation_src_lib_organisation_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! libs/organisation/src/lib/organisation.service */ 19863);
/* harmony import */ var _booking_form_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../booking-form.service */ 18379);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! rxjs/operators */ 35443);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! rxjs */ 68824);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_material_bottom_sheet__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @angular/material/bottom-sheet */ 15244);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @angular/forms */ 34456);
/* harmony import */ var _angular_material_form_field__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @angular/material/form-field */ 24950);
/* harmony import */ var _angular_material_checkbox__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @angular/material/checkbox */ 97024);
/* harmony import */ var _angular_material_core__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @angular/material/core */ 74646);
/* harmony import */ var _form_fields_src_lib_date_field_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../form-fields/src/lib/date-field.component */ 19608);
/* harmony import */ var _form_fields_src_lib_duration_field_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../form-fields/src/lib/duration-field.component */ 83476);
/* harmony import */ var _form_fields_src_lib_time_field_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../form-fields/src/lib/time-field.component */ 81413);
/* harmony import */ var _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../components/src/lib/icon.component */ 69434);
/* harmony import */ var _angular_material_select__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! @angular/material/select */ 25175);
/* harmony import */ var _components_src_lib_building_pipe__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../components/src/lib/building.pipe */ 56062);
/* harmony import */ var _ngx_translate_core__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! @ngx-translate/core */ 597);
























const _c0 = () => ({
  standalone: true
});
const _c1 = () => [];
function DeskFiltersComponent_button_2_Template(rf, ctx) {
  if (rf & 1) {
    const _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](0, "button", 33);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵlistener"]("click", function DeskFiltersComponent_button_2_Template_button_click_0_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵrestoreView"](_r1);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵresetView"](ctx_r1.close());
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](1, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](2, "keyboard_arrow_left");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]()();
  }
}
function DeskFiltersComponent_mat_form_field_13_mat_option_2_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](0, "mat-option", 37);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const reg_r4 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("value", reg_r4);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtextInterpolate1"](" ", reg_r4.display_name || reg_r4.name, " ");
  }
}
function DeskFiltersComponent_mat_form_field_13_Template(rf, ctx) {
  if (rf & 1) {
    const _r3 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](0, "mat-form-field", 34)(1, "mat-select", 35);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵlistener"]("ngModelChange", function DeskFiltersComponent_mat_form_field_13_Template_mat_select_ngModelChange_1_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵrestoreView"](_r3);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵresetView"](ctx_r1.setRegion($event));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtemplate"](2, DeskFiltersComponent_mat_form_field_13_mat_option_2_Template, 2, 2, "mat-option", 36);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipe"](3, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngModel", ctx_r1.region)("ngModelOptions", _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpureFunction0"](5, _c0));
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngForOf", _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipeBind1"](3, 3, ctx_r1.regions));
  }
}
function DeskFiltersComponent_mat_form_field_15_mat_option_5_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](0, "mat-option", 37);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const bld_r6 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("value", bld_r6);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtextInterpolate1"](" ", bld_r6.display_name || bld_r6.name, " ");
  }
}
function DeskFiltersComponent_mat_form_field_15_Template(rf, ctx) {
  if (rf & 1) {
    const _r5 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](0, "mat-form-field", 34)(1, "mat-select", 38);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipe"](2, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipe"](3, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipe"](4, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵlistener"]("ngModelChange", function DeskFiltersComponent_mat_form_field_15_Template_mat_select_ngModelChange_1_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵrestoreView"](_r5);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵresetView"](ctx_r1.setBuilding($event));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtemplate"](5, DeskFiltersComponent_mat_form_field_15_mat_option_5_Template, 2, 2, "mat-option", 36);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipe"](6, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    let tmp_3_0;
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngModel", _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipeBind1"](2, 4, ctx_r1.building))("ngModelOptions", _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpureFunction0"](12, _c0))("placeholder", ((tmp_3_0 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipeBind1"](3, 6, ctx_r1.building)) == null ? null : tmp_3_0.display_name) || ((tmp_3_0 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipeBind1"](4, 8, ctx_r1.building)) == null ? null : tmp_3_0.name));
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngForOf", _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipeBind1"](6, 10, ctx_r1.buildings));
  }
}
function DeskFiltersComponent_mat_form_field_17_mat_option_3_div_2_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](0, "div", 42);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipe"](2, "building");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](3, "span", 43);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](4, " - ");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    let tmp_4_0;
    const lvl_r8 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"]().$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtextInterpolate1"](" ", (tmp_4_0 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipeBind1"](2, 1, lvl_r8.parent_id)) == null ? null : tmp_4_0.display_name, " ");
  }
}
function DeskFiltersComponent_mat_form_field_17_mat_option_3_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](0, "mat-option", 37)(1, "div", 40);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtemplate"](2, DeskFiltersComponent_mat_form_field_17_mat_option_3_div_2_Template, 5, 3, "div", 41);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](3, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]()()();
  }
  if (rf & 2) {
    const lvl_r8 = ctx.$implicit;
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("value", lvl_r8.id);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngIf", ctx_r1.use_region);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtextInterpolate1"](" ", lvl_r8.display_name || lvl_r8.name, " ");
  }
}
function DeskFiltersComponent_mat_form_field_17_Template(rf, ctx) {
  if (rf & 1) {
    const _r7 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](0, "mat-form-field", 34)(1, "mat-select", 39);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipe"](2, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵlistener"]("ngModelChange", function DeskFiltersComponent_mat_form_field_17_Template_mat_select_ngModelChange_1_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵrestoreView"](_r7);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵresetView"](ctx_r1.setOptions({
        zone_id: $event
      }));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtemplate"](3, DeskFiltersComponent_mat_form_field_17_mat_option_3_Template, 5, 3, "mat-option", 36);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipe"](4, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    let tmp_1_0;
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngModel", (tmp_1_0 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipeBind1"](2, 3, ctx_r1.options)) == null ? null : tmp_1_0.zone_id)("ngModelOptions", _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpureFunction0"](7, _c0));
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngForOf", _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipeBind1"](4, 5, ctx_r1.levels));
  }
}
function DeskFiltersComponent_div_24_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](0, "div", 44)(1, "mat-checkbox", 45);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵi18n"](2, 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]()();
  }
}
function DeskFiltersComponent_div_25_Template(rf, ctx) {
  if (rf & 1) {
    const _r9 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](0, "div", 46)(1, "div", 47)(2, "label");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵi18n"](3, 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](4, "a-time-field", 48);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵlistener"]("ngModelChange", function DeskFiltersComponent_div_25_Template_a_time_field_ngModelChange_4_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵrestoreView"](_r9);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵresetView"](ctx_r1.form.patchValue({
        date: $event
      }));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](5, "div", 47)(6, "label");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵi18n"](7, 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelement"](8, "a-duration-field", 49);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    let tmp_4_0;
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngModel", ctx_r1.form.value.date)("ngModelOptions", _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpureFunction0"](8, _c0))("use_24hr", ctx_r1.use_24hr);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("time", (tmp_4_0 = ctx_r1.form.get("date")) == null ? null : tmp_4_0.value)("max", 10 * 60)("min", 60)("step", 60)("use_24hr", ctx_r1.use_24hr);
  }
}
function DeskFiltersComponent_section_36_div_3_Template(rf, ctx) {
  if (rf & 1) {
    const _r10 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](0, "div", 52)(1, "div", 53);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](3, "mat-checkbox", 54);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipe"](4, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵlistener"]("ngModelChange", function DeskFiltersComponent_section_36_div_3_Template_mat_checkbox_ngModelChange_3_listener($event) {
      const feat_r11 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵrestoreView"](_r10).$implicit;
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"](2);
      return _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵresetView"](ctx_r1.setFeature(feat_r11, $event));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    let tmp_4_0;
    const feat_r11 = ctx.$implicit;
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtextInterpolate"](feat_r11);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngModel", (((tmp_4_0 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipeBind1"](4, 3, ctx_r1.options)) == null ? null : tmp_4_0.features) || _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpureFunction0"](5, _c1)).includes(feat_r11))("ngModelOptions", _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpureFunction0"](6, _c0));
  }
}
function DeskFiltersComponent_section_36_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](0, "section", 50)(1, "h2", 27);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵi18n"](2, 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtemplate"](3, DeskFiltersComponent_section_36_div_3_Template, 5, 7, "div", 51);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipe"](4, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngForOf", _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipeBind1"](4, 1, ctx_r1.features));
  }
}
function DeskFiltersComponent_div_38_Template(rf, ctx) {
  if (rf & 1) {
    const _r12 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](0, "div", 55)(1, "button", 56);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵlistener"]("click", function DeskFiltersComponent_div_38_Template_button_click_1_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵrestoreView"](_r12);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵresetView"](ctx_r1.close());
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵi18n"](2, 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]()();
  }
}
class DeskFiltersComponent {
  get building() {
    return this._org.building;
  }
  set building(bld) {
    this._org.building = bld;
  }
  get region() {
    return this._org.region;
  }
  set region(reg) {
    this._org.region = reg;
  }
  get allow_time_changes() {
    return !!this._settings.get('app.desks.allow_time_changes');
  }
  get allow_all_day() {
    return this.allow_time_changes && !!this._settings.get('app.desks.allow_all_day');
  }
  get end_date() {
    return (0,date_fns__WEBPACK_IMPORTED_MODULE_9__.endOfDay)((0,date_fns__WEBPACK_IMPORTED_MODULE_10__.addDays)(Date.now(), this._settings.get('app.desks.available_period') || 90));
  }
  get use_24hr() {
    return this._settings.get('app.use_24_hour_time');
  }
  get use_region() {
    return this._settings.get('app.use_region');
  }
  constructor(_bsheet_ref, _state, _org, _settings) {
    this._bsheet_ref = _bsheet_ref;
    this._state = _state;
    this._org = _org;
    this._settings = _settings;
    this.can_close = false;
    this.options = this._state.options;
    this.features = this._state.features;
    this.buildings = this._org.active_buildings;
    this.form = this._state.form;
    this.regions = this._org.region_list;
    this.levels = (0,rxjs__WEBPACK_IMPORTED_MODULE_11__.combineLatest)([this._org.active_region, this._org.active_building]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.map)(([region, bld]) => {
      const level_list = this.use_region ? this._org.levelsForRegion(region) : this._org.levelsForBuilding(bld);
      const viewable_levels = level_list.filter(lvl => !lvl.tags.includes('parking'));
      return viewable_levels.sort((a, b) => a.parent_id.localeCompare(b.parent_id) || (a.display_name || '').localeCompare(b.display_name || ''));
    }));
    this.close = () => this._bsheet_ref.dismiss();
    this.setOptions = o => this._state.setOptions(o);
    this.setFeature = (f, e) => this._state.setFeature(f, e);
    this.setLevel = l => {};
    this.setRegion = r => this._org.region = r;
    this.can_close = !!this._bsheet_ref;
  }
  static #_ = this.ɵfac = function DeskFiltersComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || DeskFiltersComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵdirectiveInject"](_angular_material_bottom_sheet__WEBPACK_IMPORTED_MODULE_13__.MatBottomSheetRef, 8), _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵdirectiveInject"](_booking_form_service__WEBPACK_IMPORTED_MODULE_2__.BookingFormService), _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵdirectiveInject"](libs_organisation_src_lib_organisation_service__WEBPACK_IMPORTED_MODULE_1__.OrganisationService), _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵdirectiveInject"](_placeos_common__WEBPACK_IMPORTED_MODULE_0__.SettingsService));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵdefineComponent"]({
    type: DeskFiltersComponent,
    selectors: [["desk-filters"]],
    inputs: {
      hide_levels: "hide_levels"
    },
    decls: 39,
    vars: 33,
    consts: () => {
      let i18n_0;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_7734428352389083660$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_FILTERS_COMPONENT_TS_0 = goog.getMsg("Desk Filters");
        i18n_0 = MSG_EXTERNAL_7734428352389083660$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_FILTERS_COMPONENT_TS_0;
      } else {
        i18n_0 = $localize`:␟a42190bd19b1cc93828e70bd0ef7a119f4c22aca␟7734428352389083660:Desk Filters`;
      }
      let i18n_1;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_5028777105388019087$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_FILTERS_COMPONENT_TS_1 = goog.getMsg("Details");
        i18n_1 = MSG_EXTERNAL_5028777105388019087$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_FILTERS_COMPONENT_TS_1;
      } else {
        i18n_1 = $localize`:␟4f8b2bb476981727ab34ed40fde1218361f92c45␟5028777105388019087:Details`;
      }
      let i18n_2;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_471816275243265264$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_FILTERS_COMPONENT_TS_2 = goog.getMsg("Location");
        i18n_2 = MSG_EXTERNAL_471816275243265264$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_FILTERS_COMPONENT_TS_2;
      } else {
        i18n_2 = $localize`:␟ed31c09fd77c36238c13d83635f3fe5294c733d2␟471816275243265264:Location`;
      }
      let i18n_3;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_3973931101896534797$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_FILTERS_COMPONENT_TS_3 = goog.getMsg("Date");
        i18n_3 = MSG_EXTERNAL_3973931101896534797$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_FILTERS_COMPONENT_TS_3;
      } else {
        i18n_3 = $localize`:␟2f933b826a570836cab04f683970a2d22068458c␟3973931101896534797:Date`;
      }
      let i18n_4;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_5010873675481014004$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_FILTERS_COMPONENT_TS_4 = goog.getMsg(" {$interpolation} ", {
          "interpolation": "\uFFFD0\uFFFD"
        }, {
          original_code: {
            "interpolation": "{{ 'COMMON.FAVOURITES' | translate }}"
          }
        });
        i18n_4 = MSG_EXTERNAL_5010873675481014004$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_FILTERS_COMPONENT_TS_4;
      } else {
        i18n_4 = $localize`:␟bde3d9fd949ba4c6014b8e64c1362753bca1cf0c␟5010873675481014004: ${"\uFFFD0\uFFFD"}:INTERPOLATION: `;
      }
      let i18n_5;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_5737771872454551963$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_FILTERS_COMPONENT_TS_5 = goog.getMsg(" {$interpolation} ", {
          "interpolation": "\uFFFD0\uFFFD"
        }, {
          original_code: {
            "interpolation": "{{ 'DESKS.SHOW_FAVOURITES' | translate }}"
          }
        });
        i18n_5 = MSG_EXTERNAL_5737771872454551963$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_FILTERS_COMPONENT_TS_5;
      } else {
        i18n_5 = $localize`:␟cd942cf7297cb47f1a116efdedff1c8547c6ea3e␟5737771872454551963: ${"\uFFFD0\uFFFD"}:INTERPOLATION: `;
      }
      let i18n_6;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_8264413387051126615$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_FILTERS_COMPONENT_TS_6 = goog.getMsg("Any Region");
        i18n_6 = MSG_EXTERNAL_8264413387051126615$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_FILTERS_COMPONENT_TS_6;
      } else {
        i18n_6 = $localize`:␟130845b58eba8e50c98f3fba117a0168cdba4f31␟8264413387051126615:Any Region`;
      }
      let i18n_7;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_7323982518822503502$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_FILTERS_COMPONENT_TS_7 = goog.getMsg("Any Level");
        i18n_7 = MSG_EXTERNAL_7323982518822503502$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_FILTERS_COMPONENT_TS_7;
      } else {
        i18n_7 = $localize`:␟50407595967bf29832e873b41f9de3502d5c3e03␟7323982518822503502:Any Level`;
      }
      let i18n_8;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_835486935962207481$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_FILTERS_COMPONENT_TS_8 = goog.getMsg(" All Day ");
        i18n_8 = MSG_EXTERNAL_835486935962207481$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_FILTERS_COMPONENT_TS_8;
      } else {
        i18n_8 = $localize`:␟d7f43e20f3a729fa3de32bc7a1f709ccd722eae5␟835486935962207481: All Day `;
      }
      let i18n_9;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_4204880191779081093$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_FILTERS_COMPONENT_TS_9 = goog.getMsg("Start Time");
        i18n_9 = MSG_EXTERNAL_4204880191779081093$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_FILTERS_COMPONENT_TS_9;
      } else {
        i18n_9 = $localize`:␟7c0a71d337783e527c1c8e91e433b301c5b1d8a8␟4204880191779081093:Start Time`;
      }
      let i18n_10;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_3845185958891849368$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_FILTERS_COMPONENT_TS_10 = goog.getMsg("End Time");
        i18n_10 = MSG_EXTERNAL_3845185958891849368$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_FILTERS_COMPONENT_TS_10;
      } else {
        i18n_10 = $localize`:␟e1f10d9bf4d3c37490cd5bf82007444ae7af46b1␟3845185958891849368:End Time`;
      }
      let i18n_11;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_8650499415827640724$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_FILTERS_COMPONENT_TS_11 = goog.getMsg("Type");
        i18n_11 = MSG_EXTERNAL_8650499415827640724$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_FILTERS_COMPONENT_TS_11;
      } else {
        i18n_11 = $localize`:␟f61c6867295f3b53d23557021f2f4e0aa1d0b8fc␟8650499415827640724:Type`;
      }
      let i18n_12;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_2296888311792137027$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_FILTERS_COMPONENT_TS_12 = goog.getMsg(" Apply Filters ");
        i18n_12 = MSG_EXTERNAL_2296888311792137027$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_FILTERS_COMPONENT_TS_12;
      } else {
        i18n_12 = $localize`:␟c17e2cc448524a39eb83b2937cea3235a2e8bf37␟2296888311792137027: Apply Filters `;
      }
      return [i18n_0, i18n_1, i18n_2, i18n_3, i18n_4, i18n_5, i18n_8, i18n_9, i18n_10, i18n_11, i18n_12, [1, "flex", "rounded-t-md", "items-center", "border-b", "border-base-200", "pb-2", "sm:hidden"], [1, "flex-1", "pl-2"], ["icon", "", "matRipple", "", "name", "close-desk-filters", "class", "sm:hidden", 3, "click", 4, "ngIf"], [1, "font-medium", "flex-2", "text-center"], [1, "flex-1"], [1, "max-h-[65vh]", "p-2", "overflow-y-auto", "overflow-x-hidden", "divide-y", "divide-base-200", "w-full", "max-w-[100vw]", "sm:max-w-[30vw]", 3, "formGroup"], ["details", ""], [1, "text-lg", "font-medium", "mb-1"], [1, "flex-1", "min-w-[8rem]", "flex", "flex-col"], ["for", "location"], ["appearance", "outline", "class", "w-full", 4, "ngIf"], [1, "flex-1", "min-w-[256px]"], ["name", "date", 3, "ngModelChange", "ngModel", "ngModelOptions", "to"], ["class", "flex justify-end -mt-2 mb-2", 4, "ngIf"], ["class", "flex items-center space-x-2", 4, "ngIf"], ["favs", "", 1, "space-y-2", "pb-4"], [1, "text-lg", "font-medium"], [1, "flex", "items-center"], ["for", "fav", 1, "flex-1", "w-1/2"], ["name", "fav", 3, "ngModelChange", "ngModel", "ngModelOptions"], ["class", "space-y-2", "features", "", 4, "ngIf"], ["class", "px-2 py-2 w-full border-t border-base-200", 4, "ngIf"], ["icon", "", "matRipple", "", "name", "close-desk-filters", 1, "sm:hidden", 3, "click"], ["appearance", "outline", 1, "w-full"], ["name", "region", "placeholder", i18n_6, 3, "ngModelChange", "ngModel", "ngModelOptions"], [3, "value", 4, "ngFor", "ngForOf"], [3, "value"], ["name", "building", 3, "ngModelChange", "ngModel", "ngModelOptions", "placeholder"], ["name", "location", "placeholder", i18n_7, 3, "ngModelChange", "ngModel", "ngModelOptions"], [1, "flex", "flex-col-reverse"], ["class", "opacity-30 text-xs", 4, "ngIf"], [1, "opacity-30", "text-xs"], [1, "opacity-0"], [1, "flex", "justify-end", "-mt-2", "mb-2"], ["formControlName", "all_day"], [1, "flex", "items-center", "space-x-2"], [1, "flex-1", "w-1/3"], ["name", "start-time", 3, "ngModelChange", "ngModel", "ngModelOptions", "use_24hr"], ["formControlName", "duration", 3, "time", "max", "min", "step", "use_24hr"], ["features", "", 1, "space-y-2"], ["class", "flex items-center flex-wrap space-x-2", 4, "ngFor", "ngForOf"], [1, "flex", "items-center", "flex-wrap", "space-x-2"], ["for", "feat", 1, "flex-1", "w-1/2"], [3, "ngModelChange", "ngModel", "ngModelOptions"], [1, "px-2", "py-2", "w-full", "border-t", "border-base-200"], ["btn", "", "matRipple", "", "name", "apply-desk-filters", 1, "w-full", 3, "click"]];
    },
    template: function DeskFiltersComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](0, "div", 11)(1, "div", 12);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtemplate"](2, DeskFiltersComponent_button_2_Template, 3, 0, "button", 13);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](3, "h3", 14);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵi18n"](4, 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelement"](5, "div", 15);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](6, "form", 16)(7, "section", 17)(8, "h2", 18);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵi18n"](9, 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](10, "div", 19)(11, "label", 20);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵi18n"](12, 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtemplate"](13, DeskFiltersComponent_mat_form_field_13_Template, 4, 6, "mat-form-field", 21);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipe"](14, "async");
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtemplate"](15, DeskFiltersComponent_mat_form_field_15_Template, 7, 13, "mat-form-field", 21);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipe"](16, "async");
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtemplate"](17, DeskFiltersComponent_mat_form_field_17_Template, 5, 8, "mat-form-field", 21);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](18, "div", 22)(19, "label");
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵi18n"](20, 3);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](21, "a-date-field", 23);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵlistener"]("ngModelChange", function DeskFiltersComponent_Template_a_date_field_ngModelChange_21_listener($event) {
          return ctx.form.patchValue({
            date: $event
          });
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](22);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipe"](23, "translate");
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtemplate"](24, DeskFiltersComponent_div_24_Template, 3, 0, "div", 24)(25, DeskFiltersComponent_div_25_Template, 9, 9, "div", 25);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](26, "section", 26)(27, "h2", 27);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵi18n"](28, 4);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipe"](29, "translate");
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](30, "div", 28)(31, "div", 29);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵi18n"](32, 5);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipe"](33, "translate");
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](34, "mat-checkbox", 30);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipe"](35, "async");
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵlistener"]("ngModelChange", function DeskFiltersComponent_Template_mat_checkbox_ngModelChange_34_listener($event) {
          return ctx.setOptions({
            show_fav: $event
          });
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]()()();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtemplate"](36, DeskFiltersComponent_section_36_Template, 5, 3, "section", 31);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipe"](37, "async");
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtemplate"](38, DeskFiltersComponent_div_38_Template, 3, 0, "div", 32);
      }
      if (rf & 2) {
        let tmp_2_0;
        let tmp_3_0;
        let tmp_15_0;
        let tmp_17_0;
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngIf", ctx.can_close);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](4);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("formGroup", ctx.form);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](7);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngIf", ctx.use_region && ((tmp_2_0 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipeBind1"](14, 17, ctx.regions)) == null ? null : tmp_2_0.length));
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngIf", !ctx.use_region && ((tmp_3_0 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipeBind1"](16, 19, ctx.buildings)) == null ? null : tmp_3_0.length) > 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngIf", !ctx.hide_levels);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](4);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngModel", ctx.form.value.date)("ngModelOptions", _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpureFunction0"](31, _c0))("to", ctx.end_date);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipeBind1"](23, 21, "FORM.DATE_ERROR"), " ");
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngIf", ctx.allow_all_day);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngIf", !ctx.form.value.all_day);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](4);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵi18nExp"](_angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipeBind1"](29, 23, "COMMON.FAVOURITES"));
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵi18nApply"](28);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](4);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵi18nExp"](_angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipeBind1"](33, 25, "DESKS.SHOW_FAVOURITES"));
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵi18nApply"](32);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngModel", (tmp_15_0 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipeBind1"](35, 27, ctx.options)) == null ? null : tmp_15_0.show_fav)("ngModelOptions", _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpureFunction0"](32, _c0));
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngIf", (tmp_17_0 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipeBind1"](37, 29, ctx.features)) == null ? null : tmp_17_0.length);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngIf", ctx.can_close);
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_14__.NgForOf, _angular_common__WEBPACK_IMPORTED_MODULE_14__.NgIf, _angular_forms__WEBPACK_IMPORTED_MODULE_15__["ɵNgNoValidate"], _angular_forms__WEBPACK_IMPORTED_MODULE_15__.NgControlStatus, _angular_forms__WEBPACK_IMPORTED_MODULE_15__.NgControlStatusGroup, _angular_forms__WEBPACK_IMPORTED_MODULE_15__.NgModel, _angular_forms__WEBPACK_IMPORTED_MODULE_15__.FormGroupDirective, _angular_forms__WEBPACK_IMPORTED_MODULE_15__.FormControlName, _angular_material_form_field__WEBPACK_IMPORTED_MODULE_16__.MatFormField, _angular_material_checkbox__WEBPACK_IMPORTED_MODULE_17__.MatCheckbox, _angular_material_core__WEBPACK_IMPORTED_MODULE_18__.MatOption, _form_fields_src_lib_date_field_component__WEBPACK_IMPORTED_MODULE_3__.DateFieldComponent, _form_fields_src_lib_duration_field_component__WEBPACK_IMPORTED_MODULE_4__.DurationFieldComponent, _form_fields_src_lib_time_field_component__WEBPACK_IMPORTED_MODULE_5__.TimeFieldComponent, _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_6__.IconComponent, _angular_material_select__WEBPACK_IMPORTED_MODULE_19__.MatSelect, _angular_material_core__WEBPACK_IMPORTED_MODULE_18__.MatRipple, _angular_common__WEBPACK_IMPORTED_MODULE_14__.AsyncPipe, _components_src_lib_building_pipe__WEBPACK_IMPORTED_MODULE_7__.BuildingPipe, _ngx_translate_core__WEBPACK_IMPORTED_MODULE_20__.TranslatePipe],
    styles: ["[_nghost-%COMP%] {\n                display: flex;\n                flex-direction: column;\n                width: 100%;\n                max-width: 100vw;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRlc2stZmlsdGVycy5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLGFBQWE7Z0JBQ2Isc0JBQXNCO2dCQUN0QixXQUFXO2dCQUNYLGdCQUFnQjtZQUNwQiIsImZpbGUiOiJkZXNrLWZpbHRlcnMuY29tcG9uZW50LnRzIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICA6aG9zdCB7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgICAgIG1heC13aWR0aDogMTAwdnc7XG4gICAgICAgICAgICB9XG4gICAgICAgICJdfQ== */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvYm9va2luZ3Mvc3JjL2xpYi9kZXNrLXNlbGVjdC1tb2RhbC9kZXNrLWZpbHRlcnMuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxhQUFhO2dCQUNiLHNCQUFzQjtnQkFDdEIsV0FBVztnQkFDWCxnQkFBZ0I7WUFDcEI7O0FBRVosZ2pCQUFnakIiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIDpob3N0IHtcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICAgICAgbWF4LXdpZHRoOiAxMDB2dztcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl0sInNvdXJjZVJvb3QiOiIifQ== */"]
  });
}

/***/ }),

/***/ 93662:
/*!************************************************************************!*\
  !*** ./libs/bookings/src/lib/desk-select-modal/desk-list.component.ts ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DeskListComponent: () => (/* binding */ DeskListComponent)
/* harmony export */ });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! rxjs */ 68824);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! rxjs/operators */ 35443);
/* harmony import */ var _booking_form_service__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../booking-form.service */ 18379);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _angular_material_progress_spinner__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @angular/material/progress-spinner */ 41134);
/* harmony import */ var _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../components/src/lib/icon.component */ 69434);
/* harmony import */ var _components_src_lib_authenticated_image_directive__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../components/src/lib/authenticated-image.directive */ 93208);
/* harmony import */ var _angular_material_core__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @angular/material/core */ 74646);











function DeskListComponent_ng_container_5_ul_1_li_1_div_3_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "div", 22)(1, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](2, "done");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()();
  }
}
function DeskListComponent_ng_container_5_ul_1_li_1_img_4_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelement"](0, "img", 23);
  }
  if (rf & 2) {
    const desk_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]().$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("source", desk_r2.images[0]);
  }
}
function DeskListComponent_ng_container_5_ul_1_li_1_ng_template_5_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelement"](0, "img", 24);
  }
}
function DeskListComponent_ng_container_5_ul_1_li_1_Template(rf, ctx) {
  if (rf & 1) {
    const _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "li", 11)(1, "button", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵlistener"]("click", function DeskListComponent_ng_container_5_ul_1_li_1_Template_button_click_1_listener() {
      const desk_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵrestoreView"](_r1).$implicit;
      const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"](3);
      return _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵresetView"](ctx_r2.selectDesk(desk_r2));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](2, "div", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](3, DeskListComponent_ng_container_5_ul_1_li_1_div_3_Template, 3, 0, "div", 14)(4, DeskListComponent_ng_container_5_ul_1_li_1_img_4_Template, 1, 1, "img", 15)(5, DeskListComponent_ng_container_5_ul_1_li_1_ng_template_5_Template, 1, 0, "ng-template", null, 2, _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplateRefExtractor"]);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](7, "div", 16)(8, "span", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](9);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](10, "div", 18)(11, "app-icon", 19);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](12, "place");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](13, "p", 20);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](14);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()()()();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](15, "button", 21);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵlistener"]("click", function DeskListComponent_ng_container_5_ul_1_li_1_Template_button_click_15_listener() {
      const desk_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵrestoreView"](_r1).$implicit;
      const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"](3);
      return _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵresetView"](ctx_r2.toggleFav.emit(desk_r2));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](16, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](17);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()()();
  }
  if (rf & 2) {
    const desk_r2 = ctx.$implicit;
    const placeholder_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵreference"](6);
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵclassProp"]("!border-info", ctx_r2.active === desk_r2.id);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", ctx_r2.selected.includes(desk_r2.id));
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", desk_r2.images == null ? null : desk_r2.images.length)("ngIfElse", placeholder_r4);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtextInterpolate1"](" ", desk_r2.name || desk_r2.id || "Desk", " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtextInterpolate1"](" ", (desk_r2.zone == null ? null : desk_r2.zone.display_name) || (desk_r2.zone == null ? null : desk_r2.zone.name) || "<No Level>", " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵclassProp"]("text-info", ctx_r2.isFavourite(desk_r2.id));
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtextInterpolate"](ctx_r2.isFavourite(desk_r2.id) ? "favorite" : "favorite_border");
  }
}
function DeskListComponent_ng_container_5_ul_1_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "ul", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](1, DeskListComponent_ng_container_5_ul_1_li_1_Template, 18, 10, "li", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipe"](2, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngForOf", _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipeBind1"](2, 1, ctx_r2.desks));
  }
}
function DeskListComponent_ng_container_5_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](1, DeskListComponent_ng_container_5_ul_1_Template, 3, 3, "ul", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipe"](2, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementContainerEnd"]();
  }
  if (rf & 2) {
    let tmp_3_0;
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
    const empty_state_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵreference"](10);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", (tmp_3_0 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipeBind1"](2, 2, ctx_r2.desks)) == null ? null : tmp_3_0.length)("ngIfElse", empty_state_r5);
  }
}
function DeskListComponent_ng_template_7_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "div", 25);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelement"](1, "mat-spinner", 26);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](2, "p", 27);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](3, "Finding available desks...");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("diameter", 32);
  }
}
function DeskListComponent_ng_template_9_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "div", 28)(1, "p", 29);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](2, " No available desk for selected time and/or filters ");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()();
  }
}
class DeskListComponent {
  constructor(_state) {
    this._state = _state;
    this.active = '';
    this.selected = '';
    this.favorites = [];
    this.onSelect = new _angular_core__WEBPACK_IMPORTED_MODULE_3__.EventEmitter();
    this.toggleFav = new _angular_core__WEBPACK_IMPORTED_MODULE_3__.EventEmitter();
    this.desks = (0,rxjs__WEBPACK_IMPORTED_MODULE_4__.combineLatest)([this._state.options, this._state.available_resources]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.map)(([{
      show_fav
    }, _]) => _.filter(i => !show_fav || this.isFavourite(i.id))));
    this.loading = this._state.loading;
  }
  isFavourite(desk_id) {
    return this.favorites.includes(desk_id);
  }
  selectDesk(desk) {
    this.onSelect.emit(desk);
  }
  static #_ = this.ɵfac = function DeskListComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || DeskListComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵdirectiveInject"](_booking_form_service__WEBPACK_IMPORTED_MODULE_0__.BookingFormService));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵdefineComponent"]({
    type: DeskListComponent,
    selectors: [["desk-list"]],
    inputs: {
      active: "active",
      selected: "selected",
      favorites: "favorites"
    },
    outputs: {
      onSelect: "onSelect",
      toggleFav: "toggleFav"
    },
    decls: 11,
    vars: 7,
    consts: () => {
      let i18n_0;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_5968132631442328843$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_LIST_COMPONENT_TS_0 = goog.getMsg("Results");
        i18n_0 = MSG_EXTERNAL_5968132631442328843$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_LIST_COMPONENT_TS_0;
      } else {
        i18n_0 = $localize`:␟80ed5b776a26a78099e230e0e89d96c33ba44e24␟5968132631442328843:Results`;
      }
      let i18n_1;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_1931205204318295377$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_LIST_COMPONENT_TS_1 = goog.getMsg(" {$interpolation} result(s) found ", {
          "interpolation": "\uFFFD0\uFFFD"
        }, {
          original_code: {
            "interpolation": "{{ (desks | async)?.length || 0 }}"
          }
        });
        i18n_1 = MSG_EXTERNAL_1931205204318295377$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_LIST_COMPONENT_TS_1;
      } else {
        i18n_1 = $localize`:␟99a2ae2a83b9fba5f9d4547746782447904ccf7b␟1931205204318295377: ${"\uFFFD0\uFFFD"}:INTERPOLATION: result(s) found `;
      }
      return [["load_state", ""], ["empty_state", ""], ["placeholder", ""], i18n_0, i18n_1, [1, "font-bold"], ["count", "", 1, "text-sm", "opacity-60", "mb-4"], [4, "ngIf", "ngIfElse"], ["class", "list-style-none space-y-2", 4, "ngIf", "ngIfElse"], [1, "list-style-none", "space-y-2"], ["desk", "", "class", "relative rounded-lg w-full shadow border bg-base-100 border-base-200 overflow-hidden", 3, "!border-info", 4, "ngFor", "ngForOf"], ["desk", "", 1, "relative", "rounded-lg", "w-full", "shadow", "border", "bg-base-100", "border-base-200", "overflow-hidden"], ["name", "select-desk", "matRipple", "", 1, "w-full", "h-full", "flex", "p-2", 3, "click"], [1, "relative", "w-20", "h-20", "rounded-xl", "bg-base-200", "mr-4", "flex", "items-center", "justify-center"], ["class", "absolute top-1 left-1 border border-neutral bg-base-200 rounded-full h-6 w-6 flex items-center justify-center text-white", 4, "ngIf"], ["auth", "", "class", "object-cover h-full", 3, "source", 4, "ngIf", "ngIfElse"], [1, "space-y-2", "pt-2", "flex-1", "text-left"], [1, "font-medium"], [1, "flex", "items-center", "text-sm", "space-x-2"], [1, "text-info"], [1, "text-xs"], ["icon", "", "matRipple", "", "name", "toggle-desk-favourite", 1, "absolute", "top-1", "right-1", 3, "click"], [1, "absolute", "top-1", "left-1", "border", "border-neutral", "bg-base-200", "rounded-full", "h-6", "w-6", "flex", "items-center", "justify-center", "text-white"], ["auth", "", 1, "object-cover", "h-full", 3, "source"], ["src", "assets/icons/desk-placeholder.svg", 1, "m-auto"], ["loading", "", 1, "p-16", "flex", "flex-col", "items-center", "justify-center", "space-y-2"], [3, "diameter"], [1, "opacity-30"], ["empty", "", 1, "p-16", "flex", "flex-col", "items-center", "justify-center", "space-y-2"], [1, "opacity-30", "text-center"]];
    },
    template: function DeskListComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "h3", 5);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵi18n"](1, 3);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](2, "p", 6);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵi18n"](3, 4);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipe"](4, "async");
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](5, DeskListComponent_ng_container_5_Template, 3, 4, "ng-container", 7);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipe"](6, "async");
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](7, DeskListComponent_ng_template_7_Template, 4, 1, "ng-template", null, 0, _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplateRefExtractor"])(9, DeskListComponent_ng_template_9_Template, 3, 0, "ng-template", null, 1, _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplateRefExtractor"]);
      }
      if (rf & 2) {
        let tmp_2_0;
        let tmp_4_0;
        const load_state_r6 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵreference"](8);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](4);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵi18nExp"](((tmp_2_0 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipeBind1"](4, 3, ctx.desks)) == null ? null : tmp_2_0.length) || 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵi18nApply"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", !((tmp_4_0 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipeBind1"](6, 5, ctx.loading)) == null ? null : tmp_4_0.length))("ngIfElse", load_state_r6);
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_6__.NgForOf, _angular_common__WEBPACK_IMPORTED_MODULE_6__.NgIf, _angular_material_progress_spinner__WEBPACK_IMPORTED_MODULE_7__.MatProgressSpinner, _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_1__.IconComponent, _components_src_lib_authenticated_image_directive__WEBPACK_IMPORTED_MODULE_2__.AuthenticatedImageDirective, _angular_material_core__WEBPACK_IMPORTED_MODULE_8__.MatRipple, _angular_common__WEBPACK_IMPORTED_MODULE_6__.AsyncPipe],
    styles: ["[_nghost-%COMP%] {\n                width: 100%;\n                height: 100%;\n                padding: 0.5rem;\n                background: rgba(0, 0, 0, 0.05);\n                overflow-y: auto;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRlc2stbGlzdC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLFdBQVc7Z0JBQ1gsWUFBWTtnQkFDWixlQUFlO2dCQUNmLCtCQUErQjtnQkFDL0IsZ0JBQWdCO1lBQ3BCIiwiZmlsZSI6ImRlc2stbGlzdC5jb21wb25lbnQudHMiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIDpob3N0IHtcbiAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgICAgICAgICAgcGFkZGluZzogMC41cmVtO1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IHJnYmEoMCwgMCwgMCwgMC4wNSk7XG4gICAgICAgICAgICAgICAgb3ZlcmZsb3cteTogYXV0bztcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl19 */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvYm9va2luZ3Mvc3JjL2xpYi9kZXNrLXNlbGVjdC1tb2RhbC9kZXNrLWxpc3QuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxXQUFXO2dCQUNYLFlBQVk7Z0JBQ1osZUFBZTtnQkFDZiwrQkFBK0I7Z0JBQy9CLGdCQUFnQjtZQUNwQjs7QUFFWiw0bUJBQTRtQiIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgOmhvc3Qge1xuICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiAwLjVyZW07XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZDogcmdiYSgwLCAwLCAwLCAwLjA1KTtcbiAgICAgICAgICAgICAgICBvdmVyZmxvdy15OiBhdXRvO1xuICAgICAgICAgICAgfVxuICAgICAgICAiXSwic291cmNlUm9vdCI6IiJ9 */"]
  });
}

/***/ }),

/***/ 42596:
/*!***********************************************************************!*\
  !*** ./libs/bookings/src/lib/desk-select-modal/desk-map.component.ts ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DeskMapComponent: () => (/* binding */ DeskMapComponent)
/* harmony export */ });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! rxjs/operators */ 35443);
/* harmony import */ var _booking_form_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../booking-form.service */ 18379);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! rxjs */ 90521);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! rxjs */ 68824);
/* harmony import */ var libs_explore_src_lib_explore_spaces_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! libs/explore/src/lib/explore-spaces.service */ 65897);
/* harmony import */ var libs_explore_src_lib_explore_desk_info_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! libs/explore/src/lib/explore-desk-info.component */ 82882);
/* harmony import */ var _placeos_organisation__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @placeos/organisation */ 2510);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @angular/forms */ 34456);
/* harmony import */ var _angular_material_form_field__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @angular/material/form-field */ 24950);
/* harmony import */ var _angular_material_core__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @angular/material/core */ 74646);
/* harmony import */ var _components_src_lib_interactive_map_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../components/src/lib/interactive-map.component */ 24918);
/* harmony import */ var _angular_material_select__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @angular/material/select */ 25175);
/* harmony import */ var _components_src_lib_building_pipe__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../components/src/lib/building.pipe */ 56062);



















const _c0 = () => ({
  controls: true
});
const _c1 = () => ({
  standalone: true
});
function DeskMapComponent_mat_form_field_1_mat_option_2_div_2_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](0, "div", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵpipe"](2, "building");
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](3, "span", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtext"](4, " - ");
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    let tmp_4_0;
    const lvl_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵnextContext"]().$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtextInterpolate1"](" ", (tmp_4_0 = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵpipeBind1"](2, 1, lvl_r3.parent_id)) == null ? null : tmp_4_0.display_name, " ");
  }
}
function DeskMapComponent_mat_form_field_1_mat_option_2_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](0, "mat-option", 7)(1, "div", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtemplate"](2, DeskMapComponent_mat_form_field_1_mat_option_2_div_2_Template, 5, 3, "div", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](3, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]()()();
  }
  if (rf & 2) {
    const lvl_r3 = ctx.$implicit;
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵproperty"]("value", lvl_r3);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵproperty"]("ngIf", ctx_r1.use_region);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtextInterpolate1"](" ", lvl_r3.display_name || lvl_r3.name, " ");
  }
}
function DeskMapComponent_mat_form_field_1_Template(rf, ctx) {
  if (rf & 1) {
    const _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](0, "mat-form-field", 4)(1, "mat-select", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtwoWayListener"]("ngModelChange", function DeskMapComponent_mat_form_field_1_Template_mat_select_ngModelChange_1_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵrestoreView"](_r1);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵnextContext"]();
      _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtwoWayBindingSet"](ctx_r1.level, $event) || (ctx_r1.level = $event);
      return _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵresetView"]($event);
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵlistener"]("ngModelChange", function DeskMapComponent_mat_form_field_1_Template_mat_select_ngModelChange_1_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵrestoreView"](_r1);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵresetView"](ctx_r1.setOptions({
        zone_ids: [$event.id]
      }));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtemplate"](2, DeskMapComponent_mat_form_field_1_mat_option_2_Template, 5, 3, "mat-option", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵpipe"](3, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtwoWayProperty"]("ngModel", ctx_r1.level);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵproperty"]("ngModelOptions", _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵpureFunction0"](5, _c1));
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵproperty"]("ngForOf", _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵpipeBind1"](3, 3, ctx_r1.levels));
  }
}
class DeskMapComponent extends _placeos_common__WEBPACK_IMPORTED_MODULE_0__.AsyncHandler {
  get map_url() {
    return this.level?.map_id || '';
  }
  get use_region() {
    return !!this._settings.get('app.use_region');
  }
  constructor(_state, _settings, _org) {
    super();
    this._state = _state;
    this._settings = _settings;
    this._org = _org;
    this.is_displayed = false;
    this.active = '';
    this.onSelect = new _angular_core__WEBPACK_IMPORTED_MODULE_7__.EventEmitter();
    this.desks = this._state.available_resources;
    this.loading = this._state.loading;
    this.zoom = 1;
    this.center = {
      x: 0.5,
      y: 0.5
    };
    this.coordinates = undefined;
    this._change = new rxjs__WEBPACK_IMPORTED_MODULE_8__.BehaviorSubject(0);
    this.levels = (0,rxjs__WEBPACK_IMPORTED_MODULE_9__.combineLatest)([this._org.active_region, this._org.active_building]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.map)(([region, bld]) => {
      const level_list = this.use_region ? this._org.levelsForRegion(region) : this._org.levelsForBuilding(bld);
      const viewable_levels = level_list.filter(lvl => !lvl.tags.includes('parking'));
      return viewable_levels.sort((a, b) => a.parent_id.localeCompare(b.parent_id) || (a.display_name || '').localeCompare(b.display_name || ''));
    }));
    this.setOptions = o => this._state.setOptions(o);
    this.actions = this._state.available_resources.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.map)(desks => desks.map(desk => ({
      id: desk.map_id || desk.id,
      action: ['touchend', 'mouseup'],
      callback: () => this.selectDesk(desk)
    }))));
    this.features = (0,rxjs__WEBPACK_IMPORTED_MODULE_9__.combineLatest)([this._state.resources, this._state.available_resources]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.map)(([desks]) => {
      return this._settings.get('app.desks.hide_user') ? [] : desks.map(desk => ({
        location: desk.id,
        content: libs_explore_src_lib_explore_desk_info_component__WEBPACK_IMPORTED_MODULE_3__.ExploreDeskInfoComponent,
        full_size: true,
        no_scale: true,
        data: {
          id: desk.map_id || desk.id,
          map_id: desk.name,
          name: desk.name || desk.map_id,
          user: this._state.resourceUserName(desk.id)
        },
        z_index: 20
      }));
    }));
    this.styles = (0,rxjs__WEBPACK_IMPORTED_MODULE_9__.combineLatest)([this._state.resources, this._state.available_resources, this._change]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.map)(([desks, free_desks]) => desks.reduce((styles, desk) => {
      const colours = this._settings.get('app.explore.colors') || {};
      const status = this.active === desk.id ? 'active' : free_desks.find(_ => _.id === desk.id) ? 'free' : this._state.resourceUserName(desk.id) ? 'busy' : 'not-bookable';
      styles[`#${desk.map_id || desk.id}`] = {
        fill: status === 'active' ? '#512DA8' : colours[`desk-${status}`] || colours[`${status}`] || libs_explore_src_lib_explore_spaces_service__WEBPACK_IMPORTED_MODULE_2__.DEFAULT_COLOURS[`${status}`]
      };
      return styles;
    }, {})));
  }
  ngOnInit() {
    this.subscription('levels_update', this._state.options.subscribe(({
      zone_id
    }) => {
      const level = this._org.levelWithID([zone_id]);
      if (level) this.level = level;
    }));
  }
  ngOnChanges(changes) {
    if (changes.active) this._change.next(Date.now());
  }
  selectDesk(desk) {
    this.onSelect.emit(desk);
  }
  setLevel(level) {
    this.setOptions({
      zone_id: level?.id
    });
    const bld = this._org.buildings.find(_ => _.id === level?.parent_id);
    if (bld) {
      const [latitude, longitude] = bld.location.split(',').map(_ => parseFloat(_));
      this.coordinates = {
        latitude,
        longitude
      };
    }
    this.level = level;
  }
  setZoom(new_zoom) {
    this.zoom = Math.max(0.5, Math.min(10, new_zoom));
  }
  resetMap() {
    this.zoom = 1;
    this.center = {
      x: 0.5,
      y: 0.5
    };
  }
  static #_ = this.ɵfac = function DeskMapComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || DeskMapComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵdirectiveInject"](_booking_form_service__WEBPACK_IMPORTED_MODULE_1__.BookingFormService), _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵdirectiveInject"](_placeos_common__WEBPACK_IMPORTED_MODULE_0__.SettingsService), _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵdirectiveInject"](_placeos_organisation__WEBPACK_IMPORTED_MODULE_4__.OrganisationService));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵdefineComponent"]({
    type: DeskMapComponent,
    selectors: [["desk-map"]],
    inputs: {
      is_displayed: "is_displayed",
      active: "active"
    },
    outputs: {
      onSelect: "onSelect"
    },
    features: [_angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵInheritDefinitionFeature"], _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵNgOnChangesFeature"]],
    decls: 8,
    vars: 17,
    consts: () => {
      let i18n_0;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_7323982518822503502$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_MAP_COMPONENT_TS_0 = goog.getMsg("Any Level");
        i18n_0 = MSG_EXTERNAL_7323982518822503502$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_MAP_COMPONENT_TS_0;
      } else {
        i18n_0 = $localize`:␟50407595967bf29832e873b41f9de3502d5c3e03␟7323982518822503502:Any Level`;
      }
      return [[1, "bg-base-100", "p-2", "border-b", "border-base-200", "w-full"], ["levels", "", "appearance", "outline", "class", "w-full", 4, "ngIf"], [1, "relative", "flex-1", "w-full"], [3, "zoomChange", "centerChange", "src", "zoom", "center", "styles", "features", "actions", "options"], ["levels", "", "appearance", "outline", 1, "w-full"], ["name", "location", "placeholder", i18n_0, 3, "ngModelChange", "ngModel", "ngModelOptions"], [3, "value", 4, "ngFor", "ngForOf"], [3, "value"], [1, "flex", "flex-col-reverse"], ["class", "opacity-30 text-xs", 4, "ngIf"], [1, "opacity-30", "text-xs"], [1, "opacity-0"]];
    },
    template: function DeskMapComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](0, "div", 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtemplate"](1, DeskMapComponent_mat_form_field_1_Template, 4, 6, "mat-form-field", 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵpipe"](2, "async");
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](3, "div", 2)(4, "interactive-map", 3);
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵpipe"](5, "async");
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵpipe"](6, "async");
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵpipe"](7, "async");
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtwoWayListener"]("zoomChange", function DeskMapComponent_Template_interactive_map_zoomChange_4_listener($event) {
          _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtwoWayBindingSet"](ctx.zoom, $event) || (ctx.zoom = $event);
          return $event;
        })("centerChange", function DeskMapComponent_Template_interactive_map_centerChange_4_listener($event) {
          _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtwoWayBindingSet"](ctx.center, $event) || (ctx.center = $event);
          return $event;
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]()();
      }
      if (rf & 2) {
        let tmp_0_0;
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵproperty"]("ngIf", (tmp_0_0 = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵpipeBind1"](2, 8, ctx.levels)) == null ? null : tmp_0_0.length);
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵproperty"]("src", ctx.map_url);
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtwoWayProperty"]("zoom", ctx.zoom)("center", ctx.center);
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵproperty"]("styles", _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵpipeBind1"](5, 10, ctx.styles))("features", _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵpipeBind1"](6, 12, ctx.features))("actions", _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵpipeBind1"](7, 14, ctx.actions))("options", _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵpureFunction0"](16, _c0));
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_11__.NgForOf, _angular_common__WEBPACK_IMPORTED_MODULE_11__.NgIf, _angular_forms__WEBPACK_IMPORTED_MODULE_12__.NgControlStatus, _angular_forms__WEBPACK_IMPORTED_MODULE_12__.NgModel, _angular_material_form_field__WEBPACK_IMPORTED_MODULE_13__.MatFormField, _angular_material_core__WEBPACK_IMPORTED_MODULE_14__.MatOption, _components_src_lib_interactive_map_component__WEBPACK_IMPORTED_MODULE_5__.InteractiveMapComponent, _angular_material_select__WEBPACK_IMPORTED_MODULE_15__.MatSelect, _angular_common__WEBPACK_IMPORTED_MODULE_11__.AsyncPipe, _components_src_lib_building_pipe__WEBPACK_IMPORTED_MODULE_6__.BuildingPipe],
    styles: ["[_nghost-%COMP%] {\n                position: relative;\n                background: rgba(0, 0, 0, 0.05);\n                display: flex;\n                flex-direction: column;\n            }\n\n            button[_ngcontent-%COMP%] {\n                border-radius: 0;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRlc2stbWFwLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1lBQ1k7Z0JBQ0ksa0JBQWtCO2dCQUNsQiwrQkFBK0I7Z0JBQy9CLGFBQWE7Z0JBQ2Isc0JBQXNCO1lBQzFCOztZQUVBO2dCQUNJLGdCQUFnQjtZQUNwQiIsImZpbGUiOiJkZXNrLW1hcC5jb21wb25lbnQudHMiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIDpob3N0IHtcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZDogcmdiYSgwLCAwLCAwLCAwLjA1KTtcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGJ1dHRvbiB7XG4gICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl19 */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvYm9va2luZ3Mvc3JjL2xpYi9kZXNrLXNlbGVjdC1tb2RhbC9kZXNrLW1hcC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLGtCQUFrQjtnQkFDbEIsK0JBQStCO2dCQUMvQixhQUFhO2dCQUNiLHNCQUFzQjtZQUMxQjs7WUFFQTtnQkFDSSxnQkFBZ0I7WUFDcEI7O0FBRVosd3NCQUF3c0IiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIDpob3N0IHtcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZDogcmdiYSgwLCAwLCAwLCAwLjA1KTtcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGJ1dHRvbiB7XG4gICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl0sInNvdXJjZVJvb3QiOiIifQ== */"]
  });
}

/***/ }),

/***/ 50622:
/*!********************************************************************************!*\
  !*** ./libs/bookings/src/lib/desk-select-modal/desk-select-modal.component.ts ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DeskSelectModalComponent: () => (/* binding */ DeskSelectModalComponent),
/* harmony export */   FAV_DESK_KEY: () => (/* binding */ FAV_DESK_KEY)
/* harmony export */ });
/* harmony import */ var _angular_material_dialog__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @angular/material/dialog */ 12587);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var _booking_form_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../booking-form.service */ 18379);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../components/src/lib/icon.component */ 69434);
/* harmony import */ var _angular_material_core__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @angular/material/core */ 74646);
/* harmony import */ var _desk_details_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./desk-details.component */ 42280);
/* harmony import */ var _desk_filters_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./desk-filters.component */ 4365);
/* harmony import */ var _desk_filters_display_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./desk-filters-display.component */ 24174);
/* harmony import */ var _desk_list_component__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./desk-list.component */ 93662);
/* harmony import */ var _desk_map_component__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./desk-map.component */ 42596);















function DeskSelectModalComponent_desk_list_16_Template(rf, ctx) {
  if (rf & 1) {
    const _r2 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](0, "desk-list", 30);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵlistener"]("toggleFav", function DeskSelectModalComponent_desk_list_16_Template_desk_list_toggleFav_0_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵrestoreView"](_r2);
      const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵresetView"](ctx_r2.toggleFavourite($event));
    })("onSelect", function DeskSelectModalComponent_desk_list_16_Template_desk_list_onSelect_0_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵrestoreView"](_r2);
      const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵresetView"](ctx_r2.displayed = $event);
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("active", ctx_r2.displayed == null ? null : ctx_r2.displayed.id)("selected", ctx_r2.selected_ids)("favorites", ctx_r2.favorites);
  }
}
function DeskSelectModalComponent_button_19_Template(rf, ctx) {
  if (rf & 1) {
    const _r4 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](0, "button", 31);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵlistener"]("click", function DeskSelectModalComponent_button_19_Template_button_click_0_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵrestoreView"](_r4);
      const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵresetView"](ctx_r2.displayed = null);
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵi18n"](1, 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
  }
}
function DeskSelectModalComponent_ng_template_37_Template(rf, ctx) {
  if (rf & 1) {
    const _r5 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](0, "desk-map", 32);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵlistener"]("onSelect", function DeskSelectModalComponent_ng_template_37_Template_desk_map_onSelect_0_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵrestoreView"](_r5);
      const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵresetView"](ctx_r2.displayed = $event);
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("is_displayed", !!ctx_r2.displayed)("active", ctx_r2.displayed == null ? null : ctx_r2.displayed.id);
  }
}
const FAV_DESK_KEY = 'favourite_desks';
class DeskSelectModalComponent {
  get selected_ids() {
    return this.selected.map(_ => _.id).join(',');
  }
  get favorites() {
    return this._settings.get(FAV_DESK_KEY) || [];
  }
  constructor(_dialog_ref, _settings, _event_form, _data) {
    this._dialog_ref = _dialog_ref;
    this._settings = _settings;
    this._event_form = _event_form;
    this._data = _data;
    this.selected = [];
    this.view = 'list';
    this.selected = [...(_data.items || [])];
    this._event_form.setOptions(_data.options);
  }
  isSelected(id) {
    return id && this.selected_ids.includes(id);
  }
  setSelected(item, state) {
    const list = this.selected.filter(_ => _.id !== item.id);
    if (state) list.push(item);
    this.selected = list;
    if (!this._data.options.group && state) {
      this.displayed = null;
      setTimeout(() => this._dialog_ref.close([item]), 50);
    }
  }
  toggleFavourite(item) {
    const fav_list = this.favorites;
    const new_state = !fav_list.includes(item.id);
    if (new_state) {
      this._settings.saveUserSetting(FAV_DESK_KEY, [...fav_list, item.id]);
    } else {
      this._settings.saveUserSetting(FAV_DESK_KEY, fav_list.filter(_ => _ !== item.id));
    }
  }
  static #_ = this.ɵfac = function DeskSelectModalComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || DeskSelectModalComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵdirectiveInject"](_angular_material_dialog__WEBPACK_IMPORTED_MODULE_9__.MatDialogRef), _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵdirectiveInject"](_placeos_common__WEBPACK_IMPORTED_MODULE_0__.SettingsService), _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵdirectiveInject"](_booking_form_service__WEBPACK_IMPORTED_MODULE_1__.BookingFormService), _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵdirectiveInject"](_angular_material_dialog__WEBPACK_IMPORTED_MODULE_9__.MAT_DIALOG_DATA));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵdefineComponent"]({
    type: DeskSelectModalComponent,
    selectors: [["desk-select-modal"]],
    decls: 39,
    vars: 27,
    consts: () => {
      let i18n_0;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_1749010714240797250$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_SELECT_MODAL_COMPONENT_TS_0 = goog.getMsg("Find Desk");
        i18n_0 = MSG_EXTERNAL_1749010714240797250$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_SELECT_MODAL_COMPONENT_TS_0;
      } else {
        i18n_0 = $localize`:␟4221741642af22ed8e17ee106c326def85e70c61␟1749010714240797250:Find Desk`;
      }
      let i18n_1;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_8443571736703532556$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_SELECT_MODAL_COMPONENT_TS_1 = goog.getMsg(" View List ");
        i18n_1 = MSG_EXTERNAL_8443571736703532556$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_SELECT_MODAL_COMPONENT_TS_1;
      } else {
        i18n_1 = $localize`:␟30d3439b0e0095fe69503245f3bd7a2e9498be7c␟8443571736703532556: View List `;
      }
      let i18n_2;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_819716823718458903$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_SELECT_MODAL_COMPONENT_TS_2 = goog.getMsg("Back to form");
        i18n_2 = MSG_EXTERNAL_819716823718458903$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_SELECT_MODAL_COMPONENT_TS_2;
      } else {
        i18n_2 = $localize`:␟18843b85d1a4f17fefafd07bc5cde636dca44295␟819716823718458903:Back to form`;
      }
      let i18n_3;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_3611851363359647609$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_SELECT_MODAL_COMPONENT_TS_3 = goog.getMsg(" {$interpolation} desk(s) added ", {
          "interpolation": "\uFFFD0\uFFFD"
        }, {
          original_code: {
            "interpolation": "{{ selected.length }}"
          }
        });
        i18n_3 = MSG_EXTERNAL_3611851363359647609$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_SELECT_MODAL_COMPONENT_TS_3;
      } else {
        i18n_3 = $localize`:␟f566e50852be3f327b040870cbf63b59ea3b8d8c␟3611851363359647609: ${"\uFFFD0\uFFFD"}:INTERPOLATION: desk(s) added `;
      }
      let i18n_4;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_6426755559249487826$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_SELECT_MODAL_COMPONENT_TS_4 = goog.getMsg(" {$interpolation} ", {
          "interpolation": "\uFFFD0\uFFFD"
        }, {
          original_code: {
            "interpolation": "{{\n                                isSelected(displayed?.id)\n                                    ? 'Remove from Booking'\n                                    : 'Add to booking'\n                            }}"
          }
        });
        i18n_4 = MSG_EXTERNAL_6426755559249487826$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_SELECT_MODAL_COMPONENT_TS_4;
      } else {
        i18n_4 = $localize`:␟f45c34c7afdabef75762747a20f4113d65eb2312␟6426755559249487826: ${"\uFFFD0\uFFFD"}:INTERPOLATION: `;
      }
      let i18n_5;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_874721418273731876$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_SELECT_MODAL_COMPONENT_TS_5 = goog.getMsg(" Back ");
        i18n_5 = MSG_EXTERNAL_874721418273731876$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_SELECT_MODAL_COMPONENT_TS_5;
      } else {
        i18n_5 = $localize`:␟ccda1d41ca79703a85a3a598c1d97e040a32b766␟874721418273731876: Back `;
      }
      return [["map_view", ""], i18n_0, i18n_1, i18n_2, i18n_3, i18n_4, i18n_5, [1, "w-[100vw]", "h-[100vh]", "sm:relative", "sm:w-auto", "sm:h-auto", "flex", "flex-col", "bg-base-100"], [1, "flex", "items-center", "space-x-4", "w-full"], ["icon", "", "mat-dialog-close", "", 1, "bg-base-200"], [1, "hidden", "sm:flex", "items-center", "justify-end", "flex-1"], ["btn", "", "matRipple", "", "name", "view-desk-map", 1, "rounded-l", "rounded-r-none", 3, "click"], ["btn", "", "matRipple", "", "name", "view-desk-list", 1, "rounded-r", "rounded-l-none", 3, "click"], [1, "flex", "items-center", "divide-x", "divide-base-200", "h-[65vh]", "w-[calc(100vw-4rem)]", "overflow-hidden"], [1, "h-full", "hidden", "sm:flex", "max-w-[20rem]", "sm:h-[65vh]", "sm:max-h-full", 3, "hide_levels"], [1, "flex", "flex-col", "items-center", "flex-1", "w-1/2", "h-full", "sm:h-[65vh]"], [1, "w-full", "border-b", "border-base-200", 3, "viewChange", "view"], ["class", "flex-1 h-1/2 bg-base-200", 3, "active", "selected", "favorites", "toggleFav", "onSelect", 4, "ngIf", "ngIfElse"], [1, "h-full", "w-full", "sm:h-[65vh]", "absolute", "sm:relative", "sm:flex", "sm:max-w-[20rem]", "z-20", "bg-base-100", "block", 3, "activeChange", "toggleFav", "close", "desk", "active", "hide_map", "fav"], [1, "flex", "sm:hidden", "flex-col-reverse", "items-center", "justify-end", "px-2", "pt-2", "pb-[5.5rem]", "border-t", "border-base-200", "w-full"], ["btn", "", "matRipple", "", "name", "desk-return", "class", "inverse sm:hidden w-full", 3, "click", 4, "ngIf"], ["btn", "", "matRipple", "", "name", "save-desks", 1, "w-full", "sm:w-32", "sm:mb-0", 3, "mat-dialog-close"], [1, "hidden", "sm:flex", "items-center", "justify-between", "p-2", "border-t", "border-base-200", "w-full"], ["btn", "", "matRipple", "", "name", "desk-return", 1, "clear", "text-secondary", 3, "mat-dialog-close"], [1, "flex", "items-center"], [1, "text-xl"], [1, "mr-1", "underline"], [1, "opacity-60", "text-sm"], ["btn", "", "matRipple", "", "name", "toggle-desk", 3, "click", "disabled"], [1, "mr-1"], [1, "flex-1", "h-1/2", "bg-base-200", 3, "toggleFav", "onSelect", "active", "selected", "favorites"], ["btn", "", "matRipple", "", "name", "desk-return", 1, "inverse", "sm:hidden", "w-full", 3, "click"], [1, "flex-1", "h-1/2", "w-full", 3, "onSelect", "is_displayed", "active"]];
    },
    template: function DeskSelectModalComponent_Template(rf, ctx) {
      if (rf & 1) {
        const _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵgetCurrentView"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](0, "div", 7)(1, "header", 8)(2, "button", 9)(3, "app-icon");
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](4, "close");
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](5, "h3");
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵi18n"](6, 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](7, "div", 10)(8, "button", 11);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵlistener"]("click", function DeskSelectModalComponent_Template_button_click_8_listener() {
          _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵrestoreView"](_r1);
          return _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵresetView"](ctx.view = "map");
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](9, " Map ");
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](10, "button", 12);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵlistener"]("click", function DeskSelectModalComponent_Template_button_click_10_listener() {
          _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵrestoreView"](_r1);
          return _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵresetView"](ctx.view = "list");
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](11, " List ");
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]()()();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](12, "main", 13);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelement"](13, "desk-filters", 14);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](14, "div", 15)(15, "desk-filters-display", 16);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtwoWayListener"]("viewChange", function DeskSelectModalComponent_Template_desk_filters_display_viewChange_15_listener($event) {
          _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵrestoreView"](_r1);
          _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtwoWayBindingSet"](ctx.view, $event) || (ctx.view = $event);
          return _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵresetView"]($event);
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtemplate"](16, DeskSelectModalComponent_desk_list_16_Template, 1, 3, "desk-list", 17);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](17, "desk-details", 18);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵlistener"]("activeChange", function DeskSelectModalComponent_Template_desk_details_activeChange_17_listener($event) {
          _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵrestoreView"](_r1);
          return _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵresetView"](ctx.setSelected(ctx.displayed, $event));
        })("toggleFav", function DeskSelectModalComponent_Template_desk_details_toggleFav_17_listener() {
          _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵrestoreView"](_r1);
          return _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵresetView"](ctx.toggleFavourite(ctx.displayed));
        })("close", function DeskSelectModalComponent_Template_desk_details_close_17_listener() {
          _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵrestoreView"](_r1);
          return _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵresetView"](ctx.displayed = null);
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](18, "footer", 19);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtemplate"](19, DeskSelectModalComponent_button_19_Template, 2, 0, "button", 20);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](20, "button", 21);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵi18n"](21, 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](22, "footer", 22)(23, "button", 23)(24, "div", 24)(25, "app-icon", 25);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](26, "arrow_back");
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](27, "div", 26);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵi18n"](28, 3);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]()()();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](29, "p", 27);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵi18n"](30, 4);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](31, "button", 28);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵlistener"]("click", function DeskSelectModalComponent_Template_button_click_31_listener() {
          _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵrestoreView"](_r1);
          return _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵresetView"](ctx.setSelected(ctx.displayed, !ctx.isSelected(ctx.displayed == null ? null : ctx.displayed.id)));
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](32, "div", 24)(33, "app-icon", 25);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](34);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](35, "div", 29);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵi18n"](36, 5);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]()()()()();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtemplate"](37, DeskSelectModalComponent_ng_template_37_Template, 1, 2, "ng-template", null, 0, _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtemplateRefExtractor"]);
      }
      if (rf & 2) {
        const map_view_r6 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵreference"](38);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](8);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵclassProp"]("inverse", ctx.view !== "map");
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵclassProp"]("inverse", ctx.view !== "list");
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("hide_levels", ctx.view !== "list");
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtwoWayProperty"]("view", ctx.view);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngIf", ctx.view === "list")("ngIfElse", map_view_r6);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵclassProp"]("hidden", !ctx.displayed)("inset-0", ctx.displayed);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("desk", ctx.displayed)("active", ctx.selected_ids.includes(ctx.displayed == null ? null : ctx.displayed.id))("hide_map", ctx.view === "map")("fav", ctx.displayed && ctx.favorites.includes(ctx.displayed == null ? null : ctx.displayed.id));
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngIf", ctx.displayed);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵclassProp"]("mb-2", ctx.displayed);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("mat-dialog-close", ctx.selected);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("mat-dialog-close", ctx.selected);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](7);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵi18nExp"](ctx.selected.length);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵi18nApply"](30);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵclassProp"]("inverse", ctx.isSelected(ctx.displayed == null ? null : ctx.displayed.id));
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("disabled", !ctx.displayed);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtextInterpolate"](ctx.isSelected(ctx.displayed == null ? null : ctx.displayed.id) ? "remove" : "add");
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵi18nExp"](ctx.isSelected(ctx.displayed == null ? null : ctx.displayed.id) ? "Remove from Booking" : "Add to booking");
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵi18nApply"](36);
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_10__.NgIf, _angular_material_dialog__WEBPACK_IMPORTED_MODULE_9__.MatDialogClose, _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_2__.IconComponent, _angular_material_core__WEBPACK_IMPORTED_MODULE_11__.MatRipple, _desk_details_component__WEBPACK_IMPORTED_MODULE_3__.DeskDetailsComponent, _desk_filters_component__WEBPACK_IMPORTED_MODULE_4__.DeskFiltersComponent, _desk_filters_display_component__WEBPACK_IMPORTED_MODULE_5__.DeskFiltersDisplayComponent, _desk_list_component__WEBPACK_IMPORTED_MODULE_6__.DeskListComponent, _desk_map_component__WEBPACK_IMPORTED_MODULE_7__.DeskMapComponent],
    encapsulation: 2
  });
}

/***/ }),

/***/ 77904:
/*!****************************************************************!*\
  !*** ./libs/bookings/src/lib/desk-settings-modal.component.ts ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DeskSettingsModalComponent: () => (/* binding */ DeskSettingsModalComponent)
/* harmony export */ });
/* harmony import */ var _home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 89204);
/* harmony import */ var _angular_material_dialog__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @angular/material/dialog */ 12587);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var _placeos_organisation__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @placeos/organisation */ 2510);
/* harmony import */ var _placeos_ts_client__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @placeos/ts-client */ 35713);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @angular/forms */ 34456);
/* harmony import */ var _angular_material_form_field__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @angular/material/form-field */ 24950);
/* harmony import */ var _angular_material_core__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @angular/material/core */ 74646);
/* harmony import */ var _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../components/src/lib/icon.component */ 69434);
/* harmony import */ var _components_src_lib_desk_height_presets_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../components/src/lib/desk-height-presets.component */ 3051);
/* harmony import */ var _angular_material_select__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @angular/material/select */ 25175);
/* harmony import */ var _angular_material_slider__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @angular/material/slider */ 64992);

















function DeskSettingsModalComponent_div_0_Template(rf, ctx) {
  if (rf & 1) {
    const _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](0, "div", 4)(1, "div", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵi18n"](2, 1);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](3, "div", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵi18n"](4, 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](5, "div", 7)(6, "label");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](7, "Presets");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](8, "div", 8)(9, "mat-form-field", 9)(10, "mat-select", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtwoWayListener"]("ngModelChange", function DeskSettingsModalComponent_div_0_Template_mat_select_ngModelChange_10_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵrestoreView"](_r1);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵnextContext"]();
      _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtwoWayBindingSet"](ctx_r1.preset, $event) || (ctx_r1.preset = $event);
      return _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵresetView"]($event);
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵlistener"]("ngModelChange", function DeskSettingsModalComponent_div_0_Template_mat_select_ngModelChange_10_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵrestoreView"](_r1);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵresetView"](ctx_r1.setPreset($event));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](11, "mat-option", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](12, "None");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](13, "mat-option", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](14, "Standing");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](15, "mat-option", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](16, "Seated");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]()()();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](17, "button", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵlistener"]("click", function DeskSettingsModalComponent_div_0_Template_button_click_17_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵrestoreView"](_r1);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵresetView"](ctx_r1.edit_presets = true);
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](18, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](19, "edit");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]()()();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](20, "label");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](21, "Current Height");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](22, "div", 15)(23, "mat-slider", 16)(24, "input", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtwoWayListener"]("ngModelChange", function DeskSettingsModalComponent_div_0_Template_input_ngModelChange_24_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵrestoreView"](_r1);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵnextContext"]();
      _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtwoWayBindingSet"](ctx_r1.height, $event) || (ctx_r1.height = $event);
      return _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵresetView"]($event);
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵlistener"]("ngModelChange", function DeskSettingsModalComponent_div_0_Template_input_ngModelChange_24_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵrestoreView"](_r1);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵresetView"](ctx_r1.updatePreset(ctx_r1.height));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](25, "div", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](26);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]()()();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](27, "button", 19);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵlistener"]("click", function DeskSettingsModalComponent_div_0_Template_button_click_27_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵrestoreView"](_r1);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵresetView"](ctx_r1.setDeskHeight());
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](28, " Apply Settings ");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](29, "button", 20)(30, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](31, "close");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]()()();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](10);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtwoWayProperty"]("ngModel", ctx_r1.preset);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](13);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("displayWith", ctx_r1.formatLabel);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtwoWayProperty"]("ngModel", ctx_r1.height);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtextInterpolate1"](" ", ctx_r1.height.toFixed(1), "cm ");
  }
}
function DeskSettingsModalComponent_ng_template_1_Template(rf, ctx) {
  if (rf & 1) {
    const _r3 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](0, "desk-height-presets", 21);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵlistener"]("close", function DeskSettingsModalComponent_ng_template_1_Template_desk_height_presets_close_0_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵrestoreView"](_r3);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵresetView"](ctx_r1.edit_presets = false);
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("show_close", true);
  }
}
class DeskSettingsModalComponent {
  constructor(_data, _org, _settings, _dialog_ref) {
    this._data = _data;
    this._org = _org;
    this._settings = _settings;
    this._dialog_ref = _dialog_ref;
    this.desk_id = this._data.id;
    this.edit_presets = false;
    this.height = 71;
  }
  ngOnInit() {
    const sitting_height = this._settings.get('desk_sitting_height');
    const standing_height = this._settings.get('desk_standing_height');
    if (!sitting_height && !standing_height) {
      this.edit_presets = true;
    }
    const last_height = parseInt(localStorage.getItem('PLACEOS.last_desk_height'), 10);
    this.height = last_height || sitting_height || 71;
    if (this.height === sitting_height) {
      this.preset = 'sitting';
    } else if (this.height === standing_height) {
      this.preset = 'standing';
    }
  }
  updatePreset(new_height) {
    const sitting_height = this._settings.get('desk_sitting_height') || 71;
    const standing_height = this._settings.get('desk_standing_height') || 102;
    if (new_height === sitting_height) {
      this.preset = 'sitting';
    } else if (new_height === standing_height) {
      this.preset = 'standing';
    } else {
      this.preset = null;
    }
  }
  setPreset(value) {
    switch (value) {
      case 'standing':
        this.height = this._settings.get('desk_standing_height') || 102;
        break;
      case 'sitting':
        this.height = this._settings.get('desk_sitting_height') || 71;
        break;
      default:
        this.height = 70;
        break;
    }
  }
  setDeskHeight() {
    var _this = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      const sys_id = _this._org.binding('desks');
      localStorage.setItem('PLACEOS.last_desk_height', `${_this.height}`);
      if (!sys_id) return _this._dialog_ref.close();
      const module = (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_3__.getModule)(sys_id, 'DeskControl');
      yield module.execute('set_desk_height', [_this.desk_id, _this.height]).catch(_ => {
        (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.notifyError)('Error setting desk height.' + _);
        throw _;
      });
      (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.notifySuccess)('Successfully set desk height');
      _this._dialog_ref.close();
    })();
  }
  formatLabel(value) {
    return `${value.toFixed(1)}cm`;
  }
  static #_ = this.ɵfac = function DeskSettingsModalComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || DeskSettingsModalComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵdirectiveInject"](_angular_material_dialog__WEBPACK_IMPORTED_MODULE_7__.MAT_DIALOG_DATA), _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵdirectiveInject"](_placeos_organisation__WEBPACK_IMPORTED_MODULE_2__.OrganisationService), _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵdirectiveInject"](_placeos_common__WEBPACK_IMPORTED_MODULE_1__.SettingsService), _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵdirectiveInject"](_angular_material_dialog__WEBPACK_IMPORTED_MODULE_7__.MatDialogRef));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵdefineComponent"]({
    type: DeskSettingsModalComponent,
    selectors: [["desk-settings-modal"]],
    decls: 3,
    vars: 2,
    consts: () => {
      let i18n_0;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_7032027191807032897$$LIBS_BOOKINGS_SRC_LIB_DESK_SETTINGS_MODAL_COMPONENT_TS_0 = goog.getMsg("Desk Height");
        i18n_0 = MSG_EXTERNAL_7032027191807032897$$LIBS_BOOKINGS_SRC_LIB_DESK_SETTINGS_MODAL_COMPONENT_TS_0;
      } else {
        i18n_0 = $localize`:␟ec37a2ac1276a5f69d65d5ba86b2e98c41b201a9␟7032027191807032897:Desk Height`;
      }
      let i18n_1;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_8247461324425873330$$LIBS_BOOKINGS_SRC_LIB_DESK_SETTINGS_MODAL_COMPONENT_TS_1 = goog.getMsg(" Set your desk height for the best experience ");
        i18n_1 = MSG_EXTERNAL_8247461324425873330$$LIBS_BOOKINGS_SRC_LIB_DESK_SETTINGS_MODAL_COMPONENT_TS_1;
      } else {
        i18n_1 = $localize`:␟de53fc27bc96d3e69d6c7d9b0a19619db7cc1076␟8247461324425873330: Set your desk height for the best experience `;
      }
      return [["desk_height_tooltip", ""], i18n_0, i18n_1, ["class", "relative p-4 bg-base-100 rounded shadow w-[20rem]", 4, "ngIf", "ngIfElse"], [1, "relative", "p-4", "bg-base-100", "rounded", "shadow", "w-[20rem]"], [1, "text-lg"], [1, "text-xs", "opacity-60", "mb-4"], [1, "flex", "flex-col", "mt-2", "mb-4"], [1, "flex", "items-center", "space-x-2", "pb-4"], ["appearance", "outline", 1, "no-subscript", "flex-1", "w-1/2"], ["placeholder", "No selected preset", 3, "ngModelChange", "ngModel"], ["value", ""], ["value", "standing"], ["value", "sitting"], ["icon", "", "matRipple", "", 1, "rounded", "h-12", "w-12", "bg-secondary", "text-secondary-content", 3, "click"], [1, "flex", "items-center", "space-x-2"], ["min", "60", "max", "120", "step", "0.5", "discrete", "", 1, "flex-1", 3, "displayWith"], ["matSliderThumb", "", 3, "ngModelChange", "ngModel"], [1, "text-sm", "w-12", "text-right"], ["btn", "", "matRipple", "", 1, "w-full", 3, "click"], ["icon", "", "matRipple", "", "mat-dialog-close", "", 1, "absolute", "top-0", "right-0"], [3, "close", "show_close"]];
    },
    template: function DeskSettingsModalComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtemplate"](0, DeskSettingsModalComponent_div_0_Template, 32, 4, "div", 3)(1, DeskSettingsModalComponent_ng_template_1_Template, 1, 1, "ng-template", null, 0, _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtemplateRefExtractor"]);
      }
      if (rf & 2) {
        const desk_height_tooltip_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵreference"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("ngIf", !ctx.edit_presets)("ngIfElse", desk_height_tooltip_r4);
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_8__.NgIf, _angular_forms__WEBPACK_IMPORTED_MODULE_9__.DefaultValueAccessor, _angular_forms__WEBPACK_IMPORTED_MODULE_9__.NgControlStatus, _angular_forms__WEBPACK_IMPORTED_MODULE_9__.NgModel, _angular_material_form_field__WEBPACK_IMPORTED_MODULE_10__.MatFormField, _angular_material_dialog__WEBPACK_IMPORTED_MODULE_7__.MatDialogClose, _angular_material_core__WEBPACK_IMPORTED_MODULE_11__.MatOption, _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_4__.IconComponent, _components_src_lib_desk_height_presets_component__WEBPACK_IMPORTED_MODULE_5__.DeskHeightPresetsComponent, _angular_material_select__WEBPACK_IMPORTED_MODULE_12__.MatSelect, _angular_material_core__WEBPACK_IMPORTED_MODULE_11__.MatRipple, _angular_material_slider__WEBPACK_IMPORTED_MODULE_13__.MatSlider, _angular_material_slider__WEBPACK_IMPORTED_MODULE_13__.MatSliderThumb],
    encapsulation: 2
  });
}

/***/ }),

/***/ 68874:
/*!****************************************************************!*\
  !*** ./libs/bookings/src/lib/invite-visitor-form.component.ts ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   InviteVisitorFormComponent: () => (/* binding */ InviteVisitorFormComponent)
/* harmony export */ });
/* harmony import */ var _home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 89204);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @angular/forms */ 34456);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! rxjs/operators */ 57871);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var libs_common_src_lib_notifications__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! libs/common/src/lib/notifications */ 39525);
/* harmony import */ var libs_common_src_lib_general__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! libs/common/src/lib/general */ 64217);
/* harmony import */ var libs_organisation_src_lib_organisation_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! libs/organisation/src/lib/organisation.service */ 19863);
/* harmony import */ var _booking_form_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./booking-form.service */ 18379);
/* harmony import */ var libs_users_src_lib_user_class__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! libs/users/src/lib/user.class */ 93693);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _angular_material_input__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @angular/material/input */ 95541);
/* harmony import */ var _angular_material_form_field__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @angular/material/form-field */ 24950);
/* harmony import */ var _angular_material_progress_spinner__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @angular/material/progress-spinner */ 41134);
/* harmony import */ var _angular_material_autocomplete__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! @angular/material/autocomplete */ 79771);
/* harmony import */ var _angular_material_core__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! @angular/material/core */ 74646);
/* harmony import */ var _form_fields_src_lib_date_field_component__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../form-fields/src/lib/date-field.component */ 19608);
/* harmony import */ var _form_fields_src_lib_duration_field_component__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../form-fields/src/lib/duration-field.component */ 83476);
/* harmony import */ var _form_fields_src_lib_time_field_component__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../form-fields/src/lib/time-field.component */ 81413);
/* harmony import */ var _form_fields_src_lib_user_list_field_component__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../form-fields/src/lib/user-list-field.component */ 840);
/* harmony import */ var _form_fields_src_lib_user_search_field_component__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../form-fields/src/lib/user-search-field.component */ 18000);
/* harmony import */ var _angular_material_select__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! @angular/material/select */ 25175);
/* harmony import */ var _ngx_translate_core__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! @ngx-translate/core */ 597);




























const _c0 = () => ({
  standalone: true
});
function InviteVisitorFormComponent_ng_container_0_div_1_form_4_div_1_mat_option_6_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](0, "mat-option", 48);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const bld_r5 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵproperty"]("value", bld_r5.id);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtextInterpolate1"](" ", bld_r5.display_name || bld_r5.name, " ");
  }
}
function InviteVisitorFormComponent_ng_container_0_div_1_form_4_div_1_Template(rf, ctx) {
  if (rf & 1) {
    const _r3 = _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](0, "div", 32)(1, "label", 45);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵi18nStart"](2, 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelement"](3, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵi18nEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](4, "mat-form-field", 43)(5, "mat-select", 46);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵlistener"]("ngModelChange", function InviteVisitorFormComponent_ng_container_0_div_1_form_4_div_1_Template_mat_select_ngModelChange_5_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵrestoreView"](_r3);
      const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵnextContext"](4);
      return _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵresetView"](ctx_r3.form.patchValue({
        zones: [$event]
      }));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtemplate"](6, InviteVisitorFormComponent_ng_container_0_div_1_form_4_div_1_mat_option_6_Template, 2, 2, "mat-option", 47);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵpipe"](7, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]()()();
  }
  if (rf & 2) {
    const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵnextContext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵproperty"]("ngModel", ctx_r3.form.value.zones[0])("ngModelOptions", _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵpureFunction0"](5, _c0));
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵproperty"]("ngForOf", _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵpipeBind1"](7, 3, ctx_r3.buildings));
  }
}
function InviteVisitorFormComponent_ng_container_0_div_1_form_4_div_18_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](0, "div", 49)(1, "label", 50);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵpipe"](3, "translate");
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](4, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtext"](5, "*");
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelement"](6, "a-user-search-field", 51);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵpipeBind1"](3, 1, "FORM.HOST"), "");
  }
}
function InviteVisitorFormComponent_ng_container_0_div_1_form_4_ng_container_19_mat_option_9_Template(rf, ctx) {
  if (rf & 1) {
    const _r7 = _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](0, "mat-option", 58);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵlistener"]("click", function InviteVisitorFormComponent_ng_container_0_div_1_form_4_ng_container_19_mat_option_9_Template_mat_option_click_0_listener() {
      const item_r8 = _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵrestoreView"](_r7).$implicit;
      const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵnextContext"](5);
      return _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵresetView"](ctx_r3.setVisitor(item_r8));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](1, "div", 59)(2, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](4, "div", 60);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtext"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]()()();
  }
  if (rf & 2) {
    const item_r8 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵproperty"]("value", item_r8.name);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtextInterpolate"](item_r8.name);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtextInterpolate2"](" ", item_r8.email, " ", item_r8.company ? "| " + item_r8.company : "", " ");
  }
}
function InviteVisitorFormComponent_ng_container_0_div_1_form_4_ng_container_19_mat_option_20_Template(rf, ctx) {
  if (rf & 1) {
    const _r9 = _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](0, "mat-option", 58);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵlistener"]("click", function InviteVisitorFormComponent_ng_container_0_div_1_form_4_ng_container_19_mat_option_20_Template_mat_option_click_0_listener() {
      const item_r10 = _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵrestoreView"](_r9).$implicit;
      const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵnextContext"](5);
      return _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵresetView"](ctx_r3.setVisitor(item_r10));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](1, "div", 59)(2, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](4, "div", 60);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtext"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]()()();
  }
  if (rf & 2) {
    const item_r10 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵproperty"]("value", item_r10.email);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtextInterpolate"](item_r10.name);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtextInterpolate2"](" ", item_r10.email, " ", item_r10.company ? "| " + item_r10.company : "", " ");
  }
}
function InviteVisitorFormComponent_ng_container_0_div_1_form_4_ng_container_19_Template(rf, ctx) {
  if (rf & 1) {
    const _r6 = _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](1, "div", 32)(2, "label", 52);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵi18nStart"](3, 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelement"](4, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵi18nEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](5, "mat-form-field", 43)(6, "input", 53);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵlistener"]("focus", function InviteVisitorFormComponent_ng_container_0_div_1_form_4_ng_container_19_Template_input_focus_6_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵrestoreView"](_r6);
      const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵnextContext"](4);
      return _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵresetView"](ctx_r3.filterVisitors(ctx_r3.form.value.asset_name));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](7, "mat-autocomplete", null, 3);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtemplate"](9, InviteVisitorFormComponent_ng_container_0_div_1_form_4_ng_container_19_mat_option_9_Template, 6, 4, "mat-option", 54);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](10, "div", 32)(11, "label", 55);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵi18nStart"](12, 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelement"](13, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵi18nEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](14, "mat-form-field", 43)(15, "input", 56);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵlistener"]("focus", function InviteVisitorFormComponent_ng_container_0_div_1_form_4_ng_container_19_Template_input_focus_15_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵrestoreView"](_r6);
      const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵnextContext"](4);
      return _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵresetView"](ctx_r3.filterVisitors(ctx_r3.form.value.asset_id));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](16, "mat-error");
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵi18n"](17, 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](18, "mat-autocomplete", null, 4);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtemplate"](20, InviteVisitorFormComponent_ng_container_0_div_1_form_4_ng_container_19_mat_option_20_Template, 6, 4, "mat-option", 54);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](21, "div", 32)(22, "label", 52);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵi18n"](23, 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](24, "mat-form-field", 43);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelement"](25, "input", 57);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementContainerEnd"]();
  }
  if (rf & 2) {
    const name_auto_r11 = _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵreference"](8);
    const email_auto_r12 = _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵreference"](19);
    const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵnextContext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"](6);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵproperty"]("matAutocomplete", name_auto_r11);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵproperty"]("ngForOf", ctx_r3.filtered_visitors);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"](6);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵproperty"]("matAutocomplete", email_auto_r12);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵproperty"]("ngForOf", ctx_r3.filtered_visitors);
  }
}
function InviteVisitorFormComponent_ng_container_0_div_1_form_4_Template(rf, ctx) {
  if (rf & 1) {
    const _r2 = _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](0, "form", 30);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtemplate"](1, InviteVisitorFormComponent_ng_container_0_div_1_form_4_div_1_Template, 8, 6, "div", 31);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](2, "div", 32)(3, "label", 33);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵi18nStart"](4, 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelement"](5, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵi18nEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelement"](6, "a-date-field", 34);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](7, "div", 35)(8, "div", 36)(9, "label", 37);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵi18nStart"](10, 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelement"](11, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵi18nEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](12, "a-time-field", 38);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵlistener"]("ngModelChange", function InviteVisitorFormComponent_ng_container_0_div_1_form_4_Template_a_time_field_ngModelChange_12_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵrestoreView"](_r2);
      const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵnextContext"](3);
      return _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵresetView"](ctx_r3.form.patchValue({
        date: $event
      }));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](13, "div", 36)(14, "label", 39);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵi18nStart"](15, 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelement"](16, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵi18nEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelement"](17, "a-duration-field", 40);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtemplate"](18, InviteVisitorFormComponent_ng_container_0_div_1_form_4_div_18_Template, 7, 3, "div", 41)(19, InviteVisitorFormComponent_ng_container_0_div_1_form_4_ng_container_19_Template, 26, 4, "ng-container", 22);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](20, "div", 32)(21, "label", 42);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵi18n"](22, 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](23, "mat-form-field", 43);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelement"](24, "input", 44);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]()()();
  }
  if (rf & 2) {
    const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵnextContext"](3);
    const multi_state_r13 = _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵreference"](6);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵproperty"]("formGroup", ctx_r3.form);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵproperty"]("ngIf", (ctx_r3.buildings == null ? null : ctx_r3.buildings.length) > 1);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"](11);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵproperty"]("ngModel", ctx_r3.form.value.date)("ngModelOptions", _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵpureFunction0"](11, _c0))("disabled", ctx_r3.form.value.all_day)("use_24hr", ctx_r3.use_24hr);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵproperty"]("time", ctx_r3.form.value.date)("use_24hr", ctx_r3.use_24hr);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵproperty"]("ngIf", ctx_r3.can_book_for_others);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵproperty"]("ngIf", !ctx_r3.multiple)("ngIfElse", multi_state_r13);
  }
}
function InviteVisitorFormComponent_ng_container_0_div_1_Template(rf, ctx) {
  if (rf & 1) {
    const _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](0, "div", 24)(1, "div", 25)(2, "h2", 26);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵi18n"](3, 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtemplate"](4, InviteVisitorFormComponent_ng_container_0_div_1_form_4_Template, 25, 12, "form", 27);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](5, "div", 28)(6, "button", 29);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵlistener"]("click", function InviteVisitorFormComponent_ng_container_0_div_1_Template_button_click_6_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵrestoreView"](_r1);
      const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵnextContext"](2);
      return _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵresetView"](ctx_r3.sendInvite());
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵi18n"](7, 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]()()();
  }
  if (rf & 2) {
    const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵproperty"]("ngIf", ctx_r3.form);
  }
}
function InviteVisitorFormComponent_ng_container_0_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtemplate"](1, InviteVisitorFormComponent_ng_container_0_div_1_Template, 8, 1, "div", 23);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵpipe"](2, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementContainerEnd"]();
  }
  if (rf & 2) {
    const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵnextContext"]();
    const load_state_r14 = _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵreference"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵproperty"]("ngIf", !_angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵpipeBind1"](2, 2, ctx_r3.loading) && !ctx_r3.loading_many)("ngIfElse", load_state_r14);
  }
}
function InviteVisitorFormComponent_ng_template_1_ng_container_4_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵi18nStart"](0, 16, 1);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementContainer"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵi18nEnd"]();
  }
  if (rf & 2) {
    const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵi18nExp"]((ctx_r3.last_success == null ? null : ctx_r3.last_success.asset_name) || (ctx_r3.last_success == null ? null : ctx_r3.last_success.asset_id));
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵi18nApply"](0);
  }
}
function InviteVisitorFormComponent_ng_template_1_ng_container_5_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵi18nStart"](0, 16, 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementContainer"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵi18nEnd"]();
  }
  if (rf & 2) {
    const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵi18nExp"](ctx_r3.last_count)(ctx_r3.last_count == 1 ? "" : "s");
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵi18nApply"](0);
  }
}
function InviteVisitorFormComponent_ng_template_1_ng_container_10_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵi18nStart"](0, 17, 1);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementContainer"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵi18nEnd"]();
  }
  if (rf & 2) {
    const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵi18nExp"]((ctx_r3.last_success == null ? null : ctx_r3.last_success.asset_name) || (ctx_r3.last_success == null ? null : ctx_r3.last_success.asset_id));
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵi18nApply"](0);
  }
}
function InviteVisitorFormComponent_ng_template_1_ng_container_11_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵi18nStart"](0, 17, 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementContainer"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵi18nEnd"]();
  }
  if (rf & 2) {
    const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵi18nExp"](ctx_r3.last_count)(ctx_r3.last_count == 1 ? "" : "s");
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵi18nApply"](0);
  }
}
function InviteVisitorFormComponent_ng_template_1_Template(rf, ctx) {
  if (rf & 1) {
    const _r15 = _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](0, "div", 61)(1, "div", 62)(2, "h2", 63);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵi18nStart"](3, 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtemplate"](4, InviteVisitorFormComponent_ng_template_1_ng_container_4_Template, 2, 1, "ng-container", 64)(5, InviteVisitorFormComponent_ng_template_1_ng_container_5_Template, 2, 2, "ng-container", 64);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵi18nEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelement"](6, "img", 65);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](7, "p");
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵi18nStart"](8, 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](9, "i");
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtemplate"](10, InviteVisitorFormComponent_ng_template_1_ng_container_10_Template, 2, 1, "ng-container", 64)(11, InviteVisitorFormComponent_ng_template_1_ng_container_11_Template, 2, 2, "ng-container", 64);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵpipe"](12, "date");
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵpipe"](13, "date");
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵi18nEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](14, "div", 66)(15, "div", 67)(16, "button", 68);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵlistener"]("click", function InviteVisitorFormComponent_ng_template_1_Template_button_click_16_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵrestoreView"](_r15);
      const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵresetView"](ctx_r3.onDone());
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵi18n"](17, 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](18, "button", 68);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵlistener"]("click", function InviteVisitorFormComponent_ng_template_1_Template_button_click_18_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵrestoreView"](_r15);
      const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵresetView"](ctx_r3.sent = false);
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵi18n"](19, 19);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]()()()();
  }
  if (rf & 2) {
    const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵproperty"]("ngIf", !ctx_r3.multiple);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵproperty"]("ngIf", ctx_r3.multiple);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵproperty"]("ngIf", !ctx_r3.multiple);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵproperty"]("ngIf", ctx_r3.multiple);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵi18nExp"]((ctx_r3.building == null ? null : ctx_r3.building.display_name) || (ctx_r3.building == null ? null : ctx_r3.building.name))(_angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵpipeBind2"](12, 7, ctx_r3.last_success == null ? null : ctx_r3.last_success.date, "mediumDate"))(_angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵpipeBind2"](13, 10, ctx_r3.last_success == null ? null : ctx_r3.last_success.date, ctx_r3.time_format));
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵi18nApply"](8);
  }
}
function InviteVisitorFormComponent_ng_template_3_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](0, "div", 69);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelement"](1, "mat-spinner", 70);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](2, "p");
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵi18n"](3, 20);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵproperty"]("diameter", 32);
  }
}
function InviteVisitorFormComponent_ng_template_5_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](0, "div", 71)(1, "label", 52);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵi18nStart"](2, 21);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelement"](3, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵi18nEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelement"](4, "a-user-list-field", 72);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵproperty"]("formGroup", ctx_r3.form);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵproperty"]("guests_only", true);
  }
}
class InviteVisitorFormComponent extends _placeos_common__WEBPACK_IMPORTED_MODULE_1__.AsyncHandler {
  get multiple() {
    return this._settings.get('app.bookings.multiple_visitors');
  }
  get can_book_for_others() {
    return this._settings.get('app.bookings.can_book_for_others');
  }
  get building() {
    return this._settings.get('app.use_region') ? this._org.region : this._org.building;
  }
  get form() {
    return this._service.form;
  }
  get time_format() {
    return this._settings.time_format;
  }
  get use_24hr() {
    return this._settings.get('app.use_24_hour_time');
  }
  constructor(_service, _settings, _org) {
    super();
    this._service = _service;
    this._settings = _settings;
    this._org = _org;
    this.done = new _angular_core__WEBPACK_IMPORTED_MODULE_12__.EventEmitter();
    this.sent = false;
    this.loading = this._service.loading;
    this.loading_many = false;
    this.buildings = this._org.active_buildings;
    this.last_success = this._service.last_success;
    this.last_count = 0;
    this.visitors = [];
    this.filtered_visitors = [];
  }
  ngOnInit() {
    var _this = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      _this.sent = false;
      _this._service.clearOldState();
      yield _this.initFormZone();
      _this.form.get('asset_id').setValidators([_angular_forms__WEBPACK_IMPORTED_MODULE_13__.Validators.required, _angular_forms__WEBPACK_IMPORTED_MODULE_13__.Validators.email]);
      const visitors = _this._settings.get('visitor-invitees') || [];
      for (const item of visitors) {
        const [email, name, company] = item.split('|');
        _this.visitors.push({
          email,
          name,
          company
        });
      }
      _this.filterVisitors('');
      _this.subscription('email', _this.form.get('asset_id').valueChanges.subscribe(_ => _this.filterVisitors(_)));
      _this.subscription('name', _this.form.get('asset_name').valueChanges.subscribe(_ => _this.filterVisitors(_)));
      if (_this.multiple) _this.form.patchValue({
        asset_id: 'multiple@place.tech'
      });
    })();
  }
  setVisitor(item) {
    this.form.patchValue({
      asset_id: item.email,
      asset_name: item.name,
      company: item.company,
      phone: item.phone
    });
  }
  filterVisitors(filter) {
    const s = (filter || '').toLowerCase();
    this.filtered_visitors = this.visitors.filter(({
      email,
      name,
      company
    }) => email.toLowerCase().includes(s) || name.toLowerCase().includes(s) || company.toLowerCase().includes(s));
  }
  onDone() {
    this.done.emit();
    this.sent = false;
  }
  sendInvite() {
    var _this2 = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      _this2.form.markAllAsTouched();
      if (!_this2.form.valid || _this2.multiple && !_this2.form.value.assets.length) {
        return (0,libs_common_src_lib_notifications__WEBPACK_IMPORTED_MODULE_2__.notifyError)(`Some fields are invalid. [${(0,libs_common_src_lib_general__WEBPACK_IMPORTED_MODULE_3__.getInvalidFields)(_this2.form).join(', ') || 'visitors'}]`);
      }
      if (!_this2.form.value.user_email || !_this2.can_book_for_others) {
        _this2.form.patchValue({
          user: (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.currentUser)()
        });
      }
      const {
        asset_id,
        asset_name,
        company,
        assets
      } = _this2.form.value;
      const visitor_details = `${asset_id}|${asset_name}|${company}`;
      const old_visitors = _this2._settings.get('visitor-invitees') || [];
      _this2._settings.saveUserSetting('visitor-invitees', [...old_visitors.filter(_ => !_.includes(asset_id)), visitor_details]);
      yield _this2.multiple ? _this2._bookForMany() : _this2._bookForOne();
      _this2.last_success = _this2._service.last_success;
      yield _this2.initFormZone();
      _this2.sent = true;
    })();
  }
  initFormZone() {
    var _this3 = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      yield _this3._org.initialised.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_14__.first)(_ => _)).toPromise();
      _this3._service.setOptions({
        type: 'visitor'
      });
      _this3.form.patchValue({
        booking_type: 'visitor',
        zones: [_this3._org.building?.id]
      });
      if (_this3.multiple) _this3.form.patchValue({
        asset_id: 'multiple@place.tech'
      });
    })();
  }
  _bookForOne() {
    var _this4 = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      const value = _this4.form.value;
      _this4.form.patchValue({
        name: value.asset_name,
        attendees: [new libs_users_src_lib_user_class__WEBPACK_IMPORTED_MODULE_6__.User({
          name: value.asset_name,
          email: value.asset_id,
          organisation: value.company,
          phone: value.phone
        })]
      });
      yield _this4._service.postForm().catch(e => {
        (0,libs_common_src_lib_notifications__WEBPACK_IMPORTED_MODULE_2__.notifyError)(e);
        throw e;
      });
    })();
  }
  _bookForMany() {
    var _this5 = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      _this5.loading_many = true;
      const group = `grp-${(0,libs_common_src_lib_general__WEBPACK_IMPORTED_MODULE_3__.randomString)(8)}`;
      const value = _this5.form.value;
      const assets = value.assets;
      _this5.last_count = assets.length;
      for (const user of assets) {
        if (!user.email) continue;
        _this5.form.patchValue({
          ...value,
          booking_type: 'visitor',
          asset_id: user.email,
          asset_name: user.name,
          user: (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.currentUser)(),
          description: group,
          name: user.name,
          assets: [],
          attendees: [new libs_users_src_lib_user_class__WEBPACK_IMPORTED_MODULE_6__.User({
            name: user.name,
            email: user.email,
            organisation: user.company || user.organisation,
            phone: user.phone
          })]
        });
        yield _this5._service.postForm().catch(e => {
          (0,libs_common_src_lib_notifications__WEBPACK_IMPORTED_MODULE_2__.notifyError)(e);
          _this5.loading_many = false;
          throw e;
        });
      }
      _this5.loading_many = false;
    })();
  }
  static #_ = this.ɵfac = function InviteVisitorFormComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || InviteVisitorFormComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵdirectiveInject"](_booking_form_service__WEBPACK_IMPORTED_MODULE_5__.BookingFormService), _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵdirectiveInject"](_placeos_common__WEBPACK_IMPORTED_MODULE_1__.SettingsService), _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵdirectiveInject"](libs_organisation_src_lib_organisation_service__WEBPACK_IMPORTED_MODULE_4__.OrganisationService));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵdefineComponent"]({
    type: InviteVisitorFormComponent,
    selectors: [["invite-visitor-form"]],
    outputs: {
      done: "done"
    },
    features: [_angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵInheritDefinitionFeature"]],
    decls: 7,
    vars: 2,
    consts: () => {
      let i18n_0;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_4809719174148656467$$LIBS_BOOKINGS_SRC_LIB_INVITE_VISITOR_FORM_COMPONENT_TS_0 = goog.getMsg("Invite Visitor");
        i18n_0 = MSG_EXTERNAL_4809719174148656467$$LIBS_BOOKINGS_SRC_LIB_INVITE_VISITOR_FORM_COMPONENT_TS_0;
      } else {
        i18n_0 = $localize`:␟5ce047ca92a7474d89cf5b08a9913b0a93d28404␟4809719174148656467:Invite Visitor`;
      }
      let i18n_1;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_994966389368964414$$LIBS_BOOKINGS_SRC_LIB_INVITE_VISITOR_FORM_COMPONENT_TS_1 = goog.getMsg(" Send Visitor Invite ");
        i18n_1 = MSG_EXTERNAL_994966389368964414$$LIBS_BOOKINGS_SRC_LIB_INVITE_VISITOR_FORM_COMPONENT_TS_1;
      } else {
        i18n_1 = $localize`:␟207022d8123aa7a8693ff4c53cd28fea3d5bdff2␟994966389368964414: Send Visitor Invite `;
      }
      let i18n_2;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_3158758063619980932$$LIBS_BOOKINGS_SRC_LIB_INVITE_VISITOR_FORM_COMPONENT_TS_2 = goog.getMsg("Date{$startTagSpan}*{$closeTagSpan}", {
          "closeTagSpan": "\uFFFD/#5\uFFFD",
          "startTagSpan": "\uFFFD#5\uFFFD"
        }, {
          original_code: {
            "closeTagSpan": "</span>",
            "startTagSpan": "<span>"
          }
        });
        i18n_2 = MSG_EXTERNAL_3158758063619980932$$LIBS_BOOKINGS_SRC_LIB_INVITE_VISITOR_FORM_COMPONENT_TS_2;
      } else {
        i18n_2 = $localize`:␟04cfb5fd033651743bc4b9408bd52ba4ee894070␟3158758063619980932:Date${"\uFFFD#5\uFFFD"}:START_TAG_SPAN:*${"\uFFFD/#5\uFFFD"}:CLOSE_TAG_SPAN:`;
      }
      let i18n_3;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_145741817832495807$$LIBS_BOOKINGS_SRC_LIB_INVITE_VISITOR_FORM_COMPONENT_TS_3 = goog.getMsg(" Start Time{$startTagSpan}*{$closeTagSpan}", {
          "closeTagSpan": "\uFFFD/#11\uFFFD",
          "startTagSpan": "\uFFFD#11\uFFFD"
        }, {
          original_code: {
            "closeTagSpan": "</span>",
            "startTagSpan": "<span>"
          }
        });
        i18n_3 = MSG_EXTERNAL_145741817832495807$$LIBS_BOOKINGS_SRC_LIB_INVITE_VISITOR_FORM_COMPONENT_TS_3;
      } else {
        i18n_3 = $localize`:␟eac10bd97a4b6b06a0221c661de781836b7a1e1c␟145741817832495807: Start Time${"\uFFFD#11\uFFFD"}:START_TAG_SPAN:*${"\uFFFD/#11\uFFFD"}:CLOSE_TAG_SPAN:`;
      }
      let i18n_4;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_5960185837188220843$$LIBS_BOOKINGS_SRC_LIB_INVITE_VISITOR_FORM_COMPONENT_TS_4 = goog.getMsg("End Time{$startTagSpan}*{$closeTagSpan}", {
          "closeTagSpan": "\uFFFD/#16\uFFFD",
          "startTagSpan": "\uFFFD#16\uFFFD"
        }, {
          original_code: {
            "closeTagSpan": "</span>",
            "startTagSpan": "<span>"
          }
        });
        i18n_4 = MSG_EXTERNAL_5960185837188220843$$LIBS_BOOKINGS_SRC_LIB_INVITE_VISITOR_FORM_COMPONENT_TS_4;
      } else {
        i18n_4 = $localize`:␟85d5c3a89bab9a7475a7db095089e161586cb7a1␟5960185837188220843:End Time${"\uFFFD#16\uFFFD"}:START_TAG_SPAN:*${"\uFFFD/#16\uFFFD"}:CLOSE_TAG_SPAN:`;
      }
      let i18n_5;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_495507623260232513$$LIBS_BOOKINGS_SRC_LIB_INVITE_VISITOR_FORM_COMPONENT_TS_5 = goog.getMsg("Reason for visit");
        i18n_5 = MSG_EXTERNAL_495507623260232513$$LIBS_BOOKINGS_SRC_LIB_INVITE_VISITOR_FORM_COMPONENT_TS_5;
      } else {
        i18n_5 = $localize`:␟8aaaa9966e2e05be99e9b239f3b257767366b8bf␟495507623260232513:Reason for visit`;
      }
      let i18n_6;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_4333771954088602266$$LIBS_BOOKINGS_SRC_LIB_INVITE_VISITOR_FORM_COMPONENT_TS_6 = goog.getMsg("Select building");
        i18n_6 = MSG_EXTERNAL_4333771954088602266$$LIBS_BOOKINGS_SRC_LIB_INVITE_VISITOR_FORM_COMPONENT_TS_6;
      } else {
        i18n_6 = $localize`:␟a2a7f73f9ff1df08f9f055ead8f1b25a91c060a3␟4333771954088602266:Select building`;
      }
      let i18n_7;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_5685627853493098762$$LIBS_BOOKINGS_SRC_LIB_INVITE_VISITOR_FORM_COMPONENT_TS_7 = goog.getMsg(" Building{$startTagSpan}*{$closeTagSpan}", {
          "closeTagSpan": "\uFFFD/#3\uFFFD",
          "startTagSpan": "\uFFFD#3\uFFFD"
        }, {
          original_code: {
            "closeTagSpan": "</span>",
            "startTagSpan": "<span>"
          }
        });
        i18n_7 = MSG_EXTERNAL_5685627853493098762$$LIBS_BOOKINGS_SRC_LIB_INVITE_VISITOR_FORM_COMPONENT_TS_7;
      } else {
        i18n_7 = $localize`:␟299cead719c6fe6ad6f5fba06ac22e21f0c4acb2␟5685627853493098762: Building${"\uFFFD#3\uFFFD"}:START_TAG_SPAN:*${"\uFFFD/#3\uFFFD"}:CLOSE_TAG_SPAN:`;
      }
      let i18n_8;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_4464638374806874490$$LIBS_BOOKINGS_SRC_LIB_INVITE_VISITOR_FORM_COMPONENT_TS_8 = goog.getMsg("Visitor Name{$startTagSpan}*{$closeTagSpan}", {
          "closeTagSpan": "\uFFFD/#4\uFFFD",
          "startTagSpan": "\uFFFD#4\uFFFD"
        }, {
          original_code: {
            "closeTagSpan": "</span>",
            "startTagSpan": "<span>"
          }
        });
        i18n_8 = MSG_EXTERNAL_4464638374806874490$$LIBS_BOOKINGS_SRC_LIB_INVITE_VISITOR_FORM_COMPONENT_TS_8;
      } else {
        i18n_8 = $localize`:␟cf671ca02377cd191d8b3c68c7befb5984469f16␟4464638374806874490:Visitor Name${"\uFFFD#4\uFFFD"}:START_TAG_SPAN:*${"\uFFFD/#4\uFFFD"}:CLOSE_TAG_SPAN:`;
      }
      let i18n_9;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_195607823904920605$$LIBS_BOOKINGS_SRC_LIB_INVITE_VISITOR_FORM_COMPONENT_TS_9 = goog.getMsg(" Visitor Email{$startTagSpan}*{$closeTagSpan}", {
          "closeTagSpan": "\uFFFD/#13\uFFFD",
          "startTagSpan": "\uFFFD#13\uFFFD"
        }, {
          original_code: {
            "closeTagSpan": "</span>",
            "startTagSpan": "<span>"
          }
        });
        i18n_9 = MSG_EXTERNAL_195607823904920605$$LIBS_BOOKINGS_SRC_LIB_INVITE_VISITOR_FORM_COMPONENT_TS_9;
      } else {
        i18n_9 = $localize`:␟df470c6a7cce24cc7887968eabb3ee0c1bbd3f7c␟195607823904920605: Visitor Email${"\uFFFD#13\uFFFD"}:START_TAG_SPAN:*${"\uFFFD/#13\uFFFD"}:CLOSE_TAG_SPAN:`;
      }
      let i18n_10;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_5102326149417665173$$LIBS_BOOKINGS_SRC_LIB_INVITE_VISITOR_FORM_COMPONENT_TS_10 = goog.getMsg(" A valid email is required ");
        i18n_10 = MSG_EXTERNAL_5102326149417665173$$LIBS_BOOKINGS_SRC_LIB_INVITE_VISITOR_FORM_COMPONENT_TS_10;
      } else {
        i18n_10 = $localize`:␟d025fcfed88fe09dce74563ddafbfefb47111f11␟5102326149417665173: A valid email is required `;
      }
      let i18n_11;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_1826215573205981970$$LIBS_BOOKINGS_SRC_LIB_INVITE_VISITOR_FORM_COMPONENT_TS_11 = goog.getMsg("Company");
        i18n_11 = MSG_EXTERNAL_1826215573205981970$$LIBS_BOOKINGS_SRC_LIB_INVITE_VISITOR_FORM_COMPONENT_TS_11;
      } else {
        i18n_11 = $localize`:␟6ef0619a37140118b9e640c6cc36ee4e9fb4372a␟1826215573205981970:Company`;
      }
      let i18n_12;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_2924076986947727128$$LIBS_BOOKINGS_SRC_LIB_INVITE_VISITOR_FORM_COMPONENT_TS_12 = goog.getMsg(" Visitor invite sent to {$startTagNgContainer} {$interpolation} {$closeTagNgContainer}{$startTagNgContainer_1} {$interpolation_1} visitor{$interpolation_2} {$closeTagNgContainer}", {
          "closeTagNgContainer": "[\uFFFD/#1:1\uFFFD\uFFFD/*4:1\uFFFD|\uFFFD/#1:2\uFFFD\uFFFD/*5:2\uFFFD]",
          "interpolation": "\uFFFD0:1\uFFFD",
          "interpolation_1": "\uFFFD0:2\uFFFD",
          "interpolation_2": "\uFFFD1:2\uFFFD",
          "startTagNgContainer": "\uFFFD*4:1\uFFFD\uFFFD#1:1\uFFFD",
          "startTagNgContainer_1": "\uFFFD*5:2\uFFFD\uFFFD#1:2\uFFFD"
        }, {
          original_code: {
            "closeTagNgContainer": "</ng-container>",
            "interpolation": "{{\n                                last_success?.asset_name ||\n                                    last_success?.asset_id\n                            }}",
            "interpolation_1": "{{ last_count }}",
            "interpolation_2": "{{\n                                last_count == 1 ? '' : 's'\n                            }}",
            "startTagNgContainer": "<ng-container *ngIf=\"!multiple\">",
            "startTagNgContainer_1": "<ng-container *ngIf=\"multiple\">"
          }
        });
        i18n_12 = MSG_EXTERNAL_2924076986947727128$$LIBS_BOOKINGS_SRC_LIB_INVITE_VISITOR_FORM_COMPONENT_TS_12;
      } else {
        i18n_12 = $localize`:␟3813db8d52465bf6153aa3eab78e731607297455␟2924076986947727128: Visitor invite sent to ${"\uFFFD*4:1\uFFFD\uFFFD#1:1\uFFFD"}:START_TAG_NG_CONTAINER: ${"\uFFFD0:1\uFFFD"}:INTERPOLATION: ${"[\uFFFD/#1:1\uFFFD\uFFFD/*4:1\uFFFD|\uFFFD/#1:2\uFFFD\uFFFD/*5:2\uFFFD]"}:CLOSE_TAG_NG_CONTAINER:${"\uFFFD*5:2\uFFFD\uFFFD#1:2\uFFFD"}:START_TAG_NG_CONTAINER_1: ${"\uFFFD0:2\uFFFD"}:INTERPOLATION_1: visitor${"\uFFFD1:2\uFFFD"}:INTERPOLATION_2: ${"[\uFFFD/#1:1\uFFFD\uFFFD/*4:1\uFFFD|\uFFFD/#1:2\uFFFD\uFFFD/*5:2\uFFFD]"}:CLOSE_TAG_NG_CONTAINER:`;
      }
      i18n_12 = _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵi18nPostprocess"](i18n_12);
      let i18n_13;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_941544886358218249$$LIBS_BOOKINGS_SRC_LIB_INVITE_VISITOR_FORM_COMPONENT_TS_13 = goog.getMsg(" Invite has been sent to {$startItalicText}{$startTagNgContainer} {$interpolation} {$closeTagNgContainer}{$startTagNgContainer_1} {$interpolation_1} visitor{$interpolation_2} {$closeTagNgContainer}{$closeItalicText} to attend {$interpolation_3} from {$interpolation_4} at {$interpolation_5} ", {
          "closeItalicText": "\uFFFD/#9\uFFFD",
          "closeTagNgContainer": "[\uFFFD/#1:1\uFFFD\uFFFD/*10:1\uFFFD|\uFFFD/#1:2\uFFFD\uFFFD/*11:2\uFFFD]",
          "interpolation": "\uFFFD0:1\uFFFD",
          "interpolation_1": "\uFFFD0:2\uFFFD",
          "interpolation_2": "\uFFFD1:2\uFFFD",
          "interpolation_3": "\uFFFD0\uFFFD",
          "interpolation_4": "\uFFFD1\uFFFD",
          "interpolation_5": "\uFFFD2\uFFFD",
          "startItalicText": "\uFFFD#9\uFFFD",
          "startTagNgContainer": "\uFFFD*10:1\uFFFD\uFFFD#1:1\uFFFD",
          "startTagNgContainer_1": "\uFFFD*11:2\uFFFD\uFFFD#1:2\uFFFD"
        }, {
          original_code: {
            "closeItalicText": "</i>",
            "closeTagNgContainer": "</ng-container>",
            "interpolation": "{{\n                                    last_success?.asset_name ||\n                                        last_success?.asset_id\n                                }}",
            "interpolation_1": "{{ last_count }}",
            "interpolation_2": "{{\n                                    last_count == 1 ? '' : 's'\n                                }}",
            "interpolation_3": "{{ building?.display_name || building?.name }}",
            "interpolation_4": "{{ last_success?.date | date: 'mediumDate' }}",
            "interpolation_5": "{{ last_success?.date | date: time_format }}",
            "startItalicText": "<i>",
            "startTagNgContainer": "<ng-container *ngIf=\"!multiple\">",
            "startTagNgContainer_1": "<ng-container *ngIf=\"multiple\">"
          }
        });
        i18n_13 = MSG_EXTERNAL_941544886358218249$$LIBS_BOOKINGS_SRC_LIB_INVITE_VISITOR_FORM_COMPONENT_TS_13;
      } else {
        i18n_13 = $localize`:␟797ad60704f8979ef5951430ea9947b27782284b␟941544886358218249: Invite has been sent to ${"\uFFFD#9\uFFFD"}:START_ITALIC_TEXT:${"\uFFFD*10:1\uFFFD\uFFFD#1:1\uFFFD"}:START_TAG_NG_CONTAINER: ${"\uFFFD0:1\uFFFD"}:INTERPOLATION: ${"[\uFFFD/#1:1\uFFFD\uFFFD/*10:1\uFFFD|\uFFFD/#1:2\uFFFD\uFFFD/*11:2\uFFFD]"}:CLOSE_TAG_NG_CONTAINER:${"\uFFFD*11:2\uFFFD\uFFFD#1:2\uFFFD"}:START_TAG_NG_CONTAINER_1: ${"\uFFFD0:2\uFFFD"}:INTERPOLATION_1: visitor${"\uFFFD1:2\uFFFD"}:INTERPOLATION_2: ${"[\uFFFD/#1:1\uFFFD\uFFFD/*10:1\uFFFD|\uFFFD/#1:2\uFFFD\uFFFD/*11:2\uFFFD]"}:CLOSE_TAG_NG_CONTAINER:${"\uFFFD/#9\uFFFD"}:CLOSE_ITALIC_TEXT: to attend ${"\uFFFD0\uFFFD"}:INTERPOLATION_3: from ${"\uFFFD1\uFFFD"}:INTERPOLATION_4: at ${"\uFFFD2\uFFFD"}:INTERPOLATION_5: `;
      }
      i18n_13 = _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵi18nPostprocess"](i18n_13);
      let i18n_14;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_7858372686370953213$$LIBS_BOOKINGS_SRC_LIB_INVITE_VISITOR_FORM_COMPONENT_TS_14 = goog.getMsg(" Great, thanks ");
        i18n_14 = MSG_EXTERNAL_7858372686370953213$$LIBS_BOOKINGS_SRC_LIB_INVITE_VISITOR_FORM_COMPONENT_TS_14;
      } else {
        i18n_14 = $localize`:␟af6a082ad33b2635f588016703e454c8fb7f7e0f␟7858372686370953213: Great, thanks `;
      }
      let i18n_15;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_3676425961094889121$$LIBS_BOOKINGS_SRC_LIB_INVITE_VISITOR_FORM_COMPONENT_TS_15 = goog.getMsg(" Book Another Visitor ");
        i18n_15 = MSG_EXTERNAL_3676425961094889121$$LIBS_BOOKINGS_SRC_LIB_INVITE_VISITOR_FORM_COMPONENT_TS_15;
      } else {
        i18n_15 = $localize`:␟63356c3f7d6177e1e29a68e272010f75eacb3c97␟3676425961094889121: Book Another Visitor `;
      }
      let i18n_16;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_6183159301460846057$$LIBS_BOOKINGS_SRC_LIB_INVITE_VISITOR_FORM_COMPONENT_TS_16 = goog.getMsg("Sending invitation...");
        i18n_16 = MSG_EXTERNAL_6183159301460846057$$LIBS_BOOKINGS_SRC_LIB_INVITE_VISITOR_FORM_COMPONENT_TS_16;
      } else {
        i18n_16 = $localize`:␟59c7bf21621b0422b39735ebc6af2ccb26d894e3␟6183159301460846057:Sending invitation...`;
      }
      let i18n_17;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_5958588135415093025$$LIBS_BOOKINGS_SRC_LIB_INVITE_VISITOR_FORM_COMPONENT_TS_17 = goog.getMsg("Visitors{$startTagSpan}*{$closeTagSpan}", {
          "closeTagSpan": "\uFFFD/#3\uFFFD",
          "startTagSpan": "\uFFFD#3\uFFFD"
        }, {
          original_code: {
            "closeTagSpan": "</span>",
            "startTagSpan": "<span>"
          }
        });
        i18n_17 = MSG_EXTERNAL_5958588135415093025$$LIBS_BOOKINGS_SRC_LIB_INVITE_VISITOR_FORM_COMPONENT_TS_17;
      } else {
        i18n_17 = $localize`:␟6e457c162b83dc787ae4a7a9bda0ca1f3b021b6c␟5958588135415093025:Visitors${"\uFFFD#3\uFFFD"}:START_TAG_SPAN:*${"\uFFFD/#3\uFFFD"}:CLOSE_TAG_SPAN:`;
      }
      return [["send_state", ""], ["load_state", ""], ["multi_state", ""], ["name_auto", "matAutocomplete"], ["email_auto", "matAutocomplete"], i18n_0, i18n_1, i18n_2, i18n_3, i18n_4, i18n_5, i18n_7, i18n_8, i18n_9, i18n_10, i18n_11, i18n_12, i18n_13, i18n_14, i18n_15, i18n_16, i18n_17, [4, "ngIf", "ngIfElse"], ["class", "relative flex flex-col bg-base-100 overflow-auto max-h-full", 4, "ngIf", "ngIfElse"], [1, "relative", "flex", "flex-col", "bg-base-100", "overflow-auto", "max-h-full"], [1, "w-full", "border-b", "border-base-200", "sm:px-16", "px-4", "py-4"], [1, "text-2xl", "font-medium"], ["class", "sm:px-16 px-4 py-4", 3, "formGroup", 4, "ngIf"], [1, "sticky", "sm:px-16", "px-4", "py-4", "border-t", "bg-base-100", "border-base-200", "bottom-0"], ["btn", "", "matRipple", "", "send", "", 1, "w-full", "sm:w-auto", 3, "click"], [1, "sm:px-16", "px-4", "py-4", 3, "formGroup"], ["class", "flex flex-col", 4, "ngIf"], [1, "flex", "flex-col"], ["for", "date"], ["name", "date", "formControlName", "date"], [1, "flex", "items-center", "space-x-2"], [1, "flex-1", "flex", "flex-col", "w-1/3"], ["for", "start-time"], ["name", "start-time", 3, "ngModelChange", "ngModel", "ngModelOptions", "disabled", "use_24hr"], ["for", "end-time"], ["name", "end-time", "formControlName", "duration", 3, "time", "use_24hr"], ["class", "w-full flex flex-col", 4, "ngIf"], ["for", "reason"], ["appearance", "outline"], ["name", "reason", "matInput", "", "formControlName", "description", "placeholder", "e.g. Meeting Catchup"], ["for", "building"], ["name", "building", "placeholder", i18n_6, 3, "ngModelChange", "ngModel", "ngModelOptions"], [3, "value", 4, "ngFor", "ngForOf"], [3, "value"], [1, "w-full", "flex", "flex-col"], ["for", "host"], ["name", "host", "formControlName", "user", 1, "mb-4"], ["for", "visitor-name"], ["matInput", "", "name", "visitor-name", "formControlName", "asset_name", "placeholder", "Name of the visitor", 3, "focus", "matAutocomplete"], [3, "value", "click", 4, "ngFor", "ngForOf"], ["for", "visitor-email"], ["matInput", "", "name", "visitor-email", "type", "email", "formControlName", "asset_id", "placeholder", "Email of the visitor", 3, "focus", "matAutocomplete"], ["matInput", "", "name", "company", "formControlName", "company", "placeholder", "Company of the visitor"], [3, "click", "value"], [1, "flex", "flex-col", "leading-tight"], [1, "text-xs", "opacity-60"], ["sent", "", 1, "absolute", "inset-0", "bg-base-100", "flex", "flex-col", "items-center", "justify-center", "text-center"], [1, "w-full", "max-w-[32rem]", "flex-1", "h-1/2", "space-y-2", "m-8"], [1, "text-3xl"], [4, "ngIf"], ["src", "assets/icons/sent.svg", 1, "mx-auto"], [1, "w-full", "p-2", "border-t", "border-base-200"], [1, "mx-auto", "flex", "items-center", "space-x-2", "w-full", "max-w-[32rem]"], ["btn", "", "matRipple", "", 1, "flex-1", 3, "click"], ["loading", "", 1, "relative", "flex", "flex-col", "items-center", "justify-center", "rounded", "overflow-hidden", "w-full", "h-full", "min-h-[18rem]"], [3, "diameter"], [1, "flex", "flex-col", 3, "formGroup"], ["formControlName", "assets", 3, "guests_only"]];
    },
    template: function InviteVisitorFormComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtemplate"](0, InviteVisitorFormComponent_ng_container_0_Template, 3, 4, "ng-container", 22)(1, InviteVisitorFormComponent_ng_template_1_Template, 20, 13, "ng-template", null, 0, _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtemplateRefExtractor"])(3, InviteVisitorFormComponent_ng_template_3_Template, 4, 1, "ng-template", null, 1, _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtemplateRefExtractor"])(5, InviteVisitorFormComponent_ng_template_5_Template, 5, 2, "ng-template", null, 2, _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtemplateRefExtractor"]);
      }
      if (rf & 2) {
        const send_state_r16 = _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵreference"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵproperty"]("ngIf", !ctx.sent)("ngIfElse", send_state_r16);
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_15__.NgForOf, _angular_common__WEBPACK_IMPORTED_MODULE_15__.NgIf, _angular_forms__WEBPACK_IMPORTED_MODULE_13__["ɵNgNoValidate"], _angular_forms__WEBPACK_IMPORTED_MODULE_13__.DefaultValueAccessor, _angular_forms__WEBPACK_IMPORTED_MODULE_13__.NgControlStatus, _angular_forms__WEBPACK_IMPORTED_MODULE_13__.NgControlStatusGroup, _angular_forms__WEBPACK_IMPORTED_MODULE_13__.NgModel, _angular_forms__WEBPACK_IMPORTED_MODULE_13__.FormGroupDirective, _angular_forms__WEBPACK_IMPORTED_MODULE_13__.FormControlName, _angular_material_input__WEBPACK_IMPORTED_MODULE_16__.MatInput, _angular_material_form_field__WEBPACK_IMPORTED_MODULE_17__.MatFormField, _angular_material_form_field__WEBPACK_IMPORTED_MODULE_17__.MatError, _angular_material_progress_spinner__WEBPACK_IMPORTED_MODULE_18__.MatProgressSpinner, _angular_material_autocomplete__WEBPACK_IMPORTED_MODULE_19__.MatAutocomplete, _angular_material_core__WEBPACK_IMPORTED_MODULE_20__.MatOption, _angular_material_autocomplete__WEBPACK_IMPORTED_MODULE_19__.MatAutocompleteTrigger, _form_fields_src_lib_date_field_component__WEBPACK_IMPORTED_MODULE_7__.DateFieldComponent, _form_fields_src_lib_duration_field_component__WEBPACK_IMPORTED_MODULE_8__.DurationFieldComponent, _form_fields_src_lib_time_field_component__WEBPACK_IMPORTED_MODULE_9__.TimeFieldComponent, _form_fields_src_lib_user_list_field_component__WEBPACK_IMPORTED_MODULE_10__.UserListFieldComponent, _form_fields_src_lib_user_search_field_component__WEBPACK_IMPORTED_MODULE_11__.UserSearchFieldComponent, _angular_material_select__WEBPACK_IMPORTED_MODULE_21__.MatSelect, _angular_material_core__WEBPACK_IMPORTED_MODULE_20__.MatRipple, _angular_common__WEBPACK_IMPORTED_MODULE_15__.AsyncPipe, _angular_common__WEBPACK_IMPORTED_MODULE_15__.DatePipe, _ngx_translate_core__WEBPACK_IMPORTED_MODULE_22__.TranslatePipe]
  });
}

/***/ }),

/***/ 84854:
/*!********************************************************!*\
  !*** ./libs/bookings/src/lib/locker-grid.component.ts ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   LockerGridComponent: () => (/* binding */ LockerGridComponent)
/* harmony export */ });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var libs_explore_src_lib_explore_spaces_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! libs/explore/src/lib/explore-spaces.service */ 65897);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _angular_material_core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/material/core */ 74646);
/* harmony import */ var _angular_material_tooltip__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/material/tooltip */ 80640);








const _c0 = () => [];
function LockerGridComponent_button_3_Template(rf, ctx) {
  if (rf & 1) {
    const _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](0, "button", 3);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵlistener"]("click", function LockerGridComponent_button_3_Template_button_click_0_listener() {
      const locker_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵrestoreView"](_r1).$implicit;
      const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵresetView"](ctx_r2.clicked.emit(locker_r2));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelement"](1, "div", 4)(2, "div", 5)(3, "div", 6)(4, "div", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](5, "div", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](6);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelement"](7, "div", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const locker_r2 = ctx.$implicit;
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵstyleProp"]("grid-column-start", locker_r2.position[0] + 1)("grid-row-start", locker_r2.position[1] + 1)("grid-column-end", locker_r2.position[0] + (locker_r2.size[0] + 1))("background-color", ctx_r2.status(locker_r2))("grid-row-end", locker_r2.position[1] + (locker_r2.size[1] + 1));
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵclassProp"]("opacity-60", ctx_r2.selected && ctx_r2.selected !== locker_r2.id);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("matTooltip", locker_r2.name)("disabled", locker_r2.bookable === false);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](6);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtextInterpolate1"](" ", locker_r2.name, " ");
  }
}
class LockerGridComponent {
  get columns() {
    let columns = 1;
    for (const locker of this.bank?.lockers || []) {
      const x = locker.position[0] + locker.size[0];
      if (x > columns) columns = x;
    }
    return columns;
  }
  constructor(_settings) {
    this._settings = _settings;
    this.bank_status = {
      '10': 'busy',
      '7': 'pending'
    };
    this.selected = '';
    this.clicked = new _angular_core__WEBPACK_IMPORTED_MODULE_2__.EventEmitter();
  }
  status(locker) {
    const colours = this._settings.get('app.explore.colors') || {};
    const value = this.bank_status[locker.id] || 'free';
    return colours[`lockers-${value}`] || colours[`${value}`] || libs_explore_src_lib_explore_spaces_service__WEBPACK_IMPORTED_MODULE_1__.DEFAULT_COLOURS[`${value}`];
  }
  static #_ = this.ɵfac = function LockerGridComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || LockerGridComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdirectiveInject"](_placeos_common__WEBPACK_IMPORTED_MODULE_0__.SettingsService));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdefineComponent"]({
    type: LockerGridComponent,
    selectors: [["locker-grid"]],
    inputs: {
      bank: "bank",
      bank_status: "bank_status",
      selected: "selected"
    },
    outputs: {
      clicked: "clicked"
    },
    decls: 4,
    vars: 9,
    consts: [[1, "p-4", "text-xl", "font-medium"], [1, "flex-1", "grid", "gap-2", "overflow-hidden", "max-h-full", "h-[75vh]", "min-w-[60vw]", "p-2"], ["matRipple", "", "class", "relative border border-base-200 rounded bg-teal-300 overflow-hidden", 3, "opacity-60", "grid-column-start", "grid-row-start", "grid-column-end", "background-color", "grid-row-end", "matTooltip", "disabled", "click", 4, "ngFor", "ngForOf"], ["matRipple", "", 1, "relative", "border", "border-base-200", "rounded", "bg-teal-300", "overflow-hidden", 3, "click", "matTooltip", "disabled"], ["handle", "", 1, "absolute", "top-1/2", "-translate-y-1/2", "left-2", "w-1", "h-6", "bg-neutral", "rounded"], ["vent", "", 1, "absolute", "left-1/2", "-translate-x-1/2", "top-2", "w-3/5", "h-1", "bg-neutral", "rounded-t"], ["vent", "", 1, "absolute", "left-1/2", "-translate-x-1/2", "top-4", "w-3/5", "h-1", "bg-neutral", "rounded-t"], ["vent", "", 1, "absolute", "left-1/2", "-translate-x-1/2", "top-6", "w-3/5", "h-1", "bg-neutral", "rounded-t"], [1, "absolute", "left-1/2", "-translate-x-1/2", "top-8", "text-[0.6rem]", "font-medium", "text-black/60"], [1, "absolute", "inset-0", "hover:bg-neutral"]],
    template: function LockerGridComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](0, "div", 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](1);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](2, "div", 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](3, LockerGridComponent_button_3_Template, 8, 15, "button", 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
      }
      if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtextInterpolate1"](" ", ctx.bank == null ? null : ctx.bank.name, " ");
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵstyleProp"]("width", ctx.columns * 2.5 + "rem")("grid-template-columns", "repeat(" + ctx.columns + ", 1fr)")("grid-template-rows", "repeat(" + (ctx.bank == null ? null : ctx.bank.height) + ", 1fr)");
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngForOf", (ctx.bank == null ? null : ctx.bank.lockers) || _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpureFunction0"](8, _c0));
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_3__.NgForOf, _angular_material_core__WEBPACK_IMPORTED_MODULE_4__.MatRipple, _angular_material_tooltip__WEBPACK_IMPORTED_MODULE_5__.MatTooltip],
    styles: ["[_nghost-%COMP%] {\n                display: flex;\n                flex-direction: column;\n                height: 100%;\n            }\n            button[disabled][_ngcontent-%COMP%] {\n                pointer-events: none;\n                opacity: 0.75;\n                background-color: #ccc !important;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxvY2tlci1ncmlkLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1lBQ1k7Z0JBQ0ksYUFBYTtnQkFDYixzQkFBc0I7Z0JBQ3RCLFlBQVk7WUFDaEI7WUFDQTtnQkFDSSxvQkFBb0I7Z0JBQ3BCLGFBQWE7Z0JBQ2IsaUNBQWlDO1lBQ3JDIiwiZmlsZSI6ImxvY2tlci1ncmlkLmNvbXBvbmVudC50cyIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgOmhvc3Qge1xuICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBidXR0b25bZGlzYWJsZWRdIHtcbiAgICAgICAgICAgICAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLjc1O1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNjY2MgIWltcG9ydGFudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl19 */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvYm9va2luZ3Mvc3JjL2xpYi9sb2NrZXItZ3JpZC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLGFBQWE7Z0JBQ2Isc0JBQXNCO2dCQUN0QixZQUFZO1lBQ2hCO1lBQ0E7Z0JBQ0ksb0JBQW9CO2dCQUNwQixhQUFhO2dCQUNiLGlDQUFpQztZQUNyQzs7QUFFWixneEJBQWd4QiIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgOmhvc3Qge1xuICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBidXR0b25bZGlzYWJsZWRdIHtcbiAgICAgICAgICAgICAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLjc1O1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNjY2MgIWltcG9ydGFudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl0sInNvdXJjZVJvb3QiOiIifQ== */"]
  });
}

/***/ }),

/***/ 71511:
/*!**************************************************************!*\
  !*** ./libs/bookings/src/lib/locker-list-field.component.ts ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   LockerListFieldComponent: () => (/* binding */ LockerListFieldComponent)
/* harmony export */ });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @angular/forms */ 34456);
/* harmony import */ var libs_common_src_lib_settings_service__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! libs/common/src/lib/settings.service */ 14233);
/* harmony import */ var _locker_select_modal_locker_select_modal_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./locker-select-modal/locker-select-modal.component */ 90482);
/* harmony import */ var _angular_material_dialog__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/material/dialog */ 12587);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _angular_material_checkbox__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @angular/material/checkbox */ 97024);
/* harmony import */ var _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../components/src/lib/icon.component */ 69434);
/* harmony import */ var _components_src_lib_authenticated_image_directive__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../components/src/lib/authenticated-image.directive */ 93208);
/* harmony import */ var _angular_material_core__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @angular/material/core */ 74646);














const _c0 = () => [];
const _c1 = () => ({
  standalone: true
});
function LockerListFieldComponent_div_1_div_1_mat_checkbox_4_Template(rf, ctx) {
  if (rf & 1) {
    const _r2 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](0, "mat-checkbox", 28);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵlistener"]("ngModelChange", function LockerListFieldComponent_div_1_div_1_mat_checkbox_4_Template_mat_checkbox_ngModelChange_0_listener($event) {
      const opt_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵrestoreView"](_r2).$implicit;
      const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"](3);
      return _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵresetView"](ctx_r3.setFeature(opt_r3, $event));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const opt_r3 = ctx.$implicit;
    const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngModel", (ctx_r3.selected_features || _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpureFunction0"](3, _c0)).includes(opt_r3))("ngModelOptions", _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpureFunction0"](4, _c1));
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtextInterpolate1"](" ", opt_r3, " ");
  }
}
function LockerListFieldComponent_div_1_div_1_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](0, "div", 24)(1, "label", 25);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](2, "Type");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](3, "div", 26);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](4, LockerListFieldComponent_div_1_div_1_mat_checkbox_4_Template, 2, 5, "mat-checkbox", 27);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngForOf", ctx_r3.features);
  }
}
function LockerListFieldComponent_div_1_img_3_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelement"](0, "img", 29);
  }
  if (rf & 2) {
    const item_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"]().$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("source", item_r5.images[0]);
  }
}
function LockerListFieldComponent_div_1_ng_template_4_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelement"](0, "img", 30);
  }
}
function LockerListFieldComponent_div_1_div_14_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](0, "div", 16)(1, "app-icon", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](2, "accessible");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](3, "p");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](4, "Disability Accessible");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]()();
  }
}
function LockerListFieldComponent_div_1_Template(rf, ctx) {
  if (rf & 1) {
    const _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](0, "div", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](1, LockerListFieldComponent_div_1_div_1_Template, 5, 1, "div", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](2, "div", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](3, LockerListFieldComponent_div_1_img_3_Template, 1, 1, "img", 13)(4, LockerListFieldComponent_div_1_ng_template_4_Template, 1, 0, "ng-template", null, 0, _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplateRefExtractor"]);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](6, "div", 14)(7, "div", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](8);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](9, "div", 16)(10, "app-icon", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](11, "place");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](12, "p");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](13);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](14, LockerListFieldComponent_div_1_div_14_Template, 5, 0, "div", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](15, "div", 19)(16, "button", 20);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵlistener"]("click", function LockerListFieldComponent_div_1_Template_button_click_16_listener() {
      const item_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵrestoreView"](_r1).$implicit;
      const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵresetView"](ctx_r3.changeResources(item_r5));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](17, "div", 21);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵi18nStart"](18, 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelement"](19, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵi18nEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](20, "button", 22);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵlistener"]("click", function LockerListFieldComponent_div_1_Template_button_click_20_listener() {
      const item_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵrestoreView"](_r1).$implicit;
      const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵresetView"](ctx_r3.removeResource(item_r5));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](21, "div", 21);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵi18nStart"](22, 3);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelement"](23, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵi18nEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]()()()();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](24, "button", 23);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵlistener"]("click", function LockerListFieldComponent_div_1_Template_button_click_24_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵrestoreView"](_r1);
      const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵresetView"](ctx_r3.toggleFavourite(ctx_r3.asset));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](25, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](26);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]()()();
  }
  if (rf & 2) {
    const item_r5 = ctx.$implicit;
    const placeholder_r6 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵreference"](5);
    const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngIf", ctx_r3.features == null ? null : ctx_r3.features.length);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngIf", item_r5.images == null ? null : item_r5.images.length)("ngIfElse", placeholder_r6);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtextInterpolate1"](" ", item_r5.name || "Locker", " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtextInterpolate"]((item_r5.zone == null ? null : item_r5.zone.display_name) || (item_r5.zone == null ? null : item_r5.zone.name));
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngIf", item_r5.accessible);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](10);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵclassProp"]("text-blue-400", ctx_r3.favorites.includes(ctx_r3.asset == null ? null : ctx_r3.asset.id));
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtextInterpolate"](ctx_r3.favorites.includes(ctx_r3.asset == null ? null : ctx_r3.asset.id) ? "favorite" : "favorite_border");
  }
}
const EMPTY_FAVS = [];
class LockerListFieldComponent {
  get favorites() {
    return this._settings.get(_locker_select_modal_locker_select_modal_component__WEBPACK_IMPORTED_MODULE_1__.FAV_LOCKER_KEY) || EMPTY_FAVS;
  }
  constructor(_settings, _dialog) {
    this._settings = _settings;
    this._dialog = _dialog;
    this.features = [];
    this.room_size = 3;
    this.items = [];
    this.disabled = false;
    this.selected_features = [];
    /* istanbul ignore next */
    this.registerOnChange = fn => this._onChange = fn;
    /* istanbul ignore next */
    this.registerOnTouched = fn => this._onTouch = fn;
    this.setDisabledState = s => this.disabled = s;
  }
  /** Add or edit selected items */
  changeResources() {
    const ref = this._dialog.open(_locker_select_modal_locker_select_modal_component__WEBPACK_IMPORTED_MODULE_1__.LockerSelectModalComponent, {
      data: {
        items: this.items,
        options: {
          capacity: this.room_size
        }
      }
    });
    ref.afterClosed().subscribe(items => {
      if (!items) items = ref.componentInstance.selected;
      this.setValue(items);
    });
  }
  /** Remove the selected space from the list */
  removeResource(space) {
    this.setValue(this.items.filter(_ => _.id !== space.id));
  }
  /**
   * Update the form field value
   * @param new_value New value to set on the form field
   */
  setValue(new_value) {
    this.items = new_value;
    if (this._onChange) this._onChange(this.items);
  }
  /* istanbul ignore next */
  /**
   * Update local value when form control value is changed
   * @param value The new value for the component
   */
  writeValue(value) {
    this.items = value || [];
  }
  toggleFavourite(space) {
    const fav_list = this.favorites;
    const new_state = !fav_list.includes(space.id);
    if (new_state) {
      this._settings.saveUserSetting(_locker_select_modal_locker_select_modal_component__WEBPACK_IMPORTED_MODULE_1__.FAV_LOCKER_KEY, [...fav_list, space.id]);
    } else {
      this._settings.saveUserSetting(_locker_select_modal_locker_select_modal_component__WEBPACK_IMPORTED_MODULE_1__.FAV_LOCKER_KEY, fav_list.filter(_ => _ !== space.id));
    }
  }
  static #_ = this.ɵfac = function LockerListFieldComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || LockerListFieldComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵdirectiveInject"](libs_common_src_lib_settings_service__WEBPACK_IMPORTED_MODULE_0__.SettingsService), _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵdirectiveInject"](_angular_material_dialog__WEBPACK_IMPORTED_MODULE_5__.MatDialog));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵdefineComponent"]({
    type: LockerListFieldComponent,
    selectors: [["locker-list-field"]],
    inputs: {
      features: "features"
    },
    features: [_angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵProvidersFeature"]([{
      provide: _angular_forms__WEBPACK_IMPORTED_MODULE_6__.NG_VALUE_ACCESSOR,
      useExisting: (0,_angular_core__WEBPACK_IMPORTED_MODULE_4__.forwardRef)(() => LockerListFieldComponent),
      multi: true
    }])],
    decls: 10,
    vars: 1,
    consts: () => {
      let i18n_0;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_6395293173369343552$$LIBS_BOOKINGS_SRC_LIB_LOCKER_LIST_FIELD_COMPONENT_TS_0 = goog.getMsg("Add Locker");
        i18n_0 = MSG_EXTERNAL_6395293173369343552$$LIBS_BOOKINGS_SRC_LIB_LOCKER_LIST_FIELD_COMPONENT_TS_0;
      } else {
        i18n_0 = $localize`:␟8b5f83031c9399ae009db8ff4c788e3f8ce20062␟6395293173369343552:Add Locker`;
      }
      let i18n_1;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_559636443235347532$$LIBS_BOOKINGS_SRC_LIB_LOCKER_LIST_FIELD_COMPONENT_TS_1 = goog.getMsg("{$startTagAppIcon}edit{$closeTagAppIcon} Change ", {
          "closeTagAppIcon": "\uFFFD/#19\uFFFD",
          "startTagAppIcon": "\uFFFD#19\uFFFD"
        }, {
          original_code: {
            "closeTagAppIcon": "</app-icon>",
            "startTagAppIcon": "<app-icon>"
          }
        });
        i18n_1 = MSG_EXTERNAL_559636443235347532$$LIBS_BOOKINGS_SRC_LIB_LOCKER_LIST_FIELD_COMPONENT_TS_1;
      } else {
        i18n_1 = $localize`:␟ca9092fdbbb85e5828de77fdf85c49b918cec128␟559636443235347532:${"\uFFFD#19\uFFFD"}:START_TAG_APP_ICON:edit${"\uFFFD/#19\uFFFD"}:CLOSE_TAG_APP_ICON: Change `;
      }
      let i18n_2;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_2582674642057285571$$LIBS_BOOKINGS_SRC_LIB_LOCKER_LIST_FIELD_COMPONENT_TS_2 = goog.getMsg("{$startTagAppIcon}close{$closeTagAppIcon} Remove ", {
          "closeTagAppIcon": "\uFFFD/#23\uFFFD",
          "startTagAppIcon": "\uFFFD#23\uFFFD"
        }, {
          original_code: {
            "closeTagAppIcon": "</app-icon>",
            "startTagAppIcon": "<app-icon>"
          }
        });
        i18n_2 = MSG_EXTERNAL_2582674642057285571$$LIBS_BOOKINGS_SRC_LIB_LOCKER_LIST_FIELD_COMPONENT_TS_2;
      } else {
        i18n_2 = $localize`:␟a386ba350cdee69beeb12a908d96f0724ddc2054␟2582674642057285571:${"\uFFFD#23\uFFFD"}:START_TAG_APP_ICON:close${"\uFFFD/#23\uFFFD"}:CLOSE_TAG_APP_ICON: Remove `;
      }
      return [["placeholder", ""], i18n_0, i18n_1, i18n_2, ["list", "", 1, "space-y-2"], ["locker", "", "class", "relative p-2 rounded-lg w-full flex items-center shadow border border-base-200", 4, "ngFor", "ngForOf"], ["btn", "", "matRipple", "", "name", "add-locker", 1, "w-full", "inverse", "mt-2", 3, "click"], [1, "flex", "items-center", "justify-center", "space-x-2"], [1, "flex", "items-center", "flex-wrap", "sm:space-x-2", "mb-2"], [1, "flex-1", "min-w-[256px]", "space-y-2"], ["locker", "", 1, "relative", "p-2", "rounded-lg", "w-full", "flex", "items-center", "shadow", "border", "border-base-200"], ["class", "flex flex-col", 4, "ngIf"], [1, "w-20", "h-20", "rounded-xl", "bg-base-200", "mr-4", "overflow-hidden", "flex", "items-center", "justify-center"], ["auth", "", "class", "min-h-full object-cover", 3, "source", 4, "ngIf", "ngIfElse"], [1, "space-y-2", "pb-4"], [1, "font-medium"], [1, "flex", "items-center", "text-sm", "space-x-2"], [1, "text-blue-500", "text-base"], ["class", "flex items-center text-sm space-x-2", 4, "ngIf"], [1, "absolute", "bottom-0", "right-0", "flex", "items-center", "justify-end", "text-xs"], ["btn", "", "matRipple", "", "name", "edit-locker", 1, "clear", 3, "click"], [1, "flex", "items-center", "space-x-2"], ["btn", "", "matRipple", "", "name", "remove-locker", 1, "clear", 3, "click"], ["icon", "", "matRipple", "", "name", "toggle-locker-favourite", 1, "absolute", "top-1", "right-1", 3, "click"], [1, "flex", "flex-col"], ["for", "title"], ["features", "", 1, "flex", "items-center", "flex-wrap", "space-x-2"], [3, "ngModel", "ngModelOptions", "ngModelChange", 4, "ngFor", "ngForOf"], [3, "ngModelChange", "ngModel", "ngModelOptions"], ["auth", "", 1, "min-h-full", "object-cover", 3, "source"], ["src", "assets/icons/locker-placeholder.svg", 1, "m-auto"]];
    },
    template: function LockerListFieldComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](0, "div", 4);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](1, LockerListFieldComponent_div_1_Template, 27, 9, "div", 5);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](2, "button", 6);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵlistener"]("click", function LockerListFieldComponent_Template_button_click_2_listener() {
          return ctx.changeResources();
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](3, "div", 7)(4, "app-icon");
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](5, "search");
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](6, "span");
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵi18n"](7, 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]()()();
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](8, "div", 8);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelement"](9, "div", 9);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
      }
      if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngForOf", ctx.items);
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_7__.NgForOf, _angular_common__WEBPACK_IMPORTED_MODULE_7__.NgIf, _angular_forms__WEBPACK_IMPORTED_MODULE_6__.NgControlStatus, _angular_forms__WEBPACK_IMPORTED_MODULE_6__.NgModel, _angular_material_checkbox__WEBPACK_IMPORTED_MODULE_8__.MatCheckbox, _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_2__.IconComponent, _components_src_lib_authenticated_image_directive__WEBPACK_IMPORTED_MODULE_3__.AuthenticatedImageDirective, _angular_material_core__WEBPACK_IMPORTED_MODULE_9__.MatRipple]
  });
}

/***/ }),

/***/ 90647:
/*!*********************************************************************************!*\
  !*** ./libs/bookings/src/lib/locker-select-modal/locker-bank-list.component.ts ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   LockerBankListComponent: () => (/* binding */ LockerBankListComponent)
/* harmony export */ });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! rxjs */ 68824);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! rxjs/operators */ 35443);
/* harmony import */ var _booking_form_service__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../booking-form.service */ 18379);
/* harmony import */ var _lockers_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../lockers.service */ 98796);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _angular_material_progress_spinner__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @angular/material/progress-spinner */ 41134);
/* harmony import */ var _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../components/src/lib/icon.component */ 69434);
/* harmony import */ var _components_src_lib_authenticated_image_directive__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../components/src/lib/authenticated-image.directive */ 93208);
/* harmony import */ var _angular_material_core__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @angular/material/core */ 74646);













function LockerBankListComponent_ng_container_5_ul_1_li_1_div_3_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](0, "div", 22)(1, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](2, "done");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]()();
  }
}
function LockerBankListComponent_ng_container_5_ul_1_li_1_img_4_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelement"](0, "img", 23);
  }
  if (rf & 2) {
    const locker_bank_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"]().$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("source", locker_bank_r2.images[0]);
  }
}
function LockerBankListComponent_ng_container_5_ul_1_li_1_ng_template_5_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelement"](0, "img", 24);
  }
}
function LockerBankListComponent_ng_container_5_ul_1_li_1_Template(rf, ctx) {
  if (rf & 1) {
    const _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](0, "li", 11)(1, "button", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵlistener"]("click", function LockerBankListComponent_ng_container_5_ul_1_li_1_Template_button_click_1_listener() {
      const locker_bank_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵrestoreView"](_r1).$implicit;
      const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"](3);
      return _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵresetView"](ctx_r2.selectLockerBank(locker_bank_r2));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](2, "div", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](3, LockerBankListComponent_ng_container_5_ul_1_li_1_div_3_Template, 3, 0, "div", 14)(4, LockerBankListComponent_ng_container_5_ul_1_li_1_img_4_Template, 1, 1, "img", 15)(5, LockerBankListComponent_ng_container_5_ul_1_li_1_ng_template_5_Template, 1, 0, "ng-template", null, 2, _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplateRefExtractor"]);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](7, "div", 16)(8, "span", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](9);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](10, "div", 18)(11, "app-icon", 19);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](12, "place");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](13, "p", 20);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](14);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](15, "div", 18)(16, "app-icon", 19);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](17, "people");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](18, "p", 20);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](19);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]()()()();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](20, "button", 21);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵlistener"]("click", function LockerBankListComponent_ng_container_5_ul_1_li_1_Template_button_click_20_listener() {
      const locker_bank_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵrestoreView"](_r1).$implicit;
      const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"](3);
      return _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵresetView"](ctx_r2.toggleFav.emit(locker_bank_r2));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](21, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](22);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]()()();
  }
  if (rf & 2) {
    const locker_bank_r2 = ctx.$implicit;
    const placeholder_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵreference"](6);
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵclassProp"]("!border-blue-400", ctx_r2.active === locker_bank_r2.id);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngIf", ctx_r2.selected.includes(locker_bank_r2.id));
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngIf", locker_bank_r2.images == null ? null : locker_bank_r2.images.length)("ngIfElse", placeholder_r4);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtextInterpolate1"](" ", locker_bank_r2.name || locker_bank_r2.id || "Locker_bank", " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtextInterpolate1"](" ", (locker_bank_r2.zone == null ? null : locker_bank_r2.zone.display_name) || (locker_bank_r2.zone == null ? null : locker_bank_r2.zone.name) || "<No Level>", " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtextInterpolate2"](" ", locker_bank_r2.available || 0, " / ", locker_bank_r2.lockers.length || 1, " Available ");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵclassProp"]("text-blue-400", ctx_r2.isFavourite(locker_bank_r2.id));
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtextInterpolate"](ctx_r2.isFavourite(locker_bank_r2.id) ? "favorite" : "favorite_border");
  }
}
function LockerBankListComponent_ng_container_5_ul_1_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](0, "ul", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](1, LockerBankListComponent_ng_container_5_ul_1_li_1_Template, 23, 12, "li", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpipe"](2, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngForOf", _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpipeBind1"](2, 1, ctx_r2.locker_banks));
  }
}
function LockerBankListComponent_ng_container_5_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](1, LockerBankListComponent_ng_container_5_ul_1_Template, 3, 3, "ul", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpipe"](2, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementContainerEnd"]();
  }
  if (rf & 2) {
    let tmp_3_0;
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"]();
    const empty_state_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵreference"](10);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngIf", (tmp_3_0 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpipeBind1"](2, 2, ctx_r2.locker_banks)) == null ? null : tmp_3_0.length)("ngIfElse", empty_state_r5);
  }
}
function LockerBankListComponent_ng_template_7_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](0, "div", 25);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelement"](1, "mat-spinner", 26);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](2, "p", 27);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](3, "Finding available locker banks...");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("diameter", 32);
  }
}
function LockerBankListComponent_ng_template_9_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](0, "div", 28)(1, "p", 29);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](2, " No available locker banks for selected time and/or filters ");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]()();
  }
}
class LockerBankListComponent {
  constructor(_state, _lockers) {
    this._state = _state;
    this._lockers = _lockers;
    this.active = '';
    this.selected = '';
    this.favorites = [];
    this.onSelect = new _angular_core__WEBPACK_IMPORTED_MODULE_4__.EventEmitter();
    this.toggleFav = new _angular_core__WEBPACK_IMPORTED_MODULE_4__.EventEmitter();
    this.locker_banks = (0,rxjs__WEBPACK_IMPORTED_MODULE_5__.combineLatest)([this._state.options, this._state.available_resources, this._lockers.lockers_banks$]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.map)(([{
      show_fav
    }, resources, banks]) => {
      return banks.filter(i => (!show_fav || this.isFavourite(i.id)) && resources.find(_ => _.bank_id === i.id)).map(bank => ({
        ...bank,
        available: resources.filter(_ => _.bank_id === bank.id).length,
        lockers: bank.lockers.map(_ => ({
          ..._,
          zone: bank.zone
        }))
      }));
    }));
    this.loading = this._state.loading;
  }
  isFavourite(locker_bank_id) {
    return this.favorites.includes(locker_bank_id);
  }
  selectLockerBank(locker_bank) {
    this.onSelect.emit(locker_bank);
  }
  static #_ = this.ɵfac = function LockerBankListComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || LockerBankListComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵdirectiveInject"](_booking_form_service__WEBPACK_IMPORTED_MODULE_0__.BookingFormService), _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵdirectiveInject"](_lockers_service__WEBPACK_IMPORTED_MODULE_1__.LockersService));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵdefineComponent"]({
    type: LockerBankListComponent,
    selectors: [["locker-bank-list"]],
    inputs: {
      active: "active",
      selected: "selected",
      favorites: "favorites"
    },
    outputs: {
      onSelect: "onSelect",
      toggleFav: "toggleFav"
    },
    decls: 11,
    vars: 7,
    consts: () => {
      let i18n_0;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_5968132631442328843$$LIBS_BOOKINGS_SRC_LIB_LOCKER_SELECT_MODAL_LOCKER_BANK_LIST_COMPONENT_TS_0 = goog.getMsg("Results");
        i18n_0 = MSG_EXTERNAL_5968132631442328843$$LIBS_BOOKINGS_SRC_LIB_LOCKER_SELECT_MODAL_LOCKER_BANK_LIST_COMPONENT_TS_0;
      } else {
        i18n_0 = $localize`:␟80ed5b776a26a78099e230e0e89d96c33ba44e24␟5968132631442328843:Results`;
      }
      let i18n_1;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_8158044446606709450$$LIBS_BOOKINGS_SRC_LIB_LOCKER_SELECT_MODAL_LOCKER_BANK_LIST_COMPONENT_TS_1 = goog.getMsg(" {$interpolation} result(s) found ", {
          "interpolation": "\uFFFD0\uFFFD"
        }, {
          original_code: {
            "interpolation": "{{ (locker_banks | async)?.length || 0 }}"
          }
        });
        i18n_1 = MSG_EXTERNAL_8158044446606709450$$LIBS_BOOKINGS_SRC_LIB_LOCKER_SELECT_MODAL_LOCKER_BANK_LIST_COMPONENT_TS_1;
      } else {
        i18n_1 = $localize`:␟5b237ca854e67fef69541b67dc32656a82b0972b␟8158044446606709450: ${"\uFFFD0\uFFFD"}:INTERPOLATION: result(s) found `;
      }
      return [["load_state", ""], ["empty_state", ""], ["placeholder", ""], i18n_0, i18n_1, [1, "font-bold"], ["count", "", 1, "text-sm", "opacity-60", "mb-4"], [4, "ngIf", "ngIfElse"], ["class", "list-style-none space-y-2 min-w-[50vh]", 4, "ngIf", "ngIfElse"], [1, "list-style-none", "space-y-2", "min-w-[50vh]"], ["locker_bank", "", "class", "relative rounded-lg w-full shadow border bg-base-100 border-base-200 overflow-hidden", 3, "!border-blue-400", 4, "ngFor", "ngForOf"], ["locker_bank", "", 1, "relative", "rounded-lg", "w-full", "shadow", "border", "bg-base-100", "border-base-200", "overflow-hidden"], ["name", "select-locker_bank", "matRipple", "", 1, "w-full", "h-full", "flex", "p-2", 3, "click"], [1, "relative", "w-20", "h-20", "rounded-xl", "bg-base-200", "mr-4", "flex", "items-center", "justify-center"], ["class", "absolute top-1 left-1 border border-neutral bg-base-200 rounded-full h-6 w-6 flex items-center justify-center text-white", 4, "ngIf"], ["auth", "", "class", "object-cover h-full", 3, "source", 4, "ngIf", "ngIfElse"], [1, "space-y-2", "pt-2", "flex-1", "text-left"], [1, "font-medium"], [1, "flex", "items-center", "text-sm", "space-x-2"], [1, "text-blue-500"], [1, "text-xs"], ["icon", "", "matRipple", "", "name", "toggle-locker_bank-favourite", 1, "absolute", "top-1", "right-1", 3, "click"], [1, "absolute", "top-1", "left-1", "border", "border-neutral", "bg-base-200", "rounded-full", "h-6", "w-6", "flex", "items-center", "justify-center", "text-white"], ["auth", "", 1, "object-cover", "h-full", 3, "source"], ["src", "assets/icons/locker-placeholder.svg", 1, "m-auto"], ["loading", "", 1, "p-16", "flex", "flex-col", "items-center", "justify-center", "space-y-2"], [3, "diameter"], [1, "opacity-30"], ["empty", "", 1, "p-16", "flex", "flex-col", "items-center", "justify-center", "space-y-2"], [1, "opacity-30", "text-center"]];
    },
    template: function LockerBankListComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](0, "h3", 5);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵi18n"](1, 3);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](2, "p", 6);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵi18n"](3, 4);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpipe"](4, "async");
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](5, LockerBankListComponent_ng_container_5_Template, 3, 4, "ng-container", 7);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpipe"](6, "async");
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](7, LockerBankListComponent_ng_template_7_Template, 4, 1, "ng-template", null, 0, _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplateRefExtractor"])(9, LockerBankListComponent_ng_template_9_Template, 3, 0, "ng-template", null, 1, _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplateRefExtractor"]);
      }
      if (rf & 2) {
        let tmp_2_0;
        let tmp_4_0;
        const load_state_r6 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵreference"](8);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](4);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵi18nExp"](((tmp_2_0 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpipeBind1"](4, 3, ctx.locker_banks)) == null ? null : tmp_2_0.length) || 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵi18nApply"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngIf", !((tmp_4_0 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpipeBind1"](6, 5, ctx.loading)) == null ? null : tmp_4_0.length))("ngIfElse", load_state_r6);
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_7__.NgForOf, _angular_common__WEBPACK_IMPORTED_MODULE_7__.NgIf, _angular_material_progress_spinner__WEBPACK_IMPORTED_MODULE_8__.MatProgressSpinner, _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_2__.IconComponent, _components_src_lib_authenticated_image_directive__WEBPACK_IMPORTED_MODULE_3__.AuthenticatedImageDirective, _angular_material_core__WEBPACK_IMPORTED_MODULE_9__.MatRipple, _angular_common__WEBPACK_IMPORTED_MODULE_7__.AsyncPipe],
    styles: ["[_nghost-%COMP%] {\n                width: 100%;\n                height: 100%;\n                padding: 0.5rem;\n                background: rgba(0, 0, 0, 0.05);\n                overflow-y: auto;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxvY2tlci1iYW5rLWxpc3QuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxXQUFXO2dCQUNYLFlBQVk7Z0JBQ1osZUFBZTtnQkFDZiwrQkFBK0I7Z0JBQy9CLGdCQUFnQjtZQUNwQiIsImZpbGUiOiJsb2NrZXItYmFuay1saXN0LmNvbXBvbmVudC50cyIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgOmhvc3Qge1xuICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiAwLjVyZW07XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZDogcmdiYSgwLCAwLCAwLCAwLjA1KTtcbiAgICAgICAgICAgICAgICBvdmVyZmxvdy15OiBhdXRvO1xuICAgICAgICAgICAgfVxuICAgICAgICAiXX0= */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvYm9va2luZ3Mvc3JjL2xpYi9sb2NrZXItc2VsZWN0LW1vZGFsL2xvY2tlci1iYW5rLWxpc3QuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxXQUFXO2dCQUNYLFlBQVk7Z0JBQ1osZUFBZTtnQkFDZiwrQkFBK0I7Z0JBQy9CLGdCQUFnQjtZQUNwQjs7QUFFWixnb0JBQWdvQiIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgOmhvc3Qge1xuICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiAwLjVyZW07XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZDogcmdiYSgwLCAwLCAwLCAwLjA1KTtcbiAgICAgICAgICAgICAgICBvdmVyZmxvdy15OiBhdXRvO1xuICAgICAgICAgICAgfVxuICAgICAgICAiXSwic291cmNlUm9vdCI6IiJ9 */"]
  });
}

/***/ }),

/***/ 42394:
/*!***************************************************************************************!*\
  !*** ./libs/bookings/src/lib/locker-select-modal/locker-filters-display.component.ts ***!
  \***************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   LockerFiltersDisplayComponent: () => (/* binding */ LockerFiltersDisplayComponent)
/* harmony export */ });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var _locker_filters_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./locker-filters.component */ 22657);
/* harmony import */ var _booking_form_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../booking-form.service */ 18379);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! date-fns */ 56441);
/* harmony import */ var _angular_material_bottom_sheet__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @angular/material/bottom-sheet */ 15244);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../components/src/lib/icon.component */ 69434);
/* harmony import */ var _angular_material_core__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @angular/material/core */ 74646);













const _c0 = () => [];
function LockerFiltersDisplayComponent_div_16_Template(rf, ctx) {
  if (rf & 1) {
    const _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](0, "div", 14)(1, "p");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](3, "button", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵlistener"]("click", function LockerFiltersDisplayComponent_div_16_Template_button_click_3_listener() {
      const feat_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵrestoreView"](_r1).$implicit;
      const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵresetView"](ctx_r2.setFeature(feat_r2, false));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](4, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](5, "close");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]()()();
  }
  if (rf & 2) {
    const feat_r2 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtextInterpolate"](feat_r2);
  }
}
function LockerFiltersDisplayComponent_div_18_Template(rf, ctx) {
  if (rf & 1) {
    const _r4 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](0, "div", 16)(1, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵi18n"](2, 3);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](3, "button", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵlistener"]("click", function LockerFiltersDisplayComponent_div_18_Template_button_click_3_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵrestoreView"](_r4);
      const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵresetView"](ctx_r2.setOptions({
        show_fav: false
      }));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](4, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](5, "close");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]()()();
  }
}
class LockerFiltersDisplayComponent extends _placeos_common__WEBPACK_IMPORTED_MODULE_0__.AsyncHandler {
  get start() {
    return this._state.form.value.date;
  }
  get end() {
    const {
      date,
      duration,
      all_day
    } = this._state.form.value;
    if (all_day) return (0,date_fns__WEBPACK_IMPORTED_MODULE_5__.endOfDay)(date);
    return date + duration * 60 * 1000;
  }
  get time_format() {
    return this._settings.time_format;
  }
  constructor(_bsheet, _state, _settings) {
    super();
    this._bsheet = _bsheet;
    this._state = _state;
    this._settings = _settings;
    this.view = 'list';
    this.viewChange = new _angular_core__WEBPACK_IMPORTED_MODULE_4__.EventEmitter();
    this.options = this._state.options;
    this.setOptions = o => this._state.setOptions(o);
    this.setFeature = (f, e) => this._state.setFeature(f, e);
    this.editFilter = () => this._bsheet.open(_locker_filters_component__WEBPACK_IMPORTED_MODULE_1__.LockerFiltersComponent);
  }
  static #_ = this.ɵfac = function LockerFiltersDisplayComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || LockerFiltersDisplayComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵdirectiveInject"](_angular_material_bottom_sheet__WEBPACK_IMPORTED_MODULE_6__.MatBottomSheet), _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵdirectiveInject"](_booking_form_service__WEBPACK_IMPORTED_MODULE_2__.BookingFormService), _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵdirectiveInject"](_placeos_common__WEBPACK_IMPORTED_MODULE_0__.SettingsService));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵdefineComponent"]({
    type: LockerFiltersDisplayComponent,
    selectors: [["locker-filters-display"]],
    inputs: {
      view: "view"
    },
    outputs: {
      viewChange: "viewChange"
    },
    features: [_angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵInheritDefinitionFeature"]],
    decls: 20,
    vars: 23,
    consts: () => {
      let i18n_0;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_5208858215712453646$$LIBS_BOOKINGS_SRC_LIB_LOCKER_SELECT_MODAL_LOCKER_FILTERS_DISPLAY_COMPONENT_TS_0 = goog.getMsg(" Filters ");
        i18n_0 = MSG_EXTERNAL_5208858215712453646$$LIBS_BOOKINGS_SRC_LIB_LOCKER_SELECT_MODAL_LOCKER_FILTERS_DISPLAY_COMPONENT_TS_0;
      } else {
        i18n_0 = $localize`:␟19eaa5cd51d70d9ea957eecac78cfd811e9b93d8␟5208858215712453646: Filters `;
      }
      let i18n_1;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_8553228906889869186$$LIBS_BOOKINGS_SRC_LIB_LOCKER_SELECT_MODAL_LOCKER_FILTERS_DISPLAY_COMPONENT_TS_1 = goog.getMsg(" Map ");
        i18n_1 = MSG_EXTERNAL_8553228906889869186$$LIBS_BOOKINGS_SRC_LIB_LOCKER_SELECT_MODAL_LOCKER_FILTERS_DISPLAY_COMPONENT_TS_1;
      } else {
        i18n_1 = $localize`:␟992a9a6a193a56c5b8846dc972c5e1977ee5f1aa␟8553228906889869186: Map `;
      }
      let i18n_2;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_7787942140742011951$$LIBS_BOOKINGS_SRC_LIB_LOCKER_SELECT_MODAL_LOCKER_FILTERS_DISPLAY_COMPONENT_TS_2 = goog.getMsg(" List ");
        i18n_2 = MSG_EXTERNAL_7787942140742011951$$LIBS_BOOKINGS_SRC_LIB_LOCKER_SELECT_MODAL_LOCKER_FILTERS_DISPLAY_COMPONENT_TS_2;
      } else {
        i18n_2 = $localize`:␟4b286e90831dd637c5cd3eb20544664ee7112669␟7787942140742011951: List `;
      }
      let i18n_3;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_1305804744685886428$$LIBS_BOOKINGS_SRC_LIB_LOCKER_SELECT_MODAL_LOCKER_FILTERS_DISPLAY_COMPONENT_TS_3 = goog.getMsg("Favourites Only");
        i18n_3 = MSG_EXTERNAL_1305804744685886428$$LIBS_BOOKINGS_SRC_LIB_LOCKER_SELECT_MODAL_LOCKER_FILTERS_DISPLAY_COMPONENT_TS_3;
      } else {
        i18n_3 = $localize`:␟d6ad8326be48837fe776a268abc758d1c7ba4f05␟1305804744685886428:Favourites Only`;
      }
      return [i18n_0, i18n_1, i18n_2, i18n_3, ["actions", "", 1, "sm:hidden", "space-x-2", "flex", "flex-row", "items-center", "p-2"], ["btn", "", "matRipple", "", "name", "edit-locker-filters", 1, "flex-1", "w-1/2", 3, "click"], [1, "flex", "items-center"], ["btn", "", "matRipple", "", "name", "view-locker-map", 1, "rounded-l", "rounded-r-none", 3, "click"], ["btn", "", "matRipple", "", "name", "view-locker-list", 1, "rounded-r", "rounded-l-none", 3, "click"], ["filters", "", 1, "flex", "items-center", "flex-wrap", "p-2", "w-[35rem]", "max-w-full", "sm:max-w-[35rem]"], ["filter-item", "", "date", ""], ["filter-item", "", "time", ""], ["filter-item", "", "features", "", 4, "ngFor", "ngForOf"], ["filter-item", "", 4, "ngIf"], ["filter-item", "", "features", ""], ["icon", "", "matRipple", "", "name", "remove-locker-filter", 1, "-mr-4", 3, "click"], ["filter-item", ""], ["icon", "", "matRipple", "", "name", "remove-locker-favs-filter", 1, "-mr-4", 3, "click"]];
    },
    template: function LockerFiltersDisplayComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](0, "section", 4)(1, "button", 5);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵlistener"]("click", function LockerFiltersDisplayComponent_Template_button_click_1_listener() {
          return ctx.editFilter();
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵi18n"](2, 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](3, "div", 6)(4, "button", 7);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵlistener"]("click", function LockerFiltersDisplayComponent_Template_button_click_4_listener() {
          ctx.view = "map";
          return ctx.viewChange.emit(ctx.view);
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵi18n"](5, 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](6, "button", 8);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵlistener"]("click", function LockerFiltersDisplayComponent_Template_button_click_6_listener() {
          ctx.view = "list";
          return ctx.viewChange.emit(ctx.view);
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵi18n"](7, 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]()()();
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](8, "section", 9)(9, "div", 10);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](10);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpipe"](11, "date");
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](12, "div", 11);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](13);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpipe"](14, "date");
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpipe"](15, "date");
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](16, LockerFiltersDisplayComponent_div_16_Template, 6, 1, "div", 12);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpipe"](17, "async");
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](18, LockerFiltersDisplayComponent_div_18_Template, 6, 0, "div", 13);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpipe"](19, "async");
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
      }
      if (rf & 2) {
        let tmp_4_0;
        let tmp_5_0;
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](4);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵclassProp"]("inverse", ctx.view !== "map");
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵclassProp"]("inverse", ctx.view !== "list");
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](4);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtextInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpipeBind2"](11, 9, ctx.start, "mediumDate"));
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtextInterpolate2"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpipeBind2"](14, 12, ctx.start, ctx.time_format), " \u2014 ", _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpipeBind2"](15, 15, ctx.end, ctx.time_format), " ");
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngForOf", ((tmp_4_0 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpipeBind1"](17, 18, ctx.options)) == null ? null : tmp_4_0.features) || _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpureFunction0"](22, _c0));
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngIf", (tmp_5_0 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpipeBind1"](19, 20, ctx.options)) == null ? null : tmp_5_0.show_fav);
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_7__.NgForOf, _angular_common__WEBPACK_IMPORTED_MODULE_7__.NgIf, _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_3__.IconComponent, _angular_material_core__WEBPACK_IMPORTED_MODULE_8__.MatRipple, _angular_common__WEBPACK_IMPORTED_MODULE_7__.AsyncPipe, _angular_common__WEBPACK_IMPORTED_MODULE_7__.DatePipe],
    styles: ["[filter-item][_ngcontent-%COMP%] {\n                display: flex;\n                align-items: center;\n                padding: 0 1rem;\n                height: 2rem;\n                font-size: 0.875rem;\n                border: 1px solid rgba(0, 0, 0, 0.2);\n                border-radius: 1.25rem;\n                margin-right: 0.5rem;\n                margin-bottom: 0.5rem;\n            }\n\n            [filter-item][_ngcontent-%COMP%]:hover {\n                background: rgba(0, 0, 0, 0.1);\n            }\n\n            [filter-item][_ngcontent-%COMP%]    > *[_ngcontent-%COMP%]    + *[_ngcontent-%COMP%] {\n                margin-left: 0.5rem;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxvY2tlci1maWx0ZXJzLWRpc3BsYXkuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxhQUFhO2dCQUNiLG1CQUFtQjtnQkFDbkIsZUFBZTtnQkFDZixZQUFZO2dCQUNaLG1CQUFtQjtnQkFDbkIsb0NBQW9DO2dCQUNwQyxzQkFBc0I7Z0JBQ3RCLG9CQUFvQjtnQkFDcEIscUJBQXFCO1lBQ3pCOztZQUVBO2dCQUNJLDhCQUE4QjtZQUNsQzs7WUFFQTtnQkFDSSxtQkFBbUI7WUFDdkIiLCJmaWxlIjoibG9ja2VyLWZpbHRlcnMtZGlzcGxheS5jb21wb25lbnQudHMiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIFtmaWx0ZXItaXRlbV0ge1xuICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiAwIDFyZW07XG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAycmVtO1xuICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMC44NzVyZW07XG4gICAgICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgcmdiYSgwLCAwLCAwLCAwLjIpO1xuICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDEuMjVyZW07XG4gICAgICAgICAgICAgICAgbWFyZ2luLXJpZ2h0OiAwLjVyZW07XG4gICAgICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMC41cmVtO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBbZmlsdGVyLWl0ZW1dOmhvdmVyIHtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiByZ2JhKDAsIDAsIDAsIDAuMSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIFtmaWx0ZXItaXRlbV0gPiAqICsgKiB7XG4gICAgICAgICAgICAgICAgbWFyZ2luLWxlZnQ6IDAuNXJlbTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl19 */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvYm9va2luZ3Mvc3JjL2xpYi9sb2NrZXItc2VsZWN0LW1vZGFsL2xvY2tlci1maWx0ZXJzLWRpc3BsYXkuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxhQUFhO2dCQUNiLG1CQUFtQjtnQkFDbkIsZUFBZTtnQkFDZixZQUFZO2dCQUNaLG1CQUFtQjtnQkFDbkIsb0NBQW9DO2dCQUNwQyxzQkFBc0I7Z0JBQ3RCLG9CQUFvQjtnQkFDcEIscUJBQXFCO1lBQ3pCOztZQUVBO2dCQUNJLDhCQUE4QjtZQUNsQzs7WUFFQTtnQkFDSSxtQkFBbUI7WUFDdkI7O0FBRVosd3dDQUF3d0MiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIFtmaWx0ZXItaXRlbV0ge1xuICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiAwIDFyZW07XG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAycmVtO1xuICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMC44NzVyZW07XG4gICAgICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgcmdiYSgwLCAwLCAwLCAwLjIpO1xuICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDEuMjVyZW07XG4gICAgICAgICAgICAgICAgbWFyZ2luLXJpZ2h0OiAwLjVyZW07XG4gICAgICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMC41cmVtO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBbZmlsdGVyLWl0ZW1dOmhvdmVyIHtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiByZ2JhKDAsIDAsIDAsIDAuMSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIFtmaWx0ZXItaXRlbV0gPiAqICsgKiB7XG4gICAgICAgICAgICAgICAgbWFyZ2luLWxlZnQ6IDAuNXJlbTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl0sInNvdXJjZVJvb3QiOiIifQ== */"]
  });
}

/***/ }),

/***/ 22657:
/*!*******************************************************************************!*\
  !*** ./libs/bookings/src/lib/locker-select-modal/locker-filters.component.ts ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   LockerFiltersComponent: () => (/* binding */ LockerFiltersComponent)
/* harmony export */ });
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! date-fns */ 56441);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! date-fns */ 28797);
/* harmony import */ var libs_organisation_src_lib_organisation_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! libs/organisation/src/lib/organisation.service */ 19863);
/* harmony import */ var _booking_form_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../booking-form.service */ 18379);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! rxjs */ 68824);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! rxjs/operators */ 35443);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_material_bottom_sheet__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @angular/material/bottom-sheet */ 15244);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @angular/forms */ 34456);
/* harmony import */ var _angular_material_form_field__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @angular/material/form-field */ 24950);
/* harmony import */ var _angular_material_checkbox__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @angular/material/checkbox */ 97024);
/* harmony import */ var _angular_material_core__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @angular/material/core */ 74646);
/* harmony import */ var _form_fields_src_lib_date_field_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../form-fields/src/lib/date-field.component */ 19608);
/* harmony import */ var _form_fields_src_lib_duration_field_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../form-fields/src/lib/duration-field.component */ 83476);
/* harmony import */ var _form_fields_src_lib_time_field_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../form-fields/src/lib/time-field.component */ 81413);
/* harmony import */ var _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../components/src/lib/icon.component */ 69434);
/* harmony import */ var _angular_material_select__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! @angular/material/select */ 25175);
/* harmony import */ var _components_src_lib_building_pipe__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../components/src/lib/building.pipe */ 56062);
/* harmony import */ var _ngx_translate_core__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! @ngx-translate/core */ 597);
























const _c0 = () => ({
  standalone: true
});
const _c1 = () => [];
function LockerFiltersComponent_button_2_Template(rf, ctx) {
  if (rf & 1) {
    const _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](0, "button", 33);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵlistener"]("click", function LockerFiltersComponent_button_2_Template_button_click_0_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵrestoreView"](_r1);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵresetView"](ctx_r1.close());
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](1, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](2, "keyboard_arrow_left");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]()();
  }
}
function LockerFiltersComponent_mat_form_field_13_mat_option_2_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](0, "mat-option", 37);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const reg_r4 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("value", reg_r4);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtextInterpolate1"](" ", reg_r4.display_name || reg_r4.name, " ");
  }
}
function LockerFiltersComponent_mat_form_field_13_Template(rf, ctx) {
  if (rf & 1) {
    const _r3 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](0, "mat-form-field", 34)(1, "mat-select", 35);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵlistener"]("ngModelChange", function LockerFiltersComponent_mat_form_field_13_Template_mat_select_ngModelChange_1_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵrestoreView"](_r3);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵresetView"](ctx_r1.setRegion($event));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtemplate"](2, LockerFiltersComponent_mat_form_field_13_mat_option_2_Template, 2, 2, "mat-option", 36);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipe"](3, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngModel", ctx_r1.region)("ngModelOptions", _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpureFunction0"](5, _c0));
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngForOf", _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipeBind1"](3, 3, ctx_r1.regions));
  }
}
function LockerFiltersComponent_mat_form_field_15_mat_option_5_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](0, "mat-option", 37);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const bld_r6 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("value", bld_r6);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtextInterpolate1"](" ", bld_r6.display_name || bld_r6.name, " ");
  }
}
function LockerFiltersComponent_mat_form_field_15_Template(rf, ctx) {
  if (rf & 1) {
    const _r5 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](0, "mat-form-field", 34)(1, "mat-select", 38);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipe"](2, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipe"](3, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipe"](4, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵlistener"]("ngModelChange", function LockerFiltersComponent_mat_form_field_15_Template_mat_select_ngModelChange_1_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵrestoreView"](_r5);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵresetView"](ctx_r1.setBuilding($event));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtemplate"](5, LockerFiltersComponent_mat_form_field_15_mat_option_5_Template, 2, 2, "mat-option", 36);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipe"](6, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    let tmp_3_0;
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngModel", _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipeBind1"](2, 4, ctx_r1.building))("ngModelOptions", _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpureFunction0"](12, _c0))("placeholder", ((tmp_3_0 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipeBind1"](3, 6, ctx_r1.building)) == null ? null : tmp_3_0.display_name) || ((tmp_3_0 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipeBind1"](4, 8, ctx_r1.building)) == null ? null : tmp_3_0.name));
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngForOf", _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipeBind1"](6, 10, ctx_r1.buildings));
  }
}
function LockerFiltersComponent_mat_form_field_17_mat_option_3_div_2_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](0, "div", 42);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipe"](2, "building");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](3, "span", 43);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](4, " - ");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    let tmp_4_0;
    const lvl_r8 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"]().$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtextInterpolate1"](" ", (tmp_4_0 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipeBind1"](2, 1, lvl_r8.parent_id)) == null ? null : tmp_4_0.display_name, " ");
  }
}
function LockerFiltersComponent_mat_form_field_17_mat_option_3_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](0, "mat-option", 37)(1, "div", 40);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtemplate"](2, LockerFiltersComponent_mat_form_field_17_mat_option_3_div_2_Template, 5, 3, "div", 41);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](3, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]()()();
  }
  if (rf & 2) {
    const lvl_r8 = ctx.$implicit;
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("value", lvl_r8.id);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngIf", ctx_r1.use_region);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtextInterpolate1"](" ", lvl_r8.display_name || lvl_r8.name, " ");
  }
}
function LockerFiltersComponent_mat_form_field_17_Template(rf, ctx) {
  if (rf & 1) {
    const _r7 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](0, "mat-form-field", 34)(1, "mat-select", 39);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipe"](2, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵlistener"]("ngModelChange", function LockerFiltersComponent_mat_form_field_17_Template_mat_select_ngModelChange_1_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵrestoreView"](_r7);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵresetView"](ctx_r1.setOptions({
        zone_id: $event
      }));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtemplate"](3, LockerFiltersComponent_mat_form_field_17_mat_option_3_Template, 5, 3, "mat-option", 36);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipe"](4, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    let tmp_1_0;
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngModel", (tmp_1_0 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipeBind1"](2, 3, ctx_r1.options)) == null ? null : tmp_1_0.zone_id)("ngModelOptions", _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpureFunction0"](7, _c0));
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngForOf", _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipeBind1"](4, 5, ctx_r1.levels));
  }
}
function LockerFiltersComponent_div_24_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](0, "div", 44)(1, "mat-checkbox", 45);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵi18n"](2, 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]()();
  }
}
function LockerFiltersComponent_div_25_Template(rf, ctx) {
  if (rf & 1) {
    const _r9 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](0, "div", 46)(1, "div", 47)(2, "label");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵi18n"](3, 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](4, "a-time-field", 48);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵlistener"]("ngModelChange", function LockerFiltersComponent_div_25_Template_a_time_field_ngModelChange_4_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵrestoreView"](_r9);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵresetView"](ctx_r1.form.patchValue({
        date: $event
      }));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](5, "div", 47)(6, "label");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵi18n"](7, 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelement"](8, "a-duration-field", 49);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    let tmp_4_0;
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngModel", ctx_r1.form.value.date)("ngModelOptions", _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpureFunction0"](8, _c0))("use_24hr", ctx_r1.use_24hr);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("time", (tmp_4_0 = ctx_r1.form.get("date")) == null ? null : tmp_4_0.value)("max", 10 * 60)("min", 60)("step", 60)("use_24hr", ctx_r1.use_24hr);
  }
}
function LockerFiltersComponent_section_36_div_3_Template(rf, ctx) {
  if (rf & 1) {
    const _r10 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](0, "div", 52)(1, "div", 53);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](3, "mat-checkbox", 54);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipe"](4, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵlistener"]("ngModelChange", function LockerFiltersComponent_section_36_div_3_Template_mat_checkbox_ngModelChange_3_listener($event) {
      const feat_r11 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵrestoreView"](_r10).$implicit;
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"](2);
      return _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵresetView"](ctx_r1.setFeature(feat_r11, $event));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    let tmp_4_0;
    const feat_r11 = ctx.$implicit;
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtextInterpolate"](feat_r11);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngModel", (((tmp_4_0 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipeBind1"](4, 3, ctx_r1.options)) == null ? null : tmp_4_0.features) || _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpureFunction0"](5, _c1)).includes(feat_r11))("ngModelOptions", _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpureFunction0"](6, _c0));
  }
}
function LockerFiltersComponent_section_36_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](0, "section", 50)(1, "h2", 27);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵi18n"](2, 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtemplate"](3, LockerFiltersComponent_section_36_div_3_Template, 5, 7, "div", 51);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipe"](4, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngForOf", _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipeBind1"](4, 1, ctx_r1.features));
  }
}
function LockerFiltersComponent_div_38_Template(rf, ctx) {
  if (rf & 1) {
    const _r12 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](0, "div", 55)(1, "button", 56);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵlistener"]("click", function LockerFiltersComponent_div_38_Template_button_click_1_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵrestoreView"](_r12);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵresetView"](ctx_r1.close());
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵi18n"](2, 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]()();
  }
}
class LockerFiltersComponent {
  get building() {
    return this._org.building;
  }
  set building(bld) {
    this._org.building = bld;
  }
  get region() {
    return this._org.region;
  }
  set region(reg) {
    this._org.region = reg;
  }
  get allow_time_changes() {
    return !!this._settings.get('app.lockers.allow_time_changes');
  }
  get allow_all_day() {
    return this.allow_time_changes && !!this._settings.get('app.lockers.allow_all_day');
  }
  get end_date() {
    return (0,date_fns__WEBPACK_IMPORTED_MODULE_9__.endOfDay)((0,date_fns__WEBPACK_IMPORTED_MODULE_10__.addDays)(Date.now(), this._settings.get('app.lockers.available_period') || 90));
  }
  get use_24hr() {
    return this._settings.get('app.use_24_hour_time');
  }
  get use_region() {
    return this._settings.get('app.use_region');
  }
  constructor(_bsheet_ref, _state, _org, _settings) {
    this._bsheet_ref = _bsheet_ref;
    this._state = _state;
    this._org = _org;
    this._settings = _settings;
    this.can_close = false;
    this.options = this._state.options;
    this.features = this._state.features;
    this.buildings = this._org.active_buildings;
    this.form = this._state.form;
    this.regions = this._org.region_list;
    this.levels = (0,rxjs__WEBPACK_IMPORTED_MODULE_11__.combineLatest)([this._org.active_region, this._org.active_building]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.map)(([region, bld]) => {
      const level_list = this.use_region ? this._org.levelsForRegion(region) : this._org.levelsForBuilding(bld);
      const viewable_levels = level_list.filter(lvl => !lvl.tags.includes('parking'));
      return viewable_levels.sort((a, b) => a.parent_id.localeCompare(b.parent_id) || (a.display_name || '').localeCompare(b.display_name || ''));
    }));
    this.close = () => this._bsheet_ref.dismiss();
    this.setOptions = o => this._state.setOptions(o);
    this.setFeature = (f, e) => this._state.setFeature(f, e);
    this.setLevel = l => {};
    this.can_close = !!this._bsheet_ref;
  }
  static #_ = this.ɵfac = function LockerFiltersComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || LockerFiltersComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵdirectiveInject"](_angular_material_bottom_sheet__WEBPACK_IMPORTED_MODULE_13__.MatBottomSheetRef, 8), _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵdirectiveInject"](_booking_form_service__WEBPACK_IMPORTED_MODULE_2__.BookingFormService), _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵdirectiveInject"](libs_organisation_src_lib_organisation_service__WEBPACK_IMPORTED_MODULE_1__.OrganisationService), _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵdirectiveInject"](_placeos_common__WEBPACK_IMPORTED_MODULE_0__.SettingsService));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵdefineComponent"]({
    type: LockerFiltersComponent,
    selectors: [["locker-filters"]],
    inputs: {
      hide_levels: "hide_levels"
    },
    decls: 39,
    vars: 30,
    consts: () => {
      let i18n_0;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_2717350382225268503$$LIBS_BOOKINGS_SRC_LIB_LOCKER_SELECT_MODAL_LOCKER_FILTERS_COMPONENT_TS_0 = goog.getMsg("Locker Filters");
        i18n_0 = MSG_EXTERNAL_2717350382225268503$$LIBS_BOOKINGS_SRC_LIB_LOCKER_SELECT_MODAL_LOCKER_FILTERS_COMPONENT_TS_0;
      } else {
        i18n_0 = $localize`:␟229669497e532a4055b24a971df68ec327b07e30␟2717350382225268503:Locker Filters`;
      }
      let i18n_1;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_5028777105388019087$$LIBS_BOOKINGS_SRC_LIB_LOCKER_SELECT_MODAL_LOCKER_FILTERS_COMPONENT_TS_1 = goog.getMsg("Details");
        i18n_1 = MSG_EXTERNAL_5028777105388019087$$LIBS_BOOKINGS_SRC_LIB_LOCKER_SELECT_MODAL_LOCKER_FILTERS_COMPONENT_TS_1;
      } else {
        i18n_1 = $localize`:␟4f8b2bb476981727ab34ed40fde1218361f92c45␟5028777105388019087:Details`;
      }
      let i18n_2;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_471816275243265264$$LIBS_BOOKINGS_SRC_LIB_LOCKER_SELECT_MODAL_LOCKER_FILTERS_COMPONENT_TS_2 = goog.getMsg("Location");
        i18n_2 = MSG_EXTERNAL_471816275243265264$$LIBS_BOOKINGS_SRC_LIB_LOCKER_SELECT_MODAL_LOCKER_FILTERS_COMPONENT_TS_2;
      } else {
        i18n_2 = $localize`:␟ed31c09fd77c36238c13d83635f3fe5294c733d2␟471816275243265264:Location`;
      }
      let i18n_3;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_3973931101896534797$$LIBS_BOOKINGS_SRC_LIB_LOCKER_SELECT_MODAL_LOCKER_FILTERS_COMPONENT_TS_3 = goog.getMsg("Date");
        i18n_3 = MSG_EXTERNAL_3973931101896534797$$LIBS_BOOKINGS_SRC_LIB_LOCKER_SELECT_MODAL_LOCKER_FILTERS_COMPONENT_TS_3;
      } else {
        i18n_3 = $localize`:␟2f933b826a570836cab04f683970a2d22068458c␟3973931101896534797:Date`;
      }
      let i18n_4;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_5010873675481014004$$LIBS_BOOKINGS_SRC_LIB_LOCKER_SELECT_MODAL_LOCKER_FILTERS_COMPONENT_TS_4 = goog.getMsg(" {$interpolation} ", {
          "interpolation": "\uFFFD0\uFFFD"
        }, {
          original_code: {
            "interpolation": "{{ 'COMMON.FAVOURITES' | translate }}"
          }
        });
        i18n_4 = MSG_EXTERNAL_5010873675481014004$$LIBS_BOOKINGS_SRC_LIB_LOCKER_SELECT_MODAL_LOCKER_FILTERS_COMPONENT_TS_4;
      } else {
        i18n_4 = $localize`:␟bde3d9fd949ba4c6014b8e64c1362753bca1cf0c␟5010873675481014004: ${"\uFFFD0\uFFFD"}:INTERPOLATION: `;
      }
      let i18n_5;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_7993989716494624155$$LIBS_BOOKINGS_SRC_LIB_LOCKER_SELECT_MODAL_LOCKER_FILTERS_COMPONENT_TS_5 = goog.getMsg(" {$interpolation} ", {
          "interpolation": "\uFFFD0\uFFFD"
        }, {
          original_code: {
            "interpolation": "{{ 'LOCKERS.SHOW_FAVOURITES' | translate }}"
          }
        });
        i18n_5 = MSG_EXTERNAL_7993989716494624155$$LIBS_BOOKINGS_SRC_LIB_LOCKER_SELECT_MODAL_LOCKER_FILTERS_COMPONENT_TS_5;
      } else {
        i18n_5 = $localize`:␟d73a29823cb90d2c49c4f6ee3dc0cbad14a63586␟7993989716494624155: ${"\uFFFD0\uFFFD"}:INTERPOLATION: `;
      }
      let i18n_6;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_8264413387051126615$$LIBS_BOOKINGS_SRC_LIB_LOCKER_SELECT_MODAL_LOCKER_FILTERS_COMPONENT_TS_6 = goog.getMsg("Any Region");
        i18n_6 = MSG_EXTERNAL_8264413387051126615$$LIBS_BOOKINGS_SRC_LIB_LOCKER_SELECT_MODAL_LOCKER_FILTERS_COMPONENT_TS_6;
      } else {
        i18n_6 = $localize`:␟130845b58eba8e50c98f3fba117a0168cdba4f31␟8264413387051126615:Any Region`;
      }
      let i18n_7;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_7323982518822503502$$LIBS_BOOKINGS_SRC_LIB_LOCKER_SELECT_MODAL_LOCKER_FILTERS_COMPONENT_TS_7 = goog.getMsg("Any Level");
        i18n_7 = MSG_EXTERNAL_7323982518822503502$$LIBS_BOOKINGS_SRC_LIB_LOCKER_SELECT_MODAL_LOCKER_FILTERS_COMPONENT_TS_7;
      } else {
        i18n_7 = $localize`:␟50407595967bf29832e873b41f9de3502d5c3e03␟7323982518822503502:Any Level`;
      }
      let i18n_8;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_835486935962207481$$LIBS_BOOKINGS_SRC_LIB_LOCKER_SELECT_MODAL_LOCKER_FILTERS_COMPONENT_TS_8 = goog.getMsg(" All Day ");
        i18n_8 = MSG_EXTERNAL_835486935962207481$$LIBS_BOOKINGS_SRC_LIB_LOCKER_SELECT_MODAL_LOCKER_FILTERS_COMPONENT_TS_8;
      } else {
        i18n_8 = $localize`:␟d7f43e20f3a729fa3de32bc7a1f709ccd722eae5␟835486935962207481: All Day `;
      }
      let i18n_9;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_4204880191779081093$$LIBS_BOOKINGS_SRC_LIB_LOCKER_SELECT_MODAL_LOCKER_FILTERS_COMPONENT_TS_9 = goog.getMsg("Start Time");
        i18n_9 = MSG_EXTERNAL_4204880191779081093$$LIBS_BOOKINGS_SRC_LIB_LOCKER_SELECT_MODAL_LOCKER_FILTERS_COMPONENT_TS_9;
      } else {
        i18n_9 = $localize`:␟7c0a71d337783e527c1c8e91e433b301c5b1d8a8␟4204880191779081093:Start Time`;
      }
      let i18n_10;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_3845185958891849368$$LIBS_BOOKINGS_SRC_LIB_LOCKER_SELECT_MODAL_LOCKER_FILTERS_COMPONENT_TS_10 = goog.getMsg("End Time");
        i18n_10 = MSG_EXTERNAL_3845185958891849368$$LIBS_BOOKINGS_SRC_LIB_LOCKER_SELECT_MODAL_LOCKER_FILTERS_COMPONENT_TS_10;
      } else {
        i18n_10 = $localize`:␟e1f10d9bf4d3c37490cd5bf82007444ae7af46b1␟3845185958891849368:End Time`;
      }
      let i18n_11;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_8650499415827640724$$LIBS_BOOKINGS_SRC_LIB_LOCKER_SELECT_MODAL_LOCKER_FILTERS_COMPONENT_TS_11 = goog.getMsg("Type");
        i18n_11 = MSG_EXTERNAL_8650499415827640724$$LIBS_BOOKINGS_SRC_LIB_LOCKER_SELECT_MODAL_LOCKER_FILTERS_COMPONENT_TS_11;
      } else {
        i18n_11 = $localize`:␟f61c6867295f3b53d23557021f2f4e0aa1d0b8fc␟8650499415827640724:Type`;
      }
      let i18n_12;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_2296888311792137027$$LIBS_BOOKINGS_SRC_LIB_LOCKER_SELECT_MODAL_LOCKER_FILTERS_COMPONENT_TS_12 = goog.getMsg(" Apply Filters ");
        i18n_12 = MSG_EXTERNAL_2296888311792137027$$LIBS_BOOKINGS_SRC_LIB_LOCKER_SELECT_MODAL_LOCKER_FILTERS_COMPONENT_TS_12;
      } else {
        i18n_12 = $localize`:␟c17e2cc448524a39eb83b2937cea3235a2e8bf37␟2296888311792137027: Apply Filters `;
      }
      return [i18n_0, i18n_1, i18n_2, i18n_3, i18n_4, i18n_5, i18n_8, i18n_9, i18n_10, i18n_11, i18n_12, [1, "flex", "rounded-t-md", "items-center", "border-b", "border-base-200", "pb-2", "sm:hidden"], [1, "flex-1", "pl-2"], ["icon", "", "matRipple", "", "name", "close-locker-filters", "class", "sm:hidden", 3, "click", 4, "ngIf"], [1, "font-medium", "flex-2", "text-center"], [1, "flex-1"], [1, "max-h-[65vh]", "p-2", "overflow-y-auto", "overflow-x-hidden", "divide-y", "divide-base-200", "w-full", "max-w-[100vw]", "sm:max-w-[30vw]", 3, "formGroup"], ["details", ""], [1, "text-lg", "font-medium", "mb-1"], [1, "flex-1", "min-w-[8rem]", "flex", "flex-col"], ["for", "location"], ["appearance", "outline", "class", "w-full", 4, "ngIf"], [1, "flex-1", "min-w-[256px]"], ["name", "date", "formControlName", "date", 3, "to"], ["class", "flex justify-end -mt-2 mb-2", 4, "ngIf"], ["class", "flex items-center space-x-2", 4, "ngIf"], ["favs", "", 1, "space-y-2", "pb-4"], [1, "text-lg", "font-medium"], [1, "flex", "items-center"], ["for", "fav", 1, "flex-1", "w-1/2"], ["name", "fav", 3, "ngModelChange", "ngModel", "ngModelOptions"], ["class", "space-y-2", "features", "", 4, "ngIf"], ["class", "px-2 py-2 w-full border-t border-base-200", 4, "ngIf"], ["icon", "", "matRipple", "", "name", "close-locker-filters", 1, "sm:hidden", 3, "click"], ["appearance", "outline", 1, "w-full"], ["name", "region", "placeholder", i18n_6, 3, "ngModelChange", "ngModel", "ngModelOptions"], [3, "value", 4, "ngFor", "ngForOf"], [3, "value"], ["name", "building", 3, "ngModelChange", "ngModel", "ngModelOptions", "placeholder"], ["name", "location", "placeholder", i18n_7, 3, "ngModelChange", "ngModel", "ngModelOptions"], [1, "flex", "flex-col-reverse"], ["class", "opacity-30 text-xs", 4, "ngIf"], [1, "opacity-30", "text-xs"], [1, "opacity-0"], [1, "flex", "justify-end", "-mt-2", "mb-2"], ["formControlName", "all_day"], [1, "flex", "items-center", "space-x-2"], [1, "flex-1", "w-1/3"], ["name", "start-time", 3, "ngModelChange", "ngModel", "ngModelOptions", "use_24hr"], ["formControlName", "duration", 3, "time", "max", "min", "step", "use_24hr"], ["features", "", 1, "space-y-2"], ["class", "flex items-center flex-wrap space-x-2", 4, "ngFor", "ngForOf"], [1, "flex", "items-center", "flex-wrap", "space-x-2"], ["for", "feat", 1, "flex-1", "w-1/2"], [3, "ngModelChange", "ngModel", "ngModelOptions"], [1, "px-2", "py-2", "w-full", "border-t", "border-base-200"], ["btn", "", "matRipple", "", "name", "apply-locker-filters", 1, "w-full", 3, "click"]];
    },
    template: function LockerFiltersComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](0, "div", 11)(1, "div", 12);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtemplate"](2, LockerFiltersComponent_button_2_Template, 3, 0, "button", 13);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](3, "h3", 14);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵi18n"](4, 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelement"](5, "div", 15);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](6, "form", 16)(7, "section", 17)(8, "h2", 18);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵi18n"](9, 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](10, "div", 19)(11, "label", 20);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵi18n"](12, 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtemplate"](13, LockerFiltersComponent_mat_form_field_13_Template, 4, 6, "mat-form-field", 21);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipe"](14, "async");
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtemplate"](15, LockerFiltersComponent_mat_form_field_15_Template, 7, 13, "mat-form-field", 21);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipe"](16, "async");
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtemplate"](17, LockerFiltersComponent_mat_form_field_17_Template, 5, 8, "mat-form-field", 21);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](18, "div", 22)(19, "label");
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵi18n"](20, 3);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](21, "a-date-field", 23);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](22);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipe"](23, "translate");
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtemplate"](24, LockerFiltersComponent_div_24_Template, 3, 0, "div", 24)(25, LockerFiltersComponent_div_25_Template, 9, 9, "div", 25);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](26, "section", 26)(27, "h2", 27);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵi18n"](28, 4);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipe"](29, "translate");
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](30, "div", 28)(31, "div", 29);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵi18n"](32, 5);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipe"](33, "translate");
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](34, "mat-checkbox", 30);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipe"](35, "async");
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵlistener"]("ngModelChange", function LockerFiltersComponent_Template_mat_checkbox_ngModelChange_34_listener($event) {
          return ctx.setOptions({
            show_fav: $event
          });
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]()()();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtemplate"](36, LockerFiltersComponent_section_36_Template, 5, 3, "section", 31);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipe"](37, "async");
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtemplate"](38, LockerFiltersComponent_div_38_Template, 3, 0, "div", 32);
      }
      if (rf & 2) {
        let tmp_2_0;
        let tmp_3_0;
        let tmp_13_0;
        let tmp_15_0;
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngIf", ctx.can_close);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](4);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("formGroup", ctx.form);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](7);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngIf", ctx.use_region && ((tmp_2_0 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipeBind1"](14, 15, ctx.regions)) == null ? null : tmp_2_0.length));
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngIf", !ctx.use_region && ((tmp_3_0 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipeBind1"](16, 17, ctx.buildings)) == null ? null : tmp_3_0.length) > 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngIf", !ctx.hide_levels);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](4);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("to", ctx.end_date);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipeBind1"](23, 19, "FORM.DATE_ERROR"), " ");
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngIf", ctx.allow_all_day);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngIf", !ctx.form.value.all_day);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](4);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵi18nExp"](_angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipeBind1"](29, 21, "COMMON.FAVOURITES"));
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵi18nApply"](28);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](4);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵi18nExp"](_angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipeBind1"](33, 23, "LOCKERS.SHOW_FAVOURITES"));
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵi18nApply"](32);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngModel", (tmp_13_0 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipeBind1"](35, 25, ctx.options)) == null ? null : tmp_13_0.show_fav)("ngModelOptions", _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpureFunction0"](29, _c0));
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngIf", (tmp_15_0 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipeBind1"](37, 27, ctx.features)) == null ? null : tmp_15_0.length);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngIf", ctx.can_close);
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_14__.NgForOf, _angular_common__WEBPACK_IMPORTED_MODULE_14__.NgIf, _angular_forms__WEBPACK_IMPORTED_MODULE_15__["ɵNgNoValidate"], _angular_forms__WEBPACK_IMPORTED_MODULE_15__.NgControlStatus, _angular_forms__WEBPACK_IMPORTED_MODULE_15__.NgControlStatusGroup, _angular_forms__WEBPACK_IMPORTED_MODULE_15__.NgModel, _angular_forms__WEBPACK_IMPORTED_MODULE_15__.FormGroupDirective, _angular_forms__WEBPACK_IMPORTED_MODULE_15__.FormControlName, _angular_material_form_field__WEBPACK_IMPORTED_MODULE_16__.MatFormField, _angular_material_checkbox__WEBPACK_IMPORTED_MODULE_17__.MatCheckbox, _angular_material_core__WEBPACK_IMPORTED_MODULE_18__.MatOption, _form_fields_src_lib_date_field_component__WEBPACK_IMPORTED_MODULE_3__.DateFieldComponent, _form_fields_src_lib_duration_field_component__WEBPACK_IMPORTED_MODULE_4__.DurationFieldComponent, _form_fields_src_lib_time_field_component__WEBPACK_IMPORTED_MODULE_5__.TimeFieldComponent, _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_6__.IconComponent, _angular_material_select__WEBPACK_IMPORTED_MODULE_19__.MatSelect, _angular_material_core__WEBPACK_IMPORTED_MODULE_18__.MatRipple, _angular_common__WEBPACK_IMPORTED_MODULE_14__.AsyncPipe, _components_src_lib_building_pipe__WEBPACK_IMPORTED_MODULE_7__.BuildingPipe, _ngx_translate_core__WEBPACK_IMPORTED_MODULE_20__.TranslatePipe],
    styles: ["[_nghost-%COMP%] {\n                display: flex;\n                flex-direction: column;\n                width: 100%;\n                max-width: 100vw;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxvY2tlci1maWx0ZXJzLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1lBQ1k7Z0JBQ0ksYUFBYTtnQkFDYixzQkFBc0I7Z0JBQ3RCLFdBQVc7Z0JBQ1gsZ0JBQWdCO1lBQ3BCIiwiZmlsZSI6ImxvY2tlci1maWx0ZXJzLmNvbXBvbmVudC50cyIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgOmhvc3Qge1xuICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICAgICAgICBtYXgtd2lkdGg6IDEwMHZ3O1xuICAgICAgICAgICAgfVxuICAgICAgICAiXX0= */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvYm9va2luZ3Mvc3JjL2xpYi9sb2NrZXItc2VsZWN0LW1vZGFsL2xvY2tlci1maWx0ZXJzLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1lBQ1k7Z0JBQ0ksYUFBYTtnQkFDYixzQkFBc0I7Z0JBQ3RCLFdBQVc7Z0JBQ1gsZ0JBQWdCO1lBQ3BCOztBQUVaLG9qQkFBb2pCIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICA6aG9zdCB7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgICAgIG1heC13aWR0aDogMTAwdnc7XG4gICAgICAgICAgICB9XG4gICAgICAgICJdLCJzb3VyY2VSb290IjoiIn0= */"]
  });
}

/***/ }),

/***/ 38720:
/*!***************************************************************************!*\
  !*** ./libs/bookings/src/lib/locker-select-modal/locker-map.component.ts ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   LockerMapComponent: () => (/* binding */ LockerMapComponent)
/* harmony export */ });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! rxjs/operators */ 35443);
/* harmony import */ var _booking_form_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../booking-form.service */ 18379);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! rxjs */ 68824);
/* harmony import */ var libs_explore_src_lib_explore_spaces_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! libs/explore/src/lib/explore-spaces.service */ 65897);
/* harmony import */ var libs_explore_src_lib_explore_locker_bank_info_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! libs/explore/src/lib/explore-locker-bank-info.component */ 84810);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @angular/forms */ 34456);
/* harmony import */ var _angular_material_form_field__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @angular/material/form-field */ 24950);
/* harmony import */ var _angular_material_core__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @angular/material/core */ 74646);
/* harmony import */ var _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../components/src/lib/icon.component */ 69434);
/* harmony import */ var _components_src_lib_interactive_map_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../components/src/lib/interactive-map.component */ 24918);
/* harmony import */ var _angular_material_select__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @angular/material/select */ 25175);

















const _c0 = () => ({
  standalone: true
});
function LockerMapComponent_mat_option_7_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](0, "mat-option", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const lvl_r1 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("value", lvl_r1);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtextInterpolate1"](" ", lvl_r1.display_name || lvl_r1.name, " ");
  }
}
class LockerMapComponent extends _placeos_common__WEBPACK_IMPORTED_MODULE_0__.AsyncHandler {
  get map_url() {
    return this.level?.map_id || '';
  }
  constructor(_state, _settings) {
    super();
    this._state = _state;
    this._settings = _settings;
    this.is_displayed = false;
    this.onSelect = new _angular_core__WEBPACK_IMPORTED_MODULE_6__.EventEmitter();
    this.lockers = this._state.available_resources;
    this.loading = this._state.loading;
    this.zoom = 1;
    this.center = {
      x: 0.5,
      y: 0.5
    };
    this.setOptions = o => this._state.setOptions(o);
    this.levels = this._state.available_resources.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.map)(lockers => (0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.unique)(lockers.map(locker => locker.zone), 'id')));
    this.actions = this._state.available_resources.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.map)(lockers => lockers.map(locker => ({
      id: locker.map_id || locker.id,
      action: ['touchend', 'mouseup'],
      callback: () => this.selectLocker(locker)
    }))));
    this.features = this._state.resources.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.map)(lockers => {
      return this._settings.get('app.lockers.hide_user') ? [] : lockers.map(locker => ({
        location: locker.id,
        content: libs_explore_src_lib_explore_locker_bank_info_component__WEBPACK_IMPORTED_MODULE_3__.ExploreLockerBankInfoComponent,
        full_size: true,
        no_scale: true,
        data: {
          id: locker.map_id || locker.id,
          map_id: locker.name,
          name: locker.name || locker.map_id,
          user: this._state.resourceUserName(locker.id)
        },
        z_index: 20
      }));
    }));
    this.styles = (0,rxjs__WEBPACK_IMPORTED_MODULE_8__.combineLatest)([this._state.resources, this._state.available_resources]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.map)(([lockers, free_lockers]) => lockers.reduce((styles, locker) => {
      const colours = this._settings.get('app.explore.colors') || {};
      const status = free_lockers.find(_ => _.id === locker.id) ? 'free' : 'busy';
      styles[`#${locker.map_id || locker.id}`] = {
        fill: colours[`locker-${status}`] || colours[`${status}`] || libs_explore_src_lib_explore_spaces_service__WEBPACK_IMPORTED_MODULE_2__.DEFAULT_COLOURS[`${status}`]
      };
      return styles;
    }, {})));
  }
  ngOnInit() {
    this.subscription('levels_update', this.levels.subscribe(levels => {
      if (!levels.find(_ => _.id === this.level?.id)) {
        this.level = levels[0];
      }
    }));
  }
  selectLocker(locker) {
    this.onSelect.emit(locker);
  }
  setZoom(new_zoom) {
    this.zoom = Math.max(0.5, Math.min(10, new_zoom));
  }
  resetMap() {
    this.zoom = 1;
    this.center = {
      x: 0.5,
      y: 0.5
    };
  }
  static #_ = this.ɵfac = function LockerMapComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || LockerMapComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵdirectiveInject"](_booking_form_service__WEBPACK_IMPORTED_MODULE_1__.BookingFormService), _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵdirectiveInject"](_placeos_common__WEBPACK_IMPORTED_MODULE_0__.SettingsService));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵdefineComponent"]({
    type: LockerMapComponent,
    selectors: [["locker-map"]],
    inputs: {
      is_displayed: "is_displayed"
    },
    outputs: {
      onSelect: "onSelect"
    },
    features: [_angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵInheritDefinitionFeature"]],
    decls: 21,
    vars: 18,
    consts: [[3, "zoomChange", "centerChange", "src", "zoom", "center", "features", "styles", "actions"], [1, "absolute", "inset-x-0", "top-0", "bg-base-100", "p-2", "border-b", "border-base-200"], ["levels", "", "appearance", "outline", 1, "w-full", "h-[3.25rem]"], [3, "ngModelChange", "ngModel", "ngModelOptions"], [3, "value", 4, "ngFor", "ngForOf"], ["zoom", "", 1, "absolute", "bottom-2", "right-2", "rounded-lg", "border", "border-base-200", "bg-base-100", "flex", "flex-col", "overflow-hidden"], ["zoom-in", "", "icon", "", "matRipple", "", 3, "click"], [1, "border-t", "border-base-200", "w-full"], ["zoom-out", "", "icon", "", "matRipple", "", 3, "click"], ["reset", "", "icon", "", "matRipple", "", 3, "click"], [3, "value"]],
    template: function LockerMapComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](0, "interactive-map", 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpipe"](1, "async");
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpipe"](2, "async");
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpipe"](3, "async");
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtwoWayListener"]("zoomChange", function LockerMapComponent_Template_interactive_map_zoomChange_0_listener($event) {
          _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtwoWayBindingSet"](ctx.zoom, $event) || (ctx.zoom = $event);
          return $event;
        })("centerChange", function LockerMapComponent_Template_interactive_map_centerChange_0_listener($event) {
          _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtwoWayBindingSet"](ctx.center, $event) || (ctx.center = $event);
          return $event;
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](4, "div", 1)(5, "mat-form-field", 2)(6, "mat-select", 3);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtwoWayListener"]("ngModelChange", function LockerMapComponent_Template_mat_select_ngModelChange_6_listener($event) {
          _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtwoWayBindingSet"](ctx.level, $event) || (ctx.level = $event);
          return $event;
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtemplate"](7, LockerMapComponent_mat_option_7_Template, 2, 2, "mat-option", 4);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpipe"](8, "async");
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]()()();
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](9, "div", 5)(10, "button", 6);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵlistener"]("click", function LockerMapComponent_Template_button_click_10_listener() {
          return ctx.setZoom(ctx.zoom * 1.1);
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](11, "app-icon");
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](12, "zoom_in");
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelement"](13, "div", 7);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](14, "button", 8);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵlistener"]("click", function LockerMapComponent_Template_button_click_14_listener() {
          return ctx.setZoom(ctx.zoom * (1 / 1.1));
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](15, "app-icon");
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](16, "zoom_out");
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelement"](17, "div", 7);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](18, "button", 9);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵlistener"]("click", function LockerMapComponent_Template_button_click_18_listener() {
          return ctx.resetMap();
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](19, "app-icon");
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](20, "refresh");
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]()()();
      }
      if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("src", ctx.map_url);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtwoWayProperty"]("zoom", ctx.zoom)("center", ctx.center);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("features", _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpipeBind1"](1, 9, ctx.features))("styles", _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpipeBind1"](2, 11, ctx.styles))("actions", _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpipeBind1"](3, 13, ctx.actions));
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](6);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtwoWayProperty"]("ngModel", ctx.level);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("ngModelOptions", _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpureFunction0"](17, _c0));
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("ngForOf", _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpipeBind1"](8, 15, ctx.levels));
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_9__.NgForOf, _angular_forms__WEBPACK_IMPORTED_MODULE_10__.NgControlStatus, _angular_forms__WEBPACK_IMPORTED_MODULE_10__.NgModel, _angular_material_form_field__WEBPACK_IMPORTED_MODULE_11__.MatFormField, _angular_material_core__WEBPACK_IMPORTED_MODULE_12__.MatOption, _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_4__.IconComponent, _components_src_lib_interactive_map_component__WEBPACK_IMPORTED_MODULE_5__.InteractiveMapComponent, _angular_material_select__WEBPACK_IMPORTED_MODULE_13__.MatSelect, _angular_material_core__WEBPACK_IMPORTED_MODULE_12__.MatRipple, _angular_common__WEBPACK_IMPORTED_MODULE_9__.AsyncPipe],
    styles: ["[_nghost-%COMP%] {\n                position: relative;\n                background: rgba(0, 0, 0, 0.05);\n                padding-top: 4rem;\n            }\n\n            button[_ngcontent-%COMP%] {\n                border-radius: 0;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxvY2tlci1tYXAuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxrQkFBa0I7Z0JBQ2xCLCtCQUErQjtnQkFDL0IsaUJBQWlCO1lBQ3JCOztZQUVBO2dCQUNJLGdCQUFnQjtZQUNwQiIsImZpbGUiOiJsb2NrZXItbWFwLmNvbXBvbmVudC50cyIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgOmhvc3Qge1xuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiByZ2JhKDAsIDAsIDAsIDAuMDUpO1xuICAgICAgICAgICAgICAgIHBhZGRpbmctdG9wOiA0cmVtO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBidXR0b24ge1xuICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICJdfQ== */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvYm9va2luZ3Mvc3JjL2xpYi9sb2NrZXItc2VsZWN0LW1vZGFsL2xvY2tlci1tYXAuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxrQkFBa0I7Z0JBQ2xCLCtCQUErQjtnQkFDL0IsaUJBQWlCO1lBQ3JCOztZQUVBO2dCQUNJLGdCQUFnQjtZQUNwQjs7QUFFWixncEJBQWdwQiIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgOmhvc3Qge1xuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiByZ2JhKDAsIDAsIDAsIDAuMDUpO1xuICAgICAgICAgICAgICAgIHBhZGRpbmctdG9wOiA0cmVtO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBidXR0b24ge1xuICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICJdLCJzb3VyY2VSb290IjoiIn0= */"]
  });
}

/***/ }),

/***/ 90482:
/*!************************************************************************************!*\
  !*** ./libs/bookings/src/lib/locker-select-modal/locker-select-modal.component.ts ***!
  \************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   FAV_LOCKER_KEY: () => (/* binding */ FAV_LOCKER_KEY),
/* harmony export */   LockerSelectModalComponent: () => (/* binding */ LockerSelectModalComponent)
/* harmony export */ });
/* harmony import */ var _angular_material_dialog__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @angular/material/dialog */ 12587);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var _booking_form_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../booking-form.service */ 18379);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../components/src/lib/icon.component */ 69434);
/* harmony import */ var _angular_material_core__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @angular/material/core */ 74646);
/* harmony import */ var _locker_grid_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../locker-grid.component */ 84854);
/* harmony import */ var _locker_filters_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./locker-filters.component */ 22657);
/* harmony import */ var _locker_filters_display_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./locker-filters-display.component */ 42394);
/* harmony import */ var _locker_bank_list_component__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./locker-bank-list.component */ 90647);
/* harmony import */ var _locker_map_component__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./locker-map.component */ 38720);















function LockerSelectModalComponent_ng_container_16_locker_bank_list_1_Template(rf, ctx) {
  if (rf & 1) {
    const _r2 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](0, "locker-bank-list", 32);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵlistener"]("toggleFav", function LockerSelectModalComponent_ng_container_16_locker_bank_list_1_Template_locker_bank_list_toggleFav_0_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵrestoreView"](_r2);
      const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"](2);
      return _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵresetView"](ctx_r2.toggleFavourite($event));
    })("onSelect", function LockerSelectModalComponent_ng_container_16_locker_bank_list_1_Template_locker_bank_list_onSelect_0_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵrestoreView"](_r2);
      const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"](2);
      return _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵresetView"](ctx_r2.bank = $event);
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("active", ctx_r2.displayed == null ? null : ctx_r2.displayed.id)("selected", ctx_r2.selected_ids)("favorites", ctx_r2.favorites);
  }
}
function LockerSelectModalComponent_ng_container_16_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtemplate"](1, LockerSelectModalComponent_ng_container_16_locker_bank_list_1_Template, 1, 3, "locker-bank-list", 31);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementContainerEnd"]();
  }
  if (rf & 2) {
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"]();
    const map_view_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵreference"](39);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngIf", ctx_r2.view === "list")("ngIfElse", map_view_r4);
  }
}
function LockerSelectModalComponent_button_18_Template(rf, ctx) {
  if (rf & 1) {
    const _r5 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](0, "button", 33);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵlistener"]("click", function LockerSelectModalComponent_button_18_Template_button_click_0_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵrestoreView"](_r5);
      const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵresetView"](ctx_r2.displayed = null);
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵi18n"](1, 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
  }
}
function LockerSelectModalComponent_button_31_Template(rf, ctx) {
  if (rf & 1) {
    const _r6 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](0, "button", 34);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵlistener"]("click", function LockerSelectModalComponent_button_31_Template_button_click_0_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵrestoreView"](_r6);
      const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"]();
      ctx_r2.bank = null;
      return _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵresetView"](ctx_r2.displayed = null);
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](1, " Return ");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
  }
}
function LockerSelectModalComponent_ng_template_38_Template(rf, ctx) {
  if (rf & 1) {
    const _r7 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](0, "locker-map", 35);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵlistener"]("onSelect", function LockerSelectModalComponent_ng_template_38_Template_locker_map_onSelect_0_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵrestoreView"](_r7);
      const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵresetView"](ctx_r2.displayed = $event);
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("is_displayed", !!ctx_r2.displayed);
  }
}
function LockerSelectModalComponent_ng_template_40_Template(rf, ctx) {
  if (rf & 1) {
    const _r8 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](0, "locker-grid", 36);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵlistener"]("clicked", function LockerSelectModalComponent_ng_template_40_Template_locker_grid_clicked_0_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵrestoreView"](_r8);
      const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵresetView"](ctx_r2.displayed = $event);
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("bank", ctx_r2.bank)("selected", ctx_r2.displayed == null ? null : ctx_r2.displayed.id);
  }
}
const FAV_LOCKER_KEY = 'favourite_lockers';
class LockerSelectModalComponent {
  get selected_ids() {
    return this.selected.map(_ => _.id).join(',');
  }
  get favorites() {
    return this._settings.get(FAV_LOCKER_KEY) || [];
  }
  constructor(_dialog_ref, _settings, _event_form, _data) {
    this._dialog_ref = _dialog_ref;
    this._settings = _settings;
    this._event_form = _event_form;
    this._data = _data;
    this.selected = [];
    this.view = 'list';
    this.bank = null;
    this.selected = [...(_data.items || [])];
    this._event_form.setOptions(_data.options);
  }
  isSelected(id) {
    return id && this.selected_ids.includes(id);
  }
  setSelected(item, state) {
    const list = this.selected.filter(_ => _.id !== item.id);
    if (state) list.push(item);
    this.selected = list;
    if (!this._data.options.group && state) this._dialog_ref.close([item]);
  }
  toggleFavourite(item) {
    const fav_list = this.favorites;
    const new_state = !fav_list.includes(item.id);
    if (new_state) {
      this._settings.saveUserSetting(FAV_LOCKER_KEY, [...fav_list, item.id]);
    } else {
      this._settings.saveUserSetting(FAV_LOCKER_KEY, fav_list.filter(_ => _ !== item.id));
    }
  }
  static #_ = this.ɵfac = function LockerSelectModalComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || LockerSelectModalComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵdirectiveInject"](_angular_material_dialog__WEBPACK_IMPORTED_MODULE_9__.MatDialogRef), _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵdirectiveInject"](_placeos_common__WEBPACK_IMPORTED_MODULE_0__.SettingsService), _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵdirectiveInject"](_booking_form_service__WEBPACK_IMPORTED_MODULE_1__.BookingFormService), _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵdirectiveInject"](_angular_material_dialog__WEBPACK_IMPORTED_MODULE_9__.MAT_DIALOG_DATA));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵdefineComponent"]({
    type: LockerSelectModalComponent,
    selectors: [["locker-select-modal"]],
    decls: 42,
    vars: 20,
    consts: () => {
      let i18n_0;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_6506914875226692064$$LIBS_BOOKINGS_SRC_LIB_LOCKER_SELECT_MODAL_LOCKER_SELECT_MODAL_COMPONENT_TS_0 = goog.getMsg("Find Locker");
        i18n_0 = MSG_EXTERNAL_6506914875226692064$$LIBS_BOOKINGS_SRC_LIB_LOCKER_SELECT_MODAL_LOCKER_SELECT_MODAL_COMPONENT_TS_0;
      } else {
        i18n_0 = $localize`:␟a97cf1d9e290adb3e67030e67ae6cc914390a70d␟6506914875226692064:Find Locker`;
      }
      let i18n_1;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_8443571736703532556$$LIBS_BOOKINGS_SRC_LIB_LOCKER_SELECT_MODAL_LOCKER_SELECT_MODAL_COMPONENT_TS_1 = goog.getMsg(" View List ");
        i18n_1 = MSG_EXTERNAL_8443571736703532556$$LIBS_BOOKINGS_SRC_LIB_LOCKER_SELECT_MODAL_LOCKER_SELECT_MODAL_COMPONENT_TS_1;
      } else {
        i18n_1 = $localize`:␟30d3439b0e0095fe69503245f3bd7a2e9498be7c␟8443571736703532556: View List `;
      }
      let i18n_2;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_819716823718458903$$LIBS_BOOKINGS_SRC_LIB_LOCKER_SELECT_MODAL_LOCKER_SELECT_MODAL_COMPONENT_TS_2 = goog.getMsg("Back to form");
        i18n_2 = MSG_EXTERNAL_819716823718458903$$LIBS_BOOKINGS_SRC_LIB_LOCKER_SELECT_MODAL_LOCKER_SELECT_MODAL_COMPONENT_TS_2;
      } else {
        i18n_2 = $localize`:␟18843b85d1a4f17fefafd07bc5cde636dca44295␟819716823718458903:Back to form`;
      }
      let i18n_3;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_3218631102043895117$$LIBS_BOOKINGS_SRC_LIB_LOCKER_SELECT_MODAL_LOCKER_SELECT_MODAL_COMPONENT_TS_3 = goog.getMsg(" {$interpolation} locker(s) added ", {
          "interpolation": "\uFFFD0\uFFFD"
        }, {
          original_code: {
            "interpolation": "{{ selected.length }}"
          }
        });
        i18n_3 = MSG_EXTERNAL_3218631102043895117$$LIBS_BOOKINGS_SRC_LIB_LOCKER_SELECT_MODAL_LOCKER_SELECT_MODAL_COMPONENT_TS_3;
      } else {
        i18n_3 = $localize`:␟613a2ac6bcd89376b2b66c414f54a2120304f542␟3218631102043895117: ${"\uFFFD0\uFFFD"}:INTERPOLATION: locker(s) added `;
      }
      let i18n_4;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_7444538929505592211$$LIBS_BOOKINGS_SRC_LIB_LOCKER_SELECT_MODAL_LOCKER_SELECT_MODAL_COMPONENT_TS_4 = goog.getMsg(" {$interpolation} ", {
          "interpolation": "\uFFFD0\uFFFD"
        }, {
          original_code: {
            "interpolation": "{{\n                                    isSelected(displayed?.id)\n                                        ? 'Remove from Booking'\n                                        : 'Add to booking'\n                                }}"
          }
        });
        i18n_4 = MSG_EXTERNAL_7444538929505592211$$LIBS_BOOKINGS_SRC_LIB_LOCKER_SELECT_MODAL_LOCKER_SELECT_MODAL_COMPONENT_TS_4;
      } else {
        i18n_4 = $localize`:␟b175289321a7bd20ba6e53bafb26c0604ecec7e5␟7444538929505592211: ${"\uFFFD0\uFFFD"}:INTERPOLATION: `;
      }
      let i18n_5;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_874721418273731876$$LIBS_BOOKINGS_SRC_LIB_LOCKER_SELECT_MODAL_LOCKER_SELECT_MODAL_COMPONENT_TS_5 = goog.getMsg(" Back ");
        i18n_5 = MSG_EXTERNAL_874721418273731876$$LIBS_BOOKINGS_SRC_LIB_LOCKER_SELECT_MODAL_LOCKER_SELECT_MODAL_COMPONENT_TS_5;
      } else {
        i18n_5 = $localize`:␟ccda1d41ca79703a85a3a598c1d97e040a32b766␟874721418273731876: Back `;
      }
      return [["map_view", ""], ["bank_view", ""], i18n_0, i18n_1, i18n_2, i18n_3, i18n_4, i18n_5, [1, "w-[100vw]", "h-[100vh]", "sm:relative", "sm:w-auto", "sm:h-auto", "flex", "flex-col", "bg-base-100"], [1, "flex", "items-center", "space-x-4", "w-full"], ["icon", "", "mat-dialog-close", "", 1, "bg-base-200"], [1, "hidden", "sm:flex", "items-center", "justify-end", "flex-1"], ["btn", "", "matRipple", "", "name", "view-locker-map", 1, "rounded-l", "rounded-r-none", 3, "click"], ["btn", "", "matRipple", "", "name", "view-locker-list", 1, "rounded-r", "rounded-l-none", 3, "click"], [1, "flex-1", "flex", "items-center", "divide-x", "divide-base-200", "min-h-[65vh]", "h-[65vh]", "sm:max-h-[65vh]", "sm:max-w-[95vw]", "w-full", "overflow-hidden"], [1, "h-full", "hidden", "sm:flex", "max-w-[20rem]", "sm:h-[65vh]", "sm:max-h-full", 3, "hide_levels"], [1, "flex", "flex-col", "items-center", "flex-1", "w-1/2", "h-full", "sm:h-[65vh]"], [1, "w-full", "border-b", "border-base-200", 3, "viewChange", "view"], [4, "ngIf", "ngIfElse"], [1, "flex", "sm:hidden", "flex-col-reverse", "items-center", "justify-end", "px-2", "pt-2", "pb-[5.5rem]", "border-t", "border-base-200", "w-full"], ["btn", "", "matRipple", "", "name", "locker-return", "class", "inverse sm:hidden w-full", 3, "click", 4, "ngIf"], ["btn", "", "matRipple", "", "name", "save-lockers", 1, "w-full", "sm:w-32", "sm:mb-0", 3, "mat-dialog-close"], [1, "hidden", "sm:flex", "items-center", "justify-between", "p-2", "border-t", "border-base-200", "w-full"], ["btn", "", "matRipple", "", "name", "locker-return", 1, "clear", "text-secondary", 3, "mat-dialog-close"], [1, "flex", "items-center"], [1, "text-xl"], [1, "mr-1", "underline"], [1, "opacity-60", "text-sm", "text-center"], ["btn", "", "matRipple", "", "name", "clear-bank", "class", "inverse mr-2 w-32", 3, "click", 4, "ngIf"], ["btn", "", "matRipple", "", "name", "toggle-locker", 3, "click", "disabled"], [1, "mr-1"], ["class", "flex-1 h-1/2 bg-base-200", 3, "active", "selected", "favorites", "toggleFav", "onSelect", 4, "ngIf", "ngIfElse"], [1, "flex-1", "h-1/2", "bg-base-200", 3, "toggleFav", "onSelect", "active", "selected", "favorites"], ["btn", "", "matRipple", "", "name", "locker-return", 1, "inverse", "sm:hidden", "w-full", 3, "click"], ["btn", "", "matRipple", "", "name", "clear-bank", 1, "inverse", "mr-2", "w-32", 3, "click"], [1, "flex-1", "h-1/2", "w-full", 3, "onSelect", "is_displayed"], [1, "max-w-full", "overflow-auto", "flex-1", "h-1/2", "bg-base-200", 3, "clicked", "bank", "selected"]];
    },
    template: function LockerSelectModalComponent_Template(rf, ctx) {
      if (rf & 1) {
        const _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵgetCurrentView"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](0, "div", 8)(1, "header", 9)(2, "button", 10)(3, "app-icon");
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](4, "close");
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](5, "h3");
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵi18n"](6, 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](7, "div", 11)(8, "button", 12);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵlistener"]("click", function LockerSelectModalComponent_Template_button_click_8_listener() {
          _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵrestoreView"](_r1);
          return _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵresetView"](ctx.view = "map");
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](9, " Map ");
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](10, "button", 13);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵlistener"]("click", function LockerSelectModalComponent_Template_button_click_10_listener() {
          _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵrestoreView"](_r1);
          return _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵresetView"](ctx.view = "list");
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](11, " List ");
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]()()();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](12, "main", 14);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelement"](13, "locker-filters", 15);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](14, "div", 16)(15, "locker-filters-display", 17);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtwoWayListener"]("viewChange", function LockerSelectModalComponent_Template_locker_filters_display_viewChange_15_listener($event) {
          _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵrestoreView"](_r1);
          _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtwoWayBindingSet"](ctx.view, $event) || (ctx.view = $event);
          return _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵresetView"]($event);
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtemplate"](16, LockerSelectModalComponent_ng_container_16_Template, 2, 2, "ng-container", 18);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](17, "footer", 19);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtemplate"](18, LockerSelectModalComponent_button_18_Template, 2, 0, "button", 20);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](19, "button", 21);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵi18n"](20, 3);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](21, "footer", 22)(22, "button", 23)(23, "div", 24)(24, "app-icon", 25);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](25, "arrow_back");
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](26, "div", 26);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵi18n"](27, 4);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]()()();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](28, "p", 27);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵi18n"](29, 5);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](30, "div", 24);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtemplate"](31, LockerSelectModalComponent_button_31_Template, 2, 0, "button", 28);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](32, "button", 29);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵlistener"]("click", function LockerSelectModalComponent_Template_button_click_32_listener() {
          _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵrestoreView"](_r1);
          return _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵresetView"](ctx.setSelected(ctx.displayed, !ctx.isSelected(ctx.displayed == null ? null : ctx.displayed.id)));
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](33, "div", 24)(34, "app-icon", 25);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](35);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](36, "div", 30);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵi18n"](37, 6);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]()()()()()();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtemplate"](38, LockerSelectModalComponent_ng_template_38_Template, 1, 1, "ng-template", null, 0, _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtemplateRefExtractor"])(40, LockerSelectModalComponent_ng_template_40_Template, 1, 2, "ng-template", null, 1, _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtemplateRefExtractor"]);
      }
      if (rf & 2) {
        const bank_view_r9 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵreference"](41);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](8);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵclassProp"]("inverse", ctx.view !== "map");
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵclassProp"]("inverse", ctx.view !== "list");
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("hide_levels", ctx.view !== "list");
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtwoWayProperty"]("view", ctx.view);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngIf", !ctx.bank)("ngIfElse", bank_view_r9);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngIf", ctx.displayed);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵclassProp"]("mb-2", ctx.displayed);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("mat-dialog-close", ctx.selected);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("mat-dialog-close", ctx.selected);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](7);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵi18nExp"](ctx.selected.length);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵi18nApply"](29);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngIf", ctx.bank);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵclassProp"]("inverse", ctx.isSelected(ctx.displayed == null ? null : ctx.displayed.id));
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("disabled", !ctx.displayed);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtextInterpolate"](ctx.isSelected(ctx.displayed == null ? null : ctx.displayed.id) ? "remove" : "add");
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵi18nExp"](ctx.isSelected(ctx.displayed == null ? null : ctx.displayed.id) ? "Remove from Booking" : "Add to booking");
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵi18nApply"](37);
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_10__.NgIf, _angular_material_dialog__WEBPACK_IMPORTED_MODULE_9__.MatDialogClose, _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_2__.IconComponent, _angular_material_core__WEBPACK_IMPORTED_MODULE_11__.MatRipple, _locker_grid_component__WEBPACK_IMPORTED_MODULE_3__.LockerGridComponent, _locker_filters_component__WEBPACK_IMPORTED_MODULE_4__.LockerFiltersComponent, _locker_filters_display_component__WEBPACK_IMPORTED_MODULE_5__.LockerFiltersDisplayComponent, _locker_bank_list_component__WEBPACK_IMPORTED_MODULE_6__.LockerBankListComponent, _locker_map_component__WEBPACK_IMPORTED_MODULE_7__.LockerMapComponent],
    encapsulation: 2
  });
}

/***/ }),

/***/ 98796:
/*!**************************************************!*\
  !*** ./libs/bookings/src/lib/lockers.service.ts ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   LockersService: () => (/* binding */ LockersService)
/* harmony export */ });
/* harmony import */ var _home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 89204);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var _placeos_ts_client__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @placeos/ts-client */ 35713);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! rxjs */ 90521);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! rxjs */ 68824);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! rxjs */ 71536);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! rxjs/operators */ 8627);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! rxjs/operators */ 71963);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! rxjs/operators */ 29314);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! rxjs/operators */ 35443);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! rxjs/operators */ 7841);
/* harmony import */ var libs_organisation_src_lib_organisation_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! libs/organisation/src/lib/organisation.service */ 19863);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @angular/core */ 37580);








class LockersService {
  setLevel(level) {
    this._level.next(level);
  }
  constructor(_org) {
    this._org = _org;
    this._level = new rxjs__WEBPACK_IMPORTED_MODULE_4__.BehaviorSubject('');
    this._change = new rxjs__WEBPACK_IMPORTED_MODULE_4__.BehaviorSubject(0);
    this.lockers_banks$ = (0,rxjs__WEBPACK_IMPORTED_MODULE_5__.combineLatest)([this._org.active_building, this._change]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.filter)(([bld]) => !!bld), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.switchMap)(([bld]) => (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_2__.listChildMetadata)(bld.id, {
      name: 'lockers'
    }).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.catchError)(() => (0,rxjs__WEBPACK_IMPORTED_MODULE_9__.of)(new _placeos_ts_client__WEBPACK_IMPORTED_MODULE_2__.PlaceMetadata())))), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.map)(_ => (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.flatten)(_.map(_ => _.metadata.lockers?.details instanceof Array ? _.metadata.lockers?.details.map(bank => ({
      ...bank,
      zone: _.zone
    })) : []))), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_11__.shareReplay)(1));
    this.lockers$ = this.lockers_banks$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.map)(bank_list => {
      const lockers = [];
      for (const bank of bank_list) {
        lockers.push(...bank.lockers.map(_ => ({
          ..._,
          bank_id: bank.id,
          map_id: bank.map_id,
          level_id: bank.zone.id
        })));
      }
      return lockers;
    }));
    this.filtered_lockers$ = (0,rxjs__WEBPACK_IMPORTED_MODULE_5__.combineLatest)([this._level, this.lockers$]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.map)(([level, lockers]) => lockers.filter(_ => (!level || _.level_id === level) && _.bookable)));
  }
  saveLockers(lockers) {
    var _this = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      yield (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_2__.updateMetadata)(_this._org.building.id, {
        name: 'lockers',
        description: '',
        details: lockers
      });
      _this._change.next(Date.now());
    })();
  }
  static #_ = this.ɵfac = function LockersService_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || LockersService)(_angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵinject"](libs_organisation_src_lib_organisation_service__WEBPACK_IMPORTED_MODULE_3__.OrganisationService));
  };
  static #_2 = this.ɵprov = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵdefineInjectable"]({
    token: LockersService,
    factory: LockersService.ɵfac,
    providedIn: 'root'
  });
}

/***/ }),

/***/ 6724:
/*!*********************************************************************************!*\
  !*** ./libs/bookings/src/lib/parking-select-modal/parking-details.component.ts ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ParkingSpaceDetailsComponent: () => (/* binding */ ParkingSpaceDetailsComponent)
/* harmony export */ });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _placeos_components__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/components */ 51588);
/* harmony import */ var _placeos_organisation__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @placeos/organisation */ 2510);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../components/src/lib/icon.component */ 69434);
/* harmony import */ var _components_src_lib_interactive_map_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../components/src/lib/interactive-map.component */ 24918);
/* harmony import */ var _components_src_lib_image_carousel_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../components/src/lib/image-carousel.component */ 65277);
/* harmony import */ var _angular_material_core__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @angular/material/core */ 74646);










const _c0 = () => ({
  disable_pan: true,
  disable_zoom: true
});
function ParkingSpaceDetailsComponent_ng_container_0_image_carousel_2_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelement"](0, "image-carousel", 21);
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("images", ctx_r1.space.images);
  }
}
function ParkingSpaceDetailsComponent_ng_container_0_Template(rf, ctx) {
  if (rf & 1) {
    const _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](1, "section", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](2, ParkingSpaceDetailsComponent_ng_container_0_image_carousel_2_Template, 1, 1, "image-carousel", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](3, "button", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("click", function ParkingSpaceDetailsComponent_ng_container_0_Template_button_click_3_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵrestoreView"](_r1);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵresetView"](ctx_r1.close.emit());
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](4, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](5, "arrow_back");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](6, "button", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("click", function ParkingSpaceDetailsComponent_ng_container_0_Template_button_click_6_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵrestoreView"](_r1);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵresetView"](ctx_r1.toggleFav.emit());
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](7, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](8);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]()()();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](9, "div", 9)(10, "section", 10)(11, "h2", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](12);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelement"](13, "hr");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](14, "section", 12)(15, "h2", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵi18n"](16, 1);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](17, "div", 14)(18, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](19, "people");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](20, "p");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵi18n"](21, 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](22, "div", 14)(23, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](24, "meeting_room");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](25, "p");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](26);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](27, "div", 14)(28, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](29, "place");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](30, "p");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](31);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]()()();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelement"](32, "hr");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](33, "section", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelement"](34, "interactive-map", 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](35, "div", 17)(36, "button", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("click", function ParkingSpaceDetailsComponent_ng_container_0_Template_button_click_36_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵrestoreView"](_r1);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"]();
      ctx_r1.active = !ctx_r1.active;
      return _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵresetView"](ctx_r1.activeChange.emit(ctx_r1.active));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](37, "div", 19)(38, "app-icon", 20);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](39);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](40, "p");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](41);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]()()()();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementContainerEnd"]();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵclassProp"]("sm:h-40", ctx_r1.space.images == null ? null : ctx_r1.space.images.length)("h-64", ctx_r1.space.images == null ? null : ctx_r1.space.images.length)("sm:h-0", !(ctx_r1.space.images == null ? null : ctx_r1.space.images.length))("h-12", !(ctx_r1.space.images == null ? null : ctx_r1.space.images.length))("!bg-transparent", !(ctx_r1.space.images == null ? null : ctx_r1.space.images.length));
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngIf", ctx_r1.space.images == null ? null : ctx_r1.space.images.length);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵclassProp"]("text-info-content", ctx_r1.fav)("!bg-info", ctx_r1.fav);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtextInterpolate"](ctx_r1.fav ? "favorite" : "favorite_border");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtextInterpolate1"](" ", ctx_r1.space.display_name || ctx_r1.space.name, " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](9);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵi18nExp"](ctx_r1.space.capacity);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵi18nApply"](21);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtextInterpolate1"](" ", (ctx_r1.level == null ? null : ctx_r1.level.display_name) || (ctx_r1.level == null ? null : ctx_r1.level.name), " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtextInterpolate1"](" ", (ctx_r1.building == null ? null : ctx_r1.building.address) || (ctx_r1.building == null ? null : ctx_r1.building.display_name) || (ctx_r1.building == null ? null : ctx_r1.building.name), " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("src", ctx_r1.map_url)("focus", ctx_r1.space.map_id)("features", ctx_r1.features)("options", _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpureFunction0"](28, _c0));
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵclassProp"]("inverse", ctx_r1.active);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtextInterpolate"](ctx_r1.active ? "remove" : "add");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtextInterpolate1"](" ", ctx_r1.active ? "Remove this room" : "Add this room", " ");
  }
}
function ParkingSpaceDetailsComponent_ng_template_1_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "div", 22)(1, "p", 23);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵi18n"](2, 3);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]()();
  }
}
class ParkingSpaceDetailsComponent {
  get level() {
    return this._org.levelWithID([this.space?.zone.id]) || this.space?.zone;
  }
  get building() {
    return this._org.buildings.find(_ => this.space?.zone.id === _.id || this.space?.zone.parent_id === _.id);
  }
  constructor(_org) {
    this._org = _org;
    this.fav = false;
    this.active = false;
    this.activeChange = new _angular_core__WEBPACK_IMPORTED_MODULE_5__.EventEmitter();
    this.close = new _angular_core__WEBPACK_IMPORTED_MODULE_5__.EventEmitter();
    this.toggleFav = new _angular_core__WEBPACK_IMPORTED_MODULE_5__.EventEmitter();
    this.map_url = '';
    this.features = [];
  }
  ngOnChanges(changes) {
    if (changes.space && this.space) {
      this._updateFeature();
    }
  }
  _updateFeature() {
    this.map_url = this.level?.map_id;
    this.features = [{
      location: this.space?.map_id,
      content: _placeos_components__WEBPACK_IMPORTED_MODULE_0__.MapPinComponent
    }];
  }
  static #_ = this.ɵfac = function ParkingSpaceDetailsComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || ParkingSpaceDetailsComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵdirectiveInject"](_placeos_organisation__WEBPACK_IMPORTED_MODULE_1__.OrganisationService));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵdefineComponent"]({
    type: ParkingSpaceDetailsComponent,
    selectors: [["parking-space-details"]],
    inputs: {
      space: "space",
      fav: "fav",
      active: "active"
    },
    outputs: {
      activeChange: "activeChange",
      close: "close",
      toggleFav: "toggleFav"
    },
    features: [_angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵNgOnChangesFeature"]],
    decls: 3,
    vars: 2,
    consts: () => {
      let i18n_0;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_5028777105388019087$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_DETAILS_COMPONENT_TS_0 = goog.getMsg("Details");
        i18n_0 = MSG_EXTERNAL_5028777105388019087$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_DETAILS_COMPONENT_TS_0;
      } else {
        i18n_0 = $localize`:␟4f8b2bb476981727ab34ed40fde1218361f92c45␟5028777105388019087:Details`;
      }
      let i18n_1;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_2731085793954892186$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_DETAILS_COMPONENT_TS_1 = goog.getMsg("{$interpolation} People", {
          "interpolation": "\uFFFD0\uFFFD"
        }, {
          original_code: {
            "interpolation": "{{ space.capacity }}"
          }
        });
        i18n_1 = MSG_EXTERNAL_2731085793954892186$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_DETAILS_COMPONENT_TS_1;
      } else {
        i18n_1 = $localize`:␟2fe5caca246424da5e7fcee12a1fe341335e1286␟2731085793954892186:${"\uFFFD0\uFFFD"}:INTERPOLATION: People`;
      }
      let i18n_2;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_7182911930527299079$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_DETAILS_COMPONENT_TS_2 = goog.getMsg(" Select a space to view it's details ");
        i18n_2 = MSG_EXTERNAL_7182911930527299079$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_DETAILS_COMPONENT_TS_2;
      } else {
        i18n_2 = $localize`:␟2d39d1ca65d735d7f800e458ce54af6a25652395␟7182911930527299079: Select a space to view it's details `;
      }
      return [["empty_state", ""], i18n_0, i18n_1, i18n_2, [4, "ngIf", "ngIfElse"], ["image", "", 1, "relative", "w-full", "bg-base-200"], ["class", "absolute inset-0", 3, "images", 4, "ngIf"], ["icon", "", "matRipple", "", "close", "", 1, "absolute", "top-2", "left-2", "bg-base-200", "sm:hidden", 3, "click"], ["icon", "", "matRipple", "", "fav", "", 1, "absolute", "top-2", "right-2", "bg-base-200", 3, "click"], [1, "p-2", "space-y-2", "flex-1", "h-1/2", "overflow-auto"], ["actions", "", 1, "z-0"], [1, "text-xl", "font-medium", "mb-2", "mt-4"], ["details", "", 1, "space-y-2"], [1, "text-xl", "font-medium"], [1, "flex", "items-center", "space-x-2"], ["map", "", 1, "w-full", "mx-auto", "h-64", "sm:h-48", "relative", "border", "border-base-200", "overflow-hidden", "rounded"], [1, "pointer-events-none", 3, "src", "focus", "features", "options"], [1, "p-2", "border-t", "border-base-200", "shadow", "sm:hidden"], ["btn", "", "matRipple", "", 1, "w-full", 3, "click"], [1, "flex", "items-center", "justify-center"], [1, "text-2xl"], [1, "absolute", "inset-0", 3, "images"], ["empty", "", 1, "p-16", "flex", "flex-col", "items-center", "justify-center", "space-y-2"], [1, "opacity-30", "text-center"]];
    },
    template: function ParkingSpaceDetailsComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](0, ParkingSpaceDetailsComponent_ng_container_0_Template, 42, 29, "ng-container", 4)(1, ParkingSpaceDetailsComponent_ng_template_1_Template, 3, 0, "ng-template", null, 0, _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplateRefExtractor"]);
      }
      if (rf & 2) {
        const empty_state_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵreference"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngIf", ctx.space)("ngIfElse", empty_state_r3);
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_6__.NgIf, _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_2__.IconComponent, _components_src_lib_interactive_map_component__WEBPACK_IMPORTED_MODULE_3__.InteractiveMapComponent, _components_src_lib_image_carousel_component__WEBPACK_IMPORTED_MODULE_4__.ImageCarouselComponent, _angular_material_core__WEBPACK_IMPORTED_MODULE_7__.MatRipple],
    styles: ["[_nghost-%COMP%] {\n                display: flex;\n                flex-direction: column;\n                width: 30%;\n                min-width: 20rem;\n                height: 100%;\n                min-height: 65vh;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBhcmtpbmctZGV0YWlscy5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLGFBQWE7Z0JBQ2Isc0JBQXNCO2dCQUN0QixVQUFVO2dCQUNWLGdCQUFnQjtnQkFDaEIsWUFBWTtnQkFDWixnQkFBZ0I7WUFDcEIiLCJmaWxlIjoicGFya2luZy1kZXRhaWxzLmNvbXBvbmVudC50cyIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgOmhvc3Qge1xuICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgICAgICAgICB3aWR0aDogMzAlO1xuICAgICAgICAgICAgICAgIG1pbi13aWR0aDogMjByZW07XG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgICAgICAgICAgIG1pbi1oZWlnaHQ6IDY1dmg7XG4gICAgICAgICAgICB9XG4gICAgICAgICJdfQ== */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvYm9va2luZ3Mvc3JjL2xpYi9wYXJraW5nLXNlbGVjdC1tb2RhbC9wYXJraW5nLWRldGFpbHMuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxhQUFhO2dCQUNiLHNCQUFzQjtnQkFDdEIsVUFBVTtnQkFDVixnQkFBZ0I7Z0JBQ2hCLFlBQVk7Z0JBQ1osZ0JBQWdCO1lBQ3BCOztBQUVaLGdyQkFBZ3JCIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICA6aG9zdCB7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgICAgICAgIHdpZHRoOiAzMCU7XG4gICAgICAgICAgICAgICAgbWluLXdpZHRoOiAyMHJlbTtcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgICAgICAgICAgbWluLWhlaWdodDogNjV2aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl0sInNvdXJjZVJvb3QiOiIifQ== */"]
  });
}

/***/ }),

/***/ 19138:
/*!*****************************************************************************************!*\
  !*** ./libs/bookings/src/lib/parking-select-modal/parking-filters-display.component.ts ***!
  \*****************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ParkingSpaceFiltersDisplayComponent: () => (/* binding */ ParkingSpaceFiltersDisplayComponent)
/* harmony export */ });
/* harmony import */ var _home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 89204);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var _placeos_organisation__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @placeos/organisation */ 2510);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! rxjs/operators */ 33602);
/* harmony import */ var _parking_filters_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./parking-filters.component */ 39145);
/* harmony import */ var _booking_form_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../booking-form.service */ 18379);
/* harmony import */ var _angular_material_bottom_sheet__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @angular/material/bottom-sheet */ 15244);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../components/src/lib/icon.component */ 69434);
/* harmony import */ var _angular_material_core__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @angular/material/core */ 74646);
















function ParkingSpaceFiltersDisplayComponent_div_9_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](0, "div", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtextInterpolate1"](" ", ctx_r0.location, " ");
  }
}
function ParkingSpaceFiltersDisplayComponent_div_20_Template(rf, ctx) {
  if (rf & 1) {
    const _r2 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](0, "div", 16)(1, "p");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](3, "button", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵlistener"]("click", function ParkingSpaceFiltersDisplayComponent_div_20_Template_button_click_3_listener() {
      const feat_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵrestoreView"](_r2).$implicit;
      const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵresetView"](ctx_r0.removeFeature(feat_r3));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](4, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](5, "close");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]()()();
  }
  if (rf & 2) {
    const feat_r3 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtextInterpolate"](feat_r3);
  }
}
class ParkingSpaceFiltersDisplayComponent extends _placeos_common__WEBPACK_IMPORTED_MODULE_1__.AsyncHandler {
  get start() {
    return this._event_form.form.value.date;
  }
  get end() {
    const {
      date,
      duration
    } = this._event_form.form.value;
    return date + duration * 60 * 1000;
  }
  get time_format() {
    return this._settings.time_format;
  }
  constructor(_bsheet, _event_form, _org, _settings) {
    super();
    this._bsheet = _bsheet;
    this._event_form = _event_form;
    this._org = _org;
    this._settings = _settings;
    this.view = 'list';
    this.viewChange = new _angular_core__WEBPACK_IMPORTED_MODULE_6__.EventEmitter();
    this.options = this._event_form.options;
    this.location = '';
    this.editFilters = () => this._bsheet.open(_parking_filters_component__WEBPACK_IMPORTED_MODULE_3__.ParkingSpaceFiltersComponent);
  }
  ngOnInit() {
    this.subscription('opts', this.options.subscribe(({
      zone_id
    }) => this._updateLocation([zone_id])));
  }
  removeFeature(feat) {
    var _this = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      const value = yield _this._event_form.options.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.take)(1)).toPromise();
      _this._event_form.setOptions({
        ...value,
        features: (value.features || []).filter(_ => _ !== feat)
      });
    })();
  }
  _updateLocation(zone_ids = []) {
    const level = this._org.levelWithID(zone_ids);
    const item = level || this._org.building;
    this.location = item?.display_name || item?.name || '';
  }
  static #_ = this.ɵfac = function ParkingSpaceFiltersDisplayComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || ParkingSpaceFiltersDisplayComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵdirectiveInject"](_angular_material_bottom_sheet__WEBPACK_IMPORTED_MODULE_8__.MatBottomSheet), _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵdirectiveInject"](_booking_form_service__WEBPACK_IMPORTED_MODULE_4__.BookingFormService), _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵdirectiveInject"](_placeos_organisation__WEBPACK_IMPORTED_MODULE_2__.OrganisationService), _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵdirectiveInject"](_placeos_common__WEBPACK_IMPORTED_MODULE_1__.SettingsService));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵdefineComponent"]({
    type: ParkingSpaceFiltersDisplayComponent,
    selectors: [["parking-space-filters-display"]],
    inputs: {
      view: "view"
    },
    outputs: {
      viewChange: "viewChange"
    },
    features: [_angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵInheritDefinitionFeature"]],
    decls: 22,
    vars: 23,
    consts: () => {
      let i18n_0;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_5208858215712453646$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_FILTERS_DISPLAY_COMPONENT_TS_0 = goog.getMsg(" Filters ");
        i18n_0 = MSG_EXTERNAL_5208858215712453646$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_FILTERS_DISPLAY_COMPONENT_TS_0;
      } else {
        i18n_0 = $localize`:␟19eaa5cd51d70d9ea957eecac78cfd811e9b93d8␟5208858215712453646: Filters `;
      }
      let i18n_1;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_8553228906889869186$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_FILTERS_DISPLAY_COMPONENT_TS_1 = goog.getMsg(" Map ");
        i18n_1 = MSG_EXTERNAL_8553228906889869186$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_FILTERS_DISPLAY_COMPONENT_TS_1;
      } else {
        i18n_1 = $localize`:␟992a9a6a193a56c5b8846dc972c5e1977ee5f1aa␟8553228906889869186: Map `;
      }
      let i18n_2;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_7787942140742011951$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_FILTERS_DISPLAY_COMPONENT_TS_2 = goog.getMsg(" List ");
        i18n_2 = MSG_EXTERNAL_7787942140742011951$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_FILTERS_DISPLAY_COMPONENT_TS_2;
      } else {
        i18n_2 = $localize`:␟4b286e90831dd637c5cd3eb20544664ee7112669␟7787942140742011951: List `;
      }
      let i18n_3;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_7211304359187007121$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_FILTERS_DISPLAY_COMPONENT_TS_3 = goog.getMsg(" Min. {$interpolation} People ", {
          "interpolation": "\uFFFD0\uFFFD"
        }, {
          original_code: {
            "interpolation": "{{ (options | async)?.capcaity || 2 }}"
          }
        });
        i18n_3 = MSG_EXTERNAL_7211304359187007121$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_FILTERS_DISPLAY_COMPONENT_TS_3;
      } else {
        i18n_3 = $localize`:␟e1bcafb95323d9492bfdfa190a129131e6255cdb␟7211304359187007121: Min. ${"\uFFFD0\uFFFD"}:INTERPOLATION: People `;
      }
      return [i18n_0, i18n_1, i18n_2, i18n_3, ["actions", "", 1, "sm:hidden", "space-x-2", "flex", "items-center", "p-2"], ["matRipple", "", "filters", "", 1, "flex-1", "w-1/2", 3, "click"], [1, "flex", "items-center"], ["matRipple", "", "map", "", 1, "rounded-l", "rounded-r-none", 3, "click"], ["matRipple", "", "list", "", 1, "rounded-r", "rounded-l-none", 3, "click"], ["filters", "", 1, "flex", "items-center", "flex-wrap", "p-2", "w-[35rem]", "max-w-full", "sm:max-w-[35rem]"], ["filter-item", "", "zone", "", "class", "dark:border-base-200-500", 4, "ngIf"], ["filter-item", "", "date", "", 1, "dark:border-base-200-500"], ["filter-item", "", "time", "", 1, "dark:border-base-200-500"], ["filter-item", "", "count", "", 1, "dark:border-base-200-500"], ["filter-item", "", 4, "ngFor", "ngForOf"], ["filter-item", "", "zone", "", 1, "dark:border-base-200-500"], ["filter-item", ""], ["icon", "", "matRipple", "", 1, "-mr-4", 3, "click"]];
    },
    template: function ParkingSpaceFiltersDisplayComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](0, "section", 4)(1, "button", 5);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵlistener"]("click", function ParkingSpaceFiltersDisplayComponent_Template_button_click_1_listener() {
          return ctx.editFilters();
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵi18n"](2, 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](3, "div", 6)(4, "button", 7);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵlistener"]("click", function ParkingSpaceFiltersDisplayComponent_Template_button_click_4_listener() {
          ctx.view = "map";
          return ctx.viewChange.emit(ctx.view);
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵi18n"](5, 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](6, "button", 8);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵlistener"]("click", function ParkingSpaceFiltersDisplayComponent_Template_button_click_6_listener() {
          ctx.view = "list";
          return ctx.viewChange.emit(ctx.view);
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵi18n"](7, 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]()()();
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](8, "section", 9);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtemplate"](9, ParkingSpaceFiltersDisplayComponent_div_9_Template, 2, 1, "div", 10);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](10, "div", 11);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](11);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpipe"](12, "date");
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](13, "div", 12);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](14);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpipe"](15, "date");
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpipe"](16, "date");
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](17, "div", 13);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵi18n"](18, 3);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpipe"](19, "async");
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtemplate"](20, ParkingSpaceFiltersDisplayComponent_div_20_Template, 6, 1, "div", 14);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpipe"](21, "async");
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
      }
      if (rf & 2) {
        let tmp_5_0;
        let tmp_7_0;
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](4);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵclassProp"]("inverse", ctx.view !== "map");
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵclassProp"]("inverse", ctx.view !== "list");
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("ngIf", ctx.location);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpipeBind2"](12, 10, ctx.start, "mediumDate"), " ");
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtextInterpolate2"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpipeBind2"](15, 13, ctx.start, ctx.time_format), " \u2014 ", _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpipeBind2"](16, 16, ctx.end, ctx.time_format), " ");
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](5);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵi18nExp"](((tmp_5_0 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpipeBind1"](19, 19, ctx.options)) == null ? null : tmp_5_0.capcaity) || 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵi18nApply"](18);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("ngForOf", (tmp_7_0 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpipeBind1"](21, 21, ctx.options)) == null ? null : tmp_7_0.features);
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_9__.NgForOf, _angular_common__WEBPACK_IMPORTED_MODULE_9__.NgIf, _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_5__.IconComponent, _angular_material_core__WEBPACK_IMPORTED_MODULE_10__.MatRipple, _angular_common__WEBPACK_IMPORTED_MODULE_9__.AsyncPipe, _angular_common__WEBPACK_IMPORTED_MODULE_9__.DatePipe],
    styles: ["[filter-item][_ngcontent-%COMP%] {\n                display: flex;\n                align-items: center;\n                padding: 0 1rem;\n                height: 2rem;\n                font-size: 0.875rem;\n                border: 1px solid rgba(0, 0, 0, 0.2);\n                border-radius: 1.25rem;\n                margin-right: 0.5rem;\n                margin-bottom: 0.5rem;\n            }\n\n            [filter-item][_ngcontent-%COMP%]:hover {\n                background: rgba(0, 0, 0, 0.1);\n            }\n\n            [filter-item][_ngcontent-%COMP%]    > *[_ngcontent-%COMP%]    + *[_ngcontent-%COMP%] {\n                margin-left: 0.5rem;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBhcmtpbmctZmlsdGVycy1kaXNwbGF5LmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1lBQ1k7Z0JBQ0ksYUFBYTtnQkFDYixtQkFBbUI7Z0JBQ25CLGVBQWU7Z0JBQ2YsWUFBWTtnQkFDWixtQkFBbUI7Z0JBQ25CLG9DQUFvQztnQkFDcEMsc0JBQXNCO2dCQUN0QixvQkFBb0I7Z0JBQ3BCLHFCQUFxQjtZQUN6Qjs7WUFFQTtnQkFDSSw4QkFBOEI7WUFDbEM7O1lBRUE7Z0JBQ0ksbUJBQW1CO1lBQ3ZCIiwiZmlsZSI6InBhcmtpbmctZmlsdGVycy1kaXNwbGF5LmNvbXBvbmVudC50cyIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgW2ZpbHRlci1pdGVtXSB7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICAgICAgICAgIHBhZGRpbmc6IDAgMXJlbTtcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDJyZW07XG4gICAgICAgICAgICAgICAgZm9udC1zaXplOiAwLjg3NXJlbTtcbiAgICAgICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCByZ2JhKDAsIDAsIDAsIDAuMik7XG4gICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMS4yNXJlbTtcbiAgICAgICAgICAgICAgICBtYXJnaW4tcmlnaHQ6IDAuNXJlbTtcbiAgICAgICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAwLjVyZW07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIFtmaWx0ZXItaXRlbV06aG92ZXIge1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IHJnYmEoMCwgMCwgMCwgMC4xKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgW2ZpbHRlci1pdGVtXSA+ICogKyAqIHtcbiAgICAgICAgICAgICAgICBtYXJnaW4tbGVmdDogMC41cmVtO1xuICAgICAgICAgICAgfVxuICAgICAgICAiXX0= */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvYm9va2luZ3Mvc3JjL2xpYi9wYXJraW5nLXNlbGVjdC1tb2RhbC9wYXJraW5nLWZpbHRlcnMtZGlzcGxheS5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLGFBQWE7Z0JBQ2IsbUJBQW1CO2dCQUNuQixlQUFlO2dCQUNmLFlBQVk7Z0JBQ1osbUJBQW1CO2dCQUNuQixvQ0FBb0M7Z0JBQ3BDLHNCQUFzQjtnQkFDdEIsb0JBQW9CO2dCQUNwQixxQkFBcUI7WUFDekI7O1lBRUE7Z0JBQ0ksOEJBQThCO1lBQ2xDOztZQUVBO2dCQUNJLG1CQUFtQjtZQUN2Qjs7QUFFWiw0d0NBQTR3QyIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgW2ZpbHRlci1pdGVtXSB7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICAgICAgICAgIHBhZGRpbmc6IDAgMXJlbTtcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDJyZW07XG4gICAgICAgICAgICAgICAgZm9udC1zaXplOiAwLjg3NXJlbTtcbiAgICAgICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCByZ2JhKDAsIDAsIDAsIDAuMik7XG4gICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMS4yNXJlbTtcbiAgICAgICAgICAgICAgICBtYXJnaW4tcmlnaHQ6IDAuNXJlbTtcbiAgICAgICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAwLjVyZW07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIFtmaWx0ZXItaXRlbV06aG92ZXIge1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IHJnYmEoMCwgMCwgMCwgMC4xKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgW2ZpbHRlci1pdGVtXSA+ICogKyAqIHtcbiAgICAgICAgICAgICAgICBtYXJnaW4tbGVmdDogMC41cmVtO1xuICAgICAgICAgICAgfVxuICAgICAgICAiXSwic291cmNlUm9vdCI6IiJ9 */"]
  });
}

/***/ }),

/***/ 39145:
/*!*********************************************************************************!*\
  !*** ./libs/bookings/src/lib/parking-select-modal/parking-filters.component.ts ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ParkingSpaceFiltersComponent: () => (/* binding */ ParkingSpaceFiltersComponent)
/* harmony export */ });
/* harmony import */ var _home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 89204);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var _placeos_organisation__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @placeos/organisation */ 2510);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! rxjs/operators */ 35443);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! rxjs/operators */ 33602);
/* harmony import */ var _booking_form_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../booking-form.service */ 18379);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! date-fns */ 56441);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! date-fns */ 28797);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_material_bottom_sheet__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @angular/material/bottom-sheet */ 15244);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @angular/forms */ 34456);
/* harmony import */ var _angular_material_form_field__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @angular/material/form-field */ 24950);
/* harmony import */ var _angular_material_checkbox__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @angular/material/checkbox */ 97024);
/* harmony import */ var _angular_material_core__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @angular/material/core */ 74646);
/* harmony import */ var _form_fields_src_lib_date_field_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../form-fields/src/lib/date-field.component */ 19608);
/* harmony import */ var _form_fields_src_lib_duration_field_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../form-fields/src/lib/duration-field.component */ 83476);
/* harmony import */ var _form_fields_src_lib_time_field_component__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../form-fields/src/lib/time-field.component */ 81413);
/* harmony import */ var _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../components/src/lib/icon.component */ 69434);
/* harmony import */ var _angular_material_select__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! @angular/material/select */ 25175);






















const _c0 = () => ({
  standalone: true
});
function ParkingSpaceFiltersComponent_button_2_Template(rf, ctx) {
  if (rf & 1) {
    const _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](0, "button", 31);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵlistener"]("click", function ParkingSpaceFiltersComponent_button_2_Template_button_click_0_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵrestoreView"](_r1);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵresetView"](ctx_r1.close());
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](1, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](2, "keyboard_arrow_left");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]()();
  }
}
function ParkingSpaceFiltersComponent_ng_container_13_mat_form_field_1_mat_option_5_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](0, "mat-option", 36);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const bld_r4 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("value", bld_r4);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtextInterpolate1"](" ", bld_r4.display_name || bld_r4.name, " ");
  }
}
function ParkingSpaceFiltersComponent_ng_container_13_mat_form_field_1_Template(rf, ctx) {
  if (rf & 1) {
    const _r3 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](0, "mat-form-field", 33)(1, "mat-select", 34);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipe"](2, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipe"](3, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipe"](4, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵlistener"]("ngModelChange", function ParkingSpaceFiltersComponent_ng_container_13_mat_form_field_1_Template_mat_select_ngModelChange_1_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵrestoreView"](_r3);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"](2);
      return _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵresetView"](ctx_r1.setBuilding($event));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtemplate"](5, ParkingSpaceFiltersComponent_ng_container_13_mat_form_field_1_mat_option_5_Template, 2, 2, "mat-option", 35);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipe"](6, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    let tmp_4_0;
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngModel", _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipeBind1"](2, 4, ctx_r1.building))("ngModelOptions", _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpureFunction0"](12, _c0))("placeholder", ((tmp_4_0 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipeBind1"](3, 6, ctx_r1.building)) == null ? null : tmp_4_0.display_name) || ((tmp_4_0 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipeBind1"](4, 8, ctx_r1.building)) == null ? null : tmp_4_0.name));
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngForOf", _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipeBind1"](6, 10, ctx_r1.buildings));
  }
}
function ParkingSpaceFiltersComponent_ng_container_13_mat_form_field_3_mat_option_3_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](0, "mat-option", 36);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const lvl_r6 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("value", lvl_r6.id);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtextInterpolate1"](" ", lvl_r6.display_name || lvl_r6.name, " ");
  }
}
function ParkingSpaceFiltersComponent_ng_container_13_mat_form_field_3_Template(rf, ctx) {
  if (rf & 1) {
    const _r5 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](0, "mat-form-field", 33)(1, "mat-select", 37);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipe"](2, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵlistener"]("ngModelChange", function ParkingSpaceFiltersComponent_ng_container_13_mat_form_field_3_Template_mat_select_ngModelChange_1_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵrestoreView"](_r5);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"](2);
      return _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵresetView"](ctx_r1.setOptions({
        zone_id: $event
      }));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtemplate"](3, ParkingSpaceFiltersComponent_ng_container_13_mat_form_field_3_mat_option_3_Template, 2, 2, "mat-option", 35);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipe"](4, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    let tmp_2_0;
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngModel", (tmp_2_0 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipeBind1"](2, 3, ctx_r1.options)) == null ? null : tmp_2_0.zone_id)("ngModelOptions", _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpureFunction0"](7, _c0));
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngForOf", _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipeBind1"](4, 5, ctx_r1.levels));
  }
}
function ParkingSpaceFiltersComponent_ng_container_13_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtemplate"](1, ParkingSpaceFiltersComponent_ng_container_13_mat_form_field_1_Template, 7, 13, "mat-form-field", 32);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipe"](2, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtemplate"](3, ParkingSpaceFiltersComponent_ng_container_13_mat_form_field_3_Template, 5, 8, "mat-form-field", 32);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementContainerEnd"]();
  }
  if (rf & 2) {
    let tmp_1_0;
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngIf", ((tmp_1_0 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipeBind1"](2, 2, ctx_r1.buildings)) == null ? null : tmp_1_0.length) > 1);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngIf", !ctx_r1.hide_levels);
  }
}
function ParkingSpaceFiltersComponent_ng_container_14_mat_form_field_1_mat_option_2_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](0, "mat-option", 36);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const reg_r8 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("value", reg_r8);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtextInterpolate1"](" ", reg_r8.display_name || reg_r8.name, " ");
  }
}
function ParkingSpaceFiltersComponent_ng_container_14_mat_form_field_1_Template(rf, ctx) {
  if (rf & 1) {
    const _r7 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](0, "mat-form-field", 33)(1, "mat-select", 38);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵlistener"]("ngModelChange", function ParkingSpaceFiltersComponent_ng_container_14_mat_form_field_1_Template_mat_select_ngModelChange_1_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵrestoreView"](_r7);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"](2);
      return _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵresetView"](ctx_r1.setRegion($event));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtemplate"](2, ParkingSpaceFiltersComponent_ng_container_14_mat_form_field_1_mat_option_2_Template, 2, 2, "mat-option", 35);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipe"](3, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngModel", ctx_r1.region)("ngModelOptions", _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpureFunction0"](5, _c0));
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngForOf", _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipeBind1"](3, 3, ctx_r1.regions));
  }
}
function ParkingSpaceFiltersComponent_ng_container_14_mat_form_field_3_mat_optgroup_5_mat_option_1_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](0, "mat-option", 36);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const level_r10 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("value", level_r10.id);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtextInterpolate1"](" ", level_r10.display_name || level_r10.name, " ");
  }
}
function ParkingSpaceFiltersComponent_ng_container_14_mat_form_field_3_mat_optgroup_5_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](0, "mat-optgroup", 41);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtemplate"](1, ParkingSpaceFiltersComponent_ng_container_14_mat_form_field_3_mat_optgroup_5_mat_option_1_Template, 2, 2, "mat-option", 35);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const bld_r11 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("label", bld_r11.name);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngForOf", bld_r11.levels);
  }
}
function ParkingSpaceFiltersComponent_ng_container_14_mat_form_field_3_Template(rf, ctx) {
  if (rf & 1) {
    const _r9 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](0, "mat-form-field", 33)(1, "mat-select", 39);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipe"](2, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵlistener"]("ngModelChange", function ParkingSpaceFiltersComponent_ng_container_14_mat_form_field_3_Template_mat_select_ngModelChange_1_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵrestoreView"](_r9);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"](2);
      return _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵresetView"](ctx_r1.setOptions({
        zone_id: $event
      }));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](3, "mat-option", 36);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](4, "Any Level");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtemplate"](5, ParkingSpaceFiltersComponent_ng_container_14_mat_form_field_3_mat_optgroup_5_Template, 2, 2, "mat-optgroup", 40);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipe"](6, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    let tmp_2_0;
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngModel", (tmp_2_0 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipeBind1"](2, 3, ctx_r1.options)) == null ? null : tmp_2_0.zone_id)("ngModelOptions", _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpureFunction0"](7, _c0));
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngForOf", _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipeBind1"](6, 5, ctx_r1.region_levels));
  }
}
function ParkingSpaceFiltersComponent_ng_container_14_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtemplate"](1, ParkingSpaceFiltersComponent_ng_container_14_mat_form_field_1_Template, 4, 6, "mat-form-field", 32);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipe"](2, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtemplate"](3, ParkingSpaceFiltersComponent_ng_container_14_mat_form_field_3_Template, 7, 8, "mat-form-field", 32);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementContainerEnd"]();
  }
  if (rf & 2) {
    let tmp_1_0;
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngIf", (tmp_1_0 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipeBind1"](2, 2, ctx_r1.regions)) == null ? null : tmp_1_0.length);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngIf", !ctx_r1.hide_levels);
  }
}
function ParkingSpaceFiltersComponent_div_21_Template(rf, ctx) {
  if (rf & 1) {
    const _r12 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](0, "div", 42)(1, "div", 43)(2, "label", 44);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵi18nStart"](3, 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelement"](4, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵi18nEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](5, "a-time-field", 45);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵlistener"]("ngModelChange", function ParkingSpaceFiltersComponent_div_21_Template_a_time_field_ngModelChange_5_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵrestoreView"](_r12);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵresetView"](ctx_r1.form.patchValue({
        date: $event
      }));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](6, "div", 43)(7, "label", 46);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵi18nStart"](8, 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelement"](9, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵi18nEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelement"](10, "a-duration-field", 47);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngModel", ctx_r1.form.value.date)("ngModelOptions", _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpureFunction0"](6, _c0))("use_24hr", ctx_r1.use_24hr);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("time", ctx_r1.form == null ? null : ctx_r1.form.value == null ? null : ctx_r1.form.value.date)("max", ctx_r1.max_duration)("use_24hr", ctx_r1.use_24hr);
  }
}
function ParkingSpaceFiltersComponent_section_30_div_3_Template(rf, ctx) {
  if (rf & 1) {
    const _r13 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](0, "div", 26)(1, "div", 50);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](3, "mat-checkbox", 51);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipe"](4, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵlistener"]("ngModelChange", function ParkingSpaceFiltersComponent_section_30_div_3_Template_mat_checkbox_ngModelChange_3_listener($event) {
      const feat_r14 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵrestoreView"](_r13).$implicit;
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"](2);
      return _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵresetView"](ctx_r1.toggleFeature(feat_r14, $event));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    let tmp_4_0;
    const feat_r14 = ctx.$implicit;
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtextInterpolate"](feat_r14);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngModel", (tmp_4_0 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipeBind1"](4, 3, ctx_r1.options)) == null ? null : tmp_4_0.features == null ? null : tmp_4_0.features.includes(feat_r14))("ngModelOptions", _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpureFunction0"](5, _c0));
  }
}
function ParkingSpaceFiltersComponent_section_30_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](0, "section", 48)(1, "h2", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵi18n"](2, 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtemplate"](3, ParkingSpaceFiltersComponent_section_30_div_3_Template, 5, 6, "div", 49);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipe"](4, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngForOf", _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipeBind1"](4, 1, ctx_r1.features));
  }
}
function ParkingSpaceFiltersComponent_div_32_Template(rf, ctx) {
  if (rf & 1) {
    const _r15 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](0, "div", 52)(1, "button", 53);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵlistener"]("click", function ParkingSpaceFiltersComponent_div_32_Template_button_click_1_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵrestoreView"](_r15);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵresetView"](ctx_r1.close());
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵi18n"](2, 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]()();
  }
}
class ParkingSpaceFiltersComponent {
  setBuilding(bld) {
    this._org.building = bld;
  }
  get bld() {
    return this._org.building;
  }
  get form() {
    return this._form.form;
  }
  get end_date() {
    return (0,date_fns__WEBPACK_IMPORTED_MODULE_9__.endOfDay)((0,date_fns__WEBPACK_IMPORTED_MODULE_10__.addDays)(Date.now(), this._settings.get('app.parking.available_period') || 7));
  }
  get max_duration() {
    return this._settings.get('app.events.max_duration') || 480;
  }
  get use_24hr() {
    return this._settings.get('app.use_24_hour_time');
  }
  get use_region() {
    return !!this._settings.get('app.use_region');
  }
  constructor(_bsheet_ref, _settings, _form, _org) {
    this._bsheet_ref = _bsheet_ref;
    this._settings = _settings;
    this._form = _form;
    this._org = _org;
    this.can_close = false;
    this.options = this._form.options;
    this.levels = this._org.active_levels.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_11__.map)(l => {
      for (const lvl of l) {
        const bld = this._org.buildings.find(_ => _.id === lvl.parent_id);
        lvl.bld = bld?.display_name || bld?.name || '';
      }
      return l.filter(_ => _.tags.includes('parking'));
    }));
    this.buildings = this._org.active_buildings;
    this.regions = this._org.region_list;
    this.region_levels = this._org.active_region.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_11__.map)(_ => {
      const region_buildings = this._org.buildings.filter(b => !_ || b.parent_id === _.id);
      const region_levels = region_buildings.map(b => ({
        id: b.id,
        name: b.display_name || b.name,
        levels: this._org.levels.filter(l => l.parent_id === b.id && l.tags.includes('parking'))
      }));
      return region_levels.filter(_ => _.levels.length);
    }));
    this.features = this._form.features;
    this.close = () => this._bsheet_ref.dismiss();
    this.setOptions = o => this._form.setOptions(o);
    this.setRegion = r => this._org.region = r;
    this.can_close = !!this._bsheet_ref;
  }
  toggleFeature(feat, state) {
    var _this = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      const {
        features
      } = yield _this.options.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.take)(1)).toPromise();
      const new_list = (features || []).filter(_ => feat !== _);
      if (state) new_list.push(feat);
      _this.setOptions({
        features: new_list
      });
    })();
  }
  static #_ = this.ɵfac = function ParkingSpaceFiltersComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || ParkingSpaceFiltersComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵdirectiveInject"](_angular_material_bottom_sheet__WEBPACK_IMPORTED_MODULE_13__.MatBottomSheetRef, 8), _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵdirectiveInject"](_placeos_common__WEBPACK_IMPORTED_MODULE_1__.SettingsService), _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵdirectiveInject"](_booking_form_service__WEBPACK_IMPORTED_MODULE_3__.BookingFormService), _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵdirectiveInject"](_placeos_organisation__WEBPACK_IMPORTED_MODULE_2__.OrganisationService));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵdefineComponent"]({
    type: ParkingSpaceFiltersComponent,
    selectors: [["parking-space-filters"]],
    inputs: {
      hide_levels: "hide_levels"
    },
    decls: 33,
    vars: 18,
    consts: () => {
      let i18n_0;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_7173310086383878456$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_FILTERS_COMPONENT_TS_0 = goog.getMsg("Space Filters");
        i18n_0 = MSG_EXTERNAL_7173310086383878456$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_FILTERS_COMPONENT_TS_0;
      } else {
        i18n_0 = $localize`:␟36173168a4643aa78634e9242a63f3a40862f166␟7173310086383878456:Space Filters`;
      }
      let i18n_1;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_5028777105388019087$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_FILTERS_COMPONENT_TS_1 = goog.getMsg("Details");
        i18n_1 = MSG_EXTERNAL_5028777105388019087$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_FILTERS_COMPONENT_TS_1;
      } else {
        i18n_1 = $localize`:␟4f8b2bb476981727ab34ed40fde1218361f92c45␟5028777105388019087:Details`;
      }
      let i18n_2;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_471816275243265264$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_FILTERS_COMPONENT_TS_2 = goog.getMsg("Location");
        i18n_2 = MSG_EXTERNAL_471816275243265264$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_FILTERS_COMPONENT_TS_2;
      } else {
        i18n_2 = $localize`:␟ed31c09fd77c36238c13d83635f3fe5294c733d2␟471816275243265264:Location`;
      }
      let i18n_3;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_3158758063619980932$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_FILTERS_COMPONENT_TS_3 = goog.getMsg("Date{$startTagSpan}*{$closeTagSpan}", {
          "closeTagSpan": "\uFFFD/#18\uFFFD",
          "startTagSpan": "\uFFFD#18\uFFFD"
        }, {
          original_code: {
            "closeTagSpan": "</span>",
            "startTagSpan": "<span>"
          }
        });
        i18n_3 = MSG_EXTERNAL_3158758063619980932$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_FILTERS_COMPONENT_TS_3;
      } else {
        i18n_3 = $localize`:␟04cfb5fd033651743bc4b9408bd52ba4ee894070␟3158758063619980932:Date${"\uFFFD#18\uFFFD"}:START_TAG_SPAN:*${"\uFFFD/#18\uFFFD"}:CLOSE_TAG_SPAN:`;
      }
      let i18n_4;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_4158925728608139729$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_FILTERS_COMPONENT_TS_4 = goog.getMsg("Favourites");
        i18n_4 = MSG_EXTERNAL_4158925728608139729$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_FILTERS_COMPONENT_TS_4;
      } else {
        i18n_4 = $localize`:␟62ab0c2bf8d16ce7baf2c8b1da2c561d99522256␟4158925728608139729:Favourites`;
      }
      let i18n_5;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_165958440274527719$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_FILTERS_COMPONENT_TS_5 = goog.getMsg(" Only show favourite spaces ");
        i18n_5 = MSG_EXTERNAL_165958440274527719$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_FILTERS_COMPONENT_TS_5;
      } else {
        i18n_5 = $localize`:␟ac378c0b437746af89a84b4909ab5b83c5ff55a3␟165958440274527719: Only show favourite spaces `;
      }
      let i18n_6;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_7323982518822503502$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_FILTERS_COMPONENT_TS_6 = goog.getMsg("Any Level");
        i18n_6 = MSG_EXTERNAL_7323982518822503502$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_FILTERS_COMPONENT_TS_6;
      } else {
        i18n_6 = $localize`:␟50407595967bf29832e873b41f9de3502d5c3e03␟7323982518822503502:Any Level`;
      }
      let i18n_7;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_8264413387051126615$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_FILTERS_COMPONENT_TS_7 = goog.getMsg("Any Region");
        i18n_7 = MSG_EXTERNAL_8264413387051126615$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_FILTERS_COMPONENT_TS_7;
      } else {
        i18n_7 = $localize`:␟130845b58eba8e50c98f3fba117a0168cdba4f31␟8264413387051126615:Any Region`;
      }
      let i18n_8;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_7323982518822503502$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_FILTERS_COMPONENT_TS_8 = goog.getMsg("Any Level");
        i18n_8 = MSG_EXTERNAL_7323982518822503502$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_FILTERS_COMPONENT_TS_8;
      } else {
        i18n_8 = $localize`:␟50407595967bf29832e873b41f9de3502d5c3e03␟7323982518822503502:Any Level`;
      }
      let i18n_9;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_3039786638368843634$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_FILTERS_COMPONENT_TS_9 = goog.getMsg("Start Time{$startTagSpan}*{$closeTagSpan}", {
          "closeTagSpan": "\uFFFD/#4\uFFFD",
          "startTagSpan": "\uFFFD#4\uFFFD"
        }, {
          original_code: {
            "closeTagSpan": "</span>",
            "startTagSpan": "<span>"
          }
        });
        i18n_9 = MSG_EXTERNAL_3039786638368843634$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_FILTERS_COMPONENT_TS_9;
      } else {
        i18n_9 = $localize`:␟34a7595cdc15925514038224946986bfd90dc0ed␟3039786638368843634:Start Time${"\uFFFD#4\uFFFD"}:START_TAG_SPAN:*${"\uFFFD/#4\uFFFD"}:CLOSE_TAG_SPAN:`;
      }
      let i18n_10;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_5960185837188220843$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_FILTERS_COMPONENT_TS_10 = goog.getMsg("End Time{$startTagSpan}*{$closeTagSpan}", {
          "closeTagSpan": "\uFFFD/#9\uFFFD",
          "startTagSpan": "\uFFFD#9\uFFFD"
        }, {
          original_code: {
            "closeTagSpan": "</span>",
            "startTagSpan": "<span>"
          }
        });
        i18n_10 = MSG_EXTERNAL_5960185837188220843$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_FILTERS_COMPONENT_TS_10;
      } else {
        i18n_10 = $localize`:␟85d5c3a89bab9a7475a7db095089e161586cb7a1␟5960185837188220843:End Time${"\uFFFD#9\uFFFD"}:START_TAG_SPAN:*${"\uFFFD/#9\uFFFD"}:CLOSE_TAG_SPAN:`;
      }
      let i18n_11;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_1551920764795208868$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_FILTERS_COMPONENT_TS_11 = goog.getMsg("Facilities");
        i18n_11 = MSG_EXTERNAL_1551920764795208868$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_FILTERS_COMPONENT_TS_11;
      } else {
        i18n_11 = $localize`:␟bf10c600bd861cfd0a23f4759562ee0ae9dbe19f␟1551920764795208868:Facilities`;
      }
      let i18n_12;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_2296888311792137027$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_FILTERS_COMPONENT_TS_12 = goog.getMsg(" Apply Filters ");
        i18n_12 = MSG_EXTERNAL_2296888311792137027$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_FILTERS_COMPONENT_TS_12;
      } else {
        i18n_12 = $localize`:␟c17e2cc448524a39eb83b2937cea3235a2e8bf37␟2296888311792137027: Apply Filters `;
      }
      return [i18n_0, i18n_1, i18n_2, i18n_3, i18n_4, i18n_5, i18n_9, i18n_10, i18n_11, i18n_12, [1, "flex", "items-center", "border-b", "border-base-200", "pb-2", "sm:hidden"], [1, "flex-1", "pl-2"], ["icon", "", "matRipple", "", "close", "", 3, "click", 4, "ngIf"], [1, "font-medium", "flex-2", "text-center"], [1, "flex-1"], [1, "max-h-[65vh]", "p-2", "overflow-y-auto", "overflow-x-hidden", "divide-y", "divide-base-200", "w-full", "max-w-[100vw]", 3, "formGroup"], ["details", ""], [1, "text-lg", "font-medium"], [1, "flex-1", "min-w-[256px]", "flex", "flex-col"], ["for", "location"], [4, "ngIf"], [1, "flex-1", "min-w-[256px]"], ["for", "date"], ["name", "date", 3, "ngModelChange", "ngModel", "ngModelOptions", "to"], ["class", "flex items-center space-x-2", 4, "ngIf"], ["favs", "", 1, "space-y-2", "pb-4"], [1, "flex", "items-center"], ["for", "fav", 1, "flex-1", "w-1/2"], ["name", "fav", 3, "ngModelChange", "ngModel", "ngModelOptions"], ["features", "", "class", "space-y-2", 4, "ngIf"], ["class", "px-2 pt-2 w-full border-t border-base-200", 4, "ngIf"], ["icon", "", "matRipple", "", "close", "", 3, "click"], ["appearance", "outline", "class", "w-full", 4, "ngIf"], ["appearance", "outline", 1, "w-full"], ["name", "building", 3, "ngModelChange", "ngModel", "ngModelOptions", "placeholder"], [3, "value", 4, "ngFor", "ngForOf"], [3, "value"], ["name", "location", "placeholder", i18n_6, 3, "ngModelChange", "ngModel", "ngModelOptions"], ["name", "region", "placeholder", i18n_7, 3, "ngModelChange", "ngModel", "ngModelOptions"], ["name", "location", "placeholder", i18n_8, 3, "ngModelChange", "ngModel", "ngModelOptions"], [3, "label", 4, "ngFor", "ngForOf"], [3, "label"], [1, "flex", "items-center", "space-x-2"], [1, "flex-1", "w-1/3"], ["for", "start-time"], ["name", "start-time", 3, "ngModelChange", "ngModel", "ngModelOptions", "use_24hr"], ["for", "end-time"], ["name", "end-time", "formControlName", "duration", 3, "time", "max", "use_24hr"], ["features", "", 1, "space-y-2"], ["class", "flex items-center", 4, "ngFor", "ngForOf"], ["for", "feat", 1, "flex-1", "w-1/2"], ["name", "feat", 3, "ngModelChange", "ngModel", "ngModelOptions"], [1, "px-2", "pt-2", "w-full", "border-t", "border-base-200"], ["btn", "", "matRipple", "", "close", "", 1, "w-full", 3, "click"]];
    },
    template: function ParkingSpaceFiltersComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](0, "div", 10)(1, "div", 11);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtemplate"](2, ParkingSpaceFiltersComponent_button_2_Template, 3, 0, "button", 12);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](3, "h3", 13);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵi18n"](4, 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelement"](5, "div", 14);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](6, "form", 15)(7, "section", 16)(8, "h2", 17);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵi18n"](9, 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](10, "div", 18)(11, "label", 19);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵi18n"](12, 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtemplate"](13, ParkingSpaceFiltersComponent_ng_container_13_Template, 4, 4, "ng-container", 20)(14, ParkingSpaceFiltersComponent_ng_container_14_Template, 4, 4, "ng-container", 20);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](15, "div", 21)(16, "label", 22);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵi18nStart"](17, 3);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelement"](18, "span");
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵi18nEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](19, "a-date-field", 23);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵlistener"]("ngModelChange", function ParkingSpaceFiltersComponent_Template_a_date_field_ngModelChange_19_listener($event) {
          return ctx.form.patchValue({
            date: $event
          });
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](20, " Date and time must be in the future ");
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtemplate"](21, ParkingSpaceFiltersComponent_div_21_Template, 11, 7, "div", 24);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](22, "section", 25)(23, "h2", 17);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵi18n"](24, 4);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](25, "div", 26)(26, "div", 27);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵi18n"](27, 5);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](28, "mat-checkbox", 28);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipe"](29, "async");
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵlistener"]("ngModelChange", function ParkingSpaceFiltersComponent_Template_mat_checkbox_ngModelChange_28_listener($event) {
          return ctx.setOptions({
            show_fav: $event
          });
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]()()();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtemplate"](30, ParkingSpaceFiltersComponent_section_30_Template, 5, 3, "section", 29);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipe"](31, "async");
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtemplate"](32, ParkingSpaceFiltersComponent_div_32_Template, 3, 0, "div", 30);
      }
      if (rf & 2) {
        let tmp_8_0;
        let tmp_10_0;
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngIf", ctx.can_close);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](4);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("formGroup", ctx.form);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](7);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngIf", !ctx.use_region);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngIf", ctx.use_region);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](5);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngModel", ctx.form.value.date)("ngModelOptions", _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpureFunction0"](16, _c0))("to", ctx.end_date);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngIf", false);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](7);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngModel", (tmp_8_0 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipeBind1"](29, 12, ctx.options)) == null ? null : tmp_8_0.show_fav)("ngModelOptions", _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpureFunction0"](17, _c0));
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngIf", (tmp_10_0 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipeBind1"](31, 14, ctx.features)) == null ? null : tmp_10_0.length);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngIf", ctx.can_close);
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_14__.NgForOf, _angular_common__WEBPACK_IMPORTED_MODULE_14__.NgIf, _angular_forms__WEBPACK_IMPORTED_MODULE_15__["ɵNgNoValidate"], _angular_forms__WEBPACK_IMPORTED_MODULE_15__.NgControlStatus, _angular_forms__WEBPACK_IMPORTED_MODULE_15__.NgControlStatusGroup, _angular_forms__WEBPACK_IMPORTED_MODULE_15__.NgModel, _angular_forms__WEBPACK_IMPORTED_MODULE_15__.FormGroupDirective, _angular_forms__WEBPACK_IMPORTED_MODULE_15__.FormControlName, _angular_material_form_field__WEBPACK_IMPORTED_MODULE_16__.MatFormField, _angular_material_checkbox__WEBPACK_IMPORTED_MODULE_17__.MatCheckbox, _angular_material_core__WEBPACK_IMPORTED_MODULE_18__.MatOption, _angular_material_core__WEBPACK_IMPORTED_MODULE_18__.MatOptgroup, _form_fields_src_lib_date_field_component__WEBPACK_IMPORTED_MODULE_4__.DateFieldComponent, _form_fields_src_lib_duration_field_component__WEBPACK_IMPORTED_MODULE_5__.DurationFieldComponent, _form_fields_src_lib_time_field_component__WEBPACK_IMPORTED_MODULE_6__.TimeFieldComponent, _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_7__.IconComponent, _angular_material_select__WEBPACK_IMPORTED_MODULE_19__.MatSelect, _angular_material_core__WEBPACK_IMPORTED_MODULE_18__.MatRipple, _angular_common__WEBPACK_IMPORTED_MODULE_14__.AsyncPipe],
    styles: ["[_nghost-%COMP%] {\n                display: flex;\n                flex-direction: column;\n                width: 100%;\n                max-width: 100vw;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBhcmtpbmctZmlsdGVycy5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLGFBQWE7Z0JBQ2Isc0JBQXNCO2dCQUN0QixXQUFXO2dCQUNYLGdCQUFnQjtZQUNwQiIsImZpbGUiOiJwYXJraW5nLWZpbHRlcnMuY29tcG9uZW50LnRzIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICA6aG9zdCB7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgICAgIG1heC13aWR0aDogMTAwdnc7XG4gICAgICAgICAgICB9XG4gICAgICAgICJdfQ== */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvYm9va2luZ3Mvc3JjL2xpYi9wYXJraW5nLXNlbGVjdC1tb2RhbC9wYXJraW5nLWZpbHRlcnMuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxhQUFhO2dCQUNiLHNCQUFzQjtnQkFDdEIsV0FBVztnQkFDWCxnQkFBZ0I7WUFDcEI7O0FBRVosd2pCQUF3akIiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIDpob3N0IHtcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICAgICAgbWF4LXdpZHRoOiAxMDB2dztcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl0sInNvdXJjZVJvb3QiOiIifQ== */"]
  });
}

/***/ }),

/***/ 30258:
/*!******************************************************************************!*\
  !*** ./libs/bookings/src/lib/parking-select-modal/parking-list.component.ts ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ParkingSpaceListComponent: () => (/* binding */ ParkingSpaceListComponent)
/* harmony export */ });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! rxjs */ 68824);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! rxjs/operators */ 35443);
/* harmony import */ var _booking_form_service__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../booking-form.service */ 18379);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _angular_material_progress_spinner__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @angular/material/progress-spinner */ 41134);
/* harmony import */ var _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../components/src/lib/icon.component */ 69434);
/* harmony import */ var _components_src_lib_authenticated_image_directive__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../components/src/lib/authenticated-image.directive */ 93208);
/* harmony import */ var _angular_material_core__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @angular/material/core */ 74646);











function ParkingSpaceListComponent_ng_container_5_ul_1_li_1_div_3_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "div", 24)(1, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](2, "done");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()();
  }
}
function ParkingSpaceListComponent_ng_container_5_ul_1_li_1_img_4_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelement"](0, "img", 25);
  }
  if (rf & 2) {
    const space_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]().$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("source", space_r2.images[0]);
  }
}
function ParkingSpaceListComponent_ng_container_5_ul_1_li_1_ng_template_5_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelement"](0, "img", 26);
  }
}
function ParkingSpaceListComponent_ng_container_5_ul_1_li_1_Template(rf, ctx) {
  if (rf & 1) {
    const _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "li", 14)(1, "button", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵlistener"]("click", function ParkingSpaceListComponent_ng_container_5_ul_1_li_1_Template_button_click_1_listener() {
      const space_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵrestoreView"](_r1).$implicit;
      const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"](3);
      return _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵresetView"](ctx_r2.selectSpace(space_r2));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](2, "div", 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](3, ParkingSpaceListComponent_ng_container_5_ul_1_li_1_div_3_Template, 3, 0, "div", 17)(4, ParkingSpaceListComponent_ng_container_5_ul_1_li_1_img_4_Template, 1, 1, "img", 18)(5, ParkingSpaceListComponent_ng_container_5_ul_1_li_1_ng_template_5_Template, 1, 0, "ng-template", null, 2, _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplateRefExtractor"]);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](7, "div", 19)(8, "div", 20);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](9);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](10, "div", 21)(11, "app-icon", 22);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](12, "place");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](13, "p");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](14);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](15, "div", 21)(16, "app-icon", 22);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](17, "people");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](18, "p");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵi18n"](19, 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()()()();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](20, "button", 23);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵlistener"]("click", function ParkingSpaceListComponent_ng_container_5_ul_1_li_1_Template_button_click_20_listener() {
      const space_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵrestoreView"](_r1).$implicit;
      const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"](3);
      return _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵresetView"](ctx_r2.toggleFav.emit(space_r2));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](21, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](22);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()()();
  }
  if (rf & 2) {
    const space_r2 = ctx.$implicit;
    const placeholder_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵreference"](6);
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵclassProp"]("!border-info", ctx_r2.active === space_r2.id);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", ctx_r2.selected.includes(space_r2.id));
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", space_r2.images == null ? null : space_r2.images.length)("ngIfElse", placeholder_r4);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtextInterpolate1"](" ", space_r2.name || "Meeting Space", " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtextInterpolate1"](" ", space_r2.location || (space_r2.level == null ? null : space_r2.level.display_name) || (space_r2.level == null ? null : space_r2.level.name) || (space_r2.zone == null ? null : space_r2.zone.display_name) || (space_r2.zone == null ? null : space_r2.zone.name), " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵi18nExp"](space_r2.capacity < 1 ? 2 : space_r2.capacity);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵi18nApply"](19);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵclassProp"]("text-info", ctx_r2.isFavourite(space_r2.id));
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtextInterpolate"](ctx_r2.isFavourite(space_r2.id) ? "favorite" : "favorite_border");
  }
}
function ParkingSpaceListComponent_ng_container_5_ul_1_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "ul", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](1, ParkingSpaceListComponent_ng_container_5_ul_1_li_1_Template, 23, 11, "li", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipe"](2, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngForOf", _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipeBind1"](2, 1, ctx_r2.assets));
  }
}
function ParkingSpaceListComponent_ng_container_5_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](1, ParkingSpaceListComponent_ng_container_5_ul_1_Template, 3, 3, "ul", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipe"](2, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementContainerEnd"]();
  }
  if (rf & 2) {
    let tmp_3_0;
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
    const empty_state_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵreference"](8);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", (tmp_3_0 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipeBind1"](2, 2, ctx_r2.assets)) == null ? null : tmp_3_0.length)("ngIfElse", empty_state_r5);
  }
}
function ParkingSpaceListComponent_ng_template_7_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "div", 27)(1, "p", 28);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵi18n"](2, 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()();
  }
}
function ParkingSpaceListComponent_ng_template_9_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "div", 29);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelement"](1, "mat-spinner", 30);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](2, "p", 31);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵi18n"](3, 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("diameter", 32);
  }
}
class ParkingSpaceListComponent {
  constructor(_form) {
    this._form = _form;
    this.active = '';
    this.selected = '';
    this.favorites = [];
    this.onSelect = new _angular_core__WEBPACK_IMPORTED_MODULE_3__.EventEmitter();
    this.toggleFav = new _angular_core__WEBPACK_IMPORTED_MODULE_3__.EventEmitter();
    this.assets = (0,rxjs__WEBPACK_IMPORTED_MODULE_4__.combineLatest)([this._form.options, this._form.available_resources]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.map)(([{
      show_fav
    }, _]) => _.filter(i => !show_fav || this.isFavourite(i.id))));
    this.loading = this._form.loading;
  }
  isFavourite(space_id) {
    return this.favorites.includes(space_id);
  }
  selectSpace(space) {
    this.onSelect.emit(space);
  }
  static #_ = this.ɵfac = function ParkingSpaceListComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || ParkingSpaceListComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵdirectiveInject"](_booking_form_service__WEBPACK_IMPORTED_MODULE_0__.BookingFormService));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵdefineComponent"]({
    type: ParkingSpaceListComponent,
    selectors: [["parking-space-list"]],
    inputs: {
      active: "active",
      selected: "selected",
      favorites: "favorites"
    },
    outputs: {
      onSelect: "onSelect",
      toggleFav: "toggleFav"
    },
    decls: 11,
    vars: 7,
    consts: () => {
      let i18n_0;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_5968132631442328843$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_LIST_COMPONENT_TS_0 = goog.getMsg("Results");
        i18n_0 = MSG_EXTERNAL_5968132631442328843$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_LIST_COMPONENT_TS_0;
      } else {
        i18n_0 = $localize`:␟80ed5b776a26a78099e230e0e89d96c33ba44e24␟5968132631442328843:Results`;
      }
      let i18n_1;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_4264834071624535187$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_LIST_COMPONENT_TS_1 = goog.getMsg(" {$interpolation} result(s) found ", {
          "interpolation": "\uFFFD0\uFFFD"
        }, {
          original_code: {
            "interpolation": "{{ (assets | async)?.length || 0 }}"
          }
        });
        i18n_1 = MSG_EXTERNAL_4264834071624535187$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_LIST_COMPONENT_TS_1;
      } else {
        i18n_1 = $localize`:␟dd662afda8b27e3c6818b705321ddcc36bd571c0␟4264834071624535187: ${"\uFFFD0\uFFFD"}:INTERPOLATION: result(s) found `;
      }
      let i18n_2;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_4552898751936658514$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_LIST_COMPONENT_TS_2 = goog.getMsg(" {$interpolation} People ", {
          "interpolation": "\uFFFD0\uFFFD"
        }, {
          original_code: {
            "interpolation": "{{\n                                        space.capacity < 1 ? 2 : space.capacity\n                                    }}"
          }
        });
        i18n_2 = MSG_EXTERNAL_4552898751936658514$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_LIST_COMPONENT_TS_2;
      } else {
        i18n_2 = $localize`:␟08719ea79f574b595da7d187fda2fa8c491b5de7␟4552898751936658514: ${"\uFFFD0\uFFFD"}:INTERPOLATION: People `;
      }
      let i18n_3;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_3831747985282777621$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_LIST_COMPONENT_TS_3 = goog.getMsg(" No available spaces for selected time and/or filters ");
        i18n_3 = MSG_EXTERNAL_3831747985282777621$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_LIST_COMPONENT_TS_3;
      } else {
        i18n_3 = $localize`:␟027c29534f5dc45741b226edfebb3f7f578384b0␟3831747985282777621: No available spaces for selected time and/or filters `;
      }
      let i18n_4;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_126579492602011343$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_LIST_COMPONENT_TS_4 = goog.getMsg("Finding available spaces...");
        i18n_4 = MSG_EXTERNAL_126579492602011343$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_LIST_COMPONENT_TS_4;
      } else {
        i18n_4 = $localize`:␟8dad32dda6491a1051df9156e98031c0e634b413␟126579492602011343:Finding available spaces...`;
      }
      return [["empty_state", ""], ["load_state", ""], ["placeholder", ""], i18n_0, i18n_1, i18n_2, i18n_3, i18n_4, [1, "font-bold"], ["count", "", 1, "text-sm", "opacity-60", "mb-4"], [4, "ngIf", "ngIfElse"], ["class", "list-style-none space-y-2", 4, "ngIf", "ngIfElse"], [1, "list-style-none", "space-y-2"], ["space", "", "class", "relative p-2 rounded-lg w-full shadow border bg-base-100 border-base-200", 3, "!border-info", 4, "ngFor", "ngForOf"], ["space", "", 1, "relative", "p-2", "rounded-lg", "w-full", "shadow", "border", "bg-base-100", "border-base-200"], ["matRipple", "", "select", "", 1, "w-full", "h-full", "flex", "items-center", 3, "click"], [1, "relative", "w-20", "h-20", "rounded-xl", "bg-base-200", "mr-4", "overflow-hidden", "flex", "items-center", "justify-center"], ["class", "absolute top-1 left-1 border border-neutral bg-base-200 rounded-full h-6 w-6 flex items-center justify-center text-white", 4, "ngIf"], ["auth", "", "class", "object-cover h-full", 3, "source", 4, "ngIf", "ngIfElse"], [1, "space-y-2"], [1, "font-medium", "truncate", "mr-10"], [1, "flex", "items-center", "text-sm", "space-x-2"], [1, "text-info"], ["icon", "", "matRipple", "", "fav", "", 1, "absolute", "top-1", "right-1", 3, "click"], [1, "absolute", "top-1", "left-1", "border", "border-neutral", "bg-base-200", "rounded-full", "h-6", "w-6", "flex", "items-center", "justify-center", "text-white"], ["auth", "", 1, "object-cover", "h-full", 3, "source"], ["src", "assets/icons/car-placeholder.svg", 1, "m-auto"], ["empty", "", 1, "p-16", "flex", "flex-col", "items-center", "justify-center", "space-y-2"], [1, "opacity-30", "text-center"], ["loading", "", 1, "p-16", "flex", "flex-col", "items-center", "justify-center", "space-y-2"], [3, "diameter"], [1, "opacity-30"]];
    },
    template: function ParkingSpaceListComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "h3", 8);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵi18n"](1, 3);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](2, "p", 9);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵi18n"](3, 4);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipe"](4, "async");
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](5, ParkingSpaceListComponent_ng_container_5_Template, 3, 4, "ng-container", 10);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipe"](6, "async");
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](7, ParkingSpaceListComponent_ng_template_7_Template, 3, 0, "ng-template", null, 0, _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplateRefExtractor"])(9, ParkingSpaceListComponent_ng_template_9_Template, 4, 1, "ng-template", null, 1, _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplateRefExtractor"]);
      }
      if (rf & 2) {
        let tmp_2_0;
        const load_state_r6 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵreference"](10);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](4);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵi18nExp"](((tmp_2_0 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipeBind1"](4, 3, ctx.assets)) == null ? null : tmp_2_0.length) || 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵi18nApply"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", !_angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipeBind1"](6, 5, ctx.loading))("ngIfElse", load_state_r6);
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_6__.NgForOf, _angular_common__WEBPACK_IMPORTED_MODULE_6__.NgIf, _angular_material_progress_spinner__WEBPACK_IMPORTED_MODULE_7__.MatProgressSpinner, _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_1__.IconComponent, _components_src_lib_authenticated_image_directive__WEBPACK_IMPORTED_MODULE_2__.AuthenticatedImageDirective, _angular_material_core__WEBPACK_IMPORTED_MODULE_8__.MatRipple, _angular_common__WEBPACK_IMPORTED_MODULE_6__.AsyncPipe],
    styles: ["[_nghost-%COMP%] {\n                width: 100%;\n                height: 100%;\n                padding: 0.5rem;\n                overflow: auto;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBhcmtpbmctbGlzdC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLFdBQVc7Z0JBQ1gsWUFBWTtnQkFDWixlQUFlO2dCQUNmLGNBQWM7WUFDbEIiLCJmaWxlIjoicGFya2luZy1saXN0LmNvbXBvbmVudC50cyIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgOmhvc3Qge1xuICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiAwLjVyZW07XG4gICAgICAgICAgICAgICAgb3ZlcmZsb3c6IGF1dG87XG4gICAgICAgICAgICB9XG4gICAgICAgICJdfQ== */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvYm9va2luZ3Mvc3JjL2xpYi9wYXJraW5nLXNlbGVjdC1tb2RhbC9wYXJraW5nLWxpc3QuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxXQUFXO2dCQUNYLFlBQVk7Z0JBQ1osZUFBZTtnQkFDZixjQUFjO1lBQ2xCOztBQUVaLDRoQkFBNGhCIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICA6aG9zdCB7XG4gICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgICAgICAgICAgIHBhZGRpbmc6IDAuNXJlbTtcbiAgICAgICAgICAgICAgICBvdmVyZmxvdzogYXV0bztcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl0sInNvdXJjZVJvb3QiOiIifQ== */"]
  });
}

/***/ }),

/***/ 48559:
/*!**************************************************************************************!*\
  !*** ./libs/bookings/src/lib/parking-select-modal/parking-location-pin.component.ts ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ParkingSpaceLocationPinComponent: () => (/* binding */ ParkingSpaceLocationPinComponent)
/* harmony export */ });
/* harmony import */ var _placeos_components__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/components */ 51588);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../components/src/lib/icon.component */ 69434);




function ParkingSpaceLocationPinComponent_div_15_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelement"](0, "div", 16);
  }
}
function ParkingSpaceLocationPinComponent_app_icon_16_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](0, "app-icon", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](1, " done ");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
  }
}
class ParkingSpaceLocationPinComponent {
  get selected() {
    return this._data.selected === true;
  }
  constructor(_data) {
    this._data = _data;
  }
  static #_ = this.ɵfac = function ParkingSpaceLocationPinComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || ParkingSpaceLocationPinComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdirectiveInject"](_placeos_components__WEBPACK_IMPORTED_MODULE_0__.MAP_FEATURE_DATA));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdefineComponent"]({
    type: ParkingSpaceLocationPinComponent,
    selectors: [["parking-space-location-pin"]],
    decls: 17,
    vars: 2,
    consts: [[1, "absolute", "bottom-0", "left-1/2", "-translate-x-1/2"], ["width", "66", "height", "80", "viewBox", "0 0 66 80", "fill", "none", "xmlns", "http://www.w3.org/2000/svg"], ["filter", "url(#filter0_d_1065_10313)"], ["d", "M19.724 53.0408C25.0871 60.3435 30.5582 65.8583 31.0184 66.3178C31.4558 66.755 32.0489 67.0007 32.6674 67.0008H32.6678C33.2863 67.0007 33.8795 66.755 34.3169 66.3178C34.7771 65.8583 40.2481 60.3435 45.6112 53.0408C48.2928 49.3894 50.963 45.2701 52.9663 41.0957C54.9629 36.935 56.3331 32.6459 56.3342 28.6724C56.364 25.5564 55.7725 22.4657 54.5941 19.5809C53.415 16.6946 51.6722 14.0724 49.4675 11.8677C47.2629 9.66308 44.6407 7.92024 41.7544 6.74121C38.8711 5.5634 35.782 4.97184 32.6676 5.00103C29.5533 4.97184 26.4642 5.5634 23.5809 6.74121C20.6946 7.92024 18.0724 9.66308 15.8677 11.8677C13.6631 14.0724 11.9202 16.6946 10.7412 19.5809C9.56278 22.4657 8.97122 25.5565 9.00108 28.6726C9.0022 32.646 10.3724 36.9351 12.369 41.0957C14.3723 45.2701 17.0425 49.3894 19.724 53.0408Z", "fill", "#309251", "stroke", "#0B421D", "stroke-width", "2"], ["id", "filter0_d_1065_10313", "x", "0", "y", "0", "width", "65.3353", "height", "80.001", "filterUnits", "userSpaceOnUse", "color-interpolation-filters", "sRGB"], ["flood-opacity", "0", "result", "BackgroundImageFix"], ["in", "SourceAlpha", "type", "matrix", "values", "0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0", "result", "hardAlpha"], ["dy", "4"], ["stdDeviation", "4"], ["in2", "hardAlpha", "operator", "out"], ["type", "matrix", "values", "0 0 0 0 0.0196078 0 0 0 0 0.109804 0 0 0 0 0.172549 0 0 0 0.2 0"], ["mode", "normal", "in2", "BackgroundImageFix", "result", "effect1_dropShadow_1065_10313"], ["mode", "normal", "in", "SourceGraphic", "in2", "effect1_dropShadow_1065_10313", "result", "shape"], [1, "absolute", "top-0", "left-0", "w-full", "h-3/4", "flex", "items-center", "justify-center"], ["class", "relative z-10 h-4 w-4 rounded-full bg-base-100 border-2 border-[#0B421D]", 4, "ngIf"], ["class", "relative text-white z-10 text-2xl", 4, "ngIf"], [1, "relative", "z-10", "h-4", "w-4", "rounded-full", "bg-base-100", "border-2", "border-[#0B421D]"], [1, "relative", "text-white", "z-10", "text-2xl"]],
    template: function ParkingSpaceLocationPinComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](0, "div", 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnamespaceSVG"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](1, "svg", 1)(2, "g", 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelement"](3, "path", 3);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](4, "defs")(5, "filter", 4);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelement"](6, "feFlood", 5)(7, "feColorMatrix", 6)(8, "feOffset", 7)(9, "feGaussianBlur", 8)(10, "feComposite", 9)(11, "feColorMatrix", 10)(12, "feBlend", 11)(13, "feBlend", 12);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]()()();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnamespaceHTML"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](14, "div", 13);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](15, ParkingSpaceLocationPinComponent_div_15_Template, 1, 0, "div", 14)(16, ParkingSpaceLocationPinComponent_app_icon_16_Template, 2, 0, "app-icon", 15);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]()();
      }
      if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](15);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngIf", !ctx.selected);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngIf", ctx.selected);
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_3__.NgIf, _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_1__.IconComponent],
    encapsulation: 2
  });
}

/***/ }),

/***/ 88952:
/*!*****************************************************************************!*\
  !*** ./libs/bookings/src/lib/parking-select-modal/parking-map.component.ts ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ParkingSpaceSelectMapComponent: () => (/* binding */ ParkingSpaceSelectMapComponent)
/* harmony export */ });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var _placeos_events__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @placeos/events */ 40569);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! rxjs/operators */ 35443);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! rxjs/operators */ 19803);
/* harmony import */ var _parking_location_pin_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./parking-location-pin.component */ 48559);
/* harmony import */ var libs_common_src_lib_mapspeople_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! libs/common/src/lib/mapspeople.service */ 99420);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @angular/forms */ 34456);
/* harmony import */ var _angular_material_form_field__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @angular/material/form-field */ 24950);
/* harmony import */ var _angular_material_core__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @angular/material/core */ 74646);
/* harmony import */ var _components_src_lib_interactive_map_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../components/src/lib/interactive-map.component */ 24918);
/* harmony import */ var _angular_material_select__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @angular/material/select */ 25175);















const _c0 = () => ({
  controls: true
});
function ParkingSpaceSelectMapComponent_ng_container_0_Template(rf, ctx) {
  if (rf & 1) {
    const _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](1, "interactive-map", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipe"](2, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipe"](3, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipe"](4, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtwoWayListener"]("zoomChange", function ParkingSpaceSelectMapComponent_ng_container_0_Template_interactive_map_zoomChange_1_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵrestoreView"](_r1);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"]();
      _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtwoWayBindingSet"](ctx_r1.zoom, $event) || (ctx_r1.zoom = $event);
      return _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵresetView"]($event);
    })("centerChange", function ParkingSpaceSelectMapComponent_ng_container_0_Template_interactive_map_centerChange_1_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵrestoreView"](_r1);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"]();
      _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtwoWayBindingSet"](ctx_r1.center, $event) || (ctx_r1.center = $event);
      return _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵresetView"]($event);
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementContainerEnd"]();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("src", ctx_r1.map_url);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtwoWayProperty"]("zoom", ctx_r1.zoom)("center", ctx_r1.center);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("styles", _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipeBind1"](2, 7, ctx_r1.styles))("features", _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipeBind1"](3, 9, ctx_r1.features))("actions", _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipeBind1"](4, 11, ctx_r1.actions))("options", _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpureFunction0"](13, _c0));
  }
}
function ParkingSpaceSelectMapComponent_mat_option_4_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "mat-option", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const opt_r3 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("value", opt_r3);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtextInterpolate1"](" ", opt_r3.display_name || opt_r3.name, " ");
  }
}
class ParkingSpaceSelectMapComponent extends _placeos_common__WEBPACK_IMPORTED_MODULE_0__.AsyncHandler {
  get map_url() {
    return this.level?.map_id || '';
  }
  constructor(_event_form, _maps_people) {
    super();
    this._event_form = _event_form;
    this._maps_people = _maps_people;
    this.selected = [];
    this.is_displayed = false;
    this.onSelect = new _angular_core__WEBPACK_IMPORTED_MODULE_5__.EventEmitter();
    this.zoom = 1;
    this.center = {
      x: 0.5,
      y: 0.5
    };
    this._seletedSpace = s => () => this.onSelect.emit(s);
    this.level = null;
    this.levels = this._event_form.available_spaces.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.map)(_ => (0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.unique)(_.map(({
      level
    }) => level))));
    this.features = this._event_form.available_spaces.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.debounceTime)(1000), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.map)(l => l.map(space => ({
      location: space.map_id,
      content: _parking_location_pin_component__WEBPACK_IMPORTED_MODULE_2__.ParkingSpaceLocationPinComponent,
      data: {
        ...space,
        selected: this.selected.includes(space.id)
      }
    }))));
    this.actions = this._event_form.available_spaces.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.map)(l => l.map(space => ({
      id: space.map_id,
      action: ['touchend', 'mouseup'],
      callback: this._seletedSpace(space)
    }))));
  }
  ngOnInit() {
    this.subscription('spaces', this._event_form.available_spaces.subscribe(_ => {
      if (!this.level && _.length) this.level = _[0].level;
    }));
  }
  setLevel(level) {
    this.level = level;
    this._maps_people.setCustomZone(level.parent_id);
  }
  setZoom(new_zoom) {
    this.zoom = Math.max(0.5, Math.min(10, new_zoom));
  }
  resetMap() {
    this.zoom = 1;
    this.center = {
      x: 0.5,
      y: 0.5
    };
  }
  static #_ = this.ɵfac = function ParkingSpaceSelectMapComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || ParkingSpaceSelectMapComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵdirectiveInject"](_placeos_events__WEBPACK_IMPORTED_MODULE_1__.EventFormService), _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵdirectiveInject"](libs_common_src_lib_mapspeople_service__WEBPACK_IMPORTED_MODULE_3__.MapsPeopleService));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵdefineComponent"]({
    type: ParkingSpaceSelectMapComponent,
    selectors: [["parking-space-map"]],
    inputs: {
      selected: "selected",
      is_displayed: "is_displayed"
    },
    outputs: {
      onSelect: "onSelect"
    },
    features: [_angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵInheritDefinitionFeature"]],
    decls: 6,
    vars: 5,
    consts: [[4, "ngIf"], [1, "absolute", "inset-x-0", "top-0", "bg-base-100", "p-2", "border-b", "border-base-200"], ["levels", "", "appearance", "outline", 1, "w-full", "h-[3.25rem]"], [3, "ngModelChange", "ngModel"], [3, "value", 4, "ngFor", "ngForOf"], [3, "zoomChange", "centerChange", "src", "zoom", "center", "styles", "features", "actions", "options"], [3, "value"]],
    template: function ParkingSpaceSelectMapComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](0, ParkingSpaceSelectMapComponent_ng_container_0_Template, 5, 14, "ng-container", 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](1, "div", 1)(2, "mat-form-field", 2)(3, "mat-select", 3);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtwoWayListener"]("ngModelChange", function ParkingSpaceSelectMapComponent_Template_mat_select_ngModelChange_3_listener($event) {
          _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtwoWayBindingSet"](ctx.level, $event) || (ctx.level = $event);
          return $event;
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("ngModelChange", function ParkingSpaceSelectMapComponent_Template_mat_select_ngModelChange_3_listener($event) {
          return ctx.setLevel($event);
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](4, ParkingSpaceSelectMapComponent_mat_option_4_Template, 2, 2, "mat-option", 4);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipe"](5, "async");
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]()()();
      }
      if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngIf", ctx.is_displayed);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtwoWayProperty"]("ngModel", ctx.level);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngForOf", _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipeBind1"](5, 3, ctx.levels));
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_8__.NgForOf, _angular_common__WEBPACK_IMPORTED_MODULE_8__.NgIf, _angular_forms__WEBPACK_IMPORTED_MODULE_9__.NgControlStatus, _angular_forms__WEBPACK_IMPORTED_MODULE_9__.NgModel, _angular_material_form_field__WEBPACK_IMPORTED_MODULE_10__.MatFormField, _angular_material_core__WEBPACK_IMPORTED_MODULE_11__.MatOption, _components_src_lib_interactive_map_component__WEBPACK_IMPORTED_MODULE_4__.InteractiveMapComponent, _angular_material_select__WEBPACK_IMPORTED_MODULE_12__.MatSelect, _angular_common__WEBPACK_IMPORTED_MODULE_8__.AsyncPipe],
    styles: ["[_nghost-%COMP%] {\n                position: relative;\n                background: rgba(0, 0, 0, 0.05);\n                padding-top: 4rem;\n            }\n\n            button[_ngcontent-%COMP%] {\n                border-radius: 0;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBhcmtpbmctbWFwLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1lBQ1k7Z0JBQ0ksa0JBQWtCO2dCQUNsQiwrQkFBK0I7Z0JBQy9CLGlCQUFpQjtZQUNyQjs7WUFFQTtnQkFDSSxnQkFBZ0I7WUFDcEIiLCJmaWxlIjoicGFya2luZy1tYXAuY29tcG9uZW50LnRzIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICA6aG9zdCB7XG4gICAgICAgICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IHJnYmEoMCwgMCwgMCwgMC4wNSk7XG4gICAgICAgICAgICAgICAgcGFkZGluZy10b3A6IDRyZW07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGJ1dHRvbiB7XG4gICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl19 */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvYm9va2luZ3Mvc3JjL2xpYi9wYXJraW5nLXNlbGVjdC1tb2RhbC9wYXJraW5nLW1hcC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLGtCQUFrQjtnQkFDbEIsK0JBQStCO2dCQUMvQixpQkFBaUI7WUFDckI7O1lBRUE7Z0JBQ0ksZ0JBQWdCO1lBQ3BCOztBQUVaLGdwQkFBZ3BCIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICA6aG9zdCB7XG4gICAgICAgICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IHJnYmEoMCwgMCwgMCwgMC4wNSk7XG4gICAgICAgICAgICAgICAgcGFkZGluZy10b3A6IDRyZW07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGJ1dHRvbiB7XG4gICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl0sInNvdXJjZVJvb3QiOiIifQ== */"]
  });
}

/***/ }),

/***/ 67642:
/*!**************************************************************************************!*\
  !*** ./libs/bookings/src/lib/parking-select-modal/parking-select-modal.component.ts ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   FAV_PARKING_KEY: () => (/* binding */ FAV_PARKING_KEY),
/* harmony export */   ParkingSpaceSelectModalComponent: () => (/* binding */ ParkingSpaceSelectModalComponent)
/* harmony export */ });
/* harmony import */ var _angular_material_dialog__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @angular/material/dialog */ 12587);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var _booking_form_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../booking-form.service */ 18379);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../components/src/lib/icon.component */ 69434);
/* harmony import */ var _angular_material_core__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @angular/material/core */ 74646);
/* harmony import */ var _parking_filters_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./parking-filters.component */ 39145);
/* harmony import */ var _parking_filters_display_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./parking-filters-display.component */ 19138);
/* harmony import */ var _parking_list_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./parking-list.component */ 30258);
/* harmony import */ var _parking_map_component__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./parking-map.component */ 88952);
/* harmony import */ var _parking_details_component__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./parking-details.component */ 6724);















function ParkingSpaceSelectModalComponent_parking_space_list_11_Template(rf, ctx) {
  if (rf & 1) {
    const _r2 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](0, "parking-space-list", 26);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵlistener"]("toggleFav", function ParkingSpaceSelectModalComponent_parking_space_list_11_Template_parking_space_list_toggleFav_0_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵrestoreView"](_r2);
      const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵresetView"](ctx_r2.toggleFavourite($event));
    })("onSelect", function ParkingSpaceSelectModalComponent_parking_space_list_11_Template_parking_space_list_onSelect_0_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵrestoreView"](_r2);
      const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵresetView"](ctx_r2.displayed = $event);
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("active", ctx_r2.displayed == null ? null : ctx_r2.displayed.id)("selected", ctx_r2.selected_ids)("favorites", ctx_r2.favorites);
  }
}
function ParkingSpaceSelectModalComponent_button_14_Template(rf, ctx) {
  if (rf & 1) {
    const _r4 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](0, "button", 27);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵlistener"]("click", function ParkingSpaceSelectModalComponent_button_14_Template_button_click_0_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵrestoreView"](_r4);
      const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵresetView"](ctx_r2.displayed = null);
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵi18n"](1, 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
  }
}
function ParkingSpaceSelectModalComponent_ng_template_32_Template(rf, ctx) {
  if (rf & 1) {
    const _r5 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](0, "parking-space-map", 28);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵlistener"]("onSelect", function ParkingSpaceSelectModalComponent_ng_template_32_Template_parking_space_map_onSelect_0_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵrestoreView"](_r5);
      const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵresetView"](ctx_r2.displayed = $event);
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("selected", ctx_r2.selected_ids)("is_displayed", !!ctx_r2.displayed);
  }
}
const FAV_PARKING_KEY = 'favourite_parking_spaces';
class ParkingSpaceSelectModalComponent {
  get selected_ids() {
    return this.selected.map(_ => _.id).join(',');
  }
  get favorites() {
    return this._settings.get(FAV_PARKING_KEY) || [];
  }
  constructor(_dialog_ref, _settings, _event_form, _data) {
    this._dialog_ref = _dialog_ref;
    this._settings = _settings;
    this._event_form = _event_form;
    this._data = _data;
    this.selected = [];
    this.view = 'list';
    this.selected = [...(_data.spaces || [])];
    this._event_form.setOptions(_data.options);
  }
  isSelected(id) {
    return id && this.selected_ids.includes(id);
  }
  setSelected(item, state) {
    const list = this.selected.filter(_ => _.id !== item.id);
    if (state) list.push(item);
    this.selected = list;
    if (!this._data.options.group && state) this._dialog_ref.close([item]);
  }
  toggleFavourite(item) {
    const fav_list = this.favorites;
    const new_state = !fav_list.includes(item.id);
    if (new_state) {
      this._settings.saveUserSetting(FAV_PARKING_KEY, [...fav_list, item.id]);
    } else {
      this._settings.saveUserSetting(FAV_PARKING_KEY, fav_list.filter(_ => _ !== item.id));
    }
  }
  static #_ = this.ɵfac = function ParkingSpaceSelectModalComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || ParkingSpaceSelectModalComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵdirectiveInject"](_angular_material_dialog__WEBPACK_IMPORTED_MODULE_9__.MatDialogRef), _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵdirectiveInject"](_placeos_common__WEBPACK_IMPORTED_MODULE_0__.SettingsService), _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵdirectiveInject"](_booking_form_service__WEBPACK_IMPORTED_MODULE_1__.BookingFormService), _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵdirectiveInject"](_angular_material_dialog__WEBPACK_IMPORTED_MODULE_9__.MAT_DIALOG_DATA));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵdefineComponent"]({
    type: ParkingSpaceSelectModalComponent,
    selectors: [["parking-space-select-modal"]],
    decls: 34,
    vars: 22,
    consts: () => {
      let i18n_0;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_6275162452894389177$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_SELECT_MODAL_COMPONENT_TS_0 = goog.getMsg("Find Parking Space");
        i18n_0 = MSG_EXTERNAL_6275162452894389177$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_SELECT_MODAL_COMPONENT_TS_0;
      } else {
        i18n_0 = $localize`:␟8db1ccf77dfb75785bcf8e9090ad65ea6ab69884␟6275162452894389177:Find Parking Space`;
      }
      let i18n_1;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_8443571736703532556$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_SELECT_MODAL_COMPONENT_TS_1 = goog.getMsg(" View List ");
        i18n_1 = MSG_EXTERNAL_8443571736703532556$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_SELECT_MODAL_COMPONENT_TS_1;
      } else {
        i18n_1 = $localize`:␟30d3439b0e0095fe69503245f3bd7a2e9498be7c␟8443571736703532556: View List `;
      }
      let i18n_2;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_819716823718458903$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_SELECT_MODAL_COMPONENT_TS_2 = goog.getMsg("Back to form");
        i18n_2 = MSG_EXTERNAL_819716823718458903$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_SELECT_MODAL_COMPONENT_TS_2;
      } else {
        i18n_2 = $localize`:␟18843b85d1a4f17fefafd07bc5cde636dca44295␟819716823718458903:Back to form`;
      }
      let i18n_3;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_7685760017883569970$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_SELECT_MODAL_COMPONENT_TS_3 = goog.getMsg(" {$interpolation} bay(s) added ", {
          "interpolation": "\uFFFD0\uFFFD"
        }, {
          original_code: {
            "interpolation": "{{ selected.length }}"
          }
        });
        i18n_3 = MSG_EXTERNAL_7685760017883569970$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_SELECT_MODAL_COMPONENT_TS_3;
      } else {
        i18n_3 = $localize`:␟f5e618f8255889ca7743db771c50b6181b8eb362␟7685760017883569970: ${"\uFFFD0\uFFFD"}:INTERPOLATION: bay(s) added `;
      }
      let i18n_4;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_874721418273731876$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_SELECT_MODAL_COMPONENT_TS_4 = goog.getMsg(" Back ");
        i18n_4 = MSG_EXTERNAL_874721418273731876$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_SELECT_MODAL_COMPONENT_TS_4;
      } else {
        i18n_4 = $localize`:␟ccda1d41ca79703a85a3a598c1d97e040a32b766␟874721418273731876: Back `;
      }
      return [["map_view", ""], i18n_0, i18n_1, i18n_2, i18n_3, i18n_4, [1, "w-[100vw]", "h-[100vh]", "sm:relative", "sm:w-auto", "sm:h-auto", "flex", "flex-col", "bg-base-100"], [1, "flex", "items-center", "space-x-4", "w-full"], ["icon", "", "matRipple", "", "mat-dialog-close", "", 1, "bg-base-200"], [1, "flex-1", "flex", "items-center", "divide-x", "divide-base-200", "min-h-[65vh]", "h-[65vh]", "sm:max-h-[65vh]", "sm:max-w-[95vw]", "w-full", "overflow-hidden"], [1, "h-full", "hidden", "sm:flex", "max-w-[20rem]", "sm:h-[65vh]", "sm:max-h-full", 3, "hide_levels"], [1, "flex", "flex-col", "items-center", "flex-1", "w-1/2", "h-full", "sm:h-[65vh]"], [1, "w-full", "border-b", "border-base-200", 3, "viewChange", "view"], ["class", "flex-1 h-1/2 bg-base-200", 3, "active", "selected", "favorites", "toggleFav", "onSelect", 4, "ngIf", "ngIfElse"], [1, "h-full", "w-full", "sm:h-[65vh]", "absolute", "sm:relative", "sm:flex", "sm:max-w-[20rem]", "z-20", "bg-base-100", "block", 3, "activeChange", "toggleFav", "close", "space", "active", "fav"], [1, "flex", "sm:hidden", "flex-col-reverse", "items-center", "justify-end", "p-2", "border-t", "border-base-200", "w-full"], ["btn", "", "matRipple", "", "return", "", "class", "inverse sm:hidden w-full", 3, "click", 4, "ngIf"], ["btn", "", "matRipple", "", "save", "", 1, "w-full", "sm:w-32", "sm:mb-0", 3, "mat-dialog-close"], [1, "hidden", "sm:flex", "items-center", "justify-between", "p-2", "border-t", "border-base-200", "w-full"], ["btn", "", "matRipple", "", 1, "clear", "text-secondary", 3, "mat-dialog-close"], [1, "flex", "items-center"], [1, "text-xl"], [1, "mr-1", "underline"], [1, "opacity-60", "text-sm"], ["btn", "", "matRipple", "", 3, "click", "disabled"], [1, "mr-1"], [1, "flex-1", "h-1/2", "bg-base-200", 3, "toggleFav", "onSelect", "active", "selected", "favorites"], ["btn", "", "matRipple", "", "return", "", 1, "inverse", "sm:hidden", "w-full", 3, "click"], [1, "flex-1", "h-1/2", "w-full", 3, "onSelect", "selected", "is_displayed"]];
    },
    template: function ParkingSpaceSelectModalComponent_Template(rf, ctx) {
      if (rf & 1) {
        const _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵgetCurrentView"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](0, "div", 6)(1, "header", 7)(2, "button", 8)(3, "app-icon");
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](4, "close");
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](5, "h3");
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵi18n"](6, 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](7, "main", 9);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelement"](8, "parking-space-filters", 10);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](9, "div", 11)(10, "parking-space-filters-display", 12);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtwoWayListener"]("viewChange", function ParkingSpaceSelectModalComponent_Template_parking_space_filters_display_viewChange_10_listener($event) {
          _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵrestoreView"](_r1);
          _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtwoWayBindingSet"](ctx.view, $event) || (ctx.view = $event);
          return _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵresetView"]($event);
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtemplate"](11, ParkingSpaceSelectModalComponent_parking_space_list_11_Template, 1, 3, "parking-space-list", 13);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](12, "parking-space-details", 14);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵlistener"]("activeChange", function ParkingSpaceSelectModalComponent_Template_parking_space_details_activeChange_12_listener($event) {
          _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵrestoreView"](_r1);
          return _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵresetView"](ctx.setSelected(ctx.displayed, $event));
        })("toggleFav", function ParkingSpaceSelectModalComponent_Template_parking_space_details_toggleFav_12_listener() {
          _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵrestoreView"](_r1);
          return _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵresetView"](ctx.toggleFavourite(ctx.displayed));
        })("close", function ParkingSpaceSelectModalComponent_Template_parking_space_details_close_12_listener() {
          _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵrestoreView"](_r1);
          return _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵresetView"](ctx.displayed = null);
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](13, "footer", 15);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtemplate"](14, ParkingSpaceSelectModalComponent_button_14_Template, 2, 0, "button", 16);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](15, "button", 17);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵi18n"](16, 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](17, "footer", 18)(18, "button", 19)(19, "div", 20)(20, "app-icon", 21);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](21, "arrow_back");
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](22, "div", 22);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵi18n"](23, 3);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]()()();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](24, "p", 23);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵi18n"](25, 4);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](26, "button", 24);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵlistener"]("click", function ParkingSpaceSelectModalComponent_Template_button_click_26_listener() {
          _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵrestoreView"](_r1);
          return _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵresetView"](ctx.setSelected(ctx.displayed, !ctx.isSelected(ctx.displayed == null ? null : ctx.displayed.id)));
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](27, "div", 20)(28, "app-icon", 21);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](29);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](30, "div", 25);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](31);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]()()()()();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtemplate"](32, ParkingSpaceSelectModalComponent_ng_template_32_Template, 1, 2, "ng-template", null, 0, _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtemplateRefExtractor"]);
      }
      if (rf & 2) {
        const map_view_r6 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵreference"](33);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](8);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("hide_levels", ctx.view !== "list");
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtwoWayProperty"]("view", ctx.view);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngIf", ctx.view === "list")("ngIfElse", map_view_r6);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵclassProp"]("hidden", !ctx.displayed)("inset-0", ctx.displayed);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("space", ctx.displayed)("active", ctx.selected_ids.includes(ctx.displayed == null ? null : ctx.displayed.id))("fav", ctx.displayed && ctx.favorites.includes(ctx.displayed == null ? null : ctx.displayed.id));
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngIf", ctx.displayed);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵclassProp"]("mb-2", ctx.displayed);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("mat-dialog-close", ctx.selected);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("mat-dialog-close", ctx.selected);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](7);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵi18nExp"](ctx.selected.length);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵi18nApply"](25);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵclassProp"]("inverse", ctx.isSelected(ctx.displayed == null ? null : ctx.displayed.id));
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("disabled", !ctx.displayed);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtextInterpolate"](ctx.isSelected(ctx.displayed == null ? null : ctx.displayed.id) ? "remove" : "add");
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtextInterpolate1"](" ", ctx.isSelected(ctx.displayed == null ? null : ctx.displayed.id) ? "Remove from Booking" : "Add to booking", " ");
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_10__.NgIf, _angular_material_dialog__WEBPACK_IMPORTED_MODULE_9__.MatDialogClose, _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_2__.IconComponent, _angular_material_core__WEBPACK_IMPORTED_MODULE_11__.MatRipple, _parking_filters_component__WEBPACK_IMPORTED_MODULE_3__.ParkingSpaceFiltersComponent, _parking_filters_display_component__WEBPACK_IMPORTED_MODULE_4__.ParkingSpaceFiltersDisplayComponent, _parking_list_component__WEBPACK_IMPORTED_MODULE_5__.ParkingSpaceListComponent, _parking_map_component__WEBPACK_IMPORTED_MODULE_6__.ParkingSpaceSelectMapComponent, _parking_details_component__WEBPACK_IMPORTED_MODULE_7__.ParkingSpaceDetailsComponent]
  });
}

/***/ }),

/***/ 24844:
/*!*********************************************************************!*\
  !*** ./libs/bookings/src/lib/parking-space-list-field.component.ts ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ParkingSpaceListFieldComponent: () => (/* binding */ ParkingSpaceListFieldComponent)
/* harmony export */ });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @angular/forms */ 34456);
/* harmony import */ var libs_common_src_lib_settings_service__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! libs/common/src/lib/settings.service */ 14233);
/* harmony import */ var _parking_select_modal_parking_select_modal_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./parking-select-modal/parking-select-modal.component */ 67642);
/* harmony import */ var _angular_material_dialog__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/material/dialog */ 12587);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../components/src/lib/icon.component */ 69434);
/* harmony import */ var _components_src_lib_authenticated_image_directive__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../components/src/lib/authenticated-image.directive */ 93208);
/* harmony import */ var _angular_material_core__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @angular/material/core */ 74646);












function ParkingSpaceListFieldComponent_div_1_img_2_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelement"](0, "img", 24);
  }
  if (rf & 2) {
    const space_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"]().$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("source", space_r2.images[0]);
  }
}
function ParkingSpaceListFieldComponent_div_1_ng_template_3_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelement"](0, "img", 25);
  }
}
function ParkingSpaceListFieldComponent_div_1_Template(rf, ctx) {
  if (rf & 1) {
    const _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](0, "div", 12)(1, "div", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](2, ParkingSpaceListFieldComponent_div_1_img_2_Template, 1, 1, "img", 14)(3, ParkingSpaceListFieldComponent_div_1_ng_template_3_Template, 1, 0, "ng-template", null, 0, _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplateRefExtractor"]);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](5, "div", 15)(6, "div", 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](7);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](8, "div", 17)(9, "app-icon", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](10, "place");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](11, "p");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](12);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](13, "div", 17)(14, "app-icon", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](15, "people");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](16, "p");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵi18n"](17, 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](18, "div", 19)(19, "button", 20);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵlistener"]("click", function ParkingSpaceListFieldComponent_div_1_Template_button_click_19_listener() {
      const space_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵrestoreView"](_r1).$implicit;
      const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵresetView"](ctx_r2.changeResources(space_r2));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](20, "div", 21);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵi18nStart"](21, 3);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelement"](22, "app-icon", 9)(23, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵi18nEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](24, "button", 22);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵlistener"]("click", function ParkingSpaceListFieldComponent_div_1_Template_button_click_24_listener() {
      const space_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵrestoreView"](_r1).$implicit;
      const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵresetView"](ctx_r2.removeResource(space_r2));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](25, "div", 21);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵi18nStart"](26, 4);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelement"](27, "app-icon", 9)(28, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵi18nEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]()()()();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](29, "button", 23);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵlistener"]("click", function ParkingSpaceListFieldComponent_div_1_Template_button_click_29_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵrestoreView"](_r1);
      const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵresetView"](ctx_r2.toggleFavourite(ctx_r2.asset));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](30, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](31);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]()()();
  }
  if (rf & 2) {
    const space_r2 = ctx.$implicit;
    const placeholder_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵreference"](4);
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngIf", space_r2.images == null ? null : space_r2.images.length)("ngIfElse", placeholder_r4);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtextInterpolate1"](" ", space_r2.name || "Meeting Resource", " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtextInterpolate1"](" ", space_r2.location || (space_r2.level == null ? null : space_r2.level.display_name) || (space_r2.level == null ? null : space_r2.level.name) || (space_r2.zone == null ? null : space_r2.zone.display_name) || (space_r2.zone == null ? null : space_r2.zone.name), " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵi18nExp"](space_r2.capacity < 1 ? 2 : space_r2.capacity || 1)(space_r2.capacity < 1 ? 2 : space_r2.capacity || 1);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵi18nApply"](17);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](12);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵclassProp"]("text-blue-400", ctx_r2.favorites.includes(ctx_r2.asset == null ? null : ctx_r2.asset.id));
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtextInterpolate"](ctx_r2.favorites.includes(ctx_r2.asset == null ? null : ctx_r2.asset.id) ? "favorite" : "favorite_border");
  }
}
const EMPTY_FAVS = [];
class ParkingSpaceListFieldComponent {
  get favorites() {
    return this._settings.get('favourite_spaces') || EMPTY_FAVS;
  }
  constructor(_settings, _dialog) {
    this._settings = _settings;
    this._dialog = _dialog;
    this.disable_date = false;
    this.room_size = 3;
    this.spaces = [];
    this.disabled = false;
    /* istanbul ignore next */
    this.registerOnChange = fn => this._onChange = fn;
    /* istanbul ignore next */
    this.registerOnTouched = fn => this._onTouch = fn;
    this.setDisabledState = s => this.disabled = s;
  }
  /** Add or edit selected spaces */
  changeResources() {
    const ref = this._dialog.open(_parking_select_modal_parking_select_modal_component__WEBPACK_IMPORTED_MODULE_1__.ParkingSpaceSelectModalComponent, {
      data: {
        spaces: this.spaces,
        options: {
          capacity: this.room_size,
          disable_date: this.disable_date
        }
      }
    });
    ref.afterClosed().subscribe(spaces => {
      if (!spaces) return;
      this.setValue(spaces);
    });
  }
  /** Remove the selected space from the list */
  removeResource(space) {
    this.setValue(this.spaces.filter(_ => _.id !== space.id));
  }
  /**
   * Update the form field value
   * @param new_value New value to set on the form field
   */
  setValue(new_value) {
    this.spaces = new_value;
    if (this._onChange) this._onChange(this.spaces);
  }
  /* istanbul ignore next */
  /**
   * Update local value when form control value is changed
   * @param value The new value for the component
   */
  writeValue(value) {
    this.spaces = value || [];
  }
  toggleFavourite(space) {
    const fav_list = this.favorites;
    const new_state = !fav_list.includes(space.id);
    if (new_state) {
      this._settings.saveUserSetting(_parking_select_modal_parking_select_modal_component__WEBPACK_IMPORTED_MODULE_1__.FAV_PARKING_KEY, [...fav_list, space.id]);
    } else {
      this._settings.saveUserSetting(_parking_select_modal_parking_select_modal_component__WEBPACK_IMPORTED_MODULE_1__.FAV_PARKING_KEY, fav_list.filter(_ => _ !== space.id));
    }
  }
  static #_ = this.ɵfac = function ParkingSpaceListFieldComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || ParkingSpaceListFieldComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵdirectiveInject"](libs_common_src_lib_settings_service__WEBPACK_IMPORTED_MODULE_0__.SettingsService), _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵdirectiveInject"](_angular_material_dialog__WEBPACK_IMPORTED_MODULE_5__.MatDialog));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵdefineComponent"]({
    type: ParkingSpaceListFieldComponent,
    selectors: [["parking-space-list-field"]],
    inputs: {
      disable_date: "disable_date"
    },
    features: [_angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵProvidersFeature"]([{
      provide: _angular_forms__WEBPACK_IMPORTED_MODULE_6__.NG_VALUE_ACCESSOR,
      useExisting: (0,_angular_core__WEBPACK_IMPORTED_MODULE_4__.forwardRef)(() => ParkingSpaceListFieldComponent),
      multi: true
    }])],
    decls: 10,
    vars: 1,
    consts: () => {
      let i18n_0;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_1439078713747050312$$LIBS_BOOKINGS_SRC_LIB_PARKING_SPACE_LIST_FIELD_COMPONENT_TS_0 = goog.getMsg("Add Parking Resource");
        i18n_0 = MSG_EXTERNAL_1439078713747050312$$LIBS_BOOKINGS_SRC_LIB_PARKING_SPACE_LIST_FIELD_COMPONENT_TS_0;
      } else {
        i18n_0 = $localize`:␟45491a2ead2b592aec7b4d19300c0715230f334d␟1439078713747050312:Add Parking Resource`;
      }
      let i18n_1;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_3604407389403754414$$LIBS_BOOKINGS_SRC_LIB_PARKING_SPACE_LIST_FIELD_COMPONENT_TS_1 = goog.getMsg("{VAR_PLURAL, plural, =1 {Person } other {People }}");
        i18n_1 = MSG_EXTERNAL_3604407389403754414$$LIBS_BOOKINGS_SRC_LIB_PARKING_SPACE_LIST_FIELD_COMPONENT_TS_1;
      } else {
        i18n_1 = $localize`:␟de78e9a461c1eabe0e350a345933557c629d0ed1␟3604407389403754414:{VAR_PLURAL, plural, =1 {Person } other {People }}`;
      }
      i18n_1 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵi18nPostprocess"](i18n_1, {
        "VAR_PLURAL": "\uFFFD1\uFFFD"
      });
      let i18n_2;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_259696738555613759$$LIBS_BOOKINGS_SRC_LIB_PARKING_SPACE_LIST_FIELD_COMPONENT_TS_2 = goog.getMsg(" {$interpolation} {$icu} ", {
          "icu": i18n_1,
          "interpolation": "\uFFFD0\uFFFD"
        }, {
          original_code: {
            "icu": "{\n                            (space.capacity < 1 ? 2 : space.capacity || 1),\n                            plural, =1 { Person } other { People } }",
            "interpolation": "{{ space.capacity < 1 ? 2 : space.capacity || 1 }}"
          }
        });
        i18n_2 = MSG_EXTERNAL_259696738555613759$$LIBS_BOOKINGS_SRC_LIB_PARKING_SPACE_LIST_FIELD_COMPONENT_TS_2;
      } else {
        i18n_2 = $localize`:␟45802327683c8bd728df5113a59afcd09367e8e9␟259696738555613759: ${"\uFFFD0\uFFFD"}:INTERPOLATION: ${i18n_1}:ICU: `;
      }
      let i18n_3;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_3410599700979759406$$LIBS_BOOKINGS_SRC_LIB_PARKING_SPACE_LIST_FIELD_COMPONENT_TS_3 = goog.getMsg("{$startTagAppIcon}edit{$closeTagAppIcon}{$startTagDiv}Change{$closeTagDiv}", {
          "closeTagAppIcon": "\uFFFD/#22\uFFFD",
          "closeTagDiv": "\uFFFD/#23\uFFFD",
          "startTagAppIcon": "\uFFFD#22\uFFFD",
          "startTagDiv": "\uFFFD#23\uFFFD"
        }, {
          original_code: {
            "closeTagAppIcon": "</app-icon>",
            "closeTagDiv": "</div>",
            "startTagAppIcon": "<app-icon class=\"text-2xl\">",
            "startTagDiv": "<div>"
          }
        });
        i18n_3 = MSG_EXTERNAL_3410599700979759406$$LIBS_BOOKINGS_SRC_LIB_PARKING_SPACE_LIST_FIELD_COMPONENT_TS_3;
      } else {
        i18n_3 = $localize`:␟c5519f0af04771a54fd52f587819c2f86c19691a␟3410599700979759406:${"\uFFFD#22\uFFFD"}:START_TAG_APP_ICON:edit${"\uFFFD/#22\uFFFD"}:CLOSE_TAG_APP_ICON:${"\uFFFD#23\uFFFD"}:START_TAG_DIV:Change${"\uFFFD/#23\uFFFD"}:CLOSE_TAG_DIV:`;
      }
      let i18n_4;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_913695604792961336$$LIBS_BOOKINGS_SRC_LIB_PARKING_SPACE_LIST_FIELD_COMPONENT_TS_4 = goog.getMsg("{$startTagAppIcon}close{$closeTagAppIcon}{$startTagDiv}Remove{$closeTagDiv}", {
          "closeTagAppIcon": "\uFFFD/#27\uFFFD",
          "closeTagDiv": "\uFFFD/#28\uFFFD",
          "startTagAppIcon": "\uFFFD#27\uFFFD",
          "startTagDiv": "\uFFFD#28\uFFFD"
        }, {
          original_code: {
            "closeTagAppIcon": "</app-icon>",
            "closeTagDiv": "</div>",
            "startTagAppIcon": "<app-icon class=\"text-2xl\">",
            "startTagDiv": "<div>"
          }
        });
        i18n_4 = MSG_EXTERNAL_913695604792961336$$LIBS_BOOKINGS_SRC_LIB_PARKING_SPACE_LIST_FIELD_COMPONENT_TS_4;
      } else {
        i18n_4 = $localize`:␟00e1d7e28d4673ed2d4813ab8c6beb9d7e687e8f␟913695604792961336:${"\uFFFD#27\uFFFD"}:START_TAG_APP_ICON:close${"\uFFFD/#27\uFFFD"}:CLOSE_TAG_APP_ICON:${"\uFFFD#28\uFFFD"}:START_TAG_DIV:Remove${"\uFFFD/#28\uFFFD"}:CLOSE_TAG_DIV:`;
      }
      return [["placeholder", ""], i18n_0, i18n_2, i18n_3, i18n_4, ["list", "", 1, "space-y-2"], ["space", "", "class", "relative p-2 rounded-lg w-full flex items-center shadow border border-base-200", 4, "ngFor", "ngForOf"], ["btn", "", "matRipple", "", "add-space", "", 1, "w-full", "inverse", "mt-2", 3, "click"], [1, "flex", "items-center", "justify-center", "space-x-2"], [1, "text-2xl"], [1, "flex", "items-center", "flex-wrap", "sm:space-x-2", "mb-2"], [1, "flex-1", "min-w-[256px]", "space-y-2"], ["space", "", 1, "relative", "p-2", "rounded-lg", "w-full", "flex", "items-center", "shadow", "border", "border-base-200"], [1, "w-24", "h-24", "rounded-xl", "bg-base-200", "mr-4", "overflow-hidden", "flex", "items-center", "justify-center"], ["auth", "", "class", "object-cover h-full", 3, "source", 4, "ngIf", "ngIfElse"], [1, "space-y-2", "pb-4"], [1, "font-medium"], [1, "flex", "items-center", "text-sm", "space-x-2"], [1, "text-blue-500"], [1, "absolute", "bottom-0", "right-0", "flex", "items-center", "justify-end", "text-xs"], ["btn", "", "matRipple", "", "edit-space", "", 1, "clear", 3, "click"], [1, "flex", "items-center", "space-x-2"], ["btn", "", "matRipple", "", "remove-space", "", 1, "clear", 3, "click"], ["icon", "", "matRipple", "", "fav", "", 1, "absolute", "top-1", "right-1", 3, "click"], ["auth", "", 1, "object-cover", "h-full", 3, "source"], ["src", "assets/icons/car-placeholder.svg", 1, "m-auto"]];
    },
    template: function ParkingSpaceListFieldComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](0, "div", 5);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](1, ParkingSpaceListFieldComponent_div_1_Template, 32, 9, "div", 6);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](2, "button", 7);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵlistener"]("click", function ParkingSpaceListFieldComponent_Template_button_click_2_listener() {
          return ctx.changeResources();
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](3, "div", 8)(4, "app-icon", 9);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](5, "search");
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](6, "span");
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵi18n"](7, 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]()()();
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](8, "div", 10);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelement"](9, "div", 11);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
      }
      if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngForOf", ctx.spaces);
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_7__.NgForOf, _angular_common__WEBPACK_IMPORTED_MODULE_7__.NgIf, _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_2__.IconComponent, _components_src_lib_authenticated_image_directive__WEBPACK_IMPORTED_MODULE_3__.AuthenticatedImageDirective, _angular_material_core__WEBPACK_IMPORTED_MODULE_8__.MatRipple]
  });
}

/***/ }),

/***/ 1593:
/*!**************************************************!*\
  !*** ./libs/bookings/src/lib/parking.service.ts ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ParkingService: () => (/* binding */ ParkingService)
/* harmony export */ });
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var _placeos_organisation__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @placeos/organisation */ 2510);
/* harmony import */ var _placeos_ts_client__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @placeos/ts-client */ 35713);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! rxjs */ 90521);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! rxjs */ 68824);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! rxjs */ 68757);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! rxjs */ 71536);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! rxjs/operators */ 35443);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! rxjs/operators */ 8627);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! rxjs/operators */ 71963);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! rxjs/operators */ 66000);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! rxjs/operators */ 7841);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! rxjs/operators */ 29314);
/* harmony import */ var _bookings_fn__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./bookings.fn */ 18026);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! date-fns */ 99908);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! date-fns */ 33240);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! date-fns */ 56441);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @angular/core */ 37580);










class ParkingService extends _placeos_common__WEBPACK_IMPORTED_MODULE_0__.AsyncHandler {
  constructor(_org, _settings) {
    super();
    this._org = _org;
    this._settings = _settings;
    this._loading = new rxjs__WEBPACK_IMPORTED_MODULE_4__.BehaviorSubject([]);
    this.loading = this._loading.asObservable(); /** List of available parking levels for the current building */
    this.levels = this._org.level_list.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.map)(_ => {
      if (!this._settings.get('app.use_region')) {
        const blds = this._org.buildingsForRegion();
        const bld_ids = blds.map(bld => bld.id);
        const list = _.filter(lvl => bld_ids.includes(lvl.parent_id) && lvl.tags.includes('parking'));
        list.map(lvl => ({
          ...lvl,
          display_name: `${blds.find(_ => _.id === lvl.parent_id)?.display_name} - ${lvl.display_name}`
        }));
        return list;
      }
      return _.filter(lvl => lvl.parent_id === this._org.building.id && lvl.tags.includes('parking'));
    }));
    /** List of parking spaces for the current building/level */
    this.spaces = (0,rxjs__WEBPACK_IMPORTED_MODULE_6__.combineLatest)([this.levels]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.filter)(([lvls]) => !!lvls[0]?.id), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.switchMap)(([levels]) => {
      this._loading.next([...this._loading.getValue(), 'spaces']);
      return (0,rxjs__WEBPACK_IMPORTED_MODULE_9__.forkJoin)(levels.map(lvl => (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_2__.showMetadata)(lvl.id, 'parking-spaces').pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.map)(d => (d.details instanceof Array ? d.details : []).map(s => ({
        ...s,
        zone_id: lvl.id
      }))))));
    }), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.map)(list => (0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.flatten)(list)), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.tap)(() => this._loading.next(this._loading.getValue().filter(_ => _ !== 'spaces'))), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_11__.shareReplay)(1));
    /** List of parking spaces for the current building/level */
    this.users = (0,rxjs__WEBPACK_IMPORTED_MODULE_6__.combineLatest)([this._org.active_building]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.filter)(([bld]) => !!bld?.id), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.switchMap)(([bld]) => {
      this._loading.next([...this._loading.getValue(), 'users']);
      return (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_2__.showMetadata)(bld.id, 'parking-users');
    }), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.map)(metadata => metadata.details instanceof Array ? metadata.details : []), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.tap)(() => this._loading.next(this._loading.getValue().filter(_ => _ !== 'users'))), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_11__.shareReplay)(1));
    this.assigned_space = this.spaces.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.map)(list => list.find(_ => _.assigned_to?.toLowerCase() === (0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.currentUser)().email?.toLowerCase())));
    this.user_details = this.users.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.map)(list => list.find(_ => _.email?.toLowerCase() === (0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.currentUser)().email?.toLowerCase())));
    this.deny_parking_access = this.user_details.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.map)(details => !!details?.deny));
    this.booked_space = (0,rxjs__WEBPACK_IMPORTED_MODULE_6__.combineLatest)([this._org.active_building, this.spaces]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.map)(([_, spaces]) => (0,_bookings_fn__WEBPACK_IMPORTED_MODULE_3__.queryBookings)({
      period_start: (0,date_fns__WEBPACK_IMPORTED_MODULE_12__.getUnixTime)((0,date_fns__WEBPACK_IMPORTED_MODULE_13__.startOfDay)(Date.now())),
      period_end: (0,date_fns__WEBPACK_IMPORTED_MODULE_12__.getUnixTime)((0,date_fns__WEBPACK_IMPORTED_MODULE_14__.endOfDay)(Date.now())),
      type: 'parking'
    }).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_15__.catchError)(() => (0,rxjs__WEBPACK_IMPORTED_MODULE_16__.of)([])), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.map)(booking_list => booking_list.map(booking => spaces.find(space => space.id === booking.asset_id)).filter(space => !!space)))), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.map)(_ => _[0]), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_11__.shareReplay)(1));
    this.subscription('spaces', this.assigned_space.subscribe());
  }
  static #_ = this.ɵfac = function ParkingService_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || ParkingService)(_angular_core__WEBPACK_IMPORTED_MODULE_17__["ɵɵinject"](_placeos_organisation__WEBPACK_IMPORTED_MODULE_1__.OrganisationService), _angular_core__WEBPACK_IMPORTED_MODULE_17__["ɵɵinject"](_placeos_common__WEBPACK_IMPORTED_MODULE_0__.SettingsService));
  };
  static #_2 = this.ɵprov = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_17__["ɵɵdefineInjectable"]({
    token: ParkingService,
    factory: ParkingService.ɵfac,
    providedIn: 'root'
  });
}

/***/ }),

/***/ 65772:
/*!*************************************************!*\
  !*** ./libs/calendar/src/lib/calendar.class.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Calendar: () => (/* binding */ Calendar)
/* harmony export */ });
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! date-fns */ 1874);
/* harmony import */ var libs_spaces_src_lib_space_class__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! libs/spaces/src/lib/space.class */ 30735);


class Calendar {
  constructor(data = {}) {
    this.id = data.id || '';
    this.name = data.name || '';
    this.primary = !!data.primary;
    this.summary = data.summary || '';
    this.can_edit = !!data.can_edit;
    this.resource = new libs_spaces_src_lib_space_class__WEBPACK_IMPORTED_MODULE_0__.Space(data.resource || data.system);
    this.availability = (data.availability || []).map(({
      starts_at,
      ends_at,
      date,
      duration,
      status
    }) => {
      return {
        date: new Date(date || starts_at * 1000).valueOf(),
        duration: duration || (0,date_fns__WEBPACK_IMPORTED_MODULE_1__.differenceInMinutes)(ends_at * 1000, starts_at * 1000),
        status: status
      };
    });
    this.hidden = !!data.hidden;
  }
}

/***/ }),

/***/ 458:
/*!**********************************************!*\
  !*** ./libs/calendar/src/lib/calendar.fn.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   queryCalendarAvailability: () => (/* binding */ queryCalendarAvailability),
/* harmony export */   queryCalendars: () => (/* binding */ queryCalendars),
/* harmony export */   querySpaceCalendarAvailability: () => (/* binding */ querySpaceCalendarAvailability),
/* harmony export */   querySpaceFreeBusy: () => (/* binding */ querySpaceFreeBusy),
/* harmony export */   queryUserFreeBusy: () => (/* binding */ queryUserFreeBusy)
/* harmony export */ });
/* harmony import */ var _placeos_ts_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/ts-client */ 35713);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! rxjs/operators */ 35443);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var libs_spaces_src_lib_space_class__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! libs/spaces/src/lib/space.class */ 30735);
/* harmony import */ var _calendar_class__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./calendar.class */ 65772);





const CALENDAR_ENDPOINT = '/api/staff/v1/calendars';
/** List calendars associated with the logged in user */
function queryCalendars() {
  return (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_0__.get)(CALENDAR_ENDPOINT).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.map)(i => i.map(c => new _calendar_class__WEBPACK_IMPORTED_MODULE_3__.Calendar(c))));
}
/** List room calendars for available spaces based on the given query */
function queryCalendarAvailability(q) {
  const query = (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.toQueryString)(q);
  return (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_0__.get)(`${CALENDAR_ENDPOINT}/availability${query ? '?' + query : ''}`).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.map)(i => i.map(c => new _calendar_class__WEBPACK_IMPORTED_MODULE_3__.Calendar(c))));
}
const calendarsToSpaces = org => (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.map)(list => list.filter(cal => !!cal.resource).map(cal => new libs_spaces_src_lib_space_class__WEBPACK_IMPORTED_MODULE_2__.Space({
  ...cal.resource,
  level: org?.levelWithID(cal.resource.zones),
  availability: cal.availability
})).filter(space => space.bookable));
/** List available spaces based on the given query */
function querySpaceCalendarAvailability(q, org) {
  return queryCalendarAvailability(q).pipe(calendarsToSpaces(org));
}
function queryUserFreeBusy(q) {
  const query = (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.toQueryString)(q);
  return (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_0__.get)(`${CALENDAR_ENDPOINT}/free_busy${query ? '?' + query : ''}`).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.map)(i => i));
}
/** List room calendars for available spaces based on the given query */
function querySpaceFreeBusy(q, org) {
  const query = (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.toQueryString)(q);
  return (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_0__.get)(`${CALENDAR_ENDPOINT}/free_busy${query ? '?' + query : ''}`).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.map)(i => i.map(c => new _calendar_class__WEBPACK_IMPORTED_MODULE_3__.Calendar(c))), calendarsToSpaces(org));
}

/***/ }),

/***/ 4157:
/*!************************************!*\
  !*** ./libs/catering/src/index.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CATERING_STATUSES: () => (/* reexport safe */ _lib_catering__WEBPACK_IMPORTED_MODULE_1__.CATERING_STATUSES),
/* harmony export */   CateringItem: () => (/* reexport safe */ _lib_catering__WEBPACK_IMPORTED_MODULE_1__.CateringItem),
/* harmony export */   CateringItemModalComponent: () => (/* reexport safe */ _lib_catering__WEBPACK_IMPORTED_MODULE_1__.CateringItemModalComponent),
/* harmony export */   CateringItemOptionModalComponent: () => (/* reexport safe */ _lib_catering__WEBPACK_IMPORTED_MODULE_1__.CateringItemOptionModalComponent),
/* harmony export */   CateringMenuComponent: () => (/* reexport safe */ _lib_catering__WEBPACK_IMPORTED_MODULE_1__.CateringMenuComponent),
/* harmony export */   CateringOrder: () => (/* reexport safe */ _lib_catering__WEBPACK_IMPORTED_MODULE_1__.CateringOrder),
/* harmony export */   CateringOrderItemComponent: () => (/* reexport safe */ _lib_catering__WEBPACK_IMPORTED_MODULE_1__.CateringOrderItemComponent),
/* harmony export */   CateringOrderListComponent: () => (/* reexport safe */ _lib_catering__WEBPACK_IMPORTED_MODULE_1__.CateringOrderListComponent),
/* harmony export */   CateringOrderModalComponent: () => (/* reexport safe */ _lib_catering__WEBPACK_IMPORTED_MODULE_1__.CateringOrderModalComponent),
/* harmony export */   CateringOrderOptionsModalComponent: () => (/* reexport safe */ _lib_catering__WEBPACK_IMPORTED_MODULE_1__.CateringOrderOptionsModalComponent),
/* harmony export */   CateringOrdersService: () => (/* reexport safe */ _lib_catering__WEBPACK_IMPORTED_MODULE_1__.CateringOrdersService),
/* harmony export */   CateringStateService: () => (/* reexport safe */ _lib_catering__WEBPACK_IMPORTED_MODULE_1__.CateringStateService),
/* harmony export */   ChargeCodeListModalComponent: () => (/* reexport safe */ _lib_charge_code_list_modal_component__WEBPACK_IMPORTED_MODULE_2__.ChargeCodeListModalComponent),
/* harmony export */   NewCateringOrderModalComponent: () => (/* reexport safe */ _lib_catering__WEBPACK_IMPORTED_MODULE_1__.NewCateringOrderModalComponent),
/* harmony export */   SharedCateringModule: () => (/* reexport safe */ _lib_catering_module__WEBPACK_IMPORTED_MODULE_0__.SharedCateringModule)
/* harmony export */ });
/* harmony import */ var _lib_catering_module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./lib/catering.module */ 7872);
/* harmony import */ var _lib_catering__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./lib/catering */ 95196);
/* harmony import */ var _lib_charge_code_list_modal_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./lib/charge-code-list-modal.component */ 96861);




/***/ }),

/***/ 76095:
/*!***********************************************************************!*\
  !*** ./libs/catering/src/lib/catering-import-menu-modal.component.ts ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CateringImportMenuModalComponent: () => (/* binding */ CateringImportMenuModalComponent)
/* harmony export */ });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var _catering_item_class__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./catering-item.class */ 25892);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _angular_material_dialog__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/material/dialog */ 12587);
/* harmony import */ var _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../components/src/lib/icon.component */ 69434);
/* harmony import */ var _angular_material_core__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @angular/material/core */ 74646);
/* harmony import */ var _angular_material_progress_spinner__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @angular/material/progress-spinner */ 41134);









function CateringImportMenuModalComponent_button_3_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "button", 4)(1, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](2, "close");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()();
  }
}
function CateringImportMenuModalComponent_main_4_Template(rf, ctx) {
  if (rf & 1) {
    const _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "main")(1, "div", 5)(2, "app-icon", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](3, "upload");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](4, "p");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](5, "Click to select file or Drag and drop files");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](6, "input", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵlistener"]("change", function CateringImportMenuModalComponent_main_4_Template_input_change_6_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵrestoreView"](_r1);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵresetView"](ctx_r1.handleFileEvent($event));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](7, "div", 8)(8, "button", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵlistener"]("click", function CateringImportMenuModalComponent_main_4_Template_button_click_8_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵrestoreView"](_r1);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵresetView"](ctx_r1.downloadTemplate());
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](9, " Download Template ");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()()();
  }
}
function CateringImportMenuModalComponent_ng_template_5_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "main", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelement"](1, "mat-spinner", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](2, "p");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtextInterpolate"](ctx_r1.loading);
  }
}
class CateringImportMenuModalComponent {
  constructor() {
    this.event = new _angular_core__WEBPACK_IMPORTED_MODULE_3__.EventEmitter();
  }
  /** Upload the image to the cloud */
  handleFileEvent(event) {
    this.loading = 'Processing menu data...';
    const element = event.target;
    if (!element?.files) return this.loading = '';
    const files = element.files;
    if (!files.length) return this.loading = '';
    const file = files[0];
    const fileReader = new FileReader();
    fileReader.addEventListener('loadend', e => {
      const contents = e.target.result;
      const data = (0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.csvToJson)(contents);
      this.loading = '';
      this.event.emit({
        reason: 'done',
        metadata: data.filter(_ => (_.type || '').toLowerCase() === 'item').map(i => new _catering_item_class__WEBPACK_IMPORTED_MODULE_1__.CateringItem({
          ...i,
          options: data.filter(_ => (_.type || '').toLowerCase() === 'option' && _.tags === i.id).map(_ => ({
            id: _.id,
            name: _.name,
            group: _.category,
            multiple: _.multiple,
            unit_price: _.unit_price
          }))
        }))
      });
    });
    fileReader.readAsText(file);
  }
  downloadTemplate() {
    const template = `ID,Type,Name,Unit Price,Category,Description,Tags,Multiple
item-1,item,Coffee,200,Drink,Wake Up,,
option-1,option,1 Sugar,20,Sugars,,item-1,false`;
    (0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.downloadFile)('import-menu-template.csv', template);
  }
  static #_ = this.ɵfac = function CateringImportMenuModalComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || CateringImportMenuModalComponent)();
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵdefineComponent"]({
    type: CateringImportMenuModalComponent,
    selectors: [["catering-import-menu-modal"]],
    outputs: {
      event: "event"
    },
    decls: 7,
    vars: 3,
    consts: [["load_state", ""], [1, "h-12", "bg-primary", "flex", "items-center", "justify-between", "px-4"], ["icon", "", "mat-dialog-close", "", 4, "ngIf"], [4, "ngIf", "ngIfElse"], ["icon", "", "mat-dialog-close", ""], [1, "relative", "flex", "flex-col", "items-center", "justify-center", "space-y-2", "h-[24rem]", "w-[24rem]", "border-4", "border-base-200", "border-dashed", "rounded-xl", "hover:bg-base-200", "m-4", "p-4", "cursor-pointer"], [1, "text-4xl"], ["type", "file", 1, "absolute", "inset-0", "opacity-0", 3, "change"], [1, "flex", "items-center", "justify-center", "px-4", "pb-4"], ["matRipple", "", 1, "clear", "underline", "w-48", 3, "click"], [1, "flex", "flex-col", "items-center", "justify-center", "space-y-2", "p-8", "h-[24rem]", "w-[24rem]"], ["diameter", "32"]],
    template: function CateringImportMenuModalComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "header", 1)(1, "h2");
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](2, "Import Catering Menu");
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](3, CateringImportMenuModalComponent_button_3_Template, 3, 0, "button", 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](4, CateringImportMenuModalComponent_main_4_Template, 10, 0, "main", 3)(5, CateringImportMenuModalComponent_ng_template_5_Template, 4, 1, "ng-template", null, 0, _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplateRefExtractor"]);
      }
      if (rf & 2) {
        const load_state_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵreference"](6);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", !ctx.loading);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", !ctx.loading)("ngIfElse", load_state_r3);
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_4__.NgIf, _angular_material_dialog__WEBPACK_IMPORTED_MODULE_5__.MatDialogClose, _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_2__.IconComponent, _angular_material_core__WEBPACK_IMPORTED_MODULE_6__.MatRipple, _angular_material_progress_spinner__WEBPACK_IMPORTED_MODULE_7__.MatProgressSpinner]
  });
}

/***/ }),

/***/ 30807:
/*!****************************************************************!*\
  !*** ./libs/catering/src/lib/catering-item-modal.component.ts ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CateringItemModalComponent: () => (/* binding */ CateringItemModalComponent)
/* harmony export */ });
/* harmony import */ var _angular_cdk_keycodes__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @angular/cdk/keycodes */ 74879);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @angular/forms */ 34456);
/* harmony import */ var _angular_material_dialog__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @angular/material/dialog */ 12587);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var _catering_item_class__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./catering-item.class */ 25892);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _angular_material_autocomplete__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @angular/material/autocomplete */ 79771);
/* harmony import */ var _angular_material_core__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @angular/material/core */ 74646);
/* harmony import */ var _angular_material_checkbox__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @angular/material/checkbox */ 97024);
/* harmony import */ var _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../components/src/lib/icon.component */ 69434);
/* harmony import */ var _angular_material_form_field__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @angular/material/form-field */ 24950);
/* harmony import */ var _angular_material_input__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @angular/material/input */ 95541);
/* harmony import */ var _angular_material_progress_spinner__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @angular/material/progress-spinner */ 41134);
/* harmony import */ var _angular_material_chips__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @angular/material/chips */ 12772);
/* harmony import */ var _form_fields_src_lib_counter_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../form-fields/src/lib/counter.component */ 55507);
/* harmony import */ var _form_fields_src_lib_image_list_field_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../form-fields/src/lib/image-list-field.component */ 56864);




















const _c0 = () => ({
  standalone: true
});
function CateringItemModalComponent_button_3_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "button", 9)(1, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](2, "close");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]()();
  }
}
function CateringItemModalComponent_form_4_div_2_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "div", 20)(1, "label", 21);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](2, " Name");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](3, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](4, "*");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](5, ": ");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](6, "mat-form-field", 22);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelement"](7, "input", 23);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](8, "mat-error");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](9, "Name is required");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]()()();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵclassProp"]("error", ctx_r1.form.controls.name.invalid && ctx_r1.form.controls.name.touched);
  }
}
function CateringItemModalComponent_form_4_div_3_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "div", 20)(1, "label", 24);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](2, " Category");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](3, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](4, "*");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](5, ": ");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](6, "mat-form-field", 22);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelement"](7, "input", 25);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](8, "mat-error");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](9, "Category is required");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]()()();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"](2);
    const auto_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵreference"](9);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵclassProp"]("error", ctx_r1.form.controls.category.invalid && ctx_r1.form.controls.category.touched);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](6);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("matAutocomplete", auto_r3);
  }
}
function CateringItemModalComponent_form_4_div_4_mat_chip_row_6_Template(rf, ctx) {
  if (rf & 1) {
    const _r5 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "mat-chip-row", 30);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("removed", function CateringItemModalComponent_form_4_div_4_mat_chip_row_6_Template_mat_chip_row_removed_0_listener() {
      const item_r6 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵrestoreView"](_r5).$implicit;
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"](3);
      return _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵresetView"](ctx_r1.removeTag(item_r6));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](2, "button", 31)(3, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](4, "cancel");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]()()();
  }
  if (rf & 2) {
    const item_r6 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtextInterpolate1"](" ", item_r6, " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵattribute"]("aria-label", "Remove " + item_r6);
  }
}
function CateringItemModalComponent_form_4_div_4_Template(rf, ctx) {
  if (rf & 1) {
    const _r4 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "div", 20)(1, "label", 26);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵi18n"](2, 3);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](3, "mat-form-field", 22)(4, "mat-chip-grid", 27, 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](6, CateringItemModalComponent_form_4_div_4_mat_chip_row_6_Template, 5, 2, "mat-chip-row", 28);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](7, "input", 29);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("matChipInputTokenEnd", function CateringItemModalComponent_form_4_div_4_Template_input_matChipInputTokenEnd_7_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵrestoreView"](_r4);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"](2);
      return _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵresetView"](ctx_r1.addTag($event));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]()()();
  }
  if (rf & 2) {
    const chipList_r7 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵreference"](5);
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵclassProp"]("error", ctx_r1.form.controls.tags.invalid && ctx_r1.form.controls.tags.touched);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngForOf", ctx_r1.tag_list);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("matChipInputFor", chipList_r7)("matChipInputSeparatorKeyCodes", ctx_r1.separators)("matChipInputAddOnBlur", true);
  }
}
function CateringItemModalComponent_form_4_div_5_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "div", 20)(1, "label", 32);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](2, "Description:");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](3, "mat-form-field", 22);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelement"](4, "textarea", 33);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]()();
  }
}
function CateringItemModalComponent_form_4_div_6_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "div", 20)(1, "label", 21);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](2, " Unit Price");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](3, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](4, "*");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](5, ": ");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](6, "mat-form-field", 22);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelement"](7, "input", 34);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](8, "mat-error");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](9, "Unit Price is required");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]()()();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵclassProp"]("error", ctx_r1.form.controls.unit_price.invalid && ctx_r1.form.controls.unit_price.touched);
  }
}
function CateringItemModalComponent_form_4_div_27_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "div", 20)(1, "label", 35);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵi18n"](2, 4);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelement"](3, "image-list-field", 36);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
  }
}
function CateringItemModalComponent_form_4_Template(rf, ctx) {
  if (rf & 1) {
    const _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "form", 10)(1, "div", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](2, CateringItemModalComponent_form_4_div_2_Template, 10, 2, "div", 12)(3, CateringItemModalComponent_form_4_div_3_Template, 10, 3, "div", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](4, CateringItemModalComponent_form_4_div_4_Template, 8, 6, "div", 12)(5, CateringItemModalComponent_form_4_div_5_Template, 5, 0, "div", 12)(6, CateringItemModalComponent_form_4_div_6_Template, 10, 2, "div", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](7, "div", 13)(8, "label", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](9, "Accept Points?");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](10, "mat-checkbox", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](11);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](12, "div", 16)(13, "mat-checkbox", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("ngModelChange", function CateringItemModalComponent_form_4_Template_mat_checkbox_ngModelChange_13_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵrestoreView"](_r1);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵresetView"]($event ? ctx_r1.addTag({
        value: "Gluten Free"
      }) : ctx_r1.removeTag("Gluten Free"));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](14, " Gluten Free (GF) ");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](15, "mat-checkbox", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("ngModelChange", function CateringItemModalComponent_form_4_Template_mat_checkbox_ngModelChange_15_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵrestoreView"](_r1);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵresetView"]($event ? ctx_r1.addTag({
        value: "Vegan"
      }) : ctx_r1.removeTag("Vegan"));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](16, " Vegan (VG) ");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](17, "mat-checkbox", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("ngModelChange", function CateringItemModalComponent_form_4_Template_mat_checkbox_ngModelChange_17_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵrestoreView"](_r1);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵresetView"]($event ? ctx_r1.addTag({
        value: "Vegetarian"
      }) : ctx_r1.removeTag("Vegetarian"));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](18, " Vegetarian (V) ");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](19, "mat-checkbox", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("ngModelChange", function CateringItemModalComponent_form_4_Template_mat_checkbox_ngModelChange_19_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵrestoreView"](_r1);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵresetView"]($event ? ctx_r1.addTag({
        value: "Contains Dairy"
      }) : ctx_r1.removeTag("Contains Dairy"));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](20, " Contains Dairy (D) ");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](21, "mat-checkbox", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("ngModelChange", function CateringItemModalComponent_form_4_Template_mat_checkbox_ngModelChange_21_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵrestoreView"](_r1);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵresetView"]($event ? ctx_r1.addTag({
        value: "Contains Nuts"
      }) : ctx_r1.removeTag("Contains Nuts"));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](22, " Contains Nuts (N) ");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](23, "div", 13)(24, "label", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](25, "Discount Cap");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelement"](26, "a-counter", 19);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](27, CateringItemModalComponent_form_4_div_27_Template, 4, 0, "div", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    let tmp_9_0;
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("formGroup", ctx_r1.form);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngIf", ctx_r1.form.controls.name);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngIf", ctx_r1.form.controls.category);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngIf", ctx_r1.form.controls.tags);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngIf", ctx_r1.form.controls.description);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngIf", ctx_r1.form.controls.unit_price);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtextInterpolate"](((tmp_9_0 = ctx_r1.form.get("accept_points")) == null ? null : tmp_9_0.value) ? "No" : "Yes");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngModel", ctx_r1.hasTag("Gluten Free"))("ngModelOptions", _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpureFunction0"](22, _c0));
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngModel", ctx_r1.hasTag("Vegan"))("ngModelOptions", _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpureFunction0"](23, _c0));
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngModel", ctx_r1.hasTag("Vegetarian"))("ngModelOptions", _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpureFunction0"](24, _c0));
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngModel", ctx_r1.hasTag("Contains Dairy"))("ngModelOptions", _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpureFunction0"](25, _c0));
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngModel", ctx_r1.hasTag("Contains Nuts"))("ngModelOptions", _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpureFunction0"](26, _c0));
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("min", 0)("max", 100)("step", 5)("render_fn", ctx_r1.renderPercent);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngIf", ctx_r1.form.controls.images);
  }
}
function CateringItemModalComponent_footer_5_Template(rf, ctx) {
  if (rf & 1) {
    const _r8 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "footer", 37)(1, "button", 38);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("click", function CateringItemModalComponent_footer_5_Template_button_click_1_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵrestoreView"](_r8);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵresetView"](ctx_r1.saveChanges());
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](2, " Save ");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("disabled", !ctx_r1.form.dirty);
  }
}
function CateringItemModalComponent_ng_template_6_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "div", 39);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelement"](1, "mat-spinner", 40);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](2, "p");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](3, "Saving catering item...");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]()();
  }
}
function CateringItemModalComponent_mat_option_10_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "mat-option", 41);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const option_r9 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("value", option_r9);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtextInterpolate1"](" ", option_r9, " ");
  }
}
class CateringItemModalComponent {
  /** Current item details */
  get item() {
    return this._data.item || new _catering_item_class__WEBPACK_IMPORTED_MODULE_1__.CateringItem();
  }
  /** List of available categories */
  get categories() {
    return this._data.categories || [];
  }
  get tag_list() {
    return this.form.controls.tags.value;
  }
  renderPercent(value = 0) {
    return `${value}%`;
  }
  hasTag(tag) {
    return this.tag_list.includes(tag);
  }
  constructor(_data) {
    this._data = _data;
    /** Emitter for events on the modal */
    this.event = new _angular_core__WEBPACK_IMPORTED_MODULE_5__.EventEmitter();
    /** Form fields for item */
    this.form = new _angular_forms__WEBPACK_IMPORTED_MODULE_6__.FormGroup({
      name: new _angular_forms__WEBPACK_IMPORTED_MODULE_6__.FormControl(this.item.name || '', [_angular_forms__WEBPACK_IMPORTED_MODULE_6__.Validators.required]),
      description: new _angular_forms__WEBPACK_IMPORTED_MODULE_6__.FormControl(this.item.description || ''),
      category: new _angular_forms__WEBPACK_IMPORTED_MODULE_6__.FormControl(this.item.category || '', [_angular_forms__WEBPACK_IMPORTED_MODULE_6__.Validators.required]),
      unit_price: new _angular_forms__WEBPACK_IMPORTED_MODULE_6__.FormControl(this.item.unit_price, [_angular_forms__WEBPACK_IMPORTED_MODULE_6__.Validators.required]),
      tags: new _angular_forms__WEBPACK_IMPORTED_MODULE_6__.FormControl(this.item.tags || []),
      accept_points: new _angular_forms__WEBPACK_IMPORTED_MODULE_6__.FormControl(this.item.accept_points || false),
      discount_cap: new _angular_forms__WEBPACK_IMPORTED_MODULE_6__.FormControl(this.item.discount_cap || 0),
      images: new _angular_forms__WEBPACK_IMPORTED_MODULE_6__.FormControl(this.item.images || [])
    });
    /** Whether changes are being saved */
    this.loading = false;
    /** List of separator characters for tags */
    this.separators = [_angular_cdk_keycodes__WEBPACK_IMPORTED_MODULE_7__.ENTER, _angular_cdk_keycodes__WEBPACK_IMPORTED_MODULE_7__.COMMA, _angular_cdk_keycodes__WEBPACK_IMPORTED_MODULE_7__.SPACE];
  }
  /**
   * Add a tag to the list of tags for the item
   * @param event Input event
   */
  addTag(event) {
    if (!this.form || !this.form.controls.tags) return;
    this.form.controls.tags.markAsDirty();
    const input = event.input;
    const value = event.value;
    const tag_list = this.tag_list;
    if ((value || '').trim()) {
      tag_list.push(value);
      this.form.controls.tags.setValue(tag_list);
    }
    // Reset the input value
    if (input) input.value = '';
  }
  /**
   * Remove tag from the list
   * @param existing_tag Tag to remove
   */
  removeTag(existing_tag) {
    if (!this.form || !this.form.controls.tags) return;
    const tag_list = this.tag_list;
    this.form.controls.tags.markAsDirty();
    const index = tag_list.indexOf(existing_tag);
    if (index >= 0) {
      tag_list.splice(index, 1);
      this.form.controls.tags.setValue(tag_list);
    }
  }
  saveChanges() {
    this.loading = true;
    this.event.emit({
      reason: 'done',
      metadata: {
        item: new _catering_item_class__WEBPACK_IMPORTED_MODULE_1__.CateringItem({
          ...this.item,
          id: this.item.id || `item-${(0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.randomInt)(9999_9999)}`,
          ...this.form.value
        })
      }
    });
  }
  static #_ = this.ɵfac = function CateringItemModalComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || CateringItemModalComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵdirectiveInject"](_angular_material_dialog__WEBPACK_IMPORTED_MODULE_8__.MAT_DIALOG_DATA));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵdefineComponent"]({
    type: CateringItemModalComponent,
    selectors: [["catering-item-modal"]],
    outputs: {
      event: "event"
    },
    decls: 11,
    vars: 6,
    consts: () => {
      let i18n_0;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_zoneTagsPlaceholder$$LIBS_CATERING_SRC_LIB_CATERING_ITEM_MODAL_COMPONENT_TS_0 = goog.getMsg("Item tags e.g. Gluten Free, Vegan etc.");
        i18n_0 = MSG_EXTERNAL_zoneTagsPlaceholder$$LIBS_CATERING_SRC_LIB_CATERING_ITEM_MODAL_COMPONENT_TS_0;
      } else {
        i18n_0 = $localize`:@@zoneTagsPlaceholder␟c133beffffe3288bbdbf8572a32910c33ce14991␟2194594490376201833:Item tags e.g. Gluten Free, Vegan etc.`;
      }
      let i18n_1;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_tagsLabel$$LIBS_CATERING_SRC_LIB_CATERING_ITEM_MODAL_COMPONENT_TS_1 = goog.getMsg(" Tags: ");
        i18n_1 = MSG_EXTERNAL_tagsLabel$$LIBS_CATERING_SRC_LIB_CATERING_ITEM_MODAL_COMPONENT_TS_1;
      } else {
        i18n_1 = $localize`:@@tagsLabel␟800ffadd463cfe152c5af3fa9f13803ab2e77b93␟4746186018558508280: Tags: `;
      }
      let i18n_2;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_imagesLabel$$LIBS_CATERING_SRC_LIB_CATERING_ITEM_MODAL_COMPONENT_TS_2 = goog.getMsg("Images:");
        i18n_2 = MSG_EXTERNAL_imagesLabel$$LIBS_CATERING_SRC_LIB_CATERING_ITEM_MODAL_COMPONENT_TS_2;
      } else {
        i18n_2 = $localize`:@@imagesLabel␟e5d9e00faa06714d7671b164cad364b26f4c585b␟5137125764814732349:Images:`;
      }
      return [["load_state", ""], ["auto", "matAutocomplete"], ["chipList", ""], i18n_1, i18n_2, ["icon", "", "matRipple", "", "mat-dialog-close", "", 4, "ngIf"], ["class", "p-4 overflow-auto max-h-[65vh]", 3, "formGroup", 4, "ngIf", "ngIfElse"], ["class", "flex p-2 items-center justify-center border-t border-solid border-base-200", 4, "ngIf"], [3, "value", 4, "ngFor", "ngForOf"], ["icon", "", "matRipple", "", "mat-dialog-close", ""], [1, "p-4", "overflow-auto", "max-h-[65vh]", 3, "formGroup"], [1, "flex", "items-center", "space-x-2"], ["class", "flex flex-col", 4, "ngIf"], [1, "flex", "items-center"], [1, "flex-none", "w-28", "min-w-0"], ["formControlName", "accept_points"], ["list", "", 1, "flex", "items-center", "flex-wrap", "max-w-lg"], [3, "ngModelChange", "ngModel", "ngModelOptions"], [1, "flex-1", "w-24", "min-w-0"], ["formControlName", "discount_cap", 1, "border", "border-base-200", "rounded", 3, "min", "max", "step", "render_fn"], [1, "flex", "flex-col"], ["for", "title"], ["appearance", "outline"], ["matInput", "", "name", "name", "placeholder", "Item name", "formControlName", "name"], ["for", "category"], ["matInput", "", "name", "category", "placeholder", "Category", "formControlName", "category", 3, "matAutocomplete"], ["for", "tags"], ["aria-label", "Item Tags"], [3, "removed", 4, "ngFor", "ngForOf"], ["name", "tags", "placeholder", i18n_0, 3, "matChipInputTokenEnd", "matChipInputFor", "matChipInputSeparatorKeyCodes", "matChipInputAddOnBlur"], [3, "removed"], ["matChipRemove", ""], ["for", "description"], ["matInput", "", "name", "description", "placeholder", "Item Description", "formControlName", "description"], ["matInput", "", "name", "unit-price", "type", "number", "placeholder", "Unit Price", "formControlName", "unit_price"], ["for", "images"], ["name", "images", "formControlName", "images"], [1, "flex", "p-2", "items-center", "justify-center", "border-t", "border-solid", "border-base-200"], ["btn", "", "matRipple", "", 3, "click", "disabled"], [1, "flex", "flex-col", "items-center", "p-8", "space-y-2", "w-64"], ["diameter", "32"], [3, "value"]];
    },
    template: function CateringItemModalComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "header")(1, "h3");
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](3, CateringItemModalComponent_button_3_Template, 3, 0, "button", 5);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](4, CateringItemModalComponent_form_4_Template, 28, 27, "form", 6)(5, CateringItemModalComponent_footer_5_Template, 3, 1, "footer", 7)(6, CateringItemModalComponent_ng_template_6_Template, 4, 0, "ng-template", null, 0, _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplateRefExtractor"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](8, "mat-autocomplete", null, 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](10, CateringItemModalComponent_mat_option_10_Template, 2, 2, "mat-option", 8);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
      }
      if (rf & 2) {
        const load_state_r10 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵreference"](7);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtextInterpolate1"]("", ctx.item.id ? "Edit" : "Add", " Item");
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngIf", !ctx.loading);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngIf", ctx.form && !ctx.loading)("ngIfElse", load_state_r10);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngIf", !ctx.loading);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](5);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngForOf", ctx.categories);
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_9__.NgForOf, _angular_common__WEBPACK_IMPORTED_MODULE_9__.NgIf, _angular_material_autocomplete__WEBPACK_IMPORTED_MODULE_10__.MatAutocomplete, _angular_material_core__WEBPACK_IMPORTED_MODULE_11__.MatOption, _angular_material_autocomplete__WEBPACK_IMPORTED_MODULE_10__.MatAutocompleteTrigger, _angular_material_dialog__WEBPACK_IMPORTED_MODULE_8__.MatDialogClose, _angular_material_checkbox__WEBPACK_IMPORTED_MODULE_12__.MatCheckbox, _angular_forms__WEBPACK_IMPORTED_MODULE_6__["ɵNgNoValidate"], _angular_forms__WEBPACK_IMPORTED_MODULE_6__.DefaultValueAccessor, _angular_forms__WEBPACK_IMPORTED_MODULE_6__.NumberValueAccessor, _angular_forms__WEBPACK_IMPORTED_MODULE_6__.NgControlStatus, _angular_forms__WEBPACK_IMPORTED_MODULE_6__.NgControlStatusGroup, _angular_forms__WEBPACK_IMPORTED_MODULE_6__.NgModel, _angular_forms__WEBPACK_IMPORTED_MODULE_6__.FormGroupDirective, _angular_forms__WEBPACK_IMPORTED_MODULE_6__.FormControlName, _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_2__.IconComponent, _angular_material_form_field__WEBPACK_IMPORTED_MODULE_13__.MatFormField, _angular_material_form_field__WEBPACK_IMPORTED_MODULE_13__.MatError, _angular_material_core__WEBPACK_IMPORTED_MODULE_11__.MatRipple, _angular_material_input__WEBPACK_IMPORTED_MODULE_14__.MatInput, _angular_material_progress_spinner__WEBPACK_IMPORTED_MODULE_15__.MatProgressSpinner, _angular_material_chips__WEBPACK_IMPORTED_MODULE_16__.MatChipGrid, _angular_material_chips__WEBPACK_IMPORTED_MODULE_16__.MatChipInput, _angular_material_chips__WEBPACK_IMPORTED_MODULE_16__.MatChipRemove, _angular_material_chips__WEBPACK_IMPORTED_MODULE_16__.MatChipRow, _form_fields_src_lib_counter_component__WEBPACK_IMPORTED_MODULE_3__.CounterComponent, _form_fields_src_lib_image_list_field_component__WEBPACK_IMPORTED_MODULE_4__.ImageListFieldComponent],
    styles: ["[list][_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%] {\n                margin: 0.5rem;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNhdGVyaW5nLWl0ZW0tbW9kYWwuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxjQUFjO1lBQ2xCIiwiZmlsZSI6ImNhdGVyaW5nLWl0ZW0tbW9kYWwuY29tcG9uZW50LnRzIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICBbbGlzdF0gbWF0LWNoZWNrYm94IHtcbiAgICAgICAgICAgICAgICBtYXJnaW46IDAuNXJlbTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl19 */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvY2F0ZXJpbmcvc3JjL2xpYi9jYXRlcmluZy1pdGVtLW1vZGFsLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1lBQ1k7Z0JBQ0ksY0FBYztZQUNsQjs7QUFFWixvWkFBb1oiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIFtsaXN0XSBtYXQtY2hlY2tib3gge1xuICAgICAgICAgICAgICAgIG1hcmdpbjogMC41cmVtO1xuICAgICAgICAgICAgfVxuICAgICAgICAiXSwic291cmNlUm9vdCI6IiJ9 */"]
  });
}

/***/ }),

/***/ 25892:
/*!******************************************************!*\
  !*** ./libs/catering/src/lib/catering-item.class.ts ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CateringItem: () => (/* binding */ CateringItem)
/* harmony export */ });
class CateringItem {
  get custom_id() {
    const options = this.option_list.map(_ => _.id).join('+');
    return `${this.id}[${options}]${!this.in_order ? 'menu' : ''}`;
  }
  constructor(data = {}) {
    this.id = data.id || '';
    this.name = data.name || data.id || '';
    this.category = data.category || '';
    this.unit_price = data.unit_price || 0;
    this.description = data.description || '';
    this.quantity = data.quantity || 0;
    this.discount_cap = data.discount_cap || 0;
    this.accept_points = !!data.accept_points;
    this.tags = data.tags || [];
    this.images = data.images || [];
    this.options = data.options || [];
    const has_options = this.options.some(_ => _.active === true);
    this.option_list = (has_options ? this.options.filter(_ => _.active === true) : data.option_list) || [];
    this.hide_for_zones = data.hide_for_zones || [];
    this.unit_price_with_options = this.unit_price + this.option_list.map(i => i.unit_price || 0).reduce((c, a) => c + a, 0);
    this.total_cost = this.unit_price_with_options * this.quantity;
    this.options_string = this.options?.map(_ => _.id || '').sort((a, b) => a.localeCompare(b)).join(',') || '';
    this.in_order = data.in_order ?? false;
  }
}

/***/ }),

/***/ 61601:
/*!****************************************************************!*\
  !*** ./libs/catering/src/lib/catering-list-field.component.ts ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CateringListFieldComponent: () => (/* binding */ CateringListFieldComponent)
/* harmony export */ });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @angular/forms */ 34456);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var libs_catering_src_lib_catering_order_modal_new_catering_order_modal_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! libs/catering/src/lib/catering-order-modal/new-catering-order-modal.component */ 11732);
/* harmony import */ var _catering_order_class__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./catering-order.class */ 75555);
/* harmony import */ var _placeos_organisation__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @placeos/organisation */ 2510);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! date-fns */ 56441);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! date-fns */ 33240);
/* harmony import */ var _angular_material_dialog__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @angular/material/dialog */ 12587);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _angular_material_tooltip__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @angular/material/tooltip */ 80640);
/* harmony import */ var _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../components/src/lib/icon.component */ 69434);
/* harmony import */ var _angular_material_core__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @angular/material/core */ 74646);
















function CateringListFieldComponent_div_1_div_8_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "div", 16)(1, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](2, "priority_high");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("matTooltip", ctx_r1.err_tooltip);
  }
}
function CateringListFieldComponent_div_1_button_12_Template(rf, ctx) {
  if (rf & 1) {
    const _r3 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "button", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("click", function CateringListFieldComponent_div_1_button_12_Template_button_click_0_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵrestoreView"](_r3);
      const order_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"]().$implicit;
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵresetView"](ctx_r1.duplicateOrder(order_r4));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](1, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](2, "content_copy");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]()();
  }
}
function CateringListFieldComponent_div_1_button_13_Template(rf, ctx) {
  if (rf & 1) {
    const _r5 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "button", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("click", function CateringListFieldComponent_div_1_button_13_Template_button_click_0_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵrestoreView"](_r5);
      const order_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"]().$implicit;
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵresetView"](ctx_r1.editOrder(order_r4));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](1, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](2, "edit");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]()();
  }
}
function CateringListFieldComponent_div_1_button_14_Template(rf, ctx) {
  if (rf & 1) {
    const _r6 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "button", 19);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("click", function CateringListFieldComponent_div_1_button_14_Template_button_click_0_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵrestoreView"](_r6);
      const order_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"]().$implicit;
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵresetView"](ctx_r1.removeOrder(order_r4));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](1, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](2, "delete");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]()();
  }
}
function CateringListFieldComponent_div_1_div_19_span_3_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "span", 27);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const item_r8 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"]().$implicit;
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("matTooltip", ctx_r1.optionList(item_r8));
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtextInterpolate1"](" ", (item_r8.option_list == null ? null : item_r8.option_list.length) || "0", " option(s) ");
  }
}
function CateringListFieldComponent_div_1_div_19_button_9_Template(rf, ctx) {
  if (rf & 1) {
    const _r9 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "button", 28);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("click", function CateringListFieldComponent_div_1_div_19_button_9_Template_button_click_0_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵrestoreView"](_r9);
      const item_r8 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"]().$implicit;
      const order_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"]().$implicit;
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵresetView"](ctx_r1.removeOrderItem(order_r4, item_r8));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](1, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](2, "delete");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]()();
  }
}
function CateringListFieldComponent_div_1_div_19_Template(rf, ctx) {
  if (rf & 1) {
    const _r7 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "div", 20)(1, "div", 21);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](3, CateringListFieldComponent_div_1_div_19_span_3_Template, 2, 2, "span", 22);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](4, "div", 23);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](6, "div", 24);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](7);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipe"](8, "currency");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](9, CateringListFieldComponent_div_1_div_19_button_9_Template, 3, 0, "button", 25);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](10, "button", 26);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("click", function CateringListFieldComponent_div_1_div_19_Template_button_click_10_listener() {
      const item_r8 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵrestoreView"](_r7).$implicit;
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"](2);
      return _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵresetView"](ctx_r1.toggleFavourite(item_r8));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](11, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](12);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]()()();
  }
  if (rf & 2) {
    const item_r8 = ctx.$implicit;
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtextInterpolate1"](" ", item_r8.name || "Item", " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngIf", item_r8.option_list == null ? null : item_r8.option_list.length);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtextInterpolate1"](" x", item_r8.quantity, " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipeBind2"](8, 9, item_r8.unit_price_with_options / 100, ctx_r1.currency_code), " ea ");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngIf", !ctx_r1.disabled);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵclassProp"]("text-blue-400", ctx_r1.favorites.includes(item_r8.id));
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("matTooltip", ctx_r1.favorites.includes(item_r8.id) ? "Remove from favourites" : "Add to favourites");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtextInterpolate"](ctx_r1.favorites.includes(item_r8.id) ? "favorite" : "favorite_border");
  }
}
function CateringListFieldComponent_div_1_Template(rf, ctx) {
  if (rf & 1) {
    const _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "div", 4)(1, "div", 5)(2, "div", 6)(3, "div", 7)(4, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipe"](6, "date");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipe"](7, "date");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](8, CateringListFieldComponent_div_1_div_8_Template, 3, 1, "div", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](9, "div", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](10);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipe"](11, "currency");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](12, CateringListFieldComponent_div_1_button_12_Template, 3, 0, "button", 10)(13, CateringListFieldComponent_div_1_button_13_Template, 3, 0, "button", 11)(14, CateringListFieldComponent_div_1_button_14_Template, 3, 0, "button", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](15, "button", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("click", function CateringListFieldComponent_div_1_Template_button_click_15_listener() {
      const order_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵrestoreView"](_r1).$implicit;
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵresetView"](ctx_r1.show_order[order_r4.id] = !ctx_r1.show_order[order_r4.id]);
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](16, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](17);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]()()();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](18, "div", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](19, CateringListFieldComponent_div_1_div_19_Template, 13, 12, "div", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const order_r4 = ctx.$implicit;
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵclassProp"]("border-error", ctx_r1.end_time < order_r4.deliver_at)("border-base-300", ctx_r1.end_time >= order_r4.deliver_at);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtextInterpolate2"](" Order for ", _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipeBind2"](6, 16, order_r4.deliver_at_time, "mediumDate"), " at ", _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipeBind2"](7, 19, order_r4.deliver_at_time, ctx_r1.time_format), " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngIf", ctx_r1.end_time < order_r4.deliver_at);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtextInterpolate2"](" ", order_r4.item_count, " item(s) for ", _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipeBind2"](11, 22, order_r4.total_cost / 100, ctx_r1.currency_code), " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngIf", !ctx_r1.disabled);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngIf", !ctx_r1.disabled);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngIf", !ctx_r1.disabled);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("matTooltip", ctx_r1.show_order[order_r4.id] ? "Hide order items" : "Show order items");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtextInterpolate1"](" ", ctx_r1.show_order[order_r4.id] ? "expand_less" : "expand_more", " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("@show", ctx_r1.show_order[order_r4.id] ? "show" : "hide");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngForOf", order_r4.items);
  }
}
const EMPTY_FAVS = [];
class CateringListFieldComponent {
  get favorites() {
    return this._settings.get('favourite_menu_items') || EMPTY_FAVS;
  }
  get end_time() {
    const time = (this.options.date || Date.now()) + (this.options.duration || 30) * 60 * 1000;
    return this.options.all_day ? (0,date_fns__WEBPACK_IMPORTED_MODULE_6__.endOfDay)(time).valueOf() : time;
  }
  get time_format() {
    return this._settings.time_format || 'shortTime';
  }
  get currency_code() {
    return this._org.building?.currency || 'USD';
  }
  constructor(_settings, _org, _dialog) {
    this._settings = _settings;
    this._org = _org;
    this._dialog = _dialog;
    this.options = {};
    this.orders = [];
    this.show_order = {};
    this.disabled = false;
    this.err_tooltip = 'Delivery time is outside of the event time.\nThis order will be ignored.';
    this.selected = [];
    this.registerOnChange = fn => this._onChange = fn;
    this.registerOnTouched = fn => this._onTouch = fn;
    this.setDisabledState = s => this.disabled = s;
  }
  /**
   * Update the form field value
   * @param new_value New value to set on the form field
   */
  setValue(new_value) {
    this.orders = new_value;
    if (this._onChange) this._onChange(this.orders);
  }
  ngOnChanges(changes) {
    if (changes.options) {
      this.orders = (this.orders || []).map(_ => new _catering_order_class__WEBPACK_IMPORTED_MODULE_2__.CateringOrder({
        ..._,
        event: this.options
      }));
    }
  }
  /**
   * Update local value when form control value is changed
   * @param value The new value for the component
   */
  writeValue(value) {
    this.orders = (value || []).map(_ => new _catering_order_class__WEBPACK_IMPORTED_MODULE_2__.CateringOrder({
      ..._,
      event: this.options
    }));
  }
  removeOrder(order) {
    const updated_list = this.orders.filter(_ => _.id !== order.id);
    this.setValue(updated_list);
  }
  duplicateOrder(order) {
    const new_order = new _catering_order_class__WEBPACK_IMPORTED_MODULE_2__.CateringOrder({
      ...order,
      id: `order-${(0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.randomString)(8)}`
    });
    this.setValue([...this.orders, new_order]);
  }
  removeOrderItem(order, item) {
    const new_order = new _catering_order_class__WEBPACK_IMPORTED_MODULE_2__.CateringOrder({
      ...order,
      items: order.items.filter(_ => _.custom_id !== item.custom_id)
    });
    const updated_list = this.orders.filter(_ => _.id !== order.id);
    if (new_order.items.length > 0) {
      this.setValue([...updated_list, new_order]);
    } else this.setValue(updated_list);
  }
  editOrder(order = new _catering_order_class__WEBPACK_IMPORTED_MODULE_2__.CateringOrder()) {
    const ref = this._dialog.open(libs_catering_src_lib_catering_order_modal_new_catering_order_modal_component__WEBPACK_IMPORTED_MODULE_1__.NewCateringOrderModalComponent, {
      data: {
        items: order.items,
        details: {
          ...this.options,
          date: this.options.all_day ? (0,date_fns__WEBPACK_IMPORTED_MODULE_7__.startOfDay)(this.options.date).valueOf() : this.options.date,
          duration: this.options.all_day ? Math.max(24 * 60, this.options.duration) : this.options.duration
        },
        exact_time: !!order.deliver_time,
        offset: order.deliver_offset,
        offset_day: order.deliver_day_offset
      }
    });
    ref.afterClosed().subscribe(items => {
      const orders = this.orders.filter(_ => _.id !== order.id);
      if (!items?.length) return;
      const time = new Date(this.options.date);
      for (const item of items) {
        item.options = [...item.options.map(_ => ({
          ..._
        }))];
        for (const option of item.options) {
          const opt = item.option_list.find(_ => _.id === option.id);
          option.active = !!opt;
        }
      }
      const new_order = new _catering_order_class__WEBPACK_IMPORTED_MODULE_2__.CateringOrder({
        ...order,
        items,
        event: this.options,
        deliver_offset: ref.componentInstance.offset,
        deliver_time: ref.componentInstance.exact_time ? time.getHours() + time.getMinutes() / 60 : null,
        deliver_day_offset: ref.componentInstance.offset_day || 0
      });
      if (new_order.item_count <= 0) return;
      this.setValue([...orders, new_order]);
    });
  }
  optionList(item) {
    return item.option_list?.map(_ => _.name).join('\n');
  }
  toggleFavourite(cateringitem) {
    const fav_list = this.favorites;
    const new_state = !fav_list.includes(cateringitem.id);
    if (new_state) {
      this._settings.saveUserSetting('favourite_menu_items', [...fav_list, cateringitem.id]);
    } else {
      this._settings.saveUserSetting('favourite_menu_items', fav_list.filter(_ => _ !== cateringitem.id));
    }
  }
  static #_ = this.ɵfac = function CateringListFieldComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || CateringListFieldComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵdirectiveInject"](_placeos_common__WEBPACK_IMPORTED_MODULE_0__.SettingsService), _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵdirectiveInject"](_placeos_organisation__WEBPACK_IMPORTED_MODULE_3__.OrganisationService), _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵdirectiveInject"](_angular_material_dialog__WEBPACK_IMPORTED_MODULE_8__.MatDialog));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵdefineComponent"]({
    type: CateringListFieldComponent,
    selectors: [["catering-list-field"]],
    inputs: {
      options: "options"
    },
    features: [_angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵProvidersFeature"]([{
      provide: _angular_forms__WEBPACK_IMPORTED_MODULE_9__.NG_VALUE_ACCESSOR,
      /* istanbul ignore next */
      useExisting: (0,_angular_core__WEBPACK_IMPORTED_MODULE_5__.forwardRef)(() => CateringListFieldComponent),
      multi: true
    }]), _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵNgOnChangesFeature"]],
    decls: 8,
    vars: 2,
    consts: [["list", "", 1, "space-y-2"], ["order", "", "class", "border shadow bg-base-100 rounded-xl overflow-hidden", 3, "border-error", "border-base-300", 4, "ngFor", "ngForOf"], ["btn", "", "matRipple", "", "name", "add-catering-item", 1, "w-full", "inverse", "mt-2", 3, "click", "disabled"], [1, "flex", "items-center", "justify-center", "space-x-2"], ["order", "", 1, "border", "shadow", "bg-base-100", "rounded-xl", "overflow-hidden"], [1, "flex", "items-center", "space-x-2", "p-4"], [1, "flex-1"], [1, "flex", "items-center", "space-x-4"], ["class", "flex items-center justify-center h-6 w-6 rounded-full bg-error text-error-content", 3, "matTooltip", 4, "ngIf"], [1, "text-xs", "opacity-60"], ["icon", "", "matRipple", "", "matTooltip", "Duplicate Order", 3, "click", 4, "ngIf"], ["icon", "", "matRipple", "", "matTooltip", "Edit Order", 3, "click", 4, "ngIf"], ["icon", "", "matRipple", "", "matTooltip", "Remove Order", "class", "text-error", 3, "click", 4, "ngIf"], ["icon", "", "matRipple", "", 3, "click", "matTooltip"], [1, "flex", "flex-col", "bg-base-200", "divide-y", "divide-base-100"], ["class", "flex items-center px-4 py-1 space-x-2 hover:opacity-90", 4, "ngFor", "ngForOf"], [1, "flex", "items-center", "justify-center", "h-6", "w-6", "rounded-full", "bg-error", "text-error-content", 3, "matTooltip"], ["icon", "", "matRipple", "", "matTooltip", "Duplicate Order", 3, "click"], ["icon", "", "matRipple", "", "matTooltip", "Edit Order", 3, "click"], ["icon", "", "matRipple", "", "matTooltip", "Remove Order", 1, "text-error", 3, "click"], [1, "flex", "items-center", "px-4", "py-1", "space-x-2", "hover:opacity-90"], [1, "flex", "items-center", "flex-1"], ["class", "text-xs opacity-60 ml-4 font-normal", 3, "matTooltip", 4, "ngIf"], [1, "rounded", "bg-success", "text-success-content", "text-xs", "px-2", "py-1"], [1, "rounded", "bg-info", "text-info-content", "text-xs", "px-2", "py-1"], ["icon", "", "matRipple", "", "matTooltip", "Remove Order Item", "class", "text-error", 3, "click", 4, "ngIf"], ["icon", "", "matRipple", "", "name", "toggle-catering-item-favourite", 3, "click", "matTooltip"], [1, "text-xs", "opacity-60", "ml-4", "font-normal", 3, "matTooltip"], ["icon", "", "matRipple", "", "matTooltip", "Remove Order Item", 1, "text-error", 3, "click"]],
    template: function CateringListFieldComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "div", 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](1, CateringListFieldComponent_div_1_Template, 20, 25, "div", 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](2, "button", 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("click", function CateringListFieldComponent_Template_button_click_2_listener() {
          return ctx.editOrder();
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](3, "div", 3)(4, "app-icon");
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](5, "search");
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](6, "span");
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](7, "Add Order");
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]()()();
      }
      if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngForOf", ctx.orders);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("disabled", ctx.disabled);
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_10__.NgForOf, _angular_common__WEBPACK_IMPORTED_MODULE_10__.NgIf, _angular_material_tooltip__WEBPACK_IMPORTED_MODULE_11__.MatTooltip, _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_4__.IconComponent, _angular_material_core__WEBPACK_IMPORTED_MODULE_12__.MatRipple, _angular_common__WEBPACK_IMPORTED_MODULE_10__.CurrencyPipe, _angular_common__WEBPACK_IMPORTED_MODULE_10__.DatePipe],
    data: {
      animation: [_placeos_common__WEBPACK_IMPORTED_MODULE_0__.ANIMATION_SHOW_CONTRACT_EXPAND]
    }
  });
}

/***/ }),

/***/ 48519:
/*!**********************************************************!*\
  !*** ./libs/catering/src/lib/catering-menu.component.ts ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CateringMenuComponent: () => (/* binding */ CateringMenuComponent)
/* harmony export */ });
/* harmony import */ var _catering_state_service__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./catering-state.service */ 52201);
/* harmony import */ var _catering_item_class__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./catering-item.class */ 25892);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var _catering_orders_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./catering-orders.service */ 98197);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _angular_material_menu__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @angular/material/menu */ 31034);
/* harmony import */ var _angular_material_checkbox__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @angular/material/checkbox */ 97024);
/* harmony import */ var _angular_material_tooltip__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @angular/material/tooltip */ 80640);
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @angular/forms */ 34456);
/* harmony import */ var _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../components/src/lib/icon.component */ 69434);
/* harmony import */ var _components_src_lib_simple_table_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../components/src/lib/simple-table.component */ 88328);
/* harmony import */ var _angular_material_core__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @angular/material/core */ 74646);















const _c0 = a0 => ({
  key: "active",
  name: " ",
  content: a0,
  size: "3.5rem",
  sortable: false
});
const _c1 = () => ({
  key: "name",
  name: "Name"
});
const _c2 = () => ({
  key: "category",
  name: "Category"
});
const _c3 = a0 => ({
  key: "unit_price",
  name: "Price",
  content: a0,
  size: "6rem"
});
const _c4 = a0 => ({
  key: "actions",
  name: " ",
  content: a0,
  size: "6.5rem",
  sortable: false
});
const _c5 = (a0, a1, a2, a3, a4) => [a0, a1, a2, a3, a4];
function CateringMenuComponent_ng_template_1_Template(rf, ctx) {
  if (rf & 1) {
    const _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](0, "mat-checkbox", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵlistener"]("ngModelChange", function CateringMenuComponent_ng_template_1_Template_mat_checkbox_ngModelChange_0_listener($event) {
      const row_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵrestoreView"](_r1).row;
      const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵresetView"](ctx_r2.setEnabled(row_r2, $event));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const row_r2 = ctx.row;
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("ngModel", ctx_r2.isEnabled(row_r2));
  }
}
function CateringMenuComponent_ng_template_3_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](0, "div", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpipe"](2, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpipe"](3, "currency");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const data_r4 = ctx.data;
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpipeBind2"](3, 3, data_r4 / 100, _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpipeBind1"](2, 1, ctx_r2.symbol)), " ");
  }
}
function CateringMenuComponent_ng_template_5_Template(rf, ctx) {
  if (rf & 1) {
    const _r5 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](0, "div", 8)(1, "button", 9)(2, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](3, "more_vert");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](4, "mat-menu", null, 4)(6, "button", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵlistener"]("click", function CateringMenuComponent_ng_template_5_Template_button_click_6_listener() {
      const row_r6 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵrestoreView"](_r5).row;
      const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵresetView"](ctx_r2.addOption(row_r6));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](7, "div", 11)(8, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](9, "add");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](10, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](11, "Add Option");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]()()();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](12, "button", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵlistener"]("click", function CateringMenuComponent_ng_template_5_Template_button_click_12_listener() {
      const row_r6 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵrestoreView"](_r5).row;
      const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵresetView"](ctx_r2.editItem(row_r6));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](13, "div", 11)(14, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](15, "edit");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](16, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](17, "Edit Item");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]()()();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](18, "button", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵlistener"]("click", function CateringMenuComponent_ng_template_5_Template_button_click_18_listener() {
      const row_r6 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵrestoreView"](_r5).row;
      const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵresetView"](ctx_r2.removeItem(row_r6));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](19, "div", 11)(20, "app-icon", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](21, "delete");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](22, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](23, "Remove Item");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]()()()();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](24, "button", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵlistener"]("click", function CateringMenuComponent_ng_template_5_Template_button_click_24_listener() {
      const row_r6 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵrestoreView"](_r5).row;
      const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵresetView"](ctx_r2.show_children[row_r6.id] = !ctx_r2.show_children[row_r6.id]);
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](25, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](26);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]()()();
  }
  if (rf & 2) {
    const row_r6 = ctx.row;
    const menu_r7 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵreference"](5);
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵclassProp"]("opacity-0", !ctx_r2.can_edit);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("disabled", !ctx_r2.can_edit)("matMenuTriggerFor", menu_r7);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](23);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("disabled", !(row_r6.options == null ? null : row_r6.options.length))("matTooltip", (row_r6.options == null ? null : row_r6.options.length) ? (ctx_r2.show_children[row_r6.id] ? "Hide" : "Show") + " Menu Item Options" : "");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtextInterpolate1"](" ", ctx_r2.show_children[row_r6.id] ? "keyboard_arrow_down" : "chevron_right", " ");
  }
}
function CateringMenuComponent_ng_template_7_div_0_button_7_Template(rf, ctx) {
  if (rf & 1) {
    const _r8 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](0, "button", 22);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵlistener"]("click", function CateringMenuComponent_ng_template_7_div_0_button_7_Template_button_click_0_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵrestoreView"](_r8);
      const option_r9 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵnextContext"]().$implicit;
      const row_r10 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵnextContext"]().row;
      const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵresetView"](ctx_r2.editOption(row_r10, option_r9));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](1, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](2, "edit");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]()();
  }
}
function CateringMenuComponent_ng_template_7_div_0_button_8_Template(rf, ctx) {
  if (rf & 1) {
    const _r11 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](0, "button", 23);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵlistener"]("click", function CateringMenuComponent_ng_template_7_div_0_button_8_Template_button_click_0_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵrestoreView"](_r11);
      const option_r9 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵnextContext"]().$implicit;
      const row_r10 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵnextContext"]().row;
      const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵresetView"](ctx_r2.removeOption(row_r10, option_r9));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](1, "app-icon", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](2, "delete");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]()();
  }
}
function CateringMenuComponent_ng_template_7_div_0_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](0, "div", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelement"](1, "div", 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](2, "div", 17)(3, "div", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](5, "div", 19);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](6);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtemplate"](7, CateringMenuComponent_ng_template_7_div_0_button_7_Template, 3, 0, "button", 20)(8, CateringMenuComponent_ng_template_7_div_0_button_8_Template, 3, 0, "button", 21);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const option_r9 = ctx.$implicit;
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtextInterpolate"](option_r9.name);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtextInterpolate1"](" ", option_r9.group, " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("ngIf", ctx_r2.can_edit);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("ngIf", ctx_r2.can_edit);
  }
}
function CateringMenuComponent_ng_template_7_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtemplate"](0, CateringMenuComponent_ng_template_7_div_0_Template, 9, 4, "div", 14);
  }
  if (rf & 2) {
    const row_r10 = ctx.row;
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("ngForOf", row_r10.options);
  }
}
class CateringMenuComponent {
  get filters() {
    return this._orders.filters;
  }
  get can_edit() {
    return this._catering.is_editable;
  }
  get categories() {
    return this._catering.categories;
  }
  constructor(_catering, _orders) {
    this._catering = _catering;
    this._orders = _orders;
    this.show_children = {};
    /** Observable for the currently active menu */
    this.menu = this._catering.menu;
    this.addOption = item => this._catering.addOption(item);
    this.editOption = (item, option) => this._catering.addOption(item, option);
    this.removeOption = (item, option) => this._catering.deleteOption(item, option);
    this.editItem = item => this._catering.addItem(item);
    this.removeItem = item => this._catering.deleteItem(item);
  }
  isEnabled(item) {
    return !item.hide_for_zones.includes(this._catering.zone);
  }
  setEnabled(item, state) {
    let list = item.hide_for_zones;
    if (!state) list = (0,_placeos_common__WEBPACK_IMPORTED_MODULE_2__.unique)([...list, this._catering.zone]);else list = list.filter(_ => _ !== this._catering.zone);
    this._catering.updateItem(new _catering_item_class__WEBPACK_IMPORTED_MODULE_1__.CateringItem({
      ...item,
      hide_for_zones: list
    }));
  }
  static #_ = this.ɵfac = function CateringMenuComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || CateringMenuComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵdirectiveInject"](_catering_state_service__WEBPACK_IMPORTED_MODULE_0__.CateringStateService), _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵdirectiveInject"](_catering_orders_service__WEBPACK_IMPORTED_MODULE_3__.CateringOrdersService));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵdefineComponent"]({
    type: CateringMenuComponent,
    selectors: [["catering-menu"]],
    decls: 9,
    vars: 20,
    consts: [["active_template", ""], ["price_template", ""], ["actions_template", ""], ["child_template", ""], ["menu", "matMenu"], ["empty_message", "No Items in Menu", 1, "w-full", "min-w-[32rem]", "block", "text-sm", 3, "data", "columns", "filter", "show_children", "child_template", "sortable"], ["matTooltip", "Allow Ordering Item for this zone", "matTooltipPosition", "right", 1, "mx-auto", 3, "ngModelChange", "ngModel"], [1, "px-2", "py-1", "font-mono", "text-xs", "flex", "items-center", "mx-auto", "bg-secondary", "text-secondary-content", "rounded"], [1, "p-2", "flex", "items-center", "mx-auto", "space-x-2"], ["icon", "", "matRipple", "", 3, "disabled", "matMenuTriggerFor"], ["mat-menu-item", "", 1, "flex", "items-center", 3, "click"], [1, "flex", "items-center", "space-x-2", "pr-2"], [1, "text-error"], ["icon", "", "matRipple", "", 3, "click", "disabled", "matTooltip"], ["class", "flex p-2 items-center border-b border-solid border-base-200 relative space-x-2", 4, "ngFor", "ngForOf"], [1, "flex", "p-2", "items-center", "border-b", "border-solid", "border-base-200", "relative", "space-x-2"], [1, "absolute", "inset-y-0", "left-0", "w-2", "bg-black", "opacity-10"], [1, "flex-1", "pl-4", "pr-2"], [1, "text"], [1, "text-xs", "opacity-60"], ["icon", "", "matRipple", "", "matTooltip", "Edit Menu Item Option", 3, "click", 4, "ngIf"], ["icon", "", "matRipple", "", "class", "!mr-1", "matTooltip", "Remove Menu Item Option", 3, "click", 4, "ngIf"], ["icon", "", "matRipple", "", "matTooltip", "Edit Menu Item Option", 3, "click"], ["icon", "", "matRipple", "", "matTooltip", "Remove Menu Item Option", 1, "!mr-1", 3, "click"]],
    template: function CateringMenuComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelement"](0, "simple-table", 5);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtemplate"](1, CateringMenuComponent_ng_template_1_Template, 1, 1, "ng-template", null, 0, _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtemplateRefExtractor"])(3, CateringMenuComponent_ng_template_3_Template, 4, 6, "ng-template", null, 1, _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtemplateRefExtractor"])(5, CateringMenuComponent_ng_template_5_Template, 27, 7, "ng-template", null, 2, _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtemplateRefExtractor"])(7, CateringMenuComponent_ng_template_7_Template, 1, 1, "ng-template", null, 3, _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtemplateRefExtractor"]);
      }
      if (rf & 2) {
        const active_template_r12 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵreference"](2);
        const price_template_r13 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵreference"](4);
        const actions_template_r14 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵreference"](6);
        const child_template_r15 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵreference"](8);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("data", ctx.menu)("columns", _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpureFunction5"](14, _c5, _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpureFunction1"](6, _c0, active_template_r12), _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpureFunction0"](8, _c1), _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpureFunction0"](9, _c2), _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpureFunction1"](10, _c3, price_template_r13), _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpureFunction1"](12, _c4, actions_template_r14)))("filter", ctx.filters == null ? null : ctx.filters.search)("show_children", ctx.show_children)("child_template", child_template_r15)("sortable", true);
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_7__.NgForOf, _angular_common__WEBPACK_IMPORTED_MODULE_7__.NgIf, _angular_material_menu__WEBPACK_IMPORTED_MODULE_8__.MatMenu, _angular_material_menu__WEBPACK_IMPORTED_MODULE_8__.MatMenuItem, _angular_material_menu__WEBPACK_IMPORTED_MODULE_8__.MatMenuTrigger, _angular_material_checkbox__WEBPACK_IMPORTED_MODULE_9__.MatCheckbox, _angular_material_tooltip__WEBPACK_IMPORTED_MODULE_10__.MatTooltip, _angular_forms__WEBPACK_IMPORTED_MODULE_11__.NgControlStatus, _angular_forms__WEBPACK_IMPORTED_MODULE_11__.NgModel, _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_4__.IconComponent, _components_src_lib_simple_table_component__WEBPACK_IMPORTED_MODULE_5__.SimpleTableComponent, _angular_material_core__WEBPACK_IMPORTED_MODULE_12__.MatRipple, _angular_common__WEBPACK_IMPORTED_MODULE_7__.AsyncPipe, _angular_common__WEBPACK_IMPORTED_MODULE_7__.CurrencyPipe],
    styles: ["[_nghost-%COMP%] {\n                display: flex;\n                flex-direction: column;\n                height: 90%;\n                width: 100%;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNhdGVyaW5nLW1lbnUuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxhQUFhO2dCQUNiLHNCQUFzQjtnQkFDdEIsV0FBVztnQkFDWCxXQUFXO1lBQ2YiLCJmaWxlIjoiY2F0ZXJpbmctbWVudS5jb21wb25lbnQudHMiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIDpob3N0IHtcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgICAgICAgICAgaGVpZ2h0OiA5MCU7XG4gICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICB9XG4gICAgICAgICJdfQ== */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvY2F0ZXJpbmcvc3JjL2xpYi9jYXRlcmluZy1tZW51LmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1lBQ1k7Z0JBQ0ksYUFBYTtnQkFDYixzQkFBc0I7Z0JBQ3RCLFdBQVc7Z0JBQ1gsV0FBVztZQUNmOztBQUVaLHdpQkFBd2lCIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICA6aG9zdCB7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgICAgICAgIGhlaWdodDogOTAlO1xuICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgfVxuICAgICAgICAiXSwic291cmNlUm9vdCI6IiJ9 */"]
  });
}

/***/ }),

/***/ 37053:
/*!******************************************************************!*\
  !*** ./libs/catering/src/lib/catering-option-modal.component.ts ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CateringItemOptionModalComponent: () => (/* binding */ CateringItemOptionModalComponent)
/* harmony export */ });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/forms */ 34456);
/* harmony import */ var _angular_material_dialog__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/material/dialog */ 12587);
/* harmony import */ var libs_common_src_lib_general__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! libs/common/src/lib/general */ 64217);
/* harmony import */ var _catering_item_class__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./catering-item.class */ 25892);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _angular_material_autocomplete__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @angular/material/autocomplete */ 79771);
/* harmony import */ var _angular_material_core__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @angular/material/core */ 74646);
/* harmony import */ var _angular_material_checkbox__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @angular/material/checkbox */ 97024);
/* harmony import */ var _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../components/src/lib/icon.component */ 69434);
/* harmony import */ var _angular_material_form_field__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @angular/material/form-field */ 24950);
/* harmony import */ var _angular_material_input__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @angular/material/input */ 95541);
/* harmony import */ var _angular_material_progress_spinner__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @angular/material/progress-spinner */ 41134);
















function CateringItemOptionModalComponent_button_3_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "button", 6)(1, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](2, "close");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()();
  }
}
function CateringItemOptionModalComponent_form_4_div_1_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "div", 9)(1, "label", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](2, " Name");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](3, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](4, "*");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](5, ": ");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](6, "mat-form-field", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelement"](7, "input", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](8, "mat-error");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](9, "Name is required");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()()();
  }
  if (rf & 2) {
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵclassProp"]("error", ctx_r0.form.controls.name.invalid && ctx_r0.form.controls.name.touched);
  }
}
function CateringItemOptionModalComponent_form_4_div_2_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "div", 9)(1, "label", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](2, " Type");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](3, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](4, "*");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](5, ": ");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](6, "mat-form-field", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelement"](7, "input", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](8, "mat-error");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](9, "Type is required");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()()();
  }
  if (rf & 2) {
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"](2);
    const auto_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵreference"](9);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵclassProp"]("error", ctx_r0.form.controls.group.invalid && ctx_r0.form.controls.group.touched);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](6);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("matAutocomplete", auto_r2);
  }
}
function CateringItemOptionModalComponent_form_4_div_3_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "div", 9)(1, "label", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](2, "Unit Price:");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](3, "mat-form-field", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelement"](4, "input", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()();
  }
}
function CateringItemOptionModalComponent_form_4_div_4_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "div", 9)(1, "mat-checkbox", 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](2, " Can select multiple of type ");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()();
  }
}
function CateringItemOptionModalComponent_form_4_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "form", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](1, CateringItemOptionModalComponent_form_4_div_1_Template, 10, 2, "div", 8)(2, CateringItemOptionModalComponent_form_4_div_2_Template, 10, 3, "div", 8)(3, CateringItemOptionModalComponent_form_4_div_3_Template, 5, 0, "div", 8)(4, CateringItemOptionModalComponent_form_4_div_4_Template, 3, 0, "div", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("formGroup", ctx_r0.form);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", ctx_r0.form.controls.name);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", ctx_r0.form.controls.group);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", ctx_r0.form.controls.unit_price);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", ctx_r0.form.controls.multiple);
  }
}
function CateringItemOptionModalComponent_footer_5_Template(rf, ctx) {
  if (rf & 1) {
    const _r3 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "footer", 17)(1, "button", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵlistener"]("click", function CateringItemOptionModalComponent_footer_5_Template_button_click_1_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵrestoreView"](_r3);
      const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵresetView"](ctx_r0.saveChanges());
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](2, " Save ");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("disabled", !ctx_r0.form.dirty);
  }
}
function CateringItemOptionModalComponent_ng_template_6_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "div", 19);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelement"](1, "mat-spinner", 20);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](2, "p");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](3, "Saving catering item option...");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()();
  }
}
function CateringItemOptionModalComponent_mat_option_10_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "mat-option", 21);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const option_r4 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("value", option_r4);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtextInterpolate1"](" ", option_r4, " ");
  }
}
class CateringItemOptionModalComponent {
  /** Current item details */
  get option() {
    return this._data.option;
  }
  /** List of available categories */
  get types() {
    return this._data.types || [];
  }
  constructor(_data) {
    this._data = _data;
    /** Emitter for events on the modal */
    this.event = new _angular_core__WEBPACK_IMPORTED_MODULE_3__.EventEmitter();
    /** Form fields for item */
    this.form = new _angular_forms__WEBPACK_IMPORTED_MODULE_4__.FormGroup({
      name: new _angular_forms__WEBPACK_IMPORTED_MODULE_4__.FormControl(this.option.name || '', [_angular_forms__WEBPACK_IMPORTED_MODULE_4__.Validators.required]),
      group: new _angular_forms__WEBPACK_IMPORTED_MODULE_4__.FormControl(this.option.group || '', [_angular_forms__WEBPACK_IMPORTED_MODULE_4__.Validators.required]),
      unit_price: new _angular_forms__WEBPACK_IMPORTED_MODULE_4__.FormControl(this.option.unit_price),
      multiple: new _angular_forms__WEBPACK_IMPORTED_MODULE_4__.FormControl(!!this.option.multiple, [])
    });
    /** Whether changes are being saved */
    this.loading = false;
  }
  saveChanges() {
    this.loading = true;
    const new_option = {
      ...this.option,
      id: this.option.id || `option-${(0,libs_common_src_lib_general__WEBPACK_IMPORTED_MODULE_0__.randomInt)(9999_9999)}`,
      ...this.form.value
    };
    this.event.emit({
      reason: 'done',
      metadata: {
        item: new _catering_item_class__WEBPACK_IMPORTED_MODULE_1__.CateringItem({
          ...this._data.parent,
          options: this._data.parent.options.filter(i => i.id !== new_option.id).concat([new_option])
        })
      }
    });
  }
  static #_ = this.ɵfac = function CateringItemOptionModalComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || CateringItemOptionModalComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵdirectiveInject"](_angular_material_dialog__WEBPACK_IMPORTED_MODULE_5__.MAT_DIALOG_DATA));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵdefineComponent"]({
    type: CateringItemOptionModalComponent,
    selectors: [["catering-option-modal"]],
    outputs: {
      event: "event"
    },
    decls: 11,
    vars: 6,
    consts: [["load_state", ""], ["auto", "matAutocomplete"], ["icon", "", "mat-dialog-close", "", 4, "ngIf"], ["class", "p-4 overflow-auto max-h-[65vh]", 3, "formGroup", 4, "ngIf", "ngIfElse"], ["class", "flex p-2 items-center justify-center border-t border-solid border-base-200", 4, "ngIf"], [3, "value", 4, "ngFor", "ngForOf"], ["icon", "", "mat-dialog-close", ""], [1, "p-4", "overflow-auto", "max-h-[65vh]", 3, "formGroup"], ["class", "flex flex-col", 4, "ngIf"], [1, "flex", "flex-col"], ["for", "title"], ["appearance", "outline"], ["matInput", "", "name", "name", "placeholder", "Item name", "formControlName", "name"], ["for", "group"], ["matInput", "", "name", "group", "placeholder", "Type of option e.g. Number of sugars", "formControlName", "group", 3, "matAutocomplete"], ["matInput", "", "name", "unit-price", "type", "number", "placeholder", "Unit Price", "formControlName", "unit_price"], ["name", "multiple", "formControlName", "multiple"], [1, "flex", "p-2", "items-center", "justify-center", "border-t", "border-solid", "border-base-200"], ["btn", "", "matRipple", "", 3, "click", "disabled"], ["loading", "", 1, "flex", "flex-col", "items-center", "p-8", "space-y-2", "w-64"], ["diameter", "32"], [3, "value"]],
    template: function CateringItemOptionModalComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "header")(1, "h3");
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](3, CateringItemOptionModalComponent_button_3_Template, 3, 0, "button", 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](4, CateringItemOptionModalComponent_form_4_Template, 5, 5, "form", 3)(5, CateringItemOptionModalComponent_footer_5_Template, 3, 1, "footer", 4)(6, CateringItemOptionModalComponent_ng_template_6_Template, 4, 0, "ng-template", null, 0, _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplateRefExtractor"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](8, "mat-autocomplete", null, 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](10, CateringItemOptionModalComponent_mat_option_10_Template, 2, 2, "mat-option", 5);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
      }
      if (rf & 2) {
        const load_state_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵreference"](7);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtextInterpolate1"]("", ctx.option.id ? "Edit" : "Add", " Item Option");
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", !ctx.loading);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", ctx.form && !ctx.loading)("ngIfElse", load_state_r5);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", !ctx.loading);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](5);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngForOf", ctx.types);
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_6__.NgForOf, _angular_common__WEBPACK_IMPORTED_MODULE_6__.NgIf, _angular_material_autocomplete__WEBPACK_IMPORTED_MODULE_7__.MatAutocomplete, _angular_material_core__WEBPACK_IMPORTED_MODULE_8__.MatOption, _angular_material_autocomplete__WEBPACK_IMPORTED_MODULE_7__.MatAutocompleteTrigger, _angular_material_dialog__WEBPACK_IMPORTED_MODULE_5__.MatDialogClose, _angular_material_checkbox__WEBPACK_IMPORTED_MODULE_9__.MatCheckbox, _angular_forms__WEBPACK_IMPORTED_MODULE_4__["ɵNgNoValidate"], _angular_forms__WEBPACK_IMPORTED_MODULE_4__.DefaultValueAccessor, _angular_forms__WEBPACK_IMPORTED_MODULE_4__.NumberValueAccessor, _angular_forms__WEBPACK_IMPORTED_MODULE_4__.NgControlStatus, _angular_forms__WEBPACK_IMPORTED_MODULE_4__.NgControlStatusGroup, _angular_forms__WEBPACK_IMPORTED_MODULE_4__.FormGroupDirective, _angular_forms__WEBPACK_IMPORTED_MODULE_4__.FormControlName, _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_2__.IconComponent, _angular_material_form_field__WEBPACK_IMPORTED_MODULE_10__.MatFormField, _angular_material_form_field__WEBPACK_IMPORTED_MODULE_10__.MatError, _angular_material_core__WEBPACK_IMPORTED_MODULE_8__.MatRipple, _angular_material_input__WEBPACK_IMPORTED_MODULE_11__.MatInput, _angular_material_progress_spinner__WEBPACK_IMPORTED_MODULE_12__.MatProgressSpinner]
  });
}

/***/ }),

/***/ 81491:
/*!****************************************************************!*\
  !*** ./libs/catering/src/lib/catering-order-item.component.ts ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CateringOrderItemComponent: () => (/* binding */ CateringOrderItemComponent)
/* harmony export */ });
/* harmony import */ var _catering_item_class__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./catering-item.class */ 25892);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../components/src/lib/icon.component */ 69434);
/* harmony import */ var _angular_material_core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/material/core */ 74646);





const _c0 = ["catering-order-item", ""];
function CateringOrderItemComponent_ng_container_0_ng_container_14_div_1_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](0, "div", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const opt_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"]().$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtextInterpolate1"](" ", opt_r3.name, " ");
  }
}
function CateringOrderItemComponent_ng_container_0_ng_container_14_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](1, CateringOrderItemComponent_ng_container_0_ng_container_14_div_1_Template, 2, 1, "div", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementContainerEnd"]();
  }
  if (rf & 2) {
    const opt_r3 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngIf", opt_r3);
  }
}
function CateringOrderItemComponent_ng_container_0_Template(rf, ctx) {
  if (rf & 1) {
    const _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](1, "div", 1);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelement"](2, "div", 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](3, "div", 3)(4, "button", 4);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵlistener"]("click", function CateringOrderItemComponent_ng_container_0_Template_button_click_4_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵrestoreView"](_r1);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵresetView"](ctx_r1.toggle());
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](5, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](6);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]()()();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](7, "div", 5)(8, "div", 6)(9, "div", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](10);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](11, "div", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](12);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](13, "div", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](14, CateringOrderItemComponent_ng_container_0_ng_container_14_Template, 2, 1, "ng-container", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementContainerEnd"]();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵclassProp"]("bg-success", ctx_r1.active)("text-white", ctx_r1.active)("border-solid", ctx_r1.active);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtextInterpolate"](ctx_r1.active ? "done" : "local_pizza");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtextInterpolate1"](" ", (ctx_r1.item == null ? null : ctx_r1.item.amount) || (ctx_r1.item == null ? null : ctx_r1.item.quantity) || 1, "\u00D7 ");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtextInterpolate"](ctx_r1.item == null ? null : ctx_r1.item.name);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngForOf", ctx_r1.item.option_list);
  }
}
const ACTIVE_ITEMS = new Set();
class CateringOrderItemComponent {
  constructor() {
    this.active = false;
  }
  get item_key() {
    return `${this.order_id}|${this.item?.id}`;
  }
  ngOnInit() {
    this.active = ACTIVE_ITEMS.has(this.item_key);
  }
  toggle() {
    if (ACTIVE_ITEMS.has(this.item_key)) {
      ACTIVE_ITEMS.delete(this.item_key);
      this.active = false;
    } else {
      ACTIVE_ITEMS.add(this.item_key);
      this.active = true;
    }
  }
  static #_ = this.ɵfac = function CateringOrderItemComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || CateringOrderItemComponent)();
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdefineComponent"]({
    type: CateringOrderItemComponent,
    selectors: [["", "catering-order-item", ""]],
    inputs: {
      order_id: "order_id",
      item: "item"
    },
    attrs: _c0,
    decls: 1,
    vars: 1,
    consts: [[4, "ngIf"], [1, "w-16", "text-right", "h-14", "relative"], ["arm", "", 1, "border-b-2", "border-l-2", "border-base-200", "w-4", "h-16", "absolute", "top-1/2", "left-1/2", "-translate-y-full", "-translate-x-px"], [1, "w-12", "mr-4"], ["action", "", "icon", "", "matRipple", "", 1, "border-2", "border-base-200", "border-dashed", "text-xl", "text-dark-fade", "p-2", 3, "click"], [1, "flex", "flex-1", "items-center", "border-b", "border-base-200", "border-solid", "py-4", "space-x-4"], [1, ""], [1, "p-1", "rounded-full", "bg-base-300", "w-10", "h-10", "flex", "items-center", "justify-center", "font-mono", "text-sm"], [1, "flex-1"], [1, "flex", "space-x-2", "mr-2", "px-4"], [4, "ngFor", "ngForOf"], ["class", "text-xs py-1 px-2 bg-warning text-warning-content rounded-2xl shadow", 4, "ngIf"], [1, "text-xs", "py-1", "px-2", "bg-warning", "text-warning-content", "rounded-2xl", "shadow"]],
    template: function CateringOrderItemComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](0, CateringOrderItemComponent_ng_container_0_Template, 15, 10, "ng-container", 0);
      }
      if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngIf", ctx.item);
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_3__.NgForOf, _angular_common__WEBPACK_IMPORTED_MODULE_3__.NgIf, _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_1__.IconComponent, _angular_material_core__WEBPACK_IMPORTED_MODULE_4__.MatRipple],
    styles: ["[_nghost-%COMP%]:last-child    > div[_ngcontent-%COMP%] {\n                border: none !important;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNhdGVyaW5nLW9yZGVyLWl0ZW0uY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSx1QkFBdUI7WUFDM0IiLCJmaWxlIjoiY2F0ZXJpbmctb3JkZXItaXRlbS5jb21wb25lbnQudHMiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIDpob3N0Omxhc3QtY2hpbGQgPiBkaXYge1xuICAgICAgICAgICAgICAgIGJvcmRlcjogbm9uZSAhaW1wb3J0YW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAiXX0= */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvY2F0ZXJpbmcvc3JjL2xpYi9jYXRlcmluZy1vcmRlci1pdGVtLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1lBQ1k7Z0JBQ0ksdUJBQXVCO1lBQzNCOztBQUVaLHdhQUF3YSIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgOmhvc3Q6bGFzdC1jaGlsZCA+IGRpdiB7XG4gICAgICAgICAgICAgICAgYm9yZGVyOiBub25lICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICJdLCJzb3VyY2VSb290IjoiIn0= */"]
  });
}

/***/ }),

/***/ 41623:
/*!****************************************************************!*\
  !*** ./libs/catering/src/lib/catering-order-list.component.ts ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CateringOrderListComponent: () => (/* binding */ CateringOrderListComponent)
/* harmony export */ });
/* harmony import */ var _home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 89204);
/* harmony import */ var _catering_orders_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./catering-orders.service */ 98197);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var _catering_vars__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./catering.vars */ 91074);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _angular_material_menu__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @angular/material/menu */ 31034);
/* harmony import */ var _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../components/src/lib/icon.component */ 69434);
/* harmony import */ var _components_src_lib_custom_tooltip_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../components/src/lib/custom-tooltip.component */ 22238);
/* harmony import */ var _components_src_lib_simple_table_component__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../components/src/lib/simple-table.component */ 88328);
/* harmony import */ var _angular_material_core__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @angular/material/core */ 74646);
/* harmony import */ var _angular_material_progress_bar__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @angular/material/progress-bar */ 26354);
/* harmony import */ var _catering_order_item_component__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./catering-order-item.component */ 81491);















const _c0 = a0 => ({
  key: "state",
  name: " ",
  size: "4rem",
  sortable: false,
  content: a0
});
const _c1 = a0 => ({
  key: "deliver_at",
  name: "Time",
  content: a0
});
const _c2 = a0 => ({
  key: "event",
  name: "Location",
  content: a0,
  sortable: false
});
const _c3 = a0 => ({
  key: "event",
  name: "Host",
  content: a0,
  sortable: false
});
const _c4 = () => ({
  key: "charge_code",
  name: "Charge Code"
});
const _c5 = () => ({
  key: "invoice_number",
  name: "Invoice No.",
  empty: "No Invoice"
});
const _c6 = a0 => ({
  key: "status",
  name: "Status",
  content: a0,
  size: "11rem"
});
const _c7 = a0 => ({
  key: "actions",
  name: " ",
  size: "6.5rem",
  content: a0,
  sortable: false
});
const _c8 = (a0, a1, a2, a3, a4, a5, a6, a7) => [a0, a1, a2, a3, a4, a5, a6, a7];
function CateringOrderListComponent_ng_template_4_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](0, "div", 12)(1, "div", 13)(2, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](3, "room_service");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]()()();
  }
}
function CateringOrderListComponent_ng_template_6_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](0, "div", 14)(1, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipe"](3, "date");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](4, "div", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipe"](6, "date");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipe"](7, "date");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipe"](8, "date");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipe"](9, "date");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const data_r1 = ctx.data;
    const row_r2 = ctx.row;
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtextInterpolate1"]("Deliver at ", _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipeBind2"](3, 5, data_r1, ctx_r2.time_format), "");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtextInterpolate4"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipeBind2"](6, 8, row_r2 == null ? null : row_r2.event == null ? null : row_r2.event.date, "MMM d"), ", ", _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipeBind2"](7, 11, row_r2 == null ? null : row_r2.event == null ? null : row_r2.event.date, ctx_r2.time_format), " - ", _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipeBind2"](8, 14, row_r2 == null ? null : row_r2.event == null ? null : row_r2.event.date_end, "MMM d"), ", ", _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipeBind2"](9, 17, row_r2 == null ? null : row_r2.event == null ? null : row_r2.event.date_end, ctx_r2.time_format), " ");
  }
}
function CateringOrderListComponent_ng_template_8_span_2_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](0, "span", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](1, " No Location ");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
  }
}
function CateringOrderListComponent_ng_template_8_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](0, "div", 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtemplate"](2, CateringOrderListComponent_ng_template_8_span_2_Template, 2, 0, "span", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const data_r4 = ctx.data;
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtextInterpolate1"](" ", (data_r4 == null ? null : data_r4.space == null ? null : data_r4.space.display_name) || (data_r4 == null ? null : data_r4.space == null ? null : data_r4.space.name) || "", " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngIf", !((data_r4 == null ? null : data_r4.space == null ? null : data_r4.space.display_name) || (data_r4 == null ? null : data_r4.space == null ? null : data_r4.space.name)));
  }
}
function CateringOrderListComponent_ng_template_10_span_3_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](0, "span", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](1, " Unknown Host ");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
  }
}
function CateringOrderListComponent_ng_template_10_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](0, "div", 16)(1, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtemplate"](3, CateringOrderListComponent_ng_template_10_span_3_Template, 2, 0, "span", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](4, "div", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const data_r5 = ctx.data;
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtextInterpolate1"](" ", (data_r5 == null ? null : data_r5.organiser == null ? null : data_r5.organiser.name) || (data_r5 == null ? null : data_r5.host) || "", " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngIf", !((data_r5 == null ? null : data_r5.organiser == null ? null : data_r5.organiser.name) || (data_r5 == null ? null : data_r5.host)));
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtextInterpolate1"](" ", (data_r5 == null ? null : data_r5.organiser == null ? null : data_r5.organiser.email) || (data_r5 == null ? null : data_r5.host), " ");
  }
}
function CateringOrderListComponent_ng_template_12_button_8_Template(rf, ctx) {
  if (rf & 1) {
    const _r6 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](0, "button", 23);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵlistener"]("click", function CateringOrderListComponent_ng_template_12_button_8_Template_button_click_0_listener() {
      const status_r7 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵrestoreView"](_r6).$implicit;
      const row_r8 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"]().row;
      const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵresetView"](ctx_r2.updateStatus(row_r8, status_r7.id));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](1, "div", 24);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelement"](2, "div", 25);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](3, "span", 26);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]()()();
  }
  if (rf & 2) {
    const status_r7 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵstyleProp"]("background-color", status_r7.colour);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtextInterpolate"](status_r7.name);
  }
}
function CateringOrderListComponent_ng_template_12_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](0, "div", 16)(1, "button", 19)(2, "div", 20);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](4, "app-icon", 21);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](5, "arrow_drop_down");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]()()();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](6, "mat-menu", null, 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtemplate"](8, CateringOrderListComponent_ng_template_12_button_8_Template, 5, 3, "button", 22);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    let tmp_11_0;
    let tmp_13_0;
    const data_r9 = ctx.data;
    const menu_r10 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵreference"](7);
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵstyleProp"]("background", (tmp_11_0 = ctx_r2.status(data_r9)) == null ? null : tmp_11_0.colour);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("matMenuTriggerFor", menu_r10);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtextInterpolate1"](" ", (tmp_13_0 = ctx_r2.status(data_r9)) == null ? null : tmp_13_0.name, " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngForOf", ctx_r2.statuses);
  }
}
function CateringOrderListComponent_ng_template_14_ng_template_4_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](0, "div", 30)(1, "div", 31);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](2, "Notes");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](3, "p", 32);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const row_r12 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"]().row;
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtextInterpolate1"](" ", row_r12.notes, " ");
  }
}
function CateringOrderListComponent_ng_template_14_Template(rf, ctx) {
  if (rf & 1) {
    const _r11 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](0, "div", 27)(1, "button", 28)(2, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](3, "description");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtemplate"](4, CateringOrderListComponent_ng_template_14_ng_template_4_Template, 5, 1, "ng-template", null, 8, _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtemplateRefExtractor"]);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](6, "button", 29);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵlistener"]("click", function CateringOrderListComponent_ng_template_14_Template_button_click_6_listener() {
      const row_r12 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵrestoreView"](_r11).row;
      const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵresetView"](ctx_r2.show_children[row_r12.id] = !ctx_r2.show_children[row_r12.id]);
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](7, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](8);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]()()();
  }
  if (rf & 2) {
    const row_r12 = ctx.row;
    const notes_template_r13 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵreference"](5);
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("hover", true)("content", notes_template_r13)("disabled", !row_r12.notes);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](7);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtextInterpolate1"](" ", ctx_r2.show_children[row_r12.id] ? "keyboard_arrow_down" : "chevron_right", " ");
  }
}
function CateringOrderListComponent_ng_template_16_ul_0_li_1_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelement"](0, "li", 36);
  }
  if (rf & 2) {
    const item_r14 = ctx.$implicit;
    const row_r15 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"](2).row;
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("order_id", row_r15 == null ? null : row_r15.id)("item", item_r14);
  }
}
function CateringOrderListComponent_ng_template_16_ul_0_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](0, "ul", 34);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtemplate"](1, CateringOrderListComponent_ng_template_16_ul_0_li_1_Template, 1, 2, "li", 35);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const row_r15 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"]().row;
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngForOf", row_r15.items);
  }
}
function CateringOrderListComponent_ng_template_16_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtemplate"](0, CateringOrderListComponent_ng_template_16_ul_0_Template, 2, 1, "ul", 33);
  }
  if (rf & 2) {
    const row_r15 = ctx.row;
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngIf", row_r15 == null ? null : row_r15.items.length);
  }
}
class CateringOrderListComponent extends _placeos_common__WEBPACK_IMPORTED_MODULE_2__.AsyncHandler {
  get time_format() {
    return this._settings.time_format;
  }
  status(value) {
    return _catering_vars__WEBPACK_IMPORTED_MODULE_3__.CATERING_STATUSES.find(i => i.id === value);
  }
  constructor(_orders, _settings) {
    var _this;
    super();
    _this = this;
    this._orders = _orders;
    this._settings = _settings;
    /** List of filtered orders */
    this.order_list = this._orders.filtered;
    /** Whether order list is loading */
    this.loading = this._orders.loading;
    this.statuses = _catering_vars__WEBPACK_IMPORTED_MODULE_3__.CATERING_STATUSES;
    this.show_children = {};
    this.updateStatus = /*#__PURE__*/function () {
      var _ref = (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* (order, s) {
        yield _this._orders.updateStatus(order, s);
        _this.timeout('status-change', () => order.status = s);
      });
      return function (_x, _x2) {
        return _ref.apply(this, arguments);
      };
    }();
  }
  ngOnInit() {
    this._orders.startPolling();
  }
  ngOnDestroy() {
    this._orders.stopPolling();
  }
  /* istanbul ignore next */
  trackByFn(index, order) {
    return order ? order.id : undefined;
  }
  static #_ = this.ɵfac = function CateringOrderListComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || CateringOrderListComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵdirectiveInject"](_catering_orders_service__WEBPACK_IMPORTED_MODULE_1__.CateringOrdersService), _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵdirectiveInject"](_placeos_common__WEBPACK_IMPORTED_MODULE_2__.SettingsService));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵdefineComponent"]({
    type: CateringOrderListComponent,
    selectors: [["catering-order-list"]],
    features: [_angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵInheritDefinitionFeature"]],
    decls: 18,
    vars: 32,
    consts: [["state_template", ""], ["time_template", ""], ["location_template", ""], ["host_template", ""], ["status_template", ""], ["actions_template", ""], ["child_template", ""], ["menu", "matMenu"], ["notes_template", ""], [1, "flex", "flex-col", "h-full", "w-full", "overflow-auto"], ["mode", "indeterminate", 1, "sticky", "top-0", "left-0", "w-full"], ["empty_message", "No Catering Orders", 1, "min-w-[72rem]", "w-full", "block", "text-sm", 3, "data", "columns", "sortable", "show_children", "child_template"], [1, "p-2"], [1, "rounded-full", "bg-base-200", "p-2", "text-2xl", "flex", "items-center", "justify-center"], [1, "p-4"], [1, "text-xs", "opacity-30"], [1, "px-4", "py-2"], ["class", "opacity-30", 4, "ngIf"], [1, "opacity-30"], ["status", "", "matRipple", "", 1, "rounded-3xl", "text-base", "border-none", "h-10", "px-4", "flex", "items-center", "text-white", "w-36", 3, "matMenuTriggerFor"], [1, "flex", "text-center", "capitalize", "mx-2"], [1, "pl-2"], ["mat-menu-item", "", "class", "flex items-center", 3, "click", 4, "ngFor", "ngForOf"], ["mat-menu-item", "", 1, "flex", "items-center", 3, "click"], [1, "flex", "items-center", "space-x-2"], [1, "rounded-full", "h-4", "w-4", "mr-2"], [1, "mr-2", "w-20"], [1, "flex", "items-center", "space-x-2", "p-2", "mx-auto"], ["icon", "", "matRipple", "", "customTooltip", "", "xPosition", "end", "yPosition", "top", 3, "hover", "content", "disabled"], ["icon", "", "matRipple", "", 3, "click"], [1, "p-2", "rounded-lg", "bg-base-100", "text-base-content", "max-w-[32rem]", "min-w-[8rem]", "shadow", "border", "border-base-200"], [1, "mb-2"], [1, "text-sm", "px-4", "py-2", "bg-base-200", "rounded"], ["class", "list-none p-0 m-0 w-full relative z-0", 4, "ngIf"], [1, "list-none", "p-0", "m-0", "w-full", "relative", "z-0"], ["catering-order-item", "", "class", "flex items-center", 3, "order_id", "item", 4, "ngFor", "ngForOf"], ["catering-order-item", "", 1, "flex", "items-center", 3, "order_id", "item"]],
    template: function CateringOrderListComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](0, "div", 9);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelement"](1, "mat-progress-bar", 10);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipe"](2, "async");
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelement"](3, "simple-table", 11);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtemplate"](4, CateringOrderListComponent_ng_template_4_Template, 4, 0, "ng-template", null, 0, _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtemplateRefExtractor"])(6, CateringOrderListComponent_ng_template_6_Template, 10, 20, "ng-template", null, 1, _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtemplateRefExtractor"])(8, CateringOrderListComponent_ng_template_8_Template, 3, 2, "ng-template", null, 2, _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtemplateRefExtractor"])(10, CateringOrderListComponent_ng_template_10_Template, 6, 3, "ng-template", null, 3, _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtemplateRefExtractor"])(12, CateringOrderListComponent_ng_template_12_Template, 9, 5, "ng-template", null, 4, _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtemplateRefExtractor"])(14, CateringOrderListComponent_ng_template_14_Template, 9, 4, "ng-template", null, 5, _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtemplateRefExtractor"])(16, CateringOrderListComponent_ng_template_16_Template, 1, 1, "ng-template", null, 6, _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtemplateRefExtractor"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
      }
      if (rf & 2) {
        const state_template_r16 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵreference"](5);
        const time_template_r17 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵreference"](7);
        const location_template_r18 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵreference"](9);
        const host_template_r19 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵreference"](11);
        const status_template_r20 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵreference"](13);
        const actions_template_r21 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵreference"](15);
        const child_template_r22 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵreference"](17);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵclassProp"]("opacity-0", !_angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipeBind1"](2, 7, ctx.loading));
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("data", ctx.order_list)("columns", _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpureFunction8"](23, _c8, _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpureFunction1"](9, _c0, state_template_r16), _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpureFunction1"](11, _c1, time_template_r17), _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpureFunction1"](13, _c2, location_template_r18), _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpureFunction1"](15, _c3, host_template_r19), _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpureFunction0"](17, _c4), _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpureFunction0"](18, _c5), _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpureFunction1"](19, _c6, status_template_r20), _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpureFunction1"](21, _c7, actions_template_r21)))("sortable", true)("show_children", ctx.show_children)("child_template", child_template_r22);
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_9__.NgForOf, _angular_common__WEBPACK_IMPORTED_MODULE_9__.NgIf, _angular_material_menu__WEBPACK_IMPORTED_MODULE_10__.MatMenu, _angular_material_menu__WEBPACK_IMPORTED_MODULE_10__.MatMenuItem, _angular_material_menu__WEBPACK_IMPORTED_MODULE_10__.MatMenuTrigger, _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_4__.IconComponent, _components_src_lib_custom_tooltip_component__WEBPACK_IMPORTED_MODULE_5__.CustomTooltipComponent, _components_src_lib_simple_table_component__WEBPACK_IMPORTED_MODULE_6__.SimpleTableComponent, _angular_material_core__WEBPACK_IMPORTED_MODULE_11__.MatRipple, _angular_material_progress_bar__WEBPACK_IMPORTED_MODULE_12__.MatProgressBar, _catering_order_item_component__WEBPACK_IMPORTED_MODULE_7__.CateringOrderItemComponent, _angular_common__WEBPACK_IMPORTED_MODULE_9__.AsyncPipe, _angular_common__WEBPACK_IMPORTED_MODULE_9__.DatePipe],
    styles: ["[_nghost-%COMP%] {\n                display: flex;\n                flex-direction: column;\n                height: 100%;\n                width: 100%;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNhdGVyaW5nLW9yZGVyLWxpc3QuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxhQUFhO2dCQUNiLHNCQUFzQjtnQkFDdEIsWUFBWTtnQkFDWixXQUFXO1lBQ2YiLCJmaWxlIjoiY2F0ZXJpbmctb3JkZXItbGlzdC5jb21wb25lbnQudHMiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIDpob3N0IHtcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgfVxuICAgICAgICAiXX0= */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvY2F0ZXJpbmcvc3JjL2xpYi9jYXRlcmluZy1vcmRlci1saXN0LmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1lBQ1k7Z0JBQ0ksYUFBYTtnQkFDYixzQkFBc0I7Z0JBQ3RCLFlBQVk7Z0JBQ1osV0FBVztZQUNmOztBQUVaLHdqQkFBd2pCIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICA6aG9zdCB7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl0sInNvdXJjZVJvb3QiOiIifQ== */"]
  });
}

/***/ }),

/***/ 82912:
/*!*****************************************************************!*\
  !*** ./libs/catering/src/lib/catering-order-modal.component.ts ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CateringOrderModalComponent: () => (/* binding */ CateringOrderModalComponent)
/* harmony export */ });
/* harmony import */ var _home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 89204);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_material_dialog__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @angular/material/dialog */ 12587);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var _catering_item_class__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./catering-item.class */ 25892);
/* harmony import */ var _catering_order_class__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./catering-order.class */ 75555);
/* harmony import */ var _placeos_organisation__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @placeos/organisation */ 2510);
/* harmony import */ var _utilities__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./utilities */ 60285);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _angular_material_tabs__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @angular/material/tabs */ 38223);
/* harmony import */ var _angular_material_tooltip__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @angular/material/tooltip */ 80640);
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @angular/forms */ 34456);
/* harmony import */ var _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../components/src/lib/icon.component */ 69434);
/* harmony import */ var _angular_material_core__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @angular/material/core */ 74646);
/* harmony import */ var _angular_material_progress_spinner__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @angular/material/progress-spinner */ 41134);
/* harmony import */ var _form_fields_src_lib_counter_component__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../form-fields/src/lib/counter.component */ 55507);



















const _c0 = () => ({});
function CateringOrderModalComponent_div_0_ng_container_1_ng_container_2_mat_tab_1_div_2_div_4_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](0, "div", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](1, " Options Available ");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
  }
}
function CateringOrderModalComponent_div_0_ng_container_1_ng_container_2_mat_tab_1_div_2_a_counter_8_Template(rf, ctx) {
  if (rf & 1) {
    const _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](0, "a-counter", 19);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵlistener"]("ngModelChange", function CateringOrderModalComponent_div_0_ng_container_1_ng_container_2_mat_tab_1_div_2_a_counter_8_Template_a_counter_ngModelChange_0_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵrestoreView"](_r1);
      const item_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"]().$implicit;
      const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"](5);
      return _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵresetView"](ctx_r2.updateItemQuantity(item_r2, $event));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const item_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"]().$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngModel", item_r2.quantity);
  }
}
function CateringOrderModalComponent_div_0_ng_container_1_ng_container_2_mat_tab_1_div_2_div_9_Template(rf, ctx) {
  if (rf & 1) {
    const _r4 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](0, "div", 20)(1, "div", 21)(2, "button", 22)(3, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](4, "remove");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]()()();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](5, "div", 23);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](6);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](7, "button", 24);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵlistener"]("click", function CateringOrderModalComponent_div_0_ng_container_1_ng_container_2_mat_tab_1_div_2_div_9_Template_button_click_7_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵrestoreView"](_r4);
      const item_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"]().$implicit;
      const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"](5);
      return _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵresetView"](ctx_r2.addItem(item_r2));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](8, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](9, "add");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]()()();
  }
  if (rf & 2) {
    const item_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"]().$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("matTooltip", item_r2.quantity ? "Items with options must be removed from order confirmation page" : "");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("disabled", true);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtextInterpolate1"](" ", item_r2.quantity, " ");
  }
}
function CateringOrderModalComponent_div_0_ng_container_1_ng_container_2_mat_tab_1_div_2_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](0, "div", 12)(1, "div", 13)(2, "div", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtemplate"](4, CateringOrderModalComponent_div_0_ng_container_1_ng_container_2_mat_tab_1_div_2_div_4_Template, 2, 0, "div", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](5, "div", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](6);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipe"](7, "currency");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtemplate"](8, CateringOrderModalComponent_div_0_ng_container_1_ng_container_2_mat_tab_1_div_2_a_counter_8_Template, 1, 1, "a-counter", 16)(9, CateringOrderModalComponent_div_0_ng_container_1_ng_container_2_mat_tab_1_div_2_div_9_Template, 10, 3, "div", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const item_r2 = ctx.$implicit;
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtextInterpolate1"](" ", item_r2.name, " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngIf", item_r2.options.length);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipeBind2"](7, 5, item_r2.unit_price / 100, ctx_r2.code), " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngIf", !item_r2.options.length);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngIf", item_r2.options.length);
  }
}
function CateringOrderModalComponent_div_0_ng_container_1_ng_container_2_mat_tab_1_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](0, "mat-tab", 9)(1, "div", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtemplate"](2, CateringOrderModalComponent_div_0_ng_container_1_ng_container_2_mat_tab_1_div_2_Template, 10, 8, "div", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const cat_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"]().$implicit;
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("label", cat_r5);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngForOf", (ctx_r2.menu_items || _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpureFunction0"](2, _c0))[cat_r5]);
  }
}
function CateringOrderModalComponent_div_0_ng_container_1_ng_container_2_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtemplate"](1, CateringOrderModalComponent_div_0_ng_container_1_ng_container_2_mat_tab_1_Template, 3, 3, "mat-tab", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementContainerEnd"]();
  }
  if (rf & 2) {
    const cat_r5 = ctx.$implicit;
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngIf", (ctx_r2.menu_items || _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpureFunction0"](1, _c0))[cat_r5].length);
  }
}
function CateringOrderModalComponent_div_0_ng_container_1_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](1, "mat-tab-group");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtemplate"](2, CateringOrderModalComponent_div_0_ng_container_1_ng_container_2_Template, 2, 2, "ng-container", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementContainerEnd"]();
  }
  if (rf & 2) {
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngForOf", ctx_r2.categories);
  }
}
function CateringOrderModalComponent_div_0_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](0, "div", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtemplate"](1, CateringOrderModalComponent_div_0_ng_container_1_Template, 3, 1, "ng-container", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"]();
    const order_details_r6 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵreference"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngIf", !ctx_r2.show_order_details)("ngIfElse", order_details_r6);
  }
}
function CateringOrderModalComponent_footer_1_ng_container_1_Template(rf, ctx) {
  if (rf & 1) {
    const _r7 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](1, "button", 26);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](2, " Cancel ");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](3, "button", 27);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵlistener"]("click", function CateringOrderModalComponent_footer_1_ng_container_1_Template_button_click_3_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵrestoreView"](_r7);
      const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"](2);
      return _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵresetView"](ctx_r2.show_order_details = true);
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](4, " Confirm ");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementContainerEnd"]();
  }
  if (rf & 2) {
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("disabled", !ctx_r2.order.item_count)("matBadge", ctx_r2.order.item_count)("matBadgeHidden", !ctx_r2.order.item_count);
  }
}
function CateringOrderModalComponent_footer_1_ng_template_2_Template(rf, ctx) {
  if (rf & 1) {
    const _r8 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](0, "button", 28);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵlistener"]("click", function CateringOrderModalComponent_footer_1_ng_template_2_Template_button_click_0_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵrestoreView"](_r8);
      const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"](2);
      return _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵresetView"](ctx_r2.show_order_details = false);
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](1, " Back ");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](2, "button", 29);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵlistener"]("click", function CateringOrderModalComponent_footer_1_ng_template_2_Template_button_click_2_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵrestoreView"](_r8);
      const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"](2);
      return _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵresetView"](ctx_r2.saveOrder());
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](3, " Save Order ");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
  }
}
function CateringOrderModalComponent_footer_1_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](0, "footer", 25);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtemplate"](1, CateringOrderModalComponent_footer_1_ng_container_1_Template, 5, 3, "ng-container", 6)(2, CateringOrderModalComponent_footer_1_ng_template_2_Template, 4, 0, "ng-template", null, 2, _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtemplateRefExtractor"]);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const order_actions_r9 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵreference"](3);
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngIf", !ctx_r2.show_order_details)("ngIfElse", order_actions_r9);
  }
}
function CateringOrderModalComponent_ng_template_2_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](0, "div", 30);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelement"](1, "mat-spinner", 31);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](2, "p");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtextInterpolate"](ctx_r2.loading);
  }
}
function CateringOrderModalComponent_ng_template_4_div_4_div_4_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](0, "div", 35);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const item_r11 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"]().$implicit;
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("matTooltip", ctx_r2.optionsFor(item_r11));
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtextInterpolate2"](" ", item_r11.options.length, " option", item_r11.options.length === 1 ? "" : "s", " selected ");
  }
}
function CateringOrderModalComponent_ng_template_4_div_4_Template(rf, ctx) {
  if (rf & 1) {
    const _r10 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](0, "div", 12)(1, "div", 13)(2, "div", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtemplate"](4, CateringOrderModalComponent_ng_template_4_div_4_div_4_Template, 2, 3, "div", 33);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](5, "div", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](6);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipe"](7, "currency");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](8, "a-counter", 34);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵlistener"]("ngModelChange", function CateringOrderModalComponent_ng_template_4_div_4_Template_a_counter_ngModelChange_8_listener($event) {
      const item_r11 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵrestoreView"](_r10).$implicit;
      const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"](2);
      return _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵresetView"](ctx_r2.updateItemQuantity(item_r11, $event));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const item_r11 = ctx.$implicit;
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtextInterpolate"](item_r11.name);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngIf", item_r11.options.length);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵpipeBind2"](7, 4, item_r11.total_cost / 100, ctx_r2.code), " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngModel", item_r11.quantity);
  }
}
function CateringOrderModalComponent_ng_template_4_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](0, "header", 32)(1, "h3");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](2, "Confirm Order");
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](3, "div", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtemplate"](4, CateringOrderModalComponent_ng_template_4_div_4_Template, 9, 7, "div", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngForOf", ctx_r2.order.items);
  }
}
// TODO: Split template into 2 children components. Order menu and Order Confirm;
class CateringOrderModalComponent extends _placeos_common__WEBPACK_IMPORTED_MODULE_1__.AsyncHandler {
  get code() {
    return this._org.currency_code;
  }
  constructor(_org, _data) {
    super();
    this._org = _org;
    this._data = _data;
    /** Emitter for events on the modal */
    this.event = new _angular_core__WEBPACK_IMPORTED_MODULE_8__.EventEmitter();
    /** Whether changes are being saved */
    this.loading = '';
    /** List of menu items to show */
    this.menu_items = {};
    /** List of categories for the active menu */
    this.categories = [];
    this.loading = 'Loading menu...';
  }
  ngOnInit() {
    var _this = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      _this.loading = 'Loading menu...';
      _this.order = new _catering_order_class__WEBPACK_IMPORTED_MODULE_3__.CateringOrder(_this._data.order);
      _this.rules = yield _this._data.getCateringConfig(_this.order.event?.space?.level?.parent_id);
      _this._data.menu.subscribe(list => {
        _this.loading = 'Loading menu...';
        const categories = (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.unique)(list.map(item => item.category));
        const map = {};
        for (const cat of categories) {
          map[cat] = list.filter(item => {
            return item.category === cat && (0,_utilities__WEBPACK_IMPORTED_MODULE_5__.cateringItemAvailable)(item, _this.rules, _this.order.event);
          });
        }
        _this.categories = categories;
        _this.menu_items = map;
        _this.updateMenuQuantities();
        _this.timeout('clear_loading', () => _this.loading = '', 1000);
      });
    })();
  }
  addItem(item, choose_options = true) {
    const old_item = this.order.items.find(itm => itm.id === item.id && itm.options.length === itm.options.reduce((c, o) => c + (item.options.find(opt => o.id === opt.id) ? 1 : 0), 0));
    if (choose_options && item.options?.length) {
      this._data.selectOptions(item.options).then(options => {
        const new_item = new _catering_item_class__WEBPACK_IMPORTED_MODULE_2__.CateringItem({
          ...item,
          options
        });
        this.addItem(new_item, false);
      });
    } else if (old_item) {
      this.order = new _catering_order_class__WEBPACK_IMPORTED_MODULE_3__.CateringOrder({
        ...this.order,
        items: this.order.items.filter(i => !(i.id === item.id && i.options_string === item.options_string)).concat([new _catering_item_class__WEBPACK_IMPORTED_MODULE_2__.CateringItem({
          ...item,
          quantity: old_item.quantity + 1
        })])
      });
    } else {
      this.order = new _catering_order_class__WEBPACK_IMPORTED_MODULE_3__.CateringOrder({
        ...this.order,
        items: this.order.items.concat([new _catering_item_class__WEBPACK_IMPORTED_MODULE_2__.CateringItem({
          ...item,
          quantity: 1
        })])
      });
    }
    this.updateMenuQuantities();
  }
  removeItem(item) {
    this.order = new _catering_order_class__WEBPACK_IMPORTED_MODULE_3__.CateringOrder({
      ...this.order,
      items: this.order.items.filter(_ => _.id !== item.id && _.options_string === item.options_string)
    });
    this.updateMenuQuantities();
  }
  updateItemQuantity(item, amount) {
    const old_item = this.order.items.find(itm => itm.id === item.id && itm.options_string === item.options_string);
    let items = [...this.order.items];
    if (old_item) {
      items = this.order.items.filter(i => !(i.id === item.id && i.options_string === item.options_string)).concat([new _catering_item_class__WEBPACK_IMPORTED_MODULE_2__.CateringItem({
        ...item,
        quantity: amount
      })]);
    } else {
      items = this.order.items.concat([new _catering_item_class__WEBPACK_IMPORTED_MODULE_2__.CateringItem({
        ...item,
        quantity: amount
      })]);
    }
    items.sort((a, b) => a.name.localeCompare(b.name));
    this.order = new _catering_order_class__WEBPACK_IMPORTED_MODULE_3__.CateringOrder({
      ...this.order,
      items
    });
    this.updateMenuQuantities();
  }
  updateMenuQuantities() {
    for (const cat in this.menu_items) {
      for (const item of this.menu_items[cat]) {
        item.quantity = this.order.items.reduce((c, i) => i.id === item.id ? c + i.quantity : c, 0);
      }
    }
  }
  optionsFor(item) {
    return item.options.map(i => i.name).join('\n');
  }
  saveOrder() {
    this.event.emit({
      reason: 'done',
      metadata: {
        order: this.order
      }
    });
  }
  confirmOrder() {
    this.show_order_details = true;
  }
  static #_ = this.ɵfac = function CateringOrderModalComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || CateringOrderModalComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵdirectiveInject"](_placeos_organisation__WEBPACK_IMPORTED_MODULE_4__.OrganisationService), _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵdirectiveInject"](_angular_material_dialog__WEBPACK_IMPORTED_MODULE_9__.MAT_DIALOG_DATA));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵdefineComponent"]({
    type: CateringOrderModalComponent,
    selectors: [["app-catering-order-modal"]],
    outputs: {
      event: "event"
    },
    features: [_angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵInheritDefinitionFeature"]],
    decls: 6,
    vars: 3,
    consts: [["load_state", ""], ["order_details", ""], ["order_actions", ""], ["class", "main min-w-[20rem]", 4, "ngIf", "ngIfElse"], ["class", "flex items-center justify-center space-x-2 p-2 border-t border-base-200", 4, "ngIf"], [1, "main", "min-w-[20rem]"], [4, "ngIf", "ngIfElse"], [4, "ngFor", "ngForOf"], [3, "label", 4, "ngIf"], [3, "label"], [1, "list"], ["item", "", "class", "flex items-center p-2 border-b border-base-200", 4, "ngFor", "ngForOf"], ["item", "", 1, "flex", "items-center", "p-2", "border-b", "border-base-200"], [1, "flex-1", "w-1/2"], ["class", "text-xs no-underline", 4, "ngIf"], [1, "bg-primary", "text-xs", "rounded", "px-4", "py-2", "mx-2", "text-white", "font-medium"], ["ngDefaultControl", "", 3, "ngModel", "ngModelChange", 4, "ngIf"], ["class", "flex items-center", 4, "ngIf"], [1, "text-xs", "no-underline"], ["ngDefaultControl", "", 3, "ngModelChange", "ngModel"], [1, "flex", "items-center"], [3, "matTooltip"], ["icon", "", "matRipple", "", 3, "disabled"], [1, "count", "h-12", "w-12", "flex", "items-center", "justify-center"], ["icon", "", "matRipple", "", 3, "click"], [1, "flex", "items-center", "justify-center", "space-x-2", "p-2", "border-t", "border-base-200"], ["btn", "", "matRipple", "", "mat-dialog-close", "", 1, "inverse"], ["confirm", "", "btn", "", "matRipple", "", "matBadgeColor", "warn", 3, "click", "disabled", "matBadge", "matBadgeHidden"], ["matRipple", "", 1, "inverse", 3, "click"], ["save", "", "btn", "", "matRipple", "", 3, "click"], [1, "flex", "flex-col", "w-64", "p-8", "items-center", "space-y-2"], ["diameter", "32"], [1, "h-[3.25rem]"], ["class", "text-xs underline", 3, "matTooltip", 4, "ngIf"], [3, "ngModelChange", "ngModel"], [1, "text-xs", "underline", 3, "matTooltip"]],
    template: function CateringOrderModalComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtemplate"](0, CateringOrderModalComponent_div_0_Template, 2, 2, "div", 3)(1, CateringOrderModalComponent_footer_1_Template, 4, 2, "footer", 4)(2, CateringOrderModalComponent_ng_template_2_Template, 4, 1, "ng-template", null, 0, _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtemplateRefExtractor"])(4, CateringOrderModalComponent_ng_template_4_Template, 5, 1, "ng-template", null, 1, _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtemplateRefExtractor"]);
      }
      if (rf & 2) {
        const load_state_r12 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵreference"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngIf", !ctx.loading)("ngIfElse", load_state_r12);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngIf", !ctx.loading);
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_10__.NgForOf, _angular_common__WEBPACK_IMPORTED_MODULE_10__.NgIf, _angular_material_tabs__WEBPACK_IMPORTED_MODULE_11__.MatTab, _angular_material_tabs__WEBPACK_IMPORTED_MODULE_11__.MatTabGroup, _angular_material_dialog__WEBPACK_IMPORTED_MODULE_9__.MatDialogClose, _angular_material_tooltip__WEBPACK_IMPORTED_MODULE_12__.MatTooltip, _angular_forms__WEBPACK_IMPORTED_MODULE_13__.DefaultValueAccessor, _angular_forms__WEBPACK_IMPORTED_MODULE_13__.NgControlStatus, _angular_forms__WEBPACK_IMPORTED_MODULE_13__.NgModel, _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_6__.IconComponent, _angular_material_core__WEBPACK_IMPORTED_MODULE_14__.MatRipple, _angular_material_progress_spinner__WEBPACK_IMPORTED_MODULE_15__.MatProgressSpinner, _form_fields_src_lib_counter_component__WEBPACK_IMPORTED_MODULE_7__.CounterComponent, _angular_common__WEBPACK_IMPORTED_MODULE_10__.CurrencyPipe],
    styles: [".list[_ngcontent-%COMP%] {\n                height: 24em;\n                min-width: 32em;\n                max-width: calc(100vw - 1em);\n            }\n\n            footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\n                min-width: 12em;\n            }\n\n            input[_ngcontent-%COMP%] {\n                position: relative;\n                width: 100%;\n                padding: 1em;\n                border: none;\n                border-radius: 0 !important;\n                border-top: 1px solid #ccc;\n                border-bottom: 1px solid #ccc;\n                outline: none;\n                font-size: 1em;\n            }\n\n            input[_ngcontent-%COMP%]:focus {\n                border: none;\n                border-top: 2px solid var(--s);\n                border-bottom: 2px solid var(--s);\n                box-shadow: none;\n            }\n\n            input.error[_ngcontent-%COMP%]::placeholder {\n                color: rgba(var(--error), 0.45);\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNhdGVyaW5nLW9yZGVyLW1vZGFsLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1lBQ1k7Z0JBQ0ksWUFBWTtnQkFDWixlQUFlO2dCQUNmLDRCQUE0QjtZQUNoQzs7WUFFQTtnQkFDSSxlQUFlO1lBQ25COztZQUVBO2dCQUNJLGtCQUFrQjtnQkFDbEIsV0FBVztnQkFDWCxZQUFZO2dCQUNaLFlBQVk7Z0JBQ1osMkJBQTJCO2dCQUMzQiwwQkFBMEI7Z0JBQzFCLDZCQUE2QjtnQkFDN0IsYUFBYTtnQkFDYixjQUFjO1lBQ2xCOztZQUVBO2dCQUNJLFlBQVk7Z0JBQ1osOEJBQThCO2dCQUM5QixpQ0FBaUM7Z0JBQ2pDLGdCQUFnQjtZQUNwQjs7WUFFQTtnQkFDSSwrQkFBK0I7WUFDbkMiLCJmaWxlIjoiY2F0ZXJpbmctb3JkZXItbW9kYWwuY29tcG9uZW50LnRzIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICAubGlzdCB7XG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAyNGVtO1xuICAgICAgICAgICAgICAgIG1pbi13aWR0aDogMzJlbTtcbiAgICAgICAgICAgICAgICBtYXgtd2lkdGg6IGNhbGMoMTAwdncgLSAxZW0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmb290ZXIgYnV0dG9uIHtcbiAgICAgICAgICAgICAgICBtaW4td2lkdGg6IDEyZW07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlucHV0IHtcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICAgICAgcGFkZGluZzogMWVtO1xuICAgICAgICAgICAgICAgIGJvcmRlcjogbm9uZTtcbiAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiAwICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgICAgYm9yZGVyLXRvcDogMXB4IHNvbGlkICNjY2M7XG4gICAgICAgICAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNjY2M7XG4gICAgICAgICAgICAgICAgb3V0bGluZTogbm9uZTtcbiAgICAgICAgICAgICAgICBmb250LXNpemU6IDFlbTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaW5wdXQ6Zm9jdXMge1xuICAgICAgICAgICAgICAgIGJvcmRlcjogbm9uZTtcbiAgICAgICAgICAgICAgICBib3JkZXItdG9wOiAycHggc29saWQgdmFyKC0tcyk7XG4gICAgICAgICAgICAgICAgYm9yZGVyLWJvdHRvbTogMnB4IHNvbGlkIHZhcigtLXMpO1xuICAgICAgICAgICAgICAgIGJveC1zaGFkb3c6IG5vbmU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlucHV0LmVycm9yOjpwbGFjZWhvbGRlciB7XG4gICAgICAgICAgICAgICAgY29sb3I6IHJnYmEodmFyKC0tZXJyb3IpLCAwLjQ1KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl19 */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvY2F0ZXJpbmcvc3JjL2xpYi9jYXRlcmluZy1vcmRlci1tb2RhbC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLFlBQVk7Z0JBQ1osZUFBZTtnQkFDZiw0QkFBNEI7WUFDaEM7O1lBRUE7Z0JBQ0ksZUFBZTtZQUNuQjs7WUFFQTtnQkFDSSxrQkFBa0I7Z0JBQ2xCLFdBQVc7Z0JBQ1gsWUFBWTtnQkFDWixZQUFZO2dCQUNaLDJCQUEyQjtnQkFDM0IsMEJBQTBCO2dCQUMxQiw2QkFBNkI7Z0JBQzdCLGFBQWE7Z0JBQ2IsY0FBYztZQUNsQjs7WUFFQTtnQkFDSSxZQUFZO2dCQUNaLDhCQUE4QjtnQkFDOUIsaUNBQWlDO2dCQUNqQyxnQkFBZ0I7WUFDcEI7O1lBRUE7Z0JBQ0ksK0JBQStCO1lBQ25DOztBQUVaLHcwREFBdzBEIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICAubGlzdCB7XG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAyNGVtO1xuICAgICAgICAgICAgICAgIG1pbi13aWR0aDogMzJlbTtcbiAgICAgICAgICAgICAgICBtYXgtd2lkdGg6IGNhbGMoMTAwdncgLSAxZW0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmb290ZXIgYnV0dG9uIHtcbiAgICAgICAgICAgICAgICBtaW4td2lkdGg6IDEyZW07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlucHV0IHtcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICAgICAgcGFkZGluZzogMWVtO1xuICAgICAgICAgICAgICAgIGJvcmRlcjogbm9uZTtcbiAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiAwICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgICAgYm9yZGVyLXRvcDogMXB4IHNvbGlkICNjY2M7XG4gICAgICAgICAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNjY2M7XG4gICAgICAgICAgICAgICAgb3V0bGluZTogbm9uZTtcbiAgICAgICAgICAgICAgICBmb250LXNpemU6IDFlbTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaW5wdXQ6Zm9jdXMge1xuICAgICAgICAgICAgICAgIGJvcmRlcjogbm9uZTtcbiAgICAgICAgICAgICAgICBib3JkZXItdG9wOiAycHggc29saWQgdmFyKC0tcyk7XG4gICAgICAgICAgICAgICAgYm9yZGVyLWJvdHRvbTogMnB4IHNvbGlkIHZhcigtLXMpO1xuICAgICAgICAgICAgICAgIGJveC1zaGFkb3c6IG5vbmU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlucHV0LmVycm9yOjpwbGFjZWhvbGRlciB7XG4gICAgICAgICAgICAgICAgY29sb3I6IHJnYmEodmFyKC0tZXJyb3IpLCAwLjQ1KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl0sInNvdXJjZVJvb3QiOiIifQ== */"]
  });
}

/***/ }),

/***/ 90699:
/*!***************************************************************************************!*\
  !*** ./libs/catering/src/lib/catering-order-modal/catering-item-details.component.ts ***!
  \***************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CateringItemDetailsComponent: () => (/* binding */ CateringItemDetailsComponent)
/* harmony export */ });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var _catering_item_class__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../catering-item.class */ 25892);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _angular_material_checkbox__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @angular/material/checkbox */ 97024);
/* harmony import */ var _angular_material_radio__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @angular/material/radio */ 53804);
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @angular/forms */ 34456);
/* harmony import */ var _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../components/src/lib/icon.component */ 69434);
/* harmony import */ var _components_src_lib_image_carousel_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../components/src/lib/image-carousel.component */ 65277);
/* harmony import */ var _angular_material_core__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @angular/material/core */ 74646);
/* harmony import */ var _form_fields_src_lib_counter_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../form-fields/src/lib/counter.component */ 55507);












function CateringItemDetailsComponent_ng_container_0_p_14_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "p");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipe"](2, "currency");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipeBind2"](2, 1, ctx_r1.item.unit_price / 100, ctx_r1.code), " ");
  }
}
function CateringItemDetailsComponent_ng_container_0_div_17_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "div", 23);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const tag_r3 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtextInterpolate1"](" ", tag_r3, " ");
  }
}
function CateringItemDetailsComponent_ng_container_0_div_21_ng_container_4_mat_radio_button_5_div_4_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "div", 35);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipe"](2, "currency");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const opt_r6 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"]().$implicit;
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtextInterpolate1"](" +", _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipeBind2"](2, 1, opt_r6.unit_price / 100, ctx_r1.code), " ");
  }
}
function CateringItemDetailsComponent_ng_container_0_div_21_ng_container_4_mat_radio_button_5_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "mat-radio-button", 31)(1, "div", 32)(2, "div", 33);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](4, CateringItemDetailsComponent_ng_container_0_div_21_ng_container_4_mat_radio_button_5_div_4_Template, 3, 4, "div", 34);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const opt_r6 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("value", opt_r6.id);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtextInterpolate1"](" ", opt_r6.name, " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngIf", opt_r6.unit_price);
  }
}
function CateringItemDetailsComponent_ng_container_0_div_21_ng_container_4_Template(rf, ctx) {
  if (rf & 1) {
    const _r4 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](1, "mat-radio-group", 27);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtwoWayListener"]("ngModelChange", function CateringItemDetailsComponent_ng_container_0_div_21_ng_container_4_Template_mat_radio_group_ngModelChange_1_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵrestoreView"](_r4);
      const group_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"]().$implicit;
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"](2);
      _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtwoWayBindingSet"](ctx_r1.group_state[group_r5.name], $event) || (ctx_r1.group_state[group_r5.name] = $event);
      return _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵresetView"]($event);
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("ngModelChange", function CateringItemDetailsComponent_ng_container_0_div_21_ng_container_4_Template_mat_radio_group_ngModelChange_1_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵrestoreView"](_r4);
      const group_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"]().$implicit;
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"](2);
      return _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵresetView"](ctx_r1.updateGroupOption(group_r5, $event));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](2, "mat-radio-button", 28)(3, "span", 29);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵi18n"](4, 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](5, CateringItemDetailsComponent_ng_container_0_div_21_ng_container_4_mat_radio_button_5_Template, 5, 3, "mat-radio-button", 30);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementContainerEnd"]();
  }
  if (rf & 2) {
    const group_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"]().$implicit;
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtwoWayProperty"]("ngModel", ctx_r1.group_state[group_r5.name]);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("disabled", ctx_r1.item == null ? null : ctx_r1.item.in_order);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngForOf", group_r5 == null ? null : group_r5.options);
  }
}
function CateringItemDetailsComponent_ng_container_0_div_21_ng_template_5_mat_checkbox_0_div_4_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "div", 35);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipe"](2, "currency");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const opt_r8 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"]().$implicit;
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtextInterpolate1"](" +", _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipeBind2"](2, 1, opt_r8.unit_price / 100, ctx_r1.code), " ");
  }
}
function CateringItemDetailsComponent_ng_container_0_div_21_ng_template_5_mat_checkbox_0_Template(rf, ctx) {
  if (rf & 1) {
    const _r7 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "mat-checkbox", 37);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtwoWayListener"]("ngModelChange", function CateringItemDetailsComponent_ng_container_0_div_21_ng_template_5_mat_checkbox_0_Template_mat_checkbox_ngModelChange_0_listener($event) {
      const opt_r8 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵrestoreView"](_r7).$implicit;
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"](4);
      _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtwoWayBindingSet"](ctx_r1.option_state[opt_r8.id], $event) || (ctx_r1.option_state[opt_r8.id] = $event);
      return _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵresetView"]($event);
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("ngModelChange", function CateringItemDetailsComponent_ng_container_0_div_21_ng_template_5_mat_checkbox_0_Template_mat_checkbox_ngModelChange_0_listener($event) {
      const opt_r8 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵrestoreView"](_r7).$implicit;
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"](4);
      return _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵresetView"](ctx_r1.updateCheckedState(opt_r8.id, $event));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](1, "div", 21)(2, "div", 38);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](4, CateringItemDetailsComponent_ng_container_0_div_21_ng_template_5_mat_checkbox_0_div_4_Template, 3, 4, "div", 34);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const opt_r8 = ctx.$implicit;
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtwoWayProperty"]("ngModel", ctx_r1.option_state[opt_r8.id]);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("disabled", ctx_r1.item == null ? null : ctx_r1.item.in_order);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtextInterpolate1"](" ", opt_r8.name, " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngIf", opt_r8.unit_price);
  }
}
function CateringItemDetailsComponent_ng_container_0_div_21_ng_template_5_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](0, CateringItemDetailsComponent_ng_container_0_div_21_ng_template_5_mat_checkbox_0_Template, 5, 4, "mat-checkbox", 36);
  }
  if (rf & 2) {
    const group_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"]().$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngForOf", group_r5 == null ? null : group_r5.options);
  }
}
function CateringItemDetailsComponent_ng_container_0_div_21_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "div", 24)(1, "div", 25);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](3, "div", 26);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](4, CateringItemDetailsComponent_ng_container_0_div_21_ng_container_4_Template, 6, 3, "ng-container", 4)(5, CateringItemDetailsComponent_ng_container_0_div_21_ng_template_5_Template, 1, 1, "ng-template", null, 1, _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplateRefExtractor"]);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const group_r5 = ctx.$implicit;
    const multi_options_r9 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵreference"](6);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵattribute"]("group", group_r5.name);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtextInterpolate1"](" ", group_r5.name, " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngIf", !group_r5.multiple)("ngIfElse", multi_options_r9);
  }
}
function CateringItemDetailsComponent_ng_container_0_Template(rf, ctx) {
  if (rf & 1) {
    const _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](1, "section", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelement"](2, "image-carousel", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](3, "button", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("click", function CateringItemDetailsComponent_ng_container_0_Template_button_click_3_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵrestoreView"](_r1);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵresetView"](ctx_r1.close.emit());
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](4, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](5, "arrow_back");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](6, "button", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("click", function CateringItemDetailsComponent_ng_container_0_Template_button_click_6_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵrestoreView"](_r1);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵresetView"](ctx_r1.toggleFav.emit());
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](7, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](8);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]()()();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](9, "div", 9)(10, "section", 10)(11, "div")(12, "h2", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](13);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](14, CateringItemDetailsComponent_ng_container_0_p_14_Template, 3, 4, "p", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](15, "a-counter", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtwoWayListener"]("ngModelChange", function CateringItemDetailsComponent_ng_container_0_Template_a_counter_ngModelChange_15_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵrestoreView"](_r1);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"]();
      _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtwoWayBindingSet"](ctx_r1.item.quantity, $event) || (ctx_r1.item.quantity = $event);
      return _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵresetView"]($event);
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("ngModelChange", function CateringItemDetailsComponent_ng_container_0_Template_a_counter_ngModelChange_15_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵrestoreView"](_r1);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵresetView"](ctx_r1.active ? ctx_r1.activeChange.emit(ctx_r1.active) : "");
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](16, "section", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](17, CateringItemDetailsComponent_ng_container_0_div_17_Template, 2, 1, "div", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelement"](18, "hr");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](19, "section", 16)(20, "div", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](21, CateringItemDetailsComponent_ng_container_0_div_21_Template, 7, 4, "div", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]()()();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](22, "div", 19)(23, "button", 20);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("click", function CateringItemDetailsComponent_ng_container_0_Template_button_click_23_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵrestoreView"](_r1);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"]();
      ctx_r1.active = !ctx_r1.active;
      return _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵresetView"](ctx_r1.activeChange.emit(ctx_r1.active));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](24, "div", 21)(25, "app-icon", 22);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](26);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](27, "p");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](28);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]()()()();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementContainerEnd"]();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("images", ctx_r1.item.images);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵclassProp"]("text-white", !ctx_r1.fav)("text-blue-400", ctx_r1.fav);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtextInterpolate"](ctx_r1.fav ? "favorite" : "favorite_border");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtextInterpolate1"](" ", ctx_r1.item.name, " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngIf", ctx_r1.item.unit_price);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtwoWayProperty"]("ngModel", ctx_r1.item.quantity);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("min", 1)("max", ctx_r1.item.count || 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngForOf", ctx_r1.item.tags);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngForOf", ctx_r1.groups);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵclassProp"]("inverse", ctx_r1.active);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtextInterpolate"](ctx_r1.active ? "remove" : "add");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtextInterpolate1"](" ", ctx_r1.active ? "Remove this item" : "Add this item", " ");
  }
}
function CateringItemDetailsComponent_ng_template_1_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "div", 39)(1, "p", 40);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵi18n"](2, 3);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]()();
  }
}
class CateringItemDetailsComponent {
  constructor() {
    this.active = false;
    this.fav = false;
    this.code = 'USD';
    this.toggleFav = new _angular_core__WEBPACK_IMPORTED_MODULE_5__.EventEmitter();
    this.activeChange = new _angular_core__WEBPACK_IMPORTED_MODULE_5__.EventEmitter();
    this.close = new _angular_core__WEBPACK_IMPORTED_MODULE_5__.EventEmitter();
    this.option_state = {};
    this.group_state = {};
  }
  ngOnChanges(changes) {
    if (changes.item && this.item) {
      this._update();
    }
  }
  updateGroupOption(group, id) {
    if (!group) return;
    this.group_state[group.name] = id;
    for (const option of group.options) {
      option.active = option.id === id;
    }
  }
  updateCheckedState(id, state) {
    const option = this.item?.options.find(_ => _.id === id);
    if (option) option.active = state;
  }
  _update() {
    if (!this.item) return;
    if (!this.item.quantity) {
      this.item.quantity = 1;
    }
    this.option_state = {};
    this.group_state = {};
    const groups = (0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.unique)(this.item.options.map(i => i.group || 'Other'));
    const group_list = [];
    for (const group of groups) {
      const options = this.item.options.filter(i => i.group === group);
      group_list.push({
        name: group,
        multiple: !!options.find(i => i.multiple),
        options
      });
    }
    this.groups = group_list;
    if (this.item.option_list) {
      for (const opt of this.item.option_list) {
        const option = this.item.options.find(_ => _.id === opt.id);
        if (option) {
          option.active = true;
          this.option_state[opt.id] = true;
          this.updateGroupOption(this.groups.find(g => g.name === option.group), option.id);
        }
      }
    }
  }
  static #_ = this.ɵfac = function CateringItemDetailsComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || CateringItemDetailsComponent)();
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵdefineComponent"]({
    type: CateringItemDetailsComponent,
    selectors: [["catering-item-details"]],
    inputs: {
      item: "item",
      active: "active",
      fav: "fav",
      code: "code"
    },
    outputs: {
      toggleFav: "toggleFav",
      activeChange: "activeChange",
      close: "close"
    },
    features: [_angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵNgOnChangesFeature"]],
    decls: 3,
    vars: 2,
    consts: () => {
      let i18n_0;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_6252070156626006029$$LIBS_CATERING_SRC_LIB_CATERING_ORDER_MODAL_CATERING_ITEM_DETAILS_COMPONENT_TS_0 = goog.getMsg("None");
        i18n_0 = MSG_EXTERNAL_6252070156626006029$$LIBS_CATERING_SRC_LIB_CATERING_ORDER_MODAL_CATERING_ITEM_DETAILS_COMPONENT_TS_0;
      } else {
        i18n_0 = $localize`:␟a2f14a73f7a6e94479f67423cc51102da8d6f524␟6252070156626006029:None`;
      }
      let i18n_1;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_2528715266490787662$$LIBS_CATERING_SRC_LIB_CATERING_ORDER_MODAL_CATERING_ITEM_DETAILS_COMPONENT_TS_1 = goog.getMsg(" Select an item to view it's details ");
        i18n_1 = MSG_EXTERNAL_2528715266490787662$$LIBS_CATERING_SRC_LIB_CATERING_ORDER_MODAL_CATERING_ITEM_DETAILS_COMPONENT_TS_1;
      } else {
        i18n_1 = $localize`:␟0fab86098296160aef9d98a89e252bee5cf35141␟2528715266490787662: Select an item to view it's details `;
      }
      return [["empty_state", ""], ["multi_options", ""], i18n_0, i18n_1, [4, "ngIf", "ngIfElse"], ["image", "", 1, "relative", "w-full", "h-64", "sm:h-40", "bg-neutral"], [1, "absolute", "inset-0", 3, "images"], ["icon", "", "matRipple", "", "name", "close-catering-item-details", 1, "absolute", "top-2", "left-2", "bg-neutral", "sm:hidden", "text-white", 3, "click"], ["icon", "", "matRipple", "", "name", "toggle-catering-item-favourite-details", 1, "absolute", "top-2", "right-2", "bg-neutral", 3, "click"], [1, "p-2", "space-y-2", "flex-1", "h-1/2", "overflow-auto"], ["actions", "", 1, "z-0", "flex", "items-center", "justify-between"], [1, "text-xl", "font-medium", "mb-2", "mt-4"], [4, "ngIf"], [3, "ngModelChange", "ngModel", "min", "max"], [1, "flex", "items-center", "flex-wrap"], ["class", "px-2 py-1 rounded-2xl bg-base-200 text-sm capitalize m-1", 4, "ngFor", "ngForOf"], ["details", "", 1, "space-y-2"], [1, "flex", "flex-col", "flex-wrap"], ["class", "min-w-1/2 flex-1", 4, "ngFor", "ngForOf"], [1, "px-2", "pt-2", "pb-[5.5rem]", "border-t", "border-base-200", "shadow", "sm:hidden"], ["btn", "", "matRipple", "", "name", "select-catering-item-details", 1, "w-full", 3, "click"], [1, "flex", "items-center", "justify-center"], [1, "text-2xl"], [1, "px-2", "py-1", "rounded-2xl", "bg-base-200", "text-sm", "capitalize", "m-1"], [1, "min-w-1/2", "flex-1"], [1, "font-medium", "p-2", "capitalize"], [1, "flex", "flex-col", "pl-4"], ["aria-label", "Select an option", 1, "flex", "flex-col", 3, "ngModelChange", "ngModel", "disabled"], ["value", "", 1, "m-0"], [1, "font-medium", "p-2"], ["class", "m-0", 3, "value", 4, "ngFor", "ngForOf"], [1, "m-0", 3, "value"], [1, "flex", "items-center", "justify-center", "max-w-[calc(100vw-4rem)]", "sm:max-w-[15rem]"], [1, "font-medium", "p-2", "flex-1", "w-1/2", "whitespace-normal"], ["class", "opacity-60 text-xs", 4, "ngIf"], [1, "opacity-60", "text-xs"], [3, "ngModel", "disabled", "ngModelChange", 4, "ngFor", "ngForOf"], [3, "ngModelChange", "ngModel", "disabled"], [1, "font-medium", "p-2", "flex-1", "w-1/2"], ["empty", "", 1, "p-16", "flex", "flex-col", "items-center", "justify-center", "space-y-2"], [1, "opacity-30", "text-center"]];
    },
    template: function CateringItemDetailsComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](0, CateringItemDetailsComponent_ng_container_0_Template, 29, 17, "ng-container", 4)(1, CateringItemDetailsComponent_ng_template_1_Template, 3, 0, "ng-template", null, 0, _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplateRefExtractor"]);
      }
      if (rf & 2) {
        const empty_state_r10 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵreference"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngIf", ctx.item)("ngIfElse", empty_state_r10);
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_6__.NgForOf, _angular_common__WEBPACK_IMPORTED_MODULE_6__.NgIf, _angular_material_checkbox__WEBPACK_IMPORTED_MODULE_7__.MatCheckbox, _angular_material_radio__WEBPACK_IMPORTED_MODULE_8__.MatRadioGroup, _angular_material_radio__WEBPACK_IMPORTED_MODULE_8__.MatRadioButton, _angular_forms__WEBPACK_IMPORTED_MODULE_9__.NgControlStatus, _angular_forms__WEBPACK_IMPORTED_MODULE_9__.NgModel, _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_2__.IconComponent, _components_src_lib_image_carousel_component__WEBPACK_IMPORTED_MODULE_3__.ImageCarouselComponent, _angular_material_core__WEBPACK_IMPORTED_MODULE_10__.MatRipple, _form_fields_src_lib_counter_component__WEBPACK_IMPORTED_MODULE_4__.CounterComponent, _angular_common__WEBPACK_IMPORTED_MODULE_6__.CurrencyPipe],
    styles: ["[_nghost-%COMP%] {\n                display: flex;\n                flex-direction: column;\n                width: 30%;\n                min-width: 20rem;\n                height: 100%;\n                min-height: 65vh;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNhdGVyaW5nLWl0ZW0tZGV0YWlscy5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLGFBQWE7Z0JBQ2Isc0JBQXNCO2dCQUN0QixVQUFVO2dCQUNWLGdCQUFnQjtnQkFDaEIsWUFBWTtnQkFDWixnQkFBZ0I7WUFDcEIiLCJmaWxlIjoiY2F0ZXJpbmctaXRlbS1kZXRhaWxzLmNvbXBvbmVudC50cyIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgOmhvc3Qge1xuICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgICAgICAgICB3aWR0aDogMzAlO1xuICAgICAgICAgICAgICAgIG1pbi13aWR0aDogMjByZW07XG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgICAgICAgICAgIG1pbi1oZWlnaHQ6IDY1dmg7XG4gICAgICAgICAgICB9XG4gICAgICAgICJdfQ== */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvY2F0ZXJpbmcvc3JjL2xpYi9jYXRlcmluZy1vcmRlci1tb2RhbC9jYXRlcmluZy1pdGVtLWRldGFpbHMuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxhQUFhO2dCQUNiLHNCQUFzQjtnQkFDdEIsVUFBVTtnQkFDVixnQkFBZ0I7Z0JBQ2hCLFlBQVk7Z0JBQ1osZ0JBQWdCO1lBQ3BCOztBQUVaLGdzQkFBZ3NCIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICA6aG9zdCB7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgICAgICAgIHdpZHRoOiAzMCU7XG4gICAgICAgICAgICAgICAgbWluLXdpZHRoOiAyMHJlbTtcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgICAgICAgICAgbWluLWhlaWdodDogNjV2aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl0sInNvdXJjZVJvb3QiOiIifQ== */"]
  });
}

/***/ }),

/***/ 26386:
/*!***************************************************************************************!*\
  !*** ./libs/catering/src/lib/catering-order-modal/catering-item-filters.component.ts ***!
  \***************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CateringItemFiltersComponent: () => (/* binding */ CateringItemFiltersComponent)
/* harmony export */ });
/* harmony import */ var _home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 89204);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! rxjs/operators */ 33602);
/* harmony import */ var _catering_order_state_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./catering-order-state.service */ 20097);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! date-fns */ 33240);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! date-fns */ 28797);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! date-fns */ 56441);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! date-fns */ 49675);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! date-fns */ 1874);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _angular_material_core__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @angular/material/core */ 74646);
/* harmony import */ var _angular_material_checkbox__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @angular/material/checkbox */ 97024);
/* harmony import */ var _angular_material_tooltip__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @angular/material/tooltip */ 80640);
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @angular/forms */ 34456);
/* harmony import */ var _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../components/src/lib/icon.component */ 69434);
/* harmony import */ var _angular_material_form_field__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @angular/material/form-field */ 24950);
/* harmony import */ var _angular_material_select__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @angular/material/select */ 25175);
/* harmony import */ var _angular_material_input__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! @angular/material/input */ 95541);
/* harmony import */ var _form_fields_src_lib_duration_field_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../form-fields/src/lib/duration-field.component */ 83476);



















function CateringItemFiltersComponent_h3_6_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "h3", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵi18n"](1, 0);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
  }
}
function CateringItemFiltersComponent_div_7_ng_container_3_mat_option_5_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "mat-option", 19);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipe"](2, "date");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const day_r4 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("value", day_r4.id);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipeBind2"](2, 2, day_r4.value, "mediumDate"), " ");
  }
}
function CateringItemFiltersComponent_div_7_ng_container_3_Template(rf, ctx) {
  if (rf & 1) {
    const _r3 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](1, "label");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](2, "Deliver Date:");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](3, "mat-form-field", 16)(4, "mat-select", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtwoWayListener"]("ngModelChange", function CateringItemFiltersComponent_div_7_ng_container_3_Template_mat_select_ngModelChange_4_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵrestoreView"](_r3);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"](2);
      _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtwoWayBindingSet"](ctx_r1.offset_day, $event) || (ctx_r1.offset_day = $event);
      return _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵresetView"]($event);
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("ngModelChange", function CateringItemFiltersComponent_div_7_ng_container_3_Template_mat_select_ngModelChange_4_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵrestoreView"](_r3);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"](2);
      return _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵresetView"](ctx_r1.offset_dayChange.next($event));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](5, CateringItemFiltersComponent_div_7_ng_container_3_mat_option_5_Template, 3, 5, "mat-option", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementContainerEnd"]();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtwoWayProperty"]("ngModel", ctx_r1.offset_day);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngForOf", ctx_r1.day_options);
  }
}
function CateringItemFiltersComponent_div_7_Template(rf, ctx) {
  if (rf & 1) {
    const _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "div", 12)(1, "mat-checkbox", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtwoWayListener"]("ngModelChange", function CateringItemFiltersComponent_div_7_Template_mat_checkbox_ngModelChange_1_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵrestoreView"](_r1);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"]();
      _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtwoWayBindingSet"](ctx_r1.at_time, $event) || (ctx_r1.at_time = $event);
      return _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵresetView"]($event);
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("ngModelChange", function CateringItemFiltersComponent_div_7_Template_mat_checkbox_ngModelChange_1_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵrestoreView"](_r1);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵresetView"](ctx_r1.at_timeChange.next($event));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](2, " Exact Time ");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](3, CateringItemFiltersComponent_div_7_ng_container_3_Template, 6, 2, "ng-container", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](4, "label");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](5, "Deliver After:");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](6, "a-duration-field", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipe"](7, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtwoWayListener"]("ngModelChange", function CateringItemFiltersComponent_div_7_Template_a_duration_field_ngModelChange_6_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵrestoreView"](_r1);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"]();
      _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtwoWayBindingSet"](ctx_r1.offset, $event) || (ctx_r1.offset = $event);
      return _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵresetView"]($event);
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("ngModelChange", function CateringItemFiltersComponent_div_7_Template_a_duration_field_ngModelChange_6_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵrestoreView"](_r1);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵresetView"](ctx_r1.offsetChange.next($event));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    let tmp_5_0;
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtwoWayProperty"]("ngModel", ctx_r1.at_time);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("matTooltip", ctx_r1.exact_tooltip);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngIf", ctx_r1.day_options.length > 1);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtwoWayProperty"]("ngModel", ctx_r1.offset);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("time", ctx_r1.offset_day > 0 ? ctx_r1.start_of_date : (tmp_5_0 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipeBind1"](7, 9, ctx_r1.filters)) == null ? null : tmp_5_0.date)("step", ctx_r1.step_interval)("min", ctx_r1.min_offset)("max", ctx_r1.max_offset)("use_24hr", ctx_r1.use_24hr);
  }
}
function CateringItemFiltersComponent_h3_8_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "h3", 20);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵi18n"](1, 1);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
  }
}
function CateringItemFiltersComponent_mat_checkbox_10_Template(rf, ctx) {
  if (rf & 1) {
    const _r5 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "mat-checkbox", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipe"](1, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("ngModelChange", function CateringItemFiltersComponent_mat_checkbox_10_Template_mat_checkbox_ngModelChange_0_listener() {
      const item_r6 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵrestoreView"](_r5).$implicit;
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵresetView"](ctx_r1.toggleCategory(item_r6));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    let tmp_2_0;
    const item_r6 = ctx.$implicit;
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngModel", (tmp_2_0 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipeBind1"](1, 3, ctx_r1.filters)) == null ? null : tmp_2_0.categories == null ? null : tmp_2_0.categories.includes(item_r6));
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵattribute"]("name", item_r6);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtextInterpolate1"](" ", item_r6, " ");
  }
}
const ICONS = {
  coffee: `<svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
    <g clip-path="url(#clip0_605_8664)">
    <path d="M38.388 21.2474C37.8243 20.7996 37.1598 20.4847 36.4474 20.3278C35.735 20.1708 34.9944 20.1762 34.2846 20.3434C34.2476 19.7774 34.2049 19.2037 34.1483 18.6155C34.1243 18.3664 34.0043 18.1349 33.8119 17.9668C33.6195 17.7986 33.3687 17.706 33.1088 17.707H1.26151C1.00166 17.706 0.750839 17.7986 0.558442 17.9668C0.366045 18.1349 0.246035 18.3664 0.222073 18.6155C-0.42931 25.3581 0.106585 30.5307 4.80024 35.4799C8.88062 39.7819 15.7271 39.9998 17.0599 39.9998H17.3047C18.6375 39.9998 25.4863 39.7774 29.5643 35.4799C30.5412 34.4597 31.3937 33.3353 32.1052 32.1286C32.2481 32.1199 32.3875 32.0819 32.514 32.0174C34.0959 31.2139 35.6169 30.3039 37.0656 29.2943C38.3815 28.4227 39.3664 27.1618 39.871 25.7028C40.0702 24.9006 40.0372 24.0612 39.7758 23.2757C39.5144 22.4902 39.0344 21.7887 38.388 21.2474ZM28.0329 34.13C24.4699 37.8905 18.0323 37.9984 17.3093 37.9984H17.0645C16.3426 37.9984 9.90389 37.8872 6.34092 34.13C2.37257 29.9436 1.75351 25.466 2.21549 19.7085H32.1583C32.6214 25.4649 32.0024 29.9425 28.0329 34.13ZM37.8498 25.2091C37.4485 26.2369 36.7212 27.117 35.771 27.7243C35.024 28.2636 34.2434 28.7582 33.4334 29.2053C34.1268 27.0036 34.4428 24.7078 34.3689 22.4082C34.3839 22.4027 34.3989 22.4082 34.4139 22.3982C34.8447 22.2182 35.3192 22.1579 35.7837 22.2242C36.2482 22.2905 36.6841 22.4808 37.0421 22.7733C37.4001 23.0659 37.6658 23.4491 37.8092 23.8796C37.9525 24.3101 37.9678 24.7707 37.8533 25.2091H37.8498Z" fill="currentcolor"/>
    <path d="M9.43243 8.16274C9.85735 8.48322 10.2069 8.88673 10.4582 9.34669C10.7094 9.80666 10.8565 10.3126 10.89 10.8313C10.7939 11.9569 10.2754 13.0103 9.43128 13.7946C9.32937 13.883 9.24664 13.9899 9.18786 14.1092C9.12907 14.2286 9.0954 14.3579 9.08878 14.4898C9.08216 14.6217 9.10275 14.7536 9.14931 14.8778C9.19588 15.002 9.26753 15.1161 9.36012 15.2136C9.45271 15.311 9.56442 15.3898 9.6888 15.4455C9.81319 15.5012 9.9478 15.5326 10.0849 15.538C10.2219 15.5433 10.3587 15.5225 10.4874 15.4767C10.6161 15.4309 10.734 15.3611 10.8345 15.2712C12.1048 14.1093 12.8679 12.5254 12.9688 10.8413C12.9432 10.042 12.7392 9.25727 12.3708 8.5405C12.0023 7.82373 11.478 7.19166 10.8334 6.68722C10.4067 6.38353 10.055 5.99283 9.80341 5.54303C9.55184 5.09323 9.40662 4.59547 9.37815 4.08534C9.51392 3.18283 10.0073 2.36595 10.7548 1.80591C10.9718 1.64618 11.1147 1.41065 11.1528 1.15024C11.1908 0.889843 11.1208 0.625512 10.958 0.414392C10.7951 0.203272 10.5525 0.062327 10.2826 0.0220596C10.0127 -0.0182078 9.73715 0.0454338 9.51559 0.199206C8.90219 0.651996 8.39004 1.21933 8.0098 1.86721C7.62956 2.5151 7.38907 3.2302 7.30273 3.9697C7.30292 4.77855 7.49485 5.5767 7.86392 6.30333C8.23298 7.02996 8.76944 7.66592 9.43243 8.16274Z" fill="currentcolor"/>
    <path d="M23.0984 8.16274C23.5234 8.48322 23.8729 8.88673 24.1242 9.34669C24.3754 9.80666 24.5225 10.3126 24.556 10.8313C24.4599 11.9569 23.9414 13.0103 23.0973 13.7946C22.9954 13.883 22.9126 13.9899 22.8539 14.1092C22.7951 14.2286 22.7614 14.3579 22.7548 14.4898C22.7482 14.6217 22.7687 14.7536 22.8153 14.8778C22.8619 15.002 22.9335 15.1161 23.0261 15.2136C23.1187 15.311 23.2304 15.3898 23.3548 15.4455C23.4792 15.5012 23.6138 15.5326 23.7509 15.538C23.8879 15.5433 24.0247 15.5225 24.1534 15.4767C24.2821 15.4309 24.4 15.3611 24.5005 15.2712C25.7708 14.1093 26.5339 12.5254 26.6348 10.8413C26.6092 10.042 26.4052 9.25727 26.0368 8.5405C25.6683 7.82373 25.144 7.19166 24.4994 6.68722C24.0727 6.38353 23.721 5.99283 23.4694 5.54303C23.2178 5.09323 23.0726 4.59547 23.0442 4.08534C23.1799 3.18283 23.6733 2.36595 24.4208 1.80591C24.6378 1.64618 24.7807 1.41065 24.8188 1.15024C24.8568 0.889843 24.7868 0.625512 24.624 0.414392C24.4611 0.203272 24.2185 0.062327 23.9486 0.0220596C23.6787 -0.0182078 23.4032 0.0454338 23.1816 0.199206C22.5682 0.651996 22.0561 1.21933 21.6758 1.86721C21.2956 2.5151 21.0551 3.2302 20.9688 3.9697C20.9689 4.77855 21.1609 5.5767 21.5299 6.30333C21.899 7.02996 22.4355 7.66592 23.0984 8.16274Z" fill="currentcolor"/>
    <path d="M16.2645 8.16274C16.6894 8.48322 17.039 8.88673 17.2902 9.34669C17.5414 9.80666 17.6886 10.3126 17.722 10.8313C17.626 11.9569 17.1074 13.0103 16.2633 13.7946C16.1614 13.883 16.0787 13.9899 16.0199 14.1092C15.9611 14.2286 15.9274 14.3579 15.9208 14.4898C15.9142 14.6217 15.9348 14.7536 15.9813 14.8778C16.0279 15.002 16.0996 15.1161 16.1922 15.2136C16.2847 15.311 16.3964 15.3898 16.5208 15.4455C16.6452 15.5012 16.7798 15.5326 16.9169 15.538C17.054 15.5433 17.1908 15.5225 17.3194 15.4767C17.4481 15.4309 17.5661 15.3611 17.6666 15.2712C18.9368 14.1093 19.6999 12.5254 19.8009 10.8413C19.7752 10.042 19.5713 9.25727 19.2028 8.5405C18.8343 7.82373 18.31 7.19166 17.6654 6.68722C17.2387 6.38353 16.887 5.99283 16.6354 5.54303C16.3839 5.09323 16.2386 4.59547 16.2102 4.08534C16.346 3.18283 16.8393 2.36595 17.5869 1.80591C17.8038 1.64618 17.9468 1.41065 17.9848 1.15024C18.0228 0.889843 17.9528 0.625512 17.79 0.414392C17.6271 0.203272 17.3845 0.062327 17.1146 0.0220596C16.8447 -0.0182078 16.5692 0.0454338 16.3476 0.199206C15.7342 0.651996 15.2221 1.21933 14.8418 1.86721C14.4616 2.5151 14.2211 3.2302 14.1348 3.9697C14.1349 4.77855 14.3269 5.5767 14.6959 6.30333C15.065 7.02996 15.6015 7.66592 16.2645 8.16274Z" fill="currentcolor"/>
    <path d="M7.16328 29.7138C5.86597 27.7051 5.17938 25.3866 5.18141 23.0212C5.18141 22.7558 5.07191 22.5013 4.87697 22.3136C4.68204 22.1259 4.41765 22.0205 4.14198 22.0205C3.8663 22.0205 3.60191 22.1259 3.40698 22.3136C3.21204 22.5013 3.10254 22.7558 3.10254 23.0212C3.10081 25.7653 3.89738 28.4551 5.40201 30.7857C5.55001 31.0072 5.78275 31.1637 6.04976 31.2211C6.31677 31.2784 6.59652 31.2322 6.82832 31.0923C7.06012 30.9524 7.22529 30.7301 7.288 30.4737C7.35071 30.2174 7.30588 29.9475 7.16328 29.7227V29.7138Z" fill="currentcolor"/>
    <path d="M9.06498 32.7103C8.94112 32.6482 8.84235 32.548 8.78434 32.4257C8.73082 32.3026 8.65227 32.1911 8.55334 32.0977C8.45441 32.0043 8.33708 31.9309 8.20825 31.8818C8.07942 31.8327 7.9417 31.8089 7.80317 31.8118C7.66464 31.8146 7.5281 31.8441 7.40159 31.8986C7.27508 31.953 7.16115 32.0312 7.06649 32.1286C6.97184 32.226 6.89837 32.3407 6.8504 32.4658C6.80244 32.591 6.78094 32.7241 6.78719 32.8574C6.79344 32.9906 6.8273 33.1213 6.88678 33.2418C7.13536 33.7758 7.56332 34.2136 8.10177 34.4849C8.34682 34.6079 8.63256 34.6321 8.89616 34.5523C9.15975 34.4724 9.37959 34.295 9.50732 34.0591C9.63505 33.8232 9.6602 33.5481 9.57725 33.2943C9.49429 33.0405 9.31003 32.8289 9.06498 32.7059V32.7103Z" fill="currentcolor"/>
    </g>
    <defs>
    <clipPath id="clip0_605_8664">
    <rect width="40" height="40" fill="white"/>
    </clipPath>
    </defs>
    </svg>
    `,
  drinks: `<svg width="28" height="39" viewBox="0 0 28 39" fill="none" xmlns="http://www.w3.org/2000/svg">
    <g clip-path="url(#clip0_598_8203)">
    <path d="M0 0L0.662157 8.11078C0.662157 8.12619 0.653028 8.1394 0.653028 8.15481C0.658117 8.18851 0.664982 8.22193 0.673584 8.25496L3.1852 39H25.1048L28.0034 0H0ZM25.7932 1.98093L25.4085 7.16985C25.3982 7.16985 25.3902 7.16985 25.3799 7.16985H2.64519L2.22279 1.98642L25.7932 1.98093ZM23.1948 37.0191H5.08147L2.80846 9.14527H25.2612L23.1948 37.0191Z" fill="currentcolor"/>
    <path d="M6.24983 23.3122C6.28864 23.3122 6.32861 23.3122 6.364 23.3122C6.49825 23.2972 6.6281 23.2567 6.74613 23.1933C6.86415 23.1298 6.96804 23.0445 7.05181 22.9423C7.13559 22.8401 7.19762 22.7229 7.23436 22.5975C7.2711 22.4722 7.28181 22.341 7.26589 22.2117C7.0661 20.5444 6.86517 18.8155 6.66538 17.0855C6.4576 15.2861 6.24869 13.4846 6.03862 11.7502C5.99894 11.4962 5.85848 11.267 5.64686 11.111C5.43525 10.955 5.16904 10.8843 4.90438 10.9138C4.63973 10.9434 4.39731 11.0708 4.22831 11.2694C4.0593 11.4679 3.9769 11.722 3.9985 11.978C4.20628 13.7091 4.41522 15.5084 4.623 17.3056C4.82392 19.0378 5.02485 20.77 5.22578 22.4395C5.25574 22.6807 5.37661 22.9029 5.56542 23.0638C5.75424 23.2247 5.99781 23.3131 6.24983 23.3122Z" fill="currentcolor"/>
    <path d="M6.05485 24.414C5.9204 24.4288 5.79029 24.469 5.67201 24.5323C5.55372 24.5957 5.44958 24.6809 5.36557 24.7832C5.28156 24.8854 5.21933 25.0027 5.18245 25.1282C5.14557 25.2537 5.13477 25.385 5.15067 25.5145L5.31392 26.8857C5.34197 27.1276 5.46141 27.351 5.64945 27.5134C5.83748 27.6758 6.08096 27.7658 6.33341 27.7662C6.37223 27.7662 6.41105 27.7662 6.44759 27.7607C6.5817 27.7462 6.71152 27.7063 6.82966 27.6434C6.9478 27.5806 7.05194 27.4959 7.13612 27.3942C7.22029 27.2925 7.28287 27.1758 7.32027 27.0508C7.35766 26.9258 7.36913 26.7949 7.35404 26.6656L7.1908 25.2889C7.15839 25.0286 7.02114 24.791 6.80864 24.6273C6.59614 24.4636 6.32541 24.387 6.05485 24.414Z" fill="currentcolor"/>
    </g>
    <defs>
    <clipPath id="clip0_598_8203">
    <rect width="28" height="39" fill="white"/>
    </clipPath>
    </defs>
    </svg>
    `,
  snacks: `<svg width="44" height="30" viewBox="0 0 44 30" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M39.9739 12.3839H39.9673C39.8416 11.3068 39.529 10.2613 39.0441 9.29623C38.2937 7.89066 37.2396 6.67826 35.9616 5.75118C34.6837 4.82411 33.2156 4.20677 31.669 3.94605C31.658 3.94605 31.6471 3.94605 31.635 3.94605C29.7116 1.41671 26.4577 0.0219894 22.162 0.00292969C17.7851 0.0287164 14.3819 1.44362 12.4015 3.94605C12.3773 3.94605 12.3553 3.94605 12.3312 3.94605C10.7845 4.20721 9.31631 4.82484 8.03823 5.75207C6.76016 6.6793 5.70574 7.89174 4.95505 9.29734C4.47112 10.2623 4.15888 11.3074 4.03289 12.3839H4.02631C2.34137 14.0479 1.12087 16.1402 0.490328 18.4457C-0.140217 20.7512 -0.15805 23.1866 0.438675 25.5015C1.16762 28.1328 2.30494 29.6228 3.81991 29.9323C4.02143 29.975 4.22667 29.9968 4.43249 29.9973C5.03503 29.925 5.61546 29.722 6.13483 29.4017C6.6542 29.0815 7.1005 28.6516 7.44377 28.1407C8.13563 27.3077 8.96125 26.601 9.88529 26.0508C10.6588 25.658 11.4715 25.3513 12.3092 25.136C12.7407 25.007 13.2105 24.8624 13.7122 24.6875C14.2182 24.7717 14.7299 24.8148 15.2426 24.8164C16.5191 24.8132 17.7827 24.5561 18.963 24.0597C19.2243 24.1678 19.4915 24.2603 19.7633 24.3366C20.4624 24.5255 21.1737 24.6634 21.892 24.7492C21.9649 24.7584 22.0386 24.7584 22.1115 24.7492C22.8298 24.6634 23.5411 24.5255 24.2402 24.3366C24.5121 24.2602 24.7794 24.1674 25.0405 24.0585C26.6985 24.7663 28.5179 24.9843 30.2913 24.6875C30.7941 24.8568 31.2639 25.0014 31.6954 25.136C32.5326 25.3518 33.3449 25.6585 34.1182 26.0508C35.0422 26.6006 35.8675 27.3074 36.5586 28.1407C36.9021 28.6516 37.3486 29.0816 37.8682 29.4018C38.3877 29.722 38.9683 29.925 39.571 29.9973C39.7765 29.9968 39.9813 29.975 40.1825 29.9323C41.6986 29.6228 42.8359 28.1317 43.5648 25.5015C44.1604 23.1863 44.1418 20.7509 43.5107 18.4455C42.8796 16.1401 41.6588 14.0479 39.9739 12.3839ZM8.94886 24.276C7.83296 24.927 6.83512 25.7694 5.99906 26.7661C5.09447 27.7561 4.76074 28.07 4.20854 27.9568C3.49936 27.8111 2.83628 26.7459 2.34227 24.9543C1.92223 23.3112 1.86627 21.5932 2.17848 19.9252C2.4907 18.2572 3.16322 16.6814 4.14706 15.3124C4.29059 16.0686 4.52165 16.8048 4.83539 17.5054C6.01506 20.1182 8.00316 22.2624 10.4935 23.6078C9.96108 23.7857 9.44437 24.0092 8.94886 24.276ZM14.1514 22.7266C13.9962 22.6555 13.8256 22.6265 13.6562 22.6425C12.1235 22.2411 10.6976 21.4958 9.48221 20.461C8.26685 19.4261 7.2926 18.1277 6.63029 16.66C6.16216 15.6502 5.92631 14.5445 5.94077 13.4274C5.95523 12.3102 6.21962 11.2112 6.71373 10.2145C7.64306 8.45293 9.17618 7.10357 11.0193 6.42493C9.99726 9.36013 10.6472 13.6553 12.7165 17.6365C13.6785 19.5654 15.0132 21.2752 16.6401 22.6627C15.8195 22.8232 14.9787 22.8448 14.1514 22.7266ZM23.7451 22.3903C23.1716 22.5448 22.5889 22.6613 22.0007 22.7389C21.4117 22.6614 20.8283 22.5449 20.254 22.3903C18.2033 21.8521 16.0374 19.7219 14.462 16.6925C12.6704 13.2438 12.0469 9.47672 12.8834 7.09538C14.473 2.55356 19.9093 2.03223 22.1653 2.01765C25.4445 2.03783 29.66 2.93475 31.1157 7.09538C31.9501 9.4756 31.3353 13.2427 29.5393 16.6903C27.9628 19.7197 25.798 21.851 23.7451 22.3891V22.3903ZM27.3579 22.6649C28.9873 21.2782 30.3233 19.5673 31.2848 17.6365C33.353 13.6542 34.0019 9.36013 32.9798 6.42493C34.8231 7.1032 36.3564 8.45266 37.2854 10.2145C37.7798 11.2111 38.0446 12.31 38.0594 13.4271C38.0743 14.5442 37.8388 15.6501 37.371 16.66C36.7089 18.1267 35.7356 19.4246 34.5215 20.4595C33.3074 21.4945 31.883 22.2405 30.3517 22.6436C30.1773 22.6248 30.0013 22.6546 29.8423 22.73C29.0162 22.8474 28.1769 22.825 27.3579 22.6638V22.6649ZM41.6601 24.9555C41.165 26.7493 40.5009 27.8122 39.7939 27.9579C39.2516 28.07 38.9156 27.7595 38.0033 26.7673C37.1671 25.7707 36.1693 24.9284 35.0536 24.2772C34.5589 24.0089 34.0429 23.7839 33.5111 23.6045C36.0014 22.2591 37.9895 20.1148 39.1692 17.502C39.4825 16.8016 39.7135 16.0659 39.8575 15.3101C40.8408 16.6799 41.5127 18.2562 41.8245 19.9245C42.1364 21.5927 42.0802 23.311 41.6601 24.9543V24.9555Z" fill="currentColor"/>
    <path d="M17.3428 15.7782C16.1626 13.048 15.7674 10.0313 16.2032 7.08028C16.2231 6.94931 16.2174 6.81565 16.1867 6.68691C16.1559 6.55816 16.1006 6.43686 16.024 6.32994C15.9473 6.22302 15.8508 6.13257 15.7399 6.06375C15.629 5.99493 15.5059 5.94908 15.3777 5.92884C15.2495 5.90859 15.1186 5.91434 14.9925 5.94576C14.8665 5.97717 14.7477 6.03365 14.643 6.11194C14.5383 6.19023 14.4497 6.2888 14.3824 6.40205C14.315 6.5153 14.2701 6.641 14.2503 6.77197C13.7579 10.1061 14.2045 13.5144 15.538 16.5989C15.5889 16.7227 15.6636 16.8349 15.7575 16.9289C15.8515 17.0229 15.9628 17.0967 16.0851 17.1462C16.2074 17.1956 16.3381 17.2197 16.4695 17.2168C16.601 17.214 16.7306 17.1844 16.8507 17.1298C16.9709 17.0752 17.0791 16.9966 17.1691 16.8987C17.2591 16.8008 17.3291 16.6855 17.3749 16.5597C17.4208 16.4338 17.4415 16.2998 17.436 16.1656C17.4305 16.0315 17.3988 15.8997 17.3428 15.7782Z" fill="currentColor"/>
    <path d="M19.696 19.2067C19.2865 18.9533 18.9569 18.5852 18.7464 18.146C18.6921 18.023 18.6143 17.9124 18.5174 17.8206C18.4206 17.7288 18.3067 17.6578 18.1825 17.6118C18.0583 17.5658 17.9263 17.5456 17.7944 17.5526C17.6625 17.5596 17.5333 17.5935 17.4144 17.6524C17.2955 17.7112 17.1894 17.7939 17.1023 17.8953C17.0153 17.9968 16.949 18.1151 16.9075 18.2432C16.866 18.3712 16.85 18.5065 16.8606 18.641C16.8712 18.7755 16.908 18.9065 16.969 19.0262C17.3477 19.8156 17.9407 20.4772 18.6772 20.9321C18.7884 21.0004 18.9117 21.0457 19.0401 21.0654C19.1684 21.085 19.2993 21.0786 19.4253 21.0466C19.5512 21.0146 19.6698 20.9576 19.7741 20.8788C19.8785 20.8 19.9666 20.701 20.0335 20.5874C20.1004 20.4738 20.1448 20.3478 20.164 20.2168C20.1832 20.0857 20.177 19.952 20.1456 19.8234C20.1143 19.6947 20.0585 19.5737 19.9813 19.4671C19.9041 19.3605 19.8072 19.2705 19.696 19.2022V19.2067Z" fill="currentColor"/>
    </svg>
    `,
  meals: `<svg width="44" height="47" viewBox="0 0 44 47" fill="none" xmlns="http://www.w3.org/2000/svg">
    <g clip-path="url(#clip0_598_8219)">
    <path d="M42.941 2.11595C42.7415 1.9851 42.4981 1.93888 42.2644 1.98745C42.0307 2.03602 41.8259 2.1754 41.695 2.37496L34.006 14.102C33.3796 13.6496 32.7178 13.2483 32.027 12.902C32.0551 12.8557 32.0786 12.8068 32.097 12.756L35.4431 1.14795C35.5094 0.91841 35.4818 0.671927 35.3663 0.46273C35.2509 0.253533 35.0571 0.098759 34.8275 0.0324549C34.598 -0.0338492 34.3515 -0.0062506 34.1423 0.109178C33.9331 0.224607 33.7783 0.41841 33.712 0.647954L30.382 12.202C28.8498 11.6558 27.2357 11.3751 25.609 11.372C23.5868 11.3208 21.5789 11.7248 19.7337 12.5541C17.8886 13.3834 16.2534 14.6167 14.949 16.163C13.472 15.5617 11.8698 15.3326 10.2834 15.4959C8.69704 15.6593 7.17511 16.21 5.85156 17.0996C4.528 17.9893 3.44339 19.1906 2.69314 20.5978C1.94289 22.0051 1.54999 23.5752 1.54904 25.17H0.900049C0.781014 25.1699 0.663159 25.1936 0.553309 25.2394C0.443459 25.2853 0.343801 25.3524 0.260096 25.4371C0.176391 25.5217 0.110305 25.6221 0.0656684 25.7325C0.0210317 25.8428 -0.00126705 25.9609 5.5571e-05 26.08C0.0892682 29.5951 1.16582 33.0142 3.10662 35.9464C5.04743 38.8786 7.77413 41.2054 10.975 42.661V45.147C10.975 45.3856 11.0699 45.6146 11.2386 45.7834C11.4074 45.9521 11.6364 46.047 11.8751 46.047H29.692C29.9307 46.047 30.1596 45.9521 30.3284 45.7834C30.4972 45.6146 30.592 45.3856 30.592 45.147V42.665C33.7927 41.2092 36.5191 38.8822 38.4597 35.9501C40.4004 33.018 41.4768 29.599 41.566 26.084C41.5674 25.9649 41.5451 25.8468 41.5004 25.7365C41.4558 25.6261 41.3897 25.5257 41.306 25.4411C41.2223 25.3565 41.1226 25.2893 41.0128 25.2434C40.9029 25.1976 40.7851 25.1739 40.666 25.174H39.976C39.82 21.3924 38.1759 17.8258 35.402 15.251L43.197 3.36196C43.3282 3.16274 43.3749 2.91961 43.3269 2.68598C43.2789 2.45235 43.1401 2.24733 42.941 2.11595ZM11.292 17.249C13.3949 17.2513 15.4113 18.0864 16.9 19.5716C18.3887 21.0568 19.2286 23.0711 19.236 25.174H18.476C18.4537 23.2835 17.6871 21.4779 16.3423 20.149C14.9976 18.82 13.1832 18.0747 11.2925 18.0747C9.4019 18.0747 7.58747 18.82 6.24273 20.149C4.89799 21.4779 4.13134 23.2835 4.10903 25.174H3.34905C3.35619 23.0712 4.1959 21.0569 5.68447 19.5717C7.17304 18.0865 9.18928 17.2513 11.292 17.249ZM30.46 25.174C30.3295 24.0738 29.829 23.0506 29.0406 22.2723C28.2521 21.494 27.2226 21.0067 26.1208 20.8904C25.019 20.7742 23.9104 21.0358 22.9769 21.6324C22.0433 22.2291 21.3403 23.1252 20.983 24.174C20.8976 23.3879 20.7156 22.6154 20.441 21.874C21.2275 20.8287 22.312 20.0461 23.5519 19.6292C24.7917 19.2124 26.1287 19.1807 27.3869 19.5384C28.6451 19.8962 29.7655 20.6265 30.6005 21.6334C31.4356 22.6402 31.9461 23.8763 32.065 25.179L30.46 25.174ZM28.66 25.174H22.555C22.6942 24.4666 23.0746 23.8296 23.6314 23.3717C24.1882 22.9138 24.8867 22.6634 25.6075 22.6634C26.3284 22.6634 27.0269 22.9138 27.5837 23.3717C28.1404 23.8296 28.5209 24.4666 28.66 25.174ZM33.8661 25.174C33.7524 23.5697 33.1734 22.0335 32.1999 20.7533C31.2265 19.4731 29.9008 18.5046 28.3853 17.9663C26.8698 17.428 25.2303 17.3434 23.6674 17.7227C22.1045 18.102 20.6862 18.9288 19.5861 20.102C19.3425 19.7013 19.0704 19.3187 18.772 18.957C19.6483 18.0285 20.7095 17.2942 21.8871 16.8014C23.0648 16.3086 24.3327 16.0683 25.609 16.096C28.0701 16.1 30.4374 17.0409 32.2298 18.7275C34.0222 20.414 35.1053 22.7196 35.259 25.176L33.8661 25.174ZM15.376 25.174C15.376 24.0911 14.9459 23.0525 14.1802 22.2868C13.4145 21.5211 12.3759 21.091 11.2931 21.091C10.2102 21.091 9.17165 21.5211 8.40594 22.2868C7.64023 23.0525 7.21005 24.0911 7.21005 25.174H5.91003C5.92931 23.7594 6.5048 22.4093 7.51193 21.4158C8.51906 20.4223 9.87684 19.8653 11.2915 19.8653C12.7062 19.8653 14.064 20.4223 15.0712 21.4158C16.0783 22.4093 16.6537 23.7594 16.673 25.174H15.376ZM13.576 25.174H9.01205C9.02455 24.5769 9.27051 24.0085 9.6972 23.5906C10.1239 23.1728 10.6973 22.9387 11.2945 22.9387C11.8918 22.9387 12.4652 23.1728 12.8919 23.5906C13.3186 24.0085 13.5646 24.5769 13.5771 25.174H13.576ZM12.7761 44.251V43.132H28.792V44.251H12.7761ZM29.136 41.332H12.436C9.52258 40.1406 6.99281 38.1712 5.12332 35.6389C3.25383 33.1066 2.11663 30.109 1.83605 26.974H39.7281C39.4482 30.1081 38.3122 33.1051 36.4441 35.6373C34.5761 38.1695 32.048 40.1395 29.136 41.332ZM38.178 25.174H37.0601C36.9048 22.2401 35.6312 19.4773 33.5013 17.4538C31.3713 15.4303 28.547 14.2998 25.609 14.295C24.0957 14.2643 22.5927 14.55 21.1962 15.1338C19.7996 15.7176 18.5404 16.5865 17.499 17.685C17.2087 17.4481 16.9052 17.2277 16.5901 17.025C17.7218 15.7645 19.1155 14.7668 20.6734 14.1017C22.2314 13.4367 23.9159 13.1204 25.609 13.175C28.8438 13.1792 31.9531 14.4275 34.2929 16.6611C36.6327 18.8948 38.0237 21.9428 38.178 25.174Z" fill="currentColor"/>
    <path d="M3.39209 30.1722C4.045 32.6025 5.31628 34.8222 7.08209 36.6152C7.16443 36.7021 7.26327 36.7717 7.37286 36.8199C7.48244 36.8682 7.60056 36.8941 7.72027 36.8961C7.83999 36.8981 7.95888 36.8762 8.07003 36.8317C8.18118 36.7872 8.28235 36.7209 8.36758 36.6368C8.45281 36.5528 8.52038 36.4525 8.56637 36.342C8.61237 36.2314 8.63585 36.1128 8.63543 35.9931C8.63501 35.8733 8.6107 35.7549 8.56393 35.6447C8.51716 35.5344 8.44888 35.4347 8.36306 35.3512C6.81633 33.7796 5.70257 31.8346 5.13006 29.7052C5.1013 29.589 5.04966 29.4797 4.97815 29.3837C4.90663 29.2878 4.81669 29.207 4.71359 29.1462C4.61049 29.0854 4.49631 29.0458 4.37771 29.0297C4.25912 29.0136 4.1385 29.0213 4.02291 29.0523C3.90733 29.0834 3.7991 29.1372 3.70456 29.2106C3.61001 29.284 3.53106 29.3755 3.47232 29.4798C3.41357 29.584 3.3762 29.699 3.36242 29.8179C3.34865 29.9368 3.35875 30.0572 3.39209 30.1722Z" fill="#323232"/>
    <path d="M10.5356 39.5502C10.7282 39.6767 10.962 39.7245 11.1889 39.6838C11.4157 39.643 11.6182 39.5168 11.7547 39.3312C11.8913 39.1456 11.9514 38.9146 11.9227 38.6859C11.8941 38.4573 11.7788 38.2483 11.6006 38.1022L10.3336 37.1752C10.1407 37.0392 9.90209 36.9844 9.66918 37.0226C9.43627 37.0609 9.2277 37.1891 9.08843 37.3797C8.94915 37.5702 8.89031 37.8079 8.92458 38.0414C8.95884 38.2749 9.08345 38.4857 9.27159 38.6282L10.5356 39.5502Z" fill="#323232"/>
    </g>
    <defs>
    <clipPath id="clip0_598_8219">
    <rect width="43.348" height="46.051" fill="white"/>
    </clipPath>
    </defs>
    </svg>`
};
class CateringItemFiltersComponent extends _placeos_common__WEBPACK_IMPORTED_MODULE_2__.AsyncHandler {
  get start_of_date() {
    return (0,date_fns__WEBPACK_IMPORTED_MODULE_6__.startOfDay)((0,date_fns__WEBPACK_IMPORTED_MODULE_7__.addDays)(this._state.getFilters().date, this.offset_day)).valueOf();
  }
  get min_offset() {
    return this.offset_day > 0 ? 0 : this._min_offset;
  }
  get step_interval() {
    return this._settings.get('app.catering.step_interval') || 5;
  }
  get max_offset() {
    const end = Math.min((0,date_fns__WEBPACK_IMPORTED_MODULE_8__.endOfDay)((0,date_fns__WEBPACK_IMPORTED_MODULE_7__.addDays)(this._state.getFilters().date, this.offset_day)).valueOf(), (0,date_fns__WEBPACK_IMPORTED_MODULE_9__.addMinutes)(this._state.getFilters().date, this._state.getFilters().duration).valueOf());
    const diff = (0,date_fns__WEBPACK_IMPORTED_MODULE_10__.differenceInMinutes)(end, this._state.getFilters().date);
    return Math.min(diff, Math.min(24 * 60 - 1, this._max_offset));
  }
  get use_24hr() {
    return this._settings.get('app.use_24_hour_time');
  }
  constructor(_state, _settings) {
    super();
    this._state = _state;
    this._settings = _settings;
    this.search = false;
    this.at_time = false;
    this.at_timeChange = new _angular_core__WEBPACK_IMPORTED_MODULE_5__.EventEmitter();
    this.offset = 0;
    this.offsetChange = new _angular_core__WEBPACK_IMPORTED_MODULE_5__.EventEmitter();
    this.offset_day = 0;
    this.offset_dayChange = new _angular_core__WEBPACK_IMPORTED_MODULE_5__.EventEmitter();
    this._min_offset = 0;
    this._max_offset = 60;
    this.icons = ICONS;
    this.filters = this._state.filters;
    this.setFilters = f => this._state.setFilters(f);
    this.categories = this._state.categories;
    this.exact_tooltip = 'Deliver at exactly specified time. \nNote that changes to the booking will not be \nreflected in the order if this is set.';
    this.day_options = [];
  }
  ngOnInit() {
    this._min_offset = Math.max(this._settings.get('app.catering.min_offset'), 0);
    this.subscription('filters', this._state.filters.subscribe(() => {
      this._max_offset = Math.max(15, (this._state.getFilters().duration || 60) - this._settings.get('app.catering.end_offset'));
      this._updateDayOptions();
    }));
    this._updateDayOptions();
  }
  toggleCategory(name) {
    var _this = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      const {
        categories
      } = yield _this.filters.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_11__.take)(1)).toPromise();
      if (categories.includes(name)) _this.setFilters({
        categories: categories.filter(_ => _ !== name)
      });else _this.setFilters({
        categories: [...categories, name]
      });
    })();
  }
  toggleTag(tag) {
    var _this2 = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      const {
        tags
      } = yield _this2.filters.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_11__.take)(1)).toPromise();
      if (tags.includes(tag)) _this2.setFilters({
        tags: tags.filter(_ => _ !== tag)
      });else _this2.setFilters({
        tags: [...tags, tag]
      });
    })();
  }
  _updateDayOptions() {
    const {
      date,
      duration
    } = this._state.getFilters();
    if (duration <= 24 * 60) return this.day_options = [];
    let day = (0,date_fns__WEBPACK_IMPORTED_MODULE_6__.startOfDay)(date);
    let count = 0;
    const end = (0,date_fns__WEBPACK_IMPORTED_MODULE_8__.endOfDay)((0,date_fns__WEBPACK_IMPORTED_MODULE_9__.addMinutes)(date, duration)).valueOf();
    const options = [];
    while (day.valueOf() <= end) {
      options.push({
        id: count,
        value: day.valueOf()
      });
      day = (0,date_fns__WEBPACK_IMPORTED_MODULE_7__.addDays)(day, 1);
      count++;
    }
    this.day_options = options;
  }
  static #_ = this.ɵfac = function CateringItemFiltersComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || CateringItemFiltersComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵdirectiveInject"](_catering_order_state_service__WEBPACK_IMPORTED_MODULE_1__.CateringOrderStateService), _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵdirectiveInject"](_placeos_common__WEBPACK_IMPORTED_MODULE_2__.SettingsService));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵdefineComponent"]({
    type: CateringItemFiltersComponent,
    selectors: [["catering-item-filters"]],
    inputs: {
      search: "search",
      at_time: "at_time",
      offset: "offset",
      offset_day: "offset_day"
    },
    outputs: {
      at_timeChange: "at_timeChange",
      offsetChange: "offsetChange",
      offset_dayChange: "offset_dayChange"
    },
    features: [_angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵInheritDefinitionFeature"]],
    decls: 12,
    vars: 15,
    consts: () => {
      let i18n_0;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_637156553417356107$$LIBS_CATERING_SRC_LIB_CATERING_ORDER_MODAL_CATERING_ITEM_FILTERS_COMPONENT_TS_0 = goog.getMsg(" Options ");
        i18n_0 = MSG_EXTERNAL_637156553417356107$$LIBS_CATERING_SRC_LIB_CATERING_ORDER_MODAL_CATERING_ITEM_FILTERS_COMPONENT_TS_0;
      } else {
        i18n_0 = $localize`:␟07b96192315617e1c3c3f020fed4749eafda31eb␟637156553417356107: Options `;
      }
      let i18n_1;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_3888583854485349732$$LIBS_CATERING_SRC_LIB_CATERING_ORDER_MODAL_CATERING_ITEM_FILTERS_COMPONENT_TS_1 = goog.getMsg(" Catergories ");
        i18n_1 = MSG_EXTERNAL_3888583854485349732$$LIBS_CATERING_SRC_LIB_CATERING_ORDER_MODAL_CATERING_ITEM_FILTERS_COMPONENT_TS_1;
      } else {
        i18n_1 = $localize`:␟24300e769843b029b0346b3ea18e51e4e97a3502␟3888583854485349732: Catergories `;
      }
      return [i18n_0, i18n_1, [1, "px-4", "mt-3", "mb-2"], ["appearance", "outline", 1, "w-full", "h-14"], ["matPrefix", "", 1, "text-xl"], ["matInput", "", "placeholder", "Search menu...", 3, "ngModelChange", "ngModel"], ["class", "hidden sm:block font-medium px-2 py-2", 4, "ngIf"], ["class", "flex flex-col px-2", 4, "ngIf"], ["class", "hidden sm:block font-medium px-2 py-4", 4, "ngIf"], [1, "flex", "flex-col", "px-2", "space-y-4"], [3, "ngModel", "ngModelChange", 4, "ngFor", "ngForOf"], [1, "hidden", "sm:block", "font-medium", "px-2", "py-2"], [1, "flex", "flex-col", "px-2"], [3, "ngModelChange", "ngModel", "matTooltip"], [4, "ngIf"], [3, "ngModelChange", "ngModel", "time", "step", "min", "max", "use_24hr"], ["appearance", "outline", 1, "w-full", "no-subscript", "mb-4"], [3, "ngModelChange", "ngModel"], [3, "value", 4, "ngFor", "ngForOf"], [3, "value"], [1, "hidden", "sm:block", "font-medium", "px-2", "py-4"]];
    },
    template: function CateringItemFiltersComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "div", 2)(1, "mat-form-field", 3)(2, "app-icon", 4);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](3, "search");
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](4, "input", 5);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipe"](5, "async");
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("ngModelChange", function CateringItemFiltersComponent_Template_input_ngModelChange_4_listener($event) {
          return ctx.setFilters({
            search: $event
          });
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]()()();
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](6, CateringItemFiltersComponent_h3_6_Template, 2, 0, "h3", 6)(7, CateringItemFiltersComponent_div_7_Template, 8, 11, "div", 7)(8, CateringItemFiltersComponent_h3_8_Template, 2, 0, "h3", 8);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](9, "div", 9);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](10, CateringItemFiltersComponent_mat_checkbox_10_Template, 3, 5, "mat-checkbox", 10);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipe"](11, "async");
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
      }
      if (rf & 2) {
        let tmp_1_0;
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵclassProp"]("sm:hidden", !ctx.search);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](4);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngModel", (tmp_1_0 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipeBind1"](5, 11, ctx.filters)) == null ? null : tmp_1_0.search);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngIf", !ctx.search);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngIf", !ctx.search);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngIf", !ctx.search);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵclassProp"]("sm:hidden", ctx.search)("sm:pt-1", !ctx.search);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngForOf", _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipeBind1"](11, 13, ctx.categories));
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_12__.NgForOf, _angular_common__WEBPACK_IMPORTED_MODULE_12__.NgIf, _angular_material_core__WEBPACK_IMPORTED_MODULE_13__.MatOption, _angular_material_checkbox__WEBPACK_IMPORTED_MODULE_14__.MatCheckbox, _angular_material_tooltip__WEBPACK_IMPORTED_MODULE_15__.MatTooltip, _angular_forms__WEBPACK_IMPORTED_MODULE_16__.DefaultValueAccessor, _angular_forms__WEBPACK_IMPORTED_MODULE_16__.NgControlStatus, _angular_forms__WEBPACK_IMPORTED_MODULE_16__.NgModel, _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_3__.IconComponent, _angular_material_form_field__WEBPACK_IMPORTED_MODULE_17__.MatFormField, _angular_material_form_field__WEBPACK_IMPORTED_MODULE_17__.MatPrefix, _angular_material_select__WEBPACK_IMPORTED_MODULE_18__.MatSelect, _angular_material_input__WEBPACK_IMPORTED_MODULE_19__.MatInput, _form_fields_src_lib_duration_field_component__WEBPACK_IMPORTED_MODULE_4__.DurationFieldComponent, _angular_common__WEBPACK_IMPORTED_MODULE_12__.AsyncPipe, _angular_common__WEBPACK_IMPORTED_MODULE_12__.DatePipe],
    styles: ["[_nghost-%COMP%] {\n                min-width: 16rem;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNhdGVyaW5nLWl0ZW0tZmlsdGVycy5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLGdCQUFnQjtZQUNwQiIsImZpbGUiOiJjYXRlcmluZy1pdGVtLWZpbHRlcnMuY29tcG9uZW50LnRzIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICA6aG9zdCB7XG4gICAgICAgICAgICAgICAgbWluLXdpZHRoOiAxNnJlbTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl19 */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvY2F0ZXJpbmcvc3JjL2xpYi9jYXRlcmluZy1vcmRlci1tb2RhbC9jYXRlcmluZy1pdGVtLWZpbHRlcnMuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxnQkFBZ0I7WUFDcEI7O0FBRVosNFlBQTRZIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICA6aG9zdCB7XG4gICAgICAgICAgICAgICAgbWluLXdpZHRoOiAxNnJlbTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl0sInNvdXJjZVJvb3QiOiIifQ== */"]
  });
}

/***/ }),

/***/ 89505:
/*!*****************************************************************************************!*\
  !*** ./libs/catering/src/lib/catering-order-modal/catering-item-list-item.component.ts ***!
  \*****************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CateringItemListItemComponent: () => (/* binding */ CateringItemListItemComponent)
/* harmony export */ });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _catering_item_class__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../catering-item.class */ 25892);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../components/src/lib/icon.component */ 69434);
/* harmony import */ var _components_src_lib_authenticated_image_directive__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../components/src/lib/authenticated-image.directive */ 93208);
/* harmony import */ var _angular_material_core__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/material/core */ 74646);







function CateringItemListItemComponent_div_3_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "div", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtextInterpolate1"](" ", ctx_r1.item.quantity || "1", " ");
  }
}
function CateringItemListItemComponent_img_4_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelement"](0, "img", 18);
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("source", ctx_r1.item.images[0]);
  }
}
function CateringItemListItemComponent_ng_template_5_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelement"](0, "img", 19);
  }
}
function CateringItemListItemComponent_p_14_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "p", 20);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipe"](2, "currency");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipeBind2"](2, 1, ctx_r1.item.unit_price / 100, ctx_r1.code), " ");
  }
}
function CateringItemListItemComponent_div_15_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "div", 21);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtextInterpolate1"](" ", ctx_r1.options, " ");
  }
}
function CateringItemListItemComponent_div_16_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "div", 22);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](1, " GF ");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
  }
}
function CateringItemListItemComponent_div_17_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "div", 23);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](1, " VG ");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
  }
}
function CateringItemListItemComponent_div_18_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "div", 23);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](1, " V ");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
  }
}
function CateringItemListItemComponent_div_19_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "div", 24);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](1, " D ");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
  }
}
function CateringItemListItemComponent_div_20_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "div", 25);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](1, " N ");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
  }
}
class CateringItemListItemComponent {
  constructor() {
    this.active = false;
    this.selected = false;
    this.favourite = false;
    this.code = 'USD';
    this.toggleFav = new _angular_core__WEBPACK_IMPORTED_MODULE_3__.EventEmitter();
    this.select = new _angular_core__WEBPACK_IMPORTED_MODULE_3__.EventEmitter();
  }
  get options() {
    return this.item.option_list?.map(_ => _.name).join(', ');
  }
  static #_ = this.ɵfac = function CateringItemListItemComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || CateringItemListItemComponent)();
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵdefineComponent"]({
    type: CateringItemListItemComponent,
    selectors: [["catering-item-list-item"]],
    inputs: {
      item: "item",
      active: "active",
      selected: "selected",
      favourite: "favourite",
      code: "code"
    },
    outputs: {
      toggleFav: "toggleFav",
      select: "select"
    },
    decls: 24,
    vars: 17,
    consts: [["placeholder", ""], ["item", "", "matRipple", "", 1, "relative", "p-2", "rounded-lg", "w-full", "shadow", "border", "bg-base-100", "border-base-200", "sm:w-[20rem]"], ["name", "select-catering-item", 1, "w-full", "h-full", "flex", "items-center", "z-0", 3, "click"], [1, "relative", "w-16", "h-16", "rounded-xl", "bg-neutral", "mr-4", "overflow-hidden", "border", "border-base-200", "flex", "items-center", "justify-center"], ["class", "absolute top-1 left-1 border border-white bg-neutral rounded-full h-6 w-6 flex items-center justify-center text-white text-xs", 4, "ngIf"], ["auth", "", "class", "object-cover min-h-full min-w-full", 3, "source", 4, "ngIf", "ngIfElse"], [1, "space-y-2", "text-left", "flex-1"], [1, "font-medium", "flex", "flex-col", "pr-10"], [1, "opacity-60", "text-xs"], [1, "flex", "items-center", "text-sm", "space-x-1"], ["class", "flex-1 w-px bg-base-100 rounded", 4, "ngIf"], ["class", "text-xs px-2 py-1 rounded-2xl shadow border border-base-200", 4, "ngIf"], ["class", "text-xs h-5 w-7 rounded-xl shadow bg-success flex items-center justify-center", 4, "ngIf"], ["class", "text-xs h-5 w-7 rounded-xl shadow bg-info flex items-center justify-center", 4, "ngIf"], ["class", "text-xs h-5 w-7 rounded-xl shadow bg-warning flex items-center justify-center", 4, "ngIf"], ["class", "text-xs h-5 w-7 rounded-xl shadow bg-orange-600 flex items-center justify-center", 4, "ngIf"], ["icon", "", "matRipple", "", "name", "toggle-catering-item-favourite", 1, "absolute", "top-1", "right-1", 3, "click"], [1, "absolute", "top-1", "left-1", "border", "border-white", "bg-neutral", "rounded-full", "h-6", "w-6", "flex", "items-center", "justify-center", "text-white", "text-xs"], ["auth", "", 1, "object-cover", "min-h-full", "min-w-full", 3, "source"], ["src", "assets/icons/catering-placeholder.svg", 1, "m-auto"], [1, "flex-1", "w-px", "bg-base-100", "rounded"], [1, "text-xs", "px-2", "py-1", "rounded-2xl", "shadow", "border", "border-base-200"], [1, "text-xs", "h-5", "w-7", "rounded-xl", "shadow", "bg-success", "flex", "items-center", "justify-center"], [1, "text-xs", "h-5", "w-7", "rounded-xl", "shadow", "bg-info", "flex", "items-center", "justify-center"], [1, "text-xs", "h-5", "w-7", "rounded-xl", "shadow", "bg-warning", "flex", "items-center", "justify-center"], [1, "text-xs", "h-5", "w-7", "rounded-xl", "shadow", "bg-orange-600", "flex", "items-center", "justify-center"]],
    template: function CateringItemListItemComponent_Template(rf, ctx) {
      if (rf & 1) {
        const _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵgetCurrentView"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "li", 1)(1, "button", 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵlistener"]("click", function CateringItemListItemComponent_Template_button_click_1_listener() {
          _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵrestoreView"](_r1);
          return _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵresetView"](ctx.select.emit());
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](2, "div", 3);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](3, CateringItemListItemComponent_div_3_Template, 2, 1, "div", 4)(4, CateringItemListItemComponent_img_4_Template, 1, 1, "img", 5)(5, CateringItemListItemComponent_ng_template_5_Template, 1, 0, "ng-template", null, 0, _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplateRefExtractor"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](7, "div", 6)(8, "div", 7)(9, "div");
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](10);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](11, "div", 8);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](12);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](13, "div", 9);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](14, CateringItemListItemComponent_p_14_Template, 3, 4, "p", 10)(15, CateringItemListItemComponent_div_15_Template, 2, 1, "div", 11)(16, CateringItemListItemComponent_div_16_Template, 2, 0, "div", 12)(17, CateringItemListItemComponent_div_17_Template, 2, 0, "div", 13)(18, CateringItemListItemComponent_div_18_Template, 2, 0, "div", 13)(19, CateringItemListItemComponent_div_19_Template, 2, 0, "div", 14)(20, CateringItemListItemComponent_div_20_Template, 2, 0, "div", 15);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()()();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](21, "button", 16);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵlistener"]("click", function CateringItemListItemComponent_Template_button_click_21_listener() {
          _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵrestoreView"](_r1);
          return _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵresetView"](ctx.toggleFav.emit());
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](22, "app-icon");
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](23);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()()();
      }
      if (rf & 2) {
        const placeholder_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵreference"](6);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵclassProp"]("!border-base-200", ctx.active);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", ctx.item.quantity && ctx.selected);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", ctx.item.images == null ? null : ctx.item.images.length)("ngIfElse", placeholder_r3);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](6);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtextInterpolate"](ctx.item.name || "Item");
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtextInterpolate1"](" ", ctx.item.category, " ");
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", ctx.item.unit_price);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", ctx.item.option_list == null ? null : ctx.item.option_list.length);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", ctx.item.tags == null ? null : ctx.item.tags.includes("Gluten Free"));
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", ctx.item.tags == null ? null : ctx.item.tags.includes("Vegan"));
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", ctx.item.tags == null ? null : ctx.item.tags.includes("Vegetarian"));
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", ctx.item.tags == null ? null : ctx.item.tags.includes("Contains Dairy"));
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", ctx.item.tags == null ? null : ctx.item.tags.includes("Contains Nuts"));
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵclassProp"]("text-blue-400", ctx.favourite);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtextInterpolate"](ctx.favourite ? "favorite" : "favorite_border");
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_4__.NgIf, _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_1__.IconComponent, _components_src_lib_authenticated_image_directive__WEBPACK_IMPORTED_MODULE_2__.AuthenticatedImageDirective, _angular_material_core__WEBPACK_IMPORTED_MODULE_5__.MatRipple, _angular_common__WEBPACK_IMPORTED_MODULE_4__.CurrencyPipe]
  });
}

/***/ }),

/***/ 32499:
/*!************************************************************************************!*\
  !*** ./libs/catering/src/lib/catering-order-modal/catering-item-list.component.ts ***!
  \************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CateringItemListComponent: () => (/* binding */ CateringItemListComponent)
/* harmony export */ });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! rxjs */ 90521);
/* harmony import */ var _catering_order_state_service__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./catering-order-state.service */ 20097);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _angular_material_progress_spinner__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/material/progress-spinner */ 41134);
/* harmony import */ var _catering_item_list_item_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./catering-item-list-item.component */ 89505);








function CateringItemListComponent_ng_container_1_catering_item_list_item_7_Template(rf, ctx) {
  if (rf & 1) {
    const _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](0, "catering-item-list-item", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵlistener"]("toggleFav", function CateringItemListComponent_ng_container_1_catering_item_list_item_7_Template_catering_item_list_item_toggleFav_0_listener() {
      const item_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵrestoreView"](_r1).$implicit;
      const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"](2);
      return _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵresetView"](ctx_r2.toggleFav.emit(item_r2.id));
    })("select", function CateringItemListComponent_ng_container_1_catering_item_list_item_7_Template_catering_item_list_item_select_0_listener() {
      const item_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵrestoreView"](_r1).$implicit;
      const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"](2);
      return _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵresetView"](ctx_r2.selectItem(item_r2, true));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const item_r2 = ctx.$implicit;
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("item", item_r2)("active", ctx_r2.active === item_r2.custom_id)("selected", true)("favourite", ctx_r2.isFavourite(item_r2.id));
  }
}
function CateringItemListComponent_ng_container_1_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](1, "h3", 4);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](2, "Ordered Items");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](3, "p", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipe"](5, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](6, "ul", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](7, CateringItemListComponent_ng_container_1_catering_item_list_item_7_Template, 1, 4, "catering-item-list-item", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipe"](8, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementContainerEnd"]();
  }
  if (rf & 2) {
    let tmp_3_0;
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtextInterpolate1"](" ", ((tmp_3_0 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipeBind1"](5, 2, ctx_r2.list)) == null ? null : tmp_3_0.length) || 0, " items(s) ");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngForOf", _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipeBind1"](8, 4, ctx_r2.list));
  }
}
function CateringItemListComponent_ng_container_8_ul_1_catering_item_list_item_1_Template(rf, ctx) {
  if (rf & 1) {
    const _r4 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](0, "catering-item-list-item", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵlistener"]("toggleFav", function CateringItemListComponent_ng_container_8_ul_1_catering_item_list_item_1_Template_catering_item_list_item_toggleFav_0_listener() {
      const item_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵrestoreView"](_r4).$implicit;
      const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"](3);
      return _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵresetView"](ctx_r2.toggleFav(item_r5.id));
    })("select", function CateringItemListComponent_ng_container_8_ul_1_catering_item_list_item_1_Template_catering_item_list_item_select_0_listener() {
      const item_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵrestoreView"](_r4).$implicit;
      const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"](3);
      return _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵresetView"](ctx_r2.selectItem(item_r5, true));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const item_r5 = ctx.$implicit;
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("item", item_r5)("active", ctx_r2.active === item_r5.custom_id)("selected", ctx_r2.selected.includes(item_r5.custom_id))("favourite", ctx_r2.isFavourite(item_r5.id))("code", ctx_r2.code);
  }
}
function CateringItemListComponent_ng_container_8_ul_1_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](0, "ul", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](1, CateringItemListComponent_ng_container_8_ul_1_catering_item_list_item_1_Template, 1, 5, "catering-item-list-item", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipe"](2, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngForOf", _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipeBind1"](2, 1, ctx_r2.item_list));
  }
}
function CateringItemListComponent_ng_container_8_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](1, CateringItemListComponent_ng_container_8_ul_1_Template, 3, 3, "ul", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipe"](2, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementContainerEnd"]();
  }
  if (rf & 2) {
    let tmp_3_0;
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"]();
    const empty_state_r6 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵreference"](11);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngIf", (tmp_3_0 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipeBind1"](2, 2, ctx_r2.item_list)) == null ? null : tmp_3_0.length)("ngIfElse", empty_state_r6);
  }
}
function CateringItemListComponent_ng_template_10_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](0, "div", 13)(1, "p", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](2, " No available items for selected time and/or filters ");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]()();
  }
}
function CateringItemListComponent_ng_template_12_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](0, "div", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelement"](1, "mat-spinner", 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](2, "p", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](3, "Finding available items...");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("diameter", 32);
  }
}
class CateringItemListComponent {
  get code() {
    return this._state.currency_code;
  }
  constructor(_state) {
    this._state = _state;
    this.active = '';
    this.selected = '';
    this.selected_items = [];
    this.favorites = [];
    this.toggleFav = new _angular_core__WEBPACK_IMPORTED_MODULE_2__.EventEmitter();
    this.onSelect = new _angular_core__WEBPACK_IMPORTED_MODULE_2__.EventEmitter();
    this.list = new rxjs__WEBPACK_IMPORTED_MODULE_3__.BehaviorSubject([]);
    this.loading = this._state.loading;
    this.item_list = this._state.filtered_menu;
  }
  ngOnChanges(changes) {
    if (changes.selected_items) {
      this.list.next(this.selected_items || []);
    }
  }
  isFavourite(item_id) {
    return this.favorites?.includes(item_id);
  }
  selectItem(item, clear_state = false) {
    this.onSelect.emit(item);
    if (clear_state) {
      item.options?.forEach(_ => delete _.active);
    }
  }
  static #_ = this.ɵfac = function CateringItemListComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || CateringItemListComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdirectiveInject"](_catering_order_state_service__WEBPACK_IMPORTED_MODULE_0__.CateringOrderStateService));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdefineComponent"]({
    type: CateringItemListComponent,
    selectors: [["catering-item-list"]],
    inputs: {
      active: "active",
      selected: "selected",
      selected_items: "selected_items",
      favorites: "favorites"
    },
    outputs: {
      toggleFav: "toggleFav",
      onSelect: "onSelect"
    },
    features: [_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵNgOnChangesFeature"]],
    decls: 14,
    vars: 10,
    consts: [["empty_state", ""], ["load_state", ""], [1, "w-full", "h-full", "overflow-auto", "py-2"], [4, "ngIf"], [1, "font-bold", "px-2"], ["count", "", 1, "text-sm", "opacity-60", "mb-2", "px-2"], [4, "ngIf", "ngIfElse"], [1, "list-style-none", "space-y-2", "p-2"], ["class", "block", 3, "item", "active", "selected", "favourite", "toggleFav", "select", 4, "ngFor", "ngForOf"], [1, "block", 3, "toggleFav", "select", "item", "active", "selected", "favourite"], ["class", "list-style-none space-y-2 p-2", 4, "ngIf", "ngIfElse"], ["class", "block", 3, "item", "active", "selected", "favourite", "code", "toggleFav", "select", 4, "ngFor", "ngForOf"], [1, "block", 3, "toggleFav", "select", "item", "active", "selected", "favourite", "code"], ["empty", "", 1, "p-16", "flex", "flex-col", "items-center", "justify-center", "space-y-2"], [1, "opacity-30", "text-center"], ["loading", "", 1, "p-16", "flex", "flex-col", "items-center", "justify-center", "space-y-2"], [3, "diameter"], [1, "opacity-30"]],
    template: function CateringItemListComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](0, "div", 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](1, CateringItemListComponent_ng_container_1_Template, 9, 6, "ng-container", 3);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipe"](2, "async");
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](3, "h3", 4);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](4, "Results");
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](5, "p", 5);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](6);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipe"](7, "async");
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](8, CateringItemListComponent_ng_container_8_Template, 3, 4, "ng-container", 6);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipe"](9, "async");
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](10, CateringItemListComponent_ng_template_10_Template, 3, 0, "ng-template", null, 0, _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplateRefExtractor"])(12, CateringItemListComponent_ng_template_12_Template, 4, 1, "ng-template", null, 1, _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplateRefExtractor"]);
      }
      if (rf & 2) {
        let tmp_2_0;
        let tmp_3_0;
        const load_state_r7 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵreference"](13);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngIf", (tmp_2_0 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipeBind1"](2, 4, ctx.list)) == null ? null : tmp_2_0.length);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](5);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtextInterpolate1"](" ", ((tmp_3_0 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipeBind1"](7, 6, ctx.item_list)) == null ? null : tmp_3_0.length) || 0, " result(s) found ");
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngIf", !_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipeBind1"](9, 8, ctx.loading))("ngIfElse", load_state_r7);
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_4__.NgForOf, _angular_common__WEBPACK_IMPORTED_MODULE_4__.NgIf, _angular_material_progress_spinner__WEBPACK_IMPORTED_MODULE_5__.MatProgressSpinner, _catering_item_list_item_component__WEBPACK_IMPORTED_MODULE_1__.CateringItemListItemComponent, _angular_common__WEBPACK_IMPORTED_MODULE_4__.AsyncPipe]
  });
}

/***/ }),

/***/ 20097:
/*!************************************************************************************!*\
  !*** ./libs/catering/src/lib/catering-order-modal/catering-order-state.service.ts ***!
  \************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CateringOrderStateService: () => (/* binding */ CateringOrderStateService)
/* harmony export */ });
/* harmony import */ var _home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 89204);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var _placeos_organisation__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @placeos/organisation */ 2510);
/* harmony import */ var _placeos_ts_client__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @placeos/ts-client */ 35713);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! rxjs */ 90521);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! rxjs */ 71536);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! rxjs */ 68824);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! rxjs/operators */ 8627);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! rxjs/operators */ 71963);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! rxjs/operators */ 29314);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! rxjs/operators */ 35443);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! rxjs/operators */ 66000);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! rxjs/operators */ 7841);
/* harmony import */ var _catering_item_class__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../catering-item.class */ 25892);
/* harmony import */ var _utilities__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../utilities */ 60285);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @angular/core */ 37580);











class CateringOrderStateService {
  get currency_code() {
    return this._org.currency_code;
  }
  constructor(_org, _settings) {
    this._org = _org;
    this._settings = _settings;
    this._options = new rxjs__WEBPACK_IMPORTED_MODULE_6__.BehaviorSubject({});
    this._filters = new rxjs__WEBPACK_IMPORTED_MODULE_6__.BehaviorSubject({
      search: '',
      tags: [],
      categories: []
    });
    this._loading = new rxjs__WEBPACK_IMPORTED_MODULE_6__.BehaviorSubject('');
    this.loading = this._loading.asObservable();
    this.filters = this._filters.asObservable();
    this.settings = this._org.active_building.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.filter)(_ => !!_), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.switchMap)(_ => (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_3__.showMetadata)(_.id, 'catering-settings').pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.catchError)(_ => (0,rxjs__WEBPACK_IMPORTED_MODULE_10__.of)({})))), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_11__.map)(_ => _.details), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.tap)(_ => this._settings.post('require_catering_notes', !!_?.require_notes)), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.shareReplay)(1));
    this.charge_codes = this.settings.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_11__.map)(_ => _.charge_codes || []));
    this.availability = this.settings.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_11__.map)(_ => _.disabled_rooms || []));
    this.available_menu = (0,rxjs__WEBPACK_IMPORTED_MODULE_14__.combineLatest)([this._options, this._org.active_building]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.filter)(([_, bld]) => !!bld), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.switchMap)(([{
      zone
    }, bld]) => {
      this._loading.next('[Menu]');
      return (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_3__.showMetadata)(zone || bld.id, 'catering').pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_11__.map)(d => (d.details instanceof Array ? d.details : []).map(_ => new _catering_item_class__WEBPACK_IMPORTED_MODULE_4__.CateringItem(_))), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.catchError)(_ => []));
    }), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.tap)(_ => this._loading.next('')), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.shareReplay)(1));
    this.categories = this.available_menu.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_11__.map)(_ => (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.unique)(_.map(i => i.category))));
    this.filtered_menu = (0,rxjs__WEBPACK_IMPORTED_MODULE_14__.combineLatest)([this._filters, this.available_menu]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.switchMap)( /*#__PURE__*/function () {
      var _ref = (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* ([{
        search,
        tags,
        categories,
        zone_id,
        date,
        duration,
        resources
      }, l]) {
        const rules = yield (0,_utilities__WEBPACK_IMPORTED_MODULE_5__.getCateringRulesForZone)(zone_id).toPromise();
        search = search.toLowerCase();
        let list = search ? l.filter(_ => _.name.toLowerCase().includes(search)) : l;
        list = tags.length ? list.filter(_ => tags.every(t => _.tags.includes(t))) : list;
        list = categories.length ? list.filter(_ => categories.includes(_.category)) : list;
        list = list.filter(_ => (0,_utilities__WEBPACK_IMPORTED_MODULE_5__.cateringItemAvailable)(_, rules, {
          date,
          duration,
          resources
        }));
        return list;
      });
      return function (_x) {
        return _ref.apply(this, arguments);
      };
    }()), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.shareReplay)(1));
  }
  setOptions(opts) {
    this._options.next({
      ...this._options.getValue(),
      ...opts
    });
  }
  setFilters(opts) {
    this._filters.next({
      ...this._filters.getValue(),
      ...opts
    });
  }
  getFilters() {
    return {
      ...this._filters.getValue()
    };
  }
  static #_ = this.ɵfac = function CateringOrderStateService_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || CateringOrderStateService)(_angular_core__WEBPACK_IMPORTED_MODULE_15__["ɵɵinject"](_placeos_organisation__WEBPACK_IMPORTED_MODULE_2__.OrganisationService), _angular_core__WEBPACK_IMPORTED_MODULE_15__["ɵɵinject"](_placeos_common__WEBPACK_IMPORTED_MODULE_1__.SettingsService));
  };
  static #_2 = this.ɵprov = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_15__["ɵɵdefineInjectable"]({
    token: CateringOrderStateService,
    factory: CateringOrderStateService.ɵfac,
    providedIn: 'root'
  });
}

/***/ }),

/***/ 11732:
/*!******************************************************************************************!*\
  !*** ./libs/catering/src/lib/catering-order-modal/new-catering-order-modal.component.ts ***!
  \******************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   NewCateringOrderModalComponent: () => (/* binding */ NewCateringOrderModalComponent)
/* harmony export */ });
/* harmony import */ var _angular_material_dialog__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @angular/material/dialog */ 12587);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var _placeos_organisation__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @placeos/organisation */ 2510);
/* harmony import */ var _catering_item_class__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../catering-item.class */ 25892);
/* harmony import */ var _catering_order_state_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./catering-order-state.service */ 20097);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../components/src/lib/icon.component */ 69434);
/* harmony import */ var _angular_material_core__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @angular/material/core */ 74646);
/* harmony import */ var _catering_item_list_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./catering-item-list.component */ 32499);
/* harmony import */ var _catering_item_details_component__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./catering-item-details.component */ 90699);
/* harmony import */ var _catering_item_filters_component__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./catering-item-filters.component */ 26386);
















function NewCateringOrderModalComponent_button_14_Template(rf, ctx) {
  if (rf & 1) {
    const _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](0, "button", 25);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵlistener"]("click", function NewCateringOrderModalComponent_button_14_Template_button_click_0_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵrestoreView"](_r1);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵresetView"](ctx_r1.displayed = null);
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵi18n"](1, 4);
    _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
  }
}
const EMPTY_FAVS = [];
class NewCateringOrderModalComponent {
  get favorites() {
    return this._settings.get('favourite_menu_items') || EMPTY_FAVS;
  }
  get selected_ids() {
    return this.selected.map(_ => _.custom_id).join(',');
  }
  get count() {
    return this.selected.reduce((t, i) => t + i.quantity, 0);
  }
  get code() {
    return this._org.currency_code;
  }
  constructor(_settings, _order, _org, _data) {
    this._settings = _settings;
    this._order = _order;
    this._org = _org;
    this._data = _data;
    this.displayed = null;
    this.selected = [...(this._data.items || [])];
    this.exact_time = this._data.exact_time ?? false;
    const {
      duration
    } = this._data.details;
    this._order.setFilters(this._data.details);
    this.offset = Math.min(Math.max(this._settings.get('app.catering.min_offset'), this._data.offset || 0), (duration || 60) - this._settings.get('app.catering.end_offset'));
    this.offset_day = this._data.offset_day || 0;
  }
  isSelected(id) {
    return id && this.selected_ids.includes(id);
  }
  setSelected(item, state) {
    const list = this.selected.filter(_ => _.custom_id !== item.custom_id);
    if (state) {
      const new_item = new _catering_item_class__WEBPACK_IMPORTED_MODULE_2__.CateringItem({
        ...item,
        in_order: true
      });
      list.push(new_item);
      this.displayed = new_item;
    }
    this.selected = list;
  }
  toggleFavourite(item) {
    const fav_list = this.favorites;
    const new_state = !fav_list.includes(item.id);
    if (new_state) {
      this._settings.saveUserSetting('favourite_menu_items', [...fav_list, item.id]);
    } else {
      this._settings.saveUserSetting('favourite_menu_items', fav_list.filter(_ => _ !== item.id));
    }
  }
  static #_ = this.ɵfac = function NewCateringOrderModalComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || NewCateringOrderModalComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵdirectiveInject"](_placeos_common__WEBPACK_IMPORTED_MODULE_0__.SettingsService), _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵdirectiveInject"](_catering_order_state_service__WEBPACK_IMPORTED_MODULE_3__.CateringOrderStateService), _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵdirectiveInject"](_placeos_organisation__WEBPACK_IMPORTED_MODULE_1__.OrganisationService), _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵdirectiveInject"](_angular_material_dialog__WEBPACK_IMPORTED_MODULE_9__.MAT_DIALOG_DATA));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵdefineComponent"]({
    type: NewCateringOrderModalComponent,
    selectors: [["new-catering-order-modal"]],
    decls: 32,
    vars: 28,
    consts: () => {
      let i18n_0;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_2076287131803615740$$LIBS_CATERING_SRC_LIB_CATERING_ORDER_MODAL_NEW_CATERING_ORDER_MODAL_COMPONENT_TS_0 = goog.getMsg("Add Catering");
        i18n_0 = MSG_EXTERNAL_2076287131803615740$$LIBS_CATERING_SRC_LIB_CATERING_ORDER_MODAL_NEW_CATERING_ORDER_MODAL_COMPONENT_TS_0;
      } else {
        i18n_0 = $localize`:␟737cdc02079fb61b2944ecf62f908ab35efb2d5a␟2076287131803615740:Add Catering`;
      }
      let i18n_1;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_8443571736703532556$$LIBS_CATERING_SRC_LIB_CATERING_ORDER_MODAL_NEW_CATERING_ORDER_MODAL_COMPONENT_TS_1 = goog.getMsg(" View List ");
        i18n_1 = MSG_EXTERNAL_8443571736703532556$$LIBS_CATERING_SRC_LIB_CATERING_ORDER_MODAL_NEW_CATERING_ORDER_MODAL_COMPONENT_TS_1;
      } else {
        i18n_1 = $localize`:␟30d3439b0e0095fe69503245f3bd7a2e9498be7c␟8443571736703532556: View List `;
      }
      let i18n_2;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_819716823718458903$$LIBS_CATERING_SRC_LIB_CATERING_ORDER_MODAL_NEW_CATERING_ORDER_MODAL_COMPONENT_TS_2 = goog.getMsg("Back to form");
        i18n_2 = MSG_EXTERNAL_819716823718458903$$LIBS_CATERING_SRC_LIB_CATERING_ORDER_MODAL_NEW_CATERING_ORDER_MODAL_COMPONENT_TS_2;
      } else {
        i18n_2 = $localize`:␟18843b85d1a4f17fefafd07bc5cde636dca44295␟819716823718458903:Back to form`;
      }
      let i18n_3;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_4024487187516268099$$LIBS_CATERING_SRC_LIB_CATERING_ORDER_MODAL_NEW_CATERING_ORDER_MODAL_COMPONENT_TS_3 = goog.getMsg(" {$interpolation} items(s) added ", {
          "interpolation": "\uFFFD0\uFFFD"
        }, {
          original_code: {
            "interpolation": "{{ count }}"
          }
        });
        i18n_3 = MSG_EXTERNAL_4024487187516268099$$LIBS_CATERING_SRC_LIB_CATERING_ORDER_MODAL_NEW_CATERING_ORDER_MODAL_COMPONENT_TS_3;
      } else {
        i18n_3 = $localize`:␟523976668707aada89243171aa2abc1402656c5b␟4024487187516268099: ${"\uFFFD0\uFFFD"}:INTERPOLATION: items(s) added `;
      }
      let i18n_4;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_874721418273731876$$LIBS_CATERING_SRC_LIB_CATERING_ORDER_MODAL_NEW_CATERING_ORDER_MODAL_COMPONENT_TS_4 = goog.getMsg(" Back ");
        i18n_4 = MSG_EXTERNAL_874721418273731876$$LIBS_CATERING_SRC_LIB_CATERING_ORDER_MODAL_NEW_CATERING_ORDER_MODAL_COMPONENT_TS_4;
      } else {
        i18n_4 = $localize`:␟ccda1d41ca79703a85a3a598c1d97e040a32b766␟874721418273731876: Back `;
      }
      return [i18n_0, i18n_1, i18n_2, i18n_3, i18n_4, [1, "w-[100vw]", "h-[100vh]", "sm:relative", "sm:w-auto", "sm:h-auto", "flex", "flex-col", "bg-base-100"], [1, "flex", "items-center", "space-x-4", "w-full"], ["icon", "", "matRipple", "", 1, "bg-neutral", 3, "mat-dialog-close"], [1, "flex-1", "flex", "items-center", "divide-x", "divide-base-200", "min-h-[65vh]", "h-[65vh]", "sm:max-h-[65vh]", "sm:max-w-[95vw]", "w-full", "overflow-hidden"], [1, "h-full", "hidden", "sm:block", "sm:max-w-[12rem]", "sm:h-[65vh]", "sm:max-h-full", 3, "at_timeChange", "offsetChange", "offset_dayChange", "at_time", "offset", "offset_day"], [1, "flex", "flex-col", "items-center", "flex-1", "w-1/2", "h-full", "sm:h-[65vh]"], [1, "w-full", "border-b", "border-base-200", 3, "search"], [1, "flex-1", "h-1/2", "w-full", "overflow-hidden", 3, "toggleFav", "onSelect", "active", "selected", "selected_items", "favorites"], [1, "h-full", "w-full", "sm:h-[65vh]", "absolute", "sm:relative", "sm:flex", "sm:max-w-[16rem]", "z-20", "bg-base-100", 3, "activeChange", "toggleFav", "close", "item", "active", "code", "fav"], [1, "flex", "sm:hidden", "flex-col-reverse", "items-center", "justify-end", "px-2", "pt-2", "pb-[5.5rem]", "border-t", "border-base-200", "w-full"], ["btn", "", "matRipple", "", "name", "catering-item-return", "class", "inverse sm:hidden w-full sm:w-auto", 3, "click", 4, "ngIf"], ["btn", "", "matRipple", "", "name", "save-catering-item", 1, "w-full", "sm:w-auto", "sm:mb-0", 3, "mat-dialog-close"], [1, "hidden", "sm:flex", "items-center", "justify-between", "p-2", "border-t", "border-base-200", "w-full"], ["btn", "", "matRipple", "", "name", "catering-item-return", 1, "clear", "text-secondary", 3, "mat-dialog-close"], [1, "flex", "items-center"], [1, "text-xl"], [1, "mr-1", "underline"], [1, "opacity-60", "text-sm"], ["btn", "", "matRipple", "", "name", "toggle-catering-item", 3, "click", "disabled"], [1, "mr-1"], ["btn", "", "matRipple", "", "name", "catering-item-return", 1, "inverse", "sm:hidden", "w-full", "sm:w-auto", 3, "click"]];
    },
    template: function NewCateringOrderModalComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](0, "div", 5)(1, "header", 6)(2, "button", 7)(3, "app-icon");
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](4, "close");
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](5, "h3");
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵi18n"](6, 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](7, "main", 8)(8, "catering-item-filters", 9);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtwoWayListener"]("at_timeChange", function NewCateringOrderModalComponent_Template_catering_item_filters_at_timeChange_8_listener($event) {
          _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtwoWayBindingSet"](ctx.exact_time, $event) || (ctx.exact_time = $event);
          return $event;
        })("offsetChange", function NewCateringOrderModalComponent_Template_catering_item_filters_offsetChange_8_listener($event) {
          _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtwoWayBindingSet"](ctx.offset, $event) || (ctx.offset = $event);
          return $event;
        })("offset_dayChange", function NewCateringOrderModalComponent_Template_catering_item_filters_offset_dayChange_8_listener($event) {
          _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtwoWayBindingSet"](ctx.offset_day, $event) || (ctx.offset_day = $event);
          return $event;
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](9, "div", 10);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelement"](10, "catering-item-filters", 11);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](11, "catering-item-list", 12);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵlistener"]("toggleFav", function NewCateringOrderModalComponent_Template_catering_item_list_toggleFav_11_listener($event) {
          return ctx.toggleFavourite($event);
        })("onSelect", function NewCateringOrderModalComponent_Template_catering_item_list_onSelect_11_listener($event) {
          return ctx.displayed = $event;
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](12, "catering-item-details", 13);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵlistener"]("activeChange", function NewCateringOrderModalComponent_Template_catering_item_details_activeChange_12_listener($event) {
          return ctx.setSelected(ctx.displayed, $event);
        })("toggleFav", function NewCateringOrderModalComponent_Template_catering_item_details_toggleFav_12_listener() {
          return ctx.toggleFavourite(ctx.displayed);
        })("close", function NewCateringOrderModalComponent_Template_catering_item_details_close_12_listener() {
          return ctx.displayed = null;
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](13, "footer", 14);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtemplate"](14, NewCateringOrderModalComponent_button_14_Template, 2, 0, "button", 15);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](15, "button", 16);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵi18n"](16, 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](17, "footer", 17)(18, "button", 18)(19, "div", 19)(20, "app-icon", 20);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](21, "arrow_back");
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](22, "div", 21);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵi18n"](23, 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]()()();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](24, "p", 22);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵi18n"](25, 3);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](26, "button", 23);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵlistener"]("click", function NewCateringOrderModalComponent_Template_button_click_26_listener() {
          return ctx.setSelected(ctx.displayed, !ctx.isSelected(ctx.displayed == null ? null : ctx.displayed.custom_id));
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](27, "div", 19)(28, "app-icon", 20);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](29);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementStart"](30, "div", 24);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtext"](31);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵelementEnd"]()()()()();
      }
      if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("mat-dialog-close", ctx.selected);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](6);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtwoWayProperty"]("at_time", ctx.exact_time)("offset", ctx.offset)("offset_day", ctx.offset_day);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("search", true);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("active", ctx.displayed == null ? null : ctx.displayed.custom_id)("selected", ctx.selected_ids)("selected_items", ctx.selected)("favorites", ctx.favorites);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵclassProp"]("hidden", !ctx.displayed)("inset-0", ctx.displayed);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("item", ctx.displayed)("active", ctx.selected_ids.includes((ctx.displayed == null ? null : ctx.displayed.custom_id) || ""))("code", ctx.code)("fav", !!ctx.displayed && ctx.favorites.includes((ctx.displayed == null ? null : ctx.displayed.id) || ""));
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("ngIf", ctx.displayed);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵclassProp"]("mb-2", ctx.displayed);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("mat-dialog-close", ctx.selected);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("mat-dialog-close", ctx.selected);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](7);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵi18nExp"](ctx.count);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵi18nApply"](25);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵclassProp"]("inverse", ctx.isSelected(ctx.displayed == null ? null : ctx.displayed.custom_id));
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵproperty"]("disabled", !ctx.displayed);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtextInterpolate"](ctx.isSelected(ctx.displayed == null ? null : ctx.displayed.custom_id) ? "remove" : "add");
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵtextInterpolate1"](" ", ctx.isSelected(ctx.displayed == null ? null : ctx.displayed.custom_id) ? "Remove from Booking" : "Add to booking", " ");
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_10__.NgIf, _angular_material_dialog__WEBPACK_IMPORTED_MODULE_9__.MatDialogClose, _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_4__.IconComponent, _angular_material_core__WEBPACK_IMPORTED_MODULE_11__.MatRipple, _catering_item_list_component__WEBPACK_IMPORTED_MODULE_5__.CateringItemListComponent, _catering_item_details_component__WEBPACK_IMPORTED_MODULE_6__.CateringItemDetailsComponent, _catering_item_filters_component__WEBPACK_IMPORTED_MODULE_7__.CateringItemFiltersComponent]
  });
}

/***/ }),

/***/ 17707:
/*!*************************************************************************!*\
  !*** ./libs/catering/src/lib/catering-order-options-modal.component.ts ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CateringOrderOptionsModalComponent: () => (/* binding */ CateringOrderOptionsModalComponent)
/* harmony export */ });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_material_dialog__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/material/dialog */ 12587);
/* harmony import */ var libs_common_src_lib_general__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! libs/common/src/lib/general */ 64217);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _angular_material_checkbox__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/material/checkbox */ 97024);
/* harmony import */ var _angular_material_radio__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @angular/material/radio */ 53804);
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @angular/forms */ 34456);
/* harmony import */ var _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../components/src/lib/icon.component */ 69434);
/* harmony import */ var _angular_material_core__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @angular/material/core */ 74646);











function CateringOrderOptionsModalComponent_div_7_ng_container_4_mat_radio_button_5_div_4_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](0, "div", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipe"](2, "currency");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const opt_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"]().$implicit;
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtextInterpolate1"](" +", _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipeBind2"](2, 1, opt_r4.unit_price / 100, ctx_r2.code), " ");
  }
}
function CateringOrderOptionsModalComponent_div_7_ng_container_4_mat_radio_button_5_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](0, "mat-radio-button", 14)(1, "div", 15)(2, "div", 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](4, CateringOrderOptionsModalComponent_div_7_ng_container_4_mat_radio_button_5_div_4_Template, 3, 4, "div", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const opt_r4 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("value", opt_r4.id);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtextInterpolate1"](" ", opt_r4.name, " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngIf", opt_r4.unit_price);
  }
}
function CateringOrderOptionsModalComponent_div_7_ng_container_4_Template(rf, ctx) {
  if (rf & 1) {
    const _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](1, "mat-radio-group", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵlistener"]("ngModelChange", function CateringOrderOptionsModalComponent_div_7_ng_container_4_Template_mat_radio_group_ngModelChange_1_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵrestoreView"](_r1);
      const group_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"]().$implicit;
      const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵresetView"](ctx_r2.updateGroupOption(group_r2, $event));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](2, "mat-radio-button", 11)(3, "span", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](4, "None");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](5, CateringOrderOptionsModalComponent_div_7_ng_container_4_mat_radio_button_5_Template, 5, 3, "mat-radio-button", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementContainerEnd"]();
  }
  if (rf & 2) {
    const group_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"]().$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngForOf", group_r2 == null ? null : group_r2.options);
  }
}
function CateringOrderOptionsModalComponent_div_7_ng_template_5_mat_checkbox_0_div_4_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](0, "div", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipe"](2, "currency");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const opt_r6 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"]().$implicit;
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtextInterpolate1"](" +", _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipeBind2"](2, 1, opt_r6.unit_price / 100, ctx_r2.code), " ");
  }
}
function CateringOrderOptionsModalComponent_div_7_ng_template_5_mat_checkbox_0_Template(rf, ctx) {
  if (rf & 1) {
    const _r5 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](0, "mat-checkbox", 20);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtwoWayListener"]("ngModelChange", function CateringOrderOptionsModalComponent_div_7_ng_template_5_mat_checkbox_0_Template_mat_checkbox_ngModelChange_0_listener($event) {
      const opt_r6 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵrestoreView"](_r5).$implicit;
      const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"](3);
      _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtwoWayBindingSet"](ctx_r2.option_state[opt_r6.id], $event) || (ctx_r2.option_state[opt_r6.id] = $event);
      return _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵresetView"]($event);
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](1, "div", 15)(2, "div", 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](4, CateringOrderOptionsModalComponent_div_7_ng_template_5_mat_checkbox_0_div_4_Template, 3, 4, "div", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const opt_r6 = ctx.$implicit;
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtwoWayProperty"]("ngModel", ctx_r2.option_state[opt_r6.id]);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtextInterpolate1"](" ", opt_r6.name, " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngIf", opt_r6.unit_price);
  }
}
function CateringOrderOptionsModalComponent_div_7_ng_template_5_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](0, CateringOrderOptionsModalComponent_div_7_ng_template_5_mat_checkbox_0_Template, 5, 3, "mat-checkbox", 19);
  }
  if (rf & 2) {
    const group_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"]().$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngForOf", group_r2 == null ? null : group_r2.options);
  }
}
function CateringOrderOptionsModalComponent_div_7_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](0, "div", 6)(1, "div", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](3, "div", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](4, CateringOrderOptionsModalComponent_div_7_ng_container_4_Template, 6, 1, "ng-container", 9)(5, CateringOrderOptionsModalComponent_div_7_ng_template_5_Template, 1, 1, "ng-template", null, 0, _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplateRefExtractor"]);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const group_r2 = ctx.$implicit;
    const multi_options_r7 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵreference"](6);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵattribute"]("group", group_r2.name);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtextInterpolate"](group_r2.name);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngIf", !group_r2.multiple)("ngIfElse", multi_options_r7);
  }
}
class CateringOrderOptionsModalComponent {
  constructor(_data) {
    this._data = _data;
    /** Emitter for events on the modal */
    this.event = new _angular_core__WEBPACK_IMPORTED_MODULE_2__.EventEmitter();
    /** Mapping of options to their active state */
    this.option_state = {};
    this.code = this._data.code;
    const groups = (0,libs_common_src_lib_general__WEBPACK_IMPORTED_MODULE_0__.unique)(this._data.options.map(i => i.group || 'Other'));
    const group_list = [];
    for (const group of groups) {
      const options = this._data.options.filter(i => i.group === group);
      group_list.push({
        name: group,
        multiple: !!options.find(i => i.multiple),
        options
      });
    }
    this.groups = group_list;
  }
  updateGroupOption(group, id) {
    for (const option of group.options) {
      this.option_state[option.id] = option.id === id;
    }
  }
  saveOptions() {
    const options = this._data.options.filter(opt => this.option_state[opt.id]);
    this.event.emit({
      reason: 'done',
      metadata: {
        options
      }
    });
  }
  static #_ = this.ɵfac = function CateringOrderOptionsModalComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || CateringOrderOptionsModalComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdirectiveInject"](_angular_material_dialog__WEBPACK_IMPORTED_MODULE_3__.MAT_DIALOG_DATA));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdefineComponent"]({
    type: CateringOrderOptionsModalComponent,
    selectors: [["app-catering-options-modal"]],
    outputs: {
      event: "event"
    },
    decls: 11,
    vars: 1,
    consts: [["multi_options", ""], ["icon", "", "mat-dialog-close", ""], [1, "overflow-auto"], ["class", "pt-1 pb-2 border-b border-base-200", 4, "ngFor", "ngForOf"], [1, "p-2"], ["btn", "", "matRipple", "", 1, "w-32", 3, "click"], [1, "pt-1", "pb-2", "border-b", "border-base-200"], [1, "font-medium", "p-2", "capitalize"], [1, "flex", "flex-col", "pl-6"], [4, "ngIf", "ngIfElse"], ["aria-label", "Select an option", "ngModel", "", 1, "flex", "flex-col", 3, "ngModelChange"], ["value", "", 1, "my-1", "mx-0"], [1, "font-medium", "p-2"], ["class", "my-1 mx-0", 3, "value", 4, "ngFor", "ngForOf"], [1, "my-1", "mx-0", 3, "value"], [1, "flex", "items-center", "justify-center"], [1, "font-medium", "p-2", "flex-1", "w-1/2"], ["class", "opacity-60 text-xs", 4, "ngIf"], [1, "opacity-60", "text-xs"], [3, "ngModel", "ngModelChange", 4, "ngFor", "ngForOf"], [3, "ngModelChange", "ngModel"]],
    template: function CateringOrderOptionsModalComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](0, "header")(1, "h3");
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](2, "Select options");
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](3, "button", 1)(4, "app-icon");
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](5, "close");
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]()()();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](6, "main", 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](7, CateringOrderOptionsModalComponent_div_7_Template, 7, 4, "div", 3);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](8, "footer", 4)(9, "button", 5);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵlistener"]("click", function CateringOrderOptionsModalComponent_Template_button_click_9_listener() {
          return ctx.saveOptions();
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](10, " Save ");
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]()();
      }
      if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](7);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngForOf", ctx.groups);
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_4__.NgForOf, _angular_common__WEBPACK_IMPORTED_MODULE_4__.NgIf, _angular_material_dialog__WEBPACK_IMPORTED_MODULE_3__.MatDialogClose, _angular_material_checkbox__WEBPACK_IMPORTED_MODULE_5__.MatCheckbox, _angular_material_radio__WEBPACK_IMPORTED_MODULE_6__.MatRadioGroup, _angular_material_radio__WEBPACK_IMPORTED_MODULE_6__.MatRadioButton, _angular_forms__WEBPACK_IMPORTED_MODULE_7__.NgControlStatus, _angular_forms__WEBPACK_IMPORTED_MODULE_7__.NgModel, _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_1__.IconComponent, _angular_material_core__WEBPACK_IMPORTED_MODULE_8__.MatRipple, _angular_common__WEBPACK_IMPORTED_MODULE_4__.CurrencyPipe],
    styles: ["main[_ngcontent-%COMP%] {\n                min-height: 24em;\n                width: 24rem;\n                max-width: calc(100vw - 2rem);\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNhdGVyaW5nLW9yZGVyLW9wdGlvbnMtbW9kYWwuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxnQkFBZ0I7Z0JBQ2hCLFlBQVk7Z0JBQ1osNkJBQTZCO1lBQ2pDIiwiZmlsZSI6ImNhdGVyaW5nLW9yZGVyLW9wdGlvbnMtbW9kYWwuY29tcG9uZW50LnRzIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICBtYWluIHtcbiAgICAgICAgICAgICAgICBtaW4taGVpZ2h0OiAyNGVtO1xuICAgICAgICAgICAgICAgIHdpZHRoOiAyNHJlbTtcbiAgICAgICAgICAgICAgICBtYXgtd2lkdGg6IGNhbGMoMTAwdncgLSAycmVtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl19 */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvY2F0ZXJpbmcvc3JjL2xpYi9jYXRlcmluZy1vcmRlci1vcHRpb25zLW1vZGFsLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1lBQ1k7Z0JBQ0ksZ0JBQWdCO2dCQUNoQixZQUFZO2dCQUNaLDZCQUE2QjtZQUNqQzs7QUFFWix3aUJBQXdpQiIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgbWFpbiB7XG4gICAgICAgICAgICAgICAgbWluLWhlaWdodDogMjRlbTtcbiAgICAgICAgICAgICAgICB3aWR0aDogMjRyZW07XG4gICAgICAgICAgICAgICAgbWF4LXdpZHRoOiBjYWxjKDEwMHZ3IC0gMnJlbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICJdLCJzb3VyY2VSb290IjoiIn0= */"]
  });
}

/***/ }),

/***/ 75555:
/*!*******************************************************!*\
  !*** ./libs/catering/src/lib/catering-order.class.ts ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CateringOrder: () => (/* binding */ CateringOrder)
/* harmony export */ });
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var _catering_item_class__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./catering-item.class */ 25892);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! date-fns */ 77177);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! date-fns */ 28797);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! date-fns */ 33240);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! date-fns */ 49675);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! date-fns */ 23206);



function deliverAtTime(order) {
  let date = order.event?.date || order._time;
  if (order.deliver_time) {
    date = (0,date_fns__WEBPACK_IMPORTED_MODULE_2__.set)(date, {
      hours: Math.floor(order.deliver_time),
      minutes: order.deliver_time % 1 * 60
    }).valueOf();
  }
  if (order.deliver_day_offset > 0 || order.event?.all_day) {
    date = (0,date_fns__WEBPACK_IMPORTED_MODULE_3__.addDays)((0,date_fns__WEBPACK_IMPORTED_MODULE_4__.startOfDay)(date), order.deliver_day_offset).valueOf();
  }
  return (0,date_fns__WEBPACK_IMPORTED_MODULE_5__.addMinutes)(date, order.deliver_offset).valueOf();
}
class CateringOrder {
  get deliver_at() {
    return deliverAtTime(this);
  }
  get status() {
    return this._status;
  }
  set status(value) {
    this._status = value;
    this[`${this.event_id}_status`] = value;
  }
  constructor(data = {}) {
    this._time = (0,date_fns__WEBPACK_IMPORTED_MODULE_6__.startOfMinute)(Date.now()).valueOf();
    this.id = data.id || `order-${(0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.randomInt)(9_999_999, 1_000_000)}`;
    this.system_id = data.system_id || '';
    this.event_id = data.event_id || data.event?.id || '';
    this.items = (data.items || []).map(i => i instanceof _catering_item_class__WEBPACK_IMPORTED_MODULE_1__.CateringItem ? i : new _catering_item_class__WEBPACK_IMPORTED_MODULE_1__.CateringItem(i));
    this.item_count = this.items.reduce((amount, item) => amount + item.quantity, 0);
    this.total_cost = this.items.reduce((amount, item) => amount + (item.total_cost || 0), 0);
    this.charge_code = data.charge_code || '';
    this.status = data[`${this.event_id}_status`] || data.status || 'accepted';
    this.invoice_number = data.invoice_number || '';
    this.event = data.event || null;
    this.notes = data.notes || '';
    this.deliver_time = data.deliver_time || undefined;
    this.deliver_offset = data.deliver_offset || 0;
    this.deliver_day_offset = data.deliver_day_offset || 0;
    this.deliver_at_time = deliverAtTime(this);
  }
}

/***/ }),

/***/ 98197:
/*!**********************************************************!*\
  !*** ./libs/catering/src/lib/catering-orders.service.ts ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CateringOrdersService: () => (/* binding */ CateringOrdersService)
/* harmony export */ });
/* harmony import */ var _home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 89204);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! rxjs */ 90521);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! rxjs */ 68824);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! rxjs */ 71536);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! rxjs/operators */ 19803);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! rxjs/operators */ 71963);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! rxjs/operators */ 29314);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! rxjs/operators */ 35443);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! rxjs/operators */ 66000);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! rxjs/operators */ 7841);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! date-fns */ 99908);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! date-fns */ 33240);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! date-fns */ 56441);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! date-fns */ 45726);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var libs_events_src_lib_events_fn__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! libs/events/src/lib/events.fn */ 51416);
/* harmony import */ var libs_events_src_lib_event_class__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! libs/events/src/lib/event.class */ 6727);
/* harmony import */ var _catering_order_class__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./catering-order.class */ 75555);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @angular/core */ 37580);









function checkOrder(order, filters) {
  const s = (filters.search || '').toLowerCase();
  return !!order.items.find(item => item.name.toLowerCase().includes(s) || !!item.options.find(option => option.name.toLowerCase().includes(s)));
}
class CateringOrdersService extends _placeos_common__WEBPACK_IMPORTED_MODULE_1__.AsyncHandler {
  /** Order filters */
  get filters() {
    return this._filters.getValue();
  }
  /** Order filters */
  set filters(filters) {
    this._filters.next(filters);
  }
  constructor() {
    super();
    this._poll = new rxjs__WEBPACK_IMPORTED_MODULE_5__.BehaviorSubject(0);
    this._loading = new rxjs__WEBPACK_IMPORTED_MODULE_5__.BehaviorSubject(false);
    this._filters = new rxjs__WEBPACK_IMPORTED_MODULE_5__.BehaviorSubject({});
    /** Observable for list of orders */
    this.orders = (0,rxjs__WEBPACK_IMPORTED_MODULE_6__.combineLatest)([this._filters, this._poll]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.debounceTime)(1000), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.switchMap)(([{
      date,
      zones
    }]) => {
      this._loading.next(true);
      const start = (0,date_fns__WEBPACK_IMPORTED_MODULE_9__.getUnixTime)((0,date_fns__WEBPACK_IMPORTED_MODULE_10__.startOfDay)(date || Date.now()));
      const end = (0,date_fns__WEBPACK_IMPORTED_MODULE_9__.getUnixTime)((0,date_fns__WEBPACK_IMPORTED_MODULE_11__.endOfDay)(date || Date.now()));
      return (0,libs_events_src_lib_events_fn__WEBPACK_IMPORTED_MODULE_2__.queryEvents)({
        zone_ids: (zones || []).join(','),
        period_start: start,
        period_end: end
      }).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.catchError)(() => (0,rxjs__WEBPACK_IMPORTED_MODULE_13__.of)([])), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_14__.map)(events => (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.flatten)(events.map(event => event.valid_catering.map(o => new _catering_order_class__WEBPACK_IMPORTED_MODULE_4__.CateringOrder({
        ...o,
        event
      }))))), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_14__.map)(orders => orders.filter(o => (0,date_fns__WEBPACK_IMPORTED_MODULE_15__.format)(o.deliver_at, 'yyyy-MM-dd') === (0,date_fns__WEBPACK_IMPORTED_MODULE_15__.format)(start * 1000, 'yyyy-MM-dd'))));
    }), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_16__.tap)(() => this._loading.next(false)), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_17__.shareReplay)(1));
    /** Observable for loading status of orders */
    this.loading = this._loading.asObservable();
    /** Filtered list of catering orders */
    this.filtered = this.orders.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_14__.map)(list => list.filter(order => checkOrder(order, this._filters.getValue())).sort((a, b) => a.deliver_at - b.deliver_at)));
    this.subscription('changes', this.orders.subscribe());
  }
  /** Start polling for catering orders */
  startPolling(delay = 15 * 1000) {
    this.interval('polling', () => this._poll.next(new Date().valueOf()), delay);
  }
  /** Stop polling for new catering orders */
  stopPolling() {
    this.clearInterval('polling');
  }
  /**
   * Update the status of the order
   * @param order Order to update
   * @param status New order status
   */
  updateStatus(order, status) {
    var _this = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      order.status = status;
      const updated_order = new _catering_order_class__WEBPACK_IMPORTED_MODULE_4__.CateringOrder({
        ...order,
        status,
        event: null
      });
      const catering = [...(order.event.extension_data.catering || []).filter(o => o.id !== order.id), updated_order].map(i => new _catering_order_class__WEBPACK_IMPORTED_MODULE_4__.CateringOrder({
        ...i
      }));
      const event = new libs_events_src_lib_event_class__WEBPACK_IMPORTED_MODULE_3__.CalendarEvent({
        ...order.event,
        catering
      });
      const system_id = event?.resources[0]?.id || event?.system?.id;
      const booking = yield (0,libs_events_src_lib_events_fn__WEBPACK_IMPORTED_MODULE_2__.updateEventMetadata)(event.id, system_id, event.extension_data).toPromise();
      _this.timeout('refresh-list', () => _this._poll.next(Date.now()), 1000);
      order.status = status;
      return booking;
    })();
  }
  static #_ = this.ɵfac = function CateringOrdersService_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || CateringOrdersService)();
  };
  static #_2 = this.ɵprov = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵdefineInjectable"]({
    token: CateringOrdersService,
    factory: CateringOrdersService.ɵfac,
    providedIn: 'root'
  });
}

/***/ }),

/***/ 52201:
/*!*********************************************************!*\
  !*** ./libs/catering/src/lib/catering-state.service.ts ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CateringStateService: () => (/* binding */ CateringStateService)
/* harmony export */ });
/* harmony import */ var _home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 89204);
/* harmony import */ var _placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @placeos/ts-client */ 35713);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! rxjs */ 90521);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! rxjs */ 68824);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! rxjs */ 71536);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! rxjs/operators */ 8627);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! rxjs/operators */ 71963);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! rxjs/operators */ 29314);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! rxjs/operators */ 35443);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! rxjs/operators */ 66000);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! rxjs/operators */ 7841);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! rxjs/operators */ 57871);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! rxjs/operators */ 33602);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var _placeos_organisation__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @placeos/organisation */ 2510);
/* harmony import */ var _catering_item_modal_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./catering-item-modal.component */ 30807);
/* harmony import */ var _catering_option_modal_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./catering-option-modal.component */ 37053);
/* harmony import */ var _placeos_components__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @placeos/components */ 51588);
/* harmony import */ var _catering_item_class__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./catering-item.class */ 25892);
/* harmony import */ var _catering_order_class__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./catering-order.class */ 75555);
/* harmony import */ var _catering_order_modal_component__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./catering-order-modal.component */ 82912);
/* harmony import */ var _catering_order_options_modal_component__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./catering-order-options-modal.component */ 17707);
/* harmony import */ var _catering_import_menu_modal_component__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./catering-import-menu-modal.component */ 76095);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_material_dialog__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! @angular/material/dialog */ 12587);



















class CateringStateService extends _placeos_common__WEBPACK_IMPORTED_MODULE_2__.AsyncHandler {
  get is_editable() {
    return !this.zone || this.zone === this._org.building?.id;
  }
  get categories() {
    const menu = this._menu.getValue();
    return (0,_placeos_common__WEBPACK_IMPORTED_MODULE_2__.unique)(menu.map(i => i.category));
  }
  constructor(_org, _dialog, _settings) {
    var _this;
    super();
    _this = this;
    this._org = _org;
    this._dialog = _dialog;
    this._settings = _settings;
    this._updated = new rxjs__WEBPACK_IMPORTED_MODULE_12__.BehaviorSubject(0);
    /** Active menu */
    this._menu = new rxjs__WEBPACK_IMPORTED_MODULE_12__.BehaviorSubject([]);
    /** Whether the menu for the active building is loading */
    this._loading = new rxjs__WEBPACK_IMPORTED_MODULE_12__.BehaviorSubject(false);
    /** Currency code for the active building */
    this._currency = new rxjs__WEBPACK_IMPORTED_MODULE_12__.BehaviorSubject('USD');
    this._change = new rxjs__WEBPACK_IMPORTED_MODULE_12__.BehaviorSubject(0);
    /** Observable for the active menu */
    this.menu = this._menu.asObservable();
    /** Observable for whether the menu for the active building is loadingg */
    this.loading = this._loading.asObservable();
    /** Observable for the currency code of the active building */
    this.currency = this._currency.asObservable();
    this.settings = (0,rxjs__WEBPACK_IMPORTED_MODULE_13__.combineLatest)([this._org.active_building, this._change]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_14__.filter)(([_]) => !!_), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_15__.switchMap)(([_]) => (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.showMetadata)(_.id, 'catering-settings').pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_16__.catchError)(_ => (0,rxjs__WEBPACK_IMPORTED_MODULE_17__.of)({})))), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_18__.map)(_ => _.details || {}), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_19__.tap)(_ => this._settings.post('require_catering_notes', !!_?.require_notes)), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_20__.shareReplay)(1));
    this.charge_codes = this.settings.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_18__.map)(_ => _.charge_codes || []));
    this.availability = this.settings.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_18__.map)(_ => _.disabled_rooms || []));
    this.zone = '';
    this.subscription('building', this._org.active_building.subscribe( /*#__PURE__*/function () {
      var _ref = (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* (bld) {
        if (bld) {
          const menu = (yield _this.getCateringForZone(bld.id)).map(i => new _catering_item_class__WEBPACK_IMPORTED_MODULE_7__.CateringItem(i));
          _this._currency.next(_this._settings.get('app.currency') || bld.currency || 'USD');
          _this._menu.next(menu);
        }
      });
      return function (_x) {
        return _ref.apply(this, arguments);
      };
    }()));
  }
  /**
   * Create/Edit catering order
   * @param order Order to manipulate
   */
  manageCateringOrder(order) {
    var _this2 = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      const ref = _this2._dialog.open(_catering_order_modal_component__WEBPACK_IMPORTED_MODULE_9__.CateringOrderModalComponent, {
        data: {
          code: _this2._currency.getValue(),
          order,
          menu: _this2.menu,
          loading: _this2.loading,
          getCateringConfig: _ => _this2.getCateringConfig(_),
          selectOptions: _ => _this2.selectOptions(_)
        }
      });
      const details = yield Promise.race([ref.componentInstance.event.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_21__.first)(_ => _.reason === 'done')).toPromise(), ref.afterClosed().toPromise()]);
      ref.close();
      return details?.metadata?.order || order;
    })();
  }
  addItem(item = new _catering_item_class__WEBPACK_IMPORTED_MODULE_7__.CateringItem()) {
    var _this3 = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      const ref = _this3._dialog.open(_catering_item_modal_component__WEBPACK_IMPORTED_MODULE_4__.CateringItemModalComponent, {
        data: {
          item,
          categories: _this3.categories
        }
      });
      const details = yield Promise.race([ref.componentInstance.event.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_21__.first)(_ => _.reason === 'done')).toPromise(), ref.afterClosed().toPromise()]);
      if (details?.reason !== 'done') return;
      const menu = _this3._menu.getValue();
      const index = menu.findIndex(itm => itm.id === item.id);
      if (index >= 0) {
        menu.splice(index, 1, details.metadata.item);
      } else {
        menu.push(details.metadata.item);
      }
      _this3.updateMenu(_this3._org.building.id, menu).then(() => {
        _this3._menu.next([...menu]);
        ref.close();
      }, () => ref.componentInstance.loading = false);
    })();
  }
  updateItem(item) {
    const menu = this._menu.getValue();
    const index = menu.findIndex(itm => itm.id === item.id);
    if (index >= 0) menu.splice(index, 1, item);else menu.push(item);
    this.updateMenu(this._org.building.id, menu).then(() => this._menu.next([...menu]));
  }
  addOption(item, option = {}) {
    var _this4 = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      const types = (0,_placeos_common__WEBPACK_IMPORTED_MODULE_2__.unique)(item.options.map(i => i.group));
      const ref = _this4._dialog.open(_catering_option_modal_component__WEBPACK_IMPORTED_MODULE_5__.CateringItemOptionModalComponent, {
        data: {
          parent: item,
          option,
          types
        }
      });
      const details = yield Promise.race([ref.componentInstance.event.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_21__.first)(_ => _.reason === 'done')).toPromise(), ref.afterClosed().toPromise()]);
      if (details?.reason !== 'done') return;
      const menu = _this4._menu.getValue();
      const index = menu.findIndex(itm => itm.id === item.id);
      if (index >= 0) {
        menu.splice(index, 1, details.metadata.item);
      } else {
        menu.push(details.metadata.item);
      }
      _this4.updateMenu(_this4._org.building.id, menu).then(() => {
        _this4._menu.next([...menu]);
        ref.close();
      }, () => ref.componentInstance.loading = false);
    })();
  }
  selectOptions(options) {
    var _this5 = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      const ref = _this5._dialog.open(_catering_order_options_modal_component__WEBPACK_IMPORTED_MODULE_10__.CateringOrderOptionsModalComponent, {
        data: {
          code: _this5._currency.getValue(),
          options
        }
      });
      const details = yield Promise.race([ref.componentInstance.event.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_21__.first)(_ => _.reason === 'done')).toPromise(), ref.afterClosed().toPromise()]);
      if (details?.reason !== 'done') return [];
      ref.close();
      return details.metadata.options;
    })();
  }
  deleteItem(item) {
    var _this6 = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      const details = yield (0,_placeos_common__WEBPACK_IMPORTED_MODULE_2__.openConfirmModal)({
        title: 'Delete Catering Item',
        content: `Are you sure you wish to remove the catering item ${item.name} from the menu?`,
        icon: {
          type: 'icon',
          class: 'material-icons',
          content: 'delete'
        }
      }, _this6._dialog);
      if (details.reason !== 'done') return;
      details.loading('Removing catering item...');
      const menu = _this6._menu.getValue().filter(itm => item.id !== itm.id);
      _this6.updateMenu(_this6._org.building.id, menu).then(() => {
        _this6._menu.next([...menu]);
        details.close();
      }, () => details.loading(''));
    })();
  }
  deleteOption(item, option) {
    var _this7 = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      const details = yield (0,_placeos_common__WEBPACK_IMPORTED_MODULE_2__.openConfirmModal)({
        title: 'Delete Catering Item Option',
        content: `Are you sure you wish to remove the catering option "${option.name}" from "${item.name}"?`,
        icon: {
          type: 'icon',
          class: 'material-icons',
          content: 'delete'
        }
      }, _this7._dialog);
      if (details.reason !== 'done') return;
      details.loading('Removing catering item option...');
      const menu = _this7._menu.getValue();
      menu.splice(menu.findIndex(itm => itm.id === item.id), 1, new _catering_item_class__WEBPACK_IMPORTED_MODULE_7__.CateringItem({
        ...item,
        options: item.options.filter(opt => opt.id !== option.id)
      }));
      _this7.updateMenu(_this7._org.building.id, menu).then(() => {
        _this7._menu.next([...menu]);
        details.close();
      }, () => details.loading(''));
    })();
  }
  editConfig() {
    var _this8 = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      const config = yield _this8.getCateringConfig(_this8._org.building.id);
      const {
        require_notes
      } = yield _this8.settings.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_22__.take)(1)).toPromise();
      const menu = _this8._menu.getValue();
      const types = (0,_placeos_common__WEBPACK_IMPORTED_MODULE_2__.unique)((0,_placeos_common__WEBPACK_IMPORTED_MODULE_2__.flatten)(menu.map(i => [i.category, ...i.tags])));
      const ref = _this8._dialog.open(_placeos_components__WEBPACK_IMPORTED_MODULE_6__.AttachedResourceConfigModalComponent, {
        data: {
          config,
          types,
          require_notes,
          saveNotes: b => _this8.saveSettings({
            require_notes: b
          })
        }
      });
      const details = yield Promise.race([ref.componentInstance.event.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_21__.first)(_ => _.reason === 'done')).toPromise(), ref.afterClosed().toPromise()]);
      if (details?.reason !== 'done') return;
      _this8.updateConfig(_this8._org.building.id, details.metadata).then(() => ref.close(), () => ref.componentInstance.loading = false);
    })();
  }
  importMenu() {
    var _this9 = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      const ref = _this9._dialog.open(_catering_import_menu_modal_component__WEBPACK_IMPORTED_MODULE_11__.CateringImportMenuModalComponent);
      const details = yield Promise.race([ref.componentInstance.event.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_21__.first)(_ => _.reason === 'done')).toPromise(), ref.afterClosed().toPromise()]);
      if (details?.reason !== 'done') return;
      ref.componentInstance.loading = 'Updating menu...';
      const menu = _this9._menu.getValue();
      const bld = _this9._org.building;
      const updated_menu = (0,_placeos_common__WEBPACK_IMPORTED_MODULE_2__.unique)(details.metadata.concat(menu), 'id');
      yield _this9.updateMenu(bld.id, updated_menu).catch(_ => {
        (0,_placeos_common__WEBPACK_IMPORTED_MODULE_2__.notifyError)('Error importing catering menu');
        ref.close();
        throw _;
      });
      (0,_placeos_common__WEBPACK_IMPORTED_MODULE_2__.notifySuccess)(`Successfully imported catering menu. ${details.metadata.length} item(s) added.`);
      ref.close();
    })();
  }
  updateMenu(zone_id, menu) {
    return (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.updateMetadata)(zone_id, {
      id: zone_id,
      name: 'catering',
      details: menu,
      description: `Catering menu for ${zone_id}`
    }).toPromise();
  }
  saveSettings(settings) {
    var _this10 = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      const old_settings = yield _this10.settings.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_22__.take)(1)).toPromise();
      const result = yield (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.updateMetadata)(_this10._org.building.id, {
        id: _this10._org.building.id,
        name: 'catering-settings',
        details: {
          ...old_settings,
          ...settings
        },
        description: `Catering settings for ${_this10._org.building.id}`
      }).toPromise();
      _this10._change.next(Date.now());
      return result;
    })();
  }
  getCateringForZone(zone_id) {
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      const menu = (yield (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.showMetadata)(zone_id, 'catering').toPromise()).details;
      return menu instanceof Array ? menu : [];
    })();
  }
  getCateringConfig(zone_id = this._org.building.id) {
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      const rules = (yield (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.showMetadata)(zone_id, 'catering_config').toPromise()).details;
      return rules instanceof Array ? rules : [];
    })();
  }
  updateConfig(zone_id, config) {
    return (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.updateMetadata)(zone_id, {
      id: zone_id,
      name: 'catering_config',
      details: config,
      description: `Catering menu config for ${zone_id}`
    }).toPromise();
  }
  addItemToOrder(order, new_item) {
    let items = order.items;
    const match = items.find(item => item.id === new_item.id && new_item.options?.length === item.options?.reduce((c, o) => c + (new_item.options.find(opt => o.id === opt.id) ? 1 : 0), 0));
    match ? match.quantity += 1 : items = items.concat([new _catering_item_class__WEBPACK_IMPORTED_MODULE_7__.CateringItem({
      ...new_item,
      quantity: 1
    })]);
    const new_order = new _catering_order_class__WEBPACK_IMPORTED_MODULE_8__.CateringOrder({
      ...order,
      items,
      event: null
    });
    return new_order;
  }
  static #_ = this.ɵfac = function CateringStateService_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || CateringStateService)(_angular_core__WEBPACK_IMPORTED_MODULE_23__["ɵɵinject"](_placeos_organisation__WEBPACK_IMPORTED_MODULE_3__.OrganisationService), _angular_core__WEBPACK_IMPORTED_MODULE_23__["ɵɵinject"](_angular_material_dialog__WEBPACK_IMPORTED_MODULE_24__.MatDialog), _angular_core__WEBPACK_IMPORTED_MODULE_23__["ɵɵinject"](_placeos_common__WEBPACK_IMPORTED_MODULE_2__.SettingsService));
  };
  static #_2 = this.ɵprov = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_23__["ɵɵdefineInjectable"]({
    token: CateringStateService,
    factory: CateringStateService.ɵfac,
    providedIn: 'root'
  });
}

/***/ }),

/***/ 19172:
/*!******************************************************!*\
  !*** ./libs/catering/src/lib/catering.interfaces.ts ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);


/***/ }),

/***/ 7872:
/*!**************************************************!*\
  !*** ./libs/catering/src/lib/catering.module.ts ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SharedCateringModule: () => (/* binding */ SharedCateringModule)
/* harmony export */ });
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! @angular/forms */ 34456);
/* harmony import */ var _angular_material_autocomplete__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! @angular/material/autocomplete */ 79771);
/* harmony import */ var _angular_material_checkbox__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! @angular/material/checkbox */ 97024);
/* harmony import */ var _angular_material_dialog__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! @angular/material/dialog */ 12587);
/* harmony import */ var _angular_material_menu__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! @angular/material/menu */ 31034);
/* harmony import */ var _angular_material_tabs__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! @angular/material/tabs */ 38223);
/* harmony import */ var _angular_material_radio__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! @angular/material/radio */ 53804);
/* harmony import */ var _angular_material_tooltip__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! @angular/material/tooltip */ 80640);
/* harmony import */ var _angular_material_form_field__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! @angular/material/form-field */ 24950);
/* harmony import */ var _angular_material_progress_spinner__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! @angular/material/progress-spinner */ 41134);
/* harmony import */ var _angular_material_progress_bar__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! @angular/material/progress-bar */ 26354);
/* harmony import */ var _placeos_form_fields__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/form-fields */ 63046);
/* harmony import */ var libs_components_src_lib_components_module__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! libs/components/src/lib/components.module */ 14974);
/* harmony import */ var _catering_item_modal_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./catering-item-modal.component */ 30807);
/* harmony import */ var _catering_menu_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./catering-menu.component */ 48519);
/* harmony import */ var _catering_option_modal_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./catering-option-modal.component */ 37053);
/* harmony import */ var _catering_order_item_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./catering-order-item.component */ 81491);
/* harmony import */ var _catering_order_list_component__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./catering-order-list.component */ 41623);
/* harmony import */ var _catering_order_modal_component__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./catering-order-modal.component */ 82912);
/* harmony import */ var _catering_order_options_modal_component__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./catering-order-options-modal.component */ 17707);
/* harmony import */ var _catering_import_menu_modal_component__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./catering-import-menu-modal.component */ 76095);
/* harmony import */ var _catering_order_modal_new_catering_order_modal_component__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./catering-order-modal/new-catering-order-modal.component */ 11732);
/* harmony import */ var _catering_order_modal_catering_item_list_component__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./catering-order-modal/catering-item-list.component */ 32499);
/* harmony import */ var _catering_order_modal_catering_item_details_component__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./catering-order-modal/catering-item-details.component */ 90699);
/* harmony import */ var _catering_order_modal_catering_item_filters_component__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./catering-order-modal/catering-item-filters.component */ 26386);
/* harmony import */ var _catering_list_field_component__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./catering-list-field.component */ 61601);
/* harmony import */ var _charge_code_list_modal_component__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./charge-code-list-modal.component */ 96861);
/* harmony import */ var _catering_order_modal_catering_item_list_item_component__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./catering-order-modal/catering-item-list-item.component */ 89505);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @angular/core */ 37580);































const COMPONENTS = [_catering_order_options_modal_component__WEBPACK_IMPORTED_MODULE_8__.CateringOrderOptionsModalComponent, _catering_order_modal_component__WEBPACK_IMPORTED_MODULE_7__.CateringOrderModalComponent, _catering_item_modal_component__WEBPACK_IMPORTED_MODULE_2__.CateringItemModalComponent, _catering_menu_component__WEBPACK_IMPORTED_MODULE_3__.CateringMenuComponent, _catering_option_modal_component__WEBPACK_IMPORTED_MODULE_4__.CateringItemOptionModalComponent, _catering_order_list_component__WEBPACK_IMPORTED_MODULE_6__.CateringOrderListComponent, _catering_order_item_component__WEBPACK_IMPORTED_MODULE_5__.CateringOrderItemComponent, _catering_import_menu_modal_component__WEBPACK_IMPORTED_MODULE_9__.CateringImportMenuModalComponent, _catering_list_field_component__WEBPACK_IMPORTED_MODULE_14__.CateringListFieldComponent, _catering_order_modal_new_catering_order_modal_component__WEBPACK_IMPORTED_MODULE_10__.NewCateringOrderModalComponent, _catering_order_modal_catering_item_list_component__WEBPACK_IMPORTED_MODULE_11__.CateringItemListComponent, _catering_order_modal_catering_item_details_component__WEBPACK_IMPORTED_MODULE_12__.CateringItemDetailsComponent, _catering_order_modal_catering_item_filters_component__WEBPACK_IMPORTED_MODULE_13__.CateringItemFiltersComponent, _catering_order_modal_catering_item_list_item_component__WEBPACK_IMPORTED_MODULE_16__.CateringItemListItemComponent, _charge_code_list_modal_component__WEBPACK_IMPORTED_MODULE_15__.ChargeCodeListModalComponent];
class SharedCateringModule {
  static #_ = this.ɵfac = function SharedCateringModule_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || SharedCateringModule)();
  };
  static #_2 = this.ɵmod = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_17__["ɵɵdefineNgModule"]({
    type: SharedCateringModule
  });
  static #_3 = this.ɵinj = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_17__["ɵɵdefineInjector"]({
    imports: [_angular_common__WEBPACK_IMPORTED_MODULE_18__.CommonModule, _angular_material_menu__WEBPACK_IMPORTED_MODULE_19__.MatMenuModule, _angular_material_tabs__WEBPACK_IMPORTED_MODULE_20__.MatTabsModule, _angular_material_autocomplete__WEBPACK_IMPORTED_MODULE_21__.MatAutocompleteModule, _angular_material_dialog__WEBPACK_IMPORTED_MODULE_22__.MatDialogModule, _angular_material_checkbox__WEBPACK_IMPORTED_MODULE_23__.MatCheckboxModule, _angular_material_radio__WEBPACK_IMPORTED_MODULE_24__.MatRadioModule, _angular_material_tooltip__WEBPACK_IMPORTED_MODULE_25__.MatTooltipModule, _angular_forms__WEBPACK_IMPORTED_MODULE_26__.FormsModule, _angular_forms__WEBPACK_IMPORTED_MODULE_26__.ReactiveFormsModule, libs_components_src_lib_components_module__WEBPACK_IMPORTED_MODULE_1__.ComponentsModule, _angular_material_form_field__WEBPACK_IMPORTED_MODULE_27__.MatFormFieldModule, _placeos_form_fields__WEBPACK_IMPORTED_MODULE_0__.FormFieldsModule, _angular_material_progress_spinner__WEBPACK_IMPORTED_MODULE_28__.MatProgressSpinnerModule, _angular_material_progress_bar__WEBPACK_IMPORTED_MODULE_29__.MatProgressBarModule]
  });
}
(function () {
  (typeof ngJitMode === "undefined" || ngJitMode) && _angular_core__WEBPACK_IMPORTED_MODULE_17__["ɵɵsetNgModuleScope"](SharedCateringModule, {
    declarations: [_catering_order_options_modal_component__WEBPACK_IMPORTED_MODULE_8__.CateringOrderOptionsModalComponent, _catering_order_modal_component__WEBPACK_IMPORTED_MODULE_7__.CateringOrderModalComponent, _catering_item_modal_component__WEBPACK_IMPORTED_MODULE_2__.CateringItemModalComponent, _catering_menu_component__WEBPACK_IMPORTED_MODULE_3__.CateringMenuComponent, _catering_option_modal_component__WEBPACK_IMPORTED_MODULE_4__.CateringItemOptionModalComponent, _catering_order_list_component__WEBPACK_IMPORTED_MODULE_6__.CateringOrderListComponent, _catering_order_item_component__WEBPACK_IMPORTED_MODULE_5__.CateringOrderItemComponent, _catering_import_menu_modal_component__WEBPACK_IMPORTED_MODULE_9__.CateringImportMenuModalComponent, _catering_list_field_component__WEBPACK_IMPORTED_MODULE_14__.CateringListFieldComponent, _catering_order_modal_new_catering_order_modal_component__WEBPACK_IMPORTED_MODULE_10__.NewCateringOrderModalComponent, _catering_order_modal_catering_item_list_component__WEBPACK_IMPORTED_MODULE_11__.CateringItemListComponent, _catering_order_modal_catering_item_details_component__WEBPACK_IMPORTED_MODULE_12__.CateringItemDetailsComponent, _catering_order_modal_catering_item_filters_component__WEBPACK_IMPORTED_MODULE_13__.CateringItemFiltersComponent, _catering_order_modal_catering_item_list_item_component__WEBPACK_IMPORTED_MODULE_16__.CateringItemListItemComponent, _charge_code_list_modal_component__WEBPACK_IMPORTED_MODULE_15__.ChargeCodeListModalComponent],
    imports: [_angular_common__WEBPACK_IMPORTED_MODULE_18__.CommonModule, _angular_material_menu__WEBPACK_IMPORTED_MODULE_19__.MatMenuModule, _angular_material_tabs__WEBPACK_IMPORTED_MODULE_20__.MatTabsModule, _angular_material_autocomplete__WEBPACK_IMPORTED_MODULE_21__.MatAutocompleteModule, _angular_material_dialog__WEBPACK_IMPORTED_MODULE_22__.MatDialogModule, _angular_material_checkbox__WEBPACK_IMPORTED_MODULE_23__.MatCheckboxModule, _angular_material_radio__WEBPACK_IMPORTED_MODULE_24__.MatRadioModule, _angular_material_tooltip__WEBPACK_IMPORTED_MODULE_25__.MatTooltipModule, _angular_forms__WEBPACK_IMPORTED_MODULE_26__.FormsModule, _angular_forms__WEBPACK_IMPORTED_MODULE_26__.ReactiveFormsModule, libs_components_src_lib_components_module__WEBPACK_IMPORTED_MODULE_1__.ComponentsModule, _angular_material_form_field__WEBPACK_IMPORTED_MODULE_27__.MatFormFieldModule, _placeos_form_fields__WEBPACK_IMPORTED_MODULE_0__.FormFieldsModule, _angular_material_progress_spinner__WEBPACK_IMPORTED_MODULE_28__.MatProgressSpinnerModule, _angular_material_progress_bar__WEBPACK_IMPORTED_MODULE_29__.MatProgressBarModule],
    exports: [_catering_order_options_modal_component__WEBPACK_IMPORTED_MODULE_8__.CateringOrderOptionsModalComponent, _catering_order_modal_component__WEBPACK_IMPORTED_MODULE_7__.CateringOrderModalComponent, _catering_item_modal_component__WEBPACK_IMPORTED_MODULE_2__.CateringItemModalComponent, _catering_menu_component__WEBPACK_IMPORTED_MODULE_3__.CateringMenuComponent, _catering_option_modal_component__WEBPACK_IMPORTED_MODULE_4__.CateringItemOptionModalComponent, _catering_order_list_component__WEBPACK_IMPORTED_MODULE_6__.CateringOrderListComponent, _catering_order_item_component__WEBPACK_IMPORTED_MODULE_5__.CateringOrderItemComponent, _catering_import_menu_modal_component__WEBPACK_IMPORTED_MODULE_9__.CateringImportMenuModalComponent, _catering_list_field_component__WEBPACK_IMPORTED_MODULE_14__.CateringListFieldComponent, _catering_order_modal_new_catering_order_modal_component__WEBPACK_IMPORTED_MODULE_10__.NewCateringOrderModalComponent, _catering_order_modal_catering_item_list_component__WEBPACK_IMPORTED_MODULE_11__.CateringItemListComponent, _catering_order_modal_catering_item_details_component__WEBPACK_IMPORTED_MODULE_12__.CateringItemDetailsComponent, _catering_order_modal_catering_item_filters_component__WEBPACK_IMPORTED_MODULE_13__.CateringItemFiltersComponent, _catering_order_modal_catering_item_list_item_component__WEBPACK_IMPORTED_MODULE_16__.CateringItemListItemComponent, _charge_code_list_modal_component__WEBPACK_IMPORTED_MODULE_15__.ChargeCodeListModalComponent]
  });
})();

/***/ }),

/***/ 95196:
/*!*******************************************!*\
  !*** ./libs/catering/src/lib/catering.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CATERING_STATUSES: () => (/* reexport safe */ _catering_vars__WEBPACK_IMPORTED_MODULE_13__.CATERING_STATUSES),
/* harmony export */   CateringItem: () => (/* reexport safe */ _catering_item_class__WEBPACK_IMPORTED_MODULE_3__.CateringItem),
/* harmony export */   CateringItemModalComponent: () => (/* reexport safe */ _catering_item_modal_component__WEBPACK_IMPORTED_MODULE_2__.CateringItemModalComponent),
/* harmony export */   CateringItemOptionModalComponent: () => (/* reexport safe */ _catering_option_modal_component__WEBPACK_IMPORTED_MODULE_5__.CateringItemOptionModalComponent),
/* harmony export */   CateringMenuComponent: () => (/* reexport safe */ _catering_menu_component__WEBPACK_IMPORTED_MODULE_4__.CateringMenuComponent),
/* harmony export */   CateringOrder: () => (/* reexport safe */ _catering_order_class__WEBPACK_IMPORTED_MODULE_8__.CateringOrder),
/* harmony export */   CateringOrderItemComponent: () => (/* reexport safe */ _catering_order_item_component__WEBPACK_IMPORTED_MODULE_6__.CateringOrderItemComponent),
/* harmony export */   CateringOrderListComponent: () => (/* reexport safe */ _catering_order_list_component__WEBPACK_IMPORTED_MODULE_7__.CateringOrderListComponent),
/* harmony export */   CateringOrderModalComponent: () => (/* reexport safe */ _catering_order_modal_component__WEBPACK_IMPORTED_MODULE_1__.CateringOrderModalComponent),
/* harmony export */   CateringOrderOptionsModalComponent: () => (/* reexport safe */ _catering_order_options_modal_component__WEBPACK_IMPORTED_MODULE_0__.CateringOrderOptionsModalComponent),
/* harmony export */   CateringOrdersService: () => (/* reexport safe */ _catering_orders_service__WEBPACK_IMPORTED_MODULE_9__.CateringOrdersService),
/* harmony export */   CateringStateService: () => (/* reexport safe */ _catering_state_service__WEBPACK_IMPORTED_MODULE_10__.CateringStateService),
/* harmony export */   NewCateringOrderModalComponent: () => (/* reexport safe */ _catering_order_modal_new_catering_order_modal_component__WEBPACK_IMPORTED_MODULE_14__.NewCateringOrderModalComponent),
/* harmony export */   SharedCateringModule: () => (/* reexport safe */ _catering_module__WEBPACK_IMPORTED_MODULE_12__.SharedCateringModule)
/* harmony export */ });
/* harmony import */ var _catering_order_options_modal_component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./catering-order-options-modal.component */ 17707);
/* harmony import */ var _catering_order_modal_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./catering-order-modal.component */ 82912);
/* harmony import */ var _catering_item_modal_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./catering-item-modal.component */ 30807);
/* harmony import */ var _catering_item_class__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./catering-item.class */ 25892);
/* harmony import */ var _catering_menu_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./catering-menu.component */ 48519);
/* harmony import */ var _catering_option_modal_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./catering-option-modal.component */ 37053);
/* harmony import */ var _catering_order_item_component__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./catering-order-item.component */ 81491);
/* harmony import */ var _catering_order_list_component__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./catering-order-list.component */ 41623);
/* harmony import */ var _catering_order_class__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./catering-order.class */ 75555);
/* harmony import */ var _catering_orders_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./catering-orders.service */ 98197);
/* harmony import */ var _catering_state_service__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./catering-state.service */ 52201);
/* harmony import */ var _catering_interfaces__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./catering.interfaces */ 19172);
/* harmony import */ var _catering_module__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./catering.module */ 7872);
/* harmony import */ var _catering_vars__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./catering.vars */ 91074);
/* harmony import */ var _catering_order_modal_new_catering_order_modal_component__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./catering-order-modal/new-catering-order-modal.component */ 11732);
















/***/ }),

/***/ 91074:
/*!************************************************!*\
  !*** ./libs/catering/src/lib/catering.vars.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CATERING_STATUSES: () => (/* binding */ CATERING_STATUSES)
/* harmony export */ });
const CATERING_STATUSES = [{
  id: 'pending',
  name: 'Pending',
  icon: {
    class: 'custom-pending'
  },
  colour: '#ccc'
}, {
  id: 'accepted',
  name: 'Accepted',
  icon: {
    class: 'custom-accepted'
  },
  colour: '#3996B6'
}, {
  id: 'preparing',
  name: 'Preparing',
  icon: {
    class: 'custom-preparing'
  },
  colour: '#E7536B'
}, {
  id: 'ready',
  name: 'Ready',
  icon: {
    class: 'custom-ready'
  },
  colour: '#FFD028'
}, {
  id: 'delivered',
  name: 'Delivered',
  icon: {
    class: 'custom-delivered'
  },
  colour: '#75BB43'
}, {
  id: 'cancelled',
  name: 'Cancelled',
  icon: {
    class: 'custom-cancelled'
  },
  colour: '#747474'
}];

/***/ }),

/***/ 96861:
/*!*******************************************************************!*\
  !*** ./libs/catering/src/lib/charge-code-list-modal.component.ts ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ChargeCodeListModalComponent: () => (/* binding */ ChargeCodeListModalComponent)
/* harmony export */ });
/* harmony import */ var _home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 89204);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! rxjs/operators */ 33602);
/* harmony import */ var _catering_state_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./catering-state.service */ 52201);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_material_dialog__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @angular/material/dialog */ 12587);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @angular/forms */ 34456);
/* harmony import */ var _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../components/src/lib/icon.component */ 69434);
/* harmony import */ var _angular_material_form_field__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @angular/material/form-field */ 24950);
/* harmony import */ var _angular_material_core__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @angular/material/core */ 74646);
/* harmony import */ var _angular_material_input__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @angular/material/input */ 95541);
/* harmony import */ var _angular_material_progress_spinner__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @angular/material/progress-spinner */ 41134);















function ChargeCodeListModalComponent_main_6_div_1_Template(rf, ctx) {
  if (rf & 1) {
    const _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](0, "div", 6)(1, "mat-form-field", 7)(2, "input", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtwoWayListener"]("ngModelChange", function ChargeCodeListModalComponent_main_6_div_1_Template_input_ngModelChange_2_listener($event) {
      const i_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵrestoreView"](_r1).index;
      const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"](2);
      _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtwoWayBindingSet"](ctx_r2.charge_codes[i_r2], $event) || (ctx_r2.charge_codes[i_r2] = $event);
      return _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵresetView"]($event);
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](3, "button", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵlistener"]("click", function ChargeCodeListModalComponent_main_6_div_1_Template_button_click_3_listener() {
      const i_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵrestoreView"](_r1).index;
      const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"](2);
      return _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵresetView"](ctx_r2.removeCode(i_r2));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](4, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](5, "delete");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]()()();
  }
  if (rf & 2) {
    const i_r2 = ctx.index;
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtwoWayProperty"]("ngModel", ctx_r2.charge_codes[i_r2]);
  }
}
function ChargeCodeListModalComponent_main_6_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](0, "main", 4);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](1, ChargeCodeListModalComponent_main_6_div_1_Template, 6, 1, "div", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngForOf", ctx_r2.charge_codes)("ngForTrackBy", ctx_r2.trackByFn);
  }
}
function ChargeCodeListModalComponent_footer_7_Template(rf, ctx) {
  if (rf & 1) {
    const _r4 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](0, "footer", 10)(1, "button", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](2, " Import Codes ");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](3, "input", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵlistener"]("change", function ChargeCodeListModalComponent_footer_7_Template_input_change_3_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵrestoreView"](_r4);
      const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵresetView"](ctx_r2.addCodesFromFile($event));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](4, "button", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵlistener"]("click", function ChargeCodeListModalComponent_footer_7_Template_button_click_4_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵrestoreView"](_r4);
      const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵresetView"](ctx_r2.newCode());
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](5, " Add Code ");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](6, "button", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵlistener"]("click", function ChargeCodeListModalComponent_footer_7_Template_button_click_6_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵrestoreView"](_r4);
      const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵresetView"](ctx_r2.saveChargeCodes());
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](7, " Save Changes ");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]()();
  }
}
function ChargeCodeListModalComponent_ng_template_8_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](0, "main", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelement"](1, "mat-spinner", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](2, "p");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](3, "Saving changes to charge codes...");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]()();
  }
}
class ChargeCodeListModalComponent {
  constructor(_state, _dialog_ref) {
    this._state = _state;
    this._dialog_ref = _dialog_ref;
    this.charge_codes = [];
    this.loading = false;
  }
  ngOnInit() {
    var _this = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      _this.charge_codes = (yield _this._state.charge_codes.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.take)(1)).toPromise()) || [];
    })();
  }
  newCode() {
    this.charge_codes.push('');
  }
  removeCode(index) {
    this.charge_codes.splice(index, 1);
  }
  /**
   * Load CSV file and populate the code list with the contents
   * @param event File input field event
   */
  addCodesFromFile(event) {
    /* istanbul ignore else */
    if (event.target) {
      const file = event.target.files[0];
      /* istanbul ignore else */
      if (file) {
        const reader = new FileReader();
        reader.readAsText(file, 'UTF-8');
        reader.addEventListener('load', evt => {
          const list = (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.csvToJson)(evt.srcElement.result) || [];
          for (const {
            code,
            description
          } of list) {
            this.charge_codes.push(code);
          }
          this.charge_codes = (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.unique)(this.charge_codes);
          event.target.value = '';
        });
        reader.addEventListener('error', _ => (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.notifyError)('Error reading file.'));
      }
    }
  }
  saveChargeCodes() {
    var _this2 = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      _this2.loading = true;
      const cleaned_codes = _this2.charge_codes.filter(_ => _ && _.trim());
      yield _this2._state.saveSettings({
        charge_codes: cleaned_codes
      });
      _this2._dialog_ref.close();
    })();
  }
  trackByFn(idx, item) {
    return idx;
  }
  static #_ = this.ɵfac = function ChargeCodeListModalComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || ChargeCodeListModalComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵdirectiveInject"](_catering_state_service__WEBPACK_IMPORTED_MODULE_2__.CateringStateService), _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵdirectiveInject"](_angular_material_dialog__WEBPACK_IMPORTED_MODULE_6__.MatDialogRef));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵdefineComponent"]({
    type: ChargeCodeListModalComponent,
    selectors: [["charge-code-list-modal"]],
    decls: 10,
    vars: 3,
    consts: [["load_state", ""], ["icon", "", "mat-dialog-close", ""], ["class", "overflow-auto max-h-[65vh] min-h-[20rem] flex flex-col", 4, "ngIf", "ngIfElse"], ["class", "flex items-center p-2 space-x-2 border-t border-base-200", 4, "ngIf"], [1, "overflow-auto", "max-h-[65vh]", "min-h-[20rem]", "flex", "flex-col"], ["class", "flex items-center space-x-2 w-full hover:bg-neutral px-2", 4, "ngFor", "ngForOf", "ngForTrackBy"], [1, "flex", "items-center", "space-x-2", "w-full", "hover:bg-neutral", "px-2"], ["appearance", "outline", 1, "h-14", "flex-1"], ["matInput", "", "placeholder", "Charge Code", 3, "ngModelChange", "ngModel"], ["icon", "", 3, "click"], [1, "flex", "items-center", "p-2", "space-x-2", "border-t", "border-base-200"], ["btn", "", "matRipple", "", 1, "w-48", "inverse", "relative"], ["type", "file", 1, "opacity-0", "absolute", "inset-0", 3, "change"], ["btn", "", "matRipple", "", 1, "w-48", 3, "click"], [1, "flex", "flex-col", "items-center", "justify-center", "p-20", "space-y-2"], ["diameter", "32"]],
    template: function ChargeCodeListModalComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](0, "header")(1, "h2");
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](2, "Edit Charge Codes");
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](3, "button", 1)(4, "app-icon");
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](5, "close");
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]()()();
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](6, ChargeCodeListModalComponent_main_6_Template, 2, 2, "main", 2)(7, ChargeCodeListModalComponent_footer_7_Template, 8, 0, "footer", 3)(8, ChargeCodeListModalComponent_ng_template_8_Template, 4, 0, "ng-template", null, 0, _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplateRefExtractor"]);
      }
      if (rf & 2) {
        const load_state_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵreference"](9);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](6);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngIf", !ctx.loading)("ngIfElse", load_state_r5);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngIf", !ctx.loading);
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_7__.NgForOf, _angular_common__WEBPACK_IMPORTED_MODULE_7__.NgIf, _angular_material_dialog__WEBPACK_IMPORTED_MODULE_6__.MatDialogClose, _angular_forms__WEBPACK_IMPORTED_MODULE_8__.DefaultValueAccessor, _angular_forms__WEBPACK_IMPORTED_MODULE_8__.NgControlStatus, _angular_forms__WEBPACK_IMPORTED_MODULE_8__.NgModel, _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_3__.IconComponent, _angular_material_form_field__WEBPACK_IMPORTED_MODULE_9__.MatFormField, _angular_material_core__WEBPACK_IMPORTED_MODULE_10__.MatRipple, _angular_material_input__WEBPACK_IMPORTED_MODULE_11__.MatInput, _angular_material_progress_spinner__WEBPACK_IMPORTED_MODULE_12__.MatProgressSpinner]
  });
}

/***/ }),

/***/ 60285:
/*!********************************************!*\
  !*** ./libs/catering/src/lib/utilities.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   cateringItemAvailable: () => (/* binding */ cateringItemAvailable),
/* harmony export */   getCateringRulesForZone: () => (/* binding */ getCateringRulesForZone)
/* harmony export */ });
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! date-fns */ 55882);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! date-fns */ 28848);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! date-fns */ 91543);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! date-fns */ 3330);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! rxjs */ 71536);
/* harmony import */ var _placeos_ts_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/ts-client */ 35713);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! rxjs/operators */ 35443);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! rxjs/operators */ 29314);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @placeos/common */ 22797);





const RULE_REQUESTS = {};
function getCateringRulesForZone(zone_id, fresh = false) {
  if (!zone_id) return (0,rxjs__WEBPACK_IMPORTED_MODULE_2__.of)([]);
  if (!RULE_REQUESTS[zone_id] || fresh) RULE_REQUESTS[zone_id] = (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_0__.showMetadata)(zone_id, 'catering_config').pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.map)(_ => _.details instanceof Array ? _.details : []), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.catchError)(e => (0,rxjs__WEBPACK_IMPORTED_MODULE_2__.of)([])));
  return RULE_REQUESTS[zone_id];
}
function cateringItemAvailable(item, rules, event) {
  let is_available = true;
  for (const rule of rules) {
    if (item.category === rule.name || item.tags.includes(rule.name) || event.resources.find(_ => _.zones.includes(rule.name)) || event.space?.zones.includes(rule.name) || rule.name === '*') {
      let matches = 0;
      for (const condition of rule.rules) {
        const date = new Date(event.date);
        switch (condition[0]) {
          case 'is_before':
            matches += (0,date_fns__WEBPACK_IMPORTED_MODULE_5__.isBefore)(Date.now(), (0,date_fns__WEBPACK_IMPORTED_MODULE_6__.subHours)(date, condition[1])) ? 1 : 0;
            break;
          case 'within_hours':
            matches += (0,date_fns__WEBPACK_IMPORTED_MODULE_7__.isAfter)(Date.now(), (0,date_fns__WEBPACK_IMPORTED_MODULE_6__.subHours)(date, condition[1])) ? 1 : 0;
            break;
          case 'after_hour':
            matches += (0,date_fns__WEBPACK_IMPORTED_MODULE_7__.isAfter)(date, (0,date_fns__WEBPACK_IMPORTED_MODULE_8__.setHours)(date, condition[1])) ? 1 : 0;
            break;
          case 'before_hour':
            matches += (0,date_fns__WEBPACK_IMPORTED_MODULE_5__.isBefore)(date, (0,date_fns__WEBPACK_IMPORTED_MODULE_8__.setHours)(date, condition[1])) ? 1 : 0;
            break;
          case 'min_length':
            matches += event.duration >= (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.stringToMinutes)(condition[1]) ? 1 : 0;
            break;
          case 'max_length':
            matches += event.duration <= (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.stringToMinutes)(condition[1]) ? 1 : 0;
            break;
          case 'visitor_type':
            matches += event.ext('visitor_type') === condition[1] ? 1 : 0;
            break;
          default:
            matches += 1;
        }
      }
      is_available = matches >= rule.rules.length;
    }
  }
  return is_available;
}

/***/ }),

/***/ 22797:
/*!**********************************!*\
  !*** ./libs/common/src/index.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ANIMATION_SHOW_CONTRACT_EXPAND: () => (/* reexport safe */ _lib_common__WEBPACK_IMPORTED_MODULE_0__.ANIMATION_SHOW_CONTRACT_EXPAND),
/* harmony export */   ANIMATION_SHOW_ENTER_LEAVE: () => (/* reexport safe */ _lib_common__WEBPACK_IMPORTED_MODULE_0__.ANIMATION_SHOW_ENTER_LEAVE),
/* harmony export */   AsyncHandler: () => (/* reexport safe */ _lib_common__WEBPACK_IMPORTED_MODULE_0__.AsyncHandler),
/* harmony export */   DEFAULT_SETTINGS: () => (/* reexport safe */ _lib_common__WEBPACK_IMPORTED_MODULE_0__.DEFAULT_SETTINGS),
/* harmony export */   FeatureAvailableGuard: () => (/* reexport safe */ _lib_feature_available_guard__WEBPACK_IMPORTED_MODULE_2__.FeatureAvailableGuard),
/* harmony export */   GoogleAnalyticsService: () => (/* reexport safe */ _lib_common__WEBPACK_IMPORTED_MODULE_0__.GoogleAnalyticsService),
/* harmony export */   HotkeysService: () => (/* reexport safe */ _lib_common__WEBPACK_IMPORTED_MODULE_0__.HotkeysService),
/* harmony export */   KeepAliveService: () => (/* reexport safe */ _lib_keep_alive_service__WEBPACK_IMPORTED_MODULE_7__.KeepAliveService),
/* harmony export */   LOCAL_TIMEZONE: () => (/* reexport safe */ _lib_timezone_helpers__WEBPACK_IMPORTED_MODULE_4__.LOCAL_TIMEZONE),
/* harmony export */   MapsPeopleService: () => (/* reexport safe */ _lib_common__WEBPACK_IMPORTED_MODULE_0__.MapsPeopleService),
/* harmony export */   PLACEOS_APP_ACCESS: () => (/* reexport safe */ _lib_feature_available_guard__WEBPACK_IMPORTED_MODULE_2__.PLACEOS_APP_ACCESS),
/* harmony export */   RemoteLoggingService: () => (/* reexport safe */ _lib_remote_logging_service__WEBPACK_IMPORTED_MODULE_3__.RemoteLoggingService),
/* harmony export */   SettingsService: () => (/* reexport safe */ _lib_common__WEBPACK_IMPORTED_MODULE_0__.SettingsService),
/* harmony export */   TIMEZONES: () => (/* reexport safe */ _lib_common__WEBPACK_IMPORTED_MODULE_0__.TIMEZONES),
/* harmony export */   TIMEZONES_IANA: () => (/* reexport safe */ _lib_common__WEBPACK_IMPORTED_MODULE_0__.TIMEZONES_IANA),
/* harmony export */   UploadsService: () => (/* reexport safe */ _lib_uploads_service__WEBPACK_IMPORTED_MODULE_8__.UploadsService),
/* harmony export */   UserIdleTimeService: () => (/* reexport safe */ _lib_user_idle_time_service__WEBPACK_IMPORTED_MODULE_5__.UserIdleTimeService),
/* harmony export */   VERSION: () => (/* reexport safe */ _lib_common__WEBPACK_IMPORTED_MODULE_0__.VERSION),
/* harmony export */   VorlonService: () => (/* reexport safe */ _lib_common__WEBPACK_IMPORTED_MODULE_0__.VorlonService),
/* harmony export */   addToDate: () => (/* reexport safe */ _lib_booking_rules__WEBPACK_IMPORTED_MODULE_6__.addToDate),
/* harmony export */   calculateDistance: () => (/* reexport safe */ _lib_common__WEBPACK_IMPORTED_MODULE_0__.calculateDistance),
/* harmony export */   capitalizeFirstLetter: () => (/* reexport safe */ _lib_common__WEBPACK_IMPORTED_MODULE_0__.capitalizeFirstLetter),
/* harmony export */   checkRulesMatch: () => (/* reexport safe */ _lib_booking_rules__WEBPACK_IMPORTED_MODULE_6__.checkRulesMatch),
/* harmony export */   cleanArray: () => (/* reexport safe */ _lib_common__WEBPACK_IMPORTED_MODULE_0__.cleanArray),
/* harmony export */   clearCacheCheck: () => (/* reexport safe */ _lib_common__WEBPACK_IMPORTED_MODULE_0__.clearCacheCheck),
/* harmony export */   createShortURL: () => (/* reexport safe */ _lib_shorten_fn__WEBPACK_IMPORTED_MODULE_9__.createShortURL),
/* harmony export */   csvToJson: () => (/* reexport safe */ _lib_common__WEBPACK_IMPORTED_MODULE_0__.csvToJson),
/* harmony export */   currentUser: () => (/* reexport safe */ _lib_common__WEBPACK_IMPORTED_MODULE_0__.currentUser),
/* harmony export */   current_user: () => (/* reexport safe */ _lib_common__WEBPACK_IMPORTED_MODULE_0__.current_user),
/* harmony export */   deleteShortURL: () => (/* reexport safe */ _lib_shorten_fn__WEBPACK_IMPORTED_MODULE_9__.deleteShortURL),
/* harmony export */   downloadFile: () => (/* reexport safe */ _lib_common__WEBPACK_IMPORTED_MODULE_0__.downloadFile),
/* harmony export */   filterResourcesFromRules: () => (/* reexport safe */ _lib_booking_rules__WEBPACK_IMPORTED_MODULE_6__.filterResourcesFromRules),
/* harmony export */   flatten: () => (/* reexport safe */ _lib_common__WEBPACK_IMPORTED_MODULE_0__.flatten),
/* harmony export */   formatRecurrence: () => (/* reexport safe */ _lib_common__WEBPACK_IMPORTED_MODULE_0__.formatRecurrence),
/* harmony export */   getInvalidFields: () => (/* reexport safe */ _lib_common__WEBPACK_IMPORTED_MODULE_0__.getInvalidFields),
/* harmony export */   getItemWithKeys: () => (/* reexport safe */ _lib_common__WEBPACK_IMPORTED_MODULE_0__.getItemWithKeys),
/* harmony export */   getShortUrlQRCode: () => (/* reexport safe */ _lib_shorten_fn__WEBPACK_IMPORTED_MODULE_9__.getShortUrlQRCode),
/* harmony export */   hasNewVersion: () => (/* reexport safe */ _lib_common__WEBPACK_IMPORTED_MODULE_0__.hasNewVersion),
/* harmony export */   hexToRgb: () => (/* reexport safe */ _lib_common__WEBPACK_IMPORTED_MODULE_0__.hexToRgb),
/* harmony export */   interpolateColors: () => (/* reexport safe */ _lib_common__WEBPACK_IMPORTED_MODULE_0__.interpolateColors),
/* harmony export */   is24HourTime: () => (/* reexport safe */ _lib_common__WEBPACK_IMPORTED_MODULE_0__.is24HourTime),
/* harmony export */   isMobileSafari: () => (/* reexport safe */ _lib_common__WEBPACK_IMPORTED_MODULE_0__.isMobileSafari),
/* harmony export */   isNestedFrame: () => (/* reexport safe */ _lib_common__WEBPACK_IMPORTED_MODULE_0__.isNestedFrame),
/* harmony export */   jsonToCsv: () => (/* reexport safe */ _lib_common__WEBPACK_IMPORTED_MODULE_0__.jsonToCsv),
/* harmony export */   loadTextFileFromInputEvent: () => (/* reexport safe */ _lib_common__WEBPACK_IMPORTED_MODULE_0__.loadTextFileFromInputEvent),
/* harmony export */   localToTimezone: () => (/* reexport safe */ _lib_timezone_helpers__WEBPACK_IMPORTED_MODULE_4__.localToTimezone),
/* harmony export */   log: () => (/* reexport safe */ _lib_common__WEBPACK_IMPORTED_MODULE_0__.log),
/* harmony export */   mergeRoomConfig: () => (/* reexport safe */ _lib_common__WEBPACK_IMPORTED_MODULE_0__.mergeRoomConfig),
/* harmony export */   notify: () => (/* reexport safe */ _lib_common__WEBPACK_IMPORTED_MODULE_0__.notify),
/* harmony export */   notifyError: () => (/* reexport safe */ _lib_common__WEBPACK_IMPORTED_MODULE_0__.notifyError),
/* harmony export */   notifyInfo: () => (/* reexport safe */ _lib_common__WEBPACK_IMPORTED_MODULE_0__.notifyInfo),
/* harmony export */   notifySuccess: () => (/* reexport safe */ _lib_common__WEBPACK_IMPORTED_MODULE_0__.notifySuccess),
/* harmony export */   notifyWarn: () => (/* reexport safe */ _lib_common__WEBPACK_IMPORTED_MODULE_0__.notifyWarn),
/* harmony export */   openConfirmModal: () => (/* reexport safe */ _lib_common__WEBPACK_IMPORTED_MODULE_0__.openConfirmModal),
/* harmony export */   padString: () => (/* reexport safe */ _lib_common__WEBPACK_IMPORTED_MODULE_0__.padString),
/* harmony export */   parseJWT: () => (/* reexport safe */ _lib_common__WEBPACK_IMPORTED_MODULE_0__.parseJWT),
/* harmony export */   patchShortURL: () => (/* reexport safe */ _lib_shorten_fn__WEBPACK_IMPORTED_MODULE_9__.patchShortURL),
/* harmony export */   predictableRandomInt: () => (/* reexport safe */ _lib_common__WEBPACK_IMPORTED_MODULE_0__.predictableRandomInt),
/* harmony export */   queryShortURLs: () => (/* reexport safe */ _lib_shorten_fn__WEBPACK_IMPORTED_MODULE_9__.queryShortURLs),
/* harmony export */   randomInt: () => (/* reexport safe */ _lib_common__WEBPACK_IMPORTED_MODULE_0__.randomInt),
/* harmony export */   randomString: () => (/* reexport safe */ _lib_common__WEBPACK_IMPORTED_MODULE_0__.randomString),
/* harmony export */   reloadUserData: () => (/* reexport safe */ _lib_common__WEBPACK_IMPORTED_MODULE_0__.reloadUserData),
/* harmony export */   removeEmptyFields: () => (/* reexport safe */ _lib_common__WEBPACK_IMPORTED_MODULE_0__.removeEmptyFields),
/* harmony export */   requestScreenWakeLock: () => (/* reexport safe */ _lib_fixed_device_helpers__WEBPACK_IMPORTED_MODULE_10__.requestScreenWakeLock),
/* harmony export */   rgbToHex: () => (/* reexport safe */ _lib_common__WEBPACK_IMPORTED_MODULE_0__.rgbToHex),
/* harmony export */   roomConfigBuilder: () => (/* reexport safe */ _lib_common__WEBPACK_IMPORTED_MODULE_0__.roomConfigBuilder),
/* harmony export */   rulesForResource: () => (/* reexport safe */ _lib_booking_rules__WEBPACK_IMPORTED_MODULE_6__.rulesForResource),
/* harmony export */   saveShortURL: () => (/* reexport safe */ _lib_shorten_fn__WEBPACK_IMPORTED_MODULE_9__.saveShortURL),
/* harmony export */   setAppName: () => (/* reexport safe */ _lib_common__WEBPACK_IMPORTED_MODULE_0__.setAppName),
/* harmony export */   setNotifyOutlet: () => (/* reexport safe */ _lib_common__WEBPACK_IMPORTED_MODULE_0__.setNotifyOutlet),
/* harmony export */   setupCache: () => (/* reexport safe */ _lib_common__WEBPACK_IMPORTED_MODULE_0__.setupCache),
/* harmony export */   setupPlace: () => (/* reexport safe */ _lib_common__WEBPACK_IMPORTED_MODULE_0__.setupPlace),
/* harmony export */   shiftColorTowards: () => (/* reexport safe */ _lib_common__WEBPACK_IMPORTED_MODULE_0__.shiftColorTowards),
/* harmony export */   showShortURL: () => (/* reexport safe */ _lib_shorten_fn__WEBPACK_IMPORTED_MODULE_9__.showShortURL),
/* harmony export */   shuffleArray: () => (/* reexport safe */ _lib_common__WEBPACK_IMPORTED_MODULE_0__.shuffleArray),
/* harmony export */   shuffleArrayWithFirstItem: () => (/* reexport safe */ _lib_common__WEBPACK_IMPORTED_MODULE_0__.shuffleArrayWithFirstItem),
/* harmony export */   stringToMinutes: () => (/* reexport safe */ _lib_booking_rules__WEBPACK_IMPORTED_MODULE_6__.stringToMinutes),
/* harmony export */   timeFormatString: () => (/* reexport safe */ _lib_common__WEBPACK_IMPORTED_MODULE_0__.timeFormatString),
/* harmony export */   timePeriodsIntersect: () => (/* reexport safe */ _lib_common__WEBPACK_IMPORTED_MODULE_0__.timePeriodsIntersect),
/* harmony export */   timezoneToLocal: () => (/* reexport safe */ _lib_timezone_helpers__WEBPACK_IMPORTED_MODULE_4__.timezoneToLocal),
/* harmony export */   toQueryString: () => (/* reexport safe */ _lib_common__WEBPACK_IMPORTED_MODULE_0__.toQueryString),
/* harmony export */   unique: () => (/* reexport safe */ _lib_common__WEBPACK_IMPORTED_MODULE_0__.unique),
/* harmony export */   updateShortURL: () => (/* reexport safe */ _lib_shorten_fn__WEBPACK_IMPORTED_MODULE_9__.updateShortURL),
/* harmony export */   uploadFile: () => (/* reexport safe */ _lib_uploads__WEBPACK_IMPORTED_MODULE_1__.uploadFile),
/* harmony export */   whenChangesStable: () => (/* reexport safe */ _lib_common__WEBPACK_IMPORTED_MODULE_0__.whenChangesStable)
/* harmony export */ });
/* harmony import */ var _lib_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./lib/common */ 39248);
/* harmony import */ var _lib_uploads__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./lib/uploads */ 83615);
/* harmony import */ var _lib_feature_available_guard__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./lib/feature-available.guard */ 3422);
/* harmony import */ var _lib_remote_logging_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./lib/remote-logging.service */ 686);
/* harmony import */ var _lib_timezone_helpers__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./lib/timezone-helpers */ 35774);
/* harmony import */ var _lib_user_idle_time_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./lib/user-idle-time.service */ 5430);
/* harmony import */ var _lib_booking_rules__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./lib/booking-rules */ 10380);
/* harmony import */ var _lib_keep_alive_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./lib/keep-alive.service */ 52369);
/* harmony import */ var _lib_uploads_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./lib/uploads.service */ 55746);
/* harmony import */ var _lib_shorten_fn__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./lib/shorten.fn */ 1284);
/* harmony import */ var _lib_fixed_device_helpers__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./lib/fixed-device-helpers */ 74894);












/***/ }),

/***/ 96159:
/*!***************************************************!*\
  !*** ./libs/common/src/lib/angular-animations.ts ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ANIMATION_SHOW_CONTRACT_EXPAND: () => (/* binding */ ANIMATION_SHOW_CONTRACT_EXPAND),
/* harmony export */   ANIMATION_SHOW_ENTER_LEAVE: () => (/* binding */ ANIMATION_SHOW_ENTER_LEAVE)
/* harmony export */ });
/* harmony import */ var _angular_animations__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/animations */ 47172);

const ANIMATION_SHOW_ENTER_LEAVE = (0,_angular_animations__WEBPACK_IMPORTED_MODULE_0__.trigger)('show', [(0,_angular_animations__WEBPACK_IMPORTED_MODULE_0__.transition)(':enter', [(0,_angular_animations__WEBPACK_IMPORTED_MODULE_0__.style)({
  opacity: 0,
  height: 0
}), (0,_angular_animations__WEBPACK_IMPORTED_MODULE_0__.animate)(300, (0,_angular_animations__WEBPACK_IMPORTED_MODULE_0__.style)({
  opacity: 1,
  height: '*'
}))]), (0,_angular_animations__WEBPACK_IMPORTED_MODULE_0__.transition)(':leave', [(0,_angular_animations__WEBPACK_IMPORTED_MODULE_0__.style)({
  opacity: 1,
  height: '*'
}), (0,_angular_animations__WEBPACK_IMPORTED_MODULE_0__.animate)(300, (0,_angular_animations__WEBPACK_IMPORTED_MODULE_0__.style)({
  opacity: 0,
  height: 0
}))])]);
const ANIMATION_SHOW_CONTRACT_EXPAND = (0,_angular_animations__WEBPACK_IMPORTED_MODULE_0__.trigger)('show', [(0,_angular_animations__WEBPACK_IMPORTED_MODULE_0__.state)('show', (0,_angular_animations__WEBPACK_IMPORTED_MODULE_0__.style)({
  opacity: 1,
  height: '*'
})), (0,_angular_animations__WEBPACK_IMPORTED_MODULE_0__.state)('hide', (0,_angular_animations__WEBPACK_IMPORTED_MODULE_0__.style)({
  opacity: 0,
  height: 0,
  'pointer-events': 'none'
})), (0,_angular_animations__WEBPACK_IMPORTED_MODULE_0__.transition)('show <=> hide', (0,_angular_animations__WEBPACK_IMPORTED_MODULE_0__.animate)('200ms ease-in'))]);

/***/ }),

/***/ 38385:
/*!************************************!*\
  !*** ./libs/common/src/lib/api.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   toQueryString: () => (/* binding */ toQueryString)
/* harmony export */ });
const IGNORE_VALUES = [undefined, null, ''];
/**
 * Convert map into a query string
 * @param map Key value pairs to convert
 */
function toQueryString(map) {
  let str = '';
  if (map) {
    for (const key in map) {
      if (key in map && !IGNORE_VALUES.includes(map[key])) {
        str += `${str ? '&' : ''}${key}=${encodeURIComponent(map[key])}`;
      }
    }
  }
  return str;
}

/***/ }),

/***/ 60375:
/*!********************************************!*\
  !*** ./libs/common/src/lib/application.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   clearCacheCheck: () => (/* binding */ clearCacheCheck),
/* harmony export */   hasNewVersion: () => (/* binding */ hasNewVersion),
/* harmony export */   setupCache: () => (/* binding */ setupCache)
/* harmony export */ });
/* harmony import */ var _home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 89204);
/* harmony import */ var _general__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./general */ 64217);
/* harmony import */ var _notifications__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./notifications */ 39525);



let _timer;
let _new_version = false;
function hasNewVersion() {
  return _new_version;
}
/**
 * Setup handler for cache change events
 * @param cache Angular Service worker service
 * @param notify Function to call on changes to the cache
 * @param interval Time interval to check the cache for changes
 */
function setupCache(cache, interval = 5 * 60 * 1000) {
  if (cache.isEnabled) {
    if (_timer) clearInterval(_timer);
    _timer = setInterval(() => {
      (0,_general__WEBPACK_IMPORTED_MODULE_1__.log)('CACHE', `Checking for updates...`);
      activateUpdate(cache);
    }, interval);
  }
}
function clearCacheCheck() {
  if (_timer) clearInterval(_timer);
}
/**
 * Update the cache and reload the page
 *
 */
function activateUpdate(_x) {
  return _activateUpdate.apply(this, arguments);
}
function _activateUpdate() {
  _activateUpdate = (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* (cache) {
    if (cache.isEnabled && (yield cache.checkForUpdate())) {
      (0,_general__WEBPACK_IMPORTED_MODULE_1__.log)('CACHE', `Activating changes to the cache...`);
      if (!(yield cache.activateUpdate())) return;
      _new_version = true;
      (0,_notifications__WEBPACK_IMPORTED_MODULE_2__.notifyInfo)('Newer version of the application is available', 'Refresh', () => location.reload());
    }
  });
  return _activateUpdate.apply(this, arguments);
}

/***/ }),

/***/ 75354:
/*!****************************************************!*\
  !*** ./libs/common/src/lib/async-handler.class.ts ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AsyncHandler: () => (/* binding */ AsyncHandler)
/* harmony export */ });
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! rxjs */ 90521);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! rxjs */ 2842);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/core */ 37580);


/**
 * Class for handling cleanup of async methods when components are destroyed.
 * Async methods include Subscriptions, Timeouts and Intervals
 */
class AsyncHandler {
  constructor() {
    /** Store for named timers */
    this._timers = {};
    /** Store for named intervals */
    this._intervals = {};
    /** Store for named subscription unsub callbacks */
    this._subscriptions = {};
    /** Subject which stores the initialised state of the object */
    this._initialised = new rxjs__WEBPACK_IMPORTED_MODULE_0__.BehaviorSubject(false);
    /** Observable of the initialised state of the object */
    this.initialised = this._initialised.asObservable();
  }
  /** Whether the object has been initialised */
  get is_initialised() {
    return this._initialised.getValue();
  }
  ngOnDestroy() {
    this.destroy();
  }
  destroy() {
    for (const key in this._timers) {
      if (key in this._timers) {
        this.clearTimeout(key);
      }
    }
    for (const key in this._intervals) {
      if (key in this._intervals) {
        this.clearInterval(key);
      }
    }
    for (const key in this._subscriptions) {
      if (key in this._subscriptions) {
        this.unsub(key);
      }
    }
  }
  /**
   * Creates a named timer
   * @param name Name of the timer
   * @param fn Callback function for the timer
   * @param delay Callback delay
   */
  timeout(name, fn, delay = 300) {
    if (name && fn && fn instanceof Function) {
      this.clearTimeout(name);
      this._timers[name] = setTimeout(() => {
        fn();
        delete this._timers[name];
      }, delay);
    } else {
      throw new Error(name ? 'Cannot create named timeout without a name' : 'Cannot create a timeout without a callback');
    }
  }
  /**
   * Clears the named timer
   * @param name Timer name
   */
  clearTimeout(name) {
    if (this._timers[name]) {
      clearTimeout(this._timers[name]);
      delete this._timers[name];
    }
  }
  /**
   * Creates a named interval
   * @param name Name of the interval
   * @param fn Callback function for the interval
   * @param delay Callback delay
   */
  interval(name, fn, delay = 300) {
    if (name && fn && fn instanceof Function) {
      this.clearInterval(name);
      this._intervals[name] = setInterval(() => fn(), delay);
    } else {
      throw new Error(name ? 'Cannot create named interval without a name' : 'Cannot create a interval without a callback');
    }
  }
  /**
   * Clears the named interval
   * @param name Timer name
   */
  clearInterval(name) {
    if (this._intervals[name]) {
      clearInterval(this._intervals[name]);
      delete this._intervals[name];
    }
  }
  /**
   * Store named subscription
   * @param name Name of the subscription
   * @param unsub Unsubscribe callback or Subscription object
   */
  subscription(name, unsub) {
    this.unsub(name);
    this._subscriptions[name] = unsub;
  }
  hasSubscription(name) {
    return this._subscriptions[name] instanceof rxjs__WEBPACK_IMPORTED_MODULE_1__.Subscription || !!this._subscriptions[name];
  }
  /**
   * Call unsubscribe callback with the given name
   * @param name
   */
  unsub(name) {
    if (name in this._subscriptions) {
      if (this._subscriptions[name] instanceof rxjs__WEBPACK_IMPORTED_MODULE_1__.Subscription) {
        this._subscriptions[name].unsubscribe();
      } else if (this._subscriptions[name]) {
        this._subscriptions[name]();
      }
      delete this._subscriptions[name];
    }
  }
  /** Unsubscribe to the items with names containing the given string */
  unsubWith(contains) {
    const subs = Object.keys(this._subscriptions).filter(k => k.includes(contains));
    for (const key of subs) {
      this.unsub(key);
    }
  }
  static #_ = this.ɵfac = function AsyncHandler_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || AsyncHandler)();
  };
  static #_2 = this.ɵprov = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdefineInjectable"]({
    token: AsyncHandler,
    factory: AsyncHandler.ɵfac,
    providedIn: 'root'
  });
}

/***/ }),

/***/ 10380:
/*!**********************************************!*\
  !*** ./libs/common/src/lib/booking-rules.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   addToDate: () => (/* binding */ addToDate),
/* harmony export */   checkRulesMatch: () => (/* binding */ checkRulesMatch),
/* harmony export */   filterResourcesFromRules: () => (/* binding */ filterResourcesFromRules),
/* harmony export */   rulesForResource: () => (/* binding */ rulesForResource),
/* harmony export */   stringToMinutes: () => (/* binding */ stringToMinutes)
/* harmony export */ });
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! date-fns */ 49675);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! date-fns */ 55882);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! date-fns */ 91543);

const MINUTE = 1;
const HOUR = 60;
const DAY = 24 * HOUR;
const WEEK = 7 * DAY;
const MONTH = 30 * DAY;
const DURATION_MAP = {
  month: MONTH,
  months: MONTH,
  week: WEEK,
  weeks: WEEK,
  day: DAY,
  days: DAY,
  hour: HOUR,
  hours: HOUR,
  minute: MINUTE,
  minutes: MINUTE
};
const DEFAULT_RULES = {
  auto_approve: true,
  hidden: false
};
/**
 * Conver time string into minutes
 * @param str timestring e.g. `'1 day'`, `'15 minutes'`, `'2 weeks'`
 */
function stringToMinutes(str) {
  const parts = (str || '').split(' ');
  return parts.length > 1 ? +parts[0] * DURATION_MAP[parts[1].toLowerCase()] : 0;
}
function addToDate(add, date = new Date()) {
  return (0,date_fns__WEBPACK_IMPORTED_MODULE_0__.addMinutes)(date, stringToMinutes(add));
}
function filterResourcesFromRules(resources, details, ruleset_list) {
  return resources.filter(_ => !rulesForResource({
    ...details,
    resource: _
  }, ruleset_list)?.hidden);
}
function rulesForResource(details, ruleset_list) {
  if (!(ruleset_list instanceof Array)) return DEFAULT_RULES;
  for (const ruleset of ruleset_list) {
    if (ruleset.zone === '*' || ruleset.zone === details.resource.zone?.id || details.resource.zones?.includes(ruleset.zone)) {
      if (checkRulesMatch(details, ruleset)) {
        // console.log(
        //     'Matched Ruleset:',
        //     details.resource.id,
        //     details,
        //     ruleset
        // );
        return ruleset.rules;
      }
    }
  }
  // console.log(
  //     'No Matched Ruleset:',
  //     details.resource.id,
  //     details,
  //     DEFAULT_RULES
  // );
  return DEFAULT_RULES;
}
function checkRulesMatch({
  date,
  duration,
  host,
  resource
}, ruleset) {
  const date_obj = new Date(date);
  let matches = 0;
  const {
    conditions
  } = ruleset;
  if (!conditions) return true;
  if (conditions.groups instanceof Array && conditions.groups.every(_ => host?.groups?.includes(_))) matches += 1;
  if (conditions.is_before && (0,date_fns__WEBPACK_IMPORTED_MODULE_1__.isBefore)((0,date_fns__WEBPACK_IMPORTED_MODULE_0__.addMinutes)(date, duration), addToDate(conditions.is_before))) matches += 1;
  if (conditions.is_after && (0,date_fns__WEBPACK_IMPORTED_MODULE_2__.isAfter)(date, addToDate(conditions.is_after))) matches += 1;
  if (conditions.min_length && conditions.min_length <= duration) matches += 1;
  if (conditions.is_between && date_obj.getHours() + date_obj.getMinutes() / 60 >= conditions.is_between[0] && date_obj.getHours() + date_obj.getMinutes() / 60 < conditions.is_between[1]) matches += 1;
  if (conditions.is_period && date >= conditions.is_period[0] && date < conditions.is_period[1]) matches += 1;
  if (conditions.max_length && conditions.max_length >= duration) matches += 1;
  if (conditions.resource_ids && conditions.resource_ids.includes(resource.id)) matches += 1;
  if (conditions.locations && conditions.locations.includes(resource.name)) matches += 1;
  return matches >= Object.keys(conditions).length;
}

/***/ }),

/***/ 44571:
/*!***********************************************!*\
  !*** ./libs/common/src/lib/calendar-links.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   generateCalendarFileLink: () => (/* binding */ generateCalendarFileLink),
/* harmony export */   generateGoogleCalendarLink: () => (/* binding */ generateGoogleCalendarLink),
/* harmony export */   generateMicrosoftCalendarLink: () => (/* binding */ generateMicrosoftCalendarLink)
/* harmony export */ });
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! date-fns */ 45726);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! date-fns */ 23206);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! date-fns */ 77177);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! date-fns */ 49675);
/* harmony import */ var _api__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./api */ 38385);
/* harmony import */ var _timezone_helpers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./timezone-helpers */ 35774);
/* harmony import */ var _general__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./general */ 64217);




function formatUTC(date) {
  const utc_date = (0,_timezone_helpers__WEBPACK_IMPORTED_MODULE_1__.localToTimezone)(date, 'UTC');
  return `${(0,date_fns__WEBPACK_IMPORTED_MODULE_3__.format)(utc_date, 'yyyyMMdd')}T${(0,date_fns__WEBPACK_IMPORTED_MODULE_3__.format)(utc_date, 'HHmmss')}Z`;
}
function formatAllDay(date) {
  return `${(0,date_fns__WEBPACK_IMPORTED_MODULE_3__.format)(date, 'yyyyMMdd')}`;
}
function generateCalendarFileLink(event) {
  const chunks = [];
  const description = formatCalFileText(`${event.body || ''}${event.id ? '\n\n[ID|' + event.id + ']' : ''}`);
  const location = formatCalFileText(`${event.location}`);
  chunks.push(['BEGIN', 'VCALENDAR']);
  chunks.push(['VERSION', '2.0']);
  chunks.push(['BEGIN', 'VEVENT']);
  chunks.push(['URL', `${event.meeting_url}`]);
  chunks.push(['DTSTART', `${new Date(event.all_day ? (0,date_fns__WEBPACK_IMPORTED_MODULE_4__.startOfMinute)((0,date_fns__WEBPACK_IMPORTED_MODULE_5__.set)(event.date, {
    hours: 6,
    minutes: 0
  })) : event.date).toISOString()}`]);
  chunks.push(['DTEND', `${event.all_day ? (0,date_fns__WEBPACK_IMPORTED_MODULE_4__.startOfMinute)((0,date_fns__WEBPACK_IMPORTED_MODULE_5__.set)(event.date, {
    hours: 18,
    minutes: 0
  })).toISOString() : (0,date_fns__WEBPACK_IMPORTED_MODULE_6__.addMinutes)(event.date, event.duration ?? 60).toISOString()}`]);
  chunks.push(['SUMMARY', `${event.title}`]);
  chunks.push(['DESCRIPTION', description]);
  chunks.push(['LOCATION', location]);
  const host = event.organiser?.name || event.host?.split('@') || event.user_name || 'User';
  chunks.push(['ORGANIZER', `CN=${host}:MAILTO:${event.host || event.user_email}`]);
  const url_data = chunks.map(([key, value]) => `${key}:${encodeURIComponent(value)}`).join('\n');
  return `data:text/calendar;charset=utf8,${url_data}`;
}
function generateGoogleCalendarLink(event) {
  const fmt = event.all_day ? formatAllDay : formatUTC;
  const details = {
    action: 'TEMPLATE',
    text: event.title,
    details: `${event.body || ''}${event.id ? '\n\n[ID|' + event.id + ']' : ''}`,
    location: event.location,
    trp: false,
    dates: `${fmt(event.date)}/${fmt((0,date_fns__WEBPACK_IMPORTED_MODULE_6__.addMinutes)(event.date, event.duration ?? 60))}`
  };
  const emails = (event.attendees || []).map(_ => _.email || _);
  const resources = ((event.resources?.length ? event.resources : null) || [event.system]).map(_ => _?.email || _);
  if (emails.length || resources.length) details.add = (0,_general__WEBPACK_IMPORTED_MODULE_2__.unique)([...emails, ...resources]).join();
  return `https://calendar.google.com/calendar/render?${(0,_api__WEBPACK_IMPORTED_MODULE_0__.toQueryString)(details)}`;
}
function generateMicrosoftCalendarLink(event, type = 'office') {
  if (!event.date) event.date = Date.now();
  const data = {
    path: '/calendar/action/compose',
    rru: 'addevent',
    startdt: new Date(event.date).toISOString(),
    enddt: (0,date_fns__WEBPACK_IMPORTED_MODULE_6__.addMinutes)(event.date, event.duration ?? 60).toISOString(),
    subject: event.title,
    body: `${event.body || ''}${event.id ? '\n\n[ID|' + event.id + ']' : ''}`,
    location: event.location,
    allday: event.all_day ?? false
  };
  if (event.all_day) delete data.enddt;
  const emails = (event.attendees || []).map(_ => _.email || _);
  const resources = ((event.resources?.length ? event.resources : null) || [event.system]).map(_ => _?.email || _);
  if (emails.length || resources.length) data.to = (0,_general__WEBPACK_IMPORTED_MODULE_2__.unique)([...emails, ...resources]).join();
  return type === 'office' ? `https://outlook.office.com/calendar/0/action/compose?${(0,_api__WEBPACK_IMPORTED_MODULE_0__.toQueryString)(data)}` : `https://outlook.live.com/calendar/0/action/compose?${(0,_api__WEBPACK_IMPORTED_MODULE_0__.toQueryString)(data)}`;
}
function formatCalFileText(str) {
  return str.replace(/,/gm, ',').replace(/;/gm, ';').replace(/\r\n/gm, '\n').replace(/\n/gm, '\\n').replace(/(\\n)[\s\t]+/gm, '\\n');
}

/***/ }),

/***/ 39248:
/*!***************************************!*\
  !*** ./libs/common/src/lib/common.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ANIMATION_SHOW_CONTRACT_EXPAND: () => (/* reexport safe */ _angular_animations__WEBPACK_IMPORTED_MODULE_7__.ANIMATION_SHOW_CONTRACT_EXPAND),
/* harmony export */   ANIMATION_SHOW_ENTER_LEAVE: () => (/* reexport safe */ _angular_animations__WEBPACK_IMPORTED_MODULE_7__.ANIMATION_SHOW_ENTER_LEAVE),
/* harmony export */   AsyncHandler: () => (/* reexport safe */ _async_handler_class__WEBPACK_IMPORTED_MODULE_0__.AsyncHandler),
/* harmony export */   DEFAULT_SETTINGS: () => (/* reexport safe */ _settings__WEBPACK_IMPORTED_MODULE_15__.DEFAULT_SETTINGS),
/* harmony export */   GoogleAnalyticsService: () => (/* reexport safe */ _google_analytics_service__WEBPACK_IMPORTED_MODULE_1__.GoogleAnalyticsService),
/* harmony export */   HotkeysService: () => (/* reexport safe */ _hotkeys_service__WEBPACK_IMPORTED_MODULE_2__.HotkeysService),
/* harmony export */   MapsPeopleService: () => (/* reexport safe */ _mapspeople_service__WEBPACK_IMPORTED_MODULE_6__.MapsPeopleService),
/* harmony export */   SettingsService: () => (/* reexport safe */ _settings_service__WEBPACK_IMPORTED_MODULE_3__.SettingsService),
/* harmony export */   TIMEZONES: () => (/* reexport safe */ _timezones__WEBPACK_IMPORTED_MODULE_19__.TIMEZONES),
/* harmony export */   TIMEZONES_IANA: () => (/* reexport safe */ _timezones__WEBPACK_IMPORTED_MODULE_19__.TIMEZONES_IANA),
/* harmony export */   VERSION: () => (/* reexport safe */ _version__WEBPACK_IMPORTED_MODULE_5__.VERSION),
/* harmony export */   VorlonService: () => (/* reexport safe */ _vorlon_service__WEBPACK_IMPORTED_MODULE_4__.VorlonService),
/* harmony export */   calculateDistance: () => (/* reexport safe */ _general__WEBPACK_IMPORTED_MODULE_11__.calculateDistance),
/* harmony export */   capitalizeFirstLetter: () => (/* reexport safe */ _general__WEBPACK_IMPORTED_MODULE_11__.capitalizeFirstLetter),
/* harmony export */   cleanArray: () => (/* reexport safe */ _general__WEBPACK_IMPORTED_MODULE_11__.cleanArray),
/* harmony export */   clearCacheCheck: () => (/* reexport safe */ _application__WEBPACK_IMPORTED_MODULE_9__.clearCacheCheck),
/* harmony export */   csvToJson: () => (/* reexport safe */ _general__WEBPACK_IMPORTED_MODULE_11__.csvToJson),
/* harmony export */   currentUser: () => (/* reexport safe */ _user_state__WEBPACK_IMPORTED_MODULE_17__.currentUser),
/* harmony export */   current_user: () => (/* reexport safe */ _user_state__WEBPACK_IMPORTED_MODULE_17__.current_user),
/* harmony export */   downloadFile: () => (/* reexport safe */ _general__WEBPACK_IMPORTED_MODULE_11__.downloadFile),
/* harmony export */   flatten: () => (/* reexport safe */ _general__WEBPACK_IMPORTED_MODULE_11__.flatten),
/* harmony export */   formatRecurrence: () => (/* reexport safe */ _formatting__WEBPACK_IMPORTED_MODULE_10__.formatRecurrence),
/* harmony export */   getInvalidFields: () => (/* reexport safe */ _general__WEBPACK_IMPORTED_MODULE_11__.getInvalidFields),
/* harmony export */   getItemWithKeys: () => (/* reexport safe */ _general__WEBPACK_IMPORTED_MODULE_11__.getItemWithKeys),
/* harmony export */   hasNewVersion: () => (/* reexport safe */ _application__WEBPACK_IMPORTED_MODULE_9__.hasNewVersion),
/* harmony export */   hexToRgb: () => (/* reexport safe */ _general__WEBPACK_IMPORTED_MODULE_11__.hexToRgb),
/* harmony export */   interpolateColors: () => (/* reexport safe */ _general__WEBPACK_IMPORTED_MODULE_11__.interpolateColors),
/* harmony export */   is24HourTime: () => (/* reexport safe */ _general__WEBPACK_IMPORTED_MODULE_11__.is24HourTime),
/* harmony export */   isMobileSafari: () => (/* reexport safe */ _general__WEBPACK_IMPORTED_MODULE_11__.isMobileSafari),
/* harmony export */   isNestedFrame: () => (/* reexport safe */ _general__WEBPACK_IMPORTED_MODULE_11__.isNestedFrame),
/* harmony export */   jsonToCsv: () => (/* reexport safe */ _general__WEBPACK_IMPORTED_MODULE_11__.jsonToCsv),
/* harmony export */   loadTextFileFromInputEvent: () => (/* reexport safe */ _general__WEBPACK_IMPORTED_MODULE_11__.loadTextFileFromInputEvent),
/* harmony export */   log: () => (/* reexport safe */ _general__WEBPACK_IMPORTED_MODULE_11__.log),
/* harmony export */   mergeRoomConfig: () => (/* reexport safe */ _room_configuration_interface__WEBPACK_IMPORTED_MODULE_14__.mergeRoomConfig),
/* harmony export */   notify: () => (/* reexport safe */ _notifications__WEBPACK_IMPORTED_MODULE_12__.notify),
/* harmony export */   notifyError: () => (/* reexport safe */ _notifications__WEBPACK_IMPORTED_MODULE_12__.notifyError),
/* harmony export */   notifyInfo: () => (/* reexport safe */ _notifications__WEBPACK_IMPORTED_MODULE_12__.notifyInfo),
/* harmony export */   notifySuccess: () => (/* reexport safe */ _notifications__WEBPACK_IMPORTED_MODULE_12__.notifySuccess),
/* harmony export */   notifyWarn: () => (/* reexport safe */ _notifications__WEBPACK_IMPORTED_MODULE_12__.notifyWarn),
/* harmony export */   openConfirmModal: () => (/* reexport safe */ _general__WEBPACK_IMPORTED_MODULE_11__.openConfirmModal),
/* harmony export */   padString: () => (/* reexport safe */ _general__WEBPACK_IMPORTED_MODULE_11__.padString),
/* harmony export */   parseJWT: () => (/* reexport safe */ _general__WEBPACK_IMPORTED_MODULE_11__.parseJWT),
/* harmony export */   predictableRandomInt: () => (/* reexport safe */ _general__WEBPACK_IMPORTED_MODULE_11__.predictableRandomInt),
/* harmony export */   randomInt: () => (/* reexport safe */ _general__WEBPACK_IMPORTED_MODULE_11__.randomInt),
/* harmony export */   randomString: () => (/* reexport safe */ _general__WEBPACK_IMPORTED_MODULE_11__.randomString),
/* harmony export */   reloadUserData: () => (/* reexport safe */ _user_state__WEBPACK_IMPORTED_MODULE_17__.reloadUserData),
/* harmony export */   removeEmptyFields: () => (/* reexport safe */ _general__WEBPACK_IMPORTED_MODULE_11__.removeEmptyFields),
/* harmony export */   rgbToHex: () => (/* reexport safe */ _general__WEBPACK_IMPORTED_MODULE_11__.rgbToHex),
/* harmony export */   roomConfigBuilder: () => (/* reexport safe */ _room_configuration_interface__WEBPACK_IMPORTED_MODULE_14__.roomConfigBuilder),
/* harmony export */   setAppName: () => (/* reexport safe */ _general__WEBPACK_IMPORTED_MODULE_11__.setAppName),
/* harmony export */   setNotifyOutlet: () => (/* reexport safe */ _notifications__WEBPACK_IMPORTED_MODULE_12__.setNotifyOutlet),
/* harmony export */   setupCache: () => (/* reexport safe */ _application__WEBPACK_IMPORTED_MODULE_9__.setupCache),
/* harmony export */   setupPlace: () => (/* reexport safe */ _placeos__WEBPACK_IMPORTED_MODULE_13__.setupPlace),
/* harmony export */   shiftColorTowards: () => (/* reexport safe */ _general__WEBPACK_IMPORTED_MODULE_11__.shiftColorTowards),
/* harmony export */   shuffleArray: () => (/* reexport safe */ _general__WEBPACK_IMPORTED_MODULE_11__.shuffleArray),
/* harmony export */   shuffleArrayWithFirstItem: () => (/* reexport safe */ _general__WEBPACK_IMPORTED_MODULE_11__.shuffleArrayWithFirstItem),
/* harmony export */   timeFormatString: () => (/* reexport safe */ _general__WEBPACK_IMPORTED_MODULE_11__.timeFormatString),
/* harmony export */   timePeriodsIntersect: () => (/* reexport safe */ _general__WEBPACK_IMPORTED_MODULE_11__.timePeriodsIntersect),
/* harmony export */   toQueryString: () => (/* reexport safe */ _api__WEBPACK_IMPORTED_MODULE_8__.toQueryString),
/* harmony export */   unique: () => (/* reexport safe */ _general__WEBPACK_IMPORTED_MODULE_11__.unique),
/* harmony export */   whenChangesStable: () => (/* reexport safe */ _spec_helpers__WEBPACK_IMPORTED_MODULE_18__.whenChangesStable)
/* harmony export */ });
/* harmony import */ var _async_handler_class__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./async-handler.class */ 75354);
/* harmony import */ var _google_analytics_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./google-analytics.service */ 83114);
/* harmony import */ var _hotkeys_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./hotkeys.service */ 47643);
/* harmony import */ var _settings_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./settings.service */ 14233);
/* harmony import */ var _vorlon_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./vorlon.service */ 94972);
/* harmony import */ var _version__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./version */ 93885);
/* harmony import */ var _mapspeople_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./mapspeople.service */ 99420);
/* harmony import */ var _angular_animations__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./angular-animations */ 96159);
/* harmony import */ var _api__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./api */ 38385);
/* harmony import */ var _application__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./application */ 60375);
/* harmony import */ var _formatting__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./formatting */ 99042);
/* harmony import */ var _general__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./general */ 64217);
/* harmony import */ var _notifications__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./notifications */ 39525);
/* harmony import */ var _placeos__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./placeos */ 71676);
/* harmony import */ var _room_configuration_interface__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./room-configuration.interface */ 5392);
/* harmony import */ var _settings__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./settings */ 43060);
/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./types */ 63464);
/* harmony import */ var _user_state__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./user-state */ 37958);
/* harmony import */ var _spec_helpers__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./spec-helpers */ 22310);
/* harmony import */ var _timezones__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./timezones */ 14369);





















/***/ }),

/***/ 3422:
/*!********************************************************!*\
  !*** ./libs/common/src/lib/feature-available.guard.ts ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   FeatureAvailableGuard: () => (/* binding */ FeatureAvailableGuard),
/* harmony export */   PLACEOS_APP_ACCESS: () => (/* binding */ PLACEOS_APP_ACCESS)
/* harmony export */ });
/* harmony import */ var _home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 89204);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! rxjs/operators */ 57871);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var _placeos_organisation__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @placeos/organisation */ 2510);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/router */ 95072);









class PLACEOS_APP_ACCESS {}
class FeatureAvailableGuard {
  constructor(_router, _settings, _org) {
    this._router = _router;
    this._settings = _settings;
    this._org = _org;
  }
  canActivate() {
    var _this = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      return _this.checkFeature();
    })();
  }
  canLoad() {
    var _this2 = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      return _this2.checkFeature();
    })();
  }
  checkFeature() {
    var _this3 = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      yield _this3._org.initialised.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.first)(_ => _)).toPromise();
      yield _this3._settings.initialised.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.first)(_ => _)).toPromise();
      const features = _this3._settings.get('app.disabled_features') || [];
      const can_activate = !features.find(_ => _this3._router.url.includes(_));
      if (!can_activate) {
        _this3._router.navigate(['/']);
      }
      return !!can_activate;
    })();
  }
  static #_ = this.ɵfac = function FeatureAvailableGuard_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || FeatureAvailableGuard)(_angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵinject"](_angular_router__WEBPACK_IMPORTED_MODULE_5__.Router), _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵinject"](_placeos_common__WEBPACK_IMPORTED_MODULE_1__.SettingsService), _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵinject"](_placeos_organisation__WEBPACK_IMPORTED_MODULE_2__.OrganisationService));
  };
  static #_2 = this.ɵprov = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵdefineInjectable"]({
    token: FeatureAvailableGuard,
    factory: FeatureAvailableGuard.ɵfac,
    providedIn: 'root'
  });
}

/***/ }),

/***/ 74894:
/*!*****************************************************!*\
  !*** ./libs/common/src/lib/fixed-device-helpers.ts ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   requestScreenWakeLock: () => (/* binding */ requestScreenWakeLock)
/* harmony export */ });
/* harmony import */ var _home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 89204);

let _wake_lock = null;
function requestScreenWakeLock() {
  return _requestScreenWakeLock.apply(this, arguments);
}
function _requestScreenWakeLock() {
  _requestScreenWakeLock = (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
    if (_wake_lock) {
      yield _wake_lock.release();
    }
    // create an async function to request a wake lock
    try {
      _wake_lock = yield navigator.wakeLock.request('screen');
    } catch (err) {
      throw err;
    }
  });
  return _requestScreenWakeLock.apply(this, arguments);
}
document.addEventListener('visibilitychange', /*#__PURE__*/(0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
  if (_wake_lock !== null && document.visibilityState === 'visible') {
    _wake_lock = yield navigator.wakeLock.request('screen');
  }
}));

/***/ }),

/***/ 99042:
/*!*******************************************!*\
  !*** ./libs/common/src/lib/formatting.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   formatRecurrence: () => (/* binding */ formatRecurrence)
/* harmony export */ });
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! date-fns */ 45726);

function formatRecurrence(details) {
  let pattern = details.pattern || '';
  pattern = pattern.charAt(0).toUpperCase() + pattern.slice(1);
  return pattern ? `${pattern} until ${(0,date_fns__WEBPACK_IMPORTED_MODULE_0__.format)(new Date(details.end), 'do MMM yyyy')}` : '<No Recurrence>';
}

/***/ }),

/***/ 64217:
/*!****************************************!*\
  !*** ./libs/common/src/lib/general.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   calculateDistance: () => (/* binding */ calculateDistance),
/* harmony export */   capitalizeFirstLetter: () => (/* binding */ capitalizeFirstLetter),
/* harmony export */   cleanArray: () => (/* binding */ cleanArray),
/* harmony export */   csvToJson: () => (/* binding */ csvToJson),
/* harmony export */   downloadFile: () => (/* binding */ downloadFile),
/* harmony export */   flatten: () => (/* binding */ flatten),
/* harmony export */   getInvalidFields: () => (/* binding */ getInvalidFields),
/* harmony export */   getItemWithKeys: () => (/* binding */ getItemWithKeys),
/* harmony export */   hexToRgb: () => (/* binding */ hexToRgb),
/* harmony export */   interpolateColors: () => (/* binding */ interpolateColors),
/* harmony export */   is24HourTime: () => (/* binding */ is24HourTime),
/* harmony export */   isMobileSafari: () => (/* binding */ isMobileSafari),
/* harmony export */   isNestedFrame: () => (/* binding */ isNestedFrame),
/* harmony export */   jsonToCsv: () => (/* binding */ jsonToCsv),
/* harmony export */   loadTextFileFromInputEvent: () => (/* binding */ loadTextFileFromInputEvent),
/* harmony export */   log: () => (/* binding */ log),
/* harmony export */   openConfirmModal: () => (/* binding */ openConfirmModal),
/* harmony export */   padString: () => (/* binding */ padString),
/* harmony export */   parseJWT: () => (/* binding */ parseJWT),
/* harmony export */   predictableRandomInt: () => (/* binding */ predictableRandomInt),
/* harmony export */   randomInt: () => (/* binding */ randomInt),
/* harmony export */   randomString: () => (/* binding */ randomString),
/* harmony export */   removeEmptyFields: () => (/* binding */ removeEmptyFields),
/* harmony export */   rgbToHex: () => (/* binding */ rgbToHex),
/* harmony export */   setAppName: () => (/* binding */ setAppName),
/* harmony export */   shiftColorTowards: () => (/* binding */ shiftColorTowards),
/* harmony export */   shuffleArray: () => (/* binding */ shuffleArray),
/* harmony export */   shuffleArrayWithFirstItem: () => (/* binding */ shuffleArrayWithFirstItem),
/* harmony export */   timeFormatString: () => (/* binding */ timeFormatString),
/* harmony export */   timePeriodsIntersect: () => (/* binding */ timePeriodsIntersect),
/* harmony export */   unique: () => (/* binding */ unique)
/* harmony export */ });
/* harmony import */ var _home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 89204);
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/forms */ 34456);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! rxjs/operators */ 57871);
/* harmony import */ var _components_src_lib_confirm_modal_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../components/src/lib/confirm-modal.component */ 30841);




let _app_name = 'APP';
function setAppName(name) {
  _app_name = name;
}
/**
 * Log data to the browser console
 * @param type Type of message
 * @param msg Message body
 * @param args array of argments to log to the console
 * @param stream Stream to emit the console on. 'debug', 'log', 'warn' or 'error'
 * @param force Whether to force message to be emitted when debug is disabled
 */
function log(type, msg, args, stream = 'debug', force = false, app_name = _app_name) {
  if (window.jest) return;
  if (window.debug || force) {
    const colors = ['color: #E91E63', 'color: #3F51B5', 'color: default'];
    if (args) {
      console[stream](`%c[${app_name}]%c[${type}] %c${msg}`, ...colors, args);
    } else {
      console[stream](`%c[${app_name}]%c[${type}] %c${msg}`, ...colors);
    }
  }
}
/**
 * Get item from the nested object
 * @param keys List of sub-keys to search for
 * @param map Object to search
 */
function getItemWithKeys(keys, map) {
  const key = keys[0];
  if (map && key in map) {
    return keys.length > 1 ? getItemWithKeys(keys.slice(1), map[key] || {}) : map[key];
  }
  return null;
}
/**
 * Remove duplicates from the given array
 * @param array List of items to remove duplicates from
 * @param key Key on array objects to compare for uniqueness
 */
function unique(array = [], key = '') {
  const keys = [];
  return array.filter(el => {
    const id = key ? el[key] : el;
    const exists = keys.includes(id);
    if (!exists) keys.push(id);
    return !exists;
  });
}
/**
 * Generate a random number
 * @param ceil Biggest value to generate not inclusive
 * @param floor Smallest value to generate. Defaults to 0
 */
function randomInt(ceil, floor = 0) {
  return Math.floor(Math.random() * (ceil - floor)) + floor;
}
/**
 * Pad string to the given length
 * @param str Base string
 * @param length Length to pad the string
 */
function padString(str, length = 5) {
  str = `${str}`;
  while (str.length < length) str = `0${str}`;
  return str;
}
/**
 * Generate a random string
 * @param length Length of the string
 * @param chars Available characters to use in the string
 */
function randomString(length, chars = 'abcdefghijklmnopqrstwvxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789') {
  let str = '';
  for (let i = 0; i < length; i++) {
    str += chars[randomInt(chars.length)];
  }
  return str;
}
function openConfirmModal(_x, _x2) {
  return _openConfirmModal.apply(this, arguments);
}
/**
 * Parse raw CSV data into a JSON object
 * @param csv CSV data to parse
 */
function _openConfirmModal() {
  _openConfirmModal = (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* (data, dialog) {
    const ref = dialog.open(_components_src_lib_confirm_modal_component__WEBPACK_IMPORTED_MODULE_1__.ConfirmModalComponent, {
      ..._components_src_lib_confirm_modal_component__WEBPACK_IMPORTED_MODULE_1__.CONFIRM_METADATA,
      data
    });
    return {
      ...(yield Promise.race([ref.componentInstance.event.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.first)(_ => _.reason === 'done')).toPromise(), ref.afterClosed().toPromise()])),
      loading: s => ref.componentInstance.loading = s,
      close: () => ref.close()
    };
  });
  return _openConfirmModal.apply(this, arguments);
}
function csvToJson(csv, delimiter = ',') {
  const objPattern = new RegExp('(\\,|\\r?\\n|\\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^\\,\\r\\n]*))', 'gi');
  let arrMatches = null;
  const arrData = [[]];
  while (arrMatches = objPattern.exec(csv)) {
    if (arrMatches[1].length && arrMatches[1] !== ',') arrData.push([]);
    arrData[arrData.length - 1].push(arrMatches[2] ? arrMatches[2]?.replace(new RegExp('""', 'g'), '"') : arrMatches[3]);
  }
  const headers = arrData.splice(0, 1)[0];
  const elements = arrData.map(row => {
    const element = {};
    for (let i = 0; i < row.length; i++) {
      const key = (headers[i] || '').split(' ').join('_').toLowerCase();
      try {
        element[key] = JSON.parse(row[i]?.replace('|', ','));
      } catch (e) {
        element[key] = row[i] || '';
      }
      if (element[key] === 'TRUE' || element[key] === 'FALSE') element[key] = element[key] === 'TRUE';
    }
    return element;
  });
  return elements;
}
function loadTextFileFromInputEvent(event) {
  return new Promise((resolve, reject) => {
    /* istanbul ignore else */
    if (event.target) {
      const element = event.target;
      const file = element.files[0];
      /* istanbul ignore else */
      if (file) {
        const reader = new FileReader();
        reader.readAsText(file, 'UTF-8');
        reader.addEventListener('load', evt => {
          resolve(evt.srcElement.result);
          element.value = '';
        });
        reader.addEventListener('error', _ => {
          this.loading = '';
          reject(['Error loading file', _]);
        });
      }
    }
  });
}
/**
 * Convert javascript array to CSV string
 * @param json Javascript array to convert
 */
function jsonToCsv(json, seperator = ',') {
  if (json instanceof Array && json.length > 0) {
    const keys = Object.keys(json[0]);
    const valid_keys = keys.filter(key => key in json[0]);
    return `${valid_keys.join(seperator)}\n${json.map(item => valid_keys.map(key => (JSON.stringify(item[key]) || '')?.replace(',', '|')).join(seperator)).join('\n')}`;
  }
  return '';
}
/**
 * Downloads a file to the users computer with the given filename and contents
 * @param filename Name of the file to download
 * @param contents Contents of the file to download
 */
function downloadFile(filename, contents) {
  const element = document.createElement('a');
  element.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(contents));
  element.setAttribute('download', filename);
  element.style.display = 'none';
  document.body.appendChild(element);
  element.click();
  document.body.removeChild(element);
}
function parseJWT(token) {
  const base64Url = token.split('.')[1];
  const base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');
  const jsonPayload = decodeURIComponent(atob(base64).split('').map(c => {
    return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);
  }).join(''));
  return JSON.parse(jsonPayload);
}
/* istanbul ignore next */
/**
 * Flatten nested array
 * @param an_array Array to flatten
 */
function flatten(an_array) {
  const stack = [...an_array];
  const res = [];
  while (stack.length) {
    // pop value from stack
    const next = stack.pop();
    if (Array.isArray(next)) {
      // push back array items, won't modify the original input
      stack.push(...next);
    } else {
      res.push(next);
    }
  }
  // reverse to restore input order
  return res.reverse();
}
/**
 * Check whether two time periods intersect with each other
 * @param start1 Unix epoch in ms of the first period's start time
 * @param end1 Unix epoch in ms of the first period's end time
 * @param start2 Unix epoch in ms of the second period's start time
 * @param end2 Unix epoch in ms of the second period's end time
 */
function timePeriodsIntersect(s1, e1, s2, e2) {
  return s1 >= s2 && s1 < e2 || s2 >= s1 && s2 < e1 ||
  // Check start time
  e1 > s2 && e1 <= e2 || e2 > s1 && e2 <= e1 // Check end time
  ;
}
const seed = xmur3('PlaceOS');
const rand = sfc32(0x9e3779b9, 0x243f6a88, 0xb7e15162, seed());
function predictableRandomInt(ceil = 100, floor = 0) {
  return Math.floor(rand() * (ceil - floor)) + floor;
}
// https://stackoverflow.com/questions/521295/seeding-the-random-number-generator-in-javascript
function xmur3(str) {
  let h = 1779033703 ^ str.length;
  for (let i = 0; i < str.length; i++) h = Math.imul(h ^ str.charCodeAt(i), 3432918353), h = h << 13 | h >>> 19;
  return function () {
    h = Math.imul(h ^ h >>> 16, 2246822507);
    h = Math.imul(h ^ h >>> 13, 3266489909);
    return (h ^= h >>> 16) >>> 0;
  };
}
function sfc32(a, b, c, d) {
  return function () {
    a >>>= 0;
    b >>>= 0;
    c >>>= 0;
    d >>>= 0;
    let t = a + b | 0;
    a = b ^ b >>> 9;
    b = c + (c << 3) | 0;
    c = c << 21 | c >>> 11;
    d = d + 1 | 0;
    t = t + d | 0;
    c = c + t | 0;
    return (t >>> 0) / 4294967296;
  };
}
/** Get time format string for locale */
function timeFormatString() {
  return is24HourTime() ? 'HH:mm' : 'h:mm a';
}
/** Whether locale string is displayed in 24 hour time */
function is24HourTime() {
  const date = new Date();
  const localeString = date.toLocaleTimeString(document.querySelector('html').getAttribute('lang') || navigator.language).toLowerCase();
  return localeString.indexOf('am') < 0 && localeString.indexOf('pm') < 0;
}
function getInvalidFields(form, prefix = '') {
  let invalid = [];
  for (const key in form.controls) {
    if (form.controls[key] instanceof _angular_forms__WEBPACK_IMPORTED_MODULE_3__.FormGroup) {
      invalid = [...invalid, ...getInvalidFields(form.controls[key], `${key}.`)];
    } else if (!form.controls[key].valid) {
      invalid.push(`${prefix}${key}`);
    }
  }
  return invalid;
}
function removeEmptyFields(obj) {
  for (const key in obj) {
    if (obj[key] === undefined || obj[key] === null || obj[key] === '') {
      delete obj[key];
    }
  }
}
function capitalizeFirstLetter(word) {
  return `${word[0].toUpperCase()}${word.substring(1)}`;
}
function cleanArray(array, removal_items = [undefined, null, '']) {
  return array.filter(_ => !removal_items.includes(_));
}
function isMobileSafari() {
  return ['iPad Simulator', 'iPhone Simulator', 'iPod Simulator', 'iPad', 'iPhone', 'iPod'].includes(navigator.platform) ||
  // iPad on iOS 13 detection
  navigator.userAgent.includes('Mac') && 'ontouchend' in document;
}
function isNestedFrame() {
  return window.location !== window.parent.location;
}
// Calculate the distance between geographical cooridinates
function calculateDistance(lat1, lon1, lat2, lon2) {
  const radius = 6371; // Earth's radius in kilometers
  const dLat = degreesToRadians(lat2 - lat1);
  const dLon = degreesToRadians(lon2 - lon1);
  lat1 = degreesToRadians(lat1);
  lat2 = degreesToRadians(lat2);
  const a = Math.sin(dLat / 2) * Math.sin(dLat / 2) + Math.sin(dLon / 2) * Math.sin(dLon / 2) * Math.cos(lat1) * Math.cos(lat2);
  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
  return radius * c;
}
function degreesToRadians(degrees) {
  return degrees * (Math.PI / 180);
}
//////////////////////////////////////////
//////   Colour Conversion Utils   ///////
//////////////////////////////////////////
function hexToRgb(hex) {
  let r = parseInt(hex.slice(1, 3), 16);
  let g = parseInt(hex.slice(3, 5), 16);
  let b = parseInt(hex.slice(5, 7), 16);
  return [r, g, b];
}
function interpolateColors(rgb1, rgb2, fraction) {
  let r = rgb1[0] + (rgb2[0] - rgb1[0]) * fraction;
  let g = rgb1[1] + (rgb2[1] - rgb1[1]) * fraction;
  let b = rgb1[2] + (rgb2[2] - rgb1[2]) * fraction;
  return [Math.round(r), Math.round(g), Math.round(b)];
}
function rgbToHex(r, g, b) {
  function componentToHex(c) {
    const hex = c.toString(16);
    return hex.length == 1 ? '0' + hex : hex;
  }
  return '#' + componentToHex(r) + componentToHex(g) + componentToHex(b);
}
function shiftColorTowards(hex1, hex2, fraction) {
  const rgb1 = hexToRgb(hex1);
  const rgb2 = hexToRgb(hex2);
  const resultRgb = interpolateColors(rgb1, rgb2, fraction);
  return rgbToHex(resultRgb[0], resultRgb[1], resultRgb[2]);
}
/**
 * Shuffle the items in array into random order
 * @param array List of items to shuffle
 */
function shuffleArray(array) {
  for (let i = array.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [array[i], array[j]] = [array[j], array[i]];
  }
  return array;
}
/**
 * Shuffle the items in array into random order with a specific item as the first
 * @param array List of items to shuffle
 * @param first_index Index of the item in the list to set as first
 */
function shuffleArrayWithFirstItem(array, first_index) {
  // Move the specified item to the beginning
  const firstItem = array.splice(first_index, 1)[0];
  array.unshift(firstItem);
  // Shuffle the rest of the array (starting from index 1)
  for (let i = array.length - 1; i > 1; i--) {
    const j = Math.floor(Math.random() * (i - 1)) + 1;
    [array[i], array[j]] = [array[j], array[i]];
  }
  return array;
}

/***/ }),

/***/ 83114:
/*!*********************************************************!*\
  !*** ./libs/common/src/lib/google-analytics.service.ts ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   GoogleAnalyticsService: () => (/* binding */ GoogleAnalyticsService)
/* harmony export */ });
/* harmony import */ var _general__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./general */ 64217);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_platform_browser__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/platform-browser */ 80436);




class GoogleAnalyticsService {
  constructor(title) {
    this.title = title;
    /** Whether posting analytics events is enabled */
    this.enabled = true;
    /** Name of the application */
    this.app_name = 'GA_APP';
    /** Store for timer ids */
    this.timers = {};
  }
  init(tracking_id = '') {
    if (!window.gtag) {
      window.dataLayer = window.dataLayer || [];
      (function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({
          'gtm.start': new Date().getTime(),
          event: 'gtm.js'
        });
        var f = d.getElementsByTagName(s)[0],
          j = d.createElement(s),
          dl = l != 'dataLayer' ? '&l=' + l : '';
        j.async = true;
        j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
        f.parentNode.insertBefore(j, f);
      })(window, document, 'script', 'dataLayer', tracking_id);
      (0,_general__WEBPACK_IMPORTED_MODULE_0__.log)('Analytics', 'Service', 'Injected Google Analytics into page');
    }
    this.service = window.gtag;
  }
  push(obj) {
    window.dataLayer.push(obj);
  }
  /**
   * Initialise Google Analytics
   * @param tracking_id GA Tracking ID
   */
  load(tracking_id) {
    if (!this.enabled) {
      throw new Error('Google Analytics needs to be enabled before being initialised');
    }
    if (!this.service) {
      throw new Error("Google Analytics hasn't been installed on this page");
    }
    (0,_general__WEBPACK_IMPORTED_MODULE_0__.log)('Analytics', 'Service', `Setup with tracking ID: ${tracking_id}`);
    this.page('');
  }
  /**
   * Set User ID for the Google Analytics session
   * @param id Identifier of the User
   */
  setUser(id) {
    if (!this.service) {
      throw new Error("Google Analytics hasn't been installed on this page");
    }
    if (this.enabled) {
      this.timeout(`user|${id}`, () => {
        (0,_general__WEBPACK_IMPORTED_MODULE_0__.log)('Analytics', 'Service', `Set user ID: ${id}`);
        this.service('set', 'userId', id);
        this.event('authentication', 'user-id available');
      }, 100);
    }
  }
  send(type, value) {
    if (!this.service) {
      throw new Error("Google Analytics hasn't been installed on this page");
    }
    if (this.enabled) {
      this.timeout(`end|${type}`, () => {
        this.push({
          ...value,
          event: 'event'
        });
      });
    }
  }
  /**
   * Post event to Google Analytics API
   * @param category Event Category
   * @param action Event Action
   * @param label Event Label
   * @param value Event Value
   */
  event(category, action, label, value) {
    if (!this.service) {
      throw new Error("Google Analytics hasn't been installed on this page");
    }
    if (this.enabled) {
      this.timeout(`event|${category}|${action}|${label}|${value}`, () => {
        const l = label ? ', ' + label : '';
        (0,_general__WEBPACK_IMPORTED_MODULE_0__.log)('Analytics', 'Service', `Event: ${category}, ${action}${l}${value ? ', ' + value : ''}`);
        const prefix = this.app_prefix ? this.app_prefix + '_' : '';
        this.push({
          event: 'event',
          category: category,
          action: action,
          label: label
        });
      }, 100);
    }
  }
  /**
   * Post screen change event to Google Analytics API
   * @param name
   * @param app_name
   */
  screen(name, app_name) {
    if (!this.service) {
      throw new Error("Google Analytics hasn't been installed on this page");
    }
    if (name && this.enabled) {
      this.timeout(`event|${name}|${app_name || this.app_name}`, () => {
        (0,_general__WEBPACK_IMPORTED_MODULE_0__.log)('Analytics', 'Service', `Screen: ${name}${app_name ? ', ' + app_name : ''}`);
        this.push({
          event: 'screenview',
          appName: app_name || this.app_name,
          screenName: name
        });
      }, 100);
    }
  }
  /**
   * Post routing event to Google Analytics API
   * @param route Activated route
   * @param origin Add origin to routh path
   */
  page(route, origin = false) {
    if (!this.service) {
      throw new Error("Google Analytics hasn't been installed on this page");
    }
    if (this.enabled) {
      this.last_route = route || '/';
      this.timeout(`page|${route}`, () => {
        (0,_general__WEBPACK_IMPORTED_MODULE_0__.log)('Analytics', 'Service', `Page: ${route}`);
        this.push({
          event: 'pageview',
          url: `${origin ? location.origin : ''}${route}`
        });
      }, 100);
    }
  }
  /**
   * Post timing event to Google Analytics API
   * @param category
   * @param variable
   * @param value
   * @param label
   */
  timing(category, variable, value, label) {
    if (!this.service) {
      throw new Error("Google Analytics hasn't been installed on this page");
    }
    if (this.enabled) {
      this.timeout(`page|${category}|${variable}|${value}|${label}`, () => {
        (0,_general__WEBPACK_IMPORTED_MODULE_0__.log)('Analytics', 'Service', `Timing: ${category}, ${variable}, ${value}${label ? ', ' + label : ''}`);
        this.push({
          event: 'timing',
          category,
          variable,
          value,
          label
        });
      }, 100);
    }
  }
  /**
   * Creates a timeout for the given name used for preventing duplicate events in quick succession
   * @param name Name of timer
   * @param fn Timer callback
   * @param delay Timer delay
   */
  timeout(name, fn, delay = 300) {
    if (this.timers[name]) {
      clearTimeout(this.timers[name]);
      delete this.timers[name];
    }
    this.timers[name] = setTimeout(() => {
      if (fn instanceof Function) {
        fn();
      }
      delete this.timers[name];
    }, delay);
  }
  static #_ = this.ɵfac = function GoogleAnalyticsService_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || GoogleAnalyticsService)(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵinject"](_angular_platform_browser__WEBPACK_IMPORTED_MODULE_2__.Title));
  };
  static #_2 = this.ɵprov = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdefineInjectable"]({
    token: GoogleAnalyticsService,
    factory: GoogleAnalyticsService.ɵfac,
    providedIn: 'root'
  });
}

/***/ }),

/***/ 47643:
/*!************************************************!*\
  !*** ./libs/common/src/lib/hotkeys.service.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   HotkeysService: () => (/* binding */ HotkeysService)
/* harmony export */ });
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! rxjs */ 90521);
/* harmony import */ var _general__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./general */ 64217);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/core */ 37580);



/** List of keys that cannot be in a combination by themselves or with each other */
const INVALID_STANDALONE_KEYS = ['control', 'shift', 'alt', 'meta', 'os'];
class HotkeysService {
  constructor() {
    /** Map of subjects which store press states of keys */
    this.keydown_states = {};
    /** Map of obserers for key state subjects */
    this.keydown_observers = {};
    /** List of keys at the end of a combination */
    this.combo_end = [];
    /** List of registered hotkey combinations */
    this.registered_combos = [];
    /** Counter for the number of keydown events. Used for checking order of key presses */
    this.counter = 0;
    window.addEventListener('keydown', event => {
      const code = this.mapKey((event.code || '').toLowerCase());
      if (this.last_down !== code) {
        if (!this.keydown_states[code]) {
          this.keydown_states[code] = new rxjs__WEBPACK_IMPORTED_MODULE_1__.BehaviorSubject(null);
          this.keydown_observers[code] = this.keydown_states[code].asObservable();
        }
        this.keydown_states[code].next(++this.counter);
        if (this.combo_end.indexOf(code) >= 0) {
          event.preventDefault();
        }
        this.last_down = code;
      }
    });
    window.addEventListener('keyup', event => {
      const code = this.mapKey((event.code || '').toLowerCase());
      this.keydown_states[code]?.next(null);
      if (this.last_down === code) {
        this.last_down = null;
      }
    });
  }
  /**
   * Listen to the given key combination
   * @param combo Array of key codes to listen to or a hotkey string e.g. `Alt+Shift+KeyK`
   * @param next Callback for combination presses
   */
  listen(combo, next) {
    combo = combo instanceof Array ? combo : combo.split('+');
    const combination = combo.map(i => this.mapKey(i.toLowerCase()));
    if (combination.length > 0 && this.validCombination(combination)) {
      this.registered_combos.push(combination);
      const last_key = combination[combination.length - 1];
      if (!this.keydown_states[last_key]) {
        this.keydown_states[last_key] = new rxjs__WEBPACK_IMPORTED_MODULE_1__.BehaviorSubject(null);
        this.keydown_observers[last_key] = this.keydown_states[last_key].asObservable();
      }
      this.updateCombinationEndList();
      return this.keydown_observers[last_key].subscribe(count => {
        if (count) {
          const presses = [];
          if (combination.length > 0) {
            // Check that keys are pressed
            for (const key of combination) {
              const state = this.keydown_states[key];
              presses.push(state ? state.getValue() || -1 : -1);
            }
            // Check that keys are pressed in the correct order
            for (let i = 0; i < combination.length - 1; i++) {
              if (presses[i] > presses[i + 1]) {
                return;
              }
            }
          }
          const total = presses.reduce((a, v) => a + (v > 0 ? 1 : -1), 0);
          if (total >= combination.length) {
            next();
          }
        }
      });
    }
    return null;
  }
  /**
   * Map key codes with multiple versions to simple form
   * @param code Code to transform
   */
  mapKey(code) {
    if (code.indexOf('alt') >= 0 || code.indexOf('shift') >= 0 || code.indexOf('control') >= 0) {
      return code.replace('left', '').replace('right', '');
    }
    return code;
  }
  /**
   * Update the list of the last keys in combinations to allow for prevent default actions on pre-existing hotkeys
   */
  updateCombinationEndList() {
    const key_list = [];
    for (const combo of this.registered_combos) {
      this.combo_end.push(combo[combo.length - 1]);
    }
    this.combo_end = (0,_general__WEBPACK_IMPORTED_MODULE_0__.unique)(key_list);
  }
  /**
   * Checks if the given hotkey combination is allowed and valid
   * @param combo Array of key codes
   */
  validCombination(combo) {
    let non_meta = 0;
    for (const key of combo) {
      if (INVALID_STANDALONE_KEYS.indexOf(key) < 0) {
        non_meta++;
      }
    }
    return non_meta > 0;
  }
  static #_ = this.ɵfac = function HotkeysService_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || HotkeysService)();
  };
  static #_2 = this.ɵprov = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdefineInjectable"]({
    token: HotkeysService,
    factory: HotkeysService.ɵfac,
    providedIn: 'root'
  });
}

/***/ }),

/***/ 52369:
/*!***************************************************!*\
  !*** ./libs/common/src/lib/keep-alive.service.ts ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   KeepAliveService: () => (/* binding */ KeepAliveService)
/* harmony export */ });
/* harmony import */ var _placeos_ts_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/ts-client */ 35713);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! rxjs */ 90521);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! rxjs */ 68824);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! rxjs */ 71536);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! rxjs/operators */ 8627);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! rxjs/operators */ 71963);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! rxjs/operators */ 66000);
/* harmony import */ var _async_handler_class__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./async-handler.class */ 75354);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @angular/core */ 37580);





class KeepAliveService extends _async_handler_class__WEBPACK_IMPORTED_MODULE_1__.AsyncHandler {
  constructor() {
    super();
    this._system_id = new rxjs__WEBPACK_IMPORTED_MODULE_2__.BehaviorSubject('');
    this._delay = 3 * 60 * 1000;
    this._status = this._system_id.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.filter)(_ => !!_), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.switchMap)(id => (0,rxjs__WEBPACK_IMPORTED_MODULE_5__.combineLatest)([(0,rxjs__WEBPACK_IMPORTED_MODULE_6__.of)(id), this._bindTo(id, 'poll')])), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.tap)(() => this.timeout('poll', () => location.reload(), this._delay)));
    this.subscription('status', this._status.subscribe());
  }
  setSystem(id) {
    this._system_id.next(id);
  }
  setReloadDelay(delay) {
    this._delay = delay;
  }
  /** List to binding */
  _bindTo(id, name, mod = 'SystemHealth') {
    const module = (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_0__.getModule)(id, mod).binding(name);
    this.subscription(`bind:${name}`, module.bind());
    return module.listen();
  }
  static #_ = this.ɵfac = function KeepAliveService_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || KeepAliveService)();
  };
  static #_2 = this.ɵprov = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_8__["ɵɵdefineInjectable"]({
    token: KeepAliveService,
    factory: KeepAliveService.ɵfac,
    providedIn: 'root'
  });
}

/***/ }),

/***/ 99420:
/*!***************************************************!*\
  !*** ./libs/common/src/lib/mapspeople.service.ts ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   MapService: () => (/* binding */ MapService),
/* harmony export */   MapsPeopleService: () => (/* binding */ MapsPeopleService)
/* harmony export */ });
/* harmony import */ var _settings_service__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./settings.service */ 14233);
/* harmony import */ var _placeos_organisation__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @placeos/organisation */ 2510);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! rxjs */ 90521);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! rxjs */ 68824);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! rxjs/operators */ 8627);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! rxjs/operators */ 19803);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! rxjs/operators */ 66000);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! rxjs/operators */ 35443);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! rxjs/operators */ 7841);
/* harmony import */ var _async_handler_class__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./async-handler.class */ 75354);
/* harmony import */ var _general__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./general */ 64217);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @angular/core */ 37580);









var MapService;
(function (MapService) {
  MapService[MapService["GoogleMaps"] = 0] = "GoogleMaps";
  MapService[MapService["Mapbox"] = 1] = "Mapbox";
})(MapService || (MapService = {}));
class MapsPeopleService extends _async_handler_class__WEBPACK_IMPORTED_MODULE_2__.AsyncHandler {
  get map_keys() {
    return this._settings.get('app.maps_people.keys') || {};
  }
  get use_service() {
    return this._settings.get('app.maps_people.use_zones') || [];
  }
  get map_service() {
    return this._map_service.getValue();
  }
  get map_token() {
    return this._map_token.getValue();
  }
  get is_ready() {
    return this._ready.getValue();
  }
  constructor(_settings, _org) {
    super();
    this._settings = _settings;
    this._org = _org;
    this._map_service = new rxjs__WEBPACK_IMPORTED_MODULE_4__.BehaviorSubject(null);
    this._map_token = new rxjs__WEBPACK_IMPORTED_MODULE_4__.BehaviorSubject('');
    this._ready = new rxjs__WEBPACK_IMPORTED_MODULE_4__.BehaviorSubject(false);
    this._injected = {};
    this._custom_zone = new rxjs__WEBPACK_IMPORTED_MODULE_4__.BehaviorSubject('');
    this.available$ = (0,rxjs__WEBPACK_IMPORTED_MODULE_5__.combineLatest)([this._org.active_building, this._custom_zone, this._org.initialised]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.filter)(([_]) => !!_), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.debounceTime)(300), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.tap)(() => this._injectMapsApiKeys()), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.map)(([bld, zone]) => this.map_keys.mapsindoors && (this.use_service.includes(zone || bld.id) || this.use_service.includes('*'))), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.shareReplay)(1));
  }
  setCustomZone(zone_id) {
    this._custom_zone.next(zone_id);
  }
  _injectMapsApiKeys() {
    (0,_general__WEBPACK_IMPORTED_MODULE_3__.log)('MapsPeople', 'Initializing Maps API Keys');
    this._ready.next(false);
    const {
      mapsindoors,
      google,
      mapbox
    } = this.map_keys;
    if (!mapsindoors) return;
    if (mapsindoors && !this._injected.mapsindoors) {
      const script = document.createElement('script');
      script.src = `https://app.mapsindoors.com/mapsindoors/js/sdk/4.35.0/mapsindoors-4.35.0.js.gz?apikey=${mapsindoors}`;
      document.body.appendChild(script);
      this._injected.mapsindoors = true;
    }
    if (google && mapbox) {
      (0,_general__WEBPACK_IMPORTED_MODULE_3__.log)('MapsPeople', 'Both Google and Mapbox keys provided', undefined, 'error');
      return;
    }
    if (google && !this._injected.google) {
      const script = document.createElement('script');
      script.src = `https://maps.googleapis.com/maps/api/js?libraries=geometry&key=${google}`;
      document.body.appendChild(script);
      this._map_service.next(MapService.GoogleMaps);
      this._injected.google = true;
    } else if (mapbox && !this._injected.mapbox) {
      const script = document.createElement('script');
      script.src = `https://api.mapbox.com/mapbox-gl-js/v2.14.1/mapbox-gl.js`;
      document.body.appendChild(script);
      const styles = document.createElement('link');
      styles.rel = 'stylesheet';
      styles.href = `https://api.mapbox.com/mapbox-gl-js/v2.14.1/mapbox-gl.css`;
      document.head.appendChild(styles);
      this._map_service.next(MapService.Mapbox);
      this._map_token.next(mapbox);
      this._injected.mapbox = true;
    }
    if (google || mapbox) {
      (0,_general__WEBPACK_IMPORTED_MODULE_3__.log)('MapsPeople', `Initialized Maps API Keys for ${google ? 'Google Maps' : 'Mapbox'}`);
      this.timeout('ready', () => this._ready.next(true), 300);
    }
  }
  static #_ = this.ɵfac = function MapsPeopleService_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || MapsPeopleService)(_angular_core__WEBPACK_IMPORTED_MODULE_11__["ɵɵinject"](_settings_service__WEBPACK_IMPORTED_MODULE_0__.SettingsService), _angular_core__WEBPACK_IMPORTED_MODULE_11__["ɵɵinject"](_placeos_organisation__WEBPACK_IMPORTED_MODULE_1__.OrganisationService));
  };
  static #_2 = this.ɵprov = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_11__["ɵɵdefineInjectable"]({
    token: MapsPeopleService,
    factory: MapsPeopleService.ɵfac,
    providedIn: 'root'
  });
}

/***/ }),

/***/ 39525:
/*!**********************************************!*\
  !*** ./libs/common/src/lib/notifications.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   notify: () => (/* binding */ notify),
/* harmony export */   notifyError: () => (/* binding */ notifyError),
/* harmony export */   notifyInfo: () => (/* binding */ notifyInfo),
/* harmony export */   notifySuccess: () => (/* binding */ notifySuccess),
/* harmony export */   notifyWarn: () => (/* binding */ notifyWarn),
/* harmony export */   setNotifyOutlet: () => (/* binding */ setNotifyOutlet)
/* harmony export */ });
let _service;
let _disable_logging = false;
function setNotifyOutlet(snackbar, disable_logging = false) {
  _service = snackbar;
  _disable_logging = disable_logging;
}
/**
 * Create notification popup
 * @param type CSS Class to add to the notification
 * @param message Message to display on the notificaiton
 * @param action Display text for the callback action
 * @param on_action Callback of action on the notification
 * @param config Configuration details to pass to the snackbar
 */
function notify(type, message, action = 'OK', on_action, config = {}) {
  if (!_service) {
    return !_disable_logging && console.warn("Snackbar service hasn't been initialised");
  }
  const snackbar_ref = _service.open(message, action, {
    panelClass: [type],
    duration: 5000,
    ...config
  });
  if (action) {
    on_action = on_action || (() => snackbar_ref.dismiss());
    snackbar_ref.onAction().subscribe(() => on_action());
  }
}
/**
 * Create success notification popup
 * @param msg Message to display on the notificaiton
 * @param action Display text for the callback action
 * @param on_action Callback of action on the notification
 * @param config Configuration details to pass to the snackbar
 */
function notifySuccess(msg, action, on_action, config = {}) {
  !_disable_logging && console.debug(msg);
  if (typeof msg !== 'string') msg = 'Success';
  notify('success', msg, action, on_action, config);
}
/**
 * Create error notification popup
 * @param msg Message to display on the notificaiton
 * @param action Display text for the callback action
 * @param on_action Callback of action on the notification
 * @param config Configuration details to pass to the snackbar
 */
function notifyError(msg, action, on_action, config = {}) {
  !_disable_logging && console.debug(msg);
  if (typeof msg !== 'string') msg = msg?.error || msg?.message || 'An error occurred';
  notify('error', msg, action, on_action, config);
}
/**
 * Create warning notification popup
 * @param msg Message to display on the notificaiton
 * @param action Display text for the callback action
 * @param on_action Callback of action on the notification
 * @param config Configuration details to pass to the snackbar
 */
function notifyWarn(msg, action, on_action, config = {}) {
  !_disable_logging && console.debug(msg);
  notify('warn', msg, action, on_action, config);
}
/**
 * Create info notification popup
 * @param msg Message to display on the notificaiton
 * @param action Display text for the callback action
 * @param on_action Callback of action on the notification
 * @param config Configuration details to pass to the snackbar
 */
function notifyInfo(msg, action, on_action, config = {}) {
  !_disable_logging && console.debug(msg);
  notify('info', msg, action, on_action, config);
}

/***/ }),

/***/ 71676:
/*!****************************************!*\
  !*** ./libs/common/src/lib/placeos.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   setupPlace: () => (/* binding */ setupPlace)
/* harmony export */ });
/* harmony import */ var _home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 89204);
/* harmony import */ var _placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @placeos/ts-client */ 35713);
/* harmony import */ var _notifications__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./notifications */ 39525);



/**
 * Initialise the PlaceOS API library
 */
function setupPlace(_x) {
  return _setupPlace.apply(this, arguments);
}
function _setupPlace() {
  _setupPlace = (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* (settings) {
    const protocol = settings.protocol || location.protocol;
    const host = settings.domain || location.hostname;
    const port = settings.port || location.port;
    const url = settings.use_domain ? `${protocol}//${host}:${port}` : location.origin;
    const route = (location.pathname + '/').replace('//', '/');
    const mock = settings.mock || location.href.includes('mock=true') || localStorage.getItem('mock') === 'true';
    // Generate configuration object
    const config = {
      auth_type: 'auth_code',
      scope: 'public',
      host: `${host}${port ? ':' + port : ''}`,
      auth_uri: `${url}/auth/oauth/authorize`,
      token_uri: `${url}/auth/oauth/token`,
      redirect_uri: `${location.origin}${route}oauth-resp.html`,
      handle_login: !settings.local_login,
      use_iframe: true,
      mock
    };
    if (localStorage) {
      localStorage.setItem('mock', `${!!mock && !location.href.includes('mock=false')}`);
    }
    if (mock) {
      (0,_notifications__WEBPACK_IMPORTED_MODULE_2__.notifyInfo)('Application in mock mode.');
    }
    return (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.setup)(config);
  });
  return _setupPlace.apply(this, arguments);
}

/***/ }),

/***/ 75774:
/*!****************************************!*\
  !*** ./libs/common/src/lib/qr-code.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   generateQRCode: () => (/* binding */ generateQRCode)
/* harmony export */ });
/* harmony import */ var _vanillaqr_min__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./vanillaqr.min */ 64295);

/** Generates a DataURL for QR code image */
function generateQRCode(code, colorLight = '#fff0', colorDark = '#000') {
  const qr = new _vanillaqr_min__WEBPACK_IMPORTED_MODULE_0__.VanillaQR({
    url: code || 'Hello',
    size: 360,
    colorLight,
    colorDark,
    toTable: false,
    ecclevel: 1,
    noBorder: true,
    borderSize: 0
  });
  return qr?.toImage('svg+xml')?.src;
}

/***/ }),

/***/ 686:
/*!*******************************************************!*\
  !*** ./libs/common/src/lib/remote-logging.service.ts ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   RemoteLoggingService: () => (/* binding */ RemoteLoggingService)
/* harmony export */ });
/* harmony import */ var _home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 89204);
/* harmony import */ var _placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @placeos/ts-client */ 35713);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! rxjs */ 90521);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! rxjs */ 33119);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! rxjs */ 68824);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! rxjs */ 71536);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! rxjs/operators */ 7841);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! rxjs/operators */ 8627);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! rxjs/operators */ 71963);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! rxjs/operators */ 35443);
/* harmony import */ var _async_handler_class__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./async-handler.class */ 75354);
/* harmony import */ var _general__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./general */ 64217);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @angular/core */ 37580);







function hookMethod(rootObject, functionToHook, hookingFunction) {
  var previousFunction = rootObject[functionToHook];
  rootObject[functionToHook] = (...args) => {
    hookingFunction(args);
    previousFunction.call(rootObject, ...args);
  };
  return previousFunction;
}
let DEVICE_ID = localStorage.getItem('PLACEOS.DEVICE_ID') || `DEV-${(0,_general__WEBPACK_IMPORTED_MODULE_3__.randomString)(8)}`;
class RemoteLoggingService extends _async_handler_class__WEBPACK_IMPORTED_MODULE_2__.AsyncHandler {
  setMetadata(metadata) {}
  constructor() {
    var _this;
    super();
    _this = this;
    this._disable_handling = false;
    this._system_id = new rxjs__WEBPACK_IMPORTED_MODULE_4__.BehaviorSubject('');
    this._events = new rxjs__WEBPACK_IMPORTED_MODULE_5__.Subject();
    this._event_history = this._events.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.shareReplay)(20000));
    this._metadata = null;
    this._logging_bindings = this._system_id.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.filter)(_ => !!_), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.switchMap)(id => (0,rxjs__WEBPACK_IMPORTED_MODULE_9__.combineLatest)([(0,rxjs__WEBPACK_IMPORTED_MODULE_10__.of)(id), this._bindTo(id, 'enabled')])), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.filter)(([_, enabled]) => !!enabled), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_11__.map)(([id]) => this.subscription('post_events', this._event_history.subscribe( /*#__PURE__*/function () {
      var _ref = (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* (d) {
        _this._disable_handling = true;
        yield (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.getModule)(id, 'Logger').execute('post_event', [d]).catch();
        _this._disable_handling = false;
      });
      return function (_x) {
        return _ref.apply(this, arguments);
      };
    }()))));
    this.history = this._event_history;
    localStorage.setItem('PLACEOS.DEVICE_ID', DEVICE_ID);
    this._patchConsoleMethods();
    this._logging_bindings.subscribe();
    (0,_general__WEBPACK_IMPORTED_MODULE_3__.log)('Logger', 'Remote logging initialised...');
  }
  setSystem(id) {
    this._system_id.next(id);
  }
  _patchConsoleMethods() {
    const types = ['log', 'debug', 'info', 'warn', 'error'];
    for (const key of types) {
      hookMethod(console, key, (...args) => this._handleEvent(key, args));
    }
  }
  _handleEvent(type, data, event_type = 'console') {
    if (data.includes('"Logger"') || this._disable_handling) return;
    const blob = [...data[0]];
    blob[0] = typeof blob[0] === 'string' ? blob[0].replace(/\%c/g, '') : blob[0];
    this._events.next({
      id: `${event_type}-${(0,_general__WEBPACK_IMPORTED_MODULE_3__.randomInt)(99999_99999)}`,
      device_id: DEVICE_ID,
      type: event_type,
      subtype: type,
      timestamp: Date.now(),
      raw: data,
      data: blob.filter(_ => typeof _ !== 'string' || !_.startsWith('color:')),
      metadata: this._metadata || null
    });
  }
  /** List to binding */
  _bindTo(id, name, mod = 'Logger') {
    const module = (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.getModule)(id, mod).binding(name);
    this.subscription(`bind:${name}`, module.bind());
    return module.listen();
  }
  static #_ = this.ɵfac = function RemoteLoggingService_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || RemoteLoggingService)();
  };
  static #_2 = this.ɵprov = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵdefineInjectable"]({
    token: RemoteLoggingService,
    factory: RemoteLoggingService.ɵfac,
    providedIn: 'root'
  });
}

/***/ }),

/***/ 5392:
/*!*************************************************************!*\
  !*** ./libs/common/src/lib/room-configuration.interface.ts ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   mergeRoomConfig: () => (/* binding */ mergeRoomConfig),
/* harmony export */   roomConfigBuilder: () => (/* binding */ roomConfigBuilder)
/* harmony export */ });
const mergeRoomConfig = (a, b) => {
  const c = {
    ...a,
    ...b
  };
  return c;
};
const roomConfigBuilder = (buildingConfigs = [], roomConfigs = []) => {
  const map = {};
  buildingConfigs.forEach(f => map[f.id] = f);
  const output = [];
  roomConfigs.forEach(r => {
    if (!!map[r.id]) {
      output.push(mergeRoomConfig(map[r.id], r));
    }
  });
  return output;
};

/***/ }),

/***/ 14233:
/*!*************************************************!*\
  !*** ./libs/common/src/lib/settings.service.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SettingsService: () => (/* binding */ SettingsService)
/* harmony export */ });
/* harmony import */ var _home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 89204);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! rxjs */ 90521);
/* harmony import */ var _placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @placeos/ts-client */ 35713);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! date-fns */ 31257);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! date-fns */ 45726);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! rxjs/operators */ 57871);
/* harmony import */ var _general__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./general */ 64217);
/* harmony import */ var _settings__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./settings */ 43060);
/* harmony import */ var _async_handler_class__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./async-handler.class */ 75354);
/* harmony import */ var _version__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./version */ 93885);
/* harmony import */ var _user_state__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./user-state */ 37958);
/* harmony import */ var _google_analytics_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./google-analytics.service */ 83114);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_platform_browser__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @angular/platform-browser */ 80436);















class SettingsService extends _async_handler_class__WEBPACK_IMPORTED_MODULE_4__.AsyncHandler {
  /**
   * @hidden
   */
  set overrides(value) {
    this._overrides.next(value);
    this._applyCssVariables();
  }
  /** Get observable for key */
  listen(name) {
    if (!this._observables[name]) {
      this._subjects[name] = new rxjs__WEBPACK_IMPORTED_MODULE_8__.BehaviorSubject(null);
      this._observables[name] = this._subjects[name].asObservable();
    }
    return this._observables[name];
  }
  /** Update observable value for key */
  post(name, value) {
    if (!this._observables[name]) {
      this._subjects[name] = new rxjs__WEBPACK_IMPORTED_MODULE_8__.BehaviorSubject(null);
      this._observables[name] = this._subjects[name].asObservable();
    }
    this._subjects[name].next(value);
  }
  value(name) {
    return !this._observables[name] ? null : this._subjects[name].getValue();
  }
  /** Page title */
  get title() {
    return this._title.getTitle();
  }
  set title(value) {
    this._title.setTitle(`${value} | ${this.get('app.name') || this._app_name}`);
    const tracking_id = this.get('app.analytics.tracking_id');
    if (!tracking_id) return;
    this._analytics?.send('pagename', {
      title: value
    });
  }
  constructor(_title, _analytics) {
    super();
    this._title = _title;
    this._analytics = _analytics;
    /** Name of the application */
    this._app_name = 'PlaceOS';
    /** List of override settings in order of priority */
    this._overrides = new rxjs__WEBPACK_IMPORTED_MODULE_8__.BehaviorSubject([]);
    /** User's personal settings */
    this._user_settings = new rxjs__WEBPACK_IMPORTED_MODULE_8__.BehaviorSubject({});
    /** Mapping of behaviour subjects */
    this._subjects = {};
    /** Mapping of observables */
    this._observables = {};
    /** Mapping of pending settings */
    this._pending_settings = {};
    const now = new Date();
    const time = new Date(_version__WEBPACK_IMPORTED_MODULE_5__.VERSION.time);
    const built = (0,date_fns__WEBPACK_IMPORTED_MODULE_9__.isSameDay)(now, time) ? `Today at ${(0,date_fns__WEBPACK_IMPORTED_MODULE_10__.format)(time, 'h:mma')}` : (0,date_fns__WEBPACK_IMPORTED_MODULE_10__.format)(time, 'do MMM yyyy, h:mma');
    (0,_general__WEBPACK_IMPORTED_MODULE_2__.log)('CORE', `${_version__WEBPACK_IMPORTED_MODULE_5__.VERSION.semver}`, null, 'debug', true);
    (0,_general__WEBPACK_IMPORTED_MODULE_2__.log)('APP', `${_version__WEBPACK_IMPORTED_MODULE_5__.VERSION.hash} | Built: ${built}`, null, 'debug', true);
    this.init();
  }
  /**
   * Initialise the settings
   */
  init() {
    var _this = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      if (_this.get('debug')) window.debug = true;
      if (_this.get('app')?.name) {
        _this._app_name = _this.get('app').name;
      }
      _this._app_name = location.pathname.replace(/[\\\/]/g, '').trim() || _this._app_name;
      (0,_general__WEBPACK_IMPORTED_MODULE_2__.setAppName)(_this._app_name.split('-').join('_').toUpperCase());
      (0,_general__WEBPACK_IMPORTED_MODULE_2__.log)('Settings', 'Successfully loaded settings');
      _this._initialised.next(true);
      if (window.debug) {
        if (!window.application) window.application = {};
        window.application.settings = _this;
      }
      _this.subscription('user_settings', _this._user_settings.subscribe(_ => _this._applyUserSettings(_)));
      const user = yield _user_state__WEBPACK_IMPORTED_MODULE_6__.current_user.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_11__.first)(_ => !!_)).toPromise();
      const data = yield (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.showMetadata)(user.id, 'settings').toPromise();
      _this._user_settings.next(data.details || {});
      _this._initDarkMode();
      _this._applyTheme();
      _this._setFontSize();
    })();
  }
  /** Whether settings service has initialised */
  get app_name() {
    return this._app_name;
  }
  get time_format() {
    return this.get('app.use_24_hour_time') ? 'HH:mm' : 'h:mm a';
  }
  /**
   * Get a setting
   * @param key Name of the setting. i.e. nested items can be grabbed using `.` to seperate key names
   */
  get(key) {
    const keys = key.split('.');
    if (keys[0] !== 'app') {
      return (0,_general__WEBPACK_IMPORTED_MODULE_2__.getItemWithKeys)(keys, this._pending_settings) ?? (0,_general__WEBPACK_IMPORTED_MODULE_2__.getItemWithKeys)(keys, this._user_settings.getValue()) ?? (0,_general__WEBPACK_IMPORTED_MODULE_2__.getItemWithKeys)(keys, _settings__WEBPACK_IMPORTED_MODULE_3__.DEFAULT_SETTINGS);
    }
    const override_settings = [...this._overrides.getValue()];
    for (const override of override_settings) {
      const value = (0,_general__WEBPACK_IMPORTED_MODULE_2__.getItemWithKeys)(keys.slice(1), override);
      if (value != null) {
        return value;
      }
    }
    return (0,_general__WEBPACK_IMPORTED_MODULE_2__.getItemWithKeys)(keys, _settings__WEBPACK_IMPORTED_MODULE_3__.DEFAULT_SETTINGS);
  }
  saveUserSetting(name, value) {
    this._pending_settings[name] = value;
    if (name === 'dark_mode') this.setTheme(value ? 'dark' : '');
    if (name === 'font_size') this._setFontSize();
    this.timeout('save_settings', () => this._savePendingChanges(), 5000);
  }
  overrideCssVariable(key, value, important = false) {
    let element = document.getElementById(`css-var-overrides+${key}`);
    if (!element) {
      element = document.createElement('style');
      element.id = `css-var-overrides+${key}`;
      document.head.appendChild(element);
    }
    element.innerText = `html, body { --${key}: ${value} ${important ? '!important' : ''}}`;
  }
  setTheme(theme) {
    const current_theme = this.get('theme');
    if (current_theme === theme) return;
    this.saveUserSetting('theme', theme);
    this._applyTheme();
  }
  _applyCssVariables() {
    const variable_map = this.get('app.css_variables') || {};
    let css_string = 'body { ';
    for (const key in variable_map) {
      css_string += `--${key}: ${variable_map[key]}; `;
    }
    css_string += '}';
    let element = document.getElementById('css-var-overrides');
    if (!element) {
      element = document.createElement('style');
      element.id = 'css-var-overrides';
      document.head.appendChild(element);
    }
    element.innerText = css_string;
  }
  _savePendingChanges() {
    var _this2 = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      const user = (0,_user_state__WEBPACK_IMPORTED_MODULE_6__.currentUser)();
      if (!user?.id || !Object.keys(_this2._pending_settings).length) return;
      yield (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.updateMetadata)(user.id, {
        name: 'settings',
        description: '',
        details: {
          ..._this2._user_settings.getValue(),
          ..._this2._pending_settings
        }
      }).toPromise();
      _this2._user_settings.next({
        ..._this2._user_settings.getValue(),
        ..._this2._pending_settings
      });
      _this2._pending_settings = {};
    })();
  }
  _applyUserSettings(settings) {
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      if (settings.font_size) {}
    })();
  }
  _setFontSize() {
    if (!this.get('font_size')) return;
    this.overrideCssVariable('font-size', `${this.get('font_size')}px`);
  }
  _applyTheme() {
    const theme = this.get('theme');
    const class_list = document.body.classList.value.split(' ');
    for (const item of class_list) {
      if (item.startsWith('theme-')) {
        document.body.classList.remove(item);
      }
    }
    if (theme) {
      document.body.classList.add(`theme-${theme}`);
    } else {
      document.body.classList.remove(`theme-${theme}`);
    }
  }
  _initDarkMode() {
    if (this.get('theme') || true) return;
    const os_dark = window?.matchMedia ? window?.matchMedia('(prefers-color-scheme: dark)')?.matches : false;
    this.setTheme(os_dark ? 'dark' : '');
  }
  static #_ = this.ɵfac = function SettingsService_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || SettingsService)(_angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵinject"](_angular_platform_browser__WEBPACK_IMPORTED_MODULE_13__.Title), _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵinject"](_google_analytics_service__WEBPACK_IMPORTED_MODULE_7__.GoogleAnalyticsService, 8));
  };
  static #_2 = this.ɵprov = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵdefineInjectable"]({
    token: SettingsService,
    factory: SettingsService.ɵfac,
    providedIn: 'root'
  });
}

/***/ }),

/***/ 43060:
/*!*****************************************!*\
  !*** ./libs/common/src/lib/settings.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DEFAULT_SETTINGS: () => (/* binding */ DEFAULT_SETTINGS)
/* harmony export */ });
const general = {};
const app = {
  name: 'Catering',
  title: 'PlaceOS',
  description: 'Caterers UI',
  short_name: 'PlaceOS',
  logo: {
    type: 'img',
    src: 'assets/logo-light.svg'
  },
  logo_dark: {
    type: 'img',
    src: 'assets/logo-dark.svg'
  },
  general
};
/**
 * ROOT SETTIGNS
 */
const DEFAULT_SETTINGS = {
  debug: true,
  composer: {
    domain: '',
    route: '/catering',
    protocol: '',
    port: '',
    use_domain: false,
    local_login: false
  },
  app
};

/***/ }),

/***/ 1284:
/*!*******************************************!*\
  !*** ./libs/common/src/lib/shorten.fn.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createShortURL: () => (/* binding */ createShortURL),
/* harmony export */   deleteShortURL: () => (/* binding */ deleteShortURL),
/* harmony export */   getShortUrlQRCode: () => (/* binding */ getShortUrlQRCode),
/* harmony export */   patchShortURL: () => (/* binding */ patchShortURL),
/* harmony export */   queryShortURLs: () => (/* binding */ queryShortURLs),
/* harmony export */   saveShortURL: () => (/* binding */ saveShortURL),
/* harmony export */   showShortURL: () => (/* binding */ showShortURL),
/* harmony export */   updateShortURL: () => (/* binding */ updateShortURL)
/* harmony export */ });
/* harmony import */ var _home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 89204);
/* harmony import */ var _placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @placeos/ts-client */ 35713);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! rxjs/operators */ 35443);



const ENDPOINT = '/api/engine/v2/short_url';
function queryShortURLs(q = {}) {
  return (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.query)({
    query_params: q,
    fn: item => item,
    endpoint: ENDPOINT,
    path: ''
  }).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.map)(_ => _.data));
}
function showShortURL(id) {
  return (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.get)(`${ENDPOINT}/${id}`).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.map)(_ => _));
}
const QR_STORE = new Map();
function getShortUrlQRCode(_x) {
  return _getShortUrlQRCode.apply(this, arguments);
}
function _getShortUrlQRCode() {
  _getShortUrlQRCode = (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* (id, format = 'svg') {
    const key = `${id}.${format}`;
    if (QR_STORE.has(key)) return QR_STORE.get(key);
    const tkn = (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.token)();
    document.cookie = `${tkn === 'x-api-key' ? 'api-key=' + encodeURIComponent((0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.apiKey)()) : 'bearer_token=' + encodeURIComponent(tkn)};max-age=30;path=/api/engine/v2/short_url/;samesite=strict;${location.protocol === 'https:' ? 'secure;' : ''}`;
    const response = yield fetch(`${ENDPOINT}/${id}/qr_code.${format}`);
    const blob = yield response.blob();
    const url = URL.createObjectURL(blob);
    QR_STORE.set(key, url);
    return url;
  });
  return _getShortUrlQRCode.apply(this, arguments);
}
function createShortURL(data) {
  return (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.post)(ENDPOINT, data).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.map)(_ => _));
}
function updateShortURL(id, data) {
  return (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.put)(`${ENDPOINT}/${id}`, data).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.map)(_ => _));
}
function saveShortURL(data) {
  return data.id ? updateShortURL(data.id, data) : createShortURL(data);
}
function patchShortURL(id, data) {
  return (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.patch)(`${ENDPOINT}/${id}`, data).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.map)(_ => _));
}
function deleteShortURL(id) {
  return (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.del)(`${ENDPOINT}/${id}`).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.map)(_ => null));
}

/***/ }),

/***/ 22310:
/*!*********************************************!*\
  !*** ./libs/common/src/lib/spec-helpers.ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   whenChangesStable: () => (/* binding */ whenChangesStable)
/* harmony export */ });
/* harmony import */ var _home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 89204);

function whenChangesStable(_x) {
  return _whenChangesStable.apply(this, arguments);
}
function _whenChangesStable() {
  _whenChangesStable = (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* (spectator) {
    spectator.detectChanges();
    yield spectator.fixture.whenStable();
    spectator.detectChanges();
  });
  return _whenChangesStable.apply(this, arguments);
}

/***/ }),

/***/ 35774:
/*!*************************************************!*\
  !*** ./libs/common/src/lib/timezone-helpers.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   LOCAL_TIMEZONE: () => (/* binding */ LOCAL_TIMEZONE),
/* harmony export */   localToTimezone: () => (/* binding */ localToTimezone),
/* harmony export */   timezoneToLocal: () => (/* binding */ timezoneToLocal)
/* harmony export */ });
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! date-fns */ 81962);
/* harmony import */ var date_fns_tz__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! date-fns-tz */ 81812);


const LOCAL_TIMEZONE = Intl?.DateTimeFormat()?.resolvedOptions()?.timeZone || 'Australia/Sydney';
function localToTimezone(date, tz = LOCAL_TIMEZONE) {
  const offset_diff = (0,date_fns_tz__WEBPACK_IMPORTED_MODULE_0__.getTimezoneOffset)(tz) - (0,date_fns_tz__WEBPACK_IMPORTED_MODULE_0__.getTimezoneOffset)(LOCAL_TIMEZONE);
  return (0,date_fns__WEBPACK_IMPORTED_MODULE_1__.addMilliseconds)(date, offset_diff).valueOf();
}
function timezoneToLocal(date, tz = LOCAL_TIMEZONE) {
  const offset_diff = (0,date_fns_tz__WEBPACK_IMPORTED_MODULE_0__.getTimezoneOffset)(LOCAL_TIMEZONE) - (0,date_fns_tz__WEBPACK_IMPORTED_MODULE_0__.getTimezoneOffset)(tz);
  return (0,date_fns__WEBPACK_IMPORTED_MODULE_1__.addMilliseconds)(date, offset_diff).valueOf();
}

/***/ }),

/***/ 14369:
/*!******************************************!*\
  !*** ./libs/common/src/lib/timezones.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   TIMEZONES: () => (/* binding */ TIMEZONES),
/* harmony export */   TIMEZONES_IANA: () => (/* binding */ TIMEZONES_IANA)
/* harmony export */ });
/* harmony import */ var _general__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./general */ 64217);

const TIMEZONES = [{
  "value": "Dateline Standard Time",
  "abbr": "DST",
  "offset": -12,
  "isdst": false,
  "text": "(UTC-12:00) International Date Line West",
  "utc": ["Etc/GMT+12"]
}, {
  "value": "UTC-11",
  "abbr": "U",
  "offset": -11,
  "isdst": false,
  "text": "(UTC-11:00) Coordinated Universal Time-11",
  "utc": ["Etc/GMT+11", "Pacific/Midway", "Pacific/Niue", "Pacific/Pago_Pago"]
}, {
  "value": "Hawaiian Standard Time",
  "abbr": "HST",
  "offset": -10,
  "isdst": false,
  "text": "(UTC-10:00) Hawaii",
  "utc": ["Etc/GMT+10", "Pacific/Honolulu", "Pacific/Johnston", "Pacific/Rarotonga", "Pacific/Tahiti"]
}, {
  "value": "Alaskan Standard Time",
  "abbr": "AKDT",
  "offset": -8,
  "isdst": true,
  "text": "(UTC-09:00) Alaska",
  "utc": ["America/Anchorage", "America/Juneau", "America/Nome", "America/Sitka", "America/Yakutat"]
}, {
  "value": "Pacific Standard Time (Mexico)",
  "abbr": "PDT",
  "offset": -7,
  "isdst": true,
  "text": "(UTC-08:00) Baja California",
  "utc": ["America/Santa_Isabel"]
}, {
  "value": "Pacific Daylight Time",
  "abbr": "PDT",
  "offset": -7,
  "isdst": true,
  "text": "(UTC-07:00) Pacific Time (US & Canada)",
  "utc": ["America/Dawson", "America/Los_Angeles", "America/Tijuana", "America/Vancouver", "America/Whitehorse"]
}, {
  "value": "Pacific Standard Time",
  "abbr": "PST",
  "offset": -8,
  "isdst": false,
  "text": "(UTC-08:00) Pacific Time (US & Canada)",
  "utc": ["America/Dawson", "America/Los_Angeles", "America/Tijuana", "America/Vancouver", "America/Whitehorse", "PST8PDT"]
}, {
  "value": "US Mountain Standard Time",
  "abbr": "UMST",
  "offset": -7,
  "isdst": false,
  "text": "(UTC-07:00) Arizona",
  "utc": ["America/Creston", "America/Dawson_Creek", "America/Hermosillo", "America/Phoenix", "Etc/GMT+7"]
}, {
  "value": "Mountain Standard Time (Mexico)",
  "abbr": "MDT",
  "offset": -6,
  "isdst": true,
  "text": "(UTC-07:00) Chihuahua, La Paz, Mazatlan",
  "utc": ["America/Chihuahua", "America/Mazatlan"]
}, {
  "value": "Mountain Standard Time",
  "abbr": "MDT",
  "offset": -6,
  "isdst": true,
  "text": "(UTC-07:00) Mountain Time (US & Canada)",
  "utc": ["America/Boise", "America/Cambridge_Bay", "America/Denver", "America/Edmonton", "America/Inuvik", "America/Ojinaga", "America/Yellowknife", "MST7MDT"]
}, {
  "value": "Central America Standard Time",
  "abbr": "CAST",
  "offset": -6,
  "isdst": false,
  "text": "(UTC-06:00) Central America",
  "utc": ["America/Belize", "America/Costa_Rica", "America/El_Salvador", "America/Guatemala", "America/Managua", "America/Tegucigalpa", "Etc/GMT+6", "Pacific/Galapagos"]
}, {
  "value": "Central Standard Time",
  "abbr": "CDT",
  "offset": -5,
  "isdst": true,
  "text": "(UTC-06:00) Central Time (US & Canada)",
  "utc": ["America/Chicago", "America/Indiana/Knox", "America/Indiana/Tell_City", "America/Matamoros", "America/Menominee", "America/North_Dakota/Beulah", "America/North_Dakota/Center", "America/North_Dakota/New_Salem", "America/Rainy_River", "America/Rankin_Inlet", "America/Resolute", "America/Winnipeg", "CST6CDT"]
}, {
  "value": "Central Standard Time (Mexico)",
  "abbr": "CDT",
  "offset": -5,
  "isdst": true,
  "text": "(UTC-06:00) Guadalajara, Mexico City, Monterrey",
  "utc": ["America/Bahia_Banderas", "America/Cancun", "America/Merida", "America/Mexico_City", "America/Monterrey"]
}, {
  "value": "Canada Central Standard Time",
  "abbr": "CCST",
  "offset": -6,
  "isdst": false,
  "text": "(UTC-06:00) Saskatchewan",
  "utc": ["America/Regina", "America/Swift_Current"]
}, {
  "value": "SA Pacific Standard Time",
  "abbr": "SPST",
  "offset": -5,
  "isdst": false,
  "text": "(UTC-05:00) Bogota, Lima, Quito",
  "utc": ["America/Bogota", "America/Cayman", "America/Coral_Harbour", "America/Eirunepe", "America/Guayaquil", "America/Jamaica", "America/Lima", "America/Panama", "America/Rio_Branco", "Etc/GMT+5"]
}, {
  "value": "Eastern Standard Time",
  "abbr": "EDT",
  "offset": -4,
  "isdst": true,
  "text": "(UTC-05:00) Eastern Time (US & Canada)",
  "utc": ["America/Detroit", "America/Havana", "America/Indiana/Petersburg", "America/Indiana/Vincennes", "America/Indiana/Winamac", "America/Iqaluit", "America/Kentucky/Monticello", "America/Louisville", "America/Montreal", "America/Nassau", "America/New_York", "America/Nipigon", "America/Pangnirtung", "America/Port-au-Prince", "America/Thunder_Bay", "America/Toronto", "EST5EDT"]
}, {
  "value": "US Eastern Standard Time",
  "abbr": "UEDT",
  "offset": -4,
  "isdst": true,
  "text": "(UTC-05:00) Indiana (East)",
  "utc": ["America/Indiana/Marengo", "America/Indiana/Vevay", "America/Indianapolis"]
}, {
  "value": "Venezuela Standard Time",
  "abbr": "VST",
  "offset": -4.5,
  "isdst": false,
  "text": "(UTC-04:30) Caracas",
  "utc": ["America/Caracas"]
}, {
  "value": "Paraguay Standard Time",
  "abbr": "PYT",
  "offset": -4,
  "isdst": false,
  "text": "(UTC-04:00) Asuncion",
  "utc": ["America/Asuncion"]
}, {
  "value": "Atlantic Standard Time",
  "abbr": "ADT",
  "offset": -3,
  "isdst": true,
  "text": "(UTC-04:00) Atlantic Time (Canada)",
  "utc": ["America/Glace_Bay", "America/Goose_Bay", "America/Halifax", "America/Moncton", "America/Thule", "Atlantic/Bermuda"]
}, {
  "value": "Central Brazilian Standard Time",
  "abbr": "CBST",
  "offset": -4,
  "isdst": false,
  "text": "(UTC-04:00) Cuiaba",
  "utc": ["America/Campo_Grande", "America/Cuiaba"]
}, {
  "value": "SA Western Standard Time",
  "abbr": "SWST",
  "offset": -4,
  "isdst": false,
  "text": "(UTC-04:00) Georgetown, La Paz, Manaus, San Juan",
  "utc": ["America/Anguilla", "America/Antigua", "America/Aruba", "America/Barbados", "America/Blanc-Sablon", "America/Boa_Vista", "America/Curacao", "America/Dominica", "America/Grand_Turk", "America/Grenada", "America/Guadeloupe", "America/Guyana", "America/Kralendijk", "America/La_Paz", "America/Lower_Princes", "America/Manaus", "America/Marigot", "America/Martinique", "America/Montserrat", "America/Port_of_Spain", "America/Porto_Velho", "America/Puerto_Rico", "America/Santo_Domingo", "America/St_Barthelemy", "America/St_Kitts", "America/St_Lucia", "America/St_Thomas", "America/St_Vincent", "America/Tortola", "Etc/GMT+4"]
}, {
  "value": "Pacific SA Standard Time",
  "abbr": "PSST",
  "offset": -4,
  "isdst": false,
  "text": "(UTC-04:00) Santiago",
  "utc": ["America/Santiago", "Antarctica/Palmer"]
}, {
  "value": "Newfoundland Standard Time",
  "abbr": "NDT",
  "offset": -2.5,
  "isdst": true,
  "text": "(UTC-03:30) Newfoundland",
  "utc": ["America/St_Johns"]
}, {
  "value": "E. South America Standard Time",
  "abbr": "ESAST",
  "offset": -3,
  "isdst": false,
  "text": "(UTC-03:00) Brasilia",
  "utc": ["America/Sao_Paulo"]
}, {
  "value": "Argentina Standard Time",
  "abbr": "AST",
  "offset": -3,
  "isdst": false,
  "text": "(UTC-03:00) Buenos Aires",
  "utc": ["America/Argentina/La_Rioja", "America/Argentina/Rio_Gallegos", "America/Argentina/Salta", "America/Argentina/San_Juan", "America/Argentina/San_Luis", "America/Argentina/Tucuman", "America/Argentina/Ushuaia", "America/Buenos_Aires", "America/Catamarca", "America/Cordoba", "America/Jujuy", "America/Mendoza"]
}, {
  "value": "SA Eastern Standard Time",
  "abbr": "SEST",
  "offset": -3,
  "isdst": false,
  "text": "(UTC-03:00) Cayenne, Fortaleza",
  "utc": ["America/Araguaina", "America/Belem", "America/Cayenne", "America/Fortaleza", "America/Maceio", "America/Paramaribo", "America/Recife", "America/Santarem", "Antarctica/Rothera", "Atlantic/Stanley", "Etc/GMT+3"]
}, {
  "value": "Greenland Standard Time",
  "abbr": "GDT",
  "offset": -3,
  "isdst": true,
  "text": "(UTC-03:00) Greenland",
  "utc": ["America/Godthab"]
}, {
  "value": "Montevideo Standard Time",
  "abbr": "MST",
  "offset": -3,
  "isdst": false,
  "text": "(UTC-03:00) Montevideo",
  "utc": ["America/Montevideo"]
}, {
  "value": "Bahia Standard Time",
  "abbr": "BST",
  "offset": -3,
  "isdst": false,
  "text": "(UTC-03:00) Salvador",
  "utc": ["America/Bahia"]
}, {
  "value": "UTC-02",
  "abbr": "U",
  "offset": -2,
  "isdst": false,
  "text": "(UTC-02:00) Coordinated Universal Time-02",
  "utc": ["America/Noronha", "Atlantic/South_Georgia", "Etc/GMT+2"]
}, {
  "value": "Mid-Atlantic Standard Time",
  "abbr": "MDT",
  "offset": -1,
  "isdst": true,
  "text": "(UTC-02:00) Mid-Atlantic - Old",
  "utc": []
}, {
  "value": "Azores Standard Time",
  "abbr": "ADT",
  "offset": 0,
  "isdst": true,
  "text": "(UTC-01:00) Azores",
  "utc": ["America/Scoresbysund", "Atlantic/Azores"]
}, {
  "value": "Cape Verde Standard Time",
  "abbr": "CVST",
  "offset": -1,
  "isdst": false,
  "text": "(UTC-01:00) Cape Verde Is.",
  "utc": ["Atlantic/Cape_Verde", "Etc/GMT+1"]
}, {
  "value": "Morocco Standard Time",
  "abbr": "MDT",
  "offset": 1,
  "isdst": true,
  "text": "(UTC) Casablanca",
  "utc": ["Africa/Casablanca", "Africa/El_Aaiun"]
}, {
  "value": "UTC",
  "abbr": "UTC",
  "offset": 0,
  "isdst": false,
  "text": "(UTC) Coordinated Universal Time",
  "utc": ["America/Danmarkshavn", "Etc/GMT"]
}, {
  "value": "GMT Standard Time",
  "abbr": "GMT",
  "offset": 0,
  "isdst": false,
  "text": "(UTC) Edinburgh, London",
  "utc": ["Europe/Isle_of_Man", "Europe/Guernsey", "Europe/Jersey", "Europe/London"]
}, {
  "value": "British Summer Time",
  "abbr": "BST",
  "offset": 1,
  "isdst": true,
  "text": "(UTC+01:00) Edinburgh, London",
  "utc": ["Europe/Isle_of_Man", "Europe/Guernsey", "Europe/Jersey", "Europe/London"]
}, {
  "value": "GMT Standard Time",
  "abbr": "GDT",
  "offset": 1,
  "isdst": true,
  "text": "(UTC) Dublin, Lisbon",
  "utc": ["Atlantic/Canary", "Atlantic/Faeroe", "Atlantic/Madeira", "Europe/Dublin", "Europe/Lisbon"]
}, {
  "value": "Greenwich Standard Time",
  "abbr": "GST",
  "offset": 0,
  "isdst": false,
  "text": "(UTC) Monrovia, Reykjavik",
  "utc": ["Africa/Abidjan", "Africa/Accra", "Africa/Bamako", "Africa/Banjul", "Africa/Bissau", "Africa/Conakry", "Africa/Dakar", "Africa/Freetown", "Africa/Lome", "Africa/Monrovia", "Africa/Nouakchott", "Africa/Ouagadougou", "Africa/Sao_Tome", "Atlantic/Reykjavik", "Atlantic/St_Helena"]
}, {
  "value": "W. Europe Standard Time",
  "abbr": "WEDT",
  "offset": 2,
  "isdst": true,
  "text": "(UTC+01:00) Amsterdam, Berlin, Bern, Rome, Stockholm, Vienna",
  "utc": ["Arctic/Longyearbyen", "Europe/Amsterdam", "Europe/Andorra", "Europe/Berlin", "Europe/Busingen", "Europe/Gibraltar", "Europe/Luxembourg", "Europe/Malta", "Europe/Monaco", "Europe/Oslo", "Europe/Rome", "Europe/San_Marino", "Europe/Stockholm", "Europe/Vaduz", "Europe/Vatican", "Europe/Vienna", "Europe/Zurich"]
}, {
  "value": "Central Europe Standard Time",
  "abbr": "CEDT",
  "offset": 2,
  "isdst": true,
  "text": "(UTC+01:00) Belgrade, Bratislava, Budapest, Ljubljana, Prague",
  "utc": ["Europe/Belgrade", "Europe/Bratislava", "Europe/Budapest", "Europe/Ljubljana", "Europe/Podgorica", "Europe/Prague", "Europe/Tirane"]
}, {
  "value": "Romance Standard Time",
  "abbr": "RDT",
  "offset": 2,
  "isdst": true,
  "text": "(UTC+01:00) Brussels, Copenhagen, Madrid, Paris",
  "utc": ["Africa/Ceuta", "Europe/Brussels", "Europe/Copenhagen", "Europe/Madrid", "Europe/Paris"]
}, {
  "value": "Central European Standard Time",
  "abbr": "CEDT",
  "offset": 2,
  "isdst": true,
  "text": "(UTC+01:00) Sarajevo, Skopje, Warsaw, Zagreb",
  "utc": ["Europe/Sarajevo", "Europe/Skopje", "Europe/Warsaw", "Europe/Zagreb"]
}, {
  "value": "W. Central Africa Standard Time",
  "abbr": "WCAST",
  "offset": 1,
  "isdst": false,
  "text": "(UTC+01:00) West Central Africa",
  "utc": ["Africa/Algiers", "Africa/Bangui", "Africa/Brazzaville", "Africa/Douala", "Africa/Kinshasa", "Africa/Lagos", "Africa/Libreville", "Africa/Luanda", "Africa/Malabo", "Africa/Ndjamena", "Africa/Niamey", "Africa/Porto-Novo", "Africa/Tunis", "Etc/GMT-1"]
}, {
  "value": "Namibia Standard Time",
  "abbr": "NST",
  "offset": 1,
  "isdst": false,
  "text": "(UTC+01:00) Windhoek",
  "utc": ["Africa/Windhoek"]
}, {
  "value": "GTB Standard Time",
  "abbr": "GDT",
  "offset": 3,
  "isdst": true,
  "text": "(UTC+02:00) Athens, Bucharest",
  "utc": ["Asia/Nicosia", "Europe/Athens", "Europe/Bucharest", "Europe/Chisinau"]
}, {
  "value": "Middle East Standard Time",
  "abbr": "MEDT",
  "offset": 3,
  "isdst": true,
  "text": "(UTC+02:00) Beirut",
  "utc": ["Asia/Beirut"]
}, {
  "value": "Egypt Standard Time",
  "abbr": "EST",
  "offset": 2,
  "isdst": false,
  "text": "(UTC+02:00) Cairo",
  "utc": ["Africa/Cairo"]
}, {
  "value": "Syria Standard Time",
  "abbr": "SDT",
  "offset": 3,
  "isdst": true,
  "text": "(UTC+02:00) Damascus",
  "utc": ["Asia/Damascus"]
}, {
  "value": "E. Europe Standard Time",
  "abbr": "EEDT",
  "offset": 3,
  "isdst": true,
  "text": "(UTC+02:00) E. Europe",
  "utc": ["Asia/Nicosia", "Europe/Athens", "Europe/Bucharest", "Europe/Chisinau", "Europe/Helsinki", "Europe/Kiev", "Europe/Mariehamn", "Europe/Nicosia", "Europe/Riga", "Europe/Sofia", "Europe/Tallinn", "Europe/Uzhgorod", "Europe/Vilnius", "Europe/Zaporozhye"]
}, {
  "value": "South Africa Standard Time",
  "abbr": "SAST",
  "offset": 2,
  "isdst": false,
  "text": "(UTC+02:00) Harare, Pretoria",
  "utc": ["Africa/Blantyre", "Africa/Bujumbura", "Africa/Gaborone", "Africa/Harare", "Africa/Johannesburg", "Africa/Kigali", "Africa/Lubumbashi", "Africa/Lusaka", "Africa/Maputo", "Africa/Maseru", "Africa/Mbabane", "Etc/GMT-2"]
}, {
  "value": "FLE Standard Time",
  "abbr": "FDT",
  "offset": 3,
  "isdst": true,
  "text": "(UTC+02:00) Helsinki, Kyiv, Riga, Sofia, Tallinn, Vilnius",
  "utc": ["Europe/Helsinki", "Europe/Kiev", "Europe/Mariehamn", "Europe/Riga", "Europe/Sofia", "Europe/Tallinn", "Europe/Uzhgorod", "Europe/Vilnius", "Europe/Zaporozhye"]
}, {
  "value": "Turkey Standard Time",
  "abbr": "TDT",
  "offset": 3,
  "isdst": false,
  "text": "(UTC+03:00) Istanbul",
  "utc": ["Europe/Istanbul"]
}, {
  "value": "Israel Standard Time",
  "abbr": "JDT",
  "offset": 3,
  "isdst": true,
  "text": "(UTC+02:00) Jerusalem",
  "utc": ["Asia/Jerusalem"]
}, {
  "value": "Libya Standard Time",
  "abbr": "LST",
  "offset": 2,
  "isdst": false,
  "text": "(UTC+02:00) Tripoli",
  "utc": ["Africa/Tripoli"]
}, {
  "value": "Jordan Standard Time",
  "abbr": "JST",
  "offset": 3,
  "isdst": false,
  "text": "(UTC+03:00) Amman",
  "utc": ["Asia/Amman"]
}, {
  "value": "Arabic Standard Time",
  "abbr": "AST",
  "offset": 3,
  "isdst": false,
  "text": "(UTC+03:00) Baghdad",
  "utc": ["Asia/Baghdad"]
}, {
  "value": "Kaliningrad Standard Time",
  "abbr": "KST",
  "offset": 3,
  "isdst": false,
  "text": "(UTC+02:00) Kaliningrad",
  "utc": ["Europe/Kaliningrad"]
}, {
  "value": "Arab Standard Time",
  "abbr": "AST",
  "offset": 3,
  "isdst": false,
  "text": "(UTC+03:00) Kuwait, Riyadh",
  "utc": ["Asia/Aden", "Asia/Bahrain", "Asia/Kuwait", "Asia/Qatar", "Asia/Riyadh"]
}, {
  "value": "E. Africa Standard Time",
  "abbr": "EAST",
  "offset": 3,
  "isdst": false,
  "text": "(UTC+03:00) Nairobi",
  "utc": ["Africa/Addis_Ababa", "Africa/Asmera", "Africa/Dar_es_Salaam", "Africa/Djibouti", "Africa/Juba", "Africa/Kampala", "Africa/Khartoum", "Africa/Mogadishu", "Africa/Nairobi", "Antarctica/Syowa", "Etc/GMT-3", "Indian/Antananarivo", "Indian/Comoro", "Indian/Mayotte"]
}, {
  "value": "Moscow Standard Time",
  "abbr": "MSK",
  "offset": 3,
  "isdst": false,
  "text": "(UTC+03:00) Moscow, St. Petersburg, Volgograd, Minsk",
  "utc": ["Europe/Kirov", "Europe/Moscow", "Europe/Simferopol", "Europe/Volgograd", "Europe/Minsk"]
}, {
  "value": "Samara Time",
  "abbr": "SAMT",
  "offset": 4,
  "isdst": false,
  "text": "(UTC+04:00) Samara, Ulyanovsk, Saratov",
  "utc": ["Europe/Astrakhan", "Europe/Samara", "Europe/Ulyanovsk"]
}, {
  "value": "Iran Standard Time",
  "abbr": "IDT",
  "offset": 4.5,
  "isdst": true,
  "text": "(UTC+03:30) Tehran",
  "utc": ["Asia/Tehran"]
}, {
  "value": "Arabian Standard Time",
  "abbr": "AST",
  "offset": 4,
  "isdst": false,
  "text": "(UTC+04:00) Abu Dhabi, Muscat",
  "utc": ["Asia/Dubai", "Asia/Muscat", "Etc/GMT-4"]
}, {
  "value": "Azerbaijan Standard Time",
  "abbr": "ADT",
  "offset": 5,
  "isdst": true,
  "text": "(UTC+04:00) Baku",
  "utc": ["Asia/Baku"]
}, {
  "value": "Mauritius Standard Time",
  "abbr": "MST",
  "offset": 4,
  "isdst": false,
  "text": "(UTC+04:00) Port Louis",
  "utc": ["Indian/Mahe", "Indian/Mauritius", "Indian/Reunion"]
}, {
  "value": "Georgian Standard Time",
  "abbr": "GET",
  "offset": 4,
  "isdst": false,
  "text": "(UTC+04:00) Tbilisi",
  "utc": ["Asia/Tbilisi"]
}, {
  "value": "Caucasus Standard Time",
  "abbr": "CST",
  "offset": 4,
  "isdst": false,
  "text": "(UTC+04:00) Yerevan",
  "utc": ["Asia/Yerevan"]
}, {
  "value": "Afghanistan Standard Time",
  "abbr": "AST",
  "offset": 4.5,
  "isdst": false,
  "text": "(UTC+04:30) Kabul",
  "utc": ["Asia/Kabul"]
}, {
  "value": "West Asia Standard Time",
  "abbr": "WAST",
  "offset": 5,
  "isdst": false,
  "text": "(UTC+05:00) Ashgabat, Tashkent",
  "utc": ["Antarctica/Mawson", "Asia/Aqtau", "Asia/Aqtobe", "Asia/Ashgabat", "Asia/Dushanbe", "Asia/Oral", "Asia/Samarkand", "Asia/Tashkent", "Etc/GMT-5", "Indian/Kerguelen", "Indian/Maldives"]
}, {
  "value": "Yekaterinburg Time",
  "abbr": "YEKT",
  "offset": 5,
  "isdst": false,
  "text": "(UTC+05:00) Yekaterinburg",
  "utc": ["Asia/Yekaterinburg"]
}, {
  "value": "Pakistan Standard Time",
  "abbr": "PKT",
  "offset": 5,
  "isdst": false,
  "text": "(UTC+05:00) Islamabad, Karachi",
  "utc": ["Asia/Karachi"]
}, {
  "value": "India Standard Time",
  "abbr": "IST",
  "offset": 5.5,
  "isdst": false,
  "text": "(UTC+05:30) Chennai, Kolkata, Mumbai, New Delhi",
  "utc": ["Asia/Kolkata"]
}, {
  "value": "Sri Lanka Standard Time",
  "abbr": "SLST",
  "offset": 5.5,
  "isdst": false,
  "text": "(UTC+05:30) Sri Jayawardenepura",
  "utc": ["Asia/Colombo"]
}, {
  "value": "Nepal Standard Time",
  "abbr": "NST",
  "offset": 5.75,
  "isdst": false,
  "text": "(UTC+05:45) Kathmandu",
  "utc": ["Asia/Kathmandu"]
}, {
  "value": "Central Asia Standard Time",
  "abbr": "CAST",
  "offset": 6,
  "isdst": false,
  "text": "(UTC+06:00) Nur-Sultan (Astana)",
  "utc": ["Antarctica/Vostok", "Asia/Almaty", "Asia/Bishkek", "Asia/Qyzylorda", "Asia/Urumqi", "Etc/GMT-6", "Indian/Chagos"]
}, {
  "value": "Bangladesh Standard Time",
  "abbr": "BST",
  "offset": 6,
  "isdst": false,
  "text": "(UTC+06:00) Dhaka",
  "utc": ["Asia/Dhaka", "Asia/Thimphu"]
}, {
  "value": "Myanmar Standard Time",
  "abbr": "MST",
  "offset": 6.5,
  "isdst": false,
  "text": "(UTC+06:30) Yangon (Rangoon)",
  "utc": ["Asia/Rangoon", "Indian/Cocos"]
}, {
  "value": "SE Asia Standard Time",
  "abbr": "SAST",
  "offset": 7,
  "isdst": false,
  "text": "(UTC+07:00) Bangkok, Hanoi, Jakarta",
  "utc": ["Antarctica/Davis", "Asia/Bangkok", "Asia/Hovd", "Asia/Jakarta", "Asia/Phnom_Penh", "Asia/Pontianak", "Asia/Saigon", "Asia/Vientiane", "Etc/GMT-7", "Indian/Christmas"]
}, {
  "value": "N. Central Asia Standard Time",
  "abbr": "NCAST",
  "offset": 7,
  "isdst": false,
  "text": "(UTC+07:00) Novosibirsk",
  "utc": ["Asia/Novokuznetsk", "Asia/Novosibirsk", "Asia/Omsk"]
}, {
  "value": "China Standard Time",
  "abbr": "CST",
  "offset": 8,
  "isdst": false,
  "text": "(UTC+08:00) Beijing, Chongqing, Hong Kong, Urumqi",
  "utc": ["Asia/Hong_Kong", "Asia/Macau", "Asia/Shanghai"]
}, {
  "value": "North Asia Standard Time",
  "abbr": "NAST",
  "offset": 8,
  "isdst": false,
  "text": "(UTC+08:00) Krasnoyarsk",
  "utc": ["Asia/Krasnoyarsk"]
}, {
  "value": "Singapore Standard Time",
  "abbr": "MPST",
  "offset": 8,
  "isdst": false,
  "text": "(UTC+08:00) Kuala Lumpur, Singapore",
  "utc": ["Asia/Brunei", "Asia/Kuala_Lumpur", "Asia/Kuching", "Asia/Makassar", "Asia/Manila", "Asia/Singapore", "Etc/GMT-8"]
}, {
  "value": "W. Australia Standard Time",
  "abbr": "WAST",
  "offset": 8,
  "isdst": false,
  "text": "(UTC+08:00) Perth",
  "utc": ["Antarctica/Casey", "Australia/Perth"]
}, {
  "value": "Taipei Standard Time",
  "abbr": "TST",
  "offset": 8,
  "isdst": false,
  "text": "(UTC+08:00) Taipei",
  "utc": ["Asia/Taipei"]
}, {
  "value": "Ulaanbaatar Standard Time",
  "abbr": "UST",
  "offset": 8,
  "isdst": false,
  "text": "(UTC+08:00) Ulaanbaatar",
  "utc": ["Asia/Choibalsan", "Asia/Ulaanbaatar"]
}, {
  "value": "North Asia East Standard Time",
  "abbr": "NAEST",
  "offset": 8,
  "isdst": false,
  "text": "(UTC+08:00) Irkutsk",
  "utc": ["Asia/Irkutsk"]
}, {
  "value": "Japan Standard Time",
  "abbr": "JST",
  "offset": 9,
  "isdst": false,
  "text": "(UTC+09:00) Osaka, Sapporo, Tokyo",
  "utc": ["Asia/Dili", "Asia/Jayapura", "Asia/Tokyo", "Etc/GMT-9", "Pacific/Palau"]
}, {
  "value": "Korea Standard Time",
  "abbr": "KST",
  "offset": 9,
  "isdst": false,
  "text": "(UTC+09:00) Seoul",
  "utc": ["Asia/Pyongyang", "Asia/Seoul"]
}, {
  "value": "Cen. Australia Standard Time",
  "abbr": "CAST",
  "offset": 9.5,
  "isdst": false,
  "text": "(UTC+09:30) Adelaide",
  "utc": ["Australia/Adelaide", "Australia/Broken_Hill"]
}, {
  "value": "AUS Central Standard Time",
  "abbr": "ACST",
  "offset": 9.5,
  "isdst": false,
  "text": "(UTC+09:30) Darwin",
  "utc": ["Australia/Darwin"]
}, {
  "value": "E. Australia Standard Time",
  "abbr": "EAST",
  "offset": 10,
  "isdst": false,
  "text": "(UTC+10:00) Brisbane",
  "utc": ["Australia/Brisbane", "Australia/Lindeman"]
}, {
  "value": "AUS Eastern Standard Time",
  "abbr": "AEST",
  "offset": 10,
  "isdst": false,
  "text": "(UTC+10:00) Canberra, Melbourne, Sydney",
  "utc": ["Australia/Melbourne", "Australia/Sydney"]
}, {
  "value": "West Pacific Standard Time",
  "abbr": "WPST",
  "offset": 10,
  "isdst": false,
  "text": "(UTC+10:00) Guam, Port Moresby",
  "utc": ["Antarctica/DumontDUrville", "Etc/GMT-10", "Pacific/Guam", "Pacific/Port_Moresby", "Pacific/Saipan", "Pacific/Truk"]
}, {
  "value": "Tasmania Standard Time",
  "abbr": "TST",
  "offset": 10,
  "isdst": false,
  "text": "(UTC+10:00) Hobart",
  "utc": ["Australia/Currie", "Australia/Hobart"]
}, {
  "value": "Yakutsk Standard Time",
  "abbr": "YST",
  "offset": 9,
  "isdst": false,
  "text": "(UTC+09:00) Yakutsk",
  "utc": ["Asia/Chita", "Asia/Khandyga", "Asia/Yakutsk"]
}, {
  "value": "Central Pacific Standard Time",
  "abbr": "CPST",
  "offset": 11,
  "isdst": false,
  "text": "(UTC+11:00) Solomon Is., New Caledonia",
  "utc": ["Antarctica/Macquarie", "Etc/GMT-11", "Pacific/Efate", "Pacific/Guadalcanal", "Pacific/Kosrae", "Pacific/Noumea", "Pacific/Ponape"]
}, {
  "value": "Vladivostok Standard Time",
  "abbr": "VST",
  "offset": 11,
  "isdst": false,
  "text": "(UTC+11:00) Vladivostok",
  "utc": ["Asia/Sakhalin", "Asia/Ust-Nera", "Asia/Vladivostok"]
}, {
  "value": "New Zealand Standard Time",
  "abbr": "NZST",
  "offset": 12,
  "isdst": false,
  "text": "(UTC+12:00) Auckland, Wellington",
  "utc": ["Antarctica/McMurdo", "Pacific/Auckland"]
}, {
  "value": "UTC+12",
  "abbr": "U",
  "offset": 12,
  "isdst": false,
  "text": "(UTC+12:00) Coordinated Universal Time+12",
  "utc": ["Etc/GMT-12", "Pacific/Funafuti", "Pacific/Kwajalein", "Pacific/Majuro", "Pacific/Nauru", "Pacific/Tarawa", "Pacific/Wake", "Pacific/Wallis"]
}, {
  "value": "Fiji Standard Time",
  "abbr": "FST",
  "offset": 12,
  "isdst": false,
  "text": "(UTC+12:00) Fiji",
  "utc": ["Pacific/Fiji"]
}, {
  "value": "Magadan Standard Time",
  "abbr": "MST",
  "offset": 12,
  "isdst": false,
  "text": "(UTC+12:00) Magadan",
  "utc": ["Asia/Anadyr", "Asia/Kamchatka", "Asia/Magadan", "Asia/Srednekolymsk"]
}, {
  "value": "Kamchatka Standard Time",
  "abbr": "KDT",
  "offset": 13,
  "isdst": true,
  "text": "(UTC+12:00) Petropavlovsk-Kamchatsky - Old",
  "utc": ["Asia/Kamchatka"]
}, {
  "value": "Tonga Standard Time",
  "abbr": "TST",
  "offset": 13,
  "isdst": false,
  "text": "(UTC+13:00) Nuku'alofa",
  "utc": ["Etc/GMT-13", "Pacific/Enderbury", "Pacific/Fakaofo", "Pacific/Tongatapu"]
}, {
  "value": "Samoa Standard Time",
  "abbr": "SST",
  "offset": 13,
  "isdst": false,
  "text": "(UTC+13:00) Samoa",
  "utc": ["Pacific/Apia"]
}];
const TIMEZONES_IANA = (0,_general__WEBPACK_IMPORTED_MODULE_0__.unique)((0,_general__WEBPACK_IMPORTED_MODULE_0__.flatten)(TIMEZONES.map(_ => _.utc))).sort();

/***/ }),

/***/ 63464:
/*!**************************************!*\
  !*** ./libs/common/src/lib/types.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);


/***/ }),

/***/ 55746:
/*!************************************************!*\
  !*** ./libs/common/src/lib/uploads.service.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   UploadsService: () => (/* binding */ UploadsService)
/* harmony export */ });
/* harmony import */ var _home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 89204);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! rxjs */ 90521);
/* harmony import */ var _uploads__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./uploads */ 83615);
/* harmony import */ var libs_components_src_lib_upload_permissions_modal_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! libs/components/src/lib/upload-permissions-modal.component */ 76871);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_material_dialog__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/material/dialog */ 12587);







class UploadsService {
  constructor(_dialog) {
    this._dialog = _dialog;
    this._upload_list = new rxjs__WEBPACK_IMPORTED_MODULE_3__.BehaviorSubject([]);
    this.upload_list = this._upload_list.asObservable();
    if (localStorage) {
      this._upload_list.next(JSON.parse(localStorage.getItem('BACKOFFICE.uploads') || '[]'));
    }
  }
  clearList() {
    const in_progress_list = this._upload_list.getValue().filter(file => file.progress < 100 && !file.error);
    this._upload_list.next(in_progress_list);
  }
  uploadFileWithPermissions(file) {
    var _this = this;
    return new Promise((resolve, reject) => {
      const ref = this._dialog.open(libs_components_src_lib_upload_permissions_modal_component__WEBPACK_IMPORTED_MODULE_2__.UploadPermissionsModalComponent, {
        data: {
          file
        }
      });
      ref.afterClosed().subscribe( /*#__PURE__*/function () {
        var _ref = (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* (details) {
          if (details) {
            const id = yield _this.uploadFile(details.file, details.is_public, details.permissions).catch(e => {
              reject(e);
              throw e;
            });
            resolve(id);
          } else reject();
        });
        return function (_x) {
          return _ref.apply(this, arguments);
        };
      }());
    });
  }
  uploadFile(file, pub = true, permissions = 'none') {
    return new Promise(resolve => {
      let resolved = false;
      const update_fn = details => {
        if (!resolved) {
          resolve(details.id);
          resolved = true;
        }
        this._upload_list.next([...this._upload_list.getValue().filter(_ => _.id !== details.id), details]);
      };
      (0,_uploads__WEBPACK_IMPORTED_MODULE_1__.uploadFile)(file, pub, permissions).subscribe(update_fn, update_fn, () => this._updateUploadHistory());
    });
  }
  _updateUploadHistory() {
    const done_list = this._upload_list.getValue().filter(file => file.progress >= 100);
    done_list.forEach(i => delete i.upload);
    if (localStorage) {
      localStorage.setItem('PLACEOS.uploads', JSON.stringify(done_list));
    }
  }
  static #_ = this.ɵfac = function UploadsService_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || UploadsService)(_angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵinject"](_angular_material_dialog__WEBPACK_IMPORTED_MODULE_5__.MatDialog));
  };
  static #_2 = this.ɵprov = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵdefineInjectable"]({
    token: UploadsService,
    factory: UploadsService.ɵfac,
    providedIn: 'root'
  });
}

/***/ }),

/***/ 83615:
/*!****************************************!*\
  !*** ./libs/common/src/lib/uploads.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   uploadFile: () => (/* binding */ uploadFile)
/* harmony export */ });
/* harmony import */ var _placeos_cloud_uploads__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/cloud-uploads */ 51556);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! rxjs */ 67498);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! rxjs/operators */ 87989);
/* harmony import */ var _general__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./general */ 64217);
/* harmony import */ var blob_util__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! blob-util */ 67092);





/**
 * Upload the given file to the cloud
 * @param file File to upload
 */
function uploadFile(file, pub = true, permissions = 'none') {
  return new rxjs__WEBPACK_IMPORTED_MODULE_3__.Observable(observer => {
    const fileReader = new FileReader();
    fileReader.addEventListener('loadend', e => {
      const arrayBuffer = e.target.result;
      const blob = blob_util__WEBPACK_IMPORTED_MODULE_2__.arrayBufferToBlob(arrayBuffer, file.type);
      const upload_list = (0,_placeos_cloud_uploads__WEBPACK_IMPORTED_MODULE_0__.uploadFiles)([blob], {
        file_name: file.name,
        permissions,
        public: pub
      });
      const upload = upload_list[0];
      const upload_details = {
        id: (0,_general__WEBPACK_IMPORTED_MODULE_1__.randomInt)(9999_9999_9999),
        name: file.name,
        progress: 0,
        link: '',
        formatted_size: (0,_placeos_cloud_uploads__WEBPACK_IMPORTED_MODULE_0__.humanReadableByteCount)(file.size),
        size: file.size,
        upload
      };
      upload.status.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.takeWhile)(_ => _.status !== 'complete', true)).subscribe(state => {
        if (upload.access_url) {
          upload_details.link = !pub ? `${location.origin}/api/engine/v2/uploads/${encodeURIComponent(upload.id)}/url` : upload.access_url;
        }
        upload_details.progress = state.progress;
        observer.next(upload_details);
        if (state.status === 'error') observer.error({
          ...upload_details,
          error: state.error
        });
        if (state.status === 'complete') observer.complete();
      });
      observer.next(upload_details);
    });
    fileReader.readAsArrayBuffer(file);
  });
}

/***/ }),

/***/ 5430:
/*!*******************************************************!*\
  !*** ./libs/common/src/lib/user-idle-time.service.ts ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   UserIdleTimeService: () => (/* binding */ UserIdleTimeService)
/* harmony export */ });
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! rxjs */ 90521);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! rxjs */ 68824);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! rxjs */ 86020);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! rxjs/operators */ 63700);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! rxjs/operators */ 35443);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! rxjs/operators */ 57871);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! rxjs/operators */ 66000);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @angular/core */ 37580);



const EVENTS_NAMES = ['keypress', 'mousemove', 'touchmove', 'scroll', 'wheel'];
class UserIdleTimeService {
  constructor() {
    this._last_action = new rxjs__WEBPACK_IMPORTED_MODULE_0__.BehaviorSubject(Date.now());
    this._update = e => this._onUserInteraction();
    this._event_names = EVENTS_NAMES;
    this.last_action = (0,rxjs__WEBPACK_IMPORTED_MODULE_1__.combineLatest)([this._last_action, (0,rxjs__WEBPACK_IMPORTED_MODULE_2__.interval)(1000)]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.throttleTime)(300), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.map)(([last_action]) => last_action));
    this.idle_time = this.last_action.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.map)(time => Date.now() - time));
  }
  _onUserInteraction() {
    this._last_action.next(Date.now());
  }
  idleFor(time_ms) {
    const stop = this.startListening();
    return this.idle_time.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.first)(t => t >= time_ms), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.tap)(() => stop()));
  }
  startListening() {
    this._last_action.next(Date.now());
    for (const name of this._event_names) {
      document.body.addEventListener(name, this._update);
    }
    return () => this.stopListening();
  }
  stopListening() {
    for (const name of this._event_names) {
      document.body.removeEventListener(name, this._update);
    }
  }
  static #_ = this.ɵfac = function UserIdleTimeService_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || UserIdleTimeService)();
  };
  static #_2 = this.ɵprov = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵdefineInjectable"]({
    token: UserIdleTimeService,
    factory: UserIdleTimeService.ɵfac,
    providedIn: 'root'
  });
}

/***/ }),

/***/ 37958:
/*!*******************************************!*\
  !*** ./libs/common/src/lib/user-state.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   currentUser: () => (/* binding */ currentUser),
/* harmony export */   current_user: () => (/* binding */ current_user),
/* harmony export */   reloadUserData: () => (/* binding */ reloadUserData)
/* harmony export */ });
/* harmony import */ var _home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 89204);
/* harmony import */ var _placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @placeos/ts-client */ 35713);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! rxjs */ 90521);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! rxjs */ 68824);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! rxjs/operators */ 9494);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! rxjs/operators */ 17783);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! rxjs/operators */ 35443);
/* harmony import */ var _users_src_lib_user_class__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../users/src/lib/user.class */ 93693);





const EMPTY_USER = new _users_src_lib_user_class__WEBPACK_IMPORTED_MODULE_2__.StaffUser();
const _current_user = new rxjs__WEBPACK_IMPORTED_MODULE_3__.BehaviorSubject(null);
const _change = new rxjs__WEBPACK_IMPORTED_MODULE_3__.BehaviorSubject(0);
const current_user = _current_user.asObservable();
setTimeout(() => {
  try {
    if (jest) return;
  } catch {}
  (0,rxjs__WEBPACK_IMPORTED_MODULE_4__.combineLatest)([(0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.showUser)('current'), _change]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.delay)(1000), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.retry)(10), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.map)(([i]) => new _users_src_lib_user_class__WEBPACK_IMPORTED_MODULE_2__.StaffUser(i))).subscribe(user => _current_user.next(user));
}, 300);
function reloadUserData() {
  setTimeout( /*#__PURE__*/(0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
    const user = yield (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.showUser)('current').toPromise();
    _current_user.next(new _users_src_lib_user_class__WEBPACK_IMPORTED_MODULE_2__.StaffUser(user));
  }), 300);
}
/** Get the current user details */
function currentUser() {
  return _current_user.getValue() || EMPTY_USER;
}

/***/ }),

/***/ 64295:
/*!**********************************************!*\
  !*** ./libs/common/src/lib/vanillaqr.min.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   VanillaQR: () => (/* binding */ VanillaQR)
/* harmony export */ });
// @ts-nocheck
/** From https://github.com/chuckfairy/VanillaQR.js */
function VanillaQR(r) {
  var e = this;
  r = "object" == typeof r ? r : {}, e.revision = 3, e.imageTypes = {
    bmp: "image/bmp",
    gif: "image/gif",
    jpeg: "image/jpeg",
    jpg: "image/jpg",
    png: "image/png",
    "svg+xml": "image/svg+xml",
    tiff: "image/tiff",
    webp: "image/webp",
    "x-icon": "image/x-icon"
  }, e.toTable = r.toTable, e.domElement = e.toTable ? document.createElement("div") : document.createElement("canvas"), e.url = r.url || "", e.size = r.size || 280, e.qrc = !1, e.colorLight = r.colorLight || "#fff", e.colorDark = r.colorDark || "#000", e.ecclevel = r.ecclevel || 1, e.noBorder = r.noBorder, e.borderSize = r.borderSize || 4;
  var o,
    a,
    t,
    i,
    n,
    l,
    f,
    c = [],
    s = [],
    d = [],
    g = [],
    h = [],
    v = [],
    m = function (r, e) {
      var o;
      r > e && (o = r, r = e, e = o), o = e, o *= e, o += e, o >>= 1, g[o += r] = 1;
    },
    u = function (r, e) {
      var o;
      for (d[r + t * e] = 1, o = -2; o < 2; o++) d[r + o + t * (e - 2)] = 1, d[r - 2 + t * (e + o + 1)] = 1, d[r + 2 + t * (e + o)] = 1, d[r + o + 1 + t * (e + 2)] = 1;
      for (o = 0; o < 2; o++) m(r - 1, e + o), m(r + 1, e - o), m(r - o, e - 1), m(r + o, e + 1);
    },
    p = function (r) {
      for (; r >= 255;) r = ((r -= 255) >> 8) + (255 & r);
      return r;
    },
    b = function (r, e, o, a) {
      var t,
        i,
        n,
        l = VanillaQR.gexp,
        f = VanillaQR.glog;
      for (t = 0; t < a; t++) c[o + t] = 0;
      for (t = 0; t < e; t++) {
        if (255 != (n = f[c[r + t] ^ c[o]])) for (i = 1; i < a; i++) c[o + i - 1] = c[o + i] ^ l[p(n + v[a - i])];else for (i = o; i < o + a; i++) c[i] = c[i + 1];
        c[o + a - 1] = 255 == n ? 0 : l[p(n + v[0])];
      }
    },
    R = function (r, e) {
      var o;
      return r > e && (o = r, r = e, e = o), o = e, o += e * e, o >>= 1, g[o += r];
    },
    Q = function (r) {
      var e, o, a, i;
      switch (r) {
        case 0:
          for (o = 0; o < t; o++) for (e = 0; e < t; e++) e + o & 1 || R(e, o) || (d[e + o * t] ^= 1);
          break;
        case 1:
          for (o = 0; o < t; o++) for (e = 0; e < t; e++) 1 & o || R(e, o) || (d[e + o * t] ^= 1);
          break;
        case 2:
          for (o = 0; o < t; o++) for (a = 0, e = 0; e < t; e++, a++) 3 == a && (a = 0), a || R(e, o) || (d[e + o * t] ^= 1);
          break;
        case 3:
          for (i = 0, o = 0; o < t; o++, i++) for (3 == i && (i = 0), a = i, e = 0; e < t; e++, a++) 3 == a && (a = 0), a || R(e, o) || (d[e + o * t] ^= 1);
          break;
        case 4:
          for (o = 0; o < t; o++) for (a = 0, i = o >> 1 & 1, e = 0; e < t; e++, a++) 3 == a && (a = 0, i = !i), i || R(e, o) || (d[e + o * t] ^= 1);
          break;
        case 5:
          for (i = 0, o = 0; o < t; o++, i++) for (3 == i && (i = 0), a = 0, e = 0; e < t; e++, a++) 3 == a && (a = 0), (e & o & 1) + !(!a | !i) || R(e, o) || (d[e + o * t] ^= 1);
          break;
        case 6:
          for (i = 0, o = 0; o < t; o++, i++) for (3 == i && (i = 0), a = 0, e = 0; e < t; e++, a++) 3 == a && (a = 0), (e & o & 1) + (a && a == i) & 1 || R(e, o) || (d[e + o * t] ^= 1);
          break;
        case 7:
          for (i = 0, o = 0; o < t; o++, i++) for (3 == i && (i = 0), a = 0, e = 0; e < t; e++, a++) 3 == a && (a = 0), (a && a == i) + (e + o & 1) & 1 || R(e, o) || (d[e + o * t] ^= 1);
      }
    },
    V = function (r) {
      var e,
        o = 0;
      for (e = 0; e <= r; e++) h[e] >= 5 && (o += VanillaQR.N1 + h[e] - 5);
      for (e = 3; e < r - 1; e += 2) h[e - 2] == h[e + 2] && h[e + 2] == h[e - 1] && h[e - 1] == h[e + 1] && 3 * h[e - 1] == h[e] && (0 == h[e - 3] || e + 3 > r || 3 * h[e - 3] >= 4 * h[e] || 3 * h[e + 3] >= 4 * h[e]) && (o += VanillaQR.N3);
      return o;
    },
    k = function () {
      var r,
        e,
        o,
        a,
        i,
        n = 0,
        l = 0;
      for (e = 0; e < t - 1; e++) for (r = 0; r < t - 1; r++) (d[r + t * e] && d[r + 1 + t * e] && d[r + t * (e + 1)] && d[r + 1 + t * (e + 1)] || !(d[r + t * e] || d[r + 1 + t * e] || d[r + t * (e + 1)] || d[r + 1 + t * (e + 1)])) && (n += VanillaQR.N2);
      for (e = 0; e < t; e++) {
        for (h[0] = 0, o = a = r = 0; r < t; r++) (i = d[r + t * e]) == a ? h[o]++ : h[++o] = 1, l += (a = i) ? 1 : -1;
        n += V(o);
      }
      l < 0 && (l = -l);
      var f = l,
        c = 0;
      for (f += f << 2, f <<= 1; f > t * t;) f -= t * t, c++;
      for (n += c * VanillaQR.N4, r = 0; r < t; r++) {
        for (h[0] = 0, o = a = e = 0; e < t; e++) (i = d[r + t * e]) == a ? h[o]++ : h[++o] = 1, a = i;
        n += V(o);
      }
      return n;
    };
  e.genframe = function (r) {
    var e,
      h,
      V,
      x,
      C,
      w,
      E,
      N,
      T = VanillaQR.eccblocks,
      y = VanillaQR.gexp,
      z = VanillaQR.glog;
    x = r.length, a = 0;
    do {
      if (a++, V = 4 * (o - 1) + 16 * (a - 1), i = T[V++], n = T[V++], l = T[V++], f = T[V], x <= (V = l * (i + n) + n - 3 + (a <= 9))) break;
    } while (a < 40);
    for (t = 17 + 4 * a, C = l + (l + f) * (i + n) + n, x = 0; x < C; x++) s[x] = 0;
    for (c = r.slice(0), x = 0; x < t * t; x++) d[x] = 0;
    for (x = 0; x < (t * (t + 1) + 1) / 2; x++) g[x] = 0;
    for (x = 0; x < 3; x++) {
      for (V = 0, h = 0, 1 == x && (V = t - 7), 2 == x && (h = t - 7), d[h + 3 + t * (V + 3)] = 1, e = 0; e < 6; e++) d[h + e + t * V] = 1, d[h + t * (V + e + 1)] = 1, d[h + 6 + t * (V + e)] = 1, d[h + e + 1 + t * (V + 6)] = 1;
      for (e = 1; e < 5; e++) m(h + e, V + 1), m(h + 1, V + e + 1), m(h + 5, V + e), m(h + e + 1, V + 5);
      for (e = 2; e < 4; e++) d[h + e + t * (V + 2)] = 1, d[h + 2 + t * (V + e + 1)] = 1, d[h + 4 + t * (V + e)] = 1, d[h + e + 1 + t * (V + 4)] = 1;
    }
    if (a > 1) for (x = VanillaQR.adelta[a], h = t - 7;;) {
      for (e = t - 7; e > x - 3 && (u(e, h), !(e < x));) e -= x;
      if (h <= x + 9) break;
      u(6, h -= x), u(h, 6);
    }
    for (d[8 + t * (t - 8)] = 1, h = 0; h < 7; h++) m(7, h), m(t - 8, h), m(7, h + t - 7);
    for (e = 0; e < 8; e++) m(e, 7), m(e + t - 8, 7), m(e, t - 8);
    for (e = 0; e < 9; e++) m(e, 8);
    for (e = 0; e < 8; e++) m(e + t - 8, 8), m(8, e);
    for (h = 0; h < 7; h++) m(8, h + t - 7);
    for (e = 0; e < t - 14; e++) 1 & e ? (m(8 + e, 6), m(6, 8 + e)) : (d[8 + e + 6 * t] = 1, d[6 + t * (8 + e)] = 1);
    if (a > 6) for (x = VanillaQR.vpat[a - 7], V = 17, e = 0; e < 6; e++) for (h = 0; h < 3; h++, V--) 1 & (V > 11 ? a >> V - 12 : x >> V) ? (d[5 - e + t * (2 - h + t - 11)] = 1, d[2 - h + t - 11 + t * (5 - e)] = 1) : (m(5 - e, 2 - h + t - 11), m(2 - h + t - 11, 5 - e));
    for (h = 0; h < t; h++) for (e = 0; e <= h; e++) d[e + t * h] && m(e, h);
    for (C = c.length, w = 0; w < C; w++) s[w] = c.charCodeAt(w);
    if (c = s.slice(0), C >= (e = l * (i + n) + n) - 2 && (C = e - 2, a > 9 && C--), w = C, a > 9) {
      for (c[w + 2] = 0, c[w + 3] = 0; w--;) x = c[w], c[w + 3] |= 255 & x << 4, c[w + 2] = x >> 4;
      c[2] |= 255 & C << 4, c[1] = C >> 4, c[0] = 64 | C >> 12;
    } else {
      for (c[w + 1] = 0, c[w + 2] = 0; w--;) x = c[w], c[w + 2] |= 255 & x << 4, c[w + 1] = x >> 4;
      c[1] |= 255 & C << 4, c[0] = 64 | C >> 4;
    }
    for (w = C + 3 - (a < 10); w < e;) c[w++] = 236, c[w++] = 17;
    for (v[0] = 1, w = 0; w < f; w++) {
      for (v[w + 1] = 1, E = w; E > 0; E--) v[E] = v[E] ? v[E - 1] ^ y[p(z[v[E]] + w)] : v[E - 1];
      v[0] = y[p(z[v[0]] + w)];
    }
    for (w = 0; w <= f; w++) v[w] = z[v[w]];
    for (V = e, h = 0, w = 0; w < i; w++) b(h, l, V, f), h += l, V += f;
    for (w = 0; w < n; w++) b(h, l + 1, V, f), h += l + 1, V += f;
    for (h = 0, w = 0; w < l; w++) {
      for (E = 0; E < i; E++) s[h++] = c[w + E * l];
      for (E = 0; E < n; E++) s[h++] = c[i * l + w + E * (l + 1)];
    }
    for (E = 0; E < n; E++) s[h++] = c[i * l + w + E * (l + 1)];
    for (w = 0; w < f; w++) for (E = 0; E < i + n; E++) s[h++] = c[e + w + E * f];
    for (c = s, e = h = t - 1, V = C = 1, N = (l + f) * (i + n) + n, w = 0; w < N; w++) for (x = c[w], E = 0; E < 8; E++, x <<= 1) {
      128 & x && (d[e + t * h] = 1);
      do {
        C ? e-- : (e++, V ? 0 != h ? h-- : (V = !V, 6 == (e -= 2) && (e--, h = 9)) : h != t - 1 ? h++ : (V = !V, 6 == (e -= 2) && (e--, h -= 8))), C = !C;
      } while (R(e, h));
    }
    for (c = d.slice(0), x = 0, h = 3e4, V = 0; V < 8 && (Q(V), (e = k()) < h && (h = e, x = V), 7 != x); V++) d = c.slice(0);
    for (x != V && Q(x), h = VanillaQR.fmtword[x + (o - 1 << 3)], V = 0; V < 8; V++, h >>= 1) 1 & h && (d[t - 1 - V + 8 * t] = 1, V < 6 ? d[8 + t * V] = 1 : d[8 + t * (V + 1)] = 1);
    for (V = 0; V < 7; V++, h >>= 1) 1 & h && (d[8 + t * (t - 7 + V)] = 1, V ? d[6 - V + 8 * t] = 1 : d[7 + 8 * t] = 1);
    return d;
  }, e.init = function () {
    o = e.ecclevel;
    var r = e.genframe(e.url);
    e.toTable ? e.tableWrite(r, t) : e.canvasWrite(r, t);
  }, e.init();
}
VanillaQR.prototype = {
  canvasWrite: function (r, e) {
    if (!this.qrc && (this.qrc = this.getContext(this.domElement), !this.qrc)) return this.toTable = !0, this.domElement = document.createElement("div"), void this.tableWrite(r, e);
    var o = this.size,
      a = this.qrc;
    a.lineWidth = 1;
    var t = o;
    t /= e + 10, t = Math.round(t - .5);
    var i = 4;
    this.noBorder ? (a.canvas.width = a.canvas.height = t * e, i = 0) : a.canvas.width = a.canvas.height = o, a.clearRect(0, 0, o, o), a.fillStyle = this.colorLight, a.fillRect(0, 0, t * (e + 8), t * (e + 8)), a.fillStyle = this.colorDark;
    for (var n = 0; n < e; n++) for (var l = 0; l < e; l++) r[l * e + n] && a.fillRect(t * (i + n), t * (i + l), t, t);
  },
  tableWrite: function (r, e) {
    var o = this,
      a = Math.round(this.size / e - 3.5) + "px",
      t = e + (o.noBorder ? 0 : 2 * o.borderSize),
      i = o.borderSize,
      n = "width:" + a + ";height:" + a + ";",
      l = o.colorLight,
      f = o.colorDark,
      c = document.createElement("table");
    c.style.cssText = "border:0;border-collapse:collapse;";
    for (var s, d = document.createElement("tr"), g = document.createElement("td"), h = function () {
        return g.cloneNode();
      }, v = function () {
        var r = h();
        return r.style.cssText = n + "background:" + l, r;
      }, m = function (r) {
        for (var e = r.firstChild, o = 0; o < i; o++) r.insertBefore(v(), e), r.appendChild(v());
      }, u = 0; u < e; u++) {
      var p = d.cloneNode();
      c.appendChild(p);
      for (var b = 0; b < e; b++) if (1 === r[u * e + b]) {
        var R = (s = void 0, (s = h()).style.cssText = n + "background:" + f, s);
        p.appendChild(R);
      } else {
        var Q = v();
        p.appendChild(Q);
      }
      o.noBorder || m(p);
    }
    o.noBorder || function (r) {
      for (var e = r.firstChild, a = 0; a < o.borderSize; a++) {
        for (var i = d.cloneNode(), n = 0; n < t; n++) {
          var l = v();
          i.appendChild(l);
        }
        r.appendChild(i), r.insertBefore(i.cloneNode(!0), e);
      }
    }(c), o.domElement.innerHTML = "", o.domElement.appendChild(c);
  },
  getContext: function (r) {
    return r.getContext && r.getContext("2d") ? r.getContext("2d") : (console.log("Browser does not have 2d Canvas support"), !1);
  },
  toImage: function (r) {
    if (this.qrc) {
      var e = this.imageTypes[r];
      if (!e) throw new Error(r + " is not a valid image type ");
      var o = new Image();
      return o.src = this.domElement.toDataURL(e), o;
    }
  }
}, VanillaQR.adelta = [0, 11, 15, 19, 23, 27, 31, 16, 18, 20, 22, 24, 26, 28, 20, 22, 24, 24, 26, 28, 28, 22, 24, 24, 26, 26, 28, 28, 24, 24, 26, 26, 26, 28, 28, 24, 26, 26, 26, 28, 28], VanillaQR.vpat = [3220, 1468, 2713, 1235, 3062, 1890, 2119, 1549, 2344, 2936, 1117, 2583, 1330, 2470, 1667, 2249, 2028, 3780, 481, 4011, 142, 3098, 831, 3445, 592, 2517, 1776, 2234, 1951, 2827, 1070, 2660, 1345, 3177], VanillaQR.fmtword = [30660, 29427, 32170, 30877, 26159, 25368, 27713, 26998, 21522, 20773, 24188, 23371, 17913, 16590, 20375, 19104, 13663, 12392, 16177, 14854, 9396, 8579, 11994, 11245, 5769, 5054, 7399, 6608, 1890, 597, 3340, 2107], VanillaQR.eccblocks = [1, 0, 19, 7, 1, 0, 16, 10, 1, 0, 13, 13, 1, 0, 9, 17, 1, 0, 34, 10, 1, 0, 28, 16, 1, 0, 22, 22, 1, 0, 16, 28, 1, 0, 55, 15, 1, 0, 44, 26, 2, 0, 17, 18, 2, 0, 13, 22, 1, 0, 80, 20, 2, 0, 32, 18, 2, 0, 24, 26, 4, 0, 9, 16, 1, 0, 108, 26, 2, 0, 43, 24, 2, 2, 15, 18, 2, 2, 11, 22, 2, 0, 68, 18, 4, 0, 27, 16, 4, 0, 19, 24, 4, 0, 15, 28, 2, 0, 78, 20, 4, 0, 31, 18, 2, 4, 14, 18, 4, 1, 13, 26, 2, 0, 97, 24, 2, 2, 38, 22, 4, 2, 18, 22, 4, 2, 14, 26, 2, 0, 116, 30, 3, 2, 36, 22, 4, 4, 16, 20, 4, 4, 12, 24, 2, 2, 68, 18, 4, 1, 43, 26, 6, 2, 19, 24, 6, 2, 15, 28, 4, 0, 81, 20, 1, 4, 50, 30, 4, 4, 22, 28, 3, 8, 12, 24, 2, 2, 92, 24, 6, 2, 36, 22, 4, 6, 20, 26, 7, 4, 14, 28, 4, 0, 107, 26, 8, 1, 37, 22, 8, 4, 20, 24, 12, 4, 11, 22, 3, 1, 115, 30, 4, 5, 40, 24, 11, 5, 16, 20, 11, 5, 12, 24, 5, 1, 87, 22, 5, 5, 41, 24, 5, 7, 24, 30, 11, 7, 12, 24, 5, 1, 98, 24, 7, 3, 45, 28, 15, 2, 19, 24, 3, 13, 15, 30, 1, 5, 107, 28, 10, 1, 46, 28, 1, 15, 22, 28, 2, 17, 14, 28, 5, 1, 120, 30, 9, 4, 43, 26, 17, 1, 22, 28, 2, 19, 14, 28, 3, 4, 113, 28, 3, 11, 44, 26, 17, 4, 21, 26, 9, 16, 13, 26, 3, 5, 107, 28, 3, 13, 41, 26, 15, 5, 24, 30, 15, 10, 15, 28, 4, 4, 116, 28, 17, 0, 42, 26, 17, 6, 22, 28, 19, 6, 16, 30, 2, 7, 111, 28, 17, 0, 46, 28, 7, 16, 24, 30, 34, 0, 13, 24, 4, 5, 121, 30, 4, 14, 47, 28, 11, 14, 24, 30, 16, 14, 15, 30, 6, 4, 117, 30, 6, 14, 45, 28, 11, 16, 24, 30, 30, 2, 16, 30, 8, 4, 106, 26, 8, 13, 47, 28, 7, 22, 24, 30, 22, 13, 15, 30, 10, 2, 114, 28, 19, 4, 46, 28, 28, 6, 22, 28, 33, 4, 16, 30, 8, 4, 122, 30, 22, 3, 45, 28, 8, 26, 23, 30, 12, 28, 15, 30, 3, 10, 117, 30, 3, 23, 45, 28, 4, 31, 24, 30, 11, 31, 15, 30, 7, 7, 116, 30, 21, 7, 45, 28, 1, 37, 23, 30, 19, 26, 15, 30, 5, 10, 115, 30, 19, 10, 47, 28, 15, 25, 24, 30, 23, 25, 15, 30, 13, 3, 115, 30, 2, 29, 46, 28, 42, 1, 24, 30, 23, 28, 15, 30, 17, 0, 115, 30, 10, 23, 46, 28, 10, 35, 24, 30, 19, 35, 15, 30, 17, 1, 115, 30, 14, 21, 46, 28, 29, 19, 24, 30, 11, 46, 15, 30, 13, 6, 115, 30, 14, 23, 46, 28, 44, 7, 24, 30, 59, 1, 16, 30, 12, 7, 121, 30, 12, 26, 47, 28, 39, 14, 24, 30, 22, 41, 15, 30, 6, 14, 121, 30, 6, 34, 47, 28, 46, 10, 24, 30, 2, 64, 15, 30, 17, 4, 122, 30, 29, 14, 46, 28, 49, 10, 24, 30, 24, 46, 15, 30, 4, 18, 122, 30, 13, 32, 46, 28, 48, 14, 24, 30, 42, 32, 15, 30, 20, 4, 117, 30, 40, 7, 47, 28, 43, 22, 24, 30, 10, 67, 15, 30, 19, 6, 118, 30, 18, 31, 47, 28, 34, 34, 24, 30, 20, 61, 15, 30], VanillaQR.glog = [255, 0, 1, 25, 2, 50, 26, 198, 3, 223, 51, 238, 27, 104, 199, 75, 4, 100, 224, 14, 52, 141, 239, 129, 28, 193, 105, 248, 200, 8, 76, 113, 5, 138, 101, 47, 225, 36, 15, 33, 53, 147, 142, 218, 240, 18, 130, 69, 29, 181, 194, 125, 106, 39, 249, 185, 201, 154, 9, 120, 77, 228, 114, 166, 6, 191, 139, 98, 102, 221, 48, 253, 226, 152, 37, 179, 16, 145, 34, 136, 54, 208, 148, 206, 143, 150, 219, 189, 241, 210, 19, 92, 131, 56, 70, 64, 30, 66, 182, 163, 195, 72, 126, 110, 107, 58, 40, 84, 250, 133, 186, 61, 202, 94, 155, 159, 10, 21, 121, 43, 78, 212, 229, 172, 115, 243, 167, 87, 7, 112, 192, 247, 140, 128, 99, 13, 103, 74, 222, 237, 49, 197, 254, 24, 227, 165, 153, 119, 38, 184, 180, 124, 17, 68, 146, 217, 35, 32, 137, 46, 55, 63, 209, 91, 149, 188, 207, 205, 144, 135, 151, 178, 220, 252, 190, 97, 242, 86, 211, 171, 20, 42, 93, 158, 132, 60, 57, 83, 71, 109, 65, 162, 31, 45, 67, 216, 183, 123, 164, 118, 196, 23, 73, 236, 127, 12, 111, 246, 108, 161, 59, 82, 41, 157, 85, 170, 251, 96, 134, 177, 187, 204, 62, 90, 203, 89, 95, 176, 156, 169, 160, 81, 11, 245, 22, 235, 122, 117, 44, 215, 79, 174, 213, 233, 230, 231, 173, 232, 116, 214, 244, 234, 168, 80, 88, 175], VanillaQR.gexp = [1, 2, 4, 8, 16, 32, 64, 128, 29, 58, 116, 232, 205, 135, 19, 38, 76, 152, 45, 90, 180, 117, 234, 201, 143, 3, 6, 12, 24, 48, 96, 192, 157, 39, 78, 156, 37, 74, 148, 53, 106, 212, 181, 119, 238, 193, 159, 35, 70, 140, 5, 10, 20, 40, 80, 160, 93, 186, 105, 210, 185, 111, 222, 161, 95, 190, 97, 194, 153, 47, 94, 188, 101, 202, 137, 15, 30, 60, 120, 240, 253, 231, 211, 187, 107, 214, 177, 127, 254, 225, 223, 163, 91, 182, 113, 226, 217, 175, 67, 134, 17, 34, 68, 136, 13, 26, 52, 104, 208, 189, 103, 206, 129, 31, 62, 124, 248, 237, 199, 147, 59, 118, 236, 197, 151, 51, 102, 204, 133, 23, 46, 92, 184, 109, 218, 169, 79, 158, 33, 66, 132, 21, 42, 84, 168, 77, 154, 41, 82, 164, 85, 170, 73, 146, 57, 114, 228, 213, 183, 115, 230, 209, 191, 99, 198, 145, 63, 126, 252, 229, 215, 179, 123, 246, 241, 255, 227, 219, 171, 75, 150, 49, 98, 196, 149, 55, 110, 220, 165, 87, 174, 65, 130, 25, 50, 100, 200, 141, 7, 14, 28, 56, 112, 224, 221, 167, 83, 166, 81, 162, 89, 178, 121, 242, 249, 239, 195, 155, 43, 86, 172, 69, 138, 9, 18, 36, 72, 144, 61, 122, 244, 245, 247, 243, 251, 235, 203, 139, 11, 22, 44, 88, 176, 125, 250, 233, 207, 131, 27, 54, 108, 216, 173, 71, 142, 0], VanillaQR.N1 = 3, VanillaQR.N2 = 3, VanillaQR.N3 = 40, VanillaQR.N4 = 10;

/***/ }),

/***/ 93885:
/*!****************************************!*\
  !*** ./libs/common/src/lib/version.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   VERSION: () => (/* binding */ VERSION)
/* harmony export */ });
// IMPORTANT: THIS FILE IS AUTO GENERATED! DO NOT MANUALLY EDIT OR CHECKIN!
/* tslint:disable */
const VERSION = {
  "dirty": false,
  "raw": "fc60057",
  "hash": "fc60057",
  "distance": null,
  "tag": null,
  "semver": null,
  "suffix": "fc60057",
  "semverString": null,
  "version": "1.12.0",
  "time": 1726723180284
};
/* tslint:enable */

/***/ }),

/***/ 94972:
/*!***********************************************!*\
  !*** ./libs/common/src/lib/vorlon.service.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   VorlonService: () => (/* binding */ VorlonService)
/* harmony export */ });
/* harmony import */ var _home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 89204);
/* harmony import */ var _placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @placeos/ts-client */ 35713);
/* harmony import */ var _async_handler_class__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./async-handler.class */ 75354);
/* harmony import */ var _settings_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./settings.service */ 14233);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/core */ 37580);






class VorlonService extends _async_handler_class__WEBPACK_IMPORTED_MODULE_2__.AsyncHandler {
  constructor(_settings) {
    super();
    this._settings = _settings;
    this.load();
  }
  load() {
    var _this = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      const system = _this._settings.get('app.vorlon.system');
      if (system) {
        const module = (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.getModule)(system, 'Vorlon');
        if (module) {
          const binding = module.binding('enabled');
          _this.subscription('binding', binding.bind());
          _this.subscription('binding_value', binding.listen().subscribe(state => {
            state ? _this.injectVorlonScript() : _this.removeVorlonScript();
          }));
        }
      }
    })();
  }
  injectVorlonScript() {
    this.removeVorlonScript();
    this._script = document.createElement('script');
    const url = this._settings.get('app.vorlon.url');
    this._script.src = url || `./assets/vorlon.js`;
    document.head.appendChild(this._script);
  }
  removeVorlonScript() {
    if (this._script) {
      this._script.parentNode.removeChild(this._script);
      delete this._script;
      this._script = null;
    }
  }
  static #_ = this.ɵfac = function VorlonService_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || VorlonService)(_angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵinject"](_settings_service__WEBPACK_IMPORTED_MODULE_3__.SettingsService));
  };
  static #_2 = this.ɵprov = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵdefineInjectable"]({
    token: VorlonService,
    factory: VorlonService.ɵfac,
    providedIn: 'root'
  });
}

/***/ }),

/***/ 51588:
/*!**************************************!*\
  !*** ./libs/components/src/index.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ActionIconComponent: () => (/* reexport safe */ _lib_action_icon_component__WEBPACK_IMPORTED_MODULE_1__.ActionIconComponent),
/* harmony export */   AttachedResourceConfigModalComponent: () => (/* reexport safe */ _lib_attached_resource_config_modal_component__WEBPACK_IMPORTED_MODULE_29__.AttachedResourceConfigModalComponent),
/* harmony export */   AuthorisedAdminGuard: () => (/* reexport safe */ _lib_authorised_admin_guard__WEBPACK_IMPORTED_MODULE_31__.AuthorisedAdminGuard),
/* harmony export */   AuthorisedUserGuard: () => (/* reexport safe */ _lib_authorised_user_guard__WEBPACK_IMPORTED_MODULE_32__.AuthorisedUserGuard),
/* harmony export */   AvailableRoomsStateModalComponent: () => (/* reexport safe */ _lib_available_rooms_state_modal_component__WEBPACK_IMPORTED_MODULE_30__.AvailableRoomsStateModalComponent),
/* harmony export */   BindingDirective: () => (/* reexport safe */ _lib_binding_directive__WEBPACK_IMPORTED_MODULE_2__.BindingDirective),
/* harmony export */   CONFIRM_METADATA: () => (/* reexport safe */ _lib_confirm_modal_component__WEBPACK_IMPORTED_MODULE_3__.CONFIRM_METADATA),
/* harmony export */   ChangelogModalComponent: () => (/* reexport safe */ _lib_changelog_modal_component__WEBPACK_IMPORTED_MODULE_27__.ChangelogModalComponent),
/* harmony export */   ComponentsModule: () => (/* reexport safe */ _lib_components_module__WEBPACK_IMPORTED_MODULE_0__.ComponentsModule),
/* harmony export */   ConfirmModalComponent: () => (/* reexport safe */ _lib_confirm_modal_component__WEBPACK_IMPORTED_MODULE_3__.ConfirmModalComponent),
/* harmony export */   CustomTableComponent: () => (/* reexport safe */ _lib_custom_table_component__WEBPACK_IMPORTED_MODULE_17__.CustomTableComponent),
/* harmony export */   CustomTooltipComponent: () => (/* reexport safe */ _lib_custom_tooltip_component__WEBPACK_IMPORTED_MODULE_18__.CustomTooltipComponent),
/* harmony export */   CustomTooltipData: () => (/* reexport safe */ _lib_custom_tooltip_component__WEBPACK_IMPORTED_MODULE_18__.CustomTooltipData),
/* harmony export */   FixedPipe: () => (/* reexport safe */ _lib_fixed_pipe__WEBPACK_IMPORTED_MODULE_19__.FixedPipe),
/* harmony export */   GlobalLoadingComponent: () => (/* reexport safe */ _lib_global_loading_component__WEBPACK_IMPORTED_MODULE_23__.GlobalLoadingComponent),
/* harmony export */   IconComponent: () => (/* reexport safe */ _lib_icon_component__WEBPACK_IMPORTED_MODULE_4__.IconComponent),
/* harmony export */   ImageCarouselComponent: () => (/* reexport safe */ _lib_image_carousel_component__WEBPACK_IMPORTED_MODULE_25__.ImageCarouselComponent),
/* harmony export */   IndoorMapsComponent: () => (/* reexport safe */ _lib_indoor_maps_component__WEBPACK_IMPORTED_MODULE_14__.IndoorMapsComponent),
/* harmony export */   InteractiveMapComponent: () => (/* reexport safe */ _lib_interactive_map_component__WEBPACK_IMPORTED_MODULE_9__.InteractiveMapComponent),
/* harmony export */   LoginComponent: () => (/* reexport safe */ _lib_login_component__WEBPACK_IMPORTED_MODULE_5__.LoginComponent),
/* harmony export */   MAP_FEATURE_DATA: () => (/* reexport safe */ _lib_interactive_map_component__WEBPACK_IMPORTED_MODULE_9__.MAP_FEATURE_DATA),
/* harmony export */   MapLocateModalComponent: () => (/* reexport safe */ _lib_map_locate_modal_component__WEBPACK_IMPORTED_MODULE_24__.MapLocateModalComponent),
/* harmony export */   MapPinComponent: () => (/* reexport safe */ _lib_map_pin_component__WEBPACK_IMPORTED_MODULE_12__.MapPinComponent),
/* harmony export */   MapRadiusComponent: () => (/* reexport safe */ _lib_map_radius_component__WEBPACK_IMPORTED_MODULE_13__.MapRadiusComponent),
/* harmony export */   MapRendererComponent: () => (/* reexport safe */ _lib_map_renderer_component__WEBPACK_IMPORTED_MODULE_10__.MapRendererComponent),
/* harmony export */   MapsIndoorsComponent: () => (/* reexport safe */ _lib_maps_indoors_component__WEBPACK_IMPORTED_MODULE_11__.MapsIndoorsComponent),
/* harmony export */   MisconfiguredComponent: () => (/* reexport safe */ _lib_misconfigured_component__WEBPACK_IMPORTED_MODULE_15__.MisconfiguredComponent),
/* harmony export */   PLACEOS_APP_ACCESS: () => (/* reexport safe */ _lib_authorised_user_guard__WEBPACK_IMPORTED_MODULE_32__.PLACEOS_APP_ACCESS),
/* harmony export */   PopoutMenuComponent: () => (/* reexport safe */ _lib_popout_menu_component__WEBPACK_IMPORTED_MODULE_6__.PopoutMenuComponent),
/* harmony export */   RULE_TYPES: () => (/* reexport safe */ _lib_attached_resource_config_modal_component__WEBPACK_IMPORTED_MODULE_29__.RULE_TYPES),
/* harmony export */   RedirectComponent: () => (/* reexport safe */ _lib_redirect_component__WEBPACK_IMPORTED_MODULE_26__.RedirectComponent),
/* harmony export */   SafePipe: () => (/* reexport safe */ _lib_safe_pipe__WEBPACK_IMPORTED_MODULE_20__.SafePipe),
/* harmony export */   SanitizePipe: () => (/* reexport safe */ _lib_sanitise_pipe__WEBPACK_IMPORTED_MODULE_21__.SanitizePipe),
/* harmony export */   StatusOverlayComponent: () => (/* reexport safe */ _lib_status_overlay_component__WEBPACK_IMPORTED_MODULE_16__.StatusOverlayComponent),
/* harmony export */   UnauthorisedComponent: () => (/* reexport safe */ _lib_unauthorised_component__WEBPACK_IMPORTED_MODULE_7__.UnauthorisedComponent),
/* harmony export */   UserAvatarComponent: () => (/* reexport safe */ _lib_user_avatar_component__WEBPACK_IMPORTED_MODULE_8__.UserAvatarComponent),
/* harmony export */   UserControlsComponent: () => (/* reexport safe */ _lib_user_controls_component__WEBPACK_IMPORTED_MODULE_28__.UserControlsComponent),
/* harmony export */   VirtualKeyboardComponent: () => (/* reexport safe */ _lib_virtual_keyboard_component__WEBPACK_IMPORTED_MODULE_22__.VirtualKeyboardComponent)
/* harmony export */ });
/* harmony import */ var _lib_components_module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./lib/components.module */ 14974);
/* harmony import */ var _lib_action_icon_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./lib/action-icon.component */ 88157);
/* harmony import */ var _lib_binding_directive__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./lib/binding.directive */ 83938);
/* harmony import */ var _lib_confirm_modal_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./lib/confirm-modal.component */ 30841);
/* harmony import */ var _lib_icon_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./lib/icon.component */ 69434);
/* harmony import */ var _lib_login_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./lib/login.component */ 69024);
/* harmony import */ var _lib_popout_menu_component__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./lib/popout-menu.component */ 44418);
/* harmony import */ var _lib_unauthorised_component__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./lib/unauthorised.component */ 67834);
/* harmony import */ var _lib_user_avatar_component__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./lib/user-avatar.component */ 23574);
/* harmony import */ var _lib_interactive_map_component__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./lib/interactive-map.component */ 24918);
/* harmony import */ var _lib_map_renderer_component__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./lib/map-renderer.component */ 39489);
/* harmony import */ var _lib_maps_indoors_component__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./lib/maps-indoors.component */ 30877);
/* harmony import */ var _lib_map_pin_component__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./lib/map-pin.component */ 71865);
/* harmony import */ var _lib_map_radius_component__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./lib/map-radius.component */ 95384);
/* harmony import */ var _lib_indoor_maps_component__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./lib/indoor-maps.component */ 92124);
/* harmony import */ var _lib_misconfigured_component__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./lib/misconfigured.component */ 74118);
/* harmony import */ var _lib_status_overlay_component__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./lib/status-overlay.component */ 91960);
/* harmony import */ var _lib_custom_table_component__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./lib/custom-table.component */ 12993);
/* harmony import */ var _lib_custom_tooltip_component__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./lib/custom-tooltip.component */ 22238);
/* harmony import */ var _lib_fixed_pipe__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./lib/fixed.pipe */ 62678);
/* harmony import */ var _lib_safe_pipe__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./lib/safe.pipe */ 26781);
/* harmony import */ var _lib_sanitise_pipe__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./lib/sanitise.pipe */ 54616);
/* harmony import */ var _lib_virtual_keyboard_component__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./lib/virtual-keyboard.component */ 75080);
/* harmony import */ var _lib_global_loading_component__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./lib/global-loading.component */ 34921);
/* harmony import */ var _lib_map_locate_modal_component__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./lib/map-locate-modal.component */ 90620);
/* harmony import */ var _lib_image_carousel_component__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./lib/image-carousel.component */ 65277);
/* harmony import */ var _lib_redirect_component__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./lib/redirect.component */ 68283);
/* harmony import */ var _lib_changelog_modal_component__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./lib/changelog-modal.component */ 65991);
/* harmony import */ var _lib_user_controls_component__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./lib/user-controls.component */ 74633);
/* harmony import */ var _lib_attached_resource_config_modal_component__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ./lib/attached-resource-config-modal.component */ 65843);
/* harmony import */ var _lib_available_rooms_state_modal_component__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ./lib/available-rooms-state-modal.component */ 10375);
/* harmony import */ var _lib_authorised_admin_guard__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ./lib/authorised-admin.guard */ 7345);
/* harmony import */ var _lib_authorised_user_guard__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! ./lib/authorised-user.guard */ 1645);


































/***/ }),

/***/ 6539:
/*!********************************************************************!*\
  !*** ./libs/components/src/lib/accessibility-tooltip.component.ts ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AccessibilityTooltipComponent: () => (/* binding */ AccessibilityTooltipComponent)
/* harmony export */ });
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var _placeos_components__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @placeos/components */ 51588);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/forms */ 34456);
/* harmony import */ var _angular_material_slider__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @angular/material/slider */ 64992);
/* harmony import */ var _angular_material_slide_toggle__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @angular/material/slide-toggle */ 8827);
/* harmony import */ var _icon_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./icon.component */ 69434);









function AccessibilityTooltipComponent_div_6_Template(rf, ctx) {
  if (rf & 1) {
    const _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "div", 9)(1, "div", 10)(2, "app-icon", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](3, "mode_night");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](4, "div", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵi18n"](5, 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](6, "mat-slide-toggle", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵlistener"]("ngModelChange", function AccessibilityTooltipComponent_div_6_Template_mat_slide_toggle_ngModelChange_6_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵrestoreView"](_r1);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵresetView"](ctx_r1.setDarkMode($event));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](6);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngModel", ctx_r1.dark_mode);
  }
}
function AccessibilityTooltipComponent_ng_container_14_Template(rf, ctx) {
  if (rf & 1) {
    const _r3 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](1, "div", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵi18n"](2, 3);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](3, "div", 16)(4, "span", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](5, "A");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](6, "mat-slider", 18)(7, "input", 19);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵlistener"]("ngModelChange", function AccessibilityTooltipComponent_ng_container_14_Template_input_ngModelChange_7_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵrestoreView"](_r3);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵresetView"](ctx_r1.applySetting("font_size", $event));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](8, "span", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](9, "A");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](10, "span", 20);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](11);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementContainerEnd"]();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](6);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("min", 10)("max", 24)("step", 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngModel", ctx_r1.font_size);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtextInterpolate1"](" ", ctx_r1.font_size, "px ");
  }
}
class AccessibilityTooltipComponent extends _placeos_common__WEBPACK_IMPORTED_MODULE_0__.AsyncHandler {
  get dark_mode() {
    return this._settings.get('theme') === 'dark';
  }
  get can_change_dark_mode() {
    return !!this._settings.get('app.general.dark_mode');
  }
  get accessible() {
    return !!this._settings.get('accessible');
  }
  get font_size() {
    return this._settings.get('font_size') || 16;
  }
  constructor(_data, _settings) {
    super();
    this._data = _data;
    this._settings = _settings;
    this.applySetting = (n, v) => this.timeout('apply_setting', () => this._settings.saveUserSetting(n, v), 1000);
    this.close = () => this._data?.close();
  }
  setDarkMode(state) {
    const theme = this._settings.get('theme');
    if (state && theme !== 'dark') this._settings.setTheme('dark');else if (!state && theme === 'dark') this._settings.setTheme('light');
  }
  static #_ = this.ɵfac = function AccessibilityTooltipComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || AccessibilityTooltipComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵdirectiveInject"](_placeos_components__WEBPACK_IMPORTED_MODULE_1__.CustomTooltipData), _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵdirectiveInject"](_placeos_common__WEBPACK_IMPORTED_MODULE_0__.SettingsService));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵdefineComponent"]({
    type: AccessibilityTooltipComponent,
    selectors: [["accessibility-tooltip"]],
    features: [_angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵInheritDefinitionFeature"]],
    decls: 15,
    vars: 3,
    consts: () => {
      let i18n_0;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_6572705143012462182$$LIBS_COMPONENTS_SRC_LIB_ACCESSIBILITY_TOOLTIP_COMPONENT_TS_0 = goog.getMsg("Display & Accessibility");
        i18n_0 = MSG_EXTERNAL_6572705143012462182$$LIBS_COMPONENTS_SRC_LIB_ACCESSIBILITY_TOOLTIP_COMPONENT_TS_0;
      } else {
        i18n_0 = $localize`:␟d22b673a92b43eabbdebd80b1539a553703c84f6␟6572705143012462182:Display & Accessibility`;
      }
      let i18n_1;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_127744830115363320$$LIBS_COMPONENTS_SRC_LIB_ACCESSIBILITY_TOOLTIP_COMPONENT_TS_1 = goog.getMsg("Large Accessibility Sizes");
        i18n_1 = MSG_EXTERNAL_127744830115363320$$LIBS_COMPONENTS_SRC_LIB_ACCESSIBILITY_TOOLTIP_COMPONENT_TS_1;
      } else {
        i18n_1 = $localize`:␟0f027c150c7e9465a5cdf64c4d07c33aca92384d␟127744830115363320:Large Accessibility Sizes`;
      }
      let i18n_2;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_3279636347259347513$$LIBS_COMPONENTS_SRC_LIB_ACCESSIBILITY_TOOLTIP_COMPONENT_TS_2 = goog.getMsg("Dark Mode");
        i18n_2 = MSG_EXTERNAL_3279636347259347513$$LIBS_COMPONENTS_SRC_LIB_ACCESSIBILITY_TOOLTIP_COMPONENT_TS_2;
      } else {
        i18n_2 = $localize`:␟c943d5ecc32b916a210d7c984fe5f55771ad0b1a␟3279636347259347513:Dark Mode`;
      }
      let i18n_3;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_8609643488577372847$$LIBS_COMPONENTS_SRC_LIB_ACCESSIBILITY_TOOLTIP_COMPONENT_TS_3 = goog.getMsg(" Adjust your preferred reading size below. ");
        i18n_3 = MSG_EXTERNAL_8609643488577372847$$LIBS_COMPONENTS_SRC_LIB_ACCESSIBILITY_TOOLTIP_COMPONENT_TS_3;
      } else {
        i18n_3 = $localize`:␟3fc32876e34616b005d861eafe737cf4d2793184␟8609643488577372847: Adjust your preferred reading size below. `;
      }
      return [i18n_0, i18n_1, i18n_2, i18n_3, [1, "flex", "flex-col", "w-[18.5rem]", "rounded", "bg-base-100", "shadow", "relative", "-top-12", "-right-1", "overflow-hidden"], [1, "flex", "items-center", "space-x-2", "p-2", 3, "click"], [1, "text-2xl"], [1, ""], ["action", "", "class", "flex items-center space-x-2 w-full text-left h-auto px-4", 4, "ngIf"], ["action", "", 1, "flex", "items-center", "space-x-2", "w-full", "text-left", "h-auto", "px-4"], [1, "flex", "items-center", "justify-center", "rounded-full", "w-8", "h-8", "bg-base-200", "my-2"], [1, "text-xl"], [1, "flex-1", "text-sm"], [3, "ngModelChange", "ngModel"], [4, "ngIf"], [1, "px-8", "py-4", "bg-base-200", "text-center"], [1, "flex", "items-center", "px-4", "space-x-4"], [1, "text-sm"], [1, "flex-1", "w-1/2", "text-[16px]", 3, "min", "max", "step"], ["matSliderThumb", "", 1, "text-[16px]", 3, "ngModelChange", "ngModel"], [1, "text-base", "py-1", "px-2", "rounded", "bg-base-300", "text-white", "my-2"]];
    },
    template: function AccessibilityTooltipComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "div", 4)(1, "div", 5);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵlistener"]("click", function AccessibilityTooltipComponent_Template_div_click_1_listener() {
          return ctx.close();
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](2, "app-icon", 6);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](3, "arrow_back");
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](4, "div", 7);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵi18n"](5, 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](6, AccessibilityTooltipComponent_div_6_Template, 7, 1, "div", 8);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](7, "div", 9)(8, "div", 10)(9, "app-icon", 11);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](10, "playlist_add");
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](11, "div", 12);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵi18n"](12, 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](13, "mat-slide-toggle", 13);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵlistener"]("ngModelChange", function AccessibilityTooltipComponent_Template_mat_slide_toggle_ngModelChange_13_listener($event) {
          return ctx.applySetting("accessible", $event);
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](14, AccessibilityTooltipComponent_ng_container_14_Template, 12, 5, "ng-container", 14);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
      }
      if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](6);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", ctx.can_change_dark_mode);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](7);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngModel", ctx.accessible);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", ctx.accessible);
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_4__.NgIf, _angular_forms__WEBPACK_IMPORTED_MODULE_5__.DefaultValueAccessor, _angular_forms__WEBPACK_IMPORTED_MODULE_5__.NgControlStatus, _angular_forms__WEBPACK_IMPORTED_MODULE_5__.NgModel, _angular_material_slider__WEBPACK_IMPORTED_MODULE_6__.MatSlider, _angular_material_slider__WEBPACK_IMPORTED_MODULE_6__.MatSliderThumb, _angular_material_slide_toggle__WEBPACK_IMPORTED_MODULE_7__.MatSlideToggle, _icon_component__WEBPACK_IMPORTED_MODULE_2__.IconComponent],
    styles: ["[_nghost-%COMP%]    > div[_ngcontent-%COMP%]    > [action][_ngcontent-%COMP%] {\n                border-top: 1px solid #ccc;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFjY2Vzc2liaWxpdHktdG9vbHRpcC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLDBCQUEwQjtZQUM5QiIsImZpbGUiOiJhY2Nlc3NpYmlsaXR5LXRvb2x0aXAuY29tcG9uZW50LnRzIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICA6aG9zdCA+IGRpdiA+IFthY3Rpb25dIHtcbiAgICAgICAgICAgICAgICBib3JkZXItdG9wOiAxcHggc29saWQgI2NjYztcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl19 */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvY29tcG9uZW50cy9zcmMvbGliL2FjY2Vzc2liaWxpdHktdG9vbHRpcC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLDBCQUEwQjtZQUM5Qjs7QUFFWixnYkFBZ2IiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIDpob3N0ID4gZGl2ID4gW2FjdGlvbl0ge1xuICAgICAgICAgICAgICAgIGJvcmRlci10b3A6IDFweCBzb2xpZCAjY2NjO1xuICAgICAgICAgICAgfVxuICAgICAgICAiXSwic291cmNlUm9vdCI6IiJ9 */"]
  });
}

/***/ }),

/***/ 88157:
/*!**********************************************************!*\
  !*** ./libs/components/src/lib/action-icon.component.ts ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ActionIconComponent: () => (/* binding */ ActionIconComponent)
/* harmony export */ });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _angular_material_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/material/core */ 74646);
/* harmony import */ var _angular_material_progress_spinner__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/material/progress-spinner */ 41134);
/* harmony import */ var _icon_component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./icon.component */ 69434);





const _c0 = ["*"];
function ActionIconComponent_div_4_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div")(1, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵclassMap"]("state center " + ctx_r0.state);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate1"](" ", ctx_r0.state === "success" ? "done" : "close", " ");
  }
}
function ActionIconComponent_div_5_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div", 4);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](1, "mat-spinner", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("diameter", 16);
  }
}
class ActionIconComponent {
  constructor() {
    /** Icon to display */
    this.className = 'material-icons';
    /** State of the action */
    this.state = '';
  }
  static #_ = this.ɵfac = function ActionIconComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || ActionIconComponent)();
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdefineComponent"]({
    type: ActionIconComponent,
    selectors: [["action-icon"]],
    inputs: {
      icon: "icon",
      className: "className",
      content: "content",
      loading: "loading",
      disabled: "disabled",
      state: "state"
    },
    ngContentSelectors: _c0,
    decls: 6,
    vars: 8,
    consts: [["icon", "", "matRipple", "", "title", "", 1, "relative", 3, "disabled"], ["root", "", 3, "className", "icon"], [3, "class", 4, "ngIf"], ["class", "loader center", 4, "ngIf"], [1, "loader", "center"], [3, "diameter"]],
    template: function ActionIconComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵprojectionDef"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "button", 0)(1, "app-icon", 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵprojection"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](4, ActionIconComponent_div_4_Template, 3, 3, "div", 2)(5, ActionIconComponent_div_5_Template, 2, 1, "div", 3);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
      }
      if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵclassProp"]("success", ctx.state === "success");
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("disabled", ctx.loading || ctx.disabled);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("className", ctx.className)("icon", ctx.icon);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate1"](" ", ctx.content, " ");
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", !ctx.loading && ctx.state);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", ctx.loading);
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_2__.NgIf, _angular_material_core__WEBPACK_IMPORTED_MODULE_3__.MatRipple, _angular_material_progress_spinner__WEBPACK_IMPORTED_MODULE_4__.MatProgressSpinner, _icon_component__WEBPACK_IMPORTED_MODULE_0__.IconComponent],
    styles: [".action-icon.fade[_ngcontent-%COMP%]    > app-icon[_ngcontent-%COMP%] {\n                opacity: 0.35;\n            }\n\n            .success[_ngcontent-%COMP%] {\n                pointer-events: none;\n            }\n\n            .success[_ngcontent-%COMP%]   app-icon[root][_ngcontent-%COMP%] {\n                opacity: 0.2;\n            }\n\n            .state.success[_ngcontent-%COMP%] {\n                color: #388e3c;\n            }\n\n            .state.error[_ngcontent-%COMP%] {\n                color: #e53935;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFjdGlvbi1pY29uLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1lBQ1k7Z0JBQ0ksYUFBYTtZQUNqQjs7WUFFQTtnQkFDSSxvQkFBb0I7WUFDeEI7O1lBRUE7Z0JBQ0ksWUFBWTtZQUNoQjs7WUFFQTtnQkFDSSxjQUFjO1lBQ2xCOztZQUVBO2dCQUNJLGNBQWM7WUFDbEIiLCJmaWxlIjoiYWN0aW9uLWljb24uY29tcG9uZW50LnRzIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICAuYWN0aW9uLWljb24uZmFkZSA+IGFwcC1pY29uIHtcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLjM1O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAuc3VjY2VzcyB7XG4gICAgICAgICAgICAgICAgcG9pbnRlci1ldmVudHM6IG5vbmU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC5zdWNjZXNzIGFwcC1pY29uW3Jvb3RdIHtcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLjI7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC5zdGF0ZS5zdWNjZXNzIHtcbiAgICAgICAgICAgICAgICBjb2xvcjogIzM4OGUzYztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLnN0YXRlLmVycm9yIHtcbiAgICAgICAgICAgICAgICBjb2xvcjogI2U1MzkzNTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl19 */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvY29tcG9uZW50cy9zcmMvbGliL2FjdGlvbi1pY29uLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1lBQ1k7Z0JBQ0ksYUFBYTtZQUNqQjs7WUFFQTtnQkFDSSxvQkFBb0I7WUFDeEI7O1lBRUE7Z0JBQ0ksWUFBWTtZQUNoQjs7WUFFQTtnQkFDSSxjQUFjO1lBQ2xCOztZQUVBO2dCQUNJLGNBQWM7WUFDbEI7O0FBRVosdzdCQUF3N0IiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIC5hY3Rpb24taWNvbi5mYWRlID4gYXBwLWljb24ge1xuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDAuMzU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC5zdWNjZXNzIHtcbiAgICAgICAgICAgICAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLnN1Y2Nlc3MgYXBwLWljb25bcm9vdF0ge1xuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDAuMjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLnN0YXRlLnN1Y2Nlc3Mge1xuICAgICAgICAgICAgICAgIGNvbG9yOiAjMzg4ZTNjO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAuc3RhdGUuZXJyb3Ige1xuICAgICAgICAgICAgICAgIGNvbG9yOiAjZTUzOTM1O1xuICAgICAgICAgICAgfVxuICAgICAgICAiXSwic291cmNlUm9vdCI6IiJ9 */"]
  });
}

/***/ }),

/***/ 83070:
/*!**************************************************!*\
  !*** ./libs/components/src/lib/app.component.ts ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AppComponent: () => (/* binding */ AppComponent),
/* harmony export */   initSentry: () => (/* binding */ initSentry)
/* harmony export */ });
/* harmony import */ var _home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 89204);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! rxjs/operators */ 57871);
/* harmony import */ var _placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @placeos/ts-client */ 35713);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! date-fns */ 29533);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var libs_common_src_lib_mapspeople_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! libs/common/src/lib/mapspeople.service */ 99420);
/* harmony import */ var libs_organisation_src_lib_organisation_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! libs/organisation/src/lib/organisation.service */ 19863);
/* harmony import */ var libs_users_src_lib_user_utilities__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! libs/users/src/lib/user.utilities */ 24129);
/* harmony import */ var _sentry_angular__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @sentry/angular */ 41025);
/* harmony import */ var _sentry_angular__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @sentry/angular */ 48552);
/* harmony import */ var _placeos_mocks__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @placeos/mocks */ 46773);
/* harmony import */ var _placeos_cloud_uploads__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @placeos/cloud-uploads */ 51556);
/* harmony import */ var _placeos_svg_viewer__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @placeos/svg-viewer */ 50304);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_service_worker__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @angular/service-worker */ 46140);
/* harmony import */ var _angular_material_snack_bar__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! @angular/material/snack-bar */ 3347);
/* harmony import */ var _angular_cdk_clipboard__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! @angular/cdk/clipboard */ 52352);
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! @angular/router */ 95072);
/* harmony import */ var _ngx_translate_core__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! @ngx-translate/core */ 597);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _global_loading_component__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./global-loading.component */ 34921);
/* harmony import */ var _global_banner_component__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./global-banner.component */ 20785);
/* harmony import */ var _debug_console_component__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./debug-console.component */ 18482);
/* harmony import */ var _chat_chat_component__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./chat/chat.component */ 79496);































function AppComponent_global_chat_3_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelement"](0, "global-chat");
  }
}
function AppComponent_debug_console_5_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelement"](0, "debug-console");
  }
}
const START_QUERY = location.search;
function initSentry(dsn, sample_rate = 0.1) {
  if (!dsn) return;
  _sentry_angular__WEBPACK_IMPORTED_MODULE_14__.init({
    dsn,
    integrations: [_sentry_angular__WEBPACK_IMPORTED_MODULE_14__.browserTracingIntegration(), _sentry_angular__WEBPACK_IMPORTED_MODULE_15__.replayIntegration({
      maskAllText: false,
      blockAllMedia: false
    })],
    // Performance Monitoring
    tracesSampleRate: 1.0,
    //  Capture 100% of the transactions
    // Set 'tracePropagationTargets' to control for which URLs distributed tracing should be enabled
    tracePropagationTargets: ['localhost', /^https:\/\/[a-zA-Z0-9_\-]*\.[a-zA-Z0-9]*\/api/, /^https:\/\/[a-zA-Z0-9_\-]*\.placeos\.run*\/api/],
    // Session Replay
    replaysSessionSampleRate: sample_rate,
    // This sets the sample rate at 10%. You may want to change it to 100% while in development and then sample at a lower rate in production.
    replaysOnErrorSampleRate: 1.0 // If you're not already sampling the entire session, change the sample rate to 100% when sampling sessions where errors occur.
  });
}
window.global = window;
class AppComponent extends _placeos_common__WEBPACK_IMPORTED_MODULE_2__.AsyncHandler {
  get debug() {
    return window.debug && this._settings.get('app.allow_debugging') === true;
  }
  get has_chat() {
    return this._settings.get('app.chat.enabled');
  }
  constructor(_analytics, _settings, _org,
  // For init
  _cache, _snackbar, _hotkey, _clipboard, _route, _router, _maps, _translate) {
    super();
    this._analytics = _analytics;
    this._settings = _settings;
    this._org = _org;
    this._cache = _cache;
    this._snackbar = _snackbar;
    this._hotkey = _hotkey;
    this._clipboard = _clipboard;
    this._route = _route;
    this._router = _router;
    this._maps = _maps;
    this._translate = _translate;
  }
  ngOnInit() {
    var _this = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      (0,_placeos_common__WEBPACK_IMPORTED_MODULE_2__.log)('APP', 'MOCKS:', _placeos_mocks__WEBPACK_IMPORTED_MODULE_6__.MOCKS);
      _this._hotkey.listen(['Control', 'Alt', 'Shift', 'KeyM'], () => {
        localStorage.setItem('mock', `${localStorage.getItem('mock') !== 'true'}`);
        location.reload();
      });
      _this._hotkey.listen(['Control', 'Alt', 'Shift', 'KeyD'], () => {
        _this._settings.saveUserSetting('dark_mode', !_this._settings.get('dark_mode'));
        (0,_placeos_common__WEBPACK_IMPORTED_MODULE_2__.notifySuccess)('Toggled dark mode.');
      });
      _this._hotkey.listen(['Control', 'Alt', 'Shift', 'KeyC'], () => {
        _this._clipboard.copy(`${(0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.token)()}|${(0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.refreshToken)()}`);
        (0,_placeos_common__WEBPACK_IMPORTED_MODULE_2__.notifySuccess)('Successfully copied token.');
      });
      _this._hotkey.listen(['Control', 'Alt', 'Shift', 'KeyV'], () => {
        navigator.clipboard?.readText().then(tkn => _this._pasteToken(tkn));
      });
      window.pasteToken = t => _this._pasteToken(t);
      _this._route.queryParamMap.subscribe(params => {
        if (params.has('hide_nav')) localStorage.setItem('PlaceOS.hide_nav', 'true');
        if (params.has('lang')) {
          const locale = params.get('lang');
          _this._translate?.use(locale);
          localStorage.setItem('PLACEOS.locale', locale);
        }
        if (params.has('x-api-key')) {
          (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.setAPI_Key)(params.get('x-api-key'));
        }
      });
      (0,_placeos_common__WEBPACK_IMPORTED_MODULE_2__.setNotifyOutlet)(_this._snackbar);
      /** Wait for settings to initialise */
      yield _this._settings.initialised.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_16__.first)(_ => _)).toPromise();
      (0,_placeos_common__WEBPACK_IMPORTED_MODULE_2__.setAppName)(_this._settings.get('app.short_name'));
      const settings = _this._settings.get('composer') || {};
      settings.mock = !!_this._settings.get('mock') || location.origin.includes('demo.place.tech');
      /** Add query parameters if removed due to hash routing */
      if (START_QUERY) {
        const query = (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.convertPairStringToMap)(START_QUERY.substring(1));
        _this._router.navigate([], {
          relativeTo: _this._route,
          queryParams: query
        });
      }
      /** Wait for authentication details to load */
      yield (0,_placeos_common__WEBPACK_IMPORTED_MODULE_2__.setupPlace)(settings).catch(_ => console.error(_));
      yield _this._org.initialised.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_16__.first)(_ => _)).toPromise();
      (0,_placeos_common__WEBPACK_IMPORTED_MODULE_2__.setupCache)(_this._cache);
      if (!settings.local_login) {
        _this.timeout('wait_for_user', () => _this.onInitError(), 30 * 1000);
      }
      yield _placeos_common__WEBPACK_IMPORTED_MODULE_2__.current_user.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_16__.first)(_ => !!_)).toPromise();
      _this.clearTimeout('wait_for_user');
      _this._initLocale();
      (0,libs_users_src_lib_user_utilities__WEBPACK_IMPORTED_MODULE_5__.setInternalUserDomain)(_this._settings.get('app.general.internal_user_domain') || `@${(0,_placeos_common__WEBPACK_IMPORTED_MODULE_2__.currentUser)()?.email?.split('@')[1]}`);
      _this._initAnalytics();
      initSentry(_this._settings.get('app.sentry_dsn'));
      try {
        const tkn = (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.token)();
        if ((0,_placeos_common__WEBPACK_IMPORTED_MODULE_2__.isMobileSafari)()) {
          (0,_placeos_svg_viewer__WEBPACK_IMPORTED_MODULE_8__.setCustomHeaders)(tkn === 'x-api-key' ? {
            'x-api-key': (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.apiKey)()
          } : {
            Authorization: `Bearer ${tkn}`
          });
        }
        if (_this._settings.get('app.has_uploads')) {
          _this.timeout('init_uploads', () => {
            (0,_placeos_cloud_uploads__WEBPACK_IMPORTED_MODULE_7__.initialiseUploadService)({
              auto_start: true,
              token: (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.token)(),
              endpoint: '/api/engine/v2/uploads',
              worker_url: 'assets/md5_worker.js',
              providers: [_placeos_cloud_uploads__WEBPACK_IMPORTED_MODULE_7__.Amazon, _placeos_cloud_uploads__WEBPACK_IMPORTED_MODULE_7__.Azure, _placeos_cloud_uploads__WEBPACK_IMPORTED_MODULE_7__.Google, _placeos_cloud_uploads__WEBPACK_IMPORTED_MODULE_7__.OpenStack]
            });
          });
        }
        if ((0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.isFixedDevice)()) {
          _this.interval('auto-update-version', () => _this._checkReload(), 15 * 1000);
          yield (0,_placeos_common__WEBPACK_IMPORTED_MODULE_2__.requestScreenWakeLock)();
        }
      } catch {}
    })();
  }
  onInitError() {
    if ((0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.isMock)() || (0,_placeos_common__WEBPACK_IMPORTED_MODULE_2__.currentUser)()?.is_logged_in) return;
    (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.invalidateToken)();
    location.reload();
  }
  _initAnalytics() {
    const tracking_id = this._settings.get('app.analytics.tracking_id');
    if (!tracking_id) return;
    this._analytics.init(tracking_id);
    this._analytics.load(tracking_id);
    this._analytics.setUser((0,_placeos_common__WEBPACK_IMPORTED_MODULE_2__.currentUser)().id);
  }
  _initLocale() {
    try {
      let locale = localStorage.getItem('PLACEOS.locale');
      const locales = this._settings.get('app.locales') || [];
      this._translate?.addLangs(locales.map(_ => _.id));
      if (locale) {
        this._translate?.use(locale);
      } else {
        const list = navigator.languages;
        for (const lang of list) {
          locale = locales.find(_ => _.id === lang);
          if (!locale) locale = locales.find(_ => lang.includes(_.id));
          if (locale) {
            this._translate?.use(lang);
            localStorage.setItem('PLACEOS.locale', lang);
            break;
          }
        }
      }
    } catch {}
  }
  _pasteToken(tkn) {
    const parts = tkn.split('|');
    const id = (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.clientId)();
    localStorage.setItem(`${id}_access_token`, `${parts[0]}`);
    localStorage.setItem(`${id}_refresh_token`, `${parts[1]}`);
    localStorage.setItem(`${id}_expires_at`, `${(0,date_fns__WEBPACK_IMPORTED_MODULE_17__.addHours)(new Date(), 6).valueOf()}`);
    (0,_placeos_common__WEBPACK_IMPORTED_MODULE_2__.notifySuccess)('Successfully pasted token.');
    setTimeout(() => location.reload(), 2000);
  }
  _checkReload() {
    if (!(0,_placeos_common__WEBPACK_IMPORTED_MODULE_2__.hasNewVersion)()) return;
    location.reload();
    this.timeout('reload', () => location.href = `${location.origin}${location.pathname}`);
  }
  static #_ = this.ɵfac = function AppComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || AppComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵdirectiveInject"](_placeos_common__WEBPACK_IMPORTED_MODULE_2__.GoogleAnalyticsService), _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵdirectiveInject"](_placeos_common__WEBPACK_IMPORTED_MODULE_2__.SettingsService), _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵdirectiveInject"](libs_organisation_src_lib_organisation_service__WEBPACK_IMPORTED_MODULE_4__.OrganisationService), _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵdirectiveInject"](_angular_service_worker__WEBPACK_IMPORTED_MODULE_18__.SwUpdate), _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵdirectiveInject"](_angular_material_snack_bar__WEBPACK_IMPORTED_MODULE_19__.MatSnackBar), _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵdirectiveInject"](_placeos_common__WEBPACK_IMPORTED_MODULE_2__.HotkeysService), _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵdirectiveInject"](_angular_cdk_clipboard__WEBPACK_IMPORTED_MODULE_20__.Clipboard), _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵdirectiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_21__.ActivatedRoute), _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵdirectiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_21__.Router), _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵdirectiveInject"](libs_common_src_lib_mapspeople_service__WEBPACK_IMPORTED_MODULE_3__.MapsPeopleService), _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵdirectiveInject"](_ngx_translate_core__WEBPACK_IMPORTED_MODULE_22__.TranslateService, 8));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵdefineComponent"]({
    type: AppComponent,
    selectors: [["app-root"]],
    features: [_angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵInheritDefinitionFeature"]],
    decls: 6,
    vars: 2,
    consts: [[1, "flex-1", "w-full", "relative", "h-1/2"], [4, "ngIf"]],
    template: function AppComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelement"](0, "global-banner");
        _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelementStart"](1, "div", 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelement"](2, "router-outlet");
        _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵtemplate"](3, AppComponent_global_chat_3_Template, 1, 0, "global-chat", 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelement"](4, "global-loading");
        _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵtemplate"](5, AppComponent_debug_console_5_Template, 1, 0, "debug-console", 1);
      }
      if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵadvance"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵproperty"]("ngIf", ctx.has_chat);
        _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵproperty"]("ngIf", ctx.debug);
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_23__.NgIf, _angular_router__WEBPACK_IMPORTED_MODULE_21__.RouterOutlet, _global_loading_component__WEBPACK_IMPORTED_MODULE_9__.GlobalLoadingComponent, _global_banner_component__WEBPACK_IMPORTED_MODULE_10__.GlobalBannerComponent, _debug_console_component__WEBPACK_IMPORTED_MODULE_11__.DebugConsoleComponent, _chat_chat_component__WEBPACK_IMPORTED_MODULE_12__.ChatComponent],
    styles: ["[_nghost-%COMP%] {\n                display: flex;\n                flex-direction: column;\n                height: 100%;\n                width: 100%;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLGFBQWE7Z0JBQ2Isc0JBQXNCO2dCQUN0QixZQUFZO2dCQUNaLFdBQVc7WUFDZiIsImZpbGUiOiJhcHAuY29tcG9uZW50LnRzIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICA6aG9zdCB7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl19 */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvY29tcG9uZW50cy9zcmMvbGliL2FwcC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLGFBQWE7Z0JBQ2Isc0JBQXNCO2dCQUN0QixZQUFZO2dCQUNaLFdBQVc7WUFDZjs7QUFFWiw0Z0JBQTRnQiIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgOmhvc3Qge1xuICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICB9XG4gICAgICAgICJdLCJzb3VyY2VSb290IjoiIn0= */"]
  });
}

/***/ }),

/***/ 65843:
/*!*****************************************************************************!*\
  !*** ./libs/components/src/lib/attached-resource-config-modal.component.ts ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AttachedResourceConfigModalComponent: () => (/* binding */ AttachedResourceConfigModalComponent),
/* harmony export */   RULE_TYPES: () => (/* binding */ RULE_TYPES)
/* harmony export */ });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_material_dialog__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/material/dialog */ 12587);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/forms */ 34456);
/* harmony import */ var _angular_material_core__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @angular/material/core */ 74646);
/* harmony import */ var _angular_material_menu__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @angular/material/menu */ 31034);
/* harmony import */ var _angular_material_form_field__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @angular/material/form-field */ 24950);
/* harmony import */ var _angular_material_select__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @angular/material/select */ 25175);
/* harmony import */ var _angular_material_input__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @angular/material/input */ 95541);
/* harmony import */ var _angular_material_checkbox__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @angular/material/checkbox */ 97024);
/* harmony import */ var _icon_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./icon.component */ 69434);














function AttachedResourceConfigModalComponent_button_3_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](0, "button", 8)(1, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](2, "close");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]()();
  }
}
function AttachedResourceConfigModalComponent_div_5_Template(rf, ctx) {
  if (rf & 1) {
    const _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](0, "div", 9)(1, "mat-checkbox", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵlistener"]("ngModelChange", function AttachedResourceConfigModalComponent_div_5_Template_mat_checkbox_ngModelChange_1_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵrestoreView"](_r1);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵresetView"](ctx_r1.saveNotesSetting($event));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](2, " Require notes for orders ");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngModel", ctx_r1.require_notes);
  }
}
function AttachedResourceConfigModalComponent_div_8_div_30_mat_option_4_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](0, "mat-option", 28);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const type_r8 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("value", type_r8.id);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtextInterpolate1"](" ", type_r8.name, " ");
  }
}
function AttachedResourceConfigModalComponent_div_8_div_30_Template(rf, ctx) {
  if (rf & 1) {
    const _r6 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](0, "div", 22);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelement"](1, "div", 23);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](2, "mat-form-field", 13)(3, "mat-select", 24);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtwoWayListener"]("ngModelChange", function AttachedResourceConfigModalComponent_div_8_div_30_Template_mat_select_ngModelChange_3_listener($event) {
      const rule_r7 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵrestoreView"](_r6).$implicit;
      _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtwoWayBindingSet"](rule_r7[0], $event) || (rule_r7[0] = $event);
      return _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵresetView"]($event);
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](4, AttachedResourceConfigModalComponent_div_8_div_30_mat_option_4_Template, 2, 2, "mat-option", 25);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](5, "mat-form-field", 13)(6, "input", 26);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtwoWayListener"]("ngModelChange", function AttachedResourceConfigModalComponent_div_8_div_30_Template_input_ngModelChange_6_listener($event) {
      const rule_r7 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵrestoreView"](_r6).$implicit;
      _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtwoWayBindingSet"](rule_r7[1], $event) || (rule_r7[1] = $event);
      return _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵresetView"]($event);
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](7, "mat-error");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](8, "Rule value is required");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](9, "button", 27);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵlistener"]("click", function AttachedResourceConfigModalComponent_div_8_div_30_Template_button_click_9_listener() {
      const i_r9 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵrestoreView"](_r6).index;
      const set_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"]().$implicit;
      return _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵresetView"](set_r4.rules.splice(i_r9, 1));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](10, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](11, "delete");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]()()();
  }
  if (rf & 2) {
    const rule_r7 = ctx.$implicit;
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtwoWayProperty"]("ngModel", rule_r7[0]);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngForOf", ctx_r1.rule_types);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtwoWayProperty"]("ngModel", rule_r7[1]);
  }
}
function AttachedResourceConfigModalComponent_div_8_Template(rf, ctx) {
  if (rf & 1) {
    const _r3 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](0, "div", 11)(1, "div", 12)(2, "mat-form-field", 13)(3, "input", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtwoWayListener"]("ngModelChange", function AttachedResourceConfigModalComponent_div_8_Template_input_ngModelChange_3_listener($event) {
      const set_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵrestoreView"](_r3).$implicit;
      _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtwoWayBindingSet"](set_r4.name, $event) || (set_r4.name = $event);
      return _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵresetView"]($event);
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](4, "mat-error");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](5, "Ruleset name is required");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](6, "button", 15)(7, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](8, "more_vert");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](9, "mat-menu", null, 0)(11, "button", 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵlistener"]("click", function AttachedResourceConfigModalComponent_div_8_Template_button_click_11_listener() {
      const set_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵrestoreView"](_r3).$implicit;
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"]();
      set_r4.rules.push(["", ""]);
      return _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵresetView"](ctx_r1.show_rules = set_r4.id);
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](12, "div", 17)(13, "app-icon", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](14, "add");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](15, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](16, "Add Rule");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]()()();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](17, "button", 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵlistener"]("click", function AttachedResourceConfigModalComponent_div_8_Template_button_click_17_listener() {
      const set_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵrestoreView"](_r3).$implicit;
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵresetView"](ctx_r1.show_rules = ctx_r1.show_rules !== set_r4.id ? set_r4.id : "");
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](18, "div", 17)(19, "app-icon", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](20);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](21, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](22);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]()()();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](23, "button", 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵlistener"]("click", function AttachedResourceConfigModalComponent_div_8_Template_button_click_23_listener() {
      const i_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵrestoreView"](_r3).index;
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵresetView"](ctx_r1.rulesets.splice(i_r5, 1));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](24, "div", 19)(25, "app-icon", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](26, "delete");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](27, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](28, "Remove Ruleset");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]()()()()();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](29, "div", 20);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](30, AttachedResourceConfigModalComponent_div_8_div_30_Template, 12, 3, "div", 21);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const set_r4 = ctx.$implicit;
    const menu_r10 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵreference"](10);
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtwoWayProperty"]("ngModel", set_r4.name);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("matMenuTriggerFor", menu_r10);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](14);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtextInterpolate"](ctx_r1.show_rules === set_r4.id ? "expand_less" : "expand_more");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtextInterpolate1"](" ", ctx_r1.show_rules === set_r4.id ? "Hide" : "Show", " Rules ");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](7);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵstyleProp"]("height", (ctx_r1.show_rules === set_r4.id ? 4 * set_r4.rules.length : 0) + "em");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngForOf", set_r4.rules);
  }
}
const RULE_TYPES = [{
  id: 'after_hour',
  name: 'After Hour of Day'
}, {
  id: 'before_hour',
  name: 'Before Hour of Day'
}, {
  id: 'min_length',
  name: 'Min. Meeting Length'
}, {
  id: 'max_length',
  name: 'Max. Meeting Length'
}, {
  id: 'is_before',
  name: 'Is Hours before Meeting'
}, {
  id: 'within_hours',
  name: 'Within Hours before Meeting'
}, {
  id: 'visitor_type',
  name: 'Visitor Type'
}, {
  id: 'groups',
  name: 'User in Groups'
}];
class AttachedResourceConfigModalComponent extends _placeos_common__WEBPACK_IMPORTED_MODULE_0__.AsyncHandler {
  get new_id() {
    return 'ruleset-' + Math.floor(Math.random() * 9999_9999);
  }
  get can_save_notes() {
    return !!this._data.saveNotes;
  }
  constructor(_data) {
    super();
    this._data = _data;
    /** Emitter for events on the modal */
    this.event = new _angular_core__WEBPACK_IMPORTED_MODULE_2__.EventEmitter();
    /** Whether changes are being saved */
    this.loading = false;
    this.require_notes = this._data.require_notes;
    this.resource_name = this._data.resource_name || 'Catering';
    this.rule_types = RULE_TYPES;
    this.rulesets = (_data.config || []).map(set => {
      set.rules = set.rules.map(i => [i[0], JSON.stringify(i[1])]);
      return set;
    });
  }
  saveNotesSetting(value) {
    this.timeout('save-notes', () => this._data.saveNotes ? this._data.saveNotes(value) : '', 1000);
  }
  saveChanges() {
    this.loading = true;
    const rulesets = this.rulesets.map(set => {
      return {
        ...set,
        rules: set.rules.map(i => {
          let value = i[1];
          try {
            value = JSON.parse(i[1]);
          } catch (e) {}
          return [i[0], value];
        })
      };
    });
    this.event.emit({
      reason: 'done',
      metadata: rulesets
    });
  }
  static #_ = this.ɵfac = function AttachedResourceConfigModalComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || AttachedResourceConfigModalComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdirectiveInject"](_angular_material_dialog__WEBPACK_IMPORTED_MODULE_3__.MAT_DIALOG_DATA));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdefineComponent"]({
    type: AttachedResourceConfigModalComponent,
    selectors: [["attached-resource-config-modal"]],
    outputs: {
      event: "event"
    },
    features: [_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵInheritDefinitionFeature"]],
    decls: 12,
    vars: 4,
    consts: [["menu", "matMenu"], ["icon", "", "mat-dialog-close", "", 4, "ngIf"], [1, "overflow-auto", "text-center", "max-w-lg", "min-w-[32rem]", "px-4", "pt-2", "pb-4", "space-y-2"], ["class", "text-left p-2 rounded bg-base-200", 4, "ngIf"], ["btn", "", "matRipple", "", 1, "w-full", 3, "click"], ["class", "ruleset mb-2", 4, "ngFor", "ngForOf"], [1, "flex", "py-2", "px-4", "items-center", "justify-end", "border-t", "border-solid", "border-base-200"], ["btn", "", "matRipple", "", 1, "w-36", 3, "click"], ["icon", "", "mat-dialog-close", ""], [1, "text-left", "p-2", "rounded", "bg-base-200"], [3, "ngModelChange", "ngModel"], [1, "ruleset", "mb-2"], [1, "flex", "items-center", "mb-2", "space-x-2"], ["appearance", "outline", 1, "flex-1", "no-subscript"], ["matInput", "", "name", "name", "placeholder", "Zone ID, Category or Tag", "required", "", 3, "ngModelChange", "ngModel"], ["icon", "", "matRipple", "", 3, "matMenuTriggerFor"], ["mat-menu-item", "", 3, "click"], [1, "flex", "items-center", "space-x-2"], [1, "text-2xl"], [1, "flex", "items-center", "space-x-2", "text-error"], ["name", "rules", 1, "overflow-hidden"], ["class", "flex items-center pl-7 h-16 space-x-2 relative", 4, "ngFor", "ngForOf"], [1, "flex", "items-center", "pl-7", "h-16", "space-x-2", "relative"], [1, "absolute", "left-3", "top-1/2", "-translate-y-full", "w-4", "h-32", "border-b-2", "border-l-2", "border-base-200"], ["name", "booking-type", "placeholder", "Select Rule", 3, "ngModelChange", "ngModel"], [3, "value", 4, "ngFor", "ngForOf"], ["matInput", "", "name", "value", "placeholder", "Rule value", "required", "", 3, "ngModelChange", "ngModel"], ["icon", "", "matRipple", "", 3, "click"], [3, "value"]],
    template: function AttachedResourceConfigModalComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](0, "header")(1, "h3");
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](3, AttachedResourceConfigModalComponent_button_3_Template, 3, 0, "button", 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](4, "main", 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](5, AttachedResourceConfigModalComponent_div_5_Template, 3, 1, "div", 3);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](6, "button", 4);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵlistener"]("click", function AttachedResourceConfigModalComponent_Template_button_click_6_listener() {
          return ctx.rulesets.push({
            id: ctx.new_id,
            rules: []
          });
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](7, " New Ruleset ");
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](8, AttachedResourceConfigModalComponent_div_8_Template, 31, 7, "div", 5);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](9, "footer", 6)(10, "button", 7);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵlistener"]("click", function AttachedResourceConfigModalComponent_Template_button_click_10_listener() {
          return ctx.saveChanges();
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](11, " Save Changes ");
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]()();
      }
      if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtextInterpolate1"]("Edit ", ctx.resource_name, " Configuration");
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngIf", !ctx.loading);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngIf", ctx.can_save_notes);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngForOf", ctx.rulesets);
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_4__.NgForOf, _angular_common__WEBPACK_IMPORTED_MODULE_4__.NgIf, _angular_forms__WEBPACK_IMPORTED_MODULE_5__.DefaultValueAccessor, _angular_forms__WEBPACK_IMPORTED_MODULE_5__.NgControlStatus, _angular_forms__WEBPACK_IMPORTED_MODULE_5__.RequiredValidator, _angular_forms__WEBPACK_IMPORTED_MODULE_5__.NgModel, _angular_material_core__WEBPACK_IMPORTED_MODULE_6__.MatOption, _angular_material_menu__WEBPACK_IMPORTED_MODULE_7__.MatMenu, _angular_material_menu__WEBPACK_IMPORTED_MODULE_7__.MatMenuItem, _angular_material_menu__WEBPACK_IMPORTED_MODULE_7__.MatMenuTrigger, _angular_material_form_field__WEBPACK_IMPORTED_MODULE_8__.MatFormField, _angular_material_form_field__WEBPACK_IMPORTED_MODULE_8__.MatError, _angular_material_select__WEBPACK_IMPORTED_MODULE_9__.MatSelect, _angular_material_core__WEBPACK_IMPORTED_MODULE_6__.MatRipple, _angular_material_dialog__WEBPACK_IMPORTED_MODULE_3__.MatDialogClose, _angular_material_input__WEBPACK_IMPORTED_MODULE_10__.MatInput, _angular_material_checkbox__WEBPACK_IMPORTED_MODULE_11__.MatCheckbox, _icon_component__WEBPACK_IMPORTED_MODULE_1__.IconComponent],
    styles: ["[name='rules'][_ngcontent-%COMP%] {\n                transition: height 200ms;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF0dGFjaGVkLXJlc291cmNlLWNvbmZpZy1tb2RhbC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLHdCQUF3QjtZQUM1QiIsImZpbGUiOiJhdHRhY2hlZC1yZXNvdXJjZS1jb25maWctbW9kYWwuY29tcG9uZW50LnRzIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICBbbmFtZT0ncnVsZXMnXSB7XG4gICAgICAgICAgICAgICAgdHJhbnNpdGlvbjogaGVpZ2h0IDIwMG1zO1xuICAgICAgICAgICAgfVxuICAgICAgICAiXX0= */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvY29tcG9uZW50cy9zcmMvbGliL2F0dGFjaGVkLXJlc291cmNlLWNvbmZpZy1tb2RhbC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLHdCQUF3QjtZQUM1Qjs7QUFFWiw0YkFBNGIiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIFtuYW1lPSdydWxlcyddIHtcbiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uOiBoZWlnaHQgMjAwbXM7XG4gICAgICAgICAgICB9XG4gICAgICAgICJdLCJzb3VyY2VSb290IjoiIn0= */"]
  });
}

/***/ }),

/***/ 93208:
/*!******************************************************************!*\
  !*** ./libs/components/src/lib/authenticated-image.directive.ts ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AuthenticatedImageDirective: () => (/* binding */ AuthenticatedImageDirective)
/* harmony export */ });
/* harmony import */ var _home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 89204);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var _placeos_ts_client__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @placeos/ts-client */ 35713);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/core */ 37580);





const IMAGE_STORE = new Map();
class AuthenticatedImageDirective extends _placeos_common__WEBPACK_IMPORTED_MODULE_1__.AsyncHandler {
  constructor(_image_el) {
    super();
    this._image_el = _image_el;
  }
  ngOnChanges(changes) {
    if (changes.source && this.source) this._loadImage();
  }
  _loadImage() {
    var _this = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      if (!_this._image_el || !(0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_2__.authority)()) {
        return _this.timeout('load', () => _this._loadImage(), 300);
      }
      // If not an API call, just load the image
      if (!_this.source.includes('/api/engine/v2/uploads')) {
        _this._image_el.nativeElement.src = _this.source;
        return;
      }
      // If image has already been loaded, just use the cached version
      if (IMAGE_STORE.has(_this.source)) {
        _this._image_el.nativeElement.src = IMAGE_STORE.get(_this.source);
        return;
      }
      const tkn = (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_2__.token)();
      document.cookie = `${tkn === 'x-api-key' ? 'api-key=' + encodeURIComponent((0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_2__.apiKey)()) : 'bearer_token=' + encodeURIComponent(tkn)};max-age=30;path=/api/engine/v2/uploads;samesite=strict;${location.protocol === 'https:' ? 'secure;' : ''}`;
      let response = null;
      try {
        response = yield fetch(_this.source).catch(_ => null);
      } catch {}
      if (!response || !response.ok) {
        console.info('Failed to load image:', _this.source);
        return;
      }
      const blob = yield response.blob();
      const url = URL.createObjectURL(blob);
      IMAGE_STORE.set(_this.source, url);
      _this._image_el.nativeElement.src = url;
    })();
  }
  static #_ = this.ɵfac = function AuthenticatedImageDirective_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || AuthenticatedImageDirective)(_angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_3__.ElementRef));
  };
  static #_2 = this.ɵdir = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵdefineDirective"]({
    type: AuthenticatedImageDirective,
    selectors: [["img", "auth", ""], ["video", "auth", ""]],
    inputs: {
      source: "source"
    },
    features: [_angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵInheritDefinitionFeature"], _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵNgOnChangesFeature"]]
  });
}

/***/ }),

/***/ 7345:
/*!***********************************************************!*\
  !*** ./libs/components/src/lib/authorised-admin.guard.ts ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AuthorisedAdminGuard: () => (/* binding */ AuthorisedAdminGuard)
/* harmony export */ });
/* harmony import */ var _home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 89204);
/* harmony import */ var _placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @placeos/ts-client */ 35713);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! rxjs/operators */ 57871);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/router */ 95072);







class AuthorisedAdminGuard {
  constructor(_router) {
    this._router = _router;
  }
  canActivate(next, state) {
    var _this = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      return _this.checkUser();
    })();
  }
  canLoad(route, segments) {
    var _this2 = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      return _this2.checkUser();
    })();
  }
  checkUser() {
    var _this3 = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      yield (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.onlineState)().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.first)(_ => _)).toPromise();
      const user = yield _placeos_common__WEBPACK_IMPORTED_MODULE_2__.current_user.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.first)(_ => !!_)).toPromise();
      const can_activate = user && user.groups.includes('placeos_admin');
      if (!can_activate) {
        _this3._router.navigate(['/unauthorised']);
      }
      return can_activate;
    })();
  }
  static #_ = this.ɵfac = function AuthorisedAdminGuard_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || AuthorisedAdminGuard)(_angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵinject"](_angular_router__WEBPACK_IMPORTED_MODULE_5__.Router));
  };
  static #_2 = this.ɵprov = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵdefineInjectable"]({
    token: AuthorisedAdminGuard,
    factory: AuthorisedAdminGuard.ɵfac,
    providedIn: 'root'
  });
}

/***/ }),

/***/ 1645:
/*!**********************************************************!*\
  !*** ./libs/components/src/lib/authorised-user.guard.ts ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AuthorisedUserGuard: () => (/* binding */ AuthorisedUserGuard),
/* harmony export */   PLACEOS_APP_ACCESS: () => (/* binding */ PLACEOS_APP_ACCESS)
/* harmony export */ });
/* harmony import */ var _home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 89204);
/* harmony import */ var _placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @placeos/ts-client */ 35713);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! rxjs/operators */ 57871);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! rxjs */ 68824);
/* harmony import */ var libs_common_src_lib_settings_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! libs/common/src/lib/settings.service */ 14233);
/* harmony import */ var libs_organisation_src_lib_organisation_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! libs/organisation/src/lib/organisation.service */ 19863);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @angular/router */ 95072);












class PLACEOS_APP_ACCESS {}
class AuthorisedUserGuard {
  constructor(_router, _settings, _org, _access) {
    this._router = _router;
    this._settings = _settings;
    this._org = _org;
    this._access = _access;
  }
  canActivate(next, state) {
    var _this = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      return _this.checkUser();
    })();
  }
  canLoad(route, segments) {
    var _this2 = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      return _this2.checkUser();
    })();
  }
  checkUser() {
    var _this3 = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      yield (0,rxjs__WEBPACK_IMPORTED_MODULE_5__.combineLatest)([(0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.onlineState)(), _this3._org.initialised]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.first)(([online, org_init]) => online && org_init)).toPromise();
      const user = yield _placeos_common__WEBPACK_IMPORTED_MODULE_2__.current_user.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.first)(_ => !!_)).toPromise();
      const groups = _this3._access?.group ? [_this3._access.group] : _this3._settings.get('app.allow_access_groups') || [];
      const can_activate = !!(user && (!groups.length || groups.find(_ => user.groups.includes(_))));
      if (!can_activate) {
        _this3._router.navigate(['/unauthorised']);
      }
      return !!can_activate;
    })();
  }
  static #_ = this.ɵfac = function AuthorisedUserGuard_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || AuthorisedUserGuard)(_angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵinject"](_angular_router__WEBPACK_IMPORTED_MODULE_8__.Router), _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵinject"](libs_common_src_lib_settings_service__WEBPACK_IMPORTED_MODULE_3__.SettingsService), _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵinject"](libs_organisation_src_lib_organisation_service__WEBPACK_IMPORTED_MODULE_4__.OrganisationService), _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵinject"](PLACEOS_APP_ACCESS, 8));
  };
  static #_2 = this.ɵprov = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵdefineInjectable"]({
    token: AuthorisedUserGuard,
    factory: AuthorisedUserGuard.ɵfac,
    providedIn: 'root'
  });
}

/***/ }),

/***/ 10375:
/*!**************************************************************************!*\
  !*** ./libs/components/src/lib/available-rooms-state-modal.component.ts ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AvailableRoomsStateModalComponent: () => (/* binding */ AvailableRoomsStateModalComponent)
/* harmony export */ });
/* harmony import */ var _home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 89204);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var _placeos_organisation__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @placeos/organisation */ 2510);
/* harmony import */ var libs_spaces_src_lib_space_utilities__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! libs/spaces/src/lib/space.utilities */ 28363);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! rxjs/operators */ 33602);
/* harmony import */ var _angular_material_dialog__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @angular/material/dialog */ 12587);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _angular_material_core__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @angular/material/core */ 74646);
/* harmony import */ var _angular_material_progress_spinner__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @angular/material/progress-spinner */ 41134);
/* harmony import */ var _angular_material_checkbox__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @angular/material/checkbox */ 97024);
/* harmony import */ var _icon_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./icon.component */ 69434);















function AvailableRoomsStateModalComponent_main_7_tr_13_Template(rf, ctx) {
  if (rf & 1) {
    const _r4 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "tr", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("click", function AvailableRoomsStateModalComponent_main_7_tr_13_Template_tr_click_0_listener() {
      const space_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵrestoreView"](_r4).$implicit;
      const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"](2);
      return _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵresetView"](ctx_r2.toggleRoom(space_r5.id));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](1, "td");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelement"](2, "mat-checkbox", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](3, "td");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](5, "td", 16)(6, "div", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](7);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]()()();
  }
  if (rf & 2) {
    const space_r5 = ctx.$implicit;
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("checked", ctx_r2.selected.includes(space_r5.id));
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtextInterpolate"](space_r5.display_name || space_r5.name);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵclassProp"]("bg-success", !(ctx_r2.disabled_rooms == null ? null : ctx_r2.disabled_rooms.includes(space_r5.id)))("bg-error", ctx_r2.disabled_rooms == null ? null : ctx_r2.disabled_rooms.includes(space_r5.id));
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtextInterpolate1"](" ", !(ctx_r2.disabled_rooms == null ? null : ctx_r2.disabled_rooms.includes(space_r5.id)) ? "Enabled" : "Disabled", " ");
  }
}
function AvailableRoomsStateModalComponent_main_7_Template(rf, ctx) {
  if (rf & 1) {
    const _r2 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "main", 7)(1, "table", 8)(2, "thead", 9)(3, "tr")(4, "td", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("click", function AvailableRoomsStateModalComponent_main_7_Template_td_click_4_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵrestoreView"](_r2);
      const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵresetView"](ctx_r2.toggleRoom("*"));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelement"](5, "mat-checkbox", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipe"](6, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipe"](7, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelement"](8, "td");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](9, "td", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](10);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipe"](11, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]()()();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](12, "tbody");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](13, AvailableRoomsStateModalComponent_main_7_tr_13_Template, 8, 7, "tr", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipe"](14, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]()()();
  }
  if (rf & 2) {
    let tmp_2_0;
    let tmp_3_0;
    let tmp_4_0;
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("checked", ((tmp_2_0 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipeBind1"](6, 4, ctx_r2.rooms)) == null ? null : tmp_2_0.length) === ctx_r2.selected.length)("indeterminate", ctx_r2.selected.length > 0 && ((tmp_3_0 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipeBind1"](7, 6, ctx_r2.rooms)) == null ? null : tmp_3_0.length) !== ctx_r2.selected.length);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtextInterpolate1"](" ", (tmp_4_0 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipeBind1"](11, 8, ctx_r2.rooms)) == null ? null : tmp_4_0.length, " Room(s) ");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngForOf", _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipeBind1"](14, 10, ctx_r2.rooms));
  }
}
function AvailableRoomsStateModalComponent_ng_template_13_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "main", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelement"](1, "mat-spinner", 19);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](2, "p");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](3, "Saving disabled room list...");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]()();
  }
}
class AvailableRoomsStateModalComponent {
  constructor(_data, _org) {
    this._data = _data;
    this._org = _org;
    this.change = new _angular_core__WEBPACK_IMPORTED_MODULE_5__.EventEmitter();
    this.loading = false;
    this.selected = [];
    this.rooms = (0,libs_spaces_src_lib_space_utilities__WEBPACK_IMPORTED_MODULE_3__.requestSpacesForZone)(this._org.building.id);
    this.type = this._data.type;
    this.disabled_rooms = this._data.disabled_rooms;
  }
  toggleRoom(id) {
    var _this = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      if (id === '*') {
        const rooms = yield _this.rooms.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.take)(1)).toPromise();
        if (_this.selected.length !== rooms.length) _this.selected = rooms.map(_ => _.id);else _this.selected = [];
      } else {
        if (_this.selected.includes(id)) _this.selected = _this.selected.filter(_ => _ !== id);else _this.selected = [..._this.selected, id];
      }
    })();
  }
  enableSelected() {
    var _this2 = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      _this2.loading = true;
      const disabled_list = _this2.disabled_rooms;
      const list = disabled_list.filter(_ => !_this2.selected.includes(_));
      _this2.disabled_rooms = list;
      _this2.change.next(list);
    })();
  }
  disableSelected() {
    var _this3 = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      _this3.loading = true;
      const disabled_list = _this3.disabled_rooms;
      const list = (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.unique)(disabled_list.concat(_this3.selected));
      _this3.disabled_rooms = list;
      _this3.change.next(list);
    })();
  }
  static #_ = this.ɵfac = function AvailableRoomsStateModalComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || AvailableRoomsStateModalComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵdirectiveInject"](_angular_material_dialog__WEBPACK_IMPORTED_MODULE_7__.MAT_DIALOG_DATA), _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵdirectiveInject"](_placeos_organisation__WEBPACK_IMPORTED_MODULE_2__.OrganisationService));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵdefineComponent"]({
    type: AvailableRoomsStateModalComponent,
    selectors: [["catering-rooms-state-modal"]],
    outputs: {
      change: "change"
    },
    decls: 15,
    vars: 3,
    consts: [["load_state", ""], [1, "flex", "items-center", "justify-between", "p-2"], [1, "p-2"], ["icon", "", "mat-dialog-close", ""], ["class", "max-h-[65vh] overflow-auto", 4, "ngIf", "ngIfElse"], [1, "flex", "items-center", "p-2", "justify-end", "space-x-2", "border-t", "border-base-200"], ["btn", "", "matRipple", "", 3, "click"], [1, "max-h-[65vh]", "overflow-auto"], [1, "min-w-[32rem]"], [1, "border-b", "border-base-200"], [1, "w-12", 3, "click"], [1, "pointer-events-none", 3, "checked", "indeterminate"], [1, "text-right", "text-xs"], ["class", "hover:bg-neutral:bg-base-100/5", 3, "click", 4, "ngFor", "ngForOf"], [1, "hover:bg-neutral:bg-base-100/5", 3, "click"], [1, "pointer-events-none", 3, "checked"], [1, "text-center"], [1, "ml-auto", "px-3", "py-1", "rounded-2xl", "text-white", "w-24"], [1, "w-64", "h-48", "p-8", "flex", "flex-col", "items-center", "justify-center", "space-y-2"], ["diameter", "32"]],
    template: function AvailableRoomsStateModalComponent_Template(rf, ctx) {
      if (rf & 1) {
        const _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵgetCurrentView"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "div")(1, "header", 1)(2, "h3", 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](4, "button", 3)(5, "app-icon");
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](6, "close");
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]()()();
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](7, AvailableRoomsStateModalComponent_main_7_Template, 15, 12, "main", 4);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](8, "footer", 5)(9, "button", 6);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("click", function AvailableRoomsStateModalComponent_Template_button_click_9_listener() {
          _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵrestoreView"](_r1);
          return _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵresetView"](ctx.enableSelected());
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](10, " Enable Selected ");
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](11, "button", 6);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("click", function AvailableRoomsStateModalComponent_Template_button_click_11_listener() {
          _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵrestoreView"](_r1);
          return _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵresetView"](ctx.disableSelected());
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](12, " Disable Selected ");
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]()()();
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](13, AvailableRoomsStateModalComponent_ng_template_13_Template, 4, 0, "ng-template", null, 0, _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplateRefExtractor"]);
      }
      if (rf & 2) {
        const load_state_r6 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵreference"](14);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtextInterpolate1"]("Set ", ctx.type, " Availability for Rooms");
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](4);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngIf", !ctx.loading)("ngIfElse", load_state_r6);
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_8__.NgForOf, _angular_common__WEBPACK_IMPORTED_MODULE_8__.NgIf, _angular_material_core__WEBPACK_IMPORTED_MODULE_9__.MatRipple, _angular_material_dialog__WEBPACK_IMPORTED_MODULE_7__.MatDialogClose, _angular_material_progress_spinner__WEBPACK_IMPORTED_MODULE_10__.MatProgressSpinner, _angular_material_checkbox__WEBPACK_IMPORTED_MODULE_11__.MatCheckbox, _icon_component__WEBPACK_IMPORTED_MODULE_4__.IconComponent, _angular_common__WEBPACK_IMPORTED_MODULE_8__.AsyncPipe],
    styles: ["td[_ngcontent-%COMP%] {\n                padding: 0.5rem;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF2YWlsYWJsZS1yb29tcy1zdGF0ZS1tb2RhbC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLGVBQWU7WUFDbkIiLCJmaWxlIjoiYXZhaWxhYmxlLXJvb21zLXN0YXRlLW1vZGFsLmNvbXBvbmVudC50cyIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgdGQge1xuICAgICAgICAgICAgICAgIHBhZGRpbmc6IDAuNXJlbTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl19 */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvY29tcG9uZW50cy9zcmMvbGliL2F2YWlsYWJsZS1yb29tcy1zdGF0ZS1tb2RhbC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLGVBQWU7WUFDbkI7O0FBRVosb1pBQW9aIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICB0ZCB7XG4gICAgICAgICAgICAgICAgcGFkZGluZzogMC41cmVtO1xuICAgICAgICAgICAgfVxuICAgICAgICAiXSwic291cmNlUm9vdCI6IiJ9 */"]
  });
}

/***/ }),

/***/ 83938:
/*!******************************************************!*\
  !*** ./libs/components/src/lib/binding.directive.ts ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   BindingDirective: () => (/* binding */ BindingDirective)
/* harmony export */ });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _placeos_ts_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/ts-client */ 35713);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! rxjs/operators */ 57871);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! rxjs/operators */ 8627);





class BindingDirective extends _placeos_common__WEBPACK_IMPORTED_MODULE_1__.AsyncHandler {
  constructor(_element, _renderer) {
    super();
    this._element = _element;
    this._renderer = _renderer;
    /** ID of the system to bind */
    this.sys = '';
    /** Class name of the module to bind */
    this.mod = '';
    /** Index of the system to bind */
    this.index = 1;
    /** Status variable to bind to */
    this.bind = '';
    /** Method to execute */
    this.exec = '';
    /** Method to execute */
    this.delay = 100;
    /** Event to listen for on the parent */
    this.on_event = '';
    /** ID of the system to bind to */
    this.params = null;
    this.ignore = false;
    /** Current value of the binding */
    this.model = null;
    /** Emitter for changes to the value of the binding */
    this.modelChange = new _angular_core__WEBPACK_IMPORTED_MODULE_2__.EventEmitter();
    this._binding = false;
    this._old_model = null;
  }
  ngOnInit() {
    (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_0__.onlineState)()?.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.first)(_ => _)).subscribe(_ => this.bindVariable());
  }
  ngOnChanges(changes) {
    if (changes.sys || changes.mod || changes.bind) {
      this.bindVariable();
    }
    if (changes.model && this._old_model !== this.model && this.model != null) {
      this._old_model = this.model;
      this.execute();
    }
    if (changes.on_event && this.on_event) {
      this.subscription('on_event', this._renderer.listen(this._element.nativeElement, this.on_event, () => this.execute()));
    }
  }
  /** Bind to set status variable */
  bindVariable() {
    if ((0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_0__.authority)() && this.bind && this.sys && this.mod && !this._binding) {
      this.timeout('bind', () => {
        const module = (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_0__.getModule)(this.sys, this.mod, this.index);
        const binding = module.binding(this.bind);
        this._binding = true;
        this.subscription('binding', binding.bind());
        this.subscription('on_changes', binding.listen().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.filter)(_ => _ != null)).subscribe(value => {
          setTimeout(() => {
            this._binding = false;
            this.clearTimeout('bound');
            if (this.ignore) return;
            this.model = value;
            this._old_model = this.model;
            this.modelChange.emit(this.model);
          }, 10);
        }));
        this.timeout('bound', () => this._binding = false, 200);
      }, 20);
    }
  }
  /** Excute the set method on the module */
  execute() {
    if ((0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_0__.authority)() && this.exec && this.sys && this.mod && !this._timers['execute']) {
      this.timeout('execute', () => {
        const module = (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_0__.getModule)(this.sys, this.mod, this.index);
        let params = this.params;
        if (this.bind) params = this.params || [this.model];
        module.execute(this.exec, params || []).then(result => {
          // Emit exec result if not bound to status variable
          if (!this.bind) {
            this.model = result;
            this._old_model = this.model;
            this.modelChange.emit(this.model);
          }
        });
      }, this.delay);
    }
  }
  static #_ = this.ɵfac = function BindingDirective_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || BindingDirective)(_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_2__.ElementRef), _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_2__.Renderer2));
  };
  static #_2 = this.ɵdir = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdefineDirective"]({
    type: BindingDirective,
    selectors: [["i", "bind", ""], ["", "binding", ""], ["co-bind"]],
    inputs: {
      sys: "sys",
      mod: "mod",
      index: "index",
      bind: "bind",
      exec: "exec",
      delay: "delay",
      on_event: [0, "onEvent", "on_event"],
      params: "params",
      ignore: "ignore",
      model: "model"
    },
    outputs: {
      modelChange: "modelChange"
    },
    features: [_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵInheritDefinitionFeature"], _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵNgOnChangesFeature"]]
  });
}

/***/ }),

/***/ 55550:
/*!**************************************************************!*\
  !*** ./libs/components/src/lib/building-select.component.ts ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   BuildingSelectComponent: () => (/* binding */ BuildingSelectComponent)
/* harmony export */ });
/* harmony import */ var _placeos_components__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/components */ 51588);
/* harmony import */ var _placeos_organisation__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @placeos/organisation */ 2510);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/forms */ 34456);
/* harmony import */ var _angular_material_radio__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @angular/material/radio */ 53804);
/* harmony import */ var _icon_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./icon.component */ 69434);








function BuildingSelectComponent_mat_radio_button_12_Template(rf, ctx) {
  if (rf & 1) {
    const _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "mat-radio-button", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵlistener"]("click", function BuildingSelectComponent_mat_radio_button_12_Template_mat_radio_button_click_0_listener() {
      const bld_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵrestoreView"](_r1).$implicit;
      const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵresetView"](ctx_r2.setBuilding(bld_r2));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const bld_r2 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("value", bld_r2.id);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtextInterpolate1"](" ", bld_r2.display_name || bld_r2.name, " ");
  }
}
class BuildingSelectComponent {
  constructor(_data, _org) {
    this._data = _data;
    this._org = _org;
    this.buildings = this._org.active_buildings;
    this.building = this._org.active_building;
    this.setBuilding = b => {
      this._org.building = b;
      this._org.saveBuilding(b.id);
      this._data?.close();
    };
    this.close = () => this._data?.close();
  }
  static #_ = this.ɵfac = function BuildingSelectComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || BuildingSelectComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵdirectiveInject"](_placeos_components__WEBPACK_IMPORTED_MODULE_0__.CustomTooltipData), _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵdirectiveInject"](_placeos_organisation__WEBPACK_IMPORTED_MODULE_1__.OrganisationService));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵdefineComponent"]({
    type: BuildingSelectComponent,
    selectors: [["building-select"]],
    decls: 14,
    vars: 11,
    consts: () => {
      let i18n_0;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_4543839253815117286$$LIBS_COMPONENTS_SRC_LIB_BUILDING_SELECT_COMPONENT_TS_0 = goog.getMsg(" Select a building location ");
        i18n_0 = MSG_EXTERNAL_4543839253815117286$$LIBS_COMPONENTS_SRC_LIB_BUILDING_SELECT_COMPONENT_TS_0;
      } else {
        i18n_0 = $localize`:␟f6bc545a20f571c426f74d4d3522b71334f2b845␟4543839253815117286: Select a building location `;
      }
      return [i18n_0, [1, "flex", "flex-col", "w-[18.5rem]", "rounded", "bg-base-100", "shadow", "p-2", "relative", "-top-12", "-right-1", "overflow-auto", "max-h-[65vh]", 3, "click"], [1, "flex", "items-center", "space-x-2"], [1, "text-2xl"], [1, ""], [1, "text-xs", "opacity-60", "mb-4", "px-2"], [1, "flex", "flex-col", "space-y-2", "px-2", 3, "ngModel"], [3, "value", "click", 4, "ngFor", "ngForOf"], [3, "click", "value"]];
    },
    template: function BuildingSelectComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "div", 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵlistener"]("click", function BuildingSelectComponent_Template_div_click_0_listener() {
          return ctx.close();
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](1, "div", 2)(2, "app-icon", 3);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](3, "arrow_back");
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](4, "div", 4);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](5);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipe"](6, "async");
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipe"](7, "async");
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](8, "div", 5);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵi18n"](9, 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](10, "mat-radio-group", 6);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipe"](11, "async");
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](12, BuildingSelectComponent_mat_radio_button_12_Template, 2, 2, "mat-radio-button", 7);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipe"](13, "async");
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()();
      }
      if (rf & 2) {
        let tmp_0_0;
        let tmp_1_0;
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](5);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtextInterpolate1"](" ", ((tmp_0_0 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipeBind1"](6, 3, ctx.building)) == null ? null : tmp_0_0.display_name) || ((tmp_0_0 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipeBind1"](7, 5, ctx.building)) == null ? null : tmp_0_0.name), " ");
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](5);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngModel", (tmp_1_0 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipeBind1"](11, 7, ctx.building)) == null ? null : tmp_1_0.id);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngForOf", _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipeBind1"](13, 9, ctx.buildings));
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_4__.NgForOf, _angular_forms__WEBPACK_IMPORTED_MODULE_5__.NgControlStatus, _angular_forms__WEBPACK_IMPORTED_MODULE_5__.NgModel, _angular_material_radio__WEBPACK_IMPORTED_MODULE_6__.MatRadioGroup, _angular_material_radio__WEBPACK_IMPORTED_MODULE_6__.MatRadioButton, _icon_component__WEBPACK_IMPORTED_MODULE_2__.IconComponent, _angular_common__WEBPACK_IMPORTED_MODULE_4__.AsyncPipe]
  });
}

/***/ }),

/***/ 56062:
/*!**************************************************!*\
  !*** ./libs/components/src/lib/building.pipe.ts ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   BuildingPipe: () => (/* binding */ BuildingPipe)
/* harmony export */ });
/* harmony import */ var _placeos_organisation__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/organisation */ 2510);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ 37580);



class BuildingPipe {
  constructor(_org) {
    this._org = _org;
  }
  transform(id) {
    return this._org.buildings.find(bld => id instanceof Array ? id.includes(bld.id) : bld.id === id);
  }
  static #_ = this.ɵfac = function BuildingPipe_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || BuildingPipe)(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](_placeos_organisation__WEBPACK_IMPORTED_MODULE_0__.OrganisationService, 16));
  };
  static #_2 = this.ɵpipe = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdefinePipe"]({
    name: "building",
    type: BuildingPipe,
    pure: true
  });
}

/***/ }),

/***/ 65991:
/*!**************************************************************!*\
  !*** ./libs/components/src/lib/changelog-modal.component.ts ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ChangelogModalComponent: () => (/* binding */ ChangelogModalComponent)
/* harmony export */ });
/* harmony import */ var _angular_material_dialog__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/material/dialog */ 12587);
/* harmony import */ var marked__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! marked */ 60997);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _icon_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./icon.component */ 69434);
/* harmony import */ var _safe_pipe__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./safe.pipe */ 26781);







function ChangelogModalComponent_main_6_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelement"](0, "main", 4);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipe"](1, "safe");
  }
  if (rf & 2) {
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("innerHTML", _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipeBind2"](1, 1, ctx_r0.changelog, "html"), _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵsanitizeHtml"]);
  }
}
function ChangelogModalComponent_ng_template_7_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "div", 5)(1, "app-icon", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](2, "close");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](3, "div", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](4, "No changelog");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()();
  }
}
class ChangelogModalComponent {
  constructor(_data) {
    this._data = _data;
  }
  /** HTML string for rendering the change log */
  get changelog() {
    return (0,marked__WEBPACK_IMPORTED_MODULE_0__.marked)(this._data.changelog || '', {
      async: false
    });
  }
  static #_ = this.ɵfac = function ChangelogModalComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || ChangelogModalComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵdirectiveInject"](_angular_material_dialog__WEBPACK_IMPORTED_MODULE_4__.MAT_DIALOG_DATA));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵdefineComponent"]({
    type: ChangelogModalComponent,
    selectors: [["changelog-modal"]],
    decls: 9,
    vars: 2,
    consts: [["empty_state", ""], ["mat-dialog-title", ""], ["icon", "", "mat-dialog-close", ""], ["class", "p-4 markdown max-h-[65vh] max-w-[80vw] overflow-auto", 3, "innerHTML", 4, "ngIf", "ngIfElse"], [1, "p-4", "markdown", "max-h-[65vh]", "max-w-[80vw]", "overflow-auto", 3, "innerHTML"], [1, "flex", "items-center", "justify-center", "flex-col", "space-y-2"], [1, "text-3xl"], [1, "text"]],
    template: function ChangelogModalComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "header")(1, "h3", 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](2, "Changelog");
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](3, "button", 2)(4, "app-icon");
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](5, "close");
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()()();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](6, ChangelogModalComponent_main_6_Template, 2, 4, "main", 3)(7, ChangelogModalComponent_ng_template_7_Template, 5, 0, "ng-template", null, 0, _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplateRefExtractor"]);
      }
      if (rf & 2) {
        const empty_state_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵreference"](8);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](6);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", ctx.changelog)("ngIfElse", empty_state_r2);
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_5__.NgIf, _angular_material_dialog__WEBPACK_IMPORTED_MODULE_4__.MatDialogClose, _angular_material_dialog__WEBPACK_IMPORTED_MODULE_4__.MatDialogTitle, _icon_component__WEBPACK_IMPORTED_MODULE_1__.IconComponent, _safe_pipe__WEBPACK_IMPORTED_MODULE_2__.SafePipe]
  });
}

/***/ }),

/***/ 79496:
/*!********************************************************!*\
  !*** ./libs/components/src/lib/chat/chat.component.ts ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ChatComponent: () => (/* binding */ ChatComponent)
/* harmony export */ });
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var _chat_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./chat.service */ 45632);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! rxjs/operators */ 35443);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @angular/forms */ 34456);
/* harmony import */ var _angular_material_core__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @angular/material/core */ 74646);
/* harmony import */ var _icon_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../icon.component */ 69434);
/* harmony import */ var _sanitise_pipe__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../sanitise.pipe */ 54616);
/* harmony import */ var _date_from_pipe__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../date-from.pipe */ 17025);













const _c0 = ["input"];
const _c1 = ["container"];
function ChatComponent_div_0_div_4_div_16_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "div", 21);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipe"](2, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipeBind1"](2, 1, ctx_r1.hint), " ");
  }
}
function ChatComponent_div_0_div_4_div_18_div_3_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "div", 27);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](1, " Assistant ");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
  }
}
function ChatComponent_div_0_div_4_div_18_Template(rf, ctx) {
  if (rf & 1) {
    const _r4 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "div", 22);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipe"](1, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("click", function ChatComponent_div_0_div_4_div_18_Template_div_click_0_listener() {
      const message_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵrestoreView"](_r4).$implicit;
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"](3);
      return _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵresetView"](ctx_r1.show_time[message_r5.id] = !ctx_r1.show_time[message_r5.id]);
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](2, "div", 23);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](3, ChatComponent_div_0_div_4_div_18_div_3_Template, 2, 0, "div", 24);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](4, "div", 25);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipe"](6, "dateFrom");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelement"](7, "div", 26);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipe"](8, "sanitize");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const message_r5 = ctx.$implicit;
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵclassProp"]("pr-4", message_r5.user_id !== ctx_r1.user.id)("pl-4", message_r5.user_id === ctx_r1.user.id)("items-left", message_r5.user_id !== ctx_r1.user.id)("items-end", message_r5.user_id === ctx_r1.user.id)("waiting-margin", _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipeBind1"](1, 13, ctx_r1.waiting));
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngIf", message_r5.user_id !== ctx_r1.user.id);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipeBind1"](6, 15, message_r5.timestamp + ctx_r1.offset), " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("innerHTML", _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipeBind1"](8, 17, message_r5.content), _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵsanitizeHtml"]);
  }
}
function ChatComponent_div_0_div_4_div_20_div_12_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelement"](0, "div", 35);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipe"](1, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipe"](2, "sanitize");
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("innerHTML", _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipeBind1"](2, 3, _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipeBind1"](1, 1, ctx_r1.progress).content), _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵsanitizeHtml"]);
  }
}
function ChatComponent_div_0_div_4_div_20_Template(rf, ctx) {
  if (rf & 1) {
    const _r6 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "div", 28)(1, "button", 29);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("click", function ChatComponent_div_0_div_4_div_20_Template_button_click_1_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵrestoreView"](_r6);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"](3);
      return _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵresetView"](ctx_r1.show_info = !ctx_r1.show_info);
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](2, "div", 23)(3, "app-icon", 30);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipe"](5, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](6, "p", 31);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](7);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipe"](8, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipe"](9, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](10, "div", 32);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelement"](11, "div", 33);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](12, ChatComponent_div_0_div_4_div_20_div_12_Template, 3, 5, "div", 34);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]()()();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtextInterpolate"](ctx_r1.icons[_angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipeBind1"](5, 3, ctx_r1.progress).function] || "info");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipeBind1"](8, 5, ctx_r1.progress).message || _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipeBind1"](9, 7, ctx_r1.progress).function, " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngIf", ctx_r1.show_info);
  }
}
function ChatComponent_div_0_div_4_div_22_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "div", 36);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelement"](1, "div", 37)(2, "div", 38)(3, "div", 39);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](4, "span", 40);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](5, "Waiting for reply...");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵstyleProp"]("bottom", ctx_r1.height + 8 + "px");
  }
}
function ChatComponent_div_0_div_4_Template(rf, ctx) {
  if (rf & 1) {
    const _r3 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "div", 6)(1, "div", 7)(2, "h3", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](3, "Virtual Assistant");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](4, "button", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("click", function ChatComponent_div_0_div_4_Template_button_click_4_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵrestoreView"](_r3);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"](2);
      return _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵresetView"](ctx_r1.toggleChat());
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](5, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](6, "close");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]()()();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](7, "div", 10, 0)(9, "div", 11)(10, "app-icon", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](11, "forum");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](12, "p", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](13);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelement"](14, "br");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](15, " Welcome to the virtual assistant. ");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](16, ChatComponent_div_0_div_4_div_16_Template, 3, 3, "div", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipe"](17, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](18, ChatComponent_div_0_div_4_div_18_Template, 9, 19, "div", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipe"](19, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](20, ChatComponent_div_0_div_4_div_20_Template, 13, 9, "div", 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipe"](21, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](22, ChatComponent_div_0_div_4_div_22_Template, 6, 2, "div", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipe"](23, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](24, "div", 18)(25, "textarea", 19, 1);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtwoWayListener"]("ngModelChange", function ChatComponent_div_0_div_4_Template_textarea_ngModelChange_25_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵrestoreView"](_r3);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"](2);
      _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtwoWayBindingSet"](ctx_r1.message, $event) || (ctx_r1.message = $event);
      return _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵresetView"]($event);
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("ngModelChange", function ChatComponent_div_0_div_4_Template_textarea_ngModelChange_25_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵrestoreView"](_r3);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"](2);
      return _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵresetView"](ctx_r1.resizeInput());
    })("keyup.enter", function ChatComponent_div_0_div_4_Template_textarea_keyup_enter_25_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵrestoreView"](_r3);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"](2);
      return _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵresetView"](ctx_r1.sendMessage());
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](27, "button", 20);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("click", function ChatComponent_div_0_div_4_Template_button_click_27_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵrestoreView"](_r3);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"](2);
      return _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵresetView"](ctx_r1.sendMessage());
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](28, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](29, "send");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]()()()();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](13);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtextInterpolate1"](" Hi ", ctx_r1.user.name, ". ");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngIf", _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipeBind1"](17, 9, ctx_r1.hint));
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngForOf", _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipeBind1"](19, 11, ctx_r1.messages));
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngIf", _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipeBind1"](21, 13, ctx_r1.progress));
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngIf", _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipeBind1"](23, 15, ctx_r1.waiting));
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵstyleProp"]("height", ctx_r1.height + "px");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtwoWayProperty"]("ngModel", ctx_r1.message);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("disabled", !ctx_r1.message);
  }
}
function ChatComponent_div_0_Template(rf, ctx) {
  if (rf & 1) {
    const _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "div", 3)(1, "button", 4);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("click", function ChatComponent_div_0_Template_button_click_1_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵrestoreView"](_r1);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵresetView"](ctx_r1.toggleChat());
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](2, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](3, "chat");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](4, ChatComponent_div_0_div_4_Template, 30, 17, "div", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngIf", ctx_r1.show);
  }
}
class ChatComponent extends _placeos_common__WEBPACK_IMPORTED_MODULE_0__.AsyncHandler {
  get can_show() {
    return this._settings.get('app.chat.enabled');
  }
  toggleChat() {
    this.show = !this.show;
    if (!this.show) this._chat.close();
  }
  constructor(_settings, _chat) {
    super();
    this._settings = _settings;
    this._chat = _chat;
    this.show = false;
    this.show_info = false;
    this.message = '';
    this.show_time = {};
    this.offset = 0;
    this.height = 56;
    this.icons = {
      list_function_schemas: 'help',
      call_function: 'settings',
      task_complete: 'check_circle'
    };
    this.hint = this._chat.chat_hint;
    this.messages = this._chat.messages;
    this.progress = this._chat.progress;
    this.waiting = this._chat.messages.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.map)(_ => _.length !== 0 && _[_.length - 1]?.user_id === this.user?.id));
  }
  ngOnInit() {
    this.subscription('current_user', _placeos_common__WEBPACK_IMPORTED_MODULE_0__.current_user.subscribe(user => this.user = user));
    this.subscription('hint', this.hint.subscribe(() => this.scrollToBottom(500)));
    this.subscription('messages', this.messages.subscribe(() => this.scrollToBottom()));
    this.subscription('progress', this.progress.subscribe(i => i ? this.scrollToBottom() : this.show_info = false));
    this.interval('offset', () => this.offset = this.offset ? 0 : 1, 20 * 1000);
  }
  resizeInput() {
    const el = this._input_el.nativeElement;
    this.height = Math.max(el.scrollHeight, 56);
  }
  sendMessage() {
    if (!this.message) return;
    if (!this._chat.connected) {
      this._chat.startChat();
      return this.timeout('send', () => this.sendMessage(), 100);
    }
    this._chat.sendMessage(this.message);
    this.message = '';
    this.height = 56;
    setTimeout(() => this._input_el.nativeElement.focus(), 100);
  }
  scrollToBottom(delay = 300) {
    this.timeout('scroll', () => {
      if (this._container_el?.nativeElement) {
        this._container_el.nativeElement.scrollTop = this._container_el.nativeElement.scrollHeight;
      }
    }, delay);
  }
  static #_ = this.ɵfac = function ChatComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || ChatComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵdirectiveInject"](_placeos_common__WEBPACK_IMPORTED_MODULE_0__.SettingsService), _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵdirectiveInject"](_chat_service__WEBPACK_IMPORTED_MODULE_1__.ChatService));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵdefineComponent"]({
    type: ChatComponent,
    selectors: [["global-chat"]],
    viewQuery: function ChatComponent_Query(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵviewQuery"](_c0, 5);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵviewQuery"](_c1, 5);
      }
      if (rf & 2) {
        let _t;
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵloadQuery"]()) && (ctx._input_el = _t.first);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵloadQuery"]()) && (ctx._container_el = _t.first);
      }
    },
    features: [_angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵInheritDefinitionFeature"]],
    decls: 1,
    vars: 1,
    consts: [["container", ""], ["input", ""], ["class", "absolute bottom-0 right-0 p-2", 4, "ngIf"], [1, "absolute", "bottom-0", "right-0", "p-2"], ["icon", "", "matRipple", "", 1, "bg-base-100", "rounded-full", "border", "border-base-300", "shadow", 3, "click"], ["class", "absolute bottom-2 right-2 bg-base-200 rounded-xl border border-base-300 shadow overflow-hidden w-[40rem] max-w-[calc(100vw-1rem)]", 4, "ngIf"], [1, "absolute", "bottom-2", "right-2", "bg-base-200", "rounded-xl", "border", "border-base-300", "shadow", "overflow-hidden", "w-[40rem]", "max-w-[calc(100vw-1rem)]"], [1, "flex", "items-center", "justify-between", "bg-base-100", "w-full", "p-2", "border-b", "border-base-300"], [1, "pl-4"], ["icon", "", "matRipple", "", 3, "click"], [1, "h-[32rem]", "max-h-[60vh]", "overflow-auto"], [1, "w-full", "flex", "flex-col", "items-center", "justify-center", "p-8", "space-y-2"], [1, "text-8xl"], [1, "text-center", "text-xl"], ["class", "m-2 bg-base-100 border-base-300 p-4 rounded shadow text-sm", 4, "ngIf"], ["class", "flex flex-col m-2", 3, "pr-4", "pl-4", "items-left", "items-end", "waiting-margin", "click", 4, "ngFor", "ngForOf"], ["class", "p-4", 4, "ngIf"], ["class", "absolute right-2 flex items-center justify-center space-x-2 p-1 rounded-2xl bg-base-100 border border-neutral", 3, "bottom", 4, "ngIf"], [1, "flex", "bg-base-100", "focus-within:outline", "outline-info", "border-t", "border-base-300", "max-h-[10rem]", "overflow-y-auto"], ["placeholder", "New message...", 1, "p-4", "flex-1", "w-1/2", "focus:outline-none", "resize-none", "overflow-hidden", 3, "ngModelChange", "keyup.enter", "ngModel"], ["icon", "", "matRipple", "", 1, "mt-2", 3, "click", "disabled"], [1, "m-2", "bg-base-100", "border-base-300", "p-4", "rounded", "shadow", "text-sm"], [1, "flex", "flex-col", "m-2", 3, "click"], [1, "flex", "items-center", "space-x-2"], ["class", "text-sm text-base-content opacity-60 px-2 py-1", 4, "ngIf"], [1, "text-xs", "text-base-content", "opacity-40", "px-2", "py-1"], ["message", "", 1, "bg-base-100", "border-base-300", "p-4", "rounded", "shadow", "text-sm", "markdown", "selectable", 3, "innerHTML"], [1, "text-sm", "text-base-content", "opacity-60", "px-2", "py-1"], [1, "p-4"], [1, "block", "p-2", "rounded", "border-base-300", "bg-info", "text-info-content", "w-full", 3, "click"], [1, "text-2xl"], [1, "text-sm"], [1, "relative", "overflow-hidden", "w-full", "rounded"], [1, "absolute", "inset-0", "bg-base-100", "opacity-10"], ["class", "text-xs text-mono text-left p-2 break-words", 3, "innerHTML", 4, "ngIf"], [1, "text-xs", "text-mono", "text-left", "p-2", "break-words", 3, "innerHTML"], [1, "absolute", "right-2", "flex", "items-center", "justify-center", "space-x-2", "p-1", "rounded-2xl", "bg-base-100", "border", "border-neutral"], [1, "h-2", "w-2", "bg-neutral", "rounded-full", "animate-bounce"], [1, "h-2", "w-2", "bg-neutral", "rounded-full", "animate-bounce", "anim-delay-1"], [1, "h-2", "w-2", "bg-neutral", "rounded-full", "animate-bounce", "anim-delay-2"], [1, "sr-only"]],
    template: function ChatComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](0, ChatComponent_div_0_Template, 5, 1, "div", 2);
      }
      if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngIf", ctx.can_show);
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_7__.NgForOf, _angular_common__WEBPACK_IMPORTED_MODULE_7__.NgIf, _angular_forms__WEBPACK_IMPORTED_MODULE_8__.DefaultValueAccessor, _angular_forms__WEBPACK_IMPORTED_MODULE_8__.NgControlStatus, _angular_forms__WEBPACK_IMPORTED_MODULE_8__.NgModel, _angular_material_core__WEBPACK_IMPORTED_MODULE_9__.MatRipple, _icon_component__WEBPACK_IMPORTED_MODULE_2__.IconComponent, _angular_common__WEBPACK_IMPORTED_MODULE_7__.AsyncPipe, _sanitise_pipe__WEBPACK_IMPORTED_MODULE_3__.SanitizePipe, _date_from_pipe__WEBPACK_IMPORTED_MODULE_4__.DateFromPipe],
    styles: [".anim-delay-1[_ngcontent-%COMP%] {\n                animation-delay: 0.25s;\n            }\n            .anim-delay-2[_ngcontent-%COMP%] {\n                animation-delay: 0.5s;\n            }\n\n            .waiting-margin[_ngcontent-%COMP%]:last-child {\n                padding-bottom: 2rem;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNoYXQuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxzQkFBc0I7WUFDMUI7WUFDQTtnQkFDSSxxQkFBcUI7WUFDekI7O1lBRUE7Z0JBQ0ksb0JBQW9CO1lBQ3hCIiwiZmlsZSI6ImNoYXQuY29tcG9uZW50LnRzIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICAuYW5pbS1kZWxheS0xIHtcbiAgICAgICAgICAgICAgICBhbmltYXRpb24tZGVsYXk6IDAuMjVzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLmFuaW0tZGVsYXktMiB7XG4gICAgICAgICAgICAgICAgYW5pbWF0aW9uLWRlbGF5OiAwLjVzO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAud2FpdGluZy1tYXJnaW46bGFzdC1jaGlsZCB7XG4gICAgICAgICAgICAgICAgcGFkZGluZy1ib3R0b206IDJyZW07XG4gICAgICAgICAgICB9XG4gICAgICAgICJdfQ== */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvY29tcG9uZW50cy9zcmMvbGliL2NoYXQvY2hhdC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLHNCQUFzQjtZQUMxQjtZQUNBO2dCQUNJLHFCQUFxQjtZQUN6Qjs7WUFFQTtnQkFDSSxvQkFBb0I7WUFDeEI7O0FBRVosd3FCQUF3cUIiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIC5hbmltLWRlbGF5LTEge1xuICAgICAgICAgICAgICAgIGFuaW1hdGlvbi1kZWxheTogMC4yNXM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAuYW5pbS1kZWxheS0yIHtcbiAgICAgICAgICAgICAgICBhbmltYXRpb24tZGVsYXk6IDAuNXM7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC53YWl0aW5nLW1hcmdpbjpsYXN0LWNoaWxkIHtcbiAgICAgICAgICAgICAgICBwYWRkaW5nLWJvdHRvbTogMnJlbTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl0sInNvdXJjZVJvb3QiOiIifQ== */"]
  });
}

/***/ }),

/***/ 45632:
/*!******************************************************!*\
  !*** ./libs/components/src/lib/chat/chat.service.ts ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ChatService: () => (/* binding */ ChatService)
/* harmony export */ });
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var _placeos_organisation__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @placeos/organisation */ 2510);
/* harmony import */ var _placeos_ts_client__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @placeos/ts-client */ 35713);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! rxjs */ 90521);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! rxjs */ 68824);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! rxjs/operators */ 8627);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! rxjs/operators */ 35443);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! rxjs/operators */ 71963);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! rxjs/operators */ 7841);
/* harmony import */ var rxjs_webSocket__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! rxjs/webSocket */ 70037);
/* harmony import */ var marked__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! marked */ 60997);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @angular/core */ 37580);










class ChatService extends _placeos_common__WEBPACK_IMPORTED_MODULE_0__.AsyncHandler {
  get connected() {
    return !!this._socket;
  }
  constructor(_org, _settings) {
    super();
    this._org = _org;
    this._settings = _settings;
    this._binding = new rxjs__WEBPACK_IMPORTED_MODULE_4__.BehaviorSubject('');
    this._chat_messages = new rxjs__WEBPACK_IMPORTED_MODULE_4__.BehaviorSubject([]);
    this._progress_message = new rxjs__WEBPACK_IMPORTED_MODULE_4__.BehaviorSubject(null);
    this._chat_system = (0,rxjs__WEBPACK_IMPORTED_MODULE_5__.combineLatest)([this._org.active_building, this._binding]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.filter)(([b]) => !!b), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.map)(([_, biniding]) => biniding || this._org.binding('chat_room')));
    this._chat_id = '';
    this.chat_hint = this._chat_system.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.filter)(_ => !!_), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.switchMap)(id => {
      const mod = (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_2__.getModule)(id, 'LLM');
      const binding = mod.binding('user_hint');
      this.subscription(`binding:LLM:user_hint`, binding.bind());
      return binding.listen();
    }), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.shareReplay)(1));
    this._change = new rxjs__WEBPACK_IMPORTED_MODULE_4__.BehaviorSubject(0);
    this._chat_pipe = (0,rxjs__WEBPACK_IMPORTED_MODULE_5__.combineLatest)([this._chat_system, this._change]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.switchMap)(([id]) => {
      const auth = (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_2__.token)() !== 'x-api-key' ? `bearer_token=${encodeURIComponent((0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_2__.token)())}` : `x-api-key=${(0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_2__.apiKey)()}`;
      const url = `ws${location.origin.replace('http', '')}/api/engine/v2/chatgpt/chat/${encodeURIComponent(id)}?${auth}${this._chat_id ? '&resume=' + encodeURIComponent(this._chat_id) : ''}`;
      this._socket = (0,rxjs_webSocket__WEBPACK_IMPORTED_MODULE_10__.webSocket)({
        url,
        serializer: data => typeof data === 'object' ? JSON.stringify(data) : data,
        deserializer: data => {
          let return_value = data.data;
          try {
            const obj = JSON.parse(data.data);
            return_value = obj;
          } catch (e) {
            return_value = return_value;
          }
          return return_value;
        }
      });
      this.subscription('chat-ws', this._socket.subscribe(_ => this._onMessage(_), e => {
        (0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.log)('CHAT', 'Connection error:', [e], 'error');
        this._cleanup();
      }, () => this._cleanup()));
      return this._socket;
    }), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.shareReplay)(1));
    this.messages = this._chat_messages.asObservable();
    this.progress = this._progress_message.asObservable();
  }
  setBinding(system_id) {
    this._binding.next(system_id);
  }
  startChat() {
    if (this._socket) return;
    this._change.next(Date.now());
    (0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.log)('CHAT', 'Starting chat connection.');
    this.subscription('chat', this._chat_pipe.subscribe());
    return () => this.endChat();
  }
  endChat() {
    (0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.log)('CHAT', 'Dropping chat connection.');
    this._socket?.complete();
    this._cleanup();
  }
  close() {
    this.endChat();
    this._chat_id = '';
    this._chat_messages.next([]);
  }
  sendMessage(message) {
    if (!message) return;
    this._onMessage({
      chat_id: '',
      message,
      user_id: (0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.currentUser)().id
    });
    this._socket?.next(message);
  }
  _timeoutSocket(delay = 55 * 1000) {
    this.timeout('socket', () => {
      const msg_list = this._chat_messages.getValue();
      if (msg_list.length > 0 && msg_list[msg_list.length - 1].user_id !== 'assistant') {
        return this._timeoutSocket(delay);
      }
      this.endChat();
    }, delay);
  }
  _cleanup() {
    this._socket = null;
    this.unsubWith('chat');
  }
  _onMessage(msg) {
    if (msg.chat_id) this._chat_id = msg.chat_id;
    if (msg.type === 'progress') {
      this._progress_message.next({
        id: `msg-${(0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.randomString)(6)}`,
        chat_id: msg.chat_id,
        message: msg.message,
        content: marked__WEBPACK_IMPORTED_MODULE_3__.parse(msg.message, {
          async: false
        }),
        user_id: msg.user_id || 'assistant',
        function: msg.function,
        timestamp: Date.now()
      });
      if (msg.function === 'task_complete') {
        this._settings.post('CHAT:task_complete', msg.task_id);
      }
    } else {
      this._chat_messages.next([...this._chat_messages.getValue(), {
        id: `msg-${(0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.randomString)(6)}`,
        chat_id: msg.chat_id,
        message: msg.message,
        content: marked__WEBPACK_IMPORTED_MODULE_3__.parse(msg.message, {
          async: false
        }),
        user_id: msg.user_id || 'assistant',
        timestamp: Date.now()
      }]);
      if (msg.type === 'response') {
        this._progress_message.next(null);
      }
    }
    this._timeoutSocket();
  }
  static #_ = this.ɵfac = function ChatService_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || ChatService)(_angular_core__WEBPACK_IMPORTED_MODULE_11__["ɵɵinject"](_placeos_organisation__WEBPACK_IMPORTED_MODULE_1__.OrganisationService), _angular_core__WEBPACK_IMPORTED_MODULE_11__["ɵɵinject"](_placeos_common__WEBPACK_IMPORTED_MODULE_0__.SettingsService));
  };
  static #_2 = this.ɵprov = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_11__["ɵɵdefineInjectable"]({
    token: ChatService,
    factory: ChatService.ɵfac,
    providedIn: 'root'
  });
}

/***/ }),

/***/ 14974:
/*!******************************************************!*\
  !*** ./libs/components/src/lib/components.module.ts ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ComponentsModule: () => (/* binding */ ComponentsModule)
/* harmony export */ });
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_78__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_79__ = __webpack_require__(/*! @angular/forms */ 34456);
/* harmony import */ var _angular_material_dialog__WEBPACK_IMPORTED_MODULE_59__ = __webpack_require__(/*! @angular/material/dialog */ 12587);
/* harmony import */ var _angular_material_menu__WEBPACK_IMPORTED_MODULE_55__ = __webpack_require__(/*! @angular/material/menu */ 31034);
/* harmony import */ var _angular_material_form_field__WEBPACK_IMPORTED_MODULE_56__ = __webpack_require__(/*! @angular/material/form-field */ 24950);
/* harmony import */ var _angular_material_select__WEBPACK_IMPORTED_MODULE_57__ = __webpack_require__(/*! @angular/material/select */ 25175);
/* harmony import */ var _angular_material_autocomplete__WEBPACK_IMPORTED_MODULE_54__ = __webpack_require__(/*! @angular/material/autocomplete */ 79771);
/* harmony import */ var _angular_material_datepicker__WEBPACK_IMPORTED_MODULE_60__ = __webpack_require__(/*! @angular/material/datepicker */ 61977);
/* harmony import */ var _angular_material_input__WEBPACK_IMPORTED_MODULE_61__ = __webpack_require__(/*! @angular/material/input */ 95541);
/* harmony import */ var _angular_material_chips__WEBPACK_IMPORTED_MODULE_64__ = __webpack_require__(/*! @angular/material/chips */ 12772);
/* harmony import */ var _angular_material_progress_spinner__WEBPACK_IMPORTED_MODULE_63__ = __webpack_require__(/*! @angular/material/progress-spinner */ 41134);
/* harmony import */ var _angular_cdk_clipboard__WEBPACK_IMPORTED_MODULE_62__ = __webpack_require__(/*! @angular/cdk/clipboard */ 52352);
/* harmony import */ var _angular_material_core__WEBPACK_IMPORTED_MODULE_58__ = __webpack_require__(/*! @angular/material/core */ 74646);
/* harmony import */ var _angular_material_paginator__WEBPACK_IMPORTED_MODULE_65__ = __webpack_require__(/*! @angular/material/paginator */ 24624);
/* harmony import */ var _angular_cdk_table__WEBPACK_IMPORTED_MODULE_66__ = __webpack_require__(/*! @angular/cdk/table */ 90198);
/* harmony import */ var _angular_cdk_portal__WEBPACK_IMPORTED_MODULE_67__ = __webpack_require__(/*! @angular/cdk/portal */ 9168);
/* harmony import */ var _angular_material_tooltip__WEBPACK_IMPORTED_MODULE_70__ = __webpack_require__(/*! @angular/material/tooltip */ 80640);
/* harmony import */ var _angular_material_checkbox__WEBPACK_IMPORTED_MODULE_71__ = __webpack_require__(/*! @angular/material/checkbox */ 97024);
/* harmony import */ var _angular_material_radio__WEBPACK_IMPORTED_MODULE_72__ = __webpack_require__(/*! @angular/material/radio */ 53804);
/* harmony import */ var _angular_material_slider__WEBPACK_IMPORTED_MODULE_73__ = __webpack_require__(/*! @angular/material/slider */ 64992);
/* harmony import */ var _angular_material_slide_toggle__WEBPACK_IMPORTED_MODULE_74__ = __webpack_require__(/*! @angular/material/slide-toggle */ 8827);
/* harmony import */ var _angular_material_button_toggle__WEBPACK_IMPORTED_MODULE_75__ = __webpack_require__(/*! @angular/material/button-toggle */ 59864);
/* harmony import */ var _angular_common_http__WEBPACK_IMPORTED_MODULE_77__ = __webpack_require__(/*! @angular/common/http */ 46443);
/* harmony import */ var _ngx_translate_core__WEBPACK_IMPORTED_MODULE_80__ = __webpack_require__(/*! @ngx-translate/core */ 597);
/* harmony import */ var _binding_directive__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./binding.directive */ 83938);
/* harmony import */ var _action_icon_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./action-icon.component */ 88157);
/* harmony import */ var _icon_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./icon.component */ 69434);
/* harmony import */ var _popout_menu_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./popout-menu.component */ 44418);
/* harmony import */ var _user_avatar_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./user-avatar.component */ 23574);
/* harmony import */ var _confirm_modal_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./confirm-modal.component */ 30841);
/* harmony import */ var _interactive_map_component__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./interactive-map.component */ 24918);
/* harmony import */ var _map_pin_component__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./map-pin.component */ 71865);
/* harmony import */ var _map_radius_component__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./map-radius.component */ 95384);
/* harmony import */ var _status_overlay_component__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./status-overlay.component */ 91960);
/* harmony import */ var _fixed_pipe__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./fixed.pipe */ 62678);
/* harmony import */ var _safe_pipe__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./safe.pipe */ 26781);
/* harmony import */ var _sanitise_pipe__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./sanitise.pipe */ 54616);
/* harmony import */ var _custom_table_component__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./custom-table.component */ 12993);
/* harmony import */ var _custom_tooltip_component__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./custom-tooltip.component */ 22238);
/* harmony import */ var _virtual_keyboard_component__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./virtual-keyboard.component */ 75080);
/* harmony import */ var _global_loading_component__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./global-loading.component */ 34921);
/* harmony import */ var _angular_material_sort__WEBPACK_IMPORTED_MODULE_68__ = __webpack_require__(/*! @angular/material/sort */ 22047);
/* harmony import */ var _map_polygon_component__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./map-polygon.component */ 84268);
/* harmony import */ var _global_banner_component__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./global-banner.component */ 20785);
/* harmony import */ var _map_locate_modal_component__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./map-locate-modal.component */ 90620);
/* harmony import */ var _image_carousel_component__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./image-carousel.component */ 65277);
/* harmony import */ var _duration_pipe__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./duration.pipe */ 17022);
/* harmony import */ var _redirect_component__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./redirect.component */ 68283);
/* harmony import */ var _debug_console_component__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./debug-console.component */ 18482);
/* harmony import */ var _angular_cdk_scrolling__WEBPACK_IMPORTED_MODULE_69__ = __webpack_require__(/*! @angular/cdk/scrolling */ 79975);
/* harmony import */ var _json_display_component__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./json-display.component */ 12354);
/* harmony import */ var _changelog_modal_component__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./changelog-modal.component */ 65991);
/* harmony import */ var _level_pipe__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./level.pipe */ 23666);
/* harmony import */ var _building_pipe__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./building.pipe */ 56062);
/* harmony import */ var _user_controls_component__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./user-controls.component */ 74633);
/* harmony import */ var _building_select_component__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ./building-select.component */ 55550);
/* harmony import */ var _region_select_component__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ./region-select.component */ 66962);
/* harmony import */ var _help_tooltip_component__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ./help-tooltip.component */ 46926);
/* harmony import */ var _accessibility_tooltip_component__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! ./accessibility-tooltip.component */ 6539);
/* harmony import */ var _language_tooltip_component__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! ./language-tooltip.component */ 53835);
/* harmony import */ var _authenticated_image_directive__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! ./authenticated-image.directive */ 93208);
/* harmony import */ var _upload_permissions_modal_component__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! ./upload-permissions-modal.component */ 76871);
/* harmony import */ var _indoor_maps_component__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! ./indoor-maps.component */ 92124);
/* harmony import */ var _printable_component__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(/*! ./printable.component */ 74846);
/* harmony import */ var _chat_chat_component__WEBPACK_IMPORTED_MODULE_38__ = __webpack_require__(/*! ./chat/chat.component */ 79496);
/* harmony import */ var _date_from_pipe__WEBPACK_IMPORTED_MODULE_39__ = __webpack_require__(/*! ./date-from.pipe */ 17025);
/* harmony import */ var _attached_resource_config_modal_component__WEBPACK_IMPORTED_MODULE_40__ = __webpack_require__(/*! ./attached-resource-config-modal.component */ 65843);
/* harmony import */ var _status_pill_component__WEBPACK_IMPORTED_MODULE_41__ = __webpack_require__(/*! ./status-pill.component */ 50907);
/* harmony import */ var _available_rooms_state_modal_component__WEBPACK_IMPORTED_MODULE_42__ = __webpack_require__(/*! ./available-rooms-state-modal.component */ 10375);
/* harmony import */ var _media_duration_pipe__WEBPACK_IMPORTED_MODULE_43__ = __webpack_require__(/*! ./media-duration.pipe */ 28975);
/* harmony import */ var _thumbnail_pipe__WEBPACK_IMPORTED_MODULE_44__ = __webpack_require__(/*! ./thumbnail.pipe */ 12976);
/* harmony import */ var _map_renderer_component__WEBPACK_IMPORTED_MODULE_45__ = __webpack_require__(/*! ./map-renderer.component */ 39489);
/* harmony import */ var _maps_indoors_component__WEBPACK_IMPORTED_MODULE_46__ = __webpack_require__(/*! ./maps-indoors.component */ 30877);
/* harmony import */ var _map_canvas_component__WEBPACK_IMPORTED_MODULE_47__ = __webpack_require__(/*! ./map-canvas.component */ 37558);
/* harmony import */ var _image_viewer_component__WEBPACK_IMPORTED_MODULE_48__ = __webpack_require__(/*! ./image-viewer.component */ 26821);
/* harmony import */ var _simple_table_component__WEBPACK_IMPORTED_MODULE_49__ = __webpack_require__(/*! ./simple-table.component */ 88328);
/* harmony import */ var _limit_input_directive__WEBPACK_IMPORTED_MODULE_50__ = __webpack_require__(/*! ./limit-input.directive */ 62897);
/* harmony import */ var _desk_height_presets_component__WEBPACK_IMPORTED_MODULE_51__ = __webpack_require__(/*! ./desk-height-presets.component */ 3051);
/* harmony import */ var _work_location_tooltip_component__WEBPACK_IMPORTED_MODULE_52__ = __webpack_require__(/*! ./work-location-tooltip.component */ 42792);
/* harmony import */ var _zone_pipe__WEBPACK_IMPORTED_MODULE_53__ = __webpack_require__(/*! ./zone.pipe */ 45312);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_76__ = __webpack_require__(/*! @angular/core */ 37580);


























































































const MAT_MODULES = [_angular_material_autocomplete__WEBPACK_IMPORTED_MODULE_54__.MatAutocompleteModule, _angular_material_menu__WEBPACK_IMPORTED_MODULE_55__.MatMenuModule, _angular_material_form_field__WEBPACK_IMPORTED_MODULE_56__.MatFormFieldModule, _angular_material_select__WEBPACK_IMPORTED_MODULE_57__.MatSelectModule, _angular_material_core__WEBPACK_IMPORTED_MODULE_58__.MatRippleModule, _angular_material_autocomplete__WEBPACK_IMPORTED_MODULE_54__.MatAutocompleteModule, _angular_material_select__WEBPACK_IMPORTED_MODULE_57__.MatSelectModule, _angular_material_dialog__WEBPACK_IMPORTED_MODULE_59__.MatDialogModule, _angular_material_datepicker__WEBPACK_IMPORTED_MODULE_60__.MatDatepickerModule, _angular_material_input__WEBPACK_IMPORTED_MODULE_61__.MatInputModule, _angular_cdk_clipboard__WEBPACK_IMPORTED_MODULE_62__.ClipboardModule, _angular_material_progress_spinner__WEBPACK_IMPORTED_MODULE_63__.MatProgressSpinnerModule, _angular_material_chips__WEBPACK_IMPORTED_MODULE_64__.MatChipsModule, _angular_material_paginator__WEBPACK_IMPORTED_MODULE_65__.MatPaginatorModule, _angular_cdk_table__WEBPACK_IMPORTED_MODULE_66__.CdkTableModule, _angular_cdk_portal__WEBPACK_IMPORTED_MODULE_67__.PortalModule, _angular_material_sort__WEBPACK_IMPORTED_MODULE_68__.MatSortModule, _angular_cdk_scrolling__WEBPACK_IMPORTED_MODULE_69__.ScrollingModule, _angular_material_tooltip__WEBPACK_IMPORTED_MODULE_70__.MatTooltipModule, _angular_material_checkbox__WEBPACK_IMPORTED_MODULE_71__.MatCheckboxModule, _angular_material_radio__WEBPACK_IMPORTED_MODULE_72__.MatRadioModule, _angular_material_slider__WEBPACK_IMPORTED_MODULE_73__.MatSliderModule, _angular_material_slide_toggle__WEBPACK_IMPORTED_MODULE_74__.MatSlideToggleModule, _angular_material_button_toggle__WEBPACK_IMPORTED_MODULE_75__.MatButtonToggleModule];
const COMPONENTS = [_action_icon_component__WEBPACK_IMPORTED_MODULE_1__.ActionIconComponent, _icon_component__WEBPACK_IMPORTED_MODULE_2__.IconComponent, _popout_menu_component__WEBPACK_IMPORTED_MODULE_3__.PopoutMenuComponent, _user_avatar_component__WEBPACK_IMPORTED_MODULE_4__.UserAvatarComponent, _confirm_modal_component__WEBPACK_IMPORTED_MODULE_5__.ConfirmModalComponent, _interactive_map_component__WEBPACK_IMPORTED_MODULE_6__.InteractiveMapComponent, _map_renderer_component__WEBPACK_IMPORTED_MODULE_45__.MapRendererComponent, _maps_indoors_component__WEBPACK_IMPORTED_MODULE_46__.MapsIndoorsComponent, _map_pin_component__WEBPACK_IMPORTED_MODULE_7__.MapPinComponent, _map_radius_component__WEBPACK_IMPORTED_MODULE_8__.MapRadiusComponent, _map_polygon_component__WEBPACK_IMPORTED_MODULE_17__.MapPolygonComponent, _map_canvas_component__WEBPACK_IMPORTED_MODULE_47__.MapCanvasComponent, _indoor_maps_component__WEBPACK_IMPORTED_MODULE_36__.IndoorMapsComponent, _status_overlay_component__WEBPACK_IMPORTED_MODULE_9__.StatusOverlayComponent, _custom_table_component__WEBPACK_IMPORTED_MODULE_13__.CustomTableComponent, _custom_tooltip_component__WEBPACK_IMPORTED_MODULE_14__.CustomTooltipComponent, _virtual_keyboard_component__WEBPACK_IMPORTED_MODULE_15__.VirtualKeyboardComponent, _global_loading_component__WEBPACK_IMPORTED_MODULE_16__.GlobalLoadingComponent, _global_banner_component__WEBPACK_IMPORTED_MODULE_18__.GlobalBannerComponent, _map_locate_modal_component__WEBPACK_IMPORTED_MODULE_19__.MapLocateModalComponent, _image_carousel_component__WEBPACK_IMPORTED_MODULE_20__.ImageCarouselComponent, _redirect_component__WEBPACK_IMPORTED_MODULE_22__.RedirectComponent, _debug_console_component__WEBPACK_IMPORTED_MODULE_23__.DebugConsoleComponent, _json_display_component__WEBPACK_IMPORTED_MODULE_24__.JsonDisplayComponent, _changelog_modal_component__WEBPACK_IMPORTED_MODULE_25__.ChangelogModalComponent, _status_pill_component__WEBPACK_IMPORTED_MODULE_41__.StatusPillComponent, _image_viewer_component__WEBPACK_IMPORTED_MODULE_48__.ImageViewerComponent, _simple_table_component__WEBPACK_IMPORTED_MODULE_49__.SimpleTableComponent, _work_location_tooltip_component__WEBPACK_IMPORTED_MODULE_52__.WorkLocationTooltipComponent, _fixed_pipe__WEBPACK_IMPORTED_MODULE_10__.FixedPipe, _safe_pipe__WEBPACK_IMPORTED_MODULE_11__.SafePipe, _sanitise_pipe__WEBPACK_IMPORTED_MODULE_12__.SanitizePipe, _duration_pipe__WEBPACK_IMPORTED_MODULE_21__.DurationPipe, _level_pipe__WEBPACK_IMPORTED_MODULE_26__.LevelPipe, _building_pipe__WEBPACK_IMPORTED_MODULE_27__.BuildingPipe, _date_from_pipe__WEBPACK_IMPORTED_MODULE_39__.DateFromPipe, _media_duration_pipe__WEBPACK_IMPORTED_MODULE_43__.MediaDurationPipe, _thumbnail_pipe__WEBPACK_IMPORTED_MODULE_44__.ThumbnailPipe, _zone_pipe__WEBPACK_IMPORTED_MODULE_53__.ZonePipe, _user_controls_component__WEBPACK_IMPORTED_MODULE_28__.UserControlsComponent, _building_select_component__WEBPACK_IMPORTED_MODULE_29__.BuildingSelectComponent, _region_select_component__WEBPACK_IMPORTED_MODULE_30__.RegionSelectComponent, _help_tooltip_component__WEBPACK_IMPORTED_MODULE_31__.HelpTooltipComponent, _accessibility_tooltip_component__WEBPACK_IMPORTED_MODULE_32__.AccessibilityTooltipComponent, _language_tooltip_component__WEBPACK_IMPORTED_MODULE_33__.LanguageSelectComponent, _upload_permissions_modal_component__WEBPACK_IMPORTED_MODULE_35__.UploadPermissionsModalComponent, _printable_component__WEBPACK_IMPORTED_MODULE_37__.PrintableComponent, _chat_chat_component__WEBPACK_IMPORTED_MODULE_38__.ChatComponent, _attached_resource_config_modal_component__WEBPACK_IMPORTED_MODULE_40__.AttachedResourceConfigModalComponent, _available_rooms_state_modal_component__WEBPACK_IMPORTED_MODULE_42__.AvailableRoomsStateModalComponent, _desk_height_presets_component__WEBPACK_IMPORTED_MODULE_51__.DeskHeightPresetsComponent];
const DIRECTIVES = [_binding_directive__WEBPACK_IMPORTED_MODULE_0__.BindingDirective, _authenticated_image_directive__WEBPACK_IMPORTED_MODULE_34__.AuthenticatedImageDirective, _limit_input_directive__WEBPACK_IMPORTED_MODULE_50__.LimitInputDirective];
class ComponentsModule {
  static #_ = this.ɵfac = function ComponentsModule_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || ComponentsModule)();
  };
  static #_2 = this.ɵmod = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_76__["ɵɵdefineNgModule"]({
    type: ComponentsModule
  });
  static #_3 = this.ɵinj = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_76__["ɵɵdefineInjector"]({
    providers: [{
      provide: _interactive_map_component__WEBPACK_IMPORTED_MODULE_6__.MAP_FEATURE_DATA,
      useValue: {}
    }, (0,_angular_common_http__WEBPACK_IMPORTED_MODULE_77__.provideHttpClient)((0,_angular_common_http__WEBPACK_IMPORTED_MODULE_77__.withInterceptorsFromDi)())],
    imports: [_angular_common__WEBPACK_IMPORTED_MODULE_78__.CommonModule, _angular_forms__WEBPACK_IMPORTED_MODULE_79__.FormsModule, _angular_forms__WEBPACK_IMPORTED_MODULE_79__.ReactiveFormsModule, _ngx_translate_core__WEBPACK_IMPORTED_MODULE_80__.TranslateModule.forChild(), MAT_MODULES, _angular_material_autocomplete__WEBPACK_IMPORTED_MODULE_54__.MatAutocompleteModule, _angular_material_menu__WEBPACK_IMPORTED_MODULE_55__.MatMenuModule, _angular_material_form_field__WEBPACK_IMPORTED_MODULE_56__.MatFormFieldModule, _angular_material_select__WEBPACK_IMPORTED_MODULE_57__.MatSelectModule, _angular_material_core__WEBPACK_IMPORTED_MODULE_58__.MatRippleModule, _angular_material_autocomplete__WEBPACK_IMPORTED_MODULE_54__.MatAutocompleteModule, _angular_material_select__WEBPACK_IMPORTED_MODULE_57__.MatSelectModule, _angular_material_dialog__WEBPACK_IMPORTED_MODULE_59__.MatDialogModule, _angular_material_datepicker__WEBPACK_IMPORTED_MODULE_60__.MatDatepickerModule, _angular_material_input__WEBPACK_IMPORTED_MODULE_61__.MatInputModule, _angular_cdk_clipboard__WEBPACK_IMPORTED_MODULE_62__.ClipboardModule, _angular_material_progress_spinner__WEBPACK_IMPORTED_MODULE_63__.MatProgressSpinnerModule, _angular_material_chips__WEBPACK_IMPORTED_MODULE_64__.MatChipsModule, _angular_material_paginator__WEBPACK_IMPORTED_MODULE_65__.MatPaginatorModule, _angular_cdk_table__WEBPACK_IMPORTED_MODULE_66__.CdkTableModule, _angular_cdk_portal__WEBPACK_IMPORTED_MODULE_67__.PortalModule, _angular_material_sort__WEBPACK_IMPORTED_MODULE_68__.MatSortModule, _angular_cdk_scrolling__WEBPACK_IMPORTED_MODULE_69__.ScrollingModule, _angular_material_tooltip__WEBPACK_IMPORTED_MODULE_70__.MatTooltipModule, _angular_material_checkbox__WEBPACK_IMPORTED_MODULE_71__.MatCheckboxModule, _angular_material_radio__WEBPACK_IMPORTED_MODULE_72__.MatRadioModule, _angular_material_slider__WEBPACK_IMPORTED_MODULE_73__.MatSliderModule, _angular_material_slide_toggle__WEBPACK_IMPORTED_MODULE_74__.MatSlideToggleModule, _angular_material_button_toggle__WEBPACK_IMPORTED_MODULE_75__.MatButtonToggleModule, _ngx_translate_core__WEBPACK_IMPORTED_MODULE_80__.TranslateModule]
  });
}
(function () {
  (typeof ngJitMode === "undefined" || ngJitMode) && _angular_core__WEBPACK_IMPORTED_MODULE_76__["ɵɵsetNgModuleScope"](ComponentsModule, {
    declarations: [_action_icon_component__WEBPACK_IMPORTED_MODULE_1__.ActionIconComponent, _icon_component__WEBPACK_IMPORTED_MODULE_2__.IconComponent, _popout_menu_component__WEBPACK_IMPORTED_MODULE_3__.PopoutMenuComponent, _user_avatar_component__WEBPACK_IMPORTED_MODULE_4__.UserAvatarComponent, _confirm_modal_component__WEBPACK_IMPORTED_MODULE_5__.ConfirmModalComponent, _interactive_map_component__WEBPACK_IMPORTED_MODULE_6__.InteractiveMapComponent, _map_renderer_component__WEBPACK_IMPORTED_MODULE_45__.MapRendererComponent, _maps_indoors_component__WEBPACK_IMPORTED_MODULE_46__.MapsIndoorsComponent, _map_pin_component__WEBPACK_IMPORTED_MODULE_7__.MapPinComponent, _map_radius_component__WEBPACK_IMPORTED_MODULE_8__.MapRadiusComponent, _map_polygon_component__WEBPACK_IMPORTED_MODULE_17__.MapPolygonComponent, _map_canvas_component__WEBPACK_IMPORTED_MODULE_47__.MapCanvasComponent, _indoor_maps_component__WEBPACK_IMPORTED_MODULE_36__.IndoorMapsComponent, _status_overlay_component__WEBPACK_IMPORTED_MODULE_9__.StatusOverlayComponent, _custom_table_component__WEBPACK_IMPORTED_MODULE_13__.CustomTableComponent, _custom_tooltip_component__WEBPACK_IMPORTED_MODULE_14__.CustomTooltipComponent, _virtual_keyboard_component__WEBPACK_IMPORTED_MODULE_15__.VirtualKeyboardComponent, _global_loading_component__WEBPACK_IMPORTED_MODULE_16__.GlobalLoadingComponent, _global_banner_component__WEBPACK_IMPORTED_MODULE_18__.GlobalBannerComponent, _map_locate_modal_component__WEBPACK_IMPORTED_MODULE_19__.MapLocateModalComponent, _image_carousel_component__WEBPACK_IMPORTED_MODULE_20__.ImageCarouselComponent, _redirect_component__WEBPACK_IMPORTED_MODULE_22__.RedirectComponent, _debug_console_component__WEBPACK_IMPORTED_MODULE_23__.DebugConsoleComponent, _json_display_component__WEBPACK_IMPORTED_MODULE_24__.JsonDisplayComponent, _changelog_modal_component__WEBPACK_IMPORTED_MODULE_25__.ChangelogModalComponent, _status_pill_component__WEBPACK_IMPORTED_MODULE_41__.StatusPillComponent, _image_viewer_component__WEBPACK_IMPORTED_MODULE_48__.ImageViewerComponent, _simple_table_component__WEBPACK_IMPORTED_MODULE_49__.SimpleTableComponent, _work_location_tooltip_component__WEBPACK_IMPORTED_MODULE_52__.WorkLocationTooltipComponent, _fixed_pipe__WEBPACK_IMPORTED_MODULE_10__.FixedPipe, _safe_pipe__WEBPACK_IMPORTED_MODULE_11__.SafePipe, _sanitise_pipe__WEBPACK_IMPORTED_MODULE_12__.SanitizePipe, _duration_pipe__WEBPACK_IMPORTED_MODULE_21__.DurationPipe, _level_pipe__WEBPACK_IMPORTED_MODULE_26__.LevelPipe, _building_pipe__WEBPACK_IMPORTED_MODULE_27__.BuildingPipe, _date_from_pipe__WEBPACK_IMPORTED_MODULE_39__.DateFromPipe, _media_duration_pipe__WEBPACK_IMPORTED_MODULE_43__.MediaDurationPipe, _thumbnail_pipe__WEBPACK_IMPORTED_MODULE_44__.ThumbnailPipe, _zone_pipe__WEBPACK_IMPORTED_MODULE_53__.ZonePipe, _user_controls_component__WEBPACK_IMPORTED_MODULE_28__.UserControlsComponent, _building_select_component__WEBPACK_IMPORTED_MODULE_29__.BuildingSelectComponent, _region_select_component__WEBPACK_IMPORTED_MODULE_30__.RegionSelectComponent, _help_tooltip_component__WEBPACK_IMPORTED_MODULE_31__.HelpTooltipComponent, _accessibility_tooltip_component__WEBPACK_IMPORTED_MODULE_32__.AccessibilityTooltipComponent, _language_tooltip_component__WEBPACK_IMPORTED_MODULE_33__.LanguageSelectComponent, _upload_permissions_modal_component__WEBPACK_IMPORTED_MODULE_35__.UploadPermissionsModalComponent, _printable_component__WEBPACK_IMPORTED_MODULE_37__.PrintableComponent, _chat_chat_component__WEBPACK_IMPORTED_MODULE_38__.ChatComponent, _attached_resource_config_modal_component__WEBPACK_IMPORTED_MODULE_40__.AttachedResourceConfigModalComponent, _available_rooms_state_modal_component__WEBPACK_IMPORTED_MODULE_42__.AvailableRoomsStateModalComponent, _desk_height_presets_component__WEBPACK_IMPORTED_MODULE_51__.DeskHeightPresetsComponent, _binding_directive__WEBPACK_IMPORTED_MODULE_0__.BindingDirective, _authenticated_image_directive__WEBPACK_IMPORTED_MODULE_34__.AuthenticatedImageDirective, _limit_input_directive__WEBPACK_IMPORTED_MODULE_50__.LimitInputDirective],
    imports: [_angular_common__WEBPACK_IMPORTED_MODULE_78__.CommonModule, _angular_forms__WEBPACK_IMPORTED_MODULE_79__.FormsModule, _angular_forms__WEBPACK_IMPORTED_MODULE_79__.ReactiveFormsModule, _ngx_translate_core__WEBPACK_IMPORTED_MODULE_80__.TranslateModule, _angular_material_autocomplete__WEBPACK_IMPORTED_MODULE_54__.MatAutocompleteModule, _angular_material_menu__WEBPACK_IMPORTED_MODULE_55__.MatMenuModule, _angular_material_form_field__WEBPACK_IMPORTED_MODULE_56__.MatFormFieldModule, _angular_material_select__WEBPACK_IMPORTED_MODULE_57__.MatSelectModule, _angular_material_core__WEBPACK_IMPORTED_MODULE_58__.MatRippleModule, _angular_material_autocomplete__WEBPACK_IMPORTED_MODULE_54__.MatAutocompleteModule, _angular_material_select__WEBPACK_IMPORTED_MODULE_57__.MatSelectModule, _angular_material_dialog__WEBPACK_IMPORTED_MODULE_59__.MatDialogModule, _angular_material_datepicker__WEBPACK_IMPORTED_MODULE_60__.MatDatepickerModule, _angular_material_input__WEBPACK_IMPORTED_MODULE_61__.MatInputModule, _angular_cdk_clipboard__WEBPACK_IMPORTED_MODULE_62__.ClipboardModule, _angular_material_progress_spinner__WEBPACK_IMPORTED_MODULE_63__.MatProgressSpinnerModule, _angular_material_chips__WEBPACK_IMPORTED_MODULE_64__.MatChipsModule, _angular_material_paginator__WEBPACK_IMPORTED_MODULE_65__.MatPaginatorModule, _angular_cdk_table__WEBPACK_IMPORTED_MODULE_66__.CdkTableModule, _angular_cdk_portal__WEBPACK_IMPORTED_MODULE_67__.PortalModule, _angular_material_sort__WEBPACK_IMPORTED_MODULE_68__.MatSortModule, _angular_cdk_scrolling__WEBPACK_IMPORTED_MODULE_69__.ScrollingModule, _angular_material_tooltip__WEBPACK_IMPORTED_MODULE_70__.MatTooltipModule, _angular_material_checkbox__WEBPACK_IMPORTED_MODULE_71__.MatCheckboxModule, _angular_material_radio__WEBPACK_IMPORTED_MODULE_72__.MatRadioModule, _angular_material_slider__WEBPACK_IMPORTED_MODULE_73__.MatSliderModule, _angular_material_slide_toggle__WEBPACK_IMPORTED_MODULE_74__.MatSlideToggleModule, _angular_material_button_toggle__WEBPACK_IMPORTED_MODULE_75__.MatButtonToggleModule],
    exports: [_action_icon_component__WEBPACK_IMPORTED_MODULE_1__.ActionIconComponent, _icon_component__WEBPACK_IMPORTED_MODULE_2__.IconComponent, _popout_menu_component__WEBPACK_IMPORTED_MODULE_3__.PopoutMenuComponent, _user_avatar_component__WEBPACK_IMPORTED_MODULE_4__.UserAvatarComponent, _confirm_modal_component__WEBPACK_IMPORTED_MODULE_5__.ConfirmModalComponent, _interactive_map_component__WEBPACK_IMPORTED_MODULE_6__.InteractiveMapComponent, _map_renderer_component__WEBPACK_IMPORTED_MODULE_45__.MapRendererComponent, _maps_indoors_component__WEBPACK_IMPORTED_MODULE_46__.MapsIndoorsComponent, _map_pin_component__WEBPACK_IMPORTED_MODULE_7__.MapPinComponent, _map_radius_component__WEBPACK_IMPORTED_MODULE_8__.MapRadiusComponent, _map_polygon_component__WEBPACK_IMPORTED_MODULE_17__.MapPolygonComponent, _map_canvas_component__WEBPACK_IMPORTED_MODULE_47__.MapCanvasComponent, _indoor_maps_component__WEBPACK_IMPORTED_MODULE_36__.IndoorMapsComponent, _status_overlay_component__WEBPACK_IMPORTED_MODULE_9__.StatusOverlayComponent, _custom_table_component__WEBPACK_IMPORTED_MODULE_13__.CustomTableComponent, _custom_tooltip_component__WEBPACK_IMPORTED_MODULE_14__.CustomTooltipComponent, _virtual_keyboard_component__WEBPACK_IMPORTED_MODULE_15__.VirtualKeyboardComponent, _global_loading_component__WEBPACK_IMPORTED_MODULE_16__.GlobalLoadingComponent, _global_banner_component__WEBPACK_IMPORTED_MODULE_18__.GlobalBannerComponent, _map_locate_modal_component__WEBPACK_IMPORTED_MODULE_19__.MapLocateModalComponent, _image_carousel_component__WEBPACK_IMPORTED_MODULE_20__.ImageCarouselComponent, _redirect_component__WEBPACK_IMPORTED_MODULE_22__.RedirectComponent, _debug_console_component__WEBPACK_IMPORTED_MODULE_23__.DebugConsoleComponent, _json_display_component__WEBPACK_IMPORTED_MODULE_24__.JsonDisplayComponent, _changelog_modal_component__WEBPACK_IMPORTED_MODULE_25__.ChangelogModalComponent, _status_pill_component__WEBPACK_IMPORTED_MODULE_41__.StatusPillComponent, _image_viewer_component__WEBPACK_IMPORTED_MODULE_48__.ImageViewerComponent, _simple_table_component__WEBPACK_IMPORTED_MODULE_49__.SimpleTableComponent, _work_location_tooltip_component__WEBPACK_IMPORTED_MODULE_52__.WorkLocationTooltipComponent, _fixed_pipe__WEBPACK_IMPORTED_MODULE_10__.FixedPipe, _safe_pipe__WEBPACK_IMPORTED_MODULE_11__.SafePipe, _sanitise_pipe__WEBPACK_IMPORTED_MODULE_12__.SanitizePipe, _duration_pipe__WEBPACK_IMPORTED_MODULE_21__.DurationPipe, _level_pipe__WEBPACK_IMPORTED_MODULE_26__.LevelPipe, _building_pipe__WEBPACK_IMPORTED_MODULE_27__.BuildingPipe, _date_from_pipe__WEBPACK_IMPORTED_MODULE_39__.DateFromPipe, _media_duration_pipe__WEBPACK_IMPORTED_MODULE_43__.MediaDurationPipe, _thumbnail_pipe__WEBPACK_IMPORTED_MODULE_44__.ThumbnailPipe, _zone_pipe__WEBPACK_IMPORTED_MODULE_53__.ZonePipe, _user_controls_component__WEBPACK_IMPORTED_MODULE_28__.UserControlsComponent, _building_select_component__WEBPACK_IMPORTED_MODULE_29__.BuildingSelectComponent, _region_select_component__WEBPACK_IMPORTED_MODULE_30__.RegionSelectComponent, _help_tooltip_component__WEBPACK_IMPORTED_MODULE_31__.HelpTooltipComponent, _accessibility_tooltip_component__WEBPACK_IMPORTED_MODULE_32__.AccessibilityTooltipComponent, _language_tooltip_component__WEBPACK_IMPORTED_MODULE_33__.LanguageSelectComponent, _upload_permissions_modal_component__WEBPACK_IMPORTED_MODULE_35__.UploadPermissionsModalComponent, _printable_component__WEBPACK_IMPORTED_MODULE_37__.PrintableComponent, _chat_chat_component__WEBPACK_IMPORTED_MODULE_38__.ChatComponent, _attached_resource_config_modal_component__WEBPACK_IMPORTED_MODULE_40__.AttachedResourceConfigModalComponent, _available_rooms_state_modal_component__WEBPACK_IMPORTED_MODULE_42__.AvailableRoomsStateModalComponent, _desk_height_presets_component__WEBPACK_IMPORTED_MODULE_51__.DeskHeightPresetsComponent, _binding_directive__WEBPACK_IMPORTED_MODULE_0__.BindingDirective, _authenticated_image_directive__WEBPACK_IMPORTED_MODULE_34__.AuthenticatedImageDirective, _limit_input_directive__WEBPACK_IMPORTED_MODULE_50__.LimitInputDirective, _angular_material_autocomplete__WEBPACK_IMPORTED_MODULE_54__.MatAutocompleteModule, _angular_material_menu__WEBPACK_IMPORTED_MODULE_55__.MatMenuModule, _angular_material_form_field__WEBPACK_IMPORTED_MODULE_56__.MatFormFieldModule, _angular_material_select__WEBPACK_IMPORTED_MODULE_57__.MatSelectModule, _angular_material_core__WEBPACK_IMPORTED_MODULE_58__.MatRippleModule, _angular_material_autocomplete__WEBPACK_IMPORTED_MODULE_54__.MatAutocompleteModule, _angular_material_select__WEBPACK_IMPORTED_MODULE_57__.MatSelectModule, _angular_material_dialog__WEBPACK_IMPORTED_MODULE_59__.MatDialogModule, _angular_material_datepicker__WEBPACK_IMPORTED_MODULE_60__.MatDatepickerModule, _angular_material_input__WEBPACK_IMPORTED_MODULE_61__.MatInputModule, _angular_cdk_clipboard__WEBPACK_IMPORTED_MODULE_62__.ClipboardModule, _angular_material_progress_spinner__WEBPACK_IMPORTED_MODULE_63__.MatProgressSpinnerModule, _angular_material_chips__WEBPACK_IMPORTED_MODULE_64__.MatChipsModule, _angular_material_paginator__WEBPACK_IMPORTED_MODULE_65__.MatPaginatorModule, _angular_cdk_table__WEBPACK_IMPORTED_MODULE_66__.CdkTableModule, _angular_cdk_portal__WEBPACK_IMPORTED_MODULE_67__.PortalModule, _angular_material_sort__WEBPACK_IMPORTED_MODULE_68__.MatSortModule, _angular_cdk_scrolling__WEBPACK_IMPORTED_MODULE_69__.ScrollingModule, _angular_material_tooltip__WEBPACK_IMPORTED_MODULE_70__.MatTooltipModule, _angular_material_checkbox__WEBPACK_IMPORTED_MODULE_71__.MatCheckboxModule, _angular_material_radio__WEBPACK_IMPORTED_MODULE_72__.MatRadioModule, _angular_material_slider__WEBPACK_IMPORTED_MODULE_73__.MatSliderModule, _angular_material_slide_toggle__WEBPACK_IMPORTED_MODULE_74__.MatSlideToggleModule, _angular_material_button_toggle__WEBPACK_IMPORTED_MODULE_75__.MatButtonToggleModule, _ngx_translate_core__WEBPACK_IMPORTED_MODULE_80__.TranslateModule]
  });
})();
_angular_core__WEBPACK_IMPORTED_MODULE_76__["ɵɵsetComponentScope"](_user_avatar_component__WEBPACK_IMPORTED_MODULE_4__.UserAvatarComponent, function () {
  return [_angular_common__WEBPACK_IMPORTED_MODULE_78__.NgIf, _authenticated_image_directive__WEBPACK_IMPORTED_MODULE_34__.AuthenticatedImageDirective];
}, []);
_angular_core__WEBPACK_IMPORTED_MODULE_76__["ɵɵsetComponentScope"](_interactive_map_component__WEBPACK_IMPORTED_MODULE_6__.InteractiveMapComponent, function () {
  return [_angular_common__WEBPACK_IMPORTED_MODULE_78__.NgIf, _angular_material_core__WEBPACK_IMPORTED_MODULE_58__.MatRipple, _angular_material_tooltip__WEBPACK_IMPORTED_MODULE_70__.MatTooltip, _icon_component__WEBPACK_IMPORTED_MODULE_2__.IconComponent, _map_renderer_component__WEBPACK_IMPORTED_MODULE_45__.MapRendererComponent, _maps_indoors_component__WEBPACK_IMPORTED_MODULE_46__.MapsIndoorsComponent];
}, function () {
  return [_angular_common__WEBPACK_IMPORTED_MODULE_78__.AsyncPipe];
});
_angular_core__WEBPACK_IMPORTED_MODULE_76__["ɵɵsetComponentScope"](_map_locate_modal_component__WEBPACK_IMPORTED_MODULE_19__.MapLocateModalComponent, function () {
  return [_angular_common__WEBPACK_IMPORTED_MODULE_78__.NgIf, _angular_material_core__WEBPACK_IMPORTED_MODULE_58__.MatRipple, _angular_material_dialog__WEBPACK_IMPORTED_MODULE_59__.MatDialogClose, _angular_material_progress_spinner__WEBPACK_IMPORTED_MODULE_63__.MatProgressSpinner, _icon_component__WEBPACK_IMPORTED_MODULE_2__.IconComponent, _interactive_map_component__WEBPACK_IMPORTED_MODULE_6__.InteractiveMapComponent];
}, []);
_angular_core__WEBPACK_IMPORTED_MODULE_76__["ɵɵsetComponentScope"](_image_carousel_component__WEBPACK_IMPORTED_MODULE_20__.ImageCarouselComponent, function () {
  return [_angular_common__WEBPACK_IMPORTED_MODULE_78__.NgForOf, _angular_common__WEBPACK_IMPORTED_MODULE_78__.NgIf, _angular_material_core__WEBPACK_IMPORTED_MODULE_58__.MatRipple, _icon_component__WEBPACK_IMPORTED_MODULE_2__.IconComponent, _authenticated_image_directive__WEBPACK_IMPORTED_MODULE_34__.AuthenticatedImageDirective];
}, []);
_angular_core__WEBPACK_IMPORTED_MODULE_76__["ɵɵsetComponentScope"](_debug_console_component__WEBPACK_IMPORTED_MODULE_23__.DebugConsoleComponent, function () {
  return [_angular_common__WEBPACK_IMPORTED_MODULE_78__.NgForOf, _angular_common__WEBPACK_IMPORTED_MODULE_78__.NgIf, _angular_common__WEBPACK_IMPORTED_MODULE_78__.NgSwitch, _angular_common__WEBPACK_IMPORTED_MODULE_78__.NgSwitchCase, _angular_common__WEBPACK_IMPORTED_MODULE_78__.NgSwitchDefault, _angular_forms__WEBPACK_IMPORTED_MODULE_79__.DefaultValueAccessor, _angular_forms__WEBPACK_IMPORTED_MODULE_79__.NgControlStatus, _angular_forms__WEBPACK_IMPORTED_MODULE_79__.NgModel, _angular_material_core__WEBPACK_IMPORTED_MODULE_58__.MatRipple, _angular_cdk_scrolling__WEBPACK_IMPORTED_MODULE_69__.CdkFixedSizeVirtualScroll, _angular_cdk_scrolling__WEBPACK_IMPORTED_MODULE_69__.CdkVirtualForOf, _angular_cdk_scrolling__WEBPACK_IMPORTED_MODULE_69__.CdkVirtualScrollViewport, _icon_component__WEBPACK_IMPORTED_MODULE_2__.IconComponent, _custom_tooltip_component__WEBPACK_IMPORTED_MODULE_14__.CustomTooltipComponent];
}, function () {
  return [_angular_common__WEBPACK_IMPORTED_MODULE_78__.AsyncPipe, _angular_common__WEBPACK_IMPORTED_MODULE_78__.DatePipe, _sanitise_pipe__WEBPACK_IMPORTED_MODULE_12__.SanitizePipe];
});
_angular_core__WEBPACK_IMPORTED_MODULE_76__["ɵɵsetComponentScope"](_user_controls_component__WEBPACK_IMPORTED_MODULE_28__.UserControlsComponent, function () {
  return [_angular_common__WEBPACK_IMPORTED_MODULE_78__.NgIf, _angular_material_core__WEBPACK_IMPORTED_MODULE_58__.MatRipple, _angular_material_tooltip__WEBPACK_IMPORTED_MODULE_70__.MatTooltip, _icon_component__WEBPACK_IMPORTED_MODULE_2__.IconComponent, _user_avatar_component__WEBPACK_IMPORTED_MODULE_4__.UserAvatarComponent, _custom_tooltip_component__WEBPACK_IMPORTED_MODULE_14__.CustomTooltipComponent, _desk_height_presets_component__WEBPACK_IMPORTED_MODULE_51__.DeskHeightPresetsComponent];
}, function () {
  return [_angular_common__WEBPACK_IMPORTED_MODULE_78__.AsyncPipe, _angular_common__WEBPACK_IMPORTED_MODULE_78__.DatePipe, _ngx_translate_core__WEBPACK_IMPORTED_MODULE_80__.TranslatePipe];
});

/***/ }),

/***/ 30841:
/*!************************************************************!*\
  !*** ./libs/components/src/lib/confirm-modal.component.ts ***!
  \************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CONFIRM_METADATA: () => (/* binding */ CONFIRM_METADATA),
/* harmony export */   ConfirmModalComponent: () => (/* binding */ ConfirmModalComponent)
/* harmony export */ });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_material_dialog__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/material/dialog */ 12587);
/* harmony import */ var libs_common_src_lib_async_handler_class__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! libs/common/src/lib/async-handler.class */ 75354);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _angular_material_core__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/material/core */ 74646);
/* harmony import */ var _angular_material_progress_spinner__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @angular/material/progress-spinner */ 41134);
/* harmony import */ var _icon_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./icon.component */ 69434);









function ConfirmModalComponent_main_3_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](0, "main", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelement"](1, "app-icon", 6)(2, "p", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("icon", ctx_r0.icon);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("innerHTML", ctx_r0.content, _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵsanitizeHtml"]);
  }
}
function ConfirmModalComponent_footer_4_Template(rf, ctx) {
  if (rf & 1) {
    const _r2 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](0, "footer", 8)(1, "button", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](3, "button", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵlistener"]("click", function ConfirmModalComponent_footer_4_Template_button_click_3_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵrestoreView"](_r2);
      const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵresetView"](ctx_r0.onConfirm());
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtextInterpolate1"](" ", ctx_r0.cancel_text, " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtextInterpolate1"](" ", ctx_r0.confirm_text, " ");
  }
}
function ConfirmModalComponent_ng_template_5_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](0, "main", 11)(1, "div", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelement"](2, "mat-spinner", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](3, "p");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]()()();
  }
  if (rf & 2) {
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtextInterpolate"](ctx_r0.loading);
  }
}
const CONFIRM_METADATA = {
  height: 'auto',
  width: '28em',
  maxHeight: 'calc(100vh - 2em)',
  maxWidth: 'calc(100vw - 2em)'
};
class ConfirmModalComponent extends libs_common_src_lib_async_handler_class__WEBPACK_IMPORTED_MODULE_0__.AsyncHandler {
  constructor(_dialog_ref, _data) {
    super();
    this._dialog_ref = _dialog_ref;
    this._data = _data;
    /** Emitter for user action on the modal */
    this.event = new _angular_core__WEBPACK_IMPORTED_MODULE_2__.EventEmitter();
    /** Title of the confirm modal */
    this.title = this._data.title || 'Confirm';
    /** Body of the confirm modal */
    this.content = this._data.content || 'Are you sure?';
    /** Display text on the confirm button */
    this.confirm_text = this._data.confirm_text || 'Accept';
    /** Display text on the cancel button */
    this.cancel_text = this._data.cancel_text || 'Cancel';
    /** Display icon properties */
    this.icon = this._data.icon || {
      class: 'material-icons',
      content: 'done'
    };
    /** Prevent user from closing the modal */
    this.disableClose = () => this._dialog_ref.disableClose = true;
    /** Allow the user to close the modal */
    this.enableClose = () => this._dialog_ref.disableClose = false;
  }
  ngOnInit() {
    if (this._data.close_delay) {
      this.timeout('close', () => this._dialog_ref.close(), this._data.close_delay);
    }
  }
  /** User confirmation of the content of the modal */
  onConfirm() {
    this.event.emit({
      reason: 'done'
    });
  }
  static #_ = this.ɵfac = function ConfirmModalComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || ConfirmModalComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdirectiveInject"](_angular_material_dialog__WEBPACK_IMPORTED_MODULE_3__.MatDialogRef), _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdirectiveInject"](_angular_material_dialog__WEBPACK_IMPORTED_MODULE_3__.MAT_DIALOG_DATA));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdefineComponent"]({
    type: ConfirmModalComponent,
    selectors: [["confirm-modal"]],
    outputs: {
      event: "event"
    },
    features: [_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵInheritDefinitionFeature"]],
    decls: 7,
    vars: 4,
    consts: [["load_state", ""], [1, "px-4", "py-3"], [1, "font-medium", "text-xl"], ["class", "flex flex-col items-center space-y-4 p-4 max-w-[80vw]", 4, "ngIf", "ngIfElse"], ["class", "flex items-center justify-center p-4 space-x-4", 4, "ngIf"], [1, "flex", "flex-col", "items-center", "space-y-4", "p-4", "max-w-[80vw]"], [1, "text-5xl", 3, "icon"], ["content", "", 1, "text-center", 3, "innerHTML"], [1, "flex", "items-center", "justify-center", "p-4", "space-x-4"], ["btn", "", "matRipple", "", "mat-dialog-close", "", 1, "inverse", "flex-1"], ["btn", "", "matRipple", "", "name", "accept", 1, "flex-1", 3, "click"], ["loading", ""], [1, "w-full", "h-48", "flex", "flex-col", "items-center", "justify-center", "space-y-4"], ["diameter", "32"]],
    template: function ConfirmModalComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](0, "header", 1)(1, "h3", 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](3, ConfirmModalComponent_main_3_Template, 3, 2, "main", 3)(4, ConfirmModalComponent_footer_4_Template, 5, 2, "footer", 4)(5, ConfirmModalComponent_ng_template_5_Template, 5, 1, "ng-template", null, 0, _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplateRefExtractor"]);
      }
      if (rf & 2) {
        const load_state_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵreference"](6);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtextInterpolate"](ctx.title);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngIf", !ctx.loading)("ngIfElse", load_state_r3);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngIf", !ctx.loading);
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_4__.NgIf, _angular_material_core__WEBPACK_IMPORTED_MODULE_5__.MatRipple, _angular_material_dialog__WEBPACK_IMPORTED_MODULE_3__.MatDialogClose, _angular_material_progress_spinner__WEBPACK_IMPORTED_MODULE_6__.MatProgressSpinner, _icon_component__WEBPACK_IMPORTED_MODULE_1__.IconComponent]
  });
}

/***/ }),

/***/ 12993:
/*!***********************************************************!*\
  !*** ./libs/components/src/lib/custom-table.component.ts ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CustomTableComponent: () => (/* binding */ CustomTableComponent)
/* harmony export */ });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_material_paginator__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/material/paginator */ 24624);
/* harmony import */ var _angular_material_sort__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/material/sort */ 22047);
/* harmony import */ var _angular_material_table__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/material/table */ 77697);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! rxjs */ 67498);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _angular_cdk_table__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @angular/cdk/table */ 90198);











const _c0 = (a0, a1, a2, a3, a4, a5, a6) => ({
  first: a0,
  last: a1,
  index: a2,
  data: a3,
  row: a4,
  key: a5,
  name: a6
});
function CustomTableComponent_ng_container_1_div_2_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    const column_r2 = ctx_r0.$implicit;
    const i_r3 = ctx_r0.index;
    const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵstyleProp"]("width", (ctx_r3.column_size[i_r3] || "8") + "em")("flex", ctx_r3.column_size[i_r3] === "flex" ? "1" : "");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate1"](" ", ctx_r3.display_column[i_r3] || column_r2, " ");
  }
}
function CustomTableComponent_ng_container_1_div_3_ng_container_1_ng_container_1_span_2_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "span", 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](1, " N/A ");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
  }
}
function CustomTableComponent_ng_container_1_div_3_ng_container_1_ng_container_1_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](2, CustomTableComponent_ng_container_1_div_3_ng_container_1_ng_container_1_span_2_Template, 2, 0, "span", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
  }
  if (rf & 2) {
    const row_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2).$implicit;
    const column_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]().$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate"](row_r5[column_r2]);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", row_r5[column_r2] == null || row_r5[column_r2] === "");
  }
}
function CustomTableComponent_ng_container_1_div_3_ng_container_1_ng_template_2_ng_container_0_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainer"](0);
  }
}
function CustomTableComponent_ng_container_1_div_3_ng_container_1_ng_template_2_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](0, CustomTableComponent_ng_container_1_div_3_ng_container_1_ng_template_2_ng_container_0_Template, 1, 0, "ng-container", 17);
  }
  if (rf & 2) {
    const ctx_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2);
    const row_r5 = ctx_r5.$implicit;
    const idx_r7 = ctx_r5.index;
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    const column_r2 = ctx_r0.$implicit;
    const i_r3 = ctx_r0.index;
    const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngTemplateOutlet", ctx_r3.template[column_r2])("ngTemplateOutletContext", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpureFunction7"](2, _c0, idx_r7 === 0, idx_r7 === ctx_r3.data_source.data.length - 1 || idx_r7 === ctx_r3.data_source.length - 1, i_r3, row_r5[column_r2], row_r5, column_r2, ctx_r3.display_column[i_r3] || column_r2));
  }
}
function CustomTableComponent_ng_container_1_div_3_ng_container_1_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](1, CustomTableComponent_ng_container_1_div_3_ng_container_1_ng_container_1_Template, 3, 2, "ng-container", 14)(2, CustomTableComponent_ng_container_1_div_3_ng_container_1_ng_template_2_Template, 1, 10, "ng-template", null, 1, _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplateRefExtractor"]);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
  }
  if (rf & 2) {
    const cell_outlet_r8 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵreference"](3);
    const column_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2).$implicit;
    const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", !ctx_r3.template[column_r2])("ngIfElse", cell_outlet_r8);
  }
}
function CustomTableComponent_ng_container_1_div_3_ng_template_2_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const idx_r7 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]().index;
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate"](idx_r7 + 1);
  }
}
function CustomTableComponent_ng_container_1_div_3_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](1, CustomTableComponent_ng_container_1_div_3_ng_container_1_Template, 4, 2, "ng-container", 14)(2, CustomTableComponent_ng_container_1_div_3_ng_template_2_Template, 2, 1, "ng-template", null, 0, _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplateRefExtractor"]);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const index_outlet_r9 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵreference"](3);
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    const column_r2 = ctx_r0.$implicit;
    const i_r3 = ctx_r0.index;
    const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵstyleProp"]("width", (ctx_r3.column_size[i_r3] || "8") + "em")("flex", ctx_r3.column_size[i_r3] === "flex" ? "1" : "");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", column_r2 !== "_index")("ngIfElse", index_outlet_r9);
  }
}
function CustomTableComponent_ng_container_1_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0)(1, 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](2, CustomTableComponent_ng_container_1_div_2_Template, 2, 5, "div", 10)(3, CustomTableComponent_ng_container_1_div_3_Template, 4, 6, "div", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]()();
  }
  if (rf & 2) {
    const column_r2 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("cdkColumnDef", column_r2);
  }
}
function CustomTableComponent_cdk_header_row_2_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](0, "cdk-header-row", 19);
  }
}
function CustomTableComponent_cdk_row_3_Template(rf, ctx) {
  if (rf & 1) {
    const _r10 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "cdk-row", 20);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function CustomTableComponent_cdk_row_3_Template_cdk_row_click_0_listener() {
      const row_r11 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r10).$implicit;
      const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵresetView"](ctx_r3.row_clicked.emit(row_r11));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
  }
}
function CustomTableComponent_ng_template_4_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "p", 21);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate1"](" ", ctx_r3.empty || "No data to display", " ");
  }
}
class CustomTableComponent extends _placeos_common__WEBPACK_IMPORTED_MODULE_0__.AsyncHandler {
  constructor() {
    super(...arguments);
    /** Whether table should use pagination */
    this.pagination = false;
    /** Number of items to display on pagination pages */
    this.page_size = 7;
    /** Size of the columns in em or flex for a flexible size */
    this.column_size = [];
    /** Displayed value when the table is empty */
    this.template = {};
    /** Emitter for when a row is clicked */
    this.row_clicked = new _angular_core__WEBPACK_IMPORTED_MODULE_1__.EventEmitter();
    /** List of items to display in the table */
    this.data_source = new _angular_material_table__WEBPACK_IMPORTED_MODULE_2__.MatTableDataSource([]);
  }
  ngAfterViewInit() {
    this.data_source.sort = this._sort;
    this.data_source.paginator = this.pagination ? this._paginator : null;
    this.data_source.filterPredicate = (i, s) => {
      for (const key in i) {
        if (typeof i[key] === 'string' && i[key].toLowerCase().includes(s.toLowerCase())) {
          return true;
        } else if (i[key] === s) {
          return true;
        }
      }
      return false;
    };
  }
  ngOnChanges(changes) {
    if (changes.dataSource && this.dataSource) {
      if (this.dataSource instanceof rxjs__WEBPACK_IMPORTED_MODULE_3__.Observable) {
        this.subscription('data', this.dataSource.subscribe(data => this.data_source.data = data));
      } else {
        this.data_source.data = this.dataSource;
      }
    }
    if (changes.pagination) {
      this.data_source.paginator = this.pagination ? this._paginator : null;
    }
    if (changes.filter) {
      this.data_source.filter = (this.filter || '').trim().toLowerCase();
    }
    if (changes.columns && this.columns) {
      this.display_column = this.columns.map((_, idx) => (this.display_column || [])[idx] || _.split('_').join(' '));
    }
    if (!this.column_size) {
      this.column_size = [];
    }
    if (changes.reset_page && this.reset_page !== changes.reset_page.previousValue) {
      this._paginator?.firstPage();
    }
  }
  static #_ = this.ɵfac = /*@__PURE__*/(() => {
    let ɵCustomTableComponent_BaseFactory;
    return function CustomTableComponent_Factory(__ngFactoryType__) {
      return (ɵCustomTableComponent_BaseFactory || (ɵCustomTableComponent_BaseFactory = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵgetInheritedFactory"](CustomTableComponent)))(__ngFactoryType__ || CustomTableComponent);
    };
  })();
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdefineComponent"]({
    type: CustomTableComponent,
    selectors: [["custom-table"]],
    viewQuery: function CustomTableComponent_Query(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵviewQuery"](_angular_material_paginator__WEBPACK_IMPORTED_MODULE_4__.MatPaginator, 5);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵviewQuery"](_angular_material_sort__WEBPACK_IMPORTED_MODULE_5__.MatSort, 5);
      }
      if (rf & 2) {
        let _t;
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵloadQuery"]()) && (ctx._paginator = _t.first);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵloadQuery"]()) && (ctx._sort = _t.first);
      }
    },
    inputs: {
      dataSource: "dataSource",
      pagination: "pagination",
      page_size: "page_size",
      filter: "filter",
      display_column: "display_column",
      columns: "columns",
      column_size: "column_size",
      empty: "empty",
      template: "template",
      reset_page: "reset_page"
    },
    outputs: {
      row_clicked: "row_clicked"
    },
    features: [_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵInheritDefinitionFeature"], _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵNgOnChangesFeature"]],
    decls: 7,
    vars: 8,
    consts: [["index_outlet", ""], ["cell_outlet", ""], ["matSort", "", 1, "block", "border", "border-base-200", "divide-y", "divide-base-200", "text-sm", 3, "dataSource"], [4, "ngFor", "ngForOf"], ["class", "sticky flex items-center bg-base-100 top-0 z-10", 4, "cdkHeaderRowDef"], ["row", "", "class", "flex z-0 relative hover:bg-neutral:bg-base-100/5 divide-x divide-base-200", 3, "click", 4, "cdkRowDef", "cdkRowDefColumns"], ["cdkNoDataRow", ""], ["footer", "", 3, "hidden"], [3, "pageSize", "hidePageSize", "showFirstLastButtons"], [3, "cdkColumnDef"], ["cdk-header-cell", "", "class", "capitalize p-2 h-12 bg-base-300 flex items-center", "mat-sort-header", "", 3, "width", "flex", 4, "cdkHeaderCellDef"], ["cdk-cell", "", "class", "p-2 truncate flex items-center", 3, "width", "flex", 4, "cdkCellDef"], ["cdk-header-cell", "", "mat-sort-header", "", 1, "capitalize", "p-2", "h-12", "bg-base-300", "flex", "items-center"], ["cdk-cell", "", 1, "p-2", "truncate", "flex", "items-center"], [4, "ngIf", "ngIfElse"], ["class", "opacity-30", 4, "ngIf"], [1, "opacity-30"], [4, "ngTemplateOutlet", "ngTemplateOutletContext"], [1, "w-full", "text-center"], [1, "sticky", "flex", "items-center", "bg-base-100", "top-0", "z-10"], ["row", "", 1, "flex", "z-0", "relative", "hover:bg-neutral:bg-base-100/5", "divide-x", "divide-base-200", 3, "click"], [1, "w-full", "p-4", "text-center", "opacity-30"]],
    template: function CustomTableComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "cdk-table", 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](1, CustomTableComponent_ng_container_1_Template, 4, 1, "ng-container", 3)(2, CustomTableComponent_cdk_header_row_2_Template, 1, 0, "cdk-header-row", 4)(3, CustomTableComponent_cdk_row_3_Template, 1, 0, "cdk-row", 5)(4, CustomTableComponent_ng_template_4_Template, 2, 1, "ng-template", 6);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](5, "div", 7);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](6, "mat-paginator", 8);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
      }
      if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("dataSource", ctx.data_source);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngForOf", ctx.columns);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("cdkHeaderRowDef", ctx.columns);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("cdkRowDefColumns", ctx.columns);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("hidden", !ctx.pagination);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("pageSize", ctx.page_size)("hidePageSize", true)("showFirstLastButtons", true);
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_6__.NgForOf, _angular_common__WEBPACK_IMPORTED_MODULE_6__.NgIf, _angular_common__WEBPACK_IMPORTED_MODULE_6__.NgTemplateOutlet, _angular_material_paginator__WEBPACK_IMPORTED_MODULE_4__.MatPaginator, _angular_cdk_table__WEBPACK_IMPORTED_MODULE_7__.CdkTable, _angular_cdk_table__WEBPACK_IMPORTED_MODULE_7__.CdkRowDef, _angular_cdk_table__WEBPACK_IMPORTED_MODULE_7__.CdkCellDef, _angular_cdk_table__WEBPACK_IMPORTED_MODULE_7__.CdkHeaderCellDef, _angular_cdk_table__WEBPACK_IMPORTED_MODULE_7__.CdkColumnDef, _angular_cdk_table__WEBPACK_IMPORTED_MODULE_7__.CdkRow, _angular_cdk_table__WEBPACK_IMPORTED_MODULE_7__.CdkHeaderRow, _angular_cdk_table__WEBPACK_IMPORTED_MODULE_7__.CdkHeaderRowDef, _angular_cdk_table__WEBPACK_IMPORTED_MODULE_7__.CdkNoDataRow, _angular_material_sort__WEBPACK_IMPORTED_MODULE_5__.MatSort, _angular_material_sort__WEBPACK_IMPORTED_MODULE_5__.MatSortHeader],
    styles: ["cdk-header-row[_ngcontent-%COMP%] {\n                font-weight: 500;\n                text-transform: capitalize;\n                min-height: 3rem;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImN1c3RvbS10YWJsZS5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLGdCQUFnQjtnQkFDaEIsMEJBQTBCO2dCQUMxQixnQkFBZ0I7WUFDcEIiLCJmaWxlIjoiY3VzdG9tLXRhYmxlLmNvbXBvbmVudC50cyIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgY2RrLWhlYWRlci1yb3cge1xuICAgICAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gICAgICAgICAgICAgICAgdGV4dC10cmFuc2Zvcm06IGNhcGl0YWxpemU7XG4gICAgICAgICAgICAgICAgbWluLWhlaWdodDogM3JlbTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl19 */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvY29tcG9uZW50cy9zcmMvbGliL2N1c3RvbS10YWJsZS5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLGdCQUFnQjtnQkFDaEIsMEJBQTBCO2dCQUMxQixnQkFBZ0I7WUFDcEI7O0FBRVosZ2hCQUFnaEIiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIGNkay1oZWFkZXItcm93IHtcbiAgICAgICAgICAgICAgICBmb250LXdlaWdodDogNTAwO1xuICAgICAgICAgICAgICAgIHRleHQtdHJhbnNmb3JtOiBjYXBpdGFsaXplO1xuICAgICAgICAgICAgICAgIG1pbi1oZWlnaHQ6IDNyZW07XG4gICAgICAgICAgICB9XG4gICAgICAgICJdLCJzb3VyY2VSb290IjoiIn0= */"]
  });
}

/***/ }),

/***/ 22238:
/*!*************************************************************!*\
  !*** ./libs/components/src/lib/custom-tooltip.component.ts ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CustomTooltipComponent: () => (/* binding */ CustomTooltipComponent),
/* harmony export */   CustomTooltipData: () => (/* binding */ CustomTooltipData)
/* harmony export */ });
/* harmony import */ var _angular_cdk_portal__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/cdk/portal */ 9168);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var _angular_cdk_overlay__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/cdk/overlay */ 81570);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _sanitise_pipe__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./sanitise.pipe */ 54616);









const _c0 = ["customTooltip", ""];
const _c1 = ["*"];
function CustomTooltipComponent_ng_template_1_ng_container_1_ng_container_1_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementContainer"](0);
  }
}
function CustomTooltipComponent_ng_template_1_ng_container_1_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](1, CustomTooltipComponent_ng_template_1_ng_container_1_ng_container_1_Template, 1, 0, "ng-container", 4);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementContainerEnd"]();
  }
  if (rf & 2) {
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngComponentOutlet", ctx_r0.content)("ngComponentOutletInjector", ctx_r0.injector);
  }
}
function CustomTooltipComponent_ng_template_1_ng_container_2_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelement"](1, "div", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipe"](2, "sanitize");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementContainerEnd"]();
  }
  if (rf & 2) {
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("innerHTML", _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipeBind1"](2, 1, ctx_r0.content), _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵsanitizeHtml"]);
  }
}
function CustomTooltipComponent_ng_template_1_ng_container_3_ng_container_1_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementContainer"](0);
  }
}
function CustomTooltipComponent_ng_template_1_ng_container_3_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](1, CustomTooltipComponent_ng_template_1_ng_container_3_ng_container_1_Template, 1, 0, "ng-container", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementContainerEnd"]();
  }
  if (rf & 2) {
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngTemplateOutlet", ctx_r0.content)("ngTemplateOutletContext", ctx_r0.data);
  }
}
function CustomTooltipComponent_ng_template_1_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](0, "div", 1);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](1, CustomTooltipComponent_ng_template_1_ng_container_1_Template, 2, 2, "ng-container", 2)(2, CustomTooltipComponent_ng_template_1_ng_container_2_Template, 3, 3, "ng-container", 2)(3, CustomTooltipComponent_ng_template_1_ng_container_3_Template, 2, 2, "ng-container", 3);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngSwitch", ctx_r0.type);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngSwitchCase", "component");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngSwitchCase", "html");
  }
}
class CustomTooltipData {
  constructor(d) {
    this.data = d.data;
    this.close = d.close || (() => null);
  }
  static #_ = this.ɵfac = function CustomTooltipData_Factory(__ngFactoryType__) {
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵinvalidFactory"]();
  };
  static #_2 = this.ɵprov = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdefineInjectable"]({
    token: CustomTooltipData,
    factory: CustomTooltipData.ɵfac
  });
}
class CustomTooltipComponent extends _placeos_common__WEBPACK_IMPORTED_MODULE_0__.AsyncHandler {
  constructor(_element, _overlay, _injector) {
    super();
    this._element = _element;
    this._overlay = _overlay;
    this._injector = _injector;
    /** Whether tooltip has a backdrop */
    this.backdrop = true;
    /** Whether tooltip has a backdrop */
    this.hover = false;
    /** Delay time in milliseconds to close after hover */
    this.delay = 0;
    /** Type of content to render */
    this.type = 'template';
    this._overlay_ref = null;
    this.onClick = () => this.open();
    this.onTouch = () => this.open();
    this.onEnter = () => this.hover ? this.open() : '';
    this.onLeave = () => this.hover ? this.close() : '';
  }
  ngOnChanges(changes) {
    this._updateInjector();
    if (this._overlay_ref && (changes.x_pos || changes.y_pos || changes.content)) {
      this.open();
    }
  }
  ngOnDestroy() {
    super.ngOnDestroy();
    this.close();
  }
  open() {
    if (!this.content) return;
    this.timeout('open', () => {
      if (this.hover && this.delay) {
        this.timeout('onclose', () => this.close(), this.delay);
      }
      this._updateType();
      if (this._overlay_ref) this.close();
      if (!this._portal) return;
      const pos = this._element.nativeElement.getBoundingClientRect();
      const default_x = 'end';
      const default_y = 'top';
      this._overlay_ref = this._overlay.create({
        hasBackdrop: !!this.backdrop && !this.hover,
        positionStrategy: this._overlay.position().flexibleConnectedTo(this._element).withPositions([{
          originX: this.x_pos || default_x,
          originY: (this.y_pos === 'top' ? 'bottom' : this.y_pos == 'bottom' ? 'top' : this.y_pos) || default_y,
          overlayX: this.x_pos || default_x,
          overlayY: this.y_pos || default_y
        }])
      });
      this._overlay_ref.attach(this._portal);
      if (this.backdrop) {
        this.subscription('backdrop', this._overlay_ref.backdropClick().subscribe(() => this.close()));
      }
    }, 50);
  }
  close() {
    this.clearTimeout('open');
    if (this._overlay_ref) {
      this._overlay_ref.dispose();
      this._overlay_ref = null;
    }
  }
  _updateType() {
    this.type = typeof this.content === 'string' ? 'html' : this.content instanceof _angular_core__WEBPACK_IMPORTED_MODULE_2__.TemplateRef ? 'template' : 'component';
  }
  _updateInjector() {
    this.injector = _angular_core__WEBPACK_IMPORTED_MODULE_2__.Injector.create({
      providers: [{
        provide: CustomTooltipData,
        useValue: {
          data: this.data,
          close: () => this.close()
        }
      }],
      parent: this._injector
    });
  }
  static #_ = this.ɵfac = function CustomTooltipComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || CustomTooltipComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_2__.ElementRef), _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdirectiveInject"](_angular_cdk_overlay__WEBPACK_IMPORTED_MODULE_3__.Overlay), _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_2__.Injector));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdefineComponent"]({
    type: CustomTooltipComponent,
    selectors: [["", "customTooltip", ""]],
    viewQuery: function CustomTooltipComponent_Query(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵviewQuery"](_angular_cdk_portal__WEBPACK_IMPORTED_MODULE_4__.CdkPortal, 5);
      }
      if (rf & 2) {
        let _t;
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵloadQuery"]()) && (ctx._portal = _t.first);
      }
    },
    hostBindings: function CustomTooltipComponent_HostBindings(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵlistener"]("click", function CustomTooltipComponent_click_HostBindingHandler() {
          return ctx.onClick();
        })("touchend", function CustomTooltipComponent_touchend_HostBindingHandler() {
          return ctx.onTouch();
        })("mouseenter", function CustomTooltipComponent_mouseenter_HostBindingHandler() {
          return ctx.onEnter();
        })("mouseleave", function CustomTooltipComponent_mouseleave_HostBindingHandler() {
          return ctx.onLeave();
        });
      }
    },
    inputs: {
      x_pos: [0, "xPosition", "x_pos"],
      y_pos: [0, "yPosition", "y_pos"],
      content: "content",
      data: "data",
      backdrop: "backdrop",
      hover: "hover",
      delay: "delay"
    },
    features: [_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵInheritDefinitionFeature"], _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵNgOnChangesFeature"]],
    attrs: _c0,
    ngContentSelectors: _c1,
    decls: 2,
    vars: 0,
    consts: [["cdk-portal", ""], ["custom-tooltip", "", 1, "relative", "print:hidden", 3, "ngSwitch"], [4, "ngSwitchCase"], [4, "ngSwitchDefault"], [4, "ngComponentOutlet", "ngComponentOutletInjector"], [3, "innerHTML"], [4, "ngTemplateOutlet", "ngTemplateOutletContext"]],
    template: function CustomTooltipComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵprojectionDef"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵprojection"](0);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](1, CustomTooltipComponent_ng_template_1_Template, 4, 3, "ng-template", 0);
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_5__.NgComponentOutlet, _angular_common__WEBPACK_IMPORTED_MODULE_5__.NgTemplateOutlet, _angular_common__WEBPACK_IMPORTED_MODULE_5__.NgSwitch, _angular_common__WEBPACK_IMPORTED_MODULE_5__.NgSwitchCase, _angular_common__WEBPACK_IMPORTED_MODULE_5__.NgSwitchDefault, _angular_cdk_portal__WEBPACK_IMPORTED_MODULE_4__.TemplatePortalDirective, _sanitise_pipe__WEBPACK_IMPORTED_MODULE_1__.SanitizePipe],
    encapsulation: 2
  });
}

/***/ }),

/***/ 17025:
/*!***************************************************!*\
  !*** ./libs/components/src/lib/date-from.pipe.ts ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DateFromPipe: () => (/* binding */ DateFromPipe)
/* harmony export */ });
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! date-fns */ 1874);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! date-fns */ 45726);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/core */ 37580);


class DateFromPipe {
  transform(date) {
    const now = Date.now();
    let diff = (0,date_fns__WEBPACK_IMPORTED_MODULE_0__.differenceInMinutes)(now, date);
    const direction = diff < 0;
    diff = Math.abs(diff);
    if (diff < 1) {
      // Less than a minute
      return direction ? 'Soon' : 'Now';
    } else if (diff === 1) {
      // 1 minute
      return direction ? 'In 1 min' : '1 min';
    } else if (diff < 60) {
      // Minutes
      return direction ? `In ${diff} min` : `${diff} min`;
    } else if (diff < 24 * 60) {
      // Hours
      const hours = Math.floor(diff / 60);
      return direction ? `In ${hours} hour${hours === 1 ? '' : 's'}` : (0,date_fns__WEBPACK_IMPORTED_MODULE_1__.format)(date, 'H:mm');
    } else if (diff < 7 * 24 * 60) {
      // Days
      const days = Math.floor(diff / (24 * 60));
      return direction ? (0,date_fns__WEBPACK_IMPORTED_MODULE_1__.format)(date, 'dd MMM yyyy') : (0,date_fns__WEBPACK_IMPORTED_MODULE_1__.format)(date, 'E H:mm');
    } else if (diff < 365 * 24 * 60) {
      // Days
      const days = Math.floor(diff / (24 * 60));
      return direction ? (0,date_fns__WEBPACK_IMPORTED_MODULE_1__.format)(date, 'dd MMM yyyy') : (0,date_fns__WEBPACK_IMPORTED_MODULE_1__.format)(date, 'LLL d H:mm');
    }
    return 'Just now';
  }
  static #_ = this.ɵfac = function DateFromPipe_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || DateFromPipe)();
  };
  static #_2 = this.ɵpipe = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdefinePipe"]({
    name: "dateFrom",
    type: DateFromPipe,
    pure: true
  });
}

/***/ }),

/***/ 18482:
/*!************************************************************!*\
  !*** ./libs/components/src/lib/debug-console.component.ts ***!
  \************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DebugConsoleComponent: () => (/* binding */ DebugConsoleComponent)
/* harmony export */ });
/* harmony import */ var _home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 89204);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! rxjs */ 90521);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! rxjs */ 68824);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! rxjs/operators */ 35443);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! rxjs/operators */ 57871);
/* harmony import */ var libs_common_src_lib_hotkeys_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! libs/common/src/lib/hotkeys.service */ 47643);
/* harmony import */ var libs_common_src_lib_async_handler_class__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! libs/common/src/lib/async-handler.class */ 75354);
/* harmony import */ var libs_common_src_lib_remote_logging_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! libs/common/src/lib/remote-logging.service */ 686);
/* harmony import */ var _json_display_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./json-display.component */ 12354);
/* harmony import */ var _placeos_organisation__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @placeos/organisation */ 2510);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @angular/core */ 37580);














function DebugConsoleComponent_div_0_cdk_virtual_scroll_viewport_7_div_1_div_8_ng_container_2_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](1, "a", 25);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵpipe"](2, "sanitize");
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementContainerEnd"]();
  }
  if (rf & 2) {
    const obj_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵnextContext"]().$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵproperty"]("href", _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵpipeBind1"](2, 2, obj_r3), _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵsanitizeUrl"]);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtextInterpolate"](obj_r3);
  }
}
function DebugConsoleComponent_div_0_cdk_virtual_scroll_viewport_7_div_1_div_8_ng_container_3_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtext"](1, " [");
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](2, "span", 26);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtext"](3, "Object");
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtext"](4, "] ");
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementContainerEnd"]();
  }
  if (rf & 2) {
    const obj_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵnextContext"]().$implicit;
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵnextContext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵproperty"]("content", ctx_r1.json_tooltip)("data", obj_r3)("hover", true)("backdrop", false);
  }
}
function DebugConsoleComponent_div_0_cdk_virtual_scroll_viewport_7_div_1_div_8_ng_container_4_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementContainerEnd"]();
  }
  if (rf & 2) {
    const obj_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵnextContext"]().$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtextInterpolate"](obj_r3);
  }
}
function DebugConsoleComponent_div_0_cdk_virtual_scroll_viewport_7_div_1_div_8_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](0, "div", 21);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementContainerStart"](1, 22);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtemplate"](2, DebugConsoleComponent_div_0_cdk_virtual_scroll_viewport_7_div_1_div_8_ng_container_2_Template, 4, 4, "ng-container", 23)(3, DebugConsoleComponent_div_0_cdk_virtual_scroll_viewport_7_div_1_div_8_ng_container_3_Template, 5, 4, "ng-container", 23)(4, DebugConsoleComponent_div_0_cdk_virtual_scroll_viewport_7_div_1_div_8_ng_container_4_Template, 2, 1, "ng-container", 24);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementContainerEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const obj_r3 = ctx.$implicit;
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵnextContext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵattribute"]("data-type", ctx_r1.type(obj_r3));
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵproperty"]("ngSwitch", ctx_r1.type(obj_r3));
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵproperty"]("ngSwitchCase", "link");
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵproperty"]("ngSwitchCase", "object");
  }
}
function DebugConsoleComponent_div_0_cdk_virtual_scroll_viewport_7_div_1_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](0, "div", 18)(1, "div", 19);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵpipe"](3, "date");
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](4, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtext"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](6, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtext"](7);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtemplate"](8, DebugConsoleComponent_div_0_cdk_virtual_scroll_viewport_7_div_1_div_8_Template, 5, 4, "div", 20);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const log_r4 = ctx.$implicit;
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵpipeBind2"](3, 8, log_r4.timestamp, "MMM d HH:mm:ss"), " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵclassMap"]("uppercase text-xs p-1 " + ctx_r1.colors[log_r4.type] + " rounded font-mono");
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtextInterpolate1"](" ", log_r4.type, " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵclassMap"]("capitalize text-xs p-1 " + ctx_r1.colors[log_r4.subtype] + " rounded font-mono w-16 text-center");
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtextInterpolate1"](" ", log_r4.subtype, " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵproperty"]("ngForOf", log_r4.data);
  }
}
function DebugConsoleComponent_div_0_cdk_virtual_scroll_viewport_7_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](0, "cdk-virtual-scroll-viewport", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtemplate"](1, DebugConsoleComponent_div_0_cdk_virtual_scroll_viewport_7_div_1_Template, 9, 11, "div", 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵpipe"](2, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelement"](3, "div", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵproperty"]("cdkVirtualForOf", _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵpipeBind1"](2, 2, ctx_r1.filtered_logs))("cdkVirtualForTrackBy", ctx_r1.trackByFn);
  }
}
function DebugConsoleComponent_div_0_span_16_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](0, "span", 27);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵpipe"](2, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    let tmp_4_0;
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtextInterpolate1"](" ", ((tmp_4_0 = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵpipeBind1"](2, 1, ctx_r1.filtered_logs)) == null ? null : tmp_4_0.length) || "0", " of ");
  }
}
function DebugConsoleComponent_div_0_Template(rf, ctx) {
  if (rf & 1) {
    const _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](0, "div", 4)(1, "div", 5)(2, "div", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtext"](3, "Console");
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](4, "button", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵlistener"]("click", function DebugConsoleComponent_div_0_Template_button_click_4_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵrestoreView"](_r1);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵresetView"](ctx_r1.show = false);
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](5, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtext"](6, "close");
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]()()();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtemplate"](7, DebugConsoleComponent_div_0_cdk_virtual_scroll_viewport_7_Template, 4, 4, "cdk-virtual-scroll-viewport", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵpipe"](8, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](9, "div", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelement"](10, "div", 10)(11, "div", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](12, "input", 12, 1);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵpipe"](14, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵlistener"]("ngModelChange", function DebugConsoleComponent_div_0_Template_input_ngModelChange_12_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵrestoreView"](_r1);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵresetView"](ctx_r1.filter.next($event));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](15, "div", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtemplate"](16, DebugConsoleComponent_div_0_span_16_Template, 3, 3, "span", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵpipe"](17, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtext"](18);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵpipe"](19, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]()()();
  }
  if (rf & 2) {
    let tmp_3_0;
    let tmp_6_0;
    let tmp_7_0;
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵnextContext"]();
    const empty_state_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵreference"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"](7);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵproperty"]("ngIf", (tmp_3_0 = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵpipeBind1"](8, 5, ctx_r1.filtered_logs)) == null ? null : tmp_3_0.length)("ngIfElse", empty_state_r5);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵproperty"]("ngModel", _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵpipeBind1"](14, 7, ctx_r1.filter));
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵproperty"]("ngIf", (tmp_6_0 = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵpipeBind1"](17, 9, ctx_r1.filter)) == null ? null : tmp_6_0.length);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtextInterpolate1"](" ", (tmp_7_0 = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵpipeBind1"](19, 11, ctx_r1.logs)) == null ? null : tmp_7_0.length, " ");
  }
}
function DebugConsoleComponent_button_1_Template(rf, ctx) {
  if (rf & 1) {
    const _r6 = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](0, "button", 28);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵlistener"]("mousedown", function DebugConsoleComponent_button_1_Template_button_mousedown_0_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵrestoreView"](_r6);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵresetView"](ctx_r1.onStart());
    })("touchstart", function DebugConsoleComponent_button_1_Template_button_touchstart_0_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵrestoreView"](_r6);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵresetView"](ctx_r1.onStart());
    })("mouseup", function DebugConsoleComponent_button_1_Template_button_mouseup_0_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵrestoreView"](_r6);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵresetView"](ctx_r1.onEnd());
    })("touchend", function DebugConsoleComponent_button_1_Template_button_touchend_0_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵrestoreView"](_r6);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵresetView"](ctx_r1.onEnd());
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]();
  }
}
function DebugConsoleComponent_ng_template_2_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](0, "div", 29)(1, "div", 30);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtextInterpolate1"](" No ", ctx_r1.filter.getValue() ? "matching" : "", " logs ");
  }
}
const COLOR_MAP = {
  console: 'bg-success-light text-black',
  network: 'bg-success text-success-content',
  dom: 'bg-warning-light text-black',
  log: `bg-info-light text-black`,
  info: `bg-info text-info-content`,
  warn: `bg-warning text-warning-content`,
  debug: `bg-base-300 text-base-content`,
  error: `bg-error text-error-content`
};
const URL_STARTS = ['tel:', 'mailto:', 'http:', 'https:', 'ftp:', 'ws:', 'wss:'];
class DebugConsoleComponent extends libs_common_src_lib_async_handler_class__WEBPACK_IMPORTED_MODULE_2__.AsyncHandler {
  get can_activate() {
    return !!this._settings.get('app.debug_console');
  }
  constructor(_org, _logs, _hotkey, _settings) {
    super();
    this._org = _org;
    this._logs = _logs;
    this._hotkey = _hotkey;
    this._settings = _settings;
    this.show = false;
    this.colors = COLOR_MAP;
    this.json_tooltip = _json_display_component__WEBPACK_IMPORTED_MODULE_4__.JsonDisplayComponent;
    this.filter = new rxjs__WEBPACK_IMPORTED_MODULE_8__.BehaviorSubject('');
    this.logs = new rxjs__WEBPACK_IMPORTED_MODULE_8__.BehaviorSubject([]);
    this.filtered_logs = (0,rxjs__WEBPACK_IMPORTED_MODULE_9__.combineLatest)([this.filter, this.logs]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.map)(([s, logs]) => logs.filter(_ => _.type.toLowerCase().includes(s.toLowerCase()) || _.subtype.toLowerCase().includes(s.toLowerCase()) || `${_.data}`.toLowerCase().includes(s.toLowerCase()))));
    this.onStart = () => this.timeout('show', () => this.show = true, 5000);
    this.onEnd = () => this.clearTimeout('show');
  }
  ngOnInit() {
    var _this = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      yield _this._org.initialised.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_11__.first)(_ => _)).toPromise();
      _this.subscription('binding', _this._org.active_building.subscribe(() => {
        _this._logs.setSystem(_this._org.binding('remote_logger'));
      }));
      _this.subscription('logs', _this._logs.history.subscribe(event => {
        let logs = _this.logs.getValue();
        if (logs.length > (_this._settings.get('app.log_limits') || 20000)) logs.splice(0, 1);
        _this.logs.next([...logs, event]);
      }));
      _this.subscription('toggle', _this._hotkey.listen(['Control', 'Backquote'], () => _this.show = !_this.show));
      _this._logs.setSystem(_this._org.binding('remote_logger'));
    })();
  }
  type(item) {
    if (typeof item === 'string' && URL_STARTS.find(start => item.startsWith(start))) {
      return 'link';
    } else if (item instanceof Object) {
      return 'object';
    }
    return 'string';
  }
  trackByFn(_, item) {
    return item?.timestamp;
  }
  static #_ = this.ɵfac = function DebugConsoleComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || DebugConsoleComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵdirectiveInject"](_placeos_organisation__WEBPACK_IMPORTED_MODULE_5__.OrganisationService), _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵdirectiveInject"](libs_common_src_lib_remote_logging_service__WEBPACK_IMPORTED_MODULE_3__.RemoteLoggingService), _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵdirectiveInject"](libs_common_src_lib_hotkeys_service__WEBPACK_IMPORTED_MODULE_1__.HotkeysService), _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵdirectiveInject"](_placeos_common__WEBPACK_IMPORTED_MODULE_6__.SettingsService));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵdefineComponent"]({
    type: DebugConsoleComponent,
    selectors: [["debug-console"]],
    inputs: {
      show: "show"
    },
    features: [_angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵInheritDefinitionFeature"]],
    decls: 4,
    vars: 2,
    consts: [["empty_state", ""], ["search_input", ""], ["class", "absolute bottom-2 left-2 max-w-[80vw] w-[40rem] border border-base-300 bg-base-200 text-base-content shadow rounded overflow-hidden h-[24rem] max-h-[65vh] flex flex-col z-[998]", 4, "ngIf"], ["activation", "", "class", "absolute bottom-0 right-0 h-12 w-12", 3, "mousedown", "touchstart", "mouseup", "touchend", 4, "ngIf"], [1, "absolute", "bottom-2", "left-2", "max-w-[80vw]", "w-[40rem]", "border", "border-base-300", "bg-base-200", "text-base-content", "shadow", "rounded", "overflow-hidden", "h-[24rem]", "max-h-[65vh]", "flex", "flex-col", "z-[998]"], [1, "flex", "items-center", "justify-between", "bg-base-100", "border-b", "border-base-300"], [1, "p-2"], ["icon", "", "matRipple", "", 3, "click"], ["itemSize", "32", "class", "flex-1 h-[30rem] max-h-full w-full", 4, "ngIf", "ngIfElse"], [1, "absolute", "bottom-1", "right-1", "rounded-lg", "p-1", "flex", "items-center", "w-[20rem]", "overflow-hidden"], [1, "absolute", "inset-0", "bg-base-content", "opacity-60", "z-0"], [1, "absolute", "inset-1", "bg-base-content", "opacity-90", "rounded", "z-0"], ["name", "log-filter", "placeholder", "Filter logs...", 1, "relative", "border-none", "flex-1", "text-sm", "px-2", "py-1", "font-mono", "rounded", "text-base-100", 3, "ngModelChange", "ngModel"], [1, "relative", "font-mono", "text-xs", "px-2", "text-center", "text-base-100"], ["class", "font-mono", 4, "ngIf"], ["itemSize", "32", 1, "flex-1", "h-[30rem]", "max-h-full", "w-full"], ["class", "font-mono h-8 truncate p-2 text-sm flex items-center max-w-full hover:bg-base-100 space-x-1", 4, "cdkVirtualFor", "cdkVirtualForOf", "cdkVirtualForTrackBy"], [1, "h-8", "w-full"], [1, "font-mono", "h-8", "truncate", "p-2", "text-sm", "flex", "items-center", "max-w-full", "hover:bg-base-100", "space-x-1"], [1, "uppercase", "text-xs", "p-1", "bg-base-100/10", "rounded", "font-mono"], ["class", "font-mono pl-1", 4, "ngFor", "ngForOf"], [1, "font-mono", "pl-1"], [3, "ngSwitch"], [4, "ngSwitchCase"], [4, "ngSwitchDefault"], ["target", "_blank", "rel", "noopener noreferer", 1, "font-mono", 3, "href"], ["customTooltip", "", "xPosition", "center", "yPosition", "bottom", 1, "underline", "font-mono", "hover:text-info", 3, "content", "data", "hover", "backdrop"], [1, "font-mono"], ["activation", "", 1, "absolute", "bottom-0", "right-0", "h-12", "w-12", 3, "mousedown", "touchstart", "mouseup", "touchend"], [1, "flex-1", "flex", "flex-col", "items-center", "justify-center", "h-[30rem]", "w-full"], [1, "text-2xl", "opacity-30"]],
    template: function DebugConsoleComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtemplate"](0, DebugConsoleComponent_div_0_Template, 20, 13, "div", 2)(1, DebugConsoleComponent_button_1_Template, 1, 0, "button", 3)(2, DebugConsoleComponent_ng_template_2_Template, 3, 1, "ng-template", null, 0, _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtemplateRefExtractor"]);
      }
      if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵproperty"]("ngIf", ctx.show);
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵproperty"]("ngIf", ctx.can_activate);
      }
    }
  });
}

/***/ }),

/***/ 3051:
/*!******************************************************************!*\
  !*** ./libs/components/src/lib/desk-height-presets.component.ts ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DeskHeightPresetsComponent: () => (/* binding */ DeskHeightPresetsComponent)
/* harmony export */ });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/forms */ 34456);
/* harmony import */ var _angular_material_core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/material/core */ 74646);
/* harmony import */ var _angular_material_slider__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/material/slider */ 64992);








function DeskHeightPresetsComponent_div_5_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div", 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](1, " Before you can set a desk height, presets must be set ");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
  }
}
function DeskHeightPresetsComponent_button_23_Template(rf, ctx) {
  if (rf & 1) {
    const _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "button", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function DeskHeightPresetsComponent_button_23_Template_button_click_0_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r1);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵresetView"](ctx_r1.onClose());
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](1, " Save Presets ");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
  }
}
class DeskHeightPresetsComponent {
  constructor(_settings) {
    this._settings = _settings;
    this.show_close = false;
    this.close = new _angular_core__WEBPACK_IMPORTED_MODULE_1__.EventEmitter();
    this.not_set = false;
    this.desk_sitting_height = 71;
    this.desk_standing_height = 101;
  }
  ngOnInit() {
    this.not_set = !this._settings.get('desk_sitting_height') && !this._settings.get('desk_standing_height');
    this.desk_sitting_height = this._settings.get('desk_sitting_height') || 71;
    this.desk_standing_height = this._settings.get('desk_standing_height') || 101;
  }
  onClose() {
    this.saveSetting('desk_sitting_height', this.desk_sitting_height);
    this.saveSetting('desk_standing_height', this.desk_standing_height);
    this.close.emit();
  }
  formatLabel(value) {
    return `${value.toFixed(1)}cm`;
  }
  saveSetting(name, value) {
    this._settings.saveUserSetting(name, value);
  }
  static #_ = this.ɵfac = function DeskHeightPresetsComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || DeskHeightPresetsComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](_placeos_common__WEBPACK_IMPORTED_MODULE_0__.SettingsService));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdefineComponent"]({
    type: DeskHeightPresetsComponent,
    selectors: [["desk-height-presets"]],
    inputs: {
      show_close: "show_close"
    },
    outputs: {
      close: "close"
    },
    decls: 24,
    vars: 8,
    consts: () => {
      let i18n_0;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_1586279176802880074$$LIBS_COMPONENTS_SRC_LIB_DESK_HEIGHT_PRESETS_COMPONENT_TS_0 = goog.getMsg("Desk Height Presets");
        i18n_0 = MSG_EXTERNAL_1586279176802880074$$LIBS_COMPONENTS_SRC_LIB_DESK_HEIGHT_PRESETS_COMPONENT_TS_0;
      } else {
        i18n_0 = $localize`:␟4a9ae1d6024ac45fcd744f2b33fcc1078684204c␟1586279176802880074:Desk Height Presets`;
      }
      let i18n_1;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_2517995078699734025$$LIBS_COMPONENTS_SRC_LIB_DESK_HEIGHT_PRESETS_COMPONENT_TS_1 = goog.getMsg(" Desk height presets allow you to store and recall your preferred desk height when checking into a booked desk that supports height adjustment. ");
        i18n_1 = MSG_EXTERNAL_2517995078699734025$$LIBS_COMPONENTS_SRC_LIB_DESK_HEIGHT_PRESETS_COMPONENT_TS_1;
      } else {
        i18n_1 = $localize`:␟76aa055a2b4d990ee2773112c433cbca362d5cf3␟2517995078699734025: Desk height presets allow you to store and recall your preferred desk height when checking into a booked desk that supports height adjustment. `;
      }
      let i18n_2;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_3844660402650950250$$LIBS_COMPONENTS_SRC_LIB_DESK_HEIGHT_PRESETS_COMPONENT_TS_2 = goog.getMsg(" Set your desk height for the best experience. ");
        i18n_2 = MSG_EXTERNAL_3844660402650950250$$LIBS_COMPONENTS_SRC_LIB_DESK_HEIGHT_PRESETS_COMPONENT_TS_2;
      } else {
        i18n_2 = $localize`:␟7cdb9f15155eef16ce00f29f1d835dc2360f266f␟3844660402650950250: Set your desk height for the best experience. `;
      }
      return [i18n_0, i18n_1, i18n_2, [1, "relative", "p-4", "bg-base-100", "rounded", "shadow", "w-[20rem]"], [1, "text-lg", "mb-2"], [1, "text-xs", "opacity-60", "mb-4"], ["class", "text-xs mb-4 -mx-2 p-2 rounded bg-warning text-warning-content", 4, "ngIf"], [1, "flex", "flex-col", "mt-2"], [1, "flex", "items-center", "space-x-2"], ["min", "60", "max", "80", "step", "0.5", "discrete", "", 1, "flex-1", 3, "displayWith"], ["matSliderThumb", "", 3, "ngModelChange", "ngModel"], [1, "text-sm", "w-12", "text-right"], [1, "flex", "items-center", "space-x-2", "mr-2"], ["min", "90", "max", "120", "step", "0.5", "discrete", "", 1, "flex-1", 3, "displayWith"], [1, "text-sm", "w-12", "text-right", "mr-2"], ["btn", "", "matRipple", "", "class", "w-full mt-2", 3, "click", 4, "ngIf"], [1, "text-xs", "mb-4", "-mx-2", "p-2", "rounded", "bg-warning", "text-warning-content"], ["btn", "", "matRipple", "", 1, "w-full", "mt-2", 3, "click"]];
    },
    template: function DeskHeightPresetsComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div", 3)(1, "div", 4);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵi18n"](2, 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](3, "div", 5);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵi18n"](4, 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](5, DeskHeightPresetsComponent_div_5_Template, 2, 0, "div", 6);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](6, "div", 5);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵi18n"](7, 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](8, "div", 7)(9, "label");
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](10, "Sitting Height");
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](11, "div", 8)(12, "mat-slider", 9)(13, "input", 10);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtwoWayListener"]("ngModelChange", function DeskHeightPresetsComponent_Template_input_ngModelChange_13_listener($event) {
          _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtwoWayBindingSet"](ctx.desk_sitting_height, $event) || (ctx.desk_sitting_height = $event);
          return $event;
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("ngModelChange", function DeskHeightPresetsComponent_Template_input_ngModelChange_13_listener($event) {
          return ctx.saveSetting("desk_sitting_height", $event);
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](14, "div", 11);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](15);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](16, "label");
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](17, "Standing Height");
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](18, "div", 12)(19, "mat-slider", 13)(20, "input", 10);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtwoWayListener"]("ngModelChange", function DeskHeightPresetsComponent_Template_input_ngModelChange_20_listener($event) {
          _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtwoWayBindingSet"](ctx.desk_standing_height, $event) || (ctx.desk_standing_height = $event);
          return $event;
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("ngModelChange", function DeskHeightPresetsComponent_Template_input_ngModelChange_20_listener($event) {
          return ctx.saveSetting("desk_standing_height", $event);
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](21, "div", 14);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](22);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]()()();
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](23, DeskHeightPresetsComponent_button_23_Template, 2, 0, "button", 15);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
      }
      if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](5);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", ctx.not_set && ctx.show_close);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](7);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("displayWith", ctx.formatLabel);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtwoWayProperty"]("ngModel", ctx.desk_sitting_height);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate1"](" ", ctx.desk_sitting_height.toFixed(1), "cm ");
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](4);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("displayWith", ctx.formatLabel);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtwoWayProperty"]("ngModel", ctx.desk_standing_height);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate1"](" ", ctx.desk_standing_height.toFixed(1), "cm ");
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", ctx.show_close);
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_2__.NgIf, _angular_forms__WEBPACK_IMPORTED_MODULE_3__.DefaultValueAccessor, _angular_forms__WEBPACK_IMPORTED_MODULE_3__.NgControlStatus, _angular_forms__WEBPACK_IMPORTED_MODULE_3__.NgModel, _angular_material_core__WEBPACK_IMPORTED_MODULE_4__.MatRipple, _angular_material_slider__WEBPACK_IMPORTED_MODULE_5__.MatSlider, _angular_material_slider__WEBPACK_IMPORTED_MODULE_5__.MatSliderThumb]
  });
}

/***/ }),

/***/ 17022:
/*!**************************************************!*\
  !*** ./libs/components/src/lib/duration.pipe.ts ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DurationPipe: () => (/* binding */ DurationPipe)
/* harmony export */ });
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! date-fns */ 99134);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ 37580);


class DurationPipe {
  /**
   * Format the duration value
   * @param length Duration to format in minutes
   * @param shorten Whether to shorten the period names e.g. `hours` as `h`
   */
  transform(length, shorten = false) {
    let duration = (0,date_fns__WEBPACK_IMPORTED_MODULE_0__.formatDuration)({
      hours: Math.floor(length / 60),
      minutes: length % 60
    });
    if (shorten) {
      duration = duration.replace('hour', 'h').replace('minute', 'm').replace(/s/gi, '');
    }
    return duration;
  }
  static #_ = this.ɵfac = function DurationPipe_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || DurationPipe)();
  };
  static #_2 = this.ɵpipe = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdefinePipe"]({
    name: "duration",
    type: DurationPipe,
    pure: true
  });
}

/***/ }),

/***/ 62678:
/*!***********************************************!*\
  !*** ./libs/components/src/lib/fixed.pipe.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   FixedPipe: () => (/* binding */ FixedPipe)
/* harmony export */ });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ 37580);

class FixedPipe {
  /**
   * Fixed a number to x decimal places
   * @param value number to convert
   * @param places Number of decimal places to convert
   */
  transform(value, places = 2) {
    return value.toFixed(places);
  }
  static #_ = this.ɵfac = function FixedPipe_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || FixedPipe)();
  };
  static #_2 = this.ɵpipe = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefinePipe"]({
    name: "toFixed",
    type: FixedPipe,
    pure: true
  });
}

/***/ }),

/***/ 20785:
/*!************************************************************!*\
  !*** ./libs/components/src/lib/global-banner.component.ts ***!
  \************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   GlobalBannerComponent: () => (/* binding */ GlobalBannerComponent)
/* harmony export */ });
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _icon_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./icon.component */ 69434);





function GlobalBannerComponent_div_0_Template(rf, ctx) {
  if (rf & 1) {
    const _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](0, "div", 1)(1, "div", 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](3, "button", 3);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵlistener"]("click", function GlobalBannerComponent_div_0_Template_button_click_3_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵrestoreView"](_r1);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵresetView"](ctx_r1.close());
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](4, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](5, "close");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]()()();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵclassProp"]("bg-info", ctx_r1.banner.type === "info" || !ctx_r1.banner.type)("text-info-content", ctx_r1.banner.type === "info" || !ctx_r1.banner.type)("bg-warning", ctx_r1.banner.type === "warn")("text-warning-content", ctx_r1.banner.type === "warn")("bg-error", ctx_r1.banner.type === "error")("text-error-content", ctx_r1.banner.type === "error");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtextInterpolate"](ctx_r1.banner == null ? null : ctx_r1.banner.content);
  }
}
class GlobalBannerComponent {
  get has_viewed() {
    return !this.banner?.content || localStorage.getItem('PLACE.last_banner') === this.banner.id;
  }
  get banner() {
    return this._settings.get('app.general.banner');
  }
  constructor(_settings) {
    this._settings = _settings;
  }
  close() {
    localStorage.setItem('PLACE.last_banner', this.banner?.id || '');
  }
  static #_ = this.ɵfac = function GlobalBannerComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || GlobalBannerComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdirectiveInject"](_placeos_common__WEBPACK_IMPORTED_MODULE_0__.SettingsService));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdefineComponent"]({
    type: GlobalBannerComponent,
    selectors: [["global-banner"]],
    decls: 1,
    vars: 1,
    consts: [["class", "flex items-center w-full p-4 space-x-4", 3, "bg-info", "text-info-content", "bg-warning", "text-warning-content", "bg-error", "text-error-content", 4, "ngIf"], [1, "flex", "items-center", "w-full", "p-4", "space-x-4"], [1, "flex-1"], ["icon", "", 3, "click"]],
    template: function GlobalBannerComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](0, GlobalBannerComponent_div_0_Template, 6, 13, "div", 0);
      }
      if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngIf", !ctx.has_viewed);
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_3__.NgIf, _icon_component__WEBPACK_IMPORTED_MODULE_1__.IconComponent],
    styles: ["[_nghost-%COMP%] {\n                display: block;\n                width: 100%;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdsb2JhbC1iYW5uZXIuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxjQUFjO2dCQUNkLFdBQVc7WUFDZiIsImZpbGUiOiJnbG9iYWwtYmFubmVyLmNvbXBvbmVudC50cyIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgOmhvc3Qge1xuICAgICAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgfVxuICAgICAgICAiXX0= */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvY29tcG9uZW50cy9zcmMvbGliL2dsb2JhbC1iYW5uZXIuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxjQUFjO2dCQUNkLFdBQVc7WUFDZjs7QUFFWix3YUFBd2EiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIDpob3N0IHtcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl0sInNvdXJjZVJvb3QiOiIifQ== */"]
  });
}

/***/ }),

/***/ 34921:
/*!*************************************************************!*\
  !*** ./libs/components/src/lib/global-loading.component.ts ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   GlobalLoadingComponent: () => (/* binding */ GlobalLoadingComponent)
/* harmony export */ });
/* harmony import */ var _home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 89204);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! rxjs/operators */ 57871);
/* harmony import */ var _placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @placeos/ts-client */ 35713);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var libs_organisation_src_lib_organisation_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! libs/organisation/src/lib/organisation.service */ 19863);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _angular_material_progress_spinner__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @angular/material/progress-spinner */ 41134);










function GlobalLoadingComponent_div_0_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](0, "div", 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](1, " Unable to reach server... Some features may not work. ");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
  }
}
function GlobalLoadingComponent_div_1_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](0, "div", 3);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelement"](1, "mat-spinner", 4);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("diameter", 64);
  }
}
class GlobalLoadingComponent extends _placeos_common__WEBPACK_IMPORTED_MODULE_2__.AsyncHandler {
  get online() {
    return (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.isOnline)();
  }
  constructor(_org, _settings) {
    super();
    this._org = _org;
    this._settings = _settings;
  }
  ngOnInit() {
    var _this = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      _this.loading = true;
      yield _this._org.initialised.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.first)(_ => _)).toPromise();
      yield _this._settings.initialised.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.first)(_ => _)).toPromise();
      _this.interval('has_token', () => {
        if (!(0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.authority)() || !(0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.token)()) return;
        _this.loading = false;
        _this.clearInterval('has_token');
      }, 1000);
    })();
  }
  static #_ = this.ɵfac = function GlobalLoadingComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || GlobalLoadingComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵdirectiveInject"](libs_organisation_src_lib_organisation_service__WEBPACK_IMPORTED_MODULE_3__.OrganisationService), _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵdirectiveInject"](_placeos_common__WEBPACK_IMPORTED_MODULE_2__.SettingsService));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵdefineComponent"]({
    type: GlobalLoadingComponent,
    selectors: [["global-loading"]],
    features: [_angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵInheritDefinitionFeature"]],
    decls: 2,
    vars: 2,
    consts: [["class", "fixed bottom-2 left-1/2 -translate-x-1/2 shadow rounded-3xl px-4 py-2 bg-error text-white text-xs", 4, "ngIf"], ["loader", "", "class", "fixed inset-0 flex items-center justify-center pointer-events-auto bg-base-100", 4, "ngIf"], [1, "fixed", "bottom-2", "left-1/2", "-translate-x-1/2", "shadow", "rounded-3xl", "px-4", "py-2", "bg-error", "text-white", "text-xs"], ["loader", "", 1, "fixed", "inset-0", "flex", "items-center", "justify-center", "pointer-events-auto", "bg-base-100"], [3, "diameter"]],
    template: function GlobalLoadingComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](0, GlobalLoadingComponent_div_0_Template, 2, 0, "div", 0)(1, GlobalLoadingComponent_div_1_Template, 2, 1, "div", 1);
      }
      if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngIf", !ctx.online);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngIf", ctx.loading);
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_6__.NgIf, _angular_material_progress_spinner__WEBPACK_IMPORTED_MODULE_7__.MatProgressSpinner],
    styles: ["[_nghost-%COMP%] {\n                pointer-events: none;\n            }\n\n            [_nghost-%COMP%]    > [loader][_ngcontent-%COMP%] {\n                z-index: 997;\n                background-image: url(\"data:image/svg+xml,%3Csvg width='36' height='36' viewBox='0 0 36 36' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M36 0H0v36h36V0zM15.126 2H2v13.126c.367.094.714.24 1.032.428L15.554 3.032c-.188-.318-.334-.665-.428-1.032zM18 4.874V18H4.874c-.094-.367-.24-.714-.428-1.032L16.968 4.446c.318.188.665.334 1.032.428zM22.874 2h11.712L20 16.586V4.874c1.406-.362 2.512-1.468 2.874-2.874zm10.252 18H20v13.126c.367.094.714.24 1.032.428l12.522-12.522c-.188-.318-.334-.665-.428-1.032zM36 22.874V36H22.874c-.094-.367-.24-.714-.428-1.032l12.522-12.522c.318.188.665.334 1.032.428zm0-7.748V3.414L21.414 18h11.712c.362-1.406 1.468-2.512 2.874-2.874zm-18 18V21.414L3.414 36h11.712c.362-1.406 1.468-2.512 2.874-2.874zM4.874 20h11.712L2 34.586V22.874c1.406-.362 2.512-1.468 2.874-2.874z' fill='%23000000' fill-opacity='0.1' fill-rule='evenodd'/%3E%3C/svg%3E\");\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdsb2JhbC1sb2FkaW5nLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1lBQ1k7Z0JBQ0ksb0JBQW9CO1lBQ3hCOztZQUVBO2dCQUNJLFlBQVk7Z0JBQ1osZzJCQUFnMkI7WUFDcDJCIiwiZmlsZSI6Imdsb2JhbC1sb2FkaW5nLmNvbXBvbmVudC50cyIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgOmhvc3Qge1xuICAgICAgICAgICAgICAgIHBvaW50ZXItZXZlbnRzOiBub25lO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICA6aG9zdCA+IFtsb2FkZXJdIHtcbiAgICAgICAgICAgICAgICB6LWluZGV4OiA5OTc7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZC1pbWFnZTogdXJsKFwiZGF0YTppbWFnZS9zdmcreG1sLCUzQ3N2ZyB3aWR0aD0nMzYnIGhlaWdodD0nMzYnIHZpZXdCb3g9JzAgMCAzNiAzNicgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyUzRSUzQ3BhdGggZD0nTTM2IDBIMHYzNmgzNlYwek0xNS4xMjYgMkgydjEzLjEyNmMuMzY3LjA5NC43MTQuMjQgMS4wMzIuNDI4TDE1LjU1NCAzLjAzMmMtLjE4OC0uMzE4LS4zMzQtLjY2NS0uNDI4LTEuMDMyek0xOCA0Ljg3NFYxOEg0Ljg3NGMtLjA5NC0uMzY3LS4yNC0uNzE0LS40MjgtMS4wMzJMMTYuOTY4IDQuNDQ2Yy4zMTguMTg4LjY2NS4zMzQgMS4wMzIuNDI4ek0yMi44NzQgMmgxMS43MTJMMjAgMTYuNTg2VjQuODc0YzEuNDA2LS4zNjIgMi41MTItMS40NjggMi44NzQtMi44NzR6bTEwLjI1MiAxOEgyMHYxMy4xMjZjLjM2Ny4wOTQuNzE0LjI0IDEuMDMyLjQyOGwxMi41MjItMTIuNTIyYy0uMTg4LS4zMTgtLjMzNC0uNjY1LS40MjgtMS4wMzJ6TTM2IDIyLjg3NFYzNkgyMi44NzRjLS4wOTQtLjM2Ny0uMjQtLjcxNC0uNDI4LTEuMDMybDEyLjUyMi0xMi41MjJjLjMxOC4xODguNjY1LjMzNCAxLjAzMi40Mjh6bTAtNy43NDhWMy40MTRMMjEuNDE0IDE4aDExLjcxMmMuMzYyLTEuNDA2IDEuNDY4LTIuNTEyIDIuODc0LTIuODc0em0tMTggMThWMjEuNDE0TDMuNDE0IDM2aDExLjcxMmMuMzYyLTEuNDA2IDEuNDY4LTIuNTEyIDIuODc0LTIuODc0ek00Ljg3NCAyMGgxMS43MTJMMiAzNC41ODZWMjIuODc0YzEuNDA2LS4zNjIgMi41MTItMS40NjggMi44NzQtMi44NzR6JyBmaWxsPSclMjMwMDAwMDAnIGZpbGwtb3BhY2l0eT0nMC4xJyBmaWxsLXJ1bGU9J2V2ZW5vZGQnLyUzRSUzQy9zdmclM0VcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICJdfQ== */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvY29tcG9uZW50cy9zcmMvbGliL2dsb2JhbC1sb2FkaW5nLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1lBQ1k7Z0JBQ0ksb0JBQW9CO1lBQ3hCOztZQUVBO2dCQUNJLFlBQVk7Z0JBQ1osZzJCQUFnMkI7WUFDcDJCOztBQUVaLDRyREFBNHJEIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICA6aG9zdCB7XG4gICAgICAgICAgICAgICAgcG9pbnRlci1ldmVudHM6IG5vbmU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIDpob3N0ID4gW2xvYWRlcl0ge1xuICAgICAgICAgICAgICAgIHotaW5kZXg6IDk5NztcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoXCJkYXRhOmltYWdlL3N2Zyt4bWwsJTNDc3ZnIHdpZHRoPSczNicgaGVpZ2h0PSczNicgdmlld0JveD0nMCAwIDM2IDM2JyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnJTNFJTNDcGF0aCBkPSdNMzYgMEgwdjM2aDM2VjB6TTE1LjEyNiAySDJ2MTMuMTI2Yy4zNjcuMDk0LjcxNC4yNCAxLjAzMi40MjhMMTUuNTU0IDMuMDMyYy0uMTg4LS4zMTgtLjMzNC0uNjY1LS40MjgtMS4wMzJ6TTE4IDQuODc0VjE4SDQuODc0Yy0uMDk0LS4zNjctLjI0LS43MTQtLjQyOC0xLjAzMkwxNi45NjggNC40NDZjLjMxOC4xODguNjY1LjMzNCAxLjAzMi40Mjh6TTIyLjg3NCAyaDExLjcxMkwyMCAxNi41ODZWNC44NzRjMS40MDYtLjM2MiAyLjUxMi0xLjQ2OCAyLjg3NC0yLjg3NHptMTAuMjUyIDE4SDIwdjEzLjEyNmMuMzY3LjA5NC43MTQuMjQgMS4wMzIuNDI4bDEyLjUyMi0xMi41MjJjLS4xODgtLjMxOC0uMzM0LS42NjUtLjQyOC0xLjAzMnpNMzYgMjIuODc0VjM2SDIyLjg3NGMtLjA5NC0uMzY3LS4yNC0uNzE0LS40MjgtMS4wMzJsMTIuNTIyLTEyLjUyMmMuMzE4LjE4OC42NjUuMzM0IDEuMDMyLjQyOHptMC03Ljc0OFYzLjQxNEwyMS40MTQgMThoMTEuNzEyYy4zNjItMS40MDYgMS40NjgtMi41MTIgMi44NzQtMi44NzR6bS0xOCAxOFYyMS40MTRMMy40MTQgMzZoMTEuNzEyYy4zNjItMS40MDYgMS40NjgtMi41MTIgMi44NzQtMi44NzR6TTQuODc0IDIwaDExLjcxMkwyIDM0LjU4NlYyMi44NzRjMS40MDYtLjM2MiAyLjUxMi0xLjQ2OCAyLjg3NC0yLjg3NHonIGZpbGw9JyUyMzAwMDAwMCcgZmlsbC1vcGFjaXR5PScwLjEnIGZpbGwtcnVsZT0nZXZlbm9kZCcvJTNFJTNDL3N2ZyUzRVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl0sInNvdXJjZVJvb3QiOiIifQ== */"]
  });
}

/***/ }),

/***/ 46926:
/*!***********************************************************!*\
  !*** ./libs/components/src/lib/help-tooltip.component.ts ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   HelpTooltipComponent: () => (/* binding */ HelpTooltipComponent)
/* harmony export */ });
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var _placeos_components__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @placeos/components */ 51588);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _angular_material_core__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/material/core */ 74646);
/* harmony import */ var _icon_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./icon.component */ 69434);







function HelpTooltipComponent_a_6_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "a", 6)(1, "div", 7)(2, "div", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelement"](3, "app-icon", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](4, "div", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()()();
  }
  if (rf & 2) {
    const tile_r1 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("href", tile_r1.link, _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵsanitizeUrl"]);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("icon", tile_r1.icon);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtextInterpolate"](tile_r1.name);
  }
}
class HelpTooltipComponent {
  /** Tiles to display on the help page */
  get tiles() {
    return this._settings.get('app.help') || [];
  }
  constructor(_data, _settings) {
    this._data = _data;
    this._settings = _settings;
    this.close = () => {
      this._data?.close();
    };
  }
  static #_ = this.ɵfac = function HelpTooltipComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || HelpTooltipComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵdirectiveInject"](_placeos_components__WEBPACK_IMPORTED_MODULE_1__.CustomTooltipData), _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵdirectiveInject"](_placeos_common__WEBPACK_IMPORTED_MODULE_0__.SettingsService));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵdefineComponent"]({
    type: HelpTooltipComponent,
    selectors: [["help-tooltip"]],
    decls: 7,
    vars: 1,
    consts: () => {
      let i18n_0;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_7393197899734735120$$LIBS_COMPONENTS_SRC_LIB_HELP_TOOLTIP_COMPONENT_TS_0 = goog.getMsg("Help & Support");
        i18n_0 = MSG_EXTERNAL_7393197899734735120$$LIBS_COMPONENTS_SRC_LIB_HELP_TOOLTIP_COMPONENT_TS_0;
      } else {
        i18n_0 = $localize`:␟258586f2141d5b6c98ef28c38ac6f55a81a301b2␟7393197899734735120:Help & Support`;
      }
      return [i18n_0, [1, "flex", "flex-col", "w-[18.5rem]", "rounded", "bg-base-100", "shadow", "relative", "-top-12", "-right-1", "divide-y", "divide-base-200", 3, "click"], [1, "flex", "items-center", "space-x-2", "p-2", "border-b"], [1, "text-2xl"], [1, ""], ["btn", "", "matRipple", "", "class", "clear w-full text-left h-auto", "target", "_blank", "ref", "noreferer noopener", 3, "href", 4, "ngFor", "ngForOf"], ["btn", "", "matRipple", "", "target", "_blank", "ref", "noreferer noopener", 1, "clear", "w-full", "text-left", "h-auto", 3, "href"], [1, "flex", "items-center", "space-x-2", "py-2", "w-full"], [1, "flex", "items-center", "justify-center", "rounded-full", "w-8", "h-8", "bg-base-200"], [1, "text-xl", 3, "icon"], [1, "flex-1"]];
    },
    template: function HelpTooltipComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "div", 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵlistener"]("click", function HelpTooltipComponent_Template_div_click_0_listener() {
          return ctx.close();
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](1, "div", 2)(2, "app-icon", 3);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](3, "arrow_back");
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](4, "div", 4);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵi18n"](5, 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](6, HelpTooltipComponent_a_6_Template, 6, 3, "a", 5);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
      }
      if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](6);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngForOf", ctx.tiles);
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_4__.NgForOf, _angular_material_core__WEBPACK_IMPORTED_MODULE_5__.MatRipple, _icon_component__WEBPACK_IMPORTED_MODULE_2__.IconComponent],
    styles: ["a[_ngcontent-%COMP%]:not(:last-child) {\n                border-bottom-width: 1px !important;\n                border-bottom-style: solid !important;\n                border-radius: 0;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImhlbHAtdG9vbHRpcC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLG1DQUFtQztnQkFDbkMscUNBQXFDO2dCQUNyQyxnQkFBZ0I7WUFDcEIiLCJmaWxlIjoiaGVscC10b29sdGlwLmNvbXBvbmVudC50cyIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgYTpub3QoOmxhc3QtY2hpbGQpIHtcbiAgICAgICAgICAgICAgICBib3JkZXItYm90dG9tLXdpZHRoOiAxcHggIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgICBib3JkZXItYm90dG9tLXN0eWxlOiBzb2xpZCAhaW1wb3J0YW50O1xuICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICJdfQ== */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvY29tcG9uZW50cy9zcmMvbGliL2hlbHAtdG9vbHRpcC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLG1DQUFtQztnQkFDbkMscUNBQXFDO2dCQUNyQyxnQkFBZ0I7WUFDcEI7O0FBRVosZ2tCQUFna0IiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIGE6bm90KDpsYXN0LWNoaWxkKSB7XG4gICAgICAgICAgICAgICAgYm9yZGVyLWJvdHRvbS13aWR0aDogMXB4ICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgICAgYm9yZGVyLWJvdHRvbS1zdHlsZTogc29saWQgIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAiXSwic291cmNlUm9vdCI6IiJ9 */"]
  });
}

/***/ }),

/***/ 69434:
/*!***************************************************!*\
  !*** ./libs/components/src/lib/icon.component.ts ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   IconComponent: () => (/* binding */ IconComponent)
/* harmony export */ });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _safe_pipe__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./safe.pipe */ 26781);



const _c0 = ["*"];
function IconComponent_i_1_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "i");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵprojection"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵclassMap"]((ctx_r0.icon == null ? null : ctx_r0.icon.class) || ctx_r0.className);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate1"](" ", ctx_r0.icon == null ? null : ctx_r0.icon.content, " ");
  }
}
function IconComponent_img_2_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](0, "img", 3);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpipe"](1, "safe");
  }
  if (rf & 2) {
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("src", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpipeBind2"](1, 1, ctx_r0.icon.src, "resource"), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵsanitizeUrl"]);
  }
}
class IconComponent {
  constructor() {
    this.className = 'material-icons';
  }
  static #_ = this.ɵfac = function IconComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || IconComponent)();
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdefineComponent"]({
    type: IconComponent,
    selectors: [["app-icon"], ["icon"]],
    inputs: {
      className: "className",
      icon: "icon"
    },
    ngContentSelectors: _c0,
    decls: 3,
    vars: 2,
    consts: [[1, "flex", "items-center", "justify-center", "h-[1.25em]", "w-[1.25em]"], [3, "class", 4, "ngIf"], ["class", "h-[1em] w-[1em]", 3, "src", 4, "ngIf"], [1, "h-[1em]", "w-[1em]", 3, "src"]],
    template: function IconComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵprojectionDef"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div", 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](1, IconComponent_i_1_Template, 3, 3, "i", 1)(2, IconComponent_img_2_Template, 2, 4, "img", 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
      }
      if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", !ctx.icon || ctx.icon.type !== "img");
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", ctx.icon && ctx.icon.type === "img");
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_2__.NgIf, _safe_pipe__WEBPACK_IMPORTED_MODULE_0__.SafePipe],
    styles: ["i[_ngcontent-%COMP%] {\n                font-size: 1em;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImljb24uY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxjQUFjO1lBQ2xCIiwiZmlsZSI6Imljb24uY29tcG9uZW50LnRzIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICBpIHtcbiAgICAgICAgICAgICAgICBmb250LXNpemU6IDFlbTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl19 */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvY29tcG9uZW50cy9zcmMvbGliL2ljb24uY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxjQUFjO1lBQ2xCOztBQUVaLG9WQUFvViIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgaSB7XG4gICAgICAgICAgICAgICAgZm9udC1zaXplOiAxZW07XG4gICAgICAgICAgICB9XG4gICAgICAgICJdLCJzb3VyY2VSb290IjoiIn0= */"]
  });
}

/***/ }),

/***/ 65277:
/*!*************************************************************!*\
  !*** ./libs/components/src/lib/image-carousel.component.ts ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ImageCarouselComponent: () => (/* binding */ ImageCarouselComponent)
/* harmony export */ });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ 37580);

function ImageCarouselComponent_div_1_img_1_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "img", 8);
  }
  if (rf & 2) {
    const image_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]().$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("source", image_r1.url || image_r1);
  }
}
function ImageCarouselComponent_div_1_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, ImageCarouselComponent_div_1_img_1_Template, 1, 1, "img", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const image_r1 = ctx.$implicit;
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵstyleProp"]("transform", "translateX(-" + ctx_r1.offset * 100 + "%)");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", image_r1);
  }
}
function ImageCarouselComponent_div_2_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 9)(1, "app-icon", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](2, "image_not_supported");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](3, "p");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](4, "No images");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()();
  }
}
function ImageCarouselComponent_button_3_Template(rf, ctx) {
  if (rf & 1) {
    const _r3 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "button", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function ImageCarouselComponent_button_3_Template_button_click_0_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r3);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵresetView"](ctx_r1.offset = ctx_r1.offset - 1);
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "app-icon", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](2, "chevron_left");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("disabled", ctx_r1.offset === 0);
  }
}
function ImageCarouselComponent_button_4_Template(rf, ctx) {
  if (rf & 1) {
    const _r4 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "button", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function ImageCarouselComponent_button_4_Template_button_click_0_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r4);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵresetView"](ctx_r1.offset = ctx_r1.offset + 1);
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "app-icon", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](2, "chevron_right");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("disabled", ctx_r1.offset >= (ctx_r1.images == null ? null : ctx_r1.images.length) - 1);
  }
}
function ImageCarouselComponent_div_5_button_1_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "button", 16);
  }
  if (rf & 2) {
    const i_r5 = ctx.index;
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵclassProp"]("!bg-base-100", ctx_r1.offset === i_r5);
  }
}
function ImageCarouselComponent_div_5_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, ImageCarouselComponent_div_5_button_1_Template, 1, 2, "button", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngForOf", ctx_r1.images);
  }
}
class ImageCarouselComponent {
  constructor() {
    this.images = [];
    this.offset = 0;
  }
  static #_ = this.ɵfac = function ImageCarouselComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || ImageCarouselComponent)();
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({
    type: ImageCarouselComponent,
    selectors: [["image-carousel"]],
    inputs: {
      images: "images"
    },
    decls: 6,
    vars: 5,
    consts: [[1, "h-full", "w-full", "relative", "overflow-hidden", "flex"], ["image", "", "class", "h-full min-w-full relative flex items-center justify-center overflow-hidden", 3, "transform", 4, "ngFor", "ngForOf"], ["class", "h-full w-full relative flex flex-col items-center justify-center opacity-30 space-y-2", 4, "ngIf"], ["matRipple", "", "class", "opacity-0 hover:opacity-30 flex items-center justify-center absolute left-0 inset-y-0 w-1/3 bg-neutral text-white", 3, "disabled", "click", 4, "ngIf"], ["matRipple", "", "class", "opacity-0 hover:opacity-30 flex items-center justify-center absolute right-0 inset-y-0 w-1/3 bg-neutral text-white", 3, "disabled", "click", 4, "ngIf"], ["class", "absolute bottom-1 left-1/2 -translate-x-1/2 text-sm opacity-30 space-x-2", 4, "ngIf"], ["image", "", 1, "h-full", "min-w-full", "relative", "flex", "items-center", "justify-center", "overflow-hidden"], ["auth", "", "class", "h-full object-contain", 3, "source", 4, "ngIf"], ["auth", "", 1, "h-full", "object-contain", 3, "source"], [1, "h-full", "w-full", "relative", "flex", "flex-col", "items-center", "justify-center", "opacity-30", "space-y-2"], [1, "text-5xl"], ["matRipple", "", 1, "opacity-0", "hover:opacity-30", "flex", "items-center", "justify-center", "absolute", "left-0", "inset-y-0", "w-1/3", "bg-neutral", "text-white", 3, "click", "disabled"], [1, "text-4xl"], ["matRipple", "", 1, "opacity-0", "hover:opacity-30", "flex", "items-center", "justify-center", "absolute", "right-0", "inset-y-0", "w-1/3", "bg-neutral", "text-white", 3, "click", "disabled"], [1, "absolute", "bottom-1", "left-1/2", "-translate-x-1/2", "text-sm", "opacity-30", "space-x-2"], ["matRipple", "", "class", "h-4 w-4 rounded-full bg-base-300 shadow", 3, "!bg-base-100", 4, "ngFor", "ngForOf"], ["matRipple", "", 1, "h-4", "w-4", "rounded-full", "bg-base-300", "shadow"]],
    template: function ImageCarouselComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, ImageCarouselComponent_div_1_Template, 2, 3, "div", 1)(2, ImageCarouselComponent_div_2_Template, 5, 0, "div", 2)(3, ImageCarouselComponent_button_3_Template, 3, 1, "button", 3)(4, ImageCarouselComponent_button_4_Template, 3, 1, "button", 4)(5, ImageCarouselComponent_div_5_Template, 2, 1, "div", 5);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
      }
      if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngForOf", ctx.images);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", !(ctx.images == null ? null : ctx.images.length));
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx.images == null ? null : ctx.images.length);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx.images == null ? null : ctx.images.length);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx.images == null ? null : ctx.images.length);
      }
    },
    styles: ["[_nghost-%COMP%] {\n                display: block;\n                height: 100%;\n                width: 100%;\n            }\n\n            [image][_ngcontent-%COMP%] {\n                transition: transform 300ms;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImltYWdlLWNhcm91c2VsLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1lBQ1k7Z0JBQ0ksY0FBYztnQkFDZCxZQUFZO2dCQUNaLFdBQVc7WUFDZjs7WUFFQTtnQkFDSSwyQkFBMkI7WUFDL0IiLCJmaWxlIjoiaW1hZ2UtY2Fyb3VzZWwuY29tcG9uZW50LnRzIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICA6aG9zdCB7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBbaW1hZ2VdIHtcbiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uOiB0cmFuc2Zvcm0gMzAwbXM7XG4gICAgICAgICAgICB9XG4gICAgICAgICJdfQ== */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvY29tcG9uZW50cy9zcmMvbGliL2ltYWdlLWNhcm91c2VsLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1lBQ1k7Z0JBQ0ksY0FBYztnQkFDZCxZQUFZO2dCQUNaLFdBQVc7WUFDZjs7WUFFQTtnQkFDSSwyQkFBMkI7WUFDL0I7O0FBRVosd25CQUF3bkIiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIDpob3N0IHtcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIFtpbWFnZV0ge1xuICAgICAgICAgICAgICAgIHRyYW5zaXRpb246IHRyYW5zZm9ybSAzMDBtcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl0sInNvdXJjZVJvb3QiOiIifQ== */"]
  });
}

/***/ }),

/***/ 26821:
/*!***********************************************************!*\
  !*** ./libs/components/src/lib/image-viewer.component.ts ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ImageViewerComponent: () => (/* binding */ ImageViewerComponent)
/* harmony export */ });
/* harmony import */ var _angular_material_dialog__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/material/dialog */ 12587);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_material_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/material/core */ 74646);
/* harmony import */ var _icon_component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./icon.component */ 69434);





class ImageViewerComponent {
  constructor(url) {
    this.url = url;
  }
  static #_ = this.ɵfac = function ImageViewerComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || ImageViewerComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](_angular_material_dialog__WEBPACK_IMPORTED_MODULE_2__.MAT_DIALOG_DATA));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdefineComponent"]({
    type: ImageViewerComponent,
    selectors: [["image-viewer"]],
    decls: 5,
    vars: 1,
    consts: [[1, "h-screen", "w-screen", "bg-base-200"], [1, "object-contain", "object-center", "w-full", "h-full", 3, "src"], ["icon", "", "matRipple", "", "mat-dialog-close", "", 1, "absolute", "top-1", "right-1", "bg-base-100"]],
    template: function ImageViewerComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div", 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](1, "img", 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](2, "button", 2)(3, "app-icon");
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](4, "close");
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]()()();
      }
      if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("src", ctx.url, _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵsanitizeUrl"]);
      }
    },
    dependencies: [_angular_material_core__WEBPACK_IMPORTED_MODULE_3__.MatRipple, _angular_material_dialog__WEBPACK_IMPORTED_MODULE_2__.MatDialogClose, _icon_component__WEBPACK_IMPORTED_MODULE_0__.IconComponent]
  });
}

/***/ }),

/***/ 92124:
/*!**********************************************************!*\
  !*** ./libs/components/src/lib/indoor-maps.component.ts ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   IndoorMapsComponent: () => (/* binding */ IndoorMapsComponent)
/* harmony export */ });
/* harmony import */ var _home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 89204);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var _explore_src_lib_explore_state_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../explore/src/lib/explore-state.service */ 12455);
/* harmony import */ var _placeos_organisation__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @placeos/organisation */ 2510);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! rxjs */ 68824);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! rxjs/operators */ 8627);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! rxjs/operators */ 35443);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! rxjs/operators */ 57871);
/* harmony import */ var libs_common_src_lib_mapspeople_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! libs/common/src/lib/mapspeople.service */ 99420);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _angular_material_form_field__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @angular/material/form-field */ 24950);
/* harmony import */ var _angular_material_core__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @angular/material/core */ 74646);
/* harmony import */ var _angular_material_input__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @angular/material/input */ 95541);
/* harmony import */ var _angular_material_progress_spinner__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @angular/material/progress-spinner */ 41134);
/* harmony import */ var _angular_material_tooltip__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @angular/material/tooltip */ 80640);
/* harmony import */ var _icon_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./icon.component */ 69434);
/* harmony import */ var _ngx_translate_core__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @ngx-translate/core */ 597);




















const _c0 = ["searchInput"];
const _c1 = ["searchResultItems"];
function IndoorMapsComponent_div_1_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](0, "div", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelement"](1, "mat-spinner", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("diameter", 48);
  }
}
function IndoorMapsComponent_div_2_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](0, "div", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelement"](1, "img", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](2, "p", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpipe"](4, "translate");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpipeBind1"](4, 1, ctx_r1.geolocation_error_message), " ");
  }
}
function IndoorMapsComponent_ng_container_11_li_8_Template(rf, ctx) {
  if (rf & 1) {
    const _r4 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](0, "li", 21)(1, "button", 22);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵlistener"]("click", function IndoorMapsComponent_ng_container_11_li_8_Template_button_click_1_listener() {
      const item_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵrestoreView"](_r4).$implicit;
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵnextContext"](2);
      ctx_r1.getRoute(item_r5);
      return _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵresetView"](ctx_r1.search_result_items = []);
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](2, "div", 23)(3, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](5, "div", 24);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](6);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]()()()();
  }
  if (rf & 2) {
    const item_r5 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtextInterpolate"](item_r5.properties.name);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtextInterpolate2"](" ", item_r5.properties.roomId, ", Level ", item_r5.properties.floorName, " ");
  }
}
function IndoorMapsComponent_ng_container_11_Template(rf, ctx) {
  if (rf & 1) {
    const _r3 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](1, "div", 16)(2, "h3", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](4, "button", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵlistener"]("click", function IndoorMapsComponent_ng_container_11_Template_button_click_4_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵrestoreView"](_r3);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵresetView"](ctx_r1.search_result_items = []);
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](5, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](6, "close");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]()()();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](7, "ul", 19);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtemplate"](8, IndoorMapsComponent_ng_container_11_li_8_Template, 7, 3, "li", 20);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpipe"](9, "slice");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementContainerEnd"]();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtextInterpolate1"](" Results (", ctx_r1.search_result_items.length || "0", ") ");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("ngForOf", _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpipeBind3"](9, 2, ctx_r1.search_result_items, 0, 10));
  }
}
function calculateDistance(lat1, lon1, lat2, lon2) {
  const radius = 6371; // Earth's radius in kilometers
  const dLat = degreesToRadians(lat2 - lat1);
  const dLon = degreesToRadians(lon2 - lon1);
  lat1 = degreesToRadians(lat1);
  lat2 = degreesToRadians(lat2);
  const a = Math.sin(dLat / 2) * Math.sin(dLat / 2) + Math.sin(dLon / 2) * Math.sin(dLon / 2) * Math.cos(lat1) * Math.cos(lat2);
  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
  return radius * c;
}
function degreesToRadians(degrees) {
  return degrees * (Math.PI / 180);
}
class IndoorMapsComponent extends _placeos_common__WEBPACK_IMPORTED_MODULE_1__.AsyncHandler {
  constructor(_api_service, _state, _org) {
    super();
    this._api_service = _api_service;
    this._state = _state;
    this._org = _org;
    /** Default zoom level for the map */
    this.default_zoom = 19;
    this.live_data_status = 'enabled';
    this.search_result_items = [];
    this.selected_destination = null;
    this.actions_hashmap = {};
    this.user_latitude = null;
    this.user_longitude = null;
    this.geolocation_error_message = '';
    this.route_error_message = '';
    this.coordinates = null;
    this.buildings = this._org.building_list;
    this.building = this._org.active_building;
    this.setBuilding = b => {
      this._org.building = b;
      this._setLocationToBuilding();
    };
    this.levels = (0,rxjs__WEBPACK_IMPORTED_MODULE_7__.combineLatest)([this.building, this._state.options]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.filter)(([_]) => !!_), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.map)(([bld]) => [{
      id: this._org.building.id,
      name: 'All Levels'
    }, ...this._org.levelsForBuilding(bld)]));
    this.floor_mapping = {};
  }
  ngOnInit() {
    var _this = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      _this.loading = true;
      yield _this._org.initialised.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.first)(_ => !!_)).toPromise();
      _this.setBuilding(_this._org.building);
      if (_this.custom_coordinates) _this.coordinates = _this.custom_coordinates;
      const get_location = () => {
        _this._getUserLocation();
        document.removeEventListener('click', get_location);
      };
      document.addEventListener('click', get_location);
      yield _this._initMapView();
    })();
  }
  ngOnChanges(change) {
    var _this2 = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      if (change.styles || change.actions) {
        yield _this2.renderSpaceStatus();
        yield _this2.mapActions();
      }
      if (change.locate && _this2.locate && mapsindoors) {
        const searchParams = {
          q: _this2.searchElement.nativeElement.value
        };
        const locations = yield mapsindoors?.services.LocationsService.getLocations(searchParams);
        if (locations.length) _this2.getRoute(locations[0]);
      }
      _this2.mapFloorsToIndex();
      _this2.loading = false;
    })();
  }
  ngAfterViewInit() {
    this.maps_service?.addListener('click', (location, e) => {
      const found_action = this.actions_hashmap[location.id];
      if (found_action) found_action.callback(e);
    });
  }
  _initMapView() {
    if (!this._api_service.is_ready || !window.mapsindoors) {
      this.timeout('init', () => this._initMapView(), 1000);
      return;
    }
    const view_options = {
      element: document.getElementById('maps-indoors'),
      center: {
        lat: this.user_latitude,
        lng: this.user_longitude
      },
      zoom: this.default_zoom || 19,
      maxZoom: 24
    };
    if (this._api_service.map_service === libs_common_src_lib_mapspeople_service__WEBPACK_IMPORTED_MODULE_4__.MapService.GoogleMaps) {
      (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.log)('MapsIndoors', 'Using Google Maps API');
      this.view_instance = new mapsindoors.mapView.GoogleMapsView(view_options);
    } else {
      view_options.accessToken = this._api_service.map_token;
      (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.log)('MapsIndoors', 'Using Mapbox API');
      this.view_instance = new mapsindoors.mapView.MapboxView(view_options);
    }
    if (!this.view_instance) {
      (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.log)('MapsIndoors', 'Failed to initialise map view instance.', undefined, 'warn');
      return;
    }
    this.maps_service = new mapsindoors.MapsIndoors({
      mapView: this.view_instance
    });
    this.map_instance = this.view_instance.getMap();
    this.initDirections();
    this.handleLocationChange();
    this.mapFloorsToIndex();
    this._setLocationToBuilding();
  }
  initDirections() {
    const provider = this._api_service.map_service === libs_common_src_lib_mapspeople_service__WEBPACK_IMPORTED_MODULE_4__.MapService.GoogleMaps ? new mapsindoors.directions.GoogleMapsProvider() : new mapsindoors.directions.MapboxProvider(this._api_service.map_token);
    this.directions_service = new mapsindoors.services.DirectionsService(provider);
    const directionsRendererOptions = {
      mapsIndoors: this.maps_service
    };
    this.directions_renderer = new mapsindoors.directions.DirectionsRenderer(directionsRendererOptions);
  }
  mapFloorsToIndex() {
    var _this3 = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      const building = yield _this3.maps_service?.getBuilding();
      const input_string = building?.buildingInfo?.fields?.floorMapping?.value;
      const pairs = input_string?.split(',\n').map(pair => pair.split(':'));
      _this3.floor_mapping = pairs?.reduce((lvl_map, [key, value]) => {
        lvl_map[key] = value;
        return lvl_map;
      }, {}) || {};
      const floor_index = yield _this3.maps_service?.getFloor();
      if (floor_index && _this3.floor_mapping) {
        const level_id = _this3.floor_mapping[floor_index];
        _this3._state.setLevel(level_id);
      }
    })();
  }
  handleLocationChange() {
    const floorSelectorElement = document.createElement('div');
    new mapsindoors.FloorSelector(floorSelectorElement, this.maps_service);
    if (this._api_service.map_service === libs_common_src_lib_mapspeople_service__WEBPACK_IMPORTED_MODULE_4__.MapService.GoogleMaps) {
      this.map_instance.controls[google.maps.ControlPosition.RIGHT_TOP].push(floorSelectorElement);
    } else {
      const instance = this.view_instance.getMap();
      instance.addControl({
        onAdd: () => floorSelectorElement,
        onRemove: () => {}
      });
    }
    this.maps_service?.addListener('building_changed', e => {
      const found_building = this._org.buildings.find(building => {
        building.name.toLowerCase() === e.buildingInfo?.name.toLowerCase();
        this.setBuilding(found_building);
      });
    });
    this.maps_service?.addListener('floor_changed', e => {
      if (!e || !this.floor_mapping) return;
      const level_id = this.floor_mapping[e];
      this._state.setLevel(level_id);
    });
  }
  onSearch() {
    const searchParams = {
      q: this.searchElement.nativeElement.value
    };
    mapsindoors?.services.LocationsService.getLocations(searchParams).then(locations => {
      this.search_result_items = locations;
    });
  }
  _getUserLocation() {
    var _this4 = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      if (!('geolocation' in navigator)) {
        (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.log)('MapsIndoors', "User's geolocation not available.", undefined, 'warn');
        return _this4._setLocationToBuilding();
      }
      if (_this4.coordinates) {
        _this4.user_latitude = _this4.coordinates.latitude;
        _this4.user_longitude = _this4.coordinates.longitude;
        return;
      } else {
        navigator.geolocation.watchPosition(_ => _this4._updateGeolocation(_), _ => _this4._handleGeolocationError(_));
        const options = {
          timeout: 10000,
          enableHighAccuracy: true
        };
        navigator.geolocation.getCurrentPosition(position => {
          if (!_this4._userWithinRadius([position.coords.latitude, position.coords.longitude])) {
            // Only use geolocation if user is within 1km of building
            return _this4._setLocationToBuilding();
          }
          _this4._updateGeolocation(position);
          _this4.map_instance.setCenter({
            lat: position.coords.latitude,
            lng: position.coords.longitude
          });
        }, () => _this4._setLocationToBuilding(), options);
      }
    })();
  }
  _userWithinRadius([d_lat, d_long], radius = 1) {
    const [lat_str, long_str] = this._org.building?.location.split(',') || [];
    if (lat_str && long_str) {
      const lat = parseFloat(lat_str);
      const long = parseFloat(long_str);
      const distance = calculateDistance(lat, long, d_lat, d_long);
      if (distance >= radius) return false;
    }
    return true;
  }
  _setLocationToBuilding() {
    (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.log)('MapsIndoors', 'Settings location to building:', [this._org.building?.display_name || this._org.building?.name, this._org.building?.location]);
    const [lat, long] = this._org.building?.location.split(',');
    if (!this.map_instance) return;
    this.map_instance.setCenter({
      lat: parseFloat(lat),
      lng: parseFloat(long)
    });
  }
  _updateGeolocation(updated_location) {
    if (!updated_location?.coords) return;
    (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.log)('MapsIndoors', 'Settings location to user:', updated_location.coords, 'warn');
    const {
      latitude,
      longitude
    } = updated_location.coords;
    if (latitude !== this.user_latitude || longitude !== this.user_longitude) {
      this.user_latitude = latitude;
      this.user_longitude = longitude;
      this.getRoute(this.selected_destination);
    }
  }
  _handleGeolocationError(error) {
    (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.notifyError)(`Error retrieving your geolocation. [${error.message}]`);
  }
  getRoute(location) {
    var _this5 = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      _this5.maps_service?.highlight([]);
      if (!_this5.directions_service || !location) return;
      (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.log)('MapsIndoors', 'Getting route to location:', [location, _this5.user_latitude, _this5.user_longitude]);
      _this5.selected_destination = location;
      const destination = {
        lat: location.properties.anchor.coordinates[1],
        lng: location.properties.anchor.coordinates[0],
        floor: location.properties.floor
      };
      const level_id = (_this5.floor_mapping || {})[location.properties.floor];
      if (level_id) _this5._state.setLevel(level_id);
      if (!_this5._userWithinRadius([_this5.user_latitude, _this5.user_longitude], 1000)) {
        _this5.map_instance.setZoom(19);
        _this5.map_instance.setCenter(destination);
        _this5.maps_service.setFloor(destination.floor);
        _this5.maps_service.highlight([location.id]);
        return;
      }
      if (!_this5.user_latitude || !_this5.user_longitude) {
        return (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.notifyError)('Unable to find a route.');
      }
      const origin = {
        lat: _this5.user_latitude,
        lng: _this5.user_longitude
      };
      const routeParameters = {
        origin: origin,
        destination: destination
      };
      const result = yield _this5.directions_service.getRoute(routeParameters).catch(e => {
        (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.log)('MapsIndoors', 'Error fetching route: ', e.message || e, 'warn');
        const origin_error = e instanceof TypeError && e.message?.includes('origin');
        if (!origin_error) return;
        (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.notifyError)('Error: Origin location is outside of map area.');
      });
      if (!result) return;
      _this5.directions_renderer?.setRoute(result);
    })();
  }
  renderSpaceStatus() {
    var _this6 = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      if (!_this6.styles) return;
      const promises = [];
      for (const key in _this6.styles) {
        const colour = _this6.styles[key]['fill'];
        if (key) {
          const updated_key = key.substring(1);
          promises.push(_this6._setPolygonFill(updated_key, colour));
        }
      }
      return yield Promise.all(promises);
    })();
  }
  mapActions() {
    var _this7 = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      return _this7.actions?.reduce((accumulator, currentValue) => {
        accumulator[currentValue.id] = currentValue;
        return accumulator;
      }, {});
    })();
  }
  _setPolygonFill(location_id, colour) {
    return this.maps_service?.setDisplayRule(location_id, {
      polygonVisible: true,
      polygonFillOpacity: 0.6,
      polygonZoomFrom: 16,
      polygonZoomTo: 22,
      visible: true,
      polygonFillColor: colour
    });
  }
  static #_ = this.ɵfac = function IndoorMapsComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || IndoorMapsComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵdirectiveInject"](_placeos_common__WEBPACK_IMPORTED_MODULE_1__.MapsPeopleService), _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵdirectiveInject"](_explore_src_lib_explore_state_service__WEBPACK_IMPORTED_MODULE_2__.ExploreStateService), _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵdirectiveInject"](_placeos_organisation__WEBPACK_IMPORTED_MODULE_3__.OrganisationService));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵdefineComponent"]({
    type: IndoorMapsComponent,
    selectors: [["indoor-maps"]],
    viewQuery: function IndoorMapsComponent_Query(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵviewQuery"](_c0, 7);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵviewQuery"](_c1, 5);
      }
      if (rf & 2) {
        let _t;
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵloadQuery"]()) && (ctx.searchElement = _t.first);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵloadQuery"]()) && (ctx.searchResults = _t.first);
      }
    },
    inputs: {
      styles: "styles",
      actions: "actions",
      custom_coordinates: "custom_coordinates",
      locate: "locate",
      default_zoom: "default_zoom"
    },
    features: [_angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵInheritDefinitionFeature"], _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵNgOnChangesFeature"]],
    decls: 12,
    vars: 3,
    consts: [["searchInput", ""], ["id", "maps-indoors", 1, "absolute", "inset-0", "flex", "items-center", "justify-center"], ["class", "absolute inset-0 flex items-center justify-center", 4, "ngIf"], ["class", "absolute inset-0 flex flex-col space-y-2 items-center justify-center", 4, "ngIf"], [1, "absolute", "flex", "flex-col", "h-min", "w-min", "top-2", "left-2", "bg-base-100", "text-base-content", "rounded-lg", "z-50", "p-2", "shadow"], ["appearance", "outline", 1, "map", "no-subscript"], ["matInput", "", "name", "location-search", "type", "text", "placeholder", "Search", 3, "keyup.enter"], ["matSuffix", "", 1, "h-10", "relative"], ["icon", "", "name", "indoor-map-search", "matRipple", "", "aria-label", "search button", "matTooltip", "Search...", 1, "hover:bg-base-200", 3, "click"], ["matPrefix", "", 1, "text-2xl", "relative"], [4, "ngIf"], [1, "absolute", "inset-0", "flex", "items-center", "justify-center"], [3, "diameter"], [1, "absolute", "inset-0", "flex", "flex-col", "space-y-2", "items-center", "justify-center"], ["src", "assets/icons/not-found.svg", "alt", "graphic of magnifying glass", "width", "200px", 1, "items-center"], [1, "opacity-60", "text-sm", "text-center", "mt-10"], [1, "flex", "items-center", "justify-between", "px-2", "my-2", "space-x-2"], [1, "font-medium", "text-lg"], ["icon", "", "matRipple", "", "matTooltip", "Clear Results", 1, "hover:bg-base-200", 3, "click"], [1, "list-none", "m-0", "p-0", "w-full", "space-y-2", "max-h-[65vh]", "overflow-auto"], ["class", "w-full even:bg-base-200 hover:bg-base-300 rounded border border-base-200", 4, "ngFor", "ngForOf"], [1, "w-full", "even:bg-base-200", "hover:bg-base-300", "rounded", "border", "border-base-200"], [1, "flex", "items-center", "w-full", "p-2", "space-x-2", "text-left", 3, "click"], [1, "flex", "flex-col", "flex-1"], [1, "opacity-30", "text-xs"]],
    template: function IndoorMapsComponent_Template(rf, ctx) {
      if (rf & 1) {
        const _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵgetCurrentView"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelement"](0, "div", 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtemplate"](1, IndoorMapsComponent_div_1_Template, 2, 1, "div", 2)(2, IndoorMapsComponent_div_2_Template, 5, 3, "div", 3);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](3, "div", 4)(4, "mat-form-field", 5)(5, "input", 6, 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵlistener"]("keyup.enter", function IndoorMapsComponent_Template_input_keyup_enter_5_listener() {
          _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵrestoreView"](_r1);
          return _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵresetView"](ctx.onSearch());
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](7, "div", 7)(8, "button", 8);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵlistener"]("click", function IndoorMapsComponent_Template_button_click_8_listener() {
          _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵrestoreView"](_r1);
          return _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵresetView"](ctx.onSearch());
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](9, "app-icon", 9);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](10, " search ");
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]()()()();
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtemplate"](11, IndoorMapsComponent_ng_container_11_Template, 10, 6, "ng-container", 10);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
      }
      if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("ngIf", ctx.loading);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("ngIf", ctx.geolocation_error_message);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](9);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("ngIf", ctx.search_result_items == null ? null : ctx.search_result_items.length);
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_11__.NgForOf, _angular_common__WEBPACK_IMPORTED_MODULE_11__.NgIf, _angular_material_form_field__WEBPACK_IMPORTED_MODULE_12__.MatFormField, _angular_material_form_field__WEBPACK_IMPORTED_MODULE_12__.MatPrefix, _angular_material_form_field__WEBPACK_IMPORTED_MODULE_12__.MatSuffix, _angular_material_core__WEBPACK_IMPORTED_MODULE_13__.MatRipple, _angular_material_input__WEBPACK_IMPORTED_MODULE_14__.MatInput, _angular_material_progress_spinner__WEBPACK_IMPORTED_MODULE_15__.MatProgressSpinner, _angular_material_tooltip__WEBPACK_IMPORTED_MODULE_16__.MatTooltip, _icon_component__WEBPACK_IMPORTED_MODULE_5__.IconComponent, _angular_common__WEBPACK_IMPORTED_MODULE_11__.SlicePipe, _ngx_translate_core__WEBPACK_IMPORTED_MODULE_17__.TranslatePipe],
    styles: ["[_nghost-%COMP%] {\n                height: 100%;\n                width: 100%;\n            }\n\n            mat-spinner[_ngcontent-%COMP%] {\n                top: 50%;\n                left: 50%;\n                transform: translate(-50%, -50%);\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZG9vci1tYXBzLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1lBQ1k7Z0JBQ0ksWUFBWTtnQkFDWixXQUFXO1lBQ2Y7O1lBRUE7Z0JBQ0ksUUFBUTtnQkFDUixTQUFTO2dCQUNULGdDQUFnQztZQUNwQyIsImZpbGUiOiJpbmRvb3ItbWFwcy5jb21wb25lbnQudHMiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIDpob3N0IHtcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIG1hdC1zcGlubmVyIHtcbiAgICAgICAgICAgICAgICB0b3A6IDUwJTtcbiAgICAgICAgICAgICAgICBsZWZ0OiA1MCU7XG4gICAgICAgICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwgLTUwJSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICJdfQ== */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvY29tcG9uZW50cy9zcmMvbGliL2luZG9vci1tYXBzLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1lBQ1k7Z0JBQ0ksWUFBWTtnQkFDWixXQUFXO1lBQ2Y7O1lBRUE7Z0JBQ0ksUUFBUTtnQkFDUixTQUFTO2dCQUNULGdDQUFnQztZQUNwQzs7QUFFWix3cUJBQXdxQiIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgOmhvc3Qge1xuICAgICAgICAgICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbWF0LXNwaW5uZXIge1xuICAgICAgICAgICAgICAgIHRvcDogNTAlO1xuICAgICAgICAgICAgICAgIGxlZnQ6IDUwJTtcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLCAtNTAlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl0sInNvdXJjZVJvb3QiOiIifQ== */"]
  });
}

/***/ }),

/***/ 24918:
/*!**************************************************************!*\
  !*** ./libs/components/src/lib/interactive-map.component.ts ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   InteractiveMapComponent: () => (/* binding */ InteractiveMapComponent),
/* harmony export */   MAP_FEATURE_DATA: () => (/* binding */ MAP_FEATURE_DATA)
/* harmony export */ });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var _placeos_organisation__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @placeos/organisation */ 2510);
/* harmony import */ var libs_explore_src_lib_explore_state_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! libs/explore/src/lib/explore-state.service */ 12455);








const _c0 = ["*", "*"];
function InteractiveMapComponent_ng_container_0_Template(rf, ctx) {
  if (rf & 1) {
    const _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](1, "map-renderer", 3);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtwoWayListener"]("zoomChange", function InteractiveMapComponent_ng_container_0_Template_map_renderer_zoomChange_1_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵrestoreView"](_r1);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
      _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtwoWayBindingSet"](ctx_r1.zoom, $event) || (ctx_r1.zoom = $event);
      return _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵresetView"]($event);
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵlistener"]("zoomChange", function InteractiveMapComponent_ng_container_0_Template_map_renderer_zoomChange_1_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵrestoreView"](_r1);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵresetView"](ctx_r1.zoomChange.next($event));
    })("mapInfo", function InteractiveMapComponent_ng_container_0_Template_map_renderer_mapInfo_1_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵrestoreView"](_r1);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵresetView"](ctx_r1.mapInfo.next($event));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵprojection"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementContainerEnd"]();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("src", ctx_r1.src);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtwoWayProperty"]("zoom", ctx_r1.zoom);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("reset", ctx_r1.reset)("styles", ctx_r1.styles || (ctx_r1.metadata == null ? null : ctx_r1.metadata.styles))("features", ctx_r1.features || (ctx_r1.metadata == null ? null : ctx_r1.metadata.features))("actions", ctx_r1.actions || (ctx_r1.metadata == null ? null : ctx_r1.metadata.actions))("labels", ctx_r1.labels || (ctx_r1.metadata == null ? null : ctx_r1.metadata.labels));
  }
}
function InteractiveMapComponent_ng_template_2_Template(rf, ctx) {
  if (rf & 1) {
    const _r3 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "maps-indoors", 4);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵlistener"]("zoneChange", function InteractiveMapComponent_ng_template_2_Template_maps_indoors_zoneChange_0_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵrestoreView"](_r3);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵresetView"](ctx_r1.onLevelChange($event));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtwoWayListener"]("zoomChange", function InteractiveMapComponent_ng_template_2_Template_maps_indoors_zoomChange_0_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵrestoreView"](_r3);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
      _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtwoWayBindingSet"](ctx_r1.zoom, $event) || (ctx_r1.zoom = $event);
      return _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵresetView"]($event);
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵlistener"]("zoomChange", function InteractiveMapComponent_ng_template_2_Template_maps_indoors_zoomChange_0_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵrestoreView"](_r3);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵresetView"](ctx_r1.zoomChange.next($event));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵprojection"](1, 1);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("zone", ctx_r1.location);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtwoWayProperty"]("zoom", ctx_r1.zoom);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("options", ctx_r1.options)("reset", ctx_r1.reset)("focus", ctx_r1.focus)("metadata", ctx_r1.metadata);
  }
}
function InteractiveMapComponent_div_4_Template(rf, ctx) {
  if (rf & 1) {
    const _r4 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "div", 5)(1, "button", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵlistener"]("click", function InteractiveMapComponent_div_4_Template_button_click_1_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵrestoreView"](_r4);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵresetView"](ctx_r1.zoom = ctx_r1.zoom * 1.1);
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](2, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](3, "add");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](4, "button", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵlistener"]("click", function InteractiveMapComponent_div_4_Template_button_click_4_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵrestoreView"](_r4);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵresetView"](ctx_r1.zoom = ctx_r1.zoom * (10 / 11));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](5, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](6, "remove");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](7, "button", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵlistener"]("click", function InteractiveMapComponent_div_4_Template_button_click_7_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵrestoreView"](_r4);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵresetView"](ctx_r1.reset = ctx_r1.reset + 1);
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](8, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](9, "refresh");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()()();
  }
}
const MAP_FEATURE_DATA = new _angular_core__WEBPACK_IMPORTED_MODULE_3__.InjectionToken('Data for Map Features');
class InteractiveMapComponent extends _placeos_common__WEBPACK_IMPORTED_MODULE_0__.AsyncHandler {
  get location() {
    return this._org.levels.find(_ => _.map_id === this.src);
  }
  constructor(_mapspeople, _org, _explore) {
    super();
    this._mapspeople = _mapspeople;
    this._org = _org;
    this._explore = _explore;
    this.zoom = 1;
    this.center = {
      x: 0.5,
      y: 0.5
    };
    this.reset = 0;
    this.metadata = {};
    this.options = {};
    this.zoomChange = new _angular_core__WEBPACK_IMPORTED_MODULE_3__.EventEmitter();
    this.centerChange = new _angular_core__WEBPACK_IMPORTED_MODULE_3__.EventEmitter();
    this.mapInfo = new _angular_core__WEBPACK_IMPORTED_MODULE_3__.EventEmitter();
    this.use_mapsindoors$ = this._mapspeople.available$;
  }
  ngOnChanges(changes) {
    if (changes.actions || changes.labels || changes.styles || changes.features) {
      this.metadata = {
        actions: this.actions || [],
        labels: this.labels || [],
        styles: this.styles || {},
        features: this.features || []
      };
    }
  }
  onLevelChange(zone) {
    (0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.log)('Map', 'Level changed to:', zone?.display_name || zone?.name || zone);
    this._explore.setLevel(zone.id);
  }
  static #_ = this.ɵfac = function InteractiveMapComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || InteractiveMapComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵdirectiveInject"](_placeos_common__WEBPACK_IMPORTED_MODULE_0__.MapsPeopleService), _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵdirectiveInject"](_placeos_organisation__WEBPACK_IMPORTED_MODULE_1__.OrganisationService), _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵdirectiveInject"](libs_explore_src_lib_explore_state_service__WEBPACK_IMPORTED_MODULE_2__.ExploreStateService));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵdefineComponent"]({
    type: InteractiveMapComponent,
    selectors: [["interactive-map"]],
    inputs: {
      src: "src",
      zoom: "zoom",
      center: "center",
      reset: "reset",
      metadata: "metadata",
      styles: "styles",
      features: "features",
      labels: "labels",
      actions: "actions",
      options: "options",
      focus: "focus"
    },
    outputs: {
      zoomChange: "zoomChange",
      centerChange: "centerChange",
      mapInfo: "mapInfo"
    },
    features: [_angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵInheritDefinitionFeature"], _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵNgOnChangesFeature"]],
    ngContentSelectors: _c0,
    decls: 5,
    vars: 5,
    consts: [["mapsindoors_template", ""], [4, "ngIf", "ngIfElse"], ["zoom", "", "class", "absolute bottom-16 right-1 border border-base-200 divide-y divide-base-200 shadow flex flex-col bg-base-100 text-base-content rounded overflow-hidden", 4, "ngIf"], [3, "zoomChange", "mapInfo", "src", "zoom", "reset", "styles", "features", "actions", "labels"], [3, "zoneChange", "zoomChange", "zone", "zoom", "options", "reset", "focus", "metadata"], ["zoom", "", 1, "absolute", "bottom-16", "right-1", "border", "border-base-200", "divide-y", "divide-base-200", "shadow", "flex", "flex-col", "bg-base-100", "text-base-content", "rounded", "overflow-hidden"], ["icon", "", "matRipple", "", "matTooltip", "Zoom In", "matTooltipPosition", "left", 1, "rounded-none", 3, "click"], ["icon", "", "matRipple", "", "matTooltip", "Zoom Out", "matTooltipPosition", "left", 1, "rounded-none", 3, "click"], ["icon", "", "matRipple", "", "matTooltip", "Reset Zoom and Position", "matTooltipPosition", "left", 1, "rounded-none", 3, "click"]],
    template: function InteractiveMapComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵprojectionDef"](_c0);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](0, InteractiveMapComponent_ng_container_0_Template, 3, 7, "ng-container", 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipe"](1, "async");
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](2, InteractiveMapComponent_ng_template_2_Template, 2, 6, "ng-template", null, 0, _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplateRefExtractor"])(4, InteractiveMapComponent_div_4_Template, 10, 0, "div", 2);
      }
      if (rf & 2) {
        const mapsindoors_template_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵreference"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", !_angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipeBind1"](1, 3, ctx.use_mapsindoors$))("ngIfElse", mapsindoors_template_r5);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](4);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", ctx.options == null ? null : ctx.options.controls);
      }
    }
  });
}

/***/ }),

/***/ 12354:
/*!***********************************************************!*\
  !*** ./libs/components/src/lib/json-display.component.ts ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   JsonDisplayComponent: () => (/* binding */ JsonDisplayComponent)
/* harmony export */ });
/* harmony import */ var _custom_tooltip_component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./custom-tooltip.component */ 22238);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ 37580);




class JsonDisplayComponent {
  constructor(_data) {
    this.json = _data?.data || '';
    this._updateFormatting();
  }
  ngOnChanges(changes) {
    if (changes.json) {
      this._updateFormatting();
    }
  }
  _updateFormatting() {
    this.formatted_json = JSON.stringify(this.json, undefined, 4);
  }
  static #_ = this.ɵfac = function JsonDisplayComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || JsonDisplayComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](_custom_tooltip_component__WEBPACK_IMPORTED_MODULE_0__.CustomTooltipData, 8));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdefineComponent"]({
    type: JsonDisplayComponent,
    selectors: [["json-display"]],
    inputs: {
      json: "json"
    },
    features: [_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵNgOnChangesFeature"]],
    decls: 3,
    vars: 1,
    consts: [[1, "bg-base-100", "shadow", "rounded", "overflow-auto", "max-w-[80vw]", "max-h-[80vh]", "p-2", "border", "border-base-300"], [1, "font-mono", "text-sm", "bg-base-200", "p-2", "rounded", "break-all", "w-full"]],
    template: function JsonDisplayComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div", 0)(1, "pre", 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]()();
      }
      if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate"](ctx.formatted_json);
      }
    },
    styles: ["pre[_ngcontent-%COMP%] {\n                white-space: pre-wrap; \n\n                white-space: -moz-pre-wrap; \n\n                white-space: -pre-wrap; \n\n                white-space: -o-pre-wrap; \n\n                word-wrap: break-word; \n\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpzb24tZGlzcGxheS5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLHFCQUFxQixFQUFFLGtCQUFrQjtnQkFDekMsMEJBQTBCLEVBQUUsd0JBQXdCO2dCQUNwRCxzQkFBc0IsRUFBRSxjQUFjO2dCQUN0Qyx3QkFBd0IsRUFBRSxZQUFZO2dCQUN0QyxxQkFBcUIsRUFBRSwyQkFBMkI7WUFDdEQiLCJmaWxlIjoianNvbi1kaXNwbGF5LmNvbXBvbmVudC50cyIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgcHJlIHtcbiAgICAgICAgICAgICAgICB3aGl0ZS1zcGFjZTogcHJlLXdyYXA7IC8qIFNpbmNlIENTUyAyLjEgKi9cbiAgICAgICAgICAgICAgICB3aGl0ZS1zcGFjZTogLW1vei1wcmUtd3JhcDsgLyogTW96aWxsYSwgc2luY2UgMTk5OSAqL1xuICAgICAgICAgICAgICAgIHdoaXRlLXNwYWNlOiAtcHJlLXdyYXA7IC8qIE9wZXJhIDQtNiAqL1xuICAgICAgICAgICAgICAgIHdoaXRlLXNwYWNlOiAtby1wcmUtd3JhcDsgLyogT3BlcmEgNyAqL1xuICAgICAgICAgICAgICAgIHdvcmQtd3JhcDogYnJlYWstd29yZDsgLyogSW50ZXJuZXQgRXhwbG9yZXIgNS41KyAqL1xuICAgICAgICAgICAgfVxuICAgICAgICAiXX0= */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvY29tcG9uZW50cy9zcmMvbGliL2pzb24tZGlzcGxheS5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLHFCQUFxQixFQUFFLGtCQUFrQjtnQkFDekMsMEJBQTBCLEVBQUUsd0JBQXdCO2dCQUNwRCxzQkFBc0IsRUFBRSxjQUFjO2dCQUN0Qyx3QkFBd0IsRUFBRSxZQUFZO2dCQUN0QyxxQkFBcUIsRUFBRSwyQkFBMkI7WUFDdEQ7O0FBRVosNDNCQUE0M0IiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIHByZSB7XG4gICAgICAgICAgICAgICAgd2hpdGUtc3BhY2U6IHByZS13cmFwOyAvKiBTaW5jZSBDU1MgMi4xICovXG4gICAgICAgICAgICAgICAgd2hpdGUtc3BhY2U6IC1tb3otcHJlLXdyYXA7IC8qIE1vemlsbGEsIHNpbmNlIDE5OTkgKi9cbiAgICAgICAgICAgICAgICB3aGl0ZS1zcGFjZTogLXByZS13cmFwOyAvKiBPcGVyYSA0LTYgKi9cbiAgICAgICAgICAgICAgICB3aGl0ZS1zcGFjZTogLW8tcHJlLXdyYXA7IC8qIE9wZXJhIDcgKi9cbiAgICAgICAgICAgICAgICB3b3JkLXdyYXA6IGJyZWFrLXdvcmQ7IC8qIEludGVybmV0IEV4cGxvcmVyIDUuNSsgKi9cbiAgICAgICAgICAgIH1cbiAgICAgICAgIl0sInNvdXJjZVJvb3QiOiIifQ== */"]
  });
}

/***/ }),

/***/ 53835:
/*!***************************************************************!*\
  !*** ./libs/components/src/lib/language-tooltip.component.ts ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   LanguageSelectComponent: () => (/* binding */ LanguageSelectComponent)
/* harmony export */ });
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var _placeos_components__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @placeos/components */ 51588);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _ngx_translate_core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @ngx-translate/core */ 597);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _icon_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./icon.component */ 69434);








function LanguageSelectComponent_button_10_Template(rf, ctx) {
  if (rf & 1) {
    const _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "button", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵlistener"]("click", function LanguageSelectComponent_button_10_Template_button_click_0_listener() {
      const lang_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵrestoreView"](_r1).$implicit;
      const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵresetView"](ctx_r2.setLocale(lang_r2.id));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const lang_r2 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtextInterpolate2"](" ", lang_r2.name, " - ", lang_r2.flag, " ");
  }
}
class LanguageSelectComponent {
  get locales() {
    return this._settings.get('app.locales') || [];
  }
  constructor(_data, _settings, _translation) {
    this._data = _data;
    this._settings = _settings;
    this._translation = _translation;
    this.setLocale = code => {
      this._translation.use(code);
      localStorage.setItem('PLACEOS.locale', code);
    };
    this.close = () => this._data?.close();
  }
  static #_ = this.ɵfac = function LanguageSelectComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || LanguageSelectComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵdirectiveInject"](_placeos_components__WEBPACK_IMPORTED_MODULE_1__.CustomTooltipData), _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵdirectiveInject"](_placeos_common__WEBPACK_IMPORTED_MODULE_0__.SettingsService), _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵdirectiveInject"](_ngx_translate_core__WEBPACK_IMPORTED_MODULE_4__.TranslateService));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵdefineComponent"]({
    type: LanguageSelectComponent,
    selectors: [["language-select"]],
    decls: 11,
    vars: 7,
    consts: [[1, "flex", "flex-col", "w-[18.5rem]", "rounded", "bg-base-100", "shadow", "relative", "-top-12", "-right-1", 3, "click"], [1, "flex", "items-center", "space-x-2", "p-2"], [1, "text-2xl"], [1, ""], [1, "text-xs", "opacity-60", "mb-4", "px-2", "p-4"], ["class", "w-full p-4 border-t border-base-200 text-left", 3, "click", 4, "ngFor", "ngForOf"], [1, "w-full", "p-4", "border-t", "border-base-200", "text-left", 3, "click"]],
    template: function LanguageSelectComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "div", 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵlistener"]("click", function LanguageSelectComponent_Template_div_click_0_listener() {
          return ctx.close();
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](1, "div", 1)(2, "app-icon", 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](3, "arrow_back");
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](4, "div", 3);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](5);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipe"](6, "translate");
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](7, "div", 4);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](8);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipe"](9, "translate");
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](10, LanguageSelectComponent_button_10_Template, 2, 2, "button", 5);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
      }
      if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](5);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtextInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipeBind1"](6, 3, "COMMON.LANGUAGE"));
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipeBind1"](9, 5, "COMMON.LANGUAGE_SELECT"), " ");
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngForOf", ctx.locales);
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_5__.NgForOf, _icon_component__WEBPACK_IMPORTED_MODULE_2__.IconComponent, _ngx_translate_core__WEBPACK_IMPORTED_MODULE_4__.TranslatePipe]
  });
}

/***/ }),

/***/ 23666:
/*!***********************************************!*\
  !*** ./libs/components/src/lib/level.pipe.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   LevelPipe: () => (/* binding */ LevelPipe)
/* harmony export */ });
/* harmony import */ var _placeos_organisation__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/organisation */ 2510);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ 37580);



class LevelPipe {
  constructor(_org) {
    this._org = _org;
  }
  transform(id) {
    return this._org.levelWithID(id instanceof Array ? id : [id]);
  }
  static #_ = this.ɵfac = function LevelPipe_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || LevelPipe)(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](_placeos_organisation__WEBPACK_IMPORTED_MODULE_0__.OrganisationService, 16));
  };
  static #_2 = this.ɵpipe = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdefinePipe"]({
    name: "level",
    type: LevelPipe,
    pure: true
  });
}

/***/ }),

/***/ 62897:
/*!**********************************************************!*\
  !*** ./libs/components/src/lib/limit-input.directive.ts ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   LimitInputDirective: () => (/* binding */ LimitInputDirective)
/* harmony export */ });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ 37580);


const ALLOWED_NUMBERS = '0123456789'.split('');
const ALLOWED_DECIMALS = '0123456789.'.split('');
const ALLOWED_LETTERS = 'abcdefghijklmnopqrstuvwxyz'.split('');
const ALLOWED_ALPHANUMERIC = 'abcdefghijklmnopqrstuvwxyz0123456789'.split('');
class LimitInputDirective {
  constructor(_el) {
    this._el = _el;
    this.restriction = 'decimals';
    this.custom_list = [];
  }
  onKeyDown(event) {
    const e = event;
    const key = e.key;
    if (['ArrowLeft', 'ArrowRight', 'Tab', 'Backspace', 'Home'].indexOf(key) !== -1 ||
    // Allow: Ctrl+A
    e.key === 'a' && (e.ctrlKey || e.metaKey) ||
    // Allow: Ctrl+C
    e.key === 'c' && (e.ctrlKey || e.metaKey) ||
    // Allow: Ctrl+V
    e.key === 'v' && (e.ctrlKey || e.metaKey) ||
    // Allow: Ctrl+X
    e.key === 'x' && (e.ctrlKey || e.metaKey)) {
      // let it happen, don't do anything
      return;
    }
    switch (this.restriction) {
      case 'letters':
        if (ALLOWED_LETTERS.indexOf(key) === -1) {
          e.preventDefault();
        }
        break;
      case 'alphanumeric':
        if (ALLOWED_ALPHANUMERIC.indexOf(key) === -1) {
          e.preventDefault();
        }
        break;
      case 'custom':
        if (this.custom_list.indexOf(key) === -1) {
          e.preventDefault();
        }
        break;
      case 'decimals':
        if (ALLOWED_DECIMALS.indexOf(key) === -1) {
          e.preventDefault();
        }
        break;
      case 'number':
      default:
        if (ALLOWED_NUMBERS.indexOf(key) === -1) {
          e.preventDefault();
        }
        break;
    }
  }
  static #_ = this.ɵfac = function LimitInputDirective_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || LimitInputDirective)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_0__.ElementRef));
  };
  static #_2 = this.ɵdir = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineDirective"]({
    type: LimitInputDirective,
    selectors: [["", "limitInput", ""]],
    hostBindings: function LimitInputDirective_HostBindings(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("keydown", function LimitInputDirective_keydown_HostBindingHandler($event) {
          return ctx.onKeyDown($event);
        });
      }
    },
    inputs: {
      restriction: "restriction",
      custom_list: "custom_list"
    }
  });
}

/***/ }),

/***/ 69024:
/*!****************************************************!*\
  !*** ./libs/components/src/lib/login.component.ts ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   LoginComponent: () => (/* binding */ LoginComponent)
/* harmony export */ });
/* harmony import */ var _home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 89204);
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/forms */ 34456);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! rxjs/operators */ 57871);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/core */ 37580);







const _c0 = ["pass_field"];
function LoginComponent_i_3_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](0, "i");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵclassMap"](ctx_r0.logo.class);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtextInterpolate1"](" ", ctx_r0.logo.content, " ");
  }
}
function LoginComponent_img_4_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelement"](0, "img", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipe"](1, "safe");
  }
  if (rf & 2) {
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("src", _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipeBind2"](1, 1, ctx_r0.logo.src, "resource"), _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵsanitizeUrl"]);
  }
}
function LoginComponent_ng_container_6_Template(rf, ctx) {
  if (rf & 1) {
    const _r2 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](1, "div", 12)(2, "label", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](3, " Username ");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](4, "mat-form-field", 14)(5, "input", 15, 1);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵlistener"]("keyup.enter", function LoginComponent_ng_container_6_Template_input_keyup_enter_5_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵrestoreView"](_r2);
      const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵresetView"](ctx_r0.toPassword());
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]()()();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](7, "div", 12)(8, "label", 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](9, "Password");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](10, "mat-form-field", 14)(11, "input", 17, 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵlistener"]("keyup.enter", function LoginComponent_ng_container_6_Template_input_keyup_enter_11_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵrestoreView"](_r2);
      const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵresetView"](ctx_r0.login());
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](13, "mat-error");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](14, "Invalid username or password");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]()()();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementContainerEnd"]();
  }
  if (rf & 2) {
    const username_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵreference"](6);
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵclassProp"]("focused", username_r3 || ctx_r0.focus === "username")("in-focus", ctx_r0.focus === "username");
  }
}
function LoginComponent_div_7_Template(rf, ctx) {
  if (rf & 1) {
    const _r4 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](0, "div", 18)(1, "button", 19);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵlistener"]("click", function LoginComponent_div_7_Template_button_click_1_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵrestoreView"](_r4);
      const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵresetView"](ctx_r0.login());
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](2, " Login ");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]()();
  }
}
function LoginComponent_ng_template_8_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](0, "div", 20);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelement"](1, "mat-spinner", 21);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](2, "p");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](3, "Checking user credentials...");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]()();
  }
}
class LoginComponent {
  /** Logo of the application organisation */
  get logo() {
    return this._settings.get('app.logo_dark') || {
      type: 'icon'
    };
  }
  constructor(_settings) {
    this._settings = _settings;
    this.form = new _angular_forms__WEBPACK_IMPORTED_MODULE_3__.FormGroup({
      username: new _angular_forms__WEBPACK_IMPORTED_MODULE_3__.FormControl('', [_angular_forms__WEBPACK_IMPORTED_MODULE_3__.Validators.required]),
      password: new _angular_forms__WEBPACK_IMPORTED_MODULE_3__.FormControl('', [_angular_forms__WEBPACK_IMPORTED_MODULE_3__.Validators.required])
    });
  }
  ngOnInit() {
    var _this = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      _this.loading = true;
      yield _this._settings.initialised.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.first)(_ => _)).toPromise();
      _this.loading = false;
    })();
  }
  /** Focus on the password field */
  toPassword() {
    if (this.pwd_field && this.pwd_field.nativeElement) {
      this.pwd_field.nativeElement.focus();
    }
  }
  /** Perform user login */
  login() {
    this.loading = true;
    // this._users.login({
    //     username: this.username,
    //     password: this.password
    // }, { form: true }).then(() => {
    //     this.loading = false;
    // }, () => {
    //     this.loading = false;
    //     this.error = true;
    // });
    this.form.setErrors({
      password: 'Invalid username or password'
    });
  }
  static #_ = this.ɵfac = function LoginComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || LoginComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdirectiveInject"](_placeos_common__WEBPACK_IMPORTED_MODULE_1__.SettingsService));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdefineComponent"]({
    type: LoginComponent,
    selectors: [["app-login"]],
    viewQuery: function LoginComponent_Query(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵviewQuery"](_c0, 7);
      }
      if (rf & 2) {
        let _t;
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵloadQuery"]()) && (ctx.pwd_field = _t.first);
      }
    },
    decls: 10,
    vars: 7,
    consts: [["loading_state", ""], ["username", ""], ["pass_field", ""], [1, "fixed", "inset-0", "overflow-auto"], [1, "flex", "flex-col", "items-center", "overflow-hidden", "mx-auto", "my-4", "bg-base-100", "rounded", "shadow", "p-4"], [1, "flex", "items-center", "justify-center"], [3, "class", 4, "ngIf"], [3, "src", 4, "ngIf"], [1, "w-full", "relative", "h-1/3", "flex-1"], [4, "ngIf", "ngIfElse"], ["class", "flex items-center justify-center w-full", 4, "ngIf"], [3, "src"], [1, "flex", "flex-col"], ["for", "username"], ["appearance", "outline"], ["formControlName", "username", 3, "keyup.enter"], ["for", "password"], ["formControlName", "password", 3, "keyup.enter"], [1, "flex", "items-center", "justify-center", "w-full"], ["btn", "", "matRipple", "", "color", "primary", 3, "click"], [1, "absolute", "inset-0", "flex", "flex-col", "items-center", "justify-center", "space-y-2"], ["diameter", "64"]],
    template: function LoginComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](0, "div", 3)(1, "form", 4)(2, "div", 5);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](3, LoginComponent_i_3_Template, 2, 3, "i", 6)(4, LoginComponent_img_4_Template, 2, 4, "img", 7);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](5, "div", 8);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](6, LoginComponent_ng_container_6_Template, 15, 4, "ng-container", 9);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](7, LoginComponent_div_7_Template, 3, 0, "div", 10);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](8, LoginComponent_ng_template_8_Template, 4, 0, "ng-template", null, 0, _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplateRefExtractor"]);
      }
      if (rf & 2) {
        const loading_state_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵreference"](9);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵstyleProp"]("background-color", ctx.logo == null ? null : ctx.logo.background);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngIf", (ctx.logo == null ? null : ctx.logo.type) === "icon");
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngIf", (ctx.logo == null ? null : ctx.logo.type) === "img");
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngIf", !ctx.loading)("ngIfElse", loading_state_r5);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngIf", !ctx.loading);
      }
    },
    styles: ["[_nghost-%COMP%]    > div[_ngcontent-%COMP%] {\n                background-color: #f0f0f0;\n                background-image: url(\"data:image/svg+xml,%3Csvg width='64' height='64' viewBox='0 0 64 64' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M8 16c4.418 0 8-3.582 8-8s-3.582-8-8-8-8 3.582-8 8 3.582 8 8 8zm0-2c3.314 0 6-2.686 6-6s-2.686-6-6-6-6 2.686-6 6 2.686 6 6 6zm33.414-6l5.95-5.95L45.95.636 40 6.586 34.05.636 32.636 2.05 38.586 8l-5.95 5.95 1.414 1.414L40 9.414l5.95 5.95 1.414-1.414L41.414 8zM40 48c4.418 0 8-3.582 8-8s-3.582-8-8-8-8 3.582-8 8 3.582 8 8 8zm0-2c3.314 0 6-2.686 6-6s-2.686-6-6-6-6 2.686-6 6 2.686 6 6 6zM9.414 40l5.95-5.95-1.414-1.414L8 38.586l-5.95-5.95L.636 34.05 6.586 40l-5.95 5.95 1.414 1.414L8 41.414l5.95 5.95 1.414-1.414L9.414 40z' fill='%23ad1457' fill-opacity='0.2' fill-rule='evenodd'/%3E%3C/svg%3E\");\n            }\n\n            form[_ngcontent-%COMP%] {\n                width: 20rem;\n                max-width: calc(100vw - 2rem);\n            }\n\n            img[_ngcontent-%COMP%] {\n                max-height: 3.75rem;\n                max-width: 15rem;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxvZ2luLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1lBQ1k7Z0JBQ0kseUJBQXlCO2dCQUN6Qiw0dEJBQTR0QjtZQUNodUI7O1lBRUE7Z0JBQ0ksWUFBWTtnQkFDWiw2QkFBNkI7WUFDakM7O1lBRUE7Z0JBQ0ksbUJBQW1CO2dCQUNuQixnQkFBZ0I7WUFDcEIiLCJmaWxlIjoibG9naW4uY29tcG9uZW50LnRzIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICA6aG9zdCA+IGRpdiB7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2YwZjBmMDtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoXCJkYXRhOmltYWdlL3N2Zyt4bWwsJTNDc3ZnIHdpZHRoPSc2NCcgaGVpZ2h0PSc2NCcgdmlld0JveD0nMCAwIDY0IDY0JyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnJTNFJTNDcGF0aCBkPSdNOCAxNmM0LjQxOCAwIDgtMy41ODIgOC04cy0zLjU4Mi04LTgtOC04IDMuNTgyLTggOCAzLjU4MiA4IDggOHptMC0yYzMuMzE0IDAgNi0yLjY4NiA2LTZzLTIuNjg2LTYtNi02LTYgMi42ODYtNiA2IDIuNjg2IDYgNiA2em0zMy40MTQtNmw1Ljk1LTUuOTVMNDUuOTUuNjM2IDQwIDYuNTg2IDM0LjA1LjYzNiAzMi42MzYgMi4wNSAzOC41ODYgOGwtNS45NSA1Ljk1IDEuNDE0IDEuNDE0TDQwIDkuNDE0bDUuOTUgNS45NSAxLjQxNC0xLjQxNEw0MS40MTQgOHpNNDAgNDhjNC40MTggMCA4LTMuNTgyIDgtOHMtMy41ODItOC04LTgtOCAzLjU4Mi04IDggMy41ODIgOCA4IDh6bTAtMmMzLjMxNCAwIDYtMi42ODYgNi02cy0yLjY4Ni02LTYtNi02IDIuNjg2LTYgNiAyLjY4NiA2IDYgNnpNOS40MTQgNDBsNS45NS01Ljk1LTEuNDE0LTEuNDE0TDggMzguNTg2bC01Ljk1LTUuOTVMLjYzNiAzNC4wNSA2LjU4NiA0MGwtNS45NSA1Ljk1IDEuNDE0IDEuNDE0TDggNDEuNDE0bDUuOTUgNS45NSAxLjQxNC0xLjQxNEw5LjQxNCA0MHonIGZpbGw9JyUyM2FkMTQ1NycgZmlsbC1vcGFjaXR5PScwLjInIGZpbGwtcnVsZT0nZXZlbm9kZCcvJTNFJTNDL3N2ZyUzRVwiKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZm9ybSB7XG4gICAgICAgICAgICAgICAgd2lkdGg6IDIwcmVtO1xuICAgICAgICAgICAgICAgIG1heC13aWR0aDogY2FsYygxMDB2dyAtIDJyZW0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpbWcge1xuICAgICAgICAgICAgICAgIG1heC1oZWlnaHQ6IDMuNzVyZW07XG4gICAgICAgICAgICAgICAgbWF4LXdpZHRoOiAxNXJlbTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl19 */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvY29tcG9uZW50cy9zcmMvbGliL2xvZ2luLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1lBQ1k7Z0JBQ0kseUJBQXlCO2dCQUN6Qiw0dEJBQTR0QjtZQUNodUI7O1lBRUE7Z0JBQ0ksWUFBWTtnQkFDWiw2QkFBNkI7WUFDakM7O1lBRUE7Z0JBQ0ksbUJBQW1CO2dCQUNuQixnQkFBZ0I7WUFDcEI7O0FBRVosd3dEQUF3d0QiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIDpob3N0ID4gZGl2IHtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjBmMGYwO1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQtaW1hZ2U6IHVybChcImRhdGE6aW1hZ2Uvc3ZnK3htbCwlM0Nzdmcgd2lkdGg9JzY0JyBoZWlnaHQ9JzY0JyB2aWV3Qm94PScwIDAgNjQgNjQnIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyclM0UlM0NwYXRoIGQ9J004IDE2YzQuNDE4IDAgOC0zLjU4MiA4LThzLTMuNTgyLTgtOC04LTggMy41ODItOCA4IDMuNTgyIDggOCA4em0wLTJjMy4zMTQgMCA2LTIuNjg2IDYtNnMtMi42ODYtNi02LTYtNiAyLjY4Ni02IDYgMi42ODYgNiA2IDZ6bTMzLjQxNC02bDUuOTUtNS45NUw0NS45NS42MzYgNDAgNi41ODYgMzQuMDUuNjM2IDMyLjYzNiAyLjA1IDM4LjU4NiA4bC01Ljk1IDUuOTUgMS40MTQgMS40MTRMNDAgOS40MTRsNS45NSA1Ljk1IDEuNDE0LTEuNDE0TDQxLjQxNCA4ek00MCA0OGM0LjQxOCAwIDgtMy41ODIgOC04cy0zLjU4Mi04LTgtOC04IDMuNTgyLTggOCAzLjU4MiA4IDggOHptMC0yYzMuMzE0IDAgNi0yLjY4NiA2LTZzLTIuNjg2LTYtNi02LTYgMi42ODYtNiA2IDIuNjg2IDYgNiA2ek05LjQxNCA0MGw1Ljk1LTUuOTUtMS40MTQtMS40MTRMOCAzOC41ODZsLTUuOTUtNS45NUwuNjM2IDM0LjA1IDYuNTg2IDQwbC01Ljk1IDUuOTUgMS40MTQgMS40MTRMOCA0MS40MTRsNS45NSA1Ljk1IDEuNDE0LTEuNDE0TDkuNDE0IDQweicgZmlsbD0nJTIzYWQxNDU3JyBmaWxsLW9wYWNpdHk9JzAuMicgZmlsbC1ydWxlPSdldmVub2RkJy8lM0UlM0Mvc3ZnJTNFXCIpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmb3JtIHtcbiAgICAgICAgICAgICAgICB3aWR0aDogMjByZW07XG4gICAgICAgICAgICAgICAgbWF4LXdpZHRoOiBjYWxjKDEwMHZ3IC0gMnJlbSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGltZyB7XG4gICAgICAgICAgICAgICAgbWF4LWhlaWdodDogMy43NXJlbTtcbiAgICAgICAgICAgICAgICBtYXgtd2lkdGg6IDE1cmVtO1xuICAgICAgICAgICAgfVxuICAgICAgICAiXSwic291cmNlUm9vdCI6IiJ9 */"]
  });
}

/***/ }),

/***/ 37558:
/*!*********************************************************!*\
  !*** ./libs/components/src/lib/map-canvas.component.ts ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   MapCanvasComponent: () => (/* binding */ MapCanvasComponent)
/* harmony export */ });
/* harmony import */ var _home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 89204);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! rxjs */ 68824);
/* harmony import */ var _interactive_map_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./interactive-map.component */ 24918);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! rxjs/operators */ 33602);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/core */ 37580);







const _c0 = ["canvas"];
const _c1 = ["map-canvas", ""];
class MapCanvasComponent extends _placeos_common__WEBPACK_IMPORTED_MODULE_2__.AsyncHandler {
  get ratioed_height() {
    return +(this.width * this.ratio).toFixed(2);
  }
  constructor(_data) {
    super();
    this._data = _data;
    this.zoom = 1;
    this.ratio = 1;
    this.svg_ratio = 1;
    this.width = 10000;
  }
  ngOnInit() {
    this.subscription('state', (0,rxjs__WEBPACK_IMPORTED_MODULE_3__.combineLatest)([this._data.ratio$, this._data.zoom$, this._data.svg_ratio$]).subscribe(([ratio, zoom, sr]) => this._handleMapChange(ratio, zoom, sr)));
    this.subscription('polygons', this._data.polygons$.subscribe(list => this._handleStateChange(list)));
  }
  _handleMapChange(ratio, zoom, svg_ratio) {
    var _this = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      const old_ratio = _this.ratio;
      _this.zoom = zoom;
      _this.ratio = ratio;
      _this.svg_ratio = svg_ratio;
      const width = _this.width / 10;
      const height = _this.width * _this.ratio / 10;
      if (old_ratio === ratio) return;
      const canvas = _this.canvas_element.nativeElement;
      canvas.width = width;
      canvas.height = height;
      const polygons = yield _this._data.polygons$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.take)(1)).toPromise();
      _this._handleStateChange(polygons);
    })();
  }
  _handleStateChange(polygon_list) {
    const canvas = this.canvas_element.nativeElement;
    const ctx = canvas.getContext('2d');
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    polygon_list.forEach(poly => this._drawPolygon(poly));
  }
  _drawPolygon(polygon) {
    const points = polygon.points;
    if (!points?.length) return;
    const canvas = this.canvas_element.nativeElement;
    const ctx = canvas.getContext('2d');
    const width = canvas.width;
    const height = canvas.height;
    // Draw polygon
    ctx.fillStyle = polygon.color + '80';
    ctx.beginPath();
    ctx.moveTo(points[0][0] * width, points[0][1] * height);
    points.forEach(([x, y]) => ctx.lineTo(x * width, y * height));
    ctx.closePath();
    ctx.fill();
    // Draw Outline
    ctx.strokeStyle = (0,_placeos_common__WEBPACK_IMPORTED_MODULE_2__.shiftColorTowards)(polygon.color, '#888888', 0.5);
    ctx.lineWidth = 3;
    ctx.beginPath();
    ctx.moveTo(points[0][0] * width, points[0][1] * height);
    points.forEach(([x, y]) => ctx.lineTo(x * width, y * height));
    ctx.closePath();
    ctx.stroke();
    // Draw Points
    if (this._data.draw_points !== false) {
      ctx.fillStyle = '#fff';
      ctx.strokeStyle = polygon.color;
      ctx.lineWidth = 4;
      points.forEach(([x, y]) => {
        ctx.beginPath();
        ctx.arc(x * width, y * height, 8, 0, Math.PI * 2);
        ctx.fill();
        ctx.stroke();
      });
    }
    // Draw Text
    if (this._data.draw_labels !== false) {
      const center = points.reduce((acc, [x, y]) => [acc[0] + x, acc[1] + y], [0, 0]);
      center[0] /= points.length;
      center[1] /= points.length;
      ctx.textAlign = 'center';
      ctx.textBaseline = 'middle';
      ctx.fillStyle = '#FFF';
      ctx.font = '32px sans-serif';
      ctx.fillText(polygon.name, center[0] * width + 1, center[1] * height + 2);
      ctx.fillStyle = '#000';
      ctx.fillText(polygon.name, center[0] * width, center[1] * height);
    }
  }
  static #_ = this.ɵfac = function MapCanvasComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || MapCanvasComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵdirectiveInject"](_interactive_map_component__WEBPACK_IMPORTED_MODULE_1__.MAP_FEATURE_DATA));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵdefineComponent"]({
    type: MapCanvasComponent,
    selectors: [["", "map-canvas", ""]],
    viewQuery: function MapCanvasComponent_Query(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵviewQuery"](_c0, 7);
      }
      if (rf & 2) {
        let _t;
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵloadQuery"]()) && (ctx.canvas_element = _t.first);
      }
    },
    features: [_angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵInheritDefinitionFeature"]],
    attrs: _c1,
    decls: 2,
    vars: 4,
    consts: [["canvas", ""], [1, "absolute", "top-1/2", "left-1/2", "-translate-x-1/2", "-translate-y-1/2"]],
    template: function MapCanvasComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelement"](0, "canvas", 1, 0);
      }
      if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵstyleProp"]("width", ctx.width * ctx.svg_ratio * ctx.zoom + "%")("height", ctx.width * ctx.svg_ratio * ctx.ratio * ctx.zoom + "%");
      }
    },
    encapsulation: 2
  });
}

/***/ }),

/***/ 90620:
/*!***************************************************************!*\
  !*** ./libs/components/src/lib/map-locate-modal.component.ts ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   MapLocateModalComponent: () => (/* binding */ MapLocateModalComponent)
/* harmony export */ });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_material_dialog__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/material/dialog */ 12587);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var libs_organisation_src_lib_organisation_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! libs/organisation/src/lib/organisation.service */ 19863);
/* harmony import */ var _map_pin_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./map-pin.component */ 71865);







const _c0 = () => ({
  disable_pan: true,
  disable_zoom: true
});
function MapLocateModalComponent_div_6_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "div", 7)(1, "interactive-map", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelement"](2, "mat-spinner", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](3, "div", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("src", ctx_r0.level == null ? null : ctx_r0.level.map_id)("focus", ctx_r0.item == null ? null : ctx_r0.item.map_id)("features", ctx_r0.features)("options", _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpureFunction0"](5, _c0));
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtextInterpolate1"](" ", (ctx_r0.level == null ? null : ctx_r0.level.display_name) || (ctx_r0.level == null ? null : ctx_r0.level.name), " ");
  }
}
class MapLocateModalComponent extends _placeos_common__WEBPACK_IMPORTED_MODULE_0__.AsyncHandler {
  get level() {
    return this.item.level || this._org.levelWithID(this.item.zones || []);
  }
  constructor(_data, _org) {
    super();
    this._data = _data;
    this._org = _org;
    /** Emitter for user action on the modal */
    this.event = new _angular_core__WEBPACK_IMPORTED_MODULE_3__.EventEmitter();
    /** Space to show the location of on the map */
    this.item = this._data.item;
    /** Mapping of elements to CSS styles */
    this.style_map = {};
    if (!this.item.level?.id) {
      delete this.item.level;
    }
  }
  ngOnInit() {
    this.timeout('init', () => {
      this.processFeature();
      this.processStyles();
    }, 1000);
  }
  processStyles() {
    const styles = {};
    if (this.item?.map_id) {
      styles[`#zones`] = {
        display: 'none'
      };
      styles[`#Zones`] = {
        display: 'none'
      };
    }
    this.style_map = styles;
  }
  /** Point on map to focus on */
  processFeature() {
    if (!this.item) return null;
    const focus = {
      location: this.item.map_id,
      track_id: `focus_item`,
      content: _map_pin_component__WEBPACK_IMPORTED_MODULE_2__.MapPinComponent,
      data: {
        name: this.item.name
      },
      z_index: 99,
      zoom: 100
    };
    this.features = [focus];
  }
  static #_ = this.ɵfac = function MapLocateModalComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || MapLocateModalComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵdirectiveInject"](_angular_material_dialog__WEBPACK_IMPORTED_MODULE_4__.MAT_DIALOG_DATA), _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵdirectiveInject"](libs_organisation_src_lib_organisation_service__WEBPACK_IMPORTED_MODULE_1__.OrganisationService));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵdefineComponent"]({
    type: MapLocateModalComponent,
    selectors: [["map-locate-modal"]],
    outputs: {
      event: "event"
    },
    features: [_angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵInheritDefinitionFeature"]],
    decls: 10,
    vars: 2,
    consts: [[1, "h-[calc(100vh-4rem)]", "w-screen", "sm:h-auto", "sm:w-auto"], [1, "p-4"], [1, "text-2xl"], [1, "ml-2", "text-xl", "font-medium"], ["body", "", "class", "relative overflow-hidden h-[65vh] w-full sm:max-h-[65vh]", 4, "ngIf"], [1, "w-full", "border-t", "border-base-200", "flex", "items-center", "justify-center", "p-2"], ["btn", "", "matRipple", "", "mat-dialog-close", "", 1, "inverse", "w-32"], ["body", "", 1, "relative", "overflow-hidden", "h-[65vh]", "w-full", "sm:max-h-[65vh]"], [1, "pointer-events-none", 3, "src", "focus", "features", "options"], ["diameter", "64"], [1, "absolute", "top-2", "right-2", "py-2", "px-4", "bg-base-100", "rounded-3xl", "shadow", "border", "border-base-200"]],
    template: function MapLocateModalComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "div", 0)(1, "header", 1)(2, "app-icon", 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](3, "place");
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](4, "h1", 3);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](5);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](6, MapLocateModalComponent_div_6_Template, 5, 6, "div", 4);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](7, "footer", 5)(8, "button", 6);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](9, " Close ");
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()()();
      }
      if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](5);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtextInterpolate1"](" ", ctx.item.display_name || ctx.item.name, " ");
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", ctx.level);
      }
    },
    styles: ["[body][_ngcontent-%COMP%] {\n                min-width: 80vw !important;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1hcC1sb2NhdGUtbW9kYWwuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSwwQkFBMEI7WUFDOUIiLCJmaWxlIjoibWFwLWxvY2F0ZS1tb2RhbC5jb21wb25lbnQudHMiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIFtib2R5XSB7XG4gICAgICAgICAgICAgICAgbWluLXdpZHRoOiA4MHZ3ICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICJdfQ== */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvY29tcG9uZW50cy9zcmMvbGliL21hcC1sb2NhdGUtbW9kYWwuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSwwQkFBMEI7WUFDOUI7O0FBRVosZ1pBQWdaIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICBbYm9keV0ge1xuICAgICAgICAgICAgICAgIG1pbi13aWR0aDogODB2dyAhaW1wb3J0YW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAiXSwic291cmNlUm9vdCI6IiJ9 */"]
  });
}

/***/ }),

/***/ 71865:
/*!******************************************************!*\
  !*** ./libs/components/src/lib/map-pin.component.ts ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   MapPinComponent: () => (/* binding */ MapPinComponent)
/* harmony export */ });
/* harmony import */ var _interactive_map_component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./interactive-map.component */ 24918);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/common */ 60316);



const _c0 = ["map-pin", ""];
function MapPinComponent_div_0_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div", 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate1"](" ", ctx_r0.message, " ");
  }
}
function MapPinComponent__svg_svg_1_Template(rf, ctx) {
  if (rf & 1) {
    const _r2 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnamespaceSVG"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "svg", 3);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function MapPinComponent__svg_svg_1_Template_svg_click_0_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r2);
      const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵresetView"](ctx_r0.action());
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "g");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](2, "path", 4);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵclassProp"]("action", ctx_r0.action);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵstyleProp"]("fill", ctx_r0.fill)("stroke", ctx_r0.stroke);
  }
}
class MapPinComponent {
  constructor(_details) {
    this._details = _details;
    /** Message to display above the pin */
    this.message = this._details.message;
    /** Fill colour for the pin SVG */
    this.fill = this._details.fill || '#e53935';
    /** Stroke colour for the pin SVG */
    this.stroke = this._details.stroke || '#fff';
    /** Action to perform when clicking pin */
    this.action = this._details.action || null;
  }
  ngOnInit() {
    setTimeout(() => this.show = true, 300);
    setTimeout(() => this.show_message = true, 1000);
  }
  static #_ = this.ɵfac = function MapPinComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || MapPinComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](_interactive_map_component__WEBPACK_IMPORTED_MODULE_0__.MAP_FEATURE_DATA));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdefineComponent"]({
    type: MapPinComponent,
    selectors: [["", "map-pin", ""]],
    attrs: _c0,
    decls: 2,
    vars: 2,
    consts: [["name", "message", "class", "p-2 m-2 rounded bg-base-100 text-gray-700 shadow", 4, "ngIf"], ["name", "pin", "viewBox", "0 0 380 560", 3, "action", "click", 4, "ngIf"], ["name", "message", 1, "p-2", "m-2", "rounded", "bg-base-100", "text-gray-700", "shadow"], ["name", "pin", "viewBox", "0 0 380 560", 3, "click"], ["stroke-width", "25", "d", "M182.9,551.7c0,0.1,0.2,0.3,0.2,0.3S358.3,283,358.3,194.6c0-130.1-88.8-186.7-175.4-186.9\n            C96.3,7.9,7.5,64.5,7.5,194.6c0,88.4,175.3,357.4,175.3,357.4S182.9,551.7,182.9,551.7z M122.2,187.2c0-33.6,27.2-60.8,60.8-60.8\n            c33.6,0,60.8,27.2,60.8,60.8S216.5,248,182.9,248C149.4,248,122.2,220.8,122.2,187.2z"]],
    template: function MapPinComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](0, MapPinComponent_div_0_Template, 2, 1, "div", 0)(1, MapPinComponent__svg_svg_1_Template, 3, 6, "svg", 1);
      }
      if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", ctx.message && ctx.show_message);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", ctx.show);
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_2__.NgIf],
    styles: ["[_nghost-%COMP%] {\n                position: absolute;\n                bottom: 50%;\n                left: 50%;\n                width: 24rem;\n                display: flex;\n                flex-direction: column;\n                align-items: center;\n                transform: translateX(-50%);\n                z-index: -1;\n            }\n\n            div[_ngcontent-%COMP%] {\n                animation: _ngcontent-%COMP%_fade-in-top 1s;\n            }\n\n            .action[_ngcontent-%COMP%] {\n                pointer-events: auto;\n            }\n\n            svg[_ngcontent-%COMP%] {\n                width: 2rem;\n                animation: _ngcontent-%COMP%_fade-in-top 1s;\n            }\n\n            @keyframes _ngcontent-%COMP%_fade-in-top {\n                0% {\n                    opacity: 0;\n                    transform: translateY(-100%);\n                }\n                100% {\n                    opacity: 1;\n                    transform: translateY(0%);\n                }\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1hcC1waW4uY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxrQkFBa0I7Z0JBQ2xCLFdBQVc7Z0JBQ1gsU0FBUztnQkFDVCxZQUFZO2dCQUNaLGFBQWE7Z0JBQ2Isc0JBQXNCO2dCQUN0QixtQkFBbUI7Z0JBQ25CLDJCQUEyQjtnQkFDM0IsV0FBVztZQUNmOztZQUVBO2dCQUNJLHlCQUF5QjtZQUM3Qjs7WUFFQTtnQkFDSSxvQkFBb0I7WUFDeEI7O1lBRUE7Z0JBQ0ksV0FBVztnQkFDWCx5QkFBeUI7WUFDN0I7O1lBRUE7Z0JBQ0k7b0JBQ0ksVUFBVTtvQkFDViw0QkFBNEI7Z0JBQ2hDO2dCQUNBO29CQUNJLFVBQVU7b0JBQ1YseUJBQXlCO2dCQUM3QjtZQUNKIiwiZmlsZSI6Im1hcC1waW4uY29tcG9uZW50LnRzIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICA6aG9zdCB7XG4gICAgICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICAgICAgICAgIGJvdHRvbTogNTAlO1xuICAgICAgICAgICAgICAgIGxlZnQ6IDUwJTtcbiAgICAgICAgICAgICAgICB3aWR0aDogMjRyZW07XG4gICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKC01MCUpO1xuICAgICAgICAgICAgICAgIHotaW5kZXg6IC0xO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBkaXYge1xuICAgICAgICAgICAgICAgIGFuaW1hdGlvbjogZmFkZS1pbi10b3AgMXM7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC5hY3Rpb24ge1xuICAgICAgICAgICAgICAgIHBvaW50ZXItZXZlbnRzOiBhdXRvO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzdmcge1xuICAgICAgICAgICAgICAgIHdpZHRoOiAycmVtO1xuICAgICAgICAgICAgICAgIGFuaW1hdGlvbjogZmFkZS1pbi10b3AgMXM7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIEBrZXlmcmFtZXMgZmFkZS1pbi10b3Age1xuICAgICAgICAgICAgICAgIDAlIHtcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMDtcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC0xMDAlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgMTAwJSB7XG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDE7XG4gICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgwJSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAiXX0= */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvY29tcG9uZW50cy9zcmMvbGliL21hcC1waW4uY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxrQkFBa0I7Z0JBQ2xCLFdBQVc7Z0JBQ1gsU0FBUztnQkFDVCxZQUFZO2dCQUNaLGFBQWE7Z0JBQ2Isc0JBQXNCO2dCQUN0QixtQkFBbUI7Z0JBQ25CLDJCQUEyQjtnQkFDM0IsV0FBVztZQUNmOztZQUVBO2dCQUNJLHlCQUF5QjtZQUM3Qjs7WUFFQTtnQkFDSSxvQkFBb0I7WUFDeEI7O1lBRUE7Z0JBQ0ksV0FBVztnQkFDWCx5QkFBeUI7WUFDN0I7O1lBRUE7Z0JBQ0k7b0JBQ0ksVUFBVTtvQkFDViw0QkFBNEI7Z0JBQ2hDO2dCQUNBO29CQUNJLFVBQVU7b0JBQ1YseUJBQXlCO2dCQUM3QjtZQUNKOztBQUVaLDR6REFBNHpEIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICA6aG9zdCB7XG4gICAgICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICAgICAgICAgIGJvdHRvbTogNTAlO1xuICAgICAgICAgICAgICAgIGxlZnQ6IDUwJTtcbiAgICAgICAgICAgICAgICB3aWR0aDogMjRyZW07XG4gICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKC01MCUpO1xuICAgICAgICAgICAgICAgIHotaW5kZXg6IC0xO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBkaXYge1xuICAgICAgICAgICAgICAgIGFuaW1hdGlvbjogZmFkZS1pbi10b3AgMXM7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC5hY3Rpb24ge1xuICAgICAgICAgICAgICAgIHBvaW50ZXItZXZlbnRzOiBhdXRvO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzdmcge1xuICAgICAgICAgICAgICAgIHdpZHRoOiAycmVtO1xuICAgICAgICAgICAgICAgIGFuaW1hdGlvbjogZmFkZS1pbi10b3AgMXM7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIEBrZXlmcmFtZXMgZmFkZS1pbi10b3Age1xuICAgICAgICAgICAgICAgIDAlIHtcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMDtcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC0xMDAlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgMTAwJSB7XG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDE7XG4gICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgwJSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAiXSwic291cmNlUm9vdCI6IiJ9 */"]
  });
}

/***/ }),

/***/ 84268:
/*!**********************************************************!*\
  !*** ./libs/components/src/lib/map-polygon.component.ts ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   MapPolygonComponent: () => (/* binding */ MapPolygonComponent)
/* harmony export */ });
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var _interactive_map_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./interactive-map.component */ 24918);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/core */ 37580);




const _c0 = ["map-polygon", ""];
class MapPolygonComponent extends _placeos_common__WEBPACK_IMPORTED_MODULE_0__.AsyncHandler {
  get scale() {
    return this._details.svg_ratio || 1;
  }
  get zoom() {
    return this._details.zoom_value || 1;
  }
  constructor(_details, _cdr) {
    super();
    this._details = _details;
    this._cdr = _cdr;
    /** Message to display above the pin */
    this.name = this._details.name;
    /** Fill colour for the pin SVG */
    this.fill = `${this._details.color || '#e53935'}88`;
    /** Stroke colour for the pin SVG */
    this.stroke = this._details.color || '#e53935';
    this.padding = 32;
    this.width = 1;
    this.height = 1;
    this.svg_scale = 20;
    /** List of points for drawing the polygon */
    this.points = `0,0 0,${this.height} ${this.width},${this.height} ${this.width},0`;
    this.point_list = [];
  }
  ngOnInit() {
    if (this._details.data$) {
      this.subscription('data', this._details.data$.subscribe(_ => {
        this.name = _.name;
        this.fill = `${_.color || '#e53935'}88`;
        this.stroke = _.color || '#e53935';
        this.processPoints(_.points);
      }));
    }
    this.subscription('ratio', this._details.ratio$?.subscribe(_ => {
      this._details.ratio = _;
      this.processPoints(this._details.points);
    }));
    this.subscription('zoom', this._details.zoom$?.subscribe(_ => this._details.zoom_value = _));
    this.subscription('svg_ratio', this._details.svg_ratio$?.subscribe(_ => this._details.svg_ratio = _));
    this.processPoints(this._details.points);
  }
  processPoints(points) {
    const diff = points.reduce((m, [x, y]) => ({
      x_min: x < m.x_min ? x : m.x_min,
      x_max: x > m.x_max ? x : m.x_max,
      y_min: y < m.y_min ? y : m.y_min,
      y_max: y > m.y_max ? y : m.y_max
    }), {
      x_min: 100,
      x_max: -100,
      y_min: 100,
      y_max: -100
    });
    const range = {
      x: diff.x_max - diff.x_min,
      y: diff.y_max - diff.y_min
    };
    const {
      ratio
    } = this._details;
    this.width = range.x * 100;
    this.height = range.y * 100 * (ratio || 1);
    this.width = Math.floor(this.width * 100);
    this.height = Math.floor(this.height * 100);
    this.points = points.reduce((s, [x, y]) => `${s}${s ? ' ' : ''}${(x - diff.x_min) / range.x * this.width / 20},${(y - diff.y_min) / range.y * this.height / 20}`, '').replace(/NaN/g, '0');
    this.point_list = points.map(([x, y]) => [(x - diff.x_min) / range.x * this.width / 20, (y - diff.y_min) / range.y * this.height / 20]);
    this._cdr.detectChanges();
  }
  static #_ = this.ɵfac = function MapPolygonComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || MapPolygonComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdirectiveInject"](_interactive_map_component__WEBPACK_IMPORTED_MODULE_1__.MAP_FEATURE_DATA), _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_2__.ChangeDetectorRef));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdefineComponent"]({
    type: MapPolygonComponent,
    selectors: [["", "map-polygon", ""]],
    features: [_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵInheritDefinitionFeature"]],
    attrs: _c0,
    decls: 6,
    vars: 13,
    consts: [["polygon", "", 1, "absolute", "w-full", "h-full", "transform", "-translate-x-1/2", "-translate-y-1/2", "-top-1", "-left-1"], [1, "absolute", "top-1/2", "left-1/2", "transform", "-translate-x-1/2", "-translate-y-1/2"], ["preserveAspectRatio", "none", 1, "relative", "w-full", "h-full"], ["text", "", 1, "absolute", "top-1/2", "left-1/2", "transform", "-translate-x-1/2", "-translate-y-1/2", "text-shadow", "text-white", "text-xl", "text-center", "whitespace-pre-line"]],
    template: function MapPolygonComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](0, "div", 0)(1, "div", 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnamespaceSVG"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](2, "svg", 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelement"](3, "polygon");
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]()()();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnamespaceHTML"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](4, "div", 3);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](5);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
      }
      if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵstyleProp"]("transform", "scale(" + ctx.scale * ctx.zoom + ")");
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵstyleProp"]("width", ctx.width + "%")("height", ctx.height + "%");
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵattribute"]("viewBox", "0 0 " + (ctx.width / 20 || 1) + " " + (ctx.height / 20 || 1));
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵstyleProp"]("fill", ctx.fill)("stroke", ctx.stroke);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵattribute"]("points", ctx.points);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtextInterpolate1"](" ", ctx.name, " ");
      }
    },
    styles: ["[polygon][_ngcontent-%COMP%] {\n                will-change: transform;\n            }\n\n            polygon[_ngcontent-%COMP%] {\n                stroke-width: 2;\n            }\n            circle[_ngcontent-%COMP%] {\n                stroke-width: 2;\n            }\n\n            [text][_ngcontent-%COMP%] {\n                width: 32rem;\n                max-width: 65vw;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1hcC1wb2x5Z29uLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1lBQ1k7Z0JBQ0ksc0JBQXNCO1lBQzFCOztZQUVBO2dCQUNJLGVBQWU7WUFDbkI7WUFDQTtnQkFDSSxlQUFlO1lBQ25COztZQUVBO2dCQUNJLFlBQVk7Z0JBQ1osZUFBZTtZQUNuQiIsImZpbGUiOiJtYXAtcG9seWdvbi5jb21wb25lbnQudHMiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIFtwb2x5Z29uXSB7XG4gICAgICAgICAgICAgICAgd2lsbC1jaGFuZ2U6IHRyYW5zZm9ybTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcG9seWdvbiB7XG4gICAgICAgICAgICAgICAgc3Ryb2tlLXdpZHRoOiAyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2lyY2xlIHtcbiAgICAgICAgICAgICAgICBzdHJva2Utd2lkdGg6IDI7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIFt0ZXh0XSB7XG4gICAgICAgICAgICAgICAgd2lkdGg6IDMycmVtO1xuICAgICAgICAgICAgICAgIG1heC13aWR0aDogNjV2dztcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl19 */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvY29tcG9uZW50cy9zcmMvbGliL21hcC1wb2x5Z29uLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1lBQ1k7Z0JBQ0ksc0JBQXNCO1lBQzFCOztZQUVBO2dCQUNJLGVBQWU7WUFDbkI7WUFDQTtnQkFDSSxlQUFlO1lBQ25COztZQUVBO2dCQUNJLFlBQVk7Z0JBQ1osZUFBZTtZQUNuQjs7QUFFWixvekJBQW96QiIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgW3BvbHlnb25dIHtcbiAgICAgICAgICAgICAgICB3aWxsLWNoYW5nZTogdHJhbnNmb3JtO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBwb2x5Z29uIHtcbiAgICAgICAgICAgICAgICBzdHJva2Utd2lkdGg6IDI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjaXJjbGUge1xuICAgICAgICAgICAgICAgIHN0cm9rZS13aWR0aDogMjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgW3RleHRdIHtcbiAgICAgICAgICAgICAgICB3aWR0aDogMzJyZW07XG4gICAgICAgICAgICAgICAgbWF4LXdpZHRoOiA2NXZ3O1xuICAgICAgICAgICAgfVxuICAgICAgICAiXSwic291cmNlUm9vdCI6IiJ9 */"]
  });
}

/***/ }),

/***/ 95384:
/*!*********************************************************!*\
  !*** ./libs/components/src/lib/map-radius.component.ts ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   MapRadiusComponent: () => (/* binding */ MapRadiusComponent)
/* harmony export */ });
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! date-fns */ 36156);
/* harmony import */ var _interactive_map_component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./interactive-map.component */ 24918);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/common */ 60316);





const _c0 = ["map-radius", ""];
function MapRadiusComponent_ng_container_0_div_2_span_2_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "span", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate1"](" Last updated: ", ctx_r1.last_seen_at, " ");
  }
}
function MapRadiusComponent_ng_container_0_div_2_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div", 4);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](2, MapRadiusComponent_ng_container_0_div_2_span_2_Template, 2, 1, "span", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵstyleProp"]("top", "-" + ctx_r1.radius / 2 * ctx_r1.zoom + "px");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate1"](" ", ctx_r1.message, " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", ctx_r1.last_seen);
  }
}
function MapRadiusComponent_ng_container_0_Template(rf, ctx) {
  if (rf & 1) {
    const _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0, 1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("resize", function MapRadiusComponent_ng_container_0_Template_ng_container_resize_0_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r1);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵresetView"](ctx_r1.updateRadius());
    }, false, _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵresolveWindow"]);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](1, "div", 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](2, MapRadiusComponent_ng_container_0_div_2_Template, 3, 4, "div", 3);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵstyleProp"]("border-color", ctx_r1.stroke)("background-color", ctx_r1.fill + "40")("width", ctx_r1.radius * ctx_r1.zoom + "px")("height", ctx_r1.radius * ctx_r1.zoom + "px");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", ctx_r1.message && ctx_r1.show_message);
  }
}
class MapRadiusComponent {
  get last_seen_at() {
    return (0,date_fns__WEBPACK_IMPORTED_MODULE_2__.formatDistanceToNow)(this.last_seen * 1000) + ' ago';
  }
  constructor(_details, _el) {
    this._details = _details;
    this._el = _el;
    this.zoom = 1;
    /** Size of the area marked by this component */
    this.radius = this._details.radius || 10;
    /** Message to display above the pin */
    this.message = this._details.message;
    /** Fill colour for the pin SVG */
    this.fill = this._details.fill || '#e53935';
    /** Stroke colour for the pin SVG */
    this.stroke = this._details.stroke || '#e53935';
    this.last_seen = this._details.last_seen || 0;
    this._details.zoom$?.subscribe(v => Math.max(0.5, this.zoom = v || 1));
  }
  ngOnInit() {
    setTimeout(() => this.show = true, 300);
    setTimeout(() => this.show_message = true, 1000);
  }
  ngAfterViewInit() {
    this.updateRadius();
  }
  updateRadius() {
    const box = this._el.nativeElement.getBoundingClientRect();
    if (!box.width) return setTimeout(() => this.updateRadius(), 300);
    this.radius = Math.max(64, (this._details.radius || 10) * (box.width || 10));
  }
  static #_ = this.ɵfac = function MapRadiusComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || MapRadiusComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](_interactive_map_component__WEBPACK_IMPORTED_MODULE_0__.MAP_FEATURE_DATA), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_1__.ElementRef));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdefineComponent"]({
    type: MapRadiusComponent,
    selectors: [["", "map-radius", ""]],
    attrs: _c0,
    decls: 1,
    vars: 1,
    consts: [[3, "resize", 4, "ngIf"], [3, "resize"], ["radius", "", 1, "center", "border-4", "rounded-full", "border-dashed"], ["message", "", "class", "p-2 m-2 rounded bg-base-100 text-gray-700 shadow absolute top-0 whitespace-no-wrap flex flex-col w-64", 3, "top", 4, "ngIf"], ["message", "", 1, "p-2", "m-2", "rounded", "bg-base-100", "text-gray-700", "shadow", "absolute", "top-0", "whitespace-no-wrap", "flex", "flex-col", "w-64"], ["class", "text-xs", 4, "ngIf"], [1, "text-xs"]],
    template: function MapRadiusComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](0, MapRadiusComponent_ng_container_0_Template, 3, 9, "ng-container", 0);
      }
      if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", ctx.show && ctx.radius);
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_3__.NgIf],
    styles: ["[_nghost-%COMP%] {\n                position: absolute;\n                height: 100%;\n                width: 100%;\n            }\n\n            [message][_ngcontent-%COMP%] {\n                transform: translate(-50%, -120%);\n                animation: _ngcontent-%COMP%_fade-in-top 1s;\n            }\n\n            @keyframes _ngcontent-%COMP%_fade-in-top {\n                0% {\n                    opacity: 0;\n                    transform: translate(-50%, -220%);\n                }\n                100% {\n                    opacity: 1;\n                    transform: translate(-50%, -120%);\n                }\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1hcC1yYWRpdXMuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxrQkFBa0I7Z0JBQ2xCLFlBQVk7Z0JBQ1osV0FBVztZQUNmOztZQUVBO2dCQUNJLGlDQUFpQztnQkFDakMseUJBQXlCO1lBQzdCOztZQUVBO2dCQUNJO29CQUNJLFVBQVU7b0JBQ1YsaUNBQWlDO2dCQUNyQztnQkFDQTtvQkFDSSxVQUFVO29CQUNWLGlDQUFpQztnQkFDckM7WUFDSiIsImZpbGUiOiJtYXAtcmFkaXVzLmNvbXBvbmVudC50cyIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgOmhvc3Qge1xuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIFttZXNzYWdlXSB7XG4gICAgICAgICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwgLTEyMCUpO1xuICAgICAgICAgICAgICAgIGFuaW1hdGlvbjogZmFkZS1pbi10b3AgMXM7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIEBrZXlmcmFtZXMgZmFkZS1pbi10b3Age1xuICAgICAgICAgICAgICAgIDAlIHtcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMDtcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwgLTIyMCUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAxMDAlIHtcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMTtcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwgLTEyMCUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgIl19 */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvY29tcG9uZW50cy9zcmMvbGliL21hcC1yYWRpdXMuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxrQkFBa0I7Z0JBQ2xCLFlBQVk7Z0JBQ1osV0FBVztZQUNmOztZQUVBO2dCQUNJLGlDQUFpQztnQkFDakMseUJBQXlCO1lBQzdCOztZQUVBO2dCQUNJO29CQUNJLFVBQVU7b0JBQ1YsaUNBQWlDO2dCQUNyQztnQkFDQTtvQkFDSSxVQUFVO29CQUNWLGlDQUFpQztnQkFDckM7WUFDSjs7QUFFWixvdUNBQW91QyIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgOmhvc3Qge1xuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIFttZXNzYWdlXSB7XG4gICAgICAgICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwgLTEyMCUpO1xuICAgICAgICAgICAgICAgIGFuaW1hdGlvbjogZmFkZS1pbi10b3AgMXM7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIEBrZXlmcmFtZXMgZmFkZS1pbi10b3Age1xuICAgICAgICAgICAgICAgIDAlIHtcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMDtcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwgLTIyMCUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAxMDAlIHtcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMTtcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwgLTEyMCUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgIl0sInNvdXJjZVJvb3QiOiIifQ== */"]
  });
}

/***/ }),

/***/ 39489:
/*!***********************************************************!*\
  !*** ./libs/components/src/lib/map-renderer.component.ts ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   MapRendererComponent: () => (/* binding */ MapRendererComponent)
/* harmony export */ });
/* harmony import */ var _home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 89204);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var _placeos_svg_viewer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @placeos/svg-viewer */ 50304);
/* harmony import */ var _placeos_ts_client__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @placeos/ts-client */ 35713);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! rxjs */ 90521);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! rxjs/operators */ 35443);
/* harmony import */ var _interactive_map_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./interactive-map.component */ 24918);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _angular_material_progress_spinner__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @angular/material/progress-spinner */ 41134);
/* harmony import */ var _sanitise_pipe__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./sanitise.pipe */ 54616);












const _c0 = ["outlet"];
const _c1 = ["feature"];
function MapRendererComponent_ng_container_2_mat_spinner_1_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelement"](0, "mat-spinner", 7);
  }
  if (rf & 2) {
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("diameter", 48);
  }
}
function MapRendererComponent_ng_container_2_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtemplate"](1, MapRendererComponent_ng_container_2_mat_spinner_1_Template, 1, 1, "mat-spinner", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementContainerEnd"]();
  }
  if (rf & 2) {
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("ngIf", !ctx_r0.viewer || ctx_r0.loading);
  }
}
function MapRendererComponent_div_3_ng_container_1_div_1_ng_container_3_ng_container_1_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementContainer"](0);
  }
}
function MapRendererComponent_div_3_ng_container_1_div_1_ng_container_3_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtemplate"](1, MapRendererComponent_div_3_ng_container_1_div_1_ng_container_3_ng_container_1_Template, 1, 0, "ng-container", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementContainerEnd"]();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵnextContext"](2);
    const element_r3 = ctx_r1.$implicit;
    const i_r4 = ctx_r1.index;
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("ngComponentOutlet", element_r3.content)("ngComponentOutletInjector", ctx_r0.injectors[i_r4]);
  }
}
function MapRendererComponent_div_3_ng_container_1_div_1_ng_container_4_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelement"](1, "div", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpipe"](2, "sanitize");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementContainerEnd"]();
  }
  if (rf & 2) {
    const element_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵnextContext"](2).$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("innerHTML", _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpipeBind1"](2, 1, element_r3.content), _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵsanitizeHtml"]);
  }
}
function MapRendererComponent_div_3_ng_container_1_div_1_ng_container_5_ng_container_1_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementContainer"](0);
  }
}
function MapRendererComponent_div_3_ng_container_1_div_1_ng_container_5_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtemplate"](1, MapRendererComponent_div_3_ng_container_1_div_1_ng_container_5_ng_container_1_Template, 1, 0, "ng-container", 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementContainerEnd"]();
  }
  if (rf & 2) {
    const element_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵnextContext"](2).$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("ngTemplateOutlet", element_r3.content)("ngTemplateOutletContext", element_r3.data);
  }
}
function MapRendererComponent_div_3_ng_container_1_div_1_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](0, "div")(1, "div", 11, 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtemplate"](3, MapRendererComponent_div_3_ng_container_1_div_1_ng_container_3_Template, 2, 2, "ng-container", 12)(4, MapRendererComponent_div_3_ng_container_1_div_1_ng_container_4_Template, 3, 3, "ng-container", 12)(5, MapRendererComponent_div_3_ng_container_1_div_1_ng_container_5_Template, 2, 2, "ng-container", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const element_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵnextContext"]().$implicit;
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("ngSwitch", ctx_r0.type(element_r3.content));
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵattribute"]("no-scale", element_r3.no_scale)("el-id", element_r3.location)("track-id", element_r3.track_id)("view-id", ctx_r0.viewer);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("ngSwitchCase", "component");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("ngSwitchCase", "html");
  }
}
function MapRendererComponent_div_3_ng_container_1_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtemplate"](1, MapRendererComponent_div_3_ng_container_1_div_1_Template, 6, 7, "div", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementContainerEnd"]();
  }
  if (rf & 2) {
    const element_r3 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("ngIf", element_r3);
  }
}
function MapRendererComponent_div_3_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](0, "div", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtemplate"](1, MapRendererComponent_div_3_ng_container_1_Template, 2, 1, "ng-container", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("ngForOf", ctx_r0.features)("ngForTrackBy", ctx_r0.trackByFn);
  }
}
function MapRendererComponent_ng_template_4_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](0, "div", 17)(1, "div", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](2, "No map");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]()();
  }
}
function isSamePoint(p1, p2) {
  return p1.x === p2.x && p1.y === p2.y;
}
class MapRendererComponent extends _placeos_common__WEBPACK_IMPORTED_MODULE_1__.AsyncHandler {
  onResize() {
    this.zoom = 1;
    this.center = {
      x: 0.5,
      y: 0.5
    };
    this.updateDisplay();
  }
  type(content) {
    return typeof content === 'string' ? 'html' : content instanceof _angular_core__WEBPACK_IMPORTED_MODULE_6__.TemplateRef ? 'template' : 'component';
  }
  constructor(_injector) {
    super();
    this._injector = _injector;
    /** Zoom level to apply to the SVG */
    this.zoom = 1;
    /** Zoom level to apply to the SVG */
    this.center = {
      x: 0.5,
      y: 0.5
    };
    /** Number of times to reset the map */
    this.reset = 0;
    this.zoomChange = new _angular_core__WEBPACK_IMPORTED_MODULE_6__.EventEmitter();
    this.centerChange = new _angular_core__WEBPACK_IMPORTED_MODULE_6__.EventEmitter();
    this.mapInfo = new _angular_core__WEBPACK_IMPORTED_MODULE_6__.EventEmitter();
    this.injectors = [];
    this.feature_list = [];
    /** Observable for changes on the SVG viewer */
    this._on_changes = new rxjs__WEBPACK_IMPORTED_MODULE_7__.BehaviorSubject(null);
    this._extra_data = {
      ratio$: this._on_changes.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.map)(_ => _.ratio)),
      svg_ratio$: this._on_changes.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.map)(_ => _.svg_ratio)),
      zoom$: this._on_changes.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.map)(_ => _.zoom)),
      position: this._on_changes.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.map)(_ => _.center))
    };
  }
  ngOnInit() {
    (0,_placeos_svg_viewer__WEBPACK_IMPORTED_MODULE_2__.applyGlobalStyles)();
  }
  ngOnDestroy() {
    if (this.viewer) {
      (0,_placeos_svg_viewer__WEBPACK_IMPORTED_MODULE_2__.removeViewer)(this.viewer);
    }
  }
  ngOnChanges(changes) {
    if (changes.src && this.src) {
      this.createView().catch(e => console.warn(e));
    }
    if (changes.features) {
      this.updateInjectors();
    }
    if (this.viewer) {
      if (changes.focus && this.focus) {
        this.focusOn(this.focus);
      } else if (changes.zoom && changes.zoom.previousValue != changes.zoom.currentValue || changes.center && !isSamePoint(changes.center.previousValue, changes.center.currentValue)) {
        this.updateDisplay();
      }
      if (changes.styles || changes.features || changes.labels || changes.actions) {
        this.timeout('update_view', () => this.updateView());
      }
    }
    if (changes.reset && changes.reset.currentValue !== changes.reset.previousValue) {
      this.zoom = 1;
      this.center = {
        x: 0.5,
        y: 0.5
      };
      this.updateDisplay();
    }
  }
  ngAfterViewInit() {
    this.createView().catch(e => console.warn(e));
  }
  /** Update overlays, styles and actions of viewer */
  updateView() {
    try {
      if (!(0,_placeos_svg_viewer__WEBPACK_IMPORTED_MODULE_2__.getViewer)(this.viewer) || this.loading) {
        return this.timeout('update_view', () => this.updateView());
      }
      this.updateFeatureList();
      (0,_placeos_svg_viewer__WEBPACK_IMPORTED_MODULE_2__.updateViewer)(this.viewer, {
        styles: this.styles,
        features: this.feature_list,
        labels: this.labels,
        actions: this.actions,
        options: this.options
      });
    } catch (e) {}
  }
  /** Update zoom and center position of viewer */
  updateDisplay() {
    try {
      (0,_placeos_svg_viewer__WEBPACK_IMPORTED_MODULE_2__.updateViewer)(this.viewer, {
        zoom: this.zoom,
        desired_zoom: this.zoom,
        center: this.center,
        desired_center: this.center,
        options: this.options
      });
    } catch (e) {}
  }
  createView() {
    var _this = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      if (!(0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_3__.authority)()) {
        return _this.timeout('create_view', () => _this.createView().catch(e => console.warn(e)), 300);
      }
      const simp_url = _this.src?.toLowerCase() || '';
      if (!simp_url.includes('svg') && !simp_url.includes('upload')) return;
      if (_this.src && _this._outlet_el?.nativeElement && !_this.loading) {
        _this.loading = true;
        if (_this.viewer) {
          try {
            (0,_placeos_svg_viewer__WEBPACK_IMPORTED_MODULE_2__.updateViewer)(_this.viewer, {
              styles: _this.styles,
              features: [],
              labels: _this.labels,
              actions: _this.actions,
              options: _this.options
            });
            (0,_placeos_svg_viewer__WEBPACK_IMPORTED_MODULE_2__.removeViewer)(_this.viewer);
          } catch (e) {
            console.warn(e);
            return;
          }
        }
        _this.updateFeatureList();
        const tkn = (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_3__.token)();
        document.cookie = `${tkn === 'x-api-key' ? 'api-key=' + encodeURIComponent((0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_3__.apiKey)()) : 'bearer_token=' + encodeURIComponent(tkn)};max-age=30;path=/api/engine/v2/uploads;samesite=strict;${location.protocol === 'https:' ? 'secure;' : ''}`;
        _this.viewer = yield (0,_placeos_svg_viewer__WEBPACK_IMPORTED_MODULE_2__.createViewer)({
          element: _this._outlet_el?.nativeElement,
          url: _this.src,
          styles: _this.styles,
          zoom: _this.zoom,
          desired_zoom: _this.zoom,
          center: _this.center,
          features: _this.feature_list,
          labels: _this.labels,
          actions: _this.actions,
          options: _this.options
        }).catch(e => {
          console.warn(e);
          return '';
        });
        _this.loading = false;
        if (!_this.viewer) return;
        _this.loading = false;
        _this.subscription('view_changes', (0,_placeos_svg_viewer__WEBPACK_IMPORTED_MODULE_2__.listenToViewerChanges)(_this.viewer)?.subscribe(v => {
          const box = _this._outlet_el.nativeElement.getBoundingClientRect();
          _this._on_changes.next({
            ...v
          });
          _this.zoomChange.emit(v.zoom);
          _this.centerChange.emit(v.center);
        }));
        const viewer = (0,_placeos_svg_viewer__WEBPACK_IMPORTED_MODULE_2__.getViewer)(_this.viewer);
        _this.mapInfo.emit(viewer.mappings);
        if (_this.focus) _this.focusOn(_this.focus);
      } else if (_this.src && !_this._outlet_el?.nativeElement || _this.loading) {
        _this.timeout('create_view', () => _this.createView().catch(e => console.warn(e)));
      }
    })();
  }
  focusOn(id) {
    if (!id || !this.viewer) return;
    const viewer = (0,_placeos_svg_viewer__WEBPACK_IMPORTED_MODULE_2__.getViewer)(this.viewer);
    if (!viewer) return;
    const rect = viewer.mappings[id];
    if (!rect) return;
    this.center = {
      x: 1 - (rect.x + rect.w / 2),
      y: 1 - (rect.y + rect.h / 4)
    };
    this.updateDisplay();
  }
  /* istanbul ignore next */
  trackByFn(index, feature) {
    return feature?.track_id;
  }
  updateFeatureList() {
    this.feature_list = (this.features || []).map((f, idx) => ({
      ...f,
      content: this._feature_list.toArray()[idx]?.nativeElement
    })).filter(f => f.content);
  }
  updateInjectors() {
    const old_injectors = this.injectors || [];
    this.injectors = (this.features || []).map(f => old_injectors.find(_ => _.get(_interactive_map_component__WEBPACK_IMPORTED_MODULE_4__.MAP_FEATURE_DATA)?.track_id && _.get(_interactive_map_component__WEBPACK_IMPORTED_MODULE_4__.MAP_FEATURE_DATA)?.track_id === f.track_id) || _angular_core__WEBPACK_IMPORTED_MODULE_6__.Injector.create({
      providers: [{
        provide: _interactive_map_component__WEBPACK_IMPORTED_MODULE_4__.MAP_FEATURE_DATA,
        useValue: {
          track_id: f.track_id,
          ...f.data,
          ...this._extra_data
        }
      }],
      parent: this._injector
    }));
  }
  static #_ = this.ɵfac = function MapRendererComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || MapRendererComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_6__.Injector));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵdefineComponent"]({
    type: MapRendererComponent,
    selectors: [["map-renderer"]],
    viewQuery: function MapRendererComponent_Query(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵviewQuery"](_c0, 5);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵviewQuery"](_c1, 5);
      }
      if (rf & 2) {
        let _t;
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵloadQuery"]()) && (ctx._outlet_el = _t.first);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵloadQuery"]()) && (ctx._feature_list = _t);
      }
    },
    hostBindings: function MapRendererComponent_HostBindings(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵlistener"]("resize", function MapRendererComponent_resize_HostBindingHandler() {
          return ctx.onResize();
        }, false, _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵresolveWindow"]);
      }
    },
    inputs: {
      src: "src",
      styles: "styles",
      zoom: "zoom",
      center: "center",
      features: "features",
      labels: "labels",
      actions: "actions",
      reset: "reset",
      options: "options",
      focus: "focus"
    },
    outputs: {
      zoomChange: "zoomChange",
      centerChange: "centerChange",
      mapInfo: "mapInfo"
    },
    features: [_angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵInheritDefinitionFeature"], _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵNgOnChangesFeature"]],
    decls: 6,
    vars: 5,
    consts: [["outlet", ""], ["empty_state", ""], ["feature", ""], ["tabindex", "0", "role", "map", 1, "absolute", "inset-0"], [4, "ngIf", "ngIfElse"], ["hidden", "", 4, "ngIf"], ["class", "absolute", 3, "diameter", 4, "ngIf"], [1, "absolute", 3, "diameter"], ["hidden", ""], [4, "ngFor", "ngForOf", "ngForTrackBy"], [4, "ngIf"], [1, "pointer-events-none", 3, "ngSwitch"], [4, "ngSwitchCase"], [4, "ngSwitchDefault"], [4, "ngComponentOutlet", "ngComponentOutletInjector"], [3, "innerHTML"], [4, "ngTemplateOutlet", "ngTemplateOutletContext"], [1, "absolute", "inset-0", "flex", "items-center", "justify-center"], [1, "opacity-30"]],
    template: function MapRendererComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelement"](0, "div", 3, 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtemplate"](2, MapRendererComponent_ng_container_2_Template, 2, 1, "ng-container", 4)(3, MapRendererComponent_div_3_Template, 2, 2, "div", 5)(4, MapRendererComponent_ng_template_4_Template, 3, 0, "ng-template", null, 1, _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtemplateRefExtractor"]);
      }
      if (rf & 2) {
        const empty_state_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵreference"](5);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵclassProp"]("hidden", !ctx.src);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("ngIf", ctx.src)("ngIfElse", empty_state_r5);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("ngIf", ctx.injectors == null ? null : ctx.injectors.length);
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_9__.NgComponentOutlet, _angular_common__WEBPACK_IMPORTED_MODULE_9__.NgForOf, _angular_common__WEBPACK_IMPORTED_MODULE_9__.NgIf, _angular_common__WEBPACK_IMPORTED_MODULE_9__.NgTemplateOutlet, _angular_common__WEBPACK_IMPORTED_MODULE_9__.NgSwitch, _angular_common__WEBPACK_IMPORTED_MODULE_9__.NgSwitchCase, _angular_common__WEBPACK_IMPORTED_MODULE_9__.NgSwitchDefault, _angular_material_progress_spinner__WEBPACK_IMPORTED_MODULE_10__.MatProgressSpinner, _sanitise_pipe__WEBPACK_IMPORTED_MODULE_5__.SanitizePipe],
    styles: ["[_nghost-%COMP%] {\n                height: 100%;\n                width: 100%;\n            }\n\n            mat-spinner[_ngcontent-%COMP%] {\n                top: 50%;\n                left: 50%;\n                transform: translate(-50%, -50%);\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1hcC1yZW5kZXJlci5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLFlBQVk7Z0JBQ1osV0FBVztZQUNmOztZQUVBO2dCQUNJLFFBQVE7Z0JBQ1IsU0FBUztnQkFDVCxnQ0FBZ0M7WUFDcEMiLCJmaWxlIjoibWFwLXJlbmRlcmVyLmNvbXBvbmVudC50cyIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgOmhvc3Qge1xuICAgICAgICAgICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbWF0LXNwaW5uZXIge1xuICAgICAgICAgICAgICAgIHRvcDogNTAlO1xuICAgICAgICAgICAgICAgIGxlZnQ6IDUwJTtcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLCAtNTAlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl19 */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvY29tcG9uZW50cy9zcmMvbGliL21hcC1yZW5kZXJlci5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLFlBQVk7Z0JBQ1osV0FBVztZQUNmOztZQUVBO2dCQUNJLFFBQVE7Z0JBQ1IsU0FBUztnQkFDVCxnQ0FBZ0M7WUFDcEM7O0FBRVosd3FCQUF3cUIiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIDpob3N0IHtcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIG1hdC1zcGlubmVyIHtcbiAgICAgICAgICAgICAgICB0b3A6IDUwJTtcbiAgICAgICAgICAgICAgICBsZWZ0OiA1MCU7XG4gICAgICAgICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwgLTUwJSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICJdLCJzb3VyY2VSb290IjoiIn0= */"]
  });
}

/***/ }),

/***/ 30877:
/*!***********************************************************!*\
  !*** ./libs/components/src/lib/maps-indoors.component.ts ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   MapsIndoorsComponent: () => (/* binding */ MapsIndoorsComponent)
/* harmony export */ });
/* harmony import */ var _home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 89204);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _placeos_organisation__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @placeos/organisation */ 2510);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var libs_common_src_lib_mapspeople_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! libs/common/src/lib/mapspeople.service */ 99420);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! rxjs/operators */ 33602);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _angular_material_core__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @angular/material/core */ 74646);
/* harmony import */ var _angular_material_progress_spinner__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @angular/material/progress-spinner */ 41134);
/* harmony import */ var _icon_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./icon.component */ 69434);













const _c0 = ["map_container"];
function MapsIndoorsComponent_button_2_mat_spinner_5_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelement"](0, "mat-spinner", 6);
  }
}
function MapsIndoorsComponent_button_2_Template(rf, ctx) {
  if (rf & 1) {
    const _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "button", 3);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("click", function MapsIndoorsComponent_button_2_Template_button_click_0_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵrestoreView"](_r1);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵresetView"](ctx_r1.toggleDirections());
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](1, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](2, "place");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](3, "div", 4);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](5, MapsIndoorsComponent_button_2_mat_spinner_5_Template, 1, 0, "mat-spinner", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtextInterpolate1"](" ", ctx_r1.viewing_directions ? "Hide" : "Show", " Directions ");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngIf", ctx_r1.loading_directions);
  }
}
const DEFAULT_ZOOM = 18.5;
const RESOURCE_MAP = {};
class MapsIndoorsComponent extends _placeos_common__WEBPACK_IMPORTED_MODULE_2__.AsyncHandler {
  constructor(_maps_people, _org) {
    super();
    this._maps_people = _maps_people;
    this._org = _org;
    this.zoom = DEFAULT_ZOOM;
    this.zoomChange = new _angular_core__WEBPACK_IMPORTED_MODULE_5__.EventEmitter();
    this.zoneChange = new _angular_core__WEBPACK_IMPORTED_MODULE_5__.EventEmitter();
    this.show_directions = false;
    this.viewing_directions = false;
    this.loading_directions = false;
    this.ignore_zoom = false;
    this._floor_list = [];
    this._added_floor_selector = false;
    const data = sessionStorage.getItem('PLACEOS.mapsindoors.resources') || '{}';
    const value = JSON.parse(data);
    for (const key in value) {
      if (value.hasOwnProperty(key)) {
        RESOURCE_MAP[key] = value[key];
      }
    }
  }
  ngOnInit() {
    this.id = (0,_placeos_common__WEBPACK_IMPORTED_MODULE_2__.randomString)(8);
    this._initialised.next(false);
    this._initialiseServices();
  }
  ngOnChanges(changes) {
    if (!this.is_initialised) {
      return this.timeout('on_changes', () => this.ngOnChanges(changes));
    }
    if (changes.zone && this.zone) {
      this._centerOnZone();
    }
    if (changes.focus && this.focus) {
      this._focusOnLocation();
    }
    if (changes.metadata) {
      this._updateMapStyling();
    }
    if (changes.zoom && this.zoom && !this.ignore_zoom) {
      this._services?.map?.setZoom(this.zoom);
    }
    if (changes.reset) {
      this._services?.map?.setZoom(DEFAULT_ZOOM);
      this._centerOnZone();
    }
    if (changes.options) {
      this._addFloorSelector();
    }
  }
  _setResource(id, resource) {
    RESOURCE_MAP[id] = resource;
    this.timeout('set_resource', () => {
      sessionStorage.setItem('PLACEOS.mapsindoors.resources', JSON.stringify(RESOURCE_MAP));
    });
  }
  _initialiseServices() {
    if (!this._maps_people.is_ready || !window.mapsindoors) {
      this.timeout('init', () => this._initialiseServices(), 1000);
      return;
    }
    const [lat, long] = (this._org.building?.location || `-33.8567844,151.2152967`).split(',');
    const view_options = {
      element: this._container.nativeElement,
      center: {
        lat: parseFloat(lat),
        lng: parseFloat(long)
      },
      zoom: DEFAULT_ZOOM,
      maxZoom: 24
    };
    let view_instance = null;
    switch (this._maps_people.map_service) {
      case libs_common_src_lib_mapspeople_service__WEBPACK_IMPORTED_MODULE_3__.MapService.GoogleMaps:
        (0,_placeos_common__WEBPACK_IMPORTED_MODULE_2__.log)('MapsIndoors', 'Using Google Maps API');
        view_instance = new mapsindoors.mapView.GoogleMapsView(view_options);
        break;
      case libs_common_src_lib_mapspeople_service__WEBPACK_IMPORTED_MODULE_3__.MapService.Mapbox:
        view_options.accessToken = this._maps_people.map_token;
        (0,_placeos_common__WEBPACK_IMPORTED_MODULE_2__.log)('MapsIndoors', 'Using Mapbox API');
        view_instance = new mapsindoors.mapView.MapboxView(view_options);
        break;
    }
    if (!view_instance) {
      (0,_placeos_common__WEBPACK_IMPORTED_MODULE_2__.notifyWarn)('Failed to initialise map view.');
      return;
    }
    const provider = this._maps_people.map_service === libs_common_src_lib_mapspeople_service__WEBPACK_IMPORTED_MODULE_3__.MapService.GoogleMaps ? new mapsindoors.directions.GoogleMapsProvider() : new mapsindoors.directions.MapboxProvider(this._maps_people.map_token);
    const maps_indoors = new mapsindoors.MapsIndoors({
      mapView: view_instance
    });
    this._services = {
      mapsindoors: maps_indoors,
      view: view_instance,
      map: view_instance.getMap(),
      directions: new mapsindoors.services.DirectionsService(provider),
      directions_renderer: new mapsindoors.directions.DirectionsRenderer({
        mapsIndoors: maps_indoors
      })
    };
    this._initialised.next(true);
    if (this.zone) {
      this._services.map.setZoom(DEFAULT_ZOOM);
      this._centerOnZone();
    }
    this._addFloorSelector();
    // Add Events listenders
    this._services.mapsindoors.addListener('building_changed', e => this._handleBuildingChange(e));
    this._services.mapsindoors.addListener('floor_changed', e => this._handleLevelChange(e));
    this._services.mapsindoors.addListener('zoom_changed', e => this._handleZoomChange(e));
    this._services.mapsindoors.addListener('click', e => this._handleUserClick(e));
    this.timeout('resize', () => window.dispatchEvent(new Event('resize')), 100);
    window.maps_indoors = this._services;
    this.timeout('focus', () => this._focusOnLocation());
    this.timeout('init_zoom', () => this._handleZoomChange(DEFAULT_ZOOM));
  }
  clearDirections() {
    this._services.directions_renderer.setRoute(null);
    this.viewing_directions = false;
  }
  toggleDirections() {
    var _this = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      if (_this.viewing_directions) {
        _this.clearDirections();
        _this._focusOnLocation();
        return;
      }
      if (!_this.focus) return;
      const items = yield _this._search(_this.focus);
      if (!items?.length) {
        (0,_placeos_common__WEBPACK_IMPORTED_MODULE_2__.notifyError)(`Unable to find location "${_this.focus}".`);
        return;
      }
      _this.loading_directions = true;
      const item = items[0];
      const bld = _this._org.buildings.find(bld => bld.id === _this.zone.parent_id);
      const [d_lng, d_lat] = item.properties?.anchor?.coordinates || bld?.location.split(',') || [37.8136, 144.9631];
      const options = {
        timeout: 10000,
        enableHighAccuracy: true
      };
      navigator.geolocation.getCurrentPosition( /*#__PURE__*/function () {
        var _ref = (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* (position) {
          _this._last_position = position;
          _this.setDirectionsFromLocation({
            lat: position.coords.latitude,
            lng: position.coords.longitude
          }, {
            lat: d_lat,
            lng: d_lng
          });
        });
        return function (_x) {
          return _ref.apply(this, arguments);
        };
      }(), () => {
        if (_this._last_position) {
          _this.setDirectionsFromLocation({
            lat: _this._last_position.coords.latitude,
            lng: _this._last_position.coords.longitude
          }, {
            lat: d_lat,
            lng: d_lng
          });
        } else (0,_placeos_common__WEBPACK_IMPORTED_MODULE_2__.notifyError)('Failed to get your current location.');
      }, options);
    })();
  }
  setDirectionsFromLocation(from, to) {
    var _this2 = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      const distance = (0,_placeos_common__WEBPACK_IMPORTED_MODULE_2__.calculateDistance)(to.lat, to.lng, from.lat, from.lng);
      const routeParameters = {
        origin: {
          lat: from.lat,
          lng: from.lng
        },
        destination: {
          lat: to.lat,
          lng: to.lng
        },
        travelMode: distance < 2 ? 'WALKING' : 'DRIVING'
      };
      const result = yield _this2._services.directions.getRoute(routeParameters).catch(e => {
        (0,_placeos_common__WEBPACK_IMPORTED_MODULE_2__.log)('MapsIndoors', 'Error fetching route: ', e.message || e, 'warn');
        const origin_error = e instanceof TypeError && e.message?.includes('origin');
        _this2.loading_directions = false;
        if (!origin_error) return;
        (0,_placeos_common__WEBPACK_IMPORTED_MODULE_2__.notifyError)('Error: Origin location is outside of map area.');
      });
      if (!result) return;
      _this2._services.directions_renderer.setRoute(result);
      _this2.viewing_directions = true;
      _this2.loading_directions = false;
    })();
  }
  _handleZoomChange(level) {
    this.timeout('zoom_change', () => {
      this.ignore_zoom = true;
      this.zoom = level;
      this.zoomChange.emit(level);
      this.timeout('reset_ignore_zoom', () => this.ignore_zoom = false, 50);
    }, 100);
  }
  _handleBuildingChange(building) {
    const id = building.externalId || building.id;
    (0,_placeos_common__WEBPACK_IMPORTED_MODULE_2__.log)('MapsIndoors', `Building switched to "${id}"`);
    const floors = building.floors || {};
    this._floor_list = Object.keys(floors).map(key => ({
      index: key,
      ...floors[key]
    }));
    (0,_placeos_common__WEBPACK_IMPORTED_MODULE_2__.log)('MapsIndoors', 'Floor List:', this._floor_list);
    if (!this._services) return;
    const bld = this._org.buildings.find(_ => _.id === id || _.map_id === id);
    this.timeout('set_floor', () => {
      const has_set_floor = this._setFloorFromZone();
      if (!has_set_floor && building.defaultFloor) {
        this._handleLevelChange(building.defaultFloor);
      }
    });
    if (!bld) return;
    this._org.building = bld;
    this._last_building = bld.id;
  }
  _handleLevelChange(index) {
    var _this3 = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      (0,_placeos_common__WEBPACK_IMPORTED_MODULE_2__.log)('MapsIndoors', `Level switched to "${index}"`);
      const floor = _this3._floor_list.find(_ => _.index === index);
      const id = floor?.externalId || floor?.id;
      if (!_this3._services) return;
      const levels = yield _this3._org.active_levels.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.take)(1)).toPromise();
      if (!levels) return;
      const new_level = levels.find(_ => _.map_id === id || _.id === id);
      if (!new_level) return;
      _this3.zone = new_level;
      _this3.zoneChange.emit(new_level);
    })();
  }
  _handleUserClick(event) {
    (0,_placeos_common__WEBPACK_IMPORTED_MODULE_2__.log)('MapsIndoors', `Click occurred`, event);
    const id = event.properties?.externalId || event.properties?.roomId || event.id;
    const actions = this.metadata?.actions || [];
    (0,_placeos_common__WEBPACK_IMPORTED_MODULE_2__.log)('MapsIndoors', `Registered Actions`, actions);
    const ignore_actions = ['mousedown', 'touchstart', 'enter', 'leave'];
    for (const action of actions) {
      if ((action.id === id || action.id === '*') && !ignore_actions.includes(action.action)) {
        action.callback(event);
        break;
      }
    }
  }
  _search(query) {
    var _this4 = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      if (!_this4._services) return;
      return mapsindoors?.services.LocationsService.getLocations({
        q: query
      });
    })();
  }
  _updateMapStyling() {
    var _this5 = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      if (!_this5._services) return;
      const styles = _this5.metadata?.styles || {};
      for (const id in styles) {
        if (!styles[id].fill) continue;
        let resource = RESOURCE_MAP[id];
        if (!resource) {
          const id_simple = id.replace(/#/, '');
          const list = yield _this5._search(id_simple);
          if (!list.length) continue;
          resource = list.find(_ => _.properties?.externalId === id_simple || _.properties?.roomId === id_simple || _.id === id_simple);
          if (resource) _this5._setResource(id, resource);
        }
        if (!resource) continue;
        const value = {
          extrusionHeight: 0,
          extrusionVisible: false,
          polygonVisible: true,
          polygonFillColor: styles[id].fill
        };
        _this5._services.mapsindoors.setDisplayRule(resource.id, value);
      }
    })();
  }
  _focusOnLocation() {
    var _this6 = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      if (!_this6.focus) return;
      const items = yield _this6._search(_this6.focus);
      _this6.clearDirections();
      if (!items?.length) {
        (0,_placeos_common__WEBPACK_IMPORTED_MODULE_2__.notifyError)(`Unable to find location ${_this6.focus}.`);
        return;
      }
      const item = items.find(_ => _.properties?.externalId === _this6.focus) || items[0];
      const bld = _this6._org.buildings.find(bld => bld.id === _this6.zone.parent_id);
      const [lng, lat] = item.properties?.anchor?.coordinates || bld?.location.split(',') || [37.8136, 144.9631];
      _this6._services.map.setZoom(DEFAULT_ZOOM);
      _this6._services.map.setCenter({
        lat,
        lng
      });
      _this6._services.mapsindoors.setFloor(item.properties?.floor);
      _this6._services.mapsindoors.highlight([item.id]);
    })();
  }
  _centerOnZone() {
    if (!this._services || !this.zone || this.zone.parent_id === this._last_building || this.zone.id === this._last_building) return;
    this.timeout('set_center', () => {
      const bld = this._org.buildings.find(bld => bld.id === this.zone.parent_id);
      if (!bld) return;
      const [lat, long] = bld?.location.split(',');
      if (!this.focus) {
        this._services.map.setCenter({
          lat: parseFloat(lat),
          lng: parseFloat(long)
        });
      }
      this._setFloorFromZone();
      this._last_building = this.zone.id;
    });
  }
  _setFloorFromZone() {
    if (!this.zone.map_id || !this._services) return false;
    const map_id = this.zone.map_id;
    const floor = this._floor_list.find(_ => _.index === map_id || _.externalId === map_id || _.id === map_id);
    if (!floor) return false;
    this._services.mapsindoors.setFloor(floor.index);
    return true;
  }
  _addFloorSelector() {
    if (!this.options?.controls || this._added_floor_selector) return;
    const element = document.createElement('div');
    new mapsindoors.FloorSelector(element, this._services.mapsindoors);
    if (this._maps_people.map_service === libs_common_src_lib_mapspeople_service__WEBPACK_IMPORTED_MODULE_3__.MapService.GoogleMaps) {
      this._services.map.controls[google.maps.ControlPosition.RIGHT_TOP].push(element);
    } else {
      this._services.map.addControl({
        onAdd: () => element,
        onRemove: () => {}
      });
    }
    this._added_floor_selector = true;
  }
  static #_ = this.ɵfac = function MapsIndoorsComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || MapsIndoorsComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵdirectiveInject"](_placeos_common__WEBPACK_IMPORTED_MODULE_2__.MapsPeopleService), _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵdirectiveInject"](_placeos_organisation__WEBPACK_IMPORTED_MODULE_1__.OrganisationService));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵdefineComponent"]({
    type: MapsIndoorsComponent,
    selectors: [["maps-indoors"]],
    viewQuery: function MapsIndoorsComponent_Query(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵviewQuery"](_c0, 7);
      }
      if (rf & 2) {
        let _t;
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵloadQuery"]()) && (ctx._container = _t.first);
      }
    },
    inputs: {
      zone: "zone",
      metadata: "metadata",
      options: "options",
      focus: "focus",
      zoom: "zoom",
      reset: "reset"
    },
    outputs: {
      zoomChange: "zoomChange",
      zoneChange: "zoneChange"
    },
    features: [_angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵInheritDefinitionFeature"], _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵNgOnChangesFeature"]],
    decls: 3,
    vars: 1,
    consts: [["map_container", ""], [1, "absolute", "inset-0", "z-0"], ["btn", "", "matRipple", "", "class", "absolute bottom-2 left-2 bg-base-100 text-base-content shadow z-10 border-base-200 space-x-2", 3, "click", 4, "ngIf"], ["btn", "", "matRipple", "", 1, "absolute", "bottom-2", "left-2", "bg-base-100", "text-base-content", "shadow", "z-10", "border-base-200", "space-x-2", 3, "click"], [1, "pr-2"], ["diameter", "24", 4, "ngIf"], ["diameter", "24"]],
    template: function MapsIndoorsComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelement"](0, "div", 1, 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](2, MapsIndoorsComponent_button_2_Template, 6, 2, "button", 2);
      }
      if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngIf", ctx.focus && !ctx.show_directions && (ctx.options == null ? null : ctx.options.controls));
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_7__.NgIf, _angular_material_core__WEBPACK_IMPORTED_MODULE_8__.MatRipple, _angular_material_progress_spinner__WEBPACK_IMPORTED_MODULE_9__.MatProgressSpinner, _icon_component__WEBPACK_IMPORTED_MODULE_4__.IconComponent]
  });
}

/***/ }),

/***/ 28975:
/*!********************************************************!*\
  !*** ./libs/components/src/lib/media-duration.pipe.ts ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   MediaDurationPipe: () => (/* binding */ MediaDurationPipe),
/* harmony export */   padLength: () => (/* binding */ padLength)
/* harmony export */ });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ 37580);

function padLength(value, length = 2) {
  let str = `${value}`;
  while (str.length < length) str = `0${str}`;
  return str;
}
class MediaDurationPipe {
  transform(period_length, show_ms = false) {
    const hours = Math.floor(period_length / 60 / 60);
    const minutes = Math.floor(period_length / 60 % 60);
    const seconds = Math.floor(period_length % 60);
    const milliseconds = Math.floor(period_length * 1000 % 1000);
    let str = `${padLength(minutes)}:${padLength(seconds)}`;
    if (show_ms) {
      str += `.${padLength(milliseconds, 3)}`;
    }
    if (hours > 0) str = `${padLength(hours)}:${str}`;
    return str;
  }
  static #_ = this.ɵfac = function MediaDurationPipe_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || MediaDurationPipe)();
  };
  static #_2 = this.ɵpipe = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefinePipe"]({
    name: "mediaDuration",
    type: MediaDurationPipe,
    pure: true
  });
}

/***/ }),

/***/ 74118:
/*!************************************************************!*\
  !*** ./libs/components/src/lib/misconfigured.component.ts ***!
  \************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   MisconfiguredComponent: () => (/* binding */ MisconfiguredComponent)
/* harmony export */ });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ 37580);

class MisconfiguredComponent {
  static #_ = this.ɵfac = function MisconfiguredComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || MisconfiguredComponent)();
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({
    type: MisconfiguredComponent,
    selectors: [["app-misconfigured"]],
    decls: 7,
    vars: 0,
    consts: () => {
      let i18n_0;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_forbiddenLabel$$LIBS_COMPONENTS_SRC_LIB_MISCONFIGURED_COMPONENT_TS_0 = goog.getMsg(" Application Misconfigured. ");
        i18n_0 = MSG_EXTERNAL_forbiddenLabel$$LIBS_COMPONENTS_SRC_LIB_MISCONFIGURED_COMPONENT_TS_0;
      } else {
        i18n_0 = $localize`:@@forbiddenLabel␟182e7b1880a89160c510e11db17c3137d00fed03␟6873959187081594674: Application Misconfigured. `;
      }
      let i18n_1;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_invalidPermissionLabel$$LIBS_COMPONENTS_SRC_LIB_MISCONFIGURED_COMPONENT_TS_1 = goog.getMsg(" This application requires a zone of type org, building and level to operate. ");
        i18n_1 = MSG_EXTERNAL_invalidPermissionLabel$$LIBS_COMPONENTS_SRC_LIB_MISCONFIGURED_COMPONENT_TS_1;
      } else {
        i18n_1 = $localize`:@@invalidPermissionLabel␟8ae6c247ea026216ce78c84ad733caad125e7429␟8256914760043331527: This application requires a zone of type org, building and level to operate. `;
      }
      let i18n_2;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_contactAdminLabel$$LIBS_COMPONENTS_SRC_LIB_MISCONFIGURED_COMPONENT_TS_2 = goog.getMsg(" If this issue persists please contact your administrator. ");
        i18n_2 = MSG_EXTERNAL_contactAdminLabel$$LIBS_COMPONENTS_SRC_LIB_MISCONFIGURED_COMPONENT_TS_2;
      } else {
        i18n_2 = $localize`:@@contactAdminLabel␟511dd82ef95cf509a8d011fa1191ee690b27114c␟5752634679579289146: If this issue persists please contact your administrator. `;
      }
      return [i18n_0, i18n_1, i18n_2, ["content", "", 1, "rounded", "m-4", "text-center", "bg-base-100", "text-black", "border", "border-base-200", "p-4", "shadow"], [1, "text-2xl"], [1, "py-4"]];
    },
    template: function MisconfiguredComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 3)(1, "h3", 4);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵi18n"](2, 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](3, "p", 5);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵi18n"](4, 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](5, "p");
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵi18n"](6, 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()();
      }
    },
    styles: ["[_nghost-%COMP%] {\n                display: flex;\n                align-items: center;\n                justify-content: center;\n            }\n\n            [content][_ngcontent-%COMP%] {\n                width: 28em;\n                max-width: calc(100vw - 1rem);\n            }\n\n            @media (prefers-color-scheme: dark) {\n                [content][_ngcontent-%COMP%] {\n                    background-color: #262626;\n                    color: #fff;\n                }\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1pc2NvbmZpZ3VyZWQuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxhQUFhO2dCQUNiLG1CQUFtQjtnQkFDbkIsdUJBQXVCO1lBQzNCOztZQUVBO2dCQUNJLFdBQVc7Z0JBQ1gsNkJBQTZCO1lBQ2pDOztZQUVBO2dCQUNJO29CQUNJLHlCQUF5QjtvQkFDekIsV0FBVztnQkFDZjtZQUNKIiwiZmlsZSI6Im1pc2NvbmZpZ3VyZWQuY29tcG9uZW50LnRzIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICA6aG9zdCB7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBbY29udGVudF0ge1xuICAgICAgICAgICAgICAgIHdpZHRoOiAyOGVtO1xuICAgICAgICAgICAgICAgIG1heC13aWR0aDogY2FsYygxMDB2dyAtIDFyZW0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBAbWVkaWEgKHByZWZlcnMtY29sb3Itc2NoZW1lOiBkYXJrKSB7XG4gICAgICAgICAgICAgICAgW2NvbnRlbnRdIHtcbiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogIzI2MjYyNjtcbiAgICAgICAgICAgICAgICAgICAgY29sb3I6ICNmZmY7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAiXX0= */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvY29tcG9uZW50cy9zcmMvbGliL21pc2NvbmZpZ3VyZWQuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxhQUFhO2dCQUNiLG1CQUFtQjtnQkFDbkIsdUJBQXVCO1lBQzNCOztZQUVBO2dCQUNJLFdBQVc7Z0JBQ1gsNkJBQTZCO1lBQ2pDOztZQUVBO2dCQUNJO29CQUNJLHlCQUF5QjtvQkFDekIsV0FBVztnQkFDZjtZQUNKOztBQUVaLHdoQ0FBd2hDIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICA6aG9zdCB7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBbY29udGVudF0ge1xuICAgICAgICAgICAgICAgIHdpZHRoOiAyOGVtO1xuICAgICAgICAgICAgICAgIG1heC13aWR0aDogY2FsYygxMDB2dyAtIDFyZW0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBAbWVkaWEgKHByZWZlcnMtY29sb3Itc2NoZW1lOiBkYXJrKSB7XG4gICAgICAgICAgICAgICAgW2NvbnRlbnRdIHtcbiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogIzI2MjYyNjtcbiAgICAgICAgICAgICAgICAgICAgY29sb3I6ICNmZmY7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAiXSwic291cmNlUm9vdCI6IiJ9 */"]
  });
}

/***/ }),

/***/ 44418:
/*!**********************************************************!*\
  !*** ./libs/components/src/lib/popout-menu.component.ts ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   PopoutMenuComponent: () => (/* binding */ PopoutMenuComponent)
/* harmony export */ });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _angular_material_core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/material/core */ 74646);
/* harmony import */ var _icon_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./icon.component */ 69434);






function PopoutMenuComponent_button_0_Template(rf, ctx) {
  if (rf & 1) {
    const _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](0, "button", 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵlistener"]("click", function PopoutMenuComponent_button_0_Template_button_click_0_listener() {
      const item_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵrestoreView"](_r1).$implicit;
      const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"]();
      ctx_r2.action.emit(item_r2.id);
      return _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵresetView"](ctx_r2.show = false);
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelement"](1, "app-icon", 3);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const item_r2 = ctx.$implicit;
    const i_r4 = ctx.index;
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵstyleProp"]("top", ctx_r2.show ? -110 * i_r4 - 60 + "%" : "");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("icon", item_r2);
  }
}
class PopoutMenuComponent extends _placeos_common__WEBPACK_IMPORTED_MODULE_0__.AsyncHandler {
  constructor() {
    super(...arguments);
    /** List of available actions */
    this.actions = [];
    /** Emitter for user actions */
    this.action = new _angular_core__WEBPACK_IMPORTED_MODULE_2__.EventEmitter();
  }
  close() {
    this.timeout('close', () => this.show = false);
  }
  static #_ = this.ɵfac = /*@__PURE__*/(() => {
    let ɵPopoutMenuComponent_BaseFactory;
    return function PopoutMenuComponent_Factory(__ngFactoryType__) {
      return (ɵPopoutMenuComponent_BaseFactory || (ɵPopoutMenuComponent_BaseFactory = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵgetInheritedFactory"](PopoutMenuComponent)))(__ngFactoryType__ || PopoutMenuComponent);
    };
  })();
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdefineComponent"]({
    type: PopoutMenuComponent,
    selectors: [["a-popout-menu"]],
    inputs: {
      actions: "actions"
    },
    outputs: {
      action: "action"
    },
    features: [_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵInheritDefinitionFeature"]],
    decls: 4,
    vars: 4,
    consts: [["icon", "", "matRipple", "", "class", "small absolute text-base center shadow", 3, "top", "click", 4, "ngFor", "ngForOf"], ["name", "root", "icon", "", "matRipple", "", 3, "click"], ["icon", "", "matRipple", "", 1, "small", "absolute", "text-base", "center", "shadow", 3, "click"], [3, "icon"]],
    template: function PopoutMenuComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](0, PopoutMenuComponent_button_0_Template, 2, 3, "button", 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](1, "button", 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵlistener"]("click", function PopoutMenuComponent_Template_button_click_1_listener() {
          return ctx.show = !ctx.show;
        })("click", function PopoutMenuComponent_Template_button_click_1_listener() {
          return ctx.show ? ctx.close() : "";
        }, false, _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵresolveWindow"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](2, "app-icon");
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]()();
      }
      if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngForOf", ctx.actions);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵclassProp"]("show", ctx.show);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtextInterpolate"](ctx.show ? "add" : "more_vert");
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_3__.NgForOf, _angular_material_core__WEBPACK_IMPORTED_MODULE_4__.MatRipple, _icon_component__WEBPACK_IMPORTED_MODULE_1__.IconComponent],
    styles: ["[_nghost-%COMP%] {\n                position: relative;\n            }\n\n            app-icon[_ngcontent-%COMP%] {\n                transition: transform 200ms;\n            }\n\n            button[_ngcontent-%COMP%] {\n                background-color: #fff;\n                color: rgba(#000, 0.85);\n                font-size: 1.25rem;\n                height: 2.5em;\n                width: 2.5em;\n            }\n\n            button.show[_ngcontent-%COMP%]   app-icon[_ngcontent-%COMP%] {\n                transform: rotate(45deg);\n            }\n\n            button.small[_ngcontent-%COMP%] {\n                transition: top 200ms, left 200ms;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBvcG91dC1tZW51LmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1lBQ1k7Z0JBQ0ksa0JBQWtCO1lBQ3RCOztZQUVBO2dCQUNJLDJCQUEyQjtZQUMvQjs7WUFFQTtnQkFDSSxzQkFBc0I7Z0JBQ3RCLHVCQUF1QjtnQkFDdkIsa0JBQWtCO2dCQUNsQixhQUFhO2dCQUNiLFlBQVk7WUFDaEI7O1lBRUE7Z0JBQ0ksd0JBQXdCO1lBQzVCOztZQUVBO2dCQUNJLGlDQUFpQztZQUNyQyIsImZpbGUiOiJwb3BvdXQtbWVudS5jb21wb25lbnQudHMiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIDpob3N0IHtcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGFwcC1pY29uIHtcbiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uOiB0cmFuc2Zvcm0gMjAwbXM7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGJ1dHRvbiB7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjtcbiAgICAgICAgICAgICAgICBjb2xvcjogcmdiYSgjMDAwLCAwLjg1KTtcbiAgICAgICAgICAgICAgICBmb250LXNpemU6IDEuMjVyZW07XG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAyLjVlbTtcbiAgICAgICAgICAgICAgICB3aWR0aDogMi41ZW07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGJ1dHRvbi5zaG93IGFwcC1pY29uIHtcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IHJvdGF0ZSg0NWRlZyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGJ1dHRvbi5zbWFsbCB7XG4gICAgICAgICAgICAgICAgdHJhbnNpdGlvbjogdG9wIDIwMG1zLCBsZWZ0IDIwMG1zO1xuICAgICAgICAgICAgfVxuICAgICAgICAiXX0= */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvY29tcG9uZW50cy9zcmMvbGliL3BvcG91dC1tZW51LmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1lBQ1k7Z0JBQ0ksa0JBQWtCO1lBQ3RCOztZQUVBO2dCQUNJLDJCQUEyQjtZQUMvQjs7WUFFQTtnQkFDSSxzQkFBc0I7Z0JBQ3RCLHVCQUF1QjtnQkFDdkIsa0JBQWtCO2dCQUNsQixhQUFhO2dCQUNiLFlBQVk7WUFDaEI7O1lBRUE7Z0JBQ0ksd0JBQXdCO1lBQzVCOztZQUVBO2dCQUNJLGlDQUFpQztZQUNyQzs7QUFFWiw0dENBQTR0QyIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgOmhvc3Qge1xuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYXBwLWljb24ge1xuICAgICAgICAgICAgICAgIHRyYW5zaXRpb246IHRyYW5zZm9ybSAyMDBtcztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYnV0dG9uIHtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmO1xuICAgICAgICAgICAgICAgIGNvbG9yOiByZ2JhKCMwMDAsIDAuODUpO1xuICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMS4yNXJlbTtcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDIuNWVtO1xuICAgICAgICAgICAgICAgIHdpZHRoOiAyLjVlbTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYnV0dG9uLnNob3cgYXBwLWljb24ge1xuICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogcm90YXRlKDQ1ZGVnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYnV0dG9uLnNtYWxsIHtcbiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uOiB0b3AgMjAwbXMsIGxlZnQgMjAwbXM7XG4gICAgICAgICAgICB9XG4gICAgICAgICJdLCJzb3VyY2VSb290IjoiIn0= */"]
  });
}

/***/ }),

/***/ 74846:
/*!********************************************************!*\
  !*** ./libs/components/src/lib/printable.component.ts ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   PrintableComponent: () => (/* binding */ PrintableComponent)
/* harmony export */ });
/* harmony import */ var _angular_cdk_portal__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/cdk/portal */ 9168);
/* harmony import */ var libs_common_src_lib_async_handler_class__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! libs/common/src/lib/async-handler.class */ 75354);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_cdk_overlay__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/cdk/overlay */ 81570);
/* harmony import */ var _sanitise_pipe__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./sanitise.pipe */ 54616);








const _c0 = ["printable", ""];
const _c1 = ["*"];
function PrintableComponent_ng_template_1_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelement"](0, "div", 1);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipe"](1, "sanitize");
  }
  if (rf & 2) {
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("innerHTML", _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipeBind1"](1, 1, ctx_r0.content), _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵsanitizeHtml"]);
  }
}
class PrintableComponent extends libs_common_src_lib_async_handler_class__WEBPACK_IMPORTED_MODULE_0__.AsyncHandler {
  constructor(_overlay, _elem) {
    super();
    this._overlay = _overlay;
    this._elem = _elem;
    this.content = '';
    this._overlay_ref = null;
  }
  ngOnInit() {
    this.open();
  }
  ngAfterViewInit() {
    this.content = this._elem.nativeElement.outerHTML;
  }
  ngOnDestroy() {
    super.ngOnDestroy();
    this.close();
  }
  open() {
    this.timeout('open', () => {
      if (this._overlay_ref) this.close();
      if (!this._portal) return;
      const default_x = 'end';
      const default_y = 'top';
      this._overlay_ref = this._overlay.create({
        hasBackdrop: false,
        positionStrategy: this._overlay.position().flexibleConnectedTo(document.body).withPositions([{
          originX: default_x,
          originY: default_y,
          overlayX: default_x,
          overlayY: default_y
        }])
      });
      this._overlay_ref.attach(this._portal);
    }, 50);
  }
  close() {
    this.clearTimeout('open');
    if (this._overlay_ref) {
      this._overlay_ref.dispose();
      this._overlay_ref = null;
    }
  }
  static #_ = this.ɵfac = function PrintableComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || PrintableComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdirectiveInject"](_angular_cdk_overlay__WEBPACK_IMPORTED_MODULE_3__.Overlay), _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_2__.ElementRef));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdefineComponent"]({
    type: PrintableComponent,
    selectors: [["", "printable", ""]],
    viewQuery: function PrintableComponent_Query(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵviewQuery"](_angular_cdk_portal__WEBPACK_IMPORTED_MODULE_4__.CdkPortal, 5);
      }
      if (rf & 2) {
        let _t;
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵloadQuery"]()) && (ctx._portal = _t.first);
      }
    },
    features: [_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵInheritDefinitionFeature"]],
    attrs: _c0,
    ngContentSelectors: _c1,
    decls: 2,
    vars: 0,
    consts: [["cdk-portal", ""], ["printable-view", "", 1, "fixed", "top-0", "left-0", "flex-col", "items-end", "hidden", "print:flex", "pointer-events-none", 3, "innerHTML"]],
    template: function PrintableComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵprojectionDef"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵprojection"](0);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](1, PrintableComponent_ng_template_1_Template, 2, 3, "ng-template", 0);
      }
    },
    dependencies: [_angular_cdk_portal__WEBPACK_IMPORTED_MODULE_4__.TemplatePortalDirective, _sanitise_pipe__WEBPACK_IMPORTED_MODULE_1__.SanitizePipe],
    encapsulation: 2
  });
}

/***/ }),

/***/ 68283:
/*!*******************************************************!*\
  !*** ./libs/components/src/lib/redirect.component.ts ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   RedirectComponent: () => (/* binding */ RedirectComponent)
/* harmony export */ });
/* harmony import */ var _home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 89204);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! rxjs/operators */ 57871);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var libs_organisation_src_lib_organisation_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! libs/organisation/src/lib/organisation.service */ 19863);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/router */ 95072);









class RedirectComponent {
  constructor(_settings, _org, _router) {
    this._settings = _settings;
    this._org = _org;
    this._router = _router;
  }
  ngOnInit() {
    var _this = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      yield _this._settings.initialised.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.first)(_ => _)).toPromise();
      yield _this._org.initialised.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.first)(_ => _)).toPromise();
      if (!_this._settings.get('app.default_route')) return;
      _this._router.navigate(_this._settings.get('app.default_route').split('/'));
    })();
  }
  static #_ = this.ɵfac = function RedirectComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || RedirectComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵdirectiveInject"](_placeos_common__WEBPACK_IMPORTED_MODULE_1__.SettingsService), _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵdirectiveInject"](libs_organisation_src_lib_organisation_service__WEBPACK_IMPORTED_MODULE_2__.OrganisationService), _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵdirectiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_5__.Router));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵdefineComponent"]({
    type: RedirectComponent,
    selectors: [["page-redirect"]],
    decls: 0,
    vars: 0,
    template: function RedirectComponent_Template(rf, ctx) {}
  });
}

/***/ }),

/***/ 66962:
/*!************************************************************!*\
  !*** ./libs/components/src/lib/region-select.component.ts ***!
  \************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   RegionSelectComponent: () => (/* binding */ RegionSelectComponent)
/* harmony export */ });
/* harmony import */ var _home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 89204);
/* harmony import */ var _placeos_components__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @placeos/components */ 51588);
/* harmony import */ var _placeos_organisation__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @placeos/organisation */ 2510);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @angular/forms */ 34456);
/* harmony import */ var _angular_material_radio__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @angular/material/radio */ 53804);
/* harmony import */ var _icon_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./icon.component */ 69434);









function RegionSelectComponent_mat_radio_button_12_Template(rf, ctx) {
  if (rf & 1) {
    const _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](0, "mat-radio-button", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵlistener"]("click", function RegionSelectComponent_mat_radio_button_12_Template_mat_radio_button_click_0_listener() {
      const item_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵrestoreView"](_r1).$implicit;
      const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵresetView"](ctx_r2.setRegion(item_r2));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const item_r2 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("value", item_r2.id);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtextInterpolate1"](" ", item_r2.display_name || item_r2.name, " ");
  }
}
class RegionSelectComponent {
  constructor(_data, _org) {
    var _this = this;
    this._data = _data;
    this._org = _org;
    this.regions = this._org.region_list;
    this.region = this._org.active_region;
    this.setRegion = /*#__PURE__*/function () {
      var _ref = (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* (i) {
        yield _this._org.setRegion(i);
        _this._org.saveBuilding(_this._org.building.id);
        _this._data?.close();
      });
      return function (_x) {
        return _ref.apply(this, arguments);
      };
    }();
    this.close = () => this._data?.close();
  }
  static #_ = this.ɵfac = function RegionSelectComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || RegionSelectComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵdirectiveInject"](_placeos_components__WEBPACK_IMPORTED_MODULE_1__.CustomTooltipData), _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵdirectiveInject"](_placeos_organisation__WEBPACK_IMPORTED_MODULE_2__.OrganisationService));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵdefineComponent"]({
    type: RegionSelectComponent,
    selectors: [["region-select"]],
    decls: 14,
    vars: 11,
    consts: () => {
      let i18n_0;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_5361505502593902636$$LIBS_COMPONENTS_SRC_LIB_REGION_SELECT_COMPONENT_TS_0 = goog.getMsg("Select a region");
        i18n_0 = MSG_EXTERNAL_5361505502593902636$$LIBS_COMPONENTS_SRC_LIB_REGION_SELECT_COMPONENT_TS_0;
      } else {
        i18n_0 = $localize`:␟234e996785a944c8e8c7df16179eaa04405b3446␟5361505502593902636:Select a region`;
      }
      return [i18n_0, [1, "flex", "flex-col", "w-[18.5rem]", "rounded", "bg-base-100", "shadow", "p-2", "relative", "-top-12", "-right-1", "overflow-auto", "max-h-[65vh]", 3, "click"], [1, "flex", "items-center", "space-x-2"], [1, "text-2xl"], [1, ""], [1, "text-xs", "opacity-60", "mb-4", "px-2"], [1, "flex", "flex-col", "space-y-2", "px-2", 3, "ngModel"], [3, "value", "click", 4, "ngFor", "ngForOf"], [3, "click", "value"]];
    },
    template: function RegionSelectComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](0, "div", 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵlistener"]("click", function RegionSelectComponent_Template_div_click_0_listener() {
          return ctx.close();
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](1, "div", 2)(2, "app-icon", 3);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](3, "arrow_back");
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](4, "div", 4);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](5);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpipe"](6, "async");
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpipe"](7, "async");
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](8, "div", 5);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵi18n"](9, 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](10, "mat-radio-group", 6);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpipe"](11, "async");
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](12, RegionSelectComponent_mat_radio_button_12_Template, 2, 2, "mat-radio-button", 7);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpipe"](13, "async");
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]()();
      }
      if (rf & 2) {
        let tmp_0_0;
        let tmp_1_0;
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](5);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtextInterpolate1"](" ", ((tmp_0_0 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpipeBind1"](6, 3, ctx.region)) == null ? null : tmp_0_0.display_name) || ((tmp_0_0 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpipeBind1"](7, 5, ctx.region)) == null ? null : tmp_0_0.name), " ");
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](5);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngModel", (tmp_1_0 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpipeBind1"](11, 7, ctx.region)) == null ? null : tmp_1_0.id);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngForOf", _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpipeBind1"](13, 9, ctx.regions));
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_5__.NgForOf, _angular_forms__WEBPACK_IMPORTED_MODULE_6__.NgControlStatus, _angular_forms__WEBPACK_IMPORTED_MODULE_6__.NgModel, _angular_material_radio__WEBPACK_IMPORTED_MODULE_7__.MatRadioGroup, _angular_material_radio__WEBPACK_IMPORTED_MODULE_7__.MatRadioButton, _icon_component__WEBPACK_IMPORTED_MODULE_3__.IconComponent, _angular_common__WEBPACK_IMPORTED_MODULE_5__.AsyncPipe]
  });
}

/***/ }),

/***/ 26781:
/*!**********************************************!*\
  !*** ./libs/components/src/lib/safe.pipe.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SafePipe: () => (/* binding */ SafePipe)
/* harmony export */ });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_platform_browser__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/platform-browser */ 80436);



class SafePipe {
  constructor(sanitizer) {
    this.sanitizer = sanitizer;
  }
  /**
   * Sanitizes the string allowing it to be injected into a template
   * @param value String to sanitize
   * @param type Type of value to sanitise. `resource`, `url`, `script`, `style` or `html`
   */
  transform(value, type = 'html') {
    switch (type) {
      case 'resource':
        return this.sanitizer.bypassSecurityTrustResourceUrl(value);
      case 'url':
        return this.sanitizer.bypassSecurityTrustUrl(value);
      case 'script':
        return this.sanitizer.bypassSecurityTrustScript(value);
      case 'style':
        return this.sanitizer.bypassSecurityTrustStyle(value);
      default:
        return this.sanitizer.bypassSecurityTrustHtml(value);
    }
  }
  static #_ = this.ɵfac = function SafePipe_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || SafePipe)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_platform_browser__WEBPACK_IMPORTED_MODULE_1__.DomSanitizer, 16));
  };
  static #_2 = this.ɵpipe = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefinePipe"]({
    name: "safe",
    type: SafePipe,
    pure: true
  });
}

/***/ }),

/***/ 54616:
/*!**************************************************!*\
  !*** ./libs/components/src/lib/sanitise.pipe.ts ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SanitizePipe: () => (/* binding */ SanitizePipe)
/* harmony export */ });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_platform_browser__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/platform-browser */ 80436);



var SecurityContext;
(function (SecurityContext) {
  SecurityContext[SecurityContext["NONE"] = 0] = "NONE";
  SecurityContext[SecurityContext["HTML"] = 1] = "HTML";
  SecurityContext[SecurityContext["STYLE"] = 2] = "STYLE";
  SecurityContext[SecurityContext["SCRIPT"] = 3] = "SCRIPT";
  SecurityContext[SecurityContext["URL"] = 4] = "URL";
  SecurityContext[SecurityContext["RESOURCE_URL"] = 5] = "RESOURCE_URL";
})(SecurityContext || (SecurityContext = {}));
class SanitizePipe {
  constructor(sanitizer) {
    this.sanitizer = sanitizer;
  }
  transform(value, type = 'html') {
    switch (type) {
      case 'resource':
        return this.sanitizer.sanitize(SecurityContext.RESOURCE_URL, value);
      case 'url':
        return this.sanitizer.sanitize(SecurityContext.URL, value);
      case 'script':
        return this.sanitizer.sanitize(SecurityContext.SCRIPT, value);
      case 'style':
        return this.sanitizer.sanitize(SecurityContext.STYLE, value);
      default:
        return this.sanitizer.sanitize(SecurityContext.HTML, value);
    }
  }
  static #_ = this.ɵfac = function SanitizePipe_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || SanitizePipe)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_platform_browser__WEBPACK_IMPORTED_MODULE_1__.DomSanitizer, 16));
  };
  static #_2 = this.ɵpipe = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefinePipe"]({
    name: "sanitize",
    type: SanitizePipe,
    pure: true
  });
}

/***/ }),

/***/ 88328:
/*!***********************************************************!*\
  !*** ./libs/components/src/lib/simple-table.component.ts ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SimpleTableComponent: () => (/* binding */ SimpleTableComponent)
/* harmony export */ });
/* harmony import */ var _home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 89204);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! rxjs */ 90521);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! rxjs */ 68824);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! rxjs/operators */ 19803);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! rxjs/operators */ 35443);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! rxjs/operators */ 7841);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! rxjs/operators */ 33602);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _angular_material_core__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @angular/material/core */ 74646);
/* harmony import */ var _angular_material_checkbox__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @angular/material/checkbox */ 97024);
/* harmony import */ var _icon_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./icon.component */ 69434);










const _c0 = (a0, a1, a2, a3, a4, a5, a6) => ({
  first: a0,
  last: a1,
  index: a2,
  data: a3,
  row: a4,
  key: a5,
  name: a6
});
const _c1 = (a0, a1, a2, a3) => ({
  first: a0,
  last: a1,
  index: a2,
  row: a3
});
function SimpleTableComponent_div_1_Template(rf, ctx) {
  if (rf & 1) {
    const _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "div", 6)(1, "mat-checkbox", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipe"](2, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipe"](3, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵlistener"]("change", function SimpleTableComponent_div_1_Template_mat_checkbox_change_1_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵrestoreView"](_r1);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵresetView"](ctx_r1.selectAll($event.checked));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    let tmp_2_0;
    let tmp_3_0;
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵstyleProp"]("grid-column", "1 / 2");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("checked", ctx_r1.selected.length === ((tmp_2_0 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipeBind1"](2, 4, ctx_r1.data_view$)) == null ? null : tmp_2_0.length))("indeterminate", ctx_r1.selected.length > 0 && ctx_r1.selected.length < ((tmp_3_0 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipeBind1"](3, 6, ctx_r1.data_view$)) == null ? null : tmp_3_0.length));
  }
}
function SimpleTableComponent_button_2_app_icon_3_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "app-icon", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const column_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]().$implicit;
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtextInterpolate1"](" ", (ctx_r1.sort == null ? null : ctx_r1.sort.key) === column_r4.key && (ctx_r1.sort == null ? null : ctx_r1.sort.reverse) ? "arrow_upward" : "arrow_downward", " ");
  }
}
function SimpleTableComponent_button_2_Template(rf, ctx) {
  if (rf & 1) {
    const _r3 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "button", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵlistener"]("click", function SimpleTableComponent_button_2_Template_button_click_0_listener() {
      const column_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵrestoreView"](_r3).$implicit;
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵresetView"](ctx_r1.setSort(column_r4.key));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](1, "div", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](3, SimpleTableComponent_button_2_app_icon_3_Template, 2, 1, "app-icon", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const column_r4 = ctx.$implicit;
    const i_r5 = ctx.index;
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵstyleProp"]("grid-column", 1 + i_r5 + (ctx_r1.selectable ? 1 : 0) + " / " + (2 + i_r5 + (ctx_r1.selectable ? 1 : 0)));
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵclassProp"]("pointer-events-none", !ctx_r1.sortable || column_r4.sortable === false)("active", (ctx_r1.sort == null ? null : ctx_r1.sort.key) === column_r4.key)("border-r", i_r5 !== ctx_r1.active_columns.length - 1)("width", column_r4.size);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("id", "column-" + column_r4.key);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtextInterpolate"](column_r4.name || column_r4.key);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", ctx_r1.sortable && column_r4.sortable !== false);
  }
}
function SimpleTableComponent_ng_container_3_div_1_Template(rf, ctx) {
  if (rf & 1) {
    const _r6 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "div", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipe"](1, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵlistener"]("mouseenter", function SimpleTableComponent_ng_container_3_div_1_Template_div_mouseenter_0_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵrestoreView"](_r6);
      const i_r7 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]().index;
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵresetView"](ctx_r1.active_row = i_r7);
    })("touchstart", function SimpleTableComponent_ng_container_3_div_1_Template_div_touchstart_0_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵrestoreView"](_r6);
      const i_r7 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]().index;
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵresetView"](ctx_r1.active_row = i_r7);
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](2, "mat-checkbox", 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵlistener"]("change", function SimpleTableComponent_ng_container_3_div_1_Template_mat_checkbox_change_2_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵrestoreView"](_r6);
      const i_r7 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]().index;
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵresetView"](ctx_r1.select(i_r7, $event.checked));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    let tmp_5_0;
    const i_r7 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]().index;
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵstyleProp"]("grid-column", "1 / 2");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵclassProp"]("border-b", i_r7 !== ((tmp_5_0 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipeBind1"](1, 5, ctx_r1.data_view$)) == null ? null : tmp_5_0.length) - 1);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("checked", ctx_r1.selected.includes(i_r7));
  }
}
function SimpleTableComponent_ng_container_3_div_2_div_3_span_2_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "span", 23);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const column_r9 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"](2).$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtextInterpolate1"](" ", column_r9.empty || "N/A", " ");
  }
}
function SimpleTableComponent_ng_container_3_div_2_div_3_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "div", 21);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](2, SimpleTableComponent_ng_container_3_div_2_div_3_span_2_Template, 2, 1, "span", 22);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    let tmp_7_0;
    const column_r9 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]().$implicit;
    const ctx_r9 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
    const row_r11 = ctx_r9.$implicit;
    const i_r7 = ctx_r9.index;
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtextInterpolate1"](" ", (tmp_7_0 = row_r11[column_r9.key]) !== null && tmp_7_0 !== undefined ? tmp_7_0 : column_r9.key === "_index" ? i_r7 + 1 : row_r11[column_r9.key], " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", (row_r11[column_r9.key] == null || row_r11[column_r9.key] === "") && column_r9.key !== "_index");
  }
}
function SimpleTableComponent_ng_container_3_div_2_ng_container_4_ng_container_1_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementContainer"](0);
  }
}
function SimpleTableComponent_ng_container_3_div_2_ng_container_4_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](1, SimpleTableComponent_ng_container_3_div_2_ng_container_4_ng_container_1_Template, 1, 0, "ng-container", 24);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipe"](2, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipe"](3, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementContainerEnd"]();
  }
  if (rf & 2) {
    let tmp_8_0;
    const column_r9 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]().$implicit;
    const ctx_r9 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
    const row_r11 = ctx_r9.$implicit;
    const i_r7 = ctx_r9.index;
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngTemplateOutlet", column_r9.content)("ngTemplateOutletContext", _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpureFunction7"](6, _c0, i_r7 === 0, i_r7 === ((tmp_8_0 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipeBind1"](2, 2, ctx_r1.data_view$)) == null ? null : tmp_8_0.length) - 1 || i_r7 === ((tmp_8_0 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipeBind1"](3, 4, ctx_r1.data_view$)) == null ? null : tmp_8_0.length) - 1, i_r7, row_r11[column_r9.key], row_r11, column_r9.key, column_r9.name || column_r9.key));
  }
}
function SimpleTableComponent_ng_container_3_div_2_Template(rf, ctx) {
  if (rf & 1) {
    const _r8 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "div", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipe"](1, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵlistener"]("mouseenter", function SimpleTableComponent_ng_container_3_div_2_Template_div_mouseenter_0_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵrestoreView"](_r8);
      const i_r7 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]().index;
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵresetView"](ctx_r1.active_row = i_r7);
    })("touchstart", function SimpleTableComponent_ng_container_3_div_2_Template_div_touchstart_0_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵrestoreView"](_r8);
      const i_r7 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]().index;
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵresetView"](ctx_r1.active_row = i_r7);
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementContainerStart"](2, 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](3, SimpleTableComponent_ng_container_3_div_2_div_3_Template, 3, 2, "div", 19)(4, SimpleTableComponent_ng_container_3_div_2_ng_container_4_Template, 4, 14, "ng-container", 20);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementContainerEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    let tmp_7_0;
    const column_r9 = ctx.$implicit;
    const j_r12 = ctx.index;
    const i_r7 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]().index;
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵstyleProp"]("grid-column", 1 + j_r12 + (ctx_r1.selectable ? 1 : 0) + " / " + (2 + j_r12 + (ctx_r1.selectable ? 1 : 0)));
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵclassProp"]("border-b", i_r7 !== ((tmp_7_0 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipeBind1"](1, 10, ctx_r1.data_view$)) == null ? null : tmp_7_0.length) - 1)("border-r", j_r12 !== ctx_r1.active_columns.length - 1)("width", column_r9.size);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngSwitch", ctx_r1.columnType(column_r9));
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngSwitchCase", "template");
  }
}
function SimpleTableComponent_ng_container_3_div_3_ng_container_1_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementContainer"](0);
  }
}
function SimpleTableComponent_ng_container_3_div_3_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "div", 25);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](1, SimpleTableComponent_ng_container_3_div_3_ng_container_1_Template, 1, 0, "ng-container", 24);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipe"](2, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipe"](3, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    let tmp_6_0;
    const ctx_r9 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
    const row_r11 = ctx_r9.$implicit;
    const i_r7 = ctx_r9.index;
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵstyleProp"]("grid-column", "span " + ctx_r1.active_columns.length);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngTemplateOutlet", ctx_r1.child_template)("ngTemplateOutletContext", _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpureFunction4"](8, _c1, i_r7 === 0, i_r7 === ((tmp_6_0 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipeBind1"](2, 4, ctx_r1.data_view$)) == null ? null : tmp_6_0.length) - 1 || i_r7 === ((tmp_6_0 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipeBind1"](3, 6, ctx_r1.data_view$)) == null ? null : tmp_6_0.length) - 1, i_r7, row_r11));
  }
}
function SimpleTableComponent_ng_container_3_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](1, SimpleTableComponent_ng_container_3_div_1_Template, 3, 7, "div", 12)(2, SimpleTableComponent_ng_container_3_div_2_Template, 5, 12, "div", 13)(3, SimpleTableComponent_ng_container_3_div_3_Template, 4, 13, "div", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementContainerEnd"]();
  }
  if (rf & 2) {
    const row_r11 = ctx.$implicit;
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", ctx_r1.selectable);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngForOf", ctx_r1.active_columns);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", ctx_r1.show_children[row_r11.id] && ctx_r1.child_template);
  }
}
function SimpleTableComponent_div_6_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "div", 26);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵstyleProp"]("grid-column-start", "span " + ctx_r1.active_columns.length);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtextInterpolate1"](" ", ctx_r1.empty_message, " ");
  }
}
function SimpleTableComponent_div_8_Template(rf, ctx) {
  if (rf & 1) {
    const _r13 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "div", 27)(1, "div", 28);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](3, "button", 29);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵlistener"]("click", function SimpleTableComponent_div_8_Template_button_click_3_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵrestoreView"](_r13);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵresetView"](ctx_r1.setPage(ctx_r1.page - 1));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](4, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](5, "chevron_left");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](6, "button", 29);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵlistener"]("click", function SimpleTableComponent_div_8_Template_button_click_6_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵrestoreView"](_r13);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵresetView"](ctx_r1.setPage(ctx_r1.page + 1));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](7, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](8, "chevron_right");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](9, "button", 29);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵlistener"]("click", function SimpleTableComponent_div_8_Template_button_click_9_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵrestoreView"](_r13);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵresetView"](ctx_r1.setPage(0));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](10, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](11, "first_page");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](12, "button", 29);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵlistener"]("click", function SimpleTableComponent_div_8_Template_button_click_12_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵrestoreView"](_r13);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵresetView"](ctx_r1.setPage(ctx_r1.total_pages - 1));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](13, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](14, "last_page");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()()();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtextInterpolate3"](" ", ctx_r1.page * (ctx_r1.page_size || 9999) + 1, " \u2013 ", (ctx_r1.page + 1) * (ctx_r1.page_size || 9999) > ctx_r1.total_count ? ctx_r1.total_count : (ctx_r1.page + 1) * (ctx_r1.page_size || 9999), " of ", ctx_r1.total_count, " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("disabled", ctx_r1.page === 0);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("disabled", ctx_r1.page === ctx_r1.total_pages - 1);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("disabled", ctx_r1.page === 0);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("disabled", ctx_r1.page === ctx_r1.total_pages - 1);
  }
}
class SimpleTableComponent extends _placeos_common__WEBPACK_IMPORTED_MODULE_1__.AsyncHandler {
  constructor() {
    super(...arguments);
    this.columns = [];
    this.selectable = false;
    this.filter = '';
    this.sortable = false;
    this.selected = [];
    this.page_size = 0;
    this.empty_message = 'No data to list';
    this.child_template = null;
    this.show_children = {};
    this.selectedChange = new _angular_core__WEBPACK_IMPORTED_MODULE_3__.EventEmitter();
    this.rowClicked = new _angular_core__WEBPACK_IMPORTED_MODULE_3__.EventEmitter();
    this.page = 0;
    this.total_count = 0;
    this.total_pages = 0;
    this.active_row = -1;
    this.active_columns = [];
    this._data$ = new rxjs__WEBPACK_IMPORTED_MODULE_4__.BehaviorSubject([]);
    this._filter$ = new rxjs__WEBPACK_IMPORTED_MODULE_4__.BehaviorSubject('');
    this._sort$ = new rxjs__WEBPACK_IMPORTED_MODULE_4__.BehaviorSubject(null);
    this.data_view$ = null;
  }
  get sort() {
    return this._sort$.getValue();
  }
  get data$() {
    return this.data instanceof Array ? this._data$ : this.data;
  }
  get column_count() {
    return this.active_columns.length + (this.selectable ? 1 : 0);
  }
  get column_template() {
    const template = this.active_columns.map(_ => _.size || 'auto').join(' ');
    return this.selectable ? `3.5rem ${template}` : template;
  }
  ngOnChanges(changes) {
    if (changes.filter) {
      this._filter$.next(this.filter);
    }
    if (changes.columns) {
      this.active_columns = this.columns.filter(_ => _.show !== false);
    }
    if (changes.data) {
      this.data_view$ = (0,rxjs__WEBPACK_IMPORTED_MODULE_5__.combineLatest)([this.data$, this._filter$, this._sort$]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.debounceTime)(300), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.map)(([data, filter, sort]) => {
        data = [...data];
        if (filter) {
          data = data.filter(_ => Object.values(_).some(i => JSON.stringify(i)?.toLowerCase().includes((filter || '').toLowerCase())));
        }
        if (sort && data.length) {
          const type = typeof data[0][sort.key];
          if (type === 'number') {
            data = data.sort((a, b) => {
              const result = a[sort.key] - b[sort.key];
              return sort.reverse ? -result : result;
            });
          } else {
            data = data.sort((a, b) => {
              const a_value = JSON.stringify(a[sort.key] || '');
              const b_value = JSON.stringify(b[sort.key] || '');
              const result = a_value.localeCompare(b_value);
              return sort.reverse ? -result : result;
            });
          }
        }
        this.selected = [];
        this.page = 0;
        if (this.page_size) {
          this.total_count = data.length;
          this.total_pages = Math.ceil(this.total_count / this.page_size);
        }
        return data;
      }), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.shareReplay)(1));
    }
  }
  columnType(column) {
    return column.content instanceof _angular_core__WEBPACK_IMPORTED_MODULE_3__.TemplateRef ? 'template' : 'raw';
  }
  gridSquare(row, column) {
    return `${row} / ${column} / ${row + 1} / ${column + 1}`;
  }
  select(index, state) {
    if (state) this.selected.push(index);else this.selected = this.selected.filter(i => i !== index);
  }
  selectAll(state) {
    var _this = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      const list = yield _this.data_view$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.take)(1)).toPromise();
      if (state) _this.selected = list.map((_, i) => i);else _this.selected = [];
    })();
  }
  setSort(key) {
    const sort = this._sort$.getValue();
    if (!sort || sort.key !== key) {
      this._sort$.next({
        key,
        reverse: false
      });
    } else if (!sort.reverse) {
      this._sort$.next({
        key,
        reverse: true
      });
    } else {
      this._sort$.next(null);
    }
  }
  setPage(page) {
    this.timeout('set_page', () => this.page = page, 100);
  }
  static #_ = this.ɵfac = /*@__PURE__*/(() => {
    let ɵSimpleTableComponent_BaseFactory;
    return function SimpleTableComponent_Factory(__ngFactoryType__) {
      return (ɵSimpleTableComponent_BaseFactory || (ɵSimpleTableComponent_BaseFactory = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵgetInheritedFactory"](SimpleTableComponent)))(__ngFactoryType__ || SimpleTableComponent);
    };
  })();
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵdefineComponent"]({
    type: SimpleTableComponent,
    selectors: [["simple-table"]],
    inputs: {
      data: "data",
      columns: "columns",
      selectable: "selectable",
      filter: "filter",
      sortable: "sortable",
      selected: "selected",
      page_size: "page_size",
      empty_message: "empty_message",
      child_template: "child_template",
      show_children: "show_children"
    },
    outputs: {
      selectedChange: "selectedChange",
      rowClicked: "rowClicked"
    },
    features: [_angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵInheritDefinitionFeature"], _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵNgOnChangesFeature"]],
    decls: 9,
    vars: 15,
    consts: [["role", "table", 1, "grid", "border", "border-base-300", 3, "click", "touchend", "mouseleave"], ["id", "column-selector", "class", "sticky top-0 flex items-center justify-between px-2 border-r border-b border-base-200 bg-base-300 min-h-full z-20", 3, "gridColumn", 4, "ngIf"], ["header", "", "matRipple", "", "class", "sticky top-0 flex items-center justify-between p-4 border-b border-base-200 bg-base-300 min-h-full z-20", 3, "id", "gridColumn", "pointer-events-none", "active", "border-r", "width", "click", 4, "ngFor", "ngForOf"], [4, "ngFor", "ngForOf"], ["class", "flex items-center justify-center p-8 opacity-30", 3, "gridColumnStart", 4, "ngIf"], ["class", "sticky bottom-0 w-full flex items-center justify-end space-x-2 p-2 bg-base-200", 4, "ngIf"], ["id", "column-selector", 1, "sticky", "top-0", "flex", "items-center", "justify-between", "px-2", "border-r", "border-b", "border-base-200", "bg-base-300", "min-h-full", "z-20"], [3, "change", "checked", "indeterminate"], ["header", "", "matRipple", "", 1, "sticky", "top-0", "flex", "items-center", "justify-between", "p-4", "border-b", "border-base-200", "bg-base-300", "min-h-full", "z-20", 3, "click", "id"], [1, "font-medium"], ["class", "text-[1.25em]", 4, "ngIf"], [1, "text-[1.25em]"], ["id", "column-selector", "class", "flex items-center justify-between px-2 border-r border-base-200 min-h-full z-10", 3, "gridColumn", "border-b", "mouseenter", "touchstart", 4, "ngIf"], ["class", "flex items-center justify-between border-base-200 min-h-full z-10", 3, "gridColumn", "border-b", "border-r", "width", "mouseenter", "touchstart", 4, "ngFor", "ngForOf"], ["child-node", "", "class", "border-b last:border-t last:border-b-0 border-base-200", 3, "gridColumn", 4, "ngIf"], ["id", "column-selector", 1, "flex", "items-center", "justify-between", "px-2", "border-r", "border-base-200", "min-h-full", "z-10", 3, "mouseenter", "touchstart"], [3, "change", "checked"], [1, "flex", "items-center", "justify-between", "border-base-200", "min-h-full", "z-10", 3, "mouseenter", "touchstart"], [3, "ngSwitch"], ["class", "p-4", 4, "ngSwitchDefault"], [4, "ngSwitchCase"], [1, "p-4"], ["class", "opacity-30", 4, "ngIf"], [1, "opacity-30"], [4, "ngTemplateOutlet", "ngTemplateOutletContext"], ["child-node", "", 1, "border-b", "last:border-t", "last:border-b-0", "border-base-200"], [1, "flex", "items-center", "justify-center", "p-8", "opacity-30"], [1, "sticky", "bottom-0", "w-full", "flex", "items-center", "justify-end", "space-x-2", "p-2", "bg-base-200"], [1, "px-4", "py-2"], ["icon", "", "matRipple", "", 3, "click", "disabled"]],
    template: function SimpleTableComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "div", 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵlistener"]("click", function SimpleTableComponent_Template_div_click_0_listener() {
          return ctx.active_row >= 0 ? ctx.rowClicked.emit(ctx.active_row) : null;
        })("touchend", function SimpleTableComponent_Template_div_touchend_0_listener() {
          return ctx.active_row = -1;
        })("mouseleave", function SimpleTableComponent_Template_div_mouseleave_0_listener() {
          return ctx.active_row = -1;
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](1, SimpleTableComponent_div_1_Template, 4, 8, "div", 1)(2, SimpleTableComponent_button_2_Template, 4, 13, "button", 2)(3, SimpleTableComponent_ng_container_3_Template, 4, 3, "ng-container", 3);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipe"](4, "async");
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipe"](5, "slice");
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](6, SimpleTableComponent_div_6_Template, 2, 3, "div", 4);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipe"](7, "async");
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](8, SimpleTableComponent_div_8_Template, 15, 7, "div", 5);
      }
      if (rf & 2) {
        let tmp_4_0;
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵstyleProp"]("grid-template-columns", ctx.column_template);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", ctx.selectable);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngForOf", ctx.active_columns);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngForOf", _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipeBind3"](5, 9, _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipeBind1"](4, 7, ctx.data_view$), ctx.page * (ctx.page_size || 9999), (ctx.page + 1) * (ctx.page_size || 9999)));
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", !((tmp_4_0 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipeBind1"](7, 13, ctx.data_view$)) == null ? null : tmp_4_0.length));
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", ctx.page_size);
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_10__.NgForOf, _angular_common__WEBPACK_IMPORTED_MODULE_10__.NgIf, _angular_common__WEBPACK_IMPORTED_MODULE_10__.NgTemplateOutlet, _angular_common__WEBPACK_IMPORTED_MODULE_10__.NgSwitch, _angular_common__WEBPACK_IMPORTED_MODULE_10__.NgSwitchCase, _angular_common__WEBPACK_IMPORTED_MODULE_10__.NgSwitchDefault, _angular_material_core__WEBPACK_IMPORTED_MODULE_11__.MatRipple, _angular_material_checkbox__WEBPACK_IMPORTED_MODULE_12__.MatCheckbox, _icon_component__WEBPACK_IMPORTED_MODULE_2__.IconComponent, _angular_common__WEBPACK_IMPORTED_MODULE_10__.AsyncPipe, _angular_common__WEBPACK_IMPORTED_MODULE_10__.SlicePipe],
    styles: ["[_nghost-%COMP%], \n   [_nghost-%COMP%]    > button[_ngcontent-%COMP%] {\n                min-width: 100%;\n            }\n\n            [header][_ngcontent-%COMP%]   app-icon[_ngcontent-%COMP%] {\n                opacity: 0;\n            }\n            [header][_ngcontent-%COMP%]:hover   app-icon[_ngcontent-%COMP%] {\n                opacity: 0.3;\n            }\n            [header][_ngcontent-%COMP%]:hover.pointer-events-none   app-icon[_ngcontent-%COMP%] {\n                opacity: 0;\n            }\n            [header].active[_ngcontent-%COMP%]   app-icon[_ngcontent-%COMP%] {\n                opacity: 1;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNpbXBsZS10YWJsZS5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZOztnQkFFSSxlQUFlO1lBQ25COztZQUVBO2dCQUNJLFVBQVU7WUFDZDtZQUNBO2dCQUNJLFlBQVk7WUFDaEI7WUFDQTtnQkFDSSxVQUFVO1lBQ2Q7WUFDQTtnQkFDSSxVQUFVO1lBQ2QiLCJmaWxlIjoic2ltcGxlLXRhYmxlLmNvbXBvbmVudC50cyIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgOmhvc3QsXG4gICAgICAgICAgICA6aG9zdCA+IGJ1dHRvbiB7XG4gICAgICAgICAgICAgICAgbWluLXdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBbaGVhZGVyXSBhcHAtaWNvbiB7XG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFtoZWFkZXJdOmhvdmVyIGFwcC1pY29uIHtcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLjM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBbaGVhZGVyXTpob3Zlci5wb2ludGVyLWV2ZW50cy1ub25lIGFwcC1pY29uIHtcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgW2hlYWRlcl0uYWN0aXZlIGFwcC1pY29uIHtcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAiXX0= */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvY29tcG9uZW50cy9zcmMvbGliL3NpbXBsZS10YWJsZS5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZOztnQkFFSSxlQUFlO1lBQ25COztZQUVBO2dCQUNJLFVBQVU7WUFDZDtZQUNBO2dCQUNJLFlBQVk7WUFDaEI7WUFDQTtnQkFDSSxVQUFVO1lBQ2Q7WUFDQTtnQkFDSSxVQUFVO1lBQ2Q7O0FBRVosZytCQUFnK0IiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIDpob3N0LFxuICAgICAgICAgICAgOmhvc3QgPiBidXR0b24ge1xuICAgICAgICAgICAgICAgIG1pbi13aWR0aDogMTAwJTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgW2hlYWRlcl0gYXBwLWljb24ge1xuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBbaGVhZGVyXTpob3ZlciBhcHAtaWNvbiB7XG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMC4zO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgW2hlYWRlcl06aG92ZXIucG9pbnRlci1ldmVudHMtbm9uZSBhcHAtaWNvbiB7XG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFtoZWFkZXJdLmFjdGl2ZSBhcHAtaWNvbiB7XG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl0sInNvdXJjZVJvb3QiOiIifQ== */"]
  });
}

/***/ }),

/***/ 91960:
/*!*************************************************************!*\
  !*** ./libs/components/src/lib/status-overlay.component.ts ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   StatusOverlayComponent: () => (/* binding */ StatusOverlayComponent)
/* harmony export */ });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _angular_material_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/material/core */ 74646);
/* harmony import */ var _angular_material_progress_spinner__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/material/progress-spinner */ 41134);
/* harmony import */ var _icon_component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./icon.component */ 69434);





const _c0 = ["*"];
const _c1 = a0 => [a0];
function StatusOverlayComponent_ng_container_1_ng_container_5_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵprojection"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
  }
}
function StatusOverlayComponent_ng_container_1_a_7_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "a", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const link_r1 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("routerLink", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpureFunction1"](2, _c1, link_r1.route));
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate1"](" ", link_r1.name, " ");
  }
}
function StatusOverlayComponent_ng_container_1_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "div", 4)(2, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](4, "div", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](5, StatusOverlayComponent_ng_container_1_ng_container_5_Template, 2, 0, "ng-container", 3);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](6, "div", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](7, StatusOverlayComponent_ng_container_1_a_7_Template, 2, 4, "a", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    const error_msg_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵreference"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵclassProp"]("text-success", !ctx_r1.error)("text-error", ctx_r1.error);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate"](ctx_r1.error ? "close" : "done");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", !ctx_r1.error)("ngIfElse", error_msg_r3);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngForOf", ctx_r1.links);
  }
}
function StatusOverlayComponent_ng_template_2_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "p", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate"](ctx_r1.error);
  }
}
function StatusOverlayComponent_ng_template_4_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](0, "mat-spinner", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "p", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("diameter", 32);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate"](ctx_r1.loading);
  }
}
class StatusOverlayComponent {
  constructor() {
    /** Whether overlay is loading */
    this.loading = '';
    /** Details about any errors that have occurred */
    this.error = '';
    /** Links to display on success */
    this.links = [];
  }
  static #_ = this.ɵfac = function StatusOverlayComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || StatusOverlayComponent)();
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdefineComponent"]({
    type: StatusOverlayComponent,
    selectors: [["status-overlay"]],
    inputs: {
      loading: "loading",
      error: "error",
      links: "links"
    },
    ngContentSelectors: _c0,
    decls: 6,
    vars: 2,
    consts: [["error_msg", ""], ["load_state", ""], ["status-overlay", "", 1, "fixed", "inset-0", "flex", "flex-col", "bg-secondary", "items-center", "justify-center", "z-50", "text-white"], [4, "ngIf", "ngIfElse"], [1, "text-4xl", "rounded-full", "bg-base-100", "mb-4"], [1, "text-center", "text-lg", "mb-4"], [1, "flex", "items-center", "space-x-2"], ["btn", "", "matRipple", "", "class", "w-32", 3, "routerLink", 4, "ngFor", "ngForOf"], ["btn", "", "matRipple", "", 1, "w-32", 3, "routerLink"], ["error", ""], [1, "mb-4", 3, "diameter"], ["loading", "", 1, "text-center", "text-lg"]],
    template: function StatusOverlayComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵprojectionDef"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div", 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](1, StatusOverlayComponent_ng_container_1_Template, 8, 8, "ng-container", 3);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](2, StatusOverlayComponent_ng_template_2_Template, 2, 1, "ng-template", null, 0, _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplateRefExtractor"])(4, StatusOverlayComponent_ng_template_4_Template, 3, 2, "ng-template", null, 1, _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplateRefExtractor"]);
      }
      if (rf & 2) {
        const load_state_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵreference"](5);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", !ctx.loading)("ngIfElse", load_state_r4);
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_2__.NgForOf, _angular_common__WEBPACK_IMPORTED_MODULE_2__.NgIf, _angular_material_core__WEBPACK_IMPORTED_MODULE_3__.MatRipple, _angular_material_progress_spinner__WEBPACK_IMPORTED_MODULE_4__.MatProgressSpinner, _icon_component__WEBPACK_IMPORTED_MODULE_0__.IconComponent]
  });
}

/***/ }),

/***/ 50907:
/*!**********************************************************!*\
  !*** ./libs/components/src/lib/status-pill.component.ts ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   StatusPillComponent: () => (/* binding */ StatusPillComponent)
/* harmony export */ });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _icon_component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./icon.component */ 69434);



const _c0 = ["*"];
function StatusPillComponent_ng_container_3_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](1, " check_circle ");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
  }
}
function StatusPillComponent_ng_container_4_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](1, "cancel");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
  }
}
function StatusPillComponent_ng_container_5_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](1, "block");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
  }
}
function StatusPillComponent_ng_container_6_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](1, "info");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
  }
}
function StatusPillComponent_ng_container_7_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](1, "warning");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
  }
}
class StatusPillComponent {
  static #_ = this.ɵfac = function StatusPillComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || StatusPillComponent)();
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdefineComponent"]({
    type: StatusPillComponent,
    selectors: [["status-pill"]],
    inputs: {
      status: "status"
    },
    ngContentSelectors: _c0,
    decls: 10,
    vars: 31,
    consts: [[1, "flex", "items-center", "bg-opacity-30", "rounded-2xl", "px-2", "py-1", "text-base", "space-x-2", "font-medium", "text-black"], [1, "rounded-full", "h-5", "w-5", "flex", "items-center", "justify-center"], [1, "text-2xl", 3, "ngSwitch"], [4, "ngSwitchCase"], [4, "ngSwitchDefault"]],
    template: function StatusPillComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵprojectionDef"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div", 0)(1, "div", 1)(2, "app-icon", 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](3, StatusPillComponent_ng_container_3_Template, 2, 0, "ng-container", 3)(4, StatusPillComponent_ng_container_4_Template, 2, 0, "ng-container", 3)(5, StatusPillComponent_ng_container_5_Template, 2, 0, "ng-container", 3)(6, StatusPillComponent_ng_container_6_Template, 2, 0, "ng-container", 3)(7, StatusPillComponent_ng_container_7_Template, 2, 0, "ng-container", 4);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](8, "div");
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵprojection"](9);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]()();
      }
      if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵclassProp"]("bg-success-light", ctx.status === "success")("bg-warning-light", ctx.status === "warning")("bg-error-light", ctx.status === "error")("bg-info-light", ctx.status === "info")("bg-base-200", ctx.status === "neutral");
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵclassProp"]("text-success", ctx.status === "success")("text-warning", ctx.status === "warning")("text-error", ctx.status === "error")("text-info", ctx.status === "info")("text-base-content", ctx.status === "neutral")("opacity-40", ctx.status === "neutral");
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngSwitch", ctx.status);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngSwitchCase", "success");
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngSwitchCase", "error");
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngSwitchCase", "neutral");
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngSwitchCase", "info");
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵclassProp"]("opacity-40", ctx.status === "neutral")("text-base-content", ctx.status === "neutral");
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_2__.NgSwitch, _angular_common__WEBPACK_IMPORTED_MODULE_2__.NgSwitchCase, _angular_common__WEBPACK_IMPORTED_MODULE_2__.NgSwitchDefault, _icon_component__WEBPACK_IMPORTED_MODULE_0__.IconComponent]
  });
}

/***/ }),

/***/ 12976:
/*!***************************************************!*\
  !*** ./libs/components/src/lib/thumbnail.pipe.ts ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ThumbnailPipe: () => (/* binding */ ThumbnailPipe)
/* harmony export */ });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ 37580);

class ThumbnailPipe {
  constructor() {
    this._thumbnail_cache = {};
  }
  transform(url) {
    if (!url) return null;
    if (!this._thumbnail_cache[url]) {
      createVideoThumbnail(url).then(_ => this._thumbnail_cache[url] = _).catch(GENERATING[url] = null);
    }
    return this._thumbnail_cache[url] || '';
  }
  static #_ = this.ɵfac = function ThumbnailPipe_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || ThumbnailPipe)();
  };
  static #_2 = this.ɵpipe = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefinePipe"]({
    name: "thumbnail",
    type: ThumbnailPipe,
    pure: true
  });
}
const GENERATING = {};
function createVideoThumbnail(url) {
  if (!GENERATING[url]) {
    GENERATING[url] = new Promise(resolve => {
      var video = document.createElement('video');
      video.crossOrigin = 'anonymous';
      video.src = url;
      var canvas = document.createElement('canvas');
      var context = canvas.getContext('2d');
      video.addEventListener('loadedmetadata', () => {
        canvas.width = video.videoWidth;
        canvas.height = video.videoHeight;
        video.currentTime = 1;
      });
      video.addEventListener('seeked', () => {
        context.drawImage(video, 0, 0, canvas.width, canvas.height);
        var thumbnail = canvas.toDataURL('image/png');
        resolve(thumbnail);
      });
      video.load();
    });
  }
  return GENERATING[url];
}

/***/ }),

/***/ 67834:
/*!***********************************************************!*\
  !*** ./libs/components/src/lib/unauthorised.component.ts ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   UnauthorisedComponent: () => (/* binding */ UnauthorisedComponent)
/* harmony export */ });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ 37580);

class UnauthorisedComponent {
  static #_ = this.ɵfac = function UnauthorisedComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || UnauthorisedComponent)();
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({
    type: UnauthorisedComponent,
    selectors: [["app-unauthorised"]],
    decls: 9,
    vars: 0,
    consts: () => {
      let i18n_0;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_4136336337692896315$$LIBS_COMPONENTS_SRC_LIB_UNAUTHORISED_COMPONENT_TS_0 = goog.getMsg("Access forbidden.");
        i18n_0 = MSG_EXTERNAL_4136336337692896315$$LIBS_COMPONENTS_SRC_LIB_UNAUTHORISED_COMPONENT_TS_0;
      } else {
        i18n_0 = $localize`:␟56a20d819b6e59b0de025988a3f9ed7d6a1bc08c␟4136336337692896315:Access forbidden.`;
      }
      let i18n_1;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_8887025903012875176$$LIBS_COMPONENTS_SRC_LIB_UNAUTHORISED_COMPONENT_TS_1 = goog.getMsg(" You do not have permission to view this page and your access attempt has been recorded. ");
        i18n_1 = MSG_EXTERNAL_8887025903012875176$$LIBS_COMPONENTS_SRC_LIB_UNAUTHORISED_COMPONENT_TS_1;
      } else {
        i18n_1 = $localize`:␟7afe2eb69e486929c5a29d67e6f24975f97604c4␟8887025903012875176: You do not have permission to view this page and your access attempt has been recorded. `;
      }
      let i18n_2;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_1824441478452454363$$LIBS_COMPONENTS_SRC_LIB_UNAUTHORISED_COMPONENT_TS_2 = goog.getMsg(" Contact your Administrator if you feel that you should have access. ");
        i18n_2 = MSG_EXTERNAL_1824441478452454363$$LIBS_COMPONENTS_SRC_LIB_UNAUTHORISED_COMPONENT_TS_2;
      } else {
        i18n_2 = $localize`:␟1520ecc736c82366b62d64a515b1c3b222c9e1df␟1824441478452454363: Contact your Administrator if you feel that you should have access. `;
      }
      return [i18n_0, i18n_1, i18n_2, [1, "unauthorised", "rounded", "m-4", "text-center", "bg-base-100", "text-black", "border", "border-base-200", "p-4", "shadow"], [1, "text-4xl"], [1, "text-2xl"], [1, "py-4"]];
    },
    template: function UnauthorisedComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 3)(1, "h1", 4);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](2, "403");
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](3, "h3", 5);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵi18n"](4, 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](5, "p", 6);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵi18n"](6, 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](7, "p");
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵi18n"](8, 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()();
      }
    },
    styles: ["[_nghost-%COMP%] {\n                display: flex;\n                align-items: center;\n                justify-content: center;\n            }\n\n            .unauthorised[_ngcontent-%COMP%] {\n                width: 28em;\n                max-width: calc(100vw - 1rem);\n            }\n\n            @media (prefers-color-scheme: dark) {\n                .unauthorised[_ngcontent-%COMP%] {\n                    background-color: #262626;\n                    color: #fff;\n                }\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVuYXV0aG9yaXNlZC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLGFBQWE7Z0JBQ2IsbUJBQW1CO2dCQUNuQix1QkFBdUI7WUFDM0I7O1lBRUE7Z0JBQ0ksV0FBVztnQkFDWCw2QkFBNkI7WUFDakM7O1lBRUE7Z0JBQ0k7b0JBQ0kseUJBQXlCO29CQUN6QixXQUFXO2dCQUNmO1lBQ0oiLCJmaWxlIjoidW5hdXRob3Jpc2VkLmNvbXBvbmVudC50cyIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgOmhvc3Qge1xuICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLnVuYXV0aG9yaXNlZCB7XG4gICAgICAgICAgICAgICAgd2lkdGg6IDI4ZW07XG4gICAgICAgICAgICAgICAgbWF4LXdpZHRoOiBjYWxjKDEwMHZ3IC0gMXJlbSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIEBtZWRpYSAocHJlZmVycy1jb2xvci1zY2hlbWU6IGRhcmspIHtcbiAgICAgICAgICAgICAgICAudW5hdXRob3Jpc2VkIHtcbiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogIzI2MjYyNjtcbiAgICAgICAgICAgICAgICAgICAgY29sb3I6ICNmZmY7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAiXX0= */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvY29tcG9uZW50cy9zcmMvbGliL3VuYXV0aG9yaXNlZC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLGFBQWE7Z0JBQ2IsbUJBQW1CO2dCQUNuQix1QkFBdUI7WUFDM0I7O1lBRUE7Z0JBQ0ksV0FBVztnQkFDWCw2QkFBNkI7WUFDakM7O1lBRUE7Z0JBQ0k7b0JBQ0kseUJBQXlCO29CQUN6QixXQUFXO2dCQUNmO1lBQ0o7O0FBRVosZ2lDQUFnaUMiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIDpob3N0IHtcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC51bmF1dGhvcmlzZWQge1xuICAgICAgICAgICAgICAgIHdpZHRoOiAyOGVtO1xuICAgICAgICAgICAgICAgIG1heC13aWR0aDogY2FsYygxMDB2dyAtIDFyZW0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBAbWVkaWEgKHByZWZlcnMtY29sb3Itc2NoZW1lOiBkYXJrKSB7XG4gICAgICAgICAgICAgICAgLnVuYXV0aG9yaXNlZCB7XG4gICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICMyNjI2MjY7XG4gICAgICAgICAgICAgICAgICAgIGNvbG9yOiAjZmZmO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgIl0sInNvdXJjZVJvb3QiOiIifQ== */"]
  });
}

/***/ }),

/***/ 76871:
/*!***********************************************************************!*\
  !*** ./libs/components/src/lib/upload-permissions-modal.component.ts ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   UploadPermissionsModalComponent: () => (/* binding */ UploadPermissionsModalComponent)
/* harmony export */ });
/* harmony import */ var _angular_material_dialog__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/material/dialog */ 12587);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/forms */ 34456);
/* harmony import */ var _angular_material_core__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/material/core */ 74646);
/* harmony import */ var _angular_material_form_field__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @angular/material/form-field */ 24950);
/* harmony import */ var _angular_material_select__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @angular/material/select */ 25175);
/* harmony import */ var _angular_material_input__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @angular/material/input */ 95541);
/* harmony import */ var _angular_material_checkbox__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @angular/material/checkbox */ 97024);
/* harmony import */ var _icon_component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./icon.component */ 69434);











const _c0 = (a0, a1, a2) => ({
  file: a0,
  is_public: a1,
  permissions: a2
});
function UploadPermissionsModalComponent_div_15_Template(rf, ctx) {
  if (rf & 1) {
    const _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div", 2)(1, "label");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](2, "Permissions");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](3, "mat-form-field", 3)(4, "mat-select", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtwoWayListener"]("ngModelChange", function UploadPermissionsModalComponent_div_15_Template_mat_select_ngModelChange_4_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r1);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
      _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtwoWayBindingSet"](ctx_r1.permissions, $event) || (ctx_r1.permissions = $event);
      return _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵresetView"]($event);
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](5, "mat-option", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](6, "None");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](7, "mat-option", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](8, "Support");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](9, "mat-option", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](10, "Admin");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]()()()();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtwoWayProperty"]("ngModel", ctx_r1.permissions);
  }
}
class UploadPermissionsModalComponent {
  constructor(_dialog_ref, _data) {
    this._dialog_ref = _dialog_ref;
    this._data = _data;
    /** File to upload */
    this.file = this._data.file;
    /** Whether file should be public */
    this.is_public = true;
    /** Permissions for file */
    this.permissions = 'none';
    this.file = this._data.file;
  }
  close() {
    this._dialog_ref.close();
  }
  static #_ = this.ɵfac = function UploadPermissionsModalComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || UploadPermissionsModalComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](_angular_material_dialog__WEBPACK_IMPORTED_MODULE_2__.MatDialogRef), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](_angular_material_dialog__WEBPACK_IMPORTED_MODULE_2__.MAT_DIALOG_DATA));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdefineComponent"]({
    type: UploadPermissionsModalComponent,
    selectors: [["upload-permissions-modal"]],
    decls: 21,
    vars: 8,
    consts: [["btn", "", "icon", "", "mat-dialog-close", ""], [1, "p-4", "min-w-[20rem]"], [1, "flex", "flex-col", "space-y-2"], ["appearance", "outline"], ["matInput", "", "disabled", "true", "placeholder", "File Name", 3, "ngModel"], [1, "pb-4"], [3, "ngModelChange", "ngModel"], ["class", "flex flex-col space-y-2", 4, "ngIf"], [1, "flex", "items-center", "justify-end", "space-x-2", "px-4", "py-2", "border-t", "border-base-200"], ["btn", "", "mat-dialog-close", "", 1, "inverse", "w-32"], ["btn", "", 1, "w-32", 3, "mat-dialog-close"], ["value", "none"], ["value", "support"], ["value", "admin"]],
    template: function UploadPermissionsModalComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "header")(1, "h2");
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](2, "Upload File");
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](3, "button", 0)(4, "app-icon");
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](5, "close");
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]()()();
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](6, "main", 1)(7, "div", 2)(8, "label");
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](9, "File Name");
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](10, "mat-form-field", 3);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](11, "input", 4);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](12, "div", 5)(13, "mat-checkbox", 6);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtwoWayListener"]("ngModelChange", function UploadPermissionsModalComponent_Template_mat_checkbox_ngModelChange_13_listener($event) {
          _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtwoWayBindingSet"](ctx.is_public, $event) || (ctx.is_public = $event);
          return $event;
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](14, "Public");
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](15, UploadPermissionsModalComponent_div_15_Template, 11, 1, "div", 7);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](16, "footer", 8)(17, "button", 9);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](18, "Cancel");
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](19, "button", 10);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](20, " Upload ");
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]()();
      }
      if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](11);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngModel", ctx.file.name);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtwoWayProperty"]("ngModel", ctx.is_public);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", !ctx.is_public);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](4);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("mat-dialog-close", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpureFunction3"](4, _c0, ctx.file, ctx.is_public, ctx.permissions));
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_3__.NgIf, _angular_forms__WEBPACK_IMPORTED_MODULE_4__.DefaultValueAccessor, _angular_forms__WEBPACK_IMPORTED_MODULE_4__.NgControlStatus, _angular_forms__WEBPACK_IMPORTED_MODULE_4__.NgModel, _angular_material_core__WEBPACK_IMPORTED_MODULE_5__.MatOption, _angular_material_form_field__WEBPACK_IMPORTED_MODULE_6__.MatFormField, _angular_material_select__WEBPACK_IMPORTED_MODULE_7__.MatSelect, _angular_material_dialog__WEBPACK_IMPORTED_MODULE_2__.MatDialogClose, _angular_material_input__WEBPACK_IMPORTED_MODULE_8__.MatInput, _angular_material_checkbox__WEBPACK_IMPORTED_MODULE_9__.MatCheckbox, _icon_component__WEBPACK_IMPORTED_MODULE_0__.IconComponent]
  });
}

/***/ }),

/***/ 23574:
/*!**********************************************************!*\
  !*** ./libs/components/src/lib/user-avatar.component.ts ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   UserAvatarComponent: () => (/* binding */ UserAvatarComponent)
/* harmony export */ });
/* harmony import */ var libs_users_src_lib_user_class__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! libs/users/src/lib/user.class */ 93693);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ 37580);


function UserAvatarComponent_div_0_div_1_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div", 4);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate1"](" ", ctx_r0.initials, " ");
  }
}
function UserAvatarComponent_div_0_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div", 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](1, UserAvatarComponent_div_0_div_1_Template, 2, 1, "div", 3);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    const image_state_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵreference"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵattribute"]("user-id", ctx_r0.user.id);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", !ctx_r0.user.photo)("ngIfElse", image_state_r2);
  }
}
function UserAvatarComponent_ng_template_1_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](0, "img", 5);
  }
  if (rf & 2) {
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("source", ctx_r0.user.photo);
  }
}
class UserAvatarComponent {
  get initials() {
    if (!this.user) return 'NA';
    const name = this.user.name || '';
    const parts = name.replace(/[()[\]\-+=\\/]+/gi, '').split(' ');
    return parts.length > 1 ? `${parts[0][0]}${parts[parts.length - 1][0]}` : name.slice(0, 2);
  }
  static #_ = this.ɵfac = function UserAvatarComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || UserAvatarComponent)();
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdefineComponent"]({
    type: UserAvatarComponent,
    selectors: [["a-user-avatar"]],
    inputs: {
      user: "user"
    },
    decls: 3,
    vars: 1,
    consts: [["image_state", ""], ["class", "flex items-center justify-center rounded-full overflow-hidden", 4, "ngIf"], [1, "flex", "items-center", "justify-center", "rounded-full", "overflow-hidden"], ["initials", "", "class", "text-base-content text-opacity-80 uppercase", 4, "ngIf", "ngIfElse"], ["initials", "", 1, "text-base-content", "text-opacity-80", "uppercase"], ["auth", "", 1, "h-full", "w-full", 3, "source"]],
    template: function UserAvatarComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](0, UserAvatarComponent_div_0_Template, 2, 3, "div", 1)(1, UserAvatarComponent_ng_template_1_Template, 1, 1, "ng-template", null, 0, _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplateRefExtractor"]);
      }
      if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", ctx.user);
      }
    },
    styles: ["[_nghost-%COMP%]    > div[_ngcontent-%COMP%] {\n                height: 2.5em;\n                width: 2.5em;\n                background-color: var(--b2);\n                overflow: hidden;\n                border: 2px solid var(--b1);\n            }\n\n            .initials[_ngcontent-%COMP%] {\n                font-size: 1em;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXItYXZhdGFyLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1lBQ1k7Z0JBQ0ksYUFBYTtnQkFDYixZQUFZO2dCQUNaLDJCQUEyQjtnQkFDM0IsZ0JBQWdCO2dCQUNoQiwyQkFBMkI7WUFDL0I7O1lBRUE7Z0JBQ0ksY0FBYztZQUNsQiIsImZpbGUiOiJ1c2VyLWF2YXRhci5jb21wb25lbnQudHMiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIDpob3N0ID4gZGl2IHtcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDIuNWVtO1xuICAgICAgICAgICAgICAgIHdpZHRoOiAyLjVlbTtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1iMik7XG4gICAgICAgICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgICAgICAgICAgICBib3JkZXI6IDJweCBzb2xpZCB2YXIoLS1iMSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC5pbml0aWFscyB7XG4gICAgICAgICAgICAgICAgZm9udC1zaXplOiAxZW07XG4gICAgICAgICAgICB9XG4gICAgICAgICJdfQ== */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvY29tcG9uZW50cy9zcmMvbGliL3VzZXItYXZhdGFyLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1lBQ1k7Z0JBQ0ksYUFBYTtnQkFDYixZQUFZO2dCQUNaLDJCQUEyQjtnQkFDM0IsZ0JBQWdCO2dCQUNoQiwyQkFBMkI7WUFDL0I7O1lBRUE7Z0JBQ0ksY0FBYztZQUNsQjs7QUFFWixneEJBQWd4QiIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgOmhvc3QgPiBkaXYge1xuICAgICAgICAgICAgICAgIGhlaWdodDogMi41ZW07XG4gICAgICAgICAgICAgICAgd2lkdGg6IDIuNWVtO1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWIyKTtcbiAgICAgICAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgICAgICAgICAgIGJvcmRlcjogMnB4IHNvbGlkIHZhcigtLWIxKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLmluaXRpYWxzIHtcbiAgICAgICAgICAgICAgICBmb250LXNpemU6IDFlbTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl0sInNvdXJjZVJvb3QiOiIifQ== */"]
  });
}

/***/ }),

/***/ 74633:
/*!************************************************************!*\
  !*** ./libs/components/src/lib/user-controls.component.ts ***!
  \************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   UserControlsComponent: () => (/* binding */ UserControlsComponent)
/* harmony export */ });
/* harmony import */ var _home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 89204);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var _placeos_components__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @placeos/components */ 51588);
/* harmony import */ var _placeos_organisation__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @placeos/organisation */ 2510);
/* harmony import */ var _placeos_ts_client__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @placeos/ts-client */ 35713);
/* harmony import */ var libs_users_src_lib_wfh_settings_modal_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! libs/users/src/lib/wfh-settings-modal.component */ 43022);
/* harmony import */ var _accessibility_tooltip_component__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./accessibility-tooltip.component */ 6539);
/* harmony import */ var _building_select_component__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./building-select.component */ 55550);
/* harmony import */ var _help_tooltip_component__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./help-tooltip.component */ 46926);
/* harmony import */ var _language_tooltip_component__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./language-tooltip.component */ 53835);
/* harmony import */ var _region_select_component__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./region-select.component */ 66962);
/* harmony import */ var libs_form_fields_src_lib_support_ticket_modal_component__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! libs/form-fields/src/lib/support-ticket-modal.component */ 38791);
/* harmony import */ var _work_location_tooltip_component__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./work-location-tooltip.component */ 42792);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_material_dialog__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @angular/material/dialog */ 12587);


















function UserControlsComponent_div_7_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelementStart"](0, "div", 31)(1, "button", 17)(2, "div", 18)(3, "div", 19)(4, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵtext"](5, "layers");
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelementStart"](6, "div", 32);
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵtext"](7);
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵpipe"](8, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵpipe"](9, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelementStart"](10, "app-icon", 21);
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵtext"](11, " chevron_right ");
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelementEnd"]()()()();
  }
  if (rf & 2) {
    let tmp_3_0;
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵproperty"]("content", ctx_r1.region_select);
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵadvance"](7);
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵtextInterpolate1"](" ", ((tmp_3_0 = _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵpipeBind1"](8, 2, ctx_r1.region)) == null ? null : tmp_3_0.display_name) || ((tmp_3_0 = _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵpipeBind1"](9, 4, ctx_r1.region)) == null ? null : tmp_3_0.name), " ");
  }
}
function UserControlsComponent_div_9_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelementStart"](0, "div", 31)(1, "button", 17)(2, "div", 18)(3, "div", 19)(4, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵtext"](5, "business");
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelementStart"](6, "div", 32);
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵtext"](7);
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵpipe"](8, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵpipe"](9, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelementStart"](10, "app-icon", 21);
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵtext"](11, " chevron_right ");
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelementEnd"]()()()();
  }
  if (rf & 2) {
    let tmp_3_0;
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵproperty"]("content", ctx_r1.building_select);
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵadvance"](7);
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵtextInterpolate1"](" ", ((tmp_3_0 = _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵpipeBind1"](8, 2, ctx_r1.building)) == null ? null : tmp_3_0.display_name) || ((tmp_3_0 = _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵpipeBind1"](9, 4, ctx_r1.building)) == null ? null : tmp_3_0.name), " ");
  }
}
function UserControlsComponent_div_10_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelementStart"](0, "div", 16)(1, "button", 17)(2, "div", 18)(3, "div", 19)(4, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵtext"](5, "help");
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelementStart"](6, "div", 20);
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵi18n"](7, 4);
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelementStart"](8, "app-icon", 21);
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵtext"](9, "chevron_right");
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelementEnd"]()()()();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵproperty"]("content", ctx_r1.help_tooltip);
  }
}
function UserControlsComponent_div_11_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelementStart"](0, "div", 16)(1, "button", 17)(2, "div", 18)(3, "div", 19)(4, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵtext"](5, "share_location");
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelementStart"](6, "div", 20);
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵi18n"](7, 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelementStart"](8, "app-icon", 21);
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵtext"](9, "chevron_right");
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelementEnd"]()()()();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵproperty"]("content", ctx_r1.work_location_tooltip);
  }
}
function UserControlsComponent_div_22_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelementStart"](0, "div", 16)(1, "button", 17)(2, "div", 18)(3, "div", 19)(4, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵtext"](5, "desk");
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelementStart"](6, "div", 20);
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵi18n"](7, 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelementStart"](8, "app-icon", 21);
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵtext"](9, "chevron_right");
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelementEnd"]()()()();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵnextContext"]();
    const desk_height_tooltip_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵreference"](24);
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵclassProp"]("!border-b", !(ctx_r1.locales == null ? null : ctx_r1.locales.length));
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵproperty"]("content", desk_height_tooltip_r3);
  }
}
function UserControlsComponent_ng_template_23_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelement"](0, "desk-height-presets");
  }
}
function UserControlsComponent_div_25_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelementStart"](0, "div", 33)(1, "button", 17)(2, "div", 18)(3, "div", 19)(4, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵtext"](5, "mode_night");
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelementStart"](6, "div", 20);
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵi18n"](7, 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵpipe"](8, "translate");
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵpipe"](9, "translate");
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelementStart"](10, "app-icon", 21);
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵtext"](11, "chevron_right");
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelementEnd"]()()()();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵproperty"]("content", ctx_r1.language_tooltip);
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵadvance"](9);
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵi18nExp"](_angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵpipeBind1"](8, 3, "COMMON.LANGUAGE_LABEL"))(_angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵpipeBind1"](9, 5, "COMMON.LANGUAGE"));
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵi18nApply"](7);
  }
}
function UserControlsComponent_button_26_Template(rf, ctx) {
  if (rf & 1) {
    const _r4 = _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelementStart"](0, "button", 34);
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵlistener"]("click", function UserControlsComponent_button_26_Template_button_click_0_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵrestoreView"](_r4);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵresetView"](ctx_r1.newSupportTicket());
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelementStart"](1, "div", 18)(2, "div", 19)(3, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵtext"](4, "support_agent");
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelementStart"](5, "div", 20);
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵi18n"](6, 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelementEnd"]()()();
  }
}
function UserControlsComponent_button_31_Template(rf, ctx) {
  if (rf & 1) {
    const _r5 = _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelementStart"](0, "button", 35);
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵlistener"]("click", function UserControlsComponent_button_31_Template_button_click_0_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵrestoreView"](_r5);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵresetView"](ctx_r1.reloadPage());
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵtext"](1, " New Version ");
    _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelementEnd"]();
  }
}
class UserControlsComponent {
  get user() {
    return (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.currentUser)();
  }
  get groups() {
    return this.user.groups.join('\n');
  }
  get version() {
    return _placeos_common__WEBPACK_IMPORTED_MODULE_1__.VERSION;
  }
  get features() {
    return this._settings.get('app.features') || [];
  }
  get locales() {
    return this._settings.get('app.locales') || [];
  }
  get desk_height() {
    return this._settings.get('app.desks.height_enabled');
  }
  get use_region() {
    return this._settings.get('app.use_region');
  }
  get disable_building_select() {
    return this._settings.get('app.disable_building_select');
  }
  get has_new_version() {
    return (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.hasNewVersion)();
  }
  constructor(_settings, _org, _dialog) {
    this._settings = _settings;
    this._org = _org;
    this._dialog = _dialog;
    this.building = this._org.active_building;
    this.region = this._org.active_region;
    this.regions = this._org.region_list;
    this.region_select = _region_select_component__WEBPACK_IMPORTED_MODULE_10__.RegionSelectComponent;
    this.building_select = _building_select_component__WEBPACK_IMPORTED_MODULE_7__.BuildingSelectComponent;
    this.help_tooltip = _help_tooltip_component__WEBPACK_IMPORTED_MODULE_8__.HelpTooltipComponent;
    this.accessibility_tooltip = _accessibility_tooltip_component__WEBPACK_IMPORTED_MODULE_6__.AccessibilityTooltipComponent;
    this.language_tooltip = _language_tooltip_component__WEBPACK_IMPORTED_MODULE_9__.LanguageSelectComponent;
    this.work_location_tooltip = _work_location_tooltip_component__WEBPACK_IMPORTED_MODULE_12__.WorkLocationTooltipComponent;
  }
  logout() {
    (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_4__.logout)();
  }
  reloadPage() {
    location.reload();
  }
  newSupportTicket() {
    if (this._settings.get('app.external_support_url')) {
      window.open(this._settings.get('app.external_support_url'), '_blank');
    } else {
      this._dialog.open(libs_form_fields_src_lib_support_ticket_modal_component__WEBPACK_IMPORTED_MODULE_11__.SupportTicketModalComponent);
    }
  }
  openWfhModal() {
    this._dialog.open(libs_users_src_lib_wfh_settings_modal_component__WEBPACK_IMPORTED_MODULE_5__.WFHSettingsModalComponent);
  }
  viewChangelog() {
    var _this = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      const changelog = yield (yield fetch('https://raw.githubusercontent.com/PlaceOS/user-interfaces/develop/CHANGELOG.md')).text();
      _this._dialog.open(_placeos_components__WEBPACK_IMPORTED_MODULE_2__.ChangelogModalComponent, {
        data: {
          changelog
        }
      });
    })();
  }
  saveSetting(name, value) {
    this._settings.saveUserSetting(name, value);
  }
  formatLabel(value) {
    return `${value.toFixed(1)}cm`;
  }
  static #_ = this.ɵfac = function UserControlsComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || UserControlsComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵdirectiveInject"](_placeos_common__WEBPACK_IMPORTED_MODULE_1__.SettingsService), _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵdirectiveInject"](_placeos_organisation__WEBPACK_IMPORTED_MODULE_3__.OrganisationService), _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵdirectiveInject"](_angular_material_dialog__WEBPACK_IMPORTED_MODULE_14__.MatDialog));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵdefineComponent"]({
    type: UserControlsComponent,
    selectors: [["user-controls"]],
    decls: 41,
    vars: 26,
    consts: () => {
      let i18n_0;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_6572705143012462182$$LIBS_COMPONENTS_SRC_LIB_USER_CONTROLS_COMPONENT_TS_0 = goog.getMsg("Display & Accessibility");
        i18n_0 = MSG_EXTERNAL_6572705143012462182$$LIBS_COMPONENTS_SRC_LIB_USER_CONTROLS_COMPONENT_TS_0;
      } else {
        i18n_0 = $localize`:␟d22b673a92b43eabbdebd80b1539a553703c84f6␟6572705143012462182:Display & Accessibility`;
      }
      let i18n_1;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_3324363634810141643$$LIBS_COMPONENTS_SRC_LIB_USER_CONTROLS_COMPONENT_TS_1 = goog.getMsg(" Sign Out ");
        i18n_1 = MSG_EXTERNAL_3324363634810141643$$LIBS_COMPONENTS_SRC_LIB_USER_CONTROLS_COMPONENT_TS_1;
      } else {
        i18n_1 = $localize`:␟a9bc2f36435d7979f179c544151bca38e4fe20cc␟3324363634810141643: Sign Out `;
      }
      let i18n_2;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_6267525301152196009$$LIBS_COMPONENTS_SRC_LIB_USER_CONTROLS_COMPONENT_TS_2 = goog.getMsg("Version: ");
        i18n_2 = MSG_EXTERNAL_6267525301152196009$$LIBS_COMPONENTS_SRC_LIB_USER_CONTROLS_COMPONENT_TS_2;
      } else {
        i18n_2 = $localize`:␟0b1694897c27c2a5bbdf582a7f7d2bac898f3505␟6267525301152196009:Version: `;
      }
      let i18n_3;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_7393197899734735120$$LIBS_COMPONENTS_SRC_LIB_USER_CONTROLS_COMPONENT_TS_3 = goog.getMsg("Help & Support");
        i18n_3 = MSG_EXTERNAL_7393197899734735120$$LIBS_COMPONENTS_SRC_LIB_USER_CONTROLS_COMPONENT_TS_3;
      } else {
        i18n_3 = $localize`:␟258586f2141d5b6c98ef28c38ac6f55a81a301b2␟7393197899734735120:Help & Support`;
      }
      let i18n_4;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_8897714476038526431$$LIBS_COMPONENTS_SRC_LIB_USER_CONTROLS_COMPONENT_TS_4 = goog.getMsg("Work Location");
        i18n_4 = MSG_EXTERNAL_8897714476038526431$$LIBS_COMPONENTS_SRC_LIB_USER_CONTROLS_COMPONENT_TS_4;
      } else {
        i18n_4 = $localize`:␟8ebf03c6dd7c3ad24dcc9a0f64ffad0e9588ac2e␟8897714476038526431:Work Location`;
      }
      let i18n_5;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_8687640110841202898$$LIBS_COMPONENTS_SRC_LIB_USER_CONTROLS_COMPONENT_TS_5 = goog.getMsg("Desk Settings");
        i18n_5 = MSG_EXTERNAL_8687640110841202898$$LIBS_COMPONENTS_SRC_LIB_USER_CONTROLS_COMPONENT_TS_5;
      } else {
        i18n_5 = $localize`:␟6f3ddfacb6cc158043b77530f74c15dc406019fe␟8687640110841202898:Desk Settings`;
      }
      let i18n_6;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_6210988327734808594$$LIBS_COMPONENTS_SRC_LIB_USER_CONTROLS_COMPONENT_TS_6 = goog.getMsg(" {$interpolation}: {$interpolation_1} ", {
          "interpolation": "\uFFFD0\uFFFD",
          "interpolation_1": "\uFFFD1\uFFFD"
        }, {
          original_code: {
            "interpolation": "{{ 'COMMON.LANGUAGE_LABEL' | translate }}",
            "interpolation_1": "{{ 'COMMON.LANGUAGE' | translate }}"
          }
        });
        i18n_6 = MSG_EXTERNAL_6210988327734808594$$LIBS_COMPONENTS_SRC_LIB_USER_CONTROLS_COMPONENT_TS_6;
      } else {
        i18n_6 = $localize`:␟5a0db2e7be57ba081264f141f3ee4a8b683f1f6e␟6210988327734808594: ${"\uFFFD0\uFFFD"}:INTERPOLATION:: ${"\uFFFD1\uFFFD"}:INTERPOLATION_1: `;
      }
      let i18n_7;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_270482714535552546$$LIBS_COMPONENTS_SRC_LIB_USER_CONTROLS_COMPONENT_TS_7 = goog.getMsg("Raise a support ticket");
        i18n_7 = MSG_EXTERNAL_270482714535552546$$LIBS_COMPONENTS_SRC_LIB_USER_CONTROLS_COMPONENT_TS_7;
      } else {
        i18n_7 = $localize`:␟b862b54c42ded9ebb47260f60b0f75985c5fab18␟270482714535552546:Raise a support ticket`;
      }
      return [["desk_height_tooltip", ""], i18n_0, i18n_1, i18n_2, i18n_3, i18n_4, i18n_5, i18n_6, i18n_7, [1, "rounded", "bg-base-100", "shadow", "mt-1", "flex", "flex-col", "relative", "divide-y", "divide-base-200"], ["avatar", "", 1, "flex", "flex-col", "items-center", "p-2", "w-[18rem]"], [1, "text-2xl", 3, "user", "matTooltip"], [1, ""], [1, "text-xs", "opacity-60", "truncate"], ["customTooltip", "", "class", "relative", 3, "content", 4, "ngIf"], ["customTooltip", "", 3, "content", 4, "ngIf"], ["customTooltip", "", 3, "content"], ["btn", "", "matRipple", "", 1, "clear", "w-full", "text-left", "h-[3.5rem]"], [1, "w-full", "flex", "items-center", "space-x-2"], [1, "flex", "items-center", "justify-center", "rounded-full", "w-8", "h-8", "bg-base-200"], [1, "flex-1"], [1, "opacity-60", "text-2xl"], ["customTooltip", "", 3, "content", "!border-b", 4, "ngIf"], ["customTooltip", "", "class", "!border-b", 3, "content", 4, "ngIf"], ["btn", "", "matRipple", "", "class", "clear w-full text-left h-[3.5rem]", 3, "click", 4, "ngIf"], [1, "flex", "flex-col", "items-center", "p-4"], [1, "flex", "items-center", "justify-center", "space-x-2", "mb-4"], ["btn", "", "matRipple", "", 1, "inverse", 3, "click"], ["btn", "", "matRipple", "", 3, "click", 4, "ngIf"], [1, "text-xs", "opacity-60", "w-full"], [1, "underline", "p-0", "m-0", "bg-none", "border-none", "text-xs", 3, "click"], ["customTooltip", "", 1, "relative", 3, "content"], [1, "flex-1", "truncate", "w-px"], ["customTooltip", "", 1, "!border-b", 3, "content"], ["btn", "", "matRipple", "", 1, "clear", "w-full", "text-left", "h-[3.5rem]", 3, "click"], ["btn", "", "matRipple", "", 3, "click"]];
    },
    template: function UserControlsComponent_Template(rf, ctx) {
      if (rf & 1) {
        const _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵgetCurrentView"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelementStart"](0, "div", 9)(1, "div", 10);
        _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelement"](2, "a-user-avatar", 11);
        _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelementStart"](3, "div", 12);
        _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵtext"](4);
        _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelementStart"](5, "div", 13);
        _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵtext"](6);
        _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵtemplate"](7, UserControlsComponent_div_7_Template, 12, 6, "div", 14);
        _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵpipe"](8, "async");
        _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵtemplate"](9, UserControlsComponent_div_9_Template, 12, 6, "div", 14)(10, UserControlsComponent_div_10_Template, 10, 1, "div", 15)(11, UserControlsComponent_div_11_Template, 10, 1, "div", 15);
        _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelementStart"](12, "div", 16)(13, "button", 17)(14, "div", 18)(15, "div", 19)(16, "app-icon");
        _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵtext"](17, "mode_night");
        _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelementStart"](18, "div", 20);
        _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵi18n"](19, 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelementStart"](20, "app-icon", 21);
        _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵtext"](21, "chevron_right");
        _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelementEnd"]()()()();
        _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵtemplate"](22, UserControlsComponent_div_22_Template, 10, 3, "div", 22)(23, UserControlsComponent_ng_template_23_Template, 1, 0, "ng-template", null, 0, _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵtemplateRefExtractor"])(25, UserControlsComponent_div_25_Template, 12, 7, "div", 23)(26, UserControlsComponent_button_26_Template, 7, 0, "button", 24);
        _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelementStart"](27, "div", 25)(28, "div", 26)(29, "button", 27);
        _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵlistener"]("click", function UserControlsComponent_Template_button_click_29_listener() {
          _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵrestoreView"](_r1);
          return _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵresetView"](ctx.logout());
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵi18n"](30, 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵtemplate"](31, UserControlsComponent_button_31_Template, 2, 0, "button", 28);
        _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelementStart"](32, "div", 29);
        _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelementContainerStart"](33);
        _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵi18n"](34, 3);
        _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelementContainerEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelementStart"](35, "button", 30);
        _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵlistener"]("click", function UserControlsComponent_Template_button_click_35_listener() {
          _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵrestoreView"](_r1);
          return _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵresetView"](ctx.viewChangelog());
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵtext"](36);
        _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelementStart"](37, "div", 29);
        _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵtext"](38);
        _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵpipe"](39, "date");
        _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵpipe"](40, "date");
        _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵelementEnd"]()()();
      }
      if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵproperty"]("user", ctx.user)("matTooltip", ctx.groups);
        _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵtextInterpolate"](ctx.user == null ? null : ctx.user.name);
        _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵtextInterpolate"](ctx.user == null ? null : ctx.user.email);
        _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵproperty"]("ngIf", _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵpipeBind1"](8, 18, ctx.regions).length);
        _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵproperty"]("ngIf", !ctx.disable_building_select && !ctx.use_region);
        _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵproperty"]("ngIf", ctx.features.includes("help"));
        _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵproperty"]("ngIf", ctx.features.includes("wfh"));
        _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵclassProp"]("!border-b", !(ctx.locales == null ? null : ctx.locales.length) || !ctx.desk_height);
        _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵproperty"]("content", ctx.accessibility_tooltip);
        _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵadvance"](10);
        _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵproperty"]("ngIf", ctx.desk_height);
        _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵadvance"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵproperty"]("ngIf", ctx.locales == null ? null : ctx.locales.length);
        _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵproperty"]("ngIf", ctx.features.includes("support-ticket"));
        _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵadvance"](5);
        _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵproperty"]("ngIf", ctx.has_new_version);
        _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵadvance"](5);
        _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵtextInterpolate1"](" ", ctx.version.hash, " ");
        _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵtextInterpolate2"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵpipeBind2"](39, 20, ctx.version.time, "longDate"), " (", _angular_core__WEBPACK_IMPORTED_MODULE_13__["ɵɵpipeBind2"](40, 23, ctx.version.time, "shortTime"), ") ");
      }
    }
  });
}

/***/ }),

/***/ 75080:
/*!***************************************************************!*\
  !*** ./libs/components/src/lib/virtual-keyboard.component.ts ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   VirtualKeyboardComponent: () => (/* binding */ VirtualKeyboardComponent)
/* harmony export */ });
/* harmony import */ var _angular_cdk_portal__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/cdk/portal */ 9168);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_cdk_overlay__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/cdk/overlay */ 81570);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/common */ 60316);








const _c0 = ["keyboard", ""];
const _c1 = ["*"];
function VirtualKeyboardComponent_ng_template_1_div_1_ng_container_1_div_3_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](0, "div", 7);
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵclassProp"]("bg-success", ctx_r1.state === "shift");
  }
}
function VirtualKeyboardComponent_ng_template_1_div_1_ng_container_1_Template(rf, ctx) {
  if (rf & 1) {
    const _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "div", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("focus", function VirtualKeyboardComponent_ng_template_1_div_1_ng_container_1_Template_div_focus_1_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r1);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](3);
      return _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵresetView"](ctx_r1.focusInput());
    })("click", function VirtualKeyboardComponent_ng_template_1_div_1_ng_container_1_Template_div_click_1_listener() {
      const key_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r1).$implicit;
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"](3);
      return _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵresetView"](ctx_r1.handleKeyPress(key_r3));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](3, VirtualKeyboardComponent_ng_template_1_div_1_ng_container_1_div_3_Template, 1, 2, "div", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementContainerEnd"]();
  }
  if (rf & 2) {
    const key_r3 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵclassProp"]("special", key_r3[0] === "{" && key_r3.length > 1)("space", key_r3 === "{space}");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵattribute"]("key", key_r3);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate1"](" ", key_r3 === "{space}" ? "Space" : key_r3 === "{caps}" ? "Caps Lock" : key_r3 === "{backspace}" ? "Backspace" : key_r3, " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", key_r3 === "{caps}");
  }
}
function VirtualKeyboardComponent_ng_template_1_div_1_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div", 3);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](1, VirtualKeyboardComponent_ng_template_1_div_1_ng_container_1_Template, 4, 7, "ng-container", 4);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const row_r4 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngForOf", row_r4);
  }
}
function VirtualKeyboardComponent_ng_template_1_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div", 1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](1, VirtualKeyboardComponent_ng_template_1_div_1_Template, 2, 1, "div", 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngForOf", ctx_r1.keyset);
  }
}
const DEFAULT_KEYS = ['0123456789'.split(''), 'qwertyuiop'.split(''), 'asdfghjkl'.split(''), 'zxcvbnm'.split(''), ['{caps}', '{space}', '{backspace}']];
class VirtualKeyboardComponent extends _placeos_common__WEBPACK_IMPORTED_MODULE_0__.AsyncHandler {
  constructor(_element, _overlay) {
    super();
    this._element = _element;
    this._overlay = _overlay;
    /** List of rows of keys to display on the keyboard */
    this.keyset = DEFAULT_KEYS;
    /** Current state of the displayed keyset */
    this.state = 'normal';
    /** References to the overlay containing the keyboard */
    this._overlay_ref = null;
    this.onFocus = () => {
      if (!VirtualKeyboardComponent.enabled) return;
      this.open();
      this.clearTimeout('blur');
    };
    this.onBlur = () => this.timeout('blur', () => this.close());
  }
  ngOnChanges(changes) {
    if (changes.keyset) {
      if (!this.keyset) this.keyset = DEFAULT_KEYS;
    }
  }
  ngOnDestroy() {
    super.ngOnDestroy();
    this.close();
  }
  focusInput() {
    this._element?.nativeElement?.blur();
    this._element?.nativeElement?.focus();
  }
  open() {
    if (this._overlay_ref) return;
    if (!this._portal) return;
    this._overlay_ref = this._overlay.create({
      positionStrategy: this._overlay.position().global().bottom().centerHorizontally()
    });
    this._overlay_ref.attach(this._portal);
  }
  close() {
    if (this._overlay_ref) {
      this._overlay_ref.dispose();
      this._overlay_ref = null;
    }
  }
  handleKeyPress(key) {
    let cursor_pos = this._element.nativeElement.selectionStart;
    const str = this._element.nativeElement.value || '';
    switch (key.toLowerCase()) {
      case '{caps}':
      case '{shift}':
        this.state = 'shift';
        break;
      case '{backspace}':
        this._element.nativeElement.value = `${str.substr(0, cursor_pos - 1)}${str.substr(cursor_pos, str.length)}`;
        cursor_pos = Math.max(0, cursor_pos - 1);
        break;
      case '{space}':
        this._element.nativeElement.value = `${str.substr(0, cursor_pos)}${' '}${str.substr(cursor_pos, str.length)}`;
        cursor_pos += 1;
        break;
      default:
        if (this.state === 'shift') this.state = 'normal';
        this._element.nativeElement.value = `${str.substr(0, cursor_pos)}${key}${str.substr(cursor_pos, str.length)}`;
        cursor_pos += 1;
    }
    this._element.nativeElement.dispatchEvent(new InputEvent('input'));
    this.updateKeyState();
    this.timeout('focus', () => {
      this.focusInput();
      this._element.nativeElement.selectionStart = cursor_pos;
      this._element.nativeElement.selectionEnd = cursor_pos;
    }, 50);
  }
  updateKeyState() {
    this.keyset = this.keyset.map(_ => _.map(k => k.length > 1 ? k : k[this.state !== 'normal' ? 'toUpperCase' : 'toLowerCase']()));
  }
  static #_ = this.ɵfac = function VirtualKeyboardComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || VirtualKeyboardComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_1__.ElementRef), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdirectiveInject"](_angular_cdk_overlay__WEBPACK_IMPORTED_MODULE_2__.Overlay));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdefineComponent"]({
    type: VirtualKeyboardComponent,
    selectors: [["input", "keyboard", ""], ["textarea", "keyboard", ""]],
    viewQuery: function VirtualKeyboardComponent_Query(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵviewQuery"](_angular_cdk_portal__WEBPACK_IMPORTED_MODULE_3__.CdkPortal, 5);
      }
      if (rf & 2) {
        let _t;
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵloadQuery"]()) && (ctx._portal = _t.first);
      }
    },
    hostBindings: function VirtualKeyboardComponent_HostBindings(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("focus", function VirtualKeyboardComponent_focus_HostBindingHandler() {
          return ctx.onFocus();
        })("blur", function VirtualKeyboardComponent_blur_HostBindingHandler() {
          return ctx.onBlur();
        });
      }
    },
    inputs: {
      keyset: "keyset"
    },
    features: [_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵInheritDefinitionFeature"], _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵNgOnChangesFeature"]],
    attrs: _c0,
    ngContentSelectors: _c1,
    decls: 2,
    vars: 0,
    consts: [["cdk-portal", ""], ["keyboard-view", "", 1, "w-screen", "flex", "flex-col", "space-y-4", "bg-base-200", "p-2", "border-t", "border-base-200"], ["row", "", "class", "flex items-center justify-center space-x-2", 4, "ngFor", "ngForOf"], ["row", "", 1, "flex", "items-center", "justify-center", "space-x-2"], [4, "ngFor", "ngForOf"], ["tabindex", "0", 1, "rounded-xl", "p-2", "border", "border-base-200", "relative", "cursor-pointer", "bg-base-100", 3, "focus", "click"], ["dot", "", "class", "absolute top-2 right-2 h-2 w-2 rounded-full bg-base-200", 3, "bg-success", 4, "ngIf"], ["dot", "", 1, "absolute", "top-2", "right-2", "h-2", "w-2", "rounded-full", "bg-base-200"]],
    template: function VirtualKeyboardComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵprojectionDef"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵprojection"](0);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](1, VirtualKeyboardComponent_ng_template_1_Template, 2, 1, "ng-template", 0);
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_4__.NgForOf, _angular_common__WEBPACK_IMPORTED_MODULE_4__.NgIf, _angular_cdk_portal__WEBPACK_IMPORTED_MODULE_3__.TemplatePortalDirective],
    styles: ["[key][_ngcontent-%COMP%] {\n                height: 3.5rem;\n                width: 4rem;\n                transition: box-shadow 200ms, top 200ms;\n                box-shadow: 0 4px 0 0.04px rgba(0, 0, 0, 0.1);\n            }\n\n            [key].special[_ngcontent-%COMP%] {\n                width: 10rem;\n            }\n\n            [key].space[_ngcontent-%COMP%] {\n                flex: 1;\n                min-width: 10rem;\n                max-width: 25rem;\n            }\n\n            [key][_ngcontent-%COMP%]:hover {\n                top: 2px;\n                box-shadow: 0 2px 0 0.04px rgba(0, 0, 0, 0.1);\n            }\n\n            [key][_ngcontent-%COMP%]:active {\n                top: 4px;\n                box-shadow: 0 0 0 0.04px rgba(0, 0, 0, 0.1);\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInZpcnR1YWwta2V5Ym9hcmQuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxjQUFjO2dCQUNkLFdBQVc7Z0JBQ1gsdUNBQXVDO2dCQUN2Qyw2Q0FBNkM7WUFDakQ7O1lBRUE7Z0JBQ0ksWUFBWTtZQUNoQjs7WUFFQTtnQkFDSSxPQUFPO2dCQUNQLGdCQUFnQjtnQkFDaEIsZ0JBQWdCO1lBQ3BCOztZQUVBO2dCQUNJLFFBQVE7Z0JBQ1IsNkNBQTZDO1lBQ2pEOztZQUVBO2dCQUNJLFFBQVE7Z0JBQ1IsMkNBQTJDO1lBQy9DIiwiZmlsZSI6InZpcnR1YWwta2V5Ym9hcmQuY29tcG9uZW50LnRzIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICBba2V5XSB7XG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAzLjVyZW07XG4gICAgICAgICAgICAgICAgd2lkdGg6IDRyZW07XG4gICAgICAgICAgICAgICAgdHJhbnNpdGlvbjogYm94LXNoYWRvdyAyMDBtcywgdG9wIDIwMG1zO1xuICAgICAgICAgICAgICAgIGJveC1zaGFkb3c6IDAgNHB4IDAgMC4wNHB4IHJnYmEoMCwgMCwgMCwgMC4xKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgW2tleV0uc3BlY2lhbCB7XG4gICAgICAgICAgICAgICAgd2lkdGg6IDEwcmVtO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBba2V5XS5zcGFjZSB7XG4gICAgICAgICAgICAgICAgZmxleDogMTtcbiAgICAgICAgICAgICAgICBtaW4td2lkdGg6IDEwcmVtO1xuICAgICAgICAgICAgICAgIG1heC13aWR0aDogMjVyZW07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIFtrZXldOmhvdmVyIHtcbiAgICAgICAgICAgICAgICB0b3A6IDJweDtcbiAgICAgICAgICAgICAgICBib3gtc2hhZG93OiAwIDJweCAwIDAuMDRweCByZ2JhKDAsIDAsIDAsIDAuMSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIFtrZXldOmFjdGl2ZSB7XG4gICAgICAgICAgICAgICAgdG9wOiA0cHg7XG4gICAgICAgICAgICAgICAgYm94LXNoYWRvdzogMCAwIDAgMC4wNHB4IHJnYmEoMCwgMCwgMCwgMC4xKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl19 */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvY29tcG9uZW50cy9zcmMvbGliL3ZpcnR1YWwta2V5Ym9hcmQuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxjQUFjO2dCQUNkLFdBQVc7Z0JBQ1gsdUNBQXVDO2dCQUN2Qyw2Q0FBNkM7WUFDakQ7O1lBRUE7Z0JBQ0ksWUFBWTtZQUNoQjs7WUFFQTtnQkFDSSxPQUFPO2dCQUNQLGdCQUFnQjtnQkFDaEIsZ0JBQWdCO1lBQ3BCOztZQUVBO2dCQUNJLFFBQVE7Z0JBQ1IsNkNBQTZDO1lBQ2pEOztZQUVBO2dCQUNJLFFBQVE7Z0JBQ1IsMkNBQTJDO1lBQy9DOztBQUVaLGc4Q0FBZzhDIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICBba2V5XSB7XG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAzLjVyZW07XG4gICAgICAgICAgICAgICAgd2lkdGg6IDRyZW07XG4gICAgICAgICAgICAgICAgdHJhbnNpdGlvbjogYm94LXNoYWRvdyAyMDBtcywgdG9wIDIwMG1zO1xuICAgICAgICAgICAgICAgIGJveC1zaGFkb3c6IDAgNHB4IDAgMC4wNHB4IHJnYmEoMCwgMCwgMCwgMC4xKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgW2tleV0uc3BlY2lhbCB7XG4gICAgICAgICAgICAgICAgd2lkdGg6IDEwcmVtO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBba2V5XS5zcGFjZSB7XG4gICAgICAgICAgICAgICAgZmxleDogMTtcbiAgICAgICAgICAgICAgICBtaW4td2lkdGg6IDEwcmVtO1xuICAgICAgICAgICAgICAgIG1heC13aWR0aDogMjVyZW07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIFtrZXldOmhvdmVyIHtcbiAgICAgICAgICAgICAgICB0b3A6IDJweDtcbiAgICAgICAgICAgICAgICBib3gtc2hhZG93OiAwIDJweCAwIDAuMDRweCByZ2JhKDAsIDAsIDAsIDAuMSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIFtrZXldOmFjdGl2ZSB7XG4gICAgICAgICAgICAgICAgdG9wOiA0cHg7XG4gICAgICAgICAgICAgICAgYm94LXNoYWRvdzogMCAwIDAgMC4wNHB4IHJnYmEoMCwgMCwgMCwgMC4xKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl0sInNvdXJjZVJvb3QiOiIifQ== */"]
  });
}

/***/ }),

/***/ 42792:
/*!********************************************************************!*\
  !*** ./libs/components/src/lib/work-location-tooltip.component.ts ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   WorkLocationTooltipComponent: () => (/* binding */ WorkLocationTooltipComponent)
/* harmony export */ });
/* harmony import */ var _home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 89204);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var _placeos_ts_client__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @placeos/ts-client */ 35713);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! date-fns */ 45726);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! date-fns */ 23206);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! date-fns */ 77177);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! date-fns */ 41192);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! date-fns */ 55882);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! date-fns */ 28797);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! date-fns */ 33240);
/* harmony import */ var libs_users_src_lib_wfh_settings_modal_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! libs/users/src/lib/wfh-settings-modal.component */ 43022);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_material_dialog__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @angular/material/dialog */ 12587);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _angular_material_menu__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @angular/material/menu */ 31034);
/* harmony import */ var _angular_material_core__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @angular/material/core */ 74646);
/* harmony import */ var _angular_material_tooltip__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @angular/material/tooltip */ 80640);
/* harmony import */ var _icon_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./icon.component */ 69434);













function WorkLocationTooltipComponent_div_10_div_1_button_12_Template(rf, ctx) {
  if (rf & 1) {
    const _r2 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "button", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("click", function WorkLocationTooltipComponent_div_10_div_1_button_12_Template_button_click_0_listener() {
      const loc_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵrestoreView"](_r2).$implicit;
      const i_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"]().index;
      const ctx_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"](2);
      return _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵresetView"](ctx_r4.setLocation(i_r4, loc_r3.id));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](1, "div", 19)(2, "app-icon", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](4, "div", 20);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]()()();
  }
  if (rf & 2) {
    const loc_r3 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtextInterpolate"](loc_r3.icon);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtextInterpolate"](loc_r3.name);
  }
}
function WorkLocationTooltipComponent_div_10_div_1_div_17_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelement"](0, "div", 21);
  }
}
function WorkLocationTooltipComponent_div_10_div_1_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "div", 10)(1, "div", 11)(2, "app-icon", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](4, "div", 13)(5, "button", 14)(6, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](7);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](8, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](9, "expand_more");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](10, "mat-menu", null, 1);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](12, WorkLocationTooltipComponent_div_10_div_1_button_12_Template, 6, 2, "button", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](13, "div", 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](14);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipe"](15, "date");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipe"](16, "date");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](17, WorkLocationTooltipComponent_div_10_div_1_div_17_Template, 1, 0, "div", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const block_r6 = ctx.$implicit;
    const i_r4 = ctx.index;
    const menu_r7 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵreference"](11);
    const ctx_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵclassProp"]("opacity-30", ctx_r4.now > ctx_r4.timeFrom(block_r6.end_time));
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵclassProp"]("bg-base-200", ctx_r4.now < ctx_r4.timeFrom(block_r6.start_time) || ctx_r4.now > ctx_r4.timeFrom(block_r6.end_time))("bg-info", ctx_r4.now >= ctx_r4.timeFrom(block_r6.start_time) && ctx_r4.now <= ctx_r4.timeFrom(block_r6.end_time))("text-info-content", ctx_r4.now >= ctx_r4.timeFrom(block_r6.start_time) && ctx_r4.now <= ctx_r4.timeFrom(block_r6.end_time));
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtextInterpolate"](ctx_r4.location_icon(ctx_r4.timeFrom(block_r6.start_time)));
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("matMenuTriggerFor", menu_r7);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtextInterpolate1"](" ", ctx_r4.location(ctx_r4.timeFrom(block_r6.start_time)), " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngForOf", ctx_r4.locations);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtextInterpolate2"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipeBind2"](15, 15, ctx_r4.timeFrom(block_r6.start_time), "shortTime"), " \u2013 ", _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipeBind2"](16, 18, ctx_r4.timeFrom(block_r6.end_time), "shortTime"), " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngIf", i_r4 > 0);
  }
}
function WorkLocationTooltipComponent_div_10_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "div", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](1, WorkLocationTooltipComponent_div_10_div_1_Template, 18, 21, "div", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngForOf", ctx_r4.active_preference == null ? null : ctx_r4.active_preference.blocks);
  }
}
function WorkLocationTooltipComponent_ng_template_11_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "div", 22)(1, "app-icon", 23);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](2, "event_busy");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](3, "p", 24);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](4, "No work location for today.");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](5, "p", 24);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](6, " Click the edit button on the top right to edit your work location preferences. ");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]()();
  }
}
class WorkLocationTooltipComponent {
  get active_preference() {
    const date = (0,date_fns__WEBPACK_IMPORTED_MODULE_6__.format)(new Date(), 'yyyy-MM-dd');
    if (this.overrides[date]) return this.overrides[date];
    return this.settings.find(pref => pref.day_of_week === new Date().getDay());
  }
  get now() {
    return (0,date_fns__WEBPACK_IMPORTED_MODULE_7__.startOfMinute)(Date.now()).getTime();
  }
  constructor(_dialog) {
    this._dialog = _dialog;
    this.locations = [{
      id: 'wfo',
      name: 'Office',
      icon: 'business'
    }, {
      id: 'wfh',
      name: 'Home',
      icon: 'home'
    }, {
      id: 'aol',
      name: 'Leave',
      icon: 'event_busy'
    }];
  }
  ngOnInit() {
    const user = (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.currentUser)();
    this.settings = user.work_preferences;
    this.overrides = user.work_overrides;
  }
  location_icon(time) {
    const user = (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.currentUser)();
    return user.location_icon(time + 1 * 60 * 1000);
  }
  location(time) {
    const user = (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.currentUser)();
    return user.location_name_time(time + 1 * 60 * 1000);
  }
  timeFrom(hours) {
    return (0,date_fns__WEBPACK_IMPORTED_MODULE_7__.startOfMinute)((0,date_fns__WEBPACK_IMPORTED_MODULE_8__.set)(new Date(), {
      hours: Math.floor(hours),
      minutes: hours * 60 % 60,
      seconds: 0,
      milliseconds: 0
    })).getTime();
  }
  editSettings() {
    this._dialog.open(libs_users_src_lib_wfh_settings_modal_component__WEBPACK_IMPORTED_MODULE_3__.WFHSettingsModalComponent);
  }
  setLocation(index, location) {
    var _this = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      const user = (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.currentUser)();
      const active_preference = _this.active_preference;
      const date = (0,date_fns__WEBPACK_IMPORTED_MODULE_6__.format)(Date.now(), 'yyyy-MM-dd');
      const new_overrides = {
        ...user.work_overrides,
        [date]: {
          ...active_preference,
          blocks: [...active_preference.blocks.slice(0, index), {
            ...active_preference.blocks[index],
            location
          }, ...active_preference.blocks.slice(index + 1)]
        }
      };
      for (const key in new_overrides) {
        const key_date = (0,date_fns__WEBPACK_IMPORTED_MODULE_9__.parse)(key, 'yyyy-MM-dd', new Date());
        if (!new_overrides[key].blocks.length || (0,date_fns__WEBPACK_IMPORTED_MODULE_10__.isBefore)(key_date, (0,date_fns__WEBPACK_IMPORTED_MODULE_11__.addDays)((0,date_fns__WEBPACK_IMPORTED_MODULE_12__.startOfDay)(Date.now()), -1))) {
          delete new_overrides[key];
        }
      }
      _this.overrides = new_overrides;
      yield (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_2__.updateUser)(user.id, {
        ...user,
        work_overrides: new_overrides
      }).toPromise();
      (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.reloadUserData)();
    })();
  }
  static #_ = this.ɵfac = function WorkLocationTooltipComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || WorkLocationTooltipComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵdirectiveInject"](_angular_material_dialog__WEBPACK_IMPORTED_MODULE_13__.MatDialog));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵdefineComponent"]({
    type: WorkLocationTooltipComponent,
    selectors: [["work-location-tooltip"]],
    decls: 13,
    vars: 6,
    consts: [["empty_state", ""], ["menu", "matMenu"], [1, "flex", "flex-col", "w-[18.5rem]", "rounded", "bg-base-100", "shadow", "relative", "-top-12", "-right-1", "overflow-hidden"], [1, "flex", "items-center", "justify-between", "px-2"], [1, "px-2", "py-4", "font-medium"], ["icon", "", "matRipple", "", "matTooltip", "Edit Work Location Preferences", "matTooltipPosition", "left", 1, "hover:bg-base-200", 3, "click"], [1, "px-4", "font-medium", "text-sm"], ["class", "pb-2", 4, "ngIf", "ngIfElse"], [1, "pb-2"], ["class", "relative flex items-center px-4 py-2", 3, "opacity-30", 4, "ngFor", "ngForOf"], [1, "relative", "flex", "items-center", "px-4", "py-2"], [1, "rounded-full", "h-10", "w-10", "flex", "items-center", "justify-center", "bg-base-200", "z-20"], [1, "text-2xl"], [1, "flex-1", "ml-2"], ["matRipple", "", 1, "font-medium", "flex", "items-center", "space-x-2", "rounded", "hover:bg-base-200", "px-2", "py-1", 3, "matMenuTriggerFor"], ["mat-menu-item", "", 3, "click", 4, "ngFor", "ngForOf"], [1, "text-xs", "opacity-60", "px-2"], ["class", "absolute -top-2 left-7 h-4 w-0 border-l-2 border-dashed border-base-200 -translate-x-px", 4, "ngIf"], ["mat-menu-item", "", 3, "click"], [1, "flex", "items-center", "space-x-2"], [1, "pr-8"], [1, "absolute", "-top-2", "left-7", "h-4", "w-0", "border-l-2", "border-dashed", "border-base-200", "-translate-x-px"], [1, "flex", "flex-col", "items-center", "justify-center", "p-8", "space-y-2", "w-full", "opacity-30"], [1, "text-6xl"], [1, "text-center", "text-sm"]],
    template: function WorkLocationTooltipComponent_Template(rf, ctx) {
      if (rf & 1) {
        const _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵgetCurrentView"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "div", 2)(1, "div", 3)(2, "h3", 4);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](3, "Work Location");
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](4, "button", 5);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("click", function WorkLocationTooltipComponent_Template_button_click_4_listener() {
          _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵrestoreView"](_r1);
          return _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵresetView"](ctx.editSettings());
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](5, "app-icon");
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](6, "edit_note");
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]()()();
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](7, "h3", 6);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](8);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipe"](9, "date");
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](10, WorkLocationTooltipComponent_div_10_Template, 2, 1, "div", 7);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](11, WorkLocationTooltipComponent_ng_template_11_Template, 7, 0, "ng-template", null, 0, _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplateRefExtractor"]);
      }
      if (rf & 2) {
        const empty_state_r8 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵreference"](12);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](8);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipeBind2"](9, 3, ctx.now, "fullDate"), " ");
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngIf", ctx.active_preference == null ? null : ctx.active_preference.blocks == null ? null : ctx.active_preference.blocks.length)("ngIfElse", empty_state_r8);
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_14__.NgForOf, _angular_common__WEBPACK_IMPORTED_MODULE_14__.NgIf, _angular_material_menu__WEBPACK_IMPORTED_MODULE_15__.MatMenu, _angular_material_menu__WEBPACK_IMPORTED_MODULE_15__.MatMenuItem, _angular_material_menu__WEBPACK_IMPORTED_MODULE_15__.MatMenuTrigger, _angular_material_core__WEBPACK_IMPORTED_MODULE_16__.MatRipple, _angular_material_tooltip__WEBPACK_IMPORTED_MODULE_17__.MatTooltip, _icon_component__WEBPACK_IMPORTED_MODULE_4__.IconComponent, _angular_common__WEBPACK_IMPORTED_MODULE_14__.DatePipe]
  });
}

/***/ }),

/***/ 45312:
/*!**********************************************!*\
  !*** ./libs/components/src/lib/zone.pipe.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ZonePipe: () => (/* binding */ ZonePipe)
/* harmony export */ });
/* harmony import */ var _home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 89204);
/* harmony import */ var _placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @placeos/ts-client */ 35713);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/core */ 37580);



const ZONE_LIST = {};
const EMPTY_ZONE = new _placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.PlaceZone();
class ZonePipe {
  transform(id) {
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      if (ZONE_LIST[id]) return ZONE_LIST[id];
      const zone = yield (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.showZone)(id).toPromise().catch(_ => null);
      if (!zone) return EMPTY_ZONE;
      ZONE_LIST[id] = zone;
      return zone;
    })();
  }
  static #_ = this.ɵfac = function ZonePipe_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || ZonePipe)();
  };
  static #_2 = this.ɵpipe = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdefinePipe"]({
    name: "zone",
    type: ZonePipe,
    pure: true
  });
}

/***/ }),

/***/ 40569:
/*!**********************************!*\
  !*** ./libs/events/src/index.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CalendarEvent: () => (/* reexport safe */ _lib_events__WEBPACK_IMPORTED_MODULE_0__.CalendarEvent),
/* harmony export */   EventCardComponent: () => (/* reexport safe */ _lib_event_card_component__WEBPACK_IMPORTED_MODULE_3__.EventCardComponent),
/* harmony export */   EventDetailsModalComponent: () => (/* reexport safe */ _lib_event_details_modal_component__WEBPACK_IMPORTED_MODULE_2__.EventDetailsModalComponent),
/* harmony export */   EventFormService: () => (/* reexport safe */ _lib_events__WEBPACK_IMPORTED_MODULE_0__.EventFormService),
/* harmony export */   GroupEventCardComponent: () => (/* reexport safe */ _lib_group_event_card_component__WEBPACK_IMPORTED_MODULE_6__.GroupEventCardComponent),
/* harmony export */   GroupEventDetailsModalComponent: () => (/* reexport safe */ _lib_group_event_details_modal_component__WEBPACK_IMPORTED_MODULE_5__.GroupEventDetailsModalComponent),
/* harmony export */   SetupBreakdownModalComponent: () => (/* reexport safe */ _lib_setup_breakdown_modal_component__WEBPACK_IMPORTED_MODULE_4__.SetupBreakdownModalComponent),
/* harmony export */   SharedEventsModule: () => (/* reexport safe */ _lib_events_module__WEBPACK_IMPORTED_MODULE_1__.SharedEventsModule),
/* harmony export */   addEventGuest: () => (/* reexport safe */ _lib_events__WEBPACK_IMPORTED_MODULE_0__.addEventGuest),
/* harmony export */   approveEvent: () => (/* reexport safe */ _lib_events__WEBPACK_IMPORTED_MODULE_0__.approveEvent),
/* harmony export */   checkinEventGuest: () => (/* reexport safe */ _lib_events__WEBPACK_IMPORTED_MODULE_0__.checkinEventGuest),
/* harmony export */   createEvent: () => (/* reexport safe */ _lib_events__WEBPACK_IMPORTED_MODULE_0__.createEvent),
/* harmony export */   declineEvent: () => (/* reexport safe */ _lib_events__WEBPACK_IMPORTED_MODULE_0__.declineEvent),
/* harmony export */   endInFuture: () => (/* reexport safe */ _lib_events__WEBPACK_IMPORTED_MODULE_0__.endInFuture),
/* harmony export */   eventStatus: () => (/* reexport safe */ _lib_events__WEBPACK_IMPORTED_MODULE_0__.eventStatus),
/* harmony export */   formatRecurrence: () => (/* reexport safe */ _lib_events__WEBPACK_IMPORTED_MODULE_0__.formatRecurrence),
/* harmony export */   generateEventForm: () => (/* reexport safe */ _lib_events__WEBPACK_IMPORTED_MODULE_0__.generateEventForm),
/* harmony export */   getEventMetadata: () => (/* reexport safe */ _lib_events__WEBPACK_IMPORTED_MODULE_0__.getEventMetadata),
/* harmony export */   getFreeTimeSlots: () => (/* reexport safe */ _lib_events__WEBPACK_IMPORTED_MODULE_0__.getFreeTimeSlots),
/* harmony export */   getNextFreeTimeSlot: () => (/* reexport safe */ _lib_events__WEBPACK_IMPORTED_MODULE_0__.getNextFreeTimeSlot),
/* harmony export */   isFuture: () => (/* reexport safe */ _lib_events__WEBPACK_IMPORTED_MODULE_0__.isFuture),
/* harmony export */   isSpaceAvailable: () => (/* reexport safe */ _lib_events__WEBPACK_IMPORTED_MODULE_0__.isSpaceAvailable),
/* harmony export */   newCalendarEventFromBooking: () => (/* reexport safe */ _lib_events__WEBPACK_IMPORTED_MODULE_0__.newCalendarEventFromBooking),
/* harmony export */   parseRecurrence: () => (/* reexport safe */ _lib_events__WEBPACK_IMPORTED_MODULE_0__.parseRecurrence),
/* harmony export */   periodInFreeTimeSlot: () => (/* reexport safe */ _lib_events__WEBPACK_IMPORTED_MODULE_0__.periodInFreeTimeSlot),
/* harmony export */   queryAllEvents: () => (/* reexport safe */ _lib_events__WEBPACK_IMPORTED_MODULE_0__.queryAllEvents),
/* harmony export */   queryEventGuests: () => (/* reexport safe */ _lib_events__WEBPACK_IMPORTED_MODULE_0__.queryEventGuests),
/* harmony export */   queryEvents: () => (/* reexport safe */ _lib_events__WEBPACK_IMPORTED_MODULE_0__.queryEvents),
/* harmony export */   querySpaceAvailability: () => (/* reexport safe */ _lib_events__WEBPACK_IMPORTED_MODULE_0__.querySpaceAvailability),
/* harmony export */   rejectEvent: () => (/* reexport safe */ _lib_events__WEBPACK_IMPORTED_MODULE_0__.rejectEvent),
/* harmony export */   removeEvent: () => (/* reexport safe */ _lib_events__WEBPACK_IMPORTED_MODULE_0__.removeEvent),
/* harmony export */   removeEventGuest: () => (/* reexport safe */ _lib_events__WEBPACK_IMPORTED_MODULE_0__.removeEventGuest),
/* harmony export */   replaceBookings: () => (/* reexport safe */ _lib_events__WEBPACK_IMPORTED_MODULE_0__.replaceBookings),
/* harmony export */   saveEvent: () => (/* reexport safe */ _lib_events__WEBPACK_IMPORTED_MODULE_0__.saveEvent),
/* harmony export */   setDefaultCreator: () => (/* reexport safe */ _lib_events__WEBPACK_IMPORTED_MODULE_0__.setDefaultCreator),
/* harmony export */   setMockBookingStartDatetime: () => (/* reexport safe */ _lib_events__WEBPACK_IMPORTED_MODULE_0__.setMockBookingStartDatetime),
/* harmony export */   showEvent: () => (/* reexport safe */ _lib_events__WEBPACK_IMPORTED_MODULE_0__.showEvent),
/* harmony export */   statusFromBookings: () => (/* reexport safe */ _lib_events__WEBPACK_IMPORTED_MODULE_0__.statusFromBookings),
/* harmony export */   updateEvent: () => (/* reexport safe */ _lib_events__WEBPACK_IMPORTED_MODULE_0__.updateEvent),
/* harmony export */   updateEventMetadata: () => (/* reexport safe */ _lib_events__WEBPACK_IMPORTED_MODULE_0__.updateEventMetadata)
/* harmony export */ });
/* harmony import */ var _lib_events__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./lib/events */ 76);
/* harmony import */ var _lib_events_module__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./lib/events.module */ 2704);
/* harmony import */ var _lib_event_details_modal_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./lib/event-details-modal.component */ 54035);
/* harmony import */ var _lib_event_card_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./lib/event-card.component */ 21765);
/* harmony import */ var _lib_setup_breakdown_modal_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./lib/setup-breakdown-modal.component */ 50711);
/* harmony import */ var _lib_group_event_details_modal_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./lib/group-event-details-modal.component */ 58094);
/* harmony import */ var _lib_group_event_card_component__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./lib/group-event-card.component */ 27535);








/***/ }),

/***/ 47249:
/*!********************************************************!*\
  !*** ./libs/events/src/lib/attendee-list.component.ts ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AttendeeListComponent: () => (/* binding */ AttendeeListComponent)
/* harmony export */ });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ 37580);


function AttendeeListComponent_button_2_Template(rf, ctx) {
  if (rf & 1) {
    const _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "button", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function AttendeeListComponent_button_2_Template_button_click_0_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r1);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵresetView"](ctx_r1.close.emit());
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](1, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](2, "arrow_back");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()();
  }
}
function AttendeeListComponent_div_5_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](0, "div", 9);
  }
}
function AttendeeListComponent_ng_container_7_div_1_div_5_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](1, " Host ");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
  }
}
function AttendeeListComponent_ng_container_7_div_1_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](1, "a-user-avatar", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](2, "div", 13)(3, "div", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](5, AttendeeListComponent_ng_container_7_div_1_div_5_Template, 2, 0, "div", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](6, "div", 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](7, "div", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const user_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]().$implicit;
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("user", user_r3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate"](user_r3.name);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r1.host === user_r3.email);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵclassProp"]("bg-success", user_r3.checked_in)("bg-pending", !user_r3.checked_in);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("matTooltip", user_r3.checked_in ? "Checked in" : "Not checked in");
  }
}
function AttendeeListComponent_ng_container_7_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, AttendeeListComponent_ng_container_7_div_1_Template, 8, 8, "div", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerEnd"]();
  }
  if (rf & 2) {
    const user_r3 = ctx.$implicit;
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", !user_r3.resource && (ctx_r1.host !== user_r3.email || ctx_r1.show_host));
  }
}
class AttendeeListComponent {
  constructor() {
    this.host = '';
    this.show_host = true;
    this.list = [];
    this.hide_close = false;
    this.custom_title = '';
    this.close = new _angular_core__WEBPACK_IMPORTED_MODULE_0__.EventEmitter();
  }
  static #_ = this.ɵfac = function AttendeeListComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || AttendeeListComponent)();
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({
    type: AttendeeListComponent,
    selectors: [["attendee-list"]],
    inputs: {
      host: "host",
      show_host: "show_host",
      list: "list",
      hide_close: "hide_close",
      custom_title: "custom_title"
    },
    outputs: {
      close: "close"
    },
    decls: 8,
    vars: 5,
    consts: () => {
      let i18n_0;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_5922903057904788374$$LIBS_EVENTS_SRC_LIB_ATTENDEE_LIST_COMPONENT_TS_0 = goog.getMsg(" {$interpolation} {$interpolation_1} ", {
          "interpolation": "\uFFFD0\uFFFD",
          "interpolation_1": "\uFFFD1\uFFFD"
        }, {
          original_code: {
            "interpolation": "{{ list.length }}",
            "interpolation_1": "{{\n                        custom_title\n                            ? custom_title\n                            : list.length === 1\n                              ? 'Attendee'\n                              : 'Attendees'\n                    }}"
          }
        });
        i18n_0 = MSG_EXTERNAL_5922903057904788374$$LIBS_EVENTS_SRC_LIB_ATTENDEE_LIST_COMPONENT_TS_0;
      } else {
        i18n_0 = $localize`:␟c68a77fe1aa97a8e5588bafc6b5cb8ced3e3d288␟5922903057904788374: ${"\uFFFD0\uFFFD"}:INTERPOLATION: ${"\uFFFD1\uFFFD"}:INTERPOLATION_1: `;
      }
      return [i18n_0, [1, "w-full", "h-full", "overflow-hidden", "flex", "flex-col", "bg-base-100"], [1, "flex", "items-center", "border-b", "border-base-200", "p-2", "min-h-12"], ["close", "", "icon", "", "matRipple", "", 3, "click", 4, "ngIf"], [1, "flex-1", "text-center", "font-medium"], ["class", "w-12", 4, "ngIf"], [1, "flex-1", "w-full", "overflow-auto"], [4, "ngFor", "ngForOf"], ["close", "", "icon", "", "matRipple", "", 3, "click"], [1, "w-12"], ["attendee", "", "class", "flex items-center p-2 space-x-2 hover:bg-base-200", 4, "ngIf"], ["attendee", "", 1, "flex", "items-center", "p-2", "space-x-2", "hover:bg-base-200"], [3, "user"], [1, "flex-1", "w-1/2"], [1, "truncate"], ["class", "opacity-60 text-sm", 4, "ngIf"], [1, "p-2"], [1, "h-3", "w-3", "rounded-full", 3, "matTooltip"], [1, "opacity-60", "text-sm"]];
    },
    template: function AttendeeListComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 1)(1, "div", 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](2, AttendeeListComponent_button_2_Template, 3, 0, "button", 3);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](3, "div", 4);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵi18n"](4, 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](5, AttendeeListComponent_div_5_Template, 1, 0, "div", 5);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](6, "div", 6);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](7, AttendeeListComponent_ng_container_7_Template, 2, 1, "ng-container", 7);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()();
      }
      if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", !ctx.hide_close);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵi18nExp"](ctx.list.length)(ctx.custom_title ? ctx.custom_title : ctx.list.length === 1 ? "Attendee" : "Attendees");
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵi18nApply"](4);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", !ctx.hide_close);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngForOf", ctx.list);
      }
    }
  });
}

/***/ }),

/***/ 21765:
/*!*****************************************************!*\
  !*** ./libs/events/src/lib/event-card.component.ts ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   EventCardComponent: () => (/* binding */ EventCardComponent)
/* harmony export */ });
/* harmony import */ var _home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 89204);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! date-fns */ 31257);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! date-fns */ 45726);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! date-fns */ 49675);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! date-fns */ 99134);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var _event_class__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./event.class */ 6727);
/* harmony import */ var _event_details_modal_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./event-details-modal.component */ 54035);
/* harmony import */ var libs_organisation_src_lib_organisation_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! libs/organisation/src/lib/organisation.service */ 19863);
/* harmony import */ var libs_spaces_src_lib_space_pipe__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! libs/spaces/src/lib/space.pipe */ 22011);
/* harmony import */ var _group_event_details_modal_component__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./group-event-details-modal.component */ 58094);
/* harmony import */ var _angular_material_dialog__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @angular/material/dialog */ 12587);
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @angular/router */ 95072);

















const _c0 = () => ["./"];
const _c1 = a0 => ({
  event: a0
});
function EventCardComponent_h4_0_span_1_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](0, "span", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtextInterpolate1"]("", ctx_r0.day, ",\u00A0");
  }
}
function EventCardComponent_h4_0_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](0, "h4", 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtemplate"](1, EventCardComponent_h4_0_span_1_Template, 2, 1, "span", 3);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵpipe"](3, "date");
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](4, "span", 4);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtext"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵpipe"](6, "date");
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵproperty"]("ngIf", ctx_r0.show_day);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵpipeBind2"](3, 3, ctx_r0.event == null ? null : ctx_r0.event.date, ctx_r0.time_format), " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtextInterpolate1"]("(", _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵpipeBind2"](6, 6, ctx_r0.event == null ? null : ctx_r0.event.date, "z"), ")");
  }
}
function EventCardComponent_a_1_div_18_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](0, "div", 12)(1, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtext"](2, "restaurant");
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](3, "div", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtext"](4, "Catered");
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]()();
  }
}
function EventCardComponent_a_1_div_26_div_1_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](0, "div", 21);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelement"](1, "a-user-avatar", 22);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const user_r3 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵproperty"]("user", user_r3);
  }
}
function EventCardComponent_a_1_div_26_div_3_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](0, "div", 21)(1, "div", 23);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtextInterpolate1"](" +", (ctx_r0.event == null ? null : ctx_r0.event.attendees == null ? null : ctx_r0.event.attendees.length) - 5, " ");
  }
}
function EventCardComponent_a_1_div_26_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](0, "div", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtemplate"](1, EventCardComponent_a_1_div_26_div_1_Template, 2, 1, "div", 19);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵpipe"](2, "slice");
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtemplate"](3, EventCardComponent_a_1_div_26_div_3_Template, 3, 1, "div", 20);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵproperty"]("ngForOf", _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵpipeBind3"](2, 2, ctx_r0.event == null ? null : ctx_r0.event.attendees, 0, (ctx_r0.event == null ? null : ctx_r0.event.attendees == null ? null : ctx_r0.event.attendees.length) === 6 ? 6 : 5));
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵproperty"]("ngIf", (ctx_r0.event == null ? null : ctx_r0.event.attendees == null ? null : ctx_r0.event.attendees.length) > 6);
  }
}
function EventCardComponent_a_1_Template(rf, ctx) {
  if (rf & 1) {
    const _r2 = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](0, "a", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵlistener"]("click", function EventCardComponent_a_1_Template_a_click_0_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵrestoreView"](_r2);
      const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵresetView"](ctx_r0.viewDetails());
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](1, "div", 7)(2, "h4", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](4, "div", 9)(5, "status-pill", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtext"](6);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](7, "div", 11)(8, "div", 12)(9, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtext"](10, "meeting_room");
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](11, "div", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtext"](12);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](13, "div", 12)(14, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtext"](15, "person_outline");
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](16, "div", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtext"](17);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtemplate"](18, EventCardComponent_a_1_div_18_Template, 5, 0, "div", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](19, "div", 12)(20, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtext"](21, "people");
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](22, "div", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtext"](23);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]()()();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](24, "app-icon", 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtext"](25, " chevron_right ");
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtemplate"](26, EventCardComponent_a_1_div_26_Template, 4, 6, "div", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    let tmp_8_0;
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵproperty"]("routerLink", _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵpureFunction0"](11, _c0))("queryParams", _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵpureFunction1"](12, _c1, ctx_r0.event == null ? null : ctx_r0.event.id));
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtextInterpolate"](ctx_r0.event == null ? null : ctx_r0.event.title);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵproperty"]("status", ctx_r0.status);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtextInterpolate"](ctx_r0.period);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"](6);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtextInterpolate1"](" ", ctx_r0.location, " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtextInterpolate1"](" ", (ctx_r0.event == null ? null : ctx_r0.event.organiser == null ? null : ctx_r0.event.organiser.name) || (ctx_r0.event == null ? null : ctx_r0.event.organiser == null ? null : ctx_r0.event.organiser.email), " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵproperty"]("ngIf", ctx_r0.event == null ? null : (tmp_8_0 = ctx_r0.event.ext("catering")) == null ? null : tmp_8_0.length);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtextInterpolate2"](" ", ctx_r0.event == null ? null : ctx_r0.event.attendees == null ? null : ctx_r0.event.attendees.length, " ", (ctx_r0.event == null ? null : ctx_r0.event.attendees == null ? null : ctx_r0.event.attendees.length) === 1 ? "Person" : "People", " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵproperty"]("ngIf", ctx_r0.event == null ? null : ctx_r0.event.attendees == null ? null : ctx_r0.event.attendees.length);
  }
}
class EventCardComponent extends _placeos_common__WEBPACK_IMPORTED_MODULE_1__.AsyncHandler {
  get time_format() {
    return this._settings.time_format;
  }
  get status() {
    if (this.event?.state === 'done') return 'neutral';
    if (this.event?.status === 'approved') return 'success';
    if (this.event?.status === 'tentative') return 'warning';
    if (this.event?.status === 'declined') return 'error';
    return 'warning';
  }
  constructor(_dialog, _route, _org, _space_pipe, _settings) {
    super();
    this._dialog = _dialog;
    this._route = _route;
    this._org = _org;
    this._space_pipe = _space_pipe;
    this._settings = _settings;
    this.show_day = false;
    this.edit = new _angular_core__WEBPACK_IMPORTED_MODULE_7__.EventEmitter();
    this.remove = new _angular_core__WEBPACK_IMPORTED_MODULE_7__.EventEmitter();
    this.location = '';
  }
  ngOnInit() {
    var _this = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      _this.subscription('route.query', _this._route.queryParamMap.subscribe(params => params.has('event') && _this.event?.id === params.get('event') ? _this.viewDetails() : ''));
      _this.location = yield _this.getLocationString();
    })();
  }
  ngOnChanges(changes) {
    var _this2 = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      if (changes.event && _this2.event) {
        _this2.location = yield _this2.getLocationString();
      }
    })();
  }
  get day() {
    const date = this.event?.date || Date.now();
    const is_today = (0,date_fns__WEBPACK_IMPORTED_MODULE_8__.isSameDay)(Date.now(), date);
    return `${is_today ? 'Today' : (0,date_fns__WEBPACK_IMPORTED_MODULE_9__.format)(date, 'EEEE')}`;
  }
  getLocationString() {
    var _this3 = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      const system = _this3.event?.resources[0] || _this3.event?.system || _this3.event?.space || {};
      const space = yield _this3._space_pipe.transform(system.id || system.email);
      const zone_list = space?.zones || [];
      const zone = _this3._org.levelWithID(zone_list) || _this3._org.buildings.find(_ => zone_list.includes(_.id));
      return `${zone ? (zone.display_name || zone.name) + ', ' : ''} ${space?.display_name || space?.name}`;
    })();
  }
  get period() {
    if (this.event?.all_day) return 'All Day';
    const start = this.event?.date || Date.now();
    const duration = this.event?.duration || 60;
    const end = (0,date_fns__WEBPACK_IMPORTED_MODULE_10__.addMinutes)(start, duration);
    const is_multiday = this.event?.duration > 24 * 60;
    const dur = (0,date_fns__WEBPACK_IMPORTED_MODULE_11__.formatDuration)({
      hours: Math.floor(duration / 60),
      minutes: duration % 60
    }).replace(' hour', 'hr').replace(' minute', 'min');
    return `${(0,date_fns__WEBPACK_IMPORTED_MODULE_9__.format)(start, (is_multiday ? `MMM d, ` : '') + this.time_format)} - ${(0,date_fns__WEBPACK_IMPORTED_MODULE_9__.format)(end, (is_multiday ? `MMM d, ` : '') + this.time_format)} ${duration < 24 * 60 ? '(' + dur + ')' : ''}`;
  }
  viewDetails() {
    if (!this.event) return;
    this.timeout('open', () => {
      if (this.event.extension_data?.shared_event) {
        this._dialog.open(_group_event_details_modal_component__WEBPACK_IMPORTED_MODULE_6__.GroupEventDetailsModalComponent, {
          data: {
            event: this.event,
            concierge: false
          }
        });
        return;
      }
      const ref = this._dialog.open(_event_details_modal_component__WEBPACK_IMPORTED_MODULE_3__.EventDetailsModalComponent, {
        data: this.event
      });
      this.subscription('edit', ref.componentInstance.edit.subscribe(() => this.edit.emit()));
      this.subscription('remove', ref.componentInstance.remove.subscribe(_ => this.remove.emit(_)));
    });
  }
  static #_ = this.ɵfac = function EventCardComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || EventCardComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵdirectiveInject"](_angular_material_dialog__WEBPACK_IMPORTED_MODULE_12__.MatDialog), _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵdirectiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_13__.ActivatedRoute), _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵdirectiveInject"](libs_organisation_src_lib_organisation_service__WEBPACK_IMPORTED_MODULE_4__.OrganisationService), _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵdirectiveInject"](libs_spaces_src_lib_space_pipe__WEBPACK_IMPORTED_MODULE_5__.SpacePipe), _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵdirectiveInject"](_placeos_common__WEBPACK_IMPORTED_MODULE_1__.SettingsService));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵdefineComponent"]({
    type: EventCardComponent,
    selectors: [["event-card"]],
    inputs: {
      event: "event",
      show_day: "show_day"
    },
    outputs: {
      edit: "edit",
      remove: "remove"
    },
    features: [_angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵProvidersFeature"]([libs_spaces_src_lib_space_pipe__WEBPACK_IMPORTED_MODULE_5__.SpacePipe]), _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵInheritDefinitionFeature"], _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵNgOnChangesFeature"]],
    decls: 2,
    vars: 2,
    consts: [["class", "mb-2 flex items-center", "date", "", 4, "ngIf"], ["name", "view-event-details", "class", "w-full cursor-pointer relative", 3, "routerLink", "queryParams", "click", 4, "ngIf"], ["date", "", 1, "mb-2", "flex", "items-center"], ["day", "", 4, "ngIf"], [1, "text-xs", "px-2"], ["day", ""], ["name", "view-event-details", 1, "w-full", "cursor-pointer", "relative", 3, "click", "routerLink", "queryParams"], [1, "w-full", "bg-base-100", "border", "border-base-300", "rounded-xl", "shadow", "py-4", "relative"], [1, "px-4", "text-lg"], [1, "flex", "mx-4", "my-2"], [3, "status"], [1, "flex", "flex-wrap", "flex-col", "sm:flex-row", "sm:divide-x", "divide-base-200-500", "py-2", "space-y-2", "sm:space-y-0"], [1, "flex", "items-center", "px-4"], [1, "mx-2", "truncate"], [1, "mx-2"], ["class", "flex items-center px-4", 4, "ngIf"], [1, "absolute", "top-1/2", "right-1", "text-4xl", "-translate-y-1/2"], ["class", "absolute bottom-2 right-2 sm:bottom-auto sm:top-2 text-sm sm:text-base flex items-center pr-4", 4, "ngIf"], [1, "absolute", "bottom-2", "right-2", "sm:bottom-auto", "sm:top-2", "text-sm", "sm:text-base", "flex", "items-center", "pr-4"], ["class", "h-10 w-6", 4, "ngFor", "ngForOf"], ["class", "h-10 w-6", 4, "ngIf"], [1, "h-10", "w-6"], [3, "user"], [1, "bg-secondary", "rounded-full", "h-10", "w-10", "border-2", "border-base-100", "flex", "items-center", "justify-center", "text-secondary-content"]],
    template: function EventCardComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtemplate"](0, EventCardComponent_h4_0_Template, 7, 9, "h4", 0)(1, EventCardComponent_a_1_Template, 27, 14, "a", 1);
      }
      if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵproperty"]("ngIf", ctx.event);
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵproperty"]("ngIf", ctx.event);
      }
    },
    styles: ["[_nghost-%COMP%] {\n                display: block;\n                width: 100%;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImV2ZW50LWNhcmQuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxjQUFjO2dCQUNkLFdBQVc7WUFDZiIsImZpbGUiOiJldmVudC1jYXJkLmNvbXBvbmVudC50cyIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgOmhvc3Qge1xuICAgICAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgfVxuICAgICAgICAiXX0= */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvZXZlbnRzL3NyYy9saWIvZXZlbnQtY2FyZC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLGNBQWM7Z0JBQ2QsV0FBVztZQUNmOztBQUVaLGdhQUFnYSIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgOmhvc3Qge1xuICAgICAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgfVxuICAgICAgICAiXSwic291cmNlUm9vdCI6IiJ9 */"]
  });
}

/***/ }),

/***/ 54035:
/*!**************************************************************!*\
  !*** ./libs/events/src/lib/event-details-modal.component.ts ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   EventDetailsModalComponent: () => (/* binding */ EventDetailsModalComponent)
/* harmony export */ });
/* harmony import */ var _home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 89204);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_material_dialog__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @angular/material/dialog */ 12587);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! date-fns */ 49675);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! date-fns */ 99134);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! date-fns */ 45726);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! date-fns */ 99908);
/* harmony import */ var _event_class__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./event.class */ 6727);
/* harmony import */ var libs_components_src_lib_map_pin_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! libs/components/src/lib/map-pin.component */ 71865);
/* harmony import */ var libs_organisation_src_lib_organisation_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! libs/organisation/src/lib/organisation.service */ 19863);
/* harmony import */ var libs_spaces_src_lib_space_pipe__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! libs/spaces/src/lib/space.pipe */ 22011);
/* harmony import */ var libs_organisation_src_lib_building_class__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! libs/organisation/src/lib/building.class */ 95170);
/* harmony import */ var libs_organisation_src_lib_level_class__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! libs/organisation/src/lib/level.class */ 60602);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var libs_spaces_src_lib_space_class__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! libs/spaces/src/lib/space.class */ 30735);
/* harmony import */ var _placeos_ts_client__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @placeos/ts-client */ 35713);
/* harmony import */ var libs_components_src_lib_map_locate_modal_component__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! libs/components/src/lib/map-locate-modal.component */ 90620);
/* harmony import */ var _events_fn__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./events.fn */ 51416);





















const _c0 = () => ({
  disable_pan: true,
  disable_zoom: true
});
function EventDetailsModalComponent_div_3_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelement"](0, "div", 56);
  }
}
function EventDetailsModalComponent_div_4_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](0, "div", 57);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelement"](1, "image-carousel", 58);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵproperty"]("images", ctx_r1.event == null ? null : ctx_r1.event.system == null ? null : ctx_r1.event.system.images);
  }
}
function EventDetailsModalComponent_div_11_button_1_Template(rf, ctx) {
  if (rf & 1) {
    const _r3 = _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](0, "button", 62);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵlistener"]("click", function EventDetailsModalComponent_div_11_button_1_Template_button_click_0_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵrestoreView"](_r3);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵnextContext"](2);
      return _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵresetView"](ctx_r1.checkin());
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](1, "div", 63)(2, "app-icon", 64);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](4, "div", 65);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵi18n"](5, 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]()()();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵclassProp"]("bg-success", ctx_r1.room_status !== "pending")("border-none", ctx_r1.room_status !== "pending")("pointer-events-none", ctx_r1.room_status !== "pending");
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtextInterpolate"](ctx_r1.room_status === "pending" ? "arrow_back" : "done");
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵi18nExp"](ctx_r1.room_status === "pending" ? "Check in" : "Checked in");
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵi18nApply"](5);
  }
}
function EventDetailsModalComponent_div_11_button_2_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](0, "button", 66)(1, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtext"](2, "more_horiz");
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵnextContext"](2);
    const menu_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵreference"](75);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵproperty"]("matMenuTriggerFor", menu_r4);
  }
}
function EventDetailsModalComponent_div_11_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](0, "div", 59);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtemplate"](1, EventDetailsModalComponent_div_11_button_1_Template, 6, 8, "button", 60)(2, EventDetailsModalComponent_div_11_button_2_Template, 3, 1, "button", 61);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵproperty"]("ngIf", ctx_r1.room_status && (ctx_r1.event == null ? null : ctx_r1.event.can_check_in) && ctx_r1.room_status !== "free");
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵproperty"]("ngIf", ctx_r1.allow_edit);
  }
}
function EventDetailsModalComponent_ng_container_31_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementContainerEnd"]();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtextInterpolate1"](" ", (ctx_r1.level == null ? null : ctx_r1.level.display_name) || (ctx_r1.level == null ? null : ctx_r1.level.name), ", ");
  }
}
function EventDetailsModalComponent_div_33_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](0, "div", 29)(1, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtext"](2, "place");
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](3, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtextInterpolate2"](" ", (ctx_r1.building == null ? null : ctx_r1.building.display_name) || (ctx_r1.building == null ? null : ctx_r1.building.name), ", ", ctx_r1.building == null ? null : ctx_r1.building.address, " ");
  }
}
function EventDetailsModalComponent_ng_container_65_div_5_div_13_span_4_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](0, "span", 83);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const item_r7 = _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵnextContext"]().$implicit;
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵproperty"]("matTooltip", ctx_r1.optionList(item_r7));
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtextInterpolate1"](" ", (item_r7.option_list == null ? null : item_r7.option_list.length) || "0", " option(s) ");
  }
}
function EventDetailsModalComponent_ng_container_65_div_5_div_13_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](0, "div", 78)(1, "div", 79)(2, "span", 73);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtemplate"](4, EventDetailsModalComponent_ng_container_65_div_5_div_13_span_4_Template, 2, 2, "span", 80);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](5, "div", 81);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtext"](6);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](7, "div", 82);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtext"](8);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵpipe"](9, "currency");
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const item_r7 = ctx.$implicit;
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtextInterpolate"](item_r7.name || "Item");
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵproperty"]("ngIf", item_r7.option_list == null ? null : item_r7.option_list.length);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtextInterpolate1"](" x", item_r7.quantity, " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵpipeBind2"](9, 4, item_r7.unit_price_with_options / 100, ctx_r1.currency_code), " ea ");
  }
}
function EventDetailsModalComponent_ng_container_65_div_5_Template(rf, ctx) {
  if (rf & 1) {
    const _r5 = _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](0, "div", 70)(1, "div", 71)(2, "div", 72)(3, "div", 73);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵpipe"](5, "date");
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](6, "div", 74);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtext"](7);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵpipe"](8, "currency");
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](9, "button", 75);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵlistener"]("click", function EventDetailsModalComponent_ng_container_65_div_5_Template_button_click_9_listener() {
      const order_r6 = _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵrestoreView"](_r5).$implicit;
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵnextContext"](2);
      return _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵresetView"](ctx_r1.show_order[order_r6.id] = !ctx_r1.show_order[order_r6.id]);
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](10, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtext"](11);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]()()();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](12, "div", 76);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtemplate"](13, EventDetailsModalComponent_ng_container_65_div_5_div_13_Template, 10, 7, "div", 77);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const order_r6 = ctx.$implicit;
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtextInterpolate1"](" Order at ", _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵpipeBind2"](5, 7, order_r6.deliver_at, "MMM d, " + ctx_r1.time_format), " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtextInterpolate2"](" ", order_r6.item_count, " item(s) for ", _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵpipeBind2"](8, 10, order_r6.total_cost / 100, ctx_r1.currency_code), " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵproperty"]("matTooltip", ctx_r1.show_order[order_r6.id] ? "Hide order items" : "Show order items");
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtextInterpolate1"](" ", ctx_r1.show_order[order_r6.id] ? "expand_less" : "expand_more", " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵproperty"]("@show", ctx_r1.show_order[order_r6.id] ? "show" : "hide");
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵproperty"]("ngForOf", order_r6.items);
  }
}
function EventDetailsModalComponent_ng_container_65_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](1, "div", 32)(2, "h3", 67);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵi18n"](3, 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](4, "div", 68);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtemplate"](5, EventDetailsModalComponent_ng_container_65_div_5_Template, 14, 13, "div", 69);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementContainerEnd"]();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵproperty"]("ngForOf", ctx_r1.event.valid_catering);
  }
}
function EventDetailsModalComponent_ng_container_67_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelement"](1, "interactive-map", 84);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementContainerEnd"]();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵproperty"]("src", ctx_r1.level == null ? null : ctx_r1.level.map_id)("features", ctx_r1.features)("options", _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵpureFunction0"](3, _c0));
  }
}
function EventDetailsModalComponent_div_68_div_3_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelement"](0, "div", 87);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵpipe"](1, "sanitize");
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵproperty"]("innerHTML", _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵpipeBind1"](1, 1, ctx_r1.body) || "Unable to sanitize notes contents", _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵsanitizeHtml"]);
  }
}
function EventDetailsModalComponent_div_68_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](0, "div", 32)(1, "h3", 85);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵi18n"](2, 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtemplate"](3, EventDetailsModalComponent_div_68_div_3_Template, 2, 3, "div", 86);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵproperty"]("ngIf", ctx_r1.body);
  }
}
function EventDetailsModalComponent_ng_container_69_div_5_div_13_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](0, "div", 78)(1, "div", 79)(2, "span", 73);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](4, "div", 81);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtext"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const item_r10 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtextInterpolate"](item_r10.name || "Item");
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtextInterpolate1"](" x", item_r10.quantity, " ");
  }
}
function EventDetailsModalComponent_ng_container_69_div_5_Template(rf, ctx) {
  if (rf & 1) {
    const _r8 = _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](0, "div", 90)(1, "button", 91);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵlistener"]("click", function EventDetailsModalComponent_ng_container_69_div_5_Template_button_click_1_listener() {
      const request_r9 = _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵrestoreView"](_r8).$implicit;
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵnextContext"](2);
      return _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵresetView"](ctx_r1.show_request[request_r9.id] = !ctx_r1.show_request[request_r9.id]);
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](2, "div", 92)(3, "div", 73);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵpipe"](5, "date");
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](6, "div", 93)(7, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtext"](8);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](9, "div", 94)(10, "app-icon", 64);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtext"](11);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]()()();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](12, "div", 76);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtemplate"](13, EventDetailsModalComponent_ng_container_69_div_5_div_13_Template, 6, 2, "div", 77);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const request_r9 = ctx.$implicit;
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtextInterpolate1"](" Requested for ", _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵpipeBind2"](5, 18, request_r9.deliver_at, "MMM d, " + ctx_r1.time_format), " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵclassProp"]("bg-success", request_r9.state === "approved")("text-success-content", request_r9.state === "approved")("bg-warning", request_r9.state !== "approved" && request_r9.state !== "rejected")("text-warning-content", request_r9.state !== "approved" && request_r9.state !== "rejected")("bg-error", request_r9.state === "rejected")("text-error-content", request_r9.state === "rejected");
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵproperty"]("matTooltip", request_r9.state || "Tentative");
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtextInterpolate1"](" ", request_r9.state === "approved" ? "done" : request_r9.state === "rejected" ? "close" : "schedule", " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtextInterpolate1"](" ", ctx_r1.show_request[request_r9.id] ? "expand_less" : "expand_more", " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵproperty"]("@show", ctx_r1.show_request[request_r9.id] ? "show" : "hide");
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵproperty"]("ngForOf", request_r9.items);
  }
}
function EventDetailsModalComponent_ng_container_69_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](1, "div", 32)(2, "h3", 88);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵi18n"](3, 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](4, "div", 68);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtemplate"](5, EventDetailsModalComponent_ng_container_69_div_5_Template, 14, 21, "div", 89);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementContainerEnd"]();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵi18nExp"]((ctx_r1.event.valid_assets == null ? null : ctx_r1.event.valid_assets.length) || 0);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵi18nApply"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵproperty"]("ngForOf", ctx_r1.event.valid_assets);
  }
}
function EventDetailsModalComponent_div_73_Template(rf, ctx) {
  if (rf & 1) {
    const _r11 = _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](0, "div", 95)(1, "attendee-list", 96);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵlistener"]("click", function EventDetailsModalComponent_div_73_Template_attendee_list_click_1_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵrestoreView"](_r11);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵresetView"](ctx_r1.show_attendees = false);
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵproperty"]("list", ctx_r1.event.attendees)("host", ctx_r1.event.host);
  }
}
function EventDetailsModalComponent_button_76_Template(rf, ctx) {
  if (rf & 1) {
    const _r12 = _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](0, "button", 97);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵlistener"]("click", function EventDetailsModalComponent_button_76_Template_button_click_0_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵrestoreView"](_r12);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵresetView"](ctx_r1.edit.emit(ctx_r1.space));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](1, "div", 52)(2, "app-icon", 64);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtext"](3, "edit");
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](4, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵi18n"](5, 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]()()();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵproperty"]("matTooltip", !ctx_r1.can_edit ? ctx_r1.no_edit_message : "")("disabled", !ctx_r1.can_edit);
  }
}
function EventDetailsModalComponent_button_83_Template(rf, ctx) {
  if (rf & 1) {
    const _r13 = _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](0, "button", 51);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵlistener"]("click", function EventDetailsModalComponent_button_83_Template_button_click_0_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵrestoreView"](_r13);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵresetView"](ctx_r1.remove.emit(true));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](1, "div", 52)(2, "app-icon", 53);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtext"](3, "delete");
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](4, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵi18n"](5, 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]()()();
  }
}
function EventDetailsModalComponent_button_84_Template(rf, ctx) {
  if (rf & 1) {
    const _r14 = _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](0, "button", 51);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵlistener"]("click", function EventDetailsModalComponent_button_84_Template_button_click_0_listener() {
      const act_r15 = _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵrestoreView"](_r14).$implicit;
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵresetView"](ctx_r1.action.emit(act_r15.id));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](1, "div", 52)(2, "app-icon", 64);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](4, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵi18n"](5, 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]()()();
  }
  if (rf & 2) {
    const act_r15 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtextInterpolate"](act_r15.icon);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵi18nExp"](act_r15.name);
    _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵi18nApply"](5);
  }
}
const EMPTY_ACTIONS = [];
class EventDetailsModalComponent {
  get can_edit() {
    return true;
    // return (
    //     this.event.duration <= 24 * 60 ||
    //     this._settings.get('app.events.allow_multiday')
    // );
  }
  get body() {
    return this.event.body.replace(/\\n\\n\[ID\|.*\]/gm, '');
  }
  get allow_edit() {
    return !this._settings.get('app.events.booking_unavailable');
  }
  get custom_actions() {
    return this._settings.get('app.events.custom_actions') || EMPTY_ACTIONS;
  }
  get time_format() {
    return this._settings.time_format;
  }
  get event_status() {
    if (this.event?.state === 'done') return 'neutral';
    if (this.event?.status === 'approved') return 'success';
    if (this.event?.status === 'tentative') return 'warning';
    if (this.event?.status === 'declined') return 'error';
    return 'warning';
  }
  constructor(_event, _org, _space_pipe, _settings, _dialog) {
    this._event = _event;
    this._org = _org;
    this._space_pipe = _space_pipe;
    this._settings = _settings;
    this._dialog = _dialog;
    this.action = new _angular_core__WEBPACK_IMPORTED_MODULE_12__.EventEmitter();
    this.edit = new _angular_core__WEBPACK_IMPORTED_MODULE_12__.EventEmitter();
    this.remove = new _angular_core__WEBPACK_IMPORTED_MODULE_12__.EventEmitter();
    this.show_order = {};
    this.show_request = {};
    this.room_status = '';
    this.hide_map = false;
    this.hide_edit = false;
    this.show_attendees = false;
    this.event = this._event;
    this.no_edit_message = 'Editing bookings long than \n a day is not available';
    this.features = [{
      location: this.event?.system?.map_id,
      content: libs_components_src_lib_map_pin_component__WEBPACK_IMPORTED_MODULE_2__.MapPinComponent
    }];
    this.has_catering = this.event?.ext('catering')?.length > 0;
    this.has_assets = !!this.event?.linked_bookings?.find(_ => _.booking_type === 'asset-request');
    this.level = new libs_organisation_src_lib_level_class__WEBPACK_IMPORTED_MODULE_6__.BuildingLevel();
    this.building = new libs_organisation_src_lib_building_class__WEBPACK_IMPORTED_MODULE_5__.Building();
    this.space = new libs_spaces_src_lib_space_class__WEBPACK_IMPORTED_MODULE_8__.Space();
    this.accept_count = this._event.attendees.reduce((count, user) => count += user.response_status === 'accepted' ? 1 : 0, 0);
    this.declined_count = this._event.attendees.reduce((count, user) => count += user.response_status === 'declined' ? 1 : 0, 0);
    this.pending_count = this._event.attendees.reduce((count, user) => count += user.response_status === 'tentative' || user.response_status === 'needsAction' ? 1 : 0, 0);
    this._load().then();
  }
  get period() {
    if (this.event?.all_day) return 'All Day';
    const start = this.event?.date || Date.now();
    const duration = this.event?.duration || 60;
    const end = (0,date_fns__WEBPACK_IMPORTED_MODULE_13__.addMinutes)(start, duration);
    const is_multiday = this.event?.duration > 24 * 60;
    const dur = (0,date_fns__WEBPACK_IMPORTED_MODULE_14__.formatDuration)({
      hours: Math.floor(duration / 60),
      minutes: duration % 60
    }).replace(' hour', 'hr').replace(' minute', 'min');
    return `${(0,date_fns__WEBPACK_IMPORTED_MODULE_15__.format)(start, (is_multiday ? `MMM d, ` : '') + this.time_format)} - ${(0,date_fns__WEBPACK_IMPORTED_MODULE_15__.format)(end, (is_multiday ? `MMM d, ` : '') + this.time_format)} ${duration < 24 * 60 ? '(' + dur + ')' : ''}`;
  }
  optionList(item) {
    return item.option_list?.map(_ => _.name).join('\n');
  }
  checkin() {
    var _this = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      const mod = (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_9__.getModule)(_this.space?.id, 'Bookings');
      if (!mod) return;
      yield mod.execute('checkin', [(0,date_fns__WEBPACK_IMPORTED_MODULE_16__.getUnixTime)(_this.event.date)]).catch(e => (0,_placeos_common__WEBPACK_IMPORTED_MODULE_7__.notifyError)(`Error checking in booking. ${e}`));
      _this.room_status = 'busy';
    })();
  }
  _load() {
    var _this2 = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      _this2.space = yield _this2._space_pipe.transform(_this2._event.system?.id || _this2._event.system?.email);
      _this2.level = _this2._org.levelWithID(_this2.space.zones);
      _this2.building = _this2._org.buildings.find(bld => _this2.space.zones.includes(bld.id));
      _this2.features = [{
        location: _this2.space.map_id,
        content: libs_components_src_lib_map_pin_component__WEBPACK_IMPORTED_MODULE_2__.MapPinComponent
      }];
      if (_this2.event.extension_data.catering?.length || _this2.event.extension_data.assets?.length) {
        return;
      }
      const metadata = yield (0,_events_fn__WEBPACK_IMPORTED_MODULE_11__.getEventMetadata)(_this2._event.id, _this2.space.id).toPromise();
      if (metadata) {
        _this2._event = new _event_class__WEBPACK_IMPORTED_MODULE_1__.CalendarEvent({
          ..._this2._event,
          extension_data: {
            ..._this2._event.extension_data,
            ...metadata
          }
        });
      }
    })();
  }
  status(id) {
    const booking = this.event.linked_bookings.find(_ => _.asset_id === id);
    if (booking.status) return booking.status;
    return booking ? booking.approved ? 'approved' : booking.rejected ? 'rejected' : 'pending' : 'pending';
  }
  viewLocation() {
    this.hide_map = true;
    const ref = this._dialog.open(libs_components_src_lib_map_locate_modal_component__WEBPACK_IMPORTED_MODULE_10__.MapLocateModalComponent, {
      maxWidth: '95vw',
      maxHeight: '95vh',
      data: {
        item: this.space
      }
    });
    ref.afterClosed().subscribe(() => {
      this.hide_map = false;
    });
  }
  static #_ = this.ɵfac = function EventDetailsModalComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || EventDetailsModalComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵdirectiveInject"](_angular_material_dialog__WEBPACK_IMPORTED_MODULE_17__.MAT_DIALOG_DATA), _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵdirectiveInject"](libs_organisation_src_lib_organisation_service__WEBPACK_IMPORTED_MODULE_3__.OrganisationService), _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵdirectiveInject"](libs_spaces_src_lib_space_pipe__WEBPACK_IMPORTED_MODULE_4__.SpacePipe), _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵdirectiveInject"](_placeos_common__WEBPACK_IMPORTED_MODULE_7__.SettingsService), _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵdirectiveInject"](_angular_material_dialog__WEBPACK_IMPORTED_MODULE_17__.MatDialog));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵdefineComponent"]({
    type: EventDetailsModalComponent,
    selectors: [["event-details-modal"]],
    outputs: {
      action: "action",
      edit: "edit",
      remove: "remove"
    },
    features: [_angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵProvidersFeature"]([libs_spaces_src_lib_space_pipe__WEBPACK_IMPORTED_MODULE_4__.SpacePipe])],
    decls: 85,
    vars: 33,
    consts: () => {
      let i18n_0;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_2102851380219026584$$LIBS_EVENTS_SRC_LIB_EVENT_DETAILS_MODAL_COMPONENT_TS_0 = goog.getMsg(" Details ");
        i18n_0 = MSG_EXTERNAL_2102851380219026584$$LIBS_EVENTS_SRC_LIB_EVENT_DETAILS_MODAL_COMPONENT_TS_0;
      } else {
        i18n_0 = $localize`:␟2c8ce65c566300dc9063f69c615fda2e3a6b896a␟2102851380219026584: Details `;
      }
      let i18n_1;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_8291262399353359697$$LIBS_EVENTS_SRC_LIB_EVENT_DETAILS_MODAL_COMPONENT_TS_1 = goog.getMsg("Attendees");
        i18n_1 = MSG_EXTERNAL_8291262399353359697$$LIBS_EVENTS_SRC_LIB_EVENT_DETAILS_MODAL_COMPONENT_TS_1;
      } else {
        i18n_1 = $localize`:␟dc34e61df786db36347c8dc09510fa3d5d4c6253␟8291262399353359697:Attendees`;
      }
      let i18n_2;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_5528514721268144968$$LIBS_EVENTS_SRC_LIB_EVENT_DETAILS_MODAL_COMPONENT_TS_2 = goog.getMsg(" See All ");
        i18n_2 = MSG_EXTERNAL_5528514721268144968$$LIBS_EVENTS_SRC_LIB_EVENT_DETAILS_MODAL_COMPONENT_TS_2;
      } else {
        i18n_2 = $localize`:␟8ee85ef5a3693fb53511af55f66b8543941a5968␟5528514721268144968: See All `;
      }
      let i18n_3;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_2807800733729323332$$LIBS_EVENTS_SRC_LIB_EVENT_DETAILS_MODAL_COMPONENT_TS_3 = goog.getMsg("Yes");
        i18n_3 = MSG_EXTERNAL_2807800733729323332$$LIBS_EVENTS_SRC_LIB_EVENT_DETAILS_MODAL_COMPONENT_TS_3;
      } else {
        i18n_3 = $localize`:␟4f20f2d5a6882190892e58b85f6ccbedfa737952␟2807800733729323332:Yes`;
      }
      let i18n_4;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_3542042671420335679$$LIBS_EVENTS_SRC_LIB_EVENT_DETAILS_MODAL_COMPONENT_TS_4 = goog.getMsg("No");
        i18n_4 = MSG_EXTERNAL_3542042671420335679$$LIBS_EVENTS_SRC_LIB_EVENT_DETAILS_MODAL_COMPONENT_TS_4;
      } else {
        i18n_4 = $localize`:␟3d3ae7deebc5949b0c1c78b9847886a94321d9fd␟3542042671420335679:No`;
      }
      let i18n_5;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_4416413576346763682$$LIBS_EVENTS_SRC_LIB_EVENT_DETAILS_MODAL_COMPONENT_TS_5 = goog.getMsg("Pending");
        i18n_5 = MSG_EXTERNAL_4416413576346763682$$LIBS_EVENTS_SRC_LIB_EVENT_DETAILS_MODAL_COMPONENT_TS_5;
      } else {
        i18n_5 = $localize`:␟e6a27066251ca1e04c5be86ad758380856df2506␟4416413576346763682:Pending`;
      }
      let i18n_6;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_6139423482037031714$$LIBS_EVENTS_SRC_LIB_EVENT_DETAILS_MODAL_COMPONENT_TS_6 = goog.getMsg(" Host ");
        i18n_6 = MSG_EXTERNAL_6139423482037031714$$LIBS_EVENTS_SRC_LIB_EVENT_DETAILS_MODAL_COMPONENT_TS_6;
      } else {
        i18n_6 = $localize`:␟01072150a2c93fe7032783804ebfa5a1e41f3685␟6139423482037031714: Host `;
      }
      let i18n_7;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_4014175048517775632$$LIBS_EVENTS_SRC_LIB_EVENT_DETAILS_MODAL_COMPONENT_TS_7 = goog.getMsg("Delete event");
        i18n_7 = MSG_EXTERNAL_4014175048517775632$$LIBS_EVENTS_SRC_LIB_EVENT_DETAILS_MODAL_COMPONENT_TS_7;
      } else {
        i18n_7 = $localize`:␟e634daa29c58868c9c9c4d9fcc7ba1c016fac86b␟4014175048517775632:Delete event`;
      }
      let i18n_8;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_3151361020738293834$$LIBS_EVENTS_SRC_LIB_EVENT_DETAILS_MODAL_COMPONENT_TS_8 = goog.getMsg(" {$interpolation} ", {
          "interpolation": "\uFFFD0\uFFFD"
        }, {
          original_code: {
            "interpolation": "{{\n                                        room_status === 'pending'\n                                            ? 'Check in'\n                                            : 'Checked in'\n                                    }}"
          }
        });
        i18n_8 = MSG_EXTERNAL_3151361020738293834$$LIBS_EVENTS_SRC_LIB_EVENT_DETAILS_MODAL_COMPONENT_TS_8;
      } else {
        i18n_8 = $localize`:␟e00cf812605b14c9c2390da404d3cd3ea67f19a6␟3151361020738293834: ${"\uFFFD0\uFFFD"}:INTERPOLATION: `;
      }
      let i18n_9;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_6975755512274629403$$LIBS_EVENTS_SRC_LIB_EVENT_DETAILS_MODAL_COMPONENT_TS_9 = goog.getMsg(" Catering ");
        i18n_9 = MSG_EXTERNAL_6975755512274629403$$LIBS_EVENTS_SRC_LIB_EVENT_DETAILS_MODAL_COMPONENT_TS_9;
      } else {
        i18n_9 = $localize`:␟ef2612559c447d8f4c218c06bb66af9de8edf365␟6975755512274629403: Catering `;
      }
      let i18n_10;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_4484880822148672471$$LIBS_EVENTS_SRC_LIB_EVENT_DETAILS_MODAL_COMPONENT_TS_10 = goog.getMsg(" Notes ");
        i18n_10 = MSG_EXTERNAL_4484880822148672471$$LIBS_EVENTS_SRC_LIB_EVENT_DETAILS_MODAL_COMPONENT_TS_10;
      } else {
        i18n_10 = $localize`:␟195b2f1c65301b0700459c9d0ae2ce407ed9c7bf␟4484880822148672471: Notes `;
      }
      let i18n_11;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_3391582008093299175$$LIBS_EVENTS_SRC_LIB_EVENT_DETAILS_MODAL_COMPONENT_TS_11 = goog.getMsg(" Assets ({$interpolation}) ", {
          "interpolation": "\uFFFD0\uFFFD"
        }, {
          original_code: {
            "interpolation": "{{ event.valid_assets?.length || 0 }}"
          }
        });
        i18n_11 = MSG_EXTERNAL_3391582008093299175$$LIBS_EVENTS_SRC_LIB_EVENT_DETAILS_MODAL_COMPONENT_TS_11;
      } else {
        i18n_11 = $localize`:␟e30ee857e7399db3f72ec7aa8aa9b56ce76fca96␟3391582008093299175: Assets (${"\uFFFD0\uFFFD"}:INTERPOLATION:) `;
      }
      let i18n_12;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_2772374745622574688$$LIBS_EVENTS_SRC_LIB_EVENT_DETAILS_MODAL_COMPONENT_TS_12 = goog.getMsg("Edit event");
        i18n_12 = MSG_EXTERNAL_2772374745622574688$$LIBS_EVENTS_SRC_LIB_EVENT_DETAILS_MODAL_COMPONENT_TS_12;
      } else {
        i18n_12 = $localize`:␟56c74224d22c7379fdbf9d0a00c8bf519a9ee661␟2772374745622574688:Edit event`;
      }
      let i18n_13;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_3974228098480354844$$LIBS_EVENTS_SRC_LIB_EVENT_DETAILS_MODAL_COMPONENT_TS_13 = goog.getMsg("Delete Series");
        i18n_13 = MSG_EXTERNAL_3974228098480354844$$LIBS_EVENTS_SRC_LIB_EVENT_DETAILS_MODAL_COMPONENT_TS_13;
      } else {
        i18n_13 = $localize`:␟ecb2e91e2775870da0ea8e51b4951994493672fb␟3974228098480354844:Delete Series`;
      }
      let i18n_14;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_941732683947462971$$LIBS_EVENTS_SRC_LIB_EVENT_DETAILS_MODAL_COMPONENT_TS_14 = goog.getMsg("{$interpolation}", {
          "interpolation": "\uFFFD0\uFFFD"
        }, {
          original_code: {
            "interpolation": "{{ act.name }}"
          }
        });
        i18n_14 = MSG_EXTERNAL_941732683947462971$$LIBS_EVENTS_SRC_LIB_EVENT_DETAILS_MODAL_COMPONENT_TS_14;
      } else {
        i18n_14 = $localize`:␟8fcf89a6df3c02c129a41d4b202221a4013f107c␟941732683947462971:${"\uFFFD0\uFFFD"}:INTERPOLATION:`;
      }
      return [["menu", "matMenu"], i18n_0, i18n_1, i18n_2, i18n_3, i18n_4, i18n_5, i18n_6, i18n_7, i18n_8, i18n_9, i18n_10, i18n_11, i18n_12, i18n_13, i18n_14, [1, "w-[100vw]", "h-[100vh]", "sm:relative", "sm:inset-auto", "sm:w-[51rem]", "sm:h-auto", "sm:max-h-[80vh]", "bg-base-100", "sm:bg-base-200", "sm:dark:bg-neutral-600", "sm:rounded", "overflow-auto", "space-y-2", "pb-2"], [1, "sm:flex", "flex-col", "items-center", "pb-4", "max-h-screen", "sm:max-h-[80vh]", "sm:px-16", "sm:border-b", "bg-base-100", "border-base-200"], ["binding", "", "mod", "Bookings", "bind", "status", 3, "modelChange", "model", "sys"], ["class", "h-8 w-full sm:hidden block", 4, "ngIf"], ["class", "bg-neutral w-full h-64 sm:rounded-b overflow-hidden", 4, "ngIf"], ["title", "", 1, "px-3", "mt-2", "text-xl", "font-medium", "w-full"], [1, "sm:flex", "items-center", "justify-between", "w-full"], [1, "flex", "m-2"], [3, "status"], ["actions", "", "class", "flex items-center space-x-2 px-2", 4, "ngIf"], [1, "sm:flex", "flex-wrap", "sm:px-12"], [1, "sm:p-4", "sm:bg-base-100", "sm:dark:bg-neutral-700", "rounded", "sm:m-2", "sm:border", "border-base-200", "flex-grow-[3]", "min-w-1/3", "sm:w-[16rem]", "space-y-2"], [1, "px-3", "mt-2", "text-lg", "font-medium", "mb-2"], [1, "flex", "items-center", "px-2", "space-x-2"], [4, "ngIf"], ["class", "flex items-center px-2 space-x-2", 4, "ngIf"], [1, "mt-4", "sm:p-4", "sm:bg-base-100", "sm:dark:bg-neutral-700", "rounded", "sm:m-2", "sm:border", "border-base-200", "flex-grow-[3]", "min-w-1/3", "sm:w-[16rem]"], [1, "mx-3", "border-t", "border-base-200", "sm:border-none", "flex", "items-center", "justify-between"], [1, "text-lg", "font-medium"], ["matRipple", "", "show-attendees", "", 1, "clear", "text-xs", "underline", 3, "click"], [1, "flex", "items-center", "p-1"], [1, "flex", "flex-col", "flex-1", "items-center", "justify-center", "space-y-1"], [1, "text-lg"], [1, "text-sm", "uppercase"], [1, "mx-3", "mt-2", "pt-2", "text-lg", "font-medium", "border-t", "border-base-200"], ["host", "", 1, "px-2", "flex", "items-center", "space-x-2"], [3, "user"], [1, "text-sm", "flex-1", "w-px"], [1, "opacity-60", "truncate", "w-full", 3, "title"], ["map", "", 1, "mt-4", "sm:mt-2", "h-64", "sm:h-48", "relative", "border", "border-base-200", "overflow-hidden", "rounded", "sm:bg-base-100", "sm:dark:bg-neutral-700", "m-2", "flex-grow-[3]", "min-w-1/3", "p-2", "w-[calc(100%-1rem)]", "sm:w-[16rem]", 3, "click"], ["class", "mt-4 sm:p-4 sm:bg-base-100 sm:dark:bg-neutral-700 rounded sm:m-2 sm:border border-base-200 flex-grow-[3] min-w-1/3 sm:w-[16rem]", 4, "ngIf"], ["icon", "", "matRipple", "", "mat-dialog-close", "", 1, "absolute", "top-2", "left-2", "bg-neutral", "text-white"], ["class", "absolute inset-0 z-50", 4, "ngIf"], ["xPosition", "before"], ["mat-menu-item", "", "mat-dialog-close", "", 3, "matTooltip", "disabled", "click", 4, "ngIf"], ["mat-menu-item", "", 3, "click"], [1, "flex", "items-center", "space-x-2", "text-base", "pr-2"], [1, "text-2xl", "text-error"], ["mat-menu-item", "", 3, "click", 4, "ngIf"], ["mat-menu-item", "", 3, "click", 4, "ngFor", "ngForOf"], [1, "h-8", "w-full", "sm:hidden", "block"], [1, "bg-neutral", "w-full", "h-64", "sm:rounded-b", "overflow-hidden"], [1, "w-full", "h-64", 3, "images"], ["actions", "", 1, "flex", "items-center", "space-x-2", "px-2"], ["btn", "", "matRipple", "", "class", "flex-1 h-10", 3, "bg-success", "border-none", "pointer-events-none", "click", 4, "ngIf"], ["icon", "", "matRipple", "", "class", "bg-secondary rounded text-white h-12 w-12", 3, "matMenuTriggerFor", 4, "ngIf"], ["btn", "", "matRipple", "", 1, "flex-1", "h-10", 3, "click"], [1, "flex", "items-center", "space-x-2", "justify-center"], [1, "text-2xl"], [1, "pr-4"], ["icon", "", "matRipple", "", 1, "bg-secondary", "rounded", "text-white", "h-12", "w-12", 3, "matMenuTriggerFor"], [1, "mx-3", "my-2", "text-lg", "font-medium"], [1, "flex", "flex-col", "space-y-2"], ["order", "", "class", "border border-base-300 bg-base-100 rounded-xl overflow-hidden", 4, "ngFor", "ngForOf"], ["order", "", 1, "border", "border-base-300", "bg-base-100", "rounded-xl", "overflow-hidden"], [1, "flex", "items-center", "space-x-2", "p-3"], [1, "flex-1"], [1, "text-sm"], [1, "text-xs", "opacity-60"], ["icon", "", "matRipple", "", 3, "click", "matTooltip"], [1, "flex", "flex-col", "bg-base-200", "divide-y", "divide-base-100"], ["class", "flex items-center px-3 py-1 space-x-2 hover:opacity-90", 4, "ngFor", "ngForOf"], [1, "flex", "items-center", "px-3", "py-1", "space-x-2", "hover:opacity-90"], [1, "flex", "items-center", "flex-1"], ["class", "text-xs opacity-60 ml-4 font-normal", 3, "matTooltip", 4, "ngIf"], [1, "rounded", "bg-success", "text-success-content", "text-xs", "px-2", "py-1"], [1, "rounded", "bg-info", "text-info-content", "text-xs", "px-2", "py-1"], [1, "text-xs", "opacity-60", "ml-4", "font-normal", 3, "matTooltip"], [1, "pointer-events-none", 3, "src", "features", "options"], [1, "mx-3", "text-lg", "font-medium", "border-t", "sm:border-none", "border-base-200"], ["notes", "", "class", "mx-4 overflow-hidden max-w-full", 3, "innerHTML", 4, "ngIf"], ["notes", "", 1, "mx-4", "overflow-hidden", "max-w-full", 3, "innerHTML"], [1, "mx-3", "pt-2", "text-lg", "font-medium"], ["request", "", "class", "border border-base-300 bg-base-100 rounded-xl overflow-hidden", 4, "ngFor", "ngForOf"], ["request", "", 1, "border", "border-base-300", "bg-base-100", "rounded-xl", "overflow-hidden"], ["matRipple", "", 1, "flex", "items-center", "space-x-2", "p-3", "w-full", 3, "click"], [1, "flex-1", "text-left"], [1, "flex", "items-center", "justify-center", "rounded-full", "w-8", "h-8", 3, "matTooltip"], [1, "flex", "items-center", "justify-center", "rounded-full", "w-8", "h-8"], [1, "absolute", "inset-0", "z-50"], [3, "click", "list", "host"], ["mat-menu-item", "", "mat-dialog-close", "", 3, "click", "matTooltip", "disabled"]];
    },
    template: function EventDetailsModalComponent_Template(rf, ctx) {
      if (rf & 1) {
        const _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵgetCurrentView"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](0, "div", 16)(1, "div", 17)(2, "i", 18);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtwoWayListener"]("modelChange", function EventDetailsModalComponent_Template_i_modelChange_2_listener($event) {
          _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵrestoreView"](_r1);
          _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtwoWayBindingSet"](ctx.room_status, $event) || (ctx.room_status = $event);
          return _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵresetView"]($event);
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtemplate"](3, EventDetailsModalComponent_div_3_Template, 1, 0, "div", 19)(4, EventDetailsModalComponent_div_4_Template, 2, 1, "div", 20);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](5, "h3", 21);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtext"](6);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](7, "div", 22)(8, "div", 23)(9, "status-pill", 24);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtext"](10);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtemplate"](11, EventDetailsModalComponent_div_11_Template, 3, 2, "div", 25);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](12, "div", 26)(13, "div", 27)(14, "h3", 28);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵi18n"](15, 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](16, "div", 29)(17, "app-icon");
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtext"](18, "event");
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](19, "div");
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtext"](20);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵpipe"](21, "date");
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](22, "div", 29)(23, "app-icon");
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtext"](24, "schedule");
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](25, "div");
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtext"](26);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](27, "div", 29)(28, "app-icon");
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtext"](29, "map");
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](30, "div");
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtemplate"](31, EventDetailsModalComponent_ng_container_31_Template, 2, 1, "ng-container", 30);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtext"](32);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtemplate"](33, EventDetailsModalComponent_div_33_Template, 5, 2, "div", 31);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](34, "div", 32)(35, "div", 33)(36, "h3", 34);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵi18n"](37, 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](38, "button", 35);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵlistener"]("click", function EventDetailsModalComponent_Template_button_click_38_listener() {
          _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵrestoreView"](_r1);
          return _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵresetView"](ctx.show_attendees = true);
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵi18n"](39, 3);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](40, "div", 36)(41, "div", 37)(42, "div", 38);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtext"](43);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](44, "div", 39);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵi18n"](45, 4);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](46, "div", 37)(47, "div", 38);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtext"](48);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](49, "div", 39);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵi18n"](50, 5);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](51, "div", 37)(52, "div", 38);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtext"](53);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](54, "div", 39);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵi18n"](55, 6);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]()()();
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](56, "h3", 40);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵi18n"](57, 7);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](58, "div", 41);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelement"](59, "a-user-avatar", 42);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](60, "div", 43)(61, "div");
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtext"](62);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](63, "div", 44);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtext"](64);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]()()()();
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtemplate"](65, EventDetailsModalComponent_ng_container_65_Template, 6, 1, "ng-container", 30);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](66, "button", 45);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵlistener"]("click", function EventDetailsModalComponent_Template_button_click_66_listener() {
          _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵrestoreView"](_r1);
          return _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵresetView"](ctx.viewLocation());
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtemplate"](67, EventDetailsModalComponent_ng_container_67_Template, 2, 4, "ng-container", 30);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtemplate"](68, EventDetailsModalComponent_div_68_Template, 4, 1, "div", 46)(69, EventDetailsModalComponent_ng_container_69_Template, 6, 2, "ng-container", 30);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](70, "button", 47)(71, "app-icon");
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtext"](72, "close");
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtemplate"](73, EventDetailsModalComponent_div_73_Template, 2, 2, "div", 48);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](74, "mat-menu", 49, 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtemplate"](76, EventDetailsModalComponent_button_76_Template, 6, 2, "button", 50);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](77, "button", 51);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵlistener"]("click", function EventDetailsModalComponent_Template_button_click_77_listener() {
          _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵrestoreView"](_r1);
          return _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵresetView"](ctx.remove.emit());
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](78, "div", 52)(79, "app-icon", 53);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtext"](80, "delete");
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementStart"](81, "div");
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵi18n"](82, 8);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]()()();
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtemplate"](83, EventDetailsModalComponent_button_83_Template, 6, 0, "button", 54)(84, EventDetailsModalComponent_button_84_Template, 6, 2, "button", 55);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵelementEnd"]()();
      }
      if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtwoWayProperty"]("model", ctx.room_status);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵproperty"]("sys", ctx.space == null ? null : ctx.space.id);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵproperty"]("ngIf", !(ctx.event == null ? null : ctx.event.system == null ? null : ctx.event.system.images == null ? null : ctx.event.system.images.length));
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵproperty"]("ngIf", ctx.event == null ? null : ctx.event.system == null ? null : ctx.event.system.images == null ? null : ctx.event.system.images.length);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵclassProp"]("pt-4", !(ctx.event == null ? null : ctx.event.system == null ? null : ctx.event.system.images == null ? null : ctx.event.system.images.length));
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtextInterpolate1"](" ", ctx.event.title, " ");
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵproperty"]("status", ctx.event_status);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtextInterpolate1"](" ", ctx.period, " ");
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵproperty"]("ngIf", ctx.event.state !== "done");
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"](9);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtextInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵpipeBind2"](21, 30, ctx.event.date, "EEEE, dd LLLL y"));
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"](6);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtextInterpolate"](ctx.period);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"](5);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵproperty"]("ngIf", ctx.level);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtextInterpolate1"](" ", (ctx.event == null ? null : ctx.event.system == null ? null : ctx.event.system.display_name) || (ctx.event == null ? null : ctx.event.system == null ? null : ctx.event.system.name) || (ctx.event == null ? null : ctx.event.location), " ");
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵproperty"]("ngIf", ctx.building);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"](10);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtextInterpolate"](ctx.accept_count || 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"](5);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtextInterpolate"](ctx.declined_count || 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"](5);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtextInterpolate"](ctx.pending_count || 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"](6);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵproperty"]("user", ctx.event.organiser);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtextInterpolate"](ctx.event.organiser == null ? null : ctx.event.organiser.name);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵproperty"]("title", ctx.event.host);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵtextInterpolate1"](" ", ctx.event.host, " ");
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵproperty"]("ngIf", ctx.has_catering);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵproperty"]("ngIf", !ctx.hide_map);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵproperty"]("ngIf", ctx.body);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵproperty"]("ngIf", ctx.has_assets);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"](4);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵproperty"]("ngIf", ctx.show_attendees);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵproperty"]("ngIf", !ctx.hide_edit);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"](7);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵproperty"]("ngIf", ctx.event.recurring_event_id);
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵproperty"]("ngForOf", ctx.custom_actions);
      }
    },
    data: {
      animation: [_placeos_common__WEBPACK_IMPORTED_MODULE_7__.ANIMATION_SHOW_CONTRACT_EXPAND]
    }
  });
}

/***/ }),

/***/ 26101:
/*!***************************************************!*\
  !*** ./libs/events/src/lib/event-form.service.ts ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   EventFormService: () => (/* binding */ EventFormService)
/* harmony export */ });
/* harmony import */ var _home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 89204);
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(/*! @angular/router */ 95072);
/* harmony import */ var _placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @placeos/ts-client */ 35713);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! rxjs */ 90521);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! rxjs */ 68824);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! rxjs */ 68757);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! rxjs */ 71536);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! rxjs */ 97405);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! rxjs */ 26320);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! rxjs/operators */ 71963);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! rxjs/operators */ 35443);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! rxjs/operators */ 7841);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! rxjs/operators */ 47504);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! rxjs/operators */ 8627);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! rxjs/operators */ 19803);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! rxjs/operators */ 66000);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! rxjs/operators */ 29314);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! rxjs/operators */ 6109);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! rxjs/operators */ 89273);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! date-fns */ 33240);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! date-fns */ 71246);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var libs_common_src_lib_settings_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! libs/common/src/lib/settings.service */ 14233);
/* harmony import */ var libs_organisation_src_lib_organisation_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! libs/organisation/src/lib/organisation.service */ 19863);
/* harmony import */ var libs_bookings_src_lib_bookings_fn__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! libs/bookings/src/lib/bookings.fn */ 18026);
/* harmony import */ var _event_class__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./event.class */ 6727);
/* harmony import */ var _events_fn__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./events.fn */ 51416);
/* harmony import */ var _utilities__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./utilities */ 55049);
/* harmony import */ var libs_bookings_src_lib_booking_utilities__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! libs/bookings/src/lib/booking.utilities */ 17141);
/* harmony import */ var libs_payments_src_lib_payments_service__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! libs/payments/src/lib/payments.service */ 34525);
/* harmony import */ var _event_link_modal_component__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./event-link-modal.component */ 22671);
/* harmony import */ var libs_spaces_src_lib_space_utilities__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! libs/spaces/src/lib/space.utilities */ 28363);
/* harmony import */ var _helpers__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./helpers */ 37420);
/* harmony import */ var libs_spaces_src_lib_space_pipe__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! libs/spaces/src/lib/space.pipe */ 22011);
/* harmony import */ var libs_assets_src_lib_assets_fn__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! libs/assets/src/lib/assets.fn */ 75204);
/* harmony import */ var libs_users_src_lib_user_class__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! libs/users/src/lib/user.class */ 93693);
/* harmony import */ var libs_assets_src_lib_asset_state_service__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! libs/assets/src/lib/asset-state.service */ 46088);
/* harmony import */ var libs_assets_src_lib_asset_request_class__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! libs/assets/src/lib/asset-request.class */ 33747);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_38__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_material_dialog__WEBPACK_IMPORTED_MODULE_39__ = __webpack_require__(/*! @angular/material/dialog */ 12587);
































const BOOKING_URLS = ['book/rooms', 'book/spaces', 'book/meeting', 'schedule/view', 'confirm/success', 'upcoming'];
const MINUTES = 60 * 1000;
class EventFormService extends _placeos_common__WEBPACK_IMPORTED_MODULE_2__.AsyncHandler {
  get options_value() {
    return this._options.getValue();
  }
  get is_multiday() {
    return this._event.getValue()?.duration > 24 * 60;
  }
  get view() {
    return this._view.getValue();
  }
  get form() {
    return this._form;
  }
  get event() {
    return this._event.getValue();
  }
  get favorite_spaces() {
    return this._settings.get('favourite_spaces') || [];
  }
  get has_calendar() {
    return this._settings.get('app.events.use_bookings') !== true;
  }
  constructor(_org, _router, _payments, _settings, _assets, _dialog) {
    super();
    this._org = _org;
    this._router = _router;
    this._payments = _payments;
    this._settings = _settings;
    this._assets = _assets;
    this._dialog = _dialog;
    this._view = new rxjs__WEBPACK_IMPORTED_MODULE_19__.BehaviorSubject('form');
    this._options = new rxjs__WEBPACK_IMPORTED_MODULE_19__.BehaviorSubject({
      zone_ids: [],
      features: []
    });
    this._form = (0,_utilities__WEBPACK_IMPORTED_MODULE_8__.generateEventForm)(undefined, this._settings);
    this._date = new rxjs__WEBPACK_IMPORTED_MODULE_19__.BehaviorSubject(Date.now());
    this._event = new rxjs__WEBPACK_IMPORTED_MODULE_19__.BehaviorSubject(null);
    this._loading = new rxjs__WEBPACK_IMPORTED_MODULE_19__.BehaviorSubject('');
    this._changed = new rxjs__WEBPACK_IMPORTED_MODULE_19__.BehaviorSubject(0);
    this.last_success = new _event_class__WEBPACK_IMPORTED_MODULE_6__.CalendarEvent(JSON.parse(sessionStorage.getItem('PLACEOS.last_booked_event') || '{}'));
    this.loading = this._loading.asObservable();
    this.options = this._options.asObservable();
    this.booking_rules = this._org.building_list.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_20__.switchMap)(list => Promise.all(list.map(bld => (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.showMetadata)(bld.id, 'room_booking_rules').toPromise()))), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_21__.map)(building_rules => {
      const mapping = {};
      for (const rules of building_rules) {
        mapping[rules.id] = rules.details instanceof Array ? rules.details : [];
      }
      return mapping;
    }), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_22__.shareReplay)(1));
    this.spaces = (0,rxjs__WEBPACK_IMPORTED_MODULE_23__.combineLatest)([this._options.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_24__.distinctUntilKeyChanged)('zone_ids')), this._org.active_region.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_25__.filter)(_ => !!_), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_24__.distinctUntilKeyChanged)('id')), this._org.active_building.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_25__.filter)(_ => !!_), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_24__.distinctUntilKeyChanged)('id'))]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_26__.debounceTime)(300), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_27__.tap)(_ => this.unsubWith('bind:')), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_20__.switchMap)(([{
      zone_ids
    }]) => {
      this._loading.next('Loading space list for location...');
      const use_region = this._settings.get('app.use_region');
      if (!zone_ids?.length) {
        zone_ids = [(use_region ? this._org.region?.id : this._org.building?.id) || this._org.building?.id];
      }
      return (0,rxjs__WEBPACK_IMPORTED_MODULE_28__.forkJoin)(zone_ids.map(id => (0,libs_spaces_src_lib_space_utilities__WEBPACK_IMPORTED_MODULE_12__.requestSpacesForZone)(id).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_29__.catchError)(() => (0,rxjs__WEBPACK_IMPORTED_MODULE_30__.of)([])))));
    }), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_21__.map)(l => (0,_placeos_common__WEBPACK_IMPORTED_MODULE_2__.flatten)(l)), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_27__.tap)(_ => this._loading.next('')), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_22__.shareReplay)(1));
    this.features = this.spaces.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_21__.map)(l => (0,_placeos_common__WEBPACK_IMPORTED_MODULE_2__.unique)((0,_placeos_common__WEBPACK_IMPORTED_MODULE_2__.flatten)(l.map(_ => _.features)))));
    this.filtered_spaces = (0,rxjs__WEBPACK_IMPORTED_MODULE_23__.combineLatest)([this.spaces, this.options]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_21__.map)(([spaces, {
      show_fav,
      features,
      capacity
    }]) => spaces.filter(s => {
      const domain = ((0,_placeos_common__WEBPACK_IMPORTED_MODULE_2__.currentUser)()?.email || '@').split('@')[1];
      const zone = (this._settings.get('app.events.restrict_spaces') || {})[domain];
      const limit_map = this._settings.get('app.events.limit_spaces') || {};
      const limited_zones = Object.keys(limit_map);
      const zone_limit = s.zones.find(_ => limited_zones.includes(_));
      return s.bookable && (!zone || s.zones.includes(zone)) && (!zone_limit || limit_map[zone_limit] === domain) && (!show_fav || this.favorite_spaces.includes(s.id)) && features.every(f => s.features.includes(f)) && s.capacity >= Math.max(0, capacity || 0);
    }).slice(0, Math.min(100, spaces.length))), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_22__.shareReplay)(1));
    this._space_bookings = (0,rxjs__WEBPACK_IMPORTED_MODULE_23__.combineLatest)([this.spaces, this.filtered_spaces]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_31__.distinctUntilChanged)(([s1], [s2]) => s1 !== s2), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_20__.switchMap)(([_, list]) => {
      return (0,rxjs__WEBPACK_IMPORTED_MODULE_23__.combineLatest)((list || []).map(_ => {
        const binding = (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.getModule)(_.id, 'Bookings').binding('bookings');
        const obs = binding.listen().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_21__.map)(_ => (_ || []).map(i => new _event_class__WEBPACK_IMPORTED_MODULE_6__.CalendarEvent(i))));
        if (!this.hasSubscription(`bind:${_.id}`)) {
          this.subscription(`bind:${_.id}`, binding.bind());
        }
        return obs;
      }));
    }), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_22__.shareReplay)(1));
    this.current_available_spaces = (0,rxjs__WEBPACK_IMPORTED_MODULE_23__.combineLatest)([this.filtered_spaces, this._space_bookings, this.booking_rules, (0,rxjs__WEBPACK_IMPORTED_MODULE_32__.merge)(this.form.valueChanges, (0,rxjs__WEBPACK_IMPORTED_MODULE_33__.timer)(1000)), this._changed]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_26__.debounceTime)(300), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_21__.map)(([list, bookings, booking_rules]) => {
      this._loading.next('Updating available spaces...');
      let {
        ical_uid,
        date,
        duration,
        all_day
      } = this._form.getRawValue();
      list = (0,_placeos_common__WEBPACK_IMPORTED_MODULE_2__.filterResourcesFromRules)(list, {
        date,
        duration,
        resource: null,
        host: (0,_placeos_common__WEBPACK_IMPORTED_MODULE_2__.currentUser)()
      }, booking_rules[this._org.building?.id] || []);
      return (list || []).filter((_, idx) => {
        const start = all_day ? (0,date_fns__WEBPACK_IMPORTED_MODULE_34__.startOfDay)(date).valueOf() : date;
        const end = start + (all_day ? Math.max(24 * 60, duration) : duration) * MINUTES;
        let booking_list = bookings[idx] || [];
        if (this.last_success?.system?.id === _.id) {
          booking_list = [...booking_list, this.last_success];
        }
        return (0,_helpers__WEBPACK_IMPORTED_MODULE_13__.periodInFreeTimeSlot)(start, end, booking_list.filter(_ => _.ical_uid !== ical_uid));
      }).sort((a, b) => a.capacity - b.capacity);
    }), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_27__.tap)(_ => this._loading.next('')), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_22__.shareReplay)(1));
    this.future_available_spaces = (0,rxjs__WEBPACK_IMPORTED_MODULE_23__.combineLatest)([this.filtered_spaces, this.booking_rules, this.form.valueChanges.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_26__.debounceTime)(400), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_35__.startWith)({}))]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_25__.filter)(() => !this._loading.getValue()), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_26__.debounceTime)(300), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_20__.switchMap)(([spaces, booking_rules]) => {
      if (!spaces.length) return (0,rxjs__WEBPACK_IMPORTED_MODULE_30__.of)([]);
      this._loading.next('Retrieving available spaces...');
      let {
        date,
        duration,
        all_day
      } = this._form.getRawValue();
      const availability_method = this.has_calendar ? _events_fn__WEBPACK_IMPORTED_MODULE_7__.querySpaceAvailability : libs_bookings_src_lib_bookings_fn__WEBPACK_IMPORTED_MODULE_5__.queryResourceAvailability;
      spaces = (0,_placeos_common__WEBPACK_IMPORTED_MODULE_2__.filterResourcesFromRules)(spaces, {
        date,
        duration,
        resource: null,
        host: (0,_placeos_common__WEBPACK_IMPORTED_MODULE_2__.currentUser)()
      }, booking_rules[this._org.building?.id] || []);
      return availability_method(spaces.map(({
        id
      }) => id), all_day ? (0,date_fns__WEBPACK_IMPORTED_MODULE_34__.startOfDay)(date).valueOf() : date, all_day ? Math.max(24 * 60, duration) : duration, this?.event?.resources[0]?.id || this.event?.system?.id || this.event?.id || undefined, undefined, [this.event?.date, this.event?.duration]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_21__.map)(availability => {
        var list = spaces.filter((_, i) => availability[i]);
        list = (0,_placeos_common__WEBPACK_IMPORTED_MODULE_2__.filterResourcesFromRules)(list, {
          date,
          duration,
          resource: null,
          host: (0,_placeos_common__WEBPACK_IMPORTED_MODULE_2__.currentUser)()
        }, booking_rules[this._org.building?.id] || []);
        return list;
      }), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_29__.catchError)(_ => []));
    }), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_27__.tap)(_ => this._loading.next('')), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_22__.shareReplay)(1));
    this.available_spaces = this._date.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_20__.switchMap)(d => {
      const diff = Math.abs((0,date_fns__WEBPACK_IMPORTED_MODULE_36__.differenceInDays)(d, Date.now()));
      const cache_length = this._settings.get('app.events.cache_duration_in_days') || 14;
      return diff < cache_length ? this.current_available_spaces : this.future_available_spaces;
    }), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_22__.shareReplay)(1));
    this.cancelPostForm = () => this.unsub('post-event-form');
    this._space_pipe = new libs_spaces_src_lib_space_pipe__WEBPACK_IMPORTED_MODULE_14__.SpacePipe(this._org);
    this.subscription('router.events', this._router.events.subscribe(event => {
      if (event instanceof _angular_router__WEBPACK_IMPORTED_MODULE_37__.NavigationEnd && !BOOKING_URLS.some(_ => event.url.includes(_))) {
        this.clearForm();
      }
    }));
    const previous = {};
    this.subscription('form_change', this._form.valueChanges.subscribe(({
      date,
      duration,
      assets
    }) => {
      if (date && date !== previous['date'] || duration && duration !== previous['duration']) {
        this._assets.setOptions({
          date: this.form.value.date,
          duration: this.form.value.duration
        });
        previous['date'] = date;
        previous['duration'] = duration;
      }
      if (date && date !== this._date.getValue()) {
        this._date.next(date);
      }
      this.storeForm();
    }));
  }
  listenForStatusChanges() {
    this.subscription('status:rooms', this.available_spaces.subscribe());
  }
  setView(value) {
    this.timeout('set_view', () => this._view.next(value), 50);
  }
  setOptions(value) {
    this._options.next({
      ...this._options.getValue(),
      ...value
    });
  }
  newForm(event = new _event_class__WEBPACK_IMPORTED_MODULE_6__.CalendarEvent({
    all_day: this._settings.get('app.events.all_day_default')
  })) {
    var _this = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      _this._event.next(event);
      if (event.recurring_event_id) {
        const master = yield (0,_events_fn__WEBPACK_IMPORTED_MODULE_7__.showEvent)(event.recurring_event_id).toPromise().catch(_ => null);
        if (master) {
          _this._event.getValue().recurrence = {
            ...master.recurrence,
            _pattern: master.recurrence.pattern
          };
        }
      }
      _this._assets.setOptions({
        ignore: (0,_placeos_common__WEBPACK_IMPORTED_MODULE_2__.flatten)(event.linked_bookings?.map(_ => _.asset_ids || [_.asset_id]) || [])
      });
      for (const idx in event.resources) {
        const space = event.resources[idx];
        event.resources[idx] = yield _this._space_pipe.transform(space.id || space.email);
      }
      _this._date.next(event.date);
      _this.timeout('post-event-form', () => {
        _this._form.patchValue({
          date: event.date || _this._form.value.date
        });
      }, 1000);
      _this.resetForm();
    })();
  }
  resetForm() {
    this._form.reset();
    const event = this._event.getValue() || {
      extension_data: {}
    };
    this._assets.setOptions({
      ignore: (0,_placeos_common__WEBPACK_IMPORTED_MODULE_2__.flatten)(event.linked_bookings?.map(_ => _.asset_ids || [_.asset_id]) || [])
    });
    const has_catering = !!event.extension_data.catering[0];
    this._form.patchValue({
      ...event.extension_data,
      ...event,
      duration: event.duration >= 12 * 60 ? 30 : event.duration,
      organiser: event?.organiser || (0,_placeos_common__WEBPACK_IMPORTED_MODULE_2__.currentUser)() || new libs_users_src_lib_user_class__WEBPACK_IMPORTED_MODULE_16__.User({
        email: event?.host
      }),
      catering_charge_code: event.extension_data.catering[0]?.charge_code || (event.id && has_catering ? ' ' : ''),
      assets: (event.extension_data.assets || []).map(_ => new libs_assets_src_lib_asset_request_class__WEBPACK_IMPORTED_MODULE_18__.AssetRequest({
        ..._,
        event
      }))
    });
    this._form.patchValue({
      date: event.date || this._form.value.date,
      date_end: event.date_end || this._form.value.date_end
    });
    this._options.next({
      features: []
    });
    this.storeForm();
  }
  clearForm() {
    sessionStorage.removeItem('PLACEOS.event_form');
    this.unsubWith('status:');
    this.unsubWith('bind:');
    this.newForm();
  }
  storeForm() {
    sessionStorage.setItem('PLACEOS.event_form', JSON.stringify(this._form.getRawValue() || {}));
  }
  loadForm() {
    if (!sessionStorage.getItem('PLACEOS.event_form')) {
      return this.newForm();
    }
    const form_data = JSON.parse(sessionStorage.getItem('PLACEOS.event_form') || '{}');
    if (form_data.id && form_data.id !== this._event.getValue()?.id) {
      (0,_events_fn__WEBPACK_IMPORTED_MODULE_7__.showEvent)(form_data.id).subscribe(event => {
        this._event.next(event);
        this._assets.setOptions({
          ignore: (0,_placeos_common__WEBPACK_IMPORTED_MODULE_2__.flatten)(event.linked_bookings?.map(_ => _.asset_ids || [_.asset_id]) || [])
        });
      });
    }
    this._form.patchValue({
      ...form_data
    });
  }
  openEventLinkModal(force = false) {
    const form = this._form;
    form.markAllAsTouched();
    if (!form.valid && !force) return;
    const event = new _event_class__WEBPACK_IMPORTED_MODULE_6__.CalendarEvent({
      ...form.getRawValue(),
      assets: []
    });
    const ref = this._dialog.open(_event_link_modal_component__WEBPACK_IMPORTED_MODULE_11__.EventLinkModalComponent, {
      data: event
    });
    ref.afterClosed().subscribe(d => d ? this._router.navigate(['/']) : '');
  }
  postForm(force = false, ignore_space_check = [], ignore_owner = false) {
    var _this2 = this;
    return new Promise( /*#__PURE__*/function () {
      var _ref = (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* (resolve, reject) {
        _this2._loading.next('Creating event...');
        const form = _this2._form;
        form.markAllAsTouched();
        const event = _this2.event || new _event_class__WEBPACK_IMPORTED_MODULE_6__.CalendarEvent();
        if (!form.valid && !force) {
          _this2._loading.next('');
          return reject(`Some form fields are invalid. [${(0,_placeos_common__WEBPACK_IMPORTED_MODULE_2__.getInvalidFields)(form).join(', ')}]`);
        }
        const ical_uid = _this2.event?.ical_uid;
        let value = _this2._form.getRawValue();
        let {
          id,
          host,
          date,
          duration,
          creator,
          all_day,
          assets,
          recurrence
        } = value;
        let spaces = form.get('resources')?.value || [];
        if (ignore_space_check.length) {
          spaces = spaces.filter(_ => !ignore_space_check.includes(_.email) && !ignore_space_check.includes(_.id));
        }
        let catering = form.get('catering')?.value || [];
        if (recurrence?._pattern && recurrence?._pattern !== 'none') {
          _this2.form.patchValue({
            recurring: true
          });
          value = _this2._form.getRawValue();
        }
        let changed_times = false;
        let changed_spaces = spaces.some(s => !event.resources?.find(_ => _.id === s.id));
        if ((!id || date !== event.date || duration !== event.duration) && spaces.length) {
          changed_times = true;
          yield _this2.checkSelectedSpacesAreAvailable(spaces, all_day ? (0,date_fns__WEBPACK_IMPORTED_MODULE_34__.startOfDay)(date).valueOf() : date, all_day ? Math.max(24 * 60, duration) : duration, ical_uid || id || '').catch(_ => {
            _this2._loading.next('');
            reject(_);
            throw _;
          });
        }
        spaces = form.get('resources')?.value || [];
        const is_owner = host === (0,_placeos_common__WEBPACK_IMPORTED_MODULE_2__.currentUser)()?.email || creator === (0,_placeos_common__WEBPACK_IMPORTED_MODULE_2__.currentUser)()?.email;
        if (!spaces.length && _this2._settings.get('app.events.no_space_resource')) {
          const space = yield _this2._space_pipe.transform(_this2._settings.get('app.events.no_space_resource'));
          spaces.push(space);
        }
        const attendees = (0,_placeos_common__WEBPACK_IMPORTED_MODULE_2__.unique)([...value.attendees, value.organiser || (0,_placeos_common__WEBPACK_IMPORTED_MODULE_2__.currentUser)()], 'email');
        if (!spaces.length && attendees.find(_ => _.is_external)) {
          _this2._loading.next('');
          const message = 'External attendees require a space to be booked';
          reject(message);
          throw message;
        }
        const space_id = spaces[0]?.id;
        const query = id ? {
          system_id: _this2.event?.resources[0]?.id || _this2.event?.system?.id || space_id
        } : {};
        if (is_owner && !ignore_owner) query.calendar = host || creator;
        if (_this2._payments.payment_module && spaces.length) {
          const receipt = yield _this2._payments.makePayment({
            type: 'space',
            resource_name: spaces[0].display_name || spaces[0].name,
            date,
            duration,
            all_day
          });
          if (!receipt?.success) return _this2._loading.next('');
          value.extension_data = {
            invoice: receipt,
            invoice_id: receipt.invoice_id
          };
        }
        const d = value.date;
        for (const order of catering) {
          order.notes = value.catering_notes;
          order.charge_code = value.catering_charge_code;
        }
        if (spaces.length) {
          let [setup, breakdown] = [0, 0];
          for (const space of spaces) {
            const overflow = _this2._settings.get(`app.events.overflow.${space.id}`);
            if (overflow?.setup) {
              setup = Math.max(setup, overflow.setup);
            }
            if (overflow?.breakdown) {
              breakdown = Math.max(breakdown, overflow.breakdown);
            }
          }
          value.setup = value.setup_time || setup;
          value.breakdown = value.breakdown_time || breakdown;
          value.setup_time = value.setup_time || setup;
          value.breakdown_time = value.breakdown_time || breakdown;
        }
        const processed_assets = (assets || []).map(_ => new libs_assets_src_lib_asset_request_class__WEBPACK_IMPORTED_MODULE_18__.AssetRequest(_).toJSON());
        const result = yield _this2._makeBooking(new _event_class__WEBPACK_IMPORTED_MODULE_6__.CalendarEvent({
          ...value,
          old_system: _this2.event?.system,
          host: _this2._settings.get('app.events.force_host') || (_this2._settings.get('app.events.room_as_host') ? value.resources[0].email : '') || value.host,
          title: value.title || 'Space Booking',
          attendees: attendees.map(_ => {
            const v = {
              ..._
            };
            delete v.visit_expected;
            return v;
          }),
          date: d,
          catering,
          assets: processed_assets,
          extension_data: _this2._settings.get('app.events.force_host') || _this2._settings.get('app.events.room_as_host') ? {
            host_override: value.host,
            department: value.organiser?.department || (0,_placeos_common__WEBPACK_IMPORTED_MODULE_2__.currentUser)()?.department
          } : {
            department: value.organiser?.department || (0,_placeos_common__WEBPACK_IMPORTED_MODULE_2__.currentUser)()?.department
          }
        }), query).catch(e => {
          reject(e);
          _this2._loading.next('');
          throw e;
        });
        const domain = ((0,_placeos_common__WEBPACK_IMPORTED_MODULE_2__.currentUser)()?.email || '@').split('@')[1];
        const visitors = attendees.filter(user => user.is_external && user.email !== event.host && !user.email.includes(domain) && user.visit_expected);
        let creating_assets = false;
        const on_error = /*#__PURE__*/function () {
          var _ref2 = (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* (e) {
            if (!_this2.form.value.id) {
              yield (0,_events_fn__WEBPACK_IMPORTED_MODULE_7__.removeEvent)(result.id, spaces.length ? {
                calendar: _this2.form.value.host || (0,_placeos_common__WEBPACK_IMPORTED_MODULE_2__.currentUser)()?.email,
                system_id: spaces[0].id
              } : {}).toPromise();
              console.warn("Couldn't update asset requests", e);
              if (e?.status === 409) {
                (0,_placeos_common__WEBPACK_IMPORTED_MODULE_2__.notifyError)('Some assets are already booked for the selected time');
              } else (0,_placeos_common__WEBPACK_IMPORTED_MODULE_2__.notifyError)('Unable to book the selected assets.');
            } else if (creating_assets) {
              (0,_placeos_common__WEBPACK_IMPORTED_MODULE_2__.notifyError)(`Unable to update all asset requests for event.\n${e}`);
              return;
            }
            _this2._loading.next('');
            throw e;
          });
          return function on_error(_x3) {
            return _ref2.apply(this, arguments);
          };
        }();
        if (visitors.length) {
          yield (0,libs_bookings_src_lib_bookings_fn__WEBPACK_IMPORTED_MODULE_5__.createBookingsForEvent)(result, 'visitor', visitors).catch(on_error);
        }
        if (assets?.length || event.extension_data.assets?.length) {
          creating_assets = true;
          const requests = yield (0,libs_assets_src_lib_assets_fn__WEBPACK_IMPORTED_MODULE_15__.validateAssetRequestsForResource)(result, {
            date,
            duration,
            host,
            all_day,
            location_name: spaces[0]?.display_name || spaces[0]?.name || '',
            location_id: spaces[0]?.id || '',
            zones: (0,_placeos_common__WEBPACK_IMPORTED_MODULE_2__.unique)([_this2._org.organisation.id, _this2._org.region?.id, _this2._org.building?.id, ...spaces[0]?.zones]).filter(_ => !!_),
            reset_state: changed_times
          }, assets, changed_spaces || changed_times).catch(on_error);
          if (!requests) throw 'Unable to validate asset requests';
          yield requests();
          creating_assets = false;
        }
        _this2.clearForm();
        _this2.last_success = result;
        sessionStorage.setItem('PLACEOS.last_booked_event', JSON.stringify(result));
        _this2.setView('success');
        _this2.timeout('post_finshed', () => _this2._changed.next(Date.now()));
        resolve(result);
        _this2._loading.next('');
      });
      return function (_x, _x2) {
        return _ref.apply(this, arguments);
      };
    }());
  }
  _makeBooking(event, query) {
    var _this3 = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      _this3._updateVisitorList(event.attendees);
      return (!_this3.has_calendar ? (0,libs_bookings_src_lib_bookings_fn__WEBPACK_IMPORTED_MODULE_5__.saveBooking)((0,libs_bookings_src_lib_booking_utilities__WEBPACK_IMPORTED_MODULE_9__.newBookingFromCalendarEvent)({
        ...event.toJSON(),
        status: _this3._settings.get('app.bookings.no_approval') ? 'approved' : 'tentative'
      })).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_21__.map)(_ => (0,_utilities__WEBPACK_IMPORTED_MODULE_8__.newCalendarEventFromBooking)(_))) : (0,_events_fn__WEBPACK_IMPORTED_MODULE_7__.saveEvent)(event, query)).toPromise();
    })();
  }
  checkSelectedSpacesAreAvailable(spaces, date, duration, ignore) {
    var _this4 = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      if (!spaces?.length) return true;
      if (_this4.has_calendar) {
        const response = yield (0,_events_fn__WEBPACK_IMPORTED_MODULE_7__.querySpaceAvailability)(spaces.map(({
          id
        }) => id), date, duration, _this4?.event?.resources[0]?.id || _this4.event?.system?.id || _this4.event?.id || undefined, undefined, [_this4.event?.date, _this4.event?.duration]).toPromise();
        if (!response.every(_ => _)) {
          throw `${spaces.length > 1 ? 'The selected space' : 'Some of the selected spaces'} is not available at the selected time`;
        }
      } else {
        const availability = yield (0,libs_bookings_src_lib_bookings_fn__WEBPACK_IMPORTED_MODULE_5__.queryResourceAvailability)(spaces.map(_ => _.id), date, duration, ignore).toPromise();
        if (!availability.every(_ => _)) throw `${spaces.length > 1 ? 'The selected space' : 'Some of the selected spaces'} are not available at the selected time`;
      }
      return true;
    })();
  }
  _updateVisitorList(attendees) {
    const visitors = attendees.filter(user => user.is_external);
    if (!visitors?.length) return;
    const old_visitors = this._settings.get('visitor-invitees') || [];
    this._settings.saveUserSetting('visitor-invitees', (0,_placeos_common__WEBPACK_IMPORTED_MODULE_2__.unique)([...old_visitors.filter(_ => !_.includes(_.email)), ...visitors.map(_ => `${_.email}|${_.name}|${_.organisation}`)]));
  }
  static #_ = this.ɵfac = function EventFormService_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || EventFormService)(_angular_core__WEBPACK_IMPORTED_MODULE_38__["ɵɵinject"](libs_organisation_src_lib_organisation_service__WEBPACK_IMPORTED_MODULE_4__.OrganisationService), _angular_core__WEBPACK_IMPORTED_MODULE_38__["ɵɵinject"](_angular_router__WEBPACK_IMPORTED_MODULE_37__.Router), _angular_core__WEBPACK_IMPORTED_MODULE_38__["ɵɵinject"](libs_payments_src_lib_payments_service__WEBPACK_IMPORTED_MODULE_10__.PaymentsService), _angular_core__WEBPACK_IMPORTED_MODULE_38__["ɵɵinject"](libs_common_src_lib_settings_service__WEBPACK_IMPORTED_MODULE_3__.SettingsService), _angular_core__WEBPACK_IMPORTED_MODULE_38__["ɵɵinject"](libs_assets_src_lib_asset_state_service__WEBPACK_IMPORTED_MODULE_17__.AssetStateService), _angular_core__WEBPACK_IMPORTED_MODULE_38__["ɵɵinject"](_angular_material_dialog__WEBPACK_IMPORTED_MODULE_39__.MatDialog));
  };
  static #_2 = this.ɵprov = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_38__["ɵɵdefineInjectable"]({
    token: EventFormService,
    factory: EventFormService.ɵfac,
    providedIn: 'root'
  });
}

/***/ }),

/***/ 22671:
/*!***********************************************************!*\
  !*** ./libs/events/src/lib/event-link-modal.component.ts ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   EventLinkModalComponent: () => (/* binding */ EventLinkModalComponent)
/* harmony export */ });
/* harmony import */ var _angular_material_dialog__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @angular/material/dialog */ 12587);
/* harmony import */ var libs_common_src_lib_calendar_links__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! libs/common/src/lib/calendar-links */ 44571);
/* harmony import */ var _event_class__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./event.class */ 6727);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../components/src/lib/icon.component */ 69434);
/* harmony import */ var _angular_material_core__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @angular/material/core */ 74646);
/* harmony import */ var _components_src_lib_safe_pipe__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../components/src/lib/safe.pipe */ 26781);
/* harmony import */ var _components_src_lib_sanitise_pipe__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../components/src/lib/sanitise.pipe */ 54616);











class EventLinkModalComponent {
  constructor(_event, _dialog) {
    this._event = _event;
    this._dialog = _dialog;
    this.outlook_link = (0,libs_common_src_lib_calendar_links__WEBPACK_IMPORTED_MODULE_0__.generateMicrosoftCalendarLink)(this._event);
    this.google_link = (0,libs_common_src_lib_calendar_links__WEBPACK_IMPORTED_MODULE_0__.generateGoogleCalendarLink)(this._event);
    this.ical_link = (0,libs_common_src_lib_calendar_links__WEBPACK_IMPORTED_MODULE_0__.generateCalendarFileLink)(this._event);
    this.has_actioned = false;
  }
  close() {
    if (!this.has_actioned) {
      return (0,_placeos_common__WEBPACK_IMPORTED_MODULE_2__.notifyError)('You need to select a calendar option to finish creating this booking');
    }
    this._dialog.close(true);
  }
  static #_ = this.ɵfac = function EventLinkModalComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || EventLinkModalComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵdirectiveInject"](_angular_material_dialog__WEBPACK_IMPORTED_MODULE_7__.MAT_DIALOG_DATA), _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵdirectiveInject"](_angular_material_dialog__WEBPACK_IMPORTED_MODULE_7__.MatDialogRef));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵdefineComponent"]({
    type: EventLinkModalComponent,
    selectors: [["event-link-modal"]],
    decls: 24,
    vars: 13,
    consts: () => {
      let i18n_0;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_5139383754155835256$$LIBS_EVENTS_SRC_LIB_EVENT_LINK_MODAL_COMPONENT_TS_0 = goog.getMsg("Add event to your calendar");
        i18n_0 = MSG_EXTERNAL_5139383754155835256$$LIBS_EVENTS_SRC_LIB_EVENT_LINK_MODAL_COMPONENT_TS_0;
      } else {
        i18n_0 = $localize`:␟29e3480e3d010232704522cde3ca29d23cc7725f␟5139383754155835256:Add event to your calendar`;
      }
      let i18n_1;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_4015832758698516701$$LIBS_EVENTS_SRC_LIB_EVENT_LINK_MODAL_COMPONENT_TS_1 = goog.getMsg("Create in Outlook");
        i18n_1 = MSG_EXTERNAL_4015832758698516701$$LIBS_EVENTS_SRC_LIB_EVENT_LINK_MODAL_COMPONENT_TS_1;
      } else {
        i18n_1 = $localize`:␟34c16b14ad0e33db574c8bea543e66e766aa3a01␟4015832758698516701:Create in Outlook`;
      }
      let i18n_2;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_3788591245559456526$$LIBS_EVENTS_SRC_LIB_EVENT_LINK_MODAL_COMPONENT_TS_2 = goog.getMsg("Create in Google Calendar");
        i18n_2 = MSG_EXTERNAL_3788591245559456526$$LIBS_EVENTS_SRC_LIB_EVENT_LINK_MODAL_COMPONENT_TS_2;
      } else {
        i18n_2 = $localize`:␟f745484670e6b6bbb8a1c327c222e665fb25b863␟3788591245559456526:Create in Google Calendar`;
      }
      let i18n_3;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_4894641609416495396$$LIBS_EVENTS_SRC_LIB_EVENT_LINK_MODAL_COMPONENT_TS_3 = goog.getMsg("Download iCal File");
        i18n_3 = MSG_EXTERNAL_4894641609416495396$$LIBS_EVENTS_SRC_LIB_EVENT_LINK_MODAL_COMPONENT_TS_3;
      } else {
        i18n_3 = $localize`:␟1af54061e7f4bcfb1048ffaa05c9b8f7c4b41679␟4894641609416495396:Download iCal File`;
      }
      let i18n_4;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_6327967827692127661$$LIBS_EVENTS_SRC_LIB_EVENT_LINK_MODAL_COMPONENT_TS_4 = goog.getMsg(" Close ");
        i18n_4 = MSG_EXTERNAL_6327967827692127661$$LIBS_EVENTS_SRC_LIB_EVENT_LINK_MODAL_COMPONENT_TS_4;
      } else {
        i18n_4 = $localize`:␟4dc1e9a4bbd21cf153990984cd4ecb4444117098␟6327967827692127661: Close `;
      }
      return [i18n_0, i18n_1, i18n_2, i18n_3, i18n_4, [1, "p-4", "w-full", "pb-2"], [1, "flex", "flex-col", "items-center", "space-y-4", "p-4", "relative"], ["btn", "", "matRipple", "", "target", "_blank", "rel", "noopener noreferer", 1, "flex", "items-center", "p-2", "space-x-2", "pr-4", "w-64", "rounded", "inverse", 3, "click", "href"], ["src", "assets/icons/outlook.svg", 1, "w-6"], ["src", "assets/icons/gcal.svg", 1, "w-6"], [1, "text-xl"], ["btn", "", "matRipple", "", 1, "w-64", 3, "click"], ["icon", "", "matRipple", "", 1, "absolute", "top-2", "right-0", 3, "mat-dialog-close"]];
    },
    template: function EventLinkModalComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](0, "div", 5);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵi18n"](1, 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](2, "div", 6)(3, "a", 7);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpipe"](4, "sanitize");
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵlistener"]("click", function EventLinkModalComponent_Template_a_click_3_listener() {
          return ctx.has_actioned = true;
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelement"](5, "img", 8);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](6, "span");
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵi18n"](7, 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](8, "a", 7);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpipe"](9, "sanitize");
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵlistener"]("click", function EventLinkModalComponent_Template_a_click_8_listener() {
          return ctx.has_actioned = true;
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelement"](10, "img", 9);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](11, "span");
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵi18n"](12, 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](13, "a", 7);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpipe"](14, "safe");
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵlistener"]("click", function EventLinkModalComponent_Template_a_click_13_listener() {
          return ctx.has_actioned = true;
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](15, "app-icon", 10);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](16, "download");
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](17, "span");
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵi18n"](18, 3);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](19, "button", 11);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵlistener"]("click", function EventLinkModalComponent_Template_button_click_19_listener() {
          return ctx.close();
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵi18n"](20, 4);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](21, "button", 12)(22, "app-icon");
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](23, "close");
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]()();
      }
      if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("href", _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpipeBind2"](4, 4, ctx.outlook_link, "url"), _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵsanitizeUrl"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](5);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("href", _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpipeBind2"](9, 7, ctx.google_link, "url"), _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵsanitizeUrl"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](5);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("href", _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpipeBind2"](14, 10, ctx.ical_link, "url"), _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵsanitizeUrl"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](8);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("mat-dialog-close", ctx.has_actioned);
      }
    },
    dependencies: [_angular_material_dialog__WEBPACK_IMPORTED_MODULE_7__.MatDialogClose, _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_3__.IconComponent, _angular_material_core__WEBPACK_IMPORTED_MODULE_8__.MatRipple, _components_src_lib_safe_pipe__WEBPACK_IMPORTED_MODULE_4__.SafePipe, _components_src_lib_sanitise_pipe__WEBPACK_IMPORTED_MODULE_5__.SanitizePipe],
    styles: ["[_nghost-%COMP%] {\n                position: relative;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImV2ZW50LWxpbmstbW9kYWwuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxrQkFBa0I7WUFDdEIiLCJmaWxlIjoiZXZlbnQtbGluay1tb2RhbC5jb21wb25lbnQudHMiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIDpob3N0IHtcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICAgICAgICB9XG4gICAgICAgICJdfQ== */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvZXZlbnRzL3NyYy9saWIvZXZlbnQtbGluay1tb2RhbC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLGtCQUFrQjtZQUN0Qjs7QUFFWixvWUFBb1kiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIDpob3N0IHtcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICAgICAgICB9XG4gICAgICAgICJdLCJzb3VyY2VSb290IjoiIn0= */"]
  });
}

/***/ }),

/***/ 6727:
/*!********************************************!*\
  !*** ./libs/events/src/lib/event.class.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CalendarEvent: () => (/* binding */ CalendarEvent),
/* harmony export */   setDefaultCreator: () => (/* binding */ setDefaultCreator)
/* harmony export */ });
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! date-fns */ 99908);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! date-fns */ 5647);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! date-fns */ 49675);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! date-fns */ 1874);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! date-fns */ 33240);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! date-fns */ 56441);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! date-fns */ 31257);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! date-fns */ 45726);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! date-fns */ 55882);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! date-fns */ 83680);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! date-fns */ 91543);
/* harmony import */ var libs_catering_src_lib_catering_order_class__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! libs/catering/src/lib/catering-order.class */ 75555);
/* harmony import */ var libs_spaces_src_lib_space_class__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! libs/spaces/src/lib/space.class */ 30735);
/* harmony import */ var libs_users_src_lib_user_class__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! libs/users/src/lib/user.class */ 93693);
/* harmony import */ var _helpers__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./helpers */ 37420);
/* harmony import */ var libs_assets_src_lib_asset_request_class__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! libs/assets/src/lib/asset-request.class */ 33747);







let _default_user = {
  id: 'default',
  name: 'Default User'
};
function setDefaultCreator(user) {
  if (user) _default_user = user;
}
const DAYS_OF_WEEK = ['sunday', 'monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday'];
/** User's calendar event/booking */
class CalendarEvent {
  get images() {
    return this.extension_data.images || [];
  }
  get is_all_day() {
    return this.all_day || this.duration >= 12 * 60;
  }
  get view_access() {
    return this.extension_data.view_access || 'PRIVATE';
  }
  /** Get field from extension data */
  ext(key) {
    return this.extension_data[key];
  }
  constructor(data = {}) {
    this._valid_asset_cache = [];
    this._valid_cache_expiry = 0;
    this.id = data.event_id || data.id || '';
    this.event_start = data.event_start || (0,date_fns__WEBPACK_IMPORTED_MODULE_6__.getUnixTime)(data.date || (0,date_fns__WEBPACK_IMPORTED_MODULE_7__.roundToNearestMinutes)((0,date_fns__WEBPACK_IMPORTED_MODULE_8__.addMinutes)(new Date(), 3), {
      nearestTo: 5
    }));
    this.event_end = data.event_end || (0,date_fns__WEBPACK_IMPORTED_MODULE_6__.getUnixTime)((0,date_fns__WEBPACK_IMPORTED_MODULE_8__.addMinutes)(this.event_start * 1000, data.duration || 30));
    this.calendar = data.calendar || '';
    this.creator = (data.creator || _default_user.email)?.toLowerCase() || '';
    this.host = (data.host || this.creator || data.host_email || _default_user.email || '').toLowerCase();
    const attendees = data.attendees || [];
    this.attendees = attendees.filter(user => !user.resource).map(u => new libs_users_src_lib_user_class__WEBPACK_IMPORTED_MODULE_3__.User(u));
    this.resources = (0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.unique)(data.resources || attendees.filter(user => user.resource).map(s => new libs_spaces_src_lib_space_class__WEBPACK_IMPORTED_MODULE_2__.Space(s)), 'email') || [];
    this.title = data.title;
    this.body = data.body || '';
    this.private = !!data.private;
    this.all_day = !!data.all_day;
    this.date = this.event_start * 1000 || this.date;
    this.date_end = this.event_end * 1000 || this.date_end;
    this.duration = (0,date_fns__WEBPACK_IMPORTED_MODULE_9__.differenceInMinutes)(this.date_end, this.date);
    if (this.all_day) {
      this.date = (0,date_fns__WEBPACK_IMPORTED_MODULE_10__.startOfDay)(this.date).getTime();
      this.duration = Math.max(24 * 60 - 1, this.duration - 1);
      this.date_end = (0,date_fns__WEBPACK_IMPORTED_MODULE_11__.endOfDay)((0,date_fns__WEBPACK_IMPORTED_MODULE_8__.addMinutes)(this.date, this.duration).valueOf() - 1).getTime();
    }
    const matches = this.body.match(/\[ID\|([^\]]+)\]/);
    const associated_id = matches ? matches[1] : null;
    this.timezone = data.timezone || Intl.DateTimeFormat().resolvedOptions().timeZone;
    this.meeting_url = data.meeting_url || data.online_meeting_url || '';
    this.meeting_id = associated_id || data.meeting_id || data.online_meeting_id || '';
    this.meeting_provider = data.meeting_provider || data.online_meeting_provider || '';
    this.recurring = !!data.recurring;
    this.recurring_event_id = data.recurring_event_id || '';
    this.organiser = this.attendees.find(user => user.email === this.host);
    this.from_bookings = data.from_bookings ?? false;
    this.master = data.master ? new CalendarEvent(data.master) : null;
    this.mailbox = data.mailbox || '';
    this.ical_uid = data.ical_uid;
    this.linked_bookings = data.linked_bookings || [];
    this.update_master = data.update_master ?? false;
    if (data.recurring) {
      this.recurrence = {
        start: this.event_start * 1000 || new Date(data.recurrence.range_start * 1000).valueOf(),
        end: data.recurrence.end || new Date(data.recurrence.range_end * 1000).valueOf(),
        interval: data.recurrence.interval,
        pattern: data.recurrence.pattern,
        occurrences: data.recurrence.occurrences,
        days_of_week: data.recurrence.days_of_week?.map(_ => typeof _ === 'number' ? _ : DAYS_OF_WEEK.indexOf(_)) || []
      };
    } else {
      this.recurrence = {};
    }
    const system = data.system;
    if (system?.email && !this.resources.find(_ => _.email === system.email)) {
      this.resources.push(new libs_spaces_src_lib_space_class__WEBPACK_IMPORTED_MODULE_2__.Space(system));
    }
    this.system = system || this.resources[0] || null;
    if (!system && data.system_id) {
      this.system = {
        id: data.system_id
      };
    }
    this.old_system = data.old_system || data.system;
    this.is_system_event = this.body.includes('main_event_id');
    this.attachments = data.attachments || [];
    this.extension_data = data.extension_data || {};
    this.status = (0,_helpers__WEBPACK_IMPORTED_MODULE_4__.eventStatus)({
      ...data,
      ...this
    }) || 'none';
    this.location = data.location || this.space?.display_name || this.space?.name || '';
    this.setup_time = data.setup_time || 0;
    this.breakdown_time = data.breakdown_time || 0;
    this.type = this.status === 'declined' ? 'cancelled' : this.attendees.find(_ => _.is_external) ? 'external' : 'internal';
    for (const key in data) {
      if (!(key in this)) {
        this.extension_data[key] = data[key] || this.extension_data[key];
      }
    }
    const simple_event = {
      date: this.date,
      duration: this.duration,
      date_end: this.date_end,
      all_day: this.all_day,
      space: this.space,
      organiser: this.organiser
    };
    this.extension_data.catering = (this.extension_data.catering || []).map(i => new libs_catering_src_lib_catering_order_class__WEBPACK_IMPORTED_MODULE_1__.CateringOrder({
      ...i,
      event: simple_event
    }));
    const linked_assets = this.linked_bookings.filter(_ => _.booking_type === 'asset-request').map(_ => _.extension_data?.request).filter(_ => !!_);
    const asset_requests = (linked_assets.length ? linked_assets : this.extension_data.assets) || [];
    this.extension_data.images = this.extension_data.images || data.images || [];
    this.extension_data.assets = asset_requests.map(i => new libs_assets_src_lib_asset_request_class__WEBPACK_IMPORTED_MODULE_5__.AssetRequest({
      ...i,
      event: simple_event
    }));
  }
  /** List of external attendees associated with the event */
  get guests() {
    return this.attendees.filter(f => !!f.is_external);
  }
  /** Primary space associated with the booking */
  get space() {
    return this.resources[0] || null;
  }
  get is_today() {
    return (0,date_fns__WEBPACK_IMPORTED_MODULE_12__.isSameDay)(this.date, Date.now());
  }
  get valid_catering() {
    return (this.ext('catering') || []).filter(order => order.deliver_at < this.date_end);
  }
  get valid_assets() {
    if (this._valid_cache_expiry > Date.now() && this._valid_asset_cache.length) {
      return this._valid_asset_cache;
    }
    const list = this.linked_bookings;
    this._valid_asset_cache = (this.ext('assets') || []).map(request => new libs_assets_src_lib_asset_request_class__WEBPACK_IMPORTED_MODULE_5__.AssetRequest({
      ...request,
      event: this
    })).filter(request => request.deliver_at < this.date_end).map(request => {
      const booking = list.find(_ => _.extension_data.request_id === request.id);
      if (booking) {
        request.state = booking.approved ? 'approved' : booking.rejected ? 'rejected' : 'pending';
      }
      return request;
    });
    this._valid_cache_expiry = (0,date_fns__WEBPACK_IMPORTED_MODULE_8__.addMinutes)(Date.now(), 5).valueOf();
    return this._valid_asset_cache;
  }
  /**
   * Convert class data to simple JSON object
   */
  toJSON() {
    const obj = {
      ...this
    };
    const date = this.all_day ? (0,date_fns__WEBPACK_IMPORTED_MODULE_10__.startOfDay)(this.date) : this.date;
    const end = this.all_day ? (0,date_fns__WEBPACK_IMPORTED_MODULE_11__.endOfDay)(this.date_end).valueOf() + 1 : this.date_end;
    obj.event_start = (0,date_fns__WEBPACK_IMPORTED_MODULE_6__.getUnixTime)(date);
    obj.event_end = (0,date_fns__WEBPACK_IMPORTED_MODULE_6__.getUnixTime)(end);
    const attendees = this.attendees;
    this.recurring = this.recurrence?.pattern && this.recurrence._pattern !== 'none';
    if (this.recurring) {
      obj.recurrence = (0,_helpers__WEBPACK_IMPORTED_MODULE_4__.parseRecurrence)({
        ...this.recurrence,
        start: this.date
      });
      delete obj.recurrence.start;
      delete obj.recurrence.end;
    }
    obj.recurrence = obj.recurrence ? Object.keys(obj.recurrence).length ? obj.recurrence : null : null;
    obj.attendees = (0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.unique)([...attendees, ...this.resources.map(_ => ({
      ..._,
      resource: true
    }))], 'email');
    if (this.all_day) {
      obj.setup_time = 0;
      obj.breakdown_time = 0;
      obj.extension_data.all_day_date = (0,date_fns__WEBPACK_IMPORTED_MODULE_13__.format)(date, 'yyyy-MM-dd');
    }
    obj.extension_data.catering = obj.extension_data.catering.map(i => new libs_catering_src_lib_catering_order_class__WEBPACK_IMPORTED_MODULE_1__.CateringOrder({
      ...i,
      event: null
    }));
    obj.extension_data.assets = obj.extension_data.assets.map(i => new libs_assets_src_lib_asset_request_class__WEBPACK_IMPORTED_MODULE_5__.AssetRequest({
      ...i,
      event: null
    }));
    obj.system_id = this.system?.id;
    for (const key of ['catering', 'date', 'date_end', 'duration', 'status', 'linked_bookings', '_valid_asset_cache', '_valid_cache_expiry', 'type']) {
      if (key in obj) delete obj[key];
    }
    if (!obj.update_master) delete obj.recurring_event_id;
    (0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.removeEmptyFields)(obj);
    return obj;
  }
  /** Status of the booking */
  get state() {
    const now = new Date();
    const date = this.date;
    if ((0,date_fns__WEBPACK_IMPORTED_MODULE_14__.isBefore)(now, (0,date_fns__WEBPACK_IMPORTED_MODULE_15__.add)(date, {
      minutes: -15
    }))) return 'future';
    if ((0,date_fns__WEBPACK_IMPORTED_MODULE_14__.isBefore)(now, date)) return 'upcoming';
    if ((0,date_fns__WEBPACK_IMPORTED_MODULE_14__.isBefore)(now, (0,date_fns__WEBPACK_IMPORTED_MODULE_15__.add)(date, {
      minutes: 15
    }))) return 'started';
    if ((0,date_fns__WEBPACK_IMPORTED_MODULE_14__.isBefore)(now, (0,date_fns__WEBPACK_IMPORTED_MODULE_15__.add)(date, {
      minutes: this.duration
    }))) return 'in_progress';
    return 'done';
  }
  get can_check_in() {
    const now = new Date();
    return this.is_today || (0,date_fns__WEBPACK_IMPORTED_MODULE_16__.isAfter)(now, (0,date_fns__WEBPACK_IMPORTED_MODULE_8__.addMinutes)(this.date, -5)) && (0,date_fns__WEBPACK_IMPORTED_MODULE_14__.isBefore)(now, (0,date_fns__WEBPACK_IMPORTED_MODULE_8__.addMinutes)(this.date, this.duration));
  }
}

/***/ }),

/***/ 59451:
/*!*************************************************!*\
  !*** ./libs/events/src/lib/event.interfaces.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);


/***/ }),

/***/ 51416:
/*!******************************************!*\
  !*** ./libs/events/src/lib/events.fn.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   addEventGuest: () => (/* binding */ addEventGuest),
/* harmony export */   approveEvent: () => (/* binding */ approveEvent),
/* harmony export */   checkinEventGuest: () => (/* binding */ checkinEventGuest),
/* harmony export */   createEvent: () => (/* binding */ createEvent),
/* harmony export */   declineEvent: () => (/* binding */ declineEvent),
/* harmony export */   getEventMetadata: () => (/* binding */ getEventMetadata),
/* harmony export */   isSpaceAvailable: () => (/* binding */ isSpaceAvailable),
/* harmony export */   queryAllEvents: () => (/* binding */ queryAllEvents),
/* harmony export */   queryEventGuests: () => (/* binding */ queryEventGuests),
/* harmony export */   queryEvents: () => (/* binding */ queryEvents),
/* harmony export */   querySpaceAvailability: () => (/* binding */ querySpaceAvailability),
/* harmony export */   rejectEvent: () => (/* binding */ rejectEvent),
/* harmony export */   removeEvent: () => (/* binding */ removeEvent),
/* harmony export */   removeEventGuest: () => (/* binding */ removeEventGuest),
/* harmony export */   saveEvent: () => (/* binding */ saveEvent),
/* harmony export */   showEvent: () => (/* binding */ showEvent),
/* harmony export */   updateEvent: () => (/* binding */ updateEvent),
/* harmony export */   updateEventMetadata: () => (/* binding */ updateEventMetadata)
/* harmony export */ });
/* harmony import */ var _home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 89204);
/* harmony import */ var _placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @placeos/ts-client */ 35713);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! rxjs */ 71536);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! rxjs */ 68824);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! rxjs/operators */ 35443);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! rxjs/operators */ 29314);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! rxjs/operators */ 71963);
/* harmony import */ var libs_common_src_lib_api__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! libs/common/src/lib/api */ 38385);
/* harmony import */ var libs_users_src_lib_user_class__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! libs/users/src/lib/user.class */ 93693);
/* harmony import */ var _event_class__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./event.class */ 6727);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! date-fns */ 99908);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! date-fns */ 49675);
/* harmony import */ var libs_calendar_src_lib_calendar_fn__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! libs/calendar/src/lib/calendar.fn */ 458);









const EVENTS_ENDPOINT = `/api/staff/v1/events`;
/**
 * List events
 * @param q Parameters to pass to the API request
 */
function queryEvents(q) {
  const query = (0,libs_common_src_lib_api__WEBPACK_IMPORTED_MODULE_2__.toQueryString)(q);
  return (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.get)(`${EVENTS_ENDPOINT}${query ? '?' + query : ''}`).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.map)(list => list.map(e => new _event_class__WEBPACK_IMPORTED_MODULE_4__.CalendarEvent(e))), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.catchError)(_ => (0,rxjs__WEBPACK_IMPORTED_MODULE_8__.of)([])));
}
function queryAllEvents(q) {
  return (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.query)({
    query_params: q,
    fn: item => new _event_class__WEBPACK_IMPORTED_MODULE_4__.CalendarEvent(item),
    endpoint: EVENTS_ENDPOINT,
    path: ''
  }).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.switchMap)( /*#__PURE__*/function () {
    var _ref = (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* ({
      data,
      next
    }) {
      let list = [...data];
      while (next) {
        const resp = yield next().toPromise();
        data = resp.data;
        next = resp.next;
        list = [...list, ...data];
      }
      return list;
    });
    return function (_x) {
      return _ref.apply(this, arguments);
    };
  }()), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.catchError)(_ => (0,rxjs__WEBPACK_IMPORTED_MODULE_8__.of)([])));
}
/**
 * Get event details
 * @param id ID of the event to grab
 * @param q Parameters to pass to the API request
 */
function showEvent(id, q = {}) {
  const query = (0,libs_common_src_lib_api__WEBPACK_IMPORTED_MODULE_2__.toQueryString)(q);
  return (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.get)(`${EVENTS_ENDPOINT}/${encodeURIComponent(id)}${query ? '?' + query : ''}`).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.map)(item => new _event_class__WEBPACK_IMPORTED_MODULE_4__.CalendarEvent(item)));
}
/**
 * Create new calendar event and add it to the database
 * @param data New calendar event fields
 */
function createEvent(data) {
  return (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.post)(`${EVENTS_ENDPOINT}`, new _event_class__WEBPACK_IMPORTED_MODULE_4__.CalendarEvent(data).toJSON()).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.map)(item => new _event_class__WEBPACK_IMPORTED_MODULE_4__.CalendarEvent(item)));
}
/**
 * Update an existing calendar event
 * @param id ID of the event to update
 * @param data New values for event fields
 * @param q Parameters to pass to the API request
 * @param method HTTP verb to use with API request
 */
function updateEvent(id, data, q = {}, method = 'patch') {
  const query = (0,libs_common_src_lib_api__WEBPACK_IMPORTED_MODULE_2__.toQueryString)(q);
  return (method === 'patch' ? _placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.patch : _placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.put)(`${EVENTS_ENDPOINT}/${encodeURIComponent(id)}${query ? '?' + query : ''}`, new _event_class__WEBPACK_IMPORTED_MODULE_4__.CalendarEvent(data).toJSON()).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.map)(item => new _event_class__WEBPACK_IMPORTED_MODULE_4__.CalendarEvent(item)));
}
/**
 * Save changes to or create a calendar event
 * @param data State of the calendar event
 * @param q Parameters to pass to the API request
 */
const saveEvent = (data, q) => {
  const id = data.update_master ? data.recurring_event_id || data.id : data.id;
  delete data?.status;
  return id ? updateEvent(id, {
    ...data,
    id
  }, q) : createEvent(data);
};
/**
 * Remove calendar event from the database
 * @param id ID of the event to remove
 * @param q Parameters to pass to the API request
 */
function removeEvent(id, q = {}) {
  const query = (0,libs_common_src_lib_api__WEBPACK_IMPORTED_MODULE_2__.toQueryString)(q);
  return (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.del)(`${EVENTS_ENDPOINT}/${encodeURIComponent(id)}${query ? '?' + query : ''}`, {
    response_type: 'void'
  });
}
/**
 * Set the approval state of the event to approved
 * @param id ID of the event to approve
 * @param system_id Associated system to approve
 */
function approveEvent(id, system_id) {
  return (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.post)(`${EVENTS_ENDPOINT}/${encodeURIComponent(id)}/approve?system_id=${encodeURIComponent(system_id)}`, '').pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.map)(item => new _event_class__WEBPACK_IMPORTED_MODULE_4__.CalendarEvent(item)));
}
/**
 * Set the approval state of the event to rejected
 * @param id ID of the event to reject
 * @param system_id Associated system to reject
 */
function rejectEvent(id, system_id) {
  return (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.post)(`${EVENTS_ENDPOINT}/${encodeURIComponent(id)}/reject?system_id=${encodeURIComponent(system_id)}`, '').pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.map)(item => new _event_class__WEBPACK_IMPORTED_MODULE_4__.CalendarEvent(item)));
}
/**
 * Decline the given event
 * @param id ID of the event to decline
 * @returns
 */
function declineEvent(id, query = {}) {
  const q = (0,libs_common_src_lib_api__WEBPACK_IMPORTED_MODULE_2__.toQueryString)(query);
  return (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.post)(`${EVENTS_ENDPOINT}/${encodeURIComponent(id)}/decline${q ? '?' + q : ''}`, '').pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.map)(item => new _event_class__WEBPACK_IMPORTED_MODULE_4__.CalendarEvent(item)));
}
/**
 * List guests for event
 * @param id ID of the event to grab
 * @param q Parameters to pass to the API request
 */
function queryEventGuests(id, q = {}) {
  const query = (0,libs_common_src_lib_api__WEBPACK_IMPORTED_MODULE_2__.toQueryString)(q);
  return (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.get)(`${EVENTS_ENDPOINT}/${encodeURIComponent(id)}/guests${query ? '?' + query : ''}`).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.map)(list => list.map(item => new libs_users_src_lib_user_class__WEBPACK_IMPORTED_MODULE_3__.GuestUser(item))));
}
/**
 * Set the checkin state of an event guest
 * @param id ID of the event to grab
 * @param guest_id ID of the guest to update
 * @param state New checkin state of the guest
 * @param q Parameters to pass to the API request
 */
function checkinEventGuest(id, guest_id, state, q = {}) {
  const query = (0,libs_common_src_lib_api__WEBPACK_IMPORTED_MODULE_2__.toQueryString)({
    ...q,
    state
  });
  return (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.post)(`${EVENTS_ENDPOINT}/${encodeURIComponent(id)}/guests/${guest_id}/checkin${query ? '?' + query : ''}`, '').pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.map)(item => new libs_users_src_lib_user_class__WEBPACK_IMPORTED_MODULE_3__.GuestUser(item)));
}
/**
 * Add a guest to a booking
 * @param id ID of the booking
 * @param guest Guest to add to the booking
 */
function addEventGuest(id, guest, q = {}) {
  const query = (0,libs_common_src_lib_api__WEBPACK_IMPORTED_MODULE_2__.toQueryString)(q);
  return (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.post)(`${EVENTS_ENDPOINT}/${encodeURIComponent(id)}/attendee${query ? '?' + query : ''}`, guest).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.map)(item => new libs_users_src_lib_user_class__WEBPACK_IMPORTED_MODULE_3__.GuestUser(item)));
}
/**
 * Remove an attendee from a booking
 * @param id ID of the booking
 * @param guest Guest to remove from the booking
 */
function removeEventGuest(id, guest, q = {}) {
  const query = (0,libs_common_src_lib_api__WEBPACK_IMPORTED_MODULE_2__.toQueryString)(q);
  return (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.del)(`${EVENTS_ENDPOINT}/${encodeURIComponent(id)}/attendee/${encodeURIComponent(guest.email)}${query ? '?' + query : ''}`).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.map)(item => new libs_users_src_lib_user_class__WEBPACK_IMPORTED_MODULE_3__.GuestUser(item)));
}
/**
 * Get the extension data for an event
 * @param id ID of the event
 * @param system_id  ID of the system associated with the event
 * @param query Extra query parameters to pass to the API request
 */
function getEventMetadata(id, system_id, query = {}) {
  const q = (0,libs_common_src_lib_api__WEBPACK_IMPORTED_MODULE_2__.toQueryString)({
    ...query
  });
  return (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.get)(`${EVENTS_ENDPOINT}/${encodeURIComponent(id)}/metadata/${encodeURIComponent(system_id)}${q ? '?' + q : ''}`).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.map)(item => item));
}
/**
 * Update the extension data for an event
 * @param id ID of the event
 * @param system_id ID of the system associated with the event
 * @param metadata New metadata value to merge to exisiting
 * @param query Extra query parameters to pass to the API request
 */
function updateEventMetadata(id, system_id, metadata, query = {}) {
  const q = (0,libs_common_src_lib_api__WEBPACK_IMPORTED_MODULE_2__.toQueryString)({
    ...query
  });
  return (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.patch)(`${EVENTS_ENDPOINT}/${encodeURIComponent(id)}/metadata/${encodeURIComponent(system_id)}${q ? '?' + q : ''}`, metadata).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.map)(item => item));
}
/**
 * Check whether a selected space is available
 * @param id ID of the space to check
 * @param start Start of the availability period to check
 * @param duration Duration of the availability block in minutes
 * @param ignore ID of a booking to ignore when checking availability
 */
function isSpaceAvailable(id, start, duration, ignore) {
  return queryEvents({
    system_ids: id,
    period_start: (0,date_fns__WEBPACK_IMPORTED_MODULE_10__.getUnixTime)(start),
    period_end: (0,date_fns__WEBPACK_IMPORTED_MODULE_10__.getUnixTime)((0,date_fns__WEBPACK_IMPORTED_MODULE_11__.addMinutes)(start, duration))
  }).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.map)(_ => _.filter(_ => _.id !== ignore).length === 0));
}
/**
 * Check whether a list of spaces are available
 * @param id_list List of space IDs to check
 * @param start Start of the availability period to check
 * @param duration Duration of the availability block in minutes
 * @param ignore ID of a booking to ignore when checking availability
 */
function querySpaceAvailability(id_list, start, duration, ignore, type, ignore_period = [0, 0]) {
  const end = (0,date_fns__WEBPACK_IMPORTED_MODULE_11__.addMinutes)(start, duration).valueOf();
  return (0,rxjs__WEBPACK_IMPORTED_MODULE_12__.combineLatest)([(0,libs_calendar_src_lib_calendar_fn__WEBPACK_IMPORTED_MODULE_5__.queryCalendarAvailability)({
    system_ids: id_list.join(),
    period_start: (0,date_fns__WEBPACK_IMPORTED_MODULE_10__.getUnixTime)(start),
    period_end: (0,date_fns__WEBPACK_IMPORTED_MODULE_10__.getUnixTime)(end)
  }).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.catchError)(_ => (0,rxjs__WEBPACK_IMPORTED_MODULE_8__.of)([]))), ignore && id_list.includes(ignore) ? (0,libs_calendar_src_lib_calendar_fn__WEBPACK_IMPORTED_MODULE_5__.querySpaceFreeBusy)({
    period_start: (0,date_fns__WEBPACK_IMPORTED_MODULE_10__.getUnixTime)(start),
    period_end: (0,date_fns__WEBPACK_IMPORTED_MODULE_10__.getUnixTime)(end),
    system_ids: ignore
  }) : (0,rxjs__WEBPACK_IMPORTED_MODULE_8__.of)([])]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.map)(([spaces, ignore_check]) => {
    const short_list = id_list.map(id => !!spaces.find(s => s.id === id || s.resource?.id === id));
    if (ignore_check.length && ignore_check[0].id === ignore && id_list.includes(ignore) && ignore_check[0].inUseAt(ignore_period[0] || start, ignore_period[1] || duration)) {
      short_list[id_list.indexOf(ignore)] = true;
    }
    return short_list;
  }));
}

/***/ }),

/***/ 2704:
/*!**********************************************!*\
  !*** ./libs/events/src/lib/events.module.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SharedEventsModule: () => (/* binding */ SharedEventsModule)
/* harmony export */ });
/* harmony import */ var _home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 89204);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! @angular/forms */ 34456);
/* harmony import */ var _angular_material_button__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! @angular/material/button */ 84175);
/* harmony import */ var _angular_material_core__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! @angular/material/core */ 74646);
/* harmony import */ var _angular_material_datepicker__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! @angular/material/datepicker */ 61977);
/* harmony import */ var _angular_material_dialog__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! @angular/material/dialog */ 12587);
/* harmony import */ var _angular_material_form_field__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! @angular/material/form-field */ 24950);
/* harmony import */ var _angular_material_input__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! @angular/material/input */ 95541);
/* harmony import */ var _angular_material_progress_spinner__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! @angular/material/progress-spinner */ 41134);
/* harmony import */ var _angular_material_radio__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! @angular/material/radio */ 53804);
/* harmony import */ var libs_form_fields_src_lib_form_fields_module__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! libs/form-fields/src/lib/form-fields.module */ 77066);
/* harmony import */ var libs_components_src_lib_components_module__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! libs/components/src/lib/components.module */ 14974);
/* harmony import */ var libs_spaces_src_lib_spaces_module__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! libs/spaces/src/lib/spaces.module */ 34360);
/* harmony import */ var _attendee_list_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./attendee-list.component */ 47249);
/* harmony import */ var _event_card_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./event-card.component */ 21765);
/* harmony import */ var _event_details_modal_component__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./event-details-modal.component */ 54035);
/* harmony import */ var _event_link_modal_component__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./event-link-modal.component */ 22671);
/* harmony import */ var _setup_breakdown_modal_component__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./setup-breakdown-modal.component */ 50711);
/* harmony import */ var _group_event_card_component__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./group-event-card.component */ 27535);
/* harmony import */ var _group_event_details_modal_component__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./group-event-details-modal.component */ 58094);
/* harmony import */ var _event_class__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./event.class */ 6727);
/* harmony import */ var libs_common_src_lib_user_state__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! libs/common/src/lib/user-state */ 37958);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! rxjs/operators */ 57871);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../components/src/lib/icon.component */ 69434);
/* harmony import */ var _components_src_lib_user_avatar_component__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../components/src/lib/user-avatar.component */ 23574);
/* harmony import */ var _components_src_lib_interactive_map_component__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../components/src/lib/interactive-map.component */ 24918);
/* harmony import */ var _components_src_lib_image_carousel_component__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../../components/src/lib/image-carousel.component */ 65277);
/* harmony import */ var _components_src_lib_status_pill_component__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../../components/src/lib/status-pill.component */ 50907);
/* harmony import */ var _components_src_lib_binding_directive__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../../../components/src/lib/binding.directive */ 83938);
/* harmony import */ var _angular_material_menu__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! @angular/material/menu */ 31034);
/* harmony import */ var _angular_material_tooltip__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! @angular/material/tooltip */ 80640);
/* harmony import */ var _components_src_lib_sanitise_pipe__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../../../components/src/lib/sanitise.pipe */ 54616);
/* harmony import */ var _components_src_lib_authenticated_image_directive__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../../../components/src/lib/authenticated-image.directive */ 93208);
/* harmony import */ var _spaces_src_lib_space_pipe__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../../../spaces/src/lib/space.pipe */ 22011);







































const COMPONENTS = [_event_details_modal_component__WEBPACK_IMPORTED_MODULE_6__.EventDetailsModalComponent, _attendee_list_component__WEBPACK_IMPORTED_MODULE_4__.AttendeeListComponent, _event_card_component__WEBPACK_IMPORTED_MODULE_5__.EventCardComponent, _event_link_modal_component__WEBPACK_IMPORTED_MODULE_7__.EventLinkModalComponent, _setup_breakdown_modal_component__WEBPACK_IMPORTED_MODULE_8__.SetupBreakdownModalComponent, _group_event_details_modal_component__WEBPACK_IMPORTED_MODULE_10__.GroupEventDetailsModalComponent, _group_event_card_component__WEBPACK_IMPORTED_MODULE_9__.GroupEventCardComponent];
class SharedEventsModule {
  ngOnInit() {
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      yield libs_common_src_lib_user_state__WEBPACK_IMPORTED_MODULE_12__.current_user.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_22__.first)(_ => !!_)).toPromise();
      (0,_event_class__WEBPACK_IMPORTED_MODULE_11__.setDefaultCreator)((0,libs_common_src_lib_user_state__WEBPACK_IMPORTED_MODULE_12__.currentUser)());
    })();
  }
  static #_ = this.ɵfac = function SharedEventsModule_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || SharedEventsModule)();
  };
  static #_2 = this.ɵmod = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_23__["ɵɵdefineNgModule"]({
    type: SharedEventsModule
  });
  static #_3 = this.ɵinj = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_23__["ɵɵdefineInjector"]({
    providers: [_angular_forms__WEBPACK_IMPORTED_MODULE_24__.ReactiveFormsModule],
    imports: [_angular_common__WEBPACK_IMPORTED_MODULE_25__.CommonModule, _angular_forms__WEBPACK_IMPORTED_MODULE_24__.FormsModule, _angular_forms__WEBPACK_IMPORTED_MODULE_24__.ReactiveFormsModule, _angular_material_radio__WEBPACK_IMPORTED_MODULE_26__.MatRadioModule, _angular_material_input__WEBPACK_IMPORTED_MODULE_27__.MatInputModule, _angular_material_form_field__WEBPACK_IMPORTED_MODULE_28__.MatFormFieldModule, _angular_material_datepicker__WEBPACK_IMPORTED_MODULE_29__.MatDatepickerModule, _angular_material_button__WEBPACK_IMPORTED_MODULE_30__.MatButtonModule, _angular_material_dialog__WEBPACK_IMPORTED_MODULE_31__.MatDialogModule, _angular_material_progress_spinner__WEBPACK_IMPORTED_MODULE_32__.MatProgressSpinnerModule, libs_form_fields_src_lib_form_fields_module__WEBPACK_IMPORTED_MODULE_1__.FormFieldsModule, libs_components_src_lib_components_module__WEBPACK_IMPORTED_MODULE_2__.ComponentsModule, _angular_material_core__WEBPACK_IMPORTED_MODULE_33__.MatRippleModule, libs_spaces_src_lib_spaces_module__WEBPACK_IMPORTED_MODULE_3__.SharedSpacesModule]
  });
}
(function () {
  (typeof ngJitMode === "undefined" || ngJitMode) && _angular_core__WEBPACK_IMPORTED_MODULE_23__["ɵɵsetNgModuleScope"](SharedEventsModule, {
    declarations: [_event_details_modal_component__WEBPACK_IMPORTED_MODULE_6__.EventDetailsModalComponent, _attendee_list_component__WEBPACK_IMPORTED_MODULE_4__.AttendeeListComponent, _event_card_component__WEBPACK_IMPORTED_MODULE_5__.EventCardComponent, _event_link_modal_component__WEBPACK_IMPORTED_MODULE_7__.EventLinkModalComponent, _setup_breakdown_modal_component__WEBPACK_IMPORTED_MODULE_8__.SetupBreakdownModalComponent, _group_event_details_modal_component__WEBPACK_IMPORTED_MODULE_10__.GroupEventDetailsModalComponent, _group_event_card_component__WEBPACK_IMPORTED_MODULE_9__.GroupEventCardComponent],
    imports: [_angular_common__WEBPACK_IMPORTED_MODULE_25__.CommonModule, _angular_forms__WEBPACK_IMPORTED_MODULE_24__.FormsModule, _angular_forms__WEBPACK_IMPORTED_MODULE_24__.ReactiveFormsModule, _angular_material_radio__WEBPACK_IMPORTED_MODULE_26__.MatRadioModule, _angular_material_input__WEBPACK_IMPORTED_MODULE_27__.MatInputModule, _angular_material_form_field__WEBPACK_IMPORTED_MODULE_28__.MatFormFieldModule, _angular_material_datepicker__WEBPACK_IMPORTED_MODULE_29__.MatDatepickerModule, _angular_material_button__WEBPACK_IMPORTED_MODULE_30__.MatButtonModule, _angular_material_dialog__WEBPACK_IMPORTED_MODULE_31__.MatDialogModule, _angular_material_progress_spinner__WEBPACK_IMPORTED_MODULE_32__.MatProgressSpinnerModule, libs_form_fields_src_lib_form_fields_module__WEBPACK_IMPORTED_MODULE_1__.FormFieldsModule, libs_components_src_lib_components_module__WEBPACK_IMPORTED_MODULE_2__.ComponentsModule, _angular_material_core__WEBPACK_IMPORTED_MODULE_33__.MatRippleModule, libs_spaces_src_lib_spaces_module__WEBPACK_IMPORTED_MODULE_3__.SharedSpacesModule],
    exports: [_event_details_modal_component__WEBPACK_IMPORTED_MODULE_6__.EventDetailsModalComponent, _attendee_list_component__WEBPACK_IMPORTED_MODULE_4__.AttendeeListComponent, _event_card_component__WEBPACK_IMPORTED_MODULE_5__.EventCardComponent, _event_link_modal_component__WEBPACK_IMPORTED_MODULE_7__.EventLinkModalComponent, _setup_breakdown_modal_component__WEBPACK_IMPORTED_MODULE_8__.SetupBreakdownModalComponent, _group_event_details_modal_component__WEBPACK_IMPORTED_MODULE_10__.GroupEventDetailsModalComponent, _group_event_card_component__WEBPACK_IMPORTED_MODULE_9__.GroupEventCardComponent]
  });
})();
_angular_core__WEBPACK_IMPORTED_MODULE_23__["ɵɵsetComponentScope"](_event_details_modal_component__WEBPACK_IMPORTED_MODULE_6__.EventDetailsModalComponent, [_angular_common__WEBPACK_IMPORTED_MODULE_25__.NgForOf, _angular_common__WEBPACK_IMPORTED_MODULE_25__.NgIf, _angular_material_dialog__WEBPACK_IMPORTED_MODULE_31__.MatDialogClose, _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_13__.IconComponent, _components_src_lib_user_avatar_component__WEBPACK_IMPORTED_MODULE_14__.UserAvatarComponent, _components_src_lib_interactive_map_component__WEBPACK_IMPORTED_MODULE_15__.InteractiveMapComponent, _components_src_lib_image_carousel_component__WEBPACK_IMPORTED_MODULE_16__.ImageCarouselComponent, _components_src_lib_status_pill_component__WEBPACK_IMPORTED_MODULE_17__.StatusPillComponent, _components_src_lib_binding_directive__WEBPACK_IMPORTED_MODULE_18__.BindingDirective, _angular_material_menu__WEBPACK_IMPORTED_MODULE_34__.MatMenu, _angular_material_menu__WEBPACK_IMPORTED_MODULE_34__.MatMenuItem, _angular_material_menu__WEBPACK_IMPORTED_MODULE_34__.MatMenuTrigger, _angular_material_core__WEBPACK_IMPORTED_MODULE_33__.MatRipple, _angular_material_tooltip__WEBPACK_IMPORTED_MODULE_35__.MatTooltip, _attendee_list_component__WEBPACK_IMPORTED_MODULE_4__.AttendeeListComponent], [_angular_common__WEBPACK_IMPORTED_MODULE_25__.CurrencyPipe, _angular_common__WEBPACK_IMPORTED_MODULE_25__.DatePipe, _components_src_lib_sanitise_pipe__WEBPACK_IMPORTED_MODULE_19__.SanitizePipe]);
_angular_core__WEBPACK_IMPORTED_MODULE_23__["ɵɵsetComponentScope"](_attendee_list_component__WEBPACK_IMPORTED_MODULE_4__.AttendeeListComponent, [_angular_common__WEBPACK_IMPORTED_MODULE_25__.NgForOf, _angular_common__WEBPACK_IMPORTED_MODULE_25__.NgIf, _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_13__.IconComponent, _components_src_lib_user_avatar_component__WEBPACK_IMPORTED_MODULE_14__.UserAvatarComponent, _angular_material_core__WEBPACK_IMPORTED_MODULE_33__.MatRipple, _angular_material_tooltip__WEBPACK_IMPORTED_MODULE_35__.MatTooltip], []);
_angular_core__WEBPACK_IMPORTED_MODULE_23__["ɵɵsetComponentScope"](_event_card_component__WEBPACK_IMPORTED_MODULE_5__.EventCardComponent, [_angular_common__WEBPACK_IMPORTED_MODULE_25__.NgForOf, _angular_common__WEBPACK_IMPORTED_MODULE_25__.NgIf, _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_13__.IconComponent, _components_src_lib_user_avatar_component__WEBPACK_IMPORTED_MODULE_14__.UserAvatarComponent, _components_src_lib_status_pill_component__WEBPACK_IMPORTED_MODULE_17__.StatusPillComponent], [_angular_common__WEBPACK_IMPORTED_MODULE_25__.SlicePipe, _angular_common__WEBPACK_IMPORTED_MODULE_25__.DatePipe]);
_angular_core__WEBPACK_IMPORTED_MODULE_23__["ɵɵsetComponentScope"](_group_event_details_modal_component__WEBPACK_IMPORTED_MODULE_10__.GroupEventDetailsModalComponent, [_angular_common__WEBPACK_IMPORTED_MODULE_25__.NgIf, _angular_material_dialog__WEBPACK_IMPORTED_MODULE_31__.MatDialogClose, _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_13__.IconComponent, _components_src_lib_interactive_map_component__WEBPACK_IMPORTED_MODULE_15__.InteractiveMapComponent, _components_src_lib_authenticated_image_directive__WEBPACK_IMPORTED_MODULE_20__.AuthenticatedImageDirective, _angular_material_menu__WEBPACK_IMPORTED_MODULE_34__.MatMenu, _angular_material_menu__WEBPACK_IMPORTED_MODULE_34__.MatMenuItem, _angular_material_menu__WEBPACK_IMPORTED_MODULE_34__.MatMenuTrigger, _angular_material_core__WEBPACK_IMPORTED_MODULE_33__.MatRipple, _attendee_list_component__WEBPACK_IMPORTED_MODULE_4__.AttendeeListComponent], [_angular_common__WEBPACK_IMPORTED_MODULE_25__.AsyncPipe, _angular_common__WEBPACK_IMPORTED_MODULE_25__.DatePipe, _components_src_lib_sanitise_pipe__WEBPACK_IMPORTED_MODULE_19__.SanitizePipe, _spaces_src_lib_space_pipe__WEBPACK_IMPORTED_MODULE_21__.SpacePipe]);
_angular_core__WEBPACK_IMPORTED_MODULE_23__["ɵɵsetComponentScope"](_group_event_card_component__WEBPACK_IMPORTED_MODULE_9__.GroupEventCardComponent, [_angular_common__WEBPACK_IMPORTED_MODULE_25__.NgIf, _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_13__.IconComponent, _components_src_lib_authenticated_image_directive__WEBPACK_IMPORTED_MODULE_20__.AuthenticatedImageDirective, _angular_material_core__WEBPACK_IMPORTED_MODULE_33__.MatRipple], [_angular_common__WEBPACK_IMPORTED_MODULE_25__.DatePipe]);

/***/ }),

/***/ 76:
/*!***************************************!*\
  !*** ./libs/events/src/lib/events.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CalendarEvent: () => (/* reexport safe */ _event_class__WEBPACK_IMPORTED_MODULE_1__.CalendarEvent),
/* harmony export */   EventFormService: () => (/* reexport safe */ _event_form_service__WEBPACK_IMPORTED_MODULE_0__.EventFormService),
/* harmony export */   addEventGuest: () => (/* reexport safe */ _events_fn__WEBPACK_IMPORTED_MODULE_3__.addEventGuest),
/* harmony export */   approveEvent: () => (/* reexport safe */ _events_fn__WEBPACK_IMPORTED_MODULE_3__.approveEvent),
/* harmony export */   checkinEventGuest: () => (/* reexport safe */ _events_fn__WEBPACK_IMPORTED_MODULE_3__.checkinEventGuest),
/* harmony export */   createEvent: () => (/* reexport safe */ _events_fn__WEBPACK_IMPORTED_MODULE_3__.createEvent),
/* harmony export */   declineEvent: () => (/* reexport safe */ _events_fn__WEBPACK_IMPORTED_MODULE_3__.declineEvent),
/* harmony export */   endInFuture: () => (/* reexport safe */ _validators__WEBPACK_IMPORTED_MODULE_6__.endInFuture),
/* harmony export */   eventStatus: () => (/* reexport safe */ _helpers__WEBPACK_IMPORTED_MODULE_4__.eventStatus),
/* harmony export */   formatRecurrence: () => (/* reexport safe */ _helpers__WEBPACK_IMPORTED_MODULE_4__.formatRecurrence),
/* harmony export */   generateEventForm: () => (/* reexport safe */ _utilities__WEBPACK_IMPORTED_MODULE_5__.generateEventForm),
/* harmony export */   getEventMetadata: () => (/* reexport safe */ _events_fn__WEBPACK_IMPORTED_MODULE_3__.getEventMetadata),
/* harmony export */   getFreeTimeSlots: () => (/* reexport safe */ _helpers__WEBPACK_IMPORTED_MODULE_4__.getFreeTimeSlots),
/* harmony export */   getNextFreeTimeSlot: () => (/* reexport safe */ _helpers__WEBPACK_IMPORTED_MODULE_4__.getNextFreeTimeSlot),
/* harmony export */   isFuture: () => (/* reexport safe */ _validators__WEBPACK_IMPORTED_MODULE_6__.isFuture),
/* harmony export */   isSpaceAvailable: () => (/* reexport safe */ _events_fn__WEBPACK_IMPORTED_MODULE_3__.isSpaceAvailable),
/* harmony export */   newCalendarEventFromBooking: () => (/* reexport safe */ _utilities__WEBPACK_IMPORTED_MODULE_5__.newCalendarEventFromBooking),
/* harmony export */   parseRecurrence: () => (/* reexport safe */ _helpers__WEBPACK_IMPORTED_MODULE_4__.parseRecurrence),
/* harmony export */   periodInFreeTimeSlot: () => (/* reexport safe */ _helpers__WEBPACK_IMPORTED_MODULE_4__.periodInFreeTimeSlot),
/* harmony export */   queryAllEvents: () => (/* reexport safe */ _events_fn__WEBPACK_IMPORTED_MODULE_3__.queryAllEvents),
/* harmony export */   queryEventGuests: () => (/* reexport safe */ _events_fn__WEBPACK_IMPORTED_MODULE_3__.queryEventGuests),
/* harmony export */   queryEvents: () => (/* reexport safe */ _events_fn__WEBPACK_IMPORTED_MODULE_3__.queryEvents),
/* harmony export */   querySpaceAvailability: () => (/* reexport safe */ _events_fn__WEBPACK_IMPORTED_MODULE_3__.querySpaceAvailability),
/* harmony export */   rejectEvent: () => (/* reexport safe */ _events_fn__WEBPACK_IMPORTED_MODULE_3__.rejectEvent),
/* harmony export */   removeEvent: () => (/* reexport safe */ _events_fn__WEBPACK_IMPORTED_MODULE_3__.removeEvent),
/* harmony export */   removeEventGuest: () => (/* reexport safe */ _events_fn__WEBPACK_IMPORTED_MODULE_3__.removeEventGuest),
/* harmony export */   replaceBookings: () => (/* reexport safe */ _utilities__WEBPACK_IMPORTED_MODULE_5__.replaceBookings),
/* harmony export */   saveEvent: () => (/* reexport safe */ _events_fn__WEBPACK_IMPORTED_MODULE_3__.saveEvent),
/* harmony export */   setDefaultCreator: () => (/* reexport safe */ _event_class__WEBPACK_IMPORTED_MODULE_1__.setDefaultCreator),
/* harmony export */   setMockBookingStartDatetime: () => (/* reexport safe */ _utilities__WEBPACK_IMPORTED_MODULE_5__.setMockBookingStartDatetime),
/* harmony export */   showEvent: () => (/* reexport safe */ _events_fn__WEBPACK_IMPORTED_MODULE_3__.showEvent),
/* harmony export */   statusFromBookings: () => (/* reexport safe */ _utilities__WEBPACK_IMPORTED_MODULE_5__.statusFromBookings),
/* harmony export */   updateEvent: () => (/* reexport safe */ _events_fn__WEBPACK_IMPORTED_MODULE_3__.updateEvent),
/* harmony export */   updateEventMetadata: () => (/* reexport safe */ _events_fn__WEBPACK_IMPORTED_MODULE_3__.updateEventMetadata)
/* harmony export */ });
/* harmony import */ var _event_form_service__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./event-form.service */ 26101);
/* harmony import */ var _event_class__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./event.class */ 6727);
/* harmony import */ var _event_interfaces__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./event.interfaces */ 59451);
/* harmony import */ var _events_fn__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./events.fn */ 51416);
/* harmony import */ var _helpers__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./helpers */ 37420);
/* harmony import */ var _utilities__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./utilities */ 55049);
/* harmony import */ var _validators__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./validators */ 90690);








/***/ }),

/***/ 27535:
/*!***********************************************************!*\
  !*** ./libs/events/src/lib/group-event-card.component.ts ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   GroupEventCardComponent: () => (/* binding */ GroupEventCardComponent)
/* harmony export */ });
/* harmony import */ var _home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 89204);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var _group_event_details_modal_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./group-event-details-modal.component */ 58094);
/* harmony import */ var libs_spaces_src_lib_space_pipe__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! libs/spaces/src/lib/space.pipe */ 22011);
/* harmony import */ var libs_organisation_src_lib_organisation_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! libs/organisation/src/lib/organisation.service */ 19863);
/* harmony import */ var _event_class__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./event.class */ 6727);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_material_dialog__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @angular/material/dialog */ 12587);











function GroupEventCardComponent_button_0_img_2_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelement"](0, "img", 15);
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("source", ctx_r1.event.images[0]);
  }
}
function GroupEventCardComponent_button_0_p_13_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](0, "p", 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](1, " No description ");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
  }
}
function GroupEventCardComponent_button_0_div_17_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](0, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtextInterpolate1"](" ", ctx_r1.space.display_name || ctx_r1.space.name || "", " ");
  }
}
function GroupEventCardComponent_button_0_div_18_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](0, "div", 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](1, " Room to be confirmed ");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
  }
}
function GroupEventCardComponent_button_0_div_19_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](0, "div", 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](1, " Remote event ");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
  }
}
function GroupEventCardComponent_button_0_Template(rf, ctx) {
  if (rf & 1) {
    const _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](0, "button", 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵlistener"]("click", function GroupEventCardComponent_button_0_Template_button_click_0_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵrestoreView"](_r1);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵresetView"](ctx_r1.viewDetails());
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](1, "div", 3);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtemplate"](2, GroupEventCardComponent_button_0_img_2_Template, 1, 1, "img", 4);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](3, "div", 5)(4, "div", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpipe"](6, "date");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpipe"](7, "date");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](8, "h2", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](9);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](10, "div", 8)(11, "p", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](12);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtemplate"](13, GroupEventCardComponent_button_0_p_13_Template, 2, 0, "p", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](14, "div", 11)(15, "app-icon", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](16, "place");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtemplate"](17, GroupEventCardComponent_button_0_div_17_Template, 2, 1, "div", 13)(18, GroupEventCardComponent_button_0_div_18_Template, 2, 0, "div", 10)(19, GroupEventCardComponent_button_0_div_19_Template, 2, 0, "div", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](20, "div", 11)(21, "app-icon", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](22, "people");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](23, "div", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](24);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]()()()();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("ngIf", ctx_r1.event.images == null ? null : ctx_r1.event.images.length);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtextInterpolate2"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpipeBind2"](6, 11, ctx_r1.event.date, "EEE d MMM"), ", ", _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpipeBind2"](7, 14, ctx_r1.event.date, ctx_r1.time_format), " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("title", ctx_r1.event.title);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtextInterpolate1"](" ", ctx_r1.event.title, " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtextInterpolate"](ctx_r1.raw_description);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("ngIf", !ctx_r1.raw_description.trim());
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("ngIf", ctx_r1.is_onsite && ctx_r1.has_space);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("ngIf", ctx_r1.is_onsite && !ctx_r1.has_space);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("ngIf", !ctx_r1.is_onsite);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtextInterpolate1"](" ", (ctx_r1.event.attendees == null ? null : ctx_r1.event.attendees.length) || "0", " attending ");
  }
}
function GroupEventCardComponent_ng_template_1_img_2_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelement"](0, "img", 15);
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("source", ctx_r1.event.images[0]);
  }
}
function GroupEventCardComponent_ng_template_1_p_27_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](0, "p", 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](1, " No description ");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
  }
}
function GroupEventCardComponent_ng_template_1_div_31_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](0, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtextInterpolate1"](" ", ctx_r1.space.display_name || ctx_r1.space.name || "", " ");
  }
}
function GroupEventCardComponent_ng_template_1_div_32_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](0, "div", 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](1, " Room to be confirmed ");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
  }
}
function GroupEventCardComponent_ng_template_1_div_33_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](0, "div", 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](1, " Remote event ");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
  }
}
function GroupEventCardComponent_ng_template_1_Template(rf, ctx) {
  if (rf & 1) {
    const _r3 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](0, "button", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵlistener"]("click", function GroupEventCardComponent_ng_template_1_Template_button_click_0_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵrestoreView"](_r3);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵresetView"](ctx_r1.viewDetails());
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](1, "div", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtemplate"](2, GroupEventCardComponent_ng_template_1_img_2_Template, 1, 1, "img", 4);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](3, "div", 19)(4, "app-icon", 20);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](5, "star");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](6, "div", 21);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](7, "Featured");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](8, "div", 22)(9, "div", 23)(10, "div", 24);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](11);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpipe"](12, "date");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](13, "div", 25);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](14);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpipe"](15, "date");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](16, "div", 26)(17, "h3", 27);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](18);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](19, "div", 28);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](20);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpipe"](21, "date");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpipe"](22, "date");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpipe"](23, "date");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](24, "div", 29)(25, "p", 30);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](26);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtemplate"](27, GroupEventCardComponent_ng_template_1_p_27_Template, 2, 0, "p", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](28, "div", 11)(29, "app-icon", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](30, "place");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtemplate"](31, GroupEventCardComponent_ng_template_1_div_31_Template, 2, 1, "div", 13)(32, GroupEventCardComponent_ng_template_1_div_32_Template, 2, 0, "div", 10)(33, GroupEventCardComponent_ng_template_1_div_33_Template, 2, 0, "div", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](34, "div", 11)(35, "app-icon", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](36, "people");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](37, "div", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](38);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]()()()();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](39, "div", 31);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](40, " View Details ");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("ngIf", ctx_r1.event.images == null ? null : ctx_r1.event.images.length);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](9);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpipeBind2"](12, 13, ctx_r1.event.date, "MMM"), " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtextInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpipeBind2"](15, 16, ctx_r1.event.date, "d"));
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtextInterpolate"](ctx_r1.event.title);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtextInterpolate3"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpipeBind2"](21, 19, ctx_r1.event.date, "EEEE"), " ", _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpipeBind2"](22, 22, ctx_r1.event.date, ctx_r1.time_format), " - ", _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpipeBind2"](23, 25, ctx_r1.event.date + ctx_r1.event.duration * 60 * 1000, ctx_r1.time_format), " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](6);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtextInterpolate"](ctx_r1.raw_description);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("ngIf", !ctx_r1.raw_description.trim());
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("ngIf", ctx_r1.is_onsite && ctx_r1.has_space);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("ngIf", ctx_r1.is_onsite && !ctx_r1.has_space);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("ngIf", !ctx_r1.is_onsite);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtextInterpolate1"](" ", (ctx_r1.event.attendees == null ? null : ctx_r1.event.attendees.length) || "0", " attending ");
  }
}
class GroupEventCardComponent {
  get time_format() {
    return this._settings.time_format;
  }
  get is_onsite() {
    return this.event?.extension_data.attendance_type !== 'ONLINE';
  }
  get has_space() {
    return !!this.space?.id;
  }
  get is_online() {
    return !this.is_onsite || this.event?.extension_data.attendance_type === 'ANY';
  }
  get group_event_calendar() {
    return this._settings.get('app.group_events_calendar');
  }
  constructor(_settings, _dialog, _org) {
    this._settings = _settings;
    this._dialog = _dialog;
    this._org = _org;
    this.raw_description = '';
  }
  ngOnInit() {
    var _this = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      const space_pipe = new libs_spaces_src_lib_space_pipe__WEBPACK_IMPORTED_MODULE_3__.SpacePipe(_this._org);
      const resource = _this.event.resources.find(_ => _.email !== _this.group_event_calendar);
      _this.space = yield space_pipe.transform(resource?.id || resource?.email);
      _this.raw_description = _this.removeHtmlTags(_this.event.body);
    })();
  }
  removeHtmlTags(html) {
    const doc = new DOMParser().parseFromString(html, 'text/html');
    return doc.body.textContent || '';
  }
  viewDetails() {
    this._dialog.open(_group_event_details_modal_component__WEBPACK_IMPORTED_MODULE_2__.GroupEventDetailsModalComponent, {
      data: {
        event: this.event,
        concierge: false
      }
    });
  }
  static #_ = this.ɵfac = function GroupEventCardComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || GroupEventCardComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵdirectiveInject"](_placeos_common__WEBPACK_IMPORTED_MODULE_1__.SettingsService), _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵdirectiveInject"](_angular_material_dialog__WEBPACK_IMPORTED_MODULE_7__.MatDialog), _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵdirectiveInject"](libs_organisation_src_lib_organisation_service__WEBPACK_IMPORTED_MODULE_4__.OrganisationService));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵdefineComponent"]({
    type: GroupEventCardComponent,
    selectors: [["group-event-card"]],
    inputs: {
      event: "event",
      featured: "featured"
    },
    decls: 3,
    vars: 2,
    consts: [["featured_card", ""], ["matRipple", "", "class", "border border-base-300 hover:border-info flex flex-col bg-base-100 rounded-xl shadow hover:shadow-2xl overflow-hidden w-60 h-[20rem]", 3, "click", 4, "ngIf", "ngIfElse"], ["matRipple", "", 1, "border", "border-base-300", "hover:border-info", "flex", "flex-col", "bg-base-100", "rounded-xl", "shadow", "hover:shadow-2xl", "overflow-hidden", "w-60", "h-[20rem]", 3, "click"], [1, "relative", "flex", "items-center", "justify-between", "h-28", "min-h-28", "w-full", "bg-base-200", "overflow-hidden", "border-b", "border-base-200"], ["auth", "", "class", "absolute top-0 left-0 h-full w-full object-center object-cover", 3, "source", 4, "ngIf"], [1, "p-4", "flex-1", "h-1/2", "w-full"], [1, "opacity-60", "text-sm", "text-left"], [1, "text-xl", "mb-2", "text-left", "truncate", "w-full", 3, "title"], [1, "opacity-60", "text-xs", "flex-1", "overflow-hidden", "h-[4.5rem]", "mb-2", "text-left"], [1, "line-clamp-4"], ["class", "opacity-30", 4, "ngIf"], [1, "flex", "items-center", "space-x-2", "text-sm"], [1, "text-info"], [4, "ngIf"], [1, ""], ["auth", "", 1, "absolute", "top-0", "left-0", "h-full", "w-full", "object-center", "object-cover", 3, "source"], [1, "opacity-30"], ["matRipple", "", 1, "border", "border-base-300", "hover:border-info", "flex", "bg-base-100", "rounded-xl", "shadow", "hover:shadow-2xl", "overflow-hidden", "w-[63rem]", "max-w-full", "h-56", "mx-auto", 3, "click"], [1, "relative", "flex", "items-center", "justify-between", "h-full", "min-w-56", "w-1/2", "max-w-[20rem]", "bg-base-200", "overflow-hidden", "border-r", "border-base-200"], [1, "absolute", "top-0", "left-0", "rounded-br-xl", "py-2", "pl-2", "pr-4", "space-x-2", "bg-info", "text-info-content", "flex", "items-center", "text-sm"], [1, "text-base"], [1, "uppercase"], ["details", "", 1, "flex", "px-8", "py-4", "space-x-4"], [1, "flex", "flex-col", "items-center"], [1, "text-sm", "opacity-30"], [1, "text-lg"], [1, "flex", "flex-col", "space-y-2"], [1, "text-left"], ["time", "", 1, "text-sm", "opacity-30", "text-left"], [1, "h-20", "overflow-hidden", "text-left"], [1, "line-clamp-3"], [1, "absolute", "top-4", "right-4", "bg-secondary", "text-secondary-content", "rounded", "px-4", "py-2", "w-32", "text-center", "truncate"]],
    template: function GroupEventCardComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtemplate"](0, GroupEventCardComponent_button_0_Template, 25, 17, "button", 1)(1, GroupEventCardComponent_ng_template_1_Template, 41, 28, "ng-template", null, 0, _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtemplateRefExtractor"]);
      }
      if (rf & 2) {
        const featured_card_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵreference"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("ngIf", !ctx.featured)("ngIfElse", featured_card_r4);
      }
    },
    styles: ["button[_ngcontent-%COMP%] {\n                transition:\n                    box-shadow 300ms,\n                    border 200ms;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdyb3VwLWV2ZW50LWNhcmQuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSTs7Z0NBRWdCO1lBQ3BCIiwiZmlsZSI6Imdyb3VwLWV2ZW50LWNhcmQuY29tcG9uZW50LnRzIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICBidXR0b24ge1xuICAgICAgICAgICAgICAgIHRyYW5zaXRpb246XG4gICAgICAgICAgICAgICAgICAgIGJveC1zaGFkb3cgMzAwbXMsXG4gICAgICAgICAgICAgICAgICAgIGJvcmRlciAyMDBtcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl19 */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvZXZlbnRzL3NyYy9saWIvZ3JvdXAtZXZlbnQtY2FyZC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJOztnQ0FFZ0I7WUFDcEI7O0FBRVosNGRBQTRkIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICBidXR0b24ge1xuICAgICAgICAgICAgICAgIHRyYW5zaXRpb246XG4gICAgICAgICAgICAgICAgICAgIGJveC1zaGFkb3cgMzAwbXMsXG4gICAgICAgICAgICAgICAgICAgIGJvcmRlciAyMDBtcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl0sInNvdXJjZVJvb3QiOiIifQ== */"]
  });
}

/***/ }),

/***/ 58094:
/*!********************************************************************!*\
  !*** ./libs/events/src/lib/group-event-details-modal.component.ts ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   GroupEventDetailsModalComponent: () => (/* binding */ GroupEventDetailsModalComponent)
/* harmony export */ });
/* harmony import */ var _home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 89204);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_material_dialog__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @angular/material/dialog */ 12587);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var _placeos_components__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @placeos/components */ 51588);
/* harmony import */ var _placeos_organisation__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @placeos/organisation */ 2510);
/* harmony import */ var libs_spaces_src_lib_space_pipe__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! libs/spaces/src/lib/space.pipe */ 22011);
/* harmony import */ var _events_fn__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./events.fn */ 51416);












function GroupEventDetailsModalComponent_img_2_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelement"](0, "img", 36);
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("source", ctx_r1.event.extension_data == null ? null : ctx_r1.event.extension_data.images[0]);
  }
}
function GroupEventDetailsModalComponent_div_3_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](0, "div", 37)(1, "app-icon", 38);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](2, "star");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](3, "div", 39);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](4, "Featured");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]()();
  }
}
function GroupEventDetailsModalComponent_ng_container_12_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](1, "div", 40)(2, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](3, "star");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](4, "div", 41);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](6, "div", 40)(7, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](8, "help");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](9, "div", 41);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](10);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementContainerEnd"]();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵclassProp"]("bg-base-200", !ctx_r1.is_interested)("text-base-content", !ctx_r1.is_interested)("opacity-30", !ctx_r1.is_interested)("bg-success", ctx_r1.is_interested)("text-success-content", ctx_r1.is_interested)("opacity-100", ctx_r1.is_interested);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtextInterpolate1"](" ", ctx_r1.is_interested ? "" : "Not ", "Interested ");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵclassProp"]("bg-base-200", !ctx_r1.is_going)("text-base-content", !ctx_r1.is_going)("opacity-30", !ctx_r1.is_going)("bg-success", ctx_r1.is_going)("text-success-content", ctx_r1.is_going)("opacity-100", ctx_r1.is_going);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtextInterpolate1"](" ", ctx_r1.is_going ? "" : "Not ", "Going ");
  }
}
function GroupEventDetailsModalComponent_div_83_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](0, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpipe"](2, "space");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpipe"](3, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    let tmp_3_0;
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtextInterpolate1"](" ", (tmp_3_0 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpipeBind1"](3, 3, _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpipeBind1"](2, 1, ctx_r1.system_id))) == null ? null : tmp_3_0.display_name, " ");
  }
}
function GroupEventDetailsModalComponent_div_84_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](0, "div", 42);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](1, " Room to be confirmed ");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
  }
}
function GroupEventDetailsModalComponent_div_85_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](0, "div", 42);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtextInterpolate1"](" ", ctx_r1.is_onsite ? "Can be attended online" : "Remote Event", " ");
  }
}
function GroupEventDetailsModalComponent_span_97_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](0, "span", 42);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](1, " No description ");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
  }
}
function GroupEventDetailsModalComponent_div_99_interactive_map_3_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelement"](0, "interactive-map", 50);
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("src", ctx_r1.level == null ? null : ctx_r1.level.map_id)("features", ctx_r1.features)("styles", ctx_r1.styles);
  }
}
function GroupEventDetailsModalComponent_div_99_div_5_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](0, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpipe"](2, "space");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpipe"](3, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    let tmp_4_0;
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtextInterpolate1"](" ", (tmp_4_0 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpipeBind1"](3, 3, _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpipeBind1"](2, 1, ctx_r1.system_id))) == null ? null : tmp_4_0.display_name, " ");
  }
}
function GroupEventDetailsModalComponent_div_99_div_6_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](0, "div", 42);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](1, " Room to be confirmed ");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
  }
}
function GroupEventDetailsModalComponent_div_99_span_8_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](0, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtextInterpolate2"](" ", ctx_r1.building.display_name || ctx_r1.building.name, ", ", (ctx_r1.level == null ? null : ctx_r1.level.display_name) || (ctx_r1.level == null ? null : ctx_r1.level.name), " ");
  }
}
function GroupEventDetailsModalComponent_div_99_span_9_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](0, "span", 42);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](1, " No location set for this event ");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
  }
}
function GroupEventDetailsModalComponent_div_99_a_10_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](0, "a", 51);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵclassProp"]("underline", ctx_r1.event.meeting_url);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("href", ctx_r1.event.meeting_url, _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵsanitizeUrl"]);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtextInterpolate1"](" ", ctx_r1.is_onsite ? "Can be attended online" : "Remote Event", " ");
  }
}
function GroupEventDetailsModalComponent_div_99_Template(rf, ctx) {
  if (rf & 1) {
    const _r3 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](0, "div", 43)(1, "div", 44)(2, "button", 45);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵlistener"]("click", function GroupEventDetailsModalComponent_div_99_Template_button_click_2_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵrestoreView"](_r3);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵresetView"](ctx_r1.viewLocation());
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtemplate"](3, GroupEventDetailsModalComponent_div_99_interactive_map_3_Template, 1, 3, "interactive-map", 46);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](4, "div", 47);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtemplate"](5, GroupEventDetailsModalComponent_div_99_div_5_Template, 4, 5, "div", 12)(6, GroupEventDetailsModalComponent_div_99_div_6_Template, 2, 0, "div", 30);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](7, "div", 48);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtemplate"](8, GroupEventDetailsModalComponent_div_99_span_8_Template, 2, 2, "span", 12)(9, GroupEventDetailsModalComponent_div_99_span_9_Template, 2, 0, "span", 30);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtemplate"](10, GroupEventDetailsModalComponent_div_99_a_10_Template, 2, 4, "a", 49);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]()()();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("ngIf", !ctx_r1.showing_map);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("ngIf", ctx_r1.is_onsite && ctx_r1.has_space);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("ngIf", ctx_r1.is_onsite && !ctx_r1.has_space);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("ngIf", ctx_r1.building && ctx_r1.level);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("ngIf", !ctx_r1.building || !ctx_r1.level);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("ngIf", ctx_r1.is_online);
  }
}
function GroupEventDetailsModalComponent_div_100_Template(rf, ctx) {
  if (rf & 1) {
    const _r4 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](0, "div", 52)(1, "button", 53);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵlistener"]("click", function GroupEventDetailsModalComponent_div_100_Template_button_click_1_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵrestoreView"](_r4);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵresetView"](ctx_r1.show_attendees = false);
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](2, "div", 54)(3, "attendee-list", 55);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵlistener"]("click", function GroupEventDetailsModalComponent_div_100_Template_attendee_list_click_3_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵrestoreView"](_r4);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵresetView"](ctx_r1.show_attendees = false);
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]()()();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("show_host", false)("list", ctx_r1.event.attendees)("host", ctx_r1.event.user_email);
  }
}
class GroupEventDetailsModalComponent {
  get time_format() {
    return this._settings.time_format;
  }
  get featured() {
    return this.event.featured || this.event.extension_data?.featured;
  }
  get is_onsite() {
    return this.event.extension_data.attendance_type !== 'ONLINE';
  }
  get has_space() {
    return !!this.space?.id;
  }
  get is_online() {
    return !this.is_onsite || this.event.extension_data.attendance_type === 'ANY';
  }
  get body() {
    if (this.is_online) return this.event.body;
    let body = this.event.body;
    const remove_blocks = [`<div style="margin-bottom:24px; overflow:hidden; white-space:nowrap">________________________________________________________________________________</div>`, `<p>________________________________________________________________________________</p>`];
    for (const block of remove_blocks) {
      const first = body.indexOf(block);
      const last = body.lastIndexOf(block);
      body = body.substring(0, first) + body.substring(last);
    }
    for (const block of remove_blocks) {
      body = body.replace(block, '');
    }
    return body;
  }
  get attendance() {
    return this.event.attendees?.filter(_ => _.checked_in)?.length || 0;
  }
  get is_interested() {
    return !!this.guest_details;
  }
  get is_going() {
    return this.guest_details?.checked_in;
  }
  get system_id() {
    return this.space?.id;
  }
  get guest_details() {
    const user = (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.currentUser)();
    return this.event.attendees?.find(_ => _.email === user.email);
  }
  get group_event_calendar() {
    return this._settings.get('app.group_events_calendar');
  }
  constructor(_data, _org, _settings, _dialog, _dialog_ref) {
    this._data = _data;
    this._org = _org;
    this._settings = _settings;
    this._dialog = _dialog;
    this._dialog_ref = _dialog_ref;
    this.edit = new _angular_core__WEBPACK_IMPORTED_MODULE_6__.EventEmitter();
    this.remove = new _angular_core__WEBPACK_IMPORTED_MODULE_6__.EventEmitter();
    this.event = this._data.event;
    this.concierge = this._data.concierge;
    this.features = [];
    this.locate = '';
    this.showing_map = false;
    this.show_attendees = false;
    this.styles = {};
    this.raw_description = '';
  }
  ngOnInit() {
    var _this = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      const space_pipe = new libs_spaces_src_lib_space_pipe__WEBPACK_IMPORTED_MODULE_4__.SpacePipe(_this._org);
      const resource = _this.event.resources.find(_ => _.email !== _this.group_event_calendar);
      _this.space = yield space_pipe.transform(resource?.id || resource?.email);
      const map_id = _this.event.extension_data?.map_id;
      const id = _this.space?.map_id || map_id;
      if (id) {
        _this.styles[`#${id}`] = {
          fill: 'green'
        };
        _this.features = [{
          location: id,
          content: _placeos_components__WEBPACK_IMPORTED_MODULE_2__.MapPinComponent,
          data: {}
        }];
      }
      const zones = _this.space?.zones || [];
      _this.level = _this._org.levelWithID(zones);
      _this.building = _this._org.buildings.find(_ => zones.includes(_.id)) || _this._org.building;
      _this.locate = map_id || '';
      _this.raw_description = _this.removeHtmlTags(_this.event.body);
    })();
  }
  removeHtmlTags(html) {
    const doc = new DOMParser().parseFromString(html, 'text/html');
    return (doc.body.textContent || '').trim();
  }
  viewLocation() {
    if (!this.space?.map_id) {
      return (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.notifyInfo)('Unable to locate space on map.');
    }
    this.showing_map = true;
    const ref = this._dialog.open(_placeos_components__WEBPACK_IMPORTED_MODULE_2__.MapLocateModalComponent, {
      maxWidth: '95vw',
      maxHeight: '95vh',
      data: {
        item: this.space
      }
    });
    ref.afterClosed().subscribe(() => {
      this.showing_map = false;
    });
  }
  toggleInterest() {
    var _this2 = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      let user = _this2.guest_details;
      if (_this2.is_interested && user) {
        yield (0,_events_fn__WEBPACK_IMPORTED_MODULE_5__.removeEventGuest)(_this2.event.id, (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.currentUser)(), {
          system_id: _this2.event.system?.id
        }).toPromise();
        _this2.event.attendees = (_this2.event.attendees || []).filter(_ => _.email !== user.email);
      } else {
        user = yield (0,_events_fn__WEBPACK_IMPORTED_MODULE_5__.addEventGuest)(_this2.event.id, (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.currentUser)(), {
          system_id: _this2.event.system?.id
        }).toPromise();
        _this2.event.attendees = (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.unique)([...(_this2.event.attendees || []), user], 'email');
      }
    })();
  }
  toggleAttendance() {
    var _this3 = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      let user = _this3.guest_details;
      if (!user) {
        user = yield (0,_events_fn__WEBPACK_IMPORTED_MODULE_5__.addEventGuest)(_this3.event.id, (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.currentUser)(), {
          system_id: _this3.event.system?.id
        }).toPromise();
        _this3.event.attendees = (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.unique)([...(_this3.event.attendees || []), user], 'email');
      }
      user = {
        ...(0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.currentUser)(),
        ...(user || {})
      };
      if (!user.email) return;
      yield (0,_events_fn__WEBPACK_IMPORTED_MODULE_5__.checkinEventGuest)(_this3.event.id, user.email, !_this3.is_going, {
        system_id: _this3.event.system?.id
      }).toPromise();
      const guest = _this3.event.attendees.find(_ => _.email === user.email);
      if (!guest) return;
      guest.checked_in = !_this3.is_going;
    })();
  }
  static #_ = this.ɵfac = function GroupEventDetailsModalComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || GroupEventDetailsModalComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵdirectiveInject"](_angular_material_dialog__WEBPACK_IMPORTED_MODULE_7__.MAT_DIALOG_DATA), _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵdirectiveInject"](_placeos_organisation__WEBPACK_IMPORTED_MODULE_3__.OrganisationService), _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵdirectiveInject"](_placeos_common__WEBPACK_IMPORTED_MODULE_1__.SettingsService), _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵdirectiveInject"](_angular_material_dialog__WEBPACK_IMPORTED_MODULE_7__.MatDialog), _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵdirectiveInject"](_angular_material_dialog__WEBPACK_IMPORTED_MODULE_7__.MatDialogRef));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵdefineComponent"]({
    type: GroupEventDetailsModalComponent,
    selectors: [["group-event-details-modal"]],
    outputs: {
      edit: "edit",
      remove: "remove"
    },
    decls: 101,
    vars: 38,
    consts: [["concierge_menu", "matMenu"], ["menu", "matMenu"], [1, "relative", "w-[48rem]", "max-w-[calc(100vw-1rem)]", "max-h-[80vh]", "overflow-hidden"], [1, "relative", "flex", "items-center", "justify-between", "h-52", "w-full", "bg-base-200", "overflow-hidden"], ["auth", "", "class", "absolute top-1/2 left-1/2 min-h-full min-w-full object-cover -translate-x-1/2 -translate-y-1/2", 3, "source", 4, "ngIf"], ["class", "absolute top-0 left-0 rounded-br py-2 pl-2 pr-4 space-x-2 bg-info text-info-content flex items-center text-sm", 4, "ngIf"], ["icon", "", "mat-dialog-close", "", 1, "absolute", "top-1", "right-1", "overflow-hidden"], [1, "absolute", "inset-0", "bg-base-100", "opacity-30", "z-0"], [1, "z-10"], [1, "flex", "items-center", "justify-between", "py-4", "px-8", "border-b", "border-base-200"], [1, "text-left", "text-xl"], [1, "flex", "items-center", "space-x-2"], [4, "ngIf"], ["btn", "", "matRipple", "", 1, "clear", "bg-base-200", "text-base-content", "w-[2.75rem]", 3, "disabled", "matMenuTriggerFor"], [1, "text-2xl"], ["mat-menu-item", "", 3, "disabled"], [1, "mr-2"], ["mat-menu-item", "", "mat-dialog-close", "", 3, "click"], ["mat-menu-item", "", 3, "click"], [1, "text-2xl", "text-error"], ["mat-menu-item", "", 1, "flex", "items-center", "space-x-2", 3, "click"], [1, "flex", "flex-1", "max-h-[calc(80vh-18rem)]", "overflow-y-auto", "overflow-x-hidden", "p-8", "space-x-6"], [1, "flex", "flex-1", "flex-col", "space-y-2", "w-1/3"], [1, "flex", "items-center", "space-x-4"], [1, "flex", "items-center", "justify-center", "w-10", "h-10", "bg-base-200", "rounded-full"], [1, "font-medium", "pt-4"], [1, "flex", "flex-col"], [1, "text-sm"], [1, "text-sm", "opacity-30"], [1, "flex", "flex-col", "text-sm"], ["class", "opacity-30", 4, "ngIf"], ["matRipple", "", 1, "flex", "items-center", "space-x-4", "rounded", "min-h-12", 3, "click"], [1, "text-sm", "pb-4"], ["event-details", "", 3, "innerHTML"], ["class", "flex w-[20rem]", 4, "ngIf"], ["class", "absolute inset-0 z-50", 4, "ngIf"], ["auth", "", 1, "absolute", "top-1/2", "left-1/2", "min-h-full", "min-w-full", "object-cover", "-translate-x-1/2", "-translate-y-1/2", 3, "source"], [1, "absolute", "top-0", "left-0", "rounded-br", "py-2", "pl-2", "pr-4", "space-x-2", "bg-info", "text-info-content", "flex", "items-center", "text-sm"], [1, "text-base"], [1, "uppercase"], ["btn", "", 1, "flex", "items-center", "px-4", "h-10", "rounded", "space-x-2"], [1, "pr-2"], [1, "opacity-30"], [1, "flex", "w-[20rem]"], [1, "border", "border-base-300", "w-full"], ["matRipple", "", 1, "relative", "w-full", "h-40", "bg-base-200", 3, "click"], [3, "src", "features", "styles", 4, "ngIf"], [1, "p-4", "space-y-2"], [1, "opacity-30", "text-sm", "!mt-0"], ["class", "opacity-30 mt-4", "target", "_blank", "rel", "noopener noreferrer", 3, "underline", "href", 4, "ngIf"], [3, "src", "features", "styles"], ["target", "_blank", "rel", "noopener noreferrer", 1, "opacity-30", "mt-4", 3, "href"], [1, "absolute", "inset-0", "z-50"], [1, "absolute", "inset-0", "bg-base-content", "opacity-60", 3, "click"], [1, "absolute", "left-1/2", "-translate-x-1/2", "w-[24rem]", "inset-y-8", "rounded", "shadow", "overflow-hidden"], [3, "click", "show_host", "list", "host"]],
    template: function GroupEventDetailsModalComponent_Template(rf, ctx) {
      if (rf & 1) {
        const _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵgetCurrentView"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](0, "div", 2)(1, "div", 3);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtemplate"](2, GroupEventDetailsModalComponent_img_2_Template, 1, 1, "img", 4);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtemplate"](3, GroupEventDetailsModalComponent_div_3_Template, 5, 0, "div", 5);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](4, "button", 6);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelement"](5, "div", 7);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](6, "app-icon", 8);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](7, "close");
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](8, "div", 9)(9, "h3", 10);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](10);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](11, "div", 11);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtemplate"](12, GroupEventDetailsModalComponent_ng_container_12_Template, 11, 26, "ng-container", 12);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](13, "button", 13)(14, "app-icon", 14);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](15, "more_horiz");
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](16, "mat-menu", null, 0)(18, "button", 15)(19, "div", 11)(20, "app-icon", 14);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](21, " confirmation_number ");
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](22, "div", 16);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](23, "Promote Event");
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]()()();
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](24, "button", 17);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵlistener"]("click", function GroupEventDetailsModalComponent_Template_button_click_24_listener() {
          _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵrestoreView"](_r1);
          return _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵresetView"](ctx.edit.emit());
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](25, "div", 11)(26, "app-icon", 14);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](27, "edit");
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](28, "div", 16);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](29, "Edit Event");
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]()()();
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](30, "button", 15)(31, "div", 11)(32, "app-icon", 14);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](33, "content_copy");
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](34, "div", 16);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](35, "Copy URL");
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]()()();
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](36, "button", 18);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵlistener"]("click", function GroupEventDetailsModalComponent_Template_button_click_36_listener() {
          _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵrestoreView"](_r1);
          return _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵresetView"](ctx.remove.emit());
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](37, "div", 11)(38, "app-icon", 19);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](39, " delete ");
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](40, "div", 16);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](41, "Delete Event");
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]()()()();
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](42, "mat-menu", null, 1)(44, "button", 20);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵlistener"]("click", function GroupEventDetailsModalComponent_Template_button_click_44_listener() {
          _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵrestoreView"](_r1);
          return _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵresetView"](ctx.toggleInterest());
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](45, "div", 11)(46, "app-icon");
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](47, " star ");
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](48, "span");
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](49);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]()()();
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](50, "button", 18);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵlistener"]("click", function GroupEventDetailsModalComponent_Template_button_click_50_listener() {
          _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵrestoreView"](_r1);
          return _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵresetView"](ctx.toggleAttendance());
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](51, "div", 11)(52, "app-icon");
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](53, " help ");
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](54, "span");
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](55);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]()()()()()();
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](56, "div", 21)(57, "div", 22)(58, "div", 23)(59, "div", 24)(60, "app-icon");
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](61, "person");
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](62, "div");
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](63);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](64, "h3", 25);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](65, "When and where");
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](66, "div", 23)(67, "div", 24)(68, "app-icon");
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](69, "calendar_today");
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](70, "div", 26)(71, "div", 27);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](72, "Date and Time");
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](73, "div", 28);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](74);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpipe"](75, "date");
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpipe"](76, "date");
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpipe"](77, "date");
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]()()();
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](78, "div", 23)(79, "div", 24)(80, "app-icon");
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](81, "place");
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](82, "div", 29);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtemplate"](83, GroupEventDetailsModalComponent_div_83_Template, 4, 5, "div", 12)(84, GroupEventDetailsModalComponent_div_84_Template, 2, 0, "div", 30)(85, GroupEventDetailsModalComponent_div_85_Template, 2, 1, "div", 30);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](86, "button", 31);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵlistener"]("click", function GroupEventDetailsModalComponent_Template_button_click_86_listener() {
          _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵrestoreView"](_r1);
          return _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵresetView"](ctx.show_attendees = true);
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](87, "div", 24)(88, "app-icon");
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](89, "person");
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](90, "div");
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](91);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](92, "h3", 25);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](93, "About this event");
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](94, "div", 32);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelement"](95, "span", 33);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpipe"](96, "sanitize");
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtemplate"](97, GroupEventDetailsModalComponent_span_97_Template, 2, 0, "span", 30);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](98, "div");
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtemplate"](99, GroupEventDetailsModalComponent_div_99_Template, 11, 6, "div", 34);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]()()();
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtemplate"](100, GroupEventDetailsModalComponent_div_100_Template, 4, 3, "div", 35);
      }
      if (rf & 2) {
        const concierge_menu_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵreference"](17);
        const menu_r6 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵreference"](43);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("ngIf", ctx.event.extension_data == null ? null : ctx.event.extension_data.images == null ? null : ctx.event.extension_data.images.length);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("ngIf", ctx.featured);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](7);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtextInterpolate1"](" ", ctx.event.title, " ");
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("ngIf", !ctx.concierge);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("disabled", ctx.event.state === "done")("matMenuTriggerFor", ctx.concierge ? concierge_menu_r5 : menu_r6);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](5);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("disabled", true);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](12);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("disabled", true);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](16);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵclassProp"]("text-error", ctx.is_interested);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtextInterpolate1"](" ", ctx.is_interested ? "Revoke" : "Indicate", " Interest ");
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵclassProp"]("text-error", ctx.is_going);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtextInterpolate1"](" ", ctx.is_going ? "Revoke" : "Indicate", " Going ");
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](8);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtextInterpolate1"](" Event by ", (ctx.event.organiser == null ? null : ctx.event.organiser.name) || ctx.event.host, " ");
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](11);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtextInterpolate3"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpipeBind2"](75, 27, ctx.event.date, "EEEE, d MMMM, yyyy"), " . ", _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpipeBind2"](76, 30, ctx.event.date, ctx.time_format), " - ", _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpipeBind2"](77, 33, ctx.event.date + ctx.event.duration * 60 * 1000, ctx.time_format), " ");
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](9);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("ngIf", ctx.is_onsite && ctx.has_space);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("ngIf", ctx.is_onsite && !ctx.has_space);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("ngIf", ctx.is_online);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](6);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtextInterpolate2"](" ", ctx.attendance, " going, ", ctx.event.attendees == null ? null : ctx.event.attendees.length, " interested ");
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](4);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("innerHTML", _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpipeBind1"](96, 36, ctx.body), _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵsanitizeHtml"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("ngIf", !ctx.raw_description.trim());
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("ngIf", ctx.level);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("ngIf", ctx.show_attendees);
      }
    }
  });
}

/***/ }),

/***/ 37420:
/*!****************************************!*\
  !*** ./libs/events/src/lib/helpers.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   eventStatus: () => (/* binding */ eventStatus),
/* harmony export */   formatRecurrence: () => (/* binding */ formatRecurrence),
/* harmony export */   getFreeTimeSlots: () => (/* binding */ getFreeTimeSlots),
/* harmony export */   getNextFreeTimeSlot: () => (/* binding */ getNextFreeTimeSlot),
/* harmony export */   parseRecurrence: () => (/* binding */ parseRecurrence),
/* harmony export */   periodInFreeTimeSlot: () => (/* binding */ periodInFreeTimeSlot)
/* harmony export */ });
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! date-fns */ 28797);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! date-fns */ 6243);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! date-fns */ 36337);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! date-fns */ 34938);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! date-fns */ 99908);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! date-fns */ 33240);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! date-fns */ 56441);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! date-fns */ 45726);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! date-fns */ 49675);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! date-fns */ 91543);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! date-fns */ 1874);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! date-fns */ 31997);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! date-fns */ 75859);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! date-fns */ 23206);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! date-fns */ 55882);

const DAYS_OF_WEEK = ['sunday', 'monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday'];
function eventStatus(details) {
  if (details.status === 'cancelled') return 'declined';
  if (details.resources?.length) {
    if (details.resources.every(i => i.response_status === 'accepted' || details.approved)) {
      return 'approved';
    } else if (details.resources.some(i => i.response_status === 'tentative' || i.response_status === 'needsAction')) {
      return 'tentative';
    }
    return 'declined';
  }
  return 'approved';
}
function parseRecurrence(data) {
  let start = data.start || data.range_start * 1000;
  let end = data.end || data.range_end;
  if (data.occurrences > 1) {
    switch (data.pattern) {
      case 'daily':
        end = (0,date_fns__WEBPACK_IMPORTED_MODULE_0__.addDays)(start || Date.now(), (data.occurrences - 1) * data.interval).valueOf();
        break;
      case 'weekly':
        end = (0,date_fns__WEBPACK_IMPORTED_MODULE_1__.addWeeks)(start || Date.now(), (data.occurrences - 1) * data.interval).valueOf();
        break;
      case 'month_day':
      case 'monthly':
        end = (0,date_fns__WEBPACK_IMPORTED_MODULE_2__.addMonths)(start || Date.now(), (data.occurrences - 1) * data.interval).valueOf();
        end = (0,date_fns__WEBPACK_IMPORTED_MODULE_0__.addDays)(end, 7).valueOf();
        break;
      case 'yearly':
        end = (0,date_fns__WEBPACK_IMPORTED_MODULE_3__.addYears)(start || Date.now(), (data.occurrences - 1) * data.interval).valueOf();
        break;
    }
  }
  return {
    range_start: (0,date_fns__WEBPACK_IMPORTED_MODULE_4__.getUnixTime)((0,date_fns__WEBPACK_IMPORTED_MODULE_5__.startOfDay)(start)),
    range_end: (0,date_fns__WEBPACK_IMPORTED_MODULE_4__.getUnixTime)((0,date_fns__WEBPACK_IMPORTED_MODULE_6__.endOfDay)(end)),
    interval: data.interval,
    pattern: data.pattern,
    days_of_week: data.days_of_week?.map(_ => typeof _ === 'number' ? DAYS_OF_WEEK[_] : _) || []
  };
}
function formatRecurrence({
  interval,
  pattern,
  start,
  end,
  occurrences
}) {
  let details = '';
  if (interval) {
    switch (pattern) {
      case 'daily':
        details = details.concat(interval > 1 ? `Every ${interval} days` : 'Daily');
        if (occurrences > 1) end = (0,date_fns__WEBPACK_IMPORTED_MODULE_0__.addDays)(start || Date.now(), (occurrences - 1) * interval).valueOf();
        break;
      case 'weekly':
        details = details.concat(interval > 1 ? `Every ${interval} weeks` : 'Weekly');
        if (occurrences > 1) end = (0,date_fns__WEBPACK_IMPORTED_MODULE_1__.addWeeks)(start || Date.now(), (occurrences - 1) * interval).valueOf();
        break;
      case 'month_day':
      case 'monthly':
        details = details.concat(interval > 1 ? `Every ${interval} months` : 'Monthly');
        if (occurrences > 1) end = (0,date_fns__WEBPACK_IMPORTED_MODULE_2__.addMonths)(start || Date.now(), (occurrences - 1) * interval).valueOf();
        break;
      case 'yearly':
        details = details.concat(interval > 1 ? `Every ${interval} yeats` : 'Yearly');
        if (occurrences > 1) end = (0,date_fns__WEBPACK_IMPORTED_MODULE_3__.addYears)(start || Date.now(), (occurrences - 1) * interval).valueOf();
        break;
    }
    if (occurrences >= 1) {
      details = details.concat(`, until ${(0,date_fns__WEBPACK_IMPORTED_MODULE_7__.format)(end, 'MMM do, yyyy')}`);
    }
  }
  return details;
}
/**
 * Generate a list of free time slots between the given bookings
 * @param list List of bookings to find slots between
 * @param min_size Minimum length of a free slot in minutes
 */
function getFreeTimeSlots(list, min_size = 29) {
  let start = new Date(0);
  const slots = [];
  list.sort((a, b) => a.date - b.date);
  for (const booking of list) {
    const bkn_start = new Date((0,date_fns__WEBPACK_IMPORTED_MODULE_8__.addMinutes)(booking.date, -booking.extension_data?.setup_time || 0));
    const bkn_end = (0,date_fns__WEBPACK_IMPORTED_MODULE_8__.addMinutes)(booking.date, booking.duration + (booking.extension_data?.breakdown_time || 0));
    if ((0,date_fns__WEBPACK_IMPORTED_MODULE_9__.isAfter)(booking.date, start)) {
      const diff = Math.abs((0,date_fns__WEBPACK_IMPORTED_MODULE_10__.differenceInMinutes)(bkn_start, start));
      if (diff >= min_size) {
        slots.push({
          start: start.valueOf(),
          end: booking.date
        });
      }
      start = bkn_end;
    } else if ((0,date_fns__WEBPACK_IMPORTED_MODULE_11__.isSameMinute)(start, booking.date)) {
      start = bkn_end;
    }
  }
  const s = start.valueOf();
  slots.push({
    start: s,
    end: (s ? s : Date.now()) * 10
  });
  return slots;
}
function periodInFreeTimeSlot(start, end, list, min_size = 29) {
  const blocks = getFreeTimeSlots(list, min_size);
  for (const blk of blocks) {
    if (start >= blk.start && start < blk.end && end > blk.start && end <= blk.end) {
      return true;
    }
  }
  return false;
}
/**
 * Get the next free time slot from the given bookings
 * @param list List of bookings to find the next slot
 * @param date Date to find next slot after in ms since UTC epoch
 * @param min_size Minimum length of the free slot in minutes
 */
function getNextFreeTimeSlot(list, date = new Date().valueOf(), min_size = 29) {
  const slots = getFreeTimeSlots(list, min_size);
  const time = (0,date_fns__WEBPACK_IMPORTED_MODULE_12__.addSeconds)((0,date_fns__WEBPACK_IMPORTED_MODULE_13__.startOfMinute)(date), 1);
  for (const block of slots) {
    if ((0,date_fns__WEBPACK_IMPORTED_MODULE_9__.isAfter)(block.start, time)) {
      return block;
    } else if ((0,date_fns__WEBPACK_IMPORTED_MODULE_14__.isBefore)(time, block.end)) {
      const duration = (0,date_fns__WEBPACK_IMPORTED_MODULE_10__.differenceInMinutes)(block.end, time);
      if (duration >= min_size) return block;
    }
  }
  return slots[slots.length - 1];
}

/***/ }),

/***/ 50711:
/*!****************************************************************!*\
  !*** ./libs/events/src/lib/setup-breakdown-modal.component.ts ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SetupBreakdownModalComponent: () => (/* binding */ SetupBreakdownModalComponent)
/* harmony export */ });
/* harmony import */ var _home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 89204);
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @angular/forms */ 34456);
/* harmony import */ var _angular_material_dialog__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @angular/material/dialog */ 12587);
/* harmony import */ var _event_class__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./event.class */ 6727);
/* harmony import */ var _events_fn__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./events.fn */ 51416);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _angular_material_progress_spinner__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @angular/material/progress-spinner */ 41134);
/* harmony import */ var _form_fields_src_lib_duration_field_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../form-fields/src/lib/duration-field.component */ 83476);
/* harmony import */ var _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../components/src/lib/icon.component */ 69434);
/* harmony import */ var _angular_material_core__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @angular/material/core */ 74646);















const _c0 = () => [5, 10];
function SetupBreakdownModalComponent_button_3_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](0, "button", 5)(1, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](2, "close");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]()();
  }
}
function SetupBreakdownModalComponent_main_4_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](0, "main", 6)(1, "div", 7)(2, "label", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](3, "Setup Duration");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelement"](4, "a-duration-field", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](5, "div", 7)(6, "label", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](7, "Breakdown Duration");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelement"](8, "a-duration-field", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("formGroup", ctx_r0.form);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("min", 0)("custom_options", _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpureFunction0"](5, _c0));
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("min", 0)("custom_options", _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpureFunction0"](6, _c0));
  }
}
function SetupBreakdownModalComponent_footer_5_Template(rf, ctx) {
  if (rf & 1) {
    const _r2 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](0, "footer", 12)(1, "button", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵlistener"]("click", function SetupBreakdownModalComponent_footer_5_Template_button_click_1_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵrestoreView"](_r2);
      const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵresetView"](ctx_r0.save());
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](2, "Save Changes");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]()();
  }
}
function SetupBreakdownModalComponent_ng_template_6_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](0, "div", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelement"](1, "mat-spinner", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](2, "p", 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](3, " Saving setup and breakdown durations... ");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("diameter", 32);
  }
}
class SetupBreakdownModalComponent {
  constructor(_event, _dialog_ref) {
    this._event = _event;
    this._dialog_ref = _dialog_ref;
    this.loading = false;
    this.form = new _angular_forms__WEBPACK_IMPORTED_MODULE_7__.FormGroup({
      setup: new _angular_forms__WEBPACK_IMPORTED_MODULE_7__.FormControl(this._event.setup_time || 0),
      breakdown: new _angular_forms__WEBPACK_IMPORTED_MODULE_7__.FormControl(this._event.breakdown_time || 0)
    });
  }
  save() {
    var _this = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      _this.loading = true;
      _this._dialog_ref.disableClose = true;
      const {
        host,
        creator
      } = _this._event;
      const query = {
        system_id: _this._event?.resources[0]?.id || _this._event?.system?.id,
        ical_uid: _this._event?.ical_uid
      };
      let event = yield (0,_events_fn__WEBPACK_IMPORTED_MODULE_2__.saveEvent)(new _event_class__WEBPACK_IMPORTED_MODULE_1__.CalendarEvent({
        ..._this._event,
        setup_time: _this.form.value.setup,
        breakdown_time: _this.form.value.breakdown
      }).toJSON(), query).toPromise().catch(_ => null);
      if (!event) {
        event = yield (0,_events_fn__WEBPACK_IMPORTED_MODULE_2__.updateEventMetadata)(_this._event.id, query.system_id, {
          ..._this._event.extension_data,
          setup_time: _this.form.value.setup,
          breakdown_time: _this.form.value.breakdown,
          setup: _this.form.value.setup,
          breakdown: _this.form.value.breakdown
        }).toPromise().catch(_ => null);
      }
      if (!event) {
        _this.loading = false;
        _this._dialog_ref.disableClose = false;
        (0,_placeos_common__WEBPACK_IMPORTED_MODULE_3__.notifyError)(`Error updating setup and breakdown.`);
        return;
      }
      (0,_placeos_common__WEBPACK_IMPORTED_MODULE_3__.notifySuccess)('Succesfully updated setup and breakdown period.');
      _this._dialog_ref.disableClose = false;
      _this.loading = false;
      _this._dialog_ref.close(event);
    })();
  }
  static #_ = this.ɵfac = function SetupBreakdownModalComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || SetupBreakdownModalComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵdirectiveInject"](_angular_material_dialog__WEBPACK_IMPORTED_MODULE_8__.MAT_DIALOG_DATA), _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵdirectiveInject"](_angular_material_dialog__WEBPACK_IMPORTED_MODULE_8__.MatDialogRef));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵdefineComponent"]({
    type: SetupBreakdownModalComponent,
    selectors: [["setup-breakdown-modal"]],
    decls: 8,
    vars: 4,
    consts: [["load_state", ""], [1, "space-x-4", "min-h-16"], ["btn", "", "icon", "", "mat-dialog-close", "", "matRipple", "", 4, "ngIf"], ["class", "p-4 min-w-[20rem] w-full", 3, "formGroup", 4, "ngIf", "ngIfElse"], ["class", "flex justify-end px-4 py-2 border-t border-base-200", 4, "ngIf"], ["btn", "", "icon", "", "mat-dialog-close", "", "matRipple", ""], [1, "p-4", "min-w-[20rem]", "w-full", 3, "formGroup"], [1, "flex", "flex-col", "space-y-2"], ["for", "setup"], ["name", "setup", "formControlName", "setup", 3, "min", "custom_options"], ["for", "breakdown"], ["name", "breakdown", "formControlName", "breakdown", 3, "min", "custom_options"], [1, "flex", "justify-end", "px-4", "py-2", "border-t", "border-base-200"], ["btn", "", "matRipple", "", 3, "click"], [1, "flex", "flex-col", "items-center", "justify-center", "h-64", "w-64"], [3, "diameter"], [1, "text-center", "p-4"]],
    template: function SetupBreakdownModalComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](0, "header", 1)(1, "h2");
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](2, "Set Event's Setup and Breakdown");
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtemplate"](3, SetupBreakdownModalComponent_button_3_Template, 3, 0, "button", 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtemplate"](4, SetupBreakdownModalComponent_main_4_Template, 9, 7, "main", 3)(5, SetupBreakdownModalComponent_footer_5_Template, 3, 0, "footer", 4)(6, SetupBreakdownModalComponent_ng_template_6_Template, 4, 1, "ng-template", null, 0, _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtemplateRefExtractor"]);
      }
      if (rf & 2) {
        const load_state_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵreference"](7);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("ngIf", !ctx.loading);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("ngIf", !ctx.loading)("ngIfElse", load_state_r3);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("ngIf", !ctx.loading);
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_9__.NgIf, _angular_forms__WEBPACK_IMPORTED_MODULE_7__.NgControlStatus, _angular_forms__WEBPACK_IMPORTED_MODULE_7__.NgControlStatusGroup, _angular_forms__WEBPACK_IMPORTED_MODULE_7__.FormGroupDirective, _angular_forms__WEBPACK_IMPORTED_MODULE_7__.FormControlName, _angular_material_dialog__WEBPACK_IMPORTED_MODULE_8__.MatDialogClose, _angular_material_progress_spinner__WEBPACK_IMPORTED_MODULE_10__.MatProgressSpinner, _form_fields_src_lib_duration_field_component__WEBPACK_IMPORTED_MODULE_4__.DurationFieldComponent, _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_5__.IconComponent, _angular_material_core__WEBPACK_IMPORTED_MODULE_11__.MatRipple]
  });
}

/***/ }),

/***/ 55049:
/*!******************************************!*\
  !*** ./libs/events/src/lib/utilities.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   generateEventForm: () => (/* binding */ generateEventForm),
/* harmony export */   newCalendarEventFromBooking: () => (/* binding */ newCalendarEventFromBooking),
/* harmony export */   replaceBookings: () => (/* binding */ replaceBookings),
/* harmony export */   setMockBookingStartDatetime: () => (/* binding */ setMockBookingStartDatetime),
/* harmony export */   statusFromBookings: () => (/* binding */ statusFromBookings)
/* harmony export */ });
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @angular/forms */ 34456);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! date-fns */ 83680);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! date-fns */ 77052);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! date-fns */ 3330);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! date-fns */ 33240);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! date-fns */ 5647);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! date-fns */ 49675);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! date-fns */ 1874);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! date-fns */ 23206);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! date-fns */ 214);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! date-fns */ 99134);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! date-fns */ 31257);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! date-fns */ 45726);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var _event_class__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./event.class */ 6727);
/* harmony import */ var _validators__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./validators */ 90690);
/* harmony import */ var _helpers__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./helpers */ 37420);
/* harmony import */ var libs_users_src_lib_user_class__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! libs/users/src/lib/user.class */ 93693);







let BOOKING_DATE = (0,date_fns__WEBPACK_IMPORTED_MODULE_5__.add)((0,date_fns__WEBPACK_IMPORTED_MODULE_6__.setMinutes)((0,date_fns__WEBPACK_IMPORTED_MODULE_7__.setHours)(new Date(), 6), 0), {
  days: -1
});
const validateCateringField = catering_control => control => {
  if (catering_control.value?.length && !control.value) {
    return {
      catering_field: 'Catering sub-fields are required'
    };
  }
  return null;
};
function generateEventForm(event = new _event_class__WEBPACK_IMPORTED_MODULE_1__.CalendarEvent(), settings) {
  if (!event) event = new _event_class__WEBPACK_IMPORTED_MODULE_1__.CalendarEvent();
  const form = new _angular_forms__WEBPACK_IMPORTED_MODULE_8__.FormGroup({
    id: new _angular_forms__WEBPACK_IMPORTED_MODULE_8__.FormControl(event.id),
    ical_uid: new _angular_forms__WEBPACK_IMPORTED_MODULE_8__.FormControl(event.ical_uid),
    host: new _angular_forms__WEBPACK_IMPORTED_MODULE_8__.FormControl(event.host || event.organiser?.email || (0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.currentUser)()?.email || '', [_angular_forms__WEBPACK_IMPORTED_MODULE_8__.Validators.required]),
    organiser: new _angular_forms__WEBPACK_IMPORTED_MODULE_8__.FormControl(event.organiser || new libs_users_src_lib_user_class__WEBPACK_IMPORTED_MODULE_4__.User({
      email: event.host || ''
    })),
    creator: new _angular_forms__WEBPACK_IMPORTED_MODULE_8__.FormControl(event.creator || (0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.currentUser)()?.email),
    calendar: new _angular_forms__WEBPACK_IMPORTED_MODULE_8__.FormControl(event.calendar),
    attendees: new _angular_forms__WEBPACK_IMPORTED_MODULE_8__.FormControl(event.attendees || []),
    resources: new _angular_forms__WEBPACK_IMPORTED_MODULE_8__.FormControl(event.resources || []),
    title: new _angular_forms__WEBPACK_IMPORTED_MODULE_8__.FormControl(event.title),
    body: new _angular_forms__WEBPACK_IMPORTED_MODULE_8__.FormControl(event.body),
    private: new _angular_forms__WEBPACK_IMPORTED_MODULE_8__.FormControl(event.private),
    date: new _angular_forms__WEBPACK_IMPORTED_MODULE_8__.FormControl(event.date, [_angular_forms__WEBPACK_IMPORTED_MODULE_8__.Validators.required]),
    duration: new _angular_forms__WEBPACK_IMPORTED_MODULE_8__.FormControl(event.duration, [_validators__WEBPACK_IMPORTED_MODULE_2__.endInFuture]),
    all_day: new _angular_forms__WEBPACK_IMPORTED_MODULE_8__.FormControl(event.all_day),
    date_end: new _angular_forms__WEBPACK_IMPORTED_MODULE_8__.FormControl(event.date_end),
    recurring: new _angular_forms__WEBPACK_IMPORTED_MODULE_8__.FormControl(event.recurring),
    recurrence: new _angular_forms__WEBPACK_IMPORTED_MODULE_8__.FormControl(event.recurrence),
    recurring_event_id: new _angular_forms__WEBPACK_IMPORTED_MODULE_8__.FormControl(event.recurring_event_id),
    master: new _angular_forms__WEBPACK_IMPORTED_MODULE_8__.FormControl(event.master),
    attachments: new _angular_forms__WEBPACK_IMPORTED_MODULE_8__.FormControl(event.attachments),
    catering: new _angular_forms__WEBPACK_IMPORTED_MODULE_8__.FormControl(event.extension_data?.catering),
    catering_notes: new _angular_forms__WEBPACK_IMPORTED_MODULE_8__.FormControl(event.extension_data?.catering[0]?.notes || ''),
    catering_charge_code: new _angular_forms__WEBPACK_IMPORTED_MODULE_8__.FormControl(event.extension_data?.catering[0]?.charge_code || ''),
    setup_time: new _angular_forms__WEBPACK_IMPORTED_MODULE_8__.FormControl(event.setup_time || 0),
    breakdown_time: new _angular_forms__WEBPACK_IMPORTED_MODULE_8__.FormControl(event.breakdown_time || 0),
    assets: new _angular_forms__WEBPACK_IMPORTED_MODULE_8__.FormControl(event.extension_data?.assets),
    // has_catering: new FormControl(event.has_catering || false),
    visitor_type: new _angular_forms__WEBPACK_IMPORTED_MODULE_8__.FormControl(event.extension_data?.visitor_type),
    location: new _angular_forms__WEBPACK_IMPORTED_MODULE_8__.FormControl(event.location),
    needs_space: new _angular_forms__WEBPACK_IMPORTED_MODULE_8__.FormControl(true),
    needs_parking: new _angular_forms__WEBPACK_IMPORTED_MODULE_8__.FormControl(event.extension_data?.needs_parking || false),
    event_type: new _angular_forms__WEBPACK_IMPORTED_MODULE_8__.FormControl(event.extension_data?.event_type || ''),
    category: new _angular_forms__WEBPACK_IMPORTED_MODULE_8__.FormControl(event.extension_data?.category || ''),
    tags: new _angular_forms__WEBPACK_IMPORTED_MODULE_8__.FormControl(event.extension_data?.tags || []),
    update_master: new _angular_forms__WEBPACK_IMPORTED_MODULE_8__.FormControl(false),
    system: new _angular_forms__WEBPACK_IMPORTED_MODULE_8__.FormControl(event.system),
    attendance_type: new _angular_forms__WEBPACK_IMPORTED_MODULE_8__.FormControl(event.extension_data?.attendance_type || 'ONSITE'),
    timezone: new _angular_forms__WEBPACK_IMPORTED_MODULE_8__.FormControl(event.timezone || _placeos_common__WEBPACK_IMPORTED_MODULE_0__.LOCAL_TIMEZONE),
    shared_event: new _angular_forms__WEBPACK_IMPORTED_MODULE_8__.FormControl(event.extension_data?.shared_event || false),
    view_access: new _angular_forms__WEBPACK_IMPORTED_MODULE_8__.FormControl(event.extension_data?.view_access || 'PRIVATE'),
    images: new _angular_forms__WEBPACK_IMPORTED_MODULE_8__.FormControl(event.extension_data?.images || []),
    featured: new _angular_forms__WEBPACK_IMPORTED_MODULE_8__.FormControl(event.extension_data?.featured || false)
  });
  form.get('organiser').valueChanges.subscribe(o => form.controls.host.setValue(o?.email));
  form.get('resources').valueChanges.subscribe(l => {
    form.controls.system.setValue(l?.length ? l[0] : null);
    form.controls.assets[l?.length ? 'enable' : 'disable']();
  });
  const setCateringTime = () => {
    if (!form.value.catering?.length || !form.getRawValue().date) return;
    form.patchValue({
      catering: form.value.catering.map(order => ({
        ...order,
        event: {
          date: form.value.all_day ? (0,date_fns__WEBPACK_IMPORTED_MODULE_9__.startOfDay)(form.getRawValue().date) : form.getRawValue().date,
          duration: form.value.all_day ? 24 * 60 : form.value.duration
        }
      }))
    }, {
      emitEvent: false
    });
  };
  form.valueChanges.subscribe(v => {
    if (form.getRawValue().date < Date.now() && form.value.id) {
      form.get('date')?.disable({
        emitEvent: false
      });
    } else {
      form.get('date')?.enable({
        emitEvent: false
      });
    }
    if (v.date || v.duration || v.all_day) setCateringTime();
  });
  form.controls.duration.valueChanges.subscribe(duration => {
    form.patchValue({
      date_end: (0,date_fns__WEBPACK_IMPORTED_MODULE_10__.roundToNearestMinutes)((0,date_fns__WEBPACK_IMPORTED_MODULE_11__.addMinutes)(form.getRawValue().date, duration), {
        nearestTo: 5,
        roundingMethod: 'ceil'
      }).valueOf()
    }, {
      emitEvent: false
    });
    setCateringTime();
  });
  form.controls.date_end.valueChanges.subscribe(date => {
    if (date < (0,date_fns__WEBPACK_IMPORTED_MODULE_11__.addMinutes)(form.getRawValue().date, 30).valueOf()) {
      form.patchValue({
        date_end: (0,date_fns__WEBPACK_IMPORTED_MODULE_10__.roundToNearestMinutes)((0,date_fns__WEBPACK_IMPORTED_MODULE_11__.addMinutes)(form.getRawValue().date, 30), {
          nearestTo: 5,
          roundingMethod: 'ceil'
        }).valueOf(),
        duration: 30
      }, {
        emitEvent: false
      });
    } else {
      form.patchValue({
        duration: (0,date_fns__WEBPACK_IMPORTED_MODULE_12__.differenceInMinutes)(date, form.getRawValue().date)
      }, {
        emitEvent: false
      });
    }
    setCateringTime();
  });
  form.controls.date.valueChanges.subscribe(date => {
    form.patchValue({
      date_end: (0,date_fns__WEBPACK_IMPORTED_MODULE_10__.roundToNearestMinutes)((0,date_fns__WEBPACK_IMPORTED_MODULE_11__.addMinutes)(date, form.value.duration), {
        nearestTo: 5,
        roundingMethod: 'ceil'
      }).valueOf()
    }, {
      emitEvent: false
    });
    if (date < Date.now() && !form.value.id) {
      form.patchValue({
        date: (0,date_fns__WEBPACK_IMPORTED_MODULE_10__.roundToNearestMinutes)(Date.now(), {
          nearestTo: 5,
          roundingMethod: 'ceil'
        }).valueOf()
      }, {
        emitEvent: false
      });
    }
    if (form.value.recurrence?._pattern !== 'custom_display' && form.value.recurrence?._pattern !== 'none') {
      form.patchValue({
        recurrence: {
          ...form.value.recurrence,
          days_of_week: [new Date(date).getDay()]
        }
      });
    }
    setCateringTime();
  });
  form.controls.catering.valueChanges.subscribe(_ => {
    const catering = form.getRawValue().catering || [];
    if (catering?.length && (settings?.get('app.events.catering_notes_required') || settings.value('require_catering_notes'))) {
      form.get('catering_notes')?.setValidators([_angular_forms__WEBPACK_IMPORTED_MODULE_8__.Validators.required]);
      form.get('catering_notes').patchValue(form.value.catering_notes);
    } else {
      form.get('catering_notes')?.clearValidators();
      form.get('catering_notes').setErrors(null);
    }
    form.updateValueAndValidity();
  });
  form.get('catering_charge_code').setValidators([validateCateringField(form.get('catering'))]);
  if (event.id) {
    form.get('host').disable();
    form.get('organiser').disable();
  }
  if (event.state === 'started') form.get('date').disable();
  return form;
}
/**
 * Set the initial time used for generating mock bookings
 * @param time New initial time as ms from UTC epoch
 */
function setMockBookingStartDatetime(time) {
  BOOKING_DATE = (0,date_fns__WEBPACK_IMPORTED_MODULE_13__.startOfMinute)(new Date(time));
}
/**
 * Get current status within bookings
 * @param bookings List of bookings
 * @param host Host of the new event
 * @param date Datetime of the new event
 */
function statusFromBookings(bookings, bookable, requestable, date = (0,date_fns__WEBPACK_IMPORTED_MODULE_14__.getTime)(new Date())) {
  const now = new Date(date);
  const next_free_slot = (0,_helpers__WEBPACK_IMPORTED_MODULE_3__.getNextFreeTimeSlot)(bookings, date, 5);
  const start = new Date(next_free_slot.start);
  const end = new Date(next_free_slot.end);
  const currently_free = (0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.timePeriodsIntersect)(date, date, next_free_slot.start, next_free_slot.end);
  const time_until_next_block = (0,date_fns__WEBPACK_IMPORTED_MODULE_15__.formatDuration)({
    minutes: currently_free ? (0,date_fns__WEBPACK_IMPORTED_MODULE_12__.differenceInMinutes)(end, now) : (0,date_fns__WEBPACK_IMPORTED_MODULE_12__.differenceInMinutes)(start, now)
  });
  const free_tomorrow = !currently_free && !(0,date_fns__WEBPACK_IMPORTED_MODULE_16__.isSameDay)(start, now);
  const free_today = currently_free && !(0,date_fns__WEBPACK_IMPORTED_MODULE_16__.isSameDay)(end, now);
  return {
    status: !bookable ? 'Not Bookable' : currently_free ? requestable ? 'Available by Request' : 'Available' : 'Meeting in Progress',
    available_until: free_today ? 'No meetings today' : currently_free ? `Free until ${(0,date_fns__WEBPACK_IMPORTED_MODULE_17__.format)(end, 'h:mm B')}(${time_until_next_block})` : free_tomorrow ? 'Unavailable today' : `Free at ${(0,date_fns__WEBPACK_IMPORTED_MODULE_17__.format)(start, 'h:mm B')}(${time_until_next_block})`
  };
}
function replaceBookings(list, new_bookings, filter_options) {
  const from = filter_options.from;
  const to = filter_options.to;
  const filtered_list = list.filter(booking => {
    const start = new Date(booking.date);
    const end = (0,date_fns__WEBPACK_IMPORTED_MODULE_11__.addMinutes)(start, booking.duration);
    return !booking.resources?.find(space => space.email === filter_options.space) || !(0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.timePeriodsIntersect)(from, to, start.valueOf(), end.valueOf());
  });
  const updated_list = filtered_list.concat(new_bookings);
  updated_list.sort((a, b) => a.date - b.date);
  return (0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.unique)(updated_list, 'id');
}
function newCalendarEventFromBooking(booking) {
  let attendees = [{
    id: booking.user_id,
    name: booking.user_name,
    email: booking.user_email,
    organizer: true
  }];
  if (booking.booking_type === 'visitor') {
    attendees.push(new libs_users_src_lib_user_class__WEBPACK_IMPORTED_MODULE_4__.User({
      name: booking.asset_name || booking.description,
      email: booking.asset_id,
      checked_in: booking.checked_in
    }));
  }
  attendees = attendees.concat(booking.attendees);
  return new _event_class__WEBPACK_IMPORTED_MODULE_1__.CalendarEvent({
    ...booking,
    ...booking.extension_data,
    attendees,
    id: booking.id || booking.extension_data.id,
    host: booking.user_email,
    from_bookings: true
  });
}

/***/ }),

/***/ 90690:
/*!*******************************************!*\
  !*** ./libs/events/src/lib/validators.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   endInFuture: () => (/* binding */ endInFuture),
/* harmony export */   isFuture: () => (/* binding */ isFuture)
/* harmony export */ });
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! date-fns */ 91543);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! date-fns */ 49675);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! date-fns */ 55882);

const endInFuture = control => {
  const date = control.parent?.get('date');
  if (date && (0,date_fns__WEBPACK_IMPORTED_MODULE_0__.isAfter)(Date.now(), (0,date_fns__WEBPACK_IMPORTED_MODULE_1__.addMinutes)(date.value, control.value))) {
    return {
      duration: true
    };
  }
  return null;
};
/** Check that date in unix ms is in the future */
function isFuture(control) {
  return control.value && (0,date_fns__WEBPACK_IMPORTED_MODULE_2__.isBefore)(control.value, new Date()) ? {
    is_future: true
  } : null;
}

/***/ }),

/***/ 27009:
/*!***********************************!*\
  !*** ./libs/explore/src/index.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DEFAULT_COLOURS: () => (/* reexport safe */ _lib_explore__WEBPACK_IMPORTED_MODULE_1__.DEFAULT_COLOURS),
/* harmony export */   ExploreDesksService: () => (/* reexport safe */ _lib_explore__WEBPACK_IMPORTED_MODULE_1__.ExploreDesksService),
/* harmony export */   ExploreLockersService: () => (/* reexport safe */ _lib_explore_lockers_service__WEBPACK_IMPORTED_MODULE_2__.ExploreLockersService),
/* harmony export */   ExploreMapControlComponent: () => (/* reexport safe */ _lib_explore__WEBPACK_IMPORTED_MODULE_1__.ExploreMapControlComponent),
/* harmony export */   ExploreMapViewComponent: () => (/* reexport safe */ _lib_explore__WEBPACK_IMPORTED_MODULE_1__.ExploreMapViewComponent),
/* harmony export */   ExploreParkingService: () => (/* reexport safe */ _lib_explore__WEBPACK_IMPORTED_MODULE_1__.ExploreParkingService),
/* harmony export */   ExploreSearchComponent: () => (/* reexport safe */ _lib_explore__WEBPACK_IMPORTED_MODULE_1__.ExploreSearchComponent),
/* harmony export */   ExploreSearchService: () => (/* reexport safe */ _lib_explore__WEBPACK_IMPORTED_MODULE_1__.ExploreSearchService),
/* harmony export */   ExploreSpaceInfoComponent: () => (/* reexport safe */ _lib_explore__WEBPACK_IMPORTED_MODULE_1__.ExploreSpaceInfoComponent),
/* harmony export */   ExploreSpacesService: () => (/* reexport safe */ _lib_explore__WEBPACK_IMPORTED_MODULE_1__.ExploreSpacesService),
/* harmony export */   ExploreStateService: () => (/* reexport safe */ _lib_explore__WEBPACK_IMPORTED_MODULE_1__.ExploreStateService),
/* harmony export */   ExploreZonesService: () => (/* reexport safe */ _lib_explore__WEBPACK_IMPORTED_MODULE_1__.ExploreZonesService),
/* harmony export */   ExploreZoomControlComponent: () => (/* reexport safe */ _lib_explore__WEBPACK_IMPORTED_MODULE_1__.ExploreZoomControlComponent),
/* harmony export */   SharedExploreModule: () => (/* reexport safe */ _lib_explore_module__WEBPACK_IMPORTED_MODULE_0__.SharedExploreModule)
/* harmony export */ });
/* harmony import */ var _lib_explore_module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./lib/explore.module */ 42434);
/* harmony import */ var _lib_explore__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./lib/explore */ 11874);
/* harmony import */ var _lib_explore_lockers_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./lib/explore-lockers.service */ 49591);




/***/ }),

/***/ 72213:
/*!***********************************************************!*\
  !*** ./libs/explore/src/lib/explore-book-qr.component.ts ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ExploreBookQrComponent: () => (/* binding */ ExploreBookQrComponent)
/* harmony export */ });
/* harmony import */ var _angular_material_dialog__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/material/dialog */ 12587);
/* harmony import */ var libs_common_src_lib_settings_service__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! libs/common/src/lib/settings.service */ 14233);
/* harmony import */ var libs_common_src_lib_qr_code__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! libs/common/src/lib/qr-code */ 75774);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../components/src/lib/icon.component */ 69434);







const DEFAULT_PATH = `workplace/#/explore?space={{id}}`;
class ExploreBookQrComponent {
  constructor(_data, _settings) {
    this._data = _data;
    this._settings = _settings;
    this.space = this._data.space;
    this.qr_code = (0,libs_common_src_lib_qr_code__WEBPACK_IMPORTED_MODULE_1__.generateQRCode)(`${location.origin}${(this._settings.get('app.booking_qr_path') || DEFAULT_PATH).replace('{{id}}', this._data.space?.email)}`);
  }
  static #_ = this.ɵfac = function ExploreBookQrComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || ExploreBookQrComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵdirectiveInject"](_angular_material_dialog__WEBPACK_IMPORTED_MODULE_4__.MAT_DIALOG_DATA), _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵdirectiveInject"](libs_common_src_lib_settings_service__WEBPACK_IMPORTED_MODULE_0__.SettingsService));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵdefineComponent"]({
    type: ExploreBookQrComponent,
    selectors: [["explore-book-qr"]],
    decls: 9,
    vars: 2,
    consts: () => {
      let i18n_0;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_381017318285325317$$LIBS_EXPLORE_SRC_LIB_EXPLORE_BOOK_QR_COMPONENT_TS_0 = goog.getMsg("Book - {$interpolation}", {
          "interpolation": "\uFFFD0\uFFFD"
        }, {
          original_code: {
            "interpolation": "{{ space?.name }}"
          }
        });
        i18n_0 = MSG_EXTERNAL_381017318285325317$$LIBS_EXPLORE_SRC_LIB_EXPLORE_BOOK_QR_COMPONENT_TS_0;
      } else {
        i18n_0 = $localize`:␟cbd43c9fe40f6bb5fd5497b1436b4dce15539dfb␟381017318285325317:Book - ${"\uFFFD0\uFFFD"}:INTERPOLATION:`;
      }
      return [i18n_0, [1, "truncate"], [1, "flex-1"], ["icon", "", "mat-dialog-close", ""], [1, "p-4"], [1, "w-64", "h-64", "m-auto", 3, "src"]];
    },
    template: function ExploreBookQrComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "header")(1, "h2", 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵi18n"](2, 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelement"](3, "div", 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](4, "button", 3)(5, "app-icon");
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](6, "close");
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()()();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](7, "main", 4);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelement"](8, "img", 5);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
      }
      if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵi18nExp"](ctx.space == null ? null : ctx.space.name);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵi18nApply"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](6);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("src", ctx.qr_code, _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵsanitizeUrl"]);
      }
    },
    dependencies: [_components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_2__.IconComponent, _angular_material_dialog__WEBPACK_IMPORTED_MODULE_4__.MatDialogClose]
  });
}

/***/ }),

/***/ 76301:
/*!*****************************************************************!*\
  !*** ./libs/explore/src/lib/explore-booking-modal.component.ts ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ExploreBookingModalComponent: () => (/* binding */ ExploreBookingModalComponent)
/* harmony export */ });
/* harmony import */ var _home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 89204);
/* harmony import */ var _angular_material_dialog__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/material/dialog */ 12587);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var libs_events_src_lib_event_form_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! libs/events/src/lib/event-form.service */ 26101);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/router */ 95072);










function ExploreBookingModalComponent_button_4_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "button", 10)(1, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](2, "close");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()();
  }
}
function ExploreBookingModalComponent_ng_container_6_main_1_div_11_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "div", 15)(1, "label", 24);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](2, "Host");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](3, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](4, "*");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](5, ":");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelement"](6, "a-user-search-field", 25);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
  }
}
function ExploreBookingModalComponent_ng_container_6_main_1_div_18_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "div", 26)(1, "label");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵi18n"](2, 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](3, "div", 27);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipe"](5, "date");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipe"](6, "date");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtextInterpolate2"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipeBind2"](5, 2, ctx_r1.form.value.date, "mediumDate"), " at ", _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipeBind2"](6, 5, ctx_r1.form.value.date, ctx_r1.time_format), " ");
  }
}
function ExploreBookingModalComponent_ng_container_6_main_1_div_19_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "div", 28)(1, "label");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵi18n"](2, 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelement"](3, "a-duration-field", 29);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("time", ctx_r1.form.value.date)("max", ctx_r1.max_duration)("use_24hr", ctx_r1.use_24hr_time);
  }
}
function ExploreBookingModalComponent_ng_container_6_main_1_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "main", 14)(1, "div", 15)(2, "label", 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](3, "Title");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](4, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](5, "*");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](6, ":");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](7, "mat-form-field", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelement"](8, "input", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](9, "mat-error");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵi18n"](10, 3);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()()();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](11, ExploreBookingModalComponent_ng_container_6_main_1_div_11_Template, 7, 0, "div", 19);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](12, "div", 15)(13, "label");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵi18n"](14, 4);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](15, "div", 20);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](16);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](17, "div", 21);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](18, ExploreBookingModalComponent_ng_container_6_main_1_div_18_Template, 7, 8, "div", 22)(19, ExploreBookingModalComponent_ng_container_6_main_1_div_19_Template, 4, 3, "div", 23);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("formGroup", ctx_r1.form);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](11);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", ctx_r1.can_book_for_others);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtextInterpolate1"](" ", (ctx_r1.form.controls.resources == null ? null : ctx_r1.form.controls.resources.value[0] == null ? null : ctx_r1.form.controls.resources.value[0].display_name) || (ctx_r1.form.controls.resources == null ? null : ctx_r1.form.controls.resources.value[0] == null ? null : ctx_r1.form.controls.resources.value[0].name), " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", ctx_r1.form.controls.date);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", ctx_r1.form.controls.duration);
  }
}
function ExploreBookingModalComponent_ng_container_6_Template(rf, ctx) {
  if (rf & 1) {
    const _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](1, ExploreBookingModalComponent_ng_container_6_main_1_Template, 20, 5, "main", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](2, "footer", 12)(3, "button", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵlistener"]("click", function ExploreBookingModalComponent_ng_container_6_Template_button_click_3_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵrestoreView"](_r1);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵresetView"](ctx_r1.save());
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵi18n"](4, 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementContainerEnd"]();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", ctx_r1.form);
  }
}
function ExploreBookingModalComponent_ng_template_8_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "div", 30);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelement"](1, "mat-spinner", 31);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](2, "p");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipe"](4, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("diameter", 48);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtextInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipeBind1"](4, 2, ctx_r1.loading));
  }
}
class ExploreBookingModalComponent {
  get form() {
    return this._event_form.form;
  }
  get max_duration() {
    return this._settings.get('app.events.max_duration') || 4 * 60;
  }
  get can_book_for_others() {
    return this._settings.get('app.events.can_book_for_others');
  }
  get use_24hr_time() {
    return this._settings.get('app.use_24_hour_time');
  }
  get time_format() {
    return this._settings.time_format;
  }
  constructor(_data, _settings, _event_form, _dialog_ref, _router) {
    this._data = _data;
    this._settings = _settings;
    this._event_form = _event_form;
    this._dialog_ref = _dialog_ref;
    this._router = _router;
    this.loading = this._event_form.loading;
  }
  ngOnInit() {
    this._event_form.newForm();
    this.form.patchValue({
      resources: [this._data.space],
      host: (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.currentUser)().email,
      organiser: (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.currentUser)()
    });
  }
  save() {
    var _this = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      yield _this._event_form.postForm().catch(_ => {
        (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.notifyError)(_);
        throw _;
      });
      if (_this._settings.app_name.toLowerCase().includes('workplace')) {
        _this._router.navigate(['/book', 'meeting', 'success']);
      } else {
        (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.notifySuccess)('Successfully booked room.');
      }
      _this._dialog_ref.close();
    })();
  }
  static #_ = this.ɵfac = function ExploreBookingModalComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || ExploreBookingModalComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵdirectiveInject"](_angular_material_dialog__WEBPACK_IMPORTED_MODULE_4__.MAT_DIALOG_DATA), _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵdirectiveInject"](_placeos_common__WEBPACK_IMPORTED_MODULE_1__.SettingsService), _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵdirectiveInject"](libs_events_src_lib_event_form_service__WEBPACK_IMPORTED_MODULE_2__.EventFormService), _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵdirectiveInject"](_angular_material_dialog__WEBPACK_IMPORTED_MODULE_4__.MatDialogRef), _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵdirectiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_5__.Router));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵdefineComponent"]({
    type: ExploreBookingModalComponent,
    selectors: [["explore-booking-modal"]],
    decls: 10,
    vars: 7,
    consts: () => {
      let i18n_0;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_6464057252608386690$$LIBS_EXPLORE_SRC_LIB_EXPLORE_BOOKING_MODAL_COMPONENT_TS_0 = goog.getMsg("New Booking");
        i18n_0 = MSG_EXTERNAL_6464057252608386690$$LIBS_EXPLORE_SRC_LIB_EXPLORE_BOOKING_MODAL_COMPONENT_TS_0;
      } else {
        i18n_0 = $localize`:␟bd532c9813cc0577fcc3ff32640a61afef2bf40a␟6464057252608386690:New Booking`;
      }
      let i18n_1;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_2367152680379951719$$LIBS_EXPLORE_SRC_LIB_EXPLORE_BOOKING_MODAL_COMPONENT_TS_1 = goog.getMsg(" Save ");
        i18n_1 = MSG_EXTERNAL_2367152680379951719$$LIBS_EXPLORE_SRC_LIB_EXPLORE_BOOKING_MODAL_COMPONENT_TS_1;
      } else {
        i18n_1 = $localize`:␟2fa313c798ad138557539ba3c6a3bfdc426eaaa2␟2367152680379951719: Save `;
      }
      let i18n_2;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_2997066279074525950$$LIBS_EXPLORE_SRC_LIB_EXPLORE_BOOKING_MODAL_COMPONENT_TS_2 = goog.getMsg("Booking Title");
        i18n_2 = MSG_EXTERNAL_2997066279074525950$$LIBS_EXPLORE_SRC_LIB_EXPLORE_BOOKING_MODAL_COMPONENT_TS_2;
      } else {
        i18n_2 = $localize`:␟5cf0071757dd8065e052662e4d191a210c766579␟2997066279074525950:Booking Title`;
      }
      let i18n_3;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_8953173802652113530$$LIBS_EXPLORE_SRC_LIB_EXPLORE_BOOKING_MODAL_COMPONENT_TS_3 = goog.getMsg("Booking title is required");
        i18n_3 = MSG_EXTERNAL_8953173802652113530$$LIBS_EXPLORE_SRC_LIB_EXPLORE_BOOKING_MODAL_COMPONENT_TS_3;
      } else {
        i18n_3 = $localize`:␟35a900d9fa8e824539ca4b0d1a10bd2f7f8c1172␟8953173802652113530:Booking title is required`;
      }
      let i18n_4;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_1329943553963489238$$LIBS_EXPLORE_SRC_LIB_EXPLORE_BOOKING_MODAL_COMPONENT_TS_4 = goog.getMsg("Space:");
        i18n_4 = MSG_EXTERNAL_1329943553963489238$$LIBS_EXPLORE_SRC_LIB_EXPLORE_BOOKING_MODAL_COMPONENT_TS_4;
      } else {
        i18n_4 = $localize`:␟0f342dcd63b8732a5599eb91ce166b55335dbbc4␟1329943553963489238:Space:`;
      }
      let i18n_5;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_6899410641137821757$$LIBS_EXPLORE_SRC_LIB_EXPLORE_BOOKING_MODAL_COMPONENT_TS_5 = goog.getMsg("Date:");
        i18n_5 = MSG_EXTERNAL_6899410641137821757$$LIBS_EXPLORE_SRC_LIB_EXPLORE_BOOKING_MODAL_COMPONENT_TS_5;
      } else {
        i18n_5 = $localize`:␟05fa0bded36de6e73a1fa44838b627349dace044␟6899410641137821757:Date:`;
      }
      let i18n_6;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_4220765745195024064$$LIBS_EXPLORE_SRC_LIB_EXPLORE_BOOKING_MODAL_COMPONENT_TS_6 = goog.getMsg("Duration:");
        i18n_6 = MSG_EXTERNAL_4220765745195024064$$LIBS_EXPLORE_SRC_LIB_EXPLORE_BOOKING_MODAL_COMPONENT_TS_6;
      } else {
        i18n_6 = $localize`:␟e17a1d75189da843f541f7764f188f2b19a97df2␟4220765745195024064:Duration:`;
      }
      return [["load_state", ""], i18n_0, i18n_1, i18n_3, i18n_4, i18n_5, i18n_6, [1, "flex-1"], ["icon", "", "matRipple", "", "mat-dialog-close", "", 4, "ngIf"], [4, "ngIf", "ngIfElse"], ["icon", "", "matRipple", "", "mat-dialog-close", ""], ["class", "p-4 max-w-[85vw]", 3, "formGroup", 4, "ngIf"], [1, "flex", "justify-center", "p-2", "border-t", "border-base-200"], ["btn", "", "matRipple", "", 1, "w-32", 3, "click"], [1, "p-4", "max-w-[85vw]", 3, "formGroup"], [1, "flex", "flex-col"], ["for", "title"], ["appearance", "outline"], ["matInput", "", "name", "title", "formControlName", "title", "placeholder", i18n_2], ["class", "flex flex-col", 4, "ngIf"], ["name", "space", 1, "px-4", "py-3", "border", "border-base-200", "rounded", "w-full", "mb-4"], [1, "flex", "sm:space-x-4", "flex-wrap"], ["class", "flex flex-col flex-1 w-full sm:w-auto", 4, "ngIf"], ["class", "flex flex-col w-full sm:w-auto", 4, "ngIf"], ["for", "host"], ["name", "host", "formControlName", "organiser", 1, "mb-4"], [1, "flex", "flex-col", "flex-1", "w-full", "sm:w-auto"], [1, "px-4", "py-3", "border", "border-base-200", "rounded", "w-full", "mb-4"], [1, "flex", "flex-col", "w-full", "sm:w-auto"], ["formControlName", "duration", 1, "w-full", 3, "time", "max", "use_24hr"], ["load", "", 1, "h-64", "flex", "flex-col", "items-center", "justify-center"], [1, "m-4", 3, "diameter"]];
    },
    template: function ExploreBookingModalComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "header")(1, "h2");
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵi18n"](2, 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelement"](3, "div", 7);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](4, ExploreBookingModalComponent_button_4_Template, 3, 0, "button", 8);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipe"](5, "async");
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](6, ExploreBookingModalComponent_ng_container_6_Template, 5, 1, "ng-container", 9);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipe"](7, "async");
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](8, ExploreBookingModalComponent_ng_template_8_Template, 5, 4, "ng-template", null, 0, _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplateRefExtractor"]);
      }
      if (rf & 2) {
        const load_state_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵreference"](9);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](4);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", !_angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipeBind1"](5, 3, ctx.loading));
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", !_angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipeBind1"](7, 5, ctx.loading))("ngIfElse", load_state_r3);
      }
    },
    styles: ["header[_ngcontent-%COMP%] {\n                max-width: calc(100vw + 100%);\n            }\n\n            [load][_ngcontent-%COMP%] {\n                width: 32rem;\n                max-width: calc(100vw - 2rem);\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImV4cGxvcmUtYm9va2luZy1tb2RhbC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLDZCQUE2QjtZQUNqQzs7WUFFQTtnQkFDSSxZQUFZO2dCQUNaLDZCQUE2QjtZQUNqQyIsImZpbGUiOiJleHBsb3JlLWJvb2tpbmctbW9kYWwuY29tcG9uZW50LnRzIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICBoZWFkZXIge1xuICAgICAgICAgICAgICAgIG1heC13aWR0aDogY2FsYygxMDB2dyArIDEwMCUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBbbG9hZF0ge1xuICAgICAgICAgICAgICAgIHdpZHRoOiAzMnJlbTtcbiAgICAgICAgICAgICAgICBtYXgtd2lkdGg6IGNhbGMoMTAwdncgLSAycmVtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl19 */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvZXhwbG9yZS9zcmMvbGliL2V4cGxvcmUtYm9va2luZy1tb2RhbC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLDZCQUE2QjtZQUNqQzs7WUFFQTtnQkFDSSxZQUFZO2dCQUNaLDZCQUE2QjtZQUNqQzs7QUFFWiw0bUJBQTRtQiIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgaGVhZGVyIHtcbiAgICAgICAgICAgICAgICBtYXgtd2lkdGg6IGNhbGMoMTAwdncgKyAxMDAlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgW2xvYWRdIHtcbiAgICAgICAgICAgICAgICB3aWR0aDogMzJyZW07XG4gICAgICAgICAgICAgICAgbWF4LXdpZHRoOiBjYWxjKDEwMHZ3IC0gMnJlbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICJdLCJzb3VyY2VSb290IjoiIn0= */"]
  });
}

/***/ }),

/***/ 82882:
/*!*************************************************************!*\
  !*** ./libs/explore/src/lib/explore-desk-info.component.ts ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ExploreDeskInfoComponent: () => (/* binding */ ExploreDeskInfoComponent)
/* harmony export */ });
/* harmony import */ var libs_components_src_lib_interactive_map_component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! libs/components/src/lib/interactive-map.component */ 24918);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _components_src_lib_custom_tooltip_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../components/src/lib/custom-tooltip.component */ 22238);





function ExploreDeskInfoComponent_ng_template_1_p_5_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](0, "p", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtextInterpolate"](ctx_r0.user);
  }
}
function ExploreDeskInfoComponent_ng_template_1_p_6_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](0, "p", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtextInterpolate1"](" ", ctx_r0.department, " ");
  }
}
function ExploreDeskInfoComponent_ng_template_1_p_7_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](0, "p", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipe"](2, "date");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipe"](3, "date");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtextInterpolate2"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipeBind2"](2, 2, ctx_r0.start, "shortTime"), " \u2013 ", _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipeBind2"](3, 5, ctx_r0.end, "shortTime"), " ");
  }
}
function ExploreDeskInfoComponent_ng_template_1_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](0, "div", 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelement"](1, "div", 3);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](2, "div", 4)(3, "h4", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](5, ExploreDeskInfoComponent_ng_template_1_p_5_Template, 2, 1, "p", 6)(6, ExploreDeskInfoComponent_ng_template_1_p_6_Template, 2, 1, "p", 7)(7, ExploreDeskInfoComponent_ng_template_1_p_7_Template, 4, 8, "p", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵclassMap"]("absolute rounded bg-base-100 p-4 top-0 left-0 shadow pointer-events-none " + ctx_r0.x_pos + " " + ctx_r0.y_pos);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("id", ctx_r0.map_id);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtextInterpolate1"](" ", ctx_r0.name || ctx_r0.map_id || ctx_r0.id, " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngIf", ctx_r0.user);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngIf", ctx_r0.user && ctx_r0.department);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngIf", ctx_r0.start);
  }
}
class ExploreDeskInfoComponent {
  constructor(_details, _element) {
    this._details = _details;
    this._element = _element;
    /** Space to display details for */
    this.id = this._details.id;
    this.map_id = this._details.map_id;
    this.name = this._details.name;
    this.user = this._details.user;
    this.start = this._details.start;
    this.end = this._details.end;
    this.status = this._details.status;
    this.department = this._details.department;
  }
  ngOnInit(tries = 0) {
    if (tries > 10) return;
    setTimeout(() => {
      const parent = this._element.nativeElement.parentElement?.parentElement;
      if (!parent) return this.ngOnInit(++tries);
      const position = {
        y: parseInt(parent.style.top, 10) / 100,
        x: parseInt(parent.style.left, 10) / 100
      };
      this.y_pos = position.y >= 0.5 ? 'bottom' : 'top';
      this.x_pos = position.x >= 0.5 ? 'right' : 'left';
    }, 200);
  }
  get available_until() {
    return '';
  }
  static #_ = this.ɵfac = function ExploreDeskInfoComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || ExploreDeskInfoComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdirectiveInject"](libs_components_src_lib_interactive_map_component__WEBPACK_IMPORTED_MODULE_0__.MAP_FEATURE_DATA), _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_2__.ElementRef));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdefineComponent"]({
    type: ExploreDeskInfoComponent,
    selectors: [["explore-desk-info"]],
    decls: 3,
    vars: 8,
    consts: [["desk_tooltip", ""], ["customTooltip", "", 1, "h-full", "w-full", "pointer-events-auto", "relative", "z-20", 3, "content", "backdrop", "xPosition", "yPosition", "hover", "delay"], ["name", "space-info", 3, "id"], [1, "arrow"], [1, "details"], ["map-id", "", 1, "m-0", "font-medium"], ["user", "", "class", "mt-2 text-sm", 4, "ngIf"], ["user", "", "class", "mt-1 text-sm", 4, "ngIf"], ["start", "", "class", "mt-1 text-sm", 4, "ngIf"], ["user", "", 1, "mt-2", "text-sm"], ["user", "", 1, "mt-1", "text-sm"], ["start", "", 1, "mt-1", "text-sm"]],
    template: function ExploreDeskInfoComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelement"](0, "div", 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](1, ExploreDeskInfoComponent_ng_template_1_Template, 8, 7, "ng-template", null, 0, _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplateRefExtractor"]);
      }
      if (rf & 2) {
        const desk_tooltip_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵreference"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("content", desk_tooltip_r2)("backdrop", false)("xPosition", "center")("yPosition", "center")("hover", true)("delay", 3000);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵattribute"]("id", ctx.id)("map_id", ctx.map_id);
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_3__.NgIf, _components_src_lib_custom_tooltip_component__WEBPACK_IMPORTED_MODULE_1__.CustomTooltipComponent, _angular_common__WEBPACK_IMPORTED_MODULE_3__.DatePipe],
    styles: ["[name='space-info'][_ngcontent-%COMP%] {\n                width: 16rem;\n            }\n\n            [name='status'][_ngcontent-%COMP%] {\n                background-color: #43a047;\n                font-weight: 500;\n            }\n\n            [name='status'].busy[_ngcontent-%COMP%] {\n                background-color: #e53935;\n            }\n\n            [name='status'].pending[_ngcontent-%COMP%] {\n                background-color: #ffb300;\n            }\n\n            [name='status'].not-bookable[_ngcontent-%COMP%] {\n                background-color: #757575;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImV4cGxvcmUtZGVzay1pbmZvLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1lBQ1k7Z0JBQ0ksWUFBWTtZQUNoQjs7WUFFQTtnQkFDSSx5QkFBeUI7Z0JBQ3pCLGdCQUFnQjtZQUNwQjs7WUFFQTtnQkFDSSx5QkFBeUI7WUFDN0I7O1lBRUE7Z0JBQ0kseUJBQXlCO1lBQzdCOztZQUVBO2dCQUNJLHlCQUF5QjtZQUM3QiIsImZpbGUiOiJleHBsb3JlLWRlc2staW5mby5jb21wb25lbnQudHMiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIFtuYW1lPSdzcGFjZS1pbmZvJ10ge1xuICAgICAgICAgICAgICAgIHdpZHRoOiAxNnJlbTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgW25hbWU9J3N0YXR1cyddIHtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjNDNhMDQ3O1xuICAgICAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIFtuYW1lPSdzdGF0dXMnXS5idXN5IHtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZTUzOTM1O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBbbmFtZT0nc3RhdHVzJ10ucGVuZGluZyB7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmYjMwMDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgW25hbWU9J3N0YXR1cyddLm5vdC1ib29rYWJsZSB7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogIzc1NzU3NTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl19 */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvZXhwbG9yZS9zcmMvbGliL2V4cGxvcmUtZGVzay1pbmZvLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1lBQ1k7Z0JBQ0ksWUFBWTtZQUNoQjs7WUFFQTtnQkFDSSx5QkFBeUI7Z0JBQ3pCLGdCQUFnQjtZQUNwQjs7WUFFQTtnQkFDSSx5QkFBeUI7WUFDN0I7O1lBRUE7Z0JBQ0kseUJBQXlCO1lBQzdCOztZQUVBO2dCQUNJLHlCQUF5QjtZQUM3Qjs7QUFFWixnbUNBQWdtQyIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgW25hbWU9J3NwYWNlLWluZm8nXSB7XG4gICAgICAgICAgICAgICAgd2lkdGg6IDE2cmVtO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBbbmFtZT0nc3RhdHVzJ10ge1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICM0M2EwNDc7XG4gICAgICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgW25hbWU9J3N0YXR1cyddLmJ1c3kge1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNlNTM5MzU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIFtuYW1lPSdzdGF0dXMnXS5wZW5kaW5nIHtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZiMzAwO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBbbmFtZT0nc3RhdHVzJ10ubm90LWJvb2thYmxlIHtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjNzU3NTc1O1xuICAgICAgICAgICAgfVxuICAgICAgICAiXSwic291cmNlUm9vdCI6IiJ9 */"]
  });
}

/***/ }),

/***/ 61104:
/*!*******************************************************!*\
  !*** ./libs/explore/src/lib/explore-desks.service.ts ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ExploreDesksService: () => (/* binding */ ExploreDesksService)
/* harmony export */ });
/* harmony import */ var _home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 89204);
/* harmony import */ var _placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @placeos/ts-client */ 35713);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! date-fns */ 56441);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! date-fns */ 99908);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! date-fns */ 33240);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! date-fns */ 28797);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! rxjs */ 90521);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! rxjs */ 71536);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! rxjs */ 68824);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! rxjs/operators */ 8627);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! rxjs/operators */ 71963);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! rxjs/operators */ 29314);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! rxjs/operators */ 35443);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! rxjs/operators */ 7841);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! rxjs/operators */ 19803);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! rxjs/operators */ 66000);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! rxjs/operators */ 33602);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! rxjs/operators */ 57871);
/* harmony import */ var libs_bookings_src_lib_booking_form_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! libs/bookings/src/lib/booking-form.service */ 18379);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var libs_organisation_src_lib_organisation_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! libs/organisation/src/lib/organisation.service */ 19863);
/* harmony import */ var libs_organisation_src_lib_desk_class__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! libs/organisation/src/lib/desk.class */ 47451);
/* harmony import */ var libs_explore_src_lib_set_datetime_modal_component__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! libs/explore/src/lib/set-datetime-modal.component */ 27146);
/* harmony import */ var _explore_desk_info_component__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./explore-desk-info.component */ 82882);
/* harmony import */ var _explore_device_info_component__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./explore-device-info.component */ 51207);
/* harmony import */ var _explore_spaces_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./explore-spaces.service */ 65897);
/* harmony import */ var _explore_state_service__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./explore-state.service */ 12455);
/* harmony import */ var libs_bookings_src_lib_bookings_fn__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! libs/bookings/src/lib/bookings.fn */ 18026);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_material_dialog__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! @angular/material/dialog */ 12587);






















class ExploreDesksService extends _placeos_common__WEBPACK_IMPORTED_MODULE_3__.AsyncHandler {
  constructor(_state, _org, _settings, _bookings, _dialog) {
    var _this;
    super();
    _this = this;
    this._state = _state;
    this._org = _org;
    this._settings = _settings;
    this._bookings = _bookings;
    this._dialog = _dialog;
    this._in_use = new rxjs__WEBPACK_IMPORTED_MODULE_12__.BehaviorSubject([]);
    this._options = new rxjs__WEBPACK_IMPORTED_MODULE_12__.BehaviorSubject({});
    this._presence = new rxjs__WEBPACK_IMPORTED_MODULE_12__.BehaviorSubject([]);
    this._signs_of_life = new rxjs__WEBPACK_IMPORTED_MODULE_12__.BehaviorSubject([]);
    this._statuses = {};
    this._users = {};
    this._departments = {};
    this._checked_in = new rxjs__WEBPACK_IMPORTED_MODULE_12__.BehaviorSubject([]);
    this.booking_rules = this._org.active_building.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.filter)(bld => !!bld), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_14__.switchMap)(bld => (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.showMetadata)(bld.id, `desk_booking_rules`).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_15__.catchError)(() => (0,rxjs__WEBPACK_IMPORTED_MODULE_16__.of)({
      details: []
    })))), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_17__.map)(_ => _?.details instanceof Array ? _.details : []), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_18__.shareReplay)(1));
    this.desk_list = this._state.level.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_19__.debounceTime)(50), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_14__.switchMap)(lvl => (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.showMetadata)(lvl.id, 'desks').pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_15__.catchError)(() => (0,rxjs__WEBPACK_IMPORTED_MODULE_16__.of)({
      details: []
    })), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_17__.map)(i => (i?.details instanceof Array ? i.details : []).map(j => new libs_organisation_src_lib_desk_class__WEBPACK_IMPORTED_MODULE_5__.Desk({
      ...j,
      zone: lvl
    }))))), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_15__.catchError)(e => []), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_18__.shareReplay)(1));
    this._bind = (0,rxjs__WEBPACK_IMPORTED_MODULE_20__.combineLatest)([this._state.level, this._state.options]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_19__.debounceTime)(300), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.filter)(([_, {
      is_public
    }]) => !!_ && !is_public), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_17__.map)(([lvl]) => {
      this._statuses = {};
      const system_id = this._org.binding('area_management');
      if (!system_id) return;
      let binding = (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.getModule)(system_id, 'AreaManagement')?.binding(lvl.id);
      if (!binding) return;
      this.subscription(`lvl-in_use`, binding.listen().subscribe(d => this.processBindingChange(d || {}, system_id)));
      this.subscription('lvl-in_use_bind', binding.bind());
    }));
    this._booking_list = (0,rxjs__WEBPACK_IMPORTED_MODULE_20__.combineLatest)([this._options, this._state.level]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.filter)(([_, lvl]) => (_.use_api || _.date > (0,date_fns__WEBPACK_IMPORTED_MODULE_21__.endOfDay)(Date.now()).valueOf()) && !!lvl), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_14__.switchMap)(([_, level]) => {
      return (0,libs_bookings_src_lib_bookings_fn__WEBPACK_IMPORTED_MODULE_11__.queryBookings)({
        type: 'desk',
        period_start: (0,date_fns__WEBPACK_IMPORTED_MODULE_22__.getUnixTime)((0,date_fns__WEBPACK_IMPORTED_MODULE_23__.startOfDay)(_.date || Date.now())),
        period_end: (0,date_fns__WEBPACK_IMPORTED_MODULE_22__.getUnixTime)((0,date_fns__WEBPACK_IMPORTED_MODULE_21__.endOfDay)(_.date || Date.now())),
        zones: level.id
      });
    }), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_19__.debounceTime)(200), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_24__.tap)(bookings => {
      this._in_use.next(bookings.map(_ => _.asset_id));
      this._checked_in.next(bookings.filter(_ => _.checked_in).map(_ => _.asset_id));
    }), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_18__.shareReplay)(1));
    this._state_change = (0,rxjs__WEBPACK_IMPORTED_MODULE_20__.combineLatest)([this.desk_list, this._in_use, this._presence, this._checked_in, this._signs_of_life, this.booking_rules, this._options]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_19__.debounceTime)(50), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_17__.map)( /*#__PURE__*/function () {
      var _ref = (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* ([desks, in_use, presence, checked_in, signs, restrictions]) {
        _this._statuses = {};
        const level = yield _this._state.level.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_25__.take)(1)).toPromise();
        for (const {
          id,
          bookable
        } of desks) {
          const is_used = in_use.some(i => id === i);
          const has_presence = presence.some(i => id === i);
          const has_signs = signs.some(i => id === i);
          const is_checked_in = checked_in.some(i => id === i) || is_used && _this._settings.get(`app.desk.auto_checkin`);
          const is_restricted = (0,_placeos_common__WEBPACK_IMPORTED_MODULE_3__.rulesForResource)({
            date: Date.now(),
            duration: 60,
            host: (0,_placeos_common__WEBPACK_IMPORTED_MODULE_3__.currentUser)(),
            resource: {
              id,
              zones: [level.parent_id, level.id]
            }
          }, restrictions)?.hidden;
          _this._statuses[id] = bookable && !is_restricted ? !is_used && !has_presence && !is_checked_in ? has_signs ? 'signs-of-life' : 'free' : !has_presence && !is_checked_in ? 'pending' : 'busy' : 'not-bookable';
        }
        _this.processDesks(desks);
      });
      return function (_x) {
        return _ref.apply(this, arguments);
      };
    }()));
    this.init();
  }
  init() {
    var _this2 = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      yield _this2._org.initialised.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_26__.first)(_ => _)).toPromise();
      _this2.setOptions({
        enable_booking: _this2._settings.get('app.desks.enable_maps') !== false
      });
      _this2.subscription('bookings', _this2._booking_list.subscribe());
      _this2.subscription('bind', _this2._bind.subscribe());
      _this2.subscription('booking_rules', _this2.booking_rules.subscribe());
      _this2.subscription('changes', _this2._state_change.subscribe());
      _this2.subscription('desks', _this2.desk_list.subscribe(desks => _this2.processDesks(desks)));
    })();
  }
  setOptions(options) {
    this._options.next({
      ...this._options.getValue(),
      ...options
    });
  }
  processBindingChange({
    value
  }, system_id) {
    const devices = (value || []).filter(v => !['desk', 'booking'].includes(v.location));
    const desks = (value || []).filter(v => v.location === 'desk' || v.location === 'booking' && v.type === 'desk');
    const date = this._options.getValue().date || Date.now();
    if (date <= (0,date_fns__WEBPACK_IMPORTED_MODULE_21__.endOfDay)(Date.now()).valueOf() && !this._options.getValue().use_api) {
      this._in_use.next(desks.filter(v => v.location === 'booking').map(v => v.map_id || v.asset_id));
      this._checked_in.next(desks.filter(v => v.location === 'booking' && v.checked_in).map(v => v.map_id || v.asset_id));
      this._presence.next(desks.filter(v => v.at_location).map(v => v.map_id || v.asset_id));
      this._signs_of_life.next(desks.filter(v => v.signs_of_life).map(v => v.map_id || v.asset_id));
    }
    const departments = this._settings.get('app.department_map') || {};
    for (const desk of desks) {
      this._users[desk.map_id || desk.asset_id] = desk.staff_name;
      this._departments[desk.map_id || desk.asset_id] = departments[desk.department] || '';
    }
    this.processDevices(devices, system_id);
    this.timeout('update', () => this.updateStatus(), 100);
  }
  updateStatus() {
    const style_map = {};
    const colours = this._settings.get('app.explore.colors') || {};
    for (const desk_id in this._statuses) {
      if (!this._statuses[desk_id]) continue;
      style_map[`#${desk_id}`] = {
        fill: colours[`desk-${this._statuses[desk_id]}`] || colours[`${this._statuses[desk_id]}`] || _explore_spaces_service__WEBPACK_IMPORTED_MODULE_9__.DEFAULT_COLOURS[`${this._statuses[desk_id]}`]
      };
    }
    this._state.setStyles('desks', style_map);
  }
  processDevices(devices, system_id) {
    const list = [];
    for (const device of devices) {
      const x = device.x / device.map_width;
      const y = device.y / device.map_height;
      list.push({
        track_id: `device:hover:${x},${y}`,
        location: {
          x: device.coordinates_from?.includes('right') ? 1 - x : x,
          y: device.coordinates_from?.includes('bottom') ? 1 - y : y
        },
        content: _explore_device_info_component__WEBPACK_IMPORTED_MODULE_8__.ExploreDeviceInfoComponent,
        z_index: 20,
        data: {
          ...device,
          system: system_id
        }
      });
    }
    this._state.setFeatures('devices', list);
  }
  processDesks(desks) {
    var _this3 = this;
    const list = [];
    const actions = [];
    const options = this._options.getValue();
    for (const desk of desks) {
      list.push({
        track_id: `desk:hover:${desk.map_id || desk.id}`,
        location: desk.id,
        content: _explore_desk_info_component__WEBPACK_IMPORTED_MODULE_7__.ExploreDeskInfoComponent,
        full_size: true,
        no_scale: true,
        data: {
          id: desk.map_id || desk.id,
          map_id: desk.name,
          name: desk.name || desk.map_id,
          user: this._users[desk.map_id] || desk.staff_name,
          status: this._statuses[desk.map_id],
          department: this._departments[desk.map_id] || ''
        },
        z_index: 20
      });
      if (!desk.bookable) continue;
      let can_book = true;
      const book_fn = /*#__PURE__*/function () {
        var _ref2 = (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
          if (!can_book) return;
          if (_this3._statuses[desk.id] !== 'free') {
            return (0,_placeos_common__WEBPACK_IMPORTED_MODULE_3__.notifyError)(`${desk.name || 'Desk'} is unavailable at this time.`);
          }
          if (desk.groups?.length && !desk.groups.find(_ => (0,_placeos_common__WEBPACK_IMPORTED_MODULE_3__.currentUser)().groups.includes(_))) {
            return (0,_placeos_common__WEBPACK_IMPORTED_MODULE_3__.notifyError)(`You are not allowed to book ${desk.name}.`);
          }
          _this3._bookings.newForm();
          _this3._bookings.setOptions({
            type: 'desk'
          });
          if (options.date) {
            _this3._bookings.form.patchValue({
              date: options.date
            });
            _this3._bookings.form.patchValue({
              all_day: !!options.all_day
            });
          }
          let {
            date,
            duration,
            user
          } = yield _this3._setBookingTime(_this3._bookings.form.value.date, _this3._bookings.form.value.duration, _this3._options.getValue()?.custom ?? false, desk);
          user = user || options.host || (0,_placeos_common__WEBPACK_IMPORTED_MODULE_3__.currentUser)();
          const user_email = user?.email;
          _this3._bookings.form.patchValue({
            resources: [desk],
            asset_id: desk.id,
            asset_name: desk.name,
            date,
            duration: options.all_day ? 12 * 60 : duration,
            map_id: desk?.map_id || desk?.id,
            description: desk.name,
            user,
            user_email,
            booking_type: 'desk',
            zones: desk.zone ? [desk.zone?.parent_id, desk.zone?.id] : []
          });
          yield _this3._bookings.confirmPost().catch(e => {
            console.log(e);
            (0,_placeos_common__WEBPACK_IMPORTED_MODULE_3__.notifyError)(`Failed to book desk ${desk.name || desk.id}. ${e.message || e.error || e}`);
            throw e;
          });
          _this3._users[desk.map_id] = (options.host || (0,_placeos_common__WEBPACK_IMPORTED_MODULE_3__.currentUser)())?.name;
          (0,_placeos_common__WEBPACK_IMPORTED_MODULE_3__.notifySuccess)(`Successfully booked desk ${desk.name || desk.id}`);
        });
        return function book_fn() {
          return _ref2.apply(this, arguments);
        };
      }();
      ['mousedown', 'touchstart'].forEach(event => actions.push({
        id: desk.id,
        action: event,
        priority: 10,
        callback: () => {
          can_book = true;
          this.timeout('booking', () => can_book = false);
        }
      }));
      ['mouseup', 'touchend'].forEach(event => actions.push({
        id: desk.id,
        action: event,
        priority: 10,
        callback: book_fn
      }));
    }
    this._state.setActions('desks', this._options.getValue().enable_booking ? actions : []);
    this._state.setFeatures('desks', list);
    this.timeout('update', () => this.updateStatus(), 100);
  }
  _setBookingTime(date, duration, host = false, resource = null) {
    var _this4 = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      let user = null;
      if (!!_this4._settings.get('app.desks.allow_time_changes')) {
        const until = (0,date_fns__WEBPACK_IMPORTED_MODULE_21__.endOfDay)((0,date_fns__WEBPACK_IMPORTED_MODULE_27__.addDays)(Date.now(), _this4._settings.get('app.desks.available_period') || 90));
        const ref = _this4._dialog.open(libs_explore_src_lib_set_datetime_modal_component__WEBPACK_IMPORTED_MODULE_6__.SetDatetimeModalComponent, {
          data: {
            date,
            duration,
            until,
            host,
            resource
          }
        });
        const details = yield ref.afterClosed().toPromise();
        if (!details) throw 'User cancelled';
        date = details.date;
        duration = details.duration;
        user = details.user;
      }
      return {
        date,
        duration,
        user
      };
    })();
  }
  static #_ = this.ɵfac = function ExploreDesksService_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || ExploreDesksService)(_angular_core__WEBPACK_IMPORTED_MODULE_28__["ɵɵinject"](_explore_state_service__WEBPACK_IMPORTED_MODULE_10__.ExploreStateService), _angular_core__WEBPACK_IMPORTED_MODULE_28__["ɵɵinject"](libs_organisation_src_lib_organisation_service__WEBPACK_IMPORTED_MODULE_4__.OrganisationService), _angular_core__WEBPACK_IMPORTED_MODULE_28__["ɵɵinject"](_placeos_common__WEBPACK_IMPORTED_MODULE_3__.SettingsService), _angular_core__WEBPACK_IMPORTED_MODULE_28__["ɵɵinject"](libs_bookings_src_lib_booking_form_service__WEBPACK_IMPORTED_MODULE_2__.BookingFormService), _angular_core__WEBPACK_IMPORTED_MODULE_28__["ɵɵinject"](_angular_material_dialog__WEBPACK_IMPORTED_MODULE_29__.MatDialog));
  };
  static #_2 = this.ɵprov = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_28__["ɵɵdefineInjectable"]({
    token: ExploreDesksService,
    factory: ExploreDesksService.ɵfac
  });
}

/***/ }),

/***/ 51207:
/*!***************************************************************!*\
  !*** ./libs/explore/src/lib/explore-device-info.component.ts ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ExploreDeviceInfoComponent: () => (/* binding */ ExploreDeviceInfoComponent)
/* harmony export */ });
/* harmony import */ var _home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 89204);
/* harmony import */ var _placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @placeos/ts-client */ 35713);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! date-fns */ 36156);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! date-fns */ 1874);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var libs_components_src_lib_interactive_map_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! libs/components/src/lib/interactive-map.component */ 24918);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _components_src_lib_custom_tooltip_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../components/src/lib/custom-tooltip.component */ 22238);










const _c0 = ["explore-device-info", ""];
function ExploreDeviceInfoComponent_ng_template_5_p_3_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "p", 23)(1, "label");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵi18n"](2, 4);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtextInterpolate1"](" ", ctx_r2.mac, " ");
  }
}
function ExploreDeviceInfoComponent_ng_template_5_p_12_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "p", 24)(1, "label");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵi18n"](2, 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtextInterpolate1"](" ", ctx_r2.manufacturer, " ");
  }
}
function ExploreDeviceInfoComponent_ng_template_5_p_13_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "p", 25)(1, "label");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵi18n"](2, 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtextInterpolate1"](" ", ctx_r2.os, " ");
  }
}
function ExploreDeviceInfoComponent_ng_template_5_p_14_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "p", 26)(1, "label");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵi18n"](2, 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtextInterpolate1"](" ", ctx_r2.ssid, " ");
  }
}
function ExploreDeviceInfoComponent_ng_template_5_p_15_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "p", 27)(1, "label");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵi18n"](2, 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtextInterpolate1"](" ", (ctx_r2.user == null ? null : ctx_r2.user.name) || (ctx_r2.user == null ? null : ctx_r2.user.username) || ctx_r2.username, " ");
  }
}
function ExploreDeviceInfoComponent_ng_template_5_p_16_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "p", 28)(1, "label");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵi18n"](2, 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtextInterpolate1"](" ", ctx_r2.user.type, " ");
  }
}
function ExploreDeviceInfoComponent_ng_template_5_Template(rf, ctx) {
  if (rf & 1) {
    const _r2 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "div", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("mouseleave", function ExploreDeviceInfoComponent_ng_template_5_Template_div_mouseleave_0_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵrestoreView"](_r2);
      const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵresetView"](ctx_r2.close());
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelement"](1, "div", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](2, "div", 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](3, ExploreDeviceInfoComponent_ng_template_5_p_3_Template, 4, 1, "p", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](4, "p")(5, "label");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵi18n"](6, 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](7);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](8, "p")(9, "label");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵi18n"](10, 3);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](11);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](12, ExploreDeviceInfoComponent_ng_template_5_p_12_Template, 4, 1, "p", 18)(13, ExploreDeviceInfoComponent_ng_template_5_p_13_Template, 4, 1, "p", 19)(14, ExploreDeviceInfoComponent_ng_template_5_p_14_Template, 4, 1, "p", 20)(15, ExploreDeviceInfoComponent_ng_template_5_p_15_Template, 4, 1, "p", 21)(16, ExploreDeviceInfoComponent_ng_template_5_p_16_Template, 4, 1, "p", 22);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngIf", ctx_r2.mac && !ctx_r2.hide_fields.includes("mac"));
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtextInterpolate1"](" ", ctx_r2.variance, "m");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtextInterpolate1"](" ", ctx_r2.last_seen, "");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngIf", ctx_r2.manufacturer && !ctx_r2.hide_fields.includes("manufacturer"));
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngIf", ctx_r2.os && !ctx_r2.hide_fields.includes("os"));
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngIf", ctx_r2.ssid && !ctx_r2.hide_fields.includes("ssid"));
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngIf", ctx_r2.username && !ctx_r2.hide_fields.includes("username"));
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngIf", ctx_r2.user && !ctx_r2.hide_fields.includes("user"));
  }
}
const EMPTY = [];
class ExploreDeviceInfoComponent extends _placeos_common__WEBPACK_IMPORTED_MODULE_2__.AsyncHandler {
  get hide_fields() {
    return this._settings.get('app.explore.hide_device_fields') || EMPTY;
  }
  /** Time of the last update */
  get last_seen() {
    return (0,date_fns__WEBPACK_IMPORTED_MODULE_6__.formatDistanceToNow)((this._details.last_seen || 0) * 1000, {
      addSuffix: true
    });
  }
  /** Diameter of the radius circle */
  get diameter() {
    return this._details.variance * 100 * this.zoom;
  }
  get distance() {
    return Math.abs((0,date_fns__WEBPACK_IMPORTED_MODULE_7__.differenceInMinutes)((this._details.last_seen || 0) * 1000, new Date()));
  }
  get distance_color() {
    return this.distance < 10 ? '#43a047' : this.distance < 20 ? '#ffb300' : '#e53935';
  }
  constructor(_details, _settings, _element) {
    super();
    this._details = _details;
    this._settings = _settings;
    this._element = _element;
    /** Name of the user associated with the mac address */
    this.username = '';
    /** User details associated with device */
    this.user = this._details.user;
    /** Mac Address of the device */
    this.mac = this._details.mac;
    /** Mac Address of the device */
    this.manufacturer = this._details.manufacturer;
    /** Mac Address of the device */
    this.os = this._details.os;
    /** Mac Address of the device */
    this.ssid = this._details.ssid;
    /** Accuracy of the location data */
    this.variance = this._details.variance?.toFixed(2);
    /** Background color for the dot */
    this.bg_color = this._details.bg_color || this.distance_color;
    this.zoom = 1;
  }
  ngOnInit(tries = 0) {
    if (tries > 10) return;
    setTimeout(() => {
      const parent = this._element.nativeElement.parentElement?.parentElement;
      if (!parent) return this.ngOnInit(++tries);
      const position = {
        y: parseInt(parent.style.top, 10) / 100,
        x: parseInt(parent.style.left, 10) / 100
      };
      this.y_pos = position.y >= 0.5 ? 'bottom' : 'top';
      this.x_pos = position.x >= 0.5 ? 'end' : 'start';
      this.subscription('zoom', this._details.zoom$.subscribe(_ => this.zoom = _));
    }, 200);
  }
  loadUser() {
    var _this = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      if (_this.username) return;
      const mod = (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.getModule)(_this._details.system, 'LocationServices');
      if (!mod) return;
      _this.username = 'Loading...';
      const details = yield mod.execute('check_ownership_of', [_this.mac]).catch(_ => null);
      _this.username = details && details.assigned_to ? details.assigned_to : '';
    })();
  }
  static #_ = this.ɵfac = function ExploreDeviceInfoComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || ExploreDeviceInfoComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵdirectiveInject"](libs_components_src_lib_interactive_map_component__WEBPACK_IMPORTED_MODULE_3__.MAP_FEATURE_DATA), _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵdirectiveInject"](_placeos_common__WEBPACK_IMPORTED_MODULE_2__.SettingsService), _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_5__.ElementRef));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵdefineComponent"]({
    type: ExploreDeviceInfoComponent,
    selectors: [["", "explore-device-info", ""]],
    features: [_angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵInheritDefinitionFeature"]],
    attrs: _c0,
    decls: 7,
    vars: 9,
    consts: () => {
      let i18n_0;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_1921442792032576180$$LIBS_EXPLORE_SRC_LIB_EXPLORE_DEVICE_INFO_COMPONENT_TS_0 = goog.getMsg("Accuracy:");
        i18n_0 = MSG_EXTERNAL_1921442792032576180$$LIBS_EXPLORE_SRC_LIB_EXPLORE_DEVICE_INFO_COMPONENT_TS_0;
      } else {
        i18n_0 = $localize`:␟4e79bc7b2a23c2e4e80d256c8167411cf124bd20␟1921442792032576180:Accuracy:`;
      }
      let i18n_1;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_5291488112436395082$$LIBS_EXPLORE_SRC_LIB_EXPLORE_DEVICE_INFO_COMPONENT_TS_1 = goog.getMsg("Last Seen:");
        i18n_1 = MSG_EXTERNAL_5291488112436395082$$LIBS_EXPLORE_SRC_LIB_EXPLORE_DEVICE_INFO_COMPONENT_TS_1;
      } else {
        i18n_1 = $localize`:␟1c564bebf178f9c70f2c66a80393137bfa0d2ea8␟5291488112436395082:Last Seen:`;
      }
      let i18n_2;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_5080596488336446120$$LIBS_EXPLORE_SRC_LIB_EXPLORE_DEVICE_INFO_COMPONENT_TS_2 = goog.getMsg("MAC:");
        i18n_2 = MSG_EXTERNAL_5080596488336446120$$LIBS_EXPLORE_SRC_LIB_EXPLORE_DEVICE_INFO_COMPONENT_TS_2;
      } else {
        i18n_2 = $localize`:␟14802d5580219b4522c9c50e1a9f401aee191e1e␟5080596488336446120:MAC:`;
      }
      let i18n_3;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_6296767522110275448$$LIBS_EXPLORE_SRC_LIB_EXPLORE_DEVICE_INFO_COMPONENT_TS_3 = goog.getMsg("Manufacturer:");
        i18n_3 = MSG_EXTERNAL_6296767522110275448$$LIBS_EXPLORE_SRC_LIB_EXPLORE_DEVICE_INFO_COMPONENT_TS_3;
      } else {
        i18n_3 = $localize`:␟a082daef9c0b66268ce56dfa8d96d47a04d2c4b1␟6296767522110275448:Manufacturer:`;
      }
      let i18n_4;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_2346706060395913038$$LIBS_EXPLORE_SRC_LIB_EXPLORE_DEVICE_INFO_COMPONENT_TS_4 = goog.getMsg("OS:");
        i18n_4 = MSG_EXTERNAL_2346706060395913038$$LIBS_EXPLORE_SRC_LIB_EXPLORE_DEVICE_INFO_COMPONENT_TS_4;
      } else {
        i18n_4 = $localize`:␟5544405b325c518c94412239610d44250d5a223a␟2346706060395913038:OS:`;
      }
      let i18n_5;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_4345272263810420547$$LIBS_EXPLORE_SRC_LIB_EXPLORE_DEVICE_INFO_COMPONENT_TS_5 = goog.getMsg("SSID:");
        i18n_5 = MSG_EXTERNAL_4345272263810420547$$LIBS_EXPLORE_SRC_LIB_EXPLORE_DEVICE_INFO_COMPONENT_TS_5;
      } else {
        i18n_5 = $localize`:␟afd0fc7b37f54299537ba2abc9babf749adf383e␟4345272263810420547:SSID:`;
      }
      let i18n_6;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_140822705245800362$$LIBS_EXPLORE_SRC_LIB_EXPLORE_DEVICE_INFO_COMPONENT_TS_6 = goog.getMsg("Username:");
        i18n_6 = MSG_EXTERNAL_140822705245800362$$LIBS_EXPLORE_SRC_LIB_EXPLORE_DEVICE_INFO_COMPONENT_TS_6;
      } else {
        i18n_6 = $localize`:␟67fc3fe0566f8700b84a908c35497759db78addc␟140822705245800362:Username:`;
      }
      let i18n_7;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_2736556170366900089$$LIBS_EXPLORE_SRC_LIB_EXPLORE_DEVICE_INFO_COMPONENT_TS_7 = goog.getMsg("Type:");
        i18n_7 = MSG_EXTERNAL_2736556170366900089$$LIBS_EXPLORE_SRC_LIB_EXPLORE_DEVICE_INFO_COMPONENT_TS_7;
      } else {
        i18n_7 = $localize`:␟e78c0d60ac39787f62c9159646fe0b3c1ed55a1d␟2736556170366900089:Type:`;
      }
      return [["dot", ""], ["device_tooltip", ""], i18n_0, i18n_1, i18n_2, i18n_3, i18n_4, i18n_5, i18n_6, i18n_7, ["name", "radius", 1, "radius", "absolute", "center", "bg-info", "bg-opacity-25", "border-8", "border-dashed", "border-blue-600", "rounded-full"], ["shadow", "", 1, "absolute", "center", "bg-neutral", "h-8", "w-8", "rounded-full"], ["name", "dot", 1, "h-3", "w-3", "absolute", "center", "rounded-full", "shadow", "border-2", "border-white"], ["customTooltip", "", 1, "absolute", "inset-0", "pointer-events-auto", 3, "mouseenter", "content", "backdrop", "xPosition", "yPosition", "hover"], ["name", "device-info", 1, "w-64", "rounded", "bg-base-100", "p-4", "top-0", "left-0", "shadow", "pointer-events-none", "mx-2", 3, "mouseleave"], [1, "arrow"], [1, "details"], ["class", "break-words", 4, "ngIf"], ["type", "", 4, "ngIf"], ["os", "", 4, "ngIf"], ["ssid", "", 4, "ngIf"], ["username", "", 4, "ngIf"], ["user", "", 4, "ngIf"], [1, "break-words"], ["type", ""], ["os", ""], ["ssid", ""], ["username", ""], ["user", ""]];
    },
    template: function ExploreDeviceInfoComponent_Template(rf, ctx) {
      if (rf & 1) {
        const _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵgetCurrentView"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelement"](0, "div", 10)(1, "div", 11)(2, "div", 12, 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](4, "div", 13);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("mouseenter", function ExploreDeviceInfoComponent_Template_div_mouseenter_4_listener() {
          _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵrestoreView"](_r1);
          return _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵresetView"](ctx.loadUser());
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](5, ExploreDeviceInfoComponent_ng_template_5_Template, 17, 8, "ng-template", null, 1, _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplateRefExtractor"]);
      }
      if (rf & 2) {
        const device_tooltip_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵreference"](6);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵstyleMap"]("height: " + ctx.diameter + "%; width: " + ctx.diameter + "%;");
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵstyleProp"]("background-color", ctx.bg_color);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("content", device_tooltip_r4)("backdrop", false)("xPosition", ctx.x_pos)("yPosition", ctx.y_pos)("hover", true);
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_8__.NgIf, _components_src_lib_custom_tooltip_component__WEBPACK_IMPORTED_MODULE_4__.CustomTooltipComponent],
    styles: ["[_nghost-%COMP%] {\n                pointer-events: auto;\n            }\n\n            [_nghost-%COMP%]    > [name='dot'][_ngcontent-%COMP%] {\n                background-color: #616161;\n            }\n\n            [_nghost-%COMP%]:hover    > [name='radius'][_ngcontent-%COMP%] {\n                opacity: 1;\n            }\n\n            [name='radius'][_ngcontent-%COMP%] {\n                opacity: 0;\n                transition: opacity 200ms;\n                pointer-events: none;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImV4cGxvcmUtZGV2aWNlLWluZm8uY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxvQkFBb0I7WUFDeEI7O1lBRUE7Z0JBQ0kseUJBQXlCO1lBQzdCOztZQUVBO2dCQUNJLFVBQVU7WUFDZDs7WUFFQTtnQkFDSSxVQUFVO2dCQUNWLHlCQUF5QjtnQkFDekIsb0JBQW9CO1lBQ3hCIiwiZmlsZSI6ImV4cGxvcmUtZGV2aWNlLWluZm8uY29tcG9uZW50LnRzIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICA6aG9zdCB7XG4gICAgICAgICAgICAgICAgcG9pbnRlci1ldmVudHM6IGF1dG87XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIDpob3N0ID4gW25hbWU9J2RvdCddIHtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjNjE2MTYxO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICA6aG9zdDpob3ZlciA+IFtuYW1lPSdyYWRpdXMnXSB7XG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgW25hbWU9J3JhZGl1cyddIHtcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAwO1xuICAgICAgICAgICAgICAgIHRyYW5zaXRpb246IG9wYWNpdHkgMjAwbXM7XG4gICAgICAgICAgICAgICAgcG9pbnRlci1ldmVudHM6IG5vbmU7XG4gICAgICAgICAgICB9XG4gICAgICAgICJdfQ== */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvZXhwbG9yZS9zcmMvbGliL2V4cGxvcmUtZGV2aWNlLWluZm8uY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxvQkFBb0I7WUFDeEI7O1lBRUE7Z0JBQ0kseUJBQXlCO1lBQzdCOztZQUVBO2dCQUNJLFVBQVU7WUFDZDs7WUFFQTtnQkFDSSxVQUFVO2dCQUNWLHlCQUF5QjtnQkFDekIsb0JBQW9CO1lBQ3hCOztBQUVaLGcrQkFBZytCIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICA6aG9zdCB7XG4gICAgICAgICAgICAgICAgcG9pbnRlci1ldmVudHM6IGF1dG87XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIDpob3N0ID4gW25hbWU9J2RvdCddIHtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjNjE2MTYxO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICA6aG9zdDpob3ZlciA+IFtuYW1lPSdyYWRpdXMnXSB7XG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgW25hbWU9J3JhZGl1cyddIHtcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAwO1xuICAgICAgICAgICAgICAgIHRyYW5zaXRpb246IG9wYWNpdHkgMjAwbXM7XG4gICAgICAgICAgICAgICAgcG9pbnRlci1ldmVudHM6IG5vbmU7XG4gICAgICAgICAgICB9XG4gICAgICAgICJdLCJzb3VyY2VSb290IjoiIn0= */"]
  });
}

/***/ }),

/***/ 83207:
/*!********************************************************!*\
  !*** ./libs/explore/src/lib/explore-icon.component.ts ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ExploreIconComponent: () => (/* binding */ ExploreIconComponent)
/* harmony export */ });
/* harmony import */ var _placeos_components__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/components */ 51588);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../components/src/lib/icon.component */ 69434);



class ExploreIconComponent {
  constructor(_details) {
    this._details = _details;
    this.icon = this._details.icon || {
      content: 'done'
    };
    this.color = this._details.color || 'var(--in)';
    this.text_color = this._details.text_color || 'var(--inc)';
  }
  static #_ = this.ɵfac = function ExploreIconComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || ExploreIconComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdirectiveInject"](_placeos_components__WEBPACK_IMPORTED_MODULE_0__.MAP_FEATURE_DATA));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdefineComponent"]({
    type: ExploreIconComponent,
    selectors: [["explore-icon"]],
    decls: 2,
    vars: 5,
    consts: [[1, "flex", "items-center", "justify-center", "h-8", "w-8", "shadow", "rounded-full", "border", "border-base-200"], [1, "text-xl", 3, "icon"]],
    template: function ExploreIconComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](0, "div", 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelement"](1, "app-icon", 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
      }
      if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵstyleProp"]("background-color", ctx.color)("color", ctx.text_color);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("icon", ctx.icon);
      }
    },
    dependencies: [_components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_1__.IconComponent],
    styles: ["[_nghost-%COMP%] {\n                display: flex;\n                height: 100%;\n                width: 100%;\n                align-items: end;\n                justify-content: end;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImV4cGxvcmUtaWNvbi5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLGFBQWE7Z0JBQ2IsWUFBWTtnQkFDWixXQUFXO2dCQUNYLGdCQUFnQjtnQkFDaEIsb0JBQW9CO1lBQ3hCIiwiZmlsZSI6ImV4cGxvcmUtaWNvbi5jb21wb25lbnQudHMiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIDpob3N0IHtcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICAgICAgICBhbGlnbi1pdGVtczogZW5kO1xuICAgICAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogZW5kO1xuICAgICAgICAgICAgfVxuICAgICAgICAiXX0= */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvZXhwbG9yZS9zcmMvbGliL2V4cGxvcmUtaWNvbi5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLGFBQWE7Z0JBQ2IsWUFBWTtnQkFDWixXQUFXO2dCQUNYLGdCQUFnQjtnQkFDaEIsb0JBQW9CO1lBQ3hCOztBQUVaLG9tQkFBb21CIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICA6aG9zdCB7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICAgICAgYWxpZ24taXRlbXM6IGVuZDtcbiAgICAgICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGVuZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl0sInNvdXJjZVJvb3QiOiIifQ== */"]
  });
}

/***/ }),

/***/ 84810:
/*!********************************************************************!*\
  !*** ./libs/explore/src/lib/explore-locker-bank-info.component.ts ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ExploreLockerBankInfoComponent: () => (/* binding */ ExploreLockerBankInfoComponent)
/* harmony export */ });
/* harmony import */ var _placeos_components__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/components */ 51588);
/* harmony import */ var _explore_locker_bank_modal_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./explore-locker-bank-modal.component */ 50795);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_material_dialog__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/material/dialog */ 12587);
/* harmony import */ var _components_src_lib_custom_tooltip_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../components/src/lib/custom-tooltip.component */ 22238);







function ExploreLockerBankInfoComponent_ng_template_2_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "div", 3)(1, "h3", 4);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](3, "p", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵclassMap"]("absolute rounded bg-base-100 p-4 top-0 left-0 shadow pointer-events-none " + ctx_r1.x_pos + " " + ctx_r1.y_pos);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("id", ctx_r1.map_id);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtextInterpolate"](ctx_r1.bank.name);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtextInterpolate2"](" ", ctx_r1.in_use_count, " lockers in use of ", ctx_r1.bank.lockers.length || 1, " ");
  }
}
class ExploreLockerBankInfoComponent {
  constructor(_details, _element, _dialog) {
    this._details = _details;
    this._element = _element;
    this._dialog = _dialog;
    this.bank = this._details.bank;
    this.in_use_count = this._details.in_use_count;
  }
  ngOnInit(tries = 0) {
    if (tries > 10) return;
    setTimeout(() => {
      const parent = this._element.nativeElement.parentElement?.parentElement;
      if (!parent) return this.ngOnInit(++tries);
      const position = {
        y: parseInt(parent.style.top, 10) / 100,
        x: parseInt(parent.style.left, 10) / 100
      };
      this.y_pos = position.y >= 0.5 ? 'bottom' : 'top';
      this.x_pos = position.x >= 0.5 ? 'right' : 'left';
    }, 200);
  }
  openBankModal() {
    this._dialog.open(_explore_locker_bank_modal_component__WEBPACK_IMPORTED_MODULE_1__.ExploreLockerBankModalComponent, {
      data: {
        ...this._details
      }
    });
  }
  static #_ = this.ɵfac = function ExploreLockerBankInfoComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || ExploreLockerBankInfoComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵdirectiveInject"](_placeos_components__WEBPACK_IMPORTED_MODULE_0__.MAP_FEATURE_DATA), _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_3__.ElementRef), _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵdirectiveInject"](_angular_material_dialog__WEBPACK_IMPORTED_MODULE_4__.MatDialog));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵdefineComponent"]({
    type: ExploreLockerBankInfoComponent,
    selectors: [["explore-locker-bank-info"]],
    decls: 4,
    vars: 6,
    consts: [["desk_tooltip", ""], [1, "h-full", "w-full", "pointer-events-auto", "relative", 3, "click"], ["customTooltip", "", 1, "h-full", "w-full", "pointer-events-auto", "relative", 3, "content", "backdrop", "xPosition", "yPosition", "hover", "delay"], ["name", "space-info", 3, "id"], [1, "font-medium"], [1, "whitespace-nowrap", "text-sm"]],
    template: function ExploreLockerBankInfoComponent_Template(rf, ctx) {
      if (rf & 1) {
        const _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵgetCurrentView"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "button", 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵlistener"]("click", function ExploreLockerBankInfoComponent_Template_button_click_0_listener() {
          _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵrestoreView"](_r1);
          return _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵresetView"](ctx.openBankModal());
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelement"](1, "div", 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](2, ExploreLockerBankInfoComponent_ng_template_2_Template, 5, 6, "ng-template", null, 0, _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplateRefExtractor"]);
      }
      if (rf & 2) {
        const desk_tooltip_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵreference"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("content", desk_tooltip_r3)("backdrop", false)("xPosition", "center")("yPosition", "center")("hover", true)("delay", 3000);
      }
    },
    dependencies: [_components_src_lib_custom_tooltip_component__WEBPACK_IMPORTED_MODULE_2__.CustomTooltipComponent]
  });
}

/***/ }),

/***/ 50795:
/*!*********************************************************************!*\
  !*** ./libs/explore/src/lib/explore-locker-bank-modal.component.ts ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ExploreLockerBankModalComponent: () => (/* binding */ ExploreLockerBankModalComponent)
/* harmony export */ });
/* harmony import */ var _angular_material_dialog__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/material/dialog */ 12587);
/* harmony import */ var libs_bookings_src_lib_lockers_service__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! libs/bookings/src/lib/lockers.service */ 98796);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../components/src/lib/icon.component */ 69434);
/* harmony import */ var _angular_material_core__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/material/core */ 74646);
/* harmony import */ var _bookings_src_lib_locker_grid_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../bookings/src/lib/locker-grid.component */ 84854);







class ExploreLockerBankModalComponent {
  constructor(_data) {
    this._data = _data;
    this.bank = this._data.bank;
    this.lockers = this._data.lockers.reduce((map, l) => {
      map[l.id] = 'busy';
      return map;
    }, {});
  }
  static #_ = this.ɵfac = function ExploreLockerBankModalComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || ExploreLockerBankModalComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵdirectiveInject"](_angular_material_dialog__WEBPACK_IMPORTED_MODULE_4__.MAT_DIALOG_DATA));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵdefineComponent"]({
    type: ExploreLockerBankModalComponent,
    selectors: [["explore-locker-bank-modal"]],
    decls: 8,
    vars: 3,
    consts: [[1, "text-xl", "font-medium"], ["btn", "", "icon", "", "matRipple", "", "mat-dialog-close", ""], [1, "h-[65vh]", "overflow-hidden"], [3, "bank", "bank_status"]],
    template: function ExploreLockerBankModalComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "header")(1, "h2", 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](3, "button", 1)(4, "app-icon");
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](5, "close");
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()()();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](6, "main", 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelement"](7, "locker-grid", 3);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
      }
      if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtextInterpolate"](ctx.bank.name);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](5);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("bank", ctx.bank)("bank_status", ctx.lockers);
      }
    },
    dependencies: [_components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_1__.IconComponent, _angular_material_core__WEBPACK_IMPORTED_MODULE_5__.MatRipple, _angular_material_dialog__WEBPACK_IMPORTED_MODULE_4__.MatDialogClose, _bookings_src_lib_locker_grid_component__WEBPACK_IMPORTED_MODULE_2__.LockerGridComponent]
  });
}

/***/ }),

/***/ 49591:
/*!*********************************************************!*\
  !*** ./libs/explore/src/lib/explore-lockers.service.ts ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ExploreLockersService: () => (/* binding */ ExploreLockersService)
/* harmony export */ });
/* harmony import */ var libs_bookings_src_lib_lockers_service__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! libs/bookings/src/lib/lockers.service */ 98796);
/* harmony import */ var _explore_state_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./explore-state.service */ 12455);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! rxjs/operators */ 35443);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! rxjs/operators */ 8627);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! rxjs */ 90521);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! rxjs */ 68824);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! rxjs */ 71536);
/* harmony import */ var _placeos_ts_client__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @placeos/ts-client */ 35713);
/* harmony import */ var _placeos_organisation__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @placeos/organisation */ 2510);
/* harmony import */ var _explore_locker_bank_info_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./explore-locker-bank-info.component */ 84810);
/* harmony import */ var _explore_spaces_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./explore-spaces.service */ 65897);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @angular/core */ 37580);














class ExploreLockersService extends _placeos_common__WEBPACK_IMPORTED_MODULE_2__.AsyncHandler {
  constructor(_lockers, _explore, _org, _settings) {
    super();
    this._lockers = _lockers;
    this._explore = _explore;
    this._org = _org;
    this._settings = _settings;
    this._status = new rxjs__WEBPACK_IMPORTED_MODULE_7__.BehaviorSubject([]);
    this.lockers$ = this._lockers.filtered_lockers$;
    this.status = (0,rxjs__WEBPACK_IMPORTED_MODULE_8__.combineLatest)([this._explore.level, this._explore.options, this._org.active_building]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.map)(([lvl, {
      is_public
    }]) => {
      if (!lvl || is_public) return [];
      const sys_id = this._org.binding('area_management');
      if (!sys_id) return (0,rxjs__WEBPACK_IMPORTED_MODULE_10__.of)({});
      let binding = (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_3__.getModule)(sys_id, 'AreaManagement').binding(lvl.id);
      this.subscription(`lvl-in_use`, binding.listen().subscribe(data => this._status.next(data?.value?.filter(_ => _.location === 'locker') || [])));
      this.subscription('lvl-in_use_bind', binding.bind());
    }));
    this.locker_status = (0,rxjs__WEBPACK_IMPORTED_MODULE_8__.combineLatest)([this._explore.level, this._lockers.lockers_banks$, this.lockers$, this._status]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.map)(([lvl, locker_banks, lockers, status]) => {
      if (!lvl) return [];
      const features = [];
      const map_status = {};
      const colours = this._settings.get('app.explore.colors') || {};
      const banks = (0,_placeos_common__WEBPACK_IMPORTED_MODULE_2__.unique)(locker_banks.filter(_ => _.level_id === lvl.id).map(_ => _.id));
      for (const bank of banks) {
        const bank_lockers = lockers.filter(_ => _.bank_id === bank);
        let in_use_count = 0;
        for (const locker of bank_lockers) {
          const in_use = status.find(_ => _.locker_id === locker.id && _.allocated);
          in_use_count += in_use ? 1 : 0;
        }
        const bank_info = locker_banks.find(_ => _.id === bank);
        features.push({
          location: bank_info.map_id,
          content: _explore_locker_bank_info_component__WEBPACK_IMPORTED_MODULE_5__.ExploreLockerBankInfoComponent,
          full_size: true,
          no_scale: true,
          z_index: 20,
          data: {
            bank: bank_info,
            lockers,
            in_use_count,
            locker_count: bank_lockers.length,
            system: this._org.binding('area_management')
          }
        });
        const in_use_percent = in_use_count / bank_lockers.length;
        const value = in_use_percent > 0.8 ? 'busy' : in_use_percent > 0.3 ? 'pending' : 'free';
        map_status[`#${bank_info.map_id}`] = {
          fill: colours[`lockers-${value}`] || colours[`${value}`] || _explore_spaces_service__WEBPACK_IMPORTED_MODULE_6__.DEFAULT_COLOURS[`${value}`]
        };
      }
      this._explore.setStyles('lockers', map_status);
      this._explore.setFeatures('lockers', features);
    }));
    this.subscription('level', this._explore.level.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_11__.filter)(_ => !!_)).subscribe(level => this._lockers.setLevel(level.id)));
    this.subscription('status', this.status.subscribe());
    this.subscription('locker_status', this.locker_status.subscribe());
  }
  static #_ = this.ɵfac = function ExploreLockersService_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || ExploreLockersService)(_angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵinject"](libs_bookings_src_lib_lockers_service__WEBPACK_IMPORTED_MODULE_0__.LockersService), _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵinject"](_explore_state_service__WEBPACK_IMPORTED_MODULE_1__.ExploreStateService), _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵinject"](_placeos_organisation__WEBPACK_IMPORTED_MODULE_4__.OrganisationService), _angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵinject"](_placeos_common__WEBPACK_IMPORTED_MODULE_2__.SettingsService));
  };
  static #_2 = this.ɵprov = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_12__["ɵɵdefineInjectable"]({
    token: ExploreLockersService,
    factory: ExploreLockersService.ɵfac,
    providedIn: 'root'
  });
}

/***/ }),

/***/ 60468:
/*!***************************************************************!*\
  !*** ./libs/explore/src/lib/explore-map-control.component.ts ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ExploreMapControlComponent: () => (/* binding */ ExploreMapControlComponent)
/* harmony export */ });
/* harmony import */ var _home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 89204);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! rxjs/operators */ 57871);
/* harmony import */ var libs_organisation_src_lib_organisation_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! libs/organisation/src/lib/organisation.service */ 19863);
/* harmony import */ var _explore_state_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./explore-state.service */ 12455);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @angular/router */ 95072);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _angular_material_core__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @angular/material/core */ 74646);
/* harmony import */ var _angular_material_form_field__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @angular/material/form-field */ 24950);
/* harmony import */ var _angular_material_select__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @angular/material/select */ 25175);
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @angular/forms */ 34456);















function ExploreMapControlComponent_mat_form_field_1_mat_option_3_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](0, "mat-option", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const bld_r3 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("value", bld_r3);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtextInterpolate1"](" ", bld_r3.display_name || bld_r3.name, " ");
  }
}
function ExploreMapControlComponent_mat_form_field_1_Template(rf, ctx) {
  if (rf & 1) {
    const _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](0, "mat-form-field", 3)(1, "mat-select", 4);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpipe"](2, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵlistener"]("ngModelChange", function ExploreMapControlComponent_mat_form_field_1_Template_mat_select_ngModelChange_1_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵrestoreView"](_r1);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵresetView"](ctx_r1.setBuilding($event));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](3, ExploreMapControlComponent_mat_form_field_1_mat_option_3_Template, 2, 2, "mat-option", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpipe"](4, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngModel", _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpipeBind1"](2, 2, ctx_r1.building));
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngForOf", _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpipeBind1"](4, 4, ctx_r1.buildings));
  }
}
function ExploreMapControlComponent_mat_form_field_3_mat_option_4_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](0, "mat-option", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const lvl_r5 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("value", lvl_r5);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtextInterpolate1"](" ", lvl_r5.display_name || lvl_r5.name, " ");
  }
}
function ExploreMapControlComponent_mat_form_field_3_Template(rf, ctx) {
  if (rf & 1) {
    const _r4 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](0, "mat-form-field", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpipe"](1, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](2, "mat-select", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpipe"](3, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵlistener"]("ngModelChange", function ExploreMapControlComponent_mat_form_field_3_Template_mat_select_ngModelChange_2_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵrestoreView"](_r4);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵresetView"](ctx_r1.setLevel($event));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](4, ExploreMapControlComponent_mat_form_field_3_mat_option_4_Template, 2, 2, "mat-option", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpipe"](5, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    let tmp_1_0;
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵattribute"]("has-bld", ((tmp_1_0 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpipeBind1"](1, 3, ctx_r1.buildings)) == null ? null : tmp_1_0.length) > 1);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngModel", _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpipeBind1"](3, 5, ctx_r1.level));
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngForOf", _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpipeBind1"](5, 7, ctx_r1.levels));
  }
}
class ExploreMapControlComponent extends _placeos_common__WEBPACK_IMPORTED_MODULE_1__.AsyncHandler {
  constructor(_org, _state, _router, _route) {
    super();
    this._org = _org;
    this._state = _state;
    this._router = _router;
    this._route = _route;
    /** List of available buildings */
    this.buildings = this._org.active_buildings;
    /** Currently active building */
    this.building = this._org.active_building;
    /** List of availabel levels */
    this.levels = this._org.active_levels;
    /** Currently active level */
    this.level = this._state.level;
    /** Set the currently active level */
    this.setLevel = lvl => {
      this._state.setFeatures('_located', []);
      this.timeout('set_level', () => this._router.navigate([], {
        relativeTo: this._route,
        queryParams: {
          zone: lvl.id
        }
      }), 201);
    };
    /** Set the currenly active building */
    this.setBuilding = bld => this._org.building = bld;
  }
  ngOnInit() {
    var _this = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      yield _this._org.initialised.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.first)(_ => _)).toPromise();
      _this.subscription('route.query', _this._route.queryParamMap.subscribe(params => params.has('zone') ? _this._state.setLevel(params.get('zone')) : ''));
    })();
  }
  static #_ = this.ɵfac = function ExploreMapControlComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || ExploreMapControlComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵdirectiveInject"](libs_organisation_src_lib_organisation_service__WEBPACK_IMPORTED_MODULE_2__.OrganisationService), _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵdirectiveInject"](_explore_state_service__WEBPACK_IMPORTED_MODULE_3__.ExploreStateService), _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵdirectiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_6__.Router), _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵdirectiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_6__.ActivatedRoute));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵdefineComponent"]({
    type: ExploreMapControlComponent,
    selectors: [["explore-map-controls"]],
    features: [_angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵInheritDefinitionFeature"]],
    decls: 5,
    vars: 6,
    consts: () => {
      let i18n_0;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_1533056789917995243$$LIBS_EXPLORE_SRC_LIB_EXPLORE_MAP_CONTROL_COMPONENT_TS_0 = goog.getMsg("Select Building...");
        i18n_0 = MSG_EXTERNAL_1533056789917995243$$LIBS_EXPLORE_SRC_LIB_EXPLORE_MAP_CONTROL_COMPONENT_TS_0;
      } else {
        i18n_0 = $localize`:␟dea1f8bc2b32584fadf07ef815709b946d3726ff␟1533056789917995243:Select Building...`;
      }
      let i18n_1;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_7854898325453225869$$LIBS_EXPLORE_SRC_LIB_EXPLORE_MAP_CONTROL_COMPONENT_TS_1 = goog.getMsg("Select Level...");
        i18n_1 = MSG_EXTERNAL_7854898325453225869$$LIBS_EXPLORE_SRC_LIB_EXPLORE_MAP_CONTROL_COMPONENT_TS_1;
      } else {
        i18n_1 = $localize`:␟025373b97845a8c2b54d2eb17d9c479f64207b11␟7854898325453225869:Select Level...`;
      }
      return [[1, "flex", "space-x-2", "w-full"], ["overlay", "", "buildings", "", "class", "flex-1 min-w-[10.5rem] no-subscript", "has-bld", "true", "appearance", "outline", 4, "ngIf"], ["overlay", "", "levels", "", "class", "flex-1 min-w-[10.25rem] no-subscript", "appearance", "outline", 4, "ngIf"], ["overlay", "", "buildings", "", "has-bld", "true", "appearance", "outline", 1, "flex-1", "min-w-[10.5rem]", "no-subscript"], ["placeholder", i18n_0, 3, "ngModelChange", "ngModel"], [3, "value", 4, "ngFor", "ngForOf"], [3, "value"], ["overlay", "", "levels", "", "appearance", "outline", 1, "flex-1", "min-w-[10.25rem]", "no-subscript"], ["placeholder", i18n_1, 3, "ngModelChange", "ngModel"]];
    },
    template: function ExploreMapControlComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](0, "div", 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](1, ExploreMapControlComponent_mat_form_field_1_Template, 5, 6, "mat-form-field", 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpipe"](2, "async");
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](3, ExploreMapControlComponent_mat_form_field_3_Template, 6, 9, "mat-form-field", 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpipe"](4, "async");
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
      }
      if (rf & 2) {
        let tmp_0_0;
        let tmp_1_0;
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngIf", ((tmp_0_0 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpipeBind1"](2, 2, ctx.buildings)) == null ? null : tmp_0_0.length) > 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngIf", (tmp_1_0 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpipeBind1"](4, 4, ctx.levels)) == null ? null : tmp_1_0.length);
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_7__.NgForOf, _angular_common__WEBPACK_IMPORTED_MODULE_7__.NgIf, _angular_material_core__WEBPACK_IMPORTED_MODULE_8__.MatOption, _angular_material_form_field__WEBPACK_IMPORTED_MODULE_9__.MatFormField, _angular_material_select__WEBPACK_IMPORTED_MODULE_10__.MatSelect, _angular_forms__WEBPACK_IMPORTED_MODULE_11__.NgControlStatus, _angular_forms__WEBPACK_IMPORTED_MODULE_11__.NgModel, _angular_common__WEBPACK_IMPORTED_MODULE_7__.AsyncPipe],
    styles: ["mat-form-field[has-bld='true'][_ngcontent-%COMP%] {\n                max-width: calc(50vw - 2.5rem);\n            }\n\n            [full][_nghost-%COMP%]   mat-form-field[_ngcontent-%COMP%] {\n                max-width: calc(50% - 2.5rem);\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImV4cGxvcmUtbWFwLWNvbnRyb2wuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSw4QkFBOEI7WUFDbEM7O1lBRUE7Z0JBQ0ksNkJBQTZCO1lBQ2pDIiwiZmlsZSI6ImV4cGxvcmUtbWFwLWNvbnRyb2wuY29tcG9uZW50LnRzIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICBtYXQtZm9ybS1maWVsZFtoYXMtYmxkPSd0cnVlJ10ge1xuICAgICAgICAgICAgICAgIG1heC13aWR0aDogY2FsYyg1MHZ3IC0gMi41cmVtKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgOmhvc3RbZnVsbF0gbWF0LWZvcm0tZmllbGQge1xuICAgICAgICAgICAgICAgIG1heC13aWR0aDogY2FsYyg1MCUgLSAyLjVyZW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAiXX0= */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvZXhwbG9yZS9zcmMvbGliL2V4cGxvcmUtbWFwLWNvbnRyb2wuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSw4QkFBOEI7WUFDbEM7O1lBRUE7Z0JBQ0ksNkJBQTZCO1lBQ2pDOztBQUVaLDRtQkFBNG1CIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICBtYXQtZm9ybS1maWVsZFtoYXMtYmxkPSd0cnVlJ10ge1xuICAgICAgICAgICAgICAgIG1heC13aWR0aDogY2FsYyg1MHZ3IC0gMi41cmVtKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgOmhvc3RbZnVsbF0gbWF0LWZvcm0tZmllbGQge1xuICAgICAgICAgICAgICAgIG1heC13aWR0aDogY2FsYyg1MCUgLSAyLjVyZW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAiXSwic291cmNlUm9vdCI6IiJ9 */"]
  });
}

/***/ }),

/***/ 83134:
/*!************************************************************!*\
  !*** ./libs/explore/src/lib/explore-map-view.component.ts ***!
  \************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ExploreMapViewComponent: () => (/* binding */ ExploreMapViewComponent)
/* harmony export */ });
/* harmony import */ var _home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 89204);
/* harmony import */ var _placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @placeos/ts-client */ 35713);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! rxjs/operators */ 33602);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! rxjs/operators */ 57871);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var _placeos_users__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @placeos/users */ 41489);
/* harmony import */ var libs_spaces_src_lib_spaces_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! libs/spaces/src/lib/spaces.service */ 7401);
/* harmony import */ var libs_components_src_lib_map_pin_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! libs/components/src/lib/map-pin.component */ 71865);
/* harmony import */ var libs_components_src_lib_map_radius_component__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! libs/components/src/lib/map-radius.component */ 95384);
/* harmony import */ var libs_organisation_src_lib_organisation_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! libs/organisation/src/lib/organisation.service */ 19863);
/* harmony import */ var libs_spaces_src_lib_space_pipe__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! libs/spaces/src/lib/space.pipe */ 22011);
/* harmony import */ var _explore_state_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./explore-state.service */ 12455);
/* harmony import */ var _explore_spaces_service__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./explore-spaces.service */ 65897);
/* harmony import */ var _explore_zones_service__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./explore-zones.service */ 61369);
/* harmony import */ var _explore_desks_service__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./explore-desks.service */ 61104);
/* harmony import */ var _explore_parking_service__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./explore-parking.service */ 34498);
/* harmony import */ var _explore_lockers_service__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./explore-lockers.service */ 49591);
/* harmony import */ var libs_common_src_lib_mapspeople_service__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! libs/common/src/lib/mapspeople.service */ 99420);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! @angular/router */ 95072);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _components_src_lib_interactive_map_component__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../../components/src/lib/interactive-map.component */ 24918);
/* harmony import */ var _angular_material_slide_toggle__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! @angular/material/slide-toggle */ 8827);
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! @angular/forms */ 34456);
/* harmony import */ var _explore_map_control_component__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./explore-map-control.component */ 60468);




































const _c0 = () => ({
  controls: true
});
function ExploreMapViewComponent_div_6_div_2_Template(rf, ctx) {
  if (rf & 1) {
    const _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵelementStart"](0, "div", 7)(1, "mat-slide-toggle", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵpipe"](2, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵlistener"]("ngModelChange", function ExploreMapViewComponent_div_6_div_2_Template_mat_slide_toggle_ngModelChange_1_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵrestoreView"](_r1);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵnextContext"](2);
      return _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵresetView"](ctx_r1.toggleZones($event));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵelementStart"](3, "label", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵi18n"](4, 0);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    let tmp_2_0;
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵproperty"]("ngModel", !((tmp_2_0 = _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵpipeBind1"](2, 1, ctx_r1.options)) == null ? null : tmp_2_0.disable == null ? null : tmp_2_0.disable.includes("zones")));
  }
}
function ExploreMapViewComponent_div_6_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵelementStart"](0, "div", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵelement"](1, "explore-map-controls");
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵtemplate"](2, ExploreMapViewComponent_div_6_div_2_Template, 5, 3, "div", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵproperty"]("ngIf", !ctx_r1.hide_zones);
  }
}
function ExploreMapViewComponent_div_8_div_3_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵelementStart"](0, "div", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵelement"](1, "div", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵelementStart"](2, "div", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵtext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const pair_r3 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵstyleProp"]("background-color", pair_r3[1]);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵtextInterpolate"](pair_r3[0]);
  }
}
function ExploreMapViewComponent_div_8_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵelementStart"](0, "div", 10)(1, "h3", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵi18n"](2, 1);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵtemplate"](3, ExploreMapViewComponent_div_8_div_3_Template, 4, 3, "div", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵproperty"]("ngForOf", ctx_r1.legend);
  }
}
const EMPTY = [];
class ExploreMapViewComponent extends _placeos_common__WEBPACK_IMPORTED_MODULE_2__.AsyncHandler {
  toggleZones(enabled) {
    var _this = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      const options = yield _this.options.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_19__.take)(1)).toPromise();
      const disable = !enabled ? (0,_placeos_common__WEBPACK_IMPORTED_MODULE_2__.unique)([...(options.disable || []), 'zones', 'devices']) : options.disable?.filter(_ => _ !== 'zones' && _ !== 'devices') || [];
      _this.setOptions({
        disable
      });
    })();
  }
  get show_legend() {
    return !!this._settings.get('app.explore.show_legend');
  }
  get hide_zones() {
    return !!this._settings.get('app.explore.hide_zones');
  }
  get legend() {
    return this._settings.get('app.explore.legend') || EMPTY;
  }
  constructor(_state, _s, _desks, _zones, _parking, _lockers, _route, _router, _spaces, _org, _settings, _space_pipe, _maps) {
    super();
    this._state = _state;
    this._s = _s;
    this._desks = _desks;
    this._zones = _zones;
    this._parking = _parking;
    this._lockers = _lockers;
    this._route = _route;
    this._router = _router;
    this._spaces = _spaces;
    this._org = _org;
    this._settings = _settings;
    this._space_pipe = _space_pipe;
    this._maps = _maps;
    /** Observable for the active map */
    this.url = this._state.map_url;
    /** Observable for the active map */
    this.styles = this._state.map_styles;
    /** Observable for the active map */
    this.positions = this._state.map_positions;
    /** Observable for the active map */
    this.features = this._state.map_features;
    /** Observable for the active map */
    this.actions = this._state.map_actions;
    /** Observable for the labels map */
    this.labels = this._state.map_labels;
    /** Observable for the active map */
    this.options = this._state.options;
    /** Observable for user messages */
    this.message = this._state.message;
    this.setOptions = o => this._state.setOptions(o);
    this.locate = '';
    this.use_mapsindoors$ = this._maps.available$;
  }
  ngOnInit() {
    var _this2 = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      _this2._state.reset();
      yield _this2._spaces.initialised.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_20__.first)(_ => _)).toPromise();
      _this2.toggleZones(false);
      _this2.subscription('parking_poll', _this2._parking.startPolling());
      _this2.subscription('route.query', _this2._route.queryParamMap.subscribe( /*#__PURE__*/function () {
        var _ref = (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* (params) {
          if (params.has('level') || params.has('zone')) {
            _this2._state.setLevel(params.get('level') || params.get('zone'));
          }
          _this2._state.setFeatures('_located', []);
          if (params.has('space')) {
            _this2.locateSpace(params.get('space'));
          } else if (params.has('user')) {
            let user = _this2._settings.value('last_search');
            if (!user || params.get('user') !== user.email) {
              user = null;
              user = yield (0,_placeos_users__WEBPACK_IMPORTED_MODULE_3__.showStaff)(params.get('user')).toPromise();
            }
            if (!user) return (0,_placeos_common__WEBPACK_IMPORTED_MODULE_2__.notifyError)(`Unable to user details for ${params.get('user')}`);
            _this2.locateUser(user instanceof Array ? user[0] : user).catch(_ => {
              (0,_placeos_common__WEBPACK_IMPORTED_MODULE_2__.notifyError)(`Unable to locate ${params.get('user')}`);
              _this2._router.navigate([], {
                relativeTo: _this2._route,
                queryParams: {}
              });
            });
          } else if (params.has('locate')) {
            _this2._locateFeature(params.get('locate'), params.get('name'));
          } else {
            _this2.timeout('update_location', () => {
              _this2._state.setFeatures('_located', []);
            });
          }
        });
        return function (_x) {
          return _ref.apply(this, arguments);
        };
      }()));
    })();
  }
  updateZoom(zoom) {
    this._state.setPositions(zoom, this._state.positions.center);
  }
  updateCenter(center) {
    this._state.setPositions(this._state.positions.zoom, center);
  }
  _locateFeature(id, name = '') {
    const has_coordinates = id.includes(',');
    const parts = id.split(',');
    const feature = {
      track_id: `locate-${id}`,
      location: has_coordinates ? {
        x: parseFloat(parts[0]),
        y: parseFloat(parts[1])
      } : id,
      content: libs_components_src_lib_map_pin_component__WEBPACK_IMPORTED_MODULE_5__.MapPinComponent,
      z_index: 99,
      data: {
        message: name
      }
    };
    this.locate = id;
    this.timeout('update_location', () => this._state.setFeatures('_located', [feature]));
  }
  locateSpace(id) {
    var _this3 = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      const space = yield _this3._space_pipe.transform(id);
      if (!space) return (0,_placeos_common__WEBPACK_IMPORTED_MODULE_2__.notifyError)('Unable to load space details.');
      _this3._state.setLevel(_this3._org.levelWithID(space.zones)?.id);
      const feature = {
        track_id: `locate-${space.id}`,
        location: space.map_id,
        content: libs_components_src_lib_map_pin_component__WEBPACK_IMPORTED_MODULE_5__.MapPinComponent,
        z_index: 99,
        data: {
          message: `${space.display_name || space.name} is here`
        }
      };
      _this3.timeout('update_location', () => _this3._state.setFeatures('_located', [feature]));
    })();
  }
  locateUser(user) {
    var _this4 = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      let locate_details = _this4._org.binding('location_services');
      if (!locate_details) throw 'Location services is not setup for this application.';
      if (typeof locate_details === 'string') {
        locate_details = {
          system_id: locate_details,
          module: 'LocationServices',
          priority: []
        };
      }
      const mod = (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.getModule)(locate_details.system_id, locate_details.module);
      const locations = (yield mod.execute('locate_user', [user.email, user.username || user.id])).map(i => new _placeos_users__WEBPACK_IMPORTED_MODULE_3__.MapLocation(i));
      locations.sort((a, b) => locate_details.priority.indexOf(a.type) - locate_details.priority.indexOf(b.type));
      if (!locations?.length) {
        throw 'No locations for the given user';
      }
      _this4._state.setLevel(_this4._org.levelWithID([locations[0]?.level])?.id);
      const pos = locations[0].position;
      const {
        coordinates_from
      } = locations[0];
      const feature = {
        track_id: `locate-${user.id}`,
        location: locations[0].type === 'wireless' ? {
          x: coordinates_from?.includes('right') ? 1 - pos.x : pos.x,
          y: coordinates_from?.includes('bottom') ? 1 - pos.y : pos.y
        } : pos,
        content: locations[0].type === 'wireless' ? libs_components_src_lib_map_radius_component__WEBPACK_IMPORTED_MODULE_6__.MapRadiusComponent : libs_components_src_lib_map_pin_component__WEBPACK_IMPORTED_MODULE_5__.MapPinComponent,
        z_index: 99,
        data: {
          message: `${user.name} is here`,
          radius: locations[0].variance,
          last_seen: locations[0].last_seen
        }
      };
      _this4.timeout('update_location', () => {
        _this4._state.setFeatures('_located', [feature]);
      });
    })();
  }
  static #_ = this.ɵfac = function ExploreMapViewComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || ExploreMapViewComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵdirectiveInject"](_explore_state_service__WEBPACK_IMPORTED_MODULE_9__.ExploreStateService), _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵdirectiveInject"](_explore_spaces_service__WEBPACK_IMPORTED_MODULE_10__.ExploreSpacesService), _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵdirectiveInject"](_explore_desks_service__WEBPACK_IMPORTED_MODULE_12__.ExploreDesksService), _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵdirectiveInject"](_explore_zones_service__WEBPACK_IMPORTED_MODULE_11__.ExploreZonesService), _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵdirectiveInject"](_explore_parking_service__WEBPACK_IMPORTED_MODULE_13__.ExploreParkingService), _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵdirectiveInject"](_explore_lockers_service__WEBPACK_IMPORTED_MODULE_14__.ExploreLockersService), _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵdirectiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_21__.ActivatedRoute), _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵdirectiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_21__.Router), _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵdirectiveInject"](libs_spaces_src_lib_spaces_service__WEBPACK_IMPORTED_MODULE_4__.SpacesService), _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵdirectiveInject"](libs_organisation_src_lib_organisation_service__WEBPACK_IMPORTED_MODULE_7__.OrganisationService), _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵdirectiveInject"](_placeos_common__WEBPACK_IMPORTED_MODULE_2__.SettingsService), _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵdirectiveInject"](libs_spaces_src_lib_space_pipe__WEBPACK_IMPORTED_MODULE_8__.SpacePipe), _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵdirectiveInject"](libs_common_src_lib_mapspeople_service__WEBPACK_IMPORTED_MODULE_15__.MapsPeopleService));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵdefineComponent"]({
    type: ExploreMapViewComponent,
    selectors: [["explore-map-view"]],
    features: [_angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵProvidersFeature"]([_explore_desks_service__WEBPACK_IMPORTED_MODULE_12__.ExploreDesksService, _explore_spaces_service__WEBPACK_IMPORTED_MODULE_10__.ExploreSpacesService, _explore_zones_service__WEBPACK_IMPORTED_MODULE_11__.ExploreZonesService, _explore_parking_service__WEBPACK_IMPORTED_MODULE_13__.ExploreParkingService, _explore_lockers_service__WEBPACK_IMPORTED_MODULE_14__.ExploreLockersService, libs_spaces_src_lib_space_pipe__WEBPACK_IMPORTED_MODULE_8__.SpacePipe]), _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵInheritDefinitionFeature"]],
    decls: 9,
    vars: 22,
    consts: () => {
      let i18n_0;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_4377629928032707348$$LIBS_EXPLORE_SRC_LIB_EXPLORE_MAP_VIEW_COMPONENT_TS_0 = goog.getMsg("Zones");
        i18n_0 = MSG_EXTERNAL_4377629928032707348$$LIBS_EXPLORE_SRC_LIB_EXPLORE_MAP_VIEW_COMPONENT_TS_0;
      } else {
        i18n_0 = $localize`:␟dab9a30ea9f109a7395ec84fe144c4f70d50c32d␟4377629928032707348:Zones`;
      }
      let i18n_1;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_7297822327994766046$$LIBS_EXPLORE_SRC_LIB_EXPLORE_MAP_VIEW_COMPONENT_TS_1 = goog.getMsg("Legend");
        i18n_1 = MSG_EXTERNAL_7297822327994766046$$LIBS_EXPLORE_SRC_LIB_EXPLORE_MAP_VIEW_COMPONENT_TS_1;
      } else {
        i18n_1 = $localize`:␟5c5419db944ed6a96f9515a2ac0ee390ec8cf3b5␟7297822327994766046:Legend`;
      }
      return [i18n_0, i18n_1, [3, "src", "styles", "features", "actions", "labels", "focus", "options"], ["controls", "", "class", "absolute top-2 left-2 max-w-[calc(100vw-1rem)] bg-base-100 border border-base-200 rounded p-2 space-y-2 overflow-hidden", 4, "ngIf"], ["legend", "", "class", "absolute bottom-2 left-2 p-2 rounded bg-base-100 border border-base-200", 4, "ngIf"], ["controls", "", 1, "absolute", "top-2", "left-2", "max-w-[calc(100vw-1rem)]", "bg-base-100", "border", "border-base-200", "rounded", "p-2", "space-y-2", "overflow-hidden"], ["class", "flex items-center space-x-2", 4, "ngIf"], [1, "flex", "items-center", "space-x-2"], ["name", "zones", 1, "ml-2", 3, "ngModelChange", "ngModel"], ["for", "zones", 1, "mb-0"], ["legend", "", 1, "absolute", "bottom-2", "left-2", "p-2", "rounded", "bg-base-100", "border", "border-base-200"], [1, "mb-2", "font-medium"], ["class", "flex items-center space-x-2", 4, "ngFor", "ngForOf"], [1, "w-3", "h-3", "rounded-full", "border", "border-base-200"], [1, "text-sm"]];
    },
    template: function ExploreMapViewComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵelement"](0, "interactive-map", 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵpipe"](1, "async");
        _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵpipe"](2, "async");
        _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵpipe"](3, "async");
        _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵpipe"](4, "async");
        _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵpipe"](5, "async");
        _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵtemplate"](6, ExploreMapViewComponent_div_6_Template, 3, 1, "div", 3);
        _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵpipe"](7, "async");
        _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵtemplate"](8, ExploreMapViewComponent_div_8_Template, 4, 1, "div", 4);
      }
      if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵproperty"]("src", _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵpipeBind1"](1, 9, ctx.url))("styles", _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵpipeBind1"](2, 11, ctx.styles))("features", _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵpipeBind1"](3, 13, ctx.features))("actions", _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵpipeBind1"](4, 15, ctx.actions))("labels", _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵpipeBind1"](5, 17, ctx.labels))("focus", ctx.locate)("options", _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵpureFunction0"](21, _c0));
        _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵadvance"](6);
        _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵproperty"]("ngIf", !_angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵpipeBind1"](7, 19, ctx.use_mapsindoors$));
        _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵproperty"]("ngIf", ctx.show_legend && ctx.legend.length);
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_22__.NgForOf, _angular_common__WEBPACK_IMPORTED_MODULE_22__.NgIf, _components_src_lib_interactive_map_component__WEBPACK_IMPORTED_MODULE_16__.InteractiveMapComponent, _angular_material_slide_toggle__WEBPACK_IMPORTED_MODULE_23__.MatSlideToggle, _angular_forms__WEBPACK_IMPORTED_MODULE_24__.NgControlStatus, _angular_forms__WEBPACK_IMPORTED_MODULE_24__.NgModel, _explore_map_control_component__WEBPACK_IMPORTED_MODULE_17__.ExploreMapControlComponent, _angular_common__WEBPACK_IMPORTED_MODULE_22__.AsyncPipe],
    styles: ["[_nghost-%COMP%] {\n                height: 100%;\n                width: 100%;\n            }\n\n            [zones][_ngcontent-%COMP%] {\n                top: 3.5rem;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImV4cGxvcmUtbWFwLXZpZXcuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxZQUFZO2dCQUNaLFdBQVc7WUFDZjs7WUFFQTtnQkFDSSxXQUFXO1lBQ2YiLCJmaWxlIjoiZXhwbG9yZS1tYXAtdmlldy5jb21wb25lbnQudHMiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIDpob3N0IHtcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIFt6b25lc10ge1xuICAgICAgICAgICAgICAgIHRvcDogMy41cmVtO1xuICAgICAgICAgICAgfVxuICAgICAgICAiXX0= */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvZXhwbG9yZS9zcmMvbGliL2V4cGxvcmUtbWFwLXZpZXcuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxZQUFZO2dCQUNaLFdBQVc7WUFDZjs7WUFFQTtnQkFDSSxXQUFXO1lBQ2Y7O0FBRVosd2lCQUF3aUIiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIDpob3N0IHtcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIFt6b25lc10ge1xuICAgICAgICAgICAgICAgIHRvcDogMy41cmVtO1xuICAgICAgICAgICAgfVxuICAgICAgICAiXSwic291cmNlUm9vdCI6IiJ9 */"]
  });
}

/***/ }),

/***/ 17889:
/*!****************************************************************!*\
  !*** ./libs/explore/src/lib/explore-parking-info.component.ts ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ExploreParkingInfoComponent: () => (/* binding */ ExploreParkingInfoComponent)
/* harmony export */ });
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var _placeos_components__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @placeos/components */ 51588);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/common */ 60316);






function ExploreParkingInfoComponent_div_8_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](0, "div", 7)(1, "div", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](2, " Plate Number ");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](3, "div", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtextInterpolate1"](" ", ctx_r0.plate_number || "ABC3", " ");
  }
}
class ExploreParkingInfoComponent {
  get is_concierge() {
    return this._settings.app_name.toLowerCase().includes('concierge');
  }
  constructor(_data, _element, _settings) {
    this._data = _data;
    this._element = _element;
    this._settings = _settings;
    this.status = this._data.assigned_to === this._data.user && this._data.user ? 'reserved' : this._data.status;
    this.user = this._data.user;
    this.name = this._data.name;
    this.map_id = this._data.map_id;
    this.plate_number = this._data.plate_number;
  }
  static #_ = this.ɵfac = function ExploreParkingInfoComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || ExploreParkingInfoComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdirectiveInject"](_placeos_components__WEBPACK_IMPORTED_MODULE_1__.MAP_FEATURE_DATA), _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_2__.ElementRef), _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdirectiveInject"](_placeos_common__WEBPACK_IMPORTED_MODULE_0__.SettingsService));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdefineComponent"]({
    type: ExploreParkingInfoComponent,
    selectors: [["explore-parking-info"]],
    decls: 9,
    vars: 15,
    consts: [[1, "absolute", "bg-base-300", "p-2", "rounded-lg", "!rounded-tl-none", "shadow", "top-1/2", "left-1/2", "text-left"], [1, "absolute", "top-0.5", "left-0.5", "triangle"], [1, "flex", "space-x-2"], [1, "flex", "flex-col", "leading-tight", "min-w-24", "pl-1"], [1, "whitespace-nowrap"], [1, "capitalize", "text-sm", "font-medium"], ["class", "flex flex-col relative h-full px-2 rounded bg-base-100 text-base-content shadow leading-tight", 4, "ngIf"], [1, "flex", "flex-col", "relative", "h-full", "px-2", "rounded", "bg-base-100", "text-base-content", "shadow", "leading-tight"], [1, "text-[0.625rem]", "w-full", "text-center", "pt-1", "whitespace-nowrap", "font-medium"], [1, "font-mono", "pb-1", "w-full", "text-center", "uppercase"]],
    template: function ExploreParkingInfoComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](0, "div", 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelement"](1, "div", 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](2, "div", 2)(3, "div", 3)(4, "div", 4);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](5);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](6, "div", 5);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](7);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](8, ExploreParkingInfoComponent_div_8_Template, 5, 1, "div", 6);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]()();
      }
      if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵclassProp"]("!bg-error", ctx.status === "busy")("!text-error-content", ctx.status === "busy")("!bg-warning", ctx.status === "reserved")("!text-warning-content", ctx.status === "reserved")("!bg-success", ctx.status === "free")("!text-success-content", ctx.status === "free");
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](5);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtextInterpolate"](ctx.name);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtextInterpolate1"](" ", ctx.status, " ");
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngIf", ctx.is_concierge && ctx.plate_number);
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_3__.NgIf],
    styles: [".triangle[_ngcontent-%COMP%] {\n                width: 0px;\n                height: 0px;\n                border-style: solid;\n                border-width: 0.5rem 0.5rem 0 0;\n                border-color: currentColor transparent transparent transparent;\n                transform: rotate(0deg);\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImV4cGxvcmUtcGFya2luZy1pbmZvLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1lBQ1k7Z0JBQ0ksVUFBVTtnQkFDVixXQUFXO2dCQUNYLG1CQUFtQjtnQkFDbkIsK0JBQStCO2dCQUMvQiw4REFBOEQ7Z0JBQzlELHVCQUF1QjtZQUMzQiIsImZpbGUiOiJleHBsb3JlLXBhcmtpbmctaW5mby5jb21wb25lbnQudHMiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIC50cmlhbmdsZSB7XG4gICAgICAgICAgICAgICAgd2lkdGg6IDBweDtcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDBweDtcbiAgICAgICAgICAgICAgICBib3JkZXItc3R5bGU6IHNvbGlkO1xuICAgICAgICAgICAgICAgIGJvcmRlci13aWR0aDogMC41cmVtIDAuNXJlbSAwIDA7XG4gICAgICAgICAgICAgICAgYm9yZGVyLWNvbG9yOiBjdXJyZW50Q29sb3IgdHJhbnNwYXJlbnQgdHJhbnNwYXJlbnQgdHJhbnNwYXJlbnQ7XG4gICAgICAgICAgICAgICAgdHJhbnNmb3JtOiByb3RhdGUoMGRlZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICJdfQ== */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvZXhwbG9yZS9zcmMvbGliL2V4cGxvcmUtcGFya2luZy1pbmZvLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1lBQ1k7Z0JBQ0ksVUFBVTtnQkFDVixXQUFXO2dCQUNYLG1CQUFtQjtnQkFDbkIsK0JBQStCO2dCQUMvQiw4REFBOEQ7Z0JBQzlELHVCQUF1QjtZQUMzQjs7QUFFWixneUJBQWd5QiIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgLnRyaWFuZ2xlIHtcbiAgICAgICAgICAgICAgICB3aWR0aDogMHB4O1xuICAgICAgICAgICAgICAgIGhlaWdodDogMHB4O1xuICAgICAgICAgICAgICAgIGJvcmRlci1zdHlsZTogc29saWQ7XG4gICAgICAgICAgICAgICAgYm9yZGVyLXdpZHRoOiAwLjVyZW0gMC41cmVtIDAgMDtcbiAgICAgICAgICAgICAgICBib3JkZXItY29sb3I6IGN1cnJlbnRDb2xvciB0cmFuc3BhcmVudCB0cmFuc3BhcmVudCB0cmFuc3BhcmVudDtcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IHJvdGF0ZSgwZGVnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl0sInNvdXJjZVJvb3QiOiIifQ== */"]
  });
}

/***/ }),

/***/ 34498:
/*!*********************************************************!*\
  !*** ./libs/explore/src/lib/explore-parking.service.ts ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ExploreParkingService: () => (/* binding */ ExploreParkingService)
/* harmony export */ });
/* harmony import */ var _home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 89204);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var _placeos_ts_client__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @placeos/ts-client */ 35713);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! date-fns */ 99908);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! date-fns */ 23206);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! date-fns */ 5469);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! date-fns */ 33240);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! date-fns */ 56441);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! date-fns */ 28797);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! rxjs */ 90521);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! rxjs */ 68824);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! rxjs */ 71536);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! rxjs */ 68757);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! rxjs/operators */ 35443);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! rxjs/operators */ 19803);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! rxjs/operators */ 71963);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! rxjs/operators */ 7841);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! rxjs/operators */ 33602);
/* harmony import */ var libs_organisation_src_lib_organisation_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! libs/organisation/src/lib/organisation.service */ 19863);
/* harmony import */ var libs_bookings_src_lib_bookings_fn__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! libs/bookings/src/lib/bookings.fn */ 18026);
/* harmony import */ var _explore_state_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./explore-state.service */ 12455);
/* harmony import */ var _explore_spaces_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./explore-spaces.service */ 65897);
/* harmony import */ var libs_bookings_src_lib_booking_form_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! libs/bookings/src/lib/booking-form.service */ 18379);
/* harmony import */ var _set_datetime_modal_component__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./set-datetime-modal.component */ 27146);
/* harmony import */ var _explore_parking_info_component__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./explore-parking-info.component */ 17889);
/* harmony import */ var libs_bookings_src_lib_parking_service__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! libs/bookings/src/lib/parking.service */ 1593);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_material_dialog__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! @angular/material/dialog */ 12587);






















class ExploreParkingService extends _placeos_common__WEBPACK_IMPORTED_MODULE_1__.AsyncHandler {
  constructor(_org, _state, _settings, _bookings, _parking, _dialog) {
    super();
    this._org = _org;
    this._state = _state;
    this._settings = _settings;
    this._bookings = _bookings;
    this._parking = _parking;
    this._dialog = _dialog;
    this._options = new rxjs__WEBPACK_IMPORTED_MODULE_11__.BehaviorSubject({});
    this._poll = new rxjs__WEBPACK_IMPORTED_MODULE_11__.BehaviorSubject(0);
    this.options = this._options.asObservable();
    this.on_book = null;
    /** List of available parking levels for the active building */
    this.levels = this._org.active_levels.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.map)(l => l.filter(_ => _.tags.includes('parking'))));
    /** List of current bookings for the current building */
    this.events = (0,rxjs__WEBPACK_IMPORTED_MODULE_13__.combineLatest)([this._org.active_building, this._options, this._poll, this._state.options]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_14__.debounceTime)(300), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_15__.switchMap)(([bld, _, __, {
      is_public
    }]) => is_public ? (0,rxjs__WEBPACK_IMPORTED_MODULE_16__.of)([]) : (0,libs_bookings_src_lib_bookings_fn__WEBPACK_IMPORTED_MODULE_4__.queryBookings)({
      period_start: (0,date_fns__WEBPACK_IMPORTED_MODULE_17__.getUnixTime)((0,date_fns__WEBPACK_IMPORTED_MODULE_18__.startOfMinute)(_.date || Date.now())),
      period_end: (0,date_fns__WEBPACK_IMPORTED_MODULE_17__.getUnixTime)((0,date_fns__WEBPACK_IMPORTED_MODULE_19__.endOfMinute)(_.date || Date.now())),
      type: 'parking',
      zones: this._settings.get('app.use_region') ? bld?.parent_id : bld?.id,
      rejected: false
    })), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_20__.shareReplay)(1));
    /** Any event that the selected user has for the current date */
    this.user_events = (0,rxjs__WEBPACK_IMPORTED_MODULE_13__.combineLatest)([this._options]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_15__.switchMap)(([_]) => (0,libs_bookings_src_lib_bookings_fn__WEBPACK_IMPORTED_MODULE_4__.queryBookings)({
      period_start: (0,date_fns__WEBPACK_IMPORTED_MODULE_17__.getUnixTime)((0,date_fns__WEBPACK_IMPORTED_MODULE_21__.startOfDay)(_.date || Date.now())),
      period_end: (0,date_fns__WEBPACK_IMPORTED_MODULE_17__.getUnixTime)((0,date_fns__WEBPACK_IMPORTED_MODULE_22__.endOfDay)(_.date || Date.now())),
      type: 'parking',
      email: _?.user || (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.currentUser)()?.email
    })), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_20__.shareReplay)(1));
    /** List of parking spaces for the active building */
    this.spaces = this.levels.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_15__.switchMap)(_ => (0,rxjs__WEBPACK_IMPORTED_MODULE_23__.forkJoin)(_.map(l => (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_2__.showMetadata)(l.id, 'parking-spaces').pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.map)(d => (d.details instanceof Array ? d.details : []).map(s => ({
      ...s,
      zone_id: l.id
    }))))))), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.map)(_ => (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.flatten)(_)), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_20__.shareReplay)(1));
    this.active_spaces = (0,rxjs__WEBPACK_IMPORTED_MODULE_13__.combineLatest)([this.spaces, this._state.level]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.map)(([spaces, level]) => spaces.filter(_ => _.zone_id === level.id)));
    this._users = {};
    this._plate_numbers = {};
    /** Available parking spaces for the current level and date */
    this.available_spaces = (0,rxjs__WEBPACK_IMPORTED_MODULE_13__.combineLatest)([this.events, this.active_spaces, this._parking.users]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.map)(([events, spaces, users]) => {
      const available = spaces.filter(_ => {
        const event = events.find(e => e.asset_id === _.id);
        const assigned = `${event?.user_email || _.assigned_to || ''}`.toLowerCase();
        const user = users.find(u => u.email.toLowerCase() === assigned.toLowerCase());
        this._users[_.id] = assigned;
        this._plate_numbers[_.id] = event?.extension_data?.plate_number || user?.plate_number || undefined;
        return !assigned;
      });
      this._updateParkingSpaces(spaces, available);
      return available;
    }));
    this.subscription('spaces', this.available_spaces.subscribe());
    this.setOptions({
      enable_booking: this._settings.get('app.parking.enable_maps') !== false
    });
  }
  startPolling() {
    this.interval('poll', () => this._poll.next(Date.now()), 10 * 1000);
    this._poll.next(Date.now());
    return () => this.stopPolling();
  }
  stopPolling() {
    this.clearInterval('poll');
  }
  setOptions(options) {
    this._options.next({
      ...this._options.getValue(),
      ...options
    });
  }
  _updateParkingSpaces(spaces, available) {
    var _this = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      const styles = {};
      const features = [];
      const actions = [];
      const colours = _this._settings.get('app.explore.colors') || {};
      let options = _this._options.getValue();
      const assigned_space = yield _this._parking.assigned_space.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_24__.take)(1)).toPromise();
      const deny_parking_access = yield _this._parking.deny_parking_access.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_24__.take)(1)).toPromise();
      const booked_space = yield _this._parking.booked_space.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_24__.take)(1)).toPromise();
      for (const space of spaces) {
        const can_book = !!available.find(_ => _.id === space.id);
        const assigned_space = !!space.assigned_to;
        const status = can_book ? 'free' : assigned_space ? 'pending' : 'busy';
        styles[`#${space.map_id}`] = {
          fill: colours[`parking-${status}`] || colours[`${status}`] || _explore_spaces_service__WEBPACK_IMPORTED_MODULE_6__.DEFAULT_COLOURS[`${status}`],
          opacity: 0.6
        };
        features.push({
          location: `${space.map_id}`,
          content: _explore_parking_info_component__WEBPACK_IMPORTED_MODULE_9__.ExploreParkingInfoComponent,
          z_index: 20,
          hover: true,
          data: {
            ...space,
            user: _this._users[space.id],
            plate_number: _this._plate_numbers[space.id],
            status: status === 'pending' && assigned_space ? 'reserved' : status
          }
        });
        if (!can_book) continue;
        const book_fn = /*#__PURE__*/function () {
          var _ref = (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
            if (_this.on_book) {
              yield _this.on_book(space);
              _this._poll.next(Date.now());
              return;
            }
            if (deny_parking_access) {
              return (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.notifyError)(`Your user account has been denied parking access to ${space.zone?.display_name || space.zone?.name}.`);
            }
            if (assigned_space) {
              return (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.notifyError)(`You are already assigned to parking space "${space.name || space.id}".`);
            }
            if (booked_space?.find(_ => _.id === space.id)) {
              return (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.notifyError)(`You already have a parking space booked for the selected time.`);
            }
            if (status !== 'free') {
              return (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.notifyError)(`${space.name || 'Parking Space'} is unavailable at this time.`);
            }
            if (space.groups?.length && !space.groups.find(_ => (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.currentUser)().groups.includes(_))) {
              return (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.notifyError)(`You are not allowed to book ${space.name}.`);
            }
            _this._bookings.newForm();
            _this._bookings.setOptions({
              type: 'parking'
            });
            options = _this._options.getValue();
            if (options.date) {
              _this._bookings.form.patchValue({
                date: options.date
              });
              _this._bookings.form.patchValue({
                all_day: !!options.all_day
              });
            }
            let {
              date,
              duration,
              user
            } = yield _this._setBookingTime(_this._bookings.form.value.date, _this._bookings.form.value.duration, _this._options.getValue()?.custom ?? false, space);
            user = user || options.host || (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.currentUser)();
            const user_email = user?.email;
            const lvl = _this._state.active_level;
            _this._bookings.form.patchValue({
              resources: [space],
              asset_id: space.id,
              asset_name: space.name,
              date,
              duration: options.all_day ? 12 * 60 : duration,
              map_id: space?.map_id || space?.id,
              description: space.name,
              user,
              user_email,
              booking_type: 'parking',
              zones: space.zone ? [space.zone?.parent_id, space.zone?.id] : [lvl.parent_id, lvl.id]
            });
            yield _this._bookings.confirmPost().catch(e => {
              if (e === 'User cancelled') throw e;
              (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.notifyError)(`Failed to book parking space ${space.name || space.id}. ${e.message || e.error || e}`);
              throw e;
            });
            (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.notifySuccess)(`Successfully booked parking space ${space.name || space.id}`);
            _this._poll.next(Date.now());
          });
          return function book_fn() {
            return _ref.apply(this, arguments);
          };
        }();
        actions.push({
          id: space?.map_id || space?.id,
          action: 'click',
          priority: 10,
          callback: book_fn
        });
      }
      _this._state.setActions('parking', options.enable_booking ? actions : []);
      _this._state.setStyles('parking', styles);
      _this._state.setFeatures('parking', features);
    })();
  }
  _setBookingTime(date, duration, host = false, resource = null) {
    var _this2 = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      let user = null;
      if (!!_this2._settings.get('app.parking.allow_time_changes')) {
        const until = (0,date_fns__WEBPACK_IMPORTED_MODULE_22__.endOfDay)((0,date_fns__WEBPACK_IMPORTED_MODULE_25__.addDays)(Date.now(), _this2._settings.get('app.parking.available_period') || 90));
        const ref = _this2._dialog.open(_set_datetime_modal_component__WEBPACK_IMPORTED_MODULE_8__.SetDatetimeModalComponent, {
          data: {
            date,
            duration,
            until,
            host,
            resource
          }
        });
        const details = yield ref.afterClosed().toPromise();
        if (!details) throw 'User cancelled';
        date = details.date;
        duration = details.duration;
        user = details.user;
      }
      return {
        date,
        duration,
        user
      };
    })();
  }
  static #_ = this.ɵfac = function ExploreParkingService_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || ExploreParkingService)(_angular_core__WEBPACK_IMPORTED_MODULE_26__["ɵɵinject"](libs_organisation_src_lib_organisation_service__WEBPACK_IMPORTED_MODULE_3__.OrganisationService), _angular_core__WEBPACK_IMPORTED_MODULE_26__["ɵɵinject"](_explore_state_service__WEBPACK_IMPORTED_MODULE_5__.ExploreStateService), _angular_core__WEBPACK_IMPORTED_MODULE_26__["ɵɵinject"](_placeos_common__WEBPACK_IMPORTED_MODULE_1__.SettingsService), _angular_core__WEBPACK_IMPORTED_MODULE_26__["ɵɵinject"](libs_bookings_src_lib_booking_form_service__WEBPACK_IMPORTED_MODULE_7__.BookingFormService), _angular_core__WEBPACK_IMPORTED_MODULE_26__["ɵɵinject"](libs_bookings_src_lib_parking_service__WEBPACK_IMPORTED_MODULE_10__.ParkingService), _angular_core__WEBPACK_IMPORTED_MODULE_26__["ɵɵinject"](_angular_material_dialog__WEBPACK_IMPORTED_MODULE_27__.MatDialog));
  };
  static #_2 = this.ɵprov = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_26__["ɵɵdefineInjectable"]({
    token: ExploreParkingService,
    factory: ExploreParkingService.ɵfac
  });
}

/***/ }),

/***/ 64114:
/*!**********************************************************!*\
  !*** ./libs/explore/src/lib/explore-search.component.ts ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ExploreSearchComponent: () => (/* binding */ ExploreSearchComponent)
/* harmony export */ });
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var _explore_search_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./explore-search.service */ 35446);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/router */ 95072);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../components/src/lib/icon.component */ 69434);
/* harmony import */ var _components_src_lib_virtual_keyboard_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../components/src/lib/virtual-keyboard.component */ 75080);
/* harmony import */ var _angular_material_autocomplete__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @angular/material/autocomplete */ 79771);
/* harmony import */ var _angular_material_core__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @angular/material/core */ 74646);
/* harmony import */ var _angular_material_progress_spinner__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @angular/material/progress-spinner */ 41134);
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @angular/forms */ 34456);














const _c0 = ["input"];
const _c1 = ["button"];
function ExploreSearchComponent_mat_spinner_8_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelement"](0, "mat-spinner", 10);
  }
  if (rf & 2) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("diameter", 32);
  }
}
function ExploreSearchComponent_ng_container_12_mat_option_1_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](0, "mat-option", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵi18n"](1, 4);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
  }
}
function ExploreSearchComponent_ng_container_12_mat_option_3_Template(rf, ctx) {
  if (rf & 1) {
    const _r2 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](0, "mat-option", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵlistener"]("click", function ExploreSearchComponent_ng_container_12_mat_option_3_Template_mat_option_click_0_listener() {
      const option_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵrestoreView"](_r2).$implicit;
      const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"](2);
      return _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵresetView"](ctx_r3.select(option_r3));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](1, "div", 15)(2, "div", 16)(3, "div", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](5, "div", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](6);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](7, "div", 19);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](8);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]()()();
  }
  if (rf & 2) {
    const option_r3 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("value", option_r3.name);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtextInterpolate"](option_r3.name);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtextInterpolate"](option_r3.description);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtextInterpolate1"](" ", option_r3.type, " ");
  }
}
function ExploreSearchComponent_ng_container_12_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](1, ExploreSearchComponent_ng_container_12_mat_option_1_Template, 2, 0, "mat-option", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpipe"](2, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](3, ExploreSearchComponent_ng_container_12_mat_option_3_Template, 9, 4, "mat-option", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpipe"](4, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpipe"](5, "slice");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementContainerEnd"]();
  }
  if (rf & 2) {
    let tmp_5_0;
    const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngIf", !((tmp_5_0 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpipeBind1"](2, 2, ctx_r3.results)) == null ? null : tmp_5_0.length));
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngForOf", _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpipeBind3"](5, 6, _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpipeBind1"](4, 4, ctx_r3.results), 0, 5));
  }
}
class ExploreSearchComponent extends _placeos_common__WEBPACK_IMPORTED_MODULE_0__.AsyncHandler {
  constructor(_el, _search, _router, _route) {
    super();
    this._el = _el;
    this._search = _search;
    this._router = _router;
    this._route = _route;
    this.show = false;
    this.search_str = '';
    this.right_size = false;
    this.results = this._search.search_results;
    this.loading = this._search.loading;
    this.setFilter = s => this._search.setFilter(s);
  }
  ngOnInit() {
    this.checkButtonPosition();
  }
  clear() {
    this.timeout('clear', () => {
      this.show = false;
      this.search_str = '';
      this.setFilter('');
    });
  }
  cancelClear() {
    this.clearTimeout('clear');
  }
  focusInput() {
    if (this._input_el?.nativeElement) {
      this.timeout('focus', () => this._input_el.nativeElement.focus(), 300);
    }
  }
  showSearch() {
    this.show = true;
    this.focusInput();
  }
  closeSearch(e) {
    this.show = false;
    this.search_str = '';
    this.setFilter('');
    if (this._input_el?.nativeElement) {
      this._input_el.nativeElement.focus();
      this._input_el.nativeElement.blur();
    }
  }
  select(item) {
    this.search_str = item.name;
    const query = {};
    const type = item.type === 'space' ? 'space' : item.type === 'feature' ? 'locate' : 'user';
    query[type] = item.id;
    if (type === 'locate') {
      query.name = item.name;
      query.zone = item.zone;
    }
    this._router.navigate([], {
      relativeTo: this._route,
      queryParams: query
    });
    this.focusInput();
  }
  checkButtonPosition() {
    const window_width = window.innerWidth;
    const button_rect = this._button_el.nativeElement.getBoundingClientRect();
    const x_center = button_rect.left + button_rect.width / 2;
    this.right_size = x_center > window_width / 2;
  }
  static #_ = this.ɵfac = function ExploreSearchComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || ExploreSearchComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_4__.ElementRef), _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵdirectiveInject"](_explore_search_service__WEBPACK_IMPORTED_MODULE_1__.ExploreSearchService), _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵdirectiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_5__.Router), _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵdirectiveInject"](_angular_router__WEBPACK_IMPORTED_MODULE_5__.ActivatedRoute));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵdefineComponent"]({
    type: ExploreSearchComponent,
    selectors: [["explore-search"]],
    viewQuery: function ExploreSearchComponent_Query(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵviewQuery"](_c0, 5);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵviewQuery"](_c1, 7);
      }
      if (rf & 2) {
        let _t;
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵloadQuery"]()) && (ctx._input_el = _t.first);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵloadQuery"]()) && (ctx._button_el = _t.first);
      }
    },
    features: [_angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵInheritDefinitionFeature"]],
    decls: 14,
    vars: 20,
    consts: () => {
      let i18n_0;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_6939663044582448373$$LIBS_EXPLORE_SRC_LIB_EXPLORE_SEARCH_COMPONENT_TS_0 = goog.getMsg("Search for...");
        i18n_0 = MSG_EXTERNAL_6939663044582448373$$LIBS_EXPLORE_SRC_LIB_EXPLORE_SEARCH_COMPONENT_TS_0;
      } else {
        i18n_0 = $localize`:␟7a428104a6c33787961fda306f9c518f89fb0261␟6939663044582448373:Search for...`;
      }
      let i18n_1;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_3411517965707112535$$LIBS_EXPLORE_SRC_LIB_EXPLORE_SEARCH_COMPONENT_TS_1 = goog.getMsg(" No matches found ");
        i18n_1 = MSG_EXTERNAL_3411517965707112535$$LIBS_EXPLORE_SRC_LIB_EXPLORE_SEARCH_COMPONENT_TS_1;
      } else {
        i18n_1 = $localize`:␟0c720c4e60410fcfcd8582a32297bdd397620830␟3411517965707112535: No matches found `;
      }
      return [["button", ""], ["origin", "matAutocompleteOrigin"], ["input", ""], ["auto", "matAutocomplete"], i18n_1, ["icon", "", "matRipple", "", 1, "bg-base-200", "m-2", 3, "resize", "click"], ["role", "search", "tabindex", "0", "matRipple", "", "matAutocompleteOrigin", "", 1, "absolute", "top-1/2", "-translate-y-1/2", "bg-base-100", "flex", "items-center", "z-10", "overflow-hidden", "outline-none", "px-4", "max-w-[calc(100vw-7rem)]", 3, "click"], ["keyboard", "", "placeholder", i18n_0, 1, "flex-1", "text-base", "border-none", "outline-none", 3, "ngModelChange", "focus", "blur", "ngModel", "matAutocomplete", "matAutocompleteConnectedTo"], ["class", "mr-2", 3, "diameter", 4, "ngIf"], [4, "ngIf"], [1, "mr-2", 3, "diameter"], ["class", "pointer-events-none", 4, "ngIf"], [3, "value", "click", 4, "ngFor", "ngForOf"], [1, "pointer-events-none"], [3, "click", "value"], [1, "flex", "items-center", "leading-tight", "w-[22rem]", "max-w-[calc(100vw-2rem)]"], [1, "flex-1", "w-1/2", "overflow-hidden"], [1, "truncate", "w-full"], [1, "text-xs"], [1, "text-xs", "font-bold", "p-2", "capitalize", "text-white", "bg-base-300", "rounded"]];
    },
    template: function ExploreSearchComponent_Template(rf, ctx) {
      if (rf & 1) {
        const _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵgetCurrentView"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](0, "button", 5, 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵlistener"]("resize", function ExploreSearchComponent_Template_button_resize_0_listener() {
          _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵrestoreView"](_r1);
          return _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵresetView"](ctx.checkButtonPosition());
        }, false, _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵresolveWindow"])("click", function ExploreSearchComponent_Template_button_click_0_listener($event) {
          _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵrestoreView"](_r1);
          return _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵresetView"](ctx.show ? ctx.closeSearch($event) : ctx.showSearch());
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](2, "app-icon");
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](4, "div", 6, 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵlistener"]("click", function ExploreSearchComponent_Template_div_click_4_listener() {
          _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵrestoreView"](_r1);
          return _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵresetView"](ctx.focusInput());
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](6, "input", 7, 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtwoWayListener"]("ngModelChange", function ExploreSearchComponent_Template_input_ngModelChange_6_listener($event) {
          _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵrestoreView"](_r1);
          _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtwoWayBindingSet"](ctx.search_str, $event) || (ctx.search_str = $event);
          return _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵresetView"]($event);
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵlistener"]("ngModelChange", function ExploreSearchComponent_Template_input_ngModelChange_6_listener($event) {
          _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵrestoreView"](_r1);
          return _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵresetView"](ctx.setFilter($event));
        })("focus", function ExploreSearchComponent_Template_input_focus_6_listener() {
          _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵrestoreView"](_r1);
          return _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵresetView"](ctx.cancelClear());
        })("blur", function ExploreSearchComponent_Template_input_blur_6_listener() {
          _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵrestoreView"](_r1);
          return _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵresetView"](ctx.clear());
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](8, ExploreSearchComponent_mat_spinner_8_Template, 1, 1, "mat-spinner", 8);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpipe"](9, "async");
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](10, "mat-autocomplete", null, 3);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](12, ExploreSearchComponent_ng_container_12_Template, 6, 10, "ng-container", 9);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpipe"](13, "async");
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
      }
      if (rf & 2) {
        const origin_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵreference"](5);
        const auto_r6 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵreference"](11);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtextInterpolate"](ctx.show || ctx.search_str ? "close" : "search");
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵclassProp"]("right-0", ctx.right_size)("-translate-x-14", ctx.right_size)("left-0", !ctx.right_size)("translate-x-14", !ctx.right_size)("show", ctx.show || ctx.search_str);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtwoWayProperty"]("ngModel", ctx.search_str);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("matAutocomplete", auto_r6)("matAutocompleteConnectedTo", origin_r5);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngIf", _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpipeBind1"](9, 16, ctx.loading));
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](4);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngIf", _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpipeBind1"](13, 18, ctx.loading) !== true && (ctx.show || ctx.search_str));
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_6__.NgForOf, _angular_common__WEBPACK_IMPORTED_MODULE_6__.NgIf, _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_2__.IconComponent, _components_src_lib_virtual_keyboard_component__WEBPACK_IMPORTED_MODULE_3__.VirtualKeyboardComponent, _angular_material_autocomplete__WEBPACK_IMPORTED_MODULE_7__.MatAutocomplete, _angular_material_core__WEBPACK_IMPORTED_MODULE_8__.MatOption, _angular_material_autocomplete__WEBPACK_IMPORTED_MODULE_7__.MatAutocompleteTrigger, _angular_material_autocomplete__WEBPACK_IMPORTED_MODULE_7__.MatAutocompleteOrigin, _angular_material_core__WEBPACK_IMPORTED_MODULE_8__.MatRipple, _angular_material_progress_spinner__WEBPACK_IMPORTED_MODULE_9__.MatProgressSpinner, _angular_forms__WEBPACK_IMPORTED_MODULE_10__.DefaultValueAccessor, _angular_forms__WEBPACK_IMPORTED_MODULE_10__.NgControlStatus, _angular_forms__WEBPACK_IMPORTED_MODULE_10__.NgModel, _angular_common__WEBPACK_IMPORTED_MODULE_6__.AsyncPipe, _angular_common__WEBPACK_IMPORTED_MODULE_6__.SlicePipe],
    styles: ["[_nghost-%COMP%] {\n                z-index: 99;\n                position: relative;\n            }\n\n            [role='search'][_ngcontent-%COMP%] {\n                height: 3rem;\n                width: 0;\n                border-radius: 1.5rem;\n                border: 1px solid var(--b3);\n                transition: width 200ms opacity 200ms;\n                opacity: 0;\n                pointer-events: none;\n            }\n\n            [role='search'].show[_ngcontent-%COMP%] {\n                width: 24rem;\n                opacity: 1;\n                pointer-events: auto;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImV4cGxvcmUtc2VhcmNoLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1lBQ1k7Z0JBQ0ksV0FBVztnQkFDWCxrQkFBa0I7WUFDdEI7O1lBRUE7Z0JBQ0ksWUFBWTtnQkFDWixRQUFRO2dCQUNSLHFCQUFxQjtnQkFDckIsMkJBQTJCO2dCQUMzQixxQ0FBcUM7Z0JBQ3JDLFVBQVU7Z0JBQ1Ysb0JBQW9CO1lBQ3hCOztZQUVBO2dCQUNJLFlBQVk7Z0JBQ1osVUFBVTtnQkFDVixvQkFBb0I7WUFDeEIiLCJmaWxlIjoiZXhwbG9yZS1zZWFyY2guY29tcG9uZW50LnRzIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICA6aG9zdCB7XG4gICAgICAgICAgICAgICAgei1pbmRleDogOTk7XG4gICAgICAgICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBbcm9sZT0nc2VhcmNoJ10ge1xuICAgICAgICAgICAgICAgIGhlaWdodDogM3JlbTtcbiAgICAgICAgICAgICAgICB3aWR0aDogMDtcbiAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiAxLjVyZW07XG4gICAgICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYjMpO1xuICAgICAgICAgICAgICAgIHRyYW5zaXRpb246IHdpZHRoIDIwMG1zIG9wYWNpdHkgMjAwbXM7XG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMDtcbiAgICAgICAgICAgICAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgW3JvbGU9J3NlYXJjaCddLnNob3cge1xuICAgICAgICAgICAgICAgIHdpZHRoOiAyNHJlbTtcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAxO1xuICAgICAgICAgICAgICAgIHBvaW50ZXItZXZlbnRzOiBhdXRvO1xuICAgICAgICAgICAgfVxuICAgICAgICAiXX0= */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvZXhwbG9yZS9zcmMvbGliL2V4cGxvcmUtc2VhcmNoLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1lBQ1k7Z0JBQ0ksV0FBVztnQkFDWCxrQkFBa0I7WUFDdEI7O1lBRUE7Z0JBQ0ksWUFBWTtnQkFDWixRQUFRO2dCQUNSLHFCQUFxQjtnQkFDckIsMkJBQTJCO2dCQUMzQixxQ0FBcUM7Z0JBQ3JDLFVBQVU7Z0JBQ1Ysb0JBQW9CO1lBQ3hCOztZQUVBO2dCQUNJLFlBQVk7Z0JBQ1osVUFBVTtnQkFDVixvQkFBb0I7WUFDeEI7O0FBRVosd3VDQUF3dUMiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIDpob3N0IHtcbiAgICAgICAgICAgICAgICB6LWluZGV4OiA5OTtcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIFtyb2xlPSdzZWFyY2gnXSB7XG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAzcmVtO1xuICAgICAgICAgICAgICAgIHdpZHRoOiAwO1xuICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDEuNXJlbTtcbiAgICAgICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iMyk7XG4gICAgICAgICAgICAgICAgdHJhbnNpdGlvbjogd2lkdGggMjAwbXMgb3BhY2l0eSAyMDBtcztcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAwO1xuICAgICAgICAgICAgICAgIHBvaW50ZXItZXZlbnRzOiBub25lO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBbcm9sZT0nc2VhcmNoJ10uc2hvdyB7XG4gICAgICAgICAgICAgICAgd2lkdGg6IDI0cmVtO1xuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDE7XG4gICAgICAgICAgICAgICAgcG9pbnRlci1ldmVudHM6IGF1dG87XG4gICAgICAgICAgICB9XG4gICAgICAgICJdLCJzb3VyY2VSb290IjoiIn0= */"]
  });
}

/***/ }),

/***/ 35446:
/*!********************************************************!*\
  !*** ./libs/explore/src/lib/explore-search.service.ts ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ExploreSearchService: () => (/* binding */ ExploreSearchService)
/* harmony export */ });
/* harmony import */ var _home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 89204);
/* harmony import */ var _placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @placeos/ts-client */ 35713);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! rxjs */ 90521);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! rxjs */ 71536);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! rxjs */ 68824);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! rxjs/operators */ 8627);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! rxjs/operators */ 71963);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! rxjs/operators */ 35443);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! rxjs/operators */ 7841);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! rxjs/operators */ 19803);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! rxjs/operators */ 66000);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! rxjs/operators */ 29314);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! rxjs/operators */ 57871);
/* harmony import */ var libs_spaces_src_lib_space_class__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! libs/spaces/src/lib/space.class */ 30735);
/* harmony import */ var libs_users_src_lib_staff_fn__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! libs/users/src/lib/staff.fn */ 2372);
/* harmony import */ var libs_organisation_src_lib_organisation_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! libs/organisation/src/lib/organisation.service */ 19863);
/* harmony import */ var _placeos_organisation__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @placeos/organisation */ 2510);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @angular/core */ 37580);












const TYPES = ['space', 'contact', 'feature', 'user'];
function typeIndex(item) {
  return TYPES.indexOf(item.is_role ? 'contact' : item.type);
}
class ExploreSearchService {
  constructor(_org, _settings, _maps_people) {
    this._org = _org;
    this._settings = _settings;
    this._maps_people = _maps_people;
    /** Current search results for staff users */
    this._emergency_contacts = new rxjs__WEBPACK_IMPORTED_MODULE_7__.BehaviorSubject([]);
    /** Filter string for results */
    this._filter = new rxjs__WEBPACK_IMPORTED_MODULE_7__.BehaviorSubject('');
    /** Whether results are being loaded */
    this._loading = new rxjs__WEBPACK_IMPORTED_MODULE_7__.BehaviorSubject(false);
    this.emergency_contacts = this._emergency_contacts.asObservable();
    this._role_assigned_contacts = this._org.active_building.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.filter)(bld => !!bld), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.switchMap)(bld => (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.showMetadata)(bld.id, 'emergency_contacts')), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.map)(({
      details
    }) => details?.contacts || []), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_11__.shareReplay)(1));
    this._user_search = this._filter.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.debounceTime)(400), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.tap)(() => this._loading.next(true)), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.switchMap)(q => q?.length > 2 ? this.search_fn(q).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_14__.catchError)(() => (0,rxjs__WEBPACK_IMPORTED_MODULE_15__.of)([]))) : (0,rxjs__WEBPACK_IMPORTED_MODULE_15__.of)([])), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_11__.shareReplay)(1));
    this._space_search = this._filter.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.debounceTime)(400), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.tap)(() => this._loading.next(true)), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.switchMap)(q => q?.length > 2 ? (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.querySystems)({
      q,
      zone_id: this._org.organisation.id
    }).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.map)(({
      data
    }) => data.filter(_ => _.map_id).map(_ => new libs_spaces_src_lib_space_class__WEBPACK_IMPORTED_MODULE_3__.Space({
      ..._,
      level: this._org.levelWithID(_.zones)
    })))) : (0,rxjs__WEBPACK_IMPORTED_MODULE_15__.of)([])), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_14__.catchError)(() => []));
    this._maps_people_search = (0,rxjs__WEBPACK_IMPORTED_MODULE_16__.combineLatest)([this._maps_people.available$, this._filter, this._org.active_building]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.debounceTime)(1000), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.switchMap)(([available, q]) => available && q.length > 2 ? mapsindoors?.services.LocationsService.getLocations({
      q
    }) : (0,rxjs__WEBPACK_IMPORTED_MODULE_15__.of)([])), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.map)(list => {
      return list.map(_ => ({
        id: _.properties?.externalId || _.properties?.roomId || _.roomId || _.id,
        map_id: _.properties?.externalId || _.properties?.roomId || _.roomId || '',
        type: 'feature',
        name: _.properties?.name || '',
        description: `${_.properties?.roomId} , Level ${_.properties?.floorName}`
      }));
    }), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_11__.shareReplay)(1));
    this._map_features = this._org.active_building.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.filter)(bld => !!bld), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.switchMap)(() => (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.listChildMetadata)(this._org.building.id, {
      name: 'map_features'
    }).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_14__.catchError)(() => (0,rxjs__WEBPACK_IMPORTED_MODULE_15__.of)({
      details: []
    })))), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.map)(data => {
      const list = [];
      for (const item of data) {
        const metadata = item.metadata.map_features;
        if (!metadata) continue;
        const feature_list = metadata.details instanceof Array ? metadata.details : [];
        for (const feature of feature_list) {
          list.push({
            id: feature.id,
            type: 'feature',
            name: feature.name,
            description: '',
            zone: item.zone
          });
        }
      }
      return list;
    }));
    this._poi_metadata = this._org.initialised.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.filter)(_ => _), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.switchMap)(() => (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.showMetadata)(this._org.organisation.id, 'points-of-interest').pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_14__.catchError)(_ => (0,rxjs__WEBPACK_IMPORTED_MODULE_15__.of)({
      details: {}
    })))), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_11__.shareReplay)(1));
    this._poi_list = (0,rxjs__WEBPACK_IMPORTED_MODULE_16__.combineLatest)([this._org.active_building, this._poi_metadata]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.filter)(([bld]) => !!bld.id), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.map)(([bld, metadata]) => {
      const mapping = metadata.details || {};
      const levels = this._org.levelsForBuilding(bld);
      const list = (0,_placeos_common__WEBPACK_IMPORTED_MODULE_2__.flatten)(levels.map(lvl => mapping[lvl.id] || []));
      return list.filter(_ => _.can_search);
    }));
    this._points_of_interest = this._poi_list.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.map)(poi_list => {
      return poi_list.map(item => ({
        id: item.id || item.location,
        type: 'feature',
        name: item.name,
        description: '',
        zone: item.level_id
      }));
    }));
    this.search_results = (0,rxjs__WEBPACK_IMPORTED_MODULE_16__.combineLatest)([this._filter, this._space_search, this._user_search, this._emergency_contacts, this._role_assigned_contacts, this._map_features, this._maps_people_search, this._points_of_interest]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.map)(([filter, spaces, users, contacts, roled_contacts, features, mapspeople_items, points_of_interest]) => {
      const search = filter.toLowerCase();
      const results = [...mapspeople_items, ...spaces.filter(_ => _.email.toLowerCase().includes(search) || _.name.toLowerCase().includes(search) || _.display_name.toLowerCase().includes(search)).map(s => ({
        id: s.id,
        type: 'space',
        name: s.display_name || s.name,
        description: `Capacity: ${s.capacity} `
      })), ...(0,_placeos_common__WEBPACK_IMPORTED_MODULE_2__.flatten)(roled_contacts.map(u => u.roles.map(role => ({
        id: u.email,
        type: role || 'contact',
        is_role: true,
        name: u.name,
        description: u.email
      })))).filter(_ => _.name.toLowerCase().includes(search) || _.description.toLowerCase().includes(search) || _.type.toLowerCase().includes(search)), ...features.filter(_ => _.name.toLowerCase().includes(search)).map(s => ({
        id: s.id,
        type: 'feature',
        name: s.name,
        description: '',
        zone: s.zone?.id
      })), ...points_of_interest.filter(_ => _.name.toLowerCase().includes(search)), ...contacts.map(u => ({
        id: u.email,
        type: u.type || 'contact',
        is_role: true,
        name: u.name,
        description: u.email
      })).filter(_ => _.name.toLowerCase().includes(search) || _.description.toLowerCase().includes(search) || _.type.toLowerCase().includes(search)), ...users.map(u => ({
        id: u.email,
        type: 'user',
        name: u.name,
        description: u.email
      }))];
      results.sort((a, b) => typeIndex(a) - typeIndex(b) || a.name.localeCompare(b.name));
      return results;
    }), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.tap)(() => this._loading.next(false)), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_11__.shareReplay)(1));
    /** Obverable for whether results are being loaded */
    this.loading = this._loading.asObservable();
    /** Function used to query for users */
    this.search_fn = q => this._settings.get('app.basic_user_search') ? (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.queryUsers)({
      q,
      authority_id: (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.authority)()?.id
    }).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.map)(_ => _.data)) : (0,libs_users_src_lib_staff_fn__WEBPACK_IMPORTED_MODULE_4__.searchStaff)(q);
    this.search_results.subscribe();
    this.init();
  }
  init() {
    var _this = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      yield _this._org.initialised.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_17__.first)(_ => _)).toPromise();
      const mod = (0,_placeos_organisation__WEBPACK_IMPORTED_MODULE_6__.moduleFromMetadata)(_this._org.binding('location_services'), 'LocationServices');
      if (mod) {
        const binding = mod.binding('emergency_contacts');
        binding.listen().subscribe(contacts_map => {
          const list = [];
          for (const type in contacts_map) {
            for (const user of contacts_map[type]) {
              list.push({
                ...user,
                type
              });
            }
          }
          _this._emergency_contacts.next(list);
        });
        binding.bind();
      }
    })();
  }
  setFilter(str) {
    this._filter.next(str);
  }
  static #_ = this.ɵfac = function ExploreSearchService_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || ExploreSearchService)(_angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵinject"](libs_organisation_src_lib_organisation_service__WEBPACK_IMPORTED_MODULE_5__.OrganisationService), _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵinject"](_placeos_common__WEBPACK_IMPORTED_MODULE_2__.SettingsService), _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵinject"](_placeos_common__WEBPACK_IMPORTED_MODULE_2__.MapsPeopleService));
  };
  static #_2 = this.ɵprov = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵdefineInjectable"]({
    token: ExploreSearchService,
    factory: ExploreSearchService.ɵfac,
    providedIn: 'root'
  });
}

/***/ }),

/***/ 79303:
/*!***************************************************************!*\
  !*** ./libs/explore/src/lib/explore-sensor-info.component.ts ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ExploreSensorInfoComponent: () => (/* binding */ ExploreSensorInfoComponent)
/* harmony export */ });
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var _placeos_components__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @placeos/components */ 51588);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../components/src/lib/icon.component */ 69434);
/* harmony import */ var _components_src_lib_custom_tooltip_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../components/src/lib/custom-tooltip.component */ 22238);
/* harmony import */ var _angular_material_core__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @angular/material/core */ 74646);







function ExploreSensorInfoComponent_ng_template_3_div_1_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](0, "div", 5)(1, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](2, "thermostat");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](3, "div", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtextInterpolate1"]("", ctx_r0.temp, "\u02DAF");
  }
}
function ExploreSensorInfoComponent_ng_template_3_div_2_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](0, "div", 5)(1, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](2, "opacity");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](3, "div", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtextInterpolate1"]("", ctx_r0.humidity, "%");
  }
}
function ExploreSensorInfoComponent_ng_template_3_div_3_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](0, "div", 7)(1, "app-icon", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](2, "error");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]()();
  }
}
function ExploreSensorInfoComponent_ng_template_3_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](0, "div", 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](1, ExploreSensorInfoComponent_ng_template_3_div_1_Template, 5, 1, "div", 3)(2, ExploreSensorInfoComponent_ng_template_3_div_2_Template, 5, 1, "div", 3)(3, ExploreSensorInfoComponent_ng_template_3_div_3_Template, 3, 0, "div", 4);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngIf", ctx_r0.temp);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngIf", ctx_r0.humidity);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngIf", ctx_r0.temp > 82);
  }
}
let shown_id = '';
class ExploreSensorInfoComponent extends _placeos_common__WEBPACK_IMPORTED_MODULE_0__.AsyncHandler {
  get show() {
    return shown_id === this._details.id;
  }
  set show(value) {
    this.timeout('show', () => shown_id = value ? this._details.id : '');
  }
  constructor(_details) {
    super();
    this._details = _details;
    this.temp = this._details.temp || 0;
    this.humidity = this._details.humidity || 0;
  }
  static #_ = this.ɵfac = function ExploreSensorInfoComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || ExploreSensorInfoComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵdirectiveInject"](_placeos_components__WEBPACK_IMPORTED_MODULE_1__.MAP_FEATURE_DATA));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵdefineComponent"]({
    type: ExploreSensorInfoComponent,
    selectors: [["explore-sensor-info"]],
    features: [_angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵInheritDefinitionFeature"]],
    decls: 5,
    vars: 1,
    consts: [["stats", ""], ["icon", "", "matRipple", "", "customTooltip", "", "yPosition", "center", "xPosition", "center", 1, "absolute", "top-1/2", "left-1/2", "w-7", "h-7", "min-w-0", "-translate-x-1/2", "-translate-y-1/2", "bg-base-100", "shadow", "pointer-events-auto", 3, "content"], [1, "absolute", "top-1/2", "left-1/2", "-translate-x-1/2", "-translate-y-1/2", "bg-base-100", "rounded-lg", "border", "border-base-200", "p-2", "text-xl"], ["class", "flex items-center space-x-2 whitespace-nowrap pr-2", 4, "ngIf"], ["class", "absolute top-0 right-0 rounded-full translate-x-1/2 -translate-y-1/2 bg-base-100 border border-base-200", 4, "ngIf"], [1, "flex", "items-center", "space-x-2", "whitespace-nowrap", "pr-2"], [1, ""], [1, "absolute", "top-0", "right-0", "rounded-full", "translate-x-1/2", "-translate-y-1/2", "bg-base-100", "border", "border-base-200"], [1, "text-error", "text-xl"]],
    template: function ExploreSensorInfoComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](0, "button", 1)(1, "app-icon");
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](2, " visibility ");
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](3, ExploreSensorInfoComponent_ng_template_3_Template, 4, 3, "ng-template", null, 0, _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplateRefExtractor"]);
      }
      if (rf & 2) {
        const stats_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵreference"](4);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("content", stats_r2);
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_5__.NgIf, _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_2__.IconComponent, _components_src_lib_custom_tooltip_component__WEBPACK_IMPORTED_MODULE_3__.CustomTooltipComponent, _angular_material_core__WEBPACK_IMPORTED_MODULE_6__.MatRipple]
  });
}

/***/ }),

/***/ 48303:
/*!**************************************************************!*\
  !*** ./libs/explore/src/lib/explore-space-info.component.ts ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ExploreSpaceInfoComponent: () => (/* binding */ ExploreSpaceInfoComponent)
/* harmony export */ });
/* harmony import */ var _placeos_components__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/components */ 51588);
/* harmony import */ var libs_common_src_lib_settings_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! libs/common/src/lib/settings.service */ 14233);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/core */ 37580);





function ExploreSpaceInfoComponent_ng_template_2_img_4_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelement"](0, "img", 18);
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("source", ctx_r1.space.images[0]);
  }
}
function ExploreSpaceInfoComponent_ng_template_2_div_5_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelement"](0, "div", 19);
  }
}
function ExploreSpaceInfoComponent_ng_template_2_div_11_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](0, "div", 20);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtextInterpolate1"](" ", ctx_r1.available_until, " ");
  }
}
function ExploreSpaceInfoComponent_ng_template_2_div_15_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](0, "div", 21)(1, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵi18n"](2, 3);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtextInterpolate2"]("", ctx_r1.space.capacity, " ", ctx_r1.space.capacity === 1 ? "person" : "people", " ");
  }
}
function ExploreSpaceInfoComponent_ng_template_2_ul_16_li_1_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](0, "li", 24);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const feature_r3 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtextInterpolate1"](" ", feature_r3, " ");
  }
}
function ExploreSpaceInfoComponent_ng_template_2_ul_16_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](0, "ul", 22);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](1, ExploreSpaceInfoComponent_ng_template_2_ul_16_li_1_Template, 2, 1, "li", 23);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngForOf", ctx_r1.space.features);
  }
}
function ExploreSpaceInfoComponent_ng_template_2_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](0, "div", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelement"](1, "div", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](2, "div", 7)(3, "div", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](4, ExploreSpaceInfoComponent_ng_template_2_img_4_Template, 1, 1, "img", 9)(5, ExploreSpaceInfoComponent_ng_template_2_div_5_Template, 1, 0, "div", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](6, "div", 11)(7, "div", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](8, " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵi18n"](9, 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](10, " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](11, ExploreSpaceInfoComponent_ng_template_2_div_11_Template, 2, 1, "div", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](12, "div", 14)(13, "h4", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](14);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](15, ExploreSpaceInfoComponent_ng_template_2_div_15_Template, 4, 2, "div", 16)(16, ExploreSpaceInfoComponent_ng_template_2_ul_16_Template, 2, 1, "ul", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]()()();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵclassProp"]("-translate-x-full", ctx_r1.x_pos === "end")("-translate-y-full", ctx_r1.y_pos === "bottom");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("id", ctx_r1.space == null ? null : ctx_r1.space.id);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵclassProp"]("bg-neutral", ctx_r1.space.images[0])("h-32", ctx_r1.space.images[0])("h-8", !ctx_r1.space.images[0]);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngIf", ctx_r1.space.images[0]);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngIf", ctx_r1.space.images[0]);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵclassMap"]("capitalize rounded p-1 px-2 text-light border border-white shadow " + ctx_r1.status);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵi18nExp"](ctx_r1.status);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵi18nApply"](9);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngIf", ctx_r1.status !== "not-bookable");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtextInterpolate1"](" ", ctx_r1.space.display_name || ctx_r1.space.name, " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngIf", ctx_r1.space.capacity >= 0);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngIf", (ctx_r1.space.features == null ? null : ctx_r1.space.features.length) > 0 && ctx_r1.show_features);
  }
}
class ExploreSpaceInfoComponent {
  get show_features() {
    return !this._settings.get('app.spaces.hide_features');
  }
  constructor(_details, _settings, _element) {
    this._details = _details;
    this._settings = _settings;
    this._element = _element;
    /** Space to display details for */
    this.space = this._details.space;
    /** List of upcoming events for space */
    this.events = this._details.events;
    /** Current status of the space */
    this.status = this._details.status;
  }
  ngOnInit() {
    setTimeout(() => this.updateOffset(), 200);
  }
  updateOffset() {
    const pos = this._element.nativeElement.getBoundingClientRect();
    this.x_pos = pos.x < document.body.clientWidth / 2 ? 'start' : 'end';
    this.y_pos = pos.y < document.body.clientHeight / 2 ? 'top' : 'bottom';
  }
  get available_until() {
    return '';
  }
  static #_ = this.ɵfac = function ExploreSpaceInfoComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || ExploreSpaceInfoComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdirectiveInject"](_placeos_components__WEBPACK_IMPORTED_MODULE_0__.MAP_FEATURE_DATA), _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdirectiveInject"](libs_common_src_lib_settings_service__WEBPACK_IMPORTED_MODULE_1__.SettingsService), _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_2__.ElementRef));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdefineComponent"]({
    type: ExploreSpaceInfoComponent,
    selectors: [["explore-space-info"]],
    decls: 4,
    vars: 7,
    consts: () => {
      let i18n_0;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_3658078071800974217$$LIBS_EXPLORE_SRC_LIB_EXPLORE_SPACE_INFO_COMPONENT_TS_0 = goog.getMsg("{VAR_SELECT, select, free {Free } busy {Busy } pending {Pending } reserved {Reserved } other {Not Bookable }}");
        i18n_0 = MSG_EXTERNAL_3658078071800974217$$LIBS_EXPLORE_SRC_LIB_EXPLORE_SPACE_INFO_COMPONENT_TS_0;
      } else {
        i18n_0 = $localize`:␟86e6b3a473ea3e05830d2aef91c81199de1b9d33␟3658078071800974217:{VAR_SELECT, select, free {Free } busy {Busy } pending {Pending } reserved {Reserved } other {Not Bookable }}`;
      }
      i18n_0 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵi18nPostprocess"](i18n_0, {
        "VAR_SELECT": "\uFFFD0\uFFFD"
      });
      let i18n_1;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_2292396409867038415$$LIBS_EXPLORE_SRC_LIB_EXPLORE_SPACE_INFO_COMPONENT_TS_1 = goog.getMsg("Capacity: ");
        i18n_1 = MSG_EXTERNAL_2292396409867038415$$LIBS_EXPLORE_SRC_LIB_EXPLORE_SPACE_INFO_COMPONENT_TS_1;
      } else {
        i18n_1 = $localize`:␟36c2a5db33c6cfc9e239e589f975f5492bbb0550␟2292396409867038415:Capacity: `;
      }
      return [["tooltip", ""], ["space_tooltip", ""], i18n_0, i18n_1, ["customTooltip", "", 1, "h-full", "w-full", "pointer-events-auto", "relative", "hidden", "sm:block", "cursor-pointer", 3, "mouseenter", "content", "backdrop", "xPosition", "yPosition", "hover", "delay"], ["name", "space-info", 1, "absolute", "rounded", "bg-base-100", "top-0", "left-0", "transform", "shadow", "pointer-events-none", "overflow-hidden", 3, "id"], [1, "arrow"], [1, "relative"], [1, "w-full", "overflow-hidden", "flex", "items-center", "justify-center", "relative", "bg-opacity-20"], ["auth", "", "class", "object-cover min-h-full min-w-full", 3, "source", 4, "ngIf"], ["class", "absolute inset-0 bg-neutral", 4, "ngIf"], [1, "absolute", "top-2", "left-2", "flex", "flex-wrap", "text-sm"], ["status", ""], ["available-until", "", 4, "ngIf"], [1, "flex", "flex-col", "py-4", "px-2"], [1, "font-medium", "text-xl", "mb-2", "px-2"], ["capacity", "", "class", "text-base px-2 mb-2", 4, "ngIf"], ["class", "flex flex-wrap", 4, "ngIf"], ["auth", "", 1, "object-cover", "min-h-full", "min-w-full", 3, "source"], [1, "absolute", "inset-0", "bg-neutral"], ["available-until", ""], ["capacity", "", 1, "text-base", "px-2", "mb-2"], [1, "flex", "flex-wrap"], ["class", "text-xs px-2 py-1 m-1 rounded-2xl bg-base-200 font-medium", 4, "ngFor", "ngForOf"], [1, "text-xs", "px-2", "py-1", "m-1", "rounded-2xl", "bg-base-200", "font-medium"]];
    },
    template: function ExploreSpaceInfoComponent_Template(rf, ctx) {
      if (rf & 1) {
        const _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵgetCurrentView"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](0, "div", 4, 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵlistener"]("mouseenter", function ExploreSpaceInfoComponent_Template_div_mouseenter_0_listener() {
          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵrestoreView"](_r1);
          return _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵresetView"](ctx.updateOffset());
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](2, ExploreSpaceInfoComponent_ng_template_2_Template, 17, 20, "ng-template", null, 1, _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplateRefExtractor"]);
      }
      if (rf & 2) {
        const space_tooltip_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵreference"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("content", space_tooltip_r4)("backdrop", false)("xPosition", "center")("yPosition", "center")("hover", true)("delay", 3000);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵattribute"]("id", (ctx.space == null ? null : ctx.space.map_id) || (ctx.space == null ? null : ctx.space.id));
      }
    },
    styles: ["[name='space-info'][_ngcontent-%COMP%] {\n                width: 16rem;\n            }\n\n            [status][_ngcontent-%COMP%] {\n                background-color: #43a047;\n                font-weight: 500;\n            }\n\n            [status].busy[_ngcontent-%COMP%] {\n                background-color: #e53935;\n            }\n\n            [status].pending[_ngcontent-%COMP%] {\n                background-color: #ffb300;\n            }\n\n            [status].not-bookable[_ngcontent-%COMP%] {\n                background-color: #757575;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImV4cGxvcmUtc3BhY2UtaW5mby5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLFlBQVk7WUFDaEI7O1lBRUE7Z0JBQ0kseUJBQXlCO2dCQUN6QixnQkFBZ0I7WUFDcEI7O1lBRUE7Z0JBQ0kseUJBQXlCO1lBQzdCOztZQUVBO2dCQUNJLHlCQUF5QjtZQUM3Qjs7WUFFQTtnQkFDSSx5QkFBeUI7WUFDN0IiLCJmaWxlIjoiZXhwbG9yZS1zcGFjZS1pbmZvLmNvbXBvbmVudC50cyIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgW25hbWU9J3NwYWNlLWluZm8nXSB7XG4gICAgICAgICAgICAgICAgd2lkdGg6IDE2cmVtO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBbc3RhdHVzXSB7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogIzQzYTA0NztcbiAgICAgICAgICAgICAgICBmb250LXdlaWdodDogNTAwO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBbc3RhdHVzXS5idXN5IHtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZTUzOTM1O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBbc3RhdHVzXS5wZW5kaW5nIHtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZiMzAwO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBbc3RhdHVzXS5ub3QtYm9va2FibGUge1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICM3NTc1NzU7XG4gICAgICAgICAgICB9XG4gICAgICAgICJdfQ== */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvZXhwbG9yZS9zcmMvbGliL2V4cGxvcmUtc3BhY2UtaW5mby5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLFlBQVk7WUFDaEI7O1lBRUE7Z0JBQ0kseUJBQXlCO2dCQUN6QixnQkFBZ0I7WUFDcEI7O1lBRUE7Z0JBQ0kseUJBQXlCO1lBQzdCOztZQUVBO2dCQUNJLHlCQUF5QjtZQUM3Qjs7WUFFQTtnQkFDSSx5QkFBeUI7WUFDN0I7O0FBRVosZ2tDQUFna0MiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIFtuYW1lPSdzcGFjZS1pbmZvJ10ge1xuICAgICAgICAgICAgICAgIHdpZHRoOiAxNnJlbTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgW3N0YXR1c10ge1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICM0M2EwNDc7XG4gICAgICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgW3N0YXR1c10uYnVzeSB7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2U1MzkzNTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgW3N0YXR1c10ucGVuZGluZyB7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmYjMwMDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgW3N0YXR1c10ubm90LWJvb2thYmxlIHtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjNzU3NTc1O1xuICAgICAgICAgICAgfVxuICAgICAgICAiXSwic291cmNlUm9vdCI6IiJ9 */"]
  });
}

/***/ }),

/***/ 65897:
/*!********************************************************!*\
  !*** ./libs/explore/src/lib/explore-spaces.service.ts ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DEFAULT_COLOURS: () => (/* binding */ DEFAULT_COLOURS),
/* harmony export */   ExploreSpacesService: () => (/* binding */ ExploreSpacesService)
/* harmony export */ });
/* harmony import */ var _home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 89204);
/* harmony import */ var _placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @placeos/ts-client */ 35713);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! rxjs/operators */ 8627);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! rxjs/operators */ 71963);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! rxjs/operators */ 29314);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! rxjs/operators */ 35443);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! rxjs/operators */ 7841);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! rxjs/operators */ 33602);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! rxjs */ 71536);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! rxjs */ 68824);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var libs_common_src_lib_notifications__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! libs/common/src/lib/notifications */ 39525);
/* harmony import */ var libs_spaces_src_lib_space_class__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! libs/spaces/src/lib/space.class */ 30735);
/* harmony import */ var libs_events_src_lib_event_class__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! libs/events/src/lib/event.class */ 6727);
/* harmony import */ var libs_events_src_lib_event_form_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! libs/events/src/lib/event-form.service */ 26101);
/* harmony import */ var libs_organisation_src_lib_organisation_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! libs/organisation/src/lib/organisation.service */ 19863);
/* harmony import */ var _explore_state_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./explore-state.service */ 12455);
/* harmony import */ var _explore_space_info_component__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./explore-space-info.component */ 48303);
/* harmony import */ var _explore_booking_modal_component__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./explore-booking-modal.component */ 76301);
/* harmony import */ var _explore_book_qr_component__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./explore-book-qr.component */ 72213);
/* harmony import */ var _explore_icon_component__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./explore-icon.component */ 83207);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_material_dialog__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! @angular/material/dialog */ 12587);






















const DEFAULT_COLOURS = {
  free: '#43a047',
  pending: '#ffb300',
  reserved: '#e65100',
  busy: '#e53935',
  'signs-of-life': '#1565c0',
  'not-bookable': '#757575',
  unknown: '#757575'
};
class ExploreSpacesService extends _placeos_common__WEBPACK_IMPORTED_MODULE_2__.AsyncHandler {
  constructor(_state, _settings, _event_form, _dialog, _org) {
    super();
    this._state = _state;
    this._settings = _settings;
    this._event_form = _event_form;
    this._dialog = _dialog;
    this._org = _org;
    this._bookings = {};
    this._statuses = {};
    this._presence = {};
    this._panning = true;
    this._last_action = '';
    this.booking_rules = this._org.active_building.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.filter)(bld => !!bld), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_14__.switchMap)(bld => (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.showMetadata)(bld.id, `room_booking_rules`).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_15__.catchError)(() => (0,rxjs__WEBPACK_IMPORTED_MODULE_16__.of)({
      details: []
    })))), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_17__.map)(_ => _?.details instanceof Array ? _.details : []), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_18__.shareReplay)(1));
    this._bind = (0,rxjs__WEBPACK_IMPORTED_MODULE_19__.combineLatest)([this._state.spaces, this._state.options]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.filter)(([_, {
      is_public
    }]) => !is_public), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_17__.map)(([list]) => {
      this.unsubWith('b-');
      this.unsubWith('s-');
      this.unsubWith('c-');
      this._statuses = {};
      if (!list?.length) return;
      for (const space of list) {
        const mod = (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.getModule)(space.id, 'Bookings');
        let binding = mod.binding('bookings');
        this.subscription(`b-${space.id}`, binding.listen().subscribe(d => this.handleBookingsChange(list, space, d)));
        this.subscription(`b-bind-${space.id}`, binding.bind());
        binding = mod.binding('status');
        this.subscription(`s-${space.id}`, binding.listen().subscribe(d => this.handleStatusChange(list, space, d)));
        this.subscription(`s-bind-${space.id}`, binding.bind());
        binding = mod.binding('presence');
        this.subscription(`c-${space.id}`, binding.listen().subscribe(d => this.handlePresenceChange(list, space, d)));
        this.subscription(`c-bind-${space.id}`, binding.bind());
      }
      this.updateActions(list);
      this._updateHoverElements(list);
    }));
    this.subscription('spaces', this._bind.subscribe());
  }
  bookSpace(space, force = false) {
    var _this = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      if (_this._panning && _this._last_action === 'down') return;
      const booking_rules = yield _this.booking_rules.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_20__.take)(1)).toPromise();
      const {
        hidden
      } = (0,_placeos_common__WEBPACK_IMPORTED_MODULE_2__.rulesForResource)({
        date: Date.now(),
        duration: 60,
        resource: space,
        host: (0,_placeos_common__WEBPACK_IMPORTED_MODULE_2__.currentUser)()
      }, booking_rules) || {};
      if (hidden) {
        return (0,libs_common_src_lib_notifications__WEBPACK_IMPORTED_MODULE_3__.notifyError)('You do not have permission to book this space at this time.');
      }
      if (_this._statuses[space.id] !== 'free' && !force || !space.bookable) {
        return (0,libs_common_src_lib_notifications__WEBPACK_IMPORTED_MODULE_3__.notifyError)(`${space.display_name || space.name} is unavailable for the selected time and duration`);
      }
      _this._event_form.newForm();
      _this._event_form.form.patchValue({
        host: (0,_placeos_common__WEBPACK_IMPORTED_MODULE_2__.currentUser)()?.email,
        resources: [space]
      });
      if (_this._settings.get('app.events.booking_unavailable')) {
        return _this._event_form.openEventLinkModal();
      }
      _this._dialog.open(_this._settings.get('app.explore.show_booking_qr') ? _explore_book_qr_component__WEBPACK_IMPORTED_MODULE_11__.ExploreBookQrComponent : _explore_booking_modal_component__WEBPACK_IMPORTED_MODULE_10__.ExploreBookingModalComponent, {
        data: {
          space
        }
      });
    })();
  }
  handleBookingsChange(spaces, space, bookings) {
    if (!bookings) return;
    this._bookings[space.id] = bookings.map(i => new libs_events_src_lib_event_class__WEBPACK_IMPORTED_MODULE_5__.CalendarEvent(i));
    this.timeout('update_hover_els', () => this._updateHoverElements(spaces), 100);
  }
  handleStatusChange(spaces, space, status) {
    if (space.bookable) this._statuses[space.id] = status || 'free';else delete this._statuses[space.id];
    this.timeout('update_statuses', () => {
      this.clearTimeout('update_hover_els');
      this._updateStatus(spaces);
      this._updateHoverElements(spaces);
    }, 100);
  }
  handlePresenceChange(spaces, space, presence) {
    this._presence[space.id] = presence;
    this.timeout('update_icons', () => this._updateIcons(spaces), 100);
  }
  _updateStatus(spaces) {
    var _this2 = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      const style_map = {};
      const colours = _this2._settings.get('app.explore.colors') || {};
      for (const space of spaces) {
        if (!_this2._statuses[space.id]) continue;
        const status = _this2._statuses[space.id];
        style_map[`#${space.map_id}`] = {
          fill: colours[`space-${status}`] || colours[`${status}`] || DEFAULT_COLOURS[`${status}`],
          opacity: 0.6
        };
      }
      _this2._state.setStyles('spaces', style_map);
    })();
  }
  _updateHoverElements(spaces) {
    const features = [];
    for (const space of spaces) {
      if (!space.map_id) continue;
      features.push({
        location: space.map_id,
        full_size: true,
        no_scale: true,
        content: _explore_space_info_component__WEBPACK_IMPORTED_MODULE_9__.ExploreSpaceInfoComponent,
        z_index: 10,
        data: {
          space: new libs_spaces_src_lib_space_class__WEBPACK_IMPORTED_MODULE_4__.Space(space),
          events: this._bookings[space.id],
          status: this._statuses[space.id] || 'not-bookable'
        }
      });
    }
    this._state.setFeatures('spaces', features);
  }
  _updateIcons(spaces) {
    if (!this._settings.get('show_presence_indicators')) return;
    const features = [];
    for (const space of spaces) {
      if (!space.map_id) continue;
      features.push({
        location: space.map_id,
        content: _explore_icon_component__WEBPACK_IMPORTED_MODULE_12__.ExploreIconComponent,
        data: {
          icon: {
            class: 'material-symbols-rounded',
            content: 'sensor_occupied'
          },
          color: this._presence[space.id] ? 'var(--su)' : 'var(--bc)',
          text_color: this._presence[space.id] ? 'var(--suc)' : 'var(--b1)'
        },
        z_index: 98
      });
    }
    this._state.setFeatures('spaces-presence', features);
  }
  updateActions(spaces) {
    const actions = [];
    for (const space of spaces) {
      if (!space.map_id) continue;
      for (const action of ['mousedown', 'touchstart']) {
        actions.push({
          id: space.map_id,
          action: action,
          priority: 5,
          callback: () => {
            this._panning = false;
            this.timeout('panning', () => this._panning = true, 300);
            this._last_action = 'down';
          }
        });
      }
      for (const action of ['mouseup', 'touchend']) {
        actions.push({
          id: space.map_id,
          action: action,
          priority: 5,
          callback: () => {
            this.bookSpace(space);
            this._last_action = 'up';
          }
        });
      }
    }
    this.timeout('set-actions', () => this._state.setActions('spaces', actions), 50);
  }
  static #_ = this.ɵfac = function ExploreSpacesService_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || ExploreSpacesService)(_angular_core__WEBPACK_IMPORTED_MODULE_21__["ɵɵinject"](_explore_state_service__WEBPACK_IMPORTED_MODULE_8__.ExploreStateService), _angular_core__WEBPACK_IMPORTED_MODULE_21__["ɵɵinject"](_placeos_common__WEBPACK_IMPORTED_MODULE_2__.SettingsService), _angular_core__WEBPACK_IMPORTED_MODULE_21__["ɵɵinject"](libs_events_src_lib_event_form_service__WEBPACK_IMPORTED_MODULE_6__.EventFormService), _angular_core__WEBPACK_IMPORTED_MODULE_21__["ɵɵinject"](_angular_material_dialog__WEBPACK_IMPORTED_MODULE_22__.MatDialog), _angular_core__WEBPACK_IMPORTED_MODULE_21__["ɵɵinject"](libs_organisation_src_lib_organisation_service__WEBPACK_IMPORTED_MODULE_7__.OrganisationService));
  };
  static #_2 = this.ɵprov = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_21__["ɵɵdefineInjectable"]({
    token: ExploreSpacesService,
    factory: ExploreSpacesService.ɵfac
  });
}

/***/ }),

/***/ 12455:
/*!*******************************************************!*\
  !*** ./libs/explore/src/lib/explore-state.service.ts ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ExploreStateService: () => (/* binding */ ExploreStateService)
/* harmony export */ });
/* harmony import */ var _home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 89204);
/* harmony import */ var _placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @placeos/ts-client */ 35713);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! rxjs */ 90521);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! rxjs */ 68824);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! rxjs */ 71536);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! rxjs/operators */ 8627);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! rxjs/operators */ 71963);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! rxjs/operators */ 35443);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! rxjs/operators */ 29314);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! rxjs/operators */ 7841);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! rxjs/operators */ 19803);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! rxjs/operators */ 57871);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var libs_organisation_src_lib_organisation_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! libs/organisation/src/lib/organisation.service */ 19863);
/* harmony import */ var libs_spaces_src_lib_space_class__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! libs/spaces/src/lib/space.class */ 30735);
/* harmony import */ var libs_spaces_src_lib_spaces_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! libs/spaces/src/lib/spaces.service */ 7401);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @angular/core */ 37580);












class ExploreStateService extends _placeos_common__WEBPACK_IMPORTED_MODULE_2__.AsyncHandler {
  get positions() {
    return this._positions.getValue();
  }
  get active_level() {
    return this._level.getValue();
  }
  constructor(_org, _spaces, _settings) {
    super();
    this._org = _org;
    this._spaces = _spaces;
    this._settings = _settings;
    /** Currently active level */
    this._level = new rxjs__WEBPACK_IMPORTED_MODULE_6__.BehaviorSubject(null);
    /** Currently active level */
    this._positions = new rxjs__WEBPACK_IMPORTED_MODULE_6__.BehaviorSubject({
      zoom: 1,
      center: {
        x: 0.5,
        y: 0.5
      }
    });
    /** Mapping of groups to their styles */
    this._styles = new rxjs__WEBPACK_IMPORTED_MODULE_6__.BehaviorSubject({});
    /** Mapping of groups to their features */
    this._features = new rxjs__WEBPACK_IMPORTED_MODULE_6__.BehaviorSubject({});
    /** Mapping of groups to their actions */
    this._actions = new rxjs__WEBPACK_IMPORTED_MODULE_6__.BehaviorSubject({});
    /** Mapping of groups to their actions */
    this._labels = new rxjs__WEBPACK_IMPORTED_MODULE_6__.BehaviorSubject({});
    this._options = new rxjs__WEBPACK_IMPORTED_MODULE_6__.BehaviorSubject({
      is_public: false,
      disable: ['zones', 'devices']
    });
    this._message = new rxjs__WEBPACK_IMPORTED_MODULE_6__.BehaviorSubject('');
    /** Currently active level */
    this.level = this._level.asObservable();
    /** Currently active level */
    this.message = this._message.asObservable();
    /** Spaces associated with the active level */
    this.spaces = (0,rxjs__WEBPACK_IMPORTED_MODULE_7__.combineLatest)([this._level, this._org.initialised]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.filter)(([_, initialised]) => initialised), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.switchMap)(([level]) => (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.querySystems)({
      zone_id: level?.id || this._org.organisation.id,
      limit: 50
    }).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.map)(({
      data
    }) => data.map(_ => new libs_spaces_src_lib_space_class__WEBPACK_IMPORTED_MODULE_4__.Space(_))), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_11__.catchError)(_ => (0,rxjs__WEBPACK_IMPORTED_MODULE_12__.of)([])))), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.shareReplay)(1));
    /** Currently shown space's map URL */
    this.map_url = this._level.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.map)(lvl => (lvl ? lvl.map_id : '') || ''));
    /** Currently center and zoom positions for map */
    this.map_positions = this._positions.asObservable();
    /** Currently center and zoom positions for map */
    this.map_features = (0,rxjs__WEBPACK_IMPORTED_MODULE_7__.combineLatest)([this._features, this._options]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_14__.debounceTime)(200), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.map)(([features, options]) => {
      let list = [];
      for (const key in features) {
        if (options.disable?.includes(key) || options.disable_features?.includes(key) || key === 'zones-canvas' && options.disable?.includes('zones')) continue;
        list = list.concat(features[key]);
      }
      return list;
    }));
    /** Currently center and zoom positions for map */
    this.map_actions = (0,rxjs__WEBPACK_IMPORTED_MODULE_7__.combineLatest)([this._actions, this._options]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_14__.debounceTime)(200), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.map)(([actions, options]) => {
      let list = [];
      for (const key in actions) {
        if (options.disable?.includes(key) || options.disable_actions?.includes(key)) continue;
        list = list.concat(actions[key]);
      }
      return list;
    }));
    /** Currently center and zoom positions for map */
    this.map_labels = (0,rxjs__WEBPACK_IMPORTED_MODULE_7__.combineLatest)([this._labels, this._options]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_14__.debounceTime)(200), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.map)(([labels, options]) => {
      let list = [];
      for (const key in labels) {
        if (options.disable?.includes(key) || options.disable_labels?.includes(key)) continue;
        list = list.concat(labels[key]);
      }
      return list;
    }));
    /** Current map styles */
    this.map_styles = (0,rxjs__WEBPACK_IMPORTED_MODULE_7__.combineLatest)([this._styles, this._options]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_14__.debounceTime)(200), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.map)(([styles, options]) => {
      let style_mappings = {
        text: {
          display: 'none'
        }
      };
      for (const key in styles) {
        if (options.disable?.includes(key) || options.disable_styles?.includes(key)) continue;
        style_mappings = {
          ...style_mappings,
          ...styles[key]
        };
      }
      if (options.disable?.includes('zones')) {
        style_mappings['#zones'] = {
          display: 'none'
        };
        style_mappings['#Zones'] = {
          display: 'none'
        };
      }
      return style_mappings;
    }));
    this.options = this._options.asObservable();
    this.init();
  }
  init() {
    var _this = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      yield _this._org.initialised.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_15__.first)(_ => _)).toPromise();
      _this._org.active_levels.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.filter)(_ => !!_)).subscribe(level_list => {
        const level = _this._level.getValue();
        const has_level = level_list.find(lvl => level?.id === lvl.id);
        if (!has_level && level_list.length) {
          _this.setLevel(level_list[0].id);
        }
        if (_this._settings.get('app.explore.disable_actions')) {
          _this.setOptions({
            disable_actions: _this._settings.get('app.explore.disable_actions')
          });
        }
        if (_this._settings.get('app.explore.disable_labels')) {
          _this.setOptions({
            disable_labels: _this._settings.get('app.explore.disable_labels')
          });
        }
        if (_this._settings.get('app.explore.disable_features')) {
          _this.setOptions({
            disable_features: _this._settings.get('app.explore.disable_features')
          });
        }
        if (_this._settings.get('app.explore.disable_styles')) {
          _this.setOptions({
            disable_styles: _this._settings.get('app.explore.disable_styles')
          });
        }
      });
    })();
  }
  setOptions(options) {
    const old_options = this._options.getValue();
    const disable = (0,_placeos_common__WEBPACK_IMPORTED_MODULE_2__.unique)([...(options.disable || old_options.disable), ...(this._settings.get('app.explore.disable') || [])]);
    this._options.next({
      ...this._options.getValue(),
      ...options,
      disable
    });
  }
  reset() {
    this._styles.next({});
    this._features.next({});
    this._labels.next({});
    this._actions.next({});
    this._options.next({
      is_public: false,
      disable: ['zones', 'devices']
    });
    this.setPositions(1, {
      x: 0.5,
      y: 0.5
    });
  }
  setLevel(zone_id) {
    const lvl = this._org.levelWithID([zone_id]);
    if (lvl) this._level.next(lvl);
  }
  setStyles(name, styles) {
    const style_map = this._styles.getValue();
    style_map[name] = styles;
    this._styles.next(style_map);
  }
  setFeatures(name, features) {
    const feature_map = this._features.getValue();
    feature_map[name] = features;
    this._features.next(feature_map);
  }
  setActions(name, actions) {
    const actions_map = this._actions.getValue();
    actions_map[name] = actions;
    this._actions.next(actions_map);
  }
  setLabels(name, labels) {
    const labels_map = this._labels.getValue();
    labels_map[name] = labels;
    this._labels.next(labels_map);
  }
  setPositions(zoom, center) {
    this._positions.next({
      zoom,
      center
    });
  }
  has(type, id, exclude = []) {
    if (type === 'style') {
      const styles_map = this._styles.getValue();
      for (const group in styles_map) {
        if (exclude.includes(group)) continue;
        const styles = styles_map[group];
        if (id in styles || `#${id}` in styles) return true;
      }
    } else if (type === 'feature') {
      const feature_map = this._features.getValue();
      for (const group in feature_map) {
        if (exclude.includes(group)) continue;
        for (const feature of feature_map[group]) {
          if (feature.location === id) return true;
        }
      }
    } else if (type === 'action') {
      const actions_map = this._actions.getValue();
      for (const group in actions_map) {
        if (exclude.includes(group)) continue;
        for (const feature of actions_map[group]) {
          if (feature.id === id) return true;
        }
      }
    } else if (type === 'label') {
      const labels_map = this._labels.getValue();
      for (const group in labels_map) {
        if (exclude.includes(group)) continue;
        for (const feature of labels_map[group]) {
          if (feature.location === id) return true;
        }
      }
    }
    return false;
  }
  static #_ = this.ɵfac = function ExploreStateService_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || ExploreStateService)(_angular_core__WEBPACK_IMPORTED_MODULE_16__["ɵɵinject"](libs_organisation_src_lib_organisation_service__WEBPACK_IMPORTED_MODULE_3__.OrganisationService), _angular_core__WEBPACK_IMPORTED_MODULE_16__["ɵɵinject"](libs_spaces_src_lib_spaces_service__WEBPACK_IMPORTED_MODULE_5__.SpacesService), _angular_core__WEBPACK_IMPORTED_MODULE_16__["ɵɵinject"](_placeos_common__WEBPACK_IMPORTED_MODULE_2__.SettingsService));
  };
  static #_2 = this.ɵprov = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_16__["ɵɵdefineInjectable"]({
    token: ExploreStateService,
    factory: ExploreStateService.ɵfac,
    providedIn: 'root'
  });
}

/***/ }),

/***/ 61369:
/*!*******************************************************!*\
  !*** ./libs/explore/src/lib/explore-zones.service.ts ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ExploreZonesService: () => (/* binding */ ExploreZonesService)
/* harmony export */ });
/* harmony import */ var _home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 89204);
/* harmony import */ var _placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @placeos/ts-client */ 35713);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! rxjs/operators */ 8627);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! rxjs/operators */ 35443);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! rxjs/operators */ 19803);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! rxjs/operators */ 57871);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var libs_organisation_src_lib_organisation_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! libs/organisation/src/lib/organisation.service */ 19863);
/* harmony import */ var _explore_state_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./explore-state.service */ 12455);
/* harmony import */ var _explore_spaces_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./explore-spaces.service */ 65897);
/* harmony import */ var _explore_sensor_info_component__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./explore-sensor-info.component */ 79303);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! rxjs */ 90521);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! rxjs */ 68824);
/* harmony import */ var libs_components_src_lib_map_canvas_component__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! libs/components/src/lib/map-canvas.component */ 37558);
/* harmony import */ var _explore_icon_component__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./explore-icon.component */ 83207);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @angular/core */ 37580);















class ExploreZonesService extends _placeos_common__WEBPACK_IMPORTED_MODULE_2__.AsyncHandler {
  constructor(_state, _org, _settings) {
    super();
    this._state = _state;
    this._org = _org;
    this._settings = _settings;
    this._area_list = [];
    this._statuses = {};
    this._count_key = {};
    this._location = {};
    this._label_location = {};
    this._capacity = {};
    this._draw = {};
    this._points = {};
    this._features = [];
    this._polygons$ = new rxjs__WEBPACK_IMPORTED_MODULE_9__.BehaviorSubject([]);
    this._bind = (0,rxjs__WEBPACK_IMPORTED_MODULE_10__.combineLatest)([this._org.active_building, this._state.level, this._state.options]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_11__.filter)(([bld, lvl, {
      is_public
    }]) => !!bld && !!lvl && !is_public), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.map)(([_, lvl]) => {
      this._statuses = {};
      let system_id = this._org.binding('area_management');
      if (!system_id) return;
      const bind_areas = (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.getModule)(system_id, 'AreaManagement').binding(`${lvl.id}:areas`);
      const bind_zone = (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.getModule)(system_id, 'AreaManagement').binding(`${lvl.id}`);
      const zones = (0,rxjs__WEBPACK_IMPORTED_MODULE_10__.combineLatest)([bind_areas.listen(), bind_zone.listen()]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.debounceTime)(100), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.map)(([a, z]) => [...(a?.value || []), ...(z?.value || []).filter(_ => _.location === 'area')]));
      this.subscription(`zones-status`, zones.subscribe(l => this.parseData(l)));
      this.subscription('binding', bind_areas.bind());
      this.subscription('zone-binding', bind_zone.bind());
    }));
    this.init();
  }
  init() {
    var _this = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      yield _this._org.initialised.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_14__.first)(_ => _)).toPromise();
      const zone_metadata = yield Promise.all(_this._org.levels.map(bld => (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.showMetadata)(bld.id, 'map_regions').toPromise()));
      _this._area_list = [];
      for (const zone of zone_metadata) {
        const areas = zone?.details?.areas;
        if (!areas) continue;
        for (const area of areas) {
          const {
            capacity,
            hide_label,
            label_location,
            draw_polygon,
            area_count_key
          } = area.properties || {};
          const {
            coordinates
          } = area.geometry || {};
          _this._capacity[area.id] = capacity || 100;
          _this._count_key[area.id] = area_count_key || '';
          _this._location[area.id] = coordinates?.length ? getCenterPoint(coordinates) : null;
          _this._label_location[area.id] = hide_label === false ? label_location || _this._location[area.id] : null;
          _this._draw[area.id] = !!draw_polygon || _this._settings.get('app.explore.use_zone_polygons');
          _this._points[area.id] = coordinates || [];
          _this._area_list.push(area.map_id || area.id);
        }
      }
      _this._state.setFeatures('zones-canvas', [{
        track_id: 'zones-canvas',
        location: {
          x: 0.5,
          y: 0.5
        },
        content: libs_components_src_lib_map_canvas_component__WEBPACK_IMPORTED_MODULE_7__.MapCanvasComponent,
        data: {
          polygons$: _this._polygons$,
          draw_points: false,
          draw_labels: false
        }
      }]);
      _this.updateStatus();
      _this.subscription('bind', _this._bind.subscribe());
    })();
  }
  parseData(value = []) {
    const labels = [];
    const features = [];
    for (const zone of value) {
      const id = zone.map_id || zone.area_id;
      // if (!this._area_list.includes(id)) continue;
      const capacity = zone.capacity || this._capacity[id] || 100;
      const count = zone[this._count_key[id] || this._settings.get('app.explore.area_count_key') || 'count'] || 0;
      const filled = count / capacity;
      this._statuses[id] = zone.at_location ? 'busy' : filled < 0.4 ? 'free' : filled < 0.75 ? 'pending' : 'busy';
      if (!this._location[id]) continue;
      let content = '';
      if (zone.count) {
        content += `${zone.count || 0} User Device${zone.count === 1 ? '' : 's'}\n`;
      }
      if (zone.temperature) content += `Temperature: ${zone.temperature} ˚C\n`;
      if (zone.people_count > 0) content += `${zone.people_count_sum} ${zone.people_count_sum === 1 ? 'Person' : 'People'}\n`;
      if (zone.humidity) content += `Humidity: ${zone.humidity}%\n`;
      if (zone.queue_size) content += `Queue Size: ${zone.queue_size}%\n`;
      if (zone.counter) content += `Count: ${zone.counter}\n`;
      if (this._label_location[id] && !this._settings.get('app.explore.show_zone_labels')) {
        labels.push({
          location: this._label_location[id],
          content,
          z_index: 100
        });
      }
      if (this._settings.get('app.explore.show_zone_sensor_info') && (zone.temperature || zone.humidity)) {
        features.push({
          track_id: `sensors:${id}`,
          location: this._location[id],
          content: _explore_sensor_info_component__WEBPACK_IMPORTED_MODULE_6__.ExploreSensorInfoComponent,
          data: {
            id,
            temp: zone.temperature || 10,
            humidity: zone.humidity || 10
          },
          z_index: 98
        });
      }
    }
    this._features = features;
    this._state.setLabels('zones', labels);
    this.updateStatus();
  }
  updateStatus() {
    const style_map = {};
    const features = [];
    const colours = this._settings.get('app.explore.colors') || {};
    const polygons = [];
    for (const zone_id in this._statuses) {
      const colour = colours[`zone-${this._statuses[zone_id]}`] || colours[`${this._statuses[zone_id]}`] || _explore_spaces_service__WEBPACK_IMPORTED_MODULE_5__.DEFAULT_COLOURS[`${this._statuses[zone_id]}`];
      if (this._draw[zone_id]) {
        polygons.push({
          name: zone_id,
          points: this._points[zone_id],
          color: colour
        });
      } else {
        if (this._state.has('style', zone_id, ['zones', 'zones-styles'])) {
          features.push({
            location: zone_id,
            content: _explore_icon_component__WEBPACK_IMPORTED_MODULE_8__.ExploreIconComponent,
            data: {
              icon: {
                content: 'pin_drop'
              }
            },
            full_size: true,
            z_index: 98
          });
        } else {
          style_map[`#${zone_id}`] = {
            fill: colour,
            opacity: 0.6
          };
        }
      }
    }
    this._polygons$.next(polygons);
    this._state.setFeatures('zones', [...features, ...this._features]);
    this._state.setStyles('zones-styles', style_map);
  }
  static #_ = this.ɵfac = function ExploreZonesService_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || ExploreZonesService)(_angular_core__WEBPACK_IMPORTED_MODULE_15__["ɵɵinject"](_explore_state_service__WEBPACK_IMPORTED_MODULE_4__.ExploreStateService), _angular_core__WEBPACK_IMPORTED_MODULE_15__["ɵɵinject"](libs_organisation_src_lib_organisation_service__WEBPACK_IMPORTED_MODULE_3__.OrganisationService), _angular_core__WEBPACK_IMPORTED_MODULE_15__["ɵɵinject"](_placeos_common__WEBPACK_IMPORTED_MODULE_2__.SettingsService));
  };
  static #_2 = this.ɵprov = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_15__["ɵɵdefineInjectable"]({
    token: ExploreZonesService,
    factory: ExploreZonesService.ɵfac
  });
}
function getCenterPoint(points) {
  const diff = (points || []).reduce((m, [x, y]) => ({
    x_min: x < m.x_min ? x : m.x_min,
    x_max: x > m.x_max ? x : m.x_max,
    y_min: y < m.y_min ? y : m.y_min,
    y_max: y > m.y_max ? y : m.y_max
  }), {
    x_min: 100,
    x_max: -100,
    y_min: 100,
    y_max: -100
  });
  return {
    x: diff.x_min + (diff.x_max - diff.x_min) / 2,
    y: diff.y_min + (diff.y_max - diff.y_min) / 2
  };
}

/***/ }),

/***/ 69801:
/*!****************************************************************!*\
  !*** ./libs/explore/src/lib/explore-zoom-control.component.ts ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ExploreZoomControlComponent: () => (/* binding */ ExploreZoomControlComponent)
/* harmony export */ });
/* harmony import */ var _explore_state_service__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./explore-state.service */ 12455);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../components/src/lib/icon.component */ 69434);
/* harmony import */ var _angular_material_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/material/core */ 74646);
/* harmony import */ var _angular_material_tooltip__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/material/tooltip */ 80640);






class ExploreZoomControlComponent {
  constructor(_state) {
    this._state = _state;
    this.zoomIn = () => this._state.setPositions(Math.min(10, this._state.positions.zoom * 1.2), this._state.positions.center);
    this.zoomOut = () => this._state.setPositions(Math.max(1, this._state.positions.zoom * (1 / 1.2)), this._state.positions.center);
    this.reset = () => this._state.setPositions(1, {
      x: 0.5,
      y: 0.5
    });
  }
  static #_ = this.ɵfac = function ExploreZoomControlComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || ExploreZoomControlComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdirectiveInject"](_explore_state_service__WEBPACK_IMPORTED_MODULE_0__.ExploreStateService));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdefineComponent"]({
    type: ExploreZoomControlComponent,
    selectors: [["explore-zoom-controls"]],
    decls: 9,
    vars: 0,
    consts: () => {
      let i18n_0;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_1470758907984185227$$LIBS_EXPLORE_SRC_LIB_EXPLORE_ZOOM_CONTROL_COMPONENT_TS_0 = goog.getMsg("Zoom In");
        i18n_0 = MSG_EXTERNAL_1470758907984185227$$LIBS_EXPLORE_SRC_LIB_EXPLORE_ZOOM_CONTROL_COMPONENT_TS_0;
      } else {
        i18n_0 = $localize`:␟34fb6028a6630cf3a7308084b31e86e89d057965␟1470758907984185227:Zoom In`;
      }
      let i18n_1;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_1356460275822781324$$LIBS_EXPLORE_SRC_LIB_EXPLORE_ZOOM_CONTROL_COMPONENT_TS_1 = goog.getMsg("Zoom Out");
        i18n_1 = MSG_EXTERNAL_1356460275822781324$$LIBS_EXPLORE_SRC_LIB_EXPLORE_ZOOM_CONTROL_COMPONENT_TS_1;
      } else {
        i18n_1 = $localize`:␟677ce9c57b5558cb10f0b39327d5a965bfb21dc5␟1356460275822781324:Zoom Out`;
      }
      let i18n_2;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_5016012668378976433$$LIBS_EXPLORE_SRC_LIB_EXPLORE_ZOOM_CONTROL_COMPONENT_TS_2 = goog.getMsg("Reset Zoom & Center");
        i18n_2 = MSG_EXTERNAL_5016012668378976433$$LIBS_EXPLORE_SRC_LIB_EXPLORE_ZOOM_CONTROL_COMPONENT_TS_2;
      } else {
        i18n_2 = $localize`:␟77981432124895c410e5b9157b3deb948831ffc6␟5016012668378976433:Reset Zoom & Center`;
      }
      return [["z-in", "", "icon", "", "matRipple", "", "matTooltip", i18n_0, 1, "bg-base-100", 3, "click"], ["z-out", "", "icon", "", "matRipple", "", "matTooltip", i18n_1, 1, "bg-base-100", 3, "click"], ["reset", "", "icon", "", "matRipple", "", "matTooltip", i18n_2, 1, "bg-base-100", 3, "click"]];
    },
    template: function ExploreZoomControlComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](0, "button", 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵlistener"]("click", function ExploreZoomControlComponent_Template_button_click_0_listener() {
          return ctx.zoomIn();
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](1, "app-icon");
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](2, "add");
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](3, "button", 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵlistener"]("click", function ExploreZoomControlComponent_Template_button_click_3_listener() {
          return ctx.zoomOut();
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](4, "app-icon");
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](5, "remove");
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](6, "button", 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵlistener"]("click", function ExploreZoomControlComponent_Template_button_click_6_listener() {
          return ctx.reset();
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](7, "app-icon");
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](8, "autorenew");
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]()();
      }
    },
    dependencies: [_components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_1__.IconComponent, _angular_material_core__WEBPACK_IMPORTED_MODULE_3__.MatRipple, _angular_material_tooltip__WEBPACK_IMPORTED_MODULE_4__.MatTooltip],
    styles: ["[_nghost-%COMP%] {\n                display: flex;\n                flex-direction: column;\n            }\n\n            button[_ngcontent-%COMP%] {\n                border: 1px solid #9998;\n                border-radius: 0;\n            }\n\n            button[_ngcontent-%COMP%]:first-child {\n                border-radius: 0.25rem 0.25rem 0 0;\n                border-bottom: none;\n            }\n\n            button[_ngcontent-%COMP%]:last-child {\n                border-radius: 0 0 0.25rem 0.25rem;\n                border-top: none;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImV4cGxvcmUtem9vbS1jb250cm9sLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1lBQ1k7Z0JBQ0ksYUFBYTtnQkFDYixzQkFBc0I7WUFDMUI7O1lBRUE7Z0JBQ0ksdUJBQXVCO2dCQUN2QixnQkFBZ0I7WUFDcEI7O1lBRUE7Z0JBQ0ksa0NBQWtDO2dCQUNsQyxtQkFBbUI7WUFDdkI7O1lBRUE7Z0JBQ0ksa0NBQWtDO2dCQUNsQyxnQkFBZ0I7WUFDcEIiLCJmaWxlIjoiZXhwbG9yZS16b29tLWNvbnRyb2wuY29tcG9uZW50LnRzIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICA6aG9zdCB7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBidXR0b24ge1xuICAgICAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICM5OTk4O1xuICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDA7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGJ1dHRvbjpmaXJzdC1jaGlsZCB7XG4gICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMC4yNXJlbSAwLjI1cmVtIDAgMDtcbiAgICAgICAgICAgICAgICBib3JkZXItYm90dG9tOiBub25lO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBidXR0b246bGFzdC1jaGlsZCB7XG4gICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMCAwIDAuMjVyZW0gMC4yNXJlbTtcbiAgICAgICAgICAgICAgICBib3JkZXItdG9wOiBub25lO1xuICAgICAgICAgICAgfVxuICAgICAgICAiXX0= */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvZXhwbG9yZS9zcmMvbGliL2V4cGxvcmUtem9vbS1jb250cm9sLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1lBQ1k7Z0JBQ0ksYUFBYTtnQkFDYixzQkFBc0I7WUFDMUI7O1lBRUE7Z0JBQ0ksdUJBQXVCO2dCQUN2QixnQkFBZ0I7WUFDcEI7O1lBRUE7Z0JBQ0ksa0NBQWtDO2dCQUNsQyxtQkFBbUI7WUFDdkI7O1lBRUE7Z0JBQ0ksa0NBQWtDO2dCQUNsQyxnQkFBZ0I7WUFDcEI7O0FBRVosd25DQUF3bkMiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIDpob3N0IHtcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGJ1dHRvbiB7XG4gICAgICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgIzk5OTg7XG4gICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYnV0dG9uOmZpcnN0LWNoaWxkIHtcbiAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiAwLjI1cmVtIDAuMjVyZW0gMCAwO1xuICAgICAgICAgICAgICAgIGJvcmRlci1ib3R0b206IG5vbmU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGJ1dHRvbjpsYXN0LWNoaWxkIHtcbiAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiAwIDAgMC4yNXJlbSAwLjI1cmVtO1xuICAgICAgICAgICAgICAgIGJvcmRlci10b3A6IG5vbmU7XG4gICAgICAgICAgICB9XG4gICAgICAgICJdLCJzb3VyY2VSb290IjoiIn0= */"]
  });
}

/***/ }),

/***/ 42434:
/*!************************************************!*\
  !*** ./libs/explore/src/lib/explore.module.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SharedExploreModule: () => (/* binding */ SharedExploreModule)
/* harmony export */ });
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! @angular/forms */ 34456);
/* harmony import */ var _placeos_components__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/components */ 51588);
/* harmony import */ var _angular_material_slide_toggle__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! @angular/material/slide-toggle */ 8827);
/* harmony import */ var _angular_cdk_overlay__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! @angular/cdk/overlay */ 81570);
/* harmony import */ var _angular_cdk_portal__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! @angular/cdk/portal */ 9168);
/* harmony import */ var libs_form_fields_src_lib_form_fields_module__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! libs/form-fields/src/lib/form-fields.module */ 77066);
/* harmony import */ var libs_bookings_src_lib_bookings_module__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! libs/bookings/src/lib/bookings.module */ 38742);
/* harmony import */ var _explore_map_control_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./explore-map-control.component */ 60468);
/* harmony import */ var _explore_map_view_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./explore-map-view.component */ 83134);
/* harmony import */ var _explore_search_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./explore-search.component */ 64114);
/* harmony import */ var _explore_space_info_component__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./explore-space-info.component */ 48303);
/* harmony import */ var _explore_zoom_control_component__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./explore-zoom-control.component */ 69801);
/* harmony import */ var _explore_device_info_component__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./explore-device-info.component */ 51207);
/* harmony import */ var _explore_booking_modal_component__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./explore-booking-modal.component */ 76301);
/* harmony import */ var _explore_desk_info_component__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./explore-desk-info.component */ 82882);
/* harmony import */ var _set_datetime_modal_component__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./set-datetime-modal.component */ 27146);
/* harmony import */ var _explore_book_qr_component__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./explore-book-qr.component */ 72213);
/* harmony import */ var _explore_sensor_info_component__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./explore-sensor-info.component */ 79303);
/* harmony import */ var _explore_locker_bank_info_component__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./explore-locker-bank-info.component */ 84810);
/* harmony import */ var _explore_locker_bank_modal_component__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./explore-locker-bank-modal.component */ 50795);
/* harmony import */ var _explore_parking_info_component__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./explore-parking-info.component */ 17889);
/* harmony import */ var _explore_icon_component__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./explore-icon.component */ 83207);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _components_src_lib_custom_tooltip_component__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../../../components/src/lib/custom-tooltip.component */ 22238);
/* harmony import */ var _components_src_lib_authenticated_image_directive__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../../../components/src/lib/authenticated-image.directive */ 93208);
/* harmony import */ var _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../../../components/src/lib/icon.component */ 69434);
/* harmony import */ var _angular_material_form_field__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! @angular/material/form-field */ 24950);
/* harmony import */ var _angular_material_core__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! @angular/material/core */ 74646);
/* harmony import */ var _angular_material_dialog__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! @angular/material/dialog */ 12587);
/* harmony import */ var _angular_material_input__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! @angular/material/input */ 95541);
/* harmony import */ var _angular_material_progress_spinner__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! @angular/material/progress-spinner */ 41134);
/* harmony import */ var _form_fields_src_lib_duration_field_component__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../../../form-fields/src/lib/duration-field.component */ 83476);
/* harmony import */ var _form_fields_src_lib_user_search_field_component__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../../../form-fields/src/lib/user-search-field.component */ 18000);





































const COMPONENTS = [_explore_map_control_component__WEBPACK_IMPORTED_MODULE_3__.ExploreMapControlComponent, _explore_map_view_component__WEBPACK_IMPORTED_MODULE_4__.ExploreMapViewComponent, _explore_search_component__WEBPACK_IMPORTED_MODULE_5__.ExploreSearchComponent, _explore_space_info_component__WEBPACK_IMPORTED_MODULE_6__.ExploreSpaceInfoComponent, _explore_device_info_component__WEBPACK_IMPORTED_MODULE_8__.ExploreDeviceInfoComponent, _explore_desk_info_component__WEBPACK_IMPORTED_MODULE_10__.ExploreDeskInfoComponent, _explore_zoom_control_component__WEBPACK_IMPORTED_MODULE_7__.ExploreZoomControlComponent, _explore_booking_modal_component__WEBPACK_IMPORTED_MODULE_9__.ExploreBookingModalComponent, _set_datetime_modal_component__WEBPACK_IMPORTED_MODULE_11__.SetDatetimeModalComponent, _explore_book_qr_component__WEBPACK_IMPORTED_MODULE_12__.ExploreBookQrComponent, _explore_sensor_info_component__WEBPACK_IMPORTED_MODULE_13__.ExploreSensorInfoComponent, _explore_locker_bank_info_component__WEBPACK_IMPORTED_MODULE_14__.ExploreLockerBankInfoComponent, _explore_locker_bank_modal_component__WEBPACK_IMPORTED_MODULE_15__.ExploreLockerBankModalComponent, _explore_parking_info_component__WEBPACK_IMPORTED_MODULE_16__.ExploreParkingInfoComponent, _explore_icon_component__WEBPACK_IMPORTED_MODULE_17__.ExploreIconComponent];
class SharedExploreModule {
  static #_ = this.ɵfac = function SharedExploreModule_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || SharedExploreModule)();
  };
  static #_2 = this.ɵmod = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_23__["ɵɵdefineNgModule"]({
    type: SharedExploreModule
  });
  static #_3 = this.ɵinj = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_23__["ɵɵdefineInjector"]({
    imports: [_angular_common__WEBPACK_IMPORTED_MODULE_24__.CommonModule, _placeos_components__WEBPACK_IMPORTED_MODULE_0__.ComponentsModule, _angular_forms__WEBPACK_IMPORTED_MODULE_25__.FormsModule, _angular_forms__WEBPACK_IMPORTED_MODULE_25__.ReactiveFormsModule, _angular_material_slide_toggle__WEBPACK_IMPORTED_MODULE_26__.MatSlideToggleModule, _angular_cdk_overlay__WEBPACK_IMPORTED_MODULE_27__.OverlayModule, _angular_cdk_portal__WEBPACK_IMPORTED_MODULE_28__.PortalModule, libs_form_fields_src_lib_form_fields_module__WEBPACK_IMPORTED_MODULE_1__.FormFieldsModule, libs_bookings_src_lib_bookings_module__WEBPACK_IMPORTED_MODULE_2__.SharedBookingsModule]
  });
}
(function () {
  (typeof ngJitMode === "undefined" || ngJitMode) && _angular_core__WEBPACK_IMPORTED_MODULE_23__["ɵɵsetNgModuleScope"](SharedExploreModule, {
    declarations: [_explore_map_control_component__WEBPACK_IMPORTED_MODULE_3__.ExploreMapControlComponent, _explore_map_view_component__WEBPACK_IMPORTED_MODULE_4__.ExploreMapViewComponent, _explore_search_component__WEBPACK_IMPORTED_MODULE_5__.ExploreSearchComponent, _explore_space_info_component__WEBPACK_IMPORTED_MODULE_6__.ExploreSpaceInfoComponent, _explore_device_info_component__WEBPACK_IMPORTED_MODULE_8__.ExploreDeviceInfoComponent, _explore_desk_info_component__WEBPACK_IMPORTED_MODULE_10__.ExploreDeskInfoComponent, _explore_zoom_control_component__WEBPACK_IMPORTED_MODULE_7__.ExploreZoomControlComponent, _explore_booking_modal_component__WEBPACK_IMPORTED_MODULE_9__.ExploreBookingModalComponent, _set_datetime_modal_component__WEBPACK_IMPORTED_MODULE_11__.SetDatetimeModalComponent, _explore_book_qr_component__WEBPACK_IMPORTED_MODULE_12__.ExploreBookQrComponent, _explore_sensor_info_component__WEBPACK_IMPORTED_MODULE_13__.ExploreSensorInfoComponent, _explore_locker_bank_info_component__WEBPACK_IMPORTED_MODULE_14__.ExploreLockerBankInfoComponent, _explore_locker_bank_modal_component__WEBPACK_IMPORTED_MODULE_15__.ExploreLockerBankModalComponent, _explore_parking_info_component__WEBPACK_IMPORTED_MODULE_16__.ExploreParkingInfoComponent, _explore_icon_component__WEBPACK_IMPORTED_MODULE_17__.ExploreIconComponent],
    imports: [_angular_common__WEBPACK_IMPORTED_MODULE_24__.CommonModule, _placeos_components__WEBPACK_IMPORTED_MODULE_0__.ComponentsModule, _angular_forms__WEBPACK_IMPORTED_MODULE_25__.FormsModule, _angular_forms__WEBPACK_IMPORTED_MODULE_25__.ReactiveFormsModule, _angular_material_slide_toggle__WEBPACK_IMPORTED_MODULE_26__.MatSlideToggleModule, _angular_cdk_overlay__WEBPACK_IMPORTED_MODULE_27__.OverlayModule, _angular_cdk_portal__WEBPACK_IMPORTED_MODULE_28__.PortalModule, libs_form_fields_src_lib_form_fields_module__WEBPACK_IMPORTED_MODULE_1__.FormFieldsModule, libs_bookings_src_lib_bookings_module__WEBPACK_IMPORTED_MODULE_2__.SharedBookingsModule],
    exports: [_explore_map_control_component__WEBPACK_IMPORTED_MODULE_3__.ExploreMapControlComponent, _explore_map_view_component__WEBPACK_IMPORTED_MODULE_4__.ExploreMapViewComponent, _explore_search_component__WEBPACK_IMPORTED_MODULE_5__.ExploreSearchComponent, _explore_space_info_component__WEBPACK_IMPORTED_MODULE_6__.ExploreSpaceInfoComponent, _explore_device_info_component__WEBPACK_IMPORTED_MODULE_8__.ExploreDeviceInfoComponent, _explore_desk_info_component__WEBPACK_IMPORTED_MODULE_10__.ExploreDeskInfoComponent, _explore_zoom_control_component__WEBPACK_IMPORTED_MODULE_7__.ExploreZoomControlComponent, _explore_booking_modal_component__WEBPACK_IMPORTED_MODULE_9__.ExploreBookingModalComponent, _set_datetime_modal_component__WEBPACK_IMPORTED_MODULE_11__.SetDatetimeModalComponent, _explore_book_qr_component__WEBPACK_IMPORTED_MODULE_12__.ExploreBookQrComponent, _explore_sensor_info_component__WEBPACK_IMPORTED_MODULE_13__.ExploreSensorInfoComponent, _explore_locker_bank_info_component__WEBPACK_IMPORTED_MODULE_14__.ExploreLockerBankInfoComponent, _explore_locker_bank_modal_component__WEBPACK_IMPORTED_MODULE_15__.ExploreLockerBankModalComponent, _explore_parking_info_component__WEBPACK_IMPORTED_MODULE_16__.ExploreParkingInfoComponent, _explore_icon_component__WEBPACK_IMPORTED_MODULE_17__.ExploreIconComponent]
  });
})();
_angular_core__WEBPACK_IMPORTED_MODULE_23__["ɵɵsetComponentScope"](_explore_space_info_component__WEBPACK_IMPORTED_MODULE_6__.ExploreSpaceInfoComponent, [_angular_common__WEBPACK_IMPORTED_MODULE_24__.NgForOf, _angular_common__WEBPACK_IMPORTED_MODULE_24__.NgIf, _components_src_lib_custom_tooltip_component__WEBPACK_IMPORTED_MODULE_18__.CustomTooltipComponent, _components_src_lib_authenticated_image_directive__WEBPACK_IMPORTED_MODULE_19__.AuthenticatedImageDirective], []);
_angular_core__WEBPACK_IMPORTED_MODULE_23__["ɵɵsetComponentScope"](_explore_booking_modal_component__WEBPACK_IMPORTED_MODULE_9__.ExploreBookingModalComponent, [_angular_common__WEBPACK_IMPORTED_MODULE_24__.NgIf, _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_20__.IconComponent, _angular_material_form_field__WEBPACK_IMPORTED_MODULE_29__.MatFormField, _angular_material_form_field__WEBPACK_IMPORTED_MODULE_29__.MatError, _angular_material_core__WEBPACK_IMPORTED_MODULE_30__.MatRipple, _angular_material_dialog__WEBPACK_IMPORTED_MODULE_31__.MatDialogClose, _angular_material_input__WEBPACK_IMPORTED_MODULE_32__.MatInput, _angular_material_progress_spinner__WEBPACK_IMPORTED_MODULE_33__.MatProgressSpinner, _angular_forms__WEBPACK_IMPORTED_MODULE_25__.DefaultValueAccessor, _angular_forms__WEBPACK_IMPORTED_MODULE_25__.NgControlStatus, _angular_forms__WEBPACK_IMPORTED_MODULE_25__.NgControlStatusGroup, _angular_forms__WEBPACK_IMPORTED_MODULE_25__.FormGroupDirective, _angular_forms__WEBPACK_IMPORTED_MODULE_25__.FormControlName, _form_fields_src_lib_duration_field_component__WEBPACK_IMPORTED_MODULE_21__.DurationFieldComponent, _form_fields_src_lib_user_search_field_component__WEBPACK_IMPORTED_MODULE_22__.UserSearchFieldComponent], [_angular_common__WEBPACK_IMPORTED_MODULE_24__.AsyncPipe, _angular_common__WEBPACK_IMPORTED_MODULE_24__.DatePipe]);

/***/ }),

/***/ 11874:
/*!*****************************************!*\
  !*** ./libs/explore/src/lib/explore.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DEFAULT_COLOURS: () => (/* reexport safe */ _explore_spaces_service__WEBPACK_IMPORTED_MODULE_6__.DEFAULT_COLOURS),
/* harmony export */   ExploreDesksService: () => (/* reexport safe */ _explore_desks_service__WEBPACK_IMPORTED_MODULE_0__.ExploreDesksService),
/* harmony export */   ExploreMapControlComponent: () => (/* reexport safe */ _explore_map_control_component__WEBPACK_IMPORTED_MODULE_1__.ExploreMapControlComponent),
/* harmony export */   ExploreMapViewComponent: () => (/* reexport safe */ _explore_map_view_component__WEBPACK_IMPORTED_MODULE_2__.ExploreMapViewComponent),
/* harmony export */   ExploreParkingService: () => (/* reexport safe */ _explore_parking_service__WEBPACK_IMPORTED_MODULE_10__.ExploreParkingService),
/* harmony export */   ExploreSearchComponent: () => (/* reexport safe */ _explore_search_component__WEBPACK_IMPORTED_MODULE_3__.ExploreSearchComponent),
/* harmony export */   ExploreSearchService: () => (/* reexport safe */ _explore_search_service__WEBPACK_IMPORTED_MODULE_4__.ExploreSearchService),
/* harmony export */   ExploreSpaceInfoComponent: () => (/* reexport safe */ _explore_space_info_component__WEBPACK_IMPORTED_MODULE_5__.ExploreSpaceInfoComponent),
/* harmony export */   ExploreSpacesService: () => (/* reexport safe */ _explore_spaces_service__WEBPACK_IMPORTED_MODULE_6__.ExploreSpacesService),
/* harmony export */   ExploreStateService: () => (/* reexport safe */ _explore_state_service__WEBPACK_IMPORTED_MODULE_7__.ExploreStateService),
/* harmony export */   ExploreZonesService: () => (/* reexport safe */ _explore_zones_service__WEBPACK_IMPORTED_MODULE_8__.ExploreZonesService),
/* harmony export */   ExploreZoomControlComponent: () => (/* reexport safe */ _explore_zoom_control_component__WEBPACK_IMPORTED_MODULE_9__.ExploreZoomControlComponent),
/* harmony export */   SharedExploreModule: () => (/* reexport safe */ _explore_module__WEBPACK_IMPORTED_MODULE_11__.SharedExploreModule)
/* harmony export */ });
/* harmony import */ var _explore_desks_service__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./explore-desks.service */ 61104);
/* harmony import */ var _explore_map_control_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./explore-map-control.component */ 60468);
/* harmony import */ var _explore_map_view_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./explore-map-view.component */ 83134);
/* harmony import */ var _explore_search_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./explore-search.component */ 64114);
/* harmony import */ var _explore_search_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./explore-search.service */ 35446);
/* harmony import */ var _explore_space_info_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./explore-space-info.component */ 48303);
/* harmony import */ var _explore_spaces_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./explore-spaces.service */ 65897);
/* harmony import */ var _explore_state_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./explore-state.service */ 12455);
/* harmony import */ var _explore_zones_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./explore-zones.service */ 61369);
/* harmony import */ var _explore_zoom_control_component__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./explore-zoom-control.component */ 69801);
/* harmony import */ var _explore_parking_service__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./explore-parking.service */ 34498);
/* harmony import */ var _explore_module__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./explore.module */ 42434);













/***/ }),

/***/ 27146:
/*!**************************************************************!*\
  !*** ./libs/explore/src/lib/set-datetime-modal.component.ts ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SetDatetimeModalComponent: () => (/* binding */ SetDatetimeModalComponent)
/* harmony export */ });
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @angular/forms */ 34456);
/* harmony import */ var _angular_material_dialog__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @angular/material/dialog */ 12587);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../components/src/lib/icon.component */ 69434);
/* harmony import */ var _angular_material_core__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @angular/material/core */ 74646);
/* harmony import */ var _form_fields_src_lib_date_field_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../form-fields/src/lib/date-field.component */ 19608);
/* harmony import */ var _form_fields_src_lib_duration_field_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../form-fields/src/lib/duration-field.component */ 83476);
/* harmony import */ var _form_fields_src_lib_time_field_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../form-fields/src/lib/time-field.component */ 81413);
/* harmony import */ var _form_fields_src_lib_user_search_field_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../form-fields/src/lib/user-search-field.component */ 18000);














const _c0 = () => ({
  standalone: true
});
function SetDatetimeModalComponent_main_6_div_1_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](0, "div", 7)(1, "div", 13)(2, "label");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](3, "Resource:");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](4, "div", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]()()();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtextInterpolate1"](" ", ctx_r1.resource.name || ctx_r1.resource.map_id || "Unknown Resource", " ");
  }
}
function SetDatetimeModalComponent_main_6_div_2_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](0, "div", 7)(1, "div", 8)(2, "label");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](3, "Host");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelement"](4, "a-user-search-field", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]()();
  }
}
function SetDatetimeModalComponent_main_6_Template(rf, ctx) {
  if (rf & 1) {
    const _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](0, "main", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtemplate"](1, SetDatetimeModalComponent_main_6_div_1_Template, 6, 1, "div", 6)(2, SetDatetimeModalComponent_main_6_div_2_Template, 5, 0, "div", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](3, "div", 7)(4, "div", 8)(5, "label");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](6, "Date");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](7, "a-date-field", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](8, " Date and time must be in the future ");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]()()();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](9, "div", 7)(10, "div", 10)(11, "label");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](12, "Start Time");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](13, "a-time-field", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵlistener"]("ngModelChange", function SetDatetimeModalComponent_main_6_Template_a_time_field_ngModelChange_13_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵrestoreView"](_r1);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵresetView"](ctx_r1.form.patchValue({
        date: $event
      }));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](14, "div", 10)(15, "label");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](16, "End Time");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelement"](17, "a-duration-field", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]()()();
  }
  if (rf & 2) {
    let tmp_8_0;
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("formGroup", ctx_r1.form);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("ngIf", ctx_r1.resource);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("ngIf", ctx_r1.host);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("to", ctx_r1.book_until);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](6);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("ngModel", ctx_r1.form.value.date)("ngModelOptions", _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpureFunction0"](12, _c0))("use_24hr", ctx_r1.use_24hr_time);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("time", (tmp_8_0 = ctx_r1.form.get("date")) == null ? null : tmp_8_0.value)("max", 10 * 60)("min", 60)("step", 60)("use_24hr", ctx_r1.use_24hr_time);
  }
}
class SetDatetimeModalComponent {
  get use_24hr_time() {
    return this._settings.get('app.use_24_hour_time');
  }
  constructor(_data, _settings) {
    this._data = _data;
    this._settings = _settings;
    this.host = this._data.host;
    this.form = new _angular_forms__WEBPACK_IMPORTED_MODULE_7__.FormGroup({
      user: new _angular_forms__WEBPACK_IMPORTED_MODULE_7__.FormControl(this._data.user),
      date: new _angular_forms__WEBPACK_IMPORTED_MODULE_7__.FormControl(this._data.date),
      duration: new _angular_forms__WEBPACK_IMPORTED_MODULE_7__.FormControl(this._data.duration)
    });
    this.book_until = this._data.until;
    this.resource = this._data.resource;
  }
  static #_ = this.ɵfac = function SetDatetimeModalComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || SetDatetimeModalComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵdirectiveInject"](_angular_material_dialog__WEBPACK_IMPORTED_MODULE_8__.MAT_DIALOG_DATA), _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵdirectiveInject"](_placeos_common__WEBPACK_IMPORTED_MODULE_0__.SettingsService));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵdefineComponent"]({
    type: SetDatetimeModalComponent,
    selectors: [["set-datetime-modal"]],
    decls: 10,
    vars: 2,
    consts: [["classs", "flex items-center justify-between"], ["icon", "", "mat-dialog-close", ""], ["class", "w-[24rem] max-w-[85vw] pt-4", 3, "formGroup", 4, "ngIf"], [1, "w-full", "p-2", "border-t", "border-base-200", "flex", "items-center", "justify-center"], ["btn", "", "matRipple", "", 1, "w-32", 3, "mat-dialog-close"], [1, "w-[24rem]", "max-w-[85vw]", "pt-4", 3, "formGroup"], ["class", "flex flex-col sm:flex-row space-x-0 sm:space-x-2 w-[640px] max-w-[calc(100%-2rem)] mx-auto", 4, "ngIf"], [1, "flex", "flex-col", "sm:flex-row", "space-x-0", "sm:space-x-2", "w-[640px]", "max-w-[calc(100%-2rem)]", "mx-auto"], [1, "flex", "flex-col", "flex-1", "w-full", "sm:w-1/4"], ["formControlName", "date", 3, "to"], [1, "flex", "flex-col", "flex-1", "w-full", "sm:w-1/3"], [3, "ngModelChange", "ngModel", "ngModelOptions", "use_24hr"], ["formControlName", "duration", 3, "time", "max", "min", "step", "use_24hr"], [1, "flex", "flex-col", "flex-1", "w-full", "sm:w-1/4", "mb-2"], [1, "px-4", "py-3", "border", "border-base-200", "rounded", "w-full", "mb-4"], ["formControlName", "user", 1, "mb-4"]],
    template: function SetDatetimeModalComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](0, "header", 0)(1, "h2");
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](2, "Set date and time");
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](3, "button", 1)(4, "app-icon");
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](5, "close");
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]()()();
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtemplate"](6, SetDatetimeModalComponent_main_6_Template, 18, 13, "main", 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](7, "footer", 3)(8, "button", 4);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](9, " Continue ");
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]()();
      }
      if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](6);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("ngIf", ctx.form);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("mat-dialog-close", ctx.form.value);
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_9__.NgIf, _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_1__.IconComponent, _angular_material_core__WEBPACK_IMPORTED_MODULE_10__.MatRipple, _angular_material_dialog__WEBPACK_IMPORTED_MODULE_8__.MatDialogClose, _angular_forms__WEBPACK_IMPORTED_MODULE_7__.NgControlStatus, _angular_forms__WEBPACK_IMPORTED_MODULE_7__.NgControlStatusGroup, _angular_forms__WEBPACK_IMPORTED_MODULE_7__.NgModel, _angular_forms__WEBPACK_IMPORTED_MODULE_7__.FormGroupDirective, _angular_forms__WEBPACK_IMPORTED_MODULE_7__.FormControlName, _form_fields_src_lib_date_field_component__WEBPACK_IMPORTED_MODULE_2__.DateFieldComponent, _form_fields_src_lib_duration_field_component__WEBPACK_IMPORTED_MODULE_3__.DurationFieldComponent, _form_fields_src_lib_time_field_component__WEBPACK_IMPORTED_MODULE_4__.TimeFieldComponent, _form_fields_src_lib_user_search_field_component__WEBPACK_IMPORTED_MODULE_5__.UserSearchFieldComponent]
  });
}

/***/ }),

/***/ 63046:
/*!***************************************!*\
  !*** ./libs/form-fields/src/index.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ActionFieldComponent: () => (/* reexport safe */ _lib_action_field_component__WEBPACK_IMPORTED_MODULE_1__.ActionFieldComponent),
/* harmony export */   CounterComponent: () => (/* reexport safe */ _lib_counter_component__WEBPACK_IMPORTED_MODULE_2__.CounterComponent),
/* harmony export */   DateFieldComponent: () => (/* reexport safe */ _lib_date_field_component__WEBPACK_IMPORTED_MODULE_3__.DateFieldComponent),
/* harmony export */   DurationFieldComponent: () => (/* reexport safe */ _lib_duration_field_component__WEBPACK_IMPORTED_MODULE_4__.DurationFieldComponent),
/* harmony export */   FormFieldsModule: () => (/* reexport safe */ _lib_form_fields_module__WEBPACK_IMPORTED_MODULE_0__.FormFieldsModule),
/* harmony export */   ImageListFieldComponent: () => (/* reexport safe */ _lib_image_list_field_component__WEBPACK_IMPORTED_MODULE_8__.ImageListFieldComponent),
/* harmony export */   TimeFieldComponent: () => (/* reexport safe */ _lib_time_field_component__WEBPACK_IMPORTED_MODULE_5__.TimeFieldComponent),
/* harmony export */   UserListFieldComponent: () => (/* reexport safe */ _lib_user_list_field_component__WEBPACK_IMPORTED_MODULE_6__.UserListFieldComponent),
/* harmony export */   UserSearchFieldComponent: () => (/* reexport safe */ _lib_user_search_field_component__WEBPACK_IMPORTED_MODULE_7__.UserSearchFieldComponent)
/* harmony export */ });
/* harmony import */ var _lib_form_fields_module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./lib/form-fields.module */ 77066);
/* harmony import */ var _lib_action_field_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./lib/action-field.component */ 79842);
/* harmony import */ var _lib_counter_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./lib/counter.component */ 55507);
/* harmony import */ var _lib_date_field_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./lib/date-field.component */ 19608);
/* harmony import */ var _lib_duration_field_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./lib/duration-field.component */ 83476);
/* harmony import */ var _lib_time_field_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./lib/time-field.component */ 81413);
/* harmony import */ var _lib_user_list_field_component__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./lib/user-list-field.component */ 840);
/* harmony import */ var _lib_user_search_field_component__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./lib/user-search-field.component */ 18000);
/* harmony import */ var _lib_image_list_field_component__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./lib/image-list-field.component */ 56864);










/***/ }),

/***/ 79842:
/*!************************************************************!*\
  !*** ./libs/form-fields/src/lib/action-field.component.ts ***!
  \************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ActionFieldComponent: () => (/* binding */ ActionFieldComponent)
/* harmony export */ });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../components/src/lib/icon.component */ 69434);



const _c0 = ["*"];
class ActionFieldComponent {
  constructor() {
    /** Emitter for user interaction events */
    this.on_action = new _angular_core__WEBPACK_IMPORTED_MODULE_1__.EventEmitter();
    /** Whether to show tooltip */
    this.show_tooltip = false;
  }
  /**
   * Emit that the user has performed an action on the field
   */
  performAction() {
    this.show_tooltip = !this.show_tooltip;
    this.on_action.emit();
  }
  static #_ = this.ɵfac = function ActionFieldComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || ActionFieldComponent)();
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdefineComponent"]({
    type: ActionFieldComponent,
    selectors: [["an-action-field"]],
    inputs: {
      name: "name",
      disabled: "disabled"
    },
    outputs: {
      on_action: "onAction"
    },
    ngContentSelectors: _c0,
    decls: 5,
    vars: 3,
    consts: [["type", "button", "role", "button", "form-field", "", "tabindex", "0", 1, "flex", "items-center", "rounded", "p-2", "border", "border-base-200", "hover:border-base-200", "w-full", 3, "keydown.enter"], ["placeholder", "", 1, "flex-1", "w-0", "truncate", 3, "click"], [1, "text-xl", 3, "click"]],
    template: function ActionFieldComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵprojectionDef"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "button", 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("keydown.enter", function ActionFieldComponent_Template_button_keydown_enter_0_listener() {
          return ctx.performAction();
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "div", 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function ActionFieldComponent_Template_div_click_1_listener() {
          return ctx.performAction();
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵprojection"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](3, "app-icon", 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function ActionFieldComponent_Template_app_icon_click_3_listener() {
          return ctx.performAction();
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](4);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]()();
      }
      if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵattribute"]("disabled", ctx.disabled)("name", ctx.name);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](4);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate1"](" arrow_drop_", ctx.show_tooltip ? "up" : "down", " ");
      }
    },
    dependencies: [_components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_0__.IconComponent],
    styles: ["[_nghost-%COMP%]    > div[_ngcontent-%COMP%]:hover {\n                box-shadow: inset 0 0 0 1px #000;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFjdGlvbi1maWVsZC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLGdDQUFnQztZQUNwQyIsImZpbGUiOiJhY3Rpb24tZmllbGQuY29tcG9uZW50LnRzIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICA6aG9zdCA+IGRpdjpob3ZlciB7XG4gICAgICAgICAgICAgICAgYm94LXNoYWRvdzogaW5zZXQgMCAwIDAgMXB4ICMwMDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICJdfQ== */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvZm9ybS1maWVsZHMvc3JjL2xpYi9hY3Rpb24tZmllbGQuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxnQ0FBZ0M7WUFDcEM7O0FBRVosNFpBQTRaIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICA6aG9zdCA+IGRpdjpob3ZlciB7XG4gICAgICAgICAgICAgICAgYm94LXNoYWRvdzogaW5zZXQgMCAwIDAgMXB4ICMwMDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICJdLCJzb3VyY2VSb290IjoiIn0= */"]
  });
}

/***/ }),

/***/ 33683:
/*!******************************************************************!*\
  !*** ./libs/form-fields/src/lib/booking-rules-form.component.ts ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   BookingRulesFormComponent: () => (/* binding */ BookingRulesFormComponent)
/* harmony export */ });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @angular/forms */ 34456);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var _placeos_organisation__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @placeos/organisation */ 2510);
/* harmony import */ var _placeos_ts_client__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @placeos/ts-client */ 35713);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! date-fns */ 77177);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! date-fns */ 33240);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! date-fns */ 56441);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! rxjs */ 71536);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! rxjs/operators */ 8627);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! rxjs/operators */ 71963);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! rxjs/operators */ 29314);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! rxjs/operators */ 35443);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! rxjs/operators */ 7841);











const _c0 = () => ({
  standalone: true
});
function BookingRulesFormComponent_mat_option_12_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "mat-option", 26);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const zone_r1 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("value", zone_r1.id);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtextInterpolate1"](" ", zone_r1.display_name || zone_r1.name, " ");
  }
}
function BookingRulesFormComponent_mat_checkbox_31_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "mat-checkbox", 27);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](1, " Auto Approve Bookings ");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
  }
}
function BookingRulesFormComponent_div_57_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "div", 28)(1, "label", 29);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelement"](3, "item-list-field", 30);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtextInterpolate1"]("", ctx_r1.form.value.rules.hidden ? "Prevent" : "Allow", " Booking for Groups:");
  }
}
function BookingRulesFormComponent_div_58_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "div", 28)(1, "label", 31);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](2, "Locations:");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelement"](3, "item-list-field", 32);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
  }
}
function BookingRulesFormComponent_div_59_div_1_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "div", 2)(1, "label", 35);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelement"](3, "a-duration-field", 36);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtextInterpolate1"]("", ctx_r1.form.value.rules.hidden ? "Prevent" : "Allow", " booking with a minimum length of:");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("min", 15)("max", 1440)("step", 15);
  }
}
function BookingRulesFormComponent_div_59_div_2_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "div", 2)(1, "label", 37);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelement"](3, "a-duration-field", 38);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtextInterpolate1"]("", ctx_r1.form.value.rules.hidden ? "Prevent" : "Allow", " booking with a maximum length up to:");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("min", ctx_r1.form.value.conditions.min_length || 15)("max", 1440)("step", 15);
  }
}
function BookingRulesFormComponent_div_59_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "div", 33);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](1, BookingRulesFormComponent_div_59_div_1_Template, 4, 4, "div", 34)(2, BookingRulesFormComponent_div_59_div_2_Template, 4, 4, "div", 34);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", ctx_r1.available_conditions.includes("min_length"));
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", ctx_r1.available_conditions.includes("max_length"));
  }
}
function BookingRulesFormComponent_div_60_mat_option_5_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "mat-option", 26);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const time_r3 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("value", time_r3);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtextInterpolate1"](" ", time_r3, " ");
  }
}
function BookingRulesFormComponent_div_60_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "div", 28)(1, "label", 39);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](3, "mat-form-field", 40)(4, "mat-select", 41);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](5, BookingRulesFormComponent_div_60_mat_option_5_Template, 2, 2, "mat-option", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](6, "mat-error");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](7, "A valid time is required");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()()();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtextInterpolate1"]("", ctx_r1.form.value.rules.hidden ? "Prevent" : "Allow", " booking before:");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngForOf", ctx_r1.duration_blocks);
  }
}
function BookingRulesFormComponent_div_61_mat_option_5_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "mat-option", 26);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const time_r4 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("value", time_r4);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtextInterpolate1"](" ", time_r4, " ");
  }
}
function BookingRulesFormComponent_div_61_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "div", 28)(1, "label", 42);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](3, "mat-form-field", 40)(4, "mat-select", 43);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](5, BookingRulesFormComponent_div_61_mat_option_5_Template, 2, 2, "mat-option", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](6, "mat-error");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](7, "A valid time is required");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()()();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtextInterpolate1"]("", ctx_r1.form.value.rules.hidden ? "Prevent" : "Allow", " booking after:");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngForOf", ctx_r1.duration_blocks);
  }
}
function BookingRulesFormComponent_div_62_Template(rf, ctx) {
  if (rf & 1) {
    const _r5 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "div", 28)(1, "label", 42);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](3, "div", 1)(4, "a-date-field", 44);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵlistener"]("ngModelChange", function BookingRulesFormComponent_div_62_Template_a_date_field_ngModelChange_4_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵrestoreView"](_r5);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵresetView"](ctx_r1.setIsPeriod($event, ctx_r1.form.value.conditions.is_period[1]));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](5, "a-date-field", 45);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵlistener"]("ngModelChange", function BookingRulesFormComponent_div_62_Template_a_date_field_ngModelChange_5_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵrestoreView"](_r5);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵresetView"](ctx_r1.setIsPeriod(ctx_r1.form.value.conditions.is_period[0], $event));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()()();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtextInterpolate1"]("", ctx_r1.form.value.rules.hidden ? "Prevent" : "Allow", " booking between dates:");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngModel", ctx_r1.form.value.conditions.is_period[0])("ngModelOptions", _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpureFunction0"](6, _c0));
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("from", ctx_r1.form.value.conditions.is_period[0])("ngModel", ctx_r1.form.value.conditions.is_period[1])("ngModelOptions", _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpureFunction0"](7, _c0));
  }
}
function BookingRulesFormComponent_div_63_mat_option_6_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "mat-option", 26);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipe"](2, "date");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const time_r7 = ctx.$implicit;
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("value", time_r7.id);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipeBind2"](2, 2, time_r7.value, ctx_r1.time_format), " ");
  }
}
function BookingRulesFormComponent_div_63_ng_container_9_mat_option_1_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "mat-option", 26);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipe"](2, "date");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const time_r8 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]().$implicit;
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("value", time_r8.id);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipeBind2"](2, 2, time_r8.value, ctx_r1.time_format), " ");
  }
}
function BookingRulesFormComponent_div_63_ng_container_9_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](1, BookingRulesFormComponent_div_63_ng_container_9_mat_option_1_Template, 3, 5, "mat-option", 51);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementContainerEnd"]();
  }
  if (rf & 2) {
    const time_r8 = ctx.$implicit;
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", time_r8.id > (ctx_r1.form.value.conditions.is_between[0] || 6));
  }
}
function BookingRulesFormComponent_div_63_Template(rf, ctx) {
  if (rf & 1) {
    const _r6 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "div", 28)(1, "label", 46);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](3, "div", 47)(4, "mat-form-field", 40)(5, "mat-select", 48);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵlistener"]("ngModelChange", function BookingRulesFormComponent_div_63_Template_mat_select_ngModelChange_5_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵrestoreView"](_r6);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵresetView"](ctx_r1.setIsBetween($event, ctx_r1.form.value.conditions.is_between[1]));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](6, BookingRulesFormComponent_div_63_mat_option_6_Template, 3, 5, "mat-option", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](7, "mat-form-field", 40)(8, "mat-select", 49);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵlistener"]("ngModelChange", function BookingRulesFormComponent_div_63_Template_mat_select_ngModelChange_8_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵrestoreView"](_r6);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵresetView"](ctx_r1.setIsBetween(ctx_r1.form.value.conditions.is_between[0], $event));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](9, BookingRulesFormComponent_div_63_ng_container_9_Template, 2, 1, "ng-container", 50);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](10, "mat-error");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](11, "A valid end time is required");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()()()();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtextInterpolate1"]("", ctx_r1.form.value.rules.hidden ? "Prevent" : "Allow", " booking between:");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngModel", ctx_r1.form.value.conditions.is_between[0] || 6)("ngModelOptions", _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpureFunction0"](7, _c0));
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngForOf", ctx_r1.time_blocks);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngModel", ctx_r1.form.value.conditions.is_between[1] || 18)("ngModelOptions", _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpureFunction0"](8, _c0));
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngForOf", ctx_r1.time_blocks);
  }
}
function BookingRulesFormComponent_div_64_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "div", 28)(1, "label", 52);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelement"](3, "item-list-field", 53);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtextInterpolate1"](" ", ctx_r1.form.value.rules.hidden ? "Prevent" : "Allow", " booking these resources: ");
  }
}
class BookingRulesFormComponent {
  get time_format() {
    return this._settings.time_format;
  }
  constructor(_org, _settings) {
    this._org = _org;
    this._settings = _settings;
    this.save = false;
    this.rulesetChange = new _angular_core__WEBPACK_IMPORTED_MODULE_3__.EventEmitter();
    this.available_conditions = [];
    this.building_zones = this._org.active_building.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.filter)(_ => !!_), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.switchMap)(bld => (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_2__.queryZones)({
      parent_id: bld.id
    }).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.catchError)(() => (0,rxjs__WEBPACK_IMPORTED_MODULE_7__.of)({
      data: []
    })))), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.map)(res => res.data), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.shareReplay)(1));
    this.time_blocks = new Array(24 * 4).fill(0).map((_, idx) => {
      const hour = Math.floor(idx / 4);
      const minutes = idx % 4 * 15;
      return {
        id: hour + minutes / 60,
        value: (0,date_fns__WEBPACK_IMPORTED_MODULE_10__.set)(new Date(), {
          hours: hour,
          minutes
        })
      };
    });
    this.duration_blocks = ['1 Day', '2 Days', '3 Days', '4 Days', '5 Days', '1 Week', '2 Weeks', '3 Weeks', '4 Weeks', '1 Month', '2 Months', '3 Months', '4 Months', '5 Months', '6 Months'];
    this.form = new _angular_forms__WEBPACK_IMPORTED_MODULE_11__.FormGroup({
      id: new _angular_forms__WEBPACK_IMPORTED_MODULE_11__.FormControl(`ruleset-${(0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.randomString)(8)}`),
      zone: new _angular_forms__WEBPACK_IMPORTED_MODULE_11__.FormControl('*', _angular_forms__WEBPACK_IMPORTED_MODULE_11__.Validators.required),
      name: new _angular_forms__WEBPACK_IMPORTED_MODULE_11__.FormControl('', _angular_forms__WEBPACK_IMPORTED_MODULE_11__.Validators.required),
      rules: new _angular_forms__WEBPACK_IMPORTED_MODULE_11__.FormGroup({
        auto_approve: new _angular_forms__WEBPACK_IMPORTED_MODULE_11__.FormControl(false),
        hidden: new _angular_forms__WEBPACK_IMPORTED_MODULE_11__.FormControl(false)
      }),
      conditions: new _angular_forms__WEBPACK_IMPORTED_MODULE_11__.FormGroup({
        groups: new _angular_forms__WEBPACK_IMPORTED_MODULE_11__.FormControl([]),
        locations: new _angular_forms__WEBPACK_IMPORTED_MODULE_11__.FormControl([]),
        min_length: new _angular_forms__WEBPACK_IMPORTED_MODULE_11__.FormControl(0),
        max_length: new _angular_forms__WEBPACK_IMPORTED_MODULE_11__.FormControl(24 * 60),
        is_before: new _angular_forms__WEBPACK_IMPORTED_MODULE_11__.FormControl('1 Week'),
        is_after: new _angular_forms__WEBPACK_IMPORTED_MODULE_11__.FormControl('1 Day'),
        is_between: new _angular_forms__WEBPACK_IMPORTED_MODULE_11__.FormControl([6, 18]),
        is_period: new _angular_forms__WEBPACK_IMPORTED_MODULE_11__.FormControl([(0,date_fns__WEBPACK_IMPORTED_MODULE_12__.startOfDay)(Date.now()).valueOf(), (0,date_fns__WEBPACK_IMPORTED_MODULE_13__.endOfDay)(Date.now()).valueOf()]),
        resource_ids: new _angular_forms__WEBPACK_IMPORTED_MODULE_11__.FormControl([])
      })
    });
  }
  ngOnChanges(changes) {
    if (changes.ruleset && this.ruleset) {
      this.available_conditions = Object.keys(this.ruleset.conditions || {});
      this.form.patchValue(this.ruleset);
    }
    if (changes.save && this.save !== changes.save.previousValue && !changes.save.firstChange) {
      this.post();
    }
  }
  setIsBetween(start, end) {
    if (!start || !end) return;
    if (start > end) end = start + 0.25;
    this.form.patchValue({
      conditions: {
        is_between: [start, end]
      }
    });
  }
  setIsPeriod(start, end) {
    if (!start || !end) return;
    if (start > end) end = start;
    this.form.patchValue({
      conditions: {
        is_period: [(0,date_fns__WEBPACK_IMPORTED_MODULE_12__.startOfDay)(start).valueOf(), (0,date_fns__WEBPACK_IMPORTED_MODULE_13__.endOfDay)(end).valueOf()]
      }
    });
  }
  post() {
    if (!this.form.valid) {
      return (0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.notifyError)(`Some form fields are invalid. [${(0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.getInvalidFields)(this.form).join(', ')}]`);
    }
    const value = this.form.getRawValue();
    const condition_keys = Object.keys(value.conditions);
    for (const key of condition_keys) {
      if (!this.available_conditions.includes(key)) {
        delete value.conditions[key];
      }
    }
    this.rulesetChange.emit(value);
  }
  static #_ = this.ɵfac = function BookingRulesFormComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || BookingRulesFormComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵdirectiveInject"](_placeos_organisation__WEBPACK_IMPORTED_MODULE_1__.OrganisationService), _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵdirectiveInject"](_placeos_common__WEBPACK_IMPORTED_MODULE_0__.SettingsService));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵdefineComponent"]({
    type: BookingRulesFormComponent,
    selectors: [["booking-rules-form"]],
    inputs: {
      ruleset: "ruleset",
      save: "save"
    },
    outputs: {
      rulesetChange: "rulesetChange"
    },
    features: [_angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵNgOnChangesFeature"]],
    decls: 65,
    vars: 16,
    consts: [[1, "flex", "flex-col", "space-y-2", 3, "formGroup"], [1, "flex", "items-center", "space-x-2"], [1, "flex", "flex-col", "flex-1"], ["for", "zone"], ["appearance", "outline"], ["name", "zone", "formControlName", "zone"], ["value", "*"], [3, "value", 4, "ngFor", "ngForOf"], ["for", "name"], ["matInput", "", "name", "name", "formControlName", "name", "placeholder", "Ruleset Name"], ["formGroupName", "rules", 1, "flex", "items-center", "space-x-2"], ["name", "hidden", "formControlName", "hidden", "matTooltip", "Prevent user from booking the resource if the conditions match"], ["name", "auto_approve", "formControlName", "auto_approve", "matTooltip", "Whether resource should be auto-approved when booking if the conditions match", 4, "ngIf"], [1, "flex", "flex-col"], ["name", "zone", "multiple", "", "placeholder", "No Conditions. Match all resources in zone", 3, "ngModelChange", "ngModel", "ngModelOptions"], ["value", "groups"], ["value", "locations"], ["value", "min_length"], ["value", "max_length"], ["value", "is_before"], ["value", "is_after"], ["value", "is_between"], ["value", "is_period"], ["value", "resource_ids"], ["class", "flex flex-col", "formGroupName", "conditions", 4, "ngIf"], ["class", "flex items-center space-x-2", "formGroupName", "conditions", 4, "ngIf"], [3, "value"], ["name", "auto_approve", "formControlName", "auto_approve", "matTooltip", "Whether resource should be auto-approved when booking if the conditions match"], ["formGroupName", "conditions", 1, "flex", "flex-col"], ["for", "groups"], ["name", "groups", "formControlName", "groups", "placeholder", "User groups"], ["for", "locations"], ["name", "locations", "formControlName", "locations", "placeholder", "Locations"], ["formGroupName", "conditions", 1, "flex", "items-center", "space-x-2"], ["class", "flex flex-col flex-1", 4, "ngIf"], ["for", "min_length"], ["name", "min_length", "formControlName", "min_length", 3, "min", "max", "step"], ["for", "max_length"], ["name", "max_length", "formControlName", "max_length", 3, "min", "max", "step"], ["for", "is-before"], ["appearance", "outline", 1, "flex-1"], ["name", "is-before", "formControlName", "is_before"], ["for", "is-after"], ["name", "is-after", "formControlName", "is_after"], [1, "flex-1", 3, "ngModelChange", "ngModel", "ngModelOptions"], [1, "flex-1", 3, "ngModelChange", "from", "ngModel", "ngModelOptions"], ["for", "is_between"], [1, "flex", "items-center", "space-x-2", "w-full"], ["name", "start-time", 3, "ngModelChange", "ngModel", "ngModelOptions"], ["name", "end-time", 3, "ngModelChange", "ngModel", "ngModelOptions"], [4, "ngFor", "ngForOf"], [3, "value", 4, "ngIf"], ["for", "resource_ids"], ["name", "resource_ids", "formControlName", "resource_ids", "placeholder", "Resource IDs"]],
    template: function BookingRulesFormComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "div", 0)(1, "div", 1)(2, "div", 2)(3, "label", 3);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](4, "Zone");
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](5, "span");
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](6, "*");
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](7, ":");
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](8, "mat-form-field", 4)(9, "mat-select", 5)(10, "mat-option", 6);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](11, "Any Zone");
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](12, BookingRulesFormComponent_mat_option_12_Template, 2, 2, "mat-option", 7);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipe"](13, "async");
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](14, "mat-error");
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](15, "A valid zone is required");
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()()();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](16, "div", 2)(17, "label", 8);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](18, "Name");
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](19, "span");
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](20, "*");
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](21, ":");
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](22, "mat-form-field", 4);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelement"](23, "input", 9);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](24, "mat-error");
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](25, "A valid name is required");
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()()()();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](26, "div", 10)(27, "div", 2)(28, "mat-checkbox", 11);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](29, " Prevent Bookings ");
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](30, "div", 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](31, BookingRulesFormComponent_mat_checkbox_31_Template, 2, 0, "mat-checkbox", 12);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](32, "div", 13)(33, "label", 3);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](34, "Rule Conditions:");
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](35, "mat-form-field", 4)(36, "mat-select", 14);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtwoWayListener"]("ngModelChange", function BookingRulesFormComponent_Template_mat_select_ngModelChange_36_listener($event) {
          _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtwoWayBindingSet"](ctx.available_conditions, $event) || (ctx.available_conditions = $event);
          return $event;
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](37, "mat-option", 15);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](38, "Groups");
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](39, "mat-option", 16);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](40, "Locations");
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](41, "mat-option", 17);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](42, " Minimum Length ");
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](43, "mat-option", 18);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](44, " Maximum Length ");
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](45, "mat-option", 19);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](46, " Is Within Days ");
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](47, "mat-option", 20);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](48, " Is After Days ");
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](49, "mat-option", 21);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](50, " Is Between Hours ");
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](51, "mat-option", 22);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](52, " Between Dates ");
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](53, "mat-option", 23);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](54, "Resources");
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](55, "mat-error");
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](56, "A valid zone is required");
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()()();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](57, BookingRulesFormComponent_div_57_Template, 4, 1, "div", 24)(58, BookingRulesFormComponent_div_58_Template, 4, 0, "div", 24)(59, BookingRulesFormComponent_div_59_Template, 3, 2, "div", 25)(60, BookingRulesFormComponent_div_60_Template, 8, 2, "div", 24)(61, BookingRulesFormComponent_div_61_Template, 8, 2, "div", 24)(62, BookingRulesFormComponent_div_62_Template, 6, 8, "div", 24)(63, BookingRulesFormComponent_div_63_Template, 12, 9, "div", 24)(64, BookingRulesFormComponent_div_64_Template, 4, 1, "div", 24);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
      }
      if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("formGroup", ctx.form);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](12);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngForOf", _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipeBind1"](13, 13, ctx.building_zones));
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](19);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", !ctx.form.value.rules.hidden);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](5);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtwoWayProperty"]("ngModel", ctx.available_conditions);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngModelOptions", _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpureFunction0"](15, _c0));
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](21);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", ctx.available_conditions.includes("groups"));
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", ctx.available_conditions.includes("locations"));
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", ctx.available_conditions.includes("min_length") || ctx.available_conditions.includes("max_length"));
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", ctx.available_conditions.includes("is_before"));
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", ctx.available_conditions.includes("is_after"));
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", ctx.available_conditions.includes("is_period"));
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", ctx.available_conditions.includes("is_between"));
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", ctx.available_conditions.includes("resource_ids"));
      }
    },
    styles: ["[_nghost-%COMP%] {\n                display: block;\n                padding: 0.5rem;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJvb2tpbmctcnVsZXMtZm9ybS5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLGNBQWM7Z0JBQ2QsZUFBZTtZQUNuQiIsImZpbGUiOiJib29raW5nLXJ1bGVzLWZvcm0uY29tcG9uZW50LnRzIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICA6aG9zdCB7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICAgICAgICAgICAgcGFkZGluZzogMC41cmVtO1xuICAgICAgICAgICAgfVxuICAgICAgICAiXX0= */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvZm9ybS1maWVsZHMvc3JjL2xpYi9ib29raW5nLXJ1bGVzLWZvcm0uY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxjQUFjO2dCQUNkLGVBQWU7WUFDbkI7O0FBRVosNGJBQTRiIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICA6aG9zdCB7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICAgICAgICAgICAgcGFkZGluZzogMC41cmVtO1xuICAgICAgICAgICAgfVxuICAgICAgICAiXSwic291cmNlUm9vdCI6IiJ9 */"]
  });
}

/***/ }),

/***/ 55507:
/*!*******************************************************!*\
  !*** ./libs/form-fields/src/lib/counter.component.ts ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CounterComponent: () => (/* binding */ CounterComponent)
/* harmony export */ });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/forms */ 34456);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _angular_material_core__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/material/core */ 74646);
/* harmony import */ var _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../components/src/lib/icon.component */ 69434);
/* harmony import */ var _components_src_lib_limit_input_directive__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../components/src/lib/limit-input.directive */ 62897);








function CounterComponent_span_5_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](0, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtextInterpolate1"](" ", (ctx_r0.render_fn ? ctx_r0.render_fn(ctx_r0.value) : ctx_r0.value) || "0", " ");
  }
}
class CounterComponent {
  constructor() {
    /** Size of a single step */
    this.step = 1;
    /** Maximum amount for the counter */
    this.max = 999;
    /** Minimum amount for the counter */
    this.min = 0;
    this.focused = false;
  }
  /**
   * Add the `step` to the current value
   */
  add() {
    if (!this.value) {
      this.value = this.min || 0;
    }
    const step = this.ctrl_key ? 100 * this.step : this.shift_key ? 10 * this.step : this.step || 1;
    this.value += step;
    if (this.value > this.max) {
      this.value = this.max || 10;
    }
    this.setValue(this.value);
  }
  /** Remove the `step` from the current value */
  remove() {
    if (!this.value) {
      this.value = this.min || 0;
    }
    const step = this.ctrl_key ? 100 * this.step : this.shift_key ? 10 * this.step : this.step || 1;
    this.value -= step;
    if (this.value < this.min) {
      this.value = this.min || 0;
    }
    this.setValue(this.value);
  }
  /**
   * Update the form field value
   * @param new_value New value to set on the form field
   */
  setValue(new_value) {
    if (new_value < this.min) new_value = this.min;
    if (new_value > this.max) new_value = this.max;
    if (new_value / this.step % 1 !== 0) {
      new_value = Math.round(new_value * (1 / this.step)) / (1 / this.step);
    }
    this.value = new_value;
    /* istanbul ignore else */
    if (this._onChange) {
      this._onChange(new_value);
    }
  }
  /**
   * Update local value when form control value is changed
   * @param value The new value for the component
   */
  writeValue(value) {
    this.value = value;
  }
  /* istanbul ignore next */
  /**
   * Registers a callback function that is called when the control's value changes in the UI.
   * @param fn The callback function to register
   */
  registerOnChange(fn) {
    this._onChange = fn;
  }
  /* istanbul ignore next */
  /**
   * Registers a callback function is called by the forms API on initialization to update the form model on blur.
   * @param fn The callback function to register
   */
  registerOnTouched(fn) {
    this._onTouch = fn;
  }
  static #_ = this.ɵfac = function CounterComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || CounterComponent)();
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdefineComponent"]({
    type: CounterComponent,
    selectors: [["a-counter"]],
    inputs: {
      step: "step",
      max: "max",
      min: "min",
      render_fn: "render_fn"
    },
    features: [_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵProvidersFeature"]([{
      provide: _angular_forms__WEBPACK_IMPORTED_MODULE_3__.NG_VALUE_ACCESSOR,
      /* istanbul ignore next */
      useExisting: (0,_angular_core__WEBPACK_IMPORTED_MODULE_2__.forwardRef)(() => CounterComponent),
      multi: true
    }])],
    decls: 10,
    vars: 4,
    consts: [["counter", "", 1, "flex", "items-center", "text-base", "space-x-2", "p-2", 3, "keydown.shift", "keydown.control", "keydown.meta", "keyup.shift", "keyup.control", "keyup.meta"], ["decrease", "", "icon", "", "matRipple", "", "type", "button", 1, "border", "border-error", "text-error", "rounded", "h-10", "w-10", 3, "click", "disabled"], ["value", "", 1, "relative", "p-1", "flex", "items-center", "justify-center", "w-16", "h-10", "rounded", "border", "border-base-300"], [4, "ngIf"], ["type", "text", "limitInput", "", 1, "absolute", "inset-0", "opacity-0", "focus:opacity-100", "p-2", 3, "ngModelChange", "focus", "blur", "ngModel"], ["increase", "", "icon", "", "matRipple", "", "type", "button", 1, "border", "border-success", "text-success", "rounded", "h-10", "w-10", 3, "click", "disabled"]],
    template: function CounterComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](0, "div", 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵlistener"]("keydown.shift", function CounterComponent_Template_div_keydown_shift_0_listener() {
          return ctx.shift_key = true;
        }, false, _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵresolveWindow"])("keydown.control", function CounterComponent_Template_div_keydown_control_0_listener() {
          return ctx.ctrl_key = true;
        }, false, _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵresolveWindow"])("keydown.meta", function CounterComponent_Template_div_keydown_meta_0_listener() {
          return ctx.ctrl_key = true;
        }, false, _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵresolveWindow"])("keyup.shift", function CounterComponent_Template_div_keyup_shift_0_listener() {
          return ctx.shift_key = false;
        }, false, _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵresolveWindow"])("keyup.control", function CounterComponent_Template_div_keyup_control_0_listener() {
          return ctx.ctrl_key = false;
        }, false, _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵresolveWindow"])("keyup.meta", function CounterComponent_Template_div_keyup_meta_0_listener() {
          return ctx.ctrl_key = false;
        }, false, _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵresolveWindow"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](1, "button", 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵlistener"]("click", function CounterComponent_Template_button_click_1_listener() {
          return ctx.remove();
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](2, "app-icon");
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](3, "remove");
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](4, "div", 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](5, CounterComponent_span_5_Template, 2, 1, "span", 3);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](6, "input", 4);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtwoWayListener"]("ngModelChange", function CounterComponent_Template_input_ngModelChange_6_listener($event) {
          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtwoWayBindingSet"](ctx.value, $event) || (ctx.value = $event);
          return $event;
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵlistener"]("focus", function CounterComponent_Template_input_focus_6_listener() {
          return ctx.focused = true;
        })("blur", function CounterComponent_Template_input_blur_6_listener() {
          ctx.setValue(+ctx.value);
          return ctx.focused = false;
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](7, "button", 5);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵlistener"]("click", function CounterComponent_Template_button_click_7_listener() {
          return ctx.add();
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](8, "app-icon");
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](9, "add");
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]()()();
      }
      if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("disabled", !ctx.value || ctx.value === ctx.min);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](4);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngIf", !ctx.focused);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtwoWayProperty"]("ngModel", ctx.value);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("disabled", ctx.value === ctx.max);
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_4__.NgIf, _angular_forms__WEBPACK_IMPORTED_MODULE_3__.DefaultValueAccessor, _angular_forms__WEBPACK_IMPORTED_MODULE_3__.NgControlStatus, _angular_forms__WEBPACK_IMPORTED_MODULE_3__.NgModel, _angular_material_core__WEBPACK_IMPORTED_MODULE_5__.MatRipple, _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_0__.IconComponent, _components_src_lib_limit_input_directive__WEBPACK_IMPORTED_MODULE_1__.LimitInputDirective]
  });
}

/***/ }),

/***/ 89058:
/*!*************************************************************!*\
  !*** ./libs/form-fields/src/lib/date-calendar.component.ts ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DateCalendarComponent: () => (/* binding */ DateCalendarComponent)
/* harmony export */ });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @angular/forms */ 34456);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! date-fns */ 33240);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! date-fns */ 77177);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! date-fns */ 36337);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! date-fns */ 90610);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! date-fns */ 60452);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! date-fns */ 55882);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! date-fns */ 79681);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! date-fns */ 28797);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _angular_material_core__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @angular/material/core */ 74646);
/* harmony import */ var _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../components/src/lib/icon.component */ 69434);









function DateCalendarComponent_div_13_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](0, "div", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipe"](2, "date");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const day_r1 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipeBind2"](2, 1, day_r1 == null ? null : day_r1.id, "EE"), " ");
  }
}
function DateCalendarComponent_button_16_div_3_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelement"](0, "div", 14);
  }
}
function DateCalendarComponent_button_16_Template(rf, ctx) {
  if (rf & 1) {
    const _r2 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](0, "button", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵlistener"]("click", function DateCalendarComponent_button_16_Template_button_click_0_listener() {
      const day_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵrestoreView"](_r2).$implicit;
      const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵresetView"](ctx_r3.setValue(day_r3.id));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipe"](2, "date");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](3, DateCalendarComponent_button_16_div_3_Template, 1, 0, "div", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelement"](4, "div", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const day_r3 = ctx.$implicit;
    const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵclassProp"]("hover:bg-base-100", day_r3.id !== ctx_r3.active_date)("!text-base-300", !day_r3.is_month)("text-secondary-content", day_r3.id === ctx_r3.active_date)("text-base-content", day_r3.id !== ctx_r3.active_date)("bg-secondary", day_r3.id === ctx_r3.active_date)("font-normal", day_r3.id !== ctx_r3.active_date);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("disabled", day_r3.id < ctx_r3.from || day_r3.id > ctx_r3.to);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipeBind2"](2, 15, day_r3.id, "d"), " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngIf", ctx_r3.today === day_r3.id);
  }
}
class DateCalendarComponent extends _placeos_common__WEBPACK_IMPORTED_MODULE_0__.AsyncHandler {
  constructor(_settings) {
    super();
    this._settings = _settings;
    this.from = 0;
    this.to = Date.now() * 10;
    this.offset_weekday = 0;
    this.today = (0,date_fns__WEBPACK_IMPORTED_MODULE_3__.startOfDay)(Date.now()).valueOf();
    this.date = Date.now();
    this.active_date = (0,date_fns__WEBPACK_IMPORTED_MODULE_3__.startOfDay)(Date.now()).valueOf();
    this.offset = 0;
    this.date_list = [];
    this.registerOnChange = fn => this._onChange = fn;
    this.registerOnTouched = fn => this._onTouch = fn;
  }
  ngOnInit() {
    this.generateDates();
  }
  ngOnChanges(changes) {
    if (changes.offset_weekday) {
      this.generateDates();
    }
  }
  setValue(new_value) {
    if (new_value < this.from || new_value >= this.to) return;
    const date = new Date(new_value);
    this.date = (0,date_fns__WEBPACK_IMPORTED_MODULE_4__.set)(this.date, {
      date: date.getDate(),
      month: date.getMonth(),
      year: date.getFullYear()
    }).valueOf();
    this.active_date = (0,date_fns__WEBPACK_IMPORTED_MODULE_3__.startOfDay)(this.date).valueOf();
    if (this._onChange) this._onChange(new_value);
  }
  writeValue(value) {
    this.date = value;
    this.active_date = (0,date_fns__WEBPACK_IMPORTED_MODULE_3__.startOfDay)(value).valueOf();
    this.offset = 0;
    this.generateDates();
  }
  changeMonth(change) {
    this.offset += change;
    this.generateDates();
  }
  generateDates() {
    const offset = this._settings.get('app.week_start') || this.offset_weekday;
    const date = (0,date_fns__WEBPACK_IMPORTED_MODULE_5__.addMonths)(this.date, this.offset);
    let start = (0,date_fns__WEBPACK_IMPORTED_MODULE_6__.startOfWeek)((0,date_fns__WEBPACK_IMPORTED_MODULE_7__.startOfMonth)(date), {
      weekStartsOn: offset
    });
    const now = (0,date_fns__WEBPACK_IMPORTED_MODULE_3__.startOfDay)(Date.now());
    const list = [];
    while (list.length < 42) {
      list.push({
        id: start.valueOf(),
        is_past: (0,date_fns__WEBPACK_IMPORTED_MODULE_8__.isBefore)(start, now),
        is_month: (0,date_fns__WEBPACK_IMPORTED_MODULE_9__.isSameMonth)(start, date)
      });
      start = (0,date_fns__WEBPACK_IMPORTED_MODULE_10__.addDays)(start, 1);
    }
    this.date_list = list;
  }
  static #_ = this.ɵfac = function DateCalendarComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || DateCalendarComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdirectiveInject"](_placeos_common__WEBPACK_IMPORTED_MODULE_0__.SettingsService));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdefineComponent"]({
    type: DateCalendarComponent,
    selectors: [["date-calendar"]],
    inputs: {
      from: "from",
      to: "to",
      offset_weekday: "offset_weekday"
    },
    features: [_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵProvidersFeature"]([{
      provide: _angular_forms__WEBPACK_IMPORTED_MODULE_11__.NG_VALUE_ACCESSOR,
      useExisting: (0,_angular_core__WEBPACK_IMPORTED_MODULE_2__.forwardRef)(() => DateCalendarComponent),
      multi: true
    }]), _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵInheritDefinitionFeature"], _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵNgOnChangesFeature"]],
    decls: 17,
    vars: 12,
    consts: [[1, "p-2"], [1, "flex", "items-center", "justify-between"], [1, "pl-1.5", "pr-2", "font-medium"], [1, "flex", "items-center"], ["icon", "", "matRipple", "", "name", "schedule-next-month", 3, "click", "disabled"], ["icon", "", "matRipple", "", "name", "schedule-previous-month", 3, "click", "disabled"], [1, "flex", "items-center", "text-sm", "mb-2", "pb-2", "border-b", "border-base-200"], ["class", "flex-1 opacity-60 text-center", 4, "ngFor", "ngForOf"], [1, "flex", "items-center", "justify-between", "flex-wrap"], ["icon", "", "name", "schedule-set-date", "class", "min-w-[14%] w-9 h-9 relative overflow-visible my-0.5", 3, "hover:bg-base-100", "!text-base-300", "text-secondary-content", "text-base-content", "bg-secondary", "font-normal", "disabled", "click", 4, "ngFor", "ngForOf"], [1, "flex-1", "opacity-60", "text-center"], ["icon", "", "name", "schedule-set-date", 1, "min-w-[14%]", "w-9", "h-9", "relative", "overflow-visible", "my-0.5", 3, "click", "disabled"], ["class", "absolute -inset-[2px] border border-secondary rounded-full overflow-hidden", "matRipple", "", 4, "ngIf"], ["matRipple", "", 1, "absolute", "inset-0", "overflow-hidden", "rounded-full"], ["matRipple", "", 1, "absolute", "-inset-[2px]", "border", "border-secondary", "rounded-full", "overflow-hidden"]],
    template: function DateCalendarComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](0, "div", 0)(1, "div", 1)(2, "div", 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipe"](4, "date");
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](5, "div", 3)(6, "button", 4);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵlistener"]("click", function DateCalendarComponent_Template_button_click_6_listener() {
          return ctx.changeMonth(-1);
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](7, "app-icon");
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](8, "chevron_left");
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](9, "button", 5);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵlistener"]("click", function DateCalendarComponent_Template_button_click_9_listener() {
          return ctx.changeMonth(1);
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](10, "app-icon");
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](11, "chevron_right");
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]()()()();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](12, "div", 6);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](13, DateCalendarComponent_div_13_Template, 3, 4, "div", 7);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipe"](14, "slice");
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](15, "div", 8);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](16, DateCalendarComponent_button_16_Template, 5, 18, "button", 9);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]()();
      }
      if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipeBind2"](4, 5, (ctx.date_list[6] == null ? null : ctx.date_list[6].id) || ctx.date, "LLLL YYYY"), " ");
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("disabled", (ctx.date_list[0] == null ? null : ctx.date_list[0].id) < ctx.from);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("disabled", (ctx.date_list[34] == null ? null : ctx.date_list[34].id) > ctx.to);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](4);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngForOf", _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipeBind3"](14, 8, ctx.date_list, 0, 7));
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngForOf", ctx.date_list);
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_12__.NgForOf, _angular_common__WEBPACK_IMPORTED_MODULE_12__.NgIf, _angular_material_core__WEBPACK_IMPORTED_MODULE_13__.MatRipple, _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_1__.IconComponent, _angular_common__WEBPACK_IMPORTED_MODULE_12__.SlicePipe, _angular_common__WEBPACK_IMPORTED_MODULE_12__.DatePipe]
  });
}

/***/ }),

/***/ 19608:
/*!**********************************************************!*\
  !*** ./libs/form-fields/src/lib/date-field.component.ts ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DateFieldComponent: () => (/* binding */ DateFieldComponent)
/* harmony export */ });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @angular/forms */ 34456);
/* harmony import */ var libs_components_src_lib_custom_tooltip_component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! libs/components/src/lib/custom-tooltip.component */ 22238);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! date-fns */ 33240);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! date-fns */ 34938);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! date-fns */ 56441);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! date-fns */ 77177);
/* harmony import */ var libs_common_src_lib_async_handler_class__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! libs/common/src/lib/async-handler.class */ 75354);






const _c0 = ["*"];
function DateFieldComponent_Conditional_2_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipe"](1, "date");
  }
  if (rf & 2) {
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipeBind2"](1, 1, ctx_r0.date, ctx_r0.short ? "MMM d, yyyy" : "MMMM d, yyyy"), " ");
  }
}
function DateFieldComponent_Conditional_3_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](0, "span", 3);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](1, "No Date Selected");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
  }
}
function DateFieldComponent_span_8_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](0, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵprojection"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
  }
}
function DateFieldComponent_ng_template_9_Template(rf, ctx) {
  if (rf & 1) {
    const _r2 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](0, "div", 7)(1, "date-calendar", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵlistener"]("ngModelChange", function DateFieldComponent_ng_template_9_Template_date_calendar_ngModelChange_1_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵrestoreView"](_r2);
      const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵresetView"](ctx_r0.setValue($event));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngModel", ctx_r0.date || ctx_r0.now)("from", ctx_r0.from)("to", ctx_r0.until)("offset_weekday", ctx_r0.week_start);
  }
}
class DateFieldComponent extends libs_common_src_lib_async_handler_class__WEBPACK_IMPORTED_MODULE_1__.AsyncHandler {
  get has_error() {
    return this._control?.invalid && this._control?.touched;
  }
  constructor(_injector) {
    super();
    this._injector = _injector;
    /** Earliest date available the user is allowed to pick */
    this.from_date = (0,date_fns__WEBPACK_IMPORTED_MODULE_3__.startOfDay)(Date.now()).valueOf();
    /** Index of the day to start the week on when displaying the calendar */
    this.week_start = 0;
    this.short = false;
    this.now = Date.now();
  }
  /** First allowed date on the calendar */
  get from() {
    return new Date(this.from_date) || (0,date_fns__WEBPACK_IMPORTED_MODULE_3__.startOfDay)(new Date());
  }
  /** Current date value */
  get until() {
    return new Date(this.to_date) || (0,date_fns__WEBPACK_IMPORTED_MODULE_4__.addYears)((0,date_fns__WEBPACK_IMPORTED_MODULE_5__.endOfDay)(new Date()), 1);
  }
  ngOnInit() {
    this._control = this._injector.get(_angular_forms__WEBPACK_IMPORTED_MODULE_6__.NgControl);
    this.date = Date.now();
  }
  /**
   * Update the form field value
   * @param new_value New value to set on the form field
   */
  setValue(new_value) {
    // Keep hours and minutes of the old date
    const old_date = new Date(this.date);
    let new_date = (0,date_fns__WEBPACK_IMPORTED_MODULE_7__.set)(new_value, {
      hours: old_date.getHours(),
      minutes: old_date.getMinutes()
    }).valueOf();
    // Check that new date is before from
    if (new_date < this.from.valueOf()) {
      new_date = this.from.valueOf();
    }
    this.date = new_date;
    if (this._onChange) {
      this._onChange(new_date);
    }
    this._tooltip?.close();
  }
  /* istanbul ignore next */
  /**
   * Update local value when form control value is changed
   * @param value The new value for the component
   */
  writeValue(value) {
    this.date = value;
    this._tooltip?.close();
  }
  /* istanbul ignore next */
  /**
   * Registers a callback function that is called when the control's value changes in the UI.
   * @param fn The callback function to register
   */
  registerOnChange(fn) {
    this._onChange = fn;
  }
  /* istanbul ignore next */
  /**
   * Registers a callback function is called by the forms API on initialization to update the form model on blur.
   * @param fn The callback function to register
   */
  registerOnTouched(fn) {
    this._onTouch = fn;
  }
  setDisabledState(disabled) {
    this.disabled = disabled;
  }
  static #_ = this.ɵfac = function DateFieldComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || DateFieldComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_2__.Injector));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdefineComponent"]({
    type: DateFieldComponent,
    selectors: [["a-date-field"]],
    viewQuery: function DateFieldComponent_Query(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵviewQuery"](libs_components_src_lib_custom_tooltip_component__WEBPACK_IMPORTED_MODULE_0__.CustomTooltipComponent, 5);
      }
      if (rf & 2) {
        let _t;
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵloadQuery"]()) && (ctx._tooltip = _t.first);
      }
    },
    inputs: {
      from_date: [0, "from", "from_date"],
      to_date: [0, "to", "to_date"],
      week_start: "week_start",
      disabled: "disabled",
      short: "short"
    },
    features: [_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵProvidersFeature"]([{
      provide: _angular_forms__WEBPACK_IMPORTED_MODULE_6__.NG_VALUE_ACCESSOR,
      useExisting: (0,_angular_core__WEBPACK_IMPORTED_MODULE_2__.forwardRef)(() => DateFieldComponent),
      multi: true
    }]), _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵInheritDefinitionFeature"]],
    ngContentSelectors: _c0,
    decls: 11,
    vars: 6,
    consts: [["calendar_picker", ""], ["customTooltip", "", "yPosition", "top", "matRipple", "", 1, "flex", "items-center", "justify-between", "border", "border-neutral", "rounded", "h-12", "w-full", 3, "content", "disabled"], [1, "px-4", "py-2", "flex-1", "truncate", "w-1/2", "text-left", "font-normal"], [1, "opacity-30"], [1, "h-10", "w-10", "flex", "items-center", "justify-center", "text-2xl"], [1, "error", "h-5", "p-1", "text-xs", "text-error"], [4, "ngIf"], [1, "relative", "w-[18rem]", "rounded", "bg-base-100", "px-2", "py-4"], [3, "ngModelChange", "ngModel", "from", "to", "offset_weekday"]],
    template: function DateFieldComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵprojectionDef"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](0, "button", 1)(1, "p", 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](2, DateFieldComponent_Conditional_2_Template, 2, 4)(3, DateFieldComponent_Conditional_3_Template, 2, 0, "span", 3);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](4, "div", 4)(5, "app-icon");
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](6, "today");
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]()()();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](7, "div", 5);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](8, DateFieldComponent_span_8_Template, 2, 0, "span", 6);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](9, DateFieldComponent_ng_template_9_Template, 2, 4, "ng-template", null, 0, _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplateRefExtractor"]);
      }
      if (rf & 2) {
        const calendar_picker_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵreference"](10);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵclassProp"]("opacity-30", ctx.disabled);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("content", calendar_picker_r3)("disabled", ctx.disabled);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵconditional"](ctx.date ? 2 : 3);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](6);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngIf", ctx.has_error);
      }
    }
  });
}

/***/ }),

/***/ 29466:
/*!*******************************************************************!*\
  !*** ./libs/form-fields/src/lib/date-range-calendar.component.ts ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DateRangeCalendarComponent: () => (/* binding */ DateRangeCalendarComponent)
/* harmony export */ });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! date-fns */ 33240);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! date-fns */ 31257);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! date-fns */ 36337);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! date-fns */ 90610);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! date-fns */ 60452);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! date-fns */ 28797);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! date-fns */ 55882);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! date-fns */ 91543);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! date-fns */ 79681);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! date-fns */ 56441);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _angular_material_core__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @angular/material/core */ 74646);
/* harmony import */ var _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../components/src/lib/icon.component */ 69434);






function DateRangeCalendarComponent_div_13_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpipe"](2, "date");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const weekday_r1 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpipeBind2"](2, 1, weekday_r1, "EEE"), " ");
  }
}
function DateRangeCalendarComponent_button_14_div_1_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](0, "div", 16);
  }
}
function DateRangeCalendarComponent_button_14_div_2_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](0, "div", 17);
  }
}
function DateRangeCalendarComponent_button_14_div_3_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](0, "div", 18);
  }
}
function DateRangeCalendarComponent_button_14_div_4_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](0, "div", 19);
  }
}
function DateRangeCalendarComponent_button_14_div_8_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](0, "div", 20);
  }
}
function DateRangeCalendarComponent_button_14_Template(rf, ctx) {
  if (rf & 1) {
    const _r2 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "button", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function DateRangeCalendarComponent_button_14_Template_button_click_0_listener() {
      const day_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r2).$implicit;
      const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵresetView"](ctx_r3.selectDate(day_r3.id));
    })("mouseenter", function DateRangeCalendarComponent_button_14_Template_button_mouseenter_0_listener() {
      const day_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r2).$implicit;
      const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵresetView"](ctx_r3.setHoveredDate(day_r3.id));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](1, DateRangeCalendarComponent_button_14_div_1_Template, 1, 0, "div", 10)(2, DateRangeCalendarComponent_button_14_div_2_Template, 1, 0, "div", 11)(3, DateRangeCalendarComponent_button_14_div_3_Template, 1, 0, "div", 12)(4, DateRangeCalendarComponent_button_14_div_4_Template, 1, 0, "div", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](5, "div", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](6);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpipe"](7, "date");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](8, DateRangeCalendarComponent_button_14_div_8_Template, 1, 0, "div", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const day_r3 = ctx.$implicit;
    const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵclassProp"]("text-secondary-content", day_r3.is_start || day_r3.is_end);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("disabled", day_r3.disabled);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", day_r3.is_selected && !day_r3.is_start && !day_r3.is_end);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", day_r3.is_start && ctx_r3.end_after_start);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", day_r3.is_end && ctx_r3.end_after_start);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", day_r3.is_start || day_r3.is_end);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵclassProp"]("opacity-30", !day_r3.is_month);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpipeBind2"](7, 11, day_r3.id, "d"), " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", day_r3.is_today);
  }
}
class DateRangeCalendarComponent {
  constructor() {
    /** Earliest date available the user is allowed to pick */
    this.from_date = (0,date_fns__WEBPACK_IMPORTED_MODULE_2__.startOfDay)(Date.now()).valueOf();
    /** Index of the day to start the week on when displaying the calendar */
    this.offset_weekday = 0;
    /** Month to display the calendar for */
    this.month = (0,date_fns__WEBPACK_IMPORTED_MODULE_2__.startOfDay)(Date.now()).valueOf();
    /** Emitter for when the start date changes */
    this.startChange = new _angular_core__WEBPACK_IMPORTED_MODULE_1__.EventEmitter();
    /** Emitter for when the end date changes */
    this.endChange = new _angular_core__WEBPACK_IMPORTED_MODULE_1__.EventEmitter();
    this.hovered_date = null;
    this.weekdays = [];
    this.month_days = [];
  }
  get end_after_start() {
    return this.end && this.end > this.start && !(0,date_fns__WEBPACK_IMPORTED_MODULE_3__.isSameDay)(this.end, this.start);
  }
  ngOnInit() {
    this._setWeekdays();
    this._setMonthDays();
  }
  ngOnChanges(changes) {
    if (changes.offset_weekday) {
      this._setWeekdays();
      this._setMonthDays();
    }
    if (changes.start) {
      this._setMonthDays();
      this.month = this.start || Date.now();
    }
    if (changes.month) {
      this._setMonthDays();
    }
    if (changes.end) this._setMonthDays();
  }
  selectDate(date) {
    if (!this.start || date < this.start) {
      this.start = date;
      this.startChange.emit(date);
    } else {
      this.end = date;
      this.endChange.emit(date);
    }
    this._setMonthDays();
  }
  setHoveredDate(date) {
    if (!this.start) return;
    this.end = date;
    this._setMonthDays();
  }
  trackByFn(index, day) {
    return day.id;
  }
  nextMonth() {
    this.month = (0,date_fns__WEBPACK_IMPORTED_MODULE_4__.addMonths)(this.month, 1).valueOf();
    this._setMonthDays();
  }
  previousMonth() {
    this.month = (0,date_fns__WEBPACK_IMPORTED_MODULE_4__.addMonths)(this.month, -1).valueOf();
    this._setMonthDays();
  }
  _setMonthDays() {
    const start = (0,date_fns__WEBPACK_IMPORTED_MODULE_5__.startOfWeek)((0,date_fns__WEBPACK_IMPORTED_MODULE_6__.startOfMonth)(this.month), {
      weekStartsOn: this.offset_weekday
    });
    this.month_days = Array.from(Array(7 * 6).keys()).map(i => {
      const date = (0,date_fns__WEBPACK_IMPORTED_MODULE_7__.addDays)(start, i).valueOf();
      return {
        id: date,
        disabled: this.from_date && (0,date_fns__WEBPACK_IMPORTED_MODULE_8__.isBefore)(date, this.from_date) || this.to_date && (0,date_fns__WEBPACK_IMPORTED_MODULE_9__.isAfter)(date, this.to_date),
        is_today: (0,date_fns__WEBPACK_IMPORTED_MODULE_3__.isSameDay)(date, Date.now()),
        is_start: (0,date_fns__WEBPACK_IMPORTED_MODULE_3__.isSameDay)(date, this.start),
        is_end: (0,date_fns__WEBPACK_IMPORTED_MODULE_3__.isSameDay)(date, this.end),
        is_month: (0,date_fns__WEBPACK_IMPORTED_MODULE_10__.isSameMonth)(date, this.month),
        is_selected: this.end && date >= (0,date_fns__WEBPACK_IMPORTED_MODULE_2__.startOfDay)(this.start).valueOf() && date <= (0,date_fns__WEBPACK_IMPORTED_MODULE_11__.endOfDay)(this.end).valueOf()
      };
    });
  }
  _setWeekdays() {
    const start = (0,date_fns__WEBPACK_IMPORTED_MODULE_5__.startOfWeek)(Date.now(), {
      weekStartsOn: this.offset_weekday
    });
    this.weekdays = Array.from(Array(7).keys()).map(i => (0,date_fns__WEBPACK_IMPORTED_MODULE_7__.addDays)(start, i));
  }
  static #_ = this.ɵfac = function DateRangeCalendarComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || DateRangeCalendarComponent)();
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdefineComponent"]({
    type: DateRangeCalendarComponent,
    selectors: [["date-range-calendar"]],
    inputs: {
      from_date: [0, "from", "from_date"],
      to_date: [0, "to", "to_date"],
      offset_weekday: "offset_weekday",
      start: "start",
      end: "end",
      month: "month"
    },
    outputs: {
      startChange: "startChange",
      endChange: "endChange"
    },
    features: [_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵNgOnChangesFeature"]],
    decls: 15,
    vars: 7,
    consts: [[1, "flex", "items-center", "justify-between"], ["month", "", 1, "font-medium", "px-2"], [1, "flex", "items-center", "space-x-2"], ["icon", "", "matRipple", "", 3, "click"], [1, "grid", "grid-cols-7", "grid-rows-7", "gap-1", "w-[17.25rem]", "h-[17.25rem]"], [1, "col-span-full", "grid", "grid-cols-7", "border-b", "border-base-200"], ["weekday", "", "class", "relative flex items-center justify-center text-sm opacity-60", 4, "ngFor", "ngForOf"], ["class", "relative h-9 w-9 hover:bg-base-200 rounded-full", 3, "text-secondary-content", "disabled", "click", "mouseenter", 4, "ngFor", "ngForOf", "ngForTrackBy"], ["weekday", "", 1, "relative", "flex", "items-center", "justify-center", "text-sm", "opacity-60"], [1, "relative", "h-9", "w-9", "hover:bg-base-200", "rounded-full", 3, "click", "mouseenter", "disabled"], ["class", "absolute inset-y-0 -inset-x-0.5 border-y border-base-content border-dashed bg-base-200", 4, "ngIf"], ["class", "absolute inset-y-0 -right-0.5 w-[calc(50%+2px)] border-y border-base-content border-dashed bg-base-200", 4, "ngIf"], ["class", "absolute inset-y-0 -left-0.5 w-[calc(50%+2px)] border-y border-base-content border-dashed bg-base-200", 4, "ngIf"], ["class", "absolute inset-0 flex items-center justify-center bg-secondary rounded-full z-10", 4, "ngIf"], ["matRipple", "", 1, "absolute", "inset-0", "flex", "items-center", "justify-center", "rounded-full", "z-20"], ["class", "absolute -inset-[3px] flex items-center justify-center border border-secondary rounded-full z-10", 4, "ngIf"], [1, "absolute", "inset-y-0", "-inset-x-0.5", "border-y", "border-base-content", "border-dashed", "bg-base-200"], [1, "absolute", "inset-y-0", "-right-0.5", "w-[calc(50%+2px)]", "border-y", "border-base-content", "border-dashed", "bg-base-200"], [1, "absolute", "inset-y-0", "-left-0.5", "w-[calc(50%+2px)]", "border-y", "border-base-content", "border-dashed", "bg-base-200"], [1, "absolute", "inset-0", "flex", "items-center", "justify-center", "bg-secondary", "rounded-full", "z-10"], [1, "absolute", "-inset-[3px]", "flex", "items-center", "justify-center", "border", "border-secondary", "rounded-full", "z-10"]],
    template: function DateRangeCalendarComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div", 0)(1, "div", 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpipe"](3, "date");
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](4, "div", 2)(5, "button", 3);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function DateRangeCalendarComponent_Template_button_click_5_listener() {
          return ctx.previousMonth();
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](6, "app-icon");
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](7, "chevron_left");
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](8, "button", 3);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("click", function DateRangeCalendarComponent_Template_button_click_8_listener() {
          return ctx.nextMonth();
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](9, "app-icon");
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](10, "chevron_right");
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]()()()();
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](11, "div", 4)(12, "div", 5);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](13, DateRangeCalendarComponent_div_13_Template, 3, 4, "div", 6);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](14, DateRangeCalendarComponent_button_14_Template, 9, 14, "button", 7);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
      }
      if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpipeBind2"](3, 4, ctx.month, "MMMM yyyy"), " ");
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](11);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngForOf", ctx.weekdays);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngForOf", ctx.month_days)("ngForTrackBy", ctx.trackByFn);
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_12__.NgForOf, _angular_common__WEBPACK_IMPORTED_MODULE_12__.NgIf, _angular_material_core__WEBPACK_IMPORTED_MODULE_13__.MatRipple, _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_0__.IconComponent, _angular_common__WEBPACK_IMPORTED_MODULE_12__.DatePipe]
  });
}

/***/ }),

/***/ 5472:
/*!****************************************************************!*\
  !*** ./libs/form-fields/src/lib/date-range-field.component.ts ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DateRangeFieldComponent: () => (/* binding */ DateRangeFieldComponent)
/* harmony export */ });
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/forms */ 34456);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var _placeos_components__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @placeos/components */ 51588);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! date-fns */ 33240);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/core */ 37580);





const _c0 = ["startDate"];
const _c1 = ["endDate"];
const _c2 = [[["input", "startDate", ""]], [["input", "endDate", ""]]];
const _c3 = ["input[startDate]", "input[endDate]"];
function DateRangeFieldComponent_ng_template_14_Template(rf, ctx) {
  if (rf & 1) {
    const _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](0, "div", 5)(1, "date-range-calendar", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵlistener"]("startChange", function DateRangeFieldComponent_ng_template_14_Template_date_range_calendar_startChange_1_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵrestoreView"](_r1);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵresetView"](ctx_r1.setStartDate($event));
    })("endChange", function DateRangeFieldComponent_ng_template_14_Template_date_range_calendar_endChange_1_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵrestoreView"](_r1);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵresetView"](ctx_r1.setEndDate($event));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("month", (ctx_r1.start_date == null ? null : ctx_r1.start_date.control == null ? null : ctx_r1.start_date.control.value) || ctx_r1.now)("from", ctx_r1.from)("to", ctx_r1.until)("offset_weekday", ctx_r1.week_start);
  }
}
class DateRangeFieldComponent extends _placeos_common__WEBPACK_IMPORTED_MODULE_0__.AsyncHandler {
  constructor() {
    super(...arguments);
    /** Earliest date available the user is allowed to pick */
    this.from_date = (0,date_fns__WEBPACK_IMPORTED_MODULE_3__.startOfDay)(Date.now()).valueOf();
    /** Index of the day to start the week on when displaying the calendar */
    this.week_start = 0;
    /** Whether form control is disabled */
    this.disabled = false;
    this.short = false;
    this.now = Date.now();
  }
  setStartDate(date) {
    if (!this.start_date) return;
    this.start_date.control.setValue(date);
  }
  setEndDate(date) {
    this._tooltip?.close();
    if (!this.end_date) return;
    this.end_date.control.setValue(date);
  }
  static #_ = this.ɵfac = /*@__PURE__*/(() => {
    let ɵDateRangeFieldComponent_BaseFactory;
    return function DateRangeFieldComponent_Factory(__ngFactoryType__) {
      return (ɵDateRangeFieldComponent_BaseFactory || (ɵDateRangeFieldComponent_BaseFactory = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵgetInheritedFactory"](DateRangeFieldComponent)))(__ngFactoryType__ || DateRangeFieldComponent);
    };
  })();
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdefineComponent"]({
    type: DateRangeFieldComponent,
    selectors: [["date-range-field"]],
    contentQueries: function DateRangeFieldComponent_ContentQueries(rf, ctx, dirIndex) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵcontentQuery"](dirIndex, _c0, 5, _angular_forms__WEBPACK_IMPORTED_MODULE_4__.NgControl);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵcontentQuery"](dirIndex, _c1, 5, _angular_forms__WEBPACK_IMPORTED_MODULE_4__.NgControl);
      }
      if (rf & 2) {
        let _t;
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵloadQuery"]()) && (ctx.start_date = _t.first);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵloadQuery"]()) && (ctx.end_date = _t.first);
      }
    },
    viewQuery: function DateRangeFieldComponent_Query(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵviewQuery"](_placeos_components__WEBPACK_IMPORTED_MODULE_1__.CustomTooltipComponent, 5);
      }
      if (rf & 2) {
        let _t;
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵloadQuery"]()) && (ctx._tooltip = _t.first);
      }
    },
    inputs: {
      from_date: [0, "from", "from_date"],
      to_date: [0, "to", "to_date"],
      week_start: "week_start",
      disabled: "disabled",
      short: "short"
    },
    features: [_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵInheritDefinitionFeature"]],
    ngContentSelectors: _c3,
    decls: 16,
    vars: 12,
    consts: [["calendar_picker", ""], ["matRipple", "", "type", "button", "role", "date-picker", "customTooltip", "", "yPosition", "top", 1, "flex", "items-center", "rounded", "px-4", "py-2", "border", "border-neutral", "hover:border-base-content", "focus:outline-2", "outline-base-content", "space-x-2", "min-w-max", 3, "content", "disabled"], [1, "flex-1", "whitespace-nowrap"], [1, "text-2xl"], [1, "hidden"], [1, "relative", "w-[18.25rem]", "rounded", "bg-base-100", "px-2", "py-4"], [3, "startChange", "endChange", "month", "from", "to", "offset_weekday"]],
    template: function DateRangeFieldComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵprojectionDef"](_c2);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](0, "button", 1)(1, "div", 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipe"](3, "date");
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](4, "div");
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](5, "\u2013");
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](6, "div", 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](7);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipe"](8, "date");
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](9, "app-icon", 3);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](10, "today");
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](11, "div", 4);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵprojection"](12);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵprojection"](13, 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](14, DateRangeFieldComponent_ng_template_14_Template, 2, 4, "ng-template", null, 0, _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplateRefExtractor"]);
      }
      if (rf & 2) {
        const calendar_picker_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵreference"](15);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵclassProp"]("opacity-30", ctx.disabled);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("content", calendar_picker_r3)("disabled", ctx.disabled);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipeBind2"](3, 6, (ctx.start_date == null ? null : ctx.start_date.value) || ctx.now, "MMM d, yyyy"), " ");
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](5);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipeBind2"](8, 9, (ctx.end_date == null ? null : ctx.end_date.value) || ctx.now, "MMM d, yyyy"), " ");
      }
    }
  });
}

/***/ }),

/***/ 83476:
/*!**************************************************************!*\
  !*** ./libs/form-fields/src/lib/duration-field.component.ts ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DurationFieldComponent: () => (/* binding */ DurationFieldComponent)
/* harmony export */ });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/forms */ 34456);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! date-fns */ 49675);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! date-fns */ 99134);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _angular_material_form_field__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/material/form-field */ 24950);
/* harmony import */ var _angular_material_select__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @angular/material/select */ 25175);
/* harmony import */ var _angular_material_core__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @angular/material/core */ 74646);








const _c0 = ["*"];
function DurationFieldComponent_mat_option_4_ng_container_1_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](2, "date");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementContainerEnd"]();
  }
  if (rf & 2) {
    const option_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]().$implicit;
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate3"](" ", option_r2.date ? _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind2"](2, 3, option_r2.date, option_r2.id >= 24 * 60 ? "mediumDate" : ctx_r2.use_24hr ? "HH : mm" : "h : mm a") + " (" : "", "", option_r2.name, "", option_r2.date ? ")" : "", " ");
  }
}
function DurationFieldComponent_mat_option_4_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "mat-option", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, DurationFieldComponent_mat_option_4_ng_container_1_Template, 3, 6, "ng-container", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const option_r2 = ctx.$implicit;
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("value", option_r2.id);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", !ctx_r2.force);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate1"](" ", ctx_r2.force, " ");
  }
}
class DurationFieldComponent {
  constructor() {
    /** Maximum duration option available */
    this.max = 240;
    /** Minimum duration option available */
    this.min = 30;
    /** Step value between options */
    this.step = 15;
    /** Special case prepopulation i.e. out of step options */
    this.custom_options = [];
    this.use_24hr = false;
    this.duration = 60;
    /** List of available duration options */
    this.duration_options = [];
  }
  ngOnInit() {
    this.duration_options = this.generateDurationOptions(this.max, this.min, this.step);
    this._updateOption();
  }
  ngOnChanges(changes) {
    /* istanbul ignore else */
    if (changes.max || changes.min || changes.step || changes.time || changes.custom_options) {
      this.duration_options = this.generateDurationOptions(this.max, this.min, this.step);
      this._updateOption();
    }
  }
  /**
   * Update the form field value
   * @param new_value New value to set on the form field
   */
  setValue(new_value) {
    this.duration = new_value;
    /* istanbul ignore else */
    if (this._onChange) {
      this._onChange(+new_value);
    }
  }
  /* istanbul ignore next */
  /**
   * Update local value when form control value is changed
   * @param value The new value for the component
   */
  writeValue(value) {
    this.duration = value;
    this._updateOption();
  }
  setDisabledState(disabled) {
    this.disabled = disabled;
  }
  /* istanbul ignore next */
  /**
   * Registers a callback function that is called when the control's value changes in the UI.
   * @param fn The callback function to register
   */
  registerOnChange(fn) {
    this._onChange = fn;
  }
  /* istanbul ignore next */
  /**
   * Registers a callback function is called by the forms API on initialization to update the form model on blur.
   * @param fn The callback function to register
   */
  registerOnTouched(fn) {
    this._onTouch = fn;
  }
  generateDurationOptions(max, min, step) {
    const blocks = [];
    let time = min;
    const date = this.time ? this.time : null;
    // Add special cases
    for (const option of this.custom_options) {
      blocks.push({
        id: option,
        date: date ? (0,date_fns__WEBPACK_IMPORTED_MODULE_1__.addMinutes)(date, option).valueOf() : undefined,
        name: option >= 24 * 60 ? `${(0,date_fns__WEBPACK_IMPORTED_MODULE_2__.formatDuration)({
          days: Math.floor(option / (24 * 60))
        })}` : `${(0,date_fns__WEBPACK_IMPORTED_MODULE_2__.formatDuration)({
          hours: Math.floor(option / 60),
          minutes: option % 60
        })}`
      });
    }
    while (time <= max) {
      blocks.push({
        id: time,
        date: date ? (0,date_fns__WEBPACK_IMPORTED_MODULE_1__.addMinutes)(date, time).valueOf() : undefined,
        name: time === 0 ? (0,date_fns__WEBPACK_IMPORTED_MODULE_2__.formatDuration)({
          minutes: 0
        }, {
          zero: true
        }) : time >= 24 * 60 ? `${(0,date_fns__WEBPACK_IMPORTED_MODULE_2__.formatDuration)({
          days: Math.floor(time / (24 * 60))
        })}` : `${(0,date_fns__WEBPACK_IMPORTED_MODULE_2__.formatDuration)({
          hours: Math.floor(time / 60),
          minutes: time % 60
        })}`
      });
      time += step;
    }
    blocks.sort((a, b) => a.id - b.id);
    return blocks;
  }
  _updateOption() {
    if (!this.duration_options?.length) return;
    const idx = this.duration_options.findIndex(_ => _.id === this.duration);
    if (idx < 0) this.setValue(this.min);
  }
  static #_ = this.ɵfac = function DurationFieldComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || DurationFieldComponent)();
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({
    type: DurationFieldComponent,
    selectors: [["a-duration-field"]],
    inputs: {
      max: "max",
      min: "min",
      step: "step",
      time: "time",
      disabled: "disabled",
      custom_options: "custom_options",
      force: "force",
      use_24hr: "use_24hr"
    },
    features: [_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵProvidersFeature"]([{
      provide: _angular_forms__WEBPACK_IMPORTED_MODULE_3__.NG_VALUE_ACCESSOR,
      useExisting: (0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.forwardRef)(() => DurationFieldComponent),
      multi: true
    }]), _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵNgOnChangesFeature"]],
    ngContentSelectors: _c0,
    decls: 7,
    vars: 5,
    consts: [["select", ""], [1, "duration-field"], ["appearance", "outline"], [3, "valueChange", "value", "disabled", "placeholder"], [3, "value", 4, "ngFor", "ngForOf"], [3, "value"], [4, "ngIf"]],
    template: function DurationFieldComponent_Template(rf, ctx) {
      if (rf & 1) {
        const _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵprojectionDef"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 1)(1, "mat-form-field", 2)(2, "mat-select", 3, 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("valueChange", function DurationFieldComponent_Template_mat_select_valueChange_2_listener($event) {
          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r1);
          return _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵresetView"](ctx.setValue($event));
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](4, DurationFieldComponent_mat_option_4_Template, 3, 3, "mat-option", 4);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](5, "mat-error");
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵprojection"](6);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()()();
      }
      if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵattribute"]("disabled", ctx.disabled);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("value", ctx.duration)("disabled", ctx.disabled)("placeholder", ctx.duration + " minutes");
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngForOf", ctx.duration_options);
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_4__.NgForOf, _angular_common__WEBPACK_IMPORTED_MODULE_4__.NgIf, _angular_material_form_field__WEBPACK_IMPORTED_MODULE_5__.MatFormField, _angular_material_form_field__WEBPACK_IMPORTED_MODULE_5__.MatError, _angular_material_select__WEBPACK_IMPORTED_MODULE_6__.MatSelect, _angular_material_core__WEBPACK_IMPORTED_MODULE_7__.MatOption, _angular_common__WEBPACK_IMPORTED_MODULE_4__.DatePipe],
    styles: ["[_nghost-%COMP%] {\n                width: 100%;\n            }\n\n            mat-form-field[_ngcontent-%COMP%] {\n                width: 100%;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImR1cmF0aW9uLWZpZWxkLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1lBQ1k7Z0JBQ0ksV0FBVztZQUNmOztZQUVBO2dCQUNJLFdBQVc7WUFDZiIsImZpbGUiOiJkdXJhdGlvbi1maWVsZC5jb21wb25lbnQudHMiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIDpob3N0IHtcbiAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbWF0LWZvcm0tZmllbGQge1xuICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgfVxuICAgICAgICAiXX0= */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvZm9ybS1maWVsZHMvc3JjL2xpYi9kdXJhdGlvbi1maWVsZC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLFdBQVc7WUFDZjs7WUFFQTtnQkFDSSxXQUFXO1lBQ2Y7O0FBRVosb2ZBQW9mIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICA6aG9zdCB7XG4gICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIG1hdC1mb3JtLWZpZWxkIHtcbiAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl0sInNvdXJjZVJvb3QiOiIifQ== */"]
  });
}

/***/ }),

/***/ 77066:
/*!********************************************************!*\
  !*** ./libs/form-fields/src/lib/form-fields.module.ts ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   FormFieldsModule: () => (/* binding */ FormFieldsModule)
/* harmony export */ });
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! @angular/forms */ 34456);
/* harmony import */ var _angular_cdk_clipboard__WEBPACK_IMPORTED_MODULE_39__ = __webpack_require__(/*! @angular/cdk/clipboard */ 52352);
/* harmony import */ var _angular_material_chips__WEBPACK_IMPORTED_MODULE_38__ = __webpack_require__(/*! @angular/material/chips */ 12772);
/* harmony import */ var _angular_material_core__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! @angular/material/core */ 74646);
/* harmony import */ var _angular_material_form_field__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! @angular/material/form-field */ 24950);
/* harmony import */ var _angular_material_input__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! @angular/material/input */ 95541);
/* harmony import */ var _angular_material_select__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! @angular/material/select */ 25175);
/* harmony import */ var _angular_material_autocomplete__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! @angular/material/autocomplete */ 79771);
/* harmony import */ var _angular_material_tooltip__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! @angular/material/tooltip */ 80640);
/* harmony import */ var _angular_material_checkbox__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! @angular/material/checkbox */ 97024);
/* harmony import */ var _angular_material_radio__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(/*! @angular/material/radio */ 53804);
/* harmony import */ var libs_components_src_lib_components_module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! libs/components/src/lib/components.module */ 14974);
/* harmony import */ var _action_field_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./action-field.component */ 79842);
/* harmony import */ var _counter_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./counter.component */ 55507);
/* harmony import */ var _date_field_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./date-field.component */ 19608);
/* harmony import */ var _duration_field_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./duration-field.component */ 83476);
/* harmony import */ var _time_field_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./time-field.component */ 81413);
/* harmony import */ var _user_list_field_component__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./user-list-field.component */ 840);
/* harmony import */ var _user_search_field_component__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./user-search-field.component */ 18000);
/* harmony import */ var _item_list_field_component__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./item-list-field.component */ 20212);
/* harmony import */ var _upload_list_field_component__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./upload-list-field.component */ 65542);
/* harmony import */ var _upload_file_field_component__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./upload-file-field.component */ 45748);
/* harmony import */ var _space_list_field_component__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./space-list-field.component */ 84809);
/* harmony import */ var _rich_text_input_component__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./rich-text-input.component */ 81772);
/* harmony import */ var _host_select_field_component__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./host-select-field.component */ 65347);
/* harmony import */ var _image_list_field_component__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./image-list-field.component */ 56864);
/* harmony import */ var _recurrence_field_component__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./recurrence-field.component */ 83138);
/* harmony import */ var _recurrence_modal_component__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./recurrence-modal.component */ 375);
/* harmony import */ var _support_ticket_modal_component__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./support-ticket-modal.component */ 38791);
/* harmony import */ var _date_calendar_component__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./date-calendar.component */ 89058);
/* harmony import */ var _booking_rules_form_component__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./booking-rules-form.component */ 33683);
/* harmony import */ var _place_user_pipe__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./place-user.pipe */ 12863);
/* harmony import */ var _date_range_field_component__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./date-range-field.component */ 5472);
/* harmony import */ var _date_range_calendar_component__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./date-range-calendar.component */ 29466);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ../../../components/src/lib/icon.component */ 69434);
/* harmony import */ var _components_src_lib_custom_tooltip_component__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ../../../components/src/lib/custom-tooltip.component */ 22238);
/* harmony import */ var _angular_material_progress_spinner__WEBPACK_IMPORTED_MODULE_40__ = __webpack_require__(/*! @angular/material/progress-spinner */ 41134);
/* harmony import */ var _components_src_lib_virtual_keyboard_component__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ../../../components/src/lib/virtual-keyboard.component */ 75080);
/* harmony import */ var _components_src_lib_authenticated_image_directive__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ../../../components/src/lib/authenticated-image.directive */ 93208);
/* harmony import */ var _angular_material_dialog__WEBPACK_IMPORTED_MODULE_41__ = __webpack_require__(/*! @angular/material/dialog */ 12587);






















































const COMPONENTS = [_action_field_component__WEBPACK_IMPORTED_MODULE_1__.ActionFieldComponent, _counter_component__WEBPACK_IMPORTED_MODULE_2__.CounterComponent, _date_field_component__WEBPACK_IMPORTED_MODULE_3__.DateFieldComponent, _date_range_field_component__WEBPACK_IMPORTED_MODULE_21__.DateRangeFieldComponent, _date_range_calendar_component__WEBPACK_IMPORTED_MODULE_22__.DateRangeCalendarComponent, _duration_field_component__WEBPACK_IMPORTED_MODULE_4__.DurationFieldComponent, _time_field_component__WEBPACK_IMPORTED_MODULE_5__.TimeFieldComponent, _user_list_field_component__WEBPACK_IMPORTED_MODULE_6__.UserListFieldComponent, _user_search_field_component__WEBPACK_IMPORTED_MODULE_7__.UserSearchFieldComponent, _item_list_field_component__WEBPACK_IMPORTED_MODULE_8__.ItemListFieldComponent, _upload_list_field_component__WEBPACK_IMPORTED_MODULE_9__.UploadListFieldComponent, _upload_file_field_component__WEBPACK_IMPORTED_MODULE_10__.UploadFileFieldComponent, _space_list_field_component__WEBPACK_IMPORTED_MODULE_11__.SpaceListFieldComponent, _rich_text_input_component__WEBPACK_IMPORTED_MODULE_12__.RichTextInputComponent, _host_select_field_component__WEBPACK_IMPORTED_MODULE_13__.HostSelectFieldComponent, _image_list_field_component__WEBPACK_IMPORTED_MODULE_14__.ImageListFieldComponent, _support_ticket_modal_component__WEBPACK_IMPORTED_MODULE_17__.SupportTicketModalComponent, _recurrence_field_component__WEBPACK_IMPORTED_MODULE_15__.RecurrenceFieldComponent, _recurrence_modal_component__WEBPACK_IMPORTED_MODULE_16__.RecurrenceModalComponent, _date_calendar_component__WEBPACK_IMPORTED_MODULE_18__.DateCalendarComponent, _booking_rules_form_component__WEBPACK_IMPORTED_MODULE_19__.BookingRulesFormComponent, _place_user_pipe__WEBPACK_IMPORTED_MODULE_20__.PlaceUserPipe];
class FormFieldsModule {
  static #_ = this.ɵfac = function FormFieldsModule_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || FormFieldsModule)();
  };
  static #_2 = this.ɵmod = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_27__["ɵɵdefineNgModule"]({
    type: FormFieldsModule
  });
  static #_3 = this.ɵinj = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_27__["ɵɵdefineInjector"]({
    imports: [_angular_common__WEBPACK_IMPORTED_MODULE_28__.CommonModule, _angular_forms__WEBPACK_IMPORTED_MODULE_29__.FormsModule, _angular_forms__WEBPACK_IMPORTED_MODULE_29__.ReactiveFormsModule, _angular_material_core__WEBPACK_IMPORTED_MODULE_30__.MatRippleModule, _angular_forms__WEBPACK_IMPORTED_MODULE_29__.ReactiveFormsModule, _angular_material_form_field__WEBPACK_IMPORTED_MODULE_31__.MatFormFieldModule, _angular_material_input__WEBPACK_IMPORTED_MODULE_32__.MatInputModule, _angular_material_select__WEBPACK_IMPORTED_MODULE_33__.MatSelectModule, _angular_material_autocomplete__WEBPACK_IMPORTED_MODULE_34__.MatAutocompleteModule, _angular_material_tooltip__WEBPACK_IMPORTED_MODULE_35__.MatTooltipModule, _angular_material_checkbox__WEBPACK_IMPORTED_MODULE_36__.MatCheckboxModule, _angular_material_radio__WEBPACK_IMPORTED_MODULE_37__.MatRadioModule, _angular_material_chips__WEBPACK_IMPORTED_MODULE_38__.MatChipsModule, _angular_cdk_clipboard__WEBPACK_IMPORTED_MODULE_39__.ClipboardModule, libs_components_src_lib_components_module__WEBPACK_IMPORTED_MODULE_0__.ComponentsModule]
  });
}
(function () {
  (typeof ngJitMode === "undefined" || ngJitMode) && _angular_core__WEBPACK_IMPORTED_MODULE_27__["ɵɵsetNgModuleScope"](FormFieldsModule, {
    declarations: [_action_field_component__WEBPACK_IMPORTED_MODULE_1__.ActionFieldComponent, _counter_component__WEBPACK_IMPORTED_MODULE_2__.CounterComponent, _date_field_component__WEBPACK_IMPORTED_MODULE_3__.DateFieldComponent, _date_range_field_component__WEBPACK_IMPORTED_MODULE_21__.DateRangeFieldComponent, _date_range_calendar_component__WEBPACK_IMPORTED_MODULE_22__.DateRangeCalendarComponent, _duration_field_component__WEBPACK_IMPORTED_MODULE_4__.DurationFieldComponent, _time_field_component__WEBPACK_IMPORTED_MODULE_5__.TimeFieldComponent, _user_list_field_component__WEBPACK_IMPORTED_MODULE_6__.UserListFieldComponent, _user_search_field_component__WEBPACK_IMPORTED_MODULE_7__.UserSearchFieldComponent, _item_list_field_component__WEBPACK_IMPORTED_MODULE_8__.ItemListFieldComponent, _upload_list_field_component__WEBPACK_IMPORTED_MODULE_9__.UploadListFieldComponent, _upload_file_field_component__WEBPACK_IMPORTED_MODULE_10__.UploadFileFieldComponent, _space_list_field_component__WEBPACK_IMPORTED_MODULE_11__.SpaceListFieldComponent, _rich_text_input_component__WEBPACK_IMPORTED_MODULE_12__.RichTextInputComponent, _host_select_field_component__WEBPACK_IMPORTED_MODULE_13__.HostSelectFieldComponent, _image_list_field_component__WEBPACK_IMPORTED_MODULE_14__.ImageListFieldComponent, _support_ticket_modal_component__WEBPACK_IMPORTED_MODULE_17__.SupportTicketModalComponent, _recurrence_field_component__WEBPACK_IMPORTED_MODULE_15__.RecurrenceFieldComponent, _recurrence_modal_component__WEBPACK_IMPORTED_MODULE_16__.RecurrenceModalComponent, _date_calendar_component__WEBPACK_IMPORTED_MODULE_18__.DateCalendarComponent, _booking_rules_form_component__WEBPACK_IMPORTED_MODULE_19__.BookingRulesFormComponent, _place_user_pipe__WEBPACK_IMPORTED_MODULE_20__.PlaceUserPipe],
    imports: [_angular_common__WEBPACK_IMPORTED_MODULE_28__.CommonModule, _angular_forms__WEBPACK_IMPORTED_MODULE_29__.FormsModule, _angular_forms__WEBPACK_IMPORTED_MODULE_29__.ReactiveFormsModule, _angular_material_core__WEBPACK_IMPORTED_MODULE_30__.MatRippleModule, _angular_forms__WEBPACK_IMPORTED_MODULE_29__.ReactiveFormsModule, _angular_material_form_field__WEBPACK_IMPORTED_MODULE_31__.MatFormFieldModule, _angular_material_input__WEBPACK_IMPORTED_MODULE_32__.MatInputModule, _angular_material_select__WEBPACK_IMPORTED_MODULE_33__.MatSelectModule, _angular_material_autocomplete__WEBPACK_IMPORTED_MODULE_34__.MatAutocompleteModule, _angular_material_tooltip__WEBPACK_IMPORTED_MODULE_35__.MatTooltipModule, _angular_material_checkbox__WEBPACK_IMPORTED_MODULE_36__.MatCheckboxModule, _angular_material_radio__WEBPACK_IMPORTED_MODULE_37__.MatRadioModule, _angular_material_chips__WEBPACK_IMPORTED_MODULE_38__.MatChipsModule, _angular_cdk_clipboard__WEBPACK_IMPORTED_MODULE_39__.ClipboardModule, libs_components_src_lib_components_module__WEBPACK_IMPORTED_MODULE_0__.ComponentsModule],
    exports: [_action_field_component__WEBPACK_IMPORTED_MODULE_1__.ActionFieldComponent, _counter_component__WEBPACK_IMPORTED_MODULE_2__.CounterComponent, _date_field_component__WEBPACK_IMPORTED_MODULE_3__.DateFieldComponent, _date_range_field_component__WEBPACK_IMPORTED_MODULE_21__.DateRangeFieldComponent, _date_range_calendar_component__WEBPACK_IMPORTED_MODULE_22__.DateRangeCalendarComponent, _duration_field_component__WEBPACK_IMPORTED_MODULE_4__.DurationFieldComponent, _time_field_component__WEBPACK_IMPORTED_MODULE_5__.TimeFieldComponent, _user_list_field_component__WEBPACK_IMPORTED_MODULE_6__.UserListFieldComponent, _user_search_field_component__WEBPACK_IMPORTED_MODULE_7__.UserSearchFieldComponent, _item_list_field_component__WEBPACK_IMPORTED_MODULE_8__.ItemListFieldComponent, _upload_list_field_component__WEBPACK_IMPORTED_MODULE_9__.UploadListFieldComponent, _upload_file_field_component__WEBPACK_IMPORTED_MODULE_10__.UploadFileFieldComponent, _space_list_field_component__WEBPACK_IMPORTED_MODULE_11__.SpaceListFieldComponent, _rich_text_input_component__WEBPACK_IMPORTED_MODULE_12__.RichTextInputComponent, _host_select_field_component__WEBPACK_IMPORTED_MODULE_13__.HostSelectFieldComponent, _image_list_field_component__WEBPACK_IMPORTED_MODULE_14__.ImageListFieldComponent, _support_ticket_modal_component__WEBPACK_IMPORTED_MODULE_17__.SupportTicketModalComponent, _recurrence_field_component__WEBPACK_IMPORTED_MODULE_15__.RecurrenceFieldComponent, _recurrence_modal_component__WEBPACK_IMPORTED_MODULE_16__.RecurrenceModalComponent, _date_calendar_component__WEBPACK_IMPORTED_MODULE_18__.DateCalendarComponent, _booking_rules_form_component__WEBPACK_IMPORTED_MODULE_19__.BookingRulesFormComponent, _place_user_pipe__WEBPACK_IMPORTED_MODULE_20__.PlaceUserPipe]
  });
})();
_angular_core__WEBPACK_IMPORTED_MODULE_27__["ɵɵsetComponentScope"](_date_field_component__WEBPACK_IMPORTED_MODULE_3__.DateFieldComponent, [_angular_common__WEBPACK_IMPORTED_MODULE_28__.NgIf, _angular_forms__WEBPACK_IMPORTED_MODULE_29__.NgControlStatus, _angular_forms__WEBPACK_IMPORTED_MODULE_29__.NgModel, _angular_material_core__WEBPACK_IMPORTED_MODULE_30__.MatRipple, _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_23__.IconComponent, _components_src_lib_custom_tooltip_component__WEBPACK_IMPORTED_MODULE_24__.CustomTooltipComponent, _date_calendar_component__WEBPACK_IMPORTED_MODULE_18__.DateCalendarComponent], [_angular_common__WEBPACK_IMPORTED_MODULE_28__.DatePipe]);
_angular_core__WEBPACK_IMPORTED_MODULE_27__["ɵɵsetComponentScope"](_date_range_field_component__WEBPACK_IMPORTED_MODULE_21__.DateRangeFieldComponent, [_angular_material_core__WEBPACK_IMPORTED_MODULE_30__.MatRipple, _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_23__.IconComponent, _components_src_lib_custom_tooltip_component__WEBPACK_IMPORTED_MODULE_24__.CustomTooltipComponent, _date_range_calendar_component__WEBPACK_IMPORTED_MODULE_22__.DateRangeCalendarComponent], [_angular_common__WEBPACK_IMPORTED_MODULE_28__.DatePipe]);
_angular_core__WEBPACK_IMPORTED_MODULE_27__["ɵɵsetComponentScope"](_user_list_field_component__WEBPACK_IMPORTED_MODULE_6__.UserListFieldComponent, [_angular_common__WEBPACK_IMPORTED_MODULE_28__.NgForOf, _angular_common__WEBPACK_IMPORTED_MODULE_28__.NgIf, _angular_forms__WEBPACK_IMPORTED_MODULE_29__.DefaultValueAccessor, _angular_forms__WEBPACK_IMPORTED_MODULE_29__.NgControlStatus, _angular_forms__WEBPACK_IMPORTED_MODULE_29__.NgModel, _angular_material_core__WEBPACK_IMPORTED_MODULE_30__.MatRipple, _angular_material_form_field__WEBPACK_IMPORTED_MODULE_31__.MatFormField, _angular_material_form_field__WEBPACK_IMPORTED_MODULE_31__.MatSuffix, _angular_material_core__WEBPACK_IMPORTED_MODULE_30__.MatOption, _angular_material_autocomplete__WEBPACK_IMPORTED_MODULE_34__.MatAutocomplete, _angular_material_autocomplete__WEBPACK_IMPORTED_MODULE_34__.MatAutocompleteTrigger, _angular_material_autocomplete__WEBPACK_IMPORTED_MODULE_34__.MatAutocompleteOrigin, _angular_material_tooltip__WEBPACK_IMPORTED_MODULE_35__.MatTooltip, _angular_material_chips__WEBPACK_IMPORTED_MODULE_38__.MatChipGrid, _angular_material_chips__WEBPACK_IMPORTED_MODULE_38__.MatChipInput, _angular_material_chips__WEBPACK_IMPORTED_MODULE_38__.MatChipRemove, _angular_material_chips__WEBPACK_IMPORTED_MODULE_38__.MatChipRow, _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_23__.IconComponent, _angular_material_progress_spinner__WEBPACK_IMPORTED_MODULE_40__.MatProgressSpinner], [_angular_common__WEBPACK_IMPORTED_MODULE_28__.AsyncPipe, _place_user_pipe__WEBPACK_IMPORTED_MODULE_20__.PlaceUserPipe]);
_angular_core__WEBPACK_IMPORTED_MODULE_27__["ɵɵsetComponentScope"](_user_search_field_component__WEBPACK_IMPORTED_MODULE_7__.UserSearchFieldComponent, [_angular_common__WEBPACK_IMPORTED_MODULE_28__.NgForOf, _angular_common__WEBPACK_IMPORTED_MODULE_28__.NgIf, _angular_forms__WEBPACK_IMPORTED_MODULE_29__.DefaultValueAccessor, _angular_forms__WEBPACK_IMPORTED_MODULE_29__.NgControlStatus, _angular_forms__WEBPACK_IMPORTED_MODULE_29__.NgModel, _angular_material_form_field__WEBPACK_IMPORTED_MODULE_31__.MatFormField, _angular_material_form_field__WEBPACK_IMPORTED_MODULE_31__.MatPrefix, _angular_material_form_field__WEBPACK_IMPORTED_MODULE_31__.MatSuffix, _angular_material_input__WEBPACK_IMPORTED_MODULE_32__.MatInput, _angular_material_core__WEBPACK_IMPORTED_MODULE_30__.MatOption, _angular_material_autocomplete__WEBPACK_IMPORTED_MODULE_34__.MatAutocomplete, _angular_material_autocomplete__WEBPACK_IMPORTED_MODULE_34__.MatAutocompleteTrigger, _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_23__.IconComponent, _components_src_lib_virtual_keyboard_component__WEBPACK_IMPORTED_MODULE_25__.VirtualKeyboardComponent, _angular_material_progress_spinner__WEBPACK_IMPORTED_MODULE_40__.MatProgressSpinner], []);
_angular_core__WEBPACK_IMPORTED_MODULE_27__["ɵɵsetComponentScope"](_space_list_field_component__WEBPACK_IMPORTED_MODULE_11__.SpaceListFieldComponent, [_angular_common__WEBPACK_IMPORTED_MODULE_28__.NgForOf, _angular_common__WEBPACK_IMPORTED_MODULE_28__.NgIf, _angular_forms__WEBPACK_IMPORTED_MODULE_29__.NgControlStatus, _angular_forms__WEBPACK_IMPORTED_MODULE_29__.NgModel, _angular_material_core__WEBPACK_IMPORTED_MODULE_30__.MatRipple, _angular_material_radio__WEBPACK_IMPORTED_MODULE_37__.MatRadioGroup, _angular_material_radio__WEBPACK_IMPORTED_MODULE_37__.MatRadioButton, _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_23__.IconComponent, _components_src_lib_authenticated_image_directive__WEBPACK_IMPORTED_MODULE_26__.AuthenticatedImageDirective], [_angular_common__WEBPACK_IMPORTED_MODULE_28__.AsyncPipe]);
_angular_core__WEBPACK_IMPORTED_MODULE_27__["ɵɵsetComponentScope"](_image_list_field_component__WEBPACK_IMPORTED_MODULE_14__.ImageListFieldComponent, [_angular_common__WEBPACK_IMPORTED_MODULE_28__.NgForOf, _angular_common__WEBPACK_IMPORTED_MODULE_28__.NgIf, _angular_material_core__WEBPACK_IMPORTED_MODULE_30__.MatRipple, _angular_material_form_field__WEBPACK_IMPORTED_MODULE_31__.MatFormField, _angular_material_tooltip__WEBPACK_IMPORTED_MODULE_35__.MatTooltip, _angular_material_chips__WEBPACK_IMPORTED_MODULE_38__.MatChipGrid, _angular_material_chips__WEBPACK_IMPORTED_MODULE_38__.MatChipInput, _angular_material_chips__WEBPACK_IMPORTED_MODULE_38__.MatChipRemove, _angular_material_chips__WEBPACK_IMPORTED_MODULE_38__.MatChipRow, _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_23__.IconComponent, _components_src_lib_authenticated_image_directive__WEBPACK_IMPORTED_MODULE_26__.AuthenticatedImageDirective, _angular_material_progress_spinner__WEBPACK_IMPORTED_MODULE_40__.MatProgressSpinner], [_angular_common__WEBPACK_IMPORTED_MODULE_28__.AsyncPipe]);
_angular_core__WEBPACK_IMPORTED_MODULE_27__["ɵɵsetComponentScope"](_support_ticket_modal_component__WEBPACK_IMPORTED_MODULE_17__.SupportTicketModalComponent, [_angular_common__WEBPACK_IMPORTED_MODULE_28__.NgForOf, _angular_common__WEBPACK_IMPORTED_MODULE_28__.NgIf, _angular_forms__WEBPACK_IMPORTED_MODULE_29__["ɵNgNoValidate"], _angular_forms__WEBPACK_IMPORTED_MODULE_29__.DefaultValueAccessor, _angular_forms__WEBPACK_IMPORTED_MODULE_29__.NgControlStatus, _angular_forms__WEBPACK_IMPORTED_MODULE_29__.NgControlStatusGroup, _angular_forms__WEBPACK_IMPORTED_MODULE_29__.FormGroupDirective, _angular_forms__WEBPACK_IMPORTED_MODULE_29__.FormControlName, _angular_material_core__WEBPACK_IMPORTED_MODULE_30__.MatRipple, _angular_material_form_field__WEBPACK_IMPORTED_MODULE_31__.MatFormField, _angular_material_form_field__WEBPACK_IMPORTED_MODULE_31__.MatError, _angular_material_input__WEBPACK_IMPORTED_MODULE_32__.MatInput, _angular_material_select__WEBPACK_IMPORTED_MODULE_33__.MatSelect, _angular_material_core__WEBPACK_IMPORTED_MODULE_30__.MatOption, _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_23__.IconComponent, _angular_material_dialog__WEBPACK_IMPORTED_MODULE_41__.MatDialogClose, _angular_material_progress_spinner__WEBPACK_IMPORTED_MODULE_40__.MatProgressSpinner, _rich_text_input_component__WEBPACK_IMPORTED_MODULE_12__.RichTextInputComponent, _image_list_field_component__WEBPACK_IMPORTED_MODULE_14__.ImageListFieldComponent], [_angular_common__WEBPACK_IMPORTED_MODULE_28__.AsyncPipe]);
_angular_core__WEBPACK_IMPORTED_MODULE_27__["ɵɵsetComponentScope"](_recurrence_modal_component__WEBPACK_IMPORTED_MODULE_16__.RecurrenceModalComponent, [_angular_common__WEBPACK_IMPORTED_MODULE_28__.NgIf, _angular_forms__WEBPACK_IMPORTED_MODULE_29__.DefaultValueAccessor, _angular_forms__WEBPACK_IMPORTED_MODULE_29__.NumberValueAccessor, _angular_forms__WEBPACK_IMPORTED_MODULE_29__.NgControlStatus, _angular_forms__WEBPACK_IMPORTED_MODULE_29__.NgModel, _angular_material_core__WEBPACK_IMPORTED_MODULE_30__.MatRipple, _angular_material_form_field__WEBPACK_IMPORTED_MODULE_31__.MatFormField, _angular_material_form_field__WEBPACK_IMPORTED_MODULE_31__.MatSuffix, _angular_material_input__WEBPACK_IMPORTED_MODULE_32__.MatInput, _angular_material_select__WEBPACK_IMPORTED_MODULE_33__.MatSelect, _angular_material_core__WEBPACK_IMPORTED_MODULE_30__.MatOption, _angular_material_radio__WEBPACK_IMPORTED_MODULE_37__.MatRadioGroup, _angular_material_radio__WEBPACK_IMPORTED_MODULE_37__.MatRadioButton, _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_23__.IconComponent, _angular_material_dialog__WEBPACK_IMPORTED_MODULE_41__.MatDialogClose, _date_field_component__WEBPACK_IMPORTED_MODULE_3__.DateFieldComponent], []);
_angular_core__WEBPACK_IMPORTED_MODULE_27__["ɵɵsetComponentScope"](_booking_rules_form_component__WEBPACK_IMPORTED_MODULE_19__.BookingRulesFormComponent, [_angular_common__WEBPACK_IMPORTED_MODULE_28__.NgForOf, _angular_common__WEBPACK_IMPORTED_MODULE_28__.NgIf, _angular_forms__WEBPACK_IMPORTED_MODULE_29__.DefaultValueAccessor, _angular_forms__WEBPACK_IMPORTED_MODULE_29__.NgControlStatus, _angular_forms__WEBPACK_IMPORTED_MODULE_29__.NgControlStatusGroup, _angular_forms__WEBPACK_IMPORTED_MODULE_29__.NgModel, _angular_forms__WEBPACK_IMPORTED_MODULE_29__.FormGroupDirective, _angular_forms__WEBPACK_IMPORTED_MODULE_29__.FormControlName, _angular_forms__WEBPACK_IMPORTED_MODULE_29__.FormGroupName, _angular_material_form_field__WEBPACK_IMPORTED_MODULE_31__.MatFormField, _angular_material_form_field__WEBPACK_IMPORTED_MODULE_31__.MatError, _angular_material_input__WEBPACK_IMPORTED_MODULE_32__.MatInput, _angular_material_select__WEBPACK_IMPORTED_MODULE_33__.MatSelect, _angular_material_core__WEBPACK_IMPORTED_MODULE_30__.MatOption, _angular_material_tooltip__WEBPACK_IMPORTED_MODULE_35__.MatTooltip, _angular_material_checkbox__WEBPACK_IMPORTED_MODULE_36__.MatCheckbox, _date_field_component__WEBPACK_IMPORTED_MODULE_3__.DateFieldComponent, _duration_field_component__WEBPACK_IMPORTED_MODULE_4__.DurationFieldComponent, _item_list_field_component__WEBPACK_IMPORTED_MODULE_8__.ItemListFieldComponent], [_angular_common__WEBPACK_IMPORTED_MODULE_28__.AsyncPipe, _angular_common__WEBPACK_IMPORTED_MODULE_28__.DatePipe]);

/***/ }),

/***/ 65347:
/*!*****************************************************************!*\
  !*** ./libs/form-fields/src/lib/host-select-field.component.ts ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   HostSelectFieldComponent: () => (/* binding */ HostSelectFieldComponent)
/* harmony export */ });
/* harmony import */ var _home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 89204);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @angular/forms */ 34456);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var libs_users_src_lib_staff_fn__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! libs/users/src/lib/staff.fn */ 2372);
/* harmony import */ var libs_users_src_lib_user_class__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! libs/users/src/lib/user.class */ 93693);
/* harmony import */ var libs_calendar_src_lib_calendar_fn__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! libs/calendar/src/lib/calendar.fn */ 458);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! rxjs */ 71536);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! rxjs */ 11506);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! rxjs/operators */ 71963);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! rxjs/operators */ 29314);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! rxjs/operators */ 35443);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! rxjs/operators */ 7841);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! rxjs/operators */ 33602);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _angular_material_form_field__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @angular/material/form-field */ 24950);
/* harmony import */ var _angular_material_select__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @angular/material/select */ 25175);
/* harmony import */ var _angular_material_core__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @angular/material/core */ 74646);















function HostSelectFieldComponent_mat_option_2_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "mat-option", 5)(1, "div", 6)(2, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](4, "span", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](5, "\u00A0|\u00A0");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](6, "div", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](7);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]()()();
  }
  if (rf & 2) {
    const user_r1 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("value", user_r1 == null ? null : user_r1.email);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtextInterpolate"](user_r1.name);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtextInterpolate"](user_r1 == null ? null : user_r1.email);
  }
}
function HostSelectFieldComponent_ng_container_6_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementContainer"](0);
  }
}
class HostSelectFieldComponent {
  constructor() {
    this.users = (0,rxjs__WEBPACK_IMPORTED_MODULE_6__.of)(1).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.switchMap)(() => (0,libs_calendar_src_lib_calendar_fn__WEBPACK_IMPORTED_MODULE_4__.queryCalendars)().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.catchError)(_ => (0,rxjs__WEBPACK_IMPORTED_MODULE_6__.of)([])))), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.switchMap)(list => (0,rxjs__WEBPACK_IMPORTED_MODULE_9__.zip)(...list.map(_ => (0,libs_users_src_lib_staff_fn__WEBPACK_IMPORTED_MODULE_2__.showStaff)(_.id).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.catchError)(_ => (0,rxjs__WEBPACK_IMPORTED_MODULE_6__.of)(null)))))), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.map)(_ => (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.unique)([(0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.currentUser)(), ..._], 'email')), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_11__.shareReplay)(1));
    this.disabled = false;
    this.registerOnChange = fn => this._onChange = fn;
    this.registerOnTouched = fn => this._onTouch = fn;
    this.setDisabledState = s => this.disabled = s;
  }
  /**
   * Update the form field value
   * @param new_value New value to set on the form field
   */
  setValue(email) {
    var _this = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      const users = yield _this.users.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.take)(1)).toPromise();
      _this.item = users?.find(_ => _.email === email);
      if (!_this.item) _this.item = new libs_users_src_lib_user_class__WEBPACK_IMPORTED_MODULE_3__.User({
        email
      });
      if (_this._onChange) _this._onChange(_this.item);
    })();
  }
  /**
   * Update local value when form control value is changed
   * @param value The new value for the component
   */
  writeValue(value) {
    this.item = value;
    if (!value?.email) this.item = (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.currentUser)();
  }
  static #_ = this.ɵfac = function HostSelectFieldComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || HostSelectFieldComponent)();
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵdefineComponent"]({
    type: HostSelectFieldComponent,
    selectors: [["host-select-field"]],
    features: [_angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵProvidersFeature"]([{
      provide: _angular_forms__WEBPACK_IMPORTED_MODULE_13__.NG_VALUE_ACCESSOR,
      useExisting: (0,_angular_core__WEBPACK_IMPORTED_MODULE_5__.forwardRef)(() => HostSelectFieldComponent),
      multi: true
    }])],
    decls: 8,
    vars: 9,
    consts: () => {
      let i18n_0;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_5838187330179805553$$LIBS_FORM_FIELDS_SRC_LIB_HOST_SELECT_FIELD_COMPONENT_TS_0 = goog.getMsg("Host is required");
        i18n_0 = MSG_EXTERNAL_5838187330179805553$$LIBS_FORM_FIELDS_SRC_LIB_HOST_SELECT_FIELD_COMPONENT_TS_0;
      } else {
        i18n_0 = $localize`:␟1cdb1c4c30b26c94c19e88ecdbde0e55665504d4␟5838187330179805553:Host is required`;
      }
      return [i18n_0, ["appearance", "outline", 1, "w-full"], [3, "ngModelChange", "ngModel", "disabled", "placeholder"], ["class", "leading-tight", 3, "value", 4, "ngFor", "ngForOf"], [4, "ngIf"], [1, "leading-tight", 3, "value"], [1, "flex", "flex-col"], [1, "hidden"], [1, "text-xs", "opacity-60"]];
    },
    template: function HostSelectFieldComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "mat-form-field", 1)(1, "mat-select", 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("ngModelChange", function HostSelectFieldComponent_Template_mat_select_ngModelChange_1_listener($event) {
          return ctx.setValue($event);
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](2, HostSelectFieldComponent_mat_option_2_Template, 8, 3, "mat-option", 3);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipe"](3, "async");
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](4, "mat-error");
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵi18n"](5, 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](6, HostSelectFieldComponent_ng_container_6_Template, 1, 0, "ng-container", 4);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipe"](7, "async");
      }
      if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngModel", ctx.item == null ? null : ctx.item.email)("disabled", ctx.disabled)("placeholder", (ctx.item == null ? null : ctx.item.email) ? ctx.item.name || ctx.item.email : "Select host");
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngForOf", _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipeBind1"](3, 5, ctx.users));
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](4);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngIf", _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipeBind1"](7, 7, ctx.users));
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_14__.NgForOf, _angular_common__WEBPACK_IMPORTED_MODULE_14__.NgIf, _angular_forms__WEBPACK_IMPORTED_MODULE_13__.NgControlStatus, _angular_forms__WEBPACK_IMPORTED_MODULE_13__.NgModel, _angular_material_form_field__WEBPACK_IMPORTED_MODULE_15__.MatFormField, _angular_material_form_field__WEBPACK_IMPORTED_MODULE_15__.MatError, _angular_material_select__WEBPACK_IMPORTED_MODULE_16__.MatSelect, _angular_material_core__WEBPACK_IMPORTED_MODULE_17__.MatOption, _angular_common__WEBPACK_IMPORTED_MODULE_14__.AsyncPipe]
  });
}

/***/ }),

/***/ 56864:
/*!****************************************************************!*\
  !*** ./libs/form-fields/src/lib/image-list-field.component.ts ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ImageListFieldComponent: () => (/* binding */ ImageListFieldComponent)
/* harmony export */ });
/* harmony import */ var _home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 89204);
/* harmony import */ var _angular_cdk_keycodes__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/cdk/keycodes */ 74879);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @angular/forms */ 34456);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! rxjs */ 90521);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! rxjs */ 68824);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! rxjs/operators */ 35443);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! rxjs/operators */ 33602);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var libs_components_src_lib_image_viewer_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! libs/components/src/lib/image-viewer.component */ 26821);
/* harmony import */ var _angular_cdk_clipboard__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @angular/cdk/clipboard */ 52352);
/* harmony import */ var _angular_material_dialog__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @angular/material/dialog */ 12587);














const _c0 = ["image_list"];
const _c1 = ["file_input"];
function ImageListFieldComponent_div_9_Template(rf, ctx) {
  if (rf & 1) {
    const _r2 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "div", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelement"](1, "img", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](2, "div", 19);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelement"](3, "div", 20);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](4, "div", 21)(5, "button", 22);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵlistener"]("click", function ImageListFieldComponent_div_9_Template_button_click_5_listener() {
      const url_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵrestoreView"](_r2).$implicit;
      const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵresetView"](ctx_r3.copyLink(url_r3));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](6, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](7, "link");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](8, "button", 22);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵlistener"]("click", function ImageListFieldComponent_div_9_Template_button_click_8_listener() {
      const url_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵrestoreView"](_r2).$implicit;
      const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵresetView"](ctx_r3.viewImage(url_r3));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](9, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](10, "visibility");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](11, "button", 22);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵlistener"]("click", function ImageListFieldComponent_div_9_Template_button_click_11_listener() {
      const url_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵrestoreView"](_r2).$implicit;
      const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵresetView"](ctx_r3.removeImage(url_r3));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](12, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](13, "close");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()()()()();
  }
  if (rf & 2) {
    const url_r3 = ctx.$implicit;
    const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵstyleProp"]("transform", "translate(-" + ctx_r3.offset + "00%)");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("source", url_r3);
  }
}
function ImageListFieldComponent_div_10_mat_progress_spinner_1_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelement"](0, "mat-progress-spinner", 27);
  }
  if (rf & 2) {
    const item_r6 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]().$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("value", item_r6.progress)("diameter", 64);
  }
}
function ImageListFieldComponent_div_10_app_icon_2_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "app-icon", 28);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](1, "warning");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
  }
}
function ImageListFieldComponent_div_10_div_3_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "div", 29)(1, "app-icon", 30);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](2, "refresh");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()();
  }
}
function ImageListFieldComponent_div_10_Template(rf, ctx) {
  if (rf & 1) {
    const _r5 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "div", 23);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵlistener"]("click", function ImageListFieldComponent_div_10_Template_div_click_0_listener() {
      const item_r6 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵrestoreView"](_r5).$implicit;
      const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵresetView"](ctx_r3.retryUpload(item_r6));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](1, ImageListFieldComponent_div_10_mat_progress_spinner_1_Template, 1, 2, "mat-progress-spinner", 24)(2, ImageListFieldComponent_div_10_app_icon_2_Template, 2, 0, "app-icon", 25)(3, ImageListFieldComponent_div_10_div_3_Template, 3, 0, "div", 26);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const item_r6 = ctx.$implicit;
    const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵstyleProp"]("transform", "translate(-" + ctx_r3.offset + "00%)");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("matTooltip", item_r6.error);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", !item_r6.error);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", item_r6.error);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", item_r6.error);
  }
}
function ImageListFieldComponent_button_12_Template(rf, ctx) {
  if (rf & 1) {
    const _r7 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "button", 31);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵlistener"]("click", function ImageListFieldComponent_button_12_Template_button_click_0_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵrestoreView"](_r7);
      const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵresetView"](ctx_r3.offset = ctx_r3.offset - 1);
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](1, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](2, "chevron_left");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("disabled", ctx_r3.offset === 0);
  }
}
function ImageListFieldComponent_button_13_Template(rf, ctx) {
  if (rf & 1) {
    const _r8 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "button", 32);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵlistener"]("click", function ImageListFieldComponent_button_13_Template_button_click_0_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵrestoreView"](_r8);
      const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵresetView"](ctx_r3.offset = ctx_r3.offset + 1);
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](1, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](2, "chevron_right");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("disabled", ctx_r3.offset >= ctx_r3.length - ctx_r3.view_space);
  }
}
function ImageListFieldComponent_mat_chip_row_17_Template(rf, ctx) {
  if (rf & 1) {
    const _r9 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "mat-chip-row", 33);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵlistener"]("removed", function ImageListFieldComponent_mat_chip_row_17_Template_mat_chip_row_removed_0_listener() {
      const item_r10 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵrestoreView"](_r9).$implicit;
      const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵresetView"](ctx_r3.removeImage(item_r10));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](1, "div", 34);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](3, "button", 35)(4, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](5, "cancel");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()()();
  }
  if (rf & 2) {
    const item_r10 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtextInterpolate"](item_r10);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵattribute"]("aria-label", "Remove " + item_r10);
  }
}
class ImageListFieldComponent extends _placeos_common__WEBPACK_IMPORTED_MODULE_1__.AsyncHandler {
  get length() {
    return this.list.length + this._upload_list.getValue().length + 1;
  }
  constructor(_clipboard, _uploads, _dialog) {
    super();
    this._clipboard = _clipboard;
    this._uploads = _uploads;
    this._dialog = _dialog;
    /** List of images */
    this.list = [];
    /** List of images */
    this.upload_ids = new rxjs__WEBPACK_IMPORTED_MODULE_4__.BehaviorSubject([]);
    this._upload_list = new rxjs__WEBPACK_IMPORTED_MODULE_4__.BehaviorSubject([]);
    this.upload_list = this._upload_list.asObservable();
    this.offset = 0;
    this.view_space = 0;
    this.separators = [_angular_cdk_keycodes__WEBPACK_IMPORTED_MODULE_5__.COMMA, _angular_cdk_keycodes__WEBPACK_IMPORTED_MODULE_5__.ENTER];
    this.uploads = (0,rxjs__WEBPACK_IMPORTED_MODULE_6__.combineLatest)([this.upload_list, this.upload_ids]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.map)(([list, ids]) => list.filter(i => ids.includes(i.id))));
    this.registerOnChange = fn => this._onChange = fn;
    this.registerOnTouched = fn => this._onTouch = fn;
  }
  ngAfterViewInit() {
    this.timeout('init_view_space', () => {
      const box = this._list_el.nativeElement.getBoundingClientRect();
      this.view_space = Math.floor(box.width / 152);
    }, 100);
    this.subscription('upload_changes', this.upload_list.subscribe(list => {
      const id_list = this.upload_ids.getValue();
      for (const id of id_list) {
        const item = list.find(_ => _.id === id);
        if (item && item.progress >= 100) {
          this.addImageUrl(item.link);
          this.upload_ids.next(this.upload_ids.getValue().filter(_ => _ !== id));
        }
      }
    }));
  }
  copyLink(url) {
    this._clipboard.copy(url);
    (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.notifyInfo)('Copied image URL to clipboard');
  }
  viewImage(url) {
    this._dialog.open(libs_components_src_lib_image_viewer_component__WEBPACK_IMPORTED_MODULE_2__.ImageViewerComponent, {
      data: url
    });
  }
  removeImage(url) {
    this.setValue(this.list.filter(_ => _ !== url));
  }
  addImage(event) {
    if (!event.value) return;
    this.setValue((0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.unique)([...this.list, event.value]));
    event.chipInput.inputElement.value = '';
  }
  addImageUrl(url) {
    this.setValue((0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.unique)([...this.list, url]));
  }
  retryUpload(item) {
    if (item.error) {
      item.error = null;
      item.upload.resume();
    }
  }
  uploadImages(event) {
    var _this = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      const element = event.target;
      /* istanbul ignore else */
      if (element?.files) {
        const files = element.files;
        /* istanbul ignore else */
        if (files.length) {
          _this.interval('update_status', () => _this._updateUploadHistory());
          for (let i = 0; i < files.length; i++) {
            const id = yield _this._uploads.uploadFileWithPermissions(files[i]);
            _this.upload_ids.next([..._this.upload_ids.getValue(), id]);
            _this._file_input.nativeElement.value = '';
          }
        }
      }
    })();
  }
  setValue(value) {
    this.list = value;
    if (this._onChange) this._onChange(value);
  }
  /**
   * Update local value when form control value is changed
   * @param value The new value for the component
   */
  writeValue(value) {
    this.list = value || [];
  }
  _updateUploadHistory() {
    var _this2 = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      const list = _this2.upload_ids.getValue();
      if (list.length === 0) return;
      const global_list = yield _this2._uploads.upload_list.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.take)(1)).toPromise();
      const new_list = global_list.filter(_ => list.find(i => i === _.id));
      const done_list = new_list.filter(file => file.progress >= 100);
      _this2._upload_list.next(new_list);
      done_list.forEach(i => delete i.upload);
      if (done_list.length >= list.length) _this2.clearInterval('update_status');
    })();
  }
  static #_ = this.ɵfac = function ImageListFieldComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || ImageListFieldComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵdirectiveInject"](_angular_cdk_clipboard__WEBPACK_IMPORTED_MODULE_9__.Clipboard), _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵdirectiveInject"](_placeos_common__WEBPACK_IMPORTED_MODULE_1__.UploadsService), _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵdirectiveInject"](_angular_material_dialog__WEBPACK_IMPORTED_MODULE_10__.MatDialog));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵdefineComponent"]({
    type: ImageListFieldComponent,
    selectors: [["image-list-field"]],
    viewQuery: function ImageListFieldComponent_Query(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵviewQuery"](_c0, 5);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵviewQuery"](_c1, 5);
      }
      if (rf & 2) {
        let _t;
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵloadQuery"]()) && (ctx._list_el = _t.first);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵloadQuery"]()) && (ctx._file_input = _t.first);
      }
    },
    features: [_angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵProvidersFeature"]([{
      provide: _angular_forms__WEBPACK_IMPORTED_MODULE_11__.NG_VALUE_ACCESSOR,
      useExisting: (0,_angular_core__WEBPACK_IMPORTED_MODULE_3__.forwardRef)(() => ImageListFieldComponent),
      multi: true
    }]), _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵInheritDefinitionFeature"]],
    decls: 19,
    vars: 12,
    consts: () => {
      let i18n_0;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_7586116958417863153$$LIBS_FORM_FIELDS_SRC_LIB_IMAGE_LIST_FIELD_COMPONENT_TS_0 = goog.getMsg("Add image via URL");
        i18n_0 = MSG_EXTERNAL_7586116958417863153$$LIBS_FORM_FIELDS_SRC_LIB_IMAGE_LIST_FIELD_COMPONENT_TS_0;
      } else {
        i18n_0 = $localize`:␟dc952a36d53a7092578b8706e3c6e28fd59866bf␟7586116958417863153:Add image via URL`;
      }
      let i18n_1;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_889671581456916004$$LIBS_FORM_FIELDS_SRC_LIB_IMAGE_LIST_FIELD_COMPONENT_TS_1 = goog.getMsg("Upload Image(s)");
        i18n_1 = MSG_EXTERNAL_889671581456916004$$LIBS_FORM_FIELDS_SRC_LIB_IMAGE_LIST_FIELD_COMPONENT_TS_1;
      } else {
        i18n_1 = $localize`:␟3f0243e1118dafecaa05696a3dffcbfb83295f9b␟889671581456916004:Upload Image(s)`;
      }
      return [["image_list", ""], ["file_input", ""], ["chipList", ""], i18n_1, ["images", "", 1, "space-x-2", "py-2", "overflow-hidden", "mb-2", "w-full", "flex", "items-center", "relative", 3, "resize"], ["image", "", 1, "relative", "rounded", "border-2", "border-base-200", "border-dashed", "flex-shrink-0", "flex", "flex-col", "items-center", "justify-center", "h-32", "w-36", "hover:bg-base-content/10", ":bg-base-100/10", "cursor-pointer"], [1, "text-4xl", "opacity-60"], [1, "opacity-60"], ["type", "file", 1, "absolute", "inset-0", "opacity-0", "h-32", "w-32", "cursor-pointer", 3, "change"], ["image", "", "class", "bg-center bg-cover h-32 w-36 relative rounded overflow-hidden flex-shrink-0 bg-base-200", 3, "transform", 4, "ngFor", "ngForOf"], ["image", "", "class", "bg-center bg-cover h-32 w-36 rounded border border-base-content/10 /5 bg-base-200  flex items-center justify-center flex-shrink-0", 3, "transform", "matTooltip", "click", 4, "ngFor", "ngForOf"], ["icon", "", "matRipple", "", "class", "absolute top-1/2 left-0 transform -translate-y-1/2 bg-base-100", 3, "disabled", "click", 4, "ngIf"], ["icon", "", "matRipple", "", "class", "absolute top-1/2 right-0 transform -translate-y-1/2 bg-base-100", 3, "disabled", "click", 4, "ngIf"], ["appearance", "outline", 1, "w-full"], ["aria-label", "Image List"], [3, "removed", 4, "ngFor", "ngForOf"], ["placeholder", i18n_0, 3, "matChipInputTokenEnd", "matChipInputFor", "matChipInputSeparatorKeyCodes", "matChipInputAddOnBlur"], ["image", "", 1, "bg-center", "bg-cover", "h-32", "w-36", "relative", "rounded", "overflow-hidden", "flex-shrink-0", "bg-base-200"], ["auth", "", 1, "object-contain", "absolute", "top-1/2", "left-1/2", "-translate-x-1/2", "-translate-y-1/2", "z-10", "pointer-events-none", 3, "source"], ["overlay", "", 1, "absolute", "inset-0", "text-base-100", "z-20"], ["bg", "", 1, "absolute", "inset-0", "opacity-0", "bg-black"], ["actions", "", 1, "absolute", "top-0", "left-0", "right-0", "flex", "items-center", "justify-center", "space-x-2", "opacity-0"], ["icon", "", 3, "click"], ["image", "", 1, "bg-center", "bg-cover", "h-32", "w-36", "rounded", "border", "border-base-content/10", "/5", "bg-base-200", "flex", "items-center", "justify-center", "flex-shrink-0", 3, "click", "matTooltip"], ["mode", "determinate", 3, "value", "diameter", 4, "ngIf"], ["class", "text-error text-6xl", 4, "ngIf"], ["overlay", "", "class", "absolute inset-0 hover:bg-base-content hover:bg-opacity-50 text-base-100 flex items-center justify-center", 4, "ngIf"], ["mode", "determinate", 3, "value", "diameter"], [1, "text-error", "text-6xl"], ["overlay", "", 1, "absolute", "inset-0", "hover:bg-base-content", "hover:bg-opacity-50", "text-base-100", "flex", "items-center", "justify-center"], [1, "text-3xl", "opacity-0"], ["icon", "", "matRipple", "", 1, "absolute", "top-1/2", "left-0", "transform", "-translate-y-1/2", "bg-base-100", 3, "click", "disabled"], ["icon", "", "matRipple", "", 1, "absolute", "top-1/2", "right-0", "transform", "-translate-y-1/2", "bg-base-100", 3, "click", "disabled"], [3, "removed"], [1, "truncate", "max-w-md"], ["matChipRemove", ""]];
    },
    template: function ImageListFieldComponent_Template(rf, ctx) {
      if (rf & 1) {
        const _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵgetCurrentView"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "div", 4, 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵlistener"]("resize", function ImageListFieldComponent_Template_div_resize_0_listener() {
          _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵrestoreView"](_r1);
          return _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵresetView"](ctx.ngAfterViewInit());
        }, false, _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵresolveWindow"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](2, "div", 5)(3, "app-icon", 6);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](4, "add");
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](5, "p", 7);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵi18n"](6, 3);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](7, "input", 8, 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵlistener"]("change", function ImageListFieldComponent_Template_input_change_7_listener($event) {
          _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵrestoreView"](_r1);
          return _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵresetView"](ctx.uploadImages($event));
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](9, ImageListFieldComponent_div_9_Template, 14, 3, "div", 9)(10, ImageListFieldComponent_div_10_Template, 4, 6, "div", 10);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipe"](11, "async");
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](12, ImageListFieldComponent_button_12_Template, 3, 1, "button", 11)(13, ImageListFieldComponent_button_13_Template, 3, 1, "button", 12);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](14, "mat-form-field", 13)(15, "mat-chip-grid", 14, 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](17, ImageListFieldComponent_mat_chip_row_17_Template, 6, 2, "mat-chip-row", 15);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](18, "input", 16);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵlistener"]("matChipInputTokenEnd", function ImageListFieldComponent_Template_input_matChipInputTokenEnd_18_listener($event) {
          _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵrestoreView"](_r1);
          return _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵresetView"](ctx.addImage($event));
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()();
      }
      if (rf & 2) {
        const chipList_r11 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵreference"](16);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵstyleProp"]("transform", "translate(-" + ctx.offset + "00%)");
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](7);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngForOf", ctx.list);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngForOf", _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipeBind1"](11, 10, ctx.uploads));
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", ctx.length > ctx.view_space);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", ctx.length > ctx.view_space);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](4);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngForOf", ctx.list);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("matChipInputFor", chipList_r11)("matChipInputSeparatorKeyCodes", ctx.separators)("matChipInputAddOnBlur", true);
      }
    },
    styles: ["[_nghost-%COMP%] {\n                width: 100%;\n            }\n\n            [overlay][_ngcontent-%COMP%] {\n                transition: background 200ms;\n            }\n\n            [image][_ngcontent-%COMP%]:hover   [actions][_ngcontent-%COMP%], \n   [image][_ngcontent-%COMP%]:hover    > app-icon[_ngcontent-%COMP%] {\n                opacity: 1 !important;\n            }\n\n            [image][_ngcontent-%COMP%]:hover   [bg][_ngcontent-%COMP%] {\n                opacity: 0.4 !important;\n            }\n\n            [actions][_ngcontent-%COMP%], \n   [image][_ngcontent-%COMP%]    > app-icon[_ngcontent-%COMP%] {\n                transition: opacity 200ms;\n            }\n\n            [image][_ngcontent-%COMP%] {\n                transition: transform 200ms;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImltYWdlLWxpc3QtZmllbGQuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxXQUFXO1lBQ2Y7O1lBRUE7Z0JBQ0ksNEJBQTRCO1lBQ2hDOztZQUVBOztnQkFFSSxxQkFBcUI7WUFDekI7O1lBRUE7Z0JBQ0ksdUJBQXVCO1lBQzNCOztZQUVBOztnQkFFSSx5QkFBeUI7WUFDN0I7O1lBRUE7Z0JBQ0ksMkJBQTJCO1lBQy9CIiwiZmlsZSI6ImltYWdlLWxpc3QtZmllbGQuY29tcG9uZW50LnRzIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICA6aG9zdCB7XG4gICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIFtvdmVybGF5XSB7XG4gICAgICAgICAgICAgICAgdHJhbnNpdGlvbjogYmFja2dyb3VuZCAyMDBtcztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgW2ltYWdlXTpob3ZlciBbYWN0aW9uc10sXG4gICAgICAgICAgICBbaW1hZ2VdOmhvdmVyID4gYXBwLWljb24ge1xuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDEgIWltcG9ydGFudDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgW2ltYWdlXTpob3ZlciBbYmddIHtcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLjQgIWltcG9ydGFudDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgW2FjdGlvbnNdLFxuICAgICAgICAgICAgW2ltYWdlXSA+IGFwcC1pY29uIHtcbiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uOiBvcGFjaXR5IDIwMG1zO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBbaW1hZ2VdIHtcbiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uOiB0cmFuc2Zvcm0gMjAwbXM7XG4gICAgICAgICAgICB9XG4gICAgICAgICJdfQ== */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvZm9ybS1maWVsZHMvc3JjL2xpYi9pbWFnZS1saXN0LWZpZWxkLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1lBQ1k7Z0JBQ0ksV0FBVztZQUNmOztZQUVBO2dCQUNJLDRCQUE0QjtZQUNoQzs7WUFFQTs7Z0JBRUkscUJBQXFCO1lBQ3pCOztZQUVBO2dCQUNJLHVCQUF1QjtZQUMzQjs7WUFFQTs7Z0JBRUkseUJBQXlCO1lBQzdCOztZQUVBO2dCQUNJLDJCQUEyQjtZQUMvQjs7QUFFWix3dENBQXd0QyIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgOmhvc3Qge1xuICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBbb3ZlcmxheV0ge1xuICAgICAgICAgICAgICAgIHRyYW5zaXRpb246IGJhY2tncm91bmQgMjAwbXM7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIFtpbWFnZV06aG92ZXIgW2FjdGlvbnNdLFxuICAgICAgICAgICAgW2ltYWdlXTpob3ZlciA+IGFwcC1pY29uIHtcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAxICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIFtpbWFnZV06aG92ZXIgW2JnXSB7XG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMC40ICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIFthY3Rpb25zXSxcbiAgICAgICAgICAgIFtpbWFnZV0gPiBhcHAtaWNvbiB7XG4gICAgICAgICAgICAgICAgdHJhbnNpdGlvbjogb3BhY2l0eSAyMDBtcztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgW2ltYWdlXSB7XG4gICAgICAgICAgICAgICAgdHJhbnNpdGlvbjogdHJhbnNmb3JtIDIwMG1zO1xuICAgICAgICAgICAgfVxuICAgICAgICAiXSwic291cmNlUm9vdCI6IiJ9 */"]
  });
}

/***/ }),

/***/ 20212:
/*!***************************************************************!*\
  !*** ./libs/form-fields/src/lib/item-list-field.component.ts ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ItemListFieldComponent: () => (/* binding */ ItemListFieldComponent),
/* harmony export */   addChipItem: () => (/* binding */ addChipItem),
/* harmony export */   removeChipItem: () => (/* binding */ removeChipItem)
/* harmony export */ });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/forms */ 34456);
/* harmony import */ var _angular_cdk_keycodes__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/cdk/keycodes */ 74879);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _angular_material_form_field__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/material/form-field */ 24950);
/* harmony import */ var _angular_material_chips__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @angular/material/chips */ 12772);
/* harmony import */ var _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../components/src/lib/icon.component */ 69434);








function ItemListFieldComponent_mat_chip_row_3_Template(rf, ctx) {
  if (rf & 1) {
    const _r2 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "mat-chip-row", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("removed", function ItemListFieldComponent_mat_chip_row_3_Template_mat_chip_row_removed_0_listener() {
      const item_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r2).$implicit;
      const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵresetView"](ctx_r3.remove(item_r3));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "span", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](3, "button", 7)(4, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](5, "cancel");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]()()();
  }
  if (rf & 2) {
    const item_r3 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate"](item_r3);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵattribute"]("aria-label", "Remove " + item_r3);
  }
}
/**
 * Add a tag to the list of tags for the item
 * @param event Input event
 */
function addChipItem(control, event) {
  if (!control) return;
  const input = event.input;
  const value = event.value;
  const item_list = control.value;
  if (value.includes(',')) {
    const list = value.split(',');
    for (const item of list) {
      if ((item || '').trim()) {
        item_list.push(item.trim());
        control.setValue(item_list);
      }
    }
  } else {
    if ((value || '').trim()) {
      item_list.push(value.trim());
      control.setValue(item_list);
    }
  }
  // Reset the input value
  if (input) {
    input.value = '';
  }
}
/**
 * Remove tag from the list
 * @param existing_tag Tag to remove
 */
function removeChipItem(control, item) {
  if (!control) {
    return;
  }
  const item_list = control.value;
  const index = item_list.indexOf(item);
  if (index >= 0) {
    item_list.splice(index, 1);
    control.setValue(item_list);
  }
}
class ItemListFieldComponent {
  constructor() {
    this.separators = [_angular_cdk_keycodes__WEBPACK_IMPORTED_MODULE_2__.ENTER, _angular_cdk_keycodes__WEBPACK_IMPORTED_MODULE_2__.COMMA];
    this.placeholder = '';
    /** List of items stored */
    this.value = [];
    /**
     * Add the `step` to the current value
     */
    this.add = e => addChipItem({
      value: this.value,
      setValue: i => this.setValue(i)
    }, e);
    /** Remove the `step` from the current value */
    this.remove = item => removeChipItem({
      value: this.value,
      setValue: i => this.setValue(i)
    }, item);
  }
  /**
   * Update the form field value
   * @param new_value New value to set on the form field
   */
  setValue(new_value) {
    this.value = new_value;
    /* istanbul ignore else */
    if (this._onChange) {
      this._onChange(new_value);
    }
  }
  /**
   * Update local value when form control value is changed
   * @param value The new value for the component
   */
  writeValue(value) {
    this.value = value;
  }
  /* istanbul ignore next */
  /**
   * Registers a callback function that is called when the control's value changes in the UI.
   * @param fn The callback function to register
   */
  registerOnChange(fn) {
    this._onChange = fn;
  }
  /* istanbul ignore next */
  /**
   * Registers a callback function is called by the forms API on initialization to update the form model on blur.
   * @param fn The callback function to register
   */
  registerOnTouched(fn) {
    this._onTouch = fn;
  }
  static #_ = this.ɵfac = function ItemListFieldComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || ItemListFieldComponent)();
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdefineComponent"]({
    type: ItemListFieldComponent,
    selectors: [["item-list-field"]],
    inputs: {
      separators: "separators",
      placeholder: "placeholder"
    },
    features: [_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵProvidersFeature"]([{
      provide: _angular_forms__WEBPACK_IMPORTED_MODULE_3__.NG_VALUE_ACCESSOR,
      /* istanbul ignore next */
      useExisting: (0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.forwardRef)(() => ItemListFieldComponent),
      multi: true
    }])],
    decls: 5,
    vars: 5,
    consts: [["chipList", ""], ["appearance", "outline", 1, "w-full"], ["aria-label", "Zone Tags"], [3, "removed", 4, "ngFor", "ngForOf"], [3, "matChipInputTokenEnd", "placeholder", "matChipInputFor", "matChipInputSeparatorKeyCodes", "matChipInputAddOnBlur"], [3, "removed"], [1, "truncate", "max-w-md"], ["matChipRemove", ""]],
    template: function ItemListFieldComponent_Template(rf, ctx) {
      if (rf & 1) {
        const _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵgetCurrentView"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "mat-form-field", 1)(1, "mat-chip-grid", 2, 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](3, ItemListFieldComponent_mat_chip_row_3_Template, 6, 2, "mat-chip-row", 3);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](4, "input", 4);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("matChipInputTokenEnd", function ItemListFieldComponent_Template_input_matChipInputTokenEnd_4_listener($event) {
          _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r1);
          return _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵresetView"](ctx.add($event));
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]()();
      }
      if (rf & 2) {
        const chipList_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵreference"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngForOf", ctx.value);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("placeholder", ctx.placeholder || "User groups...")("matChipInputFor", chipList_r5)("matChipInputSeparatorKeyCodes", ctx.separators)("matChipInputAddOnBlur", true);
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_4__.NgForOf, _angular_material_form_field__WEBPACK_IMPORTED_MODULE_5__.MatFormField, _angular_material_chips__WEBPACK_IMPORTED_MODULE_6__.MatChipGrid, _angular_material_chips__WEBPACK_IMPORTED_MODULE_6__.MatChipInput, _angular_material_chips__WEBPACK_IMPORTED_MODULE_6__.MatChipRemove, _angular_material_chips__WEBPACK_IMPORTED_MODULE_6__.MatChipRow, _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_0__.IconComponent]
  });
}

/***/ }),

/***/ 12863:
/*!*****************************************************!*\
  !*** ./libs/form-fields/src/lib/place-user.pipe.ts ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   PlaceUserPipe: () => (/* binding */ PlaceUserPipe)
/* harmony export */ });
/* harmony import */ var _home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 89204);
/* harmony import */ var _users_src_lib_user_class__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../users/src/lib/user.class */ 93693);
/* harmony import */ var _placeos_ts_client__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @placeos/ts-client */ 35713);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/core */ 37580);




const USER_LIST = [];
const EMPTY_USER = new _users_src_lib_user_class__WEBPACK_IMPORTED_MODULE_1__.StaffUser();
class PlaceUserPipe {
  /**
   * Get details of the user with the given ID
   * @param user_id ID or Email of the user
   */
  transform(user_id) {
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      if (!user_id) return EMPTY_USER;
      let user = USER_LIST.find(({
        id,
        email
      }) => id === user_id || email === user_id);
      if (user) return user;
      user = yield (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_2__.showUser)(user_id).toPromise().catch(() => null);
      if (user) {
        user = new _users_src_lib_user_class__WEBPACK_IMPORTED_MODULE_1__.StaffUser(user);
        USER_LIST.push(user);
        console.log('Place User:', user);
        return user;
      }
      return EMPTY_USER;
    })();
  }
  static #_ = this.ɵfac = function PlaceUserPipe_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || PlaceUserPipe)();
  };
  static #_2 = this.ɵpipe = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵdefinePipe"]({
    name: "placeuser",
    type: PlaceUserPipe,
    pure: true
  });
}

/***/ }),

/***/ 83138:
/*!****************************************************************!*\
  !*** ./libs/form-fields/src/lib/recurrence-field.component.ts ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   RecurrenceFieldComponent: () => (/* binding */ RecurrenceFieldComponent)
/* harmony export */ });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @angular/forms */ 34456);
/* harmony import */ var libs_events_src_lib_helpers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! libs/events/src/lib/helpers */ 37420);
/* harmony import */ var _recurrence_modal_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./recurrence-modal.component */ 375);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! date-fns */ 56441);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! date-fns */ 28797);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! date-fns */ 34938);
/* harmony import */ var libs_common_src_lib_settings_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! libs/common/src/lib/settings.service */ 14233);
/* harmony import */ var _angular_material_dialog__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @angular/material/dialog */ 12587);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _angular_material_form_field__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @angular/material/form-field */ 24950);
/* harmony import */ var _angular_material_select__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @angular/material/select */ 25175);
/* harmony import */ var _angular_material_core__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @angular/material/core */ 74646);















function RecurrenceFieldComponent_mat_option_12_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "mat-option", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtextInterpolate1"](" ", ctx_r0.formatted_value, " ");
  }
}
class RecurrenceFieldComponent {
  constructor(_dialog, _settings) {
    this._dialog = _dialog;
    this._settings = _settings;
    /** Size of a single step */
    this.date = Date.now();
    this.value = {
      pattern: 'none'
    };
  }
  ngOnChanges(changes) {
    if (changes.date && this.date) {
      const date = new Date(this.date).getDate();
      const instance = Math.floor(date / 7) + (date % 7 ? 1 : 0);
      this.instance_of_month = `${instance}${instance === 2 ? 'nd' : instance === 3 ? 'rd' : 'th'}`;
      if (instance === 4 && date >= 25 || instance === 5) this.instance_of_month = 'Last';
      if (instance === 1) this.instance_of_month = 'First';
      this.value = {
        ...this.value,
        start: this.date,
        days_of_week: !this.value.pattern ? [new Date(this.date).getDay()] : this.value.days_of_week
      };
      this.setValue(this.value);
    }
  }
  get formatted_value() {
    return (0,libs_events_src_lib_helpers__WEBPACK_IMPORTED_MODULE_0__.formatRecurrence)(this.value);
  }
  /**
   * Update the form field value
   * @param new_value New value to set on the form field
   */
  setValue(new_value) {
    this.value = new_value;
    /* istanbul ignore else */
    if (this._onChange) {
      this._onChange(new_value);
    }
  }
  /**
   * Update local value when form control value is changed
   * @param value The new value for the component
   */
  writeValue(value) {
    this.value = value || {};
  }
  /* istanbul ignore next */
  /**
   * Registers a callback function that is called when the control's value changes in the UI.
   * @param fn The callback function to register
   */
  registerOnChange(fn) {
    this._onChange = fn;
  }
  /* istanbul ignore next */
  /**
   * Registers a callback function is called by the forms API on initialization to update the form model on blur.
   * @param fn The callback function to register
   */
  registerOnTouched(fn) {
    this._onTouch = fn;
  }
  openCustomRecurrenceModal() {
    if (!this.value.pattern) {
      this.value.days_of_week = [new Date(this.date).getDay()];
    }
    const ref = this._dialog.open(_recurrence_modal_component__WEBPACK_IMPORTED_MODULE_1__.RecurrenceModalComponent, {
      data: {
        value: this.value
      }
    });
    this.setValue({
      ...this.value,
      _pattern: 'none'
    });
    ref.afterClosed().subscribe(data => {
      this.setValue({
        ...(data || this.value),
        _pattern: data ? 'custom_display' : this.old_value
      });
    });
  }
  setSimple(pattern) {
    const day_of_week = new Date(this.date).getDay();
    const default_recurrence = this._settings.get('app.default_recurrence_period') || 180;
    this.old_value = this.value._pattern;
    if (pattern === 'none') {
      this.setValue({
        pattern: null,
        _pattern: 'none',
        days_of_week: [day_of_week]
      });
    } else if (pattern === 'daily') {
      this.setValue({
        pattern,
        _pattern: pattern,
        start: this.date,
        end: (0,date_fns__WEBPACK_IMPORTED_MODULE_4__.endOfDay)((0,date_fns__WEBPACK_IMPORTED_MODULE_5__.addDays)(this.date, default_recurrence)).valueOf(),
        days_of_week: [day_of_week],
        interval: 1
      });
    } else if (pattern === 'weekly') {
      this.setValue({
        pattern,
        _pattern: pattern,
        start: this.date,
        end: (0,date_fns__WEBPACK_IMPORTED_MODULE_4__.endOfDay)((0,date_fns__WEBPACK_IMPORTED_MODULE_5__.addDays)(this.date, default_recurrence)).valueOf(),
        days_of_week: [day_of_week],
        interval: 1
      });
    } else if (pattern === 'monthly') {
      this.setValue({
        pattern,
        _pattern: pattern,
        start: this.date,
        end: (0,date_fns__WEBPACK_IMPORTED_MODULE_4__.endOfDay)((0,date_fns__WEBPACK_IMPORTED_MODULE_5__.addDays)(this.date, default_recurrence)).valueOf(),
        days_of_week: [day_of_week],
        interval: 1
      });
    } else if (pattern === 'yearly') {
      this.setValue({
        pattern,
        _pattern: pattern,
        start: this.date,
        end: (0,date_fns__WEBPACK_IMPORTED_MODULE_6__.addYears)(this.date, 7).valueOf(),
        days_of_week: [day_of_week],
        interval: 1
      });
    }
  }
  static #_ = this.ɵfac = function RecurrenceFieldComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || RecurrenceFieldComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵdirectiveInject"](_angular_material_dialog__WEBPACK_IMPORTED_MODULE_7__.MatDialog), _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵdirectiveInject"](libs_common_src_lib_settings_service__WEBPACK_IMPORTED_MODULE_2__.SettingsService));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵdefineComponent"]({
    type: RecurrenceFieldComponent,
    selectors: [["recurrence-field"]],
    inputs: {
      date: "date"
    },
    features: [_angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵProvidersFeature"]([{
      provide: _angular_forms__WEBPACK_IMPORTED_MODULE_8__.NG_VALUE_ACCESSOR,
      /* istanbul ignore next */
      useExisting: (0,_angular_core__WEBPACK_IMPORTED_MODULE_3__.forwardRef)(() => RecurrenceFieldComponent),
      multi: true
    }]), _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵNgOnChangesFeature"]],
    decls: 15,
    vars: 11,
    consts: [["appearance", "outline", 1, "w-full"], ["placeholder", "Doesn't repeat", 3, "ngModelChange", "ngModel"], ["value", "none"], ["value", "daily"], ["value", "weekly"], ["value", "monthly"], ["value", "custom_display", 4, "ngIf"], ["value", "custom", 3, "click"], ["value", "custom_display"]],
    template: function RecurrenceFieldComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "mat-form-field", 0)(1, "mat-select", 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵlistener"]("ngModelChange", function RecurrenceFieldComponent_Template_mat_select_ngModelChange_1_listener($event) {
          return ctx.setSimple($event);
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](2, "mat-option", 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](3, "Doesn't repeat");
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](4, "mat-option", 3);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](5, "Daily");
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](6, "mat-option", 4);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](7);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipe"](8, "date");
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](9, "mat-option", 5);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](10);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipe"](11, "date");
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](12, RecurrenceFieldComponent_mat_option_12_Template, 2, 1, "mat-option", 6);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](13, "mat-option", 7);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵlistener"]("click", function RecurrenceFieldComponent_Template_mat_option_click_13_listener() {
          return ctx.openCustomRecurrenceModal();
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](14, " Custom... ");
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()()();
      }
      if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngModel", ctx.value._pattern);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](6);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtextInterpolate1"](" Weekly on ", _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipeBind2"](8, 5, ctx.date, "EEEE"), " ");
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtextInterpolate2"](" ", ctx.instance_of_month, " ", _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipeBind2"](11, 8, ctx.date, "EEEE"), " of Month ");
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", ctx.value._pattern === "custom_display");
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_9__.NgIf, _angular_forms__WEBPACK_IMPORTED_MODULE_8__.NgControlStatus, _angular_forms__WEBPACK_IMPORTED_MODULE_8__.NgModel, _angular_material_form_field__WEBPACK_IMPORTED_MODULE_10__.MatFormField, _angular_material_select__WEBPACK_IMPORTED_MODULE_11__.MatSelect, _angular_material_core__WEBPACK_IMPORTED_MODULE_12__.MatOption, _angular_common__WEBPACK_IMPORTED_MODULE_9__.DatePipe],
    styles: ["[value][_ngcontent-%COMP%] {\n                min-width: 3em;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlY3VycmVuY2UtZmllbGQuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxjQUFjO1lBQ2xCIiwiZmlsZSI6InJlY3VycmVuY2UtZmllbGQuY29tcG9uZW50LnRzIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICBbdmFsdWVdIHtcbiAgICAgICAgICAgICAgICBtaW4td2lkdGg6IDNlbTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl19 */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvZm9ybS1maWVsZHMvc3JjL2xpYi9yZWN1cnJlbmNlLWZpZWxkLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1lBQ1k7Z0JBQ0ksY0FBYztZQUNsQjs7QUFFWiw0WEFBNFgiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIFt2YWx1ZV0ge1xuICAgICAgICAgICAgICAgIG1pbi13aWR0aDogM2VtO1xuICAgICAgICAgICAgfVxuICAgICAgICAiXSwic291cmNlUm9vdCI6IiJ9 */"]
  });
}

/***/ }),

/***/ 375:
/*!****************************************************************!*\
  !*** ./libs/form-fields/src/lib/recurrence-modal.component.ts ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   RecurrenceModalComponent: () => (/* binding */ RecurrenceModalComponent)
/* harmony export */ });
/* harmony import */ var _angular_material_dialog__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/material/dialog */ 12587);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! date-fns */ 28797);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ 37580);



function RecurrenceModalComponent_h2_20_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "h2", 24);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](1, " Repeat on ");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
  }
}
function RecurrenceModalComponent_div_21_Template(rf, ctx) {
  if (rf & 1) {
    const _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 25)(1, "button", 26);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function RecurrenceModalComponent_div_21_Template_button_click_1_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r1);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵresetView"](ctx_r1.toggleDayOfWeek(0));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](2, " S ");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](3, "button", 26);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function RecurrenceModalComponent_div_21_Template_button_click_3_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r1);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵresetView"](ctx_r1.toggleDayOfWeek(1));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](4, " M ");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](5, "button", 26);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function RecurrenceModalComponent_div_21_Template_button_click_5_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r1);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵresetView"](ctx_r1.toggleDayOfWeek(2));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](6, " T ");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](7, "button", 26);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function RecurrenceModalComponent_div_21_Template_button_click_7_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r1);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵresetView"](ctx_r1.toggleDayOfWeek(3));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](8, " W ");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](9, "button", 26);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function RecurrenceModalComponent_div_21_Template_button_click_9_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r1);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵresetView"](ctx_r1.toggleDayOfWeek(4));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](10, " T ");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](11, "button", 26);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function RecurrenceModalComponent_div_21_Template_button_click_11_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r1);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵresetView"](ctx_r1.toggleDayOfWeek(5));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](12, " F ");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](13, "button", 26);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function RecurrenceModalComponent_div_21_Template_button_click_13_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵrestoreView"](_r1);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵresetView"](ctx_r1.toggleDayOfWeek(6));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](14, " S ");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵclassProp"]("inverse", !(ctx_r1.data.days_of_week == null ? null : ctx_r1.data.days_of_week.includes(0)));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵclassProp"]("inverse", !(ctx_r1.data.days_of_week == null ? null : ctx_r1.data.days_of_week.includes(1)));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵclassProp"]("inverse", !(ctx_r1.data.days_of_week == null ? null : ctx_r1.data.days_of_week.includes(2)));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵclassProp"]("inverse", !(ctx_r1.data.days_of_week == null ? null : ctx_r1.data.days_of_week.includes(3)));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵclassProp"]("inverse", !(ctx_r1.data.days_of_week == null ? null : ctx_r1.data.days_of_week.includes(4)));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵclassProp"]("inverse", !(ctx_r1.data.days_of_week == null ? null : ctx_r1.data.days_of_week.includes(5)));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵclassProp"]("inverse", !(ctx_r1.data.days_of_week == null ? null : ctx_r1.data.days_of_week.includes(6)));
  }
}
class RecurrenceModalComponent {
  constructor(_data) {
    this._data = _data;
    this.data = {
      ...this._data.value,
      end: this._data.value.end || (0,date_fns__WEBPACK_IMPORTED_MODULE_1__.addDays)(new Date(), 7).valueOf(),
      interval: this._data.value.interval || 1,
      pattern: this._data.value.pattern ? this._data.value.pattern : 'weekly',
      occurrences: this._data.value.occurrences || 1
    };
    this.ends_key = 'never';
  }
  toggleDayOfWeek(day) {
    if (!this.data.days_of_week) this.data.days_of_week = [];
    if (this.data.days_of_week.includes(day)) {
      this.data.days_of_week = this.data.days_of_week.filter(d => d !== day);
    } else this.data.days_of_week.push(day);
  }
  static #_ = this.ɵfac = function RecurrenceModalComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || RecurrenceModalComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdirectiveInject"](_angular_material_dialog__WEBPACK_IMPORTED_MODULE_2__.MAT_DIALOG_DATA));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({
    type: RecurrenceModalComponent,
    selectors: [["recurrence-modal"]],
    decls: 42,
    vars: 13,
    consts: [["btn", "", "icon", "", "mat-dialog-close", "", "matRipple", ""], [1, "p-4"], [1, "flex", "items-center", "space-x-2", "mb-4"], ["appearance", "outline", 1, "w-16"], ["matInput", "", "type", "number", 3, "ngModelChange", "ngModel"], ["appearance", "outline"], [3, "ngModelChange", "ngModel"], ["value", "daily"], ["value", "weekly"], ["value", "month_day"], ["for", "repeat-on", "class", "mb-2", 4, "ngIf"], ["class", "flex items-center space-x-2 mb-4", "name", "repeat-on", 4, "ngIf"], ["for", "ends-at"], ["name", "ends-at", 3, "ngModelChange", "ngModel"], [1, "flex", "items-center"], ["value", "never", 3, "click"], [1, "flex", "items-center", "space-x-2"], ["value", "on"], [3, "ngModelChange", "ngModel", "disabled"], ["value", "after"], ["matInput", "", "type", "number", 3, "ngModelChange", "ngModel", "disabled"], ["matSuffix", ""], [1, "px-4", "py-2", "flex", "items-center", "justify-end", "border-t", "border-base-200"], ["btn", "", "matRipple", "", 1, "w-32", 3, "click", "mat-dialog-close"], ["for", "repeat-on", 1, "mb-2"], ["name", "repeat-on", 1, "flex", "items-center", "space-x-2", "mb-4"], ["btn", "", "matRipple", "", 1, "w-12", 3, "click"]],
    template: function RecurrenceModalComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "header")(1, "h2");
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](2, "Custom Recurrence");
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](3, "button", 0)(4, "app-icon");
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](5, "close");
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()()();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](6, "main", 1)(7, "div", 2)(8, "div");
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](9, "Repeat every");
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](10, "mat-form-field", 3)(11, "input", 4);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtwoWayListener"]("ngModelChange", function RecurrenceModalComponent_Template_input_ngModelChange_11_listener($event) {
          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtwoWayBindingSet"](ctx.data.interval, $event) || (ctx.data.interval = $event);
          return $event;
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](12, "mat-form-field", 5)(13, "mat-select", 6);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtwoWayListener"]("ngModelChange", function RecurrenceModalComponent_Template_mat_select_ngModelChange_13_listener($event) {
          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtwoWayBindingSet"](ctx.data.pattern, $event) || (ctx.data.pattern = $event);
          return $event;
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](14, "mat-option", 7);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](15);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](16, "mat-option", 8);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](17);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](18, "mat-option", 9);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](19);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()()()();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](20, RecurrenceModalComponent_h2_20_Template, 2, 0, "h2", 10)(21, RecurrenceModalComponent_div_21_Template, 15, 14, "div", 11);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](22, "h2", 12);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](23, "Ends");
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](24, "mat-radio-group", 13);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtwoWayListener"]("ngModelChange", function RecurrenceModalComponent_Template_mat_radio_group_ngModelChange_24_listener($event) {
          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtwoWayBindingSet"](ctx.ends_key, $event) || (ctx.ends_key = $event);
          return $event;
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](25, "div", 14)(26, "mat-radio-button", 15);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function RecurrenceModalComponent_Template_mat_radio_button_click_26_listener() {
          return ctx.data.occurrences = 0;
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](27, " Never ");
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](28, "div", 16)(29, "mat-radio-button", 17);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](30, "On");
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](31, "a-date-field", 18);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtwoWayListener"]("ngModelChange", function RecurrenceModalComponent_Template_a_date_field_ngModelChange_31_listener($event) {
          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtwoWayBindingSet"](ctx.data.end, $event) || (ctx.data.end = $event);
          return $event;
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](32, "div", 16)(33, "mat-radio-button", 19);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](34, "After");
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](35, "mat-form-field", 5)(36, "input", 20);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtwoWayListener"]("ngModelChange", function RecurrenceModalComponent_Template_input_ngModelChange_36_listener($event) {
          _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtwoWayBindingSet"](ctx.data.occurrences, $event) || (ctx.data.occurrences = $event);
          return $event;
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](37, "span", 21);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](38, "occurences");
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()()()()();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](39, "footer", 22)(40, "button", 23);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵlistener"]("click", function RecurrenceModalComponent_Template_button_click_40_listener() {
          return ctx.data.occurrences = ctx.ends_key === "never" ? 0 : ctx.data.occurrences;
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](41, " Save ");
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()();
      }
      if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](11);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtwoWayProperty"]("ngModel", ctx.data.interval);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtwoWayProperty"]("ngModel", ctx.data.pattern);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate1"](" day", ctx.data.interval === 1 ? "" : "s", " ");
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate1"](" week", ctx.data.interval === 1 ? "" : "s", " ");
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate1"](" month", ctx.data.interval === 1 ? "" : "s", " ");
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx.data.pattern === "weekly");
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx.data.pattern === "weekly");
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtwoWayProperty"]("ngModel", ctx.ends_key);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](7);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtwoWayProperty"]("ngModel", ctx.data.end);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("disabled", ctx.ends_key !== "on");
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](5);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtwoWayProperty"]("ngModel", ctx.data.occurrences);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("disabled", ctx.ends_key !== "after");
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](4);
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("mat-dialog-close", ctx.data);
      }
    },
    styles: ["mat-form-field[_ngcontent-%COMP%], \n   a-date-field[_ngcontent-%COMP%] {\n                height: 3.25rem;\n            }\n\n            mat-radio-button[_ngcontent-%COMP%] {\n                width: 8rem;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlY3VycmVuY2UtbW9kYWwuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTs7Z0JBRUksZUFBZTtZQUNuQjs7WUFFQTtnQkFDSSxXQUFXO1lBQ2YiLCJmaWxlIjoicmVjdXJyZW5jZS1tb2RhbC5jb21wb25lbnQudHMiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIG1hdC1mb3JtLWZpZWxkLFxuICAgICAgICAgICAgYS1kYXRlLWZpZWxkIHtcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDMuMjVyZW07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIG1hdC1yYWRpby1idXR0b24ge1xuICAgICAgICAgICAgICAgIHdpZHRoOiA4cmVtO1xuICAgICAgICAgICAgfVxuICAgICAgICAiXX0= */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvZm9ybS1maWVsZHMvc3JjL2xpYi9yZWN1cnJlbmNlLW1vZGFsLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1lBQ1k7O2dCQUVJLGVBQWU7WUFDbkI7O1lBRUE7Z0JBQ0ksV0FBVztZQUNmOztBQUVaLG9qQkFBb2pCIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICBtYXQtZm9ybS1maWVsZCxcbiAgICAgICAgICAgIGEtZGF0ZS1maWVsZCB7XG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAzLjI1cmVtO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBtYXQtcmFkaW8tYnV0dG9uIHtcbiAgICAgICAgICAgICAgICB3aWR0aDogOHJlbTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl0sInNvdXJjZVJvb3QiOiIifQ== */"]
  });
}

/***/ }),

/***/ 81772:
/*!***************************************************************!*\
  !*** ./libs/form-fields/src/lib/rich-text-input.component.ts ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   RichTextInputComponent: () => (/* binding */ RichTextInputComponent)
/* harmony export */ });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/forms */ 34456);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var quill__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! quill */ 41242);
/* harmony import */ var quill__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(quill__WEBPACK_IMPORTED_MODULE_1__);





const _c0 = ["container"];
const _c1 = ["editor"];
class RichTextInputComponent extends _placeos_common__WEBPACK_IMPORTED_MODULE_0__.AsyncHandler {
  constructor() {
    super(...arguments);
    this.placeholder = '';
    this.readonly = false;
    this._updateFn = () => this.setValue(this._editor.root.innerHTML);
    this.registerOnChange = fn => this._onChange = fn;
    this.registerOnTouched = fn => this._onTouch = fn;
  }
  ngOnChanges(changes) {}
  ngAfterViewInit() {
    this._initialiseEditor();
  }
  /**
   * Update the form field value
   * @param new_value New value to set on the form field
   */
  setValue(new_value) {
    /* istanbul ignore else */
    if (this._onChange) {
      this._onChange(new_value);
    }
  }
  /**
   * Update local value when form control value is changed
   * @param value The new value for the component
   */
  writeValue(value) {
    this.timeout('write', () => {
      if (this._editor) {
        const delta = this._editor.clipboard.convert(value);
        this._editor.setContents(delta, 'silent');
      } else {
        this.timeout('write', () => this.writeValue(value));
      }
    });
  }
  _initialiseEditor() {
    this._editor = new quill__WEBPACK_IMPORTED_MODULE_1__(this._editor_el.nativeElement, {
      bounds: this._container_el.nativeElement,
      placeholder: this.placeholder,
      modules: {
        toolbar: [[{
          size: ['small', false, 'large', 'huge']
        }], ['bold', 'italic', 'underline'], [{
          list: 'ordered'
        }, {
          list: 'bullet'
        }]]
      },
      readOnly: this.readonly,
      theme: 'snow'
    });
    this._editor.on('text-change', this._updateFn);
    this.subscription('changes', () => this._editor.off('text-change', this._updateFn));
  }
  static #_ = this.ɵfac = /*@__PURE__*/(() => {
    let ɵRichTextInputComponent_BaseFactory;
    return function RichTextInputComponent_Factory(__ngFactoryType__) {
      return (ɵRichTextInputComponent_BaseFactory || (ɵRichTextInputComponent_BaseFactory = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵgetInheritedFactory"](RichTextInputComponent)))(__ngFactoryType__ || RichTextInputComponent);
    };
  })();
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdefineComponent"]({
    type: RichTextInputComponent,
    selectors: [["rich-text-input"]],
    viewQuery: function RichTextInputComponent_Query(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵviewQuery"](_c0, 5);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵviewQuery"](_c1, 5);
      }
      if (rf & 2) {
        let _t;
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵloadQuery"]()) && (ctx._container_el = _t.first);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵloadQuery"]()) && (ctx._editor_el = _t.first);
      }
    },
    inputs: {
      placeholder: "placeholder",
      readonly: "readonly"
    },
    features: [_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵProvidersFeature"]([{
      provide: _angular_forms__WEBPACK_IMPORTED_MODULE_3__.NG_VALUE_ACCESSOR,
      /* istanbul ignore next */
      useExisting: (0,_angular_core__WEBPACK_IMPORTED_MODULE_2__.forwardRef)(() => RichTextInputComponent),
      multi: true
    }]), _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵInheritDefinitionFeature"], _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵNgOnChangesFeature"]],
    decls: 4,
    vars: 0,
    consts: [["container", ""], ["editor", ""]],
    template: function RichTextInputComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](0, "div", null, 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelement"](2, "div", null, 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
      }
    }
  });
}

/***/ }),

/***/ 84809:
/*!****************************************************************!*\
  !*** ./libs/form-fields/src/lib/space-list-field.component.ts ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SpaceListFieldComponent: () => (/* binding */ SpaceListFieldComponent)
/* harmony export */ });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @angular/forms */ 34456);
/* harmony import */ var libs_common_src_lib_settings_service__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! libs/common/src/lib/settings.service */ 14233);
/* harmony import */ var libs_spaces_src_lib_space_select_modal_new_space_select_modal_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! libs/spaces/src/lib/space-select-modal/new-space-select-modal.component */ 85752);
/* harmony import */ var _placeos_organisation__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @placeos/organisation */ 2510);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! rxjs */ 90521);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! rxjs/operators */ 19803);
/* harmony import */ var _angular_material_dialog__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @angular/material/dialog */ 12587);












const _c0 = () => ({
  standalone: true
});
function SpaceListFieldComponent_div_15_img_2_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelement"](0, "img", 30);
  }
  if (rf & 2) {
    const space_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]().$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("source", space_r2.images[0]);
  }
}
function SpaceListFieldComponent_div_15_ng_template_3_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelement"](0, "img", 31);
  }
}
function SpaceListFieldComponent_div_15_Template(rf, ctx) {
  if (rf & 1) {
    const _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "div", 18)(1, "div", 19);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](2, SpaceListFieldComponent_div_15_img_2_Template, 1, 1, "img", 20)(3, SpaceListFieldComponent_div_15_ng_template_3_Template, 1, 0, "ng-template", null, 0, _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplateRefExtractor"]);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](5, "div", 21)(6, "div", 22);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](7);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](8, "div", 23)(9, "app-icon", 24);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](10, "place");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](11, "p");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](12);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](13, "div", 23)(14, "app-icon", 24);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](15, "people");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](16, "p");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵi18n"](17, 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](18, "div", 25)(19, "button", 26);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵlistener"]("click", function SpaceListFieldComponent_div_15_Template_button_click_19_listener() {
      const space_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵrestoreView"](_r1).$implicit;
      const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵresetView"](ctx_r2.changeSpaces(space_r2));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](20, "div", 27);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵi18nStart"](21, 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelement"](22, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵi18nEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](23, "button", 28);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵlistener"]("click", function SpaceListFieldComponent_div_15_Template_button_click_23_listener() {
      const space_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵrestoreView"](_r1).$implicit;
      const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵresetView"](ctx_r2.removeSpace(space_r2));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](24, "div", 27);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵi18nStart"](25, 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelement"](26, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵi18nEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()()()();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](27, "button", 29);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵlistener"]("click", function SpaceListFieldComponent_div_15_Template_button_click_27_listener() {
      const space_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵrestoreView"](_r1).$implicit;
      const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵresetView"](ctx_r2.toggleFavourite(space_r2));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](28, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](29);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()()();
  }
  if (rf & 2) {
    let tmp_6_0;
    const space_r2 = ctx.$implicit;
    const placeholder_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵreference"](4);
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", space_r2.images == null ? null : space_r2.images.length)("ngIfElse", placeholder_r4);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtextInterpolate1"](" ", space_r2.display_name || space_r2.name || "Meeting Space", " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtextInterpolate1"](" ", space_r2.location || ((tmp_6_0 = ctx_r2.level(space_r2.zones)) == null ? null : tmp_6_0.display_name) || ((tmp_6_0 = ctx_r2.level(space_r2.zones)) == null ? null : tmp_6_0.name), " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵi18nExp"](space_r2.capacity < 1 ? 2 : space_r2.capacity)(space_r2.capacity);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵi18nApply"](17);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](10);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵclassProp"]("text-blue-400", ctx_r2.favorites.includes(space_r2 == null ? null : space_r2.id));
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtextInterpolate"](ctx_r2.favorites.includes(space_r2 == null ? null : space_r2.id) ? "favorite" : "favorite_border");
  }
}
const EMPTY_FAVS = [];
class SpaceListFieldComponent {
  get favorites() {
    return this._settings.get('favourite_spaces') || EMPTY_FAVS;
  }
  constructor(_settings, _org, _dialog) {
    this._settings = _settings;
    this._org = _org;
    this._dialog = _dialog;
    this.multiday = false;
    this.room_size = 4;
    this.spaces = new rxjs__WEBPACK_IMPORTED_MODULE_4__.BehaviorSubject([]);
    this.space_list = this.spaces.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.debounceTime)(300));
    this.disabled = false;
    /* istanbul ignore next */
    this.registerOnChange = fn => this._onChange = fn;
    /* istanbul ignore next */
    this.registerOnTouched = fn => this._onTouch = fn;
    this.setDisabledState = s => this.disabled = s;
  }
  ngOnDestroy() {
    if (this._dialog_ref) this._dialog_ref.close();
  }
  level(zones) {
    return this._org.levelWithID(zones);
  }
  /** Add or edit selected spaces */
  changeSpaces() {
    this._dialog_ref = this._dialog.open(libs_spaces_src_lib_space_select_modal_new_space_select_modal_component__WEBPACK_IMPORTED_MODULE_1__.NewSpaceSelectModalComponent, {
      data: {
        spaces: this.spaces.getValue(),
        options: {
          capacity: this.room_size
        },
        multiday: this.multiday
      }
    });
    this._dialog_ref.afterClosed().subscribe(() => {
      this.setValue(this._dialog_ref?.componentInstance?.selected);
      this._dialog_ref = undefined;
    });
  }
  /** Remove the selected space from the list */
  removeSpace(space) {
    this.setValue(this.spaces.getValue().filter(_ => _.id !== space.id));
  }
  /**
   * Update the form field value
   * @param new_value New value to set on the form field
   */
  setValue(new_value) {
    this.spaces.next(new_value || []);
    if (this._onChange) this._onChange(new_value || []);
  }
  /* istanbul ignore next */
  /**
   * Update local value when form control value is changed
   * @param value The new value for the component
   */
  writeValue(value) {
    this.spaces.next(value || []);
  }
  toggleFavourite(space) {
    if (!space?.id) return;
    const fav_list = this.favorites;
    const new_state = !fav_list.includes(space.id);
    if (new_state) {
      this._settings.saveUserSetting('favourite_spaces', [...fav_list, space.id]);
    } else {
      this._settings.saveUserSetting('favourite_spaces', fav_list.filter(_ => _ !== space.id));
    }
  }
  static #_ = this.ɵfac = function SpaceListFieldComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || SpaceListFieldComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵdirectiveInject"](libs_common_src_lib_settings_service__WEBPACK_IMPORTED_MODULE_0__.SettingsService), _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵdirectiveInject"](_placeos_organisation__WEBPACK_IMPORTED_MODULE_2__.OrganisationService), _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵdirectiveInject"](_angular_material_dialog__WEBPACK_IMPORTED_MODULE_6__.MatDialog));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵdefineComponent"]({
    type: SpaceListFieldComponent,
    selectors: [["space-list-field"]],
    inputs: {
      multiday: "multiday"
    },
    features: [_angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵProvidersFeature"]([{
      provide: _angular_forms__WEBPACK_IMPORTED_MODULE_7__.NG_VALUE_ACCESSOR,
      useExisting: (0,_angular_core__WEBPACK_IMPORTED_MODULE_3__.forwardRef)(() => SpaceListFieldComponent),
      multi: true
    }])],
    decls: 23,
    vars: 9,
    consts: () => {
      let i18n_0;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_2378084019110582405$$LIBS_FORM_FIELDS_SRC_LIB_SPACE_LIST_FIELD_COMPONENT_TS_0 = goog.getMsg("Select Room Size{$startTagSpan}*{$closeTagSpan}", {
          "closeTagSpan": "\uFFFD/#5\uFFFD",
          "startTagSpan": "\uFFFD#5\uFFFD"
        }, {
          original_code: {
            "closeTagSpan": "</span>",
            "startTagSpan": "<span>"
          }
        });
        i18n_0 = MSG_EXTERNAL_2378084019110582405$$LIBS_FORM_FIELDS_SRC_LIB_SPACE_LIST_FIELD_COMPONENT_TS_0;
      } else {
        i18n_0 = $localize`:␟1b75f93ee5764eaf4e3e5b35f9142aa730286aba␟2378084019110582405:Select Room Size${"\uFFFD#5\uFFFD"}:START_TAG_SPAN:*${"\uFFFD/#5\uFFFD"}:CLOSE_TAG_SPAN:`;
      }
      let i18n_1;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_5941148565596549711$$LIBS_FORM_FIELDS_SRC_LIB_SPACE_LIST_FIELD_COMPONENT_TS_1 = goog.getMsg(" Min. 2 People ");
        i18n_1 = MSG_EXTERNAL_5941148565596549711$$LIBS_FORM_FIELDS_SRC_LIB_SPACE_LIST_FIELD_COMPONENT_TS_1;
      } else {
        i18n_1 = $localize`:␟9a4b4695fcd5f591ff27d32d69654210c1edbce8␟5941148565596549711: Min. 2 People `;
      }
      let i18n_2;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_5844713600133557099$$LIBS_FORM_FIELDS_SRC_LIB_SPACE_LIST_FIELD_COMPONENT_TS_2 = goog.getMsg(" Min. 4 People ");
        i18n_2 = MSG_EXTERNAL_5844713600133557099$$LIBS_FORM_FIELDS_SRC_LIB_SPACE_LIST_FIELD_COMPONENT_TS_2;
      } else {
        i18n_2 = $localize`:␟c08792b3fa94dc973ac18033a872580a83beded9␟5844713600133557099: Min. 4 People `;
      }
      let i18n_3;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_694015482067564775$$LIBS_FORM_FIELDS_SRC_LIB_SPACE_LIST_FIELD_COMPONENT_TS_3 = goog.getMsg(" Min. 10 People ");
        i18n_3 = MSG_EXTERNAL_694015482067564775$$LIBS_FORM_FIELDS_SRC_LIB_SPACE_LIST_FIELD_COMPONENT_TS_3;
      } else {
        i18n_3 = $localize`:␟94d037a05d336158339e193309f967a769878040␟694015482067564775: Min. 10 People `;
      }
      let i18n_4;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_4961016996305563664$$LIBS_FORM_FIELDS_SRC_LIB_SPACE_LIST_FIELD_COMPONENT_TS_4 = goog.getMsg("Add Space");
        i18n_4 = MSG_EXTERNAL_4961016996305563664$$LIBS_FORM_FIELDS_SRC_LIB_SPACE_LIST_FIELD_COMPONENT_TS_4;
      } else {
        i18n_4 = $localize`:␟2a4f48e169dc20ba9ed88d3bfe38f47ecc9204e6␟4961016996305563664:Add Space`;
      }
      let i18n_5;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_426413428618668868$$LIBS_FORM_FIELDS_SRC_LIB_SPACE_LIST_FIELD_COMPONENT_TS_5 = goog.getMsg("{VAR_PLURAL, plural, =1 {Person } other {People\n                            }}");
        i18n_5 = MSG_EXTERNAL_426413428618668868$$LIBS_FORM_FIELDS_SRC_LIB_SPACE_LIST_FIELD_COMPONENT_TS_5;
      } else {
        i18n_5 = $localize`:␟ed210c8c0f2511082633f06a2c94b8410f6cd9bf␟426413428618668868:{VAR_PLURAL, plural, =1 {Person } other {People
                            }}`;
      }
      i18n_5 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵi18nPostprocess"](i18n_5, {
        "VAR_PLURAL": "\uFFFD1\uFFFD"
      });
      let i18n_6;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_686822217414553756$$LIBS_FORM_FIELDS_SRC_LIB_SPACE_LIST_FIELD_COMPONENT_TS_6 = goog.getMsg(" {$interpolation} {$icu} ", {
          "icu": i18n_5,
          "interpolation": "\uFFFD0\uFFFD"
        }, {
          original_code: {
            "icu": "{\n                            space.capacity, plural, =1 { Person } other { People\n                            } }",
            "interpolation": "{{ space.capacity < 1 ? 2 : space.capacity }}"
          }
        });
        i18n_6 = MSG_EXTERNAL_686822217414553756$$LIBS_FORM_FIELDS_SRC_LIB_SPACE_LIST_FIELD_COMPONENT_TS_6;
      } else {
        i18n_6 = $localize`:␟ddc17cbb67fd49c13c14733c877b09fb9bd86d87␟686822217414553756: ${"\uFFFD0\uFFFD"}:INTERPOLATION: ${i18n_5}:ICU: `;
      }
      let i18n_7;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_559636443235347532$$LIBS_FORM_FIELDS_SRC_LIB_SPACE_LIST_FIELD_COMPONENT_TS_7 = goog.getMsg("{$startTagAppIcon}edit{$closeTagAppIcon} Change ", {
          "closeTagAppIcon": "\uFFFD/#22\uFFFD",
          "startTagAppIcon": "\uFFFD#22\uFFFD"
        }, {
          original_code: {
            "closeTagAppIcon": "</app-icon>",
            "startTagAppIcon": "<app-icon>"
          }
        });
        i18n_7 = MSG_EXTERNAL_559636443235347532$$LIBS_FORM_FIELDS_SRC_LIB_SPACE_LIST_FIELD_COMPONENT_TS_7;
      } else {
        i18n_7 = $localize`:␟ca9092fdbbb85e5828de77fdf85c49b918cec128␟559636443235347532:${"\uFFFD#22\uFFFD"}:START_TAG_APP_ICON:edit${"\uFFFD/#22\uFFFD"}:CLOSE_TAG_APP_ICON: Change `;
      }
      let i18n_8;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_2582674642057285571$$LIBS_FORM_FIELDS_SRC_LIB_SPACE_LIST_FIELD_COMPONENT_TS_8 = goog.getMsg("{$startTagAppIcon}close{$closeTagAppIcon} Remove ", {
          "closeTagAppIcon": "\uFFFD/#26\uFFFD",
          "startTagAppIcon": "\uFFFD#26\uFFFD"
        }, {
          original_code: {
            "closeTagAppIcon": "</app-icon>",
            "startTagAppIcon": "<app-icon>"
          }
        });
        i18n_8 = MSG_EXTERNAL_2582674642057285571$$LIBS_FORM_FIELDS_SRC_LIB_SPACE_LIST_FIELD_COMPONENT_TS_8;
      } else {
        i18n_8 = $localize`:␟a386ba350cdee69beeb12a908d96f0724ddc2054␟2582674642057285571:${"\uFFFD#26\uFFFD"}:START_TAG_APP_ICON:close${"\uFFFD/#26\uFFFD"}:CLOSE_TAG_APP_ICON: Remove `;
      }
      return [["placeholder", ""], i18n_0, i18n_1, i18n_2, i18n_3, i18n_4, i18n_6, i18n_7, i18n_8, [1, "flex", "items-center", "flex-wrap", "sm:space-x-2", "mb-2"], [1, "flex-1", "min-w-[256px]", "space-y-2"], [1, "flex", "items-center"], ["aria-label", "Select Room Size", 1, "space-x-4", 3, "ngModelChange", "ngModel", "ngModelOptions"], [3, "value"], ["list", "", 1, "space-y-2"], ["space", "", "class", "relative p-2 rounded-lg w-full flex items-center shadow border border-base-200", 4, "ngFor", "ngForOf"], ["btn", "", "matRipple", "", "name", "add-space", 1, "w-full", "inverse", "mt-2", 3, "click"], [1, "flex", "items-center", "justify-center", "space-x-2"], ["space", "", 1, "relative", "p-2", "rounded-lg", "w-full", "flex", "items-center", "shadow", "border", "border-base-200"], [1, "w-24", "h-24", "rounded-xl", "bg-base-200", "mr-4", "overflow-hidden", "flex", "items-center", "justify-center"], ["auth", "", "class", "min-h-full object-cover", 3, "source", 4, "ngIf", "ngIfElse"], [1, "sm:space-y-2", "pb-4"], [1, "font-medium"], [1, "flex", "items-center", "text-sm", "space-x-2"], [1, "text-blue-500"], [1, "absolute", "bottom-0", "right-0", "flex", "items-center", "justify-end", "text-xs"], ["btn", "", "matRipple", "", "name", "edit-space", 1, "clear", 3, "click"], [1, "flex", "items-center", "space-x-2"], ["btn", "", "matRipple", "", "name", "remove-space", 1, "clear", 3, "click"], ["icon", "", "matRipple", "", "name", "toggle-space-favourite", 1, "absolute", "top-1", "right-1", 3, "click"], ["auth", "", 1, "min-h-full", "object-cover", 3, "source"], ["src", "assets/icons/room-placeholder.svg", 1, "m-auto"]];
    },
    template: function SpaceListFieldComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "div")(1, "div", 9)(2, "div", 10)(3, "label");
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵi18nStart"](4, 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelement"](5, "span");
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵi18nEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](6, "div", 11)(7, "mat-radio-group", 12);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtwoWayListener"]("ngModelChange", function SpaceListFieldComponent_Template_mat_radio_group_ngModelChange_7_listener($event) {
          _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtwoWayBindingSet"](ctx.room_size, $event) || (ctx.room_size = $event);
          return $event;
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](8, "mat-radio-button", 13);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵi18n"](9, 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](10, "mat-radio-button", 13);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵi18n"](11, 3);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](12, "mat-radio-button", 13);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵi18n"](13, 4);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()()()()()();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](14, "div", 14);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](15, SpaceListFieldComponent_div_15_Template, 30, 9, "div", 15);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipe"](16, "async");
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](17, "button", 16);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵlistener"]("click", function SpaceListFieldComponent_Template_button_click_17_listener() {
          return ctx.changeSpaces();
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](18, "div", 17)(19, "app-icon");
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](20, "search");
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](21, "span");
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵi18n"](22, 5);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()()();
      }
      if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](7);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtwoWayProperty"]("ngModel", ctx.room_size);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngModelOptions", _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpureFunction0"](8, _c0));
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("value", 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("value", 4);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("value", 10);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngForOf", _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipeBind1"](16, 6, ctx.space_list));
      }
    }
  });
}

/***/ }),

/***/ 38791:
/*!********************************************************************!*\
  !*** ./libs/form-fields/src/lib/support-ticket-modal.component.ts ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SupportTicketModalComponent: () => (/* binding */ SupportTicketModalComponent)
/* harmony export */ });
/* harmony import */ var _home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 89204);
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/forms */ 34456);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var _placeos_organisation__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @placeos/organisation */ 2510);
/* harmony import */ var _placeos_ts_client__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @placeos/ts-client */ 35713);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_material_dialog__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @angular/material/dialog */ 12587);










function SupportTicketModalComponent_main_6_mat_option_24_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](0, "mat-option", 34);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const bld_r1 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("value", bld_r1.display_name || bld_r1.name);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtextInterpolate1"](" ", bld_r1.display_name || bld_r1.name, " ");
  }
}
function SupportTicketModalComponent_main_6_div_26_mat_option_5_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](0, "mat-option", 34);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const type_r2 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("value", (type_r2 == null ? null : type_r2.name) || type_r2);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtextInterpolate1"](" ", type_r2.name || type_r2, " ");
  }
}
function SupportTicketModalComponent_main_6_div_26_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](0, "div", 24)(1, "label");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵi18n"](2, 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](3, "mat-form-field", 25)(4, "mat-select", 35);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](5, SupportTicketModalComponent_main_6_div_26_mat_option_5_Template, 2, 2, "mat-option", 27);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]()()();
  }
  if (rf & 2) {
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngForOf", ctx_r2.support_request_types);
  }
}
function SupportTicketModalComponent_main_6_mat_error_32_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](0, "mat-error", 36);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵi18n"](1, 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
  }
}
function SupportTicketModalComponent_main_6_div_33_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](0, "div")(1, "label", 29);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵi18n"](2, 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelement"](3, "image-list-field", 37);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
  }
}
function SupportTicketModalComponent_main_6_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](0, "main", 17)(1, "form", 18)(2, "div", 19)(3, "div", 20)(4, "label");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵi18nStart"](5, 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelement"](6, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵi18nEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](7, "mat-form-field", 21);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelement"](8, "input", 22);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](9, "mat-error");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵi18n"](10, 3);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]()()();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](11, "div", 20)(12, "label");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵi18nStart"](13, 4);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelement"](14, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵi18nEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](15, "mat-form-field", 21);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelement"](16, "input", 23);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](17, "mat-error");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵi18n"](18, 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]()()()();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](19, "div", 24)(20, "label");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵi18n"](21, 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](22, "mat-form-field", 25)(23, "mat-select", 26);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](24, SupportTicketModalComponent_main_6_mat_option_24_Template, 2, 2, "mat-option", 27);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpipe"](25, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]()()();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](26, SupportTicketModalComponent_main_6_div_26_Template, 6, 1, "div", 28);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](27, "div")(28, "label", 29);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵi18nStart"](29, 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelement"](30, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵi18nEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelement"](31, "rich-text-input", 30);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](32, SupportTicketModalComponent_main_6_mat_error_32_Template, 2, 0, "mat-error", 31);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](33, SupportTicketModalComponent_main_6_div_33_Template, 4, 0, "div", 32);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](34, "div", 33);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵi18n"](35, 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("formGroup", ctx_r2.form);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](23);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngForOf", _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵpipeBind1"](25, 5, ctx_r2.buildings));
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngIf", ctx_r2.support_request_types == null ? null : ctx_r2.support_request_types.length);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](6);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngIf", ctx_r2.desc_error);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngIf", ctx_r2.allow_images);
  }
}
function SupportTicketModalComponent_footer_7_Template(rf, ctx) {
  if (rf & 1) {
    const _r4 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](0, "footer", 38)(1, "button", 39);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵlistener"]("click", function SupportTicketModalComponent_footer_7_Template_button_click_1_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵrestoreView"](_r4);
      const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵresetView"](ctx_r2.submit());
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵi18n"](2, 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]()();
  }
}
function SupportTicketModalComponent_ng_template_8_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](0, "main", 40);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelement"](1, "mat-spinner", 41);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](2, "p");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](3, "Sending support ticket...");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("diameter", 32);
  }
}
class SupportTicketModalComponent {
  get desc_error() {
    return !this.form.controls.description.valid && this.form.controls.description.touched;
  }
  get support_email() {
    return this._settings.get('app.support_email') || 'support@place.tech';
  }
  get support_request_types() {
    return this._settings.get('app.support_issue_types') || [];
  }
  get allow_images() {
    return this._settings.get('app.allow_support_ticket_images');
  }
  constructor(_dialog_ref, _org, _settings) {
    this._dialog_ref = _dialog_ref;
    this._org = _org;
    this._settings = _settings;
    this.loading = false;
    this.form = new _angular_forms__WEBPACK_IMPORTED_MODULE_5__.FormGroup({
      name: new _angular_forms__WEBPACK_IMPORTED_MODULE_5__.FormControl('', [_angular_forms__WEBPACK_IMPORTED_MODULE_5__.Validators.required]),
      email: new _angular_forms__WEBPACK_IMPORTED_MODULE_5__.FormControl('', [_angular_forms__WEBPACK_IMPORTED_MODULE_5__.Validators.required]),
      location: new _angular_forms__WEBPACK_IMPORTED_MODULE_5__.FormControl(''),
      description: new _angular_forms__WEBPACK_IMPORTED_MODULE_5__.FormControl('', [_angular_forms__WEBPACK_IMPORTED_MODULE_5__.Validators.required]),
      issue_type: new _angular_forms__WEBPACK_IMPORTED_MODULE_5__.FormControl(''),
      images: new _angular_forms__WEBPACK_IMPORTED_MODULE_5__.FormControl([])
    });
    this.buildings = this._org.building_list;
  }
  ngOnInit() {
    const user = (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.currentUser)();
    if (user) {
      this.form.patchValue({
        name: user.name,
        email: user.email
      });
    }
    if (this._org.building) {
      this.form.patchValue({
        location: this._org.building.display_name || this._org.building.name
      });
    }
  }
  submit() {
    var _this = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      _this.loading = true;
      _this.form.markAllAsTouched();
      _this.form.updateValueAndValidity();
      if (_this.form.valid) {
        const stmp_system = _this._org.binding('smtp');
        if (!stmp_system) {
          return (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.notifyError)('Mailing system not configured for application.');
        }
        const mod = (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_3__.getModule)(stmp_system, 'Mailer');
        const {
          name,
          email,
          location,
          description,
          images,
          issue_type
        } = _this.form.value;
        const support_email = _this.support_request_types.find(type => type.name === issue_type)?.email || _this.support_email;
        yield mod.execute('send_mail', [support_email, `Support Ticket from Workplace Application${issue_type ? ' - ' + issue_type : ''}`, `${name}\n${email}\n\n${location}\n\n${description.replace(/<[^>]+>/g, '')}\n\n${images.join('\n')}`, `<p>${name}</p><p>${email}</p><p>${location}</p><p>${description}</p>${images.join('<br>')}`, [], [], [], [], null, `${email}`]);
        _this._dialog_ref.close();
        _this.loading = false;
        (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.notifySuccess)('Successfully submitted support ticket');
      }
    })();
  }
  static #_ = this.ɵfac = function SupportTicketModalComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || SupportTicketModalComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵdirectiveInject"](_angular_material_dialog__WEBPACK_IMPORTED_MODULE_6__.MatDialogRef), _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵdirectiveInject"](_placeos_organisation__WEBPACK_IMPORTED_MODULE_2__.OrganisationService), _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵdirectiveInject"](_placeos_common__WEBPACK_IMPORTED_MODULE_1__.SettingsService));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵdefineComponent"]({
    type: SupportTicketModalComponent,
    selectors: [["support-ticket-modal"]],
    decls: 10,
    vars: 3,
    consts: () => {
      let i18n_0;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_270482714535552546$$LIBS_FORM_FIELDS_SRC_LIB_SUPPORT_TICKET_MODAL_COMPONENT_TS_0 = goog.getMsg("Raise a support ticket");
        i18n_0 = MSG_EXTERNAL_270482714535552546$$LIBS_FORM_FIELDS_SRC_LIB_SUPPORT_TICKET_MODAL_COMPONENT_TS_0;
      } else {
        i18n_0 = $localize`:␟b862b54c42ded9ebb47260f60b0f75985c5fab18␟270482714535552546:Raise a support ticket`;
      }
      let i18n_1;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_5257092898921510014$$LIBS_FORM_FIELDS_SRC_LIB_SUPPORT_TICKET_MODAL_COMPONENT_TS_1 = goog.getMsg("Name{$startTagSpan}*{$closeTagSpan}", {
          "closeTagSpan": "\uFFFD/#6\uFFFD",
          "startTagSpan": "\uFFFD#6\uFFFD"
        }, {
          original_code: {
            "closeTagSpan": "</span>",
            "startTagSpan": "<span>"
          }
        });
        i18n_1 = MSG_EXTERNAL_5257092898921510014$$LIBS_FORM_FIELDS_SRC_LIB_SUPPORT_TICKET_MODAL_COMPONENT_TS_1;
      } else {
        i18n_1 = $localize`:␟84f7804a7a51f1144c5a3fda7b9b881af4212c4a␟5257092898921510014:Name${"\uFFFD#6\uFFFD"}:START_TAG_SPAN:*${"\uFFFD/#6\uFFFD"}:CLOSE_TAG_SPAN:`;
      }
      let i18n_2;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_3833692663709091545$$LIBS_FORM_FIELDS_SRC_LIB_SUPPORT_TICKET_MODAL_COMPONENT_TS_2 = goog.getMsg("Name is required");
        i18n_2 = MSG_EXTERNAL_3833692663709091545$$LIBS_FORM_FIELDS_SRC_LIB_SUPPORT_TICKET_MODAL_COMPONENT_TS_2;
      } else {
        i18n_2 = $localize`:␟5b752f143ab30faa45a2679b5e7a28bbf3fb246d␟3833692663709091545:Name is required`;
      }
      let i18n_3;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_8600249315708032613$$LIBS_FORM_FIELDS_SRC_LIB_SUPPORT_TICKET_MODAL_COMPONENT_TS_3 = goog.getMsg("Email{$startTagSpan}*{$closeTagSpan}", {
          "closeTagSpan": "\uFFFD/#14\uFFFD",
          "startTagSpan": "\uFFFD#14\uFFFD"
        }, {
          original_code: {
            "closeTagSpan": "</span>",
            "startTagSpan": "<span>"
          }
        });
        i18n_3 = MSG_EXTERNAL_8600249315708032613$$LIBS_FORM_FIELDS_SRC_LIB_SUPPORT_TICKET_MODAL_COMPONENT_TS_3;
      } else {
        i18n_3 = $localize`:␟15032ab5f5dcf10cb837008e8ff61acb42e957db␟8600249315708032613:Email${"\uFFFD#14\uFFFD"}:START_TAG_SPAN:*${"\uFFFD/#14\uFFFD"}:CLOSE_TAG_SPAN:`;
      }
      let i18n_4;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_8552587679160911578$$LIBS_FORM_FIELDS_SRC_LIB_SUPPORT_TICKET_MODAL_COMPONENT_TS_4 = goog.getMsg("Email is required");
        i18n_4 = MSG_EXTERNAL_8552587679160911578$$LIBS_FORM_FIELDS_SRC_LIB_SUPPORT_TICKET_MODAL_COMPONENT_TS_4;
      } else {
        i18n_4 = $localize`:␟9b2fd2a81342b5821f47ce0e6f2383b1403fd659␟8552587679160911578:Email is required`;
      }
      let i18n_5;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_471816275243265264$$LIBS_FORM_FIELDS_SRC_LIB_SUPPORT_TICKET_MODAL_COMPONENT_TS_5 = goog.getMsg("Location");
        i18n_5 = MSG_EXTERNAL_471816275243265264$$LIBS_FORM_FIELDS_SRC_LIB_SUPPORT_TICKET_MODAL_COMPONENT_TS_5;
      } else {
        i18n_5 = $localize`:␟ed31c09fd77c36238c13d83635f3fe5294c733d2␟471816275243265264:Location`;
      }
      let i18n_6;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_5204458475414246750$$LIBS_FORM_FIELDS_SRC_LIB_SUPPORT_TICKET_MODAL_COMPONENT_TS_6 = goog.getMsg(" Issue Description{$startTagSpan}*{$closeTagSpan}", {
          "closeTagSpan": "\uFFFD/#30\uFFFD",
          "startTagSpan": "\uFFFD#30\uFFFD"
        }, {
          original_code: {
            "closeTagSpan": "</span>",
            "startTagSpan": "<span>"
          }
        });
        i18n_6 = MSG_EXTERNAL_5204458475414246750$$LIBS_FORM_FIELDS_SRC_LIB_SUPPORT_TICKET_MODAL_COMPONENT_TS_6;
      } else {
        i18n_6 = $localize`:␟bd571e4b6aa662ccde3593b99728c60a9c4e2722␟5204458475414246750: Issue Description${"\uFFFD#30\uFFFD"}:START_TAG_SPAN:*${"\uFFFD/#30\uFFFD"}:CLOSE_TAG_SPAN:`;
      }
      let i18n_7;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_2365971609064887430$$LIBS_FORM_FIELDS_SRC_LIB_SUPPORT_TICKET_MODAL_COMPONENT_TS_7 = goog.getMsg(" Completing this form will raise an incident in your support management platform ");
        i18n_7 = MSG_EXTERNAL_2365971609064887430$$LIBS_FORM_FIELDS_SRC_LIB_SUPPORT_TICKET_MODAL_COMPONENT_TS_7;
      } else {
        i18n_7 = $localize`:␟860180fb81e0877ec8059acbf30938f5d31daede␟2365971609064887430: Completing this form will raise an incident in your support management platform `;
      }
      let i18n_8;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_3187063371811307868$$LIBS_FORM_FIELDS_SRC_LIB_SUPPORT_TICKET_MODAL_COMPONENT_TS_8 = goog.getMsg("Issue Type");
        i18n_8 = MSG_EXTERNAL_3187063371811307868$$LIBS_FORM_FIELDS_SRC_LIB_SUPPORT_TICKET_MODAL_COMPONENT_TS_8;
      } else {
        i18n_8 = $localize`:␟712648c55b8f81cc494ffeff1c304f275dcafc61␟3187063371811307868:Issue Type`;
      }
      let i18n_9;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_124716140796903078$$LIBS_FORM_FIELDS_SRC_LIB_SUPPORT_TICKET_MODAL_COMPONENT_TS_9 = goog.getMsg(" Description is required ");
        i18n_9 = MSG_EXTERNAL_124716140796903078$$LIBS_FORM_FIELDS_SRC_LIB_SUPPORT_TICKET_MODAL_COMPONENT_TS_9;
      } else {
        i18n_9 = $localize`:␟ae855fe6e11d47178c1051e1a3f9e78c5bb7fb4e␟124716140796903078: Description is required `;
      }
      let i18n_10;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_414887388288176527$$LIBS_FORM_FIELDS_SRC_LIB_SUPPORT_TICKET_MODAL_COMPONENT_TS_10 = goog.getMsg("Images");
        i18n_10 = MSG_EXTERNAL_414887388288176527$$LIBS_FORM_FIELDS_SRC_LIB_SUPPORT_TICKET_MODAL_COMPONENT_TS_10;
      } else {
        i18n_10 = $localize`:␟b73f7f5060fb22a1e9ec462b1bb02493fa3ab866␟414887388288176527:Images`;
      }
      let i18n_11;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_1413112058430688330$$LIBS_FORM_FIELDS_SRC_LIB_SUPPORT_TICKET_MODAL_COMPONENT_TS_11 = goog.getMsg(" Submit ");
        i18n_11 = MSG_EXTERNAL_1413112058430688330$$LIBS_FORM_FIELDS_SRC_LIB_SUPPORT_TICKET_MODAL_COMPONENT_TS_11;
      } else {
        i18n_11 = $localize`:␟932802b79d36312ecbe949fc5b703fef638f41df␟1413112058430688330: Submit `;
      }
      return [["load_state", ""], i18n_0, i18n_1, i18n_2, i18n_3, i18n_4, i18n_5, i18n_6, i18n_7, i18n_8, i18n_9, i18n_10, i18n_11, [1, "flex", "items-center", "justify-between"], ["icon", "", "mat-dialog-close", ""], ["class", "w-[32rem] max-w-[85vw]", 4, "ngIf", "ngIfElse"], ["class", "p-2 border-t border-base-200 flex items-center justify-center", 4, "ngIf"], [1, "w-[32rem]", "max-w-[85vw]"], [1, "p-2", 3, "formGroup"], [1, "flex", "items-center", "sm:space-x-2", "flex-wrap"], [1, "flex", "flex-col", "flex-1"], ["appearance", "outline"], ["matInput", "", "placeholder", "Name", "formControlName", "name"], ["matInput", "", "placeholder", "Email", "formControlName", "email"], [1, "flex", "flex-col"], ["appearance", "outline", 1, "w-full"], ["placeholder", "Location", "formControlName", "location"], [3, "value", 4, "ngFor", "ngForOf"], ["class", "flex flex-col", 4, "ngIf"], [1, "mb-4"], ["placeholder", "Issue Description", "formControlName", "description"], ["class", "text-xs my-2", 4, "ngIf"], [4, "ngIf"], [1, "italic", "text-center", "text-xs", "mb-2"], [3, "value"], ["placeholder", "Issue Type", "formControlName", "issue_type"], [1, "text-xs", "my-2"], ["formControlName", "images"], [1, "p-2", "border-t", "border-base-200", "flex", "items-center", "justify-center"], ["btn", "", "matRipple", "", 1, "w-32", 3, "click"], [1, "w-[32rem]", "min-h-[24rem]", "max-w-[100vw]", "flex", "flex-col", "items-center", "justify-center", "space-y-2"], [3, "diameter"]];
    },
    template: function SupportTicketModalComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](0, "header", 13)(1, "h2");
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵi18n"](2, 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](3, "button", 14)(4, "app-icon");
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](5, "close");
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]()()();
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](6, SupportTicketModalComponent_main_6_Template, 36, 7, "main", 15)(7, SupportTicketModalComponent_footer_7_Template, 3, 0, "footer", 16)(8, SupportTicketModalComponent_ng_template_8_Template, 4, 1, "ng-template", null, 0, _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplateRefExtractor"]);
      }
      if (rf & 2) {
        const load_state_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵreference"](9);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](6);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngIf", !ctx.loading)("ngIfElse", load_state_r5);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngIf", !ctx.loading);
      }
    },
    styles: ["mat-form-field[_ngcontent-%COMP%] {\n                width: 100%;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInN1cHBvcnQtdGlja2V0LW1vZGFsLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1lBQ1k7Z0JBQ0ksV0FBVztZQUNmIiwiZmlsZSI6InN1cHBvcnQtdGlja2V0LW1vZGFsLmNvbXBvbmVudC50cyIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgbWF0LWZvcm0tZmllbGQge1xuICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgfVxuICAgICAgICAiXX0= */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvZm9ybS1maWVsZHMvc3JjL2xpYi9zdXBwb3J0LXRpY2tldC1tb2RhbC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLFdBQVc7WUFDZjs7QUFFWiw0WUFBNFkiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIG1hdC1mb3JtLWZpZWxkIHtcbiAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl0sInNvdXJjZVJvb3QiOiIifQ== */"]
  });
}

/***/ }),

/***/ 81413:
/*!**********************************************************!*\
  !*** ./libs/form-fields/src/lib/time-field.component.ts ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   TimeFieldComponent: () => (/* binding */ TimeFieldComponent)
/* harmony export */ });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @angular/forms */ 34456);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! date-fns */ 33240);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! date-fns */ 45726);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! date-fns */ 77177);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! date-fns */ 23206);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! date-fns */ 5647);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! date-fns */ 31257);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! date-fns */ 91543);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! date-fns */ 56441);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! date-fns */ 49675);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _angular_material_form_field__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @angular/material/form-field */ 24950);
/* harmony import */ var _angular_material_select__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @angular/material/select */ 25175);
/* harmony import */ var _angular_material_core__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @angular/material/core */ 74646);











const _c0 = ["select"];
function TimeFieldComponent_mat_option_3_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "mat-option", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpipe"](2, "date");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("value", ctx_r1.force_time);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpipeBind2"](2, 2, ctx_r1.force_time, ctx_r1.use_24hr ? "HH : mm" : "h : mm a"), " ");
  }
}
function TimeFieldComponent_mat_option_4_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "mat-option", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpipe"](2, "date");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const option_r3 = ctx.$implicit;
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("value", option_r3.id);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate2"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpipeBind2"](2, 3, option_r3.date, ctx_r1.use_24hr ? "HH : mm" : "h : mm a"), " ", ctx_r1.extra_info_fn(option_r3.date), " ");
  }
}
class TimeFieldComponent extends _placeos_common__WEBPACK_IMPORTED_MODULE_0__.AsyncHandler {
  constructor() {
    super(...arguments);
    /** Time step between each allowed time option */
    this.step = 15;
    /** Whether past times are allowed */
    this.no_past_times = true;
    this.use_24hr = false;
    this.extra_info_fn = t => '';
    /** Prevent times before */
    this.from = (0,date_fns__WEBPACK_IMPORTED_MODULE_2__.startOfDay)(Date.now()).valueOf();
    /** String representing the currently set time */
    this.date = new Date().valueOf();
    /** String representing the currently set time */
    this.time = (0,date_fns__WEBPACK_IMPORTED_MODULE_3__.format)(new Date(), 'HH:mm');
  }
  ngOnInit() {
    this.show_select = true;
    this._time_options = this.generateAvailableTimes(this.date, !this.no_past_times, this.step);
    this.timeout('hide', () => this.show_select = false);
  }
  ngOnChanges(changes) {
    if (changes.no_past_times || changes.step || changes.from) {
      this._time_options = this.generateAvailableTimes(this.date, !this.no_past_times, this.step);
    }
  }
  /** Available time blocks for the selected date */
  get time_options() {
    const time = (this.time || '00:00').split(':');
    const date = (0,date_fns__WEBPACK_IMPORTED_MODULE_4__.set)(this.date, {
      hours: +time[0],
      minutes: +time[1]
    });
    if (date.getMinutes() % 15 !== 0 && !this._time_options.find(time => time.id === (0,date_fns__WEBPACK_IMPORTED_MODULE_3__.format)(date, 'HH:mm'))) {
      this._time_options.push({
        date,
        id: (0,date_fns__WEBPACK_IMPORTED_MODULE_3__.format)(date, 'HH:mm')
      });
      this._time_options.sort((a, b) => `${a.id}`.localeCompare(`${b.id}`));
    }
    return this._time_options;
  }
  /**
   * Update the form field value
   * @param new_value New value to set on the form field
   */
  setValue(new_value) {
    this.time = new_value;
    if (this._onChange) {
      const time = (this.time || '00:00').split(':');
      const date = (0,date_fns__WEBPACK_IMPORTED_MODULE_5__.startOfMinute)((0,date_fns__WEBPACK_IMPORTED_MODULE_4__.set)(this.date, {
        hours: +time[0],
        minutes: +time[1]
      }));
      this._onChange(date.valueOf());
    }
  }
  /**
   * Update local value when form control value is changed
   * @param value The new value for the component
   */
  writeValue(value) {
    this.date = value || this.date;
    let date = (0,date_fns__WEBPACK_IMPORTED_MODULE_5__.startOfMinute)(this.date);
    date = (0,date_fns__WEBPACK_IMPORTED_MODULE_6__.roundToNearestMinutes)(date, {
      nearestTo: 5
    });
    this.time = (0,date_fns__WEBPACK_IMPORTED_MODULE_3__.format)(date, 'HH:mm');
    this._time_options = this.generateAvailableTimes(this.date, !this.no_past_times, this.step);
  }
  setDisabledState(disabled) {
    this.disabled = disabled;
    this._time_options = this.generateAvailableTimes(this.date, !this.no_past_times || disabled, this.step);
  }
  /**
   * Registers a callback function that is called when the control's value changes in the UI.
   * @param fn The callback function to register
   */
  registerOnChange(fn) {
    this._onChange = fn;
  }
  /**
   * Registers a callback function is called by the forms API on initialization to update the form model on blur.
   * @param fn The callback function to register
   */
  registerOnTouched(fn) {
    this._onTouch = fn;
  }
  /**
   * Show select field for time options
   */
  showSelect() {
    this.show_select = true;
    this.timeout('on_shown', () => {
      if (this.select_field) {
        this.select_field.focus();
        this.select_field.open();
        this.subscription('listen_close', this.select_field.openedChange.subscribe(state => {
          if (!state) {
            this.show_select = false;
          }
        }));
      }
    });
  }
  /**
   * Generate a list of time options for the given date
   * @param datestamp Date to generate options for
   * @param show_past Whether past times should be options
   */
  generateAvailableTimes(datestamp, show_past, step = 15) {
    const now = new Date(Math.max(this.from, Date.now()));
    let date = new Date(datestamp);
    const blocks = [];
    if (show_past || !(0,date_fns__WEBPACK_IMPORTED_MODULE_7__.isSameDay)(date, now) && (0,date_fns__WEBPACK_IMPORTED_MODULE_8__.isAfter)(date, now)) {
      date = (0,date_fns__WEBPACK_IMPORTED_MODULE_2__.startOfDay)(date);
    } else if ((0,date_fns__WEBPACK_IMPORTED_MODULE_8__.isAfter)(date, now)) {
      date = new Date(now);
    }
    date = (0,date_fns__WEBPACK_IMPORTED_MODULE_6__.roundToNearestMinutes)(date, {
      nearestTo: step
    });
    const end = (0,date_fns__WEBPACK_IMPORTED_MODULE_9__.endOfDay)(date);
    // Add options for the rest of the day
    while ((0,date_fns__WEBPACK_IMPORTED_MODULE_8__.isAfter)(end, date)) {
      blocks.push({
        date: date.valueOf(),
        id: (0,date_fns__WEBPACK_IMPORTED_MODULE_3__.format)(date, 'HH:mm')
      });
      date = (0,date_fns__WEBPACK_IMPORTED_MODULE_10__.addMinutes)(date, step);
    }
    return blocks;
  }
  static #_ = this.ɵfac = /*@__PURE__*/(() => {
    let ɵTimeFieldComponent_BaseFactory;
    return function TimeFieldComponent_Factory(__ngFactoryType__) {
      return (ɵTimeFieldComponent_BaseFactory || (ɵTimeFieldComponent_BaseFactory = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵgetInheritedFactory"](TimeFieldComponent)))(__ngFactoryType__ || TimeFieldComponent);
    };
  })();
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdefineComponent"]({
    type: TimeFieldComponent,
    selectors: [["a-time-field"]],
    viewQuery: function TimeFieldComponent_Query(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵviewQuery"](_c0, 5);
      }
      if (rf & 2) {
        let _t;
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵloadQuery"]()) && (ctx.select_field = _t.first);
      }
    },
    inputs: {
      step: "step",
      disabled: "disabled",
      no_past_times: "no_past_times",
      use_24hr: "use_24hr",
      force_time: "force_time",
      extra_info_fn: "extra_info_fn",
      from: "from"
    },
    features: [_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵProvidersFeature"]([{
      provide: _angular_forms__WEBPACK_IMPORTED_MODULE_11__.NG_VALUE_ACCESSOR,
      useExisting: (0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.forwardRef)(() => TimeFieldComponent),
      multi: true
    }]), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵInheritDefinitionFeature"], _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵNgOnChangesFeature"]],
    decls: 5,
    vars: 4,
    consts: [["select", ""], ["appearance", "outline"], [3, "ngModelChange", "ngModel", "disabled"], [3, "value", 4, "ngIf"], [3, "value", 4, "ngFor", "ngForOf"], [3, "value"]],
    template: function TimeFieldComponent_Template(rf, ctx) {
      if (rf & 1) {
        const _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵgetCurrentView"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "mat-form-field", 1)(1, "mat-select", 2, 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("ngModelChange", function TimeFieldComponent_Template_mat_select_ngModelChange_1_listener($event) {
          _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r1);
          return _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵresetView"](ctx.setValue($event));
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](3, TimeFieldComponent_mat_option_3_Template, 3, 5, "mat-option", 3)(4, TimeFieldComponent_mat_option_4_Template, 3, 6, "mat-option", 4);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]()();
      }
      if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngModel", ctx.force_time || ctx.time)("disabled", ctx.disabled);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", ctx.force_time);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngForOf", ctx.time_options);
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_12__.NgForOf, _angular_common__WEBPACK_IMPORTED_MODULE_12__.NgIf, _angular_forms__WEBPACK_IMPORTED_MODULE_11__.NgControlStatus, _angular_forms__WEBPACK_IMPORTED_MODULE_11__.NgModel, _angular_material_form_field__WEBPACK_IMPORTED_MODULE_13__.MatFormField, _angular_material_select__WEBPACK_IMPORTED_MODULE_14__.MatSelect, _angular_material_core__WEBPACK_IMPORTED_MODULE_15__.MatOption, _angular_common__WEBPACK_IMPORTED_MODULE_12__.DatePipe],
    styles: ["mat-form-field[_ngcontent-%COMP%] {\n                width: 100%;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRpbWUtZmllbGQuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxXQUFXO1lBQ2YiLCJmaWxlIjoidGltZS1maWVsZC5jb21wb25lbnQudHMiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIG1hdC1mb3JtLWZpZWxkIHtcbiAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl19 */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvZm9ybS1maWVsZHMvc3JjL2xpYi90aW1lLWZpZWxkLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1lBQ1k7Z0JBQ0ksV0FBVztZQUNmOztBQUVaLGdYQUFnWCIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgbWF0LWZvcm0tZmllbGQge1xuICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgfVxuICAgICAgICAiXSwic291cmNlUm9vdCI6IiJ9 */"]
  });
}

/***/ }),

/***/ 45748:
/*!*****************************************************************!*\
  !*** ./libs/form-fields/src/lib/upload-file-field.component.ts ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   UploadFileFieldComponent: () => (/* binding */ UploadFileFieldComponent)
/* harmony export */ });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @angular/forms */ 34456);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! rxjs/operators */ 87989);
/* harmony import */ var blob_util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! blob-util */ 67092);
/* harmony import */ var _placeos_cloud_uploads__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @placeos/cloud-uploads */ 51556);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _angular_material_core__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @angular/material/core */ 74646);
/* harmony import */ var _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../components/src/lib/icon.component */ 69434);
/* harmony import */ var _angular_material_progress_spinner__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @angular/material/progress-spinner */ 41134);











function UploadFileFieldComponent_div_2_ng_container_3_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](1, "div", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelement"](2, "mat-progress-spinner", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](3, "div", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementContainerEnd"]();
  }
  if (rf & 2) {
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("diameter", 32)("value", ctx_r2.item.progress);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtextInterpolate1"](" ", ctx_r2.item.progress, " ");
  }
}
function UploadFileFieldComponent_div_2_a_4_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](0, "a", 13)(1, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](2, "link");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("href", ctx_r2.item.url, _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵsanitizeUrl"]);
  }
}
function UploadFileFieldComponent_div_2_Template(rf, ctx) {
  if (rf & 1) {
    const _r2 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](0, "div", 5)(1, "div", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](3, UploadFileFieldComponent_div_2_ng_container_3_Template, 5, 3, "ng-container", 7)(4, UploadFileFieldComponent_div_2_a_4_Template, 3, 1, "a", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](5, "button", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵlistener"]("click", function UploadFileFieldComponent_div_2_Template_button_click_5_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵrestoreView"](_r2);
      const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵresetView"](ctx_r2.writeValue(null));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](6, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](7, "close");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]()()();
  }
  if (rf & 2) {
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵclassProp"]("!bg-error", ctx_r2.item.progress < 1)("!bg-opacity-20", ctx_r2.item.progress < 1);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtextInterpolate1"](" ", ctx_r2.item.name, " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngIf", ctx_r2.item.progress >= 0 && ctx_r2.item.progress < 100);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngIf", ctx_r2.item.progress >= 100);
  }
}
function UploadFileFieldComponent_ng_template_3_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](0, "div", 14)(1, "p", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵi18n"](2, 1);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]()();
  }
}
class UploadFileFieldComponent {
  constructor() {
    this.registerOnChange = fn => this._onChange = fn;
    this.registerOnTouched = fn => this._onTouch = fn;
  }
  /**
   * Update the form field value
   * @param new_value New value to set on the form field
   */
  setValue(new_value) {
    this.item = new_value;
    if (this._onChange) this._onChange(this.item);
  }
  /**
   * Update local value when form control value is changed
   * @param value The new value for the component
   */
  writeValue(value) {
    this.item = value;
  }
  onFileEvent(event) {
    const element = event.target;
    /* istanbul ignore else */
    if (!element?.files?.length) return;
    const files = element.files;
    const on_change = item => {
      this.item = item;
      this.setValue(this.item);
    };
    this._uploadFile(files[0], on_change);
  }
  _uploadFile(file, on_change) {
    const fileReader = new FileReader();
    fileReader.addEventListener('loadend', e => {
      const arrayBuffer = e.target.result;
      const blob = blob_util__WEBPACK_IMPORTED_MODULE_1__.arrayBufferToBlob(arrayBuffer, file.type);
      const upload_list = (0,_placeos_cloud_uploads__WEBPACK_IMPORTED_MODULE_2__.uploadFiles)([blob], {
        file_name: file.name
      });
      const upload = upload_list[0];
      const upload_details = {
        id: `${(0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.randomInt)(9999_9999_9999)}`,
        name: file.name,
        progress: 0,
        size: file.size,
        created_at: Date.now(),
        url: ''
      };
      upload.status.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.takeWhile)(_ => _.status !== 'complete', true)).subscribe(state => {
        if (upload.access_url) upload_details.url = upload.access_url;
        upload_details.progress = state.progress;
        if (state.status === 'error') upload_details.progress = -1;
        on_change(upload_details);
      });
      on_change(upload_details);
    });
    fileReader.readAsArrayBuffer(file);
  }
  static #_ = this.ɵfac = function UploadFileFieldComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || UploadFileFieldComponent)();
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵdefineComponent"]({
    type: UploadFileFieldComponent,
    selectors: [["upload-file"]],
    features: [_angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵProvidersFeature"]([{
      provide: _angular_forms__WEBPACK_IMPORTED_MODULE_6__.NG_VALUE_ACCESSOR,
      useExisting: (0,_angular_core__WEBPACK_IMPORTED_MODULE_4__.forwardRef)(() => UploadFileFieldComponent),
      multi: true
    }])],
    decls: 5,
    vars: 2,
    consts: () => {
      let i18n_0;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_7812370821534854890$$LIBS_FORM_FIELDS_SRC_LIB_UPLOAD_FILE_FIELD_COMPONENT_TS_0 = goog.getMsg("Drop file or click to upload file");
        i18n_0 = MSG_EXTERNAL_7812370821534854890$$LIBS_FORM_FIELDS_SRC_LIB_UPLOAD_FILE_FIELD_COMPONENT_TS_0;
      } else {
        i18n_0 = $localize`:␟1004d86509270a6dd320fdb33686c5c48dcb5208␟7812370821534854890:Drop file or click to upload file`;
      }
      return [["empty_state", ""], i18n_0, [1, "bg-base-200", "hover:bg-base-200", "cursor-pointer", "p-2", "rounded", "border", "border-base-200", "w-full", "relative"], ["type", "file", 1, "absolute", "inset-0", "opacity-0", "max-w-full", "z-10", 3, "change"], ["item", "", "class", "w-full flex items-center border border-base-200 rounded bg-base-100 hover:bg-base-200 relative z-50", 3, "!bg-error", "!bg-opacity-20", 4, "ngIf", "ngIfElse"], ["item", "", 1, "w-full", "flex", "items-center", "border", "border-base-200", "rounded", "bg-base-100", "hover:bg-base-200", "relative", "z-50"], [1, "flex-1", "w-px", "font-mono", "truncate", "px-2", "text-sm"], [4, "ngIf"], ["icon", "", "matRipple", "", "target", "_blank", "rel", "noopener noreferrer", 3, "href", 4, "ngIf"], ["icon", "", 3, "click"], [1, "relative", "mx-1"], ["mode", "determinate", 3, "diameter", "value"], [1, "absolute", "top-1/2", "left-1/2", "-translate-x-1/2", "-translate-y-1/2", "text-sm", "font-bold"], ["icon", "", "matRipple", "", "target", "_blank", "rel", "noopener noreferrer", 3, "href"], [1, "h-full", "w-full", "flex", "flex-col", "justify-center", "items-center", "z-0"], [1, "opacity-30"]];
    },
    template: function UploadFileFieldComponent_Template(rf, ctx) {
      if (rf & 1) {
        const _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵgetCurrentView"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](0, "div", 2)(1, "input", 3);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵlistener"]("change", function UploadFileFieldComponent_Template_input_change_1_listener($event) {
          _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵrestoreView"](_r1);
          return _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵresetView"](ctx.onFileEvent($event));
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](2, UploadFileFieldComponent_div_2_Template, 8, 7, "div", 4);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](3, UploadFileFieldComponent_ng_template_3_Template, 3, 0, "ng-template", null, 0, _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplateRefExtractor"]);
      }
      if (rf & 2) {
        const empty_state_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵreference"](4);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngIf", ctx.item)("ngIfElse", empty_state_r4);
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_7__.NgIf, _angular_material_core__WEBPACK_IMPORTED_MODULE_8__.MatRipple, _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_3__.IconComponent, _angular_material_progress_spinner__WEBPACK_IMPORTED_MODULE_9__.MatProgressSpinner]
  });
}

/***/ }),

/***/ 65542:
/*!*****************************************************************!*\
  !*** ./libs/form-fields/src/lib/upload-list-field.component.ts ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   UploadListFieldComponent: () => (/* binding */ UploadListFieldComponent)
/* harmony export */ });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @angular/forms */ 34456);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! rxjs/operators */ 87989);
/* harmony import */ var blob_util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! blob-util */ 67092);
/* harmony import */ var _placeos_cloud_uploads__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @placeos/cloud-uploads */ 51556);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _angular_material_core__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @angular/material/core */ 74646);
/* harmony import */ var _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../components/src/lib/icon.component */ 69434);
/* harmony import */ var _angular_material_progress_spinner__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @angular/material/progress-spinner */ 41134);











function UploadListFieldComponent_div_12_div_1_ng_container_3_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](1, "div", 21);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelement"](2, "mat-progress-spinner", 22);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](3, "div", 23);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementContainerEnd"]();
  }
  if (rf & 2) {
    const item_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"]().$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("diameter", 32)("value", item_r3.progress);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtextInterpolate1"](" ", item_r3.progress, " ");
  }
}
function UploadListFieldComponent_div_12_div_1_a_4_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](0, "a", 24)(1, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](2, "link");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const item_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"]().$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("href", item_r3.url, _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵsanitizeUrl"]);
  }
}
function UploadListFieldComponent_div_12_div_1_Template(rf, ctx) {
  if (rf & 1) {
    const _r2 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](0, "div", 16)(1, "div", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](3, UploadListFieldComponent_div_12_div_1_ng_container_3_Template, 5, 3, "ng-container", 18)(4, UploadListFieldComponent_div_12_div_1_a_4_Template, 3, 1, "a", 19);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](5, "button", 20);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵlistener"]("click", function UploadListFieldComponent_div_12_div_1_Template_button_click_5_listener() {
      const item_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵrestoreView"](_r2).$implicit;
      const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"](2);
      return _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵresetView"](ctx_r3.removeFile(item_r3));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](6, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](7, "close");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]()()();
  }
  if (rf & 2) {
    const item_r3 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵclassProp"]("!bg-error", item_r3.progress < 1)("!bg-opacity-20", item_r3.progress < 1);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtextInterpolate1"](" ", item_r3.name, " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngIf", item_r3.progress >= 0 && item_r3.progress < 100);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngIf", item_r3.progress >= 100);
  }
}
function UploadListFieldComponent_div_12_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](0, "div", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](1, UploadListFieldComponent_div_12_div_1_Template, 8, 7, "div", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngForOf", ctx_r3.list);
  }
}
function UploadListFieldComponent_ng_template_13_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](0, "div", 25)(1, "p", 26);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵi18n"](2, 4);
    _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]()();
  }
}
class UploadListFieldComponent {
  constructor() {
    this.list = [];
    this.registerOnChange = fn => this._onChange = fn;
    this.registerOnTouched = fn => this._onTouch = fn;
  }
  /**
   * Update the form field value
   * @param new_value New value to set on the form field
   */
  setValue(new_value) {
    this.list = new_value.filter(_ => _.url && _.progress >= 100);
    if (this._onChange) this._onChange(this.list);
  }
  /**
   * Update local value when form control value is changed
   * @param value The new value for the component
   */
  writeValue(value) {
    this.list = value.map(_ => ({
      id: `file-${(0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.randomInt)(999_999_999)}`,
      ..._
    }));
  }
  removeFile(item) {
    this.list = this.list.filter(_ => _.id !== item.id);
  }
  onFileEvent(event) {
    const element = event.target;
    /* istanbul ignore else */
    if (!element?.files?.length) return;
    const files = element.files;
    const on_change = item => {
      this.list = [...(this.list || []).filter(_ => _.id !== item.id)].sort((a, b) => a.created_at - b.created_at);
      this.setValue(this.list);
    };
    for (let i = 0; i < files.length; i++) {
      this._uploadFile(files[i], on_change);
    }
  }
  _uploadFile(file, on_change) {
    const fileReader = new FileReader();
    fileReader.addEventListener('loadend', e => {
      const arrayBuffer = e.target.result;
      const blob = blob_util__WEBPACK_IMPORTED_MODULE_1__.arrayBufferToBlob(arrayBuffer, file.type);
      const upload_list = (0,_placeos_cloud_uploads__WEBPACK_IMPORTED_MODULE_2__.uploadFiles)([blob], {
        file_name: file.name
      });
      const upload = upload_list[0];
      const upload_details = {
        id: `${(0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.randomInt)(9999_9999_9999)}`,
        name: file.name,
        progress: 0,
        size: file.size,
        created_at: Date.now(),
        url: ''
      };
      upload.status.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.takeWhile)(_ => _.status !== 'complete', true)).subscribe(state => {
        if (upload.access_url) upload_details.url = upload.access_url;
        upload_details.progress = state.progress;
        if (state.status === 'error') upload_details.progress = -1;
        on_change(upload_details);
      });
      on_change(upload_details);
    });
    fileReader.readAsArrayBuffer(file);
  }
  static #_ = this.ɵfac = function UploadListFieldComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || UploadListFieldComponent)();
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵdefineComponent"]({
    type: UploadListFieldComponent,
    selectors: [["upload-list"]],
    features: [_angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵProvidersFeature"]([{
      provide: _angular_forms__WEBPACK_IMPORTED_MODULE_6__.NG_VALUE_ACCESSOR,
      useExisting: (0,_angular_core__WEBPACK_IMPORTED_MODULE_4__.forwardRef)(() => UploadListFieldComponent),
      multi: true
    }])],
    decls: 15,
    vars: 2,
    consts: () => {
      let i18n_0;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_8563959152643174307$$LIBS_FORM_FIELDS_SRC_LIB_UPLOAD_LIST_FIELD_COMPONENT_TS_0 = goog.getMsg("Drop files");
        i18n_0 = MSG_EXTERNAL_8563959152643174307$$LIBS_FORM_FIELDS_SRC_LIB_UPLOAD_LIST_FIELD_COMPONENT_TS_0;
      } else {
        i18n_0 = $localize`:␟23f1ffc24dd64fff388b73d7a0fd774ccdcb016c␟8563959152643174307:Drop files`;
      }
      let i18n_1;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_6627551976444260400$$LIBS_FORM_FIELDS_SRC_LIB_UPLOAD_LIST_FIELD_COMPONENT_TS_1 = goog.getMsg("or");
        i18n_1 = MSG_EXTERNAL_6627551976444260400$$LIBS_FORM_FIELDS_SRC_LIB_UPLOAD_LIST_FIELD_COMPONENT_TS_1;
      } else {
        i18n_1 = $localize`:␟053e81597467a642e04109eebe934c84e6a1f467␟6627551976444260400:or`;
      }
      let i18n_2;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_787163983066183218$$LIBS_FORM_FIELDS_SRC_LIB_UPLOAD_LIST_FIELD_COMPONENT_TS_2 = goog.getMsg("Browse");
        i18n_2 = MSG_EXTERNAL_787163983066183218$$LIBS_FORM_FIELDS_SRC_LIB_UPLOAD_LIST_FIELD_COMPONENT_TS_2;
      } else {
        i18n_2 = $localize`:␟2c7dc726e93bcf3ca2f316bbebe96fa1e5288ba0␟787163983066183218:Browse`;
      }
      let i18n_3;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_7718554075744605971$$LIBS_FORM_FIELDS_SRC_LIB_UPLOAD_LIST_FIELD_COMPONENT_TS_3 = goog.getMsg("No uploaded files");
        i18n_3 = MSG_EXTERNAL_7718554075744605971$$LIBS_FORM_FIELDS_SRC_LIB_UPLOAD_LIST_FIELD_COMPONENT_TS_3;
      } else {
        i18n_3 = $localize`:␟5d00f53d21b24330adb70a4f0579ee811f589bd4␟7718554075744605971:No uploaded files`;
      }
      return [["empty_state", ""], i18n_0, i18n_1, i18n_2, i18n_3, [1, "flex", "items-center", "space-x-2"], [1, "w-52", "h-48", "relative", "border-2", "border-dashed", "border-base-200", "flex", "flex-col", "items-center", "justify-center", "rounded", "hover:bg-neutral", "cursor-pointer"], [1, "text-3xl", "mb-2"], [1, "text-center"], [1, "text-center", "text-xs", "my-1"], ["btn", "", "matRipple", "", 1, "w-28"], ["multiple", "true", "type", "file", 1, "absolute", "inset-0", "opacity-0", "max-w-full", 3, "change"], [1, "w-1/2", "h-48", "flex-1", "flex", "flex-col", "items-center"], ["list", "", "class", "space-y-2 w-full h-full overflow-auto", 4, "ngIf", "ngIfElse"], ["list", "", 1, "space-y-2", "w-full", "h-full", "overflow-auto"], ["item", "", "class", "w-full flex items-center border border-base-200 rounded bg-base-100 hover:bg-base-200", 3, "!bg-error", "!bg-opacity-20", 4, "ngFor", "ngForOf"], ["item", "", 1, "w-full", "flex", "items-center", "border", "border-base-200", "rounded", "bg-base-100", "hover:bg-base-200"], [1, "flex-1", "w-px", "font-mono", "truncate", "px-2", "text-sm"], [4, "ngIf"], ["icon", "", "matRipple", "", "target", "_blank", "rel", "noopener noreferrer", 3, "href", 4, "ngIf"], ["icon", "", 3, "click"], [1, "relative", "mx-1"], ["mode", "determinate", 3, "diameter", "value"], [1, "absolute", "top-1/2", "left-1/2", "-translate-x-1/2", "-translate-y-1/2", "text-sm", "font-bold"], ["icon", "", "matRipple", "", "target", "_blank", "rel", "noopener noreferrer", 3, "href"], [1, "h-full", "w-full", "flex", "flex-col", "justify-center", "items-center"], [1, "opacity-30"]];
    },
    template: function UploadListFieldComponent_Template(rf, ctx) {
      if (rf & 1) {
        const _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵgetCurrentView"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](0, "div", 5)(1, "div", 6)(2, "app-icon", 7);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtext"](3, "upload_file");
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](4, "p", 8);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵi18n"](5, 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](6, "p", 9);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵi18n"](7, 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](8, "button", 10);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵi18n"](9, 3);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](10, "input", 11);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵlistener"]("change", function UploadListFieldComponent_Template_input_change_10_listener($event) {
          _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵrestoreView"](_r1);
          return _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵresetView"](ctx.onFileEvent($event));
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementStart"](11, "div", 12);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](12, UploadListFieldComponent_div_12_Template, 2, 1, "div", 13);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplate"](13, UploadListFieldComponent_ng_template_13_Template, 3, 0, "ng-template", null, 0, _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵtemplateRefExtractor"]);
      }
      if (rf & 2) {
        const empty_state_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵreference"](14);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵadvance"](12);
        _angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵproperty"]("ngIf", ctx.list == null ? null : ctx.list.length)("ngIfElse", empty_state_r5);
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_7__.NgForOf, _angular_common__WEBPACK_IMPORTED_MODULE_7__.NgIf, _angular_material_core__WEBPACK_IMPORTED_MODULE_8__.MatRipple, _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_3__.IconComponent, _angular_material_progress_spinner__WEBPACK_IMPORTED_MODULE_9__.MatProgressSpinner]
  });
}

/***/ }),

/***/ 840:
/*!***************************************************************!*\
  !*** ./libs/form-fields/src/lib/user-list-field.component.ts ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   UserListFieldComponent: () => (/* binding */ UserListFieldComponent)
/* harmony export */ });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! @angular/forms */ 34456);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! rxjs/operators */ 35443);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! rxjs/operators */ 19803);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! rxjs/operators */ 71963);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! rxjs/operators */ 29314);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! rxjs/operators */ 66000);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! rxjs/operators */ 57871);
/* harmony import */ var _angular_cdk_keycodes__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @angular/cdk/keycodes */ 74879);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! rxjs */ 90521);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! rxjs */ 68824);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! rxjs */ 71536);
/* harmony import */ var libs_users_src_lib_new_user_modal_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! libs/users/src/lib/new-user-modal.component */ 11543);
/* harmony import */ var libs_users_src_lib_guests_fn__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! libs/users/src/lib/guests.fn */ 86039);
/* harmony import */ var libs_users_src_lib_staff_fn__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! libs/users/src/lib/staff.fn */ 2372);
/* harmony import */ var libs_users_src_lib_user_class__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! libs/users/src/lib/user.class */ 93693);
/* harmony import */ var libs_users_src_lib_user_utilities__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! libs/users/src/lib/user.utilities */ 24129);
/* harmony import */ var _placeos_ts_client__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @placeos/ts-client */ 35713);
/* harmony import */ var _angular_material_dialog__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @angular/material/dialog */ 12587);
















const _c0 = ["search_field"];
function UserListFieldComponent_mat_chip_row_6_app_icon_4_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](0, "app-icon", 22);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵpipe"](1, "placeuser");
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵpipe"](2, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵpipe"](4, "placeuser");
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵpipe"](5, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    let tmp_7_0;
    let tmp_8_0;
    const item_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵnextContext"]().$implicit;
    const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵproperty"]("matTooltip", (tmp_7_0 = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵpipeBind1"](2, 4, _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵpipeBind1"](1, 2, item_r3 == null ? null : item_r3.email))) == null ? null : tmp_7_0.location_name_time(ctx_r3.time));
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtextInterpolate1"](" ", (tmp_8_0 = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵpipeBind1"](5, 8, _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵpipeBind1"](4, 6, item_r3 == null ? null : item_r3.email))) == null ? null : tmp_8_0.location_icon(ctx_r3.time), " ");
  }
}
function UserListFieldComponent_mat_chip_row_6_Template(rf, ctx) {
  if (rf & 1) {
    const _r2 = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](0, "mat-chip-row", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵlistener"]("removed", function UserListFieldComponent_mat_chip_row_6_Template_mat_chip_row_removed_0_listener() {
      const item_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵrestoreView"](_r2).$implicit;
      const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵresetView"](ctx_r3.removeUser(item_r3));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](1, "div", 19)(2, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtemplate"](4, UserListFieldComponent_mat_chip_row_6_app_icon_4_Template, 6, 10, "app-icon", 20);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](5, "button", 21)(6, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtext"](7, "cancel");
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]()()();
  }
  if (rf & 2) {
    const item_r3 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵclassProp"]("bg-warning", item_r3.is_external);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtextInterpolate"](item_r3.name || item_r3.email);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵproperty"]("ngIf", !item_r3.is_external);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵattribute"]("aria-label", "Remove " + (item_r3.name || item_r3.email));
  }
}
function UserListFieldComponent_mat_spinner_10_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelement"](0, "mat-spinner", 23);
  }
}
function UserListFieldComponent_mat_option_13_Template(rf, ctx) {
  if (rf & 1) {
    const _r5 = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](0, "mat-option", 24);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵlistener"]("click", function UserListFieldComponent_mat_option_13_Template_mat_option_click_0_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵrestoreView"](_r5);
      const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵresetView"](ctx_r3.addUserFromEmail());
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵi18n"](1, 4);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵi18nExp"](ctx_r3.search$.getValue());
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵi18nApply"](1);
  }
}
function UserListFieldComponent_mat_option_14_Template(rf, ctx) {
  if (rf & 1) {
    const _r6 = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](0, "mat-option", 25);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵlistener"]("click", function UserListFieldComponent_mat_option_14_Template_mat_option_click_0_listener() {
      const user_r7 = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵrestoreView"](_r6).$implicit;
      const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵresetView"](ctx_r3.addUser(user_r7));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelement"](2, "br");
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](3, "span", 26);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const user_r7 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtextInterpolate1"](" ", user_r7.name, "");
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtextInterpolate"](user_r7.email);
  }
}
function UserListFieldComponent_div_16_Template(rf, ctx) {
  if (rf & 1) {
    const _r8 = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](0, "div", 27)(1, "button", 28);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵlistener"]("click", function UserListFieldComponent_div_16_Template_button_click_1_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵrestoreView"](_r8);
      const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵresetView"](ctx_r3.openNewUserModal());
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵi18nStart"](2, 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](3, "div", 29);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelement"](4, "span", 30);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵi18nEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](5, "button", 31);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵi18nStart"](6, 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](7, "div", 29);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelement"](8, "span", 30);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](9, "input", 32);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵlistener"]("change", function UserListFieldComponent_div_16_Template_input_change_9_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵrestoreView"](_r8);
      const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵresetView"](ctx_r3.addUsersFromFile($event));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵi18nEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](10, "button", 33);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵlistener"]("click", function UserListFieldComponent_div_16_Template_button_click_10_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵrestoreView"](_r8);
      const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵnextContext"]();
      ctx_r3.downloadCSVTemplate();
      return _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵresetView"](ctx_r3.download.emit());
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵi18nStart"](11, 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](12, "div", 29);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelement"](13, "span", 30);
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵi18nEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]()();
  }
}
function validateEmail(email) {
  const re = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
  return re.test(email);
}
const ACCEPTED_FILE_TYPES = ['text/csv', 'text/plain'];
const DENIED_FILE_TYPES = ['application/vnd.ms-excel', 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet'];
class UserListFieldComponent extends _placeos_common__WEBPACK_IMPORTED_MODULE_0__.AsyncHandler {
  searchStaff(q) {
    return this._settings.get('app.basic_user_search') ? (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_6__.queryUsers)({
      q,
      authority_id: (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_6__.authority)()?.id
    }).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.map)(_ => _.data.map(u => new libs_users_src_lib_user_class__WEBPACK_IMPORTED_MODULE_4__.User(u)))) : (0,libs_users_src_lib_staff_fn__WEBPACK_IMPORTED_MODULE_3__.searchStaff)(q);
  }
  get search_valid_email() {
    return validateEmail(this.search$.getValue());
  }
  constructor(_dialog, _settings) {
    super();
    this._dialog = _dialog;
    this._settings = _settings;
    this.time = Date.now();
    /** Number of characters needed before a search will start */
    this.limit = 3;
    /** Whether guests should also show when searching for users */
    this.guests = false;
    /** Whether guests should also show when searching for users */
    this.guests_only = false;
    /** Whether optional actions should be shown */
    this.hide_actions = false;
    /** Whether as custom template will be provided outside the component */
    this.custom_template = false;
    /** Emitter for action to make a new user */
    this.new_user = new _angular_core__WEBPACK_IMPORTED_MODULE_7__.EventEmitter();
    /** Whether user should download the CSV template */
    this.download = new _angular_core__WEBPACK_IMPORTED_MODULE_7__.EventEmitter();
    this.separatorKeysCodes = [_angular_cdk_keycodes__WEBPACK_IMPORTED_MODULE_9__.ENTER, _angular_cdk_keycodes__WEBPACK_IMPORTED_MODULE_9__.COMMA];
    /** Whether user list is loading */
    this.loading = false;
    this.search$ = new rxjs__WEBPACK_IMPORTED_MODULE_10__.BehaviorSubject('');
    /** User list to display */
    this.user_list$ = this.search$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_11__.debounceTime)(300), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.switchMap)(_ => {
      this.loading = true;
      return (_ ? this.guests ? (0,rxjs__WEBPACK_IMPORTED_MODULE_13__.combineLatest)([this.searchStaff(_), (0,libs_users_src_lib_guests_fn__WEBPACK_IMPORTED_MODULE_2__.searchGuests)(_)]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.map)(([staff, guests]) => {
        if (this.guests_only) staff = [];
        const visitors_list = [];
        const visitors = this._settings.get('visitor-invitees') || [];
        for (const item of visitors) {
          const [email, name, company] = item.split('|');
          visitors_list.push({
            email,
            name,
            company
          });
        }
        return (0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.unique)(staff.concat(guests).concat(visitors_list), 'email');
      })) : this.searchStaff(_) : (0,rxjs__WEBPACK_IMPORTED_MODULE_14__.of)([])).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_15__.catchError)(_ => (0,rxjs__WEBPACK_IMPORTED_MODULE_14__.of)([])));
    }), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_16__.tap)(_ => this.loading = false));
    /** List of active selected users on the list */
    this.active_list = [];
    this.validFn = s => validateEmail(s);
    this.emptyClick = () => this.openNewUserModal(new libs_users_src_lib_user_class__WEBPACK_IMPORTED_MODULE_4__.User());
  }
  updateSearch(new_value = '') {
    this.timeout('search', () => this.search$.next(new_value));
  }
  addUserFromEmail(email = '') {
    if (!email) email = this.search$.getValue();
    if (!validateEmail(email)) return;
    const user = new libs_users_src_lib_user_class__WEBPACK_IMPORTED_MODULE_4__.User({
      id: email,
      email,
      name: email.split('@')[0]
    });
    this.addUser(user);
    const {
      name,
      organisation
    } = user;
    const visitor_details = `${email}|${name}|${organisation}`;
    const old_visitors = this._settings.get('visitor-invitees') || [];
    this._settings.saveUserSetting('visitor-invitees', [...old_visitors.filter(_ => !_.includes(email)), visitor_details]);
    this.timeout('clear_search', () => {
      this.search$.next('');
      this._search_el.nativeElement.value = '';
    }, 100);
  }
  /**
   * Add user to the user list
   * @param user
   */
  addUser(user) {
    const list = this.active_list?.filter(_ => _.id !== user.id) || [];
    this.setValue([...list, new libs_users_src_lib_user_class__WEBPACK_IMPORTED_MODULE_4__.User({
      ...user,
      id: user.id || user.email,
      visit_expected: (!user.id && user.is_external !== true ? user.visit_expected : null) ?? true
    })]);
    this.timeout('clear_search', () => {
      this.search$.next('');
      this._search_el.nativeElement.value = '';
    }, 100);
  }
  /**
   * Remove user from the user list
   * @param user
   */
  removeUser(user) {
    const list = this.active_list.filter(a_user => a_user.id !== user.id);
    this.setValue(list);
  }
  /**
   * Load CSV file and populate the user list with the contents
   * @param event File input field event
   */
  addUsersFromFile(event) {
    /* istanbul ignore else */
    if (event.target) {
      const file = event.target.files[0];
      /* istanbul ignore else */
      if (file) {
        if (!ACCEPTED_FILE_TYPES.includes(file.type) || DENIED_FILE_TYPES.includes(file.type)) {
          (0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.notifyError)('Only CSV files are supported');
          return;
        }
        const reader = new FileReader();
        reader.readAsText(file, 'UTF-8');
        reader.addEventListener('load', evt => {
          this.processCsvData(evt.srcElement.result);
          event.target.value = '';
        });
        reader.addEventListener('error', _ => (0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.notifyError)('Error reading file.'));
      }
    }
  }
  /**
   * Process raw CSV data and save user data to attendee list
   * @param data CSV data
   */
  processCsvData(data) {
    const list = (0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.csvToJson)(data) || [];
    const id = (0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.currentUser)()?.staff_id || 'unknown';
    for (const el of list) {
      el.name = el.name || `${el.first_name} ${el.last_name}`;
      const display = (el.name || `${Math.floor(Math.random() * 9999_9999)}`).split(' ').join('_').toLowerCase();
      /* istanbul ignore else */
      if (!el.email) {
        el.email = `${display}+${id}@guest.${libs_users_src_lib_user_utilities__WEBPACK_IMPORTED_MODULE_5__.USER_DOMAIN}`;
      }
      const internal_emails = this._settings.get('app.bookings.internal_emails') || ['place.tech'];
      el.visit_expected = el.visit_expected ?? !internal_emails.find(_ => el.email.endsWith(_));
      /** Convert phone to string. PWCME-544 */
      el.phone = '' + el.phone;
      this.addUser(new libs_users_src_lib_user_class__WEBPACK_IMPORTED_MODULE_4__.User(el));
    }
  }
  /* istanbul ignore next */
  /** Download template CSV file */
  downloadCSVTemplate() {
    if (this.custom_template) return;
    const template = `Organisation,First Name,Last Name,Email,Phone,Assistance Required,Visit Expected\nFake Org,John,Smith,john.smith@example.com,01234567898,false,true`;
    (0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.downloadFile)('template.csv', template);
  }
  /**
   * Update the form field value
   * @param new_value New value to set on the form field
   */
  setValue(new_value) {
    this.active_list = new_value;
    if (this._onChange) {
      this._onChange(new_value);
    }
  }
  /* istanbul ignore next */
  /**
   * Update local value when form control value is changed
   * @param value The new value for the component
   */
  writeValue(value) {
    this.active_list = value;
  }
  setDisabledState(disabled) {
    this.disabled = disabled;
  }
  /* istanbul ignore next */
  /**
   * Registers a callback function that is called when the control's value changes in the UI.
   * @param fn The callback function to register
   */
  registerOnChange(fn) {
    this._onChange = fn;
  }
  /* istanbul ignore next */
  /**
   * Registers a callback function is called by the forms API on initialization to update the form model on blur.
   * @param fn The callback function to register
   */
  registerOnTouched(fn) {
    this._onTouch = fn;
  }
  displayFn(item) {
    return item?.name || '';
  }
  /**
   * Open modal to add or update user details
   */
  openNewUserModal(user = new libs_users_src_lib_user_class__WEBPACK_IMPORTED_MODULE_4__.User()) {
    const ref = this._dialog.open(libs_users_src_lib_new_user_modal_component__WEBPACK_IMPORTED_MODULE_1__.NewUserModalComponent, {
      width: 'auto',
      height: 'auto',
      data: {
        user
      }
    });
    ref.componentInstance?.event.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_17__.first)(_ => _.reason === 'done')).subscribe(event => {
      this.addUser(event.metadata);
      ref.close();
    });
  }
  static #_ = this.ɵfac = function UserListFieldComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || UserListFieldComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵdirectiveInject"](_angular_material_dialog__WEBPACK_IMPORTED_MODULE_18__.MatDialog), _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵdirectiveInject"](_placeos_common__WEBPACK_IMPORTED_MODULE_0__.SettingsService));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵdefineComponent"]({
    type: UserListFieldComponent,
    selectors: [["a-user-list-field"]],
    viewQuery: function UserListFieldComponent_Query(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵviewQuery"](_c0, 5);
      }
      if (rf & 2) {
        let _t;
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵloadQuery"]()) && (ctx._search_el = _t.first);
      }
    },
    inputs: {
      time: "time",
      disabled: "disabled",
      limit: "limit",
      guests: "guests",
      guests_only: "guests_only",
      hide_actions: "hide_actions",
      custom_template: "custom_template",
      filter: "filter"
    },
    outputs: {
      new_user: "new_user",
      download: "download"
    },
    features: [_angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵProvidersFeature"]([{
      provide: _angular_forms__WEBPACK_IMPORTED_MODULE_19__.NG_VALUE_ACCESSOR,
      useExisting: (0,_angular_core__WEBPACK_IMPORTED_MODULE_7__.forwardRef)(() => UserListFieldComponent),
      multi: true
    }]), _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵInheritDefinitionFeature"]],
    decls: 17,
    vars: 14,
    consts: () => {
      let i18n_0;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_5361968336322693258$$LIBS_FORM_FIELDS_SRC_LIB_USER_LIST_FIELD_COMPONENT_TS_0 = goog.getMsg("Type a name or email");
        i18n_0 = MSG_EXTERNAL_5361968336322693258$$LIBS_FORM_FIELDS_SRC_LIB_USER_LIST_FIELD_COMPONENT_TS_0;
      } else {
        i18n_0 = $localize`:␟5ecf84665fa441ea616e171804e6652d010c9ed2␟5361968336322693258:Type a name or email`;
      }
      let i18n_1;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_2206723750290169400$$LIBS_FORM_FIELDS_SRC_LIB_USER_LIST_FIELD_COMPONENT_TS_1 = goog.getMsg(" Add external user with email \"{$interpolation}\" ", {
          "interpolation": "\uFFFD0\uFFFD"
        }, {
          original_code: {
            "interpolation": "{{ search$.getValue() }}"
          }
        });
        i18n_1 = MSG_EXTERNAL_2206723750290169400$$LIBS_FORM_FIELDS_SRC_LIB_USER_LIST_FIELD_COMPONENT_TS_1;
      } else {
        i18n_1 = $localize`:␟8ddbc311625de88f24142f65336765837378c1ca␟2206723750290169400: Add external user with email "${"\uFFFD0\uFFFD"}:INTERPOLATION:" `;
      }
      let i18n_2;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @desc Add new external attendee
         */
        const MSG_EXTERNAL_145038058737617323$$LIBS_FORM_FIELDS_SRC_LIB_USER_LIST_FIELD_COMPONENT_TS_2 = goog.getMsg("{$startTagDiv} Add\u00A0{$startTagSpan}External{$closeTagSpan}{$closeTagDiv}", {
          "closeTagDiv": "\uFFFD/#3\uFFFD",
          "closeTagSpan": "\uFFFD/#4\uFFFD",
          "startTagDiv": "\uFFFD#3\uFFFD",
          "startTagSpan": "\uFFFD#4\uFFFD"
        }, {
          original_code: {
            "closeTagDiv": "</div>",
            "closeTagSpan": "</span>",
            "startTagDiv": "<div class=\"flex items-center justify-center\">",
            "startTagSpan": "<span class=\"hidden sm:inline\">"
          }
        });
        i18n_2 = MSG_EXTERNAL_145038058737617323$$LIBS_FORM_FIELDS_SRC_LIB_USER_LIST_FIELD_COMPONENT_TS_2;
      } else {
        i18n_2 = $localize`:Add new external attendee␟afa9063944169ae2cd6bd8c0d5e943468ab77e90␟145038058737617323:${"\uFFFD#3\uFFFD"}:START_TAG_DIV: Add ${"\uFFFD#4\uFFFD"}:START_TAG_SPAN:External${"\uFFFD/#4\uFFFD"}:CLOSE_TAG_SPAN:${"\uFFFD/#3\uFFFD"}:CLOSE_TAG_DIV:`;
      }
      let i18n_3;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @desc Upload attendee list from CSV file
         */
        const MSG_EXTERNAL_4462048288204440387$$LIBS_FORM_FIELDS_SRC_LIB_USER_LIST_FIELD_COMPONENT_TS_3 = goog.getMsg("{$startTagDiv} Upload\u00A0{$startTagSpan}CSV{$closeTagSpan}{$closeTagDiv}{$tagInput}", {
          "closeTagDiv": "\uFFFD/#7\uFFFD",
          "closeTagSpan": "\uFFFD/#8\uFFFD",
          "startTagDiv": "\uFFFD#7\uFFFD",
          "startTagSpan": "\uFFFD#8\uFFFD",
          "tagInput": "\uFFFD#9\uFFFD\uFFFD/#9\uFFFD"
        }, {
          original_code: {
            "closeTagDiv": "</div>",
            "closeTagSpan": "</span>",
            "startTagDiv": "<div class=\"flex items-center justify-center\">",
            "startTagSpan": "<span class=\"hidden sm:inline\">",
            "tagInput": "<input\n                        class=\"opacity-0 absolute inset-0\"\n                        type=\"file\"\n                        (change)=\"addUsersFromFile($event)\"\n                    />"
          }
        });
        i18n_3 = MSG_EXTERNAL_4462048288204440387$$LIBS_FORM_FIELDS_SRC_LIB_USER_LIST_FIELD_COMPONENT_TS_3;
      } else {
        i18n_3 = $localize`:Upload attendee list from CSV file␟0115abeee77902eeda78bb11be738c011e8be933␟4462048288204440387:${"\uFFFD#7\uFFFD"}:START_TAG_DIV: Upload ${"\uFFFD#8\uFFFD"}:START_TAG_SPAN:CSV${"\uFFFD/#8\uFFFD"}:CLOSE_TAG_SPAN:${"\uFFFD/#7\uFFFD"}:CLOSE_TAG_DIV:${"\uFFFD#9\uFFFD\uFFFD/#9\uFFFD"}:TAG_INPUT:`;
      }
      let i18n_4;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @desc Download template CSV file
         */
        const MSG_EXTERNAL_6030611805365927572$$LIBS_FORM_FIELDS_SRC_LIB_USER_LIST_FIELD_COMPONENT_TS_4 = goog.getMsg("{$startTagDiv}{$startTagSpan}CSV{$closeTagSpan}\u00A0Template {$closeTagDiv}", {
          "closeTagDiv": "\uFFFD/#12\uFFFD",
          "closeTagSpan": "\uFFFD/#13\uFFFD",
          "startTagDiv": "\uFFFD#12\uFFFD",
          "startTagSpan": "\uFFFD#13\uFFFD"
        }, {
          original_code: {
            "closeTagDiv": "</div>",
            "closeTagSpan": "</span>",
            "startTagDiv": "<div class=\"flex items-center justify-center\">",
            "startTagSpan": "<span class=\"hidden sm:inline\">"
          }
        });
        i18n_4 = MSG_EXTERNAL_6030611805365927572$$LIBS_FORM_FIELDS_SRC_LIB_USER_LIST_FIELD_COMPONENT_TS_4;
      } else {
        i18n_4 = $localize`:Download template CSV file␟f761a83c085b86f026cdf949cf8015ee62d8ca8c␟6030611805365927572:${"\uFFFD#12\uFFFD"}:START_TAG_DIV:${"\uFFFD#13\uFFFD"}:START_TAG_SPAN:CSV${"\uFFFD/#13\uFFFD"}:CLOSE_TAG_SPAN: Template ${"\uFFFD/#12\uFFFD"}:CLOSE_TAG_DIV:`;
      }
      return [["origin", "matAutocompleteOrigin"], ["chipList", ""], ["search_field", ""], ["auto", "matAutocomplete"], i18n_1, i18n_2, i18n_3, i18n_4, ["form-field", "", 1, "mb-4"], ["search", ""], ["appearance", "outline", "matAutocompleteOrigin", "", 1, "w-full"], ["aria-label", "User Seleciom"], ["user", "", 3, "bg-warning", "removed", 4, "ngFor", "ngForOf"], ["placeholder", i18n_0, "name", "user_email", 3, "ngModelChange", "matChipInputTokenEnd", "ngModel", "matAutocomplete", "matChipInputFor", "matChipInputSeparatorKeyCodes"], ["diameter", "24", "matSuffix", "", 4, "ngIf"], [3, "click", 4, "ngIf"], ["class", "leading-tight", 3, "click", 4, "ngFor", "ngForOf"], ["class", "flex items-center space-x-2 -mt-4", "actions", "", 4, "ngIf"], ["user", "", 3, "removed"], [1, "flex", "items-center", "space-x-2"], [3, "matTooltip", 4, "ngIf"], ["matChipRemove", "", "remove", ""], [3, "matTooltip"], ["diameter", "24", "matSuffix", ""], [3, "click"], [1, "leading-tight", 3, "click"], [1, "text-xs"], ["actions", "", 1, "flex", "items-center", "space-x-2", "-mt-4"], ["btn", "", "matRipple", "", "type", "button", "name", "new-contact", 1, "inverse", "flex-1", "sm:flex-none", 3, "click"], [1, "flex", "items-center", "justify-center"], [1, "hidden", "sm:inline"], ["btn", "", "matRipple", "", "type", "button", "name", "upload-csv", 1, "relative", "inverse", "flex-1", "sm:flex-none"], ["type", "file", 1, "opacity-0", "absolute", "inset-0", 3, "change"], ["btn", "", "matRipple", "", "type", "button", "name", "download-template", 1, "inverse", "flex-1", "sm:flex-none", 3, "click"]];
    },
    template: function UserListFieldComponent_Template(rf, ctx) {
      if (rf & 1) {
        const _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵgetCurrentView"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](0, "div", 8)(1, "div", 9)(2, "mat-form-field", 10, 0)(4, "mat-chip-grid", 11, 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtemplate"](6, UserListFieldComponent_mat_chip_row_6_Template, 8, 5, "mat-chip-row", 12);
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](7, "input", 13, 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵpipe"](9, "async");
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵlistener"]("ngModelChange", function UserListFieldComponent_Template_input_ngModelChange_7_listener($event) {
          _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵrestoreView"](_r1);
          return _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵresetView"](ctx.updateSearch($event));
        })("matChipInputTokenEnd", function UserListFieldComponent_Template_input_matChipInputTokenEnd_7_listener($event) {
          _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵrestoreView"](_r1);
          return _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵresetView"](ctx.addUserFromEmail($event.value));
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtemplate"](10, UserListFieldComponent_mat_spinner_10_Template, 1, 0, "mat-spinner", 14);
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementStart"](11, "mat-autocomplete", null, 3);
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtemplate"](13, UserListFieldComponent_mat_option_13_Template, 2, 1, "mat-option", 15)(14, UserListFieldComponent_mat_option_14_Template, 5, 2, "mat-option", 16);
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵpipe"](15, "async");
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵtemplate"](16, UserListFieldComponent_div_16_Template, 14, 0, "div", 17);
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵelementEnd"]();
      }
      if (rf & 2) {
        const chipList_r9 = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵreference"](5);
        const auto_r10 = _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵreference"](12);
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵattribute"]("disabled", ctx.disabled);
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"](6);
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵproperty"]("ngForOf", ctx.active_list);
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵproperty"]("ngModel", _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵpipeBind1"](9, 10, ctx.search$))("matAutocomplete", auto_r10)("matChipInputFor", chipList_r9)("matChipInputSeparatorKeyCodes", ctx.separatorKeysCodes);
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵproperty"]("ngIf", ctx.loading);
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵproperty"]("ngIf", ctx.search_valid_email);
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵproperty"]("ngForOf", _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵpipeBind1"](15, 12, ctx.user_list$));
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_7__["ɵɵproperty"]("ngIf", !ctx.hide_actions);
      }
    },
    styles: ["[search][_ngcontent-%COMP%] {\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXItbGlzdC1maWVsZC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO1lBQ0EiLCJmaWxlIjoidXNlci1saXN0LWZpZWxkLmNvbXBvbmVudC50cyIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgW3NlYXJjaF0ge1xuICAgICAgICAgICAgfVxuICAgICAgICAiXX0= */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvZm9ybS1maWVsZHMvc3JjL2xpYi91c2VyLWxpc3QtZmllbGQuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtZQUNBOztBQUVaLGdVQUFnVSIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgW3NlYXJjaF0ge1xuICAgICAgICAgICAgfVxuICAgICAgICAiXSwic291cmNlUm9vdCI6IiJ9 */"]
  });
}

/***/ }),

/***/ 18000:
/*!*****************************************************************!*\
  !*** ./libs/form-fields/src/lib/user-search-field.component.ts ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   UserSearchFieldComponent: () => (/* binding */ UserSearchFieldComponent)
/* harmony export */ });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @angular/forms */ 34456);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! rxjs */ 33119);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! rxjs */ 71536);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! rxjs */ 68757);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! rxjs/operators */ 35443);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! rxjs/operators */ 19803);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! rxjs/operators */ 6109);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! rxjs/operators */ 71963);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! rxjs/operators */ 29314);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var libs_users_src_lib_guests_fn__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! libs/users/src/lib/guests.fn */ 86039);
/* harmony import */ var libs_users_src_lib_staff_fn__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! libs/users/src/lib/staff.fn */ 2372);
/* harmony import */ var libs_users_src_lib_user_class__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! libs/users/src/lib/user.class */ 93693);
/* harmony import */ var _placeos_ts_client__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @placeos/ts-client */ 35713);
/* eslint-disable @typescript-eslint/member-ordering */











const _c0 = ["input"];
function UserSearchFieldComponent_mat_spinner_5_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelement"](0, "mat-spinner", 11);
  }
}
function UserSearchFieldComponent_mat_option_8_Template(rf, ctx) {
  if (rf & 1) {
    const _r2 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "mat-option", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("click", function UserSearchFieldComponent_mat_option_8_Template_mat_option_click_0_listener() {
      const option_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵrestoreView"](_r2).$implicit;
      const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"]();
      ctx_r3.setValue(option_r3);
      return _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵresetView"](ctx_r3.blurInput());
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](1, "div", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](3, "div", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const option_r3 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtextInterpolate"](option_r3.name);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtextInterpolate1"](" ", option_r3.email, " ");
  }
}
function UserSearchFieldComponent_mat_option_9_Template(rf, ctx) {
  if (rf & 1) {
    const _r5 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "mat-option", 15)(1, "div", 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("mousedown", function UserSearchFieldComponent_mat_option_9_Template_div_mousedown_1_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵrestoreView"](_r5);
      $event.stopPropagation();
      return _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵresetView"]($event.preventDefault());
    })("touchstart", function UserSearchFieldComponent_mat_option_9_Template_div_touchstart_1_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵrestoreView"](_r5);
      $event.stopPropagation();
      return _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵresetView"]($event.preventDefault());
    })("click", function UserSearchFieldComponent_mat_option_9_Template_div_click_1_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵrestoreView"](_r5);
      const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"]();
      ctx_r3.setValue(ctx_r3.search_str);
      $event.stopPropagation();
      return _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵresetView"]($event.preventDefault());
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](2, "div", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵi18n"](3, 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]()()();
  }
  if (rf & 2) {
    const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵi18nExp"](ctx_r3.search_str);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵi18nApply"](3);
  }
}
function UserSearchFieldComponent_mat_option_10_Template(rf, ctx) {
  if (rf & 1) {
    const _r6 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "mat-option", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("click", function UserSearchFieldComponent_mat_option_10_Template_mat_option_click_0_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵrestoreView"](_r6);
      const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵresetView"](ctx_r3.empty_fn());
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("disabled", !ctx_r3.empty_fn);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtextInterpolate2"](" ", ctx_r3.search_str ? "No users found." : "", " ", ctx_r3.error, " ");
  }
}
class UserSearchFieldComponent extends _placeos_common__WEBPACK_IMPORTED_MODULE_0__.AsyncHandler {
  constructor(_settings) {
    super();
    this._settings = _settings;
    /** Message to display when no user matches have been found */
    this.error = '';
    this.query_fn = q => this._settings.get('app.basic_user_search') ? (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_4__.queryUsers)({
      q,
      authority_id: (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_4__.authority)()?.id
    }).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.map)(_ => _.data.map(_ => new libs_users_src_lib_user_class__WEBPACK_IMPORTED_MODULE_3__.User(_)))) : (0,libs_users_src_lib_staff_fn__WEBPACK_IMPORTED_MODULE_2__.searchStaff)(q);
    /** Subject holding the value of the search */
    this.search$ = new rxjs__WEBPACK_IMPORTED_MODULE_7__.Subject();
    /** List of users from an API search */
    this.search_results$ = this.search$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.debounceTime)(400), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.distinctUntilChanged)(), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.switchMap)(query => {
      this.loading = true;
      return this.options && this.options.length > 0 ? (0,rxjs__WEBPACK_IMPORTED_MODULE_11__.of)(this.options) : query.length >= 3 ? !this.guests ? this.query_fn(query) : (0,rxjs__WEBPACK_IMPORTED_MODULE_12__.forkJoin)([(0,libs_users_src_lib_staff_fn__WEBPACK_IMPORTED_MODULE_2__.searchStaff)(query), (0,libs_users_src_lib_guests_fn__WEBPACK_IMPORTED_MODULE_1__.searchGuests)(query)]) : (0,rxjs__WEBPACK_IMPORTED_MODULE_11__.of)([]);
    }), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.catchError)(_ => (0,rxjs__WEBPACK_IMPORTED_MODULE_11__.of)([])), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.map)(list => {
      this.loading = false;
      list = (0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.flatten)(list);
      const search = (this.search_str || '').toLowerCase();
      return list.filter(item => !this.filter || this.filter(item, search));
    }));
    this.cancelReset = () => this.clearTimeout('reset');
    this.blurInput = () => {
      this.timeout('blur', () => this._input_el?.nativeElement?.blur());
    };
  }
  ngOnInit() {
    // Process API results
    this.subscription('search_results', this.search_results$.subscribe(list => this.user_list = list));
    this.resetSearchString();
  }
  /**
   * Reset the search string back to the name of the active user
   */
  resetSearchString() {
    this.timeout('reset', () => this.search_str = this.active_user?.name || '', 100);
  }
  /**
   * Update the form field value
   * @param new_value New value to set on the form field
   */
  setValue(new_value, email) {
    if (!new_value) return;
    if (typeof new_value === 'string' && new_value === this.search_str) {
      new_value = new libs_users_src_lib_user_class__WEBPACK_IMPORTED_MODULE_3__.User({
        name: (this.search_str || email || '').split('@')[0],
        email: this.search_str || email || ''
      });
    }
    const user = new_value;
    if (!('name' in user) && !('email' in user)) return;
    this.active_user = user;
    if (this._onChange) this._onChange(user);
    this.resetSearchString();
  }
  /**
   * Update local value when form control value is changed
   * @param value The new value for the component
   */
  writeValue(value) {
    this.active_user = value;
    this.resetSearchString();
  }
  setDisabledState(disabled) {
    this.disabled = disabled;
  }
  /**
   * Registers a callback function that is called when the control's value changes in the UI.
   * @param fn The callback function to register
   */
  registerOnChange(fn) {
    this._onChange = fn;
  }
  /**
   * Registers a callback function is called by the forms API on initialization to update the form model on blur.
   * @param fn The callback function to register
   */
  registerOnTouched(fn) {
    this._onTouch = fn;
  }
  static #_ = this.ɵfac = function UserSearchFieldComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || UserSearchFieldComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵdirectiveInject"](_placeos_common__WEBPACK_IMPORTED_MODULE_0__.SettingsService));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵdefineComponent"]({
    type: UserSearchFieldComponent,
    selectors: [["a-user-search-field"]],
    viewQuery: function UserSearchFieldComponent_Query(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵviewQuery"](_c0, 5, _angular_core__WEBPACK_IMPORTED_MODULE_5__.ElementRef);
      }
      if (rf & 2) {
        let _t;
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵloadQuery"]()) && (ctx._input_el = _t.first);
      }
    },
    inputs: {
      disabled: "disabled",
      placeholder: "placeholder",
      options: "options",
      guests: "guests",
      error: "error",
      validate: "validate",
      empty_fn: "empty_fn",
      filter: "filter",
      query_fn: "query_fn"
    },
    features: [_angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵProvidersFeature"]([{
      provide: _angular_forms__WEBPACK_IMPORTED_MODULE_14__.NG_VALUE_ACCESSOR,
      useExisting: (0,_angular_core__WEBPACK_IMPORTED_MODULE_5__.forwardRef)(() => UserSearchFieldComponent),
      multi: true
    }]), _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵInheritDefinitionFeature"]],
    decls: 11,
    vars: 8,
    consts: () => {
      let i18n_0;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_1390235508766899631$$LIBS_FORM_FIELDS_SRC_LIB_USER_SEARCH_FIELD_COMPONENT_TS_0 = goog.getMsg(" Add external attendee \"{$interpolation}\" ", {
          "interpolation": "\uFFFD0\uFFFD"
        }, {
          original_code: {
            "interpolation": "{{ search_str }}"
          }
        });
        i18n_0 = MSG_EXTERNAL_1390235508766899631$$LIBS_FORM_FIELDS_SRC_LIB_USER_SEARCH_FIELD_COMPONENT_TS_0;
      } else {
        i18n_0 = $localize`:␟bda749fab8de2e52f25203a840d2aca70b8e5b4d␟1390235508766899631: Add external attendee "${"\uFFFD0\uFFFD"}:INTERPOLATION:" `;
      }
      return [["input", ""], ["auto", "matAutocomplete"], i18n_0, ["appearance", "outline", 1, "w-full", "no-subscript"], ["matInput", "", "keyboard", "", "name", "user-search", 3, "ngModelChange", "keyup.enter", "blur", "focus", "ngModel", "disabled", "placeholder", "matAutocomplete"], ["matPrefix", "", 1, "text-2xl", "relative"], ["matSuffix", "", "diameter", "16", 4, "ngIf"], [3, "optionSelected"], [3, "click", 4, "ngFor", "ngForOf"], ["class", "relative pointer-events-none", 4, "ngIf"], [3, "disabled", "click", 4, "ngIf"], ["matSuffix", "", "diameter", "16"], [3, "click"], [1, "leading-tight"], [1, "text-xs", "opacity-60"], [1, "relative", "pointer-events-none"], [1, "absolute", "inset-0", "px-4", "pointer-events-auto", 3, "mousedown", "touchstart", "click"], [1, "pointer-events-none"], [3, "click", "disabled"]];
    },
    template: function UserSearchFieldComponent_Template(rf, ctx) {
      if (rf & 1) {
        const _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵgetCurrentView"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "mat-form-field", 3)(1, "input", 4, 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtwoWayListener"]("ngModelChange", function UserSearchFieldComponent_Template_input_ngModelChange_1_listener($event) {
          _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵrestoreView"](_r1);
          _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtwoWayBindingSet"](ctx.search_str, $event) || (ctx.search_str = $event);
          return _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵresetView"]($event);
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("ngModelChange", function UserSearchFieldComponent_Template_input_ngModelChange_1_listener($event) {
          _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵrestoreView"](_r1);
          return _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵresetView"](ctx.search$.next($event || ""));
        })("keyup.enter", function UserSearchFieldComponent_Template_input_keyup_enter_1_listener() {
          _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵrestoreView"](_r1);
          return _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵresetView"](ctx.validate && ctx.validate(ctx.search_str) ? ctx.setValue(ctx.search_str) : "");
        })("blur", function UserSearchFieldComponent_Template_input_blur_1_listener() {
          _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵrestoreView"](_r1);
          return _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵresetView"](ctx.resetSearchString());
        })("focus", function UserSearchFieldComponent_Template_input_focus_1_listener() {
          _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵrestoreView"](_r1);
          return _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵresetView"](ctx.cancelReset());
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](3, "app-icon", 5);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](4, "search");
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](5, UserSearchFieldComponent_mat_spinner_5_Template, 1, 0, "mat-spinner", 6);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](6, "mat-autocomplete", 7, 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("optionSelected", function UserSearchFieldComponent_Template_mat_autocomplete_optionSelected_6_listener($event) {
          _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵrestoreView"](_r1);
          return _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵresetView"](ctx.setValue($event.option.value));
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](8, UserSearchFieldComponent_mat_option_8_Template, 5, 2, "mat-option", 8)(9, UserSearchFieldComponent_mat_option_9_Template, 4, 1, "mat-option", 9)(10, UserSearchFieldComponent_mat_option_10_Template, 2, 3, "mat-option", 10);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
      }
      if (rf & 2) {
        const auto_r7 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵreference"](7);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtwoWayProperty"]("ngModel", ctx.search_str);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("disabled", ctx.disabled)("placeholder", ctx.placeholder || "Search for user...")("matAutocomplete", auto_r7);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](4);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngIf", ctx.loading);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngForOf", ctx.user_list);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngIf", ctx.search_str && ctx.validate && ctx.validate(ctx.search_str));
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngIf", !(ctx.user_list == null ? null : ctx.user_list.length) && (ctx.search_str || ctx.error));
      }
    },
    styles: ["[_nghost-%COMP%] {\n                display: block;\n            }\n            app-icon[_ngcontent-%COMP%] {\n                top: 0.15em;\n                left: -0.15em;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXItc2VhcmNoLWZpZWxkLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1lBQ1k7Z0JBQ0ksY0FBYztZQUNsQjtZQUNBO2dCQUNJLFdBQVc7Z0JBQ1gsYUFBYTtZQUNqQiIsImZpbGUiOiJ1c2VyLXNlYXJjaC1maWVsZC5jb21wb25lbnQudHMiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIDpob3N0IHtcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGFwcC1pY29uIHtcbiAgICAgICAgICAgICAgICB0b3A6IDAuMTVlbTtcbiAgICAgICAgICAgICAgICBsZWZ0OiAtMC4xNWVtO1xuICAgICAgICAgICAgfVxuICAgICAgICAiXX0= */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvZm9ybS1maWVsZHMvc3JjL2xpYi91c2VyLXNlYXJjaC1maWVsZC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLGNBQWM7WUFDbEI7WUFDQTtnQkFDSSxXQUFXO2dCQUNYLGFBQWE7WUFDakI7O0FBRVosZ2pCQUFnakIiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIDpob3N0IHtcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGFwcC1pY29uIHtcbiAgICAgICAgICAgICAgICB0b3A6IDAuMTVlbTtcbiAgICAgICAgICAgICAgICBsZWZ0OiAtMC4xNWVtO1xuICAgICAgICAgICAgfVxuICAgICAgICAiXSwic291cmNlUm9vdCI6IiJ9 */"]
  });
}

/***/ }),

/***/ 46773:
/*!*********************************!*\
  !*** ./libs/mocks/src/index.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   MOCKS: () => (/* reexport module object */ _mocks__WEBPACK_IMPORTED_MODULE_0__)
/* harmony export */ });
/* harmony import */ var _mocks__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./mocks */ 11110);


/***/ }),

/***/ 26155:
/*!***********************************************!*\
  !*** ./libs/mocks/src/lib/api/assets.data.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   MOCK_ASSETS: () => (/* binding */ MOCK_ASSETS),
/* harmony export */   MOCK_CATEGORIES: () => (/* binding */ MOCK_CATEGORIES),
/* harmony export */   MOCK_PRODUCTS: () => (/* binding */ MOCK_PRODUCTS),
/* harmony export */   MOCK_PURCHASE_ORDERS: () => (/* binding */ MOCK_PURCHASE_ORDERS)
/* harmony export */ });
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! date-fns */ 99908);

const MOCK_CATEGORIES = [{
  id: '1',
  name: 'Technology'
}, {
  id: '2',
  name: 'Furniture'
}, {
  id: '3',
  name: 'Stationary'
}, {
  id: '4',
  name: 'Other'
}];
const MOCK_PRODUCTS = [{
  id: '1',
  name: 'iPad',
  category_id: '1',
  brand: 'Apple',
  barcode: '123'
}, {
  id: '2',
  name: 'iPhone',
  category_id: '1',
  brand: 'Apple',
  barcode: '456',
  images: []
}, {
  id: '3',
  name: 'iWatch',
  category_id: '1',
  brand: 'Apple',
  barcode: '789'
}, {
  id: '4',
  name: 'Chair',
  category_id: '2',
  brand: 'Herman Miller',
  barcode: '101'
}, {
  id: '5',
  name: 'Lounge',
  category_id: '2',
  brand: 'Ikea',
  barcode: '102'
}, {
  id: '6',
  name: 'Table',
  category_id: '2',
  brand: 'Ikea',
  barcode: '103'
}, {
  id: '7',
  name: 'Couch',
  category_id: '2',
  brand: 'Ikea',
  barcode: '104'
}, {
  id: '8',
  name: 'Test Item',
  category_id: '4',
  brand: 'Test Brand',
  barcode: '105'
}, {
  id: '9',
  name: 'Notepad',
  category_id: '3',
  brand: 'J.Burrows',
  barcode: '106'
}, {
  id: '10',
  name: 'Whiteboard Markers',
  category_id: '3',
  brand: 'Artline',
  barcode: '107'
}, {
  id: '11',
  name: 'Whiteboard',
  category_id: '2',
  brand: 'Ikea',
  barcode: '108'
}];
const MOCK_ASSETS = Array(100).fill(null).map((_, i) => ({
  id: `asset-${i}`,
  name: `Asset ${i}`,
  type_id: MOCK_PRODUCTS[i % MOCK_PRODUCTS.length].id,
  description: `This is asset ${i}`,
  model_number: `Model ${i}`,
  serial_number: `Serial ${i}`,
  identifier: `Identifier ${i}`,
  other_data: {},
  purchase_order_id: `purchase-order-${i}`
}));
const MOCK_PURCHASE_ORDERS = Array(100).fill(null).map((_, i) => ({
  id: `purchase-order-${i}`,
  order_number: `Order ${i}`,
  invoice_number: `Invoice ${i}`,
  purchase_date: (0,date_fns__WEBPACK_IMPORTED_MODULE_0__.getUnixTime)(Date.now()),
  expected_service_start_date: (0,date_fns__WEBPACK_IMPORTED_MODULE_0__.getUnixTime)(Date.now()),
  expected_service_end_date: (0,date_fns__WEBPACK_IMPORTED_MODULE_0__.getUnixTime)(Date.now() + 1000000000)
}));

/***/ }),

/***/ 76525:
/*!***********************************************!*\
  !*** ./libs/mocks/src/lib/api/assets.mock.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ASSET_MOCKS: () => (/* binding */ ASSET_MOCKS)
/* harmony export */ });
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var _placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @placeos/ts-client */ 35713);
/* harmony import */ var _assets_data__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./assets.data */ 26155);



const BASE_PATH = '/api/engine/v2';
const ASSET_MOCKS = registerMocks();
const update = dataset => (id, data) => {
  const index = dataset.findIndex(e => e.id === id);
  if (index < 0) throw {
    status: 404,
    message: `Unable to find booking with ID ${id}`
  };
  const new_event = {
    ...data
  };
  dataset.splice(index, 1, new_event);
  return new_event;
};
function registerMocks() {
  (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.registerMockEndpoint)({
    path: `${BASE_PATH}/asset_categories`,
    metadata: {},
    method: 'GET',
    callback: _ => {
      const events = _assets_data__WEBPACK_IMPORTED_MODULE_2__.MOCK_CATEGORIES;
      return events;
    }
  });
  (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.registerMockEndpoint)({
    path: `${BASE_PATH}/asset_categories/:id`,
    metadata: {},
    method: 'GET',
    callback: _ => {
      const event = _assets_data__WEBPACK_IMPORTED_MODULE_2__.MOCK_CATEGORIES.find(e => e.id === _.route_params.id);
      if (!event) throw {
        status: 404,
        message: `Unable to find booking with ID ${_.route_params.id}`
      };
      return event;
    }
  });
  (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.registerMockEndpoint)({
    path: `${BASE_PATH}/asset_categories`,
    metadata: {},
    method: 'POST',
    callback: request => {
      const new_event = {
        ...request.body,
        id: `-category-${(0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.predictableRandomInt)(999)}`
      };
      _assets_data__WEBPACK_IMPORTED_MODULE_2__.MOCK_CATEGORIES.push(new_event);
      return new_event;
    }
  });
  (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.registerMockEndpoint)({
    path: `${BASE_PATH}/asset_categories/:id`,
    metadata: {},
    method: 'PUT',
    callback: req => update(_assets_data__WEBPACK_IMPORTED_MODULE_2__.MOCK_CATEGORIES)(req.route_params.id, {
      ...req.body
    })
  });
  (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.registerMockEndpoint)({
    path: `${BASE_PATH}/asset_categories/:id`,
    metadata: {},
    method: 'DELETE',
    callback: req => {
      const index = _assets_data__WEBPACK_IMPORTED_MODULE_2__.MOCK_CATEGORIES.findIndex(e => e.id === req.route_params.id);
      if (index < 0) throw {
        status: 404,
        message: `Unable to find booking with ID ${req.route_params.id}`
      };
      _assets_data__WEBPACK_IMPORTED_MODULE_2__.MOCK_CATEGORIES.splice(index, 1);
      return;
    }
  });
  (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.registerMockEndpoint)({
    path: `${BASE_PATH}/asset_types`,
    metadata: {},
    method: 'GET',
    callback: _ => {
      const events = _assets_data__WEBPACK_IMPORTED_MODULE_2__.MOCK_PRODUCTS;
      return events;
    }
  });
  (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.registerMockEndpoint)({
    path: `${BASE_PATH}/asset_types/:id`,
    metadata: {},
    method: 'GET',
    callback: _ => {
      const event = _assets_data__WEBPACK_IMPORTED_MODULE_2__.MOCK_PRODUCTS.find(e => e.id === _.route_params.id);
      if (!event) throw {
        status: 404,
        message: `Unable to find booking with ID ${_.route_params.id}`
      };
      return event;
    }
  });
  (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.registerMockEndpoint)({
    path: `${BASE_PATH}/asset_types`,
    metadata: {},
    method: 'POST',
    callback: request => {
      const new_event = {
        ...request.body,
        id: `-product-${(0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.predictableRandomInt)(999)}`
      };
      _assets_data__WEBPACK_IMPORTED_MODULE_2__.MOCK_PRODUCTS.push(new_event);
      return new_event;
    }
  });
  (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.registerMockEndpoint)({
    path: `${BASE_PATH}/asset_types/:id`,
    metadata: {},
    method: 'PUT',
    callback: req => update(_assets_data__WEBPACK_IMPORTED_MODULE_2__.MOCK_PRODUCTS)(req.route_params.id, {
      ...req.body
    })
  });
  (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.registerMockEndpoint)({
    path: `${BASE_PATH}/asset_types/:id`,
    metadata: {},
    method: 'DELETE',
    callback: req => {
      const index = _assets_data__WEBPACK_IMPORTED_MODULE_2__.MOCK_PRODUCTS.findIndex(e => e.id === req.route_params.id);
      if (index < 0) throw {
        status: 404,
        message: `Unable to find booking with ID ${req.route_params.id}`
      };
      _assets_data__WEBPACK_IMPORTED_MODULE_2__.MOCK_PRODUCTS.splice(index, 1);
      return;
    }
  });
  (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.registerMockEndpoint)({
    path: `${BASE_PATH}/asset_purchase_orders`,
    metadata: {},
    method: 'GET',
    callback: _ => {
      const events = _assets_data__WEBPACK_IMPORTED_MODULE_2__.MOCK_PURCHASE_ORDERS;
      return events;
    }
  });
  (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.registerMockEndpoint)({
    path: `${BASE_PATH}/asset_purchase_orders/:id`,
    metadata: {},
    method: 'GET',
    callback: _ => {
      const event = _assets_data__WEBPACK_IMPORTED_MODULE_2__.MOCK_PURCHASE_ORDERS.find(e => e.id === _.route_params.id);
      if (!event) throw {
        status: 404,
        message: `Unable to find booking with ID ${_.route_params.id}`
      };
      return event;
    }
  });
  (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.registerMockEndpoint)({
    path: `${BASE_PATH}/asset_purchase_orders`,
    metadata: {},
    method: 'POST',
    callback: request => {
      const new_event = {
        ...request.body,
        id: `-purchase-order-${(0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.predictableRandomInt)(999)}`
      };
      _assets_data__WEBPACK_IMPORTED_MODULE_2__.MOCK_PURCHASE_ORDERS.push(new_event);
      return new_event;
    }
  });
  (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.registerMockEndpoint)({
    path: `${BASE_PATH}/asset_purchase_orders/:id`,
    metadata: {},
    method: 'PUT',
    callback: req => update(_assets_data__WEBPACK_IMPORTED_MODULE_2__.MOCK_PURCHASE_ORDERS)(req.route_params.id, {
      ...req.body
    })
  });
  (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.registerMockEndpoint)({
    path: `${BASE_PATH}/asset_purchase_orders/:id`,
    metadata: {},
    method: 'DELETE',
    callback: req => {
      const index = _assets_data__WEBPACK_IMPORTED_MODULE_2__.MOCK_PURCHASE_ORDERS.findIndex(e => e.id === req.route_params.id);
      if (index < 0) throw {
        status: 404,
        message: `Unable to find purchase order with ID ${req.route_params.id}`
      };
      _assets_data__WEBPACK_IMPORTED_MODULE_2__.MOCK_PURCHASE_ORDERS.splice(index, 1);
      return;
    }
  });
  (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.registerMockEndpoint)({
    path: `${BASE_PATH}/assets`,
    metadata: {},
    method: 'GET',
    callback: _ => {
      const events = _assets_data__WEBPACK_IMPORTED_MODULE_2__.MOCK_ASSETS;
      return events;
    }
  });
  (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.registerMockEndpoint)({
    path: `${BASE_PATH}/assets/:id`,
    metadata: {},
    method: 'GET',
    callback: _ => {
      const event = _assets_data__WEBPACK_IMPORTED_MODULE_2__.MOCK_ASSETS.find(e => e.id === _.route_params.id);
      if (!event) throw {
        status: 404,
        message: `Unable to find booking with ID ${_.route_params.id}`
      };
      return event;
    }
  });
  (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.registerMockEndpoint)({
    path: `${BASE_PATH}/assets`,
    metadata: {},
    method: 'POST',
    callback: request => {
      const new_event = {
        ...request.body,
        id: `-asset-${(0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.predictableRandomInt)(999)}`
      };
      _assets_data__WEBPACK_IMPORTED_MODULE_2__.MOCK_ASSETS.push(new_event);
      return new_event;
    }
  });
  (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.registerMockEndpoint)({
    path: `${BASE_PATH}/assets/:id`,
    metadata: {},
    method: 'PUT',
    callback: req => update(_assets_data__WEBPACK_IMPORTED_MODULE_2__.MOCK_ASSETS)(req.route_params.id, {
      ...req.body
    })
  });
  (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.registerMockEndpoint)({
    path: `${BASE_PATH}/assets/:id`,
    metadata: {},
    method: 'DELETE',
    callback: req => {
      const index = _assets_data__WEBPACK_IMPORTED_MODULE_2__.MOCK_ASSETS.findIndex(e => e.id === req.route_params.id);
      if (index < 0) throw {
        status: 404,
        message: `Unable to find booking with ID ${req.route_params.id}`
      };
      _assets_data__WEBPACK_IMPORTED_MODULE_2__.MOCK_ASSETS.splice(index, 1);
      return;
    }
  });
}

/***/ }),

/***/ 32252:
/*!*************************************************!*\
  !*** ./libs/mocks/src/lib/api/bookings.data.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   MOCK_BOOKINGS: () => (/* binding */ MOCK_BOOKINGS)
/* harmony export */ });
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! date-fns */ 77177);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! date-fns */ 12786);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! date-fns */ 49675);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! date-fns */ 99908);
/* harmony import */ var _assets_data__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./assets.data */ 26155);
/* harmony import */ var _spaces_data__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./spaces.data */ 27309);
/* harmony import */ var _users_data__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./users.data */ 90726);
/* harmony import */ var _zone_data__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./zone.data */ 19658);






let EVENT_TIME = (0,date_fns__WEBPACK_IMPORTED_MODULE_5__.set)((0,date_fns__WEBPACK_IMPORTED_MODULE_6__.subDays)(Date.now(), 3), {
  hours: 7,
  minutes: 0,
  seconds: 0,
  milliseconds: 0
});
const nextEventTime = (save = false) => {
  const next = (0,date_fns__WEBPACK_IMPORTED_MODULE_7__.addMinutes)(EVENT_TIME, ((0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.predictableRandomInt)(8) + 1) * 15);
  if (save) EVENT_TIME = (0,date_fns__WEBPACK_IMPORTED_MODULE_7__.addMinutes)(next, 60);
  return (0,date_fns__WEBPACK_IMPORTED_MODULE_8__.getUnixTime)(next);
};
const TYPES = ['desk', 'parking', 'asset-request', 'visitor', 'locker', 'group-event'];
const TRACKING = ['in_storage', 'in_transit', 'at_location'];
const MOCK_BOOKINGS = new Array(300).fill(0).map((_, index) => {
  const throw_away = (0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.predictableRandomInt)(999999) % 3 === 0;
  const user = _users_data__WEBPACK_IMPORTED_MODULE_3__.MOCK_STAFF[(0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.predictableRandomInt)(_users_data__WEBPACK_IMPORTED_MODULE_3__.MOCK_STAFF.length)] || {};
  const type = TYPES[(0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.predictableRandomInt)(TYPES.length)];
  const bld = _zone_data__WEBPACK_IMPORTED_MODULE_4__.MOCK_BUILDINGS[(0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.predictableRandomInt)(_zone_data__WEBPACK_IMPORTED_MODULE_4__.MOCK_BUILDINGS.length)];
  const lvls = _zone_data__WEBPACK_IMPORTED_MODULE_4__.MOCK_LEVELS.filter(_ => _.parent_id === bld?.id);
  const lvl = lvls[(0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.predictableRandomInt)(lvls.length)];
  const lvl_spaces = _spaces_data__WEBPACK_IMPORTED_MODULE_2__.MOCK_SPACES.filter(_ => _.zones.includes(lvl?.id)) || [];
  const approved = (0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.predictableRandomInt)(999999) % 4;
  const approver = _users_data__WEBPACK_IMPORTED_MODULE_3__.MOCK_STAFF[(0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.predictableRandomInt)(_users_data__WEBPACK_IMPORTED_MODULE_3__.MOCK_STAFF.length)];
  const guest = _users_data__WEBPACK_IMPORTED_MODULE_3__.MOCK_GUESTS[(0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.predictableRandomInt)(_users_data__WEBPACK_IMPORTED_MODULE_3__.MOCK_GUESTS.length)];
  const asset_count = (0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.predictableRandomInt)(3, 1);
  const position = (0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.padString)(index % 18 + 1 + Math.floor(index / 18) * 100, 3);
  return {
    id: `booking-${index}`,
    booking_start: nextEventTime(true),
    booking_end: nextEventTime(),
    user_id: user.id,
    user_name: user.name,
    user_email: user.email,
    booked_by_name: user.name,
    booked_by_email: user.email,
    asset_id: type === 'visitor' ? guest.email : type === 'parking' ? `park-${position}` : `desk-${lvl?.id}-${index}`,
    asset_name: type === 'visitor' ? guest.name : type === 'parking' ? position : `${lvl?.id}-${index}`,
    description: type === 'visitor' ? guest.name : type === 'parking' ? position : `Desk ${index}`,
    title: `${(0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.capitalizeFirstLetter)(type)} Booking ${index}`,
    type,
    booking_type: type,
    attendees: [],
    checked_in: (0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.predictableRandomInt)(999999) % 3 === 0,
    access: (0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.predictableRandomInt)(999999) % 3 === 0,
    approved: approved === 0,
    rejected: approved === 1,
    permission: type === 'group-event' ? 'OPEN' : 'PRIVATE',
    approver_id: approved === 0 ? approver.id : '',
    approver_name: approved === 0 ? approver.name : '',
    approver_email: approved === 0 ? approver.email : '',
    zones: [bld?.id, type === 'parking' ? 'level-p1' : lvl?.id],
    extension_data: {
      map_id: `table-10.00${index}`,
      plate_number: (0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.randomString)(8, 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789'),
      assets: new Array(asset_count).fill(0).map(_ => ({
        ..._assets_data__WEBPACK_IMPORTED_MODULE_1__.MOCK_ASSETS[(0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.predictableRandomInt)(asset_count)],
        amount: (0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.predictableRandomInt)(5, 1)
      })),
      tracking: approved === 0 ? TRACKING[(0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.predictableRandomInt)(TRACKING.length)] : 'in_storage',
      space_id: lvl_spaces[(0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.predictableRandomInt)(lvl_spaces.length)]?.id
    }
  };
});

/***/ }),

/***/ 86242:
/*!*************************************************!*\
  !*** ./libs/mocks/src/lib/api/bookings.mock.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   BOOKING_MOCKS: () => (/* binding */ BOOKING_MOCKS)
/* harmony export */ });
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var _placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @placeos/ts-client */ 35713);
/* harmony import */ var _bookings_data__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./bookings.data */ 32252);



const BOOKING_MOCKS = registerMocks();
function registerMocks() {
  (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.registerMockEndpoint)({
    path: '/api/staff/v1/bookings',
    metadata: {},
    method: 'GET',
    callback: _ => {
      const events = _bookings_data__WEBPACK_IMPORTED_MODULE_2__.MOCK_BOOKINGS.filter(event => (0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.timePeriodsIntersect)(+_.query_params.period_start, +_.query_params.period_end, event.booking_start, event.booking_end) && (event.type === _.query_params.type || event.booking_type === _.query_params.type));
      return events;
    }
  });
  (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.registerMockEndpoint)({
    path: '/api/staff/v1/bookings/:id',
    metadata: {},
    method: 'GET',
    callback: _ => {
      const event = _bookings_data__WEBPACK_IMPORTED_MODULE_2__.MOCK_BOOKINGS.find(e => e.id === _.route_params.id);
      if (!event) throw {
        status: 404,
        message: `Unable to find booking with ID ${_.route_params.id}`
      };
      return event;
    }
  });
  (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.registerMockEndpoint)({
    path: '/api/staff/v1/bookings/:id/attendee',
    metadata: {},
    method: 'POST',
    callback: _ => {
      const event = _bookings_data__WEBPACK_IMPORTED_MODULE_2__.MOCK_BOOKINGS.find(e => e.id === _.route_params.id);
      if (!event) {
        throw {
          status: 404,
          message: `Unable to find booking with ID ${_.route_params.id}`
        };
      }
      const user = {
        id: _.body.id,
        name: _.body.name,
        email: _.body.email,
        checked_in: false
      };
      event.attendees.push(user);
      return user;
    }
  });
  (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.registerMockEndpoint)({
    path: '/api/staff/v1/bookings/:id/guests/:email/check_in',
    metadata: {},
    method: 'POST',
    callback: _ => {
      const {
        id,
        email
      } = _.route_params;
      const event = _bookings_data__WEBPACK_IMPORTED_MODULE_2__.MOCK_BOOKINGS.find(e => e.id === id);
      if (!event) {
        throw {
          status: 404,
          message: `Unable to find booking with ID ${id}`
        };
      }
      const guest = event.attendees.find(_ => _.email === decodeURIComponent(email));
      if (!guest) {
        throw {
          status: 404,
          message: `Unable to find guest with email ${email}`
        };
      }
      guest.checked_in = _.query_params.state === 'true';
      return guest;
    }
  });
  (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.registerMockEndpoint)({
    path: '/api/staff/v1/bookings/:id/attendee/:email',
    metadata: {},
    method: 'DELETE',
    callback: _ => {
      const {
        id,
        email
      } = _.route_params;
      const event = _bookings_data__WEBPACK_IMPORTED_MODULE_2__.MOCK_BOOKINGS.find(e => e.id === id);
      if (!event) {
        throw {
          status: 404,
          message: `Unable to find booking with ID ${id}`
        };
      }
      event.attendees = event.attendees.filter(_ => _.email !== decodeURIComponent(email));
      return event;
    }
  });
  (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.registerMockEndpoint)({
    path: '/api/staff/v1/bookings',
    metadata: {},
    method: 'POST',
    callback: request => {
      const new_event = {
        ...request.body,
        id: `-booking-${(0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.predictableRandomInt)(999)}`
      };
      _bookings_data__WEBPACK_IMPORTED_MODULE_2__.MOCK_BOOKINGS.push(new_event);
      return new_event;
    }
  });
  const updateBooking = (id, data) => {
    const index = _bookings_data__WEBPACK_IMPORTED_MODULE_2__.MOCK_BOOKINGS.findIndex(e => e.id === id);
    if (index < 0) throw {
      status: 404,
      message: `Unable to find booking with ID ${id}`
    };
    const new_event = {
      ...data
    };
    _bookings_data__WEBPACK_IMPORTED_MODULE_2__.MOCK_BOOKINGS.splice(index, 1, new_event);
    return new_event;
  };
  (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.registerMockEndpoint)({
    path: '/api/staff/v1/bookings/:id',
    metadata: {},
    method: 'PUT',
    callback: req => updateBooking(req.route_params.id, {
      ...req.body
    })
  });
  (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.registerMockEndpoint)({
    path: '/api/staff/v1/bookings/:id',
    metadata: {},
    method: 'PATCH',
    callback: req => updateBooking(req.route_params.id, {
      ...req.body
    })
  });
  (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.registerMockEndpoint)({
    path: '/api/staff/v1/bookings/:id/approve',
    metadata: {},
    method: 'POST',
    callback: req => updateBooking(req.route_params.id, {
      ...req.body,
      approved: true,
      rejected: false
    })
  });
  (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.registerMockEndpoint)({
    path: '/api/staff/v1/bookings/:id/reject',
    metadata: {},
    method: 'POST',
    callback: req => updateBooking(req.route_params.id, {
      ...req.body,
      approved: false,
      rejected: true
    })
  });
  (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.registerMockEndpoint)({
    path: '/api/staff/v1/bookings/:id/check_in',
    metadata: {},
    method: 'POST',
    callback: req => updateBooking(req.route_params.id, {
      ...req.body,
      checked_in: req.query_params.state === 'true'
    })
  });
  (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.registerMockEndpoint)({
    path: '/api/staff/v1/bookings/:id',
    metadata: {},
    method: 'DELETE',
    callback: req => {
      const index = _bookings_data__WEBPACK_IMPORTED_MODULE_2__.MOCK_BOOKINGS.findIndex(e => e.id === req.route_params.id);
      if (index < 0) throw {
        status: 404,
        message: `Unable to find booking with ID ${req.route_params.id}`
      };
      _bookings_data__WEBPACK_IMPORTED_MODULE_2__.MOCK_BOOKINGS.splice(index, 1);
      return;
    }
  });
}

/***/ }),

/***/ 30105:
/*!**************************************************!*\
  !*** ./libs/mocks/src/lib/api/calendars.mock.ts ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CALENDAR_MOCKS: () => (/* binding */ CALENDAR_MOCKS)
/* harmony export */ });
/* harmony import */ var _placeos_ts_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/ts-client */ 35713);
/* harmony import */ var _events_data__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./events.data */ 64055);
/* harmony import */ var _spaces_data__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./spaces.data */ 27309);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var _users_data__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./users.data */ 90726);





const CALENDAR_MOCKS = registerMocks();
function registerMocks() {
  (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_0__.registerMockEndpoint)({
    path: '/api/staff/v1/calendars',
    metadata: {},
    method: 'GET',
    callback: request => {
      const user = _users_data__WEBPACK_IMPORTED_MODULE_4__.MOCK_STAFF[(0,_placeos_common__WEBPACK_IMPORTED_MODULE_3__.predictableRandomInt)(_users_data__WEBPACK_IMPORTED_MODULE_4__.MOCK_STAFF.length)];
      const user2 = _users_data__WEBPACK_IMPORTED_MODULE_4__.MOCK_STAFF[(0,_placeos_common__WEBPACK_IMPORTED_MODULE_3__.predictableRandomInt)(_users_data__WEBPACK_IMPORTED_MODULE_4__.MOCK_STAFF.length)];
      const user3 = _users_data__WEBPACK_IMPORTED_MODULE_4__.MOCK_STAFF[(0,_placeos_common__WEBPACK_IMPORTED_MODULE_3__.predictableRandomInt)(_users_data__WEBPACK_IMPORTED_MODULE_4__.MOCK_STAFF.length)];
      return [{
        id: _users_data__WEBPACK_IMPORTED_MODULE_4__.ACTIVE_USER.email,
        summary: _users_data__WEBPACK_IMPORTED_MODULE_4__.ACTIVE_USER.name,
        primary: true,
        can_edit: true,
        hidden: false
      }, {
        id: user.email,
        summary: user.name,
        primary: false,
        can_edit: true,
        hidden: false
      }, {
        id: user2.email,
        summary: user2.name,
        primary: false,
        can_edit: false,
        hidden: false
      }, {
        id: user3.email,
        summary: user3.name,
        primary: false,
        can_edit: false,
        hidden: true
      }];
    }
  });
  const handleSpaceAvailability = request => {
    const start = +request.query_params.period_start;
    const end = +request.query_params.period_end;
    const zones = (request.query_params.zone_ids || '').split(',').filter(i => !!i);
    const systems = (request.query_params.system_ids || '').split(',').filter(i => !!i);
    const spaces = _spaces_data__WEBPACK_IMPORTED_MODULE_2__.MOCK_SPACES.filter(space => zones.length ? zones.reduce((has, zone) => has && space.zones.includes(zone), true) : systems.length ? systems.includes(space.id) : true).filter(space => {
      const bookings = _events_data__WEBPACK_IMPORTED_MODULE_1__.MOCK_EVENTS.filter(event => event.attendees.find(user => user.id === space.id));
      for (const event of bookings) {
        if ((0,_placeos_common__WEBPACK_IMPORTED_MODULE_3__.timePeriodsIntersect)(start, end, event.event_start, event.event_end)) return false;
      }
      return true;
    });
    return spaces;
  };
  (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_0__.registerMockEndpoint)({
    path: '/api/staff/v1/calendars/availability',
    metadata: {},
    method: 'GET',
    callback: request => handleSpaceAvailability(request).map(_ => ({
      resource: _
    }))
  });
  (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_0__.registerMockEndpoint)({
    path: '/api/staff/v1/calendars/free_busy',
    metadata: {},
    method: 'GET',
    callback: request => handleSpaceAvailability(request).map(_ => ({
      resource: _
    }))
  });
}

/***/ }),

/***/ 8287:
/*!*************************************************!*\
  !*** ./libs/mocks/src/lib/api/catering.data.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   MOCK_MENU: () => (/* binding */ MOCK_MENU),
/* harmony export */   generateCateringOrder: () => (/* binding */ generateCateringOrder)
/* harmony export */ });
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! date-fns */ 1874);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! date-fns */ 49675);


const MOCK_MENU = [{
  id: 'item-1',
  name: 'Coffee',
  unit_price: 200,
  category: 'Drinks',
  tags: ['drink', 'Contains Nuts', 'Contains Dairy'],
  options: [{
    id: 'opt-1',
    name: 'Cappacino',
    group: 'type'
  }, {
    id: 'opt-2',
    name: 'Latte',
    group: 'type'
  }, {
    id: 'opt-3',
    name: '1 Sugar',
    group: 'sugars',
    unit_price: 20
  }, {
    id: 'opt-4',
    name: '2 Sugar',
    group: 'sugars',
    unit_price: 20
  }, {
    id: 'opt-5',
    name: '3 Sugar',
    group: 'sugars',
    unit_price: 20
  }, {
    id: 'opt-6',
    name: '4 Sugar',
    group: 'sugars',
    unit_price: 20
  }]
}, {
  id: 'item-2',
  name: 'Soda',
  unit_price: 160,
  category: 'Drinks',
  tags: ['drink'],
  options: [{
    id: 'opt-1',
    name: 'Pepsi',
    group: 'type'
  }, {
    id: 'opt-2',
    name: 'Sunkist',
    group: 'type'
  }, {
    id: 'opt-3',
    name: 'Solo',
    group: 'type'
  }, {
    id: 'opt-4',
    name: 'Dr Pepper',
    group: 'type'
  }]
}, {
  id: 'item-3',
  name: 'Water',
  unit_price: 100,
  category: 'Drinks'
}, {
  id: 'item-4',
  name: 'Muffin',
  unit_price: 160,
  category: 'Snacks',
  options: [{
    id: 'opt-1',
    name: 'Choc Chip',
    group: 'type'
  }, {
    id: 'opt-2',
    name: 'Banana',
    group: 'type'
  }, {
    id: 'opt-3',
    name: 'Blueberry',
    group: 'type'
  }]
}, {
  id: 'item-5',
  name: 'Cookies',
  unit_price: 400,
  category: 'Snacks',
  options: [{
    id: 'opt-1',
    name: 'Choc Chip',
    group: 'type'
  }, {
    id: 'opt-2',
    name: 'Macadamia',
    group: 'type'
  }, {
    id: 'opt-3',
    name: 'Dark Choc',
    group: 'type'
  }]
}, {
  id: 'item-6',
  name: 'Fish & Chips',
  unit_price: 250,
  category: 'Simple Meals',
  options: [{
    id: 'opt-1',
    name: 'Tomato Sauce',
    group: 'sauce',
    unit_price: 30
  }, {
    id: 'opt-2',
    name: 'BBQ Sauce',
    group: 'sauce',
    unit_price: 35
  }, {
    id: 'opt-3',
    name: 'Tartare Sause',
    group: 'sauce',
    unit_price: 40
  }, {
    id: 'opt-4',
    name: 'Garlic Aoili Sauce',
    group: 'sauce',
    unit_price: 50
  }]
}, {
  id: 'item-7',
  name: 'Sandwich',
  unit_price: 300,
  category: 'Simple Meals',
  options: [{
    id: 'opt-1',
    name: 'Ham & Cheese',
    group: 'type'
  }, {
    id: 'opt-2',
    name: 'Chicken',
    group: 'type'
  }, {
    id: 'opt-3',
    name: 'Fairy Bread',
    group: 'type'
  }]
}];
function generateCateringOrder(event) {
  const duration = (0,date_fns__WEBPACK_IMPORTED_MODULE_1__.differenceInMinutes)(event.event_start, event.event_end);
  const mx = (0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.predictableRandomInt)(MOCK_MENU.length);
  return {
    id: `order-${(0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.predictableRandomInt)(999_999)}`,
    event_id: event.id,
    invoice_number: `I${(0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.predictableRandomInt)(999_999)}`,
    charge_code: `C${(0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.predictableRandomInt)(9_999)}`,
    deliver_at: (0,date_fns__WEBPACK_IMPORTED_MODULE_2__.addMinutes)(event.event_start * 1000, (0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.predictableRandomInt)(Math.floor(duration / 5)) * 5),
    notes: (0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.predictableRandomInt)(9999_9999) % 2 === 0 ? 'Test notes' : '',
    items: new Array(3).fill(0).map((_, idx) => ({
      ...MOCK_MENU[mx * idx % MOCK_MENU.length],
      options: [],
      quantity: (0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.predictableRandomInt)(10, 1)
    }))
  };
}

/***/ }),

/***/ 53737:
/*!***********************************************!*\
  !*** ./libs/mocks/src/lib/api/common.mock.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   API: () => (/* binding */ API),
/* harmony export */   DOMAIN: () => (/* binding */ DOMAIN)
/* harmony export */ });
/** Domain of the organisation */
const DOMAIN = 'place.tech';
/** Endpoint where the staff API is located */
const API = '/api/staff/v1';

/***/ }),

/***/ 64055:
/*!***********************************************!*\
  !*** ./libs/mocks/src/lib/api/events.data.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   MOCK_EVENTS: () => (/* binding */ MOCK_EVENTS)
/* harmony export */ });
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! dayjs */ 49645);
/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(dayjs__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _catering_data__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./catering.data */ 8287);
/* harmony import */ var _spaces_data__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./spaces.data */ 27309);
/* harmony import */ var _users_data__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./users.data */ 90726);





let EVENT_TIME = dayjs__WEBPACK_IMPORTED_MODULE_1__().startOf('d').hour(7);
const nextEventTime = (save = false) => {
  const next = EVENT_TIME.add(((0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.predictableRandomInt)(8) + 1) * 15, 'm');
  if (save) {
    EVENT_TIME = next;
  }
  return next.unix();
};
const event_status = ['tentative', 'confirmed', 'cancelled'];
const randomStatus = () => {
  const rnd = (0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.predictableRandomInt)(10);
  return rnd < 2 ? event_status[2] : rnd < 5 ? event_status[0] : event_status[1];
};
const MOCK_EVENTS = new Array(200).fill(0).map((_, index) => {
  const PEOPLE = _users_data__WEBPACK_IMPORTED_MODULE_4__.MOCK_STAFF.concat(_users_data__WEBPACK_IMPORTED_MODULE_4__.MOCK_GUESTS);
  let attendees = new Array((0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.predictableRandomInt)(8, 1)).fill(0).map(() => PEOPLE[(0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.predictableRandomInt)(PEOPLE.length)]);
  attendees.sort((a, b) => (a.visit_expected ? 0 : -1) - (b.visit_expected ? 0 : -1));
  const space = _spaces_data__WEBPACK_IMPORTED_MODULE_3__.MOCK_SPACES[(0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.predictableRandomInt)(_spaces_data__WEBPACK_IMPORTED_MODULE_3__.MOCK_SPACES.length)];
  attendees = attendees.concat({
    ...space,
    resource: true
  });
  if ((0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.predictableRandomInt)(9999) % 2 === 0) attendees.unshift(_users_data__WEBPACK_IMPORTED_MODULE_4__.ACTIVE_USER);else attendees.unshift(_users_data__WEBPACK_IMPORTED_MODULE_4__.MOCK_STAFF[(0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.predictableRandomInt)(_users_data__WEBPACK_IMPORTED_MODULE_4__.MOCK_STAFF.length)]);
  attendees = (0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.unique)(attendees, 'email') || [{}];
  const event_start = nextEventTime(true);
  const event_end = nextEventTime();
  const meeting_url = (0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.predictableRandomInt)(9999) % 3 === 0 ? 'https://meet.place.tech' : '';
  return {
    id: `cal-event-${index}`,
    status: randomStatus(),
    host: attendees[0].email,
    calendar: 'calendar_id',
    creator: 'optional@fake.com',
    attendees: ((0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.unique)(attendees, 'email') || []).map((_, idx) => ({
      ..._,
      organizer: idx === 0,
      checked_in: (0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.predictableRandomInt)(99999) % 2 === 0,
      response_status: (0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.predictableRandomInt)(99999) % 2 === 0 ? 'accepted' : (0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.predictableRandomInt)(99999) % 6 === 0 ? 'declined' : 'tentative'
    })),
    title: `Some Meeting ${index}`,
    body: `A Description`,
    private: false,
    event_start,
    event_end,
    timezone: 'Australia/Sydney',
    all_day: false,
    location: `${space?.name}`,
    recurring: false,
    recurrence: {},
    attachments: {},
    system: space,
    meeting_url,
    meeting_id: meeting_url ? `m${(0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.predictableRandomInt)(9999)}` : '',
    meeting_provider: meeting_url ? 'PlaceOS' : '',
    extension_data: {
      catering: (0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.predictableRandomInt)(99999) % 4 === 0 ? [(0,_catering_data__WEBPACK_IMPORTED_MODULE_2__.generateCateringOrder)({
        id: `cal-event-${index}`,
        event_start,
        event_end
      })] : [],
      setup: (0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.predictableRandomInt)(4) * 5,
      breakdown: (0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.predictableRandomInt)(4) * 5
    }
  };
});
const event_spaces = {};
MOCK_EVENTS.forEach(event => {
  if (!event_spaces[event.system?.id]) {
    event_spaces[event.system?.id] = [];
  }
  event_spaces[event.system?.id].push(event);
});

/***/ }),

/***/ 43769:
/*!***********************************************!*\
  !*** ./libs/mocks/src/lib/api/events.mock.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   EVENT_MOCKS: () => (/* binding */ EVENT_MOCKS)
/* harmony export */ });
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var _placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @placeos/ts-client */ 35713);
/* harmony import */ var _events_data__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./events.data */ 64055);
/* harmony import */ var _users_data__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./users.data */ 90726);




const EVENT_MOCKS = registerMocks();
function registerMocks() {
  (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.registerMockEndpoint)({
    path: '/api/staff/v1/events',
    metadata: {},
    method: 'GET',
    callback: _ => {
      let events = _events_data__WEBPACK_IMPORTED_MODULE_2__.MOCK_EVENTS;
      if (!_.query_params.zone_ids) {
        events = events.filter(event => !!event.attendees.find(user => user.email === _users_data__WEBPACK_IMPORTED_MODULE_3__.ACTIVE_USER.email));
      }
      if (_.query_params.period_start) {
        events = events.filter(e => (0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.timePeriodsIntersect)(+_.query_params.period_start, +_.query_params.period_end, e.event_start, e.event_end));
      }
      return events;
    }
  });
  (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.registerMockEndpoint)({
    path: '/api/staff/v1/events',
    metadata: {},
    method: 'POST',
    callback: request => {
      const new_event = {
        ...request.body,
        id: `-cal-event-${(0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.predictableRandomInt)(999)}`
      };
      new_event.attendees = [_users_data__WEBPACK_IMPORTED_MODULE_3__.MOCK_STAFF.find(_ => _.email === new_event.host), ...(new_event.attendees || [])];
      new_event.attendees.forEach(user => {
        if (user.zones) user.resource = true;
      });
      if (new_event.system) {
        new_event.attendees = [...(new_event.attendees || []), {
          ...new_event.system,
          resource: true
        }];
      }
      _events_data__WEBPACK_IMPORTED_MODULE_2__.MOCK_EVENTS.push(new_event);
      const system = (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.mockSystem)(new_event.system?.id);
      system?.Bookings[0]?.$poll_bookings();
      return new_event;
    }
  });
  (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.registerMockEndpoint)({
    path: '/api/staff/v1/events/:id',
    metadata: {},
    method: 'GET',
    callback: request => {
      const item = _events_data__WEBPACK_IMPORTED_MODULE_2__.MOCK_EVENTS.find(event => event.id === request.route_params.id);
      if (item) {
        return item;
      }
      throw {
        status: 404,
        message: 'Event not found'
      };
    }
  });
  (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.registerMockEndpoint)({
    path: '/api/staff/v1/events/:id',
    metadata: {},
    method: 'DELETE',
    callback: request => {
      const index = _events_data__WEBPACK_IMPORTED_MODULE_2__.MOCK_EVENTS.findIndex(event => event.id === request.route_params.id);
      if (index > 0) {
        if (_events_data__WEBPACK_IMPORTED_MODULE_2__.MOCK_EVENTS[index].host === _users_data__WEBPACK_IMPORTED_MODULE_3__.ACTIVE_USER.email) {
          _events_data__WEBPACK_IMPORTED_MODULE_2__.MOCK_EVENTS.splice(index, 1);
        } else {
          const user = _events_data__WEBPACK_IMPORTED_MODULE_2__.MOCK_EVENTS[index].attendees.find(_ => _.email === _users_data__WEBPACK_IMPORTED_MODULE_3__.ACTIVE_USER.email);
          user.response_status = 'declined';
        }
        return;
      }
      throw {
        status: 404,
        message: 'Event not found'
      };
    }
  });
  (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.registerMockEndpoint)({
    path: '/api/staff/v1/events/:id',
    metadata: {},
    method: 'PATCH',
    callback: request => {
      const index = _events_data__WEBPACK_IMPORTED_MODULE_2__.MOCK_EVENTS.findIndex(event => event.id === request.route_params.id);
      if (index >= 0) {
        return _events_data__WEBPACK_IMPORTED_MODULE_2__.MOCK_EVENTS.splice(index, 1, request.body);
      }
      throw {
        status: 404,
        message: 'Event not found'
      };
    }
  });
  (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.registerMockEndpoint)({
    path: '/api/staff/v1/events/:id/guests/:email/checkin',
    metadata: {},
    method: 'POST',
    callback: request => {
      const event = _events_data__WEBPACK_IMPORTED_MODULE_2__.MOCK_EVENTS.find(event => event.id === request.route_params.id);
      if (event) {
        const checked_in = event.extension_data.checked_in || [];
        event.extension_data.checked_in = checked_in.concat([request.route_params.email]);
        return event;
      }
      throw {
        status: 404,
        message: 'Guest not found'
      };
    }
  });
}

/***/ }),

/***/ 27309:
/*!***********************************************!*\
  !*** ./libs/mocks/src/lib/api/spaces.data.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   MOCK_SPACES: () => (/* binding */ MOCK_SPACES)
/* harmony export */ });
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var _placeos_spaces__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @placeos/spaces */ 44855);


const randomSpaceFeatures = () => {
  const f = ['Whiteboard', 'VidConf', 'Projector', 'Views'];
  const numFeatures = (0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.predictableRandomInt)(f.length + 1);
  const res = [];
  for (let i = 0; i < numFeatures; i++) {
    res.push(f[(0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.predictableRandomInt)(f.length)]);
  }
  return res.filter((el, i, r) => r.indexOf(el) === i);
};
const MOCK_SPACES = [{
  name: '1.01 Operations Room',
  map_id: 'area-1.01-status',
  zones: ['bld-01', 'bld-01_lvl-1', 'zone-EmWFTjuYExK']
}, {
  name: '1.03 Sydney Boardroom',
  map_id: 'area-1.03-status',
  zones: ['bld-01', 'bld-01_lvl-1', 'zone-EmWFTjuYExK']
}, {
  name: '1.04 The Studio',
  map_id: 'area-1.04-status',
  zones: ['bld-01', 'bld-01_lvl-1', 'zone-EmWFTjuYExK']
}, {
  name: 'Jam Board',
  map_id: 'area-1.02-status',
  zones: ['bld-01', 'bld-01_lvl-1', 'zone-EmWFTjuYExK']
}, {
  name: 'G.01 Cisco Room',
  map_id: 'area-G.01-status',
  zones: ['bld-01', 'bld-01_lvl-1', 'zone-EmWFTjuYExK']
}, {
  name: 'G.02 The Lab',
  map_id: 'area-G.02-status',
  zones: ['bld-01', 'bld-01_lvl-1', 'zone-EmWFTjuYExK']
}, {
  name: 'Conference Room 2.01',
  map_id: 'area-2.01-status',
  zones: ['bld-02', 'bld-02_lvl-2', 'zone-EmWFTjuYExK']
}, {
  name: 'Conference Room 2.02',
  map_id: 'area-2.02-status',
  zones: ['bld-02', 'bld-02_lvl-2', 'zone-EmWFTjuYExK']
}, {
  name: 'Conference Room 3.01',
  map_id: 'area-3.01-status',
  zones: ['bld-02', 'bld-02_lvl-3', 'zone-EmWFTjuYExK']
}, {
  name: 'Conference Room 3.02',
  map_id: 'area-3.02-status',
  zones: ['bld-02', 'bld-02_lvl-3', 'zone-EmWFTjuYExK']
}, {
  name: 'Conference Room 3.03',
  map_id: 'area-3.03-status',
  zones: ['bld-02', 'bld-02_lvl-3', 'zone-EmWFTjuYExK']
},
//MapsIndoors mock spaces
{
  name: 'Boardroom 1',
  map_id: '12beee0d06a1475293aadd9f',
  zones: ['bld-01', 'bld-01_lvl-1', 'zone-EmWFTjuYExK'],
  level: {
    id: 'bld-01_lvl-1',
    parent_id: 'bld-01',
    name: 'Level 1',
    display_name: 'Level 1',
    capacity: 5,
    number: '',
    map_id: '12beee0d06a1475293aadd9f',
    tags: [''],
    setting: {},
    images: [''],
    locations: {
      id: '',
      name: ''
    }
  }
}, {
  name: 'Boardroom 2',
  map_id: 'dd2dec8c291a4fb7995bff3c',
  zones: ['bld-01', 'bld-01_lvl-1', 'zone-EmWFTjuYExK'],
  level: {
    id: 'bld-01_lvl-1',
    parent_id: 'bld-01',
    name: 'Level 1',
    display_name: 'Level 1',
    capacity: 5,
    number: '',
    map_id: 'dd2dec8c291a4fb7995bff3c',
    tags: [''],
    setting: {},
    images: [''],
    locations: {
      id: '',
      name: ''
    }
  }
}, {
  name: 'Boardroom 3',
  map_id: '23bc6cf392c842d69abc71bf',
  zones: ['bld-01', 'bld-01_lvl-1', 'zone-EmWFTjuYExK'],
  level: {
    id: 'bld-01_lvl-1',
    parent_id: 'bld-01',
    name: 'Level 1',
    display_name: 'Level 1',
    capacity: 5,
    number: '',
    map_id: '23bc6cf392c842d69abc71bf',
    tags: [''],
    setting: {},
    images: [''],
    locations: {
      id: '',
      name: ''
    }
  }
}, {
  name: 'Boardroom 4',
  map_id: '696971dbc50a4c66a7f5356a',
  zones: ['bld-01', 'bld-01_lvl-1', 'zone-EmWFTjuYExK'],
  level: {
    id: 'bld-01_lvl-1',
    parent_id: 'bld-01',
    name: 'Level 1',
    display_name: 'Level 1',
    capacity: 5,
    number: '',
    map_id: '23bc6cf392c842d69abc71bf',
    tags: [''],
    setting: {},
    images: [''],
    locations: {
      id: '',
      name: ''
    }
  }
}, {
  name: 'Boardroom 5',
  map_id: '58cc74c5dd4249148674a191',
  zones: ['bld-01', 'bld-01_lvl-1', 'zone-EmWFTjuYExK'],
  level: {
    id: 'bld-01_lvl-1',
    parent_id: 'bld-01',
    name: 'Level 1',
    display_name: 'Level 1',
    capacity: 5,
    number: '',
    map_id: '23bc6cf392c842d69abc71bf',
    tags: [''],
    setting: {},
    images: [''],
    locations: {
      id: '',
      name: ''
    }
  }
}, {
  name: 'Boardroom 6',
  map_id: 'a4c02df953f34e5dad26c95f',
  zones: ['bld-01', 'bld-01_lvl-1', 'zone-EmWFTjuYExK']
}, {
  name: 'Boardroom 7',
  map_id: '23bc6cf392c842d69abc71bf',
  zones: ['bld-02', 'bld-02_lvl-3', 'zone-EmWFTjuYExK']
}, {
  name: 'Boardroom 8',
  map_id: '21a49f92c5924d2f9b39934b',
  zones: ['bld-02', 'bld-02_lvl-3', 'zone-EmWFTjuYExK']
}, {
  name: 'Boardroom 9',
  map_id: '0d3f964712ec4d36b9776449',
  zones: ['bld-02', 'bld-02_lvl-3', 'zone-EmWFTjuYExK']
}, {
  name: 'Boardroom 10',
  map_id: '7c01d7766a38488b8813347c',
  zones: ['bld-02', 'bld-02_lvl-3', 'zone-EmWFTjuYExK']
}, {
  name: 'Boardroom 11',
  map_id: '9e9efbe702bb4d91a2615c06',
  zones: ['bld-02', 'bld-02_lvl-3', 'zone-EmWFTjuYExK']
}, {
  name: 'Boardroom 12',
  map_id: '66161113fff74d8780daeb2e',
  zones: ['bld-02', 'bld-02_lvl-3', 'zone-EmWFTjuYExK']
}].map(d => (0,_placeos_spaces__WEBPACK_IMPORTED_MODULE_1__.generateMockSpace)({
  ...d,
  features: randomSpaceFeatures(),
  images: ['https://webcdn.executivecentre.com/wp-content/uploads/sites/39/2020/10/img-meetingroomrental_hire.jpg']
}));

/***/ }),

/***/ 19825:
/*!************************************************!*\
  !*** ./libs/mocks/src/lib/api/surveys.mock.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SURVEY_MOCKS: () => (/* binding */ SURVEY_MOCKS)
/* harmony export */ });
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var _placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @placeos/ts-client */ 35713);
/* harmony import */ var _zone_data__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./zone.data */ 19658);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! date-fns */ 99908);




const SURVEY_MOCKS = registerMocks();
const MOCK_SURVEYS = new Array(20).fill(0).map(() => createMockSurvey());
const MOCK_SURVEY_QUESTIONS = new Array(20).fill(0).map(() => createMockSurveyQuestion());
const MOCK_SURVEY_ANSWERS = (0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.flatten)(MOCK_SURVEYS.map(_ => new Array(20).fill(0).map(() => createMockSurveyAnswer(_))));
function createMockSurvey(survey) {
  const id = (0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.predictableRandomInt)(999_999, 0);
  const bld = _zone_data__WEBPACK_IMPORTED_MODULE_2__.MOCK_BUILDINGS[(0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.predictableRandomInt)(_zone_data__WEBPACK_IMPORTED_MODULE_2__.MOCK_BUILDINGS.length, 0)];
  return {
    id,
    title: `Survey ${id}`,
    description: '',
    trigger: 'none',
    pages: [],
    zone_id: bld?.id,
    building_id: bld?.id,
    created_at: (0,date_fns__WEBPACK_IMPORTED_MODULE_3__.getUnixTime)(Date.now()),
    updated_at: (0,date_fns__WEBPACK_IMPORTED_MODULE_3__.getUnixTime)(Date.now()),
    ...(survey || {})
  };
}
function createMockSurveyAnswer(survey) {
  const id = (0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.predictableRandomInt)(999_999, 0);
  return {
    id,
    survey_id: survey.id,
    question_id: (0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.predictableRandomInt)(999_999, 0),
    answer_json: (0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.predictableRandomInt)(10, 0),
    type: 'rating',
    created_at: (0,date_fns__WEBPACK_IMPORTED_MODULE_3__.getUnixTime)(Date.now()),
    updated_at: (0,date_fns__WEBPACK_IMPORTED_MODULE_3__.getUnixTime)(Date.now())
  };
}
function createMockSurveyQuestion() {
  const id = (0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.predictableRandomInt)(999_999, 0);
  return {
    id,
    type: 'text',
    title: `Question ${id}`,
    options: {},
    required: false,
    choices: {},
    tags: [],
    deleted: false,
    created_at: (0,date_fns__WEBPACK_IMPORTED_MODULE_3__.getUnixTime)(Date.now()),
    updated_at: (0,date_fns__WEBPACK_IMPORTED_MODULE_3__.getUnixTime)(Date.now())
  };
}
function registerMocks() {
  (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.registerMockEndpoint)({
    path: '/api/staff/v1/surveys',
    metadata: {},
    method: 'GET',
    callback: request => {
      return request.query_params?.building_id ? MOCK_SURVEYS.filter(_ => _.zone_id === request.query_params.building_id) : MOCK_SURVEYS;
    }
  });
  (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.registerMockEndpoint)({
    path: '/api/staff/v1/surveys/answers',
    metadata: {},
    method: 'GET',
    callback: request => {
      return request.query_params?.survey_id ? MOCK_SURVEY_ANSWERS.filter(_ => _.survey_id === request.query_params.survey_id) : MOCK_SURVEY_ANSWERS;
    }
  });
  (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.registerMockEndpoint)({
    path: '/api/staff/v1/surveys/questions',
    metadata: {},
    method: 'GET',
    callback: request => {
      return request.query_params?.id ? MOCK_SURVEY_QUESTIONS.filter(_ => _.id === +request.query_params.id) : MOCK_SURVEY_QUESTIONS;
    }
  });
  (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.registerMockEndpoint)({
    path: '/api/staff/v1/surveys/:id',
    metadata: {},
    method: 'GET',
    callback: request => {
      console.log('Surveys:', MOCK_SURVEYS);
      const survey = MOCK_SURVEYS.find(_ => _.id === +request.route_params.id);
      if (!survey) throw {
        status: 404
      };
      return survey;
    }
  });
}

/***/ }),

/***/ 61654:
/*!************************************************!*\
  !*** ./libs/mocks/src/lib/api/systems.mock.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SYSTEM_MOCKS: () => (/* binding */ SYSTEM_MOCKS)
/* harmony export */ });
/* harmony import */ var _placeos_ts_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/ts-client */ 35713);
/* harmony import */ var _systems_bindings_mock__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../systems-bindings.mock */ 12028);
/* harmony import */ var _spaces_data__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./spaces.data */ 27309);



const SYSTEM_MOCKS = registerMocks();
function registerMocks() {
  _spaces_data__WEBPACK_IMPORTED_MODULE_2__.MOCK_SPACES.forEach((space, index) => (0,_systems_bindings_mock__WEBPACK_IMPORTED_MODULE_1__.createSystem)(space));
  (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_0__.registerMockEndpoint)({
    path: '/api/engine/v2/systems',
    metadata: {},
    method: 'GET',
    callback: request => {
      return request.query_params?.zone_id ? _spaces_data__WEBPACK_IMPORTED_MODULE_2__.MOCK_SPACES.filter(_ => _.zones.includes(request.query_params.zone_id)) : _spaces_data__WEBPACK_IMPORTED_MODULE_2__.MOCK_SPACES;
    }
  });
  (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_0__.registerMockEndpoint)({
    path: '/api/engine/v2/systems/:id',
    metadata: {},
    method: 'GET',
    callback: request => {
      const space = _spaces_data__WEBPACK_IMPORTED_MODULE_2__.MOCK_SPACES.find(_ => _.id === request.route_params.id);
      if (!space) throw {
        status: 404
      };
      return space;
    }
  });
}

/***/ }),

/***/ 90726:
/*!**********************************************!*\
  !*** ./libs/mocks/src/lib/api/users.data.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ACTIVE_USER: () => (/* binding */ ACTIVE_USER),
/* harmony export */   MOCK_GUESTS: () => (/* binding */ MOCK_GUESTS),
/* harmony export */   MOCK_STAFF: () => (/* binding */ MOCK_STAFF)
/* harmony export */ });
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var _common_mock__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./common.mock */ 53737);


const PREDEF_USERS = ['Jonathan McFarlane', 'Alex Sorafumo', 'Jim Doe', 'Cristina Boston', 'Jeremy West', 'Viv Briffa', 'Candy Russo', 'Jeff Wiz', 'Sravani Kotha', 'Kim Burgess', 'Caspian Baska', 'Stephen Von Takach', 'Cameron Reeves', 'Shane Boseley'];
const ACTIVE_USER = {
  id: 'current',
  name: 'PlaceOS - Demo User',
  email: 'dev@place.tech',
  groups: ['deals', 'user'],
  sys_admin: true
};
const MOCK_STAFF = PREDEF_USERS.map((name, i) => ({
  id: `user-${i + 1}`,
  name: `${name} (PlaceOS)`,
  email: `${name.split(' ').join('.').toLowerCase()}@${_common_mock__WEBPACK_IMPORTED_MODULE_1__.DOMAIN}`
})).concat([ACTIVE_USER]);
const MOCK_GUESTS = PREDEF_USERS.map((name, i) => ({
  id: `guest-${i + 1}`,
  name: `${name} (External)`,
  email: `${name.split(' ').join('.').toLowerCase()}@guest.${_common_mock__WEBPACK_IMPORTED_MODULE_1__.DOMAIN}`,
  visit_expected: (0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.predictableRandomInt)(99999) % 2 === 0,
  extension_data: (0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.predictableRandomInt)(99999) % 3 === 0 ? {
    vaccination_proof: {
      url: 'https://fonts.gstatic.com/s/i/materialicons/verified/v11/24px.svg'
    },
    id_data: {
      url: 'https://fonts.gstatic.com/s/i/materialicons/fingerprint/v12/24px.svg'
    }
  } : {}
}));

/***/ }),

/***/ 13864:
/*!**********************************************!*\
  !*** ./libs/mocks/src/lib/api/users.mock.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   USER_MOCKS: () => (/* binding */ USER_MOCKS)
/* harmony export */ });
/* harmony import */ var _placeos_ts_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/ts-client */ 35713);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var _users_data__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./users.data */ 90726);
/* harmony import */ var _zone_data__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./zone.data */ 19658);
/* harmony import */ var _spaces_data__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./spaces.data */ 27309);
/* harmony import */ var _events_data__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./events.data */ 64055);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! date-fns */ 99908);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! date-fns */ 6926);







const USER_MOCKS = registerMocks();
function registerMocks() {
  (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_0__.registerMockEndpoint)({
    path: '/api/engine/v2/users/:id',
    metadata: {},
    method: 'GET',
    callback: request => {
      if (request.route_params.id === 'current') {
        return _users_data__WEBPACK_IMPORTED_MODULE_2__.ACTIVE_USER;
      }
      const person = _users_data__WEBPACK_IMPORTED_MODULE_2__.MOCK_STAFF.find(user => user.email === request.route_params.id);
      if (person) {
        return person;
      }
      throw {
        status: 404,
        message: 'User not found'
      };
    }
  });
  (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_0__.registerMockEndpoint)({
    path: '/api/staff/v1/people',
    metadata: {},
    method: 'GET',
    callback: request => {
      if (request.query_params.q) {
        const search = request.query_params.q.toLowerCase();
        return _users_data__WEBPACK_IMPORTED_MODULE_2__.MOCK_STAFF.filter(({
          name,
          email
        }) => {
          return name.toLowerCase().includes(search) || email.toLowerCase().includes(search);
        });
      }
      return _users_data__WEBPACK_IMPORTED_MODULE_2__.MOCK_STAFF;
    }
  });
  (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_0__.registerMockEndpoint)({
    path: '/api/staff/v1/people/:id',
    metadata: {},
    method: 'GET',
    callback: request => {
      const id = decodeURIComponent(request.route_params.id);
      const person = _users_data__WEBPACK_IMPORTED_MODULE_2__.MOCK_STAFF.find(user => user.email === id);
      if (person) {
        return {
          ...person,
          location: generateLocation()
        };
      }
      throw {
        status: 404,
        message: 'User not found'
      };
    }
  });
  (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_0__.registerMockEndpoint)({
    path: '/api/staff/v1/guests',
    metadata: {},
    method: 'GET',
    callback: request => {
      if (request.query_params.q) {
        const search = request.query_params.q.toLowerCase();
        return _users_data__WEBPACK_IMPORTED_MODULE_2__.MOCK_GUESTS.filter(user => user.name.toLowerCase().includes(search) || user.email.toLowerCase().includes(search));
      }
      return _users_data__WEBPACK_IMPORTED_MODULE_2__.MOCK_STAFF;
    }
  });
  (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_0__.registerMockEndpoint)({
    path: '/api/staff/v1/guests/:email',
    metadata: {},
    method: 'GET',
    callback: request => {
      const email = decodeURIComponent(request.route_params.email);
      const person = _users_data__WEBPACK_IMPORTED_MODULE_2__.MOCK_GUESTS.find(user => user.email === email);
      if (person) return person;
      throw {
        status: 404,
        message: 'Guest not found'
      };
    }
  });
  (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_0__.registerMockEndpoint)({
    path: '/api/staff/v1/guests/:email/meetings',
    metadata: {},
    method: 'GET',
    callback: request => {
      if (request.route_params.email) {
        const email = request.route_params.email.toLowerCase();
        const events = _events_data__WEBPACK_IMPORTED_MODULE_5__.MOCK_EVENTS.filter(event => event.attendees.find(user => user.email.toLowerCase() === email));
        return events;
      }
      throw {
        status: 404,
        message: `Unable to find meetings with guest with email ${request.route_params.email}`
      };
    }
  });
  const LOCATION_TYPES = ['meeting', 'desk_id', 'laptop', 'mobile', 'geo', 'none'];
  function generateLocation() {
    const type = LOCATION_TYPES[(0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.predictableRandomInt)(LOCATION_TYPES.length)];
    const level = _zone_data__WEBPACK_IMPORTED_MODULE_3__.MOCK_LEVELS[(0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.predictableRandomInt)(_zone_data__WEBPACK_IMPORTED_MODULE_3__.MOCK_LEVELS.length)];
    const level_spaces = _spaces_data__WEBPACK_IMPORTED_MODULE_4__.MOCK_SPACES.filter(s => s.zones.includes(level.id));
    const space = level_spaces[(0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.predictableRandomInt)(level_spaces.length)] || {};
    const location = {};
    switch (type) {
      case 'meeting':
        location.meeting = {
          building: level.parent_id,
          level: level.id,
          system: space.id,
          map_id: space.map_id,
          event_id: ''
        };
        break;
      case 'desk_id':
        location.meeting = {
          building: level.parent_id,
          level: level.id,
          map_id: space.map_id,
          checked_in: (0,date_fns__WEBPACK_IMPORTED_MODULE_6__.getUnixTime)(Date.now())
        };
        break;
      case 'laptop':
      case 'mobile':
        location[type] = {
          building: level.parent_id,
          level: level.id,
          x: +(0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.predictableRandomInt)(10000),
          y: +(0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.predictableRandomInt)(5000),
          last_seen: (0,date_fns__WEBPACK_IMPORTED_MODULE_6__.getUnixTime)((0,date_fns__WEBPACK_IMPORTED_MODULE_7__.subMinutes)(Date.now(), (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.predictableRandomInt)(60)))
        };
        break;
      case 'geo':
        location.geo = {
          lat: (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.predictableRandomInt)(180) - 90,
          lon: (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.predictableRandomInt)(360) - 180,
          last_seen: (0,date_fns__WEBPACK_IMPORTED_MODULE_6__.getUnixTime)((0,date_fns__WEBPACK_IMPORTED_MODULE_7__.subMinutes)(Date.now(), (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.predictableRandomInt)(60)))
        };
        break;
    }
    return location;
  }
}

/***/ }),

/***/ 19658:
/*!*********************************************!*\
  !*** ./libs/mocks/src/lib/api/zone.data.ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   MOCK_BUILDINGS: () => (/* binding */ MOCK_BUILDINGS),
/* harmony export */   MOCK_LEVELS: () => (/* binding */ MOCK_LEVELS),
/* harmony export */   MOCK_ORGS: () => (/* binding */ MOCK_ORGS),
/* harmony export */   MOCK_ZONES: () => (/* binding */ MOCK_ZONES)
/* harmony export */ });
const MOCK_ORGS = [{
  created_at: 1587057070,
  updated_at: 1587692680,
  name: 'PlaceOS',
  description: '',
  tags: ['org'],
  count: 0,
  capacity: 0,
  parent_id: '',
  triggers: [],
  id: 'zone-EmWFTjuYExK'
}];
const MOCK_BUILDINGS = [{
  name: 'Sydney',
  description: '',
  tags: ['building'],
  count: 0,
  capacity: 0,
  parent_id: 'zone-EmWFTjuYExK',
  triggers: [],
  id: 'bld-01',
  levels: ['lvl-G', 'lvl-1']
}, {
  name: 'Brisbane',
  description: '',
  tags: ['building'],
  count: 0,
  capacity: 0,
  parent_id: 'zone-EmWFTjuYExK',
  triggers: [],
  id: 'bld-02',
  levels: ['lvl-2', 'lvl-3']
}];
const MOCK_ZONES = [];
const mockLevel = (id, idx, building, num = '10') => {
  let map_id = id.substr(4);
  map_id = `assets/maps/level_${num}.svg`;
  return {
    id: `${building.id}_${id}`,
    name: `Level ${id.endsWith('00') ? 'G' : id.split('-')[1]}`,
    parent_id: building.id,
    description: '',
    tags: ['level'],
    map_id,
    code: 'level code 12',
    type: 'staff floor',
    count: 5,
    capacity: 30,
    location: 'optional lat,long',
    display_name: ''
  };
};
const MOCK_LEVELS = MOCK_BUILDINGS.map(bld => bld.levels.map((level, idx) => mockLevel(level, idx, bld, level.split('-')[1]))).reduce((p, c) => p.concat(c), [
// {
//     id: 'test',
//     parent_id: 'bld-01',
//     name: 'Test',
//     map_id: 'assets/maps/test.svg',
// },
{
  id: 'level-p1',
  parent_id: 'bld-01',
  name: 'Level P1',
  tags: ['level', 'parking'],
  map_id: 'assets/maps/level_P1.svg'
}]);

/***/ }),

/***/ 67825:
/*!**********************************************!*\
  !*** ./libs/mocks/src/lib/api/zones.mock.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   LOCKERS: () => (/* binding */ LOCKERS),
/* harmony export */   PARKING_SPACES: () => (/* binding */ PARKING_SPACES),
/* harmony export */   ZONE_MOCKS: () => (/* binding */ ZONE_MOCKS)
/* harmony export */ });
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var _placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @placeos/ts-client */ 35713);
/* harmony import */ var _catering_data__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./catering.data */ 8287);
/* harmony import */ var _users_data__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./users.data */ 90726);
/* harmony import */ var _zone_data__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./zone.data */ 19658);





const MOCK_METADATA = {
  current: {
    contacts: {
      name: 'contacts',
      description: '',
      details: [{
        id: 'user-1',
        name: 'Jonathan McFarlane (PlaceOS)',
        email: 'jon@place.tech',
        first_name: 'Jonathan',
        last_name: 'McFarlane'
      }, {
        id: 'user-1',
        name: 'Alex Sorafumo (PlaceOS)',
        email: 'alex@place.tech',
        first_name: 'Alex',
        last_name: 'Sorafumo'
      }]
    }
  }
};
const PARKING_SPACES = {};
const LOCKERS = {};
const ZONE_MOCKS = registerMocks();
function registerMocks() {
  (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.registerMockEndpoint)({
    path: '/api/engine/v2/zones',
    metadata: {},
    method: 'GET',
    callback: request => {
      if (request.query_params.tags === 'org') {
        return _zone_data__WEBPACK_IMPORTED_MODULE_4__.MOCK_ORGS;
      } else if (request.query_params.tags === 'region') {
        return [];
      } else if (request.query_params.tags === 'building') {
        return _zone_data__WEBPACK_IMPORTED_MODULE_4__.MOCK_BUILDINGS;
      } else if (request.query_params.tags === 'level') {
        return _zone_data__WEBPACK_IMPORTED_MODULE_4__.MOCK_LEVELS;
      } else if (request.query_params.tags) {
        return _zone_data__WEBPACK_IMPORTED_MODULE_4__.MOCK_ZONES.filter(_ => _.tags.includes(request.query_params.tags));
      }
      throw {
        status: 404,
        message: 'Zones not found'
      };
    }
  });
  (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.registerMockEndpoint)({
    path: '/api/engine/v2/settings',
    metadata: {},
    method: 'GET',
    callback: request => []
  });
  (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.registerMockEndpoint)({
    path: '/api/engine/v2/settings/:id',
    metadata: {},
    method: 'GET',
    callback: request => ({})
  });
  (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.registerMockEndpoint)({
    path: '/api/engine/v2/metadata/:id',
    metadata: {},
    method: 'GET',
    callback: request => {
      if (request.query_params.name === 'bindings') {
        return {
          bindings: {
            details: {
              area_management: 'space-0',
              location_services: 'space-0',
              contact_tracing: 'space-0',
              lockers: 'space-0'
              // payments: 'space-0',
            }
          }
        };
      }
      if (request.query_params.name === 'catering') {
        return {
          catering: {
            details: _catering_data__WEBPACK_IMPORTED_MODULE_2__.MOCK_MENU
          }
        };
      }
      if (request.query_params.name === 'parking-spaces') {
        const parts = request.route_params.id.split('-');
        const id = parts[parts.length - 1];
        return generateParkingSpaces(id);
      }
      if (request.query_params.name === 'lockers') {
        const parts = request.route_params.id.split('-');
        const id = parts[parts.length - 1];
        return generateLockers(id);
      }
      if (request.query_params.name === 'desks') {
        const parts = request.route_params.id.split('-');
        const id = parts[parts.length - 1];
        return generateMockDeskMetadata(id);
      }
      if (request.query_params.name === 'charge_codes') {
        const parts = request.route_params.id.split('-');
        const id = parts[parts.length - 1];
        return {
          charge_codes: {
            details: new Array(30).fill(0).map((_, idx) => `C-${idx}`)
          }
        };
      }
      if (request.query_params.name === 'map_regions') {
        return {
          map_regions: {
            details: {
              areas: [{
                id: 'zone-10.A',
                properties: {
                  capacity: 100,
                  label_location: {
                    x: 0.36,
                    y: 0.33
                  }
                  // draw_polygon: true
                },
                geometry: {
                  coordinates: [[0.0, 0.0], [0.0, 0.5], [0.5, 0.5], [0.5, 0.0]]
                }
              }, {
                id: 'zone-10.B',
                properties: {
                  capacity: 100,
                  label_location: {
                    x: 0.76,
                    y: 0.33
                  }
                }
              }, {
                id: 'zone-10.C',
                properties: {
                  capacity: 100,
                  label_location: {
                    x: 0.63,
                    y: 0.77
                  }
                }
              }]
            }
          }
        };
      }
      if (MOCK_METADATA[request.route_params.id] && MOCK_METADATA[request.route_params.id][request.query_params.name]) {
        return MOCK_METADATA[request.route_params.id];
      } else if (MOCK_METADATA[request.route_params.id] && !request.query_params.name) {
        return MOCK_METADATA[request.route_params.id] || {};
      }
      return {};
    }
  });
  (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.registerMockEndpoint)({
    path: '/api/engine/v2/metadata/:id',
    metadata: {},
    method: 'PATCH',
    callback: request => {
      if (!MOCK_METADATA[request.route_params.id]) MOCK_METADATA[request.route_params.id] = {};
      MOCK_METADATA[request.route_params.id][request.body.name] = request.body;
      return request.body;
    }
  });
  (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.registerMockEndpoint)({
    path: '/api/engine/v2/metadata/:id',
    metadata: {},
    method: 'PUT',
    callback: request => {
      if (!MOCK_METADATA[request.route_params.id]) MOCK_METADATA[request.route_params.id] = {};
      MOCK_METADATA[request.route_params.id][request.body.name] = request.body;
      return request.body;
    }
  });
  const DESK_FEATURES = ['sit_to_stand', 'single_monitor', 'dual_monitor'];
  function generateMockDeskMetadata(id) {
    return {
      desks: {
        details: new Array(30).fill(0).map((_, idx) => ({
          id: `table-${(0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.padString)(id, 2)}.${(0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.padString)(idx + 1, 3)}`,
          name: `Desk ${id}.${(0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.padString)(idx + 1, 3)}`,
          bookable: (0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.predictableRandomInt)(9999) % 4 !== 0,
          groups: (0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.predictableRandomInt)(9999) % 4 === 0 ? ['test-1'] : [],
          features: DESK_FEATURES.filter(_ => (0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.predictableRandomInt)(99999) % 3 === 0)
        }))
      }
    };
  }
  function generateParkingSpaces(id) {
    if (!PARKING_SPACES[id]) {
      PARKING_SPACES[id] = {
        'parking-spaces': {
          details: new Array(18 * 6).fill(0).map((_, idx) => {
            const position = (0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.padString)(idx % 18 + Math.floor(idx / 18) * 100, 3);
            const assignee = (0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.predictableRandomInt)(9999) % 4 === 0 ? _users_data__WEBPACK_IMPORTED_MODULE_3__.MOCK_STAFF[(0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.predictableRandomInt)(_users_data__WEBPACK_IMPORTED_MODULE_3__.MOCK_STAFF.length)] : {};
            return {
              id: `park-${position}`,
              map_id: `park-${position}`,
              name: `${position}`,
              bookable: (0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.predictableRandomInt)(9999) % 4 !== 0,
              assigned_to: assignee.email || '',
              assigned_name: assignee.name || ''
            };
          })
        }
      };
    }
    return PARKING_SPACES[id];
  }
  function generateLockers(id) {
    if (!LOCKERS[id]) {
      LOCKERS[id] = {
        lockers: {
          details: new Array(6).fill(0).map((_, idx) => {
            const position = (0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.padString)(idx + 1, 2);
            const assignee = (0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.predictableRandomInt)(9999) % 4 === 0 ? _users_data__WEBPACK_IMPORTED_MODULE_3__.MOCK_STAFF[(0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.predictableRandomInt)(_users_data__WEBPACK_IMPORTED_MODULE_3__.MOCK_STAFF.length)] : {};
            return {
              id: `locker-bank-${id}.${position}`,
              map_id: `bank-${id}.${position}`,
              level_id: `lvl-02`,
              name: `Bank ${position}`,
              height: 3,
              lockers: new Array(18).fill(0).map((_, idx2) => ({
                id: `locker-${position}.${(0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.padString)(idx2 + 1, 3)}`,
                name: `Locker ${idx2 + 1}`,
                accessible: (0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.predictableRandomInt)(9999) % 2 !== 0,
                bookable: (0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.predictableRandomInt)(9999) % 4 !== 0,
                position: [idx2 % 6, Math.floor(idx2 / 6)],
                size: [1, 1]
              }))
            };
          })
        }
      };
    }
    return LOCKERS[id];
  }
  (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.registerMockEndpoint)({
    path: '/api/engine/v2/metadata/:id/children',
    metadata: {},
    method: 'GET',
    callback: request => {
      const zone = _zone_data__WEBPACK_IMPORTED_MODULE_4__.MOCK_BUILDINGS.find(_ => _.id === request.route_params.id);
      if (!zone) throw {
        status: 404,
        message: `Unable to find zone with id "${request.route_params.id}"`
      };
      return _zone_data__WEBPACK_IMPORTED_MODULE_4__.MOCK_LEVELS.filter(_ => _.parent_id === zone.id).map(lvl => {
        const parts = lvl.id.split('-');
        const id = parts[parts.length - 1];
        return {
          zone: lvl,
          metadata: request.query_params.name === 'parking-spaces' ? generateParkingSpaces(id) : request.query_params.name === 'lockers' ? generateLockers(id) : generateMockDeskMetadata(id)
        };
      });
    }
  });
}

/***/ }),

/***/ 30084:
/*!***********************************************!*\
  !*** ./libs/mocks/src/lib/realtime/camera.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CameraPan: () => (/* binding */ CameraPan),
/* harmony export */   CameraTilt: () => (/* binding */ CameraTilt),
/* harmony export */   createCameraModule: () => (/* binding */ createCameraModule)
/* harmony export */ });
var CameraTilt;
(function (CameraTilt) {
  CameraTilt[CameraTilt["Down"] = 0] = "Down";
  CameraTilt[CameraTilt["Up"] = 1] = "Up";
  CameraTilt[CameraTilt["Stop"] = 2] = "Stop";
})(CameraTilt || (CameraTilt = {}));
var CameraPan;
(function (CameraPan) {
  CameraPan[CameraPan["Left"] = 0] = "Left";
  CameraPan[CameraPan["Right"] = 1] = "Right";
  CameraPan[CameraPan["Stop"] = 2] = "Stop";
})(CameraPan || (CameraPan = {}));
class CameraModule {
  constructor(_) {
    this.presets = ['Preset One', 'Preset 2', 'Preset Three'];
  }
  $pan(dir) {}
  $tilt(tilt) {}
  $recall(name) {}
  $save_preset(name) {}
}
const createCameraModule = (space, overrides = {}) => new CameraModule({
  ...space,
  ...overrides
});

/***/ }),

/***/ 43037:
/*!************************************************!*\
  !*** ./libs/mocks/src/lib/realtime/capture.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CaptureModule: () => (/* binding */ CaptureModule),
/* harmony export */   createCaptureModule: () => (/* binding */ createCaptureModule)
/* harmony export */ });
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/common */ 22797);

let interval;
class CaptureModule {
  constructor(_) {
    this.status = 'stopped';
    this.live = false;
    this.remaining = (0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.randomInt)(24 * 60 * 60);
  }
  $start() {
    this.status = 'playing';
    interval = setInterval(() => {
      if (this.remaining < 1) clearInterval(interval);
      this.remaining = this.remaining - 1;
      this.current = this.current + 1;
    }, 3000);
  }
  $pause() {
    this.status = 'paused';
    clearInterval(interval);
  }
  $resume() {
    this.$start();
  }
  $stop() {
    this.status = 'stopped';
    this.current = 0;
    clearInterval(interval);
  }
}
const createCaptureModule = (space, overrides = {}) => new CaptureModule({
  ...space,
  ...overrides
});

/***/ }),

/***/ 83924:
/*!********************************************************!*\
  !*** ./libs/mocks/src/lib/realtime/contact-tracing.ts ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createContactTracingModule: () => (/* binding */ createContactTracingModule)
/* harmony export */ });
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! date-fns */ 28797);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! date-fns */ 55882);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! date-fns */ 99908);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! date-fns */ 3330);
/* harmony import */ var _api_users_data__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../api/users.data */ 90726);



const CONTACT_EVENTS = {};
const filterFn = (start, end) => itm => {
  return (0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.timePeriodsIntersect)(start, end, itm.contact_time, itm.contact_time);
};
class ContactTracingModule {
  constructor(_) {}
  $close_contacts(email, user, start, end) {
    if (!CONTACT_EVENTS[email]) CONTACT_EVENTS[email] = [];
    if (CONTACT_EVENTS[email].length) return CONTACT_EVENTS[email].filter(filterFn(start, end));
    const events = [];
    const beginning = (0,date_fns__WEBPACK_IMPORTED_MODULE_2__.addDays)(start * 1000, -10);
    const ending = (0,date_fns__WEBPACK_IMPORTED_MODULE_2__.addDays)(end * 1000, 10);
    let date = new Date(beginning);
    while ((0,date_fns__WEBPACK_IMPORTED_MODULE_3__.isBefore)(date, ending)) {
      new Array((0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.randomInt)(4)).fill(0).map(_ => ({
        mac_address: (0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.randomString)(10),
        contact_time: (0,date_fns__WEBPACK_IMPORTED_MODULE_4__.getUnixTime)((0,date_fns__WEBPACK_IMPORTED_MODULE_5__.setHours)(date, (0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.randomInt)(11) + 7)),
        duration: (0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.randomInt)(60) * 60,
        username: _api_users_data__WEBPACK_IMPORTED_MODULE_1__.MOCK_STAFF[(0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.randomInt)(_api_users_data__WEBPACK_IMPORTED_MODULE_1__.MOCK_STAFF.length)].email
      })).forEach(e => events.push(e));
      date = (0,date_fns__WEBPACK_IMPORTED_MODULE_2__.addDays)(date, 1);
    }
    CONTACT_EVENTS[email] = events;
    return CONTACT_EVENTS[email].filter(filterFn(start, end));
  }
}
const createContactTracingModule = (space, overrides = {}) => new ContactTracingModule({
  ...space,
  ...overrides
});

/***/ }),

/***/ 42:
/*!************************************************!*\
  !*** ./libs/mocks/src/lib/realtime/control.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createSystemModule: () => (/* binding */ createSystemModule)
/* harmony export */ });
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/common */ 22797);

class RoomModule {
  constructor(_data) {
    this.help = {
      help: {
        title: 'Help',
        content: `
# Using the asset browser

## Activating the menu
The 5 finger touch can be actvated by placing 4 fingers and your thumb on the screen, or quickly double-tapping the screen. Activation through double tap will leave the menu on-screen. To close tap the ‘X’.

## Selecting a menu item
Leaving at least one finger on the screen, drag your finger to the icon to select.

## Home Menu
The home menu allows you to access files and navigate to content and presentations via the Launcher.

## Connect and stream your laptop or access the CMS to add files
Plug your laptop into the HDMI to stream it to the screen, or access the CMS to add your own content and create custom presentations.

<video></video>

1. Test1
2. Test2
3. Test3
            `
      },
      'laptop-help': {
        icon: 'web_asset',
        title: 'Asset Browser',
        content: `# Test 2`
      }
    };
    this.tabs = [{
      icon: 'laptop',
      name: 'Laptop',
      type: 'Laptop'
    }, {
      icon: 'call',
      name: 'VC',
      inputs: ['VidConf_1'],
      help: 'vidconf-help',
      controls: 'vidconf-controls'
    }];
    this.volume = 0;
    this.name = _data.name || 'Test Module';
    this.connected = _data.connected ?? true;
    this.active = _data.active || false;
    this.input_list = _data.input_list;
    this.output_list = _data.output_list;
    this.env_sources = _data.env_sources || [];
    this.inputs = Object.keys(this.input_list || {}) || [];
    this.outputs = Object.keys(this.output_list || {}) || [];
    this.available_outputs = this.outputs;
    const types = (0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.unique)(this.env_sources.map(_ => _.type)) || [];
    types.forEach(t => this[`${t}`] = this.env_sources.filter(_ => _.type === t).map(_ => _.id));
    this.env_sources.forEach(source => this[`${source.type}/${source.id}`] = source);
    this.inputs.forEach(key => this[`input/${key}`] = this.input_list[key]);
    this.outputs.forEach(key => this[`output/${key}`] = this.output_list[key]);
  }
  $power(state = true) {
    this.active = state;
  }
  /** Shares a signal source with the room and any connected remote participants. */
  $share() {}
  /**
   * Connect a signal source to a signal output, or set of outputs. Any intermediate
   * device interactions are handled internally. For example, on a system using a small
   * presentation switcher and a display, routing a laptop input will select the
   * appropriate input on the switcher, and select the appropriate input on the display.
   *
   * This includes all routable signal types - in addition to the above example, this may
   * be interacting with an audio DSP to add a microphone feed to an output zone, or
   * connecting a USB HID input device with a specific output.
   **/
  $route(input, output) {
    if (this.inputs.includes(input) && this.outputs.includes(output)) {
      this.$updateState(input, {
        routes: (0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.unique)([...(this.input_list[input].routes || []), output])
      });
      this.$updateState(output, {
        source: input,
        following: input
      });
    }
  }
  /**
   * Remove a signal source from a signal output.
   * Predominantly intended for outputs that support more than one simultaneous input source
   * (mixed audio zone, or display capable of compositing multiple video sources).
   **/
  $unroute() {}
  /**
   * Establish a call (either phone or video) with a remote participant.
   * This may be a peer-to-peer connection or a wider group via an external bridging service.
   **/
  $connect() {}
  /** End a call with a remote participant. */
  $disconnect() {}
  /**
   * Bind the current system to another PlaceOS controlled space, relinquishing local control.
   * This may be used for an education pod that pairs with a wider classroom or a room being
   * used as an overflow from a primary event space.
   **/
  $link() {}
  /**
   * Join the current system with another PlaceOS controlled space, sharing control and signal IO.
   * Examples of usage would be a set of rooms with moveable walls. N-way merges supported.
   **/
  $merge() {}
  /** Separate from a linked or merged system. */
  $split() {}
  /**
   * Display an alert visible to participants in the space. This may occur as a screen overlay,
   * on a control interface, a bot post in a chat space associated with the current meeting or
   * other modalities depending on hardware capability.
   **/
  $notify() {}
  /**
   * Place the room into a predefined operation mode. This may include executing an arbitrary
   * set of device interactions, changing metadata associated with the system itself (changing
   * available input or output nodes), or other configurable actions designed to transition
   * the space to a specific state.
   **/
  $preset() {}
  /**
   * Set the volume for a signal node in the space. This can include outputs as well as inputs
   * where supported (e.g. microphone). If unspecified, default is to interact with a ‘primary’
   * output node.
   **/
  $volume(value, source = 'all') {
    if (source === 'all') {
      this.volume = value;
    }
  }
  /** Interact with audio muting on supporting signal nodes within the space. */
  $mute(state = true, source = 'all') {
    this.$updateState(source, {
      mute: state
    });
  }
  /**
   * Activates or deactivates a signal mute for the associated IO. If this is not possible,
   * (e.g. unsupported by the device) an error is returned.
   **/
  $unmute(source = 'all') {
    this.$mute(false, source);
  }
  /**
   * Wrapper for an arbitrary set of control points defined in system configuration.
   * Each of these may map to control options available on a sibling module and take one of two forms:
   *  - Continuous value within a range (temperature set point 16.0...28.0 degrees, lighting level 0...100)
   *  - Set of possible states (lighting high/med/low, blind up/down, electrochromic glass clear/opaque)
   *
   * System state provides the ability to introspect configured points for both control limits and current value.
   **/
  $environment(id, state) {
    const source = this.env_sources.find(_ => _.id === id);
    if (source) {
      this[`${source.type}/${source.id}`] = {
        ...source,
        state
      };
    }
  }
  /** Locks an IO node. Prevents any route changes that include this until unlocked. */
  $lock(source) {
    this.$updateState(source, {
      locked: true
    });
  }
  /** Unlocks an IO node. */
  $unlock(source) {
    this.$updateState(source, {
      locked: false
    });
  }
  $updateState(source, data) {
    if (this[`input/${source}`]) {
      this[`input/${source}`] = {
        ...this[`input/${source}`],
        ...data
      };
      this.input_list[source] = {
        ...this[`input/${source}`],
        ...data
      };
    } else if (this[`output/${source}`]) {
      this[`output/${source}`] = {
        ...this[`output/${source}`],
        ...data
      };
      this.output_list[source] = {
        ...this[`output/${source}`],
        ...data
      };
    }
  }
}
const input_list = {
  Mic1: {
    name: 'Lectern Mic',
    type: 'Microphone',
    mod: 'Microphone_1'
  },
  Mic2: {
    name: 'Lapel Mic',
    type: 'Microphone',
    mod: 'Microphone_2'
  },
  Mic3: {
    name: 'Handheld Mic',
    type: 'Microphone',
    mod: 'Microphone_3'
  },
  PC1: {
    name: 'PC-1',
    type: 'PC'
  },
  PC2: {
    name: 'PC-2',
    type: 'PC'
  },
  PC3: {
    name: 'PC-3',
    type: 'PC'
  },
  PC4: {
    name: 'PC-4',
    type: 'PC'
  },
  HDMI: {
    name: 'Laptop HDMI',
    type: 'Laptop'
  },
  VGA: {
    name: 'Laptop VGA',
    type: 'Laptop'
  },
  Camera1: {
    name: 'Camera Rear',
    type: 'Camera',
    mod: 'Camera_1'
  },
  Camera2: {
    name: 'Camera Front',
    type: 'Camera',
    mod: 'Camera_2'
  },
  Camera3: {
    name: 'Camera Rear 2',
    type: 'Camera',
    mod: 'Camera_3'
  },
  Camera4: {
    name: 'Camera Front 2',
    type: 'Camera',
    mod: 'Camera_4'
  },
  TV1: {
    name: 'IPTV 1',
    type: 'TV',
    mod: 'IPTV_1'
  },
  VC1: {
    name: 'Video Conference 1',
    type: 'VC',
    mod: 'VidConf_1'
  }
};
const output_list = {
  Display1: {
    name: 'Screen 1',
    type: 'Display',
    source: 'PC1',
    mod: 'Display_1'
  },
  Display2: {
    name: 'Screen 2',
    type: 'Display',
    mod: 'Display_2'
  },
  Display5: {
    name: 'TV 1',
    type: 'Display',
    mod: 'Display_5',
    source: 'TV1'
  }
};
const env_sources = [{
  id: 'light1',
  name: 'Lighting',
  type: 'lights',
  states: ['Off', 'Presentation', 'Meeting', 'Full'],
  state: 'Off'
}, {
  id: 'blind1',
  name: 'Blinds',
  type: 'blinds',
  states: ['Off', 'Presentation', 'Meeting'],
  state: 'Off'
}, {
  id: 'screen1',
  name: 'Screen',
  type: 'screen',
  states: ['Up', 'Down'],
  state: 'Down'
}];
const createSystemModule = (space, overrides = {}) => new RoomModule({
  ...space,
  input_list,
  output_list,
  env_sources,
  ...overrides
});

/***/ }),

/***/ 57133:
/*!**********************************************!*\
  !*** ./libs/mocks/src/lib/realtime/desks.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   MockAreaManagementModule: () => (/* binding */ MockAreaManagementModule),
/* harmony export */   MockLocationServicesModule: () => (/* binding */ MockLocationServicesModule),
/* harmony export */   createAreaManagementModule: () => (/* binding */ createAreaManagementModule),
/* harmony export */   generateLocation: () => (/* binding */ generateLocation),
/* harmony export */   updateLocations: () => (/* binding */ updateLocations)
/* harmony export */ });
/* harmony import */ var ts_md5__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ts-md5 */ 96466);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var _api_zone_data__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../api/zone.data */ 19658);
/* harmony import */ var _api_users_data__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../api/users.data */ 90726);




class MockAreaManagementModule {
  constructor() {
    /** Overview of the zones */
    this.overview = {};
    this.emergency_contacts = {
      'First Aid': _api_users_data__WEBPACK_IMPORTED_MODULE_3__.MOCK_STAFF.filter(_ => (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.predictableRandomInt)(9999) % 5 === 0),
      'Fire Warden': _api_users_data__WEBPACK_IMPORTED_MODULE_3__.MOCK_STAFF.filter(_ => (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.predictableRandomInt)(9999) % 5 === 0)
    };
  }
  $locate_user(email, username) {}
  $update() {
    updateLocations(this, _api_zone_data__WEBPACK_IMPORTED_MODULE_2__.MOCK_LEVELS);
  }
}
const MAC_LOOKUP = {};
class MockLocationServicesModule {
  $check_ownership_of(mac_address) {
    if (!MAC_LOOKUP[mac_address]) {
      const staff = (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.randomInt)(999_999) % 3 === 0 ? _api_users_data__WEBPACK_IMPORTED_MODULE_3__.MOCK_STAFF[(0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.randomInt)(_api_users_data__WEBPACK_IMPORTED_MODULE_3__.MOCK_STAFF.length)] : {
        name: ''
      };
      MAC_LOOKUP[mac_address] = {
        assigned_to: staff.name
      };
    }
    return MAC_LOOKUP[mac_address];
  }
  $locate_user(email, username) {
    return [{
      type: 'wireless',
      position: {
        x: 0.5,
        y: 0.5
      },
      level: _api_zone_data__WEBPACK_IMPORTED_MODULE_2__.MOCK_LEVELS[(0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.randomInt)(_api_zone_data__WEBPACK_IMPORTED_MODULE_2__.MOCK_LEVELS.length)].id,
      priority: 0
    }];
  }
}
function padZero(no, len = 3) {
  let str = `${no}`;
  while (str.length < len) {
    str = '0' + str;
  }
  return str;
}
function createAreaManagementModule(space, overrides = {}) {
  const mod = new MockAreaManagementModule();
  for (const lvl of _api_zone_data__WEBPACK_IMPORTED_MODULE_2__.MOCK_LEVELS) {
    mod.overview[lvl.id] = {
      desk_count: 100,
      desk_usage: 0,
      device_capacity: 100,
      device_count: 0,
      estimated_people: 0,
      percentage_use: 0,
      recommendation: 10000
    };
    mod[`${lvl.id}:desk_ids`] = new Array(mod.overview[lvl.id].desk_count).fill(0).map((_, idx) => `table-${lvl.number}.${padZero(idx)}`);
    mod[`${lvl.id}`] = {
      value: []
    };
    mod[`${lvl.id}:areas`] = {
      value: [{
        area_id: 'zone-10.B',
        count: (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.randomInt)(100),
        name: '.L1 IFS IT'
      }, {
        area_id: 'zone-10.A',
        count: (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.randomInt)(100),
        name: '.L1 IFS IT'
      }, {
        area_id: 'zone-10.C',
        count: (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.randomInt)(50),
        name: '.L1 IFS IT'
      }, {
        area_id: 'zone-02.D',
        count: (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.randomInt)(100),
        name: 'Quite Work'
      }, {
        area_id: 'zone-02.B',
        count: (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.randomInt)(100),
        name: 'Meeting Area A'
      }, {
        area_id: 'zone-02.A',
        count: (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.randomInt)(100),
        name: 'Meeting Area B'
      }, {
        area_id: 'zone-02.C',
        count: (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.randomInt)(50),
        name: 'Casual Work'
      }]
    };
  }
  return mod;
}
function updateLocations(mod, levels) {
  for (const lvl of levels) {
    mod[lvl.id] = {
      value: new Array((0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.predictableRandomInt)(20)).fill(0).map(() => generateLocation(lvl, mod[`${lvl.id}:desk_ids`]))
    };
    for (const area of mod[`${lvl.id}:areas`].value) {
      area.count = (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.randomInt)(100);
    }
    mod[`${lvl.id}:areas`] = {
      ...mod[`${lvl.id}:areas`]
    };
  }
}
function generateLocation(lvl, desks, users = _api_users_data__WEBPACK_IMPORTED_MODULE_3__.MOCK_STAFF) {
  const fixed = (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.predictableRandomInt)(9999) % 3 === 0;
  const usr = (users || [])[(0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.predictableRandomInt)((users || [])?.length)]?.email;
  return fixed ? {
    location: 'desk',
    at_location: (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.predictableRandomInt)(9999) % 2 !== 0,
    map_id: desks[(0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.predictableRandomInt)(desks.length)],
    mac: ts_md5__WEBPACK_IMPORTED_MODULE_0__.Md5?.hashStr(usr || ''),
    level: lvl.id,
    building: lvl.parent_id
  } : {
    location: 'wireless',
    coordinates_from: 'bottom-left',
    x: (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.predictableRandomInt)(1000) / 10,
    y: (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.predictableRandomInt)(1000) / 10,
    lon: 55.27476066828535,
    lat: 25.20106100633537,
    s2_cell_id: '3e5f4281459c',
    mac: ts_md5__WEBPACK_IMPORTED_MODULE_0__.Md5?.hashStr(usr || ''),
    variance: 9.62534032222287,
    last_seen: Math.floor(new Date().valueOf() / 1000),
    map_width: 100,
    map_height: 100
  };
}

/***/ }),

/***/ 42669:
/*!************************************************!*\
  !*** ./libs/mocks/src/lib/realtime/display.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createDisplayModule: () => (/* binding */ createDisplayModule)
/* harmony export */ });
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/common */ 22797);

class DisplayModule {
  $mute(state = true) {
    this.mute = state;
  }
  $volume(value) {
    this.volume = value;
  }
  constructor(_) {
    this.volume = (0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.randomInt)(100);
  }
}
const createDisplayModule = (space, overrides = {}) => new DisplayModule({
  ...space,
  ...overrides
});

/***/ }),

/***/ 74722:
/*!***********************************************!*\
  !*** ./libs/mocks/src/lib/realtime/events.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   MockBookingModule: () => (/* binding */ MockBookingModule),
/* harmony export */   createBookingsModule: () => (/* binding */ createBookingsModule)
/* harmony export */ });
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! date-fns */ 44206);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! date-fns */ 75859);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var _api_events_data__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../api/events.data */ 64055);



class MockBookingModule {
  constructor(space, _data) {
    /** Timezone the associated space resided */
    this.time_zone = 'Australia/Sydney';
    /** Whether booking is disabled */
    this.disable_book_now = false;
    /** Whether ending current meeting is disabled */
    this.disable_end_meeting = false;
    /** List of current and upcoming bookings for space */
    this.bookings = [];
    this.pending_period = 0;
    this.pending_before = 0;
    /** Control UI associated with the space */
    this.control_ui = '';
    /** Catering UI associated with the space */
    this.catering_ui = '';
    /** Time of the last booking started by a user */
    this.last_booking_started = 0;
    this.current_booking = null;
    this.next_booking = null;
    /** Current status of the space */
    this.room_image = 'assets/boardroom.jpg';
    this.status = 'free';
    this._space = null;
    this._space = space;
  }
  /** Start the meeting at the given time */
  $start_meeting(t) {
    this.last_booking_started = t;
  }
  /** End the meeting at the given time */
  $end_meeting(t) {}
  /** Book meeting for the current time */
  $book_now(len, t, o) {}
  $poll_bookings() {
    updateBookings(this._space, this);
  }
}
const createBookingsModule = (space, overrides = {}) => new MockBookingModule(space, overrides);
function updateBookings(space, mod) {
  const bookings = _api_events_data__WEBPACK_IMPORTED_MODULE_1__.MOCK_EVENTS.filter(event => event.attendees?.find(u => u.email === space.email || u.id === space.id || event.system?.id === space.id)) || [];
  bookings.sort((a, b) => a.event_start - b.event_start);
  mod.bookings = bookings;
  mod.current_booking = bookings.find(_ => (0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.timePeriodsIntersect)(Date.now(), Date.now(), _.event_start * 1000, _.event_end * 1000));
  mod.next_booking = bookings.find(_ => _.event_start * 1000 > Date.now());
  const date = new Date();
  const {
    current_booking,
    next_booking
  } = mod;
  const start = new Date((current_booking || next_booking)?.event_start);
  const pending = (0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.timePeriodsIntersect)(date.valueOf(), date.valueOf(), (0,date_fns__WEBPACK_IMPORTED_MODULE_2__.subSeconds)(start, mod.pending_before).valueOf(), (0,date_fns__WEBPACK_IMPORTED_MODULE_3__.addSeconds)(start, mod.pending_period).valueOf());
  mod.status = space?.bookable ? current_booking ? 'busy' : pending ? 'pending' : 'free' : 'not-bookable';
}

/***/ }),

/***/ 20062:
/*!*********************************************************!*\
  !*** ./libs/mocks/src/lib/realtime/locker-locations.ts ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createLockerLocationsModule: () => (/* binding */ createLockerLocationsModule)
/* harmony export */ });
class LockerLocationsModule {
  constructor(data) {}
  $lockers_allocated_to_me(...args) {
    return [{
      location: 'locker',
      bank_id: '977cb758-4e42-4292-848a-4821f2fb4d74',
      locker_id: 'adda7802-dfd7-467c-b369-d73394ad7084',
      locker_name: '0.105',
      allocated: true,
      group_id: '6c246e35-4a73-475a-8725-0676d78167f4'
    }];
  }
}
const createLockerLocationsModule = (details, overrides = {}) => new LockerLocationsModule({
  ...details,
  ...overrides
});

/***/ }),

/***/ 82050:
/*!************************************************!*\
  !*** ./libs/mocks/src/lib/realtime/meeting.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createMeetingPushModule: () => (/* binding */ createMeetingPushModule)
/* harmony export */ });
class MeetingPushModule {
  constructor(data) {
    this.supported_meeting_url = 'https://meet.';
  }
  $econtrol(...args) {}
}
const createMeetingPushModule = (details, overrides = {}) => new MeetingPushModule({
  ...details,
  ...overrides
});

/***/ }),

/***/ 84131:
/*!***************************************************!*\
  !*** ./libs/mocks/src/lib/realtime/microphone.ts ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createMicrophoneModule: () => (/* binding */ createMicrophoneModule)
/* harmony export */ });
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/common */ 22797);

class MicrophoneModule {
  $mute(state = true) {
    this.mute = state;
  }
  $volume(value) {
    this.volume = value;
  }
  constructor(_) {
    this.volume = (0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.randomInt)(100);
  }
}
const createMicrophoneModule = (space, overrides = {}) => new MicrophoneModule({
  ...space,
  ...overrides
});

/***/ }),

/***/ 90948:
/*!*************************************************!*\
  !*** ./libs/mocks/src/lib/realtime/payments.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createPaymentsModule: () => (/* binding */ createPaymentsModule)
/* harmony export */ });
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/common */ 22797);

class PaymentsModule {
  $list_payment_methods(type) {}
  $add_payment_method(type, details) {}
  $get_product_prices(id, period) {
    return [12000, 60];
  }
  $create_payment_intent(amount, source) {
    return (0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.randomString)(12);
  }
  $confirm_payment_intent(id) {}
  $cancel_payment_intent(id) {}
  $create_customer(...args) {
    return `stripe-${(0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.randomInt)(9_999_999, 1_000_000)}`;
  }
  constructor(_) {}
}
const createPaymentsModule = (space, overrides = {}) => new PaymentsModule({
  ...space,
  ...overrides
});

/***/ }),

/***/ 73607:
/*!*********************************************************!*\
  !*** ./libs/mocks/src/lib/realtime/video-conference.ts ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createVideoConferenceModule: () => (/* binding */ createVideoConferenceModule)
/* harmony export */ });
class VideoConferenceModule {
  $show_camera_pip(visible) {
    this.selfview = visible;
  }
  $mic_mute(visible) {
    this.mic_mute = visible;
  }
  $presentation_mode(state) {
    this.presentation_mode = state;
  }
  $hangup() {}
  $call_place_on_hold() {
    for (const key in this.calls) {
      if (this.calls[key].Status) {
        this.calls[key].Status = 'OnHold';
        this.calls = {
          ...this.calls
        };
        return;
      }
    }
  }
  $call_resume() {
    for (const key in this.calls) {
      if (this.calls[key].Status) {
        this.calls[key].Status = 'Idle';
        this.calls = {
          ...this.calls
        };
        return;
      }
    }
  }
  $video_layout(layout) {
    this.video_layout = layout;
  }
  $dtmf_send(digit) {}
  $dial(dial_number) {
    return new Promise(r => setTimeout(() => r(), 1000));
  }
  constructor(_) {
    this.mic_mute = false;
    this.selfview = false;
    this.video_layout = 'Auto';
    this.presentation_mode = 'None';
    this.calls = {
      test: {
        Status: 'Connected'
      }
    };
  }
}
const createVideoConferenceModule = (space = {}, overrides = {}) => new VideoConferenceModule({
  ...space,
  ...overrides
});

/***/ }),

/***/ 12028:
/*!*****************************************************!*\
  !*** ./libs/mocks/src/lib/systems-bindings.mock.ts ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createSystem: () => (/* binding */ createSystem)
/* harmony export */ });
/* harmony import */ var _placeos_ts_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/ts-client */ 35713);
/* harmony import */ var _realtime_control__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./realtime/control */ 42);
/* harmony import */ var _realtime_events__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./realtime/events */ 74722);
/* harmony import */ var _realtime_desks__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./realtime/desks */ 57133);
/* harmony import */ var _realtime_camera__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./realtime/camera */ 30084);
/* harmony import */ var _realtime_display__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./realtime/display */ 42669);
/* harmony import */ var _realtime_microphone__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./realtime/microphone */ 84131);
/* harmony import */ var _realtime_capture__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./realtime/capture */ 43037);
/* harmony import */ var _realtime_meeting__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./realtime/meeting */ 82050);
/* harmony import */ var _realtime_video_conference__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./realtime/video-conference */ 73607);
/* harmony import */ var _realtime_contact_tracing__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./realtime/contact-tracing */ 83924);
/* harmony import */ var _realtime_payments__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./realtime/payments */ 90948);
/* harmony import */ var _realtime_locker_locations__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./realtime/locker-locations */ 20062);













function createSystem(space) {
  (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_0__.registerSystem)(space.id, {
    System: [(0,_realtime_control__WEBPACK_IMPORTED_MODULE_1__.createSystemModule)(space)],
    Bookings: [(0,_realtime_events__WEBPACK_IMPORTED_MODULE_2__.createBookingsModule)(space)],
    ContactTracing: [(0,_realtime_contact_tracing__WEBPACK_IMPORTED_MODULE_10__.createContactTracingModule)(space)],
    AreaManagement: [(0,_realtime_desks__WEBPACK_IMPORTED_MODULE_3__.createAreaManagementModule)(space)],
    LocationServices: [new _realtime_desks__WEBPACK_IMPORTED_MODULE_3__.MockLocationServicesModule()],
    Camera: new Array(10).fill(0).map(_ => (0,_realtime_camera__WEBPACK_IMPORTED_MODULE_4__.createCameraModule)(space)),
    Display: new Array(10).fill(0).map(_ => (0,_realtime_display__WEBPACK_IMPORTED_MODULE_5__.createDisplayModule)(space)),
    Microphone: new Array(10).fill(0).map(_ => (0,_realtime_microphone__WEBPACK_IMPORTED_MODULE_6__.createMicrophoneModule)(space)),
    Capture: [(0,_realtime_capture__WEBPACK_IMPORTED_MODULE_7__.createCaptureModule)(space)],
    MeetingPush: [(0,_realtime_meeting__WEBPACK_IMPORTED_MODULE_8__.createMeetingPushModule)()],
    VidConf: [(0,_realtime_video_conference__WEBPACK_IMPORTED_MODULE_9__.createVideoConferenceModule)()],
    Payment: [(0,_realtime_payments__WEBPACK_IMPORTED_MODULE_11__.createPaymentsModule)(space)],
    LockerLocations: [(0,_realtime_locker_locations__WEBPACK_IMPORTED_MODULE_12__.createLockerLocationsModule)()]
  });
  const system = (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_0__.mockSystem)(space.id);
  system.Bookings[0].$poll_bookings();
  setInterval(() => system.Bookings[0].$poll_bookings(), 30 * 1000);
  system.AreaManagement[0].$update();
  setInterval(() => system.AreaManagement[0].$update(), 30 * 1000);
}

/***/ }),

/***/ 11110:
/*!*********************************!*\
  !*** ./libs/mocks/src/mocks.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var _lib_api_zones_mock__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./lib/api/zones.mock */ 67825);
/* harmony import */ var _lib_api_users_mock__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./lib/api/users.mock */ 13864);
/* harmony import */ var _lib_api_systems_mock__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./lib/api/systems.mock */ 61654);
/* harmony import */ var _lib_api_events_mock__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./lib/api/events.mock */ 43769);
/* harmony import */ var _lib_api_calendars_mock__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./lib/api/calendars.mock */ 30105);
/* harmony import */ var _lib_api_bookings_mock__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./lib/api/bookings.mock */ 86242);
/* harmony import */ var _lib_api_assets_mock__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./lib/api/assets.mock */ 76525);
/* harmony import */ var _lib_api_surveys_mock__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./lib/api/surveys.mock */ 19825);









/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({
  ZONE_MOCKS: _lib_api_zones_mock__WEBPACK_IMPORTED_MODULE_1__.ZONE_MOCKS,
  USER_MOCKS: _lib_api_users_mock__WEBPACK_IMPORTED_MODULE_2__.USER_MOCKS,
  SYSTEM_MOCKS: _lib_api_systems_mock__WEBPACK_IMPORTED_MODULE_3__.SYSTEM_MOCKS,
  EVENT_MOCKS: _lib_api_events_mock__WEBPACK_IMPORTED_MODULE_4__.EVENT_MOCKS,
  CALENDAR_MOCKS: _lib_api_calendars_mock__WEBPACK_IMPORTED_MODULE_5__.CALENDAR_MOCKS,
  BOOKING_MOCKS: _lib_api_bookings_mock__WEBPACK_IMPORTED_MODULE_6__.BOOKING_MOCKS,
  ASSET_MOCKS: _lib_api_assets_mock__WEBPACK_IMPORTED_MODULE_7__.ASSET_MOCKS,
  SURVEY_MOCKS: _lib_api_surveys_mock__WEBPACK_IMPORTED_MODULE_8__.SURVEY_MOCKS
});
(0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.log)('MOCKS', 'Mocks included with application.');

/***/ }),

/***/ 2510:
/*!****************************************!*\
  !*** ./libs/organisation/src/index.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Building: () => (/* reexport safe */ _lib_building_class__WEBPACK_IMPORTED_MODULE_0__.Building),
/* harmony export */   BuildingLevel: () => (/* reexport safe */ _lib_level_class__WEBPACK_IMPORTED_MODULE_2__.BuildingLevel),
/* harmony export */   Desk: () => (/* reexport safe */ _lib_desk_class__WEBPACK_IMPORTED_MODULE_6__.Desk),
/* harmony export */   Organisation: () => (/* reexport safe */ _lib_organisation_class__WEBPACK_IMPORTED_MODULE_3__.Organisation),
/* harmony export */   OrganisationService: () => (/* reexport safe */ _lib_organisation_service__WEBPACK_IMPORTED_MODULE_4__.OrganisationService),
/* harmony export */   Region: () => (/* reexport safe */ _lib_region_class__WEBPACK_IMPORTED_MODULE_7__.Region),
/* harmony export */   generateMockBuilding: () => (/* reexport safe */ _lib_building_utilities__WEBPACK_IMPORTED_MODULE_1__.generateMockBuilding),
/* harmony export */   generateMockLevel: () => (/* reexport safe */ _lib_building_utilities__WEBPACK_IMPORTED_MODULE_1__.generateMockLevel),
/* harmony export */   generateMockOrganisation: () => (/* reexport safe */ _lib_organisation_utilities__WEBPACK_IMPORTED_MODULE_5__.generateMockOrganisation),
/* harmony export */   moduleFromMetadata: () => (/* reexport safe */ _lib_organisation_utilities__WEBPACK_IMPORTED_MODULE_5__.moduleFromMetadata)
/* harmony export */ });
/* harmony import */ var _lib_building_class__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./lib/building.class */ 95170);
/* harmony import */ var _lib_building_utilities__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./lib/building.utilities */ 41274);
/* harmony import */ var _lib_level_class__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./lib/level.class */ 60602);
/* harmony import */ var _lib_organisation_class__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./lib/organisation.class */ 16612);
/* harmony import */ var _lib_organisation_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./lib/organisation.service */ 19863);
/* harmony import */ var _lib_organisation_utilities__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./lib/organisation.utilities */ 58772);
/* harmony import */ var _lib_desk_class__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./lib/desk.class */ 47451);
/* harmony import */ var _lib_region_class__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./lib/region.class */ 13466);









/***/ }),

/***/ 95170:
/*!*****************************************************!*\
  !*** ./libs/organisation/src/lib/building.class.ts ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Building: () => (/* binding */ Building)
/* harmony export */ });
/* harmony import */ var _level_class__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./level.class */ 60602);

class Building {
  constructor(raw_data = {}) {
    this.id = raw_data.id || '';
    this.parent_id = raw_data.parent_id || '';
    this.name = raw_data.name || '';
    const settings = raw_data.settings || {};
    this.display_name = raw_data.display_name;
    this.images = this.images || [];
    const disc_info = settings.discovery_info || settings;
    this.zone_id = raw_data.zone_id || raw_data.zone;
    this.extras = (raw_data.extras || disc_info.extras || []).map(i => ({
      id: i.extra_id || i.id,
      name: i.extra_name || i.name
    }));
    this.loan_items = (raw_data.loan_items || disc_info.loan_items || []).map(i => ({
      id: i.extra_id || i.id,
      name: i.extra_name || i.name
    }));
    this.levels = (raw_data.levels || disc_info.levels || []).map(i => new _level_class__WEBPACK_IMPORTED_MODULE_0__.BuildingLevel({
      ...i,
      building_id: this.id
    }));
    this._roles = raw_data.roles || disc_info.roles || {};
    this._lockers = raw_data.lockers || raw_data.locker_structure || disc_info.locker_structure || {};
    this._systems = raw_data.systems || disc_info.systems || {};
    this._phone_numbers = raw_data.phone_numbers || disc_info.phone_numbers || {};
    this.location = raw_data.location || disc_info.location || '0,0';
    this.room_configurations = raw_data.room_configurations || disc_info.room_configurations || [];
    this.attributes = raw_data.attributes || disc_info.attributes || [];
    const searchables = [];
    if (raw_data.neighbourhoods) {
      for (const lvl in raw_data.neighbourhoods) {
        if (lvl in raw_data.neighbourhoods) {
          const lvl_features = raw_data.neighbourhoods[lvl] || {};
          for (const feature in lvl_features) {
            if (feature in lvl_features) {
              searchables.push({
                id: lvl_features[feature],
                name: feature,
                level_id: lvl
              });
            }
          }
        }
      }
    }
    this.bindings = raw_data.bindings || {};
    this.searchables = searchables;
    this.map_id = raw_data.map_id || '';
    this.timezone = raw_data.timezone || disc_info.timezone || settings.timezone || '';
    this.catering_hours = raw_data.catering_hours || disc_info.catering_hours || settings.catering_hours || {
      start: 7,
      end: 20
    };
    this.visitor_space = raw_data.visitor_space || disc_info.visitor_space || settings.visitor_space || '';
    this.holding_bay = raw_data.holding_bay || disc_info.holding_bay || settings.holding_bay || '';
    this.code = raw_data.code || disc_info.code || settings.code || '';
    this.address = raw_data.address || disc_info.address || settings.address || '';
    this.orientations = raw_data.orientations || disc_info.orientations || settings.orientations || {};
    this.booking_details = raw_data.booking_details || disc_info.booking_details || settings.booking_details || null;
    this.catering_restricted_from = raw_data.catering_restricted_from || disc_info.catering_restricted_from || settings.catering_restricted_from || -1440;
    this.currency = raw_data.currency || disc_info.currency || settings.currency || 'USD';
  }
  /**
   * Get list of users with the associated role
   * @param name Role to find users for
   */
  role(name) {
    return [...(this._roles[name] || [])];
  }
  /**
   * Get list of the names of available user role lists
   */
  get role_names() {
    return Object.keys(this._roles).filter(i => i in this._roles);
  }
  /** Map of the locker ID arrays */
  get lockers() {
    return {
      ...(this._lockers || {})
    };
  }
  /** Map of important system ids for the building */
  get systems() {
    return {
      ...(this._systems || {})
    };
  }
  /** Map of important phone numbers for the building */
  get phone_numbers() {
    return {
      ...(this._phone_numbers || {})
    };
  }
  /**
   * Get search map feature for the given level ID
   * @param level_id ID of level to grab features for
   */
  featuresForLevel(level_id) {
    return (this.searchables || []).filter(i => i.level_id === level_id);
  }
}

/***/ }),

/***/ 41274:
/*!*********************************************************!*\
  !*** ./libs/organisation/src/lib/building.utilities.ts ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   generateMockBuilding: () => (/* binding */ generateMockBuilding),
/* harmony export */   generateMockLevel: () => (/* binding */ generateMockLevel)
/* harmony export */ });
let BLD_COUNT = 0;
let LVL_COUNT = 0;
/* istanbul ignore next */
/**
 * Generate raw mock data for creating a building
 * @param id Forced ID for the mock
 */
function generateMockBuilding(id) {
  if (!id) {
    id = `zone_bld-${BLD_COUNT++}`;
  }
  const levels = Array(10).fill(0).map(i => generateMockLevel());
  const features = {};
  for (const lvl of levels) {
    const count = Math.floor(Math.random() * 3 + 2);
    features[lvl.level_id] = {};
    for (let i = 0; i < count; i++) {
      features[lvl.level_id][`A Feature ${i + 1}`] = `feature-${i + 1}`;
    }
  }
  return {
    id,
    zone_id: id,
    extras: Array(10).fill(0).map((_, idx) => {
      const name = `Property ${idx + 1}`;
      return {
        extra_id: name.split(' ').join('-').toLowerCase(),
        extra_name: name
      };
    }),
    loan_items: Array(10).fill(0).map((_, idx) => {
      const name = `Property ${idx + 1}`;
      return {
        extra_id: name.split(' ').join('-').toLowerCase(),
        extra_name: name
      };
    }),
    levels,
    roles: {
      'first-aiders': Array(10).fill(0).map(i => ({
        name: 'Test'
      }))
    },
    neighbourhoods: features,
    settings: {
      test: {
        nested: {
          level2: true,
          org: false
        }
      }
    },
    room_configurations: [{
      id: 'boardroom',
      name: 'Boardroom',
      description: 'A boardroom setting'
    }, {
      id: 'cocktail',
      name: 'Cocktail',
      description: 'A cocktail setting'
    }]
  };
}
/* istanbul ignore next */
/**
 * Generate raw mock data for a building level
 * @param id Forced ID for the mock
 * @param map_url Map URL for the level
 */
function generateMockLevel(id, map_url) {
  if (!id) {
    id = `zone_lvl-${LVL_COUNT++}`;
  }
  return {
    level_id: id,
    level_name: `Level ${LVL_COUNT}`,
    map_url
  };
}

/***/ }),

/***/ 47451:
/*!*************************************************!*\
  !*** ./libs/organisation/src/lib/desk.class.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Desk: () => (/* binding */ Desk)
/* harmony export */ });
/* harmony import */ var _placeos_ts_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/ts-client */ 35713);

const IGNORE_KEYS = ['zone', 'qr_code', 'toJSON'];
class Desk {
  constructor(data = {}) {
    this.toJSON = () => this.format();
    this.id = data.id || '';
    this.map_id = data.map_id || data.id || '';
    this.name = data.name || '';
    this.bookable = data.bookable ?? false;
    this.zone = data.zone || new _placeos_ts_client__WEBPACK_IMPORTED_MODULE_0__.PlaceZone();
    this.groups = data.groups || [];
    this.qr_code = data.qr_code || '';
    this.features = data.features || [];
    this.images = data.images || [];
    for (const key in data) {
      if (!(key in this)) this[key] = data[key];
    }
  }
  format() {
    const data = {
      ...this
    };
    for (const key of IGNORE_KEYS) {
      delete data[key];
    }
    (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_0__.cleanObject)(data, [undefined, null, []]);
    return data;
  }
}

/***/ }),

/***/ 60602:
/*!**************************************************!*\
  !*** ./libs/organisation/src/lib/level.class.ts ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   BuildingLevel: () => (/* binding */ BuildingLevel)
/* harmony export */ });
/** Building Level data */
class BuildingLevel {
  constructor(_data = {}) {
    /** Settings overrides associated with the level */
    this.settings = {};
    this.id = _data.id || '';
    this.parent_id = _data.parent_id || '';
    this.name = _data.name || '';
    this.display_name = _data.display_name || '';
    this.map_id = _data.map_id || '';
    this.capacity = _data.capacity || 0;
    this.location = _data.location || '';
    this.locations = _data.locations || [];
    this.tags = _data.tags || [];
    this.images = _data.images || [];
    const parts = this.display_name.split(' ');
    this.number = ((parts.length >= 2 ? parts[parts.length - 1] : this.display_name[0])?.toUpperCase() || '').substring(0, 2);
  }
}

/***/ }),

/***/ 16612:
/*!*********************************************************!*\
  !*** ./libs/organisation/src/lib/organisation.class.ts ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Organisation: () => (/* binding */ Organisation)
/* harmony export */ });
/* harmony import */ var libs_common_src_lib_general__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! libs/common/src/lib/general */ 64217);

class Organisation {
  constructor(raw_data = {}) {
    this.id = raw_data.id || '';
    this.name = raw_data.name || '';
    this.description = raw_data.description || '';
    this.tags = raw_data.tags || [];
    this.count = raw_data.count || 0;
    this.capacity = raw_data.capacity || 0;
    this.bindings = raw_data.bindings || {};
    this._settings = raw_data.settings || {};
  }
  /**
   * Get a custom organisation setting
   * @param key Name of the setting. i.e. nested items can be grabbed using `.` to seperate key names
   */
  setting(key) {
    const keys = key.split('.');
    const value = (0,libs_common_src_lib_general__WEBPACK_IMPORTED_MODULE_0__.getItemWithKeys)(keys, this._settings);
    return value;
  }
}

/***/ }),

/***/ 19863:
/*!***********************************************************!*\
  !*** ./libs/organisation/src/lib/organisation.service.ts ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   OrganisationService: () => (/* binding */ OrganisationService)
/* harmony export */ });
/* harmony import */ var _home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 89204);
/* harmony import */ var _placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @placeos/ts-client */ 35713);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! rxjs */ 90521);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! rxjs */ 68824);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! rxjs */ 71536);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! rxjs/operators */ 35443);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! rxjs/operators */ 7841);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! rxjs/operators */ 57871);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! rxjs/operators */ 8627);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! rxjs/operators */ 19803);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! rxjs/operators */ 29314);
/* harmony import */ var libs_common_src_lib_notifications__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! libs/common/src/lib/notifications */ 39525);
/* harmony import */ var libs_common_src_lib_settings_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! libs/common/src/lib/settings.service */ 14233);
/* harmony import */ var _building_class__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./building.class */ 95170);
/* harmony import */ var _level_class__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./level.class */ 60602);
/* harmony import */ var _organisation_class__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./organisation.class */ 16612);
/* harmony import */ var _region_class__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./region.class */ 13466);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var js_yaml__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! js-yaml */ 53388);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! @angular/router */ 95072);
















class OrganisationService {
  /** Mapping of organisation settings overrides */
  get settings() {
    return this._settings;
  }
  /** Mapping of regions to settings overrides */
  get region_settings() {
    return this._region_settings;
  }
  /** Mapping of buildings to settings overrides */
  get building_settings() {
    return this._building_settings;
  }
  /** Mapping region settings overrides */
  regionSettings(id = '') {
    const region = this._active_region.getValue();
    if (!id && region) id = region?.id;
    return this._region_settings ? this._region_settings[id] || {} : {};
  }
  /** Mapping building settings overrides */
  buildingSettings(bld_id = '') {
    if (!bld_id && this.building) {
      bld_id = this.building?.id || this.buildings[0]?.id;
    }
    return this._building_settings ? this._building_settings[bld_id] || {} : {};
  }
  /** Organisation data for the application */
  get organisation() {
    return this._organisation;
  }
  /** List of available regions */
  get regions() {
    return this._regions.getValue();
  }
  /** Currently active region */
  get region() {
    return this._active_region.getValue();
  }
  set region(item) {
    this.setRegion(item);
  }
  setRegion(item) {
    var _this = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      if (!item) return;
      _this._active_region.next(item);
      yield _this.loadRegionData(item);
      _this._setBuildingFromTimezone();
      if (_this.building?.parent_id !== item.id && _this.buildingsForRegion(item).length) {
        _this.building = _this.buildingsForRegion(item)[0];
      } else _this._updateSettingOverrides();
    })();
  }
  /** List of available buildings */
  get buildings() {
    return this._buildings.getValue() || [];
  }
  /** Currently active building */
  get building() {
    return this._active_building.getValue();
  }
  set building(bld) {
    if (!bld) return;
    this._active_building.next(bld);
    this.loadBuildingData(bld).then(() => this._updateSettingOverrides());
    if (this.regions.length && this.region?.id !== bld.parent_id) {
      this.region = this.regions.find(_ => _.id === this.building.parent_id);
    }
  }
  get timezone() {
    return Intl.DateTimeFormat().resolvedOptions().timeZone;
  }
  get currency_code() {
    return this._service.get('app.currency') || this.building?.currency || 'USD';
  }
  /** Get binding value from the building/organisation */
  binding(name) {
    return this.building?.bindings[name] || this._organisation?.bindings[name];
  }
  /** Get building by id */
  find(id) {
    return this.buildings.find(i => i.id === id);
  }
  /** List of available levels */
  get levels() {
    return this._levels.getValue();
  }
  constructor(_service, _router) {
    this._service = _service;
    this._router = _router;
    /** Subject which stores the initialised state of the object */
    this._initialised = new rxjs__WEBPACK_IMPORTED_MODULE_10__.BehaviorSubject(false);
    /** Observable of the initialised state of the object */
    this.initialised = this._initialised.asObservable();
    this._regions = new rxjs__WEBPACK_IMPORTED_MODULE_10__.BehaviorSubject([]);
    this._active_region = new rxjs__WEBPACK_IMPORTED_MODULE_10__.BehaviorSubject(null);
    this._buildings = new rxjs__WEBPACK_IMPORTED_MODULE_10__.BehaviorSubject([]);
    this._active_building = new rxjs__WEBPACK_IMPORTED_MODULE_10__.BehaviorSubject(null);
    this._levels = new rxjs__WEBPACK_IMPORTED_MODULE_10__.BehaviorSubject([]);
    this._loaded_data = [];
    this.app_key = `${(this._service.app_name || 'workplace').toLowerCase()}_app`;
    /** Observable for the list of regions */
    this.region_list = this._regions.asObservable();
    /** Observable for the list of buildings */
    this.building_list = this._buildings.asObservable();
    /** Observable for the list of levels */
    this.level_list = this._levels.asObservable();
    /** Observable for the currently active region */
    this.active_region = this._active_region.asObservable();
    /** Observable for the currently active building */
    this.active_building = this._active_building.asObservable();
    /** Observable for the buildings associated with the currently active region */
    this.active_buildings = (0,rxjs__WEBPACK_IMPORTED_MODULE_11__.combineLatest)([this._buildings, this._active_region]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.map)(([_, region]) => region ? this.buildingsForRegion(region) : this.buildings));
    /** Observable for the levels associated with the currently active building */
    this.active_levels = (0,rxjs__WEBPACK_IMPORTED_MODULE_11__.combineLatest)([this._levels, this._active_building]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.map)(([_, bld]) => bld ? this.levelsForBuilding(bld) : []), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.shareReplay)(1));
    /** Mapping of organisation settings overrides */
    this._settings = [];
    /** Mapping of regions to settings overrides */
    this._region_settings = {};
    /** Mapping of buildings to settings overrides */
    this._building_settings = {};
    (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.onlineState)().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_14__.first)(_ => _)).subscribe(() => setTimeout(() => this.init(), 1000));
    (0,rxjs__WEBPACK_IMPORTED_MODULE_11__.combineLatest)([this.active_region, this.active_building]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_15__.filter)(([_, bld]) => !!bld), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_16__.debounceTime)(300)).subscribe(() => this._updateSettingOverrides());
  }
  /**
   * Get level with a matching ID
   * @param id_list List of IDs to find a match
   */
  levelWithID(id_list) {
    return this.levels.find(lvl => id_list?.includes(lvl.id));
  }
  /**
   * Get list of levels for the given building
   * @param bld Building to list levels for
   */
  levelsForBuilding(bld = this.building) {
    return this.levels.filter(lvl => lvl.parent_id && lvl.parent_id === bld?.id);
  }
  /**
   * Get list of buildings for the given region
   * @param region Region to list buildings for
   */
  buildingsForRegion(region = this.region) {
    return this.buildings.filter(bld => bld.parent_id === region?.id);
  }
  /**
   * Get list of levels for the given region
   * @param region Region to list levels for
   */
  levelsForRegion(region = this.region) {
    const bld_list = this.buildingsForRegion(region);
    return this.levels.filter(lvl => lvl.parent_id && bld_list.find(bld => bld.id === lvl.parent_id));
  }
  addZone(zone) {
    if (zone.tags.includes('region')) {
      const region = new _region_class__WEBPACK_IMPORTED_MODULE_7__.Region(zone);
      const regions = this._regions.getValue().filter(_ => _.id !== region.id);
      regions.push(region);
      this._regions.next(regions);
    } else if (zone.tags.includes('building')) {
      const bld = new _building_class__WEBPACK_IMPORTED_MODULE_4__.Building(zone);
      let buildings = this._buildings.getValue().filter(_ => _.id !== bld.id);
      buildings.push(bld);
      buildings = buildings.sort((a, b) => (a.name || '').localeCompare(b.name || ''));
      this._buildings.next(buildings);
    } else if (zone.tags.includes('level')) {
      const lvl = new _level_class__WEBPACK_IMPORTED_MODULE_5__.BuildingLevel(zone);
      let levels = this._levels.getValue().filter(_ => _.id !== lvl.id);
      levels.push(lvl);
      levels = levels.sort((a, b) => (a.name || '').localeCompare(b.name || ''));
      this._levels.next(levels);
    } else {
      console.warn('Unable to add zone as it is missing the required tag.', zone.id);
    }
  }
  removeZone(zone) {
    if (zone.tags.includes('region')) {
      const regions = this._regions.getValue().filter(_ => _.id !== zone.id);
      this._regions.next(regions);
    } else if (zone.tags.includes('building')) {
      const buildings = this._buildings.getValue().filter(_ => _.id !== zone.id);
      this._buildings.next(buildings);
    } else if (zone.tags.includes('level')) {
      const levels = this._levels.getValue().filter(_ => _.id !== zone.id);
      this._levels.next(levels);
    } else {
      console.warn('Unable to remove zone as it is missing the required tag.', zone.id);
    }
  }
  init(tries = 0) {
    var _this2 = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      _this2._initialised.next(false);
      yield _this2.load().catch(err => {
        (0,libs_common_src_lib_notifications__WEBPACK_IMPORTED_MODULE_2__.notifyError)('Error loading organisation data. Retrying...');
        setTimeout(() => _this2.init(tries), Math.min(10_000, 300 * ++tries));
        throw err;
      });
      _this2._initialised.next(true);
      if (window.debug) {
        if (!window.application) window.application = {};
        window.application.orgs = _this2;
      }
    })();
  }
  /**
   * Initialise service data
   */
  load() {
    var _this3 = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      yield _this3.loadOrganisation();
      yield _this3.loadRegions();
      if (!_this3._regions.getValue().length) {
        _this3._buildings.next(yield _this3.loadBuildings());
      } else {
        for (const region of _this3._regions.getValue()) {
          const blds = yield _this3.loadBuildings(region.id);
          if (blds.length) {
            _this3._buildings.next(blds);
            break;
          }
        }
      }
      yield _this3.loadSettings();
      if (!_this3._buildings.getValue()?.length) {
        (0,_placeos_common__WEBPACK_IMPORTED_MODULE_8__.log)('ORG', 'Unable to find any building zones');
      }
      yield _this3.loadLevels();
      _this3._updateSettingOverrides();
    })();
  }
  /**
   * Load organisation data for application
   */
  loadOrganisation() {
    var _this4 = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      const org_list = yield (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.queryZones)({
        tags: 'org'
      }).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.map)(i => i.data)).toPromise();
      if (org_list.length) {
        const auth = (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.authority)();
        const org = org_list.find(list => (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.isMock)() || list.id === auth?.config?.org_zone) || org_list[0];
        const bindings = (yield (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.showMetadata)(org.id, 'bindings').toPromise())?.details;
        _this4._organisation = new _organisation_class__WEBPACK_IMPORTED_MODULE_6__.Organisation({
          ...org,
          bindings
        });
      } else {
        (0,_placeos_common__WEBPACK_IMPORTED_MODULE_8__.log)('ORG', 'Unable to find organisation');
        _this4._router.navigate(['/misconfigured']);
      }
    })();
  }
  /**
   * Load region data for the organisation
   */
  loadRegions() {
    var _this5 = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      const list = yield (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.queryZones)({
        tags: 'region',
        parent_id: _this5._organisation?.id || '',
        limit: 500
      }).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.map)(i => i.data.map(_ => new _region_class__WEBPACK_IMPORTED_MODULE_7__.Region(_))), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_17__.catchError)(() => (0,rxjs__WEBPACK_IMPORTED_MODULE_18__.of)([]))).toPromise();
      _this5._regions.next(list);
    })();
  }
  loadRegionData(region) {
    var _this6 = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      if (_this6._loaded_data[region.id]) return;
      const [settings, bindings, buildings] = yield Promise.all([(0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.showMetadata)(region.id, _this6.app_key).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.map)(_ => _?.details)).toPromise(), (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.showMetadata)(region.id, 'bindings').pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.map)(_ => _?.details)).toPromise(), _this6.loadBuildings(region.id)]);
      _this6._buildings.next((0,_placeos_common__WEBPACK_IMPORTED_MODULE_8__.unique)([..._this6._buildings.getValue(), ...buildings], 'id'));
      _this6._loaded_data[region.id] = true;
      region.bindings = bindings;
      _this6._region_settings[region.id] = settings;
    })();
  }
  /**
   * Load buildings data for the organisation
   */
  loadBuildings(parent_id = this._organisation?.id) {
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      const building_list = yield (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.queryZones)({
        tags: 'building',
        parent_id,
        limit: 500
      }).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.map)(i => i.data.map(_ => new _building_class__WEBPACK_IMPORTED_MODULE_4__.Building(_)))).toPromise();
      return building_list;
    })();
  }
  loadBuildingData(bld) {
    var _this7 = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      if (!bld || _this7._loaded_data[bld.id]) return;
      const [settings, bindings, booking_rules, driver_settings] = yield Promise.all([(0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.showMetadata)(bld.id, _this7.app_key).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.map)(_ => _?.details), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_17__.catchError)(() => (0,rxjs__WEBPACK_IMPORTED_MODULE_18__.of)({}))).toPromise(), (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.showMetadata)(bld.id, 'bindings').pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.map)(_ => _?.details), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_17__.catchError)(() => (0,rxjs__WEBPACK_IMPORTED_MODULE_18__.of)({}))).toPromise(), (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.showMetadata)(bld.id, 'booking_rules').pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.map)(_ => _?.details), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_17__.catchError)(() => (0,rxjs__WEBPACK_IMPORTED_MODULE_18__.of)({}))).toPromise(), (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.querySettings)({
        parent_id: bld.id
      }).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_17__.catchError)(() => (0,rxjs__WEBPACK_IMPORTED_MODULE_18__.of)({
        data: {}
      })), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.map)(_ => {
        try {
          return js_yaml__WEBPACK_IMPORTED_MODULE_9__.load(_?.data.find(_ => _.encryption_level === _placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.EncryptionLevel.None) || {
            settings_string: ''
          });
        } catch {
          return {};
        }
      })).toPromise()]);
      _this7._building_settings[bld.id] = {
        ...(driver_settings || {}),
        ...(settings || {})
      };
      bld.bindings = bindings;
      bld.booking_rules = booking_rules;
      _this7._loaded_data[bld.id] = true;
      _this7._updateSettingOverrides();
    })();
  }
  /**
   * Load levels data for the buildings
   */
  loadLevels() {
    var _this8 = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      const level_list = yield (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.queryZones)({
        tags: 'level',
        limit: 2500
      }).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.map)(i => i.data)).toPromise();
      if (!level_list?.length) {
        _this8._router.navigate(['/misconfigured']);
      }
      let levels = level_list.map(lvl => new _level_class__WEBPACK_IMPORTED_MODULE_5__.BuildingLevel(lvl));
      levels = levels.sort((a, b) => (a.name || '').localeCompare(b.name || ''));
      _this8._levels.next(levels);
    })();
  }
  get available_room_configs() {
    return this.buildings.map(m => [...m.room_configurations]).reduce((prev, curr) => prev.concat(curr), []).sort((a, b) => a.name.localeCompare(b.name));
  }
  loadSettings() {
    var _this9 = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      if (!_this9._organisation) return;
      const app_settings = (yield (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.showMetadata)(_this9._organisation?.id, _this9.app_key).toPromise())?.details;
      const global_settings = (yield (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.showMetadata)(_this9._organisation?.id, 'settings').toPromise())?.details;
      _this9._settings = [global_settings, app_settings];
      _this9._service.overrides = [..._this9._settings];
      yield _this9._initialiseActiveBuilding();
      _this9._updateSettingOverrides();
    })();
  }
  /** Save building selection */
  saveBuilding(id) {
    const region_id = this._buildings.getValue().find(bld => bld.id === id)?.parent_id;
    if (region_id && region_id !== this._organisation.id) {
      sessionStorage.setItem(`PLACEOS.region`, region_id);
    }
    sessionStorage.setItem(`PLACEOS.building`, id);
  }
  _initialiseActiveBuilding() {
    return new Promise(resolve => {
      const id = sessionStorage.getItem(`PLACEOS.building`);
      if (id && this.buildings.find(bld => bld.id === id)) {
        this.building = this.buildings.find(bld => bld.id === id);
        return resolve();
      }
      const use_location = !!this._service.get('app.use_geolocation');
      if (use_location && 'geolocation' in navigator) {
        navigator.geolocation.getCurrentPosition(position => {
          const {
            latitude,
            longitude
          } = position.coords;
          let closest_bld = null;
          for (const bld of this.buildings) {
            if (!bld.location || bld.location === '0,0') continue;
            if (!closest_bld) closest_bld = bld;else {
              const [c_lat, c_long] = (closest_bld.location || '0,0').split(',');
              const [b_lat, b_long] = (bld.location || '0,0').split(',');
              const b_dist = Math.sqrt(Math.pow(latitude - +b_lat, 2) + Math.pow(longitude - +b_long, 2));
              const c_dist = Math.sqrt(Math.pow(latitude - +c_lat, 2) + Math.pow(longitude - +c_long, 2));
              if (b_dist < c_dist) closest_bld = bld;
            }
          }
          if (closest_bld) this.building = closest_bld;
          if (!this.building?.id) this._setDefaultBuilding();
          resolve();
        }, () => {
          if (!this.building?.id) this._setDefaultBuilding();
          resolve();
        });
      } else if (!this.building?.id) {
        this._setDefaultBuilding();
        resolve();
      }
    });
  }
  _setDefaultBuilding() {
    var _this10 = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      if (!_this10.buildings.length) return;
      const region_id = sessionStorage.getItem(`PLACEOS.region`);
      yield region_id ? _this10.setRegion(_this10._regions.getValue().find(_ => _.id === region_id)) : _this10._setRegionFromTimezone();
      _this10._setBuildingFromTimezone();
      if (_this10.building) return;
      const bld_id = _this10._service.get('app.default_building');
      if (bld_id) {
        _this10.building = _this10.buildings.find(({
          id
        }) => id === bld_id);
      }
      if (!_this10.building) _this10.building = _this10.buildings[0];
    })();
  }
  _setRegionFromTimezone() {
    var _this11 = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      const region_list = _this11.regions;
      const timezone = _this11.timezone;
      for (const region of region_list) {
        if (region.timezone === timezone) {
          return yield _this11.setRegion(region);
        }
      }
      const tz_start = timezone.split('/')[0];
      for (const region of region_list) {
        if (region.timezone.startsWith(tz_start)) {
          return yield _this11.setRegion(region);
        }
      }
    })();
  }
  _setBuildingFromTimezone() {
    const bld_list = this.buildings.filter(bld => !this.region || bld.parent_id === this.region?.id);
    const timezone = this.timezone;
    for (const bld of bld_list) {
      if (bld.timezone === timezone) {
        this.building = bld;
        return;
      }
    }
    const tz_start = timezone.split('/')[0];
    for (const bld of bld_list) {
      if (bld.timezone.startsWith(tz_start)) {
        this.building = bld;
        return;
      }
    }
  }
  _updateSettingOverrides() {
    setTimeout(() => this._service.overrides = [this.buildingSettings(this.building?.id), this.regionSettings(this.region?.id), ...this._settings], 300);
  }
  static #_ = this.ɵfac = function OrganisationService_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || OrganisationService)(_angular_core__WEBPACK_IMPORTED_MODULE_19__["ɵɵinject"](libs_common_src_lib_settings_service__WEBPACK_IMPORTED_MODULE_3__.SettingsService), _angular_core__WEBPACK_IMPORTED_MODULE_19__["ɵɵinject"](_angular_router__WEBPACK_IMPORTED_MODULE_20__.Router));
  };
  static #_2 = this.ɵprov = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_19__["ɵɵdefineInjectable"]({
    token: OrganisationService,
    factory: OrganisationService.ɵfac,
    providedIn: 'root'
  });
}

/***/ }),

/***/ 58772:
/*!*************************************************************!*\
  !*** ./libs/organisation/src/lib/organisation.utilities.ts ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   generateMockOrganisation: () => (/* binding */ generateMockOrganisation),
/* harmony export */   moduleFromMetadata: () => (/* binding */ moduleFromMetadata)
/* harmony export */ });
/* harmony import */ var _placeos_ts_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/ts-client */ 35713);
/* harmony import */ var _building_utilities__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./building.utilities */ 41274);


let ORG_COUNT = 0;
function generateMockOrganisation() {
  return {
    id: `zone_org-${ORG_COUNT++}`,
    name: `Organisation ${ORG_COUNT}`,
    buildings: Array(3).fill(0).map(i => (0,_building_utilities__WEBPACK_IMPORTED_MODULE_1__.generateMockBuilding)()),
    settings: {
      test: {
        nested: {
          org: true
        }
      }
    }
  };
}
function moduleFromMetadata(value, default_module) {
  if (!value) return null;
  return value instanceof Object ? (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_0__.getModule)(value.system_id, value.module || default_module) : (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_0__.getModule)(value, default_module);
}

/***/ }),

/***/ 13466:
/*!***************************************************!*\
  !*** ./libs/organisation/src/lib/region.class.ts ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Region: () => (/* binding */ Region)
/* harmony export */ });
class Region {
  constructor(_data) {
    this.id = _data.id || '';
    this.name = _data.name || '';
    this.display_name = _data.display_name || '';
    this.timezone = _data.timezone || '';
    this.images = _data.images || [];
    this.bindings = _data.bindings || {};
    this.address = _data.address || '';
  }
}

/***/ }),

/***/ 99831:
/*!************************************!*\
  !*** ./libs/payments/src/index.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CardInputFieldComponent: () => (/* reexport safe */ _lib_card_input_field_component__WEBPACK_IMPORTED_MODULE_2__.CardInputFieldComponent),
/* harmony export */   PaymentsModule: () => (/* reexport safe */ _lib_payments_module__WEBPACK_IMPORTED_MODULE_0__.PaymentsModule),
/* harmony export */   PaymentsService: () => (/* reexport safe */ _lib_payments_service__WEBPACK_IMPORTED_MODULE_1__.PaymentsService),
/* harmony export */   STRIPE_ID_TOKEN: () => (/* reexport safe */ _lib_payments_service__WEBPACK_IMPORTED_MODULE_1__.STRIPE_ID_TOKEN)
/* harmony export */ });
/* harmony import */ var _lib_payments_module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./lib/payments.module */ 32460);
/* harmony import */ var _lib_payments_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./lib/payments.service */ 34525);
/* harmony import */ var _lib_card_input_field_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./lib/card-input-field.component */ 49900);




/***/ }),

/***/ 49900:
/*!*************************************************************!*\
  !*** ./libs/payments/src/lib/card-input-field.component.ts ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CardInputFieldComponent: () => (/* binding */ CardInputFieldComponent)
/* harmony export */ });
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/forms */ 34456);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! date-fns */ 57961);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! date-fns */ 34938);
/* harmony import */ var _angular_material_form_field__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @angular/material/form-field */ 24950);
/* harmony import */ var _angular_material_input__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @angular/material/input */ 95541);
/* harmony import */ var _angular_material_select__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @angular/material/select */ 25175);
/* harmony import */ var _angular_material_core__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @angular/material/core */ 74646);












const _c0 = ["input"];
function CardInputFieldComponent_img_9_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](0, "img", 27);
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("src", "assets/icons/" + ctx_r1.card_type + ".svg", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵsanitizeUrl"]);
  }
}
function CardInputFieldComponent_mat_option_23_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "mat-option", 28);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const item_r3 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("value", item_r3[0]);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate2"](" ", item_r3[1], " (", item_r3[0], ") ");
  }
}
function CardInputFieldComponent_mat_option_31_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "mat-option", 28);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const item_r4 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("value", item_r4);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate"](item_r4);
  }
}
const BLANK_CARD = {
  card_number: '                ',
  cardholder: '',
  cvv: ''
};
const DATE_PIPE = new _angular_common__WEBPACK_IMPORTED_MODULE_2__.DatePipe('en-us', '');
class CardInputFieldComponent extends _placeos_common__WEBPACK_IMPORTED_MODULE_0__.AsyncHandler {
  constructor() {
    super(...arguments);
    this.details = new _angular_forms__WEBPACK_IMPORTED_MODULE_3__.FormGroup({
      card_number: new _angular_forms__WEBPACK_IMPORTED_MODULE_3__.FormControl(Array(16).fill('X').join()),
      cardholder: new _angular_forms__WEBPACK_IMPORTED_MODULE_3__.FormControl(''),
      exp_month: new _angular_forms__WEBPACK_IMPORTED_MODULE_3__.FormControl(''),
      exp_year: new _angular_forms__WEBPACK_IMPORTED_MODULE_3__.FormControl(''),
      cvv: new _angular_forms__WEBPACK_IMPORTED_MODULE_3__.FormControl('', [_angular_forms__WEBPACK_IMPORTED_MODULE_3__.Validators.minLength(3), _angular_forms__WEBPACK_IMPORTED_MODULE_3__.Validators.maxLength(4)])
    });
    this.disabled = false;
    this.months = Array(12).fill(0).map((_, idx) => [DATE_PIPE.transform((0,date_fns__WEBPACK_IMPORTED_MODULE_4__.setMonth)(Date.now(), idx), 'MM'), DATE_PIPE.transform((0,date_fns__WEBPACK_IMPORTED_MODULE_4__.setMonth)(Date.now(), idx), 'MMM')]);
    this.years = Array(12).fill(0).map((_, idx) => DATE_PIPE.transform((0,date_fns__WEBPACK_IMPORTED_MODULE_5__.addYears)(Date.now(), idx), 'yyyy'));
    this.digits = Array(16).fill(0);
    this._index = 0;
    this.registerOnChange = fn => this._onChange = fn;
    this.registerOnTouched = fn => this._onTouch = fn;
    this.setDisabledState = s => this.disabled = s;
  }
  get is_amex() {
    const no = this.details.value?.card_number || '';
    return no.startsWith('3');
  }
  get card_type() {
    const no = this.details.value?.card_number || '';
    if (no.startsWith('3')) return 'amex';
    if (no.startsWith('4')) return 'visa';
    if (no.startsWith('5')) return 'mastercard';
    return '';
  }
  get card_display() {
    let no = this.details.value?.card_number || '';
    if (this.card_focused) no = no.substring(0, this._index) + '⯐' + no.substring(this._index + 1);
    return this.is_amex ? `${no.substring(0, 4)}-${no.substring(4, 10)}-${no.substring(10)}` : `${no.substring(0, 4)}-${no.substring(4, 8)}-${no.substring(8, 12)}-${no.substring(12)}`;
  }
  get card_focused() {
    return document.activeElement === this._input_el.nativeElement || document.activeElement === this._input_el.nativeElement.parentElement;
  }
  ngOnInit() {
    this.subscription('changes', this.details.valueChanges.subscribe(v => this.timeout('update', () => this.setValue(this.details.getRawValue()))));
  }
  focusInput() {
    this._input_el.nativeElement.focus();
    this._index = this._input_el.nativeElement.selectionStart || 0;
  }
  onInput(event) {
    if (!event || !this.card_focused) return;
    const idx = this._index;
    if (idx < 0 || idx > 16) return;
    let card_number = this.details.value.card_number;
    if ((event.code.startsWith('Digit') || event.code.startsWith('Numpad')) && idx < (this.is_amex ? 15 : 16)) {
      card_number = card_number.substring(0, idx) + event.key + card_number.substring(idx + 1);
      this.details.patchValue({
        card_number
      });
      this._focusChange(idx, 1);
    } else if (event.code === 'Backspace' && idx > 0) {
      let card_number = this.details.value.card_number;
      card_number = card_number.substring(0, idx) + ' ' + card_number.substring(idx + 1);
      this.details.patchValue({
        card_number
      });
      this._focusChange(idx, -1);
    } else if (event.code === 'ArrowLeft') {
      this._focusChange(idx, -1);
    } else if (event.code === 'ArrowRight' && card_number[idx] !== ' ') {
      this._focusChange(idx, 1);
    }
  }
  _focusChange(idx, dir) {
    this._index = Math.min(16, Math.max(0, idx + dir));
  }
  /**
   * Update the form field value
   * @param new_value New value to set on the form field
   */
  setValue(new_value) {
    if (this._onChange) this._onChange(new_value);
  }
  /**
   * Update local value when form control value is changed
   * @param value The new value for the component
   */
  writeValue(value) {
    this.details.patchValue(value || BLANK_CARD);
  }
  static #_ = this.ɵfac = /*@__PURE__*/(() => {
    let ɵCardInputFieldComponent_BaseFactory;
    return function CardInputFieldComponent_Factory(__ngFactoryType__) {
      return (ɵCardInputFieldComponent_BaseFactory || (ɵCardInputFieldComponent_BaseFactory = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵgetInheritedFactory"](CardInputFieldComponent)))(__ngFactoryType__ || CardInputFieldComponent);
    };
  })();
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdefineComponent"]({
    type: CardInputFieldComponent,
    selectors: [["card-input-field"]],
    viewQuery: function CardInputFieldComponent_Query(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵviewQuery"](_c0, 7);
      }
      if (rf & 2) {
        let _t;
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵloadQuery"]()) && (ctx._input_el = _t.first);
      }
    },
    features: [_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵProvidersFeature"]([{
      provide: _angular_forms__WEBPACK_IMPORTED_MODULE_3__.NG_VALUE_ACCESSOR,
      /* istanbul ignore next */
      useExisting: (0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.forwardRef)(() => CardInputFieldComponent),
      multi: true
    }]), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵInheritDefinitionFeature"]],
    decls: 41,
    vars: 6,
    consts: () => {
      let i18n_0;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_1085309836704157602$$LIBS_PAYMENTS_SRC_LIB_CARD_INPUT_FIELD_COMPONENT_TS_0 = goog.getMsg("Card Number");
        i18n_0 = MSG_EXTERNAL_1085309836704157602$$LIBS_PAYMENTS_SRC_LIB_CARD_INPUT_FIELD_COMPONENT_TS_0;
      } else {
        i18n_0 = $localize`:␟c51ae86488666fc691751bf76d88811b37505c00␟1085309836704157602:Card Number`;
      }
      let i18n_1;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_4148395957159016439$$LIBS_PAYMENTS_SRC_LIB_CARD_INPUT_FIELD_COMPONENT_TS_1 = goog.getMsg("Name on Card");
        i18n_1 = MSG_EXTERNAL_4148395957159016439$$LIBS_PAYMENTS_SRC_LIB_CARD_INPUT_FIELD_COMPONENT_TS_1;
      } else {
        i18n_1 = $localize`:␟cc927e92ada1f250e8c5ea7884d0b1294be56635␟4148395957159016439:Name on Card`;
      }
      let i18n_2;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_598947732489453783$$LIBS_PAYMENTS_SRC_LIB_CARD_INPUT_FIELD_COMPONENT_TS_2 = goog.getMsg("Cardholder name is required");
        i18n_2 = MSG_EXTERNAL_598947732489453783$$LIBS_PAYMENTS_SRC_LIB_CARD_INPUT_FIELD_COMPONENT_TS_2;
      } else {
        i18n_2 = $localize`:␟6402e768a1ac6a5f86edf0daccf05b3d9d63f465␟598947732489453783:Cardholder name is required`;
      }
      let i18n_3;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_7043163776563263056$$LIBS_PAYMENTS_SRC_LIB_CARD_INPUT_FIELD_COMPONENT_TS_3 = goog.getMsg("Expiry Month");
        i18n_3 = MSG_EXTERNAL_7043163776563263056$$LIBS_PAYMENTS_SRC_LIB_CARD_INPUT_FIELD_COMPONENT_TS_3;
      } else {
        i18n_3 = $localize`:␟48b5a0234304bd29aeaab8f2793b8245517a7102␟7043163776563263056:Expiry Month`;
      }
      let i18n_4;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_1539914853150581191$$LIBS_PAYMENTS_SRC_LIB_CARD_INPUT_FIELD_COMPONENT_TS_4 = goog.getMsg("Expiry month is required");
        i18n_4 = MSG_EXTERNAL_1539914853150581191$$LIBS_PAYMENTS_SRC_LIB_CARD_INPUT_FIELD_COMPONENT_TS_4;
      } else {
        i18n_4 = $localize`:␟28b0c8359cc099ef3dcaddac4c1357d45751ac9d␟1539914853150581191:Expiry month is required`;
      }
      let i18n_5;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_6698859483517525075$$LIBS_PAYMENTS_SRC_LIB_CARD_INPUT_FIELD_COMPONENT_TS_5 = goog.getMsg("Expiry year is required");
        i18n_5 = MSG_EXTERNAL_6698859483517525075$$LIBS_PAYMENTS_SRC_LIB_CARD_INPUT_FIELD_COMPONENT_TS_5;
      } else {
        i18n_5 = $localize`:␟84a41ff903da0de49f3172fef0d0528701065d6e␟6698859483517525075:Expiry year is required`;
      }
      let i18n_6;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_203544573091191988$$LIBS_PAYMENTS_SRC_LIB_CARD_INPUT_FIELD_COMPONENT_TS_6 = goog.getMsg("Invalid security code");
        i18n_6 = MSG_EXTERNAL_203544573091191988$$LIBS_PAYMENTS_SRC_LIB_CARD_INPUT_FIELD_COMPONENT_TS_6;
      } else {
        i18n_6 = $localize`:␟11a0ab2762b4af425c3d20aa211a751e4785e04e␟203544573091191988:Invalid security code`;
      }
      return [["input", ""], i18n_0, i18n_1, i18n_2, i18n_3, i18n_4, i18n_5, i18n_6, [3, "keyup", "formGroup"], [1, "flex", "flex-col"], ["for", "card-number"], ["tabindex", "0", 1, "border", "border-base-200", "p-2", "h-12", "mb-4", "focus-within:shadow", "focus-within:border-base-200", "flex", "items-center", "font-mono", "w-full", "rounded", "relative", 3, "focus"], [1, "flex-1"], ["type", "tel", "maxlength", "17", 1, "hidden", "absolute", 3, "keydown", "value"], ["class", "h-8", 3, "src", 4, "ngIf"], [1, "flex", "flex-col", "flex-1"], ["for", "cardholder"], ["appearance", "outline"], ["name", "cardholder", "matInput", "", "placeholder", "Mr John Smith", "formControlName", "cardholder"], [1, "flex", "items-center", "space-x-2"], [1, "flex", "flex-col", "flex-1", "w-1/4"], ["placeholder", "MM", "formControlName", "exp_month"], [3, "value", 4, "ngFor", "ngForOf"], ["placeholder", "YYYY", "formControlName", "exp_year"], ["for", "cvv"], ["appearance", "outline", 1, "w-20"], ["name", "cvv", "matInput", "", "formControlName", "cvv", "maxlength", "4"], [1, "h-8", 3, "src"], [3, "value"]];
    },
    template: function CardInputFieldComponent_Template(rf, ctx) {
      if (rf & 1) {
        const _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵgetCurrentView"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "form", 8);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("keyup", function CardInputFieldComponent_Template_form_keyup_0_listener($event) {
          _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r1);
          return _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵresetView"](ctx.onInput($event));
        }, false, _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵresolveWindow"]);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](1, "div", 9)(2, "label", 10);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵi18n"](3, 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](4, "div", 11);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("focus", function CardInputFieldComponent_Template_div_focus_4_listener() {
          _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r1);
          return _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵresetView"](ctx.focusInput());
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](5, "pre", 12);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](6);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](7, "input", 13, 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵlistener"]("keydown", function CardInputFieldComponent_Template_input_keydown_7_listener() {
          _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵrestoreView"](_r1);
          return _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵresetView"](false);
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](9, CardInputFieldComponent_img_9_Template, 1, 1, "img", 14);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](10, "div", 15)(11, "label", 16);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵi18n"](12, 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](13, "mat-form-field", 17);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](14, "input", 18);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](15, "mat-error");
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵi18n"](16, 3);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]()()();
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](17, "div", 19)(18, "div", 20)(19, "label", 16);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵi18n"](20, 4);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](21, "mat-form-field", 17)(22, "mat-select", 21);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](23, CardInputFieldComponent_mat_option_23_Template, 2, 3, "mat-option", 22);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](24, "mat-error");
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵi18n"](25, 5);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]()()();
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](26, "div", 20)(27, "label", 16);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](28, "Expiry Year");
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](29, "mat-form-field", 17)(30, "mat-select", 23);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](31, CardInputFieldComponent_mat_option_31_Template, 2, 2, "mat-option", 22);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](32, "mat-error");
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵi18n"](33, 6);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]()()();
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](34, "div", 9)(35, "label", 24);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](36, "CVV");
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](37, "mat-form-field", 25);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelement"](38, "input", 26);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](39, "mat-error");
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵi18n"](40, 7);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]()()()()();
      }
      if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("formGroup", ctx.details);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](6);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate"](ctx.card_display);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("value", ctx.details.value.card_number == null ? null : ctx.details.value.card_number.trim());
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngIf", ctx.card_type);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](14);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngForOf", ctx.months);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](8);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngForOf", ctx.years);
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_2__.NgForOf, _angular_common__WEBPACK_IMPORTED_MODULE_2__.NgIf, _angular_forms__WEBPACK_IMPORTED_MODULE_3__["ɵNgNoValidate"], _angular_forms__WEBPACK_IMPORTED_MODULE_3__.DefaultValueAccessor, _angular_forms__WEBPACK_IMPORTED_MODULE_3__.NgControlStatus, _angular_forms__WEBPACK_IMPORTED_MODULE_3__.NgControlStatusGroup, _angular_forms__WEBPACK_IMPORTED_MODULE_3__.MaxLengthValidator, _angular_forms__WEBPACK_IMPORTED_MODULE_3__.FormGroupDirective, _angular_forms__WEBPACK_IMPORTED_MODULE_3__.FormControlName, _angular_material_form_field__WEBPACK_IMPORTED_MODULE_6__.MatFormField, _angular_material_form_field__WEBPACK_IMPORTED_MODULE_6__.MatError, _angular_material_input__WEBPACK_IMPORTED_MODULE_7__.MatInput, _angular_material_select__WEBPACK_IMPORTED_MODULE_8__.MatSelect, _angular_material_core__WEBPACK_IMPORTED_MODULE_9__.MatOption],
    styles: ["mat-form-field[_ngcontent-%COMP%] {\n                height: 3.25rem;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNhcmQtaW5wdXQtZmllbGQuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxlQUFlO1lBQ25CIiwiZmlsZSI6ImNhcmQtaW5wdXQtZmllbGQuY29tcG9uZW50LnRzIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICBtYXQtZm9ybS1maWVsZCB7XG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAzLjI1cmVtO1xuICAgICAgICAgICAgfVxuICAgICAgICAiXX0= */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvcGF5bWVudHMvc3JjL2xpYi9jYXJkLWlucHV0LWZpZWxkLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1lBQ1k7Z0JBQ0ksZUFBZTtZQUNuQjs7QUFFWix3WUFBd1kiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIG1hdC1mb3JtLWZpZWxkIHtcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDMuMjVyZW07XG4gICAgICAgICAgICB9XG4gICAgICAgICJdLCJzb3VyY2VSb290IjoiIn0= */"]
  });
}

/***/ }),

/***/ 85272:
/*!**********************************************************!*\
  !*** ./libs/payments/src/lib/payment-modal.component.ts ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   PaymentModalComponent: () => (/* binding */ PaymentModalComponent)
/* harmony export */ });
/* harmony import */ var _home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 89204);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_material_dialog__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/material/dialog */ 12587);
/* harmony import */ var libs_organisation_src_lib_organisation_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! libs/organisation/src/lib/organisation.service */ 19863);






function PaymentModalComponent_div_0_ng_container_1_ng_container_8_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵi18nStart"](0, 3, 1);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementContainer"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipe"](2, "date");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipe"](3, "date");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵi18nEnd"]();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵi18nExp"](_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipeBind2"](2, 2, ctx_r1.details.date, "shortTime"))(_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipeBind2"](3, 5, ctx_r1.details.date + ctx_r1.details.duration * 60 * 1000, "shortTime"));
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵi18nApply"](0);
  }
}
function PaymentModalComponent_div_0_ng_container_1_Template(rf, ctx) {
  if (rf & 1) {
    const _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](1, "main", 14)(2, "h2", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵi18n"](3, 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelement"](4, "img", 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](5, "p", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵi18nStart"](6, 3);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipe"](7, "date");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](8, PaymentModalComponent_div_0_ng_container_1_ng_container_8_Template, 4, 8, "ng-container", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵi18nEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](9, "p", 19);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵi18n"](10, 4);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](11, "p", 20)(12, "strong");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](13);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipe"](14, "currency");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](15, "card-input-field", 21);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtwoWayListener"]("ngModelChange", function PaymentModalComponent_div_0_ng_container_1_Template_card_input_field_ngModelChange_15_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵrestoreView"](_r1);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"](2);
      _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtwoWayBindingSet"](ctx_r1.card_details, $event) || (ctx_r1.card_details = $event);
      return _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵresetView"]($event);
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](16, "footer", 22)(17, "button", 23);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵlistener"]("click", function PaymentModalComponent_div_0_ng_container_1_Template_button_click_17_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵrestoreView"](_r1);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"](2);
      return _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵresetView"](ctx_r1.processPayment());
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵi18n"](18, 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](19, "button", 24)(20, "i", 25);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](21, "close");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementContainerEnd"]();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](8);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngIf", !ctx_r1.details.all_day);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵi18nExp"](ctx_r1.details.type)(ctx_r1.details.resource_name)(_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipeBind2"](7, 6, ctx_r1.details.date, "mediumDate"));
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵi18nApply"](6);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtextInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipeBind2"](14, 9, ctx_r1.details.amount / 100, ctx_r1.code));
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtwoWayProperty"]("ngModel", ctx_r1.card_details);
  }
}
function PaymentModalComponent_div_0_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](0, "div", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](1, PaymentModalComponent_div_0_ng_container_1_Template, 22, 12, "ng-container", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"]();
    const success_state_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵreference"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngIf", !ctx_r1.success)("ngIfElse", success_state_r3);
  }
}
function PaymentModalComponent_ng_template_2_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](0, "div", 26);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelement"](1, "mat-spinner", 27);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](2, "p");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipe"](4, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtextInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipeBind1"](4, 1, ctx_r1.loading));
  }
}
function PaymentModalComponent_ng_template_4_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](0, "main", 28)(1, "h2", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵi18n"](2, 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](3, "h3", 29);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](5, "p");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵi18n"](6, 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipe"](7, "currency");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](8, "p");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵi18n"](9, 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](10, "p");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](11);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipe"](12, "date");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](13, "p");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵi18n"](14, 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipe"](15, "date");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipe"](16, "date");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelement"](17, "img", 30);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](18, "footer", 31)(19, "button", 32);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵi18n"](20, 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtextInterpolate1"](" Ref #", ctx_r1.transaction_id, " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵi18nExp"](_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipeBind2"](7, 6, ctx_r1.details.amount / 100, ctx_r1.code));
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵi18nApply"](6);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵi18nExp"](ctx_r1.details.resource_name);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵi18nApply"](9);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtextInterpolate"](_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipeBind2"](12, 9, ctx_r1.details.date, "mediumDate"));
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵi18nExp"](_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipeBind2"](15, 12, ctx_r1.details.date, "shortTime"))(_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipeBind2"](16, 15, ctx_r1.details.date + ctx_r1.details.duration * 60 * 1000, "shortTime"));
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵi18nApply"](14);
  }
}
class PaymentModalComponent {
  get code() {
    return this._org.currency_code;
  }
  constructor(_data, _org) {
    this._data = _data;
    this._org = _org;
    this.event = new _angular_core__WEBPACK_IMPORTED_MODULE_2__.EventEmitter();
    this.details = this._data;
    this.loading = this._data.loading;
    this.success = false;
    this.transaction_id = '12345678';
  }
  processPayment() {
    var _this = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      if (!_this.card_details || !_this._validCardDetails()) return;
      _this.event.emit(_this.card_details);
      yield _this._data.makePayment(_this.card_details);
      _this.success = true;
    })();
  }
  _validCardDetails() {
    return (this.card_details?.cardholder.length || 0) > 0 && (this.card_details?.cvv.length || 0) >= 3;
  }
  static #_ = this.ɵfac = function PaymentModalComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || PaymentModalComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdirectiveInject"](_angular_material_dialog__WEBPACK_IMPORTED_MODULE_3__.MAT_DIALOG_DATA), _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdirectiveInject"](libs_organisation_src_lib_organisation_service__WEBPACK_IMPORTED_MODULE_1__.OrganisationService));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdefineComponent"]({
    type: PaymentModalComponent,
    selectors: [["payment-modal"]],
    outputs: {
      event: "event"
    },
    decls: 6,
    vars: 4,
    consts: () => {
      let i18n_0;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_7177958266181561076$$LIBS_PAYMENTS_SRC_LIB_PAYMENT_MODAL_COMPONENT_TS_0 = goog.getMsg("Booking Payment");
        i18n_0 = MSG_EXTERNAL_7177958266181561076$$LIBS_PAYMENTS_SRC_LIB_PAYMENT_MODAL_COMPONENT_TS_0;
      } else {
        i18n_0 = $localize`:␟4d64c520c43eead598939b50c326e665c6e88fa4␟7177958266181561076:Booking Payment`;
      }
      let i18n_1;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_6612380128469929872$$LIBS_PAYMENTS_SRC_LIB_PAYMENT_MODAL_COMPONENT_TS_1 = goog.getMsg(" You are requesting a {$interpolation} booking in {$interpolation_1} for {$interpolation_2} {$startTagNgContainer} between {$interpolation_3} and {$interpolation_4} {$closeTagNgContainer}", {
          "closeTagNgContainer": "\uFFFD/#1:1\uFFFD\uFFFD/*8:1\uFFFD",
          "interpolation": "\uFFFD0\uFFFD",
          "interpolation_1": "\uFFFD1\uFFFD",
          "interpolation_2": "\uFFFD2\uFFFD",
          "interpolation_3": "\uFFFD0:1\uFFFD",
          "interpolation_4": "\uFFFD1:1\uFFFD",
          "startTagNgContainer": "\uFFFD*8:1\uFFFD\uFFFD#1:1\uFFFD"
        }, {
          original_code: {
            "closeTagNgContainer": "</ng-container>",
            "interpolation": "{{ details.type }}",
            "interpolation_1": "{{ details.resource_name }}",
            "interpolation_2": "{{ details.date | date: 'mediumDate' }}",
            "interpolation_3": "{{ details.date | date: 'shortTime' }}",
            "interpolation_4": "{{\n                                details.date + details.duration * 60 * 1000\n                                    | date: 'shortTime'\n                            }}",
            "startTagNgContainer": "<ng-container *ngIf=\"!details.all_day\">"
          }
        });
        i18n_1 = MSG_EXTERNAL_6612380128469929872$$LIBS_PAYMENTS_SRC_LIB_PAYMENT_MODAL_COMPONENT_TS_1;
      } else {
        i18n_1 = $localize`:␟00a4b4852357812c8f53bb8e5c7598d479bea113␟6612380128469929872: You are requesting a ${"\uFFFD0\uFFFD"}:INTERPOLATION: booking in ${"\uFFFD1\uFFFD"}:INTERPOLATION_1: for ${"\uFFFD2\uFFFD"}:INTERPOLATION_2: ${"\uFFFD*8:1\uFFFD\uFFFD#1:1\uFFFD"}:START_TAG_NG_CONTAINER: between ${"\uFFFD0:1\uFFFD"}:INTERPOLATION_3: and ${"\uFFFD1:1\uFFFD"}:INTERPOLATION_4: ${"\uFFFD/#1:1\uFFFD\uFFFD/*8:1\uFFFD"}:CLOSE_TAG_NG_CONTAINER:`;
      }
      let i18n_2;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_2305336913310307878$$LIBS_PAYMENTS_SRC_LIB_PAYMENT_MODAL_COMPONENT_TS_2 = goog.getMsg("You booking will cost:");
        i18n_2 = MSG_EXTERNAL_2305336913310307878$$LIBS_PAYMENTS_SRC_LIB_PAYMENT_MODAL_COMPONENT_TS_2;
      } else {
        i18n_2 = $localize`:␟7a9510cbfdcb53b8dcac3f0bd7958196958333ff␟2305336913310307878:You booking will cost:`;
      }
      let i18n_3;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_8427617350792373644$$LIBS_PAYMENTS_SRC_LIB_PAYMENT_MODAL_COMPONENT_TS_3 = goog.getMsg(" Make Payment ");
        i18n_3 = MSG_EXTERNAL_8427617350792373644$$LIBS_PAYMENTS_SRC_LIB_PAYMENT_MODAL_COMPONENT_TS_3;
      } else {
        i18n_3 = $localize`:␟9069fc3477fe6107249755afedd9fe14140bb201␟8427617350792373644: Make Payment `;
      }
      let i18n_4;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_8206804611071524488$$LIBS_PAYMENTS_SRC_LIB_PAYMENT_MODAL_COMPONENT_TS_4 = goog.getMsg("Payment Successful");
        i18n_4 = MSG_EXTERNAL_8206804611071524488$$LIBS_PAYMENTS_SRC_LIB_PAYMENT_MODAL_COMPONENT_TS_4;
      } else {
        i18n_4 = $localize`:␟dbbd5277093a2dbc265472510779d835afc39f45␟8206804611071524488:Payment Successful`;
      }
      let i18n_5;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_2765198892596811562$$LIBS_PAYMENTS_SRC_LIB_PAYMENT_MODAL_COMPONENT_TS_5 = goog.getMsg("{$interpolation} paid.", {
          "interpolation": "\uFFFD0\uFFFD"
        }, {
          original_code: {
            "interpolation": "{{ details.amount / 100 | currency: code }}"
          }
        });
        i18n_5 = MSG_EXTERNAL_2765198892596811562$$LIBS_PAYMENTS_SRC_LIB_PAYMENT_MODAL_COMPONENT_TS_5;
      } else {
        i18n_5 = $localize`:␟bb02e353442d9b1ec8fc7d9875465cafb134f7e4␟2765198892596811562:${"\uFFFD0\uFFFD"}:INTERPOLATION: paid.`;
      }
      let i18n_6;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_6374111499070607459$$LIBS_PAYMENTS_SRC_LIB_PAYMENT_MODAL_COMPONENT_TS_6 = goog.getMsg("{$interpolation} booked.", {
          "interpolation": "\uFFFD0\uFFFD"
        }, {
          original_code: {
            "interpolation": "{{ details.resource_name }}"
          }
        });
        i18n_6 = MSG_EXTERNAL_6374111499070607459$$LIBS_PAYMENTS_SRC_LIB_PAYMENT_MODAL_COMPONENT_TS_6;
      } else {
        i18n_6 = $localize`:␟931d5e8e4e517671212210e9d716fa2721c9e67c␟6374111499070607459:${"\uFFFD0\uFFFD"}:INTERPOLATION: booked.`;
      }
      let i18n_7;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_783447026381975793$$LIBS_PAYMENTS_SRC_LIB_PAYMENT_MODAL_COMPONENT_TS_7 = goog.getMsg(" {$interpolation} and {$interpolation_1} ", {
          "interpolation": "\uFFFD0\uFFFD",
          "interpolation_1": "\uFFFD1\uFFFD"
        }, {
          original_code: {
            "interpolation": "{{ details.date | date: 'shortTime' }}",
            "interpolation_1": "{{\n                        details.date + details.duration * 60 * 1000\n                            | date: 'shortTime'\n                    }}"
          }
        });
        i18n_7 = MSG_EXTERNAL_783447026381975793$$LIBS_PAYMENTS_SRC_LIB_PAYMENT_MODAL_COMPONENT_TS_7;
      } else {
        i18n_7 = $localize`:␟e2ddd0e2db3568ac26e9f86a9e366f864a4e6e94␟783447026381975793: ${"\uFFFD0\uFFFD"}:INTERPOLATION: and ${"\uFFFD1\uFFFD"}:INTERPOLATION_1: `;
      }
      let i18n_8;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_8163835392610431386$$LIBS_PAYMENTS_SRC_LIB_PAYMENT_MODAL_COMPONENT_TS_8 = goog.getMsg(" Great, thanks. ");
        i18n_8 = MSG_EXTERNAL_8163835392610431386$$LIBS_PAYMENTS_SRC_LIB_PAYMENT_MODAL_COMPONENT_TS_8;
      } else {
        i18n_8 = $localize`:␟001127b263e7132960af8fa70cce4c2635980fbc␟8163835392610431386: Great, thanks. `;
      }
      return [["load_state", ""], ["success_state", ""], i18n_0, i18n_1, i18n_2, i18n_3, i18n_4, i18n_5, i18n_6, i18n_7, i18n_8, ["class", "relative max-h-[100vh] overflow-auto", 4, "ngIf", "ngIfElse"], [1, "relative", "max-h-[100vh]", "overflow-auto"], [4, "ngIf", "ngIfElse"], [1, "px-4", "pt-8", "w-[24rem]", "space-y-2", "flex", "flex-col", "items-center", "relative"], [1, "text-2xl", "font-medium"], ["src", "assets/icons/cost.svg", 1, "w-1/2"], [1, "text-sm", "text-center", "pb-2"], [4, "ngIf"], [1, "text-sm"], [1, "text-lg", "font-medium", "text-center"], [1, "w-full", 3, "ngModelChange", "ngModel"], [1, "p-4"], ["matRipple", "", 1, "w-full", 3, "click"], ["icon", "", "matRipple", "", "mat-dialog-close", "", 1, "absolute", "top-1", "left-1"], [1, "material-icons", "text-2xl"], [1, "w-full", "h-full", "flex", "flex-col", "items-center", "justify-center", "p-8"], ["diameter", "32"], [1, "px-8", "pt-8", "w-[24rem]", "flex", "flex-col", "relative"], [1, "text-xl", "font-medium", "mb-2"], ["src", "assets/icons/payment-confirmed.svg", 1, "w-full"], [1, "p-4", "border-t", "border-base-200"], ["btn", "", "matRipple", "", "mat-dialog-close", "", 1, "w-full"]];
    },
    template: function PaymentModalComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](0, PaymentModalComponent_div_0_Template, 2, 2, "div", 11);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipe"](1, "async");
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](2, PaymentModalComponent_ng_template_2_Template, 5, 3, "ng-template", null, 0, _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplateRefExtractor"])(4, PaymentModalComponent_ng_template_4_Template, 21, 18, "ng-template", null, 1, _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplateRefExtractor"]);
      }
      if (rf & 2) {
        const load_state_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵreference"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngIf", !_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipeBind1"](1, 2, ctx.loading))("ngIfElse", load_state_r4);
      }
    }
  });
}

/***/ }),

/***/ 32460:
/*!**************************************************!*\
  !*** ./libs/payments/src/lib/payments.module.ts ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   PaymentsModule: () => (/* binding */ PaymentsModule)
/* harmony export */ });
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _angular_material_dialog__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @angular/material/dialog */ 12587);
/* harmony import */ var _angular_material_form_field__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/material/form-field */ 24950);
/* harmony import */ var _angular_material_input__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @angular/material/input */ 95541);
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/forms */ 34456);
/* harmony import */ var _angular_material_button__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @angular/material/button */ 84175);
/* harmony import */ var _angular_material_select__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @angular/material/select */ 25175);
/* harmony import */ var _angular_material_progress_spinner__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @angular/material/progress-spinner */ 41134);
/* harmony import */ var _payment_modal_component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./payment-modal.component */ 85272);
/* harmony import */ var _card_input_field_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./card-input-field.component */ 49900);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/core */ 37580);















const COMPONENTS = [_payment_modal_component__WEBPACK_IMPORTED_MODULE_0__.PaymentModalComponent, _card_input_field_component__WEBPACK_IMPORTED_MODULE_1__.CardInputFieldComponent];
class PaymentsModule {
  static #_ = this.ɵfac = function PaymentsModule_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || PaymentsModule)();
  };
  static #_2 = this.ɵmod = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdefineNgModule"]({
    type: PaymentsModule
  });
  static #_3 = this.ɵinj = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdefineInjector"]({
    imports: [_angular_common__WEBPACK_IMPORTED_MODULE_3__.CommonModule, _angular_forms__WEBPACK_IMPORTED_MODULE_4__.FormsModule, _angular_forms__WEBPACK_IMPORTED_MODULE_4__.ReactiveFormsModule, _angular_material_form_field__WEBPACK_IMPORTED_MODULE_5__.MatFormFieldModule, _angular_material_input__WEBPACK_IMPORTED_MODULE_6__.MatInputModule, _angular_material_dialog__WEBPACK_IMPORTED_MODULE_7__.MatDialogModule, _angular_material_button__WEBPACK_IMPORTED_MODULE_8__.MatButtonModule, _angular_material_select__WEBPACK_IMPORTED_MODULE_9__.MatSelectModule, _angular_material_progress_spinner__WEBPACK_IMPORTED_MODULE_10__.MatProgressSpinnerModule]
  });
}
(function () {
  (typeof ngJitMode === "undefined" || ngJitMode) && _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵsetNgModuleScope"](PaymentsModule, {
    declarations: [_payment_modal_component__WEBPACK_IMPORTED_MODULE_0__.PaymentModalComponent, _card_input_field_component__WEBPACK_IMPORTED_MODULE_1__.CardInputFieldComponent],
    imports: [_angular_common__WEBPACK_IMPORTED_MODULE_3__.CommonModule, _angular_forms__WEBPACK_IMPORTED_MODULE_4__.FormsModule, _angular_forms__WEBPACK_IMPORTED_MODULE_4__.ReactiveFormsModule, _angular_material_form_field__WEBPACK_IMPORTED_MODULE_5__.MatFormFieldModule, _angular_material_input__WEBPACK_IMPORTED_MODULE_6__.MatInputModule, _angular_material_dialog__WEBPACK_IMPORTED_MODULE_7__.MatDialogModule, _angular_material_button__WEBPACK_IMPORTED_MODULE_8__.MatButtonModule, _angular_material_select__WEBPACK_IMPORTED_MODULE_9__.MatSelectModule, _angular_material_progress_spinner__WEBPACK_IMPORTED_MODULE_10__.MatProgressSpinnerModule],
    exports: [_payment_modal_component__WEBPACK_IMPORTED_MODULE_0__.PaymentModalComponent, _card_input_field_component__WEBPACK_IMPORTED_MODULE_1__.CardInputFieldComponent]
  });
})();
_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵsetComponentScope"](_payment_modal_component__WEBPACK_IMPORTED_MODULE_0__.PaymentModalComponent, [_angular_common__WEBPACK_IMPORTED_MODULE_3__.NgIf, _angular_forms__WEBPACK_IMPORTED_MODULE_4__.NgControlStatus, _angular_forms__WEBPACK_IMPORTED_MODULE_4__.NgModel, _angular_material_dialog__WEBPACK_IMPORTED_MODULE_7__.MatDialogClose, _angular_material_progress_spinner__WEBPACK_IMPORTED_MODULE_10__.MatProgressSpinner, _card_input_field_component__WEBPACK_IMPORTED_MODULE_1__.CardInputFieldComponent], [_angular_common__WEBPACK_IMPORTED_MODULE_3__.AsyncPipe, _angular_common__WEBPACK_IMPORTED_MODULE_3__.CurrencyPipe, _angular_common__WEBPACK_IMPORTED_MODULE_3__.DatePipe]);

/***/ }),

/***/ 34525:
/*!***************************************************!*\
  !*** ./libs/payments/src/lib/payments.service.ts ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   PaymentsService: () => (/* binding */ PaymentsService),
/* harmony export */   STRIPE_ID_TOKEN: () => (/* binding */ STRIPE_ID_TOKEN)
/* harmony export */ });
/* harmony import */ var _home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 89204);
/* harmony import */ var _placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @placeos/ts-client */ 35713);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! rxjs */ 90521);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! rxjs */ 71536);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! rxjs/operators */ 71963);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! rxjs/operators */ 66000);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! rxjs/operators */ 7841);
/* harmony import */ var libs_common_src_lib_settings_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! libs/common/src/lib/settings.service */ 14233);
/* harmony import */ var libs_common_src_lib_user_state__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! libs/common/src/lib/user-state */ 37958);
/* harmony import */ var libs_organisation_src_lib_organisation_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! libs/organisation/src/lib/organisation.service */ 19863);
/* harmony import */ var _payment_modal_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./payment-modal.component */ 85272);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_material_dialog__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @angular/material/dialog */ 12587);













const STRIPE_ID_TOKEN = 'STRIPE+customer_id';
const STRIPE_MODULE = 'Payment';
class PaymentsService {
  get payment_module() {
    return this._org.binding('payments');
  }
  constructor(_org, _settings, _dialog) {
    this._org = _org;
    this._settings = _settings;
    this._dialog = _dialog;
    this._loading = new rxjs__WEBPACK_IMPORTED_MODULE_6__.BehaviorSubject('');
    this._active_card = new rxjs__WEBPACK_IMPORTED_MODULE_6__.BehaviorSubject('');
    this.loading = this._loading.asObservable();
    this.payment_sources = (0,rxjs__WEBPACK_IMPORTED_MODULE_7__.of)(1).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.switchMap)(() => {
      const mod = (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.getModule)(this.payment_module, STRIPE_MODULE);
      if (!mod) return (0,rxjs__WEBPACK_IMPORTED_MODULE_7__.of)([]);
      return mod.execute('list_payment_methods', ['card']);
    }), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.tap)(_ => _[0] ? this._active_card.next(_[0].id) : ''), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.shareReplay)(1));
  }
  makePayment(details) {
    var _this = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      if (!_this.payment_module) throw 'Payments not enabled';
      const [cost, period] = yield _this._getCostOfProduct(details?.type).catch(_ => [0, 60]);
      console.log('Cost:', cost, period);
      if (cost <= 0) return;
      let customer_id = _this._settings.get('STRIPE_Customer_ID');
      if (!customer_id) customer_id = yield _this._newCustomerID();
      _this._settings.saveUserSetting('STRIPE_Customer_ID', customer_id);
      const amount = cost * (details.duration / period);
      let result = undefined;
      const makePayment = /*#__PURE__*/function () {
        var _ref = (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* (c) {
          result = yield _this._processPayment(amount, customer_id, c).catch(e => {
            _this._loading.next('');
            throw e;
          });
        });
        return function makePayment(_x) {
          return _ref.apply(this, arguments);
        };
      }();
      const data = {
        ...details,
        rate: `$${(cost / 100).toFixed(2)} per hour`,
        amount,
        makePayment,
        loading: _this.loading
      };
      const ref = _this._dialog.open(_payment_modal_component__WEBPACK_IMPORTED_MODULE_5__.PaymentModalComponent, {
        data
      });
      yield ref.afterClosed().toPromise();
      return result;
    })();
  }
  _addPaymentMethod(card) {
    var _this2 = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      const mod = (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.getModule)(_this2.payment_module, STRIPE_MODULE);
      if (!mod) throw 'Unable to load module';
      const payment_method = yield mod.execute('add_payment_method', ['card', null, null, null, null, null, null, null, null, null, null, null, card]);
      return payment_method.id || payment_method;
    })();
  }
  _getCostOfProduct(type) {
    var _this3 = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      let price = [0, 60];
      const mod = (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.getModule)(_this3.payment_module, STRIPE_MODULE);
      if (!mod) return price;
      const product_list = yield mod.execute('get_product_prices', [null, null, type]);
      if (!product_list.length) return price;
      return product_list;
    })();
  }
  _processPayment(amount, customer_id, card_details) {
    var _this4 = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      _this4._loading.next('Checking payment method...');
      console.log('Getting payment method...');
      const source = card_details ? yield _this4._addPaymentMethod(card_details) : _this4._active_card.getValue();
      if (!source) throw 'No payment source selected';
      _this4._loading.next('Processing payment...');
      console.log('Processing payment...');
      const mod = (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.getModule)(_this4.payment_module, STRIPE_MODULE);
      if (!mod) throw 'Unable to load module';
      const id = yield mod.execute('create_payment_intent', [amount, _this4._org.building.currency || 'USD', null, null, customer_id, null, null, null, (0,libs_common_src_lib_user_state__WEBPACK_IMPORTED_MODULE_3__.currentUser)()?.email]);
      if (!id) throw 'Failed to create payment';
      console.log('Confirming payment...');
      yield mod.execute('confirm_payment_intent', [id, source]);
      _this4._loading.next('');
      return {
        success: true,
        state: 'approved',
        invoice_id: id,
        amount: amount,
        created_at: Date.now(),
        updated_at: Date.now()
      };
    })();
  }
  _newCustomerID() {
    var _this5 = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      const mod = (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.getModule)(_this5.payment_module, STRIPE_MODULE);
      if (!mod) throw 'Unable to load module';
      const user = (0,libs_common_src_lib_user_state__WEBPACK_IMPORTED_MODULE_3__.currentUser)();
      const id = yield mod.execute('create_customer', [0, null, null, null, `${user.id}|${user.name}|FromPlaceOS`, user.email]);
      return id;
    })();
  }
  static #_ = this.ɵfac = function PaymentsService_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || PaymentsService)(_angular_core__WEBPACK_IMPORTED_MODULE_11__["ɵɵinject"](libs_organisation_src_lib_organisation_service__WEBPACK_IMPORTED_MODULE_4__.OrganisationService), _angular_core__WEBPACK_IMPORTED_MODULE_11__["ɵɵinject"](libs_common_src_lib_settings_service__WEBPACK_IMPORTED_MODULE_2__.SettingsService), _angular_core__WEBPACK_IMPORTED_MODULE_11__["ɵɵinject"](_angular_material_dialog__WEBPACK_IMPORTED_MODULE_12__.MatDialog));
  };
  static #_2 = this.ɵprov = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_11__["ɵɵdefineInjectable"]({
    token: PaymentsService,
    factory: PaymentsService.ɵfac,
    providedIn: 'root'
  });
}

/***/ }),

/***/ 44855:
/*!**********************************!*\
  !*** ./libs/spaces/src/index.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   NewSpaceSelectModalComponent: () => (/* reexport safe */ _lib_spaces__WEBPACK_IMPORTED_MODULE_1__.NewSpaceSelectModalComponent),
/* harmony export */   SharedSpacesModule: () => (/* reexport safe */ _lib_spaces_module__WEBPACK_IMPORTED_MODULE_0__.SharedSpacesModule),
/* harmony export */   Space: () => (/* reexport safe */ _lib_spaces__WEBPACK_IMPORTED_MODULE_1__.Space),
/* harmony export */   SpacePipe: () => (/* reexport safe */ _lib_space_pipe__WEBPACK_IMPORTED_MODULE_2__.SpacePipe),
/* harmony export */   SpacesService: () => (/* reexport safe */ _lib_spaces__WEBPACK_IMPORTED_MODULE_1__.SpacesService),
/* harmony export */   generateMockSpace: () => (/* reexport safe */ _lib_spaces__WEBPACK_IMPORTED_MODULE_1__.generateMockSpace),
/* harmony export */   generateSystemsFormFields: () => (/* reexport safe */ _lib_spaces__WEBPACK_IMPORTED_MODULE_1__.generateSystemsFormFields),
/* harmony export */   isValidUrl: () => (/* reexport safe */ _lib_spaces__WEBPACK_IMPORTED_MODULE_1__.isValidUrl),
/* harmony export */   requestSpacesForZone: () => (/* reexport safe */ _lib_spaces__WEBPACK_IMPORTED_MODULE_1__.requestSpacesForZone),
/* harmony export */   updateSpaceList: () => (/* reexport safe */ _lib_space_pipe__WEBPACK_IMPORTED_MODULE_2__.updateSpaceList),
/* harmony export */   validateURL: () => (/* reexport safe */ _lib_spaces__WEBPACK_IMPORTED_MODULE_1__.validateURL)
/* harmony export */ });
/* harmony import */ var _lib_spaces_module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./lib/spaces.module */ 34360);
/* harmony import */ var _lib_spaces__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./lib/spaces */ 33220);
/* harmony import */ var _lib_space_pipe__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./lib/space.pipe */ 22011);




/***/ }),

/***/ 85752:
/*!************************************************************************************!*\
  !*** ./libs/spaces/src/lib/space-select-modal/new-space-select-modal.component.ts ***!
  \************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   NewSpaceSelectModalComponent: () => (/* binding */ NewSpaceSelectModalComponent)
/* harmony export */ });
/* harmony import */ var _angular_material_dialog__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/material/dialog */ 12587);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var libs_events_src_lib_event_form_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! libs/events/src/lib/event-form.service */ 26101);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/core */ 37580);







function NewSpaceSelectModalComponent_space_list_16_Template(rf, ctx) {
  if (rf & 1) {
    const _r2 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](0, "space-list", 29);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵlistener"]("toggleFav", function NewSpaceSelectModalComponent_space_list_16_Template_space_list_toggleFav_0_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵrestoreView"](_r2);
      const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵresetView"](ctx_r2.toggleFavourite($event));
    })("onSelect", function NewSpaceSelectModalComponent_space_list_16_Template_space_list_onSelect_0_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵrestoreView"](_r2);
      const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵresetView"](ctx_r2.displayed = $event);
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("active", ctx_r2.displayed == null ? null : ctx_r2.displayed.id)("selected", ctx_r2.selected_ids)("favorites", ctx_r2.favorites);
  }
}
function NewSpaceSelectModalComponent_button_19_Template(rf, ctx) {
  if (rf & 1) {
    const _r4 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](0, "button", 30);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵlistener"]("click", function NewSpaceSelectModalComponent_button_19_Template_button_click_0_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵrestoreView"](_r4);
      const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵresetView"](ctx_r2.displayed = null);
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵi18n"](1, 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
  }
}
function NewSpaceSelectModalComponent_ng_template_37_Template(rf, ctx) {
  if (rf & 1) {
    const _r5 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](0, "space-map", 31);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵlistener"]("onSelect", function NewSpaceSelectModalComponent_ng_template_37_Template_space_map_onSelect_0_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵrestoreView"](_r5);
      const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵresetView"](ctx_r2.displayed = $event);
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("selected", ctx_r2.selected_ids)("is_displayed", !!ctx_r2.displayed)("active", ctx_r2.displayed == null ? null : ctx_r2.displayed.id);
  }
}
class NewSpaceSelectModalComponent {
  get selected_ids() {
    return this.selected.map(_ => _.id).join(',');
  }
  get favorites() {
    return this._settings.get('favourite_spaces') || [];
  }
  constructor(_dialog_ref, _settings, _event_form, _data) {
    this._dialog_ref = _dialog_ref;
    this._settings = _settings;
    this._event_form = _event_form;
    this._data = _data;
    this.selected = [];
    this.view = 'list';
    this.multiday = !!this._data.multiday;
    this.selected = [...(_data.spaces || [])];
    this._event_form.setOptions(_data.options);
  }
  isSelected(id) {
    return id && this.selected_ids.includes(id);
  }
  setSelected(item, state) {
    const list = this.selected.filter(_ => _.id !== item.id);
    if (state) list.push(item);
    this.selected = list;
    if (!this._settings.get('app.events.allow_multiple_spaces') && state) {
      this.selected = [item];
      this._dialog_ref.close([item]);
    }
  }
  toggleFavourite(item) {
    const fav_list = this.favorites;
    const new_state = !fav_list.includes(item.id);
    if (new_state) {
      this._settings.saveUserSetting('favourite_spaces', [...fav_list, item.id]);
    } else {
      this._settings.saveUserSetting('favourite_spaces', fav_list.filter(_ => _ !== item.id));
    }
  }
  static #_ = this.ɵfac = function NewSpaceSelectModalComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || NewSpaceSelectModalComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdirectiveInject"](_angular_material_dialog__WEBPACK_IMPORTED_MODULE_3__.MatDialogRef), _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdirectiveInject"](_placeos_common__WEBPACK_IMPORTED_MODULE_0__.SettingsService), _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdirectiveInject"](libs_events_src_lib_event_form_service__WEBPACK_IMPORTED_MODULE_1__.EventFormService), _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdirectiveInject"](_angular_material_dialog__WEBPACK_IMPORTED_MODULE_3__.MAT_DIALOG_DATA));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdefineComponent"]({
    type: NewSpaceSelectModalComponent,
    selectors: [["new-space-select-modal"]],
    decls: 39,
    vars: 29,
    consts: () => {
      let i18n_0;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_3245405487284732016$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_NEW_SPACE_SELECT_MODAL_COMPONENT_TS_0 = goog.getMsg("Find Space");
        i18n_0 = MSG_EXTERNAL_3245405487284732016$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_NEW_SPACE_SELECT_MODAL_COMPONENT_TS_0;
      } else {
        i18n_0 = $localize`:␟2a8f5812e693119f28847362c97c1924c4b5e2ad␟3245405487284732016:Find Space`;
      }
      let i18n_1;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_8443571736703532556$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_NEW_SPACE_SELECT_MODAL_COMPONENT_TS_1 = goog.getMsg(" View List ");
        i18n_1 = MSG_EXTERNAL_8443571736703532556$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_NEW_SPACE_SELECT_MODAL_COMPONENT_TS_1;
      } else {
        i18n_1 = $localize`:␟30d3439b0e0095fe69503245f3bd7a2e9498be7c␟8443571736703532556: View List `;
      }
      let i18n_2;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_819716823718458903$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_NEW_SPACE_SELECT_MODAL_COMPONENT_TS_2 = goog.getMsg("Back to form");
        i18n_2 = MSG_EXTERNAL_819716823718458903$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_NEW_SPACE_SELECT_MODAL_COMPONENT_TS_2;
      } else {
        i18n_2 = $localize`:␟18843b85d1a4f17fefafd07bc5cde636dca44295␟819716823718458903:Back to form`;
      }
      let i18n_3;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_8164592885301950366$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_NEW_SPACE_SELECT_MODAL_COMPONENT_TS_3 = goog.getMsg(" {$interpolation} room(s) added ", {
          "interpolation": "\uFFFD0\uFFFD"
        }, {
          original_code: {
            "interpolation": "{{ selected.length }}"
          }
        });
        i18n_3 = MSG_EXTERNAL_8164592885301950366$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_NEW_SPACE_SELECT_MODAL_COMPONENT_TS_3;
      } else {
        i18n_3 = $localize`:␟7651117c4dcb18eb274657230a366a428c9a113b␟8164592885301950366: ${"\uFFFD0\uFFFD"}:INTERPOLATION: room(s) added `;
      }
      let i18n_4;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_874721418273731876$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_NEW_SPACE_SELECT_MODAL_COMPONENT_TS_4 = goog.getMsg(" Back ");
        i18n_4 = MSG_EXTERNAL_874721418273731876$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_NEW_SPACE_SELECT_MODAL_COMPONENT_TS_4;
      } else {
        i18n_4 = $localize`:␟ccda1d41ca79703a85a3a598c1d97e040a32b766␟874721418273731876: Back `;
      }
      return [["map_view", ""], i18n_0, i18n_1, i18n_2, i18n_3, i18n_4, [1, "w-[100vw]", "h-[100vh]", "sm:relative", "sm:w-auto", "sm:h-auto", "flex", "flex-col", "bg-base-100"], [1, "flex", "items-center", "space-x-4", "w-full"], ["icon", "", "matRipple", "", "mat-dialog-close", "", 1, "bg-base-200"], [1, "hidden", "sm:flex", "items-center", "justify-end", "flex-1"], ["btn", "", "matRipple", "", "map", "", 1, "rounded-l", "rounded-r-none", 3, "click"], ["btn", "", "matRipple", "", "list", "", 1, "rounded-r", "rounded-l-none", 3, "click"], [1, "flex-1", "flex", "items-center", "divide-x", "divide-base-200", "min-h-[65vh]", "h-[65vh]", "sm:max-h-[65vh]", "sm:max-w-[95vw]", "w-full", "overflow-hidden"], [1, "h-full", "hidden", "sm:flex", "max-w-[20rem]", "sm:h-[65vh]", "sm:max-h-full", 3, "multiday", "hide_levels", "viewing_map"], [1, "flex", "flex-col", "items-center", "flex-1", "w-1/2", "h-full", "sm:h-[65vh]"], [1, "w-full", "border-b", "border-base-200", 3, "viewChange", "view"], ["class", "flex-1 h-1/2 bg-base-200", 3, "active", "selected", "favorites", "toggleFav", "onSelect", 4, "ngIf", "ngIfElse"], [1, "h-full", "w-full", "sm:h-[65vh]", "absolute", "sm:relative", "flex", "sm:flex-col", "sm:max-w-[20rem]", "z-20", "bg-base-100", 3, "activeChange", "toggleFav", "close", "space", "hide_map", "active", "fav"], [1, "flex", "sm:hidden", "flex-col-reverse", "items-center", "justify-end", "px-2", "pt-2", "pb-[5.5rem]", "border-t", "border-base-200", "w-full"], ["btn", "", "matRipple", "", "name", "spaces-return", "class", "inverse sm:hidden w-full", 3, "click", 4, "ngIf"], ["btn", "", "matRipple", "", "name", "save-spaces", 1, "w-full", "sm:w-32", "sm:mb-0", 3, "mat-dialog-close"], [1, "hidden", "sm:flex", "items-center", "justify-between", "p-2", "border-t", "border-base-200", "w-full"], ["btn", "", "matRipple", "", "name", "spaces-return", 1, "clear", "text-secondary", 3, "mat-dialog-close"], [1, "flex", "items-center"], [1, "text-xl"], [1, "mr-1", "underline"], [1, "opacity-60", "text-sm"], ["btn", "", "matRipple", "", "name", "toggle-space", 3, "click", "disabled"], [1, "mr-1"], [1, "flex-1", "h-1/2", "bg-base-200", 3, "toggleFav", "onSelect", "active", "selected", "favorites"], ["btn", "", "matRipple", "", "name", "spaces-return", 1, "inverse", "sm:hidden", "w-full", 3, "click"], [1, "flex-1", "h-1/2", "w-full", 3, "onSelect", "selected", "is_displayed", "active"]];
    },
    template: function NewSpaceSelectModalComponent_Template(rf, ctx) {
      if (rf & 1) {
        const _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵgetCurrentView"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](0, "div", 6)(1, "header", 7)(2, "button", 8)(3, "app-icon");
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](4, "close");
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](5, "h3");
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵi18n"](6, 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](7, "div", 9)(8, "button", 10);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵlistener"]("click", function NewSpaceSelectModalComponent_Template_button_click_8_listener() {
          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵrestoreView"](_r1);
          return _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵresetView"](ctx.view = "map");
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](9, " Map ");
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](10, "button", 11);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵlistener"]("click", function NewSpaceSelectModalComponent_Template_button_click_10_listener() {
          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵrestoreView"](_r1);
          return _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵresetView"](ctx.view = "list");
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](11, " List ");
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]()()();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](12, "main", 12);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelement"](13, "space-filters", 13);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](14, "div", 14)(15, "space-filters-display", 15);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtwoWayListener"]("viewChange", function NewSpaceSelectModalComponent_Template_space_filters_display_viewChange_15_listener($event) {
          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵrestoreView"](_r1);
          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtwoWayBindingSet"](ctx.view, $event) || (ctx.view = $event);
          return _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵresetView"]($event);
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](16, NewSpaceSelectModalComponent_space_list_16_Template, 1, 3, "space-list", 16);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](17, "space-details", 17);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵlistener"]("activeChange", function NewSpaceSelectModalComponent_Template_space_details_activeChange_17_listener($event) {
          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵrestoreView"](_r1);
          return _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵresetView"](ctx.setSelected(ctx.displayed, $event));
        })("toggleFav", function NewSpaceSelectModalComponent_Template_space_details_toggleFav_17_listener() {
          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵrestoreView"](_r1);
          return _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵresetView"](ctx.toggleFavourite(ctx.displayed));
        })("close", function NewSpaceSelectModalComponent_Template_space_details_close_17_listener() {
          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵrestoreView"](_r1);
          return _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵresetView"](ctx.displayed = null);
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](18, "footer", 18);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](19, NewSpaceSelectModalComponent_button_19_Template, 2, 0, "button", 19);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](20, "button", 20);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵi18n"](21, 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](22, "footer", 21)(23, "button", 22)(24, "div", 23)(25, "app-icon", 24);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](26, "arrow_back");
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](27, "div", 25);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵi18n"](28, 3);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]()()();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](29, "p", 26);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵi18n"](30, 4);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](31, "button", 27);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵlistener"]("click", function NewSpaceSelectModalComponent_Template_button_click_31_listener() {
          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵrestoreView"](_r1);
          return _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵresetView"](ctx.setSelected(ctx.displayed, !ctx.isSelected(ctx.displayed == null ? null : ctx.displayed.id)));
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](32, "div", 23)(33, "app-icon", 24);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](34);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](35, "div", 28);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](36);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]()()()()();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](37, NewSpaceSelectModalComponent_ng_template_37_Template, 1, 3, "ng-template", null, 0, _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplateRefExtractor"]);
      }
      if (rf & 2) {
        const map_view_r6 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵreference"](38);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](8);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵclassProp"]("inverse", ctx.view !== "map");
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵclassProp"]("inverse", ctx.view !== "list");
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("multiday", ctx.multiday)("hide_levels", ctx.view !== "list")("viewing_map", ctx.view === "map");
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtwoWayProperty"]("view", ctx.view);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngIf", ctx.view === "list")("ngIfElse", map_view_r6);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵclassProp"]("hidden", !ctx.displayed)("inset-0", ctx.displayed);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("space", ctx.displayed)("hide_map", ctx.view === "map")("active", ctx.selected_ids.includes(ctx.displayed == null ? null : ctx.displayed.id))("fav", ctx.displayed && ctx.favorites.includes(ctx.displayed == null ? null : ctx.displayed.id));
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngIf", ctx.displayed);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵclassProp"]("mb-2", ctx.displayed);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("mat-dialog-close", ctx.selected);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("mat-dialog-close", ctx.selected);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](7);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵi18nExp"](ctx.selected.length);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵi18nApply"](30);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵclassProp"]("inverse", ctx.isSelected(ctx.displayed == null ? null : ctx.displayed.id));
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("disabled", !ctx.displayed);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtextInterpolate"](ctx.isSelected(ctx.displayed == null ? null : ctx.displayed.id) ? "remove" : "add");
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtextInterpolate1"](" ", ctx.isSelected(ctx.displayed == null ? null : ctx.displayed.id) ? "Remove from Booking" : "Add to booking", " ");
      }
    }
  });
}

/***/ }),

/***/ 17309:
/*!***************************************************************************!*\
  !*** ./libs/spaces/src/lib/space-select-modal/space-details.component.ts ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SpaceDetailsComponent: () => (/* binding */ SpaceDetailsComponent)
/* harmony export */ });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var libs_components_src_lib_map_pin_component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! libs/components/src/lib/map-pin.component */ 71865);
/* harmony import */ var libs_organisation_src_lib_organisation_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! libs/organisation/src/lib/organisation.service */ 19863);
/* harmony import */ var _space_class__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../space.class */ 30735);






const _c0 = () => ({
  disable_pan: true,
  disable_zoom: true
});
function SpaceDetailsComponent_ng_container_0_image_carousel_2_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelement"](0, "image-carousel", 23);
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("images", ctx_r1.space.images);
  }
}
function SpaceDetailsComponent_ng_container_0_section_33_div_3_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "div", 16)(1, "p");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵi18n"](2, 4);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const feature_r3 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵi18nExp"](feature_r3);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵi18nApply"](2);
  }
}
function SpaceDetailsComponent_ng_container_0_section_33_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "section", 24)(1, "h2", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵi18n"](2, 3);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](3, SpaceDetailsComponent_ng_container_0_section_33_div_3_Template, 3, 1, "div", 25);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngForOf", ctx_r1.space.features);
  }
}
function SpaceDetailsComponent_ng_container_0_section_34_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "section", 26);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelement"](1, "interactive-map", 27);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("src", ctx_r1.map_url)("focus", ctx_r1.space.map_id)("features", ctx_r1.features)("options", _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpureFunction0"](4, _c0));
  }
}
function SpaceDetailsComponent_ng_container_0_Template(rf, ctx) {
  if (rf & 1) {
    const _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](1, "section", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](2, SpaceDetailsComponent_ng_container_0_image_carousel_2_Template, 1, 1, "image-carousel", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](3, "button", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵlistener"]("click", function SpaceDetailsComponent_ng_container_0_Template_button_click_3_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵrestoreView"](_r1);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵresetView"](ctx_r1.close.emit());
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](4, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](5, "arrow_back");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](6, "button", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵlistener"]("click", function SpaceDetailsComponent_ng_container_0_Template_button_click_6_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵrestoreView"](_r1);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵresetView"](ctx_r1.toggleFav.emit());
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](7, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](8);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()()();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](9, "div", 11)(10, "section", 12)(11, "h2", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](12);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelement"](13, "hr");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](14, "section", 14)(15, "h2", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵi18n"](16, 1);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](17, "div", 16)(18, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](19, "people");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](20, "p");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵi18n"](21, 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](22, "div", 16)(23, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](24, "meeting_room");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](25, "p");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](26);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](27, "div", 16)(28, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](29, "place");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](30, "p");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](31);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()()();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelement"](32, "hr");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](33, SpaceDetailsComponent_ng_container_0_section_33_Template, 4, 1, "section", 17)(34, SpaceDetailsComponent_ng_container_0_section_34_Template, 2, 5, "section", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](35, "div", 19)(36, "button", 20);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵlistener"]("click", function SpaceDetailsComponent_ng_container_0_Template_button_click_36_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵrestoreView"](_r1);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
      ctx_r1.active = !ctx_r1.active;
      return _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵresetView"](ctx_r1.activeChange.emit(ctx_r1.active));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](37, "div", 21)(38, "app-icon", 22);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](39);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](40, "p");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](41);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()()()();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementContainerEnd"]();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵclassProp"]("sm:h-64", ctx_r1.space.images == null ? null : ctx_r1.space.images.length)("h-40", ctx_r1.space.images == null ? null : ctx_r1.space.images.length)("sm:h-0", !(ctx_r1.space.images == null ? null : ctx_r1.space.images.length))("h-12", !(ctx_r1.space.images == null ? null : ctx_r1.space.images.length))("!bg-transparent", !(ctx_r1.space.images == null ? null : ctx_r1.space.images.length));
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", ctx_r1.space.images == null ? null : ctx_r1.space.images.length);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵclassProp"]("text-white", !ctx_r1.fav)("text-blue-400", ctx_r1.fav);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtextInterpolate"](ctx_r1.fav ? "favorite" : "favorite_border");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtextInterpolate1"](" ", ctx_r1.space.display_name || ctx_r1.space.name, " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](9);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵi18nExp"](ctx_r1.space.capacity);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵi18nApply"](21);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtextInterpolate1"](" ", (ctx_r1.level == null ? null : ctx_r1.level.display_name) || (ctx_r1.level == null ? null : ctx_r1.level.name), " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtextInterpolate1"](" ", (ctx_r1.building == null ? null : ctx_r1.building.address) || (ctx_r1.building == null ? null : ctx_r1.building.display_name) || (ctx_r1.building == null ? null : ctx_r1.building.name), " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", ctx_r1.space.features == null ? null : ctx_r1.space.features.length);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", !ctx_r1.hide_map);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵclassProp"]("inverse", ctx_r1.active);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtextInterpolate"](ctx_r1.active ? "remove" : "add");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtextInterpolate1"](" ", ctx_r1.active ? "Remove this room" : "Add this room", " ");
  }
}
function SpaceDetailsComponent_ng_template_1_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "div", 28)(1, "p", 29);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵi18n"](2, 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()();
  }
}
class SpaceDetailsComponent {
  get level() {
    return this._org.levelWithID(this.space?.zones) || this.space?.level;
  }
  get building() {
    return this._org.buildings.find(_ => this.space?.zones.includes(_.id));
  }
  constructor(_org) {
    this._org = _org;
    this.fav = false;
    this.active = false;
    this.hide_map = false;
    this.activeChange = new _angular_core__WEBPACK_IMPORTED_MODULE_3__.EventEmitter();
    this.close = new _angular_core__WEBPACK_IMPORTED_MODULE_3__.EventEmitter();
    this.toggleFav = new _angular_core__WEBPACK_IMPORTED_MODULE_3__.EventEmitter();
    this.map_url = '';
    this.features = [];
  }
  ngOnChanges(changes) {
    if (changes.space && this.space) {
      this._updateFeature();
    }
  }
  _updateFeature() {
    this.map_url = this.level?.map_id;
    this.features = [{
      location: this.space?.map_id,
      content: libs_components_src_lib_map_pin_component__WEBPACK_IMPORTED_MODULE_0__.MapPinComponent
    }];
  }
  static #_ = this.ɵfac = function SpaceDetailsComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || SpaceDetailsComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵdirectiveInject"](libs_organisation_src_lib_organisation_service__WEBPACK_IMPORTED_MODULE_1__.OrganisationService));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵdefineComponent"]({
    type: SpaceDetailsComponent,
    selectors: [["space-details"]],
    inputs: {
      space: "space",
      fav: "fav",
      active: "active",
      hide_map: "hide_map"
    },
    outputs: {
      activeChange: "activeChange",
      close: "close",
      toggleFav: "toggleFav"
    },
    features: [_angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵNgOnChangesFeature"]],
    decls: 3,
    vars: 2,
    consts: () => {
      let i18n_0;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_5028777105388019087$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_DETAILS_COMPONENT_TS_0 = goog.getMsg("Details");
        i18n_0 = MSG_EXTERNAL_5028777105388019087$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_DETAILS_COMPONENT_TS_0;
      } else {
        i18n_0 = $localize`:␟4f8b2bb476981727ab34ed40fde1218361f92c45␟5028777105388019087:Details`;
      }
      let i18n_1;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_2731085793954892186$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_DETAILS_COMPONENT_TS_1 = goog.getMsg("{$interpolation} People", {
          "interpolation": "\uFFFD0\uFFFD"
        }, {
          original_code: {
            "interpolation": "{{ space.capacity }}"
          }
        });
        i18n_1 = MSG_EXTERNAL_2731085793954892186$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_DETAILS_COMPONENT_TS_1;
      } else {
        i18n_1 = $localize`:␟2fe5caca246424da5e7fcee12a1fe341335e1286␟2731085793954892186:${"\uFFFD0\uFFFD"}:INTERPOLATION: People`;
      }
      let i18n_2;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_3223773701700202859$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_DETAILS_COMPONENT_TS_2 = goog.getMsg("Room Facilities");
        i18n_2 = MSG_EXTERNAL_3223773701700202859$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_DETAILS_COMPONENT_TS_2;
      } else {
        i18n_2 = $localize`:␟45b5b90d7df8adeb648858761739fa700117c0d5␟3223773701700202859:Room Facilities`;
      }
      let i18n_3;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_1353747351482281557$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_DETAILS_COMPONENT_TS_3 = goog.getMsg("{$interpolation}", {
          "interpolation": "\uFFFD0\uFFFD"
        }, {
          original_code: {
            "interpolation": "{{ feature }}"
          }
        });
        i18n_3 = MSG_EXTERNAL_1353747351482281557$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_DETAILS_COMPONENT_TS_3;
      } else {
        i18n_3 = $localize`:␟9a6f64944a2acf1f8315f9ffac43e3fe58bac31f␟1353747351482281557:${"\uFFFD0\uFFFD"}:INTERPOLATION:`;
      }
      let i18n_4;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_5676660199414904214$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_DETAILS_COMPONENT_TS_4 = goog.getMsg(" Select a room to view it's details ");
        i18n_4 = MSG_EXTERNAL_5676660199414904214$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_DETAILS_COMPONENT_TS_4;
      } else {
        i18n_4 = $localize`:␟02434c6ff0f41cc7f311ace51ce0787ae315e5fb␟5676660199414904214: Select a room to view it's details `;
      }
      return [["empty_state", ""], i18n_0, i18n_1, i18n_2, i18n_3, i18n_4, [4, "ngIf", "ngIfElse"], ["image", "", 1, "relative", "w-full", "bg-neutral"], ["class", "absolute inset-0", 3, "images", 4, "ngIf"], ["icon", "", "matRipple", "", "name", "close-space-details", 1, "absolute", "top-2", "left-2", "bg-neutral", "sm:hidden", "text-white", 3, "click"], ["icon", "", "matRipple", "", "name", "toggle-space-favourite-details", 1, "absolute", "top-2", "right-2", "bg-neutral", 3, "click"], [1, "p-2", "space-y-2", "flex-1", "h-1/2", "overflow-auto"], ["actions", "", 1, "z-0"], [1, "text-xl", "font-medium", "mb-2", "mt-4"], ["details", "", 1, "space-y-2"], [1, "text-xl", "font-medium"], [1, "flex", "items-center", "space-x-2"], ["facilities", "", "class", "space-y-2", 4, "ngIf"], ["map", "", "class", "w-full mx-auto h-64 sm:h-48 relative border border-base-200 overflow-hidden rounded", 4, "ngIf"], [1, "px-2", "pt-2", "pb-[5.5rem]", "border-t", "border-base-200", "shadow", "sm:hidden"], ["btn", "", "matRipple", "", "name", "toggle-space-details", 1, "w-full", 3, "click"], [1, "flex", "items-center", "justify-center"], [1, "text-2xl"], [1, "absolute", "inset-0", 3, "images"], ["facilities", "", 1, "space-y-2"], ["class", "flex items-center space-x-2", 4, "ngFor", "ngForOf"], ["map", "", 1, "w-full", "mx-auto", "h-64", "sm:h-48", "relative", "border", "border-base-200", "overflow-hidden", "rounded"], [1, "pointer-events-none", 3, "src", "focus", "features", "options"], ["empty", "", 1, "p-16", "flex", "flex-col", "items-center", "justify-center", "space-y-2"], [1, "opacity-30", "text-center"]];
    },
    template: function SpaceDetailsComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](0, SpaceDetailsComponent_ng_container_0_Template, 42, 26, "ng-container", 6)(1, SpaceDetailsComponent_ng_template_1_Template, 3, 0, "ng-template", null, 0, _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplateRefExtractor"]);
      }
      if (rf & 2) {
        const empty_state_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵreference"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", ctx.space)("ngIfElse", empty_state_r4);
      }
    },
    styles: ["[_nghost-%COMP%] {\n                position: relative;\n                display: flex;\n                flex-direction: column;\n                width: 30%;\n                min-width: 20rem;\n                height: 100%;\n                min-height: 65vh;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNwYWNlLWRldGFpbHMuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxrQkFBa0I7Z0JBQ2xCLGFBQWE7Z0JBQ2Isc0JBQXNCO2dCQUN0QixVQUFVO2dCQUNWLGdCQUFnQjtnQkFDaEIsWUFBWTtnQkFDWixnQkFBZ0I7WUFDcEIiLCJmaWxlIjoic3BhY2UtZGV0YWlscy5jb21wb25lbnQudHMiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIDpob3N0IHtcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgICAgICAgIHdpZHRoOiAzMCU7XG4gICAgICAgICAgICAgICAgbWluLXdpZHRoOiAyMHJlbTtcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgICAgICAgICAgbWluLWhlaWdodDogNjV2aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl19 */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvc3BhY2VzL3NyYy9saWIvc3BhY2Utc2VsZWN0LW1vZGFsL3NwYWNlLWRldGFpbHMuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxrQkFBa0I7Z0JBQ2xCLGFBQWE7Z0JBQ2Isc0JBQXNCO2dCQUN0QixVQUFVO2dCQUNWLGdCQUFnQjtnQkFDaEIsWUFBWTtnQkFDWixnQkFBZ0I7WUFDcEI7O0FBRVosNHVCQUE0dUIiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIDpob3N0IHtcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgICAgICAgIHdpZHRoOiAzMCU7XG4gICAgICAgICAgICAgICAgbWluLXdpZHRoOiAyMHJlbTtcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgICAgICAgICAgbWluLWhlaWdodDogNjV2aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl0sInNvdXJjZVJvb3QiOiIifQ== */"]
  });
}

/***/ }),

/***/ 62779:
/*!***********************************************************************************!*\
  !*** ./libs/spaces/src/lib/space-select-modal/space-filters-display.component.ts ***!
  \***********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SpaceFiltersDisplayComponent: () => (/* binding */ SpaceFiltersDisplayComponent)
/* harmony export */ });
/* harmony import */ var _home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 89204);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var libs_events_src_lib_event_form_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! libs/events/src/lib/event-form.service */ 26101);
/* harmony import */ var libs_organisation_src_lib_organisation_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! libs/organisation/src/lib/organisation.service */ 19863);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! rxjs/operators */ 33602);
/* harmony import */ var _space_filters_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./space-filters.component */ 62796);
/* harmony import */ var _angular_material_bottom_sheet__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @angular/material/bottom-sheet */ 15244);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../components/src/lib/icon.component */ 69434);
/* harmony import */ var _angular_material_core__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @angular/material/core */ 74646);
















function SpaceFiltersDisplayComponent_button_9_Template(rf, ctx) {
  if (rf & 1) {
    const _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](0, "button", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵlistener"]("click", function SpaceFiltersDisplayComponent_button_9_Template_button_click_0_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵrestoreView"](_r1);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵresetView"](ctx_r1.removeAllFeatures());
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](1, " Clear Filters ");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
  }
}
function SpaceFiltersDisplayComponent_div_11_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](0, "div", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtextInterpolate1"](" ", ctx_r1.location, " ");
  }
}
function SpaceFiltersDisplayComponent_ng_container_16_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpipe"](2, "date");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpipe"](3, "date");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementContainerEnd"]();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtextInterpolate2"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpipeBind2"](2, 2, ctx_r1.start, ctx_r1.time_format), " \u2014 ", _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpipeBind2"](3, 5, ctx_r1.end, ctx_r1.time_format), " ");
  }
}
function SpaceFiltersDisplayComponent_ng_container_17_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](1, "All Day");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementContainerEnd"]();
  }
}
function SpaceFiltersDisplayComponent_div_21_Template(rf, ctx) {
  if (rf & 1) {
    const _r3 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](0, "div", 19)(1, "p", 20);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](3, "button", 21);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵlistener"]("click", function SpaceFiltersDisplayComponent_div_21_Template_button_click_3_listener() {
      const feat_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵrestoreView"](_r3).$implicit;
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵresetView"](ctx_r1.removeFeature(feat_r4));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](4, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](5, "close");
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]()()();
  }
  if (rf & 2) {
    const feat_r4 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtextInterpolate"](feat_r4);
  }
}
class SpaceFiltersDisplayComponent extends _placeos_common__WEBPACK_IMPORTED_MODULE_1__.AsyncHandler {
  get all_day() {
    return this._event_form.form.value.all_day;
  }
  get start() {
    return this._event_form.form.value.date;
  }
  get end() {
    const {
      date,
      duration
    } = this._event_form.form.value;
    return date + duration * 60 * 1000;
  }
  get time_format() {
    return this._settings.time_format;
  }
  constructor(_bsheet, _event_form, _org, _settings) {
    super();
    this._bsheet = _bsheet;
    this._event_form = _event_form;
    this._org = _org;
    this._settings = _settings;
    this.view = 'list';
    this.viewChange = new _angular_core__WEBPACK_IMPORTED_MODULE_6__.EventEmitter();
    this.options = this._event_form.options;
    this.location = '';
    this.editFilters = () => this._bsheet.open(_space_filters_component__WEBPACK_IMPORTED_MODULE_4__.SpaceFiltersComponent);
  }
  ngOnInit() {
    this.subscription('opts', this.options.subscribe(({
      zone_ids
    }) => this._updateLocation(zone_ids)));
  }
  removeFeature(feat) {
    var _this = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      const value = yield _this._event_form.options.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.take)(1)).toPromise();
      _this._event_form.setOptions({
        ...value,
        features: (value.features || []).filter(_ => _ !== feat)
      });
    })();
  }
  removeAllFeatures() {
    var _this2 = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      const value = yield _this2._event_form.options.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.take)(1)).toPromise();
      _this2._event_form.setOptions({
        ...value,
        features: []
      });
    })();
  }
  _updateLocation(zone_ids = []) {
    const level = this._org.levelWithID(zone_ids);
    const item = level || this._org.building;
    this.location = item?.display_name || item?.name || '';
  }
  static #_ = this.ɵfac = function SpaceFiltersDisplayComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || SpaceFiltersDisplayComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵdirectiveInject"](_angular_material_bottom_sheet__WEBPACK_IMPORTED_MODULE_8__.MatBottomSheet), _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵdirectiveInject"](libs_events_src_lib_event_form_service__WEBPACK_IMPORTED_MODULE_2__.EventFormService), _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵdirectiveInject"](libs_organisation_src_lib_organisation_service__WEBPACK_IMPORTED_MODULE_3__.OrganisationService), _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵdirectiveInject"](_placeos_common__WEBPACK_IMPORTED_MODULE_1__.SettingsService));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵdefineComponent"]({
    type: SpaceFiltersDisplayComponent,
    selectors: [["space-filters-display"]],
    inputs: {
      view: "view"
    },
    outputs: {
      viewChange: "viewChange"
    },
    features: [_angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵInheritDefinitionFeature"]],
    decls: 23,
    vars: 20,
    consts: () => {
      let i18n_0;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_5208858215712453646$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_FILTERS_DISPLAY_COMPONENT_TS_0 = goog.getMsg(" Filters ");
        i18n_0 = MSG_EXTERNAL_5208858215712453646$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_FILTERS_DISPLAY_COMPONENT_TS_0;
      } else {
        i18n_0 = $localize`:␟19eaa5cd51d70d9ea957eecac78cfd811e9b93d8␟5208858215712453646: Filters `;
      }
      let i18n_1;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_8553228906889869186$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_FILTERS_DISPLAY_COMPONENT_TS_1 = goog.getMsg(" Map ");
        i18n_1 = MSG_EXTERNAL_8553228906889869186$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_FILTERS_DISPLAY_COMPONENT_TS_1;
      } else {
        i18n_1 = $localize`:␟992a9a6a193a56c5b8846dc972c5e1977ee5f1aa␟8553228906889869186: Map `;
      }
      let i18n_2;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_7787942140742011951$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_FILTERS_DISPLAY_COMPONENT_TS_2 = goog.getMsg(" List ");
        i18n_2 = MSG_EXTERNAL_7787942140742011951$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_FILTERS_DISPLAY_COMPONENT_TS_2;
      } else {
        i18n_2 = $localize`:␟4b286e90831dd637c5cd3eb20544664ee7112669␟7787942140742011951: List `;
      }
      let i18n_3;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_5300384898733875729$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_FILTERS_DISPLAY_COMPONENT_TS_3 = goog.getMsg(" Min. {$interpolation} People ", {
          "interpolation": "\uFFFD0\uFFFD"
        }, {
          original_code: {
            "interpolation": "{{ (options | async)?.capacity || 2 }}"
          }
        });
        i18n_3 = MSG_EXTERNAL_5300384898733875729$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_FILTERS_DISPLAY_COMPONENT_TS_3;
      } else {
        i18n_3 = $localize`:␟dfdd3d7879401ba6edca2e5198df414f15c112c2␟5300384898733875729: Min. ${"\uFFFD0\uFFFD"}:INTERPOLATION: People `;
      }
      return [i18n_0, i18n_1, i18n_2, i18n_3, ["actions", "", 1, "sm:hidden", "space-x-2", "flex", "items-center", "p-2"], ["btn", "", "matRipple", "", "name", "edit-space-filters", 1, "flex-1", "w-1/2", 3, "click"], [1, "flex", "items-center"], ["btn", "", "matRipple", "", "name", "view-space-map", 1, "rounded-l", "rounded-r-none", 3, "click"], ["btn", "", "matRipple", "", "name", "view-space-list", 1, "rounded-r", "rounded-l-none", 3, "click"], ["filters", "", 1, "flex", "items-center", "flex-wrap", "p-2", "w-[35rem]", "max-w-full", "sm:max-w-[35rem]"], ["btn", "", "matRipple", "", "name", "clear-space-filters", "class", "min-h-[2rem] mb-2 mr-2", 3, "click", 4, "ngIf"], ["filter-item", "", "zone", "", "class", "dark:border-base-200-500", 4, "ngIf"], ["filter-item", "", "date", "", 1, "dark:border-base-200-500"], ["filter-item", "", "time", "", 1, "dark:border-base-200-500"], [4, "ngIf"], ["filter-item", "", "count", "", 1, "dark:border-base-200-500"], ["filter-item", "", 4, "ngFor", "ngForOf"], ["btn", "", "matRipple", "", "name", "clear-space-filters", 1, "min-h-[2rem]", "mb-2", "mr-2", 3, "click"], ["filter-item", "", "zone", "", 1, "dark:border-base-200-500"], ["filter-item", ""], [1, "truncate"], ["icon", "", "matRipple", "", "name", "remove-space-filter", 1, "-mr-4", 3, "click"]];
    },
    template: function SpaceFiltersDisplayComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](0, "section", 4)(1, "button", 5);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵlistener"]("click", function SpaceFiltersDisplayComponent_Template_button_click_1_listener() {
          return ctx.editFilters();
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵi18n"](2, 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](3, "div", 6)(4, "button", 7);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵlistener"]("click", function SpaceFiltersDisplayComponent_Template_button_click_4_listener() {
          ctx.view = "map";
          return ctx.viewChange.emit(ctx.view);
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵi18n"](5, 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](6, "button", 8);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵlistener"]("click", function SpaceFiltersDisplayComponent_Template_button_click_6_listener() {
          ctx.view = "list";
          return ctx.viewChange.emit(ctx.view);
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵi18n"](7, 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]()()();
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](8, "section", 9);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtemplate"](9, SpaceFiltersDisplayComponent_button_9_Template, 2, 0, "button", 10);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpipe"](10, "async");
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtemplate"](11, SpaceFiltersDisplayComponent_div_11_Template, 2, 1, "div", 11);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](12, "div", 12);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtext"](13);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpipe"](14, "date");
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](15, "div", 13);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtemplate"](16, SpaceFiltersDisplayComponent_ng_container_16_Template, 4, 8, "ng-container", 14)(17, SpaceFiltersDisplayComponent_ng_container_17_Template, 2, 0, "ng-container", 14);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementStart"](18, "div", 15);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵi18n"](19, 3);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpipe"](20, "async");
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtemplate"](21, SpaceFiltersDisplayComponent_div_21_Template, 6, 1, "div", 16);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpipe"](22, "async");
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵelementEnd"]();
      }
      if (rf & 2) {
        let tmp_2_0;
        let tmp_7_0;
        let tmp_9_0;
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](4);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵclassProp"]("inverse", ctx.view !== "map");
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵclassProp"]("inverse", ctx.view !== "list");
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("ngIf", ((tmp_2_0 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpipeBind1"](10, 11, ctx.options)) == null ? null : tmp_2_0.features == null ? null : tmp_2_0.features.length) > 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("ngIf", ctx.location);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpipeBind2"](14, 13, ctx.start, "mediumDate"), " ");
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("ngIf", !ctx.all_day);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("ngIf", ctx.all_day);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵi18nExp"](((tmp_7_0 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpipeBind1"](20, 16, ctx.options)) == null ? null : tmp_7_0.capacity) || 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵi18nApply"](19);
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵproperty"]("ngForOf", (tmp_9_0 = _angular_core__WEBPACK_IMPORTED_MODULE_6__["ɵɵpipeBind1"](22, 18, ctx.options)) == null ? null : tmp_9_0.features);
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_9__.NgForOf, _angular_common__WEBPACK_IMPORTED_MODULE_9__.NgIf, _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_5__.IconComponent, _angular_material_core__WEBPACK_IMPORTED_MODULE_10__.MatRipple, _angular_common__WEBPACK_IMPORTED_MODULE_9__.AsyncPipe, _angular_common__WEBPACK_IMPORTED_MODULE_9__.DatePipe],
    styles: ["[filter-item][_ngcontent-%COMP%] {\n                display: flex;\n                align-items: center;\n                padding: 0 1rem;\n                min-height: 2rem;\n                font-size: 0.875rem;\n                border: 1px solid rgba(0, 0, 0, 0.2);\n                border-radius: 1.25rem;\n                margin-right: 0.5rem;\n                margin-bottom: 0.5rem;\n                max-width: 100%;\n                text-align: center;\n            }\n\n            [filter-item][_ngcontent-%COMP%]:hover {\n                background: rgba(0, 0, 0, 0.1);\n            }\n\n            [filter-item][_ngcontent-%COMP%]    > *[_ngcontent-%COMP%]    + *[_ngcontent-%COMP%] {\n                margin-left: 0.5rem;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNwYWNlLWZpbHRlcnMtZGlzcGxheS5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLGFBQWE7Z0JBQ2IsbUJBQW1CO2dCQUNuQixlQUFlO2dCQUNmLGdCQUFnQjtnQkFDaEIsbUJBQW1CO2dCQUNuQixvQ0FBb0M7Z0JBQ3BDLHNCQUFzQjtnQkFDdEIsb0JBQW9CO2dCQUNwQixxQkFBcUI7Z0JBQ3JCLGVBQWU7Z0JBQ2Ysa0JBQWtCO1lBQ3RCOztZQUVBO2dCQUNJLDhCQUE4QjtZQUNsQzs7WUFFQTtnQkFDSSxtQkFBbUI7WUFDdkIiLCJmaWxlIjoic3BhY2UtZmlsdGVycy1kaXNwbGF5LmNvbXBvbmVudC50cyIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgW2ZpbHRlci1pdGVtXSB7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICAgICAgICAgIHBhZGRpbmc6IDAgMXJlbTtcbiAgICAgICAgICAgICAgICBtaW4taGVpZ2h0OiAycmVtO1xuICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMC44NzVyZW07XG4gICAgICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgcmdiYSgwLCAwLCAwLCAwLjIpO1xuICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDEuMjVyZW07XG4gICAgICAgICAgICAgICAgbWFyZ2luLXJpZ2h0OiAwLjVyZW07XG4gICAgICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMC41cmVtO1xuICAgICAgICAgICAgICAgIG1heC13aWR0aDogMTAwJTtcbiAgICAgICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIFtmaWx0ZXItaXRlbV06aG92ZXIge1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IHJnYmEoMCwgMCwgMCwgMC4xKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgW2ZpbHRlci1pdGVtXSA+ICogKyAqIHtcbiAgICAgICAgICAgICAgICBtYXJnaW4tbGVmdDogMC41cmVtO1xuICAgICAgICAgICAgfVxuICAgICAgICAiXX0= */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvc3BhY2VzL3NyYy9saWIvc3BhY2Utc2VsZWN0LW1vZGFsL3NwYWNlLWZpbHRlcnMtZGlzcGxheS5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLGFBQWE7Z0JBQ2IsbUJBQW1CO2dCQUNuQixlQUFlO2dCQUNmLGdCQUFnQjtnQkFDaEIsbUJBQW1CO2dCQUNuQixvQ0FBb0M7Z0JBQ3BDLHNCQUFzQjtnQkFDdEIsb0JBQW9CO2dCQUNwQixxQkFBcUI7Z0JBQ3JCLGVBQWU7Z0JBQ2Ysa0JBQWtCO1lBQ3RCOztZQUVBO2dCQUNJLDhCQUE4QjtZQUNsQzs7WUFFQTtnQkFDSSxtQkFBbUI7WUFDdkI7O0FBRVosZzVDQUFnNUMiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIFtmaWx0ZXItaXRlbV0ge1xuICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiAwIDFyZW07XG4gICAgICAgICAgICAgICAgbWluLWhlaWdodDogMnJlbTtcbiAgICAgICAgICAgICAgICBmb250LXNpemU6IDAuODc1cmVtO1xuICAgICAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHJnYmEoMCwgMCwgMCwgMC4yKTtcbiAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiAxLjI1cmVtO1xuICAgICAgICAgICAgICAgIG1hcmdpbi1yaWdodDogMC41cmVtO1xuICAgICAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDAuNXJlbTtcbiAgICAgICAgICAgICAgICBtYXgtd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBbZmlsdGVyLWl0ZW1dOmhvdmVyIHtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiByZ2JhKDAsIDAsIDAsIDAuMSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIFtmaWx0ZXItaXRlbV0gPiAqICsgKiB7XG4gICAgICAgICAgICAgICAgbWFyZ2luLWxlZnQ6IDAuNXJlbTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl0sInNvdXJjZVJvb3QiOiIifQ== */"]
  });
}

/***/ }),

/***/ 62796:
/*!***************************************************************************!*\
  !*** ./libs/spaces/src/lib/space-select-modal/space-filters.component.ts ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SpaceFiltersComponent: () => (/* binding */ SpaceFiltersComponent)
/* harmony export */ });
/* harmony import */ var _home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 89204);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! date-fns */ 33240);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! date-fns */ 56441);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! date-fns */ 28797);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! rxjs */ 68824);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! rxjs/operators */ 35443);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! rxjs/operators */ 33602);
/* harmony import */ var libs_events_src_lib_event_form_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! libs/events/src/lib/event-form.service */ 26101);
/* harmony import */ var libs_organisation_src_lib_organisation_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! libs/organisation/src/lib/organisation.service */ 19863);
/* harmony import */ var _spaces_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../spaces.service */ 7401);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_material_bottom_sheet__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @angular/material/bottom-sheet */ 15244);















const _c0 = () => ({
  standalone: true
});
function SpaceFiltersComponent_button_2_Template(rf, ctx) {
  if (rf & 1) {
    const _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "button", 32);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("click", function SpaceFiltersComponent_button_2_Template_button_click_0_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵrestoreView"](_r1);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵresetView"](ctx_r1.close());
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](1, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](2, "keyboard_arrow_left");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]()();
  }
}
function SpaceFiltersComponent_mat_form_field_13_mat_option_2_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "mat-option", 36);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const reg_r4 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("value", reg_r4);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtextInterpolate1"](" ", reg_r4.display_name || reg_r4.name, " ");
  }
}
function SpaceFiltersComponent_mat_form_field_13_Template(rf, ctx) {
  if (rf & 1) {
    const _r3 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "mat-form-field", 33)(1, "mat-select", 34);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("ngModelChange", function SpaceFiltersComponent_mat_form_field_13_Template_mat_select_ngModelChange_1_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵrestoreView"](_r3);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵresetView"](ctx_r1.setRegion($event));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](2, SpaceFiltersComponent_mat_form_field_13_mat_option_2_Template, 2, 2, "mat-option", 35);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipe"](3, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngModel", ctx_r1.region)("ngModelOptions", _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpureFunction0"](5, _c0));
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngForOf", _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipeBind1"](3, 3, ctx_r1.regions));
  }
}
function SpaceFiltersComponent_mat_form_field_15_mat_option_5_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "mat-option", 36);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const bld_r6 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("value", bld_r6);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtextInterpolate1"](" ", bld_r6.display_name || bld_r6.name, " ");
  }
}
function SpaceFiltersComponent_mat_form_field_15_Template(rf, ctx) {
  if (rf & 1) {
    const _r5 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "mat-form-field", 33)(1, "mat-select", 37);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipe"](2, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipe"](3, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipe"](4, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("ngModelChange", function SpaceFiltersComponent_mat_form_field_15_Template_mat_select_ngModelChange_1_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵrestoreView"](_r5);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵresetView"](ctx_r1.setBuilding($event));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](5, SpaceFiltersComponent_mat_form_field_15_mat_option_5_Template, 2, 2, "mat-option", 35);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipe"](6, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    let tmp_3_0;
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngModel", _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipeBind1"](2, 4, ctx_r1.building))("ngModelOptions", _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpureFunction0"](12, _c0))("placeholder", ((tmp_3_0 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipeBind1"](3, 6, ctx_r1.building)) == null ? null : tmp_3_0.display_name) || ((tmp_3_0 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipeBind1"](4, 8, ctx_r1.building)) == null ? null : tmp_3_0.name));
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngForOf", _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipeBind1"](6, 10, ctx_r1.buildings));
  }
}
function SpaceFiltersComponent_mat_form_field_17_mat_option_3_div_2_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "div", 41);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipe"](2, "building");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](3, "span", 42);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](4, " - ");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    let tmp_4_0;
    const lvl_r8 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"]().$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtextInterpolate1"](" ", (tmp_4_0 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipeBind1"](2, 1, lvl_r8.parent_id)) == null ? null : tmp_4_0.display_name, " ");
  }
}
function SpaceFiltersComponent_mat_form_field_17_mat_option_3_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "mat-option", 36)(1, "div", 39);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](2, SpaceFiltersComponent_mat_form_field_17_mat_option_3_div_2_Template, 5, 3, "div", 40);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](3, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]()()();
  }
  if (rf & 2) {
    const lvl_r8 = ctx.$implicit;
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("value", lvl_r8.id);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngIf", ctx_r1.use_region);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtextInterpolate1"](" ", lvl_r8.display_name || lvl_r8.name, " ");
  }
}
function SpaceFiltersComponent_mat_form_field_17_Template(rf, ctx) {
  if (rf & 1) {
    const _r7 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "mat-form-field", 33)(1, "mat-select", 38);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipe"](2, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("ngModelChange", function SpaceFiltersComponent_mat_form_field_17_Template_mat_select_ngModelChange_1_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵrestoreView"](_r7);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵresetView"](ctx_r1.setOptions({
        zone_ids: $event
      }));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](3, SpaceFiltersComponent_mat_form_field_17_mat_option_3_Template, 5, 3, "mat-option", 35);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipe"](4, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    let tmp_1_0;
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngModel", (tmp_1_0 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipeBind1"](2, 4, ctx_r1.options)) == null ? null : tmp_1_0.zone_ids)("ngModelOptions", _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpureFunction0"](8, _c0))("multiple", true);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngForOf", _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipeBind1"](4, 6, ctx_r1.levels));
  }
}
function SpaceFiltersComponent_div_26_Template(rf, ctx) {
  if (rf & 1) {
    const _r9 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "div", 43)(1, "label", 24);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipe"](3, "translate");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](4, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](5, "*");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](6, "a-date-field", 44);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("ngModelChange", function SpaceFiltersComponent_div_26_Template_a_date_field_ngModelChange_6_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵrestoreView"](_r9);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵresetView"](ctx_r1.form.patchValue({
        date_end: $event
      }));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](7);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipe"](8, "translate");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipeBind1"](3, 7, "FORM.END_DATE"), "");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngModel", ctx_r1.form.getRawValue().date_end)("ngModelOptions", _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpureFunction0"](11, _c0))("from", ctx_r1.start_date)("to", ctx_r1.end_date)("short", true);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipeBind1"](8, 9, "FORM.DATE_ERROR"), " ");
  }
}
function SpaceFiltersComponent_div_27_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "div", 45)(1, "mat-checkbox", 46);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵi18n"](2, 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]()();
  }
}
function SpaceFiltersComponent_div_28_div_6_Template(rf, ctx) {
  if (rf & 1) {
    const _r11 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "div", 48)(1, "label", 52);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipe"](3, "translate");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](4, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](5, "*");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](6, "a-time-field", 53);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("ngModelChange", function SpaceFiltersComponent_div_28_div_6_Template_a_time_field_ngModelChange_6_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵrestoreView"](_r11);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"](2);
      return _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵresetView"](ctx_r1.form.patchValue({
        date_end: $event
      }));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    let tmp_5_0;
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipeBind1"](3, 5, "FORM.END_TIME"), "");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngModel", ctx_r1.form.value.date_end)("ngModelOptions", _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpureFunction0"](7, _c0))("from", ctx_r1.form == null ? null : (tmp_5_0 = ctx_r1.form.getRawValue()) == null ? null : tmp_5_0.date)("use_24hr", ctx_r1.use_24hr);
  }
}
function SpaceFiltersComponent_div_28_div_7_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "div", 48)(1, "label", 52);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipe"](3, "translate");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](4, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](5, "*");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelement"](6, "a-duration-field", 54);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    let tmp_3_0;
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipeBind1"](3, 4, "FORM.END_TIME"), "");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("time", ctx_r1.form == null ? null : (tmp_3_0 = ctx_r1.form.getRawValue()) == null ? null : tmp_3_0.date)("max", ctx_r1.max_duration)("use_24hr", ctx_r1.use_24hr);
  }
}
function SpaceFiltersComponent_div_28_Template(rf, ctx) {
  if (rf & 1) {
    const _r10 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "div", 47)(1, "div", 48)(2, "label", 49);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵi18nStart"](3, 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelement"](4, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵi18nEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](5, "a-time-field", 50);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("ngModelChange", function SpaceFiltersComponent_div_28_Template_a_time_field_ngModelChange_5_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵrestoreView"](_r10);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵresetView"](ctx_r1.form.patchValue({
        date: $event
      }));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](6, SpaceFiltersComponent_div_28_div_6_Template, 7, 8, "div", 51)(7, SpaceFiltersComponent_div_28_div_7_Template, 7, 6, "div", 51);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngModel", ctx_r1.form.getRawValue().date)("ngModelOptions", _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpureFunction0"](5, _c0))("use_24hr", ctx_r1.use_24hr);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngIf", ctx_r1.multiday);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngIf", !ctx_r1.multiday);
  }
}
function SpaceFiltersComponent_section_29_Template(rf, ctx) {
  if (rf & 1) {
    const _r12 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "section", 55)(1, "h2", 56);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵi18n"](2, 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipe"](3, "translate");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](4, "div", 57)(5, "div", 58);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵi18n"](6, 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipe"](7, "translate");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](8, "mat-checkbox", 59);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipe"](9, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("ngModelChange", function SpaceFiltersComponent_section_29_Template_mat_checkbox_ngModelChange_8_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵrestoreView"](_r12);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵresetView"](ctx_r1.setOptions({
        show_fav: $event
      }));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]()()();
  }
  if (rf & 2) {
    let tmp_5_0;
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵi18nExp"](_angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipeBind1"](3, 4, "COMMON.FAVOURITES"));
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵi18nApply"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵi18nExp"](_angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipeBind1"](7, 6, "ROOMS.SHOW_FAVOURITES"));
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵi18nApply"](6);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngModel", (tmp_5_0 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipeBind1"](9, 8, ctx_r1.options)) == null ? null : tmp_5_0.show_fav)("ngModelOptions", _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpureFunction0"](10, _c0));
  }
}
function SpaceFiltersComponent_section_31_ng_container_3_div_1_Template(rf, ctx) {
  if (rf & 1) {
    const _r13 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "div", 57)(1, "div", 63);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](3, "mat-checkbox", 64);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipe"](4, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("ngModelChange", function SpaceFiltersComponent_section_31_ng_container_3_div_1_Template_mat_checkbox_ngModelChange_3_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵrestoreView"](_r13);
      const feat_r14 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"]().$implicit;
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"](2);
      return _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵresetView"](ctx_r1.toggleFeature(feat_r14, $event));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    let tmp_5_0;
    const feat_r14 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"]().$implicit;
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtextInterpolate1"](" ", ctx_r1.feature_display[feat_r14] || feat_r14, " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngModel", (tmp_5_0 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipeBind1"](4, 3, ctx_r1.options)) == null ? null : tmp_5_0.features == null ? null : tmp_5_0.features.includes(feat_r14))("ngModelOptions", _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpureFunction0"](5, _c0));
  }
}
function SpaceFiltersComponent_section_31_ng_container_3_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](1, SpaceFiltersComponent_section_31_ng_container_3_div_1_Template, 5, 6, "div", 62);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementContainerEnd"]();
  }
  if (rf & 2) {
    const feat_r14 = ctx.$implicit;
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngIf", !ctx_r1.hide_features.includes(feat_r14));
  }
}
function SpaceFiltersComponent_section_31_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "section", 60)(1, "h2", 56);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵi18n"](2, 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](3, SpaceFiltersComponent_section_31_ng_container_3_Template, 2, 1, "ng-container", 61);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipe"](4, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngForOf", _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipeBind1"](4, 1, ctx_r1.features));
  }
}
function SpaceFiltersComponent_div_34_Template(rf, ctx) {
  if (rf & 1) {
    const _r15 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "div", 65)(1, "button", 66);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("click", function SpaceFiltersComponent_div_34_Template_button_click_1_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵrestoreView"](_r15);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵresetView"](ctx_r1.close());
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵi18n"](2, 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]()();
  }
}
class SpaceFiltersComponent {
  get allow_all_day() {
    return !!this._settings.get('app.events.allow_all_day');
  }
  get use_region() {
    return !!this._settings.get('app.use_region');
  }
  get bld() {
    return this._org.building;
  }
  get region() {
    return this._org.region;
  }
  get form() {
    return this._event_form.form;
  }
  get max_duration() {
    return this._settings.get('app.events.max_duration') || 480;
  }
  get feature_display() {
    return this._settings.get('app.events.feature_decriptions') || {};
  }
  get hide_features() {
    return this._settings.get('app.events.hide_features') || [];
  }
  get use_24hr() {
    return this._settings.get('app.use_24_hour_time');
  }
  get start_date() {
    return (0,date_fns__WEBPACK_IMPORTED_MODULE_6__.startOfDay)(this.form.getRawValue().date).valueOf();
  }
  get end_date() {
    return (0,date_fns__WEBPACK_IMPORTED_MODULE_7__.endOfDay)((0,date_fns__WEBPACK_IMPORTED_MODULE_8__.addDays)(Date.now(), this._settings.get('app.events.allowed_future_days') || 180));
  }
  constructor(_bsheet_ref, _settings, _event_form, _org, _spaces, _mapspeople) {
    this._bsheet_ref = _bsheet_ref;
    this._settings = _settings;
    this._event_form = _event_form;
    this._org = _org;
    this._spaces = _spaces;
    this._mapspeople = _mapspeople;
    this.can_close = false;
    this.options = this._event_form.options;
    this.building = this._org.active_building;
    this.buildings = this._org.active_buildings;
    this.levels = (0,rxjs__WEBPACK_IMPORTED_MODULE_9__.combineLatest)([this._org.active_region, this._org.active_building]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.map)(([region, bld]) => {
      const level_list = this.use_region ? this._org.levelsForRegion(region) : this._org.levelsForBuilding(bld);
      const viewable_levels = level_list.filter(lvl => !lvl.tags.includes('parking'));
      return viewable_levels.sort((a, b) => a.parent_id.localeCompare(b.parent_id) || (a.display_name || '').localeCompare(b.display_name || ''));
    }));
    this.regions = this._org.region_list;
    this.using_mapspeople = this._mapspeople.available$;
    this.features = (0,rxjs__WEBPACK_IMPORTED_MODULE_9__.combineLatest)([this._spaces.features, this._event_form.available_spaces]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.map)(([features, spaces]) => (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.unique)(features.concat((0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.flatten)(spaces.map(_ => _.features))))));
    this.close = () => this._bsheet_ref.dismiss();
    this.setOptions = o => this._event_form.setOptions(o);
    this.can_close = !!this._bsheet_ref;
  }
  setBuilding(bld) {
    this._org.building = bld;
  }
  setRegion(region) {
    this._org.region = region;
  }
  toggleFeature(feat, state) {
    var _this = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      const {
        features
      } = yield _this.options.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_11__.take)(1)).toPromise();
      const new_list = (features || []).filter(_ => feat !== _);
      if (state) new_list.push(feat);
      _this.setOptions({
        features: new_list
      });
    })();
  }
  static #_ = this.ɵfac = function SpaceFiltersComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || SpaceFiltersComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵdirectiveInject"](_angular_material_bottom_sheet__WEBPACK_IMPORTED_MODULE_12__.MatBottomSheetRef, 8), _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵdirectiveInject"](_placeos_common__WEBPACK_IMPORTED_MODULE_1__.SettingsService), _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵdirectiveInject"](libs_events_src_lib_event_form_service__WEBPACK_IMPORTED_MODULE_2__.EventFormService), _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵdirectiveInject"](libs_organisation_src_lib_organisation_service__WEBPACK_IMPORTED_MODULE_3__.OrganisationService), _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵdirectiveInject"](_spaces_service__WEBPACK_IMPORTED_MODULE_4__.SpacesService), _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵdirectiveInject"](_placeos_common__WEBPACK_IMPORTED_MODULE_1__.MapsPeopleService));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵdefineComponent"]({
    type: SpaceFiltersComponent,
    selectors: [["space-filters"]],
    inputs: {
      multiday: "multiday",
      hide_levels: "hide_levels",
      viewing_map: "viewing_map"
    },
    decls: 35,
    vars: 29,
    consts: () => {
      let i18n_0;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_7173310086383878456$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_FILTERS_COMPONENT_TS_0 = goog.getMsg("Space Filters");
        i18n_0 = MSG_EXTERNAL_7173310086383878456$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_FILTERS_COMPONENT_TS_0;
      } else {
        i18n_0 = $localize`:␟36173168a4643aa78634e9242a63f3a40862f166␟7173310086383878456:Space Filters`;
      }
      let i18n_1;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_5028777105388019087$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_FILTERS_COMPONENT_TS_1 = goog.getMsg("Details");
        i18n_1 = MSG_EXTERNAL_5028777105388019087$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_FILTERS_COMPONENT_TS_1;
      } else {
        i18n_1 = $localize`:␟4f8b2bb476981727ab34ed40fde1218361f92c45␟5028777105388019087:Details`;
      }
      let i18n_2;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_471816275243265264$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_FILTERS_COMPONENT_TS_2 = goog.getMsg("Location");
        i18n_2 = MSG_EXTERNAL_471816275243265264$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_FILTERS_COMPONENT_TS_2;
      } else {
        i18n_2 = $localize`:␟ed31c09fd77c36238c13d83635f3fe5294c733d2␟471816275243265264:Location`;
      }
      let i18n_3;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_3158758063619980932$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_FILTERS_COMPONENT_TS_3 = goog.getMsg("Date{$startTagSpan}*{$closeTagSpan}", {
          "closeTagSpan": "\uFFFD/#22\uFFFD",
          "startTagSpan": "\uFFFD#22\uFFFD"
        }, {
          original_code: {
            "closeTagSpan": "</span>",
            "startTagSpan": "<span>"
          }
        });
        i18n_3 = MSG_EXTERNAL_3158758063619980932$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_FILTERS_COMPONENT_TS_3;
      } else {
        i18n_3 = $localize`:␟04cfb5fd033651743bc4b9408bd52ba4ee894070␟3158758063619980932:Date${"\uFFFD#22\uFFFD"}:START_TAG_SPAN:*${"\uFFFD/#22\uFFFD"}:CLOSE_TAG_SPAN:`;
      }
      let i18n_4;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_3894192522062036998$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_FILTERS_COMPONENT_TS_4 = goog.getMsg(" {$interpolation} ", {
          "interpolation": "\uFFFD0\uFFFD"
        }, {
          original_code: {
            "interpolation": "{{ 'FORM.DATE_ERROR' | translate }}"
          }
        });
        i18n_4 = MSG_EXTERNAL_3894192522062036998$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_FILTERS_COMPONENT_TS_4;
      } else {
        i18n_4 = $localize`:␟beead5a3a21b1ca4abe67610030f8a520995de4e␟3894192522062036998: ${"\uFFFD0\uFFFD"}:INTERPOLATION: `;
      }
      let i18n_5;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_8264413387051126615$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_FILTERS_COMPONENT_TS_5 = goog.getMsg("Any Region");
        i18n_5 = MSG_EXTERNAL_8264413387051126615$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_FILTERS_COMPONENT_TS_5;
      } else {
        i18n_5 = $localize`:␟130845b58eba8e50c98f3fba117a0168cdba4f31␟8264413387051126615:Any Region`;
      }
      let i18n_6;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_7323982518822503502$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_FILTERS_COMPONENT_TS_6 = goog.getMsg("Any Level");
        i18n_6 = MSG_EXTERNAL_7323982518822503502$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_FILTERS_COMPONENT_TS_6;
      } else {
        i18n_6 = $localize`:␟50407595967bf29832e873b41f9de3502d5c3e03␟7323982518822503502:Any Level`;
      }
      let i18n_7;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_835486935962207481$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_FILTERS_COMPONENT_TS_7 = goog.getMsg(" All Day ");
        i18n_7 = MSG_EXTERNAL_835486935962207481$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_FILTERS_COMPONENT_TS_7;
      } else {
        i18n_7 = $localize`:␟d7f43e20f3a729fa3de32bc7a1f709ccd722eae5␟835486935962207481: All Day `;
      }
      let i18n_8;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_4735431816432396893$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_FILTERS_COMPONENT_TS_8 = goog.getMsg(" Start Time{$startTagSpan}*{$closeTagSpan}", {
          "closeTagSpan": "\uFFFD/#4\uFFFD",
          "startTagSpan": "\uFFFD#4\uFFFD"
        }, {
          original_code: {
            "closeTagSpan": "</span>",
            "startTagSpan": "<span>"
          }
        });
        i18n_8 = MSG_EXTERNAL_4735431816432396893$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_FILTERS_COMPONENT_TS_8;
      } else {
        i18n_8 = $localize`:␟02d39ddac5bbf95c424df03d5f0d22cc257556bd␟4735431816432396893: Start Time${"\uFFFD#4\uFFFD"}:START_TAG_SPAN:*${"\uFFFD/#4\uFFFD"}:CLOSE_TAG_SPAN:`;
      }
      let i18n_9;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_5010873675481014004$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_FILTERS_COMPONENT_TS_9 = goog.getMsg(" {$interpolation} ", {
          "interpolation": "\uFFFD0\uFFFD"
        }, {
          original_code: {
            "interpolation": "{{ 'COMMON.FAVOURITES' | translate }}"
          }
        });
        i18n_9 = MSG_EXTERNAL_5010873675481014004$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_FILTERS_COMPONENT_TS_9;
      } else {
        i18n_9 = $localize`:␟bde3d9fd949ba4c6014b8e64c1362753bca1cf0c␟5010873675481014004: ${"\uFFFD0\uFFFD"}:INTERPOLATION: `;
      }
      let i18n_10;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_1614226322496100282$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_FILTERS_COMPONENT_TS_10 = goog.getMsg(" {$interpolation} ", {
          "interpolation": "\uFFFD0\uFFFD"
        }, {
          original_code: {
            "interpolation": "{{ 'ROOMS.SHOW_FAVOURITES' | translate }}"
          }
        });
        i18n_10 = MSG_EXTERNAL_1614226322496100282$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_FILTERS_COMPONENT_TS_10;
      } else {
        i18n_10 = $localize`:␟210742da6591a33630e0bfba757b95e6a1d99b20␟1614226322496100282: ${"\uFFFD0\uFFFD"}:INTERPOLATION: `;
      }
      let i18n_11;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_1551920764795208868$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_FILTERS_COMPONENT_TS_11 = goog.getMsg("Facilities");
        i18n_11 = MSG_EXTERNAL_1551920764795208868$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_FILTERS_COMPONENT_TS_11;
      } else {
        i18n_11 = $localize`:␟bf10c600bd861cfd0a23f4759562ee0ae9dbe19f␟1551920764795208868:Facilities`;
      }
      let i18n_12;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_2296888311792137027$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_FILTERS_COMPONENT_TS_12 = goog.getMsg(" Apply Filters ");
        i18n_12 = MSG_EXTERNAL_2296888311792137027$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_FILTERS_COMPONENT_TS_12;
      } else {
        i18n_12 = $localize`:␟c17e2cc448524a39eb83b2937cea3235a2e8bf37␟2296888311792137027: Apply Filters `;
      }
      return [i18n_0, i18n_1, i18n_2, i18n_3, i18n_4, i18n_7, i18n_8, i18n_9, i18n_10, i18n_11, i18n_12, [1, "flex", "items-center", "border-b", "border-base-200", "pb-2", "sm:hidden"], [1, "flex-1", "pl-2"], ["icon", "", "matRipple", "", "name", "close-space-filters", 3, "click", 4, "ngIf"], [1, "font-medium", "flex-2", "text-center"], [1, "flex-1"], [1, "max-h-[65vh]", "p-2", "overflow-y-auto", "overflow-x-hidden", "divide-y", "divide-base-200", "w-full", "max-w-[100vw]", 3, "formGroup"], ["details", ""], [1, "text-lg", "font-medium", "mb-1"], [1, "flex-1", "min-w-[8rem]", "flex", "flex-col"], ["for", "location"], ["appearance", "outline", "class", "w-full", 4, "ngIf"], [1, "flex", "items-center", "flex-wrap", "sm:space-x-2"], [1, "flex-1", "min-w-[8rem]"], ["for", "date"], ["name", "date", 3, "ngModelChange", "ngModel", "ngModelOptions", "to", "short"], ["class", "flex-1 min-w-[8rem] relative", 4, "ngIf"], ["class", "flex justify-end -mt-2 mb-2", 4, "ngIf"], ["class", "flex items-center space-x-2", 4, "ngIf"], ["favs", "", "class", "space-y-2 pb-4", 4, "ngIf"], ["features", "", "class", "space-y-2", 4, "ngIf"], ["class", "px-2 pt-2 w-full border-t border-base-200", 4, "ngIf"], ["icon", "", "matRipple", "", "name", "close-space-filters", 3, "click"], ["appearance", "outline", 1, "w-full"], ["name", "region", "placeholder", i18n_5, 3, "ngModelChange", "ngModel", "ngModelOptions"], [3, "value", 4, "ngFor", "ngForOf"], [3, "value"], ["name", "building", 3, "ngModelChange", "ngModel", "ngModelOptions", "placeholder"], ["name", "location", "placeholder", i18n_6, 3, "ngModelChange", "ngModel", "ngModelOptions", "multiple"], [1, "flex", "flex-col-reverse"], ["class", "opacity-30 text-xs", 4, "ngIf"], [1, "opacity-30", "text-xs"], [1, "opacity-0"], [1, "flex-1", "min-w-[8rem]", "relative"], ["name", "date", 3, "ngModelChange", "ngModel", "ngModelOptions", "from", "to", "short"], [1, "flex", "justify-end", "-mt-2", "mb-2"], ["formControlName", "all_day"], [1, "flex", "items-center", "space-x-2"], [1, "flex-1", "w-1/3"], ["for", "start-time"], ["name", "start-time", 3, "ngModelChange", "ngModel", "ngModelOptions", "use_24hr"], ["class", "flex-1 w-1/3", 4, "ngIf"], ["for", "end-time"], ["name", "end-time", 3, "ngModelChange", "ngModel", "ngModelOptions", "from", "use_24hr"], ["name", "end-time", "formControlName", "duration", 3, "time", "max", "use_24hr"], ["favs", "", 1, "space-y-2", "pb-4"], [1, "text-lg", "font-medium"], [1, "flex", "items-center"], ["for", "fav", 1, "flex-1", "w-1/2"], ["name", "fav", 3, "ngModelChange", "ngModel", "ngModelOptions"], ["features", "", 1, "space-y-2"], [4, "ngFor", "ngForOf"], ["class", "flex items-center", 4, "ngIf"], ["for", "feat", 1, "flex-1", "w-1/2"], ["name", "feat", 3, "ngModelChange", "ngModel", "ngModelOptions"], [1, "px-2", "pt-2", "w-full", "border-t", "border-base-200"], ["btn", "", "matRipple", "", "name", "apply-space-filters", 1, "w-full", 3, "click"]];
    },
    template: function SpaceFiltersComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "div", 11)(1, "div", 12);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](2, SpaceFiltersComponent_button_2_Template, 3, 0, "button", 13);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](3, "h3", 14);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵi18n"](4, 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelement"](5, "div", 15);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](6, "form", 16)(7, "section", 17)(8, "h2", 18);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵi18n"](9, 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](10, "div", 19)(11, "label", 20);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵi18n"](12, 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](13, SpaceFiltersComponent_mat_form_field_13_Template, 4, 6, "mat-form-field", 21);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipe"](14, "async");
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](15, SpaceFiltersComponent_mat_form_field_15_Template, 7, 13, "mat-form-field", 21);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipe"](16, "async");
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](17, SpaceFiltersComponent_mat_form_field_17_Template, 5, 9, "mat-form-field", 21);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](18, "div", 22)(19, "div", 23)(20, "label", 24);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵi18nStart"](21, 3);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelement"](22, "span");
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵi18nEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](23, "a-date-field", 25);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("ngModelChange", function SpaceFiltersComponent_Template_a_date_field_ngModelChange_23_listener($event) {
          return ctx.form.patchValue({
            date: $event
          });
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵi18n"](24, 4);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipe"](25, "translate");
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](26, SpaceFiltersComponent_div_26_Template, 9, 12, "div", 26);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](27, SpaceFiltersComponent_div_27_Template, 3, 0, "div", 27)(28, SpaceFiltersComponent_div_28_Template, 8, 6, "div", 28);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](29, SpaceFiltersComponent_section_29_Template, 10, 11, "section", 29);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipe"](30, "async");
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](31, SpaceFiltersComponent_section_31_Template, 5, 3, "section", 30);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipe"](32, "async");
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipe"](33, "async");
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](34, SpaceFiltersComponent_div_34_Template, 3, 0, "div", 31);
      }
      if (rf & 2) {
        let tmp_2_0;
        let tmp_3_0;
        let tmp_15_0;
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngIf", ctx.can_close);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](4);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("formGroup", ctx.form);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](7);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngIf", ctx.use_region && ((tmp_2_0 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipeBind1"](14, 16, ctx.regions)) == null ? null : tmp_2_0.length));
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngIf", !ctx.use_region && ((tmp_3_0 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipeBind1"](16, 18, ctx.buildings)) == null ? null : tmp_3_0.length) > 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngIf", !ctx.hide_levels);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](6);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngModel", ctx.form.getRawValue().date)("ngModelOptions", _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpureFunction0"](28, _c0))("to", ctx.end_date)("short", true);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵi18nExp"](_angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipeBind1"](25, 20, "FORM.DATE_ERROR"));
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵi18nApply"](24);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngIf", ctx.multiday);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngIf", ctx.allow_all_day);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngIf", !ctx.form.value.all_day);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngIf", !ctx.viewing_map || !_angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipeBind1"](30, 22, ctx.using_mapspeople));
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngIf", ((tmp_15_0 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipeBind1"](32, 24, ctx.features)) == null ? null : tmp_15_0.length) && (!ctx.viewing_map || !_angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipeBind1"](33, 26, ctx.using_mapspeople)));
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngIf", ctx.can_close);
      }
    },
    styles: ["[_nghost-%COMP%] {\n                display: flex;\n                flex-direction: column;\n                width: 100%;\n                max-width: 100vw;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNwYWNlLWZpbHRlcnMuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxhQUFhO2dCQUNiLHNCQUFzQjtnQkFDdEIsV0FBVztnQkFDWCxnQkFBZ0I7WUFDcEIiLCJmaWxlIjoic3BhY2UtZmlsdGVycy5jb21wb25lbnQudHMiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIDpob3N0IHtcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICAgICAgbWF4LXdpZHRoOiAxMDB2dztcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl19 */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvc3BhY2VzL3NyYy9saWIvc3BhY2Utc2VsZWN0LW1vZGFsL3NwYWNlLWZpbHRlcnMuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxhQUFhO2dCQUNiLHNCQUFzQjtnQkFDdEIsV0FBVztnQkFDWCxnQkFBZ0I7WUFDcEI7O0FBRVosZ2pCQUFnakIiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIDpob3N0IHtcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICAgICAgbWF4LXdpZHRoOiAxMDB2dztcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl0sInNvdXJjZVJvb3QiOiIifQ== */"]
  });
}

/***/ }),

/***/ 49609:
/*!************************************************************************!*\
  !*** ./libs/spaces/src/lib/space-select-modal/space-list.component.ts ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SpaceListComponent: () => (/* binding */ SpaceListComponent)
/* harmony export */ });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var libs_events_src_lib_event_form_service__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! libs/events/src/lib/event-form.service */ 26101);
/* harmony import */ var libs_organisation_src_lib_organisation_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! libs/organisation/src/lib/organisation.service */ 19863);






function SpaceListComponent_ng_container_5_ul_1_li_1_div_3_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](0, "div", 24)(1, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](2, "done");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]()();
  }
}
function SpaceListComponent_ng_container_5_ul_1_li_1_img_4_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelement"](0, "img", 25);
  }
  if (rf & 2) {
    const space_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"]().$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("source", space_r2.images[0]);
  }
}
function SpaceListComponent_ng_container_5_ul_1_li_1_ng_template_5_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelement"](0, "img", 26);
  }
}
function SpaceListComponent_ng_container_5_ul_1_li_1_Template(rf, ctx) {
  if (rf & 1) {
    const _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](0, "li", 13)(1, "button", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵlistener"]("click", function SpaceListComponent_ng_container_5_ul_1_li_1_Template_button_click_1_listener() {
      const space_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵrestoreView"](_r1).$implicit;
      const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"](3);
      return _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵresetView"](ctx_r2.selectSpace(space_r2));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](2, "div", 15);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](3, SpaceListComponent_ng_container_5_ul_1_li_1_div_3_Template, 3, 0, "div", 16)(4, SpaceListComponent_ng_container_5_ul_1_li_1_img_4_Template, 1, 1, "img", 17)(5, SpaceListComponent_ng_container_5_ul_1_li_1_ng_template_5_Template, 1, 0, "ng-template", null, 2, _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplateRefExtractor"]);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](7, "div", 18)(8, "div", 19);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](9);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](10, "div", 20)(11, "app-icon", 21);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](12, "place");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](13, "p", 22);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](14);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](15, "div", 20)(16, "app-icon", 21);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](17, "people");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](18, "p");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵi18n"](19, 4);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]()()()();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](20, "button", 23);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵlistener"]("click", function SpaceListComponent_ng_container_5_ul_1_li_1_Template_button_click_20_listener() {
      const space_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵrestoreView"](_r1).$implicit;
      const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"](3);
      return _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵresetView"](ctx_r2.toggleFav.emit(space_r2));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](21, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](22);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]()()();
  }
  if (rf & 2) {
    let tmp_12_0;
    const space_r2 = ctx.$implicit;
    const space_placeholder_r4 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵreference"](6);
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵclassProp"]("!border-info", ctx_r2.active === space_r2.id);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngIf", ctx_r2.selected.includes(space_r2.id));
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngIf", space_r2.images == null ? null : space_r2.images.length)("ngIfElse", space_placeholder_r4);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtextInterpolate1"](" ", space_r2.display_name || space_r2.name || "Meeting Space", " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtextInterpolate1"](" ", space_r2.location || ((tmp_12_0 = ctx_r2.level(space_r2.zones)) == null ? null : tmp_12_0.display_name) || ((tmp_12_0 = ctx_r2.level(space_r2.zones)) == null ? null : tmp_12_0.name), " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](5);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵi18nExp"](space_r2.capacity < 1 ? 2 : space_r2.capacity);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵi18nApply"](19);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵclassProp"]("text-info", ctx_r2.isFavourite(space_r2.id));
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtextInterpolate"](ctx_r2.isFavourite(space_r2.id) ? "favorite" : "favorite_border");
  }
}
function SpaceListComponent_ng_container_5_ul_1_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](0, "ul", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](1, SpaceListComponent_ng_container_5_ul_1_li_1_Template, 23, 11, "li", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipe"](2, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngForOf", _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipeBind1"](2, 1, ctx_r2.available_spaces));
  }
}
function SpaceListComponent_ng_container_5_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](1, SpaceListComponent_ng_container_5_ul_1_Template, 3, 3, "ul", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipe"](2, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementContainerEnd"]();
  }
  if (rf & 2) {
    let tmp_3_0;
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"]();
    const empty_state_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵreference"](8);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngIf", (tmp_3_0 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipeBind1"](2, 2, ctx_r2.available_spaces)) == null ? null : tmp_3_0.length)("ngIfElse", empty_state_r5);
  }
}
function SpaceListComponent_ng_template_7_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](0, "div", 27)(1, "p", 28);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵi18n"](2, 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]()();
  }
}
function SpaceListComponent_ng_template_9_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](0, "div", 29);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelement"](1, "mat-spinner", 30);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](2, "p", 31);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵi18n"](3, 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("diameter", 32);
  }
}
class SpaceListComponent {
  constructor(_event_form, _org) {
    this._event_form = _event_form;
    this._org = _org;
    this.active = '';
    this.selected = '';
    this.favorites = [];
    this.onSelect = new _angular_core__WEBPACK_IMPORTED_MODULE_2__.EventEmitter();
    this.toggleFav = new _angular_core__WEBPACK_IMPORTED_MODULE_2__.EventEmitter();
    this.loading = this._event_form.loading;
    this.available_spaces = this._event_form.available_spaces;
  }
  level(zones) {
    return this._org.levelWithID(zones);
  }
  ngOnInit() {
    this._event_form.setView('find');
  }
  isFavourite(space_id) {
    return this.favorites.includes(space_id);
  }
  selectSpace(space) {
    this.onSelect.emit(space);
  }
  static #_ = this.ɵfac = function SpaceListComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || SpaceListComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdirectiveInject"](libs_events_src_lib_event_form_service__WEBPACK_IMPORTED_MODULE_0__.EventFormService), _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdirectiveInject"](libs_organisation_src_lib_organisation_service__WEBPACK_IMPORTED_MODULE_1__.OrganisationService));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdefineComponent"]({
    type: SpaceListComponent,
    selectors: [["space-list"]],
    inputs: {
      active: "active",
      selected: "selected",
      favorites: "favorites"
    },
    outputs: {
      onSelect: "onSelect",
      toggleFav: "toggleFav"
    },
    decls: 11,
    vars: 7,
    consts: () => {
      let i18n_0;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_2290177789691483092$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_LIST_COMPONENT_TS_0 = goog.getMsg(" {$interpolation} result(s) found ", {
          "interpolation": "\uFFFD0\uFFFD"
        }, {
          original_code: {
            "interpolation": "{{ (available_spaces | async)?.length || 0 }}"
          }
        });
        i18n_0 = MSG_EXTERNAL_2290177789691483092$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_LIST_COMPONENT_TS_0;
      } else {
        i18n_0 = $localize`:␟f3733dfad4477862079351d9f8cf60c7964cc3e3␟2290177789691483092: ${"\uFFFD0\uFFFD"}:INTERPOLATION: result(s) found `;
      }
      let i18n_1;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_4552898751936658514$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_LIST_COMPONENT_TS_1 = goog.getMsg(" {$interpolation} People ", {
          "interpolation": "\uFFFD0\uFFFD"
        }, {
          original_code: {
            "interpolation": "{{\n                                        space.capacity < 1 ? 2 : space.capacity\n                                    }}"
          }
        });
        i18n_1 = MSG_EXTERNAL_4552898751936658514$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_LIST_COMPONENT_TS_1;
      } else {
        i18n_1 = $localize`:␟08719ea79f574b595da7d187fda2fa8c491b5de7␟4552898751936658514: ${"\uFFFD0\uFFFD"}:INTERPOLATION: People `;
      }
      let i18n_2;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_3831747985282777621$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_LIST_COMPONENT_TS_2 = goog.getMsg(" No available spaces for selected time and/or filters ");
        i18n_2 = MSG_EXTERNAL_3831747985282777621$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_LIST_COMPONENT_TS_2;
      } else {
        i18n_2 = $localize`:␟027c29534f5dc45741b226edfebb3f7f578384b0␟3831747985282777621: No available spaces for selected time and/or filters `;
      }
      let i18n_3;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_126579492602011343$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_LIST_COMPONENT_TS_3 = goog.getMsg("Finding available spaces...");
        i18n_3 = MSG_EXTERNAL_126579492602011343$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_LIST_COMPONENT_TS_3;
      } else {
        i18n_3 = $localize`:␟8dad32dda6491a1051df9156e98031c0e634b413␟126579492602011343:Finding available spaces...`;
      }
      return [["empty_state", ""], ["load_state", ""], ["space_placeholder", ""], i18n_0, i18n_1, i18n_2, i18n_3, [1, "font-bold"], ["count", "", 1, "text-sm", "opacity-60", "mb-4"], [4, "ngIf", "ngIfElse"], ["class", "list-style-none space-y-2", 4, "ngIf", "ngIfElse"], [1, "list-style-none", "space-y-2"], ["space", "", "class", "relative p-2 rounded-lg w-full shadow border bg-base-100 border-base-200", 3, "!border-info", 4, "ngFor", "ngForOf"], ["space", "", 1, "relative", "p-2", "rounded-lg", "w-full", "shadow", "border", "bg-base-100", "border-base-200"], ["matRipple", "", "name", "select-space", 1, "w-full", "h-full", "flex", "items-center", 3, "click"], [1, "relative", "min-w-[5rem]", "w-20", "h-20", "rounded-xl", "bg-base-200", "mr-4", "overflow-hidden", "flex", "items-center", "justify-center"], ["class", "absolute top-1 left-1 border border-neutral bg-base-200 rounded-full h-6 w-6 flex items-center justify-center text-white", 4, "ngIf"], ["auth", "", "class", "object-cover h-full", 3, "source", 4, "ngIf", "ngIfElse"], [1, "space-y-2"], [1, "font-medium", "truncate", "mr-10"], [1, "flex", "items-center", "text-sm", "space-x-2"], [1, "text-info"], [1, "truncate"], ["icon", "", "matRipple", "", "name", "toggle-space-favourite", 1, "absolute", "top-1", "right-1", 3, "click"], [1, "absolute", "top-1", "left-1", "border", "border-neutral", "bg-base-200", "rounded-full", "h-6", "w-6", "flex", "items-center", "justify-center", "text-white"], ["auth", "", 1, "object-cover", "h-full", 3, "source"], ["src", "assets/icons/room-placeholder.svg", 1, "m-auto"], ["empty", "", 1, "p-16", "flex", "flex-col", "items-center", "justify-center", "space-y-2"], [1, "opacity-30", "text-center"], ["loading", "", 1, "p-16", "flex", "flex-col", "items-center", "justify-center", "space-y-2"], [3, "diameter"], [1, "opacity-30"]];
    },
    template: function SpaceListComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](0, "h3", 7);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](1, "Results");
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](2, "p", 8);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵi18n"](3, 3);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipe"](4, "async");
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](5, SpaceListComponent_ng_container_5_Template, 3, 4, "ng-container", 9);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipe"](6, "async");
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](7, SpaceListComponent_ng_template_7_Template, 3, 0, "ng-template", null, 0, _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplateRefExtractor"])(9, SpaceListComponent_ng_template_9_Template, 4, 1, "ng-template", null, 1, _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplateRefExtractor"]);
      }
      if (rf & 2) {
        let tmp_2_0;
        const load_state_r6 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵreference"](10);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](4);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵi18nExp"](((tmp_2_0 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipeBind1"](4, 3, ctx.available_spaces)) == null ? null : tmp_2_0.length) || 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵi18nApply"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngIf", !_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipeBind1"](6, 5, ctx.loading))("ngIfElse", load_state_r6);
      }
    },
    styles: ["[_nghost-%COMP%] {\n                width: 100%;\n                height: 100%;\n                padding: 0.5rem;\n                overflow: auto;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNwYWNlLWxpc3QuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxXQUFXO2dCQUNYLFlBQVk7Z0JBQ1osZUFBZTtnQkFDZixjQUFjO1lBQ2xCIiwiZmlsZSI6InNwYWNlLWxpc3QuY29tcG9uZW50LnRzIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICA6aG9zdCB7XG4gICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgICAgICAgICAgIHBhZGRpbmc6IDAuNXJlbTtcbiAgICAgICAgICAgICAgICBvdmVyZmxvdzogYXV0bztcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl19 */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvc3BhY2VzL3NyYy9saWIvc3BhY2Utc2VsZWN0LW1vZGFsL3NwYWNlLWxpc3QuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxXQUFXO2dCQUNYLFlBQVk7Z0JBQ1osZUFBZTtnQkFDZixjQUFjO1lBQ2xCOztBQUVaLG9oQkFBb2hCIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICA6aG9zdCB7XG4gICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgICAgICAgICAgIHBhZGRpbmc6IDAuNXJlbTtcbiAgICAgICAgICAgICAgICBvdmVyZmxvdzogYXV0bztcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl0sInNvdXJjZVJvb3QiOiIifQ== */"]
  });
}

/***/ }),

/***/ 83904:
/*!********************************************************************************!*\
  !*** ./libs/spaces/src/lib/space-select-modal/space-location-pin.component.ts ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SpaceLocationPinComponent: () => (/* binding */ SpaceLocationPinComponent)
/* harmony export */ });
/* harmony import */ var _placeos_components__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/components */ 51588);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../components/src/lib/icon.component */ 69434);




function SpaceLocationPinComponent_div_15_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelement"](0, "div", 16);
  }
}
function SpaceLocationPinComponent_app_icon_16_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](0, "app-icon", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](1, " done ");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
  }
}
class SpaceLocationPinComponent {
  get color() {
    return this.active ? '#F4511E' : this.selected ? '#D32F2F' : '#309251';
  }
  constructor(_data) {
    this._data = _data;
    this.selected = this._data.selected === true;
    this.active = this._data.active === true;
  }
  static #_ = this.ɵfac = function SpaceLocationPinComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || SpaceLocationPinComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdirectiveInject"](_placeos_components__WEBPACK_IMPORTED_MODULE_0__.MAP_FEATURE_DATA));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdefineComponent"]({
    type: SpaceLocationPinComponent,
    selectors: [["space-location-pin"]],
    decls: 17,
    vars: 3,
    consts: [[1, "absolute", "bottom-0", "left-1/2", "-translate-x-1/2"], ["width", "44", "height", "60", "viewBox", "0 0 66 80", "fill", "none", "xmlns", "http://www.w3.org/2000/svg"], ["filter", "url(#filter0_d_1065_10313)"], ["d", "M19.724 53.0408C25.0871 60.3435 30.5582 65.8583 31.0184 66.3178C31.4558 66.755 32.0489 67.0007 32.6674 67.0008H32.6678C33.2863 67.0007 33.8795 66.755 34.3169 66.3178C34.7771 65.8583 40.2481 60.3435 45.6112 53.0408C48.2928 49.3894 50.963 45.2701 52.9663 41.0957C54.9629 36.935 56.3331 32.6459 56.3342 28.6724C56.364 25.5564 55.7725 22.4657 54.5941 19.5809C53.415 16.6946 51.6722 14.0724 49.4675 11.8677C47.2629 9.66308 44.6407 7.92024 41.7544 6.74121C38.8711 5.5634 35.782 4.97184 32.6676 5.00103C29.5533 4.97184 26.4642 5.5634 23.5809 6.74121C20.6946 7.92024 18.0724 9.66308 15.8677 11.8677C13.6631 14.0724 11.9202 16.6946 10.7412 19.5809C9.56278 22.4657 8.97122 25.5565 9.00108 28.6726C9.0022 32.646 10.3724 36.9351 12.369 41.0957C14.3723 45.2701 17.0425 49.3894 19.724 53.0408Z", "stroke", "#0B421D", "stroke-width", "2"], ["id", "filter0_d_1065_10313", "x", "0", "y", "0", "width", "65.3353", "height", "80.001", "filterUnits", "userSpaceOnUse", "color-interpolation-filters", "sRGB"], ["flood-opacity", "0", "result", "BackgroundImageFix"], ["in", "SourceAlpha", "type", "matrix", "values", "0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0", "result", "hardAlpha"], ["dy", "4"], ["stdDeviation", "4"], ["in2", "hardAlpha", "operator", "out"], ["type", "matrix", "values", "0 0 0 0 0.0196078 0 0 0 0 0.109804 0 0 0 0 0.172549 0 0 0 0.2 0"], ["mode", "normal", "in2", "BackgroundImageFix", "result", "effect1_dropShadow_1065_10313"], ["mode", "normal", "in", "SourceGraphic", "in2", "effect1_dropShadow_1065_10313", "result", "shape"], [1, "absolute", "top-0", "left-0", "w-full", "h-3/4", "flex", "items-center", "justify-center"], ["class", "relative z-10 h-4 w-4 rounded-full bg-base-100 border-2 border-[#0B421D]", 4, "ngIf"], ["class", "relative text-white z-10 text-2xl", 4, "ngIf"], [1, "relative", "z-10", "h-4", "w-4", "rounded-full", "bg-base-100", "border-2", "border-[#0B421D]"], [1, "relative", "text-white", "z-10", "text-2xl"]],
    template: function SpaceLocationPinComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](0, "div", 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnamespaceSVG"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](1, "svg", 1)(2, "g", 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelement"](3, "path", 3);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](4, "defs")(5, "filter", 4);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelement"](6, "feFlood", 5)(7, "feColorMatrix", 6)(8, "feOffset", 7)(9, "feGaussianBlur", 8)(10, "feComposite", 9)(11, "feColorMatrix", 10)(12, "feBlend", 11)(13, "feBlend", 12);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]()()();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnamespaceHTML"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](14, "div", 13);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](15, SpaceLocationPinComponent_div_15_Template, 1, 0, "div", 14)(16, SpaceLocationPinComponent_app_icon_16_Template, 2, 0, "app-icon", 15);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]()();
      }
      if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵattribute"]("fill", ctx.color);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](12);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngIf", !ctx.selected);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngIf", ctx.selected);
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_3__.NgIf, _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_1__.IconComponent],
    encapsulation: 2
  });
}

/***/ }),

/***/ 30937:
/*!***********************************************************************!*\
  !*** ./libs/spaces/src/lib/space-select-modal/space-map.component.ts ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SpaceSelectMapComponent: () => (/* binding */ SpaceSelectMapComponent)
/* harmony export */ });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! rxjs */ 90521);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! rxjs */ 68824);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! rxjs/operators */ 35443);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! rxjs/operators */ 19803);
/* harmony import */ var libs_explore_src_lib_explore_spaces_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! libs/explore/src/lib/explore-spaces.service */ 65897);
/* harmony import */ var libs_events_src_lib_event_form_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! libs/events/src/lib/event-form.service */ 26101);
/* harmony import */ var libs_organisation_src_lib_organisation_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! libs/organisation/src/lib/organisation.service */ 19863);
/* harmony import */ var _space_location_pin_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./space-location-pin.component */ 83904);












const _c0 = () => ({
  controls: true
});
const _c1 = () => ({
  standalone: true
});
function SpaceSelectMapComponent_mat_form_field_1_mat_option_2_div_2_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "div", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipe"](2, "building");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](3, "span", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](4, " - ");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    let tmp_4_0;
    const lvl_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"]().$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtextInterpolate1"](" ", (tmp_4_0 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipeBind1"](2, 1, lvl_r3.parent_id)) == null ? null : tmp_4_0.display_name, " ");
  }
}
function SpaceSelectMapComponent_mat_form_field_1_mat_option_2_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "mat-option", 7)(1, "div", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](2, SpaceSelectMapComponent_mat_form_field_1_mat_option_2_div_2_Template, 5, 3, "div", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](3, "div");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]()()();
  }
  if (rf & 2) {
    const lvl_r3 = ctx.$implicit;
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("value", lvl_r3);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngIf", ctx_r1.use_region);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtextInterpolate1"](" ", lvl_r3.display_name || lvl_r3.name, " ");
  }
}
function SpaceSelectMapComponent_mat_form_field_1_Template(rf, ctx) {
  if (rf & 1) {
    const _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "mat-form-field", 4)(1, "mat-select", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtwoWayListener"]("ngModelChange", function SpaceSelectMapComponent_mat_form_field_1_Template_mat_select_ngModelChange_1_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵrestoreView"](_r1);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"]();
      _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtwoWayBindingSet"](ctx_r1.level, $event) || (ctx_r1.level = $event);
      return _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵresetView"]($event);
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("ngModelChange", function SpaceSelectMapComponent_mat_form_field_1_Template_mat_select_ngModelChange_1_listener($event) {
      _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵrestoreView"](_r1);
      const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵresetView"](ctx_r1.setOptions({
        zone_ids: [$event.id]
      }));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](2, SpaceSelectMapComponent_mat_form_field_1_mat_option_2_Template, 5, 3, "mat-option", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipe"](3, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const ctx_r1 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtwoWayProperty"]("ngModel", ctx_r1.level);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngModelOptions", _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpureFunction0"](5, _c1));
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngForOf", _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipeBind1"](3, 3, ctx_r1.levels));
  }
}
class SpaceSelectMapComponent extends _placeos_common__WEBPACK_IMPORTED_MODULE_0__.AsyncHandler {
  get map_url() {
    return this.level?.map_id || '';
  }
  get use_region() {
    return !!this._settings.get('app.use_region');
  }
  constructor(_event_form, _org, _settings) {
    super();
    this._event_form = _event_form;
    this._org = _org;
    this._settings = _settings;
    this.selected = [];
    this.is_displayed = false;
    this.onSelect = new _angular_core__WEBPACK_IMPORTED_MODULE_5__.EventEmitter();
    this.zoom = 1;
    this.center = {
      x: 0.5,
      y: 0.5
    };
    this.coordinates = undefined;
    this._seletedSpace = s => () => {
      this.onSelect.emit(s);
      this._change.next(Date.now());
    };
    this.level = null;
    this._change = new rxjs__WEBPACK_IMPORTED_MODULE_6__.BehaviorSubject(0);
    this.levels = (0,rxjs__WEBPACK_IMPORTED_MODULE_7__.combineLatest)([this._org.active_region, this._org.active_building]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.map)(([region, bld]) => {
      const level_list = this.use_region ? this._org.levelsForRegion(region) : this._org.levelsForBuilding(bld);
      const viewable_levels = level_list.filter(lvl => !lvl.tags.includes('parking'));
      return viewable_levels.sort((a, b) => a.parent_id.localeCompare(b.parent_id) || (a.display_name || '').localeCompare(b.display_name || ''));
    }));
    this.setOptions = o => this._event_form.setOptions(o);
    this.features = (0,rxjs__WEBPACK_IMPORTED_MODULE_7__.combineLatest)([this._event_form.available_spaces, this._change]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.debounceTime)(300), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.map)(([l]) => l.map(space => ({
      location: space.map_id,
      content: _space_location_pin_component__WEBPACK_IMPORTED_MODULE_4__.SpaceLocationPinComponent,
      data: {
        ...space,
        active: this.active === space.id,
        selected: this.selected.includes(space.id)
      }
    }))));
    this.actions = this._event_form.available_spaces.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.map)(l => l.map(space => ({
      id: space.map_id,
      action: ['touchend', 'mouseup'],
      callback: this._seletedSpace(space)
    }))));
    this.styles = (0,rxjs__WEBPACK_IMPORTED_MODULE_7__.combineLatest)([this._event_form.spaces, this._event_form.available_spaces]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.map)(([spaces, free_spaces]) => spaces.reduce((styles, space) => {
      const colours = this._settings.get('app.explore.colors') || {};
      const status = free_spaces.find(_ => _.id === space.id) ? 'free' : 'busy';
      styles[`#${space.map_id || space.id}`] = {
        fill: colours[`space-${status}`] || colours[`${status}`] || libs_explore_src_lib_explore_spaces_service__WEBPACK_IMPORTED_MODULE_1__.DEFAULT_COLOURS[`${status}`]
      };
      return styles;
    }, {})));
  }
  ngOnInit() {
    this.subscription('levels_update', this._event_form.options.subscribe(({
      zone_ids
    }) => {
      const level = this._org.levelWithID(zone_ids);
      if (level) this.level = level;
    }));
  }
  setLevel(level) {
    this.setOptions({
      zone_ids: [level?.id]
    });
    const bld = this._org.buildings.find(_ => _.id === level?.parent_id);
    if (bld) {
      const [latitude, longitude] = (level.location || bld.location).split(',').map(_ => parseFloat(_));
      this.coordinates = {
        latitude,
        longitude
      };
    }
    this.level = level;
  }
  setZoom(new_zoom) {
    this.zoom = Math.max(0.5, Math.min(10, new_zoom));
  }
  resetMap() {
    this.zoom = 1;
    this.center = {
      x: 0.5,
      y: 0.5
    };
  }
  static #_ = this.ɵfac = function SpaceSelectMapComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || SpaceSelectMapComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵdirectiveInject"](libs_events_src_lib_event_form_service__WEBPACK_IMPORTED_MODULE_2__.EventFormService), _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵdirectiveInject"](libs_organisation_src_lib_organisation_service__WEBPACK_IMPORTED_MODULE_3__.OrganisationService), _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵdirectiveInject"](_placeos_common__WEBPACK_IMPORTED_MODULE_0__.SettingsService));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵdefineComponent"]({
    type: SpaceSelectMapComponent,
    selectors: [["space-map"]],
    inputs: {
      selected: "selected",
      active: "active",
      is_displayed: "is_displayed"
    },
    outputs: {
      onSelect: "onSelect"
    },
    features: [_angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵInheritDefinitionFeature"]],
    decls: 8,
    vars: 17,
    consts: () => {
      let i18n_0;
      if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
        /**
         * @suppress {msgDescriptions}
         */
        const MSG_EXTERNAL_7323982518822503502$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_MAP_COMPONENT_TS_0 = goog.getMsg("Any Level");
        i18n_0 = MSG_EXTERNAL_7323982518822503502$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_MAP_COMPONENT_TS_0;
      } else {
        i18n_0 = $localize`:␟50407595967bf29832e873b41f9de3502d5c3e03␟7323982518822503502:Any Level`;
      }
      return [[1, "bg-base-100", "p-2", "border-b", "border-base-200", "w-full"], ["appearance", "outline", "class", "w-full", 4, "ngIf"], [1, "relative", "flex-1", "w-full"], [3, "zoomChange", "centerChange", "src", "zoom", "center", "styles", "features", "actions", "options"], ["appearance", "outline", 1, "w-full"], ["name", "location", "placeholder", i18n_0, 3, "ngModelChange", "ngModel", "ngModelOptions"], [3, "value", 4, "ngFor", "ngForOf"], [3, "value"], [1, "flex", "flex-col-reverse"], ["class", "opacity-30 text-xs", 4, "ngIf"], [1, "opacity-30", "text-xs"], [1, "opacity-0"]];
    },
    template: function SpaceSelectMapComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "div", 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](1, SpaceSelectMapComponent_mat_form_field_1_Template, 4, 6, "mat-form-field", 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipe"](2, "async");
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](3, "div", 2)(4, "interactive-map", 3);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipe"](5, "async");
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipe"](6, "async");
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipe"](7, "async");
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtwoWayListener"]("zoomChange", function SpaceSelectMapComponent_Template_interactive_map_zoomChange_4_listener($event) {
          _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtwoWayBindingSet"](ctx.zoom, $event) || (ctx.zoom = $event);
          return $event;
        })("centerChange", function SpaceSelectMapComponent_Template_interactive_map_centerChange_4_listener($event) {
          _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtwoWayBindingSet"](ctx.center, $event) || (ctx.center = $event);
          return $event;
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]()();
      }
      if (rf & 2) {
        let tmp_0_0;
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngIf", (tmp_0_0 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipeBind1"](2, 8, ctx.levels)) == null ? null : tmp_0_0.length);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("src", ctx.map_url);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtwoWayProperty"]("zoom", ctx.zoom)("center", ctx.center);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("styles", _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipeBind1"](5, 10, ctx.styles))("features", _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipeBind1"](6, 12, ctx.features))("actions", _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpipeBind1"](7, 14, ctx.actions))("options", _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵpureFunction0"](16, _c0));
      }
    },
    styles: ["[_nghost-%COMP%] {\n                position: relative;\n                background: rgba(0, 0, 0, 0.05);\n                display: flex;\n                flex-direction: column;\n            }\n\n            button[_ngcontent-%COMP%] {\n                border-radius: 0;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNwYWNlLW1hcC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLGtCQUFrQjtnQkFDbEIsK0JBQStCO2dCQUMvQixhQUFhO2dCQUNiLHNCQUFzQjtZQUMxQjs7WUFFQTtnQkFDSSxnQkFBZ0I7WUFDcEIiLCJmaWxlIjoic3BhY2UtbWFwLmNvbXBvbmVudC50cyIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgOmhvc3Qge1xuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiByZ2JhKDAsIDAsIDAsIDAuMDUpO1xuICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYnV0dG9uIHtcbiAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAiXX0= */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvc3BhY2VzL3NyYy9saWIvc3BhY2Utc2VsZWN0LW1vZGFsL3NwYWNlLW1hcC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLGtCQUFrQjtnQkFDbEIsK0JBQStCO2dCQUMvQixhQUFhO2dCQUNiLHNCQUFzQjtZQUMxQjs7WUFFQTtnQkFDSSxnQkFBZ0I7WUFDcEI7O0FBRVosNHNCQUE0c0IiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIDpob3N0IHtcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZDogcmdiYSgwLCAwLCAwLCAwLjA1KTtcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGJ1dHRvbiB7XG4gICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl0sInNvdXJjZVJvb3QiOiIifQ== */"]
  });
}

/***/ }),

/***/ 30735:
/*!********************************************!*\
  !*** ./libs/spaces/src/lib/space.class.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Space: () => (/* binding */ Space)
/* harmony export */ });
/* harmony import */ var libs_organisation_src_lib_level_class__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! libs/organisation/src/lib/level.class */ 60602);

class Space {
  constructor(data = {}) {
    this.id = data.id || '';
    this.name = data.name || '';
    this.display_name = data.display_name || '';
    this.email = (data.email || '').toLowerCase();
    this.capacity = data.capacity || -1;
    this.feature_list = data.feature_list || data.features || [];
    this.bookable = !!data.bookable;
    this.zones = data.zones || [];
    this.support_url = data.support_url || '';
    this.map_id = data.map_id || '';
    this.images = data.images || [];
    this.configurations = data.configurations || [];
    this.features = data.features || [];
    this.response_status = data.response_status;
    this.level = data.level || new libs_organisation_src_lib_level_class__WEBPACK_IMPORTED_MODULE_0__.BuildingLevel();
    this.availability = data.availability || [];
  }
  inUseAt(start, duration) {
    const end = start + duration * 60 * 1000;
    return this.availability.filter(i => i.date == start && i.date + i.duration * 60 * 1000 == end && i.status !== 'free').length > 0;
  }
}

/***/ }),

/***/ 22011:
/*!*******************************************!*\
  !*** ./libs/spaces/src/lib/space.pipe.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SpacePipe: () => (/* binding */ SpacePipe),
/* harmony export */   updateSpaceList: () => (/* binding */ updateSpaceList)
/* harmony export */ });
/* harmony import */ var _home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 89204);
/* harmony import */ var _placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @placeos/ts-client */ 35713);
/* harmony import */ var libs_organisation_src_lib_organisation_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! libs/organisation/src/lib/organisation.service */ 19863);
/* harmony import */ var _space_class__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./space.class */ 30735);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! rxjs/operators */ 57871);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/core */ 37580);







const SPACE_LIST = [];
const ATTEMPT_COUNT = {};
const EMPTY_SPACE = new _space_class__WEBPACK_IMPORTED_MODULE_3__.Space({
  email: 'empty.space@place.os'
});
function updateSpaceList(space_list) {
  for (const space of space_list) {
    if (!SPACE_LIST.find(({
      id
    }) => id === space.id)) {
      SPACE_LIST.push(space);
    }
  }
}
setInterval(() => {
  for (const id in ATTEMPT_COUNT) {
    ATTEMPT_COUNT[id] = ATTEMPT_COUNT[id] - 1;
    if (ATTEMPT_COUNT[id] <= 0) {
      delete ATTEMPT_COUNT[id];
    }
  }
}, 10 * 1000);
class SpacePipe {
  constructor(_org) {
    this._org = _org;
  }
  /**
   * Get details of the space with the given ID
   * @param space_id ID or Email of the space
   */
  transform(space_id) {
    var _this = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      if (_this._org) {
        yield _this._org.initialised.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.first)(_ => _)).toPromise();
      }
      const is_email = space_id?.includes('@');
      if (!space_id) return EMPTY_SPACE;
      let space = SPACE_LIST.find(({
        id,
        email
      }) => id === space_id || email === space_id);
      if (space) return space;
      if (ATTEMPT_COUNT[space_id]) return EMPTY_SPACE;
      if (!is_email) {
        const system = yield (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.showSystem)(space_id).toPromise().catch(_ => null);
        if (system) {
          space = new _space_class__WEBPACK_IMPORTED_MODULE_3__.Space({
            ...system,
            level: _this._org?.levelWithID([...system.zones])
          });
          SPACE_LIST.push(space);
          return space;
        }
      }
      const systems = (yield (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.querySystemsWithEmails)({
        in: space_id,
        zone_id: _this._org?.organisation.id
      }).toPromise()).data;
      if (systems.length === 1) {
        space = new _space_class__WEBPACK_IMPORTED_MODULE_3__.Space({
          ...systems[0],
          level: _this._org?.levelWithID([...systems[0].zones])
        });
        SPACE_LIST.push(space);
        return space;
      }
      return EMPTY_SPACE;
    })();
  }
  updateSpaceList(space_list) {
    updateSpaceList(space_list);
  }
  static #_ = this.ɵfac = function SpacePipe_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || SpacePipe)(_angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵdirectiveInject"](libs_organisation_src_lib_organisation_service__WEBPACK_IMPORTED_MODULE_2__.OrganisationService, 24));
  };
  static #_2 = this.ɵpipe = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵdefinePipe"]({
    name: "space",
    type: SpacePipe,
    pure: true
  });
}

/***/ }),

/***/ 28363:
/*!************************************************!*\
  !*** ./libs/spaces/src/lib/space.utilities.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   generateMockSpace: () => (/* binding */ generateMockSpace),
/* harmony export */   generateSystemsFormFields: () => (/* binding */ generateSystemsFormFields),
/* harmony export */   isValidUrl: () => (/* binding */ isValidUrl),
/* harmony export */   requestSpacesForZone: () => (/* binding */ requestSpacesForZone),
/* harmony export */   validateURL: () => (/* binding */ validateURL)
/* harmony export */ });
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var _placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @placeos/ts-client */ 35713);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! rxjs */ 71536);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! rxjs/operators */ 35443);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! rxjs/operators */ 66000);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! rxjs/operators */ 7841);
/* harmony import */ var _users_src_lib_user_utilities__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../users/src/lib/user.utilities */ 24129);
/* harmony import */ var _space_class__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./space.class */ 30735);
/* harmony import */ var _space_pipe__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./space.pipe */ 22011);
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/forms */ 34456);








const SPACE_LIST_REQUESTS = {};
const isValidUrl = url => {
  if (!url) return true;
  try {
    new URL(url);
  } catch (e) {
    return false;
  }
  return true;
};
const validateURL = ctrl => isValidUrl(ctrl?.value) ? null : {
  url: 'invalid'
};
function generateSystemsFormFields(system) {
  const fields = {
    id: new _angular_forms__WEBPACK_IMPORTED_MODULE_5__.FormControl(system?.id || ''),
    name: new _angular_forms__WEBPACK_IMPORTED_MODULE_5__.FormControl(system.name || '', [_angular_forms__WEBPACK_IMPORTED_MODULE_5__.Validators.required]),
    display_name: new _angular_forms__WEBPACK_IMPORTED_MODULE_5__.FormControl(system.display_name || ''),
    email: new _angular_forms__WEBPACK_IMPORTED_MODULE_5__.FormControl(system.email || '', [_angular_forms__WEBPACK_IMPORTED_MODULE_5__.Validators.email]),
    code: new _angular_forms__WEBPACK_IMPORTED_MODULE_5__.FormControl(system.code || ''),
    support_url: new _angular_forms__WEBPACK_IMPORTED_MODULE_5__.FormControl(system.support_url || '', [validateURL]),
    installed_ui_devices: new _angular_forms__WEBPACK_IMPORTED_MODULE_5__.FormControl(system.installed_ui_devices || 0, [_angular_forms__WEBPACK_IMPORTED_MODULE_5__.Validators.pattern('[0-9]*')]),
    features: new _angular_forms__WEBPACK_IMPORTED_MODULE_5__.FormControl((typeof system.features === 'string' ? system.features.split(' ') : system.features) || []),
    capacity: new _angular_forms__WEBPACK_IMPORTED_MODULE_5__.FormControl(system.capacity || 0, [_angular_forms__WEBPACK_IMPORTED_MODULE_5__.Validators.pattern('[0-9]*')]),
    bookable: new _angular_forms__WEBPACK_IMPORTED_MODULE_5__.FormControl(system.bookable || false),
    public: new _angular_forms__WEBPACK_IMPORTED_MODULE_5__.FormControl(system.public || false),
    description: new _angular_forms__WEBPACK_IMPORTED_MODULE_5__.FormControl(system.description || ''),
    images: new _angular_forms__WEBPACK_IMPORTED_MODULE_5__.FormControl(system.images || []),
    map_id: new _angular_forms__WEBPACK_IMPORTED_MODULE_5__.FormControl(system.map_id || ''),
    timezone: new _angular_forms__WEBPACK_IMPORTED_MODULE_5__.FormControl(system.timezone || ''),
    zone: new _angular_forms__WEBPACK_IMPORTED_MODULE_5__.FormControl(null, [_angular_forms__WEBPACK_IMPORTED_MODULE_5__.Validators.required]),
    zones: new _angular_forms__WEBPACK_IMPORTED_MODULE_5__.FormControl(system.zones, [_angular_forms__WEBPACK_IMPORTED_MODULE_5__.Validators.required]),
    version: new _angular_forms__WEBPACK_IMPORTED_MODULE_5__.FormControl(system.version)
  };
  if (!system.id) {
    fields.zone.valueChanges.subscribe(value => fields.zones.setValue([value.id]));
  } else delete fields.zone;
  return new _angular_forms__WEBPACK_IMPORTED_MODULE_5__.FormGroup(fields);
}
function requestSpacesForZone(id) {
  if (!id) return (0,rxjs__WEBPACK_IMPORTED_MODULE_6__.of)([]);
  if (SPACE_LIST_REQUESTS[id]) return SPACE_LIST_REQUESTS[id];
  SPACE_LIST_REQUESTS[id] = (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.querySystems)({
    zone_id: id,
    limit: 500
  }).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.map)(_ => (_.data || []).map(_ => new _space_class__WEBPACK_IMPORTED_MODULE_3__.Space(_))), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.tap)(_ => (0,_space_pipe__WEBPACK_IMPORTED_MODULE_4__.updateSpaceList)(_)), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.shareReplay)(1));
  return SPACE_LIST_REQUESTS[id];
}
let SPACE_COUNT = 0;
/* istanbul ignore next */
function generateMockSpace(overrides = {}) {
  const id = `space-${SPACE_COUNT++}`;
  const name = `Test Space ${SPACE_COUNT}`;
  const linked = (0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.predictableRandomInt)(99999) % 2 === 0 && SPACE_COUNT > 1;
  const space = {
    id,
    name,
    long_name: `${name} with an long name`,
    map_id: `${SPACE_COUNT}`,
    capacity: (0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.predictableRandomInt)(21, 1) * 2,
    email: `${name.toLowerCase().split(' ').join('.')}@${_users_src_lib_user_utilities__WEBPACK_IMPORTED_MODULE_2__.USER_DOMAIN}`,
    type: '',
    searchable: (0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.predictableRandomInt)(99999) % 2 === 0,
    controlable: (0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.predictableRandomInt)(99999) % 2 === 0,
    bookable: (0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.predictableRandomInt)(99999) % 2 === 0,
    cost_hour: (0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.predictableRandomInt)(300) * 100,
    setup: (0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.predictableRandomInt)(6) * 5,
    breakdown: (0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.predictableRandomInt)(6) * 5,
    zones: ['zone_lvl-0'],
    support_url: `/control/#/panel/${id}`,
    bookings: [],
    //Array(10).fill(0).map(i => generateMockBooking()),
    linked_rooms: linked ? [`space-${(0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.predictableRandomInt)(SPACE_COUNT - 1)}`] : [],
    image: '',
    ...overrides
  };
  if (space['configurations'] && space['configurations'].length > 0) {
    space['configurations'].forEach(config => config.capacity = (0,_placeos_common__WEBPACK_IMPORTED_MODULE_0__.predictableRandomInt)(space.capacity) + 1);
    space['configurations'][0].capacity = space.capacity;
  }
  return space;
}

/***/ }),

/***/ 34360:
/*!**********************************************!*\
  !*** ./libs/spaces/src/lib/spaces.module.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SharedSpacesModule: () => (/* binding */ SharedSpacesModule)
/* harmony export */ });
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! @angular/forms */ 34456);
/* harmony import */ var _angular_material_dialog__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! @angular/material/dialog */ 12587);
/* harmony import */ var _angular_material_bottom_sheet__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! @angular/material/bottom-sheet */ 15244);
/* harmony import */ var _angular_material_checkbox__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! @angular/material/checkbox */ 97024);
/* harmony import */ var libs_components_src_lib_components_module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! libs/components/src/lib/components.module */ 14974);
/* harmony import */ var libs_form_fields_src_lib_form_fields_module__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! libs/form-fields/src/lib/form-fields.module */ 77066);
/* harmony import */ var _space_select_modal_new_space_select_modal_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./space-select-modal/new-space-select-modal.component */ 85752);
/* harmony import */ var _space_select_modal_space_details_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./space-select-modal/space-details.component */ 17309);
/* harmony import */ var _space_select_modal_space_list_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./space-select-modal/space-list.component */ 49609);
/* harmony import */ var _space_select_modal_space_filters_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./space-select-modal/space-filters.component */ 62796);
/* harmony import */ var _space_select_modal_space_filters_display_component__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./space-select-modal/space-filters-display.component */ 62779);
/* harmony import */ var _space_select_modal_space_map_component__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./space-select-modal/space-map.component */ 30937);
/* harmony import */ var _space_select_modal_space_location_pin_component__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./space-select-modal/space-location-pin.component */ 83904);
/* harmony import */ var _space_pipe__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./space.pipe */ 22011);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../components/src/lib/icon.component */ 69434);
/* harmony import */ var _angular_material_core__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! @angular/material/core */ 74646);
/* harmony import */ var _components_src_lib_interactive_map_component__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../components/src/lib/interactive-map.component */ 24918);
/* harmony import */ var _components_src_lib_image_carousel_component__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../components/src/lib/image-carousel.component */ 65277);
/* harmony import */ var _components_src_lib_authenticated_image_directive__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../components/src/lib/authenticated-image.directive */ 93208);
/* harmony import */ var _angular_material_progress_spinner__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! @angular/material/progress-spinner */ 41134);
/* harmony import */ var _angular_material_form_field__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! @angular/material/form-field */ 24950);
/* harmony import */ var _angular_material_select__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! @angular/material/select */ 25175);
/* harmony import */ var _form_fields_src_lib_date_field_component__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../form-fields/src/lib/date-field.component */ 19608);
/* harmony import */ var _form_fields_src_lib_duration_field_component__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../form-fields/src/lib/duration-field.component */ 83476);
/* harmony import */ var _form_fields_src_lib_time_field_component__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../../form-fields/src/lib/time-field.component */ 81413);
/* harmony import */ var _components_src_lib_building_pipe__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../../components/src/lib/building.pipe */ 56062);
/* harmony import */ var _ngx_translate_core__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! @ngx-translate/core */ 597);


































const COMPONENTS = [_space_select_modal_new_space_select_modal_component__WEBPACK_IMPORTED_MODULE_2__.NewSpaceSelectModalComponent, _space_select_modal_space_details_component__WEBPACK_IMPORTED_MODULE_3__.SpaceDetailsComponent, _space_select_modal_space_list_component__WEBPACK_IMPORTED_MODULE_4__.SpaceListComponent, _space_select_modal_space_filters_component__WEBPACK_IMPORTED_MODULE_5__.SpaceFiltersComponent, _space_select_modal_space_filters_display_component__WEBPACK_IMPORTED_MODULE_6__.SpaceFiltersDisplayComponent, _space_select_modal_space_map_component__WEBPACK_IMPORTED_MODULE_7__.SpaceSelectMapComponent, _space_select_modal_space_location_pin_component__WEBPACK_IMPORTED_MODULE_8__.SpaceLocationPinComponent, _space_pipe__WEBPACK_IMPORTED_MODULE_9__.SpacePipe];
class SharedSpacesModule {
  static #_ = this.ɵfac = function SharedSpacesModule_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || SharedSpacesModule)();
  };
  static #_2 = this.ɵmod = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵdefineNgModule"]({
    type: SharedSpacesModule
  });
  static #_3 = this.ɵinj = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵdefineInjector"]({
    imports: [_angular_common__WEBPACK_IMPORTED_MODULE_19__.CommonModule, _angular_material_dialog__WEBPACK_IMPORTED_MODULE_20__.MatDialogModule, libs_components_src_lib_components_module__WEBPACK_IMPORTED_MODULE_0__.ComponentsModule, libs_form_fields_src_lib_form_fields_module__WEBPACK_IMPORTED_MODULE_1__.FormFieldsModule, _angular_material_bottom_sheet__WEBPACK_IMPORTED_MODULE_21__.MatBottomSheetModule, _angular_material_checkbox__WEBPACK_IMPORTED_MODULE_22__.MatCheckboxModule, _angular_forms__WEBPACK_IMPORTED_MODULE_23__.FormsModule, _angular_forms__WEBPACK_IMPORTED_MODULE_23__.ReactiveFormsModule]
  });
}
(function () {
  (typeof ngJitMode === "undefined" || ngJitMode) && _angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵsetNgModuleScope"](SharedSpacesModule, {
    declarations: [_space_select_modal_new_space_select_modal_component__WEBPACK_IMPORTED_MODULE_2__.NewSpaceSelectModalComponent, _space_select_modal_space_details_component__WEBPACK_IMPORTED_MODULE_3__.SpaceDetailsComponent, _space_select_modal_space_list_component__WEBPACK_IMPORTED_MODULE_4__.SpaceListComponent, _space_select_modal_space_filters_component__WEBPACK_IMPORTED_MODULE_5__.SpaceFiltersComponent, _space_select_modal_space_filters_display_component__WEBPACK_IMPORTED_MODULE_6__.SpaceFiltersDisplayComponent, _space_select_modal_space_map_component__WEBPACK_IMPORTED_MODULE_7__.SpaceSelectMapComponent, _space_select_modal_space_location_pin_component__WEBPACK_IMPORTED_MODULE_8__.SpaceLocationPinComponent, _space_pipe__WEBPACK_IMPORTED_MODULE_9__.SpacePipe],
    imports: [_angular_common__WEBPACK_IMPORTED_MODULE_19__.CommonModule, _angular_material_dialog__WEBPACK_IMPORTED_MODULE_20__.MatDialogModule, libs_components_src_lib_components_module__WEBPACK_IMPORTED_MODULE_0__.ComponentsModule, libs_form_fields_src_lib_form_fields_module__WEBPACK_IMPORTED_MODULE_1__.FormFieldsModule, _angular_material_bottom_sheet__WEBPACK_IMPORTED_MODULE_21__.MatBottomSheetModule, _angular_material_checkbox__WEBPACK_IMPORTED_MODULE_22__.MatCheckboxModule, _angular_forms__WEBPACK_IMPORTED_MODULE_23__.FormsModule, _angular_forms__WEBPACK_IMPORTED_MODULE_23__.ReactiveFormsModule],
    exports: [_space_select_modal_new_space_select_modal_component__WEBPACK_IMPORTED_MODULE_2__.NewSpaceSelectModalComponent, _space_select_modal_space_details_component__WEBPACK_IMPORTED_MODULE_3__.SpaceDetailsComponent, _space_select_modal_space_list_component__WEBPACK_IMPORTED_MODULE_4__.SpaceListComponent, _space_select_modal_space_filters_component__WEBPACK_IMPORTED_MODULE_5__.SpaceFiltersComponent, _space_select_modal_space_filters_display_component__WEBPACK_IMPORTED_MODULE_6__.SpaceFiltersDisplayComponent, _space_select_modal_space_map_component__WEBPACK_IMPORTED_MODULE_7__.SpaceSelectMapComponent, _space_select_modal_space_location_pin_component__WEBPACK_IMPORTED_MODULE_8__.SpaceLocationPinComponent, _space_pipe__WEBPACK_IMPORTED_MODULE_9__.SpacePipe]
  });
})();
_angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵsetComponentScope"](_space_select_modal_new_space_select_modal_component__WEBPACK_IMPORTED_MODULE_2__.NewSpaceSelectModalComponent, [_angular_common__WEBPACK_IMPORTED_MODULE_19__.NgIf, _angular_material_dialog__WEBPACK_IMPORTED_MODULE_20__.MatDialogClose, _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_10__.IconComponent, _angular_material_core__WEBPACK_IMPORTED_MODULE_24__.MatRipple, _space_select_modal_space_details_component__WEBPACK_IMPORTED_MODULE_3__.SpaceDetailsComponent, _space_select_modal_space_list_component__WEBPACK_IMPORTED_MODULE_4__.SpaceListComponent, _space_select_modal_space_filters_component__WEBPACK_IMPORTED_MODULE_5__.SpaceFiltersComponent, _space_select_modal_space_filters_display_component__WEBPACK_IMPORTED_MODULE_6__.SpaceFiltersDisplayComponent, _space_select_modal_space_map_component__WEBPACK_IMPORTED_MODULE_7__.SpaceSelectMapComponent], []);
_angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵsetComponentScope"](_space_select_modal_space_details_component__WEBPACK_IMPORTED_MODULE_3__.SpaceDetailsComponent, [_angular_common__WEBPACK_IMPORTED_MODULE_19__.NgForOf, _angular_common__WEBPACK_IMPORTED_MODULE_19__.NgIf, _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_10__.IconComponent, _components_src_lib_interactive_map_component__WEBPACK_IMPORTED_MODULE_11__.InteractiveMapComponent, _components_src_lib_image_carousel_component__WEBPACK_IMPORTED_MODULE_12__.ImageCarouselComponent, _angular_material_core__WEBPACK_IMPORTED_MODULE_24__.MatRipple], []);
_angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵsetComponentScope"](_space_select_modal_space_list_component__WEBPACK_IMPORTED_MODULE_4__.SpaceListComponent, [_angular_common__WEBPACK_IMPORTED_MODULE_19__.NgForOf, _angular_common__WEBPACK_IMPORTED_MODULE_19__.NgIf, _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_10__.IconComponent, _components_src_lib_authenticated_image_directive__WEBPACK_IMPORTED_MODULE_13__.AuthenticatedImageDirective, _angular_material_core__WEBPACK_IMPORTED_MODULE_24__.MatRipple, _angular_material_progress_spinner__WEBPACK_IMPORTED_MODULE_25__.MatProgressSpinner], [_angular_common__WEBPACK_IMPORTED_MODULE_19__.AsyncPipe]);
_angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵsetComponentScope"](_space_select_modal_space_filters_component__WEBPACK_IMPORTED_MODULE_5__.SpaceFiltersComponent, [_angular_common__WEBPACK_IMPORTED_MODULE_19__.NgForOf, _angular_common__WEBPACK_IMPORTED_MODULE_19__.NgIf, _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_10__.IconComponent, _angular_material_core__WEBPACK_IMPORTED_MODULE_24__.MatOption, _angular_material_form_field__WEBPACK_IMPORTED_MODULE_26__.MatFormField, _angular_material_select__WEBPACK_IMPORTED_MODULE_27__.MatSelect, _angular_material_core__WEBPACK_IMPORTED_MODULE_24__.MatRipple, _angular_material_checkbox__WEBPACK_IMPORTED_MODULE_22__.MatCheckbox, _form_fields_src_lib_date_field_component__WEBPACK_IMPORTED_MODULE_14__.DateFieldComponent, _form_fields_src_lib_duration_field_component__WEBPACK_IMPORTED_MODULE_15__.DurationFieldComponent, _form_fields_src_lib_time_field_component__WEBPACK_IMPORTED_MODULE_16__.TimeFieldComponent, _angular_forms__WEBPACK_IMPORTED_MODULE_23__["ɵNgNoValidate"], _angular_forms__WEBPACK_IMPORTED_MODULE_23__.NgControlStatus, _angular_forms__WEBPACK_IMPORTED_MODULE_23__.NgControlStatusGroup, _angular_forms__WEBPACK_IMPORTED_MODULE_23__.NgModel, _angular_forms__WEBPACK_IMPORTED_MODULE_23__.FormGroupDirective, _angular_forms__WEBPACK_IMPORTED_MODULE_23__.FormControlName], [_angular_common__WEBPACK_IMPORTED_MODULE_19__.AsyncPipe, _components_src_lib_building_pipe__WEBPACK_IMPORTED_MODULE_17__.BuildingPipe, _ngx_translate_core__WEBPACK_IMPORTED_MODULE_28__.TranslatePipe]);
_angular_core__WEBPACK_IMPORTED_MODULE_18__["ɵɵsetComponentScope"](_space_select_modal_space_map_component__WEBPACK_IMPORTED_MODULE_7__.SpaceSelectMapComponent, [_angular_common__WEBPACK_IMPORTED_MODULE_19__.NgForOf, _angular_common__WEBPACK_IMPORTED_MODULE_19__.NgIf, _components_src_lib_interactive_map_component__WEBPACK_IMPORTED_MODULE_11__.InteractiveMapComponent, _angular_material_core__WEBPACK_IMPORTED_MODULE_24__.MatOption, _angular_material_form_field__WEBPACK_IMPORTED_MODULE_26__.MatFormField, _angular_material_select__WEBPACK_IMPORTED_MODULE_27__.MatSelect, _angular_forms__WEBPACK_IMPORTED_MODULE_23__.NgControlStatus, _angular_forms__WEBPACK_IMPORTED_MODULE_23__.NgModel], [_angular_common__WEBPACK_IMPORTED_MODULE_19__.AsyncPipe, _components_src_lib_building_pipe__WEBPACK_IMPORTED_MODULE_17__.BuildingPipe]);

/***/ }),

/***/ 7401:
/*!***********************************************!*\
  !*** ./libs/spaces/src/lib/spaces.service.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SpacesService: () => (/* binding */ SpacesService)
/* harmony export */ });
/* harmony import */ var _home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 89204);
/* harmony import */ var _placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @placeos/ts-client */ 35713);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! rxjs/operators */ 35443);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! rxjs/operators */ 57871);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! rxjs */ 90521);
/* harmony import */ var libs_organisation_src_lib_organisation_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! libs/organisation/src/lib/organisation.service */ 19863);
/* harmony import */ var _space_class__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./space.class */ 30735);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var _space_pipe__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./space.pipe */ 22011);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @angular/core */ 37580);











let SPACE_PIPE;
class SpacesService {
  /** List of available spaces */
  get space_list() {
    return this._list.getValue();
  }
  constructor(_org, _settings) {
    this._org = _org;
    this._settings = _settings;
    /** Subject to store list of spaces */
    this._list = new rxjs__WEBPACK_IMPORTED_MODULE_6__.BehaviorSubject([]);
    /** Subject which stores the initialised state of the object */
    this._initialised = new rxjs__WEBPACK_IMPORTED_MODULE_6__.BehaviorSubject(false);
    /** Observable of the initialised state of the object */
    this.initialised = this._initialised.asObservable();
    /** Observable for list of spaces */
    this.list = this._list.asObservable();
    /** List of available features */
    this.features = this.list.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.map)(_ => (0,_placeos_common__WEBPACK_IMPORTED_MODULE_4__.unique)((0,_placeos_common__WEBPACK_IMPORTED_MODULE_4__.flatten)(_.map(i => i.features)))));
    /** Default predicate for filter method */
    this._compare = space => space.zones.includes(this._org.building.id);
    SPACE_PIPE = new _space_pipe__WEBPACK_IMPORTED_MODULE_5__.SpacePipe(_org);
    this._init();
  }
  _init() {
    var _this = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      yield _this._org.initialised.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.first)(_ => _)).toPromise();
      if (!_this._settings.get('app.prevent_space_init')) _this.loadSpaces();else _this._initialised.next(true);
    })();
  }
  /**
   * Get a filtered list of the available spaces
   * @param predicate Predicate for filtering spaces
   */
  filter(predicate = this._compare) {
    return this._list.getValue().filter(_ => predicate(_));
  }
  loadSpace(space_id) {
    var _this2 = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      const system = yield (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.showSystem)(space_id).toPromise();
      const space = new _space_class__WEBPACK_IMPORTED_MODULE_3__.Space({
        ...system,
        level: _this2._org.levelWithID([...system.zones])
      });
      SPACE_PIPE.updateSpaceList([space]);
    })();
  }
  /**
   * Find space with given id/email
   * @param space_id ID/Email address associated with the space
   */
  find(space_id) {
    return this._list.getValue().find(({
      id
    }) => space_id === id);
  }
  loadSpaces() {
    var _this3 = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      const systems = yield (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_1__.querySystems)({
        zone_id: _this3._org.organisation.id,
        limit: 5000
      }).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.map)(i => i.data)).toPromise();
      const space_list = systems.map(sys => new _space_class__WEBPACK_IMPORTED_MODULE_3__.Space({
        ...sys,
        level: _this3._org.levelWithID([...sys.zones])
      }));
      // Remove spaces without a map ID
      const valid_spaces = space_list.filter(space => space.map_id);
      _this3._list.next(valid_spaces);
      SPACE_PIPE.updateSpaceList(valid_spaces);
      _this3._initialised.next(true);
    })();
  }
  static #_ = this.ɵfac = function SpacesService_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || SpacesService)(_angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵinject"](libs_organisation_src_lib_organisation_service__WEBPACK_IMPORTED_MODULE_2__.OrganisationService), _angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵinject"](_placeos_common__WEBPACK_IMPORTED_MODULE_4__.SettingsService));
  };
  static #_2 = this.ɵprov = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_9__["ɵɵdefineInjectable"]({
    token: SpacesService,
    factory: SpacesService.ɵfac,
    providedIn: 'root'
  });
}

/***/ }),

/***/ 33220:
/*!***************************************!*\
  !*** ./libs/spaces/src/lib/spaces.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   NewSpaceSelectModalComponent: () => (/* reexport safe */ _space_select_modal_new_space_select_modal_component__WEBPACK_IMPORTED_MODULE_4__.NewSpaceSelectModalComponent),
/* harmony export */   SharedSpacesModule: () => (/* reexport safe */ _spaces_module__WEBPACK_IMPORTED_MODULE_2__.SharedSpacesModule),
/* harmony export */   Space: () => (/* reexport safe */ _space_class__WEBPACK_IMPORTED_MODULE_0__.Space),
/* harmony export */   SpacesService: () => (/* reexport safe */ _spaces_service__WEBPACK_IMPORTED_MODULE_3__.SpacesService),
/* harmony export */   generateMockSpace: () => (/* reexport safe */ _space_utilities__WEBPACK_IMPORTED_MODULE_1__.generateMockSpace),
/* harmony export */   generateSystemsFormFields: () => (/* reexport safe */ _space_utilities__WEBPACK_IMPORTED_MODULE_1__.generateSystemsFormFields),
/* harmony export */   isValidUrl: () => (/* reexport safe */ _space_utilities__WEBPACK_IMPORTED_MODULE_1__.isValidUrl),
/* harmony export */   requestSpacesForZone: () => (/* reexport safe */ _space_utilities__WEBPACK_IMPORTED_MODULE_1__.requestSpacesForZone),
/* harmony export */   validateURL: () => (/* reexport safe */ _space_utilities__WEBPACK_IMPORTED_MODULE_1__.validateURL)
/* harmony export */ });
/* harmony import */ var _space_class__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./space.class */ 30735);
/* harmony import */ var _space_utilities__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./space.utilities */ 28363);
/* harmony import */ var _spaces_module__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./spaces.module */ 34360);
/* harmony import */ var _spaces_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./spaces.service */ 7401);
/* harmony import */ var _space_select_modal_new_space_select_modal_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./space-select-modal/new-space-select-modal.component */ 85752);






/***/ }),

/***/ 41489:
/*!*********************************!*\
  !*** ./libs/users/src/index.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   FindAvailabilityModalComponent: () => (/* reexport safe */ _lib_find_availability_modal_find_availability_modal_component__WEBPACK_IMPORTED_MODULE_2__.FindAvailabilityModalComponent),
/* harmony export */   GuestUser: () => (/* reexport safe */ _lib_user_class__WEBPACK_IMPORTED_MODULE_5__.GuestUser),
/* harmony export */   MapLocation: () => (/* reexport safe */ _lib_location_class__WEBPACK_IMPORTED_MODULE_4__.MapLocation),
/* harmony export */   NewUserModalComponent: () => (/* reexport safe */ _lib_new_user_modal_component__WEBPACK_IMPORTED_MODULE_1__.NewUserModalComponent),
/* harmony export */   SharedUsersModule: () => (/* reexport safe */ _lib_users_module__WEBPACK_IMPORTED_MODULE_0__.SharedUsersModule),
/* harmony export */   StaffUser: () => (/* reexport safe */ _lib_user_class__WEBPACK_IMPORTED_MODULE_5__.StaffUser),
/* harmony export */   USER_DOMAIN: () => (/* reexport safe */ _lib_user_utilities__WEBPACK_IMPORTED_MODULE_6__.USER_DOMAIN),
/* harmony export */   User: () => (/* reexport safe */ _lib_user_class__WEBPACK_IMPORTED_MODULE_5__.User),
/* harmony export */   UserFormComponent: () => (/* reexport safe */ _lib_user_form_component__WEBPACK_IMPORTED_MODULE_3__.UserFormComponent),
/* harmony export */   generateGuestForm: () => (/* reexport safe */ _lib_user_utilities__WEBPACK_IMPORTED_MODULE_6__.generateGuestForm),
/* harmony export */   generateMockUser: () => (/* reexport safe */ _lib_user_utilities__WEBPACK_IMPORTED_MODULE_6__.generateMockUser),
/* harmony export */   generateUserForm: () => (/* reexport safe */ _lib_user_utilities__WEBPACK_IMPORTED_MODULE_6__.generateUserForm),
/* harmony export */   listGuestMeetings: () => (/* reexport safe */ _lib_guests_fn__WEBPACK_IMPORTED_MODULE_7__.listGuestMeetings),
/* harmony export */   locateStaff: () => (/* reexport safe */ _lib_staff_fn__WEBPACK_IMPORTED_MODULE_8__.locateStaff),
/* harmony export */   queryGuests: () => (/* reexport safe */ _lib_guests_fn__WEBPACK_IMPORTED_MODULE_7__.queryGuests),
/* harmony export */   removeGuest: () => (/* reexport safe */ _lib_guests_fn__WEBPACK_IMPORTED_MODULE_7__.removeGuest),
/* harmony export */   searchGuests: () => (/* reexport safe */ _lib_guests_fn__WEBPACK_IMPORTED_MODULE_7__.searchGuests),
/* harmony export */   searchStaff: () => (/* reexport safe */ _lib_staff_fn__WEBPACK_IMPORTED_MODULE_8__.searchStaff),
/* harmony export */   setInternalUserDomain: () => (/* reexport safe */ _lib_user_utilities__WEBPACK_IMPORTED_MODULE_6__.setInternalUserDomain),
/* harmony export */   showGuest: () => (/* reexport safe */ _lib_guests_fn__WEBPACK_IMPORTED_MODULE_7__.showGuest),
/* harmony export */   showStaff: () => (/* reexport safe */ _lib_staff_fn__WEBPACK_IMPORTED_MODULE_8__.showStaff),
/* harmony export */   updateGuest: () => (/* reexport safe */ _lib_guests_fn__WEBPACK_IMPORTED_MODULE_7__.updateGuest)
/* harmony export */ });
/* harmony import */ var _lib_users_module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./lib/users.module */ 34426);
/* harmony import */ var _lib_new_user_modal_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./lib/new-user-modal.component */ 11543);
/* harmony import */ var _lib_find_availability_modal_find_availability_modal_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./lib/find-availability-modal/find-availability-modal.component */ 12716);
/* harmony import */ var _lib_user_form_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./lib/user-form.component */ 7111);
/* harmony import */ var _lib_location_class__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./lib/location.class */ 74529);
/* harmony import */ var _lib_user_class__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./lib/user.class */ 93693);
/* harmony import */ var _lib_user_utilities__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./lib/user.utilities */ 24129);
/* harmony import */ var _lib_guests_fn__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./lib/guests.fn */ 86039);
/* harmony import */ var _lib_staff_fn__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./lib/staff.fn */ 2372);











/***/ }),

/***/ 12716:
/*!*****************************************************************************************!*\
  !*** ./libs/users/src/lib/find-availability-modal/find-availability-modal.component.ts ***!
  \*****************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   FindAvailabilityModalComponent: () => (/* binding */ FindAvailabilityModalComponent)
/* harmony export */ });
/* harmony import */ var _angular_material_dialog__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! @angular/material/dialog */ 12587);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! date-fns */ 31257);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! date-fns */ 99908);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! date-fns */ 33240);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! date-fns */ 56441);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! date-fns */ 82890);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! date-fns */ 1874);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! date-fns */ 49675);
/* harmony import */ var libs_calendar_src_lib_calendar_fn__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! libs/calendar/src/lib/calendar.fn */ 458);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! rxjs */ 90521);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! rxjs */ 68824);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! rxjs */ 71536);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! rxjs/operators */ 19803);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! rxjs/operators */ 71963);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! rxjs/operators */ 29314);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! rxjs/operators */ 35443);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! rxjs/operators */ 34702);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! rxjs/operators */ 7841);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/core */ 37580);









const _c0 = ["container"];
const _c1 = () => [];
function FindAvailabilityModalComponent_div_12_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](0, "div", 32);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const hour_r2 = ctx.index;
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵstyleProp"]("left", -ctx_r2.offset_x + "px");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵattribute"]("disabled", ctx_r2.today && ctx_r2.current_hour > hour_r2);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtextInterpolate2"](" ", hour_r2 % 12 === 0 ? "12" : hour_r2 % 12, "", hour_r2 >= 12 ? "pm" : "am", " ");
  }
}
function FindAvailabilityModalComponent_div_18_Template(rf, ctx) {
  if (rf & 1) {
    const _r4 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](0, "div", 33);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelement"](1, "a-user-avatar", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](2, "div", 34);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](4, "button", 35);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵlistener"]("click", function FindAvailabilityModalComponent_div_18_Template_button_click_4_listener() {
      const user_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵrestoreView"](_r4).$implicit;
      const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵresetView"](ctx_r2.removeUser(user_r5));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](5, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](6, "close");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]()()();
  }
  if (rf & 2) {
    const user_r5 = ctx.$implicit;
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵstyleProp"]("top", -ctx_r2.offset_y + "px");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("user", user_r5);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtextInterpolate1"](" ", user_r5.name || ctx_r2.host.email, " ");
  }
}
function FindAvailabilityModalComponent_div_22_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelement"](0, "div", 36);
  }
  if (rf & 2) {
    const h_r6 = ctx.index;
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵstyleProp"]("left", -(ctx_r2.offset_x + 1) + "px");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵattribute"]("disabled", ctx_r2.today && ctx_r2.current_hour > h_r6);
  }
}
function FindAvailabilityModalComponent_div_30_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](0, "div", 37);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipe"](2, "date");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipeBind2"](2, 1, ctx_r2.date, "shortTime"), " ");
  }
}
function FindAvailabilityModalComponent_user_availability_list_36_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelement"](0, "user-availability-list", 25);
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipe"](1, "async");
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipe"](2, "async");
  }
  if (rf & 2) {
    const user_r7 = ctx.$implicit;
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("user", user_r7)("date", ctx_r2.date)("availability", _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipeBind1"](1, 3, ctx_r2.availability) ? _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipeBind1"](2, 5, ctx_r2.availability)[user_r7.email.toLowerCase()] : _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpureFunction0"](7, _c1));
  }
}
class FindAvailabilityModalComponent extends _placeos_common__WEBPACK_IMPORTED_MODULE_0__.AsyncHandler {
  get today() {
    return (0,date_fns__WEBPACK_IMPORTED_MODULE_3__.isSameDay)(this.date, Date.now());
  }
  get current_hour() {
    return new Date().getHours();
  }
  get selection_left() {
    const date = new Date(this.date);
    return (date.getHours() + date.getMinutes() / 60) * 5;
  }
  get selection_width() {
    return this.duration / 60 * 5;
  }
  constructor(_data, _renderer, _dialog_ref) {
    super();
    this._data = _data;
    this._renderer = _renderer;
    this._dialog_ref = _dialog_ref;
    this.users = new rxjs__WEBPACK_IMPORTED_MODULE_4__.BehaviorSubject([]);
    this.search = '';
    this.date = this._data.date || Date.now();
    this.duration = this._data.duration || 60;
    this.offset_y = 0;
    this.offset_x = 0;
    this.host = this._data.host;
    this.hours = new Array(24).fill(0);
    this.on_change = new rxjs__WEBPACK_IMPORTED_MODULE_4__.BehaviorSubject(0);
    this.availability = (0,rxjs__WEBPACK_IMPORTED_MODULE_5__.combineLatest)([this.users, this.on_change]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.debounceTime)(300), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.switchMap)(([users]) => {
      return (0,libs_calendar_src_lib_calendar_fn__WEBPACK_IMPORTED_MODULE_1__.queryUserFreeBusy)({
        calendars: [this.host.email, ...users.map(_ => _.email.toLowerCase())].join(','),
        period_start: (0,date_fns__WEBPACK_IMPORTED_MODULE_8__.getUnixTime)((0,date_fns__WEBPACK_IMPORTED_MODULE_9__.startOfDay)(this.date)),
        period_end: (0,date_fns__WEBPACK_IMPORTED_MODULE_8__.getUnixTime)((0,date_fns__WEBPACK_IMPORTED_MODULE_10__.endOfDay)(this.date))
      }).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_11__.catchError)(() => (0,rxjs__WEBPACK_IMPORTED_MODULE_12__.of)([])));
    }), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.map)(availability_list => {
      const availability_map = {};
      for (const item of availability_list) {
        availability_map[item.id.toLowerCase()] = item.availability.filter(_ => _.status === 'busy').map(block => {
          const date = (0,date_fns__WEBPACK_IMPORTED_MODULE_14__.fromUnixTime)(block.starts_at);
          const duration = (0,date_fns__WEBPACK_IMPORTED_MODULE_15__.differenceInMinutes)((0,date_fns__WEBPACK_IMPORTED_MODULE_14__.fromUnixTime)(block.ends_at), (0,date_fns__WEBPACK_IMPORTED_MODULE_14__.fromUnixTime)(block.starts_at));
          return {
            date,
            duration,
            start: (date.getHours() + date.getMinutes() / 60) / 24 * 100,
            size: duration / 60 / 24 * 100
          };
        });
      }
      return availability_map;
    }), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_16__.defaultIfEmpty)({}), (0,rxjs_operators__WEBPACK_IMPORTED_MODULE_17__.shareReplay)(1));
    this.move_time = false;
    this._start_time = 0;
    this._move_last = 0;
    this._move_size = 80 * 24;
    this.users.next([...this._data.users]);
  }
  addUser(user) {
    this.users.next([...this.users.getValue().filter(u => u.email !== user.email), user]);
    this.user = null;
  }
  removeUser(user) {
    this.users.next(this.users.getValue().filter(u => u.email !== user.email));
    this.user = null;
  }
  closeAndUpdate() {
    this._dialog_ref.close(true);
  }
  ngAfterViewInit() {
    const date = new Date(this.date);
    this.timeout('init', () => {
      const el = this._container_el.nativeElement.querySelector(`[hour="${date.getHours()}"]`);
      if (el) {
        const rect = this._container_el.nativeElement.getBoundingClientRect();
        const el_rect = el.getBoundingClientRect();
        this._container_el.nativeElement.scrollTo(el_rect.left - 128 - rect.left, 0);
      }
      this.onScroll();
    }, 300);
  }
  onScroll() {
    this.offset_x = this._container_el.nativeElement.scrollLeft;
    this.offset_y = this._container_el.nativeElement.scrollTop;
  }
  startMovePeriod(event) {
    event.preventDefault();
    event.stopPropagation();
    this._move_last = event instanceof MouseEvent ? event.clientX : event.touches[0].clientX;
    this.move_time = true;
    this._start_time = this.date;
    event instanceof MouseEvent ? this.subscription('on_move', this._renderer.listen('window', 'mousemove', e => this._onMovePeriod(e))) : this.subscription('on_move', this._renderer.listen('window', 'touchmove', e => this._onMovePeriod(e)));
    event instanceof MouseEvent ? this.subscription('on_move_end', this._renderer.listen('window', 'mouseup', () => this._onMoveEnd())) : this.subscription('on_move_end', this._renderer.listen('window', 'touchend', () => this._onMoveEnd()));
  }
  startMoveDuration(event) {
    event.preventDefault();
    event.stopPropagation();
    this._move_last = event instanceof MouseEvent ? event.clientX : event.touches[0].clientX;
    this._start_time = this.duration;
    event instanceof MouseEvent ? this.subscription('on_move', this._renderer.listen('window', 'mousemove', e => this._onMoveDuration(e))) : this.subscription('on_move', this._renderer.listen('window', 'touchmove', e => this._onMoveDuration(e)));
    event instanceof MouseEvent ? this.subscription('on_move_end', this._renderer.listen('window', 'mouseup', () => this._onMoveEnd())) : this.subscription('on_move_end', this._renderer.listen('window', 'touchend', () => this._onMoveEnd()));
  }
  _onMovePeriod(event) {
    const change_px = this._move_last - (event instanceof MouseEvent ? event.clientX : event.touches[0].clientX);
    const dir = change_px > 0 ? -1 : 1;
    const change_min = dir * Math.floor(Math.abs(change_px / this._move_size * 24 * 60) / 5) * 5;
    if (change_min) {
      const old_date = this.date;
      this.date = (0,date_fns__WEBPACK_IMPORTED_MODULE_18__.addMinutes)(this._start_time, change_min).valueOf();
      if (this.date < Date.now()) this.date = old_date;
    }
  }
  _onMoveDuration(event) {
    const change_px = this._move_last - (event instanceof MouseEvent ? event.clientX : event.touches[0].clientX);
    const dir = change_px > 0 ? -1 : 1;
    const change_min = dir * Math.floor(Math.abs(change_px / this._move_size * 24 * 60) / 5) * 5;
    if (change_min) {
      this.duration = Math.max(30, this._start_time + change_min);
    }
  }
  _onMoveEnd() {
    this.unsub('on_move');
    this.unsub('on_move_end');
    this._move_last = 0;
    this.move_time = false;
  }
  static #_ = this.ɵfac = function FindAvailabilityModalComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || FindAvailabilityModalComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdirectiveInject"](_angular_material_dialog__WEBPACK_IMPORTED_MODULE_19__.MAT_DIALOG_DATA), _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdirectiveInject"](_angular_core__WEBPACK_IMPORTED_MODULE_2__.Renderer2), _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdirectiveInject"](_angular_material_dialog__WEBPACK_IMPORTED_MODULE_19__.MatDialogRef));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdefineComponent"]({
    type: FindAvailabilityModalComponent,
    selectors: [["find-availability-modal"]],
    viewQuery: function FindAvailabilityModalComponent_Query(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵviewQuery"](_c0, 7);
      }
      if (rf & 2) {
        let _t;
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵqueryRefresh"](_t = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵloadQuery"]()) && (ctx._container_el = _t.first);
      }
    },
    features: [_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵInheritDefinitionFeature"]],
    decls: 45,
    vars: 31,
    consts: [["container", ""], [1, "relative", "flex", "items-center", "justify-center", "p-4"], [1, "text-center"], ["icon", "", "matRipple", "", "mat-dialog-close", "", 1, "absolute", "top-1/2", "left-1", "-translate-y-1/2"], [1, "flex", "flex-col", "h-[calc(100vh-7rem)]", "sm:h-[65vh]", "overflow-hidden"], [1, "w-full", "flex", "flex-col", "sm:flex-row", "space-y-2", "sm:space-y-0", "sm:space-x-2", "p-2"], [1, "max-h-[3.25rem]", "flex-1", 3, "ngModelChange", "ngModel"], [1, "grid", "flex-1", "h-1/2", "w-full", "border-t", "border-base-200", "relative", "overflow-hidden", "divide-x", "divide-y", "divide-base-200", "max-w-[100vw]", "sm:max-w-[80vw]"], ["times", "", 1, "col-start-2", "h-10", "flex", "overflow-hidden", "border-l", "border-base-200"], ["hour", "", "class", "relative border-r border-base-200 h-10 min-w-[5rem] p-2", 3, "left", 4, "ngFor", "ngForOf"], ["users", "", 1, "row-start-2", "w-24", "overflow-hidden"], ["host", "", 1, "flex", "flex-col", "items-center", "justify-center", "h-32", "w-24", "relative", "border-b", "border-base-200", "py-2"], [1, "text-2xl", 3, "user"], [1, "text-xs", "break-words", "overflow-hidden", "max-w-full", "px-2", "text-center"], ["person", "", "class", "flex flex-col items-center justify-center h-32 w-24 relative border-b border-base-200 py-2", 3, "top", 4, "ngFor", "ngForOf"], ["blocks", "", 1, "relative", "row-start-2", "overflow-hidden"], ["fixed", "", 1, "absolute", "inset-0", "flex", "overflow-hidden"], ["divider", "", "class", "relative h-full min-w-[5rem] border-l border-base-200", 3, "left", 4, "ngFor", "ngForOf"], ["selection", "", 1, "absolute", "inset-y-0", "!border-x-2", "!border-info", "z-20", "cursor-grab", "active:cursor-grabbing", 3, "mousedown", "touchstart"], [1, "absolute", "inset-0", "bg-info", "opacity-30"], ["handle", "", 1, "absolute", "top-1/2", "-left-px", "-translate-x-1/2", "-translate-y-1/2", "h-3", "w-3", "rounded-full", "bg-info"], ["handle", "", 1, "absolute", "top-1/2", "-right-px", "translate-x-1/2", "-translate-y-1/2", "h-3", "w-3", "rounded-full", "bg-info", "hover:h-4", "hover:w-4", "active:bg-secondary", 3, "mousedown", "touchstart"], [1, "bg-base-100", "border", "border-base-200", "p-2", "absolute", "top-2", "left-1/2", "-translate-x-1/2", "shadow", "text-xs", "whitespace-nowrap", "rounded"], ["class", "bg-base-100 border border-base-200 p-2 absolute top-12 left-1/2 -translate-x-1/2 shadow text-xs whitespace-nowrap rounded", 4, "ngIf"], ["scroll", "", 1, "absolute", "inset-0", "overflow-auto", 3, "scroll"], [1, "pointer-events-none", 3, "user", "date", "availability"], ["class", "pointer-events-none", 3, "user", "date", "availability", 4, "ngFor", "ngForOf"], [1, "flex", "items-center", "justify-between", "p-2", "border-t", "border-base-200", "w-full"], ["btn", "", "matRipple", "", 1, "clear", "text-secondary", 3, "mat-dialog-close"], [1, "flex", "items-center"], [1, "text-xl"], [1, "mr-1", "underline"], ["hour", "", 1, "relative", "border-r", "border-base-200", "h-10", "min-w-[5rem]", "p-2"], ["person", "", 1, "flex", "flex-col", "items-center", "justify-center", "h-32", "w-24", "relative", "border-b", "border-base-200", "py-2"], [1, "text-xs", "break-words", "max-w-full", "px-2", "text-center"], ["icon", "", 1, "absolute", "-top-1", "-left-1", 3, "click"], ["divider", "", 1, "relative", "h-full", "min-w-[5rem]", "border-l", "border-base-200"], [1, "bg-base-100", "border", "border-base-200", "p-2", "absolute", "top-12", "left-1/2", "-translate-x-1/2", "shadow", "text-xs", "whitespace-nowrap", "rounded"]],
    template: function FindAvailabilityModalComponent_Template(rf, ctx) {
      if (rf & 1) {
        const _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵgetCurrentView"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](0, "header", 1)(1, "h2", 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](2, "Find Availability");
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](3, "button", 3)(4, "app-icon");
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](5, "close");
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]()()();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](6, "main", 4)(7, "div", 5)(8, "a-date-field", 6);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtwoWayListener"]("ngModelChange", function FindAvailabilityModalComponent_Template_a_date_field_ngModelChange_8_listener($event) {
          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵrestoreView"](_r1);
          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtwoWayBindingSet"](ctx.date, $event) || (ctx.date = $event);
          return _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵresetView"]($event);
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵlistener"]("ngModelChange", function FindAvailabilityModalComponent_Template_a_date_field_ngModelChange_8_listener() {
          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵrestoreView"](_r1);
          return _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵresetView"](ctx.on_change.next(ctx.on_change.getValue() + 1));
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](9, "a-user-search-field", 6);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtwoWayListener"]("ngModelChange", function FindAvailabilityModalComponent_Template_a_user_search_field_ngModelChange_9_listener($event) {
          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵrestoreView"](_r1);
          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtwoWayBindingSet"](ctx.user, $event) || (ctx.user = $event);
          return _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵresetView"]($event);
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵlistener"]("ngModelChange", function FindAvailabilityModalComponent_Template_a_user_search_field_ngModelChange_9_listener($event) {
          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵrestoreView"](_r1);
          return _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵresetView"](ctx.addUser($event));
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](10, "div", 7)(11, "div", 8);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](12, FindAvailabilityModalComponent_div_12_Template, 2, 5, "div", 9);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](13, "div", 10)(14, "div", 11);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelement"](15, "a-user-avatar", 12);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](16, "div", 13);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](17);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](18, FindAvailabilityModalComponent_div_18_Template, 7, 4, "div", 14);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipe"](19, "async");
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](20, "div", 15)(21, "div", 16);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](22, FindAvailabilityModalComponent_div_22_Template, 1, 3, "div", 17);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](23, "div", 18);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵlistener"]("mousedown", function FindAvailabilityModalComponent_Template_div_mousedown_23_listener($event) {
          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵrestoreView"](_r1);
          return _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵresetView"](ctx.startMovePeriod($event));
        })("touchstart", function FindAvailabilityModalComponent_Template_div_touchstart_23_listener($event) {
          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵrestoreView"](_r1);
          return _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵresetView"](ctx.startMovePeriod($event));
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelement"](24, "div", 19)(25, "div", 20);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](26, "div", 21);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵlistener"]("mousedown", function FindAvailabilityModalComponent_Template_div_mousedown_26_listener($event) {
          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵrestoreView"](_r1);
          return _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵresetView"](ctx.startMoveDuration($event));
        })("touchstart", function FindAvailabilityModalComponent_Template_div_touchstart_26_listener($event) {
          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵrestoreView"](_r1);
          return _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵresetView"](ctx.startMoveDuration($event));
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](27, "div", 22);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](28);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipe"](29, "duration");
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](30, FindAvailabilityModalComponent_div_30_Template, 3, 4, "div", 23);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]()();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](31, "div", 24, 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵlistener"]("scroll", function FindAvailabilityModalComponent_Template_div_scroll_31_listener() {
          _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵrestoreView"](_r1);
          return _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵresetView"](ctx.onScroll());
        });
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelement"](33, "user-availability-list", 25);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipe"](34, "async");
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipe"](35, "async");
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtemplate"](36, FindAvailabilityModalComponent_user_availability_list_36_Template, 3, 8, "user-availability-list", 26);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipe"](37, "async");
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]()()()();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](38, "footer", 27)(39, "button", 28)(40, "div", 29)(41, "app-icon", 30);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](42, "arrow_back");
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementStart"](43, "div", 31);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtext"](44, "Back to form");
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵelementEnd"]()()()();
      }
      if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](8);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtwoWayProperty"]("ngModel", ctx.date);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtwoWayProperty"]("ngModel", ctx.user);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngForOf", ctx.hours);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵstyleProp"]("top", -ctx.offset_y + "px");
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("user", ctx.host);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtextInterpolate1"](" ", ctx.host.name || ctx.host.email, " ");
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngForOf", _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipeBind1"](19, 20, ctx.users));
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](4);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngForOf", ctx.hours);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵstyleProp"]("left", "calc(" + ctx.selection_left + "rem - " + ctx.offset_x + "px)")("width", ctx.selection_width + "rem");
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](5);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipeBind1"](29, 22, ctx.duration), " ");
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngIf", ctx.move_time);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("user", ctx.host)("date", ctx.date)("availability", _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipeBind1"](34, 24, ctx.availability) ? _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipeBind1"](35, 26, ctx.availability)[ctx.host.email] : _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpureFunction0"](30, _c1));
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("ngForOf", _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵpipeBind1"](37, 28, ctx.users));
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵadvance"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵproperty"]("mat-dialog-close", true);
      }
    },
    styles: [".grid[_ngcontent-%COMP%] {\n                grid-template-columns: 6rem 1fr;\n                grid-template-rows: 2.5rem minmax(0, 1fr);\n            }\n            [disabled='true'][_ngcontent-%COMP%], \n   [disabled='true'][_ngcontent-%COMP%]   [header][_ngcontent-%COMP%] {\n                background: var(--b3) !important;\n                pointer-events: none;\n            }\n            [disabled='true'][_ngcontent-%COMP%]    > *[_ngcontent-%COMP%] {\n                opacity: 0.3;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZpbmQtYXZhaWxhYmlsaXR5LW1vZGFsLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1lBQ1k7Z0JBQ0ksK0JBQStCO2dCQUMvQix5Q0FBeUM7WUFDN0M7WUFDQTs7Z0JBRUksZ0NBQWdDO2dCQUNoQyxvQkFBb0I7WUFDeEI7WUFDQTtnQkFDSSxZQUFZO1lBQ2hCIiwiZmlsZSI6ImZpbmQtYXZhaWxhYmlsaXR5LW1vZGFsLmNvbXBvbmVudC50cyIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgLmdyaWQge1xuICAgICAgICAgICAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogNnJlbSAxZnI7XG4gICAgICAgICAgICAgICAgZ3JpZC10ZW1wbGF0ZS1yb3dzOiAyLjVyZW0gbWlubWF4KDAsIDFmcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBbZGlzYWJsZWQ9J3RydWUnXSxcbiAgICAgICAgICAgIFtkaXNhYmxlZD0ndHJ1ZSddIFtoZWFkZXJdIHtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iMykgIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFtkaXNhYmxlZD0ndHJ1ZSddID4gKiB7XG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMC4zO1xuICAgICAgICAgICAgfVxuICAgICAgICAiXX0= */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvdXNlcnMvc3JjL2xpYi9maW5kLWF2YWlsYWJpbGl0eS1tb2RhbC9maW5kLWF2YWlsYWJpbGl0eS1tb2RhbC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLCtCQUErQjtnQkFDL0IseUNBQXlDO1lBQzdDO1lBQ0E7O2dCQUVJLGdDQUFnQztnQkFDaEMsb0JBQW9CO1lBQ3hCO1lBQ0E7Z0JBQ0ksWUFBWTtZQUNoQjs7QUFFWix3N0JBQXc3QiIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgLmdyaWQge1xuICAgICAgICAgICAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogNnJlbSAxZnI7XG4gICAgICAgICAgICAgICAgZ3JpZC10ZW1wbGF0ZS1yb3dzOiAyLjVyZW0gbWlubWF4KDAsIDFmcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBbZGlzYWJsZWQ9J3RydWUnXSxcbiAgICAgICAgICAgIFtkaXNhYmxlZD0ndHJ1ZSddIFtoZWFkZXJdIHtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iMykgIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFtkaXNhYmxlZD0ndHJ1ZSddID4gKiB7XG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMC4zO1xuICAgICAgICAgICAgfVxuICAgICAgICAiXSwic291cmNlUm9vdCI6IiJ9 */"]
  });
}

/***/ }),

/***/ 94060:
/*!***********************************************************************************!*\
  !*** ./libs/users/src/lib/find-availability-modal/user-availability.component.ts ***!
  \***********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   UserAvailabilityComponent: () => (/* binding */ UserAvailabilityComponent)
/* harmony export */ });
/* harmony import */ var _user_class__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../user.class */ 93693);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/common */ 60316);



function UserAvailabilityComponent_div_1_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div", 2)(1, "div", 3);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpipe"](3, "date");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpipe"](4, "date");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    const event_r1 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵstyleProp"]("left", event_r1.start + "%")("width", event_r1.size + "%");
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtextInterpolate2"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpipeBind2"](3, 6, event_r1.date, "shortTime"), " - ", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵpipeBind2"](4, 9, event_r1.date.valueOf() + event_r1.duration * 60 * 1000, "shortTime"), " ");
  }
}
class UserAvailabilityComponent {
  constructor() {
    this.availability = [];
    this.date = Date.now();
  }
  static #_ = this.ɵfac = function UserAvailabilityComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || UserAvailabilityComponent)();
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdefineComponent"]({
    type: UserAvailabilityComponent,
    selectors: [["user-availability-list"]],
    inputs: {
      user: "user",
      availability: "availability",
      date: "date"
    },
    decls: 2,
    vars: 1,
    consts: [[1, "relative", "w-[120rem]", "h-32", "inset-y-0", "border-b", "border-base-200"], ["event", "", "class", "absolute inset-y-0 bg-error text-white p-2 overflow-hidden border border-red-700 rounded", 3, "left", "width", 4, "ngFor", "ngForOf"], ["event", "", 1, "absolute", "inset-y-0", "bg-error", "text-white", "p-2", "overflow-hidden", "border", "border-red-700", "rounded"], [1, "text-xs", "max-w-full"]],
    template: function UserAvailabilityComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementStart"](0, "div", 0);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵtemplate"](1, UserAvailabilityComponent_div_1_Template, 5, 12, "div", 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵelementEnd"]();
      }
      if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵproperty"]("ngForOf", ctx.availability);
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_2__.NgForOf, _angular_common__WEBPACK_IMPORTED_MODULE_2__.DatePipe],
    styles: ["[_nghost-%COMP%] {\n                display: block;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXItYXZhaWxhYmlsaXR5LmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1lBQ1k7Z0JBQ0ksY0FBYztZQUNsQiIsImZpbGUiOiJ1c2VyLWF2YWlsYWJpbGl0eS5jb21wb25lbnQudHMiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIDpob3N0IHtcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl19 */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvdXNlcnMvc3JjL2xpYi9maW5kLWF2YWlsYWJpbGl0eS1tb2RhbC91c2VyLWF2YWlsYWJpbGl0eS5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLGNBQWM7WUFDbEI7O0FBRVosNFhBQTRYIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICA6aG9zdCB7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICAgICAgICB9XG4gICAgICAgICJdLCJzb3VyY2VSb290IjoiIn0= */"]
  });
}

/***/ }),

/***/ 86039:
/*!*****************************************!*\
  !*** ./libs/users/src/lib/guests.fn.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   listGuestMeetings: () => (/* binding */ listGuestMeetings),
/* harmony export */   queryGuests: () => (/* binding */ queryGuests),
/* harmony export */   removeGuest: () => (/* binding */ removeGuest),
/* harmony export */   searchGuests: () => (/* binding */ searchGuests),
/* harmony export */   showGuest: () => (/* binding */ showGuest),
/* harmony export */   updateGuest: () => (/* binding */ updateGuest)
/* harmony export */ });
/* harmony import */ var _placeos_ts_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/ts-client */ 35713);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! rxjs/operators */ 35443);
/* harmony import */ var _events_src_lib_event_class__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../events/src/lib/event.class */ 6727);
/* harmony import */ var libs_common_src_lib_api__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! libs/common/src/lib/api */ 38385);
/* harmony import */ var _user_class__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./user.class */ 93693);





const GUEST_ENDPOINT = '/api/staff/v1/guests';
/**
 * Search guests
 * @param q Search string for filtering guests
 */
function searchGuests(q) {
  const query = (0,libs_common_src_lib_api__WEBPACK_IMPORTED_MODULE_2__.toQueryString)({
    q
  });
  return (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_0__.get)(`${GUEST_ENDPOINT}${q ? '?' + query : ''}`).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.map)(list => list.map(item => new _user_class__WEBPACK_IMPORTED_MODULE_3__.GuestUser(item))));
}
/**
 * List guests
 * @param q Parameters to pass to the API request
 */
function queryGuests(q) {
  const query = (0,libs_common_src_lib_api__WEBPACK_IMPORTED_MODULE_2__.toQueryString)({
    ...q
  });
  return (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_0__.get)(`${GUEST_ENDPOINT}${query ? '?' + query : ''}`).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.map)(list => list.map(item => new _user_class__WEBPACK_IMPORTED_MODULE_3__.GuestUser(item))));
}
/**
 * Get guest details
 * @param id ID of the guest
 */
function showGuest(id) {
  return (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_0__.get)(`${GUEST_ENDPOINT}/${encodeURIComponent(id)}`).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.map)(item => new _user_class__WEBPACK_IMPORTED_MODULE_3__.GuestUser(item)));
}
/**
 * Update guest metadata
 * @param id ID of the guest
 * @param data New metadata state
 */
function updateGuest(id, data) {
  return (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_0__.patch)(`${GUEST_ENDPOINT}/${encodeURIComponent(id)}`, data).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.map)(item => new _user_class__WEBPACK_IMPORTED_MODULE_3__.GuestUser(item)));
}
/**
 * Remove a guest
 * @param id ID of the guest to remove
 */
function removeGuest(id) {
  return (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_0__.del)(`${GUEST_ENDPOINT}/${encodeURIComponent(id)}`, {
    response_type: 'void'
  });
}
/**
 * List upcoming meetings for a guest
 * @param id ID of the guest
 */
function listGuestMeetings(id) {
  return (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_0__.get)(`${GUEST_ENDPOINT}/${encodeURIComponent(id)}/meetings`).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.map)(list => list.map(item => new _events_src_lib_event_class__WEBPACK_IMPORTED_MODULE_1__.CalendarEvent(item))));
}

/***/ }),

/***/ 74529:
/*!**********************************************!*\
  !*** ./libs/users/src/lib/location.class.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   MapLocation: () => (/* binding */ MapLocation)
/* harmony export */ });
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! date-fns */ 99908);

class MapLocation {
  constructor(_data = {}) {
    this.type = _data.type || _data.location || 'other';
    this.position = _data.position || _data.map_id || _data.asset_id || {
      x: _data.x / _data.map_width || 0,
      y: _data.y / _data.map_height || 0
    };
    this.variance = _data.variance || 0;
    this.last_seen = _data.last_seen || (0,date_fns__WEBPACK_IMPORTED_MODULE_0__.getUnixTime)(new Date());
    this.level = _data.level;
    this.building = _data.building;
    this.at_location = !!_data.at_location;
    this.coordinates_from = _data.coordinates_from || 'top-left';
  }
}

/***/ }),

/***/ 11543:
/*!********************************************************!*\
  !*** ./libs/users/src/lib/new-user-modal.component.ts ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   NewUserModalComponent: () => (/* binding */ NewUserModalComponent)
/* harmony export */ });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_material_dialog__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @angular/material/dialog */ 12587);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var _user_class__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./user.class */ 93693);
/* harmony import */ var _user_utilities__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./user.utilities */ 24129);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../components/src/lib/icon.component */ 69434);
/* harmony import */ var _angular_material_core__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @angular/material/core */ 74646);
/* harmony import */ var _angular_material_progress_spinner__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @angular/material/progress-spinner */ 41134);
/* harmony import */ var _user_form_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./user-form.component */ 7111);












function NewUserModalComponent_main_7_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "main", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelement"](1, "user-form", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("form", ctx_r0.form);
  }
}
function NewUserModalComponent_footer_8_Template(rf, ctx) {
  if (rf & 1) {
    const _r2 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "footer", 8)(1, "button", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](2, " Cancel ");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](3, "button", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵlistener"]("click", function NewUserModalComponent_footer_8_Template_button_click_3_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵrestoreView"](_r2);
      const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵresetView"](ctx_r0.saveChanges());
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](4, "Save");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]()();
  }
}
function NewUserModalComponent_ng_template_9_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "main", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelement"](1, "mat-spinner", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](2, "p");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](3, "Saving attendee...");
    _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]()();
  }
}
class NewUserModalComponent extends _placeos_common__WEBPACK_IMPORTED_MODULE_0__.AsyncHandler {
  constructor(_data) {
    super();
    this._data = _data;
    /** Emitter for user action on the modal */
    this.event = new _angular_core__WEBPACK_IMPORTED_MODULE_5__.EventEmitter();
    /** Form fields for the new user */
    this.form = (0,_user_utilities__WEBPACK_IMPORTED_MODULE_2__.generateUserForm)(this.user || new _user_class__WEBPACK_IMPORTED_MODULE_1__.User());
    /** Whether user details are being saved */
    this.loading = false;
    this.user = this._data.user || {};
    this.form = (0,_user_utilities__WEBPACK_IMPORTED_MODULE_2__.generateUserForm)(this.user);
  }
  ngOnInit() {}
  saveChanges() {
    if (!this.form) return;
    this.form.markAllAsTouched();
    if (this.form.valid) {
      const new_user = new _user_class__WEBPACK_IMPORTED_MODULE_1__.User({
        ...this.form.value,
        is_external: true
      });
      this.event.emit({
        reason: 'done',
        metadata: new_user
      });
    }
  }
  static #_ = this.ɵfac = function NewUserModalComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || NewUserModalComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵdirectiveInject"](_angular_material_dialog__WEBPACK_IMPORTED_MODULE_6__.MAT_DIALOG_DATA));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵdefineComponent"]({
    type: NewUserModalComponent,
    selectors: [["new-user-modal"]],
    outputs: {
      event: "event"
    },
    features: [_angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵInheritDefinitionFeature"]],
    decls: 11,
    vars: 4,
    consts: [["load_state", ""], ["mat-dialog-title", "", 1, "heading"], [1, "flex-1"], ["icon", "", "mat-dialog-close", ""], ["class", "flex flex-col items-center w-full p-2", 4, "ngIf", "ngIfElse"], ["class", "flex items-center justify-center w-full p-2 border-t border-base-200 space-x-2", 4, "ngIf"], [1, "flex", "flex-col", "items-center", "w-full", "p-2"], [3, "form"], [1, "flex", "items-center", "justify-center", "w-full", "p-2", "border-t", "border-base-200", "space-x-2"], ["btn", "", "matRipple", "", "mat-dialog-close", "", 1, "inverse"], ["btn", "", "matRipple", "", 3, "click"], [1, "flex", "flex-col", "items-center", "w-full", "p-2", "space-y-2"], ["diameter", "32"]],
    template: function NewUserModalComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](0, "header")(1, "div", 1);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelement"](3, "div", 2);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementStart"](4, "button", 3)(5, "app-icon");
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtext"](6, "close");
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵelementEnd"]()()();
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplate"](7, NewUserModalComponent_main_7_Template, 2, 1, "main", 4)(8, NewUserModalComponent_footer_8_Template, 5, 0, "footer", 5)(9, NewUserModalComponent_ng_template_9_Template, 4, 0, "ng-template", null, 0, _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtemplateRefExtractor"]);
      }
      if (rf & 2) {
        const load_state_r3 = _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵreference"](10);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](2);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵtextInterpolate1"](" ", (ctx.user == null ? null : ctx.user.id) ? "Edit" : "Add", " External Attendee ");
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"](5);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngIf", !ctx.loading)("ngIfElse", load_state_r3);
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_5__["ɵɵproperty"]("ngIf", !ctx.loading);
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_7__.NgIf, _angular_material_dialog__WEBPACK_IMPORTED_MODULE_6__.MatDialogClose, _angular_material_dialog__WEBPACK_IMPORTED_MODULE_6__.MatDialogTitle, _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_3__.IconComponent, _angular_material_core__WEBPACK_IMPORTED_MODULE_8__.MatRipple, _angular_material_progress_spinner__WEBPACK_IMPORTED_MODULE_9__.MatProgressSpinner, _user_form_component__WEBPACK_IMPORTED_MODULE_4__.UserFormComponent],
    styles: ["main[_ngcontent-%COMP%] {\n                min-height: 20em !important;\n                width: 100%;\n            }\n\n            footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\n                min-width: 8em;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5ldy11c2VyLW1vZGFsLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1lBQ1k7Z0JBQ0ksMkJBQTJCO2dCQUMzQixXQUFXO1lBQ2Y7O1lBRUE7Z0JBQ0ksY0FBYztZQUNsQiIsImZpbGUiOiJuZXctdXNlci1tb2RhbC5jb21wb25lbnQudHMiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIG1haW4ge1xuICAgICAgICAgICAgICAgIG1pbi1oZWlnaHQ6IDIwZW0gIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZm9vdGVyIGJ1dHRvbiB7XG4gICAgICAgICAgICAgICAgbWluLXdpZHRoOiA4ZW07XG4gICAgICAgICAgICB9XG4gICAgICAgICJdfQ== */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvdXNlcnMvc3JjL2xpYi9uZXctdXNlci1tb2RhbC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLDJCQUEyQjtnQkFDM0IsV0FBVztZQUNmOztZQUVBO2dCQUNJLGNBQWM7WUFDbEI7O0FBRVosd2tCQUF3a0IiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIG1haW4ge1xuICAgICAgICAgICAgICAgIG1pbi1oZWlnaHQ6IDIwZW0gIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZm9vdGVyIGJ1dHRvbiB7XG4gICAgICAgICAgICAgICAgbWluLXdpZHRoOiA4ZW07XG4gICAgICAgICAgICB9XG4gICAgICAgICJdLCJzb3VyY2VSb290IjoiIn0= */"]
  });
}

/***/ }),

/***/ 2372:
/*!****************************************!*\
  !*** ./libs/users/src/lib/staff.fn.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   locateStaff: () => (/* binding */ locateStaff),
/* harmony export */   searchStaff: () => (/* binding */ searchStaff),
/* harmony export */   showStaff: () => (/* binding */ showStaff)
/* harmony export */ });
/* harmony import */ var _placeos_ts_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @placeos/ts-client */ 35713);
/* harmony import */ var libs_common_src_lib_api__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! libs/common/src/lib/api */ 38385);
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! rxjs/operators */ 35443);
/* harmony import */ var _user_class__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./user.class */ 93693);




const STAFF_ENDPOINT = '/api/staff/v1/people';
/**
 * Search staff members
 * @param q Search string for filtering staff
 */
function searchStaff(q) {
  const query = (0,libs_common_src_lib_api__WEBPACK_IMPORTED_MODULE_1__.toQueryString)({
    q,
    fields: ['id', 'name', 'email', 'username', 'organisation', 'department'].join(',')
  });
  return (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_0__.get)(`${STAFF_ENDPOINT}${q ? '?' + query : ''}`).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.map)(list => list.map(item => new _user_class__WEBPACK_IMPORTED_MODULE_2__.StaffUser(item))));
}
/**
 * Get user details
 * @param id User ID or email
 */
function showStaff(id) {
  return (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_0__.get)(`${STAFF_ENDPOINT}/${encodeURIComponent(id)}`).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.map)(item => new _user_class__WEBPACK_IMPORTED_MODULE_2__.StaffUser(item)));
}
/**
 * Get user with their location details
 * @param email User email
 */
function locateStaff(email) {
  return (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_0__.get)(`${STAFF_ENDPOINT}/${email}`).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.map)(item => new _user_class__WEBPACK_IMPORTED_MODULE_2__.StaffUser(item)));
}

/***/ }),

/***/ 7111:
/*!***************************************************!*\
  !*** ./libs/users/src/lib/user-form.component.ts ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   UserFormComponent: () => (/* binding */ UserFormComponent)
/* harmony export */ });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/forms */ 34456);
/* harmony import */ var _angular_material_form_field__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/material/form-field */ 24950);
/* harmony import */ var _angular_material_input__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/material/input */ 95541);
/* harmony import */ var _angular_material_checkbox__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/material/checkbox */ 97024);
/* harmony import */ var _ngx_translate_core__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @ngx-translate/core */ 597);








function UserFormComponent_form_0_div_1_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 3)(1, "label", 4);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](2, " Name");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](3, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](4, "*");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](5, ": ");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](6, "mat-form-field", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](7, "input", 6);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](8, "mat-error");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](9, "Name is required");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()()();
  }
  if (rf & 2) {
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵclassProp"]("error", ctx_r0.hasError("name"));
  }
}
function UserFormComponent_form_0_div_2_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 3)(1, "label", 7);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](2, " Email");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](3, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](4, "*");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](5, ": ");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](6, "mat-form-field", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](7, "input", 8);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](8, "mat-error");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](9, "A valid email is required");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()()();
  }
  if (rf & 2) {
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵclassProp"]("error", ctx_r0.hasError("email"));
  }
}
function UserFormComponent_form_0_div_3_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 3)(1, "label", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](3, "translate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](4, "span");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](5, "*");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](6, ": ");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](7, "mat-form-field", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](8, "input", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](9, "mat-error");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](10);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipe"](11, "translate");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()()();
  }
  if (rf & 2) {
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵclassProp"]("error", ctx_r0.hasError("organisation"));
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](3, 4, "COMMON.ORGANISATION"), "");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"](8);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵpipeBind1"](11, 6, "COMMON.ORGANISATION"), " is required ");
  }
}
function UserFormComponent_form_0_div_4_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 3)(1, "label", 11);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](2, " Phone: ");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](3, "mat-form-field", 5);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelement"](4, "input", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](5, "mat-error");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](6, "Phone format is invalid");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()()();
  }
  if (rf & 2) {
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵclassProp"]("error", ctx_r0.hasError("phone"));
  }
}
function UserFormComponent_form_0_div_5_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 3)(1, "mat-checkbox", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](2, " Assistance required ");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()();
  }
}
function UserFormComponent_form_0_div_6_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "div", 3)(1, "mat-checkbox", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtext"](2, " Visit expected ");
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]()();
  }
}
function UserFormComponent_form_0_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementStart"](0, "form", 1);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](1, UserFormComponent_form_0_div_1_Template, 10, 2, "div", 2)(2, UserFormComponent_form_0_div_2_Template, 10, 2, "div", 2)(3, UserFormComponent_form_0_div_3_Template, 12, 8, "div", 2)(4, UserFormComponent_form_0_div_4_Template, 7, 2, "div", 2)(5, UserFormComponent_form_0_div_5_Template, 3, 0, "div", 2)(6, UserFormComponent_form_0_div_6_Template, 3, 0, "div", 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const ctx_r0 = _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("formGroup", ctx_r0.form);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r0.form.controls.name);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r0.form.controls.email);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r0.form.controls.organisation);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r0.form.controls.phone);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r0.form.controls.assistance_required);
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx_r0.form.controls.visit_expected);
  }
}
class UserFormComponent {
  hasError(name) {
    const {
      invalid,
      touched
    } = this.form?.controls[name] || {};
    return invalid && touched;
  }
  static #_ = this.ɵfac = function UserFormComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || UserFormComponent)();
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵdefineComponent"]({
    type: UserFormComponent,
    selectors: [["user-form"]],
    inputs: {
      form: "form"
    },
    decls: 1,
    vars: 1,
    consts: [["user-form", "", "class", "w-full", 3, "formGroup", 4, "ngIf"], ["user-form", "", 1, "w-full", 3, "formGroup"], ["class", "flex flex-col w-full", 4, "ngIf"], [1, "flex", "flex-col", "w-full"], ["for", "name"], ["appearance", "outline"], ["matInput", "", "name", "name", "placeholder", "Name", "formControlName", "name"], ["for", "email"], ["matInput", "", "name", "email", "placeholder", "Email Address", "formControlName", "email"], ["for", "org"], ["matInput", "", "name", "org", "placeholder", "e.g. Conteso", "formControlName", "organisation"], ["for", "phone"], ["matInput", "", "name", "phone", "type", "tel", "placeholder", "Phone", "formControlName", "phone"], ["name", "assistance-required", "color", "primary", "formControlName", "assistance_required"], ["name", "visit-expected", "color", "primary", "formControlName", "visit_expected"]],
    template: function UserFormComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵtemplate"](0, UserFormComponent_form_0_Template, 7, 7, "form", 0);
      }
      if (rf & 2) {
        _angular_core__WEBPACK_IMPORTED_MODULE_0__["ɵɵproperty"]("ngIf", ctx.form);
      }
    },
    dependencies: [_angular_common__WEBPACK_IMPORTED_MODULE_1__.NgIf, _angular_forms__WEBPACK_IMPORTED_MODULE_2__["ɵNgNoValidate"], _angular_forms__WEBPACK_IMPORTED_MODULE_2__.DefaultValueAccessor, _angular_forms__WEBPACK_IMPORTED_MODULE_2__.NgControlStatus, _angular_forms__WEBPACK_IMPORTED_MODULE_2__.NgControlStatusGroup, _angular_forms__WEBPACK_IMPORTED_MODULE_2__.FormGroupDirective, _angular_forms__WEBPACK_IMPORTED_MODULE_2__.FormControlName, _angular_material_form_field__WEBPACK_IMPORTED_MODULE_3__.MatFormField, _angular_material_form_field__WEBPACK_IMPORTED_MODULE_3__.MatError, _angular_material_input__WEBPACK_IMPORTED_MODULE_4__.MatInput, _angular_material_checkbox__WEBPACK_IMPORTED_MODULE_5__.MatCheckbox, _ngx_translate_core__WEBPACK_IMPORTED_MODULE_6__.TranslatePipe],
    styles: ["[_nghost-%COMP%], \n   mat-form-field[_ngcontent-%COMP%] {\n                width: 100%;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXItZm9ybS5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZOztnQkFFSSxXQUFXO1lBQ2YiLCJmaWxlIjoidXNlci1mb3JtLmNvbXBvbmVudC50cyIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgOmhvc3QsXG4gICAgICAgICAgICBtYXQtZm9ybS1maWVsZCB7XG4gICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICB9XG4gICAgICAgICJdfQ== */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvdXNlcnMvc3JjL2xpYi91c2VyLWZvcm0uY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTs7Z0JBRUksV0FBVztZQUNmOztBQUVaLDRZQUE0WSIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgOmhvc3QsXG4gICAgICAgICAgICBtYXQtZm9ybS1maWVsZCB7XG4gICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICB9XG4gICAgICAgICJdLCJzb3VyY2VSb290IjoiIn0= */"]
  });
}

/***/ }),

/***/ 93693:
/*!******************************************!*\
  !*** ./libs/users/src/lib/user.class.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   GuestUser: () => (/* binding */ GuestUser),
/* harmony export */   StaffUser: () => (/* binding */ StaffUser),
/* harmony export */   User: () => (/* binding */ User)
/* harmony export */ });
/* harmony import */ var libs_common_src_lib_general__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! libs/common/src/lib/general */ 64217);
/* harmony import */ var _user_utilities__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./user.utilities */ 24129);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! date-fns */ 45726);



class User {
  constructor(data = {}) {
    this.id = data.id || data.email || `USER::${(0,libs_common_src_lib_general__WEBPACK_IMPORTED_MODULE_0__.randomString)(8)}`;
    this.name = data.name || '';
    this.email = data.email || '';
    this.first_name = data.first_name || data.name || '';
    this.last_name = data.last_name || '';
    this.phone = data.phone || '';
    this.organisation = data.organisation || '';
    this.notes = data.notes || '';
    this.photo = data.photo || '';
    this.username = data.username || '';
    this.organizer = !!data.organizer;
    this.checked_in = !!data.checked_in;
    this.required = data.required ?? true;
    this.resource = data.resource ?? false;
    this.response_status = data.response_status || '';
    const groups = data.groups || [];
    this.department = data.department ?? '';
    if (data.sys_admin) groups.push('placeos_admin');
    if (data.support) groups.push('placeos_support');
    if (data.department) groups.push(data.department);
    this.groups = groups;
    this.extension_data = data.extension_data || {};
    this.extension_data.assistance_required = data.assistance_required || this.extension_data.assistance_required;
    this.is_external = !this.email?.endsWith(`${_user_utilities__WEBPACK_IMPORTED_MODULE_1__.USER_DOMAIN}`);
    this.visit_expected = data.visit_expected ?? true;
    this.assistance_required = !!this.extension_data?.assistance_required;
    for (const key in data) {
      if (!(key in this)) this.extension_data[key] = data[key];
    }
  }
}
class GuestUser extends User {
  constructor(data = {}) {
    super(data);
    this.preferred_beverage = data.preferred_beverage || '';
    this.accepted_terms_conditions = data.accepted_terms_conditions || false;
    this.attachments = data.extension_data?.attachments || data.attachments || [];
    this.status = data.booking?.approved ? 'approved' : data.booking?.rejected ? 'declined' : data.extension_data?.status || data.status || 'pending';
    this.booking = data.booking;
    this.extension_data.event = data.event_metadata;
  }
}
class StaffUser extends User {
  get location() {
    return this.location_time(Date.now());
  }
  work_preference(datetime) {
    if (!datetime) datetime = Date.now();
    const date = new Date(datetime);
    const day = date.getDay();
    const date_string = (0,date_fns__WEBPACK_IMPORTED_MODULE_2__.format)(date, 'yyyy-MM-dd');
    if (this.work_overrides[date_string]?.blocks?.length) {
      for (const block of this.work_overrides[date_string].blocks) {
        const start = block.start_time;
        const end = block.end_time;
        if (start <= date.getHours() + date.getMinutes() / 60 && end >= date.getHours() + date.getMinutes() / 60) {
          return block;
        }
      }
    }
    for (const pref of this.work_preferences) {
      if (pref.day_of_week === day && pref.blocks?.length) {
        for (const block of pref.blocks) {
          if (block.start_time <= date.getHours() + date.getMinutes() / 60 && block.end_time >= date.getHours() + date.getMinutes() / 60) {
            return block;
          }
        }
      }
    }
  }
  location_time(datetime) {
    return this.work_preference(datetime)?.location || 'wfo';
  }
  get location_name() {
    return this.location_name_time(Date.now());
  }
  location_name_time(datetime) {
    if (!datetime) datetime = Date.now();
    const location = this.location_time(datetime);
    const in_hours = this.in_hours_time(datetime);
    if (location.includes('w') && !in_hours) {
      return 'Outside working hours';
    }
    switch (location) {
      case 'wfh':
        return 'Working from Home';
      case 'wfo':
        return 'Working from Office';
      case 'ooo':
        return 'Out of Office';
      case 'aol':
        return 'Away on Leave';
      default:
        return 'Unknown';
    }
  }
  get in_hours() {
    return this.in_hours_time(Date.now());
  }
  location_icon(datetime) {
    if (!datetime) datetime = Date.now();
    const location = this.location_time(datetime);
    const in_hours = this.in_hours_time(datetime);
    if (location === 'wfh' && in_hours) return 'home';
    if (location === 'wfo' && in_hours) return 'business';
    return 'event_busy';
  }
  in_hours_time(datetime) {
    const block = this.work_preference(datetime);
    return !!block;
  }
  constructor(data = {}) {
    super(data);
    this.card_number = data.card_number || '';
    this.staff_id = data.staff_id || '';
    this.is_logged_in = !!data.is_logged_in;
    this.work_preferences = data.work_preferences || [];
    this.work_overrides = data.work_overrides || {};
  }
}

/***/ }),

/***/ 89577:
/*!*****************************************!*\
  !*** ./libs/users/src/lib/user.pipe.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   UserPipe: () => (/* binding */ UserPipe)
/* harmony export */ });
/* harmony import */ var _home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 89204);
/* harmony import */ var _guests_fn__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./guests.fn */ 86039);
/* harmony import */ var _staff_fn__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./staff.fn */ 2372);
/* harmony import */ var _user_class__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./user.class */ 93693);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/core */ 37580);





const USER_LIST = [];
const EMPTY_USER = new _user_class__WEBPACK_IMPORTED_MODULE_3__.User();
class UserPipe {
  /**
   * Get details of the user with the given ID
   * @param user_id ID or Email of the user
   */
  transform(user_id) {
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      if (!user_id) return EMPTY_USER;
      let user = USER_LIST.find(({
        id,
        email
      }) => id === user_id || email === user_id);
      if (user) return user;
      user = yield (0,_staff_fn__WEBPACK_IMPORTED_MODULE_2__.showStaff)(user_id).toPromise().catch(() => null);
      if (user) {
        USER_LIST.push(user);
        return user;
      }
      user = yield (0,_guests_fn__WEBPACK_IMPORTED_MODULE_1__.showGuest)(user_id).toPromise().catch(() => null);
      if (user) {
        USER_LIST.push(user);
        return user;
      }
      return EMPTY_USER;
    })();
  }
  static #_ = this.ɵfac = function UserPipe_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || UserPipe)();
  };
  static #_2 = this.ɵpipe = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_4__["ɵɵdefinePipe"]({
    name: "user",
    type: UserPipe,
    pure: true
  });
}

/***/ }),

/***/ 24129:
/*!**********************************************!*\
  !*** ./libs/users/src/lib/user.utilities.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   USER_DOMAIN: () => (/* binding */ USER_DOMAIN),
/* harmony export */   generateGuestForm: () => (/* binding */ generateGuestForm),
/* harmony export */   generateMockUser: () => (/* binding */ generateMockUser),
/* harmony export */   generateUserForm: () => (/* binding */ generateUserForm),
/* harmony export */   setInternalUserDomain: () => (/* binding */ setInternalUserDomain)
/* harmony export */ });
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/forms */ 34456);
/* harmony import */ var _common_src_lib_general__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../common/src/lib/general */ 64217);
/* harmony import */ var _user_class__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./user.class */ 93693);



let USER_COUNT = 0;
let USER_DOMAIN = '@place.tech';
function setInternalUserDomain(domain) {
  USER_DOMAIN = domain;
}
const USER_EMAILS = [];
/* istanbul ignore next */
/**
 * Generate raw mock data for a user
 * @param id Forced ID for the mock
 * @param name Forced name for the user
 * @param external Whether user is external of the organisation
 */
function generateMockUser(id, name, external) {
  if (!id) {
    id = `user-${USER_COUNT++}`;
  }
  if (!name) {
    name = `User ${USER_COUNT}`;
  }
  if (external === undefined) {
    external = !((0,_common_src_lib_general__WEBPACK_IMPORTED_MODULE_0__.predictableRandomInt)(99999) % 2);
  }
  const organisation = external ? `Fake Co.` : USER_DOMAIN.split('.')[0];
  let delegates = [];
  const delegate_count = Math.min((0,_common_src_lib_general__WEBPACK_IMPORTED_MODULE_0__.predictableRandomInt)(4) + 1, USER_EMAILS.length);
  for (let i = 0; i < delegate_count; i++) {
    delegates.push(USER_EMAILS[(0,_common_src_lib_general__WEBPACK_IMPORTED_MODULE_0__.predictableRandomInt)(USER_EMAILS.length)]);
  }
  delegates = (0,_common_src_lib_general__WEBPACK_IMPORTED_MODULE_0__.unique)(delegates);
  const email = `${name.split(' ').join('.').toLowerCase()}@${external ? 'not-' : ''}${USER_DOMAIN}`;
  USER_EMAILS.push(email);
  return {
    id,
    name,
    first_name: name.split(' ')[0],
    last_name: name.split(' ')[1],
    email,
    phone: `(02) 4567 8901`,
    visitor: external,
    organisation: {
      id: organisation.split(' ').join('.').toLowerCase(),
      name: organisation
    },
    department: `Department ${(0,_common_src_lib_general__WEBPACK_IMPORTED_MODULE_0__.predictableRandomInt)(10)}`,
    staff_code: (0,_common_src_lib_general__WEBPACK_IMPORTED_MODULE_0__.predictableRandomInt)(999_999),
    delegates,
    image: `${id}.png`
  };
}
/**
 * Generate form fields for the given user
 * @param user User to generate form for
 */
function generateUserForm(user) {
  if (!user) {
    throw Error('No user passed');
  }
  const fields = {
    name: new _angular_forms__WEBPACK_IMPORTED_MODULE_2__.FormControl(user.name || '', [_angular_forms__WEBPACK_IMPORTED_MODULE_2__.Validators.required]),
    email: new _angular_forms__WEBPACK_IMPORTED_MODULE_2__.FormControl(user.email || '', [_angular_forms__WEBPACK_IMPORTED_MODULE_2__.Validators.email, _angular_forms__WEBPACK_IMPORTED_MODULE_2__.Validators.required]),
    organisation: new _angular_forms__WEBPACK_IMPORTED_MODULE_2__.FormControl(user.organisation || '', _angular_forms__WEBPACK_IMPORTED_MODULE_2__.Validators.required),
    phone: new _angular_forms__WEBPACK_IMPORTED_MODULE_2__.FormControl(user.phone || '', _angular_forms__WEBPACK_IMPORTED_MODULE_2__.Validators.pattern(/^\+?(\d[\d\s\-\(\)]{5,13}\d)$/)),
    assistance_required: new _angular_forms__WEBPACK_IMPORTED_MODULE_2__.FormControl(user.assistance_required || false),
    visit_expected: new _angular_forms__WEBPACK_IMPORTED_MODULE_2__.FormControl(user.visit_expected ?? true)
  };
  // Generate form group for the user
  const form = new _angular_forms__WEBPACK_IMPORTED_MODULE_2__.FormGroup(fields);
  return form;
}
function generateGuestForm(user = new _user_class__WEBPACK_IMPORTED_MODULE_1__.GuestUser(), host = '') {
  const fields = {
    name: new _angular_forms__WEBPACK_IMPORTED_MODULE_2__.FormControl(user.name || ''),
    email: new _angular_forms__WEBPACK_IMPORTED_MODULE_2__.FormControl(user.email || '', [_angular_forms__WEBPACK_IMPORTED_MODULE_2__.Validators.email, _angular_forms__WEBPACK_IMPORTED_MODULE_2__.Validators.required]),
    organisation: new _angular_forms__WEBPACK_IMPORTED_MODULE_2__.FormControl(user.organisation || '', _angular_forms__WEBPACK_IMPORTED_MODULE_2__.Validators.required),
    phone: new _angular_forms__WEBPACK_IMPORTED_MODULE_2__.FormControl(user.phone || ''),
    host: new _angular_forms__WEBPACK_IMPORTED_MODULE_2__.FormControl(host || '', [_angular_forms__WEBPACK_IMPORTED_MODULE_2__.Validators.required])
  };
  // Generate form group for the guest
  const form = new _angular_forms__WEBPACK_IMPORTED_MODULE_2__.FormGroup(fields);
  return form;
}

/***/ }),

/***/ 34426:
/*!********************************************!*\
  !*** ./libs/users/src/lib/users.module.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SharedUsersModule: () => (/* binding */ SharedUsersModule)
/* harmony export */ });
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @angular/common */ 60316);
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @angular/forms */ 34456);
/* harmony import */ var _angular_material_progress_spinner__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! @angular/material/progress-spinner */ 41134);
/* harmony import */ var _angular_material_menu__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! @angular/material/menu */ 31034);
/* harmony import */ var _angular_material_dialog__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @angular/material/dialog */ 12587);
/* harmony import */ var _angular_material_checkbox__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @angular/material/checkbox */ 97024);
/* harmony import */ var libs_components_src_lib_components_module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! libs/components/src/lib/components.module */ 14974);
/* harmony import */ var libs_form_fields_src_lib_form_fields_module__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! libs/form-fields/src/lib/form-fields.module */ 77066);
/* harmony import */ var _new_user_modal_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./new-user-modal.component */ 11543);
/* harmony import */ var _user_form_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./user-form.component */ 7111);
/* harmony import */ var _user_pipe__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./user.pipe */ 89577);
/* harmony import */ var _wfh_settings_modal_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./wfh-settings-modal.component */ 43022);
/* harmony import */ var _find_availability_modal_find_availability_modal_component__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./find-availability-modal/find-availability-modal.component */ 12716);
/* harmony import */ var _find_availability_modal_user_availability_component__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./find-availability-modal/user-availability.component */ 94060);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _form_fields_src_lib_time_field_component__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../form-fields/src/lib/time-field.component */ 81413);
/* harmony import */ var _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../components/src/lib/icon.component */ 69434);
/* harmony import */ var _angular_material_core__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! @angular/material/core */ 74646);
/* harmony import */ var _angular_material_form_field__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! @angular/material/form-field */ 24950);
/* harmony import */ var _angular_material_select__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! @angular/material/select */ 25175);
/* harmony import */ var _form_fields_src_lib_date_field_component__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../form-fields/src/lib/date-field.component */ 19608);
/* harmony import */ var _form_fields_src_lib_user_search_field_component__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../form-fields/src/lib/user-search-field.component */ 18000);
/* harmony import */ var _components_src_lib_user_avatar_component__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../components/src/lib/user-avatar.component */ 23574);
/* harmony import */ var _components_src_lib_duration_pipe__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../components/src/lib/duration.pipe */ 17022);





























const COMPONENTS = [_new_user_modal_component__WEBPACK_IMPORTED_MODULE_2__.NewUserModalComponent, _user_form_component__WEBPACK_IMPORTED_MODULE_3__.UserFormComponent, _wfh_settings_modal_component__WEBPACK_IMPORTED_MODULE_5__.WFHSettingsModalComponent, _user_pipe__WEBPACK_IMPORTED_MODULE_4__.UserPipe, _find_availability_modal_find_availability_modal_component__WEBPACK_IMPORTED_MODULE_6__.FindAvailabilityModalComponent, _find_availability_modal_user_availability_component__WEBPACK_IMPORTED_MODULE_7__.UserAvailabilityComponent];
class SharedUsersModule {
  static #_ = this.ɵfac = function SharedUsersModule_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || SharedUsersModule)();
  };
  static #_2 = this.ɵmod = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_14__["ɵɵdefineNgModule"]({
    type: SharedUsersModule
  });
  static #_3 = this.ɵinj = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_14__["ɵɵdefineInjector"]({
    imports: [_angular_common__WEBPACK_IMPORTED_MODULE_15__.CommonModule, _angular_forms__WEBPACK_IMPORTED_MODULE_16__.FormsModule, _angular_forms__WEBPACK_IMPORTED_MODULE_16__.ReactiveFormsModule, _angular_material_dialog__WEBPACK_IMPORTED_MODULE_17__.MatDialogModule, libs_form_fields_src_lib_form_fields_module__WEBPACK_IMPORTED_MODULE_1__.FormFieldsModule, libs_components_src_lib_components_module__WEBPACK_IMPORTED_MODULE_0__.ComponentsModule, _angular_material_checkbox__WEBPACK_IMPORTED_MODULE_18__.MatCheckboxModule, _angular_material_progress_spinner__WEBPACK_IMPORTED_MODULE_19__.MatProgressSpinnerModule, _angular_material_menu__WEBPACK_IMPORTED_MODULE_20__.MatMenuModule]
  });
}
(function () {
  (typeof ngJitMode === "undefined" || ngJitMode) && _angular_core__WEBPACK_IMPORTED_MODULE_14__["ɵɵsetNgModuleScope"](SharedUsersModule, {
    declarations: [_new_user_modal_component__WEBPACK_IMPORTED_MODULE_2__.NewUserModalComponent, _user_form_component__WEBPACK_IMPORTED_MODULE_3__.UserFormComponent, _wfh_settings_modal_component__WEBPACK_IMPORTED_MODULE_5__.WFHSettingsModalComponent, _user_pipe__WEBPACK_IMPORTED_MODULE_4__.UserPipe, _find_availability_modal_find_availability_modal_component__WEBPACK_IMPORTED_MODULE_6__.FindAvailabilityModalComponent, _find_availability_modal_user_availability_component__WEBPACK_IMPORTED_MODULE_7__.UserAvailabilityComponent],
    imports: [_angular_common__WEBPACK_IMPORTED_MODULE_15__.CommonModule, _angular_forms__WEBPACK_IMPORTED_MODULE_16__.FormsModule, _angular_forms__WEBPACK_IMPORTED_MODULE_16__.ReactiveFormsModule, _angular_material_dialog__WEBPACK_IMPORTED_MODULE_17__.MatDialogModule, libs_form_fields_src_lib_form_fields_module__WEBPACK_IMPORTED_MODULE_1__.FormFieldsModule, libs_components_src_lib_components_module__WEBPACK_IMPORTED_MODULE_0__.ComponentsModule, _angular_material_checkbox__WEBPACK_IMPORTED_MODULE_18__.MatCheckboxModule, _angular_material_progress_spinner__WEBPACK_IMPORTED_MODULE_19__.MatProgressSpinnerModule, _angular_material_menu__WEBPACK_IMPORTED_MODULE_20__.MatMenuModule],
    exports: [_new_user_modal_component__WEBPACK_IMPORTED_MODULE_2__.NewUserModalComponent, _user_form_component__WEBPACK_IMPORTED_MODULE_3__.UserFormComponent, _wfh_settings_modal_component__WEBPACK_IMPORTED_MODULE_5__.WFHSettingsModalComponent, _user_pipe__WEBPACK_IMPORTED_MODULE_4__.UserPipe, _find_availability_modal_find_availability_modal_component__WEBPACK_IMPORTED_MODULE_6__.FindAvailabilityModalComponent, _find_availability_modal_user_availability_component__WEBPACK_IMPORTED_MODULE_7__.UserAvailabilityComponent]
  });
})();
_angular_core__WEBPACK_IMPORTED_MODULE_14__["ɵɵsetComponentScope"](_wfh_settings_modal_component__WEBPACK_IMPORTED_MODULE_5__.WFHSettingsModalComponent, [_angular_common__WEBPACK_IMPORTED_MODULE_15__.NgForOf, _angular_common__WEBPACK_IMPORTED_MODULE_15__.NgIf, _angular_forms__WEBPACK_IMPORTED_MODULE_16__.NgControlStatus, _angular_forms__WEBPACK_IMPORTED_MODULE_16__.NgModel, _angular_material_dialog__WEBPACK_IMPORTED_MODULE_17__.MatDialogClose, _form_fields_src_lib_time_field_component__WEBPACK_IMPORTED_MODULE_8__.TimeFieldComponent, _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_9__.IconComponent, _angular_material_core__WEBPACK_IMPORTED_MODULE_21__.MatOption, _angular_material_form_field__WEBPACK_IMPORTED_MODULE_22__.MatFormField, _angular_material_select__WEBPACK_IMPORTED_MODULE_23__.MatSelect, _angular_material_core__WEBPACK_IMPORTED_MODULE_21__.MatRipple, _angular_material_progress_spinner__WEBPACK_IMPORTED_MODULE_19__.MatProgressSpinner, _angular_material_checkbox__WEBPACK_IMPORTED_MODULE_18__.MatCheckbox], [_angular_common__WEBPACK_IMPORTED_MODULE_15__.DatePipe]);
_angular_core__WEBPACK_IMPORTED_MODULE_14__["ɵɵsetComponentScope"](_find_availability_modal_find_availability_modal_component__WEBPACK_IMPORTED_MODULE_6__.FindAvailabilityModalComponent, [_angular_common__WEBPACK_IMPORTED_MODULE_15__.NgForOf, _angular_common__WEBPACK_IMPORTED_MODULE_15__.NgIf, _angular_forms__WEBPACK_IMPORTED_MODULE_16__.NgControlStatus, _angular_forms__WEBPACK_IMPORTED_MODULE_16__.NgModel, _angular_material_dialog__WEBPACK_IMPORTED_MODULE_17__.MatDialogClose, _form_fields_src_lib_date_field_component__WEBPACK_IMPORTED_MODULE_10__.DateFieldComponent, _form_fields_src_lib_user_search_field_component__WEBPACK_IMPORTED_MODULE_11__.UserSearchFieldComponent, _components_src_lib_icon_component__WEBPACK_IMPORTED_MODULE_9__.IconComponent, _components_src_lib_user_avatar_component__WEBPACK_IMPORTED_MODULE_12__.UserAvatarComponent, _angular_material_core__WEBPACK_IMPORTED_MODULE_21__.MatRipple, _find_availability_modal_user_availability_component__WEBPACK_IMPORTED_MODULE_7__.UserAvailabilityComponent], [_angular_common__WEBPACK_IMPORTED_MODULE_15__.AsyncPipe, _angular_common__WEBPACK_IMPORTED_MODULE_15__.DatePipe, _components_src_lib_duration_pipe__WEBPACK_IMPORTED_MODULE_13__.DurationPipe]);

/***/ }),

/***/ 43022:
/*!************************************************************!*\
  !*** ./libs/users/src/lib/wfh-settings-modal.component.ts ***!
  \************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   WFHSettingsModalComponent: () => (/* binding */ WFHSettingsModalComponent)
/* harmony export */ });
/* harmony import */ var _home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js */ 89204);
/* harmony import */ var _placeos_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @placeos/common */ 22797);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! date-fns */ 23206);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! date-fns */ 28797);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! date-fns */ 90610);
/* harmony import */ var date_fns__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! date-fns */ 77177);
/* harmony import */ var _placeos_ts_client__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @placeos/ts-client */ 35713);
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/core */ 37580);
/* harmony import */ var _angular_material_dialog__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @angular/material/dialog */ 12587);







function WFHSettingsModalComponent_button_3_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "button", 7)(1, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](2, "close");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()();
  }
}
function WFHSettingsModalComponent_main_4_mat_checkbox_4_Template(rf, ctx) {
  if (rf & 1) {
    const _r1 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "mat-checkbox", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtwoWayListener"]("ngModelChange", function WFHSettingsModalComponent_main_4_mat_checkbox_4_Template_mat_checkbox_ngModelChange_0_listener($event) {
      const day_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵrestoreView"](_r1).$implicit;
      const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"](2);
      _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtwoWayBindingSet"](ctx_r2.weekdays_enabled[day_r2.getDay()], $event) || (ctx_r2.weekdays_enabled[day_r2.getDay()] = $event);
      return _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵresetView"]($event);
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵlistener"]("ngModelChange", function WFHSettingsModalComponent_main_4_mat_checkbox_4_Template_mat_checkbox_ngModelChange_0_listener($event) {
      const day_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵrestoreView"](_r1).$implicit;
      const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"](2);
      return _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵresetView"]($event && ctx_r2.initialiseDay(day_r2.getDay()));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipe"](2, "date");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const day_r2 = ctx.$implicit;
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtwoWayProperty"]("ngModel", ctx_r2.weekdays_enabled[day_r2.getDay()]);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipeBind2"](2, 2, day_r2, "EEE"), " ");
  }
}
function WFHSettingsModalComponent_main_4_ng_container_7_ng_container_1_ng_container_1_div_6_mat_option_5_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "mat-option", 25);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](1);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const type_r7 = ctx.$implicit;
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("value", type_r7.id);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtextInterpolate1"](" ", type_r7.name, " ");
  }
}
function WFHSettingsModalComponent_main_4_ng_container_7_ng_container_1_ng_container_1_div_6_Template(rf, ctx) {
  if (rf & 1) {
    const _r4 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "div", 19)(1, "a-time-field", 20);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵlistener"]("ngModelChange", function WFHSettingsModalComponent_main_4_ng_container_7_ng_container_1_ng_container_1_div_6_Template_a_time_field_ngModelChange_1_listener($event) {
      const block_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵrestoreView"](_r4).$implicit;
      const day_r6 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"](2).$implicit;
      const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"](3);
      return _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵresetView"](ctx_r2.setStartTime(block_r5, day_r6.getDay(), $event));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](2, "a-time-field", 20);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵlistener"]("ngModelChange", function WFHSettingsModalComponent_main_4_ng_container_7_ng_container_1_ng_container_1_div_6_Template_a_time_field_ngModelChange_2_listener($event) {
      const block_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵrestoreView"](_r4).$implicit;
      const day_r6 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"](2).$implicit;
      const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"](3);
      return _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵresetView"](ctx_r2.setEndTime(block_r5, day_r6.getDay(), $event));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](3, "mat-form-field", 21)(4, "mat-select", 12);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtwoWayListener"]("ngModelChange", function WFHSettingsModalComponent_main_4_ng_container_7_ng_container_1_ng_container_1_div_6_Template_mat_select_ngModelChange_4_listener($event) {
      const block_r5 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵrestoreView"](_r4).$implicit;
      _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtwoWayBindingSet"](block_r5.location, $event) || (block_r5.location = $event);
      return _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵresetView"]($event);
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](5, WFHSettingsModalComponent_main_4_ng_container_7_ng_container_1_ng_container_1_div_6_mat_option_5_Template, 2, 2, "mat-option", 22);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](6, "button", 23);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵlistener"]("click", function WFHSettingsModalComponent_main_4_ng_container_7_ng_container_1_ng_container_1_div_6_Template_button_click_6_listener() {
      const i_r8 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵrestoreView"](_r4).index;
      const day_r6 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"](2).$implicit;
      const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"](3);
      return _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵresetView"](ctx_r2.addBlock(ctx_r2.settings[day_r6.getDay()], i_r8));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](7, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](8, "add");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](9, "button", 24);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵlistener"]("click", function WFHSettingsModalComponent_main_4_ng_container_7_ng_container_1_ng_container_1_div_6_Template_button_click_9_listener() {
      const i_r8 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵrestoreView"](_r4).index;
      const day_r6 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"](2).$implicit;
      const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"](3);
      return _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵresetView"](ctx_r2.removeBlock(ctx_r2.settings[day_r6.getDay()], i_r8));
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](10, "app-icon");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](11, "delete");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()()();
  }
  if (rf & 2) {
    let tmp_11_0;
    const block_r5 = ctx.$implicit;
    const i_r8 = ctx.index;
    const day_r6 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"](2).$implicit;
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngModel", ctx_r2.timeFrom(block_r5.start_time))("from", ctx_r2.timeFrom((i_r8 > 0 ? (tmp_11_0 = ctx_r2.settings[day_r6.getDay()].blocks[i_r8 - 1]) == null ? null : tmp_11_0.end_time : 0) || 0));
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngModel", ctx_r2.timeFrom(block_r5.end_time))("from", ctx_r2.timeFrom(block_r5.start_time + 0.25));
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtwoWayProperty"]("ngModel", block_r5.location);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngForOf", ctx_r2.options);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("disabled", ctx_r2.settings[day_r6.getDay()].blocks.length > 2);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵclassProp"]("opacity-0", i_r8 === 0)("pointer-events-none", i_r8 === 0);
  }
}
function WFHSettingsModalComponent_main_4_ng_container_7_ng_container_1_ng_container_1_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](1, "div", 15)(2, "label", 16);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipe"](4, "date");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](5, "div", 17);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](6, WFHSettingsModalComponent_main_4_ng_container_7_ng_container_1_ng_container_1_div_6_Template, 12, 11, "div", 18);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementContainerEnd"]();
  }
  if (rf & 2) {
    const day_r6 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]().$implicit;
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtextInterpolate1"](" ", _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵpipeBind2"](4, 2, day_r6, "EEE"), " ");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngForOf", ctx_r2.settings[day_r6.getDay()].blocks);
  }
}
function WFHSettingsModalComponent_main_4_ng_container_7_ng_container_1_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](1, WFHSettingsModalComponent_main_4_ng_container_7_ng_container_1_ng_container_1_Template, 7, 5, "ng-container", 14);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementContainerEnd"]();
  }
  if (rf & 2) {
    const day_r6 = ctx.$implicit;
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", ctx_r2.weekdays_enabled[day_r6.getDay()]);
  }
}
function WFHSettingsModalComponent_main_4_ng_container_7_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementContainerStart"](0);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](1, WFHSettingsModalComponent_main_4_ng_container_7_ng_container_1_Template, 2, 1, "ng-container", 13);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementContainerEnd"]();
  }
  if (rf & 2) {
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"](2);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngForOf", ctx_r2.days);
  }
}
function WFHSettingsModalComponent_main_4_ng_template_8_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "div", 26);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelement"](1, "img", 27);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](2, "p", 28);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](3, " No work days are currently set for this user ");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()();
  }
}
function WFHSettingsModalComponent_main_4_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "main", 8)(1, "h3");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](2, "Working Days");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](3, "div", 9);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](4, WFHSettingsModalComponent_main_4_mat_checkbox_4_Template, 3, 5, "mat-checkbox", 10);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](5, "h3");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](6, "Work Hours");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](7, WFHSettingsModalComponent_main_4_ng_container_7_Template, 2, 1, "ng-container", 11)(8, WFHSettingsModalComponent_main_4_ng_template_8_Template, 4, 0, "ng-template", null, 1, _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplateRefExtractor"]);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
  }
  if (rf & 2) {
    const empty_state_r9 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵreference"](9);
    const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](4);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngForOf", ctx_r2.days);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](3);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", ctx_r2.has_working_days)("ngIfElse", empty_state_r9);
  }
}
function WFHSettingsModalComponent_footer_5_Template(rf, ctx) {
  if (rf & 1) {
    const _r10 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵgetCurrentView"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "footer", 29)(1, "button", 30);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵlistener"]("click", function WFHSettingsModalComponent_footer_5_Template_button_click_1_listener() {
      _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵrestoreView"](_r10);
      const ctx_r2 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵnextContext"]();
      return _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵresetView"](ctx_r2.saveChanges());
    });
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](2, " Save ");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()();
  }
}
function WFHSettingsModalComponent_ng_template_6_Template(rf, ctx) {
  if (rf & 1) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "div", 31);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelement"](1, "mat-spinner", 32);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](2, "p", 28);
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](3, " Saving changes to work location settings... ");
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]()();
  }
  if (rf & 2) {
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
    _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("diameter", 32);
  }
}
class WFHSettingsModalComponent {
  get has_working_days() {
    return Object.keys(this.weekdays_enabled).some(day => this.weekdays_enabled[day]);
  }
  get option_name() {
    return this.options.find(_ => _.id === this.option)?.name || '';
  }
  get now() {
    return (0,date_fns__WEBPACK_IMPORTED_MODULE_4__.startOfMinute)(Date.now()).getTime();
  }
  constructor(_dialog_ref) {
    this._dialog_ref = _dialog_ref;
    this.options = [{
      id: 'wfo',
      name: 'Office'
    }, {
      id: 'wfh',
      name: 'Home'
    }, {
      id: 'aol',
      name: 'Leave'
    }];
    this.option = this.options[0].id;
    this.settings = [];
    this.weekdays_enabled = {};
    this.changed = false;
    this.loading = false;
    this.available_weekdays = [];
    this.days = new Array(7).fill(0).map((_, idx) => (0,date_fns__WEBPACK_IMPORTED_MODULE_5__.addDays)((0,date_fns__WEBPACK_IMPORTED_MODULE_6__.startOfWeek)((0,date_fns__WEBPACK_IMPORTED_MODULE_5__.addDays)(Date.now(), 30)), idx));
  }
  ngOnInit() {
    const user = (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.currentUser)();
    this.settings = [...(user.work_preferences || []).map(_ => ({
      ..._,
      blocks: [...(_?.blocks || [])]
    }))];
    for (const day of this.settings) {
      if (day.blocks.length) this.weekdays_enabled[day.day_of_week] = true;
    }
  }
  timeFrom(hours) {
    return (0,date_fns__WEBPACK_IMPORTED_MODULE_4__.startOfMinute)((0,date_fns__WEBPACK_IMPORTED_MODULE_7__.set)((0,date_fns__WEBPACK_IMPORTED_MODULE_5__.addDays)(new Date(), 1), {
      hours: Math.floor(hours),
      minutes: hours * 60 % 60
    })).getTime();
  }
  fromTime(time) {
    const date = new Date(time);
    return date.getHours() + date.getMinutes() / 60;
  }
  initialiseDay(day) {
    if (!this.settings[day]) this.settings[day] = {
      day_of_week: day,
      blocks: []
    };
    if (!this.settings[day].blocks) this.settings[day].blocks = [];
    if (this.settings[day].blocks.length === 0) {
      this.addBlock(this.settings[day], 0);
    }
  }
  addBlock(pref, index) {
    pref.blocks.splice(index + 1, 0, {
      start_time: 9,
      end_time: 17,
      location: 'wfo'
    });
    this.cleanupBlocks(pref);
  }
  removeBlock(pref, index) {
    if (pref.blocks.length <= 1) return;
    pref.blocks.splice(index, 1);
  }
  setEndTime(block, day, time) {
    setTimeout(() => {
      block.end_time = this.fromTime(time);
      this.cleanupBlocks(this.settings[day]);
    }, 50);
  }
  setStartTime(block, day, time) {
    setTimeout(() => {
      block.start_time = this.fromTime(time);
      this.cleanupBlocks(this.settings[day]);
    }, 50);
  }
  cleanupBlocks(pref) {
    if (!pref?.blocks?.length) return;
    for (let i = 0; i < pref.blocks.length; i++) {
      const block = pref.blocks[i];
      if (i > 0) {
        if (block.start_time < pref.blocks[i - 1].end_time) {
          block.start_time = pref.blocks[i - 1].end_time;
        }
      }
      if (block.end_time <= block.start_time) {
        block.end_time = block.start_time + 1;
      }
    }
  }
  saveChanges(close = true) {
    var _this = this;
    return (0,_home_runner_work_user_interfaces_user_interfaces_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_0__["default"])(function* () {
      _this.loading = true;
      _this._dialog_ref.disableClose = true;
      const user = yield (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_2__.showUser)('current').toPromise();
      const new_settings = new Array(7).fill(0).map((_, idx) => ({
        day_of_week: idx,
        blocks: []
      }));
      for (const day of _this.days) {
        const day_of_week = day.getDay();
        if (_this.weekdays_enabled[day_of_week]) {
          new_settings[day_of_week] = {
            day_of_week: day_of_week,
            blocks: _this.settings[day_of_week].blocks
          };
        }
      }
      console.log('Update user...');
      yield (0,_placeos_ts_client__WEBPACK_IMPORTED_MODULE_2__.updateUser)(user.id, {
        ...user,
        groups: user.groups.filter(_ => !_.startsWith('placeos_')),
        work_preferences: new_settings
      }).toPromise().catch(e => {
        _this.loading = false;
        _this._dialog_ref.disableClose = false;
        (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.notifyError)('Unable to save user work preferences.');
        throw e;
      });
      console.log('Updated user');
      _this.loading = false;
      _this._dialog_ref.disableClose = false;
      if (close) {
        (0,_placeos_common__WEBPACK_IMPORTED_MODULE_1__.reloadUserData)();
        console.log('Close WFH Modal');
        _this._dialog_ref.close();
      }
    })();
  }
  static #_ = this.ɵfac = function WFHSettingsModalComponent_Factory(__ngFactoryType__) {
    return new (__ngFactoryType__ || WFHSettingsModalComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵdirectiveInject"](_angular_material_dialog__WEBPACK_IMPORTED_MODULE_8__.MatDialogRef));
  };
  static #_2 = this.ɵcmp = /*@__PURE__*/_angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵdefineComponent"]({
    type: WFHSettingsModalComponent,
    selectors: [["wfh-settings-modal"]],
    decls: 8,
    vars: 4,
    consts: [["load_state", ""], ["empty_state", ""], [1, "relative", "flex", "items-center", "justify-between"], [1, "font-medium", "text-xl"], ["icon", "", "matRipple", "", "mat-dialog-close", "", "class", "bg-base-200", 4, "ngIf"], ["class", "relative flex flex-col rounded w-[40rem] max-w-full p-4 space-y-2 max-h-[65vh] overflow-auto", 4, "ngIf", "ngIfElse"], ["class", "flex justify-end px-4 py-2 border-t border-base-200", 4, "ngIf"], ["icon", "", "matRipple", "", "mat-dialog-close", "", 1, "bg-base-200"], [1, "relative", "flex", "flex-col", "rounded", "w-[40rem]", "max-w-full", "p-4", "space-y-2", "max-h-[65vh]", "overflow-auto"], [1, "flex", "items-center", "justify-between", "w-full", "pb-4", "space-x-2"], [3, "ngModel", "ngModelChange", 4, "ngFor", "ngForOf"], [4, "ngIf", "ngIfElse"], [3, "ngModelChange", "ngModel"], [4, "ngFor", "ngForOf"], [4, "ngIf"], [1, "flex", "w-full", "space-x-2", "hover:bg-base-200", "rounded", "px-2", "pt-1"], [1, "w-12", "min-w-0", "px-2", "pt-3"], [1, "flex-1", "w-1/2"], ["class", "flex items-center space-x-2", 4, "ngFor", "ngForOf"], [1, "flex", "items-center", "space-x-2"], [1, "flex-1", "w-1/4", "h-[3.25rem]", 3, "ngModelChange", "ngModel", "from"], ["appearance", "outline", 1, "flex-1", "w-1/4", "h-[3.25rem]"], [3, "value", 4, "ngFor", "ngForOf"], ["icon", "", "matRipple", "", 3, "click", "disabled"], ["icon", "", "matRipple", "", 1, "text-error", 3, "click"], [3, "value"], [1, "flex", "flex-col", "items-center", "justify-center", "px-8", "py-16", "space-y-4"], ["src", "assets/icons/no-results.svg", 1, "m-auto"], [1, "opacity-30"], [1, "flex", "justify-end", "px-4", "py-2", "border-t", "border-base-200"], ["btn", "", "matRipple", "", 1, "w-48", 3, "click"], ["loading", "", 1, "relative", "bg-base-100", "flex", "flex-col", "justify-center", "items-center", "rounded", "overflow-hidden", "w-[24rem]", "h-[18rem]", "text-center", "space-y-2"], [3, "diameter"]],
    template: function WFHSettingsModalComponent_Template(rf, ctx) {
      if (rf & 1) {
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementStart"](0, "header", 2)(1, "h2", 3);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtext"](2, "Working Location Settings");
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](3, WFHSettingsModalComponent_button_3_Template, 3, 0, "button", 4);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵelementEnd"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplate"](4, WFHSettingsModalComponent_main_4_Template, 10, 3, "main", 5)(5, WFHSettingsModalComponent_footer_5_Template, 3, 0, "footer", 6)(6, WFHSettingsModalComponent_ng_template_6_Template, 4, 1, "ng-template", null, 0, _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵtemplateRefExtractor"]);
      }
      if (rf & 2) {
        const load_state_r11 = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵreference"](7);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"](3);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", !ctx.loading);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", !ctx.loading)("ngIfElse", load_state_r11);
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵadvance"]();
        _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵproperty"]("ngIf", !ctx.loading);
      }
    }
  });
}

/***/ })

},
/******/ __webpack_require__ => { // webpackRuntimeModules
/******/ var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
/******/ __webpack_require__.O(0, ["vendor"], () => (__webpack_exec__(64592)));
/******/ var __webpack_exports__ = __webpack_require__.O();
/******/ }
]);
//# sourceMappingURL=main.js.map