"use strict";(self.webpackChunkconcierge=self.webpackChunkconcierge||[]).push([["main"],{3194:(rt,Y,n)=>{n.d(Y,{Y:()=>b});var t=n(4929),l=n(2375),a=n(8031),g=n(9377),e=n(1618),i=n(913),m=n(3200),_=n(1810),h=n(3861),T=n(4505),A=n(7716),Z=n(4139),R=n(6942),E=n(9128),C=n(9151),d=n(823),o=n(9095),s=n(7418),u=n(8759),r=n(5670),D=n(3294),B=n(8426),N=n(3667),p=n(3184),M=n(5758),J=n(7317),K=n(5306),S=n(6362),v=n(587),f=n(4770),L=n(4683),W=n(2306),at=n(7303),G=n(1022),ut=n(9697),ot=n(6471),dt=n(6817);const it=function(){return{standalone:!0}};function pt(I,V){if(1&I){const j=p.EpF();p.TgZ(0,"form",1)(1,"div",2)(2,"label",3),p._uU(3,"Title"),p.TgZ(4,"span"),p._uU(5,"*"),p.qZA(),p._uU(6,":"),p.qZA(),p.TgZ(7,"mat-form-field",4),p._UZ(8,"input",5),p.TgZ(9,"mat-error"),p._uU(10,"A valid title is required"),p.qZA()()(),p.TgZ(11,"div",2)(12,"label",6),p._uU(13,"Date"),p.TgZ(14,"span"),p._uU(15,"*"),p.qZA(),p._uU(16,":"),p.qZA(),p._UZ(17,"a-date-field",7),p.qZA(),p.TgZ(18,"div",8)(19,"div",9)(20,"label",10),p._uU(21,"Start Time"),p.TgZ(22,"span"),p._uU(23,"*"),p.qZA(),p._uU(24,":"),p.qZA(),p.TgZ(25,"a-time-field",11),p.NdJ("ngModelChange",function(et){return p.CHM(j),p.oxw().form.patchValue({date:et})}),p.qZA()(),p.TgZ(26,"div",9)(27,"label",12),p._uU(28,"Duration"),p.TgZ(29,"span"),p._uU(30,"*"),p.qZA(),p._uU(31,":"),p.qZA(),p._UZ(32,"a-duration-field",13),p.qZA()(),p.TgZ(33,"div",9)(34,"label",14),p._uU(35,"Host"),p.TgZ(36,"span"),p._uU(37,"*"),p.qZA(),p._uU(38,":"),p.qZA(),p._UZ(39,"a-user-search-field",15),p.qZA(),p.TgZ(40,"div",9)(41,"label",16),p._uU(42,"Attendees"),p.TgZ(43,"span"),p._uU(44,"*"),p.qZA(),p._uU(45,":"),p.qZA(),p._UZ(46,"a-user-list-field",17),p.qZA(),p.TgZ(47,"div",9)(48,"label",18),p._uU(49,"Space"),p.TgZ(50,"span"),p._uU(51,"*"),p.qZA(),p._uU(52,":"),p.qZA(),p.TgZ(53,"an-action-field",19),p.NdJ("onAction",function(){return p.CHM(j),p.oxw().selectSpace()}),p._uU(54),p.qZA()()()}if(2&I){const j=p.oxw();p.Q6J("formGroup",j.form),p.xp6(25),p.Q6J("ngModel",j.form.get("date").value)("ngModelOptions",p.DdM(5,it)),p.xp6(7),p.Q6J("time",null==j.form.controls||null==j.form.controls.date?null:j.form.controls.date.value),p.xp6(22),p.Oqu(j.spaces)}}let ft=(()=>{class I{constructor(j){this._dialog=j}get spaces(){var j,q,et;return(null===(et=null===(q=null===(j=this.form.controls)||void 0===j?void 0:j.resources)||void 0===q?void 0:q.value)||void 0===et?void 0:et.map(ct=>ct.display_name||ct.name).join(", "))||"Select a space"}selectSpace(){var j,q,et,ct,_t,ht;return(0,t.mG)(this,void 0,void 0,function*(){const Mt=this._dialog.open(N.d,{data:{spaces:null===(q=null===(j=this.form.controls)||void 0===j?void 0:j.resources)||void 0===q?void 0:q.value,date:null===(ct=null===(et=this.form.controls)||void 0===et?void 0:et.date)||void 0===ct?void 0:ct.value,duration:null===(ht=null===(_t=this.form.controls)||void 0===_t?void 0:_t.duration)||void 0===ht?void 0:ht.value}}),Et=yield Promise.race([Mt.componentInstance.event.pipe((0,r.P)(bt=>"done"===bt.reason)).toPromise(),Mt.afterClosed().toPromise()]);"done"===(null==Et?void 0:Et.reason)&&this.form.patchValue({resources:Et.metadata}),Mt.close()})}}return I.\u0275fac=function(j){return new(j||I)(p.Y36(M.uw))},I.\u0275cmp=p.Xpm({type:I,selectors:[["event-form"]],inputs:{form:"form"},decls:1,vars:1,consts:[[3,"formGroup",4,"ngIf"],[3,"formGroup"],[1,"flex","flex-col"],["for","title"],["appearance","outline"],["matInput","","name","title","formControlName","title","placeholder","Meeting Title"],["for","date"],["name","date","formControlName","date"],[1,"flex","space-x-2"],[1,"flex","flex-col","flex-1"],["for","start-time"],["name","start-time",3,"ngModel","ngModelOptions","ngModelChange"],["for","duration"],["name","duration","formControlName","duration",3,"time"],["for","organiser"],["name","organiser","formControlName","organiser"],["for","attendees"],["name","attendees","formControlName","attendees"],["for","space"],["name","space",3,"onAction"]],template:function(j,q){1&j&&p.YNc(0,pt,55,6,"form",0),2&j&&p.Q6J("ngIf",q.form)},directives:[S.O5,v._Y,v.JL,v.sg,f.KE,L.Nt,v.Fj,v.JJ,v.u,f.TO,W.Q,at.N,v.On,G.B,ut.d,ot.E,dt.s],styles:[""]}),I})();var gt=n(4742);function H(I,V){if(1&I&&(p.TgZ(0,"main",5),p._UZ(1,"event-form",6),p.qZA()),2&I){const j=p.oxw();p.xp6(1),p.Q6J("form",j.form)}}function mt(I,V){if(1&I){const j=p.EpF();p.TgZ(0,"footer",7)(1,"button",8),p.NdJ("click",function(){return p.CHM(j),p.oxw().save()}),p._uU(2,"Save"),p.qZA()()}}function U(I,V){if(1&I&&(p.TgZ(0,"main",9),p._UZ(1,"mat-spinner",10),p.TgZ(2,"p"),p._uU(3),p.ALo(4,"async"),p.qZA()()),2&I){const j=p.oxw();p.xp6(1),p.Q6J("diameter",48),p.xp6(2),p.Oqu(p.lcZ(4,2,j.loading))}}let $=(()=>{class I{constructor(j,q,et){this._data=j,this._service=q,this._dialog_ref=et,this.event=new p.vpe,this.loading=this._service.loading}get form(){return this._service.form}ngOnInit(){this._service.newForm(this._data.event)}save(){return(0,t.mG)(this,void 0,void 0,function*(){const j=yield this._service.postForm().catch(q=>{throw(0,D.cB)(q),q});this.event.emit({reason:"done",metadata:j}),(0,D.t5)("Successfully created booking"),this._dialog_ref.close()})}}return I.\u0275fac=function(j){return new(j||I)(p.Y36(M.WI),p.Y36(B.MH),p.Y36(M.so))},I.\u0275cmp=p.Xpm({type:I,selectors:[["booking-modal"]],outputs:{event:"event"},decls:13,vars:7,consts:[[1,"flex-1","w-0"],["mat-icon-button","","mat-dialog-close",""],["class","overflow-auto p-4",4,"ngIf","ngIfElse"],["class","flex justify-center items-center p-2 border-t border-gray-200",4,"ngIf"],["load_state",""],[1,"overflow-auto","p-4"],[3,"form"],[1,"flex","justify-center","items-center","p-2","border-t","border-gray-200"],["mat-button","",3,"click"],["loading","",1,"h-64","flex","flex-col","items-center","justify-center"],[1,"mb-4",3,"diameter"]],template:function(j,q){if(1&j&&(p.TgZ(0,"header")(1,"h2"),p._uU(2,"New Booking"),p.qZA(),p._UZ(3,"div",0),p.TgZ(4,"button",1)(5,"app-icon"),p._uU(6,"close"),p.qZA()()(),p.YNc(7,H,2,1,"main",2),p.ALo(8,"async"),p.YNc(9,mt,3,0,"footer",3),p.ALo(10,"async"),p.YNc(11,U,5,4,"ng-template",null,4,p.W1O)),2&j){const et=p.MAs(12);p.xp6(7),p.Q6J("ngIf",!p.lcZ(8,3,q.loading))("ngIfElse",et),p.xp6(2),p.Q6J("ngIf",!p.lcZ(10,5,q.loading))}},directives:[J.lW,M.ZT,K.o,S.O5,ft,gt.Ou],pipes:[S.Ov],styles:["main[_ngcontent-%COMP%]{width:32rem;max-height:65vh;max-width:calc(100vw - 4rem)}\n/*# sourceMappingURL=booking-modal.component.ts-angular-inline--27.css.map*/"]}),I})(),b=(()=>{class I extends D.KG{constructor(j,q){super(),this._spaces=j,this._dialog=q,this._poll=new T.X(0),this._period=new T.X("day"),this._bookings=new T.X([]),this._event=new T.X(null),this._filters=new T.X({}),this._options=new T.X({}),this._date=new T.X((new Date).valueOf()),this._zones=new T.X([]),this._loading=new T.X(!1),this.date=this._date.asObservable(),this.zones=this._zones.asObservable(),this.options=this._options.asObservable(),this.loading=this._loading.asObservable(),this.event=this._event.asObservable(),this.filtered=(0,A.aj)([this._bookings,this._filters,this._date,this._period,this._zones]).pipe((0,R.U)(([et,ct,_t,ht,Mt])=>{const bt="month"===ht?e.Z:"week"===ht?i.Z:m.Z,Pt=("month"===ht?l.Z:"week"===ht?a.Z:g.Z)(_t),Ut=bt(_t);return this.filterEvents(et,Pt,Ut,ct,Mt)}),(0,E.d)(1)),this.events=(0,A.aj)([this._period,this._zones,this._date,this._poll]).pipe((0,C.h)(et=>!!et[0]),(0,d.b)(300),(0,o.w)(([et,ct,_t])=>{if(!(null==ct?void 0:ct.length))return(0,Z.of)([]);this._loading.next(!0);const Mt="month"===et?e.Z:"week"===et?i.Z:m.Z,Et=("month"===et?l.Z:"week"===et?a.Z:g.Z)(_t),bt=Mt(_t);return(0,B.u$)({zone_ids:ct.join(","),period_start:(0,_.Z)(Et),period_end:(0,_.Z)(bt)}).pipe((0,R.U)(Pt=>[Pt,Et,bt]))}),(0,s.K)(()=>(0,Z.of)([[]])),(0,u.b)(([et,ct,_t])=>{this.processBookings(et||[],null==ct?void 0:ct.valueOf(),null==_t?void 0:_t.valueOf()),this._loading.next(!1)}),(0,R.U)(([et])=>et)),this.events.subscribe()}get filters(){return this._filters.getValue()}setFilters(j){this._filters.next(j)}setDate(j){this._date.next(j)}setZones(j){this._zones.next(j)}setEvent(j){this._event.next(j)}setUIOptions(j){const q=this._options.getValue();this._options.next(Object.assign(Object.assign({},q),j))}startPolling(j="day",q=3e4){this._poll.next(Date.now()),this._period.next(j),this.interval("polling",()=>this._poll.next(Date.now()),q)}stopPolling(){this._poll.next(0),this.clearInterval("polling")}newBooking(j){return(0,t.mG)(this,void 0,void 0,function*(){const q=this._dialog.open($,{data:{event:j}}),et=yield Promise.race([q.componentInstance.event.pipe((0,r.P)(ct=>"done"===ct.reason)).toPromise(),q.afterClosed().toPromise()]);"done"===et.reason&&this.replace(et.metadata)})}removeBooking(j){var q;return(0,t.mG)(this,void 0,void 0,function*(){const et=yield(0,D._5)({title:"Delete meeting?",content:`Are you sure you want to delete the meeting at ${(0,h.Z)(new Date(j.date),"dd MMM yyyy, h:mma")}<br> in ${j.location}?`,icon:{class:"material-icons",content:"delete"}},this._dialog);"done"===et.reason&&(et.loading("Deleting booking..."),yield(0,B.xC)(j.id,{system_id:null===(q=j.system)||void 0===q?void 0:q.id}),this.remove(j),et.close())})}replace(j){const et=this._bookings.getValue().filter(ct=>ct.id!==j.id).concat([j]);this._bookings.next(et)}remove(j){const et=this._bookings.getValue().filter(ct=>ct.id!==j.id);this._bookings.next(et)}processBookings(j,q=(0,g.Z)(Date.now()).valueOf(),et=(0,m.Z)(Date.now()).valueOf()){let ct=this._bookings.getValue()||[];(0,D.Tw)((0,D.xH)(j.map(ht=>ht.resources)),"email").forEach(ht=>{ct=(0,B.AX)(ct,j.filter(Mt=>Mt.resources.find(Et=>Et.email===ht.email)),{space:ht.email,from:q.valueOf(),to:et.valueOf()})}),this._bookings.next(ct)}filterEvents(j,q,et,ct,_t=[]){return j.filter(ht=>{var Mt,Et,bt;const Pt=(0,D.MZ)(q.valueOf(),et.valueOf(),ht.date,ht.date+60*ht.duration*1e3),Ut=!!ht.resources.map(At=>this._spaces.find(At.id||At.email)).find(At=>_t.find(wt=>{var Zt;return null===(Zt=null==At?void 0:At.zones)||void 0===Zt?void 0:Zt.includes(wt)})),It=!(null===(Mt=ct.space_emails)||void 0===Mt?void 0:Mt.length)||!!ht.resources.find(At=>ct.space_emails.includes(At.email)),Lt=!(null===(Et=ct.zone_ids)||void 0===Et?void 0:Et.length)||!!ht.resources.find(At=>At.zones.find(wt=>ct.zone_ids.includes(wt))),$t=!(null===(bt=ct.hide_type)||void 0===bt?void 0:bt.length)||!ct.hide_type.includes(ht.guests.length?"external":"declined"===ht.status?"cancelled":"internal");return Pt&&It&&Ut&&Lt&&$t})}}return I.\u0275fac=function(j){return new(j||I)(p.LFG(N.sK),p.LFG(M.uw))},I.\u0275prov=p.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})()},8441:(rt,Y,n)=>{n.d(Y,{E:()=>Z});var t=n(3184),l=n(8393),a=n(312),g=n(7317),e=n(5306),i=n(587),m=n(5818),_=n(6362);const h=function(){return{class:"material-icons",content:"keyboard_arrow_left"}},T=function(){return{class:"material-icons",content:"keyboard_arrow_right"}},A=function(){return{class:"material-icons",content:"today"}};let Z=(()=>{class R{constructor(){this.date=(new Date).valueOf(),this.dateChange=new t.vpe,this.previousDay=()=>{this.date=(0,l.Z)(new Date(this.date),1).valueOf(),this.dateChange.emit(this.date)},this.nextDay=()=>{this.date=(0,a.Z)(new Date(this.date),1).valueOf(),this.dateChange.emit(this.date)}}}return R.\u0275fac=function(C){return new(C||R)},R.\u0275cmp=t.Xpm({type:R,selectors:[["date-options"]],inputs:{date:"date"},outputs:{dateChange:"dateChange"},decls:12,vars:12,consts:[["mat-icon-button","",3,"click"],[3,"icon"],[1,"display","m-4","text-center",2,"width","7em"],["mat-icon-button","",1,"rounded","relative",3,"click"],[1,"absolute","inset-0",3,"ngModel","matDatepicker","ngModelChange"],["picker",""]],template:function(C,d){if(1&C){const o=t.EpF();t.TgZ(0,"button",0),t.NdJ("click",function(){return d.previousDay()}),t._UZ(1,"app-icon",1),t.qZA(),t.TgZ(2,"button",0),t.NdJ("click",function(){return d.nextDay()}),t._UZ(3,"app-icon",1),t.qZA(),t.TgZ(4,"div",2),t._uU(5),t.ALo(6,"date"),t.qZA(),t.TgZ(7,"button",3),t.NdJ("click",function(){return t.CHM(o),t.MAs(11).open()}),t._UZ(8,"app-icon",1),t.TgZ(9,"input",4),t.NdJ("ngModelChange",function(u){return d.date=u})("ngModelChange",function(u){return d.dateChange.emit(u)}),t.qZA(),t._UZ(10,"mat-datepicker",null,5),t.qZA()}if(2&C){const o=t.MAs(11);t.xp6(1),t.Q6J("icon",t.DdM(9,h)),t.xp6(2),t.Q6J("icon",t.DdM(10,T)),t.xp6(2),t.Oqu(t.xi3(6,6,d.date,"mediumDate")),t.xp6(3),t.Q6J("icon",t.DdM(11,A)),t.xp6(1),t.Q6J("ngModel",d.date)("matDatepicker",o)}},directives:[g.lW,e.o,i.Fj,m.hl,i.JJ,i.On,m.Mq],pipes:[_.uU],styles:["[_nghost-%COMP%]{display:flex;align-items:center}button[_ngcontent-%COMP%]:last-child{border:1px solid #ccc;border-radius:.25rem}input[_ngcontent-%COMP%]{opacity:0;width:100%}\n/*# sourceMappingURL=date-options.component.ts-angular-inline--25.css.map*/"]}),R})()},9396:(rt,Y,n)=>{n.d(Y,{U:()=>m});var t=n(3184),l=n(4770),a=n(4683),g=n(587),e=n(5306);const i=function(){return{class:"material-icons",content:"search"}};let m=(()=>{class _{constructor(){this.model="",this.modelChange=new t.vpe}}return _.\u0275fac=function(T){return new(T||_)},_.\u0275cmp=t.Xpm({type:_,selectors:[["searchbar"]],inputs:{model:"model"},outputs:{modelChange:"modelChange"},decls:3,vars:3,consts:[["appearance","outline"],["matInput","","placeholder","Search...",3,"ngModel","ngModelChange"],["matSuffix","",1,"text-xl",3,"icon"]],template:function(T,A){1&T&&(t.TgZ(0,"mat-form-field",0)(1,"input",1),t.NdJ("ngModelChange",function(R){return A.model=R})("ngModelChange",function(R){return A.modelChange.emit(R)}),t.qZA(),t._UZ(2,"app-icon",2),t.qZA()),2&T&&(t.xp6(1),t.Q6J("ngModel",A.model),t.xp6(1),t.Q6J("icon",t.DdM(2,i)))},directives:[l.KE,a.Nt,g.Fj,g.JJ,g.On,e.o,l.R9],styles:["[_nghost-%COMP%]{height:3.5em}\n/*# sourceMappingURL=searchbar.component.ts-angular-inline--26.css.map*/"]}),_})()},4945:(rt,Y,n)=>{n.d(Y,{k:()=>E});var t=n(3294),l=n(3619),a=n(3184),g=n(6362),e=n(9481),i=n(5306),m=n(7317),_=n(89),h=n(2796);const T=function(C){return[C]};function A(C,d){if(1&C&&(a.ynx(0),a.TgZ(1,"a",7),a._UZ(2,"app-icon",8),a.TgZ(3,"div",9),a._uU(4),a.qZA()(),a.BQk()),2&C){const o=d.$implicit;a.xp6(1),a.Q6J("routerLink",a.VKq(3,T,"/"+o.route)),a.xp6(1),a.Q6J("icon",o.icon),a.xp6(2),a.Oqu(o.name)}}function Z(C,d){if(1&C&&(a.TgZ(0,"button",10),a.ALo(1,"async"),a.ALo(2,"async"),a.TgZ(3,"app-icon"),a._uU(4,"business"),a.qZA()()),2&C){const o=a.oxw(),s=a.MAs(7);a.Q6J("matTooltip",a.lcZ(1,2,o.active_building).display_name||a.lcZ(2,4,o.active_building).name)("matMenuTriggerFor",s)}}function R(C,d){if(1&C){const o=a.EpF();a.TgZ(0,"button",11),a.NdJ("click",function(){const r=a.CHM(o).$implicit;return a.oxw().setBuilding(r)}),a._uU(1),a.qZA()}if(2&C){const o=d.$implicit;a.xp6(1),a.hij(" ",o.display_name||o.name," ")}}let E=(()=>{class C{constructor(o,s){this._settings=o,this._org=s,this.buildings=this._org.building_list,this.active_building=this._org.active_building,this.setBuilding=u=>this._org.building=u}get links(){return this._settings.get("app.general.menu")||[]}get logo(){return this._settings.get("app.logo_dark")||{}}}return C.\u0275fac=function(o){return new(o||C)(a.Y36(t.gb),a.Y36(l.w7))},C.\u0275cmp=a.Xpm({type:C,selectors:[["sidebar"]],decls:10,vars:8,consts:[[1,"logo","h-20","w-24","flex","items-center","justify-center"],[1,"object-center","object-contain",3,"src"],[1,"flex-1","overflow-y-auto","overflow-x-hidden","w-24"],[4,"ngFor","ngForOf"],["mat-icon-button","","class","mx-auto my-4","matTooltipPosition","right",3,"matTooltip","matMenuTriggerFor",4,"ngIf"],["menu","matMenu"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],["routerLinkActive","active",1,"flex","flex-col","justify-center","items-center",3,"routerLink"],[1,"text-3xl","mb-2",3,"icon"],[1,"text-xs"],["mat-icon-button","","matTooltipPosition","right",1,"mx-auto","my-4",3,"matTooltip","matMenuTriggerFor"],["mat-menu-item","",3,"click"]],template:function(o,s){1&o&&(a.TgZ(0,"div",0),a._UZ(1,"img",1),a.qZA(),a.TgZ(2,"div",2),a.YNc(3,A,5,5,"ng-container",3),a.qZA(),a.YNc(4,Z,5,6,"button",4),a.ALo(5,"async"),a.TgZ(6,"mat-menu",null,5),a.YNc(8,R,2,1,"button",6),a.ALo(9,"async"),a.qZA()),2&o&&(a.xp6(1),a.Q6J("src",s.logo.src,a.LSH),a.xp6(2),a.Q6J("ngForOf",s.links),a.xp6(1),a.Q6J("ngIf",a.lcZ(5,4,s.buildings).length>1),a.xp6(4),a.Q6J("ngForOf",a.lcZ(9,6,s.buildings)))},directives:[g.sg,e.yS,e.Od,i.o,g.O5,m.lW,_.gM,h.p6,h.VK,h.OP],pipes:[g.Ov],styles:["[_nghost-%COMP%]{position:relative;display:flex;flex-direction:column;width:6em;height:100%;background-color:var(--secondary);border-right:1px solid #ccc;z-index:10}a[_ngcontent-%COMP%]{width:5.5em;height:4.5em;margin:.5em 0 .5em .5em;border-radius:.25em 0 0 .25em;text-decoration:none;color:#fff}a.active[_ngcontent-%COMP%]{background-color:#fff;color:#000c}button[mat-icon-button][_ngcontent-%COMP%]{border:1px solid #fff;color:#fff;border-radius:.25em}\n/*# sourceMappingURL=sidebar.component.ts-angular-inline--24.css.map*/"]}),C})()},2656:(rt,Y,n)=>{n.d(Y,{v:()=>S});var t=n(6362),l=n(9481),a=n(587),g=n(1130),e=n(7317),i=n(4770),m=n(4683),_=n(1434),h=n(1534),T=n(6623),A=n(2796),Z=n(89),R=n(833),E=n(4742),C=n(5818),d=n(5758),o=n(3188),B=(n(4945),n(8441),n(9396),n(914),n(7741)),N=n(8318),p=n(3184);const J=[e.ot,i.lN,m.c,_.LD,h.p9,T.rP,A.Tx,Z.AV,R.Cv,C.FA,g.XK,E.Cq,d.Is,o.Bb,g.si],K=[a.u5,a.UX];let S=(()=>{class v{}return v.\u0275fac=function(L){return new(L||v)},v.\u0275mod=p.oAB({type:v}),v.\u0275inj=p.cJS({imports:[[t.ez,...K,...J,B.Kk,l.Bz.forChild([])],e.ot,i.lN,m.c,_.LD,h.p9,T.rP,A.Tx,Z.AV,R.Cv,C.FA,g.XK,E.Cq,d.Is,o.Bb,g.si,a.u5,a.UX,N.W9,B.Kk]}),v})()},914:(rt,Y,n)=>{n.d(Y,{E:()=>R});var t=n(3861),l=n(2317),g=(n(8426),n(3667)),e=n(3194),i=n(3184),m=n(5306),_=n(6362),h=n(9685),T=n(7317),A=n(7202);function Z(E,C){if(1&E&&(i.TgZ(0,"div",17),i._UZ(1,"a-user-avatar",18),i.TgZ(2,"div",19)(3,"div",20),i._uU(4),i.qZA(),i.TgZ(5,"div",21),i._uU(6),i.qZA()()()),2&E){const d=C.$implicit;i.xp6(1),i.Q6J("user",d),i.xp6(3),i.hij(" ",d.name||d.first_name+" "+d.last_name," "),i.xp6(2),i.hij(" ",d.email," ")}}let R=(()=>{class E{constructor(d,o){this._state=d,this._spaces=o,this.close=()=>this._state.setEvent(null),this.edit=()=>this._state.newBooking(this.event),this.remove=()=>this._state.removeBooking(this.event)}get location(){const d=this._spaces.find(this.event.resources[0].id);return`${d.level.display_name||d.level.name}, ${d.display_name||d.name}`}get time(){const d=new Date(this.event.date);return(0,t.Z)(d,"h:mm a")+" - "+(0,t.Z)((0,l.Z)(d,this.event.duration),"h:mm a")}}return E.\u0275fac=function(d){return new(d||E)(i.Y36(e.Y),i.Y36(g.sK))},E.\u0275cmp=i.Xpm({type:E,selectors:[["view-event-details"]],inputs:{event:"event"},decls:46,vars:14,consts:[[1,"fixed","inset-0","bg-black","bg-opacity-30",3,"click"],["name","panel",1,"absolute","rounded","shadow","flex","flex-col",3,"click"],[1,"p-4","overflow-auto","flex-1"],[1,"mb-0","pl-6","mb-1"],[1,"text-bold","mb-4","pl-6","text-dark-fade"],[1,"flex","items-center","mb-2"],[1,"mr-1"],[1,"text-dark-fade"],[1,"flex","flex-col","mb-2"],["class","flex items-center pl-6 mb-1 hover:bg-gray-100 rounded",4,"ngFor","ngForOf"],[1,"flex","items-center"],[1,"flex","items-center","pl-6","mb-2"],[1,"text-dark-fade",3,"innerHTML"],["name","actions",1,"flex","items-center","justify-content","p-4","space-x-4"],["mat-button","",1,"flex-1","inverse",3,"click"],["mat-button","",1,"flex-1",3,"click"],["name","close","mat-icon-button","",3,"click"],[1,"flex","items-center","pl-6","mb-1","hover:bg-gray-100","rounded"],[1,"text-sm","pr-2",3,"user"],[1,"flex","flex-col"],[1,"text-sm","opacity-80"],[1,"text-xs","opacity-50"]],template:function(d,o){1&d&&(i.TgZ(0,"div",0),i.NdJ("click",function(){return o.close()}),i.qZA(),i.TgZ(1,"div",1),i.NdJ("click",function(u){return u.stopPropagation()}),i.TgZ(2,"div",2)(3,"h3",3),i._uU(4),i.qZA(),i.TgZ(5,"div",4),i._uU(6),i.ALo(7,"date"),i.qZA(),i.TgZ(8,"div",5)(9,"app-icon",6),i._uU(10,"title"),i.qZA(),i.TgZ(11,"span",7),i._uU(12),i.qZA()(),i.TgZ(13,"div",5)(14,"app-icon",6),i._uU(15,"schedule"),i.qZA(),i.TgZ(16,"span",7),i._uU(17),i.qZA()(),i.TgZ(18,"div",5)(19,"app-icon",6),i._uU(20,"people"),i.qZA(),i.TgZ(21,"span",7),i._uU(22),i.qZA()(),i.TgZ(23,"div",8),i.YNc(24,Z,7,3,"div",9),i.qZA(),i.TgZ(25,"div",5)(26,"app-icon",6),i._uU(27,"place"),i.qZA(),i.TgZ(28,"span",7),i._uU(29),i.qZA()(),i.TgZ(30,"div",10)(31,"app-icon",6),i._uU(32,"format_align_left"),i.qZA(),i.TgZ(33,"span",7),i._uU(34,"Notes"),i.qZA()(),i.TgZ(35,"div",11),i._UZ(36,"span",12),i.ALo(37,"sanitize"),i.qZA()(),i.TgZ(38,"div",13)(39,"button",14),i.NdJ("click",function(){return o.remove()}),i._uU(40," Remove Booking "),i.qZA(),i.TgZ(41,"button",15),i.NdJ("click",function(){return o.edit()}),i._uU(42," Edit Booking "),i.qZA()(),i.TgZ(43,"button",16),i.NdJ("click",function(){return o.close()}),i.TgZ(44,"app-icon"),i._uU(45,"close"),i.qZA()()()),2&d&&(i.xp6(4),i.hij(" ",(null==o.event.organiser?null:o.event.organiser.name)||o.event.host," "),i.xp6(2),i.hij(" ",i.xi3(7,9,o.event.date,"fullDate")," "),i.xp6(6),i.Oqu(o.event.title),i.xp6(5),i.Oqu(o.time),i.xp6(5),i.AsE("",o.event.attendees.length," Attendee",1===o.event.attendees.length?"":"s",""),i.xp6(2),i.Q6J("ngForOf",o.event.attendees),i.xp6(5),i.Oqu(o.location),i.xp6(7),i.Q6J("innerHTML",i.lcZ(37,12,o.event.body||"< No notes >"),i.oJD))},directives:[m.o,_.sg,h.k,T.lW],pipes:[_.uU,A.n],styles:["[_nghost-%COMP%]{z-index:999}[name=panel][_ngcontent-%COMP%]{padding-top:0;width:26em;left:50%;top:6.5em;transform:translate(-50%);background-color:#fff;max-height:80vh}[name=actions][_ngcontent-%COMP%]{border-top:1px solid #ccc}[name=close][_ngcontent-%COMP%]{position:absolute;top:.25em;right:.25em}\n/*# sourceMappingURL=view-event-details.component.ts-angular-inline--28.css.map*/"]}),E})()},3052:(rt,Y,n)=>{var t={};n.r(t),n.d(t,{default:()=>Me});var l=n(318),a=n(3184),g=n(8784),e=n(7481),i=n(9234),m=n(9481),_=n(2528),h=n(1196),T=n(5939),A=n(7741);const Z=[{path:"unauthorised",component:A.JD},{path:"day-view",loadChildren:()=>n.e("apps_concierge_src_app_day-view_day-view_module_ts").then(n.bind(n,596)).then(y=>y.DayViewModule),canActivate:[A.mk],canLoad:[A.mk]},{path:"week-view",loadChildren:()=>n.e("apps_concierge_src_app_week-view_week-view_module_ts").then(n.bind(n,1908)).then(y=>y.DayViewModule),canActivate:[A.mk],canLoad:[A.mk]},{path:"facilities",loadChildren:()=>Promise.all([n.e("default-libs_bookings_src_index_ts"),n.e("default-libs_explore_src_index_ts"),n.e("apps_concierge_src_app_facilities_facilities_module_ts")]).then(n.bind(n,2253)).then(y=>y.FacilitiesModule),canActivate:[A.mk],canLoad:[A.mk]},{path:"visitors",loadChildren:()=>n.e("apps_concierge_src_app_visitors_visitors_module_ts").then(n.bind(n,4513)).then(y=>y.VisitorsModule),canActivate:[A.mk],canLoad:[A.mk]},{path:"asset-manager",loadChildren:()=>Promise.all([n.e("default-libs_bookings_src_index_ts"),n.e("default-node_modules_angular_material_fesm2015_tabs_mjs"),n.e("apps_concierge_src_app_asset-manager_asset-manager_module_ts")]).then(n.bind(n,812)).then(y=>y.AppAssetManangerModule),canActivate:[A.mk],canLoad:[A.mk]},{path:"desks",loadChildren:()=>Promise.all([n.e("default-libs_bookings_src_index_ts"),n.e("default-node_modules_angular_material_fesm2015_tabs_mjs"),n.e("default-libs_explore_src_index_ts"),n.e("common"),n.e("apps_concierge_src_app_desks_desks_module_ts")]).then(n.bind(n,4655)).then(y=>y.DesksModule),canActivate:[A.mk],canLoad:[A.mk]},{path:"reports",loadChildren:()=>Promise.all([n.e("default-libs_bookings_src_index_ts"),n.e("default-node_modules_angular_material_fesm2015_tabs_mjs"),n.e("default-libs_catering_src_index_ts"),n.e("apps_concierge_src_app_reports_reports_module_ts")]).then(n.bind(n,8141)).then(y=>y.ReportsModule),canActivate:[A.mk],canLoad:[A.mk]},{path:"staff",loadChildren:()=>Promise.all([n.e("default-libs_bookings_src_index_ts"),n.e("apps_concierge_src_app_staff_staff_module_ts")]).then(n.bind(n,66)).then(y=>y.StaffModule),canActivate:[A.mk],canLoad:[A.mk]},{path:"catering",loadChildren:()=>Promise.all([n.e("default-node_modules_angular_material_fesm2015_tabs_mjs"),n.e("default-libs_catering_src_index_ts"),n.e("apps_concierge_src_app_catering_catering_module_ts")]).then(n.bind(n,419)).then(y=>y.CateringModule),canActivate:[A.mk],canLoad:[A.mk]},{path:"points",loadChildren:()=>Promise.all([n.e("default-libs_bookings_src_index_ts"),n.e("default-node_modules_angular_material_fesm2015_tabs_mjs"),n.e("common"),n.e("apps_concierge_src_app_points_points_module_ts-libs_common_src_lib_qr-code_ts")]).then(n.bind(n,1881)).then(y=>y.PointsModule),canActivate:[A.mk],canLoad:[A.mk]},{path:"parking",loadChildren:()=>Promise.all([n.e("default-libs_bookings_src_index_ts"),n.e("default-node_modules_angular_material_fesm2015_tabs_mjs"),n.e("apps_concierge_src_app_parking_parking_module_ts")]).then(n.bind(n,7797)).then(y=>y.AppParkingModule),canActivate:[A.mk],canLoad:[A.mk]},{path:"**",redirectTo:"day-view"}];let R=(()=>{class y{}return y.\u0275fac=function(O){return new(O||y)},y.\u0275mod=a.oAB({type:y}),y.\u0275inj=a.cJS({imports:[[m.Bz.forRoot(Z,{useHash:!0})],m.Bz]}),y})();var E=n(4929),C=n(5670),d=n(3499),o=n(3294),s=n(3619),u=n(9375),r=n(73),D=n(3902),B=n(2757),N=n(5395),p=n(8987),M=n(2317);const J=[{id:"item-1",name:"Coffee",unit_price:200,category:"Drinks",tags:["drink"],options:[{id:"opt-1",name:"Cappacino",group:"type"},{id:"opt-2",name:"Latte",group:"type"},{id:"opt-3",name:"1 Sugar",group:"sugars",unit_price:20},{id:"opt-4",name:"2 Sugar",group:"sugars",unit_price:20},{id:"opt-5",name:"3 Sugar",group:"sugars",unit_price:20},{id:"opt-6",name:"4 Sugar",group:"sugars",unit_price:20}]},{id:"item-2",name:"Soda",unit_price:160,category:"Drinks",tags:["drink"],options:[{id:"opt-1",name:"Pepsi",group:"type"},{id:"opt-2",name:"Sunkist",group:"type"},{id:"opt-3",name:"Solo",group:"type"},{id:"opt-4",name:"Dr Pepper",group:"type"}]},{id:"item-3",name:"Water",unit_price:100,category:"Drinks"},{id:"item-4",name:"Muffin",unit_price:160,category:"Snacks",options:[{id:"opt-1",name:"Choc Chip",group:"type"},{id:"opt-2",name:"Banana",group:"type"},{id:"opt-3",name:"Blueberry",group:"type"}]},{id:"item-5",name:"Cookies",unit_price:400,category:"Snacks",options:[{id:"opt-1",name:"Choc Chip",group:"type"},{id:"opt-2",name:"Macadamia",group:"type"},{id:"opt-3",name:"Dark Choc",group:"type"}]},{id:"item-6",name:"Fish & Chips",unit_price:250,category:"Simple Meals",options:[{id:"opt-1",name:"Tomato Sauce",group:"sauce",unit_price:30},{id:"opt-2",name:"BBQ Sauce",group:"sauce",unit_price:35},{id:"opt-3",name:"Tartare Sause",group:"sauce",unit_price:40},{id:"opt-4",name:"Garlic Aoili Sauce",group:"sauce",unit_price:50}]},{id:"item-7",name:"Sandwich",unit_price:300,category:"Simple Meals",options:[{id:"opt-1",name:"Ham & Cheese",group:"type"},{id:"opt-2",name:"Chicken",group:"type"},{id:"opt-3",name:"Fairy Bread",group:"type"}]}];function K(y){const c=(0,p.Z)(y.event_start,y.event_end),O=(0,o.yi)(J.length);return{id:`order-${(0,o.yi)(999999)}`,event_id:y.id,invoice_number:`I${(0,o.yi)(999999)}`,charge_code:`C${(0,o.yi)(9999)}`,deliver_at:(0,M.Z)(1e3*y.event_start,5*(0,o.yi)(Math.floor(c/5))),items:new Array(3).fill(0).map((F,z)=>Object.assign(Object.assign({},J[O*z%J.length]),{options:[],quantity:(0,o.yi)(10,1)}))}}const S="place.tech",f=["Jonathan McFarlane","Alex Sorafumo","Jim Doe","Cristina Boston","Jeremy West","Viv Briffa","Candy Russo","Jeff Wiz","Sravani Kotha","Kim Burgess","Caspian Baska","Stephen Von Takach","Cameron Reeves","Shane Boseley"],L={id:"current",name:"PlaceOS - Mock User",email:"dev@place.tech",groups:["deals","user"]},W=f.map((y,c)=>({id:`user-${c+1}`,name:`${y} (PlaceOS)`,email:`${y.split(" ").join(".").toLowerCase()}@${S}`})).concat([L]),at=f.map((y,c)=>({id:`guest-${c+1}`,name:`${y} (External)`,email:`${y.split(" ").join(".").toLowerCase()}@guest.${S}`,visit_expected:(0,o.yi)(99999)%2==0,extension_data:(0,o.yi)(99999)%3==0?{vaccination_proof:{url:"https://fonts.gstatic.com/s/i/materialicons/verified/v11/24px.svg"},id_data:{url:"https://fonts.gstatic.com/s/i/materialicons/fingerprint/v12/24px.svg"}}:{}})),G=[{created_at:1587057070,updated_at:1587692680,name:"PlaceOS",description:"",tags:"org",count:0,capacity:0,parent_id:"",triggers:[],id:"zone-EmWFTjuYExK"}],ut=[{name:"Sydney",description:"",tags:"building",count:0,capacity:0,parent_id:"zone-EmWFTjuYExK",triggers:[],id:"bld-01",levels:["lvl-G","lvl-1"]},{name:"Brisbane",description:"",tags:"building",count:0,capacity:0,parent_id:"zone-EmWFTjuYExK",triggers:[],id:"bld-02",levels:["lvl-2","lvl-3"]}],dt=ut.map(y=>y.levels.map((c,O)=>((y,c,O,F="10")=>{let z=y.substr(4);return z=`assets/maps/level_${F}.svg`,{id:`${O.id}_${y}`,name:`Level ${y.endsWith("00")?"G":y.split("-")[1]}`,parent_id:O.id,description:"",tags:"level",map_id:z,code:"level code 12",type:"staff floor",count:5,capacity:30,location:"optional lat,long",display_name:""}})(c,0,y,c.split("-")[1]))).reduce((y,c)=>y.concat(c),[{id:"level-p1",parent_id:"bld-01",name:"Level P1",tags:["level","parking"],map_id:"assets/maps/level_P1.svg"}]),it={current:{contacts:{name:"contacts",description:"",details:[{id:"user-1",name:"Jonathan McFarlane (PlaceOS)",email:"jon@place.tech",first_name:"Jonathan",last_name:"McFarlane"},{id:"user-1",name:"Alex Sorafumo (PlaceOS)",email:"alex@place.tech",first_name:"Alex",last_name:"Sorafumo"}]}}},pt={},ft=function gt(){(0,d.pRY)({path:"/api/engine/v2/zones",metadata:{},method:"GET",callback:F=>{if("org"===F.query_params.tags)return G;if("building"===F.query_params.tags)return ut;if("level"===F.query_params.tags)return dt;throw{status:404,message:"Zones not found"}}}),(0,d.pRY)({path:"/api/engine/v2/metadata/:id",metadata:{},method:"GET",callback:F=>{if("bindings"===F.query_params.name)return{bindings:{details:{area_management:"space-0",location_services:"space-0",contact_tracing:"space-0"}}};if("catering"===F.query_params.name)return{catering:{details:J}};if("desks"===F.query_params.name){const z=F.route_params.id.split("-");return c(z[z.length-1])}if("parking-spaces"===F.query_params.name){const z=F.route_params.id.split("-");return function O(F){return pt[F]||(pt[F]={"parking-spaces":{details:new Array(108).fill(0).map((z,tt)=>{const yt=(0,o.NE)(tt%18+100*Math.floor(tt/18),3),Tt=(0,o.yi)(9999)%4==0?W[(0,o.yi)(W.length)]:{};return{id:`park-${yt}`,map_id:`park-${yt}`,name:`${yt}`,bookable:(0,o.yi)(9999)%4!=0,assigned_to:Tt.email||"",assigned_name:Tt.name||""}})}}),pt[F]}(z[z.length-1])}return"map_regions"===F.query_params.name?{map_regions:{details:{areas:[{id:"zone-10.A",properties:{capacity:100,label_location:{x:.36,y:.33}},geometry:{coordinates:[[0,0],[0,.5],[.5,.5],[.5,0]]}},{id:"zone-10.B",properties:{capacity:100,label_location:{x:.76,y:.33}}},{id:"zone-10.C",properties:{capacity:100,label_location:{x:.63,y:.77}}}]}}}:it[F.route_params.id]&&it[F.route_params.id][F.query_params.name]?it[F.route_params.id]:it[F.route_params.id]&&!F.query_params.name&&it[F.route_params.id]||{}}}),(0,d.pRY)({path:"/api/engine/v2/metadata/:id",metadata:{},method:"PATCH",callback:F=>{it[F.route_params.id]||(it[F.route_params.id]={}),it[F.route_params.id][F.body.name]=F.body}});const y=["sit_to_stand","single_monitor","dual_monitor"];function c(F){return{desks:{details:new Array(30).fill(0).map((z,tt)=>({id:`table-${(0,o.NE)(F,2)}.${(0,o.NE)(tt+1,3)}`,name:`Desk ${F}.${(0,o.NE)(tt+1,3)}`,bookable:(0,o.yi)(9999)%4!=0,group:"",features:y.filter(yt=>(0,o.yi)(99999)%3==0)}))}}}(0,d.pRY)({path:"/api/engine/v2/metadata/:id/children",metadata:{},method:"GET",callback:F=>{const z=ut.find(tt=>tt.id===F.route_params.id);if(!z)throw{status:404,message:`Unable to find zone with id "${F.route_params.id}"`};return dt.filter(tt=>tt.parent_id===z.id).map(tt=>{const yt=tt.id.split("-");return{zone:tt,metadata:c(yt[yt.length-1])}})}})}();var H=n(3667);const mt=()=>{const y=["Whiteboard","VidConf","Projector","Views"],c=(0,o.yi)(y.length+1),O=[];for(let F=0;F<c;F++)O.push(y[(0,o.yi)(y.length)]);return O.filter((F,z,tt)=>tt.indexOf(F)===z)},U=[{name:"1.01 Operations Room",map_id:"area-1.01-status",zones:["bld-01","bld-01_lvl-1"]},{name:"1.03 Sydney Boardroom",map_id:"area-1.03-status",zones:["bld-01","bld-01_lvl-1"]},{name:"1.04 The Studio",map_id:"area-1.04-status",zones:["bld-01","bld-01_lvl-1"]},{name:"Jam Board",map_id:"area-1.02-status",zones:["bld-01","bld-01_lvl-1"]},{name:"G.01 Cisco Room",map_id:"area-G.01-status",zones:["bld-01","bld-01_lvl-1"]},{name:"G.02 The Lab",map_id:"area-G.02-status",zones:["bld-01","bld-01_lvl-1"]},{name:"Conference Room 2.01",map_id:"area-2.01-status",zones:["bld-02","bld-02_lvl-2"]},{name:"Conference Room 2.02",map_id:"area-2.02-status",zones:["bld-02","bld-02_lvl-2"]},{name:"Conference Room 3.01",map_id:"area-3.01-status",zones:["bld-02","bld-02_lvl-3"]},{name:"Conference Room 3.02",map_id:"area-3.02-status",zones:["bld-02","bld-02_lvl-3"]},{name:"Conference Room 3.03",map_id:"area-3.03-status",zones:["bld-02","bld-02_lvl-3"]}].map(y=>(0,H.bJ)(Object.assign(Object.assign({},y),{features:mt()})));var $=n(6901);let b=$().startOf("d").hour(7);const I=(y=!1)=>{const c=b.add(15*((0,o.yi)(8)+1),"m");return y&&(b=c),c.unix()},V=["tentative","confirmed","cancelled"],j=()=>{const y=(0,o.yi)(10);return y<2?V[2]:y<5?V[0]:V[1]},q=new Array(200).fill(0).map((y,c)=>{const O=W.concat(at);let F=new Array((0,o.yi)(8,1)).fill(0).map(()=>O[(0,o.yi)(O.length)]);F.sort((Ct,xt)=>(Ct.visit_expected?0:-1)-(xt.visit_expected?0:-1));const z=U[(0,o.yi)(U.length)];F=F.concat(Object.assign(Object.assign({},z),{resource:!0})),(0,o.yi)(9999)%2==0?F.unshift(L):F.unshift(W[(0,o.yi)(W.length)]),F=(0,o.Tw)(F,"email")||[{}];const tt=I(!0),yt=I(),Tt=(0,o.yi)(9999)%3==0?"https://meet.place.tech":"";return{id:`cal-event-${c}`,status:j(),host:F[0].email,calendar:"calendar_id",creator:"optional@fake.com",attendees:((0,o.Tw)(F,"email")||[]).map((Ct,xt)=>Object.assign(Object.assign({},Ct),{organizer:0===xt,checked_in:(0,o.yi)(99999)%2==0,response_status:(0,o.yi)(99999)%2==0?"accepted":(0,o.yi)(99999)%6==0?"declined":"tentative"})),title:`Some Meeting ${c}`,body:"A Description",private:!1,event_start:tt,event_end:yt,timezone:"Australia/Sydney",all_day:!1,location:`${null==z?void 0:z.name}`,recurring:!1,recurrence:{},attachments:{},system:z,meeting_url:Tt,meeting_id:Tt?`m${(0,o.yi)(9999)}`:"",meeting_provider:Tt?"PlaceOS":"",extension_data:{catering:(0,o.yi)(99999)%4==0?[K({id:`cal-event-${c}`,event_start:tt,event_end:yt})]:[],setup:5*(0,o.yi)(4),breakdown:5*(0,o.yi)(4)}}}),et={};q.forEach(y=>{et[y.system.id]||(et[y.system.id]=[]),et[y.system.id].push(y)});const ct=function _t(){(0,d.pRY)({path:"/api/engine/v2/users/:id",metadata:{},method:"GET",callback:O=>{if("current"===O.route_params.id)return L;const F=W.find(z=>z.email===O.route_params.id);if(F)return F;throw{status:404,message:"User not found"}}}),(0,d.pRY)({path:"/api/staff/v1/people",metadata:{},method:"GET",callback:O=>{if(O.query_params.q){const F=O.query_params.q.toLowerCase();return W.filter(z=>z.name.toLowerCase().includes(F)||z.email.toLowerCase().includes(F))}return W}}),(0,d.pRY)({path:"/api/staff/v1/people/:id",metadata:{},method:"GET",callback:O=>{const F=decodeURIComponent(O.route_params.id),z=W.find(tt=>tt.email===F);if(z)return Object.assign(Object.assign({},z),{location:c()});throw{status:404,message:"User not found"}}}),(0,d.pRY)({path:"/api/staff/v1/guests",metadata:{},method:"GET",callback:O=>{if(O.query_params.q){const F=O.query_params.q.toLowerCase();return at.filter(z=>z.name.toLowerCase().includes(F)||z.email.toLowerCase().includes(F))}return W}}),(0,d.pRY)({path:"/api/staff/v1/guests/:email",metadata:{},method:"GET",callback:O=>{const F=decodeURIComponent(O.route_params.email),z=at.find(tt=>tt.email===F);if(z)return z;throw{status:404,message:"Guest not found"}}}),(0,d.pRY)({path:"/api/staff/v1/guests/:email/meetings",metadata:{},method:"GET",callback:O=>{if(O.route_params.email){const F=O.route_params.email.toLowerCase();return q.filter(tt=>tt.attendees.find(yt=>yt.email.toLowerCase()===F))}throw{status:404,message:`Unable to find meetings with guest with email ${O.route_params.email}`}}});const y=["meeting","desk_id","laptop","mobile","geo","none"];function c(){const O=y[(0,o.yi)(y.length)],F=dt[(0,o.yi)(dt.length)],z=U.filter(Tt=>Tt.zones.includes(F.id)),tt=z[(0,o.yi)(z.length)]||{},yt={};switch(O){case"meeting":yt.meeting={building:F.parent_id,level:F.id,system:tt.id,map_id:tt.map_id,event_id:""};break;case"desk_id":yt.meeting={building:F.parent_id,level:F.id,map_id:tt.map_id,checked_in:$().unix()};break;case"laptop":case"mobile":yt[O]={building:F.parent_id,level:F.id,x:+(0,o.yi)(1e4),y:+(0,o.yi)(5e3),last_seen:$().subtract((0,o.yi)(60),"m").unix()};break;case"geo":yt.geo={lat:(0,o.yi)(180)-90,lon:(0,o.yi)(360)-180,last_seen:$().subtract((0,o.yi)(60),"m").unix()}}return yt}}();class ht{constructor(c){var O;this.help={help:{title:"Help",content:"\n# Using the asset browser\n\n## Activating the menu\nThe 5 finger touch can be actvated by placing 4 fingers and your thumb on the screen, or quickly double-tapping the screen. Activation through double tap will leave the menu on-screen. To close tap the \u2018X\u2019.\n\n## Selecting a menu item\nLeaving at least one finger on the screen, drag your finger to the icon to select.\n\n## Home Menu\nThe home menu allows you to access files and navigate to content and presentations via the Launcher.\n\n## Connect and stream your laptop or access the CMS to add files\nPlug your laptop into the HDMI to stream it to the screen, or access the CMS to add your own content and create custom presentations.\n\n<video></video>\n\n1. Test1\n2. Test2\n3. Test3\n            "},"laptop-help":{icon:"web_asset",title:"Asset Browser",content:"# Test 2"}},this.tabs=[{icon:"laptop",name:"Laptop",type:"Display",inputs:["Display_1"],help:"laptop-help"},{icon:"call",name:"VC",inputs:["VidConf_1"],help:"vidconf-help",controls:"vidconf-controls"}],this.volume=0,this.name=c.name||"Test Module",this.connected=null===(O=c.connected)||void 0===O||O,this.active=c.active||!1,this.input_list=c.input_list,this.output_list=c.output_list,this.env_sources=c.env_sources||[],this.inputs=Object.keys(this.input_list||{})||[],this.outputs=Object.keys(this.output_list||{})||[],(0,o.Tw)(this.env_sources.map(z=>z.type)).forEach(z=>this[`${z}`]=this.env_sources.filter(tt=>tt.type===z).map(tt=>tt.id)),this.env_sources.forEach(z=>this[`${z.type}/${z.id}`]=z),this.inputs.forEach(z=>this[`input/${z}`]=this.input_list[z]),this.outputs.forEach(z=>this[`output/${z}`]=this.output_list[z])}$power(c=!0){console.log("Power:",c),this.active=c}$share(){}$route(c,O){this.inputs.includes(c)&&this.outputs.includes(O)&&(this.$updateState(c,{routes:(0,o.Tw)([...this.input_list[c].routes||[],O])}),this.$updateState(O,{source:c,following:c}))}$unroute(){}$connect(){}$disconnect(){}$link(){}$merge(){}$split(){}$notify(){}$preset(){}$volume(c,O="all"){"all"===O&&(this.volume=c)}$mute(c=!0,O="all"){this.$updateState(O,{mute:c})}$unmute(c="all"){this.$mute(!1,c)}$environment(c,O){const F=this.env_sources.find(z=>z.id===c);F&&(this[`${F.type}/${F.id}`]=Object.assign(Object.assign({},F),{state:O}))}$lock(c){this.$updateState(c,{locked:!0})}$unlock(c){this.$updateState(c,{locked:!1})}$updateState(c,O){this[`input/${c}`]?(this[`input/${c}`]=Object.assign(Object.assign({},this[`input/${c}`]),O),this.input_list[c]=Object.assign(Object.assign({},this[`input/${c}`]),O)):this[`output/${c}`]&&(this[`output/${c}`]=Object.assign(Object.assign({},this[`output/${c}`]),O),this.output_list[c]=Object.assign(Object.assign({},this[`output/${c}`]),O))}}const Mt={Mic1:{name:"Lectern Mic",type:"Microphone",mod:"Microphone_1"},Mic2:{name:"Lapel Mic",type:"Microphone",mod:"Microphone_2"},Mic3:{name:"Handheld Mic",type:"Microphone",mod:"Microphone_3"},PC1:{name:"PC-1",type:"PC"},PC2:{name:"PC-2",type:"PC"},PC3:{name:"PC-3",type:"PC"},PC4:{name:"PC-4",type:"PC"},HDMI:{name:"Laptop HDMI",type:"Laptop"},VGA:{name:"Laptop VGA",type:"Laptop"},Camera1:{name:"Camera Rear",type:"Camera",mod:"Camera_1"},Camera2:{name:"Camera Front",type:"Camera",mod:"Camera_2"},Camera3:{name:"Camera Rear 2",type:"Camera",mod:"Camera_3"},Camera4:{name:"Camera Front 2",type:"Camera",mod:"Camera_4"},TV1:{name:"IPTV 1",type:"TV",mod:"IPTV_1"},VC1:{name:"Video Conference 1",type:"VC",mod:"VidConf_1"}},Et={Display1:{name:"Display 1",type:"Display",source:"PC1",mod:"Display_1"},Display2:{name:"Display 2",type:"Display",mod:"Display_2"},Display3:{name:"Display 3",type:"Display",source:"PC2",mod:"Display_3"},Display4:{name:"Display 4",type:"Display",mod:"Display_4"},Display5:{name:"Display 5",type:"Display",mod:"Display_5",source:"TV1"}},bt=[{id:"light1",name:"Lighting",type:"lights",states:["Off","Presentation","Meeting","Full"],state:"Off"},{id:"blind1",name:"Blinds",type:"blinds",states:["Off","Presentation","Meeting"],state:"Off"},{id:"screen1",name:"Screen",type:"screen",states:["Up","Down"],state:"Down"}],Pt=(y,c={})=>new ht(Object.assign(Object.assign(Object.assign({},y),{input_list:Mt,output_list:Et,env_sources:bt}),c));var Ut=n(7349),It=n(1118);class Lt{constructor(c,O){this.time_zone="Australia/Sydney",this.disable_book_now=!1,this.disable_end_meeting=!1,this.bookings=[],this.pending_period=0,this.pending_before=0,this.control_ui="",this.catering_ui="",this.last_booking_started=0,this.current_booking=null,this.next_booking=null,this.room_image="assets/boardroom.jpg",this.status="free",this._space=null,this._space=c}$start_meeting(c){this.last_booking_started=c}$end_meeting(c){}$book_now(c,O,F){}$poll_bookings(){!function $t(y,c){var O;const F=q.filter(xt=>{var Dt;return null===(Dt=xt.attendees)||void 0===Dt?void 0:Dt.find(Wt=>{var Jt;return Wt.email===y.email||Wt.id===y.id||(null===(Jt=xt.system)||void 0===Jt?void 0:Jt.id)===y.id})})||[];F.sort((xt,Dt)=>xt.event_start-Dt.event_start),c.bookings=F,c.current_booking=F.find(xt=>(0,o.MZ)(Date.now(),Date.now(),1e3*xt.event_start,1e3*xt.event_end)),c.next_booking=F.find(xt=>1e3*xt.event_start>Date.now());const z=new Date,{current_booking:tt,next_booking:yt}=c,Tt=new Date(null===(O=tt||yt)||void 0===O?void 0:O.event_start),Ct=(0,o.MZ)(z,z,(0,Ut.Z)(Tt,c.pending_before),(0,It.Z)(Tt,c.pending_period));c.status=(null==y?void 0:y.bookable)?tt?"busy":Ct?"pending":"free":"not-bookable"}(this._space,this)}}const Ft=(y,c={})=>new Lt(y,c);var At=n(9958);class wt{constructor(){this.overview={},this.emergency_contacts={"First Aid":W.filter(c=>(0,o.yi)(9999)%5==0),"Fire Warden":W.filter(c=>(0,o.yi)(9999)%5==0)}}$locate_user(c,O){}$update(){!function St(y,c){for(const O of c){y[O.id]={value:new Array((0,o.yi)(20)).fill(0).map(()=>Qt(O,y[`${O.id}:desk_ids`]))};for(const F of y[`${O.id}:areas`].value)F.count=(0,o.Iy)(100);y[`${O.id}:areas`]=Object.assign({},y[`${O.id}:areas`])}}(this,dt)}}const Zt={};class Ht{$check_ownership_of(c){if(!Zt[c]){const O=(0,o.Iy)(999999)%3==0?W[(0,o.Iy)(W.length)]:{name:""};Zt[c]={assigned_to:O.name}}return Zt[c]}}function Yt(y,c=3){let O=`${y}`;for(;O.length<c;)O="0"+O;return O}function zt(y,c={}){const O=new wt;for(const F of dt)O.overview[F.id]={desk_count:100,desk_usage:0,device_capacity:100,device_count:0,estimated_people:0,percentage_use:0,recommendation:1e4},O[`${F.id}:desk_ids`]=new Array(O.overview[F.id].desk_count).fill(0).map((z,tt)=>`table-${F.number}.${Yt(tt)}`),O[`${F.id}`]={value:[]},O[`${F.id}:areas`]={value:[{area_id:"zone-10.B",count:(0,o.Iy)(100),name:".L1 IFS IT"},{area_id:"zone-10.A",count:(0,o.Iy)(100),name:".L1 IFS IT"},{area_id:"zone-10.C",count:(0,o.Iy)(50),name:".L1 IFS IT"},{area_id:"zone-02.D",count:(0,o.Iy)(100),name:"Quite Work"},{area_id:"zone-02.B",count:(0,o.Iy)(100),name:"Meeting Area A"},{area_id:"zone-02.A",count:(0,o.Iy)(100),name:"Meeting Area B"},{area_id:"zone-02.C",count:(0,o.Iy)(50),name:"Casual Work"}]};return O}function Qt(y,c,O=W){return(0,o.yi)(9999)%3==0?{location:"desk",at_location:(0,o.yi)(9999)%2!=0,map_id:c[(0,o.yi)(c.length)],mac:At.V.hashStr(O[(0,o.yi)(O.length)].email),level:y.id,building:y.parent_id}:{location:"wireless",coordinates_from:"bottom-left",x:(0,o.yi)(1e3)/10,y:(0,o.yi)(1e3)/10,lon:55.27476066828535,lat:25.20106100633537,s2_cell_id:"3e5f4281459c",mac:At.V.hashStr(O[(0,o.yi)(O.length)].email),variance:9.62534032222287,last_seen:Math.floor((new Date).valueOf()/1e3),map_width:100,map_height:100}}class nt{constructor(c){this.presets=["Preset One","Preset 2","Preset Three"]}$pan(c){}$tilt(c){}$recall(c){}$save_preset(c){}}class Q{constructor(c){this.volume=(0,o.Iy)(100)}$mute(c=!0){this.mute=c}$volume(c){this.volume=c}}class vt{constructor(c){this.volume=(0,o.Iy)(100)}$mute(c=!0){this.mute=c}$volume(c){this.volume=c}}let k;class lt{constructor(c){this.status="stopped",this.live=!1,this.remaining=(0,o.Iy)(86400)}$start(){this.status="playing",k=setInterval(()=>{this.remaining<1&&clearInterval(k),this.remaining=this.remaining-1,this.current=this.current+1},3e3)}$pause(){this.status="paused",clearInterval(k)}$resume(){this.$start()}$stop(){this.status="stopped",this.current=0,clearInterval(k)}}const P=(y,c={})=>new lt(Object.assign(Object.assign({},y),c));class X{constructor(c){this.supported_meeting_url="https://meet."}$econtrol(...c){}}const Ot=(y,c={})=>new X(Object.assign(Object.assign({},y),c));class Bt{constructor(c){this.mic_mute=!1,this.selfview=!1,this.video_layout="Auto",this.presentation_mode="None",this.calls={test:{Status:"Connected"}}}$show_camera_pip(c){this.selfview=c}$mic_mute(c){this.mic_mute=c}$presentation_mode(c){this.presentation_mode=c}$hangup(){}$call_place_on_hold(){for(const c in this.calls)if(this.calls[c].Status)return this.calls[c].Status="OnHold",void(this.calls=Object.assign({},this.calls))}$call_resume(){for(const c in this.calls)if(this.calls[c].Status)return this.calls[c].Status="Idle",void(this.calls=Object.assign({},this.calls))}$video_layout(c){this.video_layout=c}$dtmf_send(c){}$dial(c){return new Promise(O=>setTimeout(()=>O(),1e3))}}const Vt=(y={},c={})=>new Bt(Object.assign(Object.assign({},y),c));var Xt=n(312),le=n(475),te=n(1810),ce=n(6119);const jt={},ee=(y,c)=>O=>(0,o.MZ)(y,c,O.contact_time,O.contact_time);class de{constructor(c){}$close_contacts(c,O,F,z){if(jt[c]||(jt[c]=[]),jt[c].length)return jt[c].filter(ee(F,z));const tt=[],yt=(0,Xt.Z)(1e3*F,-10),Tt=(0,Xt.Z)(1e3*z,10);let Ct=new Date(yt);for(;(0,le.Z)(Ct,Tt);)new Array((0,o.Iy)(4)).fill(0).map(xt=>({mac_address:(0,o.O1)(10),contact_time:(0,te.Z)((0,ce.Z)(Ct,(0,o.Iy)(11)+7)),duration:60*(0,o.Iy)(60),username:W[(0,o.Iy)(W.length)].email})).forEach(xt=>tt.push(xt)),Ct=(0,Xt.Z)(Ct,1);return jt[c]=tt,jt[c].filter(ee(F,z))}}const ue=(y,c={})=>new de(Object.assign(Object.assign({},y),c));const me=function _e(){U.forEach((y,c)=>function pe(y){(0,d.$6F)(y.id,{System:[Pt(y)],Bookings:[Ft(y)],ContactTracing:[ue(y)],AreaManagement:[zt()],LocationServices:[new Ht],Camera:new Array(10).fill(0).map(O=>((y,c={})=>new nt(Object.assign(Object.assign({},y),c)))(y)),Display:new Array(10).fill(0).map(O=>((y,c={})=>new Q(Object.assign(Object.assign({},y),c)))(y)),Microphone:new Array(10).fill(0).map(O=>((y,c={})=>new vt(Object.assign(Object.assign({},y),c)))(y)),Capture:[P(y)],MeetingPush:[Ot()],VidConf:[Vt()]});const c=(0,d.OuQ)(y.id);c.Bookings[0].$poll_bookings(),setInterval(()=>c.Bookings[0].$poll_bookings(),3e4),c.AreaManagement[0].$update(),setInterval(()=>c.AreaManagement[0].$update(),3e4)}(y)),(0,d.pRY)({path:"/api/engine/v2/systems",metadata:{},method:"GET",callback:y=>U})}(),ge=function he(){(0,d.pRY)({path:"/api/staff/v1/events",metadata:{},method:"GET",callback:y=>{let c=q;return y.query_params.zone_ids||(c=c.filter(O=>!!O.attendees.find(F=>F.email===L.email))),y.query_params.period_start&&(c=c.filter(O=>(0,o.MZ)(y.query_params.period_start,y.query_params.period_end,O.event_start,O.event_end))),c}}),(0,d.pRY)({path:"/api/staff/v1/events",metadata:{},method:"POST",callback:y=>{var c;const O=Object.assign(Object.assign({},y.body),{id:`-cal-event-${(0,o.yi)(999)}`});O.attendees=[W.find(z=>z.email===O.host),...O.attendees||[]],O.attendees.forEach(z=>{z.zones&&(z.resource=!0)}),O.system&&(O.attendees=[...O.attendees||[],Object.assign(Object.assign({},O.system),{resource:!0})]),q.push(O);const F=(0,d.OuQ)(O.system.id);return null===(c=null==F?void 0:F.Bookings[0])||void 0===c||c.$poll_bookings(),O}}),(0,d.pRY)({path:"/api/staff/v1/events/:id",metadata:{},method:"GET",callback:y=>{const c=q.find(O=>O.id===y.route_params.id);if(c)return c;throw{status:404,message:"Event not found"}}}),(0,d.pRY)({path:"/api/staff/v1/events/:id",metadata:{},method:"DELETE",callback:y=>{const c=q.findIndex(O=>O.id===y.route_params.id);if(!(c>0))throw{status:404,message:"Event not found"};q[c].host===L.email?q.splice(c,1):q[c].attendees.find(F=>F.email===L.email).response_status="declined"}}),(0,d.pRY)({path:"/api/staff/v1/events/:id",metadata:{},method:"PATCH",callback:y=>{const c=q.findIndex(O=>O.id===y.route_params.id);if(c>=0)return q.splice(c,1,y.body);throw{status:404,message:"Event not found"}}}),(0,d.pRY)({path:"/api/staff/v1/events/:id/guests/:email/checkin",metadata:{},method:"POST",callback:y=>{const c=q.find(O=>O.id===y.route_params.id);if(c)return c.extension_data.checked_in=(c.extension_data.checked_in||[]).concat([y.route_params.email]),c;throw{status:404,message:"Guest not found"}}})}(),fe=function ve(){(0,d.pRY)({path:"/api/staff/v1/calendars",metadata:{},method:"GET",callback:c=>{const O=W[(0,o.yi)(W.length)],F=W[(0,o.yi)(W.length)],z=W[(0,o.yi)(W.length)];return[{id:L.email,summary:L.name,primary:!0,can_edit:!0,hidden:!1},{id:O.email,summary:O.name,primary:!1,can_edit:!0,hidden:!1},{id:F.email,summary:F.name,primary:!1,can_edit:!1,hidden:!1},{id:z.email,summary:z.name,primary:!1,can_edit:!1,hidden:!0}]}});const y=c=>{const O=+c.query_params.period_start,F=+c.query_params.period_end,z=(c.query_params.zone_ids||"").split(",").filter(Tt=>!!Tt),tt=(c.query_params.system_ids||"").split(",").filter(Tt=>!!Tt);return U.filter(Tt=>z.length?z.reduce((Ct,xt)=>Ct&&Tt.zones.includes(xt),!0):!tt.length||tt.includes(Tt.id)).filter(Tt=>{const Ct=q.filter(xt=>xt.attendees.find(Dt=>Dt.id===Tt.id));for(const xt of Ct)if((0,o.MZ)(O,F,xt.event_start,xt.event_end))return!1;return!0})};(0,d.pRY)({path:"/api/staff/v1/calendars/availability",metadata:{},method:"GET",callback:c=>y(c).map(O=>({resource:O}))}),(0,d.pRY)({path:"/api/staff/v1/calendars/free_busy",metadata:{},method:"GET",callback:c=>y(c).map(O=>({resource:O}))})}();var Ce=n(8235),ye=n(8393);const Rt=[{id:"1",name:"iPad",category:"Technology",images:[{name:"chrome.svg",url:"assets/support/chrome-logo.svg"},{name:"firefox.svg",url:"assets/support/firefox-logo.svg"},{name:"safari.svg",url:"assets/support/safari-logo.svg"}]},{id:"2",name:"iPhone",category:"Technology"},{id:"3",name:"iWatch",category:"Technology"},{id:"4",name:"Chair",category:"Furniture"},{id:"5",name:"Lounge",category:"Furniture"},{id:"6",name:"Table",category:"Furniture"},{id:"7",name:"Couch",category:"Furniture"},{id:"8",name:"Something",category:"Other"}];let ne=(0,Ce.Z)((0,ye.Z)(Date.now(),3),{hours:7,minutes:0,seconds:0,milliseconds:0});const ie=(y=!1)=>{const c=(0,M.Z)(ne,15*((0,o.yi)(8)+1));return y&&(ne=c),(0,te.Z)(c)},oe=["desk","parking","asset-request"],se=["in_storage","in_transit","at_location"],Nt=new Array(200).fill(0).map((y,c)=>{var O;(0,o.yi)(999999);const z=W[(0,o.yi)(W.length)],tt=oe[(0,o.yi)(oe.length)],yt=ut[(0,o.yi)(ut.length)],Tt=dt.filter(Gt=>Gt.parent_id===yt.id),Ct=Tt[(0,o.yi)(Tt.length)],xt=U.filter(Gt=>Gt.zones.includes(null==Ct?void 0:Ct.id)),Dt=(0,o.yi)(999999)%4,Wt=W[(0,o.yi)(W.length)],Jt=(0,o.yi)(3,1),qt=(0,o.NE)(c%18+1+100*Math.floor(c/18),3);return{id:`booking-${c}`,booking_start:ie(!0),booking_end:ie(),user_id:z.id,user_name:z.name,user_email:z.email,booked_by_name:z.name,booked_by_email:z.email,asset_id:"parking"===tt?`park-${qt}`:`desk-${null==Ct?void 0:Ct.id}-${c}`,asset_name:"parking"===tt?qt:`${null==Ct?void 0:Ct.id}-${c}`,description:"parking"===tt?qt:`Desk ${c}`,title:`${tt} Booking ${c}`,type:tt,booking_type:tt,checked_in:(0,o.yi)(999999)%3==0,access:(0,o.yi)(999999)%3==0,approved:0===Dt,rejected:1===Dt,approver_id:0===Dt?Wt.id:"",approver_name:0===Dt?Wt.name:"",approver_email:0===Dt?Wt.email:"",zones:[yt.id,null==Ct?void 0:Ct.id],extension_data:{map_id:`table-10.00${c}`,plate_number:(0,o.O1)(8,"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789"),assets:new Array(Jt).fill(0).map(Gt=>Object.assign(Object.assign({},Rt[(0,o.yi)(Jt)]),{amount:(0,o.yi)(5,1)})),tracking:0===Dt?se[(0,o.yi)(se.length)]:"in_storage",space_id:null===(O=xt[(0,o.yi)(xt.length)])||void 0===O?void 0:O.id}}}),Me={ZONE_MOCKS:ft,USER_MOCKS:ct,SYSTEM_MOCKS:me,EVENT_MOCKS:ge,CALENDAR_MOCKS:fe,BOOKING_MOCKS:function Oe(){(0,d.pRY)({path:"/api/staff/v1/bookings",metadata:{},method:"GET",callback:c=>Nt.filter(F=>(0,o.MZ)(c.query_params.period_start,c.query_params.period_end,F.booking_start,F.booking_end)&&(F.type===c.query_params.type||F.booking_type===c.query_params.type))}),(0,d.pRY)({path:"/api/staff/v1/bookings/:id",metadata:{},method:"GET",callback:c=>{const O=Nt.find(F=>F.id===c.route_params.id);if(!O)throw{status:404,message:`Unable to find booking with ID ${c.route_params.id}`};return O}}),(0,d.pRY)({path:"/api/staff/v1/bookings",metadata:{},method:"POST",callback:c=>{const O=Object.assign(Object.assign({},c.body),{id:`-booking-${(0,o.yi)(999)}`});return console.log("New Booking:",O),Nt.push(O),O}});const y=(c,O)=>{const F=Nt.findIndex(yt=>yt.id===c);if(F<0)throw{status:404,message:`Unable to find booking with ID ${c}`};const z=Object.assign({},O);return Nt.splice(F,1,z),z};(0,d.pRY)({path:"/api/staff/v1/bookings/:id",metadata:{},method:"PUT",callback:c=>y(c.route_params.id,Object.assign({},c.body))}),(0,d.pRY)({path:"/api/staff/v1/bookings/:id",metadata:{},method:"PATCH",callback:c=>y(c.route_params.id,Object.assign({},c.body))}),(0,d.pRY)({path:"/api/staff/v1/bookings/:id/approve",metadata:{},method:"POST",callback:c=>y(c.route_params.id,Object.assign(Object.assign({},c.body),{approved:!0,rejected:!1}))}),(0,d.pRY)({path:"/api/staff/v1/bookings/:id/reject",metadata:{},method:"POST",callback:c=>y(c.route_params.id,Object.assign(Object.assign({},c.body),{approved:!1,rejected:!0}))}),(0,d.pRY)({path:"/api/staff/v1/bookings/:id/check_in",metadata:{},method:"POST",callback:c=>y(c.route_params.id,Object.assign(Object.assign({},c.body),{checked_in:"true"===c.query_params.state}))}),(0,d.pRY)({path:"/api/staff/v1/bookings/:id",metadata:{},method:"DELETE",callback:c=>{const O=Nt.findIndex(F=>F.id===c.route_params.id);if(O<0)throw{status:404,message:`Unable to find booking with ID ${c.route_params.id}`};Nt.splice(O,1)}})}(),ASSET_MOCKS:function Ee(){(0,d.pRY)({path:"/api/engine/v1/assets",metadata:{},method:"GET",callback:c=>Rt}),(0,d.pRY)({path:"/api/engine/v1/assets/:id",metadata:{},method:"GET",callback:c=>{const O=Rt.find(F=>F.id===c.route_params.id);if(!O)throw{status:404,message:`Unable to find booking with ID ${c.route_params.id}`};return O}}),(0,d.pRY)({path:"/api/engine/v1/assets",metadata:{},method:"POST",callback:c=>{const O=Object.assign(Object.assign({},c.body),{id:`-asset-${(0,o.yi)(999)}`});return Rt.push(O),O}}),(0,d.pRY)({path:"/api/engine/v1/assets/:id",metadata:{},method:"PUT",callback:c=>((c,O)=>{const F=Rt.findIndex(tt=>tt.id===c);if(F<0)throw{status:404,message:`Unable to find booking with ID ${c}`};const z=Object.assign({},O);return Rt.splice(F,1,z),z})(c.route_params.id,Object.assign({},c.body))}),(0,d.pRY)({path:"/api/engine/v1/assets/:id",metadata:{},method:"DELETE",callback:c=>{const O=Rt.findIndex(F=>F.id===c.route_params.id);if(O<0)throw{status:404,message:`Unable to find booking with ID ${c.route_params.id}`};Rt.splice(O,1)}})}()};(0,o.cM)("MOCKS","Mocks included with application.");var ae=n(490),be=n(1604),Ae=n(2097),Ue=n(6790);window.global=window;let Pe=(()=>{class y extends o.KG{constructor(O,F,z,tt,yt,Tt,Ct,xt){super(),this._tracing=O,this._settings=F,this._org=z,this._spaces=tt,this._cache=yt,this._snackbar=Tt,this._hotkey=Ct,this._clipboard=xt}ngOnInit(){var O,F;return(0,E.mG)(this,void 0,void 0,function*(){(0,o.cM)("APP","MOCKS:",t),this._hotkey.listen(["Control","Alt","Shift","KeyM"],()=>{localStorage.setItem("mock",`${"true"!==localStorage.getItem("mock")}`),location.reload()}),this._hotkey.listen(["Control","Alt","Shift","KeyC"],()=>{this._clipboard.copy(`${(0,d.rao)()}|${(0,d.g$u)()}`),(0,o.t5)("Successfully copied token.")}),this._hotkey.listen(["Control","Alt","Shift","KeyV"],()=>{var tt;null===(tt=navigator.clipboard)||void 0===tt||tt.readText().then(yt=>{const Tt=yt.split("|"),Ct=(0,d.I4i)();localStorage.setItem(`${Ct}_access_token`,`${Tt[0]}`),localStorage.setItem(`${Ct}_refresh_token`,`${Tt[1]}`),localStorage.setItem(`${Ct}_expires_at`,`${(0,B.Z)(new Date,6).valueOf()}`),(0,o.t5)("Successfully pasted token."),setTimeout(()=>location.reload(),2e3)})}),(0,o.SI)(this._snackbar),yield this._settings.initialised.pipe((0,C.P)(tt=>tt)).toPromise(),(0,o.kW)(this._settings.get("app.short_name"));const z=this._settings.get("composer")||{};z.mock=!!this._settings.get("mock")||location.origin.includes("demo.place.tech"),yield(0,o.c_)(z).catch(tt=>console.error(tt)),(0,o.v8)(this._cache),z.local_login||this.timeout("wait_for_user",()=>this.onInitError(),3e4),yield o.pN.pipe((0,C.P)(tt=>!!tt)).toPromise(),this.clearTimeout("wait_for_user"),(0,D.q)((0,o.ar)()),(0,u.ZJ)(this._settings.get("app.general.internal_user_domain")||`@${null===(F=null===(O=(0,o.ar)())||void 0===O?void 0:O.email)||void 0===F?void 0:F.split("@")[1]}`),function De(y,c=.2){!y||N.S({dsn:y,tracesSampleRate:c})}(this._settings.get("app.sentry_dsn"))})}onInitError(){var O;(0,d.y7C)()||(null===(O=(0,o.ar)())||void 0===O?void 0:O.is_logged_in)||(console.error("Error initialising user."),(0,d.Ogr)(),location.reload())}}return y.\u0275fac=function(O){return new(O||y)(a.Y36(ae.aN),a.Y36(o.gb),a.Y36(s.w7),a.Y36(r.s),a.Y36(i.yO),a.Y36(_.ux),a.Y36(o.tm),a.Y36(be.TU))},y.\u0275cmp=a.Xpm({type:y,selectors:[["app-root"]],features:[a.qOj],decls:4,vars:0,consts:[[1,"flex-1","w-full","relative","h-1/2"]],template:function(O,F){1&O&&(a._UZ(0,"global-banner"),a.TgZ(1,"div",0),a._UZ(2,"router-outlet"),a.qZA(),a._UZ(3,"global-loading"))},directives:[Ae.T,m.lC,Ue.G],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%;width:100%}\n/*# sourceMappingURL=app.component.ts-angular-inline--108.css.map*/"]}),y})();var Ie=n(2656),Ze=n(9078);let Se=(()=>{class y{}return y.\u0275fac=function(O){return new(O||y)},y.\u0275mod=a.oAB({type:y,bootstrap:[Pe]}),y.\u0275inj=a.cJS({providers:[{provide:h.OM,useValue:{separatorKeyCodes:[T.K5,T.OC]}},{provide:a.qLn,useValue:Ze.v({showDialog:!1})},{provide:ae.aN,deps:[m.F0]}],imports:[[l.b2,R,_.ZX,e.PW,g.JF,Ie.v,i.Wr.register("ngsw-worker.js",{enabled:true})]]}),y})();(0,a.G48)(),l.q6().bootstrapModule(Se).catch(y=>console.error(y))},4603:(rt,Y,n)=>{n.d(Y,{f:()=>a});var t=n(8987),l=n(656);class a{constructor(e={}){this.id=e.id||"",this.name=e.name||"",this.primary=!!e.primary,this.summary=e.summary||"",this.can_edit=!!e.can_edit,this.resource=new l.T(e.resource||e.system),this.availability=(e.availability||[]).map(({starts_at:i,ends_at:m,date:_,duration:h,status:T})=>({date:new Date(_,i).valueOf(),duration:h||(0,t.Z)(m,i),status:T})),this.hidden=!!e.hidden}}},6217:(rt,Y,n)=>{n.d(Y,{mD:()=>T,tS:()=>A});var t=n(3499),l=n(6942),a=n(3294),g=n(656),e=n(4603);const i="/api/staff/v1/calendars",h=Z=>(0,l.U)(R=>R.filter(E=>!!E.resource).map(E=>new g.T(Object.assign(Object.assign({},E.resource),{level:null==Z?void 0:Z.levelWithID(E.resource.zones),availability:E.availability}))).filter(E=>E.bookable));function T(Z,R){return function _(Z){const R=(0,a.UK)(Z);return(0,t.U2M)(`${i}/availability${R?"?"+R:""}`).pipe((0,l.U)(E=>E.map(C=>new e.f(C))))}(Z).pipe(h(R))}function A(Z,R){const E=(0,a.UK)(Z);return(0,t.U2M)(`${i}/free_busy${E?"?"+E:""}`).pipe((0,l.U)(C=>C.map(d=>new e.f(d))),h(R))}},2962:(rt,Y,n)=>{n.d(Y,{U:()=>t});class t{constructor(a={}){var g;this.id=a.id||"",this.name=a.name||a.id||"",this.category=a.category||"",this.unit_price=a.unit_price||0,this.description=a.description||"",this.quantity=a.quantity||0,this.discount_cap=a.discount_cap||0,this.accept_points=!!a.accept_points,this.options=a.options||[],this.tags=a.tags||[],this.total_cost=(this.unit_price+this.options.map(e=>e.unit_price||0).reduce((e,i)=>e+i,0))*this.quantity,this.options_string=(null===(g=this.options)||void 0===g?void 0:g.map(e=>e.id||"").sort((e,i)=>e.localeCompare(i)).join(","))||""}}},5163:(rt,Y,n)=>{n.d(Y,{G:()=>a});var t=n(3294),l=n(2962);class a{constructor(e={}){var i,m;this.id=e.id||`order-${(0,t.Iy)(9999999,1e6)}`,this.system_id=e.system_id||"",this.event_id=e.event_id||(null===(i=e.event)||void 0===i?void 0:i.id)||"",this.items=(e.items||[]).map(_=>new l.U(_)),this.item_count=this.items.reduce((_,h)=>_+h.quantity,0),this.total_cost=this.items.reduce((_,h)=>_+(h.total_cost||0),0),this.charge_code=e.charge_code||"",this.status=e.status||"accepted",this.invoice_number=e.invoice_number||"",this.event=e.event||null,this.deliver_at=e.deliver_at||e.date||(null===(m=this.event)||void 0===m?void 0:m.date)||(new Date).getTime()}}},3294:(rt,Y,n)=>{n.d(Y,{X7:()=>S,KG:()=>t.K,tm:()=>i,gb:()=>p,n5:()=>a.n5,ar:()=>D,pN:()=>r,Sv:()=>a.Sv,xH:()=>a.xH,RD:()=>a.RD,Wn:()=>a.Wn,o3:()=>a.o3,fT:()=>a.fT,cM:()=>a.cM,cB:()=>G,QD:()=>ot,t5:()=>at,_5:()=>a._5,NE:()=>a.NE,yi:()=>a.yi,Iy:()=>a.Iy,O1:()=>a.O1,kW:()=>a.kW,SI:()=>L,v8:()=>it,c_:()=>ft,hI:()=>a.hI,MZ:()=>a.MZ,UK:()=>v.U,Tw:()=>a.Tw});var t=n(8939),l=n(4505),a=n(3245),g=n(3184);const e=["control","shift","alt","meta","os"];let i=(()=>{class U{constructor(){this.keydown_states={},this.keydown_observers={},this.combo_end=[],this.registered_combos=[],this.counter=0,window.addEventListener("keydown",b=>{const I=this.mapKey((b.code||"").toLowerCase());this.last_down!==I&&(this.keydown_states[I]||(this.keydown_states[I]=new l.X(null),this.keydown_observers[I]=this.keydown_states[I].asObservable()),this.keydown_states[I].next(++this.counter),this.combo_end.indexOf(I)>=0&&b.preventDefault(),this.last_down=I)}),window.addEventListener("keyup",b=>{const I=this.mapKey((b.code||"").toLowerCase());this.keydown_states[I].next(null),this.last_down===I&&(this.last_down=null)})}listen(b,I){const V=(b=b instanceof Array?b:b.split("+")).map(j=>this.mapKey(j.toLowerCase()));if(V.length>0&&this.validCombination(V)){this.registered_combos.push(V);const j=V[V.length-1];return this.keydown_states[j]||(this.keydown_states[j]=new l.X(null),this.keydown_observers[j]=this.keydown_states[j].asObservable()),this.updateCombinationEndList(),this.keydown_observers[j].subscribe(q=>{if(q){const et=[];if(V.length>0){for(const _t of V){const ht=this.keydown_states[_t];et.push(ht&&ht.getValue()||-1)}for(let _t=0;_t<V.length-1;_t++)if(et[_t]>et[_t+1])return}et.reduce((_t,ht)=>_t+(ht>0?1:-1),0)>=V.length&&I()}})}return null}mapKey(b){return b.indexOf("alt")>=0||b.indexOf("shift")>=0||b.indexOf("control")>=0?b.replace("left","").replace("right",""):b}updateCombinationEndList(){for(const I of this.registered_combos)this.combo_end.push(I[I.length-1]);this.combo_end=(0,a.Tw)([])}validCombination(b){let I=0;for(const V of b)e.indexOf(V)<0&&I++;return I>0}}return U.\u0275fac=function(b){return new(b||U)},U.\u0275prov=g.Yz7({token:U,factory:U.\u0275fac,providedIn:"root"}),U})();var m=n(4929),_=n(5845),h=n(3861);const Z={debug:!0,composer:{domain:"",route:"/concierge",protocol:"",port:"",use_domain:!1,local_login:!1},app:{name:"Concierge",title:"PlaceOS",description:"Concierge UI",short_name:"PlaceOS",logo_light:{type:"img",src:"assets/logo-light.svg"},logo_dark:{type:"img",src:"assets/logo-dark.svg"},general:{menu:[{route:"day-view",name:"Calendar",icon:{class:"material-icons",content:"event"}},{route:"facilities",name:"Facilities",icon:{class:"material-icons",content:"meeting_room"}},{route:"catering",name:"Catering",icon:{class:"material-icons",content:"room_service"}},{route:"visitors",name:"Visitors",icon:{class:"material-icons",content:"group"}},{route:"desks",name:"Desks",icon:{class:"material-icons",content:"article"}},{route:"staff",name:"Staff",icon:{class:"material-icons",content:"account_box"}},{route:"points",name:"Points",icon:{class:"material-icons",content:"loyalty"}},{route:"parking",name:"Parking",icon:{class:"material-icons",content:"local_parking"}},{route:"reports",name:"Reports",icon:{class:"material-icons",content:"analytics"}}]},guests:{vaccine_check:!0}}};var E=n(3499),C=n(3859),d=n(8919),o=n(6942),s=n(5197);const u=new l.X(null),r=u.asObservable();function D(){return u.getValue()}setTimeout(()=>{try{if(jest)return}catch(U){}(0,E.q$s)("current").pipe((0,C.g)(1e3),(0,d.X)(10),(0,o.U)(U=>new s.mO(U))).subscribe(U=>u.next(U))},300);var B=n(5670),N=n(318);let p=(()=>{class U extends t.K{constructor(b){super(),this._title=b,this._app_name="PlaceOS",this._overrides=new l.X([]),this._user_settings=new l.X({}),this._subjects={},this._observables={},this._pending_settings={};const I=new Date,V=new Date(1652760083165),j=(0,_.Z)(I,V)?`Today at ${(0,h.Z)(V,"h:mma")}`:(0,h.Z)(V,"do MMM yyyy, h:mma");(0,a.cM)("CORE","null",null,"debug",!0),(0,a.cM)("APP",`d3008b9 | Built: ${j}`,null,"debug",!0),this.init()}set overrides(b){this._overrides.next(b),this._applyCssVariables()}listen(b){return this._observables[b]||(this._subjects[b]=new l.X(null),this._observables[b]=this._subjects[b].asObservable()),this._observables[b]}post(b,I){this._observables[b]||(this._subjects[b]=new l.X(null),this._observables[b]=this._subjects[b].asObservable()),this._subjects[b].next(I)}value(b){return this._observables[b]?this._subjects[b].getValue():null}get title(){return this._title.getTitle()}set title(b){this._title.setTitle(`${b} | ${this.get("app.name")||this._app_name}`)}init(){var b;return(0,m.mG)(this,void 0,void 0,function*(){this.get("debug")&&(window.debug=!0),(null===(b=this.get("app"))||void 0===b?void 0:b.name)&&(this._app_name=this.get("app").name),this._app_name=location.pathname.replace(/[\\\/]/g,"").trim()||this._app_name,(0,a.kW)(this._app_name.split("-").join("_").toUpperCase()),(0,a.cM)("Settings","Successfully loaded settings"),this._initialised.next(!0),window.debug&&(window.application||(window.application={}),window.application.settings=this),this.subscription("user_settings",this._user_settings.subscribe(j=>this._applyUserSettings(j)));const I=yield r.pipe((0,B.P)(j=>!!j)).toPromise(),V=yield(0,E.rlq)(I.id,"settings").toPromise();this._user_settings.next(V.details||{})})}get app_name(){return this._app_name}get(b){var I,V;const j=b.split(".");if("app"!==j[0])return null!==(V=null!==(I=(0,a.Wn)(j,this._pending_settings))&&void 0!==I?I:(0,a.Wn)(j,this._user_settings.getValue()))&&void 0!==V?V:(0,a.Wn)(j,Z);const q=[...this._overrides.getValue()];for(const et of q){const ct=(0,a.Wn)(j.slice(1),et);if(null!=ct)return ct}return(0,a.Wn)(j,Z)}saveUserSetting(b,I){this._pending_settings[b]=I,this.timeout("save_settings",()=>this._savePendingChanges(),5e3)}_applyCssVariables(){const b=this.get("app.css_variables")||{};let I="body { ";for(const j in b)I+=`--${j}: ${b[j]}; `;I+="}";let V=document.getElementById("css-var-overrides");V||(V=document.createElement("style"),V.id="css-var-overrides",document.head.appendChild(V)),V.innerText=I}_savePendingChanges(){return(0,m.mG)(this,void 0,void 0,function*(){const b=D();!b||!Object.keys(this._pending_settings).length||(yield(0,E.Ymr)(b.id,{name:"settings",description:"",details:Object.assign(Object.assign({},this._user_settings.getValue()),this._pending_settings)}))})}_applyUserSettings(b){return(0,m.mG)(this,void 0,void 0,function*(){b.dark_mode?document.body.classList.add("dark"):document.body.classList.remove("dark"),b.font_size&&(document.body.style.fontSize=`${b.font_size}px`)})}}return U.\u0275fac=function(b){return new(b||U)(g.LFG(N.Dx))},U.\u0275prov=g.Yz7({token:U,factory:U.\u0275fac,providedIn:"root"}),U})();var J=n(1631);(0,J.X$)("show",[(0,J.eR)(":enter",[(0,J.oB)({opacity:0,height:0}),(0,J.jt)(300,(0,J.oB)({opacity:1,height:"*"}))]),(0,J.eR)(":leave",[(0,J.oB)({opacity:1,height:"*"}),(0,J.jt)(300,(0,J.oB)({opacity:0,height:0}))])]);const S=(0,J.X$)("show",[(0,J.SB)("show",(0,J.oB)({opacity:1,height:"*"})),(0,J.SB)("hide",(0,J.oB)({opacity:0,height:0,"pointer-events":"none"})),(0,J.eR)("show <=> hide",(0,J.jt)("200ms ease-in"))]);var v=n(5038);let f,dt;function L(U){f=U}function W(U,$,b="OK",I,V={}){if(!f)throw new Error("Snackbar service hasn't been initialised");const j=f.open($,b,Object.assign({panelClass:[U],duration:5e3},V));b&&(I=I||(()=>j.dismiss()),j.onAction().subscribe(()=>I()))}function at(U,$,b,I={}){console.debug(U),W("success",U,$,b,I)}function G(U,$,b,I={}){console.error(U),W("error",U,$,b,I)}function ot(U,$,b,I={}){console.info(U),W("info",U,$,b,I)}function it(U,$=3e5){U.isEnabled&&(dt&&clearInterval(dt),dt=setInterval(()=>(0,m.mG)(this,void 0,void 0,function*(){(0,a.cM)("CACHE","Checking for updates..."),function pt(U){(0,m.mG)(this,void 0,void 0,function*(){if(U.isEnabled&&(yield U.checkForUpdate())){if((0,a.cM)("CACHE","Activating changes to the cache..."),!(yield U.activateUpdate()))return;ot("Newer version of the application is available","Refresh",()=>location.reload())}})}(U)}),$))}function ft(U){return(0,m.mG)(this,void 0,void 0,function*(){const $=U.protocol||location.protocol,b=U.domain||location.hostname,I=U.port||location.port,V=U.use_domain?`${$}//${b}:${I}`:location.origin,j=(location.pathname+"/").replace("//","/");console.log("Mock:",U.mock,location.href.includes("mock=true"),"true"===localStorage.getItem("mock"));const q=U.mock||location.href.includes("mock=true")||"true"===localStorage.getItem("mock"),et={auth_type:"auth_code",scope:"public",host:`${b}${I?":"+I:""}`,auth_uri:`${V}/auth/oauth/authorize`,token_uri:`${V}/auth/oauth/token`,redirect_uri:`${location.origin}${j}oauth-resp.html`,handle_login:!U.local_login,use_iframe:!0,mock:q};return localStorage&&localStorage.setItem("mock",`${!!q&&!location.href.includes("mock=false")}`),q&&ot("Application in mock mode."),(0,E.cYp)(et)})}n(3619)},5038:(rt,Y,n)=>{function t(l){let a="";if(l)for(const g in l)l.hasOwnProperty(g)&&null!=l[g]&&(a+=`${a?"&":""}${g}=${l[g]}`);return a}n.d(Y,{U:()=>t})},8939:(rt,Y,n)=>{n.d(Y,{K:()=>g});var t=n(4505),l=n(6957),a=n(3184);let g=(()=>{class e{constructor(){this._timers={},this._intervals={},this._subscriptions={},this._initialised=new t.X(!1),this.initialised=this._initialised.asObservable()}get is_initialised(){return this._initialised.getValue()}ngOnDestroy(){this.destroy()}destroy(){for(const m in this._timers)m in this._timers&&this.clearTimeout(m);for(const m in this._intervals)m in this._intervals&&this.clearInterval(m);for(const m in this._subscriptions)m in this._subscriptions&&this.unsub(m)}timeout(m,_,h=300){if(!(m&&_&&_ instanceof Function))throw new Error(m?"Cannot create named timeout without a name":"Cannot create a timeout without a callback");this.clearTimeout(m),this._timers[m]=setTimeout(()=>{_(),this._timers[m]=null},h)}clearTimeout(m){this._timers[m]&&(clearTimeout(this._timers[m]),this._timers[m]=null)}interval(m,_,h=300){if(!(m&&_&&_ instanceof Function))throw new Error(m?"Cannot create named interval without a name":"Cannot create a interval without a callback");this.clearInterval(m),this._intervals[m]=setInterval(()=>_(),h)}clearInterval(m){this._intervals[m]&&(clearInterval(this._intervals[m]),this._intervals[m]=null)}subscription(m,_){this.unsub(m),this._subscriptions[m]=_}unsub(m){m in this._subscriptions&&(this._subscriptions[m]instanceof l.w?this._subscriptions[m].unsubscribe():this._subscriptions[m](),delete this._subscriptions[m])}unsubWith(m){const _=Object.keys(this._subscriptions).filter(h=>h.includes(m));for(const h of _)this.unsub(h)}}return e.\u0275fac=function(m){return new(m||e)},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},3245:(rt,Y,n)=>{n.d(Y,{Iy:()=>h,MZ:()=>u,NE:()=>T,O1:()=>A,RD:()=>K,Sv:()=>d,Tw:()=>_,Wn:()=>m,_5:()=>Z,cM:()=>i,fT:()=>E,hI:()=>M,kW:()=>e,n5:()=>R,o3:()=>C,xH:()=>s,yi:()=>B});var t=n(4929),l=n(5670),a=n(2401);let g="APP";function e(S){g=S}function i(S,v,f,L="debug",W=!1,at=g){if(window.debug||W){const G=["color: #E91E63","color: #3F51B5","color: default"];f?console[L](`%c[${at}]%c[${S}] %c${v}`,...G,f):console[L](`%c[${at}]%c[${S}] %c${v}`,...G)}}function m(S,v){const f=S[0];return v&&f in v?S.length>1?m(S.slice(1),v[f]||{}):v[f]:null}function _(S=[],v=""){return S.filter((f,L,W)=>W.indexOf(W.find(v?at=>at[v]===f[v]:at=>at===f))===L)}function h(S,v=0){return Math.floor(Math.random()*(S-v))+v}function T(S,v=5){for(S=`${S}`;S.length<v;)S=`0${S}`;return S}function A(S,v="abcdefghijklmnopqrstwvxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789"){let f="";for(let L=0;L<S;L++)f+=v[h(v.length)];return f}function Z(S,v){return(0,t.mG)(this,void 0,void 0,function*(){const f=v.open(a.z,Object.assign(Object.assign({},a.t),{data:S}));return Object.assign(Object.assign({},yield Promise.race([f.componentInstance.event.pipe((0,l.P)(L=>"done"===L.reason)).toPromise(),f.afterClosed().toPromise()])),{loading:L=>f.componentInstance.loading=L,close:()=>f.close()})})}function R(S,v=","){const f=new RegExp('(\\,|\\r?\\n|\\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^\\,\\r\\n]*))',"gi");let L=null;const W=[[]];for(;L=f.exec(S);)L[1].length&&","!==L[1]&&W.push([]),W[W.length-1].push(L[2]?L[2].replace(new RegExp('""',"g"),'"'):L[3]);const at=W.splice(0,1)[0];return W.map(ut=>{const ot={};for(let dt=0;dt<ut.length;dt++){const it=(at[dt]||"").split(" ").join("_").toLowerCase();try{ot[it]=JSON.parse(ut[dt])}catch(pt){ot[it]=ut[dt]||""}("TRUE"===ot[it]||"FALSE"===ot[it])&&(ot[it]="TRUE"===ot[it])}return ot})}function E(S){return new Promise((v,f)=>{if(S.target){const L=S.target,W=L.files[0];if(W){const at=new FileReader;at.readAsText(W,"UTF-8"),at.addEventListener("load",G=>{v(G.srcElement.result),L.value=""}),at.addEventListener("error",G=>{this.loading="",f(["Error loading file",G])})}}})}function C(S){if(S instanceof Array&&S.length>0){const f=Object.keys(S[0]).filter(L=>L in S[0]);return`${f.join(",")}\n${S.map(L=>f.map(W=>JSON.stringify(L[W])).join(",")).join("\n")}`}return""}function d(S,v){const f=document.createElement("a");f.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(v)),f.setAttribute("download",S),f.style.display="none",document.body.appendChild(f),f.click(),document.body.removeChild(f)}function s(S){const v=[...S],f=[];for(;v.length;){const L=v.pop();Array.isArray(L)?v.push(...L):f.push(L)}return f.reverse()}function u(S,v,f,L){return S>=f&&S<L||v>f&&v<L||f>=S&&f<v||L>S&&L<=v}const D=function p(S,v,f,L){return function(){let W=(S>>>=0)+(v>>>=0)|0;return S=v^v>>>9,v=(f>>>=0)+(f<<3)|0,W=W+(L=1+(L>>>=0)|0)|0,f=(f=f<<21|f>>>11)+W|0,(W>>>0)/4294967296}}(2654435769,608135816,3084996962,function N(S){let v=1779033703^S.length;for(let f=0;f<S.length;f++)v=Math.imul(v^S.charCodeAt(f),3432918353),v=v<<13|v>>>19;return function(){return v=Math.imul(v^v>>>16,2246822507),v=Math.imul(v^v>>>13,3266489909),(v^=v>>>16)>>>0}}("PlaceOS")());function B(S=100,v=0){return Math.floor(D()*(S-v))+v}function M(){return function J(){const v=(new Date).toLocaleTimeString(document.querySelector("html").getAttribute("lang")||navigator.language).toLowerCase();return v.indexOf("am")<0&&v.indexOf("pm")<0}()?"HH:mm":"h:mm a"}function K(S){const v=[];for(const f in S.controls)S.controls[f].valid||v.push(f);return v}},7741:(rt,Y,n)=>{n.d(Y,{mk:()=>x,Kk:()=>Kt,z5:()=>v.z,Xo:()=>_t.X,ui:()=>f.u,qL:()=>G,nb:()=>ft,JD:()=>St});var t=n(6362),l=n(587),a=n(5758),g=n(7317),e=n(2796),i=n(4770),m=n(1434),_=n(3188),h=n(5818),T=n(4683),A=n(1196),Z=n(4742),R=n(1604),E=n(1130),C=n(9861),d=n(5876),o=n(4476),s=n(3184),u=n(3499),r=n(3294),D=n(5670);n(9151);var p=n(1637),M=n(5306);function J(k,lt){if(1&k){const P=s.EpF();s.TgZ(0,"button",2),s.NdJ("click",function(){const Bt=s.CHM(P).$implicit,Vt=s.oxw();return Vt.action.emit(Bt.id),Vt.show=!1}),s._UZ(1,"app-icon",3),s.qZA()}if(2&k){const P=lt.$implicit,X=lt.index,Ot=s.oxw();s.Udp("top",Ot.show?-110*X-60+"%":""),s.xp6(1),s.Q6J("icon",P)}}let K=(()=>{class k extends r.KG{constructor(){super(...arguments),this.actions=[],this.action=new s.vpe}close(){this.timeout("close",()=>this.show=!1)}}return k.\u0275fac=function(){let lt;return function(X){return(lt||(lt=s.n5z(k)))(X||k)}}(),k.\u0275cmp=s.Xpm({type:k,selectors:[["a-popout-menu"]],inputs:{actions:"actions"},outputs:{action:"action"},features:[s.qOj],decls:4,vars:4,consts:[["mat-icon-button","","class","small absolute text-base center shadow",3,"top","click",4,"ngFor","ngForOf"],["name","root","mat-icon-button","",3,"click"],["mat-icon-button","",1,"small","absolute","text-base","center","shadow",3,"click"],[3,"icon"]],template:function(P,X){1&P&&(s.YNc(0,J,2,3,"button",0),s.TgZ(1,"button",1),s.NdJ("click",function(){return X.show=!X.show})("click",function(){return X.show?X.close():""},!1,s.Jf7),s.TgZ(2,"app-icon"),s._uU(3),s.qZA()()),2&P&&(s.Q6J("ngForOf",X.actions),s.xp6(1),s.ekj("show",X.show),s.xp6(2),s.Oqu(X.show?"add":"more_vert"))},styles:["[_nghost-%COMP%]{position:relative}app-icon[_ngcontent-%COMP%]{transition:transform .2s}button[_ngcontent-%COMP%]{background-color:#fff;color:rgba(#000,.85);font-size:1.25rem;height:2.5em;width:2.5em}button.show[_ngcontent-%COMP%]   app-icon[_ngcontent-%COMP%]{transform:rotate(45deg)}button.small[_ngcontent-%COMP%]{transition:top .2s,left .2s}\n/*# sourceMappingURL=popout-menu.component.ts-angular-inline--9.css.map*/"]}),k})();n(9685);var v=n(2401),f=n(9136);const L=["map-pin",""];function W(k,lt){if(1&k&&(s.TgZ(0,"div",2),s._uU(1),s.qZA()),2&k){const P=s.oxw();s.xp6(1),s.hij(" ",P.message," ")}}function at(k,lt){if(1&k){const P=s.EpF();s.O4$(),s.TgZ(0,"svg",3),s.NdJ("click",function(){return s.CHM(P),s.oxw().action()}),s.TgZ(1,"g"),s._UZ(2,"path",4),s.qZA()()}if(2&k){const P=s.oxw();s.ekj("action",P.action),s.xp6(2),s.Udp("fill",P.fill)("stroke",P.stroke)}}let G=(()=>{class k{constructor(P){this._details=P,this.message=this._details.message,this.fill=this._details.fill||"#e53935",this.stroke=this._details.stroke||"#fff",this.action=this._details.action||null}ngOnInit(){setTimeout(()=>this.show=!0,300),setTimeout(()=>this.show_message=!0,1e3)}}return k.\u0275fac=function(P){return new(P||k)(s.Y36(f.u))},k.\u0275cmp=s.Xpm({type:k,selectors:[["","map-pin",""]],attrs:L,decls:2,vars:2,consts:[["name","message","class","p-2 m-2 rounded bg-white text-gray-700 shadow",4,"ngIf"],["name","pin","viewBox","0 0 380 560",3,"action","click",4,"ngIf"],["name","message",1,"p-2","m-2","rounded","bg-white","text-gray-700","shadow"],["name","pin","viewBox","0 0 380 560",3,"click"],["stroke-width","25","d","M182.9,551.7c0,0.1,0.2,0.3,0.2,0.3S358.3,283,358.3,194.6c0-130.1-88.8-186.7-175.4-186.9\n            C96.3,7.9,7.5,64.5,7.5,194.6c0,88.4,175.3,357.4,175.3,357.4S182.9,551.7,182.9,551.7z M122.2,187.2c0-33.6,27.2-60.8,60.8-60.8\n            c33.6,0,60.8,27.2,60.8,60.8S216.5,248,182.9,248C149.4,248,122.2,220.8,122.2,187.2z"]],template:function(P,X){1&P&&(s.YNc(0,W,2,1,"div",0),s.YNc(1,at,3,6,"svg",1)),2&P&&(s.Q6J("ngIf",X.message&&X.show_message),s.xp6(1),s.Q6J("ngIf",X.show))},directives:[t.O5],styles:["[_nghost-%COMP%]{position:absolute;bottom:0;left:50%;width:24rem;display:flex;flex-direction:column;align-items:center;transform:translate(-50%);z-index:-1}div[_ngcontent-%COMP%]{animation:fade-in-top 1s}.action[_ngcontent-%COMP%]{pointer-events:auto}svg[_ngcontent-%COMP%]{width:2rem;animation:fade-in-top 1s}@keyframes fade-in-top{0%{opacity:0;transform:translateY(-100%)}to{opacity:1;transform:translateY(0)}}\n/*# sourceMappingURL=map-pin.component.ts-angular-inline--12.css.map*/"]}),k})();var ut=n(9380);const ot=["map-radius",""];function dt(k,lt){if(1&k&&(s.TgZ(0,"span",6),s._uU(1),s.qZA()),2&k){const P=s.oxw(3);s.xp6(1),s.hij(" Last updated: ",P.last_seen_at," ")}}function it(k,lt){if(1&k&&(s.TgZ(0,"div",4),s._uU(1),s.YNc(2,dt,2,1,"span",5),s.qZA()),2&k){const P=s.oxw(2);s.Udp("top","-"+P.radius/2*P.zoom+"px"),s.xp6(1),s.hij(" ",P.message," "),s.xp6(1),s.Q6J("ngIf",P.last_seen)}}function pt(k,lt){if(1&k){const P=s.EpF();s.ynx(0,1),s.NdJ("resize",function(){return s.CHM(P),s.oxw().updateRadius()},!1,s.Jf7),s._UZ(1,"div",2),s.YNc(2,it,3,4,"div",3),s.BQk()}if(2&k){const P=s.oxw();s.xp6(1),s.Udp("border-color",P.stroke)("background-color",P.fill+"40")("width",P.radius*P.zoom+"px")("height",P.radius*P.zoom+"px"),s.xp6(1),s.Q6J("ngIf",P.message&&P.show_message)}}let ft=(()=>{class k{constructor(P,X){this._details=P,this._el=X,this.zoom=1,this.radius=this._details.radius||10,this.message=this._details.message,this.fill=this._details.fill||"#e53935",this.stroke=this._details.stroke||"#e53935",this.last_seen=this._details.last_seen||0,this._details.zoom.subscribe(Ot=>Math.max(.5,this.zoom=Ot||1))}get last_seen_at(){return(0,ut.Z)(1e3*this.last_seen)+" ago"}ngOnInit(){setTimeout(()=>this.show=!0,300),setTimeout(()=>this.show_message=!0,1e3)}ngAfterViewInit(){this.updateRadius()}updateRadius(){const P=this._el.nativeElement.getBoundingClientRect();if(!P.width)return setTimeout(()=>this.updateRadius(),300);this.radius=Math.max(64,(this._details.radius||10)*(P.width||10))}}return k.\u0275fac=function(P){return new(P||k)(s.Y36(f.u),s.Y36(s.SBq))},k.\u0275cmp=s.Xpm({type:k,selectors:[["","map-radius",""]],attrs:ot,decls:1,vars:1,consts:[[3,"resize",4,"ngIf"],[3,"resize"],["radius","",1,"center","border-4","rounded-full","border-dashed"],["message","","class","p-2 m-2 rounded bg-white text-gray-700 shadow absolute top-0 whitespace-no-wrap flex flex-col",3,"top",4,"ngIf"],["message","",1,"p-2","m-2","rounded","bg-white","text-gray-700","shadow","absolute","top-0","whitespace-no-wrap","flex","flex-col"],["class","text-xs",4,"ngIf"],[1,"text-xs"]],template:function(P,X){1&P&&s.YNc(0,pt,3,9,"ng-container",0),2&P&&s.Q6J("ngIf",X.show&&X.radius)},directives:[t.O5],styles:["[_nghost-%COMP%]{position:absolute;height:100%;width:100%}[name=message][_ngcontent-%COMP%]{transform:translate(-50%,-120%)}div[_ngcontent-%COMP%]{animation:fade-in-top 1s}@keyframes fade-in-top{0%{opacity:0;transform:translate(-50%,-220%)}to{opacity:1;transform:translate(-50%,-120%)}}\n/*# sourceMappingURL=map-radius.component.ts-angular-inline--13.css.map*/"]}),k})();function gt(k,lt){1&k&&(s.ynx(0),s.Hsn(1),s.BQk())}const H=function(k){return[k]};function mt(k,lt){if(1&k&&(s.TgZ(0,"a",8),s._uU(1),s.qZA()),2&k){const P=lt.$implicit;s.Q6J("routerLink",s.VKq(2,H,P.route)),s.xp6(1),s.hij(" ",P.name," ")}}function U(k,lt){if(1&k&&(s.ynx(0),s.TgZ(1,"div",4)(2,"app-icon"),s._uU(3),s.qZA()(),s.TgZ(4,"div",5),s.YNc(5,gt,2,0,"ng-container",1),s.qZA(),s.TgZ(6,"div",6),s.YNc(7,mt,2,4,"a",7),s.qZA(),s.BQk()),2&k){const P=s.oxw(),X=s.MAs(3);s.xp6(1),s.ekj("text-success",!P.error)("text-error",P.error),s.xp6(2),s.Oqu(P.error?"close":"done"),s.xp6(2),s.Q6J("ngIf",!P.error)("ngIfElse",X),s.xp6(2),s.Q6J("ngForOf",P.links)}}function $(k,lt){if(1&k&&(s.TgZ(0,"p",9),s._uU(1),s.qZA()),2&k){const P=s.oxw();s.xp6(1),s.Oqu(P.error)}}function b(k,lt){if(1&k&&(s._UZ(0,"mat-spinner",10),s.TgZ(1,"p",11),s._uU(2),s.qZA()),2&k){const P=s.oxw();s.Q6J("diameter",32),s.xp6(2),s.Oqu(P.loading)}}const I=["*"];let V=(()=>{class k{constructor(){this.loading="",this.error="",this.links=[]}}return k.\u0275fac=function(P){return new(P||k)},k.\u0275cmp=s.Xpm({type:k,selectors:[["status-overlay"]],inputs:{loading:"loading",error:"error",links:"links"},ngContentSelectors:I,decls:6,vars:2,consts:[["status-overlay","",1,"fixed","inset-0","flex","flex-col","bg-secondary","items-center","justify-center","z-50","text-white"],[4,"ngIf","ngIfElse"],["error_msg",""],["load_state",""],[1,"text-4xl","rounded-full","bg-white","mb-4"],[1,"text-center","text-lg","mb-4"],[1,"flex","items-center","space-x-2"],["button","","mat-button","","class","w-32",3,"routerLink",4,"ngFor","ngForOf"],["button","","mat-button","",1,"w-32",3,"routerLink"],["error",""],[1,"mb-4",3,"diameter"],["loading","",1,"text-center","text-lg"]],template:function(P,X){if(1&P&&(s.F$t(),s.TgZ(0,"div",0),s.YNc(1,U,8,8,"ng-container",1),s.qZA(),s.YNc(2,$,2,1,"ng-template",null,2,s.W1O),s.YNc(4,b,3,2,"ng-template",null,3,s.W1O)),2&P){const Ot=s.MAs(5);s.xp6(1),s.Q6J("ngIf",!X.loading)("ngIfElse",Ot)}},styles:[""]}),k})();n(158),n(7202),n(1110);var _t=n(3970),Et=(n(4618),n(6790),n(4316)),Pt=(n(9627),n(2097)),Ut=n(3619);function It(k,lt){if(1&k&&(s.TgZ(0,"div",5)(1,"i-map",6),s._UZ(2,"mat-spinner",7),s.qZA(),s.TgZ(3,"div",8),s._uU(4),s.qZA()()),2&k){const P=s.oxw();s.xp6(1),s.Q6J("src",P.level.map_id)("styles",P.style_map)("features",P.features),s.xp6(3),s.hij(" ",null==P.level?null:P.level.name," ")}}let Lt=(()=>{class k extends r.KG{constructor(P,X){super(),this._data=P,this._org=X,this.event=new s.vpe,this.item=this._data.item,this.style_map={},console.log("Locate Data:",this._data)}get level(){return this.item.level||this._org.levelWithID(this.item.zones||[])}ngOnInit(){this.timeout("init",()=>{this.processFeature(),this.processStyles()},1e3)}processStyles(){var P;const X={};(null===(P=this.item)||void 0===P?void 0:P.map_id)&&(X["#zones"]={display:"none"},X["#Zones"]={display:"none"}),this.style_map=X}processFeature(){if(!this.item)return null;const P={location:this.item.map_id,track_id:"focus_item",content:G,data:{name:this.item.name},z_index:99,zoom:100};console.log("Feature:",P),this.features=[P]}}return k.\u0275fac=function(P){return new(P||k)(s.Y36(a.WI),s.Y36(Ut.w7))},k.\u0275cmp=s.Xpm({type:k,selectors:[["map-locate-modal"]],outputs:{event:"event"},features:[s.qOj],decls:9,vars:2,consts:[[1,"h-12","px-2"],[1,"ml-2"],["body","","class","relative overflow-hidden pointer-events-none",4,"ngIf"],[1,"w-full","border-t","border-gray-200","flex","items-center","justify-center","p-2"],["mat-button","","mat-dialog-close","",1,"inverse","w-32"],["body","",1,"relative","overflow-hidden","pointer-events-none"],[3,"src","styles","features"],["diameter","64"],[1,"absolute","top-2","right-2","py-2","px-4","bg-white","rounded-3xl","shadow"]],template:function(P,X){1&P&&(s.TgZ(0,"header",0)(1,"app-icon"),s._uU(2,"place"),s.qZA(),s.TgZ(3,"h1",1),s._uU(4),s.qZA()(),s.YNc(5,It,5,4,"div",2),s.TgZ(6,"footer",3)(7,"button",4),s._uU(8," Close "),s.qZA()()),2&P&&(s.xp6(4),s.Oqu(X.item.name),s.xp6(1),s.Q6J("ngIf",X.level))},styles:["[body][_ngcontent-%COMP%]{min-width:80vw!important;width:80vw;height:65vh}\n/*# sourceMappingURL=map-locate-modal.component.ts-angular-inline--19.css.map*/"]}),k})();var Ft=n(2581);let St=(()=>{class k{}return k.\u0275fac=function(P){return new(P||k)},k.\u0275cmp=s.Xpm({type:k,selectors:[["app-unauthorised"]],decls:9,vars:0,consts:function(){let lt,P,X;return lt=$localize`:@@forbiddenLabel56a20d819b6e59b0de025988a3f9ed7d6a1bc08c4136336337692896315:Access forbidden.`,P=$localize`:@@invalidPermissionLabel7afe2eb69e486929c5a29d67e6f24975f97604c48887025903012875176: You do not have permission to view this page and your access attempt has been recorded. `,X=$localize`:@@contactAdminLabel1520ecc736c82366b62d64a515b1c3b222c9e1df1824441478452454363: Contact your Administrator if you feel that you should have access. `,[[1,"unauthorised","rounded","m-4","text-center","bg-white","text-black","border","border-gray-400","p-4","shadow"],[1,"text-4xl"],[1,"text-2xl"],lt,[1,"py-4"],P,X]},template:function(P,X){1&P&&(s.TgZ(0,"div",0)(1,"h1",1),s._uU(2,"403"),s.qZA(),s.TgZ(3,"h3",2),s.SDv(4,3),s.qZA(),s.TgZ(5,"p",4),s.SDv(6,5),s.qZA(),s.TgZ(7,"p"),s.SDv(8,6),s.qZA()())},styles:["[_nghost-%COMP%]{display:flex;align-items:center;justify-content:center}.unauthorised[_ngcontent-%COMP%]{width:28em;max-width:calc(100vw - 1rem)}@media (prefers-color-scheme: dark){.unauthorised[_ngcontent-%COMP%]{background-color:#262626;color:#fff}}\n/*# sourceMappingURL=unauthorised.component.ts-angular-inline--22.css.map*/"]}),k})();var kt=n(4929),w=n(9481);class nt{}let x=(()=>{class k{constructor(P,X){this._router=P,this._access=X}canActivate(P,X){return(0,kt.mG)(this,void 0,void 0,function*(){return this.checkUser()})}canLoad(P,X){return(0,kt.mG)(this,void 0,void 0,function*(){return this.checkUser()})}checkUser(){var P;return(0,kt.mG)(this,void 0,void 0,function*(){yield(0,u.ttN)().pipe((0,D.P)(Bt=>Bt)).toPromise();const X=yield r.pN.pipe((0,D.P)(Bt=>!!Bt)).toPromise(),Ot=!(!X||(null===(P=this._access)||void 0===P?void 0:P.group)&&!X.groups.includes(this._access.group));return Ot||this._router.navigate(["/unauthorised"]),!!Ot})}}return k.\u0275fac=function(P){return new(P||k)(s.LFG(w.F0),s.LFG(nt,8))},k.\u0275prov=s.Yz7({token:k,factory:k.\u0275fac,providedIn:"root"}),k})();const Q=[_.Bb,e.Tx,i.lN,m.LD,g.ot,_.Bb,m.LD,a.Is,h.FA,T.c,R.Iq,Z.Cq,A.Hi,C.TU,d.HT,o.eL,Et.JX];let Kt=(()=>{class k{}return k.\u0275fac=function(P){return new(P||k)},k.\u0275mod=s.oAB({type:k}),k.\u0275inj=s.cJS({providers:[{provide:E.Ad,useValue:"en-GB"},{provide:f.u,useValue:{}}],imports:[[t.ez,l.u5,l.UX,...Q],_.Bb,e.Tx,i.lN,m.LD,g.ot,_.Bb,m.LD,a.Is,h.FA,T.c,R.Iq,Z.Cq,A.Hi,C.TU,d.HT,o.eL,Et.JX]}),k})();s.B6R(p.m,[g.lW,M.o,t.O5,Z.Ou],[]),s.B6R(K,[t.sg,g.lW,M.o],[]),s.B6R(v.z,[a.uh,t.O5,M.o,g.lW,a.ZT,Z.Ou],[]),s.B6R(V,[t.O5,M.o,t.sg,g.zs,Z.Ou],[]),s.B6R(Pt.T,[t.O5,g.lW,M.o],[]),s.B6R(Lt,[M.o,t.O5,f.p,Z.Ou,g.lW,a.ZT],[]),s.B6R(Ft.K,[t.sg,t.O5,g.lW,M.o],[])},1637:(rt,Y,n)=>{n.d(Y,{m:()=>e});var t=n(3184);function l(i,m){if(1&i&&(t.TgZ(0,"div")(1,"app-icon"),t._uU(2),t.qZA()()),2&i){const _=t.oxw();t.Tol("state center "+_.state),t.xp6(2),t.hij(" ","success"===_.state?"done":"close"," ")}}function a(i,m){1&i&&(t.TgZ(0,"div",4),t._UZ(1,"mat-spinner",5),t.qZA()),2&i&&(t.xp6(1),t.Q6J("diameter",16))}const g=["*"];let e=(()=>{class i{constructor(){this.className="material-icons",this.state=""}}return i.\u0275fac=function(_){return new(_||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["action-icon"]],inputs:{icon:"icon",className:"className",content:"content",loading:"loading",disabled:"disabled",state:"state"},ngContentSelectors:g,decls:6,vars:8,consts:[["mat-icon-button","","title","",1,"relative","flex","items-center","justify-center","h-8","w-8",3,"disabled"],["root","",3,"className","icon"],[3,"class",4,"ngIf"],["class","loader center",4,"ngIf"],[1,"loader","center"],[3,"diameter"]],template:function(_,h){1&_&&(t.F$t(),t.TgZ(0,"button",0)(1,"app-icon",1),t._uU(2),t.Hsn(3),t.qZA(),t.YNc(4,l,3,3,"div",2),t.YNc(5,a,2,1,"div",3),t.qZA()),2&_&&(t.ekj("success","success"===h.state),t.Q6J("disabled",h.loading||h.disabled),t.xp6(1),t.Q6J("className",h.className)("icon",h.icon),t.xp6(1),t.hij(" ",h.content," "),t.xp6(2),t.Q6J("ngIf",!h.loading&&h.state),t.xp6(1),t.Q6J("ngIf",h.loading))},styles:[".action-icon.fade[_ngcontent-%COMP%] > app-icon[_ngcontent-%COMP%]{opacity:.35}[center][_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.success[_ngcontent-%COMP%]{pointer-events:none}.success[_ngcontent-%COMP%]   app-icon[root][_ngcontent-%COMP%]{opacity:.2}.state.success[_ngcontent-%COMP%]{color:#388e3c}.state.error[_ngcontent-%COMP%]{color:#e53935}\n/*# sourceMappingURL=action-icon.component.ts-angular-inline--7.css.map*/"]}),i})()},2401:(rt,Y,n)=>{n.d(Y,{t:()=>i,z:()=>m});var t=n(3184),l=n(5758);function a(_,h){if(1&_&&(t.TgZ(0,"main",4),t._UZ(1,"app-icon",5)(2,"p",6),t.qZA()),2&_){const T=t.oxw();t.xp6(1),t.Q6J("icon",T.icon),t.xp6(1),t.Q6J("innerHTML",T.content,t.oJD)}}function g(_,h){if(1&_){const T=t.EpF();t.TgZ(0,"footer",7)(1,"button",8),t._uU(2),t.qZA(),t.TgZ(3,"button",9),t.NdJ("click",function(){return t.CHM(T),t.oxw().onConfirm()}),t._uU(4),t.qZA()()}if(2&_){const T=t.oxw();t.xp6(2),t.hij(" ",T.cancel_text," "),t.xp6(2),t.hij(" ",T.confirm_text," ")}}function e(_,h){if(1&_&&(t.TgZ(0,"main",10)(1,"div",11),t._UZ(2,"mat-spinner",12),t.TgZ(3,"p"),t._uU(4),t.qZA()()()),2&_){const T=t.oxw();t.xp6(4),t.Oqu(T.loading)}}const i={height:"auto",width:"24em",maxHeight:"calc(100vh - 2em)",maxWidth:"calc(100vw - 2em)"};let m=(()=>{class _{constructor(T,A){this._dialog_ref=T,this._data=A,this.event=new t.vpe,this.title=this._data.title||"Confirm",this.content=this._data.content||"Are you sure?",this.confirm_text=this._data.confirm_text||"Accept",this.cancel_text=this._data.cancel_text||"Cancel",this.icon=this._data.icon||{class:"material-icons",content:"done"},this.disableClose=()=>this._dialog_ref.disableClose=!0,this.enableClose=()=>this._dialog_ref.disableClose=!1}onConfirm(){this.event.emit({reason:"done"})}}return _.\u0275fac=function(T){return new(T||_)(t.Y36(l.so),t.Y36(l.WI))},_.\u0275cmp=t.Xpm({type:_,selectors:[["confirm-modal"]],outputs:{event:"event"},decls:7,vars:4,consts:[["mat-dialog-title",""],["class","flex flex-col items-center space-y-2 p-4",4,"ngIf","ngIfElse"],["class","flex items-center justify-center p-2 space-x-2",4,"ngIf"],["load_state",""],[1,"flex","flex-col","items-center","space-y-2","p-4"],[1,"text-5xl",3,"icon"],["content","",1,"text-center","text-sm","w-[22rem]",3,"innerHTML"],[1,"flex","items-center","justify-center","p-2","space-x-2"],["mat-button","","mat-dialog-close","",1,"inverse","w-32"],["mat-button","","name","accept",1,"w-32",3,"click"],["loading",""],[1,"w-full","h-48","flex","flex-col","items-center","justify-center","space-y-2"],["diameter","32"]],template:function(T,A){if(1&T&&(t.TgZ(0,"header")(1,"h3",0),t._uU(2),t.qZA()(),t.YNc(3,a,3,2,"main",1),t.YNc(4,g,5,2,"footer",2),t.YNc(5,e,5,1,"ng-template",null,3,t.W1O)),2&T){const Z=t.MAs(6);t.xp6(2),t.Oqu(A.title),t.xp6(1),t.Q6J("ngIf",!A.loading)("ngIfElse",Z),t.xp6(1),t.Q6J("ngIf",!A.loading)}},styles:[""]}),_})()},1110:(rt,Y,n)=>{n.d(Y,{C:()=>u});var t=n(3184),l=n(9861),a=n(4316),g=n(7217),e=n(3294),i=n(5901),m=n(5876),_=n(6362);function h(r,D){if(1&r&&(t.TgZ(0,"div",10),t._uU(1),t.qZA()),2&r){const B=t.oxw(),N=B.index,p=B.$implicit,M=t.oxw();t.Udp("width",(M.column_size[N]||"8")+"em")("flex","flex"===M.column_size[N]?"1":""),t.xp6(1),t.hij(" ",M.display_column[N]||p," ")}}function T(r,D){if(1&r&&(t.ynx(0),t._uU(1),t.BQk()),2&r){const B=t.oxw().$implicit,N=t.oxw().$implicit;t.xp6(1),t.Oqu(B[N])}}function A(r,D){1&r&&t.GkF(0)}const Z=function(r,D,B){return{data:r,row:D,key:B}};function R(r,D){if(1&r&&t.YNc(0,A,1,0,"ng-container",14),2&r){const B=t.oxw().$implicit,N=t.oxw().$implicit,p=t.oxw();t.Q6J("ngTemplateOutlet",p.template[N])("ngTemplateOutletContext",t.kEZ(2,Z,B[N],B,N))}}function E(r,D){if(1&r&&(t.TgZ(0,"div",11),t.YNc(1,T,2,1,"ng-container",12),t.YNc(2,R,1,6,"ng-template",null,13,t.W1O),t.qZA()),2&r){const B=D.$implicit,N=t.MAs(3),p=t.oxw(),M=p.index,J=p.$implicit,K=t.oxw();t.Udp("width",(K.column_size[M]||"8")+"em")("flex","flex"===K.column_size[M]?"1":""),t.Q6J("title",B[J]),t.xp6(1),t.Q6J("ngIf",!K.template[J])("ngIfElse",N)}}function C(r,D){if(1&r&&(t.ynx(0)(1,7),t.YNc(2,h,2,5,"div",8),t.YNc(3,E,4,7,"div",9),t.BQk()()),2&r){const B=D.$implicit;t.xp6(1),t.Q6J("cdkColumnDef",B)}}function d(r,D){1&r&&t._UZ(0,"cdk-header-row",15)}function o(r,D){if(1&r){const B=t.EpF();t.TgZ(0,"cdk-row",16),t.NdJ("click",function(){const M=t.CHM(B).$implicit;return t.oxw().row_clicked.emit(M)}),t.qZA()}}function s(r,D){if(1&r&&(t.TgZ(0,"p",17),t._uU(1),t.qZA()),2&r){const B=t.oxw();t.xp6(1),t.hij(" ",B.empty||"No data to display"," ")}}let u=(()=>{class r extends e.KG{constructor(){super(...arguments),this.pagination=!1,this.page_size=7,this.column_size=[],this.template={},this.row_clicked=new t.vpe,this.data_source=new g.by([])}ngAfterViewInit(){this.data_source.sort=this._sort,this.data_source.paginator=this.pagination?this._paginator:null,this.data_source.filterPredicate=(B,N)=>{for(const p in B){if("string"==typeof B[p]&&B[p].toLowerCase().includes(N.toLowerCase()))return!0;if(B[p]===N)return!0}return!1}}ngOnChanges(B){B.dataSource&&this.dataSource&&(this.dataSource instanceof i.y?this.subscription("data",this.dataSource.subscribe(N=>this.data_source.data=N)):this.data_source.data=this.dataSource),B.pagination&&(this.data_source.paginator=this.pagination?this._paginator:null),B.filter&&(this.data_source.filter=(this.filter||"").trim().toLowerCase()),B.columns&&this.columns&&(this.display_column=this.columns.map((N,p)=>(this.display_column||[])[p]||N.split("_").join(" "))),this.column_size||(this.column_size=[])}}return r.\u0275fac=function(){let D;return function(N){return(D||(D=t.n5z(r)))(N||r)}}(),r.\u0275cmp=t.Xpm({type:r,selectors:[["custom-table"]],viewQuery:function(B,N){if(1&B&&(t.Gf(l.NW,5),t.Gf(a.YE,5)),2&B){let p;t.iGM(p=t.CRH())&&(N._paginator=p.first),t.iGM(p=t.CRH())&&(N._sort=p.first)}},inputs:{dataSource:"dataSource",pagination:"pagination",page_size:"page_size",filter:"filter",display_column:"display_column",columns:"columns",column_size:"column_size",empty:"empty",template:"template"},outputs:{row_clicked:"row_clicked"},features:[t.qOj,t.TTD],decls:7,vars:8,consts:[["matSort","",3,"dataSource"],[4,"ngFor","ngForOf"],["class","flex items-center bg-white sticky top-0 z-10",4,"cdkHeaderRowDef"],["row","","class","flex z-0 relative hover:bg-black/5",3,"click",4,"cdkRowDef","cdkRowDefColumns"],["cdkNoDataRow",""],["footer","",3,"hidden"],[3,"pageSize","hidePageSize","showFirstLastButtons"],[3,"cdkColumnDef"],["cdk-header-cell","","class","capitalize p-2","mat-sort-header","",3,"width","flex",4,"cdkHeaderCellDef"],["cdk-cell","","class","p-2 truncate flex items-center",3,"width","flex","title",4,"cdkCellDef"],["cdk-header-cell","","mat-sort-header","",1,"capitalize","p-2"],["cdk-cell","",1,"p-2","truncate","flex","items-center",3,"title"],[4,"ngIf","ngIfElse"],["cell_outlet",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"flex","items-center","bg-white","sticky","top-0","z-10"],["row","",1,"flex","z-0","relative","hover:bg-black/5",3,"click"],[1,"w-full","p-4","text-center","opacity-30"]],template:function(B,N){1&B&&(t.TgZ(0,"cdk-table",0),t.YNc(1,C,4,1,"ng-container",1),t.YNc(2,d,1,0,"cdk-header-row",2),t.YNc(3,o,1,0,"cdk-row",3),t.YNc(4,s,2,1,"ng-template",4),t.qZA(),t.TgZ(5,"div",5),t._UZ(6,"mat-paginator",6),t.qZA()),2&B&&(t.Q6J("dataSource",N.data_source),t.xp6(1),t.Q6J("ngForOf",N.columns),t.xp6(1),t.Q6J("cdkHeaderRowDef",N.columns),t.xp6(1),t.Q6J("cdkRowDefColumns",N.columns),t.xp6(2),t.Q6J("hidden",!N.pagination),t.xp6(1),t.Q6J("pageSize",N.page_size)("hidePageSize",!0)("showFirstLastButtons",!0))},directives:[m.zC,a.YE,_.sg,m.fo,m.D5,a.nU,m.O_,_.O5,_.tP,m.s$,m.xN,m.Sq,m._J,m.r2,l.NW],styles:["cdk-header-row[_ngcontent-%COMP%]{position:sticky;border-bottom:1px solid #999;font-weight:500;text-transform:capitalize;min-height:3rem}cdk-row[_ngcontent-%COMP%]{border-bottom:1px solid rgba(0,0,0,.1)}cdk-row[_ngcontent-%COMP%]:hover{background-color:#f0f0f0}\n/*# sourceMappingURL=custom-table.component.ts-angular-inline--14.css.map*/"]}),r})()},3970:(rt,Y,n)=>{n.d(Y,{X:()=>d});var t=n(4476),l=n(3184),a=n(3294),g=n(4244),e=n(6362),i=n(7202);const m=["customTooltip",""];function _(o,s){1&o&&l.GkF(0)}function h(o,s){if(1&o&&(l.ynx(0),l.YNc(1,_,1,0,"ng-container",4),l.BQk()),2&o){const u=l.oxw(2);l.xp6(1),l.Q6J("ngComponentOutlet",u.content)("ngComponentOutletInjector",u.injector)}}function T(o,s){if(1&o&&(l.ynx(0),l._UZ(1,"div",5),l.ALo(2,"sanitize"),l.BQk()),2&o){const u=l.oxw(2);l.xp6(1),l.Q6J("innerHTML",l.lcZ(2,1,u.content),l.oJD)}}function A(o,s){1&o&&l.GkF(0)}function Z(o,s){if(1&o&&(l.ynx(0),l.YNc(1,A,1,0,"ng-container",6),l.BQk()),2&o){const u=l.oxw(2);l.xp6(1),l.Q6J("ngTemplateOutlet",u.content)("ngTemplateOutletContext",u.data)}}function R(o,s){if(1&o&&(l.TgZ(0,"div",1),l.YNc(1,h,2,2,"ng-container",2),l.YNc(2,T,3,3,"ng-container",2),l.YNc(3,Z,2,2,"ng-container",3),l.qZA()),2&o){const u=l.oxw();l.Q6J("ngSwitch",u.type),l.xp6(1),l.Q6J("ngSwitchCase","component"),l.xp6(1),l.Q6J("ngSwitchCase","html")}}const E=["*"];let C=(()=>{class o{constructor(u){this.data=u.data,this.close=u.close||(()=>null)}}return o.\u0275fac=function(u){l.$Z()},o.\u0275prov=l.Yz7({token:o,factory:o.\u0275fac}),o})(),d=(()=>{class o extends a.KG{constructor(u,r,D){super(),this._element=u,this._overlay=r,this._injector=D,this.backdrop=!0,this.hover=!1,this.type="template",this._overlay_ref=null,this.onClick=()=>this.open(),this.onTouch=()=>this.open(),this.onEnter=()=>this.hover?this.open():"",this.onLeave=()=>this.hover?this.close():""}ngOnChanges(u){this._updateInjector(),this._overlay_ref&&(u.x_pos||u.y_pos||u.content)&&this.open()}ngOnDestroy(){super.ngOnDestroy(),this.close()}open(){!this.content||(this._updateType(),this._overlay_ref&&this.close(),this._portal&&(this._overlay_ref=this._overlay.create({hasBackdrop:!!this.backdrop,positionStrategy:this._overlay.position().flexibleConnectedTo(this._element).withPositions([{originX:this.x_pos||"end",originY:("top"===this.y_pos?"bottom":"bottom"==this.y_pos?"top":this.y_pos)||"bottom",overlayX:this.x_pos||"end",overlayY:this.y_pos||"top"}])}),this._overlay_ref.attach(this._portal),this.backdrop&&this.subscription("backdrop",this._overlay_ref.backdropClick().subscribe(()=>this.close()))))}close(){this._overlay_ref&&(this._overlay_ref.dispose(),this._overlay_ref=null)}_updateType(){this.type="string"==typeof this.content?"html":this.content instanceof l.Rgc?"template":"component"}_updateInjector(){this.injector=l.zs3.create({providers:[{provide:C,useValue:{data:this.data,close:()=>this.close()}}],parent:this._injector})}}return o.\u0275fac=function(u){return new(u||o)(l.Y36(l.SBq),l.Y36(g.aV),l.Y36(l.zs3))},o.\u0275cmp=l.Xpm({type:o,selectors:[["","customTooltip",""]],viewQuery:function(u,r){if(1&u&&l.Gf(t.ig,5),2&u){let D;l.iGM(D=l.CRH())&&(r._portal=D.first)}},hostBindings:function(u,r){1&u&&l.NdJ("click",function(){return r.onClick()})("touchend",function(){return r.onTouch()})("mouseenter",function(){return r.onEnter()})("mouseleave",function(){return r.onLeave()})},inputs:{x_pos:["xPosition","x_pos"],y_pos:["yPosition","y_pos"],content:"content",data:"data",backdrop:"backdrop",hover:"hover"},features:[l.qOj,l.TTD],attrs:m,ngContentSelectors:E,decls:2,vars:0,consts:[["cdk-portal",""],["custom-tooltip","",1,"relative",3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[4,"ngComponentOutlet","ngComponentOutletInjector"],[3,"innerHTML"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(u,r){1&u&&(l.F$t(),l.Hsn(0),l.YNc(1,R,4,3,"ng-template",0))},directives:[t.bH,e.RF,e.n9,e.$G,e.ED,e.tP],pipes:[i.n],encapsulation:2}),o})()},2097:(rt,Y,n)=>{n.d(Y,{T:()=>g});var t=n(3294),l=n(3184);function a(e,i){if(1&e){const m=l.EpF();l.TgZ(0,"div",1)(1,"div",2),l._uU(2),l.qZA(),l.TgZ(3,"button",3),l.NdJ("click",function(){return l.CHM(m),l.oxw().close()}),l.TgZ(4,"app-icon"),l._uU(5,"close"),l.qZA()()()}if(2&e){const m=l.oxw();l.ekj("bg-blue-600","info"===m.banner.type||!m.banner.type)("bg-pending","warn"===m.banner.type)("bg-error","error"===m.banner.type),l.xp6(2),l.Oqu(null==m.banner?null:m.banner.content)}}let g=(()=>{class e{constructor(m){this._settings=m}get has_viewed(){var m;return!(null===(m=this.banner)||void 0===m?void 0:m.content)||localStorage.getItem("PLACE.last_banner")===this.banner.id}get banner(){return this._settings.get("app.general.banner")}close(){var m;localStorage.setItem("PLACE.last_banner",(null===(m=this.banner)||void 0===m?void 0:m.id)||"")}}return e.\u0275fac=function(m){return new(m||e)(l.Y36(t.gb))},e.\u0275cmp=l.Xpm({type:e,selectors:[["global-banner"]],decls:1,vars:1,consts:[["class","flex items-center w-full text-white p-4 space-x-4",3,"bg-blue-600","bg-pending","bg-error",4,"ngIf"],[1,"flex","items-center","w-full","text-white","p-4","space-x-4"],[1,"flex-1"],["mat-icon-button","",3,"click"]],template:function(m,_){1&m&&l.YNc(0,a,6,7,"div",0),2&m&&l.Q6J("ngIf",!_.has_viewed)},styles:["[_nghost-%COMP%]{display:block;width:100%}\n/*# sourceMappingURL=global-banner.component.ts-angular-inline--18.css.map*/"]}),e})()},6790:(rt,Y,n)=>{n.d(Y,{G:()=>A});var t=n(4929),l=n(73),a=n(6638),g=n(5670),e=n(3499),i=n(3184),m=n(6362),_=n(4742);function h(Z,R){1&Z&&(i.TgZ(0,"div",2),i._uU(1," Unable to reach server... Some features may not work. "),i.qZA())}function T(Z,R){1&Z&&(i.TgZ(0,"div",3),i._UZ(1,"mat-spinner",4),i.qZA()),2&Z&&(i.xp6(1),i.Q6J("diameter",64))}let A=(()=>{class Z{constructor(E,C){this._org=E,this._spaces=C}get online(){return(0,e.Ggh)()}ngOnInit(){return(0,t.mG)(this,void 0,void 0,function*(){this.loading=!0,yield this._org.initialised.pipe((0,g.P)(E=>E)).toPromise(),yield this._spaces.initialised.pipe((0,g.P)(E=>E)).toPromise(),setTimeout(()=>this.loading=!1,300)})}}return Z.\u0275fac=function(E){return new(E||Z)(i.Y36(a.w),i.Y36(l.s))},Z.\u0275cmp=i.Xpm({type:Z,selectors:[["global-loading"]],decls:2,vars:2,consts:[["class","fixed bottom-2 left-1/2 -translate-x-1/2 shadow rounded-3xl px-4 py-2 bg-error text-white text-xs",4,"ngIf"],["loader","","class","fixed inset-0 flex items-center justify-center pointer-events-auto bg-white",4,"ngIf"],[1,"fixed","bottom-2","left-1/2","-translate-x-1/2","shadow","rounded-3xl","px-4","py-2","bg-error","text-white","text-xs"],["loader","",1,"fixed","inset-0","flex","items-center","justify-center","pointer-events-auto","bg-white"],[3,"diameter"]],template:function(E,C){1&E&&(i.YNc(0,h,2,0,"div",0),i.YNc(1,T,2,1,"div",1)),2&E&&(i.Q6J("ngIf",!C.online),i.xp6(1),i.Q6J("ngIf",C.loading))},directives:[m.O5,_.Ou],styles:["[_nghost-%COMP%]{pointer-events:none}[_nghost-%COMP%] > [loader][_ngcontent-%COMP%]{z-index:9999;background-image:url(\"data:image/svg+xml,%3Csvg width='36' height='36' viewBox='0 0 36 36' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M36 0H0v36h36V0zM15.126 2H2v13.126c.367.094.714.24 1.032.428L15.554 3.032c-.188-.318-.334-.665-.428-1.032zM18 4.874V18H4.874c-.094-.367-.24-.714-.428-1.032L16.968 4.446c.318.188.665.334 1.032.428zM22.874 2h11.712L20 16.586V4.874c1.406-.362 2.512-1.468 2.874-2.874zm10.252 18H20v13.126c.367.094.714.24 1.032.428l12.522-12.522c-.188-.318-.334-.665-.428-1.032zM36 22.874V36H22.874c-.094-.367-.24-.714-.428-1.032l12.522-12.522c.318.188.665.334 1.032.428zm0-7.748V3.414L21.414 18h11.712c.362-1.406 1.468-2.512 2.874-2.874zm-18 18V21.414L3.414 36h11.712c.362-1.406 1.468-2.512 2.874-2.874zM4.874 20h11.712L2 34.586V22.874c1.406-.362 2.512-1.468 2.874-2.874z' fill='%23000000' fill-opacity='0.1' fill-rule='evenodd'/%3E%3C/svg%3E\")}\n/*# sourceMappingURL=global-loading.component.ts-angular-inline--16.css.map*/"]}),Z})()},5306:(rt,Y,n)=>{n.d(Y,{o:()=>m});var t=n(3184),l=n(6362),a=n(158);function g(_,h){if(1&_&&(t.TgZ(0,"i"),t._uU(1),t.Hsn(2),t.qZA()),2&_){const T=t.oxw();t.Tol((null==T.icon?null:T.icon.class)||T.className),t.xp6(1),t.hij(" ",null==T.icon?null:T.icon.content," ")}}function e(_,h){if(1&_&&(t._UZ(0,"img",3),t.ALo(1,"safe")),2&_){const T=t.oxw();t.Q6J("src",t.xi3(1,1,T.icon.src,"resource"),t.LSH)}}const i=["*"];let m=(()=>{class _{constructor(){this.className="material-icons"}}return _.\u0275fac=function(T){return new(T||_)},_.\u0275cmp=t.Xpm({type:_,selectors:[["app-icon"]],inputs:{className:"className",icon:"icon"},ngContentSelectors:i,decls:3,vars:2,consts:[[1,"app-icon"],[3,"class",4,"ngIf"],[3,"src",4,"ngIf"],[3,"src"]],template:function(T,A){1&T&&(t.F$t(),t.TgZ(0,"div",0),t.YNc(1,g,3,3,"i",1),t.YNc(2,e,2,4,"img",2),t.qZA()),2&T&&(t.xp6(1),t.Q6J("ngIf",!A.icon||"img"!==A.icon.type),t.xp6(1),t.Q6J("ngIf",A.icon&&"img"===A.icon.type))},directives:[l.O5],pipes:[a.y],styles:[".app-icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:1.25em;width:1.25em}i[_ngcontent-%COMP%]{font-size:1em}img[_ngcontent-%COMP%]{height:1em;width:1em}\n/*# sourceMappingURL=icon.component.ts-angular-inline--8.css.map*/"]}),_})()},2581:(rt,Y,n)=>{n.d(Y,{K:()=>i});var t=n(3184);function l(m,_){if(1&m&&t._UZ(0,"img",8),2&m){const h=t.oxw().$implicit;t.Q6J("src",h.url||h,t.LSH)}}function a(m,_){if(1&m&&(t.TgZ(0,"div",6),t.YNc(1,l,1,1,"img",7),t.qZA()),2&m){const h=_.$implicit,T=t.oxw();t.Udp("transform","translateX(-"+100*T.offset+"%)"),t.xp6(1),t.Q6J("ngIf",h)}}function g(m,_){1&m&&(t.TgZ(0,"div",9)(1,"p"),t._uU(2,"No Images for Asset"),t.qZA()())}function e(m,_){if(1&m&&(t.TgZ(0,"div",10),t._uU(1),t.qZA()),2&m){const h=t.oxw();t.xp6(1),t.AsE(" ",h.offset+1," / ",h.images.length," ")}}let i=(()=>{class m{constructor(){this.images=[],this.offset=0}}return m.\u0275fac=function(h){return new(h||m)},m.\u0275cmp=t.Xpm({type:m,selectors:[["image-carousel"]],inputs:{images:"images"},decls:10,vars:5,consts:[[1,"h-full","w-full","relative","overflow-hidden","flex"],["image","","class","h-full min-w-full relative flex items-center justify-center p-8",3,"transform",4,"ngFor","ngForOf"],["class","h-full w-full relative flex items-center justify-center opacity-30",4,"ngIf"],["mat-icon-button","",1,"text-secondary","border","border-solid","border-secondary","absolute","top-1/2","left-2","-translate-y-1/2","bg-white",3,"disabled","click"],["mat-icon-button","",1,"text-secondary","border","border-solid","border-secondary","absolute","top-1/2","right-2","-translate-y-1/2","bg-white",3,"disabled","click"],["class","absolute bottom-1 left-1/2 -translate-x-1/2 text-sm opacity-30",4,"ngIf"],["image","",1,"h-full","min-w-full","relative","flex","items-center","justify-center","p-8"],["class","h-full object-contain",3,"src",4,"ngIf"],[1,"h-full","object-contain",3,"src"],[1,"h-full","w-full","relative","flex","items-center","justify-center","opacity-30"],[1,"absolute","bottom-1","left-1/2","-translate-x-1/2","text-sm","opacity-30"]],template:function(h,T){1&h&&(t.TgZ(0,"div",0),t.YNc(1,a,2,3,"div",1),t.YNc(2,g,3,0,"div",2),t.TgZ(3,"button",3),t.NdJ("click",function(){return T.offset=T.offset-1}),t.TgZ(4,"app-icon"),t._uU(5,"chevron_left"),t.qZA()(),t.TgZ(6,"button",4),t.NdJ("click",function(){return T.offset=T.offset+1}),t.TgZ(7,"app-icon"),t._uU(8,"chevron_right"),t.qZA()(),t.YNc(9,e,2,2,"div",5),t.qZA()),2&h&&(t.xp6(1),t.Q6J("ngForOf",T.images),t.xp6(1),t.Q6J("ngIf",!(null!=T.images&&T.images.length)),t.xp6(1),t.Q6J("disabled",0===T.offset),t.xp6(3),t.Q6J("disabled",T.offset>=(null==T.images?null:T.images.length)-1),t.xp6(3),t.Q6J("ngIf",null==T.images?null:T.images.length))},styles:["[_nghost-%COMP%]{display:block;height:100%;width:100%}[image][_ngcontent-%COMP%]{transition:transform .3s}\n/*# sourceMappingURL=image-carousel.component.ts-angular-inline--20.css.map*/"]}),m})()},9136:(rt,Y,n)=>{n.d(Y,{p:()=>B,u:()=>D});var t=n(4929),l=n(3184),a=n(3294),g=n(4922),e=n(4505),i=n(6942),m=n(6362),_=n(4742),h=n(7202);const T=["outlet"],A=["feature"];function Z(N,p){1&N&&l._UZ(0,"mat-spinner",4),2&N&&l.Q6J("diameter",48)}function R(N,p){1&N&&l.GkF(0)}function E(N,p){if(1&N&&(l.ynx(0),l.YNc(1,R,1,0,"ng-container",12),l.BQk()),2&N){const M=l.oxw(2),J=M.$implicit,K=M.index,S=l.oxw(2);l.xp6(1),l.Q6J("ngComponentOutlet",J.content)("ngComponentOutletInjector",S.injectors[K])}}function C(N,p){if(1&N&&(l.ynx(0),l._UZ(1,"div",13),l.ALo(2,"sanitize"),l.BQk()),2&N){const M=l.oxw(2).$implicit;l.xp6(1),l.Q6J("innerHTML",l.lcZ(2,1,M.content),l.oJD)}}function d(N,p){1&N&&l.GkF(0)}function o(N,p){if(1&N&&(l.ynx(0),l.YNc(1,d,1,0,"ng-container",14),l.BQk()),2&N){const M=l.oxw(2).$implicit;l.xp6(1),l.Q6J("ngTemplateOutlet",M.content)("ngTemplateOutletContext",M.data)}}function s(N,p){if(1&N&&(l.TgZ(0,"div")(1,"div",8,9),l.YNc(3,E,2,2,"ng-container",10),l.YNc(4,C,3,3,"ng-container",10),l.YNc(5,o,2,2,"ng-container",11),l.qZA()()),2&N){const M=l.oxw().$implicit,J=l.oxw(2);l.xp6(1),l.Q6J("ngSwitch",J.type(M.content)),l.uIk("no-scale",M.no_scale)("el-id",M.location)("track-id",M.track_id)("view-id",J.viewer),l.xp6(2),l.Q6J("ngSwitchCase","component"),l.xp6(1),l.Q6J("ngSwitchCase","html")}}function u(N,p){if(1&N&&(l.ynx(0),l.YNc(1,s,6,7,"div",7),l.BQk()),2&N){const M=p.$implicit;l.xp6(1),l.Q6J("ngIf",M)}}function r(N,p){if(1&N&&(l.TgZ(0,"div",5),l.YNc(1,u,2,1,"ng-container",6),l.qZA()),2&N){const M=l.oxw();l.xp6(1),l.Q6J("ngForOf",M.features)("ngForTrackBy",M.trackByFn)}}const D=new l.OlP("Data for Map Features");let B=(()=>{class N extends a.KG{constructor(M){super(),this._injector=M,this.zoom=1,this.center={x:.5,y:.5},this.injectors=[],this.feature_list=[],this._on_changes=new e.X(null),this._extra_data={ratio$:this._on_changes.pipe((0,i.U)(J=>J.ratio)),svg_ratio$:this._on_changes.pipe((0,i.U)(J=>J.svg_ratio)),zoom$:this._on_changes.pipe((0,i.U)(J=>J.zoom)),position:this._on_changes.pipe((0,i.U)(J=>J.center))}}onResize(){this.zoom=1,this.center={x:.5,y:.5},this.updateDisplay()}type(M){return"string"==typeof M?"html":M instanceof l.Rgc?"template":"component"}ngOnInit(){(0,g.lL)()}ngOnDestroy(){this.viewer&&(0,g.hX)(this.viewer)}ngOnChanges(M){M.src&&this.src&&this.createView(),M.features&&this.updateInjectors(),this.viewer&&(M.focus&&this.focus?this.focusOn(this.focus):(M.zoom||M.center)&&this.updateDisplay(),(M.styles||M.features||M.labels||M.actions)&&this.timeout("update_view",()=>this.updateView()))}ngAfterViewInit(){this.createView()}updateView(){try{if(console.log("Loading:",this.loading),!(0,g.gA)(this.viewer)||this.loading)return this.timeout("update_view",()=>this.updateView());this.updateFeatureList(),(0,g.We)(this.viewer,{styles:this.styles,features:this.feature_list,labels:this.labels,actions:this.actions,options:this.options}),console.log("Set features:",this.feature_list)}catch(M){}}updateDisplay(){try{(0,g.We)(this.viewer,{zoom:this.zoom,desired_zoom:this.zoom,center:this.center,desired_center:this.center,options:this.options})}catch(M){}}createView(){var M,J,K,S;return(0,t.mG)(this,void 0,void 0,function*(){this.src&&(null===(M=this._outlet_el)||void 0===M?void 0:M.nativeElement)&&!this.loading?(this.loading=!0,this.viewer&&((0,g.We)(this.viewer,{styles:this.styles,features:[],labels:this.labels,actions:this.actions,options:this.options}),(0,g.hX)(this.viewer)),this.viewer=yield(0,g.i9)({element:null===(J=this._outlet_el)||void 0===J?void 0:J.nativeElement,url:this.src,styles:this.styles,zoom:this.zoom,desired_zoom:this.zoom,center:this.center,features:this.feature_list,labels:this.labels,actions:this.actions,options:this.options}),this.loading=!1,this.subscription("view_changes",null===(K=(0,g.ih)(this.viewer))||void 0===K?void 0:K.subscribe(v=>{this._outlet_el.nativeElement.getBoundingClientRect(),this._on_changes.next(Object.assign({},v))})),this.focus&&this.focusOn(this.focus)):(this.src&&!(null===(S=this._outlet_el)||void 0===S?void 0:S.nativeElement)||this.loading)&&this.timeout("create_view",()=>this.createView())})}focusOn(M){if(!M||!this.viewer)return;const J=(0,g.gA)(this.viewer);if(!J)return;const K=J.mappings[M];!K||(this.center={x:1-(K.x+K.w/2),y:1-(K.y+K.h/4)},this.updateDisplay())}trackByFn(M,J){return(null==J?void 0:J.track_id)||JSON.stringify(Object.assign({},J))}updateFeatureList(){this.feature_list=(this.features||[]).map((M,J)=>{var K;return Object.assign(Object.assign({},M),{content:null===(K=this._feature_list.toArray()[J])||void 0===K?void 0:K.nativeElement})}).filter(M=>M.content)}updateInjectors(){const M=this.injectors||[];this.injectors=(this.features||[]).map(J=>M.find(K=>{var S,v;return(null===(S=K.get(D))||void 0===S?void 0:S.track_id)&&(null===(v=K.get(D))||void 0===v?void 0:v.track_id)===J.track_id})||l.zs3.create({providers:[{provide:D,useValue:Object.assign(Object.assign({track_id:J.track_id},J.data),this._extra_data)}],parent:this._injector}))}}return N.\u0275fac=function(M){return new(M||N)(l.Y36(l.zs3))},N.\u0275cmp=l.Xpm({type:N,selectors:[["i-map"],["interactive-map"]],viewQuery:function(M,J){if(1&M&&(l.Gf(T,5),l.Gf(A,5)),2&M){let K;l.iGM(K=l.CRH())&&(J._outlet_el=K.first),l.iGM(K=l.CRH())&&(J._feature_list=K)}},hostBindings:function(M,J){1&M&&l.NdJ("resize",function(){return J.onResize()},!1,l.Jf7)},inputs:{src:"src",styles:"styles",zoom:"zoom",center:"center",features:"features",labels:"labels",actions:"actions",options:"options",focus:"focus"},features:[l.qOj,l.TTD],decls:4,vars:2,consts:[["tabindex","0","role","map",1,"absolute","inset-0"],["outlet",""],["class","absolute",3,"diameter",4,"ngIf"],["hidden","",4,"ngIf"],[1,"absolute",3,"diameter"],["hidden",""],[4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],[1,"pointer-events-none",3,"ngSwitch"],["feature",""],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[4,"ngComponentOutlet","ngComponentOutletInjector"],[3,"innerHTML"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(M,J){1&M&&(l._UZ(0,"div",0,1),l.YNc(2,Z,1,1,"mat-spinner",2),l.YNc(3,r,2,2,"div",3)),2&M&&(l.xp6(2),l.Q6J("ngIf",!J.viewer||J.loading),l.xp6(1),l.Q6J("ngIf",null==J.injectors?null:J.injectors.length))},directives:[m.O5,_.Ou,m.sg,m.RF,m.n9,m.$G,m.ED,m.tP],pipes:[h.n],styles:["[_nghost-%COMP%]{height:100%;width:100%}mat-spinner[_ngcontent-%COMP%]{top:50%;left:50%;transform:translate(-50%,-50%)}\n/*# sourceMappingURL=interactive-map.component.ts-angular-inline--11.css.map*/"]}),N})()},9627:(rt,Y,n)=>{n.d(Y,{i:()=>e});var t=n(3294),l=n(9136),a=n(3184);const g=["map-polygon",""];let e=(()=>{class i extends t.KG{constructor(_,h){super(),this._details=_,this._cdr=h,this.name=this._details.name,this.fill=`${this._details.color||"#e53935"}88`,this.stroke=this._details.color||"#e53935",this.padding=32,this.width=1,this.height=1,this.svg_scale=20,this.points=`0,0 0,${this.height} ${this.width},${this.height} ${this.width},0`,this.point_list=[]}get scale(){return this._details.svg_ratio||1}get zoom(){return this._details.zoom_value||1}ngOnInit(){var _,h,T;this._details.data$&&this.subscription("data",this._details.data$.subscribe(A=>{this.name=A.name,this.fill=`${A.color||"#e53935"}88`,this.stroke=A.color||"#e53935",this.processPoints(A.points)})),this.subscription("ratio",null===(_=this._details.ratio$)||void 0===_?void 0:_.subscribe(A=>{this._details.ratio=A,this.processPoints(this._details.points)})),this.subscription("zoom",null===(h=this._details.zoom$)||void 0===h?void 0:h.subscribe(A=>this._details.zoom_value=A)),this.subscription("svg_ratio",null===(T=this._details.svg_ratio$)||void 0===T?void 0:T.subscribe(A=>this._details.svg_ratio=A)),this.processPoints(this._details.points)}processPoints(_){const h=_.reduce((Z,[R,E])=>({x_min:R<Z.x_min?R:Z.x_min,x_max:R>Z.x_max?R:Z.x_max,y_min:E<Z.y_min?E:Z.y_min,y_max:E>Z.y_max?E:Z.y_max}),{x_min:100,x_max:-100,y_min:100,y_max:-100}),T_x=h.x_max-h.x_min,T_y=h.y_max-h.y_min,{ratio:A}=this._details;this.width=100*T_x,this.height=100*T_y*(A||1),this.width=Math.floor(100*this.width),this.height=Math.floor(100*this.height),this.points=_.reduce((Z,[R,E])=>`${Z}${Z?" ":""}${(R-h.x_min)/T_x*this.width/20},${(E-h.y_min)/T_y*this.height/20}`,"").replace(/NaN/g,"0"),this.point_list=_.map(([Z,R])=>[(Z-h.x_min)/T_x*this.width/20,(R-h.y_min)/T_y*this.height/20]),this._cdr.detectChanges()}}return i.\u0275fac=function(_){return new(_||i)(a.Y36(l.u),a.Y36(a.sBO))},i.\u0275cmp=a.Xpm({type:i,selectors:[["","map-polygon",""]],features:[a.qOj],attrs:g,decls:6,vars:13,consts:[["polygon","",1,"absolute","w-full","h-full","transform","-translate-x-1/2","-translate-y-1/2","-top-1","-left-1"],[1,"absolute","top-1/2","left-1/2","transform","-translate-x-1/2","-translate-y-1/2"],["preserveAspectRatio","none",1,"relative","w-full","h-full"],["text","",1,"absolute","top-1/2","left-1/2","transform","-translate-x-1/2","-translate-y-1/2","text-shadow","text-white","text-xl","text-center","whitespace-pre-line"]],template:function(_,h){1&_&&(a.TgZ(0,"div",0)(1,"div",1),a.O4$(),a.TgZ(2,"svg",2),a._UZ(3,"polygon"),a.qZA()()(),a.kcU(),a.TgZ(4,"div",3),a._uU(5),a.qZA()),2&_&&(a.Udp("transform","scale("+h.scale*h.zoom+")"),a.xp6(1),a.Udp("width",h.width+"%")("height",h.height+"%"),a.xp6(1),a.uIk("viewBox","0 0 "+(h.width/20||1)+" "+(h.height/20||1)),a.xp6(1),a.Udp("fill",h.fill)("stroke",h.stroke),a.uIk("points",h.points),a.xp6(2),a.hij(" ",h.name," "))},styles:["[polygon][_ngcontent-%COMP%]{will-change:transform}polygon[_ngcontent-%COMP%]{stroke-width:2}circle[_ngcontent-%COMP%]{stroke-width:2}[text][_ngcontent-%COMP%]{width:32rem;max-width:65vw}\n/*# sourceMappingURL=map-polygon.component.ts-angular-inline--17.css.map*/"]}),i})()},158:(rt,Y,n)=>{n.d(Y,{y:()=>a});var t=n(3184),l=n(318);let a=(()=>{class g{constructor(i){this.sanitizer=i}transform(i,m="html"){switch(m){case"resource":return this.sanitizer.bypassSecurityTrustResourceUrl(i);case"url":return this.sanitizer.bypassSecurityTrustUrl(i);case"script":return this.sanitizer.bypassSecurityTrustScript(i);case"style":return this.sanitizer.bypassSecurityTrustStyle(i);default:return this.sanitizer.bypassSecurityTrustHtml(i)}}}return g.\u0275fac=function(i){return new(i||g)(t.Y36(l.H7,16))},g.\u0275pipe=t.Yjl({name:"safe",type:g,pure:!0}),g})()},7202:(rt,Y,n)=>{n.d(Y,{n:()=>g});var t=n(3184),l=n(318),a=(()=>{return(e=a||(a={}))[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL",a;var e})();let g=(()=>{class e{constructor(m){this.sanitizer=m}transform(m,_="html"){switch(_){case"resource":return this.sanitizer.sanitize(a.RESOURCE_URL,m);case"url":return this.sanitizer.sanitize(a.URL,m);case"script":return this.sanitizer.sanitize(a.SCRIPT,m);case"style":return this.sanitizer.sanitize(a.STYLE,m);default:return this.sanitizer.sanitize(a.HTML,m)}}}return e.\u0275fac=function(m){return new(m||e)(t.Y36(l.H7,16))},e.\u0275pipe=t.Yjl({name:"sanitize",type:e,pure:!0}),e})()},9685:(rt,Y,n)=>{n.d(Y,{k:()=>_}),n(5197);var l=n(3184),a=n(6362),g=n(158);function e(h,T){if(1&h&&(l.TgZ(0,"div",4),l._uU(1),l.qZA()),2&h){const A=l.oxw(2);l.xp6(1),l.hij(" ",A.initials," ")}}function i(h,T){if(1&h&&(l.TgZ(0,"div",2),l.YNc(1,e,2,1,"div",3),l.qZA()),2&h){const A=l.oxw(),Z=l.MAs(2);l.uIk("user-id",A.user.id),l.xp6(1),l.Q6J("ngIf",!A.user.photo)("ngIfElse",Z)}}function m(h,T){if(1&h&&(l._UZ(0,"img",5),l.ALo(1,"safe")),2&h){const A=l.oxw();l.Q6J("src",l.xi3(1,1,A.user.photo,"resource"),l.LSH)}}let _=(()=>{class h{get initials(){if(!this.user)return"NA";const A=this.user.name||"",Z=A.replace(/[()[\]\-+=\\/]+/gi,"").split(" ");return Z.length>1?`${Z[0][0]}${Z[Z.length-1][0]}`:A.slice(0,2)}}return h.\u0275fac=function(A){return new(A||h)},h.\u0275cmp=l.Xpm({type:h,selectors:[["a-user-avatar"]],inputs:{user:"user"},decls:3,vars:1,consts:[["class","flex items-center justify-center rounded-full overflow-hidden border-2 border-white",4,"ngIf"],["image_state",""],[1,"flex","items-center","justify-center","rounded-full","overflow-hidden","border-2","border-white"],["initials","","class","text-white text-opacity-80 uppercase",4,"ngIf","ngIfElse"],["initials","",1,"text-white","text-opacity-80","uppercase"],[1,"h-full","w-full",3,"src"]],template:function(A,Z){1&A&&(l.YNc(0,i,2,3,"div",0),l.YNc(1,m,2,4,"ng-template",null,1,l.W1O)),2&A&&l.Q6J("ngIf",Z.user)},directives:[a.O5],pipes:[g.y],styles:["[_nghost-%COMP%] > div[_ngcontent-%COMP%]{height:2.5em;width:2.5em;background-color:var(--secondary);overflow:hidden;border:2px solid white}.initials[_ngcontent-%COMP%]{font-size:1em}\n/*# sourceMappingURL=user-avatar.component.ts-angular-inline--10.css.map*/"]}),h})()},4618:(rt,Y,n)=>{n.d(Y,{U:()=>R});var t=n(4476),l=n(3294),a=n(3184),g=n(4244),e=n(6362);const i=["keyboard",""];function m(E,C){if(1&E&&a._UZ(0,"div",7),2&E){const d=a.oxw(4);a.ekj("bg-success","shift"===d.state)}}function _(E,C){if(1&E){const d=a.EpF();a.ynx(0),a.TgZ(1,"div",5),a.NdJ("focus",function(){return a.CHM(d),a.oxw(3).focusInput()})("click",function(){const u=a.CHM(d).$implicit;return a.oxw(3).handleKeyPress(u)}),a._uU(2),a.YNc(3,m,1,2,"div",6),a.qZA(),a.BQk()}if(2&E){const d=C.$implicit;a.xp6(1),a.ekj("special","{"===d[0]&&d.length>1)("space","{space}"===d),a.uIk("key",d),a.xp6(1),a.hij(" ","{space}"===d?"Space":"{caps}"===d?"Caps Lock":"{backspace}"===d?"Backspace":d," "),a.xp6(1),a.Q6J("ngIf","{caps}"===d)}}function h(E,C){if(1&E&&(a.TgZ(0,"div",3),a.YNc(1,_,4,7,"ng-container",4),a.qZA()),2&E){const d=C.$implicit;a.xp6(1),a.Q6J("ngForOf",d)}}function T(E,C){if(1&E&&(a.TgZ(0,"div",1),a.YNc(1,h,2,1,"div",2),a.qZA()),2&E){const d=a.oxw();a.xp6(1),a.Q6J("ngForOf",d.keyset)}}const A=["*"],Z=["0123456789".split(""),"qwertyuiop".split(""),"asdfghjkl".split(""),"zxcvbnm".split(""),["{caps}","{space}","{backspace}"]];let R=(()=>{class E extends l.KG{constructor(d,o){super(),this._element=d,this._overlay=o,this.keyset=Z,this.state="normal",this._overlay_ref=null,this.onFocus=()=>{!E.enabled||(this.open(),this.clearTimeout("blur"))},this.onBlur=()=>this.timeout("blur",()=>this.close())}ngOnDestroy(){super.ngOnDestroy(),this.close()}focusInput(){var d,o,s,u;null===(o=null===(d=this._element)||void 0===d?void 0:d.nativeElement)||void 0===o||o.blur(),null===(u=null===(s=this._element)||void 0===s?void 0:s.nativeElement)||void 0===u||u.focus()}open(){this._overlay_ref||!this._portal||(this._overlay_ref=this._overlay.create({positionStrategy:this._overlay.position().global().bottom().centerHorizontally()}),this._overlay_ref.attach(this._portal))}close(){this._overlay_ref&&(this._overlay_ref.dispose(),this._overlay_ref=null)}handleKeyPress(d){let o=this._element.nativeElement.selectionStart;const s=this._element.nativeElement.value||"";switch(d.toLowerCase()){case"{caps}":case"{shift}":this.state="shift";break;case"{backspace}":this._element.nativeElement.value=`${s.substr(0,o-1)}${s.substr(o,s.length)}`,o=Math.max(0,o-1);break;case"{space}":this._element.nativeElement.value=`${s.substr(0,o)} ${s.substr(o,s.length)}`,o+=1;break;default:"shift"===this.state&&(this.state="normal"),this._element.nativeElement.value=`${s.substr(0,o)}${d}${s.substr(o,s.length)}`,o+=1}this._element.nativeElement.dispatchEvent(new InputEvent("input")),this.updateKeyState(),this.timeout("focus",()=>{this.focusInput(),this._element.nativeElement.selectionStart=o,this._element.nativeElement.selectionEnd=o},50)}updateKeyState(){this.keyset=this.keyset.map(d=>d.map(o=>o.length>1?o:o["normal"!==this.state?"toUpperCase":"toLowerCase"]()))}}return E.\u0275fac=function(d){return new(d||E)(a.Y36(a.SBq),a.Y36(g.aV))},E.\u0275cmp=a.Xpm({type:E,selectors:[["input","keyboard",""],["textarea","keyboard",""]],viewQuery:function(d,o){if(1&d&&a.Gf(t.ig,5),2&d){let s;a.iGM(s=a.CRH())&&(o._portal=s.first)}},hostBindings:function(d,o){1&d&&a.NdJ("focus",function(){return o.onFocus()})("blur",function(){return o.onBlur()})},inputs:{keyset:"keyset"},features:[a.qOj],attrs:i,ngContentSelectors:A,decls:2,vars:0,consts:[["cdk-portal",""],["keyboard","",1,"w-screen","flex","flex-col","space-y-4","bg-gray-200","p-2","border-t","border-gray-400"],["row","","class","flex items-center justify-center space-x-2",4,"ngFor","ngForOf"],["row","",1,"flex","items-center","justify-center","space-x-2"],[4,"ngFor","ngForOf"],["tabindex","0",1,"rounded-xl","p-2","border","border-gray-300","relative","cursor-pointer","bg-white",3,"focus","click"],["dot","","class","absolute top-2 right-2 h-2 w-2 rounded-full bg-gray-300",3,"bg-success",4,"ngIf"],["dot","",1,"absolute","top-2","right-2","h-2","w-2","rounded-full","bg-gray-300"]],template:function(d,o){1&d&&(a.F$t(),a.Hsn(0),a.YNc(1,T,2,1,"ng-template",0))},directives:[t.bH,e.sg,e.O5],styles:["[key][_ngcontent-%COMP%]{height:3.5rem;width:4rem;transition:box-shadow .2s,top .2s;box-shadow:0 4px 0 .04px #0000001a}[key].special[_ngcontent-%COMP%]{width:10rem}[key].space[_ngcontent-%COMP%]{flex:1;min-width:10rem;max-width:25rem}[key][_ngcontent-%COMP%]:hover{top:2px;box-shadow:0 2px 0 .04px #0000001a}[key][_ngcontent-%COMP%]:active{top:4px;box-shadow:0 0 0 .04px #0000001a}\n/*# sourceMappingURL=virtual-keyboard.component.ts-angular-inline--15.css.map*/"]}),E})()},8426:(rt,Y,n)=>{n.d(Y,{ym:()=>C.y,MH:()=>at,rq:()=>d.rq,r7:()=>K,u$:()=>d.u$,xC:()=>d.xC,AX:()=>f,ry:()=>d.ry});var t=n(4929),l=n(9481),a=n(3294),g=n(3619),e=n(1810),i=n(6217),m=n(4505),_=n(7716),h=n(9128),T=n(9151),A=n(823),Z=n(9095),R=n(6942),E=n(8759),C=n(3902),d=n(4211),o=n(587),s=n(3637),u=n(2366),r=n(6119),D=n(2317),B=n(1233);const N=G=>{var ut;return(null===(ut=G.parent)||void 0===ut?void 0:ut.get("date"))&&(0,B.Z)(new Date,(0,D.Z)(G.parent.get("date").value,G.value))?{duration:!0}:null};function K(G){var ut,ot,dt;const it=new o.cw({id:new o.NI(G.id),host:new o.NI(G.host||"",[o.kI.required]),organiser:new o.NI(G.organiser||{},[o.kI.required]),creator:new o.NI(G.creator,[o.kI.required]),calendar:new o.NI(G.calendar),attendees:new o.NI(G.attendees||[]),resources:new o.NI(G.resources||[]),title:new o.NI(G.title,[o.kI.required]),body:new o.NI(G.body),private:new o.NI(G.private),date:new o.NI(G.date,[o.kI.required]),duration:new o.NI(G.duration,[N]),all_day:new o.NI(G.all_day),recurring:new o.NI(G.recurring),recurrence:new o.NI(G.recurrence),recurring_master_id:new o.NI(G.recurring_master_id),master:new o.NI(G.master),attachments:new o.NI(G.attachments),catering:new o.NI((null===(ut=G.extension_data)||void 0===ut?void 0:ut.catering)||[]),visitor_type:new o.NI(null===(ot=G.extension_data)||void 0===ot?void 0:ot.visitor_type),location:new o.NI(G.location),needs_space:new o.NI(!0),needs_parking:new o.NI((null===(dt=G.extension_data)||void 0===dt?void 0:dt.needs_parking)||!1),system:new o.NI(G.system)});return it.get("organiser").valueChanges.subscribe(pt=>it.controls.host.setValue(null==pt?void 0:pt.email)),it.get("resources").valueChanges.subscribe(pt=>it.controls.system.setValue(pt.length?pt[0]:null)),G.id&&(it.get("host").disable(),it.get("organiser").disable()),"started"===G.state&&it.get("date").disable(),it}function f(G,ut,ot){const dt=ot.from,it=ot.to,ft=G.filter(gt=>{const H=new Date(gt.date),mt=(0,D.Z)(H,gt.duration);return!gt.resources.find(U=>U.email===ot.space)||!(0,a.MZ)(dt,it,H.valueOf(),mt.valueOf())}).concat(ut);return ft.sort((gt,H)=>gt.date-H.date),(0,a.Tw)(ft,"id")}n(8025),(0,s.Z)((0,u.Z)((0,r.Z)(new Date,6),0),{days:-1});var L=n(3184);const W=["book/spaces","schedule/view","confirm/success"];let at=(()=>{class G extends a.KG{constructor(ot,dt){super(),this._org=ot,this._router=dt,this._view=new m.X("form"),this._options=new m.X({zone_ids:[]}),this._form=new m.X(null),this._event=new m.X(null),this._loading=new m.X(""),this.last_success=new C.y(JSON.parse(sessionStorage.getItem("PLACEOS.last_booked_event")||"{}")),this.loading=this._loading.asObservable(),this.options=this._options.pipe((0,h.d)(1)),this.available_spaces=(0,_.aj)([this._view,this._options,this._form,this._org.initialised.pipe((0,T.h)(it=>it))]).pipe((0,T.h)(([it,pt,ft])=>"find"===it&&!!ft),(0,A.b)(300),(0,Z.w)(([it,pt,ft])=>{var gt,H;this._loading.next("Retrieving available spaces...");const U=ft.value.date+60*ft.value.duration*1e3;return(0,i.tS)({period_start:(0,e.Z)(ft.value.date),period_end:(0,e.Z)(U),zone_ids:(null===(gt=pt.zone_ids)||void 0===gt?void 0:gt.join(","))||this._org.building.id,features:null===(H=pt.features)||void 0===H?void 0:H.join(","),capacity:pt.capacity},this._org)}),(0,R.U)(it=>it.filter(pt=>{var ft;return!(null===(ft=pt.availability)||void 0===ft?void 0:ft.length)||pt.availability.find(gt=>"busy"!==gt.status)})),(0,E.b)(it=>this._loading.next("")),(0,h.d)(1)),this.available_spaces.subscribe(),this.subscription("router.events",this._router.events.subscribe(it=>{it instanceof l.m2&&!W.some(pt=>it.url.includes(pt))&&this.clearForm()}))}get view(){return this._view.getValue()}get form(){return this._form.getValue()}get event(){return this._event.getValue()}setView(ot){this._view.next(ot)}setOptions(ot){this._options.next(Object.assign(Object.assign({},this._options.getValue()),ot))}newForm(ot=new C.y){this._form.next(K(ot)),this.subscription("form_change",this._form.getValue().valueChanges.subscribe(()=>this.storeForm())),this._event.next(ot),this._options.next({})}resetForm(){this._form.getValue()||this.newForm();const ot=this._event.getValue();this._form.getValue().patchValue(Object.assign(Object.assign({},ot||{}),(null==ot?void 0:ot.extension_data)||{})),this._options.next({})}clearForm(){sessionStorage.removeItem("PLACEOS.event_form"),this.newForm()}storeForm(){var ot;sessionStorage.setItem("PLACEOS.event_form",JSON.stringify((null===(ot=this._form.getValue())||void 0===ot?void 0:ot.value)||{}))}loadForm(){this._form.getValue()||this.newForm(),this._form.getValue().patchValue(Object.assign({},JSON.parse(sessionStorage.getItem("PLACEOS.event_form")||"{}")))}postForm(ot=!1){var dt;return(0,t.mG)(this,void 0,void 0,function*(){const it=this._form.getValue();if(!it)throw"No form for event";if(!it.valid&&!ot)throw`Some form fields are invalid. [${(0,a.RD)(it).join(", ")}]`;const{id:pt,date:ft,duration:gt}=it.value,H=(null===(dt=it.get("resources"))||void 0===dt?void 0:dt.value)||[];(!pt||ft!==this.event.date||gt!==this.event.duration)&&(yield this.checkSelectedSpacesAreAvailable(H,ft,gt,pt));const mt=yield(0,d.ry)(new C.y(this._form.getValue().value)).toPromise();return this.clearForm(),this.last_success=mt,sessionStorage.setItem("PLACEOS.last_booked_event",JSON.stringify(mt)),this.setView("success"),mt})}checkSelectedSpacesAreAvailable(ot,dt,it,pt){return(0,t.mG)(this,void 0,void 0,function*(){const ft={period_start:(0,e.Z)(dt),period_end:(0,e.Z)(dt+60*it*1e3),system_ids:ot.map(H=>H.id).join(",")};pt&&(ft.ignore=pt);const gt=ot.length?yield(0,i.tS)(ft).toPromise():[];if(gt.length!==ot.length)throw ot.length-gt.length+" space(s) are not available at the selected time"})}}return G.\u0275fac=function(ot){return new(ot||G)(L.LFG(g.w7),L.LFG(l.F0))},G.\u0275prov=L.Yz7({token:G,factory:G.\u0275fac,providedIn:"root"}),G})()},3902:(rt,Y,n)=>{n.d(Y,{q:()=>d,y:()=>o});var t=n(3294),l=n(1810),a=n(5692),g=n(2317),e=n(8987),i=n(5845),m=n(8235),_=n(475),h=n(3637),T=n(1233),A=n(5163),Z=n(656),R=n(5197),E=n(8025);let C={id:"default",name:"Default User"};function d(s){s&&(C=s)}class o{constructor(u={}){var r,D,B;this.id=u.id||"",this.event_start=u.event_start||(0,l.Z)(u.date||(0,a.Z)((0,g.Z)(new Date,3),{nearestTo:5})),this.event_end=u.event_end||(0,l.Z)((0,g.Z)(1e3*this.event_start,u.duration||30)),this.calendar=u.calendar||"",this.creator=(null===(r=u.creator||C.email)||void 0===r?void 0:r.toLowerCase())||"",this.host=(u.host||this.creator||C.email||"").toLowerCase();const N=u.attendees||[];this.attendees=N.filter(M=>!M.resource).map(M=>new R.n5(M)),this.resources=(0,t.Tw)(u.resources||N.filter(M=>M.resource).map(M=>new Z.T(M)),"email")||[],this.title=u.title||"",this.body=u.body||"",this.private=!!u.private,this.all_day=!!u.all_day,this.date=1e3*this.event_start,this.duration=this.all_day?1440:u.duration||(0,e.Z)(1e3*u.event_end,this.date)||30,this.timezone=u.timezone||"",this.meeting_url=u.meeting_url||u.online_meeting_url||"",this.meeting_id=u.meeting_id||u.online_meeting_id||"",this.meeting_provider=u.meeting_provider||u.online_meeting_provider||"",this.recurring=!!u.recurring,this.recurring_master_id=u.recurring_master_id||"",this.organiser=this.attendees.find(M=>M.email===this.host),this.master=u.master?new o(u.master):null,this.recurrence=u.recurring?{start:1e3*this.event_start||new Date(1e3*u.recurrence.range_start).valueOf(),end:u.recurrence.end||new Date(1e3*u.recurrence.range_end).valueOf(),interval:u.recurrence.interval,pattern:u.recurrence.pattern,days_of_week:u.recurrence.days_of_week}:{};const p=u.system;(null==p?void 0:p.email)&&!this.resources.find(M=>M.email===p.email)&&this.resources.push(new Z.T(p)),this.system=p||this.resources[0]||null,this.old_system=u.old_system||u.system,this.attachments=u.attachments||[],this.extension_data=u.extension_data||{},this.status=(0,E.kv)(this)||"none",this.location=u.location||(null===(D=this.space)||void 0===D?void 0:D.display_name)||(null===(B=this.space)||void 0===B?void 0:B.name)||"",this.type="declined"===this.status?"cancelled":this.attendees.find(M=>M.is_external)?"external":"internal";for(const M in u)M in this||(this.extension_data[M]=u[M]||this.extension_data[M]);this.extension_data.catering=(this.extension_data.catering||[]).map(M=>new A.G(Object.assign(Object.assign({},M),{event:this})))}ext(u){return this.extension_data[u]}get guests(){return this.attendees.filter(u=>!!u.is_external)}get space(){return this.resources[0]||null}get is_today(){return(0,i.Z)(new Date(this.date),new Date)}toJSON(){var u;const r=Object.assign({},this),D=(0,l.Z)((0,g.Z)(this.date,this.duration)),B=this.all_day?(0,m.Z)(this.date,{hours:12}):this.date;r.event_start=(0,l.Z)(B),r.event_end=D;const N=this.attendees;return this.recurring&&(r.recurrence=Object.assign(Object.assign({},this.recurrence),{range_start:r.event_start,range_end:(0,l.Z)(this.recurrence.end)})),r.recurrence=r.recurrence&&Object.keys(r.recurrence).length?r.recurrence:null,r.attendees=(0,t.Tw)(N,"email"),this.all_day||(r.extension_data.breakdown=15),r.extension_data.catering=r.extension_data.catering.map(p=>new A.G(Object.assign(Object.assign({},p),{event:null}))),r.system_id=null===(u=this.system)||void 0===u?void 0:u.id,delete r.catering,delete r.date,delete r.duration,delete r.status,r}get state(){const u=new Date,r=this.date;return(0,_.Z)(u,(0,h.Z)(r,{minutes:-15}))?"future":(0,_.Z)(u,r)?"upcoming":(0,_.Z)(u,(0,h.Z)(r,{minutes:15}))?"started":(0,_.Z)(u,(0,h.Z)(r,{minutes:this.duration}))?"in_progress":"done"}get can_check_in(){const u=new Date;return this.is_today||(0,T.Z)(u,this.date)&&(0,_.Z)(u,(0,g.Z)(this.date,this.duration))}}},4211:(rt,Y,n)=>{n.d(Y,{rq:()=>d,ry:()=>A,u$:()=>m,xC:()=>Z});var t=n(3499),l=n(6942),a=n(5038),g=n(5197),e=n(3902);const i="/api/staff/v1/events";function m(o){const s=(0,a.U)(o);return(0,t.U2M)(`${i}${s?"?"+s:""}`).pipe((0,l.U)(u=>u.map(r=>new e.y(r))))}const A=(o,s)=>(null==o||delete o.status,o.id?function T(o,s,u={},r="patch"){const D=(0,a.U)(u);return("patch"===r?t.r$K:t.gzd)(`${i}/${encodeURIComponent(o)}${D?"?"+D:""}`,"patch"===r?s:new e.y(s).toJSON()).pipe((0,l.U)(B=>new e.y(B)))}(o.id,o,s):function h(o){return(0,t.v_Q)(`${i}`,new e.y(o).toJSON()).pipe((0,l.U)(s=>new e.y(s)))}(o));function Z(o,s={}){const u=(0,a.U)(s);return(0,t.IVX)(`${i}/${encodeURIComponent(o)}${u?"?"+u:""}`,{response_type:"void"})}function d(o,s,u,r={}){const D=(0,a.U)(Object.assign(Object.assign({},r),{state:u}));return(0,t.v_Q)(`${i}/${encodeURIComponent(o)}/guests/${s}/checkin${D?"?"+D:""}`,"").pipe((0,l.U)(B=>new g.OO(B)))}},8025:(rt,Y,n)=>{n.d(Y,{H1:()=>C,TJ:()=>o,kv:()=>g});var t=n(2317),l=n(475),a=n(1233);function g(r){var D;return(null===(D=r.resources)||void 0===D?void 0:D.length)?r.resources.every(B=>"accepted"===B.response_status)?"approved":r.resources.some(B=>"tentative"===B.response_status||"needsAction"===B.response_status)?"tentative":"declined":"approved"}const R={month:43200,months:43200,week:10080,weeks:10080,day:1440,days:1440,hour:60,hours:60,minute:1,minutes:1},E={auto_approve:!0,hidden:!1};function C(r){const D=(r||"").split(" ");return D.length>1?+D[0]*R[D[1]]:0}function d(r,D=new Date){return(0,t.Z)(D,C(r))}function o(r,D,B){return r.filter(N=>{var p;return!(null===(p=function s(r,D){var B;const{space:N}=r;for(const p of N.zones)if(null===(B=D[p])||void 0===B?void 0:B.length)for(const M of D[p])if(M&&u(r,M))return Object.assign(Object.assign({},E),M.rules);return E}(Object.assign(Object.assign({},D),{space:N}),B))||void 0===p?void 0:p.hidden)})}function u({date:r,duration:D,host:B},N){let p=0;const{conditions:M}=N;return!M||(M.groups instanceof Array&&M.groups.every(J=>{var K;return null===(K=null==B?void 0:B.groups)||void 0===K?void 0:K.includes(J)})&&(p+=1),M.is_before&&(0,l.Z)((0,t.Z)(r,D),d(M.is_before))&&(p+=1),M.is_after&&(0,a.Z)(r,d(M.is_after))&&(p+=1),M.min_length&&C(M.min_length)<=D&&(p+=1),M.max_length&&C(M.max_length)>=D&&(p+=1),p>=Object.keys(M).length)}},8318:(rt,Y,n)=>{n.d(Y,{W9:()=>gt});var t=n(6362),l=n(587),a=n(4770),g=n(4683),e=n(1434),i=n(3188),m=n(7741),d=(n(6817),n(2793),n(2306),n(1022),n(7303),n(6471),n(9697),n(6048),n(89)),o=n(1534),s=n(8390),r=(n(3338),n(3184));n(3294),n(5050),n(6945),n(4442),n(4742),n(7317),n(5306),n(3667),n(5758);let gt=(()=>{class H{}return H.\u0275fac=function(U){return new(U||H)},H.\u0275mod=r.oAB({type:H}),H.\u0275inj=r.cJS({imports:[[t.ez,l.u5,l.UX,a.lN,g.c,e.LD,i.Bb,d.AV,o.p9,s.Fk,m.Kk]]}),H})()},6817:(rt,Y,n)=>{n.d(Y,{s:()=>g});var t=n(3184),l=n(5306);const a=["*"];let g=(()=>{class e{constructor(){this.on_action=new t.vpe,this.show_tooltip=!1}performAction(){this.show_tooltip=!this.show_tooltip,this.on_action.emit()}}return e.\u0275fac=function(m){return new(m||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["an-action-field"]],inputs:{name:"name",disabled:"disabled"},outputs:{on_action:"onAction"},ngContentSelectors:a,decls:5,vars:3,consts:[["role","button","form-field","","tabindex","0",1,"flex","items-center","rounded","p-2","border","border-gray-300","hover:border-black",3,"keydown.enter"],["placeholder","",1,"flex-1","w-0","truncate",3,"click"],[1,"text-xl",3,"click"]],template:function(m,_){1&m&&(t.F$t(),t.TgZ(0,"div",0),t.NdJ("keydown.enter",function(){return _.performAction()}),t.TgZ(1,"div",1),t.NdJ("click",function(){return _.performAction()}),t.Hsn(2),t.qZA(),t.TgZ(3,"app-icon",2),t.NdJ("click",function(){return _.performAction()}),t._uU(4),t.qZA()()),2&m&&(t.uIk("disabled",_.disabled)("name",_.name),t.xp6(4),t.hij(" arrow_drop_",_.show_tooltip?"up":"down"," "))},directives:[l.o],styles:["[_nghost-%COMP%] > div[_ngcontent-%COMP%]:hover{box-shadow:inset 0 0 0 1px #000}\n/*# sourceMappingURL=action-field.component.ts-angular-inline--29.css.map*/"]}),e})()},2793:(rt,Y,n)=>{n.d(Y,{R:()=>e});var t=n(3184),l=n(587),a=n(7317),g=n(5306);let e=(()=>{class i{constructor(){this.step=1,this.max=10,this.min=0}add(){this.value||(this.value=this.min||0),this.value+=this.ctrl_key?100*this.step:this.shift_key?10*this.step:this.step||1,this.value>this.max&&(this.value=this.max||10),this.setValue(this.value)}remove(){this.value||(this.value=this.min||0),this.value-=this.ctrl_key?100*this.step:this.shift_key?10*this.step:this.step||1,this.value<this.min&&(this.value=this.min||0),this.setValue(this.value)}setValue(_){this.value=_,this._onChange&&this._onChange(_)}writeValue(_){this.value=_}registerOnChange(_){this._onChange=_}registerOnTouched(_){this._onTouch=_}}return i.\u0275fac=function(_){return new(_||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["a-counter"]],inputs:{step:"step",max:"max",min:"min",render_fn:"render_fn"},features:[t._Bn([{provide:l.JU,useExisting:(0,t.Gpc)(()=>i),multi:!0}])],decls:9,vars:3,consts:[["counter","",1,"flex","items-center","text-base",3,"keydown.shift","keydown.control","keydown.meta","keyup.shift","keyup.control","keyup.meta"],["mat-icon-button","","name","remove","type","button",3,"disabled","click"],["value","",1,"p-1","text-center"],["mat-icon-button","","name","add","type","button",3,"disabled","click"]],template:function(_,h){1&_&&(t.TgZ(0,"div",0),t.NdJ("keydown.shift",function(){return h.shift_key=!0},!1,t.Jf7)("keydown.control",function(){return h.ctrl_key=!0},!1,t.Jf7)("keydown.meta",function(){return h.ctrl_key=!0},!1,t.Jf7)("keyup.shift",function(){return h.shift_key=!1},!1,t.Jf7)("keyup.control",function(){return h.ctrl_key=!1},!1,t.Jf7)("keyup.meta",function(){return h.ctrl_key=!1},!1,t.Jf7),t.TgZ(1,"button",1),t.NdJ("click",function(){return h.remove()}),t.TgZ(2,"app-icon"),t._uU(3,"remove"),t.qZA()(),t.TgZ(4,"div",2),t._uU(5),t.qZA(),t.TgZ(6,"button",3),t.NdJ("click",function(){return h.add()}),t.TgZ(7,"app-icon"),t._uU(8,"add"),t.qZA()()()),2&_&&(t.xp6(1),t.Q6J("disabled",!h.value||h.value===h.min),t.xp6(4),t.Oqu((h.render_fn?h.render_fn(h.value):h.value)||"0"),t.xp6(1),t.Q6J("disabled",h.value===h.max))},directives:[a.lW,g.o],styles:["[value][_ngcontent-%COMP%]{min-width:3em}\n/*# sourceMappingURL=counter.component.ts-angular-inline--30.css.map*/"]}),i})()},2306:(rt,Y,n)=>{n.d(Y,{Q:()=>o});var t=n(3184),l=n(587),a=n(1130),g=n(3861),e=n(9377),i=n(2779),m=n(3200),_=n(8235),h=n(2978),T=n(8939),A=n(4770),Z=n(4683),R=n(5818);const E=["*"];let C=(()=>{class s extends a.LF{format(r,D){return(0,g.Z)(r,"input"===D?"MMMM d, yyyy":"MMM yyyy")}}return s.\u0275fac=function(){let u;return function(D){return(u||(u=t.n5z(s)))(D||s)}}(),s.\u0275prov=t.Yz7({token:s,factory:s.\u0275fac}),s})();const d={parse:{dateInput:"LL"},display:{dateInput:"input",monthYearLabel:"MMM YYYY",dateA11yLabel:"LL",monthYearA11yLabel:"MMMM YYYY"}};let o=(()=>{class s extends T.K{constructor(){super(...arguments),this._from=(new Date).valueOf(),this.position="right",this.offset="bottom"}get from(){return new Date(this._from)||(0,e.Z)(new Date)}get until(){return new Date(this._to)||(0,i.Z)((0,m.Z)(new Date),1)}get date_string(){return(0,g.Z)(new Date(this.date),"DD MMM YYYY")}ngOnInit(){this.date=(new Date).toISOString()}setValue(r){const D=new Date(this.date);let B=(0,_.Z)(r,{hours:D.getHours(),minutes:D.getMinutes()}).valueOf();B<this.from.valueOf()&&(B=this.from.valueOf()),this.date=(0,h.Z)(B||new Date),this._onChange&&this._onChange(B),this.show_tooltip=!1}writeValue(r){this.date=(0,h.Z)(r||new Date),this.show_tooltip=!1}registerOnChange(r){this._onChange=r}registerOnTouched(r){this._onTouch=r}setDisabledState(r){this.disabled=r}}return s.\u0275fac=function(){let u;return function(D){return(u||(u=t.n5z(s)))(D||s)}}(),s.\u0275cmp=t.Xpm({type:s,selectors:[["a-date-field"]],inputs:{_from:["from","_from"],_to:["to","_to"],position:"position",offset:"offset",disabled:"disabled"},features:[t._Bn([{provide:a._A,useClass:C},{provide:a.sG,useValue:d},{provide:l.JU,useExisting:(0,t.Gpc)(()=>s),multi:!0}]),t.qOj],ngContentSelectors:E,decls:7,vars:6,consts:[["appearance","outline","overlay","",3,"click"],["matInput","",3,"ngModel","disabled","min","max","matDatepicker","ngModelChange"],["matSuffix","",3,"for"],["picker",""]],template:function(r,D){if(1&r){const B=t.EpF();t.F$t(),t.TgZ(0,"mat-form-field",0),t.NdJ("click",function(){return t.CHM(B),t.MAs(4).open()}),t.TgZ(1,"input",1),t.NdJ("ngModelChange",function(p){return D.setValue(p)}),t.qZA(),t._UZ(2,"mat-datepicker-toggle",2)(3,"mat-datepicker",null,3),t.TgZ(5,"mat-error"),t.Hsn(6),t.qZA()()}if(2&r){const B=t.MAs(4);t.xp6(1),t.Q6J("ngModel",D.date)("disabled",D.disabled)("min",D.from)("max",D.until)("matDatepicker",B),t.xp6(1),t.Q6J("for",B)}},directives:[A.KE,Z.Nt,l.Fj,R.hl,l.JJ,l.On,R.nW,A.R9,R.Mq,A.TO],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}\n/*# sourceMappingURL=date-field.component.ts-angular-inline--31.css.map*/"]}),s})()},1022:(rt,Y,n)=>{n.d(Y,{B:()=>Z});var t=n(3184),l=n(587),a=n(1799),g=n(6901),i=n(4770),m=n(1434),_=n(6362),h=n(1130);function T(R,E){if(1&R&&(t.TgZ(0,"mat-option",5),t._uU(1),t.qZA()),2&R){const C=E.$implicit;t.Q6J("value",C.id),t.xp6(1),t.hij(" ",C.name," ")}}const A=["*"];let Z=(()=>{class R{constructor(){this.max=240,this.min=30,this.step=15,this.specialPreprops=[],this.duration=60}ngOnInit(){this.duration_options=this.generateDurationOptions(this.max,this.min,this.step)}ngOnChanges(C){(C.max||C.min||C.step||C.time)&&(this.duration_options=this.generateDurationOptions(this.max,this.min,this.step))}setValue(C){this.duration=C,this._onChange&&this._onChange(+C)}writeValue(C){this.duration=C}setDisabledState(C){this.disabled=C}registerOnChange(C){this._onChange=C}registerOnTouched(C){this._onTouch=C}generateDurationOptions(C,d,o){const s=[];let u=d;const r=this.time?g(this.time):null;for(const D of this.specialPreprops)s.push({id:D,name:r?`${r.add(D,"m").format("h:mm A")} (${(0,a.Z)({hours:Math.floor(D/60),minutes:D%60})})`:`${(0,a.Z)({hours:Math.floor(D/60),minutes:D%60})}`});for(;u<=C;)s.push({id:u,name:r?`${r.add(u,"m").format("h:mm A")} (${(0,a.Z)({hours:Math.floor(u/60),minutes:u%60})})`:`${(0,a.Z)({hours:Math.floor(u/60),minutes:u%60})}`}),u+=o;return s}}return R.\u0275fac=function(C){return new(C||R)},R.\u0275cmp=t.Xpm({type:R,selectors:[["a-duration-field"]],inputs:{max:"max",min:"min",step:"step",time:"time",disabled:"disabled",specialPreprops:"specialPreprops"},features:[t._Bn([{provide:l.JU,useExisting:(0,t.Gpc)(()=>R),multi:!0}]),t.TTD],ngContentSelectors:A,decls:7,vars:5,consts:[[1,"duration-field"],["appearance","outline"],[3,"value","disabled","placeholder","valueChange"],["select",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(C,d){1&C&&(t.F$t(),t.TgZ(0,"div",0)(1,"mat-form-field",1)(2,"mat-select",2,3),t.NdJ("valueChange",function(s){return d.setValue(s)}),t.YNc(4,T,2,2,"mat-option",4),t.qZA(),t.TgZ(5,"mat-error"),t.Hsn(6),t.qZA()()()),2&C&&(t.uIk("disabled",d.disabled),t.xp6(2),t.Q6J("value",d.duration)("disabled",d.disabled)("placeholder",d.duration+" minutes"),t.xp6(2),t.Q6J("ngForOf",d.duration_options))},directives:[i.KE,m.gD,_.sg,h.ey,i.TO],styles:["[_nghost-%COMP%]{width:100%}mat-form-field[_ngcontent-%COMP%]{width:100%}\n/*# sourceMappingURL=duration-field.component.ts-angular-inline--32.css.map*/"]}),R})()},6048:(rt,Y,n)=>{n.d(Y,{q9:()=>A});var t=n(3184),l=n(587),a=n(5939),g=n(4770),e=n(1196),i=n(6362),m=n(5306);function _(Z,R){if(1&Z){const E=t.EpF();t.TgZ(0,"mat-chip",5),t.NdJ("removed",function(){const o=t.CHM(E).$implicit;return t.oxw().remove(o)}),t._uU(1),t.TgZ(2,"app-icon",6),t._uU(3,"close"),t.qZA()()}if(2&Z){const E=R.$implicit;t.Q6J("selectable",!0)("removable",!0),t.xp6(1),t.hij(" ",E," ")}}let A=(()=>{class Z{constructor(){this.separators=[a.K5,a.OC,a.L_],this.placeholder="",this.value=[],this.add=E=>function h(Z,R){if(!Z)return;const E=R.input,C=R.value,d=Z.value;(C||"").trim()&&(d.push(C),Z.setValue(d)),E&&(E.value="")}({value:this.value,setValue:C=>this.setValue(C)},E),this.remove=E=>function T(Z,R){if(!Z)return;const E=Z.value,C=E.indexOf(R);C>=0&&(E.splice(C,1),Z.setValue(E))}({value:this.value,setValue:C=>this.setValue(C)},E)}setValue(E){this.value=E,this._onChange&&this._onChange(E)}writeValue(E){this.value=E}registerOnChange(E){this._onChange=E}registerOnTouched(E){this._onTouch=E}}return Z.\u0275fac=function(E){return new(E||Z)},Z.\u0275cmp=t.Xpm({type:Z,selectors:[["item-list-field"]],inputs:{separators:"separators",placeholder:"placeholder"},features:[t._Bn([{provide:l.JU,useExisting:(0,t.Gpc)(()=>Z),multi:!0}])],decls:5,vars:5,consts:[["appearance","outline",1,"w-full"],["aria-label","Zone Tags"],["chipList",""],[3,"selectable","removable","removed",4,"ngFor","ngForOf"],[3,"placeholder","matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputAddOnBlur","matChipInputTokenEnd"],[3,"selectable","removable","removed"],["matChipRemove",""]],template:function(E,C){if(1&E&&(t.TgZ(0,"mat-form-field",0)(1,"mat-chip-list",1,2),t.YNc(3,_,4,3,"mat-chip",3),t.TgZ(4,"input",4),t.NdJ("matChipInputTokenEnd",function(o){return C.add(o)}),t.qZA()()()),2&E){const d=t.MAs(2);t.xp6(3),t.Q6J("ngForOf",C.value),t.xp6(1),t.Q6J("placeholder",C.placeholder||"User groups...")("matChipInputFor",d)("matChipInputSeparatorKeyCodes",C.separators)("matChipInputAddOnBlur",!0)}},directives:[g.KE,e.qn,i.sg,e.HS,m.o,e.qH,e.oH],styles:[""]}),Z})()},7303:(rt,Y,n)=>{n.d(Y,{N:()=>p});var t=n(3184),l=n(587),a=n(3294),g=n(3861),e=n(8235),i=n(6361),m=n(5692),_=n(5845),h=n(1233),T=n(9377),A=n(3200),Z=n(2317),R=n(4770),E=n(4683),C=n(7317),d=n(5306),o=n(6362),s=n(1434),u=n(1130);const r=["select"];function D(M,J){if(1&M&&(t.TgZ(0,"mat-option",9),t._uU(1),t.qZA()),2&M){const K=J.$implicit;t.Q6J("value",K.id),t.xp6(1),t.hij(" ",K.name," ")}}function B(M,J){if(1&M){const K=t.EpF();t.TgZ(0,"mat-form-field",5)(1,"mat-select",6,7),t.NdJ("valueChange",function(v){return t.CHM(K),t.oxw().setValue(v)}),t.YNc(3,D,2,2,"mat-option",8),t.qZA()()}if(2&M){const K=t.oxw();t.xp6(1),t.Q6J("value",K.time)("disabled",K.disabled),t.xp6(2),t.Q6J("ngForOf",K.time_options)}}const N=["*"];let p=(()=>{class M extends a.KG{constructor(){super(...arguments),this.step=15,this.no_past_times=!0,this.date=(new Date).valueOf(),this.time=(0,g.Z)(new Date,"HH:mm")}ngOnInit(){this.show_select=!0,this._time_options=this.generateAvailableTimes(this.date,!this.no_past_times,this.step),this.timeout("hide",()=>this.show_select=!1)}ngOnChanges(K){(K.no_past_times||K.step)&&(this._time_options=this.generateAvailableTimes(this.date,!this.no_past_times,this.step))}get time_options(){const K=(this.time||"00:00").split(":"),S=(0,e.Z)(this.date,{hours:+K[0],minutes:+K[1]});return S.getMinutes()%15!=0&&!this._time_options.find(v=>v.id===(0,g.Z)(S,"HH:mm"))&&(this._time_options.push({name:`${(0,g.Z)(S,(0,a.hI)())}`,id:(0,g.Z)(S,"HH:mm")}),this._time_options.sort((v,f)=>`${v.id}`.localeCompare(`${f.id}`))),this._time_options}setValue(K){if(this.time=K,this._onChange){const S=(this.time||"00:00").split(":"),v=(0,i.Z)((0,e.Z)(this.date,{hours:+S[0],minutes:+S[1]}));this._onChange(v.valueOf())}}writeValue(K){this.date=K||this.date;let S=(0,i.Z)(this.date);S=(0,m.Z)(S,{nearestTo:5}),this.time=(0,g.Z)(S,"HH:mm"),this._time_options=this.generateAvailableTimes(this.date,!this.no_past_times,this.step)}setDisabledState(K){this.disabled=K}registerOnChange(K){this._onChange=K}registerOnTouched(K){this._onTouch=K}showSelect(){this.show_select=!0,this.timeout("on_shown",()=>{this.select_field&&(this.select_field.focus(),this.select_field.open(),this.subscription("listen_close",this.select_field.openedChange.subscribe(K=>{K||(this.show_select=!1)})))})}generateAvailableTimes(K,S,v=15){const f=new Date;let L=new Date(K);const W=[];S||!(0,_.Z)(L,f)&&(0,h.Z)(L,f)?L=(0,T.Z)(L):(0,h.Z)(L,f)&&(L=f),L=(0,m.Z)(L,{nearestTo:v});const at=(0,A.Z)(L);for(;(0,h.Z)(at,L);)W.push({name:`${(0,g.Z)(L,(0,a.hI)())}`,id:(0,g.Z)(L,"HH:mm")}),L=(0,Z.Z)(L,v);return W}}return M.\u0275fac=function(){let J;return function(S){return(J||(J=t.n5z(M)))(S||M)}}(),M.\u0275cmp=t.Xpm({type:M,selectors:[["a-time-field"]],viewQuery:function(K,S){if(1&K&&t.Gf(r,5),2&K){let v;t.iGM(v=t.CRH())&&(S.select_field=v.first)}},inputs:{step:"step",disabled:"disabled",no_past_times:"no_past_times"},features:[t._Bn([{provide:l.JU,useExisting:(0,t.Gpc)(()=>M),multi:!0}]),t.qOj,t.TTD],ngContentSelectors:N,decls:8,vars:5,consts:[["appearance","outline",3,"keydown.enter"],["matInput","","type","time",3,"disabled","ngModel","ngModelChange"],["mat-icon-button","","matSuffix","",1,"relative","top-1","-right-1",3,"click"],[1,"text-2xl","text-black","text-opacity-50"],["appearance","outline",4,"ngIf"],["appearance","outline"],[3,"value","disabled","valueChange"],["select",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(K,S){1&K&&(t.F$t(),t.TgZ(0,"mat-form-field",0),t.NdJ("keydown.enter",function(){return S.showSelect()}),t.TgZ(1,"input",1),t.NdJ("ngModelChange",function(f){return S.setValue(f)}),t.qZA(),t.TgZ(2,"button",2),t.NdJ("click",function(){return S.showSelect()}),t.TgZ(3,"app-icon",3),t._uU(4," arrow_drop_down "),t.qZA()(),t.TgZ(5,"mat-error"),t.Hsn(6),t.qZA()(),t.YNc(7,B,4,3,"mat-form-field",4)),2&K&&(t.Udp("display",S.show_select?"none":""),t.xp6(1),t.Q6J("disabled",S.disabled)("ngModel",S.time),t.xp6(6),t.Q6J("ngIf",S.show_select))},directives:[R.KE,E.Nt,l.Fj,l.JJ,l.On,C.lW,R.R9,d.o,R.TO,o.O5,s.gD,o.sg,u.ey],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}\n/*# sourceMappingURL=time-field.component.ts-angular-inline--33.css.map*/"]}),M})()},3338:(rt,Y,n)=>{n.d(Y,{k:()=>d});var t=n(3184),l=n(587),a=n(3294),g=n(5050),e=n(6945),i=n(4442),m=n(5306),_=n(7317),h=n(6362),T=n(4742);function A(o,s){if(1&o&&(t.ynx(0),t.TgZ(1,"div",17),t._UZ(2,"mat-progress-spinner",18),t.TgZ(3,"div",19),t._uU(4),t.qZA()(),t.BQk()),2&o){const u=t.oxw().$implicit;t.xp6(2),t.Q6J("diameter",32)("value",u.progress),t.xp6(2),t.hij(" ",u.progress," ")}}function Z(o,s){if(1&o&&(t.TgZ(0,"a",20)(1,"app-icon"),t._uU(2,"link"),t.qZA()()),2&o){const u=t.oxw().$implicit;t.Q6J("href",u.url,t.LSH)}}function R(o,s){if(1&o){const u=t.EpF();t.TgZ(0,"div",12)(1,"div",13),t._uU(2),t.qZA(),t.YNc(3,A,5,3,"ng-container",14),t.YNc(4,Z,3,1,"a",15),t.TgZ(5,"button",16),t.NdJ("click",function(){const B=t.CHM(u).$implicit;return t.oxw(2).removeFile(B)}),t.TgZ(6,"app-icon"),t._uU(7,"close"),t.qZA()()()}if(2&o){const u=s.$implicit;t.ekj("!bg-red-600",u.progress<1)("!bg-opacity-20",u.progress<1),t.xp6(2),t.hij(" ",u.name," "),t.xp6(1),t.Q6J("ngIf",u.progress>=0&&u.progress<100),t.xp6(1),t.Q6J("ngIf",u.progress>=100)}}function E(o,s){if(1&o&&(t.TgZ(0,"div",10),t.YNc(1,R,8,7,"div",11),t.qZA()),2&o){const u=t.oxw();t.xp6(1),t.Q6J("ngForOf",u.list)}}function C(o,s){1&o&&(t.TgZ(0,"div",21)(1,"p",22),t._uU(2,"No uploaded files"),t.qZA()())}let d=(()=>{class o{constructor(){this.list=[],this.registerOnChange=u=>this._onChange=u,this.registerOnTouched=u=>this._onTouch=u}setValue(u){this.list=u.filter(r=>r.url&&r.progress>=100),this._onChange&&this._onChange(this.list)}writeValue(u){this.list=u.map(r=>Object.assign({id:`file-${(0,a.Iy)(999999999)}`},r))}removeFile(u){this.list=this.list.filter(r=>r.id!==u.id)}onFileEvent(u){var r;const D=u.target;if(!(null===(r=null==D?void 0:D.files)||void 0===r?void 0:r.length))return;const B=D.files,N=p=>{this.list=[...(this.list||[]).filter(M=>M.id!==p.id)].sort((M,J)=>M.created_at-J.created_at),this.setValue(this.list)};for(let p=0;p<B.length;p++)this._uploadFile(B[p],N)}_uploadFile(u,r){const D=new FileReader;D.addEventListener("loadend",B=>{const p=e.PP(B.target.result,u.type),J=(0,i.IL)([p],{file_name:u.name})[0],K={id:`${(0,a.Iy)(999999999999)}`,name:u.name,progress:0,size:u.size,created_at:Date.now(),url:""};J.status.pipe((0,g.o)(S=>"complete"!==S.status,!0)).subscribe(S=>{J.access_url&&(K.url=J.access_url),K.progress=S.progress,"error"===S.status&&(K.progress=-1),r(K)}),r(K)}),D.readAsArrayBuffer(u)}}return o.\u0275fac=function(u){return new(u||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["upload-list"]],features:[t._Bn([{provide:l.JU,useExisting:(0,t.Gpc)(()=>o),multi:!0}])],decls:15,vars:2,consts:[[1,"flex","items-center","space-x-2"],[1,"w-52","h-48","relative","border-2","border-dashed","border-gray-300","flex","flex-col","items-center","justify-center","rounded","hover:bg-black/5","cursor-pointer"],[1,"text-3xl","mb-2"],[1,"text-center"],[1,"text-center","text-xs","my-1"],["mat-button","",1,"w-28"],["multiple","true","type","file",1,"absolute","inset-0","opacity-0","max-w-full",3,"change"],[1,"w-1/2","h-48","flex-1","flex","flex-col","items-center"],["list","","class","space-y-2 w-full h-full overflow-auto",4,"ngIf","ngIfElse"],["empty_state",""],["list","",1,"space-y-2","w-full","h-full","overflow-auto"],["item","","class","w-full flex items-center border border-gray-200 rounded bg-white hover:bg-gray-100",3,"!bg-red-600","!bg-opacity-20",4,"ngFor","ngForOf"],["item","",1,"w-full","flex","items-center","border","border-gray-200","rounded","bg-white","hover:bg-gray-100"],[1,"flex-1","w-px","font-mono","truncate","px-2","text-sm"],[4,"ngIf"],["mat-icon-button","","target","_blank","rel","noopener noreferrer",3,"href",4,"ngIf"],["mat-icon-button","",3,"click"],[1,"relative","mx-1"],["mode","determinate",3,"diameter","value"],[1,"absolute","top-1/2","left-1/2","-translate-x-1/2","-translate-y-1/2","text-sm","font-bold"],["mat-icon-button","","target","_blank","rel","noopener noreferrer",3,"href"],[1,"h-full","w-full","flex","flex-col","justify-center","items-center"],[1,"opacity-30"]],template:function(u,r){if(1&u&&(t.TgZ(0,"div",0)(1,"div",1)(2,"app-icon",2),t._uU(3,"upload_file"),t.qZA(),t.TgZ(4,"p",3),t._uU(5,"Drop files"),t.qZA(),t.TgZ(6,"p",4),t._uU(7,"or"),t.qZA(),t.TgZ(8,"button",5),t._uU(9,"Browse"),t.qZA(),t.TgZ(10,"input",6),t.NdJ("change",function(B){return r.onFileEvent(B)}),t.qZA()(),t.TgZ(11,"div",7),t.YNc(12,E,2,1,"div",8),t.qZA()(),t.YNc(13,C,3,0,"ng-template",null,9,t.W1O)),2&u){const D=t.MAs(14);t.xp6(12),t.Q6J("ngIf",null==r.list?null:r.list.length)("ngIfElse",D)}},directives:[m.o,_.lW,h.O5,h.sg,T.Ou,_.zs],styles:[""]}),o})()},6471:(rt,Y,n)=>{n.d(Y,{E:()=>K});var t=n(3184),l=n(587),a=n(3294),g=n(823),e=n(9095),i=n(7418),m=n(8759),_=n(5670),h=n(6862),T=n(5939),A=n(4505),Z=n(4139),R=n(5758),E=n(4770),C=n(3188),d=n(1196),o=n(6362),s=n(5306),u=n(4742),r=n(1130),D=n(7317);function B(S,v){if(1&S){const f=t.EpF();t.TgZ(0,"mat-chip",12),t.NdJ("removed",function(){const at=t.CHM(f).$implicit;return t.oxw().removeUser(at)}),t.TgZ(1,"app-icon",13),t._uU(2,"business"),t.qZA(),t._uU(3),t.TgZ(4,"button",14)(5,"app-icon"),t._uU(6,"cancel"),t.qZA()()()}if(2&S){const f=v.$implicit;t.xp6(3),t.hij(" ",f.name||f.email," ")}}function N(S,v){1&S&&t._UZ(0,"mat-spinner",15)}function p(S,v){if(1&S){const f=t.EpF();t.TgZ(0,"mat-option",16),t.NdJ("click",function(){const at=t.CHM(f).$implicit;return t.oxw().addUser(at)}),t._uU(1),t._UZ(2,"br"),t.TgZ(3,"span",17),t._uU(4),t.qZA()()}if(2&S){const f=v.$implicit;t.xp6(1),t.hij(" ",f.name,""),t.xp6(3),t.Oqu(f.email)}}function M(S,v){if(1&S){const f=t.EpF();t.TgZ(0,"div",18)(1,"button",19),t.NdJ("click",function(){return t.CHM(f),t.oxw().openNewUserModal()}),t.tHW(2,20),t._UZ(3,"span",21),t.N_p(),t.qZA(),t.TgZ(4,"button",22),t.tHW(5,23),t._UZ(6,"span",21),t.TgZ(7,"input",24),t.NdJ("change",function(W){return t.CHM(f),t.oxw().addUsersFromFile(W)}),t.qZA(),t.N_p(),t.qZA(),t.TgZ(8,"button",25),t.NdJ("click",function(){return t.CHM(f),t.oxw().downloadCSVTemplate()}),t.tHW(9,26),t._UZ(10,"span",21),t.N_p(),t.qZA()()}}function J(S){return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(S)}let K=(()=>{class S extends a.KG{constructor(f,L){super(),this._dialog=f,this._settings=L,this.limit=3,this.guests=!1,this.hide_actions=!1,this.new_user=new t.vpe,this.separatorKeysCodes=[T.K5,T.OC],this.loading=!1,this.search$=new A.X(""),this.user_list$=this.search$.pipe((0,g.b)(300),(0,e.w)(W=>(this.loading=!0,W?(0,h.VE)(W).pipe((0,i.K)(at=>[])):(0,Z.of)([]))),(0,m.b)(W=>this.loading=!1)),this.active_list=[],this.validFn=W=>J(W),this.emptyClick=()=>this.openNewUserModal(new h.n5)}addUserFromEmail(f){J(f)&&this.addUser(new h.n5({id:f,email:f,name:f.split("@")[0]}))}addUser(f){var L;const W=this.active_list.filter(at=>at.email!==f.email);this.setValue([...W,new h.n5(Object.assign(Object.assign({},f),{id:f.id||f.email,visit_expected:null===(L=f.id||!0===f.is_external?null:f.visit_expected)||void 0===L||L}))]),this.timeout("clear_search",()=>this.search$.next(""))}removeUser(f){const L=this.active_list.filter(W=>W.email!==f.email);this.setValue(L)}addUsersFromFile(f){if(f.target){const L=f.target.files[0];if(L){const W=new FileReader;W.readAsText(L,"UTF-8"),W.addEventListener("load",at=>{this.processCsvData(at.srcElement.result),f.target.value=""}),W.addEventListener("error",at=>(0,a.cB)("Error reading file."))}}}processCsvData(f){var L,W;const at=(0,a.n5)(f)||[],G=(null===(L=(0,a.ar)())||void 0===L?void 0:L.staff_id)||"unknown";for(const ut of at){ut.name=ut.name||`${ut.first_name} ${ut.last_name}`;const ot=(ut.name||`${Math.floor(99999999*Math.random())}`).split(" ").join("_").toLowerCase();ut.email||(ut.email=`${ot}+${G}@guest.${h.U9}`);const dt=this._settings.get("app.booking.internal_emails")||["place.tech"];ut.visit_expected=null!==(W=ut.visit_expected)&&void 0!==W?W:!dt.find(it=>ut.email.endsWith(it)),ut.phone=""+ut.phone,this.addUser(new h.n5(ut))}}downloadCSVTemplate(){(0,a.Sv)("template.csv","Organisation,First Name,Last Name,Email,Phone,Assistance Required,Visit Expected\nFake Org,John,Smith,john.smith@example.com,01234567898,false,true")}setValue(f){this.active_list=f,this._onChange&&this._onChange(f)}writeValue(f){this.active_list=f}setDisabledState(f){this.disabled=f}registerOnChange(f){this._onChange=f}registerOnTouched(f){this._onTouch=f}displayFn(f){return(null==f?void 0:f.name)||""}openNewUserModal(f=new h.n5){var L;const W=this._dialog.open(h.rW,{width:"auto",height:"auto",data:{user:f}});null===(L=W.componentInstance)||void 0===L||L.event.pipe((0,_.P)(at=>"done"===at.reason)).subscribe(at=>{this.addUser(at.metadata),W.close()})}}return S.\u0275fac=function(f){return new(f||S)(t.Y36(R.uw),t.Y36(a.gb))},S.\u0275cmp=t.Xpm({type:S,selectors:[["a-user-list-field"]],inputs:{disabled:"disabled",limit:"limit",guests:"guests",hide_actions:["hideActions","hide_actions"],filter:"filter"},outputs:{new_user:"new_user"},features:[t._Bn([{provide:l.JU,useExisting:(0,t.Gpc)(()=>S),multi:!0}]),t.qOj],decls:14,vars:11,consts:function(){let v,f,L;return v=$localize`:Add new external attendee1cee297a54800164932f3f1abaf5b283a369077c4500903537783364799: Add ${"\ufffd#3\ufffd"}:START_TAG_SPAN:External${"\ufffd/#3\ufffd"}:CLOSE_TAG_SPAN:`,f=$localize`:Upload attendee list from CSV file8ba386864076e69bb4ae59bef0a1dfe503f80d077349224371680540346: Upload ${"\ufffd#6\ufffd"}:START_TAG_SPAN:CSV${"\ufffd/#6\ufffd"}:CLOSE_TAG_SPAN:${"\ufffd#7\ufffd\ufffd/#7\ufffd"}:TAG_INPUT:`,L=$localize`:Download template CSV file54959f35dcc46197d724cb8400ebf1e1ffc4aec66341002680663382191:${"\ufffd#10\ufffd"}:START_TAG_SPAN:CSV${"\ufffd/#10\ufffd"}:CLOSE_TAG_SPAN: Template `,[["form-field","",1,"mb-4bg-white","text-black"],["search",""],["appearance","outline","matAutocompleteOrigin","",1,"w-full"],["origin","matAutocompleteOrigin"],["aria-label","Fruit selection"],["chipList",""],[3,"removed",4,"ngFor","ngForOf"],["placeholder","Type a name or email","name","user_email",3,"ngModel","matAutocomplete","matChipInputFor","matChipInputSeparatorKeyCodes","ngModelChange","matChipInputTokenEnd"],["diameter","24","matSuffix","",4,"ngIf"],["auto","matAutocomplete"],["class","leading-tight",3,"click",4,"ngFor","ngForOf"],["class","flex items-center space-x-2 -mt-4",4,"ngIf"],[3,"removed"],[1,"mr-2"],["matChipRemove",""],["diameter","24","matSuffix",""],[1,"leading-tight",3,"click"],[1,"text-xs"],[1,"flex","items-center","space-x-2","-mt-4"],["mat-button","","type","button","name","new-contact",1,"inverse","flex-1","sm:flex-none",3,"click"],v,[1,"hidden","sm:inline"],["mat-button","","type","button","name","upload-csv",1,"inverse","flex-1","sm:flex-none"],f,["type","file",1,"opacity-0","absolute","inset-0",3,"change"],["mat-button","","type","button","name","download-template",1,"inverse","flex-1","sm:flex-none",3,"click"],L]},template:function(f,L){if(1&f&&(t.TgZ(0,"div",0)(1,"div",1)(2,"mat-form-field",2,3)(4,"mat-chip-list",4,5),t.YNc(6,B,7,1,"mat-chip",6),t.TgZ(7,"input",7),t.NdJ("ngModelChange",function(at){return L.search$.next(at)})("matChipInputTokenEnd",function(at){return L.addUserFromEmail(at)}),t.qZA(),t.YNc(8,N,1,0,"mat-spinner",8),t.qZA()(),t.TgZ(9,"mat-autocomplete",null,9),t.YNc(11,p,5,2,"mat-option",10),t.ALo(12,"async"),t.qZA()(),t.YNc(13,M,11,0,"div",11),t.qZA()),2&f){const W=t.MAs(5),at=t.MAs(10);t.uIk("disabled",L.disabled),t.xp6(6),t.Q6J("ngForOf",L.active_list),t.xp6(1),t.Q6J("ngModel",L.search$.getValue())("matAutocomplete",at)("matChipInputFor",W)("matChipInputSeparatorKeyCodes",L.separatorKeysCodes),t.xp6(1),t.Q6J("ngIf",L.loading),t.xp6(3),t.Q6J("ngForOf",t.lcZ(12,9,L.user_list$)),t.xp6(2),t.Q6J("ngIf",!L.hide_actions)}},directives:[E.KE,C.BU,d.qn,o.sg,d.HS,s.o,d.qH,l.Fj,C.ZL,d.oH,l.JJ,l.On,o.O5,u.Ou,E.R9,C.XC,r.ey,D.lW],pipes:[o.Ov],styles:[""]}),S})()},9697:(rt,Y,n)=>{n.d(Y,{d:()=>J});var t=n(3184),l=n(587),a=n(2218),g=n(4139),e=n(4350),i=n(823),m=n(3298),_=n(9095),h=n(7418),T=n(6942),A=n(3294),Z=n(6862),R=n(4770),E=n(4683),C=n(4618),d=n(3188),o=n(5306),s=n(6362),u=n(4742),r=n(1130);const D=["input"];function B(K,S){1&K&&t._UZ(0,"mat-spinner",11)}function N(K,S){if(1&K){const v=t.EpF();t.TgZ(0,"mat-option",12),t.NdJ("click",function(){const W=t.CHM(v).$implicit,at=t.oxw();return at.setValue(W),at.blurInput()}),t.TgZ(1,"div",13),t._uU(2),t.qZA(),t.TgZ(3,"div",14),t._uU(4),t.qZA()()}if(2&K){const v=S.$implicit;t.xp6(2),t.Oqu(v.name),t.xp6(2),t.hij(" ",v.email," ")}}function p(K,S){if(1&K){const v=t.EpF();t.TgZ(0,"mat-option",15)(1,"div",16),t.NdJ("mousedown",function(L){return L.stopPropagation(),L.preventDefault()})("touchstart",function(L){return L.stopPropagation(),L.preventDefault()})("click",function(L){t.CHM(v);const W=t.oxw();return W.setValue(W.search_str),L.stopPropagation(),L.preventDefault()}),t.TgZ(2,"div",17),t._uU(3),t.qZA()()()}if(2&K){const v=t.oxw();t.xp6(3),t.hij(' Add external attendee "',v.search_str,'" ')}}function M(K,S){if(1&K){const v=t.EpF();t.TgZ(0,"mat-option",18),t.NdJ("click",function(){return t.CHM(v),t.oxw().empty_fn()}),t._uU(1),t.qZA()}if(2&K){const v=t.oxw();t.Q6J("disabled",!v.empty_fn),t.xp6(1),t.AsE(" ",v.search_str?"No users found.":""," ",v.error," ")}}let J=(()=>{class K extends A.KG{constructor(){super(...arguments),this.error="",this.query_fn=v=>(0,Z.VE)(v),this.search$=new a.xQ,this.search_results$=this.search$.pipe((0,i.b)(400),(0,m.x)(),(0,_.w)(v=>(this.loading=!0,this.options&&this.options.length>0?(0,g.of)(this.options):v.length>=3?this.guests?(0,e.D)([(0,Z.VE)(v),(0,Z.jf)(v)]):this.query_fn(v):(0,g.of)([]))),(0,h.K)(v=>(0,g.of)([])),(0,T.U)(v=>{this.loading=!1,v=(0,A.xH)(v);const f=(this.search_str||"").toLowerCase();return v.filter(L=>!this.filter||this.filter(L,f))})),this.cancelReset=()=>this.clearTimeout("reset"),this.blurInput=()=>{this.timeout("blur",()=>{var v,f;return null===(f=null===(v=this._input_el)||void 0===v?void 0:v.nativeElement)||void 0===f?void 0:f.blur()})}}ngOnInit(){this.subscription("search_results",this.search_results$.subscribe(v=>this.user_list=v))}resetSearchString(){this.timeout("reset",()=>{var v;return this.search_str=(null===(v=this.active_user)||void 0===v?void 0:v.name)||""},100)}setValue(v,f){"string"==typeof v&&v===this.search_str&&(v=new Z.n5({name:(this.search_str||f||"").split("@")[0],email:this.search_str||f||""})),v instanceof Z.n5&&(this.active_user=v,this._onChange&&this._onChange(v),this.resetSearchString())}writeValue(v){this.active_user=v,this.resetSearchString()}setDisabledState(v){this.disabled=v}registerOnChange(v){this._onChange=v}registerOnTouched(v){this._onTouch=v}}return K.\u0275fac=function(){let S;return function(f){return(S||(S=t.n5z(K)))(f||K)}}(),K.\u0275cmp=t.Xpm({type:K,selectors:[["a-user-search-field"]],viewQuery:function(v,f){if(1&v&&t.Gf(D,5,t.SBq),2&v){let L;t.iGM(L=t.CRH())&&(f._input_el=L.first)}},inputs:{disabled:"disabled",placeholder:"placeholder",options:"options",guests:"guests",error:"error",validate:"validate",empty_fn:"empty_fn",filter:"filter",query_fn:"query_fn"},features:[t._Bn([{provide:l.JU,useExisting:(0,t.Gpc)(()=>K),multi:!0}]),t.qOj],decls:12,vars:8,consts:[["form-field","",1,"user-search-field","text-black"],["overlay","","appearance","outline"],["matInput","","keyboard","","name","user-search",3,"ngModel","disabled","placeholder","matAutocomplete","ngModelChange","keyup.enter","blur","focus"],["input",""],["matPrefix","",1,"text-2xl","relative"],["matSuffix","","diameter","16",4,"ngIf"],[3,"optionSelected"],["auto","matAutocomplete"],[3,"click",4,"ngFor","ngForOf"],["class","relative pointer-events-none",4,"ngIf"],[3,"disabled","click",4,"ngIf"],["matSuffix","","diameter","16"],[3,"click"],[1,"leading-tight"],[1,"text-xs","text-black","opacity-60"],[1,"relative","pointer-events-none"],[1,"absolute","inset-0","px-4","pointer-events-auto",3,"mousedown","touchstart","click"],[1,"pointer-events-none"],[3,"disabled","click"]],template:function(v,f){if(1&v&&(t.TgZ(0,"div",0)(1,"mat-form-field",1)(2,"input",2,3),t.NdJ("ngModelChange",function(W){return f.search_str=W})("ngModelChange",function(W){return f.search$.next(W||"")})("keyup.enter",function(){return f.validate&&f.validate(f.search_str)?f.setValue(f.search_str):""})("blur",function(){return f.resetSearchString()})("focus",function(){return f.cancelReset()}),t.qZA(),t.TgZ(4,"app-icon",4),t._uU(5,"search"),t.qZA(),t.YNc(6,B,1,0,"mat-spinner",5),t.qZA(),t.TgZ(7,"mat-autocomplete",6,7),t.NdJ("optionSelected",function(W){return f.setValue(W.option.value)}),t.YNc(9,N,5,2,"mat-option",8),t.YNc(10,p,4,1,"mat-option",9),t.YNc(11,M,2,3,"mat-option",10),t.qZA()()),2&v){const L=t.MAs(8);t.xp6(2),t.Q6J("ngModel",f.search_str)("disabled",f.disabled)("placeholder",f.placeholder||"Search for user...")("matAutocomplete",L),t.xp6(4),t.Q6J("ngIf",f.loading),t.xp6(3),t.Q6J("ngForOf",f.user_list),t.xp6(1),t.Q6J("ngIf",f.search_str&&f.validate&&f.validate(f.search_str)),t.xp6(1),t.Q6J("ngIf",!(null!=f.user_list&&f.user_list.length)&&(f.search_str||f.error))}},directives:[R.KE,E.Nt,C.U,l.Fj,d.ZL,l.JJ,l.On,o.o,R.qo,s.O5,u.Ou,R.R9,d.XC,s.sg,r.ey],styles:["[_nghost-%COMP%], mat-form-field[_ngcontent-%COMP%]{width:100%}app-icon[_ngcontent-%COMP%]{top:.15em;left:-.15em}\n/*# sourceMappingURL=user-search-field.component.ts-angular-inline--35.css.map*/"]}),K})()},3619:(rt,Y,n)=>{n.d(Y,{Yo:()=>t.Y,nk:()=>e,w7:()=>a.w});var t=n(6367),a=(n(6545),n(6638)),g=n(3499);class e{constructor(m={}){var _;this.toJSON=()=>this.format(),this.id=m.id||"",this.map_id=m.map_id||m.id||"",this.name=m.name||"",this.bookable=null!==(_=m.bookable)&&void 0!==_&&_,this.zone=m.zone||new g.TT8,this.groups=m.groups||[],this.qr_code=m.qr_code||"",this.features=m.features||[]}format(){const{id:m,name:_,bookable:h,groups:T,features:A}=this;return{id:m,name:_,bookable:h,groups:T,features:A}}}},6367:(rt,Y,n)=>{n.d(Y,{Y:()=>t});class t{constructor(a={}){var g;this.settings={},this.id=a.id||"",this.parent_id=a.parent_id||"",this.name=a.name||"",this.display_name=a.display_name||"",this.map_id=a.map_id||"",this.capacity=a.capacity||0,this.locations=a.locations||[],this.tags=a.tags||[];const e=this.display_name.split(" ");this.number=(null===(g=e.length>=2?e[e.length-1]:this.display_name[0])||void 0===g?void 0:g.toUpperCase())||""}}},6545:(rt,Y,n)=>{n.d(Y,{Y:()=>l});var t=n(3294);class l{constructor(g={}){this.id=g.id||"",this.name=g.name||"",this.description=g.description||"",this.tags=g.tags||[],this.count=g.count||0,this.capacity=g.capacity||0,this.bindings=g.bindings||{},this._settings=g.settings||{}}setting(g){const e=g.split(".");return(0,t.Wn)(e,this._settings)}}},6638:(rt,Y,n)=>{n.d(Y,{w:()=>R});var t=n(4929),l=n(3294),a=n(3499),g=n(4505),e=n(7716),i=n(6942),m=n(5670),_=n(6367);class h{constructor(C={}){this.id=C.id||"",this.name=C.name||"";const d=C.settings||{};this.display_name=C.display_name;const o=d.discovery_info||d;this.zone_id=C.zone_id||C.zone,this.extras=(C.extras||o.extras||[]).map(u=>({id:u.extra_id||u.id,name:u.extra_name||u.name})),this.loan_items=(C.loan_items||o.loan_items||[]).map(u=>({id:u.extra_id||u.id,name:u.extra_name||u.name})),this.levels=(C.levels||o.levels||[]).map(u=>new _.Y(Object.assign(Object.assign({},u),{building_id:this.id}))),this._roles=C.roles||o.roles||{},this._lockers=C.lockers||C.locker_structure||o.locker_structure||{},this._systems=C.systems||o.systems||{},this._phone_numbers=C.phone_numbers||o.phone_numbers||{},this._location=C.location||o.location||{longitude:null,latitude:null},this.room_configurations=C.room_configurations||o.room_configurations||[],this.attributes=C.attributes||o.attributes||[];const s=[];if(C.neighbourhoods)for(const u in C.neighbourhoods)if(u in C.neighbourhoods){const r=C.neighbourhoods[u]||{};for(const D in r)D in r&&s.push({id:r[D],name:D,level_id:u})}this.bindings=C.bindings||{},this.searchables=s,this.timezone=C.timezone||o.timezone||d.timezone||"",this.catering_hours=C.catering_hours||o.catering_hours||d.catering_hours||{start:7,end:20},this.visitor_space=C.visitor_space||o.visitor_space||d.visitor_space||"",this.holding_bay=C.holding_bay||o.holding_bay||d.holding_bay||"",this.code=C.code||o.code||d.code||"",this.address=C.address||o.address||d.address||"",this.orientations=C.orientations||o.orientations||d.orientations||{},this.booking_details=C.booking_details||o.booking_details||d.booking_details||null,this.booking_rules=C.booking_rules||o.booking_rules||d.booking_rules||{},this.catering_restricted_from=C.catering_restricted_from||o.catering_restricted_from||d.catering_restricted_from||-1440,this.currency=C.currency||o.currency||d.currency||"USD"}role(C){return[...this._roles[C]||[]]}get role_names(){return Object.keys(this._roles).filter(C=>C in this._roles)}get lockers(){return Object.assign({},this._lockers||{})}get systems(){return Object.assign({},this._systems||{})}get phone_numbers(){return Object.assign({},this._phone_numbers||{})}featuresForLevel(C){return(this.searchables||[]).filter(d=>d.level_id===C)}}var T=n(6545),A=n(3184),Z=n(9481);let R=(()=>{class E{constructor(d,o){this._service=d,this._router=o,this._initialised=new g.X(!1),this.initialised=this._initialised.asObservable(),this._buildings=new g.X([]),this._active_building=new g.X(null),this._levels=new g.X([]),this.building_list=this._buildings.asObservable(),this.level_list=this._levels.asObservable(),this.active_building=this._active_building.asObservable(),this.active_levels=(0,e.aj)([this._levels,this._active_building]).pipe((0,i.U)(([s,u])=>u?this.levelsForBuilding(u):[])),this._settings=[],this._building_settings={},(0,a.ttN)().pipe((0,m.P)(s=>s)).subscribe(()=>setTimeout(()=>this.init(),1e3)),this.active_building.subscribe(s=>{s&&(this._service.overrides=[...this._settings,this.buildingSettings(s.id)])})}get settings(){return this._settings}get building_settings(){return this._building_settings}buildingSettings(d=""){return!d&&this.building&&(d=this.building.id),this._building_settings&&this._building_settings[d]||{}}get organisation(){return this._organisation}get buildings(){return this._buildings.getValue()}get building(){return this._active_building.getValue()}set building(d){this._active_building.next(d),this._service.overrides=[...this._settings,this.buildingSettings(d.id).details]}binding(d){var o,s;return(null===(o=this.building)||void 0===o?void 0:o.bindings[d])||(null===(s=this._organisation)||void 0===s?void 0:s.bindings[d])}find(d){return this.buildings.find(o=>o.id===d)}get levels(){return this._levels.getValue()}levelWithID(d){return this.levels.find(o=>null==d?void 0:d.includes(o.id))}levelsForBuilding(d){return this.levels.filter(o=>o.parent_id===d.id)}init(d=0){return(0,t.mG)(this,void 0,void 0,function*(){this._initialised.next(!1),yield this.load().catch(o=>{throw(0,l.cB)("Error loading organisation data. Retrying..."),setTimeout(()=>this.init(d),Math.min(1e4,300*++d)),o}),this._initialised.next(!0),window.debug&&(window.application||(window.application={}),window.application.orgs=this)})}load(){return(0,t.mG)(this,void 0,void 0,function*(){yield this.loadOrganisation(),yield this.loadBuildings(),yield this.loadLevels(),yield this.loadSettings()})}loadOrganisation(){var d;return(0,t.mG)(this,void 0,void 0,function*(){const o=yield(0,a.I0G)({tags:"org"}).pipe((0,i.U)(s=>s.data)).toPromise();if(o.length){const s=(0,a.N9E)(),u=o.find(D=>{var B;return(0,a.y7C)()||D.id===(null===(B=null==s?void 0:s.config)||void 0===B?void 0:B.org_zone)})||o[0],r=null===(d=yield(0,a.rlq)(u.id,"bindings").toPromise())||void 0===d?void 0:d.details;this._organisation=new T.Y(Object.assign(Object.assign({},u),{bindings:r}))}else this._router.navigate(["/misconfigured"])})}loadBuildings(){var d,o;return(0,t.mG)(this,void 0,void 0,function*(){const s=yield(0,a.I0G)({tags:"building",limit:500}).pipe((0,i.U)(D=>D.data.filter(B=>{var N;return B.parent_id===(null===(N=this._organisation)||void 0===N?void 0:N.id)}))).toPromise();(null==s?void 0:s.length)||this._router.navigate(["/misconfigured"]);const u=[];for(const D of s){const B=null===(d=yield(0,a.rlq)(D.id,"bindings").toPromise())||void 0===d?void 0:d.details;u.push(new h(Object.assign(Object.assign({},D),{bindings:B})))}this._buildings.next(u);const r=localStorage.getItem("PLACEOS.building");r&&this.buildings.find(D=>D.id===r)&&this._active_building.next(this.buildings.find(D=>D.id===r)),!(null===(o=this.building)||void 0===o?void 0:o.id)&&(null==u?void 0:u.length)>0&&(this.building=u[0])})}loadLevels(){return(0,t.mG)(this,void 0,void 0,function*(){const d=yield(0,a.I0G)({tags:"level",limit:2500}).pipe((0,i.U)(s=>s.data)).toPromise();(null==d?void 0:d.length)||this._router.navigate(["/misconfigured"]);const o=d.map(s=>new _.Y(s));o.sort((s,u)=>(s.name||"").localeCompare(u.name||"")),this._levels.next(o)})}get available_room_configs(){return this.buildings.map(d=>[...d.room_configurations]).reduce((d,o)=>d.concat(o),[]).sort((d,o)=>d.name.localeCompare(o.name))}loadSettings(){return(0,t.mG)(this,void 0,void 0,function*(){if(!this._organisation)return;const d=`${(this._service.app_name||"workplace").toLowerCase()}_app`,o=yield(0,a.rlq)(this._organisation.id,d).toPromise(),s=yield(0,a.rlq)(this._organisation.id,"settings").toPromise();this._settings=[s.details,o.details];const u=this.buildings;for(const r of u)this._building_settings[r.id]=yield(0,a.rlq)(r.id,d).toPromise();this._service.overrides=[...this._settings,this.buildingSettings(this.building.id).details]})}saveBuilding(d){localStorage.setItem("PLACEOS.building",d)}}return E.\u0275fac=function(d){return new(d||E)(A.LFG(l.gb),A.LFG(Z.F0))},E.\u0275prov=A.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"}),E})()},3667:(rt,Y,n)=>{n.d(Y,{$q:()=>m,YR:()=>Yt,T:()=>_.T,d:()=>pt,sK:()=>kt.s,bJ:()=>Qt});var t=n(6362),l=n(5758),a=n(7741),g=n(3294),e=n(3184);function i(w,nt){if(1&w){const x=e.EpF();e.TgZ(0,"button",12),e.NdJ("click",function(){return e.CHM(x),e.oxw().displayed=null}),e._uU(1," Back "),e.qZA()}}let m=(()=>{class w{constructor(x){this._settings=x,this.selected=[]}get favorites(){return this._settings.get("user.favourite_spaces")||[]}toggleFavourite(x){const Q=this.favorites;Q.includes(x.id)?this._settings.saveUserSetting("user.favourite_spaces",Q.filter(vt=>vt!==x.id)):this._settings.saveUserSetting("user.favourite_spaces",[...Q,x.id])}}return w.\u0275fac=function(x){return new(x||w)(e.Y36(g.gb))},w.\u0275cmp=e.Xpm({type:w,selectors:[["new-space-select-modal"]],decls:17,vars:16,consts:[[1,"absolute","inset-0","sm:relative","sm:inset-none","bg-white","flex","flex-col"],[1,"flex","items-center","space-x-4","w-full"],["mat-icon-button","","mat-dialog-close","",1,"z-20"],[1,"flex-1","flex","items-center","divide-x","divide-gray-200","min-h-[65vh]","h-[65vh]","w-full"],[1,"h-full"],[1,"flex","flex-col","items-center","flex-1","w-1/2","h-full"],[1,"w-full","border-b","border-gray-200"],[1,"flex-1","h-1/2",3,"favorites","toggleFav","onSelect"],[1,"h-full","sm:relative","sm:block",3,"space","toggleFav"],[1,"flex","flex-col-reverse","sm:flex-row","items-center","justify-end","p-2","sm:space-x-2","border-t","border-gray-200","w-full"],["mat-button","","return","","class","inverse sm:hidden w-full sm:w-auto",3,"click",4,"ngIf"],["mat-button","","save","",1,"w-full","sm:w-auto","sm:mb-0",3,"mat-dialog-close"],["mat-button","","return","",1,"inverse","sm:hidden","w-full","sm:w-auto",3,"click"]],template:function(x,Q){1&x&&(e.TgZ(0,"div",0)(1,"header",1)(2,"button",2)(3,"app-icon"),e._uU(4,"close"),e.qZA()(),e.TgZ(5,"h3"),e._uU(6,"Find Space"),e.qZA()(),e.TgZ(7,"main",3),e._UZ(8,"space-filters",4),e.TgZ(9,"div",5),e._UZ(10,"space-filters-display",6),e.TgZ(11,"space-list",7),e.NdJ("toggleFav",function(vt){return Q.toggleFavourite(vt)})("onSelect",function(vt){return Q.displayed=vt}),e.qZA()(),e.TgZ(12,"space-details",8),e.NdJ("toggleFav",function(){return Q.toggleFavourite(Q.displayed)}),e.qZA()(),e.TgZ(13,"footer",9),e.YNc(14,i,2,0,"button",10),e.TgZ(15,"button",11),e._uU(16," View List "),e.qZA()()()),2&x&&(e.xp6(11),e.Q6J("favorites",Q.favorites),e.xp6(1),e.ekj("hidden",!Q.displayed)("absolute",Q.displayed)("inset-x-0",Q.displayed)("top-0",Q.displayed)("bottom-20",Q.displayed),e.Q6J("space",Q.displayed),e.xp6(2),e.Q6J("ngIf",Q.displayed),e.xp6(1),e.ekj("mb-2",Q.displayed),e.Q6J("mat-dialog-close",Q.selected))},styles:[""]}),w})();var _=n(656);function h(w,nt){if(1&w&&(e.TgZ(0,"div",8)(1,"app-icon"),e._uU(2,"account_circle"),e.qZA(),e.TgZ(3,"div"),e._uU(4),e.qZA()()),2&w){const x=e.oxw(2);e.xp6(4),e.Oqu(x.space.capacity)}}function T(w,nt){if(1&w){const x=e.EpF();e.TgZ(0,"button",9),e.NdJ("click",function(){return e.CHM(x),e.oxw(2).action.emit()}),e.TgZ(1,"app-icon"),e._uU(2),e.qZA()()}if(2&w){const x=e.oxw(2);e.xp6(2),e.Oqu("available"===x.type?"add":"close")}}function A(w,nt){if(1&w&&(e.TgZ(0,"div",2)(1,"div",3)(2,"div",4),e._uU(3),e.qZA(),e.TgZ(4,"div",5),e._uU(5),e.qZA()(),e.YNc(6,h,5,1,"div",6),e.YNc(7,T,3,1,"button",7),e.qZA()),2&w){const x=e.oxw(),Q=e.MAs(2);e.xp6(3),e.Oqu(x.space.name),e.xp6(2),e.hij(" ",(null==x.space.level?null:x.space.level.display_name)||(null==x.space.level?null:x.space.level.name)," "),e.xp6(1),e.Q6J("ngIf",-1!==x.space.capacity),e.xp6(1),e.Q6J("ngIf",x.multiple)("ngIfElse",Q)}}function Z(w,nt){if(1&w&&(e.TgZ(0,"button",10),e._uU(1),e.qZA()),2&w){const x=e.oxw();e.ekj("request",x.space.by_request),e.xp6(1),e.hij(" ",x.space.by_request?"Request":"Book"," ")}}let R=(()=>{class w{constructor(){this.action=new e.vpe}}return w.\u0275fac=function(x){return new(x||w)},w.\u0275cmp=e.Xpm({type:w,selectors:[["a-space-select-item"]],inputs:{space:"space",type:"type",multiple:"multiple"},outputs:{action:"action"},decls:3,vars:1,consts:[["space","","class","w-full flex items-center p-2 space-x-2 border-b border-gray-100",4,"ngIf"],["single_button",""],["space","",1,"w-full","flex","items-center","p-2","space-x-2","border-b","border-gray-100"],[1,"flex-1","w-1/2"],[1,"text-base","truncate"],[1,"text-xs"],["class","flex items-center",4,"ngIf"],["mat-icon-button","",3,"click",4,"ngIf","ngIfElse"],[1,"flex","items-center"],["mat-icon-button","",3,"click"],["mat-button","",1,"w-32"]],template:function(x,Q){1&x&&(e.YNc(0,A,8,5,"div",0),e.YNc(1,Z,2,3,"ng-template",null,1,e.W1O)),2&x&&e.Q6J("ngIf",Q.space)},styles:[""]}),w})();var E=n(4505),C=n(7716),d=n(9095),o=n(9128),s=n(6942),u=n(8759),r=n(1810),D=n(2317),B=n(3619),N=n(8025),p=n(6217);function M(w,nt){if(1&w&&(e.TgZ(0,"mat-option",13),e._uU(1),e.qZA()),2&w){const x=nt.$implicit;e.Q6J("value",x),e.xp6(1),e.hij(" ",x.display_name||x.name," ")}}function J(w,nt){if(1&w){const x=e.EpF();e.TgZ(0,"mat-form-field",10)(1,"mat-select",11),e.NdJ("ngModelChange",function(st){return e.CHM(x),e.oxw().building.next(st)}),e.YNc(2,M,2,2,"mat-option",12),e.qZA()()}if(2&w){const x=e.oxw();e.xp6(1),e.Q6J("ngModel",x.building.getValue()),e.xp6(1),e.Q6J("ngForOf",x.buildings)}}function K(w,nt){if(1&w&&(e.TgZ(0,"mat-option",13),e._uU(1),e.qZA()),2&w){const x=nt.$implicit;e.Q6J("value",x.id),e.xp6(1),e.hij(" ",x.name," ")}}function S(w,nt){if(1&w){const x=e.EpF();e.TgZ(0,"mat-form-field",10)(1,"mat-select",14),e.NdJ("ngModelChange",function(st){return e.CHM(x),e.oxw().type=st}),e.YNc(2,K,2,2,"mat-option",12),e.qZA()()}if(2&w){const x=e.oxw();e.xp6(1),e.Q6J("ngModel",x.type),e.xp6(1),e.Q6J("ngForOf",x.space_types)}}function v(w,nt){if(1&w){const x=e.EpF();e.TgZ(0,"a-space-select-item",17),e.NdJ("click",function(){e.CHM(x);const st=e.oxw().$implicit;return e.oxw(3).spaceSelected(st)}),e.qZA()}if(2&w){const x=e.oxw().$implicit,Q=e.oxw(3);e.Q6J("space",x)("multiple",Q.multiple)}}function f(w,nt){if(1&w&&(e.ynx(0),e.YNc(1,v,1,2,"a-space-select-item",16),e.BQk()),2&w){const x=nt.$implicit,Q=e.oxw(3);e.xp6(1),e.Q6J("ngIf",!Q.space_map[x.id])}}function L(w,nt){if(1&w&&(e.ynx(0),e.YNc(1,f,2,1,"ng-container",15),e.ALo(2,"async"),e.BQk()),2&w){const x=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",e.lcZ(2,1,x.filtered_spaces))}}function W(w,nt){if(1&w&&(e.ynx(0),e.YNc(1,L,3,3,"ng-container",5),e.ALo(2,"async"),e.BQk()),2&w){const x=e.oxw(),Q=e.MAs(16);let st;e.xp6(1),e.Q6J("ngIf",null==(st=e.lcZ(2,2,x.filtered_spaces))?null:st.length)("ngIfElse",Q)}}function at(w,nt){if(1&w&&e._UZ(0,"a-space-select-item",20),2&w){const x=nt.$implicit,Q=e.oxw(3);e.Q6J("space",x)("multiple",Q.multiple)}}function G(w,nt){if(1&w&&(e.ynx(0),e.YNc(1,at,1,2,"a-space-select-item",19),e.BQk()),2&w){const x=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",x.spaces)}}function ut(w,nt){if(1&w&&(e.TgZ(0,"div",18),e.YNc(1,G,2,1,"ng-container",5),e.qZA()),2&w){const x=e.oxw(),Q=e.MAs(16);e.ekj("show",x.show_selected),e.xp6(1),e.Q6J("ngIf",x.spaces&&x.spaces.length)("ngIfElse",Q)}}function ot(w,nt){if(1&w){const x=e.EpF();e.TgZ(0,"footer")(1,"button",21),e.NdJ("click",function(){return e.CHM(x),e.oxw().save()}),e._uU(2),e.qZA()()}if(2&w){const x=e.oxw();e.xp6(2),e.hij(" Save selected spaces(",x.spaces.length||"0",") ")}}function dt(w,nt){1&w&&(e.TgZ(0,"div",22)(1,"app-icon",0),e._uU(2,"close"),e.qZA(),e.TgZ(3,"p"),e._uU(4,"No spaces"),e.qZA()())}function it(w,nt){1&w&&(e.TgZ(0,"div",23),e._UZ(1,"mat-spinner",24),e.TgZ(2,"p"),e._uU(3,"Finding available spaces..."),e.qZA()())}let pt=(()=>{class w extends g.KG{constructor(x,Q,st){super(),this._org=x,this._settings=Q,this._data=st,this.event=new e.vpe,this.spaces=[...this._data.spaces||[]],this.building=new E.X(null),this.space_types=[],this.available_spaces=(0,C.aj)([this.building]).pipe((0,d.w)(([vt])=>(this.loading=!0,(0,p.mD)({zone_ids:null==vt?void 0:vt.id,period_start:(0,r.Z)(this._data.date),period_end:(0,r.Z)((0,D.Z)(this._data.date,this._data.duration))}))),(0,o.d)(1)),this.filtered_spaces=this.available_spaces.pipe((0,s.U)(vt=>(0,N.TJ)(vt,Object.assign(Object.assign({},this._data),{host:(0,g.ar)()}),this._org.building.booking_rules)),(0,u.b)(()=>this.loading=!1)),this.building.next(this._org.building||this.buildings[0]),this.subscription("spaces",this.filtered_spaces.subscribe(vt=>vt))}get buildings(){return this._org.buildings}get multiple(){return!!this._settings.get("app.booking.multiple_spaces")}get space_map(){const x={};return this.spaces.forEach(Q=>x[Q.id]=!0),x}spaceSelected(x){this.multiple?this.space_map[x.id]||this.spaces.push(x):(this.spaces=[x],this.save())}save(){this.event.emit({reason:"done",metadata:this.spaces})}}return w.\u0275fac=function(x){return new(x||w)(e.Y36(B.w7),e.Y36(g.gb),e.Y36(l.WI))},w.\u0275cmp=e.Xpm({type:w,selectors:[["a-space-select-modal"]],outputs:{event:"event"},features:[e.qOj],decls:19,vars:7,consts:[[1,"text-3xl"],[1,"text-xl","font-semibold","flex-1"],["mat-icon-button","","mat-dialog-close",""],["appearance","outline",4,"ngIf"],[1,"body",2,"width","32rem"],[4,"ngIf","ngIfElse"],["class","space-list",3,"show",4,"ngIf"],[4,"ngIf"],["empty_state",""],["load_state",""],["appearance","outline"],["name","booking-type","placeholder","Select building",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["name","booking-type","placeholder","Any space type",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],["type","available",3,"space","multiple","click",4,"ngIf"],["type","available",3,"space","multiple","click"],[1,"space-list"],["type","selected",3,"space","multiple",4,"ngFor","ngForOf"],["type","selected",3,"space","multiple"],["mat-button","",3,"click"],["empty","",1,"p-16","flex","flex-col","items-center","space-y-2"],["load","",1,"p-16","flex","flex-col","items-center","space-y-2"],["diameter","48"]],template:function(x,Q){if(1&x&&(e.TgZ(0,"header")(1,"app-icon",0),e._uU(2,"place"),e.qZA(),e.TgZ(3,"div",1),e._uU(4),e.qZA(),e.TgZ(5,"button",2)(6,"app-icon",0),e._uU(7,"close"),e.qZA()()(),e.TgZ(8,"main"),e.YNc(9,J,3,2,"mat-form-field",3),e.YNc(10,S,3,2,"mat-form-field",3),e.TgZ(11,"div",4),e.YNc(12,W,3,4,"ng-container",5),e.YNc(13,ut,2,4,"div",6),e.qZA(),e.YNc(14,ot,3,1,"footer",7),e.YNc(15,dt,5,0,"ng-template",null,8,e.W1O),e.YNc(17,it,4,0,"ng-template",null,9,e.W1O),e.qZA()),2&x){const st=e.MAs(18);e.xp6(4),e.hij(" Select space",Q.multiple?"s":""," "),e.xp6(5),e.Q6J("ngIf",Q.buildings&&Q.buildings.length>1),e.xp6(1),e.Q6J("ngIf",Q.space_types&&Q.space_types.length>1),e.xp6(2),e.Q6J("ngIf",!Q.loading)("ngIfElse",st),e.xp6(1),e.Q6J("ngIf",Q.multiple),e.xp6(1),e.Q6J("ngIf",Q.multiple)}},styles:["mat-form-field[_ngcontent-%COMP%]{height:3.5em;width:100%;padding:0 .25em}.body[_ngcontent-%COMP%]{min-width:20rem;max-width:calc(100vw - 2rem);max-height:65vh;overflow:auto}\n/*# sourceMappingURL=space-select-modal.component.ts-angular-inline--1.css.map*/"]}),w})();const ft=function(){return{disable_pan:!0,disable_zoom:!0}};function gt(w,nt){if(1&w){const x=e.EpF();e.ynx(0),e.TgZ(1,"section",2),e._UZ(2,"image-carousel",3),e.TgZ(3,"button",4),e.NdJ("click",function(){return e.CHM(x),e.oxw().toggleFav.emit()}),e.TgZ(4,"app-icon"),e._uU(5),e.qZA()()(),e.TgZ(6,"section",5)(7,"h2"),e._uU(8),e.qZA(),e.TgZ(9,"button",6),e.NdJ("click",function(){e.CHM(x);const st=e.oxw();return st.active=!st.active,st.activeChange.emit(st.active)}),e.TgZ(10,"div",7)(11,"app-icon"),e._uU(12),e.qZA(),e.TgZ(13,"p"),e._uU(14),e.qZA()()()(),e.TgZ(15,"section",8)(16,"h2"),e._uU(17,"Details"),e.qZA(),e.TgZ(18,"div",9)(19,"app-icon"),e._uU(20,"people"),e.qZA(),e.TgZ(21,"p"),e._uU(22),e.qZA()(),e.TgZ(23,"div",9)(24,"app-icon"),e._uU(25,"meeting_room"),e.qZA(),e.TgZ(26,"p"),e._uU(27),e.qZA()(),e.TgZ(28,"div",9)(29,"app-icon"),e._uU(30,"place"),e.qZA(),e.TgZ(31,"p"),e._uU(32,"BLD 1"),e.qZA()()(),e.TgZ(33,"section",10)(34,"h2"),e._uU(35,"Details"),e.qZA(),e.TgZ(36,"div",9)(37,"app-icon"),e._uU(38,"people"),e.qZA(),e.TgZ(39,"p"),e._uU(40,"WiFi Available"),e.qZA()(),e.TgZ(41,"div",9)(42,"app-icon"),e._uU(43,"restaurant"),e.qZA(),e.TgZ(44,"p"),e._uU(45,"Catering Available"),e.qZA()(),e.TgZ(46,"div",9)(47,"app-icon"),e._uU(48,"edit"),e.qZA(),e.TgZ(49,"p"),e._uU(50,"Whiteboard"),e.qZA()()(),e.TgZ(51,"section",11),e._UZ(52,"interactive-map",12),e.qZA(),e.BQk()}if(2&w){const x=e.oxw();e.xp6(2),e.Q6J("images",x.space.images),e.xp6(1),e.ekj("text-blue-600",x.fav),e.xp6(2),e.Oqu(x.fav?"favorite":"favorite_border"),e.xp6(3),e.Oqu(x.space.display_name||x.space.name),e.xp6(1),e.ekj("inverse",x.active),e.xp6(3),e.Oqu(x.active?"remove":"add"),e.xp6(2),e.hij(" ",x.active?"Remove this room":"Add this room"," "),e.xp6(8),e.hij("",x.space.capacity," People"),e.xp6(5),e.Oqu((null==x.space.level?null:x.space.level.display_name)||(null==x.space.level?null:x.space.level.name)),e.xp6(25),e.Q6J("src",x.map_url)("features",x.features)("options",e.DdM(14,ft))}}function H(w,nt){1&w&&(e.TgZ(0,"div",13)(1,"p",14),e._uU(2," Select a room to view it's details "),e.qZA()())}let mt=(()=>{class w{constructor(){this.fav=!1,this.active=!1,this.activeChange=new e.vpe,this.toggleFav=new e.vpe,this.map_url="",this.features=[]}ngOnChanges(x){x.space&&this.space&&this._updateFeature()}_updateFeature(){this.map_url=this.space.level.map_id,this.features=[{location:this.space.map_id,content:a.qL}]}}return w.\u0275fac=function(x){return new(x||w)},w.\u0275cmp=e.Xpm({type:w,selectors:[["space-details"]],inputs:{space:"space",fav:"fav",active:"active"},outputs:{activeChange:"activeChange",toggleFav:"toggleFav"},features:[e.TTD],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["empty_state",""],["image","",1,"relative","w-full","h-64","z-10"],[1,"absolute","inset-0",3,"images"],["mat-icon-button","","fav","",1,"absolute","bottom-0","left-2","translate-y-1/2","bg-white","rounded","shadow",3,"click"],["actions","",1,"z-0"],["mat-button","",3,"click"],[1,"flex","items-center"],["details",""],[1,"flex","items-center","space-x-2"],["facilities",""],["map","",1,"w-[calc(100vw-2rem)]","h-64","relative","border","border-gray-200","overflow-hidden","rounded"],[3,"src","features","options"],["empty","",1,"p-16","flex","flex-col","items-center","justify-center","space-y-2"],[1,"opacity-30","text-center"]],template:function(x,Q){if(1&x&&(e.YNc(0,gt,53,15,"ng-container",0),e.YNc(1,H,3,0,"ng-template",null,1,e.W1O)),2&x){const st=e.MAs(2);e.Q6J("ngIf",Q.space)("ngIfElse",st)}},styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;width:30%;min-width:20rem;height:100%;min-height:65vh}\n/*# sourceMappingURL=space-details.component.ts-angular-inline--2.css.map*/"]}),w})();var U=n(8426);function $(w,nt){if(1&w){const x=e.EpF();e.TgZ(0,"li",8)(1,"button",9),e.NdJ("click",function(){const vt=e.CHM(x).$implicit;return e.oxw(3).selectSpace(vt)}),e.TgZ(2,"div",10)(3,"div",11)(4,"app-icon"),e._uU(5,"done"),e.qZA()()(),e.TgZ(6,"div",12)(7,"div",13),e._uU(8),e.qZA(),e.TgZ(9,"div",14)(10,"app-icon",15),e._uU(11,"place"),e.qZA(),e.TgZ(12,"p"),e._uU(13),e.qZA()(),e.TgZ(14,"div",14)(15,"app-icon",15),e._uU(16,"people"),e.qZA(),e.TgZ(17,"p"),e._uU(18),e.qZA()()()(),e.TgZ(19,"button",16),e.NdJ("click",function(){const vt=e.CHM(x).$implicit;return e.oxw(3).toggleFav.emit(vt)}),e.TgZ(20,"app-icon"),e._uU(21),e.qZA()()()}if(2&w){const x=nt.$implicit,Q=e.oxw(3);e.xp6(8),e.hij(" ",x.name||"Meeting Space"," "),e.xp6(5),e.Oqu(x.location),e.xp6(5),e.hij(" ",x.capacity<1?2:x.capacity," People "),e.xp6(1),e.ekj("text-blue-600",Q.isFavourite(x.id)),e.xp6(2),e.Oqu(Q.isFavourite(x.id)?"favorite":"favorite_border")}}function b(w,nt){if(1&w&&(e.TgZ(0,"ul",6),e.YNc(1,$,22,6,"li",7),e.ALo(2,"async"),e.qZA()),2&w){const x=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",e.lcZ(2,1,x.available_spaces))}}function I(w,nt){if(1&w&&(e.ynx(0),e.YNc(1,b,3,3,"ul",5),e.ALo(2,"async"),e.BQk()),2&w){const x=e.oxw(),Q=e.MAs(8);let st;e.xp6(1),e.Q6J("ngIf",null==(st=e.lcZ(2,2,x.available_spaces))?null:st.length)("ngIfElse",Q)}}function V(w,nt){1&w&&(e.TgZ(0,"div",17)(1,"p",18),e._uU(2," No available spaces for selected time and/or filters "),e.qZA()())}function j(w,nt){1&w&&(e.TgZ(0,"div",19),e._UZ(1,"mat-spinner",20),e.TgZ(2,"p",21),e._uU(3,"Finding available spaces..."),e.qZA()()),2&w&&(e.xp6(1),e.Q6J("diameter",32))}let q=(()=>{class w{constructor(x){this._event_form=x,this.selected=[],this.favorites=[],this.onSelect=new e.vpe,this.toggleFav=new e.vpe,this.available_spaces=this._event_form.available_spaces,this.loading=this._event_form.loading}ngOnInit(){this._event_form.setView("find")}isFavourite(x){return this.favorites.includes(x)}selectSpace(x){this.onSelect.emit(x)}}return w.\u0275fac=function(x){return new(x||w)(e.Y36(U.MH))},w.\u0275cmp=e.Xpm({type:w,selectors:[["space-list"]],inputs:{selected:"selected",favorites:"favorites"},outputs:{onSelect:"onSelect",toggleFav:"toggleFav"},decls:11,vars:7,consts:[[1,"font-bold"],["count","",1,"text-sm","opacity-60"],[4,"ngIf","ngIfElse"],["empty_state",""],["load_state",""],["class","list-style-none space-y-2",4,"ngIf","ngIfElse"],[1,"list-style-none","space-y-2"],["space","","class","relative p-2 rounded-lg w-full shadow border border-gray-200",4,"ngFor","ngForOf"],["space","",1,"relative","p-2","rounded-lg","w-full","shadow","border","border-gray-200"],["matRipple","","select","",1,"absolute","inset-0","flex","items-center",3,"click"],[1,"relative","w-24","h-24","rounded-xl","bg-black/20","mr-4"],[1,"absolute","top-1","left-1","border","border-white","bg-black/50","rounded-full","h-12","w-12","flex","items-center","justify-center","text-white"],[1,"space-y-2","pb-4"],[1,"font-medium"],[1,"flex","items-center","text-sm","space-x-2"],[1,"text-blue-500"],["mat-icon-button","","fav","",1,"absolute","top-1","right-1",3,"click"],["empty","",1,"p-16","flex","flex-col","items-center","justify-center","space-y-2"],[1,"opacity-30","text-center"],["loading","",1,"p-16","flex","flex-col","items-center","justify-center","space-y-2"],[3,"diameter"],[1,"opacity-30"]],template:function(x,Q){if(1&x&&(e.TgZ(0,"h3",0),e._uU(1,"Results"),e.qZA(),e.TgZ(2,"p",1),e._uU(3),e.ALo(4,"async"),e.qZA(),e.YNc(5,I,3,4,"ng-container",2),e.ALo(6,"async"),e.YNc(7,V,3,0,"ng-template",null,3,e.W1O),e.YNc(9,j,4,1,"ng-template",null,4,e.W1O)),2&x){const st=e.MAs(10);let vt;e.xp6(3),e.hij(" ",(null==(vt=e.lcZ(4,3,Q.available_spaces))?null:vt.length)||0," result(s) found "),e.xp6(2),e.Q6J("ngIf",!e.lcZ(6,5,Q.loading))("ngIfElse",st)}},styles:["[_nghost-%COMP%]{width:100%;height:100%;padding:.5rem;background:rgba(0,0,0,.05)}\n/*# sourceMappingURL=space-list.component.ts-angular-inline--3.css.map*/"]}),w})(),et=(()=>{class w{}return w.\u0275fac=function(x){return new(x||w)},w.\u0275cmp=e.Xpm({type:w,selectors:[["space-filters"]],decls:0,vars:0,template:function(x,Q){},styles:[""]}),w})();var ct=n(4929),_t=n(3910),ht=n(3672);function Mt(w,nt){if(1&w&&(e.TgZ(0,"div",11),e._uU(1),e.qZA()),2&w){const x=e.oxw();e.xp6(1),e.hij(" ",x.location," ")}}function Et(w,nt){if(1&w){const x=e.EpF();e.TgZ(0,"div",12)(1,"p"),e._uU(2),e.qZA(),e.TgZ(3,"button",13),e.NdJ("click",function(){const vt=e.CHM(x).$implicit;return e.oxw().removeFeature(vt)}),e.TgZ(4,"app-icon"),e._uU(5,"close"),e.qZA()()()}if(2&w){const x=nt.$implicit;e.xp6(2),e.Oqu(x)}}let bt=(()=>{class w extends g.KG{constructor(x,Q,st){super(),this._bsheet=x,this._event_form=Q,this._org=st,this.options=this._event_form.options,this.location="",this.editFilters=()=>this._bsheet.open(et)}get start(){return this._event_form.form.value.date}get end(){const{date:x,duration:Q}=this._event_form.form.value;return x+60*Q*1e3}ngOnInit(){this.subscription("opts",this.options.subscribe(({zone_ids:x})=>this._updateLocation(x)))}removeFeature(x){return(0,ct.mG)(this,void 0,void 0,function*(){const Q=yield this._event_form.options.pipe((0,_t.q)(1)).toPromise();this._event_form.setOptions(Object.assign(Object.assign({},Q),{features:(Q.features||[]).filter(st=>st!==x)}))})}_updateLocation(x=[]){const st=this._org.levelWithID(x)||this._org.building;this.location=(null==st?void 0:st.display_name)||(null==st?void 0:st.name)||""}}return w.\u0275fac=function(x){return new(x||w)(e.Y36(ht.ch),e.Y36(U.MH),e.Y36(B.w7))},w.\u0275cmp=e.Xpm({type:w,selectors:[["space-filters-display"]],features:[e.qOj],decls:22,vars:23,consts:[["actions","",1,"sm:hidden","space-x-2","flex","items-center","p-2"],["mat-button","","filters","",1,"flex-1","w-1/2",3,"click"],[1,"flex","items-center"],["mat-button","","map","",1,"rounded-l","rounded-r-none"],["mat-button","","list","",1,"rounded-r","rounded-l-none"],["filters","",1,"flex","items-center","flex-wrap","p-2"],["filter-item","","zone","",4,"ngIf"],["filter-item","","date",""],["filter-item","","time",""],["filter-item","","count",""],["filter-item","",4,"ngFor","ngForOf"],["filter-item","","zone",""],["filter-item",""],["mat-icon-button","",1,"-mr-4",3,"click"]],template:function(x,Q){if(1&x&&(e.TgZ(0,"section",0)(1,"button",1),e.NdJ("click",function(){return Q.editFilters()}),e._uU(2," Filters "),e.qZA(),e.TgZ(3,"div",2)(4,"button",3),e._uU(5," Map "),e.qZA(),e.TgZ(6,"button",4),e._uU(7," List "),e.qZA()()(),e.TgZ(8,"section",5),e.YNc(9,Mt,2,1,"div",6),e.TgZ(10,"div",7),e._uU(11),e.ALo(12,"date"),e.qZA(),e.TgZ(13,"div",8),e._uU(14),e.ALo(15,"date"),e.ALo(16,"date"),e.qZA(),e.TgZ(17,"div",9),e._uU(18),e.ALo(19,"async"),e.qZA(),e.YNc(20,Et,6,1,"div",10),e.ALo(21,"async"),e.qZA()),2&x){let st,vt;e.xp6(4),e.ekj("inverse",!0),e.xp6(2),e.ekj("inverse",!1),e.xp6(3),e.Q6J("ngIf",Q.location),e.xp6(2),e.Oqu(e.xi3(12,10,Q.start,"mediumDate")),e.xp6(3),e.AsE(" ",e.xi3(15,13,Q.start,"shortTime")," \u2014 ",e.xi3(16,16,Q.end,"shortTime")," "),e.xp6(4),e.hij(" Min. ",(null==(st=e.lcZ(19,19,Q.options))?null:st.capcaity)||2," People "),e.xp6(2),e.Q6J("ngForOf",null==(vt=e.lcZ(21,21,Q.options))?null:vt.features)}},styles:["[filter-item][_ngcontent-%COMP%]{display:flex;align-items:center;padding:0 1rem;height:2rem;font-size:.875rem;border:1px solid rgba(0,0,0,.2);border-radius:1.25rem;margin-right:.5rem;margin-bottom:.5rem}[filter-item][_ngcontent-%COMP%]:hover{background:rgba(0,0,0,.1)}[filter-item][_ngcontent-%COMP%] > *[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-left:.5rem}\n/*# sourceMappingURL=space-filters-display.component.ts-angular-inline--4.css.map*/"]}),w})();var Ut=n(5306),It=n(7317),Lt=n(4770),Ft=n(1434),$t=n(1130),At=n(4742),wt=n(2581),Zt=n(9136);let Yt=(()=>{class w{}return w.\u0275fac=function(x){return new(x||w)},w.\u0275mod=e.oAB({type:w}),w.\u0275inj=e.cJS({providers:[],imports:[[t.ez,l.Is,a.Kk,ht._r]]}),w})();e.B6R(pt,[Ut.o,It.lW,l.ZT,t.O5,Lt.KE,Ft.gD,t.sg,$t.ey,R,At.Ou],[t.Ov]),e.B6R(R,[t.O5,Ut.o,It.lW],[]),e.B6R(m,[It.lW,l.ZT,Ut.o,et,bt,q,mt,t.O5],[]),e.B6R(mt,[t.O5,wt.K,It.lW,Ut.o,Zt.p],[]),e.B6R(q,[t.O5,t.sg,Ut.o,It.lW,At.Ou],[t.Ov]),e.B6R(bt,[It.lW,t.O5,t.sg,Ut.o],[t.uU,t.Ov]);var zt=n(9375);let St=0;function Qt(w={}){const nt="space-"+St++,x=`Test Space ${St}`,Q=(0,g.yi)(99999)%2==0&&St>1,st=Object.assign({id:nt,name:x,long_name:`${x} with an long name`,map_id:`${St}`,capacity:2*(0,g.yi)(21,1),email:`${x.toLowerCase().split(" ").join(".")}@${zt.U9}`,type:"",searchable:(0,g.yi)(99999)%2==0,controlable:(0,g.yi)(99999)%2==0,bookable:(0,g.yi)(99999)%2==0,cost_hour:100*(0,g.yi)(300),setup:5*(0,g.yi)(6),breakdown:5*(0,g.yi)(6),zones:["zone_lvl-0"],support_url:`/control/#/panel/${nt}`,bookings:[],linked_rooms:Q?[`space-${(0,g.yi)(St-1)}`]:[],image:""},w);return st.configurations&&st.configurations.length>0&&(st.configurations.forEach(vt=>vt.capacity=(0,g.yi)(st.capacity)+1),st.configurations[0].capacity=st.capacity),st}var kt=n(73)},656:(rt,Y,n)=>{n.d(Y,{T:()=>l});var t=n(3619);class l{constructor(g={}){this.id=g.id||"",this.name=g.name||"",this.display_name=g.display_name||"",this.email=(g.email||"").toLowerCase(),this.capacity=g.capacity||-1,this.feature_list=g.feature_list||g.features||[],this.bookable=!!g.bookable,this.zones=g.zones||[],this.support_url=g.support_url||"",this.map_id=g.map_id||"",this.image=g.image||"",this.configurations=g.configurations||[],this.features=g.features||[],this.response_status=g.response_status,this.level=g.level||new t.Yo,this.availability=g.availability||[]}}},73:(rt,Y,n)=>{n.d(Y,{s:()=>T});var t=n(4929),l=n(3499),a=n(6942),g=n(5670),e=n(4505),i=n(3619),m=n(656),_=n(3294),h=n(3184);let T=(()=>{class A{constructor(R){this._org=R,this._list=new e.X([]),this._initialised=new e.X(!1),this.initialised=this._initialised.asObservable(),this.list=this._list.asObservable(),this.features=this.list.pipe((0,a.U)(E=>(0,_.Tw)((0,_.xH)(E.map(C=>C.features))))),this._compare=E=>E.zones.includes(this._org.building.id),this._org.initialised.pipe((0,g.P)(E=>E)).subscribe(()=>this.loadSpaces())}get space_list(){return this._list.getValue()}filter(R=this._compare){return this._list.getValue().filter(E=>R(E))}find(R){return this._list.getValue().find(E=>E.id===R||E.email===R)}loadSpaces(){return(0,t.mG)(this,void 0,void 0,function*(){const C=(yield(0,l.vIL)({zone_id:this._org.organisation.id,limit:5e3}).pipe((0,a.U)(d=>d.data)).toPromise()).map(d=>new m.T(Object.assign(Object.assign({},d),{level:this._org.levelWithID([...d.zones])}))).filter(d=>d.map_id);this._list.next(C),this._initialised.next(!0)})}}return A.\u0275fac=function(R){return new(R||A)(h.LFG(i.w7))},A.\u0275prov=h.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})()},6862:(rt,Y,n)=>{n.d(Y,{OO:()=>_.OO,Y:()=>v,rW:()=>R,PP:()=>K,mO:()=>_.mO,U9:()=>h.U9,n5:()=>_.n5,ro:()=>ot,jf:()=>ut,VE:()=>H,pP:()=>dt,w0:()=>mt,sF:()=>it});var t=n(6362),l=n(587),a=n(5758),g=n(1534),e=n(7741),i=n(3184),m=n(3294),_=n(5197),h=n(9375);function T($,b){if(1&$&&(i.TgZ(0,"main",6),i._UZ(1,"user-form",7),i.qZA()),2&$){const I=i.oxw();i.xp6(1),i.Q6J("form",I.form)}}function A($,b){if(1&$){const I=i.EpF();i.TgZ(0,"footer",8)(1,"button",9),i._uU(2,"Cancel"),i.qZA(),i.TgZ(3,"button",10),i.NdJ("click",function(){return i.CHM(I),i.oxw().saveChanges()}),i._uU(4,"Save"),i.qZA()()}}function Z($,b){1&$&&(i.TgZ(0,"main",11),i._UZ(1,"mat-spinner",12),i.TgZ(2,"p"),i._uU(3,"Saving attendee..."),i.qZA()())}let R=(()=>{class $ extends m.KG{constructor(I){super(),this._data=I,this.event=new i.vpe,this.loading=!1}ngOnInit(){this.user=this._data.user||{},this.form=(0,h.HO)(this.user)}saveChanges(){if(this.form&&(this.form.markAllAsTouched(),this.form.valid)){const I=new _.n5(Object.assign(Object.assign({},this.form.value),{type:"external"}));this.event.emit({reason:"done",metadata:I})}}}return $.\u0275fac=function(I){return new(I||$)(i.Y36(a.WI))},$.\u0275cmp=i.Xpm({type:$,selectors:[["new-user-modal"]],outputs:{event:"event"},features:[i.qOj],decls:11,vars:4,consts:[["mat-dialog-title","",1,"heading"],[1,"flex-1"],["mat-icon-button","","mat-dialog-close",""],["class","flex flex-col items-center w-full p-2",4,"ngIf","ngIfElse"],["class","flex items-center justify-center w-full p-2 border-t border-gray-300 space-x-2",4,"ngIf"],["load_state",""],[1,"flex","flex-col","items-center","w-full","p-2"],[3,"form"],[1,"flex","items-center","justify-center","w-full","p-2","border-t","border-gray-300","space-x-2"],["mat-button","","mat-dialog-close","",1,"inverse"],["mat-button","",3,"click"],[1,"flex","flex-col","items-center","w-full","p-2","space-y-2"],["diameter","32"]],template:function(I,V){if(1&I&&(i.TgZ(0,"header")(1,"div",0),i._uU(2),i.qZA(),i._UZ(3,"div",1),i.TgZ(4,"button",2)(5,"app-icon"),i._uU(6,"close"),i.qZA()()(),i.YNc(7,T,2,1,"main",3),i.YNc(8,A,5,0,"footer",4),i.YNc(9,Z,4,0,"ng-template",null,5,i.W1O)),2&I){const j=i.MAs(10);i.xp6(2),i.hij(" ",null!=V.user&&V.user.id?"Edit":"Add"," External Attendee "),i.xp6(5),i.Q6J("ngIf",!V.loading)("ngIfElse",j),i.xp6(1),i.Q6J("ngIf",!V.loading)}},styles:["main[_ngcontent-%COMP%]{min-height:20em!important;width:100%}footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:8em}\n/*# sourceMappingURL=new-user-modal.component.ts-angular-inline--5.css.map*/"]}),$})();var E=n(4770),C=n(4683);function d($,b){if(1&$&&(i.TgZ(0,"div",3)(1,"label",4),i._uU(2," Name"),i.TgZ(3,"span"),i._uU(4,"*"),i.qZA(),i._uU(5,": "),i.qZA(),i.TgZ(6,"mat-form-field",5),i._UZ(7,"input",6),i.TgZ(8,"mat-error"),i._uU(9,"Name is required"),i.qZA()()()),2&$){const I=i.oxw(2);i.xp6(1),i.ekj("error",I.hasError("name"))}}function o($,b){if(1&$&&(i.TgZ(0,"div",3)(1,"label",7),i._uU(2," Email"),i.TgZ(3,"span"),i._uU(4,"*"),i.qZA(),i._uU(5,": "),i.qZA(),i.TgZ(6,"mat-form-field",5),i._UZ(7,"input",8),i.TgZ(8,"mat-error"),i._uU(9,"A valid email is required"),i.qZA()()()),2&$){const I=i.oxw(2);i.xp6(1),i.ekj("error",I.hasError("email"))}}function s($,b){if(1&$&&(i.TgZ(0,"div",3)(1,"label",9),i._uU(2," Organisation"),i.TgZ(3,"span"),i._uU(4,"*"),i.qZA(),i._uU(5,": "),i.qZA(),i.TgZ(6,"mat-form-field",5),i._UZ(7,"input",10),i.TgZ(8,"mat-error"),i._uU(9,"Organisation is required"),i.qZA()()()),2&$){const I=i.oxw(2);i.xp6(1),i.ekj("error",I.hasError("organisation"))}}function u($,b){if(1&$&&(i.TgZ(0,"div",3)(1,"label",11),i._uU(2," Phone: "),i.qZA(),i.TgZ(3,"mat-form-field",5),i._UZ(4,"input",12),i.TgZ(5,"mat-error"),i._uU(6,"Phone format is invalid"),i.qZA()()()),2&$){const I=i.oxw(2);i.xp6(1),i.ekj("error",I.hasError("phone"))}}function r($,b){1&$&&(i.TgZ(0,"div",3)(1,"mat-checkbox",13),i._uU(2," Assistance required "),i.qZA()())}function D($,b){1&$&&(i.TgZ(0,"div",3)(1,"mat-checkbox",14),i._uU(2," Visit expected "),i.qZA()())}function B($,b){if(1&$&&(i.TgZ(0,"form",1),i.YNc(1,d,10,2,"div",2),i.YNc(2,o,10,2,"div",2),i.YNc(3,s,10,2,"div",2),i.YNc(4,u,7,2,"div",2),i.YNc(5,r,3,0,"div",2),i.YNc(6,D,3,0,"div",2),i.qZA()),2&$){const I=i.oxw();i.Q6J("formGroup",I.form),i.xp6(1),i.Q6J("ngIf",I.form.controls.name),i.xp6(1),i.Q6J("ngIf",I.form.controls.email),i.xp6(1),i.Q6J("ngIf",I.form.controls.organisation),i.xp6(1),i.Q6J("ngIf",I.form.controls.phone),i.xp6(1),i.Q6J("ngIf",I.form.controls.assistance_required),i.xp6(1),i.Q6J("ngIf",I.form.controls.visit_expected)}}let N=(()=>{class ${hasError(I){var V;const{invalid:j,touched:q}=(null===(V=this.form)||void 0===V?void 0:V.controls[I])||{};return j&&q}}return $.\u0275fac=function(I){return new(I||$)},$.\u0275cmp=i.Xpm({type:$,selectors:[["user-form"]],inputs:{form:"form"},decls:1,vars:1,consts:[["user-form","",3,"formGroup",4,"ngIf"],["user-form","",3,"formGroup"],["class","field",4,"ngIf"],[1,"field"],["for","name"],["appearance","outline"],["matInput","","name","name","placeholder","Name","formControlName","name"],["for","email"],["matInput","","name","email","placeholder","Email Address","formControlName","email"],["for","org"],["matInput","","name","org","placeholder","Organisation","formControlName","organisation"],["for","phone"],["matInput","","name","phone","type","tel","placeholder","Phone","formControlName","phone"],["name","assistance-required","color","primary","formControlName","assistance_required"],["name","visit-expected","color","primary","formControlName","visit_expected"]],template:function(I,V){1&I&&i.YNc(0,B,7,7,"form",0),2&I&&i.Q6J("ngIf",V.form)},directives:[t.O5,l._Y,l.JL,l.sg,E.KE,C.Nt,l.Fj,l.JJ,l.u,E.TO,g.oG],styles:[".field[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}mat-form-field[_ngcontent-%COMP%]{width:100%}\n/*# sourceMappingURL=user-form.component.ts-angular-inline--6.css.map*/"]}),$})();var p=n(7317),M=n(5306),J=n(4742);let K=(()=>{class ${}return $.\u0275fac=function(I){return new(I||$)},$.\u0275mod=i.oAB({type:$}),$.\u0275inj=i.cJS({imports:[[t.ez,l.u5,l.UX,a.Is,e.Kk,g.p9]]}),$})();i.B6R(R,[a.uh,p.lW,a.ZT,M.o,t.O5,N,J.Ou],[]);var S=n(1810);class v{constructor(b={}){this.type=b.type||b.location||"other",this.position=b.position||b.map_id||b.asset_id||{x:b.x/b.map_width||0,y:b.y/b.map_height||0},this.variance=b.variance||0,this.last_seen=b.last_seen||(0,S.Z)(new Date),this.level=b.level,this.building=b.building,this.at_location=!!b.at_location,this.coordinates_from=b.coordinates_from||"top-left"}}var f=n(3499),L=n(6942),at=(n(3902),n(5038));const G="/api/staff/v1/guests";function ut($){const b=(0,at.U)({q:$});return(0,f.U2M)(`${G}${$?"?"+b:""}`).pipe((0,L.U)(I=>I.map(V=>new _.OO(V))))}function ot($){const b=(0,at.U)(Object.assign({},$));return(0,f.U2M)(`${G}${b?"?"+b:""}`).pipe((0,L.U)(I=>I.map(V=>new _.OO(V))))}function dt($){return(0,f.U2M)(`${G}/${encodeURIComponent($)}`).pipe((0,L.U)(b=>new _.OO(b)))}function it($,b){return(0,f.r$K)(`${G}/${encodeURIComponent($)}`,b).pipe((0,L.U)(I=>new _.OO(I)))}const gt="/api/staff/v1/people";function H($){const b=(0,at.U)({q:$});return(0,f.U2M)(`${gt}${$?"?"+b:""}`).pipe((0,L.U)(I=>I.map(V=>new _.mO(V))))}function mt($){return(0,f.U2M)(`${gt}/${encodeURIComponent($)}`).pipe((0,L.U)(b=>new _.mO(b)))}},5197:(rt,Y,n)=>{n.d(Y,{OO:()=>a,mO:()=>g,n5:()=>l});var t=n(9375);class l{constructor(i={}){var m,_,h,T;this.id=i.id||"",this.name=i.name||"",this.email=i.email||"",this.first_name=i.first_name||i.name||"",this.last_name=i.last_name||"",this.phone=i.phone||"",this.organisation=i.organisation||"",this.notes=i.notes||"",this.photo=i.photo||"",this.username=i.username||"",this.organizer=!!i.organizer,this.checked_in=!!i.checked_in,this.required=null===(m=i.required)||void 0===m||m,this.response_status=i.response_status||"";const A=i.groups||[];i.sys_admin&&A.push("placeos_admin"),i.support&&A.push("placeos_support"),i.department&&A.push(i.department),this.groups=A,this.extension_data=i.extension_data||{},this.extension_data.assistance_required=i.assistance_required||this.extension_data.assistance_required,this.is_external=!(null===(_=this.email)||void 0===_?void 0:_.endsWith(`${t.U9}`)),this.visit_expected=null===(h=i.visit_expected)||void 0===h||h,this.assistance_required=!!(null===(T=this.extension_data)||void 0===T?void 0:T.assistance_required);for(const Z in i)Z in this||(this.extension_data[Z]=i[Z])}}class a extends l{constructor(i={}){var m,_;super(i),this.preferred_beverage=i.preferred_beverage||"",this.accepted_terms_conditions=i.accepted_terms_conditions||!1,this.attachments=(null===(m=i.extension_data)||void 0===m?void 0:m.attachments)||i.attachments||[],this.status=(null===(_=i.extension_data)||void 0===_?void 0:_.status)||i.status||"pending"}}class g extends l{constructor(i={}){super(i),this.card_number=i.card_number||"",this.staff_id=i.staff_id||"",this.location=i.location||{},this.is_logged_in=!!i.is_logged_in}}},9375:(rt,Y,n)=>{n.d(Y,{HO:()=>_,U9:()=>g,ZJ:()=>e});var t=n(587);n(3245);let g="@place.tech";function e(T){g=T}function _(T){var A;if(!T)throw Error("No user passed");const Z={name:new t.NI(T.name||""),email:new t.NI(T.email||"",[t.kI.email,t.kI.required]),organisation:new t.NI(T.organisation||"",t.kI.required),phone:new t.NI(T.phone||"",t.kI.pattern(/[+\-()0-9]{1,24}/g)),assistance_required:new t.NI(T.assistance_required||!1),visit_expected:new t.NI(null===(A=T.visit_expected)||void 0===A||A)};return new t.cw(Z)}}},rt=>{rt.O(0,["vendor"],()=>rt(rt.s=3052)),rt.O()}]);
//# sourceMappingURL=main.js.map