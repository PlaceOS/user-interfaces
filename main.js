"use strict";
(self["webpackChunkoutlook_addin"] = self["webpackChunkoutlook_addin"] || []).push([["main"],{

/***/ 20532:
/*!**********************************************************!*\
  !*** ./apps/outlook-addin/src/app/app-routing.module.ts ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _AppRoutingModule;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.AppRoutingModule = void 0;
var router_1 = __webpack_require__(/*! @angular/router */ 95072);
var find_space_component_1 = __webpack_require__(/*! ./rooms/find-space/find-space.component */ 1059);
var room_booking_component_1 = __webpack_require__(/*! ./rooms/room-booking.component */ 96615);
var booking_confirmed_component_1 = __webpack_require__(/*! ./rooms/booking-confirmed/booking-confirmed.component */ 36993);
var upcoming_bookings_component_1 = __webpack_require__(/*! ./rooms/upcoming-bookings/upcoming-bookings.component */ 83805);
var components_1 = __webpack_require__(/*! @placeos/components */ 51588);
var not_found_component_1 = __webpack_require__(/*! ./components/not-found/not-found.component */ 98499);
var desk_booking_component_1 = __webpack_require__(/*! ./desks/desk-booking.component */ 69395);
var desk_success_component_1 = __webpack_require__(/*! ./desks/desk-success.component */ 81547);
var meeting_booking_component_1 = __webpack_require__(/*! ./meetings/meeting-booking.component */ 62613);
var meeting_success_component_1 = __webpack_require__(/*! ./meetings/meeting-success.component */ 23225);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @angular/router */ 95072);
var routes = [{
  path: 'unauthorised',
  component: components_1.UnauthorisedComponent
}, {
  path: '404',
  component: not_found_component_1.NotFoundComponent
}, {
  path: '',
  canActivate: [components_1.AuthorisedUserGuard],
  canLoad: [components_1.AuthorisedUserGuard],
  children: [{
    path: 'ms-auth',
    component: room_booking_component_1.RoomBookingComponent
  }, {
    path: 'book',
    children: [{
      path: 'spaces',
      component: room_booking_component_1.RoomBookingComponent
    }, {
      path: 'spaces/success',
      component: booking_confirmed_component_1.BookingConfirmedComponent
    }, {
      path: 'meeting',
      component: meeting_booking_component_1.MeetingBookingComponent
    }, {
      path: 'meeting/success',
      component: meeting_success_component_1.MeetingBookingSuccessComponent
    }, {
      path: 'desks',
      component: desk_booking_component_1.DeskBookingComponent
    }, {
      path: 'desks/success',
      component: desk_success_component_1.DeskBookingSuccessComponent
    }]
  }, {
    path: 'schedule/view',
    component: find_space_component_1.FindSpaceComponent
  }, {
    path: 'confirm/success',
    component: booking_confirmed_component_1.BookingConfirmedComponent
  }, {
    path: 'upcoming',
    component: upcoming_bookings_component_1.UpcomingBookingsComponent
  }, {
    path: '**',
    pathMatch: 'full',
    redirectTo: '/book/meeting'
  }]
}, {
  path: '**',
  pathMatch: 'full',
  redirectTo: '/book/meeting'
}];
var AppRoutingModule = /*#__PURE__*/_createClass(function AppRoutingModule() {
  _classCallCheck(this, AppRoutingModule);
});
_AppRoutingModule = AppRoutingModule;
_AppRoutingModule.ɵfac = function AppRoutingModule_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _AppRoutingModule)();
};
_AppRoutingModule.ɵmod = /*@__PURE__*/i0.ɵɵdefineNgModule({
  type: _AppRoutingModule
});
_AppRoutingModule.ɵinj = /*@__PURE__*/i0.ɵɵdefineInjector({
  imports: [router_1.RouterModule.forRoot(routes, {
    useHash: true
  }), router_1.RouterModule]
});
exports.AppRoutingModule = AppRoutingModule;
(function () {
  (typeof ngJitMode === "undefined" || ngJitMode) && i0.ɵɵsetNgModuleScope(AppRoutingModule, {
    imports: [i1.RouterModule],
    exports: [router_1.RouterModule]
  });
})();

/***/ }),

/***/ 67826:
/*!*****************************************************!*\
  !*** ./apps/outlook-addin/src/app/app.component.ts ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _regeneratorRuntime = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/regeneratorRuntime.js */ 8698)["default"]);
var _asyncToGenerator = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/asyncToGenerator.js */ 95386)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _callSuper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/callSuper.js */ 8513)["default"]);
var _inherits = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/inherits.js */ 58160)["default"]);
var _AppComponent;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.AppComponent = void 0;
var service_worker_1 = __webpack_require__(/*! @angular/service-worker */ 46140);
var snack_bar_1 = __webpack_require__(/*! @angular/material/snack-bar */ 3347);
var operators_1 = __webpack_require__(/*! rxjs/operators */ 97303);
var ts_client_1 = __webpack_require__(/*! @placeos/ts-client */ 35713);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var organisation_1 = __webpack_require__(/*! @placeos/organisation */ 2510);
var user_utilities_1 = __webpack_require__(/*! libs/users/src/lib/user.utilities */ 24129);
var event_class_1 = __webpack_require__(/*! libs/events/src/lib/event.class */ 6727);
var MOCKS = __webpack_require__(/*! @placeos/mocks */ 46773);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @placeos/common */ 22797);
var i2 = __webpack_require__(/*! @placeos/organisation */ 2510);
var i3 = __webpack_require__(/*! @angular/service-worker */ 46140);
var i4 = __webpack_require__(/*! @angular/material/snack-bar */ 3347);
var i5 = __webpack_require__(/*! @angular/router */ 95072);
var i6 = __webpack_require__(/*! ../../../../libs/components/src/lib/global-loading.component */ 34921);
var i7 = __webpack_require__(/*! ../../../../libs/components/src/lib/debug-console.component */ 18482);
var AppComponent = /*#__PURE__*/function (_common_1$AsyncHandle) {
  function AppComponent(_settings, _org,
  // For init
  _cache, _snackbar) {
    var _this;
    _classCallCheck(this, AppComponent);
    _this = _callSuper(this, AppComponent);
    _this._settings = _settings;
    _this._org = _org;
    _this._cache = _cache;
    _this._snackbar = _snackbar;
    _this.title = 'outlook-addin';
    return _this;
  }
  _inherits(AppComponent, _common_1$AsyncHandle);
  return _createClass(AppComponent, [{
    key: "ngOnInit",
    value: function () {
      var _ngOnInit = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
        var _Office, get_token, tkn, _Office2;
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              console.info("Initialising application...");
              window.history.replaceState = function (data, unused) {};
              (0, common_1.log)('APP', 'MOCKS:', MOCKS);
              (0, common_1.setNotifyOutlet)(this._snackbar);
              console.info("Waiting for application settings...");
              _context.next = 7;
              return this._settings.initialised.pipe((0, operators_1.first)(function (_) {
                return _;
              })).toPromise();
            case 7:
              console.info("Waiting for office library to initialise...");
              _context.next = 10;
              return Office.onReady();
            case 10:
              console.info("Initialising auth...");
              _context.next = 13;
              return this._initialiseAuth();
            case 13:
              console.info("Checking for existing auth...");
              if (!(0, ts_client_1.token)()) {
                _context.next = 16;
                break;
              }
              return _context.abrupt("return", this._finishInitialise());
            case 16:
              console.info("No existing auth...");
              _context.prev = 17;
              console.info("Checking for office token...");
              this.timeout('error', function () {
                throw 'Unable to get office token...';
              }, 2000);
              get_token = (_Office = Office) === null || _Office === void 0 || (_Office = _Office.auth) === null || _Office === void 0 ? void 0 : _Office.getAccessToken();
              _context.next = 23;
              return get_token || Promise.resolve();
            case 23:
              tkn = _context.sent;
              this.clearTimeout('error');
              if (tkn) {
                _context.next = 27;
                break;
              }
              throw 'Unable to get office token...';
            case 27:
              console.info("Loaded office token. ".concat(tkn));
              sessionStorage.setItem('OFFICE.token', tkn);
              _context.next = 31;
              return this._initialiseAuth(false);
            case 31:
              this._finishInitialise();
              _context.next = 45;
              break;
            case 34:
              _context.prev = 34;
              _context.t0 = _context["catch"](17);
              console.info(JSON.stringify(_context.t0));
              if ((_Office2 = Office) !== null && _Office2 !== void 0 && (_Office2 = _Office2.context) !== null && _Office2 !== void 0 && _Office2.ui) {
                _context.next = 43;
                break;
              }
              console.info("Error office API not loaded.");
              _context.next = 41;
              return this._initialiseAuth(false);
            case 41:
              _context.next = 45;
              break;
            case 43:
              _context.next = 45;
              return this._authenticateWithOffice();
            case 45:
            case "end":
              return _context.stop();
          }
        }, _callee, this, [[17, 34]]);
      }));
      function ngOnInit() {
        return _ngOnInit.apply(this, arguments);
      }
      return ngOnInit;
    }()
  }, {
    key: "_initialiseAuth",
    value: function () {
      var _initialiseAuth2 = _asyncToGenerator(function () {
        var _this2 = this;
        var local = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;
        return /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {
          var settings;
          return _regeneratorRuntime().wrap(function _callee2$(_context2) {
            while (1) switch (_context2.prev = _context2.next) {
              case 0:
                (0, common_1.setAppName)(_this2._settings.get('app.short_name'));
                settings = _this2._settings.get('composer') || {};
                settings.local_login = local;
                settings.storage = 'local';
                settings.mock = !!_this2._settings.get('mock') || location.origin.includes('demo.place.tech');
                _context2.next = 7;
                return (0, common_1.setupPlace)(settings)["catch"](function (_) {
                  return console.error(_);
                });
              case 7:
              case "end":
                return _context2.stop();
            }
          }, _callee2);
        })();
      });
      function _initialiseAuth() {
        return _initialiseAuth2.apply(this, arguments);
      }
      return _initialiseAuth;
    }()
  }, {
    key: "_finishInitialise",
    value: function () {
      var _finishInitialise2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {
        var _this3 = this,
          _ref;
        return _regeneratorRuntime().wrap(function _callee3$(_context3) {
          while (1) switch (_context3.prev = _context3.next) {
            case 0:
              (0, common_1.setupCache)(this._cache);
              if (!this._settings.get('composer.local_login')) {
                this.timeout('wait_for_user', function () {
                  return _this3.onInitError();
                }, 30 * 1000);
              }
              _context3.next = 4;
              return common_1.current_user.pipe((0, operators_1.first)(function (_) {
                return !!_;
              })).toPromise();
            case 4:
              this.clearTimeout('wait_for_user');
              (0, event_class_1.setDefaultCreator)((0, common_1.currentUser)());
              (0, user_utilities_1.setInternalUserDomain)(this._settings.get('app.general.internal_user_domain') || "@".concat((_ref = (0, common_1.currentUser)()) === null || _ref === void 0 || (_ref = _ref.email) === null || _ref === void 0 ? void 0 : _ref.split('@')[1]));
            case 7:
            case "end":
              return _context3.stop();
          }
        }, _callee3, this);
      }));
      function _finishInitialise() {
        return _finishInitialise2.apply(this, arguments);
      }
      return _finishInitialise;
    }()
  }, {
    key: "_authenticateWithOffice",
    value: function () {
      var _authenticateWithOffice2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4() {
        var _this4 = this;
        return _regeneratorRuntime().wrap(function _callee4$(_context4) {
          while (1) switch (_context4.prev = _context4.next) {
            case 0:
              console.info("Authenticating with office...");
              this.timeout('office_auth', function () {
                var path = "".concat(location.origin).concat(location.pathname, "#ms-auth=true");
                console.info("Opening office authentication dialog with URL: ".concat(path));
                Office.context.ui.displayDialogAsync(path, {
                  height: 60,
                  width: 30
                }, function (result) {
                  console.info("Authenticated with office from dialog...");
                  var dialog = result.value;
                  dialog.addEventHandler(Office.EventType.DialogMessageReceived, function (token) {
                    if (token) (0, ts_client_1.setToken)(token);
                    _this4._finishInitialise();
                    dialog.close();
                  });
                });
              });
              console.info("URL: ".concat(window.location.href));
              if (!(window.location.href.includes('ms-auth=true') || sessionStorage.getItem('ms-auth'))) {
                _context4.next = 12;
                break;
              }
              sessionStorage.setItem('ms-auth', 'true');
              console.info("Authenticating with office from a dialog...");
              this.clearTimeout('office_auth');
              _context4.next = 9;
              return this._initialiseAuth(false);
            case 9:
              if ((0, ts_client_1.token)()) {
                _context4.next = 11;
                break;
              }
              return _context4.abrupt("return");
            case 11:
              Office.context.ui.messageParent((0, ts_client_1.token)() || '');
            case 12:
            case "end":
              return _context4.stop();
          }
        }, _callee4, this);
      }));
      function _authenticateWithOffice() {
        return _authenticateWithOffice2.apply(this, arguments);
      }
      return _authenticateWithOffice;
    }()
  }, {
    key: "onInitError",
    value: function onInitError() {
      var _ref2;
      if ((0, ts_client_1.isMock)() || (_ref2 = (0, common_1.currentUser)()) !== null && _ref2 !== void 0 && _ref2.is_logged_in) return;
      (0, ts_client_1.invalidateToken)();
      location.reload();
    }
  }]);
}(common_1.AsyncHandler);
_AppComponent = AppComponent;
_AppComponent.ɵfac = function AppComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _AppComponent)(i0.ɵɵdirectiveInject(i1.SettingsService), i0.ɵɵdirectiveInject(i2.OrganisationService), i0.ɵɵdirectiveInject(i3.SwUpdate), i0.ɵɵdirectiveInject(i4.MatSnackBar));
};
_AppComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _AppComponent,
  selectors: [["app-root"]],
  features: [i0.ɵɵInheritDefinitionFeature],
  decls: 3,
  vars: 0,
  template: function AppComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵelement(0, "router-outlet")(1, "global-loading")(2, "debug-console");
    }
  },
  dependencies: [i5.RouterOutlet, i6.GlobalLoadingComponent, i7.DebugConsoleComponent]
});
exports.AppComponent = AppComponent;

/***/ }),

/***/ 82517:
/*!**************************************************!*\
  !*** ./apps/outlook-addin/src/app/app.module.ts ***!
  \**************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _AppModule;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.AppModule = void 0;
exports.HttpLoaderFactory = HttpLoaderFactory;
var forms_1 = __webpack_require__(/*! @angular/forms */ 34456);
var platform_browser_1 = __webpack_require__(/*! @angular/platform-browser */ 80436);
var http_1 = __webpack_require__(/*! @angular/common/http */ 46443);
var animations_1 = __webpack_require__(/*! @angular/platform-browser/animations */ 43835);
var snack_bar_1 = __webpack_require__(/*! @angular/material/snack-bar */ 3347);
var core_1 = __webpack_require__(/*! @angular/material/core */ 74646);
var service_worker_1 = __webpack_require__(/*! @angular/service-worker */ 46140);
var payments_1 = __webpack_require__(/*! @placeos/payments */ 99831);
var explore_1 = __webpack_require__(/*! @placeos/explore */ 27009);
var assets_1 = __webpack_require__(/*! @placeos/assets */ 20949);
var catering_1 = __webpack_require__(/*! @placeos/catering */ 4157);
var form_fields_1 = __webpack_require__(/*! @placeos/form-fields */ 63046);
var environment_1 = __webpack_require__(/*! ../environments/environment */ 20446);
var app_component_1 = __webpack_require__(/*! ./app.component */ 67826);
var app_routing_module_1 = __webpack_require__(/*! ./app-routing.module */ 20532);
var book_module_1 = __webpack_require__(/*! ./rooms/book.module */ 92502);
var shared_module_1 = __webpack_require__(/*! ./components/shared.module */ 31620);
var space_pipe_1 = __webpack_require__(/*! libs/spaces/src/lib/space.pipe */ 22011);
var desk_booking_component_1 = __webpack_require__(/*! ./desks/desk-booking.component */ 69395);
var desk_form_component_1 = __webpack_require__(/*! ./desks/desk-form.component */ 70958);
var desk_success_component_1 = __webpack_require__(/*! ./desks/desk-success.component */ 81547);
var meeting_booking_component_1 = __webpack_require__(/*! ./meetings/meeting-booking.component */ 62613);
var meeting_form_component_1 = __webpack_require__(/*! ./meetings/meeting-form.component */ 54032);
var meeting_success_component_1 = __webpack_require__(/*! ./meetings/meeting-success.component */ 23225);
var meeting_flow_confirm_component_1 = __webpack_require__(/*! apps/workplace/src/app/book/meeting-flow/meeting-flow-confirm.component */ 53819);
var core_2 = __webpack_require__(/*! @ngx-translate/core */ 597);
var http_loader_1 = __webpack_require__(/*! @ngx-translate/http-loader */ 15101);
var select_1 = __webpack_require__(/*! @angular/material/select */ 25175);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @ngx-translate/core */ 597);
var i2 = __webpack_require__(/*! @angular/service-worker */ 46140);
// AoT requires an exported function for factories
function HttpLoaderFactory(http) {
  return new http_loader_1.TranslateHttpLoader(http, './assets/locale/', '.json');
}
var AppModule = /*#__PURE__*/_createClass(function AppModule() {
  _classCallCheck(this, AppModule);
});
_AppModule = AppModule;
_AppModule.ɵfac = function AppModule_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _AppModule)();
};
_AppModule.ɵmod = /*@__PURE__*/i0.ɵɵdefineNgModule({
  type: _AppModule,
  bootstrap: [app_component_1.AppComponent]
});
_AppModule.ɵinj = /*@__PURE__*/i0.ɵɵdefineInjector({
  providers: [space_pipe_1.SpacePipe, (0, http_1.provideHttpClient)((0, http_1.withInterceptorsFromDi)())],
  imports: [platform_browser_1.BrowserModule, animations_1.BrowserAnimationsModule, app_routing_module_1.AppRoutingModule, book_module_1.BookModule, shared_module_1.SharedComponentModule, animations_1.BrowserAnimationsModule, forms_1.FormsModule, core_1.MatNativeDateModule, snack_bar_1.MatSnackBarModule, select_1.MatSelectModule, payments_1.PaymentsModule, assets_1.AssetsModule, form_fields_1.FormFieldsModule, forms_1.ReactiveFormsModule, catering_1.SharedCateringModule, explore_1.SharedExploreModule, core_2.TranslateModule.forRoot({
    defaultLanguage: 'en',
    loader: {
      provide: core_2.TranslateLoader,
      useFactory: HttpLoaderFactory,
      deps: [http_1.HttpClient]
    }
  }), service_worker_1.ServiceWorkerModule.register('ngsw-worker.js', {
    enabled: environment_1.environment.production
  })]
});
exports.AppModule = AppModule;
(function () {
  (typeof ngJitMode === "undefined" || ngJitMode) && i0.ɵɵsetNgModuleScope(AppModule, {
    declarations: [app_component_1.AppComponent, desk_booking_component_1.DeskBookingComponent, desk_form_component_1.DeskBookingFormComponent, desk_success_component_1.DeskBookingSuccessComponent, meeting_booking_component_1.MeetingBookingComponent, meeting_form_component_1.MeetingBookingFormComponent, meeting_success_component_1.MeetingBookingSuccessComponent, meeting_flow_confirm_component_1.MeetingFlowConfirmComponent],
    imports: [platform_browser_1.BrowserModule, animations_1.BrowserAnimationsModule, app_routing_module_1.AppRoutingModule, book_module_1.BookModule, shared_module_1.SharedComponentModule, animations_1.BrowserAnimationsModule, forms_1.FormsModule, core_1.MatNativeDateModule, snack_bar_1.MatSnackBarModule, select_1.MatSelectModule, payments_1.PaymentsModule, assets_1.AssetsModule, form_fields_1.FormFieldsModule, forms_1.ReactiveFormsModule, catering_1.SharedCateringModule, explore_1.SharedExploreModule, i1.TranslateModule, i2.ServiceWorkerModule]
  });
})();

/***/ }),

/***/ 98499:
/*!********************************************************************************!*\
  !*** ./apps/outlook-addin/src/app/components/not-found/not-found.component.ts ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _NotFoundComponent;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.NotFoundComponent = void 0;
var router_1 = __webpack_require__(/*! @angular/router */ 95072);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @angular/router */ 95072);
var NotFoundComponent = /*#__PURE__*/function () {
  function NotFoundComponent(router) {
    _classCallCheck(this, NotFoundComponent);
    this.router = router;
  }
  return _createClass(NotFoundComponent, [{
    key: "ngOnInit",
    value: function ngOnInit() {}
  }]);
}();
_NotFoundComponent = NotFoundComponent;
_NotFoundComponent.ɵfac = function NotFoundComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _NotFoundComponent)(i0.ɵɵdirectiveInject(i1.Router));
};
_NotFoundComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _NotFoundComponent,
  selectors: [["placeos-not-found"]],
  decls: 14,
  vars: 1,
  consts: [[1, "flex", "flex-1", "flex-col", "z-0", "bg-base-200", "h-full", "overflow-y-auto"], [1, "flex", "flex-col", "border-b", "border-base-200", "py-5", "h-full", "items-center", "justify-center"], [1, "mx-3", "flex", "flex-row"], ["src", "assets/not-found.svg", "alt", "graphic of magnifying glass", "width", "200px", 1, "items-center"], [1, "mb-3"], [1, "text-3xl", "font-bold", "mr-auto", "text-gray-700"], [1, "flex", "flex-row"], [1, "font-bold", "mx-1"]],
  template: function NotFoundComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵelementStart(0, "div", 0)(1, "section", 1)(2, "div", 2);
      i0.ɵɵelement(3, "img", 3);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(4, "div", 2)(5, "div", 4)(6, "span", 5);
      i0.ɵɵtext(7, " Page not found");
      i0.ɵɵelementEnd()()();
      i0.ɵɵelementStart(8, "div", 2)(9, "span", 6);
      i0.ɵɵtext(10, " The page ");
      i0.ɵɵelementStart(11, "span", 7);
      i0.ɵɵtext(12);
      i0.ɵɵelementEnd();
      i0.ɵɵtext(13, " was not found. ");
      i0.ɵɵelementEnd()()()();
    }
    if (rf & 2) {
      i0.ɵɵadvance(12);
      i0.ɵɵtextInterpolate1(" ", ctx.router.url, " ");
    }
  }
});
exports.NotFoundComponent = NotFoundComponent;

/***/ }),

/***/ 31620:
/*!****************************************************************!*\
  !*** ./apps/outlook-addin/src/app/components/shared.module.ts ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _SharedComponentModule;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.SharedComponentModule = void 0;
var core_1 = __webpack_require__(/*! @angular/core */ 37580);
var autocomplete_1 = __webpack_require__(/*! @angular/material/autocomplete */ 79771);
var button_1 = __webpack_require__(/*! @angular/material/button */ 84175);
var snack_bar_1 = __webpack_require__(/*! @angular/material/snack-bar */ 3347);
var datepicker_1 = __webpack_require__(/*! @angular/material/datepicker */ 61977);
var dialog_1 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var form_field_1 = __webpack_require__(/*! @angular/material/form-field */ 24950);
var input_1 = __webpack_require__(/*! @angular/material/input */ 95541);
var progress_spinner_1 = __webpack_require__(/*! @angular/material/progress-spinner */ 41134);
var select_1 = __webpack_require__(/*! @angular/material/select */ 25175);
var chips_1 = __webpack_require__(/*! @angular/material/chips */ 12772);
var core_2 = __webpack_require__(/*! @angular/material/core */ 74646);
var menu_1 = __webpack_require__(/*! @angular/material/menu */ 31034);
var checkbox_1 = __webpack_require__(/*! @angular/material/checkbox */ 97024);
var tabs_1 = __webpack_require__(/*! @angular/material/tabs */ 38223);
var tooltip_1 = __webpack_require__(/*! @angular/material/tooltip */ 80640);
var radio_1 = __webpack_require__(/*! @angular/material/radio */ 53804);
var progress_bar_1 = __webpack_require__(/*! @angular/material/progress-bar */ 26354);
var expansion_1 = __webpack_require__(/*! @angular/material/expansion */ 19322);
var badge_1 = __webpack_require__(/*! @angular/material/badge */ 16256);
var slider_1 = __webpack_require__(/*! @angular/material/slider */ 64992);
var icon_1 = __webpack_require__(/*! @angular/material/icon */ 93840);
var not_found_component_1 = __webpack_require__(/*! ./not-found/not-found.component */ 98499);
var bookings_1 = __webpack_require__(/*! @placeos/bookings */ 85616);
var events_1 = __webpack_require__(/*! @placeos/events */ 40569);
var components_1 = __webpack_require__(/*! @placeos/components */ 51588);
var animations_1 = __webpack_require__(/*! @angular/platform-browser/animations */ 43835);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var COMPONENTS = [not_found_component_1.NotFoundComponent];
var MATERIAL_MODULES = [button_1.MatButtonModule, snack_bar_1.MatSnackBarModule, datepicker_1.MatDatepickerModule, dialog_1.MatDialogModule, form_field_1.MatFormFieldModule, icon_1.MatIconModule, input_1.MatInputModule, progress_spinner_1.MatProgressSpinnerModule, progress_bar_1.MatProgressBarModule, autocomplete_1.MatAutocompleteModule, select_1.MatSelectModule, chips_1.MatChipsModule, core_2.MatRippleModule, menu_1.MatMenuModule, checkbox_1.MatCheckboxModule, expansion_1.MatExpansionModule, tabs_1.MatTabsModule, badge_1.MatBadgeModule, tooltip_1.MatTooltipModule, radio_1.MatRadioModule, slider_1.MatSliderModule];
var SharedComponentModule = /*#__PURE__*/_createClass(function SharedComponentModule() {
  _classCallCheck(this, SharedComponentModule);
});
_SharedComponentModule = SharedComponentModule;
_SharedComponentModule.ɵfac = function SharedComponentModule_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _SharedComponentModule)();
};
_SharedComponentModule.ɵmod = /*@__PURE__*/i0.ɵɵdefineNgModule({
  type: _SharedComponentModule
});
_SharedComponentModule.ɵinj = /*@__PURE__*/i0.ɵɵdefineInjector({
  imports: [animations_1.BrowserAnimationsModule, bookings_1.SharedBookingsModule, events_1.SharedEventsModule, components_1.ComponentsModule, button_1.MatButtonModule, snack_bar_1.MatSnackBarModule, datepicker_1.MatDatepickerModule, dialog_1.MatDialogModule, form_field_1.MatFormFieldModule, icon_1.MatIconModule, input_1.MatInputModule, progress_spinner_1.MatProgressSpinnerModule, progress_bar_1.MatProgressBarModule, autocomplete_1.MatAutocompleteModule, select_1.MatSelectModule, chips_1.MatChipsModule, core_2.MatRippleModule, menu_1.MatMenuModule, checkbox_1.MatCheckboxModule, expansion_1.MatExpansionModule, tabs_1.MatTabsModule, badge_1.MatBadgeModule, tooltip_1.MatTooltipModule, radio_1.MatRadioModule, slider_1.MatSliderModule, bookings_1.SharedBookingsModule, events_1.SharedEventsModule, components_1.ComponentsModule]
});
exports.SharedComponentModule = SharedComponentModule;
(function () {
  (typeof ngJitMode === "undefined" || ngJitMode) && i0.ɵɵsetNgModuleScope(SharedComponentModule, {
    declarations: [not_found_component_1.NotFoundComponent],
    imports: [animations_1.BrowserAnimationsModule, bookings_1.SharedBookingsModule, events_1.SharedEventsModule, components_1.ComponentsModule],
    exports: [not_found_component_1.NotFoundComponent, button_1.MatButtonModule, snack_bar_1.MatSnackBarModule, datepicker_1.MatDatepickerModule, dialog_1.MatDialogModule, form_field_1.MatFormFieldModule, icon_1.MatIconModule, input_1.MatInputModule, progress_spinner_1.MatProgressSpinnerModule, progress_bar_1.MatProgressBarModule, autocomplete_1.MatAutocompleteModule, select_1.MatSelectModule, chips_1.MatChipsModule, core_2.MatRippleModule, menu_1.MatMenuModule, checkbox_1.MatCheckboxModule, expansion_1.MatExpansionModule, tabs_1.MatTabsModule, badge_1.MatBadgeModule, tooltip_1.MatTooltipModule, radio_1.MatRadioModule, slider_1.MatSliderModule, bookings_1.SharedBookingsModule, events_1.SharedEventsModule, components_1.ComponentsModule]
  });
})();

/***/ }),

/***/ 69395:
/*!********************************************************************!*\
  !*** ./apps/outlook-addin/src/app/desks/desk-booking.component.ts ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _regeneratorRuntime = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/regeneratorRuntime.js */ 8698)["default"]);
var _asyncToGenerator = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/asyncToGenerator.js */ 95386)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _DeskBookingComponent;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.DeskBookingComponent = void 0;
var router_1 = __webpack_require__(/*! @angular/router */ 95072);
var bookings_1 = __webpack_require__(/*! @placeos/bookings */ 85616);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @placeos/bookings */ 85616);
var i2 = __webpack_require__(/*! @angular/router */ 95072);
var i3 = __webpack_require__(/*! @angular/material/core */ 74646);
var i4 = __webpack_require__(/*! ./desk-form.component */ 70958);
var DeskBookingComponent = /*#__PURE__*/function () {
  function DeskBookingComponent(_service, _router) {
    var _this = this;
    _classCallCheck(this, DeskBookingComponent);
    this._service = _service;
    this._router = _router;
    this.clearForm = function () {
      return _this._service.clearForm();
    };
  }
  return _createClass(DeskBookingComponent, [{
    key: "form",
    get: function get() {
      return this._service.form;
    }
  }, {
    key: "makeBooking",
    value: function () {
      var _makeBooking = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              _context.next = 2;
              return this._service.confirmPost();
            case 2:
              this._router.navigate(['/book', 'desks', 'success']);
            case 3:
            case "end":
              return _context.stop();
          }
        }, _callee, this);
      }));
      function makeBooking() {
        return _makeBooking.apply(this, arguments);
      }
      return makeBooking;
    }()
  }]);
}();
_DeskBookingComponent = DeskBookingComponent;
_DeskBookingComponent.ɵfac = function DeskBookingComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _DeskBookingComponent)(i0.ɵɵdirectiveInject(i1.BookingFormService), i0.ɵɵdirectiveInject(i2.Router));
};
_DeskBookingComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _DeskBookingComponent,
  selectors: [["desk-booking"]],
  decls: 10,
  vars: 1,
  consts: [[1, "absolute", "inset-0", "bg-base-200"], [1, "mx-auto", "w-full", "max-w-[32rem]", "overflow-auto", "max-h-screen"], [1, "text-2xl", "p-4", "font-medium"], [1, "flex", "flex-col", "p-4", "space-y-2", "border-t", "border-base-200"], ["btn", "", "matRipple", "", 1, "w-full", 3, "click", "disabled"], ["btn", "", "matRipple", "", 1, "w-full", "inverse", 3, "click"]],
  template: function DeskBookingComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵelementStart(0, "div", 0)(1, "div", 1)(2, "h3", 2);
      i0.ɵɵtext(3, "Book Desk");
      i0.ɵɵelementEnd();
      i0.ɵɵelement(4, "desk-booking-form");
      i0.ɵɵelementStart(5, "div", 3)(6, "button", 4);
      i0.ɵɵlistener("click", function DeskBookingComponent_Template_button_click_6_listener() {
        return ctx.makeBooking();
      });
      i0.ɵɵtext(7, " Book Desk ");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(8, "button", 5);
      i0.ɵɵlistener("click", function DeskBookingComponent_Template_button_click_8_listener() {
        return ctx.clearForm();
      });
      i0.ɵɵtext(9, " Clear Form ");
      i0.ɵɵelementEnd()()()();
    }
    if (rf & 2) {
      i0.ɵɵadvance(6);
      i0.ɵɵproperty("disabled", !ctx.form.value.asset_id);
    }
  },
  dependencies: [i3.MatRipple, i4.DeskBookingFormComponent]
});
exports.DeskBookingComponent = DeskBookingComponent;

/***/ }),

/***/ 70958:
/*!*****************************************************************!*\
  !*** ./apps/outlook-addin/src/app/desks/desk-form.component.ts ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _callSuper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/callSuper.js */ 8513)["default"]);
var _inherits = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/inherits.js */ 58160)["default"]);
var _DeskBookingFormComponent;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.DeskBookingFormComponent = void 0;
var bookings_1 = __webpack_require__(/*! @placeos/bookings */ 85616);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @placeos/bookings */ 85616);
var i2 = __webpack_require__(/*! @placeos/common */ 22797);
var i3 = __webpack_require__(/*! @angular/common */ 60316);
var i4 = __webpack_require__(/*! @angular/material/form-field */ 24950);
var i5 = __webpack_require__(/*! @angular/material/input */ 95541);
var i6 = __webpack_require__(/*! @angular/material/checkbox */ 97024);
var i7 = __webpack_require__(/*! ../../../../../libs/bookings/src/lib/desk-list-field.component */ 56416);
var i8 = __webpack_require__(/*! @angular/forms */ 34456);
var i9 = __webpack_require__(/*! ../../../../../libs/assets/src/lib/asset-list-field.component */ 83618);
var i10 = __webpack_require__(/*! ../../../../../libs/form-fields/src/lib/date-field.component */ 19608);
var i11 = __webpack_require__(/*! ../../../../../libs/form-fields/src/lib/duration-field.component */ 83476);
var i12 = __webpack_require__(/*! ../../../../../libs/form-fields/src/lib/time-field.component */ 81413);
var _c0 = function _c0() {
  return {
    standalone: true
  };
};
function DeskBookingFormComponent_div_0_mat_checkbox_37_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "mat-checkbox", 24);
    i0.ɵɵtext(1, " All Day ");
    i0.ɵɵelementEnd();
  }
}
function DeskBookingFormComponent_div_0_div_38_Template(rf, ctx) {
  if (rf & 1) {
    var _r3 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 13)(1, "div", 14)(2, "mat-checkbox", 25);
    i0.ɵɵlistener("ngModelChange", function DeskBookingFormComponent_div_0_div_38_Template_mat_checkbox_ngModelChange_2_listener($event) {
      i0.ɵɵrestoreView(_r3);
      var ctx_r1 = i0.ɵɵnextContext(2);
      return i0.ɵɵresetView(ctx_r1.form.patchValue({
        secondary_resource: $event ? "locker" : ""
      }));
    });
    i0.ɵɵtext(3, " Require locker ");
    i0.ɵɵelementEnd()()();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance(2);
    i0.ɵɵproperty("ngModel", !!ctx_r1.form.value.secondary_resource)("ngModelOptions", i0.ɵɵpureFunction0(2, _c0));
  }
}
function DeskBookingFormComponent_div_0_section_46_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "section", 2)(1, "h3", 3)(2, "div", 4);
    i0.ɵɵtext(3, " 3 ");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(4, "div", 5);
    i0.ɵɵtext(5, "Request Asset");
    i0.ɵɵelementEnd()();
    i0.ɵɵelement(6, "asset-list-field", 26);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance(6);
    i0.ɵɵproperty("date", ctx_r1.form.value.date)("duration", ctx_r1.form.value.duration);
  }
}
function DeskBookingFormComponent_div_0_Template(rf, ctx) {
  if (rf & 1) {
    var _r1 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 1)(1, "section", 2)(2, "h3", 3)(3, "div", 4);
    i0.ɵɵtext(4, " 1 ");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(5, "div", 5);
    i0.ɵɵtext(6, "Details");
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(7, "div", 6)(8, "div", 7)(9, "label", 8);
    i0.ɵɵtext(10, "Add Title");
    i0.ɵɵelementStart(11, "span");
    i0.ɵɵtext(12, "*");
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(13, "mat-form-field", 9);
    i0.ɵɵelement(14, "input", 10);
    i0.ɵɵelementStart(15, "mat-error");
    i0.ɵɵtext(16, "Booking title is required.");
    i0.ɵɵelementEnd()()();
    i0.ɵɵelementStart(17, "div", 7)(18, "label", 11);
    i0.ɵɵtext(19, "Date");
    i0.ɵɵelementStart(20, "span");
    i0.ɵɵtext(21, "*");
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(22, "a-date-field", 12);
    i0.ɵɵtext(23, " Date and time must be in the future ");
    i0.ɵɵelementEnd()()();
    i0.ɵɵelementStart(24, "div", 13)(25, "div", 14)(26, "label", 15);
    i0.ɵɵtext(27, "Start Time");
    i0.ɵɵelementStart(28, "span");
    i0.ɵɵtext(29, "*");
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(30, "a-time-field", 16);
    i0.ɵɵlistener("ngModelChange", function DeskBookingFormComponent_div_0_Template_a_time_field_ngModelChange_30_listener($event) {
      i0.ɵɵrestoreView(_r1);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.form.patchValue({
        date: $event
      }));
    });
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(31, "div", 17)(32, "label", 18);
    i0.ɵɵtext(33, "End Time");
    i0.ɵɵelementStart(34, "span");
    i0.ɵɵtext(35, "*");
    i0.ɵɵelementEnd()();
    i0.ɵɵelement(36, "a-duration-field", 19);
    i0.ɵɵtemplate(37, DeskBookingFormComponent_div_0_mat_checkbox_37_Template, 2, 0, "mat-checkbox", 20);
    i0.ɵɵelementEnd()();
    i0.ɵɵtemplate(38, DeskBookingFormComponent_div_0_div_38_Template, 4, 3, "div", 21);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(39, "section", 2)(40, "h3", 3)(41, "div", 4);
    i0.ɵɵtext(42, " 2 ");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(43, "div", 5);
    i0.ɵɵtext(44, "Desk");
    i0.ɵɵelementEnd()();
    i0.ɵɵelement(45, "desk-list-field", 22);
    i0.ɵɵelementEnd();
    i0.ɵɵtemplate(46, DeskBookingFormComponent_div_0_section_46_Template, 7, 2, "section", 23);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var tmp_4_0;
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵproperty("formGroup", ctx_r1.form);
    i0.ɵɵadvance(30);
    i0.ɵɵproperty("ngModel", ctx_r1.form.value.date)("ngModelOptions", i0.ɵɵpureFunction0(10, _c0));
    i0.ɵɵadvance(6);
    i0.ɵɵproperty("time", (tmp_4_0 = ctx_r1.form.get("date")) == null ? null : tmp_4_0.value)("max", 10 * 60)("min", 60)("step", 60);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", ctx_r1.allow_all_day);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", ctx_r1.can_book_lockers);
    i0.ɵɵadvance(8);
    i0.ɵɵproperty("ngIf", ctx_r1.allow_assets);
  }
}
var DeskBookingFormComponent = /*#__PURE__*/function (_common_1$AsyncHandle) {
  function DeskBookingFormComponent(_service, _settings) {
    var _this;
    _classCallCheck(this, DeskBookingFormComponent);
    _this = _callSuper(this, DeskBookingFormComponent);
    _this._service = _service;
    _this._settings = _settings;
    _this.form = _this._service.form;
    return _this;
  }
  _inherits(DeskBookingFormComponent, _common_1$AsyncHandle);
  return _createClass(DeskBookingFormComponent, [{
    key: "allow_assets",
    get: function get() {
      return this._settings.get('app.bookings.allow_assets');
    }
  }, {
    key: "ngOnInit",
    value: function ngOnInit() {
      var _this$_service$form$g,
        _this2 = this;
      this._service.setOptions({
        type: 'desk'
      });
      this.subscription('change', (_this$_service$form$g = this._service.form.get('resources')) === null || _this$_service$form$g === void 0 || (_this$_service$form$g = _this$_service$form$g.valueChanges) === null || _this$_service$form$g === void 0 ? void 0 : _this$_service$form$g.subscribe(function (list) {
        return list.length ? _this2.setBookingAsset(list[0]) : '';
      }));
    }
  }, {
    key: "setBookingAsset",
    value: function setBookingAsset(desk) {
      var _desk$zone, _desk$zone2;
      if (!desk) return;
      this._service.form.patchValue({
        asset_id: desk === null || desk === void 0 ? void 0 : desk.id,
        asset_name: desk.name,
        map_id: (desk === null || desk === void 0 ? void 0 : desk.map_id) || (desk === null || desk === void 0 ? void 0 : desk.id),
        description: desk.name,
        booking_type: 'desk',
        zones: desk.zone ? [(_desk$zone = desk.zone) === null || _desk$zone === void 0 ? void 0 : _desk$zone.parent_id, (_desk$zone2 = desk.zone) === null || _desk$zone2 === void 0 ? void 0 : _desk$zone2.id] : [],
        booking_asset: desk
      });
    }
  }]);
}(common_1.AsyncHandler);
_DeskBookingFormComponent = DeskBookingFormComponent;
_DeskBookingFormComponent.ɵfac = function DeskBookingFormComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _DeskBookingFormComponent)(i0.ɵɵdirectiveInject(i1.BookingFormService), i0.ɵɵdirectiveInject(i2.SettingsService));
};
_DeskBookingFormComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _DeskBookingFormComponent,
  selectors: [["desk-booking-form"]],
  features: [i0.ɵɵInheritDefinitionFeature],
  decls: 1,
  vars: 1,
  consts: [["class", "divide-y divide-base-200 space-y-2", 3, "formGroup", 4, "ngIf"], [1, "divide-y", "divide-base-200", "space-y-2", 3, "formGroup"], [1, "p-4"], [1, "space-x-2", "flex", "items-center", "mb-4"], [1, "border", "border-base-200", "rounded-full", "h-6", "w-6", "flex", "items-center", "justify-center"], [1, "text-xl"], [1, "flex", "items-center", "flex-wrap", "sm:space-x-2"], [1, "flex-1", "min-w-[256px]"], ["for", "title"], ["appearance", "outline", 1, "w-full"], ["matInput", "", "name", "title", "formControlName", "title", "placeholder", "e.g. Focus Time"], ["for", "date"], ["name", "date", "formControlName", "date"], [1, "flex", "items-center", "space-x-2"], [1, "flex-1", "w-1/3"], ["for", "start-time"], ["name", "start-time", 3, "ngModelChange", "ngModel", "ngModelOptions"], [1, "flex-1", "w-1/3", "relative"], ["for", "end-time"], ["name", "end-time", "formControlName", "duration", 3, "time", "max", "min", "step"], ["formControlName", "all_day", "class", "absolute top-0 right-0", 4, "ngIf"], ["class", "flex items-center space-x-2", 4, "ngIf"], ["formControlName", "resources"], ["class", "p-4", 4, "ngIf"], ["formControlName", "all_day", 1, "absolute", "top-0", "right-0"], [3, "ngModelChange", "ngModel", "ngModelOptions"], ["formControlName", "assets", 3, "date", "duration"]],
  template: function DeskBookingFormComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵtemplate(0, DeskBookingFormComponent_div_0_Template, 47, 11, "div", 0);
    }
    if (rf & 2) {
      i0.ɵɵproperty("ngIf", ctx.form);
    }
  },
  dependencies: [i3.NgIf, i4.MatFormField, i4.MatError, i5.MatInput, i6.MatCheckbox, i7.DeskListFieldComponent, i8.DefaultValueAccessor, i8.NgControlStatus, i8.NgControlStatusGroup, i8.NgModel, i9.AssetListFieldComponent, i10.DateFieldComponent, i11.DurationFieldComponent, i12.TimeFieldComponent, i8.FormGroupDirective, i8.FormControlName]
});
exports.DeskBookingFormComponent = DeskBookingFormComponent;

/***/ }),

/***/ 81547:
/*!********************************************************************!*\
  !*** ./apps/outlook-addin/src/app/desks/desk-success.component.ts ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _DeskBookingSuccessComponent;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.DeskBookingSuccessComponent = void 0;
var bookings_1 = __webpack_require__(/*! @placeos/bookings */ 85616);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @placeos/bookings */ 85616);
var i2 = __webpack_require__(/*! @angular/common */ 60316);
var i3 = __webpack_require__(/*! @angular/router */ 95072);
var i4 = __webpack_require__(/*! @angular/material/core */ 74646);
var _c0 = function _c0() {
  return ["/book", "desks"];
};
function DeskBookingSuccessComponent_p_12_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "p");
    i0.ɵɵtext(1, " Please allow up to 5 minutes for you booking to be approved. ");
    i0.ɵɵelementEnd();
  }
}
var DeskBookingSuccessComponent = /*#__PURE__*/_createClass(function DeskBookingSuccessComponent(_service) {
  _classCallCheck(this, DeskBookingSuccessComponent);
  this._service = _service;
  this.last_success = this._service.last_success;
});
_DeskBookingSuccessComponent = DeskBookingSuccessComponent;
_DeskBookingSuccessComponent.ɵfac = function DeskBookingSuccessComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _DeskBookingSuccessComponent)(i0.ɵɵdirectiveInject(i1.BookingFormService));
};
_DeskBookingSuccessComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _DeskBookingSuccessComponent,
  selectors: [["desk-booking-success"]],
  decls: 15,
  vars: 16,
  consts: [[1, "absolute", "inset-0", "bg-base-100", "flex", "flex-col", "items-center", "justify-center", "space-y-4", "p-4", "text-center"], [1, "text-3xl"], ["src", "assets/tick_success.svg"], [4, "ngIf"], ["btn", "", "btn", "", "matRipple", "", 1, "w-64", 3, "routerLink"]],
  template: function DeskBookingSuccessComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵelementStart(0, "div", 0)(1, "h3", 1);
      i0.ɵɵtext(2, "Booking Confirmed!");
      i0.ɵɵelementEnd();
      i0.ɵɵelement(3, "img", 2);
      i0.ɵɵelementStart(4, "p");
      i0.ɵɵtext(5, " Your desk booking for ");
      i0.ɵɵelementStart(6, "i");
      i0.ɵɵtext(7);
      i0.ɵɵelementEnd();
      i0.ɵɵtext(8);
      i0.ɵɵpipe(9, "date");
      i0.ɵɵpipe(10, "date");
      i0.ɵɵpipe(11, "date");
      i0.ɵɵelementEnd();
      i0.ɵɵtemplate(12, DeskBookingSuccessComponent_p_12_Template, 2, 0, "p", 3);
      i0.ɵɵelementStart(13, "a", 4);
      i0.ɵɵtext(14, " New Booking ");
      i0.ɵɵelementEnd()();
    }
    if (rf & 2) {
      i0.ɵɵadvance(7);
      i0.ɵɵtextInterpolate((ctx.last_success == null ? null : ctx.last_success.asset_name) || (ctx.last_success == null ? null : ctx.last_success.asset_id));
      i0.ɵɵadvance();
      i0.ɵɵtextInterpolate3(" has been successfully booked for the ", i0.ɵɵpipeBind2(9, 6, ctx.last_success == null ? null : ctx.last_success.date, "dd MMMM yyyy"), " at ", i0.ɵɵpipeBind2(10, 9, ctx.last_success == null ? null : ctx.last_success.date, "shortTime"), " - ", i0.ɵɵpipeBind2(11, 12, (ctx.last_success == null ? null : ctx.last_success.date) + (ctx.last_success == null ? null : ctx.last_success.duration) * 60 * 1000, "shortTime"), " ");
      i0.ɵɵadvance(4);
      i0.ɵɵproperty("ngIf", true);
      i0.ɵɵadvance();
      i0.ɵɵproperty("routerLink", i0.ɵɵpureFunction0(15, _c0));
    }
  },
  dependencies: [i2.NgIf, i3.RouterLink, i4.MatRipple, i2.DatePipe],
  styles: ["[_nghost-%COMP%] {\n                height: 100%;\n                width: 100%;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRlc2stc3VjY2Vzcy5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLFlBQVk7Z0JBQ1osV0FBVztZQUNmIiwiZmlsZSI6ImRlc2stc3VjY2Vzcy5jb21wb25lbnQudHMiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIDpob3N0IHtcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICB9XG4gICAgICAgICJdfQ== */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2FwcHMvb3V0bG9vay1hZGRpbi9zcmMvYXBwL2Rlc2tzL2Rlc2stc3VjY2Vzcy5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLFlBQVk7Z0JBQ1osV0FBVztZQUNmOztBQUVaLG9hQUFvYSIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgOmhvc3Qge1xuICAgICAgICAgICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl0sInNvdXJjZVJvb3QiOiIifQ== */"]
});
exports.DeskBookingSuccessComponent = DeskBookingSuccessComponent;

/***/ }),

/***/ 62613:
/*!**************************************************************************!*\
  !*** ./apps/outlook-addin/src/app/meetings/meeting-booking.component.ts ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _MeetingBookingComponent;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.MeetingBookingComponent = void 0;
var bottom_sheet_1 = __webpack_require__(/*! @angular/material/bottom-sheet */ 15244);
var router_1 = __webpack_require__(/*! @angular/router */ 95072);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var events_1 = __webpack_require__(/*! @placeos/events */ 40569);
var meeting_flow_confirm_component_1 = __webpack_require__(/*! apps/workplace/src/app/book/meeting-flow/meeting-flow-confirm.component */ 53819);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @placeos/events */ 40569);
var i2 = __webpack_require__(/*! @angular/router */ 95072);
var i3 = __webpack_require__(/*! @angular/material/bottom-sheet */ 15244);
var i4 = __webpack_require__(/*! @angular/material/core */ 74646);
var i5 = __webpack_require__(/*! ./meeting-form.component */ 54032);
var MeetingBookingComponent = /*#__PURE__*/function () {
  function MeetingBookingComponent(_service, _router, _bottom_sheet) {
    var _this = this;
    _classCallCheck(this, MeetingBookingComponent);
    this._service = _service;
    this._router = _router;
    this._bottom_sheet = _bottom_sheet;
    this.clearForm = function () {
      return _this._service.clearForm();
    };
  }
  return _createClass(MeetingBookingComponent, [{
    key: "form",
    get: function get() {
      return this._service.form;
    }
  }, {
    key: "makeBooking",
    value: function makeBooking() {
      var _ref,
        _this2 = this;
      if (!this.form.value.host) this.form.patchValue({
        host: (_ref = (0, common_1.currentUser)()) === null || _ref === void 0 ? void 0 : _ref.email
      });
      if (!this.form.valid) return (0, common_1.notifyError)("Some fields are invalid. [".concat((0, common_1.getInvalidFields)(this.form).join(', '), "]"));
      this.sheet_ref = this._bottom_sheet.open(meeting_flow_confirm_component_1.MeetingFlowConfirmComponent);
      this.sheet_ref.instance.show_close = true;
      this.sheet_ref.afterDismissed().subscribe(function (value) {
        if (value) {
          _this2._router.navigate(['/book', 'meeting', 'success']);
          _this2._service.setView('success');
        }
      });
    }
  }]);
}();
_MeetingBookingComponent = MeetingBookingComponent;
_MeetingBookingComponent.ɵfac = function MeetingBookingComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _MeetingBookingComponent)(i0.ɵɵdirectiveInject(i1.EventFormService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.MatBottomSheet));
};
_MeetingBookingComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _MeetingBookingComponent,
  selectors: [["meeting-booking"]],
  decls: 10,
  vars: 0,
  consts: [[1, "absolute", "inset-0", "bg-base-200"], [1, "mx-auto", "w-full", "max-w-[32rem]", "overflow-auto", "max-h-screen"], [1, "text-2xl", "p-4", "font-medium"], [1, "flex", "flex-col", "p-4", "space-y-2", "border-t", "border-base-200"], ["btn", "", "matRipple", "", 1, "w-full", 3, "click"], ["btn", "", "matRipple", "", 1, "w-full", "inverse", 3, "click"]],
  template: function MeetingBookingComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵelementStart(0, "div", 0)(1, "div", 1)(2, "h3", 2);
      i0.ɵɵtext(3, "Book Meeting");
      i0.ɵɵelementEnd();
      i0.ɵɵelement(4, "meeting-booking-form");
      i0.ɵɵelementStart(5, "div", 3)(6, "button", 4);
      i0.ɵɵlistener("click", function MeetingBookingComponent_Template_button_click_6_listener() {
        return ctx.makeBooking();
      });
      i0.ɵɵtext(7, " Book Meeting ");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(8, "button", 5);
      i0.ɵɵlistener("click", function MeetingBookingComponent_Template_button_click_8_listener() {
        return ctx.clearForm();
      });
      i0.ɵɵtext(9, " Clear Form ");
      i0.ɵɵelementEnd()()()();
    }
  },
  dependencies: [i4.MatRipple, i5.MeetingBookingFormComponent]
});
exports.MeetingBookingComponent = MeetingBookingComponent;

/***/ }),

/***/ 54032:
/*!***********************************************************************!*\
  !*** ./apps/outlook-addin/src/app/meetings/meeting-form.component.ts ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _callSuper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/callSuper.js */ 8513)["default"]);
var _inherits = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/inherits.js */ 58160)["default"]);
var _MeetingBookingFormComponent;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.MeetingBookingFormComponent = void 0;
var dialog_1 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var events_1 = __webpack_require__(/*! @placeos/events */ 40569);
var organisation_1 = __webpack_require__(/*! @placeos/organisation */ 2510);
var users_1 = __webpack_require__(/*! @placeos/users */ 63870);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @placeos/events */ 40569);
var i2 = __webpack_require__(/*! @placeos/common */ 22797);
var i3 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var i4 = __webpack_require__(/*! @placeos/organisation */ 2510);
var i5 = __webpack_require__(/*! @angular/common */ 60316);
var i6 = __webpack_require__(/*! @angular/material/form-field */ 24950);
var i7 = __webpack_require__(/*! @angular/material/input */ 95541);
var i8 = __webpack_require__(/*! @angular/material/core */ 74646);
var i9 = __webpack_require__(/*! @angular/material/select */ 25175);
var i10 = __webpack_require__(/*! @angular/material/checkbox */ 97024);
var i11 = __webpack_require__(/*! ../../../../../libs/components/src/lib/icon.component */ 69434);
var i12 = __webpack_require__(/*! @angular/forms */ 34456);
var i13 = __webpack_require__(/*! ../../../../../libs/assets/src/lib/asset-list-field.component */ 83618);
var i14 = __webpack_require__(/*! ../../../../../libs/form-fields/src/lib/date-field.component */ 19608);
var i15 = __webpack_require__(/*! ../../../../../libs/form-fields/src/lib/duration-field.component */ 83476);
var i16 = __webpack_require__(/*! ../../../../../libs/form-fields/src/lib/time-field.component */ 81413);
var i17 = __webpack_require__(/*! ../../../../../libs/form-fields/src/lib/user-list-field.component */ 840);
var i18 = __webpack_require__(/*! ../../../../../libs/form-fields/src/lib/space-list-field.component */ 84809);
var i19 = __webpack_require__(/*! ../../../../../libs/form-fields/src/lib/rich-text-input.component */ 81772);
var i20 = __webpack_require__(/*! ../../../../../libs/form-fields/src/lib/host-select-field.component */ 65347);
var i21 = __webpack_require__(/*! ../../../../../libs/catering/src/lib/catering-list-field.component */ 61601);
var _c0 = function _c0() {
  return {
    standalone: true
  };
};
var _c1 = function _c1(a0, a1, a2) {
  return {
    date: a0,
    duration: a1,
    zone_id: a2
  };
};
function MeetingBookingFormComponent_div_0_div_12_mat_option_8_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "mat-option", 31);
    i0.ɵɵtext(1);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var bld_r4 = ctx.$implicit;
    i0.ɵɵproperty("value", bld_r4);
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", bld_r4.display_name || bld_r4.name, " ");
  }
}
function MeetingBookingFormComponent_div_0_div_12_Template(rf, ctx) {
  if (rf & 1) {
    var _r3 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 28)(1, "label", 12);
    i0.ɵɵtext(2, "Building");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(3, "mat-form-field", 13)(4, "mat-select", 29);
    i0.ɵɵpipe(5, "async");
    i0.ɵɵpipe(6, "async");
    i0.ɵɵpipe(7, "async");
    i0.ɵɵlistener("ngModelChange", function MeetingBookingFormComponent_div_0_div_12_Template_mat_select_ngModelChange_4_listener($event) {
      i0.ɵɵrestoreView(_r3);
      var ctx_r1 = i0.ɵɵnextContext(2);
      return i0.ɵɵresetView(ctx_r1.setBuilding($event));
    });
    i0.ɵɵtemplate(8, MeetingBookingFormComponent_div_0_div_12_mat_option_8_Template, 2, 2, "mat-option", 30);
    i0.ɵɵpipe(9, "async");
    i0.ɵɵelementEnd()()();
  }
  if (rf & 2) {
    var tmp_4_0;
    var ctx_r1 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance(4);
    i0.ɵɵproperty("ngModel", i0.ɵɵpipeBind1(5, 4, ctx_r1.building))("ngModelOptions", i0.ɵɵpureFunction0(12, _c0))("placeholder", ((tmp_4_0 = i0.ɵɵpipeBind1(6, 6, ctx_r1.building)) == null ? null : tmp_4_0.display_name) || ((tmp_4_0 = i0.ɵɵpipeBind1(7, 8, ctx_r1.building)) == null ? null : tmp_4_0.name));
    i0.ɵɵadvance(4);
    i0.ɵɵproperty("ngForOf", i0.ɵɵpipeBind1(9, 10, ctx_r1.buildings));
  }
}
function MeetingBookingFormComponent_div_0_mat_checkbox_45_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "mat-checkbox", 32);
    i0.ɵɵtext(1, "All Day");
    i0.ɵɵelementEnd();
  }
}
function MeetingBookingFormComponent_div_0_div_46_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 33)(1, "label", 34);
    i0.ɵɵtext(2, "Host");
    i0.ɵɵelementStart(3, "span");
    i0.ɵɵtext(4, "*");
    i0.ɵɵelementEnd()();
    i0.ɵɵelement(5, "host-select-field", 35);
    i0.ɵɵelementEnd();
  }
}
function MeetingBookingFormComponent_div_0_section_47_Template(rf, ctx) {
  if (rf & 1) {
    var _r5 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "section", 2)(1, "h3", 3)(2, "div", 4);
    i0.ɵɵtext(3, " 2 ");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(4, "div", 5);
    i0.ɵɵtext(5, "Attendees");
    i0.ɵɵelementEnd();
    i0.ɵɵelement(6, "div", 6);
    i0.ɵɵelementStart(7, "button", 36);
    i0.ɵɵlistener("click", function MeetingBookingFormComponent_div_0_section_47_Template_button_click_7_listener() {
      i0.ɵɵrestoreView(_r5);
      var ctx_r1 = i0.ɵɵnextContext(2);
      return i0.ɵɵresetView(ctx_r1.findAvailableTime());
    });
    i0.ɵɵtext(8, " Availability ");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(9, "button", 7);
    i0.ɵɵlistener("click", function MeetingBookingFormComponent_div_0_section_47_Template_button_click_9_listener() {
      i0.ɵɵrestoreView(_r5);
      var ctx_r1 = i0.ɵɵnextContext(2);
      return i0.ɵɵresetView(ctx_r1.hide_block.attendees = !ctx_r1.hide_block.attendees);
    });
    i0.ɵɵelementStart(10, "app-icon");
    i0.ɵɵtext(11);
    i0.ɵɵelementEnd()()();
    i0.ɵɵelementStart(12, "div", 8);
    i0.ɵɵelement(13, "a-user-list-field", 37);
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance(11);
    i0.ɵɵtextInterpolate(ctx_r1.hide_block.attendees ? "expand_more" : "expand_less");
    i0.ɵɵadvance();
    i0.ɵɵproperty("@show", ctx_r1.hide_block.attendees ? "hide" : "show");
  }
}
function MeetingBookingFormComponent_div_0_section_60_Template(rf, ctx) {
  if (rf & 1) {
    var _r6 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "section", 2)(1, "h3", 3)(2, "div", 4);
    i0.ɵɵtext(3, " 4 ");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(4, "div", 5);
    i0.ɵɵtext(5, "Catering");
    i0.ɵɵelementEnd();
    i0.ɵɵelement(6, "div", 6);
    i0.ɵɵelementStart(7, "button", 7);
    i0.ɵɵlistener("click", function MeetingBookingFormComponent_div_0_section_60_Template_button_click_7_listener() {
      i0.ɵɵrestoreView(_r6);
      var ctx_r1 = i0.ɵɵnextContext(2);
      return i0.ɵɵresetView(ctx_r1.hide_block.catering = !ctx_r1.hide_block.catering);
    });
    i0.ɵɵelementStart(8, "app-icon");
    i0.ɵɵtext(9);
    i0.ɵɵelementEnd()()();
    i0.ɵɵelementStart(10, "div", 8);
    i0.ɵɵelement(11, "catering-list-field", 38);
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance(9);
    i0.ɵɵtextInterpolate(ctx_r1.hide_block.catering ? "expand_more" : "expand_less");
    i0.ɵɵadvance();
    i0.ɵɵproperty("@show", ctx_r1.hide_block.catering ? "hide" : "show");
    i0.ɵɵadvance();
    i0.ɵɵproperty("options", i0.ɵɵpureFunction3(3, _c1, ctx_r1.form.value.date, ctx_r1.form.value.duration, ctx_r1.form.value.resources[0] == null ? null : ctx_r1.form.value.resources[0].level == null ? null : ctx_r1.form.value.resources[0].level.parent_id));
  }
}
function MeetingBookingFormComponent_div_0_section_73_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "section", 2)(1, "h3", 39)(2, "div", 4);
    i0.ɵɵtext(3);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(4, "div", 5);
    i0.ɵɵtext(5, "Notes");
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(6, "div", 40)(7, "label", 41);
    i0.ɵɵtext(8, "General information for attendees");
    i0.ɵɵelementEnd();
    i0.ɵɵelement(9, "rich-text-input", 42);
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance(3);
    i0.ɵɵtextInterpolate1(" ", !ctx_r1.has_catering ? "5" : "6", " ");
  }
}
function MeetingBookingFormComponent_div_0_Template(rf, ctx) {
  if (rf & 1) {
    var _r1 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 1)(1, "section", 2)(2, "h3", 3)(3, "div", 4);
    i0.ɵɵtext(4, " 1 ");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(5, "div", 5);
    i0.ɵɵtext(6, "Details");
    i0.ɵɵelementEnd();
    i0.ɵɵelement(7, "div", 6);
    i0.ɵɵelementStart(8, "button", 7);
    i0.ɵɵlistener("click", function MeetingBookingFormComponent_div_0_Template_button_click_8_listener() {
      i0.ɵɵrestoreView(_r1);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.hide_block.details = !ctx_r1.hide_block.details);
    });
    i0.ɵɵelementStart(9, "app-icon");
    i0.ɵɵtext(10);
    i0.ɵɵelementEnd()()();
    i0.ɵɵelementStart(11, "div", 8);
    i0.ɵɵtemplate(12, MeetingBookingFormComponent_div_0_div_12_Template, 10, 13, "div", 9);
    i0.ɵɵpipe(13, "async");
    i0.ɵɵelementStart(14, "div", 10)(15, "div", 11)(16, "label", 12);
    i0.ɵɵtext(17, "Add Title");
    i0.ɵɵelementStart(18, "span");
    i0.ɵɵtext(19, "*");
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(20, "mat-form-field", 13);
    i0.ɵɵelement(21, "input", 14);
    i0.ɵɵelementStart(22, "mat-error");
    i0.ɵɵtext(23, "Meeting title is required.");
    i0.ɵɵelementEnd()()();
    i0.ɵɵelementStart(24, "div", 11)(25, "label", 15);
    i0.ɵɵtext(26, "Date");
    i0.ɵɵelementStart(27, "span");
    i0.ɵɵtext(28, "*");
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(29, "a-date-field", 16);
    i0.ɵɵtext(30, " Date and time must be in the future ");
    i0.ɵɵelementEnd()()();
    i0.ɵɵelementStart(31, "div", 17)(32, "div", 11)(33, "label", 18);
    i0.ɵɵtext(34, "Start Time");
    i0.ɵɵelementStart(35, "span");
    i0.ɵɵtext(36, "*");
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(37, "a-time-field", 19);
    i0.ɵɵlistener("ngModelChange", function MeetingBookingFormComponent_div_0_Template_a_time_field_ngModelChange_37_listener($event) {
      i0.ɵɵrestoreView(_r1);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.form.patchValue({
        date: $event
      }));
    });
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(38, "div", 20)(39, "label", 21);
    i0.ɵɵtext(40, "End Time");
    i0.ɵɵelementStart(41, "span");
    i0.ɵɵtext(42, "*");
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(43, "a-duration-field", 22);
    i0.ɵɵtext(44, " Meeting must end at a future time. ");
    i0.ɵɵelementEnd();
    i0.ɵɵtemplate(45, MeetingBookingFormComponent_div_0_mat_checkbox_45_Template, 2, 0, "mat-checkbox", 23);
    i0.ɵɵelementEnd()();
    i0.ɵɵtemplate(46, MeetingBookingFormComponent_div_0_div_46_Template, 6, 0, "div", 24);
    i0.ɵɵelementEnd()();
    i0.ɵɵtemplate(47, MeetingBookingFormComponent_div_0_section_47_Template, 14, 2, "section", 25);
    i0.ɵɵelementStart(48, "section", 2)(49, "h3", 3)(50, "div", 4);
    i0.ɵɵtext(51, " 3 ");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(52, "div", 5);
    i0.ɵɵtext(53, "Room");
    i0.ɵɵelementEnd();
    i0.ɵɵelement(54, "div", 6);
    i0.ɵɵelementStart(55, "button", 7);
    i0.ɵɵlistener("click", function MeetingBookingFormComponent_div_0_Template_button_click_55_listener() {
      i0.ɵɵrestoreView(_r1);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.hide_block.resources = !ctx_r1.hide_block.resources);
    });
    i0.ɵɵelementStart(56, "app-icon");
    i0.ɵɵtext(57);
    i0.ɵɵelementEnd()()();
    i0.ɵɵelementStart(58, "div", 8);
    i0.ɵɵelement(59, "space-list-field", 26);
    i0.ɵɵelementEnd()();
    i0.ɵɵtemplate(60, MeetingBookingFormComponent_div_0_section_60_Template, 12, 7, "section", 25);
    i0.ɵɵelementStart(61, "section", 2)(62, "h3", 3)(63, "div", 4);
    i0.ɵɵtext(64);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(65, "div", 5);
    i0.ɵɵtext(66, "Assets");
    i0.ɵɵelementEnd();
    i0.ɵɵelement(67, "div", 6);
    i0.ɵɵelementStart(68, "button", 7);
    i0.ɵɵlistener("click", function MeetingBookingFormComponent_div_0_Template_button_click_68_listener() {
      i0.ɵɵrestoreView(_r1);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.hide_block.assets = !ctx_r1.hide_block.assets);
    });
    i0.ɵɵelementStart(69, "app-icon");
    i0.ɵɵtext(70);
    i0.ɵɵelementEnd()()();
    i0.ɵɵelementStart(71, "div", 8);
    i0.ɵɵelement(72, "asset-list-field", 27);
    i0.ɵɵelementEnd()();
    i0.ɵɵtemplate(73, MeetingBookingFormComponent_div_0_section_73_Template, 10, 1, "section", 25);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var tmp_4_0;
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵproperty("formGroup", ctx_r1.form);
    i0.ɵɵadvance(10);
    i0.ɵɵtextInterpolate(ctx_r1.hide_block.details ? "expand_more" : "expand_less");
    i0.ɵɵadvance();
    i0.ɵɵproperty("@show", ctx_r1.hide_block.details ? "hide" : "show");
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", ((tmp_4_0 = i0.ɵɵpipeBind1(13, 20, ctx_r1.buildings)) == null ? null : tmp_4_0.length) > 1);
    i0.ɵɵadvance(25);
    i0.ɵɵproperty("ngModel", ctx_r1.form.value.date)("ngModelOptions", i0.ɵɵpureFunction0(22, _c0));
    i0.ɵɵadvance(6);
    i0.ɵɵproperty("time", ctx_r1.form == null ? null : ctx_r1.form.value == null ? null : ctx_r1.form.value.date)("max", ctx_r1.max_duration);
    i0.ɵɵadvance(2);
    i0.ɵɵproperty("ngIf", ctx_r1.allow_all_day);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", ctx_r1.can_book_for_others);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", !ctx_r1.hide_attendees);
    i0.ɵɵadvance(10);
    i0.ɵɵtextInterpolate(ctx_r1.hide_block.resources ? "expand_more" : "expand_less");
    i0.ɵɵadvance();
    i0.ɵɵproperty("@show", ctx_r1.hide_block.resources ? "hide" : "show");
    i0.ɵɵadvance(2);
    i0.ɵɵproperty("ngIf", ctx_r1.has_catering);
    i0.ɵɵadvance(4);
    i0.ɵɵtextInterpolate1(" ", !ctx_r1.has_catering ? "4" : "5", " ");
    i0.ɵɵadvance(6);
    i0.ɵɵtextInterpolate(ctx_r1.hide_block.assets ? "expand_more" : "expand_less");
    i0.ɵɵadvance();
    i0.ɵɵproperty("@show", ctx_r1.hide_block.assets ? "hide" : "show");
    i0.ɵɵadvance();
    i0.ɵɵproperty("date", ctx_r1.form.value.date)("duration", ctx_r1.form.value.duration);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", !ctx_r1.hide_notes);
  }
}
var MeetingBookingFormComponent = /*#__PURE__*/function (_common_1$AsyncHandle) {
  function MeetingBookingFormComponent(_service, _settings, _dialog, _org) {
    var _this;
    _classCallCheck(this, MeetingBookingFormComponent);
    _this = _callSuper(this, MeetingBookingFormComponent);
    _this._service = _service;
    _this._settings = _settings;
    _this._dialog = _dialog;
    _this._org = _org;
    _this.form = _this._service.form;
    _this.hide_block = {};
    _this.building = _this._org.active_building;
    _this.buildings = _this._org.building_list;
    return _this;
  }
  _inherits(MeetingBookingFormComponent, _common_1$AsyncHandle);
  return _createClass(MeetingBookingFormComponent, [{
    key: "has_catering",
    get: function get() {
      return !!this._settings.get('app.events.catering_enabled') || !!this._settings.get('app.events.has_catering');
    }
  }, {
    key: "hide_notes",
    get: function get() {
      return !!this._settings.get('app.events.hide_notes');
    }
  }, {
    key: "hide_attendees",
    get: function get() {
      return !!this._settings.get('app.events.hide_attendees');
    }
  }, {
    key: "max_duration",
    get: function get() {
      return this._settings.get('app.events.max_duration') || 480;
    }
  }, {
    key: "can_book_for_others",
    get: function get() {
      return this._settings.get('app.events.can_book_for_others');
    }
  }, {
    key: "allow_all_day",
    get: function get() {
      return this._settings.get('app.events.allow_all_day');
    }
  }, {
    key: "allow_assets",
    get: function get() {
      return this._settings.get('app.events.allow_assets');
    }
  }, {
    key: "findAvailableTime",
    value: function findAvailableTime() {
      var _this2 = this;
      var _this$form$value = this.form.value,
        attendees = _this$form$value.attendees,
        organiser = _this$form$value.organiser,
        date = _this$form$value.date,
        duration = _this$form$value.duration;
      var ref = this._dialog.open(users_1.FindAvailabilityModalComponent, {
        data: {
          users: attendees,
          host: organiser || (0, common_1.currentUser)(),
          date: date,
          duration: duration
        }
      });
      ref.afterClosed().subscribe(function (d) {
        if (!d) return;
        _this2.form.patchValue({
          date: ref.componentInstance.date,
          attendees: ref.componentInstance.users.getValue(),
          duration: ref.componentInstance.duration
        });
      });
    }
  }, {
    key: "setBuilding",
    value: function setBuilding(bld) {
      this._org.building = bld;
      this._org.saveBuilding(bld.id);
    }
  }]);
}(common_1.AsyncHandler);
_MeetingBookingFormComponent = MeetingBookingFormComponent;
_MeetingBookingFormComponent.ɵfac = function MeetingBookingFormComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _MeetingBookingFormComponent)(i0.ɵɵdirectiveInject(i1.EventFormService), i0.ɵɵdirectiveInject(i2.SettingsService), i0.ɵɵdirectiveInject(i3.MatDialog), i0.ɵɵdirectiveInject(i4.OrganisationService));
};
_MeetingBookingFormComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _MeetingBookingFormComponent,
  selectors: [["meeting-booking-form"]],
  features: [i0.ɵɵInheritDefinitionFeature],
  decls: 1,
  vars: 1,
  consts: [["class", "divide-y divide-base-200 space-y-2", 3, "formGroup", 4, "ngIf"], [1, "divide-y", "divide-base-200", "space-y-2", 3, "formGroup"], [1, "p-4"], [1, "space-x-2", "flex", "items-center"], [1, "bg-neutral", "rounded-full", "h-6", "w-6", "flex", "items-center", "justify-center"], [1, "text-xl"], [1, "flex-1", "w-px"], ["icon", "", "matRipple", "", 3, "click"], [1, "overflow-hidden"], ["class", "flex-1 min-w-[256px]", 4, "ngIf"], [1, "flex", "items-center", "flex-wrap", "space-x-2"], [1, "flex-1", "w-1/3"], ["for", "title"], ["appearance", "outline", 1, "w-full"], ["matInput", "", "name", "title", "formControlName", "title", "placeholder", "e.g. Team Meeting"], ["for", "date"], ["name", "date", "formControlName", "date"], [1, "flex", "items-center", "space-x-2"], ["for", "start-time"], ["name", "start-time", 3, "ngModelChange", "ngModel", "ngModelOptions"], [1, "flex-1", "w-1/3", "relative"], ["for", "end-time"], ["name", "end-time", "formControlName", "duration", 3, "time", "max"], ["formControlName", "all_day", "class", "absolute -top-2 right-0", 4, "ngIf"], ["class", "w-full", 4, "ngIf"], ["class", "p-4", 4, "ngIf"], ["formControlName", "resources", 1, "mt-4"], ["formControlName", "assets", 3, "date", "duration"], [1, "flex-1", "min-w-[256px]"], ["name", "building", 3, "ngModelChange", "ngModel", "ngModelOptions", "placeholder"], [3, "value", 4, "ngFor", "ngForOf"], [3, "value"], ["formControlName", "all_day", 1, "absolute", "-top-2", "right-0"], [1, "w-full"], ["for", "host"], ["name", "host", "formControlName", "organiser"], ["matRipple", "", 1, "bg-none", "underline", "text-xs", "text-blue-500", 3, "click"], ["formControlName", "attendees", 1, "mt-4"], ["formControlName", "catering", 3, "options"], [1, "space-x-2", "flex", "items-center", "mb-4"], [1, "w-full", "flex", "flex-col"], ["for", "notes"], ["name", "notes", "formControlName", "body", "placeholder", "Notes..."]],
  template: function MeetingBookingFormComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵtemplate(0, MeetingBookingFormComponent_div_0_Template, 74, 23, "div", 0);
    }
    if (rf & 2) {
      i0.ɵɵproperty("ngIf", ctx.form);
    }
  },
  dependencies: [i5.NgForOf, i5.NgIf, i6.MatFormField, i6.MatError, i7.MatInput, i8.MatOption, i9.MatSelect, i8.MatRipple, i10.MatCheckbox, i11.IconComponent, i12.DefaultValueAccessor, i12.NgControlStatus, i12.NgControlStatusGroup, i12.NgModel, i13.AssetListFieldComponent, i14.DateFieldComponent, i15.DurationFieldComponent, i16.TimeFieldComponent, i17.UserListFieldComponent, i18.SpaceListFieldComponent, i19.RichTextInputComponent, i20.HostSelectFieldComponent, i12.FormGroupDirective, i12.FormControlName, i21.CateringListFieldComponent, i5.AsyncPipe],
  data: {
    animation: [common_1.ANIMATION_SHOW_CONTRACT_EXPAND]
  }
});
exports.MeetingBookingFormComponent = MeetingBookingFormComponent;

/***/ }),

/***/ 23225:
/*!**************************************************************************!*\
  !*** ./apps/outlook-addin/src/app/meetings/meeting-success.component.ts ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _MeetingBookingSuccessComponent;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.MeetingBookingSuccessComponent = void 0;
var events_1 = __webpack_require__(/*! @placeos/events */ 40569);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @placeos/events */ 40569);
var i2 = __webpack_require__(/*! @angular/router */ 95072);
var i3 = __webpack_require__(/*! @angular/material/core */ 74646);
var i4 = __webpack_require__(/*! @angular/common */ 60316);
var _c0 = function _c0() {
  return ["/book", "meeting"];
};
var MeetingBookingSuccessComponent = /*#__PURE__*/_createClass(function MeetingBookingSuccessComponent(_service) {
  _classCallCheck(this, MeetingBookingSuccessComponent);
  this._service = _service;
  this.last_success = this._service.last_success;
});
_MeetingBookingSuccessComponent = MeetingBookingSuccessComponent;
_MeetingBookingSuccessComponent.ɵfac = function MeetingBookingSuccessComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _MeetingBookingSuccessComponent)(i0.ɵɵdirectiveInject(i1.EventFormService));
};
_MeetingBookingSuccessComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _MeetingBookingSuccessComponent,
  selectors: [["meeting-booking-success"]],
  decls: 14,
  vars: 15,
  consts: [[1, "absolute", "inset-0", "bg-base-100", "flex", "flex-col", "items-center", "justify-center", "space-y-4", "p-4", "text-center"], [1, "text-3xl"], ["src", "assets/tick_success.svg"], ["btn", "", "btn", "", "matRipple", "", 1, "w-64", 3, "routerLink"]],
  template: function MeetingBookingSuccessComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵelementStart(0, "div", 0)(1, "h3", 1);
      i0.ɵɵtext(2, "Booking Confirmed!");
      i0.ɵɵelementEnd();
      i0.ɵɵelement(3, "img", 2);
      i0.ɵɵelementStart(4, "p");
      i0.ɵɵtext(5, " Your meeting booking for ");
      i0.ɵɵelementStart(6, "i");
      i0.ɵɵtext(7);
      i0.ɵɵelementEnd();
      i0.ɵɵtext(8);
      i0.ɵɵpipe(9, "date");
      i0.ɵɵpipe(10, "date");
      i0.ɵɵpipe(11, "date");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(12, "a", 3);
      i0.ɵɵtext(13, " New Booking ");
      i0.ɵɵelementEnd()();
    }
    if (rf & 2) {
      i0.ɵɵadvance(7);
      i0.ɵɵtextInterpolate((ctx.last_success == null ? null : ctx.last_success.location) || (ctx.last_success == null ? null : ctx.last_success.system == null ? null : ctx.last_success.system.display_name));
      i0.ɵɵadvance();
      i0.ɵɵtextInterpolate3(" has been successfully booked for the ", i0.ɵɵpipeBind2(9, 5, ctx.last_success == null ? null : ctx.last_success.date, "dd MMMM yyyy"), " at ", i0.ɵɵpipeBind2(10, 8, ctx.last_success == null ? null : ctx.last_success.date, "shortTime"), " - ", i0.ɵɵpipeBind2(11, 11, (ctx.last_success == null ? null : ctx.last_success.date) + (ctx.last_success == null ? null : ctx.last_success.duration) * 60 * 1000, "shortTime"), " ");
      i0.ɵɵadvance(4);
      i0.ɵɵproperty("routerLink", i0.ɵɵpureFunction0(14, _c0));
    }
  },
  dependencies: [i2.RouterLink, i3.MatRipple, i4.DatePipe],
  styles: ["[_nghost-%COMP%] {\n                height: 100%;\n                width: 100%;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1lZXRpbmctc3VjY2Vzcy5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLFlBQVk7Z0JBQ1osV0FBVztZQUNmIiwiZmlsZSI6Im1lZXRpbmctc3VjY2Vzcy5jb21wb25lbnQudHMiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIDpob3N0IHtcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICB9XG4gICAgICAgICJdfQ== */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2FwcHMvb3V0bG9vay1hZGRpbi9zcmMvYXBwL21lZXRpbmdzL21lZXRpbmctc3VjY2Vzcy5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLFlBQVk7Z0JBQ1osV0FBVztZQUNmOztBQUVaLDRhQUE0YSIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgOmhvc3Qge1xuICAgICAgICAgICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl0sInNvdXJjZVJvb3QiOiIifQ== */"]
});
exports.MeetingBookingSuccessComponent = MeetingBookingSuccessComponent;

/***/ }),

/***/ 92502:
/*!*********************************************************!*\
  !*** ./apps/outlook-addin/src/app/rooms/book.module.ts ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _BookModule;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.BookModule = void 0;
var common_1 = __webpack_require__(/*! @angular/common */ 60316);
var forms_1 = __webpack_require__(/*! @angular/forms */ 34456);
var router_1 = __webpack_require__(/*! @angular/router */ 95072);
var snack_bar_1 = __webpack_require__(/*! @angular/material/snack-bar */ 3347);
var core_1 = __webpack_require__(/*! @angular/material/core */ 74646);
var room_booking_component_1 = __webpack_require__(/*! ./room-booking.component */ 96615);
var room_confirm_component_1 = __webpack_require__(/*! ./room-confirm/room-confirm.component */ 47763);
var find_space_component_1 = __webpack_require__(/*! ./find-space/find-space.component */ 1059);
var find_space_item_component_1 = __webpack_require__(/*! ./find-space-item/find-space-item.component */ 37365);
var form_fields_1 = __webpack_require__(/*! @placeos/form-fields */ 63046);
var shared_module_1 = __webpack_require__(/*! ../components/shared.module */ 31620);
var components_1 = __webpack_require__(/*! @placeos/components */ 51588);
var button_toggle_1 = __webpack_require__(/*! @angular/material/button-toggle */ 59864);
var bottom_sheet_1 = __webpack_require__(/*! @angular/material/bottom-sheet */ 15244);
var filter_space_component_1 = __webpack_require__(/*! ./filter-space/filter-space.component */ 26525);
var booking_confirmed_component_1 = __webpack_require__(/*! ./booking-confirmed/booking-confirmed.component */ 36993);
var room_tile_component_1 = __webpack_require__(/*! ./room-tile/room-tile.component */ 91361);
var room_details_component_1 = __webpack_require__(/*! ./room-details/room-details.component */ 72799);
var upcoming_bookings_component_1 = __webpack_require__(/*! ./upcoming-bookings/upcoming-bookings.component */ 83805);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @angular/router */ 95072);
var ROUTES = [{
  path: 'find',
  component: find_space_component_1.FindSpaceComponent
}];
var BookModule = /*#__PURE__*/_createClass(function BookModule() {
  _classCallCheck(this, BookModule);
});
_BookModule = BookModule;
_BookModule.ɵfac = function BookModule_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _BookModule)();
};
_BookModule.ɵmod = /*@__PURE__*/i0.ɵɵdefineNgModule({
  type: _BookModule
});
_BookModule.ɵinj = /*@__PURE__*/i0.ɵɵdefineInjector({
  imports: [common_1.CommonModule, router_1.RouterModule.forChild(ROUTES), shared_module_1.SharedComponentModule, forms_1.FormsModule, forms_1.ReactiveFormsModule, core_1.MatNativeDateModule, core_1.NativeDateModule, form_fields_1.FormFieldsModule, bottom_sheet_1.MatBottomSheetModule, core_1.MatNativeDateModule, snack_bar_1.MatSnackBarModule, button_toggle_1.MatButtonToggleModule, components_1.ComponentsModule]
});
exports.BookModule = BookModule;
(function () {
  (typeof ngJitMode === "undefined" || ngJitMode) && i0.ɵɵsetNgModuleScope(BookModule, {
    declarations: [room_booking_component_1.RoomBookingComponent, room_confirm_component_1.RoomConfirmComponent, find_space_component_1.FindSpaceComponent, find_space_item_component_1.FindSpaceItemComponent, filter_space_component_1.FilterSpaceComponent, booking_confirmed_component_1.BookingConfirmedComponent, room_tile_component_1.RoomTileComponent, room_details_component_1.RoomDetailsComponent, upcoming_bookings_component_1.UpcomingBookingsComponent],
    imports: [common_1.CommonModule, i1.RouterModule, shared_module_1.SharedComponentModule, forms_1.FormsModule, forms_1.ReactiveFormsModule, core_1.MatNativeDateModule, core_1.NativeDateModule, form_fields_1.FormFieldsModule, bottom_sheet_1.MatBottomSheetModule, core_1.MatNativeDateModule, snack_bar_1.MatSnackBarModule, button_toggle_1.MatButtonToggleModule, components_1.ComponentsModule]
  });
})();

/***/ }),

/***/ 36993:
/*!*******************************************************************************************!*\
  !*** ./apps/outlook-addin/src/app/rooms/booking-confirmed/booking-confirmed.component.ts ***!
  \*******************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _BookingConfirmedComponent;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.BookingConfirmedComponent = void 0;
var router_1 = __webpack_require__(/*! @angular/router */ 95072);
var events_1 = __webpack_require__(/*! @placeos/events */ 40569);
var rxjs_1 = __webpack_require__(/*! rxjs */ 15681);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @placeos/events */ 40569);
var i2 = __webpack_require__(/*! @angular/router */ 95072);
var i3 = __webpack_require__(/*! @angular/material/core */ 74646);
var i4 = __webpack_require__(/*! @angular/common */ 60316);
var BookingConfirmedComponent = /*#__PURE__*/function () {
  function BookingConfirmedComponent(_state, _router) {
    _classCallCheck(this, BookingConfirmedComponent);
    this._state = _state;
    this._router = _router;
  }
  return _createClass(BookingConfirmedComponent, [{
    key: "form",
    get: function get() {
      return this._state.form;
    }
  }, {
    key: "ngOnInit",
    value: function ngOnInit() {
      var _this$_state$last_suc, _this$_state$last_suc2, _this$_state$last_suc3, _this$_state$last_suc4, _this$_state$last_suc5;
      this.location = (_this$_state$last_suc = this._state.last_success) === null || _this$_state$last_suc === void 0 ? void 0 : _this$_state$last_suc.location;
      this.date = (0, rxjs_1.of)((_this$_state$last_suc2 = this._state.last_success) === null || _this$_state$last_suc2 === void 0 ? void 0 : _this$_state$last_suc2.date);
      this.start_time$ = (0, rxjs_1.of)(new Date((_this$_state$last_suc3 = this._state.last_success) === null || _this$_state$last_suc3 === void 0 ? void 0 : _this$_state$last_suc3.date).toLocaleTimeString('en-US', {
        hour: 'numeric',
        minute: 'numeric',
        hour12: true
      }));
      this.duration = (_this$_state$last_suc4 = this._state.last_success) === null || _this$_state$last_suc4 === void 0 ? void 0 : _this$_state$last_suc4.duration;
      this.end_time$ = (0, rxjs_1.of)(new Date(((_this$_state$last_suc5 = this._state.last_success) === null || _this$_state$last_suc5 === void 0 ? void 0 : _this$_state$last_suc5.date) + this.duration * 60 * 1000).toLocaleTimeString('en-US', {
        hour: 'numeric',
        minute: 'numeric',
        hour12: true
      }));
    }
  }, {
    key: "newBooking",
    value: function newBooking() {
      this._router.navigate(['book/spaces']);
    }
  }]);
}();
_BookingConfirmedComponent = BookingConfirmedComponent;
_BookingConfirmedComponent.ɵfac = function BookingConfirmedComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _BookingConfirmedComponent)(i0.ɵɵdirectiveInject(i1.EventFormService), i0.ɵɵdirectiveInject(i2.Router));
};
_BookingConfirmedComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _BookingConfirmedComponent,
  selectors: [["booking-confirmed"]],
  decls: 19,
  vars: 13,
  consts: [[1, "flex", "flex-1", "flex-col", "z-0", "bg-base-200", "h-full", "overflow-y-auto"], [1, "flex", "border-b", "border-base-200", "py-5", "items-center", "justify-content", "h-full"], [1, "flex", "flex-col", "items-center", "mx-auto", "w-[calc(100%-2rem)]", "max-w-[375px]"], [1, "mb-3"], [1, "text-3xl", "font-bold", "mr-auto", "text-gray-700"], ["src", "assets/tick_success.svg"], [1, "mx-3", "flex", "items-center", "justify-center"], [1, "flex", "text-justify"], [1, "flex", "items-center", "mt-3"], ["btn", "", "matRipple", "", 1, "text-sm", "bg-base-100", "text-secondary", "border-secondary", "my-2", 3, "click"], [1, "text-sm"]],
  template: function BookingConfirmedComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵelementStart(0, "div", 0)(1, "section", 1)(2, "div", 2)(3, "div", 3)(4, "span", 4);
      i0.ɵɵtext(5, " Booking Confirmed!");
      i0.ɵɵelementEnd()();
      i0.ɵɵelementStart(6, "div");
      i0.ɵɵelement(7, "img", 5);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(8, "div", 6)(9, "span", 7);
      i0.ɵɵtext(10);
      i0.ɵɵpipe(11, "async");
      i0.ɵɵpipe(12, "date");
      i0.ɵɵpipe(13, "async");
      i0.ɵɵpipe(14, "async");
      i0.ɵɵelementEnd()();
      i0.ɵɵelementStart(15, "div", 8)(16, "button", 9);
      i0.ɵɵlistener("click", function BookingConfirmedComponent_Template_button_click_16_listener() {
        return ctx.newBooking();
      });
      i0.ɵɵelementStart(17, "span", 10);
      i0.ɵɵtext(18, "New Booking");
      i0.ɵɵelementEnd()()()()()();
    }
    if (rf & 2) {
      i0.ɵɵadvance(10);
      i0.ɵɵtextInterpolate4("Your room booking for ", ctx.location, " has been successfully booked for the ", i0.ɵɵpipeBind2(12, 6, i0.ɵɵpipeBind1(11, 4, ctx.date), "dd MMMM yyyy"), " at ", i0.ɵɵpipeBind1(13, 9, ctx.start_time$), " - ", i0.ɵɵpipeBind1(14, 11, ctx.end_time$), " ");
    }
  },
  dependencies: [i3.MatRipple, i4.AsyncPipe, i4.DatePipe]
});
exports.BookingConfirmedComponent = BookingConfirmedComponent;

/***/ }),

/***/ 81406:
/*!*********************************************************************!*\
  !*** ./apps/outlook-addin/src/app/rooms/features-filter.service.ts ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _regeneratorRuntime = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/regeneratorRuntime.js */ 8698)["default"]);
var _asyncToGenerator = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/asyncToGenerator.js */ 95386)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _FeaturesFilterService;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.FeaturesFilterService = void 0;
var rxjs_1 = __webpack_require__(/*! rxjs */ 15681);
var operators_1 = __webpack_require__(/*! rxjs/operators */ 97303);
var events_1 = __webpack_require__(/*! @placeos/events */ 40569);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @placeos/events */ 40569);
var FeaturesFilterService = /*#__PURE__*/function () {
  function FeaturesFilterService(_state) {
    _classCallCheck(this, FeaturesFilterService);
    this._state = _state;
    this.spaces$ = this._state.available_spaces;
    this.updated_spaces_emitter = new rxjs_1.BehaviorSubject(false);
    this._selected_features = new rxjs_1.BehaviorSubject(null);
    this.selected_features$ = this._selected_features.asObservable();
    this._features = new rxjs_1.BehaviorSubject(null);
    this.features$ = this._features.asObservable();
    this.room_features = [{
      name: 'Video Conference (VC)',
      id: 'VidConf',
      value: false
    }, {
      name: 'Conference Phone',
      id: 'ConfPhone',
      value: false
    }, {
      name: 'Wireless Content Sharing',
      id: 'Wireless',
      value: false
    }, {
      name: 'Video Wall',
      id: 'VidWall',
      value: false
    }, {
      name: 'Whiteboard',
      id: 'Whiteboard',
      value: false
    }, {
      name: 'Jamboard',
      id: 'Jamboard',
      value: false
    }, {
      name: 'Projector',
      id: 'Projector',
      value: false
    }, {
      name: 'Views',
      id: 'Views',
      value: false
    }];
    this._features.next(this.room_features);
  }
  return _createClass(FeaturesFilterService, [{
    key: "selected_features",
    get: function get() {
      return this._selected_features.getValue();
    }
  }, {
    key: "features",
    get: function get() {
      return this._features.getValue();
    },
    set: function set(feature) {
      this._features.next(feature);
    }
  }, {
    key: "getSelectedFeatures",
    value: function () {
      var _getSelectedFeatures = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
        var _this$selected_featur;
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              this.selected_features$ = this.features$.pipe((0, operators_1.map)(function (arr) {
                return arr.filter(function (item) {
                  return item.value == true;
                });
              }));
              _context.next = 3;
              return this.selected_features$.pipe((0, operators_1.take)(1)).toPromise();
            case 3:
              (_this$selected_featur = this.selected_features$) === null || _this$selected_featur === void 0 || _this$selected_featur.subscribe(this._selected_features);
            case 4:
            case "end":
              return _context.stop();
          }
        }, _callee, this);
      }));
      function getSelectedFeatures() {
        return _getSelectedFeatures.apply(this, arguments);
      }
      return getSelectedFeatures;
    }()
  }, {
    key: "applyFilter",
    value: function () {
      var _applyFilter = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {
        var _this = this,
          _this$updated_spaces$;
        var requested_features;
        return _regeneratorRuntime().wrap(function _callee2$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              _context2.next = 2;
              return this.selected_features$.pipe((0, operators_1.take)(1)).toPromise();
            case 2:
              _context2.next = 4;
              return this.sortSelectedFeatures(this.selected_features);
            case 4:
              requested_features = _context2.sent;
              this.updated_spaces$ = this.spaces$.pipe((0, operators_1.map)(function (spaces) {
                return spaces.filter(function (space) {
                  return _this._sort_and_join(space.feature_list).includes(requested_features);
                });
              }));
              _context2.next = 8;
              return (_this$updated_spaces$ = this.updated_spaces$) === null || _this$updated_spaces$ === void 0 ? void 0 : _this$updated_spaces$.pipe((0, operators_1.take)(1)).toPromise();
            case 8:
              this.updated_spaces_emitter.next(true);
            case 9:
            case "end":
              return _context2.stop();
          }
        }, _callee2, this);
      }));
      function applyFilter() {
        return _applyFilter.apply(this, arguments);
      }
      return applyFilter;
    }()
  }, {
    key: "_sort_and_join",
    value: function _sort_and_join(array) {
      return array === null || array === void 0 ? void 0 : array.sort().join();
    }
  }, {
    key: "sortSelectedFeatures",
    value: function () {
      var _sortSelectedFeatures = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3(array) {
        var features_array;
        return _regeneratorRuntime().wrap(function _callee3$(_context3) {
          while (1) switch (_context3.prev = _context3.next) {
            case 0:
              _context3.next = 2;
              return array === null || array === void 0 ? void 0 : array.map(function (item) {
                return item.id;
              });
            case 2:
              features_array = _context3.sent;
              return _context3.abrupt("return", this._sort_and_join(features_array));
            case 4:
            case "end":
              return _context3.stop();
          }
        }, _callee3, this);
      }));
      function sortSelectedFeatures(_x) {
        return _sortSelectedFeatures.apply(this, arguments);
      }
      return sortSelectedFeatures;
    }()
  }, {
    key: "clearFilter",
    value: function clearFilter() {
      var _this$room_features;
      this._selected_features.next(null);
      (_this$room_features = this.room_features) === null || _this$room_features === void 0 || _this$room_features.map(function (feature) {
        return feature.value = false;
      });
      this._features.next(this.room_features);
      this.updated_spaces_emitter.next(false);
    }
  }, {
    key: "OnDestroy",
    value: function OnDestroy() {
      var _this$features_sub;
      (_this$features_sub = this.features_sub) === null || _this$features_sub === void 0 || _this$features_sub.unsubscribe();
    }
  }]);
}();
_FeaturesFilterService = FeaturesFilterService;
_FeaturesFilterService.ɵfac = function FeaturesFilterService_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _FeaturesFilterService)(i0.ɵɵinject(i1.EventFormService));
};
_FeaturesFilterService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({
  token: _FeaturesFilterService,
  factory: _FeaturesFilterService.ɵfac,
  providedIn: 'root'
});
exports.FeaturesFilterService = FeaturesFilterService;

/***/ }),

/***/ 26525:
/*!*********************************************************************************!*\
  !*** ./apps/outlook-addin/src/app/rooms/filter-space/filter-space.component.ts ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _FilterSpaceComponent;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.FilterSpaceComponent = void 0;
var bottom_sheet_1 = __webpack_require__(/*! @angular/material/bottom-sheet */ 15244);
var events_1 = __webpack_require__(/*! @placeos/events */ 40569);
var features_filter_service_1 = __webpack_require__(/*! ../features-filter.service */ 81406);
var organisation_1 = __webpack_require__(/*! @placeos/organisation */ 2510);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @angular/material/bottom-sheet */ 15244);
var i2 = __webpack_require__(/*! ../features-filter.service */ 81406);
var i3 = __webpack_require__(/*! @placeos/events */ 40569);
var i4 = __webpack_require__(/*! @placeos/organisation */ 2510);
var i5 = __webpack_require__(/*! @angular/common */ 60316);
var i6 = __webpack_require__(/*! @angular/material/form-field */ 24950);
var i7 = __webpack_require__(/*! @angular/material/core */ 74646);
var i8 = __webpack_require__(/*! @angular/material/select */ 25175);
var i9 = __webpack_require__(/*! @angular/material/checkbox */ 97024);
var i10 = __webpack_require__(/*! ../../../../../../libs/components/src/lib/icon.component */ 69434);
var i11 = __webpack_require__(/*! @angular/forms */ 34456);
var i12 = __webpack_require__(/*! ../../../../../../libs/form-fields/src/lib/date-field.component */ 19608);
var i13 = __webpack_require__(/*! ../../../../../../libs/form-fields/src/lib/duration-field.component */ 83476);
var i14 = __webpack_require__(/*! ../../../../../../libs/form-fields/src/lib/time-field.component */ 81413);
var _c0 = ["filter-space", ""];
var _c1 = function _c1() {
  return {
    standalone: true
  };
};
function FilterSpaceComponent_form_1_label_14_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "label", 14);
    i0.ɵɵtext(1, " Location ");
    i0.ɵɵelementEnd();
  }
}
function FilterSpaceComponent_form_1_mat_form_field_16_mat_option_3_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "mat-option", 32);
    i0.ɵɵtext(1);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var bld_r4 = ctx.$implicit;
    i0.ɵɵproperty("value", bld_r4);
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", bld_r4.display_name || bld_r4.name, " ");
  }
}
function FilterSpaceComponent_form_1_mat_form_field_16_Template(rf, ctx) {
  if (rf & 1) {
    var _r3 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "mat-form-field", 29)(1, "mat-select", 30);
    i0.ɵɵpipe(2, "async");
    i0.ɵɵlistener("ngModelChange", function FilterSpaceComponent_form_1_mat_form_field_16_Template_mat_select_ngModelChange_1_listener($event) {
      i0.ɵɵrestoreView(_r3);
      var ctx_r1 = i0.ɵɵnextContext(2);
      return i0.ɵɵresetView(ctx_r1.setBuilding($event));
    });
    i0.ɵɵtemplate(3, FilterSpaceComponent_form_1_mat_form_field_16_mat_option_3_Template, 2, 2, "mat-option", 31);
    i0.ɵɵpipe(4, "async");
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngModel", i0.ɵɵpipeBind1(2, 3, ctx_r1.building))("ngModelOptions", i0.ɵɵpureFunction0(7, _c1));
    i0.ɵɵadvance(2);
    i0.ɵɵproperty("ngForOf", i0.ɵɵpipeBind1(4, 5, ctx_r1.buildings));
  }
}
function FilterSpaceComponent_form_1_div_43_Template(rf, ctx) {
  if (rf & 1) {
    var _r5 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div")(1, "div", 33)(2, "span");
    i0.ɵɵtext(3);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(4, "mat-checkbox", 34);
    i0.ɵɵtwoWayListener("ngModelChange", function FilterSpaceComponent_form_1_div_43_Template_mat_checkbox_ngModelChange_4_listener($event) {
      var feature_r6 = i0.ɵɵrestoreView(_r5).$implicit;
      i0.ɵɵtwoWayBindingSet(feature_r6.value, $event) || (feature_r6.value = $event);
      return i0.ɵɵresetView($event);
    });
    i0.ɵɵlistener("change", function FilterSpaceComponent_form_1_div_43_Template_mat_checkbox_change_4_listener() {
      i0.ɵɵrestoreView(_r5);
      var ctx_r1 = i0.ɵɵnextContext(2);
      return i0.ɵɵresetView(ctx_r1.getSelectedFeatures());
    });
    i0.ɵɵelementEnd()()();
  }
  if (rf & 2) {
    var feature_r6 = ctx.$implicit;
    i0.ɵɵadvance(3);
    i0.ɵɵtextInterpolate1(" ", feature_r6.name, "");
    i0.ɵɵadvance();
    i0.ɵɵtwoWayProperty("ngModel", feature_r6.value);
    i0.ɵɵproperty("ngModelOptions", i0.ɵɵpureFunction0(3, _c1));
  }
}
function FilterSpaceComponent_form_1_Template(rf, ctx) {
  if (rf & 1) {
    var _r1 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "form", 2)(1, "section", 3)(2, "div", 4)(3, "div", 5)(4, "button", 6);
    i0.ɵɵlistener("click", function FilterSpaceComponent_form_1_Template_button_click_4_listener() {
      i0.ɵɵrestoreView(_r1);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.closeModal());
    });
    i0.ɵɵelementStart(5, "app-icon", 7);
    i0.ɵɵtext(6, "close");
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(7, "span", 8);
    i0.ɵɵtext(8, " Space Filters");
    i0.ɵɵelementEnd()()()();
    i0.ɵɵelementStart(9, "section", 9)(10, "div", 4)(11, "div", 10);
    i0.ɵɵtext(12, "Details");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(13, "div", 11);
    i0.ɵɵtemplate(14, FilterSpaceComponent_form_1_label_14_Template, 2, 0, "label", 12);
    i0.ɵɵpipe(15, "async");
    i0.ɵɵtemplate(16, FilterSpaceComponent_form_1_mat_form_field_16_Template, 5, 8, "mat-form-field", 13);
    i0.ɵɵpipe(17, "async");
    i0.ɵɵelementStart(18, "div", 11)(19, "label", 14);
    i0.ɵɵtext(20, " Date ");
    i0.ɵɵelementEnd();
    i0.ɵɵelement(21, "a-date-field", 15);
    i0.ɵɵelementStart(22, "div", 16)(23, "div", 17)(24, "label", 14);
    i0.ɵɵtext(25, " Start Time* ");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(26, "a-time-field", 18);
    i0.ɵɵlistener("ngModelChange", function FilterSpaceComponent_form_1_Template_a_time_field_ngModelChange_26_listener($event) {
      i0.ɵɵrestoreView(_r1);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.form.patchValue({
        date: $event
      }));
    });
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(27, "div", 19)(28, "label", 14);
    i0.ɵɵtext(29, " End Time* ");
    i0.ɵɵelementEnd();
    i0.ɵɵelement(30, "a-duration-field", 20);
    i0.ɵɵelementEnd()()()()()();
    i0.ɵɵelementStart(31, "section", 9)(32, "div", 4)(33, "div", 10);
    i0.ɵɵtext(34, "Favourites");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(35, "div", 21)(36, "span");
    i0.ɵɵtext(37, "Only show favourite rooms");
    i0.ɵɵelementEnd();
    i0.ɵɵelement(38, "mat-checkbox", 22);
    i0.ɵɵelementEnd()()();
    i0.ɵɵelementStart(39, "section", 23)(40, "div", 24)(41, "div", 10);
    i0.ɵɵtext(42, "Facilities");
    i0.ɵɵelementEnd();
    i0.ɵɵtemplate(43, FilterSpaceComponent_form_1_div_43_Template, 5, 4, "div", 25);
    i0.ɵɵpipe(44, "async");
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(45, "section", 26)(46, "button", 27);
    i0.ɵɵlistener("click", function FilterSpaceComponent_form_1_Template_button_click_46_listener() {
      i0.ɵɵrestoreView(_r1);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.applyFilters());
    });
    i0.ɵɵelementStart(47, "span", 28);
    i0.ɵɵtext(48, "Apply Filters");
    i0.ɵɵelementEnd()()()();
  }
  if (rf & 2) {
    var tmp_2_0;
    var tmp_3_0;
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵproperty("formGroup", ctx_r1.form);
    i0.ɵɵadvance(14);
    i0.ɵɵproperty("ngIf", ((tmp_2_0 = i0.ɵɵpipeBind1(15, 11, ctx_r1.buildings)) == null ? null : tmp_2_0.length) > 1);
    i0.ɵɵadvance(2);
    i0.ɵɵproperty("ngIf", ((tmp_3_0 = i0.ɵɵpipeBind1(17, 13, ctx_r1.buildings)) == null ? null : tmp_3_0.length) > 1);
    i0.ɵɵadvance(5);
    i0.ɵɵproperty("from", ctx_r1.minDate);
    i0.ɵɵadvance(5);
    i0.ɵɵproperty("ngModel", ctx_r1.form == null ? null : ctx_r1.form.value.date)("ngModelOptions", i0.ɵɵpureFunction0(17, _c1));
    i0.ɵɵadvance(4);
    i0.ɵɵproperty("time", ctx_r1.form == null ? null : ctx_r1.form.value.date)("max", 10 * 60)("min", 60)("step", 60);
    i0.ɵɵadvance(13);
    i0.ɵɵproperty("ngForOf", i0.ɵɵpipeBind1(44, 15, ctx_r1.features$));
  }
}
var FilterSpaceComponent = /*#__PURE__*/function () {
  function FilterSpaceComponent(data, _bottomsheetRef, _featuresFilterService, _state, _org) {
    var _this = this;
    _classCallCheck(this, FilterSpaceComponent);
    this.data = data;
    this._bottomsheetRef = _bottomsheetRef;
    this._featuresFilterService = _featuresFilterService;
    this._state = _state;
    this._org = _org;
    this.buildings = this._org.building_list;
    this.building = this._org.active_building;
    this.minDate = new Date();
    this.setBuilding = function (b) {
      return _this._org.building = b;
    };
  }
  return _createClass(FilterSpaceComponent, [{
    key: "ngOnInit",
    value: function ngOnInit() {
      this.features$ = this._featuresFilterService.features$;
    }
  }, {
    key: "form",
    get: function get() {
      return this._state.form;
    }
  }, {
    key: "applyFilters",
    value: function applyFilters() {
      this._bottomsheetRef.dismiss(this.form);
      this._featuresFilterService.applyFilter();
    }
  }, {
    key: "getSelectedFeatures",
    value: function getSelectedFeatures() {
      this._featuresFilterService.getSelectedFeatures();
    }
  }, {
    key: "closeModal",
    value: function closeModal() {
      this._bottomsheetRef.dismiss();
    }
  }]);
}();
_FilterSpaceComponent = FilterSpaceComponent;
_FilterSpaceComponent.ɵfac = function FilterSpaceComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _FilterSpaceComponent)(i0.ɵɵdirectiveInject(bottom_sheet_1.MAT_BOTTOM_SHEET_DATA), i0.ɵɵdirectiveInject(i1.MatBottomSheetRef), i0.ɵɵdirectiveInject(i2.FeaturesFilterService), i0.ɵɵdirectiveInject(i3.EventFormService), i0.ɵɵdirectiveInject(i4.OrganisationService));
};
_FilterSpaceComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _FilterSpaceComponent,
  selectors: [["", "filter-space", ""]],
  attrs: _c0,
  decls: 2,
  vars: 1,
  consts: [[1, "flex", "flex-1", "flex-col", "z-0", "m-0", "min-h-[800px]", "overflow-y-auto"], [3, "formGroup", 4, "ngIf"], [3, "formGroup"], [1, "flex", "flex-col", "border-b", "border-base-200", "py-5", "items-center"], [1, "flex", "flex-col", "w-[calc(100%-2rem)]", "max-w-[22.5rem]", "self-center"], [1, "flex", "flex-row", "items-center"], ["icon", "", "matRipple", "", 3, "click"], [1, "flex", "items-center", "justify-center", "text-3xl", "text-gray-700"], [1, "flex", "items-center", "text-xl", "font-bold", "ml-6"], [1, "flex", "flex-col", "border-b", "border-base-200", "items-center"], [1, "my-2", "text-lg"], [1, "flex", "flex-col"], ["class", "text-sm font-bold text-gray-700 mb-1", 4, "ngIf"], ["overlay", "", "buildings", "", "class", "w-full", "appearance", "outline", 4, "ngIf"], [1, "text-sm", "font-bold", "text-gray-700", "mb-1"], ["formControlName", "date", 3, "from"], [1, "flex", "flex-row", "space-x-2", "w-full"], [1, "flex", "flex-col", "flex-1", "w-1/3"], [3, "ngModelChange", "ngModel", "ngModelOptions"], [1, "flex", "flex-col", "flex-1", "w-1/3", "ml-auto"], ["formControlName", "duration", 3, "time", "max", "min", "step"], [1, "flex", "flex-row", "mb-2"], [1, "ml-auto"], [1, "flex", "flex-col", "border-base-200"], [1, "w-[calc(100%-2rem)]", "max-w-[22.5rem]", "mx-auto"], [4, "ngFor", "ngForOf"], [1, "flex", "flex-col", "py-3", "mt-5", "border-t", "border-base-200", "top-box-shadow", "items-center", "justify-center"], ["btn", "", "matRipple", "", "type", "submit", 1, "filter-button", "text-sm", "bg-secondary", "border-secondary", "min-w-[300px]", "max-w-[calc(100%", "-", "2rem)]", "mx-auto", "text-center", 3, "click"], [1, ""], ["overlay", "", "buildings", "", "appearance", "outline", 1, "w-full"], ["placeholder", "Select Building...", 3, "ngModelChange", "ngModel", "ngModelOptions"], [3, "value", 4, "ngFor", "ngForOf"], [3, "value"], [1, "flex", "flex-row", "mb-1"], [1, "ml-auto", "checkbox", 3, "ngModelChange", "change", "ngModel", "ngModelOptions"]],
  template: function FilterSpaceComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵelementStart(0, "div", 0);
      i0.ɵɵtemplate(1, FilterSpaceComponent_form_1_Template, 49, 18, "form", 1);
      i0.ɵɵelementEnd();
    }
    if (rf & 2) {
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", ctx.form);
    }
  },
  dependencies: [i5.NgForOf, i5.NgIf, i6.MatFormField, i7.MatOption, i8.MatSelect, i7.MatRipple, i9.MatCheckbox, i10.IconComponent, i11.ɵNgNoValidate, i11.NgControlStatus, i11.NgControlStatusGroup, i11.NgModel, i11.FormGroupDirective, i11.FormControlName, i12.DateFieldComponent, i13.DurationFieldComponent, i14.TimeFieldComponent, i5.AsyncPipe]
});
exports.FilterSpaceComponent = FilterSpaceComponent;

/***/ }),

/***/ 37365:
/*!***************************************************************************************!*\
  !*** ./apps/outlook-addin/src/app/rooms/find-space-item/find-space-item.component.ts ***!
  \***************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _FindSpaceItemComponent;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.FindSpaceItemComponent = void 0;
var core_1 = __webpack_require__(/*! @angular/core */ 37580);
var spaces_1 = __webpack_require__(/*! @placeos/spaces */ 44855);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @angular/material/core */ 74646);
var i2 = __webpack_require__(/*! ../../../../../../libs/components/src/lib/icon.component */ 69434);
var FindSpaceItemComponent = /*#__PURE__*/_createClass(function FindSpaceItemComponent() {
  var _this = this;
  _classCallCheck(this, FindSpaceItemComponent);
  this.selected = false;
  this.selectedChange = new core_1.EventEmitter();
  this.toggleSelected = function () {
    return _this.selectedChange.emit(!_this.selected);
  };
});
_FindSpaceItemComponent = FindSpaceItemComponent;
_FindSpaceItemComponent.ɵfac = function FindSpaceItemComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _FindSpaceItemComponent)();
};
_FindSpaceItemComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _FindSpaceItemComponent,
  selectors: [["find-space-item"]],
  inputs: {
    space: "space",
    selected: "selected"
  },
  outputs: {
    selectedChange: "selectedChange"
  },
  decls: 11,
  vars: 7,
  consts: [["mat-ripple", "", 1, "flex", "flex-col", "bg-base-100", "p-4", "my-2", "shadow", "w-[375px]", "max-w-[calc(100%-2rem)]", "mx-auto", "rounded", "space-y-4", 3, "click"], [1, "flex", "flex-row", "w-full", "items-center", "space-x-2"], [1, "text-lg"]],
  template: function FindSpaceItemComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵelementStart(0, "button", 0);
      i0.ɵɵlistener("click", function FindSpaceItemComponent_Template_button_click_0_listener() {
        return ctx.toggleSelected();
      });
      i0.ɵɵelementStart(1, "div", 1)(2, "app-icon", 2);
      i0.ɵɵtext(3, "meeting_room");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(4, "div");
      i0.ɵɵtext(5);
      i0.ɵɵelementEnd()();
      i0.ɵɵelementStart(6, "div", 1)(7, "app-icon", 2);
      i0.ɵɵtext(8, "group");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(9, "div");
      i0.ɵɵtext(10);
      i0.ɵɵelementEnd()()();
    }
    if (rf & 2) {
      i0.ɵɵclassProp("bg-primary", ctx.selected)("text-white", ctx.selected);
      i0.ɵɵadvance(5);
      i0.ɵɵtextInterpolate2(" ", (ctx.space == null ? null : ctx.space.level == null ? null : ctx.space.level.display_name) || (ctx.space == null ? null : ctx.space.level == null ? null : ctx.space.level.name), ", ", (ctx.space == null ? null : ctx.space.display_name) || (ctx.space == null ? null : ctx.space.name), " ");
      i0.ɵɵadvance(5);
      i0.ɵɵtextInterpolate1("", (ctx.space == null ? null : ctx.space.capacity) || 0, " People");
    }
  },
  dependencies: [i1.MatRipple, i2.IconComponent]
});
exports.FindSpaceItemComponent = FindSpaceItemComponent;

/***/ }),

/***/ 1059:
/*!*****************************************************************************!*\
  !*** ./apps/outlook-addin/src/app/rooms/find-space/find-space.component.ts ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _regeneratorRuntime = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/regeneratorRuntime.js */ 8698)["default"]);
var _asyncToGenerator = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/asyncToGenerator.js */ 95386)["default"]);
var _toConsumableArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/toConsumableArray.js */ 86033)["default"]);
var _slicedToArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/slicedToArray.js */ 6282)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _callSuper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/callSuper.js */ 8513)["default"]);
var _inherits = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/inherits.js */ 58160)["default"]);
var _FindSpaceComponent;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.FindSpaceComponent = void 0;
var bottom_sheet_1 = __webpack_require__(/*! @angular/material/bottom-sheet */ 15244);
var events_1 = __webpack_require__(/*! @placeos/events */ 40569);
var spaces_1 = __webpack_require__(/*! @placeos/spaces */ 44855);
var organisation_1 = __webpack_require__(/*! @placeos/organisation */ 2510);
var rxjs_1 = __webpack_require__(/*! rxjs */ 15681);
var operators_1 = __webpack_require__(/*! rxjs/operators */ 97303);
var filter_space_component_1 = __webpack_require__(/*! ../filter-space/filter-space.component */ 26525);
var features_filter_service_1 = __webpack_require__(/*! ../features-filter.service */ 81406);
var map_service_1 = __webpack_require__(/*! ../map.service */ 77948);
var room_confirm_service_1 = __webpack_require__(/*! ../room-confirm.service */ 9020);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var router_1 = __webpack_require__(/*! @angular/router */ 95072);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @angular/material/bottom-sheet */ 15244);
var i2 = __webpack_require__(/*! @placeos/organisation */ 2510);
var i3 = __webpack_require__(/*! @placeos/spaces */ 44855);
var i4 = __webpack_require__(/*! @placeos/events */ 40569);
var i5 = __webpack_require__(/*! ../features-filter.service */ 81406);
var i6 = __webpack_require__(/*! ../map.service */ 77948);
var i7 = __webpack_require__(/*! ../room-confirm.service */ 9020);
var i8 = __webpack_require__(/*! @angular/router */ 95072);
var i9 = __webpack_require__(/*! @angular/common */ 60316);
var i10 = __webpack_require__(/*! @angular/material/form-field */ 24950);
var i11 = __webpack_require__(/*! @angular/material/icon */ 93840);
var i12 = __webpack_require__(/*! @angular/material/progress-spinner */ 41134);
var i13 = __webpack_require__(/*! @angular/material/core */ 74646);
var i14 = __webpack_require__(/*! @angular/material/select */ 25175);
var i15 = __webpack_require__(/*! ../../../../../../libs/components/src/lib/interactive-map.component */ 24918);
var i16 = __webpack_require__(/*! @angular/material/button-toggle */ 59864);
var i17 = __webpack_require__(/*! @angular/forms */ 34456);
var i18 = __webpack_require__(/*! ../find-space-item/find-space-item.component */ 37365);
function FindSpaceComponent_span_14_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "span");
    i0.ɵɵtext(1);
    i0.ɵɵpipe(2, "async");
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" (", i0.ɵɵpipeBind1(2, 1, ctx_r1.selected_features$).length, " applied) ");
  }
}
function FindSpaceComponent_ng_container_33_ng_container_1_div_1_find_space_item_1_Template(rf, ctx) {
  if (rf & 1) {
    var _r3 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "find-space-item", 29);
    i0.ɵɵlistener("selectedChange", function FindSpaceComponent_ng_container_33_ng_container_1_div_1_find_space_item_1_Template_find_space_item_selectedChange_0_listener($event) {
      var space_r4 = i0.ɵɵrestoreView(_r3).$implicit;
      var ctx_r1 = i0.ɵɵnextContext(4);
      return i0.ɵɵresetView(ctx_r1.handleBookEvent(space_r4, $event));
    });
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var space_r4 = ctx.$implicit;
    var ctx_r1 = i0.ɵɵnextContext(4);
    i0.ɵɵproperty("space", space_r4)("selected", ctx_r1.book_space[space_r4.id]);
  }
}
function FindSpaceComponent_ng_container_33_ng_container_1_div_1_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div");
    i0.ɵɵtemplate(1, FindSpaceComponent_ng_container_33_ng_container_1_div_1_find_space_item_1_Template, 1, 2, "find-space-item", 28);
    i0.ɵɵpipe(2, "async");
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext(3);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngForOf", i0.ɵɵpipeBind1(2, 1, ctx_r1.spaces$));
  }
}
function FindSpaceComponent_ng_container_33_ng_container_1_div_2_div_1_mat_option_6_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "mat-option", 34);
    i0.ɵɵtext(1);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var map_r6 = ctx.$implicit;
    i0.ɵɵproperty("value", map_r6);
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate(map_r6.level);
  }
}
function FindSpaceComponent_ng_container_33_ng_container_1_div_2_div_1_Template(rf, ctx) {
  if (rf & 1) {
    var _r5 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div")(1, "mat-form-field", 32)(2, "mat-select", 33);
    i0.ɵɵtwoWayListener("ngModelChange", function FindSpaceComponent_ng_container_33_ng_container_1_div_2_div_1_Template_mat_select_ngModelChange_2_listener($event) {
      i0.ɵɵrestoreView(_r5);
      var ctx_r1 = i0.ɵɵnextContext(4);
      i0.ɵɵtwoWayBindingSet(ctx_r1.selected_level, $event) || (ctx_r1.selected_level = $event);
      return i0.ɵɵresetView($event);
    });
    i0.ɵɵlistener("ngModelChange", function FindSpaceComponent_ng_container_33_ng_container_1_div_2_div_1_Template_mat_select_ngModelChange_2_listener($event) {
      i0.ɵɵrestoreView(_r5);
      var ctx_r1 = i0.ɵɵnextContext(4);
      return i0.ɵɵresetView(ctx_r1.updateSelectedLevel($event));
    });
    i0.ɵɵelementStart(3, "mat-option", 34);
    i0.ɵɵpipe(4, "async");
    i0.ɵɵtext(5, "All Levels");
    i0.ɵɵelementEnd();
    i0.ɵɵtemplate(6, FindSpaceComponent_ng_container_33_ng_container_1_div_2_div_1_mat_option_6_Template, 2, 2, "mat-option", 35);
    i0.ɵɵpipe(7, "async");
    i0.ɵɵelementEnd()()();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext(4);
    i0.ɵɵadvance(2);
    i0.ɵɵtwoWayProperty("ngModel", ctx_r1.selected_level);
    i0.ɵɵadvance();
    i0.ɵɵproperty("value", i0.ɵɵpipeBind1(4, 3, ctx_r1.maps_list$));
    i0.ɵɵadvance(3);
    i0.ɵɵproperty("ngForOf", i0.ɵɵpipeBind1(7, 5, ctx_r1.maps_list$));
  }
}
function FindSpaceComponent_ng_container_33_ng_container_1_div_2_div_3_div_1_div_1_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 39);
    i0.ɵɵelement(1, "interactive-map", 40);
    i0.ɵɵpipe(2, "async");
    i0.ɵɵpipe(3, "async");
    i0.ɵɵpipe(4, "async");
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var map_r7 = ctx.$implicit;
    var ctx_r1 = i0.ɵɵnextContext(6);
    i0.ɵɵadvance();
    i0.ɵɵproperty("src", map_r7 == null ? null : map_r7.map_id)("styles", i0.ɵɵpipeBind1(2, 4, ctx_r1.map_styles$))("features", i0.ɵɵpipeBind1(3, 6, ctx_r1.map_features$))("actions", i0.ɵɵpipeBind1(4, 8, ctx_r1.map_actions$));
  }
}
function FindSpaceComponent_ng_container_33_ng_container_1_div_2_div_3_div_1_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div");
    i0.ɵɵtemplate(1, FindSpaceComponent_ng_container_33_ng_container_1_div_2_div_3_div_1_div_1_Template, 5, 10, "div", 38);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext(5);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngForOf", ctx_r1.selected_level);
  }
}
function FindSpaceComponent_ng_container_33_ng_container_1_div_2_div_3_div_2_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 41);
    i0.ɵɵelement(1, "interactive-map", 40);
    i0.ɵɵpipe(2, "async");
    i0.ɵɵpipe(3, "async");
    i0.ɵɵpipe(4, "async");
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext(5);
    i0.ɵɵadvance();
    i0.ɵɵproperty("src", ctx_r1.selected_level == null ? null : ctx_r1.selected_level.map_id)("styles", i0.ɵɵpipeBind1(2, 4, ctx_r1.map_styles$))("features", i0.ɵɵpipeBind1(3, 6, ctx_r1.map_features$))("actions", i0.ɵɵpipeBind1(4, 8, ctx_r1.map_actions$));
  }
}
function FindSpaceComponent_ng_container_33_ng_container_1_div_2_div_3_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 36);
    i0.ɵɵtemplate(1, FindSpaceComponent_ng_container_33_ng_container_1_div_2_div_3_div_1_Template, 2, 1, "div", 12)(2, FindSpaceComponent_ng_container_33_ng_container_1_div_2_div_3_div_2_Template, 5, 10, "div", 37);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext(4);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", ctx_r1.selected_level == null ? null : ctx_r1.selected_level.length);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", !(ctx_r1.selected_level == null ? null : ctx_r1.selected_level.length));
  }
}
function FindSpaceComponent_ng_container_33_ng_container_1_div_2_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 30);
    i0.ɵɵtemplate(1, FindSpaceComponent_ng_container_33_ng_container_1_div_2_div_1_Template, 8, 7, "div", 12);
    i0.ɵɵpipe(2, "async");
    i0.ɵɵtemplate(3, FindSpaceComponent_ng_container_33_ng_container_1_div_2_div_3_Template, 3, 2, "div", 31);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var tmp_5_0;
    var ctx_r1 = i0.ɵɵnextContext(3);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", ((tmp_5_0 = i0.ɵɵpipeBind1(2, 2, ctx_r1.maps_list$)) == null ? null : tmp_5_0.length) > 1);
    i0.ɵɵadvance(2);
    i0.ɵɵproperty("ngIf", ctx_r1.selected_level);
  }
}
function FindSpaceComponent_ng_container_33_ng_container_1_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵtemplate(1, FindSpaceComponent_ng_container_33_ng_container_1_div_1_Template, 3, 3, "div", 12)(2, FindSpaceComponent_ng_container_33_ng_container_1_div_2_Template, 4, 4, "div", 26);
    i0.ɵɵpipe(3, "async");
    i0.ɵɵelementStart(4, "p", 27);
    i0.ɵɵtext(5, " End of available spaces list ");
    i0.ɵɵelementEnd();
    i0.ɵɵelementContainerEnd();
  }
  if (rf & 2) {
    var tmp_5_0;
    var ctx_r1 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", ctx_r1.space_view == "listView");
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", ctx_r1.space_view == "mapView" && ((tmp_5_0 = i0.ɵɵpipeBind1(3, 2, ctx_r1.map_features$)) == null ? null : tmp_5_0.length) > 0);
  }
}
function FindSpaceComponent_ng_container_33_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵtemplate(1, FindSpaceComponent_ng_container_33_ng_container_1_Template, 6, 4, "ng-container", 24);
    i0.ɵɵpipe(2, "async");
    i0.ɵɵelementContainerEnd();
  }
  if (rf & 2) {
    var tmp_3_0;
    var ctx_r1 = i0.ɵɵnextContext();
    var empty_state_r8 = i0.ɵɵreference(38);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", ((tmp_3_0 = i0.ɵɵpipeBind1(2, 2, ctx_r1.spaces$)) == null ? null : tmp_3_0.length) > 0)("ngIfElse", empty_state_r8);
  }
}
function FindSpaceComponent_ng_template_35_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 42);
    i0.ɵɵelement(1, "mat-spinner", 43);
    i0.ɵɵelementStart(2, "p");
    i0.ɵɵtext(3, "Retrieving available spaces...");
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    i0.ɵɵadvance();
    i0.ɵɵproperty("diameter", 32);
  }
}
function FindSpaceComponent_ng_template_37_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 44)(1, "p");
    i0.ɵɵtext(2, " No available spaces for selected time, capacity or level(s) ");
    i0.ɵɵelementEnd()();
  }
}
function FindSpaceComponent_div_40_Template(rf, ctx) {
  if (rf & 1) {
    var _r9 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div")(1, "button", 45);
    i0.ɵɵlistener("click", function FindSpaceComponent_div_40_Template_button_click_1_listener() {
      i0.ɵɵrestoreView(_r9);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.openRoomDetails());
    });
    i0.ɵɵelementStart(2, "span", 46);
    i0.ɵɵtext(3, "View Room");
    i0.ɵɵelementEnd()()();
  }
}
var FindSpaceComponent = /*#__PURE__*/function (_common_1$AsyncHandle) {
  function FindSpaceComponent(_bottomSheet, _org, _spaces, _state, _featuresFilterService, _mapService, _roomConfirmService, _router) {
    var _this;
    _classCallCheck(this, FindSpaceComponent);
    _this = _callSuper(this, FindSpaceComponent);
    _this._bottomSheet = _bottomSheet;
    _this._org = _org;
    _this._spaces = _spaces;
    _this._state = _state;
    _this._featuresFilterService = _featuresFilterService;
    _this._mapService = _mapService;
    _this._roomConfirmService = _roomConfirmService;
    _this._router = _router;
    _this.filtered_spaces = [];
    _this.show_room_details$ = (0, rxjs_1.of)(false);
    _this._map_features = new rxjs_1.BehaviorSubject(null);
    _this.map_actions$ = null;
    _this.map_styles$ = null;
    _this.book_space = {};
    _this.space_list = [];
    _this.quick_capacities = [{
      name: 'Any Capacity',
      value: 0
    }, {
      name: 'Small (1 - 4)',
      value: 1
    }, {
      name: 'Medium (5 - 12)',
      value: 5
    }, {
      name: 'Large (13 - 32)',
      value: 13
    }, {
      name: 'Huge (32+)',
      value: 33
    }];
    _this.buildings = _this._org.building_list;
    _this.building = _this._org.active_building;
    _this.levels = (0, rxjs_1.combineLatest)([_this.building, _this._state.options]).pipe((0, operators_1.filter)(function (_ref) {
      var _ref2 = _slicedToArray(_ref, 1),
        _ = _ref2[0];
      return !!_;
    }), (0, operators_1.map)(function (_ref3) {
      var _ref4 = _slicedToArray(_ref3, 1),
        bld = _ref4[0];
      return [{
        id: _this._org.building.id,
        name: 'All Levels'
      }].concat(_toConsumableArray(_this._org.levelsForBuilding(bld)));
    }));
    _this.loading = _this._state.loading;
    _this.options = _this._state.options;
    _this.spaces$ = _this._state.available_spaces;
    _this.features = _this._spaces.features;
    _this.setBuilding = function (b) {
      return _this._org.building = b;
    };
    _this.setOptions = function (o) {
      return _this._state.setOptions(o);
    };
    return _this;
  }
  _inherits(FindSpaceComponent, _common_1$AsyncHandle);
  return _createClass(FindSpaceComponent, [{
    key: "form",
    get: function get() {
      return this._state.form;
    }
  }, {
    key: "ngOnInit",
    value: function () {
      var _ngOnInit = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
        var _this$selected_featur,
          _this2 = this,
          _this$_mapService$map;
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              this.space_view = 'listView';
              this.selected_features$ = this._featuresFilterService.selected_features$;
              this._state.setView('find');
              this.setTimeChips();
              _context.next = 6;
              return this._org.initialised.pipe((0, operators_1.first)(function (_) {
                return !!_;
              })).toPromise();
            case 6:
              _context.next = 8;
              return this._spaces.initialised.pipe((0, operators_1.first)(function (_) {
                return !!_;
              })).toPromise();
            case 8:
              _context.next = 10;
              return this._state.available_spaces.pipe((0, operators_1.take)(1)).toPromise();
            case 10:
              this.setBuilding(this._org.building);
              this.book_space = {};
              this.subscription('features', (_this$selected_featur = this.selected_features$) === null || _this$selected_featur === void 0 ? void 0 : _this$selected_featur.subscribe(function (v) {
                return _this2.setOptions({
                  features: v || []
                });
              }));
              _context.next = 15;
              return this._mapService.locateSpaces(this.spaces$);
            case 15:
              this.locatable_spaces$ = this._mapService.locatable_spaces$;
              this.maps_list$ = (_this$_mapService$map = this._mapService.maps_list$) === null || _this$_mapService$map === void 0 ? void 0 : _this$_mapService$map.pipe((0, operators_1.tap)(function (maps) {
                return _this2.selected_level = maps;
              }));
              _context.next = 19;
              return this._mapService.features_loaded$.pipe((0, operators_1.first)(function (_) {
                return !!_;
              })).toPromise();
            case 19:
              this.applyMapDecorations();
              this._map_features.next(this._mapService.map_features);
              this.map_features$ = this._map_features.asObservable();
              this.map_actions$ = this._mapService.map_actions$;
            case 23:
            case "end":
              return _context.stop();
          }
        }, _callee, this);
      }));
      function ngOnInit() {
        return _ngOnInit.apply(this, arguments);
      }
      return ngOnInit;
    }()
  }, {
    key: "handleBookEvent",
    value: function handleBookEvent(space) {
      var book = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;
      this.book_space[space.id] = book;
      this._roomConfirmService.book_space = this.book_space;
      this._roomConfirmService.handleBookEvent(space, book);
      this.show_room_details$ = (0, rxjs_1.of)(true);
      this._roomConfirmService.updateSelectedSpace(space);
    }
  }, {
    key: "openFilter",
    value: function openFilter() {
      this.bottomSheetRef = this._bottomSheet.open(filter_space_component_1.FilterSpaceComponent, {
        data: this.buildings
      });
    }
  }, {
    key: "openRoomDetails",
    value: function openRoomDetails() {
      this._roomConfirmService.openRoomDetail(this.selected_space);
    }
  }, {
    key: "resetSpace",
    value: function resetSpace() {
      this.show_room_details$ = (0, rxjs_1.of)(false);
    }
  }, {
    key: "setTimeChips",
    value: function setTimeChips() {
      var _this$form, _this$form2, _this$form3;
      this.start_time$ = (0, rxjs_1.of)(new Date((_this$form = this.form) === null || _this$form === void 0 || (_this$form = _this$form.controls) === null || _this$form === void 0 || (_this$form = _this$form.date) === null || _this$form === void 0 ? void 0 : _this$form.value).toLocaleTimeString('en-US', {
        hour: 'numeric',
        minute: 'numeric',
        hour12: true
      }));
      this.duration_minutes = (_this$form2 = this.form) === null || _this$form2 === void 0 || (_this$form2 = _this$form2.controls) === null || _this$form2 === void 0 || (_this$form2 = _this$form2.duration) === null || _this$form2 === void 0 ? void 0 : _this$form2.value;
      var end = ((_this$form3 = this.form) === null || _this$form3 === void 0 || (_this$form3 = _this$form3.controls) === null || _this$form3 === void 0 || (_this$form3 = _this$form3.date) === null || _this$form3 === void 0 ? void 0 : _this$form3.value) + this.duration_minutes * 60 * 1000;
      this.end_time$ = (0, rxjs_1.of)(new Date(end).toLocaleTimeString('en-US', {
        hour: 'numeric',
        minute: 'numeric',
        hour12: true
      }));
    }
  }, {
    key: "updateSelectedLevel",
    value: function updateSelectedLevel(e) {
      var _this$selected_level;
      this.selected_level = e;
      if (!((_this$selected_level = this.selected_level) !== null && _this$selected_level !== void 0 && _this$selected_level.length)) {
        this.applyMapDecorations();
      }
    }
  }, {
    key: "applyMapDecorations",
    value: function applyMapDecorations() {
      var _this3 = this;
      this.timeout('init', function () {
        _this3.processFeature();
        _this3.processStyles();
      }, 1500);
    }
  }, {
    key: "processFeature",
    value: function processFeature() {
      this.map_features$ = this._mapService.map_features$;
    }
  }, {
    key: "processStyles",
    value: function processStyles() {
      this.map_styles$ = (0, rxjs_1.of)([this._mapService.style_map]);
    }
  }, {
    key: "closeModal",
    value: function closeModal() {
      this._router.navigate(['/book/spaces']);
      this._featuresFilterService.clearFilter();
    }
  }]);
}(common_1.AsyncHandler);
_FindSpaceComponent = FindSpaceComponent;
_FindSpaceComponent.ɵfac = function FindSpaceComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _FindSpaceComponent)(i0.ɵɵdirectiveInject(i1.MatBottomSheet), i0.ɵɵdirectiveInject(i2.OrganisationService), i0.ɵɵdirectiveInject(i3.SpacesService), i0.ɵɵdirectiveInject(i4.EventFormService), i0.ɵɵdirectiveInject(i5.FeaturesFilterService), i0.ɵɵdirectiveInject(i6.MapService), i0.ɵɵdirectiveInject(i7.RoomConfirmService), i0.ɵɵdirectiveInject(i8.Router));
};
_FindSpaceComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _FindSpaceComponent,
  selectors: [["find-space"]],
  features: [i0.ɵɵInheritDefinitionFeature],
  decls: 42,
  vars: 14,
  consts: [["load_state", ""], ["empty_state", ""], [1, "w-full", "h-full", "flex", "flex-1", "flex-col", "z-0", "bg-base-200", "overflow-auto"], [1, "flex", "flex-col", "py-5"], [1, "w-[calc(100%-2rem)]", "max-w-[375px]", "mx-auto"], [1, "flex", "flex-row", "items-center"], [3, "click"], [1, "flex", "items-center", "justify-center", "text-3xl", "text-gray-700"], [1, "flex", "items-center", "text-lg", "font-bold", "ml-6"], [1, "flex", "flex-row", "justify-between", "mt-3", "align-middle"], [1, "flex", "w-7/12", "justify-center"], ["btn", "", "matRipple", "", 1, "bg-base-200", "w-full", "h-9", "text-sm", "filter-button", 3, "click"], [4, "ngIf"], [1, "flex", "w-4/12"], ["aria-label", "Map or list view", 1, "flex", "w-full", "ml-auto", "mr-0", "border-none", 3, "ngModelChange", "change", "ngModel"], ["value", "mapView", 1, "flex", "bg-base-200", "w-1/2", "rounded", "justify-center", "items-center"], [1, "flex", "leading-9", "text-[0.875rem]"], ["value", "listView", 1, "flex", "bg-base-200", "w-1/2", "rounded", "text-sm", "justify-center", "items-center"], [1, "flex", "flex-row"], [1, "flex", "flex-row", "my-2", "border-t"], [1, "flex", "flex-col"], [1, "text-lg", "font-bold", "mt-3"], [1, "text-xs", "text-gray-500", "mt-1"], [1, "flex-1", "w-full", "bg-base-200"], [4, "ngIf", "ngIfElse"], [1, "flex", "flex-col", "py-1", "border-t", "border-base-200", "top-box-shadow", "items-center", "justify-center"], ["class", "text-center h-full", 4, "ngIf"], [1, "p-2", "text-sm", "text-center", "opacity-60"], ["class", "text-sm", 3, "space", "selected", "selectedChange", 4, "ngFor", "ngForOf"], [1, "text-sm", 3, "selectedChange", "space", "selected"], [1, "text-center", "h-full"], ["class", "m-6 max-w-screen relative", 4, "ngIf"], ["appearance", "outline", 1, "flex", "ml-auto", "m-3", "text-sm"], [3, "ngModelChange", "ngModel"], [3, "value"], [3, "value", 4, "ngFor", "ngForOf"], [1, "m-6", "max-w-screen", "relative"], ["class", "m-3 h-[24rem] max-w-screen relative", 4, "ngIf"], ["class", "m-3 h-[12rem] max-w-screen relative", 4, "ngFor", "ngForOf"], [1, "m-3", "h-[12rem]", "max-w-screen", "relative"], [1, "m-1", "p-1", "max-w-screen", 3, "src", "styles", "features", "actions"], [1, "m-3", "h-[24rem]", "max-w-screen", "relative"], [1, "h-full", "w-full", "flex", "flex-col", "items-center", "justify-center", "space-y-4", "my-3"], [3, "diameter"], [1, "h-full", "w-full", "flex", "flex-col", "items-center", "justify-center", "space-y-2", "p-2", "text-center", "my-6"], ["matRipple", "", "type", "submit", 1, "open-details-button", "bg-secondary", "border-secondary", "w-[300px]", "my-1", 3, "click"], [1, ""]],
  template: function FindSpaceComponent_Template(rf, ctx) {
    if (rf & 1) {
      var _r1 = i0.ɵɵgetCurrentView();
      i0.ɵɵelementStart(0, "div", 2)(1, "section", 3)(2, "div", 4)(3, "div", 5)(4, "button", 6);
      i0.ɵɵlistener("click", function FindSpaceComponent_Template_button_click_4_listener() {
        i0.ɵɵrestoreView(_r1);
        return i0.ɵɵresetView(ctx.closeModal());
      });
      i0.ɵɵelementStart(5, "mat-icon", 7);
      i0.ɵɵtext(6, "close");
      i0.ɵɵelementEnd()();
      i0.ɵɵelementStart(7, "span", 8);
      i0.ɵɵtext(8, " Find Space");
      i0.ɵɵelementEnd()();
      i0.ɵɵelementStart(9, "div", 9)(10, "div", 10)(11, "button", 11);
      i0.ɵɵlistener("click", function FindSpaceComponent_Template_button_click_11_listener() {
        i0.ɵɵrestoreView(_r1);
        return i0.ɵɵresetView(ctx.openFilter());
      });
      i0.ɵɵelementStart(12, "span");
      i0.ɵɵtext(13, "Filter");
      i0.ɵɵelementEnd();
      i0.ɵɵtemplate(14, FindSpaceComponent_span_14_Template, 3, 3, "span", 12);
      i0.ɵɵpipe(15, "async");
      i0.ɵɵelementEnd()();
      i0.ɵɵelementStart(16, "div", 13)(17, "mat-button-toggle-group", 14);
      i0.ɵɵtwoWayListener("ngModelChange", function FindSpaceComponent_Template_mat_button_toggle_group_ngModelChange_17_listener($event) {
        i0.ɵɵrestoreView(_r1);
        i0.ɵɵtwoWayBindingSet(ctx.space_view, $event) || (ctx.space_view = $event);
        return i0.ɵɵresetView($event);
      });
      i0.ɵɵlistener("change", function FindSpaceComponent_Template_mat_button_toggle_group_change_17_listener() {
        i0.ɵɵrestoreView(_r1);
        return i0.ɵɵresetView(ctx.resetSpace());
      });
      i0.ɵɵelementStart(18, "mat-button-toggle", 15)(19, "span", 16);
      i0.ɵɵtext(20, "Map");
      i0.ɵɵelementEnd()();
      i0.ɵɵelementStart(21, "mat-button-toggle", 17)(22, "span", 16);
      i0.ɵɵtext(23, "List");
      i0.ɵɵelementEnd()()()()();
      i0.ɵɵelement(24, "section", 18);
      i0.ɵɵelementStart(25, "section", 19)(26, "div", 20)(27, "span", 21);
      i0.ɵɵtext(28, " Results");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(29, "span", 22);
      i0.ɵɵtext(30);
      i0.ɵɵpipe(31, "async");
      i0.ɵɵelementEnd()()();
      i0.ɵɵelementStart(32, "div", 23);
      i0.ɵɵtemplate(33, FindSpaceComponent_ng_container_33_Template, 3, 4, "ng-container", 24);
      i0.ɵɵpipe(34, "async");
      i0.ɵɵtemplate(35, FindSpaceComponent_ng_template_35_Template, 4, 1, "ng-template", null, 0, i0.ɵɵtemplateRefExtractor)(37, FindSpaceComponent_ng_template_37_Template, 3, 0, "ng-template", null, 1, i0.ɵɵtemplateRefExtractor);
      i0.ɵɵelementEnd()();
      i0.ɵɵelementStart(39, "section", 25);
      i0.ɵɵtemplate(40, FindSpaceComponent_div_40_Template, 4, 0, "div", 12);
      i0.ɵɵpipe(41, "async");
      i0.ɵɵelementEnd()()();
    }
    if (rf & 2) {
      var tmp_2_0;
      var tmp_4_0;
      var load_state_r10 = i0.ɵɵreference(36);
      i0.ɵɵadvance(14);
      i0.ɵɵproperty("ngIf", (tmp_2_0 = i0.ɵɵpipeBind1(15, 6, ctx.selected_features$)) == null ? null : tmp_2_0.length);
      i0.ɵɵadvance(3);
      i0.ɵɵtwoWayProperty("ngModel", ctx.space_view);
      i0.ɵɵadvance(13);
      i0.ɵɵtextInterpolate1(" ", ((tmp_4_0 = i0.ɵɵpipeBind1(31, 8, ctx.spaces$)) == null ? null : tmp_4_0.length) || 0, " results found");
      i0.ɵɵadvance(3);
      i0.ɵɵproperty("ngIf", !i0.ɵɵpipeBind1(34, 10, ctx.loading))("ngIfElse", load_state_r10);
      i0.ɵɵadvance(7);
      i0.ɵɵproperty("ngIf", i0.ɵɵpipeBind1(41, 12, ctx.show_room_details$));
    }
  },
  dependencies: [i9.NgForOf, i9.NgIf, i10.MatFormField, i11.MatIcon, i12.MatProgressSpinner, i13.MatOption, i14.MatSelect, i13.MatRipple, i15.InteractiveMapComponent, i16.MatButtonToggleGroup, i16.MatButtonToggle, i17.NgControlStatus, i17.NgModel, i18.FindSpaceItemComponent, i9.AsyncPipe],
  styles: [".mat-button-toggle-appearance-standard[_ngcontent-%COMP%] {\n                height: 2.25rem;\n            }\n            .mat-button-toggle-appearance-standard\n[_ngcontent-%COMP%]   .mat-button-toggle-label-content[_ngcontent-%COMP%] {\n                line-height: 2.25rem;\n                font-size: 0.875rem;\n            }\n            .mat-button-toggle-label-content[_ngcontent-%COMP%] {\n                font-size: 0.875rem;\n            }\n            .mat-button-toggle-checked[_ngcontent-%COMP%] {\n                border: 1px solid var(--s);\n                border-radius: 5px;\n                box-shadow: none;\n            }\n            .mat-focus-indicator[_ngcontent-%COMP%] {\n                border: none;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZpbmQtc3BhY2UuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxlQUFlO1lBQ25CO1lBQ0E7O2dCQUVJLG9CQUFvQjtnQkFDcEIsbUJBQW1CO1lBQ3ZCO1lBQ0E7Z0JBQ0ksbUJBQW1CO1lBQ3ZCO1lBQ0E7Z0JBQ0ksMEJBQTBCO2dCQUMxQixrQkFBa0I7Z0JBQ2xCLGdCQUFnQjtZQUNwQjtZQUNBO2dCQUNJLFlBQVk7WUFDaEIiLCJmaWxlIjoiZmluZC1zcGFjZS5jb21wb25lbnQudHMiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIC5tYXQtYnV0dG9uLXRvZ2dsZS1hcHBlYXJhbmNlLXN0YW5kYXJkIHtcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDIuMjVyZW07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAubWF0LWJ1dHRvbi10b2dnbGUtYXBwZWFyYW5jZS1zdGFuZGFyZFxuICAgICAgICAgICAgICAgIC5tYXQtYnV0dG9uLXRvZ2dsZS1sYWJlbC1jb250ZW50IHtcbiAgICAgICAgICAgICAgICBsaW5lLWhlaWdodDogMi4yNXJlbTtcbiAgICAgICAgICAgICAgICBmb250LXNpemU6IDAuODc1cmVtO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLm1hdC1idXR0b24tdG9nZ2xlLWxhYmVsLWNvbnRlbnQge1xuICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMC44NzVyZW07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAubWF0LWJ1dHRvbi10b2dnbGUtY2hlY2tlZCB7XG4gICAgICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tcyk7XG4gICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNXB4O1xuICAgICAgICAgICAgICAgIGJveC1zaGFkb3c6IG5vbmU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAubWF0LWZvY3VzLWluZGljYXRvciB7XG4gICAgICAgICAgICAgICAgYm9yZGVyOiBub25lO1xuICAgICAgICAgICAgfVxuICAgICAgICAiXX0= */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2FwcHMvb3V0bG9vay1hZGRpbi9zcmMvYXBwL3Jvb21zL2ZpbmQtc3BhY2UvZmluZC1zcGFjZS5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLGVBQWU7WUFDbkI7WUFDQTs7Z0JBRUksb0JBQW9CO2dCQUNwQixtQkFBbUI7WUFDdkI7WUFDQTtnQkFDSSxtQkFBbUI7WUFDdkI7WUFDQTtnQkFDSSwwQkFBMEI7Z0JBQzFCLGtCQUFrQjtnQkFDbEIsZ0JBQWdCO1lBQ3BCO1lBQ0E7Z0JBQ0ksWUFBWTtZQUNoQjs7QUFFWixnekNBQWd6QyIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgLm1hdC1idXR0b24tdG9nZ2xlLWFwcGVhcmFuY2Utc3RhbmRhcmQge1xuICAgICAgICAgICAgICAgIGhlaWdodDogMi4yNXJlbTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC5tYXQtYnV0dG9uLXRvZ2dsZS1hcHBlYXJhbmNlLXN0YW5kYXJkXG4gICAgICAgICAgICAgICAgLm1hdC1idXR0b24tdG9nZ2xlLWxhYmVsLWNvbnRlbnQge1xuICAgICAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiAyLjI1cmVtO1xuICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMC44NzVyZW07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAubWF0LWJ1dHRvbi10b2dnbGUtbGFiZWwtY29udGVudCB7XG4gICAgICAgICAgICAgICAgZm9udC1zaXplOiAwLjg3NXJlbTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC5tYXQtYnV0dG9uLXRvZ2dsZS1jaGVja2VkIHtcbiAgICAgICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1zKTtcbiAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiA1cHg7XG4gICAgICAgICAgICAgICAgYm94LXNoYWRvdzogbm9uZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC5tYXQtZm9jdXMtaW5kaWNhdG9yIHtcbiAgICAgICAgICAgICAgICBib3JkZXI6IG5vbmU7XG4gICAgICAgICAgICB9XG4gICAgICAgICJdLCJzb3VyY2VSb290IjoiIn0= */"]
});
exports.FindSpaceComponent = FindSpaceComponent;

/***/ }),

/***/ 77948:
/*!*********************************************************!*\
  !*** ./apps/outlook-addin/src/app/rooms/map.service.ts ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _toConsumableArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/toConsumableArray.js */ 86033)["default"]);
var _regeneratorRuntime = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/regeneratorRuntime.js */ 8698)["default"]);
var _asyncToGenerator = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/asyncToGenerator.js */ 95386)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _callSuper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/callSuper.js */ 8513)["default"]);
var _inherits = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/inherits.js */ 58160)["default"]);
var _MapService;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.MapService = void 0;
var rxjs_1 = __webpack_require__(/*! rxjs */ 15681);
var operators_1 = __webpack_require__(/*! rxjs/operators */ 97303);
var components_1 = __webpack_require__(/*! @placeos/components */ 51588);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var bottom_sheet_1 = __webpack_require__(/*! @angular/material/bottom-sheet */ 15244);
var room_tile_component_1 = __webpack_require__(/*! ./room-tile/room-tile.component */ 91361);
var room_confirm_service_1 = __webpack_require__(/*! ./room-confirm.service */ 9020);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @angular/material/bottom-sheet */ 15244);
var i2 = __webpack_require__(/*! ./room-confirm.service */ 9020);
var MapService = /*#__PURE__*/function (_common_1$AsyncHandle) {
  function MapService(_bottomSheet, _roomConfirmService) {
    var _this;
    _classCallCheck(this, MapService);
    _this = _callSuper(this, MapService);
    _this._bottomSheet = _bottomSheet;
    _this._roomConfirmService = _roomConfirmService;
    _this.style_map = {};
    _this._map_features = new rxjs_1.BehaviorSubject([]);
    _this.map_features$ = _this._map_features.asObservable();
    _this._map_loaded = new rxjs_1.BehaviorSubject(false);
    _this.map_loaded$ = _this._map_loaded.asObservable();
    _this._features_loaded = new rxjs_1.BehaviorSubject(false);
    _this.features_loaded$ = _this._features_loaded.asObservable();
    _this.selected_space$ = _this._roomConfirmService.selected_space$;
    //Store of Locatable Spaces
    _this._locatable_spaces = new rxjs_1.BehaviorSubject([]);
    _this.locatable_spaces$ = _this._locatable_spaces.asObservable();
    //Store of map_id urls & level names for available_spaces
    _this._maps_list = new rxjs_1.BehaviorSubject([]);
    _this.maps_list$ = _this._maps_list.asObservable();
    return _this;
  }
  _inherits(MapService, _common_1$AsyncHandle);
  return _createClass(MapService, [{
    key: "map_features",
    get: function get() {
      return this._map_features.getValue();
    },
    set: function set(features) {
      this._map_features.next(features);
    }
  }, {
    key: "locatable_spaces",
    get: function get() {
      return this._locatable_spaces.getValue();
    },
    set: function set(space) {
      this._locatable_spaces.next(space);
    }
  }, {
    key: "maps_list",
    get: function get() {
      return this._maps_list.getValue();
    },
    set: function set(map) {
      this._maps_list.next(map);
    }
  }, {
    key: "locateSpaces",
    value: function () {
      var _locateSpaces = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(available_spaces) {
        var _this2 = this,
          _this$locatable_space;
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              _context.next = 2;
              return available_spaces === null || available_spaces === void 0 ? void 0 : available_spaces.pipe((0, operators_1.take)(1)).toPromise();
            case 2:
              available_spaces === null || available_spaces === void 0 || available_spaces.subscribe(function (spaces) {
                return _this2.locatable_spaces = spaces === null || spaces === void 0 ? void 0 : spaces.map(function (space) {
                  return {
                    id: space.id,
                    name: space.name,
                    map_id: space.map_id,
                    level: space.level
                  };
                });
              });
              _context.next = 5;
              return (_this$locatable_space = this.locatable_spaces$) === null || _this$locatable_space === void 0 ? void 0 : _this$locatable_space.pipe((0, operators_1.first)(function (_) {
                return !!_;
              })).toPromise();
            case 5:
              _context.next = 7;
              return this.loadMap();
            case 7:
              _context.next = 9;
              return this.timeout('init', function () {
                _this2.processFeature();
              }, 1000);
            case 9:
              _context.next = 11;
              return this.processStyles();
            case 11:
              this.map_actions$ = available_spaces === null || available_spaces === void 0 ? void 0 : available_spaces.pipe((0, operators_1.map)(function (spaces) {
                return spaces.map(function (space) {
                  return {
                    id: space.map_id,
                    action: 'click',
                    callback: function callback() {
                      _this2.openRoomTile(space);
                    }
                  };
                });
              }));
            case 12:
            case "end":
              return _context.stop();
          }
        }, _callee, this);
      }));
      function locateSpaces(_x) {
        return _locateSpaces.apply(this, arguments);
      }
      return locateSpaces;
    }()
  }, {
    key: "loadMap",
    value: function () {
      var _loadMap = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {
        var _this$locatable_space2, _this$maps_list$;
        return _regeneratorRuntime().wrap(function _callee2$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              this._map_loaded.next(false);
              this.maps_list$ = (_this$locatable_space2 = this.locatable_spaces$) === null || _this$locatable_space2 === void 0 ? void 0 : _this$locatable_space2.pipe((0, operators_1.map)(function (spaces) {
                return spaces.map(function (space) {
                  return {
                    map_id: space.level.map_id,
                    level: space.level.name
                  };
                });
              }));
              this.maps_list$ = (_this$maps_list$ = this.maps_list$) === null || _this$maps_list$ === void 0 ? void 0 : _this$maps_list$.pipe((0, operators_1.map)(function (mapsList) {
                return _toConsumableArray(new Map(mapsList.map(function (v) {
                  return [v.map_id, v];
                })).values());
              }));
              this._map_loaded.next(true);
            case 4:
            case "end":
              return _context2.stop();
          }
        }, _callee2, this);
      }));
      function loadMap() {
        return _loadMap.apply(this, arguments);
      }
      return loadMap;
    }()
  }, {
    key: "processFeature",
    value: function processFeature() {
      this._features_loaded.next(false);
      var focus;
      this.locatable_spaces$.subscribe(function (spaces) {
        return spaces ? focus = spaces === null || spaces === void 0 ? void 0 : spaces.map(function (space) {
          return {
            location: space.map_id,
            content: components_1.MapPinComponent,
            data: {
              name: space.name
            },
            z_index: 99,
            zoom: 100
          };
        }) : [];
      });
      this.map_features = focus;
      this._features_loaded.next(true);
    }
  }, {
    key: "processStyles",
    value: function processStyles() {
      var styles = {};
      styles["#zones"] = {
        display: 'none'
      };
      styles["#Zones"] = {
        display: 'none'
      };
      this.style_map = styles;
    }
  }, {
    key: "openRoomTile",
    value: function openRoomTile(space) {
      var bottomSheetRef = this._bottomSheet.open(room_tile_component_1.RoomTileComponent, {
        panelClass: 'bottom-sheet-transparent',
        data: space
      });
      this._roomConfirmService.handleBookEvent(space, true);
    }
  }]);
}(common_1.AsyncHandler);
_MapService = MapService;
_MapService.ɵfac = function MapService_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _MapService)(i0.ɵɵinject(i1.MatBottomSheet), i0.ɵɵinject(i2.RoomConfirmService));
};
_MapService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({
  token: _MapService,
  factory: _MapService.ɵfac,
  providedIn: 'root'
});
exports.MapService = MapService;

/***/ }),

/***/ 96615:
/*!********************************************************************!*\
  !*** ./apps/outlook-addin/src/app/rooms/room-booking.component.ts ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _regeneratorRuntime = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/regeneratorRuntime.js */ 8698)["default"]);
var _asyncToGenerator = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/asyncToGenerator.js */ 95386)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _RoomBookingComponent;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.RoomBookingComponent = void 0;
var common_1 = __webpack_require__(/*! @angular/common */ 60316);
var router_1 = __webpack_require__(/*! @angular/router */ 95072);
var events_1 = __webpack_require__(/*! @placeos/events */ 40569);
var features_filter_service_1 = __webpack_require__(/*! ./features-filter.service */ 81406);
var common_2 = __webpack_require__(/*! @placeos/common */ 22797);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @angular/router */ 95072);
var i2 = __webpack_require__(/*! @placeos/events */ 40569);
var i3 = __webpack_require__(/*! ./features-filter.service */ 81406);
var i4 = __webpack_require__(/*! @angular/common */ 60316);
var i5 = __webpack_require__(/*! @angular/material/form-field */ 24950);
var i6 = __webpack_require__(/*! @angular/material/input */ 95541);
var i7 = __webpack_require__(/*! @angular/material/core */ 74646);
var i8 = __webpack_require__(/*! @angular/forms */ 34456);
var i9 = __webpack_require__(/*! ../../../../../libs/form-fields/src/lib/date-field.component */ 19608);
var i10 = __webpack_require__(/*! ../../../../../libs/form-fields/src/lib/duration-field.component */ 83476);
var i11 = __webpack_require__(/*! ../../../../../libs/form-fields/src/lib/time-field.component */ 81413);
var i12 = __webpack_require__(/*! ../../../../../libs/form-fields/src/lib/user-list-field.component */ 840);
var _c0 = function _c0() {
  return {
    standalone: true
  };
};
function RoomBookingComponent_form_1_Template(rf, ctx) {
  if (rf & 1) {
    var _r1 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "form", 2)(1, "section", 3)(2, "div", 4)(3, "span", 5);
    i0.ɵɵtext(4, " Book Room");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(5, "div", 6)(6, "div", 7)(7, "span");
    i0.ɵɵtext(8, "1");
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(9, "div", 8);
    i0.ɵɵtext(10, "Details");
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(11, "div", 9)(12, "label", 10);
    i0.ɵɵtext(13, "Add Title*");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(14, "mat-form-field", 11);
    i0.ɵɵelement(15, "input", 12);
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(16, "div", 9)(17, "label", 10);
    i0.ɵɵtext(18, "Date*");
    i0.ɵɵelementEnd();
    i0.ɵɵelement(19, "a-date-field", 13);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(20, "div", 14)(21, "div", 15)(22, "label", 10);
    i0.ɵɵtext(23, " Start Time* ");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(24, "a-time-field", 16);
    i0.ɵɵlistener("ngModelChange", function RoomBookingComponent_form_1_Template_a_time_field_ngModelChange_24_listener($event) {
      i0.ɵɵrestoreView(_r1);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.form.patchValue({
        date: $event
      }));
    });
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(25, "div", 17)(26, "label", 10);
    i0.ɵɵtext(27, " End Time* ");
    i0.ɵɵelementEnd();
    i0.ɵɵelement(28, "a-duration-field", 18);
    i0.ɵɵelementEnd()()()();
    i0.ɵɵelementStart(29, "section", 19)(30, "div", 4)(31, "div", 6)(32, "div", 7)(33, "span");
    i0.ɵɵtext(34, "2");
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(35, "div", 8);
    i0.ɵɵtext(36, "Attendees");
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(37, "div", 9)(38, "label", 10);
    i0.ɵɵtext(39, " Add Attendees ");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(40, "a-user-list-field", 20);
    i0.ɵɵlistener("download", function RoomBookingComponent_form_1_Template_a_user_list_field_download_40_listener() {
      i0.ɵɵrestoreView(_r1);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.downloadTemplate());
    });
    i0.ɵɵelementEnd()()()();
    i0.ɵɵelementStart(41, "section", 21)(42, "button", 22);
    i0.ɵɵlistener("click", function RoomBookingComponent_form_1_Template_button_click_42_listener() {
      i0.ɵɵrestoreView(_r1);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.findSpace());
    });
    i0.ɵɵelementStart(43, "span", 23);
    i0.ɵɵtext(44, "Find room");
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(45, "button", 24);
    i0.ɵɵlistener("click", function RoomBookingComponent_form_1_Template_button_click_45_listener() {
      i0.ɵɵrestoreView(_r1);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.clearForm());
    });
    i0.ɵɵelementStart(46, "span", 23);
    i0.ɵɵtext(47, "Clear form");
    i0.ɵɵelementEnd()()()();
  }
  if (rf & 2) {
    var tmp_5_0;
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵproperty("formGroup", ctx_r1.form);
    i0.ɵɵadvance(19);
    i0.ɵɵproperty("from", ctx_r1.min_date);
    i0.ɵɵadvance(5);
    i0.ɵɵproperty("ngModel", ctx_r1.form.value.date)("ngModelOptions", i0.ɵɵpureFunction0(9, _c0));
    i0.ɵɵadvance(4);
    i0.ɵɵproperty("time", (tmp_5_0 = ctx_r1.form.get("date")) == null ? null : tmp_5_0.value)("max", 10 * 60)("min", 60)("step", 60);
    i0.ɵɵadvance(12);
    i0.ɵɵproperty("custom_template", true);
  }
}
var RoomBookingComponent = /*#__PURE__*/function () {
  function RoomBookingComponent(_document, router, _state, _featuresFilterService) {
    var _this = this;
    _classCallCheck(this, RoomBookingComponent);
    this._document = _document;
    this.router = router;
    this._state = _state;
    this._featuresFilterService = _featuresFilterService;
    this.show_spaces = false;
    this.show_people = false;
    this.min_date = new Date();
    this.clearForm = function () {
      _this._state.clearForm();
    };
  }
  return _createClass(RoomBookingComponent, [{
    key: "form",
    get: function get() {
      return this._state.form;
    }
  }, {
    key: "ngOnInit",
    value: function ngOnInit() {
      this._state.newForm();
      this._featuresFilterService.clearFilter();
    }
  }, {
    key: "findSpace",
    value: function () {
      var _findSpace = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
        var _ref;
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              this.form.markAllAsTouched();
              if (!this.form.value.host) this.form.patchValue({
                host: (_ref = (0, common_2.currentUser)()) === null || _ref === void 0 ? void 0 : _ref.email
              });
              if (this.form.valid) {
                _context.next = 4;
                break;
              }
              return _context.abrupt("return");
            case 4:
              _context.next = 6;
              return this._state.storeForm();
            case 6:
              this.router.navigate(['/schedule/view']);
            case 7:
            case "end":
              return _context.stop();
          }
        }, _callee, this);
      }));
      function findSpace() {
        return _findSpace.apply(this, arguments);
      }
      return findSpace;
    }()
  }, {
    key: "downloadTemplate",
    value: function downloadTemplate() {
      window.open('assets/template.csv');
    }
  }]);
}();
_RoomBookingComponent = RoomBookingComponent;
_RoomBookingComponent.ɵfac = function RoomBookingComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _RoomBookingComponent)(i0.ɵɵdirectiveInject(common_1.DOCUMENT), i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.EventFormService), i0.ɵɵdirectiveInject(i3.FeaturesFilterService));
};
_RoomBookingComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _RoomBookingComponent,
  selectors: [["room-booking"]],
  decls: 2,
  vars: 1,
  consts: [[1, "flex", "flex-1", "flex-col", "z-0", "m-0", "bg-base-200", "h-full", "overflow-y-auto"], [3, "formGroup", 4, "ngIf"], [3, "formGroup"], [1, "flex", "flex-col", "border-b", "border-base-200", "py-5", "items-center"], [1, "flex", "flex-col", "w-[calc(100%-2rem)]", "max-w-[22.5rem]", "self-center"], [1, "flex", "text-xl", "font-bold", "mb-2"], [1, "flex", "flex-row"], [1, "border", "border-base-200", "rounded-full", "w-7", "h-7", "text-center"], [1, "ml-2", "mb-4", "text-base"], [1, "flex", "flex-col"], [1, "text-sm", "font-bold", "mb-1"], ["appearance", "outline"], ["matInput", "", "placeholder", "e.g Team meeting", "formControlName", "title", 1, "text-sm", "max-w-[22.5rem]"], ["formControlName", "date", 1, "text-sm", "max-w-[22.5rem]", 3, "from"], [1, "flex", "flex-row", "-mb-5", "space-x-2"], [1, "flex", "flex-col", "w-1/2"], [1, "text-sm", "max-w-[175px]", 3, "ngModelChange", "ngModel", "ngModelOptions"], [1, "flex", "flex-col", "w-1/2", "ml-auto"], ["formControlName", "duration", 1, "text-sm", "max-w-[175px]", 3, "time", "max", "min", "step"], [1, "flex", "flex-col", "py-3", "border-b", "border-base-200", "items-center"], ["formControlName", "attendees", 1, "text-sm", "max-w-[22.5rem]", 3, "download", "custom_template"], [1, "flex", "flex-col", "py-3", "items-center", "justify-center"], ["btn", "", "matRipple", "", "type", "submit", 1, "text-sm", "bg-secondary", "border-secondary", "min-w-[300px]", "max-w-[calc(100%", "-", "2rem)]", "mx-auto", 3, "click"], [1, "text-sm"], ["btn", "", "matRipple", "", 1, "text-sm", "bg-transparent", "text-secondary", "border-secondary", "my-2", "min-w-[300px]", "max-w-[calc(100%", "-", "2rem)]", "mx-auto", 3, "click"]],
  template: function RoomBookingComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵelementStart(0, "div", 0);
      i0.ɵɵtemplate(1, RoomBookingComponent_form_1_Template, 48, 10, "form", 1);
      i0.ɵɵelementEnd();
    }
    if (rf & 2) {
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", ctx.form);
    }
  },
  dependencies: [i4.NgIf, i5.MatFormField, i6.MatInput, i7.MatRipple, i8.ɵNgNoValidate, i8.DefaultValueAccessor, i8.NgControlStatus, i8.NgControlStatusGroup, i8.NgModel, i8.FormGroupDirective, i8.FormControlName, i9.DateFieldComponent, i10.DurationFieldComponent, i11.TimeFieldComponent, i12.UserListFieldComponent],
  styles: [".button-text[_ngcontent-%COMP%] {\n                color: var(--p);\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJvb20tYm9va2luZy5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLGVBQWU7WUFDbkIiLCJmaWxlIjoicm9vbS1ib29raW5nLmNvbXBvbmVudC50cyIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgLmJ1dHRvbi10ZXh0IHtcbiAgICAgICAgICAgICAgICBjb2xvcjogdmFyKC0tcCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICJdfQ== */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2FwcHMvb3V0bG9vay1hZGRpbi9zcmMvYXBwL3Jvb21zL3Jvb20tYm9va2luZy5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLGVBQWU7WUFDbkI7O0FBRVosNFhBQTRYIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICAuYnV0dG9uLXRleHQge1xuICAgICAgICAgICAgICAgIGNvbG9yOiB2YXIoLS1wKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl0sInNvdXJjZVJvb3QiOiIifQ== */"]
});
exports.RoomBookingComponent = RoomBookingComponent;

/***/ }),

/***/ 9020:
/*!******************************************************************!*\
  !*** ./apps/outlook-addin/src/app/rooms/room-confirm.service.ts ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _regeneratorRuntime = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/regeneratorRuntime.js */ 8698)["default"]);
var _asyncToGenerator = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/asyncToGenerator.js */ 95386)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _RoomConfirmService;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.RoomConfirmService = void 0;
var bottom_sheet_1 = __webpack_require__(/*! @angular/material/bottom-sheet */ 15244);
var rxjs_1 = __webpack_require__(/*! rxjs */ 15681);
var router_1 = __webpack_require__(/*! @angular/router */ 95072);
var spaces_1 = __webpack_require__(/*! @placeos/spaces */ 44855);
var events_1 = __webpack_require__(/*! @placeos/events */ 40569);
var room_details_component_1 = __webpack_require__(/*! ./room-details/room-details.component */ 72799);
var room_confirm_component_1 = __webpack_require__(/*! ./room-confirm/room-confirm.component */ 47763);
var space_pipe_1 = __webpack_require__(/*! libs/spaces/src/lib/space.pipe */ 22011);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @angular/material/bottom-sheet */ 15244);
var i2 = __webpack_require__(/*! @angular/router */ 95072);
var i3 = __webpack_require__(/*! @placeos/events */ 40569);
var i4 = __webpack_require__(/*! @placeos/spaces */ 44855);
var i5 = __webpack_require__(/*! libs/spaces/src/lib/space.pipe */ 22011);
var RoomConfirmService = /*#__PURE__*/function () {
  function RoomConfirmService(_bottomSheet, router, _state, _spaces, _space_pipe) {
    var _this$_state$form,
      _this = this;
    _classCallCheck(this, RoomConfirmService);
    this._bottomSheet = _bottomSheet;
    this.router = router;
    this._state = _state;
    this._spaces = _spaces;
    this._space_pipe = _space_pipe;
    this.book_space = {};
    this.space_list = [];
    this._selected_space = new rxjs_1.BehaviorSubject(null);
    this.selected_space$ = this._selected_space.asObservable();
    this.book_space = {};
    var resources = ((_this$_state$form = this._state.form) === null || _this$_state$form === void 0 || (_this$_state$form = _this$_state$form.get('resources')) === null || _this$_state$form === void 0 ? void 0 : _this$_state$form.value) || [];
    resources.forEach(function (_) {
      return _this.book_space[_.id] = true;
    });
    this.space_list = this._spaces.filter(function (s) {
      return _this.book_space[s.id];
    });
  }
  return _createClass(RoomConfirmService, [{
    key: "selected_space",
    get: function get() {
      return this._selected_space.getValue();
    },
    set: function set(space) {
      this._selected_space.next(space);
    }
  }, {
    key: "form",
    get: function get() {
      return this._state.form;
    }
  }, {
    key: "openRoomDetail",
    value: function () {
      var _openRoomDetail = _asyncToGenerator(function () {
        var _this2 = this;
        var space = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.selected_space;
        return /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
          var room_details_ref;
          return _regeneratorRuntime().wrap(function _callee$(_context) {
            while (1) switch (_context.prev = _context.next) {
              case 0:
                room_details_ref = _this2._bottomSheet.open(room_details_component_1.RoomDetailsComponent, {
                  data: space
                });
                _context.next = 3;
                return room_details_ref.afterDismissed().subscribe(function (selectedSpace) {
                  return selectedSpace ? _this2.openRoomConfirm(selectedSpace) : null;
                });
              case 3:
              case "end":
                return _context.stop();
            }
          }, _callee);
        })();
      });
      function openRoomDetail() {
        return _openRoomDetail.apply(this, arguments);
      }
      return openRoomDetail;
    }()
  }, {
    key: "openRoomConfirm",
    value: function openRoomConfirm(space) {
      if (space) {
        var confirm_ref = this._bottomSheet.open(room_confirm_component_1.RoomConfirmComponent, {
          data: space
        });
      }
    }
  }, {
    key: "updateSelectedSpace",
    value: function updateSelectedSpace(space) {
      if (space) this.selected_space = space;
    }
  }, {
    key: "handleBookEvent",
    value: function handleBookEvent(space) {
      var book = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;
      this.book_space = {};
      this.book_space[space.id] = book;
    }
  }, {
    key: "bookRoom",
    value: function () {
      var _bookRoom = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(space) {
        var _this3 = this;
        var id_list, spaces;
        return _regeneratorRuntime().wrap(function _callee2$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              id_list = Object.keys(this.book_space).filter(function (id) {
                return _this3.book_space[id];
              });
              _context2.next = 3;
              return Promise.all(id_list.map(function (id) {
                return _this3._space_pipe.transform(id);
              }));
            case 3:
              spaces = _context2.sent;
              this.form.patchValue({
                resources: spaces,
                system: spaces[0]
              });
              this.space_list = this._spaces.filter(function (s) {
                return _this3.book_space[s.id];
              });
              this.postForm();
            case 7:
            case "end":
              return _context2.stop();
          }
        }, _callee2, this);
      }));
      function bookRoom(_x) {
        return _bookRoom.apply(this, arguments);
      }
      return bookRoom;
    }()
  }, {
    key: "postForm",
    value: function () {
      var _postForm = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {
        return _regeneratorRuntime().wrap(function _callee3$(_context3) {
          while (1) switch (_context3.prev = _context3.next) {
            case 0:
              _context3.next = 2;
              return this._state.postForm()["catch"](function (err) {
                return console.error(err);
              });
            case 2:
              if (this._state.last_success) this.router.navigate(['/confirm/success']);
            case 3:
            case "end":
              return _context3.stop();
          }
        }, _callee3, this);
      }));
      function postForm() {
        return _postForm.apply(this, arguments);
      }
      return postForm;
    }()
  }]);
}();
_RoomConfirmService = RoomConfirmService;
_RoomConfirmService.ɵfac = function RoomConfirmService_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _RoomConfirmService)(i0.ɵɵinject(i1.MatBottomSheet), i0.ɵɵinject(i2.Router), i0.ɵɵinject(i3.EventFormService), i0.ɵɵinject(i4.SpacesService), i0.ɵɵinject(i5.SpacePipe));
};
_RoomConfirmService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({
  token: _RoomConfirmService,
  factory: _RoomConfirmService.ɵfac,
  providedIn: 'root'
});
exports.RoomConfirmService = RoomConfirmService;

/***/ }),

/***/ 47763:
/*!*********************************************************************************!*\
  !*** ./apps/outlook-addin/src/app/rooms/room-confirm/room-confirm.component.ts ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _regeneratorRuntime = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/regeneratorRuntime.js */ 8698)["default"]);
var _asyncToGenerator = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/asyncToGenerator.js */ 95386)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _RoomConfirmComponent;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.RoomConfirmComponent = void 0;
var bottom_sheet_1 = __webpack_require__(/*! @angular/material/bottom-sheet */ 15244);
var events_1 = __webpack_require__(/*! @placeos/events */ 40569);
var room_confirm_service_1 = __webpack_require__(/*! ../room-confirm.service */ 9020);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @angular/material/bottom-sheet */ 15244);
var i2 = __webpack_require__(/*! @placeos/events */ 40569);
var i3 = __webpack_require__(/*! ../room-confirm.service */ 9020);
var i4 = __webpack_require__(/*! @angular/common */ 60316);
var i5 = __webpack_require__(/*! @angular/material/icon */ 93840);
var i6 = __webpack_require__(/*! @angular/material/core */ 74646);
var i7 = __webpack_require__(/*! ../../../../../../libs/components/src/lib/icon.component */ 69434);
function RoomConfirmComponent_div_33_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 15)(1, "div", 7)(2, "mat-icon", 12);
    i0.ɵɵtext(3, "people");
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(4, "div", 7)(5, "span", 20);
    i0.ɵɵtext(6);
    i0.ɵɵelementEnd()()();
  }
  if (rf & 2) {
    var attendee_r1 = ctx.$implicit;
    i0.ɵɵadvance(6);
    i0.ɵɵtextInterpolate(attendee_r1 == null ? null : attendee_r1.email);
  }
}
var RoomConfirmComponent = /*#__PURE__*/function () {
  function RoomConfirmComponent(data, _bottomSheetRef, _state, _roomConfirmService) {
    _classCallCheck(this, RoomConfirmComponent);
    this.data = data;
    this._bottomSheetRef = _bottomSheetRef;
    this._state = _state;
    this._roomConfirmService = _roomConfirmService;
    this.show_submit_button = true;
    this.loading = this._state.loading;
  }
  return _createClass(RoomConfirmComponent, [{
    key: "form",
    get: function get() {
      return this._state.form;
    }
  }, {
    key: "ngOnInit",
    value: function () {
      var _ngOnInit = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
        var _this$form, _this$form2, _this$form3, _this$form4;
        var durationMinutes, end;
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              this.unix_time = (_this$form = this.form) === null || _this$form === void 0 || (_this$form = _this$form.controls) === null || _this$form === void 0 ? void 0 : _this$form.date.value;
              this.start_time = new Date(this.unix_time).toLocaleTimeString('en-US', {
                hour: 'numeric',
                minute: 'numeric',
                hour12: true
              });
              durationMinutes = (_this$form2 = this.form) === null || _this$form2 === void 0 || (_this$form2 = _this$form2.controls) === null || _this$form2 === void 0 ? void 0 : _this$form2.duration.value;
              end = this.unix_time + durationMinutes * 60 * 1000;
              this.end_time = new Date(end).toLocaleTimeString('en-US', {
                hour: 'numeric',
                minute: 'numeric',
                hour12: true
              });
              this.attendees = (_this$form3 = this.form) === null || _this$form3 === void 0 || (_this$form3 = _this$form3.controls) === null || _this$form3 === void 0 ? void 0 : _this$form3.attendees.value;
              this.space = this.data;
              this.title = (_this$form4 = this.form) === null || _this$form4 === void 0 || (_this$form4 = _this$form4.controls) === null || _this$form4 === void 0 ? void 0 : _this$form4.title.value;
            case 8:
            case "end":
              return _context.stop();
          }
        }, _callee, this);
      }));
      function ngOnInit() {
        return _ngOnInit.apply(this, arguments);
      }
      return ngOnInit;
    }()
  }, {
    key: "closeModal",
    value: function closeModal() {
      this._bottomSheetRef.dismiss('cancel');
    }
  }, {
    key: "confirmBooking",
    value: function confirmBooking() {
      this.show_submit_button = false;
      this._roomConfirmService.bookRoom(this.space);
    }
  }]);
}();
_RoomConfirmComponent = RoomConfirmComponent;
_RoomConfirmComponent.ɵfac = function RoomConfirmComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _RoomConfirmComponent)(i0.ɵɵdirectiveInject(bottom_sheet_1.MAT_BOTTOM_SHEET_DATA), i0.ɵɵdirectiveInject(i1.MatBottomSheetRef), i0.ɵɵdirectiveInject(i2.EventFormService), i0.ɵɵdirectiveInject(i3.RoomConfirmService));
};
_RoomConfirmComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _RoomConfirmComponent,
  selectors: [["room-confirm"]],
  decls: 62,
  vars: 12,
  consts: [[1, "w-full", "min-h-[800px]", "mx-auto", "w-[calc(100%-2rem)]", "flex", "flex-1", "flex-col", "z-0", "overflow-y-auto"], [1, "flex", "flex-col", "border-b", "border-base-200", "py-2"], [1, "flex", "flex-row", "items-center", "justify-content", "space-x-4"], ["icon", "", "matRipple", "", 3, "click"], [1, "flex", "items-center", "justify-center", "text-3xl", "text-gray-700"], [1, "text-lg", "font-bold", "mr-auto"], [1, "flex", "flex-row", "border-b", "border-base-200", "mt-4", "pb-4", "space-x-4"], [1, "flex", "flex-col"], [1, "text-base"], ["src", "assets/tick.svg"], [1, "flex", "text-base", "font-bold", "text-gray-700"], [1, "flex", "mt-2", "text-sm", "items-center", "text-gray-700"], [1, "flex", "items-center", "material-icons-outlined"], [1, "flex"], ["class", "flex flex-row mt-2 text-sm items-center text-gray-700", 4, "ngFor", "ngForOf"], [1, "flex", "flex-row", "mt-2", "text-sm", "items-center", "text-gray-700"], [1, "flex", "flex-row", "mt-4", "pb-4", "space-x-4"], [1, "flex", "flex-col", "border-t", "border-base-200", "top-box-shadow", "p-3", "mt-5", "mb-10", "-mx-4", "items-center"], ["matRipple", "", 1, "bg-secondary", "border-secondary", "w-[300px]", "ml-2", "mx-4", 3, "click", "disabled"], [1, ""], [1, "w-full"]],
  template: function RoomConfirmComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵelementStart(0, "div", 0)(1, "section", 1)(2, "div", 2)(3, "button", 3);
      i0.ɵɵlistener("click", function RoomConfirmComponent_Template_button_click_3_listener() {
        return ctx.closeModal();
      });
      i0.ɵɵelementStart(4, "app-icon", 4);
      i0.ɵɵtext(5, "close");
      i0.ɵɵelementEnd()();
      i0.ɵɵelementStart(6, "span", 5);
      i0.ɵɵtext(7, " Confirm Room Booking");
      i0.ɵɵelementEnd()()();
      i0.ɵɵelementStart(8, "section", 6)(9, "div", 7)(10, "span", 8);
      i0.ɵɵelement(11, "img", 9);
      i0.ɵɵelementEnd()();
      i0.ɵɵelementStart(12, "div", 7)(13, "span", 10);
      i0.ɵɵtext(14);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(15, "div", 11)(16, "mat-icon", 12);
      i0.ɵɵtext(17, "calendar_today");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(18, "span", 13);
      i0.ɵɵtext(19);
      i0.ɵɵpipe(20, "date");
      i0.ɵɵelementEnd()();
      i0.ɵɵelementStart(21, "div", 11)(22, "mat-icon", 12);
      i0.ɵɵtext(23, "schedule");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(24, "span", 13);
      i0.ɵɵtext(25);
      i0.ɵɵelementEnd()()()();
      i0.ɵɵelementStart(26, "section", 6)(27, "div", 7)(28, "span", 8);
      i0.ɵɵelement(29, "img", 9);
      i0.ɵɵelementEnd()();
      i0.ɵɵelementStart(30, "div", 7)(31, "span", 10);
      i0.ɵɵtext(32, "Attendees ");
      i0.ɵɵelementEnd();
      i0.ɵɵtemplate(33, RoomConfirmComponent_div_33_Template, 7, 1, "div", 14);
      i0.ɵɵelementStart(34, "div", 15)(35, "div", 7)(36, "mat-icon", 12);
      i0.ɵɵtext(37, "people");
      i0.ɵɵelementEnd()();
      i0.ɵɵelementStart(38, "div", 7)(39, "span");
      i0.ɵɵtext(40);
      i0.ɵɵelementEnd()()()()();
      i0.ɵɵelementStart(41, "section", 16)(42, "div", 7)(43, "span", 8);
      i0.ɵɵelement(44, "img", 9);
      i0.ɵɵelementEnd()();
      i0.ɵɵelementStart(45, "div", 7)(46, "span", 10);
      i0.ɵɵtext(47, "Rooms ");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(48, "div", 11)(49, "mat-icon", 12);
      i0.ɵɵtext(50, "meeting_room");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(51, "span", 13);
      i0.ɵɵtext(52);
      i0.ɵɵelementEnd()();
      i0.ɵɵelementStart(53, "div", 11)(54, "mat-icon", 12);
      i0.ɵɵtext(55, "room");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(56, "span", 13);
      i0.ɵɵtext(57);
      i0.ɵɵelementEnd()()()();
      i0.ɵɵelementStart(58, "div", 17)(59, "button", 18);
      i0.ɵɵlistener("click", function RoomConfirmComponent_Template_button_click_59_listener() {
        return ctx.confirmBooking();
      });
      i0.ɵɵelementStart(60, "span", 19);
      i0.ɵɵtext(61, "Confirm");
      i0.ɵɵelementEnd()()()();
    }
    if (rf & 2) {
      i0.ɵɵadvance(14);
      i0.ɵɵtextInterpolate1("", ctx.title, " ");
      i0.ɵɵadvance(5);
      i0.ɵɵtextInterpolate1(" ", i0.ɵɵpipeBind2(20, 9, ctx.unix_time, "dd MMMM yyyy"), " ");
      i0.ɵɵadvance(6);
      i0.ɵɵtextInterpolate2("", ctx.start_time, " -", ctx.end_time, "");
      i0.ɵɵadvance(8);
      i0.ɵɵproperty("ngForOf", ctx.attendees);
      i0.ɵɵadvance(7);
      i0.ɵɵtextInterpolate(ctx.form == null ? null : ctx.form.controls == null ? null : ctx.form.controls.creator == null ? null : ctx.form.controls.creator.value);
      i0.ɵɵadvance(12);
      i0.ɵɵtextInterpolate1(" ", ctx.space == null ? null : ctx.space.name, " ");
      i0.ɵɵadvance(5);
      i0.ɵɵtextInterpolate1(" ", ctx.space == null ? null : ctx.space.level == null ? null : ctx.space.level.name, "");
      i0.ɵɵadvance(2);
      i0.ɵɵproperty("disabled", !ctx.show_submit_button);
    }
  },
  dependencies: [i4.NgForOf, i5.MatIcon, i6.MatRipple, i7.IconComponent, i4.DatePipe]
});
exports.RoomConfirmComponent = RoomConfirmComponent;

/***/ }),

/***/ 72799:
/*!*********************************************************************************!*\
  !*** ./apps/outlook-addin/src/app/rooms/room-details/room-details.component.ts ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _RoomDetailsComponent;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.RoomDetailsComponent = void 0;
var bottom_sheet_1 = __webpack_require__(/*! @angular/material/bottom-sheet */ 15244);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @angular/material/bottom-sheet */ 15244);
var i2 = __webpack_require__(/*! @angular/common */ 60316);
var i3 = __webpack_require__(/*! @angular/material/icon */ 93840);
var i4 = __webpack_require__(/*! @angular/material/core */ 74646);
var i5 = __webpack_require__(/*! ../../../../../../libs/components/src/lib/authenticated-image.directive */ 93208);
function RoomDetailsComponent_section_1_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "section", 18);
    i0.ɵɵelement(1, "img", 19);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r0 = i0.ɵɵnextContext();
    i0.ɵɵadvance();
    i0.ɵɵproperty("source", ctx_r0.space.images[0])("alt", "Image of " + (ctx_r0.space.display_name || ctx_r0.space.name));
  }
}
function RoomDetailsComponent_button_6_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "button", 20)(1, "span", 21);
    i0.ɵɵtext(2, "+ Add this room");
    i0.ɵɵelementEnd()();
  }
}
function RoomDetailsComponent_button_7_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "button", 22)(1, "span", 23);
    i0.ɵɵtext(2, "- Remove this room");
    i0.ɵɵelementEnd()();
  }
}
function RoomDetailsComponent_section_21_div_3_div_2_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div")(1, "mat-icon", 31);
    i0.ɵɵtext(2, "panorama");
    i0.ɵɵelementEnd()();
  }
}
function RoomDetailsComponent_section_21_div_3_div_3_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div")(1, "mat-icon", 31);
    i0.ɵɵtext(2, "video_camera_front");
    i0.ɵɵelementEnd()();
  }
}
function RoomDetailsComponent_section_21_div_3_div_4_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div")(1, "mat-icon", 31);
    i0.ɵɵtext(2, "contact_phone");
    i0.ɵɵelementEnd()();
  }
}
function RoomDetailsComponent_section_21_div_3_div_5_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div")(1, "mat-icon", 31);
    i0.ɵɵtext(2, "drive_file_rename_outline");
    i0.ɵɵelementEnd()();
  }
}
function RoomDetailsComponent_section_21_div_3_div_6_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div")(1, "mat-icon", 31);
    i0.ɵɵtext(2, "draw");
    i0.ɵɵelementEnd()();
  }
}
function RoomDetailsComponent_section_21_div_3_div_7_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div")(1, "mat-icon", 31);
    i0.ɵɵtext(2, "nest_remote_comfort_sensor");
    i0.ɵɵelementEnd()();
  }
}
function RoomDetailsComponent_section_21_div_3_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 27)(1, "div", 28);
    i0.ɵɵtemplate(2, RoomDetailsComponent_section_21_div_3_div_2_Template, 3, 0, "div", 29)(3, RoomDetailsComponent_section_21_div_3_div_3_Template, 3, 0, "div", 29)(4, RoomDetailsComponent_section_21_div_3_div_4_Template, 3, 0, "div", 29)(5, RoomDetailsComponent_section_21_div_3_div_5_Template, 3, 0, "div", 29)(6, RoomDetailsComponent_section_21_div_3_div_6_Template, 3, 0, "div", 29)(7, RoomDetailsComponent_section_21_div_3_div_7_Template, 3, 0, "div", 29);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(8, "span", 30);
    i0.ɵɵtext(9);
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var facility_r2 = ctx.$implicit;
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngSwitch", facility_r2);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngSwitchCase", "Views");
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngSwitchCase", "Projector");
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngSwitchCase", "VidConf");
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngSwitchCase", "Whiteboard");
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngSwitchCase", "Jamboard");
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngSwitchCase", "Wifi");
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate1(" ", facility_r2, " ");
  }
}
function RoomDetailsComponent_section_21_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "section", 24)(1, "span", 25);
    i0.ɵɵtext(2, "Room Facilities");
    i0.ɵɵelementEnd();
    i0.ɵɵtemplate(3, RoomDetailsComponent_section_21_div_3_Template, 10, 8, "div", 26);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r0 = i0.ɵɵnextContext();
    i0.ɵɵadvance(3);
    i0.ɵɵproperty("ngForOf", ctx_r0.space == null ? null : ctx_r0.space.feature_list);
  }
}
function RoomDetailsComponent_button_23_Template(rf, ctx) {
  if (rf & 1) {
    var _r3 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "button", 32);
    i0.ɵɵlistener("click", function RoomDetailsComponent_button_23_Template_button_click_0_listener() {
      i0.ɵɵrestoreView(_r3);
      var ctx_r0 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r0.back());
    });
    i0.ɵɵelementStart(1, "span", 33);
    i0.ɵɵtext(2, "Back");
    i0.ɵɵelementEnd()();
  }
}
function RoomDetailsComponent_button_24_Template(rf, ctx) {
  if (rf & 1) {
    var _r4 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "button", 34);
    i0.ɵɵlistener("click", function RoomDetailsComponent_button_24_Template_button_click_0_listener() {
      i0.ɵɵrestoreView(_r4);
      var ctx_r0 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r0.back());
    });
    i0.ɵɵelementStart(1, "span", 21);
    i0.ɵɵtext(2, "Confirm");
    i0.ɵɵelementEnd()();
  }
}
var RoomDetailsComponent = /*#__PURE__*/function () {
  function RoomDetailsComponent(data, _bottomSheetRef) {
    _classCallCheck(this, RoomDetailsComponent);
    this.data = data;
    this._bottomSheetRef = _bottomSheetRef;
    this.room_added = false;
  }
  return _createClass(RoomDetailsComponent, [{
    key: "ngOnInit",
    value: function ngOnInit() {
      this.space = this.data;
    }
  }, {
    key: "selectRoom",
    value: function selectRoom() {
      this.room_added = !this.room_added;
    }
  }, {
    key: "back",
    value: function back() {
      if (this.room_added) {
        this._bottomSheetRef.dismiss(this.space);
      } else {
        this._bottomSheetRef.dismiss(null);
      }
    }
  }]);
}();
_RoomDetailsComponent = RoomDetailsComponent;
_RoomDetailsComponent.ɵfac = function RoomDetailsComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _RoomDetailsComponent)(i0.ɵɵdirectiveInject(bottom_sheet_1.MAT_BOTTOM_SHEET_DATA), i0.ɵɵdirectiveInject(i1.MatBottomSheetRef));
};
_RoomDetailsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _RoomDetailsComponent,
  selectors: [["placeos-room-details"]],
  decls: 25,
  vars: 10,
  consts: [[1, "w-full", "min-h-[800px]", "flex", "flex-1", "flex-col", "z-0", "overflow-hidden"], ["class", "flex bg-base-200 min-h-[300px] justify-center items-center text-gray-500", 4, "ngIf"], [1, "flex", "flex-col", "mx-auto", "w-[calc(100%-2rem)]", "border-b", "border-base-200"], [1, "text-lg", "font-bold", "mt-3"], [1, "w-max-[375px]", 3, "click"], ["btn", "", "matRipple", "", "class", "bg-secondary border-secondary w-full mx-auto m-3", 4, "ngIf"], ["btn", "", "matRipple", "", "class", "bg-base-200 border-base-200 w-full mx-auto m-3", 4, "ngIf"], [1, "flex", "flex-col", "mx-auto", "w-[calc(100%-2rem)]", "border-b", "border-base-200", "p-3", "pl-0"], [1, "text-base", "font-bold"], [1, "flex", "flex-row", "items-center", "text-sm", "mt-3"], [1, "material-icons-outlined", "blue-icon"], [1, "text-gray-500", "text-sm"], [1, "flex", "flex-row", "items-center", "text-sm", "mt-1"], [1, "text-gray-500"], ["class", "flex flex-col py-3 mx-auto w-[calc(100%-2rem)]", 4, "ngIf"], [1, "flex", "flex-col", "bg-base-100", "border-t", "border-base-200", "top-box-shadow", "p-3"], ["btn", "", "matRipple", "", "class", "bg-base-100 border-secondary w-full mx-auto", 3, "click", 4, "ngIf"], ["btn", "", "matRipple", "", "class", "bg-secondary border-secondary w-full mx-auto", 3, "click", 4, "ngIf"], [1, "flex", "bg-base-200", "min-h-[300px]", "justify-center", "items-center", "text-gray-500"], ["auth", "", "width", "100%", "height", "100%", 1, "flex", "z-20", "rounded-lg", 3, "source", "alt"], ["btn", "", "matRipple", "", 1, "bg-secondary", "border-secondary", "w-full", "mx-auto", "m-3"], [1, "text-white"], ["btn", "", "matRipple", "", 1, "bg-base-200", "border-base-200", "w-full", "mx-auto", "m-3"], [1, "text-black"], [1, "flex", "flex-col", "py-3", "mx-auto", "w-[calc(100%-2rem)]"], [1, "text-base", "font-bold", "mb-3"], ["class", "flex flex-row w-full mb-1", 4, "ngFor", "ngForOf"], [1, "flex", "flex-row", "w-full", "mb-1"], [3, "ngSwitch"], [4, "ngSwitchCase"], [1, "text-sm", "text-gray-500"], [1, "material-symbols-outlined", "blue-icon"], ["btn", "", "matRipple", "", 1, "bg-base-100", "border-secondary", "w-full", "mx-auto", 3, "click"], [1, "text-secondary"], ["btn", "", "matRipple", "", 1, "bg-secondary", "border-secondary", "w-full", "mx-auto", 3, "click"]],
  template: function RoomDetailsComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵelementStart(0, "div", 0);
      i0.ɵɵtemplate(1, RoomDetailsComponent_section_1_Template, 2, 2, "section", 1);
      i0.ɵɵelementStart(2, "section", 2)(3, "span", 3);
      i0.ɵɵtext(4);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(5, "div", 4);
      i0.ɵɵlistener("click", function RoomDetailsComponent_Template_div_click_5_listener() {
        return ctx.selectRoom();
      });
      i0.ɵɵtemplate(6, RoomDetailsComponent_button_6_Template, 3, 0, "button", 5)(7, RoomDetailsComponent_button_7_Template, 3, 0, "button", 6);
      i0.ɵɵelementEnd()();
      i0.ɵɵelementStart(8, "section", 7)(9, "span", 8);
      i0.ɵɵtext(10, "Details");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(11, "div", 9)(12, "mat-icon", 10);
      i0.ɵɵtext(13, "people");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(14, "span", 11);
      i0.ɵɵtext(15);
      i0.ɵɵelementEnd()();
      i0.ɵɵelementStart(16, "div", 12)(17, "mat-icon", 10);
      i0.ɵɵtext(18, "room");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(19, "span", 13);
      i0.ɵɵtext(20);
      i0.ɵɵelementEnd()()();
      i0.ɵɵtemplate(21, RoomDetailsComponent_section_21_Template, 4, 1, "section", 14);
      i0.ɵɵelementStart(22, "div", 15);
      i0.ɵɵtemplate(23, RoomDetailsComponent_button_23_Template, 3, 0, "button", 16)(24, RoomDetailsComponent_button_24_Template, 3, 0, "button", 17);
      i0.ɵɵelementEnd()();
    }
    if (rf & 2) {
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", (ctx.space == null ? null : ctx.space.images == null ? null : ctx.space.images.length) > 0);
      i0.ɵɵadvance(3);
      i0.ɵɵtextInterpolate1(" ", ctx.space == null ? null : ctx.space.name, "");
      i0.ɵɵadvance(2);
      i0.ɵɵproperty("ngIf", ctx.room_added == false);
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", ctx.room_added == true);
      i0.ɵɵadvance(8);
      i0.ɵɵtextInterpolate1(" ", ctx.space == null ? null : ctx.space.capacity, " People");
      i0.ɵɵadvance(5);
      i0.ɵɵtextInterpolate2(" ", ctx.space == null ? null : ctx.space.level == null ? null : ctx.space.level.name, ", ", ctx.space == null ? null : ctx.space.level == null ? null : ctx.space.level.parent_id, "");
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", (ctx.space == null ? null : ctx.space.feature_list.length) > 0);
      i0.ɵɵadvance(2);
      i0.ɵɵproperty("ngIf", !ctx.room_added);
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", ctx.room_added);
    }
  },
  dependencies: [i2.NgForOf, i2.NgIf, i2.NgSwitch, i2.NgSwitchCase, i3.MatIcon, i4.MatRipple, i5.AuthenticatedImageDirective]
});
exports.RoomDetailsComponent = RoomDetailsComponent;

/***/ }),

/***/ 91361:
/*!***************************************************************************!*\
  !*** ./apps/outlook-addin/src/app/rooms/room-tile/room-tile.component.ts ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _RoomTileComponent;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.RoomTileComponent = void 0;
var bottom_sheet_1 = __webpack_require__(/*! @angular/material/bottom-sheet */ 15244);
var room_confirm_service_1 = __webpack_require__(/*! ../room-confirm.service */ 9020);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @angular/material/bottom-sheet */ 15244);
var i2 = __webpack_require__(/*! ../room-confirm.service */ 9020);
var i3 = __webpack_require__(/*! @angular/common */ 60316);
var i4 = __webpack_require__(/*! @angular/material/icon */ 93840);
var i5 = __webpack_require__(/*! @angular/material/core */ 74646);
var i6 = __webpack_require__(/*! ../../../../../../libs/components/src/lib/authenticated-image.directive */ 93208);
function RoomTileComponent_img_4_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelement(0, "img", 14);
  }
  if (rf & 2) {
    var ctx_r0 = i0.ɵɵnextContext();
    i0.ɵɵproperty("source", ctx_r0.space.images[0]);
  }
}
function RoomTileComponent_div_5_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div")(1, "mat-icon", 15);
    i0.ɵɵtext(2, "image");
    i0.ɵɵelementEnd()();
  }
}
var RoomTileComponent = /*#__PURE__*/function () {
  function RoomTileComponent(data, _bottomSheetRef, _roomConfirmService) {
    _classCallCheck(this, RoomTileComponent);
    this.data = data;
    this._bottomSheetRef = _bottomSheetRef;
    this._roomConfirmService = _roomConfirmService;
  }
  return _createClass(RoomTileComponent, [{
    key: "ngOnInit",
    value: function ngOnInit() {
      this.space = this.data;
    }
  }, {
    key: "openRoomDetail",
    value: function openRoomDetail() {
      this._roomConfirmService.openRoomDetail(this.space);
    }
  }, {
    key: "cancel",
    value: function cancel() {
      this._bottomSheetRef.dismiss(null);
    }
  }]);
}();
_RoomTileComponent = RoomTileComponent;
_RoomTileComponent.ɵfac = function RoomTileComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _RoomTileComponent)(i0.ɵɵdirectiveInject(bottom_sheet_1.MAT_BOTTOM_SHEET_DATA), i0.ɵɵdirectiveInject(i1.MatBottomSheetRef), i0.ɵɵdirectiveInject(i2.RoomConfirmService));
};
_RoomTileComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _RoomTileComponent,
  selectors: [["placeos-room-tile"]],
  decls: 23,
  vars: 6,
  consts: [[1, "w-full", "min-h-min", "min-w-[400px]", "flex", "flex-1", "flex-col", "z-0", "overflow-hidden"], [1, "flex", "w-[calc(100%-2rem)]", "max-w-[375px]", "mx-auto", "items-center", "justify-content", 3, "click"], [1, "flex", "flex-col", "bg-base-100", "h-full", "w-full", "border", "rounded-lg", "mx-4"], [1, "flex", "items-center", "justify-center", "h-44", "bg-base-200", "rounded-lg", "m-3", "text-gray-500"], ["auth", "", "alt", "image of building ", "width", "100%", "height", "100%", "class", "flex z-20 rounded-lg", 3, "source", 4, "ngIf"], [4, "ngIf"], [1, "mb-4", "flex", "flex-col"], [1, "text-xl", "font-bold", "mt-1", "mx-3"], [1, "flex", "flex-row", "items-center", "text-base", "mt-1", "mx-3"], [1, "flex", "items-center", "material-icons-outlined", "blue-icon"], [1, "text-gray-500"], [1, "flex", "flex-col", "bg-base-100", "h-full", "border-t", "border-base-200", "top-box-shadow", "p-3", "mt-5", "mb-10", "-mx-4", "items-center"], ["btn", "", "matRipple", "", 1, "bg-base-100", "border-secondary", "w-[460px]", "ml-2", "mx-4", 3, "click"], [1, "text-secondary"], ["auth", "", "alt", "image of building ", "width", "100%", "height", "100%", 1, "flex", "z-20", "rounded-lg", 3, "source"], [1, "flex", "items-center", "justify-center", "material-icons-outlined", "text-[8rem]"]],
  template: function RoomTileComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵelementStart(0, "div", 0)(1, "div", 1);
      i0.ɵɵlistener("click", function RoomTileComponent_Template_div_click_1_listener() {
        return ctx.openRoomDetail();
      });
      i0.ɵɵelementStart(2, "div", 2)(3, "div", 3);
      i0.ɵɵtemplate(4, RoomTileComponent_img_4_Template, 1, 1, "img", 4)(5, RoomTileComponent_div_5_Template, 3, 0, "div", 5);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(6, "div", 6)(7, "span", 7);
      i0.ɵɵtext(8);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(9, "div", 8)(10, "mat-icon", 9);
      i0.ɵɵtext(11, "room");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(12, "span", 10);
      i0.ɵɵtext(13);
      i0.ɵɵelementEnd()();
      i0.ɵɵelementStart(14, "div", 8)(15, "mat-icon", 9);
      i0.ɵɵtext(16, "people");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(17, "span", 10);
      i0.ɵɵtext(18);
      i0.ɵɵelementEnd()()()()()();
      i0.ɵɵelementStart(19, "div", 11)(20, "button", 12);
      i0.ɵɵlistener("click", function RoomTileComponent_Template_button_click_20_listener() {
        return ctx.cancel();
      });
      i0.ɵɵelementStart(21, "span", 13);
      i0.ɵɵtext(22, "Back");
      i0.ɵɵelementEnd()()();
    }
    if (rf & 2) {
      i0.ɵɵadvance(4);
      i0.ɵɵproperty("ngIf", (ctx.space == null ? null : ctx.space.images == null ? null : ctx.space.images.length) > 0);
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", (ctx.space == null ? null : ctx.space.images == null ? null : ctx.space.images.length) == 0);
      i0.ɵɵadvance(3);
      i0.ɵɵtextInterpolate1(" ", ctx.space == null ? null : ctx.space.name, "");
      i0.ɵɵadvance(5);
      i0.ɵɵtextInterpolate2(" ", ctx.space == null ? null : ctx.space.level == null ? null : ctx.space.level.name, ", ", ctx.space == null ? null : ctx.space.level == null ? null : ctx.space.level.parent_id, "");
      i0.ɵɵadvance(5);
      i0.ɵɵtextInterpolate1(" ", ctx.space == null ? null : ctx.space.capacity, "");
    }
  },
  dependencies: [i3.NgIf, i4.MatIcon, i5.MatRipple, i6.AuthenticatedImageDirective]
});
exports.RoomTileComponent = RoomTileComponent;

/***/ }),

/***/ 83805:
/*!*******************************************************************************************!*\
  !*** ./apps/outlook-addin/src/app/rooms/upcoming-bookings/upcoming-bookings.component.ts ***!
  \*******************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _callSuper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/callSuper.js */ 8513)["default"]);
var _inherits = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/inherits.js */ 58160)["default"]);
var _UpcomingBookingsComponent;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.UpcomingBookingsComponent = void 0;
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var events_1 = __webpack_require__(/*! @placeos/events */ 40569);
var schedule_state_service_1 = __webpack_require__(/*! apps/workplace/src/app/new-schedule/schedule-state.service */ 75323);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! apps/workplace/src/app/new-schedule/schedule-state.service */ 75323);
var i2 = __webpack_require__(/*! @angular/common */ 60316);
var i3 = __webpack_require__(/*! @angular/material/progress-spinner */ 41134);
var i4 = __webpack_require__(/*! ../../../../../../libs/bookings/src/lib/booking-card.component */ 27547);
var i5 = __webpack_require__(/*! ../../../../../../libs/events/src/lib/event-card.component */ 21765);
function UpcomingBookingsComponent_div_3_ng_container_1_ng_container_1_event_card_1_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelement(0, "event-card", 10);
  }
  if (rf & 2) {
    var item_r1 = i0.ɵɵnextContext().$implicit;
    i0.ɵɵproperty("event", item_r1);
  }
}
function UpcomingBookingsComponent_div_3_ng_container_1_ng_container_1_ng_template_2_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelement(0, "booking-card", 11);
  }
  if (rf & 2) {
    var item_r1 = i0.ɵɵnextContext().$implicit;
    i0.ɵɵproperty("booking", item_r1);
  }
}
function UpcomingBookingsComponent_div_3_ng_container_1_ng_container_1_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵtemplate(1, UpcomingBookingsComponent_div_3_ng_container_1_ng_container_1_event_card_1_Template, 1, 1, "event-card", 9)(2, UpcomingBookingsComponent_div_3_ng_container_1_ng_container_1_ng_template_2_Template, 1, 1, "ng-template", null, 2, i0.ɵɵtemplateRefExtractor);
    i0.ɵɵelementContainerEnd();
  }
  if (rf & 2) {
    var item_r1 = ctx.$implicit;
    var booking_card_r2 = i0.ɵɵreference(3);
    var ctx_r2 = i0.ɵɵnextContext(3);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", ctx_r2.isEvent(item_r1))("ngIfElse", booking_card_r2);
  }
}
function UpcomingBookingsComponent_div_3_ng_container_1_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵtemplate(1, UpcomingBookingsComponent_div_3_ng_container_1_ng_container_1_Template, 4, 2, "ng-container", 8);
    i0.ɵɵpipe(2, "async");
    i0.ɵɵelementContainerEnd();
  }
  if (rf & 2) {
    var ctx_r2 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngForOf", i0.ɵɵpipeBind1(2, 2, ctx_r2.events$))("ngForTrackBy", ctx_r2.trackByFn);
  }
}
function UpcomingBookingsComponent_div_3_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 6);
    i0.ɵɵtemplate(1, UpcomingBookingsComponent_div_3_ng_container_1_Template, 3, 4, "ng-container", 7);
    i0.ɵɵpipe(2, "async");
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var tmp_3_0;
    var ctx_r2 = i0.ɵɵnextContext();
    var empty_state_r4 = i0.ɵɵreference(8);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", (tmp_3_0 = i0.ɵɵpipeBind1(2, 2, ctx_r2.events$)) == null ? null : tmp_3_0.length)("ngIfElse", empty_state_r4);
  }
}
function UpcomingBookingsComponent_ng_template_5_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 12);
    i0.ɵɵelement(1, "mat-spinner", 13);
    i0.ɵɵelementStart(2, "p");
    i0.ɵɵtext(3, "Retrieving bookings...");
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    i0.ɵɵadvance();
    i0.ɵɵproperty("diameter", 32);
  }
}
function UpcomingBookingsComponent_ng_template_7_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 14)(1, "p");
    i0.ɵɵtext(2, "No bookings found");
    i0.ɵɵelementEnd()();
  }
}
var UpcomingBookingsComponent = /*#__PURE__*/function (_common_1$AsyncHandle) {
  function UpcomingBookingsComponent(_schedule) {
    var _this;
    _classCallCheck(this, UpcomingBookingsComponent);
    _this = _callSuper(this, UpcomingBookingsComponent);
    _this._schedule = _schedule;
    _this.user = (0, common_1.currentUser)();
    _this.loading$ = _this._schedule.loading;
    _this.events$ = _this._schedule.filtered_bookings;
    return _this;
  }
  _inherits(UpcomingBookingsComponent, _common_1$AsyncHandle);
  return _createClass(UpcomingBookingsComponent, [{
    key: "ngOnInit",
    value: function ngOnInit() {
      this._schedule.toggleType('desk', true);
      this._schedule.toggleType('parking', true);
      this.subscription('poll', this._schedule.startPolling());
    }
  }, {
    key: "isEvent",
    value: function isEvent(item) {
      return item instanceof events_1.CalendarEvent;
    }
  }, {
    key: "trackByFn",
    value: function trackByFn(_, item) {
      return item === null || item === void 0 ? void 0 : item.id;
    }
  }]);
}(common_1.AsyncHandler);
_UpcomingBookingsComponent = UpcomingBookingsComponent;
_UpcomingBookingsComponent.ɵfac = function UpcomingBookingsComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _UpcomingBookingsComponent)(i0.ɵɵdirectiveInject(i1.ScheduleStateService));
};
_UpcomingBookingsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _UpcomingBookingsComponent,
  selectors: [["placeos-upcoming-bookings"]],
  features: [i0.ɵɵInheritDefinitionFeature],
  decls: 9,
  vars: 4,
  consts: [["load_state", ""], ["empty_state", ""], ["booking_card", ""], [1, "w-full", "h-full", "flex", "flex-1", "flex-col", "z-0", "bg-base-200"], [1, "flex", "items-center", "text-xl", "font-bold", "p-4", "pl-6"], ["class", "px-4 pb-4 flex-1 h-1/2 overflow-auto space-y-4", 4, "ngIf", "ngIfElse"], [1, "px-4", "pb-4", "flex-1", "h-1/2", "overflow-auto", "space-y-4"], [4, "ngIf", "ngIfElse"], [4, "ngFor", "ngForOf", "ngForTrackBy"], [3, "event", 4, "ngIf", "ngIfElse"], [3, "event"], [3, "booking"], ["loading", "", 1, "h-3/4", "w-full", "flex-1", "flex", "flex-col", "items-center", "justify-center", "space-y-4", "my-6"], [3, "diameter"], ["empty", "", 1, "h-3/4", "w-full", "flex-1", "flex", "flex-col", "items-center", "justify-center", "space-y-2", "p-8", "text-center", "my-6"]],
  template: function UpcomingBookingsComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵelementStart(0, "div", 3)(1, "h3", 4);
      i0.ɵɵtext(2, " Your Bookings ");
      i0.ɵɵelementEnd();
      i0.ɵɵtemplate(3, UpcomingBookingsComponent_div_3_Template, 3, 4, "div", 5);
      i0.ɵɵpipe(4, "async");
      i0.ɵɵelementEnd();
      i0.ɵɵtemplate(5, UpcomingBookingsComponent_ng_template_5_Template, 4, 1, "ng-template", null, 0, i0.ɵɵtemplateRefExtractor)(7, UpcomingBookingsComponent_ng_template_7_Template, 3, 0, "ng-template", null, 1, i0.ɵɵtemplateRefExtractor);
    }
    if (rf & 2) {
      var load_state_r5 = i0.ɵɵreference(6);
      i0.ɵɵadvance(3);
      i0.ɵɵproperty("ngIf", !i0.ɵɵpipeBind1(4, 2, ctx.loading$))("ngIfElse", load_state_r5);
    }
  },
  dependencies: [i2.NgForOf, i2.NgIf, i3.MatProgressSpinner, i4.BookingCardComponent, i5.EventCardComponent, i2.AsyncPipe]
});
exports.UpcomingBookingsComponent = UpcomingBookingsComponent;

/***/ }),

/***/ 20446:
/*!************************************************************!*\
  !*** ./apps/outlook-addin/src/environments/environment.ts ***!
  \************************************************************/
/***/ ((__unused_webpack_module, exports) => {



// This file can be replaced during build by using the `fileReplacements` array.
// `ng build` replaces `environment.ts` with `environment.prod.ts`.
// The list of file replacements can be found in `angular.json`.
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.environment = void 0;
exports.environment = {
  production: false
};
/*
 * For easier debugging in development mode, you can import the following file
 * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.
 *
 * This import should be commented out in production mode because it will have a negative impact
 * on performance if an error is thrown.
 */
// import 'zone.js/plugins/zone-error';  // Included with Angular CLI.

/***/ }),

/***/ 83591:
/*!****************************************!*\
  !*** ./apps/outlook-addin/src/main.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var __NgCli_bootstrap_1 = __webpack_require__(/*! @angular/platform-browser */ 80436);
var core_1 = __webpack_require__(/*! @angular/core */ 37580);
var app_module_1 = __webpack_require__(/*! ./app/app.module */ 82517);
var environment_1 = __webpack_require__(/*! ./environments/environment */ 20446);
if (environment_1.environment.production) {
  (0, core_1.enableProdMode)();
}
__NgCli_bootstrap_1.platformBrowser().bootstrapModule(app_module_1.AppModule)["catch"](function (err) {
  return console.error(err);
});

/***/ }),

/***/ 53819:
/*!************************************************************************************!*\
  !*** ./apps/workplace/src/app/book/meeting-flow/meeting-flow-confirm.component.ts ***!
  \************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _taggedTemplateLiteral = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js */ 9959)["default"]);
var _objectSpread = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/objectSpread2.js */ 34092)["default"]);
var _regeneratorRuntime = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/regeneratorRuntime.js */ 8698)["default"]);
var _asyncToGenerator = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/asyncToGenerator.js */ 95386)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _callSuper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/callSuper.js */ 8513)["default"]);
var _inherits = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/inherits.js */ 58160)["default"]);
var _MeetingFlowConfirmComponent, _templateObject, _templateObject2, _templateObject3, _templateObject4, _templateObject5;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.MeetingFlowConfirmComponent = void 0;
var common_1 = __webpack_require__(/*! @angular/common */ 60316);
var bottom_sheet_1 = __webpack_require__(/*! @angular/material/bottom-sheet */ 15244);
var dialog_1 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var common_2 = __webpack_require__(/*! @placeos/common */ 22797);
var events_1 = __webpack_require__(/*! @placeos/events */ 40569);
var organisation_1 = __webpack_require__(/*! @placeos/organisation */ 2510);
var space_pipe_1 = __webpack_require__(/*! libs/spaces/src/lib/space.pipe */ 22011);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @angular/material/bottom-sheet */ 15244);
var i2 = __webpack_require__(/*! @placeos/events */ 40569);
var i3 = __webpack_require__(/*! @placeos/organisation */ 2510);
var i4 = __webpack_require__(/*! libs/spaces/src/lib/space.pipe */ 22011);
var i5 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var i6 = __webpack_require__(/*! @placeos/common */ 22797);
var i7 = __webpack_require__(/*! @angular/common */ 60316);
var i8 = __webpack_require__(/*! @angular/material/progress-spinner */ 41134);
var i9 = __webpack_require__(/*! @angular/material/chips */ 12772);
var i10 = __webpack_require__(/*! @angular/material/core */ 74646);
var i11 = __webpack_require__(/*! ../../../../../../libs/components/src/lib/icon.component */ 69434);
function MeetingFlowConfirmComponent_button_0_Template(rf, ctx) {
  if (rf & 1) {
    var _r1 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "button", 22);
    i0.ɵɵlistener("click", function MeetingFlowConfirmComponent_button_0_Template_button_click_0_listener() {
      i0.ɵɵrestoreView(_r1);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.dismiss());
    });
    i0.ɵɵelementStart(1, "app-icon");
    i0.ɵɵtext(2, "close");
    i0.ɵɵelementEnd()();
  }
}
function MeetingFlowConfirmComponent_mat_spinner_4_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelement(0, "mat-spinner", 23);
  }
}
function MeetingFlowConfirmComponent_div_18_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 11)(1, "app-icon", 12);
    i0.ɵɵtext(2, "update");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(3, "div", 13);
    i0.ɵɵtext(4);
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance(4);
    i0.ɵɵtextInterpolate(ctx_r1.formatted_recurrence);
  }
}
function MeetingFlowConfirmComponent_div_25_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 24);
    i0.ɵɵtext(1);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", ctx_r1.formattedTime(ctx_r1.tz), " ");
  }
}
function MeetingFlowConfirmComponent_section_26_mat_chip_9_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "mat-chip")(1, "div", 29)(2, "app-icon", 30);
    i0.ɵɵtext(3, "business");
    i0.ɵɵelementEnd();
    i0.ɵɵtext(4);
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var user_r3 = ctx.$implicit;
    i0.ɵɵadvance(4);
    i0.ɵɵtextInterpolate1(" ", user_r3.name || user_r3.email, " ");
  }
}
function MeetingFlowConfirmComponent_section_26_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "section", 25)(1, "app-icon", 9);
    i0.ɵɵtext(2, "done");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(3, "div", 10)(4, "h3");
    i0.ɵɵi18n(5, 2);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(6, "div", 26)(7, "mat-chip-list", 27, 0);
    i0.ɵɵtemplate(9, MeetingFlowConfirmComponent_section_26_mat_chip_9_Template, 5, 1, "mat-chip", 28);
    i0.ɵɵelementEnd()()()();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance(5);
    i0.ɵɵi18nExp(ctx_r1.event.attendees.length)(ctx_r1.event.attendees.length);
    i0.ɵɵi18nApply(5);
    i0.ɵɵadvance(4);
    i0.ɵɵproperty("ngForOf", ctx_r1.event.attendees);
  }
}
function MeetingFlowConfirmComponent_section_27_ng_container_6_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵelementStart(1, "div", 11)(2, "app-icon", 12);
    i0.ɵɵtext(3, "meeting_room");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(4, "div");
    i0.ɵɵtext(5);
    i0.ɵɵelementEnd()();
    i0.ɵɵelementContainerEnd();
  }
  if (rf & 2) {
    var s_r4 = ctx.$implicit;
    var ctx_r1 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance(5);
    i0.ɵɵtextInterpolate2(" ", (ctx_r1.level == null ? null : ctx_r1.level.display_name) || (ctx_r1.level == null ? null : ctx_r1.level.name), ", ", s_r4.display_name || s_r4.name, " ");
  }
}
function MeetingFlowConfirmComponent_section_27_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "section", 31)(1, "app-icon", 9);
    i0.ɵɵtext(2, "done");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(3, "div", 10)(4, "h3");
    i0.ɵɵi18n(5, 3);
    i0.ɵɵelementEnd();
    i0.ɵɵtemplate(6, MeetingFlowConfirmComponent_section_27_ng_container_6_Template, 6, 2, "ng-container", 28);
    i0.ɵɵelementStart(7, "div", 11)(8, "app-icon", 12);
    i0.ɵɵtext(9, "place");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(10, "div");
    i0.ɵɵtext(11);
    i0.ɵɵelementEnd()()()();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance(6);
    i0.ɵɵproperty("ngForOf", ctx_r1.event.resources);
    i0.ɵɵadvance(5);
    i0.ɵɵtextInterpolate(ctx_r1.location);
  }
}
function MeetingFlowConfirmComponent_button_29_Template(rf, ctx) {
  if (rf & 1) {
    var _r5 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "button", 32);
    i0.ɵɵlistener("click", function MeetingFlowConfirmComponent_button_29_Template_button_click_0_listener() {
      i0.ɵɵrestoreView(_r5);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.postForm());
    });
    i0.ɵɵi18n(1, 4);
    i0.ɵɵelementEnd();
  }
}
var MeetingFlowConfirmComponent = /*#__PURE__*/function (_common_2$AsyncHandle) {
  function MeetingFlowConfirmComponent(_sheet_ref, _event_form, _org, _space_pipe, _dialog, _settings) {
    var _this;
    _classCallCheck(this, MeetingFlowConfirmComponent);
    _this = _callSuper(this, MeetingFlowConfirmComponent);
    _this._sheet_ref = _sheet_ref;
    _this._event_form = _event_form;
    _this._org = _org;
    _this._space_pipe = _space_pipe;
    _this._dialog = _dialog;
    _this._settings = _settings;
    _this.show_close = false;
    _this._date = new common_1.DatePipe('en');
    _this.loading = _this._event_form.loading;
    _this.postForm = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
      var result;
      return _regeneratorRuntime().wrap(function _callee$(_context) {
        while (1) switch (_context.prev = _context.next) {
          case 0:
            if (_this.space) {
              _context.next = 6;
              break;
            }
            _context.next = 3;
            return (0, common_2.openConfirmModal)({
              title: 'Make Booking without a Room',
              content: 'You are creating a booking without a room, are you sure?',
              icon: {
                content: 'event_available'
              }
            }, _this._dialog);
          case 3:
            result = _context.sent;
            if (!(result.reason !== 'done')) {
              _context.next = 6;
              break;
            }
            return _context.abrupt("return");
          case 6:
            _context.next = 8;
            return _this._event_form.postForm()["catch"](function (_) {
              (0, common_2.notifyError)(_);
              throw _;
            });
          case 8:
            _this.dismiss(true);
          case 9:
          case "end":
            return _context.stop();
        }
      }, _callee);
    }));
    _this.cancelPost = function () {
      return _this._event_form.cancelPostForm();
    };
    _this.dismiss = function (e) {
      var _this$_sheet_ref;
      return (_this$_sheet_ref = _this._sheet_ref) === null || _this$_sheet_ref === void 0 ? void 0 : _this$_sheet_ref.dismiss(e);
    };
    _this._space = _this.event.resources[0];
    return _this;
  }
  _inherits(MeetingFlowConfirmComponent, _common_2$AsyncHandle);
  return _createClass(MeetingFlowConfirmComponent, [{
    key: "formattedTime",
    value: function formattedTime(tz) {
      var date = this.event.date;
      var date_end = this.event.date_end;
      var all_day = this.event.all_day;
      var tz_format = this._date.transform(date, 'z', tz);
      var start_date = this._date.transform(date, 'MMM d', tz);
      var start_time = this._date.transform(date, this.time_format, tz);
      var end_date = this._date.transform(date_end, 'MMM d', tz);
      var end_time = this._date.transform(date_end, this.time_format, tz);
      if (this.is_multiday) {
        return "".concat(start_date).concat(all_day ? '' : ', ' + start_time, " - ").concat(end_date).concat(all_day ? '' : ', ' + end_time);
      } else if (all_day) {
        return 'All Day';
      }
      return "".concat(start_time, " - ").concat(end_time, " ").concat('(' + tz_format + ')');
    }
  }, {
    key: "is_multiday",
    get: function get() {
      return this.event.duration > 24 * 60;
    }
  }, {
    key: "time_format",
    get: function get() {
      return this._settings.time_format;
    }
  }, {
    key: "timezone",
    get: function get() {
      return this._settings.get('app.events.use_building_timezone') ? this._org.building.timezone : '';
    }
  }, {
    key: "tz",
    get: function get() {
      var tz = this.timezone;
      if (!tz) return '';
      return (0, common_2.getTimezoneOffsetString)(tz);
    }
  }, {
    key: "formatted_recurrence",
    get: function get() {
      return (0, events_1.formatRecurrence)(_objectSpread(_objectSpread({}, this.event.recurrence), {}, {
        start: this.event.date || this.event.recurrence.start
      }));
    }
  }, {
    key: "event",
    get: function get() {
      return this._event_form.form.getRawValue();
    }
  }, {
    key: "space",
    get: function get() {
      return this._space;
    }
  }, {
    key: "level",
    get: function get() {
      return this._org.levelWithID(this.space.zones);
    }
  }, {
    key: "location",
    get: function get() {
      var _this2 = this;
      var building = this._org.buildings.find(function (_) {
        return _this2.space.zones.includes(_.id);
      });
      return (building === null || building === void 0 ? void 0 : building.address) || (building === null || building === void 0 ? void 0 : building.display_name) || (building === null || building === void 0 ? void 0 : building.name);
    }
  }, {
    key: "ngOnInit",
    value: function () {
      var _ngOnInit = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {
        return _regeneratorRuntime().wrap(function _callee2$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              _context2.next = 2;
              return this._space_pipe.transform(this.event.resources[0].email);
            case 2:
              _context2.t0 = _context2.sent;
              if (_context2.t0) {
                _context2.next = 5;
                break;
              }
              _context2.t0 = this._space;
            case 5:
              this._space = _context2.t0;
            case 6:
            case "end":
              return _context2.stop();
          }
        }, _callee2, this);
      }));
      function ngOnInit() {
        return _ngOnInit.apply(this, arguments);
      }
      return ngOnInit;
    }()
  }, {
    key: "optionList",
    value: function optionList(item) {
      var _item$option_list;
      return (_item$option_list = item.option_list) === null || _item$option_list === void 0 ? void 0 : _item$option_list.map(function (_) {
        return _.name;
      }).join('\n');
    }
  }]);
}(common_2.AsyncHandler);
_MeetingFlowConfirmComponent = MeetingFlowConfirmComponent;
_MeetingFlowConfirmComponent.ɵfac = function MeetingFlowConfirmComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _MeetingFlowConfirmComponent)(i0.ɵɵdirectiveInject(i1.MatBottomSheetRef, 8), i0.ɵɵdirectiveInject(i2.EventFormService), i0.ɵɵdirectiveInject(i3.OrganisationService), i0.ɵɵdirectiveInject(i4.SpacePipe), i0.ɵɵdirectiveInject(i5.MatDialog), i0.ɵɵdirectiveInject(i6.SettingsService));
};
_MeetingFlowConfirmComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _MeetingFlowConfirmComponent,
  selectors: [["meeting-flow-confirm"]],
  inputs: {
    show_close: "show_close"
  },
  features: [i0.ɵɵProvidersFeature([space_pipe_1.SpacePipe]), i0.ɵɵInheritDefinitionFeature],
  decls: 31,
  vars: 17,
  consts: function consts() {
    var i18n_0;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_5359169455682005018$$APPS_WORKPLACE_SRC_APP_BOOK_MEETING_FLOW_MEETING_FLOW_CONFIRM_COMPONENT_TS_0 = goog.getMsg("Confirm Meeting booking");
      i18n_0 = MSG_EXTERNAL_5359169455682005018$$APPS_WORKPLACE_SRC_APP_BOOK_MEETING_FLOW_MEETING_FLOW_CONFIRM_COMPONENT_TS_0;
    } else {
      i18n_0 = $localize(_templateObject || (_templateObject = _taggedTemplateLiteral([":\u241F0cd25444b7557b2f0c8453f99ac6ac586e2734ef\u241F5359169455682005018:Confirm Meeting booking"])));
    }
    var i18n_1;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_2503133629493199843$$APPS_WORKPLACE_SRC_APP_BOOK_MEETING_FLOW_MEETING_FLOW_CONFIRM_COMPONENT_TS_1 = goog.getMsg("{VAR_PLURAL, plural, =1 {attendee } other {attendees }}");
      i18n_1 = MSG_EXTERNAL_2503133629493199843$$APPS_WORKPLACE_SRC_APP_BOOK_MEETING_FLOW_MEETING_FLOW_CONFIRM_COMPONENT_TS_1;
    } else {
      i18n_1 = $localize(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([":\u241F64205c6826cfcef845a49a0f970cb8b70b58dd35\u241F2503133629493199843:{VAR_PLURAL, plural, =1 {attendee } other {attendees }}"])));
    }
    i18n_1 = i0.ɵɵi18nPostprocess(i18n_1, {
      "VAR_PLURAL": "\uFFFD1\uFFFD"
    });
    var i18n_2;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_6605563295675126050$$APPS_WORKPLACE_SRC_APP_BOOK_MEETING_FLOW_MEETING_FLOW_CONFIRM_COMPONENT_TS_2 = goog.getMsg(" {$interpolation} {$icu} ", {
        "icu": i18n_1,
        "interpolation": "\uFFFD0\uFFFD"
      }, {
        original_code: {
          "icu": "{event.attendees.length, plural,\n                        =1 {attendee }\n                        other {attendees }\n                    }",
          "interpolation": "{{ event.attendees.length }}"
        }
      });
      i18n_2 = MSG_EXTERNAL_6605563295675126050$$APPS_WORKPLACE_SRC_APP_BOOK_MEETING_FLOW_MEETING_FLOW_CONFIRM_COMPONENT_TS_2;
    } else {
      i18n_2 = $localize(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([":\u241F5220326dfa43d08a2aad30893d833f17896c65af\u241F6605563295675126050: ", ":INTERPOLATION: ", ":ICU: "])), "\uFFFD0\uFFFD", i18n_1);
    }
    var i18n_3;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_2833154702556922571$$APPS_WORKPLACE_SRC_APP_BOOK_MEETING_FLOW_MEETING_FLOW_CONFIRM_COMPONENT_TS_3 = goog.getMsg("Booked Room");
      i18n_3 = MSG_EXTERNAL_2833154702556922571$$APPS_WORKPLACE_SRC_APP_BOOK_MEETING_FLOW_MEETING_FLOW_CONFIRM_COMPONENT_TS_3;
    } else {
      i18n_3 = $localize(_templateObject4 || (_templateObject4 = _taggedTemplateLiteral([":\u241F7ace4094f7f2f91e71cf8e2a5602a04062a20a47\u241F2833154702556922571:Booked Room"])));
    }
    var i18n_4;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_3141803775366633134$$APPS_WORKPLACE_SRC_APP_BOOK_MEETING_FLOW_MEETING_FLOW_CONFIRM_COMPONENT_TS_4 = goog.getMsg(" Confirm ");
      i18n_4 = MSG_EXTERNAL_3141803775366633134$$APPS_WORKPLACE_SRC_APP_BOOK_MEETING_FLOW_MEETING_FLOW_CONFIRM_COMPONENT_TS_4;
    } else {
      i18n_4 = $localize(_templateObject5 || (_templateObject5 = _taggedTemplateLiteral([":\u241F0ad83be7464a0a2e8d100342e144bc3fbc789f9d\u241F3141803775366633134: Confirm "])));
    }
    return [["chipList", ""], i18n_0, i18n_2, i18n_3, i18n_4, ["icon", "", "matRipple", "", "name", "close-meeting-confirm", 3, "click", 4, "ngIf"], [1, "flex", "items-center", "justify-between", "px-2"], ["diameter", "32", 4, "ngIf"], ["period", "", 1, "flex", "space-x-1", "px-2"], [1, "text-success", "mt-1"], ["details", "", 1, "leading-6"], [1, "flex", "items-center", "space-x-2"], [1, "text-2xl"], ["date", ""], ["class", "flex items-center space-x-2", 4, "ngIf"], [1, "flex", "flex-col", "leading-tight"], ["time", ""], ["class", "text-xs opacity-30", 4, "ngIf"], ["attendees", "", "class", "flex space-x-1 px-2", 4, "ngIf"], ["spaces", "", "class", "flex space-x-1 px-2", 4, "ngIf"], [1, "p-2", "w-full", "border-t", "border-base-200", "mt-4"], ["btn", "", "name", "confirm-meeting", "matRipple", "", "class", "w-full", 3, "click", 4, "ngIf"], ["icon", "", "matRipple", "", "name", "close-meeting-confirm", 3, "click"], ["diameter", "32"], [1, "text-xs", "opacity-30"], ["attendees", "", 1, "flex", "space-x-1", "px-2"], ["attendee-list", ""], ["aria-label", "User selection"], [4, "ngFor", "ngForOf"], [1, "flex", "items-center"], [1, "mr-2"], ["spaces", "", 1, "flex", "space-x-1", "px-2"], ["btn", "", "name", "confirm-meeting", "matRipple", "", 1, "w-full", 3, "click"]];
  },
  template: function MeetingFlowConfirmComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵtemplate(0, MeetingFlowConfirmComponent_button_0_Template, 3, 0, "button", 5);
      i0.ɵɵelementStart(1, "header", 6)(2, "h2");
      i0.ɵɵi18n(3, 1);
      i0.ɵɵelementEnd();
      i0.ɵɵtemplate(4, MeetingFlowConfirmComponent_mat_spinner_4_Template, 1, 0, "mat-spinner", 7);
      i0.ɵɵpipe(5, "async");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(6, "section", 8)(7, "app-icon", 9);
      i0.ɵɵtext(8, "done");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(9, "div", 10)(10, "h3");
      i0.ɵɵtext(11);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(12, "div", 11)(13, "app-icon", 12);
      i0.ɵɵtext(14, "today");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(15, "div", 13);
      i0.ɵɵtext(16);
      i0.ɵɵpipe(17, "date");
      i0.ɵɵelementEnd()();
      i0.ɵɵtemplate(18, MeetingFlowConfirmComponent_div_18_Template, 5, 1, "div", 14);
      i0.ɵɵelementStart(19, "div", 11)(20, "app-icon", 12);
      i0.ɵɵtext(21, "schedule");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(22, "div", 15)(23, "div", 16);
      i0.ɵɵtext(24);
      i0.ɵɵelementEnd();
      i0.ɵɵtemplate(25, MeetingFlowConfirmComponent_div_25_Template, 2, 1, "div", 17);
      i0.ɵɵelementEnd()()()();
      i0.ɵɵtemplate(26, MeetingFlowConfirmComponent_section_26_Template, 10, 3, "section", 18)(27, MeetingFlowConfirmComponent_section_27_Template, 12, 2, "section", 19);
      i0.ɵɵelementStart(28, "footer", 20);
      i0.ɵɵtemplate(29, MeetingFlowConfirmComponent_button_29_Template, 2, 0, "button", 21);
      i0.ɵɵpipe(30, "async");
      i0.ɵɵelementEnd();
    }
    if (rf & 2) {
      i0.ɵɵproperty("ngIf", ctx.show_close);
      i0.ɵɵadvance(4);
      i0.ɵɵproperty("ngIf", i0.ɵɵpipeBind1(5, 10, ctx.loading));
      i0.ɵɵadvance(7);
      i0.ɵɵtextInterpolate(ctx.event.title || "Meeting Details");
      i0.ɵɵadvance(5);
      i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(17, 12, ctx.event.date, "fullDate"));
      i0.ɵɵadvance(2);
      i0.ɵɵproperty("ngIf", ctx.event.recurrence == null ? null : ctx.event.recurrence.pattern);
      i0.ɵɵadvance(6);
      i0.ɵɵtextInterpolate(ctx.formattedTime());
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", ctx.timezone);
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", ctx.event.attendees.length);
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", ctx.space == null ? null : ctx.space.id);
      i0.ɵɵadvance(2);
      i0.ɵɵproperty("ngIf", !i0.ɵɵpipeBind1(30, 15, ctx.loading));
    }
  },
  dependencies: [i7.NgForOf, i7.NgIf, i8.MatProgressSpinner, i9.MatChip, i10.MatRipple, i11.IconComponent, i7.AsyncPipe, i7.DatePipe],
  styles: ["section[_ngcontent-%COMP%]    > app-icon[_ngcontent-%COMP%] {\n                font-size: 1.5rem;\n            }\n\n            h2[_ngcontent-%COMP%] {\n                font-size: 1.5rem;\n                font-weight: medium;\n                margin-bottom: 0.5rem;\n            }\n\n            h3[_ngcontent-%COMP%] {\n                font-size: 1.25rem;\n                font-weight: medium;\n                margin: 0.5rem 0;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1lZXRpbmctZmxvdy1jb25maXJtLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1lBQ1k7Z0JBQ0ksaUJBQWlCO1lBQ3JCOztZQUVBO2dCQUNJLGlCQUFpQjtnQkFDakIsbUJBQW1CO2dCQUNuQixxQkFBcUI7WUFDekI7O1lBRUE7Z0JBQ0ksa0JBQWtCO2dCQUNsQixtQkFBbUI7Z0JBQ25CLGdCQUFnQjtZQUNwQiIsImZpbGUiOiJtZWV0aW5nLWZsb3ctY29uZmlybS5jb21wb25lbnQudHMiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIHNlY3Rpb24gPiBhcHAtaWNvbiB7XG4gICAgICAgICAgICAgICAgZm9udC1zaXplOiAxLjVyZW07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGgyIHtcbiAgICAgICAgICAgICAgICBmb250LXNpemU6IDEuNXJlbTtcbiAgICAgICAgICAgICAgICBmb250LXdlaWdodDogbWVkaXVtO1xuICAgICAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDAuNXJlbTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaDMge1xuICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMS4yNXJlbTtcbiAgICAgICAgICAgICAgICBmb250LXdlaWdodDogbWVkaXVtO1xuICAgICAgICAgICAgICAgIG1hcmdpbjogMC41cmVtIDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICJdfQ== */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2FwcHMvd29ya3BsYWNlL3NyYy9hcHAvYm9vay9tZWV0aW5nLWZsb3cvbWVldGluZy1mbG93LWNvbmZpcm0uY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxpQkFBaUI7WUFDckI7O1lBRUE7Z0JBQ0ksaUJBQWlCO2dCQUNqQixtQkFBbUI7Z0JBQ25CLHFCQUFxQjtZQUN6Qjs7WUFFQTtnQkFDSSxrQkFBa0I7Z0JBQ2xCLG1CQUFtQjtnQkFDbkIsZ0JBQWdCO1lBQ3BCOztBQUVaLG83QkFBbzdCIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICBzZWN0aW9uID4gYXBwLWljb24ge1xuICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMS41cmVtO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBoMiB7XG4gICAgICAgICAgICAgICAgZm9udC1zaXplOiAxLjVyZW07XG4gICAgICAgICAgICAgICAgZm9udC13ZWlnaHQ6IG1lZGl1bTtcbiAgICAgICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAwLjVyZW07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGgzIHtcbiAgICAgICAgICAgICAgICBmb250LXNpemU6IDEuMjVyZW07XG4gICAgICAgICAgICAgICAgZm9udC13ZWlnaHQ6IG1lZGl1bTtcbiAgICAgICAgICAgICAgICBtYXJnaW46IDAuNXJlbSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAiXSwic291cmNlUm9vdCI6IiJ9 */"]
});
exports.MeetingFlowConfirmComponent = MeetingFlowConfirmComponent;

/***/ }),

/***/ 75323:
/*!***********************************************************************!*\
  !*** ./apps/workplace/src/app/new-schedule/schedule-state.service.ts ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _createForOfIteratorHelper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createForOfIteratorHelper.js */ 36350)["default"]);
var _toConsumableArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/toConsumableArray.js */ 86033)["default"]);
var _regeneratorRuntime = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/regeneratorRuntime.js */ 8698)["default"]);
var _asyncToGenerator = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/asyncToGenerator.js */ 95386)["default"]);
var _objectSpread = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/objectSpread2.js */ 34092)["default"]);
var _slicedToArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/slicedToArray.js */ 6282)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _callSuper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/callSuper.js */ 8513)["default"]);
var _inherits = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/inherits.js */ 58160)["default"]);
var _ScheduleStateService;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.ScheduleStateService = void 0;
var dialog_1 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var bookings_1 = __webpack_require__(/*! @placeos/bookings */ 85616);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var events_1 = __webpack_require__(/*! @placeos/events */ 40569);
var organisation_1 = __webpack_require__(/*! @placeos/organisation */ 2510);
var spaces_1 = __webpack_require__(/*! @placeos/spaces */ 44855);
var ts_client_1 = __webpack_require__(/*! @placeos/ts-client */ 35713);
var date_fns_1 = __webpack_require__(/*! date-fns */ 25773);
var rxjs_1 = __webpack_require__(/*! rxjs */ 15681);
var operators_1 = __webpack_require__(/*! rxjs/operators */ 97303);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @placeos/common */ 22797);
var i2 = __webpack_require__(/*! @placeos/organisation */ 2510);
var i3 = __webpack_require__(/*! @placeos/bookings */ 85616);
var i4 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var ScheduleStateService = /*#__PURE__*/function (_common_1$AsyncHandle) {
  function ScheduleStateService(_settings, _org, _lockers, _dialog, _parking) {
    var _this;
    _classCallCheck(this, ScheduleStateService);
    _this = _callSuper(this, ScheduleStateService);
    _this._settings = _settings;
    _this._org = _org;
    _this._lockers = _lockers;
    _this._dialog = _dialog;
    _this._parking = _parking;
    _this._poll = new rxjs_1.BehaviorSubject(0);
    _this._poll_type = new rxjs_1.BehaviorSubject('api');
    _this._loading = new rxjs_1.BehaviorSubject(false);
    _this._filters = new rxjs_1.BehaviorSubject({
      shown_types: ['event', 'desk', 'parking', 'visitor', 'locker', 'group-event']
    });
    _this._date = new rxjs_1.BehaviorSubject(Date.now());
    _this._update = (0, rxjs_1.combineLatest)([_this._date, _this._poll]).pipe((0, operators_1.debounceTime)(500), (0, operators_1.tap)(function (_) {
      return _this._loading.next(true);
    }));
    _this._deleted = [];
    _this._space_bookings = _this._org.active_building.pipe((0, operators_1.filter)(function (_) {
      return !!_;
    }), (0, operators_1.distinctUntilKeyChanged)('id'), (0, operators_1.debounceTime)(300), (0, operators_1.tap)(function (_) {
      return _this.unsubWith('bind:');
    }), (0, operators_1.switchMap)(function (_ref) {
      var id = _ref.id;
      _this._loading.next(true);
      return (0, spaces_1.requestSpacesForZone)(id);
    }),
    // Get list of spaces for building
    (0, operators_1.distinctUntilChanged)(function (_ref2, _ref3) {
      var _ref4 = _slicedToArray(_ref2, 1),
        s1 = _ref4[0];
      var _ref5 = _slicedToArray(_ref3, 1),
        s2 = _ref5[0];
      return s1 !== s2;
    }), (0, operators_1.switchMap)(function (list) {
      _this._loading.next(false);
      return (0, rxjs_1.combineLatest)((list || []).map(function (space) {
        var binding = (0, ts_client_1.getModule)(space.id, 'Bookings').binding('bookings');
        var obs = binding.listen().pipe((0, operators_1.map)(function (event_list) {
          return (event_list || []).map(function (i) {
            return new events_1.CalendarEvent(_objectSpread(_objectSpread({}, i), {}, {
              resources: i.attendees.filter(function (_) {
                return _.email === space.email || _.resource;
              }),
              system: space
            }));
          });
        }), (0, operators_1.catchError)(function (_) {
          return (0, rxjs_1.of)([]);
        }));
        if (!_this.hasSubscription("bind:".concat(space.id))) {
          _this.subscription("bind:".concat(space.id), binding.bind());
        }
        return obs;
      }));
    }), (0, operators_1.map)(function (_) {
      return (0, common_1.flatten)(_);
    }), (0, operators_1.shareReplay)(1));
    _this.ws_events = (0, rxjs_1.combineLatest)([_this._space_bookings, _this._update]).pipe((0, operators_1.map)(function (_ref6) {
      var _ref7 = _slicedToArray(_ref6, 2),
        _ = _ref7[0],
        _ref7$ = _slicedToArray(_ref7[1], 1),
        date = _ref7$[0];
      var user = (0, common_1.currentUser)();
      return _.filter(function (_) {
        var _$linked_bookings;
        return (0, date_fns_1.isSameDay)(_.date, date) && (_.host.toLowerCase() === user.email.toLowerCase() || _.attendees.find(function (a) {
          return a.email.toLowerCase() === user.email.toLowerCase();
        })) && !((_$linked_bookings = _.linked_bookings) !== null && _$linked_bookings !== void 0 && _$linked_bookings.find(function (b) {
          return b.booking_type === 'group-event';
        }));
      });
    }));
    /** List of calendar events for the selected date */
    _this.api_events = _this._update.pipe((0, operators_1.switchMap)(function (_ref8) {
      var _ref9 = _slicedToArray(_ref8, 1),
        date = _ref9[0];
      var query = {
        period_start: (0, date_fns_1.getUnixTime)((0, date_fns_1.startOfDay)(date)),
        period_end: (0, date_fns_1.getUnixTime)((0, date_fns_1.endOfDay)(date))
      };
      return _this._settings.get('app.events.use_bookings') ? (0, bookings_1.queryBookings)(_objectSpread(_objectSpread({}, query), {}, {
        type: 'room'
      })).pipe((0, operators_1.map)(function (_) {
        return _.map(function (i) {
          return (0, events_1.newCalendarEventFromBooking)(i);
        });
      }), (0, operators_1.catchError)(function (_) {
        return (0, rxjs_1.of)([]);
      })) : (0, events_1.queryEvents)(_objectSpread({}, query)).pipe((0, operators_1.catchError)(function (_) {
        return (0, rxjs_1.of)([]);
      }));
    }), (0, operators_1.shareReplay)(1));
    /** List of calendar events for the selected date */
    _this.raw_events = (0, rxjs_1.combineLatest)([_this._poll_type]).pipe((0, operators_1.switchMap)(function (_ref10) {
      var _ref11 = _slicedToArray(_ref10, 1),
        t = _ref11[0];
      return t === 'api' ? _this.api_events : _this.ws_events;
    }), (0, operators_1.tap)(function () {
      return _this.timeout('end_loading', function () {
        return _this._loading.next(false);
      });
    }), (0, operators_1.shareReplay)(1));
    /** List of calendar events for the selected date */
    _this.events = _this.raw_events.pipe((0, operators_1.map)(function (_) {
      return _.filter(function (_) {
        var _$extension_data;
        return !((_$extension_data = _.extension_data) !== null && _$extension_data !== void 0 && _$extension_data.shared_event);
      });
    }));
    /** List of desk bookings for the selected date */
    _this.visitors = _this._update.pipe((0, operators_1.switchMap)(function (_ref12) {
      var _ref13 = _slicedToArray(_ref12, 1),
        date = _ref13[0];
      return (0, bookings_1.queryBookings)({
        period_start: (0, date_fns_1.getUnixTime)((0, date_fns_1.startOfDay)(date)),
        period_end: (0, date_fns_1.getUnixTime)((0, date_fns_1.endOfDay)(date)),
        type: 'visitor'
      }).pipe((0, operators_1.catchError)(function (_) {
        return (0, rxjs_1.of)([]);
      }));
    }), (0, operators_1.map)(function (_) {
      return _.filter(function (_) {
        return !_.parent_id && !_.linked_event;
      });
    }), (0, operators_1.tap)(function () {
      return _this.timeout('end_loading', function () {
        return _this._loading.next(false);
      });
    }), (0, operators_1.shareReplay)(1));
    /** List of desk bookings for the selected date */
    _this.desks = _this._update.pipe((0, operators_1.switchMap)(function (_ref14) {
      var _ref15 = _slicedToArray(_ref14, 1),
        date = _ref15[0];
      return (0, bookings_1.queryBookings)({
        period_start: (0, date_fns_1.getUnixTime)((0, date_fns_1.startOfDay)(date)),
        period_end: (0, date_fns_1.getUnixTime)((0, date_fns_1.endOfDay)(date)),
        include_checked_out: true,
        type: 'desk'
      }).pipe((0, operators_1.catchError)(function (_) {
        return (0, rxjs_1.of)([]);
      }));
    }), (0, operators_1.tap)(function () {
      return _this.timeout('end_loading', function () {
        return _this._loading.next(false);
      });
    }), (0, operators_1.shareReplay)(1));
    /** List of parking bookings for the selected date */
    _this.parking = _this._update.pipe((0, operators_1.switchMap)(function (_ref16) {
      var _ref17 = _slicedToArray(_ref16, 1),
        date = _ref17[0];
      return (0, bookings_1.queryBookings)({
        period_start: (0, date_fns_1.getUnixTime)((0, date_fns_1.startOfDay)(date)),
        period_end: (0, date_fns_1.getUnixTime)((0, date_fns_1.endOfDay)(date)),
        type: 'parking',
        include_deleted: 'recurring'
      }).pipe((0, operators_1.catchError)(function (_) {
        return (0, rxjs_1.of)([]);
      }));
    }), (0, operators_1.tap)(function () {
      return _this.timeout('end_loading', function () {
        return _this._loading.next(false);
      });
    }), (0, operators_1.shareReplay)(1));
    /** List of calendar events for the selected date */
    _this.group_events = _this.raw_events.pipe((0, operators_1.map)(function (_) {
      return _.filter(function (_) {
        var _$extension_data2;
        return (_$extension_data2 = _.extension_data) === null || _$extension_data2 === void 0 ? void 0 : _$extension_data2.shared_event;
      });
    }));
    /** List of parking bookings for the selected date */
    _this.lockers = (0, rxjs_1.combineLatest)([_this._org.active_building.pipe((0, operators_1.filter)(function (_) {
      return !!_;
    }), (0, operators_1.distinctUntilKeyChanged)('id')), _this._lockers.lockers$]).pipe((0, operators_1.debounceTime)(300), (0, operators_1.switchMap)( /*#__PURE__*/function () {
      var _ref18 = _asyncToGenerator(function (_ref19) {
        var _ref20 = _slicedToArray(_ref19, 2),
          _ = _ref20[0],
          lockers = _ref20[1];
        return /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
          var system_id, mod, my_lockers;
          return _regeneratorRuntime().wrap(function _callee$(_context) {
            while (1) switch (_context.prev = _context.next) {
              case 0:
                system_id = _this._org.binding('lockers');
                if (system_id) {
                  _context.next = 3;
                  break;
                }
                return _context.abrupt("return", [[], lockers]);
              case 3:
                mod = (0, ts_client_1.getModule)(system_id, 'LockerLocations');
                _context.next = 6;
                return mod.execute('lockers_allocated_to_me')["catch"](function (_) {
                  return [];
                });
              case 6:
                my_lockers = _context.sent;
                return _context.abrupt("return", [my_lockers, lockers]);
              case 8:
              case "end":
                return _context.stop();
            }
          }, _callee);
        })();
      });
      return function (_x) {
        return _ref18.apply(this, arguments);
      };
    }()), (0, operators_1.map)(function (_ref21) {
      var _ref22 = _slicedToArray(_ref21, 2),
        my_lockers = _ref22[0],
        lockers = _ref22[1];
      return my_lockers.map(function (i) {
        var _this$_org$levelWithI;
        var locker = lockers.find(function (lkr) {
          return lkr.id === i.locker_id;
        });
        if (!locker && (!i.level || !i.building)) return null;
        i.level = i.level || (locker === null || locker === void 0 ? void 0 : locker.level_id);
        i.building = i.building || ((_this$_org$levelWithI = _this._org.levelWithID([locker === null || locker === void 0 ? void 0 : locker.level_id])) === null || _this$_org$levelWithI === void 0 ? void 0 : _this$_org$levelWithI.parent_id);
        return new bookings_1.Booking({
          date: (0, date_fns_1.startOfDay)(Date.now()).valueOf(),
          duration: 24 * 60 - 1,
          title: 'Locker Booking',
          description: i.locker_name,
          booking_type: 'locker',
          all_day: true,
          asset_id: locker.map_id,
          asset_name: i.locker_name,
          zones: [i.building, i.level],
          extension_data: {
            // map_id: i.locker_id || locker.map_id,
          }
        });
      }).filter(function (item) {
        return item;
      });
    }), (0, operators_1.catchError)(function (e) {
      console.error(e);
      return (0, rxjs_1.of)([]);
    }), (0, operators_1.tap)(function () {
      return _this.timeout('end_loading', function () {
        return _this._loading.next(false);
      });
    }), (0, operators_1.shareReplay)(1));
    /** List of events and bookings for the selected date */
    _this.bookings = (0, rxjs_1.combineLatest)([_this.events, _this.visitors, _this.desks, _this.parking, _this.lockers, _this.group_events]).pipe((0, operators_1.map)(function (_ref23) {
      var _ref24 = _slicedToArray(_ref23, 6),
        events = _ref24[0],
        visitors = _ref24[1],
        desks = _ref24[2],
        parking = _ref24[3],
        lockers = _ref24[4],
        group_events = _ref24[5];
      var filtered_events = events.filter(function (ev) {
        var _ev$linked_bookings$;
        return !desks.find(function (bkn) {
          return "".concat(ev.meeting_id) === "".concat(bkn.id);
        }) && ((_ev$linked_bookings$ = ev.linked_bookings[0]) === null || _ev$linked_bookings$ === void 0 ? void 0 : _ev$linked_bookings$.booking_type) !== 'group-event';
      });
      return [].concat(_toConsumableArray(filtered_events), _toConsumableArray(visitors), _toConsumableArray(desks), _toConsumableArray(parking), _toConsumableArray(lockers), _toConsumableArray(group_events)).sort(function (a, b) {
        return a.date - b.date;
      });
    }));
    /** Filtered list of events and bookings for the selected date */
    _this.filtered_bookings = (0, rxjs_1.combineLatest)([_this.bookings, _this._filters]).pipe((0, operators_1.map)(function (_ref25) {
      var _ref26 = _slicedToArray(_ref25, 2),
        bkns = _ref26[0],
        filters = _ref26[1];
      return bkns.filter(function (_) {
        var _$extension_data3, _filters$shown_types, _$extension_data4, _filters$shown_types2, _filters$shown_types3;
        if (_this._deleted.includes(_.instance ? "".concat(_.id, "|").concat(_.instance) : _.id)) return false;
        if ((_$extension_data3 = _.extension_data) !== null && _$extension_data3 !== void 0 && _$extension_data3.shared_event && !(filters !== null && filters !== void 0 && (_filters$shown_types = filters.shown_types) !== null && _filters$shown_types !== void 0 && _filters$shown_types.includes('group-event'))) {
          return false;
        }
        if (_ instanceof events_1.CalendarEvent && !((_$extension_data4 = _.extension_data) !== null && _$extension_data4 !== void 0 && _$extension_data4.shared_event) && !(filters !== null && filters !== void 0 && (_filters$shown_types2 = filters.shown_types) !== null && _filters$shown_types2 !== void 0 && _filters$shown_types2.includes('event'))) {
          return false;
        } else if (_ instanceof events_1.CalendarEvent) return true;
        return filters === null || filters === void 0 || (_filters$shown_types3 = filters.shown_types) === null || _filters$shown_types3 === void 0 ? void 0 : _filters$shown_types3.includes(_.booking_type);
      });
    }));
    /** Currently selected date */
    _this.filters = _this._filters.asObservable();
    /** Currently selected date */
    _this.date = _this._date.asObservable();
    /** Whether events and bookings are loading */
    _this.loading = _this._loading.asObservable();
    _this._ignore_cancel = [];
    _this._checkCancel = (0, rxjs_1.combineLatest)([common_1.current_user, (0, rxjs_1.interval)(60 * 1000).pipe((0, operators_1.startWith)(0))]).pipe((0, operators_1.filter)(function (_ref27) {
      var _ref28 = _slicedToArray(_ref27, 1),
        u = _ref28[0];
      return !!u;
    }), (0, operators_1.map)( /*#__PURE__*/function () {
      var _ref29 = _asyncToGenerator(function (_ref30) {
        var _ref31 = _slicedToArray(_ref30, 1),
          user = _ref31[0];
        return /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(_auto_release$resourc) {
          var is_home, auto_release, time_before, _iterator, _step, type, bookings, check_block, _iterator2, _step2, booking, diff, time, close_after, wording, result;
          return _regeneratorRuntime().wrap(function _callee2$(_context2) {
            while (1) switch (_context2.prev = _context2.next) {
              case 0:
                is_home = user.location !== 'wfo';
                auto_release = _this._settings.get('app.auto_release');
                if (!(auto_release && is_home && (auto_release.time_after || auto_release.time_before) && (_auto_release$resourc = auto_release.resources) !== null && _auto_release$resourc !== void 0 && _auto_release$resourc.length)) {
                  _context2.next = 57;
                  break;
                }
                time_before = Math.min(60, auto_release.time_before || 0);
                _iterator = _createForOfIteratorHelper(auto_release.resources);
                _context2.prev = 5;
                _iterator.s();
              case 7:
                if ((_step = _iterator.n()).done) {
                  _context2.next = 49;
                  break;
                }
                type = _step.value;
                _context2.next = 11;
                return (0, bookings_1.queryBookings)({
                  period_start: (0, date_fns_1.getUnixTime)((0, date_fns_1.startOfMinute)(Date.now())),
                  period_end: (0, date_fns_1.getUnixTime)((0, date_fns_1.addMinutes)(Date.now(), (auto_release.time_after || 5) + time_before)),
                  type: type
                }).toPromise();
              case 11:
                bookings = _context2.sent;
                check_block = (auto_release.time_after || 0) + time_before;
                _iterator2 = _createForOfIteratorHelper(bookings);
                _context2.prev = 14;
                _iterator2.s();
              case 16:
                if ((_step2 = _iterator2.n()).done) {
                  _context2.next = 39;
                  break;
                }
                booking = _step2.value;
                if (!(_this._ignore_cancel.includes(booking.id) || booking.checked_in || booking.rejected)) {
                  _context2.next = 20;
                  break;
                }
                return _context2.abrupt("continue", 37);
              case 20:
                _this._dialog.closeAll();
                diff = (0, date_fns_1.differenceInMinutes)((0, date_fns_1.addMinutes)(booking.date, auto_release.time_after || 0), Date.now());
                if (!(diff > check_block || diff < 0)) {
                  _context2.next = 24;
                  break;
                }
                return _context2.abrupt("continue", 37);
              case 24:
                time = (0, date_fns_1.addMinutes)(booking.date, auto_release.time_after || 0);
                close_after = (0, date_fns_1.differenceInMilliseconds)(time.getTime() + 60 * 1000, Date.now());
                wording = type === 'parking' ? 'reservation' : 'booking';
                _context2.next = 29;
                return (0, common_1.openConfirmModal)({
                  title: "Keep ".concat(type, " ").concat(wording),
                  content: "You have indicated you are not in the office. \n                                Your  ".concat(wording, " for \"<i>").concat(booking.asset_name || booking.title, "</i>\" at ").concat((0, date_fns_1.format)(booking.date, _this._settings.time_format), " will be cancelled at ").concat((0, date_fns_1.format)(time, _this._settings.time_format), ".<br/><br/>\n                                Do you wish to keep this ").concat(wording, "?"),
                  icon: {
                    content: 'event_busy'
                  },
                  confirm_text: 'Keep',
                  cancel_text: 'Dismiss',
                  close_delay: close_after
                }, _this._dialog);
              case 29:
                result = _context2.sent;
                if (!(result.reason !== 'done')) {
                  _context2.next = 33;
                  break;
                }
                _this._ignore_cancel.push(booking.id);
                return _context2.abrupt("continue", 37);
              case 33:
                result.loading('Checking in booking...');
                _context2.next = 36;
                return (0, bookings_1.checkinBooking)(booking.id, true).toPromise();
              case 36:
                result.close();
              case 37:
                _context2.next = 16;
                break;
              case 39:
                _context2.next = 44;
                break;
              case 41:
                _context2.prev = 41;
                _context2.t0 = _context2["catch"](14);
                _iterator2.e(_context2.t0);
              case 44:
                _context2.prev = 44;
                _iterator2.f();
                return _context2.finish(44);
              case 47:
                _context2.next = 7;
                break;
              case 49:
                _context2.next = 54;
                break;
              case 51:
                _context2.prev = 51;
                _context2.t1 = _context2["catch"](5);
                _iterator.e(_context2.t1);
              case 54:
                _context2.prev = 54;
                _iterator.f();
                return _context2.finish(54);
              case 57:
              case "end":
                return _context2.stop();
            }
          }, _callee2, null, [[5, 51, 54, 57], [14, 41, 44, 47]]);
        })();
      });
      return function (_x2) {
        return _ref29.apply(this, arguments);
      };
    }()));
    _this.subscription('poll_type', _this._org.active_building.subscribe(function () {
      return _this._poll_type.next(_this._settings.get('app.schedule.use_websocket') ? 'ws' : 'api');
    }));
    _this.subscription('chat_event', _this._settings.listen('CHAT:task_complete').subscribe(function () {
      return _this.triggerPoll();
    }));
    _this.subscription('wfh_checks', _this._checkCancel.subscribe());
    _this._deleted = JSON.parse(sessionStorage.getItem('PLACEOS.events.deleted') || '[]');
    return _this;
  }
  _inherits(ScheduleStateService, _common_1$AsyncHandle);
  return _createClass(ScheduleStateService, [{
    key: "triggerPoll",
    value: function triggerPoll() {
      this._poll.next(Date.now());
    }
  }, {
    key: "startPolling",
    value: function startPolling() {
      var _this2 = this;
      var delay = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 60 * 1000;
      this.interval('poll', function () {
        return _this2._poll.next(Date.now());
      }, delay);
      return function () {
        return _this2.stopPolling();
      };
    }
  }, {
    key: "stopPolling",
    value: function stopPolling() {
      this.clearInterval('poll');
    }
  }, {
    key: "setDate",
    value: function setDate(date) {
      this._date.next(date);
    }
  }, {
    key: "removeItem",
    value: function removeItem(item) {
      this.setAsDeleted(item.instance ? "".concat(item.id, "|").concat(item.instance) : item.id);
      this._poll.next(Date.now());
    }
  }, {
    key: "setAsDeleted",
    value: function setAsDeleted(id) {
      this._deleted.push(id);
      sessionStorage.setItem('PLACEOS.events.deleted', JSON.stringify(this._deleted));
    }
  }, {
    key: "toggleType",
    value: function () {
      var _toggleType = _asyncToGenerator(function (name) {
        var _this3 = this;
        var clear = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;
        return /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {
          var filters, shown_types;
          return _regeneratorRuntime().wrap(function _callee3$(_context3) {
            while (1) switch (_context3.prev = _context3.next) {
              case 0:
                filters = _this3._filters.getValue() || {
                  shown_types: []
                };
                shown_types = filters.shown_types;
                if (shown_types && (shown_types.includes(name) || clear)) {
                  _this3._filters.next(_objectSpread(_objectSpread({}, filters), {}, {
                    shown_types: shown_types.filter(function (_) {
                      return _ !== name;
                    })
                  }));
                } else {
                  _this3._filters.next(_objectSpread(_objectSpread({}, filters), {}, {
                    shown_types: [].concat(_toConsumableArray(shown_types), [name])
                  }));
                }
              case 3:
              case "end":
                return _context3.stop();
            }
          }, _callee3);
        })();
      });
      function toggleType(_x3) {
        return _toggleType.apply(this, arguments);
      }
      return toggleType;
    }()
  }]);
}(common_1.AsyncHandler);
_ScheduleStateService = ScheduleStateService;
_ScheduleStateService.ɵfac = function ScheduleStateService_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _ScheduleStateService)(i0.ɵɵinject(i1.SettingsService), i0.ɵɵinject(i2.OrganisationService), i0.ɵɵinject(i3.LockersService), i0.ɵɵinject(i4.MatDialog), i0.ɵɵinject(i3.ParkingService));
};
_ScheduleStateService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({
  token: _ScheduleStateService,
  factory: _ScheduleStateService.ɵfac,
  providedIn: 'root'
});
exports.ScheduleStateService = ScheduleStateService;

/***/ }),

/***/ 20949:
/*!**********************************!*\
  !*** ./libs/assets/src/index.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var tslib_1 = __webpack_require__(/*! tslib */ 24398);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/assets.module */ 99708), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/asset.class */ 84011), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/asset.utilities */ 82615), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/assets.fn */ 75204), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/asset-group.pipe */ 68965), exports);

/***/ }),

/***/ 68965:
/*!*************************************************!*\
  !*** ./libs/assets/src/lib/asset-group.pipe.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _regeneratorRuntime = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/regeneratorRuntime.js */ 8698)["default"]);
var _objectSpread = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/objectSpread2.js */ 34092)["default"]);
var _asyncToGenerator = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/asyncToGenerator.js */ 95386)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _createForOfIteratorHelper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createForOfIteratorHelper.js */ 36350)["default"]);
var _AssetGroupPipe;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.AssetGroupPipe = void 0;
exports.updateAssetGroupList = _updateAssetGroupList;
var asset_class_1 = __webpack_require__(/*! ./asset.class */ 84011);
var assets_fn_1 = __webpack_require__(/*! ./assets.fn */ 75204);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var ASSET_GROUP_LIST = [];
var EMPTY_ASSET_GROUP = new asset_class_1.AssetGroup();
function _updateAssetGroupList(assetgroup_list) {
  var _iterator = _createForOfIteratorHelper(assetgroup_list),
    _step;
  try {
    var _loop = function _loop() {
      var assetgroup = _step.value;
      if (!ASSET_GROUP_LIST.find(function (_ref) {
        var id = _ref.id;
        return id === assetgroup.id;
      })) {
        ASSET_GROUP_LIST.push(assetgroup);
      }
    };
    for (_iterator.s(); !(_step = _iterator.n()).done;) {
      _loop();
    }
  } catch (err) {
    _iterator.e(err);
  } finally {
    _iterator.f();
  }
}
var AssetGroupPipe = /*#__PURE__*/function () {
  function AssetGroupPipe() {
    _classCallCheck(this, AssetGroupPipe);
  }
  return _createClass(AssetGroupPipe, [{
    key: "transform",
    value: (
    /**
     * Get details of the assetgroup with the given ID
     * @param assetgroup_id ID or Email of the assetgroup
     */
    function () {
      var _transform = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(group_id) {
        var asset_group, group;
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              if (group_id) {
                _context.next = 2;
                break;
              }
              return _context.abrupt("return", EMPTY_ASSET_GROUP);
            case 2:
              asset_group = ASSET_GROUP_LIST.find(function (_ref2) {
                var id = _ref2.id;
                return id === group_id;
              });
              if (!asset_group) {
                _context.next = 5;
                break;
              }
              return _context.abrupt("return", asset_group);
            case 5:
              _context.next = 7;
              return (0, assets_fn_1.showAssetGroup)(group_id).toPromise()["catch"](function (_) {
                return null;
              });
            case 7:
              group = _context.sent;
              if (!group) {
                _context.next = 12;
                break;
              }
              asset_group = _objectSpread({}, group);
              ASSET_GROUP_LIST.push(asset_group);
              return _context.abrupt("return", asset_group);
            case 12:
              return _context.abrupt("return", EMPTY_ASSET_GROUP);
            case 13:
            case "end":
              return _context.stop();
          }
        }, _callee);
      }));
      function transform(_x) {
        return _transform.apply(this, arguments);
      }
      return transform;
    }())
  }, {
    key: "updateAssetGroupList",
    value: function updateAssetGroupList(assetgroup_list) {
      _updateAssetGroupList(assetgroup_list);
    }
  }]);
}();
_AssetGroupPipe = AssetGroupPipe;
_AssetGroupPipe.ɵfac = function AssetGroupPipe_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _AssetGroupPipe)();
};
_AssetGroupPipe.ɵpipe = /*@__PURE__*/i0.ɵɵdefinePipe({
  name: "assetgroup",
  type: _AssetGroupPipe,
  pure: true
});
exports.AssetGroupPipe = AssetGroupPipe;

/***/ }),

/***/ 83618:
/*!***********************************************************!*\
  !*** ./libs/assets/src/lib/asset-list-field.component.ts ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _toConsumableArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/toConsumableArray.js */ 86033)["default"]);
var _createForOfIteratorHelper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createForOfIteratorHelper.js */ 36350)["default"]);
var _objectSpread = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/objectSpread2.js */ 34092)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _AssetListFieldComponent;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.AssetListFieldComponent = void 0;
var core_1 = __webpack_require__(/*! @angular/core */ 37580);
var forms_1 = __webpack_require__(/*! @angular/forms */ 34456);
var dialog_1 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var settings_service_1 = __webpack_require__(/*! libs/common/src/lib/settings.service */ 14233);
var asset_select_modal_component_1 = __webpack_require__(/*! libs/assets/src/lib/asset-select-modal/asset-select-modal.component */ 47471);
var asset_state_service_1 = __webpack_require__(/*! ./asset-state.service */ 46088);
var asset_request_class_1 = __webpack_require__(/*! ./asset-request.class */ 33747);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var date_fns_1 = __webpack_require__(/*! date-fns */ 25773);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! libs/common/src/lib/settings.service */ 14233);
var i2 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var i3 = __webpack_require__(/*! ./asset-state.service */ 46088);
var i4 = __webpack_require__(/*! @angular/common */ 60316);
var i5 = __webpack_require__(/*! ../../../components/src/lib/icon.component */ 69434);
var i6 = __webpack_require__(/*! @angular/material/core */ 74646);
var i7 = __webpack_require__(/*! @angular/material/tooltip */ 80640);
function AssetListFieldComponent_div_1_div_8_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 15)(1, "app-icon");
    i0.ɵɵtext(2, "priority_high");
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var request_r2 = i0.ɵɵnextContext().$implicit;
    var ctx_r2 = i0.ɵɵnextContext();
    i0.ɵɵproperty("matTooltip", ctx_r2.err_tooltip(request_r2));
  }
}
function AssetListFieldComponent_div_1_div_22_Template(rf, ctx) {
  if (rf & 1) {
    var _r4 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 16)(1, "div", 17);
    i0.ɵɵtext(2);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(3, "div", 18);
    i0.ɵɵtext(4);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(5, "button", 19);
    i0.ɵɵlistener("click", function AssetListFieldComponent_div_1_div_22_Template_button_click_5_listener() {
      var item_r5 = i0.ɵɵrestoreView(_r4).$implicit;
      var request_r2 = i0.ɵɵnextContext().$implicit;
      var ctx_r2 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r2.removeRequestItem(request_r2, item_r5));
    });
    i0.ɵɵelementStart(6, "app-icon");
    i0.ɵɵtext(7, "delete");
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(8, "button", 20);
    i0.ɵɵlistener("click", function AssetListFieldComponent_div_1_div_22_Template_button_click_8_listener() {
      var item_r5 = i0.ɵɵrestoreView(_r4).$implicit;
      var ctx_r2 = i0.ɵɵnextContext(2);
      return i0.ɵɵresetView(ctx_r2.toggleFavourite(item_r5));
    });
    i0.ɵɵelementStart(9, "app-icon");
    i0.ɵɵtext(10);
    i0.ɵɵelementEnd()()();
  }
  if (rf & 2) {
    var item_r5 = ctx.$implicit;
    var ctx_r2 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate1(" ", item_r5.name || "Item", " ");
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate1(" x", item_r5.quantity, " ");
    i0.ɵɵadvance(4);
    i0.ɵɵclassProp("text-blue-400", ctx_r2.favorites.includes(item_r5.id));
    i0.ɵɵproperty("matTooltip", ctx_r2.favorites.includes(item_r5.id) ? "Remove from favourites" : "Add to favourites");
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate(ctx_r2.favorites.includes(item_r5.id) ? "favorite" : "favorite_border");
  }
}
function AssetListFieldComponent_div_1_Template(rf, ctx) {
  if (rf & 1) {
    var _r1 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 4)(1, "div", 5)(2, "div", 6)(3, "div", 7)(4, "div");
    i0.ɵɵtext(5);
    i0.ɵɵpipe(6, "date");
    i0.ɵɵpipe(7, "date");
    i0.ɵɵelementEnd();
    i0.ɵɵtemplate(8, AssetListFieldComponent_div_1_div_8_Template, 3, 1, "div", 8);
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(9, "button", 9);
    i0.ɵɵlistener("click", function AssetListFieldComponent_div_1_Template_button_click_9_listener() {
      var request_r2 = i0.ɵɵrestoreView(_r1).$implicit;
      var ctx_r2 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r2.duplicateRequest(request_r2));
    });
    i0.ɵɵelementStart(10, "app-icon");
    i0.ɵɵtext(11, "content_copy");
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(12, "button", 10);
    i0.ɵɵlistener("click", function AssetListFieldComponent_div_1_Template_button_click_12_listener() {
      var request_r2 = i0.ɵɵrestoreView(_r1).$implicit;
      var ctx_r2 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r2.editRequest(request_r2));
    });
    i0.ɵɵelementStart(13, "app-icon");
    i0.ɵɵtext(14, "edit");
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(15, "button", 11);
    i0.ɵɵlistener("click", function AssetListFieldComponent_div_1_Template_button_click_15_listener() {
      var request_r2 = i0.ɵɵrestoreView(_r1).$implicit;
      var ctx_r2 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r2.removeRequest(request_r2));
    });
    i0.ɵɵelementStart(16, "app-icon");
    i0.ɵɵtext(17, "delete");
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(18, "button", 12);
    i0.ɵɵlistener("click", function AssetListFieldComponent_div_1_Template_button_click_18_listener() {
      var request_r2 = i0.ɵɵrestoreView(_r1).$implicit;
      var ctx_r2 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r2.show_request[request_r2.id] = !ctx_r2.show_request[request_r2.id]);
    });
    i0.ɵɵelementStart(19, "app-icon");
    i0.ɵɵtext(20);
    i0.ɵɵelementEnd()()();
    i0.ɵɵelementStart(21, "div", 13);
    i0.ɵɵtemplate(22, AssetListFieldComponent_div_1_div_22_Template, 11, 6, "div", 14);
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var request_r2 = ctx.$implicit;
    var ctx_r2 = i0.ɵɵnextContext();
    i0.ɵɵclassProp("border-error", ctx_r2.end_time < request_r2.deliver_at)("border-base-300", ctx_r2.end_time >= request_r2.deliver_at);
    i0.ɵɵadvance(5);
    i0.ɵɵtextInterpolate2(" Request for ", i0.ɵɵpipeBind2(6, 11, request_r2.deliver_at_time, "mediumDate"), " at ", i0.ɵɵpipeBind2(7, 14, request_r2.deliver_at_time, ctx_r2.time_format), " ");
    i0.ɵɵadvance(3);
    i0.ɵɵproperty("ngIf", ctx_r2.end_time <= request_r2.deliver_at || ctx_r2.rejected_ids.includes(request_r2.id) || request_r2.conflict);
    i0.ɵɵadvance(10);
    i0.ɵɵproperty("matTooltip", ctx_r2.show_request[request_r2.id] ? "Hide order items" : "Show order items");
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate1(" ", ctx_r2.show_request[request_r2.id] ? "expand_less" : "expand_more", " ");
    i0.ɵɵadvance();
    i0.ɵɵproperty("@show", ctx_r2.show_request[request_r2.id] ? "show" : "hide");
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngForOf", request_r2.items);
  }
}
var EMPTY_FAVS = [];
var AssetListFieldComponent = /*#__PURE__*/function () {
  function AssetListFieldComponent(_settings, _dialog, _state) {
    var _this = this;
    _classCallCheck(this, AssetListFieldComponent);
    this._settings = _settings;
    this._dialog = _dialog;
    this._state = _state;
    this.options = {};
    this.rejected_ids = [];
    this.asset_requests = [];
    this.disabled = false;
    this.show_request = {};
    this.selected = [];
    this.registerOnChange = function (fn) {
      return _this._onChange = fn;
    };
    this.registerOnTouched = function (fn) {
      return _this._onTouch = fn;
    };
    this.setDisabledState = function (s) {
      return _this.disabled = s;
    };
  }
  return _createClass(AssetListFieldComponent, [{
    key: "err_tooltip",
    value: function err_tooltip(request) {
      return this.rejected_ids.includes(request.id) || request.conflict ? 'Some of the items are not available for the selected date and time.' : 'Delivery time is outside of the event time.\nThis order will be ignored.';
    }
  }, {
    key: "favorites",
    get: function get() {
      return this._settings.get('favourite_assets') || EMPTY_FAVS;
    }
  }, {
    key: "end_time",
    get: function get() {
      var time = (this.options.date || Date.now()) + (this.options.duration || 30) * 60 * 1000;
      return this.options.all_day ? (0, date_fns_1.endOfDay)(time).valueOf() : time;
    }
  }, {
    key: "time_format",
    get: function get() {
      return this._settings.time_format || 'shortTime';
    }
  }, {
    key: "ngOnChanges",
    value: function ngOnChanges(changes) {
      var _this2 = this;
      if (changes.options) {
        this.asset_requests = (this.asset_requests || []).map(function (_) {
          return new asset_request_class_1.AssetRequest(_objectSpread(_objectSpread({}, _), {}, {
            event: _this2.options
          }));
        });
        this._state.setOptions({
          date: this.options.date,
          duration: this.options.duration
        });
      }
    }
    /**
     * Update the form field value
     * @param new_value New value to set on the form field
     */
  }, {
    key: "setValue",
    value: function setValue(new_value) {
      this.asset_requests = new_value;
      if (this._onChange) this._onChange(this.asset_requests);
    }
    /**
     * Update local value when form control value is changed
     * @param value The new value for the component
     */
  }, {
    key: "writeValue",
    value: function writeValue(value) {
      var _this3 = this;
      this.asset_requests = (value || []).map(function (_) {
        return new asset_request_class_1.AssetRequest(_objectSpread(_objectSpread({}, _), {}, {
          event: _this3.options,
          state: _.state
        }));
      });
    }
  }, {
    key: "editRequest",
    value: function editRequest() {
      var _this4 = this;
      var order = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : new asset_request_class_1.AssetRequest();
      var order_list = this.asset_requests.filter(function (_) {
        return _.id !== order.id;
      });
      var requested = {};
      var _iterator = _createForOfIteratorHelper(order_list),
        _step;
      try {
        for (_iterator.s(); !(_step = _iterator.n()).done;) {
          var _order = _step.value;
          var _iterator4 = _createForOfIteratorHelper(_order.items),
            _step4;
          try {
            for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {
              var item = _step4.value;
              requested[item.id] = (requested[item.id] || 0) + (item === null || item === void 0 ? void 0 : item.quantity) || 0;
            }
          } catch (err) {
            _iterator4.e(err);
          } finally {
            _iterator4.f();
          }
        }
      } catch (err) {
        _iterator.e(err);
      } finally {
        _iterator.f();
      }
      var ref = this._dialog.open(asset_select_modal_component_1.AssetSelectModalComponent, {
        data: {
          items: order.items,
          details: _objectSpread(_objectSpread({}, this.options), {}, {
            date: this.options.all_day ? (0, date_fns_1.startOfDay)(this.options.date).valueOf() : this.options.date,
            duration: this.options.all_day ? Math.max(24 * 60, this.options.duration) : this.options.duration
          }),
          exact_time: !!order.deliver_time,
          offset: order.deliver_offset,
          offset_day: order.deliver_day_offset,
          requested: requested
        }
      });
      ref.afterClosed().subscribe(function (items) {
        var orders = _this4.asset_requests.filter(function (_) {
          return _.id !== order.id;
        });
        if (!(items !== null && items !== void 0 && items.length)) return;
        var _iterator2 = _createForOfIteratorHelper(items),
          _step2;
        try {
          var _loop = function _loop() {
            var _item$assets;
            var item = _step2.value;
            if ((_item$assets = item.assets) !== null && _item$assets !== void 0 && _item$assets.length) {
              var list = [];
              item.item_ids = new Array(item.quantity).fill(0).map(function (_) {
                var id = '';
                var count = 0;
                while ((!id || list.includes(id)) && count < item.assets.length) {
                  id = item.assets[(0, common_1.randomInt)(item.assets.length)].id;
                }
                list.push(id);
                return id;
              });
            }
          };
          for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
            _loop();
          }
        } catch (err) {
          _iterator2.e(err);
        } finally {
          _iterator2.f();
        }
        var time = new Date(_this4.options.date);
        var new_order = new asset_request_class_1.AssetRequest(_objectSpread(_objectSpread({}, order), {}, {
          conflict: false,
          _changed: order._changed || order.items.find(function (_) {
            var _items$find;
            return ((_items$find = items.find(function (__) {
              return __.id === _.id;
            })) === null || _items$find === void 0 ? void 0 : _items$find.quantity) !== _.quantity;
          }),
          items: items.map(function (_) {
            return _objectSpread({}, _);
          }),
          event: _this4.options,
          deliver_offset: ref.componentInstance.offset,
          deliver_time: ref.componentInstance.exact_time ? time.getHours() + time.getMinutes() / 60 : null,
          deliver_day_offset: ref.componentInstance.offset_day || 0
        }));
        var _iterator3 = _createForOfIteratorHelper(new_order.items),
          _step3;
        try {
          var _loop2 = function _loop2() {
              var item = _step3.value;
              var total = orders.reduce(function (t, c) {
                var _c$items$find;
                return t += ((_c$items$find = c.items.find(function (_) {
                  return _.id === item.id;
                })) === null || _c$items$find === void 0 ? void 0 : _c$items$find.quantity) || 0;
              }, 0);
              if (total + item.quantity > item.assets.length) {
                (0, common_1.notifyError)("Not enough assets available to meet request [".concat(item.name, "].\n                        Another request for this asset has been made in this meeting."), undefined, undefined, {
                  duration: 5000
                });
                return {
                  v: void 0
                };
              }
            },
            _ret;
          for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {
            _ret = _loop2();
            if (_ret) return _ret.v;
          }
        } catch (err) {
          _iterator3.e(err);
        } finally {
          _iterator3.f();
        }
        if (new_order.item_count <= 0) return;
        _this4.setValue([].concat(_toConsumableArray(orders), [new_order]));
      });
    }
  }, {
    key: "removeRequest",
    value: function removeRequest(request) {
      var updated_list = this.asset_requests.filter(function (_) {
        return _.id !== request.id;
      });
      this.setValue(updated_list);
    }
  }, {
    key: "duplicateRequest",
    value: function duplicateRequest(order) {
      var new_order = new asset_request_class_1.AssetRequest(_objectSpread(_objectSpread({}, order), {}, {
        id: "order-".concat((0, common_1.randomString)(8))
      }));
      this.setValue([].concat(_toConsumableArray(this.asset_requests), [new_order]));
    }
  }, {
    key: "removeRequestItem",
    value: function removeRequestItem(order, item) {
      var new_order = new asset_request_class_1.AssetRequest(_objectSpread(_objectSpread({}, order), {}, {
        items: order.items.filter(function (_) {
          return _.id !== item.id;
        })
      }));
      var updated_list = this.asset_requests.filter(function (_) {
        return _.id !== order.id;
      });
      if (new_order.items.length > 0) {
        this.setValue([].concat(_toConsumableArray(updated_list), [new_order]));
      } else this.setValue(updated_list);
    }
  }, {
    key: "toggleFavourite",
    value: function toggleFavourite(asset) {
      var fav_list = this.favorites;
      var new_state = !fav_list.includes(asset.id);
      if (new_state) {
        this._settings.saveUserSetting('favourite_assets', [].concat(_toConsumableArray(fav_list), [asset.id]));
      } else {
        this._settings.saveUserSetting('favourite_assets', fav_list.filter(function (_) {
          return _ !== asset.id;
        }));
      }
    }
  }]);
}();
_AssetListFieldComponent = AssetListFieldComponent;
_AssetListFieldComponent.ɵfac = function AssetListFieldComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _AssetListFieldComponent)(i0.ɵɵdirectiveInject(i1.SettingsService), i0.ɵɵdirectiveInject(i2.MatDialog), i0.ɵɵdirectiveInject(i3.AssetStateService));
};
_AssetListFieldComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _AssetListFieldComponent,
  selectors: [["asset-list-field"]],
  inputs: {
    options: "options",
    rejected_ids: "rejected_ids"
  },
  features: [i0.ɵɵProvidersFeature([{
    provide: forms_1.NG_VALUE_ACCESSOR,
    /* istanbul ignore next */
    useExisting: (0, core_1.forwardRef)(function () {
      return _AssetListFieldComponent;
    }),
    multi: true
  }]), i0.ɵɵNgOnChangesFeature],
  decls: 8,
  vars: 2,
  consts: [["list", "", 1, "space-y-2"], ["request", "", "class", "border shadow bg-base-100 rounded-xl overflow-hidden", 3, "border-error", "border-base-300", 4, "ngFor", "ngForOf"], ["btn", "", "matRipple", "", "add-space", "", 1, "w-full", "inverse", "mt-2", 3, "click", "disabled"], [1, "flex", "items-center", "justify-center", "space-x-2"], ["request", "", 1, "border", "shadow", "bg-base-100", "rounded-xl", "overflow-hidden"], [1, "flex", "items-center", "space-x-2", "p-4"], [1, "flex-1"], [1, "flex", "items-center", "space-x-4"], ["class", "flex items-center justify-center h-6 w-6 rounded-full bg-error text-error-content", 3, "matTooltip", 4, "ngIf"], ["icon", "", "matRipple", "", "matTooltip", "Duplicate Request", 3, "click"], ["icon", "", "matRipple", "", "matTooltip", "Edit Request", 3, "click"], ["icon", "", "matRipple", "", "matTooltip", "Remove Request", 1, "text-error", 3, "click"], ["icon", "", "matRipple", "", 3, "click", "matTooltip"], [1, "flex", "flex-col", "bg-base-200", "divide-y", "divide-base-100"], ["class", "flex items-center px-4 py-1 space-x-2 hover:opacity-90", 4, "ngFor", "ngForOf"], [1, "flex", "items-center", "justify-center", "h-6", "w-6", "rounded-full", "bg-error", "text-error-content", 3, "matTooltip"], [1, "flex", "items-center", "px-4", "py-1", "space-x-2", "hover:opacity-90"], [1, "flex", "items-center", "flex-1"], [1, "rounded", "bg-success", "text-success-content", "text-xs", "px-2", "py-1"], ["icon", "", "matRipple", "", "matTooltip", "Remove Request Item", 1, "text-error", 3, "click"], ["icon", "", "matRipple", "", "name", "toggle-catering-item-favourite", 3, "click", "matTooltip"]],
  template: function AssetListFieldComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵelementStart(0, "div", 0);
      i0.ɵɵtemplate(1, AssetListFieldComponent_div_1_Template, 23, 17, "div", 1);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(2, "button", 2);
      i0.ɵɵlistener("click", function AssetListFieldComponent_Template_button_click_2_listener() {
        return ctx.editRequest();
      });
      i0.ɵɵelementStart(3, "div", 3)(4, "app-icon");
      i0.ɵɵtext(5, "search");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(6, "span");
      i0.ɵɵtext(7, "Add Asset");
      i0.ɵɵelementEnd()()();
    }
    if (rf & 2) {
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngForOf", ctx.asset_requests);
      i0.ɵɵadvance();
      i0.ɵɵproperty("disabled", ctx.disabled);
    }
  },
  dependencies: [i4.NgForOf, i4.NgIf, i5.IconComponent, i6.MatRipple, i7.MatTooltip, i4.DatePipe],
  data: {
    animation: [common_1.ANIMATION_SHOW_CONTRACT_EXPAND]
  }
});
exports.AssetListFieldComponent = AssetListFieldComponent;

/***/ }),

/***/ 33747:
/*!****************************************************!*\
  !*** ./libs/assets/src/lib/asset-request.class.ts ***!
  \****************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _objectSpread = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/objectSpread2.js */ 34092)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.AssetRequest = void 0;
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var date_fns_1 = __webpack_require__(/*! date-fns */ 25773);
function deliverAtTime(request) {
  var _request$event, _request$event2;
  var date = ((_request$event = request.event) === null || _request$event === void 0 ? void 0 : _request$event.date) || request._time;
  if (request.deliver_time) {
    date = (0, date_fns_1.set)(date, {
      hours: Math.floor(request.deliver_time),
      minutes: request.deliver_time % 1 * 60
    }).valueOf();
  }
  if (request.deliver_day_offset > 0 || (_request$event2 = request.event) !== null && _request$event2 !== void 0 && _request$event2.all_day) {
    date = (0, date_fns_1.addDays)((0, date_fns_1.startOfDay)(date), request.deliver_day_offset).valueOf();
  }
  return (0, date_fns_1.addMinutes)(date, request.deliver_offset).valueOf();
}
var AssetRequest = /*#__PURE__*/function () {
  function AssetRequest() {
    var _data$asset_ids,
      _data$extension_data,
      _this$event,
      _this = this,
      _data$extension_data2,
      _data$extension_data3,
      _data$extension_data4;
    var data = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    _classCallCheck(this, AssetRequest);
    this.conflict = false;
    this._changed = false;
    this._time = (0, date_fns_1.startOfMinute)(Date.now()).valueOf();
    this.id = data.id || "order-".concat((0, common_1.randomInt)(9999999, 1000000));
    this.event_id = data.event_id || data.parent_id || '';
    this.items = data.items || ((_data$asset_ids = data.asset_ids) === null || _data$asset_ids === void 0 ? void 0 : _data$asset_ids.map(function (_) {
      return {
        id: _,
        quantity: 1
      };
    })) || [];
    this.item_count = this.items.reduce(function (amount, item) {
      return amount + item.quantity;
    }, 0);
    this._status = data["".concat(this.event_id, "_status")] || data.status || (data.extension_data || {})["".concat(this.event_id, "_status")] || ((_data$extension_data = data.extension_data) === null || _data$extension_data === void 0 ? void 0 : _data$extension_data.status) || 'in_storage';
    this.event = data.event || data || null;
    var booking = (_this$event = this.event) === null || _this$event === void 0 || (_this$event = _this$event.linked_bookings) === null || _this$event === void 0 ? void 0 : _this$event.find(function (_) {
      return _.extension_data.request_id === _this.id;
    });
    this._booking = booking || data.booking || null;
    this._changed = !!data._changed || !booking;
    this.notes = data.notes || data.description || '';
    this.deliver_time = data.deliver_time || ((_data$extension_data2 = data.extension_data) === null || _data$extension_data2 === void 0 ? void 0 : _data$extension_data2.deliver_time) || undefined;
    this.deliver_offset = data.deliver_offset || ((_data$extension_data3 = data.extension_data) === null || _data$extension_data3 === void 0 ? void 0 : _data$extension_data3.deliver_offset) || 0;
    this.deliver_day_offset = data.deliver_day_offset || ((_data$extension_data4 = data.extension_data) === null || _data$extension_data4 === void 0 ? void 0 : _data$extension_data4.deliver_day_offset) || 0;
    this.deliver_at_time = deliverAtTime(this);
    this.conflict = !!data.conflict;
    this.ref_id = "".concat(this.deliver_at_time, "|").concat(this.items.map(function (_) {
      return "".concat(_.id, ":").concat(_.quantity);
    }).join('|'));
  }
  return _createClass(AssetRequest, [{
    key: "deliver_at",
    get: function get() {
      return deliverAtTime(this);
    }
  }, {
    key: "status",
    get: function get() {
      return this._status;
    },
    set: function set(value) {
      this._status = value;
      this["".concat(this.event_id, "_status")] = value;
    }
  }, {
    key: "toJSON",
    value: function toJSON() {
      var blob = _objectSpread({}, this);
      delete blob.event;
      delete blob._changed;
      delete blob._status;
      delete blob._time;
      delete blob.deliver_at_time;
      delete blob.deliver_at;
      blob.items = blob.items.map(function (_) {
        return {
          id: _.id,
          category_id: _.category_id,
          quantity: _.quantity,
          name: _.name,
          item_ids: _.item_ids
        };
      });
      return blob;
    }
  }]);
}();
exports.AssetRequest = AssetRequest;

/***/ }),

/***/ 48751:
/*!***************************************************************************!*\
  !*** ./libs/assets/src/lib/asset-select-modal/asset-details.component.ts ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _AssetDetailsComponent;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.AssetDetailsComponent = void 0;
var core_1 = __webpack_require__(/*! @angular/core */ 37580);
var asset_class_1 = __webpack_require__(/*! ../asset.class */ 84011);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @angular/common */ 60316);
var i2 = __webpack_require__(/*! ../../../../form-fields/src/lib/counter.component */ 55507);
var i3 = __webpack_require__(/*! @angular/forms */ 34456);
var i4 = __webpack_require__(/*! ../../../../components/src/lib/icon.component */ 69434);
var i5 = __webpack_require__(/*! ../../../../components/src/lib/image-carousel.component */ 65277);
var i6 = __webpack_require__(/*! @angular/material/core */ 74646);
function AssetDetailsComponent_ng_container_0_Template(rf, ctx) {
  if (rf & 1) {
    var _r1 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵelementStart(1, "section", 2);
    i0.ɵɵelement(2, "image-carousel", 3);
    i0.ɵɵelementStart(3, "button", 4);
    i0.ɵɵlistener("click", function AssetDetailsComponent_ng_container_0_Template_button_click_3_listener() {
      i0.ɵɵrestoreView(_r1);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.close.emit());
    });
    i0.ɵɵelementStart(4, "app-icon");
    i0.ɵɵtext(5, "arrow_back");
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(6, "button", 5);
    i0.ɵɵlistener("click", function AssetDetailsComponent_ng_container_0_Template_button_click_6_listener() {
      i0.ɵɵrestoreView(_r1);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.toggleFav.emit());
    });
    i0.ɵɵelementStart(7, "app-icon");
    i0.ɵɵtext(8);
    i0.ɵɵelementEnd()()();
    i0.ɵɵelementStart(9, "div", 6)(10, "section", 7)(11, "div")(12, "h2", 8);
    i0.ɵɵtext(13);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(14, "p");
    i0.ɵɵtext(15);
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(16, "a-counter", 9);
    i0.ɵɵtwoWayListener("ngModelChange", function AssetDetailsComponent_ng_container_0_Template_a_counter_ngModelChange_16_listener($event) {
      i0.ɵɵrestoreView(_r1);
      var ctx_r1 = i0.ɵɵnextContext();
      i0.ɵɵtwoWayBindingSet(ctx_r1.item.quantity, $event) || (ctx_r1.item.quantity = $event);
      return i0.ɵɵresetView($event);
    });
    i0.ɵɵlistener("ngModelChange", function AssetDetailsComponent_ng_container_0_Template_a_counter_ngModelChange_16_listener($event) {
      i0.ɵɵrestoreView(_r1);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.countChange.emit($event));
    });
    i0.ɵɵelementEnd()();
    i0.ɵɵelement(17, "hr");
    i0.ɵɵelementStart(18, "section", 10)(19, "h2", 11);
    i0.ɵɵtext(20, "Details");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(21, "div", 12)(22, "p");
    i0.ɵɵtext(23);
    i0.ɵɵelementEnd()()()();
    i0.ɵɵelementStart(24, "div", 13)(25, "button", 14);
    i0.ɵɵlistener("click", function AssetDetailsComponent_ng_container_0_Template_button_click_25_listener() {
      i0.ɵɵrestoreView(_r1);
      var ctx_r1 = i0.ɵɵnextContext();
      ctx_r1.active = !ctx_r1.active;
      return i0.ɵɵresetView(ctx_r1.activeChange.emit(ctx_r1.active));
    });
    i0.ɵɵelementStart(26, "div", 15)(27, "app-icon", 16);
    i0.ɵɵtext(28);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(29, "p");
    i0.ɵɵtext(30);
    i0.ɵɵelementEnd()()()();
    i0.ɵɵelementContainerEnd();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance(2);
    i0.ɵɵproperty("images", ctx_r1.item.images);
    i0.ɵɵadvance(4);
    i0.ɵɵclassProp("text-info-content", ctx_r1.fav)("!bg-info", ctx_r1.fav);
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate1(" ", ctx_r1.fav ? "favorite" : "favorite_border", " ");
    i0.ɵɵadvance(5);
    i0.ɵɵtextInterpolate1(" ", ctx_r1.item.name, " ");
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate1(" ", (ctx_r1.item.available != null ? ctx_r1.item.available : ctx_r1.item.assets == null ? null : ctx_r1.item.assets.length) || 0, " Available ");
    i0.ɵɵadvance();
    i0.ɵɵtwoWayProperty("ngModel", ctx_r1.item.quantity);
    i0.ɵɵproperty("min", 1)("max", (ctx_r1.item.available != null ? ctx_r1.item.available : ctx_r1.item.assets == null ? null : ctx_r1.item.assets.length) || 1);
    i0.ɵɵadvance(7);
    i0.ɵɵtextInterpolate(ctx_r1.item.description || "No description");
    i0.ɵɵadvance(2);
    i0.ɵɵclassProp("inverse", ctx_r1.active);
    i0.ɵɵadvance(3);
    i0.ɵɵtextInterpolate1(" ", ctx_r1.active ? "remove" : "add", " ");
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate1(" ", ctx_r1.active ? "Remove this asset" : "Add this asset", " ");
  }
}
function AssetDetailsComponent_ng_template_1_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 17)(1, "p", 18);
    i0.ɵɵtext(2, " Select an asset to view it's details ");
    i0.ɵɵelementEnd()();
  }
}
var AssetDetailsComponent = /*#__PURE__*/function () {
  function AssetDetailsComponent() {
    _classCallCheck(this, AssetDetailsComponent);
    this.active = false;
    this.fav = false;
    this.toggleFav = new core_1.EventEmitter();
    this.activeChange = new core_1.EventEmitter();
    this.countChange = new core_1.EventEmitter();
    this.close = new core_1.EventEmitter();
  }
  return _createClass(AssetDetailsComponent, [{
    key: "ngOnInit",
    value: function ngOnInit() {
      if (this.item && !this.item.quantity) this.item.quantity = 1;
    }
  }, {
    key: "ngOnChanges",
    value: function ngOnChanges(changes) {
      if (changes.item && this.item) {
        if (!this.item.quantity) this.item.quantity = 1;
      }
    }
  }]);
}();
_AssetDetailsComponent = AssetDetailsComponent;
_AssetDetailsComponent.ɵfac = function AssetDetailsComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _AssetDetailsComponent)();
};
_AssetDetailsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _AssetDetailsComponent,
  selectors: [["asset-details"]],
  inputs: {
    item: "item",
    active: "active",
    fav: "fav"
  },
  outputs: {
    toggleFav: "toggleFav",
    activeChange: "activeChange",
    countChange: "countChange",
    close: "close"
  },
  features: [i0.ɵɵNgOnChangesFeature],
  decls: 3,
  vars: 2,
  consts: [["empty_state", ""], [4, "ngIf", "ngIfElse"], ["image", "", 1, "relative", "w-full", "h-64", "sm:h-40", "bg-base-200"], [1, "absolute", "inset-0", 3, "images"], ["icon", "", "matRipple", "", "close", "", 1, "absolute", "top-2", "left-2", "bg-base-200", "sm:hidden", 3, "click"], ["icon", "", "matRipple", "", "fav", "", 1, "absolute", "top-2", "right-2", "bg-base-200", 3, "click"], [1, "p-2", "space-y-2", "flex-1", "h-1/2", "overflow-auto"], ["actions", "", 1, "z-0", "flex", "items-center", "justify-between"], [1, "text-xl", "font-medium", "mb-2", "mt-4"], [3, "ngModelChange", "ngModel", "min", "max"], ["details", "", 1, "space-y-2"], [1, "text-xl", "font-medium"], [1, "flex", "items-center", "space-x-2"], [1, "p-2", "border-t", "border-base-200", "shadow", "sm:hidden"], ["btn", "", "matRipple", "", "select", "", 1, "w-full", 3, "click"], [1, "flex", "items-center", "justify-center"], [1, "text-2xl"], ["empty", "", 1, "p-16", "flex", "flex-col", "items-center", "justify-center", "space-y-2"], [1, "opacity-30", "text-center"]],
  template: function AssetDetailsComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵtemplate(0, AssetDetailsComponent_ng_container_0_Template, 31, 16, "ng-container", 1)(1, AssetDetailsComponent_ng_template_1_Template, 3, 0, "ng-template", null, 0, i0.ɵɵtemplateRefExtractor);
    }
    if (rf & 2) {
      var empty_state_r3 = i0.ɵɵreference(2);
      i0.ɵɵproperty("ngIf", ctx.item)("ngIfElse", empty_state_r3);
    }
  },
  dependencies: [i1.NgIf, i2.CounterComponent, i3.NgControlStatus, i3.NgModel, i4.IconComponent, i5.ImageCarouselComponent, i6.MatRipple],
  styles: ["[_nghost-%COMP%] {\n                display: flex;\n                flex-direction: column;\n                width: 30%;\n                min-width: 20rem;\n                height: 100%;\n                min-height: 65vh;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0LWRldGFpbHMuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxhQUFhO2dCQUNiLHNCQUFzQjtnQkFDdEIsVUFBVTtnQkFDVixnQkFBZ0I7Z0JBQ2hCLFlBQVk7Z0JBQ1osZ0JBQWdCO1lBQ3BCIiwiZmlsZSI6ImFzc2V0LWRldGFpbHMuY29tcG9uZW50LnRzIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICA6aG9zdCB7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgICAgICAgIHdpZHRoOiAzMCU7XG4gICAgICAgICAgICAgICAgbWluLXdpZHRoOiAyMHJlbTtcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgICAgICAgICAgbWluLWhlaWdodDogNjV2aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl19 */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvYXNzZXRzL3NyYy9saWIvYXNzZXQtc2VsZWN0LW1vZGFsL2Fzc2V0LWRldGFpbHMuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxhQUFhO2dCQUNiLHNCQUFzQjtnQkFDdEIsVUFBVTtnQkFDVixnQkFBZ0I7Z0JBQ2hCLFlBQVk7Z0JBQ1osZ0JBQWdCO1lBQ3BCOztBQUVaLHdxQkFBd3FCIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICA6aG9zdCB7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgICAgICAgIHdpZHRoOiAzMCU7XG4gICAgICAgICAgICAgICAgbWluLXdpZHRoOiAyMHJlbTtcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgICAgICAgICAgbWluLWhlaWdodDogNjV2aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl0sInNvdXJjZVJvb3QiOiIifQ== */"]
});
exports.AssetDetailsComponent = AssetDetailsComponent;

/***/ }),

/***/ 76041:
/*!***********************************************************************************!*\
  !*** ./libs/assets/src/lib/asset-select-modal/asset-filters-display.component.ts ***!
  \***********************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _AssetFiltersDisplayComponent;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.AssetFiltersDisplayComponent = void 0;
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var AssetFiltersDisplayComponent = /*#__PURE__*/_createClass(function AssetFiltersDisplayComponent() {
  _classCallCheck(this, AssetFiltersDisplayComponent);
});
_AssetFiltersDisplayComponent = AssetFiltersDisplayComponent;
_AssetFiltersDisplayComponent.ɵfac = function AssetFiltersDisplayComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _AssetFiltersDisplayComponent)();
};
_AssetFiltersDisplayComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _AssetFiltersDisplayComponent,
  selectors: [["asset-filters-display"]],
  decls: 0,
  vars: 0,
  template: function AssetFiltersDisplayComponent_Template(rf, ctx) {}
});
exports.AssetFiltersDisplayComponent = AssetFiltersDisplayComponent;

/***/ }),

/***/ 64358:
/*!***************************************************************************!*\
  !*** ./libs/assets/src/lib/asset-select-modal/asset-filters.component.ts ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _taggedTemplateLiteral = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js */ 9959)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _callSuper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/callSuper.js */ 8513)["default"]);
var _inherits = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/inherits.js */ 58160)["default"]);
var _AssetFiltersComponent, _templateObject, _templateObject2;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.AssetFiltersComponent = void 0;
var core_1 = __webpack_require__(/*! @angular/core */ 37580);
var asset_state_service_1 = __webpack_require__(/*! ../asset-state.service */ 46088);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var date_fns_1 = __webpack_require__(/*! date-fns */ 25773);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! ../asset-state.service */ 46088);
var i2 = __webpack_require__(/*! @placeos/common */ 22797);
var i3 = __webpack_require__(/*! @angular/common */ 60316);
var i4 = __webpack_require__(/*! ../../../../form-fields/src/lib/duration-field.component */ 83476);
var i5 = __webpack_require__(/*! @angular/forms */ 34456);
var i6 = __webpack_require__(/*! ../../../../components/src/lib/icon.component */ 69434);
var i7 = __webpack_require__(/*! @angular/material/core */ 74646);
var i8 = __webpack_require__(/*! @angular/material/form-field */ 24950);
var i9 = __webpack_require__(/*! @angular/material/select */ 25175);
var i10 = __webpack_require__(/*! @angular/material/input */ 95541);
var i11 = __webpack_require__(/*! @angular/material/tooltip */ 80640);
var i12 = __webpack_require__(/*! @angular/material/checkbox */ 97024);
function AssetFiltersComponent_h3_6_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "h3", 11);
    i0.ɵɵi18n(1, 0);
    i0.ɵɵelementEnd();
  }
}
function AssetFiltersComponent_div_7_ng_container_3_mat_option_5_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "mat-option", 18);
    i0.ɵɵtext(1);
    i0.ɵɵpipe(2, "date");
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var day_r4 = ctx.$implicit;
    i0.ɵɵproperty("value", day_r4.id);
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", i0.ɵɵpipeBind2(2, 2, day_r4.value, "mediumDate"), " ");
  }
}
function AssetFiltersComponent_div_7_ng_container_3_Template(rf, ctx) {
  if (rf & 1) {
    var _r3 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵelementStart(1, "label");
    i0.ɵɵtext(2, "Deliver Date:");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(3, "mat-form-field", 15)(4, "mat-select", 16);
    i0.ɵɵtwoWayListener("ngModelChange", function AssetFiltersComponent_div_7_ng_container_3_Template_mat_select_ngModelChange_4_listener($event) {
      i0.ɵɵrestoreView(_r3);
      var ctx_r1 = i0.ɵɵnextContext(2);
      i0.ɵɵtwoWayBindingSet(ctx_r1.offset_day, $event) || (ctx_r1.offset_day = $event);
      return i0.ɵɵresetView($event);
    });
    i0.ɵɵlistener("ngModelChange", function AssetFiltersComponent_div_7_ng_container_3_Template_mat_select_ngModelChange_4_listener($event) {
      i0.ɵɵrestoreView(_r3);
      var ctx_r1 = i0.ɵɵnextContext(2);
      return i0.ɵɵresetView(ctx_r1.offset_dayChange.next($event));
    });
    i0.ɵɵtemplate(5, AssetFiltersComponent_div_7_ng_container_3_mat_option_5_Template, 3, 5, "mat-option", 17);
    i0.ɵɵelementEnd()();
    i0.ɵɵelementContainerEnd();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance(4);
    i0.ɵɵtwoWayProperty("ngModel", ctx_r1.offset_day);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngForOf", ctx_r1.day_options);
  }
}
function AssetFiltersComponent_div_7_Template(rf, ctx) {
  if (rf & 1) {
    var _r1 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 9)(1, "mat-checkbox", 12);
    i0.ɵɵtwoWayListener("ngModelChange", function AssetFiltersComponent_div_7_Template_mat_checkbox_ngModelChange_1_listener($event) {
      i0.ɵɵrestoreView(_r1);
      var ctx_r1 = i0.ɵɵnextContext();
      i0.ɵɵtwoWayBindingSet(ctx_r1.at_time, $event) || (ctx_r1.at_time = $event);
      return i0.ɵɵresetView($event);
    });
    i0.ɵɵlistener("ngModelChange", function AssetFiltersComponent_div_7_Template_mat_checkbox_ngModelChange_1_listener($event) {
      i0.ɵɵrestoreView(_r1);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.at_timeChange.next($event));
    });
    i0.ɵɵtext(2, " Exact Time ");
    i0.ɵɵelementEnd();
    i0.ɵɵtemplate(3, AssetFiltersComponent_div_7_ng_container_3_Template, 6, 2, "ng-container", 13);
    i0.ɵɵelementStart(4, "label");
    i0.ɵɵtext(5, "Deliver After:");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(6, "a-duration-field", 14);
    i0.ɵɵpipe(7, "async");
    i0.ɵɵtwoWayListener("ngModelChange", function AssetFiltersComponent_div_7_Template_a_duration_field_ngModelChange_6_listener($event) {
      i0.ɵɵrestoreView(_r1);
      var ctx_r1 = i0.ɵɵnextContext();
      i0.ɵɵtwoWayBindingSet(ctx_r1.offset, $event) || (ctx_r1.offset = $event);
      return i0.ɵɵresetView($event);
    });
    i0.ɵɵlistener("ngModelChange", function AssetFiltersComponent_div_7_Template_a_duration_field_ngModelChange_6_listener($event) {
      i0.ɵɵrestoreView(_r1);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.offsetChange.next($event));
    });
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var tmp_5_0;
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance();
    i0.ɵɵtwoWayProperty("ngModel", ctx_r1.at_time);
    i0.ɵɵproperty("matTooltip", ctx_r1.exact_tooltip);
    i0.ɵɵadvance(2);
    i0.ɵɵproperty("ngIf", ctx_r1.day_options.length > 1);
    i0.ɵɵadvance(3);
    i0.ɵɵtwoWayProperty("ngModel", ctx_r1.offset);
    i0.ɵɵproperty("time", ctx_r1.offset_day > 0 ? ctx_r1.start_of_date : (tmp_5_0 = i0.ɵɵpipeBind1(7, 9, ctx_r1.options)) == null ? null : tmp_5_0.date)("step", ctx_r1.step_interval)("min", ctx_r1.min_offset)("max", ctx_r1.max_offset - 1)("use_24hr", ctx_r1.use_24hr);
  }
}
function AssetFiltersComponent_h3_8_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "h3", 19);
    i0.ɵɵi18n(1, 1);
    i0.ɵɵelementEnd();
  }
}
function AssetFiltersComponent_mat_checkbox_10_Template(rf, ctx) {
  if (rf & 1) {
    var _r5 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "mat-checkbox", 16);
    i0.ɵɵpipe(1, "async");
    i0.ɵɵlistener("ngModelChange", function AssetFiltersComponent_mat_checkbox_10_Template_mat_checkbox_ngModelChange_0_listener() {
      var item_r6 = i0.ɵɵrestoreView(_r5).$implicit;
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.toggleCategory(item_r6.id));
    });
    i0.ɵɵtext(2);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var item_r6 = ctx.$implicit;
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵproperty("ngModel", i0.ɵɵpipeBind1(1, 3, ctx_r1.category) === item_r6.id);
    i0.ɵɵattribute("name", item_r6);
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate1(" ", item_r6.name, " ");
  }
}
var AssetFiltersComponent = /*#__PURE__*/function (_common_1$AsyncHandle) {
  function AssetFiltersComponent(_state, _settings) {
    var _this;
    _classCallCheck(this, AssetFiltersComponent);
    _this = _callSuper(this, AssetFiltersComponent);
    _this._state = _state;
    _this._settings = _settings;
    _this.search = false;
    _this.at_time = false;
    _this.at_timeChange = new core_1.EventEmitter();
    _this.offset = 0;
    _this.offsetChange = new core_1.EventEmitter();
    _this.offset_day = 0;
    _this.offset_dayChange = new core_1.EventEmitter();
    _this._min_offset = 0;
    _this._max_offset = 60;
    _this.search_value = _this._state.search;
    _this.category = _this._state.category;
    _this.categories = _this._state.category_list;
    _this.options = _this._state.options;
    _this.exact_tooltip = 'Deliver at exactly specified time. \nNote that changes to the booking will not be \nreflected in the order if this is set.';
    _this.day_options = [];
    _this.setSearch = function (s) {
      return _this._state.setSearch(s);
    };
    _this.toggleCategory = function (c) {
      return _this._state.toggleCategory(c);
    };
    return _this;
  }
  _inherits(AssetFiltersComponent, _common_1$AsyncHandle);
  return _createClass(AssetFiltersComponent, [{
    key: "start_of_date",
    get: function get() {
      return (0, date_fns_1.startOfDay)((0, date_fns_1.addDays)(this._state.getOptions().date, this.offset_day)).valueOf();
    }
  }, {
    key: "min_offset",
    get: function get() {
      return this.offset_day > 0 ? 0 : this._min_offset;
    }
  }, {
    key: "step_interval",
    get: function get() {
      return this._settings.get('app.assets.step_interval') || 5;
    }
  }, {
    key: "max_offset",
    get: function get() {
      var end = Math.min((0, date_fns_1.endOfDay)((0, date_fns_1.addDays)(this._state.getOptions().date, this.offset_day)).valueOf(), (0, date_fns_1.addMinutes)(this._state.getOptions().date, this._state.getOptions().duration).valueOf());
      var diff = (0, date_fns_1.differenceInMinutes)(end, this._state.getOptions().date);
      return Math.min(diff, Math.min(24 * 60 - 1, this._max_offset));
    }
  }, {
    key: "use_24hr",
    get: function get() {
      return this._settings.get('app.use_24_hour_time');
    }
  }, {
    key: "ngOnInit",
    value: function ngOnInit() {
      var _this2 = this;
      this._min_offset = Math.max(this._settings.get('app.assets.min_offset'), 0);
      this.subscription('filters', this._state.options.subscribe(function () {
        _this2._max_offset = Math.max(15, (_this2._state.getOptions().duration || 60) - _this2._settings.get('app.assets.end_offset'));
        _this2._updateDayOptions();
      }));
      this._updateDayOptions();
    }
  }, {
    key: "_updateDayOptions",
    value: function _updateDayOptions() {
      var _this$_state$getOptio = this._state.getOptions(),
        date = _this$_state$getOptio.date,
        duration = _this$_state$getOptio.duration;
      if (duration <= 24 * 60) return this.day_options = [];
      var day = (0, date_fns_1.startOfDay)(date);
      var count = 0;
      var end = (0, date_fns_1.endOfDay)((0, date_fns_1.addMinutes)(date, duration)).valueOf();
      var options = [];
      while (day.valueOf() <= end) {
        options.push({
          id: count,
          value: day.valueOf()
        });
        day = (0, date_fns_1.addDays)(day, 1);
        count++;
      }
      this.day_options = options;
    }
  }]);
}(common_1.AsyncHandler);
_AssetFiltersComponent = AssetFiltersComponent;
_AssetFiltersComponent.ɵfac = function AssetFiltersComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _AssetFiltersComponent)(i0.ɵɵdirectiveInject(i1.AssetStateService), i0.ɵɵdirectiveInject(i2.SettingsService));
};
_AssetFiltersComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _AssetFiltersComponent,
  selectors: [["asset-filters"]],
  inputs: {
    search: "search",
    at_time: "at_time",
    offset: "offset",
    offset_day: "offset_day"
  },
  outputs: {
    at_timeChange: "at_timeChange",
    offsetChange: "offsetChange",
    offset_dayChange: "offset_dayChange"
  },
  features: [i0.ɵɵInheritDefinitionFeature],
  decls: 12,
  vars: 15,
  consts: function consts() {
    var i18n_0;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_637156553417356107$$LIBS_ASSETS_SRC_LIB_ASSET_SELECT_MODAL_ASSET_FILTERS_COMPONENT_TS_0 = goog.getMsg(" Options ");
      i18n_0 = MSG_EXTERNAL_637156553417356107$$LIBS_ASSETS_SRC_LIB_ASSET_SELECT_MODAL_ASSET_FILTERS_COMPONENT_TS_0;
    } else {
      i18n_0 = $localize(_templateObject || (_templateObject = _taggedTemplateLiteral([":\u241F07b96192315617e1c3c3f020fed4749eafda31eb\u241F637156553417356107: Options "])));
    }
    var i18n_1;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_3888583854485349732$$LIBS_ASSETS_SRC_LIB_ASSET_SELECT_MODAL_ASSET_FILTERS_COMPONENT_TS_1 = goog.getMsg(" Catergories ");
      i18n_1 = MSG_EXTERNAL_3888583854485349732$$LIBS_ASSETS_SRC_LIB_ASSET_SELECT_MODAL_ASSET_FILTERS_COMPONENT_TS_1;
    } else {
      i18n_1 = $localize(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([":\u241F24300e769843b029b0346b3ea18e51e4e97a3502\u241F3888583854485349732: Catergories "])));
    }
    return [i18n_0, i18n_1, [1, "px-4", "mt-3", "mb-2"], ["appearance", "outline", 1, "w-full", "h-14"], ["matPrefix", "", 1, "text-xl"], ["matInput", "", "placeholder", "Search menu...", 3, "ngModelChange", "ngModel"], ["class", "hidden sm:block font-medium px-2 py-2", 4, "ngIf"], ["class", "flex flex-col px-2", 4, "ngIf"], ["class", "hidden sm:block font-medium px-2 py-4", 4, "ngIf"], [1, "flex", "flex-col", "px-2"], [3, "ngModel", "ngModelChange", 4, "ngFor", "ngForOf"], [1, "hidden", "sm:block", "font-medium", "px-2", "py-2"], [3, "ngModelChange", "ngModel", "matTooltip"], [4, "ngIf"], [3, "ngModelChange", "ngModel", "time", "step", "min", "max", "use_24hr"], ["appearance", "outline", 1, "w-full", "no-subscript", "mb-4"], [3, "ngModelChange", "ngModel"], [3, "value", 4, "ngFor", "ngForOf"], [3, "value"], [1, "hidden", "sm:block", "font-medium", "px-2", "py-4"]];
  },
  template: function AssetFiltersComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵelementStart(0, "div", 2)(1, "mat-form-field", 3)(2, "app-icon", 4);
      i0.ɵɵtext(3, "search");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(4, "input", 5);
      i0.ɵɵpipe(5, "async");
      i0.ɵɵlistener("ngModelChange", function AssetFiltersComponent_Template_input_ngModelChange_4_listener($event) {
        return ctx.setSearch($event);
      });
      i0.ɵɵelementEnd()()();
      i0.ɵɵtemplate(6, AssetFiltersComponent_h3_6_Template, 2, 0, "h3", 6)(7, AssetFiltersComponent_div_7_Template, 8, 11, "div", 7)(8, AssetFiltersComponent_h3_8_Template, 2, 0, "h3", 8);
      i0.ɵɵelementStart(9, "div", 9);
      i0.ɵɵtemplate(10, AssetFiltersComponent_mat_checkbox_10_Template, 3, 5, "mat-checkbox", 10);
      i0.ɵɵpipe(11, "async");
      i0.ɵɵelementEnd();
    }
    if (rf & 2) {
      i0.ɵɵclassProp("sm:hidden", !ctx.search);
      i0.ɵɵadvance(4);
      i0.ɵɵproperty("ngModel", i0.ɵɵpipeBind1(5, 11, ctx.search_value));
      i0.ɵɵadvance(2);
      i0.ɵɵproperty("ngIf", !ctx.search);
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", !ctx.search);
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", !ctx.search);
      i0.ɵɵadvance();
      i0.ɵɵclassProp("sm:hidden", ctx.search)("sm:pt-1", !ctx.search);
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngForOf", i0.ɵɵpipeBind1(11, 13, ctx.categories));
    }
  },
  dependencies: [i3.NgForOf, i3.NgIf, i4.DurationFieldComponent, i5.DefaultValueAccessor, i5.NgControlStatus, i5.NgModel, i6.IconComponent, i7.MatOption, i8.MatFormField, i8.MatPrefix, i9.MatSelect, i10.MatInput, i11.MatTooltip, i12.MatCheckbox, i3.AsyncPipe, i3.DatePipe],
  styles: ["[_nghost-%COMP%] {\n                display: flex;\n                flex-direction: column;\n                min-width: 16rem;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0LWZpbHRlcnMuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxhQUFhO2dCQUNiLHNCQUFzQjtnQkFDdEIsZ0JBQWdCO1lBQ3BCIiwiZmlsZSI6ImFzc2V0LWZpbHRlcnMuY29tcG9uZW50LnRzIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICA6aG9zdCB7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgICAgICAgIG1pbi13aWR0aDogMTZyZW07XG4gICAgICAgICAgICB9XG4gICAgICAgICJdfQ== */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvYXNzZXRzL3NyYy9saWIvYXNzZXQtc2VsZWN0LW1vZGFsL2Fzc2V0LWZpbHRlcnMuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxhQUFhO2dCQUNiLHNCQUFzQjtnQkFDdEIsZ0JBQWdCO1lBQ3BCOztBQUVaLDRmQUE0ZiIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgOmhvc3Qge1xuICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgICAgICAgICBtaW4td2lkdGg6IDE2cmVtO1xuICAgICAgICAgICAgfVxuICAgICAgICAiXSwic291cmNlUm9vdCI6IiJ9 */"]
});
exports.AssetFiltersComponent = AssetFiltersComponent;

/***/ }),

/***/ 67807:
/*!************************************************************************!*\
  !*** ./libs/assets/src/lib/asset-select-modal/asset-list.component.ts ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _createForOfIteratorHelper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createForOfIteratorHelper.js */ 36350)["default"]);
var _slicedToArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/slicedToArray.js */ 6282)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _AssetListComponent;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.AssetListComponent = void 0;
var core_1 = __webpack_require__(/*! @angular/core */ 37580);
var asset_state_service_1 = __webpack_require__(/*! ../asset-state.service */ 46088);
var rxjs_1 = __webpack_require__(/*! rxjs */ 15681);
var operators_1 = __webpack_require__(/*! rxjs/operators */ 97303);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! ../asset-state.service */ 46088);
var i2 = __webpack_require__(/*! @angular/common */ 60316);
var i3 = __webpack_require__(/*! ../../../../components/src/lib/icon.component */ 69434);
var i4 = __webpack_require__(/*! ../../../../components/src/lib/authenticated-image.directive */ 93208);
var i5 = __webpack_require__(/*! @angular/material/core */ 74646);
var i6 = __webpack_require__(/*! @angular/material/progress-spinner */ 41134);
function AssetListComponent_ng_container_6_ul_1_li_1_div_3_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 20)(1, "span", 21);
    i0.ɵɵtext(2);
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var asset_r2 = i0.ɵɵnextContext().$implicit;
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate1(" ", asset_r2.quantity || 1, " ");
  }
}
function AssetListComponent_ng_container_6_ul_1_li_1_img_4_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelement(0, "img", 22);
  }
  if (rf & 2) {
    var asset_r2 = i0.ɵɵnextContext().$implicit;
    i0.ɵɵproperty("source", asset_r2.images[0]);
  }
}
function AssetListComponent_ng_container_6_ul_1_li_1_ng_template_5_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelement(0, "img", 23);
  }
}
function AssetListComponent_ng_container_6_ul_1_li_1_Template(rf, ctx) {
  if (rf & 1) {
    var _r1 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "li", 10)(1, "button", 11);
    i0.ɵɵlistener("click", function AssetListComponent_ng_container_6_ul_1_li_1_Template_button_click_1_listener() {
      var asset_r2 = i0.ɵɵrestoreView(_r1).$implicit;
      var ctx_r2 = i0.ɵɵnextContext(3);
      return i0.ɵɵresetView(ctx_r2.selectAsset(asset_r2));
    });
    i0.ɵɵelementStart(2, "div", 12);
    i0.ɵɵtemplate(3, AssetListComponent_ng_container_6_ul_1_li_1_div_3_Template, 3, 1, "div", 13)(4, AssetListComponent_ng_container_6_ul_1_li_1_img_4_Template, 1, 1, "img", 14)(5, AssetListComponent_ng_container_6_ul_1_li_1_ng_template_5_Template, 1, 0, "ng-template", null, 2, i0.ɵɵtemplateRefExtractor);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(7, "div", 15)(8, "div", 16)(9, "div");
    i0.ɵɵtext(10);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(11, "div", 17);
    i0.ɵɵtext(12);
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(13, "div", 18)(14, "p");
    i0.ɵɵtext(15);
    i0.ɵɵelementEnd()()()();
    i0.ɵɵelementStart(16, "button", 19);
    i0.ɵɵlistener("click", function AssetListComponent_ng_container_6_ul_1_li_1_Template_button_click_16_listener() {
      var asset_r2 = i0.ɵɵrestoreView(_r1).$implicit;
      var ctx_r2 = i0.ɵɵnextContext(3);
      return i0.ɵɵresetView(ctx_r2.toggleFav.emit(asset_r2));
    });
    i0.ɵɵelementStart(17, "app-icon");
    i0.ɵɵtext(18);
    i0.ɵɵelementEnd()()();
  }
  if (rf & 2) {
    var asset_r2 = ctx.$implicit;
    var placeholder_r4 = i0.ɵɵreference(6);
    var ctx_r2 = i0.ɵɵnextContext(3);
    i0.ɵɵadvance(3);
    i0.ɵɵproperty("ngIf", ctx_r2.selected.includes(asset_r2.id));
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", asset_r2.images == null ? null : asset_r2.images.length)("ngIfElse", placeholder_r4);
    i0.ɵɵadvance(6);
    i0.ɵɵtextInterpolate(asset_r2.name || "Asset");
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate1(" ", asset_r2.category, " ");
    i0.ɵɵadvance(3);
    i0.ɵɵtextInterpolate1(" ", asset_r2.available || (asset_r2.assets == null ? null : asset_r2.assets.length) || "0", " Available ");
    i0.ɵɵadvance();
    i0.ɵɵclassProp("text-info", ctx_r2.isFavourite(asset_r2.id));
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate(ctx_r2.isFavourite(asset_r2.id) ? "favorite" : "favorite_border");
  }
}
function AssetListComponent_ng_container_6_ul_1_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "ul", 8);
    i0.ɵɵtemplate(1, AssetListComponent_ng_container_6_ul_1_li_1_Template, 19, 9, "li", 9);
    i0.ɵɵpipe(2, "async");
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r2 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngForOf", i0.ɵɵpipeBind1(2, 1, ctx_r2.assets));
  }
}
function AssetListComponent_ng_container_6_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵtemplate(1, AssetListComponent_ng_container_6_ul_1_Template, 3, 3, "ul", 7);
    i0.ɵɵpipe(2, "async");
    i0.ɵɵelementContainerEnd();
  }
  if (rf & 2) {
    var tmp_3_0;
    var ctx_r2 = i0.ɵɵnextContext();
    var empty_state_r5 = i0.ɵɵreference(9);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", (tmp_3_0 = i0.ɵɵpipeBind1(2, 2, ctx_r2.assets)) == null ? null : tmp_3_0.length)("ngIfElse", empty_state_r5);
  }
}
function AssetListComponent_ng_template_8_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 24)(1, "p", 25);
    i0.ɵɵtext(2, " No available assets for selected time and/or filters ");
    i0.ɵɵelementEnd()();
  }
}
function AssetListComponent_ng_template_10_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 26);
    i0.ɵɵelement(1, "mat-spinner", 27);
    i0.ɵɵelementStart(2, "p", 28);
    i0.ɵɵtext(3, "Finding available assets...");
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    i0.ɵɵadvance();
    i0.ɵɵproperty("diameter", 32);
  }
}
var AssetListComponent = /*#__PURE__*/function () {
  function AssetListComponent(_asset_state) {
    var _this = this;
    _classCallCheck(this, AssetListComponent);
    this._asset_state = _asset_state;
    this.selected = '';
    this.favorites = [];
    this.selected_items = [];
    this.requested = {};
    this.toggleFav = new core_1.EventEmitter();
    this.onSelect = new core_1.EventEmitter();
    this._requested_items = new rxjs_1.BehaviorSubject({});
    this.counts = new rxjs_1.BehaviorSubject({});
    this.loading = this._asset_state.loading;
    this.assets = (0, rxjs_1.combineLatest)([this.counts, this._asset_state.filtered_assets, this._requested_items]).pipe((0, operators_1.map)(function (_ref) {
      var _ref2 = _slicedToArray(_ref, 3),
        counts = _ref2[0],
        assets = _ref2[1],
        requested = _ref2[2];
      var _iterator = _createForOfIteratorHelper(assets),
        _step;
      try {
        var _loop = function _loop() {
          var item = _step.value;
          item.quantity = counts[item.id] || 0;
          var selected = _this.selected_items.find(function (i) {
            return i.id === item.id;
          });
          if (selected) selected.assets = item.assets;
          if (requested[item.id] !== undefined) {
            var _item$assets;
            item.available = Math.max((((_item$assets = item.assets) === null || _item$assets === void 0 ? void 0 : _item$assets.length) || 0) - requested[item.id], 0);
          }
        };
        for (_iterator.s(); !(_step = _iterator.n()).done;) {
          _loop();
        }
      } catch (err) {
        _iterator.e(err);
      } finally {
        _iterator.f();
      }
      return assets.filter(function (_) {
        var _$assets;
        return _.available != null && _.available > 0 || _.available == null && ((_$assets = _.assets) === null || _$assets === void 0 ? void 0 : _$assets.length) > 0;
      });
    }));
  }
  return _createClass(AssetListComponent, [{
    key: "ngOnChanges",
    value: function ngOnChanges(changes) {
      var _this$selected_items;
      if (changes.selected_items && (_this$selected_items = this.selected_items) !== null && _this$selected_items !== void 0 && _this$selected_items.length) {
        var counts = {};
        var _iterator2 = _createForOfIteratorHelper(this.selected_items),
          _step2;
        try {
          for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
            var item = _step2.value;
            counts[item.id] = item.quantity;
          }
        } catch (err) {
          _iterator2.e(err);
        } finally {
          _iterator2.f();
        }
        this.counts.next(counts);
      }
      if (changes.requested) {
        this._requested_items.next(this.requested);
      }
    }
  }, {
    key: "isFavourite",
    value: function isFavourite(asset_id) {
      return this.favorites.includes(asset_id);
    }
  }, {
    key: "selectAsset",
    value: function selectAsset(asset) {
      this.onSelect.emit(asset);
    }
  }]);
}();
_AssetListComponent = AssetListComponent;
_AssetListComponent.ɵfac = function AssetListComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _AssetListComponent)(i0.ɵɵdirectiveInject(i1.AssetStateService));
};
_AssetListComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _AssetListComponent,
  selectors: [["asset-list"]],
  inputs: {
    selected: "selected",
    favorites: "favorites",
    selected_items: "selected_items",
    requested: "requested"
  },
  outputs: {
    toggleFav: "toggleFav",
    onSelect: "onSelect"
  },
  features: [i0.ɵɵNgOnChangesFeature],
  decls: 12,
  vars: 7,
  consts: [["empty_state", ""], ["load_state", ""], ["placeholder", ""], [1, "w-full", "h-full", "overflow-auto", "py-2", "bg-base-200"], [1, "font-bold", "px-2"], ["count", "", 1, "text-sm", "opacity-60", "mb-4", "px-2"], [4, "ngIf", "ngIfElse"], ["class", "list-style-none space-y-2 p-2", 4, "ngIf", "ngIfElse"], [1, "list-style-none", "space-y-2", "p-2"], ["asset", "", "matRipple", "", "class", "relative p-2 rounded-lg w-full shadow border bg-base-100 border-base-200", 4, "ngFor", "ngForOf"], ["asset", "", "matRipple", "", 1, "relative", "p-2", "rounded-lg", "w-full", "shadow", "border", "bg-base-100", "border-base-200"], ["select", "", 1, "w-full", "h-full", "flex", "items-center", "pr-10", 3, "click"], [1, "relative", "w-16", "h-16", "rounded-xl", "bg-base-200", "mr-4", "flex", "items-center", "justify-center", "overflow-hidden", "border", "border-base-200"], ["class", "absolute top-1 left-1 border border-base-300 bg-base-200 rounded-full h-6 w-6 flex items-center justify-center", 4, "ngIf"], ["auth", "", "class", "object-cover h-full", 3, "source", 4, "ngIf", "ngIfElse"], [1, "space-y-2", "text-left", "flex-1"], [1, "font-medium", "flex", "items-center", "justify-between"], [1, "opacity-60", "text-xs"], [1, "flex", "items-center", "text-sm", "space-x-2"], ["icon", "", "matRipple", "", "fav", "", 1, "absolute", "top-1", "right-1", 3, "click"], [1, "absolute", "top-1", "left-1", "border", "border-base-300", "bg-base-200", "rounded-full", "h-6", "w-6", "flex", "items-center", "justify-center"], [1, "text-xs"], ["auth", "", 1, "object-cover", "h-full", 3, "source"], ["src", "assets/icons/asset-placeholder.svg", 1, "m-auto"], ["empty", "", 1, "p-16", "flex", "flex-col", "items-center", "justify-center", "space-y-2"], [1, "opacity-30", "text-center"], ["loading", "", 1, "p-16", "flex", "flex-col", "items-center", "justify-center", "space-y-2"], [3, "diameter"], [1, "opacity-30"]],
  template: function AssetListComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵelementStart(0, "div", 3)(1, "h3", 4);
      i0.ɵɵtext(2, "Results");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(3, "p", 5);
      i0.ɵɵtext(4);
      i0.ɵɵpipe(5, "async");
      i0.ɵɵelementEnd();
      i0.ɵɵtemplate(6, AssetListComponent_ng_container_6_Template, 3, 4, "ng-container", 6);
      i0.ɵɵpipe(7, "async");
      i0.ɵɵelementEnd();
      i0.ɵɵtemplate(8, AssetListComponent_ng_template_8_Template, 3, 0, "ng-template", null, 0, i0.ɵɵtemplateRefExtractor)(10, AssetListComponent_ng_template_10_Template, 4, 1, "ng-template", null, 1, i0.ɵɵtemplateRefExtractor);
    }
    if (rf & 2) {
      var tmp_2_0;
      var load_state_r6 = i0.ɵɵreference(11);
      i0.ɵɵadvance(4);
      i0.ɵɵtextInterpolate1(" ", ((tmp_2_0 = i0.ɵɵpipeBind1(5, 3, ctx.assets)) == null ? null : tmp_2_0.length) || 0, " result(s) found ");
      i0.ɵɵadvance(2);
      i0.ɵɵproperty("ngIf", !i0.ɵɵpipeBind1(7, 5, ctx.loading))("ngIfElse", load_state_r6);
    }
  },
  dependencies: [i2.NgForOf, i2.NgIf, i3.IconComponent, i4.AuthenticatedImageDirective, i5.MatRipple, i6.MatProgressSpinner, i2.AsyncPipe],
  styles: ["[_nghost-%COMP%] {\n                width: 100%;\n                height: 100%;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0LWxpc3QuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxXQUFXO2dCQUNYLFlBQVk7WUFDaEIiLCJmaWxlIjoiYXNzZXQtbGlzdC5jb21wb25lbnQudHMiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIDpob3N0IHtcbiAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgICAgICB9XG4gICAgICAgICJdfQ== */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvYXNzZXRzL3NyYy9saWIvYXNzZXQtc2VsZWN0LW1vZGFsL2Fzc2V0LWxpc3QuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxXQUFXO2dCQUNYLFlBQVk7WUFDaEI7O0FBRVosZ2FBQWdhIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICA6aG9zdCB7XG4gICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgICAgICAgfVxuICAgICAgICAiXSwic291cmNlUm9vdCI6IiJ9 */"]
});
exports.AssetListComponent = AssetListComponent;

/***/ }),

/***/ 47471:
/*!********************************************************************************!*\
  !*** ./libs/assets/src/lib/asset-select-modal/asset-select-modal.component.ts ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _toConsumableArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/toConsumableArray.js */ 86033)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _AssetSelectModalComponent;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.AssetSelectModalComponent = void 0;
var dialog_1 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var asset_state_service_1 = __webpack_require__(/*! ../asset-state.service */ 46088);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @placeos/common */ 22797);
var i2 = __webpack_require__(/*! ../asset-state.service */ 46088);
var i3 = __webpack_require__(/*! @angular/common */ 60316);
var i4 = __webpack_require__(/*! ../../../../components/src/lib/icon.component */ 69434);
var i5 = __webpack_require__(/*! @angular/material/core */ 74646);
var i6 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var i7 = __webpack_require__(/*! ./asset-details.component */ 48751);
var i8 = __webpack_require__(/*! ./asset-filters.component */ 64358);
var i9 = __webpack_require__(/*! ./asset-filters-display.component */ 76041);
var i10 = __webpack_require__(/*! ./asset-list.component */ 67807);
function AssetSelectModalComponent_button_15_Template(rf, ctx) {
  if (rf & 1) {
    var _r1 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "button", 21);
    i0.ɵɵlistener("click", function AssetSelectModalComponent_button_15_Template_button_click_0_listener() {
      i0.ɵɵrestoreView(_r1);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.displayed = null);
    });
    i0.ɵɵtext(1, " Back ");
    i0.ɵɵelementEnd();
  }
}
var EMPTY_FAVS = [];
var AssetSelectModalComponent = /*#__PURE__*/function () {
  function AssetSelectModalComponent(_settings, _state, _data) {
    var _this$_data$exact_tim;
    _classCallCheck(this, AssetSelectModalComponent);
    this._settings = _settings;
    this._state = _state;
    this._data = _data;
    this.displayed = null;
    this.selected = _toConsumableArray(this._data.items || []);
    this.exact_time = (_this$_data$exact_tim = this._data.exact_time) !== null && _this$_data$exact_tim !== void 0 ? _this$_data$exact_tim : false;
    this.requested = this._data.requested;
    var duration = this._data.details.duration;
    this._state.setOptions(this._data.details);
    this.offset = Math.min(Math.max(this._settings.get('app.assets.min_offset'), this._data.offset || 0), (duration || 60) - this._settings.get('app.assets.end_offset'));
    this.offset_day = this._data.offset_day || 0;
  }
  return _createClass(AssetSelectModalComponent, [{
    key: "favorites",
    get: function get() {
      return this._settings.get('favourite_assets') || EMPTY_FAVS;
    }
  }, {
    key: "selected_ids",
    get: function get() {
      return this.selected.map(function (_) {
        return _.id;
      }).join(',');
    }
  }, {
    key: "count",
    get: function get() {
      return this.selected.reduce(function (t, i) {
        return t + i.quantity;
      }, 0);
    }
  }, {
    key: "isSelected",
    value: function isSelected(id) {
      return id && this.selected_ids.includes(id);
    }
  }, {
    key: "setSelected",
    value: function setSelected(group, state) {
      var list = this.selected.filter(function (_) {
        return _.id !== group.id;
      });
      if (state) list.push(group);
      this.selected = _toConsumableArray(list);
    }
  }, {
    key: "updateSelectedCount",
    value: function updateSelectedCount(count) {
      var _this = this;
      if (!this.displayed) return;
      var item = this.selected.find(function (_) {
        return _.id === _this.displayed.id;
      });
      if (item) {
        item.quantity = count;
        item.assets = this.displayed.assets;
      }
    }
  }, {
    key: "toggleFavourite",
    value: function toggleFavourite(asset) {
      var fav_list = this.favorites;
      var new_state = !fav_list.includes(asset.id);
      if (new_state) {
        this._settings.saveUserSetting('favourite_assets', [].concat(_toConsumableArray(fav_list), [asset.id]));
      } else {
        this._settings.saveUserSetting('favourite_assets', fav_list.filter(function (_) {
          return _ !== asset.id;
        }));
      }
    }
  }]);
}();
_AssetSelectModalComponent = AssetSelectModalComponent;
_AssetSelectModalComponent.ɵfac = function AssetSelectModalComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _AssetSelectModalComponent)(i0.ɵɵdirectiveInject(i1.SettingsService), i0.ɵɵdirectiveInject(i2.AssetStateService), i0.ɵɵdirectiveInject(dialog_1.MAT_DIALOG_DATA));
};
_AssetSelectModalComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _AssetSelectModalComponent,
  selectors: [["asset-select-modal"]],
  decls: 33,
  vars: 25,
  consts: [[1, "w-[100vw]", "h-[100vh]", "sm:relative", "sm:w-auto", "sm:h-auto", "flex", "flex-col", "bg-base-100"], [1, "flex", "items-center", "space-x-4", "w-full"], ["icon", "", "mat-dialog-close", "", 1, "bg-base-200"], [1, "flex-1", "flex", "items-center", "divide-x", "divide-base-200", "min-h-[65vh]", "h-[65vh]", "sm:max-h-[65vh]", "sm:max-w-[95vw]", "w-full", "overflow-hidden"], [1, "flex", "flex-col", "items-center", "flex-1", "w-1/2", "h-full", "sm:h-[65vh]"], [1, "h-full", "hidden", "sm:block", 3, "at_timeChange", "offsetChange", "offset_dayChange", "at_time", "offset", "offset_day"], [1, "flex", "flex-col", "items-center", "flex-1", "w-1/2", "h-full", "sm:min-w-[20rem]", "sm:h-[65vh]"], [1, "w-full", "border-b", "border-base-200"], [1, "flex-1", "h-1/2", "w-full", "overflow-hidden", 3, "toggleFav", "onSelect", "selected", "favorites", "selected_items", "requested"], [1, "h-full", "w-full", "sm:h-[65vh]", "absolute", "sm:relative", "sm:flex", "sm:max-w-[20rem]", "bg-base-100", "z-20", 3, "activeChange", "countChange", "toggleFav", "close", "item", "active", "fav"], [1, "flex", "sm:hidden", "flex-col-reverse", "items-center", "justify-end", "p-2", "border-t", "border-base-200"], ["btn", "", "matRipple", "", "back-btn", "", "class", "inverse sm:hidden w-full sm:w-auto", 3, "click", 4, "ngIf"], ["btn", "", "matRipple", "", "save", "", 1, "w-full", "sm:w-auto", "sm:mb-0", 3, "mat-dialog-close"], [1, "hidden", "sm:flex", "items-center", "justify-between", "p-2", "border-t", "border-base-200", "w-full"], ["btn", "", "matRipple", "", 1, "clear", "text-secondary", 3, "mat-dialog-close"], [1, "flex", "items-center"], [1, "text-xl"], [1, "mr-1", "underline"], [1, "opacity-60", "text-sm"], ["btn", "", "matRipple", "", 3, "click", "disabled"], [1, "mr-1"], ["btn", "", "matRipple", "", "back-btn", "", 1, "inverse", "sm:hidden", "w-full", "sm:w-auto", 3, "click"]],
  template: function AssetSelectModalComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵelementStart(0, "div", 0)(1, "header", 1)(2, "button", 2)(3, "app-icon");
      i0.ɵɵtext(4, "close");
      i0.ɵɵelementEnd()();
      i0.ɵɵelementStart(5, "h3");
      i0.ɵɵtext(6, "Add Assets");
      i0.ɵɵelementEnd()();
      i0.ɵɵelementStart(7, "main", 3)(8, "div", 4)(9, "asset-filters", 5);
      i0.ɵɵtwoWayListener("at_timeChange", function AssetSelectModalComponent_Template_asset_filters_at_timeChange_9_listener($event) {
        i0.ɵɵtwoWayBindingSet(ctx.exact_time, $event) || (ctx.exact_time = $event);
        return $event;
      })("offsetChange", function AssetSelectModalComponent_Template_asset_filters_offsetChange_9_listener($event) {
        i0.ɵɵtwoWayBindingSet(ctx.offset, $event) || (ctx.offset = $event);
        return $event;
      })("offset_dayChange", function AssetSelectModalComponent_Template_asset_filters_offset_dayChange_9_listener($event) {
        i0.ɵɵtwoWayBindingSet(ctx.offset_day, $event) || (ctx.offset_day = $event);
        return $event;
      });
      i0.ɵɵelementEnd()();
      i0.ɵɵelementStart(10, "div", 6);
      i0.ɵɵelement(11, "asset-filters-display", 7);
      i0.ɵɵelementStart(12, "asset-list", 8);
      i0.ɵɵlistener("toggleFav", function AssetSelectModalComponent_Template_asset_list_toggleFav_12_listener($event) {
        return ctx.toggleFavourite($event);
      })("onSelect", function AssetSelectModalComponent_Template_asset_list_onSelect_12_listener($event) {
        return ctx.displayed = $event;
      });
      i0.ɵɵelementEnd()();
      i0.ɵɵelementStart(13, "asset-details", 9);
      i0.ɵɵlistener("activeChange", function AssetSelectModalComponent_Template_asset_details_activeChange_13_listener($event) {
        return ctx.setSelected(ctx.displayed, $event);
      })("countChange", function AssetSelectModalComponent_Template_asset_details_countChange_13_listener($event) {
        return ctx.updateSelectedCount($event);
      })("toggleFav", function AssetSelectModalComponent_Template_asset_details_toggleFav_13_listener() {
        return ctx.toggleFavourite(ctx.displayed);
      })("close", function AssetSelectModalComponent_Template_asset_details_close_13_listener() {
        return ctx.displayed = null;
      });
      i0.ɵɵelementEnd()();
      i0.ɵɵelementStart(14, "footer", 10);
      i0.ɵɵtemplate(15, AssetSelectModalComponent_button_15_Template, 2, 0, "button", 11);
      i0.ɵɵelementStart(16, "button", 12);
      i0.ɵɵtext(17, " View List ");
      i0.ɵɵelementEnd()();
      i0.ɵɵelementStart(18, "footer", 13)(19, "button", 14)(20, "div", 15)(21, "app-icon", 16);
      i0.ɵɵtext(22, "arrow_back");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(23, "div", 17);
      i0.ɵɵtext(24, "Back to form");
      i0.ɵɵelementEnd()()();
      i0.ɵɵelementStart(25, "p", 18);
      i0.ɵɵtext(26);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(27, "button", 19);
      i0.ɵɵlistener("click", function AssetSelectModalComponent_Template_button_click_27_listener() {
        return ctx.setSelected(ctx.displayed, !ctx.isSelected(ctx.displayed == null ? null : ctx.displayed.id));
      });
      i0.ɵɵelementStart(28, "div", 15)(29, "app-icon", 16);
      i0.ɵɵtext(30);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(31, "div", 20);
      i0.ɵɵtext(32);
      i0.ɵɵelementEnd()()()()();
    }
    if (rf & 2) {
      i0.ɵɵadvance(9);
      i0.ɵɵtwoWayProperty("at_time", ctx.exact_time)("offset", ctx.offset)("offset_day", ctx.offset_day);
      i0.ɵɵadvance(3);
      i0.ɵɵproperty("selected", ctx.selected_ids)("favorites", ctx.favorites)("selected_items", ctx.selected)("requested", ctx.requested);
      i0.ɵɵadvance();
      i0.ɵɵclassProp("hidden", !ctx.displayed)("inset-0", ctx.displayed);
      i0.ɵɵproperty("item", ctx.displayed)("active", ctx.selected_ids.includes((ctx.displayed == null ? null : ctx.displayed.id) || ""))("fav", !!ctx.displayed && ctx.favorites.includes((ctx.displayed == null ? null : ctx.displayed.id) || ""));
      i0.ɵɵadvance(2);
      i0.ɵɵproperty("ngIf", ctx.displayed);
      i0.ɵɵadvance();
      i0.ɵɵclassProp("mb-2", ctx.displayed);
      i0.ɵɵproperty("mat-dialog-close", ctx.selected);
      i0.ɵɵadvance(3);
      i0.ɵɵproperty("mat-dialog-close", ctx.selected);
      i0.ɵɵadvance(7);
      i0.ɵɵtextInterpolate1("", ctx.count, " asset(s) added");
      i0.ɵɵadvance();
      i0.ɵɵclassProp("inverse", ctx.isSelected(ctx.displayed == null ? null : ctx.displayed.id));
      i0.ɵɵproperty("disabled", !ctx.displayed);
      i0.ɵɵadvance(3);
      i0.ɵɵtextInterpolate1(" ", ctx.isSelected(ctx.displayed == null ? null : ctx.displayed.id) ? "remove" : "add", " ");
      i0.ɵɵadvance(2);
      i0.ɵɵtextInterpolate1(" ", ctx.isSelected(ctx.displayed == null ? null : ctx.displayed.id) ? "Remove from Booking" : "Add to booking", " ");
    }
  },
  dependencies: [i3.NgIf, i4.IconComponent, i5.MatRipple, i6.MatDialogClose, i7.AssetDetailsComponent, i8.AssetFiltersComponent, i9.AssetFiltersDisplayComponent, i10.AssetListComponent]
});
exports.AssetSelectModalComponent = AssetSelectModalComponent;

/***/ }),

/***/ 46088:
/*!****************************************************!*\
  !*** ./libs/assets/src/lib/asset-state.service.ts ***!
  \****************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _objectSpread = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/objectSpread2.js */ 34092)["default"]);
var _toConsumableArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/toConsumableArray.js */ 86033)["default"]);
var _slicedToArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/slicedToArray.js */ 6282)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _AssetStateService;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.AssetStateService = void 0;
var rxjs_1 = __webpack_require__(/*! rxjs */ 15681);
var operators_1 = __webpack_require__(/*! rxjs/operators */ 97303);
var assets_fn_1 = __webpack_require__(/*! ./assets.fn */ 75204);
var bookings_fn_1 = __webpack_require__(/*! libs/bookings/src/lib/bookings.fn */ 18026);
var date_fns_1 = __webpack_require__(/*! date-fns */ 25773);
var asset_group_pipe_1 = __webpack_require__(/*! ./asset-group.pipe */ 68965);
var organisation_1 = __webpack_require__(/*! @placeos/organisation */ 2510);
var asset_utilities_1 = __webpack_require__(/*! ./asset.utilities */ 82615);
var ts_client_1 = __webpack_require__(/*! @placeos/ts-client */ 35713);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @placeos/organisation */ 2510);
var AssetStateService = /*#__PURE__*/function () {
  function AssetStateService(_org) {
    var _this = this;
    _classCallCheck(this, AssetStateService);
    this._org = _org;
    this._options = new rxjs_1.BehaviorSubject({
      date: Date.now()
    });
    this._search = new rxjs_1.BehaviorSubject('');
    this._category = new rxjs_1.BehaviorSubject([]);
    this._loading = new rxjs_1.BehaviorSubject('');
    this.search = this._search.asObservable();
    this.category = this._category.asObservable();
    this.options = this._options.asObservable();
    this.loading = this._loading.asObservable();
    this.rules = (0, rxjs_1.combineLatest)([this._options, this._org.active_building]).pipe((0, operators_1.filter)(function (_ref) {
      var _ref2 = _slicedToArray(_ref, 2),
        _ = _ref2[0],
        bld = _ref2[1];
      return !!bld;
    }), (0, operators_1.debounceTime)(300), (0, operators_1.switchMap)(function (_ref3) {
      var _ref4 = _slicedToArray(_ref3, 2),
        options = _ref4[0],
        bld = _ref4[1];
      _this._loading.next(_this._loading.getValue() + '[Rules]');
      return (0, asset_utilities_1.getAssetRulesForZone)(bld.id || options.zone || '');
    }), (0, operators_1.tap)(function (_) {
      return _this._loading.next(_this._loading.getValue().replace(/\[Rules\]/g, ''));
    }), (0, operators_1.shareReplay)(1));
    this.asset_list = (0, rxjs_1.of)(0).pipe((0, operators_1.switchMap)(function () {
      _this._loading.next(_this._loading.getValue() + '[Assets]');
      return (0, assets_fn_1.queryAssets)();
    }), (0, operators_1.tap)(function (_) {
      return _this._loading.next(_this._loading.getValue().replace(/\[Assets\]/g, ''));
    }), (0, operators_1.shareReplay)(1));
    this.asset_bookings = this._options.pipe((0, operators_1.debounceTime)(300), (0, operators_1.switchMap)(function (_ref5) {
      var zone = _ref5.zone,
        date = _ref5.date;
      _this._loading.next(_this._loading.getValue() + '[Bookings]');
      return (0, bookings_fn_1.queryBookings)({
        zones: zone || '',
        period_start: (0, date_fns_1.getUnixTime)((0, date_fns_1.startOfDay)(date)),
        period_end: (0, date_fns_1.getUnixTime)((0, date_fns_1.endOfDay)(date)),
        type: 'asset-request'
      });
    }), (0, operators_1.tap)(function (_) {
      return _this._loading.next(_this._loading.getValue().replace(/\[Bookings\]/g, ''));
    }), (0, operators_1.shareReplay)(1));
    this.available_groups = (0, rxjs_1.combineLatest)([this._options, this._org.active_building]).pipe((0, operators_1.debounceTime)(300), (0, operators_1.switchMap)(function (_ref6) {
      var _ref7 = _slicedToArray(_ref6, 2),
        _ref7$ = _ref7[0],
        zone = _ref7$.zone,
        date = _ref7$.date,
        duration = _ref7$.duration,
        ignore = _ref7$.ignore,
        bld = _ref7[1];
      return (0, assets_fn_1.queryGroupAvailability)({
        zones: bld.id || zone || '',
        period_start: (0, date_fns_1.getUnixTime)((0, date_fns_1.startOfMinute)(date)),
        period_end: (0, date_fns_1.getUnixTime)((0, date_fns_1.endOfMinute)((0, date_fns_1.addMinutes)(date, duration || 30))),
        type: 'asset-request',
        rejected: false
      }, ignore).pipe((0, operators_1.catchError)(function () {
        return (0, rxjs_1.of)([]);
      }));
    }), (0, operators_1.map)(function (list) {
      return list.sort(function (a, b) {
        return a.name.localeCompare(b.name);
      });
    }), (0, operators_1.tap)(function (_) {
      return (0, asset_group_pipe_1.updateAssetGroupList)(_);
    }), (0, operators_1.shareReplay)(1));
    this.category_list = this._org.active_building.pipe((0, operators_1.switchMap)(function (bld) {
      return (0, assets_fn_1.queryAssetCategories)({
        zone_id: bld.id
      });
    }), (0, operators_1.map)(function (_) {
      return _.sort(function (a, b) {
        return a.name.localeCompare(b.name);
      });
    }), (0, operators_1.shareReplay)(1));
    this.filtered_assets = (0, rxjs_1.combineLatest)([this._search, this._category, this.available_groups, this.rules]).pipe((0, operators_1.map)(function (_ref8) {
      var _ref9 = _slicedToArray(_ref8, 4),
        search = _ref9[0],
        category = _ref9[1],
        assets = _ref9[2],
        rules = _ref9[3];
      var s = search.toLowerCase();
      var list = assets.filter(function (_) {
        var _$assets;
        return ((_$assets = _.assets) === null || _$assets === void 0 ? void 0 : _$assets.length) && (!category.length || category.includes(_.category_id)) && (_.name.toLowerCase().includes(s) || _.description.toLowerCase().includes(s)) && (0, asset_utilities_1.assetAvailable)(_, rules, _this._options.getValue());
      });
      return list;
    }), (0, operators_1.shareReplay)(1));
    this.settings = (0, rxjs_1.combineLatest)([this._org.active_building]).pipe((0, operators_1.filter)(function (_ref10) {
      var _ref11 = _slicedToArray(_ref10, 1),
        _ = _ref11[0];
      return !!_;
    }), (0, operators_1.switchMap)(function (_ref12) {
      var _ref13 = _slicedToArray(_ref12, 1),
        _ = _ref13[0];
      return (0, ts_client_1.showMetadata)(_.id, 'assets-settings').pipe((0, operators_1.catchError)(function (_) {
        return (0, rxjs_1.of)({});
      }));
    }), (0, operators_1.map)(function (_) {
      return _.details || {};
    }), (0, operators_1.shareReplay)(1));
    this.disabled_rooms = this.settings.pipe((0, operators_1.map)(function (_) {
      return _.disabled_rooms || [];
    }));
  }
  return _createClass(AssetStateService, [{
    key: "setSearch",
    value: function setSearch(value) {
      this._search.next("".concat(value));
    }
  }, {
    key: "toggleCategory",
    value: function toggleCategory(value) {
      var categories = this._category.getValue();
      if (categories.includes(value)) {
        this._category.next(categories.filter(function (_) {
          return _ !== value;
        }));
      } else {
        this._category.next([].concat(_toConsumableArray(categories), [value]));
      }
    }
  }, {
    key: "getOptions",
    value: function getOptions() {
      return this._options.getValue();
    }
  }, {
    key: "setOptions",
    value: function setOptions(options) {
      this._options.next(_objectSpread(_objectSpread({}, this._options.value), options));
    }
  }]);
}();
_AssetStateService = AssetStateService;
_AssetStateService.ɵfac = function AssetStateService_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _AssetStateService)(i0.ɵɵinject(i1.OrganisationService));
};
_AssetStateService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({
  token: _AssetStateService,
  factory: _AssetStateService.ɵfac,
  providedIn: 'root'
});
exports.AssetStateService = AssetStateService;

/***/ }),

/***/ 84011:
/*!********************************************!*\
  !*** ./libs/assets/src/lib/asset.class.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.Asset = exports.AssetGroup = exports.AssetPurchaseOrder = exports.AssetCategory = void 0;
var AssetCategory = /*#__PURE__*/_createClass(function AssetCategory(data) {
  _classCallCheck(this, AssetCategory);
  this.id = '';
  this.name = '';
  this.description = '';
  this.parent_category_id = '';
  this.created_at = Date.now();
  this.updated_at = Date.now();
  Object.assign(this, data);
});
exports.AssetCategory = AssetCategory;
var AssetPurchaseOrder = /*#__PURE__*/_createClass(function AssetPurchaseOrder(data) {
  _classCallCheck(this, AssetPurchaseOrder);
  Object.assign(this, data);
});
exports.AssetPurchaseOrder = AssetPurchaseOrder;
var AssetGroup = /*#__PURE__*/_createClass(function AssetGroup(data) {
  _classCallCheck(this, AssetGroup);
  this.images = [];
  Object.assign(this, data);
});
exports.AssetGroup = AssetGroup;
var Asset = /*#__PURE__*/_createClass(function Asset(data) {
  _classCallCheck(this, Asset);
  this.id = '';
  this.type_id = '';
  this.description = '';
  this.serial_number = '';
  this.barcode = '';
  this.identifier = '';
  this.other_data = {};
  this.purchase_order_id = '';
  this.created_at = Date.now();
  this.updated_at = Date.now();
  Object.assign(this, data);
});
exports.Asset = Asset;

/***/ }),

/***/ 82615:
/*!************************************************!*\
  !*** ./libs/assets/src/lib/asset.utilities.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _createForOfIteratorHelper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createForOfIteratorHelper.js */ 36350)["default"]);
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.generateAssetCategoryForm = generateAssetCategoryForm;
exports.generateAssetPurchaseOrderForm = generateAssetPurchaseOrderForm;
exports.generateAssetGroupForm = generateAssetGroupForm;
exports.generateAssetForm = generateAssetForm;
exports.getAssetRulesForZone = getAssetRulesForZone;
exports.assetAvailable = assetAvailable;
var forms_1 = __webpack_require__(/*! @angular/forms */ 34456);
var asset_class_1 = __webpack_require__(/*! ./asset.class */ 84011);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var date_fns_1 = __webpack_require__(/*! date-fns */ 25773);
var operators_1 = __webpack_require__(/*! rxjs/operators */ 97303);
var ts_client_1 = __webpack_require__(/*! @placeos/ts-client */ 35713);
var rxjs_1 = __webpack_require__(/*! rxjs */ 15681);
function generateAssetCategoryForm() {
  var category = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
  return new forms_1.FormGroup({
    id: new forms_1.FormControl(category.id),
    name: new forms_1.FormControl(category.name || '', [forms_1.Validators.required]),
    parent_category_id: new forms_1.FormControl(category.parent_category_id)
  });
}
function generateAssetPurchaseOrderForm() {
  var order = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
  return new forms_1.FormGroup({
    id: new forms_1.FormControl(order.id),
    order_number: new forms_1.FormControl(order.order_number || order.purchase_order_number || '', [forms_1.Validators.required]),
    invoice_number: new forms_1.FormControl(order.invoice_number || ''),
    unit_price: new forms_1.FormControl(order.unit_price || 0),
    purchase_date: new forms_1.FormControl(order.purchase_date * 1000 || null),
    expected_service_start_date: new forms_1.FormControl(order.expected_service_start_date * 1000 || order.depreciation_start_date || null),
    expected_service_end_date: new forms_1.FormControl(order.expected_service_end_date * 1000 || order.depreciation_end_date || null)
  });
}
function generateAssetGroupForm() {
  var group = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : new asset_class_1.AssetGroup();
  return new forms_1.FormGroup({
    id: new forms_1.FormControl(group.id),
    category_id: new forms_1.FormControl(group.category_id || '', [forms_1.Validators.required]),
    images: new forms_1.FormControl(group.images || []),
    brand: new forms_1.FormControl(group.brand || ''),
    name: new forms_1.FormControl(group.name || '', [forms_1.Validators.required]),
    description: new forms_1.FormControl(group.description || '')
  });
}
function generateAssetForm() {
  var asset = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : new asset_class_1.Asset();
  return new forms_1.FormGroup({
    id: new forms_1.FormControl(asset.id),
    type_id: new forms_1.FormControl(asset.type_id || '', [forms_1.Validators.required]),
    description: new forms_1.FormControl(asset.description || ''),
    serial_number: new forms_1.FormControl(asset.serial_number || ''),
    barcode: new forms_1.FormControl(asset.barcode || ''),
    identifier: new forms_1.FormControl(asset.identifier || ''),
    other_data: new forms_1.FormControl(asset.other_data || {}),
    purchase_order_id: new forms_1.FormControl(asset.purchase_order_id)
  });
}
var RULE_REQUESTS = {};
function getAssetRulesForZone(zone_id) {
  var fresh = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;
  if (!zone_id) return (0, rxjs_1.of)([]);
  if (!RULE_REQUESTS[zone_id] || fresh) RULE_REQUESTS[zone_id] = (0, ts_client_1.showMetadata)(zone_id, 'assets_config').pipe((0, operators_1.map)(function (_) {
    return _.details instanceof Array ? _.details : [];
  }), (0, operators_1.catchError)(function (e) {
    return (0, rxjs_1.of)([]);
  }));
  return RULE_REQUESTS[zone_id];
}
function assetAvailable(item, rules, event) {
  var current_date = Date.now();
  var event_date = new Date(event.date);
  var isRuleMatch = function isRuleMatch(rule) {
    var _event$space;
    return item.name === rule.name || item.category.name.includes(rule.name) || event.resources.some(function (resource) {
      return resource.zones.includes(rule.name);
    }) || ((_event$space = event.space) === null || _event$space === void 0 ? void 0 : _event$space.zones.includes(rule.name)) || rule.name === '*';
  };
  var countMatches = function countMatches(rule) {
    return rule.rules.reduce(function (matches, condition) {
      switch (condition[0]) {
        case 'is_before':
          return matches + ((0, date_fns_1.isBefore)(current_date, (0, date_fns_1.subHours)(event_date, condition[1])) ? 1 : 0);
        case 'within_hours':
          return matches + ((0, date_fns_1.isAfter)(current_date, (0, date_fns_1.subHours)(event_date, condition[1])) ? 1 : 0);
        case 'after_hour':
          return matches + ((0, date_fns_1.isAfter)(event_date, (0, date_fns_1.setHours)(event_date, condition[1])) ? 1 : 0);
        case 'before_hour':
          return matches + ((0, date_fns_1.isBefore)(event_date, (0, date_fns_1.setHours)(event_date, condition[1])) ? 1 : 0);
        case 'min_length':
          return matches + (event.duration >= (0, common_1.stringToMinutes)(condition[1]) ? 1 : 0);
        case 'max_length':
          return matches + (event.duration <= (0, common_1.stringToMinutes)(condition[1]) ? 1 : 0);
        case 'visitor_type':
          return matches + (event.ext('visitor_type') === condition[1] ? 1 : 0);
        default:
          return matches + 1;
      }
    }, 0);
  };
  var _iterator = _createForOfIteratorHelper(rules),
    _step;
  try {
    for (_iterator.s(); !(_step = _iterator.n()).done;) {
      var rule = _step.value;
      if (isRuleMatch(rule)) {
        if (countMatches(rule) < rule.rules.length) {
          return false;
        }
      }
    }
  } catch (err) {
    _iterator.e(err);
  } finally {
    _iterator.f();
  }
  return true;
}

/***/ }),

/***/ 75204:
/*!******************************************!*\
  !*** ./libs/assets/src/lib/assets.fn.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _toConsumableArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/toConsumableArray.js */ 86033)["default"]);
var _regeneratorRuntime = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/regeneratorRuntime.js */ 8698)["default"]);
var _asyncToGenerator = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/asyncToGenerator.js */ 95386)["default"]);
var _createForOfIteratorHelper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createForOfIteratorHelper.js */ 36350)["default"]);
var _slicedToArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/slicedToArray.js */ 6282)["default"]);
var _objectSpread = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/objectSpread2.js */ 34092)["default"]);
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.queryAssetCategories = queryAssetCategories;
exports.addAssetCategory = addAssetCategory;
exports.updateAssetCategory = updateAssetCategory;
exports.saveAssetCategory = saveAssetCategory;
exports.showAssetCategory = showAssetCategory;
exports.deleteAssetCategory = deleteAssetCategory;
exports.queryAssetGroups = queryAssetGroups;
exports.queryAssetGroupsExtended = queryAssetGroupsExtended;
exports.addAssetGroup = addAssetGroup;
exports.updateAssetGroup = updateAssetGroup;
exports.saveAssetGroup = saveAssetGroup;
exports.showAssetGroup = showAssetGroup;
exports.deleteAssetGroup = deleteAssetGroup;
exports.queryAssets = queryAssets;
exports.addAsset = addAsset;
exports.updateAsset = updateAsset;
exports.saveAsset = saveAsset;
exports.showAsset = showAsset;
exports.deleteAsset = deleteAsset;
exports.addAssetsInBulk = addAssetsInBulk;
exports.updateAssetsInBulk = updateAssetsInBulk;
exports.saveAssetsInBulk = saveAssetsInBulk;
exports.deleteAssetsInBulk = deleteAssetsInBulk;
exports.queryAssetPurchaseOrders = queryAssetPurchaseOrders;
exports.addAssetPurchaseOrder = addAssetPurchaseOrder;
exports.updateAssetPurchaseOrder = updateAssetPurchaseOrder;
exports.saveAssetPurchaseOrder = saveAssetPurchaseOrder;
exports.showAssetPurchaseOrder = showAssetPurchaseOrder;
exports.deleteAssetPurchaseOrder = deleteAssetPurchaseOrder;
exports.getGroupsWithAssets = getGroupsWithAssets;
exports.showGroupFull = showGroupFull;
exports.queryAvailableAssets = queryAvailableAssets;
exports.queryGroupAvailability = queryGroupAvailability;
exports.removeAssetRequests = removeAssetRequests;
exports.differenceBetweenAssetRequests = differenceBetweenAssetRequests;
exports.validateAssetRequestsForResource = validateAssetRequestsForResource;
var ts_client_1 = __webpack_require__(/*! @placeos/ts-client */ 35713);
var api_1 = __webpack_require__(/*! libs/common/src/lib/api */ 38385);
var operators_1 = __webpack_require__(/*! rxjs/operators */ 97303);
var rxjs_1 = __webpack_require__(/*! rxjs */ 15681);
var date_fns_1 = __webpack_require__(/*! date-fns */ 25773);
var bookings_fn_1 = __webpack_require__(/*! libs/bookings/src/lib/bookings.fn */ 18026);
var booking_class_1 = __webpack_require__(/*! libs/bookings/src/lib/booking.class */ 53857);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var asset_request_class_1 = __webpack_require__(/*! ./asset-request.class */ 33747);
var BASE_ENDPOINT = '/api/engine/v2';
////////////////////////////////
////    Asset Categories    ////
////////////////////////////////
function queryAssetCategories() {
  var query = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
  var q = (0, api_1.toQueryString)(query);
  return (0, ts_client_1.get)("".concat(BASE_ENDPOINT, "/asset_categories").concat(q ? '?' + q : '')).pipe((0, operators_1.map)(function (_) {
    return _;
  }));
}
function addAssetCategory(category) {
  return (0, ts_client_1.post)("".concat(BASE_ENDPOINT, "/asset_categories"), (0, ts_client_1.cleanObject)(category, [undefined, null, ''])).pipe((0, operators_1.map)(function (_) {
    return _;
  }));
}
function updateAssetCategory(id, category) {
  return (0, ts_client_1.put)("".concat(BASE_ENDPOINT, "/asset_categories/").concat(id), (0, ts_client_1.cleanObject)(category, [undefined, null, ''])).pipe((0, operators_1.map)(function (_) {
    return _;
  }));
}
function saveAssetCategory(category) {
  return category.id ? updateAssetCategory(category.id, category) : addAssetCategory(category);
}
function showAssetCategory(id) {
  return (0, ts_client_1.get)("".concat(BASE_ENDPOINT, "/asset_categories/").concat(id)).pipe((0, operators_1.map)(function (_) {
    return _;
  }));
}
function deleteAssetCategory(id) {
  return (0, ts_client_1.del)("".concat(BASE_ENDPOINT, "/asset_categories/").concat(id));
}
//////////////////////////////
////     Asset Groups     ////
//////////////////////////////
function queryAssetGroups() {
  var query = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
  var q = (0, api_1.toQueryString)(query);
  return (0, ts_client_1.get)("".concat(BASE_ENDPOINT, "/asset_types").concat(q ? '?' + q : '')).pipe((0, operators_1.map)(function (_) {
    return _;
  }));
}
var groups_cache = new Map();
function queryAssetGroupsExtended() {
  var query = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
  var q = (0, api_1.toQueryString)(query);
  if (groups_cache.has(query.zones)) {
    return (0, rxjs_1.of)(groups_cache.get(query.zones));
  }
  return (0, ts_client_1.get)("".concat(BASE_ENDPOINT, "/asset_types").concat(q ? '?' + q : '')).pipe((0, operators_1.map)(function (_) {
    return _;
  }), (0, operators_1.switchMap)(function (list) {
    return (0, rxjs_1.forkJoin)(list.map(function (group) {
      return queryAssets(_objectSpread(_objectSpread({
        limit: 200
      }, query), {}, {
        type_id: group.id
      })).pipe((0, operators_1.map)(function (assets) {
        return _objectSpread(_objectSpread({}, group), {}, {
          assets: assets
        });
      }));
    }));
  }), (0, operators_1.tap)(function (_) {
    groups_cache.set(query.zones, _);
    // Clear cache after 5 minutes
    setTimeout(function () {
      return groups_cache["delete"](query.zones);
    }, 5 * 60 * 1000);
  }));
}
function addAssetGroup(product) {
  return (0, ts_client_1.post)("".concat(BASE_ENDPOINT, "/asset_types"), (0, ts_client_1.cleanObject)(product, [undefined, null, ''])).pipe((0, operators_1.map)(function (_) {
    return _;
  }));
}
function updateAssetGroup(id, product) {
  return (0, ts_client_1.put)("".concat(BASE_ENDPOINT, "/asset_types/").concat(id), (0, ts_client_1.cleanObject)(product, [undefined, null, ''])).pipe((0, operators_1.map)(function (_) {
    return _;
  }));
}
function saveAssetGroup(product) {
  return product.id ? updateAssetGroup(product.id, product) : addAssetGroup(product);
}
function showAssetGroup(id) {
  return (0, ts_client_1.get)("".concat(BASE_ENDPOINT, "/asset_types/").concat(id)).pipe((0, operators_1.map)(function (_) {
    return _;
  }));
}
function deleteAssetGroup(id) {
  return (0, ts_client_1.del)("".concat(BASE_ENDPOINT, "/asset_types/").concat(id));
}
////////////////////////////////
////          Assets        ////
////////////////////////////////
function queryAssets() {
  var query = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
  var q = (0, api_1.toQueryString)(query);
  return (0, ts_client_1.get)("".concat(BASE_ENDPOINT, "/assets").concat(q ? '?' + q : '')).pipe((0, operators_1.map)(function (_) {
    return _;
  }));
}
function addAsset(asset) {
  return (0, ts_client_1.post)("".concat(BASE_ENDPOINT, "/assets"), (0, ts_client_1.cleanObject)(asset, [undefined, null, ''])).pipe((0, operators_1.map)(function (_) {
    return _;
  }));
}
function updateAsset(id, asset) {
  return (0, ts_client_1.put)("".concat(BASE_ENDPOINT, "/assets/").concat(id), (0, ts_client_1.cleanObject)(asset, [undefined, null, ''])).pipe((0, operators_1.map)(function (_) {
    return _;
  }));
}
function saveAsset(asset) {
  return asset.id ? updateAsset(asset.id, _objectSpread(_objectSpread({}, asset), {}, {
    asset_type_id: asset.type_id
  })) : addAsset(_objectSpread(_objectSpread({}, asset), {}, {
    asset_type_id: asset.type_id
  }));
}
function showAsset(id) {
  return (0, ts_client_1.get)("".concat(BASE_ENDPOINT, "/assets/").concat(id)).pipe((0, operators_1.map)(function (_) {
    return _;
  }));
}
function deleteAsset(id) {
  return (0, ts_client_1.del)("".concat(BASE_ENDPOINT, "/assets/").concat(id));
}
////////////////////////////////
////      Assets (Bulk)     ////
////////////////////////////////
function addAssetsInBulk(assets) {
  assets.map(function (_) {
    return _.asset_type_id = _.type_id;
  });
  return (0, ts_client_1.post)("".concat(BASE_ENDPOINT, "/assets/bulk"), assets.map(function (_) {
    return (0, ts_client_1.cleanObject)(_, [undefined, null, '']);
  })).pipe((0, operators_1.map)(function (_) {
    return _;
  }));
}
function updateAssetsInBulk(assets) {
  assets.map(function (_) {
    return _.asset_type_id = _.type_id;
  });
  return (0, ts_client_1.put)("".concat(BASE_ENDPOINT, "/assets/bulk"), assets.map(function (_) {
    return (0, ts_client_1.cleanObject)(_, [undefined, null, '']);
  })).pipe((0, operators_1.map)(function (_) {
    return _;
  }));
}
function saveAssetsInBulk(assets) {
  if (!(assets !== null && assets !== void 0 && assets.length)) return (0, rxjs_1.of)([]);
  return assets.every(function (item) {
    return item === null || item === void 0 ? void 0 : item.id;
  }) ? updateAssetsInBulk(assets) : addAssetsInBulk(assets);
}
function deleteAssetsInBulk(id_list) {
  return (0, ts_client_1.del)("".concat(BASE_ENDPOINT, "/assets/bulk"), {
    body: {
      id_list: id_list
    }
  });
}
/////////////////////////////////
////  Asset Purchase Orders  ////
/////////////////////////////////
function queryAssetPurchaseOrders() {
  var query = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
  var q = (0, api_1.toQueryString)(query);
  return (0, ts_client_1.get)("".concat(BASE_ENDPOINT, "/asset_purchase_orders").concat(q ? '?' + q : '')).pipe((0, operators_1.map)(function (_) {
    return _;
  }));
}
function addAssetPurchaseOrder(order) {
  return (0, ts_client_1.post)("".concat(BASE_ENDPOINT, "/asset_purchase_orders"), (0, ts_client_1.cleanObject)(order, [undefined, null, ''])).pipe((0, operators_1.map)(function (_) {
    return _;
  }));
}
function updateAssetPurchaseOrder(id, order) {
  return (0, ts_client_1.put)("".concat(BASE_ENDPOINT, "/asset_purchase_orders/").concat(id), (0, ts_client_1.cleanObject)(order, [undefined, null, ''])).pipe((0, operators_1.map)(function (_) {
    return _;
  }));
}
function saveAssetPurchaseOrder(order) {
  return order.id ? updateAssetPurchaseOrder(order.id, _objectSpread(_objectSpread({}, order), {}, {
    purchase_order_number: order.order_number
  })) : addAssetPurchaseOrder(_objectSpread(_objectSpread({}, order), {}, {
    purchase_order_number: order.order_number
  }));
}
function showAssetPurchaseOrder(id) {
  return (0, ts_client_1.get)("".concat(BASE_ENDPOINT, "/asset_purchase_orders/").concat(id)).pipe((0, operators_1.map)(function (_) {
    return _;
  }));
}
function deleteAssetPurchaseOrder(id) {
  return (0, ts_client_1.del)("".concat(BASE_ENDPOINT, "/asset_purchase_orders/").concat(id));
}
//////////////////////////////////////
////     Asset Helper Methods     ////
//////////////////////////////////////
function getGroupsWithAssets() {
  var query = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
  return (0, rxjs_1.combineLatest)([queryAssetGroups(query)]).pipe((0, operators_1.map)(function (_ref) {
    var _ref2 = _slicedToArray(_ref, 1),
      products = _ref2[0];
    return products;
  }));
}
function showGroupFull(id) {
  var query = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
  return (0, rxjs_1.combineLatest)([showAssetGroup(id), queryAssetCategories(), queryAssets(_objectSpread(_objectSpread({}, query), {}, {
    type_id: id,
    limit: 2000
  })), queryAssetPurchaseOrders()]).pipe((0, operators_1.map)(function (_ref3) {
    var _ref4 = _slicedToArray(_ref3, 4),
      product = _ref4[0],
      categories = _ref4[1],
      assets = _ref4[2],
      purchase_orders = _ref4[3];
    product.category = categories.find(function (category) {
      return category.id === product.category_id;
    });
    product.assets = assets.filter(function (asset) {
      return asset.type_id === product.id || asset.asset_type_id === product.id;
    });
    var _iterator = _createForOfIteratorHelper(product.assets),
      _step;
    try {
      var _loop = function _loop() {
        var _purchase_orders$find;
        var asset = _step.value;
        asset.order_number = (_purchase_orders$find = purchase_orders.find(function (_) {
          return _.id === asset.purchase_order_id;
        })) === null || _purchase_orders$find === void 0 ? void 0 : _purchase_orders$find.purchase_order_number;
      };
      for (_iterator.s(); !(_step = _iterator.n()).done;) {
        _loop();
      }
    } catch (err) {
      _iterator.e(err);
    } finally {
      _iterator.f();
    }
    product.purchase_orders = purchase_orders.filter(function (order) {
      return product.assets.find(function (asset) {
        return asset.purchase_order_id === order.id;
      });
    });
    return product;
  }));
}
function queryAvailableAssets(query, ignore) {
  query.type = 'asset-request';
  return (0, rxjs_1.combineLatest)([queryAssets(query), (0, bookings_fn_1.queryBookings)(query)]).pipe((0, operators_1.map)(function (_ref5) {
    var _ref6 = _slicedToArray(_ref5, 2),
      assets = _ref6[0],
      bookings = _ref6[1];
    return assets.filter(function (asset) {
      return (ignore === null || ignore === void 0 ? void 0 : ignore.includes(asset.id)) || !bookings.find(function (booking) {
        var _booking$asset_ids;
        return booking.asset_id === asset.id || ((_booking$asset_ids = booking.asset_ids) === null || _booking$asset_ids === void 0 ? void 0 : _booking$asset_ids.includes(asset.id));
      });
    });
  }));
}
function queryGroupAvailability(query, ignore) {
  query.type = 'asset-request';
  return (0, rxjs_1.combineLatest)([queryAssetGroupsExtended(query), (0, bookings_fn_1.queryBookings)(query)]).pipe((0, operators_1.map)(function (_ref7) {
    var _ref8 = _slicedToArray(_ref7, 2),
      products = _ref8[0],
      bookings = _ref8[1];
    bookings = bookings.filter(function (_) {
      return _.status !== 'declined' && _.status !== 'cancelled';
    });
    return products.map(function (product) {
      return _objectSpread(_objectSpread({}, product), {}, {
        assets: product.assets.filter(function (asset) {
          return (ignore === null || ignore === void 0 ? void 0 : ignore.includes(asset.id)) || !bookings.find(function (booking) {
            var _booking$asset_ids2;
            return !ignore.includes(booking.id) && (booking.asset_id === asset.id || ((_booking$asset_ids2 = booking.asset_ids) === null || _booking$asset_ids2 === void 0 ? void 0 : _booking$asset_ids2.includes(asset.id)));
          });
        })
      });
    });
  }));
}
function removeAssetRequests(_x) {
  return _removeAssetRequests.apply(this, arguments);
}
function _removeAssetRequests() {
  _removeAssetRequests = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(id) {
    var requests;
    return _regeneratorRuntime().wrap(function _callee$(_context) {
      while (1) switch (_context.prev = _context.next) {
        case 0:
          _context.next = 2;
          return (0, bookings_fn_1.queryBookings)({
            period_start: (0, date_fns_1.getUnixTime)((0, date_fns_1.startOfDay)(new Date())),
            period_end: (0, date_fns_1.getUnixTime)((0, date_fns_1.endOfDay)(new Date())),
            type: 'asset-request'
          }).toPromise();
        case 2:
          requests = _context.sent;
          return _context.abrupt("return", Promise.all(requests.filter(function (_) {
            var _$asset_ids;
            return _.asset_id === id || ((_$asset_ids = _.asset_ids) === null || _$asset_ids === void 0 ? void 0 : _$asset_ids.includes(id));
          }).map(function (request) {
            return (0, bookings_fn_1.removeBooking)(request.id).toPromise();
          })));
        case 4:
        case "end":
          return _context.stop();
      }
    }, _callee);
  }));
  return _removeAssetRequests.apply(this, arguments);
}
function differenceBetweenAssetRequests(new_assets, old_assets) {
  var reset_state = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;
  if ((!new_assets || (new_assets === null || new_assets === void 0 ? void 0 : new_assets.length) <= 0) && old_assets !== null && old_assets !== void 0 && old_assets.length) return [];
  if (!old_assets) return [];
  var changed = [];
  var _iterator2 = _createForOfIteratorHelper(new_assets),
    _step2;
  try {
    var _loop2 = function _loop2() {
      var request = _step2.value;
      var match = old_assets.find(function (_) {
        return _.id === request.id;
      });
      if (!match || match.ref_id !== request.ref_id) {
        changed.push(request.id);
      }
    };
    for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
      _loop2();
    }
  } catch (err) {
    _iterator2.e(err);
  } finally {
    _iterator2.f();
  }
  return changed;
}
function validateAssetRequestsForResource(_x2, _x3) {
  return _validateAssetRequestsForResource.apply(this, arguments);
}
function _validateAssetRequestsForResource() {
  _validateAssetRequestsForResource = _asyncToGenerator(function (_ref9, _ref10) {
    var id = _ref9.id,
      ical_uid = _ref9.ical_uid,
      from_booking = _ref9.from_booking;
    var date = _ref10.date,
      duration = _ref10.duration,
      all_day = _ref10.all_day,
      host = _ref10.host,
      location_name = _ref10.location_name,
      location_id = _ref10.location_id,
      zones = _ref10.zones,
      reset_state = _ref10.reset_state;
    var new_assets = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];
    var force_create = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;
    return /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {
      var requests, bookings, booking_list, changed, has_state, unchanged, changed_requests, changed_assets, filtered, used_ids, _iterator3, _step3, _step3$value, _, request, available_groups, processed_requests;
      return _regeneratorRuntime().wrap(function _callee3$(_context3) {
        while (1) switch (_context3.prev = _context3.next) {
          case 0:
            _context3.next = 2;
            return (0, bookings_fn_1.queryBookings)({
              period_start: (0, date_fns_1.getUnixTime)(all_day ? (0, date_fns_1.startOfDay)(date) : date),
              period_end: (0, date_fns_1.getUnixTime)(all_day ? (0, date_fns_1.endOfDay)((0, date_fns_1.addMinutes)(date, duration)) : (0, date_fns_1.addMinutes)(date, duration)),
              type: 'asset-request',
              zones: zones.join(',')
            }).toPromise();
          case 2:
            requests = _context3.sent;
            if (!(id && ical_uid)) {
              _context3.next = 9;
              break;
            }
            _context3.next = 6;
            return (0, bookings_fn_1.queryBookings)({
              period_start: (0, date_fns_1.getUnixTime)((0, date_fns_1.startOfDay)(date)),
              period_end: (0, date_fns_1.getUnixTime)((0, date_fns_1.endOfDay)(date)),
              type: 'asset-request',
              email: host,
              event_id: from_booking ? '' : id,
              booking_id: from_booking ? id : '',
              ical_uid: ical_uid
            }).toPromise();
          case 6:
            _context3.t0 = _context3.sent;
            _context3.next = 10;
            break;
          case 9:
            _context3.t0 = [];
          case 10:
            bookings = _context3.t0;
            booking_list = bookings.map(function (_) {
              return [_.id, new asset_request_class_1.AssetRequest(_.extension_data.request)];
            });
            new_assets === null || new_assets === void 0 || new_assets.forEach(function (_) {
              return _.conflict = false;
            });
            changed = force_create ? new_assets.map(function (_) {
              return _.id;
            }) : differenceBetweenAssetRequests(new_assets, booking_list.map(function (_ref11) {
              var _ref12 = _slicedToArray(_ref11, 2),
                _ = _ref12[0],
                r = _ref12[1];
              return r;
            }), reset_state);
            if (reset_state) {
              has_state = bookings.filter(function (_) {
                return _.approved || _.rejected;
              });
              changed = (0, common_1.unique)([].concat(_toConsumableArray(changed), _toConsumableArray(has_state.map(function (_) {
                return _.extension_data.request_id;
              }))));
            }
            unchanged = booking_list.filter(function (_ref13) {
              var _ref14 = _slicedToArray(_ref13, 2),
                _ = _ref14[0],
                request = _ref14[1];
              return !changed.includes(request.id);
            });
            changed_requests = booking_list.filter(function (_ref15) {
              var _ref16 = _slicedToArray(_ref15, 2),
                _ = _ref16[0],
                id = _ref16[1].id;
              return changed.includes(id);
            });
            changed_assets = new_assets.filter(function (_ref17) {
              var id = _ref17.id;
              return changed.includes(id);
            });
            filtered = requests.filter(function (req) {
              return !req.rejected && (!bookings.find(function (b) {
                return b.id === req.id;
              }) || unchanged.find(function (_ref18) {
                var _ref19 = _slicedToArray(_ref18, 1),
                  id = _ref19[0];
                return req.event_id === id;
              }));
            });
            used_ids = (0, common_1.flatten)(filtered.map(function (_) {
              return _.asset_ids;
            }));
            _iterator3 = _createForOfIteratorHelper(unchanged);
            try {
              for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {
                _step3$value = _slicedToArray(_step3.value, 2), _ = _step3$value[0], request = _step3$value[1];
                used_ids = [].concat(_toConsumableArray(used_ids), _toConsumableArray((0, common_1.flatten)(request.items.map(function (_) {
                  return _.item_ids;
                }))));
              }
            } catch (err) {
              _iterator3.e(err);
            } finally {
              _iterator3.f();
            }
            _context3.next = 24;
            return queryGroupAvailability({
              period_start: (0, date_fns_1.getUnixTime)(all_day ? (0, date_fns_1.startOfDay)(date) : date),
              period_end: (0, date_fns_1.getUnixTime)(all_day ? (0, date_fns_1.endOfDay)((0, date_fns_1.addMinutes)(date, duration)) : (0, date_fns_1.addMinutes)(date, duration)),
              type: 'asset-request'
            }, bookings.map(function (_) {
              return _.id;
            })).toPromise();
          case 24:
            available_groups = _context3.sent;
            processed_requests = changed_assets.map(function (request) {
              // Handle duplicate asset ids
              var asset_ids = (0, common_1.flatten)(request.items.map(function (_ref20) {
                var _available_groups$fin;
                var id = _ref20.id,
                  item_ids = _ref20.item_ids,
                  quantity = _ref20.quantity;
                var assets = (_available_groups$fin = available_groups.find(function (_) {
                  return _.id === id;
                })) === null || _available_groups$fin === void 0 ? void 0 : _available_groups$fin.assets;
                if (!assets) return item_ids;
                var list = [];
                return new Array(quantity).fill(0).map(function (_, idx) {
                  var _assets$find;
                  var item = used_ids.includes(item_ids[idx]) || list.includes(item_ids[idx]) || !item_ids[idx] ? assets === null || assets === void 0 || (_assets$find = assets.find(function (_ref21) {
                    var id = _ref21.id;
                    return !used_ids.includes(id) && !list.includes(id);
                  })) === null || _assets$find === void 0 ? void 0 : _assets$find.id : item_ids[idx];
                  if (!item) {
                    request.conflict = true;
                    throw 'Unable to find available asset for request';
                  }
                  list.push(item);
                  return item;
                });
              }));
              // Grab any existing bookings for the asset for the parent event/booking
              var booking = bookings.find(function (_) {
                return _.asset_ids.find(function (id) {
                  var _request$items;
                  return (_request$items = request.items) === null || _request$items === void 0 ? void 0 : _request$items.find(function (i) {
                    return i.item_ids.includes(id);
                  });
                });
              });
              used_ids = [].concat(_toConsumableArray(used_ids), _toConsumableArray(asset_ids));
              var asset_data = {
                type: 'asset-request',
                booking_type: 'asset-request',
                date: date,
                duration: duration,
                all_day: all_day,
                description: location_name,
                user_email: host,
                asset_id: asset_ids[0],
                asset_ids: asset_ids,
                asset_name: request.items.map(function (_) {
                  return _.name;
                }).join(', '),
                title: request.items.map(function (_) {
                  return _.name;
                }).join(', '),
                approved: !reset_state && (booking === null || booking === void 0 ? void 0 : booking.approved) && !request._changed,
                rejected: !reset_state && (booking === null || booking === void 0 ? void 0 : booking.rejected) && !request._changed,
                extension_data: {
                  parent_id: id,
                  request_id: request.id,
                  location_id: location_id,
                  request: new asset_request_class_1.AssetRequest(_objectSpread(_objectSpread({}, request), {}, {
                    event: null
                  }))
                },
                zones: zones || []
              };
              if (from_booking) asset_data.parent_id = id;
              return (0, bookings_fn_1.createBooking)(new booking_class_1.Booking(asset_data), {
                ical_uid: ical_uid,
                event_id: from_booking ? '' : id
              });
            });
            return _context3.abrupt("return", /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {
              return _regeneratorRuntime().wrap(function _callee2$(_context2) {
                while (1) switch (_context2.prev = _context2.next) {
                  case 0:
                    _context2.next = 2;
                    return Promise.all(changed_requests.map(function (_ref23) {
                      var _ref24 = _slicedToArray(_ref23, 1),
                        id = _ref24[0];
                      return (0, bookings_fn_1.removeBooking)(id).toPromise();
                    }));
                  case 2:
                    _context2.next = 4;
                    return Promise.all(processed_requests.map(function (r) {
                      return r.toPromise();
                    }));
                  case 4:
                  case "end":
                    return _context2.stop();
                }
              }, _callee2);
            })));
          case 27:
          case "end":
            return _context3.stop();
        }
      }, _callee3);
    })();
  });
  return _validateAssetRequestsForResource.apply(this, arguments);
}

/***/ }),

/***/ 99708:
/*!**********************************************!*\
  !*** ./libs/assets/src/lib/assets.module.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _AssetsModule;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.AssetsModule = void 0;
var tslib_1 = __webpack_require__(/*! tslib */ 24398);
var common_1 = __webpack_require__(/*! @angular/common */ 60316);
var components_1 = __webpack_require__(/*! @placeos/components */ 51588);
var form_fields_1 = __webpack_require__(/*! @placeos/form-fields */ 63046);
var forms_1 = __webpack_require__(/*! @angular/forms */ 34456);
var asset_select_modal_component_1 = __webpack_require__(/*! ./asset-select-modal/asset-select-modal.component */ 47471);
var asset_details_component_1 = __webpack_require__(/*! ./asset-select-modal/asset-details.component */ 48751);
var asset_filters_component_1 = __webpack_require__(/*! ./asset-select-modal/asset-filters.component */ 64358);
var asset_filters_display_component_1 = __webpack_require__(/*! ./asset-select-modal/asset-filters-display.component */ 76041);
var asset_list_component_1 = __webpack_require__(/*! ./asset-select-modal/asset-list.component */ 67807);
var asset_group_pipe_1 = __webpack_require__(/*! ./asset-group.pipe */ 68965);
var asset_list_field_component_1 = __webpack_require__(/*! ./asset-list-field.component */ 83618);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
tslib_1.__exportStar(__webpack_require__(/*! ./asset-select-modal/asset-select-modal.component */ 47471), exports);
var COMPONENTS = [asset_select_modal_component_1.AssetSelectModalComponent, asset_list_field_component_1.AssetListFieldComponent];
var MODULE_COMPONENTS = [asset_details_component_1.AssetDetailsComponent, asset_filters_component_1.AssetFiltersComponent, asset_filters_display_component_1.AssetFiltersDisplayComponent, asset_list_component_1.AssetListComponent, asset_group_pipe_1.AssetGroupPipe];
var AssetsModule = /*#__PURE__*/_createClass(function AssetsModule() {
  _classCallCheck(this, AssetsModule);
});
_AssetsModule = AssetsModule;
_AssetsModule.ɵfac = function AssetsModule_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _AssetsModule)();
};
_AssetsModule.ɵmod = /*@__PURE__*/i0.ɵɵdefineNgModule({
  type: _AssetsModule
});
_AssetsModule.ɵinj = /*@__PURE__*/i0.ɵɵdefineInjector({
  imports: [common_1.CommonModule, form_fields_1.FormFieldsModule, forms_1.FormsModule, forms_1.ReactiveFormsModule, components_1.ComponentsModule]
});
exports.AssetsModule = AssetsModule;
(function () {
  (typeof ngJitMode === "undefined" || ngJitMode) && i0.ɵɵsetNgModuleScope(AssetsModule, {
    declarations: [asset_select_modal_component_1.AssetSelectModalComponent, asset_list_field_component_1.AssetListFieldComponent, asset_details_component_1.AssetDetailsComponent, asset_filters_component_1.AssetFiltersComponent, asset_filters_display_component_1.AssetFiltersDisplayComponent, asset_list_component_1.AssetListComponent, asset_group_pipe_1.AssetGroupPipe],
    imports: [common_1.CommonModule, form_fields_1.FormFieldsModule, forms_1.FormsModule, forms_1.ReactiveFormsModule, components_1.ComponentsModule],
    exports: [asset_select_modal_component_1.AssetSelectModalComponent, asset_list_field_component_1.AssetListFieldComponent]
  });
})();

/***/ }),

/***/ 85616:
/*!************************************!*\
  !*** ./libs/bookings/src/index.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var tslib_1 = __webpack_require__(/*! tslib */ 24398);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/bookings.module */ 38742), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/booking-form.service */ 18379), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/booking.class */ 53857), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/booking.utilities */ 39522), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/bookings.fn */ 18026), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/bookings.module */ 38742), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/desk.service */ 74350), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/lockers.service */ 98796), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/booking-details-modal.component */ 1781), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/booking-card.component */ 27547), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/parking-select-modal/parking-select-modal.component */ 67642), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/parking.service */ 1593), exports);

/***/ }),

/***/ 27547:
/*!*********************************************************!*\
  !*** ./libs/bookings/src/lib/booking-card.component.ts ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _callSuper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/callSuper.js */ 8513)["default"]);
var _inherits = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/inherits.js */ 58160)["default"]);
var _BookingCardComponent;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.BookingCardComponent = void 0;
var core_1 = __webpack_require__(/*! @angular/core */ 37580);
var dialog_1 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var router_1 = __webpack_require__(/*! @angular/router */ 95072);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var date_fns_1 = __webpack_require__(/*! date-fns */ 25773);
var operators_1 = __webpack_require__(/*! rxjs/operators */ 97303);
var booking_class_1 = __webpack_require__(/*! ./booking.class */ 53857);
var booking_details_modal_component_1 = __webpack_require__(/*! ./booking-details-modal.component */ 1781);
var async_handler_class_1 = __webpack_require__(/*! libs/common/src/lib/async-handler.class */ 75354);
var organisation_service_1 = __webpack_require__(/*! libs/organisation/src/lib/organisation.service */ 19863);
var parking_service_1 = __webpack_require__(/*! ./parking.service */ 1593);
var group_event_details_modal_component_1 = __webpack_require__(/*! ../../../events/src/lib/group-event-details-modal.component */ 58094);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var i2 = __webpack_require__(/*! @angular/router */ 95072);
var i3 = __webpack_require__(/*! libs/organisation/src/lib/organisation.service */ 19863);
var i4 = __webpack_require__(/*! @placeos/common */ 22797);
var i5 = __webpack_require__(/*! ./parking.service */ 1593);
var i6 = __webpack_require__(/*! @angular/common */ 60316);
var i7 = __webpack_require__(/*! ../../../components/src/lib/icon.component */ 69434);
var i8 = __webpack_require__(/*! ../../../components/src/lib/status-pill.component */ 50907);
var _c0 = function _c0() {
  return ["./"];
};
var _c1 = function _c1(a0) {
  return {
    booking: a0
  };
};
function BookingCardComponent_h4_0_span_1_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "span", 6);
    i0.ɵɵtext(1);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r0 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1("", ctx_r0.day, ",\xA0");
  }
}
function BookingCardComponent_h4_0_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "h4", 3);
    i0.ɵɵtemplate(1, BookingCardComponent_h4_0_span_1_Template, 2, 1, "span", 4);
    i0.ɵɵtext(2);
    i0.ɵɵpipe(3, "date");
    i0.ɵɵelementStart(4, "span", 5);
    i0.ɵɵtext(5);
    i0.ɵɵpipe(6, "date");
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var ctx_r0 = i0.ɵɵnextContext();
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", ctx_r0.show_day);
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", i0.ɵɵpipeBind2(3, 3, ctx_r0.booking == null ? null : ctx_r0.booking.date, ctx_r0.time_format), " ");
    i0.ɵɵadvance(3);
    i0.ɵɵtextInterpolate1("(", i0.ɵɵpipeBind2(6, 6, ctx_r0.booking == null ? null : ctx_r0.booking.date, "z"), ")");
  }
}
function BookingCardComponent_a_1_app_icon_9_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "app-icon");
    i0.ɵɵtext(1);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r0 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate(ctx_r0.type);
  }
}
function BookingCardComponent_a_1_div_12_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 19)(1, "app-icon");
    i0.ɵɵtext(2, "place");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(3, "div", 20);
    i0.ɵɵtext(4);
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var ctx_r0 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance(4);
    i0.ɵɵtextInterpolate(ctx_r0.location);
  }
}
function BookingCardComponent_a_1_div_15_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 21);
    i0.ɵɵtext(1, " Associate ");
    i0.ɵɵelementEnd();
  }
}
function BookingCardComponent_a_1_div_16_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 21);
    i0.ɵɵtext(1, " Event ");
    i0.ɵɵelementEnd();
  }
}
function BookingCardComponent_a_1_div_17_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 21);
    i0.ɵɵtext(1);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r0 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", ctx_r0.booking.status !== "declined" ? "RESERVED" : "RELEASED", " ");
  }
}
function BookingCardComponent_a_1_Template(rf, ctx) {
  if (rf & 1) {
    var _r2 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "a", 7);
    i0.ɵɵlistener("click", function BookingCardComponent_a_1_Template_a_click_0_listener() {
      i0.ɵɵrestoreView(_r2);
      var ctx_r0 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r0.viewDetails());
    });
    i0.ɵɵelementStart(1, "div", 8)(2, "h4", 9);
    i0.ɵɵtext(3);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(4, "div", 10)(5, "status-pill", 11);
    i0.ɵɵtext(6);
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(7, "div", 12)(8, "div", 13);
    i0.ɵɵtemplate(9, BookingCardComponent_a_1_app_icon_9_Template, 2, 1, "app-icon", 14);
    i0.ɵɵelementStart(10, "div", 15);
    i0.ɵɵtext(11);
    i0.ɵɵelementEnd()();
    i0.ɵɵtemplate(12, BookingCardComponent_a_1_div_12_Template, 5, 1, "div", 16);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(13, "app-icon", 17);
    i0.ɵɵtext(14, " chevron_right ");
    i0.ɵɵelementEnd();
    i0.ɵɵtemplate(15, BookingCardComponent_a_1_div_15_Template, 2, 0, "div", 18)(16, BookingCardComponent_a_1_div_16_Template, 2, 0, "div", 18)(17, BookingCardComponent_a_1_div_17_Template, 2, 1, "div", 18);
    i0.ɵɵpipe(18, "async");
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var ctx_r0 = i0.ɵɵnextContext();
    var desk_icon_r3 = i0.ɵɵreference(3);
    i0.ɵɵproperty("routerLink", i0.ɵɵpureFunction0(14, _c0))("queryParams", i0.ɵɵpureFunction1(15, _c1, ctx_r0.booking == null ? null : ctx_r0.booking.id));
    i0.ɵɵadvance(3);
    i0.ɵɵtextInterpolate(ctx_r0.booking == null ? null : ctx_r0.booking.title);
    i0.ɵɵadvance(2);
    i0.ɵɵproperty("status", ctx_r0.status);
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate(ctx_r0.period);
    i0.ɵɵadvance(3);
    i0.ɵɵproperty("ngIf", ctx_r0.type !== "desk")("ngIfElse", desk_icon_r3);
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate1(" ", ctx_r0.raw_description || (ctx_r0.booking == null ? null : ctx_r0.booking.asset_name) || (ctx_r0.booking == null ? null : ctx_r0.booking.asset_id), " ");
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", ctx_r0.location);
    i0.ɵɵadvance(3);
    i0.ɵɵproperty("ngIf", !ctx_r0.for_current_user && (ctx_r0.booking == null ? null : ctx_r0.booking.booking_type) !== "group-event");
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", (ctx_r0.booking == null ? null : ctx_r0.booking.booking_type) === "group-event");
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", i0.ɵɵpipeBind1(18, 12, ctx_r0.is_reserved_parking_space));
  }
}
function BookingCardComponent_ng_template_2_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelement(0, "img", 22);
  }
}
var BookingCardComponent = /*#__PURE__*/function (_async_handler_class_) {
  function BookingCardComponent(_dialog, _route, _org, _settings, _parking) {
    var _this;
    _classCallCheck(this, BookingCardComponent);
    _this = _callSuper(this, BookingCardComponent);
    _this._dialog = _dialog;
    _this._route = _route;
    _this._org = _org;
    _this._settings = _settings;
    _this._parking = _parking;
    _this.show_day = false;
    _this.edit = new core_1.EventEmitter();
    _this.remove = new core_1.EventEmitter();
    _this.end = new core_1.EventEmitter();
    _this.raw_description = '';
    _this.is_reserved_parking_space = _this._parking.assigned_space.pipe((0, operators_1.map)(function (space) {
      return _this.booking.booking_type === 'parking' && space && _this.booking.asset_id === space.id;
    }));
    return _this;
  }
  _inherits(BookingCardComponent, _async_handler_class_);
  return _createClass(BookingCardComponent, [{
    key: "for_current_user",
    get: function get() {
      var _this$booking, _ref;
      return ((_this$booking = this.booking) === null || _this$booking === void 0 ? void 0 : _this$booking.user_email.toLowerCase()) === ((_ref = (0, common_1.currentUser)()) === null || _ref === void 0 ? void 0 : _ref.email.toLowerCase());
    }
  }, {
    key: "time_format",
    get: function get() {
      return this._settings.time_format;
    }
  }, {
    key: "status",
    get: function get() {
      var _this$booking2, _this$booking3, _this$booking4, _this$booking5, _this$booking6;
      if ((_this$booking2 = this.booking) !== null && _this$booking2 !== void 0 && _this$booking2.is_done) return 'neutral';
      if (((_this$booking3 = this.booking) === null || _this$booking3 === void 0 ? void 0 : _this$booking3.status) === 'approved') return 'success';
      if (((_this$booking4 = this.booking) === null || _this$booking4 === void 0 ? void 0 : _this$booking4.status) === 'declined') return 'error';
      if (((_this$booking5 = this.booking) === null || _this$booking5 === void 0 ? void 0 : _this$booking5.status) === 'cancelled') return 'error';
      if (((_this$booking6 = this.booking) === null || _this$booking6 === void 0 ? void 0 : _this$booking6.status) === 'tentative') return 'warning';
      return 'warning';
    }
  }, {
    key: "ngOnInit",
    value: function ngOnInit() {
      var _this2 = this;
      this.subscription('route.query', this._route.queryParamMap.subscribe(function (params) {
        var _this2$booking;
        return params.has('booking') && ((_this2$booking = _this2.booking) === null || _this2$booking === void 0 ? void 0 : _this2$booking.id) === params.get('event') ? _this2.viewDetails() : '';
      }));
    }
  }, {
    key: "ngOnChanges",
    value: function ngOnChanges(changes) {
      if (changes.booking) {
        var _this$booking7;
        this.raw_description = this.removeHtmlTags((_this$booking7 = this.booking) === null || _this$booking7 === void 0 ? void 0 : _this$booking7.description);
      }
    }
  }, {
    key: "type",
    get: function get() {
      var _this$booking8, _this$booking9;
      if (((_this$booking8 = this.booking) === null || _this$booking8 === void 0 ? void 0 : _this$booking8.type) === 'desk') return 'desk';
      if (((_this$booking9 = this.booking) === null || _this$booking9 === void 0 ? void 0 : _this$booking9.type) === 'parking') return 'drive_eta';
      return 'book';
    }
  }, {
    key: "day",
    get: function get() {
      var _this$booking10;
      var date = ((_this$booking10 = this.booking) === null || _this$booking10 === void 0 ? void 0 : _this$booking10.date) || Date.now();
      var is_today = (0, date_fns_1.isSameDay)(Date.now(), date);
      return "".concat(is_today ? 'Today' : (0, date_fns_1.format)(date, 'EEEE'));
    }
  }, {
    key: "location",
    get: function get() {
      var _this$booking11;
      var level = this._org.levelWithID(((_this$booking11 = this.booking) === null || _this$booking11 === void 0 ? void 0 : _this$booking11.zones) || []);
      return "".concat((level === null || level === void 0 ? void 0 : level.display_name) || (level === null || level === void 0 ? void 0 : level.name) || '');
    }
  }, {
    key: "period",
    get: function get() {
      var _this$booking12, _this$booking13, _this$booking14;
      if ((_this$booking12 = this.booking) !== null && _this$booking12 !== void 0 && _this$booking12.is_all_day) return 'All Day';
      var start = ((_this$booking13 = this.booking) === null || _this$booking13 === void 0 ? void 0 : _this$booking13.date) || Date.now();
      var duration = ((_this$booking14 = this.booking) === null || _this$booking14 === void 0 ? void 0 : _this$booking14.duration) || 60;
      var end = (0, date_fns_1.addMinutes)(start, duration);
      var dur = (0, date_fns_1.formatDuration)({
        hours: Math.floor(duration / 60),
        minutes: duration % 60
      }).replace(' hour', 'hr').replace(' minute', 'min');
      return "".concat((0, date_fns_1.format)(start, this.time_format), " - ").concat((0, date_fns_1.format)(end, this.time_format), " (").concat(dur, ")");
    }
  }, {
    key: "removeHtmlTags",
    value: function removeHtmlTags(html) {
      var doc = new DOMParser().parseFromString(html, 'text/html');
      return doc.body.textContent || '';
    }
  }, {
    key: "viewDetails",
    value: function viewDetails() {
      var _this3 = this;
      if (!this.booking) return;
      this.timeout('open', function () {
        var _ref$componentInstanc, _ref$componentInstanc2, _ref$componentInstanc3;
        var view_component = _this3.booking.booking_type === 'group-event' ? group_event_details_modal_component_1.GroupEventDetailsModalComponent : booking_details_modal_component_1.BookingDetailsModalComponent;
        var data = _this3.booking.booking_type === 'group-event' ? {
          booking: _this3.booking,
          concierge: false
        } : _this3.booking;
        var ref = _this3._dialog.open(view_component, {
          data: data
        });
        _this3.subscription('edit', (_ref$componentInstanc = ref.componentInstance.edit) === null || _ref$componentInstanc === void 0 ? void 0 : _ref$componentInstanc.subscribe(function () {
          return _this3.edit.emit();
        }));
        _this3.subscription('remove', (_ref$componentInstanc2 = ref.componentInstance.remove) === null || _ref$componentInstanc2 === void 0 ? void 0 : _ref$componentInstanc2.subscribe(function () {
          return _this3.remove.emit();
        }));
        _this3.subscription('end', (_ref$componentInstanc3 = ref.componentInstance.end) === null || _ref$componentInstanc3 === void 0 ? void 0 : _ref$componentInstanc3.subscribe(function () {
          return _this3.end.emit();
        }));
      });
    }
  }]);
}(async_handler_class_1.AsyncHandler);
_BookingCardComponent = BookingCardComponent;
_BookingCardComponent.ɵfac = function BookingCardComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _BookingCardComponent)(i0.ɵɵdirectiveInject(i1.MatDialog), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i3.OrganisationService), i0.ɵɵdirectiveInject(i4.SettingsService), i0.ɵɵdirectiveInject(i5.ParkingService));
};
_BookingCardComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _BookingCardComponent,
  selectors: [["booking-card"]],
  inputs: {
    booking: "booking",
    show_day: "show_day"
  },
  outputs: {
    edit: "edit",
    remove: "remove",
    end: "end"
  },
  features: [i0.ɵɵInheritDefinitionFeature, i0.ɵɵNgOnChangesFeature],
  decls: 4,
  vars: 2,
  consts: [["desk_icon", ""], ["class", "mb-2 flex items-center", 4, "ngIf"], ["name", "view-booking-details", "class", "w-full cursor-pointer overflow-hidden relative", 3, "routerLink", "queryParams", "click", 4, "ngIf"], [1, "mb-2", "flex", "items-center"], ["day", "", 4, "ngIf"], [1, "text-xs", "px-2"], ["day", ""], ["name", "view-booking-details", 1, "w-full", "cursor-pointer", "overflow-hidden", "relative", 3, "click", "routerLink", "queryParams"], [1, "w-full", "bg-base-100", "border", "border-base-300", "rounded-xl", "shadow", "py-4", "relative"], [1, "px-4", "text-lg"], [1, "flex", "mx-4", "my-2"], [3, "status"], [1, "flex", "flex-wrap", "flex-col", "sm:flex-row", "sm:divide-x", "divide-base-200-500", "py-2", "space-y-2", "sm:space-y-0"], [1, "flex", "items-center", "px-4", "max-w-[33%]"], [4, "ngIf", "ngIfElse"], [1, "mx-2", "truncate", "flex-1", "w-1/2"], ["class", "flex items-center px-4", 4, "ngIf"], [1, "absolute", "top-1/2", "right-1", "text-4xl", "-translate-y-1/2"], ["class", "absolute top-2 right-2 bg-warning/50 rounded-xl px-2 py-1 text-xs", 4, "ngIf"], [1, "flex", "items-center", "px-4"], [1, "mx-2", "truncate"], [1, "absolute", "top-2", "right-2", "bg-warning/50", "rounded-xl", "px-2", "py-1", "text-xs"], ["src", "assets/icons/desk-outline.svg", 1, "w-5", "h-5"]],
  template: function BookingCardComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵtemplate(0, BookingCardComponent_h4_0_Template, 7, 9, "h4", 1)(1, BookingCardComponent_a_1_Template, 19, 17, "a", 2)(2, BookingCardComponent_ng_template_2_Template, 1, 0, "ng-template", null, 0, i0.ɵɵtemplateRefExtractor);
    }
    if (rf & 2) {
      i0.ɵɵproperty("ngIf", ctx.booking);
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", ctx.booking);
    }
  },
  dependencies: [i6.NgIf, i7.IconComponent, i8.StatusPillComponent, i6.AsyncPipe, i6.DatePipe],
  styles: ["[_nghost-%COMP%] {\n                display: block;\n                width: 100%;\n                position: relative;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJvb2tpbmctY2FyZC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLGNBQWM7Z0JBQ2QsV0FBVztnQkFDWCxrQkFBa0I7WUFDdEIiLCJmaWxlIjoiYm9va2luZy1jYXJkLmNvbXBvbmVudC50cyIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgOmhvc3Qge1xuICAgICAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl19 */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvYm9va2luZ3Mvc3JjL2xpYi9ib29raW5nLWNhcmQuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxjQUFjO2dCQUNkLFdBQVc7Z0JBQ1gsa0JBQWtCO1lBQ3RCOztBQUVaLHdlQUF3ZSIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgOmhvc3Qge1xuICAgICAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl0sInNvdXJjZVJvb3QiOiIifQ== */"]
});
exports.BookingCardComponent = BookingCardComponent;

/***/ }),

/***/ 1781:
/*!******************************************************************!*\
  !*** ./libs/bookings/src/lib/booking-details-modal.component.ts ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _taggedTemplateLiteral = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js */ 9959)["default"]);
var _regeneratorRuntime = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/regeneratorRuntime.js */ 8698)["default"]);
var _asyncToGenerator = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/asyncToGenerator.js */ 95386)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _BookingDetailsModalComponent, _templateObject, _templateObject2, _templateObject3, _templateObject4, _templateObject5, _templateObject6, _templateObject7;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.BookingDetailsModalComponent = void 0;
var core_1 = __webpack_require__(/*! @angular/core */ 37580);
var dialog_1 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var date_fns_1 = __webpack_require__(/*! date-fns */ 25773);
var map_locate_modal_component_1 = __webpack_require__(/*! libs/components/src/lib/map-locate-modal.component */ 90620);
var map_pin_component_1 = __webpack_require__(/*! libs/components/src/lib/map-pin.component */ 71865);
var organisation_service_1 = __webpack_require__(/*! libs/organisation/src/lib/organisation.service */ 19863);
var booking_class_1 = __webpack_require__(/*! ./booking.class */ 53857);
var bookings_fn_1 = __webpack_require__(/*! ./bookings.fn */ 18026);
var desk_settings_modal_component_1 = __webpack_require__(/*! ./desk-settings-modal.component */ 77904);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @placeos/common */ 22797);
var i2 = __webpack_require__(/*! libs/organisation/src/lib/organisation.service */ 19863);
var i3 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var i4 = __webpack_require__(/*! @angular/common */ 60316);
var i5 = __webpack_require__(/*! @angular/material/progress-spinner */ 41134);
var i6 = __webpack_require__(/*! ../../../components/src/lib/icon.component */ 69434);
var i7 = __webpack_require__(/*! ../../../components/src/lib/interactive-map.component */ 24918);
var i8 = __webpack_require__(/*! ../../../components/src/lib/image-carousel.component */ 65277);
var i9 = __webpack_require__(/*! ../../../components/src/lib/status-pill.component */ 50907);
var i10 = __webpack_require__(/*! @angular/material/menu */ 31034);
var i11 = __webpack_require__(/*! @angular/material/core */ 74646);
var i12 = __webpack_require__(/*! @angular/material/tooltip */ 80640);
var i13 = __webpack_require__(/*! ./booking.class */ 53857);
var _c0 = function _c0() {
  return {
    disable_pan: true,
    disable_zoom: true
  };
};
function BookingDetailsModalComponent_div_2_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelement(0, "div", 28);
  }
}
function BookingDetailsModalComponent_div_3_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 29);
    i0.ɵɵelement(1, "image-carousel", 30);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance();
    i0.ɵɵproperty("images", ctx_r1.booking == null ? null : ctx_r1.booking.extension_data == null ? null : ctx_r1.booking.extension_data.images);
  }
}
function BookingDetailsModalComponent_div_10_button_1_div_1_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 36)(1, "app-icon");
    i0.ɵɵtext(2);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(3, "div", 37);
    i0.ɵɵtext(4);
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext(3);
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate(ctx_r1.booking.checked_in ? "done" : "arrow_back");
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate1(" ", ctx_r1.booking.checked_in ? "Checked in" : "Check in", " ");
  }
}
function BookingDetailsModalComponent_div_10_button_1_ng_template_2_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelement(0, "mat-spinner", 38);
  }
  if (rf & 2) {
    i0.ɵɵproperty("diameter", 32);
  }
}
function BookingDetailsModalComponent_div_10_button_1_Template(rf, ctx) {
  if (rf & 1) {
    var _r3 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "button", 34);
    i0.ɵɵlistener("click", function BookingDetailsModalComponent_div_10_button_1_Template_button_click_0_listener() {
      i0.ɵɵrestoreView(_r3);
      var ctx_r1 = i0.ɵɵnextContext(2);
      return i0.ɵɵresetView(ctx_r1.toggleCheckedIn());
    });
    i0.ɵɵtemplate(1, BookingDetailsModalComponent_div_10_button_1_div_1_Template, 5, 2, "div", 35)(2, BookingDetailsModalComponent_div_10_button_1_ng_template_2_Template, 1, 1, "ng-template", null, 1, i0.ɵɵtemplateRefExtractor);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var loading_state_r4 = i0.ɵɵreference(3);
    var ctx_r1 = i0.ɵɵnextContext(2);
    i0.ɵɵclassProp("bg-success", ctx_r1.booking.checked_in)("text-success-content", ctx_r1.booking.checked_in);
    i0.ɵɵproperty("disabled", ctx_r1.checking_in);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", !ctx_r1.checking_in)("ngIfElse", loading_state_r4);
  }
}
function BookingDetailsModalComponent_div_10_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 31);
    i0.ɵɵtemplate(1, BookingDetailsModalComponent_div_10_button_1_Template, 4, 7, "button", 32);
    i0.ɵɵelementStart(2, "button", 33)(3, "app-icon");
    i0.ɵɵtext(4, "more_horiz");
    i0.ɵɵelementEnd()()();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    var menu_r5 = i0.ɵɵreference(43);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", !ctx_r1.booking.checked_out_at && !ctx_r1.checked_out && !ctx_r1.auto_checkin && (ctx_r1.booking.state === "upcoming" || ctx_r1.booking.state === "in_progress") && ctx_r1.booking.status !== "declined");
    i0.ɵɵadvance();
    i0.ɵɵproperty("matMenuTriggerFor", menu_r5);
  }
}
function BookingDetailsModalComponent_ng_container_36_div_5_div_13_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 52)(1, "div", 53)(2, "span", 46);
    i0.ɵɵtext(3);
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(4, "div", 54);
    i0.ɵɵtext(5);
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var item_r8 = ctx.$implicit;
    i0.ɵɵadvance(3);
    i0.ɵɵtextInterpolate(item_r8.name || "Item");
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate1(" x", item_r8.quantity, " ");
  }
}
function BookingDetailsModalComponent_ng_container_36_div_5_Template(rf, ctx) {
  if (rf & 1) {
    var _r6 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 43)(1, "button", 44);
    i0.ɵɵlistener("click", function BookingDetailsModalComponent_ng_container_36_div_5_Template_button_click_1_listener() {
      var request_r7 = i0.ɵɵrestoreView(_r6).$implicit;
      var ctx_r1 = i0.ɵɵnextContext(2);
      return i0.ɵɵresetView(ctx_r1.show_request[request_r7.id] = !ctx_r1.show_request[request_r7.id]);
    });
    i0.ɵɵelementStart(2, "div", 45)(3, "div", 46);
    i0.ɵɵtext(4);
    i0.ɵɵpipe(5, "date");
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(6, "div", 47)(7, "app-icon");
    i0.ɵɵtext(8);
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(9, "div", 48)(10, "app-icon", 49);
    i0.ɵɵtext(11);
    i0.ɵɵelementEnd()()();
    i0.ɵɵelementStart(12, "div", 50);
    i0.ɵɵtemplate(13, BookingDetailsModalComponent_ng_container_36_div_5_div_13_Template, 6, 2, "div", 51);
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var request_r7 = ctx.$implicit;
    var ctx_r1 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance(4);
    i0.ɵɵtextInterpolate1(" Requested for ", i0.ɵɵpipeBind2(5, 18, request_r7.deliver_at, "MMM d, " + ctx_r1.time_format), " ");
    i0.ɵɵadvance(2);
    i0.ɵɵclassProp("bg-success", request_r7.state === "approved")("text-success-content", request_r7.state === "approved")("bg-warning", request_r7.state !== "approved" && request_r7.state !== "rejected")("text-warning-content", request_r7.state !== "approved" && request_r7.state !== "rejected")("bg-error", request_r7.state === "rejected")("text-error-content", request_r7.state === "rejected");
    i0.ɵɵproperty("matTooltip", request_r7.state || "Tentative");
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate1(" ", request_r7.state === "approved" ? "done" : request_r7.state === "rejected" ? "close" : "schedule", " ");
    i0.ɵɵadvance(3);
    i0.ɵɵtextInterpolate1(" ", ctx_r1.show_request[request_r7.id] ? "expand_less" : "expand_more", " ");
    i0.ɵɵadvance();
    i0.ɵɵproperty("@show", ctx_r1.show_request[request_r7.id] ? "show" : "hide");
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngForOf", request_r7.items);
  }
}
function BookingDetailsModalComponent_ng_container_36_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵelementStart(1, "div", 39)(2, "h3", 40);
    i0.ɵɵi18n(3, 3);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(4, "div", 41);
    i0.ɵɵtemplate(5, BookingDetailsModalComponent_ng_container_36_div_5_Template, 14, 21, "div", 42);
    i0.ɵɵelementEnd()();
    i0.ɵɵelementContainerEnd();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance(3);
    i0.ɵɵi18nExp((ctx_r1.booking.valid_assets == null ? null : ctx_r1.booking.valid_assets.length) || 0);
    i0.ɵɵi18nApply(3);
    i0.ɵɵadvance(2);
    i0.ɵɵproperty("ngForOf", ctx_r1.booking.valid_assets);
  }
}
function BookingDetailsModalComponent_ng_container_38_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵelement(1, "interactive-map", 55);
    i0.ɵɵelementContainerEnd();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance();
    i0.ɵɵproperty("src", ctx_r1.level == null ? null : ctx_r1.level.map_id)("features", ctx_r1.features)("options", i0.ɵɵpureFunction0(3, _c0));
  }
}
function BookingDetailsModalComponent_button_44_Template(rf, ctx) {
  if (rf & 1) {
    var _r9 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "button", 56);
    i0.ɵɵlistener("click", function BookingDetailsModalComponent_button_44_Template_button_click_0_listener() {
      i0.ɵɵrestoreView(_r9);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.edit.emit());
    });
    i0.ɵɵelementStart(1, "div", 57)(2, "app-icon");
    i0.ɵɵtext(3, "edit");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(4, "div");
    i0.ɵɵi18n(5, 4);
    i0.ɵɵelementEnd()()();
  }
}
function BookingDetailsModalComponent_button_45_Template(rf, ctx) {
  if (rf & 1) {
    var _r10 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "button", 58);
    i0.ɵɵlistener("click", function BookingDetailsModalComponent_button_45_Template_button_click_0_listener() {
      i0.ɵɵrestoreView(_r10);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.setDeskHeight());
    });
    i0.ɵɵelementStart(1, "div", 57)(2, "app-icon", 59);
    i0.ɵɵtext(3, " height ");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(4, "div");
    i0.ɵɵi18n(5, 5);
    i0.ɵɵelementEnd()()();
  }
}
function BookingDetailsModalComponent_button_46_Template(rf, ctx) {
  if (rf & 1) {
    var _r11 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "button", 58);
    i0.ɵɵlistener("click", function BookingDetailsModalComponent_button_46_Template_button_click_0_listener() {
      i0.ɵɵrestoreView(_r11);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.remove.emit());
    });
    i0.ɵɵelementStart(1, "div", 57)(2, "app-icon", 60);
    i0.ɵɵtext(3, "delete");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(4, "div");
    i0.ɵɵi18n(5, 6);
    i0.ɵɵelementEnd()()();
  }
}
function BookingDetailsModalComponent_button_47_Template(rf, ctx) {
  if (rf & 1) {
    var _r12 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "button", 58);
    i0.ɵɵlistener("click", function BookingDetailsModalComponent_button_47_Template_button_click_0_listener() {
      i0.ɵɵrestoreView(_r12);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.remove.emit(true));
    });
    i0.ɵɵelementStart(1, "div", 57)(2, "app-icon", 60);
    i0.ɵɵtext(3, "delete");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(4, "div");
    i0.ɵɵi18n(5, 7);
    i0.ɵɵelementEnd()()();
  }
}
function BookingDetailsModalComponent_button_48_Template(rf, ctx) {
  if (rf & 1) {
    var _r13 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "button", 58);
    i0.ɵɵlistener("click", function BookingDetailsModalComponent_button_48_Template_button_click_0_listener() {
      i0.ɵɵrestoreView(_r13);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.end.emit());
    });
    i0.ɵɵelementStart(1, "div", 57)(2, "app-icon", 60);
    i0.ɵɵtext(3, "delete");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(4, "div");
    i0.ɵɵi18n(5, 8);
    i0.ɵɵelementEnd()()();
  }
}
var BookingDetailsModalComponent = /*#__PURE__*/function () {
  function BookingDetailsModalComponent(_booking, _settings, _org, _dialog) {
    var _this$booking, _this$booking2, _this$booking3, _this$booking4;
    _classCallCheck(this, BookingDetailsModalComponent);
    this._booking = _booking;
    this._settings = _settings;
    this._org = _org;
    this._dialog = _dialog;
    this.edit = new core_1.EventEmitter();
    this.remove = new core_1.EventEmitter();
    this.end = new core_1.EventEmitter();
    this.booking = this._booking;
    this.hide_map = false;
    this.show_request = {};
    this.checked_out = false;
    this.checking_in = false;
    this.features = [{
      location: ((_this$booking = this.booking) === null || _this$booking === void 0 || (_this$booking = _this$booking.extension_data) === null || _this$booking === void 0 ? void 0 : _this$booking.map_id) || ((_this$booking2 = this.booking) === null || _this$booking2 === void 0 ? void 0 : _this$booking2.asset_id),
      content: map_pin_component_1.MapPinComponent
    }];
    this.has_assets = !!((_this$booking3 = this.booking) !== null && _this$booking3 !== void 0 && _this$booking3.valid_assets.length);
    console.log('Valid assets:', (_this$booking4 = this.booking) === null || _this$booking4 === void 0 ? void 0 : _this$booking4.valid_assets);
  }
  return _createClass(BookingDetailsModalComponent, [{
    key: "level",
    get: function get() {
      var _this$booking5;
      return this._org.levelWithID(((_this$booking5 = this.booking) === null || _this$booking5 === void 0 ? void 0 : _this$booking5.zones) || []);
    }
  }, {
    key: "building",
    get: function get() {
      var _this = this;
      var building = this._org.buildings.find(function (bld) {
        var _this$booking6;
        return (((_this$booking6 = _this.booking) === null || _this$booking6 === void 0 ? void 0 : _this$booking6.zones) || []).includes(bld.id);
      });
      if (this._settings.get('app.use_region')) {
        var region = this._org.regions.find(function (region) {
          var _this$booking7;
          return (((_this$booking7 = _this.booking) === null || _this$booking7 === void 0 ? void 0 : _this$booking7.zones) || []).includes(region.id) || region.id === (building === null || building === void 0 ? void 0 : building.parent_id);
        });
        if (region) return region;
      }
      return building;
    }
  }, {
    key: "can_edit",
    get: function get() {
      return this.booking.booking_type !== 'visitor' && this.booking.booking_type !== 'parking';
    }
  }, {
    key: "auto_checkin",
    get: function get() {
      var _this$booking8;
      return this._settings.get("app.".concat(((_this$booking8 = this.booking) === null || _this$booking8 === void 0 ? void 0 : _this$booking8.type) || 'bookings', ".auto_checkin"));
    }
  }, {
    key: "is_checked_in",
    get: function get() {
      return this.booking.checked_in;
    }
  }, {
    key: "desk_height_enabled",
    get: function get() {
      var _this$booking9;
      return ((_this$booking9 = this.booking) === null || _this$booking9 === void 0 ? void 0 : _this$booking9.type) === 'desk' && this._settings.get('app.desks.height_enabled');
    }
  }, {
    key: "is_in_progress",
    get: function get() {
      var _this$booking10, _this$booking11, _this$booking12;
      var ts = Date.now();
      var start = ((_this$booking10 = this.booking) === null || _this$booking10 === void 0 ? void 0 : _this$booking10.booking_start) * 1000;
      var end = ((_this$booking11 = this.booking) === null || _this$booking11 === void 0 ? void 0 : _this$booking11.booking_end) * 1000;
      if ((_this$booking12 = this.booking) !== null && _this$booking12 !== void 0 && _this$booking12.all_day) return start <= ts;
      return start <= ts && ts <= end;
    }
  }, {
    key: "time_format",
    get: function get() {
      return this._settings.time_format;
    }
  }, {
    key: "booking_status",
    get: function get() {
      var _this$booking13, _this$booking14, _this$booking15, _this$booking16;
      if ((_this$booking13 = this.booking) !== null && _this$booking13 !== void 0 && _this$booking13.is_done) return 'neutral';
      if (((_this$booking14 = this.booking) === null || _this$booking14 === void 0 ? void 0 : _this$booking14.status) === 'approved') return 'success';
      if (((_this$booking15 = this.booking) === null || _this$booking15 === void 0 ? void 0 : _this$booking15.status) === 'declined') return 'error';
      if (((_this$booking16 = this.booking) === null || _this$booking16 === void 0 ? void 0 : _this$booking16.status) === 'tentative') return 'warning';
      return 'warning';
    }
  }, {
    key: "period",
    get: function get() {
      var _this$booking17, _this$booking18, _this$booking19;
      if ((_this$booking17 = this.booking) !== null && _this$booking17 !== void 0 && _this$booking17.is_all_day) return 'All Day';
      var start = ((_this$booking18 = this.booking) === null || _this$booking18 === void 0 ? void 0 : _this$booking18.date) || Date.now();
      var duration = ((_this$booking19 = this.booking) === null || _this$booking19 === void 0 ? void 0 : _this$booking19.duration) || 60;
      var end = (0, date_fns_1.addMinutes)(start, duration);
      var dur = (0, date_fns_1.formatDuration)({
        hours: Math.floor(duration / 60),
        minutes: duration % 60
      }).replace(' hour', 'hr').replace(' minute', 'min');
      return "".concat((0, date_fns_1.format)(start, this.time_format), " - ").concat((0, date_fns_1.format)(end, this.time_format), " (").concat(dur, ")");
    }
  }, {
    key: "toggleCheckedIn",
    value: function () {
      var _toggleCheckedIn = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
        var _this2 = this;
        var bkn, promise;
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              this.checking_in = true;
              bkn = this.booking;
              promise = (bkn.instance ? (0, bookings_fn_1.checkinBookingInstance)(bkn.id, bkn.instance, !this.booking.checked_in) : (0, bookings_fn_1.checkinBooking)(this.booking.id, !this.booking.checked_in)).toPromise()["catch"](function (_) {
                (0, common_1.notifyError)('Error checking in booking');
                _this2.checking_in = false;
                throw _;
              });
              _context.next = 5;
              return promise;
            case 5:
              this.booking.checked_in = !this.booking.checked_in;
              this.checked_out = !this.booking.checked_in;
              (0, common_1.notifySuccess)("Successfully ".concat(this.booking.checked_in ? 'checked in' : 'ended booking'));
              this.checking_in = false;
            case 9:
            case "end":
              return _context.stop();
          }
        }, _callee, this);
      }));
      function toggleCheckedIn() {
        return _toggleCheckedIn.apply(this, arguments);
      }
      return toggleCheckedIn;
    }()
  }, {
    key: "status",
    value: function status(id) {
      var booking = this.booking.linked_bookings.find(function (_) {
        return _.asset_id === id;
      });
      if (booking.status) return booking.status;
      return booking ? booking.approved ? 'approved' : booking.rejected ? 'rejected' : 'pending' : 'pending';
    }
  }, {
    key: "viewLocation",
    value: function viewLocation() {
      var _this3 = this;
      this.hide_map = true;
      var ref = this._dialog.open(map_locate_modal_component_1.MapLocateModalComponent, {
        maxWidth: '95vw',
        maxHeight: '95vh',
        data: {
          item: {
            id: this._booking.asset_id,
            name: this._booking.asset_name,
            map_id: this._booking.extension_data.map_id || this.booking.asset_id,
            level: this.level
          }
        }
      });
      ref.afterClosed().subscribe(function () {
        return _this3.hide_map = false;
      });
    }
  }, {
    key: "setDeskHeight",
    value: function setDeskHeight() {
      this._dialog.open(desk_settings_modal_component_1.DeskSettingsModalComponent, {
        data: {
          id: this.booking.asset_ids[0] || this.booking.asset_id
        }
      });
    }
  }]);
}();
_BookingDetailsModalComponent = BookingDetailsModalComponent;
_BookingDetailsModalComponent.ɵfac = function BookingDetailsModalComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _BookingDetailsModalComponent)(i0.ɵɵdirectiveInject(dialog_1.MAT_DIALOG_DATA), i0.ɵɵdirectiveInject(i1.SettingsService), i0.ɵɵdirectiveInject(i2.OrganisationService), i0.ɵɵdirectiveInject(i3.MatDialog));
};
_BookingDetailsModalComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _BookingDetailsModalComponent,
  selectors: [["booking-details-modal"]],
  outputs: {
    edit: "edit",
    remove: "remove",
    end: "end"
  },
  decls: 49,
  vars: 24,
  consts: function consts() {
    var i18n_0;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_2102851380219026584$$LIBS_BOOKINGS_SRC_LIB_BOOKING_DETAILS_MODAL_COMPONENT_TS_0 = goog.getMsg(" Details ");
      i18n_0 = MSG_EXTERNAL_2102851380219026584$$LIBS_BOOKINGS_SRC_LIB_BOOKING_DETAILS_MODAL_COMPONENT_TS_0;
    } else {
      i18n_0 = $localize(_templateObject || (_templateObject = _taggedTemplateLiteral([":\u241F2c8ce65c566300dc9063f69c615fda2e3a6b896a\u241F2102851380219026584: Details "])));
    }
    var i18n_1;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_31749697777503671$$LIBS_BOOKINGS_SRC_LIB_BOOKING_DETAILS_MODAL_COMPONENT_TS_1 = goog.getMsg(" Assets ({$interpolation}) ", {
        "interpolation": "\uFFFD0\uFFFD"
      }, {
        original_code: {
          "interpolation": "{{ booking.valid_assets?.length || 0 }}"
        }
      });
      i18n_1 = MSG_EXTERNAL_31749697777503671$$LIBS_BOOKINGS_SRC_LIB_BOOKING_DETAILS_MODAL_COMPONENT_TS_1;
    } else {
      i18n_1 = $localize(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([":\u241F9e3da900d415898c8ff7b522c5eecccfe4de018e\u241F31749697777503671: Assets (", ":INTERPOLATION:) "])), "\uFFFD0\uFFFD");
    }
    var i18n_2;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_1612171114840935381$$LIBS_BOOKINGS_SRC_LIB_BOOKING_DETAILS_MODAL_COMPONENT_TS_2 = goog.getMsg("Edit booking");
      i18n_2 = MSG_EXTERNAL_1612171114840935381$$LIBS_BOOKINGS_SRC_LIB_BOOKING_DETAILS_MODAL_COMPONENT_TS_2;
    } else {
      i18n_2 = $localize(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([":\u241F53f264e5fad94a425174c18cf299eeac7482f258\u241F1612171114840935381:Edit booking"])));
    }
    var i18n_3;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_7190557592686051728$$LIBS_BOOKINGS_SRC_LIB_BOOKING_DETAILS_MODAL_COMPONENT_TS_3 = goog.getMsg("Set Desk Height");
      i18n_3 = MSG_EXTERNAL_7190557592686051728$$LIBS_BOOKINGS_SRC_LIB_BOOKING_DETAILS_MODAL_COMPONENT_TS_3;
    } else {
      i18n_3 = $localize(_templateObject4 || (_templateObject4 = _taggedTemplateLiteral([":\u241F35729dbbde462f39a391c9abc24a3f79eebfba7a\u241F7190557592686051728:Set Desk Height"])));
    }
    var i18n_4;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_1139994899162365077$$LIBS_BOOKINGS_SRC_LIB_BOOKING_DETAILS_MODAL_COMPONENT_TS_4 = goog.getMsg("Delete booking");
      i18n_4 = MSG_EXTERNAL_1139994899162365077$$LIBS_BOOKINGS_SRC_LIB_BOOKING_DETAILS_MODAL_COMPONENT_TS_4;
    } else {
      i18n_4 = $localize(_templateObject5 || (_templateObject5 = _taggedTemplateLiteral([":\u241F55883ef2b67c24d30f999a5ade421493fdc9e14a\u241F1139994899162365077:Delete booking"])));
    }
    var i18n_5;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_3974228098480354844$$LIBS_BOOKINGS_SRC_LIB_BOOKING_DETAILS_MODAL_COMPONENT_TS_5 = goog.getMsg("Delete Series");
      i18n_5 = MSG_EXTERNAL_3974228098480354844$$LIBS_BOOKINGS_SRC_LIB_BOOKING_DETAILS_MODAL_COMPONENT_TS_5;
    } else {
      i18n_5 = $localize(_templateObject6 || (_templateObject6 = _taggedTemplateLiteral([":\u241Fecb2e91e2775870da0ea8e51b4951994493672fb\u241F3974228098480354844:Delete Series"])));
    }
    var i18n_6;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_834898868131691573$$LIBS_BOOKINGS_SRC_LIB_BOOKING_DETAILS_MODAL_COMPONENT_TS_6 = goog.getMsg("End booking");
      i18n_6 = MSG_EXTERNAL_834898868131691573$$LIBS_BOOKINGS_SRC_LIB_BOOKING_DETAILS_MODAL_COMPONENT_TS_6;
    } else {
      i18n_6 = $localize(_templateObject7 || (_templateObject7 = _taggedTemplateLiteral([":\u241F2f3dfd27ad1999e91bb66ad271f967d6e543956f\u241F834898868131691573:End booking"])));
    }
    return [["menu", "matMenu"], ["loading_state", ""], i18n_0, i18n_1, i18n_2, i18n_3, i18n_4, i18n_5, i18n_6, [1, "w-[100vw]", "h-[100vh]", "sm:relative", "sm:inset-auto", "sm:w-[51rem]", "sm:h-auto", "sm:max-h-[80vh]", "bg-base-100", "sm:bg-base-200", "sm:rounded", "overflow-auto", "space-y-2", "pb-2"], [1, "sm:flex", "flex-col", "items-center", "pb-4", "max-h-screen", "sm:max-h-[80vh]", "sm:px-16", "sm:border-b", "bg-base-100", "border-base-200"], ["class", "h-8 w-full sm:hidden block", 4, "ngIf"], ["class", "bg-neutral w-full h-64 sm:rounded-b overflow-hidden", 4, "ngIf"], ["title", "", 1, "px-3", "mt-2", "text-xl", "font-medium", "w-full"], [1, "sm:flex", "items-center", "justify-between", "w-full"], [1, "flex", "m-2"], [3, "status"], ["actions", "", "class", "flex items-center space-x-2 px-2", 4, "ngIf"], [1, "sm:flex", "flex-wrap", "sm:px-12"], [1, "sm:p-4", "sm:bg-base-100", "rounded", "sm:m-2", "sm:border", "border-base-200", "flex-grow-[4]", "min-w-1/3", "sm:w-[16rem]"], [1, "px-3", "mt-2", "text-lg", "font-medium", "mb-2"], [1, "flex", "items-center", "px-2", "space-x-2"], [4, "ngIf"], ["map", "", 1, "mt-4", "sm:my-2", "h-64", "sm:h-48", "relative", "border", "border-base-200", "overflow-hidden", "rounded", "sm:bg-base-100", "m-2", "flex-grow-[3]", "min-w-1/3", "w-[calc(100%-1rem)]", "p-2", "sm:w-[16rem]", 3, "click"], ["icon", "", "matRipple", "", "mat-dialog-close", "", 1, "absolute", "top-0", "left-2", "bg-neutral", "text-white"], ["xPosition", "before"], ["mat-menu-item", "", "mat-dialog-close", "", 3, "click", 4, "ngIf"], ["mat-menu-item", "", 3, "click", 4, "ngIf"], [1, "h-8", "w-full", "sm:hidden", "block"], [1, "bg-neutral", "w-full", "h-64", "sm:rounded-b", "overflow-hidden"], [1, "w-full", "h-64", 3, "images"], ["actions", "", 1, "flex", "items-center", "space-x-2", "px-2"], ["btn", "", "matRipple", "", "class", "flex-1 h-10 border-none", 3, "bg-success", "text-success-content", "disabled", "click", 4, "ngIf"], ["icon", "", "matRipple", "", 1, "bg-secondary", "rounded", "text-white", "h-12", "w-12", 3, "matMenuTriggerFor"], ["btn", "", "matRipple", "", 1, "flex-1", "h-10", "border-none", 3, "click", "disabled"], ["class", "flex items-center space-x-2 justify-center", 4, "ngIf", "ngIfElse"], [1, "flex", "items-center", "space-x-2", "justify-center"], [1, "mr-4"], [1, "mx-auto", 3, "diameter"], [1, "mt-4", "sm:p-4", "sm:bg-base-100", "rounded", "sm:m-2", "sm:border", "border-base-200", "flex-grow-[3]", "min-w-1/3", "sm:w-[16rem]"], [1, "mx-3", "py-2", "text-lg", "font-medium"], [1, "flex", "flex-col", "space-y-2"], ["request", "", "class", "border border-base-300 bg-base-100 rounded-xl overflow-hidden", 4, "ngFor", "ngForOf"], ["request", "", 1, "border", "border-base-300", "bg-base-100", "rounded-xl", "overflow-hidden"], ["matRipple", "", 1, "flex", "items-center", "space-x-2", "p-3", "w-full", 3, "click"], [1, "flex-1", "text-left"], [1, "text-sm"], [1, "flex", "items-center", "justify-center", "rounded-full", "w-8", "h-8", 3, "matTooltip"], [1, "flex", "items-center", "justify-center", "rounded-full", "w-8", "h-8"], [1, "text-2xl"], [1, "flex", "flex-col", "bg-base-200", "divide-y", "divide-base-100"], ["class", "flex items-center px-3 py-1 space-x-2 hover:opacity-90", 4, "ngFor", "ngForOf"], [1, "flex", "items-center", "px-3", "py-1", "space-x-2", "hover:opacity-90"], [1, "flex", "items-center", "flex-1"], [1, "rounded", "bg-success", "text-success-content", "text-xs", "px-2", "py-1"], [1, "pointer-events-none", 3, "src", "features", "options"], ["mat-menu-item", "", "mat-dialog-close", "", 3, "click"], [1, "flex", "items-center", "space-x-2", "text-base"], ["mat-menu-item", "", 3, "click"], ["className", "material-symbols-rounded"], [1, "text-error"]];
  },
  template: function BookingDetailsModalComponent_Template(rf, ctx) {
    if (rf & 1) {
      var _r1 = i0.ɵɵgetCurrentView();
      i0.ɵɵelementStart(0, "div", 9)(1, "div", 10);
      i0.ɵɵtemplate(2, BookingDetailsModalComponent_div_2_Template, 1, 0, "div", 11)(3, BookingDetailsModalComponent_div_3_Template, 2, 1, "div", 12);
      i0.ɵɵelementStart(4, "h3", 13);
      i0.ɵɵtext(5);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(6, "div", 14)(7, "div", 15)(8, "status-pill", 16);
      i0.ɵɵtext(9);
      i0.ɵɵelementEnd()();
      i0.ɵɵtemplate(10, BookingDetailsModalComponent_div_10_Template, 5, 2, "div", 17);
      i0.ɵɵelementEnd()();
      i0.ɵɵelementStart(11, "div", 18)(12, "div", 19)(13, "h3", 20);
      i0.ɵɵi18n(14, 2);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(15, "div", 21)(16, "app-icon");
      i0.ɵɵtext(17, "event");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(18, "div");
      i0.ɵɵtext(19);
      i0.ɵɵpipe(20, "date");
      i0.ɵɵelementEnd()();
      i0.ɵɵelementStart(21, "div", 21)(22, "app-icon");
      i0.ɵɵtext(23, "schedule");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(24, "div");
      i0.ɵɵtext(25);
      i0.ɵɵelementEnd()();
      i0.ɵɵelementStart(26, "div", 21)(27, "app-icon");
      i0.ɵɵtext(28, "map");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(29, "div");
      i0.ɵɵtext(30);
      i0.ɵɵelementEnd()();
      i0.ɵɵelementStart(31, "div", 21)(32, "app-icon");
      i0.ɵɵtext(33, "place");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(34, "div");
      i0.ɵɵtext(35);
      i0.ɵɵelementEnd()()();
      i0.ɵɵtemplate(36, BookingDetailsModalComponent_ng_container_36_Template, 6, 2, "ng-container", 22);
      i0.ɵɵelementStart(37, "button", 23);
      i0.ɵɵlistener("click", function BookingDetailsModalComponent_Template_button_click_37_listener() {
        i0.ɵɵrestoreView(_r1);
        return i0.ɵɵresetView(ctx.viewLocation());
      });
      i0.ɵɵtemplate(38, BookingDetailsModalComponent_ng_container_38_Template, 2, 4, "ng-container", 22);
      i0.ɵɵelementEnd()();
      i0.ɵɵelementStart(39, "button", 24)(40, "app-icon");
      i0.ɵɵtext(41, "close");
      i0.ɵɵelementEnd()()();
      i0.ɵɵelementStart(42, "mat-menu", 25, 0);
      i0.ɵɵtemplate(44, BookingDetailsModalComponent_button_44_Template, 6, 0, "button", 26)(45, BookingDetailsModalComponent_button_45_Template, 6, 0, "button", 27)(46, BookingDetailsModalComponent_button_46_Template, 6, 0, "button", 27)(47, BookingDetailsModalComponent_button_47_Template, 6, 0, "button", 27)(48, BookingDetailsModalComponent_button_48_Template, 6, 0, "button", 27);
      i0.ɵɵelementEnd();
    }
    if (rf & 2) {
      i0.ɵɵadvance(2);
      i0.ɵɵproperty("ngIf", !(ctx.booking == null ? null : ctx.booking.extension_data == null ? null : ctx.booking.extension_data.images == null ? null : ctx.booking.extension_data.images.length));
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", ctx.booking == null ? null : ctx.booking.extension_data == null ? null : ctx.booking.extension_data.images == null ? null : ctx.booking.extension_data.images.length);
      i0.ɵɵadvance();
      i0.ɵɵclassProp("pt-4", !(ctx.booking == null ? null : ctx.booking.extension_data == null ? null : ctx.booking.extension_data.images));
      i0.ɵɵadvance();
      i0.ɵɵtextInterpolate1(" ", ctx.booking.title, " ");
      i0.ɵɵadvance(3);
      i0.ɵɵproperty("status", ctx.booking_status);
      i0.ɵɵadvance();
      i0.ɵɵtextInterpolate1(" ", ctx.period, " ");
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", !ctx.booking.is_done);
      i0.ɵɵadvance(9);
      i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(20, 21, ctx.booking.date, "EEEE, dd LLLL y"));
      i0.ɵɵadvance(6);
      i0.ɵɵtextInterpolate(ctx.period);
      i0.ɵɵadvance(5);
      i0.ɵɵtextInterpolate2(" ", (ctx.level == null ? null : ctx.level.display_name) || (ctx.level == null ? null : ctx.level.name), ", ", ctx.booking.asset_name || ctx.booking.asset_id, " ");
      i0.ɵɵadvance(5);
      i0.ɵɵtextInterpolate2(" ", (ctx.building == null ? null : ctx.building.display_name) || (ctx.building == null ? null : ctx.building.name), " ", (ctx.building == null ? null : ctx.building.address) ? ", " + ctx.building.address : "", " ");
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", ctx.has_assets);
      i0.ɵɵadvance(2);
      i0.ɵɵproperty("ngIf", !ctx.hide_map);
      i0.ɵɵadvance(6);
      i0.ɵɵproperty("ngIf", ctx.can_edit);
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", ctx.is_checked_in && ctx.desk_height_enabled);
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", !ctx.is_in_progress);
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", ctx.booking.instance && ctx.booking.booking_type !== "parking");
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", ctx.is_in_progress);
    }
  },
  dependencies: [i4.NgForOf, i4.NgIf, i3.MatDialogClose, i5.MatProgressSpinner, i6.IconComponent, i7.InteractiveMapComponent, i8.ImageCarouselComponent, i9.StatusPillComponent, i10.MatMenu, i10.MatMenuItem, i10.MatMenuTrigger, i11.MatRipple, i12.MatTooltip, i4.DatePipe],
  data: {
    animation: [common_1.ANIMATION_SHOW_CONTRACT_EXPAND]
  }
});
exports.BookingDetailsModalComponent = BookingDetailsModalComponent;

/***/ }),

/***/ 18379:
/*!*******************************************************!*\
  !*** ./libs/bookings/src/lib/booking-form.service.ts ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _regeneratorRuntime = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/regeneratorRuntime.js */ 8698)["default"]);
var _asyncToGenerator = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/asyncToGenerator.js */ 95386)["default"]);
var _objectSpread = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/objectSpread2.js */ 34092)["default"]);
var _toConsumableArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/toConsumableArray.js */ 86033)["default"]);
var _createForOfIteratorHelper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createForOfIteratorHelper.js */ 36350)["default"]);
var _slicedToArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/slicedToArray.js */ 6282)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _callSuper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/callSuper.js */ 8513)["default"]);
var _inherits = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/inherits.js */ 58160)["default"]);
var _BookingFormService;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.BookingFormService = void 0;
var dialog_1 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var router_1 = __webpack_require__(/*! @angular/router */ 95072);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var ts_client_1 = __webpack_require__(/*! @placeos/ts-client */ 35713);
var date_fns_1 = __webpack_require__(/*! date-fns */ 25773);
var rxjs_1 = __webpack_require__(/*! rxjs */ 15681);
var operators_1 = __webpack_require__(/*! rxjs/operators */ 97303);
var organisation_service_1 = __webpack_require__(/*! libs/organisation/src/lib/organisation.service */ 19863);
var booking_class_1 = __webpack_require__(/*! ./booking.class */ 53857);
var booking_utilities_1 = __webpack_require__(/*! ./booking.utilities */ 39522);
var bookings_fn_1 = __webpack_require__(/*! ./bookings.fn */ 18026);
var desk_questions_modal_component_1 = __webpack_require__(/*! ./desk-questions-modal.component */ 67254);
var booking_utilities_2 = __webpack_require__(/*! ./booking.utilities */ 39522);
var payments_service_1 = __webpack_require__(/*! libs/payments/src/lib/payments.service */ 34525);
var booking_link_modal_component_1 = __webpack_require__(/*! ./booking-link-modal.component */ 84089);
var assets_fn_1 = __webpack_require__(/*! libs/assets/src/lib/assets.fn */ 75204);
var asset_state_service_1 = __webpack_require__(/*! libs/assets/src/lib/asset-state.service */ 46088);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @angular/router */ 95072);
var i2 = __webpack_require__(/*! @placeos/common */ 22797);
var i3 = __webpack_require__(/*! libs/organisation/src/lib/organisation.service */ 19863);
var i4 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var i5 = __webpack_require__(/*! libs/payments/src/lib/payments.service */ 34525);
var i6 = __webpack_require__(/*! libs/assets/src/lib/asset-state.service */ 46088);
var BOOKING_TYPES = ['desk', 'parking', 'locker', 'catering'];
var BookingFormService = /*#__PURE__*/function (_common_1$AsyncHandle) {
  function BookingFormService(_router, _settings, _org, _dialog, _payments, _assets) {
    var _this;
    _classCallCheck(this, BookingFormService);
    _this = _callSuper(this, BookingFormService);
    _this._router = _router;
    _this._settings = _settings;
    _this._org = _org;
    _this._dialog = _dialog;
    _this._payments = _payments;
    _this._assets = _assets;
    _this._view = new rxjs_1.BehaviorSubject('form');
    _this._options = new rxjs_1.BehaviorSubject({
      type: 'desk'
    });
    _this._booking = new rxjs_1.BehaviorSubject(null);
    _this._resource_use = {};
    _this._loading = new rxjs_1.BehaviorSubject('');
    _this.last_success = new booking_class_1.Booking(JSON.parse(sessionStorage.getItem('PLACEOS.last_booked_booking') || '{}'));
    _this.loading = _this._loading.asObservable();
    _this.options = _this._options.pipe((0, operators_1.shareReplay)(1));
    _this.form = (0, booking_utilities_1.generateBookingForm)();
    _this.resources = (0, rxjs_1.combineLatest)([_this._org.active_building, _this.options.pipe((0, operators_1.distinctUntilKeyChanged)('type'))]).pipe((0, operators_1.debounceTime)(300), (0, operators_1.switchMap)(function (_ref) {
      var _ref2 = _slicedToArray(_ref, 2),
        bld = _ref2[0],
        type = _ref2[1].type;
      if (!bld) return (0, rxjs_1.of)([]);
      switch (type) {
        case 'desk':
          _this._loading.next("Loading desks...");
          return _this.loadResourceList('desks');
        case 'parking':
          _this._loading.next("Loading parking spaces...");
          return _this.loadResourceList('parking-spaces');
        case 'locker':
          _this._loading.next("Loading lockers...");
          return _this.loadResourceList('lockers');
      }
      return (0, rxjs_1.of)([]);
    }), (0, operators_1.tap)(function () {
      return _this._loading.next("");
    }), (0, operators_1.shareReplay)(1));
    _this.features = _this.resources.pipe((0, operators_1.map)(function (resource) {
      var list = [];
      var _iterator = _createForOfIteratorHelper(resource),
        _step;
      try {
        for (_iterator.s(); !(_step = _iterator.n()).done;) {
          var features = _step.value.features;
          features instanceof Array ? features.forEach(function (_) {
            return list.push(_);
          }) : null;
        }
      } catch (err) {
        _iterator.e(err);
      } finally {
        _iterator.f();
      }
      return (0, common_1.unique)(list).sort(function (a, b) {
        return a.localeCompare(b);
      });
    }), (0, operators_1.shareReplay)(1));
    _this.booking_rules = (0, rxjs_1.combineLatest)([_this._org.building_list, _this._options]).pipe((0, operators_1.switchMap)(function (_ref3) {
      var _ref4 = _slicedToArray(_ref3, 2),
        list = _ref4[0],
        type = _ref4[1].type;
      return Promise.all(list.map(function (bld) {
        return (0, ts_client_1.showMetadata)(bld.id, "".concat(type, "_booking_rules")).toPromise();
      }));
    }), (0, operators_1.map)(function (building_rules) {
      var mapping = {};
      var _iterator2 = _createForOfIteratorHelper(building_rules),
        _step2;
      try {
        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
          var rules = _step2.value;
          mapping[rules.id] = rules.details instanceof Array ? rules.details : [];
        }
      } catch (err) {
        _iterator2.e(err);
      } finally {
        _iterator2.f();
      }
      return mapping;
    }), (0, operators_1.shareReplay)(1));
    _this.available_resources = (0, rxjs_1.combineLatest)([_this.options, _this.resources, _this.booking_rules, (0, rxjs_1.merge)(_this.form.get('date').valueChanges, (0, rxjs_1.timer)(1000)), (0, rxjs_1.merge)(_this.form.get('duration').valueChanges, (0, rxjs_1.timer)(1000))]).pipe((0, operators_1.filter)(function () {
      return _this.form.getRawValue().date > 0 && _this.form.getRawValue().duration > 0;
    }), (0, operators_1.debounceTime)(500), (0, operators_1.tap)(function (_ref5) {
      var _ref6 = _slicedToArray(_ref5, 1),
        type = _ref6[0].type;
      return _this._loading.next("Checking ".concat(type, " availability..."));
    }), (0, operators_1.switchMap)(function (_ref7) {
      var _this$_org$region, _this$_org$building;
      var _ref8 = _slicedToArray(_ref7, 3),
        options = _ref8[0],
        resources = _ref8[1],
        restrictions = _ref8[2];
      var _this$form$getRawValu = _this.form.getRawValue(),
        all_day = _this$form$getRawValu.all_day,
        date = _this$form$getRawValu.date,
        duration = _this$form$getRawValu.duration,
        user = _this$form$getRawValu.user;
      if (all_day) {
        date = (0, date_fns_1.startOfDay)(date).valueOf();
        duration = 24 * 60 - 1;
      }
      return (0, bookings_fn_1.bookedResourceList)({
        period_start: (0, date_fns_1.getUnixTime)(date),
        period_end: (0, date_fns_1.getUnixTime)((0, date_fns_1.addMinutes)(date, duration)),
        type: options.type,
        zones: options.zone_id || (_this._settings.get('app.use_region') ? (_this$_org$region = _this._org.region) === null || _this$_org$region === void 0 ? void 0 : _this$_org$region.id : (_this$_org$building = _this._org.building) === null || _this$_org$building === void 0 ? void 0 : _this$_org$building.id) || _this._org.organisation.id
      }).pipe((0, operators_1.map)(function (booked_ids) {
        var start = _this.form.getRawValue().date;
        var end = (0, date_fns_1.addMinutes)(start, _this.form.getRawValue().duration).valueOf();
        _this._resource_use = {};
        var _iterator3 = _createForOfIteratorHelper(booked_ids),
          _step3;
        try {
          for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {
            var id = _step3.value;
            _this._resource_use[id] = ' ';
          }
        } catch (err) {
          _iterator3.e(err);
        } finally {
          _iterator3.f();
        }
        var available = resources.filter(function (asset) {
          var _asset$zone, _asset$zone2, _asset$groups, _options$features, _asset$zone3, _asset$zone4;
          var is_restricted = (0, common_1.rulesForResource)({
            date: date,
            duration: duration,
            resource: asset,
            host: user || (0, common_1.currentUser)()
          }, restrictions[(_asset$zone = asset.zone) === null || _asset$zone === void 0 ? void 0 : _asset$zone.id] || restrictions[(_asset$zone2 = asset.zone) === null || _asset$zone2 === void 0 ? void 0 : _asset$zone2.parent_id] || restrictions[_this._org.building.id] || []).hidden;
          return !is_restricted && (!((_asset$groups = asset.groups) !== null && _asset$groups !== void 0 && _asset$groups.length) || asset.groups.some(function (grp) {
            return (0, common_1.currentUser)().groups.includes(grp);
          })) && asset.bookable !== false && (!options.features || ((_options$features = options.features) === null || _options$features === void 0 ? void 0 : _options$features.every(function (_) {
            return asset.features.includes(_);
          }))) && (!options.zone_id || options.zone_id === ((_asset$zone3 = asset.zone) === null || _asset$zone3 === void 0 ? void 0 : _asset$zone3.id) || options.zone_id === ((_asset$zone4 = asset.zone) === null || _asset$zone4 === void 0 ? void 0 : _asset$zone4.parent_id)) && !booked_ids.includes(asset.id);
        });
        console.log('Resources:', resources, available);
        return available;
      }, (0, operators_1.catchError)(function (_) {
        return (0, rxjs_1.of)([]);
      })));
    }), (0, operators_1.tap)(function (_) {
      return _this._loading.next('');
    }), (0, operators_1.shareReplay)(1));
    _this.grouped_availability = (0, rxjs_1.combineLatest)([_this.options, _this.available_resources]).pipe((0, operators_1.map)(function (_ref9) {
      var _options$members;
      var _ref10 = _slicedToArray(_ref9, 2),
        options = _ref10[0],
        resource = _ref10[1];
      var groups = [];
      var asset_list = _toConsumableArray(resource).sort(function (a, b) {
        var _a$zone, _b$zone;
        return (_a$zone = a.zone) === null || _a$zone === void 0 || (_a$zone = _a$zone.id) === null || _a$zone === void 0 ? void 0 : _a$zone.localeCompare((_b$zone = b.zone) === null || _b$zone === void 0 ? void 0 : _b$zone.id);
      });
      var members = (_options$members = options.members) !== null && _options$members !== void 0 && _options$members.length ? options.members : [(0, common_1.currentUser)()];
      var _loop = function _loop() {
        var group = [];
        var asset = asset_list.pop();
        while (group.length < members.length) {
          if (group.length && !group.find(function (_) {
            var _$zone, _asset$zone5;
            return ((_$zone = _.zone) === null || _$zone === void 0 ? void 0 : _$zone.id) === ((_asset$zone5 = asset.zone) === null || _asset$zone5 === void 0 ? void 0 : _asset$zone5.id);
          })) {
            break;
          }
          group.push(asset);
          asset = asset_list.pop();
        }
        if (group.length < members.length) return 1; // continue
        groups.push(group);
      };
      while (asset_list.length) {
        if (_loop()) continue;
      }
      return groups;
    }));
    _this.subscription('router.bookings', _this._router.events.subscribe(function (booking) {
      if (booking instanceof router_1.NavigationEnd && !booking.url.includes('book') && !BOOKING_TYPES.find(function (_) {
        return booking.url.includes(_);
      })) {
        _this.clearForm();
      }
    }));
    _this._org.initialised.pipe((0, operators_1.first)(function (_) {
      return _;
    })).subscribe(function () {
      return _this.setOptions({});
    });
    return _this;
  }
  _inherits(BookingFormService, _common_1$AsyncHandle);
  return _createClass(BookingFormService, [{
    key: "view",
    get: function get() {
      return this._view.getValue();
    }
  }, {
    key: "booking",
    get: function get() {
      return this._booking.getValue();
    }
  }, {
    key: "resourceUserName",
    value: function resourceUserName(id) {
      return this._resource_use[id];
    }
  }, {
    key: "newForm",
    value: function newForm() {
      var _this2 = this;
      var booking = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : new booking_class_1.Booking({
        all_day: this._settings.get('app.bookings.all_day_default')
      });
      this.form.reset();
      this.form.patchValue((0, ts_client_1.cleanObject)(_objectSpread(_objectSpread({}, booking), booking.extension_data), [null, undefined, '']));
      this.subscription('form_change', this.form.valueChanges.subscribe(function () {
        var _this2$form$getRawVal = _this2.form.getRawValue(),
          date = _this2$form$getRawVal.date,
          duration = _this2$form$getRawVal.duration;
        _this2._assets.setOptions({
          date: date,
          duration: duration
        });
        _this2.storeForm();
      }));
      this.timeout('date', function () {
        _this2.form.patchValue({
          date: booking.date,
          duration: booking.duration
        });
      });
      this._booking.next(new booking_class_1.Booking(booking));
      this._options.next({
        type: this._options.getValue().type
      });
    }
  }, {
    key: "setView",
    value: function setView(value) {
      this._view.next(value);
    }
  }, {
    key: "setOptions",
    value: function setOptions(value) {
      this._options.next(_objectSpread(_objectSpread({}, this._options.getValue()), value));
    }
  }, {
    key: "setFeature",
    value: function setFeature(feature, enable) {
      var _this$_options$getVal;
      if (!(feature !== null && feature !== void 0 && feature.length)) return;
      var features = ((_this$_options$getVal = this._options.getValue()) === null || _this$_options$getVal === void 0 ? void 0 : _this$_options$getVal.features) || [];
      if (enable && !features.includes(feature)) features.push(feature);
      if (!enable && features.includes(feature)) features.splice(features.findIndex(function (e) {
        return e === feature;
      }), 1);
      this.setOptions({
        features: features
      });
    }
  }, {
    key: "resetForm",
    value: function resetForm() {
      if (!sessionStorage.getItem('PLACEOS.booking_form')) {
        return this.newForm();
      }
      var booking = this._booking.getValue();
      this.form.reset({
        user: (0, common_1.currentUser)(),
        booked_by: (0, common_1.currentUser)()
      });
      this.form.patchValue((0, ts_client_1.cleanObject)(_objectSpread(_objectSpread({}, booking || {}), (booking === null || booking === void 0 ? void 0 : booking.extension_data) || {}), [null, undefined, '']));
      this._options.next({
        type: this._options.getValue().type
      });
    }
  }, {
    key: "clearForm",
    value: function clearForm() {
      sessionStorage.removeItem('PLACEOS.booking_form');
      sessionStorage.removeItem('PLACEOS.booking_form_options');
      this.newForm();
    }
  }, {
    key: "storeForm",
    value: function storeForm() {
      sessionStorage.setItem('PLACEOS.booking_form', JSON.stringify(_objectSpread(_objectSpread({}, this._booking.getValue()), (0, ts_client_1.cleanObject)(this.form.getRawValue() || {}, [null, undefined, '']))));
      sessionStorage.setItem('PLACEOS.booking_form_filters', JSON.stringify(this._options.getValue() || {}));
    }
  }, {
    key: "loadForm",
    value: function loadForm() {
      this.form.reset({
        user: (0, common_1.currentUser)(),
        booked_by: (0, common_1.currentUser)()
      });
      var data = JSON.parse(sessionStorage.getItem('PLACEOS.booking_form') || '{}');
      var booking = new booking_class_1.Booking(data);
      this._booking.next(booking);
      var booking_data = (0, ts_client_1.cleanObject)(_objectSpread(_objectSpread(_objectSpread({}, data), booking || {}), (booking === null || booking === void 0 ? void 0 : booking.extension_data) || {}), [null, undefined, '']);
      this.form.patchValue(booking_data);
      this.setOptions(_objectSpread({}, JSON.parse(sessionStorage.getItem('PLACEOS.booking_form_filters') || '{}')));
    }
  }, {
    key: "clearOldState",
    value: function clearOldState() {
      sessionStorage.removeItem('PLACEOS.last_booked_booking');
      this.last_success = new booking_class_1.Booking();
    }
  }, {
    key: "openBookingLinkModal",
    value: function openBookingLinkModal() {
      var force = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;
      this.form.markAllAsTouched();
      if (!this.form.valid && !force) return;
      var event = new booking_class_1.Booking(_objectSpread(_objectSpread({}, this.booking), this.form.getRawValue()));
      this._dialog.open(booking_link_modal_component_1.BookingLinkModalComponent, {
        data: event
      });
    }
  }, {
    key: "confirmPost",
    value: function () {
      var _confirmPost = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
        var options, value, content, details;
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              _context.next = 2;
              return this.checkQuestions();
            case 2:
              options = this._options.getValue();
              value = this.form.getRawValue();
              content = "Would you like to book the ".concat(options.type, " ").concat(value.asset_name, " for ").concat((0, date_fns_1.format)(value.date, 'dd MMM yyyy')).concat(value.duration < 12 * 60 ? ' at ' + (0, date_fns_1.format)(value.date, 'h:mm a') : '');
              if (options.group) {
                content = "".concat(content, ".<br>You group members will be assigned desks nearby your selected desk.");
              }
              _context.next = 8;
              return (0, common_1.openConfirmModal)({
                title: "Book ".concat(options.type),
                content: content,
                icon: {
                  content: 'event_available'
                }
              }, this._dialog);
            case 8:
              details = _context.sent;
              if (!((details === null || details === void 0 ? void 0 : details.reason) !== 'done')) {
                _context.next = 11;
                break;
              }
              throw 'User cancelled';
            case 11:
              details.loading('Performing booking request...');
              if (!options.group) {
                _context.next = 17;
                break;
              }
              _context.next = 15;
              return this.postFormForGroup()["catch"](function (_) {
                (0, common_1.notifyError)(JSON.stringify(_));
                details.close();
                throw _;
              });
            case 15:
              _context.next = 19;
              break;
            case 17:
              _context.next = 19;
              return this.postForm()["catch"](function (_) {
                (0, common_1.notifyError)(JSON.stringify(_));
                details.close();
                throw _;
              });
            case 19:
              details.close();
            case 20:
            case "end":
              return _context.stop();
          }
        }, _callee, this);
      }));
      function confirmPost() {
        return _confirmPost.apply(this, arguments);
      }
      return confirmPost;
    }()
  }, {
    key: "postForm",
    value: function () {
      var _postForm = _asyncToGenerator(function () {
        var _this3 = this;
        var ignore_check = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;
        return /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(_value$zones, _this3$_booking$getVa, _resources$, _resources$2, _this3$_org$region, _this3$_org$region2, _value$user2, _value$user3, _value$user4, _ref12, _value$assets, _booking$extension_da, _this3$form) {
          var value, booking, _value$user, _ref11, receipt, event_id, parent_id, resources, zone, zones, q, result, requests, booking_type;
          return _regeneratorRuntime().wrap(function _callee2$(_context2) {
            while (1) switch (_context2.prev = _context2.next) {
              case 0:
                if (_this3.form) {
                  _context2.next = 2;
                  break;
                }
                throw 'No form for booking';
              case 2:
                if (_this3.form.valid) {
                  _context2.next = 4;
                  break;
                }
                throw "Some form fields are invalid. [".concat((0, common_1.getInvalidFields)(_this3.form).join(', '), "]");
              case 4:
                _this3.form.patchValue({
                  booking_type: _this3.form.getRawValue().booking_type || _this3._options.getValue().type
                });
                value = _this3.form.getRawValue();
                booking = _this3._booking.getValue() || new booking_class_1.Booking();
                if (ignore_check) {
                  _context2.next = 10;
                  break;
                }
                _context2.next = 10;
                return _this3.checkResourceAvailable(_objectSpread(_objectSpread(_objectSpread({}, booking), value), {}, {
                  user_email: ((_value$user = value.user) === null || _value$user === void 0 ? void 0 : _value$user.email) || value.user_email || ((_ref11 = (0, common_1.currentUser)()) === null || _ref11 === void 0 ? void 0 : _ref11.email)
                }), _this3._options.getValue().type);
              case 10:
                if (!_this3._payments.payment_module) {
                  _context2.next = 17;
                  break;
                }
                _context2.next = 13;
                return _this3._payments.makePayment({
                  type: _this3._options.getValue().type,
                  resource_name: value.asset_name,
                  date: value.date,
                  duration: value.duration,
                  all_day: value.all_day
                });
              case 13:
                receipt = _context2.sent;
                if (receipt !== null && receipt !== void 0 && receipt.success) {
                  _context2.next = 16;
                  break;
                }
                return _context2.abrupt("return");
              case 16:
                value.extension_data = {
                  invoice: receipt,
                  invoice_id: receipt.invoice_id
                };
              case 17:
                if (!((_value$zones = value.zones) !== null && _value$zones !== void 0 && _value$zones.length) && (_this3$_booking$getVa = _this3._booking.getValue().zones) !== null && _this3$_booking$getVa !== void 0 && _this3$_booking$getVa.length) {
                  value.zones = _this3._booking.getValue().zones;
                }
                _this3._loading.next('Saving booking');
                delete value.booking_asset;
                if (value.all_day) {
                  value.date = (0, date_fns_1.startOfDay)(value.date).valueOf();
                  value.duration = 24 * 60 - 1;
                }
                event_id = value.event_id, parent_id = value.parent_id;
                delete value.event_id;
                delete value.parent_id;
                resources = value.resources || [];
                zone = _this3._org.levelWithID((_resources$ = resources[0]) === null || _resources$ === void 0 ? void 0 : _resources$.zone_id) || ((_resources$2 = resources[0]) === null || _resources$2 === void 0 ? void 0 : _resources$2.zone);
                zones = zone && zone instanceof Object ? (0, common_1.unique)([_this3._org.organisation.id, (_this3$_org$region = _this3._org.region) === null || _this3$_org$region === void 0 ? void 0 : _this3$_org$region.id, zone.parent_id, zone.id]) : [_this3._org.organisation.id, (_this3$_org$region2 = _this3._org.region) === null || _this3$_org$region2 === void 0 ? void 0 : _this3$_org$region2.id];
                q = event_id ? {
                  ical_uid: value.ical_uid,
                  event_id: event_id
                } : parent_id ? {
                  booking_id: parent_id
                } : {};
                if (booking.instance && !value.update_master) {
                  q.instance = true;
                  q.start_time = booking.booking_start;
                }
                _context2.next = 31;
                return (0, bookings_fn_1.saveBooking)(new booking_class_1.Booking(_objectSpread(_objectSpread(_objectSpread({}, _this3._options.getValue()), value), {}, {
                  description: value.asset_name || value.description,
                  user_name: ((_value$user2 = value.user) === null || _value$user2 === void 0 ? void 0 : _value$user2.name) || value.user_name,
                  user_email: ((_value$user3 = value.user) === null || _value$user3 === void 0 ? void 0 : _value$user3.email) || value.user_email,
                  extension_data: _objectSpread(_objectSpread({}, value.extension_data || {}), {}, {
                    assets: value.assets.map(function (_) {
                      return _.toJSON();
                    }),
                    group: value.group,
                    phone: value.phone,
                    department: ((_value$user4 = value.user) === null || _value$user4 === void 0 ? void 0 : _value$user4.department) || ((_ref12 = (0, common_1.currentUser)()) === null || _ref12 === void 0 ? void 0 : _ref12.department)
                  }),
                  approved: !_this3._settings.get('app.bookings.no_approval'),
                  zones: (0, common_1.unique)([].concat(_toConsumableArray(zones), _toConsumableArray(value.zones || []))).filter(function (_) {
                    return _;
                  })
                })), q).toPromise()["catch"](function (e) {
                  _this3._loading.next('');
                  throw (e === null || e === void 0 ? void 0 : e.error) || e;
                });
              case 31:
                result = _context2.sent;
                if (!((_value$assets = value.assets) !== null && _value$assets !== void 0 && _value$assets.length || (_booking$extension_da = booking.extension_data.assets) !== null && _booking$extension_da !== void 0 && _booking$extension_da.length)) {
                  _context2.next = 40;
                  break;
                }
                _context2.next = 35;
                return (0, assets_fn_1.validateAssetRequestsForResource)(_objectSpread(_objectSpread({}, result), {}, {
                  from_booking: true
                }), {
                  date: value.date,
                  duration: value.duration,
                  all_day: value.all_day,
                  host: value.booked_by_email,
                  zones: (0, common_1.unique)([].concat(_toConsumableArray(zones), _toConsumableArray(value.zones || []))).filter(function (_) {
                    return _;
                  })
                }, value.assets)["catch"](function (e) {
                  console.error("Couldn't update asset requests", e);
                  if ((e === null || e === void 0 ? void 0 : e.status) === 409) {
                    (0, common_1.notifyError)('Some assets are already booked for the selected time');
                  }
                  _this3._loading.next('');
                  throw (e === null || e === void 0 ? void 0 : e.error) || e;
                });
              case 35:
                requests = _context2.sent;
                if (requests) {
                  _context2.next = 38;
                  break;
                }
                throw 'Unable to validate asset requests';
              case 38:
                _context2.next = 40;
                return requests();
              case 40:
                _this3._loading.next('');
                booking_type = value.booking_type;
                _this3.clearForm();
                (_this3$form = _this3.form) === null || _this3$form === void 0 || _this3$form.patchValue({
                  booking_type: booking_type
                });
                _this3.last_success = result;
                sessionStorage.setItem('PLACEOS.last_booked_booking', JSON.stringify(result));
                _this3.setView('success');
                return _context2.abrupt("return", result);
              case 48:
              case "end":
                return _context2.stop();
            }
          }, _callee2);
        })();
      });
      function postForm() {
        return _postForm.apply(this, arguments);
      }
      return postForm;
    }()
  }, {
    key: "postFormForGroup",
    value: function () {
      var _postFormForGroup = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {
        var _active_resource$zone,
          _this4 = this;
        var _this$_options$getVal2, members, group, type, extra_members, form, asset_list, active_resource, level, resources, group_members, available, unavailable, group_name, id, i, _this$_org$region2, _asset$zone6, _asset$zone7, _this$_org$region3, user, asset, bkn, _unavailable$map;
        return _regeneratorRuntime().wrap(function _callee3$(_context3) {
          while (1) switch (_context3.prev = _context3.next) {
            case 0:
              _this$_options$getVal2 = this._options.getValue(), members = _this$_options$getVal2.members, group = _this$_options$getVal2.group, type = _this$_options$getVal2.type;
              if (group) {
                _context3.next = 3;
                break;
              }
              throw 'No group available to book for';
            case 3:
              extra_members = members.filter(function (_) {
                return _.email !== (0, common_1.currentUser)().email;
              });
              if (!(extra_members.length <= 0)) {
                _context3.next = 6;
                break;
              }
              throw 'No members in your group to book for.';
            case 6:
              form = this.form.getRawValue();
              _context3.next = 9;
              return this.available_resources.pipe((0, operators_1.take)(1)).toPromise();
            case 9:
              asset_list = _context3.sent;
              active_resource = asset_list.find(function (_) {
                return _.id === form.asset_id || _.map_id === form.asset_id;
              });
              level = this._org.levelWithID([(_active_resource$zone = active_resource.zone) === null || _active_resource$zone === void 0 ? void 0 : _active_resource$zone.id]);
              _context3.t0 = [active_resource];
              _context3.t1 = _toConsumableArray;
              _context3.next = 16;
              return this._getNearbyResources(level.map_id, form.asset_id, asset_list, extra_members.length);
            case 16:
              _context3.t2 = _context3.sent;
              _context3.t3 = (0, _context3.t1)(_context3.t2);
              resources = _context3.t0.concat.call(_context3.t0, _context3.t3);
              group_members = (0, common_1.unique)([(0, common_1.currentUser)()].concat(_toConsumableArray(extra_members)), 'email');
              _context3.next = 22;
              return Promise.all(group_members.map(function (_, idx) {
                return _this4.checkResourceAvailable(_objectSpread(_objectSpread({}, form), {}, {
                  asset_id: resources[idx].map_id || resources[idx].id,
                  user_email: _.email
                }), type);
              }));
            case 22:
              available = _context3.sent;
              unavailable = group_members.filter(function (_, idx) {
                return !available[idx];
              });
              group_name = "".concat((0, common_1.currentUser)().email, "[").concat((0, date_fns_1.format)(Date.now(), 'yyyy-MM-dd'), "]");
              id = '';
              i = 0;
            case 27:
              if (!(i < group_members.length)) {
                _context3.next = 40;
                break;
              }
              if (available[i]) {
                _context3.next = 30;
                break;
              }
              return _context3.abrupt("continue", 37);
            case 30:
              user = group_members[i];
              asset = resources[i];
              this.form.patchValue(_objectSpread(_objectSpread({}, form), {}, {
                parent_id: id,
                user: user,
                user_email: user.email,
                user_id: user.id,
                asset_id: asset === null || asset === void 0 ? void 0 : asset.id,
                asset_name: asset.name,
                description: asset.name,
                map_id: (asset === null || asset === void 0 ? void 0 : asset.map_id) || (asset === null || asset === void 0 ? void 0 : asset.id),
                group: group_name,
                zones: (asset.zone ? (0, common_1.unique)([this._org.organisation.id, (_this$_org$region2 = this._org.region) === null || _this$_org$region2 === void 0 ? void 0 : _this$_org$region2.id, asset === null || asset === void 0 || (_asset$zone6 = asset.zone) === null || _asset$zone6 === void 0 ? void 0 : _asset$zone6.parent_id, asset === null || asset === void 0 || (_asset$zone7 = asset.zone) === null || _asset$zone7 === void 0 ? void 0 : _asset$zone7.id]) : [this._org.organisation.id, (_this$_org$region3 = this._org.region) === null || _this$_org$region3 === void 0 ? void 0 : _this$_org$region3.id]).filter(function (_) {
                  return _;
                })
              }));
              _context3.next = 35;
              return this.postForm(true);
            case 35:
              bkn = _context3.sent;
              if (bkn.id && !id) id = bkn.id;
            case 37:
              i++;
              _context3.next = 27;
              break;
            case 40:
              if (unavailable.length) {
                (0, common_1.notifyWarn)("Some members of your group already have a desk booking. [".concat((_unavailable$map = unavailable.map(function (_) {
                  return _.name || _.email;
                })) === null || _unavailable$map === void 0 ? void 0 : _unavailable$map.join(', '), "]"));
              }
            case 41:
            case "end":
              return _context3.stop();
          }
        }, _callee3, this);
      }));
      function postFormForGroup() {
        return _postFormForGroup.apply(this, arguments);
      }
      return postFormForGroup;
    }()
  }, {
    key: "checkQuestions",
    value: function () {
      var _checkQuestions = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4() {
        var ref, result, form, key;
        return _regeneratorRuntime().wrap(function _callee4$(_context4) {
          while (1) switch (_context4.prev = _context4.next) {
            case 0:
              if (!(this._settings.get('app.desks.ignore_questions') !== false)) {
                _context4.next = 2;
                break;
              }
              return _context4.abrupt("return");
            case 2:
              ref = this._dialog.open(desk_questions_modal_component_1.DeskQuestionsModalComponent);
              _context4.next = 5;
              return Promise.race([ref.componentInstance.event.pipe((0, operators_1.first)(function (_) {
                return _.reason === 'done';
              })).toPromise(), ref.afterClosed().toPromise()]);
            case 5:
              result = _context4.sent;
              if (!((result === null || result === void 0 ? void 0 : result.reason) !== 'done')) {
                _context4.next = 8;
                break;
              }
              throw 'User cancelled';
            case 8:
              form = ref.componentInstance.form.getRawValue();
              _context4.t0 = _regeneratorRuntime().keys(form);
            case 10:
              if ((_context4.t1 = _context4.t0()).done) {
                _context4.next = 16;
                break;
              }
              key = _context4.t1.value;
              if (!form[key]) {
                _context4.next = 14;
                break;
              }
              throw 'User failed questionaire';
            case 14:
              _context4.next = 10;
              break;
            case 16:
              ref.close();
            case 17:
            case "end":
              return _context4.stop();
          }
        }, _callee4, this);
      }));
      function checkQuestions() {
        return _checkQuestions.apply(this, arguments);
      }
      return checkQuestions;
    }() /** Check if the given resource is available for the selected user to book */
  }, {
    key: "checkResourceAvailable",
    value: (function () {
      var _checkResourceAvailable = _asyncToGenerator(function (_ref13, type) {
        var _this5 = this;
        var id = _ref13.id,
          asset_id = _ref13.asset_id,
          date = _ref13.date,
          duration = _ref13.duration,
          user_email = _ref13.user_email;
        return /*#__PURE__*/_regeneratorRuntime().mark(function _callee5(_this5$_settings$get) {
          var bookings, active_bookings, allowed_bookings, _ref15, current;
          return _regeneratorRuntime().wrap(function _callee5$(_context5) {
            while (1) switch (_context5.prev = _context5.next) {
              case 0:
                if (user_email) {
                  _context5.next = 2;
                  break;
                }
                throw 'No user was selected to book for';
              case 2:
                if (!(type === 'group-event')) {
                  _context5.next = 4;
                  break;
                }
                return _context5.abrupt("return", true);
              case 4:
                _context5.next = 6;
                return (0, bookings_fn_1.queryBookings)({
                  period_start: (0, date_fns_1.getUnixTime)(date),
                  period_end: (0, date_fns_1.getUnixTime)(date + duration * 60 * 1000),
                  type: type,
                  email: user_email,
                  limit: 1000
                }).toPromise();
              case 6:
                bookings = _context5.sent;
                active_bookings = bookings.filter(function (_) {
                  return _.status !== 'declined' && _.status !== 'cancelled' && !_.rejected;
                });
                if (!active_bookings.find(function (_) {
                  return _.asset_id === asset_id && id !== _.id;
                })) {
                  _context5.next = 14;
                  break;
                }
                if (!asset_id.includes('@')) {
                  _context5.next = 13;
                  break;
                }
                throw "".concat(asset_id, " already has an invite for the selected time");
              case 13:
                throw "".concat(asset_id, " is not available at the selected time");
              case 14:
                allowed_bookings = (_this5$_settings$get = _this5._settings.get("app.bookings.allowed_daily_".concat(type, "_count"))) !== null && _this5$_settings$get !== void 0 ? _this5$_settings$get : 1;
                if (!(allowed_bookings > 0 && active_bookings.filter(function (_) {
                  var _ref14;
                  return _.user_email.toLowerCase() === (user_email || ((_ref14 = (0, common_1.currentUser)()) === null || _ref14 === void 0 ? void 0 : _ref14.email)).toLowerCase() && _.id !== id;
                }).length >= allowed_bookings)) {
                  _context5.next = 18;
                  break;
                }
                current = user_email === ((_ref15 = (0, common_1.currentUser)()) === null || _ref15 === void 0 ? void 0 : _ref15.email);
                throw "".concat(current ? 'You' : user_email, " already ").concat(current ? 'have' : 'has', " a booking at the selected time");
              case 18:
                return _context5.abrupt("return", true);
              case 19:
              case "end":
                return _context5.stop();
            }
          }, _callee5);
        })();
      });
      function checkResourceAvailable(_x, _x2) {
        return _checkResourceAvailable.apply(this, arguments);
      }
      return checkResourceAvailable;
    }())
  }, {
    key: "loadResourceList",
    value: function loadResourceList(type) {
      var use_region = this._settings.get('app.use_region');
      var map_metadata = function map_metadata(_) {
        var _$metadata$type, _$metadata$type2;
        return ((_ === null || _ === void 0 || (_$metadata$type = _.metadata[type]) === null || _$metadata$type === void 0 ? void 0 : _$metadata$type.details) instanceof Array ? (_$metadata$type2 = _.metadata[type]) === null || _$metadata$type2 === void 0 ? void 0 : _$metadata$type2.details : []).map(function (d) {
          var _d$lockers;
          return type !== 'lockers' ? _objectSpread(_objectSpread({}, d), {}, {
            id: d.id || d.map_id,
            zone: _.zone
          }) : ((_d$lockers = d.lockers) === null || _d$lockers === void 0 ? void 0 : _d$lockers.map(function (locker) {
            return _objectSpread(_objectSpread({}, locker), {}, {
              bank_id: d.id,
              zone: _.zone
            });
          })) || [];
        });
      };
      var id = use_region ? this._org.building.parent_id : this._org.building.id;
      if (use_region) {
        var _id = this._org.building.parent_id;
        var buildings = this._org.buildings.filter(function (_) {
          return _.parent_id === _id;
        });
        return (0, rxjs_1.forkJoin)(buildings.map(function (_) {
          return (0, ts_client_1.listChildMetadata)(_.id, {
            name: type
          }).pipe((0, operators_1.map)(function (data) {
            return (0, common_1.flatten)(data.map(map_metadata));
          }));
        })).pipe((0, operators_1.map)(function (_) {
          return (0, common_1.flatten)(_);
        }));
      }
      return (0, ts_client_1.listChildMetadata)(id, {
        name: type
      }).pipe((0, operators_1.map)(function (data) {
        return (0, common_1.flatten)(data.map(map_metadata));
      }));
    }
  }, {
    key: "_getNearbyResources",
    value: function () {
      var _getNearbyResources2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee6(map_url, id, resources, count) {
        var nearby_resources, asset_list, _loop2, i;
        return _regeneratorRuntime().wrap(function _callee6$(_context7) {
          while (1) switch (_context7.prev = _context7.next) {
            case 0:
              nearby_resources = [];
              asset_list = resources.filter(function (_) {
                return _.id !== id && _.map_id !== id;
              });
              _loop2 = /*#__PURE__*/_regeneratorRuntime().mark(function _loop2() {
                var item;
                return _regeneratorRuntime().wrap(function _loop2$(_context6) {
                  while (1) switch (_context6.prev = _context6.next) {
                    case 0:
                      _context6.next = 2;
                      return (0, booking_utilities_2.findNearbyFeature)(map_url, id, asset_list.map(function (_) {
                        return _.map_id || _.id;
                      }));
                    case 2:
                      item = _context6.sent;
                      if (item) {
                        nearby_resources.push(resources.find(function (_) {
                          return _.id === item || _.map_id === item;
                        }));
                        asset_list = asset_list.filter(function (_) {
                          return _.id !== item && _.map_id !== item;
                        });
                      }
                    case 4:
                    case "end":
                      return _context6.stop();
                  }
                }, _loop2);
              });
              i = 0;
            case 4:
              if (!(i < count)) {
                _context7.next = 9;
                break;
              }
              return _context7.delegateYield(_loop2(), "t0", 6);
            case 6:
              i++;
              _context7.next = 4;
              break;
            case 9:
              return _context7.abrupt("return", nearby_resources);
            case 10:
            case "end":
              return _context7.stop();
          }
        }, _callee6);
      }));
      function _getNearbyResources(_x3, _x4, _x5, _x6) {
        return _getNearbyResources2.apply(this, arguments);
      }
      return _getNearbyResources;
    }()
  }]);
}(common_1.AsyncHandler);
_BookingFormService = BookingFormService;
_BookingFormService.ɵfac = function BookingFormService_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _BookingFormService)(i0.ɵɵinject(i1.Router), i0.ɵɵinject(i2.SettingsService), i0.ɵɵinject(i3.OrganisationService), i0.ɵɵinject(i4.MatDialog), i0.ɵɵinject(i5.PaymentsService), i0.ɵɵinject(i6.AssetStateService));
};
_BookingFormService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({
  token: _BookingFormService,
  factory: _BookingFormService.ɵfac,
  providedIn: 'root'
});
exports.BookingFormService = BookingFormService;

/***/ }),

/***/ 84089:
/*!***************************************************************!*\
  !*** ./libs/bookings/src/lib/booking-link-modal.component.ts ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _taggedTemplateLiteral = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js */ 9959)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _BookingLinkModalComponent, _templateObject, _templateObject2, _templateObject3;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.BookingLinkModalComponent = void 0;
var dialog_1 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var settings_service_1 = __webpack_require__(/*! libs/common/src/lib/settings.service */ 14233);
var calendar_links_1 = __webpack_require__(/*! libs/common/src/lib/calendar-links */ 44571);
var booking_class_1 = __webpack_require__(/*! ./booking.class */ 53857);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! libs/common/src/lib/settings.service */ 14233);
var i2 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var i3 = __webpack_require__(/*! ../../../components/src/lib/icon.component */ 69434);
var i4 = __webpack_require__(/*! @angular/material/core */ 74646);
var i5 = __webpack_require__(/*! ../../../components/src/lib/safe.pipe */ 26781);
var i6 = __webpack_require__(/*! ../../../components/src/lib/sanitise.pipe */ 54616);
var i7 = __webpack_require__(/*! ./booking.class */ 53857);
var BookingLinkModalComponent = /*#__PURE__*/_createClass(function BookingLinkModalComponent(_event, _settings) {
  _classCallCheck(this, BookingLinkModalComponent);
  this._event = _event;
  this._settings = _settings;
  this.outlook_link = (0, calendar_links_1.generateMicrosoftCalendarLink)(this._event);
  this.google_link = (0, calendar_links_1.generateGoogleCalendarLink)(this._event);
  this.ical_link = (0, calendar_links_1.generateCalendarFileLink)(this._event);
});
_BookingLinkModalComponent = BookingLinkModalComponent;
_BookingLinkModalComponent.ɵfac = function BookingLinkModalComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _BookingLinkModalComponent)(i0.ɵɵdirectiveInject(dialog_1.MAT_DIALOG_DATA), i0.ɵɵdirectiveInject(i1.SettingsService));
};
_BookingLinkModalComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _BookingLinkModalComponent,
  selectors: [["booking-link-modal"]],
  decls: 22,
  vars: 12,
  consts: function consts() {
    var i18n_0;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_4015832758698516701$$LIBS_BOOKINGS_SRC_LIB_BOOKING_LINK_MODAL_COMPONENT_TS_0 = goog.getMsg("Create in Outlook");
      i18n_0 = MSG_EXTERNAL_4015832758698516701$$LIBS_BOOKINGS_SRC_LIB_BOOKING_LINK_MODAL_COMPONENT_TS_0;
    } else {
      i18n_0 = $localize(_templateObject || (_templateObject = _taggedTemplateLiteral([":\u241F34c16b14ad0e33db574c8bea543e66e766aa3a01\u241F4015832758698516701:Create in Outlook"])));
    }
    var i18n_1;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_3788591245559456526$$LIBS_BOOKINGS_SRC_LIB_BOOKING_LINK_MODAL_COMPONENT_TS_1 = goog.getMsg("Create in Google Calendar");
      i18n_1 = MSG_EXTERNAL_3788591245559456526$$LIBS_BOOKINGS_SRC_LIB_BOOKING_LINK_MODAL_COMPONENT_TS_1;
    } else {
      i18n_1 = $localize(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([":\u241Ff745484670e6b6bbb8a1c327c222e665fb25b863\u241F3788591245559456526:Create in Google Calendar"])));
    }
    var i18n_2;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_4894641609416495396$$LIBS_BOOKINGS_SRC_LIB_BOOKING_LINK_MODAL_COMPONENT_TS_2 = goog.getMsg("Download iCal File");
      i18n_2 = MSG_EXTERNAL_4894641609416495396$$LIBS_BOOKINGS_SRC_LIB_BOOKING_LINK_MODAL_COMPONENT_TS_2;
    } else {
      i18n_2 = $localize(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([":\u241F1af54061e7f4bcfb1048ffaa05c9b8f7c4b41679\u241F4894641609416495396:Download iCal File"])));
    }
    return [i18n_0, i18n_1, i18n_2, [1, "p-4", "w-full", "pb-2"], [1, "flex", "flex-col", "items-center", "space-y-4", "p-4", "relative"], ["btn", "", "matRipple", "", "target", "_blank", "rel", "noopener noreferer", 1, "flex", "items-center", "p-2", "space-x-2", "pr-4", "w-64", "rounded", "inverse", 3, "href"], ["src", "assets/icons/outlook.svg", 1, "w-6"], ["src", "assets/icons/gcal.svg", 1, "w-6"], [1, "text-xl"], ["icon", "", "mat-dialog-close", "", 1, "absolute", "top-2", "right-0"]];
  },
  template: function BookingLinkModalComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵelementStart(0, "div", 3);
      i0.ɵɵtext(1, "Add event to your calendar");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(2, "div", 4)(3, "a", 5);
      i0.ɵɵpipe(4, "sanitize");
      i0.ɵɵelement(5, "img", 6);
      i0.ɵɵelementStart(6, "span");
      i0.ɵɵi18n(7, 0);
      i0.ɵɵelementEnd()();
      i0.ɵɵelementStart(8, "a", 5);
      i0.ɵɵpipe(9, "sanitize");
      i0.ɵɵelement(10, "img", 7);
      i0.ɵɵelementStart(11, "span");
      i0.ɵɵi18n(12, 1);
      i0.ɵɵelementEnd()();
      i0.ɵɵelementStart(13, "a", 5);
      i0.ɵɵpipe(14, "safe");
      i0.ɵɵelementStart(15, "app-icon", 8);
      i0.ɵɵtext(16, "download");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(17, "span");
      i0.ɵɵi18n(18, 2);
      i0.ɵɵelementEnd()()();
      i0.ɵɵelementStart(19, "button", 9)(20, "app-icon");
      i0.ɵɵtext(21, "close");
      i0.ɵɵelementEnd()();
    }
    if (rf & 2) {
      i0.ɵɵadvance(3);
      i0.ɵɵproperty("href", i0.ɵɵpipeBind2(4, 3, ctx.outlook_link, "url"), i0.ɵɵsanitizeUrl);
      i0.ɵɵadvance(5);
      i0.ɵɵproperty("href", i0.ɵɵpipeBind2(9, 6, ctx.google_link, "url"), i0.ɵɵsanitizeUrl);
      i0.ɵɵadvance(5);
      i0.ɵɵproperty("href", i0.ɵɵpipeBind2(14, 9, ctx.ical_link, "url"), i0.ɵɵsanitizeUrl);
    }
  },
  dependencies: [i2.MatDialogClose, i3.IconComponent, i4.MatRipple, i5.SafePipe, i6.SanitizePipe],
  styles: ["[_nghost-%COMP%] {\n                position: relative;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJvb2tpbmctbGluay1tb2RhbC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLGtCQUFrQjtZQUN0QiIsImZpbGUiOiJib29raW5nLWxpbmstbW9kYWwuY29tcG9uZW50LnRzIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICA6aG9zdCB7XG4gICAgICAgICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgICAgICAgfVxuICAgICAgICAiXX0= */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvYm9va2luZ3Mvc3JjL2xpYi9ib29raW5nLWxpbmstbW9kYWwuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxrQkFBa0I7WUFDdEI7O0FBRVosd1lBQXdZIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICA6aG9zdCB7XG4gICAgICAgICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgICAgICAgfVxuICAgICAgICAiXSwic291cmNlUm9vdCI6IiJ9 */"]
});
exports.BookingLinkModalComponent = BookingLinkModalComponent;

/***/ }),

/***/ 53857:
/*!************************************************!*\
  !*** ./libs/bookings/src/lib/booking.class.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _objectSpread = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/objectSpread2.js */ 34092)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.Booking = exports.WeekOfMonth = exports.DAYS_OF_WEEK_INDEX = exports.RecurrenceDays = void 0;
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var date_fns_1 = __webpack_require__(/*! date-fns */ 25773);
var asset_request_class_1 = __webpack_require__(/*! libs/assets/src/lib/asset-request.class */ 33747);
var IGNORE_EXT_KEYS = ['user', 'booked_by', 'resources', 'assets', 'members'];
var RecurrenceDays;
(function (RecurrenceDays) {
  RecurrenceDays[RecurrenceDays["SUNDAY"] = 64] = "SUNDAY";
  RecurrenceDays[RecurrenceDays["MONDAY"] = 32] = "MONDAY";
  RecurrenceDays[RecurrenceDays["TUESDAY"] = 16] = "TUESDAY";
  RecurrenceDays[RecurrenceDays["WEDNESDAY"] = 8] = "WEDNESDAY";
  RecurrenceDays[RecurrenceDays["THURSDAY"] = 4] = "THURSDAY";
  RecurrenceDays[RecurrenceDays["FRIDAY"] = 2] = "FRIDAY";
  RecurrenceDays[RecurrenceDays["SATURDAY"] = 1] = "SATURDAY";
})(RecurrenceDays || (exports.RecurrenceDays = RecurrenceDays = {}));
exports.DAYS_OF_WEEK_INDEX = [RecurrenceDays.SUNDAY, RecurrenceDays.MONDAY, RecurrenceDays.TUESDAY, RecurrenceDays.WEDNESDAY, RecurrenceDays.THURSDAY, RecurrenceDays.FRIDAY, RecurrenceDays.SATURDAY];
var WeekOfMonth;
(function (WeekOfMonth) {
  WeekOfMonth[WeekOfMonth["First"] = 1] = "First";
  WeekOfMonth[WeekOfMonth["Second"] = 2] = "Second";
  WeekOfMonth[WeekOfMonth["Third"] = 3] = "Third";
  WeekOfMonth[WeekOfMonth["Fourth"] = 4] = "Fourth";
  WeekOfMonth[WeekOfMonth["Fifth"] = 5] = "Fifth";
  WeekOfMonth[WeekOfMonth["Last"] = -1] = "Last";
  WeekOfMonth[WeekOfMonth["SecondLast"] = -2] = "SecondLast";
  WeekOfMonth[WeekOfMonth["ThirdLast"] = -3] = "ThirdLast";
  WeekOfMonth[WeekOfMonth["FourthLast"] = -4] = "FourthLast";
  WeekOfMonth[WeekOfMonth["FifthLast"] = -5] = "FifthLast";
})(WeekOfMonth || (exports.WeekOfMonth = WeekOfMonth = {}));
/** General purpose booking class */
var Booking = /*#__PURE__*/function () {
  function Booking() {
    var _data$extension_data,
      _data$title,
      _data$extension_data2,
      _data$extension_data3,
      _this = this;
    var data = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    _classCallCheck(this, Booking);
    this._valid_asset_cache = [];
    this._valid_cache_expiry = 0;
    this.id = data.id || '';
    this.parent_id = data.parent_id || '';
    this.asset_id = data.asset_id || '';
    this.asset_ids = data.asset_ids || [data.asset_id].filter(function (_) {
      return _;
    });
    this.asset_name = data.asset_name || ((_data$extension_data = data.extension_data) === null || _data$extension_data === void 0 ? void 0 : _data$extension_data.asset_name) || data.description || data.asset_id || '';
    this.zones = data.zones || [];
    this.booking_start = Math.floor(data.date / 1000) || data.booking_start || (0, date_fns_1.getUnixTime)((0, date_fns_1.roundToNearestMinutes)((0, date_fns_1.addMinutes)(Date.now(), 5), {
      nearestTo: 5
    }));
    this.booking_end = Math.floor(data.date / 1000) + data.duration * 60 || data.booking_end || (0, date_fns_1.getUnixTime)((0, date_fns_1.addMinutes)(this.booking_start * 1000, data.duration || 60));
    this.booking_type = data.booking_type || ' ';
    this.type = data.type || data.booking_type || 'booking';
    this.date = data.date || this.booking_start * 1000 || Date.now();
    this.duration = data.duration || Math.abs((0, date_fns_1.differenceInMinutes)(this.booking_start * 1000, this.booking_end * 1000)) || 60;
    this.date_end = this.booking_end * 1000 || this.date + this.duration * 60 * 1000;
    this.timezone = data.timezone || Intl.DateTimeFormat().resolvedOptions().timeZone;
    this.user_email = data.user_email || '';
    this.user_id = data.user_id || '';
    this.user_name = data.user_name || '';
    this.title = (_data$title = data.title) !== null && _data$title !== void 0 ? _data$title : this.booking_type ? "".concat((0, common_1.capitalizeFirstLetter)(this.booking_type), " Booking").trim() : '';
    this.description = data.description || '';
    this.checked_in = !!data.checked_in;
    this.rejected = !!data.rejected;
    this.approved = !!data.approved;
    this.deleted = !!data.deleted;
    this.booked_by_id = data.booked_by_id || '';
    this.booked_by_name = data.booked_by_name || '';
    this.booked_by_email = data.booked_by_email || '';
    this.approver_id = data.approver_id || '';
    this.approver_email = data.approver_email || '';
    this.approver_name = data.approver_name || '';
    this.extension_data = data.extension_data || {};
    this.access = !!((_data$extension_data2 = data.extension_data) !== null && _data$extension_data2 !== void 0 && _data$extension_data2.access);
    this.event_id = data.event_id;
    this.permission = (data.permission || 'PRIVATE').toUpperCase();
    this.attendees = data.attendees || data.guests || data.members || [];
    this.tags = data.tags || ((_data$extension_data3 = data.extension_data) === null || _data$extension_data3 === void 0 ? void 0 : _data$extension_data3.tags) || [];
    this.images = data.images || [];
    this.all_day = data.all_day || this.duration >= 24 * 60;
    this.induction = data.induction || undefined;
    if (this.all_day) {
      this.date = (0, date_fns_1.startOfDay)(this.date).getTime();
      this.duration = Math.max(24 * 60 - 1, this.duration - (this.duration % 24 * 60 === 0 ? 1 : 0));
      this.date_end = (0, date_fns_1.endOfDay)((0, date_fns_1.addMinutes)(this.date, this.duration - 1).valueOf()).getTime();
    }
    this.checked_out_at = data.checked_out_at;
    this.checked_in_at = data.checked_in_at;
    this.linked_event = data.linked_event || null;
    this.linked_bookings = data.linked_bookings || [];
    this.images = data.images || [];
    this.status = this.checked_out_at > 0 ? 'ended' : this.rejected || this.deleted ? 'declined' : this.approved ? 'approved' : 'tentative';
    this.process_state = data.process_state || 'pending';
    this.recurrence_type = data.recurrence_type || 'none';
    this.recurrence_days = data.recurrence_days;
    this.recurrence_nth_of_month = data.recurrence_nth_of_month;
    this.recurrence_interval = data.recurrence_interval;
    this.recurrence_end = data.recurrence_end;
    this.instance = data.instance;
    for (var key in data) {
      if (!(key in this) && !IGNORE_EXT_KEYS.includes(key) && data[key]) {
        this.extension_data[key] = data[key] || this.extension_data[key];
      }
    }
    this.extension_data.assets = (this.extension_data.assets || []).map(function (i) {
      return new asset_request_class_1.AssetRequest(_objectSpread(_objectSpread({}, i), {}, {
        event: _this,
        date: _this.date
      }));
    });
    this.extension_data.tags = data.tags || [];
    if (this.extension_data.request) {
      this.extension_data.request = new asset_request_class_1.AssetRequest(_objectSpread(_objectSpread({}, this.extension_data.request), {}, {
        event: this,
        date: this.date
      }));
    }
  }
  return _createClass(Booking, [{
    key: "group",
    get: function get() {
      return this.extension_data.group || '';
    }
  }, {
    key: "is_all_day",
    get: function get() {
      return this.all_day || this.duration >= 12 * 60;
    }
  }, {
    key: "valid_assets",
    get: function get() {
      var _this2 = this;
      if (this._valid_cache_expiry > Date.now() && this._valid_asset_cache.length) {
        return this._valid_asset_cache;
      }
      var list = this.linked_bookings;
      this._valid_asset_cache = (this.extension_data.assets || []).map(function (request) {
        return new asset_request_class_1.AssetRequest(_objectSpread(_objectSpread({}, request), {}, {
          event: _this2
        }));
      }).filter(function (request) {
        return request.deliver_at < _this2.date_end;
      }).map(function (request) {
        var booking = list.find(function (_) {
          return _.extension_data.request_id === request.id;
        });
        if (booking) {
          request.state = booking.approved ? 'approved' : booking.rejected ? 'rejected' : 'pending';
        }
        return request;
      });
      this._valid_cache_expiry = (0, date_fns_1.addMinutes)(Date.now(), 5).valueOf();
      return this._valid_asset_cache;
    }
  }, {
    key: "toJSON",
    value: function toJSON() {
      var data = _objectSpread({}, this);
      if (!this.id) delete data.id;
      data.extension_data.assets = data.extension_data.assets.map(function (i) {
        return new asset_request_class_1.AssetRequest(_objectSpread(_objectSpread({}, i), {}, {
          event: null
        }));
      });
      if (data.extension_data.request) {
        data.extension_data.request = new asset_request_class_1.AssetRequest(_objectSpread(_objectSpread({}, data.extension_data.request), {}, {
          event: null
        }));
      }
      if (!data.parent_id) delete data.parent_id;
      data.zones = data.zones.filter(function (_) {
        return _;
      });
      delete data.date;
      delete data.duration;
      (0, common_1.removeEmptyFields)(data);
      return data;
    }
  }, {
    key: "location",
    get: function get() {
      var _this$extension_data;
      return ((_this$extension_data = this.extension_data) === null || _this$extension_data === void 0 ? void 0 : _this$extension_data.location) || this.description;
    }
    /** Whether the booking occurs today */
  }, {
    key: "is_today",
    get: function get() {
      return (0, date_fns_1.isSameDay)(this.date, new Date());
    }
    /** Whether booking is done */
  }, {
    key: "is_done",
    get: function get() {
      var start = new Date();
      var end = this.all_day ? (0, date_fns_1.addHours)(this.date, 24) : (0, date_fns_1.addMinutes)(this.date, this.duration);
      var checked_out = (this.checked_out_at || this.extension_data.checked_out_at || 0) * 1000;
      var end_time = end.getTime();
      if (checked_out && Date.now() > checked_out) return true;
      return (0, date_fns_1.isAfter)(start, new Date(end_time));
    }
    /** Status of the booking */
  }, {
    key: "state",
    get: function get() {
      var now = new Date();
      var date = this.date;
      if ((0, date_fns_1.isBefore)(now, (0, date_fns_1.add)(date, {
        minutes: -15
      }))) return 'future';
      if ((0, date_fns_1.isBefore)(now, date)) return 'upcoming';
      if ((0, date_fns_1.isBefore)(now, (0, date_fns_1.add)(date, {
        minutes: 15
      }))) return 'started';
      if ((0, date_fns_1.isBefore)(now, (0, date_fns_1.add)(date, {
        minutes: this.duration
      }))) return 'in_progress';
      return 'done';
    }
  }]);
}();
exports.Booking = Booking;

/***/ }),

/***/ 39522:
/*!****************************************************!*\
  !*** ./libs/bookings/src/lib/booking.utilities.ts ***!
  \****************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _regeneratorRuntime = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/regeneratorRuntime.js */ 8698)["default"]);
var _createForOfIteratorHelper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createForOfIteratorHelper.js */ 36350)["default"]);
var _objectSpread = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/objectSpread2.js */ 34092)["default"]);
var _asyncToGenerator = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/asyncToGenerator.js */ 95386)["default"]);
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.generateBookingForm = generateBookingForm;
exports.findNearbyFeature = findNearbyFeature;
exports.newBookingFromCalendarEvent = newBookingFromCalendarEvent;
var forms_1 = __webpack_require__(/*! @angular/forms */ 34456);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var validators_1 = __webpack_require__(/*! libs/events/src/lib/validators */ 90690);
var svg_viewer_1 = __webpack_require__(/*! @placeos/svg-viewer */ 50304);
var booking_class_1 = __webpack_require__(/*! ./booking.class */ 53857);
var date_fns_1 = __webpack_require__(/*! date-fns */ 25773);
function setBookingAsset(form, resource) {
  var _resource$zone, _resource$zone2;
  if (!resource) return form.patchValue({
    asset_id: undefined
  });
  form.patchValue({
    asset_id: resource.id,
    asset_name: resource.name,
    map_id: resource.map_id || resource.id,
    description: resource.name,
    zones: resource.zone ? [(_resource$zone = resource.zone) === null || _resource$zone === void 0 ? void 0 : _resource$zone.parent_id, (_resource$zone2 = resource.zone) === null || _resource$zone2 === void 0 ? void 0 : _resource$zone2.id] : [],
    booking_asset: resource
  }, {
    emitEvent: false
  });
}
function generateBookingForm() {
  var _booking$all_day, _booking$extension_da, _booking$extension_da2, _booking$extension_da3, _booking$extension_da4, _booking$extension_da5;
  var booking = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : new booking_class_1.Booking();
  var form = new forms_1.FormGroup({
    id: new forms_1.FormControl(booking.id || ''),
    parent_id: new forms_1.FormControl(booking.parent_id || ''),
    event_id: new forms_1.FormControl(booking.event_id || ''),
    ical_uid: new forms_1.FormControl(booking.extension_data.ical_uid || ''),
    date: new forms_1.FormControl(booking.date, [forms_1.Validators.required]),
    date_end: new forms_1.FormControl(booking.date_end),
    all_day: new forms_1.FormControl((_booking$all_day = booking.all_day) !== null && _booking$all_day !== void 0 ? _booking$all_day : false),
    name: new forms_1.FormControl(booking.extension_data.name || booking.asset_name || ''),
    duration: new forms_1.FormControl(booking.duration, [validators_1.endInFuture]),
    booking_type: new forms_1.FormControl(booking.booking_type),
    zones: new forms_1.FormControl(booking.zones),
    title: new forms_1.FormControl(booking.title),
    description: new forms_1.FormControl(booking.description),
    booking_asset: new forms_1.FormControl(null),
    resources: new forms_1.FormControl([]),
    company: new forms_1.FormControl(''),
    asset_id: new forms_1.FormControl(booking.asset_id, [forms_1.Validators.required]),
    asset_name: new forms_1.FormControl(booking.description),
    assets: new forms_1.FormControl(((_booking$extension_da = booking.extension_data) === null || _booking$extension_da === void 0 ? void 0 : _booking$extension_da.assets) || []),
    attendees: new forms_1.FormControl(booking.attendees || []),
    map_id: new forms_1.FormControl((_booking$extension_da2 = booking.extension_data) === null || _booking$extension_da2 === void 0 ? void 0 : _booking$extension_da2.map_id),
    featured: new forms_1.FormControl(((_booking$extension_da3 = booking.extension_data) === null || _booking$extension_da3 === void 0 ? void 0 : _booking$extension_da3.featured) || false),
    user: new forms_1.FormControl((0, common_1.currentUser)()),
    user_id: new forms_1.FormControl(booking.user_id),
    group: new forms_1.FormControl(booking.group),
    user_email: new forms_1.FormControl(booking.user_email),
    user_name: new forms_1.FormControl(booking.user_name),
    timezone: new forms_1.FormControl(booking.timezone || ''),
    booked_by: new forms_1.FormControl((0, common_1.currentUser)()),
    booked_by_id: new forms_1.FormControl(booking.booked_by_id),
    booked_by_email: new forms_1.FormControl(booking.booked_by_email),
    secondary_resource: new forms_1.FormControl(((_booking$extension_da4 = booking.extension_data) === null || _booking$extension_da4 === void 0 ? void 0 : _booking$extension_da4.other_asset_type) || ((_booking$extension_da5 = booking.extension_data) === null || _booking$extension_da5 === void 0 ? void 0 : _booking$extension_da5.secondary_resource)),
    location: new forms_1.FormControl(booking.extension_data.location || ''),
    attendance_type: new forms_1.FormControl(booking.extension_data.attendance_type || 'ANY'),
    phone: new forms_1.FormControl(booking.extension_data.phone || ''),
    permission: new forms_1.FormControl(booking.permission || 'PRIVATE'),
    images: new forms_1.FormControl(booking.images || []),
    tags: new forms_1.FormControl(booking.tags || []),
    plate_number: new forms_1.FormControl(booking.extension_data.plate_number || ''),
    recurrence_type: new forms_1.FormControl(booking.recurrence_type || 'none'),
    recurrence_days: new forms_1.FormControl(booking.recurrence_days),
    recurrence_nth_of_month: new forms_1.FormControl(booking.recurrence_nth_of_month),
    recurrence_interval: new forms_1.FormControl(booking.recurrence_interval),
    recurrence_end: new forms_1.FormControl(booking.recurrence_end),
    notes: new forms_1.FormControl(booking.extension_data.notes || ''),
    update_master: new forms_1.FormControl(false),
    self_registered: new forms_1.FormControl(false)
  });
  form.valueChanges.subscribe(function (v) {
    if (form.getRawValue().date < Date.now() && form.value.id) {
      var _form$get;
      (_form$get = form.get('date')) === null || _form$get === void 0 || _form$get.disable({
        emitEvent: false
      });
    } else {
      var _form$get2;
      (_form$get2 = form.get('date')) === null || _form$get2 === void 0 || _form$get2.enable({
        emitEvent: false
      });
    }
  });
  form.controls.user.valueChanges.subscribe(function (user) {
    if (!user) return;
    form.patchValue({
      user: user,
      user_id: user === null || user === void 0 ? void 0 : user.id,
      user_email: user === null || user === void 0 ? void 0 : user.email,
      user_name: user === null || user === void 0 ? void 0 : user.name
    }, {
      emitEvent: false
    });
  });
  common_1.current_user.subscribe(function (user) {
    if (!user) return;
    form.patchValue({
      booked_by: user,
      booked_by_id: user === null || user === void 0 ? void 0 : user.id,
      booked_by_email: user === null || user === void 0 ? void 0 : user.email,
      name: user === null || user === void 0 ? void 0 : user.name
    }, {
      emitEvent: false
    });
  });
  form.controls.resources.valueChanges.subscribe(function (resources) {
    return setBookingAsset(form, (resources || [])[0]);
  });
  form.controls.duration.valueChanges.subscribe(function (duration) {
    form.patchValue({
      date_end: (0, date_fns_1.roundToNearestMinutes)((0, date_fns_1.addMinutes)(form.getRawValue().date, duration), {
        nearestTo: 5,
        roundingMethod: 'ceil'
      }).valueOf()
    }, {
      emitEvent: false
    });
  });
  form.controls.date_end.valueChanges.subscribe(function (date) {
    if (date < (0, date_fns_1.addMinutes)(form.getRawValue().date, 30).valueOf()) {
      form.patchValue({
        date_end: (0, date_fns_1.roundToNearestMinutes)((0, date_fns_1.addMinutes)(form.getRawValue().date, 30), {
          nearestTo: 5,
          roundingMethod: 'ceil'
        }).valueOf(),
        duration: 30
      }, {
        emitEvent: false
      });
    } else {
      form.patchValue({
        duration: (0, date_fns_1.differenceInMinutes)(date, form.getRawValue().date)
      }, {
        emitEvent: false
      });
    }
  });
  form.controls.date.valueChanges.subscribe(function (date) {
    form.patchValue({
      date_end: (0, date_fns_1.roundToNearestMinutes)((0, date_fns_1.addMinutes)(date, form.value.duration), {
        nearestTo: 5,
        roundingMethod: 'ceil'
      }).valueOf()
    }, {
      emitEvent: false
    });
    if (date < Date.now() && !form.value.id) {
      form.patchValue({
        date: (0, date_fns_1.roundToNearestMinutes)(Date.now(), {
          nearestTo: 5,
          roundingMethod: 'ceil'
        }).valueOf()
      }, {
        emitEvent: false
      });
    }
  });
  if (booking.state === 'started') form.get('date').disable();
  return form;
}
function findNearbyFeature(_x, _x2) {
  return _findNearbyFeature.apply(this, arguments);
}
function _findNearbyFeature() {
  _findNearbyFeature = _asyncToGenerator(function (map_url, centered_at) {
    var desk_ids = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];
    return /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
      var element, id, viewer, point, dist, closest, _iterator, _step, desk, _ref, x, y, d;
      return _regeneratorRuntime().wrap(function _callee$(_context) {
        while (1) switch (_context.prev = _context.next) {
          case 0:
            element = document.createElement('div');
            element.style.position = 'absolute';
            element.style.top = '-9999px';
            element.style.width = '1000px';
            element.style.height = '1000px';
            document.body.appendChild(element);
            _context.next = 8;
            return (0, svg_viewer_1.createViewer)({
              url: map_url,
              element: element
            });
          case 8:
            id = _context.sent;
            viewer = (0, svg_viewer_1.getViewer)(id);
            point = (typeof centered_at === 'string' ? viewer.mappings[centered_at] : centered_at) || {
              x: 0.5,
              y: 0.5
            };
            dist = 10;
            closest = '';
            _iterator = _createForOfIteratorHelper(desk_ids);
            try {
              for (_iterator.s(); !(_step = _iterator.n()).done;) {
                desk = _step.value;
                _ref = viewer.mappings[desk] || {
                  x: 2,
                  y: 2
                }, x = _ref.x, y = _ref.y;
                d = Math.sqrt((x - point.x) * (x - point.x) + (y - point.y) * (y - point.y));
                if (d < dist) {
                  dist = d;
                  closest = desk;
                }
              }
            } catch (err) {
              _iterator.e(err);
            } finally {
              _iterator.f();
            }
            document.body.removeChild(element);
            (0, svg_viewer_1.removeViewer)(id);
            return _context.abrupt("return", closest);
          case 18:
          case "end":
            return _context.stop();
        }
      }, _callee);
    })();
  });
  return _findNearbyFeature.apply(this, arguments);
}
function newBookingFromCalendarEvent(event) {
  var _event$system, _event$system2, _event$system3;
  return new booking_class_1.Booking({
    id: event.id,
    user_email: event.host,
    asset_id: (_event$system = event.system) === null || _event$system === void 0 ? void 0 : _event$system.id,
    asset_name: ((_event$system2 = event.system) === null || _event$system2 === void 0 ? void 0 : _event$system2.display_name) || ((_event$system3 = event.system) === null || _event$system3 === void 0 ? void 0 : _event$system3.name),
    booking_type: 'room',
    approved: event.status === 'approved',
    extension_data: _objectSpread({}, event)
  });
}

/***/ }),

/***/ 18026:
/*!**********************************************!*\
  !*** ./libs/bookings/src/lib/bookings.fn.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _regeneratorRuntime = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/regeneratorRuntime.js */ 8698)["default"]);
var _toConsumableArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/toConsumableArray.js */ 86033)["default"]);
var _asyncToGenerator = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/asyncToGenerator.js */ 95386)["default"]);
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.saveBooking = void 0;
exports.queryBookings = queryBookings;
exports.bookedResourceList = bookedResourceList;
exports.queryPagedBookings = queryPagedBookings;
exports.queryAllBookings = queryAllBookings;
exports.showBooking = showBooking;
exports.createBooking = createBooking;
exports.updateBooking = updateBooking;
exports.updateBookingInductionStatus = updateBookingInductionStatus;
exports.updateBookingInstance = updateBookingInstance;
exports.removeBooking = removeBooking;
exports.removeBookingInstance = removeBookingInstance;
exports.approveBooking = approveBooking;
exports.approveBookingInstance = approveBookingInstance;
exports.rejectBooking = rejectBooking;
exports.rejectBookingInstance = rejectBookingInstance;
exports.setBookingState = setBookingState;
exports.queryBookingGuests = queryBookingGuests;
exports.checkinBookingGuest = checkinBookingGuest;
exports.bookingAddGuest = bookingAddGuest;
exports.bookingRemoveGuest = bookingRemoveGuest;
exports.checkinBooking = checkinBooking;
exports.checkinBookingInstance = checkinBookingInstance;
exports.checkinBookingAttendee = checkinBookingAttendee;
exports.queryResourceAvailability = queryResourceAvailability;
exports.isResourceAvailable = isResourceAvailable;
exports.createBookingsForEvent = createBookingsForEvent;
var ts_client_1 = __webpack_require__(/*! @placeos/ts-client */ 35713);
var rxjs_1 = __webpack_require__(/*! rxjs */ 15681);
var operators_1 = __webpack_require__(/*! rxjs/operators */ 97303);
var api_1 = __webpack_require__(/*! libs/common/src/lib/api */ 38385);
var booking_class_1 = __webpack_require__(/*! ./booking.class */ 53857);
var user_class_1 = __webpack_require__(/*! libs/users/src/lib/user.class */ 93693);
var date_fns_1 = __webpack_require__(/*! date-fns */ 25773);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var BOOKINGS_ENDPOINT = "/api/staff/v1/bookings";
/**
 * Get a single page of bookings
 * @param q Parameters to pass to the API request
 */
function queryBookings(q) {
  var query = (0, api_1.toQueryString)(q);
  return (0, ts_client_1.get)("".concat(BOOKINGS_ENDPOINT).concat(query ? '?' + query : '')).pipe((0, operators_1.map)(function (list) {
    return list.map(function (item) {
      return new booking_class_1.Booking(item);
    });
  }), (0, operators_1.catchError)(function (_) {
    return (0, rxjs_1.of)([]);
  }));
}
/**
 * List resources that are booked within the given parameters
 * @param q Parameters to pass to the API request
 */
function bookedResourceList(q) {
  var query = (0, api_1.toQueryString)(q);
  return (0, ts_client_1.get)("".concat(BOOKINGS_ENDPOINT, "/booked").concat(query ? '?' + query : '')).pipe((0, operators_1.map)(function (list) {
    return list;
  }), (0, operators_1.catchError)(function (_) {
    return (0, rxjs_1.of)([]);
  }));
}
/**
 * List bookings with link to next page of bookings
 * @param q Parameters to pass to the API request
 */
function queryPagedBookings(q) {
  return (0, ts_client_1.query)({
    query_params: q,
    fn: function fn(item) {
      return new booking_class_1.Booking(item);
    },
    endpoint: BOOKINGS_ENDPOINT,
    path: ''
  });
}
/**
 * List all bookings
 * @param q Parameters to pass to the API request
 */
function queryAllBookings(q) {
  return (0, ts_client_1.query)({
    query_params: q,
    fn: function fn(item) {
      return new booking_class_1.Booking(item);
    },
    endpoint: BOOKINGS_ENDPOINT,
    path: ''
  }).pipe((0, operators_1.switchMap)( /*#__PURE__*/function () {
    var _ref = _asyncToGenerator(function (_ref2) {
      var data = _ref2.data,
        next = _ref2.next;
      return /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
        var list, resp;
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              list = _toConsumableArray(data);
            case 1:
              if (!next) {
                _context.next = 10;
                break;
              }
              _context.next = 4;
              return next().toPromise();
            case 4:
              resp = _context.sent;
              data = resp.data;
              next = resp.next;
              list = [].concat(_toConsumableArray(list), _toConsumableArray(data));
              _context.next = 1;
              break;
            case 10:
              return _context.abrupt("return", list);
            case 11:
            case "end":
              return _context.stop();
          }
        }, _callee);
      })();
    });
    return function (_x) {
      return _ref.apply(this, arguments);
    };
  }()), (0, operators_1.catchError)(function (_) {
    return (0, rxjs_1.of)([]);
  }));
}
/**
 * Get booking details
 * @param id ID of the booking to grab
 * @param q Parameters to pass to the API request
 */
function showBooking(id) {
  return (0, ts_client_1.get)("".concat(BOOKINGS_ENDPOINT, "/").concat(encodeURIComponent(id))).pipe((0, operators_1.map)(function (item) {
    return new booking_class_1.Booking(item);
  }));
}
/**
 * Create new booking and add it to the database
 * @param data New booking fields
 */
function createBooking(data, q) {
  var query = (0, api_1.toQueryString)(q);
  return (0, ts_client_1.post)("".concat(BOOKINGS_ENDPOINT).concat(query ? '?' + query : ''), data).pipe((0, operators_1.map)(function (item) {
    return new booking_class_1.Booking(item);
  }));
}
/**
 * Update an existing booking
 * @param id ID of the booking to update
 * @param data New values for booking fields
 * @param method HTTP verb to use with API request
 */
function updateBooking(id, data) {
  var method = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'patch';
  return (method === 'patch' ? ts_client_1.patch : ts_client_1.put)("".concat(BOOKINGS_ENDPOINT, "/").concat(encodeURIComponent(id)), data).pipe((0, operators_1.map)(function (item) {
    return new booking_class_1.Booking(item);
  }));
}
/**
 * Update the induction status of an existing booking
 * @param id ID of the booking to update
 * @param status New induction status of the booking
 */
function updateBookingInductionStatus(id, status) {
  return (0, ts_client_1.post)("".concat(BOOKINGS_ENDPOINT, "/").concat(encodeURIComponent(id), "/update_induction?induction=").concat(encodeURIComponent(status)), {}).pipe((0, operators_1.map)(function (item) {
    return new booking_class_1.Booking(item);
  }));
}
/**
 * Update instance of an existing booking series
 * @param id ID of the booking to update
 * @param start_time Unix seconds of the start time of the booking
 * @param data New values for booking fields
 * @param method HTTP verb to use with API request
 */
function updateBookingInstance(id, start_time, data) {
  var method = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 'patch';
  return (method === 'patch' ? ts_client_1.patch : ts_client_1.put)("".concat(BOOKINGS_ENDPOINT, "/").concat(encodeURIComponent(id), "/instance/").concat(start_time), data).pipe((0, operators_1.map)(function (item) {
    return new booking_class_1.Booking(item);
  }));
}
/**
 * Save changes to or create a booking
 * @param data State of the booking
 * @param q Parameters to pass to the API request
 */
var saveBooking = function saveBooking(data, q) {
  var id = data.id;
  delete data.id;
  var instance = q === null || q === void 0 ? void 0 : q.instance;
  if (q) delete q.instance;
  return id ? instance ? updateBookingInstance(id, data.instance || data.booking_start, data) : updateBooking(id, data) : createBooking(data, q);
};
exports.saveBooking = saveBooking;
/**
 * Remove booking from the database
 * @param id ID of the booking to remove
 */
function removeBooking(id) {
  var q = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
  if (q.instance) {
    return removeBookingInstance(id, q.start_time);
  }
  return (0, ts_client_1.del)("".concat(BOOKINGS_ENDPOINT, "/").concat(encodeURIComponent(id)), {
    response_type: 'void'
  });
}
/**
 * Remove instance of an existing booking series
 * @param id ID of the booking to update
 * @param start_time Unix seconds of the start time of the booking
 */
function removeBookingInstance(id, start_time) {
  return (0, ts_client_1.del)("".concat(BOOKINGS_ENDPOINT, "/").concat(encodeURIComponent(id), "/instance/").concat(start_time), {
    response_type: 'void'
  });
}
/**
 * Set the approval state of the booking to `approved`
 * @param id ID of the booking to approve
 * @param system_id Associated system to approve
 */
function approveBooking(id) {
  return (0, ts_client_1.post)("".concat(BOOKINGS_ENDPOINT, "/").concat(encodeURIComponent(id), "/approve"), '').pipe((0, operators_1.map)(function (item) {
    return new booking_class_1.Booking(item);
  }));
}
/**
 * Set the approval state of the booking instance to `approved`
 * @param id ID of the booking to reject
 * @param start_time Start time of the booking instance
 */
function approveBookingInstance(id, start_time) {
  return (0, ts_client_1.post)("".concat(BOOKINGS_ENDPOINT, "/").concat(encodeURIComponent(id), "/approve"), '').pipe((0, operators_1.map)(function (item) {
    return new booking_class_1.Booking(item);
  }));
}
/**
 * Set the approval state of the booking to `rejected`
 * @param id ID of the booking to reject
 * @param system_id Associated system to reject
 */
function rejectBooking(id) {
  return (0, ts_client_1.post)("".concat(BOOKINGS_ENDPOINT, "/").concat(encodeURIComponent(id), "/reject"), '').pipe((0, operators_1.map)(function (item) {
    return new booking_class_1.Booking(item);
  }));
}
/**
 * Set the approval state of the booking instance to `rejected`
 * @param id ID of the booking to reject
 * @param start_time Start time of the booking instance
 */
function rejectBookingInstance(id, start_time) {
  return (0, ts_client_1.post)("".concat(BOOKINGS_ENDPOINT, "/").concat(encodeURIComponent(id), "/reject"), '').pipe((0, operators_1.map)(function (item) {
    return new booking_class_1.Booking(item);
  }));
}
function setBookingState(id, state, utm_source) {
  var query = (0, api_1.toQueryString)({
    state: state,
    utm_source: utm_source
  });
  return (0, ts_client_1.post)("".concat(BOOKINGS_ENDPOINT, "/").concat(encodeURIComponent(id), "/update_state").concat(query ? '?' + query : ''), {}).pipe((0, operators_1.map)(function (item) {
    return new booking_class_1.Booking(item);
  }));
}
/**
 * List the guests in a booking
 * @param id ID of the booking to reject
 */
function queryBookingGuests(id) {
  return (0, ts_client_1.post)("".concat(BOOKINGS_ENDPOINT, "/").concat(encodeURIComponent(id), "/guests"), '').pipe((0, operators_1.map)(function (item) {
    return new user_class_1.GuestUser(item);
  }));
}
/**
 * Set the checkin state of a guest in a booking
 * @param id ID of the booking to reject
 * @param guest_id ID of the guest to check in
 */
function checkinBookingGuest(id, guest_id) {
  var state = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;
  return (0, ts_client_1.post)("".concat(BOOKINGS_ENDPOINT, "/").concat(encodeURIComponent(id), "/guests/").concat(encodeURIComponent(guest_id), "/check_in?state=").concat(state), '').pipe((0, operators_1.map)(function (item) {
    return new user_class_1.GuestUser(item);
  }));
}
/**
 * Add a guest to a booking
 * @param id ID of the booking
 * @param guest Guest to add to the booking
 */
function bookingAddGuest(id, guest) {
  return (0, ts_client_1.post)("".concat(BOOKINGS_ENDPOINT, "/").concat(encodeURIComponent(id), "/attendee"), guest).pipe((0, operators_1.map)(function (item) {
    return new user_class_1.GuestUser(item);
  }));
}
/**
 * Remove an attendee from a booking
 * @param id ID of the booking
 * @param guest Guest to remove from the booking
 */
function bookingRemoveGuest(id, guest) {
  return (0, ts_client_1.del)("".concat(BOOKINGS_ENDPOINT, "/").concat(encodeURIComponent(id), "/attendee/").concat(encodeURIComponent(guest.email))).pipe((0, operators_1.map)(function (item) {
    return new user_class_1.GuestUser(item);
  }));
}
/**
 * Set the checkin state of a booking
 * @param id ID of the booking to grab
 * @param state New checkin state of the booking
 */
function checkinBooking(id, state) {
  var query = (0, api_1.toQueryString)({
    state: state
  });
  return (0, ts_client_1.post)("".concat(BOOKINGS_ENDPOINT, "/").concat(encodeURIComponent(id), "/check_in?").concat(query), '').pipe((0, operators_1.map)(function (item) {
    return new booking_class_1.Booking(item);
  }), (0, operators_1.catchError)( /*#__PURE__*/function () {
    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(e) {
      var body;
      return _regeneratorRuntime().wrap(function _callee2$(_context2) {
        while (1) switch (_context2.prev = _context2.next) {
          case 0:
            _context2.next = 2;
            return e.json();
          case 2:
            body = _context2.sent;
            throw body.error || body.message || body;
          case 4:
          case "end":
            return _context2.stop();
        }
      }, _callee2);
    }));
    return function (_x2) {
      return _ref3.apply(this, arguments);
    };
  }()));
}
/**
 * Set the checkin state of a booking instance
 * @param id ID of the booking to grab
 * @param start_time Start time of the booking instance
 * @param state New checkin state of the booking instance
 */
function checkinBookingInstance(id, start_time, state) {
  var query = (0, api_1.toQueryString)({
    state: state
  });
  return (0, ts_client_1.post)("".concat(BOOKINGS_ENDPOINT, "/").concat(encodeURIComponent(id), "/check_in/").concat(start_time, "?").concat(query), '').pipe((0, operators_1.map)(function (item) {
    return new booking_class_1.Booking(item);
  }), (0, operators_1.catchError)( /*#__PURE__*/function () {
    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3(e) {
      var body;
      return _regeneratorRuntime().wrap(function _callee3$(_context3) {
        while (1) switch (_context3.prev = _context3.next) {
          case 0:
            _context3.next = 2;
            return e.json();
          case 2:
            body = _context3.sent;
            throw body.error || body.message || body;
          case 4:
          case "end":
            return _context3.stop();
        }
      }, _callee3);
    }));
    return function (_x3) {
      return _ref4.apply(this, arguments);
    };
  }()));
}
/**
 * Set the checkin state of a booking
 * @param id ID of the booking to grab
 * @param state New checkin state of the booking
 */
function checkinBookingAttendee(id, email, state) {
  var query = (0, api_1.toQueryString)({
    state: state
  });
  return (0, ts_client_1.post)("".concat(BOOKINGS_ENDPOINT, "/").concat(encodeURIComponent(id), "/guests/").concat(encodeURIComponent(email), "/check_in?").concat(query), '').pipe((0, operators_1.map)(function (item) {
    return new user_class_1.GuestUser(item);
  }));
}
/**
 * Filter list of resources based of the bookings found in the given query
 * @param asset_id_list List of resource IDs
 * @param query Booking query
 */
function queryResourceAvailability(id_list, start, duration, ignore) {
  var type = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 'room';
  var ignore_period = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : [0, 0];
  return queryBookings({
    type: type,
    period_start: (0, date_fns_1.getUnixTime)(start),
    period_end: (0, date_fns_1.getUnixTime)((0, date_fns_1.addMinutes)(start, duration))
  }).pipe((0, operators_1.map)(function (_) {
    return id_list.map(function (id) {
      return !_.find(function (b) {
        return b.asset_id === id && (!ignore || ignore !== b.id);
      });
    });
  }));
}
function isResourceAvailable(id, start, duration, ignore) {
  var type = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 'room';
  return queryBookings({
    type: type,
    period_start: (0, date_fns_1.getUnixTime)(start),
    period_end: (0, date_fns_1.getUnixTime)((0, date_fns_1.addMinutes)(start, duration))
  }).pipe((0, operators_1.map)(function (_) {
    return _.filter(function (_) {
      return _.asset_id === id && _.id !== ignore;
    }).length === 0;
  }));
}
/**
 *
 * @param event
 * @param type
 * @param resources
 */
function createBookingsForEvent(_x4, _x5, _x6) {
  return _createBookingsForEvent.apply(this, arguments);
}
function _createBookingsForEvent() {
  _createBookingsForEvent = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4(event, type, resources) {
    var _event$system;
    var bookings, zones;
    return _regeneratorRuntime().wrap(function _callee4$(_context4) {
      while (1) switch (_context4.prev = _context4.next) {
        case 0:
          _context4.next = 2;
          return queryBookings({
            type: type,
            period_start: (0, date_fns_1.getUnixTime)(event.date),
            period_end: (0, date_fns_1.getUnixTime)((0, date_fns_1.addMinutes)(event.date, event.duration))
          }).pipe((0, operators_1.map)(function (_) {
            return _.filter(function (_) {
              return _.parent_id === event.id;
            });
          })).toPromise();
        case 2:
          bookings = _context4.sent;
          _context4.next = 5;
          return Promise.all(bookings.map(function (_) {
            return removeBooking(_.id).toPromise();
          }));
        case 5:
          _context4.next = 7;
          return Promise.all(event.linked_bookings.filter(function (_) {
            return _.booking_type === type;
          }).map(function (_) {
            return removeBooking(_.id).toPromise();
          }));
        case 7:
          zones = ((_event$system = event.system) === null || _event$system === void 0 ? void 0 : _event$system.zones) || (0, common_1.unique)((0, common_1.flatten)(event.resources.map(function (_) {
            return _.zones;
          }))) || [];
          _context4.next = 10;
          return Promise.all(resources.map(function (item) {
            var booking = bookings.find(function (_) {
              return _.asset_ids.find(function (id) {
                var _item$items;
                return (_item$items = item.items) === null || _item$items === void 0 ? void 0 : _item$items.find(function (i) {
                  return i.item_ids.includes(id);
                });
              });
            });
            return createBooking(new booking_class_1.Booking({
              type: type,
              booking_type: type,
              date: event.date,
              duration: event.duration,
              description: event.title,
              user_email: event.host,
              asset_id: item.email,
              asset_name: item.name,
              title: item.name,
              attendees: [item],
              approved: (booking === null || booking === void 0 ? void 0 : booking.approved) && !item._changed,
              rejected: (booking === null || booking === void 0 ? void 0 : booking.rejected) && !item._changed,
              extension_data: {
                parent_id: event.id,
                name: item.name,
                location_id: event.location
              },
              zones: zones
            }), {
              ical_uid: event.ical_uid,
              event_id: event.id
            }).toPromise();
          }));
        case 10:
        case "end":
          return _context4.stop();
      }
    }, _callee4);
  }));
  return _createBookingsForEvent.apply(this, arguments);
}

/***/ }),

/***/ 38742:
/*!**************************************************!*\
  !*** ./libs/bookings/src/lib/bookings.module.ts ***!
  \**************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _SharedBookingsModule;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.SharedBookingsModule = void 0;
var common_1 = __webpack_require__(/*! @angular/common */ 60316);
var forms_1 = __webpack_require__(/*! @angular/forms */ 34456);
var button_1 = __webpack_require__(/*! @angular/material/button */ 84175);
var checkbox_1 = __webpack_require__(/*! @angular/material/checkbox */ 97024);
var datepicker_1 = __webpack_require__(/*! @angular/material/datepicker */ 61977);
var dialog_1 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var form_field_1 = __webpack_require__(/*! @angular/material/form-field */ 24950);
var input_1 = __webpack_require__(/*! @angular/material/input */ 95541);
var progress_spinner_1 = __webpack_require__(/*! @angular/material/progress-spinner */ 41134);
var radio_1 = __webpack_require__(/*! @angular/material/radio */ 53804);
var components_module_1 = __webpack_require__(/*! libs/components/src/lib/components.module */ 14974);
var form_fields_module_1 = __webpack_require__(/*! libs/form-fields/src/lib/form-fields.module */ 77066);
var events_module_1 = __webpack_require__(/*! libs/events/src/lib/events.module */ 2704);
var spaces_module_1 = __webpack_require__(/*! libs/spaces/src/lib/spaces.module */ 34360);
var users_module_1 = __webpack_require__(/*! libs/users/src/lib/users.module */ 34426);
var booking_card_component_1 = __webpack_require__(/*! ./booking-card.component */ 27547);
var booking_details_modal_component_1 = __webpack_require__(/*! ./booking-details-modal.component */ 1781);
var desk_confirm_modal_component_1 = __webpack_require__(/*! ./desk-confirm-modal.component */ 3367);
var desk_questions_modal_component_1 = __webpack_require__(/*! ./desk-questions-modal.component */ 67254);
var desk_details_component_1 = __webpack_require__(/*! ./desk-select-modal/desk-details.component */ 42280);
var desk_filters_display_component_1 = __webpack_require__(/*! ./desk-select-modal/desk-filters-display.component */ 24174);
var desk_filters_component_1 = __webpack_require__(/*! ./desk-select-modal/desk-filters.component */ 4365);
var desk_list_component_1 = __webpack_require__(/*! ./desk-select-modal/desk-list.component */ 93662);
var desk_map_component_1 = __webpack_require__(/*! ./desk-select-modal/desk-map.component */ 42596);
var desk_select_modal_component_1 = __webpack_require__(/*! ./desk-select-modal/desk-select-modal.component */ 50622);
var invite_visitor_form_component_1 = __webpack_require__(/*! ./invite-visitor-form.component */ 68874);
var parking_details_component_1 = __webpack_require__(/*! ./parking-select-modal/parking-details.component */ 6724);
var parking_filters_display_component_1 = __webpack_require__(/*! ./parking-select-modal/parking-filters-display.component */ 19138);
var parking_filters_component_1 = __webpack_require__(/*! ./parking-select-modal/parking-filters.component */ 39145);
var parking_list_component_1 = __webpack_require__(/*! ./parking-select-modal/parking-list.component */ 30258);
var parking_location_pin_component_1 = __webpack_require__(/*! ./parking-select-modal/parking-location-pin.component */ 48559);
var parking_map_component_1 = __webpack_require__(/*! ./parking-select-modal/parking-map.component */ 88952);
var parking_select_modal_component_1 = __webpack_require__(/*! ./parking-select-modal/parking-select-modal.component */ 67642);
var parking_space_list_field_component_1 = __webpack_require__(/*! ./parking-space-list-field.component */ 24844);
var desk_list_field_component_1 = __webpack_require__(/*! ./desk-list-field.component */ 56416);
var booking_link_modal_component_1 = __webpack_require__(/*! ./booking-link-modal.component */ 84089);
var autocomplete_1 = __webpack_require__(/*! @angular/material/autocomplete */ 79771);
var core_1 = __webpack_require__(/*! @angular/material/core */ 74646);
var locker_grid_component_1 = __webpack_require__(/*! ./locker-grid.component */ 84854);
var tooltip_1 = __webpack_require__(/*! @angular/material/tooltip */ 80640);
var locker_select_modal_component_1 = __webpack_require__(/*! ./locker-select-modal/locker-select-modal.component */ 90482);
var locker_list_field_component_1 = __webpack_require__(/*! ./locker-list-field.component */ 71511);
var locker_filters_component_1 = __webpack_require__(/*! ./locker-select-modal/locker-filters.component */ 22657);
var locker_filters_display_component_1 = __webpack_require__(/*! ./locker-select-modal/locker-filters-display.component */ 42394);
var locker_bank_list_component_1 = __webpack_require__(/*! ./locker-select-modal/locker-bank-list.component */ 90647);
var locker_map_component_1 = __webpack_require__(/*! ./locker-select-modal/locker-map.component */ 38720);
var desk_settings_modal_component_1 = __webpack_require__(/*! ./desk-settings-modal.component */ 77904);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var COMPONENTS = [desk_questions_modal_component_1.DeskQuestionsModalComponent, desk_confirm_modal_component_1.DeskConfirmModalComponent, invite_visitor_form_component_1.InviteVisitorFormComponent, booking_details_modal_component_1.BookingDetailsModalComponent, booking_card_component_1.BookingCardComponent, booking_link_modal_component_1.BookingLinkModalComponent, parking_select_modal_component_1.ParkingSpaceSelectModalComponent, parking_filters_component_1.ParkingSpaceFiltersComponent, parking_filters_display_component_1.ParkingSpaceFiltersDisplayComponent, parking_list_component_1.ParkingSpaceListComponent, parking_location_pin_component_1.ParkingSpaceLocationPinComponent, parking_map_component_1.ParkingSpaceSelectMapComponent, parking_details_component_1.ParkingSpaceDetailsComponent, parking_space_list_field_component_1.ParkingSpaceListFieldComponent, desk_select_modal_component_1.DeskSelectModalComponent, desk_details_component_1.DeskDetailsComponent, desk_filters_component_1.DeskFiltersComponent, desk_filters_display_component_1.DeskFiltersDisplayComponent, desk_list_component_1.DeskListComponent, desk_map_component_1.DeskMapComponent, desk_list_field_component_1.DeskListFieldComponent, desk_settings_modal_component_1.DeskSettingsModalComponent, locker_grid_component_1.LockerGridComponent, locker_list_field_component_1.LockerListFieldComponent, locker_select_modal_component_1.LockerSelectModalComponent, locker_filters_component_1.LockerFiltersComponent, locker_filters_display_component_1.LockerFiltersDisplayComponent, locker_bank_list_component_1.LockerBankListComponent, locker_map_component_1.LockerMapComponent];
var SharedBookingsModule = /*#__PURE__*/_createClass(function SharedBookingsModule() {
  _classCallCheck(this, SharedBookingsModule);
});
_SharedBookingsModule = SharedBookingsModule;
_SharedBookingsModule.ɵfac = function SharedBookingsModule_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _SharedBookingsModule)();
};
_SharedBookingsModule.ɵmod = /*@__PURE__*/i0.ɵɵdefineNgModule({
  type: _SharedBookingsModule
});
_SharedBookingsModule.ɵinj = /*@__PURE__*/i0.ɵɵdefineInjector({
  providers: [forms_1.ReactiveFormsModule],
  imports: [common_1.CommonModule, forms_1.FormsModule, forms_1.ReactiveFormsModule, radio_1.MatRadioModule, input_1.MatInputModule, form_field_1.MatFormFieldModule, datepicker_1.MatDatepickerModule, button_1.MatButtonModule, dialog_1.MatDialogModule, progress_spinner_1.MatProgressSpinnerModule, checkbox_1.MatCheckboxModule, autocomplete_1.MatAutocompleteModule, form_fields_module_1.FormFieldsModule, components_module_1.ComponentsModule, core_1.MatRippleModule, tooltip_1.MatTooltipModule, spaces_module_1.SharedSpacesModule, events_module_1.SharedEventsModule, users_module_1.SharedUsersModule]
});
exports.SharedBookingsModule = SharedBookingsModule;
(function () {
  (typeof ngJitMode === "undefined" || ngJitMode) && i0.ɵɵsetNgModuleScope(SharedBookingsModule, {
    declarations: [desk_questions_modal_component_1.DeskQuestionsModalComponent, desk_confirm_modal_component_1.DeskConfirmModalComponent, invite_visitor_form_component_1.InviteVisitorFormComponent, booking_details_modal_component_1.BookingDetailsModalComponent, booking_card_component_1.BookingCardComponent, booking_link_modal_component_1.BookingLinkModalComponent, parking_select_modal_component_1.ParkingSpaceSelectModalComponent, parking_filters_component_1.ParkingSpaceFiltersComponent, parking_filters_display_component_1.ParkingSpaceFiltersDisplayComponent, parking_list_component_1.ParkingSpaceListComponent, parking_location_pin_component_1.ParkingSpaceLocationPinComponent, parking_map_component_1.ParkingSpaceSelectMapComponent, parking_details_component_1.ParkingSpaceDetailsComponent, parking_space_list_field_component_1.ParkingSpaceListFieldComponent, desk_select_modal_component_1.DeskSelectModalComponent, desk_details_component_1.DeskDetailsComponent, desk_filters_component_1.DeskFiltersComponent, desk_filters_display_component_1.DeskFiltersDisplayComponent, desk_list_component_1.DeskListComponent, desk_map_component_1.DeskMapComponent, desk_list_field_component_1.DeskListFieldComponent, desk_settings_modal_component_1.DeskSettingsModalComponent, locker_grid_component_1.LockerGridComponent, locker_list_field_component_1.LockerListFieldComponent, locker_select_modal_component_1.LockerSelectModalComponent, locker_filters_component_1.LockerFiltersComponent, locker_filters_display_component_1.LockerFiltersDisplayComponent, locker_bank_list_component_1.LockerBankListComponent, locker_map_component_1.LockerMapComponent],
    imports: [common_1.CommonModule, forms_1.FormsModule, forms_1.ReactiveFormsModule, radio_1.MatRadioModule, input_1.MatInputModule, form_field_1.MatFormFieldModule, datepicker_1.MatDatepickerModule, button_1.MatButtonModule, dialog_1.MatDialogModule, progress_spinner_1.MatProgressSpinnerModule, checkbox_1.MatCheckboxModule, autocomplete_1.MatAutocompleteModule, form_fields_module_1.FormFieldsModule, components_module_1.ComponentsModule, core_1.MatRippleModule, tooltip_1.MatTooltipModule, spaces_module_1.SharedSpacesModule, events_module_1.SharedEventsModule, users_module_1.SharedUsersModule],
    exports: [desk_questions_modal_component_1.DeskQuestionsModalComponent, desk_confirm_modal_component_1.DeskConfirmModalComponent, invite_visitor_form_component_1.InviteVisitorFormComponent, booking_details_modal_component_1.BookingDetailsModalComponent, booking_card_component_1.BookingCardComponent, booking_link_modal_component_1.BookingLinkModalComponent, parking_select_modal_component_1.ParkingSpaceSelectModalComponent, parking_filters_component_1.ParkingSpaceFiltersComponent, parking_filters_display_component_1.ParkingSpaceFiltersDisplayComponent, parking_list_component_1.ParkingSpaceListComponent, parking_location_pin_component_1.ParkingSpaceLocationPinComponent, parking_map_component_1.ParkingSpaceSelectMapComponent, parking_details_component_1.ParkingSpaceDetailsComponent, parking_space_list_field_component_1.ParkingSpaceListFieldComponent, desk_select_modal_component_1.DeskSelectModalComponent, desk_details_component_1.DeskDetailsComponent, desk_filters_component_1.DeskFiltersComponent, desk_filters_display_component_1.DeskFiltersDisplayComponent, desk_list_component_1.DeskListComponent, desk_map_component_1.DeskMapComponent, desk_list_field_component_1.DeskListFieldComponent, desk_settings_modal_component_1.DeskSettingsModalComponent, locker_grid_component_1.LockerGridComponent, locker_list_field_component_1.LockerListFieldComponent, locker_select_modal_component_1.LockerSelectModalComponent, locker_filters_component_1.LockerFiltersComponent, locker_filters_display_component_1.LockerFiltersDisplayComponent, locker_bank_list_component_1.LockerBankListComponent, locker_map_component_1.LockerMapComponent]
  });
})();

/***/ }),

/***/ 3367:
/*!***************************************************************!*\
  !*** ./libs/bookings/src/lib/desk-confirm-modal.component.ts ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _taggedTemplateLiteral = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js */ 9959)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _DeskConfirmModalComponent, _templateObject, _templateObject2, _templateObject3, _templateObject4, _templateObject5, _templateObject6;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.DeskConfirmModalComponent = void 0;
var core_1 = __webpack_require__(/*! @angular/core */ 37580);
var dialog_1 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @placeos/common */ 22797);
var i2 = __webpack_require__(/*! @angular/common */ 60316);
var i3 = __webpack_require__(/*! @angular/forms */ 34456);
var i4 = __webpack_require__(/*! @angular/material/input */ 95541);
var i5 = __webpack_require__(/*! @angular/material/form-field */ 24950);
var i6 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var i7 = __webpack_require__(/*! @angular/material/progress-spinner */ 41134);
var i8 = __webpack_require__(/*! ../../../form-fields/src/lib/date-field.component */ 19608);
var i9 = __webpack_require__(/*! ../../../form-fields/src/lib/user-search-field.component */ 18000);
var i10 = __webpack_require__(/*! @angular/material/core */ 74646);
function DeskConfirmModalComponent_button_4_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "button", 10)(1, "i", 11);
    i0.ɵɵtext(2, "close");
    i0.ɵɵelementEnd()();
  }
}
function DeskConfirmModalComponent_ng_container_5_div_2_Template(rf, ctx) {
  if (rf & 1) {
    var _r2 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 20)(1, "label");
    i0.ɵɵi18n(2, 5);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(3, "a-user-search-field", 21);
    i0.ɵɵtwoWayListener("ngModelChange", function DeskConfirmModalComponent_ng_container_5_div_2_Template_a_user_search_field_ngModelChange_3_listener($event) {
      i0.ɵɵrestoreView(_r2);
      var ctx_r2 = i0.ɵɵnextContext(2);
      i0.ɵɵtwoWayBindingSet(ctx_r2.host, $event) || (ctx_r2.host = $event);
      return i0.ɵɵresetView($event);
    });
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var ctx_r2 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance(3);
    i0.ɵɵtwoWayProperty("ngModel", ctx_r2.host);
  }
}
function DeskConfirmModalComponent_ng_container_5_div_6_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div");
    i0.ɵɵtext(1);
    i0.ɵɵpipe(2, "date");
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r2 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", i0.ɵɵpipeBind2(2, 1, ctx_r2.date, "mediumDate"), " ");
  }
}
function DeskConfirmModalComponent_ng_container_5_a_date_field_7_Template(rf, ctx) {
  if (rf & 1) {
    var _r4 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "a-date-field", 22);
    i0.ɵɵtwoWayListener("ngModelChange", function DeskConfirmModalComponent_ng_container_5_a_date_field_7_Template_a_date_field_ngModelChange_0_listener($event) {
      i0.ɵɵrestoreView(_r4);
      var ctx_r2 = i0.ɵɵnextContext(2);
      i0.ɵɵtwoWayBindingSet(ctx_r2.date, $event) || (ctx_r2.date = $event);
      return i0.ɵɵresetView($event);
    });
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r2 = i0.ɵɵnextContext(2);
    i0.ɵɵtwoWayProperty("ngModel", ctx_r2.date);
  }
}
function DeskConfirmModalComponent_ng_container_5_div_8_Template(rf, ctx) {
  if (rf & 1) {
    var _r5 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 23)(1, "label");
    i0.ɵɵi18n(2, 6);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(3, "mat-form-field", 24)(4, "input", 25);
    i0.ɵɵtwoWayListener("ngModelChange", function DeskConfirmModalComponent_ng_container_5_div_8_Template_input_ngModelChange_4_listener($event) {
      i0.ɵɵrestoreView(_r5);
      var ctx_r2 = i0.ɵɵnextContext(2);
      i0.ɵɵtwoWayBindingSet(ctx_r2.reason, $event) || (ctx_r2.reason = $event);
      return i0.ɵɵresetView($event);
    });
    i0.ɵɵelementEnd()()();
  }
  if (rf & 2) {
    var ctx_r2 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance(4);
    i0.ɵɵtwoWayProperty("ngModel", ctx_r2.reason);
  }
}
function DeskConfirmModalComponent_ng_container_5_Template(rf, ctx) {
  if (rf & 1) {
    var _r1 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵelementStart(1, "main", 12);
    i0.ɵɵtemplate(2, DeskConfirmModalComponent_ng_container_5_div_2_Template, 4, 1, "div", 13);
    i0.ɵɵelementStart(3, "div", 14)(4, "label");
    i0.ɵɵi18n(5, 2);
    i0.ɵɵelementEnd();
    i0.ɵɵtemplate(6, DeskConfirmModalComponent_ng_container_5_div_6_Template, 3, 4, "div", 15)(7, DeskConfirmModalComponent_ng_container_5_a_date_field_7_Template, 1, 1, "a-date-field", 16);
    i0.ɵɵelementEnd();
    i0.ɵɵtemplate(8, DeskConfirmModalComponent_ng_container_5_div_8_Template, 5, 1, "div", 17);
    i0.ɵɵelementStart(9, "p");
    i0.ɵɵi18n(10, 3);
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(11, "footer", 18)(12, "button", 19);
    i0.ɵɵlistener("click", function DeskConfirmModalComponent_ng_container_5_Template_button_click_12_listener() {
      i0.ɵɵrestoreView(_r1);
      var ctx_r2 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r2.confirm());
    });
    i0.ɵɵi18n(13, 4);
    i0.ɵɵelementEnd()();
    i0.ɵɵelementContainerEnd();
  }
  if (rf & 2) {
    var ctx_r2 = i0.ɵɵnextContext();
    i0.ɵɵadvance(2);
    i0.ɵɵproperty("ngIf", ctx_r2.can_set_host);
    i0.ɵɵadvance(4);
    i0.ɵɵproperty("ngIf", !ctx_r2.can_set_date);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", ctx_r2.can_set_date);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", !ctx_r2.hide_reason);
    i0.ɵɵadvance(2);
    i0.ɵɵi18nExp(ctx_r2.desks.length === 1 ? "" : "s")(ctx_r2.desk_list)((ctx_r2.level == null ? null : ctx_r2.level.display_name) || (ctx_r2.level == null ? null : ctx_r2.level.name));
    i0.ɵɵi18nApply(10);
  }
}
function DeskConfirmModalComponent_ng_template_6_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "main", 26);
    i0.ɵɵelement(1, "mat-spinner", 27);
    i0.ɵɵelementStart(2, "p");
    i0.ɵɵtext(3);
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var ctx_r2 = i0.ɵɵnextContext();
    i0.ɵɵadvance();
    i0.ɵɵproperty("diameter", 48);
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate(ctx_r2.loading);
  }
}
var DeskConfirmModalComponent = /*#__PURE__*/function () {
  function DeskConfirmModalComponent(_data, _settings) {
    _classCallCheck(this, DeskConfirmModalComponent);
    this._data = _data;
    this._settings = _settings;
    this.event = new core_1.EventEmitter();
    this.desks = this._data.desks || [];
    this.date = this._data.date;
    this.host = this._data.host;
    this.can_set_date = this._data.can_set_date;
    this.reason = this._data.reason;
    this.level = this._data.level;
  }
  return _createClass(DeskConfirmModalComponent, [{
    key: "desk_list",
    get: function get() {
      return this.desks.map(function (_) {
        return _.name;
      }).join(', ');
    }
  }, {
    key: "hide_reason",
    get: function get() {
      return !!this._settings.get('app.desks.hide_reason');
    }
  }, {
    key: "can_set_host",
    get: function get() {
      return !!this._settings.get('app.desks.can_book_for_others');
    }
  }, {
    key: "confirm",
    value: function confirm() {
      this.loading = 'Requesting desk booking...';
      this.event.emit({
        reason: 'done'
      });
    }
  }]);
}();
_DeskConfirmModalComponent = DeskConfirmModalComponent;
_DeskConfirmModalComponent.ɵfac = function DeskConfirmModalComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _DeskConfirmModalComponent)(i0.ɵɵdirectiveInject(dialog_1.MAT_DIALOG_DATA), i0.ɵɵdirectiveInject(i1.SettingsService));
};
_DeskConfirmModalComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _DeskConfirmModalComponent,
  selectors: [["desk-flow-confirm-modal-component"]],
  outputs: {
    event: "event"
  },
  decls: 8,
  vars: 3,
  consts: function consts() {
    var i18n_0;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_1554073776118278895$$LIBS_BOOKINGS_SRC_LIB_DESK_CONFIRM_MODAL_COMPONENT_TS_0 = goog.getMsg("Confirm Booking");
      i18n_0 = MSG_EXTERNAL_1554073776118278895$$LIBS_BOOKINGS_SRC_LIB_DESK_CONFIRM_MODAL_COMPONENT_TS_0;
    } else {
      i18n_0 = $localize(_templateObject || (_templateObject = _taggedTemplateLiteral([":\u241Fd513554c23b779e029147a285f1f84f1479488fc\u241F1554073776118278895:Confirm Booking"])));
    }
    var i18n_1;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_3973931101896534797$$LIBS_BOOKINGS_SRC_LIB_DESK_CONFIRM_MODAL_COMPONENT_TS_1 = goog.getMsg("Date");
      i18n_1 = MSG_EXTERNAL_3973931101896534797$$LIBS_BOOKINGS_SRC_LIB_DESK_CONFIRM_MODAL_COMPONENT_TS_1;
    } else {
      i18n_1 = $localize(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([":\u241F2f933b826a570836cab04f683970a2d22068458c\u241F3973931101896534797:Date"])));
    }
    var i18n_2;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_4161419473863623687$$LIBS_BOOKINGS_SRC_LIB_DESK_CONFIRM_MODAL_COMPONENT_TS_2 = goog.getMsg(" Your desk{$interpolation} will be {$interpolation_1} on {$interpolation_2} ", {
        "interpolation": "\uFFFD0\uFFFD",
        "interpolation_1": "\uFFFD1\uFFFD",
        "interpolation_2": "\uFFFD2\uFFFD"
      }, {
        original_code: {
          "interpolation": "{{ desks.length === 1 ? '' : 's' }}",
          "interpolation_1": "{{ desk_list }}",
          "interpolation_2": "{{ level?.display_name || level?.name }}"
        }
      });
      i18n_2 = MSG_EXTERNAL_4161419473863623687$$LIBS_BOOKINGS_SRC_LIB_DESK_CONFIRM_MODAL_COMPONENT_TS_2;
    } else {
      i18n_2 = $localize(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([":\u241F5012a6a10d31e79f5865c2fc7f680b84a14accca\u241F4161419473863623687: Your desk", ":INTERPOLATION: will be ", ":INTERPOLATION_1: on ", ":INTERPOLATION_2: "])), "\uFFFD0\uFFFD", "\uFFFD1\uFFFD", "\uFFFD2\uFFFD");
    }
    var i18n_3;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_9178182467454450952$$LIBS_BOOKINGS_SRC_LIB_DESK_CONFIRM_MODAL_COMPONENT_TS_3 = goog.getMsg("Confirm");
      i18n_3 = MSG_EXTERNAL_9178182467454450952$$LIBS_BOOKINGS_SRC_LIB_DESK_CONFIRM_MODAL_COMPONENT_TS_3;
    } else {
      i18n_3 = $localize(_templateObject4 || (_templateObject4 = _taggedTemplateLiteral([":\u241F68e710782ccb5398b3acb8844caf0b199da2c3da\u241F9178182467454450952:Confirm"])));
    }
    var i18n_4;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_6641024648411549335$$LIBS_BOOKINGS_SRC_LIB_DESK_CONFIRM_MODAL_COMPONENT_TS_4 = goog.getMsg("Host");
      i18n_4 = MSG_EXTERNAL_6641024648411549335$$LIBS_BOOKINGS_SRC_LIB_DESK_CONFIRM_MODAL_COMPONENT_TS_4;
    } else {
      i18n_4 = $localize(_templateObject5 || (_templateObject5 = _taggedTemplateLiteral([":\u241Ffe22ca53e651df951dac25b67c17894b0980f767\u241F6641024648411549335:Host"])));
    }
    var i18n_5;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_4775550080689015987$$LIBS_BOOKINGS_SRC_LIB_DESK_CONFIRM_MODAL_COMPONENT_TS_5 = goog.getMsg("Reason");
      i18n_5 = MSG_EXTERNAL_4775550080689015987$$LIBS_BOOKINGS_SRC_LIB_DESK_CONFIRM_MODAL_COMPONENT_TS_5;
    } else {
      i18n_5 = $localize(_templateObject6 || (_templateObject6 = _taggedTemplateLiteral([":\u241F4ba250869daa372b54d24fafc0ea934769ee4076\u241F4775550080689015987:Reason"])));
    }
    return [["load_state", ""], i18n_0, i18n_1, i18n_2, i18n_3, i18n_4, i18n_5, [1, "flex-1"], ["icon", "", "mat-dialog-close", "", 4, "ngIf"], [4, "ngIf", "ngIfElse"], ["icon", "", "mat-dialog-close", ""], [1, "material-icons"], [1, "p-4"], ["host", "", "class", "flex flex-col", 4, "ngIf"], ["date", "", 1, "mb-4"], [4, "ngIf"], [3, "ngModel", "ngModelChange", 4, "ngIf"], ["reason", "", "class", "flex flex-col mb-4", 4, "ngIf"], [1, "flex", "items-center", "justify-center", "p-2"], ["btn", "", "matRipple", "", 3, "click"], ["host", "", 1, "flex", "flex-col"], [1, "mb-4", 3, "ngModelChange", "ngModel"], [3, "ngModelChange", "ngModel"], ["reason", "", 1, "flex", "flex-col", "mb-4"], ["appearance", "outline"], ["matInput", "", "placeholder", "Reason", 3, "ngModelChange", "ngModel"], ["load", "", 1, "flex", "flex-col", "p-12", "items-center", "justify-center"], [1, "mb-4", 3, "diameter"]];
  },
  template: function DeskConfirmModalComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵelementStart(0, "header")(1, "h2");
      i0.ɵɵi18n(2, 1);
      i0.ɵɵelementEnd();
      i0.ɵɵelement(3, "div", 7);
      i0.ɵɵtemplate(4, DeskConfirmModalComponent_button_4_Template, 3, 0, "button", 8);
      i0.ɵɵelementEnd();
      i0.ɵɵtemplate(5, DeskConfirmModalComponent_ng_container_5_Template, 14, 7, "ng-container", 9)(6, DeskConfirmModalComponent_ng_template_6_Template, 4, 2, "ng-template", null, 0, i0.ɵɵtemplateRefExtractor);
    }
    if (rf & 2) {
      var load_state_r6 = i0.ɵɵreference(7);
      i0.ɵɵadvance(4);
      i0.ɵɵproperty("ngIf", !ctx.loading);
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", !ctx.loading)("ngIfElse", load_state_r6);
    }
  },
  dependencies: [i2.NgIf, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgModel, i4.MatInput, i5.MatFormField, i6.MatDialogClose, i7.MatProgressSpinner, i8.DateFieldComponent, i9.UserSearchFieldComponent, i10.MatRipple, i2.DatePipe],
  styles: ["main[_ngcontent-%COMP%] {\n                width: 24rem;\n                max-width: calc(100vw - 4.5rem);\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRlc2stY29uZmlybS1tb2RhbC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLFlBQVk7Z0JBQ1osK0JBQStCO1lBQ25DIiwiZmlsZSI6ImRlc2stY29uZmlybS1tb2RhbC5jb21wb25lbnQudHMiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIG1haW4ge1xuICAgICAgICAgICAgICAgIHdpZHRoOiAyNHJlbTtcbiAgICAgICAgICAgICAgICBtYXgtd2lkdGg6IGNhbGMoMTAwdncgLSA0LjVyZW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAiXX0= */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvYm9va2luZ3Mvc3JjL2xpYi9kZXNrLWNvbmZpcm0tbW9kYWwuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxZQUFZO2dCQUNaLCtCQUErQjtZQUNuQzs7QUFFWixnZEFBZ2QiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIG1haW4ge1xuICAgICAgICAgICAgICAgIHdpZHRoOiAyNHJlbTtcbiAgICAgICAgICAgICAgICBtYXgtd2lkdGg6IGNhbGMoMTAwdncgLSA0LjVyZW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAiXSwic291cmNlUm9vdCI6IiJ9 */"]
});
exports.DeskConfirmModalComponent = DeskConfirmModalComponent;

/***/ }),

/***/ 56416:
/*!************************************************************!*\
  !*** ./libs/bookings/src/lib/desk-list-field.component.ts ***!
  \************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _taggedTemplateLiteral = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js */ 9959)["default"]);
var _toConsumableArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/toConsumableArray.js */ 86033)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _DeskListFieldComponent, _templateObject, _templateObject2, _templateObject3;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.DeskListFieldComponent = void 0;
var core_1 = __webpack_require__(/*! @angular/core */ 37580);
var forms_1 = __webpack_require__(/*! @angular/forms */ 34456);
var dialog_1 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var settings_service_1 = __webpack_require__(/*! libs/common/src/lib/settings.service */ 14233);
var desk_select_modal_component_1 = __webpack_require__(/*! ./desk-select-modal/desk-select-modal.component */ 50622);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! libs/common/src/lib/settings.service */ 14233);
var i2 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var i3 = __webpack_require__(/*! @angular/common */ 60316);
var i4 = __webpack_require__(/*! @angular/forms */ 34456);
var i5 = __webpack_require__(/*! @angular/material/checkbox */ 97024);
var i6 = __webpack_require__(/*! ../../../components/src/lib/icon.component */ 69434);
var i7 = __webpack_require__(/*! ../../../components/src/lib/authenticated-image.directive */ 93208);
var i8 = __webpack_require__(/*! @angular/material/core */ 74646);
var _c0 = function _c0() {
  return [];
};
var _c1 = function _c1() {
  return {
    standalone: true
  };
};
function DeskListFieldComponent_div_1_div_1_mat_checkbox_4_Template(rf, ctx) {
  if (rf & 1) {
    var _r2 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "mat-checkbox", 27);
    i0.ɵɵlistener("ngModelChange", function DeskListFieldComponent_div_1_div_1_mat_checkbox_4_Template_mat_checkbox_ngModelChange_0_listener($event) {
      var opt_r3 = i0.ɵɵrestoreView(_r2).$implicit;
      var ctx_r3 = i0.ɵɵnextContext(3);
      return i0.ɵɵresetView(ctx_r3.setFeature(opt_r3, $event));
    });
    i0.ɵɵtext(1);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var opt_r3 = ctx.$implicit;
    var ctx_r3 = i0.ɵɵnextContext(3);
    i0.ɵɵproperty("ngModel", (ctx_r3.selected_features || i0.ɵɵpureFunction0(3, _c0)).includes(opt_r3))("ngModelOptions", i0.ɵɵpureFunction0(4, _c1));
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", opt_r3, " ");
  }
}
function DeskListFieldComponent_div_1_div_1_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 23)(1, "label", 24);
    i0.ɵɵtext(2, "Type");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(3, "div", 25);
    i0.ɵɵtemplate(4, DeskListFieldComponent_div_1_div_1_mat_checkbox_4_Template, 2, 5, "mat-checkbox", 26);
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var ctx_r3 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance(4);
    i0.ɵɵproperty("ngForOf", ctx_r3.features);
  }
}
function DeskListFieldComponent_div_1_img_3_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelement(0, "img", 28);
  }
  if (rf & 2) {
    var item_r5 = i0.ɵɵnextContext().$implicit;
    i0.ɵɵproperty("source", item_r5.images[0]);
  }
}
function DeskListFieldComponent_div_1_ng_template_4_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelement(0, "img", 29);
  }
}
function DeskListFieldComponent_div_1_Template(rf, ctx) {
  if (rf & 1) {
    var _r1 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 10);
    i0.ɵɵtemplate(1, DeskListFieldComponent_div_1_div_1_Template, 5, 1, "div", 11);
    i0.ɵɵelementStart(2, "div", 12);
    i0.ɵɵtemplate(3, DeskListFieldComponent_div_1_img_3_Template, 1, 1, "img", 13)(4, DeskListFieldComponent_div_1_ng_template_4_Template, 1, 0, "ng-template", null, 0, i0.ɵɵtemplateRefExtractor);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(6, "div", 14)(7, "div", 15);
    i0.ɵɵtext(8);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(9, "div", 16)(10, "app-icon", 17);
    i0.ɵɵtext(11, "place");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(12, "p");
    i0.ɵɵtext(13);
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(14, "div", 18)(15, "button", 19);
    i0.ɵɵlistener("click", function DeskListFieldComponent_div_1_Template_button_click_15_listener() {
      var item_r5 = i0.ɵɵrestoreView(_r1).$implicit;
      var ctx_r3 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r3.changeResources(item_r5));
    });
    i0.ɵɵelementStart(16, "div", 20);
    i0.ɵɵi18nStart(17, 2);
    i0.ɵɵelement(18, "app-icon");
    i0.ɵɵi18nEnd();
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(19, "button", 21);
    i0.ɵɵlistener("click", function DeskListFieldComponent_div_1_Template_button_click_19_listener() {
      var item_r5 = i0.ɵɵrestoreView(_r1).$implicit;
      var ctx_r3 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r3.removeResource(item_r5));
    });
    i0.ɵɵelementStart(20, "div", 20);
    i0.ɵɵi18nStart(21, 3);
    i0.ɵɵelement(22, "app-icon");
    i0.ɵɵi18nEnd();
    i0.ɵɵelementEnd()()()();
    i0.ɵɵelementStart(23, "button", 22);
    i0.ɵɵlistener("click", function DeskListFieldComponent_div_1_Template_button_click_23_listener() {
      var item_r5 = i0.ɵɵrestoreView(_r1).$implicit;
      var ctx_r3 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r3.toggleFavourite(item_r5));
    });
    i0.ɵɵelementStart(24, "app-icon");
    i0.ɵɵtext(25);
    i0.ɵɵelementEnd()()();
  }
  if (rf & 2) {
    var item_r5 = ctx.$implicit;
    var placeholder_r6 = i0.ɵɵreference(5);
    var ctx_r3 = i0.ɵɵnextContext();
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", ctx_r3.features == null ? null : ctx_r3.features.length);
    i0.ɵɵadvance(2);
    i0.ɵɵproperty("ngIf", item_r5.images == null ? null : item_r5.images.length)("ngIfElse", placeholder_r6);
    i0.ɵɵadvance(5);
    i0.ɵɵtextInterpolate1(" ", item_r5.name || item_r5.id || item_r5.map_id || "Desk", " ");
    i0.ɵɵadvance(5);
    i0.ɵɵtextInterpolate((item_r5.zone == null ? null : item_r5.zone.display_name) || (item_r5.zone == null ? null : item_r5.zone.name));
    i0.ɵɵadvance(10);
    i0.ɵɵclassProp("text-blue-400", ctx_r3.favorites.includes(item_r5 == null ? null : item_r5.id));
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate(ctx_r3.favorites.includes(item_r5 == null ? null : item_r5.id) ? "favorite" : "favorite_border");
  }
}
var EMPTY_FAVS = [];
var DeskListFieldComponent = /*#__PURE__*/function () {
  function DeskListFieldComponent(_settings, _dialog) {
    var _this = this;
    _classCallCheck(this, DeskListFieldComponent);
    this._settings = _settings;
    this._dialog = _dialog;
    this.features = [];
    this.room_size = 3;
    this.items = [];
    this.disabled = false;
    this.selected_features = [];
    /* istanbul ignore next */
    this.registerOnChange = function (fn) {
      return _this._onChange = fn;
    };
    /* istanbul ignore next */
    this.registerOnTouched = function (fn) {
      return _this._onTouch = fn;
    };
    this.setDisabledState = function (s) {
      return _this.disabled = s;
    };
  }
  /** Add or edit selected items */
  return _createClass(DeskListFieldComponent, [{
    key: "favorites",
    get: function get() {
      return this._settings.get(desk_select_modal_component_1.FAV_DESK_KEY) || EMPTY_FAVS;
    }
  }, {
    key: "changeResources",
    value: function changeResources() {
      var _this2 = this;
      var ref = this._dialog.open(desk_select_modal_component_1.DeskSelectModalComponent, {
        data: {
          items: this.items,
          options: {
            capacity: this.room_size
          }
        }
      });
      ref.afterClosed().subscribe(function (items) {
        if (!items) items = ref.componentInstance.selected;
        _this2.setValue(items);
      });
    }
    /** Remove the selected space from the list */
  }, {
    key: "removeResource",
    value: function removeResource(space) {
      this.setValue(this.items.filter(function (_) {
        return _.id !== space.id;
      }));
    }
    /**
     * Update the form field value
     * @param new_value New value to set on the form field
     */
  }, {
    key: "setValue",
    value: function setValue(new_value) {
      this.items = new_value;
      if (this._onChange) this._onChange(this.items);
    }
    /* istanbul ignore next */
    /**
     * Update local value when form control value is changed
     * @param value The new value for the component
     */
  }, {
    key: "writeValue",
    value: function writeValue(value) {
      this.items = value || [];
    }
  }, {
    key: "toggleFavourite",
    value: function toggleFavourite(space) {
      if (!(space !== null && space !== void 0 && space.id)) return;
      var fav_list = this.favorites;
      var new_state = !fav_list.includes(space.id);
      if (new_state) {
        this._settings.saveUserSetting(desk_select_modal_component_1.FAV_DESK_KEY, [].concat(_toConsumableArray(fav_list), [space.id]));
      } else {
        this._settings.saveUserSetting(desk_select_modal_component_1.FAV_DESK_KEY, fav_list.filter(function (_) {
          return _ !== space.id;
        }));
      }
    }
  }]);
}();
_DeskListFieldComponent = DeskListFieldComponent;
_DeskListFieldComponent.ɵfac = function DeskListFieldComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _DeskListFieldComponent)(i0.ɵɵdirectiveInject(i1.SettingsService), i0.ɵɵdirectiveInject(i2.MatDialog));
};
_DeskListFieldComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _DeskListFieldComponent,
  selectors: [["desk-list-field"]],
  inputs: {
    features: "features"
  },
  features: [i0.ɵɵProvidersFeature([{
    provide: forms_1.NG_VALUE_ACCESSOR,
    useExisting: (0, core_1.forwardRef)(function () {
      return _DeskListFieldComponent;
    }),
    multi: true
  }])],
  decls: 10,
  vars: 1,
  consts: function consts() {
    var i18n_0;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_1087109089519255800$$LIBS_BOOKINGS_SRC_LIB_DESK_LIST_FIELD_COMPONENT_TS_0 = goog.getMsg("Add Desk");
      i18n_0 = MSG_EXTERNAL_1087109089519255800$$LIBS_BOOKINGS_SRC_LIB_DESK_LIST_FIELD_COMPONENT_TS_0;
    } else {
      i18n_0 = $localize(_templateObject || (_templateObject = _taggedTemplateLiteral([":\u241F76b072e559d819bff20d8a487e73f64b3afe4f86\u241F1087109089519255800:Add Desk"])));
    }
    var i18n_1;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_559636443235347532$$LIBS_BOOKINGS_SRC_LIB_DESK_LIST_FIELD_COMPONENT_TS_1 = goog.getMsg("{$startTagAppIcon}edit{$closeTagAppIcon} Change ", {
        "closeTagAppIcon": "\uFFFD/#18\uFFFD",
        "startTagAppIcon": "\uFFFD#18\uFFFD"
      }, {
        original_code: {
          "closeTagAppIcon": "</app-icon>",
          "startTagAppIcon": "<app-icon>"
        }
      });
      i18n_1 = MSG_EXTERNAL_559636443235347532$$LIBS_BOOKINGS_SRC_LIB_DESK_LIST_FIELD_COMPONENT_TS_1;
    } else {
      i18n_1 = $localize(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([":\u241Fca9092fdbbb85e5828de77fdf85c49b918cec128\u241F559636443235347532:", ":START_TAG_APP_ICON:edit", ":CLOSE_TAG_APP_ICON: Change "])), "\uFFFD#18\uFFFD", "\uFFFD/#18\uFFFD");
    }
    var i18n_2;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_2582674642057285571$$LIBS_BOOKINGS_SRC_LIB_DESK_LIST_FIELD_COMPONENT_TS_2 = goog.getMsg("{$startTagAppIcon}close{$closeTagAppIcon} Remove ", {
        "closeTagAppIcon": "\uFFFD/#22\uFFFD",
        "startTagAppIcon": "\uFFFD#22\uFFFD"
      }, {
        original_code: {
          "closeTagAppIcon": "</app-icon>",
          "startTagAppIcon": "<app-icon>"
        }
      });
      i18n_2 = MSG_EXTERNAL_2582674642057285571$$LIBS_BOOKINGS_SRC_LIB_DESK_LIST_FIELD_COMPONENT_TS_2;
    } else {
      i18n_2 = $localize(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([":\u241Fa386ba350cdee69beeb12a908d96f0724ddc2054\u241F2582674642057285571:", ":START_TAG_APP_ICON:close", ":CLOSE_TAG_APP_ICON: Remove "])), "\uFFFD#22\uFFFD", "\uFFFD/#22\uFFFD");
    }
    return [["placeholder", ""], i18n_0, i18n_1, i18n_2, ["list", "", 1, "space-y-2"], ["desk", "", "class", "relative p-2 rounded-lg w-full flex items-center shadow border border-base-200", 4, "ngFor", "ngForOf"], ["btn", "", "matRipple", "", "name", "add-desk", 1, "w-full", "inverse", "mt-2", 3, "click"], [1, "flex", "items-center", "justify-center", "space-x-2"], [1, "flex", "items-center", "flex-wrap", "sm:space-x-2", "mb-2"], [1, "flex-1", "min-w-[256px]", "space-y-2"], ["desk", "", 1, "relative", "p-2", "rounded-lg", "w-full", "flex", "items-center", "shadow", "border", "border-base-200"], ["class", "flex flex-col", 4, "ngIf"], [1, "w-20", "h-20", "rounded-xl", "bg-base-200", "mr-4", "overflow-hidden", "flex", "items-center", "justify-center"], ["auth", "", "class", "min-h-full object-cover", 3, "source", 4, "ngIf", "ngIfElse"], [1, "space-y-2", "pb-4"], [1, "font-medium"], [1, "flex", "items-center", "text-sm", "space-x-2"], [1, "text-blue-500"], [1, "absolute", "bottom-0", "right-0", "flex", "items-center", "justify-end", "text-xs"], ["btn", "", "matRipple", "", "name", "edit-desk", 1, "clear", 3, "click"], [1, "flex", "items-center", "space-x-2"], ["btn", "", "matRipple", "", "name", "remove-desk", 1, "clear", 3, "click"], ["icon", "", "matRipple", "", "name", "toggle-desk-favourite", 1, "absolute", "top-1", "right-1", 3, "click"], [1, "flex", "flex-col"], ["for", "title"], ["features", "", 1, "flex", "items-center", "flex-wrap", "space-x-2"], [3, "ngModel", "ngModelOptions", "ngModelChange", 4, "ngFor", "ngForOf"], [3, "ngModelChange", "ngModel", "ngModelOptions"], ["auth", "", 1, "min-h-full", "object-cover", 3, "source"], ["src", "assets/icons/desk-placeholder.svg", 1, "m-auto"]];
  },
  template: function DeskListFieldComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵelementStart(0, "div", 4);
      i0.ɵɵtemplate(1, DeskListFieldComponent_div_1_Template, 26, 8, "div", 5);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(2, "button", 6);
      i0.ɵɵlistener("click", function DeskListFieldComponent_Template_button_click_2_listener() {
        return ctx.changeResources();
      });
      i0.ɵɵelementStart(3, "div", 7)(4, "app-icon");
      i0.ɵɵtext(5, "search");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(6, "span");
      i0.ɵɵi18n(7, 1);
      i0.ɵɵelementEnd()()();
      i0.ɵɵelementStart(8, "div", 8);
      i0.ɵɵelement(9, "div", 9);
      i0.ɵɵelementEnd();
    }
    if (rf & 2) {
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngForOf", ctx.items);
    }
  },
  dependencies: [i3.NgForOf, i3.NgIf, i4.NgControlStatus, i4.NgModel, i5.MatCheckbox, i6.IconComponent, i7.AuthenticatedImageDirective, i8.MatRipple]
});
exports.DeskListFieldComponent = DeskListFieldComponent;

/***/ }),

/***/ 67254:
/*!*****************************************************************!*\
  !*** ./libs/bookings/src/lib/desk-questions-modal.component.ts ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _taggedTemplateLiteral = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js */ 9959)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _DeskQuestionsModalComponent, _templateObject, _templateObject2, _templateObject3, _templateObject4, _templateObject5, _templateObject6;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.DeskQuestionsModalComponent = void 0;
var core_1 = __webpack_require__(/*! @angular/core */ 37580);
var forms_1 = __webpack_require__(/*! @angular/forms */ 34456);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @angular/common */ 60316);
var i2 = __webpack_require__(/*! @angular/forms */ 34456);
var i3 = __webpack_require__(/*! @angular/material/radio */ 53804);
var i4 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var i5 = __webpack_require__(/*! @angular/material/core */ 74646);
function DeskQuestionsModalComponent_div_0_Template(rf, ctx) {
  if (rf & 1) {
    var _r1 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 8)(1, "h2", 9);
    i0.ɵɵi18n(2, 1);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(3, "main", 10)(4, "div", 11)(5, "label");
    i0.ɵɵi18nStart(6, 2);
    i0.ɵɵelement(7, "span");
    i0.ɵɵi18nEnd();
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(8, "mat-radio-group", 12)(9, "mat-radio-button", 13);
    i0.ɵɵtext(10, "Yes");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(11, "mat-radio-button", 13);
    i0.ɵɵtext(12, "No");
    i0.ɵɵelementEnd()()();
    i0.ɵɵelementStart(13, "div", 11)(14, "label");
    i0.ɵɵi18nStart(15, 3);
    i0.ɵɵelement(16, "span");
    i0.ɵɵi18nEnd();
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(17, "mat-radio-group", 14)(18, "mat-radio-button", 13);
    i0.ɵɵtext(19, "Yes");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(20, "mat-radio-button", 13);
    i0.ɵɵtext(21, "No");
    i0.ɵɵelementEnd()()();
    i0.ɵɵelementStart(22, "div", 15)(23, "label");
    i0.ɵɵi18nStart(24, 4);
    i0.ɵɵelement(25, "span");
    i0.ɵɵi18nEnd();
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(26, "mat-radio-group", 16)(27, "mat-radio-button", 13);
    i0.ɵɵtext(28, "Yes");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(29, "mat-radio-button", 13);
    i0.ɵɵtext(30, "No");
    i0.ɵɵelementEnd()()()();
    i0.ɵɵelementStart(31, "footer", 17)(32, "button", 18);
    i0.ɵɵlistener("click", function DeskQuestionsModalComponent_div_0_Template_button_click_32_listener() {
      i0.ɵɵrestoreView(_r1);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.submit());
    });
    i0.ɵɵi18n(33, 5);
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(34, "button", 19)(35, "i", 20);
    i0.ɵɵtext(36, "close");
    i0.ɵɵelementEnd()()();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance(3);
    i0.ɵɵproperty("formGroup", ctx_r1.form);
    i0.ɵɵadvance(6);
    i0.ɵɵproperty("value", true);
    i0.ɵɵadvance(2);
    i0.ɵɵproperty("value", false);
    i0.ɵɵadvance(7);
    i0.ɵɵproperty("value", true);
    i0.ɵɵadvance(2);
    i0.ɵɵproperty("value", false);
    i0.ɵɵadvance(7);
    i0.ɵɵproperty("value", true);
    i0.ɵɵadvance(2);
    i0.ɵɵproperty("value", false);
  }
}
function DeskQuestionsModalComponent_ng_template_1_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "main", 21)(1, "p", 22);
    i0.ɵɵi18n(2, 6);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(3, "button", 19)(4, "i", 20);
    i0.ɵɵtext(5, "close");
    i0.ɵɵelementEnd()()();
  }
}
var DeskQuestionsModalComponent = /*#__PURE__*/function () {
  function DeskQuestionsModalComponent() {
    _classCallCheck(this, DeskQuestionsModalComponent);
    this.event = new core_1.EventEmitter();
    this.form = new forms_1.FormGroup({
      travelled: new forms_1.FormControl(false),
      unwell: new forms_1.FormControl(false),
      contact: new forms_1.FormControl(false)
    });
  }
  return _createClass(DeskQuestionsModalComponent, [{
    key: "submit",
    value: function submit() {
      var _this = this;
      this.form.markAllAsTouched();
      if (Object.keys(this.form.value).find(function (key) {
        return _this.form.value[key] === true || _this.form.value[key] === 'true';
      })) {
        this.failure = true;
        return;
      }
      this.event.emit({
        reason: 'done'
      });
    }
  }]);
}();
_DeskQuestionsModalComponent = DeskQuestionsModalComponent;
_DeskQuestionsModalComponent.ɵfac = function DeskQuestionsModalComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _DeskQuestionsModalComponent)();
};
_DeskQuestionsModalComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _DeskQuestionsModalComponent,
  selectors: [["desk-question-modal"]],
  outputs: {
    event: "event"
  },
  decls: 3,
  vars: 2,
  consts: function consts() {
    var i18n_0;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_877348132538805077$$LIBS_BOOKINGS_SRC_LIB_DESK_QUESTIONS_MODAL_COMPONENT_TS_0 = goog.getMsg("COVID-19 Questionnaire");
      i18n_0 = MSG_EXTERNAL_877348132538805077$$LIBS_BOOKINGS_SRC_LIB_DESK_QUESTIONS_MODAL_COMPONENT_TS_0;
    } else {
      i18n_0 = $localize(_templateObject || (_templateObject = _taggedTemplateLiteral([":\u241F02006a13b8e6aacb7a6e15bafd8004ed529f5d81\u241F877348132538805077:COVID-19 Questionnaire"])));
    }
    var i18n_1;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_1650520403092579087$$LIBS_BOOKINGS_SRC_LIB_DESK_QUESTIONS_MODAL_COMPONENT_TS_1 = goog.getMsg(" Have you travelled overseas within the last 14 days?{$startTagSpan}*{$closeTagSpan}", {
        "closeTagSpan": "\uFFFD/#7\uFFFD",
        "startTagSpan": "\uFFFD#7\uFFFD"
      }, {
        original_code: {
          "closeTagSpan": "</span>",
          "startTagSpan": "<span>"
        }
      });
      i18n_1 = MSG_EXTERNAL_1650520403092579087$$LIBS_BOOKINGS_SRC_LIB_DESK_QUESTIONS_MODAL_COMPONENT_TS_1;
    } else {
      i18n_1 = $localize(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([":\u241Fdad7efbd2320e5ea935aef911f18cbcb24690133\u241F1650520403092579087: Have you travelled overseas within the last 14 days?", ":START_TAG_SPAN:*", ":CLOSE_TAG_SPAN:"])), "\uFFFD#7\uFFFD", "\uFFFD/#7\uFFFD");
    }
    var i18n_2;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_1182497320820036810$$LIBS_BOOKINGS_SRC_LIB_DESK_QUESTIONS_MODAL_COMPONENT_TS_2 = goog.getMsg(" Are you unwell or experiencing any cold or flu-like symptoms?{$startTagSpan}*{$closeTagSpan}", {
        "closeTagSpan": "\uFFFD/#16\uFFFD",
        "startTagSpan": "\uFFFD#16\uFFFD"
      }, {
        original_code: {
          "closeTagSpan": "</span>",
          "startTagSpan": "<span>"
        }
      });
      i18n_2 = MSG_EXTERNAL_1182497320820036810$$LIBS_BOOKINGS_SRC_LIB_DESK_QUESTIONS_MODAL_COMPONENT_TS_2;
    } else {
      i18n_2 = $localize(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([":\u241Fcf50bf8de6c6db836da440c89a375631f7ba3fb0\u241F1182497320820036810: Are you unwell or experiencing any cold or flu-like symptoms?", ":START_TAG_SPAN:*", ":CLOSE_TAG_SPAN:"])), "\uFFFD#16\uFFFD", "\uFFFD/#16\uFFFD");
    }
    var i18n_3;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_737527639567676154$$LIBS_BOOKINGS_SRC_LIB_DESK_QUESTIONS_MODAL_COMPONENT_TS_3 = goog.getMsg(" Have you had contact with anyone with suspected COVID-19?{$startTagSpan}*{$closeTagSpan}", {
        "closeTagSpan": "\uFFFD/#25\uFFFD",
        "startTagSpan": "\uFFFD#25\uFFFD"
      }, {
        original_code: {
          "closeTagSpan": "</span>",
          "startTagSpan": "<span>"
        }
      });
      i18n_3 = MSG_EXTERNAL_737527639567676154$$LIBS_BOOKINGS_SRC_LIB_DESK_QUESTIONS_MODAL_COMPONENT_TS_3;
    } else {
      i18n_3 = $localize(_templateObject4 || (_templateObject4 = _taggedTemplateLiteral([":\u241F273153c91358de15d124ff2966859d9949080f4c\u241F737527639567676154: Have you had contact with anyone with suspected COVID-19?", ":START_TAG_SPAN:*", ":CLOSE_TAG_SPAN:"])), "\uFFFD#25\uFFFD", "\uFFFD/#25\uFFFD");
    }
    var i18n_4;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_935187492052582731$$LIBS_BOOKINGS_SRC_LIB_DESK_QUESTIONS_MODAL_COMPONENT_TS_4 = goog.getMsg("Submit");
      i18n_4 = MSG_EXTERNAL_935187492052582731$$LIBS_BOOKINGS_SRC_LIB_DESK_QUESTIONS_MODAL_COMPONENT_TS_4;
    } else {
      i18n_4 = $localize(_templateObject5 || (_templateObject5 = _taggedTemplateLiteral([":\u241F71c77bb8cecdf11ec3eead24dd1ba506573fa9cd\u241F935187492052582731:Submit"])));
    }
    var i18n_5;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_4401678084033805848$$LIBS_BOOKINGS_SRC_LIB_DESK_QUESTIONS_MODAL_COMPONENT_TS_5 = goog.getMsg(" Your request to work from the office has been rejected based on your response to the compulsory Covid-19 questions. Please feel free to submit a new request when circumstances change in a way that changes your answer to the questions. ");
      i18n_5 = MSG_EXTERNAL_4401678084033805848$$LIBS_BOOKINGS_SRC_LIB_DESK_QUESTIONS_MODAL_COMPONENT_TS_5;
    } else {
      i18n_5 = $localize(_templateObject6 || (_templateObject6 = _taggedTemplateLiteral([":\u241F17d62f424c2c025579e1ec0e3f5ad971f57681df\u241F4401678084033805848: Your request to work from the office has been rejected based on your response to the compulsory Covid-19 questions. Please feel free to submit a new request when circumstances change in a way that changes your answer to the questions. "])));
    }
    return [["fail_state", ""], i18n_0, i18n_1, i18n_2, i18n_3, i18n_4, i18n_5, ["class", "relative", 4, "ngIf", "ngIfElse"], [1, "relative"], [1, "p-4", "text-xl"], [1, "p-4", 3, "formGroup"], [1, "flex", "flex-col", "mb-4"], ["formControlName", "travelled", 1, "space-x-2"], [3, "value"], ["formControlName", "unwell", 1, "space-x-2"], [1, "flex", "flex-col"], ["formControlName", "contact", 1, "space-x-2"], [1, "flex", "justify-center", "items-center", "p-2"], ["btn", "", "matRipple", "", 3, "click"], ["close", "", "icon", "", "matRipple", "", "mat-dialog-close", ""], [1, "material-icons"], ["failure", "", 1, "pt-8", "relative"], [1, "p-4"]];
  },
  template: function DeskQuestionsModalComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵtemplate(0, DeskQuestionsModalComponent_div_0_Template, 37, 7, "div", 7)(1, DeskQuestionsModalComponent_ng_template_1_Template, 6, 0, "ng-template", null, 0, i0.ɵɵtemplateRefExtractor);
    }
    if (rf & 2) {
      var fail_state_r3 = i0.ɵɵreference(2);
      i0.ɵɵproperty("ngIf", !ctx.failure)("ngIfElse", fail_state_r3);
    }
  },
  dependencies: [i1.NgIf, i2.NgControlStatus, i2.NgControlStatusGroup, i2.FormGroupDirective, i2.FormControlName, i3.MatRadioGroup, i3.MatRadioButton, i4.MatDialogClose, i5.MatRipple],
  styles: ["main[_ngcontent-%COMP%] {\n                width: 24rem;\n                max-width: calc(100vw - 4.5rem);\n            }\n\n            [close][_ngcontent-%COMP%] {\n                position: absolute;\n                top: 0.5rem;\n                right: 0.5rem;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRlc2stcXVlc3Rpb25zLW1vZGFsLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1lBQ1k7Z0JBQ0ksWUFBWTtnQkFDWiwrQkFBK0I7WUFDbkM7O1lBRUE7Z0JBQ0ksa0JBQWtCO2dCQUNsQixXQUFXO2dCQUNYLGFBQWE7WUFDakIiLCJmaWxlIjoiZGVzay1xdWVzdGlvbnMtbW9kYWwuY29tcG9uZW50LnRzIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICBtYWluIHtcbiAgICAgICAgICAgICAgICB3aWR0aDogMjRyZW07XG4gICAgICAgICAgICAgICAgbWF4LXdpZHRoOiBjYWxjKDEwMHZ3IC0gNC41cmVtKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgW2Nsb3NlXSB7XG4gICAgICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICAgICAgICAgIHRvcDogMC41cmVtO1xuICAgICAgICAgICAgICAgIHJpZ2h0OiAwLjVyZW07XG4gICAgICAgICAgICB9XG4gICAgICAgICJdfQ== */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvYm9va2luZ3Mvc3JjL2xpYi9kZXNrLXF1ZXN0aW9ucy1tb2RhbC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLFlBQVk7Z0JBQ1osK0JBQStCO1lBQ25DOztZQUVBO2dCQUNJLGtCQUFrQjtnQkFDbEIsV0FBVztnQkFDWCxhQUFhO1lBQ2pCOztBQUVaLGd0QkFBZ3RCIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICBtYWluIHtcbiAgICAgICAgICAgICAgICB3aWR0aDogMjRyZW07XG4gICAgICAgICAgICAgICAgbWF4LXdpZHRoOiBjYWxjKDEwMHZ3IC0gNC41cmVtKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgW2Nsb3NlXSB7XG4gICAgICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICAgICAgICAgIHRvcDogMC41cmVtO1xuICAgICAgICAgICAgICAgIHJpZ2h0OiAwLjVyZW07XG4gICAgICAgICAgICB9XG4gICAgICAgICJdLCJzb3VyY2VSb290IjoiIn0= */"]
});
exports.DeskQuestionsModalComponent = DeskQuestionsModalComponent;

/***/ }),

/***/ 42280:
/*!***************************************************************************!*\
  !*** ./libs/bookings/src/lib/desk-select-modal/desk-details.component.ts ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _taggedTemplateLiteral = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js */ 9959)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _DeskDetailsComponent, _templateObject, _templateObject2, _templateObject3, _templateObject4, _templateObject5;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.DeskDetailsComponent = void 0;
var core_1 = __webpack_require__(/*! @angular/core */ 37580);
var map_pin_component_1 = __webpack_require__(/*! libs/components/src/lib/map-pin.component */ 71865);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @angular/common */ 60316);
var i2 = __webpack_require__(/*! ../../../../components/src/lib/icon.component */ 69434);
var i3 = __webpack_require__(/*! ../../../../components/src/lib/interactive-map.component */ 24918);
var i4 = __webpack_require__(/*! ../../../../components/src/lib/image-carousel.component */ 65277);
var i5 = __webpack_require__(/*! @angular/material/core */ 74646);
var _c0 = function _c0() {
  return [];
};
var _c1 = function _c1() {
  return {
    disable_pan: true,
    disable_zoom: true
  };
};
function DeskDetailsComponent_ng_container_0_image_carousel_2_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelement(0, "image-carousel", 22);
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext(2);
    i0.ɵɵproperty("images", ctx_r1.desk.images);
  }
}
function DeskDetailsComponent_ng_container_0_section_31_div_3_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 25)(1, "div", 26);
    i0.ɵɵtext(2);
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var feat_r3 = ctx.$implicit;
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate(feat_r3);
  }
}
function DeskDetailsComponent_ng_container_0_section_31_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "section", 23)(1, "h2", 14);
    i0.ɵɵi18n(2, 3);
    i0.ɵɵelementEnd();
    i0.ɵɵtemplate(3, DeskDetailsComponent_ng_container_0_section_31_div_3_Template, 3, 1, "div", 24);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance(3);
    i0.ɵɵproperty("ngForOf", ctx_r1.desk.features || i0.ɵɵpureFunction0(1, _c0));
  }
}
function DeskDetailsComponent_ng_container_0_section_32_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "section", 27);
    i0.ɵɵelement(1, "interactive-map", 28);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance();
    i0.ɵɵproperty("src", ctx_r1.map_url)("focus", ctx_r1.desk.map_id || ctx_r1.desk.id)("features", ctx_r1.features)("options", i0.ɵɵpureFunction0(4, _c1));
  }
}
function DeskDetailsComponent_ng_container_0_Template(rf, ctx) {
  if (rf & 1) {
    var _r1 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵelementStart(1, "section", 6);
    i0.ɵɵtemplate(2, DeskDetailsComponent_ng_container_0_image_carousel_2_Template, 1, 1, "image-carousel", 7);
    i0.ɵɵelementStart(3, "button", 8);
    i0.ɵɵlistener("click", function DeskDetailsComponent_ng_container_0_Template_button_click_3_listener() {
      i0.ɵɵrestoreView(_r1);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.close.emit());
    });
    i0.ɵɵelementStart(4, "app-icon");
    i0.ɵɵtext(5, "arrow_back");
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(6, "button", 9);
    i0.ɵɵlistener("click", function DeskDetailsComponent_ng_container_0_Template_button_click_6_listener() {
      i0.ɵɵrestoreView(_r1);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.toggleFav.emit());
    });
    i0.ɵɵelementStart(7, "app-icon");
    i0.ɵɵtext(8);
    i0.ɵɵelementEnd()()();
    i0.ɵɵelementStart(9, "div", 10)(10, "section", 11)(11, "h2", 12);
    i0.ɵɵtext(12);
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(13, "section", 13)(14, "h2", 14);
    i0.ɵɵtext(15, "Details");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(16, "div", 15)(17, "app-icon");
    i0.ɵɵtext(18, "person");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(19, "p");
    i0.ɵɵi18n(20, 1);
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(21, "div", 15)(22, "app-icon");
    i0.ɵɵtext(23, "desk");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(24, "p");
    i0.ɵɵtext(25);
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(26, "div", 15)(27, "app-icon");
    i0.ɵɵtext(28, "place");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(29, "p");
    i0.ɵɵtext(30);
    i0.ɵɵelementEnd()()();
    i0.ɵɵtemplate(31, DeskDetailsComponent_ng_container_0_section_31_Template, 4, 2, "section", 16)(32, DeskDetailsComponent_ng_container_0_section_32_Template, 2, 5, "section", 17);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(33, "div", 18)(34, "button", 19);
    i0.ɵɵlistener("click", function DeskDetailsComponent_ng_container_0_Template_button_click_34_listener() {
      i0.ɵɵrestoreView(_r1);
      var ctx_r1 = i0.ɵɵnextContext();
      ctx_r1.active = !ctx_r1.active;
      return i0.ɵɵresetView(ctx_r1.activeChange.emit(ctx_r1.active));
    });
    i0.ɵɵelementStart(35, "div", 20)(36, "app-icon", 21);
    i0.ɵɵtext(37);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(38, "p");
    i0.ɵɵi18n(39, 2);
    i0.ɵɵelementEnd()()()();
    i0.ɵɵelementContainerEnd();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance();
    i0.ɵɵclassProp("sm:h-64", ctx_r1.desk.images == null ? null : ctx_r1.desk.images.length)("h-40", ctx_r1.desk.images == null ? null : ctx_r1.desk.images.length)("sm:h-0", !(ctx_r1.desk.images == null ? null : ctx_r1.desk.images.length))("h-12", !(ctx_r1.desk.images == null ? null : ctx_r1.desk.images.length))("!bg-transparent", !(ctx_r1.desk.images == null ? null : ctx_r1.desk.images.length));
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", ctx_r1.desk.images == null ? null : ctx_r1.desk.images.length);
    i0.ɵɵadvance(4);
    i0.ɵɵclassProp("text-info-content", ctx_r1.fav)("!bg-info", ctx_r1.fav);
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate(ctx_r1.fav ? "favorite" : "favorite_border");
    i0.ɵɵadvance(4);
    i0.ɵɵtextInterpolate1(" ", ctx_r1.desk.display_name || ctx_r1.desk.name || ctx_r1.desk.id, " ");
    i0.ɵɵadvance(13);
    i0.ɵɵtextInterpolate1(" ", ctx_r1.desk.display_name || ctx_r1.desk.name || ctx_r1.desk.id, " ");
    i0.ɵɵadvance(5);
    i0.ɵɵtextInterpolate((ctx_r1.desk.zone == null ? null : ctx_r1.desk.zone.display_name) || (ctx_r1.desk.zone == null ? null : ctx_r1.desk.zone.name));
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", ctx_r1.desk.features == null ? null : ctx_r1.desk.features.length);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", !ctx_r1.hide_map);
    i0.ɵɵadvance(2);
    i0.ɵɵclassProp("inverse", ctx_r1.active);
    i0.ɵɵadvance(3);
    i0.ɵɵtextInterpolate(ctx_r1.active ? "remove" : "add");
    i0.ɵɵadvance(2);
    i0.ɵɵi18nExp(ctx_r1.active);
    i0.ɵɵi18nApply(39);
  }
}
function DeskDetailsComponent_ng_template_1_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 29)(1, "p", 30);
    i0.ɵɵi18n(2, 4);
    i0.ɵɵelementEnd()();
  }
}
var DeskDetailsComponent = /*#__PURE__*/function () {
  function DeskDetailsComponent() {
    _classCallCheck(this, DeskDetailsComponent);
    this.fav = false;
    this.active = false;
    this.hide_map = false;
    this.close = new core_1.EventEmitter();
    this.toggleFav = new core_1.EventEmitter();
    this.activeChange = new core_1.EventEmitter();
    this.map_url = '';
    this.features = [];
  }
  return _createClass(DeskDetailsComponent, [{
    key: "ngOnChanges",
    value: function ngOnChanges(changes) {
      if (changes.desk && this.desk) {
        this.updateFeature();
      }
    }
  }, {
    key: "updateFeature",
    value: function updateFeature() {
      this.map_url = this.desk.zone.map_id;
      this.features = [{
        location: this.desk.map_id || this.desk.id,
        content: map_pin_component_1.MapPinComponent
      }];
    }
  }]);
}();
_DeskDetailsComponent = DeskDetailsComponent;
_DeskDetailsComponent.ɵfac = function DeskDetailsComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _DeskDetailsComponent)();
};
_DeskDetailsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _DeskDetailsComponent,
  selectors: [["desk-details"]],
  inputs: {
    desk: "desk",
    fav: "fav",
    active: "active",
    hide_map: "hide_map"
  },
  outputs: {
    close: "close",
    toggleFav: "toggleFav",
    activeChange: "activeChange"
  },
  features: [i0.ɵɵNgOnChangesFeature],
  decls: 3,
  vars: 2,
  consts: function consts() {
    var i18n_0;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_6431414344811875961$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_DETAILS_COMPONENT_TS_0 = goog.getMsg("Single desk");
      i18n_0 = MSG_EXTERNAL_6431414344811875961$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_DETAILS_COMPONENT_TS_0;
    } else {
      i18n_0 = $localize(_templateObject || (_templateObject = _taggedTemplateLiteral([":\u241Ff3cd229363e020d7ceb13bb351bb87f86dda78ef\u241F6431414344811875961:Single desk"])));
    }
    var i18n_1;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_2952235329246771628$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_DETAILS_COMPONENT_TS_1 = goog.getMsg("{VAR_SELECT, select, true {Remove from booking } false {Add to booking }}");
      i18n_1 = MSG_EXTERNAL_2952235329246771628$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_DETAILS_COMPONENT_TS_1;
    } else {
      i18n_1 = $localize(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([":\u241F193cbdbbcae6ad83fa2f2ac8d7dcb6b41c384a89\u241F2952235329246771628:{VAR_SELECT, select, true {Remove from booking } false {Add to booking }}"])));
    }
    i18n_1 = i0.ɵɵi18nPostprocess(i18n_1, {
      "VAR_SELECT": "\uFFFD0\uFFFD"
    });
    var i18n_2;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_5607930927273386767$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_DETAILS_COMPONENT_TS_2 = goog.getMsg(" {$icu} ", {
        "icu": i18n_1
      }, {
        original_code: {
          "icu": "{ active, select, true { Remove from booking } false\n                            { Add to booking } }"
        }
      });
      i18n_2 = MSG_EXTERNAL_5607930927273386767$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_DETAILS_COMPONENT_TS_2;
    } else {
      i18n_2 = $localize(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([":\u241Ffc6b8194e480db3111367487d3a97bdf5a6333a7\u241F5607930927273386767: ", ":ICU: "])), i18n_1);
    }
    var i18n_3;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_1551920764795208868$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_DETAILS_COMPONENT_TS_3 = goog.getMsg("Facilities");
      i18n_3 = MSG_EXTERNAL_1551920764795208868$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_DETAILS_COMPONENT_TS_3;
    } else {
      i18n_3 = $localize(_templateObject4 || (_templateObject4 = _taggedTemplateLiteral([":\u241Fbf10c600bd861cfd0a23f4759562ee0ae9dbe19f\u241F1551920764795208868:Facilities"])));
    }
    var i18n_4;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_4621791550614740403$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_DETAILS_COMPONENT_TS_4 = goog.getMsg(" Select a desk to view it's details ");
      i18n_4 = MSG_EXTERNAL_4621791550614740403$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_DETAILS_COMPONENT_TS_4;
    } else {
      i18n_4 = $localize(_templateObject5 || (_templateObject5 = _taggedTemplateLiteral([":\u241Fc6efe811f5410838382ce9adb2636cb75d783ebc\u241F4621791550614740403: Select a desk to view it's details "])));
    }
    return [["emptyState", ""], i18n_0, i18n_2, i18n_3, i18n_4, [4, "ngIf", "ngIfElse"], ["image", "", 1, "relative", "w-full", "bg-base-300"], ["class", "absolute inset-0", 3, "images", 4, "ngIf"], ["icon", "", "matRipple", "", "name", "close-desk-details", 1, "absolute", "top-2", "left-2", "bg-base-200", "sm:hidden", "text-base-content", 3, "click"], ["icon", "", "matRipple", "", "name", "toggle-desk-favourite-details", 1, "absolute", "top-2", "right-2", "bg-base-200", 3, "click"], [1, "p-2", "space-y-2", "flex-1", "h-[calc(100%-19.75rem)]", "overflow-auto"], ["actions", "", 1, "z-0", "pb-2", "border-b"], [1, "text-xl", "font-medium", "mb-2", "mt-4"], ["details", "", 1, "space-y-2", "pb-2", "border-b"], [1, "text-xl", "font-medium"], [1, "flex", "items-center", "space-x-2"], ["facilities", "", "class", "space-y-2 pb-2 border-b", 4, "ngIf"], ["map", "", "class", "w-full mx-auto h-64 sm:h-48 relative border border-base-200 overflow-hidden rounded", 4, "ngIf"], [1, "px-2", "pt-2", "pb-[5.5rem]", "border-t", "border-base-200", "shadow", "sm:hidden"], ["btn", "", "matRipple", "", "name", "toggle-desk-details", 1, "w-full", 3, "click"], [1, "flex", "items-center", "justify-center"], [1, "text-2xl"], [1, "absolute", "inset-0", 3, "images"], ["facilities", "", 1, "space-y-2", "pb-2", "border-b"], ["class", "flex items-center flex-wrap space-x-2", 4, "ngFor", "ngForOf"], [1, "flex", "items-center", "flex-wrap", "space-x-2"], ["for", "feat", 1, "flex-1", "w-1/2"], ["map", "", 1, "w-full", "mx-auto", "h-64", "sm:h-48", "relative", "border", "border-base-200", "overflow-hidden", "rounded"], [1, "pointer-events-none", 3, "src", "focus", "features", "options"], ["empty", "", 1, "p-16", "flex", "flex-col", "items-center", "justify-center", "space-y-2"], [1, "opacity-30", "text-center"]];
  },
  template: function DeskDetailsComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵtemplate(0, DeskDetailsComponent_ng_container_0_Template, 40, 25, "ng-container", 5)(1, DeskDetailsComponent_ng_template_1_Template, 3, 0, "ng-template", null, 0, i0.ɵɵtemplateRefExtractor);
    }
    if (rf & 2) {
      var emptyState_r4 = i0.ɵɵreference(2);
      i0.ɵɵproperty("ngIf", ctx.desk)("ngIfElse", emptyState_r4);
    }
  },
  dependencies: [i1.NgForOf, i1.NgIf, i2.IconComponent, i3.InteractiveMapComponent, i4.ImageCarouselComponent, i5.MatRipple],
  styles: ["[_nghost-%COMP%] {\n                display: flex;\n                flex-direction: column;\n                width: 30%;\n                min-width: 20rem;\n                height: 100%;\n                min-height: 65vh;\n                background: white;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRlc2stZGV0YWlscy5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLGFBQWE7Z0JBQ2Isc0JBQXNCO2dCQUN0QixVQUFVO2dCQUNWLGdCQUFnQjtnQkFDaEIsWUFBWTtnQkFDWixnQkFBZ0I7Z0JBQ2hCLGlCQUFpQjtZQUNyQiIsImZpbGUiOiJkZXNrLWRldGFpbHMuY29tcG9uZW50LnRzIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICA6aG9zdCB7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgICAgICAgIHdpZHRoOiAzMCU7XG4gICAgICAgICAgICAgICAgbWluLXdpZHRoOiAyMHJlbTtcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgICAgICAgICAgbWluLWhlaWdodDogNjV2aDtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiB3aGl0ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl19 */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvYm9va2luZ3Mvc3JjL2xpYi9kZXNrLXNlbGVjdC1tb2RhbC9kZXNrLWRldGFpbHMuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxhQUFhO2dCQUNiLHNCQUFzQjtnQkFDdEIsVUFBVTtnQkFDVixnQkFBZ0I7Z0JBQ2hCLFlBQVk7Z0JBQ1osZ0JBQWdCO2dCQUNoQixpQkFBaUI7WUFDckI7O0FBRVosd3VCQUF3dUIiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIDpob3N0IHtcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgICAgICAgICAgd2lkdGg6IDMwJTtcbiAgICAgICAgICAgICAgICBtaW4td2lkdGg6IDIwcmVtO1xuICAgICAgICAgICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgICAgICAgICBtaW4taGVpZ2h0OiA2NXZoO1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IHdoaXRlO1xuICAgICAgICAgICAgfVxuICAgICAgICAiXSwic291cmNlUm9vdCI6IiJ9 */"]
});
exports.DeskDetailsComponent = DeskDetailsComponent;

/***/ }),

/***/ 24174:
/*!***********************************************************************************!*\
  !*** ./libs/bookings/src/lib/desk-select-modal/desk-filters-display.component.ts ***!
  \***********************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _taggedTemplateLiteral = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js */ 9959)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _callSuper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/callSuper.js */ 8513)["default"]);
var _inherits = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/inherits.js */ 58160)["default"]);
var _DeskFiltersDisplayComponent, _templateObject, _templateObject2, _templateObject3, _templateObject4;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.DeskFiltersDisplayComponent = void 0;
var core_1 = __webpack_require__(/*! @angular/core */ 37580);
var bottom_sheet_1 = __webpack_require__(/*! @angular/material/bottom-sheet */ 15244);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var desk_filters_component_1 = __webpack_require__(/*! ./desk-filters.component */ 4365);
var booking_form_service_1 = __webpack_require__(/*! ../booking-form.service */ 18379);
var date_fns_1 = __webpack_require__(/*! date-fns */ 25773);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @angular/material/bottom-sheet */ 15244);
var i2 = __webpack_require__(/*! ../booking-form.service */ 18379);
var i3 = __webpack_require__(/*! @placeos/common */ 22797);
var i4 = __webpack_require__(/*! @angular/common */ 60316);
var i5 = __webpack_require__(/*! ../../../../components/src/lib/icon.component */ 69434);
var i6 = __webpack_require__(/*! @angular/material/core */ 74646);
var _c0 = function _c0() {
  return [];
};
function DeskFiltersDisplayComponent_ng_container_13_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵtext(1);
    i0.ɵɵpipe(2, "date");
    i0.ɵɵpipe(3, "date");
    i0.ɵɵelementContainerEnd();
  }
  if (rf & 2) {
    var ctx_r0 = i0.ɵɵnextContext();
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate2(" ", i0.ɵɵpipeBind2(2, 2, ctx_r0.start, ctx_r0.time_format), " \u2014 ", i0.ɵɵpipeBind2(3, 5, ctx_r0.end, ctx_r0.time_format), " ");
  }
}
function DeskFiltersDisplayComponent_ng_container_14_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵtext(1, "All Day");
    i0.ɵɵelementContainerEnd();
  }
}
function DeskFiltersDisplayComponent_div_15_Template(rf, ctx) {
  if (rf & 1) {
    var _r2 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 15)(1, "p");
    i0.ɵɵtext(2);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(3, "button", 16);
    i0.ɵɵlistener("click", function DeskFiltersDisplayComponent_div_15_Template_button_click_3_listener() {
      var feat_r3 = i0.ɵɵrestoreView(_r2).$implicit;
      var ctx_r0 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r0.setFeature(feat_r3, false));
    });
    i0.ɵɵelementStart(4, "app-icon");
    i0.ɵɵtext(5, "close");
    i0.ɵɵelementEnd()()();
  }
  if (rf & 2) {
    var feat_r3 = ctx.$implicit;
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate(feat_r3);
  }
}
function DeskFiltersDisplayComponent_div_17_Template(rf, ctx) {
  if (rf & 1) {
    var _r4 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 17)(1, "span");
    i0.ɵɵi18n(2, 3);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(3, "button", 18);
    i0.ɵɵlistener("click", function DeskFiltersDisplayComponent_div_17_Template_button_click_3_listener() {
      i0.ɵɵrestoreView(_r4);
      var ctx_r0 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r0.setOptions({
        show_fav: false
      }));
    });
    i0.ɵɵelementStart(4, "app-icon");
    i0.ɵɵtext(5, "close");
    i0.ɵɵelementEnd()()();
  }
}
var DeskFiltersDisplayComponent = /*#__PURE__*/function (_common_1$AsyncHandle) {
  function DeskFiltersDisplayComponent(_bsheet, _state, _settings) {
    var _this;
    _classCallCheck(this, DeskFiltersDisplayComponent);
    _this = _callSuper(this, DeskFiltersDisplayComponent);
    _this._bsheet = _bsheet;
    _this._state = _state;
    _this._settings = _settings;
    _this.view = 'list';
    _this.viewChange = new core_1.EventEmitter();
    _this.options = _this._state.options;
    _this.setOptions = function (o) {
      return _this._state.setOptions(o);
    };
    _this.setFeature = function (f, e) {
      return _this._state.setFeature(f, e);
    };
    _this.editFilter = function () {
      return _this._bsheet.open(desk_filters_component_1.DeskFiltersComponent);
    };
    return _this;
  }
  _inherits(DeskFiltersDisplayComponent, _common_1$AsyncHandle);
  return _createClass(DeskFiltersDisplayComponent, [{
    key: "all_day",
    get: function get() {
      return this._state.form.value.all_day;
    }
  }, {
    key: "start",
    get: function get() {
      return this._state.form.value.date;
    }
  }, {
    key: "end",
    get: function get() {
      var _this$_state$form$val = this._state.form.value,
        date = _this$_state$form$val.date,
        duration = _this$_state$form$val.duration,
        all_day = _this$_state$form$val.all_day;
      if (all_day) return (0, date_fns_1.endOfDay)(date);
      return date + duration * 60 * 1000;
    }
  }, {
    key: "time_format",
    get: function get() {
      return this._settings.time_format;
    }
  }]);
}(common_1.AsyncHandler);
_DeskFiltersDisplayComponent = DeskFiltersDisplayComponent;
_DeskFiltersDisplayComponent.ɵfac = function DeskFiltersDisplayComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _DeskFiltersDisplayComponent)(i0.ɵɵdirectiveInject(i1.MatBottomSheet), i0.ɵɵdirectiveInject(i2.BookingFormService), i0.ɵɵdirectiveInject(i3.SettingsService));
};
_DeskFiltersDisplayComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _DeskFiltersDisplayComponent,
  selectors: [["desk-filters-display"]],
  inputs: {
    view: "view"
  },
  outputs: {
    viewChange: "viewChange"
  },
  features: [i0.ɵɵInheritDefinitionFeature],
  decls: 19,
  vars: 17,
  consts: function consts() {
    var i18n_0;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_5208858215712453646$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_FILTERS_DISPLAY_COMPONENT_TS_0 = goog.getMsg(" Filters ");
      i18n_0 = MSG_EXTERNAL_5208858215712453646$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_FILTERS_DISPLAY_COMPONENT_TS_0;
    } else {
      i18n_0 = $localize(_templateObject || (_templateObject = _taggedTemplateLiteral([":\u241F19eaa5cd51d70d9ea957eecac78cfd811e9b93d8\u241F5208858215712453646: Filters "])));
    }
    var i18n_1;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_8553228906889869186$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_FILTERS_DISPLAY_COMPONENT_TS_1 = goog.getMsg(" Map ");
      i18n_1 = MSG_EXTERNAL_8553228906889869186$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_FILTERS_DISPLAY_COMPONENT_TS_1;
    } else {
      i18n_1 = $localize(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([":\u241F992a9a6a193a56c5b8846dc972c5e1977ee5f1aa\u241F8553228906889869186: Map "])));
    }
    var i18n_2;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_7787942140742011951$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_FILTERS_DISPLAY_COMPONENT_TS_2 = goog.getMsg(" List ");
      i18n_2 = MSG_EXTERNAL_7787942140742011951$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_FILTERS_DISPLAY_COMPONENT_TS_2;
    } else {
      i18n_2 = $localize(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([":\u241F4b286e90831dd637c5cd3eb20544664ee7112669\u241F7787942140742011951: List "])));
    }
    var i18n_3;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_1305804744685886428$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_FILTERS_DISPLAY_COMPONENT_TS_3 = goog.getMsg("Favourites Only");
      i18n_3 = MSG_EXTERNAL_1305804744685886428$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_FILTERS_DISPLAY_COMPONENT_TS_3;
    } else {
      i18n_3 = $localize(_templateObject4 || (_templateObject4 = _taggedTemplateLiteral([":\u241Fd6ad8326be48837fe776a268abc758d1c7ba4f05\u241F1305804744685886428:Favourites Only"])));
    }
    return [i18n_0, i18n_1, i18n_2, i18n_3, ["actions", "", 1, "sm:hidden", "space-x-2", "flex", "flex-row", "items-center", "p-2"], ["btn", "", "matRipple", "", "name", "edit-desk-filters", 1, "flex-1", "w-1/2", 3, "click"], [1, "flex", "items-center"], ["btn", "", "matRipple", "", "name", "view-desk-map", 1, "rounded-l", "rounded-r-none", 3, "click"], ["btn", "", "matRipple", "", "name", "view-desk-list", 1, "rounded-r", "rounded-l-none", 3, "click"], ["filters", "", 1, "flex", "items-center", "flex-wrap", "p-2", "w-[35rem]", "max-w-full", "sm:max-w-[35rem]"], ["filter-item", "", "date", ""], ["filter-item", "", "time", ""], [4, "ngIf"], ["filter-item", "", "features", "", 4, "ngFor", "ngForOf"], ["filter-item", "", 4, "ngIf"], ["filter-item", "", "features", ""], ["icon", "", "matRipple", "", "name", "remove-desk-filter", 1, "-mr-4", 3, "click"], ["filter-item", ""], ["icon", "", "matRipple", "", "name", "remove-desk-favs-filter", 1, "-mr-4", 3, "click"]];
  },
  template: function DeskFiltersDisplayComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵelementStart(0, "section", 4)(1, "button", 5);
      i0.ɵɵlistener("click", function DeskFiltersDisplayComponent_Template_button_click_1_listener() {
        return ctx.editFilter();
      });
      i0.ɵɵi18n(2, 0);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(3, "div", 6)(4, "button", 7);
      i0.ɵɵlistener("click", function DeskFiltersDisplayComponent_Template_button_click_4_listener() {
        ctx.view = "map";
        return ctx.viewChange.emit(ctx.view);
      });
      i0.ɵɵi18n(5, 1);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(6, "button", 8);
      i0.ɵɵlistener("click", function DeskFiltersDisplayComponent_Template_button_click_6_listener() {
        ctx.view = "list";
        return ctx.viewChange.emit(ctx.view);
      });
      i0.ɵɵi18n(7, 2);
      i0.ɵɵelementEnd()()();
      i0.ɵɵelementStart(8, "section", 9)(9, "div", 10);
      i0.ɵɵtext(10);
      i0.ɵɵpipe(11, "date");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(12, "div", 11);
      i0.ɵɵtemplate(13, DeskFiltersDisplayComponent_ng_container_13_Template, 4, 8, "ng-container", 12)(14, DeskFiltersDisplayComponent_ng_container_14_Template, 2, 0, "ng-container", 12);
      i0.ɵɵelementEnd();
      i0.ɵɵtemplate(15, DeskFiltersDisplayComponent_div_15_Template, 6, 1, "div", 13);
      i0.ɵɵpipe(16, "async");
      i0.ɵɵtemplate(17, DeskFiltersDisplayComponent_div_17_Template, 6, 0, "div", 14);
      i0.ɵɵpipe(18, "async");
      i0.ɵɵelementEnd();
    }
    if (rf & 2) {
      var tmp_5_0;
      var tmp_6_0;
      i0.ɵɵadvance(4);
      i0.ɵɵclassProp("inverse", ctx.view !== "map");
      i0.ɵɵadvance(2);
      i0.ɵɵclassProp("inverse", ctx.view !== "list");
      i0.ɵɵadvance(4);
      i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(11, 9, ctx.start, "mediumDate"));
      i0.ɵɵadvance(3);
      i0.ɵɵproperty("ngIf", !ctx.all_day);
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", ctx.all_day);
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngForOf", ((tmp_5_0 = i0.ɵɵpipeBind1(16, 12, ctx.options)) == null ? null : tmp_5_0.features) || i0.ɵɵpureFunction0(16, _c0));
      i0.ɵɵadvance(2);
      i0.ɵɵproperty("ngIf", (tmp_6_0 = i0.ɵɵpipeBind1(18, 14, ctx.options)) == null ? null : tmp_6_0.show_fav);
    }
  },
  dependencies: [i4.NgForOf, i4.NgIf, i5.IconComponent, i6.MatRipple, i4.AsyncPipe, i4.DatePipe],
  styles: ["[filter-item][_ngcontent-%COMP%] {\n                display: flex;\n                align-items: center;\n                padding: 0 1rem;\n                height: 2rem;\n                font-size: 0.875rem;\n                border: 1px solid rgba(0, 0, 0, 0.2);\n                border-radius: 1.25rem;\n                margin-right: 0.5rem;\n                margin-bottom: 0.5rem;\n            }\n\n            [filter-item][_ngcontent-%COMP%]:hover {\n                background: rgba(0, 0, 0, 0.1);\n            }\n\n            [filter-item][_ngcontent-%COMP%]    > *[_ngcontent-%COMP%]    + *[_ngcontent-%COMP%] {\n                margin-left: 0.5rem;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRlc2stZmlsdGVycy1kaXNwbGF5LmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1lBQ1k7Z0JBQ0ksYUFBYTtnQkFDYixtQkFBbUI7Z0JBQ25CLGVBQWU7Z0JBQ2YsWUFBWTtnQkFDWixtQkFBbUI7Z0JBQ25CLG9DQUFvQztnQkFDcEMsc0JBQXNCO2dCQUN0QixvQkFBb0I7Z0JBQ3BCLHFCQUFxQjtZQUN6Qjs7WUFFQTtnQkFDSSw4QkFBOEI7WUFDbEM7O1lBRUE7Z0JBQ0ksbUJBQW1CO1lBQ3ZCIiwiZmlsZSI6ImRlc2stZmlsdGVycy1kaXNwbGF5LmNvbXBvbmVudC50cyIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgW2ZpbHRlci1pdGVtXSB7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICAgICAgICAgIHBhZGRpbmc6IDAgMXJlbTtcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDJyZW07XG4gICAgICAgICAgICAgICAgZm9udC1zaXplOiAwLjg3NXJlbTtcbiAgICAgICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCByZ2JhKDAsIDAsIDAsIDAuMik7XG4gICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMS4yNXJlbTtcbiAgICAgICAgICAgICAgICBtYXJnaW4tcmlnaHQ6IDAuNXJlbTtcbiAgICAgICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAwLjVyZW07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIFtmaWx0ZXItaXRlbV06aG92ZXIge1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IHJnYmEoMCwgMCwgMCwgMC4xKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgW2ZpbHRlci1pdGVtXSA+ICogKyAqIHtcbiAgICAgICAgICAgICAgICBtYXJnaW4tbGVmdDogMC41cmVtO1xuICAgICAgICAgICAgfVxuICAgICAgICAiXX0= */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvYm9va2luZ3Mvc3JjL2xpYi9kZXNrLXNlbGVjdC1tb2RhbC9kZXNrLWZpbHRlcnMtZGlzcGxheS5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLGFBQWE7Z0JBQ2IsbUJBQW1CO2dCQUNuQixlQUFlO2dCQUNmLFlBQVk7Z0JBQ1osbUJBQW1CO2dCQUNuQixvQ0FBb0M7Z0JBQ3BDLHNCQUFzQjtnQkFDdEIsb0JBQW9CO2dCQUNwQixxQkFBcUI7WUFDekI7O1lBRUE7Z0JBQ0ksOEJBQThCO1lBQ2xDOztZQUVBO2dCQUNJLG1CQUFtQjtZQUN2Qjs7QUFFWixvd0NBQW93QyIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgW2ZpbHRlci1pdGVtXSB7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICAgICAgICAgIHBhZGRpbmc6IDAgMXJlbTtcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDJyZW07XG4gICAgICAgICAgICAgICAgZm9udC1zaXplOiAwLjg3NXJlbTtcbiAgICAgICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCByZ2JhKDAsIDAsIDAsIDAuMik7XG4gICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMS4yNXJlbTtcbiAgICAgICAgICAgICAgICBtYXJnaW4tcmlnaHQ6IDAuNXJlbTtcbiAgICAgICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAwLjVyZW07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIFtmaWx0ZXItaXRlbV06aG92ZXIge1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IHJnYmEoMCwgMCwgMCwgMC4xKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgW2ZpbHRlci1pdGVtXSA+ICogKyAqIHtcbiAgICAgICAgICAgICAgICBtYXJnaW4tbGVmdDogMC41cmVtO1xuICAgICAgICAgICAgfVxuICAgICAgICAiXSwic291cmNlUm9vdCI6IiJ9 */"]
});
exports.DeskFiltersDisplayComponent = DeskFiltersDisplayComponent;

/***/ }),

/***/ 4365:
/*!***************************************************************************!*\
  !*** ./libs/bookings/src/lib/desk-select-modal/desk-filters.component.ts ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _taggedTemplateLiteral = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js */ 9959)["default"]);
var _slicedToArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/slicedToArray.js */ 6282)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _DeskFiltersComponent, _templateObject, _templateObject2, _templateObject3, _templateObject4, _templateObject5, _templateObject6, _templateObject7, _templateObject8, _templateObject9, _templateObject10, _templateObject11, _templateObject12, _templateObject13;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.DeskFiltersComponent = void 0;
var bottom_sheet_1 = __webpack_require__(/*! @angular/material/bottom-sheet */ 15244);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var date_fns_1 = __webpack_require__(/*! date-fns */ 25773);
var organisation_service_1 = __webpack_require__(/*! libs/organisation/src/lib/organisation.service */ 19863);
var booking_form_service_1 = __webpack_require__(/*! ../booking-form.service */ 18379);
var operators_1 = __webpack_require__(/*! rxjs/operators */ 97303);
var rxjs_1 = __webpack_require__(/*! rxjs */ 15681);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @angular/material/bottom-sheet */ 15244);
var i2 = __webpack_require__(/*! ../booking-form.service */ 18379);
var i3 = __webpack_require__(/*! libs/organisation/src/lib/organisation.service */ 19863);
var i4 = __webpack_require__(/*! @placeos/common */ 22797);
var i5 = __webpack_require__(/*! @angular/common */ 60316);
var i6 = __webpack_require__(/*! @angular/forms */ 34456);
var i7 = __webpack_require__(/*! @angular/material/form-field */ 24950);
var i8 = __webpack_require__(/*! @angular/material/checkbox */ 97024);
var i9 = __webpack_require__(/*! @angular/material/core */ 74646);
var i10 = __webpack_require__(/*! ../../../../form-fields/src/lib/date-field.component */ 19608);
var i11 = __webpack_require__(/*! ../../../../form-fields/src/lib/duration-field.component */ 83476);
var i12 = __webpack_require__(/*! ../../../../form-fields/src/lib/time-field.component */ 81413);
var i13 = __webpack_require__(/*! ../../../../components/src/lib/icon.component */ 69434);
var i14 = __webpack_require__(/*! @angular/material/select */ 25175);
var i15 = __webpack_require__(/*! ../../../../components/src/lib/building.pipe */ 56062);
var i16 = __webpack_require__(/*! @ngx-translate/core */ 597);
var _c0 = function _c0() {
  return {
    standalone: true
  };
};
var _c1 = function _c1() {
  return [];
};
function DeskFiltersComponent_button_2_Template(rf, ctx) {
  if (rf & 1) {
    var _r1 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "button", 33);
    i0.ɵɵlistener("click", function DeskFiltersComponent_button_2_Template_button_click_0_listener() {
      i0.ɵɵrestoreView(_r1);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.close());
    });
    i0.ɵɵelementStart(1, "app-icon");
    i0.ɵɵtext(2, "keyboard_arrow_left");
    i0.ɵɵelementEnd()();
  }
}
function DeskFiltersComponent_mat_form_field_13_mat_option_2_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "mat-option", 37);
    i0.ɵɵtext(1);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var reg_r4 = ctx.$implicit;
    i0.ɵɵproperty("value", reg_r4);
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", reg_r4.display_name || reg_r4.name, " ");
  }
}
function DeskFiltersComponent_mat_form_field_13_Template(rf, ctx) {
  if (rf & 1) {
    var _r3 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "mat-form-field", 34)(1, "mat-select", 35);
    i0.ɵɵlistener("ngModelChange", function DeskFiltersComponent_mat_form_field_13_Template_mat_select_ngModelChange_1_listener($event) {
      i0.ɵɵrestoreView(_r3);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.setRegion($event));
    });
    i0.ɵɵtemplate(2, DeskFiltersComponent_mat_form_field_13_mat_option_2_Template, 2, 2, "mat-option", 36);
    i0.ɵɵpipe(3, "async");
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngModel", ctx_r1.region)("ngModelOptions", i0.ɵɵpureFunction0(5, _c0));
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngForOf", i0.ɵɵpipeBind1(3, 3, ctx_r1.regions));
  }
}
function DeskFiltersComponent_mat_form_field_15_mat_option_5_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "mat-option", 37);
    i0.ɵɵtext(1);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var bld_r6 = ctx.$implicit;
    i0.ɵɵproperty("value", bld_r6);
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", bld_r6.display_name || bld_r6.name, " ");
  }
}
function DeskFiltersComponent_mat_form_field_15_Template(rf, ctx) {
  if (rf & 1) {
    var _r5 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "mat-form-field", 34)(1, "mat-select", 38);
    i0.ɵɵpipe(2, "async");
    i0.ɵɵpipe(3, "async");
    i0.ɵɵpipe(4, "async");
    i0.ɵɵlistener("ngModelChange", function DeskFiltersComponent_mat_form_field_15_Template_mat_select_ngModelChange_1_listener($event) {
      i0.ɵɵrestoreView(_r5);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.setBuilding($event));
    });
    i0.ɵɵtemplate(5, DeskFiltersComponent_mat_form_field_15_mat_option_5_Template, 2, 2, "mat-option", 36);
    i0.ɵɵpipe(6, "async");
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var tmp_3_0;
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngModel", i0.ɵɵpipeBind1(2, 4, ctx_r1.building))("ngModelOptions", i0.ɵɵpureFunction0(12, _c0))("placeholder", ((tmp_3_0 = i0.ɵɵpipeBind1(3, 6, ctx_r1.building)) == null ? null : tmp_3_0.display_name) || ((tmp_3_0 = i0.ɵɵpipeBind1(4, 8, ctx_r1.building)) == null ? null : tmp_3_0.name));
    i0.ɵɵadvance(4);
    i0.ɵɵproperty("ngForOf", i0.ɵɵpipeBind1(6, 10, ctx_r1.buildings));
  }
}
function DeskFiltersComponent_mat_form_field_17_mat_option_3_div_2_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 42);
    i0.ɵɵtext(1);
    i0.ɵɵpipe(2, "building");
    i0.ɵɵelementStart(3, "span", 43);
    i0.ɵɵtext(4, " - ");
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var tmp_4_0;
    var lvl_r8 = i0.ɵɵnextContext().$implicit;
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", (tmp_4_0 = i0.ɵɵpipeBind1(2, 1, lvl_r8.parent_id)) == null ? null : tmp_4_0.display_name, " ");
  }
}
function DeskFiltersComponent_mat_form_field_17_mat_option_3_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "mat-option", 37)(1, "div", 40);
    i0.ɵɵtemplate(2, DeskFiltersComponent_mat_form_field_17_mat_option_3_div_2_Template, 5, 3, "div", 41);
    i0.ɵɵelementStart(3, "div");
    i0.ɵɵtext(4);
    i0.ɵɵelementEnd()()();
  }
  if (rf & 2) {
    var lvl_r8 = ctx.$implicit;
    var ctx_r1 = i0.ɵɵnextContext(2);
    i0.ɵɵproperty("value", lvl_r8.id);
    i0.ɵɵadvance(2);
    i0.ɵɵproperty("ngIf", ctx_r1.use_region);
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate1(" ", lvl_r8.display_name || lvl_r8.name, " ");
  }
}
function DeskFiltersComponent_mat_form_field_17_Template(rf, ctx) {
  if (rf & 1) {
    var _r7 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "mat-form-field", 34)(1, "mat-select", 39);
    i0.ɵɵpipe(2, "async");
    i0.ɵɵlistener("ngModelChange", function DeskFiltersComponent_mat_form_field_17_Template_mat_select_ngModelChange_1_listener($event) {
      i0.ɵɵrestoreView(_r7);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.setOptions({
        zone_id: $event
      }));
    });
    i0.ɵɵtemplate(3, DeskFiltersComponent_mat_form_field_17_mat_option_3_Template, 5, 3, "mat-option", 36);
    i0.ɵɵpipe(4, "async");
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var tmp_1_0;
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngModel", (tmp_1_0 = i0.ɵɵpipeBind1(2, 3, ctx_r1.options)) == null ? null : tmp_1_0.zone_id)("ngModelOptions", i0.ɵɵpureFunction0(7, _c0));
    i0.ɵɵadvance(2);
    i0.ɵɵproperty("ngForOf", i0.ɵɵpipeBind1(4, 5, ctx_r1.levels));
  }
}
function DeskFiltersComponent_div_24_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 44)(1, "mat-checkbox", 45);
    i0.ɵɵi18n(2, 6);
    i0.ɵɵelementEnd()();
  }
}
function DeskFiltersComponent_div_25_Template(rf, ctx) {
  if (rf & 1) {
    var _r9 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 46)(1, "div", 47)(2, "label");
    i0.ɵɵi18n(3, 7);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(4, "a-time-field", 48);
    i0.ɵɵlistener("ngModelChange", function DeskFiltersComponent_div_25_Template_a_time_field_ngModelChange_4_listener($event) {
      i0.ɵɵrestoreView(_r9);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.form.patchValue({
        date: $event
      }));
    });
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(5, "div", 47)(6, "label");
    i0.ɵɵi18n(7, 8);
    i0.ɵɵelementEnd();
    i0.ɵɵelement(8, "a-duration-field", 49);
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var tmp_5_0;
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance(4);
    i0.ɵɵproperty("ngModel", ctx_r1.form.value.date)("ngModelOptions", i0.ɵɵpureFunction0(10, _c0))("use_24hr", ctx_r1.use_24hr)("timezone", ctx_r1.timezone);
    i0.ɵɵadvance(4);
    i0.ɵɵproperty("time", (tmp_5_0 = ctx_r1.form.get("date")) == null ? null : tmp_5_0.value)("max", 10 * 60)("min", 60)("step", 60)("use_24hr", ctx_r1.use_24hr)("timezone", ctx_r1.timezone);
  }
}
function DeskFiltersComponent_section_36_div_3_Template(rf, ctx) {
  if (rf & 1) {
    var _r10 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 52)(1, "div", 53);
    i0.ɵɵtext(2);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(3, "mat-checkbox", 54);
    i0.ɵɵpipe(4, "async");
    i0.ɵɵlistener("ngModelChange", function DeskFiltersComponent_section_36_div_3_Template_mat_checkbox_ngModelChange_3_listener($event) {
      var feat_r11 = i0.ɵɵrestoreView(_r10).$implicit;
      var ctx_r1 = i0.ɵɵnextContext(2);
      return i0.ɵɵresetView(ctx_r1.setFeature(feat_r11, $event));
    });
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var tmp_4_0;
    var feat_r11 = ctx.$implicit;
    var ctx_r1 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate(feat_r11);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngModel", (((tmp_4_0 = i0.ɵɵpipeBind1(4, 3, ctx_r1.options)) == null ? null : tmp_4_0.features) || i0.ɵɵpureFunction0(5, _c1)).includes(feat_r11))("ngModelOptions", i0.ɵɵpureFunction0(6, _c0));
  }
}
function DeskFiltersComponent_section_36_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "section", 50)(1, "h2", 27);
    i0.ɵɵi18n(2, 9);
    i0.ɵɵelementEnd();
    i0.ɵɵtemplate(3, DeskFiltersComponent_section_36_div_3_Template, 5, 7, "div", 51);
    i0.ɵɵpipe(4, "async");
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance(3);
    i0.ɵɵproperty("ngForOf", i0.ɵɵpipeBind1(4, 1, ctx_r1.features));
  }
}
function DeskFiltersComponent_div_38_Template(rf, ctx) {
  if (rf & 1) {
    var _r12 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 55)(1, "button", 56);
    i0.ɵɵlistener("click", function DeskFiltersComponent_div_38_Template_button_click_1_listener() {
      i0.ɵɵrestoreView(_r12);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.close());
    });
    i0.ɵɵi18n(2, 10);
    i0.ɵɵelementEnd()();
  }
}
var DeskFiltersComponent = /*#__PURE__*/function () {
  function DeskFiltersComponent(_bsheet_ref, _state, _org, _settings) {
    var _this = this;
    _classCallCheck(this, DeskFiltersComponent);
    this._bsheet_ref = _bsheet_ref;
    this._state = _state;
    this._org = _org;
    this._settings = _settings;
    this.can_close = false;
    this.options = this._state.options;
    this.features = this._state.features;
    this.buildings = this._org.active_buildings;
    this.form = this._state.form;
    this.regions = this._org.region_list;
    this.levels = (0, rxjs_1.combineLatest)([this._org.active_region, this._org.active_building]).pipe((0, operators_1.map)(function (_ref) {
      var _ref2 = _slicedToArray(_ref, 2),
        region = _ref2[0],
        bld = _ref2[1];
      var level_list = _this.use_region ? _this._org.levelsForRegion(region) : _this._org.levelsForBuilding(bld);
      var viewable_levels = level_list.filter(function (lvl) {
        return !lvl.tags.includes('parking');
      });
      return viewable_levels.sort(function (a, b) {
        return a.parent_id.localeCompare(b.parent_id) || (a.display_name || '').localeCompare(b.display_name || '');
      });
    }));
    this.close = function () {
      return _this._bsheet_ref.dismiss();
    };
    this.setOptions = function (o) {
      return _this._state.setOptions(o);
    };
    this.setFeature = function (f, e) {
      return _this._state.setFeature(f, e);
    };
    this.setLevel = function (l) {};
    this.setRegion = function (r) {
      return _this._org.region = r;
    };
    this.can_close = !!this._bsheet_ref;
  }
  return _createClass(DeskFiltersComponent, [{
    key: "building",
    get: function get() {
      return this._org.building;
    },
    set: function set(bld) {
      this._org.building = bld;
    }
  }, {
    key: "region",
    get: function get() {
      return this._org.region;
    },
    set: function set(reg) {
      this._org.region = reg;
    }
  }, {
    key: "allow_time_changes",
    get: function get() {
      return !!this._settings.get('app.desks.allow_time_changes');
    }
  }, {
    key: "allow_all_day",
    get: function get() {
      return this.allow_time_changes && !!this._settings.get('app.desks.allow_all_day');
    }
  }, {
    key: "end_date",
    get: function get() {
      return (0, date_fns_1.endOfDay)((0, date_fns_1.addDays)(Date.now(), this._settings.get('app.desks.available_period') || 90));
    }
  }, {
    key: "use_24hr",
    get: function get() {
      return this._settings.get('app.use_24_hour_time');
    }
  }, {
    key: "use_region",
    get: function get() {
      return this._settings.get('app.use_region');
    }
  }, {
    key: "timezone",
    get: function get() {
      return this._settings.get('app.events.use_building_timezone') ? this._org.building.timezone : '';
    }
  }]);
}();
_DeskFiltersComponent = DeskFiltersComponent;
_DeskFiltersComponent.ɵfac = function DeskFiltersComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _DeskFiltersComponent)(i0.ɵɵdirectiveInject(i1.MatBottomSheetRef, 8), i0.ɵɵdirectiveInject(i2.BookingFormService), i0.ɵɵdirectiveInject(i3.OrganisationService), i0.ɵɵdirectiveInject(i4.SettingsService));
};
_DeskFiltersComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _DeskFiltersComponent,
  selectors: [["desk-filters"]],
  inputs: {
    hide_levels: "hide_levels"
  },
  decls: 39,
  vars: 34,
  consts: function consts() {
    var i18n_0;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_7734428352389083660$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_FILTERS_COMPONENT_TS_0 = goog.getMsg("Desk Filters");
      i18n_0 = MSG_EXTERNAL_7734428352389083660$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_FILTERS_COMPONENT_TS_0;
    } else {
      i18n_0 = $localize(_templateObject || (_templateObject = _taggedTemplateLiteral([":\u241Fa42190bd19b1cc93828e70bd0ef7a119f4c22aca\u241F7734428352389083660:Desk Filters"])));
    }
    var i18n_1;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_5028777105388019087$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_FILTERS_COMPONENT_TS_1 = goog.getMsg("Details");
      i18n_1 = MSG_EXTERNAL_5028777105388019087$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_FILTERS_COMPONENT_TS_1;
    } else {
      i18n_1 = $localize(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([":\u241F4f8b2bb476981727ab34ed40fde1218361f92c45\u241F5028777105388019087:Details"])));
    }
    var i18n_2;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_471816275243265264$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_FILTERS_COMPONENT_TS_2 = goog.getMsg("Location");
      i18n_2 = MSG_EXTERNAL_471816275243265264$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_FILTERS_COMPONENT_TS_2;
    } else {
      i18n_2 = $localize(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([":\u241Fed31c09fd77c36238c13d83635f3fe5294c733d2\u241F471816275243265264:Location"])));
    }
    var i18n_3;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_3973931101896534797$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_FILTERS_COMPONENT_TS_3 = goog.getMsg("Date");
      i18n_3 = MSG_EXTERNAL_3973931101896534797$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_FILTERS_COMPONENT_TS_3;
    } else {
      i18n_3 = $localize(_templateObject4 || (_templateObject4 = _taggedTemplateLiteral([":\u241F2f933b826a570836cab04f683970a2d22068458c\u241F3973931101896534797:Date"])));
    }
    var i18n_4;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_5010873675481014004$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_FILTERS_COMPONENT_TS_4 = goog.getMsg(" {$interpolation} ", {
        "interpolation": "\uFFFD0\uFFFD"
      }, {
        original_code: {
          "interpolation": "{{ 'COMMON.FAVOURITES' | translate }}"
        }
      });
      i18n_4 = MSG_EXTERNAL_5010873675481014004$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_FILTERS_COMPONENT_TS_4;
    } else {
      i18n_4 = $localize(_templateObject5 || (_templateObject5 = _taggedTemplateLiteral([":\u241Fbde3d9fd949ba4c6014b8e64c1362753bca1cf0c\u241F5010873675481014004: ", ":INTERPOLATION: "])), "\uFFFD0\uFFFD");
    }
    var i18n_5;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_5737771872454551963$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_FILTERS_COMPONENT_TS_5 = goog.getMsg(" {$interpolation} ", {
        "interpolation": "\uFFFD0\uFFFD"
      }, {
        original_code: {
          "interpolation": "{{ 'DESKS.SHOW_FAVOURITES' | translate }}"
        }
      });
      i18n_5 = MSG_EXTERNAL_5737771872454551963$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_FILTERS_COMPONENT_TS_5;
    } else {
      i18n_5 = $localize(_templateObject6 || (_templateObject6 = _taggedTemplateLiteral([":\u241Fcd942cf7297cb47f1a116efdedff1c8547c6ea3e\u241F5737771872454551963: ", ":INTERPOLATION: "])), "\uFFFD0\uFFFD");
    }
    var i18n_6;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_8264413387051126615$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_FILTERS_COMPONENT_TS_6 = goog.getMsg("Any Region");
      i18n_6 = MSG_EXTERNAL_8264413387051126615$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_FILTERS_COMPONENT_TS_6;
    } else {
      i18n_6 = $localize(_templateObject7 || (_templateObject7 = _taggedTemplateLiteral([":\u241F130845b58eba8e50c98f3fba117a0168cdba4f31\u241F8264413387051126615:Any Region"])));
    }
    var i18n_7;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_7323982518822503502$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_FILTERS_COMPONENT_TS_7 = goog.getMsg("Any Level");
      i18n_7 = MSG_EXTERNAL_7323982518822503502$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_FILTERS_COMPONENT_TS_7;
    } else {
      i18n_7 = $localize(_templateObject8 || (_templateObject8 = _taggedTemplateLiteral([":\u241F50407595967bf29832e873b41f9de3502d5c3e03\u241F7323982518822503502:Any Level"])));
    }
    var i18n_8;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_835486935962207481$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_FILTERS_COMPONENT_TS_8 = goog.getMsg(" All Day ");
      i18n_8 = MSG_EXTERNAL_835486935962207481$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_FILTERS_COMPONENT_TS_8;
    } else {
      i18n_8 = $localize(_templateObject9 || (_templateObject9 = _taggedTemplateLiteral([":\u241Fd7f43e20f3a729fa3de32bc7a1f709ccd722eae5\u241F835486935962207481: All Day "])));
    }
    var i18n_9;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_4204880191779081093$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_FILTERS_COMPONENT_TS_9 = goog.getMsg("Start Time");
      i18n_9 = MSG_EXTERNAL_4204880191779081093$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_FILTERS_COMPONENT_TS_9;
    } else {
      i18n_9 = $localize(_templateObject10 || (_templateObject10 = _taggedTemplateLiteral([":\u241F7c0a71d337783e527c1c8e91e433b301c5b1d8a8\u241F4204880191779081093:Start Time"])));
    }
    var i18n_10;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_3845185958891849368$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_FILTERS_COMPONENT_TS_10 = goog.getMsg("End Time");
      i18n_10 = MSG_EXTERNAL_3845185958891849368$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_FILTERS_COMPONENT_TS_10;
    } else {
      i18n_10 = $localize(_templateObject11 || (_templateObject11 = _taggedTemplateLiteral([":\u241Fe1f10d9bf4d3c37490cd5bf82007444ae7af46b1\u241F3845185958891849368:End Time"])));
    }
    var i18n_11;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_8650499415827640724$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_FILTERS_COMPONENT_TS_11 = goog.getMsg("Type");
      i18n_11 = MSG_EXTERNAL_8650499415827640724$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_FILTERS_COMPONENT_TS_11;
    } else {
      i18n_11 = $localize(_templateObject12 || (_templateObject12 = _taggedTemplateLiteral([":\u241Ff61c6867295f3b53d23557021f2f4e0aa1d0b8fc\u241F8650499415827640724:Type"])));
    }
    var i18n_12;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_2296888311792137027$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_FILTERS_COMPONENT_TS_12 = goog.getMsg(" Apply Filters ");
      i18n_12 = MSG_EXTERNAL_2296888311792137027$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_FILTERS_COMPONENT_TS_12;
    } else {
      i18n_12 = $localize(_templateObject13 || (_templateObject13 = _taggedTemplateLiteral([":\u241Fc17e2cc448524a39eb83b2937cea3235a2e8bf37\u241F2296888311792137027: Apply Filters "])));
    }
    return [i18n_0, i18n_1, i18n_2, i18n_3, i18n_4, i18n_5, i18n_8, i18n_9, i18n_10, i18n_11, i18n_12, [1, "flex", "rounded-t-md", "items-center", "border-b", "border-base-200", "pb-2", "sm:hidden"], [1, "flex-1", "pl-2"], ["icon", "", "matRipple", "", "name", "close-desk-filters", "class", "sm:hidden", 3, "click", 4, "ngIf"], [1, "font-medium", "flex-2", "text-center"], [1, "flex-1"], [1, "max-h-[65vh]", "p-2", "overflow-y-auto", "overflow-x-hidden", "divide-y", "divide-base-200", "w-full", "max-w-[100vw]", "sm:max-w-[30vw]", 3, "formGroup"], ["details", ""], [1, "text-lg", "font-medium", "mb-1"], [1, "flex-1", "min-w-[8rem]", "flex", "flex-col"], ["for", "location"], ["appearance", "outline", "class", "w-full", 4, "ngIf"], [1, "flex-1", "min-w-[256px]"], ["name", "date", 3, "ngModelChange", "ngModel", "ngModelOptions", "to", "timezone"], ["class", "flex justify-end -mt-2 mb-2", 4, "ngIf"], ["class", "flex items-center space-x-2", 4, "ngIf"], ["favs", "", 1, "space-y-2", "pb-4"], [1, "text-lg", "font-medium"], [1, "flex", "items-center"], ["for", "fav", 1, "flex-1", "w-1/2"], ["name", "fav", 3, "ngModelChange", "ngModel", "ngModelOptions"], ["class", "space-y-2", "features", "", 4, "ngIf"], ["class", "px-2 py-2 w-full border-t border-base-200", 4, "ngIf"], ["icon", "", "matRipple", "", "name", "close-desk-filters", 1, "sm:hidden", 3, "click"], ["appearance", "outline", 1, "w-full"], ["name", "region", "placeholder", i18n_6, 3, "ngModelChange", "ngModel", "ngModelOptions"], [3, "value", 4, "ngFor", "ngForOf"], [3, "value"], ["name", "building", 3, "ngModelChange", "ngModel", "ngModelOptions", "placeholder"], ["name", "location", "placeholder", i18n_7, 3, "ngModelChange", "ngModel", "ngModelOptions"], [1, "flex", "flex-col-reverse"], ["class", "opacity-30 text-xs", 4, "ngIf"], [1, "opacity-30", "text-xs"], [1, "opacity-0"], [1, "flex", "justify-end", "-mt-2", "mb-2"], ["formControlName", "all_day"], [1, "flex", "items-center", "space-x-2"], [1, "flex-1", "w-1/3"], ["name", "start-time", 3, "ngModelChange", "ngModel", "ngModelOptions", "use_24hr", "timezone"], ["formControlName", "duration", 3, "time", "max", "min", "step", "use_24hr", "timezone"], ["features", "", 1, "space-y-2"], ["class", "flex items-center flex-wrap space-x-2", 4, "ngFor", "ngForOf"], [1, "flex", "items-center", "flex-wrap", "space-x-2"], ["for", "feat", 1, "flex-1", "w-1/2"], [3, "ngModelChange", "ngModel", "ngModelOptions"], [1, "px-2", "py-2", "w-full", "border-t", "border-base-200"], ["btn", "", "matRipple", "", "name", "apply-desk-filters", 1, "w-full", 3, "click"]];
  },
  template: function DeskFiltersComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵelementStart(0, "div", 11)(1, "div", 12);
      i0.ɵɵtemplate(2, DeskFiltersComponent_button_2_Template, 3, 0, "button", 13);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(3, "h3", 14);
      i0.ɵɵi18n(4, 0);
      i0.ɵɵelementEnd();
      i0.ɵɵelement(5, "div", 15);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(6, "form", 16)(7, "section", 17)(8, "h2", 18);
      i0.ɵɵi18n(9, 1);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(10, "div", 19)(11, "label", 20);
      i0.ɵɵi18n(12, 2);
      i0.ɵɵelementEnd();
      i0.ɵɵtemplate(13, DeskFiltersComponent_mat_form_field_13_Template, 4, 6, "mat-form-field", 21);
      i0.ɵɵpipe(14, "async");
      i0.ɵɵtemplate(15, DeskFiltersComponent_mat_form_field_15_Template, 7, 13, "mat-form-field", 21);
      i0.ɵɵpipe(16, "async");
      i0.ɵɵtemplate(17, DeskFiltersComponent_mat_form_field_17_Template, 5, 8, "mat-form-field", 21);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(18, "div", 22)(19, "label");
      i0.ɵɵi18n(20, 3);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(21, "a-date-field", 23);
      i0.ɵɵlistener("ngModelChange", function DeskFiltersComponent_Template_a_date_field_ngModelChange_21_listener($event) {
        return ctx.form.patchValue({
          date: $event
        });
      });
      i0.ɵɵtext(22);
      i0.ɵɵpipe(23, "translate");
      i0.ɵɵelementEnd()();
      i0.ɵɵtemplate(24, DeskFiltersComponent_div_24_Template, 3, 0, "div", 24)(25, DeskFiltersComponent_div_25_Template, 9, 11, "div", 25);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(26, "section", 26)(27, "h2", 27);
      i0.ɵɵi18n(28, 4);
      i0.ɵɵpipe(29, "translate");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(30, "div", 28)(31, "div", 29);
      i0.ɵɵi18n(32, 5);
      i0.ɵɵpipe(33, "translate");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(34, "mat-checkbox", 30);
      i0.ɵɵpipe(35, "async");
      i0.ɵɵlistener("ngModelChange", function DeskFiltersComponent_Template_mat_checkbox_ngModelChange_34_listener($event) {
        return ctx.setOptions({
          show_fav: $event
        });
      });
      i0.ɵɵelementEnd()()();
      i0.ɵɵtemplate(36, DeskFiltersComponent_section_36_Template, 5, 3, "section", 31);
      i0.ɵɵpipe(37, "async");
      i0.ɵɵelementEnd();
      i0.ɵɵtemplate(38, DeskFiltersComponent_div_38_Template, 3, 0, "div", 32);
    }
    if (rf & 2) {
      var tmp_2_0;
      var tmp_3_0;
      var tmp_16_0;
      var tmp_18_0;
      i0.ɵɵadvance(2);
      i0.ɵɵproperty("ngIf", ctx.can_close);
      i0.ɵɵadvance(4);
      i0.ɵɵproperty("formGroup", ctx.form);
      i0.ɵɵadvance(7);
      i0.ɵɵproperty("ngIf", ctx.use_region && ((tmp_2_0 = i0.ɵɵpipeBind1(14, 18, ctx.regions)) == null ? null : tmp_2_0.length));
      i0.ɵɵadvance(2);
      i0.ɵɵproperty("ngIf", !ctx.use_region && ((tmp_3_0 = i0.ɵɵpipeBind1(16, 20, ctx.buildings)) == null ? null : tmp_3_0.length) > 1);
      i0.ɵɵadvance(2);
      i0.ɵɵproperty("ngIf", !ctx.hide_levels);
      i0.ɵɵadvance(4);
      i0.ɵɵproperty("ngModel", ctx.form.value.date)("ngModelOptions", i0.ɵɵpureFunction0(32, _c0))("to", ctx.end_date)("timezone", ctx.timezone);
      i0.ɵɵadvance();
      i0.ɵɵtextInterpolate1(" ", i0.ɵɵpipeBind1(23, 22, "FORM.DATE_ERROR"), " ");
      i0.ɵɵadvance(2);
      i0.ɵɵproperty("ngIf", ctx.allow_all_day);
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", !ctx.form.value.all_day);
      i0.ɵɵadvance(4);
      i0.ɵɵi18nExp(i0.ɵɵpipeBind1(29, 24, "COMMON.FAVOURITES"));
      i0.ɵɵi18nApply(28);
      i0.ɵɵadvance(4);
      i0.ɵɵi18nExp(i0.ɵɵpipeBind1(33, 26, "DESKS.SHOW_FAVOURITES"));
      i0.ɵɵi18nApply(32);
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngModel", (tmp_16_0 = i0.ɵɵpipeBind1(35, 28, ctx.options)) == null ? null : tmp_16_0.show_fav)("ngModelOptions", i0.ɵɵpureFunction0(33, _c0));
      i0.ɵɵadvance(2);
      i0.ɵɵproperty("ngIf", (tmp_18_0 = i0.ɵɵpipeBind1(37, 30, ctx.features)) == null ? null : tmp_18_0.length);
      i0.ɵɵadvance(2);
      i0.ɵɵproperty("ngIf", ctx.can_close);
    }
  },
  dependencies: [i5.NgForOf, i5.NgIf, i6.ɵNgNoValidate, i6.NgControlStatus, i6.NgControlStatusGroup, i6.NgModel, i6.FormGroupDirective, i6.FormControlName, i7.MatFormField, i8.MatCheckbox, i9.MatOption, i10.DateFieldComponent, i11.DurationFieldComponent, i12.TimeFieldComponent, i13.IconComponent, i14.MatSelect, i9.MatRipple, i5.AsyncPipe, i15.BuildingPipe, i16.TranslatePipe],
  styles: ["[_nghost-%COMP%] {\n                display: flex;\n                flex-direction: column;\n                width: 100%;\n                max-width: 100vw;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRlc2stZmlsdGVycy5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLGFBQWE7Z0JBQ2Isc0JBQXNCO2dCQUN0QixXQUFXO2dCQUNYLGdCQUFnQjtZQUNwQiIsImZpbGUiOiJkZXNrLWZpbHRlcnMuY29tcG9uZW50LnRzIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICA6aG9zdCB7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgICAgIG1heC13aWR0aDogMTAwdnc7XG4gICAgICAgICAgICB9XG4gICAgICAgICJdfQ== */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvYm9va2luZ3Mvc3JjL2xpYi9kZXNrLXNlbGVjdC1tb2RhbC9kZXNrLWZpbHRlcnMuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxhQUFhO2dCQUNiLHNCQUFzQjtnQkFDdEIsV0FBVztnQkFDWCxnQkFBZ0I7WUFDcEI7O0FBRVosZ2pCQUFnakIiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIDpob3N0IHtcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICAgICAgbWF4LXdpZHRoOiAxMDB2dztcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl0sInNvdXJjZVJvb3QiOiIifQ== */"]
});
exports.DeskFiltersComponent = DeskFiltersComponent;

/***/ }),

/***/ 93662:
/*!************************************************************************!*\
  !*** ./libs/bookings/src/lib/desk-select-modal/desk-list.component.ts ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _taggedTemplateLiteral = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js */ 9959)["default"]);
var _slicedToArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/slicedToArray.js */ 6282)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _DeskListComponent, _templateObject, _templateObject2;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.DeskListComponent = void 0;
var core_1 = __webpack_require__(/*! @angular/core */ 37580);
var rxjs_1 = __webpack_require__(/*! rxjs */ 15681);
var operators_1 = __webpack_require__(/*! rxjs/operators */ 97303);
var booking_form_service_1 = __webpack_require__(/*! ../booking-form.service */ 18379);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! ../booking-form.service */ 18379);
var i2 = __webpack_require__(/*! @angular/common */ 60316);
var i3 = __webpack_require__(/*! @angular/material/progress-spinner */ 41134);
var i4 = __webpack_require__(/*! ../../../../components/src/lib/icon.component */ 69434);
var i5 = __webpack_require__(/*! ../../../../components/src/lib/authenticated-image.directive */ 93208);
var i6 = __webpack_require__(/*! @angular/material/core */ 74646);
function DeskListComponent_ng_container_5_ul_1_li_1_div_3_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 22)(1, "app-icon");
    i0.ɵɵtext(2, "done");
    i0.ɵɵelementEnd()();
  }
}
function DeskListComponent_ng_container_5_ul_1_li_1_img_4_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelement(0, "img", 23);
  }
  if (rf & 2) {
    var desk_r2 = i0.ɵɵnextContext().$implicit;
    i0.ɵɵproperty("source", desk_r2.images[0]);
  }
}
function DeskListComponent_ng_container_5_ul_1_li_1_ng_template_5_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelement(0, "img", 24);
  }
}
function DeskListComponent_ng_container_5_ul_1_li_1_Template(rf, ctx) {
  if (rf & 1) {
    var _r1 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "li", 11)(1, "button", 12);
    i0.ɵɵlistener("click", function DeskListComponent_ng_container_5_ul_1_li_1_Template_button_click_1_listener() {
      var desk_r2 = i0.ɵɵrestoreView(_r1).$implicit;
      var ctx_r2 = i0.ɵɵnextContext(3);
      return i0.ɵɵresetView(ctx_r2.selectDesk(desk_r2));
    });
    i0.ɵɵelementStart(2, "div", 13);
    i0.ɵɵtemplate(3, DeskListComponent_ng_container_5_ul_1_li_1_div_3_Template, 3, 0, "div", 14)(4, DeskListComponent_ng_container_5_ul_1_li_1_img_4_Template, 1, 1, "img", 15)(5, DeskListComponent_ng_container_5_ul_1_li_1_ng_template_5_Template, 1, 0, "ng-template", null, 2, i0.ɵɵtemplateRefExtractor);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(7, "div", 16)(8, "span", 17);
    i0.ɵɵtext(9);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(10, "div", 18)(11, "app-icon", 19);
    i0.ɵɵtext(12, "place");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(13, "p", 20);
    i0.ɵɵtext(14);
    i0.ɵɵelementEnd()()()();
    i0.ɵɵelementStart(15, "button", 21);
    i0.ɵɵlistener("click", function DeskListComponent_ng_container_5_ul_1_li_1_Template_button_click_15_listener() {
      var desk_r2 = i0.ɵɵrestoreView(_r1).$implicit;
      var ctx_r2 = i0.ɵɵnextContext(3);
      return i0.ɵɵresetView(ctx_r2.toggleFav.emit(desk_r2));
    });
    i0.ɵɵelementStart(16, "app-icon");
    i0.ɵɵtext(17);
    i0.ɵɵelementEnd()()();
  }
  if (rf & 2) {
    var desk_r2 = ctx.$implicit;
    var placeholder_r4 = i0.ɵɵreference(6);
    var ctx_r2 = i0.ɵɵnextContext(3);
    i0.ɵɵclassProp("!border-info", ctx_r2.active === desk_r2.id);
    i0.ɵɵadvance(3);
    i0.ɵɵproperty("ngIf", ctx_r2.selected.includes(desk_r2.id));
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", desk_r2.images == null ? null : desk_r2.images.length)("ngIfElse", placeholder_r4);
    i0.ɵɵadvance(5);
    i0.ɵɵtextInterpolate1(" ", desk_r2.name || desk_r2.id || "Desk", " ");
    i0.ɵɵadvance(5);
    i0.ɵɵtextInterpolate1(" ", (desk_r2.zone == null ? null : desk_r2.zone.display_name) || (desk_r2.zone == null ? null : desk_r2.zone.name) || "<No Level>", " ");
    i0.ɵɵadvance();
    i0.ɵɵclassProp("text-info", ctx_r2.isFavourite(desk_r2.id));
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate(ctx_r2.isFavourite(desk_r2.id) ? "favorite" : "favorite_border");
  }
}
function DeskListComponent_ng_container_5_ul_1_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "ul", 9);
    i0.ɵɵtemplate(1, DeskListComponent_ng_container_5_ul_1_li_1_Template, 18, 10, "li", 10);
    i0.ɵɵpipe(2, "async");
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r2 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngForOf", i0.ɵɵpipeBind1(2, 1, ctx_r2.desks));
  }
}
function DeskListComponent_ng_container_5_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵtemplate(1, DeskListComponent_ng_container_5_ul_1_Template, 3, 3, "ul", 8);
    i0.ɵɵpipe(2, "async");
    i0.ɵɵelementContainerEnd();
  }
  if (rf & 2) {
    var tmp_3_0;
    var ctx_r2 = i0.ɵɵnextContext();
    var empty_state_r5 = i0.ɵɵreference(10);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", (tmp_3_0 = i0.ɵɵpipeBind1(2, 2, ctx_r2.desks)) == null ? null : tmp_3_0.length)("ngIfElse", empty_state_r5);
  }
}
function DeskListComponent_ng_template_7_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 25);
    i0.ɵɵelement(1, "mat-spinner", 26);
    i0.ɵɵelementStart(2, "p", 27);
    i0.ɵɵtext(3, "Finding available desks...");
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    i0.ɵɵadvance();
    i0.ɵɵproperty("diameter", 32);
  }
}
function DeskListComponent_ng_template_9_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 28)(1, "p", 29);
    i0.ɵɵtext(2, " No available desk for selected time and/or filters ");
    i0.ɵɵelementEnd()();
  }
}
var DeskListComponent = /*#__PURE__*/function () {
  function DeskListComponent(_state) {
    var _this = this;
    _classCallCheck(this, DeskListComponent);
    this._state = _state;
    this.active = '';
    this.selected = '';
    this.favorites = [];
    this.onSelect = new core_1.EventEmitter();
    this.toggleFav = new core_1.EventEmitter();
    this.desks = (0, rxjs_1.combineLatest)([this._state.options, this._state.available_resources]).pipe((0, operators_1.map)(function (_ref) {
      var _ref2 = _slicedToArray(_ref, 2),
        show_fav = _ref2[0].show_fav,
        _ = _ref2[1];
      return _.filter(function (i) {
        return !show_fav || _this.isFavourite(i.id);
      });
    }));
    this.loading = this._state.loading;
  }
  return _createClass(DeskListComponent, [{
    key: "isFavourite",
    value: function isFavourite(desk_id) {
      return this.favorites.includes(desk_id);
    }
  }, {
    key: "selectDesk",
    value: function selectDesk(desk) {
      this.onSelect.emit(desk);
    }
  }]);
}();
_DeskListComponent = DeskListComponent;
_DeskListComponent.ɵfac = function DeskListComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _DeskListComponent)(i0.ɵɵdirectiveInject(i1.BookingFormService));
};
_DeskListComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _DeskListComponent,
  selectors: [["desk-list"]],
  inputs: {
    active: "active",
    selected: "selected",
    favorites: "favorites"
  },
  outputs: {
    onSelect: "onSelect",
    toggleFav: "toggleFav"
  },
  decls: 11,
  vars: 7,
  consts: function consts() {
    var i18n_0;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_5968132631442328843$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_LIST_COMPONENT_TS_0 = goog.getMsg("Results");
      i18n_0 = MSG_EXTERNAL_5968132631442328843$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_LIST_COMPONENT_TS_0;
    } else {
      i18n_0 = $localize(_templateObject || (_templateObject = _taggedTemplateLiteral([":\u241F80ed5b776a26a78099e230e0e89d96c33ba44e24\u241F5968132631442328843:Results"])));
    }
    var i18n_1;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_1931205204318295377$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_LIST_COMPONENT_TS_1 = goog.getMsg(" {$interpolation} result(s) found ", {
        "interpolation": "\uFFFD0\uFFFD"
      }, {
        original_code: {
          "interpolation": "{{ (desks | async)?.length || 0 }}"
        }
      });
      i18n_1 = MSG_EXTERNAL_1931205204318295377$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_LIST_COMPONENT_TS_1;
    } else {
      i18n_1 = $localize(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([":\u241F99a2ae2a83b9fba5f9d4547746782447904ccf7b\u241F1931205204318295377: ", ":INTERPOLATION: result(s) found "])), "\uFFFD0\uFFFD");
    }
    return [["load_state", ""], ["empty_state", ""], ["placeholder", ""], i18n_0, i18n_1, [1, "font-bold"], ["count", "", 1, "text-sm", "opacity-60", "mb-4"], [4, "ngIf", "ngIfElse"], ["class", "list-style-none space-y-2", 4, "ngIf", "ngIfElse"], [1, "list-style-none", "space-y-2"], ["desk", "", "class", "relative rounded-lg w-full shadow border bg-base-100 border-base-200 overflow-hidden", 3, "!border-info", 4, "ngFor", "ngForOf"], ["desk", "", 1, "relative", "rounded-lg", "w-full", "shadow", "border", "bg-base-100", "border-base-200", "overflow-hidden"], ["name", "select-desk", "matRipple", "", 1, "w-full", "h-full", "flex", "p-2", 3, "click"], [1, "relative", "w-20", "h-20", "rounded-xl", "bg-base-200", "mr-4", "flex", "items-center", "justify-center"], ["class", "absolute top-1 left-1 border border-neutral bg-base-200 rounded-full h-6 w-6 flex items-center justify-center text-white", 4, "ngIf"], ["auth", "", "class", "object-cover h-full", 3, "source", 4, "ngIf", "ngIfElse"], [1, "space-y-2", "pt-2", "flex-1", "text-left"], [1, "font-medium"], [1, "flex", "items-center", "text-sm", "space-x-2"], [1, "text-info"], [1, "text-xs"], ["icon", "", "matRipple", "", "name", "toggle-desk-favourite", 1, "absolute", "top-1", "right-1", 3, "click"], [1, "absolute", "top-1", "left-1", "border", "border-neutral", "bg-base-200", "rounded-full", "h-6", "w-6", "flex", "items-center", "justify-center", "text-white"], ["auth", "", 1, "object-cover", "h-full", 3, "source"], ["src", "assets/icons/desk-placeholder.svg", 1, "m-auto"], ["loading", "", 1, "p-16", "flex", "flex-col", "items-center", "justify-center", "space-y-2"], [3, "diameter"], [1, "opacity-30"], ["empty", "", 1, "p-16", "flex", "flex-col", "items-center", "justify-center", "space-y-2"], [1, "opacity-30", "text-center"]];
  },
  template: function DeskListComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵelementStart(0, "h3", 5);
      i0.ɵɵi18n(1, 3);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(2, "p", 6);
      i0.ɵɵi18n(3, 4);
      i0.ɵɵpipe(4, "async");
      i0.ɵɵelementEnd();
      i0.ɵɵtemplate(5, DeskListComponent_ng_container_5_Template, 3, 4, "ng-container", 7);
      i0.ɵɵpipe(6, "async");
      i0.ɵɵtemplate(7, DeskListComponent_ng_template_7_Template, 4, 1, "ng-template", null, 0, i0.ɵɵtemplateRefExtractor)(9, DeskListComponent_ng_template_9_Template, 3, 0, "ng-template", null, 1, i0.ɵɵtemplateRefExtractor);
    }
    if (rf & 2) {
      var tmp_2_0;
      var tmp_4_0;
      var load_state_r6 = i0.ɵɵreference(8);
      i0.ɵɵadvance(4);
      i0.ɵɵi18nExp(((tmp_2_0 = i0.ɵɵpipeBind1(4, 3, ctx.desks)) == null ? null : tmp_2_0.length) || 0);
      i0.ɵɵi18nApply(3);
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", !((tmp_4_0 = i0.ɵɵpipeBind1(6, 5, ctx.loading)) == null ? null : tmp_4_0.length))("ngIfElse", load_state_r6);
    }
  },
  dependencies: [i2.NgForOf, i2.NgIf, i3.MatProgressSpinner, i4.IconComponent, i5.AuthenticatedImageDirective, i6.MatRipple, i2.AsyncPipe],
  styles: ["[_nghost-%COMP%] {\n                width: 100%;\n                height: 100%;\n                padding: 0.5rem;\n                background: rgba(0, 0, 0, 0.05);\n                overflow-y: auto;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRlc2stbGlzdC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLFdBQVc7Z0JBQ1gsWUFBWTtnQkFDWixlQUFlO2dCQUNmLCtCQUErQjtnQkFDL0IsZ0JBQWdCO1lBQ3BCIiwiZmlsZSI6ImRlc2stbGlzdC5jb21wb25lbnQudHMiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIDpob3N0IHtcbiAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgICAgICAgICAgcGFkZGluZzogMC41cmVtO1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IHJnYmEoMCwgMCwgMCwgMC4wNSk7XG4gICAgICAgICAgICAgICAgb3ZlcmZsb3cteTogYXV0bztcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl19 */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvYm9va2luZ3Mvc3JjL2xpYi9kZXNrLXNlbGVjdC1tb2RhbC9kZXNrLWxpc3QuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxXQUFXO2dCQUNYLFlBQVk7Z0JBQ1osZUFBZTtnQkFDZiwrQkFBK0I7Z0JBQy9CLGdCQUFnQjtZQUNwQjs7QUFFWiw0bUJBQTRtQiIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgOmhvc3Qge1xuICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiAwLjVyZW07XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZDogcmdiYSgwLCAwLCAwLCAwLjA1KTtcbiAgICAgICAgICAgICAgICBvdmVyZmxvdy15OiBhdXRvO1xuICAgICAgICAgICAgfVxuICAgICAgICAiXSwic291cmNlUm9vdCI6IiJ9 */"]
});
exports.DeskListComponent = DeskListComponent;

/***/ }),

/***/ 42596:
/*!***********************************************************************!*\
  !*** ./libs/bookings/src/lib/desk-select-modal/desk-map.component.ts ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _taggedTemplateLiteral = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js */ 9959)["default"]);
var _slicedToArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/slicedToArray.js */ 6282)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _callSuper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/callSuper.js */ 8513)["default"]);
var _inherits = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/inherits.js */ 58160)["default"]);
var _DeskMapComponent, _templateObject;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.DeskMapComponent = void 0;
var core_1 = __webpack_require__(/*! @angular/core */ 37580);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var operators_1 = __webpack_require__(/*! rxjs/operators */ 97303);
var booking_form_service_1 = __webpack_require__(/*! ../booking-form.service */ 18379);
var rxjs_1 = __webpack_require__(/*! rxjs */ 15681);
var explore_spaces_service_1 = __webpack_require__(/*! libs/explore/src/lib/explore-spaces.service */ 65897);
var explore_desk_info_component_1 = __webpack_require__(/*! libs/explore/src/lib/explore-desk-info.component */ 82882);
var organisation_1 = __webpack_require__(/*! @placeos/organisation */ 2510);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! ../booking-form.service */ 18379);
var i2 = __webpack_require__(/*! @placeos/common */ 22797);
var i3 = __webpack_require__(/*! @placeos/organisation */ 2510);
var i4 = __webpack_require__(/*! @angular/common */ 60316);
var i5 = __webpack_require__(/*! @angular/forms */ 34456);
var i6 = __webpack_require__(/*! @angular/material/form-field */ 24950);
var i7 = __webpack_require__(/*! @angular/material/core */ 74646);
var i8 = __webpack_require__(/*! ../../../../components/src/lib/interactive-map.component */ 24918);
var i9 = __webpack_require__(/*! @angular/material/select */ 25175);
var i10 = __webpack_require__(/*! ../../../../components/src/lib/building.pipe */ 56062);
var _c0 = function _c0() {
  return {
    controls: true
  };
};
var _c1 = function _c1() {
  return {
    standalone: true
  };
};
function DeskMapComponent_mat_form_field_1_mat_option_2_div_2_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 10);
    i0.ɵɵtext(1);
    i0.ɵɵpipe(2, "building");
    i0.ɵɵelementStart(3, "span", 11);
    i0.ɵɵtext(4, " - ");
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var tmp_4_0;
    var lvl_r3 = i0.ɵɵnextContext().$implicit;
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", (tmp_4_0 = i0.ɵɵpipeBind1(2, 1, lvl_r3.parent_id)) == null ? null : tmp_4_0.display_name, " ");
  }
}
function DeskMapComponent_mat_form_field_1_mat_option_2_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "mat-option", 7)(1, "div", 8);
    i0.ɵɵtemplate(2, DeskMapComponent_mat_form_field_1_mat_option_2_div_2_Template, 5, 3, "div", 9);
    i0.ɵɵelementStart(3, "div");
    i0.ɵɵtext(4);
    i0.ɵɵelementEnd()()();
  }
  if (rf & 2) {
    var lvl_r3 = ctx.$implicit;
    var ctx_r1 = i0.ɵɵnextContext(2);
    i0.ɵɵproperty("value", lvl_r3);
    i0.ɵɵadvance(2);
    i0.ɵɵproperty("ngIf", ctx_r1.use_region);
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate1(" ", lvl_r3.display_name || lvl_r3.name, " ");
  }
}
function DeskMapComponent_mat_form_field_1_Template(rf, ctx) {
  if (rf & 1) {
    var _r1 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "mat-form-field", 4)(1, "mat-select", 5);
    i0.ɵɵtwoWayListener("ngModelChange", function DeskMapComponent_mat_form_field_1_Template_mat_select_ngModelChange_1_listener($event) {
      i0.ɵɵrestoreView(_r1);
      var ctx_r1 = i0.ɵɵnextContext();
      i0.ɵɵtwoWayBindingSet(ctx_r1.level, $event) || (ctx_r1.level = $event);
      return i0.ɵɵresetView($event);
    });
    i0.ɵɵlistener("ngModelChange", function DeskMapComponent_mat_form_field_1_Template_mat_select_ngModelChange_1_listener($event) {
      i0.ɵɵrestoreView(_r1);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.setOptions({
        zone_ids: [$event.id]
      }));
    });
    i0.ɵɵtemplate(2, DeskMapComponent_mat_form_field_1_mat_option_2_Template, 5, 3, "mat-option", 6);
    i0.ɵɵpipe(3, "async");
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance();
    i0.ɵɵtwoWayProperty("ngModel", ctx_r1.level);
    i0.ɵɵproperty("ngModelOptions", i0.ɵɵpureFunction0(5, _c1));
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngForOf", i0.ɵɵpipeBind1(3, 3, ctx_r1.levels));
  }
}
var DeskMapComponent = /*#__PURE__*/function (_common_1$AsyncHandle) {
  function DeskMapComponent(_state, _settings, _org) {
    var _this;
    _classCallCheck(this, DeskMapComponent);
    _this = _callSuper(this, DeskMapComponent);
    _this._state = _state;
    _this._settings = _settings;
    _this._org = _org;
    _this.is_displayed = false;
    _this.active = '';
    _this.onSelect = new core_1.EventEmitter();
    _this.desks = _this._state.available_resources;
    _this.loading = _this._state.loading;
    _this.zoom = 1;
    _this.center = {
      x: 0.5,
      y: 0.5
    };
    _this.coordinates = undefined;
    _this._change = new rxjs_1.BehaviorSubject(0);
    _this.levels = (0, rxjs_1.combineLatest)([_this._org.active_region, _this._org.active_building]).pipe((0, operators_1.map)(function (_ref) {
      var _ref2 = _slicedToArray(_ref, 2),
        region = _ref2[0],
        bld = _ref2[1];
      var level_list = _this.use_region ? _this._org.levelsForRegion(region) : _this._org.levelsForBuilding(bld);
      var viewable_levels = level_list.filter(function (lvl) {
        return !lvl.tags.includes('parking');
      });
      return viewable_levels.sort(function (a, b) {
        return a.parent_id.localeCompare(b.parent_id) || (a.display_name || '').localeCompare(b.display_name || '');
      });
    }));
    _this.setOptions = function (o) {
      return _this._state.setOptions(o);
    };
    _this.actions = _this._state.available_resources.pipe((0, operators_1.map)(function (desks) {
      return desks.map(function (desk) {
        return {
          id: desk.map_id || desk.id,
          action: ['touchend', 'mouseup'],
          callback: function callback() {
            return _this.selectDesk(desk);
          }
        };
      });
    }));
    _this.features = (0, rxjs_1.combineLatest)([_this._state.resources, _this._state.available_resources]).pipe((0, operators_1.map)(function (_ref3) {
      var _ref4 = _slicedToArray(_ref3, 1),
        desks = _ref4[0];
      return _this._settings.get('app.desks.hide_user') ? [] : desks.map(function (desk) {
        return {
          location: desk.id,
          content: explore_desk_info_component_1.ExploreDeskInfoComponent,
          full_size: true,
          no_scale: true,
          data: {
            id: desk.map_id || desk.id,
            map_id: desk.name,
            name: desk.name || desk.map_id,
            user: _this._state.resourceUserName(desk.id)
          },
          z_index: 20
        };
      });
    }));
    _this.styles = (0, rxjs_1.combineLatest)([_this._state.resources, _this._state.available_resources, _this._change]).pipe((0, operators_1.map)(function (_ref5) {
      var _ref6 = _slicedToArray(_ref5, 2),
        desks = _ref6[0],
        free_desks = _ref6[1];
      return desks.reduce(function (styles, desk) {
        var colours = _this._settings.get('app.explore.colors') || {};
        var status = _this.active === desk.id ? 'active' : free_desks.find(function (_) {
          return _.id === desk.id;
        }) ? 'free' : _this._state.resourceUserName(desk.id) ? 'busy' : 'not-bookable';
        styles["#".concat(desk.map_id || desk.id)] = {
          fill: status === 'active' ? '#512DA8' : colours["desk-".concat(status)] || colours["".concat(status)] || explore_spaces_service_1.DEFAULT_COLOURS["".concat(status)]
        };
        return styles;
      }, {});
    }));
    return _this;
  }
  _inherits(DeskMapComponent, _common_1$AsyncHandle);
  return _createClass(DeskMapComponent, [{
    key: "map_url",
    get: function get() {
      var _this$level;
      return ((_this$level = this.level) === null || _this$level === void 0 ? void 0 : _this$level.map_id) || '';
    }
  }, {
    key: "use_region",
    get: function get() {
      return !!this._settings.get('app.use_region');
    }
  }, {
    key: "ngOnInit",
    value: function ngOnInit() {
      var _this2 = this;
      this.subscription('levels_update', this._state.options.subscribe(function (_ref7) {
        var zone_id = _ref7.zone_id;
        var level = _this2._org.levelWithID([zone_id]);
        if (level) _this2.level = level;
      }));
    }
  }, {
    key: "ngOnChanges",
    value: function ngOnChanges(changes) {
      if (changes.active) this._change.next(Date.now());
    }
  }, {
    key: "selectDesk",
    value: function selectDesk(desk) {
      this.onSelect.emit(desk);
    }
  }, {
    key: "setLevel",
    value: function setLevel(level) {
      this.setOptions({
        zone_id: level === null || level === void 0 ? void 0 : level.id
      });
      var bld = this._org.buildings.find(function (_) {
        return _.id === (level === null || level === void 0 ? void 0 : level.parent_id);
      });
      if (bld) {
        var _bld$location$split$m = bld.location.split(',').map(function (_) {
            return parseFloat(_);
          }),
          _bld$location$split$m2 = _slicedToArray(_bld$location$split$m, 2),
          latitude = _bld$location$split$m2[0],
          longitude = _bld$location$split$m2[1];
        this.coordinates = {
          latitude: latitude,
          longitude: longitude
        };
      }
      this.level = level;
    }
  }, {
    key: "setZoom",
    value: function setZoom(new_zoom) {
      this.zoom = Math.max(0.5, Math.min(10, new_zoom));
    }
  }, {
    key: "resetMap",
    value: function resetMap() {
      this.zoom = 1;
      this.center = {
        x: 0.5,
        y: 0.5
      };
    }
  }]);
}(common_1.AsyncHandler);
_DeskMapComponent = DeskMapComponent;
_DeskMapComponent.ɵfac = function DeskMapComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _DeskMapComponent)(i0.ɵɵdirectiveInject(i1.BookingFormService), i0.ɵɵdirectiveInject(i2.SettingsService), i0.ɵɵdirectiveInject(i3.OrganisationService));
};
_DeskMapComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _DeskMapComponent,
  selectors: [["desk-map"]],
  inputs: {
    is_displayed: "is_displayed",
    active: "active"
  },
  outputs: {
    onSelect: "onSelect"
  },
  features: [i0.ɵɵInheritDefinitionFeature, i0.ɵɵNgOnChangesFeature],
  decls: 8,
  vars: 17,
  consts: function consts() {
    var i18n_0;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_7323982518822503502$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_MAP_COMPONENT_TS_0 = goog.getMsg("Any Level");
      i18n_0 = MSG_EXTERNAL_7323982518822503502$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_MAP_COMPONENT_TS_0;
    } else {
      i18n_0 = $localize(_templateObject || (_templateObject = _taggedTemplateLiteral([":\u241F50407595967bf29832e873b41f9de3502d5c3e03\u241F7323982518822503502:Any Level"])));
    }
    return [[1, "bg-base-100", "p-2", "border-b", "border-base-200", "w-full"], ["levels", "", "appearance", "outline", "class", "w-full", 4, "ngIf"], [1, "relative", "flex-1", "w-full"], [3, "zoomChange", "centerChange", "src", "zoom", "center", "styles", "features", "actions", "options"], ["levels", "", "appearance", "outline", 1, "w-full"], ["name", "location", "placeholder", i18n_0, 3, "ngModelChange", "ngModel", "ngModelOptions"], [3, "value", 4, "ngFor", "ngForOf"], [3, "value"], [1, "flex", "flex-col-reverse"], ["class", "opacity-30 text-xs", 4, "ngIf"], [1, "opacity-30", "text-xs"], [1, "opacity-0"]];
  },
  template: function DeskMapComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵelementStart(0, "div", 0);
      i0.ɵɵtemplate(1, DeskMapComponent_mat_form_field_1_Template, 4, 6, "mat-form-field", 1);
      i0.ɵɵpipe(2, "async");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(3, "div", 2)(4, "interactive-map", 3);
      i0.ɵɵpipe(5, "async");
      i0.ɵɵpipe(6, "async");
      i0.ɵɵpipe(7, "async");
      i0.ɵɵtwoWayListener("zoomChange", function DeskMapComponent_Template_interactive_map_zoomChange_4_listener($event) {
        i0.ɵɵtwoWayBindingSet(ctx.zoom, $event) || (ctx.zoom = $event);
        return $event;
      })("centerChange", function DeskMapComponent_Template_interactive_map_centerChange_4_listener($event) {
        i0.ɵɵtwoWayBindingSet(ctx.center, $event) || (ctx.center = $event);
        return $event;
      });
      i0.ɵɵelementEnd()();
    }
    if (rf & 2) {
      var tmp_0_0;
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", (tmp_0_0 = i0.ɵɵpipeBind1(2, 8, ctx.levels)) == null ? null : tmp_0_0.length);
      i0.ɵɵadvance(3);
      i0.ɵɵproperty("src", ctx.map_url);
      i0.ɵɵtwoWayProperty("zoom", ctx.zoom)("center", ctx.center);
      i0.ɵɵproperty("styles", i0.ɵɵpipeBind1(5, 10, ctx.styles))("features", i0.ɵɵpipeBind1(6, 12, ctx.features))("actions", i0.ɵɵpipeBind1(7, 14, ctx.actions))("options", i0.ɵɵpureFunction0(16, _c0));
    }
  },
  dependencies: [i4.NgForOf, i4.NgIf, i5.NgControlStatus, i5.NgModel, i6.MatFormField, i7.MatOption, i8.InteractiveMapComponent, i9.MatSelect, i4.AsyncPipe, i10.BuildingPipe],
  styles: ["[_nghost-%COMP%] {\n                position: relative;\n                background: rgba(0, 0, 0, 0.05);\n                display: flex;\n                flex-direction: column;\n            }\n\n            button[_ngcontent-%COMP%] {\n                border-radius: 0;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRlc2stbWFwLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1lBQ1k7Z0JBQ0ksa0JBQWtCO2dCQUNsQiwrQkFBK0I7Z0JBQy9CLGFBQWE7Z0JBQ2Isc0JBQXNCO1lBQzFCOztZQUVBO2dCQUNJLGdCQUFnQjtZQUNwQiIsImZpbGUiOiJkZXNrLW1hcC5jb21wb25lbnQudHMiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIDpob3N0IHtcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZDogcmdiYSgwLCAwLCAwLCAwLjA1KTtcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGJ1dHRvbiB7XG4gICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl19 */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvYm9va2luZ3Mvc3JjL2xpYi9kZXNrLXNlbGVjdC1tb2RhbC9kZXNrLW1hcC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLGtCQUFrQjtnQkFDbEIsK0JBQStCO2dCQUMvQixhQUFhO2dCQUNiLHNCQUFzQjtZQUMxQjs7WUFFQTtnQkFDSSxnQkFBZ0I7WUFDcEI7O0FBRVosd3NCQUF3c0IiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIDpob3N0IHtcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZDogcmdiYSgwLCAwLCAwLCAwLjA1KTtcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGJ1dHRvbiB7XG4gICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl0sInNvdXJjZVJvb3QiOiIifQ== */"]
});
exports.DeskMapComponent = DeskMapComponent;

/***/ }),

/***/ 50622:
/*!********************************************************************************!*\
  !*** ./libs/bookings/src/lib/desk-select-modal/desk-select-modal.component.ts ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _taggedTemplateLiteral = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js */ 9959)["default"]);
var _toConsumableArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/toConsumableArray.js */ 86033)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _DeskSelectModalComponent, _templateObject, _templateObject2, _templateObject3, _templateObject4, _templateObject5, _templateObject6;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.DeskSelectModalComponent = exports.FAV_DESK_KEY = void 0;
var dialog_1 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var booking_form_service_1 = __webpack_require__(/*! ../booking-form.service */ 18379);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var i2 = __webpack_require__(/*! @placeos/common */ 22797);
var i3 = __webpack_require__(/*! ../booking-form.service */ 18379);
var i4 = __webpack_require__(/*! @angular/common */ 60316);
var i5 = __webpack_require__(/*! ../../../../components/src/lib/icon.component */ 69434);
var i6 = __webpack_require__(/*! @angular/material/core */ 74646);
var i7 = __webpack_require__(/*! ./desk-details.component */ 42280);
var i8 = __webpack_require__(/*! ./desk-filters.component */ 4365);
var i9 = __webpack_require__(/*! ./desk-filters-display.component */ 24174);
var i10 = __webpack_require__(/*! ./desk-list.component */ 93662);
var i11 = __webpack_require__(/*! ./desk-map.component */ 42596);
function DeskSelectModalComponent_desk_list_16_Template(rf, ctx) {
  if (rf & 1) {
    var _r2 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "desk-list", 30);
    i0.ɵɵlistener("toggleFav", function DeskSelectModalComponent_desk_list_16_Template_desk_list_toggleFav_0_listener($event) {
      i0.ɵɵrestoreView(_r2);
      var ctx_r2 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r2.toggleFavourite($event));
    })("onSelect", function DeskSelectModalComponent_desk_list_16_Template_desk_list_onSelect_0_listener($event) {
      i0.ɵɵrestoreView(_r2);
      var ctx_r2 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r2.displayed = $event);
    });
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r2 = i0.ɵɵnextContext();
    i0.ɵɵproperty("active", ctx_r2.displayed == null ? null : ctx_r2.displayed.id)("selected", ctx_r2.selected_ids)("favorites", ctx_r2.favorites);
  }
}
function DeskSelectModalComponent_button_19_Template(rf, ctx) {
  if (rf & 1) {
    var _r4 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "button", 31);
    i0.ɵɵlistener("click", function DeskSelectModalComponent_button_19_Template_button_click_0_listener() {
      i0.ɵɵrestoreView(_r4);
      var ctx_r2 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r2.displayed = null);
    });
    i0.ɵɵi18n(1, 6);
    i0.ɵɵelementEnd();
  }
}
function DeskSelectModalComponent_ng_template_37_Template(rf, ctx) {
  if (rf & 1) {
    var _r5 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "desk-map", 32);
    i0.ɵɵlistener("onSelect", function DeskSelectModalComponent_ng_template_37_Template_desk_map_onSelect_0_listener($event) {
      i0.ɵɵrestoreView(_r5);
      var ctx_r2 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r2.displayed = $event);
    });
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r2 = i0.ɵɵnextContext();
    i0.ɵɵproperty("is_displayed", !!ctx_r2.displayed)("active", ctx_r2.displayed == null ? null : ctx_r2.displayed.id);
  }
}
exports.FAV_DESK_KEY = 'favourite_desks';
var DeskSelectModalComponent = /*#__PURE__*/function () {
  function DeskSelectModalComponent(_dialog_ref, _settings, _event_form, _data) {
    _classCallCheck(this, DeskSelectModalComponent);
    this._dialog_ref = _dialog_ref;
    this._settings = _settings;
    this._event_form = _event_form;
    this._data = _data;
    this.selected = [];
    this.view = 'list';
    this.selected = _toConsumableArray(_data.items || []);
    this._event_form.setOptions(_data.options);
  }
  return _createClass(DeskSelectModalComponent, [{
    key: "selected_ids",
    get: function get() {
      return this.selected.map(function (_) {
        return _.id;
      }).join(',');
    }
  }, {
    key: "favorites",
    get: function get() {
      return this._settings.get(exports.FAV_DESK_KEY) || [];
    }
  }, {
    key: "isSelected",
    value: function isSelected(id) {
      return id && this.selected_ids.includes(id);
    }
  }, {
    key: "setSelected",
    value: function setSelected(item, state) {
      var _this = this;
      var list = this.selected.filter(function (_) {
        return _.id !== item.id;
      });
      if (state) list.push(item);
      this.selected = list;
      if (!this._data.options.group && state) {
        this.displayed = null;
        setTimeout(function () {
          return _this._dialog_ref.close([item]);
        }, 50);
      }
    }
  }, {
    key: "toggleFavourite",
    value: function toggleFavourite(item) {
      var fav_list = this.favorites;
      var new_state = !fav_list.includes(item.id);
      if (new_state) {
        this._settings.saveUserSetting(exports.FAV_DESK_KEY, [].concat(_toConsumableArray(fav_list), [item.id]));
      } else {
        this._settings.saveUserSetting(exports.FAV_DESK_KEY, fav_list.filter(function (_) {
          return _ !== item.id;
        }));
      }
    }
  }]);
}();
_DeskSelectModalComponent = DeskSelectModalComponent;
_DeskSelectModalComponent.ɵfac = function DeskSelectModalComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _DeskSelectModalComponent)(i0.ɵɵdirectiveInject(i1.MatDialogRef), i0.ɵɵdirectiveInject(i2.SettingsService), i0.ɵɵdirectiveInject(i3.BookingFormService), i0.ɵɵdirectiveInject(dialog_1.MAT_DIALOG_DATA));
};
_DeskSelectModalComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _DeskSelectModalComponent,
  selectors: [["desk-select-modal"]],
  decls: 39,
  vars: 27,
  consts: function consts() {
    var i18n_0;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_1749010714240797250$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_SELECT_MODAL_COMPONENT_TS_0 = goog.getMsg("Find Desk");
      i18n_0 = MSG_EXTERNAL_1749010714240797250$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_SELECT_MODAL_COMPONENT_TS_0;
    } else {
      i18n_0 = $localize(_templateObject || (_templateObject = _taggedTemplateLiteral([":\u241F4221741642af22ed8e17ee106c326def85e70c61\u241F1749010714240797250:Find Desk"])));
    }
    var i18n_1;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_8443571736703532556$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_SELECT_MODAL_COMPONENT_TS_1 = goog.getMsg(" View List ");
      i18n_1 = MSG_EXTERNAL_8443571736703532556$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_SELECT_MODAL_COMPONENT_TS_1;
    } else {
      i18n_1 = $localize(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([":\u241F30d3439b0e0095fe69503245f3bd7a2e9498be7c\u241F8443571736703532556: View List "])));
    }
    var i18n_2;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_819716823718458903$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_SELECT_MODAL_COMPONENT_TS_2 = goog.getMsg("Back to form");
      i18n_2 = MSG_EXTERNAL_819716823718458903$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_SELECT_MODAL_COMPONENT_TS_2;
    } else {
      i18n_2 = $localize(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([":\u241F18843b85d1a4f17fefafd07bc5cde636dca44295\u241F819716823718458903:Back to form"])));
    }
    var i18n_3;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_3611851363359647609$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_SELECT_MODAL_COMPONENT_TS_3 = goog.getMsg(" {$interpolation} desk(s) added ", {
        "interpolation": "\uFFFD0\uFFFD"
      }, {
        original_code: {
          "interpolation": "{{ selected.length }}"
        }
      });
      i18n_3 = MSG_EXTERNAL_3611851363359647609$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_SELECT_MODAL_COMPONENT_TS_3;
    } else {
      i18n_3 = $localize(_templateObject4 || (_templateObject4 = _taggedTemplateLiteral([":\u241Ff566e50852be3f327b040870cbf63b59ea3b8d8c\u241F3611851363359647609: ", ":INTERPOLATION: desk(s) added "])), "\uFFFD0\uFFFD");
    }
    var i18n_4;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_6426755559249487826$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_SELECT_MODAL_COMPONENT_TS_4 = goog.getMsg(" {$interpolation} ", {
        "interpolation": "\uFFFD0\uFFFD"
      }, {
        original_code: {
          "interpolation": "{{\n                                isSelected(displayed?.id)\n                                    ? 'Remove from Booking'\n                                    : 'Add to booking'\n                            }}"
        }
      });
      i18n_4 = MSG_EXTERNAL_6426755559249487826$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_SELECT_MODAL_COMPONENT_TS_4;
    } else {
      i18n_4 = $localize(_templateObject5 || (_templateObject5 = _taggedTemplateLiteral([":\u241Ff45c34c7afdabef75762747a20f4113d65eb2312\u241F6426755559249487826: ", ":INTERPOLATION: "])), "\uFFFD0\uFFFD");
    }
    var i18n_5;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_874721418273731876$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_SELECT_MODAL_COMPONENT_TS_5 = goog.getMsg(" Back ");
      i18n_5 = MSG_EXTERNAL_874721418273731876$$LIBS_BOOKINGS_SRC_LIB_DESK_SELECT_MODAL_DESK_SELECT_MODAL_COMPONENT_TS_5;
    } else {
      i18n_5 = $localize(_templateObject6 || (_templateObject6 = _taggedTemplateLiteral([":\u241Fccda1d41ca79703a85a3a598c1d97e040a32b766\u241F874721418273731876: Back "])));
    }
    return [["map_view", ""], i18n_0, i18n_1, i18n_2, i18n_3, i18n_4, i18n_5, [1, "w-[100vw]", "h-[100vh]", "sm:relative", "sm:w-auto", "sm:h-auto", "flex", "flex-col", "bg-base-100"], [1, "flex", "items-center", "space-x-4", "w-full"], ["icon", "", "mat-dialog-close", "", 1, "bg-base-200"], [1, "hidden", "sm:flex", "items-center", "justify-end", "flex-1"], ["btn", "", "matRipple", "", "name", "view-desk-map", 1, "rounded-l", "rounded-r-none", 3, "click"], ["btn", "", "matRipple", "", "name", "view-desk-list", 1, "rounded-r", "rounded-l-none", 3, "click"], [1, "flex", "items-center", "divide-x", "divide-base-200", "h-[65vh]", "w-[calc(100vw-4rem)]", "overflow-hidden"], [1, "h-full", "hidden", "sm:flex", "max-w-[20rem]", "sm:h-[65vh]", "sm:max-h-full", 3, "hide_levels"], [1, "flex", "flex-col", "items-center", "flex-1", "w-1/2", "h-full", "sm:h-[65vh]"], [1, "w-full", "border-b", "border-base-200", 3, "viewChange", "view"], ["class", "flex-1 h-1/2 bg-base-200", 3, "active", "selected", "favorites", "toggleFav", "onSelect", 4, "ngIf", "ngIfElse"], [1, "h-full", "w-full", "sm:h-[65vh]", "absolute", "sm:relative", "sm:flex", "sm:max-w-[20rem]", "z-20", "bg-base-100", "block", 3, "activeChange", "toggleFav", "close", "desk", "active", "hide_map", "fav"], [1, "flex", "sm:hidden", "flex-col-reverse", "items-center", "justify-end", "px-2", "pt-2", "pb-[5.5rem]", "border-t", "border-base-200", "w-full"], ["btn", "", "matRipple", "", "name", "desk-return", "class", "inverse sm:hidden w-full", 3, "click", 4, "ngIf"], ["btn", "", "matRipple", "", "name", "save-desks", 1, "w-full", "sm:w-32", "sm:mb-0", 3, "mat-dialog-close"], [1, "hidden", "sm:flex", "items-center", "justify-between", "p-2", "border-t", "border-base-200", "w-full"], ["btn", "", "matRipple", "", "name", "desk-return", 1, "clear", "text-secondary", 3, "mat-dialog-close"], [1, "flex", "items-center"], [1, "text-xl"], [1, "mr-1", "underline"], [1, "opacity-60", "text-sm"], ["btn", "", "matRipple", "", "name", "toggle-desk", 3, "click", "disabled"], [1, "mr-1"], [1, "flex-1", "h-1/2", "bg-base-200", 3, "toggleFav", "onSelect", "active", "selected", "favorites"], ["btn", "", "matRipple", "", "name", "desk-return", 1, "inverse", "sm:hidden", "w-full", 3, "click"], [1, "flex-1", "h-1/2", "w-full", 3, "onSelect", "is_displayed", "active"]];
  },
  template: function DeskSelectModalComponent_Template(rf, ctx) {
    if (rf & 1) {
      var _r1 = i0.ɵɵgetCurrentView();
      i0.ɵɵelementStart(0, "div", 7)(1, "header", 8)(2, "button", 9)(3, "app-icon");
      i0.ɵɵtext(4, "close");
      i0.ɵɵelementEnd()();
      i0.ɵɵelementStart(5, "h3");
      i0.ɵɵi18n(6, 1);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(7, "div", 10)(8, "button", 11);
      i0.ɵɵlistener("click", function DeskSelectModalComponent_Template_button_click_8_listener() {
        i0.ɵɵrestoreView(_r1);
        return i0.ɵɵresetView(ctx.view = "map");
      });
      i0.ɵɵtext(9, " Map ");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(10, "button", 12);
      i0.ɵɵlistener("click", function DeskSelectModalComponent_Template_button_click_10_listener() {
        i0.ɵɵrestoreView(_r1);
        return i0.ɵɵresetView(ctx.view = "list");
      });
      i0.ɵɵtext(11, " List ");
      i0.ɵɵelementEnd()()();
      i0.ɵɵelementStart(12, "main", 13);
      i0.ɵɵelement(13, "desk-filters", 14);
      i0.ɵɵelementStart(14, "div", 15)(15, "desk-filters-display", 16);
      i0.ɵɵtwoWayListener("viewChange", function DeskSelectModalComponent_Template_desk_filters_display_viewChange_15_listener($event) {
        i0.ɵɵrestoreView(_r1);
        i0.ɵɵtwoWayBindingSet(ctx.view, $event) || (ctx.view = $event);
        return i0.ɵɵresetView($event);
      });
      i0.ɵɵelementEnd();
      i0.ɵɵtemplate(16, DeskSelectModalComponent_desk_list_16_Template, 1, 3, "desk-list", 17);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(17, "desk-details", 18);
      i0.ɵɵlistener("activeChange", function DeskSelectModalComponent_Template_desk_details_activeChange_17_listener($event) {
        i0.ɵɵrestoreView(_r1);
        return i0.ɵɵresetView(ctx.setSelected(ctx.displayed, $event));
      })("toggleFav", function DeskSelectModalComponent_Template_desk_details_toggleFav_17_listener() {
        i0.ɵɵrestoreView(_r1);
        return i0.ɵɵresetView(ctx.toggleFavourite(ctx.displayed));
      })("close", function DeskSelectModalComponent_Template_desk_details_close_17_listener() {
        i0.ɵɵrestoreView(_r1);
        return i0.ɵɵresetView(ctx.displayed = null);
      });
      i0.ɵɵelementEnd()();
      i0.ɵɵelementStart(18, "footer", 19);
      i0.ɵɵtemplate(19, DeskSelectModalComponent_button_19_Template, 2, 0, "button", 20);
      i0.ɵɵelementStart(20, "button", 21);
      i0.ɵɵi18n(21, 2);
      i0.ɵɵelementEnd()();
      i0.ɵɵelementStart(22, "footer", 22)(23, "button", 23)(24, "div", 24)(25, "app-icon", 25);
      i0.ɵɵtext(26, "arrow_back");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(27, "div", 26);
      i0.ɵɵi18n(28, 3);
      i0.ɵɵelementEnd()()();
      i0.ɵɵelementStart(29, "p", 27);
      i0.ɵɵi18n(30, 4);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(31, "button", 28);
      i0.ɵɵlistener("click", function DeskSelectModalComponent_Template_button_click_31_listener() {
        i0.ɵɵrestoreView(_r1);
        return i0.ɵɵresetView(ctx.setSelected(ctx.displayed, !ctx.isSelected(ctx.displayed == null ? null : ctx.displayed.id)));
      });
      i0.ɵɵelementStart(32, "div", 24)(33, "app-icon", 25);
      i0.ɵɵtext(34);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(35, "div", 29);
      i0.ɵɵi18n(36, 5);
      i0.ɵɵelementEnd()()()()();
      i0.ɵɵtemplate(37, DeskSelectModalComponent_ng_template_37_Template, 1, 2, "ng-template", null, 0, i0.ɵɵtemplateRefExtractor);
    }
    if (rf & 2) {
      var map_view_r6 = i0.ɵɵreference(38);
      i0.ɵɵadvance(8);
      i0.ɵɵclassProp("inverse", ctx.view !== "map");
      i0.ɵɵadvance(2);
      i0.ɵɵclassProp("inverse", ctx.view !== "list");
      i0.ɵɵadvance(3);
      i0.ɵɵproperty("hide_levels", ctx.view !== "list");
      i0.ɵɵadvance(2);
      i0.ɵɵtwoWayProperty("view", ctx.view);
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", ctx.view === "list")("ngIfElse", map_view_r6);
      i0.ɵɵadvance();
      i0.ɵɵclassProp("hidden", !ctx.displayed)("inset-0", ctx.displayed);
      i0.ɵɵproperty("desk", ctx.displayed)("active", ctx.selected_ids.includes(ctx.displayed == null ? null : ctx.displayed.id))("hide_map", ctx.view === "map")("fav", ctx.displayed && ctx.favorites.includes(ctx.displayed == null ? null : ctx.displayed.id));
      i0.ɵɵadvance(2);
      i0.ɵɵproperty("ngIf", ctx.displayed);
      i0.ɵɵadvance();
      i0.ɵɵclassProp("mb-2", ctx.displayed);
      i0.ɵɵproperty("mat-dialog-close", ctx.selected);
      i0.ɵɵadvance(3);
      i0.ɵɵproperty("mat-dialog-close", ctx.selected);
      i0.ɵɵadvance(7);
      i0.ɵɵi18nExp(ctx.selected.length);
      i0.ɵɵi18nApply(30);
      i0.ɵɵadvance();
      i0.ɵɵclassProp("inverse", ctx.isSelected(ctx.displayed == null ? null : ctx.displayed.id));
      i0.ɵɵproperty("disabled", !ctx.displayed);
      i0.ɵɵadvance(3);
      i0.ɵɵtextInterpolate(ctx.isSelected(ctx.displayed == null ? null : ctx.displayed.id) ? "remove" : "add");
      i0.ɵɵadvance(2);
      i0.ɵɵi18nExp(ctx.isSelected(ctx.displayed == null ? null : ctx.displayed.id) ? "Remove from Booking" : "Add to booking");
      i0.ɵɵi18nApply(36);
    }
  },
  dependencies: [i4.NgIf, i1.MatDialogClose, i5.IconComponent, i6.MatRipple, i7.DeskDetailsComponent, i8.DeskFiltersComponent, i9.DeskFiltersDisplayComponent, i10.DeskListComponent, i11.DeskMapComponent],
  encapsulation: 2
});
exports.DeskSelectModalComponent = DeskSelectModalComponent;

/***/ }),

/***/ 77904:
/*!****************************************************************!*\
  !*** ./libs/bookings/src/lib/desk-settings-modal.component.ts ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _taggedTemplateLiteral = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js */ 9959)["default"]);
var _regeneratorRuntime = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/regeneratorRuntime.js */ 8698)["default"]);
var _asyncToGenerator = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/asyncToGenerator.js */ 95386)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _DeskSettingsModalComponent, _templateObject, _templateObject2;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.DeskSettingsModalComponent = void 0;
var dialog_1 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var organisation_1 = __webpack_require__(/*! @placeos/organisation */ 2510);
var ts_client_1 = __webpack_require__(/*! @placeos/ts-client */ 35713);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @placeos/organisation */ 2510);
var i2 = __webpack_require__(/*! @placeos/common */ 22797);
var i3 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var i4 = __webpack_require__(/*! @angular/common */ 60316);
var i5 = __webpack_require__(/*! @angular/forms */ 34456);
var i6 = __webpack_require__(/*! @angular/material/form-field */ 24950);
var i7 = __webpack_require__(/*! @angular/material/core */ 74646);
var i8 = __webpack_require__(/*! ../../../components/src/lib/icon.component */ 69434);
var i9 = __webpack_require__(/*! ../../../components/src/lib/desk-height-presets.component */ 3051);
var i10 = __webpack_require__(/*! @angular/material/select */ 25175);
var i11 = __webpack_require__(/*! @angular/material/slider */ 64992);
function DeskSettingsModalComponent_div_0_Template(rf, ctx) {
  if (rf & 1) {
    var _r1 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 4)(1, "div", 5);
    i0.ɵɵi18n(2, 1);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(3, "div", 6);
    i0.ɵɵi18n(4, 2);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(5, "div", 7)(6, "label");
    i0.ɵɵtext(7, "Presets");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(8, "div", 8)(9, "mat-form-field", 9)(10, "mat-select", 10);
    i0.ɵɵtwoWayListener("ngModelChange", function DeskSettingsModalComponent_div_0_Template_mat_select_ngModelChange_10_listener($event) {
      i0.ɵɵrestoreView(_r1);
      var ctx_r1 = i0.ɵɵnextContext();
      i0.ɵɵtwoWayBindingSet(ctx_r1.preset, $event) || (ctx_r1.preset = $event);
      return i0.ɵɵresetView($event);
    });
    i0.ɵɵlistener("ngModelChange", function DeskSettingsModalComponent_div_0_Template_mat_select_ngModelChange_10_listener($event) {
      i0.ɵɵrestoreView(_r1);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.setPreset($event));
    });
    i0.ɵɵelementStart(11, "mat-option", 11);
    i0.ɵɵtext(12, "None");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(13, "mat-option", 12);
    i0.ɵɵtext(14, "Standing");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(15, "mat-option", 13);
    i0.ɵɵtext(16, "Seated");
    i0.ɵɵelementEnd()()();
    i0.ɵɵelementStart(17, "button", 14);
    i0.ɵɵlistener("click", function DeskSettingsModalComponent_div_0_Template_button_click_17_listener() {
      i0.ɵɵrestoreView(_r1);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.edit_presets = true);
    });
    i0.ɵɵelementStart(18, "app-icon");
    i0.ɵɵtext(19, "edit");
    i0.ɵɵelementEnd()()();
    i0.ɵɵelementStart(20, "label");
    i0.ɵɵtext(21, "Current Height");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(22, "div", 15)(23, "mat-slider", 16)(24, "input", 17);
    i0.ɵɵtwoWayListener("ngModelChange", function DeskSettingsModalComponent_div_0_Template_input_ngModelChange_24_listener($event) {
      i0.ɵɵrestoreView(_r1);
      var ctx_r1 = i0.ɵɵnextContext();
      i0.ɵɵtwoWayBindingSet(ctx_r1.height, $event) || (ctx_r1.height = $event);
      return i0.ɵɵresetView($event);
    });
    i0.ɵɵlistener("ngModelChange", function DeskSettingsModalComponent_div_0_Template_input_ngModelChange_24_listener() {
      i0.ɵɵrestoreView(_r1);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.updatePreset(ctx_r1.height));
    });
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(25, "div", 18);
    i0.ɵɵtext(26);
    i0.ɵɵelementEnd()()();
    i0.ɵɵelementStart(27, "button", 19);
    i0.ɵɵlistener("click", function DeskSettingsModalComponent_div_0_Template_button_click_27_listener() {
      i0.ɵɵrestoreView(_r1);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.setDeskHeight());
    });
    i0.ɵɵtext(28, " Apply Settings ");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(29, "button", 20)(30, "app-icon");
    i0.ɵɵtext(31, "close");
    i0.ɵɵelementEnd()()();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance(10);
    i0.ɵɵtwoWayProperty("ngModel", ctx_r1.preset);
    i0.ɵɵadvance(13);
    i0.ɵɵproperty("displayWith", ctx_r1.formatLabel);
    i0.ɵɵadvance();
    i0.ɵɵtwoWayProperty("ngModel", ctx_r1.height);
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate1(" ", ctx_r1.height.toFixed(1), "cm ");
  }
}
function DeskSettingsModalComponent_ng_template_1_Template(rf, ctx) {
  if (rf & 1) {
    var _r3 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "desk-height-presets", 21);
    i0.ɵɵlistener("close", function DeskSettingsModalComponent_ng_template_1_Template_desk_height_presets_close_0_listener() {
      i0.ɵɵrestoreView(_r3);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.edit_presets = false);
    });
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    i0.ɵɵproperty("show_close", true);
  }
}
var DeskSettingsModalComponent = /*#__PURE__*/function () {
  function DeskSettingsModalComponent(_data, _org, _settings, _dialog_ref) {
    _classCallCheck(this, DeskSettingsModalComponent);
    this._data = _data;
    this._org = _org;
    this._settings = _settings;
    this._dialog_ref = _dialog_ref;
    this.desk_id = this._data.id;
    this.edit_presets = false;
    this.height = 71;
  }
  return _createClass(DeskSettingsModalComponent, [{
    key: "ngOnInit",
    value: function ngOnInit() {
      var sitting_height = this._settings.get('desk_sitting_height');
      var standing_height = this._settings.get('desk_standing_height');
      if (!sitting_height && !standing_height) {
        this.edit_presets = true;
      }
      var last_height = parseInt(localStorage.getItem('PLACEOS.last_desk_height'), 10);
      this.height = last_height || sitting_height || 71;
      if (this.height === sitting_height) {
        this.preset = 'sitting';
      } else if (this.height === standing_height) {
        this.preset = 'standing';
      }
    }
  }, {
    key: "updatePreset",
    value: function updatePreset(new_height) {
      var sitting_height = this._settings.get('desk_sitting_height') || 71;
      var standing_height = this._settings.get('desk_standing_height') || 102;
      if (new_height === sitting_height) {
        this.preset = 'sitting';
      } else if (new_height === standing_height) {
        this.preset = 'standing';
      } else {
        this.preset = null;
      }
    }
  }, {
    key: "setPreset",
    value: function setPreset(value) {
      switch (value) {
        case 'standing':
          this.height = this._settings.get('desk_standing_height') || 102;
          break;
        case 'sitting':
          this.height = this._settings.get('desk_sitting_height') || 71;
          break;
        default:
          this.height = 70;
          break;
      }
    }
  }, {
    key: "setDeskHeight",
    value: function () {
      var _setDeskHeight = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
        var sys_id, module;
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              sys_id = this._org.binding('desks');
              localStorage.setItem('PLACEOS.last_desk_height', "".concat(this.height));
              if (sys_id) {
                _context.next = 4;
                break;
              }
              return _context.abrupt("return", this._dialog_ref.close());
            case 4:
              module = (0, ts_client_1.getModule)(sys_id, 'DeskControl');
              _context.next = 7;
              return module.execute('set_desk_height', [this.desk_id, this.height])["catch"](function (_) {
                (0, common_1.notifyError)('Error setting desk height.' + _);
                throw _;
              });
            case 7:
              (0, common_1.notifySuccess)('Successfully set desk height');
              this._dialog_ref.close();
            case 9:
            case "end":
              return _context.stop();
          }
        }, _callee, this);
      }));
      function setDeskHeight() {
        return _setDeskHeight.apply(this, arguments);
      }
      return setDeskHeight;
    }()
  }, {
    key: "formatLabel",
    value: function formatLabel(value) {
      return "".concat(value.toFixed(1), "cm");
    }
  }]);
}();
_DeskSettingsModalComponent = DeskSettingsModalComponent;
_DeskSettingsModalComponent.ɵfac = function DeskSettingsModalComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _DeskSettingsModalComponent)(i0.ɵɵdirectiveInject(dialog_1.MAT_DIALOG_DATA), i0.ɵɵdirectiveInject(i1.OrganisationService), i0.ɵɵdirectiveInject(i2.SettingsService), i0.ɵɵdirectiveInject(i3.MatDialogRef));
};
_DeskSettingsModalComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _DeskSettingsModalComponent,
  selectors: [["desk-settings-modal"]],
  decls: 3,
  vars: 2,
  consts: function consts() {
    var i18n_0;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_7032027191807032897$$LIBS_BOOKINGS_SRC_LIB_DESK_SETTINGS_MODAL_COMPONENT_TS_0 = goog.getMsg("Desk Height");
      i18n_0 = MSG_EXTERNAL_7032027191807032897$$LIBS_BOOKINGS_SRC_LIB_DESK_SETTINGS_MODAL_COMPONENT_TS_0;
    } else {
      i18n_0 = $localize(_templateObject || (_templateObject = _taggedTemplateLiteral([":\u241Fec37a2ac1276a5f69d65d5ba86b2e98c41b201a9\u241F7032027191807032897:Desk Height"])));
    }
    var i18n_1;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_8247461324425873330$$LIBS_BOOKINGS_SRC_LIB_DESK_SETTINGS_MODAL_COMPONENT_TS_1 = goog.getMsg(" Set your desk height for the best experience ");
      i18n_1 = MSG_EXTERNAL_8247461324425873330$$LIBS_BOOKINGS_SRC_LIB_DESK_SETTINGS_MODAL_COMPONENT_TS_1;
    } else {
      i18n_1 = $localize(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([":\u241Fde53fc27bc96d3e69d6c7d9b0a19619db7cc1076\u241F8247461324425873330: Set your desk height for the best experience "])));
    }
    return [["desk_height_tooltip", ""], i18n_0, i18n_1, ["class", "relative p-4 bg-base-100 rounded shadow w-[20rem]", 4, "ngIf", "ngIfElse"], [1, "relative", "p-4", "bg-base-100", "rounded", "shadow", "w-[20rem]"], [1, "text-lg"], [1, "text-xs", "opacity-60", "mb-4"], [1, "flex", "flex-col", "mt-2", "mb-4"], [1, "flex", "items-center", "space-x-2", "pb-4"], ["appearance", "outline", 1, "no-subscript", "flex-1", "w-1/2"], ["placeholder", "No selected preset", 3, "ngModelChange", "ngModel"], ["value", ""], ["value", "standing"], ["value", "sitting"], ["icon", "", "matRipple", "", 1, "rounded", "h-12", "w-12", "bg-secondary", "text-secondary-content", 3, "click"], [1, "flex", "items-center", "space-x-2"], ["min", "60", "max", "120", "step", "0.5", "discrete", "", 1, "flex-1", 3, "displayWith"], ["matSliderThumb", "", 3, "ngModelChange", "ngModel"], [1, "text-sm", "w-12", "text-right"], ["btn", "", "matRipple", "", 1, "w-full", 3, "click"], ["icon", "", "matRipple", "", "mat-dialog-close", "", 1, "absolute", "top-0", "right-0"], [3, "close", "show_close"]];
  },
  template: function DeskSettingsModalComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵtemplate(0, DeskSettingsModalComponent_div_0_Template, 32, 4, "div", 3)(1, DeskSettingsModalComponent_ng_template_1_Template, 1, 1, "ng-template", null, 0, i0.ɵɵtemplateRefExtractor);
    }
    if (rf & 2) {
      var desk_height_tooltip_r4 = i0.ɵɵreference(2);
      i0.ɵɵproperty("ngIf", !ctx.edit_presets)("ngIfElse", desk_height_tooltip_r4);
    }
  },
  dependencies: [i4.NgIf, i5.DefaultValueAccessor, i5.NgControlStatus, i5.NgModel, i6.MatFormField, i3.MatDialogClose, i7.MatOption, i8.IconComponent, i9.DeskHeightPresetsComponent, i10.MatSelect, i7.MatRipple, i11.MatSlider, i11.MatSliderThumb],
  encapsulation: 2
});
exports.DeskSettingsModalComponent = DeskSettingsModalComponent;

/***/ }),

/***/ 74350:
/*!***********************************************!*\
  !*** ./libs/bookings/src/lib/desk.service.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _regeneratorRuntime = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/regeneratorRuntime.js */ 8698)["default"]);
var _toConsumableArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/toConsumableArray.js */ 86033)["default"]);
var _asyncToGenerator = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/asyncToGenerator.js */ 95386)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _DesksService;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.DesksService = void 0;
var dialog_1 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var date_fns_1 = __webpack_require__(/*! date-fns */ 25773);
var operators_1 = __webpack_require__(/*! rxjs/operators */ 97303);
var organisation_service_1 = __webpack_require__(/*! libs/organisation/src/lib/organisation.service */ 19863);
var bookings_fn_1 = __webpack_require__(/*! ./bookings.fn */ 18026);
var desk_confirm_modal_component_1 = __webpack_require__(/*! ./desk-confirm-modal.component */ 3367);
var desk_questions_modal_component_1 = __webpack_require__(/*! ./desk-questions-modal.component */ 67254);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! libs/organisation/src/lib/organisation.service */ 19863);
var i2 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var DesksService = /*#__PURE__*/function () {
  function DesksService(_org, _dialog) {
    _classCallCheck(this, DesksService);
    this._org = _org;
    this._dialog = _dialog;
    this.can_set_date = true;
    this.error_on_host = true;
  }
  return _createClass(DesksService, [{
    key: "bookDesk",
    value: function () {
      var _bookDesk = _asyncToGenerator(function (_ref) {
        var _this = this;
        var desks = _ref.desks,
          host = _ref.host,
          reason = _ref.reason,
          attendees = _ref.attendees,
          date = _ref.date;
        return /*#__PURE__*/_regeneratorRuntime().mark(function _callee(_desks$0$zone) {
          var level, ref, success, bookings, desk_list, users;
          return _regeneratorRuntime().wrap(function _callee$(_context) {
            while (1) switch (_context.prev = _context.next) {
              case 0:
                if (!(_this.error_on_host && !host)) {
                  _context.next = 4;
                  break;
                }
                return _context.abrupt("return", (0, common_1.notifyError)('You need to select a host to book a desk.'));
              case 4:
                host = host || (0, common_1.currentUser)();
              case 5:
                reason = reason || '';
                level = _this._org.levelWithID(desks[0].zone instanceof Array ? desks[0].zone : [(_desks$0$zone = desks[0].zone) === null || _desks$0$zone === void 0 ? void 0 : _desks$0$zone.id]);
                ref = _this._dialog.open(desk_questions_modal_component_1.DeskQuestionsModalComponent);
                _context.next = 10;
                return Promise.race([ref.componentInstance.event.pipe((0, operators_1.first)(function (_) {
                  return _.reason === 'done';
                })).toPromise(), ref.afterClosed().pipe((0, operators_1.map)(function (_) {
                  return null;
                })).toPromise()]);
              case 10:
                success = _context.sent;
                if (success) {
                  _context.next = 13;
                  break;
                }
                return _context.abrupt("return");
              case 13:
                ref.close();
                ref = _this._dialog.open(desk_confirm_modal_component_1.DeskConfirmModalComponent, {
                  data: {
                    host: host,
                    desks: desks,
                    date: date ? new Date(date) : new Date(),
                    reason: reason,
                    level: level,
                    can_set_date: _this.can_set_date
                  }
                });
                _context.next = 17;
                return Promise.race([ref.componentInstance.event.pipe((0, operators_1.first)(function (_) {
                  return _.reason === 'done';
                })).toPromise(), ref.afterClosed().pipe((0, operators_1.map)(function (_) {
                  return null;
                })).toPromise()]);
              case 17:
                success = _context.sent;
                if (success) {
                  _context.next = 20;
                  break;
                }
                return _context.abrupt("return");
              case 20:
                host = ref.componentInstance.host || host;
                date = ref.componentInstance.date || date;
                reason = ref.componentInstance.reason || reason;
                if (host) {
                  _context.next = 26;
                  break;
                }
                ref.close();
                return _context.abrupt("return", (0, common_1.notifyError)('You need to select a host to book a desk. '));
              case 26:
                ref.componentInstance.loading = 'Checking for existing desk bookings...';
                _context.next = 29;
                return (0, bookings_fn_1.queryBookings)({
                  type: 'desk',
                  period_start: (0, date_fns_1.getUnixTime)((0, date_fns_1.startOfDay)(date || new Date())),
                  period_end: (0, date_fns_1.getUnixTime)((0, date_fns_1.endOfDay)(date || new Date()))
                }).toPromise();
              case 29:
                bookings = _context.sent;
                desk_list = bookings.filter(function (d) {
                  return d.user_email.toLowerCase() === host.email.toLowerCase();
                });
                if (!(desk_list !== null && desk_list !== void 0 && desk_list.length)) {
                  _context.next = 34;
                  break;
                }
                ref.close();
                return _context.abrupt("return", (0, common_1.notifyError)('You currently already have a desk booked for the selected date.'));
              case 34:
                ref.componentInstance.loading = 'Booking desk...';
                users = [host].concat(_toConsumableArray(attendees || []));
                _context.next = 38;
                return Promise.all([desks.map(function (desk, idx) {
                  return _this.makeDeskBooking(desk, host, date.valueOf() || new Date().valueOf(), reason, users[idx]);
                })]);
              case 38:
                (0, common_1.notifySuccess)('Successfully booked desk');
                ref.close();
                return _context.abrupt("return", true);
              case 41:
              case "end":
                return _context.stop();
            }
          }, _callee);
        })();
      });
      function bookDesk(_x) {
        return _bookDesk.apply(this, arguments);
      }
      return bookDesk;
    }()
  }, {
    key: "makeDeskBooking",
    value: function () {
      var _makeDeskBooking = _asyncToGenerator(function (desk, host, date, reason) {
        var _this2 = this;
        var for_user = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : null;
        return /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(_desk$zone, _desk$zone2, _desk$zone3, _desk$zone4) {
          var location, level, zones, booking_data;
          return _regeneratorRuntime().wrap(function _callee2$(_context2) {
            while (1) switch (_context2.prev = _context2.next) {
              case 0:
                location = "".concat((_desk$zone = desk.zone) === null || _desk$zone === void 0 ? void 0 : _desk$zone.name, "-").concat(desk.id);
                level = _this2._org.levelWithID(desk.zone instanceof Array ? desk.zone : [(_desk$zone2 = desk.zone) === null || _desk$zone2 === void 0 ? void 0 : _desk$zone2.id]);
                zones = (_desk$zone3 = desk.zone) !== null && _desk$zone3 !== void 0 && _desk$zone3.id ? [(_desk$zone4 = desk.zone) === null || _desk$zone4 === void 0 ? void 0 : _desk$zone4.id, level === null || level === void 0 ? void 0 : level.parent_id] : [level === null || level === void 0 ? void 0 : level.parent_id];
                booking_data = {
                  booking_start: (0, date_fns_1.getUnixTime)((0, date_fns_1.startOfDay)(date)),
                  user_id: (for_user === null || for_user === void 0 ? void 0 : for_user.id) || host.id,
                  user_name: (for_user === null || for_user === void 0 ? void 0 : for_user.name) || host.name,
                  user_email: (for_user === null || for_user === void 0 ? void 0 : for_user.email) || host.email,
                  booking_end: Math.floor((0, date_fns_1.endOfDay)(date).valueOf() / 1000),
                  asset_id: desk.id,
                  asset_name: desk.name,
                  title: reason,
                  description: location,
                  zones: zones,
                  booking_type: 'desk',
                  extension_data: {
                    map_id: (desk === null || desk === void 0 ? void 0 : desk.map_id) || (desk === null || desk === void 0 ? void 0 : desk.id),
                    groups: desk.groups,
                    for_user: for_user === null || for_user === void 0 ? void 0 : for_user.email
                  }
                };
                return _context2.abrupt("return", (0, bookings_fn_1.saveBooking)(booking_data).toPromise());
              case 5:
              case "end":
                return _context2.stop();
            }
          }, _callee2);
        })();
      });
      function makeDeskBooking(_x2, _x3, _x4, _x5) {
        return _makeDeskBooking.apply(this, arguments);
      }
      return makeDeskBooking;
    }()
  }]);
}();
_DesksService = DesksService;
_DesksService.ɵfac = function DesksService_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _DesksService)(i0.ɵɵinject(i1.OrganisationService), i0.ɵɵinject(i2.MatDialog));
};
_DesksService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({
  token: _DesksService,
  factory: _DesksService.ɵfac,
  providedIn: 'root'
});
exports.DesksService = DesksService;

/***/ }),

/***/ 68874:
/*!****************************************************************!*\
  !*** ./libs/bookings/src/lib/invite-visitor-form.component.ts ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _taggedTemplateLiteral = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js */ 9959)["default"]);
var _objectSpread = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/objectSpread2.js */ 34092)["default"]);
var _toConsumableArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/toConsumableArray.js */ 86033)["default"]);
var _regeneratorRuntime = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/regeneratorRuntime.js */ 8698)["default"]);
var _slicedToArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/slicedToArray.js */ 6282)["default"]);
var _createForOfIteratorHelper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createForOfIteratorHelper.js */ 36350)["default"]);
var _asyncToGenerator = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/asyncToGenerator.js */ 95386)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _callSuper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/callSuper.js */ 8513)["default"]);
var _inherits = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/inherits.js */ 58160)["default"]);
var _InviteVisitorFormComponent, _templateObject, _templateObject2, _templateObject3, _templateObject4, _templateObject5, _templateObject6, _templateObject7, _templateObject8, _templateObject9, _templateObject10, _templateObject11, _templateObject12, _templateObject13, _templateObject14, _templateObject15, _templateObject16, _templateObject17, _templateObject18;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.InviteVisitorFormComponent = void 0;
var core_1 = __webpack_require__(/*! @angular/core */ 37580);
var forms_1 = __webpack_require__(/*! @angular/forms */ 34456);
var operators_1 = __webpack_require__(/*! rxjs/operators */ 97303);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var notifications_1 = __webpack_require__(/*! libs/common/src/lib/notifications */ 39525);
var general_1 = __webpack_require__(/*! libs/common/src/lib/general */ 64217);
var organisation_service_1 = __webpack_require__(/*! libs/organisation/src/lib/organisation.service */ 19863);
var booking_form_service_1 = __webpack_require__(/*! ./booking-form.service */ 18379);
var user_class_1 = __webpack_require__(/*! libs/users/src/lib/user.class */ 93693);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! ./booking-form.service */ 18379);
var i2 = __webpack_require__(/*! @placeos/common */ 22797);
var i3 = __webpack_require__(/*! libs/organisation/src/lib/organisation.service */ 19863);
var i4 = __webpack_require__(/*! @angular/common */ 60316);
var i5 = __webpack_require__(/*! @angular/forms */ 34456);
var i6 = __webpack_require__(/*! @angular/material/input */ 95541);
var i7 = __webpack_require__(/*! @angular/material/form-field */ 24950);
var i8 = __webpack_require__(/*! @angular/material/progress-spinner */ 41134);
var i9 = __webpack_require__(/*! @angular/material/autocomplete */ 79771);
var i10 = __webpack_require__(/*! @angular/material/core */ 74646);
var i11 = __webpack_require__(/*! ../../../form-fields/src/lib/date-field.component */ 19608);
var i12 = __webpack_require__(/*! ../../../form-fields/src/lib/duration-field.component */ 83476);
var i13 = __webpack_require__(/*! ../../../form-fields/src/lib/time-field.component */ 81413);
var i14 = __webpack_require__(/*! ../../../form-fields/src/lib/user-list-field.component */ 840);
var i15 = __webpack_require__(/*! ../../../form-fields/src/lib/user-search-field.component */ 18000);
var i16 = __webpack_require__(/*! @angular/material/select */ 25175);
var i17 = __webpack_require__(/*! @ngx-translate/core */ 597);
var _c0 = function _c0() {
  return {
    standalone: true
  };
};
function InviteVisitorFormComponent_ng_container_0_div_1_form_4_div_1_mat_option_6_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "mat-option", 48);
    i0.ɵɵtext(1);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var bld_r5 = ctx.$implicit;
    i0.ɵɵproperty("value", bld_r5.id);
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", bld_r5.display_name || bld_r5.name, " ");
  }
}
function InviteVisitorFormComponent_ng_container_0_div_1_form_4_div_1_Template(rf, ctx) {
  if (rf & 1) {
    var _r3 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 32)(1, "label", 45);
    i0.ɵɵi18nStart(2, 11);
    i0.ɵɵelement(3, "span");
    i0.ɵɵi18nEnd();
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(4, "mat-form-field", 43)(5, "mat-select", 46);
    i0.ɵɵlistener("ngModelChange", function InviteVisitorFormComponent_ng_container_0_div_1_form_4_div_1_Template_mat_select_ngModelChange_5_listener($event) {
      i0.ɵɵrestoreView(_r3);
      var ctx_r3 = i0.ɵɵnextContext(4);
      return i0.ɵɵresetView(ctx_r3.form.patchValue({
        zones: [$event]
      }));
    });
    i0.ɵɵtemplate(6, InviteVisitorFormComponent_ng_container_0_div_1_form_4_div_1_mat_option_6_Template, 2, 2, "mat-option", 47);
    i0.ɵɵpipe(7, "async");
    i0.ɵɵelementEnd()()();
  }
  if (rf & 2) {
    var ctx_r3 = i0.ɵɵnextContext(4);
    i0.ɵɵadvance(5);
    i0.ɵɵproperty("ngModel", ctx_r3.form.value.zones[0])("ngModelOptions", i0.ɵɵpureFunction0(5, _c0));
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngForOf", i0.ɵɵpipeBind1(7, 3, ctx_r3.buildings));
  }
}
function InviteVisitorFormComponent_ng_container_0_div_1_form_4_div_18_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 49)(1, "label", 50);
    i0.ɵɵtext(2);
    i0.ɵɵpipe(3, "translate");
    i0.ɵɵelementStart(4, "span");
    i0.ɵɵtext(5, "*");
    i0.ɵɵelementEnd()();
    i0.ɵɵelement(6, "a-user-search-field", 51);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate1(" ", i0.ɵɵpipeBind1(3, 1, "FORM.HOST"), "");
  }
}
function InviteVisitorFormComponent_ng_container_0_div_1_form_4_ng_container_19_mat_option_9_Template(rf, ctx) {
  if (rf & 1) {
    var _r7 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "mat-option", 58);
    i0.ɵɵlistener("click", function InviteVisitorFormComponent_ng_container_0_div_1_form_4_ng_container_19_mat_option_9_Template_mat_option_click_0_listener() {
      var item_r8 = i0.ɵɵrestoreView(_r7).$implicit;
      var ctx_r3 = i0.ɵɵnextContext(5);
      return i0.ɵɵresetView(ctx_r3.setVisitor(item_r8));
    });
    i0.ɵɵelementStart(1, "div", 59)(2, "div");
    i0.ɵɵtext(3);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(4, "div", 60);
    i0.ɵɵtext(5);
    i0.ɵɵelementEnd()()();
  }
  if (rf & 2) {
    var item_r8 = ctx.$implicit;
    i0.ɵɵproperty("value", item_r8.name);
    i0.ɵɵadvance(3);
    i0.ɵɵtextInterpolate(item_r8.name);
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate2(" ", item_r8.email, " ", item_r8.company ? "| " + item_r8.company : "", " ");
  }
}
function InviteVisitorFormComponent_ng_container_0_div_1_form_4_ng_container_19_mat_option_20_Template(rf, ctx) {
  if (rf & 1) {
    var _r9 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "mat-option", 58);
    i0.ɵɵlistener("click", function InviteVisitorFormComponent_ng_container_0_div_1_form_4_ng_container_19_mat_option_20_Template_mat_option_click_0_listener() {
      var item_r10 = i0.ɵɵrestoreView(_r9).$implicit;
      var ctx_r3 = i0.ɵɵnextContext(5);
      return i0.ɵɵresetView(ctx_r3.setVisitor(item_r10));
    });
    i0.ɵɵelementStart(1, "div", 59)(2, "div");
    i0.ɵɵtext(3);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(4, "div", 60);
    i0.ɵɵtext(5);
    i0.ɵɵelementEnd()()();
  }
  if (rf & 2) {
    var item_r10 = ctx.$implicit;
    i0.ɵɵproperty("value", item_r10.email);
    i0.ɵɵadvance(3);
    i0.ɵɵtextInterpolate(item_r10.name);
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate2(" ", item_r10.email, " ", item_r10.company ? "| " + item_r10.company : "", " ");
  }
}
function InviteVisitorFormComponent_ng_container_0_div_1_form_4_ng_container_19_Template(rf, ctx) {
  if (rf & 1) {
    var _r6 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵelementStart(1, "div", 32)(2, "label", 52);
    i0.ɵɵi18nStart(3, 12);
    i0.ɵɵelement(4, "span");
    i0.ɵɵi18nEnd();
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(5, "mat-form-field", 43)(6, "input", 53);
    i0.ɵɵlistener("focus", function InviteVisitorFormComponent_ng_container_0_div_1_form_4_ng_container_19_Template_input_focus_6_listener() {
      i0.ɵɵrestoreView(_r6);
      var ctx_r3 = i0.ɵɵnextContext(4);
      return i0.ɵɵresetView(ctx_r3.filterVisitors(ctx_r3.form.value.asset_name));
    });
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(7, "mat-autocomplete", null, 3);
    i0.ɵɵtemplate(9, InviteVisitorFormComponent_ng_container_0_div_1_form_4_ng_container_19_mat_option_9_Template, 6, 4, "mat-option", 54);
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(10, "div", 32)(11, "label", 55);
    i0.ɵɵi18nStart(12, 13);
    i0.ɵɵelement(13, "span");
    i0.ɵɵi18nEnd();
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(14, "mat-form-field", 43)(15, "input", 56);
    i0.ɵɵlistener("focus", function InviteVisitorFormComponent_ng_container_0_div_1_form_4_ng_container_19_Template_input_focus_15_listener() {
      i0.ɵɵrestoreView(_r6);
      var ctx_r3 = i0.ɵɵnextContext(4);
      return i0.ɵɵresetView(ctx_r3.filterVisitors(ctx_r3.form.value.asset_id));
    });
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(16, "mat-error");
    i0.ɵɵi18n(17, 14);
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(18, "mat-autocomplete", null, 4);
    i0.ɵɵtemplate(20, InviteVisitorFormComponent_ng_container_0_div_1_form_4_ng_container_19_mat_option_20_Template, 6, 4, "mat-option", 54);
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(21, "div", 32)(22, "label", 52);
    i0.ɵɵi18n(23, 15);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(24, "mat-form-field", 43);
    i0.ɵɵelement(25, "input", 57);
    i0.ɵɵelementEnd()();
    i0.ɵɵelementContainerEnd();
  }
  if (rf & 2) {
    var name_auto_r11 = i0.ɵɵreference(8);
    var email_auto_r12 = i0.ɵɵreference(19);
    var ctx_r3 = i0.ɵɵnextContext(4);
    i0.ɵɵadvance(6);
    i0.ɵɵproperty("matAutocomplete", name_auto_r11);
    i0.ɵɵadvance(3);
    i0.ɵɵproperty("ngForOf", ctx_r3.filtered_visitors);
    i0.ɵɵadvance(6);
    i0.ɵɵproperty("matAutocomplete", email_auto_r12);
    i0.ɵɵadvance(5);
    i0.ɵɵproperty("ngForOf", ctx_r3.filtered_visitors);
  }
}
function InviteVisitorFormComponent_ng_container_0_div_1_form_4_Template(rf, ctx) {
  if (rf & 1) {
    var _r2 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "form", 30);
    i0.ɵɵtemplate(1, InviteVisitorFormComponent_ng_container_0_div_1_form_4_div_1_Template, 8, 6, "div", 31);
    i0.ɵɵelementStart(2, "div", 32)(3, "label", 33);
    i0.ɵɵi18nStart(4, 7);
    i0.ɵɵelement(5, "span");
    i0.ɵɵi18nEnd();
    i0.ɵɵelementEnd();
    i0.ɵɵelement(6, "a-date-field", 34);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(7, "div", 35)(8, "div", 36)(9, "label", 37);
    i0.ɵɵi18nStart(10, 8);
    i0.ɵɵelement(11, "span");
    i0.ɵɵi18nEnd();
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(12, "a-time-field", 38);
    i0.ɵɵlistener("ngModelChange", function InviteVisitorFormComponent_ng_container_0_div_1_form_4_Template_a_time_field_ngModelChange_12_listener($event) {
      i0.ɵɵrestoreView(_r2);
      var ctx_r3 = i0.ɵɵnextContext(3);
      return i0.ɵɵresetView(ctx_r3.form.patchValue({
        date: $event
      }));
    });
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(13, "div", 36)(14, "label", 39);
    i0.ɵɵi18nStart(15, 9);
    i0.ɵɵelement(16, "span");
    i0.ɵɵi18nEnd();
    i0.ɵɵelementEnd();
    i0.ɵɵelement(17, "a-duration-field", 40);
    i0.ɵɵelementEnd()();
    i0.ɵɵtemplate(18, InviteVisitorFormComponent_ng_container_0_div_1_form_4_div_18_Template, 7, 3, "div", 41)(19, InviteVisitorFormComponent_ng_container_0_div_1_form_4_ng_container_19_Template, 26, 4, "ng-container", 22);
    i0.ɵɵelementStart(20, "div", 32)(21, "label", 42);
    i0.ɵɵi18n(22, 10);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(23, "mat-form-field", 43);
    i0.ɵɵelement(24, "input", 44);
    i0.ɵɵelementEnd()()();
  }
  if (rf & 2) {
    var ctx_r3 = i0.ɵɵnextContext(3);
    var multi_state_r13 = i0.ɵɵreference(6);
    i0.ɵɵproperty("formGroup", ctx_r3.form);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", (ctx_r3.buildings == null ? null : ctx_r3.buildings.length) > 1);
    i0.ɵɵadvance(11);
    i0.ɵɵproperty("ngModel", ctx_r3.form.value.date)("ngModelOptions", i0.ɵɵpureFunction0(11, _c0))("disabled", ctx_r3.form.value.all_day)("use_24hr", ctx_r3.use_24hr);
    i0.ɵɵadvance(5);
    i0.ɵɵproperty("time", ctx_r3.form.value.date)("use_24hr", ctx_r3.use_24hr);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", ctx_r3.can_book_for_others);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", !ctx_r3.multiple)("ngIfElse", multi_state_r13);
  }
}
function InviteVisitorFormComponent_ng_container_0_div_1_Template(rf, ctx) {
  if (rf & 1) {
    var _r1 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 24)(1, "div", 25)(2, "h2", 26);
    i0.ɵɵi18n(3, 5);
    i0.ɵɵelementEnd()();
    i0.ɵɵtemplate(4, InviteVisitorFormComponent_ng_container_0_div_1_form_4_Template, 25, 12, "form", 27);
    i0.ɵɵelementStart(5, "div", 28)(6, "button", 29);
    i0.ɵɵlistener("click", function InviteVisitorFormComponent_ng_container_0_div_1_Template_button_click_6_listener() {
      i0.ɵɵrestoreView(_r1);
      var ctx_r3 = i0.ɵɵnextContext(2);
      return i0.ɵɵresetView(ctx_r3.sendInvite());
    });
    i0.ɵɵi18n(7, 6);
    i0.ɵɵelementEnd()()();
  }
  if (rf & 2) {
    var ctx_r3 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance(4);
    i0.ɵɵproperty("ngIf", ctx_r3.form);
  }
}
function InviteVisitorFormComponent_ng_container_0_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵtemplate(1, InviteVisitorFormComponent_ng_container_0_div_1_Template, 8, 1, "div", 23);
    i0.ɵɵpipe(2, "async");
    i0.ɵɵelementContainerEnd();
  }
  if (rf & 2) {
    var ctx_r3 = i0.ɵɵnextContext();
    var load_state_r14 = i0.ɵɵreference(4);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", !i0.ɵɵpipeBind1(2, 2, ctx_r3.loading) && !ctx_r3.loading_many)("ngIfElse", load_state_r14);
  }
}
function InviteVisitorFormComponent_ng_template_1_ng_container_4_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵi18nStart(0, 16, 1);
    i0.ɵɵelementContainer(1);
    i0.ɵɵi18nEnd();
  }
  if (rf & 2) {
    var ctx_r3 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance();
    i0.ɵɵi18nExp((ctx_r3.last_success == null ? null : ctx_r3.last_success.asset_name) || (ctx_r3.last_success == null ? null : ctx_r3.last_success.asset_id));
    i0.ɵɵi18nApply(0);
  }
}
function InviteVisitorFormComponent_ng_template_1_ng_container_5_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵi18nStart(0, 16, 2);
    i0.ɵɵelementContainer(1);
    i0.ɵɵi18nEnd();
  }
  if (rf & 2) {
    var ctx_r3 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance();
    i0.ɵɵi18nExp(ctx_r3.last_count)(ctx_r3.last_count == 1 ? "" : "s");
    i0.ɵɵi18nApply(0);
  }
}
function InviteVisitorFormComponent_ng_template_1_ng_container_10_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵi18nStart(0, 17, 1);
    i0.ɵɵelementContainer(1);
    i0.ɵɵi18nEnd();
  }
  if (rf & 2) {
    var ctx_r3 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance();
    i0.ɵɵi18nExp((ctx_r3.last_success == null ? null : ctx_r3.last_success.asset_name) || (ctx_r3.last_success == null ? null : ctx_r3.last_success.asset_id));
    i0.ɵɵi18nApply(0);
  }
}
function InviteVisitorFormComponent_ng_template_1_ng_container_11_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵi18nStart(0, 17, 2);
    i0.ɵɵelementContainer(1);
    i0.ɵɵi18nEnd();
  }
  if (rf & 2) {
    var ctx_r3 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance();
    i0.ɵɵi18nExp(ctx_r3.last_count)(ctx_r3.last_count == 1 ? "" : "s");
    i0.ɵɵi18nApply(0);
  }
}
function InviteVisitorFormComponent_ng_template_1_Template(rf, ctx) {
  if (rf & 1) {
    var _r15 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 61)(1, "div", 62)(2, "h2", 63);
    i0.ɵɵi18nStart(3, 16);
    i0.ɵɵtemplate(4, InviteVisitorFormComponent_ng_template_1_ng_container_4_Template, 2, 1, "ng-container", 64)(5, InviteVisitorFormComponent_ng_template_1_ng_container_5_Template, 2, 2, "ng-container", 64);
    i0.ɵɵi18nEnd();
    i0.ɵɵelementEnd();
    i0.ɵɵelement(6, "img", 65);
    i0.ɵɵelementStart(7, "p");
    i0.ɵɵi18nStart(8, 17);
    i0.ɵɵelementStart(9, "i");
    i0.ɵɵtemplate(10, InviteVisitorFormComponent_ng_template_1_ng_container_10_Template, 2, 1, "ng-container", 64)(11, InviteVisitorFormComponent_ng_template_1_ng_container_11_Template, 2, 2, "ng-container", 64);
    i0.ɵɵelementEnd();
    i0.ɵɵpipe(12, "date");
    i0.ɵɵpipe(13, "date");
    i0.ɵɵi18nEnd();
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(14, "div", 66)(15, "div", 67)(16, "button", 68);
    i0.ɵɵlistener("click", function InviteVisitorFormComponent_ng_template_1_Template_button_click_16_listener() {
      i0.ɵɵrestoreView(_r15);
      var ctx_r3 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r3.onDone());
    });
    i0.ɵɵi18n(17, 18);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(18, "button", 68);
    i0.ɵɵlistener("click", function InviteVisitorFormComponent_ng_template_1_Template_button_click_18_listener() {
      i0.ɵɵrestoreView(_r15);
      var ctx_r3 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r3.sent = false);
    });
    i0.ɵɵi18n(19, 19);
    i0.ɵɵelementEnd()()()();
  }
  if (rf & 2) {
    var ctx_r3 = i0.ɵɵnextContext();
    i0.ɵɵadvance(4);
    i0.ɵɵproperty("ngIf", !ctx_r3.multiple);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", ctx_r3.multiple);
    i0.ɵɵadvance(5);
    i0.ɵɵproperty("ngIf", !ctx_r3.multiple);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", ctx_r3.multiple);
    i0.ɵɵadvance(2);
    i0.ɵɵi18nExp((ctx_r3.building == null ? null : ctx_r3.building.display_name) || (ctx_r3.building == null ? null : ctx_r3.building.name))(i0.ɵɵpipeBind2(12, 7, ctx_r3.last_success == null ? null : ctx_r3.last_success.date, "mediumDate"))(i0.ɵɵpipeBind2(13, 10, ctx_r3.last_success == null ? null : ctx_r3.last_success.date, ctx_r3.time_format));
    i0.ɵɵi18nApply(8);
  }
}
function InviteVisitorFormComponent_ng_template_3_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 69);
    i0.ɵɵelement(1, "mat-spinner", 70);
    i0.ɵɵelementStart(2, "p");
    i0.ɵɵi18n(3, 20);
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    i0.ɵɵadvance();
    i0.ɵɵproperty("diameter", 32);
  }
}
function InviteVisitorFormComponent_ng_template_5_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 71)(1, "label", 52);
    i0.ɵɵi18nStart(2, 21);
    i0.ɵɵelement(3, "span");
    i0.ɵɵi18nEnd();
    i0.ɵɵelementEnd();
    i0.ɵɵelement(4, "a-user-list-field", 72);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r3 = i0.ɵɵnextContext();
    i0.ɵɵproperty("formGroup", ctx_r3.form);
    i0.ɵɵadvance(4);
    i0.ɵɵproperty("guests_only", true);
  }
}
var InviteVisitorFormComponent = /*#__PURE__*/function (_common_1$AsyncHandle) {
  function InviteVisitorFormComponent(_service, _settings, _org) {
    var _this;
    _classCallCheck(this, InviteVisitorFormComponent);
    _this = _callSuper(this, InviteVisitorFormComponent);
    _this._service = _service;
    _this._settings = _settings;
    _this._org = _org;
    _this.done = new core_1.EventEmitter();
    _this.sent = false;
    _this.loading = _this._service.loading;
    _this.loading_many = false;
    _this.buildings = _this._org.active_buildings;
    _this.last_success = _this._service.last_success;
    _this.last_count = 0;
    _this.visitors = [];
    _this.filtered_visitors = [];
    return _this;
  }
  _inherits(InviteVisitorFormComponent, _common_1$AsyncHandle);
  return _createClass(InviteVisitorFormComponent, [{
    key: "multiple",
    get: function get() {
      return this._settings.get('app.bookings.multiple_visitors');
    }
  }, {
    key: "can_book_for_others",
    get: function get() {
      return this._settings.get('app.bookings.can_book_for_others');
    }
  }, {
    key: "building",
    get: function get() {
      return this._settings.get('app.use_region') ? this._org.region : this._org.building;
    }
  }, {
    key: "form",
    get: function get() {
      return this._service.form;
    }
  }, {
    key: "time_format",
    get: function get() {
      return this._settings.time_format;
    }
  }, {
    key: "use_24hr",
    get: function get() {
      return this._settings.get('app.use_24_hour_time');
    }
  }, {
    key: "ngOnInit",
    value: function () {
      var _ngOnInit = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
        var _this2 = this;
        var visitors, _iterator, _step, item, _item$split, _item$split2, email, name, company;
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              this.sent = false;
              this._service.clearOldState();
              _context.next = 4;
              return this.initFormZone();
            case 4:
              this.form.get('asset_id').setValidators([forms_1.Validators.required, forms_1.Validators.email]);
              visitors = this._settings.get('visitor-invitees') || [];
              _iterator = _createForOfIteratorHelper(visitors);
              try {
                for (_iterator.s(); !(_step = _iterator.n()).done;) {
                  item = _step.value;
                  _item$split = item.split('|'), _item$split2 = _slicedToArray(_item$split, 3), email = _item$split2[0], name = _item$split2[1], company = _item$split2[2];
                  this.visitors.push({
                    email: email,
                    name: name,
                    company: company
                  });
                }
              } catch (err) {
                _iterator.e(err);
              } finally {
                _iterator.f();
              }
              this.filterVisitors('');
              this.subscription('email', this.form.get('asset_id').valueChanges.subscribe(function (_) {
                return _this2.filterVisitors(_);
              }));
              this.subscription('name', this.form.get('asset_name').valueChanges.subscribe(function (_) {
                return _this2.filterVisitors(_);
              }));
              if (this.multiple) this.form.patchValue({
                asset_id: 'multiple@place.tech'
              });
            case 12:
            case "end":
              return _context.stop();
          }
        }, _callee, this);
      }));
      function ngOnInit() {
        return _ngOnInit.apply(this, arguments);
      }
      return ngOnInit;
    }()
  }, {
    key: "setVisitor",
    value: function setVisitor(item) {
      this.form.patchValue({
        asset_id: item.email,
        asset_name: item.name,
        company: item.company,
        phone: item.phone
      });
    }
  }, {
    key: "filterVisitors",
    value: function filterVisitors(filter) {
      var s = (filter || '').toLowerCase();
      this.filtered_visitors = this.visitors.filter(function (_ref) {
        var email = _ref.email,
          name = _ref.name,
          company = _ref.company;
        return email.toLowerCase().includes(s) || name.toLowerCase().includes(s) || company.toLowerCase().includes(s);
      });
    }
  }, {
    key: "onDone",
    value: function onDone() {
      this.done.emit();
      this.sent = false;
    }
  }, {
    key: "sendInvite",
    value: function () {
      var _sendInvite = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {
        var _this$form$value, asset_id, asset_name, company, assets, visitor_details, old_visitors;
        return _regeneratorRuntime().wrap(function _callee2$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              this.form.markAllAsTouched();
              if (!(!this.form.valid || this.multiple && !this.form.value.assets.length)) {
                _context2.next = 3;
                break;
              }
              return _context2.abrupt("return", (0, notifications_1.notifyError)("Some fields are invalid. [".concat((0, general_1.getInvalidFields)(this.form).join(', ') || 'visitors', "]")));
            case 3:
              if (!this.form.value.user_email || !this.can_book_for_others) {
                this.form.patchValue({
                  user: (0, common_1.currentUser)()
                });
              }
              _this$form$value = this.form.value, asset_id = _this$form$value.asset_id, asset_name = _this$form$value.asset_name, company = _this$form$value.company, assets = _this$form$value.assets;
              visitor_details = "".concat(asset_id, "|").concat(asset_name, "|").concat(company);
              old_visitors = this._settings.get('visitor-invitees') || [];
              this._settings.saveUserSetting('visitor-invitees', [].concat(_toConsumableArray(old_visitors.filter(function (_) {
                return !_.includes(asset_id);
              })), [visitor_details]));
              _context2.next = 10;
              return this.multiple ? this._bookForMany() : this._bookForOne();
            case 10:
              this.last_success = this._service.last_success;
              _context2.next = 13;
              return this.initFormZone();
            case 13:
              this.sent = true;
            case 14:
            case "end":
              return _context2.stop();
          }
        }, _callee2, this);
      }));
      function sendInvite() {
        return _sendInvite.apply(this, arguments);
      }
      return sendInvite;
    }()
  }, {
    key: "initFormZone",
    value: function () {
      var _initFormZone = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {
        var _this$_org$building;
        return _regeneratorRuntime().wrap(function _callee3$(_context3) {
          while (1) switch (_context3.prev = _context3.next) {
            case 0:
              _context3.next = 2;
              return this._org.initialised.pipe((0, operators_1.first)(function (_) {
                return _;
              })).toPromise();
            case 2:
              this._service.setOptions({
                type: 'visitor'
              });
              this.form.patchValue({
                booking_type: 'visitor',
                zones: [(_this$_org$building = this._org.building) === null || _this$_org$building === void 0 ? void 0 : _this$_org$building.id]
              });
              if (this.multiple) this.form.patchValue({
                asset_id: 'multiple@place.tech'
              });
            case 5:
            case "end":
              return _context3.stop();
          }
        }, _callee3, this);
      }));
      function initFormZone() {
        return _initFormZone.apply(this, arguments);
      }
      return initFormZone;
    }()
  }, {
    key: "_bookForOne",
    value: function () {
      var _bookForOne2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4() {
        var value;
        return _regeneratorRuntime().wrap(function _callee4$(_context4) {
          while (1) switch (_context4.prev = _context4.next) {
            case 0:
              value = this.form.value;
              this.form.patchValue({
                name: value.asset_name,
                attendees: [new user_class_1.User({
                  name: value.asset_name,
                  email: value.asset_id,
                  organisation: value.company,
                  phone: value.phone
                })]
              });
              _context4.next = 4;
              return this._service.postForm()["catch"](function (e) {
                (0, notifications_1.notifyError)(e);
                throw e;
              });
            case 4:
            case "end":
              return _context4.stop();
          }
        }, _callee4, this);
      }));
      function _bookForOne() {
        return _bookForOne2.apply(this, arguments);
      }
      return _bookForOne;
    }()
  }, {
    key: "_bookForMany",
    value: function () {
      var _bookForMany2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee5() {
        var _this3 = this;
        var group, value, assets, _iterator2, _step2, user;
        return _regeneratorRuntime().wrap(function _callee5$(_context5) {
          while (1) switch (_context5.prev = _context5.next) {
            case 0:
              this.loading_many = true;
              group = "grp-".concat((0, general_1.randomString)(8));
              value = this.form.value;
              assets = value.assets;
              this.last_count = assets.length;
              _iterator2 = _createForOfIteratorHelper(assets);
              _context5.prev = 6;
              _iterator2.s();
            case 8:
              if ((_step2 = _iterator2.n()).done) {
                _context5.next = 17;
                break;
              }
              user = _step2.value;
              if (user.email) {
                _context5.next = 12;
                break;
              }
              return _context5.abrupt("continue", 15);
            case 12:
              this.form.patchValue(_objectSpread(_objectSpread({}, value), {}, {
                booking_type: 'visitor',
                asset_id: user.email,
                asset_name: user.name,
                user: (0, common_1.currentUser)(),
                description: group,
                name: user.name,
                assets: [],
                attendees: [new user_class_1.User({
                  name: user.name,
                  email: user.email,
                  organisation: user.company || user.organisation,
                  phone: user.phone
                })]
              }));
              _context5.next = 15;
              return this._service.postForm()["catch"](function (e) {
                (0, notifications_1.notifyError)(e);
                _this3.loading_many = false;
                throw e;
              });
            case 15:
              _context5.next = 8;
              break;
            case 17:
              _context5.next = 22;
              break;
            case 19:
              _context5.prev = 19;
              _context5.t0 = _context5["catch"](6);
              _iterator2.e(_context5.t0);
            case 22:
              _context5.prev = 22;
              _iterator2.f();
              return _context5.finish(22);
            case 25:
              this.loading_many = false;
            case 26:
            case "end":
              return _context5.stop();
          }
        }, _callee5, this, [[6, 19, 22, 25]]);
      }));
      function _bookForMany() {
        return _bookForMany2.apply(this, arguments);
      }
      return _bookForMany;
    }()
  }]);
}(common_1.AsyncHandler);
_InviteVisitorFormComponent = InviteVisitorFormComponent;
_InviteVisitorFormComponent.ɵfac = function InviteVisitorFormComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _InviteVisitorFormComponent)(i0.ɵɵdirectiveInject(i1.BookingFormService), i0.ɵɵdirectiveInject(i2.SettingsService), i0.ɵɵdirectiveInject(i3.OrganisationService));
};
_InviteVisitorFormComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _InviteVisitorFormComponent,
  selectors: [["invite-visitor-form"]],
  outputs: {
    done: "done"
  },
  features: [i0.ɵɵInheritDefinitionFeature],
  decls: 7,
  vars: 2,
  consts: function consts() {
    var i18n_0;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_4809719174148656467$$LIBS_BOOKINGS_SRC_LIB_INVITE_VISITOR_FORM_COMPONENT_TS_0 = goog.getMsg("Invite Visitor");
      i18n_0 = MSG_EXTERNAL_4809719174148656467$$LIBS_BOOKINGS_SRC_LIB_INVITE_VISITOR_FORM_COMPONENT_TS_0;
    } else {
      i18n_0 = $localize(_templateObject || (_templateObject = _taggedTemplateLiteral([":\u241F5ce047ca92a7474d89cf5b08a9913b0a93d28404\u241F4809719174148656467:Invite Visitor"])));
    }
    var i18n_1;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_994966389368964414$$LIBS_BOOKINGS_SRC_LIB_INVITE_VISITOR_FORM_COMPONENT_TS_1 = goog.getMsg(" Send Visitor Invite ");
      i18n_1 = MSG_EXTERNAL_994966389368964414$$LIBS_BOOKINGS_SRC_LIB_INVITE_VISITOR_FORM_COMPONENT_TS_1;
    } else {
      i18n_1 = $localize(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([":\u241F207022d8123aa7a8693ff4c53cd28fea3d5bdff2\u241F994966389368964414: Send Visitor Invite "])));
    }
    var i18n_2;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_3158758063619980932$$LIBS_BOOKINGS_SRC_LIB_INVITE_VISITOR_FORM_COMPONENT_TS_2 = goog.getMsg("Date{$startTagSpan}*{$closeTagSpan}", {
        "closeTagSpan": "\uFFFD/#5\uFFFD",
        "startTagSpan": "\uFFFD#5\uFFFD"
      }, {
        original_code: {
          "closeTagSpan": "</span>",
          "startTagSpan": "<span>"
        }
      });
      i18n_2 = MSG_EXTERNAL_3158758063619980932$$LIBS_BOOKINGS_SRC_LIB_INVITE_VISITOR_FORM_COMPONENT_TS_2;
    } else {
      i18n_2 = $localize(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([":\u241F04cfb5fd033651743bc4b9408bd52ba4ee894070\u241F3158758063619980932:Date", ":START_TAG_SPAN:*", ":CLOSE_TAG_SPAN:"])), "\uFFFD#5\uFFFD", "\uFFFD/#5\uFFFD");
    }
    var i18n_3;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_145741817832495807$$LIBS_BOOKINGS_SRC_LIB_INVITE_VISITOR_FORM_COMPONENT_TS_3 = goog.getMsg(" Start Time{$startTagSpan}*{$closeTagSpan}", {
        "closeTagSpan": "\uFFFD/#11\uFFFD",
        "startTagSpan": "\uFFFD#11\uFFFD"
      }, {
        original_code: {
          "closeTagSpan": "</span>",
          "startTagSpan": "<span>"
        }
      });
      i18n_3 = MSG_EXTERNAL_145741817832495807$$LIBS_BOOKINGS_SRC_LIB_INVITE_VISITOR_FORM_COMPONENT_TS_3;
    } else {
      i18n_3 = $localize(_templateObject4 || (_templateObject4 = _taggedTemplateLiteral([":\u241Feac10bd97a4b6b06a0221c661de781836b7a1e1c\u241F145741817832495807: Start Time", ":START_TAG_SPAN:*", ":CLOSE_TAG_SPAN:"])), "\uFFFD#11\uFFFD", "\uFFFD/#11\uFFFD");
    }
    var i18n_4;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_5960185837188220843$$LIBS_BOOKINGS_SRC_LIB_INVITE_VISITOR_FORM_COMPONENT_TS_4 = goog.getMsg("End Time{$startTagSpan}*{$closeTagSpan}", {
        "closeTagSpan": "\uFFFD/#16\uFFFD",
        "startTagSpan": "\uFFFD#16\uFFFD"
      }, {
        original_code: {
          "closeTagSpan": "</span>",
          "startTagSpan": "<span>"
        }
      });
      i18n_4 = MSG_EXTERNAL_5960185837188220843$$LIBS_BOOKINGS_SRC_LIB_INVITE_VISITOR_FORM_COMPONENT_TS_4;
    } else {
      i18n_4 = $localize(_templateObject5 || (_templateObject5 = _taggedTemplateLiteral([":\u241F85d5c3a89bab9a7475a7db095089e161586cb7a1\u241F5960185837188220843:End Time", ":START_TAG_SPAN:*", ":CLOSE_TAG_SPAN:"])), "\uFFFD#16\uFFFD", "\uFFFD/#16\uFFFD");
    }
    var i18n_5;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_495507623260232513$$LIBS_BOOKINGS_SRC_LIB_INVITE_VISITOR_FORM_COMPONENT_TS_5 = goog.getMsg("Reason for visit");
      i18n_5 = MSG_EXTERNAL_495507623260232513$$LIBS_BOOKINGS_SRC_LIB_INVITE_VISITOR_FORM_COMPONENT_TS_5;
    } else {
      i18n_5 = $localize(_templateObject6 || (_templateObject6 = _taggedTemplateLiteral([":\u241F8aaaa9966e2e05be99e9b239f3b257767366b8bf\u241F495507623260232513:Reason for visit"])));
    }
    var i18n_6;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_4333771954088602266$$LIBS_BOOKINGS_SRC_LIB_INVITE_VISITOR_FORM_COMPONENT_TS_6 = goog.getMsg("Select building");
      i18n_6 = MSG_EXTERNAL_4333771954088602266$$LIBS_BOOKINGS_SRC_LIB_INVITE_VISITOR_FORM_COMPONENT_TS_6;
    } else {
      i18n_6 = $localize(_templateObject7 || (_templateObject7 = _taggedTemplateLiteral([":\u241Fa2a7f73f9ff1df08f9f055ead8f1b25a91c060a3\u241F4333771954088602266:Select building"])));
    }
    var i18n_7;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_5685627853493098762$$LIBS_BOOKINGS_SRC_LIB_INVITE_VISITOR_FORM_COMPONENT_TS_7 = goog.getMsg(" Building{$startTagSpan}*{$closeTagSpan}", {
        "closeTagSpan": "\uFFFD/#3\uFFFD",
        "startTagSpan": "\uFFFD#3\uFFFD"
      }, {
        original_code: {
          "closeTagSpan": "</span>",
          "startTagSpan": "<span>"
        }
      });
      i18n_7 = MSG_EXTERNAL_5685627853493098762$$LIBS_BOOKINGS_SRC_LIB_INVITE_VISITOR_FORM_COMPONENT_TS_7;
    } else {
      i18n_7 = $localize(_templateObject8 || (_templateObject8 = _taggedTemplateLiteral([":\u241F299cead719c6fe6ad6f5fba06ac22e21f0c4acb2\u241F5685627853493098762: Building", ":START_TAG_SPAN:*", ":CLOSE_TAG_SPAN:"])), "\uFFFD#3\uFFFD", "\uFFFD/#3\uFFFD");
    }
    var i18n_8;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_4464638374806874490$$LIBS_BOOKINGS_SRC_LIB_INVITE_VISITOR_FORM_COMPONENT_TS_8 = goog.getMsg("Visitor Name{$startTagSpan}*{$closeTagSpan}", {
        "closeTagSpan": "\uFFFD/#4\uFFFD",
        "startTagSpan": "\uFFFD#4\uFFFD"
      }, {
        original_code: {
          "closeTagSpan": "</span>",
          "startTagSpan": "<span>"
        }
      });
      i18n_8 = MSG_EXTERNAL_4464638374806874490$$LIBS_BOOKINGS_SRC_LIB_INVITE_VISITOR_FORM_COMPONENT_TS_8;
    } else {
      i18n_8 = $localize(_templateObject9 || (_templateObject9 = _taggedTemplateLiteral([":\u241Fcf671ca02377cd191d8b3c68c7befb5984469f16\u241F4464638374806874490:Visitor Name", ":START_TAG_SPAN:*", ":CLOSE_TAG_SPAN:"])), "\uFFFD#4\uFFFD", "\uFFFD/#4\uFFFD");
    }
    var i18n_9;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_195607823904920605$$LIBS_BOOKINGS_SRC_LIB_INVITE_VISITOR_FORM_COMPONENT_TS_9 = goog.getMsg(" Visitor Email{$startTagSpan}*{$closeTagSpan}", {
        "closeTagSpan": "\uFFFD/#13\uFFFD",
        "startTagSpan": "\uFFFD#13\uFFFD"
      }, {
        original_code: {
          "closeTagSpan": "</span>",
          "startTagSpan": "<span>"
        }
      });
      i18n_9 = MSG_EXTERNAL_195607823904920605$$LIBS_BOOKINGS_SRC_LIB_INVITE_VISITOR_FORM_COMPONENT_TS_9;
    } else {
      i18n_9 = $localize(_templateObject10 || (_templateObject10 = _taggedTemplateLiteral([":\u241Fdf470c6a7cce24cc7887968eabb3ee0c1bbd3f7c\u241F195607823904920605: Visitor Email", ":START_TAG_SPAN:*", ":CLOSE_TAG_SPAN:"])), "\uFFFD#13\uFFFD", "\uFFFD/#13\uFFFD");
    }
    var i18n_10;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_5102326149417665173$$LIBS_BOOKINGS_SRC_LIB_INVITE_VISITOR_FORM_COMPONENT_TS_10 = goog.getMsg(" A valid email is required ");
      i18n_10 = MSG_EXTERNAL_5102326149417665173$$LIBS_BOOKINGS_SRC_LIB_INVITE_VISITOR_FORM_COMPONENT_TS_10;
    } else {
      i18n_10 = $localize(_templateObject11 || (_templateObject11 = _taggedTemplateLiteral([":\u241Fd025fcfed88fe09dce74563ddafbfefb47111f11\u241F5102326149417665173: A valid email is required "])));
    }
    var i18n_11;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_1826215573205981970$$LIBS_BOOKINGS_SRC_LIB_INVITE_VISITOR_FORM_COMPONENT_TS_11 = goog.getMsg("Company");
      i18n_11 = MSG_EXTERNAL_1826215573205981970$$LIBS_BOOKINGS_SRC_LIB_INVITE_VISITOR_FORM_COMPONENT_TS_11;
    } else {
      i18n_11 = $localize(_templateObject12 || (_templateObject12 = _taggedTemplateLiteral([":\u241F6ef0619a37140118b9e640c6cc36ee4e9fb4372a\u241F1826215573205981970:Company"])));
    }
    var i18n_12;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_2924076986947727128$$LIBS_BOOKINGS_SRC_LIB_INVITE_VISITOR_FORM_COMPONENT_TS_12 = goog.getMsg(" Visitor invite sent to {$startTagNgContainer} {$interpolation} {$closeTagNgContainer}{$startTagNgContainer_1} {$interpolation_1} visitor{$interpolation_2} {$closeTagNgContainer}", {
        "closeTagNgContainer": "[\uFFFD/#1:1\uFFFD\uFFFD/*4:1\uFFFD|\uFFFD/#1:2\uFFFD\uFFFD/*5:2\uFFFD]",
        "interpolation": "\uFFFD0:1\uFFFD",
        "interpolation_1": "\uFFFD0:2\uFFFD",
        "interpolation_2": "\uFFFD1:2\uFFFD",
        "startTagNgContainer": "\uFFFD*4:1\uFFFD\uFFFD#1:1\uFFFD",
        "startTagNgContainer_1": "\uFFFD*5:2\uFFFD\uFFFD#1:2\uFFFD"
      }, {
        original_code: {
          "closeTagNgContainer": "</ng-container>",
          "interpolation": "{{\n                                last_success?.asset_name ||\n                                    last_success?.asset_id\n                            }}",
          "interpolation_1": "{{ last_count }}",
          "interpolation_2": "{{\n                                last_count == 1 ? '' : 's'\n                            }}",
          "startTagNgContainer": "<ng-container *ngIf=\"!multiple\">",
          "startTagNgContainer_1": "<ng-container *ngIf=\"multiple\">"
        }
      });
      i18n_12 = MSG_EXTERNAL_2924076986947727128$$LIBS_BOOKINGS_SRC_LIB_INVITE_VISITOR_FORM_COMPONENT_TS_12;
    } else {
      i18n_12 = $localize(_templateObject13 || (_templateObject13 = _taggedTemplateLiteral([":\u241F3813db8d52465bf6153aa3eab78e731607297455\u241F2924076986947727128: Visitor invite sent to ", ":START_TAG_NG_CONTAINER: ", ":INTERPOLATION: ", ":CLOSE_TAG_NG_CONTAINER:", ":START_TAG_NG_CONTAINER_1: ", ":INTERPOLATION_1: visitor", ":INTERPOLATION_2: ", ":CLOSE_TAG_NG_CONTAINER:"])), "\uFFFD*4:1\uFFFD\uFFFD#1:1\uFFFD", "\uFFFD0:1\uFFFD", "[\uFFFD/#1:1\uFFFD\uFFFD/*4:1\uFFFD|\uFFFD/#1:2\uFFFD\uFFFD/*5:2\uFFFD]", "\uFFFD*5:2\uFFFD\uFFFD#1:2\uFFFD", "\uFFFD0:2\uFFFD", "\uFFFD1:2\uFFFD", "[\uFFFD/#1:1\uFFFD\uFFFD/*4:1\uFFFD|\uFFFD/#1:2\uFFFD\uFFFD/*5:2\uFFFD]");
    }
    i18n_12 = i0.ɵɵi18nPostprocess(i18n_12);
    var i18n_13;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_941544886358218249$$LIBS_BOOKINGS_SRC_LIB_INVITE_VISITOR_FORM_COMPONENT_TS_13 = goog.getMsg(" Invite has been sent to {$startItalicText}{$startTagNgContainer} {$interpolation} {$closeTagNgContainer}{$startTagNgContainer_1} {$interpolation_1} visitor{$interpolation_2} {$closeTagNgContainer}{$closeItalicText} to attend {$interpolation_3} from {$interpolation_4} at {$interpolation_5} ", {
        "closeItalicText": "\uFFFD/#9\uFFFD",
        "closeTagNgContainer": "[\uFFFD/#1:1\uFFFD\uFFFD/*10:1\uFFFD|\uFFFD/#1:2\uFFFD\uFFFD/*11:2\uFFFD]",
        "interpolation": "\uFFFD0:1\uFFFD",
        "interpolation_1": "\uFFFD0:2\uFFFD",
        "interpolation_2": "\uFFFD1:2\uFFFD",
        "interpolation_3": "\uFFFD0\uFFFD",
        "interpolation_4": "\uFFFD1\uFFFD",
        "interpolation_5": "\uFFFD2\uFFFD",
        "startItalicText": "\uFFFD#9\uFFFD",
        "startTagNgContainer": "\uFFFD*10:1\uFFFD\uFFFD#1:1\uFFFD",
        "startTagNgContainer_1": "\uFFFD*11:2\uFFFD\uFFFD#1:2\uFFFD"
      }, {
        original_code: {
          "closeItalicText": "</i>",
          "closeTagNgContainer": "</ng-container>",
          "interpolation": "{{\n                                    last_success?.asset_name ||\n                                        last_success?.asset_id\n                                }}",
          "interpolation_1": "{{ last_count }}",
          "interpolation_2": "{{\n                                    last_count == 1 ? '' : 's'\n                                }}",
          "interpolation_3": "{{ building?.display_name || building?.name }}",
          "interpolation_4": "{{ last_success?.date | date: 'mediumDate' }}",
          "interpolation_5": "{{ last_success?.date | date: time_format }}",
          "startItalicText": "<i>",
          "startTagNgContainer": "<ng-container *ngIf=\"!multiple\">",
          "startTagNgContainer_1": "<ng-container *ngIf=\"multiple\">"
        }
      });
      i18n_13 = MSG_EXTERNAL_941544886358218249$$LIBS_BOOKINGS_SRC_LIB_INVITE_VISITOR_FORM_COMPONENT_TS_13;
    } else {
      i18n_13 = $localize(_templateObject14 || (_templateObject14 = _taggedTemplateLiteral([":\u241F797ad60704f8979ef5951430ea9947b27782284b\u241F941544886358218249: Invite has been sent to ", ":START_ITALIC_TEXT:", ":START_TAG_NG_CONTAINER: ", ":INTERPOLATION: ", ":CLOSE_TAG_NG_CONTAINER:", ":START_TAG_NG_CONTAINER_1: ", ":INTERPOLATION_1: visitor", ":INTERPOLATION_2: ", ":CLOSE_TAG_NG_CONTAINER:", ":CLOSE_ITALIC_TEXT: to attend ", ":INTERPOLATION_3: from ", ":INTERPOLATION_4: at ", ":INTERPOLATION_5: "])), "\uFFFD#9\uFFFD", "\uFFFD*10:1\uFFFD\uFFFD#1:1\uFFFD", "\uFFFD0:1\uFFFD", "[\uFFFD/#1:1\uFFFD\uFFFD/*10:1\uFFFD|\uFFFD/#1:2\uFFFD\uFFFD/*11:2\uFFFD]", "\uFFFD*11:2\uFFFD\uFFFD#1:2\uFFFD", "\uFFFD0:2\uFFFD", "\uFFFD1:2\uFFFD", "[\uFFFD/#1:1\uFFFD\uFFFD/*10:1\uFFFD|\uFFFD/#1:2\uFFFD\uFFFD/*11:2\uFFFD]", "\uFFFD/#9\uFFFD", "\uFFFD0\uFFFD", "\uFFFD1\uFFFD", "\uFFFD2\uFFFD");
    }
    i18n_13 = i0.ɵɵi18nPostprocess(i18n_13);
    var i18n_14;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_7858372686370953213$$LIBS_BOOKINGS_SRC_LIB_INVITE_VISITOR_FORM_COMPONENT_TS_14 = goog.getMsg(" Great, thanks ");
      i18n_14 = MSG_EXTERNAL_7858372686370953213$$LIBS_BOOKINGS_SRC_LIB_INVITE_VISITOR_FORM_COMPONENT_TS_14;
    } else {
      i18n_14 = $localize(_templateObject15 || (_templateObject15 = _taggedTemplateLiteral([":\u241Faf6a082ad33b2635f588016703e454c8fb7f7e0f\u241F7858372686370953213: Great, thanks "])));
    }
    var i18n_15;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_3676425961094889121$$LIBS_BOOKINGS_SRC_LIB_INVITE_VISITOR_FORM_COMPONENT_TS_15 = goog.getMsg(" Book Another Visitor ");
      i18n_15 = MSG_EXTERNAL_3676425961094889121$$LIBS_BOOKINGS_SRC_LIB_INVITE_VISITOR_FORM_COMPONENT_TS_15;
    } else {
      i18n_15 = $localize(_templateObject16 || (_templateObject16 = _taggedTemplateLiteral([":\u241F63356c3f7d6177e1e29a68e272010f75eacb3c97\u241F3676425961094889121: Book Another Visitor "])));
    }
    var i18n_16;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_6183159301460846057$$LIBS_BOOKINGS_SRC_LIB_INVITE_VISITOR_FORM_COMPONENT_TS_16 = goog.getMsg("Sending invitation...");
      i18n_16 = MSG_EXTERNAL_6183159301460846057$$LIBS_BOOKINGS_SRC_LIB_INVITE_VISITOR_FORM_COMPONENT_TS_16;
    } else {
      i18n_16 = $localize(_templateObject17 || (_templateObject17 = _taggedTemplateLiteral([":\u241F59c7bf21621b0422b39735ebc6af2ccb26d894e3\u241F6183159301460846057:Sending invitation..."])));
    }
    var i18n_17;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_5958588135415093025$$LIBS_BOOKINGS_SRC_LIB_INVITE_VISITOR_FORM_COMPONENT_TS_17 = goog.getMsg("Visitors{$startTagSpan}*{$closeTagSpan}", {
        "closeTagSpan": "\uFFFD/#3\uFFFD",
        "startTagSpan": "\uFFFD#3\uFFFD"
      }, {
        original_code: {
          "closeTagSpan": "</span>",
          "startTagSpan": "<span>"
        }
      });
      i18n_17 = MSG_EXTERNAL_5958588135415093025$$LIBS_BOOKINGS_SRC_LIB_INVITE_VISITOR_FORM_COMPONENT_TS_17;
    } else {
      i18n_17 = $localize(_templateObject18 || (_templateObject18 = _taggedTemplateLiteral([":\u241F6e457c162b83dc787ae4a7a9bda0ca1f3b021b6c\u241F5958588135415093025:Visitors", ":START_TAG_SPAN:*", ":CLOSE_TAG_SPAN:"])), "\uFFFD#3\uFFFD", "\uFFFD/#3\uFFFD");
    }
    return [["send_state", ""], ["load_state", ""], ["multi_state", ""], ["name_auto", "matAutocomplete"], ["email_auto", "matAutocomplete"], i18n_0, i18n_1, i18n_2, i18n_3, i18n_4, i18n_5, i18n_7, i18n_8, i18n_9, i18n_10, i18n_11, i18n_12, i18n_13, i18n_14, i18n_15, i18n_16, i18n_17, [4, "ngIf", "ngIfElse"], ["class", "relative flex flex-col bg-base-100 overflow-auto max-h-full", 4, "ngIf", "ngIfElse"], [1, "relative", "flex", "flex-col", "bg-base-100", "overflow-auto", "max-h-full"], [1, "w-full", "border-b", "border-base-200", "sm:px-16", "px-4", "py-4"], [1, "text-2xl", "font-medium"], ["class", "sm:px-16 px-4 py-4", 3, "formGroup", 4, "ngIf"], [1, "sticky", "sm:px-16", "px-4", "py-4", "border-t", "bg-base-100", "border-base-200", "bottom-0"], ["btn", "", "matRipple", "", "send", "", 1, "w-full", "sm:w-auto", 3, "click"], [1, "sm:px-16", "px-4", "py-4", 3, "formGroup"], ["class", "flex flex-col", 4, "ngIf"], [1, "flex", "flex-col"], ["for", "date"], ["name", "date", "formControlName", "date"], [1, "flex", "items-center", "space-x-2"], [1, "flex-1", "flex", "flex-col", "w-1/3"], ["for", "start-time"], ["name", "start-time", 3, "ngModelChange", "ngModel", "ngModelOptions", "disabled", "use_24hr"], ["for", "end-time"], ["name", "end-time", "formControlName", "duration", 3, "time", "use_24hr"], ["class", "w-full flex flex-col", 4, "ngIf"], ["for", "reason"], ["appearance", "outline"], ["name", "reason", "matInput", "", "formControlName", "description", "placeholder", "e.g. Meeting Catchup"], ["for", "building"], ["name", "building", "placeholder", i18n_6, 3, "ngModelChange", "ngModel", "ngModelOptions"], [3, "value", 4, "ngFor", "ngForOf"], [3, "value"], [1, "w-full", "flex", "flex-col"], ["for", "host"], ["name", "host", "formControlName", "user", 1, "mb-4"], ["for", "visitor-name"], ["matInput", "", "name", "visitor-name", "formControlName", "asset_name", "placeholder", "Name of the visitor", 3, "focus", "matAutocomplete"], [3, "value", "click", 4, "ngFor", "ngForOf"], ["for", "visitor-email"], ["matInput", "", "name", "visitor-email", "type", "email", "formControlName", "asset_id", "placeholder", "Email of the visitor", 3, "focus", "matAutocomplete"], ["matInput", "", "name", "company", "formControlName", "company", "placeholder", "Company of the visitor"], [3, "click", "value"], [1, "flex", "flex-col", "leading-tight"], [1, "text-xs", "opacity-60"], ["sent", "", 1, "absolute", "inset-0", "bg-base-100", "flex", "flex-col", "items-center", "justify-center", "text-center"], [1, "w-full", "max-w-[32rem]", "flex-1", "h-1/2", "space-y-2", "m-8"], [1, "text-3xl"], [4, "ngIf"], ["src", "assets/icons/sent.svg", 1, "mx-auto"], [1, "w-full", "p-2", "border-t", "border-base-200"], [1, "mx-auto", "flex", "items-center", "space-x-2", "w-full", "max-w-[32rem]"], ["btn", "", "matRipple", "", 1, "flex-1", 3, "click"], ["loading", "", 1, "relative", "flex", "flex-col", "items-center", "justify-center", "rounded", "overflow-hidden", "w-full", "h-full", "min-h-[18rem]"], [3, "diameter"], [1, "flex", "flex-col", 3, "formGroup"], ["formControlName", "assets", 3, "guests_only"]];
  },
  template: function InviteVisitorFormComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵtemplate(0, InviteVisitorFormComponent_ng_container_0_Template, 3, 4, "ng-container", 22)(1, InviteVisitorFormComponent_ng_template_1_Template, 20, 13, "ng-template", null, 0, i0.ɵɵtemplateRefExtractor)(3, InviteVisitorFormComponent_ng_template_3_Template, 4, 1, "ng-template", null, 1, i0.ɵɵtemplateRefExtractor)(5, InviteVisitorFormComponent_ng_template_5_Template, 5, 2, "ng-template", null, 2, i0.ɵɵtemplateRefExtractor);
    }
    if (rf & 2) {
      var send_state_r16 = i0.ɵɵreference(2);
      i0.ɵɵproperty("ngIf", !ctx.sent)("ngIfElse", send_state_r16);
    }
  },
  dependencies: [i4.NgForOf, i4.NgIf, i5.ɵNgNoValidate, i5.DefaultValueAccessor, i5.NgControlStatus, i5.NgControlStatusGroup, i5.NgModel, i5.FormGroupDirective, i5.FormControlName, i6.MatInput, i7.MatFormField, i7.MatError, i8.MatProgressSpinner, i9.MatAutocomplete, i10.MatOption, i9.MatAutocompleteTrigger, i11.DateFieldComponent, i12.DurationFieldComponent, i13.TimeFieldComponent, i14.UserListFieldComponent, i15.UserSearchFieldComponent, i16.MatSelect, i10.MatRipple, i4.AsyncPipe, i4.DatePipe, i17.TranslatePipe]
});
exports.InviteVisitorFormComponent = InviteVisitorFormComponent;

/***/ }),

/***/ 84854:
/*!********************************************************!*\
  !*** ./libs/bookings/src/lib/locker-grid.component.ts ***!
  \********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _createForOfIteratorHelper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createForOfIteratorHelper.js */ 36350)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _LockerGridComponent;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.LockerGridComponent = void 0;
var core_1 = __webpack_require__(/*! @angular/core */ 37580);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var explore_spaces_service_1 = __webpack_require__(/*! libs/explore/src/lib/explore-spaces.service */ 65897);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @placeos/common */ 22797);
var i2 = __webpack_require__(/*! @angular/common */ 60316);
var i3 = __webpack_require__(/*! @angular/material/core */ 74646);
var i4 = __webpack_require__(/*! @angular/material/tooltip */ 80640);
var _c0 = function _c0() {
  return [];
};
function LockerGridComponent_button_3_Template(rf, ctx) {
  if (rf & 1) {
    var _r1 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "button", 3);
    i0.ɵɵlistener("click", function LockerGridComponent_button_3_Template_button_click_0_listener() {
      var locker_r2 = i0.ɵɵrestoreView(_r1).$implicit;
      var ctx_r2 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r2.clicked.emit(locker_r2));
    });
    i0.ɵɵelement(1, "div", 4)(2, "div", 5)(3, "div", 6)(4, "div", 7);
    i0.ɵɵelementStart(5, "div", 8);
    i0.ɵɵtext(6);
    i0.ɵɵelementEnd();
    i0.ɵɵelement(7, "div", 9);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var locker_r2 = ctx.$implicit;
    var ctx_r2 = i0.ɵɵnextContext();
    i0.ɵɵstyleProp("grid-column-start", locker_r2.position[0] + 1)("grid-row-start", locker_r2.position[1] + 1)("grid-column-end", locker_r2.position[0] + (locker_r2.size[0] + 1))("background-color", ctx_r2.status(locker_r2))("grid-row-end", locker_r2.position[1] + (locker_r2.size[1] + 1));
    i0.ɵɵclassProp("opacity-60", ctx_r2.selected && ctx_r2.selected !== locker_r2.id);
    i0.ɵɵproperty("matTooltip", locker_r2.name)("disabled", locker_r2.bookable === false);
    i0.ɵɵadvance(6);
    i0.ɵɵtextInterpolate1(" ", locker_r2.name, " ");
  }
}
var LockerGridComponent = /*#__PURE__*/function () {
  function LockerGridComponent(_settings) {
    _classCallCheck(this, LockerGridComponent);
    this._settings = _settings;
    this.bank_status = {
      '10': 'busy',
      '7': 'pending'
    };
    this.selected = '';
    this.clicked = new core_1.EventEmitter();
  }
  return _createClass(LockerGridComponent, [{
    key: "columns",
    get: function get() {
      var _this$bank;
      var columns = 1;
      var _iterator = _createForOfIteratorHelper(((_this$bank = this.bank) === null || _this$bank === void 0 ? void 0 : _this$bank.lockers) || []),
        _step;
      try {
        for (_iterator.s(); !(_step = _iterator.n()).done;) {
          var locker = _step.value;
          var x = locker.position[0] + locker.size[0];
          if (x > columns) columns = x;
        }
      } catch (err) {
        _iterator.e(err);
      } finally {
        _iterator.f();
      }
      return columns;
    }
  }, {
    key: "status",
    value: function status(locker) {
      var colours = this._settings.get('app.explore.colors') || {};
      var value = this.bank_status[locker.id] || 'free';
      return colours["lockers-".concat(value)] || colours["".concat(value)] || explore_spaces_service_1.DEFAULT_COLOURS["".concat(value)];
    }
  }]);
}();
_LockerGridComponent = LockerGridComponent;
_LockerGridComponent.ɵfac = function LockerGridComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _LockerGridComponent)(i0.ɵɵdirectiveInject(i1.SettingsService));
};
_LockerGridComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _LockerGridComponent,
  selectors: [["locker-grid"]],
  inputs: {
    bank: "bank",
    bank_status: "bank_status",
    selected: "selected"
  },
  outputs: {
    clicked: "clicked"
  },
  decls: 4,
  vars: 9,
  consts: [[1, "p-4", "text-xl", "font-medium"], [1, "flex-1", "grid", "gap-2", "overflow-hidden", "max-h-full", "h-[75vh]", "min-w-[60vw]", "p-2"], ["matRipple", "", "class", "relative border border-base-200 rounded bg-teal-300 overflow-hidden", 3, "opacity-60", "grid-column-start", "grid-row-start", "grid-column-end", "background-color", "grid-row-end", "matTooltip", "disabled", "click", 4, "ngFor", "ngForOf"], ["matRipple", "", 1, "relative", "border", "border-base-200", "rounded", "bg-teal-300", "overflow-hidden", 3, "click", "matTooltip", "disabled"], ["handle", "", 1, "absolute", "top-1/2", "-translate-y-1/2", "left-2", "w-1", "h-6", "bg-neutral", "rounded"], ["vent", "", 1, "absolute", "left-1/2", "-translate-x-1/2", "top-2", "w-3/5", "h-1", "bg-neutral", "rounded-t"], ["vent", "", 1, "absolute", "left-1/2", "-translate-x-1/2", "top-4", "w-3/5", "h-1", "bg-neutral", "rounded-t"], ["vent", "", 1, "absolute", "left-1/2", "-translate-x-1/2", "top-6", "w-3/5", "h-1", "bg-neutral", "rounded-t"], [1, "absolute", "left-1/2", "-translate-x-1/2", "top-8", "text-[0.6rem]", "font-medium", "text-black/60"], [1, "absolute", "inset-0", "hover:bg-neutral"]],
  template: function LockerGridComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵelementStart(0, "div", 0);
      i0.ɵɵtext(1);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(2, "div", 1);
      i0.ɵɵtemplate(3, LockerGridComponent_button_3_Template, 8, 15, "button", 2);
      i0.ɵɵelementEnd();
    }
    if (rf & 2) {
      i0.ɵɵadvance();
      i0.ɵɵtextInterpolate1(" ", ctx.bank == null ? null : ctx.bank.name, " ");
      i0.ɵɵadvance();
      i0.ɵɵstyleProp("width", ctx.columns * 2.5 + "rem")("grid-template-columns", "repeat(" + ctx.columns + ", 1fr)")("grid-template-rows", "repeat(" + (ctx.bank == null ? null : ctx.bank.height) + ", 1fr)");
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngForOf", (ctx.bank == null ? null : ctx.bank.lockers) || i0.ɵɵpureFunction0(8, _c0));
    }
  },
  dependencies: [i2.NgForOf, i3.MatRipple, i4.MatTooltip],
  styles: ["[_nghost-%COMP%] {\n                display: flex;\n                flex-direction: column;\n                height: 100%;\n            }\n            button[disabled][_ngcontent-%COMP%] {\n                pointer-events: none;\n                opacity: 0.75;\n                background-color: #ccc !important;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxvY2tlci1ncmlkLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1lBQ1k7Z0JBQ0ksYUFBYTtnQkFDYixzQkFBc0I7Z0JBQ3RCLFlBQVk7WUFDaEI7WUFDQTtnQkFDSSxvQkFBb0I7Z0JBQ3BCLGFBQWE7Z0JBQ2IsaUNBQWlDO1lBQ3JDIiwiZmlsZSI6ImxvY2tlci1ncmlkLmNvbXBvbmVudC50cyIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgOmhvc3Qge1xuICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBidXR0b25bZGlzYWJsZWRdIHtcbiAgICAgICAgICAgICAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLjc1O1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNjY2MgIWltcG9ydGFudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl19 */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvYm9va2luZ3Mvc3JjL2xpYi9sb2NrZXItZ3JpZC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLGFBQWE7Z0JBQ2Isc0JBQXNCO2dCQUN0QixZQUFZO1lBQ2hCO1lBQ0E7Z0JBQ0ksb0JBQW9CO2dCQUNwQixhQUFhO2dCQUNiLGlDQUFpQztZQUNyQzs7QUFFWixneEJBQWd4QiIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgOmhvc3Qge1xuICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBidXR0b25bZGlzYWJsZWRdIHtcbiAgICAgICAgICAgICAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLjc1O1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNjY2MgIWltcG9ydGFudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl0sInNvdXJjZVJvb3QiOiIifQ== */"]
});
exports.LockerGridComponent = LockerGridComponent;

/***/ }),

/***/ 71511:
/*!**************************************************************!*\
  !*** ./libs/bookings/src/lib/locker-list-field.component.ts ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _taggedTemplateLiteral = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js */ 9959)["default"]);
var _toConsumableArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/toConsumableArray.js */ 86033)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _LockerListFieldComponent, _templateObject, _templateObject2, _templateObject3;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.LockerListFieldComponent = void 0;
var core_1 = __webpack_require__(/*! @angular/core */ 37580);
var forms_1 = __webpack_require__(/*! @angular/forms */ 34456);
var dialog_1 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var settings_service_1 = __webpack_require__(/*! libs/common/src/lib/settings.service */ 14233);
var locker_select_modal_component_1 = __webpack_require__(/*! ./locker-select-modal/locker-select-modal.component */ 90482);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! libs/common/src/lib/settings.service */ 14233);
var i2 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var i3 = __webpack_require__(/*! @angular/common */ 60316);
var i4 = __webpack_require__(/*! @angular/forms */ 34456);
var i5 = __webpack_require__(/*! @angular/material/checkbox */ 97024);
var i6 = __webpack_require__(/*! ../../../components/src/lib/icon.component */ 69434);
var i7 = __webpack_require__(/*! ../../../components/src/lib/authenticated-image.directive */ 93208);
var i8 = __webpack_require__(/*! @angular/material/core */ 74646);
var _c0 = function _c0() {
  return [];
};
var _c1 = function _c1() {
  return {
    standalone: true
  };
};
function LockerListFieldComponent_div_1_div_1_mat_checkbox_4_Template(rf, ctx) {
  if (rf & 1) {
    var _r2 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "mat-checkbox", 28);
    i0.ɵɵlistener("ngModelChange", function LockerListFieldComponent_div_1_div_1_mat_checkbox_4_Template_mat_checkbox_ngModelChange_0_listener($event) {
      var opt_r3 = i0.ɵɵrestoreView(_r2).$implicit;
      var ctx_r3 = i0.ɵɵnextContext(3);
      return i0.ɵɵresetView(ctx_r3.setFeature(opt_r3, $event));
    });
    i0.ɵɵtext(1);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var opt_r3 = ctx.$implicit;
    var ctx_r3 = i0.ɵɵnextContext(3);
    i0.ɵɵproperty("ngModel", (ctx_r3.selected_features || i0.ɵɵpureFunction0(3, _c0)).includes(opt_r3))("ngModelOptions", i0.ɵɵpureFunction0(4, _c1));
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", opt_r3, " ");
  }
}
function LockerListFieldComponent_div_1_div_1_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 24)(1, "label", 25);
    i0.ɵɵtext(2, "Type");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(3, "div", 26);
    i0.ɵɵtemplate(4, LockerListFieldComponent_div_1_div_1_mat_checkbox_4_Template, 2, 5, "mat-checkbox", 27);
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var ctx_r3 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance(4);
    i0.ɵɵproperty("ngForOf", ctx_r3.features);
  }
}
function LockerListFieldComponent_div_1_img_3_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelement(0, "img", 29);
  }
  if (rf & 2) {
    var item_r5 = i0.ɵɵnextContext().$implicit;
    i0.ɵɵproperty("source", item_r5.images[0]);
  }
}
function LockerListFieldComponent_div_1_ng_template_4_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelement(0, "img", 30);
  }
}
function LockerListFieldComponent_div_1_div_14_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 16)(1, "app-icon", 17);
    i0.ɵɵtext(2, "accessible");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(3, "p");
    i0.ɵɵtext(4, "Disability Accessible");
    i0.ɵɵelementEnd()();
  }
}
function LockerListFieldComponent_div_1_Template(rf, ctx) {
  if (rf & 1) {
    var _r1 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 10);
    i0.ɵɵtemplate(1, LockerListFieldComponent_div_1_div_1_Template, 5, 1, "div", 11);
    i0.ɵɵelementStart(2, "div", 12);
    i0.ɵɵtemplate(3, LockerListFieldComponent_div_1_img_3_Template, 1, 1, "img", 13)(4, LockerListFieldComponent_div_1_ng_template_4_Template, 1, 0, "ng-template", null, 0, i0.ɵɵtemplateRefExtractor);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(6, "div", 14)(7, "div", 15);
    i0.ɵɵtext(8);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(9, "div", 16)(10, "app-icon", 17);
    i0.ɵɵtext(11, "place");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(12, "p");
    i0.ɵɵtext(13);
    i0.ɵɵelementEnd()();
    i0.ɵɵtemplate(14, LockerListFieldComponent_div_1_div_14_Template, 5, 0, "div", 18);
    i0.ɵɵelementStart(15, "div", 19)(16, "button", 20);
    i0.ɵɵlistener("click", function LockerListFieldComponent_div_1_Template_button_click_16_listener() {
      var item_r5 = i0.ɵɵrestoreView(_r1).$implicit;
      var ctx_r3 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r3.changeResources(item_r5));
    });
    i0.ɵɵelementStart(17, "div", 21);
    i0.ɵɵi18nStart(18, 2);
    i0.ɵɵelement(19, "app-icon");
    i0.ɵɵi18nEnd();
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(20, "button", 22);
    i0.ɵɵlistener("click", function LockerListFieldComponent_div_1_Template_button_click_20_listener() {
      var item_r5 = i0.ɵɵrestoreView(_r1).$implicit;
      var ctx_r3 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r3.removeResource(item_r5));
    });
    i0.ɵɵelementStart(21, "div", 21);
    i0.ɵɵi18nStart(22, 3);
    i0.ɵɵelement(23, "app-icon");
    i0.ɵɵi18nEnd();
    i0.ɵɵelementEnd()()()();
    i0.ɵɵelementStart(24, "button", 23);
    i0.ɵɵlistener("click", function LockerListFieldComponent_div_1_Template_button_click_24_listener() {
      i0.ɵɵrestoreView(_r1);
      var ctx_r3 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r3.toggleFavourite(ctx_r3.asset));
    });
    i0.ɵɵelementStart(25, "app-icon");
    i0.ɵɵtext(26);
    i0.ɵɵelementEnd()()();
  }
  if (rf & 2) {
    var item_r5 = ctx.$implicit;
    var placeholder_r6 = i0.ɵɵreference(5);
    var ctx_r3 = i0.ɵɵnextContext();
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", ctx_r3.features == null ? null : ctx_r3.features.length);
    i0.ɵɵadvance(2);
    i0.ɵɵproperty("ngIf", item_r5.images == null ? null : item_r5.images.length)("ngIfElse", placeholder_r6);
    i0.ɵɵadvance(5);
    i0.ɵɵtextInterpolate1(" ", item_r5.name || "Locker", " ");
    i0.ɵɵadvance(5);
    i0.ɵɵtextInterpolate((item_r5.zone == null ? null : item_r5.zone.display_name) || (item_r5.zone == null ? null : item_r5.zone.name));
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", item_r5.accessible);
    i0.ɵɵadvance(10);
    i0.ɵɵclassProp("text-blue-400", ctx_r3.favorites.includes(ctx_r3.asset == null ? null : ctx_r3.asset.id));
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate(ctx_r3.favorites.includes(ctx_r3.asset == null ? null : ctx_r3.asset.id) ? "favorite" : "favorite_border");
  }
}
var EMPTY_FAVS = [];
var LockerListFieldComponent = /*#__PURE__*/function () {
  function LockerListFieldComponent(_settings, _dialog) {
    var _this = this;
    _classCallCheck(this, LockerListFieldComponent);
    this._settings = _settings;
    this._dialog = _dialog;
    this.features = [];
    this.room_size = 3;
    this.items = [];
    this.disabled = false;
    this.selected_features = [];
    /* istanbul ignore next */
    this.registerOnChange = function (fn) {
      return _this._onChange = fn;
    };
    /* istanbul ignore next */
    this.registerOnTouched = function (fn) {
      return _this._onTouch = fn;
    };
    this.setDisabledState = function (s) {
      return _this.disabled = s;
    };
  }
  /** Add or edit selected items */
  return _createClass(LockerListFieldComponent, [{
    key: "favorites",
    get: function get() {
      return this._settings.get(locker_select_modal_component_1.FAV_LOCKER_KEY) || EMPTY_FAVS;
    }
  }, {
    key: "changeResources",
    value: function changeResources() {
      var _this2 = this;
      var ref = this._dialog.open(locker_select_modal_component_1.LockerSelectModalComponent, {
        data: {
          items: this.items,
          options: {
            capacity: this.room_size
          }
        }
      });
      ref.afterClosed().subscribe(function (items) {
        if (!items) items = ref.componentInstance.selected;
        _this2.setValue(items);
      });
    }
    /** Remove the selected space from the list */
  }, {
    key: "removeResource",
    value: function removeResource(space) {
      this.setValue(this.items.filter(function (_) {
        return _.id !== space.id;
      }));
    }
    /**
     * Update the form field value
     * @param new_value New value to set on the form field
     */
  }, {
    key: "setValue",
    value: function setValue(new_value) {
      this.items = new_value;
      if (this._onChange) this._onChange(this.items);
    }
    /* istanbul ignore next */
    /**
     * Update local value when form control value is changed
     * @param value The new value for the component
     */
  }, {
    key: "writeValue",
    value: function writeValue(value) {
      this.items = value || [];
    }
  }, {
    key: "toggleFavourite",
    value: function toggleFavourite(space) {
      var fav_list = this.favorites;
      var new_state = !fav_list.includes(space.id);
      if (new_state) {
        this._settings.saveUserSetting(locker_select_modal_component_1.FAV_LOCKER_KEY, [].concat(_toConsumableArray(fav_list), [space.id]));
      } else {
        this._settings.saveUserSetting(locker_select_modal_component_1.FAV_LOCKER_KEY, fav_list.filter(function (_) {
          return _ !== space.id;
        }));
      }
    }
  }]);
}();
_LockerListFieldComponent = LockerListFieldComponent;
_LockerListFieldComponent.ɵfac = function LockerListFieldComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _LockerListFieldComponent)(i0.ɵɵdirectiveInject(i1.SettingsService), i0.ɵɵdirectiveInject(i2.MatDialog));
};
_LockerListFieldComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _LockerListFieldComponent,
  selectors: [["locker-list-field"]],
  inputs: {
    features: "features"
  },
  features: [i0.ɵɵProvidersFeature([{
    provide: forms_1.NG_VALUE_ACCESSOR,
    useExisting: (0, core_1.forwardRef)(function () {
      return _LockerListFieldComponent;
    }),
    multi: true
  }])],
  decls: 10,
  vars: 1,
  consts: function consts() {
    var i18n_0;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_6395293173369343552$$LIBS_BOOKINGS_SRC_LIB_LOCKER_LIST_FIELD_COMPONENT_TS_0 = goog.getMsg("Add Locker");
      i18n_0 = MSG_EXTERNAL_6395293173369343552$$LIBS_BOOKINGS_SRC_LIB_LOCKER_LIST_FIELD_COMPONENT_TS_0;
    } else {
      i18n_0 = $localize(_templateObject || (_templateObject = _taggedTemplateLiteral([":\u241F8b5f83031c9399ae009db8ff4c788e3f8ce20062\u241F6395293173369343552:Add Locker"])));
    }
    var i18n_1;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_559636443235347532$$LIBS_BOOKINGS_SRC_LIB_LOCKER_LIST_FIELD_COMPONENT_TS_1 = goog.getMsg("{$startTagAppIcon}edit{$closeTagAppIcon} Change ", {
        "closeTagAppIcon": "\uFFFD/#19\uFFFD",
        "startTagAppIcon": "\uFFFD#19\uFFFD"
      }, {
        original_code: {
          "closeTagAppIcon": "</app-icon>",
          "startTagAppIcon": "<app-icon>"
        }
      });
      i18n_1 = MSG_EXTERNAL_559636443235347532$$LIBS_BOOKINGS_SRC_LIB_LOCKER_LIST_FIELD_COMPONENT_TS_1;
    } else {
      i18n_1 = $localize(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([":\u241Fca9092fdbbb85e5828de77fdf85c49b918cec128\u241F559636443235347532:", ":START_TAG_APP_ICON:edit", ":CLOSE_TAG_APP_ICON: Change "])), "\uFFFD#19\uFFFD", "\uFFFD/#19\uFFFD");
    }
    var i18n_2;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_2582674642057285571$$LIBS_BOOKINGS_SRC_LIB_LOCKER_LIST_FIELD_COMPONENT_TS_2 = goog.getMsg("{$startTagAppIcon}close{$closeTagAppIcon} Remove ", {
        "closeTagAppIcon": "\uFFFD/#23\uFFFD",
        "startTagAppIcon": "\uFFFD#23\uFFFD"
      }, {
        original_code: {
          "closeTagAppIcon": "</app-icon>",
          "startTagAppIcon": "<app-icon>"
        }
      });
      i18n_2 = MSG_EXTERNAL_2582674642057285571$$LIBS_BOOKINGS_SRC_LIB_LOCKER_LIST_FIELD_COMPONENT_TS_2;
    } else {
      i18n_2 = $localize(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([":\u241Fa386ba350cdee69beeb12a908d96f0724ddc2054\u241F2582674642057285571:", ":START_TAG_APP_ICON:close", ":CLOSE_TAG_APP_ICON: Remove "])), "\uFFFD#23\uFFFD", "\uFFFD/#23\uFFFD");
    }
    return [["placeholder", ""], i18n_0, i18n_1, i18n_2, ["list", "", 1, "space-y-2"], ["locker", "", "class", "relative p-2 rounded-lg w-full flex items-center shadow border border-base-200", 4, "ngFor", "ngForOf"], ["btn", "", "matRipple", "", "name", "add-locker", 1, "w-full", "inverse", "mt-2", 3, "click"], [1, "flex", "items-center", "justify-center", "space-x-2"], [1, "flex", "items-center", "flex-wrap", "sm:space-x-2", "mb-2"], [1, "flex-1", "min-w-[256px]", "space-y-2"], ["locker", "", 1, "relative", "p-2", "rounded-lg", "w-full", "flex", "items-center", "shadow", "border", "border-base-200"], ["class", "flex flex-col", 4, "ngIf"], [1, "w-20", "h-20", "rounded-xl", "bg-base-200", "mr-4", "overflow-hidden", "flex", "items-center", "justify-center"], ["auth", "", "class", "min-h-full object-cover", 3, "source", 4, "ngIf", "ngIfElse"], [1, "space-y-2", "pb-4"], [1, "font-medium"], [1, "flex", "items-center", "text-sm", "space-x-2"], [1, "text-blue-500", "text-base"], ["class", "flex items-center text-sm space-x-2", 4, "ngIf"], [1, "absolute", "bottom-0", "right-0", "flex", "items-center", "justify-end", "text-xs"], ["btn", "", "matRipple", "", "name", "edit-locker", 1, "clear", 3, "click"], [1, "flex", "items-center", "space-x-2"], ["btn", "", "matRipple", "", "name", "remove-locker", 1, "clear", 3, "click"], ["icon", "", "matRipple", "", "name", "toggle-locker-favourite", 1, "absolute", "top-1", "right-1", 3, "click"], [1, "flex", "flex-col"], ["for", "title"], ["features", "", 1, "flex", "items-center", "flex-wrap", "space-x-2"], [3, "ngModel", "ngModelOptions", "ngModelChange", 4, "ngFor", "ngForOf"], [3, "ngModelChange", "ngModel", "ngModelOptions"], ["auth", "", 1, "min-h-full", "object-cover", 3, "source"], ["src", "assets/icons/locker-placeholder.svg", 1, "m-auto"]];
  },
  template: function LockerListFieldComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵelementStart(0, "div", 4);
      i0.ɵɵtemplate(1, LockerListFieldComponent_div_1_Template, 27, 9, "div", 5);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(2, "button", 6);
      i0.ɵɵlistener("click", function LockerListFieldComponent_Template_button_click_2_listener() {
        return ctx.changeResources();
      });
      i0.ɵɵelementStart(3, "div", 7)(4, "app-icon");
      i0.ɵɵtext(5, "search");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(6, "span");
      i0.ɵɵi18n(7, 1);
      i0.ɵɵelementEnd()()();
      i0.ɵɵelementStart(8, "div", 8);
      i0.ɵɵelement(9, "div", 9);
      i0.ɵɵelementEnd();
    }
    if (rf & 2) {
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngForOf", ctx.items);
    }
  },
  dependencies: [i3.NgForOf, i3.NgIf, i4.NgControlStatus, i4.NgModel, i5.MatCheckbox, i6.IconComponent, i7.AuthenticatedImageDirective, i8.MatRipple]
});
exports.LockerListFieldComponent = LockerListFieldComponent;

/***/ }),

/***/ 90647:
/*!*********************************************************************************!*\
  !*** ./libs/bookings/src/lib/locker-select-modal/locker-bank-list.component.ts ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _taggedTemplateLiteral = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js */ 9959)["default"]);
var _objectSpread = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/objectSpread2.js */ 34092)["default"]);
var _slicedToArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/slicedToArray.js */ 6282)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _LockerBankListComponent, _templateObject, _templateObject2;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.LockerBankListComponent = void 0;
var core_1 = __webpack_require__(/*! @angular/core */ 37580);
var rxjs_1 = __webpack_require__(/*! rxjs */ 15681);
var operators_1 = __webpack_require__(/*! rxjs/operators */ 97303);
var booking_form_service_1 = __webpack_require__(/*! ../booking-form.service */ 18379);
var lockers_service_1 = __webpack_require__(/*! ../lockers.service */ 98796);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! ../booking-form.service */ 18379);
var i2 = __webpack_require__(/*! ../lockers.service */ 98796);
var i3 = __webpack_require__(/*! @angular/common */ 60316);
var i4 = __webpack_require__(/*! @angular/material/progress-spinner */ 41134);
var i5 = __webpack_require__(/*! ../../../../components/src/lib/icon.component */ 69434);
var i6 = __webpack_require__(/*! ../../../../components/src/lib/authenticated-image.directive */ 93208);
var i7 = __webpack_require__(/*! @angular/material/core */ 74646);
function LockerBankListComponent_ng_container_5_ul_1_li_1_div_3_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 22)(1, "app-icon");
    i0.ɵɵtext(2, "done");
    i0.ɵɵelementEnd()();
  }
}
function LockerBankListComponent_ng_container_5_ul_1_li_1_img_4_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelement(0, "img", 23);
  }
  if (rf & 2) {
    var locker_bank_r2 = i0.ɵɵnextContext().$implicit;
    i0.ɵɵproperty("source", locker_bank_r2.images[0]);
  }
}
function LockerBankListComponent_ng_container_5_ul_1_li_1_ng_template_5_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelement(0, "img", 24);
  }
}
function LockerBankListComponent_ng_container_5_ul_1_li_1_Template(rf, ctx) {
  if (rf & 1) {
    var _r1 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "li", 11)(1, "button", 12);
    i0.ɵɵlistener("click", function LockerBankListComponent_ng_container_5_ul_1_li_1_Template_button_click_1_listener() {
      var locker_bank_r2 = i0.ɵɵrestoreView(_r1).$implicit;
      var ctx_r2 = i0.ɵɵnextContext(3);
      return i0.ɵɵresetView(ctx_r2.selectLockerBank(locker_bank_r2));
    });
    i0.ɵɵelementStart(2, "div", 13);
    i0.ɵɵtemplate(3, LockerBankListComponent_ng_container_5_ul_1_li_1_div_3_Template, 3, 0, "div", 14)(4, LockerBankListComponent_ng_container_5_ul_1_li_1_img_4_Template, 1, 1, "img", 15)(5, LockerBankListComponent_ng_container_5_ul_1_li_1_ng_template_5_Template, 1, 0, "ng-template", null, 2, i0.ɵɵtemplateRefExtractor);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(7, "div", 16)(8, "span", 17);
    i0.ɵɵtext(9);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(10, "div", 18)(11, "app-icon", 19);
    i0.ɵɵtext(12, "place");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(13, "p", 20);
    i0.ɵɵtext(14);
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(15, "div", 18)(16, "app-icon", 19);
    i0.ɵɵtext(17, "people");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(18, "p", 20);
    i0.ɵɵtext(19);
    i0.ɵɵelementEnd()()()();
    i0.ɵɵelementStart(20, "button", 21);
    i0.ɵɵlistener("click", function LockerBankListComponent_ng_container_5_ul_1_li_1_Template_button_click_20_listener() {
      var locker_bank_r2 = i0.ɵɵrestoreView(_r1).$implicit;
      var ctx_r2 = i0.ɵɵnextContext(3);
      return i0.ɵɵresetView(ctx_r2.toggleFav.emit(locker_bank_r2));
    });
    i0.ɵɵelementStart(21, "app-icon");
    i0.ɵɵtext(22);
    i0.ɵɵelementEnd()()();
  }
  if (rf & 2) {
    var locker_bank_r2 = ctx.$implicit;
    var placeholder_r4 = i0.ɵɵreference(6);
    var ctx_r2 = i0.ɵɵnextContext(3);
    i0.ɵɵclassProp("!border-blue-400", ctx_r2.active === locker_bank_r2.id);
    i0.ɵɵadvance(3);
    i0.ɵɵproperty("ngIf", ctx_r2.selected.includes(locker_bank_r2.id));
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", locker_bank_r2.images == null ? null : locker_bank_r2.images.length)("ngIfElse", placeholder_r4);
    i0.ɵɵadvance(5);
    i0.ɵɵtextInterpolate1(" ", locker_bank_r2.name || locker_bank_r2.id || "Locker_bank", " ");
    i0.ɵɵadvance(5);
    i0.ɵɵtextInterpolate1(" ", (locker_bank_r2.zone == null ? null : locker_bank_r2.zone.display_name) || (locker_bank_r2.zone == null ? null : locker_bank_r2.zone.name) || "<No Level>", " ");
    i0.ɵɵadvance(5);
    i0.ɵɵtextInterpolate2(" ", locker_bank_r2.available || 0, " / ", locker_bank_r2.lockers.length || 1, " Available ");
    i0.ɵɵadvance();
    i0.ɵɵclassProp("text-blue-400", ctx_r2.isFavourite(locker_bank_r2.id));
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate(ctx_r2.isFavourite(locker_bank_r2.id) ? "favorite" : "favorite_border");
  }
}
function LockerBankListComponent_ng_container_5_ul_1_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "ul", 9);
    i0.ɵɵtemplate(1, LockerBankListComponent_ng_container_5_ul_1_li_1_Template, 23, 12, "li", 10);
    i0.ɵɵpipe(2, "async");
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r2 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngForOf", i0.ɵɵpipeBind1(2, 1, ctx_r2.locker_banks));
  }
}
function LockerBankListComponent_ng_container_5_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵtemplate(1, LockerBankListComponent_ng_container_5_ul_1_Template, 3, 3, "ul", 8);
    i0.ɵɵpipe(2, "async");
    i0.ɵɵelementContainerEnd();
  }
  if (rf & 2) {
    var tmp_3_0;
    var ctx_r2 = i0.ɵɵnextContext();
    var empty_state_r5 = i0.ɵɵreference(10);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", (tmp_3_0 = i0.ɵɵpipeBind1(2, 2, ctx_r2.locker_banks)) == null ? null : tmp_3_0.length)("ngIfElse", empty_state_r5);
  }
}
function LockerBankListComponent_ng_template_7_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 25);
    i0.ɵɵelement(1, "mat-spinner", 26);
    i0.ɵɵelementStart(2, "p", 27);
    i0.ɵɵtext(3, "Finding available locker banks...");
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    i0.ɵɵadvance();
    i0.ɵɵproperty("diameter", 32);
  }
}
function LockerBankListComponent_ng_template_9_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 28)(1, "p", 29);
    i0.ɵɵtext(2, " No available locker banks for selected time and/or filters ");
    i0.ɵɵelementEnd()();
  }
}
var LockerBankListComponent = /*#__PURE__*/function () {
  function LockerBankListComponent(_state, _lockers) {
    var _this = this;
    _classCallCheck(this, LockerBankListComponent);
    this._state = _state;
    this._lockers = _lockers;
    this.active = '';
    this.selected = '';
    this.favorites = [];
    this.onSelect = new core_1.EventEmitter();
    this.toggleFav = new core_1.EventEmitter();
    this.locker_banks = (0, rxjs_1.combineLatest)([this._state.options, this._state.available_resources, this._lockers.lockers_banks$]).pipe((0, operators_1.map)(function (_ref) {
      var _ref2 = _slicedToArray(_ref, 3),
        show_fav = _ref2[0].show_fav,
        resources = _ref2[1],
        banks = _ref2[2];
      return banks.filter(function (i) {
        return (!show_fav || _this.isFavourite(i.id)) && resources.find(function (_) {
          return _.bank_id === i.id;
        });
      }).map(function (bank) {
        return _objectSpread(_objectSpread({}, bank), {}, {
          available: resources.filter(function (_) {
            return _.bank_id === bank.id;
          }).length,
          lockers: bank.lockers.map(function (_) {
            return _objectSpread(_objectSpread({}, _), {}, {
              zone: bank.zone
            });
          })
        });
      });
    }));
    this.loading = this._state.loading;
  }
  return _createClass(LockerBankListComponent, [{
    key: "isFavourite",
    value: function isFavourite(locker_bank_id) {
      return this.favorites.includes(locker_bank_id);
    }
  }, {
    key: "selectLockerBank",
    value: function selectLockerBank(locker_bank) {
      this.onSelect.emit(locker_bank);
    }
  }]);
}();
_LockerBankListComponent = LockerBankListComponent;
_LockerBankListComponent.ɵfac = function LockerBankListComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _LockerBankListComponent)(i0.ɵɵdirectiveInject(i1.BookingFormService), i0.ɵɵdirectiveInject(i2.LockersService));
};
_LockerBankListComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _LockerBankListComponent,
  selectors: [["locker-bank-list"]],
  inputs: {
    active: "active",
    selected: "selected",
    favorites: "favorites"
  },
  outputs: {
    onSelect: "onSelect",
    toggleFav: "toggleFav"
  },
  decls: 11,
  vars: 7,
  consts: function consts() {
    var i18n_0;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_5968132631442328843$$LIBS_BOOKINGS_SRC_LIB_LOCKER_SELECT_MODAL_LOCKER_BANK_LIST_COMPONENT_TS_0 = goog.getMsg("Results");
      i18n_0 = MSG_EXTERNAL_5968132631442328843$$LIBS_BOOKINGS_SRC_LIB_LOCKER_SELECT_MODAL_LOCKER_BANK_LIST_COMPONENT_TS_0;
    } else {
      i18n_0 = $localize(_templateObject || (_templateObject = _taggedTemplateLiteral([":\u241F80ed5b776a26a78099e230e0e89d96c33ba44e24\u241F5968132631442328843:Results"])));
    }
    var i18n_1;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_8158044446606709450$$LIBS_BOOKINGS_SRC_LIB_LOCKER_SELECT_MODAL_LOCKER_BANK_LIST_COMPONENT_TS_1 = goog.getMsg(" {$interpolation} result(s) found ", {
        "interpolation": "\uFFFD0\uFFFD"
      }, {
        original_code: {
          "interpolation": "{{ (locker_banks | async)?.length || 0 }}"
        }
      });
      i18n_1 = MSG_EXTERNAL_8158044446606709450$$LIBS_BOOKINGS_SRC_LIB_LOCKER_SELECT_MODAL_LOCKER_BANK_LIST_COMPONENT_TS_1;
    } else {
      i18n_1 = $localize(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([":\u241F5b237ca854e67fef69541b67dc32656a82b0972b\u241F8158044446606709450: ", ":INTERPOLATION: result(s) found "])), "\uFFFD0\uFFFD");
    }
    return [["load_state", ""], ["empty_state", ""], ["placeholder", ""], i18n_0, i18n_1, [1, "font-bold"], ["count", "", 1, "text-sm", "opacity-60", "mb-4"], [4, "ngIf", "ngIfElse"], ["class", "list-style-none space-y-2 min-w-[50vh]", 4, "ngIf", "ngIfElse"], [1, "list-style-none", "space-y-2", "min-w-[50vh]"], ["locker_bank", "", "class", "relative rounded-lg w-full shadow border bg-base-100 border-base-200 overflow-hidden", 3, "!border-blue-400", 4, "ngFor", "ngForOf"], ["locker_bank", "", 1, "relative", "rounded-lg", "w-full", "shadow", "border", "bg-base-100", "border-base-200", "overflow-hidden"], ["name", "select-locker_bank", "matRipple", "", 1, "w-full", "h-full", "flex", "p-2", 3, "click"], [1, "relative", "w-20", "h-20", "rounded-xl", "bg-base-200", "mr-4", "flex", "items-center", "justify-center"], ["class", "absolute top-1 left-1 border border-neutral bg-base-200 rounded-full h-6 w-6 flex items-center justify-center text-white", 4, "ngIf"], ["auth", "", "class", "object-cover h-full", 3, "source", 4, "ngIf", "ngIfElse"], [1, "space-y-2", "pt-2", "flex-1", "text-left"], [1, "font-medium"], [1, "flex", "items-center", "text-sm", "space-x-2"], [1, "text-blue-500"], [1, "text-xs"], ["icon", "", "matRipple", "", "name", "toggle-locker_bank-favourite", 1, "absolute", "top-1", "right-1", 3, "click"], [1, "absolute", "top-1", "left-1", "border", "border-neutral", "bg-base-200", "rounded-full", "h-6", "w-6", "flex", "items-center", "justify-center", "text-white"], ["auth", "", 1, "object-cover", "h-full", 3, "source"], ["src", "assets/icons/locker-placeholder.svg", 1, "m-auto"], ["loading", "", 1, "p-16", "flex", "flex-col", "items-center", "justify-center", "space-y-2"], [3, "diameter"], [1, "opacity-30"], ["empty", "", 1, "p-16", "flex", "flex-col", "items-center", "justify-center", "space-y-2"], [1, "opacity-30", "text-center"]];
  },
  template: function LockerBankListComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵelementStart(0, "h3", 5);
      i0.ɵɵi18n(1, 3);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(2, "p", 6);
      i0.ɵɵi18n(3, 4);
      i0.ɵɵpipe(4, "async");
      i0.ɵɵelementEnd();
      i0.ɵɵtemplate(5, LockerBankListComponent_ng_container_5_Template, 3, 4, "ng-container", 7);
      i0.ɵɵpipe(6, "async");
      i0.ɵɵtemplate(7, LockerBankListComponent_ng_template_7_Template, 4, 1, "ng-template", null, 0, i0.ɵɵtemplateRefExtractor)(9, LockerBankListComponent_ng_template_9_Template, 3, 0, "ng-template", null, 1, i0.ɵɵtemplateRefExtractor);
    }
    if (rf & 2) {
      var tmp_2_0;
      var tmp_4_0;
      var load_state_r6 = i0.ɵɵreference(8);
      i0.ɵɵadvance(4);
      i0.ɵɵi18nExp(((tmp_2_0 = i0.ɵɵpipeBind1(4, 3, ctx.locker_banks)) == null ? null : tmp_2_0.length) || 0);
      i0.ɵɵi18nApply(3);
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", !((tmp_4_0 = i0.ɵɵpipeBind1(6, 5, ctx.loading)) == null ? null : tmp_4_0.length))("ngIfElse", load_state_r6);
    }
  },
  dependencies: [i3.NgForOf, i3.NgIf, i4.MatProgressSpinner, i5.IconComponent, i6.AuthenticatedImageDirective, i7.MatRipple, i3.AsyncPipe],
  styles: ["[_nghost-%COMP%] {\n                width: 100%;\n                height: 100%;\n                padding: 0.5rem;\n                background: rgba(0, 0, 0, 0.05);\n                overflow-y: auto;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxvY2tlci1iYW5rLWxpc3QuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxXQUFXO2dCQUNYLFlBQVk7Z0JBQ1osZUFBZTtnQkFDZiwrQkFBK0I7Z0JBQy9CLGdCQUFnQjtZQUNwQiIsImZpbGUiOiJsb2NrZXItYmFuay1saXN0LmNvbXBvbmVudC50cyIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgOmhvc3Qge1xuICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiAwLjVyZW07XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZDogcmdiYSgwLCAwLCAwLCAwLjA1KTtcbiAgICAgICAgICAgICAgICBvdmVyZmxvdy15OiBhdXRvO1xuICAgICAgICAgICAgfVxuICAgICAgICAiXX0= */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvYm9va2luZ3Mvc3JjL2xpYi9sb2NrZXItc2VsZWN0LW1vZGFsL2xvY2tlci1iYW5rLWxpc3QuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxXQUFXO2dCQUNYLFlBQVk7Z0JBQ1osZUFBZTtnQkFDZiwrQkFBK0I7Z0JBQy9CLGdCQUFnQjtZQUNwQjs7QUFFWixnb0JBQWdvQiIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgOmhvc3Qge1xuICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiAwLjVyZW07XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZDogcmdiYSgwLCAwLCAwLCAwLjA1KTtcbiAgICAgICAgICAgICAgICBvdmVyZmxvdy15OiBhdXRvO1xuICAgICAgICAgICAgfVxuICAgICAgICAiXSwic291cmNlUm9vdCI6IiJ9 */"]
});
exports.LockerBankListComponent = LockerBankListComponent;

/***/ }),

/***/ 42394:
/*!***************************************************************************************!*\
  !*** ./libs/bookings/src/lib/locker-select-modal/locker-filters-display.component.ts ***!
  \***************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _taggedTemplateLiteral = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js */ 9959)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _callSuper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/callSuper.js */ 8513)["default"]);
var _inherits = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/inherits.js */ 58160)["default"]);
var _LockerFiltersDisplayComponent, _templateObject, _templateObject2, _templateObject3, _templateObject4;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.LockerFiltersDisplayComponent = void 0;
var core_1 = __webpack_require__(/*! @angular/core */ 37580);
var bottom_sheet_1 = __webpack_require__(/*! @angular/material/bottom-sheet */ 15244);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var locker_filters_component_1 = __webpack_require__(/*! ./locker-filters.component */ 22657);
var booking_form_service_1 = __webpack_require__(/*! ../booking-form.service */ 18379);
var date_fns_1 = __webpack_require__(/*! date-fns */ 25773);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @angular/material/bottom-sheet */ 15244);
var i2 = __webpack_require__(/*! ../booking-form.service */ 18379);
var i3 = __webpack_require__(/*! @placeos/common */ 22797);
var i4 = __webpack_require__(/*! @angular/common */ 60316);
var i5 = __webpack_require__(/*! ../../../../components/src/lib/icon.component */ 69434);
var i6 = __webpack_require__(/*! @angular/material/core */ 74646);
var _c0 = function _c0() {
  return [];
};
function LockerFiltersDisplayComponent_div_16_Template(rf, ctx) {
  if (rf & 1) {
    var _r1 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 14)(1, "p");
    i0.ɵɵtext(2);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(3, "button", 15);
    i0.ɵɵlistener("click", function LockerFiltersDisplayComponent_div_16_Template_button_click_3_listener() {
      var feat_r2 = i0.ɵɵrestoreView(_r1).$implicit;
      var ctx_r2 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r2.setFeature(feat_r2, false));
    });
    i0.ɵɵelementStart(4, "app-icon");
    i0.ɵɵtext(5, "close");
    i0.ɵɵelementEnd()()();
  }
  if (rf & 2) {
    var feat_r2 = ctx.$implicit;
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate(feat_r2);
  }
}
function LockerFiltersDisplayComponent_div_18_Template(rf, ctx) {
  if (rf & 1) {
    var _r4 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 16)(1, "span");
    i0.ɵɵi18n(2, 3);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(3, "button", 17);
    i0.ɵɵlistener("click", function LockerFiltersDisplayComponent_div_18_Template_button_click_3_listener() {
      i0.ɵɵrestoreView(_r4);
      var ctx_r2 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r2.setOptions({
        show_fav: false
      }));
    });
    i0.ɵɵelementStart(4, "app-icon");
    i0.ɵɵtext(5, "close");
    i0.ɵɵelementEnd()()();
  }
}
var LockerFiltersDisplayComponent = /*#__PURE__*/function (_common_1$AsyncHandle) {
  function LockerFiltersDisplayComponent(_bsheet, _state, _settings) {
    var _this;
    _classCallCheck(this, LockerFiltersDisplayComponent);
    _this = _callSuper(this, LockerFiltersDisplayComponent);
    _this._bsheet = _bsheet;
    _this._state = _state;
    _this._settings = _settings;
    _this.view = 'list';
    _this.viewChange = new core_1.EventEmitter();
    _this.options = _this._state.options;
    _this.setOptions = function (o) {
      return _this._state.setOptions(o);
    };
    _this.setFeature = function (f, e) {
      return _this._state.setFeature(f, e);
    };
    _this.editFilter = function () {
      return _this._bsheet.open(locker_filters_component_1.LockerFiltersComponent);
    };
    return _this;
  }
  _inherits(LockerFiltersDisplayComponent, _common_1$AsyncHandle);
  return _createClass(LockerFiltersDisplayComponent, [{
    key: "start",
    get: function get() {
      return this._state.form.value.date;
    }
  }, {
    key: "end",
    get: function get() {
      var _this$_state$form$val = this._state.form.value,
        date = _this$_state$form$val.date,
        duration = _this$_state$form$val.duration,
        all_day = _this$_state$form$val.all_day;
      if (all_day) return (0, date_fns_1.endOfDay)(date);
      return date + duration * 60 * 1000;
    }
  }, {
    key: "time_format",
    get: function get() {
      return this._settings.time_format;
    }
  }]);
}(common_1.AsyncHandler);
_LockerFiltersDisplayComponent = LockerFiltersDisplayComponent;
_LockerFiltersDisplayComponent.ɵfac = function LockerFiltersDisplayComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _LockerFiltersDisplayComponent)(i0.ɵɵdirectiveInject(i1.MatBottomSheet), i0.ɵɵdirectiveInject(i2.BookingFormService), i0.ɵɵdirectiveInject(i3.SettingsService));
};
_LockerFiltersDisplayComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _LockerFiltersDisplayComponent,
  selectors: [["locker-filters-display"]],
  inputs: {
    view: "view"
  },
  outputs: {
    viewChange: "viewChange"
  },
  features: [i0.ɵɵInheritDefinitionFeature],
  decls: 20,
  vars: 23,
  consts: function consts() {
    var i18n_0;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_5208858215712453646$$LIBS_BOOKINGS_SRC_LIB_LOCKER_SELECT_MODAL_LOCKER_FILTERS_DISPLAY_COMPONENT_TS_0 = goog.getMsg(" Filters ");
      i18n_0 = MSG_EXTERNAL_5208858215712453646$$LIBS_BOOKINGS_SRC_LIB_LOCKER_SELECT_MODAL_LOCKER_FILTERS_DISPLAY_COMPONENT_TS_0;
    } else {
      i18n_0 = $localize(_templateObject || (_templateObject = _taggedTemplateLiteral([":\u241F19eaa5cd51d70d9ea957eecac78cfd811e9b93d8\u241F5208858215712453646: Filters "])));
    }
    var i18n_1;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_8553228906889869186$$LIBS_BOOKINGS_SRC_LIB_LOCKER_SELECT_MODAL_LOCKER_FILTERS_DISPLAY_COMPONENT_TS_1 = goog.getMsg(" Map ");
      i18n_1 = MSG_EXTERNAL_8553228906889869186$$LIBS_BOOKINGS_SRC_LIB_LOCKER_SELECT_MODAL_LOCKER_FILTERS_DISPLAY_COMPONENT_TS_1;
    } else {
      i18n_1 = $localize(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([":\u241F992a9a6a193a56c5b8846dc972c5e1977ee5f1aa\u241F8553228906889869186: Map "])));
    }
    var i18n_2;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_7787942140742011951$$LIBS_BOOKINGS_SRC_LIB_LOCKER_SELECT_MODAL_LOCKER_FILTERS_DISPLAY_COMPONENT_TS_2 = goog.getMsg(" List ");
      i18n_2 = MSG_EXTERNAL_7787942140742011951$$LIBS_BOOKINGS_SRC_LIB_LOCKER_SELECT_MODAL_LOCKER_FILTERS_DISPLAY_COMPONENT_TS_2;
    } else {
      i18n_2 = $localize(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([":\u241F4b286e90831dd637c5cd3eb20544664ee7112669\u241F7787942140742011951: List "])));
    }
    var i18n_3;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_1305804744685886428$$LIBS_BOOKINGS_SRC_LIB_LOCKER_SELECT_MODAL_LOCKER_FILTERS_DISPLAY_COMPONENT_TS_3 = goog.getMsg("Favourites Only");
      i18n_3 = MSG_EXTERNAL_1305804744685886428$$LIBS_BOOKINGS_SRC_LIB_LOCKER_SELECT_MODAL_LOCKER_FILTERS_DISPLAY_COMPONENT_TS_3;
    } else {
      i18n_3 = $localize(_templateObject4 || (_templateObject4 = _taggedTemplateLiteral([":\u241Fd6ad8326be48837fe776a268abc758d1c7ba4f05\u241F1305804744685886428:Favourites Only"])));
    }
    return [i18n_0, i18n_1, i18n_2, i18n_3, ["actions", "", 1, "sm:hidden", "space-x-2", "flex", "flex-row", "items-center", "p-2"], ["btn", "", "matRipple", "", "name", "edit-locker-filters", 1, "flex-1", "w-1/2", 3, "click"], [1, "flex", "items-center"], ["btn", "", "matRipple", "", "name", "view-locker-map", 1, "rounded-l", "rounded-r-none", 3, "click"], ["btn", "", "matRipple", "", "name", "view-locker-list", 1, "rounded-r", "rounded-l-none", 3, "click"], ["filters", "", 1, "flex", "items-center", "flex-wrap", "p-2", "w-[35rem]", "max-w-full", "sm:max-w-[35rem]"], ["filter-item", "", "date", ""], ["filter-item", "", "time", ""], ["filter-item", "", "features", "", 4, "ngFor", "ngForOf"], ["filter-item", "", 4, "ngIf"], ["filter-item", "", "features", ""], ["icon", "", "matRipple", "", "name", "remove-locker-filter", 1, "-mr-4", 3, "click"], ["filter-item", ""], ["icon", "", "matRipple", "", "name", "remove-locker-favs-filter", 1, "-mr-4", 3, "click"]];
  },
  template: function LockerFiltersDisplayComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵelementStart(0, "section", 4)(1, "button", 5);
      i0.ɵɵlistener("click", function LockerFiltersDisplayComponent_Template_button_click_1_listener() {
        return ctx.editFilter();
      });
      i0.ɵɵi18n(2, 0);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(3, "div", 6)(4, "button", 7);
      i0.ɵɵlistener("click", function LockerFiltersDisplayComponent_Template_button_click_4_listener() {
        ctx.view = "map";
        return ctx.viewChange.emit(ctx.view);
      });
      i0.ɵɵi18n(5, 1);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(6, "button", 8);
      i0.ɵɵlistener("click", function LockerFiltersDisplayComponent_Template_button_click_6_listener() {
        ctx.view = "list";
        return ctx.viewChange.emit(ctx.view);
      });
      i0.ɵɵi18n(7, 2);
      i0.ɵɵelementEnd()()();
      i0.ɵɵelementStart(8, "section", 9)(9, "div", 10);
      i0.ɵɵtext(10);
      i0.ɵɵpipe(11, "date");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(12, "div", 11);
      i0.ɵɵtext(13);
      i0.ɵɵpipe(14, "date");
      i0.ɵɵpipe(15, "date");
      i0.ɵɵelementEnd();
      i0.ɵɵtemplate(16, LockerFiltersDisplayComponent_div_16_Template, 6, 1, "div", 12);
      i0.ɵɵpipe(17, "async");
      i0.ɵɵtemplate(18, LockerFiltersDisplayComponent_div_18_Template, 6, 0, "div", 13);
      i0.ɵɵpipe(19, "async");
      i0.ɵɵelementEnd();
    }
    if (rf & 2) {
      var tmp_4_0;
      var tmp_5_0;
      i0.ɵɵadvance(4);
      i0.ɵɵclassProp("inverse", ctx.view !== "map");
      i0.ɵɵadvance(2);
      i0.ɵɵclassProp("inverse", ctx.view !== "list");
      i0.ɵɵadvance(4);
      i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(11, 9, ctx.start, "mediumDate"));
      i0.ɵɵadvance(3);
      i0.ɵɵtextInterpolate2(" ", i0.ɵɵpipeBind2(14, 12, ctx.start, ctx.time_format), " \u2014 ", i0.ɵɵpipeBind2(15, 15, ctx.end, ctx.time_format), " ");
      i0.ɵɵadvance(3);
      i0.ɵɵproperty("ngForOf", ((tmp_4_0 = i0.ɵɵpipeBind1(17, 18, ctx.options)) == null ? null : tmp_4_0.features) || i0.ɵɵpureFunction0(22, _c0));
      i0.ɵɵadvance(2);
      i0.ɵɵproperty("ngIf", (tmp_5_0 = i0.ɵɵpipeBind1(19, 20, ctx.options)) == null ? null : tmp_5_0.show_fav);
    }
  },
  dependencies: [i4.NgForOf, i4.NgIf, i5.IconComponent, i6.MatRipple, i4.AsyncPipe, i4.DatePipe],
  styles: ["[filter-item][_ngcontent-%COMP%] {\n                display: flex;\n                align-items: center;\n                padding: 0 1rem;\n                height: 2rem;\n                font-size: 0.875rem;\n                border: 1px solid rgba(0, 0, 0, 0.2);\n                border-radius: 1.25rem;\n                margin-right: 0.5rem;\n                margin-bottom: 0.5rem;\n            }\n\n            [filter-item][_ngcontent-%COMP%]:hover {\n                background: rgba(0, 0, 0, 0.1);\n            }\n\n            [filter-item][_ngcontent-%COMP%]    > *[_ngcontent-%COMP%]    + *[_ngcontent-%COMP%] {\n                margin-left: 0.5rem;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxvY2tlci1maWx0ZXJzLWRpc3BsYXkuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxhQUFhO2dCQUNiLG1CQUFtQjtnQkFDbkIsZUFBZTtnQkFDZixZQUFZO2dCQUNaLG1CQUFtQjtnQkFDbkIsb0NBQW9DO2dCQUNwQyxzQkFBc0I7Z0JBQ3RCLG9CQUFvQjtnQkFDcEIscUJBQXFCO1lBQ3pCOztZQUVBO2dCQUNJLDhCQUE4QjtZQUNsQzs7WUFFQTtnQkFDSSxtQkFBbUI7WUFDdkIiLCJmaWxlIjoibG9ja2VyLWZpbHRlcnMtZGlzcGxheS5jb21wb25lbnQudHMiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIFtmaWx0ZXItaXRlbV0ge1xuICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiAwIDFyZW07XG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAycmVtO1xuICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMC44NzVyZW07XG4gICAgICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgcmdiYSgwLCAwLCAwLCAwLjIpO1xuICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDEuMjVyZW07XG4gICAgICAgICAgICAgICAgbWFyZ2luLXJpZ2h0OiAwLjVyZW07XG4gICAgICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMC41cmVtO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBbZmlsdGVyLWl0ZW1dOmhvdmVyIHtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiByZ2JhKDAsIDAsIDAsIDAuMSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIFtmaWx0ZXItaXRlbV0gPiAqICsgKiB7XG4gICAgICAgICAgICAgICAgbWFyZ2luLWxlZnQ6IDAuNXJlbTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl19 */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvYm9va2luZ3Mvc3JjL2xpYi9sb2NrZXItc2VsZWN0LW1vZGFsL2xvY2tlci1maWx0ZXJzLWRpc3BsYXkuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxhQUFhO2dCQUNiLG1CQUFtQjtnQkFDbkIsZUFBZTtnQkFDZixZQUFZO2dCQUNaLG1CQUFtQjtnQkFDbkIsb0NBQW9DO2dCQUNwQyxzQkFBc0I7Z0JBQ3RCLG9CQUFvQjtnQkFDcEIscUJBQXFCO1lBQ3pCOztZQUVBO2dCQUNJLDhCQUE4QjtZQUNsQzs7WUFFQTtnQkFDSSxtQkFBbUI7WUFDdkI7O0FBRVosd3dDQUF3d0MiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIFtmaWx0ZXItaXRlbV0ge1xuICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiAwIDFyZW07XG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAycmVtO1xuICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMC44NzVyZW07XG4gICAgICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgcmdiYSgwLCAwLCAwLCAwLjIpO1xuICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDEuMjVyZW07XG4gICAgICAgICAgICAgICAgbWFyZ2luLXJpZ2h0OiAwLjVyZW07XG4gICAgICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMC41cmVtO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBbZmlsdGVyLWl0ZW1dOmhvdmVyIHtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiByZ2JhKDAsIDAsIDAsIDAuMSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIFtmaWx0ZXItaXRlbV0gPiAqICsgKiB7XG4gICAgICAgICAgICAgICAgbWFyZ2luLWxlZnQ6IDAuNXJlbTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl0sInNvdXJjZVJvb3QiOiIifQ== */"]
});
exports.LockerFiltersDisplayComponent = LockerFiltersDisplayComponent;

/***/ }),

/***/ 22657:
/*!*******************************************************************************!*\
  !*** ./libs/bookings/src/lib/locker-select-modal/locker-filters.component.ts ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _taggedTemplateLiteral = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js */ 9959)["default"]);
var _slicedToArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/slicedToArray.js */ 6282)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _LockerFiltersComponent, _templateObject, _templateObject2, _templateObject3, _templateObject4, _templateObject5, _templateObject6, _templateObject7, _templateObject8, _templateObject9, _templateObject10, _templateObject11, _templateObject12, _templateObject13;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.LockerFiltersComponent = void 0;
var bottom_sheet_1 = __webpack_require__(/*! @angular/material/bottom-sheet */ 15244);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var date_fns_1 = __webpack_require__(/*! date-fns */ 25773);
var organisation_service_1 = __webpack_require__(/*! libs/organisation/src/lib/organisation.service */ 19863);
var booking_form_service_1 = __webpack_require__(/*! ../booking-form.service */ 18379);
var rxjs_1 = __webpack_require__(/*! rxjs */ 15681);
var operators_1 = __webpack_require__(/*! rxjs/operators */ 97303);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @angular/material/bottom-sheet */ 15244);
var i2 = __webpack_require__(/*! ../booking-form.service */ 18379);
var i3 = __webpack_require__(/*! libs/organisation/src/lib/organisation.service */ 19863);
var i4 = __webpack_require__(/*! @placeos/common */ 22797);
var i5 = __webpack_require__(/*! @angular/common */ 60316);
var i6 = __webpack_require__(/*! @angular/forms */ 34456);
var i7 = __webpack_require__(/*! @angular/material/form-field */ 24950);
var i8 = __webpack_require__(/*! @angular/material/checkbox */ 97024);
var i9 = __webpack_require__(/*! @angular/material/core */ 74646);
var i10 = __webpack_require__(/*! ../../../../form-fields/src/lib/date-field.component */ 19608);
var i11 = __webpack_require__(/*! ../../../../form-fields/src/lib/duration-field.component */ 83476);
var i12 = __webpack_require__(/*! ../../../../form-fields/src/lib/time-field.component */ 81413);
var i13 = __webpack_require__(/*! ../../../../components/src/lib/icon.component */ 69434);
var i14 = __webpack_require__(/*! @angular/material/select */ 25175);
var i15 = __webpack_require__(/*! ../../../../components/src/lib/building.pipe */ 56062);
var i16 = __webpack_require__(/*! @ngx-translate/core */ 597);
var _c0 = function _c0() {
  return {
    standalone: true
  };
};
var _c1 = function _c1() {
  return [];
};
function LockerFiltersComponent_button_2_Template(rf, ctx) {
  if (rf & 1) {
    var _r1 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "button", 33);
    i0.ɵɵlistener("click", function LockerFiltersComponent_button_2_Template_button_click_0_listener() {
      i0.ɵɵrestoreView(_r1);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.close());
    });
    i0.ɵɵelementStart(1, "app-icon");
    i0.ɵɵtext(2, "keyboard_arrow_left");
    i0.ɵɵelementEnd()();
  }
}
function LockerFiltersComponent_mat_form_field_13_mat_option_2_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "mat-option", 37);
    i0.ɵɵtext(1);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var reg_r4 = ctx.$implicit;
    i0.ɵɵproperty("value", reg_r4);
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", reg_r4.display_name || reg_r4.name, " ");
  }
}
function LockerFiltersComponent_mat_form_field_13_Template(rf, ctx) {
  if (rf & 1) {
    var _r3 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "mat-form-field", 34)(1, "mat-select", 35);
    i0.ɵɵlistener("ngModelChange", function LockerFiltersComponent_mat_form_field_13_Template_mat_select_ngModelChange_1_listener($event) {
      i0.ɵɵrestoreView(_r3);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.setRegion($event));
    });
    i0.ɵɵtemplate(2, LockerFiltersComponent_mat_form_field_13_mat_option_2_Template, 2, 2, "mat-option", 36);
    i0.ɵɵpipe(3, "async");
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngModel", ctx_r1.region)("ngModelOptions", i0.ɵɵpureFunction0(5, _c0));
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngForOf", i0.ɵɵpipeBind1(3, 3, ctx_r1.regions));
  }
}
function LockerFiltersComponent_mat_form_field_15_mat_option_5_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "mat-option", 37);
    i0.ɵɵtext(1);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var bld_r6 = ctx.$implicit;
    i0.ɵɵproperty("value", bld_r6);
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", bld_r6.display_name || bld_r6.name, " ");
  }
}
function LockerFiltersComponent_mat_form_field_15_Template(rf, ctx) {
  if (rf & 1) {
    var _r5 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "mat-form-field", 34)(1, "mat-select", 38);
    i0.ɵɵpipe(2, "async");
    i0.ɵɵpipe(3, "async");
    i0.ɵɵpipe(4, "async");
    i0.ɵɵlistener("ngModelChange", function LockerFiltersComponent_mat_form_field_15_Template_mat_select_ngModelChange_1_listener($event) {
      i0.ɵɵrestoreView(_r5);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.setBuilding($event));
    });
    i0.ɵɵtemplate(5, LockerFiltersComponent_mat_form_field_15_mat_option_5_Template, 2, 2, "mat-option", 36);
    i0.ɵɵpipe(6, "async");
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var tmp_3_0;
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngModel", i0.ɵɵpipeBind1(2, 4, ctx_r1.building))("ngModelOptions", i0.ɵɵpureFunction0(12, _c0))("placeholder", ((tmp_3_0 = i0.ɵɵpipeBind1(3, 6, ctx_r1.building)) == null ? null : tmp_3_0.display_name) || ((tmp_3_0 = i0.ɵɵpipeBind1(4, 8, ctx_r1.building)) == null ? null : tmp_3_0.name));
    i0.ɵɵadvance(4);
    i0.ɵɵproperty("ngForOf", i0.ɵɵpipeBind1(6, 10, ctx_r1.buildings));
  }
}
function LockerFiltersComponent_mat_form_field_17_mat_option_3_div_2_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 42);
    i0.ɵɵtext(1);
    i0.ɵɵpipe(2, "building");
    i0.ɵɵelementStart(3, "span", 43);
    i0.ɵɵtext(4, " - ");
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var tmp_4_0;
    var lvl_r8 = i0.ɵɵnextContext().$implicit;
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", (tmp_4_0 = i0.ɵɵpipeBind1(2, 1, lvl_r8.parent_id)) == null ? null : tmp_4_0.display_name, " ");
  }
}
function LockerFiltersComponent_mat_form_field_17_mat_option_3_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "mat-option", 37)(1, "div", 40);
    i0.ɵɵtemplate(2, LockerFiltersComponent_mat_form_field_17_mat_option_3_div_2_Template, 5, 3, "div", 41);
    i0.ɵɵelementStart(3, "div");
    i0.ɵɵtext(4);
    i0.ɵɵelementEnd()()();
  }
  if (rf & 2) {
    var lvl_r8 = ctx.$implicit;
    var ctx_r1 = i0.ɵɵnextContext(2);
    i0.ɵɵproperty("value", lvl_r8.id);
    i0.ɵɵadvance(2);
    i0.ɵɵproperty("ngIf", ctx_r1.use_region);
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate1(" ", lvl_r8.display_name || lvl_r8.name, " ");
  }
}
function LockerFiltersComponent_mat_form_field_17_Template(rf, ctx) {
  if (rf & 1) {
    var _r7 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "mat-form-field", 34)(1, "mat-select", 39);
    i0.ɵɵpipe(2, "async");
    i0.ɵɵlistener("ngModelChange", function LockerFiltersComponent_mat_form_field_17_Template_mat_select_ngModelChange_1_listener($event) {
      i0.ɵɵrestoreView(_r7);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.setOptions({
        zone_id: $event
      }));
    });
    i0.ɵɵtemplate(3, LockerFiltersComponent_mat_form_field_17_mat_option_3_Template, 5, 3, "mat-option", 36);
    i0.ɵɵpipe(4, "async");
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var tmp_1_0;
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngModel", (tmp_1_0 = i0.ɵɵpipeBind1(2, 3, ctx_r1.options)) == null ? null : tmp_1_0.zone_id)("ngModelOptions", i0.ɵɵpureFunction0(7, _c0));
    i0.ɵɵadvance(2);
    i0.ɵɵproperty("ngForOf", i0.ɵɵpipeBind1(4, 5, ctx_r1.levels));
  }
}
function LockerFiltersComponent_div_24_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 44)(1, "mat-checkbox", 45);
    i0.ɵɵi18n(2, 6);
    i0.ɵɵelementEnd()();
  }
}
function LockerFiltersComponent_div_25_Template(rf, ctx) {
  if (rf & 1) {
    var _r9 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 46)(1, "div", 47)(2, "label");
    i0.ɵɵi18n(3, 7);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(4, "a-time-field", 48);
    i0.ɵɵlistener("ngModelChange", function LockerFiltersComponent_div_25_Template_a_time_field_ngModelChange_4_listener($event) {
      i0.ɵɵrestoreView(_r9);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.form.patchValue({
        date: $event
      }));
    });
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(5, "div", 47)(6, "label");
    i0.ɵɵi18n(7, 8);
    i0.ɵɵelementEnd();
    i0.ɵɵelement(8, "a-duration-field", 49);
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var tmp_4_0;
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance(4);
    i0.ɵɵproperty("ngModel", ctx_r1.form.value.date)("ngModelOptions", i0.ɵɵpureFunction0(8, _c0))("use_24hr", ctx_r1.use_24hr);
    i0.ɵɵadvance(4);
    i0.ɵɵproperty("time", (tmp_4_0 = ctx_r1.form.get("date")) == null ? null : tmp_4_0.value)("max", 10 * 60)("min", 60)("step", 60)("use_24hr", ctx_r1.use_24hr);
  }
}
function LockerFiltersComponent_section_36_div_3_Template(rf, ctx) {
  if (rf & 1) {
    var _r10 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 52)(1, "div", 53);
    i0.ɵɵtext(2);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(3, "mat-checkbox", 54);
    i0.ɵɵpipe(4, "async");
    i0.ɵɵlistener("ngModelChange", function LockerFiltersComponent_section_36_div_3_Template_mat_checkbox_ngModelChange_3_listener($event) {
      var feat_r11 = i0.ɵɵrestoreView(_r10).$implicit;
      var ctx_r1 = i0.ɵɵnextContext(2);
      return i0.ɵɵresetView(ctx_r1.setFeature(feat_r11, $event));
    });
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var tmp_4_0;
    var feat_r11 = ctx.$implicit;
    var ctx_r1 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate(feat_r11);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngModel", (((tmp_4_0 = i0.ɵɵpipeBind1(4, 3, ctx_r1.options)) == null ? null : tmp_4_0.features) || i0.ɵɵpureFunction0(5, _c1)).includes(feat_r11))("ngModelOptions", i0.ɵɵpureFunction0(6, _c0));
  }
}
function LockerFiltersComponent_section_36_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "section", 50)(1, "h2", 27);
    i0.ɵɵi18n(2, 9);
    i0.ɵɵelementEnd();
    i0.ɵɵtemplate(3, LockerFiltersComponent_section_36_div_3_Template, 5, 7, "div", 51);
    i0.ɵɵpipe(4, "async");
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance(3);
    i0.ɵɵproperty("ngForOf", i0.ɵɵpipeBind1(4, 1, ctx_r1.features));
  }
}
function LockerFiltersComponent_div_38_Template(rf, ctx) {
  if (rf & 1) {
    var _r12 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 55)(1, "button", 56);
    i0.ɵɵlistener("click", function LockerFiltersComponent_div_38_Template_button_click_1_listener() {
      i0.ɵɵrestoreView(_r12);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.close());
    });
    i0.ɵɵi18n(2, 10);
    i0.ɵɵelementEnd()();
  }
}
var LockerFiltersComponent = /*#__PURE__*/function () {
  function LockerFiltersComponent(_bsheet_ref, _state, _org, _settings) {
    var _this = this;
    _classCallCheck(this, LockerFiltersComponent);
    this._bsheet_ref = _bsheet_ref;
    this._state = _state;
    this._org = _org;
    this._settings = _settings;
    this.can_close = false;
    this.options = this._state.options;
    this.features = this._state.features;
    this.buildings = this._org.active_buildings;
    this.form = this._state.form;
    this.regions = this._org.region_list;
    this.levels = (0, rxjs_1.combineLatest)([this._org.active_region, this._org.active_building]).pipe((0, operators_1.map)(function (_ref) {
      var _ref2 = _slicedToArray(_ref, 2),
        region = _ref2[0],
        bld = _ref2[1];
      var level_list = _this.use_region ? _this._org.levelsForRegion(region) : _this._org.levelsForBuilding(bld);
      var viewable_levels = level_list.filter(function (lvl) {
        return !lvl.tags.includes('parking');
      });
      return viewable_levels.sort(function (a, b) {
        return a.parent_id.localeCompare(b.parent_id) || (a.display_name || '').localeCompare(b.display_name || '');
      });
    }));
    this.close = function () {
      return _this._bsheet_ref.dismiss();
    };
    this.setOptions = function (o) {
      return _this._state.setOptions(o);
    };
    this.setFeature = function (f, e) {
      return _this._state.setFeature(f, e);
    };
    this.setLevel = function (l) {};
    this.can_close = !!this._bsheet_ref;
  }
  return _createClass(LockerFiltersComponent, [{
    key: "building",
    get: function get() {
      return this._org.building;
    },
    set: function set(bld) {
      this._org.building = bld;
    }
  }, {
    key: "region",
    get: function get() {
      return this._org.region;
    },
    set: function set(reg) {
      this._org.region = reg;
    }
  }, {
    key: "allow_time_changes",
    get: function get() {
      return !!this._settings.get('app.lockers.allow_time_changes');
    }
  }, {
    key: "allow_all_day",
    get: function get() {
      return this.allow_time_changes && !!this._settings.get('app.lockers.allow_all_day');
    }
  }, {
    key: "end_date",
    get: function get() {
      return (0, date_fns_1.endOfDay)((0, date_fns_1.addDays)(Date.now(), this._settings.get('app.lockers.available_period') || 90));
    }
  }, {
    key: "use_24hr",
    get: function get() {
      return this._settings.get('app.use_24_hour_time');
    }
  }, {
    key: "use_region",
    get: function get() {
      return this._settings.get('app.use_region');
    }
  }]);
}();
_LockerFiltersComponent = LockerFiltersComponent;
_LockerFiltersComponent.ɵfac = function LockerFiltersComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _LockerFiltersComponent)(i0.ɵɵdirectiveInject(i1.MatBottomSheetRef, 8), i0.ɵɵdirectiveInject(i2.BookingFormService), i0.ɵɵdirectiveInject(i3.OrganisationService), i0.ɵɵdirectiveInject(i4.SettingsService));
};
_LockerFiltersComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _LockerFiltersComponent,
  selectors: [["locker-filters"]],
  inputs: {
    hide_levels: "hide_levels"
  },
  decls: 39,
  vars: 30,
  consts: function consts() {
    var i18n_0;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_2717350382225268503$$LIBS_BOOKINGS_SRC_LIB_LOCKER_SELECT_MODAL_LOCKER_FILTERS_COMPONENT_TS_0 = goog.getMsg("Locker Filters");
      i18n_0 = MSG_EXTERNAL_2717350382225268503$$LIBS_BOOKINGS_SRC_LIB_LOCKER_SELECT_MODAL_LOCKER_FILTERS_COMPONENT_TS_0;
    } else {
      i18n_0 = $localize(_templateObject || (_templateObject = _taggedTemplateLiteral([":\u241F229669497e532a4055b24a971df68ec327b07e30\u241F2717350382225268503:Locker Filters"])));
    }
    var i18n_1;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_5028777105388019087$$LIBS_BOOKINGS_SRC_LIB_LOCKER_SELECT_MODAL_LOCKER_FILTERS_COMPONENT_TS_1 = goog.getMsg("Details");
      i18n_1 = MSG_EXTERNAL_5028777105388019087$$LIBS_BOOKINGS_SRC_LIB_LOCKER_SELECT_MODAL_LOCKER_FILTERS_COMPONENT_TS_1;
    } else {
      i18n_1 = $localize(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([":\u241F4f8b2bb476981727ab34ed40fde1218361f92c45\u241F5028777105388019087:Details"])));
    }
    var i18n_2;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_471816275243265264$$LIBS_BOOKINGS_SRC_LIB_LOCKER_SELECT_MODAL_LOCKER_FILTERS_COMPONENT_TS_2 = goog.getMsg("Location");
      i18n_2 = MSG_EXTERNAL_471816275243265264$$LIBS_BOOKINGS_SRC_LIB_LOCKER_SELECT_MODAL_LOCKER_FILTERS_COMPONENT_TS_2;
    } else {
      i18n_2 = $localize(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([":\u241Fed31c09fd77c36238c13d83635f3fe5294c733d2\u241F471816275243265264:Location"])));
    }
    var i18n_3;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_3973931101896534797$$LIBS_BOOKINGS_SRC_LIB_LOCKER_SELECT_MODAL_LOCKER_FILTERS_COMPONENT_TS_3 = goog.getMsg("Date");
      i18n_3 = MSG_EXTERNAL_3973931101896534797$$LIBS_BOOKINGS_SRC_LIB_LOCKER_SELECT_MODAL_LOCKER_FILTERS_COMPONENT_TS_3;
    } else {
      i18n_3 = $localize(_templateObject4 || (_templateObject4 = _taggedTemplateLiteral([":\u241F2f933b826a570836cab04f683970a2d22068458c\u241F3973931101896534797:Date"])));
    }
    var i18n_4;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_5010873675481014004$$LIBS_BOOKINGS_SRC_LIB_LOCKER_SELECT_MODAL_LOCKER_FILTERS_COMPONENT_TS_4 = goog.getMsg(" {$interpolation} ", {
        "interpolation": "\uFFFD0\uFFFD"
      }, {
        original_code: {
          "interpolation": "{{ 'COMMON.FAVOURITES' | translate }}"
        }
      });
      i18n_4 = MSG_EXTERNAL_5010873675481014004$$LIBS_BOOKINGS_SRC_LIB_LOCKER_SELECT_MODAL_LOCKER_FILTERS_COMPONENT_TS_4;
    } else {
      i18n_4 = $localize(_templateObject5 || (_templateObject5 = _taggedTemplateLiteral([":\u241Fbde3d9fd949ba4c6014b8e64c1362753bca1cf0c\u241F5010873675481014004: ", ":INTERPOLATION: "])), "\uFFFD0\uFFFD");
    }
    var i18n_5;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_7993989716494624155$$LIBS_BOOKINGS_SRC_LIB_LOCKER_SELECT_MODAL_LOCKER_FILTERS_COMPONENT_TS_5 = goog.getMsg(" {$interpolation} ", {
        "interpolation": "\uFFFD0\uFFFD"
      }, {
        original_code: {
          "interpolation": "{{ 'LOCKERS.SHOW_FAVOURITES' | translate }}"
        }
      });
      i18n_5 = MSG_EXTERNAL_7993989716494624155$$LIBS_BOOKINGS_SRC_LIB_LOCKER_SELECT_MODAL_LOCKER_FILTERS_COMPONENT_TS_5;
    } else {
      i18n_5 = $localize(_templateObject6 || (_templateObject6 = _taggedTemplateLiteral([":\u241Fd73a29823cb90d2c49c4f6ee3dc0cbad14a63586\u241F7993989716494624155: ", ":INTERPOLATION: "])), "\uFFFD0\uFFFD");
    }
    var i18n_6;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_8264413387051126615$$LIBS_BOOKINGS_SRC_LIB_LOCKER_SELECT_MODAL_LOCKER_FILTERS_COMPONENT_TS_6 = goog.getMsg("Any Region");
      i18n_6 = MSG_EXTERNAL_8264413387051126615$$LIBS_BOOKINGS_SRC_LIB_LOCKER_SELECT_MODAL_LOCKER_FILTERS_COMPONENT_TS_6;
    } else {
      i18n_6 = $localize(_templateObject7 || (_templateObject7 = _taggedTemplateLiteral([":\u241F130845b58eba8e50c98f3fba117a0168cdba4f31\u241F8264413387051126615:Any Region"])));
    }
    var i18n_7;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_7323982518822503502$$LIBS_BOOKINGS_SRC_LIB_LOCKER_SELECT_MODAL_LOCKER_FILTERS_COMPONENT_TS_7 = goog.getMsg("Any Level");
      i18n_7 = MSG_EXTERNAL_7323982518822503502$$LIBS_BOOKINGS_SRC_LIB_LOCKER_SELECT_MODAL_LOCKER_FILTERS_COMPONENT_TS_7;
    } else {
      i18n_7 = $localize(_templateObject8 || (_templateObject8 = _taggedTemplateLiteral([":\u241F50407595967bf29832e873b41f9de3502d5c3e03\u241F7323982518822503502:Any Level"])));
    }
    var i18n_8;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_835486935962207481$$LIBS_BOOKINGS_SRC_LIB_LOCKER_SELECT_MODAL_LOCKER_FILTERS_COMPONENT_TS_8 = goog.getMsg(" All Day ");
      i18n_8 = MSG_EXTERNAL_835486935962207481$$LIBS_BOOKINGS_SRC_LIB_LOCKER_SELECT_MODAL_LOCKER_FILTERS_COMPONENT_TS_8;
    } else {
      i18n_8 = $localize(_templateObject9 || (_templateObject9 = _taggedTemplateLiteral([":\u241Fd7f43e20f3a729fa3de32bc7a1f709ccd722eae5\u241F835486935962207481: All Day "])));
    }
    var i18n_9;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_4204880191779081093$$LIBS_BOOKINGS_SRC_LIB_LOCKER_SELECT_MODAL_LOCKER_FILTERS_COMPONENT_TS_9 = goog.getMsg("Start Time");
      i18n_9 = MSG_EXTERNAL_4204880191779081093$$LIBS_BOOKINGS_SRC_LIB_LOCKER_SELECT_MODAL_LOCKER_FILTERS_COMPONENT_TS_9;
    } else {
      i18n_9 = $localize(_templateObject10 || (_templateObject10 = _taggedTemplateLiteral([":\u241F7c0a71d337783e527c1c8e91e433b301c5b1d8a8\u241F4204880191779081093:Start Time"])));
    }
    var i18n_10;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_3845185958891849368$$LIBS_BOOKINGS_SRC_LIB_LOCKER_SELECT_MODAL_LOCKER_FILTERS_COMPONENT_TS_10 = goog.getMsg("End Time");
      i18n_10 = MSG_EXTERNAL_3845185958891849368$$LIBS_BOOKINGS_SRC_LIB_LOCKER_SELECT_MODAL_LOCKER_FILTERS_COMPONENT_TS_10;
    } else {
      i18n_10 = $localize(_templateObject11 || (_templateObject11 = _taggedTemplateLiteral([":\u241Fe1f10d9bf4d3c37490cd5bf82007444ae7af46b1\u241F3845185958891849368:End Time"])));
    }
    var i18n_11;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_8650499415827640724$$LIBS_BOOKINGS_SRC_LIB_LOCKER_SELECT_MODAL_LOCKER_FILTERS_COMPONENT_TS_11 = goog.getMsg("Type");
      i18n_11 = MSG_EXTERNAL_8650499415827640724$$LIBS_BOOKINGS_SRC_LIB_LOCKER_SELECT_MODAL_LOCKER_FILTERS_COMPONENT_TS_11;
    } else {
      i18n_11 = $localize(_templateObject12 || (_templateObject12 = _taggedTemplateLiteral([":\u241Ff61c6867295f3b53d23557021f2f4e0aa1d0b8fc\u241F8650499415827640724:Type"])));
    }
    var i18n_12;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_2296888311792137027$$LIBS_BOOKINGS_SRC_LIB_LOCKER_SELECT_MODAL_LOCKER_FILTERS_COMPONENT_TS_12 = goog.getMsg(" Apply Filters ");
      i18n_12 = MSG_EXTERNAL_2296888311792137027$$LIBS_BOOKINGS_SRC_LIB_LOCKER_SELECT_MODAL_LOCKER_FILTERS_COMPONENT_TS_12;
    } else {
      i18n_12 = $localize(_templateObject13 || (_templateObject13 = _taggedTemplateLiteral([":\u241Fc17e2cc448524a39eb83b2937cea3235a2e8bf37\u241F2296888311792137027: Apply Filters "])));
    }
    return [i18n_0, i18n_1, i18n_2, i18n_3, i18n_4, i18n_5, i18n_8, i18n_9, i18n_10, i18n_11, i18n_12, [1, "flex", "rounded-t-md", "items-center", "border-b", "border-base-200", "pb-2", "sm:hidden"], [1, "flex-1", "pl-2"], ["icon", "", "matRipple", "", "name", "close-locker-filters", "class", "sm:hidden", 3, "click", 4, "ngIf"], [1, "font-medium", "flex-2", "text-center"], [1, "flex-1"], [1, "max-h-[65vh]", "p-2", "overflow-y-auto", "overflow-x-hidden", "divide-y", "divide-base-200", "w-full", "max-w-[100vw]", "sm:max-w-[30vw]", 3, "formGroup"], ["details", ""], [1, "text-lg", "font-medium", "mb-1"], [1, "flex-1", "min-w-[8rem]", "flex", "flex-col"], ["for", "location"], ["appearance", "outline", "class", "w-full", 4, "ngIf"], [1, "flex-1", "min-w-[256px]"], ["name", "date", "formControlName", "date", 3, "to"], ["class", "flex justify-end -mt-2 mb-2", 4, "ngIf"], ["class", "flex items-center space-x-2", 4, "ngIf"], ["favs", "", 1, "space-y-2", "pb-4"], [1, "text-lg", "font-medium"], [1, "flex", "items-center"], ["for", "fav", 1, "flex-1", "w-1/2"], ["name", "fav", 3, "ngModelChange", "ngModel", "ngModelOptions"], ["class", "space-y-2", "features", "", 4, "ngIf"], ["class", "px-2 py-2 w-full border-t border-base-200", 4, "ngIf"], ["icon", "", "matRipple", "", "name", "close-locker-filters", 1, "sm:hidden", 3, "click"], ["appearance", "outline", 1, "w-full"], ["name", "region", "placeholder", i18n_6, 3, "ngModelChange", "ngModel", "ngModelOptions"], [3, "value", 4, "ngFor", "ngForOf"], [3, "value"], ["name", "building", 3, "ngModelChange", "ngModel", "ngModelOptions", "placeholder"], ["name", "location", "placeholder", i18n_7, 3, "ngModelChange", "ngModel", "ngModelOptions"], [1, "flex", "flex-col-reverse"], ["class", "opacity-30 text-xs", 4, "ngIf"], [1, "opacity-30", "text-xs"], [1, "opacity-0"], [1, "flex", "justify-end", "-mt-2", "mb-2"], ["formControlName", "all_day"], [1, "flex", "items-center", "space-x-2"], [1, "flex-1", "w-1/3"], ["name", "start-time", 3, "ngModelChange", "ngModel", "ngModelOptions", "use_24hr"], ["formControlName", "duration", 3, "time", "max", "min", "step", "use_24hr"], ["features", "", 1, "space-y-2"], ["class", "flex items-center flex-wrap space-x-2", 4, "ngFor", "ngForOf"], [1, "flex", "items-center", "flex-wrap", "space-x-2"], ["for", "feat", 1, "flex-1", "w-1/2"], [3, "ngModelChange", "ngModel", "ngModelOptions"], [1, "px-2", "py-2", "w-full", "border-t", "border-base-200"], ["btn", "", "matRipple", "", "name", "apply-locker-filters", 1, "w-full", 3, "click"]];
  },
  template: function LockerFiltersComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵelementStart(0, "div", 11)(1, "div", 12);
      i0.ɵɵtemplate(2, LockerFiltersComponent_button_2_Template, 3, 0, "button", 13);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(3, "h3", 14);
      i0.ɵɵi18n(4, 0);
      i0.ɵɵelementEnd();
      i0.ɵɵelement(5, "div", 15);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(6, "form", 16)(7, "section", 17)(8, "h2", 18);
      i0.ɵɵi18n(9, 1);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(10, "div", 19)(11, "label", 20);
      i0.ɵɵi18n(12, 2);
      i0.ɵɵelementEnd();
      i0.ɵɵtemplate(13, LockerFiltersComponent_mat_form_field_13_Template, 4, 6, "mat-form-field", 21);
      i0.ɵɵpipe(14, "async");
      i0.ɵɵtemplate(15, LockerFiltersComponent_mat_form_field_15_Template, 7, 13, "mat-form-field", 21);
      i0.ɵɵpipe(16, "async");
      i0.ɵɵtemplate(17, LockerFiltersComponent_mat_form_field_17_Template, 5, 8, "mat-form-field", 21);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(18, "div", 22)(19, "label");
      i0.ɵɵi18n(20, 3);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(21, "a-date-field", 23);
      i0.ɵɵtext(22);
      i0.ɵɵpipe(23, "translate");
      i0.ɵɵelementEnd()();
      i0.ɵɵtemplate(24, LockerFiltersComponent_div_24_Template, 3, 0, "div", 24)(25, LockerFiltersComponent_div_25_Template, 9, 9, "div", 25);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(26, "section", 26)(27, "h2", 27);
      i0.ɵɵi18n(28, 4);
      i0.ɵɵpipe(29, "translate");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(30, "div", 28)(31, "div", 29);
      i0.ɵɵi18n(32, 5);
      i0.ɵɵpipe(33, "translate");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(34, "mat-checkbox", 30);
      i0.ɵɵpipe(35, "async");
      i0.ɵɵlistener("ngModelChange", function LockerFiltersComponent_Template_mat_checkbox_ngModelChange_34_listener($event) {
        return ctx.setOptions({
          show_fav: $event
        });
      });
      i0.ɵɵelementEnd()()();
      i0.ɵɵtemplate(36, LockerFiltersComponent_section_36_Template, 5, 3, "section", 31);
      i0.ɵɵpipe(37, "async");
      i0.ɵɵelementEnd();
      i0.ɵɵtemplate(38, LockerFiltersComponent_div_38_Template, 3, 0, "div", 32);
    }
    if (rf & 2) {
      var tmp_2_0;
      var tmp_3_0;
      var tmp_13_0;
      var tmp_15_0;
      i0.ɵɵadvance(2);
      i0.ɵɵproperty("ngIf", ctx.can_close);
      i0.ɵɵadvance(4);
      i0.ɵɵproperty("formGroup", ctx.form);
      i0.ɵɵadvance(7);
      i0.ɵɵproperty("ngIf", ctx.use_region && ((tmp_2_0 = i0.ɵɵpipeBind1(14, 15, ctx.regions)) == null ? null : tmp_2_0.length));
      i0.ɵɵadvance(2);
      i0.ɵɵproperty("ngIf", !ctx.use_region && ((tmp_3_0 = i0.ɵɵpipeBind1(16, 17, ctx.buildings)) == null ? null : tmp_3_0.length) > 1);
      i0.ɵɵadvance(2);
      i0.ɵɵproperty("ngIf", !ctx.hide_levels);
      i0.ɵɵadvance(4);
      i0.ɵɵproperty("to", ctx.end_date);
      i0.ɵɵadvance();
      i0.ɵɵtextInterpolate1(" ", i0.ɵɵpipeBind1(23, 19, "FORM.DATE_ERROR"), " ");
      i0.ɵɵadvance(2);
      i0.ɵɵproperty("ngIf", ctx.allow_all_day);
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", !ctx.form.value.all_day);
      i0.ɵɵadvance(4);
      i0.ɵɵi18nExp(i0.ɵɵpipeBind1(29, 21, "COMMON.FAVOURITES"));
      i0.ɵɵi18nApply(28);
      i0.ɵɵadvance(4);
      i0.ɵɵi18nExp(i0.ɵɵpipeBind1(33, 23, "LOCKERS.SHOW_FAVOURITES"));
      i0.ɵɵi18nApply(32);
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngModel", (tmp_13_0 = i0.ɵɵpipeBind1(35, 25, ctx.options)) == null ? null : tmp_13_0.show_fav)("ngModelOptions", i0.ɵɵpureFunction0(29, _c0));
      i0.ɵɵadvance(2);
      i0.ɵɵproperty("ngIf", (tmp_15_0 = i0.ɵɵpipeBind1(37, 27, ctx.features)) == null ? null : tmp_15_0.length);
      i0.ɵɵadvance(2);
      i0.ɵɵproperty("ngIf", ctx.can_close);
    }
  },
  dependencies: [i5.NgForOf, i5.NgIf, i6.ɵNgNoValidate, i6.NgControlStatus, i6.NgControlStatusGroup, i6.NgModel, i6.FormGroupDirective, i6.FormControlName, i7.MatFormField, i8.MatCheckbox, i9.MatOption, i10.DateFieldComponent, i11.DurationFieldComponent, i12.TimeFieldComponent, i13.IconComponent, i14.MatSelect, i9.MatRipple, i5.AsyncPipe, i15.BuildingPipe, i16.TranslatePipe],
  styles: ["[_nghost-%COMP%] {\n                display: flex;\n                flex-direction: column;\n                width: 100%;\n                max-width: 100vw;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxvY2tlci1maWx0ZXJzLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1lBQ1k7Z0JBQ0ksYUFBYTtnQkFDYixzQkFBc0I7Z0JBQ3RCLFdBQVc7Z0JBQ1gsZ0JBQWdCO1lBQ3BCIiwiZmlsZSI6ImxvY2tlci1maWx0ZXJzLmNvbXBvbmVudC50cyIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgOmhvc3Qge1xuICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICAgICAgICBtYXgtd2lkdGg6IDEwMHZ3O1xuICAgICAgICAgICAgfVxuICAgICAgICAiXX0= */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvYm9va2luZ3Mvc3JjL2xpYi9sb2NrZXItc2VsZWN0LW1vZGFsL2xvY2tlci1maWx0ZXJzLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1lBQ1k7Z0JBQ0ksYUFBYTtnQkFDYixzQkFBc0I7Z0JBQ3RCLFdBQVc7Z0JBQ1gsZ0JBQWdCO1lBQ3BCOztBQUVaLG9qQkFBb2pCIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICA6aG9zdCB7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgICAgIG1heC13aWR0aDogMTAwdnc7XG4gICAgICAgICAgICB9XG4gICAgICAgICJdLCJzb3VyY2VSb290IjoiIn0= */"]
});
exports.LockerFiltersComponent = LockerFiltersComponent;

/***/ }),

/***/ 38720:
/*!***************************************************************************!*\
  !*** ./libs/bookings/src/lib/locker-select-modal/locker-map.component.ts ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _slicedToArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/slicedToArray.js */ 6282)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _callSuper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/callSuper.js */ 8513)["default"]);
var _inherits = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/inherits.js */ 58160)["default"]);
var _LockerMapComponent;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.LockerMapComponent = void 0;
var core_1 = __webpack_require__(/*! @angular/core */ 37580);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var operators_1 = __webpack_require__(/*! rxjs/operators */ 97303);
var booking_form_service_1 = __webpack_require__(/*! ../booking-form.service */ 18379);
var rxjs_1 = __webpack_require__(/*! rxjs */ 15681);
var explore_spaces_service_1 = __webpack_require__(/*! libs/explore/src/lib/explore-spaces.service */ 65897);
var explore_locker_bank_info_component_1 = __webpack_require__(/*! libs/explore/src/lib/explore-locker-bank-info.component */ 84810);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! ../booking-form.service */ 18379);
var i2 = __webpack_require__(/*! @placeos/common */ 22797);
var i3 = __webpack_require__(/*! @angular/common */ 60316);
var i4 = __webpack_require__(/*! @angular/forms */ 34456);
var i5 = __webpack_require__(/*! @angular/material/form-field */ 24950);
var i6 = __webpack_require__(/*! @angular/material/core */ 74646);
var i7 = __webpack_require__(/*! ../../../../components/src/lib/icon.component */ 69434);
var i8 = __webpack_require__(/*! ../../../../components/src/lib/interactive-map.component */ 24918);
var i9 = __webpack_require__(/*! @angular/material/select */ 25175);
var _c0 = function _c0() {
  return {
    standalone: true
  };
};
function LockerMapComponent_mat_option_7_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "mat-option", 10);
    i0.ɵɵtext(1);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var lvl_r1 = ctx.$implicit;
    i0.ɵɵproperty("value", lvl_r1);
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", lvl_r1.display_name || lvl_r1.name, " ");
  }
}
var LockerMapComponent = /*#__PURE__*/function (_common_1$AsyncHandle) {
  function LockerMapComponent(_state, _settings) {
    var _this;
    _classCallCheck(this, LockerMapComponent);
    _this = _callSuper(this, LockerMapComponent);
    _this._state = _state;
    _this._settings = _settings;
    _this.is_displayed = false;
    _this.onSelect = new core_1.EventEmitter();
    _this.lockers = _this._state.available_resources;
    _this.loading = _this._state.loading;
    _this.zoom = 1;
    _this.center = {
      x: 0.5,
      y: 0.5
    };
    _this.setOptions = function (o) {
      return _this._state.setOptions(o);
    };
    _this.levels = _this._state.available_resources.pipe((0, operators_1.map)(function (lockers) {
      return (0, common_1.unique)(lockers.map(function (locker) {
        return locker.zone;
      }), 'id');
    }));
    _this.actions = _this._state.available_resources.pipe((0, operators_1.map)(function (lockers) {
      return lockers.map(function (locker) {
        return {
          id: locker.map_id || locker.id,
          action: ['touchend', 'mouseup'],
          callback: function callback() {
            return _this.selectLocker(locker);
          }
        };
      });
    }));
    _this.features = _this._state.resources.pipe((0, operators_1.map)(function (lockers) {
      return _this._settings.get('app.lockers.hide_user') ? [] : lockers.map(function (locker) {
        return {
          location: locker.id,
          content: explore_locker_bank_info_component_1.ExploreLockerBankInfoComponent,
          full_size: true,
          no_scale: true,
          data: {
            id: locker.map_id || locker.id,
            map_id: locker.name,
            name: locker.name || locker.map_id,
            user: _this._state.resourceUserName(locker.id)
          },
          z_index: 20
        };
      });
    }));
    _this.styles = (0, rxjs_1.combineLatest)([_this._state.resources, _this._state.available_resources]).pipe((0, operators_1.map)(function (_ref) {
      var _ref2 = _slicedToArray(_ref, 2),
        lockers = _ref2[0],
        free_lockers = _ref2[1];
      return lockers.reduce(function (styles, locker) {
        var colours = _this._settings.get('app.explore.colors') || {};
        var status = free_lockers.find(function (_) {
          return _.id === locker.id;
        }) ? 'free' : 'busy';
        styles["#".concat(locker.map_id || locker.id)] = {
          fill: colours["locker-".concat(status)] || colours["".concat(status)] || explore_spaces_service_1.DEFAULT_COLOURS["".concat(status)]
        };
        return styles;
      }, {});
    }));
    return _this;
  }
  _inherits(LockerMapComponent, _common_1$AsyncHandle);
  return _createClass(LockerMapComponent, [{
    key: "map_url",
    get: function get() {
      var _this$level;
      return ((_this$level = this.level) === null || _this$level === void 0 ? void 0 : _this$level.map_id) || '';
    }
  }, {
    key: "ngOnInit",
    value: function ngOnInit() {
      var _this2 = this;
      this.subscription('levels_update', this.levels.subscribe(function (levels) {
        if (!levels.find(function (_) {
          var _this2$level;
          return _.id === ((_this2$level = _this2.level) === null || _this2$level === void 0 ? void 0 : _this2$level.id);
        })) {
          _this2.level = levels[0];
        }
      }));
    }
  }, {
    key: "selectLocker",
    value: function selectLocker(locker) {
      this.onSelect.emit(locker);
    }
  }, {
    key: "setZoom",
    value: function setZoom(new_zoom) {
      this.zoom = Math.max(0.5, Math.min(10, new_zoom));
    }
  }, {
    key: "resetMap",
    value: function resetMap() {
      this.zoom = 1;
      this.center = {
        x: 0.5,
        y: 0.5
      };
    }
  }]);
}(common_1.AsyncHandler);
_LockerMapComponent = LockerMapComponent;
_LockerMapComponent.ɵfac = function LockerMapComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _LockerMapComponent)(i0.ɵɵdirectiveInject(i1.BookingFormService), i0.ɵɵdirectiveInject(i2.SettingsService));
};
_LockerMapComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _LockerMapComponent,
  selectors: [["locker-map"]],
  inputs: {
    is_displayed: "is_displayed"
  },
  outputs: {
    onSelect: "onSelect"
  },
  features: [i0.ɵɵInheritDefinitionFeature],
  decls: 21,
  vars: 18,
  consts: [[3, "zoomChange", "centerChange", "src", "zoom", "center", "features", "styles", "actions"], [1, "absolute", "inset-x-0", "top-0", "bg-base-100", "p-2", "border-b", "border-base-200"], ["levels", "", "appearance", "outline", 1, "w-full", "h-[3.25rem]"], [3, "ngModelChange", "ngModel", "ngModelOptions"], [3, "value", 4, "ngFor", "ngForOf"], ["zoom", "", 1, "absolute", "bottom-2", "right-2", "rounded-lg", "border", "border-base-200", "bg-base-100", "flex", "flex-col", "overflow-hidden"], ["zoom-in", "", "icon", "", "matRipple", "", 3, "click"], [1, "border-t", "border-base-200", "w-full"], ["zoom-out", "", "icon", "", "matRipple", "", 3, "click"], ["reset", "", "icon", "", "matRipple", "", 3, "click"], [3, "value"]],
  template: function LockerMapComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵelementStart(0, "interactive-map", 0);
      i0.ɵɵpipe(1, "async");
      i0.ɵɵpipe(2, "async");
      i0.ɵɵpipe(3, "async");
      i0.ɵɵtwoWayListener("zoomChange", function LockerMapComponent_Template_interactive_map_zoomChange_0_listener($event) {
        i0.ɵɵtwoWayBindingSet(ctx.zoom, $event) || (ctx.zoom = $event);
        return $event;
      })("centerChange", function LockerMapComponent_Template_interactive_map_centerChange_0_listener($event) {
        i0.ɵɵtwoWayBindingSet(ctx.center, $event) || (ctx.center = $event);
        return $event;
      });
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(4, "div", 1)(5, "mat-form-field", 2)(6, "mat-select", 3);
      i0.ɵɵtwoWayListener("ngModelChange", function LockerMapComponent_Template_mat_select_ngModelChange_6_listener($event) {
        i0.ɵɵtwoWayBindingSet(ctx.level, $event) || (ctx.level = $event);
        return $event;
      });
      i0.ɵɵtemplate(7, LockerMapComponent_mat_option_7_Template, 2, 2, "mat-option", 4);
      i0.ɵɵpipe(8, "async");
      i0.ɵɵelementEnd()()();
      i0.ɵɵelementStart(9, "div", 5)(10, "button", 6);
      i0.ɵɵlistener("click", function LockerMapComponent_Template_button_click_10_listener() {
        return ctx.setZoom(ctx.zoom * 1.1);
      });
      i0.ɵɵelementStart(11, "app-icon");
      i0.ɵɵtext(12, "zoom_in");
      i0.ɵɵelementEnd()();
      i0.ɵɵelement(13, "div", 7);
      i0.ɵɵelementStart(14, "button", 8);
      i0.ɵɵlistener("click", function LockerMapComponent_Template_button_click_14_listener() {
        return ctx.setZoom(ctx.zoom * (1 / 1.1));
      });
      i0.ɵɵelementStart(15, "app-icon");
      i0.ɵɵtext(16, "zoom_out");
      i0.ɵɵelementEnd()();
      i0.ɵɵelement(17, "div", 7);
      i0.ɵɵelementStart(18, "button", 9);
      i0.ɵɵlistener("click", function LockerMapComponent_Template_button_click_18_listener() {
        return ctx.resetMap();
      });
      i0.ɵɵelementStart(19, "app-icon");
      i0.ɵɵtext(20, "refresh");
      i0.ɵɵelementEnd()()();
    }
    if (rf & 2) {
      i0.ɵɵproperty("src", ctx.map_url);
      i0.ɵɵtwoWayProperty("zoom", ctx.zoom)("center", ctx.center);
      i0.ɵɵproperty("features", i0.ɵɵpipeBind1(1, 9, ctx.features))("styles", i0.ɵɵpipeBind1(2, 11, ctx.styles))("actions", i0.ɵɵpipeBind1(3, 13, ctx.actions));
      i0.ɵɵadvance(6);
      i0.ɵɵtwoWayProperty("ngModel", ctx.level);
      i0.ɵɵproperty("ngModelOptions", i0.ɵɵpureFunction0(17, _c0));
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngForOf", i0.ɵɵpipeBind1(8, 15, ctx.levels));
    }
  },
  dependencies: [i3.NgForOf, i4.NgControlStatus, i4.NgModel, i5.MatFormField, i6.MatOption, i7.IconComponent, i8.InteractiveMapComponent, i9.MatSelect, i6.MatRipple, i3.AsyncPipe],
  styles: ["[_nghost-%COMP%] {\n                position: relative;\n                background: rgba(0, 0, 0, 0.05);\n                padding-top: 4rem;\n            }\n\n            button[_ngcontent-%COMP%] {\n                border-radius: 0;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxvY2tlci1tYXAuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxrQkFBa0I7Z0JBQ2xCLCtCQUErQjtnQkFDL0IsaUJBQWlCO1lBQ3JCOztZQUVBO2dCQUNJLGdCQUFnQjtZQUNwQiIsImZpbGUiOiJsb2NrZXItbWFwLmNvbXBvbmVudC50cyIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgOmhvc3Qge1xuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiByZ2JhKDAsIDAsIDAsIDAuMDUpO1xuICAgICAgICAgICAgICAgIHBhZGRpbmctdG9wOiA0cmVtO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBidXR0b24ge1xuICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICJdfQ== */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvYm9va2luZ3Mvc3JjL2xpYi9sb2NrZXItc2VsZWN0LW1vZGFsL2xvY2tlci1tYXAuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxrQkFBa0I7Z0JBQ2xCLCtCQUErQjtnQkFDL0IsaUJBQWlCO1lBQ3JCOztZQUVBO2dCQUNJLGdCQUFnQjtZQUNwQjs7QUFFWixncEJBQWdwQiIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgOmhvc3Qge1xuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiByZ2JhKDAsIDAsIDAsIDAuMDUpO1xuICAgICAgICAgICAgICAgIHBhZGRpbmctdG9wOiA0cmVtO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBidXR0b24ge1xuICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICJdLCJzb3VyY2VSb290IjoiIn0= */"]
});
exports.LockerMapComponent = LockerMapComponent;

/***/ }),

/***/ 90482:
/*!************************************************************************************!*\
  !*** ./libs/bookings/src/lib/locker-select-modal/locker-select-modal.component.ts ***!
  \************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _taggedTemplateLiteral = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js */ 9959)["default"]);
var _toConsumableArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/toConsumableArray.js */ 86033)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _LockerSelectModalComponent, _templateObject, _templateObject2, _templateObject3, _templateObject4, _templateObject5, _templateObject6;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.LockerSelectModalComponent = exports.FAV_LOCKER_KEY = void 0;
var dialog_1 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var booking_form_service_1 = __webpack_require__(/*! ../booking-form.service */ 18379);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var i2 = __webpack_require__(/*! @placeos/common */ 22797);
var i3 = __webpack_require__(/*! ../booking-form.service */ 18379);
var i4 = __webpack_require__(/*! @angular/common */ 60316);
var i5 = __webpack_require__(/*! ../../../../components/src/lib/icon.component */ 69434);
var i6 = __webpack_require__(/*! @angular/material/core */ 74646);
var i7 = __webpack_require__(/*! ../locker-grid.component */ 84854);
var i8 = __webpack_require__(/*! ./locker-filters.component */ 22657);
var i9 = __webpack_require__(/*! ./locker-filters-display.component */ 42394);
var i10 = __webpack_require__(/*! ./locker-bank-list.component */ 90647);
var i11 = __webpack_require__(/*! ./locker-map.component */ 38720);
function LockerSelectModalComponent_ng_container_16_locker_bank_list_1_Template(rf, ctx) {
  if (rf & 1) {
    var _r2 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "locker-bank-list", 32);
    i0.ɵɵlistener("toggleFav", function LockerSelectModalComponent_ng_container_16_locker_bank_list_1_Template_locker_bank_list_toggleFav_0_listener($event) {
      i0.ɵɵrestoreView(_r2);
      var ctx_r2 = i0.ɵɵnextContext(2);
      return i0.ɵɵresetView(ctx_r2.toggleFavourite($event));
    })("onSelect", function LockerSelectModalComponent_ng_container_16_locker_bank_list_1_Template_locker_bank_list_onSelect_0_listener($event) {
      i0.ɵɵrestoreView(_r2);
      var ctx_r2 = i0.ɵɵnextContext(2);
      return i0.ɵɵresetView(ctx_r2.bank = $event);
    });
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r2 = i0.ɵɵnextContext(2);
    i0.ɵɵproperty("active", ctx_r2.displayed == null ? null : ctx_r2.displayed.id)("selected", ctx_r2.selected_ids)("favorites", ctx_r2.favorites);
  }
}
function LockerSelectModalComponent_ng_container_16_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵtemplate(1, LockerSelectModalComponent_ng_container_16_locker_bank_list_1_Template, 1, 3, "locker-bank-list", 31);
    i0.ɵɵelementContainerEnd();
  }
  if (rf & 2) {
    var ctx_r2 = i0.ɵɵnextContext();
    var map_view_r4 = i0.ɵɵreference(39);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", ctx_r2.view === "list")("ngIfElse", map_view_r4);
  }
}
function LockerSelectModalComponent_button_18_Template(rf, ctx) {
  if (rf & 1) {
    var _r5 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "button", 33);
    i0.ɵɵlistener("click", function LockerSelectModalComponent_button_18_Template_button_click_0_listener() {
      i0.ɵɵrestoreView(_r5);
      var ctx_r2 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r2.displayed = null);
    });
    i0.ɵɵi18n(1, 7);
    i0.ɵɵelementEnd();
  }
}
function LockerSelectModalComponent_button_31_Template(rf, ctx) {
  if (rf & 1) {
    var _r6 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "button", 34);
    i0.ɵɵlistener("click", function LockerSelectModalComponent_button_31_Template_button_click_0_listener() {
      i0.ɵɵrestoreView(_r6);
      var ctx_r2 = i0.ɵɵnextContext();
      ctx_r2.bank = null;
      return i0.ɵɵresetView(ctx_r2.displayed = null);
    });
    i0.ɵɵtext(1, " Return ");
    i0.ɵɵelementEnd();
  }
}
function LockerSelectModalComponent_ng_template_38_Template(rf, ctx) {
  if (rf & 1) {
    var _r7 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "locker-map", 35);
    i0.ɵɵlistener("onSelect", function LockerSelectModalComponent_ng_template_38_Template_locker_map_onSelect_0_listener($event) {
      i0.ɵɵrestoreView(_r7);
      var ctx_r2 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r2.displayed = $event);
    });
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r2 = i0.ɵɵnextContext();
    i0.ɵɵproperty("is_displayed", !!ctx_r2.displayed);
  }
}
function LockerSelectModalComponent_ng_template_40_Template(rf, ctx) {
  if (rf & 1) {
    var _r8 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "locker-grid", 36);
    i0.ɵɵlistener("clicked", function LockerSelectModalComponent_ng_template_40_Template_locker_grid_clicked_0_listener($event) {
      i0.ɵɵrestoreView(_r8);
      var ctx_r2 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r2.displayed = $event);
    });
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r2 = i0.ɵɵnextContext();
    i0.ɵɵproperty("bank", ctx_r2.bank)("selected", ctx_r2.displayed == null ? null : ctx_r2.displayed.id);
  }
}
exports.FAV_LOCKER_KEY = 'favourite_lockers';
var LockerSelectModalComponent = /*#__PURE__*/function () {
  function LockerSelectModalComponent(_dialog_ref, _settings, _event_form, _data) {
    _classCallCheck(this, LockerSelectModalComponent);
    this._dialog_ref = _dialog_ref;
    this._settings = _settings;
    this._event_form = _event_form;
    this._data = _data;
    this.selected = [];
    this.view = 'list';
    this.bank = null;
    this.selected = _toConsumableArray(_data.items || []);
    this._event_form.setOptions(_data.options);
  }
  return _createClass(LockerSelectModalComponent, [{
    key: "selected_ids",
    get: function get() {
      return this.selected.map(function (_) {
        return _.id;
      }).join(',');
    }
  }, {
    key: "favorites",
    get: function get() {
      return this._settings.get(exports.FAV_LOCKER_KEY) || [];
    }
  }, {
    key: "isSelected",
    value: function isSelected(id) {
      return id && this.selected_ids.includes(id);
    }
  }, {
    key: "setSelected",
    value: function setSelected(item, state) {
      var list = this.selected.filter(function (_) {
        return _.id !== item.id;
      });
      if (state) list.push(item);
      this.selected = list;
      if (!this._data.options.group && state) this._dialog_ref.close([item]);
    }
  }, {
    key: "toggleFavourite",
    value: function toggleFavourite(item) {
      var fav_list = this.favorites;
      var new_state = !fav_list.includes(item.id);
      if (new_state) {
        this._settings.saveUserSetting(exports.FAV_LOCKER_KEY, [].concat(_toConsumableArray(fav_list), [item.id]));
      } else {
        this._settings.saveUserSetting(exports.FAV_LOCKER_KEY, fav_list.filter(function (_) {
          return _ !== item.id;
        }));
      }
    }
  }]);
}();
_LockerSelectModalComponent = LockerSelectModalComponent;
_LockerSelectModalComponent.ɵfac = function LockerSelectModalComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _LockerSelectModalComponent)(i0.ɵɵdirectiveInject(i1.MatDialogRef), i0.ɵɵdirectiveInject(i2.SettingsService), i0.ɵɵdirectiveInject(i3.BookingFormService), i0.ɵɵdirectiveInject(dialog_1.MAT_DIALOG_DATA));
};
_LockerSelectModalComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _LockerSelectModalComponent,
  selectors: [["locker-select-modal"]],
  decls: 42,
  vars: 20,
  consts: function consts() {
    var i18n_0;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_6506914875226692064$$LIBS_BOOKINGS_SRC_LIB_LOCKER_SELECT_MODAL_LOCKER_SELECT_MODAL_COMPONENT_TS_0 = goog.getMsg("Find Locker");
      i18n_0 = MSG_EXTERNAL_6506914875226692064$$LIBS_BOOKINGS_SRC_LIB_LOCKER_SELECT_MODAL_LOCKER_SELECT_MODAL_COMPONENT_TS_0;
    } else {
      i18n_0 = $localize(_templateObject || (_templateObject = _taggedTemplateLiteral([":\u241Fa97cf1d9e290adb3e67030e67ae6cc914390a70d\u241F6506914875226692064:Find Locker"])));
    }
    var i18n_1;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_8443571736703532556$$LIBS_BOOKINGS_SRC_LIB_LOCKER_SELECT_MODAL_LOCKER_SELECT_MODAL_COMPONENT_TS_1 = goog.getMsg(" View List ");
      i18n_1 = MSG_EXTERNAL_8443571736703532556$$LIBS_BOOKINGS_SRC_LIB_LOCKER_SELECT_MODAL_LOCKER_SELECT_MODAL_COMPONENT_TS_1;
    } else {
      i18n_1 = $localize(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([":\u241F30d3439b0e0095fe69503245f3bd7a2e9498be7c\u241F8443571736703532556: View List "])));
    }
    var i18n_2;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_819716823718458903$$LIBS_BOOKINGS_SRC_LIB_LOCKER_SELECT_MODAL_LOCKER_SELECT_MODAL_COMPONENT_TS_2 = goog.getMsg("Back to form");
      i18n_2 = MSG_EXTERNAL_819716823718458903$$LIBS_BOOKINGS_SRC_LIB_LOCKER_SELECT_MODAL_LOCKER_SELECT_MODAL_COMPONENT_TS_2;
    } else {
      i18n_2 = $localize(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([":\u241F18843b85d1a4f17fefafd07bc5cde636dca44295\u241F819716823718458903:Back to form"])));
    }
    var i18n_3;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_3218631102043895117$$LIBS_BOOKINGS_SRC_LIB_LOCKER_SELECT_MODAL_LOCKER_SELECT_MODAL_COMPONENT_TS_3 = goog.getMsg(" {$interpolation} locker(s) added ", {
        "interpolation": "\uFFFD0\uFFFD"
      }, {
        original_code: {
          "interpolation": "{{ selected.length }}"
        }
      });
      i18n_3 = MSG_EXTERNAL_3218631102043895117$$LIBS_BOOKINGS_SRC_LIB_LOCKER_SELECT_MODAL_LOCKER_SELECT_MODAL_COMPONENT_TS_3;
    } else {
      i18n_3 = $localize(_templateObject4 || (_templateObject4 = _taggedTemplateLiteral([":\u241F613a2ac6bcd89376b2b66c414f54a2120304f542\u241F3218631102043895117: ", ":INTERPOLATION: locker(s) added "])), "\uFFFD0\uFFFD");
    }
    var i18n_4;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_7444538929505592211$$LIBS_BOOKINGS_SRC_LIB_LOCKER_SELECT_MODAL_LOCKER_SELECT_MODAL_COMPONENT_TS_4 = goog.getMsg(" {$interpolation} ", {
        "interpolation": "\uFFFD0\uFFFD"
      }, {
        original_code: {
          "interpolation": "{{\n                                    isSelected(displayed?.id)\n                                        ? 'Remove from Booking'\n                                        : 'Add to booking'\n                                }}"
        }
      });
      i18n_4 = MSG_EXTERNAL_7444538929505592211$$LIBS_BOOKINGS_SRC_LIB_LOCKER_SELECT_MODAL_LOCKER_SELECT_MODAL_COMPONENT_TS_4;
    } else {
      i18n_4 = $localize(_templateObject5 || (_templateObject5 = _taggedTemplateLiteral([":\u241Fb175289321a7bd20ba6e53bafb26c0604ecec7e5\u241F7444538929505592211: ", ":INTERPOLATION: "])), "\uFFFD0\uFFFD");
    }
    var i18n_5;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_874721418273731876$$LIBS_BOOKINGS_SRC_LIB_LOCKER_SELECT_MODAL_LOCKER_SELECT_MODAL_COMPONENT_TS_5 = goog.getMsg(" Back ");
      i18n_5 = MSG_EXTERNAL_874721418273731876$$LIBS_BOOKINGS_SRC_LIB_LOCKER_SELECT_MODAL_LOCKER_SELECT_MODAL_COMPONENT_TS_5;
    } else {
      i18n_5 = $localize(_templateObject6 || (_templateObject6 = _taggedTemplateLiteral([":\u241Fccda1d41ca79703a85a3a598c1d97e040a32b766\u241F874721418273731876: Back "])));
    }
    return [["map_view", ""], ["bank_view", ""], i18n_0, i18n_1, i18n_2, i18n_3, i18n_4, i18n_5, [1, "w-[100vw]", "h-[100vh]", "sm:relative", "sm:w-auto", "sm:h-auto", "flex", "flex-col", "bg-base-100"], [1, "flex", "items-center", "space-x-4", "w-full"], ["icon", "", "mat-dialog-close", "", 1, "bg-base-200"], [1, "hidden", "sm:flex", "items-center", "justify-end", "flex-1"], ["btn", "", "matRipple", "", "name", "view-locker-map", 1, "rounded-l", "rounded-r-none", 3, "click"], ["btn", "", "matRipple", "", "name", "view-locker-list", 1, "rounded-r", "rounded-l-none", 3, "click"], [1, "flex-1", "flex", "items-center", "divide-x", "divide-base-200", "min-h-[65vh]", "h-[65vh]", "sm:max-h-[65vh]", "sm:max-w-[95vw]", "w-full", "overflow-hidden"], [1, "h-full", "hidden", "sm:flex", "max-w-[20rem]", "sm:h-[65vh]", "sm:max-h-full", 3, "hide_levels"], [1, "flex", "flex-col", "items-center", "flex-1", "w-1/2", "h-full", "sm:h-[65vh]"], [1, "w-full", "border-b", "border-base-200", 3, "viewChange", "view"], [4, "ngIf", "ngIfElse"], [1, "flex", "sm:hidden", "flex-col-reverse", "items-center", "justify-end", "px-2", "pt-2", "pb-[5.5rem]", "border-t", "border-base-200", "w-full"], ["btn", "", "matRipple", "", "name", "locker-return", "class", "inverse sm:hidden w-full", 3, "click", 4, "ngIf"], ["btn", "", "matRipple", "", "name", "save-lockers", 1, "w-full", "sm:w-32", "sm:mb-0", 3, "mat-dialog-close"], [1, "hidden", "sm:flex", "items-center", "justify-between", "p-2", "border-t", "border-base-200", "w-full"], ["btn", "", "matRipple", "", "name", "locker-return", 1, "clear", "text-secondary", 3, "mat-dialog-close"], [1, "flex", "items-center"], [1, "text-xl"], [1, "mr-1", "underline"], [1, "opacity-60", "text-sm", "text-center"], ["btn", "", "matRipple", "", "name", "clear-bank", "class", "inverse mr-2 w-32", 3, "click", 4, "ngIf"], ["btn", "", "matRipple", "", "name", "toggle-locker", 3, "click", "disabled"], [1, "mr-1"], ["class", "flex-1 h-1/2 bg-base-200", 3, "active", "selected", "favorites", "toggleFav", "onSelect", 4, "ngIf", "ngIfElse"], [1, "flex-1", "h-1/2", "bg-base-200", 3, "toggleFav", "onSelect", "active", "selected", "favorites"], ["btn", "", "matRipple", "", "name", "locker-return", 1, "inverse", "sm:hidden", "w-full", 3, "click"], ["btn", "", "matRipple", "", "name", "clear-bank", 1, "inverse", "mr-2", "w-32", 3, "click"], [1, "flex-1", "h-1/2", "w-full", 3, "onSelect", "is_displayed"], [1, "max-w-full", "overflow-auto", "flex-1", "h-1/2", "bg-base-200", 3, "clicked", "bank", "selected"]];
  },
  template: function LockerSelectModalComponent_Template(rf, ctx) {
    if (rf & 1) {
      var _r1 = i0.ɵɵgetCurrentView();
      i0.ɵɵelementStart(0, "div", 8)(1, "header", 9)(2, "button", 10)(3, "app-icon");
      i0.ɵɵtext(4, "close");
      i0.ɵɵelementEnd()();
      i0.ɵɵelementStart(5, "h3");
      i0.ɵɵi18n(6, 2);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(7, "div", 11)(8, "button", 12);
      i0.ɵɵlistener("click", function LockerSelectModalComponent_Template_button_click_8_listener() {
        i0.ɵɵrestoreView(_r1);
        return i0.ɵɵresetView(ctx.view = "map");
      });
      i0.ɵɵtext(9, " Map ");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(10, "button", 13);
      i0.ɵɵlistener("click", function LockerSelectModalComponent_Template_button_click_10_listener() {
        i0.ɵɵrestoreView(_r1);
        return i0.ɵɵresetView(ctx.view = "list");
      });
      i0.ɵɵtext(11, " List ");
      i0.ɵɵelementEnd()()();
      i0.ɵɵelementStart(12, "main", 14);
      i0.ɵɵelement(13, "locker-filters", 15);
      i0.ɵɵelementStart(14, "div", 16)(15, "locker-filters-display", 17);
      i0.ɵɵtwoWayListener("viewChange", function LockerSelectModalComponent_Template_locker_filters_display_viewChange_15_listener($event) {
        i0.ɵɵrestoreView(_r1);
        i0.ɵɵtwoWayBindingSet(ctx.view, $event) || (ctx.view = $event);
        return i0.ɵɵresetView($event);
      });
      i0.ɵɵelementEnd();
      i0.ɵɵtemplate(16, LockerSelectModalComponent_ng_container_16_Template, 2, 2, "ng-container", 18);
      i0.ɵɵelementEnd()();
      i0.ɵɵelementStart(17, "footer", 19);
      i0.ɵɵtemplate(18, LockerSelectModalComponent_button_18_Template, 2, 0, "button", 20);
      i0.ɵɵelementStart(19, "button", 21);
      i0.ɵɵi18n(20, 3);
      i0.ɵɵelementEnd()();
      i0.ɵɵelementStart(21, "footer", 22)(22, "button", 23)(23, "div", 24)(24, "app-icon", 25);
      i0.ɵɵtext(25, "arrow_back");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(26, "div", 26);
      i0.ɵɵi18n(27, 4);
      i0.ɵɵelementEnd()()();
      i0.ɵɵelementStart(28, "p", 27);
      i0.ɵɵi18n(29, 5);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(30, "div", 24);
      i0.ɵɵtemplate(31, LockerSelectModalComponent_button_31_Template, 2, 0, "button", 28);
      i0.ɵɵelementStart(32, "button", 29);
      i0.ɵɵlistener("click", function LockerSelectModalComponent_Template_button_click_32_listener() {
        i0.ɵɵrestoreView(_r1);
        return i0.ɵɵresetView(ctx.setSelected(ctx.displayed, !ctx.isSelected(ctx.displayed == null ? null : ctx.displayed.id)));
      });
      i0.ɵɵelementStart(33, "div", 24)(34, "app-icon", 25);
      i0.ɵɵtext(35);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(36, "div", 30);
      i0.ɵɵi18n(37, 6);
      i0.ɵɵelementEnd()()()()()();
      i0.ɵɵtemplate(38, LockerSelectModalComponent_ng_template_38_Template, 1, 1, "ng-template", null, 0, i0.ɵɵtemplateRefExtractor)(40, LockerSelectModalComponent_ng_template_40_Template, 1, 2, "ng-template", null, 1, i0.ɵɵtemplateRefExtractor);
    }
    if (rf & 2) {
      var bank_view_r9 = i0.ɵɵreference(41);
      i0.ɵɵadvance(8);
      i0.ɵɵclassProp("inverse", ctx.view !== "map");
      i0.ɵɵadvance(2);
      i0.ɵɵclassProp("inverse", ctx.view !== "list");
      i0.ɵɵadvance(3);
      i0.ɵɵproperty("hide_levels", ctx.view !== "list");
      i0.ɵɵadvance(2);
      i0.ɵɵtwoWayProperty("view", ctx.view);
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", !ctx.bank)("ngIfElse", bank_view_r9);
      i0.ɵɵadvance(2);
      i0.ɵɵproperty("ngIf", ctx.displayed);
      i0.ɵɵadvance();
      i0.ɵɵclassProp("mb-2", ctx.displayed);
      i0.ɵɵproperty("mat-dialog-close", ctx.selected);
      i0.ɵɵadvance(3);
      i0.ɵɵproperty("mat-dialog-close", ctx.selected);
      i0.ɵɵadvance(7);
      i0.ɵɵi18nExp(ctx.selected.length);
      i0.ɵɵi18nApply(29);
      i0.ɵɵadvance(2);
      i0.ɵɵproperty("ngIf", ctx.bank);
      i0.ɵɵadvance();
      i0.ɵɵclassProp("inverse", ctx.isSelected(ctx.displayed == null ? null : ctx.displayed.id));
      i0.ɵɵproperty("disabled", !ctx.displayed);
      i0.ɵɵadvance(3);
      i0.ɵɵtextInterpolate(ctx.isSelected(ctx.displayed == null ? null : ctx.displayed.id) ? "remove" : "add");
      i0.ɵɵadvance(2);
      i0.ɵɵi18nExp(ctx.isSelected(ctx.displayed == null ? null : ctx.displayed.id) ? "Remove from Booking" : "Add to booking");
      i0.ɵɵi18nApply(37);
    }
  },
  dependencies: [i4.NgIf, i1.MatDialogClose, i5.IconComponent, i6.MatRipple, i7.LockerGridComponent, i8.LockerFiltersComponent, i9.LockerFiltersDisplayComponent, i10.LockerBankListComponent, i11.LockerMapComponent],
  encapsulation: 2
});
exports.LockerSelectModalComponent = LockerSelectModalComponent;

/***/ }),

/***/ 98796:
/*!**************************************************!*\
  !*** ./libs/bookings/src/lib/lockers.service.ts ***!
  \**************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _regeneratorRuntime = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/regeneratorRuntime.js */ 8698)["default"]);
var _asyncToGenerator = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/asyncToGenerator.js */ 95386)["default"]);
var _toConsumableArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/toConsumableArray.js */ 86033)["default"]);
var _createForOfIteratorHelper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createForOfIteratorHelper.js */ 36350)["default"]);
var _objectSpread = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/objectSpread2.js */ 34092)["default"]);
var _slicedToArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/slicedToArray.js */ 6282)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _LockersService;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.LockersService = void 0;
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var ts_client_1 = __webpack_require__(/*! @placeos/ts-client */ 35713);
var rxjs_1 = __webpack_require__(/*! rxjs */ 15681);
var operators_1 = __webpack_require__(/*! rxjs/operators */ 97303);
var organisation_service_1 = __webpack_require__(/*! libs/organisation/src/lib/organisation.service */ 19863);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! libs/organisation/src/lib/organisation.service */ 19863);
var LockersService = /*#__PURE__*/function () {
  function LockersService(_org) {
    _classCallCheck(this, LockersService);
    this._org = _org;
    this._level = new rxjs_1.BehaviorSubject('');
    this._change = new rxjs_1.BehaviorSubject(0);
    this.lockers_banks$ = (0, rxjs_1.combineLatest)([this._org.active_building, this._change]).pipe((0, operators_1.filter)(function (_ref) {
      var _ref2 = _slicedToArray(_ref, 1),
        bld = _ref2[0];
      return !!bld;
    }), (0, operators_1.switchMap)(function (_ref3) {
      var _ref4 = _slicedToArray(_ref3, 1),
        bld = _ref4[0];
      return (0, ts_client_1.listChildMetadata)(bld.id, {
        name: 'lockers'
      }).pipe((0, operators_1.catchError)(function () {
        return (0, rxjs_1.of)(new ts_client_1.PlaceMetadata());
      }));
    }), (0, operators_1.map)(function (_) {
      return (0, common_1.flatten)(_.map(function (_) {
        var _$metadata$lockers, _$metadata$lockers2;
        return ((_$metadata$lockers = _.metadata.lockers) === null || _$metadata$lockers === void 0 ? void 0 : _$metadata$lockers.details) instanceof Array ? (_$metadata$lockers2 = _.metadata.lockers) === null || _$metadata$lockers2 === void 0 ? void 0 : _$metadata$lockers2.details.map(function (bank) {
          return _objectSpread(_objectSpread({}, bank), {}, {
            zone: _.zone
          });
        }) : [];
      }));
    }), (0, operators_1.shareReplay)(1));
    this.lockers$ = this.lockers_banks$.pipe((0, operators_1.map)(function (bank_list) {
      var lockers = [];
      var _iterator = _createForOfIteratorHelper(bank_list),
        _step;
      try {
        var _loop = function _loop() {
          var bank = _step.value;
          lockers.push.apply(lockers, _toConsumableArray(bank.lockers.map(function (_) {
            return _objectSpread(_objectSpread({}, _), {}, {
              bank_id: bank.id,
              map_id: bank.map_id,
              level_id: bank.zone.id
            });
          })));
        };
        for (_iterator.s(); !(_step = _iterator.n()).done;) {
          _loop();
        }
      } catch (err) {
        _iterator.e(err);
      } finally {
        _iterator.f();
      }
      return lockers;
    }));
    this.filtered_lockers$ = (0, rxjs_1.combineLatest)([this._level, this.lockers$]).pipe((0, operators_1.map)(function (_ref5) {
      var _ref6 = _slicedToArray(_ref5, 2),
        level = _ref6[0],
        lockers = _ref6[1];
      return lockers.filter(function (_) {
        return (!level || _.level_id === level) && _.bookable;
      });
    }));
  }
  return _createClass(LockersService, [{
    key: "setLevel",
    value: function setLevel(level) {
      this._level.next(level);
    }
  }, {
    key: "saveLockers",
    value: function () {
      var _saveLockers = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(lockers) {
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              _context.next = 2;
              return (0, ts_client_1.updateMetadata)(this._org.building.id, {
                name: 'lockers',
                description: '',
                details: lockers
              });
            case 2:
              this._change.next(Date.now());
            case 3:
            case "end":
              return _context.stop();
          }
        }, _callee, this);
      }));
      function saveLockers(_x) {
        return _saveLockers.apply(this, arguments);
      }
      return saveLockers;
    }()
  }]);
}();
_LockersService = LockersService;
_LockersService.ɵfac = function LockersService_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _LockersService)(i0.ɵɵinject(i1.OrganisationService));
};
_LockersService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({
  token: _LockersService,
  factory: _LockersService.ɵfac,
  providedIn: 'root'
});
exports.LockersService = LockersService;

/***/ }),

/***/ 6724:
/*!*********************************************************************************!*\
  !*** ./libs/bookings/src/lib/parking-select-modal/parking-details.component.ts ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _taggedTemplateLiteral = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js */ 9959)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _ParkingSpaceDetailsComponent, _templateObject, _templateObject2, _templateObject3;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.ParkingSpaceDetailsComponent = void 0;
var core_1 = __webpack_require__(/*! @angular/core */ 37580);
var components_1 = __webpack_require__(/*! @placeos/components */ 51588);
var organisation_1 = __webpack_require__(/*! @placeos/organisation */ 2510);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @placeos/organisation */ 2510);
var i2 = __webpack_require__(/*! @angular/common */ 60316);
var i3 = __webpack_require__(/*! ../../../../components/src/lib/icon.component */ 69434);
var i4 = __webpack_require__(/*! ../../../../components/src/lib/interactive-map.component */ 24918);
var i5 = __webpack_require__(/*! ../../../../components/src/lib/image-carousel.component */ 65277);
var i6 = __webpack_require__(/*! @angular/material/core */ 74646);
var _c0 = function _c0() {
  return {
    disable_pan: true,
    disable_zoom: true
  };
};
function ParkingSpaceDetailsComponent_ng_container_0_image_carousel_2_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelement(0, "image-carousel", 21);
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext(2);
    i0.ɵɵproperty("images", ctx_r1.space.images);
  }
}
function ParkingSpaceDetailsComponent_ng_container_0_Template(rf, ctx) {
  if (rf & 1) {
    var _r1 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵelementStart(1, "section", 5);
    i0.ɵɵtemplate(2, ParkingSpaceDetailsComponent_ng_container_0_image_carousel_2_Template, 1, 1, "image-carousel", 6);
    i0.ɵɵelementStart(3, "button", 7);
    i0.ɵɵlistener("click", function ParkingSpaceDetailsComponent_ng_container_0_Template_button_click_3_listener() {
      i0.ɵɵrestoreView(_r1);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.close.emit());
    });
    i0.ɵɵelementStart(4, "app-icon");
    i0.ɵɵtext(5, "arrow_back");
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(6, "button", 8);
    i0.ɵɵlistener("click", function ParkingSpaceDetailsComponent_ng_container_0_Template_button_click_6_listener() {
      i0.ɵɵrestoreView(_r1);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.toggleFav.emit());
    });
    i0.ɵɵelementStart(7, "app-icon");
    i0.ɵɵtext(8);
    i0.ɵɵelementEnd()()();
    i0.ɵɵelementStart(9, "div", 9)(10, "section", 10)(11, "h2", 11);
    i0.ɵɵtext(12);
    i0.ɵɵelementEnd()();
    i0.ɵɵelement(13, "hr");
    i0.ɵɵelementStart(14, "section", 12)(15, "h2", 13);
    i0.ɵɵi18n(16, 1);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(17, "div", 14)(18, "app-icon");
    i0.ɵɵtext(19, "people");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(20, "p");
    i0.ɵɵi18n(21, 2);
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(22, "div", 14)(23, "app-icon");
    i0.ɵɵtext(24, "meeting_room");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(25, "p");
    i0.ɵɵtext(26);
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(27, "div", 14)(28, "app-icon");
    i0.ɵɵtext(29, "place");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(30, "p");
    i0.ɵɵtext(31);
    i0.ɵɵelementEnd()()();
    i0.ɵɵelement(32, "hr");
    i0.ɵɵelementStart(33, "section", 15);
    i0.ɵɵelement(34, "interactive-map", 16);
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(35, "div", 17)(36, "button", 18);
    i0.ɵɵlistener("click", function ParkingSpaceDetailsComponent_ng_container_0_Template_button_click_36_listener() {
      i0.ɵɵrestoreView(_r1);
      var ctx_r1 = i0.ɵɵnextContext();
      ctx_r1.active = !ctx_r1.active;
      return i0.ɵɵresetView(ctx_r1.activeChange.emit(ctx_r1.active));
    });
    i0.ɵɵelementStart(37, "div", 19)(38, "app-icon", 20);
    i0.ɵɵtext(39);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(40, "p");
    i0.ɵɵtext(41);
    i0.ɵɵelementEnd()()()();
    i0.ɵɵelementContainerEnd();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance();
    i0.ɵɵclassProp("sm:h-40", ctx_r1.space.images == null ? null : ctx_r1.space.images.length)("h-64", ctx_r1.space.images == null ? null : ctx_r1.space.images.length)("sm:h-0", !(ctx_r1.space.images == null ? null : ctx_r1.space.images.length))("h-12", !(ctx_r1.space.images == null ? null : ctx_r1.space.images.length))("!bg-transparent", !(ctx_r1.space.images == null ? null : ctx_r1.space.images.length));
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", ctx_r1.space.images == null ? null : ctx_r1.space.images.length);
    i0.ɵɵadvance(4);
    i0.ɵɵclassProp("text-info-content", ctx_r1.fav)("!bg-info", ctx_r1.fav);
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate(ctx_r1.fav ? "favorite" : "favorite_border");
    i0.ɵɵadvance(4);
    i0.ɵɵtextInterpolate1(" ", ctx_r1.space.display_name || ctx_r1.space.name, " ");
    i0.ɵɵadvance(9);
    i0.ɵɵi18nExp(ctx_r1.space.capacity);
    i0.ɵɵi18nApply(21);
    i0.ɵɵadvance(5);
    i0.ɵɵtextInterpolate1(" ", (ctx_r1.level == null ? null : ctx_r1.level.display_name) || (ctx_r1.level == null ? null : ctx_r1.level.name), " ");
    i0.ɵɵadvance(5);
    i0.ɵɵtextInterpolate1(" ", (ctx_r1.building == null ? null : ctx_r1.building.address) || (ctx_r1.building == null ? null : ctx_r1.building.display_name) || (ctx_r1.building == null ? null : ctx_r1.building.name), " ");
    i0.ɵɵadvance(3);
    i0.ɵɵproperty("src", ctx_r1.map_url)("focus", ctx_r1.space.map_id)("features", ctx_r1.features)("options", i0.ɵɵpureFunction0(28, _c0));
    i0.ɵɵadvance(2);
    i0.ɵɵclassProp("inverse", ctx_r1.active);
    i0.ɵɵadvance(3);
    i0.ɵɵtextInterpolate(ctx_r1.active ? "remove" : "add");
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate1(" ", ctx_r1.active ? "Remove this room" : "Add this room", " ");
  }
}
function ParkingSpaceDetailsComponent_ng_template_1_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 22)(1, "p", 23);
    i0.ɵɵi18n(2, 3);
    i0.ɵɵelementEnd()();
  }
}
var ParkingSpaceDetailsComponent = /*#__PURE__*/function () {
  function ParkingSpaceDetailsComponent(_org) {
    _classCallCheck(this, ParkingSpaceDetailsComponent);
    this._org = _org;
    this.fav = false;
    this.active = false;
    this.activeChange = new core_1.EventEmitter();
    this.close = new core_1.EventEmitter();
    this.toggleFav = new core_1.EventEmitter();
    this.map_url = '';
    this.features = [];
  }
  return _createClass(ParkingSpaceDetailsComponent, [{
    key: "level",
    get: function get() {
      var _this$space, _this$space2;
      return this._org.levelWithID([(_this$space = this.space) === null || _this$space === void 0 ? void 0 : _this$space.zone.id]) || ((_this$space2 = this.space) === null || _this$space2 === void 0 ? void 0 : _this$space2.zone);
    }
  }, {
    key: "building",
    get: function get() {
      var _this = this;
      return this._org.buildings.find(function (_) {
        var _this$space3, _this$space4;
        return ((_this$space3 = _this.space) === null || _this$space3 === void 0 ? void 0 : _this$space3.zone.id) === _.id || ((_this$space4 = _this.space) === null || _this$space4 === void 0 ? void 0 : _this$space4.zone.parent_id) === _.id;
      });
    }
  }, {
    key: "ngOnChanges",
    value: function ngOnChanges(changes) {
      if (changes.space && this.space) {
        this._updateFeature();
      }
    }
  }, {
    key: "_updateFeature",
    value: function _updateFeature() {
      var _this$level, _this$space5;
      this.map_url = (_this$level = this.level) === null || _this$level === void 0 ? void 0 : _this$level.map_id;
      this.features = [{
        location: (_this$space5 = this.space) === null || _this$space5 === void 0 ? void 0 : _this$space5.map_id,
        content: components_1.MapPinComponent
      }];
    }
  }]);
}();
_ParkingSpaceDetailsComponent = ParkingSpaceDetailsComponent;
_ParkingSpaceDetailsComponent.ɵfac = function ParkingSpaceDetailsComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _ParkingSpaceDetailsComponent)(i0.ɵɵdirectiveInject(i1.OrganisationService));
};
_ParkingSpaceDetailsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _ParkingSpaceDetailsComponent,
  selectors: [["parking-space-details"]],
  inputs: {
    space: "space",
    fav: "fav",
    active: "active"
  },
  outputs: {
    activeChange: "activeChange",
    close: "close",
    toggleFav: "toggleFav"
  },
  features: [i0.ɵɵNgOnChangesFeature],
  decls: 3,
  vars: 2,
  consts: function consts() {
    var i18n_0;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_5028777105388019087$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_DETAILS_COMPONENT_TS_0 = goog.getMsg("Details");
      i18n_0 = MSG_EXTERNAL_5028777105388019087$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_DETAILS_COMPONENT_TS_0;
    } else {
      i18n_0 = $localize(_templateObject || (_templateObject = _taggedTemplateLiteral([":\u241F4f8b2bb476981727ab34ed40fde1218361f92c45\u241F5028777105388019087:Details"])));
    }
    var i18n_1;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_2731085793954892186$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_DETAILS_COMPONENT_TS_1 = goog.getMsg("{$interpolation} People", {
        "interpolation": "\uFFFD0\uFFFD"
      }, {
        original_code: {
          "interpolation": "{{ space.capacity }}"
        }
      });
      i18n_1 = MSG_EXTERNAL_2731085793954892186$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_DETAILS_COMPONENT_TS_1;
    } else {
      i18n_1 = $localize(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([":\u241F2fe5caca246424da5e7fcee12a1fe341335e1286\u241F2731085793954892186:", ":INTERPOLATION: People"])), "\uFFFD0\uFFFD");
    }
    var i18n_2;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_7182911930527299079$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_DETAILS_COMPONENT_TS_2 = goog.getMsg(" Select a space to view it's details ");
      i18n_2 = MSG_EXTERNAL_7182911930527299079$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_DETAILS_COMPONENT_TS_2;
    } else {
      i18n_2 = $localize(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([":\u241F2d39d1ca65d735d7f800e458ce54af6a25652395\u241F7182911930527299079: Select a space to view it's details "])));
    }
    return [["empty_state", ""], i18n_0, i18n_1, i18n_2, [4, "ngIf", "ngIfElse"], ["image", "", 1, "relative", "w-full", "bg-base-200"], ["class", "absolute inset-0", 3, "images", 4, "ngIf"], ["icon", "", "matRipple", "", "close", "", 1, "absolute", "top-2", "left-2", "bg-base-200", "sm:hidden", 3, "click"], ["icon", "", "matRipple", "", "fav", "", 1, "absolute", "top-2", "right-2", "bg-base-200", 3, "click"], [1, "p-2", "space-y-2", "flex-1", "h-1/2", "overflow-auto"], ["actions", "", 1, "z-0"], [1, "text-xl", "font-medium", "mb-2", "mt-4"], ["details", "", 1, "space-y-2"], [1, "text-xl", "font-medium"], [1, "flex", "items-center", "space-x-2"], ["map", "", 1, "w-full", "mx-auto", "h-64", "sm:h-48", "relative", "border", "border-base-200", "overflow-hidden", "rounded"], [1, "pointer-events-none", 3, "src", "focus", "features", "options"], [1, "p-2", "border-t", "border-base-200", "shadow", "sm:hidden"], ["btn", "", "matRipple", "", 1, "w-full", 3, "click"], [1, "flex", "items-center", "justify-center"], [1, "text-2xl"], [1, "absolute", "inset-0", 3, "images"], ["empty", "", 1, "p-16", "flex", "flex-col", "items-center", "justify-center", "space-y-2"], [1, "opacity-30", "text-center"]];
  },
  template: function ParkingSpaceDetailsComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵtemplate(0, ParkingSpaceDetailsComponent_ng_container_0_Template, 42, 29, "ng-container", 4)(1, ParkingSpaceDetailsComponent_ng_template_1_Template, 3, 0, "ng-template", null, 0, i0.ɵɵtemplateRefExtractor);
    }
    if (rf & 2) {
      var empty_state_r3 = i0.ɵɵreference(2);
      i0.ɵɵproperty("ngIf", ctx.space)("ngIfElse", empty_state_r3);
    }
  },
  dependencies: [i2.NgIf, i3.IconComponent, i4.InteractiveMapComponent, i5.ImageCarouselComponent, i6.MatRipple],
  styles: ["[_nghost-%COMP%] {\n                display: flex;\n                flex-direction: column;\n                width: 30%;\n                min-width: 20rem;\n                height: 100%;\n                min-height: 65vh;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBhcmtpbmctZGV0YWlscy5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLGFBQWE7Z0JBQ2Isc0JBQXNCO2dCQUN0QixVQUFVO2dCQUNWLGdCQUFnQjtnQkFDaEIsWUFBWTtnQkFDWixnQkFBZ0I7WUFDcEIiLCJmaWxlIjoicGFya2luZy1kZXRhaWxzLmNvbXBvbmVudC50cyIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgOmhvc3Qge1xuICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgICAgICAgICB3aWR0aDogMzAlO1xuICAgICAgICAgICAgICAgIG1pbi13aWR0aDogMjByZW07XG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgICAgICAgICAgIG1pbi1oZWlnaHQ6IDY1dmg7XG4gICAgICAgICAgICB9XG4gICAgICAgICJdfQ== */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvYm9va2luZ3Mvc3JjL2xpYi9wYXJraW5nLXNlbGVjdC1tb2RhbC9wYXJraW5nLWRldGFpbHMuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxhQUFhO2dCQUNiLHNCQUFzQjtnQkFDdEIsVUFBVTtnQkFDVixnQkFBZ0I7Z0JBQ2hCLFlBQVk7Z0JBQ1osZ0JBQWdCO1lBQ3BCOztBQUVaLGdyQkFBZ3JCIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICA6aG9zdCB7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgICAgICAgIHdpZHRoOiAzMCU7XG4gICAgICAgICAgICAgICAgbWluLXdpZHRoOiAyMHJlbTtcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgICAgICAgICAgbWluLWhlaWdodDogNjV2aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl0sInNvdXJjZVJvb3QiOiIifQ== */"]
});
exports.ParkingSpaceDetailsComponent = ParkingSpaceDetailsComponent;

/***/ }),

/***/ 19138:
/*!*****************************************************************************************!*\
  !*** ./libs/bookings/src/lib/parking-select-modal/parking-filters-display.component.ts ***!
  \*****************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _taggedTemplateLiteral = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js */ 9959)["default"]);
var _regeneratorRuntime = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/regeneratorRuntime.js */ 8698)["default"]);
var _objectSpread = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/objectSpread2.js */ 34092)["default"]);
var _asyncToGenerator = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/asyncToGenerator.js */ 95386)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _callSuper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/callSuper.js */ 8513)["default"]);
var _inherits = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/inherits.js */ 58160)["default"]);
var _ParkingSpaceFiltersDisplayComponent, _templateObject, _templateObject2, _templateObject3, _templateObject4;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.ParkingSpaceFiltersDisplayComponent = void 0;
var core_1 = __webpack_require__(/*! @angular/core */ 37580);
var bottom_sheet_1 = __webpack_require__(/*! @angular/material/bottom-sheet */ 15244);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var organisation_1 = __webpack_require__(/*! @placeos/organisation */ 2510);
var operators_1 = __webpack_require__(/*! rxjs/operators */ 97303);
var parking_filters_component_1 = __webpack_require__(/*! ./parking-filters.component */ 39145);
var booking_form_service_1 = __webpack_require__(/*! ../booking-form.service */ 18379);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @angular/material/bottom-sheet */ 15244);
var i2 = __webpack_require__(/*! ../booking-form.service */ 18379);
var i3 = __webpack_require__(/*! @placeos/organisation */ 2510);
var i4 = __webpack_require__(/*! @placeos/common */ 22797);
var i5 = __webpack_require__(/*! @angular/common */ 60316);
var i6 = __webpack_require__(/*! ../../../../components/src/lib/icon.component */ 69434);
var i7 = __webpack_require__(/*! @angular/material/core */ 74646);
function ParkingSpaceFiltersDisplayComponent_div_9_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 15);
    i0.ɵɵtext(1);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r0 = i0.ɵɵnextContext();
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", ctx_r0.location, " ");
  }
}
function ParkingSpaceFiltersDisplayComponent_div_20_Template(rf, ctx) {
  if (rf & 1) {
    var _r2 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 16)(1, "p");
    i0.ɵɵtext(2);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(3, "button", 17);
    i0.ɵɵlistener("click", function ParkingSpaceFiltersDisplayComponent_div_20_Template_button_click_3_listener() {
      var feat_r3 = i0.ɵɵrestoreView(_r2).$implicit;
      var ctx_r0 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r0.removeFeature(feat_r3));
    });
    i0.ɵɵelementStart(4, "app-icon");
    i0.ɵɵtext(5, "close");
    i0.ɵɵelementEnd()()();
  }
  if (rf & 2) {
    var feat_r3 = ctx.$implicit;
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate(feat_r3);
  }
}
var ParkingSpaceFiltersDisplayComponent = /*#__PURE__*/function (_common_1$AsyncHandle) {
  function ParkingSpaceFiltersDisplayComponent(_bsheet, _event_form, _org, _settings) {
    var _this;
    _classCallCheck(this, ParkingSpaceFiltersDisplayComponent);
    _this = _callSuper(this, ParkingSpaceFiltersDisplayComponent);
    _this._bsheet = _bsheet;
    _this._event_form = _event_form;
    _this._org = _org;
    _this._settings = _settings;
    _this.view = 'list';
    _this.viewChange = new core_1.EventEmitter();
    _this.options = _this._event_form.options;
    _this.location = '';
    _this.editFilters = function () {
      return _this._bsheet.open(parking_filters_component_1.ParkingSpaceFiltersComponent);
    };
    return _this;
  }
  _inherits(ParkingSpaceFiltersDisplayComponent, _common_1$AsyncHandle);
  return _createClass(ParkingSpaceFiltersDisplayComponent, [{
    key: "start",
    get: function get() {
      return this._event_form.form.value.date;
    }
  }, {
    key: "end",
    get: function get() {
      var _this$_event_form$for = this._event_form.form.value,
        date = _this$_event_form$for.date,
        duration = _this$_event_form$for.duration;
      return date + duration * 60 * 1000;
    }
  }, {
    key: "time_format",
    get: function get() {
      return this._settings.time_format;
    }
  }, {
    key: "ngOnInit",
    value: function ngOnInit() {
      var _this2 = this;
      this.subscription('opts', this.options.subscribe(function (_ref) {
        var zone_id = _ref.zone_id;
        return _this2._updateLocation([zone_id]);
      }));
    }
  }, {
    key: "removeFeature",
    value: function () {
      var _removeFeature = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(feat) {
        var value;
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              _context.next = 2;
              return this._event_form.options.pipe((0, operators_1.take)(1)).toPromise();
            case 2:
              value = _context.sent;
              this._event_form.setOptions(_objectSpread(_objectSpread({}, value), {}, {
                features: (value.features || []).filter(function (_) {
                  return _ !== feat;
                })
              }));
            case 4:
            case "end":
              return _context.stop();
          }
        }, _callee, this);
      }));
      function removeFeature(_x) {
        return _removeFeature.apply(this, arguments);
      }
      return removeFeature;
    }()
  }, {
    key: "_updateLocation",
    value: function _updateLocation() {
      var zone_ids = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];
      var level = this._org.levelWithID(zone_ids);
      var item = level || this._org.building;
      this.location = (item === null || item === void 0 ? void 0 : item.display_name) || (item === null || item === void 0 ? void 0 : item.name) || '';
    }
  }]);
}(common_1.AsyncHandler);
_ParkingSpaceFiltersDisplayComponent = ParkingSpaceFiltersDisplayComponent;
_ParkingSpaceFiltersDisplayComponent.ɵfac = function ParkingSpaceFiltersDisplayComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _ParkingSpaceFiltersDisplayComponent)(i0.ɵɵdirectiveInject(i1.MatBottomSheet), i0.ɵɵdirectiveInject(i2.BookingFormService), i0.ɵɵdirectiveInject(i3.OrganisationService), i0.ɵɵdirectiveInject(i4.SettingsService));
};
_ParkingSpaceFiltersDisplayComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _ParkingSpaceFiltersDisplayComponent,
  selectors: [["parking-space-filters-display"]],
  inputs: {
    view: "view"
  },
  outputs: {
    viewChange: "viewChange"
  },
  features: [i0.ɵɵInheritDefinitionFeature],
  decls: 22,
  vars: 23,
  consts: function consts() {
    var i18n_0;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_5208858215712453646$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_FILTERS_DISPLAY_COMPONENT_TS_0 = goog.getMsg(" Filters ");
      i18n_0 = MSG_EXTERNAL_5208858215712453646$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_FILTERS_DISPLAY_COMPONENT_TS_0;
    } else {
      i18n_0 = $localize(_templateObject || (_templateObject = _taggedTemplateLiteral([":\u241F19eaa5cd51d70d9ea957eecac78cfd811e9b93d8\u241F5208858215712453646: Filters "])));
    }
    var i18n_1;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_8553228906889869186$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_FILTERS_DISPLAY_COMPONENT_TS_1 = goog.getMsg(" Map ");
      i18n_1 = MSG_EXTERNAL_8553228906889869186$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_FILTERS_DISPLAY_COMPONENT_TS_1;
    } else {
      i18n_1 = $localize(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([":\u241F992a9a6a193a56c5b8846dc972c5e1977ee5f1aa\u241F8553228906889869186: Map "])));
    }
    var i18n_2;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_7787942140742011951$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_FILTERS_DISPLAY_COMPONENT_TS_2 = goog.getMsg(" List ");
      i18n_2 = MSG_EXTERNAL_7787942140742011951$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_FILTERS_DISPLAY_COMPONENT_TS_2;
    } else {
      i18n_2 = $localize(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([":\u241F4b286e90831dd637c5cd3eb20544664ee7112669\u241F7787942140742011951: List "])));
    }
    var i18n_3;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_7211304359187007121$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_FILTERS_DISPLAY_COMPONENT_TS_3 = goog.getMsg(" Min. {$interpolation} People ", {
        "interpolation": "\uFFFD0\uFFFD"
      }, {
        original_code: {
          "interpolation": "{{ (options | async)?.capcaity || 2 }}"
        }
      });
      i18n_3 = MSG_EXTERNAL_7211304359187007121$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_FILTERS_DISPLAY_COMPONENT_TS_3;
    } else {
      i18n_3 = $localize(_templateObject4 || (_templateObject4 = _taggedTemplateLiteral([":\u241Fe1bcafb95323d9492bfdfa190a129131e6255cdb\u241F7211304359187007121: Min. ", ":INTERPOLATION: People "])), "\uFFFD0\uFFFD");
    }
    return [i18n_0, i18n_1, i18n_2, i18n_3, ["actions", "", 1, "sm:hidden", "space-x-2", "flex", "items-center", "p-2"], ["matRipple", "", "filters", "", 1, "flex-1", "w-1/2", 3, "click"], [1, "flex", "items-center"], ["matRipple", "", "map", "", 1, "rounded-l", "rounded-r-none", 3, "click"], ["matRipple", "", "list", "", 1, "rounded-r", "rounded-l-none", 3, "click"], ["filters", "", 1, "flex", "items-center", "flex-wrap", "p-2", "w-[35rem]", "max-w-full", "sm:max-w-[35rem]"], ["filter-item", "", "zone", "", 4, "ngIf"], ["filter-item", "", "date", ""], ["filter-item", "", "time", ""], ["filter-item", "", "count", ""], ["filter-item", "", 4, "ngFor", "ngForOf"], ["filter-item", "", "zone", ""], ["filter-item", ""], ["icon", "", "matRipple", "", 1, "-mr-4", 3, "click"]];
  },
  template: function ParkingSpaceFiltersDisplayComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵelementStart(0, "section", 4)(1, "button", 5);
      i0.ɵɵlistener("click", function ParkingSpaceFiltersDisplayComponent_Template_button_click_1_listener() {
        return ctx.editFilters();
      });
      i0.ɵɵi18n(2, 0);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(3, "div", 6)(4, "button", 7);
      i0.ɵɵlistener("click", function ParkingSpaceFiltersDisplayComponent_Template_button_click_4_listener() {
        ctx.view = "map";
        return ctx.viewChange.emit(ctx.view);
      });
      i0.ɵɵi18n(5, 1);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(6, "button", 8);
      i0.ɵɵlistener("click", function ParkingSpaceFiltersDisplayComponent_Template_button_click_6_listener() {
        ctx.view = "list";
        return ctx.viewChange.emit(ctx.view);
      });
      i0.ɵɵi18n(7, 2);
      i0.ɵɵelementEnd()()();
      i0.ɵɵelementStart(8, "section", 9);
      i0.ɵɵtemplate(9, ParkingSpaceFiltersDisplayComponent_div_9_Template, 2, 1, "div", 10);
      i0.ɵɵelementStart(10, "div", 11);
      i0.ɵɵtext(11);
      i0.ɵɵpipe(12, "date");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(13, "div", 12);
      i0.ɵɵtext(14);
      i0.ɵɵpipe(15, "date");
      i0.ɵɵpipe(16, "date");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(17, "div", 13);
      i0.ɵɵi18n(18, 3);
      i0.ɵɵpipe(19, "async");
      i0.ɵɵelementEnd();
      i0.ɵɵtemplate(20, ParkingSpaceFiltersDisplayComponent_div_20_Template, 6, 1, "div", 14);
      i0.ɵɵpipe(21, "async");
      i0.ɵɵelementEnd();
    }
    if (rf & 2) {
      var tmp_5_0;
      var tmp_7_0;
      i0.ɵɵadvance(4);
      i0.ɵɵclassProp("inverse", ctx.view !== "map");
      i0.ɵɵadvance(2);
      i0.ɵɵclassProp("inverse", ctx.view !== "list");
      i0.ɵɵadvance(3);
      i0.ɵɵproperty("ngIf", ctx.location);
      i0.ɵɵadvance(2);
      i0.ɵɵtextInterpolate1(" ", i0.ɵɵpipeBind2(12, 10, ctx.start, "mediumDate"), " ");
      i0.ɵɵadvance(3);
      i0.ɵɵtextInterpolate2(" ", i0.ɵɵpipeBind2(15, 13, ctx.start, ctx.time_format), " \u2014 ", i0.ɵɵpipeBind2(16, 16, ctx.end, ctx.time_format), " ");
      i0.ɵɵadvance(5);
      i0.ɵɵi18nExp(((tmp_5_0 = i0.ɵɵpipeBind1(19, 19, ctx.options)) == null ? null : tmp_5_0.capcaity) || 2);
      i0.ɵɵi18nApply(18);
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngForOf", (tmp_7_0 = i0.ɵɵpipeBind1(21, 21, ctx.options)) == null ? null : tmp_7_0.features);
    }
  },
  dependencies: [i5.NgForOf, i5.NgIf, i6.IconComponent, i7.MatRipple, i5.AsyncPipe, i5.DatePipe],
  styles: ["[filter-item][_ngcontent-%COMP%] {\n                display: flex;\n                align-items: center;\n                padding: 0 1rem;\n                height: 2rem;\n                font-size: 0.875rem;\n                border: 1px solid rgba(0, 0, 0, 0.2);\n                border-radius: 1.25rem;\n                margin-right: 0.5rem;\n                margin-bottom: 0.5rem;\n            }\n\n            [filter-item][_ngcontent-%COMP%]:hover {\n                background: rgba(0, 0, 0, 0.1);\n            }\n\n            [filter-item][_ngcontent-%COMP%]    > *[_ngcontent-%COMP%]    + *[_ngcontent-%COMP%] {\n                margin-left: 0.5rem;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBhcmtpbmctZmlsdGVycy1kaXNwbGF5LmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1lBQ1k7Z0JBQ0ksYUFBYTtnQkFDYixtQkFBbUI7Z0JBQ25CLGVBQWU7Z0JBQ2YsWUFBWTtnQkFDWixtQkFBbUI7Z0JBQ25CLG9DQUFvQztnQkFDcEMsc0JBQXNCO2dCQUN0QixvQkFBb0I7Z0JBQ3BCLHFCQUFxQjtZQUN6Qjs7WUFFQTtnQkFDSSw4QkFBOEI7WUFDbEM7O1lBRUE7Z0JBQ0ksbUJBQW1CO1lBQ3ZCIiwiZmlsZSI6InBhcmtpbmctZmlsdGVycy1kaXNwbGF5LmNvbXBvbmVudC50cyIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgW2ZpbHRlci1pdGVtXSB7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICAgICAgICAgIHBhZGRpbmc6IDAgMXJlbTtcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDJyZW07XG4gICAgICAgICAgICAgICAgZm9udC1zaXplOiAwLjg3NXJlbTtcbiAgICAgICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCByZ2JhKDAsIDAsIDAsIDAuMik7XG4gICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMS4yNXJlbTtcbiAgICAgICAgICAgICAgICBtYXJnaW4tcmlnaHQ6IDAuNXJlbTtcbiAgICAgICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAwLjVyZW07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIFtmaWx0ZXItaXRlbV06aG92ZXIge1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IHJnYmEoMCwgMCwgMCwgMC4xKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgW2ZpbHRlci1pdGVtXSA+ICogKyAqIHtcbiAgICAgICAgICAgICAgICBtYXJnaW4tbGVmdDogMC41cmVtO1xuICAgICAgICAgICAgfVxuICAgICAgICAiXX0= */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvYm9va2luZ3Mvc3JjL2xpYi9wYXJraW5nLXNlbGVjdC1tb2RhbC9wYXJraW5nLWZpbHRlcnMtZGlzcGxheS5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLGFBQWE7Z0JBQ2IsbUJBQW1CO2dCQUNuQixlQUFlO2dCQUNmLFlBQVk7Z0JBQ1osbUJBQW1CO2dCQUNuQixvQ0FBb0M7Z0JBQ3BDLHNCQUFzQjtnQkFDdEIsb0JBQW9CO2dCQUNwQixxQkFBcUI7WUFDekI7O1lBRUE7Z0JBQ0ksOEJBQThCO1lBQ2xDOztZQUVBO2dCQUNJLG1CQUFtQjtZQUN2Qjs7QUFFWiw0d0NBQTR3QyIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgW2ZpbHRlci1pdGVtXSB7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICAgICAgICAgIHBhZGRpbmc6IDAgMXJlbTtcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDJyZW07XG4gICAgICAgICAgICAgICAgZm9udC1zaXplOiAwLjg3NXJlbTtcbiAgICAgICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCByZ2JhKDAsIDAsIDAsIDAuMik7XG4gICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMS4yNXJlbTtcbiAgICAgICAgICAgICAgICBtYXJnaW4tcmlnaHQ6IDAuNXJlbTtcbiAgICAgICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAwLjVyZW07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIFtmaWx0ZXItaXRlbV06aG92ZXIge1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IHJnYmEoMCwgMCwgMCwgMC4xKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgW2ZpbHRlci1pdGVtXSA+ICogKyAqIHtcbiAgICAgICAgICAgICAgICBtYXJnaW4tbGVmdDogMC41cmVtO1xuICAgICAgICAgICAgfVxuICAgICAgICAiXSwic291cmNlUm9vdCI6IiJ9 */"]
});
exports.ParkingSpaceFiltersDisplayComponent = ParkingSpaceFiltersDisplayComponent;

/***/ }),

/***/ 39145:
/*!*********************************************************************************!*\
  !*** ./libs/bookings/src/lib/parking-select-modal/parking-filters.component.ts ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _taggedTemplateLiteral = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js */ 9959)["default"]);
var _regeneratorRuntime = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/regeneratorRuntime.js */ 8698)["default"]);
var _asyncToGenerator = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/asyncToGenerator.js */ 95386)["default"]);
var _createForOfIteratorHelper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createForOfIteratorHelper.js */ 36350)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _ParkingSpaceFiltersComponent, _templateObject, _templateObject2, _templateObject3, _templateObject4, _templateObject5, _templateObject6, _templateObject7, _templateObject8, _templateObject9, _templateObject10, _templateObject11, _templateObject12, _templateObject13;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.ParkingSpaceFiltersComponent = void 0;
var bottom_sheet_1 = __webpack_require__(/*! @angular/material/bottom-sheet */ 15244);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var organisation_1 = __webpack_require__(/*! @placeos/organisation */ 2510);
var operators_1 = __webpack_require__(/*! rxjs/operators */ 97303);
var booking_form_service_1 = __webpack_require__(/*! ../booking-form.service */ 18379);
var date_fns_1 = __webpack_require__(/*! date-fns */ 25773);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @angular/material/bottom-sheet */ 15244);
var i2 = __webpack_require__(/*! @placeos/common */ 22797);
var i3 = __webpack_require__(/*! ../booking-form.service */ 18379);
var i4 = __webpack_require__(/*! @placeos/organisation */ 2510);
var i5 = __webpack_require__(/*! @angular/common */ 60316);
var i6 = __webpack_require__(/*! @angular/forms */ 34456);
var i7 = __webpack_require__(/*! @angular/material/form-field */ 24950);
var i8 = __webpack_require__(/*! @angular/material/checkbox */ 97024);
var i9 = __webpack_require__(/*! @angular/material/core */ 74646);
var i10 = __webpack_require__(/*! ../../../../form-fields/src/lib/date-field.component */ 19608);
var i11 = __webpack_require__(/*! ../../../../form-fields/src/lib/duration-field.component */ 83476);
var i12 = __webpack_require__(/*! ../../../../form-fields/src/lib/time-field.component */ 81413);
var i13 = __webpack_require__(/*! ../../../../components/src/lib/icon.component */ 69434);
var i14 = __webpack_require__(/*! @angular/material/select */ 25175);
var _c0 = function _c0() {
  return {
    standalone: true
  };
};
function ParkingSpaceFiltersComponent_button_2_Template(rf, ctx) {
  if (rf & 1) {
    var _r1 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "button", 31);
    i0.ɵɵlistener("click", function ParkingSpaceFiltersComponent_button_2_Template_button_click_0_listener() {
      i0.ɵɵrestoreView(_r1);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.close());
    });
    i0.ɵɵelementStart(1, "app-icon");
    i0.ɵɵtext(2, "keyboard_arrow_left");
    i0.ɵɵelementEnd()();
  }
}
function ParkingSpaceFiltersComponent_ng_container_13_mat_form_field_1_mat_option_5_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "mat-option", 36);
    i0.ɵɵtext(1);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var bld_r4 = ctx.$implicit;
    i0.ɵɵproperty("value", bld_r4);
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", bld_r4.display_name || bld_r4.name, " ");
  }
}
function ParkingSpaceFiltersComponent_ng_container_13_mat_form_field_1_Template(rf, ctx) {
  if (rf & 1) {
    var _r3 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "mat-form-field", 33)(1, "mat-select", 34);
    i0.ɵɵpipe(2, "async");
    i0.ɵɵpipe(3, "async");
    i0.ɵɵpipe(4, "async");
    i0.ɵɵlistener("ngModelChange", function ParkingSpaceFiltersComponent_ng_container_13_mat_form_field_1_Template_mat_select_ngModelChange_1_listener($event) {
      i0.ɵɵrestoreView(_r3);
      var ctx_r1 = i0.ɵɵnextContext(2);
      return i0.ɵɵresetView(ctx_r1.setBuilding($event));
    });
    i0.ɵɵtemplate(5, ParkingSpaceFiltersComponent_ng_container_13_mat_form_field_1_mat_option_5_Template, 2, 2, "mat-option", 35);
    i0.ɵɵpipe(6, "async");
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var tmp_4_0;
    var ctx_r1 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngModel", i0.ɵɵpipeBind1(2, 4, ctx_r1.building))("ngModelOptions", i0.ɵɵpureFunction0(12, _c0))("placeholder", ((tmp_4_0 = i0.ɵɵpipeBind1(3, 6, ctx_r1.building)) == null ? null : tmp_4_0.display_name) || ((tmp_4_0 = i0.ɵɵpipeBind1(4, 8, ctx_r1.building)) == null ? null : tmp_4_0.name));
    i0.ɵɵadvance(4);
    i0.ɵɵproperty("ngForOf", i0.ɵɵpipeBind1(6, 10, ctx_r1.buildings));
  }
}
function ParkingSpaceFiltersComponent_ng_container_13_mat_form_field_3_mat_option_3_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "mat-option", 36);
    i0.ɵɵtext(1);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var lvl_r6 = ctx.$implicit;
    i0.ɵɵproperty("value", lvl_r6.id);
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", lvl_r6.display_name || lvl_r6.name, " ");
  }
}
function ParkingSpaceFiltersComponent_ng_container_13_mat_form_field_3_Template(rf, ctx) {
  if (rf & 1) {
    var _r5 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "mat-form-field", 33)(1, "mat-select", 37);
    i0.ɵɵpipe(2, "async");
    i0.ɵɵlistener("ngModelChange", function ParkingSpaceFiltersComponent_ng_container_13_mat_form_field_3_Template_mat_select_ngModelChange_1_listener($event) {
      i0.ɵɵrestoreView(_r5);
      var ctx_r1 = i0.ɵɵnextContext(2);
      return i0.ɵɵresetView(ctx_r1.setOptions({
        zone_id: $event
      }));
    });
    i0.ɵɵtemplate(3, ParkingSpaceFiltersComponent_ng_container_13_mat_form_field_3_mat_option_3_Template, 2, 2, "mat-option", 35);
    i0.ɵɵpipe(4, "async");
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var tmp_2_0;
    var ctx_r1 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngModel", (tmp_2_0 = i0.ɵɵpipeBind1(2, 3, ctx_r1.options)) == null ? null : tmp_2_0.zone_id)("ngModelOptions", i0.ɵɵpureFunction0(7, _c0));
    i0.ɵɵadvance(2);
    i0.ɵɵproperty("ngForOf", i0.ɵɵpipeBind1(4, 5, ctx_r1.levels));
  }
}
function ParkingSpaceFiltersComponent_ng_container_13_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵtemplate(1, ParkingSpaceFiltersComponent_ng_container_13_mat_form_field_1_Template, 7, 13, "mat-form-field", 32);
    i0.ɵɵpipe(2, "async");
    i0.ɵɵtemplate(3, ParkingSpaceFiltersComponent_ng_container_13_mat_form_field_3_Template, 5, 8, "mat-form-field", 32);
    i0.ɵɵelementContainerEnd();
  }
  if (rf & 2) {
    var tmp_1_0;
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", ((tmp_1_0 = i0.ɵɵpipeBind1(2, 2, ctx_r1.buildings)) == null ? null : tmp_1_0.length) > 1);
    i0.ɵɵadvance(2);
    i0.ɵɵproperty("ngIf", !ctx_r1.hide_levels);
  }
}
function ParkingSpaceFiltersComponent_ng_container_14_mat_form_field_1_mat_option_2_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "mat-option", 36);
    i0.ɵɵtext(1);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var reg_r8 = ctx.$implicit;
    i0.ɵɵproperty("value", reg_r8);
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", reg_r8.display_name || reg_r8.name, " ");
  }
}
function ParkingSpaceFiltersComponent_ng_container_14_mat_form_field_1_Template(rf, ctx) {
  if (rf & 1) {
    var _r7 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "mat-form-field", 33)(1, "mat-select", 38);
    i0.ɵɵlistener("ngModelChange", function ParkingSpaceFiltersComponent_ng_container_14_mat_form_field_1_Template_mat_select_ngModelChange_1_listener($event) {
      i0.ɵɵrestoreView(_r7);
      var ctx_r1 = i0.ɵɵnextContext(2);
      return i0.ɵɵresetView(ctx_r1.setRegion($event));
    });
    i0.ɵɵtemplate(2, ParkingSpaceFiltersComponent_ng_container_14_mat_form_field_1_mat_option_2_Template, 2, 2, "mat-option", 35);
    i0.ɵɵpipe(3, "async");
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngModel", ctx_r1.region)("ngModelOptions", i0.ɵɵpureFunction0(5, _c0));
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngForOf", i0.ɵɵpipeBind1(3, 3, ctx_r1.regions));
  }
}
function ParkingSpaceFiltersComponent_ng_container_14_mat_form_field_3_mat_optgroup_5_mat_option_1_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "mat-option", 36);
    i0.ɵɵtext(1);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var level_r10 = ctx.$implicit;
    i0.ɵɵproperty("value", level_r10.id);
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", level_r10.display_name || level_r10.name, " ");
  }
}
function ParkingSpaceFiltersComponent_ng_container_14_mat_form_field_3_mat_optgroup_5_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "mat-optgroup", 41);
    i0.ɵɵtemplate(1, ParkingSpaceFiltersComponent_ng_container_14_mat_form_field_3_mat_optgroup_5_mat_option_1_Template, 2, 2, "mat-option", 35);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var bld_r11 = ctx.$implicit;
    i0.ɵɵproperty("label", bld_r11.name);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngForOf", bld_r11.levels);
  }
}
function ParkingSpaceFiltersComponent_ng_container_14_mat_form_field_3_Template(rf, ctx) {
  if (rf & 1) {
    var _r9 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "mat-form-field", 33)(1, "mat-select", 39);
    i0.ɵɵpipe(2, "async");
    i0.ɵɵlistener("ngModelChange", function ParkingSpaceFiltersComponent_ng_container_14_mat_form_field_3_Template_mat_select_ngModelChange_1_listener($event) {
      i0.ɵɵrestoreView(_r9);
      var ctx_r1 = i0.ɵɵnextContext(2);
      return i0.ɵɵresetView(ctx_r1.setOptions({
        zone_id: $event
      }));
    });
    i0.ɵɵelementStart(3, "mat-option", 36);
    i0.ɵɵtext(4, "Any Level");
    i0.ɵɵelementEnd();
    i0.ɵɵtemplate(5, ParkingSpaceFiltersComponent_ng_container_14_mat_form_field_3_mat_optgroup_5_Template, 2, 2, "mat-optgroup", 40);
    i0.ɵɵpipe(6, "async");
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var tmp_2_0;
    var ctx_r1 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngModel", (tmp_2_0 = i0.ɵɵpipeBind1(2, 3, ctx_r1.options)) == null ? null : tmp_2_0.zone_id)("ngModelOptions", i0.ɵɵpureFunction0(7, _c0));
    i0.ɵɵadvance(4);
    i0.ɵɵproperty("ngForOf", i0.ɵɵpipeBind1(6, 5, ctx_r1.region_levels));
  }
}
function ParkingSpaceFiltersComponent_ng_container_14_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵtemplate(1, ParkingSpaceFiltersComponent_ng_container_14_mat_form_field_1_Template, 4, 6, "mat-form-field", 32);
    i0.ɵɵpipe(2, "async");
    i0.ɵɵtemplate(3, ParkingSpaceFiltersComponent_ng_container_14_mat_form_field_3_Template, 7, 8, "mat-form-field", 32);
    i0.ɵɵelementContainerEnd();
  }
  if (rf & 2) {
    var tmp_1_0;
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", (tmp_1_0 = i0.ɵɵpipeBind1(2, 2, ctx_r1.regions)) == null ? null : tmp_1_0.length);
    i0.ɵɵadvance(2);
    i0.ɵɵproperty("ngIf", !ctx_r1.hide_levels);
  }
}
function ParkingSpaceFiltersComponent_div_21_Template(rf, ctx) {
  if (rf & 1) {
    var _r12 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 42)(1, "div", 43)(2, "label", 44);
    i0.ɵɵi18nStart(3, 6);
    i0.ɵɵelement(4, "span");
    i0.ɵɵi18nEnd();
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(5, "a-time-field", 45);
    i0.ɵɵlistener("ngModelChange", function ParkingSpaceFiltersComponent_div_21_Template_a_time_field_ngModelChange_5_listener($event) {
      i0.ɵɵrestoreView(_r12);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.form.patchValue({
        date: $event
      }));
    });
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(6, "div", 43)(7, "label", 46);
    i0.ɵɵi18nStart(8, 7);
    i0.ɵɵelement(9, "span");
    i0.ɵɵi18nEnd();
    i0.ɵɵelementEnd();
    i0.ɵɵelement(10, "a-duration-field", 47);
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance(5);
    i0.ɵɵproperty("ngModel", ctx_r1.form.value.date)("ngModelOptions", i0.ɵɵpureFunction0(6, _c0))("use_24hr", ctx_r1.use_24hr);
    i0.ɵɵadvance(5);
    i0.ɵɵproperty("time", ctx_r1.form == null ? null : ctx_r1.form.value == null ? null : ctx_r1.form.value.date)("max", ctx_r1.max_duration)("use_24hr", ctx_r1.use_24hr);
  }
}
function ParkingSpaceFiltersComponent_section_30_div_3_Template(rf, ctx) {
  if (rf & 1) {
    var _r13 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 26)(1, "div", 50);
    i0.ɵɵtext(2);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(3, "mat-checkbox", 51);
    i0.ɵɵpipe(4, "async");
    i0.ɵɵlistener("ngModelChange", function ParkingSpaceFiltersComponent_section_30_div_3_Template_mat_checkbox_ngModelChange_3_listener($event) {
      var feat_r14 = i0.ɵɵrestoreView(_r13).$implicit;
      var ctx_r1 = i0.ɵɵnextContext(2);
      return i0.ɵɵresetView(ctx_r1.toggleFeature(feat_r14, $event));
    });
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var tmp_4_0;
    var feat_r14 = ctx.$implicit;
    var ctx_r1 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate(feat_r14);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngModel", (tmp_4_0 = i0.ɵɵpipeBind1(4, 3, ctx_r1.options)) == null ? null : tmp_4_0.features == null ? null : tmp_4_0.features.includes(feat_r14))("ngModelOptions", i0.ɵɵpureFunction0(5, _c0));
  }
}
function ParkingSpaceFiltersComponent_section_30_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "section", 48)(1, "h2", 17);
    i0.ɵɵi18n(2, 8);
    i0.ɵɵelementEnd();
    i0.ɵɵtemplate(3, ParkingSpaceFiltersComponent_section_30_div_3_Template, 5, 6, "div", 49);
    i0.ɵɵpipe(4, "async");
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance(3);
    i0.ɵɵproperty("ngForOf", i0.ɵɵpipeBind1(4, 1, ctx_r1.features));
  }
}
function ParkingSpaceFiltersComponent_div_32_Template(rf, ctx) {
  if (rf & 1) {
    var _r15 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 52)(1, "button", 53);
    i0.ɵɵlistener("click", function ParkingSpaceFiltersComponent_div_32_Template_button_click_1_listener() {
      i0.ɵɵrestoreView(_r15);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.close());
    });
    i0.ɵɵi18n(2, 9);
    i0.ɵɵelementEnd()();
  }
}
var ParkingSpaceFiltersComponent = /*#__PURE__*/function () {
  function ParkingSpaceFiltersComponent(_bsheet_ref, _settings, _form, _org) {
    var _this = this;
    _classCallCheck(this, ParkingSpaceFiltersComponent);
    this._bsheet_ref = _bsheet_ref;
    this._settings = _settings;
    this._form = _form;
    this._org = _org;
    this.can_close = false;
    this.options = this._form.options;
    this.levels = this._org.active_levels.pipe((0, operators_1.map)(function (l) {
      var _iterator = _createForOfIteratorHelper(l),
        _step;
      try {
        var _loop = function _loop() {
          var lvl = _step.value;
          var bld = _this._org.buildings.find(function (_) {
            return _.id === lvl.parent_id;
          });
          lvl.bld = (bld === null || bld === void 0 ? void 0 : bld.display_name) || (bld === null || bld === void 0 ? void 0 : bld.name) || '';
        };
        for (_iterator.s(); !(_step = _iterator.n()).done;) {
          _loop();
        }
      } catch (err) {
        _iterator.e(err);
      } finally {
        _iterator.f();
      }
      return l.filter(function (_) {
        return _.tags.includes('parking');
      });
    }));
    this.buildings = this._org.active_buildings;
    this.regions = this._org.region_list;
    this.region_levels = this._org.active_region.pipe((0, operators_1.map)(function (_) {
      var region_buildings = _this._org.buildings.filter(function (b) {
        return !_ || b.parent_id === _.id;
      });
      var region_levels = region_buildings.map(function (b) {
        return {
          id: b.id,
          name: b.display_name || b.name,
          levels: _this._org.levels.filter(function (l) {
            return l.parent_id === b.id && l.tags.includes('parking');
          })
        };
      });
      return region_levels.filter(function (_) {
        return _.levels.length;
      });
    }));
    this.features = this._form.features;
    this.close = function () {
      return _this._bsheet_ref.dismiss();
    };
    this.setOptions = function (o) {
      return _this._form.setOptions(o);
    };
    this.setRegion = function (r) {
      return _this._org.region = r;
    };
    this.can_close = !!this._bsheet_ref;
  }
  return _createClass(ParkingSpaceFiltersComponent, [{
    key: "setBuilding",
    value: function setBuilding(bld) {
      this._org.building = bld;
    }
  }, {
    key: "bld",
    get: function get() {
      return this._org.building;
    }
  }, {
    key: "form",
    get: function get() {
      return this._form.form;
    }
  }, {
    key: "end_date",
    get: function get() {
      return (0, date_fns_1.endOfDay)((0, date_fns_1.addDays)(Date.now(), this._settings.get('app.parking.available_period') || 7));
    }
  }, {
    key: "max_duration",
    get: function get() {
      return this._settings.get('app.events.max_duration') || 480;
    }
  }, {
    key: "use_24hr",
    get: function get() {
      return this._settings.get('app.use_24_hour_time');
    }
  }, {
    key: "use_region",
    get: function get() {
      return !!this._settings.get('app.use_region');
    }
  }, {
    key: "toggleFeature",
    value: function () {
      var _toggleFeature = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(feat, state) {
        var _yield$this$options$p, features, new_list;
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              _context.next = 2;
              return this.options.pipe((0, operators_1.take)(1)).toPromise();
            case 2:
              _yield$this$options$p = _context.sent;
              features = _yield$this$options$p.features;
              new_list = (features || []).filter(function (_) {
                return feat !== _;
              });
              if (state) new_list.push(feat);
              this.setOptions({
                features: new_list
              });
            case 7:
            case "end":
              return _context.stop();
          }
        }, _callee, this);
      }));
      function toggleFeature(_x, _x2) {
        return _toggleFeature.apply(this, arguments);
      }
      return toggleFeature;
    }()
  }]);
}();
_ParkingSpaceFiltersComponent = ParkingSpaceFiltersComponent;
_ParkingSpaceFiltersComponent.ɵfac = function ParkingSpaceFiltersComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _ParkingSpaceFiltersComponent)(i0.ɵɵdirectiveInject(i1.MatBottomSheetRef, 8), i0.ɵɵdirectiveInject(i2.SettingsService), i0.ɵɵdirectiveInject(i3.BookingFormService), i0.ɵɵdirectiveInject(i4.OrganisationService));
};
_ParkingSpaceFiltersComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _ParkingSpaceFiltersComponent,
  selectors: [["parking-space-filters"]],
  inputs: {
    hide_levels: "hide_levels"
  },
  decls: 33,
  vars: 18,
  consts: function consts() {
    var i18n_0;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_7173310086383878456$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_FILTERS_COMPONENT_TS_0 = goog.getMsg("Space Filters");
      i18n_0 = MSG_EXTERNAL_7173310086383878456$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_FILTERS_COMPONENT_TS_0;
    } else {
      i18n_0 = $localize(_templateObject || (_templateObject = _taggedTemplateLiteral([":\u241F36173168a4643aa78634e9242a63f3a40862f166\u241F7173310086383878456:Space Filters"])));
    }
    var i18n_1;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_5028777105388019087$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_FILTERS_COMPONENT_TS_1 = goog.getMsg("Details");
      i18n_1 = MSG_EXTERNAL_5028777105388019087$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_FILTERS_COMPONENT_TS_1;
    } else {
      i18n_1 = $localize(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([":\u241F4f8b2bb476981727ab34ed40fde1218361f92c45\u241F5028777105388019087:Details"])));
    }
    var i18n_2;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_471816275243265264$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_FILTERS_COMPONENT_TS_2 = goog.getMsg("Location");
      i18n_2 = MSG_EXTERNAL_471816275243265264$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_FILTERS_COMPONENT_TS_2;
    } else {
      i18n_2 = $localize(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([":\u241Fed31c09fd77c36238c13d83635f3fe5294c733d2\u241F471816275243265264:Location"])));
    }
    var i18n_3;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_3158758063619980932$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_FILTERS_COMPONENT_TS_3 = goog.getMsg("Date{$startTagSpan}*{$closeTagSpan}", {
        "closeTagSpan": "\uFFFD/#18\uFFFD",
        "startTagSpan": "\uFFFD#18\uFFFD"
      }, {
        original_code: {
          "closeTagSpan": "</span>",
          "startTagSpan": "<span>"
        }
      });
      i18n_3 = MSG_EXTERNAL_3158758063619980932$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_FILTERS_COMPONENT_TS_3;
    } else {
      i18n_3 = $localize(_templateObject4 || (_templateObject4 = _taggedTemplateLiteral([":\u241F04cfb5fd033651743bc4b9408bd52ba4ee894070\u241F3158758063619980932:Date", ":START_TAG_SPAN:*", ":CLOSE_TAG_SPAN:"])), "\uFFFD#18\uFFFD", "\uFFFD/#18\uFFFD");
    }
    var i18n_4;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_4158925728608139729$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_FILTERS_COMPONENT_TS_4 = goog.getMsg("Favourites");
      i18n_4 = MSG_EXTERNAL_4158925728608139729$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_FILTERS_COMPONENT_TS_4;
    } else {
      i18n_4 = $localize(_templateObject5 || (_templateObject5 = _taggedTemplateLiteral([":\u241F62ab0c2bf8d16ce7baf2c8b1da2c561d99522256\u241F4158925728608139729:Favourites"])));
    }
    var i18n_5;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_165958440274527719$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_FILTERS_COMPONENT_TS_5 = goog.getMsg(" Only show favourite spaces ");
      i18n_5 = MSG_EXTERNAL_165958440274527719$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_FILTERS_COMPONENT_TS_5;
    } else {
      i18n_5 = $localize(_templateObject6 || (_templateObject6 = _taggedTemplateLiteral([":\u241Fac378c0b437746af89a84b4909ab5b83c5ff55a3\u241F165958440274527719: Only show favourite spaces "])));
    }
    var i18n_6;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_7323982518822503502$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_FILTERS_COMPONENT_TS_6 = goog.getMsg("Any Level");
      i18n_6 = MSG_EXTERNAL_7323982518822503502$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_FILTERS_COMPONENT_TS_6;
    } else {
      i18n_6 = $localize(_templateObject7 || (_templateObject7 = _taggedTemplateLiteral([":\u241F50407595967bf29832e873b41f9de3502d5c3e03\u241F7323982518822503502:Any Level"])));
    }
    var i18n_7;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_8264413387051126615$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_FILTERS_COMPONENT_TS_7 = goog.getMsg("Any Region");
      i18n_7 = MSG_EXTERNAL_8264413387051126615$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_FILTERS_COMPONENT_TS_7;
    } else {
      i18n_7 = $localize(_templateObject8 || (_templateObject8 = _taggedTemplateLiteral([":\u241F130845b58eba8e50c98f3fba117a0168cdba4f31\u241F8264413387051126615:Any Region"])));
    }
    var i18n_8;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_7323982518822503502$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_FILTERS_COMPONENT_TS_8 = goog.getMsg("Any Level");
      i18n_8 = MSG_EXTERNAL_7323982518822503502$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_FILTERS_COMPONENT_TS_8;
    } else {
      i18n_8 = $localize(_templateObject9 || (_templateObject9 = _taggedTemplateLiteral([":\u241F50407595967bf29832e873b41f9de3502d5c3e03\u241F7323982518822503502:Any Level"])));
    }
    var i18n_9;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_3039786638368843634$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_FILTERS_COMPONENT_TS_9 = goog.getMsg("Start Time{$startTagSpan}*{$closeTagSpan}", {
        "closeTagSpan": "\uFFFD/#4\uFFFD",
        "startTagSpan": "\uFFFD#4\uFFFD"
      }, {
        original_code: {
          "closeTagSpan": "</span>",
          "startTagSpan": "<span>"
        }
      });
      i18n_9 = MSG_EXTERNAL_3039786638368843634$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_FILTERS_COMPONENT_TS_9;
    } else {
      i18n_9 = $localize(_templateObject10 || (_templateObject10 = _taggedTemplateLiteral([":\u241F34a7595cdc15925514038224946986bfd90dc0ed\u241F3039786638368843634:Start Time", ":START_TAG_SPAN:*", ":CLOSE_TAG_SPAN:"])), "\uFFFD#4\uFFFD", "\uFFFD/#4\uFFFD");
    }
    var i18n_10;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_5960185837188220843$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_FILTERS_COMPONENT_TS_10 = goog.getMsg("End Time{$startTagSpan}*{$closeTagSpan}", {
        "closeTagSpan": "\uFFFD/#9\uFFFD",
        "startTagSpan": "\uFFFD#9\uFFFD"
      }, {
        original_code: {
          "closeTagSpan": "</span>",
          "startTagSpan": "<span>"
        }
      });
      i18n_10 = MSG_EXTERNAL_5960185837188220843$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_FILTERS_COMPONENT_TS_10;
    } else {
      i18n_10 = $localize(_templateObject11 || (_templateObject11 = _taggedTemplateLiteral([":\u241F85d5c3a89bab9a7475a7db095089e161586cb7a1\u241F5960185837188220843:End Time", ":START_TAG_SPAN:*", ":CLOSE_TAG_SPAN:"])), "\uFFFD#9\uFFFD", "\uFFFD/#9\uFFFD");
    }
    var i18n_11;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_1551920764795208868$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_FILTERS_COMPONENT_TS_11 = goog.getMsg("Facilities");
      i18n_11 = MSG_EXTERNAL_1551920764795208868$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_FILTERS_COMPONENT_TS_11;
    } else {
      i18n_11 = $localize(_templateObject12 || (_templateObject12 = _taggedTemplateLiteral([":\u241Fbf10c600bd861cfd0a23f4759562ee0ae9dbe19f\u241F1551920764795208868:Facilities"])));
    }
    var i18n_12;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_2296888311792137027$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_FILTERS_COMPONENT_TS_12 = goog.getMsg(" Apply Filters ");
      i18n_12 = MSG_EXTERNAL_2296888311792137027$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_FILTERS_COMPONENT_TS_12;
    } else {
      i18n_12 = $localize(_templateObject13 || (_templateObject13 = _taggedTemplateLiteral([":\u241Fc17e2cc448524a39eb83b2937cea3235a2e8bf37\u241F2296888311792137027: Apply Filters "])));
    }
    return [i18n_0, i18n_1, i18n_2, i18n_3, i18n_4, i18n_5, i18n_9, i18n_10, i18n_11, i18n_12, [1, "flex", "items-center", "border-b", "border-base-200", "pb-2", "sm:hidden"], [1, "flex-1", "pl-2"], ["icon", "", "matRipple", "", "close", "", 3, "click", 4, "ngIf"], [1, "font-medium", "flex-2", "text-center"], [1, "flex-1"], [1, "max-h-[65vh]", "p-2", "overflow-y-auto", "overflow-x-hidden", "divide-y", "divide-base-200", "w-full", "max-w-[100vw]", 3, "formGroup"], ["details", ""], [1, "text-lg", "font-medium"], [1, "flex-1", "min-w-[256px]", "flex", "flex-col"], ["for", "location"], [4, "ngIf"], [1, "flex-1", "min-w-[256px]"], ["for", "date"], ["name", "date", 3, "ngModelChange", "ngModel", "ngModelOptions", "to"], ["class", "flex items-center space-x-2", 4, "ngIf"], ["favs", "", 1, "space-y-2", "pb-4"], [1, "flex", "items-center"], ["for", "fav", 1, "flex-1", "w-1/2"], ["name", "fav", 3, "ngModelChange", "ngModel", "ngModelOptions"], ["features", "", "class", "space-y-2", 4, "ngIf"], ["class", "px-2 pt-2 w-full border-t border-base-200", 4, "ngIf"], ["icon", "", "matRipple", "", "close", "", 3, "click"], ["appearance", "outline", "class", "w-full", 4, "ngIf"], ["appearance", "outline", 1, "w-full"], ["name", "building", 3, "ngModelChange", "ngModel", "ngModelOptions", "placeholder"], [3, "value", 4, "ngFor", "ngForOf"], [3, "value"], ["name", "location", "placeholder", i18n_6, 3, "ngModelChange", "ngModel", "ngModelOptions"], ["name", "region", "placeholder", i18n_7, 3, "ngModelChange", "ngModel", "ngModelOptions"], ["name", "location", "placeholder", i18n_8, 3, "ngModelChange", "ngModel", "ngModelOptions"], [3, "label", 4, "ngFor", "ngForOf"], [3, "label"], [1, "flex", "items-center", "space-x-2"], [1, "flex-1", "w-1/3"], ["for", "start-time"], ["name", "start-time", 3, "ngModelChange", "ngModel", "ngModelOptions", "use_24hr"], ["for", "end-time"], ["name", "end-time", "formControlName", "duration", 3, "time", "max", "use_24hr"], ["features", "", 1, "space-y-2"], ["class", "flex items-center", 4, "ngFor", "ngForOf"], ["for", "feat", 1, "flex-1", "w-1/2"], ["name", "feat", 3, "ngModelChange", "ngModel", "ngModelOptions"], [1, "px-2", "pt-2", "w-full", "border-t", "border-base-200"], ["btn", "", "matRipple", "", "close", "", 1, "w-full", 3, "click"]];
  },
  template: function ParkingSpaceFiltersComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵelementStart(0, "div", 10)(1, "div", 11);
      i0.ɵɵtemplate(2, ParkingSpaceFiltersComponent_button_2_Template, 3, 0, "button", 12);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(3, "h3", 13);
      i0.ɵɵi18n(4, 0);
      i0.ɵɵelementEnd();
      i0.ɵɵelement(5, "div", 14);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(6, "form", 15)(7, "section", 16)(8, "h2", 17);
      i0.ɵɵi18n(9, 1);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(10, "div", 18)(11, "label", 19);
      i0.ɵɵi18n(12, 2);
      i0.ɵɵelementEnd();
      i0.ɵɵtemplate(13, ParkingSpaceFiltersComponent_ng_container_13_Template, 4, 4, "ng-container", 20)(14, ParkingSpaceFiltersComponent_ng_container_14_Template, 4, 4, "ng-container", 20);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(15, "div", 21)(16, "label", 22);
      i0.ɵɵi18nStart(17, 3);
      i0.ɵɵelement(18, "span");
      i0.ɵɵi18nEnd();
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(19, "a-date-field", 23);
      i0.ɵɵlistener("ngModelChange", function ParkingSpaceFiltersComponent_Template_a_date_field_ngModelChange_19_listener($event) {
        return ctx.form.patchValue({
          date: $event
        });
      });
      i0.ɵɵtext(20, " Date and time must be in the future ");
      i0.ɵɵelementEnd()();
      i0.ɵɵtemplate(21, ParkingSpaceFiltersComponent_div_21_Template, 11, 7, "div", 24);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(22, "section", 25)(23, "h2", 17);
      i0.ɵɵi18n(24, 4);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(25, "div", 26)(26, "div", 27);
      i0.ɵɵi18n(27, 5);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(28, "mat-checkbox", 28);
      i0.ɵɵpipe(29, "async");
      i0.ɵɵlistener("ngModelChange", function ParkingSpaceFiltersComponent_Template_mat_checkbox_ngModelChange_28_listener($event) {
        return ctx.setOptions({
          show_fav: $event
        });
      });
      i0.ɵɵelementEnd()()();
      i0.ɵɵtemplate(30, ParkingSpaceFiltersComponent_section_30_Template, 5, 3, "section", 29);
      i0.ɵɵpipe(31, "async");
      i0.ɵɵelementEnd();
      i0.ɵɵtemplate(32, ParkingSpaceFiltersComponent_div_32_Template, 3, 0, "div", 30);
    }
    if (rf & 2) {
      var tmp_8_0;
      var tmp_10_0;
      i0.ɵɵadvance(2);
      i0.ɵɵproperty("ngIf", ctx.can_close);
      i0.ɵɵadvance(4);
      i0.ɵɵproperty("formGroup", ctx.form);
      i0.ɵɵadvance(7);
      i0.ɵɵproperty("ngIf", !ctx.use_region);
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", ctx.use_region);
      i0.ɵɵadvance(5);
      i0.ɵɵproperty("ngModel", ctx.form.value.date)("ngModelOptions", i0.ɵɵpureFunction0(16, _c0))("to", ctx.end_date);
      i0.ɵɵadvance(2);
      i0.ɵɵproperty("ngIf", false);
      i0.ɵɵadvance(7);
      i0.ɵɵproperty("ngModel", (tmp_8_0 = i0.ɵɵpipeBind1(29, 12, ctx.options)) == null ? null : tmp_8_0.show_fav)("ngModelOptions", i0.ɵɵpureFunction0(17, _c0));
      i0.ɵɵadvance(2);
      i0.ɵɵproperty("ngIf", (tmp_10_0 = i0.ɵɵpipeBind1(31, 14, ctx.features)) == null ? null : tmp_10_0.length);
      i0.ɵɵadvance(2);
      i0.ɵɵproperty("ngIf", ctx.can_close);
    }
  },
  dependencies: [i5.NgForOf, i5.NgIf, i6.ɵNgNoValidate, i6.NgControlStatus, i6.NgControlStatusGroup, i6.NgModel, i6.FormGroupDirective, i6.FormControlName, i7.MatFormField, i8.MatCheckbox, i9.MatOption, i9.MatOptgroup, i10.DateFieldComponent, i11.DurationFieldComponent, i12.TimeFieldComponent, i13.IconComponent, i14.MatSelect, i9.MatRipple, i5.AsyncPipe],
  styles: ["[_nghost-%COMP%] {\n                display: flex;\n                flex-direction: column;\n                width: 100%;\n                max-width: 100vw;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBhcmtpbmctZmlsdGVycy5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLGFBQWE7Z0JBQ2Isc0JBQXNCO2dCQUN0QixXQUFXO2dCQUNYLGdCQUFnQjtZQUNwQiIsImZpbGUiOiJwYXJraW5nLWZpbHRlcnMuY29tcG9uZW50LnRzIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICA6aG9zdCB7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgICAgIG1heC13aWR0aDogMTAwdnc7XG4gICAgICAgICAgICB9XG4gICAgICAgICJdfQ== */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvYm9va2luZ3Mvc3JjL2xpYi9wYXJraW5nLXNlbGVjdC1tb2RhbC9wYXJraW5nLWZpbHRlcnMuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxhQUFhO2dCQUNiLHNCQUFzQjtnQkFDdEIsV0FBVztnQkFDWCxnQkFBZ0I7WUFDcEI7O0FBRVosd2pCQUF3akIiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIDpob3N0IHtcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICAgICAgbWF4LXdpZHRoOiAxMDB2dztcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl0sInNvdXJjZVJvb3QiOiIifQ== */"]
});
exports.ParkingSpaceFiltersComponent = ParkingSpaceFiltersComponent;

/***/ }),

/***/ 30258:
/*!******************************************************************************!*\
  !*** ./libs/bookings/src/lib/parking-select-modal/parking-list.component.ts ***!
  \******************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _taggedTemplateLiteral = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js */ 9959)["default"]);
var _slicedToArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/slicedToArray.js */ 6282)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _ParkingSpaceListComponent, _templateObject, _templateObject2, _templateObject3, _templateObject4, _templateObject5;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.ParkingSpaceListComponent = void 0;
var core_1 = __webpack_require__(/*! @angular/core */ 37580);
var rxjs_1 = __webpack_require__(/*! rxjs */ 15681);
var operators_1 = __webpack_require__(/*! rxjs/operators */ 97303);
var booking_form_service_1 = __webpack_require__(/*! ../booking-form.service */ 18379);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! ../booking-form.service */ 18379);
var i2 = __webpack_require__(/*! @angular/common */ 60316);
var i3 = __webpack_require__(/*! @angular/material/progress-spinner */ 41134);
var i4 = __webpack_require__(/*! ../../../../components/src/lib/icon.component */ 69434);
var i5 = __webpack_require__(/*! ../../../../components/src/lib/authenticated-image.directive */ 93208);
var i6 = __webpack_require__(/*! @angular/material/core */ 74646);
function ParkingSpaceListComponent_ng_container_5_ul_1_li_1_div_3_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 24)(1, "app-icon");
    i0.ɵɵtext(2, "done");
    i0.ɵɵelementEnd()();
  }
}
function ParkingSpaceListComponent_ng_container_5_ul_1_li_1_img_4_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelement(0, "img", 25);
  }
  if (rf & 2) {
    var space_r2 = i0.ɵɵnextContext().$implicit;
    i0.ɵɵproperty("source", space_r2.images[0]);
  }
}
function ParkingSpaceListComponent_ng_container_5_ul_1_li_1_ng_template_5_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelement(0, "img", 26);
  }
}
function ParkingSpaceListComponent_ng_container_5_ul_1_li_1_Template(rf, ctx) {
  if (rf & 1) {
    var _r1 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "li", 14)(1, "button", 15);
    i0.ɵɵlistener("click", function ParkingSpaceListComponent_ng_container_5_ul_1_li_1_Template_button_click_1_listener() {
      var space_r2 = i0.ɵɵrestoreView(_r1).$implicit;
      var ctx_r2 = i0.ɵɵnextContext(3);
      return i0.ɵɵresetView(ctx_r2.selectSpace(space_r2));
    });
    i0.ɵɵelementStart(2, "div", 16);
    i0.ɵɵtemplate(3, ParkingSpaceListComponent_ng_container_5_ul_1_li_1_div_3_Template, 3, 0, "div", 17)(4, ParkingSpaceListComponent_ng_container_5_ul_1_li_1_img_4_Template, 1, 1, "img", 18)(5, ParkingSpaceListComponent_ng_container_5_ul_1_li_1_ng_template_5_Template, 1, 0, "ng-template", null, 2, i0.ɵɵtemplateRefExtractor);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(7, "div", 19)(8, "div", 20);
    i0.ɵɵtext(9);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(10, "div", 21)(11, "app-icon", 22);
    i0.ɵɵtext(12, "place");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(13, "p");
    i0.ɵɵtext(14);
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(15, "div", 21)(16, "app-icon", 22);
    i0.ɵɵtext(17, "people");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(18, "p");
    i0.ɵɵi18n(19, 5);
    i0.ɵɵelementEnd()()()();
    i0.ɵɵelementStart(20, "button", 23);
    i0.ɵɵlistener("click", function ParkingSpaceListComponent_ng_container_5_ul_1_li_1_Template_button_click_20_listener() {
      var space_r2 = i0.ɵɵrestoreView(_r1).$implicit;
      var ctx_r2 = i0.ɵɵnextContext(3);
      return i0.ɵɵresetView(ctx_r2.toggleFav.emit(space_r2));
    });
    i0.ɵɵelementStart(21, "app-icon");
    i0.ɵɵtext(22);
    i0.ɵɵelementEnd()()();
  }
  if (rf & 2) {
    var space_r2 = ctx.$implicit;
    var placeholder_r4 = i0.ɵɵreference(6);
    var ctx_r2 = i0.ɵɵnextContext(3);
    i0.ɵɵclassProp("!border-info", ctx_r2.active === space_r2.id);
    i0.ɵɵadvance(3);
    i0.ɵɵproperty("ngIf", ctx_r2.selected.includes(space_r2.id));
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", space_r2.images == null ? null : space_r2.images.length)("ngIfElse", placeholder_r4);
    i0.ɵɵadvance(5);
    i0.ɵɵtextInterpolate1(" ", space_r2.name || "Meeting Space", " ");
    i0.ɵɵadvance(5);
    i0.ɵɵtextInterpolate1(" ", space_r2.location || (space_r2.level == null ? null : space_r2.level.display_name) || (space_r2.level == null ? null : space_r2.level.name) || (space_r2.zone == null ? null : space_r2.zone.display_name) || (space_r2.zone == null ? null : space_r2.zone.name), " ");
    i0.ɵɵadvance(5);
    i0.ɵɵi18nExp(space_r2.capacity < 1 ? 2 : space_r2.capacity);
    i0.ɵɵi18nApply(19);
    i0.ɵɵadvance();
    i0.ɵɵclassProp("text-info", ctx_r2.isFavourite(space_r2.id));
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate(ctx_r2.isFavourite(space_r2.id) ? "favorite" : "favorite_border");
  }
}
function ParkingSpaceListComponent_ng_container_5_ul_1_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "ul", 12);
    i0.ɵɵtemplate(1, ParkingSpaceListComponent_ng_container_5_ul_1_li_1_Template, 23, 11, "li", 13);
    i0.ɵɵpipe(2, "async");
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r2 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngForOf", i0.ɵɵpipeBind1(2, 1, ctx_r2.assets));
  }
}
function ParkingSpaceListComponent_ng_container_5_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵtemplate(1, ParkingSpaceListComponent_ng_container_5_ul_1_Template, 3, 3, "ul", 11);
    i0.ɵɵpipe(2, "async");
    i0.ɵɵelementContainerEnd();
  }
  if (rf & 2) {
    var tmp_3_0;
    var ctx_r2 = i0.ɵɵnextContext();
    var empty_state_r5 = i0.ɵɵreference(8);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", (tmp_3_0 = i0.ɵɵpipeBind1(2, 2, ctx_r2.assets)) == null ? null : tmp_3_0.length)("ngIfElse", empty_state_r5);
  }
}
function ParkingSpaceListComponent_ng_template_7_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 27)(1, "p", 28);
    i0.ɵɵi18n(2, 6);
    i0.ɵɵelementEnd()();
  }
}
function ParkingSpaceListComponent_ng_template_9_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 29);
    i0.ɵɵelement(1, "mat-spinner", 30);
    i0.ɵɵelementStart(2, "p", 31);
    i0.ɵɵi18n(3, 7);
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    i0.ɵɵadvance();
    i0.ɵɵproperty("diameter", 32);
  }
}
var ParkingSpaceListComponent = /*#__PURE__*/function () {
  function ParkingSpaceListComponent(_form) {
    var _this = this;
    _classCallCheck(this, ParkingSpaceListComponent);
    this._form = _form;
    this.active = '';
    this.selected = '';
    this.favorites = [];
    this.onSelect = new core_1.EventEmitter();
    this.toggleFav = new core_1.EventEmitter();
    this.assets = (0, rxjs_1.combineLatest)([this._form.options, this._form.available_resources]).pipe((0, operators_1.map)(function (_ref) {
      var _ref2 = _slicedToArray(_ref, 2),
        show_fav = _ref2[0].show_fav,
        _ = _ref2[1];
      return _.filter(function (i) {
        return !show_fav || _this.isFavourite(i.id);
      });
    }));
    this.loading = this._form.loading;
  }
  return _createClass(ParkingSpaceListComponent, [{
    key: "isFavourite",
    value: function isFavourite(space_id) {
      return this.favorites.includes(space_id);
    }
  }, {
    key: "selectSpace",
    value: function selectSpace(space) {
      this.onSelect.emit(space);
    }
  }]);
}();
_ParkingSpaceListComponent = ParkingSpaceListComponent;
_ParkingSpaceListComponent.ɵfac = function ParkingSpaceListComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _ParkingSpaceListComponent)(i0.ɵɵdirectiveInject(i1.BookingFormService));
};
_ParkingSpaceListComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _ParkingSpaceListComponent,
  selectors: [["parking-space-list"]],
  inputs: {
    active: "active",
    selected: "selected",
    favorites: "favorites"
  },
  outputs: {
    onSelect: "onSelect",
    toggleFav: "toggleFav"
  },
  decls: 11,
  vars: 7,
  consts: function consts() {
    var i18n_0;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_5968132631442328843$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_LIST_COMPONENT_TS_0 = goog.getMsg("Results");
      i18n_0 = MSG_EXTERNAL_5968132631442328843$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_LIST_COMPONENT_TS_0;
    } else {
      i18n_0 = $localize(_templateObject || (_templateObject = _taggedTemplateLiteral([":\u241F80ed5b776a26a78099e230e0e89d96c33ba44e24\u241F5968132631442328843:Results"])));
    }
    var i18n_1;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_4264834071624535187$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_LIST_COMPONENT_TS_1 = goog.getMsg(" {$interpolation} result(s) found ", {
        "interpolation": "\uFFFD0\uFFFD"
      }, {
        original_code: {
          "interpolation": "{{ (assets | async)?.length || 0 }}"
        }
      });
      i18n_1 = MSG_EXTERNAL_4264834071624535187$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_LIST_COMPONENT_TS_1;
    } else {
      i18n_1 = $localize(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([":\u241Fdd662afda8b27e3c6818b705321ddcc36bd571c0\u241F4264834071624535187: ", ":INTERPOLATION: result(s) found "])), "\uFFFD0\uFFFD");
    }
    var i18n_2;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_4552898751936658514$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_LIST_COMPONENT_TS_2 = goog.getMsg(" {$interpolation} People ", {
        "interpolation": "\uFFFD0\uFFFD"
      }, {
        original_code: {
          "interpolation": "{{\n                                        space.capacity < 1 ? 2 : space.capacity\n                                    }}"
        }
      });
      i18n_2 = MSG_EXTERNAL_4552898751936658514$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_LIST_COMPONENT_TS_2;
    } else {
      i18n_2 = $localize(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([":\u241F08719ea79f574b595da7d187fda2fa8c491b5de7\u241F4552898751936658514: ", ":INTERPOLATION: People "])), "\uFFFD0\uFFFD");
    }
    var i18n_3;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_3831747985282777621$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_LIST_COMPONENT_TS_3 = goog.getMsg(" No available spaces for selected time and/or filters ");
      i18n_3 = MSG_EXTERNAL_3831747985282777621$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_LIST_COMPONENT_TS_3;
    } else {
      i18n_3 = $localize(_templateObject4 || (_templateObject4 = _taggedTemplateLiteral([":\u241F027c29534f5dc45741b226edfebb3f7f578384b0\u241F3831747985282777621: No available spaces for selected time and/or filters "])));
    }
    var i18n_4;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_126579492602011343$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_LIST_COMPONENT_TS_4 = goog.getMsg("Finding available spaces...");
      i18n_4 = MSG_EXTERNAL_126579492602011343$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_LIST_COMPONENT_TS_4;
    } else {
      i18n_4 = $localize(_templateObject5 || (_templateObject5 = _taggedTemplateLiteral([":\u241F8dad32dda6491a1051df9156e98031c0e634b413\u241F126579492602011343:Finding available spaces..."])));
    }
    return [["empty_state", ""], ["load_state", ""], ["placeholder", ""], i18n_0, i18n_1, i18n_2, i18n_3, i18n_4, [1, "font-bold"], ["count", "", 1, "text-sm", "opacity-60", "mb-4"], [4, "ngIf", "ngIfElse"], ["class", "list-style-none space-y-2", 4, "ngIf", "ngIfElse"], [1, "list-style-none", "space-y-2"], ["space", "", "class", "relative p-2 rounded-lg w-full shadow border bg-base-100 border-base-200", 3, "!border-info", 4, "ngFor", "ngForOf"], ["space", "", 1, "relative", "p-2", "rounded-lg", "w-full", "shadow", "border", "bg-base-100", "border-base-200"], ["matRipple", "", "select", "", 1, "w-full", "h-full", "flex", "items-center", 3, "click"], [1, "relative", "w-20", "h-20", "rounded-xl", "bg-base-200", "mr-4", "overflow-hidden", "flex", "items-center", "justify-center"], ["class", "absolute top-1 left-1 border border-neutral bg-base-200 rounded-full h-6 w-6 flex items-center justify-center text-white", 4, "ngIf"], ["auth", "", "class", "object-cover h-full", 3, "source", 4, "ngIf", "ngIfElse"], [1, "space-y-2"], [1, "font-medium", "truncate", "mr-10"], [1, "flex", "items-center", "text-sm", "space-x-2"], [1, "text-info"], ["icon", "", "matRipple", "", "fav", "", 1, "absolute", "top-1", "right-1", 3, "click"], [1, "absolute", "top-1", "left-1", "border", "border-neutral", "bg-base-200", "rounded-full", "h-6", "w-6", "flex", "items-center", "justify-center", "text-white"], ["auth", "", 1, "object-cover", "h-full", 3, "source"], ["src", "assets/icons/car-placeholder.svg", 1, "m-auto"], ["empty", "", 1, "p-16", "flex", "flex-col", "items-center", "justify-center", "space-y-2"], [1, "opacity-30", "text-center"], ["loading", "", 1, "p-16", "flex", "flex-col", "items-center", "justify-center", "space-y-2"], [3, "diameter"], [1, "opacity-30"]];
  },
  template: function ParkingSpaceListComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵelementStart(0, "h3", 8);
      i0.ɵɵi18n(1, 3);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(2, "p", 9);
      i0.ɵɵi18n(3, 4);
      i0.ɵɵpipe(4, "async");
      i0.ɵɵelementEnd();
      i0.ɵɵtemplate(5, ParkingSpaceListComponent_ng_container_5_Template, 3, 4, "ng-container", 10);
      i0.ɵɵpipe(6, "async");
      i0.ɵɵtemplate(7, ParkingSpaceListComponent_ng_template_7_Template, 3, 0, "ng-template", null, 0, i0.ɵɵtemplateRefExtractor)(9, ParkingSpaceListComponent_ng_template_9_Template, 4, 1, "ng-template", null, 1, i0.ɵɵtemplateRefExtractor);
    }
    if (rf & 2) {
      var tmp_2_0;
      var load_state_r6 = i0.ɵɵreference(10);
      i0.ɵɵadvance(4);
      i0.ɵɵi18nExp(((tmp_2_0 = i0.ɵɵpipeBind1(4, 3, ctx.assets)) == null ? null : tmp_2_0.length) || 0);
      i0.ɵɵi18nApply(3);
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", !i0.ɵɵpipeBind1(6, 5, ctx.loading))("ngIfElse", load_state_r6);
    }
  },
  dependencies: [i2.NgForOf, i2.NgIf, i3.MatProgressSpinner, i4.IconComponent, i5.AuthenticatedImageDirective, i6.MatRipple, i2.AsyncPipe],
  styles: ["[_nghost-%COMP%] {\n                width: 100%;\n                height: 100%;\n                padding: 0.5rem;\n                overflow: auto;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBhcmtpbmctbGlzdC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLFdBQVc7Z0JBQ1gsWUFBWTtnQkFDWixlQUFlO2dCQUNmLGNBQWM7WUFDbEIiLCJmaWxlIjoicGFya2luZy1saXN0LmNvbXBvbmVudC50cyIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgOmhvc3Qge1xuICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiAwLjVyZW07XG4gICAgICAgICAgICAgICAgb3ZlcmZsb3c6IGF1dG87XG4gICAgICAgICAgICB9XG4gICAgICAgICJdfQ== */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvYm9va2luZ3Mvc3JjL2xpYi9wYXJraW5nLXNlbGVjdC1tb2RhbC9wYXJraW5nLWxpc3QuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxXQUFXO2dCQUNYLFlBQVk7Z0JBQ1osZUFBZTtnQkFDZixjQUFjO1lBQ2xCOztBQUVaLDRoQkFBNGhCIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICA6aG9zdCB7XG4gICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgICAgICAgICAgIHBhZGRpbmc6IDAuNXJlbTtcbiAgICAgICAgICAgICAgICBvdmVyZmxvdzogYXV0bztcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl0sInNvdXJjZVJvb3QiOiIifQ== */"]
});
exports.ParkingSpaceListComponent = ParkingSpaceListComponent;

/***/ }),

/***/ 48559:
/*!**************************************************************************************!*\
  !*** ./libs/bookings/src/lib/parking-select-modal/parking-location-pin.component.ts ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _ParkingSpaceLocationPinComponent;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.ParkingSpaceLocationPinComponent = void 0;
var components_1 = __webpack_require__(/*! @placeos/components */ 51588);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @angular/common */ 60316);
var i2 = __webpack_require__(/*! ../../../../components/src/lib/icon.component */ 69434);
function ParkingSpaceLocationPinComponent_div_15_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelement(0, "div", 16);
  }
}
function ParkingSpaceLocationPinComponent_app_icon_16_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "app-icon", 17);
    i0.ɵɵtext(1, " done ");
    i0.ɵɵelementEnd();
  }
}
var ParkingSpaceLocationPinComponent = /*#__PURE__*/function () {
  function ParkingSpaceLocationPinComponent(_data) {
    _classCallCheck(this, ParkingSpaceLocationPinComponent);
    this._data = _data;
  }
  return _createClass(ParkingSpaceLocationPinComponent, [{
    key: "selected",
    get: function get() {
      return this._data.selected === true;
    }
  }]);
}();
_ParkingSpaceLocationPinComponent = ParkingSpaceLocationPinComponent;
_ParkingSpaceLocationPinComponent.ɵfac = function ParkingSpaceLocationPinComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _ParkingSpaceLocationPinComponent)(i0.ɵɵdirectiveInject(components_1.MAP_FEATURE_DATA));
};
_ParkingSpaceLocationPinComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _ParkingSpaceLocationPinComponent,
  selectors: [["parking-space-location-pin"]],
  decls: 17,
  vars: 2,
  consts: [[1, "absolute", "bottom-0", "left-1/2", "-translate-x-1/2"], ["width", "66", "height", "80", "viewBox", "0 0 66 80", "fill", "none", "xmlns", "http://www.w3.org/2000/svg"], ["filter", "url(#filter0_d_1065_10313)"], ["d", "M19.724 53.0408C25.0871 60.3435 30.5582 65.8583 31.0184 66.3178C31.4558 66.755 32.0489 67.0007 32.6674 67.0008H32.6678C33.2863 67.0007 33.8795 66.755 34.3169 66.3178C34.7771 65.8583 40.2481 60.3435 45.6112 53.0408C48.2928 49.3894 50.963 45.2701 52.9663 41.0957C54.9629 36.935 56.3331 32.6459 56.3342 28.6724C56.364 25.5564 55.7725 22.4657 54.5941 19.5809C53.415 16.6946 51.6722 14.0724 49.4675 11.8677C47.2629 9.66308 44.6407 7.92024 41.7544 6.74121C38.8711 5.5634 35.782 4.97184 32.6676 5.00103C29.5533 4.97184 26.4642 5.5634 23.5809 6.74121C20.6946 7.92024 18.0724 9.66308 15.8677 11.8677C13.6631 14.0724 11.9202 16.6946 10.7412 19.5809C9.56278 22.4657 8.97122 25.5565 9.00108 28.6726C9.0022 32.646 10.3724 36.9351 12.369 41.0957C14.3723 45.2701 17.0425 49.3894 19.724 53.0408Z", "fill", "#309251", "stroke", "#0B421D", "stroke-width", "2"], ["id", "filter0_d_1065_10313", "x", "0", "y", "0", "width", "65.3353", "height", "80.001", "filterUnits", "userSpaceOnUse", "color-interpolation-filters", "sRGB"], ["flood-opacity", "0", "result", "BackgroundImageFix"], ["in", "SourceAlpha", "type", "matrix", "values", "0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0", "result", "hardAlpha"], ["dy", "4"], ["stdDeviation", "4"], ["in2", "hardAlpha", "operator", "out"], ["type", "matrix", "values", "0 0 0 0 0.0196078 0 0 0 0 0.109804 0 0 0 0 0.172549 0 0 0 0.2 0"], ["mode", "normal", "in2", "BackgroundImageFix", "result", "effect1_dropShadow_1065_10313"], ["mode", "normal", "in", "SourceGraphic", "in2", "effect1_dropShadow_1065_10313", "result", "shape"], [1, "absolute", "top-0", "left-0", "w-full", "h-3/4", "flex", "items-center", "justify-center"], ["class", "relative z-10 h-4 w-4 rounded-full bg-base-100 border-2 border-[#0B421D]", 4, "ngIf"], ["class", "relative text-white z-10 text-2xl", 4, "ngIf"], [1, "relative", "z-10", "h-4", "w-4", "rounded-full", "bg-base-100", "border-2", "border-[#0B421D]"], [1, "relative", "text-white", "z-10", "text-2xl"]],
  template: function ParkingSpaceLocationPinComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵelementStart(0, "div", 0);
      i0.ɵɵnamespaceSVG();
      i0.ɵɵelementStart(1, "svg", 1)(2, "g", 2);
      i0.ɵɵelement(3, "path", 3);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(4, "defs")(5, "filter", 4);
      i0.ɵɵelement(6, "feFlood", 5)(7, "feColorMatrix", 6)(8, "feOffset", 7)(9, "feGaussianBlur", 8)(10, "feComposite", 9)(11, "feColorMatrix", 10)(12, "feBlend", 11)(13, "feBlend", 12);
      i0.ɵɵelementEnd()()();
      i0.ɵɵnamespaceHTML();
      i0.ɵɵelementStart(14, "div", 13);
      i0.ɵɵtemplate(15, ParkingSpaceLocationPinComponent_div_15_Template, 1, 0, "div", 14)(16, ParkingSpaceLocationPinComponent_app_icon_16_Template, 2, 0, "app-icon", 15);
      i0.ɵɵelementEnd()();
    }
    if (rf & 2) {
      i0.ɵɵadvance(15);
      i0.ɵɵproperty("ngIf", !ctx.selected);
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", ctx.selected);
    }
  },
  dependencies: [i1.NgIf, i2.IconComponent],
  encapsulation: 2
});
exports.ParkingSpaceLocationPinComponent = ParkingSpaceLocationPinComponent;

/***/ }),

/***/ 88952:
/*!*****************************************************************************!*\
  !*** ./libs/bookings/src/lib/parking-select-modal/parking-map.component.ts ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _objectSpread = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/objectSpread2.js */ 34092)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _callSuper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/callSuper.js */ 8513)["default"]);
var _inherits = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/inherits.js */ 58160)["default"]);
var _ParkingSpaceSelectMapComponent;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.ParkingSpaceSelectMapComponent = void 0;
var core_1 = __webpack_require__(/*! @angular/core */ 37580);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var events_1 = __webpack_require__(/*! @placeos/events */ 40569);
var operators_1 = __webpack_require__(/*! rxjs/operators */ 97303);
var parking_location_pin_component_1 = __webpack_require__(/*! ./parking-location-pin.component */ 48559);
var mapspeople_service_1 = __webpack_require__(/*! libs/common/src/lib/mapspeople.service */ 99420);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @placeos/events */ 40569);
var i2 = __webpack_require__(/*! libs/common/src/lib/mapspeople.service */ 99420);
var i3 = __webpack_require__(/*! @angular/common */ 60316);
var i4 = __webpack_require__(/*! @angular/forms */ 34456);
var i5 = __webpack_require__(/*! @angular/material/form-field */ 24950);
var i6 = __webpack_require__(/*! @angular/material/core */ 74646);
var i7 = __webpack_require__(/*! ../../../../components/src/lib/interactive-map.component */ 24918);
var i8 = __webpack_require__(/*! @angular/material/select */ 25175);
var _c0 = function _c0() {
  return {
    controls: true
  };
};
function ParkingSpaceSelectMapComponent_ng_container_0_Template(rf, ctx) {
  if (rf & 1) {
    var _r1 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵelementStart(1, "interactive-map", 5);
    i0.ɵɵpipe(2, "async");
    i0.ɵɵpipe(3, "async");
    i0.ɵɵpipe(4, "async");
    i0.ɵɵtwoWayListener("zoomChange", function ParkingSpaceSelectMapComponent_ng_container_0_Template_interactive_map_zoomChange_1_listener($event) {
      i0.ɵɵrestoreView(_r1);
      var ctx_r1 = i0.ɵɵnextContext();
      i0.ɵɵtwoWayBindingSet(ctx_r1.zoom, $event) || (ctx_r1.zoom = $event);
      return i0.ɵɵresetView($event);
    })("centerChange", function ParkingSpaceSelectMapComponent_ng_container_0_Template_interactive_map_centerChange_1_listener($event) {
      i0.ɵɵrestoreView(_r1);
      var ctx_r1 = i0.ɵɵnextContext();
      i0.ɵɵtwoWayBindingSet(ctx_r1.center, $event) || (ctx_r1.center = $event);
      return i0.ɵɵresetView($event);
    });
    i0.ɵɵelementEnd();
    i0.ɵɵelementContainerEnd();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance();
    i0.ɵɵproperty("src", ctx_r1.map_url);
    i0.ɵɵtwoWayProperty("zoom", ctx_r1.zoom)("center", ctx_r1.center);
    i0.ɵɵproperty("styles", i0.ɵɵpipeBind1(2, 7, ctx_r1.styles))("features", i0.ɵɵpipeBind1(3, 9, ctx_r1.features))("actions", i0.ɵɵpipeBind1(4, 11, ctx_r1.actions))("options", i0.ɵɵpureFunction0(13, _c0));
  }
}
function ParkingSpaceSelectMapComponent_mat_option_4_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "mat-option", 6);
    i0.ɵɵtext(1);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var opt_r3 = ctx.$implicit;
    i0.ɵɵproperty("value", opt_r3);
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", opt_r3.display_name || opt_r3.name, " ");
  }
}
var ParkingSpaceSelectMapComponent = /*#__PURE__*/function (_common_1$AsyncHandle) {
  function ParkingSpaceSelectMapComponent(_event_form, _maps_people) {
    var _this;
    _classCallCheck(this, ParkingSpaceSelectMapComponent);
    _this = _callSuper(this, ParkingSpaceSelectMapComponent);
    _this._event_form = _event_form;
    _this._maps_people = _maps_people;
    _this.selected = [];
    _this.is_displayed = false;
    _this.onSelect = new core_1.EventEmitter();
    _this.zoom = 1;
    _this.center = {
      x: 0.5,
      y: 0.5
    };
    _this._seletedSpace = function (s) {
      return function () {
        return _this.onSelect.emit(s);
      };
    };
    _this.level = null;
    _this.levels = _this._event_form.available_spaces.pipe((0, operators_1.map)(function (_) {
      return (0, common_1.unique)(_.map(function (_ref) {
        var level = _ref.level;
        return level;
      }));
    }));
    _this.features = _this._event_form.available_spaces.pipe((0, operators_1.debounceTime)(1000), (0, operators_1.map)(function (l) {
      return l.map(function (space) {
        return {
          location: space.map_id,
          content: parking_location_pin_component_1.ParkingSpaceLocationPinComponent,
          data: _objectSpread(_objectSpread({}, space), {}, {
            selected: _this.selected.includes(space.id)
          })
        };
      });
    }));
    _this.actions = _this._event_form.available_spaces.pipe((0, operators_1.map)(function (l) {
      return l.map(function (space) {
        return {
          id: space.map_id,
          action: ['touchend', 'mouseup'],
          callback: _this._seletedSpace(space)
        };
      });
    }));
    return _this;
  }
  _inherits(ParkingSpaceSelectMapComponent, _common_1$AsyncHandle);
  return _createClass(ParkingSpaceSelectMapComponent, [{
    key: "map_url",
    get: function get() {
      var _this$level;
      return ((_this$level = this.level) === null || _this$level === void 0 ? void 0 : _this$level.map_id) || '';
    }
  }, {
    key: "ngOnInit",
    value: function ngOnInit() {
      var _this2 = this;
      this.subscription('spaces', this._event_form.available_spaces.subscribe(function (_) {
        if (!_this2.level && _.length) _this2.level = _[0].level;
      }));
    }
  }, {
    key: "setLevel",
    value: function setLevel(level) {
      this.level = level;
      this._maps_people.setCustomZone(level.parent_id);
    }
  }, {
    key: "setZoom",
    value: function setZoom(new_zoom) {
      this.zoom = Math.max(0.5, Math.min(10, new_zoom));
    }
  }, {
    key: "resetMap",
    value: function resetMap() {
      this.zoom = 1;
      this.center = {
        x: 0.5,
        y: 0.5
      };
    }
  }]);
}(common_1.AsyncHandler);
_ParkingSpaceSelectMapComponent = ParkingSpaceSelectMapComponent;
_ParkingSpaceSelectMapComponent.ɵfac = function ParkingSpaceSelectMapComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _ParkingSpaceSelectMapComponent)(i0.ɵɵdirectiveInject(i1.EventFormService), i0.ɵɵdirectiveInject(i2.MapsPeopleService));
};
_ParkingSpaceSelectMapComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _ParkingSpaceSelectMapComponent,
  selectors: [["parking-space-map"]],
  inputs: {
    selected: "selected",
    is_displayed: "is_displayed"
  },
  outputs: {
    onSelect: "onSelect"
  },
  features: [i0.ɵɵInheritDefinitionFeature],
  decls: 6,
  vars: 5,
  consts: [[4, "ngIf"], [1, "absolute", "inset-x-0", "top-0", "bg-base-100", "p-2", "border-b", "border-base-200"], ["levels", "", "appearance", "outline", 1, "w-full", "h-[3.25rem]"], [3, "ngModelChange", "ngModel"], [3, "value", 4, "ngFor", "ngForOf"], [3, "zoomChange", "centerChange", "src", "zoom", "center", "styles", "features", "actions", "options"], [3, "value"]],
  template: function ParkingSpaceSelectMapComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵtemplate(0, ParkingSpaceSelectMapComponent_ng_container_0_Template, 5, 14, "ng-container", 0);
      i0.ɵɵelementStart(1, "div", 1)(2, "mat-form-field", 2)(3, "mat-select", 3);
      i0.ɵɵtwoWayListener("ngModelChange", function ParkingSpaceSelectMapComponent_Template_mat_select_ngModelChange_3_listener($event) {
        i0.ɵɵtwoWayBindingSet(ctx.level, $event) || (ctx.level = $event);
        return $event;
      });
      i0.ɵɵlistener("ngModelChange", function ParkingSpaceSelectMapComponent_Template_mat_select_ngModelChange_3_listener($event) {
        return ctx.setLevel($event);
      });
      i0.ɵɵtemplate(4, ParkingSpaceSelectMapComponent_mat_option_4_Template, 2, 2, "mat-option", 4);
      i0.ɵɵpipe(5, "async");
      i0.ɵɵelementEnd()()();
    }
    if (rf & 2) {
      i0.ɵɵproperty("ngIf", ctx.is_displayed);
      i0.ɵɵadvance(3);
      i0.ɵɵtwoWayProperty("ngModel", ctx.level);
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngForOf", i0.ɵɵpipeBind1(5, 3, ctx.levels));
    }
  },
  dependencies: [i3.NgForOf, i3.NgIf, i4.NgControlStatus, i4.NgModel, i5.MatFormField, i6.MatOption, i7.InteractiveMapComponent, i8.MatSelect, i3.AsyncPipe],
  styles: ["[_nghost-%COMP%] {\n                position: relative;\n                background: rgba(0, 0, 0, 0.05);\n                padding-top: 4rem;\n            }\n\n            button[_ngcontent-%COMP%] {\n                border-radius: 0;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBhcmtpbmctbWFwLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1lBQ1k7Z0JBQ0ksa0JBQWtCO2dCQUNsQiwrQkFBK0I7Z0JBQy9CLGlCQUFpQjtZQUNyQjs7WUFFQTtnQkFDSSxnQkFBZ0I7WUFDcEIiLCJmaWxlIjoicGFya2luZy1tYXAuY29tcG9uZW50LnRzIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICA6aG9zdCB7XG4gICAgICAgICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IHJnYmEoMCwgMCwgMCwgMC4wNSk7XG4gICAgICAgICAgICAgICAgcGFkZGluZy10b3A6IDRyZW07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGJ1dHRvbiB7XG4gICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl19 */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvYm9va2luZ3Mvc3JjL2xpYi9wYXJraW5nLXNlbGVjdC1tb2RhbC9wYXJraW5nLW1hcC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLGtCQUFrQjtnQkFDbEIsK0JBQStCO2dCQUMvQixpQkFBaUI7WUFDckI7O1lBRUE7Z0JBQ0ksZ0JBQWdCO1lBQ3BCOztBQUVaLGdwQkFBZ3BCIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICA6aG9zdCB7XG4gICAgICAgICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IHJnYmEoMCwgMCwgMCwgMC4wNSk7XG4gICAgICAgICAgICAgICAgcGFkZGluZy10b3A6IDRyZW07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGJ1dHRvbiB7XG4gICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl0sInNvdXJjZVJvb3QiOiIifQ== */"]
});
exports.ParkingSpaceSelectMapComponent = ParkingSpaceSelectMapComponent;

/***/ }),

/***/ 67642:
/*!**************************************************************************************!*\
  !*** ./libs/bookings/src/lib/parking-select-modal/parking-select-modal.component.ts ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _taggedTemplateLiteral = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js */ 9959)["default"]);
var _toConsumableArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/toConsumableArray.js */ 86033)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _ParkingSpaceSelectModalComponent, _templateObject, _templateObject2, _templateObject3, _templateObject4, _templateObject5;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.ParkingSpaceSelectModalComponent = exports.FAV_PARKING_KEY = void 0;
var dialog_1 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var booking_form_service_1 = __webpack_require__(/*! ../booking-form.service */ 18379);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var i2 = __webpack_require__(/*! @placeos/common */ 22797);
var i3 = __webpack_require__(/*! ../booking-form.service */ 18379);
var i4 = __webpack_require__(/*! @angular/common */ 60316);
var i5 = __webpack_require__(/*! ../../../../components/src/lib/icon.component */ 69434);
var i6 = __webpack_require__(/*! @angular/material/core */ 74646);
var i7 = __webpack_require__(/*! ./parking-filters.component */ 39145);
var i8 = __webpack_require__(/*! ./parking-filters-display.component */ 19138);
var i9 = __webpack_require__(/*! ./parking-list.component */ 30258);
var i10 = __webpack_require__(/*! ./parking-map.component */ 88952);
var i11 = __webpack_require__(/*! ./parking-details.component */ 6724);
function ParkingSpaceSelectModalComponent_parking_space_list_11_Template(rf, ctx) {
  if (rf & 1) {
    var _r2 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "parking-space-list", 26);
    i0.ɵɵlistener("toggleFav", function ParkingSpaceSelectModalComponent_parking_space_list_11_Template_parking_space_list_toggleFav_0_listener($event) {
      i0.ɵɵrestoreView(_r2);
      var ctx_r2 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r2.toggleFavourite($event));
    })("onSelect", function ParkingSpaceSelectModalComponent_parking_space_list_11_Template_parking_space_list_onSelect_0_listener($event) {
      i0.ɵɵrestoreView(_r2);
      var ctx_r2 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r2.displayed = $event);
    });
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r2 = i0.ɵɵnextContext();
    i0.ɵɵproperty("active", ctx_r2.displayed == null ? null : ctx_r2.displayed.id)("selected", ctx_r2.selected_ids)("favorites", ctx_r2.favorites);
  }
}
function ParkingSpaceSelectModalComponent_button_14_Template(rf, ctx) {
  if (rf & 1) {
    var _r4 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "button", 27);
    i0.ɵɵlistener("click", function ParkingSpaceSelectModalComponent_button_14_Template_button_click_0_listener() {
      i0.ɵɵrestoreView(_r4);
      var ctx_r2 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r2.displayed = null);
    });
    i0.ɵɵi18n(1, 5);
    i0.ɵɵelementEnd();
  }
}
function ParkingSpaceSelectModalComponent_ng_template_32_Template(rf, ctx) {
  if (rf & 1) {
    var _r5 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "parking-space-map", 28);
    i0.ɵɵlistener("onSelect", function ParkingSpaceSelectModalComponent_ng_template_32_Template_parking_space_map_onSelect_0_listener($event) {
      i0.ɵɵrestoreView(_r5);
      var ctx_r2 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r2.displayed = $event);
    });
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r2 = i0.ɵɵnextContext();
    i0.ɵɵproperty("selected", ctx_r2.selected_ids)("is_displayed", !!ctx_r2.displayed);
  }
}
exports.FAV_PARKING_KEY = 'favourite_parking_spaces';
var ParkingSpaceSelectModalComponent = /*#__PURE__*/function () {
  function ParkingSpaceSelectModalComponent(_dialog_ref, _settings, _event_form, _data) {
    _classCallCheck(this, ParkingSpaceSelectModalComponent);
    this._dialog_ref = _dialog_ref;
    this._settings = _settings;
    this._event_form = _event_form;
    this._data = _data;
    this.selected = [];
    this.view = 'list';
    this.selected = _toConsumableArray(_data.spaces || []);
    this._event_form.setOptions(_data.options);
  }
  return _createClass(ParkingSpaceSelectModalComponent, [{
    key: "selected_ids",
    get: function get() {
      return this.selected.map(function (_) {
        return _.id;
      }).join(',');
    }
  }, {
    key: "favorites",
    get: function get() {
      return this._settings.get(exports.FAV_PARKING_KEY) || [];
    }
  }, {
    key: "isSelected",
    value: function isSelected(id) {
      return id && this.selected_ids.includes(id);
    }
  }, {
    key: "setSelected",
    value: function setSelected(item, state) {
      var list = this.selected.filter(function (_) {
        return _.id !== item.id;
      });
      if (state) list.push(item);
      this.selected = list;
      if (!this._data.options.group && state) this._dialog_ref.close([item]);
    }
  }, {
    key: "toggleFavourite",
    value: function toggleFavourite(item) {
      var fav_list = this.favorites;
      var new_state = !fav_list.includes(item.id);
      if (new_state) {
        this._settings.saveUserSetting(exports.FAV_PARKING_KEY, [].concat(_toConsumableArray(fav_list), [item.id]));
      } else {
        this._settings.saveUserSetting(exports.FAV_PARKING_KEY, fav_list.filter(function (_) {
          return _ !== item.id;
        }));
      }
    }
  }]);
}();
_ParkingSpaceSelectModalComponent = ParkingSpaceSelectModalComponent;
_ParkingSpaceSelectModalComponent.ɵfac = function ParkingSpaceSelectModalComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _ParkingSpaceSelectModalComponent)(i0.ɵɵdirectiveInject(i1.MatDialogRef), i0.ɵɵdirectiveInject(i2.SettingsService), i0.ɵɵdirectiveInject(i3.BookingFormService), i0.ɵɵdirectiveInject(dialog_1.MAT_DIALOG_DATA));
};
_ParkingSpaceSelectModalComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _ParkingSpaceSelectModalComponent,
  selectors: [["parking-space-select-modal"]],
  decls: 34,
  vars: 22,
  consts: function consts() {
    var i18n_0;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_6275162452894389177$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_SELECT_MODAL_COMPONENT_TS_0 = goog.getMsg("Find Parking Space");
      i18n_0 = MSG_EXTERNAL_6275162452894389177$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_SELECT_MODAL_COMPONENT_TS_0;
    } else {
      i18n_0 = $localize(_templateObject || (_templateObject = _taggedTemplateLiteral([":\u241F8db1ccf77dfb75785bcf8e9090ad65ea6ab69884\u241F6275162452894389177:Find Parking Space"])));
    }
    var i18n_1;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_8443571736703532556$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_SELECT_MODAL_COMPONENT_TS_1 = goog.getMsg(" View List ");
      i18n_1 = MSG_EXTERNAL_8443571736703532556$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_SELECT_MODAL_COMPONENT_TS_1;
    } else {
      i18n_1 = $localize(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([":\u241F30d3439b0e0095fe69503245f3bd7a2e9498be7c\u241F8443571736703532556: View List "])));
    }
    var i18n_2;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_819716823718458903$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_SELECT_MODAL_COMPONENT_TS_2 = goog.getMsg("Back to form");
      i18n_2 = MSG_EXTERNAL_819716823718458903$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_SELECT_MODAL_COMPONENT_TS_2;
    } else {
      i18n_2 = $localize(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([":\u241F18843b85d1a4f17fefafd07bc5cde636dca44295\u241F819716823718458903:Back to form"])));
    }
    var i18n_3;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_7685760017883569970$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_SELECT_MODAL_COMPONENT_TS_3 = goog.getMsg(" {$interpolation} bay(s) added ", {
        "interpolation": "\uFFFD0\uFFFD"
      }, {
        original_code: {
          "interpolation": "{{ selected.length }}"
        }
      });
      i18n_3 = MSG_EXTERNAL_7685760017883569970$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_SELECT_MODAL_COMPONENT_TS_3;
    } else {
      i18n_3 = $localize(_templateObject4 || (_templateObject4 = _taggedTemplateLiteral([":\u241Ff5e618f8255889ca7743db771c50b6181b8eb362\u241F7685760017883569970: ", ":INTERPOLATION: bay(s) added "])), "\uFFFD0\uFFFD");
    }
    var i18n_4;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_874721418273731876$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_SELECT_MODAL_COMPONENT_TS_4 = goog.getMsg(" Back ");
      i18n_4 = MSG_EXTERNAL_874721418273731876$$LIBS_BOOKINGS_SRC_LIB_PARKING_SELECT_MODAL_PARKING_SELECT_MODAL_COMPONENT_TS_4;
    } else {
      i18n_4 = $localize(_templateObject5 || (_templateObject5 = _taggedTemplateLiteral([":\u241Fccda1d41ca79703a85a3a598c1d97e040a32b766\u241F874721418273731876: Back "])));
    }
    return [["map_view", ""], i18n_0, i18n_1, i18n_2, i18n_3, i18n_4, [1, "w-[100vw]", "h-[100vh]", "sm:relative", "sm:w-auto", "sm:h-auto", "flex", "flex-col", "bg-base-100"], [1, "flex", "items-center", "space-x-4", "w-full"], ["icon", "", "matRipple", "", "mat-dialog-close", "", 1, "bg-base-200"], [1, "flex-1", "flex", "items-center", "divide-x", "divide-base-200", "min-h-[65vh]", "h-[65vh]", "sm:max-h-[65vh]", "sm:max-w-[95vw]", "w-full", "overflow-hidden"], [1, "h-full", "hidden", "sm:flex", "max-w-[20rem]", "sm:h-[65vh]", "sm:max-h-full", 3, "hide_levels"], [1, "flex", "flex-col", "items-center", "flex-1", "w-1/2", "h-full", "sm:h-[65vh]"], [1, "w-full", "border-b", "border-base-200", 3, "viewChange", "view"], ["class", "flex-1 h-1/2 bg-base-200", 3, "active", "selected", "favorites", "toggleFav", "onSelect", 4, "ngIf", "ngIfElse"], [1, "h-full", "w-full", "sm:h-[65vh]", "absolute", "sm:relative", "sm:flex", "sm:max-w-[20rem]", "z-20", "bg-base-100", "block", 3, "activeChange", "toggleFav", "close", "space", "active", "fav"], [1, "flex", "sm:hidden", "flex-col-reverse", "items-center", "justify-end", "p-2", "border-t", "border-base-200", "w-full"], ["btn", "", "matRipple", "", "return", "", "class", "inverse sm:hidden w-full", 3, "click", 4, "ngIf"], ["btn", "", "matRipple", "", "save", "", 1, "w-full", "sm:w-32", "sm:mb-0", 3, "mat-dialog-close"], [1, "hidden", "sm:flex", "items-center", "justify-between", "p-2", "border-t", "border-base-200", "w-full"], ["btn", "", "matRipple", "", 1, "clear", "text-secondary", 3, "mat-dialog-close"], [1, "flex", "items-center"], [1, "text-xl"], [1, "mr-1", "underline"], [1, "opacity-60", "text-sm"], ["btn", "", "matRipple", "", 3, "click", "disabled"], [1, "mr-1"], [1, "flex-1", "h-1/2", "bg-base-200", 3, "toggleFav", "onSelect", "active", "selected", "favorites"], ["btn", "", "matRipple", "", "return", "", 1, "inverse", "sm:hidden", "w-full", 3, "click"], [1, "flex-1", "h-1/2", "w-full", 3, "onSelect", "selected", "is_displayed"]];
  },
  template: function ParkingSpaceSelectModalComponent_Template(rf, ctx) {
    if (rf & 1) {
      var _r1 = i0.ɵɵgetCurrentView();
      i0.ɵɵelementStart(0, "div", 6)(1, "header", 7)(2, "button", 8)(3, "app-icon");
      i0.ɵɵtext(4, "close");
      i0.ɵɵelementEnd()();
      i0.ɵɵelementStart(5, "h3");
      i0.ɵɵi18n(6, 1);
      i0.ɵɵelementEnd()();
      i0.ɵɵelementStart(7, "main", 9);
      i0.ɵɵelement(8, "parking-space-filters", 10);
      i0.ɵɵelementStart(9, "div", 11)(10, "parking-space-filters-display", 12);
      i0.ɵɵtwoWayListener("viewChange", function ParkingSpaceSelectModalComponent_Template_parking_space_filters_display_viewChange_10_listener($event) {
        i0.ɵɵrestoreView(_r1);
        i0.ɵɵtwoWayBindingSet(ctx.view, $event) || (ctx.view = $event);
        return i0.ɵɵresetView($event);
      });
      i0.ɵɵelementEnd();
      i0.ɵɵtemplate(11, ParkingSpaceSelectModalComponent_parking_space_list_11_Template, 1, 3, "parking-space-list", 13);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(12, "parking-space-details", 14);
      i0.ɵɵlistener("activeChange", function ParkingSpaceSelectModalComponent_Template_parking_space_details_activeChange_12_listener($event) {
        i0.ɵɵrestoreView(_r1);
        return i0.ɵɵresetView(ctx.setSelected(ctx.displayed, $event));
      })("toggleFav", function ParkingSpaceSelectModalComponent_Template_parking_space_details_toggleFav_12_listener() {
        i0.ɵɵrestoreView(_r1);
        return i0.ɵɵresetView(ctx.toggleFavourite(ctx.displayed));
      })("close", function ParkingSpaceSelectModalComponent_Template_parking_space_details_close_12_listener() {
        i0.ɵɵrestoreView(_r1);
        return i0.ɵɵresetView(ctx.displayed = null);
      });
      i0.ɵɵelementEnd()();
      i0.ɵɵelementStart(13, "footer", 15);
      i0.ɵɵtemplate(14, ParkingSpaceSelectModalComponent_button_14_Template, 2, 0, "button", 16);
      i0.ɵɵelementStart(15, "button", 17);
      i0.ɵɵi18n(16, 2);
      i0.ɵɵelementEnd()();
      i0.ɵɵelementStart(17, "footer", 18)(18, "button", 19)(19, "div", 20)(20, "app-icon", 21);
      i0.ɵɵtext(21, "arrow_back");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(22, "div", 22);
      i0.ɵɵi18n(23, 3);
      i0.ɵɵelementEnd()()();
      i0.ɵɵelementStart(24, "p", 23);
      i0.ɵɵi18n(25, 4);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(26, "button", 24);
      i0.ɵɵlistener("click", function ParkingSpaceSelectModalComponent_Template_button_click_26_listener() {
        i0.ɵɵrestoreView(_r1);
        return i0.ɵɵresetView(ctx.setSelected(ctx.displayed, !ctx.isSelected(ctx.displayed == null ? null : ctx.displayed.id)));
      });
      i0.ɵɵelementStart(27, "div", 20)(28, "app-icon", 21);
      i0.ɵɵtext(29);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(30, "div", 25);
      i0.ɵɵtext(31);
      i0.ɵɵelementEnd()()()()();
      i0.ɵɵtemplate(32, ParkingSpaceSelectModalComponent_ng_template_32_Template, 1, 2, "ng-template", null, 0, i0.ɵɵtemplateRefExtractor);
    }
    if (rf & 2) {
      var map_view_r6 = i0.ɵɵreference(33);
      i0.ɵɵadvance(8);
      i0.ɵɵproperty("hide_levels", ctx.view !== "list");
      i0.ɵɵadvance(2);
      i0.ɵɵtwoWayProperty("view", ctx.view);
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", ctx.view === "list")("ngIfElse", map_view_r6);
      i0.ɵɵadvance();
      i0.ɵɵclassProp("hidden", !ctx.displayed)("inset-0", ctx.displayed);
      i0.ɵɵproperty("space", ctx.displayed)("active", ctx.selected_ids.includes(ctx.displayed == null ? null : ctx.displayed.id))("fav", ctx.displayed && ctx.favorites.includes(ctx.displayed == null ? null : ctx.displayed.id));
      i0.ɵɵadvance(2);
      i0.ɵɵproperty("ngIf", ctx.displayed);
      i0.ɵɵadvance();
      i0.ɵɵclassProp("mb-2", ctx.displayed);
      i0.ɵɵproperty("mat-dialog-close", ctx.selected);
      i0.ɵɵadvance(3);
      i0.ɵɵproperty("mat-dialog-close", ctx.selected);
      i0.ɵɵadvance(7);
      i0.ɵɵi18nExp(ctx.selected.length);
      i0.ɵɵi18nApply(25);
      i0.ɵɵadvance();
      i0.ɵɵclassProp("inverse", ctx.isSelected(ctx.displayed == null ? null : ctx.displayed.id));
      i0.ɵɵproperty("disabled", !ctx.displayed);
      i0.ɵɵadvance(3);
      i0.ɵɵtextInterpolate(ctx.isSelected(ctx.displayed == null ? null : ctx.displayed.id) ? "remove" : "add");
      i0.ɵɵadvance(2);
      i0.ɵɵtextInterpolate1(" ", ctx.isSelected(ctx.displayed == null ? null : ctx.displayed.id) ? "Remove from Booking" : "Add to booking", " ");
    }
  },
  dependencies: [i4.NgIf, i1.MatDialogClose, i5.IconComponent, i6.MatRipple, i7.ParkingSpaceFiltersComponent, i8.ParkingSpaceFiltersDisplayComponent, i9.ParkingSpaceListComponent, i10.ParkingSpaceSelectMapComponent, i11.ParkingSpaceDetailsComponent]
});
exports.ParkingSpaceSelectModalComponent = ParkingSpaceSelectModalComponent;

/***/ }),

/***/ 24844:
/*!*********************************************************************!*\
  !*** ./libs/bookings/src/lib/parking-space-list-field.component.ts ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _taggedTemplateLiteral = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js */ 9959)["default"]);
var _toConsumableArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/toConsumableArray.js */ 86033)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _ParkingSpaceListFieldComponent, _templateObject, _templateObject2, _templateObject3, _templateObject4, _templateObject5;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.ParkingSpaceListFieldComponent = void 0;
var core_1 = __webpack_require__(/*! @angular/core */ 37580);
var forms_1 = __webpack_require__(/*! @angular/forms */ 34456);
var dialog_1 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var settings_service_1 = __webpack_require__(/*! libs/common/src/lib/settings.service */ 14233);
var parking_select_modal_component_1 = __webpack_require__(/*! ./parking-select-modal/parking-select-modal.component */ 67642);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! libs/common/src/lib/settings.service */ 14233);
var i2 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var i3 = __webpack_require__(/*! @angular/common */ 60316);
var i4 = __webpack_require__(/*! ../../../components/src/lib/icon.component */ 69434);
var i5 = __webpack_require__(/*! ../../../components/src/lib/authenticated-image.directive */ 93208);
var i6 = __webpack_require__(/*! @angular/material/core */ 74646);
function ParkingSpaceListFieldComponent_div_1_img_2_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelement(0, "img", 24);
  }
  if (rf & 2) {
    var space_r2 = i0.ɵɵnextContext().$implicit;
    i0.ɵɵproperty("source", space_r2.images[0]);
  }
}
function ParkingSpaceListFieldComponent_div_1_ng_template_3_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelement(0, "img", 25);
  }
}
function ParkingSpaceListFieldComponent_div_1_Template(rf, ctx) {
  if (rf & 1) {
    var _r1 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 12)(1, "div", 13);
    i0.ɵɵtemplate(2, ParkingSpaceListFieldComponent_div_1_img_2_Template, 1, 1, "img", 14)(3, ParkingSpaceListFieldComponent_div_1_ng_template_3_Template, 1, 0, "ng-template", null, 0, i0.ɵɵtemplateRefExtractor);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(5, "div", 15)(6, "div", 16);
    i0.ɵɵtext(7);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(8, "div", 17)(9, "app-icon", 18);
    i0.ɵɵtext(10, "place");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(11, "p");
    i0.ɵɵtext(12);
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(13, "div", 17)(14, "app-icon", 18);
    i0.ɵɵtext(15, "people");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(16, "p");
    i0.ɵɵi18n(17, 2);
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(18, "div", 19)(19, "button", 20);
    i0.ɵɵlistener("click", function ParkingSpaceListFieldComponent_div_1_Template_button_click_19_listener() {
      var space_r2 = i0.ɵɵrestoreView(_r1).$implicit;
      var ctx_r2 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r2.changeResources(space_r2));
    });
    i0.ɵɵelementStart(20, "div", 21);
    i0.ɵɵi18nStart(21, 3);
    i0.ɵɵelement(22, "app-icon", 9)(23, "div");
    i0.ɵɵi18nEnd();
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(24, "button", 22);
    i0.ɵɵlistener("click", function ParkingSpaceListFieldComponent_div_1_Template_button_click_24_listener() {
      var space_r2 = i0.ɵɵrestoreView(_r1).$implicit;
      var ctx_r2 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r2.removeResource(space_r2));
    });
    i0.ɵɵelementStart(25, "div", 21);
    i0.ɵɵi18nStart(26, 4);
    i0.ɵɵelement(27, "app-icon", 9)(28, "div");
    i0.ɵɵi18nEnd();
    i0.ɵɵelementEnd()()()();
    i0.ɵɵelementStart(29, "button", 23);
    i0.ɵɵlistener("click", function ParkingSpaceListFieldComponent_div_1_Template_button_click_29_listener() {
      i0.ɵɵrestoreView(_r1);
      var ctx_r2 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r2.toggleFavourite(ctx_r2.asset));
    });
    i0.ɵɵelementStart(30, "app-icon");
    i0.ɵɵtext(31);
    i0.ɵɵelementEnd()()();
  }
  if (rf & 2) {
    var space_r2 = ctx.$implicit;
    var placeholder_r4 = i0.ɵɵreference(4);
    var ctx_r2 = i0.ɵɵnextContext();
    i0.ɵɵadvance(2);
    i0.ɵɵproperty("ngIf", space_r2.images == null ? null : space_r2.images.length)("ngIfElse", placeholder_r4);
    i0.ɵɵadvance(5);
    i0.ɵɵtextInterpolate1(" ", space_r2.name || "Meeting Resource", " ");
    i0.ɵɵadvance(5);
    i0.ɵɵtextInterpolate1(" ", space_r2.location || (space_r2.level == null ? null : space_r2.level.display_name) || (space_r2.level == null ? null : space_r2.level.name) || (space_r2.zone == null ? null : space_r2.zone.display_name) || (space_r2.zone == null ? null : space_r2.zone.name), " ");
    i0.ɵɵadvance(5);
    i0.ɵɵi18nExp(space_r2.capacity < 1 ? 2 : space_r2.capacity || 1)(space_r2.capacity < 1 ? 2 : space_r2.capacity || 1);
    i0.ɵɵi18nApply(17);
    i0.ɵɵadvance(12);
    i0.ɵɵclassProp("text-blue-400", ctx_r2.favorites.includes(ctx_r2.asset == null ? null : ctx_r2.asset.id));
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate(ctx_r2.favorites.includes(ctx_r2.asset == null ? null : ctx_r2.asset.id) ? "favorite" : "favorite_border");
  }
}
var EMPTY_FAVS = [];
var ParkingSpaceListFieldComponent = /*#__PURE__*/function () {
  function ParkingSpaceListFieldComponent(_settings, _dialog) {
    var _this = this;
    _classCallCheck(this, ParkingSpaceListFieldComponent);
    this._settings = _settings;
    this._dialog = _dialog;
    this.disable_date = false;
    this.room_size = 3;
    this.spaces = [];
    this.disabled = false;
    /* istanbul ignore next */
    this.registerOnChange = function (fn) {
      return _this._onChange = fn;
    };
    /* istanbul ignore next */
    this.registerOnTouched = function (fn) {
      return _this._onTouch = fn;
    };
    this.setDisabledState = function (s) {
      return _this.disabled = s;
    };
  }
  /** Add or edit selected spaces */
  return _createClass(ParkingSpaceListFieldComponent, [{
    key: "favorites",
    get: function get() {
      return this._settings.get('favourite_spaces') || EMPTY_FAVS;
    }
  }, {
    key: "changeResources",
    value: function changeResources() {
      var _this2 = this;
      var ref = this._dialog.open(parking_select_modal_component_1.ParkingSpaceSelectModalComponent, {
        data: {
          spaces: this.spaces,
          options: {
            capacity: this.room_size,
            disable_date: this.disable_date
          }
        }
      });
      ref.afterClosed().subscribe(function (spaces) {
        if (!spaces) return;
        _this2.setValue(spaces);
      });
    }
    /** Remove the selected space from the list */
  }, {
    key: "removeResource",
    value: function removeResource(space) {
      this.setValue(this.spaces.filter(function (_) {
        return _.id !== space.id;
      }));
    }
    /**
     * Update the form field value
     * @param new_value New value to set on the form field
     */
  }, {
    key: "setValue",
    value: function setValue(new_value) {
      this.spaces = new_value;
      if (this._onChange) this._onChange(this.spaces);
    }
    /* istanbul ignore next */
    /**
     * Update local value when form control value is changed
     * @param value The new value for the component
     */
  }, {
    key: "writeValue",
    value: function writeValue(value) {
      this.spaces = value || [];
    }
  }, {
    key: "toggleFavourite",
    value: function toggleFavourite(space) {
      var fav_list = this.favorites;
      var new_state = !fav_list.includes(space.id);
      if (new_state) {
        this._settings.saveUserSetting(parking_select_modal_component_1.FAV_PARKING_KEY, [].concat(_toConsumableArray(fav_list), [space.id]));
      } else {
        this._settings.saveUserSetting(parking_select_modal_component_1.FAV_PARKING_KEY, fav_list.filter(function (_) {
          return _ !== space.id;
        }));
      }
    }
  }]);
}();
_ParkingSpaceListFieldComponent = ParkingSpaceListFieldComponent;
_ParkingSpaceListFieldComponent.ɵfac = function ParkingSpaceListFieldComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _ParkingSpaceListFieldComponent)(i0.ɵɵdirectiveInject(i1.SettingsService), i0.ɵɵdirectiveInject(i2.MatDialog));
};
_ParkingSpaceListFieldComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _ParkingSpaceListFieldComponent,
  selectors: [["parking-space-list-field"]],
  inputs: {
    disable_date: "disable_date"
  },
  features: [i0.ɵɵProvidersFeature([{
    provide: forms_1.NG_VALUE_ACCESSOR,
    useExisting: (0, core_1.forwardRef)(function () {
      return _ParkingSpaceListFieldComponent;
    }),
    multi: true
  }])],
  decls: 10,
  vars: 1,
  consts: function consts() {
    var i18n_0;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_1439078713747050312$$LIBS_BOOKINGS_SRC_LIB_PARKING_SPACE_LIST_FIELD_COMPONENT_TS_0 = goog.getMsg("Add Parking Resource");
      i18n_0 = MSG_EXTERNAL_1439078713747050312$$LIBS_BOOKINGS_SRC_LIB_PARKING_SPACE_LIST_FIELD_COMPONENT_TS_0;
    } else {
      i18n_0 = $localize(_templateObject || (_templateObject = _taggedTemplateLiteral([":\u241F45491a2ead2b592aec7b4d19300c0715230f334d\u241F1439078713747050312:Add Parking Resource"])));
    }
    var i18n_1;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_3604407389403754414$$LIBS_BOOKINGS_SRC_LIB_PARKING_SPACE_LIST_FIELD_COMPONENT_TS_1 = goog.getMsg("{VAR_PLURAL, plural, =1 {Person } other {People }}");
      i18n_1 = MSG_EXTERNAL_3604407389403754414$$LIBS_BOOKINGS_SRC_LIB_PARKING_SPACE_LIST_FIELD_COMPONENT_TS_1;
    } else {
      i18n_1 = $localize(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([":\u241Fde78e9a461c1eabe0e350a345933557c629d0ed1\u241F3604407389403754414:{VAR_PLURAL, plural, =1 {Person } other {People }}"])));
    }
    i18n_1 = i0.ɵɵi18nPostprocess(i18n_1, {
      "VAR_PLURAL": "\uFFFD1\uFFFD"
    });
    var i18n_2;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_259696738555613759$$LIBS_BOOKINGS_SRC_LIB_PARKING_SPACE_LIST_FIELD_COMPONENT_TS_2 = goog.getMsg(" {$interpolation} {$icu} ", {
        "icu": i18n_1,
        "interpolation": "\uFFFD0\uFFFD"
      }, {
        original_code: {
          "icu": "{\n                            (space.capacity < 1 ? 2 : space.capacity || 1),\n                            plural, =1 { Person } other { People } }",
          "interpolation": "{{ space.capacity < 1 ? 2 : space.capacity || 1 }}"
        }
      });
      i18n_2 = MSG_EXTERNAL_259696738555613759$$LIBS_BOOKINGS_SRC_LIB_PARKING_SPACE_LIST_FIELD_COMPONENT_TS_2;
    } else {
      i18n_2 = $localize(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([":\u241F45802327683c8bd728df5113a59afcd09367e8e9\u241F259696738555613759: ", ":INTERPOLATION: ", ":ICU: "])), "\uFFFD0\uFFFD", i18n_1);
    }
    var i18n_3;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_3410599700979759406$$LIBS_BOOKINGS_SRC_LIB_PARKING_SPACE_LIST_FIELD_COMPONENT_TS_3 = goog.getMsg("{$startTagAppIcon}edit{$closeTagAppIcon}{$startTagDiv}Change{$closeTagDiv}", {
        "closeTagAppIcon": "\uFFFD/#22\uFFFD",
        "closeTagDiv": "\uFFFD/#23\uFFFD",
        "startTagAppIcon": "\uFFFD#22\uFFFD",
        "startTagDiv": "\uFFFD#23\uFFFD"
      }, {
        original_code: {
          "closeTagAppIcon": "</app-icon>",
          "closeTagDiv": "</div>",
          "startTagAppIcon": "<app-icon class=\"text-2xl\">",
          "startTagDiv": "<div>"
        }
      });
      i18n_3 = MSG_EXTERNAL_3410599700979759406$$LIBS_BOOKINGS_SRC_LIB_PARKING_SPACE_LIST_FIELD_COMPONENT_TS_3;
    } else {
      i18n_3 = $localize(_templateObject4 || (_templateObject4 = _taggedTemplateLiteral([":\u241Fc5519f0af04771a54fd52f587819c2f86c19691a\u241F3410599700979759406:", ":START_TAG_APP_ICON:edit", ":CLOSE_TAG_APP_ICON:", ":START_TAG_DIV:Change", ":CLOSE_TAG_DIV:"])), "\uFFFD#22\uFFFD", "\uFFFD/#22\uFFFD", "\uFFFD#23\uFFFD", "\uFFFD/#23\uFFFD");
    }
    var i18n_4;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_913695604792961336$$LIBS_BOOKINGS_SRC_LIB_PARKING_SPACE_LIST_FIELD_COMPONENT_TS_4 = goog.getMsg("{$startTagAppIcon}close{$closeTagAppIcon}{$startTagDiv}Remove{$closeTagDiv}", {
        "closeTagAppIcon": "\uFFFD/#27\uFFFD",
        "closeTagDiv": "\uFFFD/#28\uFFFD",
        "startTagAppIcon": "\uFFFD#27\uFFFD",
        "startTagDiv": "\uFFFD#28\uFFFD"
      }, {
        original_code: {
          "closeTagAppIcon": "</app-icon>",
          "closeTagDiv": "</div>",
          "startTagAppIcon": "<app-icon class=\"text-2xl\">",
          "startTagDiv": "<div>"
        }
      });
      i18n_4 = MSG_EXTERNAL_913695604792961336$$LIBS_BOOKINGS_SRC_LIB_PARKING_SPACE_LIST_FIELD_COMPONENT_TS_4;
    } else {
      i18n_4 = $localize(_templateObject5 || (_templateObject5 = _taggedTemplateLiteral([":\u241F00e1d7e28d4673ed2d4813ab8c6beb9d7e687e8f\u241F913695604792961336:", ":START_TAG_APP_ICON:close", ":CLOSE_TAG_APP_ICON:", ":START_TAG_DIV:Remove", ":CLOSE_TAG_DIV:"])), "\uFFFD#27\uFFFD", "\uFFFD/#27\uFFFD", "\uFFFD#28\uFFFD", "\uFFFD/#28\uFFFD");
    }
    return [["placeholder", ""], i18n_0, i18n_2, i18n_3, i18n_4, ["list", "", 1, "space-y-2"], ["space", "", "class", "relative p-2 rounded-lg w-full flex items-center shadow border border-base-200", 4, "ngFor", "ngForOf"], ["btn", "", "matRipple", "", "add-space", "", 1, "w-full", "inverse", "mt-2", 3, "click"], [1, "flex", "items-center", "justify-center", "space-x-2"], [1, "text-2xl"], [1, "flex", "items-center", "flex-wrap", "sm:space-x-2", "mb-2"], [1, "flex-1", "min-w-[256px]", "space-y-2"], ["space", "", 1, "relative", "p-2", "rounded-lg", "w-full", "flex", "items-center", "shadow", "border", "border-base-200"], [1, "w-24", "h-24", "rounded-xl", "bg-base-200", "mr-4", "overflow-hidden", "flex", "items-center", "justify-center"], ["auth", "", "class", "object-cover h-full", 3, "source", 4, "ngIf", "ngIfElse"], [1, "space-y-2", "pb-4"], [1, "font-medium"], [1, "flex", "items-center", "text-sm", "space-x-2"], [1, "text-blue-500"], [1, "absolute", "bottom-0", "right-0", "flex", "items-center", "justify-end", "text-xs"], ["btn", "", "matRipple", "", "edit-space", "", 1, "clear", 3, "click"], [1, "flex", "items-center", "space-x-2"], ["btn", "", "matRipple", "", "remove-space", "", 1, "clear", 3, "click"], ["icon", "", "matRipple", "", "fav", "", 1, "absolute", "top-1", "right-1", 3, "click"], ["auth", "", 1, "object-cover", "h-full", 3, "source"], ["src", "assets/icons/car-placeholder.svg", 1, "m-auto"]];
  },
  template: function ParkingSpaceListFieldComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵelementStart(0, "div", 5);
      i0.ɵɵtemplate(1, ParkingSpaceListFieldComponent_div_1_Template, 32, 9, "div", 6);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(2, "button", 7);
      i0.ɵɵlistener("click", function ParkingSpaceListFieldComponent_Template_button_click_2_listener() {
        return ctx.changeResources();
      });
      i0.ɵɵelementStart(3, "div", 8)(4, "app-icon", 9);
      i0.ɵɵtext(5, "search");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(6, "span");
      i0.ɵɵi18n(7, 1);
      i0.ɵɵelementEnd()()();
      i0.ɵɵelementStart(8, "div", 10);
      i0.ɵɵelement(9, "div", 11);
      i0.ɵɵelementEnd();
    }
    if (rf & 2) {
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngForOf", ctx.spaces);
    }
  },
  dependencies: [i3.NgForOf, i3.NgIf, i4.IconComponent, i5.AuthenticatedImageDirective, i6.MatRipple]
});
exports.ParkingSpaceListFieldComponent = ParkingSpaceListFieldComponent;

/***/ }),

/***/ 1593:
/*!**************************************************!*\
  !*** ./libs/bookings/src/lib/parking.service.ts ***!
  \**************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _toConsumableArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/toConsumableArray.js */ 86033)["default"]);
var _slicedToArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/slicedToArray.js */ 6282)["default"]);
var _objectSpread = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/objectSpread2.js */ 34092)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _callSuper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/callSuper.js */ 8513)["default"]);
var _inherits = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/inherits.js */ 58160)["default"]);
var _ParkingService;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.ParkingService = void 0;
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var organisation_1 = __webpack_require__(/*! @placeos/organisation */ 2510);
var ts_client_1 = __webpack_require__(/*! @placeos/ts-client */ 35713);
var rxjs_1 = __webpack_require__(/*! rxjs */ 15681);
var operators_1 = __webpack_require__(/*! rxjs/operators */ 97303);
var bookings_fn_1 = __webpack_require__(/*! ./bookings.fn */ 18026);
var date_fns_1 = __webpack_require__(/*! date-fns */ 25773);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @placeos/organisation */ 2510);
var i2 = __webpack_require__(/*! @placeos/common */ 22797);
var ParkingService = /*#__PURE__*/function (_common_1$AsyncHandle) {
  function ParkingService(_org, _settings) {
    var _this;
    _classCallCheck(this, ParkingService);
    _this = _callSuper(this, ParkingService);
    _this._org = _org;
    _this._settings = _settings;
    _this._loading = new rxjs_1.BehaviorSubject([]);
    _this.loading = _this._loading.asObservable(); /** List of available parking levels for the current building */
    _this.levels = _this._org.level_list.pipe((0, operators_1.map)(function (_) {
      if (!_this._settings.get('app.use_region')) {
        var blds = _this._org.buildingsForRegion();
        var bld_ids = blds.map(function (bld) {
          return bld.id;
        });
        var list = _.filter(function (lvl) {
          return bld_ids.includes(lvl.parent_id) && lvl.tags.includes('parking');
        });
        list.map(function (lvl) {
          var _blds$find;
          return _objectSpread(_objectSpread({}, lvl), {}, {
            display_name: "".concat((_blds$find = blds.find(function (_) {
              return _.id === lvl.parent_id;
            })) === null || _blds$find === void 0 ? void 0 : _blds$find.display_name, " - ").concat(lvl.display_name)
          });
        });
        return list;
      }
      return _.filter(function (lvl) {
        return lvl.parent_id === _this._org.building.id && lvl.tags.includes('parking');
      });
    }));
    /** List of parking spaces for the current building/level */
    _this.spaces = (0, rxjs_1.combineLatest)([_this.levels]).pipe((0, operators_1.filter)(function (_ref) {
      var _lvls$;
      var _ref2 = _slicedToArray(_ref, 1),
        lvls = _ref2[0];
      return !!((_lvls$ = lvls[0]) !== null && _lvls$ !== void 0 && _lvls$.id);
    }), (0, operators_1.switchMap)(function (_ref3) {
      var _ref4 = _slicedToArray(_ref3, 1),
        levels = _ref4[0];
      _this._loading.next([].concat(_toConsumableArray(_this._loading.getValue()), ['spaces']));
      return (0, rxjs_1.forkJoin)(levels.map(function (lvl) {
        return (0, ts_client_1.showMetadata)(lvl.id, 'parking-spaces').pipe((0, operators_1.map)(function (d) {
          return (d.details instanceof Array ? d.details : []).map(function (s) {
            return _objectSpread(_objectSpread({}, s), {}, {
              zone_id: lvl.id
            });
          });
        }));
      }));
    }), (0, operators_1.map)(function (list) {
      return (0, common_1.flatten)(list);
    }), (0, operators_1.tap)(function () {
      return _this._loading.next(_this._loading.getValue().filter(function (_) {
        return _ !== 'spaces';
      }));
    }), (0, operators_1.shareReplay)(1));
    /** List of parking spaces for the current building/level */
    _this.users = (0, rxjs_1.combineLatest)([_this._org.active_building]).pipe((0, operators_1.filter)(function (_ref5) {
      var _ref6 = _slicedToArray(_ref5, 1),
        bld = _ref6[0];
      return !!(bld !== null && bld !== void 0 && bld.id);
    }), (0, operators_1.switchMap)(function (_ref7) {
      var _ref8 = _slicedToArray(_ref7, 1),
        bld = _ref8[0];
      _this._loading.next([].concat(_toConsumableArray(_this._loading.getValue()), ['users']));
      return (0, ts_client_1.showMetadata)(bld.id, 'parking-users');
    }), (0, operators_1.map)(function (metadata) {
      return metadata.details instanceof Array ? metadata.details : [];
    }), (0, operators_1.tap)(function () {
      return _this._loading.next(_this._loading.getValue().filter(function (_) {
        return _ !== 'users';
      }));
    }), (0, operators_1.shareReplay)(1));
    _this.assigned_space = _this.spaces.pipe((0, operators_1.map)(function (list) {
      return list.find(function (_) {
        var _$assigned_to, _email;
        return ((_$assigned_to = _.assigned_to) === null || _$assigned_to === void 0 ? void 0 : _$assigned_to.toLowerCase()) === ((_email = (0, common_1.currentUser)().email) === null || _email === void 0 ? void 0 : _email.toLowerCase());
      });
    }));
    _this.user_details = _this.users.pipe((0, operators_1.map)(function (list) {
      return list.find(function (_) {
        var _$email, _email2;
        return ((_$email = _.email) === null || _$email === void 0 ? void 0 : _$email.toLowerCase()) === ((_email2 = (0, common_1.currentUser)().email) === null || _email2 === void 0 ? void 0 : _email2.toLowerCase());
      });
    }));
    _this.deny_parking_access = _this.user_details.pipe((0, operators_1.map)(function (details) {
      return !!(details !== null && details !== void 0 && details.deny);
    }));
    _this.booked_space = (0, rxjs_1.combineLatest)([_this._org.active_building, _this.spaces]).pipe((0, operators_1.map)(function (_ref9) {
      var _ref10 = _slicedToArray(_ref9, 2),
        _ = _ref10[0],
        spaces = _ref10[1];
      return (0, bookings_fn_1.queryBookings)({
        period_start: (0, date_fns_1.getUnixTime)((0, date_fns_1.startOfDay)(Date.now())),
        period_end: (0, date_fns_1.getUnixTime)((0, date_fns_1.endOfDay)(Date.now())),
        type: 'parking'
      }).pipe((0, operators_1.catchError)(function () {
        return (0, rxjs_1.of)([]);
      }), (0, operators_1.map)(function (booking_list) {
        return booking_list.map(function (booking) {
          return spaces.find(function (space) {
            return space.id === booking.asset_id;
          });
        }).filter(function (space) {
          return !!space;
        });
      }));
    }), (0, operators_1.map)(function (_) {
      return _[0];
    }), (0, operators_1.shareReplay)(1));
    _this.subscription('spaces', _this.assigned_space.subscribe());
    return _this;
  }
  _inherits(ParkingService, _common_1$AsyncHandle);
  return _createClass(ParkingService);
}(common_1.AsyncHandler);
_ParkingService = ParkingService;
_ParkingService.ɵfac = function ParkingService_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _ParkingService)(i0.ɵɵinject(i1.OrganisationService), i0.ɵɵinject(i2.SettingsService));
};
_ParkingService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({
  token: _ParkingService,
  factory: _ParkingService.ɵfac,
  providedIn: 'root'
});
exports.ParkingService = ParkingService;

/***/ }),

/***/ 65772:
/*!*************************************************!*\
  !*** ./libs/calendar/src/lib/calendar.class.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.Calendar = void 0;
var date_fns_1 = __webpack_require__(/*! date-fns */ 25773);
var space_class_1 = __webpack_require__(/*! libs/spaces/src/lib/space.class */ 30735);
var Calendar = /*#__PURE__*/_createClass(function Calendar() {
  var data = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
  _classCallCheck(this, Calendar);
  this.id = data.id || '';
  this.name = data.name || '';
  this.primary = !!data.primary;
  this.summary = data.summary || '';
  this.can_edit = !!data.can_edit;
  this.resource = new space_class_1.Space(data.resource || data.system);
  this.availability = (data.availability || []).map(function (_ref) {
    var starts_at = _ref.starts_at,
      ends_at = _ref.ends_at,
      date = _ref.date,
      duration = _ref.duration,
      status = _ref.status;
    return {
      date: new Date(date || starts_at * 1000).valueOf(),
      duration: duration || (0, date_fns_1.differenceInMinutes)(ends_at * 1000, starts_at * 1000),
      status: status
    };
  });
  this.hidden = !!data.hidden;
});
exports.Calendar = Calendar;

/***/ }),

/***/ 458:
/*!**********************************************!*\
  !*** ./libs/calendar/src/lib/calendar.fn.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _objectSpread = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/objectSpread2.js */ 34092)["default"]);
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.queryCalendars = queryCalendars;
exports.queryCalendarAvailability = queryCalendarAvailability;
exports.querySpaceCalendarAvailability = querySpaceCalendarAvailability;
exports.queryUserFreeBusy = queryUserFreeBusy;
exports.querySpaceFreeBusy = querySpaceFreeBusy;
var ts_client_1 = __webpack_require__(/*! @placeos/ts-client */ 35713);
var operators_1 = __webpack_require__(/*! rxjs/operators */ 97303);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var space_class_1 = __webpack_require__(/*! libs/spaces/src/lib/space.class */ 30735);
var calendar_class_1 = __webpack_require__(/*! ./calendar.class */ 65772);
var CALENDAR_ENDPOINT = '/api/staff/v1/calendars';
/** List calendars associated with the logged in user */
function queryCalendars() {
  return (0, ts_client_1.get)(CALENDAR_ENDPOINT).pipe((0, operators_1.map)(function (i) {
    return i.map(function (c) {
      return new calendar_class_1.Calendar(c);
    });
  }));
}
/** List room calendars for available spaces based on the given query */
function queryCalendarAvailability(q) {
  var query = (0, common_1.toQueryString)(q);
  return (0, ts_client_1.get)("".concat(CALENDAR_ENDPOINT, "/availability").concat(query ? '?' + query : '')).pipe((0, operators_1.map)(function (i) {
    return i.map(function (c) {
      return new calendar_class_1.Calendar(c);
    });
  }));
}
var calendarsToSpaces = function calendarsToSpaces(org) {
  return (0, operators_1.map)(function (list) {
    return list.filter(function (cal) {
      return !!cal.resource;
    }).map(function (cal) {
      return new space_class_1.Space(_objectSpread(_objectSpread({}, cal.resource), {}, {
        level: org === null || org === void 0 ? void 0 : org.levelWithID(cal.resource.zones),
        availability: cal.availability
      }));
    }).filter(function (space) {
      return space.bookable;
    });
  });
};
/** List available spaces based on the given query */
function querySpaceCalendarAvailability(q, org) {
  return queryCalendarAvailability(q).pipe(calendarsToSpaces(org));
}
function queryUserFreeBusy(q) {
  var query = (0, common_1.toQueryString)(q);
  return (0, ts_client_1.get)("".concat(CALENDAR_ENDPOINT, "/free_busy").concat(query ? '?' + query : '')).pipe((0, operators_1.map)(function (i) {
    return i;
  }));
}
/** List room calendars for available spaces based on the given query */
function querySpaceFreeBusy(q, org) {
  var query = (0, common_1.toQueryString)(q);
  return (0, ts_client_1.get)("".concat(CALENDAR_ENDPOINT, "/free_busy").concat(query ? '?' + query : '')).pipe((0, operators_1.map)(function (i) {
    return i.map(function (c) {
      return new calendar_class_1.Calendar(c);
    });
  }), calendarsToSpaces(org));
}

/***/ }),

/***/ 4157:
/*!************************************!*\
  !*** ./libs/catering/src/index.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var tslib_1 = __webpack_require__(/*! tslib */ 24398);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/catering.module */ 7872), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/catering */ 95196), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/charge-code-list-modal.component */ 96861), exports);

/***/ }),

/***/ 76095:
/*!***********************************************************************!*\
  !*** ./libs/catering/src/lib/catering-import-menu-modal.component.ts ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _objectSpread = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/objectSpread2.js */ 34092)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _CateringImportMenuModalComponent;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.CateringImportMenuModalComponent = void 0;
var core_1 = __webpack_require__(/*! @angular/core */ 37580);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var catering_item_class_1 = __webpack_require__(/*! ./catering-item.class */ 25892);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @angular/common */ 60316);
var i2 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var i3 = __webpack_require__(/*! ../../../components/src/lib/icon.component */ 69434);
var i4 = __webpack_require__(/*! @angular/material/core */ 74646);
var i5 = __webpack_require__(/*! @angular/material/progress-spinner */ 41134);
function CateringImportMenuModalComponent_button_3_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "button", 4)(1, "app-icon");
    i0.ɵɵtext(2, "close");
    i0.ɵɵelementEnd()();
  }
}
function CateringImportMenuModalComponent_main_4_Template(rf, ctx) {
  if (rf & 1) {
    var _r1 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "main")(1, "div", 5)(2, "app-icon", 6);
    i0.ɵɵtext(3, "upload");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(4, "p");
    i0.ɵɵtext(5, "Click to select file or Drag and drop files");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(6, "input", 7);
    i0.ɵɵlistener("change", function CateringImportMenuModalComponent_main_4_Template_input_change_6_listener($event) {
      i0.ɵɵrestoreView(_r1);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.handleFileEvent($event));
    });
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(7, "div", 8)(8, "button", 9);
    i0.ɵɵlistener("click", function CateringImportMenuModalComponent_main_4_Template_button_click_8_listener() {
      i0.ɵɵrestoreView(_r1);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.downloadTemplate());
    });
    i0.ɵɵtext(9, " Download Template ");
    i0.ɵɵelementEnd()()();
  }
}
function CateringImportMenuModalComponent_ng_template_5_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "main", 10);
    i0.ɵɵelement(1, "mat-spinner", 11);
    i0.ɵɵelementStart(2, "p");
    i0.ɵɵtext(3);
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance(3);
    i0.ɵɵtextInterpolate(ctx_r1.loading);
  }
}
var CateringImportMenuModalComponent = /*#__PURE__*/function () {
  function CateringImportMenuModalComponent() {
    _classCallCheck(this, CateringImportMenuModalComponent);
    this.event = new core_1.EventEmitter();
  }
  /** Upload the image to the cloud */
  return _createClass(CateringImportMenuModalComponent, [{
    key: "handleFileEvent",
    value: function handleFileEvent(event) {
      var _this = this;
      this.loading = 'Processing menu data...';
      var element = event.target;
      if (!(element !== null && element !== void 0 && element.files)) return this.loading = '';
      var files = element.files;
      if (!files.length) return this.loading = '';
      var file = files[0];
      var fileReader = new FileReader();
      fileReader.addEventListener('loadend', function (e) {
        var contents = e.target.result;
        var data = (0, common_1.csvToJson)(contents);
        _this.loading = '';
        _this.event.emit({
          reason: 'done',
          metadata: data.filter(function (_) {
            return (_.type || '').toLowerCase() === 'item';
          }).map(function (i) {
            return new catering_item_class_1.CateringItem(_objectSpread(_objectSpread({}, i), {}, {
              options: data.filter(function (_) {
                return (_.type || '').toLowerCase() === 'option' && _.tags === i.id;
              }).map(function (_) {
                return {
                  id: _.id,
                  name: _.name,
                  group: _.category,
                  multiple: _.multiple,
                  unit_price: _.unit_price
                };
              })
            }));
          })
        });
      });
      fileReader.readAsText(file);
    }
  }, {
    key: "downloadTemplate",
    value: function downloadTemplate() {
      var template = "ID,Type,Name,Unit Price,Category,Description,Tags,Multiple\nitem-1,item,Coffee,200,Drink,Wake Up,,\noption-1,option,1 Sugar,20,Sugars,,item-1,false";
      (0, common_1.downloadFile)('import-menu-template.csv', template);
    }
  }]);
}();
_CateringImportMenuModalComponent = CateringImportMenuModalComponent;
_CateringImportMenuModalComponent.ɵfac = function CateringImportMenuModalComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _CateringImportMenuModalComponent)();
};
_CateringImportMenuModalComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _CateringImportMenuModalComponent,
  selectors: [["catering-import-menu-modal"]],
  outputs: {
    event: "event"
  },
  decls: 7,
  vars: 3,
  consts: [["load_state", ""], [1, "h-12", "bg-primary", "flex", "items-center", "justify-between", "px-4"], ["icon", "", "mat-dialog-close", "", 4, "ngIf"], [4, "ngIf", "ngIfElse"], ["icon", "", "mat-dialog-close", ""], [1, "relative", "flex", "flex-col", "items-center", "justify-center", "space-y-2", "h-[24rem]", "w-[24rem]", "border-4", "border-base-200", "border-dashed", "rounded-xl", "hover:bg-base-200", "m-4", "p-4", "cursor-pointer"], [1, "text-4xl"], ["type", "file", 1, "absolute", "inset-0", "opacity-0", 3, "change"], [1, "flex", "items-center", "justify-center", "px-4", "pb-4"], ["matRipple", "", 1, "clear", "underline", "w-48", 3, "click"], [1, "flex", "flex-col", "items-center", "justify-center", "space-y-2", "p-8", "h-[24rem]", "w-[24rem]"], ["diameter", "32"]],
  template: function CateringImportMenuModalComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵelementStart(0, "header", 1)(1, "h2");
      i0.ɵɵtext(2, "Import Catering Menu");
      i0.ɵɵelementEnd();
      i0.ɵɵtemplate(3, CateringImportMenuModalComponent_button_3_Template, 3, 0, "button", 2);
      i0.ɵɵelementEnd();
      i0.ɵɵtemplate(4, CateringImportMenuModalComponent_main_4_Template, 10, 0, "main", 3)(5, CateringImportMenuModalComponent_ng_template_5_Template, 4, 1, "ng-template", null, 0, i0.ɵɵtemplateRefExtractor);
    }
    if (rf & 2) {
      var load_state_r3 = i0.ɵɵreference(6);
      i0.ɵɵadvance(3);
      i0.ɵɵproperty("ngIf", !ctx.loading);
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", !ctx.loading)("ngIfElse", load_state_r3);
    }
  },
  dependencies: [i1.NgIf, i2.MatDialogClose, i3.IconComponent, i4.MatRipple, i5.MatProgressSpinner]
});
exports.CateringImportMenuModalComponent = CateringImportMenuModalComponent;

/***/ }),

/***/ 30807:
/*!****************************************************************!*\
  !*** ./libs/catering/src/lib/catering-item-modal.component.ts ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _taggedTemplateLiteral = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js */ 9959)["default"]);
var _objectSpread = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/objectSpread2.js */ 34092)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _CateringItemModalComponent, _templateObject, _templateObject2, _templateObject3;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.CateringItemModalComponent = void 0;
var keycodes_1 = __webpack_require__(/*! @angular/cdk/keycodes */ 74879);
var core_1 = __webpack_require__(/*! @angular/core */ 37580);
var forms_1 = __webpack_require__(/*! @angular/forms */ 34456);
var dialog_1 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var catering_item_class_1 = __webpack_require__(/*! ./catering-item.class */ 25892);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @angular/common */ 60316);
var i2 = __webpack_require__(/*! @angular/material/autocomplete */ 79771);
var i3 = __webpack_require__(/*! @angular/material/core */ 74646);
var i4 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var i5 = __webpack_require__(/*! @angular/material/checkbox */ 97024);
var i6 = __webpack_require__(/*! @angular/forms */ 34456);
var i7 = __webpack_require__(/*! ../../../components/src/lib/icon.component */ 69434);
var i8 = __webpack_require__(/*! @angular/material/form-field */ 24950);
var i9 = __webpack_require__(/*! @angular/material/input */ 95541);
var i10 = __webpack_require__(/*! @angular/material/progress-spinner */ 41134);
var i11 = __webpack_require__(/*! @angular/material/chips */ 12772);
var i12 = __webpack_require__(/*! ../../../form-fields/src/lib/counter.component */ 55507);
var i13 = __webpack_require__(/*! ../../../form-fields/src/lib/image-list-field.component */ 56864);
var _c0 = function _c0() {
  return {
    standalone: true
  };
};
function CateringItemModalComponent_button_3_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "button", 9)(1, "app-icon");
    i0.ɵɵtext(2, "close");
    i0.ɵɵelementEnd()();
  }
}
function CateringItemModalComponent_form_4_div_2_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 20)(1, "label", 21);
    i0.ɵɵtext(2, " Name");
    i0.ɵɵelementStart(3, "span");
    i0.ɵɵtext(4, "*");
    i0.ɵɵelementEnd();
    i0.ɵɵtext(5, ": ");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(6, "mat-form-field", 22);
    i0.ɵɵelement(7, "input", 23);
    i0.ɵɵelementStart(8, "mat-error");
    i0.ɵɵtext(9, "Name is required");
    i0.ɵɵelementEnd()()();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance();
    i0.ɵɵclassProp("error", ctx_r1.form.controls.name.invalid && ctx_r1.form.controls.name.touched);
  }
}
function CateringItemModalComponent_form_4_div_3_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 20)(1, "label", 24);
    i0.ɵɵtext(2, " Category");
    i0.ɵɵelementStart(3, "span");
    i0.ɵɵtext(4, "*");
    i0.ɵɵelementEnd();
    i0.ɵɵtext(5, ": ");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(6, "mat-form-field", 22);
    i0.ɵɵelement(7, "input", 25);
    i0.ɵɵelementStart(8, "mat-error");
    i0.ɵɵtext(9, "Category is required");
    i0.ɵɵelementEnd()()();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext(2);
    var auto_r3 = i0.ɵɵreference(9);
    i0.ɵɵadvance();
    i0.ɵɵclassProp("error", ctx_r1.form.controls.category.invalid && ctx_r1.form.controls.category.touched);
    i0.ɵɵadvance(6);
    i0.ɵɵproperty("matAutocomplete", auto_r3);
  }
}
function CateringItemModalComponent_form_4_div_4_mat_chip_row_6_Template(rf, ctx) {
  if (rf & 1) {
    var _r5 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "mat-chip-row", 30);
    i0.ɵɵlistener("removed", function CateringItemModalComponent_form_4_div_4_mat_chip_row_6_Template_mat_chip_row_removed_0_listener() {
      var item_r6 = i0.ɵɵrestoreView(_r5).$implicit;
      var ctx_r1 = i0.ɵɵnextContext(3);
      return i0.ɵɵresetView(ctx_r1.removeTag(item_r6));
    });
    i0.ɵɵtext(1);
    i0.ɵɵelementStart(2, "button", 31)(3, "app-icon");
    i0.ɵɵtext(4, "cancel");
    i0.ɵɵelementEnd()()();
  }
  if (rf & 2) {
    var item_r6 = ctx.$implicit;
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", item_r6, " ");
    i0.ɵɵadvance();
    i0.ɵɵattribute("aria-label", "Remove " + item_r6);
  }
}
function CateringItemModalComponent_form_4_div_4_Template(rf, ctx) {
  if (rf & 1) {
    var _r4 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 20)(1, "label", 26);
    i0.ɵɵi18n(2, 3);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(3, "mat-form-field", 22)(4, "mat-chip-grid", 27, 2);
    i0.ɵɵtemplate(6, CateringItemModalComponent_form_4_div_4_mat_chip_row_6_Template, 5, 2, "mat-chip-row", 28);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(7, "input", 29);
    i0.ɵɵlistener("matChipInputTokenEnd", function CateringItemModalComponent_form_4_div_4_Template_input_matChipInputTokenEnd_7_listener($event) {
      i0.ɵɵrestoreView(_r4);
      var ctx_r1 = i0.ɵɵnextContext(2);
      return i0.ɵɵresetView(ctx_r1.addTag($event));
    });
    i0.ɵɵelementEnd()()();
  }
  if (rf & 2) {
    var chipList_r7 = i0.ɵɵreference(5);
    var ctx_r1 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance();
    i0.ɵɵclassProp("error", ctx_r1.form.controls.tags.invalid && ctx_r1.form.controls.tags.touched);
    i0.ɵɵadvance(5);
    i0.ɵɵproperty("ngForOf", ctx_r1.tag_list);
    i0.ɵɵadvance();
    i0.ɵɵproperty("matChipInputFor", chipList_r7)("matChipInputSeparatorKeyCodes", ctx_r1.separators)("matChipInputAddOnBlur", true);
  }
}
function CateringItemModalComponent_form_4_div_5_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 20)(1, "label", 32);
    i0.ɵɵtext(2, "Description:");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(3, "mat-form-field", 22);
    i0.ɵɵelement(4, "textarea", 33);
    i0.ɵɵelementEnd()();
  }
}
function CateringItemModalComponent_form_4_div_6_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 20)(1, "label", 21);
    i0.ɵɵtext(2, " Unit Price");
    i0.ɵɵelementStart(3, "span");
    i0.ɵɵtext(4, "*");
    i0.ɵɵelementEnd();
    i0.ɵɵtext(5, ": ");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(6, "mat-form-field", 22);
    i0.ɵɵelement(7, "input", 34);
    i0.ɵɵelementStart(8, "mat-error");
    i0.ɵɵtext(9, "Unit Price is required");
    i0.ɵɵelementEnd()()();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance();
    i0.ɵɵclassProp("error", ctx_r1.form.controls.unit_price.invalid && ctx_r1.form.controls.unit_price.touched);
  }
}
function CateringItemModalComponent_form_4_div_27_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 20)(1, "label", 35);
    i0.ɵɵi18n(2, 4);
    i0.ɵɵelementEnd();
    i0.ɵɵelement(3, "image-list-field", 36);
    i0.ɵɵelementEnd();
  }
}
function CateringItemModalComponent_form_4_Template(rf, ctx) {
  if (rf & 1) {
    var _r1 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "form", 10)(1, "div", 11);
    i0.ɵɵtemplate(2, CateringItemModalComponent_form_4_div_2_Template, 10, 2, "div", 12)(3, CateringItemModalComponent_form_4_div_3_Template, 10, 3, "div", 12);
    i0.ɵɵelementEnd();
    i0.ɵɵtemplate(4, CateringItemModalComponent_form_4_div_4_Template, 8, 6, "div", 12)(5, CateringItemModalComponent_form_4_div_5_Template, 5, 0, "div", 12)(6, CateringItemModalComponent_form_4_div_6_Template, 10, 2, "div", 12);
    i0.ɵɵelementStart(7, "div", 13)(8, "label", 14);
    i0.ɵɵtext(9, "Accept Points?");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(10, "mat-checkbox", 15);
    i0.ɵɵtext(11);
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(12, "div", 16)(13, "mat-checkbox", 17);
    i0.ɵɵlistener("ngModelChange", function CateringItemModalComponent_form_4_Template_mat_checkbox_ngModelChange_13_listener($event) {
      i0.ɵɵrestoreView(_r1);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView($event ? ctx_r1.addTag({
        value: "Gluten Free"
      }) : ctx_r1.removeTag("Gluten Free"));
    });
    i0.ɵɵtext(14, " Gluten Free (GF) ");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(15, "mat-checkbox", 17);
    i0.ɵɵlistener("ngModelChange", function CateringItemModalComponent_form_4_Template_mat_checkbox_ngModelChange_15_listener($event) {
      i0.ɵɵrestoreView(_r1);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView($event ? ctx_r1.addTag({
        value: "Vegan"
      }) : ctx_r1.removeTag("Vegan"));
    });
    i0.ɵɵtext(16, " Vegan (VG) ");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(17, "mat-checkbox", 17);
    i0.ɵɵlistener("ngModelChange", function CateringItemModalComponent_form_4_Template_mat_checkbox_ngModelChange_17_listener($event) {
      i0.ɵɵrestoreView(_r1);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView($event ? ctx_r1.addTag({
        value: "Vegetarian"
      }) : ctx_r1.removeTag("Vegetarian"));
    });
    i0.ɵɵtext(18, " Vegetarian (V) ");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(19, "mat-checkbox", 17);
    i0.ɵɵlistener("ngModelChange", function CateringItemModalComponent_form_4_Template_mat_checkbox_ngModelChange_19_listener($event) {
      i0.ɵɵrestoreView(_r1);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView($event ? ctx_r1.addTag({
        value: "Contains Dairy"
      }) : ctx_r1.removeTag("Contains Dairy"));
    });
    i0.ɵɵtext(20, " Contains Dairy (D) ");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(21, "mat-checkbox", 17);
    i0.ɵɵlistener("ngModelChange", function CateringItemModalComponent_form_4_Template_mat_checkbox_ngModelChange_21_listener($event) {
      i0.ɵɵrestoreView(_r1);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView($event ? ctx_r1.addTag({
        value: "Contains Nuts"
      }) : ctx_r1.removeTag("Contains Nuts"));
    });
    i0.ɵɵtext(22, " Contains Nuts (N) ");
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(23, "div", 13)(24, "label", 18);
    i0.ɵɵtext(25, "Discount Cap");
    i0.ɵɵelementEnd();
    i0.ɵɵelement(26, "a-counter", 19);
    i0.ɵɵelementEnd();
    i0.ɵɵtemplate(27, CateringItemModalComponent_form_4_div_27_Template, 4, 0, "div", 12);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var tmp_9_0;
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵproperty("formGroup", ctx_r1.form);
    i0.ɵɵadvance(2);
    i0.ɵɵproperty("ngIf", ctx_r1.form.controls.name);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", ctx_r1.form.controls.category);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", ctx_r1.form.controls.tags);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", ctx_r1.form.controls.description);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", ctx_r1.form.controls.unit_price);
    i0.ɵɵadvance(5);
    i0.ɵɵtextInterpolate(((tmp_9_0 = ctx_r1.form.get("accept_points")) == null ? null : tmp_9_0.value) ? "No" : "Yes");
    i0.ɵɵadvance(2);
    i0.ɵɵproperty("ngModel", ctx_r1.hasTag("Gluten Free"))("ngModelOptions", i0.ɵɵpureFunction0(22, _c0));
    i0.ɵɵadvance(2);
    i0.ɵɵproperty("ngModel", ctx_r1.hasTag("Vegan"))("ngModelOptions", i0.ɵɵpureFunction0(23, _c0));
    i0.ɵɵadvance(2);
    i0.ɵɵproperty("ngModel", ctx_r1.hasTag("Vegetarian"))("ngModelOptions", i0.ɵɵpureFunction0(24, _c0));
    i0.ɵɵadvance(2);
    i0.ɵɵproperty("ngModel", ctx_r1.hasTag("Contains Dairy"))("ngModelOptions", i0.ɵɵpureFunction0(25, _c0));
    i0.ɵɵadvance(2);
    i0.ɵɵproperty("ngModel", ctx_r1.hasTag("Contains Nuts"))("ngModelOptions", i0.ɵɵpureFunction0(26, _c0));
    i0.ɵɵadvance(5);
    i0.ɵɵproperty("min", 0)("max", 100)("step", 5)("render_fn", ctx_r1.renderPercent);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", ctx_r1.form.controls.images);
  }
}
function CateringItemModalComponent_footer_5_Template(rf, ctx) {
  if (rf & 1) {
    var _r8 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "footer", 37)(1, "button", 38);
    i0.ɵɵlistener("click", function CateringItemModalComponent_footer_5_Template_button_click_1_listener() {
      i0.ɵɵrestoreView(_r8);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.saveChanges());
    });
    i0.ɵɵtext(2, " Save ");
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance();
    i0.ɵɵproperty("disabled", !ctx_r1.form.dirty);
  }
}
function CateringItemModalComponent_ng_template_6_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 39);
    i0.ɵɵelement(1, "mat-spinner", 40);
    i0.ɵɵelementStart(2, "p");
    i0.ɵɵtext(3, "Saving catering item...");
    i0.ɵɵelementEnd()();
  }
}
function CateringItemModalComponent_mat_option_10_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "mat-option", 41);
    i0.ɵɵtext(1);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var option_r9 = ctx.$implicit;
    i0.ɵɵproperty("value", option_r9);
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", option_r9, " ");
  }
}
var CateringItemModalComponent = /*#__PURE__*/function () {
  function CateringItemModalComponent(_data) {
    _classCallCheck(this, CateringItemModalComponent);
    this._data = _data;
    /** Emitter for events on the modal */
    this.event = new core_1.EventEmitter();
    /** Form fields for item */
    this.form = new forms_1.FormGroup({
      name: new forms_1.FormControl(this.item.name || '', [forms_1.Validators.required]),
      description: new forms_1.FormControl(this.item.description || ''),
      category: new forms_1.FormControl(this.item.category || '', [forms_1.Validators.required]),
      unit_price: new forms_1.FormControl(this.item.unit_price, [forms_1.Validators.required]),
      tags: new forms_1.FormControl(this.item.tags || []),
      accept_points: new forms_1.FormControl(this.item.accept_points || false),
      discount_cap: new forms_1.FormControl(this.item.discount_cap || 0),
      images: new forms_1.FormControl(this.item.images || [])
    });
    /** Whether changes are being saved */
    this.loading = false;
    /** List of separator characters for tags */
    this.separators = [keycodes_1.ENTER, keycodes_1.COMMA, keycodes_1.SPACE];
  }
  /**
   * Add a tag to the list of tags for the item
   * @param event Input event
   */
  return _createClass(CateringItemModalComponent, [{
    key: "item",
    get: /** Current item details */
    function get() {
      return this._data.item || new catering_item_class_1.CateringItem();
    }
    /** List of available categories */
  }, {
    key: "categories",
    get: function get() {
      return this._data.categories || [];
    }
  }, {
    key: "tag_list",
    get: function get() {
      return this.form.controls.tags.value;
    }
  }, {
    key: "renderPercent",
    value: function renderPercent() {
      var value = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;
      return "".concat(value, "%");
    }
  }, {
    key: "hasTag",
    value: function hasTag(tag) {
      return this.tag_list.includes(tag);
    }
  }, {
    key: "addTag",
    value: function addTag(event) {
      if (!this.form || !this.form.controls.tags) return;
      this.form.controls.tags.markAsDirty();
      var input = event.input;
      var value = event.value;
      var tag_list = this.tag_list;
      if ((value || '').trim()) {
        tag_list.push(value);
        this.form.controls.tags.setValue(tag_list);
      }
      // Reset the input value
      if (input) input.value = '';
    }
    /**
     * Remove tag from the list
     * @param existing_tag Tag to remove
     */
  }, {
    key: "removeTag",
    value: function removeTag(existing_tag) {
      if (!this.form || !this.form.controls.tags) return;
      var tag_list = this.tag_list;
      this.form.controls.tags.markAsDirty();
      var index = tag_list.indexOf(existing_tag);
      if (index >= 0) {
        tag_list.splice(index, 1);
        this.form.controls.tags.setValue(tag_list);
      }
    }
  }, {
    key: "saveChanges",
    value: function saveChanges() {
      this.loading = true;
      this.event.emit({
        reason: 'done',
        metadata: {
          item: new catering_item_class_1.CateringItem(_objectSpread(_objectSpread({}, this.item), {}, {
            id: this.item.id || "item-".concat((0, common_1.randomInt)(99999999))
          }, this.form.value))
        }
      });
    }
  }]);
}();
_CateringItemModalComponent = CateringItemModalComponent;
_CateringItemModalComponent.ɵfac = function CateringItemModalComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _CateringItemModalComponent)(i0.ɵɵdirectiveInject(dialog_1.MAT_DIALOG_DATA));
};
_CateringItemModalComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _CateringItemModalComponent,
  selectors: [["catering-item-modal"]],
  outputs: {
    event: "event"
  },
  decls: 11,
  vars: 6,
  consts: function consts() {
    var i18n_0;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_zoneTagsPlaceholder$$LIBS_CATERING_SRC_LIB_CATERING_ITEM_MODAL_COMPONENT_TS_0 = goog.getMsg("Item tags e.g. Gluten Free, Vegan etc.");
      i18n_0 = MSG_EXTERNAL_zoneTagsPlaceholder$$LIBS_CATERING_SRC_LIB_CATERING_ITEM_MODAL_COMPONENT_TS_0;
    } else {
      i18n_0 = $localize(_templateObject || (_templateObject = _taggedTemplateLiteral([":@@zoneTagsPlaceholder\u241Fc133beffffe3288bbdbf8572a32910c33ce14991\u241F2194594490376201833:Item tags e.g. Gluten Free, Vegan etc."])));
    }
    var i18n_1;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_tagsLabel$$LIBS_CATERING_SRC_LIB_CATERING_ITEM_MODAL_COMPONENT_TS_1 = goog.getMsg(" Tags: ");
      i18n_1 = MSG_EXTERNAL_tagsLabel$$LIBS_CATERING_SRC_LIB_CATERING_ITEM_MODAL_COMPONENT_TS_1;
    } else {
      i18n_1 = $localize(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([":@@tagsLabel\u241F800ffadd463cfe152c5af3fa9f13803ab2e77b93\u241F4746186018558508280: Tags: "])));
    }
    var i18n_2;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_imagesLabel$$LIBS_CATERING_SRC_LIB_CATERING_ITEM_MODAL_COMPONENT_TS_2 = goog.getMsg("Images:");
      i18n_2 = MSG_EXTERNAL_imagesLabel$$LIBS_CATERING_SRC_LIB_CATERING_ITEM_MODAL_COMPONENT_TS_2;
    } else {
      i18n_2 = $localize(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([":@@imagesLabel\u241Fe5d9e00faa06714d7671b164cad364b26f4c585b\u241F5137125764814732349:Images:"])));
    }
    return [["load_state", ""], ["auto", "matAutocomplete"], ["chipList", ""], i18n_1, i18n_2, ["icon", "", "matRipple", "", "mat-dialog-close", "", 4, "ngIf"], ["class", "p-4 overflow-auto max-h-[65vh]", 3, "formGroup", 4, "ngIf", "ngIfElse"], ["class", "flex p-2 items-center justify-center border-t border-solid border-base-200", 4, "ngIf"], [3, "value", 4, "ngFor", "ngForOf"], ["icon", "", "matRipple", "", "mat-dialog-close", ""], [1, "p-4", "overflow-auto", "max-h-[65vh]", 3, "formGroup"], [1, "flex", "items-center", "space-x-2"], ["class", "flex flex-col", 4, "ngIf"], [1, "flex", "items-center"], [1, "flex-none", "w-28", "min-w-0"], ["formControlName", "accept_points"], ["list", "", 1, "flex", "items-center", "flex-wrap", "max-w-lg"], [3, "ngModelChange", "ngModel", "ngModelOptions"], [1, "flex-1", "w-24", "min-w-0"], ["formControlName", "discount_cap", 1, "border", "border-base-200", "rounded", 3, "min", "max", "step", "render_fn"], [1, "flex", "flex-col"], ["for", "title"], ["appearance", "outline"], ["matInput", "", "name", "name", "placeholder", "Item name", "formControlName", "name"], ["for", "category"], ["matInput", "", "name", "category", "placeholder", "Category", "formControlName", "category", 3, "matAutocomplete"], ["for", "tags"], ["aria-label", "Item Tags"], [3, "removed", 4, "ngFor", "ngForOf"], ["name", "tags", "placeholder", i18n_0, 3, "matChipInputTokenEnd", "matChipInputFor", "matChipInputSeparatorKeyCodes", "matChipInputAddOnBlur"], [3, "removed"], ["matChipRemove", ""], ["for", "description"], ["matInput", "", "name", "description", "placeholder", "Item Description", "formControlName", "description"], ["matInput", "", "name", "unit-price", "type", "number", "placeholder", "Unit Price", "formControlName", "unit_price"], ["for", "images"], ["name", "images", "formControlName", "images"], [1, "flex", "p-2", "items-center", "justify-center", "border-t", "border-solid", "border-base-200"], ["btn", "", "matRipple", "", 3, "click", "disabled"], [1, "flex", "flex-col", "items-center", "p-8", "space-y-2", "w-64"], ["diameter", "32"], [3, "value"]];
  },
  template: function CateringItemModalComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵelementStart(0, "header")(1, "h3");
      i0.ɵɵtext(2);
      i0.ɵɵelementEnd();
      i0.ɵɵtemplate(3, CateringItemModalComponent_button_3_Template, 3, 0, "button", 5);
      i0.ɵɵelementEnd();
      i0.ɵɵtemplate(4, CateringItemModalComponent_form_4_Template, 28, 27, "form", 6)(5, CateringItemModalComponent_footer_5_Template, 3, 1, "footer", 7)(6, CateringItemModalComponent_ng_template_6_Template, 4, 0, "ng-template", null, 0, i0.ɵɵtemplateRefExtractor);
      i0.ɵɵelementStart(8, "mat-autocomplete", null, 1);
      i0.ɵɵtemplate(10, CateringItemModalComponent_mat_option_10_Template, 2, 2, "mat-option", 8);
      i0.ɵɵelementEnd();
    }
    if (rf & 2) {
      var load_state_r10 = i0.ɵɵreference(7);
      i0.ɵɵadvance(2);
      i0.ɵɵtextInterpolate1("", ctx.item.id ? "Edit" : "Add", " Item");
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", !ctx.loading);
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", ctx.form && !ctx.loading)("ngIfElse", load_state_r10);
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", !ctx.loading);
      i0.ɵɵadvance(5);
      i0.ɵɵproperty("ngForOf", ctx.categories);
    }
  },
  dependencies: [i1.NgForOf, i1.NgIf, i2.MatAutocomplete, i3.MatOption, i2.MatAutocompleteTrigger, i4.MatDialogClose, i5.MatCheckbox, i6.ɵNgNoValidate, i6.DefaultValueAccessor, i6.NumberValueAccessor, i6.NgControlStatus, i6.NgControlStatusGroup, i6.NgModel, i6.FormGroupDirective, i6.FormControlName, i7.IconComponent, i8.MatFormField, i8.MatError, i3.MatRipple, i9.MatInput, i10.MatProgressSpinner, i11.MatChipGrid, i11.MatChipInput, i11.MatChipRemove, i11.MatChipRow, i12.CounterComponent, i13.ImageListFieldComponent],
  styles: ["[list][_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%] {\n                margin: 0.5rem;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNhdGVyaW5nLWl0ZW0tbW9kYWwuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxjQUFjO1lBQ2xCIiwiZmlsZSI6ImNhdGVyaW5nLWl0ZW0tbW9kYWwuY29tcG9uZW50LnRzIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICBbbGlzdF0gbWF0LWNoZWNrYm94IHtcbiAgICAgICAgICAgICAgICBtYXJnaW46IDAuNXJlbTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl19 */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvY2F0ZXJpbmcvc3JjL2xpYi9jYXRlcmluZy1pdGVtLW1vZGFsLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1lBQ1k7Z0JBQ0ksY0FBYztZQUNsQjs7QUFFWixvWkFBb1oiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIFtsaXN0XSBtYXQtY2hlY2tib3gge1xuICAgICAgICAgICAgICAgIG1hcmdpbjogMC41cmVtO1xuICAgICAgICAgICAgfVxuICAgICAgICAiXSwic291cmNlUm9vdCI6IiJ9 */"]
});
exports.CateringItemModalComponent = CateringItemModalComponent;

/***/ }),

/***/ 25892:
/*!******************************************************!*\
  !*** ./libs/catering/src/lib/catering-item.class.ts ***!
  \******************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.CateringItem = void 0;
var CateringItem = /*#__PURE__*/function () {
  function CateringItem() {
    var _this$options, _data$in_order;
    var data = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    _classCallCheck(this, CateringItem);
    this.id = data.id || '';
    this.name = data.name || data.id || '';
    this.category = data.category || '';
    this.unit_price = data.unit_price || 0;
    this.description = data.description || '';
    this.quantity = data.quantity || 0;
    this.discount_cap = data.discount_cap || 0;
    this.accept_points = !!data.accept_points;
    this.tags = data.tags || [];
    this.images = data.images || [];
    this.options = data.options || [];
    var has_options = this.options.some(function (_) {
      return _.active === true;
    });
    this.option_list = (has_options ? this.options.filter(function (_) {
      return _.active === true;
    }) : data.option_list) || [];
    this.hide_for_zones = data.hide_for_zones || [];
    this.unit_price_with_options = this.unit_price + this.option_list.map(function (i) {
      return i.unit_price || 0;
    }).reduce(function (c, a) {
      return c + a;
    }, 0);
    this.total_cost = this.unit_price_with_options * this.quantity;
    this.options_string = ((_this$options = this.options) === null || _this$options === void 0 ? void 0 : _this$options.map(function (_) {
      return _.id || '';
    }).sort(function (a, b) {
      return a.localeCompare(b);
    }).join(',')) || '';
    this.in_order = (_data$in_order = data.in_order) !== null && _data$in_order !== void 0 ? _data$in_order : false;
  }
  return _createClass(CateringItem, [{
    key: "custom_id",
    get: function get() {
      var options = this.option_list.map(function (_) {
        return _.id;
      }).join('+');
      return "".concat(this.id, "[").concat(options, "]").concat(!this.in_order ? 'menu' : '');
    }
  }]);
}();
exports.CateringItem = CateringItem;

/***/ }),

/***/ 61601:
/*!****************************************************************!*\
  !*** ./libs/catering/src/lib/catering-list-field.component.ts ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _createForOfIteratorHelper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createForOfIteratorHelper.js */ 36350)["default"]);
var _toConsumableArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/toConsumableArray.js */ 86033)["default"]);
var _objectSpread = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/objectSpread2.js */ 34092)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _CateringListFieldComponent;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.CateringListFieldComponent = void 0;
var core_1 = __webpack_require__(/*! @angular/core */ 37580);
var forms_1 = __webpack_require__(/*! @angular/forms */ 34456);
var dialog_1 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var new_catering_order_modal_component_1 = __webpack_require__(/*! libs/catering/src/lib/catering-order-modal/new-catering-order-modal.component */ 11732);
var catering_order_class_1 = __webpack_require__(/*! ./catering-order.class */ 75555);
var organisation_1 = __webpack_require__(/*! @placeos/organisation */ 2510);
var date_fns_1 = __webpack_require__(/*! date-fns */ 25773);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @placeos/common */ 22797);
var i2 = __webpack_require__(/*! @placeos/organisation */ 2510);
var i3 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var i4 = __webpack_require__(/*! @angular/common */ 60316);
var i5 = __webpack_require__(/*! @angular/material/tooltip */ 80640);
var i6 = __webpack_require__(/*! ../../../components/src/lib/icon.component */ 69434);
var i7 = __webpack_require__(/*! @angular/material/core */ 74646);
function CateringListFieldComponent_div_1_div_8_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 16)(1, "app-icon");
    i0.ɵɵtext(2, "priority_high");
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext(2);
    i0.ɵɵproperty("matTooltip", ctx_r1.err_tooltip);
  }
}
function CateringListFieldComponent_div_1_button_12_Template(rf, ctx) {
  if (rf & 1) {
    var _r3 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "button", 17);
    i0.ɵɵlistener("click", function CateringListFieldComponent_div_1_button_12_Template_button_click_0_listener() {
      i0.ɵɵrestoreView(_r3);
      var order_r4 = i0.ɵɵnextContext().$implicit;
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.duplicateOrder(order_r4));
    });
    i0.ɵɵelementStart(1, "app-icon");
    i0.ɵɵtext(2, "content_copy");
    i0.ɵɵelementEnd()();
  }
}
function CateringListFieldComponent_div_1_button_13_Template(rf, ctx) {
  if (rf & 1) {
    var _r5 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "button", 18);
    i0.ɵɵlistener("click", function CateringListFieldComponent_div_1_button_13_Template_button_click_0_listener() {
      i0.ɵɵrestoreView(_r5);
      var order_r4 = i0.ɵɵnextContext().$implicit;
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.editOrder(order_r4));
    });
    i0.ɵɵelementStart(1, "app-icon");
    i0.ɵɵtext(2, "edit");
    i0.ɵɵelementEnd()();
  }
}
function CateringListFieldComponent_div_1_button_14_Template(rf, ctx) {
  if (rf & 1) {
    var _r6 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "button", 19);
    i0.ɵɵlistener("click", function CateringListFieldComponent_div_1_button_14_Template_button_click_0_listener() {
      i0.ɵɵrestoreView(_r6);
      var order_r4 = i0.ɵɵnextContext().$implicit;
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.removeOrder(order_r4));
    });
    i0.ɵɵelementStart(1, "app-icon");
    i0.ɵɵtext(2, "delete");
    i0.ɵɵelementEnd()();
  }
}
function CateringListFieldComponent_div_1_div_19_span_3_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "span", 27);
    i0.ɵɵtext(1);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var item_r8 = i0.ɵɵnextContext().$implicit;
    var ctx_r1 = i0.ɵɵnextContext(2);
    i0.ɵɵproperty("matTooltip", ctx_r1.optionList(item_r8));
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", (item_r8.option_list == null ? null : item_r8.option_list.length) || "0", " option(s) ");
  }
}
function CateringListFieldComponent_div_1_div_19_button_9_Template(rf, ctx) {
  if (rf & 1) {
    var _r9 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "button", 28);
    i0.ɵɵlistener("click", function CateringListFieldComponent_div_1_div_19_button_9_Template_button_click_0_listener() {
      i0.ɵɵrestoreView(_r9);
      var item_r8 = i0.ɵɵnextContext().$implicit;
      var order_r4 = i0.ɵɵnextContext().$implicit;
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.removeOrderItem(order_r4, item_r8));
    });
    i0.ɵɵelementStart(1, "app-icon");
    i0.ɵɵtext(2, "delete");
    i0.ɵɵelementEnd()();
  }
}
function CateringListFieldComponent_div_1_div_19_Template(rf, ctx) {
  if (rf & 1) {
    var _r7 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 20)(1, "div", 21);
    i0.ɵɵtext(2);
    i0.ɵɵtemplate(3, CateringListFieldComponent_div_1_div_19_span_3_Template, 2, 2, "span", 22);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(4, "div", 23);
    i0.ɵɵtext(5);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(6, "div", 24);
    i0.ɵɵtext(7);
    i0.ɵɵpipe(8, "currency");
    i0.ɵɵelementEnd();
    i0.ɵɵtemplate(9, CateringListFieldComponent_div_1_div_19_button_9_Template, 3, 0, "button", 25);
    i0.ɵɵelementStart(10, "button", 26);
    i0.ɵɵlistener("click", function CateringListFieldComponent_div_1_div_19_Template_button_click_10_listener() {
      var item_r8 = i0.ɵɵrestoreView(_r7).$implicit;
      var ctx_r1 = i0.ɵɵnextContext(2);
      return i0.ɵɵresetView(ctx_r1.toggleFavourite(item_r8));
    });
    i0.ɵɵelementStart(11, "app-icon");
    i0.ɵɵtext(12);
    i0.ɵɵelementEnd()()();
  }
  if (rf & 2) {
    var item_r8 = ctx.$implicit;
    var ctx_r1 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate1(" ", item_r8.name || "Item", " ");
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", item_r8.option_list == null ? null : item_r8.option_list.length);
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate1(" x", item_r8.quantity, " ");
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate1(" ", i0.ɵɵpipeBind2(8, 9, item_r8.unit_price_with_options / 100, ctx_r1.currency_code), " ea ");
    i0.ɵɵadvance(2);
    i0.ɵɵproperty("ngIf", !ctx_r1.disabled);
    i0.ɵɵadvance();
    i0.ɵɵclassProp("text-blue-400", ctx_r1.favorites.includes(item_r8.id));
    i0.ɵɵproperty("matTooltip", ctx_r1.favorites.includes(item_r8.id) ? "Remove from favourites" : "Add to favourites");
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate(ctx_r1.favorites.includes(item_r8.id) ? "favorite" : "favorite_border");
  }
}
function CateringListFieldComponent_div_1_Template(rf, ctx) {
  if (rf & 1) {
    var _r1 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 4)(1, "div", 5)(2, "div", 6)(3, "div", 7)(4, "div");
    i0.ɵɵtext(5);
    i0.ɵɵpipe(6, "date");
    i0.ɵɵpipe(7, "date");
    i0.ɵɵelementEnd();
    i0.ɵɵtemplate(8, CateringListFieldComponent_div_1_div_8_Template, 3, 1, "div", 8);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(9, "div", 9);
    i0.ɵɵtext(10);
    i0.ɵɵpipe(11, "currency");
    i0.ɵɵelementEnd()();
    i0.ɵɵtemplate(12, CateringListFieldComponent_div_1_button_12_Template, 3, 0, "button", 10)(13, CateringListFieldComponent_div_1_button_13_Template, 3, 0, "button", 11)(14, CateringListFieldComponent_div_1_button_14_Template, 3, 0, "button", 12);
    i0.ɵɵelementStart(15, "button", 13);
    i0.ɵɵlistener("click", function CateringListFieldComponent_div_1_Template_button_click_15_listener() {
      var order_r4 = i0.ɵɵrestoreView(_r1).$implicit;
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.show_order[order_r4.id] = !ctx_r1.show_order[order_r4.id]);
    });
    i0.ɵɵelementStart(16, "app-icon");
    i0.ɵɵtext(17);
    i0.ɵɵelementEnd()()();
    i0.ɵɵelementStart(18, "div", 14);
    i0.ɵɵtemplate(19, CateringListFieldComponent_div_1_div_19_Template, 13, 12, "div", 15);
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var order_r4 = ctx.$implicit;
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵclassProp("border-error", ctx_r1.end_time < order_r4.deliver_at)("border-base-300", ctx_r1.end_time >= order_r4.deliver_at);
    i0.ɵɵadvance(5);
    i0.ɵɵtextInterpolate2(" Order for ", i0.ɵɵpipeBind2(6, 16, order_r4.deliver_at_time, "mediumDate"), " at ", i0.ɵɵpipeBind2(7, 19, order_r4.deliver_at_time, ctx_r1.time_format), " ");
    i0.ɵɵadvance(3);
    i0.ɵɵproperty("ngIf", ctx_r1.end_time < order_r4.deliver_at);
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate2(" ", order_r4.item_count, " item(s) for ", i0.ɵɵpipeBind2(11, 22, order_r4.total_cost / 100, ctx_r1.currency_code), " ");
    i0.ɵɵadvance(2);
    i0.ɵɵproperty("ngIf", !ctx_r1.disabled);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", !ctx_r1.disabled);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", !ctx_r1.disabled);
    i0.ɵɵadvance();
    i0.ɵɵproperty("matTooltip", ctx_r1.show_order[order_r4.id] ? "Hide order items" : "Show order items");
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate1(" ", ctx_r1.show_order[order_r4.id] ? "expand_less" : "expand_more", " ");
    i0.ɵɵadvance();
    i0.ɵɵproperty("@show", ctx_r1.show_order[order_r4.id] ? "show" : "hide");
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngForOf", order_r4.items);
  }
}
var EMPTY_FAVS = [];
var CateringListFieldComponent = /*#__PURE__*/function () {
  function CateringListFieldComponent(_settings, _org, _dialog) {
    var _this = this;
    _classCallCheck(this, CateringListFieldComponent);
    this._settings = _settings;
    this._org = _org;
    this._dialog = _dialog;
    this.options = {};
    this.orders = [];
    this.show_order = {};
    this.disabled = false;
    this.err_tooltip = 'Delivery time is outside of the event time.\nThis order will be ignored.';
    this.selected = [];
    this.registerOnChange = function (fn) {
      return _this._onChange = fn;
    };
    this.registerOnTouched = function (fn) {
      return _this._onTouch = fn;
    };
    this.setDisabledState = function (s) {
      return _this.disabled = s;
    };
  }
  /**
   * Update the form field value
   * @param new_value New value to set on the form field
   */
  return _createClass(CateringListFieldComponent, [{
    key: "favorites",
    get: function get() {
      return this._settings.get('favourite_menu_items') || EMPTY_FAVS;
    }
  }, {
    key: "end_time",
    get: function get() {
      var time = (this.options.date || Date.now()) + (this.options.duration || 30) * 60 * 1000;
      return this.options.all_day ? (0, date_fns_1.endOfDay)(time).valueOf() : time;
    }
  }, {
    key: "time_format",
    get: function get() {
      return this._settings.time_format || 'shortTime';
    }
  }, {
    key: "currency_code",
    get: function get() {
      var _this$_org$building;
      return ((_this$_org$building = this._org.building) === null || _this$_org$building === void 0 ? void 0 : _this$_org$building.currency) || 'USD';
    }
  }, {
    key: "setValue",
    value: function setValue(new_value) {
      this.orders = new_value;
      if (this._onChange) this._onChange(this.orders);
    }
  }, {
    key: "ngOnChanges",
    value: function ngOnChanges(changes) {
      var _this2 = this;
      if (changes.options) {
        this.orders = (this.orders || []).map(function (_) {
          return new catering_order_class_1.CateringOrder(_objectSpread(_objectSpread({}, _), {}, {
            event: _this2.options
          }));
        });
      }
    }
    /**
     * Update local value when form control value is changed
     * @param value The new value for the component
     */
  }, {
    key: "writeValue",
    value: function writeValue(value) {
      var _this3 = this;
      this.orders = (value || []).map(function (_) {
        return new catering_order_class_1.CateringOrder(_objectSpread(_objectSpread({}, _), {}, {
          event: _this3.options
        }));
      });
    }
  }, {
    key: "removeOrder",
    value: function removeOrder(order) {
      var updated_list = this.orders.filter(function (_) {
        return _.id !== order.id;
      });
      this.setValue(updated_list);
    }
  }, {
    key: "duplicateOrder",
    value: function duplicateOrder(order) {
      var new_order = new catering_order_class_1.CateringOrder(_objectSpread(_objectSpread({}, order), {}, {
        id: "order-".concat((0, common_1.randomString)(8))
      }));
      this.setValue([].concat(_toConsumableArray(this.orders), [new_order]));
    }
  }, {
    key: "removeOrderItem",
    value: function removeOrderItem(order, item) {
      var new_order = new catering_order_class_1.CateringOrder(_objectSpread(_objectSpread({}, order), {}, {
        items: order.items.filter(function (_) {
          return _.custom_id !== item.custom_id;
        })
      }));
      var updated_list = this.orders.filter(function (_) {
        return _.id !== order.id;
      });
      if (new_order.items.length > 0) {
        this.setValue([].concat(_toConsumableArray(updated_list), [new_order]));
      } else this.setValue(updated_list);
    }
  }, {
    key: "editOrder",
    value: function editOrder() {
      var _this4 = this;
      var order = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : new catering_order_class_1.CateringOrder();
      var ref = this._dialog.open(new_catering_order_modal_component_1.NewCateringOrderModalComponent, {
        data: {
          items: order.items,
          details: _objectSpread(_objectSpread({}, this.options), {}, {
            date: this.options.all_day ? (0, date_fns_1.startOfDay)(this.options.date).valueOf() : this.options.date,
            duration: this.options.all_day ? Math.max(24 * 60, this.options.duration) : this.options.duration
          }),
          exact_time: !!order.deliver_time,
          offset: order.deliver_offset,
          offset_day: order.deliver_day_offset
        }
      });
      ref.afterClosed().subscribe(function (items) {
        var orders = _this4.orders.filter(function (_) {
          return _.id !== order.id;
        });
        if (!(items !== null && items !== void 0 && items.length)) return;
        var time = new Date(_this4.options.date);
        var _iterator = _createForOfIteratorHelper(items),
          _step;
        try {
          for (_iterator.s(); !(_step = _iterator.n()).done;) {
            var item = _step.value;
            item.options = _toConsumableArray(item.options.map(function (_) {
              return _objectSpread({}, _);
            }));
            var _iterator2 = _createForOfIteratorHelper(item.options),
              _step2;
            try {
              var _loop = function _loop() {
                var option = _step2.value;
                var opt = item.option_list.find(function (_) {
                  return _.id === option.id;
                });
                option.active = !!opt;
              };
              for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
                _loop();
              }
            } catch (err) {
              _iterator2.e(err);
            } finally {
              _iterator2.f();
            }
          }
        } catch (err) {
          _iterator.e(err);
        } finally {
          _iterator.f();
        }
        var new_order = new catering_order_class_1.CateringOrder(_objectSpread(_objectSpread({}, order), {}, {
          items: items,
          event: _this4.options,
          deliver_offset: ref.componentInstance.offset,
          deliver_time: ref.componentInstance.exact_time ? time.getHours() + time.getMinutes() / 60 : null,
          deliver_day_offset: ref.componentInstance.offset_day || 0
        }));
        if (new_order.item_count <= 0) return;
        _this4.setValue([].concat(_toConsumableArray(orders), [new_order]));
      });
    }
  }, {
    key: "optionList",
    value: function optionList(item) {
      var _item$option_list;
      return (_item$option_list = item.option_list) === null || _item$option_list === void 0 ? void 0 : _item$option_list.map(function (_) {
        return _.name;
      }).join('\n');
    }
  }, {
    key: "toggleFavourite",
    value: function toggleFavourite(cateringitem) {
      var fav_list = this.favorites;
      var new_state = !fav_list.includes(cateringitem.id);
      if (new_state) {
        this._settings.saveUserSetting('favourite_menu_items', [].concat(_toConsumableArray(fav_list), [cateringitem.id]));
      } else {
        this._settings.saveUserSetting('favourite_menu_items', fav_list.filter(function (_) {
          return _ !== cateringitem.id;
        }));
      }
    }
  }]);
}();
_CateringListFieldComponent = CateringListFieldComponent;
_CateringListFieldComponent.ɵfac = function CateringListFieldComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _CateringListFieldComponent)(i0.ɵɵdirectiveInject(i1.SettingsService), i0.ɵɵdirectiveInject(i2.OrganisationService), i0.ɵɵdirectiveInject(i3.MatDialog));
};
_CateringListFieldComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _CateringListFieldComponent,
  selectors: [["catering-list-field"]],
  inputs: {
    options: "options"
  },
  features: [i0.ɵɵProvidersFeature([{
    provide: forms_1.NG_VALUE_ACCESSOR,
    /* istanbul ignore next */
    useExisting: (0, core_1.forwardRef)(function () {
      return _CateringListFieldComponent;
    }),
    multi: true
  }]), i0.ɵɵNgOnChangesFeature],
  decls: 8,
  vars: 2,
  consts: [["list", "", 1, "space-y-2"], ["order", "", "class", "border shadow bg-base-100 rounded-xl overflow-hidden", 3, "border-error", "border-base-300", 4, "ngFor", "ngForOf"], ["btn", "", "matRipple", "", "name", "add-catering-item", 1, "w-full", "inverse", "mt-2", 3, "click", "disabled"], [1, "flex", "items-center", "justify-center", "space-x-2"], ["order", "", 1, "border", "shadow", "bg-base-100", "rounded-xl", "overflow-hidden"], [1, "flex", "items-center", "space-x-2", "p-4"], [1, "flex-1"], [1, "flex", "items-center", "space-x-4"], ["class", "flex items-center justify-center h-6 w-6 rounded-full bg-error text-error-content", 3, "matTooltip", 4, "ngIf"], [1, "text-xs", "opacity-60"], ["icon", "", "matRipple", "", "matTooltip", "Duplicate Order", 3, "click", 4, "ngIf"], ["icon", "", "matRipple", "", "matTooltip", "Edit Order", 3, "click", 4, "ngIf"], ["icon", "", "matRipple", "", "matTooltip", "Remove Order", "class", "text-error", 3, "click", 4, "ngIf"], ["icon", "", "matRipple", "", 3, "click", "matTooltip"], [1, "flex", "flex-col", "bg-base-200", "divide-y", "divide-base-100"], ["class", "flex items-center px-4 py-1 space-x-2 hover:opacity-90", 4, "ngFor", "ngForOf"], [1, "flex", "items-center", "justify-center", "h-6", "w-6", "rounded-full", "bg-error", "text-error-content", 3, "matTooltip"], ["icon", "", "matRipple", "", "matTooltip", "Duplicate Order", 3, "click"], ["icon", "", "matRipple", "", "matTooltip", "Edit Order", 3, "click"], ["icon", "", "matRipple", "", "matTooltip", "Remove Order", 1, "text-error", 3, "click"], [1, "flex", "items-center", "px-4", "py-1", "space-x-2", "hover:opacity-90"], [1, "flex", "items-center", "flex-1"], ["class", "text-xs opacity-60 ml-4 font-normal", 3, "matTooltip", 4, "ngIf"], [1, "rounded", "bg-success", "text-success-content", "text-xs", "px-2", "py-1"], [1, "rounded", "bg-info", "text-info-content", "text-xs", "px-2", "py-1"], ["icon", "", "matRipple", "", "matTooltip", "Remove Order Item", "class", "text-error", 3, "click", 4, "ngIf"], ["icon", "", "matRipple", "", "name", "toggle-catering-item-favourite", 3, "click", "matTooltip"], [1, "text-xs", "opacity-60", "ml-4", "font-normal", 3, "matTooltip"], ["icon", "", "matRipple", "", "matTooltip", "Remove Order Item", 1, "text-error", 3, "click"]],
  template: function CateringListFieldComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵelementStart(0, "div", 0);
      i0.ɵɵtemplate(1, CateringListFieldComponent_div_1_Template, 20, 25, "div", 1);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(2, "button", 2);
      i0.ɵɵlistener("click", function CateringListFieldComponent_Template_button_click_2_listener() {
        return ctx.editOrder();
      });
      i0.ɵɵelementStart(3, "div", 3)(4, "app-icon");
      i0.ɵɵtext(5, "search");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(6, "span");
      i0.ɵɵtext(7, "Add Order");
      i0.ɵɵelementEnd()()();
    }
    if (rf & 2) {
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngForOf", ctx.orders);
      i0.ɵɵadvance();
      i0.ɵɵproperty("disabled", ctx.disabled);
    }
  },
  dependencies: [i4.NgForOf, i4.NgIf, i5.MatTooltip, i6.IconComponent, i7.MatRipple, i4.CurrencyPipe, i4.DatePipe],
  data: {
    animation: [common_1.ANIMATION_SHOW_CONTRACT_EXPAND]
  }
});
exports.CateringListFieldComponent = CateringListFieldComponent;

/***/ }),

/***/ 48519:
/*!**********************************************************!*\
  !*** ./libs/catering/src/lib/catering-menu.component.ts ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _objectSpread = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/objectSpread2.js */ 34092)["default"]);
var _toConsumableArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/toConsumableArray.js */ 86033)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _CateringMenuComponent;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.CateringMenuComponent = void 0;
var catering_state_service_1 = __webpack_require__(/*! ./catering-state.service */ 52201);
var catering_item_class_1 = __webpack_require__(/*! ./catering-item.class */ 25892);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var catering_orders_service_1 = __webpack_require__(/*! ./catering-orders.service */ 98197);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! ./catering-state.service */ 52201);
var i2 = __webpack_require__(/*! ./catering-orders.service */ 98197);
var i3 = __webpack_require__(/*! @angular/common */ 60316);
var i4 = __webpack_require__(/*! @angular/material/menu */ 31034);
var i5 = __webpack_require__(/*! @angular/material/checkbox */ 97024);
var i6 = __webpack_require__(/*! @angular/material/tooltip */ 80640);
var i7 = __webpack_require__(/*! @angular/forms */ 34456);
var i8 = __webpack_require__(/*! ../../../components/src/lib/icon.component */ 69434);
var i9 = __webpack_require__(/*! ../../../components/src/lib/simple-table.component */ 88328);
var i10 = __webpack_require__(/*! @angular/material/core */ 74646);
var _c0 = function _c0(a0) {
  return {
    key: "active",
    name: " ",
    content: a0,
    size: "3.5rem",
    sortable: false
  };
};
var _c1 = function _c1() {
  return {
    key: "name",
    name: "Name"
  };
};
var _c2 = function _c2() {
  return {
    key: "category",
    name: "Category"
  };
};
var _c3 = function _c3(a0) {
  return {
    key: "unit_price",
    name: "Price",
    content: a0,
    size: "6rem"
  };
};
var _c4 = function _c4(a0) {
  return {
    key: "actions",
    name: " ",
    content: a0,
    size: "6.5rem",
    sortable: false
  };
};
var _c5 = function _c5(a0, a1, a2, a3, a4) {
  return [a0, a1, a2, a3, a4];
};
function CateringMenuComponent_ng_template_1_Template(rf, ctx) {
  if (rf & 1) {
    var _r1 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "mat-checkbox", 6);
    i0.ɵɵlistener("ngModelChange", function CateringMenuComponent_ng_template_1_Template_mat_checkbox_ngModelChange_0_listener($event) {
      var row_r2 = i0.ɵɵrestoreView(_r1).row;
      var ctx_r2 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r2.setEnabled(row_r2, $event));
    });
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var row_r2 = ctx.row;
    var ctx_r2 = i0.ɵɵnextContext();
    i0.ɵɵproperty("ngModel", ctx_r2.isEnabled(row_r2));
  }
}
function CateringMenuComponent_ng_template_3_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 7);
    i0.ɵɵtext(1);
    i0.ɵɵpipe(2, "async");
    i0.ɵɵpipe(3, "currency");
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var data_r4 = ctx.data;
    var ctx_r2 = i0.ɵɵnextContext();
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", i0.ɵɵpipeBind2(3, 3, data_r4 / 100, i0.ɵɵpipeBind1(2, 1, ctx_r2.symbol)), " ");
  }
}
function CateringMenuComponent_ng_template_5_Template(rf, ctx) {
  if (rf & 1) {
    var _r5 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 8)(1, "button", 9)(2, "app-icon");
    i0.ɵɵtext(3, "more_vert");
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(4, "mat-menu", null, 4)(6, "button", 10);
    i0.ɵɵlistener("click", function CateringMenuComponent_ng_template_5_Template_button_click_6_listener() {
      var row_r6 = i0.ɵɵrestoreView(_r5).row;
      var ctx_r2 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r2.addOption(row_r6));
    });
    i0.ɵɵelementStart(7, "div", 11)(8, "app-icon");
    i0.ɵɵtext(9, "add");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(10, "div");
    i0.ɵɵtext(11, "Add Option");
    i0.ɵɵelementEnd()()();
    i0.ɵɵelementStart(12, "button", 10);
    i0.ɵɵlistener("click", function CateringMenuComponent_ng_template_5_Template_button_click_12_listener() {
      var row_r6 = i0.ɵɵrestoreView(_r5).row;
      var ctx_r2 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r2.editItem(row_r6));
    });
    i0.ɵɵelementStart(13, "div", 11)(14, "app-icon");
    i0.ɵɵtext(15, "edit");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(16, "div");
    i0.ɵɵtext(17, "Edit Item");
    i0.ɵɵelementEnd()()();
    i0.ɵɵelementStart(18, "button", 10);
    i0.ɵɵlistener("click", function CateringMenuComponent_ng_template_5_Template_button_click_18_listener() {
      var row_r6 = i0.ɵɵrestoreView(_r5).row;
      var ctx_r2 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r2.removeItem(row_r6));
    });
    i0.ɵɵelementStart(19, "div", 11)(20, "app-icon", 12);
    i0.ɵɵtext(21, "delete");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(22, "div");
    i0.ɵɵtext(23, "Remove Item");
    i0.ɵɵelementEnd()()()();
    i0.ɵɵelementStart(24, "button", 13);
    i0.ɵɵlistener("click", function CateringMenuComponent_ng_template_5_Template_button_click_24_listener() {
      var row_r6 = i0.ɵɵrestoreView(_r5).row;
      var ctx_r2 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r2.show_children[row_r6.id] = !ctx_r2.show_children[row_r6.id]);
    });
    i0.ɵɵelementStart(25, "app-icon");
    i0.ɵɵtext(26);
    i0.ɵɵelementEnd()()();
  }
  if (rf & 2) {
    var row_r6 = ctx.row;
    var menu_r7 = i0.ɵɵreference(5);
    var ctx_r2 = i0.ɵɵnextContext();
    i0.ɵɵadvance();
    i0.ɵɵclassProp("opacity-0", !ctx_r2.can_edit);
    i0.ɵɵproperty("disabled", !ctx_r2.can_edit)("matMenuTriggerFor", menu_r7);
    i0.ɵɵadvance(23);
    i0.ɵɵproperty("disabled", !(row_r6.options == null ? null : row_r6.options.length))("matTooltip", (row_r6.options == null ? null : row_r6.options.length) ? (ctx_r2.show_children[row_r6.id] ? "Hide" : "Show") + " Menu Item Options" : "");
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate1(" ", ctx_r2.show_children[row_r6.id] ? "keyboard_arrow_down" : "chevron_right", " ");
  }
}
function CateringMenuComponent_ng_template_7_div_0_button_7_Template(rf, ctx) {
  if (rf & 1) {
    var _r8 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "button", 22);
    i0.ɵɵlistener("click", function CateringMenuComponent_ng_template_7_div_0_button_7_Template_button_click_0_listener() {
      i0.ɵɵrestoreView(_r8);
      var option_r9 = i0.ɵɵnextContext().$implicit;
      var row_r10 = i0.ɵɵnextContext().row;
      var ctx_r2 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r2.editOption(row_r10, option_r9));
    });
    i0.ɵɵelementStart(1, "app-icon");
    i0.ɵɵtext(2, "edit");
    i0.ɵɵelementEnd()();
  }
}
function CateringMenuComponent_ng_template_7_div_0_button_8_Template(rf, ctx) {
  if (rf & 1) {
    var _r11 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "button", 23);
    i0.ɵɵlistener("click", function CateringMenuComponent_ng_template_7_div_0_button_8_Template_button_click_0_listener() {
      i0.ɵɵrestoreView(_r11);
      var option_r9 = i0.ɵɵnextContext().$implicit;
      var row_r10 = i0.ɵɵnextContext().row;
      var ctx_r2 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r2.removeOption(row_r10, option_r9));
    });
    i0.ɵɵelementStart(1, "app-icon", 12);
    i0.ɵɵtext(2, "delete");
    i0.ɵɵelementEnd()();
  }
}
function CateringMenuComponent_ng_template_7_div_0_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 15);
    i0.ɵɵelement(1, "div", 16);
    i0.ɵɵelementStart(2, "div", 17)(3, "div", 18);
    i0.ɵɵtext(4);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(5, "div", 19);
    i0.ɵɵtext(6);
    i0.ɵɵelementEnd()();
    i0.ɵɵtemplate(7, CateringMenuComponent_ng_template_7_div_0_button_7_Template, 3, 0, "button", 20)(8, CateringMenuComponent_ng_template_7_div_0_button_8_Template, 3, 0, "button", 21);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var option_r9 = ctx.$implicit;
    var ctx_r2 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance(4);
    i0.ɵɵtextInterpolate(option_r9.name);
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate1(" ", option_r9.group, " ");
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", ctx_r2.can_edit);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", ctx_r2.can_edit);
  }
}
function CateringMenuComponent_ng_template_7_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵtemplate(0, CateringMenuComponent_ng_template_7_div_0_Template, 9, 4, "div", 14);
  }
  if (rf & 2) {
    var row_r10 = ctx.row;
    i0.ɵɵproperty("ngForOf", row_r10.options);
  }
}
var CateringMenuComponent = /*#__PURE__*/function () {
  function CateringMenuComponent(_catering, _orders) {
    var _this = this;
    _classCallCheck(this, CateringMenuComponent);
    this._catering = _catering;
    this._orders = _orders;
    this.show_children = {};
    /** Observable for the currently active menu */
    this.menu = this._catering.menu;
    this.addOption = function (item) {
      return _this._catering.addOption(item);
    };
    this.editOption = function (item, option) {
      return _this._catering.addOption(item, option);
    };
    this.removeOption = function (item, option) {
      return _this._catering.deleteOption(item, option);
    };
    this.editItem = function (item) {
      return _this._catering.addItem(item);
    };
    this.removeItem = function (item) {
      return _this._catering.deleteItem(item);
    };
  }
  return _createClass(CateringMenuComponent, [{
    key: "filters",
    get: function get() {
      return this._orders.filters;
    }
  }, {
    key: "can_edit",
    get: function get() {
      return this._catering.is_editable;
    }
  }, {
    key: "categories",
    get: function get() {
      return this._catering.categories;
    }
  }, {
    key: "isEnabled",
    value: function isEnabled(item) {
      return !item.hide_for_zones.includes(this._catering.zone);
    }
  }, {
    key: "setEnabled",
    value: function setEnabled(item, state) {
      var _this2 = this;
      var list = item.hide_for_zones;
      if (!state) list = (0, common_1.unique)([].concat(_toConsumableArray(list), [this._catering.zone]));else list = list.filter(function (_) {
        return _ !== _this2._catering.zone;
      });
      this._catering.updateItem(new catering_item_class_1.CateringItem(_objectSpread(_objectSpread({}, item), {}, {
        hide_for_zones: list
      })));
    }
  }]);
}();
_CateringMenuComponent = CateringMenuComponent;
_CateringMenuComponent.ɵfac = function CateringMenuComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _CateringMenuComponent)(i0.ɵɵdirectiveInject(i1.CateringStateService), i0.ɵɵdirectiveInject(i2.CateringOrdersService));
};
_CateringMenuComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _CateringMenuComponent,
  selectors: [["catering-menu"]],
  decls: 9,
  vars: 20,
  consts: [["active_template", ""], ["price_template", ""], ["actions_template", ""], ["child_template", ""], ["menu", "matMenu"], ["empty_message", "No Items in Menu", 1, "w-full", "min-w-[32rem]", "block", "text-sm", 3, "data", "columns", "filter", "show_children", "child_template", "sortable"], ["matTooltip", "Allow Ordering Item for this zone", "matTooltipPosition", "right", 1, "mx-auto", 3, "ngModelChange", "ngModel"], [1, "px-2", "py-1", "font-mono", "text-xs", "flex", "items-center", "mx-auto", "bg-secondary", "text-secondary-content", "rounded"], [1, "p-2", "flex", "items-center", "mx-auto", "space-x-2"], ["icon", "", "matRipple", "", 3, "disabled", "matMenuTriggerFor"], ["mat-menu-item", "", 1, "flex", "items-center", 3, "click"], [1, "flex", "items-center", "space-x-2", "pr-2"], [1, "text-error"], ["icon", "", "matRipple", "", 3, "click", "disabled", "matTooltip"], ["class", "flex p-2 items-center border-b border-solid border-base-200 relative space-x-2", 4, "ngFor", "ngForOf"], [1, "flex", "p-2", "items-center", "border-b", "border-solid", "border-base-200", "relative", "space-x-2"], [1, "absolute", "inset-y-0", "left-0", "w-2", "bg-black", "opacity-10"], [1, "flex-1", "pl-4", "pr-2"], [1, "text"], [1, "text-xs", "opacity-60"], ["icon", "", "matRipple", "", "matTooltip", "Edit Menu Item Option", 3, "click", 4, "ngIf"], ["icon", "", "matRipple", "", "class", "!mr-1", "matTooltip", "Remove Menu Item Option", 3, "click", 4, "ngIf"], ["icon", "", "matRipple", "", "matTooltip", "Edit Menu Item Option", 3, "click"], ["icon", "", "matRipple", "", "matTooltip", "Remove Menu Item Option", 1, "!mr-1", 3, "click"]],
  template: function CateringMenuComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵelement(0, "simple-table", 5);
      i0.ɵɵtemplate(1, CateringMenuComponent_ng_template_1_Template, 1, 1, "ng-template", null, 0, i0.ɵɵtemplateRefExtractor)(3, CateringMenuComponent_ng_template_3_Template, 4, 6, "ng-template", null, 1, i0.ɵɵtemplateRefExtractor)(5, CateringMenuComponent_ng_template_5_Template, 27, 7, "ng-template", null, 2, i0.ɵɵtemplateRefExtractor)(7, CateringMenuComponent_ng_template_7_Template, 1, 1, "ng-template", null, 3, i0.ɵɵtemplateRefExtractor);
    }
    if (rf & 2) {
      var active_template_r12 = i0.ɵɵreference(2);
      var price_template_r13 = i0.ɵɵreference(4);
      var actions_template_r14 = i0.ɵɵreference(6);
      var child_template_r15 = i0.ɵɵreference(8);
      i0.ɵɵproperty("data", ctx.menu)("columns", i0.ɵɵpureFunction5(14, _c5, i0.ɵɵpureFunction1(6, _c0, active_template_r12), i0.ɵɵpureFunction0(8, _c1), i0.ɵɵpureFunction0(9, _c2), i0.ɵɵpureFunction1(10, _c3, price_template_r13), i0.ɵɵpureFunction1(12, _c4, actions_template_r14)))("filter", ctx.filters == null ? null : ctx.filters.search)("show_children", ctx.show_children)("child_template", child_template_r15)("sortable", true);
    }
  },
  dependencies: [i3.NgForOf, i3.NgIf, i4.MatMenu, i4.MatMenuItem, i4.MatMenuTrigger, i5.MatCheckbox, i6.MatTooltip, i7.NgControlStatus, i7.NgModel, i8.IconComponent, i9.SimpleTableComponent, i10.MatRipple, i3.AsyncPipe, i3.CurrencyPipe],
  styles: ["[_nghost-%COMP%] {\n                display: flex;\n                flex-direction: column;\n                height: 90%;\n                width: 100%;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNhdGVyaW5nLW1lbnUuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxhQUFhO2dCQUNiLHNCQUFzQjtnQkFDdEIsV0FBVztnQkFDWCxXQUFXO1lBQ2YiLCJmaWxlIjoiY2F0ZXJpbmctbWVudS5jb21wb25lbnQudHMiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIDpob3N0IHtcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgICAgICAgICAgaGVpZ2h0OiA5MCU7XG4gICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICB9XG4gICAgICAgICJdfQ== */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvY2F0ZXJpbmcvc3JjL2xpYi9jYXRlcmluZy1tZW51LmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1lBQ1k7Z0JBQ0ksYUFBYTtnQkFDYixzQkFBc0I7Z0JBQ3RCLFdBQVc7Z0JBQ1gsV0FBVztZQUNmOztBQUVaLHdpQkFBd2lCIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICA6aG9zdCB7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgICAgICAgIGhlaWdodDogOTAlO1xuICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgfVxuICAgICAgICAiXSwic291cmNlUm9vdCI6IiJ9 */"]
});
exports.CateringMenuComponent = CateringMenuComponent;

/***/ }),

/***/ 37053:
/*!******************************************************************!*\
  !*** ./libs/catering/src/lib/catering-option-modal.component.ts ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _objectSpread = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/objectSpread2.js */ 34092)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _CateringItemOptionModalComponent;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.CateringItemOptionModalComponent = void 0;
var core_1 = __webpack_require__(/*! @angular/core */ 37580);
var forms_1 = __webpack_require__(/*! @angular/forms */ 34456);
var dialog_1 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var general_1 = __webpack_require__(/*! libs/common/src/lib/general */ 64217);
var catering_item_class_1 = __webpack_require__(/*! ./catering-item.class */ 25892);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @angular/common */ 60316);
var i2 = __webpack_require__(/*! @angular/material/autocomplete */ 79771);
var i3 = __webpack_require__(/*! @angular/material/core */ 74646);
var i4 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var i5 = __webpack_require__(/*! @angular/material/checkbox */ 97024);
var i6 = __webpack_require__(/*! @angular/forms */ 34456);
var i7 = __webpack_require__(/*! ../../../components/src/lib/icon.component */ 69434);
var i8 = __webpack_require__(/*! @angular/material/form-field */ 24950);
var i9 = __webpack_require__(/*! @angular/material/input */ 95541);
var i10 = __webpack_require__(/*! @angular/material/progress-spinner */ 41134);
function CateringItemOptionModalComponent_button_3_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "button", 6)(1, "app-icon");
    i0.ɵɵtext(2, "close");
    i0.ɵɵelementEnd()();
  }
}
function CateringItemOptionModalComponent_form_4_div_1_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 9)(1, "label", 10);
    i0.ɵɵtext(2, " Name");
    i0.ɵɵelementStart(3, "span");
    i0.ɵɵtext(4, "*");
    i0.ɵɵelementEnd();
    i0.ɵɵtext(5, ": ");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(6, "mat-form-field", 11);
    i0.ɵɵelement(7, "input", 12);
    i0.ɵɵelementStart(8, "mat-error");
    i0.ɵɵtext(9, "Name is required");
    i0.ɵɵelementEnd()()();
  }
  if (rf & 2) {
    var ctx_r0 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance();
    i0.ɵɵclassProp("error", ctx_r0.form.controls.name.invalid && ctx_r0.form.controls.name.touched);
  }
}
function CateringItemOptionModalComponent_form_4_div_2_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 9)(1, "label", 13);
    i0.ɵɵtext(2, " Type");
    i0.ɵɵelementStart(3, "span");
    i0.ɵɵtext(4, "*");
    i0.ɵɵelementEnd();
    i0.ɵɵtext(5, ": ");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(6, "mat-form-field", 11);
    i0.ɵɵelement(7, "input", 14);
    i0.ɵɵelementStart(8, "mat-error");
    i0.ɵɵtext(9, "Type is required");
    i0.ɵɵelementEnd()()();
  }
  if (rf & 2) {
    var ctx_r0 = i0.ɵɵnextContext(2);
    var auto_r2 = i0.ɵɵreference(9);
    i0.ɵɵadvance();
    i0.ɵɵclassProp("error", ctx_r0.form.controls.group.invalid && ctx_r0.form.controls.group.touched);
    i0.ɵɵadvance(6);
    i0.ɵɵproperty("matAutocomplete", auto_r2);
  }
}
function CateringItemOptionModalComponent_form_4_div_3_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 9)(1, "label", 10);
    i0.ɵɵtext(2, "Unit Price:");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(3, "mat-form-field", 11);
    i0.ɵɵelement(4, "input", 15);
    i0.ɵɵelementEnd()();
  }
}
function CateringItemOptionModalComponent_form_4_div_4_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 9)(1, "mat-checkbox", 16);
    i0.ɵɵtext(2, " Can select multiple of type ");
    i0.ɵɵelementEnd()();
  }
}
function CateringItemOptionModalComponent_form_4_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "form", 7);
    i0.ɵɵtemplate(1, CateringItemOptionModalComponent_form_4_div_1_Template, 10, 2, "div", 8)(2, CateringItemOptionModalComponent_form_4_div_2_Template, 10, 3, "div", 8)(3, CateringItemOptionModalComponent_form_4_div_3_Template, 5, 0, "div", 8)(4, CateringItemOptionModalComponent_form_4_div_4_Template, 3, 0, "div", 8);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r0 = i0.ɵɵnextContext();
    i0.ɵɵproperty("formGroup", ctx_r0.form);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", ctx_r0.form.controls.name);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", ctx_r0.form.controls.group);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", ctx_r0.form.controls.unit_price);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", ctx_r0.form.controls.multiple);
  }
}
function CateringItemOptionModalComponent_footer_5_Template(rf, ctx) {
  if (rf & 1) {
    var _r3 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "footer", 17)(1, "button", 18);
    i0.ɵɵlistener("click", function CateringItemOptionModalComponent_footer_5_Template_button_click_1_listener() {
      i0.ɵɵrestoreView(_r3);
      var ctx_r0 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r0.saveChanges());
    });
    i0.ɵɵtext(2, " Save ");
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var ctx_r0 = i0.ɵɵnextContext();
    i0.ɵɵadvance();
    i0.ɵɵproperty("disabled", !ctx_r0.form.dirty);
  }
}
function CateringItemOptionModalComponent_ng_template_6_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 19);
    i0.ɵɵelement(1, "mat-spinner", 20);
    i0.ɵɵelementStart(2, "p");
    i0.ɵɵtext(3, "Saving catering item option...");
    i0.ɵɵelementEnd()();
  }
}
function CateringItemOptionModalComponent_mat_option_10_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "mat-option", 21);
    i0.ɵɵtext(1);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var option_r4 = ctx.$implicit;
    i0.ɵɵproperty("value", option_r4);
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", option_r4, " ");
  }
}
var CateringItemOptionModalComponent = /*#__PURE__*/function () {
  function CateringItemOptionModalComponent(_data) {
    _classCallCheck(this, CateringItemOptionModalComponent);
    this._data = _data;
    /** Emitter for events on the modal */
    this.event = new core_1.EventEmitter();
    /** Form fields for item */
    this.form = new forms_1.FormGroup({
      name: new forms_1.FormControl(this.option.name || '', [forms_1.Validators.required]),
      group: new forms_1.FormControl(this.option.group || '', [forms_1.Validators.required]),
      unit_price: new forms_1.FormControl(this.option.unit_price),
      multiple: new forms_1.FormControl(!!this.option.multiple, [])
    });
    /** Whether changes are being saved */
    this.loading = false;
  }
  return _createClass(CateringItemOptionModalComponent, [{
    key: "option",
    get: /** Current item details */
    function get() {
      return this._data.option;
    }
    /** List of available categories */
  }, {
    key: "types",
    get: function get() {
      return this._data.types || [];
    }
  }, {
    key: "saveChanges",
    value: function saveChanges() {
      this.loading = true;
      var new_option = _objectSpread(_objectSpread({}, this.option), {}, {
        id: this.option.id || "option-".concat((0, general_1.randomInt)(99999999))
      }, this.form.value);
      this.event.emit({
        reason: 'done',
        metadata: {
          item: new catering_item_class_1.CateringItem(_objectSpread(_objectSpread({}, this._data.parent), {}, {
            options: this._data.parent.options.filter(function (i) {
              return i.id !== new_option.id;
            }).concat([new_option])
          }))
        }
      });
    }
  }]);
}();
_CateringItemOptionModalComponent = CateringItemOptionModalComponent;
_CateringItemOptionModalComponent.ɵfac = function CateringItemOptionModalComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _CateringItemOptionModalComponent)(i0.ɵɵdirectiveInject(dialog_1.MAT_DIALOG_DATA));
};
_CateringItemOptionModalComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _CateringItemOptionModalComponent,
  selectors: [["catering-option-modal"]],
  outputs: {
    event: "event"
  },
  decls: 11,
  vars: 6,
  consts: [["load_state", ""], ["auto", "matAutocomplete"], ["icon", "", "mat-dialog-close", "", 4, "ngIf"], ["class", "p-4 overflow-auto max-h-[65vh]", 3, "formGroup", 4, "ngIf", "ngIfElse"], ["class", "flex p-2 items-center justify-center border-t border-solid border-base-200", 4, "ngIf"], [3, "value", 4, "ngFor", "ngForOf"], ["icon", "", "mat-dialog-close", ""], [1, "p-4", "overflow-auto", "max-h-[65vh]", 3, "formGroup"], ["class", "flex flex-col", 4, "ngIf"], [1, "flex", "flex-col"], ["for", "title"], ["appearance", "outline"], ["matInput", "", "name", "name", "placeholder", "Item name", "formControlName", "name"], ["for", "group"], ["matInput", "", "name", "group", "placeholder", "Type of option e.g. Number of sugars", "formControlName", "group", 3, "matAutocomplete"], ["matInput", "", "name", "unit-price", "type", "number", "placeholder", "Unit Price", "formControlName", "unit_price"], ["name", "multiple", "formControlName", "multiple"], [1, "flex", "p-2", "items-center", "justify-center", "border-t", "border-solid", "border-base-200"], ["btn", "", "matRipple", "", 3, "click", "disabled"], ["loading", "", 1, "flex", "flex-col", "items-center", "p-8", "space-y-2", "w-64"], ["diameter", "32"], [3, "value"]],
  template: function CateringItemOptionModalComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵelementStart(0, "header")(1, "h3");
      i0.ɵɵtext(2);
      i0.ɵɵelementEnd();
      i0.ɵɵtemplate(3, CateringItemOptionModalComponent_button_3_Template, 3, 0, "button", 2);
      i0.ɵɵelementEnd();
      i0.ɵɵtemplate(4, CateringItemOptionModalComponent_form_4_Template, 5, 5, "form", 3)(5, CateringItemOptionModalComponent_footer_5_Template, 3, 1, "footer", 4)(6, CateringItemOptionModalComponent_ng_template_6_Template, 4, 0, "ng-template", null, 0, i0.ɵɵtemplateRefExtractor);
      i0.ɵɵelementStart(8, "mat-autocomplete", null, 1);
      i0.ɵɵtemplate(10, CateringItemOptionModalComponent_mat_option_10_Template, 2, 2, "mat-option", 5);
      i0.ɵɵelementEnd();
    }
    if (rf & 2) {
      var load_state_r5 = i0.ɵɵreference(7);
      i0.ɵɵadvance(2);
      i0.ɵɵtextInterpolate1("", ctx.option.id ? "Edit" : "Add", " Item Option");
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", !ctx.loading);
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", ctx.form && !ctx.loading)("ngIfElse", load_state_r5);
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", !ctx.loading);
      i0.ɵɵadvance(5);
      i0.ɵɵproperty("ngForOf", ctx.types);
    }
  },
  dependencies: [i1.NgForOf, i1.NgIf, i2.MatAutocomplete, i3.MatOption, i2.MatAutocompleteTrigger, i4.MatDialogClose, i5.MatCheckbox, i6.ɵNgNoValidate, i6.DefaultValueAccessor, i6.NumberValueAccessor, i6.NgControlStatus, i6.NgControlStatusGroup, i6.FormGroupDirective, i6.FormControlName, i7.IconComponent, i8.MatFormField, i8.MatError, i3.MatRipple, i9.MatInput, i10.MatProgressSpinner]
});
exports.CateringItemOptionModalComponent = CateringItemOptionModalComponent;

/***/ }),

/***/ 3872:
/*!****************************************************************!*\
  !*** ./libs/catering/src/lib/catering-order-item.component.ts ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _CateringOrderItemComponent;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.CateringOrderItemComponent = void 0;
var catering_item_class_1 = __webpack_require__(/*! ./catering-item.class */ 25892);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @angular/common */ 60316);
var i2 = __webpack_require__(/*! ../../../components/src/lib/icon.component */ 69434);
var i3 = __webpack_require__(/*! @angular/material/core */ 74646);
var _c0 = ["catering-order-item", ""];
function CateringOrderItemComponent_ng_container_0_ng_container_14_div_1_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 12);
    i0.ɵɵtext(1);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var opt_r3 = i0.ɵɵnextContext().$implicit;
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", opt_r3.name, " ");
  }
}
function CateringOrderItemComponent_ng_container_0_ng_container_14_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵtemplate(1, CateringOrderItemComponent_ng_container_0_ng_container_14_div_1_Template, 2, 1, "div", 11);
    i0.ɵɵelementContainerEnd();
  }
  if (rf & 2) {
    var opt_r3 = ctx.$implicit;
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", opt_r3);
  }
}
function CateringOrderItemComponent_ng_container_0_Template(rf, ctx) {
  if (rf & 1) {
    var _r1 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵelementStart(1, "div", 1);
    i0.ɵɵelement(2, "div", 2);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(3, "div", 3)(4, "button", 4);
    i0.ɵɵlistener("click", function CateringOrderItemComponent_ng_container_0_Template_button_click_4_listener() {
      i0.ɵɵrestoreView(_r1);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.toggle());
    });
    i0.ɵɵelementStart(5, "app-icon");
    i0.ɵɵtext(6);
    i0.ɵɵelementEnd()()();
    i0.ɵɵelementStart(7, "div", 5)(8, "div", 6)(9, "div", 7);
    i0.ɵɵtext(10);
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(11, "div", 8);
    i0.ɵɵtext(12);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(13, "div", 9);
    i0.ɵɵtemplate(14, CateringOrderItemComponent_ng_container_0_ng_container_14_Template, 2, 1, "ng-container", 10);
    i0.ɵɵelementEnd()();
    i0.ɵɵelementContainerEnd();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance(4);
    i0.ɵɵclassProp("bg-success", ctx_r1.active)("text-white", ctx_r1.active)("border-solid", ctx_r1.active);
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate(ctx_r1.active ? "done" : "local_pizza");
    i0.ɵɵadvance(4);
    i0.ɵɵtextInterpolate1(" ", (ctx_r1.item == null ? null : ctx_r1.item.amount) || (ctx_r1.item == null ? null : ctx_r1.item.quantity) || 1, "\xD7 ");
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate(ctx_r1.item == null ? null : ctx_r1.item.name);
    i0.ɵɵadvance(2);
    i0.ɵɵproperty("ngForOf", ctx_r1.item.option_list);
  }
}
var ACTIVE_ITEMS = new Set();
var CateringOrderItemComponent = /*#__PURE__*/function () {
  function CateringOrderItemComponent() {
    _classCallCheck(this, CateringOrderItemComponent);
    this.active = false;
  }
  return _createClass(CateringOrderItemComponent, [{
    key: "item_key",
    get: function get() {
      var _this$item;
      return "".concat(this.order_id, "|").concat((_this$item = this.item) === null || _this$item === void 0 ? void 0 : _this$item.id);
    }
  }, {
    key: "ngOnInit",
    value: function ngOnInit() {
      this.active = ACTIVE_ITEMS.has(this.item_key);
    }
  }, {
    key: "toggle",
    value: function toggle() {
      if (ACTIVE_ITEMS.has(this.item_key)) {
        ACTIVE_ITEMS["delete"](this.item_key);
        this.active = false;
      } else {
        ACTIVE_ITEMS.add(this.item_key);
        this.active = true;
      }
    }
  }]);
}();
_CateringOrderItemComponent = CateringOrderItemComponent;
_CateringOrderItemComponent.ɵfac = function CateringOrderItemComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _CateringOrderItemComponent)();
};
_CateringOrderItemComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _CateringOrderItemComponent,
  selectors: [["", "catering-order-item", ""]],
  inputs: {
    order_id: "order_id",
    item: "item"
  },
  attrs: _c0,
  decls: 1,
  vars: 1,
  consts: [[4, "ngIf"], [1, "w-16", "text-right", "h-14", "relative"], ["arm", "", 1, "border-b-2", "border-l-2", "border-base-200", "w-4", "h-16", "absolute", "top-1/2", "left-1/2", "-translate-y-full", "-translate-x-px"], [1, "w-12", "mr-4"], ["action", "", "icon", "", "matRipple", "", 1, "border-2", "border-base-200", "border-dashed", "text-xl", "text-dark-fade", "p-2", 3, "click"], [1, "flex", "flex-1", "items-center", "border-b", "border-base-200", "border-solid", "py-4", "space-x-4"], [1, ""], [1, "p-1", "rounded-full", "bg-base-300", "w-10", "h-10", "flex", "items-center", "justify-center", "font-mono", "text-sm"], [1, "flex-1"], [1, "flex", "space-x-2", "mr-2", "px-4"], [4, "ngFor", "ngForOf"], ["class", "text-xs py-1 px-2 bg-warning text-warning-content rounded-2xl shadow", 4, "ngIf"], [1, "text-xs", "py-1", "px-2", "bg-warning", "text-warning-content", "rounded-2xl", "shadow"]],
  template: function CateringOrderItemComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵtemplate(0, CateringOrderItemComponent_ng_container_0_Template, 15, 10, "ng-container", 0);
    }
    if (rf & 2) {
      i0.ɵɵproperty("ngIf", ctx.item);
    }
  },
  dependencies: [i1.NgForOf, i1.NgIf, i2.IconComponent, i3.MatRipple],
  styles: ["[_nghost-%COMP%]:last-child    > div[_ngcontent-%COMP%] {\n                border: none !important;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNhdGVyaW5nLW9yZGVyLWl0ZW0uY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSx1QkFBdUI7WUFDM0IiLCJmaWxlIjoiY2F0ZXJpbmctb3JkZXItaXRlbS5jb21wb25lbnQudHMiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIDpob3N0Omxhc3QtY2hpbGQgPiBkaXYge1xuICAgICAgICAgICAgICAgIGJvcmRlcjogbm9uZSAhaW1wb3J0YW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAiXX0= */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvY2F0ZXJpbmcvc3JjL2xpYi9jYXRlcmluZy1vcmRlci1pdGVtLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1lBQ1k7Z0JBQ0ksdUJBQXVCO1lBQzNCOztBQUVaLHdhQUF3YSIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgOmhvc3Q6bGFzdC1jaGlsZCA+IGRpdiB7XG4gICAgICAgICAgICAgICAgYm9yZGVyOiBub25lICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICJdLCJzb3VyY2VSb290IjoiIn0= */"]
});
exports.CateringOrderItemComponent = CateringOrderItemComponent;

/***/ }),

/***/ 41623:
/*!****************************************************************!*\
  !*** ./libs/catering/src/lib/catering-order-list.component.ts ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _regeneratorRuntime = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/regeneratorRuntime.js */ 8698)["default"]);
var _asyncToGenerator = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/asyncToGenerator.js */ 95386)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _callSuper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/callSuper.js */ 8513)["default"]);
var _inherits = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/inherits.js */ 58160)["default"]);
var _CateringOrderListComponent;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.CateringOrderListComponent = void 0;
var catering_orders_service_1 = __webpack_require__(/*! ./catering-orders.service */ 98197);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var catering_vars_1 = __webpack_require__(/*! ./catering.vars */ 91074);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! ./catering-orders.service */ 98197);
var i2 = __webpack_require__(/*! @placeos/common */ 22797);
var i3 = __webpack_require__(/*! @angular/common */ 60316);
var i4 = __webpack_require__(/*! @angular/material/menu */ 31034);
var i5 = __webpack_require__(/*! ../../../components/src/lib/icon.component */ 69434);
var i6 = __webpack_require__(/*! ../../../components/src/lib/custom-tooltip.component */ 22238);
var i7 = __webpack_require__(/*! ../../../components/src/lib/simple-table.component */ 88328);
var i8 = __webpack_require__(/*! @angular/material/core */ 74646);
var i9 = __webpack_require__(/*! @angular/material/progress-bar */ 26354);
var i10 = __webpack_require__(/*! ./catering-order-item.component */ 3872);
var _c0 = function _c0(a0) {
  return {
    key: "state",
    name: " ",
    size: "4rem",
    sortable: false,
    content: a0
  };
};
var _c1 = function _c1(a0) {
  return {
    key: "deliver_at",
    name: "Time",
    content: a0
  };
};
var _c2 = function _c2(a0) {
  return {
    key: "event",
    name: "Location",
    content: a0,
    sortable: false
  };
};
var _c3 = function _c3(a0) {
  return {
    key: "event",
    name: "Host",
    content: a0,
    sortable: false
  };
};
var _c4 = function _c4() {
  return {
    key: "charge_code",
    name: "Charge Code"
  };
};
var _c5 = function _c5() {
  return {
    key: "invoice_number",
    name: "Invoice No.",
    empty: "No Invoice"
  };
};
var _c6 = function _c6(a0) {
  return {
    key: "status",
    name: "Status",
    content: a0,
    size: "11rem"
  };
};
var _c7 = function _c7(a0) {
  return {
    key: "actions",
    name: " ",
    size: "6.5rem",
    content: a0,
    sortable: false
  };
};
var _c8 = function _c8(a0, a1, a2, a3, a4, a5, a6, a7) {
  return [a0, a1, a2, a3, a4, a5, a6, a7];
};
function CateringOrderListComponent_ng_template_4_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 12)(1, "div", 13)(2, "app-icon");
    i0.ɵɵtext(3, "room_service");
    i0.ɵɵelementEnd()()();
  }
}
function CateringOrderListComponent_ng_template_6_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 14)(1, "div");
    i0.ɵɵtext(2);
    i0.ɵɵpipe(3, "date");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(4, "div", 15);
    i0.ɵɵtext(5);
    i0.ɵɵpipe(6, "date");
    i0.ɵɵpipe(7, "date");
    i0.ɵɵpipe(8, "date");
    i0.ɵɵpipe(9, "date");
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var data_r1 = ctx.data;
    var row_r2 = ctx.row;
    var ctx_r2 = i0.ɵɵnextContext();
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate1("Deliver at ", i0.ɵɵpipeBind2(3, 5, data_r1, ctx_r2.time_format), "");
    i0.ɵɵadvance(3);
    i0.ɵɵtextInterpolate4(" ", i0.ɵɵpipeBind2(6, 8, row_r2 == null ? null : row_r2.event == null ? null : row_r2.event.date, "MMM d"), ", ", i0.ɵɵpipeBind2(7, 11, row_r2 == null ? null : row_r2.event == null ? null : row_r2.event.date, ctx_r2.time_format), " - ", i0.ɵɵpipeBind2(8, 14, row_r2 == null ? null : row_r2.event == null ? null : row_r2.event.date_end, "MMM d"), ", ", i0.ɵɵpipeBind2(9, 17, row_r2 == null ? null : row_r2.event == null ? null : row_r2.event.date_end, ctx_r2.time_format), " ");
  }
}
function CateringOrderListComponent_ng_template_8_span_2_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "span", 18);
    i0.ɵɵtext(1, " No Location ");
    i0.ɵɵelementEnd();
  }
}
function CateringOrderListComponent_ng_template_8_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 16);
    i0.ɵɵtext(1);
    i0.ɵɵtemplate(2, CateringOrderListComponent_ng_template_8_span_2_Template, 2, 0, "span", 17);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var data_r4 = ctx.data;
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", (data_r4 == null ? null : data_r4.space == null ? null : data_r4.space.display_name) || (data_r4 == null ? null : data_r4.space == null ? null : data_r4.space.name) || "", " ");
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", !((data_r4 == null ? null : data_r4.space == null ? null : data_r4.space.display_name) || (data_r4 == null ? null : data_r4.space == null ? null : data_r4.space.name)));
  }
}
function CateringOrderListComponent_ng_template_10_span_3_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "span", 18);
    i0.ɵɵtext(1, " Unknown Host ");
    i0.ɵɵelementEnd();
  }
}
function CateringOrderListComponent_ng_template_10_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 16)(1, "div");
    i0.ɵɵtext(2);
    i0.ɵɵtemplate(3, CateringOrderListComponent_ng_template_10_span_3_Template, 2, 0, "span", 17);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(4, "div", 15);
    i0.ɵɵtext(5);
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var data_r5 = ctx.data;
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate1(" ", (data_r5 == null ? null : data_r5.organiser == null ? null : data_r5.organiser.name) || (data_r5 == null ? null : data_r5.host) || "", " ");
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", !((data_r5 == null ? null : data_r5.organiser == null ? null : data_r5.organiser.name) || (data_r5 == null ? null : data_r5.host)));
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate1(" ", (data_r5 == null ? null : data_r5.organiser == null ? null : data_r5.organiser.email) || (data_r5 == null ? null : data_r5.host), " ");
  }
}
function CateringOrderListComponent_ng_template_12_button_8_Template(rf, ctx) {
  if (rf & 1) {
    var _r6 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "button", 23);
    i0.ɵɵlistener("click", function CateringOrderListComponent_ng_template_12_button_8_Template_button_click_0_listener() {
      var status_r7 = i0.ɵɵrestoreView(_r6).$implicit;
      var row_r8 = i0.ɵɵnextContext().row;
      var ctx_r2 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r2.updateStatus(row_r8, status_r7.id));
    });
    i0.ɵɵelementStart(1, "div", 24);
    i0.ɵɵelement(2, "div", 25);
    i0.ɵɵelementStart(3, "span", 26);
    i0.ɵɵtext(4);
    i0.ɵɵelementEnd()()();
  }
  if (rf & 2) {
    var status_r7 = ctx.$implicit;
    i0.ɵɵadvance(2);
    i0.ɵɵstyleProp("background-color", status_r7.colour);
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate(status_r7.name);
  }
}
function CateringOrderListComponent_ng_template_12_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 16)(1, "button", 19)(2, "div", 20);
    i0.ɵɵtext(3);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(4, "app-icon", 21);
    i0.ɵɵtext(5, "arrow_drop_down");
    i0.ɵɵelementEnd()()();
    i0.ɵɵelementStart(6, "mat-menu", null, 7);
    i0.ɵɵtemplate(8, CateringOrderListComponent_ng_template_12_button_8_Template, 5, 3, "button", 22);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var tmp_11_0;
    var tmp_13_0;
    var data_r9 = ctx.data;
    var menu_r10 = i0.ɵɵreference(7);
    var ctx_r2 = i0.ɵɵnextContext();
    i0.ɵɵadvance();
    i0.ɵɵstyleProp("background", (tmp_11_0 = ctx_r2.status(data_r9)) == null ? null : tmp_11_0.colour);
    i0.ɵɵproperty("matMenuTriggerFor", menu_r10);
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate1(" ", (tmp_13_0 = ctx_r2.status(data_r9)) == null ? null : tmp_13_0.name, " ");
    i0.ɵɵadvance(5);
    i0.ɵɵproperty("ngForOf", ctx_r2.statuses);
  }
}
function CateringOrderListComponent_ng_template_14_ng_template_4_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 30)(1, "div", 31);
    i0.ɵɵtext(2, "Notes");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(3, "p", 32);
    i0.ɵɵtext(4);
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var row_r12 = i0.ɵɵnextContext().row;
    i0.ɵɵadvance(4);
    i0.ɵɵtextInterpolate1(" ", row_r12.notes, " ");
  }
}
function CateringOrderListComponent_ng_template_14_Template(rf, ctx) {
  if (rf & 1) {
    var _r11 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 27)(1, "button", 28)(2, "app-icon");
    i0.ɵɵtext(3, "description");
    i0.ɵɵelementEnd()();
    i0.ɵɵtemplate(4, CateringOrderListComponent_ng_template_14_ng_template_4_Template, 5, 1, "ng-template", null, 8, i0.ɵɵtemplateRefExtractor);
    i0.ɵɵelementStart(6, "button", 29);
    i0.ɵɵlistener("click", function CateringOrderListComponent_ng_template_14_Template_button_click_6_listener() {
      var row_r12 = i0.ɵɵrestoreView(_r11).row;
      var ctx_r2 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r2.show_children[row_r12.id] = !ctx_r2.show_children[row_r12.id]);
    });
    i0.ɵɵelementStart(7, "app-icon");
    i0.ɵɵtext(8);
    i0.ɵɵelementEnd()()();
  }
  if (rf & 2) {
    var row_r12 = ctx.row;
    var notes_template_r13 = i0.ɵɵreference(5);
    var ctx_r2 = i0.ɵɵnextContext();
    i0.ɵɵadvance();
    i0.ɵɵproperty("hover", true)("content", notes_template_r13)("disabled", !row_r12.notes);
    i0.ɵɵadvance(7);
    i0.ɵɵtextInterpolate1(" ", ctx_r2.show_children[row_r12.id] ? "keyboard_arrow_down" : "chevron_right", " ");
  }
}
function CateringOrderListComponent_ng_template_16_ul_0_li_1_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelement(0, "li", 36);
  }
  if (rf & 2) {
    var item_r14 = ctx.$implicit;
    var row_r15 = i0.ɵɵnextContext(2).row;
    i0.ɵɵproperty("order_id", row_r15 == null ? null : row_r15.id)("item", item_r14);
  }
}
function CateringOrderListComponent_ng_template_16_ul_0_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "ul", 34);
    i0.ɵɵtemplate(1, CateringOrderListComponent_ng_template_16_ul_0_li_1_Template, 1, 2, "li", 35);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var row_r15 = i0.ɵɵnextContext().row;
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngForOf", row_r15.items);
  }
}
function CateringOrderListComponent_ng_template_16_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵtemplate(0, CateringOrderListComponent_ng_template_16_ul_0_Template, 2, 1, "ul", 33);
  }
  if (rf & 2) {
    var row_r15 = ctx.row;
    i0.ɵɵproperty("ngIf", row_r15 == null ? null : row_r15.items.length);
  }
}
var CateringOrderListComponent = /*#__PURE__*/function (_common_1$AsyncHandle) {
  function CateringOrderListComponent(_orders, _settings) {
    var _this;
    _classCallCheck(this, CateringOrderListComponent);
    _this = _callSuper(this, CateringOrderListComponent);
    _this._orders = _orders;
    _this._settings = _settings;
    /** List of filtered orders */
    _this.order_list = _this._orders.filtered;
    /** Whether order list is loading */
    _this.loading = _this._orders.loading;
    _this.statuses = catering_vars_1.CATERING_STATUSES;
    _this.show_children = {};
    _this.updateStatus = /*#__PURE__*/function () {
      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(order, s) {
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              _context.next = 2;
              return _this._orders.updateStatus(order, s);
            case 2:
              _this.timeout('status-change', function () {
                return order.status = s;
              });
            case 3:
            case "end":
              return _context.stop();
          }
        }, _callee);
      }));
      return function (_x, _x2) {
        return _ref.apply(this, arguments);
      };
    }();
    return _this;
  }
  _inherits(CateringOrderListComponent, _common_1$AsyncHandle);
  return _createClass(CateringOrderListComponent, [{
    key: "time_format",
    get: function get() {
      return this._settings.time_format;
    }
  }, {
    key: "status",
    value: function status(value) {
      return catering_vars_1.CATERING_STATUSES.find(function (i) {
        return i.id === value;
      });
    }
  }, {
    key: "ngOnInit",
    value: function ngOnInit() {
      this._orders.startPolling();
    }
  }, {
    key: "ngOnDestroy",
    value: function ngOnDestroy() {
      this._orders.stopPolling();
    }
    /* istanbul ignore next */
  }, {
    key: "trackByFn",
    value: function trackByFn(index, order) {
      return order ? order.id : undefined;
    }
  }]);
}(common_1.AsyncHandler);
_CateringOrderListComponent = CateringOrderListComponent;
_CateringOrderListComponent.ɵfac = function CateringOrderListComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _CateringOrderListComponent)(i0.ɵɵdirectiveInject(i1.CateringOrdersService), i0.ɵɵdirectiveInject(i2.SettingsService));
};
_CateringOrderListComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _CateringOrderListComponent,
  selectors: [["catering-order-list"]],
  features: [i0.ɵɵInheritDefinitionFeature],
  decls: 18,
  vars: 32,
  consts: [["state_template", ""], ["time_template", ""], ["location_template", ""], ["host_template", ""], ["status_template", ""], ["actions_template", ""], ["child_template", ""], ["menu", "matMenu"], ["notes_template", ""], [1, "flex", "flex-col", "h-full", "w-full", "overflow-auto"], ["mode", "indeterminate", 1, "sticky", "top-0", "left-0", "w-full"], ["empty_message", "No Catering Orders", 1, "min-w-[72rem]", "w-full", "block", "text-sm", 3, "data", "columns", "sortable", "show_children", "child_template"], [1, "p-2"], [1, "rounded-full", "bg-base-200", "p-2", "text-2xl", "flex", "items-center", "justify-center"], [1, "p-4"], [1, "text-xs", "opacity-30"], [1, "px-4", "py-2"], ["class", "opacity-30", 4, "ngIf"], [1, "opacity-30"], ["status", "", "matRipple", "", 1, "rounded-3xl", "text-base", "border-none", "h-10", "px-4", "flex", "items-center", "text-white", "w-36", 3, "matMenuTriggerFor"], [1, "flex", "text-center", "capitalize", "mx-2"], [1, "pl-2"], ["mat-menu-item", "", "class", "flex items-center", 3, "click", 4, "ngFor", "ngForOf"], ["mat-menu-item", "", 1, "flex", "items-center", 3, "click"], [1, "flex", "items-center", "space-x-2"], [1, "rounded-full", "h-4", "w-4", "mr-2"], [1, "mr-2", "w-20"], [1, "flex", "items-center", "space-x-2", "p-2", "mx-auto"], ["icon", "", "matRipple", "", "customTooltip", "", "xPosition", "end", "yPosition", "top", 3, "hover", "content", "disabled"], ["icon", "", "matRipple", "", 3, "click"], [1, "p-2", "rounded-lg", "bg-base-100", "text-base-content", "max-w-[32rem]", "min-w-[8rem]", "shadow", "border", "border-base-200"], [1, "mb-2"], [1, "text-sm", "px-4", "py-2", "bg-base-200", "rounded"], ["class", "list-none p-0 m-0 w-full relative z-0", 4, "ngIf"], [1, "list-none", "p-0", "m-0", "w-full", "relative", "z-0"], ["catering-order-item", "", "class", "flex items-center", 3, "order_id", "item", 4, "ngFor", "ngForOf"], ["catering-order-item", "", 1, "flex", "items-center", 3, "order_id", "item"]],
  template: function CateringOrderListComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵelementStart(0, "div", 9);
      i0.ɵɵelement(1, "mat-progress-bar", 10);
      i0.ɵɵpipe(2, "async");
      i0.ɵɵelement(3, "simple-table", 11);
      i0.ɵɵtemplate(4, CateringOrderListComponent_ng_template_4_Template, 4, 0, "ng-template", null, 0, i0.ɵɵtemplateRefExtractor)(6, CateringOrderListComponent_ng_template_6_Template, 10, 20, "ng-template", null, 1, i0.ɵɵtemplateRefExtractor)(8, CateringOrderListComponent_ng_template_8_Template, 3, 2, "ng-template", null, 2, i0.ɵɵtemplateRefExtractor)(10, CateringOrderListComponent_ng_template_10_Template, 6, 3, "ng-template", null, 3, i0.ɵɵtemplateRefExtractor)(12, CateringOrderListComponent_ng_template_12_Template, 9, 5, "ng-template", null, 4, i0.ɵɵtemplateRefExtractor)(14, CateringOrderListComponent_ng_template_14_Template, 9, 4, "ng-template", null, 5, i0.ɵɵtemplateRefExtractor)(16, CateringOrderListComponent_ng_template_16_Template, 1, 1, "ng-template", null, 6, i0.ɵɵtemplateRefExtractor);
      i0.ɵɵelementEnd();
    }
    if (rf & 2) {
      var state_template_r16 = i0.ɵɵreference(5);
      var time_template_r17 = i0.ɵɵreference(7);
      var location_template_r18 = i0.ɵɵreference(9);
      var host_template_r19 = i0.ɵɵreference(11);
      var status_template_r20 = i0.ɵɵreference(13);
      var actions_template_r21 = i0.ɵɵreference(15);
      var child_template_r22 = i0.ɵɵreference(17);
      i0.ɵɵadvance();
      i0.ɵɵclassProp("opacity-0", !i0.ɵɵpipeBind1(2, 7, ctx.loading));
      i0.ɵɵadvance(2);
      i0.ɵɵproperty("data", ctx.order_list)("columns", i0.ɵɵpureFunction8(23, _c8, i0.ɵɵpureFunction1(9, _c0, state_template_r16), i0.ɵɵpureFunction1(11, _c1, time_template_r17), i0.ɵɵpureFunction1(13, _c2, location_template_r18), i0.ɵɵpureFunction1(15, _c3, host_template_r19), i0.ɵɵpureFunction0(17, _c4), i0.ɵɵpureFunction0(18, _c5), i0.ɵɵpureFunction1(19, _c6, status_template_r20), i0.ɵɵpureFunction1(21, _c7, actions_template_r21)))("sortable", true)("show_children", ctx.show_children)("child_template", child_template_r22);
    }
  },
  dependencies: [i3.NgForOf, i3.NgIf, i4.MatMenu, i4.MatMenuItem, i4.MatMenuTrigger, i5.IconComponent, i6.CustomTooltipComponent, i7.SimpleTableComponent, i8.MatRipple, i9.MatProgressBar, i10.CateringOrderItemComponent, i3.AsyncPipe, i3.DatePipe],
  styles: ["[_nghost-%COMP%] {\n                display: flex;\n                flex-direction: column;\n                height: 100%;\n                width: 100%;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNhdGVyaW5nLW9yZGVyLWxpc3QuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxhQUFhO2dCQUNiLHNCQUFzQjtnQkFDdEIsWUFBWTtnQkFDWixXQUFXO1lBQ2YiLCJmaWxlIjoiY2F0ZXJpbmctb3JkZXItbGlzdC5jb21wb25lbnQudHMiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIDpob3N0IHtcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgfVxuICAgICAgICAiXX0= */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvY2F0ZXJpbmcvc3JjL2xpYi9jYXRlcmluZy1vcmRlci1saXN0LmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1lBQ1k7Z0JBQ0ksYUFBYTtnQkFDYixzQkFBc0I7Z0JBQ3RCLFlBQVk7Z0JBQ1osV0FBVztZQUNmOztBQUVaLHdqQkFBd2pCIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICA6aG9zdCB7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl0sInNvdXJjZVJvb3QiOiIifQ== */"]
});
exports.CateringOrderListComponent = CateringOrderListComponent;

/***/ }),

/***/ 82912:
/*!*****************************************************************!*\
  !*** ./libs/catering/src/lib/catering-order-modal.component.ts ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _toConsumableArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/toConsumableArray.js */ 86033)["default"]);
var _objectSpread = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/objectSpread2.js */ 34092)["default"]);
var _regeneratorRuntime = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/regeneratorRuntime.js */ 8698)["default"]);
var _createForOfIteratorHelper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createForOfIteratorHelper.js */ 36350)["default"]);
var _asyncToGenerator = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/asyncToGenerator.js */ 95386)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _callSuper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/callSuper.js */ 8513)["default"]);
var _inherits = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/inherits.js */ 58160)["default"]);
var _CateringOrderModalComponent;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.CateringOrderModalComponent = void 0;
var core_1 = __webpack_require__(/*! @angular/core */ 37580);
var dialog_1 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var catering_item_class_1 = __webpack_require__(/*! ./catering-item.class */ 25892);
var catering_order_class_1 = __webpack_require__(/*! ./catering-order.class */ 75555);
var organisation_1 = __webpack_require__(/*! @placeos/organisation */ 2510);
var utilities_1 = __webpack_require__(/*! ./utilities */ 60285);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @placeos/organisation */ 2510);
var i2 = __webpack_require__(/*! @angular/common */ 60316);
var i3 = __webpack_require__(/*! @angular/material/tabs */ 38223);
var i4 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var i5 = __webpack_require__(/*! @angular/material/tooltip */ 80640);
var i6 = __webpack_require__(/*! @angular/forms */ 34456);
var i7 = __webpack_require__(/*! ../../../components/src/lib/icon.component */ 69434);
var i8 = __webpack_require__(/*! @angular/material/core */ 74646);
var i9 = __webpack_require__(/*! @angular/material/progress-spinner */ 41134);
var i10 = __webpack_require__(/*! ../../../form-fields/src/lib/counter.component */ 55507);
var _c0 = function _c0() {
  return {};
};
function CateringOrderModalComponent_div_0_ng_container_1_ng_container_2_mat_tab_1_div_2_div_4_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 18);
    i0.ɵɵtext(1, " Options Available ");
    i0.ɵɵelementEnd();
  }
}
function CateringOrderModalComponent_div_0_ng_container_1_ng_container_2_mat_tab_1_div_2_a_counter_8_Template(rf, ctx) {
  if (rf & 1) {
    var _r1 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "a-counter", 19);
    i0.ɵɵlistener("ngModelChange", function CateringOrderModalComponent_div_0_ng_container_1_ng_container_2_mat_tab_1_div_2_a_counter_8_Template_a_counter_ngModelChange_0_listener($event) {
      i0.ɵɵrestoreView(_r1);
      var item_r2 = i0.ɵɵnextContext().$implicit;
      var ctx_r2 = i0.ɵɵnextContext(5);
      return i0.ɵɵresetView(ctx_r2.updateItemQuantity(item_r2, $event));
    });
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var item_r2 = i0.ɵɵnextContext().$implicit;
    i0.ɵɵproperty("ngModel", item_r2.quantity);
  }
}
function CateringOrderModalComponent_div_0_ng_container_1_ng_container_2_mat_tab_1_div_2_div_9_Template(rf, ctx) {
  if (rf & 1) {
    var _r4 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 20)(1, "div", 21)(2, "button", 22)(3, "app-icon");
    i0.ɵɵtext(4, "remove");
    i0.ɵɵelementEnd()()();
    i0.ɵɵelementStart(5, "div", 23);
    i0.ɵɵtext(6);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(7, "button", 24);
    i0.ɵɵlistener("click", function CateringOrderModalComponent_div_0_ng_container_1_ng_container_2_mat_tab_1_div_2_div_9_Template_button_click_7_listener() {
      i0.ɵɵrestoreView(_r4);
      var item_r2 = i0.ɵɵnextContext().$implicit;
      var ctx_r2 = i0.ɵɵnextContext(5);
      return i0.ɵɵresetView(ctx_r2.addItem(item_r2));
    });
    i0.ɵɵelementStart(8, "app-icon");
    i0.ɵɵtext(9, "add");
    i0.ɵɵelementEnd()()();
  }
  if (rf & 2) {
    var item_r2 = i0.ɵɵnextContext().$implicit;
    i0.ɵɵadvance();
    i0.ɵɵproperty("matTooltip", item_r2.quantity ? "Items with options must be removed from order confirmation page" : "");
    i0.ɵɵadvance();
    i0.ɵɵproperty("disabled", true);
    i0.ɵɵadvance(4);
    i0.ɵɵtextInterpolate1(" ", item_r2.quantity, " ");
  }
}
function CateringOrderModalComponent_div_0_ng_container_1_ng_container_2_mat_tab_1_div_2_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 12)(1, "div", 13)(2, "div", 13);
    i0.ɵɵtext(3);
    i0.ɵɵelementEnd();
    i0.ɵɵtemplate(4, CateringOrderModalComponent_div_0_ng_container_1_ng_container_2_mat_tab_1_div_2_div_4_Template, 2, 0, "div", 14);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(5, "div", 15);
    i0.ɵɵtext(6);
    i0.ɵɵpipe(7, "currency");
    i0.ɵɵelementEnd();
    i0.ɵɵtemplate(8, CateringOrderModalComponent_div_0_ng_container_1_ng_container_2_mat_tab_1_div_2_a_counter_8_Template, 1, 1, "a-counter", 16)(9, CateringOrderModalComponent_div_0_ng_container_1_ng_container_2_mat_tab_1_div_2_div_9_Template, 10, 3, "div", 17);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var item_r2 = ctx.$implicit;
    var ctx_r2 = i0.ɵɵnextContext(5);
    i0.ɵɵadvance(3);
    i0.ɵɵtextInterpolate1(" ", item_r2.name, " ");
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", item_r2.options.length);
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate1(" ", i0.ɵɵpipeBind2(7, 5, item_r2.unit_price / 100, ctx_r2.code), " ");
    i0.ɵɵadvance(2);
    i0.ɵɵproperty("ngIf", !item_r2.options.length);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", item_r2.options.length);
  }
}
function CateringOrderModalComponent_div_0_ng_container_1_ng_container_2_mat_tab_1_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "mat-tab", 9)(1, "div", 10);
    i0.ɵɵtemplate(2, CateringOrderModalComponent_div_0_ng_container_1_ng_container_2_mat_tab_1_div_2_Template, 10, 8, "div", 11);
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var cat_r5 = i0.ɵɵnextContext().$implicit;
    var ctx_r2 = i0.ɵɵnextContext(3);
    i0.ɵɵproperty("label", cat_r5);
    i0.ɵɵadvance(2);
    i0.ɵɵproperty("ngForOf", (ctx_r2.menu_items || i0.ɵɵpureFunction0(2, _c0))[cat_r5]);
  }
}
function CateringOrderModalComponent_div_0_ng_container_1_ng_container_2_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵtemplate(1, CateringOrderModalComponent_div_0_ng_container_1_ng_container_2_mat_tab_1_Template, 3, 3, "mat-tab", 8);
    i0.ɵɵelementContainerEnd();
  }
  if (rf & 2) {
    var cat_r5 = ctx.$implicit;
    var ctx_r2 = i0.ɵɵnextContext(3);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", (ctx_r2.menu_items || i0.ɵɵpureFunction0(1, _c0))[cat_r5].length);
  }
}
function CateringOrderModalComponent_div_0_ng_container_1_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵelementStart(1, "mat-tab-group");
    i0.ɵɵtemplate(2, CateringOrderModalComponent_div_0_ng_container_1_ng_container_2_Template, 2, 2, "ng-container", 7);
    i0.ɵɵelementEnd();
    i0.ɵɵelementContainerEnd();
  }
  if (rf & 2) {
    var ctx_r2 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance(2);
    i0.ɵɵproperty("ngForOf", ctx_r2.categories);
  }
}
function CateringOrderModalComponent_div_0_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 5);
    i0.ɵɵtemplate(1, CateringOrderModalComponent_div_0_ng_container_1_Template, 3, 1, "ng-container", 6);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r2 = i0.ɵɵnextContext();
    var order_details_r6 = i0.ɵɵreference(5);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", !ctx_r2.show_order_details)("ngIfElse", order_details_r6);
  }
}
function CateringOrderModalComponent_footer_1_ng_container_1_Template(rf, ctx) {
  if (rf & 1) {
    var _r7 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵelementStart(1, "button", 26);
    i0.ɵɵtext(2, " Cancel ");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(3, "button", 27);
    i0.ɵɵlistener("click", function CateringOrderModalComponent_footer_1_ng_container_1_Template_button_click_3_listener() {
      i0.ɵɵrestoreView(_r7);
      var ctx_r2 = i0.ɵɵnextContext(2);
      return i0.ɵɵresetView(ctx_r2.show_order_details = true);
    });
    i0.ɵɵtext(4, " Confirm ");
    i0.ɵɵelementEnd();
    i0.ɵɵelementContainerEnd();
  }
  if (rf & 2) {
    var ctx_r2 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance(3);
    i0.ɵɵproperty("disabled", !ctx_r2.order.item_count)("matBadge", ctx_r2.order.item_count)("matBadgeHidden", !ctx_r2.order.item_count);
  }
}
function CateringOrderModalComponent_footer_1_ng_template_2_Template(rf, ctx) {
  if (rf & 1) {
    var _r8 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "button", 28);
    i0.ɵɵlistener("click", function CateringOrderModalComponent_footer_1_ng_template_2_Template_button_click_0_listener() {
      i0.ɵɵrestoreView(_r8);
      var ctx_r2 = i0.ɵɵnextContext(2);
      return i0.ɵɵresetView(ctx_r2.show_order_details = false);
    });
    i0.ɵɵtext(1, " Back ");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(2, "button", 29);
    i0.ɵɵlistener("click", function CateringOrderModalComponent_footer_1_ng_template_2_Template_button_click_2_listener() {
      i0.ɵɵrestoreView(_r8);
      var ctx_r2 = i0.ɵɵnextContext(2);
      return i0.ɵɵresetView(ctx_r2.saveOrder());
    });
    i0.ɵɵtext(3, " Save Order ");
    i0.ɵɵelementEnd();
  }
}
function CateringOrderModalComponent_footer_1_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "footer", 25);
    i0.ɵɵtemplate(1, CateringOrderModalComponent_footer_1_ng_container_1_Template, 5, 3, "ng-container", 6)(2, CateringOrderModalComponent_footer_1_ng_template_2_Template, 4, 0, "ng-template", null, 2, i0.ɵɵtemplateRefExtractor);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var order_actions_r9 = i0.ɵɵreference(3);
    var ctx_r2 = i0.ɵɵnextContext();
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", !ctx_r2.show_order_details)("ngIfElse", order_actions_r9);
  }
}
function CateringOrderModalComponent_ng_template_2_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 30);
    i0.ɵɵelement(1, "mat-spinner", 31);
    i0.ɵɵelementStart(2, "p");
    i0.ɵɵtext(3);
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var ctx_r2 = i0.ɵɵnextContext();
    i0.ɵɵadvance(3);
    i0.ɵɵtextInterpolate(ctx_r2.loading);
  }
}
function CateringOrderModalComponent_ng_template_4_div_4_div_4_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 35);
    i0.ɵɵtext(1);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var item_r11 = i0.ɵɵnextContext().$implicit;
    var ctx_r2 = i0.ɵɵnextContext(2);
    i0.ɵɵproperty("matTooltip", ctx_r2.optionsFor(item_r11));
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate2(" ", item_r11.options.length, " option", item_r11.options.length === 1 ? "" : "s", " selected ");
  }
}
function CateringOrderModalComponent_ng_template_4_div_4_Template(rf, ctx) {
  if (rf & 1) {
    var _r10 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 12)(1, "div", 13)(2, "div", 13);
    i0.ɵɵtext(3);
    i0.ɵɵelementEnd();
    i0.ɵɵtemplate(4, CateringOrderModalComponent_ng_template_4_div_4_div_4_Template, 2, 3, "div", 33);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(5, "div", 15);
    i0.ɵɵtext(6);
    i0.ɵɵpipe(7, "currency");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(8, "a-counter", 34);
    i0.ɵɵlistener("ngModelChange", function CateringOrderModalComponent_ng_template_4_div_4_Template_a_counter_ngModelChange_8_listener($event) {
      var item_r11 = i0.ɵɵrestoreView(_r10).$implicit;
      var ctx_r2 = i0.ɵɵnextContext(2);
      return i0.ɵɵresetView(ctx_r2.updateItemQuantity(item_r11, $event));
    });
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var item_r11 = ctx.$implicit;
    var ctx_r2 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance(3);
    i0.ɵɵtextInterpolate(item_r11.name);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", item_r11.options.length);
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate1(" ", i0.ɵɵpipeBind2(7, 4, item_r11.total_cost / 100, ctx_r2.code), " ");
    i0.ɵɵadvance(2);
    i0.ɵɵproperty("ngModel", item_r11.quantity);
  }
}
function CateringOrderModalComponent_ng_template_4_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "header", 32)(1, "h3");
    i0.ɵɵtext(2, "Confirm Order");
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(3, "div", 10);
    i0.ɵɵtemplate(4, CateringOrderModalComponent_ng_template_4_div_4_Template, 9, 7, "div", 11);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r2 = i0.ɵɵnextContext();
    i0.ɵɵadvance(4);
    i0.ɵɵproperty("ngForOf", ctx_r2.order.items);
  }
}
// TODO: Split template into 2 children components. Order menu and Order Confirm;
var CateringOrderModalComponent = /*#__PURE__*/function (_common_1$AsyncHandle) {
  function CateringOrderModalComponent(_org, _data) {
    var _this;
    _classCallCheck(this, CateringOrderModalComponent);
    _this = _callSuper(this, CateringOrderModalComponent);
    _this._org = _org;
    _this._data = _data;
    /** Emitter for events on the modal */
    _this.event = new core_1.EventEmitter();
    /** Whether changes are being saved */
    _this.loading = '';
    /** List of menu items to show */
    _this.menu_items = {};
    /** List of categories for the active menu */
    _this.categories = [];
    _this.loading = 'Loading menu...';
    return _this;
  }
  _inherits(CateringOrderModalComponent, _common_1$AsyncHandle);
  return _createClass(CateringOrderModalComponent, [{
    key: "code",
    get: function get() {
      return this._org.currency_code;
    }
  }, {
    key: "ngOnInit",
    value: function () {
      var _ngOnInit = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
        var _this$order$event,
          _this2 = this;
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              this.loading = 'Loading menu...';
              this.order = new catering_order_class_1.CateringOrder(this._data.order);
              _context.next = 4;
              return this._data.getCateringConfig((_this$order$event = this.order.event) === null || _this$order$event === void 0 || (_this$order$event = _this$order$event.space) === null || _this$order$event === void 0 || (_this$order$event = _this$order$event.level) === null || _this$order$event === void 0 ? void 0 : _this$order$event.parent_id);
            case 4:
              this.rules = _context.sent;
              this._data.menu.subscribe(function (list) {
                _this2.loading = 'Loading menu...';
                var categories = (0, common_1.unique)(list.map(function (item) {
                  return item.category;
                }));
                var map = {};
                var _iterator = _createForOfIteratorHelper(categories),
                  _step;
                try {
                  var _loop = function _loop() {
                    var cat = _step.value;
                    map[cat] = list.filter(function (item) {
                      return item.category === cat && (0, utilities_1.cateringItemAvailable)(item, _this2.rules, _this2.order.event);
                    });
                  };
                  for (_iterator.s(); !(_step = _iterator.n()).done;) {
                    _loop();
                  }
                } catch (err) {
                  _iterator.e(err);
                } finally {
                  _iterator.f();
                }
                _this2.categories = categories;
                _this2.menu_items = map;
                _this2.updateMenuQuantities();
                _this2.timeout('clear_loading', function () {
                  return _this2.loading = '';
                }, 1000);
              });
            case 6:
            case "end":
              return _context.stop();
          }
        }, _callee, this);
      }));
      function ngOnInit() {
        return _ngOnInit.apply(this, arguments);
      }
      return ngOnInit;
    }()
  }, {
    key: "addItem",
    value: function addItem(item) {
      var _item$options,
        _this3 = this;
      var choose_options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;
      var old_item = this.order.items.find(function (itm) {
        return itm.id === item.id && itm.options.length === itm.options.reduce(function (c, o) {
          return c + (item.options.find(function (opt) {
            return o.id === opt.id;
          }) ? 1 : 0);
        }, 0);
      });
      if (choose_options && (_item$options = item.options) !== null && _item$options !== void 0 && _item$options.length) {
        this._data.selectOptions(item.options).then(function (options) {
          var new_item = new catering_item_class_1.CateringItem(_objectSpread(_objectSpread({}, item), {}, {
            options: options
          }));
          _this3.addItem(new_item, false);
        });
      } else if (old_item) {
        this.order = new catering_order_class_1.CateringOrder(_objectSpread(_objectSpread({}, this.order), {}, {
          items: this.order.items.filter(function (i) {
            return !(i.id === item.id && i.options_string === item.options_string);
          }).concat([new catering_item_class_1.CateringItem(_objectSpread(_objectSpread({}, item), {}, {
            quantity: old_item.quantity + 1
          }))])
        }));
      } else {
        this.order = new catering_order_class_1.CateringOrder(_objectSpread(_objectSpread({}, this.order), {}, {
          items: this.order.items.concat([new catering_item_class_1.CateringItem(_objectSpread(_objectSpread({}, item), {}, {
            quantity: 1
          }))])
        }));
      }
      this.updateMenuQuantities();
    }
  }, {
    key: "removeItem",
    value: function removeItem(item) {
      this.order = new catering_order_class_1.CateringOrder(_objectSpread(_objectSpread({}, this.order), {}, {
        items: this.order.items.filter(function (_) {
          return _.id !== item.id && _.options_string === item.options_string;
        })
      }));
      this.updateMenuQuantities();
    }
  }, {
    key: "updateItemQuantity",
    value: function updateItemQuantity(item, amount) {
      var old_item = this.order.items.find(function (itm) {
        return itm.id === item.id && itm.options_string === item.options_string;
      });
      var items = _toConsumableArray(this.order.items);
      if (old_item) {
        items = this.order.items.filter(function (i) {
          return !(i.id === item.id && i.options_string === item.options_string);
        }).concat([new catering_item_class_1.CateringItem(_objectSpread(_objectSpread({}, item), {}, {
          quantity: amount
        }))]);
      } else {
        items = this.order.items.concat([new catering_item_class_1.CateringItem(_objectSpread(_objectSpread({}, item), {}, {
          quantity: amount
        }))]);
      }
      items.sort(function (a, b) {
        return a.name.localeCompare(b.name);
      });
      this.order = new catering_order_class_1.CateringOrder(_objectSpread(_objectSpread({}, this.order), {}, {
        items: items
      }));
      this.updateMenuQuantities();
    }
  }, {
    key: "updateMenuQuantities",
    value: function updateMenuQuantities() {
      var _this4 = this;
      for (var cat in this.menu_items) {
        var _iterator2 = _createForOfIteratorHelper(this.menu_items[cat]),
          _step2;
        try {
          var _loop2 = function _loop2() {
            var item = _step2.value;
            item.quantity = _this4.order.items.reduce(function (c, i) {
              return i.id === item.id ? c + i.quantity : c;
            }, 0);
          };
          for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
            _loop2();
          }
        } catch (err) {
          _iterator2.e(err);
        } finally {
          _iterator2.f();
        }
      }
    }
  }, {
    key: "optionsFor",
    value: function optionsFor(item) {
      return item.options.map(function (i) {
        return i.name;
      }).join('\n');
    }
  }, {
    key: "saveOrder",
    value: function saveOrder() {
      this.event.emit({
        reason: 'done',
        metadata: {
          order: this.order
        }
      });
    }
  }, {
    key: "confirmOrder",
    value: function confirmOrder() {
      this.show_order_details = true;
    }
  }]);
}(common_1.AsyncHandler);
_CateringOrderModalComponent = CateringOrderModalComponent;
_CateringOrderModalComponent.ɵfac = function CateringOrderModalComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _CateringOrderModalComponent)(i0.ɵɵdirectiveInject(i1.OrganisationService), i0.ɵɵdirectiveInject(dialog_1.MAT_DIALOG_DATA));
};
_CateringOrderModalComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _CateringOrderModalComponent,
  selectors: [["app-catering-order-modal"]],
  outputs: {
    event: "event"
  },
  features: [i0.ɵɵInheritDefinitionFeature],
  decls: 6,
  vars: 3,
  consts: [["load_state", ""], ["order_details", ""], ["order_actions", ""], ["class", "main min-w-[20rem]", 4, "ngIf", "ngIfElse"], ["class", "flex items-center justify-center space-x-2 p-2 border-t border-base-200", 4, "ngIf"], [1, "main", "min-w-[20rem]"], [4, "ngIf", "ngIfElse"], [4, "ngFor", "ngForOf"], [3, "label", 4, "ngIf"], [3, "label"], [1, "list"], ["item", "", "class", "flex items-center p-2 border-b border-base-200", 4, "ngFor", "ngForOf"], ["item", "", 1, "flex", "items-center", "p-2", "border-b", "border-base-200"], [1, "flex-1", "w-1/2"], ["class", "text-xs no-underline", 4, "ngIf"], [1, "bg-primary", "text-xs", "rounded", "px-4", "py-2", "mx-2", "text-white", "font-medium"], ["ngDefaultControl", "", 3, "ngModel", "ngModelChange", 4, "ngIf"], ["class", "flex items-center", 4, "ngIf"], [1, "text-xs", "no-underline"], ["ngDefaultControl", "", 3, "ngModelChange", "ngModel"], [1, "flex", "items-center"], [3, "matTooltip"], ["icon", "", "matRipple", "", 3, "disabled"], [1, "count", "h-12", "w-12", "flex", "items-center", "justify-center"], ["icon", "", "matRipple", "", 3, "click"], [1, "flex", "items-center", "justify-center", "space-x-2", "p-2", "border-t", "border-base-200"], ["btn", "", "matRipple", "", "mat-dialog-close", "", 1, "inverse"], ["confirm", "", "btn", "", "matRipple", "", "matBadgeColor", "warn", 3, "click", "disabled", "matBadge", "matBadgeHidden"], ["matRipple", "", 1, "inverse", 3, "click"], ["save", "", "btn", "", "matRipple", "", 3, "click"], [1, "flex", "flex-col", "w-64", "p-8", "items-center", "space-y-2"], ["diameter", "32"], [1, "h-[3.25rem]"], ["class", "text-xs underline", 3, "matTooltip", 4, "ngIf"], [3, "ngModelChange", "ngModel"], [1, "text-xs", "underline", 3, "matTooltip"]],
  template: function CateringOrderModalComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵtemplate(0, CateringOrderModalComponent_div_0_Template, 2, 2, "div", 3)(1, CateringOrderModalComponent_footer_1_Template, 4, 2, "footer", 4)(2, CateringOrderModalComponent_ng_template_2_Template, 4, 1, "ng-template", null, 0, i0.ɵɵtemplateRefExtractor)(4, CateringOrderModalComponent_ng_template_4_Template, 5, 1, "ng-template", null, 1, i0.ɵɵtemplateRefExtractor);
    }
    if (rf & 2) {
      var load_state_r12 = i0.ɵɵreference(3);
      i0.ɵɵproperty("ngIf", !ctx.loading)("ngIfElse", load_state_r12);
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", !ctx.loading);
    }
  },
  dependencies: [i2.NgForOf, i2.NgIf, i3.MatTab, i3.MatTabGroup, i4.MatDialogClose, i5.MatTooltip, i6.DefaultValueAccessor, i6.NgControlStatus, i6.NgModel, i7.IconComponent, i8.MatRipple, i9.MatProgressSpinner, i10.CounterComponent, i2.CurrencyPipe],
  styles: [".list[_ngcontent-%COMP%] {\n                height: 24em;\n                min-width: 32em;\n                max-width: calc(100vw - 1em);\n            }\n\n            footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\n                min-width: 12em;\n            }\n\n            input[_ngcontent-%COMP%] {\n                position: relative;\n                width: 100%;\n                padding: 1em;\n                border: none;\n                border-radius: 0 !important;\n                border-top: 1px solid #ccc;\n                border-bottom: 1px solid #ccc;\n                outline: none;\n                font-size: 1em;\n            }\n\n            input[_ngcontent-%COMP%]:focus {\n                border: none;\n                border-top: 2px solid var(--s);\n                border-bottom: 2px solid var(--s);\n                box-shadow: none;\n            }\n\n            input.error[_ngcontent-%COMP%]::placeholder {\n                color: rgba(var(--error), 0.45);\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNhdGVyaW5nLW9yZGVyLW1vZGFsLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1lBQ1k7Z0JBQ0ksWUFBWTtnQkFDWixlQUFlO2dCQUNmLDRCQUE0QjtZQUNoQzs7WUFFQTtnQkFDSSxlQUFlO1lBQ25COztZQUVBO2dCQUNJLGtCQUFrQjtnQkFDbEIsV0FBVztnQkFDWCxZQUFZO2dCQUNaLFlBQVk7Z0JBQ1osMkJBQTJCO2dCQUMzQiwwQkFBMEI7Z0JBQzFCLDZCQUE2QjtnQkFDN0IsYUFBYTtnQkFDYixjQUFjO1lBQ2xCOztZQUVBO2dCQUNJLFlBQVk7Z0JBQ1osOEJBQThCO2dCQUM5QixpQ0FBaUM7Z0JBQ2pDLGdCQUFnQjtZQUNwQjs7WUFFQTtnQkFDSSwrQkFBK0I7WUFDbkMiLCJmaWxlIjoiY2F0ZXJpbmctb3JkZXItbW9kYWwuY29tcG9uZW50LnRzIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICAubGlzdCB7XG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAyNGVtO1xuICAgICAgICAgICAgICAgIG1pbi13aWR0aDogMzJlbTtcbiAgICAgICAgICAgICAgICBtYXgtd2lkdGg6IGNhbGMoMTAwdncgLSAxZW0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmb290ZXIgYnV0dG9uIHtcbiAgICAgICAgICAgICAgICBtaW4td2lkdGg6IDEyZW07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlucHV0IHtcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICAgICAgcGFkZGluZzogMWVtO1xuICAgICAgICAgICAgICAgIGJvcmRlcjogbm9uZTtcbiAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiAwICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgICAgYm9yZGVyLXRvcDogMXB4IHNvbGlkICNjY2M7XG4gICAgICAgICAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNjY2M7XG4gICAgICAgICAgICAgICAgb3V0bGluZTogbm9uZTtcbiAgICAgICAgICAgICAgICBmb250LXNpemU6IDFlbTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaW5wdXQ6Zm9jdXMge1xuICAgICAgICAgICAgICAgIGJvcmRlcjogbm9uZTtcbiAgICAgICAgICAgICAgICBib3JkZXItdG9wOiAycHggc29saWQgdmFyKC0tcyk7XG4gICAgICAgICAgICAgICAgYm9yZGVyLWJvdHRvbTogMnB4IHNvbGlkIHZhcigtLXMpO1xuICAgICAgICAgICAgICAgIGJveC1zaGFkb3c6IG5vbmU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlucHV0LmVycm9yOjpwbGFjZWhvbGRlciB7XG4gICAgICAgICAgICAgICAgY29sb3I6IHJnYmEodmFyKC0tZXJyb3IpLCAwLjQ1KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl19 */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvY2F0ZXJpbmcvc3JjL2xpYi9jYXRlcmluZy1vcmRlci1tb2RhbC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLFlBQVk7Z0JBQ1osZUFBZTtnQkFDZiw0QkFBNEI7WUFDaEM7O1lBRUE7Z0JBQ0ksZUFBZTtZQUNuQjs7WUFFQTtnQkFDSSxrQkFBa0I7Z0JBQ2xCLFdBQVc7Z0JBQ1gsWUFBWTtnQkFDWixZQUFZO2dCQUNaLDJCQUEyQjtnQkFDM0IsMEJBQTBCO2dCQUMxQiw2QkFBNkI7Z0JBQzdCLGFBQWE7Z0JBQ2IsY0FBYztZQUNsQjs7WUFFQTtnQkFDSSxZQUFZO2dCQUNaLDhCQUE4QjtnQkFDOUIsaUNBQWlDO2dCQUNqQyxnQkFBZ0I7WUFDcEI7O1lBRUE7Z0JBQ0ksK0JBQStCO1lBQ25DOztBQUVaLHcwREFBdzBEIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICAubGlzdCB7XG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAyNGVtO1xuICAgICAgICAgICAgICAgIG1pbi13aWR0aDogMzJlbTtcbiAgICAgICAgICAgICAgICBtYXgtd2lkdGg6IGNhbGMoMTAwdncgLSAxZW0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmb290ZXIgYnV0dG9uIHtcbiAgICAgICAgICAgICAgICBtaW4td2lkdGg6IDEyZW07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlucHV0IHtcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICAgICAgcGFkZGluZzogMWVtO1xuICAgICAgICAgICAgICAgIGJvcmRlcjogbm9uZTtcbiAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiAwICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgICAgYm9yZGVyLXRvcDogMXB4IHNvbGlkICNjY2M7XG4gICAgICAgICAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNjY2M7XG4gICAgICAgICAgICAgICAgb3V0bGluZTogbm9uZTtcbiAgICAgICAgICAgICAgICBmb250LXNpemU6IDFlbTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaW5wdXQ6Zm9jdXMge1xuICAgICAgICAgICAgICAgIGJvcmRlcjogbm9uZTtcbiAgICAgICAgICAgICAgICBib3JkZXItdG9wOiAycHggc29saWQgdmFyKC0tcyk7XG4gICAgICAgICAgICAgICAgYm9yZGVyLWJvdHRvbTogMnB4IHNvbGlkIHZhcigtLXMpO1xuICAgICAgICAgICAgICAgIGJveC1zaGFkb3c6IG5vbmU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlucHV0LmVycm9yOjpwbGFjZWhvbGRlciB7XG4gICAgICAgICAgICAgICAgY29sb3I6IHJnYmEodmFyKC0tZXJyb3IpLCAwLjQ1KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl0sInNvdXJjZVJvb3QiOiIifQ== */"]
});
exports.CateringOrderModalComponent = CateringOrderModalComponent;

/***/ }),

/***/ 90699:
/*!***************************************************************************************!*\
  !*** ./libs/catering/src/lib/catering-order-modal/catering-item-details.component.ts ***!
  \***************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _taggedTemplateLiteral = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js */ 9959)["default"]);
var _createForOfIteratorHelper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createForOfIteratorHelper.js */ 36350)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _CateringItemDetailsComponent, _templateObject, _templateObject2;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.CateringItemDetailsComponent = void 0;
var core_1 = __webpack_require__(/*! @angular/core */ 37580);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var catering_item_class_1 = __webpack_require__(/*! ../catering-item.class */ 25892);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @angular/common */ 60316);
var i2 = __webpack_require__(/*! @angular/material/checkbox */ 97024);
var i3 = __webpack_require__(/*! @angular/material/radio */ 53804);
var i4 = __webpack_require__(/*! @angular/forms */ 34456);
var i5 = __webpack_require__(/*! ../../../../components/src/lib/icon.component */ 69434);
var i6 = __webpack_require__(/*! ../../../../components/src/lib/image-carousel.component */ 65277);
var i7 = __webpack_require__(/*! @angular/material/core */ 74646);
var i8 = __webpack_require__(/*! ../../../../form-fields/src/lib/counter.component */ 55507);
function CateringItemDetailsComponent_ng_container_0_p_14_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "p");
    i0.ɵɵtext(1);
    i0.ɵɵpipe(2, "currency");
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", i0.ɵɵpipeBind2(2, 1, ctx_r1.item.unit_price / 100, ctx_r1.code), " ");
  }
}
function CateringItemDetailsComponent_ng_container_0_div_17_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 23);
    i0.ɵɵtext(1);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var tag_r3 = ctx.$implicit;
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", tag_r3, " ");
  }
}
function CateringItemDetailsComponent_ng_container_0_div_21_ng_container_4_mat_radio_button_5_div_4_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 35);
    i0.ɵɵtext(1);
    i0.ɵɵpipe(2, "currency");
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var opt_r6 = i0.ɵɵnextContext().$implicit;
    var ctx_r1 = i0.ɵɵnextContext(4);
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" +", i0.ɵɵpipeBind2(2, 1, opt_r6.unit_price / 100, ctx_r1.code), " ");
  }
}
function CateringItemDetailsComponent_ng_container_0_div_21_ng_container_4_mat_radio_button_5_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "mat-radio-button", 31)(1, "div", 32)(2, "div", 33);
    i0.ɵɵtext(3);
    i0.ɵɵelementEnd();
    i0.ɵɵtemplate(4, CateringItemDetailsComponent_ng_container_0_div_21_ng_container_4_mat_radio_button_5_div_4_Template, 3, 4, "div", 34);
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var opt_r6 = ctx.$implicit;
    i0.ɵɵproperty("value", opt_r6.id);
    i0.ɵɵadvance(3);
    i0.ɵɵtextInterpolate1(" ", opt_r6.name, " ");
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", opt_r6.unit_price);
  }
}
function CateringItemDetailsComponent_ng_container_0_div_21_ng_container_4_Template(rf, ctx) {
  if (rf & 1) {
    var _r4 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵelementStart(1, "mat-radio-group", 27);
    i0.ɵɵtwoWayListener("ngModelChange", function CateringItemDetailsComponent_ng_container_0_div_21_ng_container_4_Template_mat_radio_group_ngModelChange_1_listener($event) {
      i0.ɵɵrestoreView(_r4);
      var group_r5 = i0.ɵɵnextContext().$implicit;
      var ctx_r1 = i0.ɵɵnextContext(2);
      i0.ɵɵtwoWayBindingSet(ctx_r1.group_state[group_r5.name], $event) || (ctx_r1.group_state[group_r5.name] = $event);
      return i0.ɵɵresetView($event);
    });
    i0.ɵɵlistener("ngModelChange", function CateringItemDetailsComponent_ng_container_0_div_21_ng_container_4_Template_mat_radio_group_ngModelChange_1_listener($event) {
      i0.ɵɵrestoreView(_r4);
      var group_r5 = i0.ɵɵnextContext().$implicit;
      var ctx_r1 = i0.ɵɵnextContext(2);
      return i0.ɵɵresetView(ctx_r1.updateGroupOption(group_r5, $event));
    });
    i0.ɵɵelementStart(2, "mat-radio-button", 28)(3, "span", 29);
    i0.ɵɵi18n(4, 2);
    i0.ɵɵelementEnd()();
    i0.ɵɵtemplate(5, CateringItemDetailsComponent_ng_container_0_div_21_ng_container_4_mat_radio_button_5_Template, 5, 3, "mat-radio-button", 30);
    i0.ɵɵelementEnd();
    i0.ɵɵelementContainerEnd();
  }
  if (rf & 2) {
    var group_r5 = i0.ɵɵnextContext().$implicit;
    var ctx_r1 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance();
    i0.ɵɵtwoWayProperty("ngModel", ctx_r1.group_state[group_r5.name]);
    i0.ɵɵproperty("disabled", ctx_r1.item == null ? null : ctx_r1.item.in_order);
    i0.ɵɵadvance(4);
    i0.ɵɵproperty("ngForOf", group_r5 == null ? null : group_r5.options);
  }
}
function CateringItemDetailsComponent_ng_container_0_div_21_ng_template_5_mat_checkbox_0_div_4_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 35);
    i0.ɵɵtext(1);
    i0.ɵɵpipe(2, "currency");
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var opt_r8 = i0.ɵɵnextContext().$implicit;
    var ctx_r1 = i0.ɵɵnextContext(4);
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" +", i0.ɵɵpipeBind2(2, 1, opt_r8.unit_price / 100, ctx_r1.code), " ");
  }
}
function CateringItemDetailsComponent_ng_container_0_div_21_ng_template_5_mat_checkbox_0_Template(rf, ctx) {
  if (rf & 1) {
    var _r7 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "mat-checkbox", 37);
    i0.ɵɵtwoWayListener("ngModelChange", function CateringItemDetailsComponent_ng_container_0_div_21_ng_template_5_mat_checkbox_0_Template_mat_checkbox_ngModelChange_0_listener($event) {
      var opt_r8 = i0.ɵɵrestoreView(_r7).$implicit;
      var ctx_r1 = i0.ɵɵnextContext(4);
      i0.ɵɵtwoWayBindingSet(ctx_r1.option_state[opt_r8.id], $event) || (ctx_r1.option_state[opt_r8.id] = $event);
      return i0.ɵɵresetView($event);
    });
    i0.ɵɵlistener("ngModelChange", function CateringItemDetailsComponent_ng_container_0_div_21_ng_template_5_mat_checkbox_0_Template_mat_checkbox_ngModelChange_0_listener($event) {
      var opt_r8 = i0.ɵɵrestoreView(_r7).$implicit;
      var ctx_r1 = i0.ɵɵnextContext(4);
      return i0.ɵɵresetView(ctx_r1.updateCheckedState(opt_r8.id, $event));
    });
    i0.ɵɵelementStart(1, "div", 21)(2, "div", 38);
    i0.ɵɵtext(3);
    i0.ɵɵelementEnd();
    i0.ɵɵtemplate(4, CateringItemDetailsComponent_ng_container_0_div_21_ng_template_5_mat_checkbox_0_div_4_Template, 3, 4, "div", 34);
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var opt_r8 = ctx.$implicit;
    var ctx_r1 = i0.ɵɵnextContext(4);
    i0.ɵɵtwoWayProperty("ngModel", ctx_r1.option_state[opt_r8.id]);
    i0.ɵɵproperty("disabled", ctx_r1.item == null ? null : ctx_r1.item.in_order);
    i0.ɵɵadvance(3);
    i0.ɵɵtextInterpolate1(" ", opt_r8.name, " ");
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", opt_r8.unit_price);
  }
}
function CateringItemDetailsComponent_ng_container_0_div_21_ng_template_5_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵtemplate(0, CateringItemDetailsComponent_ng_container_0_div_21_ng_template_5_mat_checkbox_0_Template, 5, 4, "mat-checkbox", 36);
  }
  if (rf & 2) {
    var group_r5 = i0.ɵɵnextContext().$implicit;
    i0.ɵɵproperty("ngForOf", group_r5 == null ? null : group_r5.options);
  }
}
function CateringItemDetailsComponent_ng_container_0_div_21_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 24)(1, "div", 25);
    i0.ɵɵtext(2);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(3, "div", 26);
    i0.ɵɵtemplate(4, CateringItemDetailsComponent_ng_container_0_div_21_ng_container_4_Template, 6, 3, "ng-container", 4)(5, CateringItemDetailsComponent_ng_container_0_div_21_ng_template_5_Template, 1, 1, "ng-template", null, 1, i0.ɵɵtemplateRefExtractor);
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var group_r5 = ctx.$implicit;
    var multi_options_r9 = i0.ɵɵreference(6);
    i0.ɵɵattribute("group", group_r5.name);
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate1(" ", group_r5.name, " ");
    i0.ɵɵadvance(2);
    i0.ɵɵproperty("ngIf", !group_r5.multiple)("ngIfElse", multi_options_r9);
  }
}
function CateringItemDetailsComponent_ng_container_0_Template(rf, ctx) {
  if (rf & 1) {
    var _r1 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵelementStart(1, "section", 5);
    i0.ɵɵelement(2, "image-carousel", 6);
    i0.ɵɵelementStart(3, "button", 7);
    i0.ɵɵlistener("click", function CateringItemDetailsComponent_ng_container_0_Template_button_click_3_listener() {
      i0.ɵɵrestoreView(_r1);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.close.emit());
    });
    i0.ɵɵelementStart(4, "app-icon");
    i0.ɵɵtext(5, "arrow_back");
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(6, "button", 8);
    i0.ɵɵlistener("click", function CateringItemDetailsComponent_ng_container_0_Template_button_click_6_listener() {
      i0.ɵɵrestoreView(_r1);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.toggleFav.emit());
    });
    i0.ɵɵelementStart(7, "app-icon");
    i0.ɵɵtext(8);
    i0.ɵɵelementEnd()()();
    i0.ɵɵelementStart(9, "div", 9)(10, "section", 10)(11, "div")(12, "h2", 11);
    i0.ɵɵtext(13);
    i0.ɵɵelementEnd();
    i0.ɵɵtemplate(14, CateringItemDetailsComponent_ng_container_0_p_14_Template, 3, 4, "p", 12);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(15, "a-counter", 13);
    i0.ɵɵtwoWayListener("ngModelChange", function CateringItemDetailsComponent_ng_container_0_Template_a_counter_ngModelChange_15_listener($event) {
      i0.ɵɵrestoreView(_r1);
      var ctx_r1 = i0.ɵɵnextContext();
      i0.ɵɵtwoWayBindingSet(ctx_r1.item.quantity, $event) || (ctx_r1.item.quantity = $event);
      return i0.ɵɵresetView($event);
    });
    i0.ɵɵlistener("ngModelChange", function CateringItemDetailsComponent_ng_container_0_Template_a_counter_ngModelChange_15_listener() {
      i0.ɵɵrestoreView(_r1);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.active ? ctx_r1.activeChange.emit(ctx_r1.active) : "");
    });
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(16, "section", 14);
    i0.ɵɵtemplate(17, CateringItemDetailsComponent_ng_container_0_div_17_Template, 2, 1, "div", 15);
    i0.ɵɵelementEnd();
    i0.ɵɵelement(18, "hr");
    i0.ɵɵelementStart(19, "section", 16)(20, "div", 17);
    i0.ɵɵtemplate(21, CateringItemDetailsComponent_ng_container_0_div_21_Template, 7, 4, "div", 18);
    i0.ɵɵelementEnd()()();
    i0.ɵɵelementStart(22, "div", 19)(23, "button", 20);
    i0.ɵɵlistener("click", function CateringItemDetailsComponent_ng_container_0_Template_button_click_23_listener() {
      i0.ɵɵrestoreView(_r1);
      var ctx_r1 = i0.ɵɵnextContext();
      ctx_r1.active = !ctx_r1.active;
      return i0.ɵɵresetView(ctx_r1.activeChange.emit(ctx_r1.active));
    });
    i0.ɵɵelementStart(24, "div", 21)(25, "app-icon", 22);
    i0.ɵɵtext(26);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(27, "p");
    i0.ɵɵtext(28);
    i0.ɵɵelementEnd()()()();
    i0.ɵɵelementContainerEnd();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance(2);
    i0.ɵɵproperty("images", ctx_r1.item.images);
    i0.ɵɵadvance(4);
    i0.ɵɵclassProp("text-white", !ctx_r1.fav)("text-blue-400", ctx_r1.fav);
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate(ctx_r1.fav ? "favorite" : "favorite_border");
    i0.ɵɵadvance(5);
    i0.ɵɵtextInterpolate1(" ", ctx_r1.item.name, " ");
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", ctx_r1.item.unit_price);
    i0.ɵɵadvance();
    i0.ɵɵtwoWayProperty("ngModel", ctx_r1.item.quantity);
    i0.ɵɵproperty("min", 1)("max", ctx_r1.item.count || 10);
    i0.ɵɵadvance(2);
    i0.ɵɵproperty("ngForOf", ctx_r1.item.tags);
    i0.ɵɵadvance(4);
    i0.ɵɵproperty("ngForOf", ctx_r1.groups);
    i0.ɵɵadvance(2);
    i0.ɵɵclassProp("inverse", ctx_r1.active);
    i0.ɵɵadvance(3);
    i0.ɵɵtextInterpolate(ctx_r1.active ? "remove" : "add");
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate1(" ", ctx_r1.active ? "Remove this item" : "Add this item", " ");
  }
}
function CateringItemDetailsComponent_ng_template_1_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 39)(1, "p", 40);
    i0.ɵɵi18n(2, 3);
    i0.ɵɵelementEnd()();
  }
}
var CateringItemDetailsComponent = /*#__PURE__*/function () {
  function CateringItemDetailsComponent() {
    _classCallCheck(this, CateringItemDetailsComponent);
    this.active = false;
    this.fav = false;
    this.code = 'USD';
    this.toggleFav = new core_1.EventEmitter();
    this.activeChange = new core_1.EventEmitter();
    this.close = new core_1.EventEmitter();
    this.option_state = {};
    this.group_state = {};
  }
  return _createClass(CateringItemDetailsComponent, [{
    key: "ngOnChanges",
    value: function ngOnChanges(changes) {
      if (changes.item && this.item) {
        this._update();
      }
    }
  }, {
    key: "updateGroupOption",
    value: function updateGroupOption(group, id) {
      if (!group) return;
      this.group_state[group.name] = id;
      var _iterator = _createForOfIteratorHelper(group.options),
        _step;
      try {
        for (_iterator.s(); !(_step = _iterator.n()).done;) {
          var option = _step.value;
          option.active = option.id === id;
        }
      } catch (err) {
        _iterator.e(err);
      } finally {
        _iterator.f();
      }
    }
  }, {
    key: "updateCheckedState",
    value: function updateCheckedState(id, state) {
      var _this$item;
      var option = (_this$item = this.item) === null || _this$item === void 0 ? void 0 : _this$item.options.find(function (_) {
        return _.id === id;
      });
      if (option) option.active = state;
    }
  }, {
    key: "_update",
    value: function _update() {
      var _this = this;
      if (!this.item) return;
      if (!this.item.quantity) {
        this.item.quantity = 1;
      }
      this.option_state = {};
      this.group_state = {};
      var groups = (0, common_1.unique)(this.item.options.map(function (i) {
        return i.group || 'Other';
      }));
      var group_list = [];
      var _iterator2 = _createForOfIteratorHelper(groups),
        _step2;
      try {
        var _loop2 = function _loop2() {
          var group = _step2.value;
          var options = _this.item.options.filter(function (i) {
            return i.group === group;
          });
          group_list.push({
            name: group,
            multiple: !!options.find(function (i) {
              return i.multiple;
            }),
            options: options
          });
        };
        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
          _loop2();
        }
      } catch (err) {
        _iterator2.e(err);
      } finally {
        _iterator2.f();
      }
      this.groups = group_list;
      if (this.item.option_list) {
        var _iterator3 = _createForOfIteratorHelper(this.item.option_list),
          _step3;
        try {
          var _loop = function _loop() {
            var opt = _step3.value;
            var option = _this.item.options.find(function (_) {
              return _.id === opt.id;
            });
            if (option) {
              option.active = true;
              _this.option_state[opt.id] = true;
              _this.updateGroupOption(_this.groups.find(function (g) {
                return g.name === option.group;
              }), option.id);
            }
          };
          for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {
            _loop();
          }
        } catch (err) {
          _iterator3.e(err);
        } finally {
          _iterator3.f();
        }
      }
    }
  }]);
}();
_CateringItemDetailsComponent = CateringItemDetailsComponent;
_CateringItemDetailsComponent.ɵfac = function CateringItemDetailsComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _CateringItemDetailsComponent)();
};
_CateringItemDetailsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _CateringItemDetailsComponent,
  selectors: [["catering-item-details"]],
  inputs: {
    item: "item",
    active: "active",
    fav: "fav",
    code: "code"
  },
  outputs: {
    toggleFav: "toggleFav",
    activeChange: "activeChange",
    close: "close"
  },
  features: [i0.ɵɵNgOnChangesFeature],
  decls: 3,
  vars: 2,
  consts: function consts() {
    var i18n_0;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_6252070156626006029$$LIBS_CATERING_SRC_LIB_CATERING_ORDER_MODAL_CATERING_ITEM_DETAILS_COMPONENT_TS_0 = goog.getMsg("None");
      i18n_0 = MSG_EXTERNAL_6252070156626006029$$LIBS_CATERING_SRC_LIB_CATERING_ORDER_MODAL_CATERING_ITEM_DETAILS_COMPONENT_TS_0;
    } else {
      i18n_0 = $localize(_templateObject || (_templateObject = _taggedTemplateLiteral([":\u241Fa2f14a73f7a6e94479f67423cc51102da8d6f524\u241F6252070156626006029:None"])));
    }
    var i18n_1;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_2528715266490787662$$LIBS_CATERING_SRC_LIB_CATERING_ORDER_MODAL_CATERING_ITEM_DETAILS_COMPONENT_TS_1 = goog.getMsg(" Select an item to view it's details ");
      i18n_1 = MSG_EXTERNAL_2528715266490787662$$LIBS_CATERING_SRC_LIB_CATERING_ORDER_MODAL_CATERING_ITEM_DETAILS_COMPONENT_TS_1;
    } else {
      i18n_1 = $localize(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([":\u241F0fab86098296160aef9d98a89e252bee5cf35141\u241F2528715266490787662: Select an item to view it's details "])));
    }
    return [["empty_state", ""], ["multi_options", ""], i18n_0, i18n_1, [4, "ngIf", "ngIfElse"], ["image", "", 1, "relative", "w-full", "h-64", "sm:h-40", "bg-neutral"], [1, "absolute", "inset-0", 3, "images"], ["icon", "", "matRipple", "", "name", "close-catering-item-details", 1, "absolute", "top-2", "left-2", "bg-neutral", "sm:hidden", "text-white", 3, "click"], ["icon", "", "matRipple", "", "name", "toggle-catering-item-favourite-details", 1, "absolute", "top-2", "right-2", "bg-neutral", 3, "click"], [1, "p-2", "space-y-2", "flex-1", "h-1/2", "overflow-auto"], ["actions", "", 1, "z-0", "flex", "items-center", "justify-between"], [1, "text-xl", "font-medium", "mb-2", "mt-4"], [4, "ngIf"], [3, "ngModelChange", "ngModel", "min", "max"], [1, "flex", "items-center", "flex-wrap"], ["class", "px-2 py-1 rounded-2xl bg-base-200 text-sm capitalize m-1", 4, "ngFor", "ngForOf"], ["details", "", 1, "space-y-2"], [1, "flex", "flex-col", "flex-wrap"], ["class", "min-w-1/2 flex-1", 4, "ngFor", "ngForOf"], [1, "px-2", "pt-2", "pb-[5.5rem]", "border-t", "border-base-200", "shadow", "sm:hidden"], ["btn", "", "matRipple", "", "name", "select-catering-item-details", 1, "w-full", 3, "click"], [1, "flex", "items-center", "justify-center"], [1, "text-2xl"], [1, "px-2", "py-1", "rounded-2xl", "bg-base-200", "text-sm", "capitalize", "m-1"], [1, "min-w-1/2", "flex-1"], [1, "font-medium", "p-2", "capitalize"], [1, "flex", "flex-col", "pl-4"], ["aria-label", "Select an option", 1, "flex", "flex-col", 3, "ngModelChange", "ngModel", "disabled"], ["value", "", 1, "m-0"], [1, "font-medium", "p-2"], ["class", "m-0", 3, "value", 4, "ngFor", "ngForOf"], [1, "m-0", 3, "value"], [1, "flex", "items-center", "justify-center", "max-w-[calc(100vw-4rem)]", "sm:max-w-[15rem]"], [1, "font-medium", "p-2", "flex-1", "w-1/2", "whitespace-normal"], ["class", "opacity-60 text-xs", 4, "ngIf"], [1, "opacity-60", "text-xs"], [3, "ngModel", "disabled", "ngModelChange", 4, "ngFor", "ngForOf"], [3, "ngModelChange", "ngModel", "disabled"], [1, "font-medium", "p-2", "flex-1", "w-1/2"], ["empty", "", 1, "p-16", "flex", "flex-col", "items-center", "justify-center", "space-y-2"], [1, "opacity-30", "text-center"]];
  },
  template: function CateringItemDetailsComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵtemplate(0, CateringItemDetailsComponent_ng_container_0_Template, 29, 17, "ng-container", 4)(1, CateringItemDetailsComponent_ng_template_1_Template, 3, 0, "ng-template", null, 0, i0.ɵɵtemplateRefExtractor);
    }
    if (rf & 2) {
      var empty_state_r10 = i0.ɵɵreference(2);
      i0.ɵɵproperty("ngIf", ctx.item)("ngIfElse", empty_state_r10);
    }
  },
  dependencies: [i1.NgForOf, i1.NgIf, i2.MatCheckbox, i3.MatRadioGroup, i3.MatRadioButton, i4.NgControlStatus, i4.NgModel, i5.IconComponent, i6.ImageCarouselComponent, i7.MatRipple, i8.CounterComponent, i1.CurrencyPipe],
  styles: ["[_nghost-%COMP%] {\n                display: flex;\n                flex-direction: column;\n                width: 30%;\n                min-width: 20rem;\n                height: 100%;\n                min-height: 65vh;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNhdGVyaW5nLWl0ZW0tZGV0YWlscy5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLGFBQWE7Z0JBQ2Isc0JBQXNCO2dCQUN0QixVQUFVO2dCQUNWLGdCQUFnQjtnQkFDaEIsWUFBWTtnQkFDWixnQkFBZ0I7WUFDcEIiLCJmaWxlIjoiY2F0ZXJpbmctaXRlbS1kZXRhaWxzLmNvbXBvbmVudC50cyIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgOmhvc3Qge1xuICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgICAgICAgICB3aWR0aDogMzAlO1xuICAgICAgICAgICAgICAgIG1pbi13aWR0aDogMjByZW07XG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgICAgICAgICAgIG1pbi1oZWlnaHQ6IDY1dmg7XG4gICAgICAgICAgICB9XG4gICAgICAgICJdfQ== */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvY2F0ZXJpbmcvc3JjL2xpYi9jYXRlcmluZy1vcmRlci1tb2RhbC9jYXRlcmluZy1pdGVtLWRldGFpbHMuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxhQUFhO2dCQUNiLHNCQUFzQjtnQkFDdEIsVUFBVTtnQkFDVixnQkFBZ0I7Z0JBQ2hCLFlBQVk7Z0JBQ1osZ0JBQWdCO1lBQ3BCOztBQUVaLGdzQkFBZ3NCIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICA6aG9zdCB7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgICAgICAgIHdpZHRoOiAzMCU7XG4gICAgICAgICAgICAgICAgbWluLXdpZHRoOiAyMHJlbTtcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgICAgICAgICAgbWluLWhlaWdodDogNjV2aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl0sInNvdXJjZVJvb3QiOiIifQ== */"]
});
exports.CateringItemDetailsComponent = CateringItemDetailsComponent;

/***/ }),

/***/ 26386:
/*!***************************************************************************************!*\
  !*** ./libs/catering/src/lib/catering-order-modal/catering-item-filters.component.ts ***!
  \***************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _taggedTemplateLiteral = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js */ 9959)["default"]);
var _regeneratorRuntime = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/regeneratorRuntime.js */ 8698)["default"]);
var _toConsumableArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/toConsumableArray.js */ 86033)["default"]);
var _asyncToGenerator = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/asyncToGenerator.js */ 95386)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _callSuper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/callSuper.js */ 8513)["default"]);
var _inherits = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/inherits.js */ 58160)["default"]);
var _CateringItemFiltersComponent, _templateObject, _templateObject2;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.CateringItemFiltersComponent = void 0;
var core_1 = __webpack_require__(/*! @angular/core */ 37580);
var operators_1 = __webpack_require__(/*! rxjs/operators */ 97303);
var catering_order_state_service_1 = __webpack_require__(/*! ./catering-order-state.service */ 20097);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var date_fns_1 = __webpack_require__(/*! date-fns */ 25773);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! ./catering-order-state.service */ 20097);
var i2 = __webpack_require__(/*! @placeos/common */ 22797);
var i3 = __webpack_require__(/*! @angular/common */ 60316);
var i4 = __webpack_require__(/*! @angular/material/core */ 74646);
var i5 = __webpack_require__(/*! @angular/material/checkbox */ 97024);
var i6 = __webpack_require__(/*! @angular/material/tooltip */ 80640);
var i7 = __webpack_require__(/*! @angular/forms */ 34456);
var i8 = __webpack_require__(/*! ../../../../components/src/lib/icon.component */ 69434);
var i9 = __webpack_require__(/*! @angular/material/form-field */ 24950);
var i10 = __webpack_require__(/*! @angular/material/select */ 25175);
var i11 = __webpack_require__(/*! @angular/material/input */ 95541);
var i12 = __webpack_require__(/*! ../../../../form-fields/src/lib/duration-field.component */ 83476);
function CateringItemFiltersComponent_h3_6_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "h3", 11);
    i0.ɵɵi18n(1, 0);
    i0.ɵɵelementEnd();
  }
}
function CateringItemFiltersComponent_div_7_ng_container_3_mat_option_5_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "mat-option", 19);
    i0.ɵɵtext(1);
    i0.ɵɵpipe(2, "date");
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var day_r4 = ctx.$implicit;
    i0.ɵɵproperty("value", day_r4.id);
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", i0.ɵɵpipeBind2(2, 2, day_r4.value, "mediumDate"), " ");
  }
}
function CateringItemFiltersComponent_div_7_ng_container_3_Template(rf, ctx) {
  if (rf & 1) {
    var _r3 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵelementStart(1, "label");
    i0.ɵɵtext(2, "Deliver Date:");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(3, "mat-form-field", 16)(4, "mat-select", 17);
    i0.ɵɵtwoWayListener("ngModelChange", function CateringItemFiltersComponent_div_7_ng_container_3_Template_mat_select_ngModelChange_4_listener($event) {
      i0.ɵɵrestoreView(_r3);
      var ctx_r1 = i0.ɵɵnextContext(2);
      i0.ɵɵtwoWayBindingSet(ctx_r1.offset_day, $event) || (ctx_r1.offset_day = $event);
      return i0.ɵɵresetView($event);
    });
    i0.ɵɵlistener("ngModelChange", function CateringItemFiltersComponent_div_7_ng_container_3_Template_mat_select_ngModelChange_4_listener($event) {
      i0.ɵɵrestoreView(_r3);
      var ctx_r1 = i0.ɵɵnextContext(2);
      return i0.ɵɵresetView(ctx_r1.offset_dayChange.next($event));
    });
    i0.ɵɵtemplate(5, CateringItemFiltersComponent_div_7_ng_container_3_mat_option_5_Template, 3, 5, "mat-option", 18);
    i0.ɵɵelementEnd()();
    i0.ɵɵelementContainerEnd();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance(4);
    i0.ɵɵtwoWayProperty("ngModel", ctx_r1.offset_day);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngForOf", ctx_r1.day_options);
  }
}
function CateringItemFiltersComponent_div_7_Template(rf, ctx) {
  if (rf & 1) {
    var _r1 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 12)(1, "mat-checkbox", 13);
    i0.ɵɵtwoWayListener("ngModelChange", function CateringItemFiltersComponent_div_7_Template_mat_checkbox_ngModelChange_1_listener($event) {
      i0.ɵɵrestoreView(_r1);
      var ctx_r1 = i0.ɵɵnextContext();
      i0.ɵɵtwoWayBindingSet(ctx_r1.at_time, $event) || (ctx_r1.at_time = $event);
      return i0.ɵɵresetView($event);
    });
    i0.ɵɵlistener("ngModelChange", function CateringItemFiltersComponent_div_7_Template_mat_checkbox_ngModelChange_1_listener($event) {
      i0.ɵɵrestoreView(_r1);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.at_timeChange.next($event));
    });
    i0.ɵɵtext(2, " Exact Time ");
    i0.ɵɵelementEnd();
    i0.ɵɵtemplate(3, CateringItemFiltersComponent_div_7_ng_container_3_Template, 6, 2, "ng-container", 14);
    i0.ɵɵelementStart(4, "label");
    i0.ɵɵtext(5, "Deliver After:");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(6, "a-duration-field", 15);
    i0.ɵɵpipe(7, "async");
    i0.ɵɵtwoWayListener("ngModelChange", function CateringItemFiltersComponent_div_7_Template_a_duration_field_ngModelChange_6_listener($event) {
      i0.ɵɵrestoreView(_r1);
      var ctx_r1 = i0.ɵɵnextContext();
      i0.ɵɵtwoWayBindingSet(ctx_r1.offset, $event) || (ctx_r1.offset = $event);
      return i0.ɵɵresetView($event);
    });
    i0.ɵɵlistener("ngModelChange", function CateringItemFiltersComponent_div_7_Template_a_duration_field_ngModelChange_6_listener($event) {
      i0.ɵɵrestoreView(_r1);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.offsetChange.next($event));
    });
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var tmp_5_0;
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance();
    i0.ɵɵtwoWayProperty("ngModel", ctx_r1.at_time);
    i0.ɵɵproperty("matTooltip", ctx_r1.exact_tooltip);
    i0.ɵɵadvance(2);
    i0.ɵɵproperty("ngIf", ctx_r1.day_options.length > 1);
    i0.ɵɵadvance(3);
    i0.ɵɵtwoWayProperty("ngModel", ctx_r1.offset);
    i0.ɵɵproperty("time", ctx_r1.offset_day > 0 ? ctx_r1.start_of_date : (tmp_5_0 = i0.ɵɵpipeBind1(7, 9, ctx_r1.filters)) == null ? null : tmp_5_0.date)("step", ctx_r1.step_interval)("min", ctx_r1.min_offset)("max", ctx_r1.max_offset)("use_24hr", ctx_r1.use_24hr);
  }
}
function CateringItemFiltersComponent_h3_8_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "h3", 20);
    i0.ɵɵi18n(1, 1);
    i0.ɵɵelementEnd();
  }
}
function CateringItemFiltersComponent_mat_checkbox_10_Template(rf, ctx) {
  if (rf & 1) {
    var _r5 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "mat-checkbox", 17);
    i0.ɵɵpipe(1, "async");
    i0.ɵɵlistener("ngModelChange", function CateringItemFiltersComponent_mat_checkbox_10_Template_mat_checkbox_ngModelChange_0_listener() {
      var item_r6 = i0.ɵɵrestoreView(_r5).$implicit;
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.toggleCategory(item_r6));
    });
    i0.ɵɵtext(2);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var tmp_2_0;
    var item_r6 = ctx.$implicit;
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵproperty("ngModel", (tmp_2_0 = i0.ɵɵpipeBind1(1, 3, ctx_r1.filters)) == null ? null : tmp_2_0.categories == null ? null : tmp_2_0.categories.includes(item_r6));
    i0.ɵɵattribute("name", item_r6);
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate1(" ", item_r6, " ");
  }
}
var ICONS = {
  coffee: "<svg width=\"40\" height=\"40\" viewBox=\"0 0 40 40\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <g clip-path=\"url(#clip0_605_8664)\">\n    <path d=\"M38.388 21.2474C37.8243 20.7996 37.1598 20.4847 36.4474 20.3278C35.735 20.1708 34.9944 20.1762 34.2846 20.3434C34.2476 19.7774 34.2049 19.2037 34.1483 18.6155C34.1243 18.3664 34.0043 18.1349 33.8119 17.9668C33.6195 17.7986 33.3687 17.706 33.1088 17.707H1.26151C1.00166 17.706 0.750839 17.7986 0.558442 17.9668C0.366045 18.1349 0.246035 18.3664 0.222073 18.6155C-0.42931 25.3581 0.106585 30.5307 4.80024 35.4799C8.88062 39.7819 15.7271 39.9998 17.0599 39.9998H17.3047C18.6375 39.9998 25.4863 39.7774 29.5643 35.4799C30.5412 34.4597 31.3937 33.3353 32.1052 32.1286C32.2481 32.1199 32.3875 32.0819 32.514 32.0174C34.0959 31.2139 35.6169 30.3039 37.0656 29.2943C38.3815 28.4227 39.3664 27.1618 39.871 25.7028C40.0702 24.9006 40.0372 24.0612 39.7758 23.2757C39.5144 22.4902 39.0344 21.7887 38.388 21.2474ZM28.0329 34.13C24.4699 37.8905 18.0323 37.9984 17.3093 37.9984H17.0645C16.3426 37.9984 9.90389 37.8872 6.34092 34.13C2.37257 29.9436 1.75351 25.466 2.21549 19.7085H32.1583C32.6214 25.4649 32.0024 29.9425 28.0329 34.13ZM37.8498 25.2091C37.4485 26.2369 36.7212 27.117 35.771 27.7243C35.024 28.2636 34.2434 28.7582 33.4334 29.2053C34.1268 27.0036 34.4428 24.7078 34.3689 22.4082C34.3839 22.4027 34.3989 22.4082 34.4139 22.3982C34.8447 22.2182 35.3192 22.1579 35.7837 22.2242C36.2482 22.2905 36.6841 22.4808 37.0421 22.7733C37.4001 23.0659 37.6658 23.4491 37.8092 23.8796C37.9525 24.3101 37.9678 24.7707 37.8533 25.2091H37.8498Z\" fill=\"currentcolor\"/>\n    <path d=\"M9.43243 8.16274C9.85735 8.48322 10.2069 8.88673 10.4582 9.34669C10.7094 9.80666 10.8565 10.3126 10.89 10.8313C10.7939 11.9569 10.2754 13.0103 9.43128 13.7946C9.32937 13.883 9.24664 13.9899 9.18786 14.1092C9.12907 14.2286 9.0954 14.3579 9.08878 14.4898C9.08216 14.6217 9.10275 14.7536 9.14931 14.8778C9.19588 15.002 9.26753 15.1161 9.36012 15.2136C9.45271 15.311 9.56442 15.3898 9.6888 15.4455C9.81319 15.5012 9.9478 15.5326 10.0849 15.538C10.2219 15.5433 10.3587 15.5225 10.4874 15.4767C10.6161 15.4309 10.734 15.3611 10.8345 15.2712C12.1048 14.1093 12.8679 12.5254 12.9688 10.8413C12.9432 10.042 12.7392 9.25727 12.3708 8.5405C12.0023 7.82373 11.478 7.19166 10.8334 6.68722C10.4067 6.38353 10.055 5.99283 9.80341 5.54303C9.55184 5.09323 9.40662 4.59547 9.37815 4.08534C9.51392 3.18283 10.0073 2.36595 10.7548 1.80591C10.9718 1.64618 11.1147 1.41065 11.1528 1.15024C11.1908 0.889843 11.1208 0.625512 10.958 0.414392C10.7951 0.203272 10.5525 0.062327 10.2826 0.0220596C10.0127 -0.0182078 9.73715 0.0454338 9.51559 0.199206C8.90219 0.651996 8.39004 1.21933 8.0098 1.86721C7.62956 2.5151 7.38907 3.2302 7.30273 3.9697C7.30292 4.77855 7.49485 5.5767 7.86392 6.30333C8.23298 7.02996 8.76944 7.66592 9.43243 8.16274Z\" fill=\"currentcolor\"/>\n    <path d=\"M23.0984 8.16274C23.5234 8.48322 23.8729 8.88673 24.1242 9.34669C24.3754 9.80666 24.5225 10.3126 24.556 10.8313C24.4599 11.9569 23.9414 13.0103 23.0973 13.7946C22.9954 13.883 22.9126 13.9899 22.8539 14.1092C22.7951 14.2286 22.7614 14.3579 22.7548 14.4898C22.7482 14.6217 22.7687 14.7536 22.8153 14.8778C22.8619 15.002 22.9335 15.1161 23.0261 15.2136C23.1187 15.311 23.2304 15.3898 23.3548 15.4455C23.4792 15.5012 23.6138 15.5326 23.7509 15.538C23.8879 15.5433 24.0247 15.5225 24.1534 15.4767C24.2821 15.4309 24.4 15.3611 24.5005 15.2712C25.7708 14.1093 26.5339 12.5254 26.6348 10.8413C26.6092 10.042 26.4052 9.25727 26.0368 8.5405C25.6683 7.82373 25.144 7.19166 24.4994 6.68722C24.0727 6.38353 23.721 5.99283 23.4694 5.54303C23.2178 5.09323 23.0726 4.59547 23.0442 4.08534C23.1799 3.18283 23.6733 2.36595 24.4208 1.80591C24.6378 1.64618 24.7807 1.41065 24.8188 1.15024C24.8568 0.889843 24.7868 0.625512 24.624 0.414392C24.4611 0.203272 24.2185 0.062327 23.9486 0.0220596C23.6787 -0.0182078 23.4032 0.0454338 23.1816 0.199206C22.5682 0.651996 22.0561 1.21933 21.6758 1.86721C21.2956 2.5151 21.0551 3.2302 20.9688 3.9697C20.9689 4.77855 21.1609 5.5767 21.5299 6.30333C21.899 7.02996 22.4355 7.66592 23.0984 8.16274Z\" fill=\"currentcolor\"/>\n    <path d=\"M16.2645 8.16274C16.6894 8.48322 17.039 8.88673 17.2902 9.34669C17.5414 9.80666 17.6886 10.3126 17.722 10.8313C17.626 11.9569 17.1074 13.0103 16.2633 13.7946C16.1614 13.883 16.0787 13.9899 16.0199 14.1092C15.9611 14.2286 15.9274 14.3579 15.9208 14.4898C15.9142 14.6217 15.9348 14.7536 15.9813 14.8778C16.0279 15.002 16.0996 15.1161 16.1922 15.2136C16.2847 15.311 16.3964 15.3898 16.5208 15.4455C16.6452 15.5012 16.7798 15.5326 16.9169 15.538C17.054 15.5433 17.1908 15.5225 17.3194 15.4767C17.4481 15.4309 17.5661 15.3611 17.6666 15.2712C18.9368 14.1093 19.6999 12.5254 19.8009 10.8413C19.7752 10.042 19.5713 9.25727 19.2028 8.5405C18.8343 7.82373 18.31 7.19166 17.6654 6.68722C17.2387 6.38353 16.887 5.99283 16.6354 5.54303C16.3839 5.09323 16.2386 4.59547 16.2102 4.08534C16.346 3.18283 16.8393 2.36595 17.5869 1.80591C17.8038 1.64618 17.9468 1.41065 17.9848 1.15024C18.0228 0.889843 17.9528 0.625512 17.79 0.414392C17.6271 0.203272 17.3845 0.062327 17.1146 0.0220596C16.8447 -0.0182078 16.5692 0.0454338 16.3476 0.199206C15.7342 0.651996 15.2221 1.21933 14.8418 1.86721C14.4616 2.5151 14.2211 3.2302 14.1348 3.9697C14.1349 4.77855 14.3269 5.5767 14.6959 6.30333C15.065 7.02996 15.6015 7.66592 16.2645 8.16274Z\" fill=\"currentcolor\"/>\n    <path d=\"M7.16328 29.7138C5.86597 27.7051 5.17938 25.3866 5.18141 23.0212C5.18141 22.7558 5.07191 22.5013 4.87697 22.3136C4.68204 22.1259 4.41765 22.0205 4.14198 22.0205C3.8663 22.0205 3.60191 22.1259 3.40698 22.3136C3.21204 22.5013 3.10254 22.7558 3.10254 23.0212C3.10081 25.7653 3.89738 28.4551 5.40201 30.7857C5.55001 31.0072 5.78275 31.1637 6.04976 31.2211C6.31677 31.2784 6.59652 31.2322 6.82832 31.0923C7.06012 30.9524 7.22529 30.7301 7.288 30.4737C7.35071 30.2174 7.30588 29.9475 7.16328 29.7227V29.7138Z\" fill=\"currentcolor\"/>\n    <path d=\"M9.06498 32.7103C8.94112 32.6482 8.84235 32.548 8.78434 32.4257C8.73082 32.3026 8.65227 32.1911 8.55334 32.0977C8.45441 32.0043 8.33708 31.9309 8.20825 31.8818C8.07942 31.8327 7.9417 31.8089 7.80317 31.8118C7.66464 31.8146 7.5281 31.8441 7.40159 31.8986C7.27508 31.953 7.16115 32.0312 7.06649 32.1286C6.97184 32.226 6.89837 32.3407 6.8504 32.4658C6.80244 32.591 6.78094 32.7241 6.78719 32.8574C6.79344 32.9906 6.8273 33.1213 6.88678 33.2418C7.13536 33.7758 7.56332 34.2136 8.10177 34.4849C8.34682 34.6079 8.63256 34.6321 8.89616 34.5523C9.15975 34.4724 9.37959 34.295 9.50732 34.0591C9.63505 33.8232 9.6602 33.5481 9.57725 33.2943C9.49429 33.0405 9.31003 32.8289 9.06498 32.7059V32.7103Z\" fill=\"currentcolor\"/>\n    </g>\n    <defs>\n    <clipPath id=\"clip0_605_8664\">\n    <rect width=\"40\" height=\"40\" fill=\"white\"/>\n    </clipPath>\n    </defs>\n    </svg>\n    ",
  drinks: "<svg width=\"28\" height=\"39\" viewBox=\"0 0 28 39\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <g clip-path=\"url(#clip0_598_8203)\">\n    <path d=\"M0 0L0.662157 8.11078C0.662157 8.12619 0.653028 8.1394 0.653028 8.15481C0.658117 8.18851 0.664982 8.22193 0.673584 8.25496L3.1852 39H25.1048L28.0034 0H0ZM25.7932 1.98093L25.4085 7.16985C25.3982 7.16985 25.3902 7.16985 25.3799 7.16985H2.64519L2.22279 1.98642L25.7932 1.98093ZM23.1948 37.0191H5.08147L2.80846 9.14527H25.2612L23.1948 37.0191Z\" fill=\"currentcolor\"/>\n    <path d=\"M6.24983 23.3122C6.28864 23.3122 6.32861 23.3122 6.364 23.3122C6.49825 23.2972 6.6281 23.2567 6.74613 23.1933C6.86415 23.1298 6.96804 23.0445 7.05181 22.9423C7.13559 22.8401 7.19762 22.7229 7.23436 22.5975C7.2711 22.4722 7.28181 22.341 7.26589 22.2117C7.0661 20.5444 6.86517 18.8155 6.66538 17.0855C6.4576 15.2861 6.24869 13.4846 6.03862 11.7502C5.99894 11.4962 5.85848 11.267 5.64686 11.111C5.43525 10.955 5.16904 10.8843 4.90438 10.9138C4.63973 10.9434 4.39731 11.0708 4.22831 11.2694C4.0593 11.4679 3.9769 11.722 3.9985 11.978C4.20628 13.7091 4.41522 15.5084 4.623 17.3056C4.82392 19.0378 5.02485 20.77 5.22578 22.4395C5.25574 22.6807 5.37661 22.9029 5.56542 23.0638C5.75424 23.2247 5.99781 23.3131 6.24983 23.3122Z\" fill=\"currentcolor\"/>\n    <path d=\"M6.05485 24.414C5.9204 24.4288 5.79029 24.469 5.67201 24.5323C5.55372 24.5957 5.44958 24.6809 5.36557 24.7832C5.28156 24.8854 5.21933 25.0027 5.18245 25.1282C5.14557 25.2537 5.13477 25.385 5.15067 25.5145L5.31392 26.8857C5.34197 27.1276 5.46141 27.351 5.64945 27.5134C5.83748 27.6758 6.08096 27.7658 6.33341 27.7662C6.37223 27.7662 6.41105 27.7662 6.44759 27.7607C6.5817 27.7462 6.71152 27.7063 6.82966 27.6434C6.9478 27.5806 7.05194 27.4959 7.13612 27.3942C7.22029 27.2925 7.28287 27.1758 7.32027 27.0508C7.35766 26.9258 7.36913 26.7949 7.35404 26.6656L7.1908 25.2889C7.15839 25.0286 7.02114 24.791 6.80864 24.6273C6.59614 24.4636 6.32541 24.387 6.05485 24.414Z\" fill=\"currentcolor\"/>\n    </g>\n    <defs>\n    <clipPath id=\"clip0_598_8203\">\n    <rect width=\"28\" height=\"39\" fill=\"white\"/>\n    </clipPath>\n    </defs>\n    </svg>\n    ",
  snacks: "<svg width=\"44\" height=\"30\" viewBox=\"0 0 44 30\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path d=\"M39.9739 12.3839H39.9673C39.8416 11.3068 39.529 10.2613 39.0441 9.29623C38.2937 7.89066 37.2396 6.67826 35.9616 5.75118C34.6837 4.82411 33.2156 4.20677 31.669 3.94605C31.658 3.94605 31.6471 3.94605 31.635 3.94605C29.7116 1.41671 26.4577 0.0219894 22.162 0.00292969C17.7851 0.0287164 14.3819 1.44362 12.4015 3.94605C12.3773 3.94605 12.3553 3.94605 12.3312 3.94605C10.7845 4.20721 9.31631 4.82484 8.03823 5.75207C6.76016 6.6793 5.70574 7.89174 4.95505 9.29734C4.47112 10.2623 4.15888 11.3074 4.03289 12.3839H4.02631C2.34137 14.0479 1.12087 16.1402 0.490328 18.4457C-0.140217 20.7512 -0.15805 23.1866 0.438675 25.5015C1.16762 28.1328 2.30494 29.6228 3.81991 29.9323C4.02143 29.975 4.22667 29.9968 4.43249 29.9973C5.03503 29.925 5.61546 29.722 6.13483 29.4017C6.6542 29.0815 7.1005 28.6516 7.44377 28.1407C8.13563 27.3077 8.96125 26.601 9.88529 26.0508C10.6588 25.658 11.4715 25.3513 12.3092 25.136C12.7407 25.007 13.2105 24.8624 13.7122 24.6875C14.2182 24.7717 14.7299 24.8148 15.2426 24.8164C16.5191 24.8132 17.7827 24.5561 18.963 24.0597C19.2243 24.1678 19.4915 24.2603 19.7633 24.3366C20.4624 24.5255 21.1737 24.6634 21.892 24.7492C21.9649 24.7584 22.0386 24.7584 22.1115 24.7492C22.8298 24.6634 23.5411 24.5255 24.2402 24.3366C24.5121 24.2602 24.7794 24.1674 25.0405 24.0585C26.6985 24.7663 28.5179 24.9843 30.2913 24.6875C30.7941 24.8568 31.2639 25.0014 31.6954 25.136C32.5326 25.3518 33.3449 25.6585 34.1182 26.0508C35.0422 26.6006 35.8675 27.3074 36.5586 28.1407C36.9021 28.6516 37.3486 29.0816 37.8682 29.4018C38.3877 29.722 38.9683 29.925 39.571 29.9973C39.7765 29.9968 39.9813 29.975 40.1825 29.9323C41.6986 29.6228 42.8359 28.1317 43.5648 25.5015C44.1604 23.1863 44.1418 20.7509 43.5107 18.4455C42.8796 16.1401 41.6588 14.0479 39.9739 12.3839ZM8.94886 24.276C7.83296 24.927 6.83512 25.7694 5.99906 26.7661C5.09447 27.7561 4.76074 28.07 4.20854 27.9568C3.49936 27.8111 2.83628 26.7459 2.34227 24.9543C1.92223 23.3112 1.86627 21.5932 2.17848 19.9252C2.4907 18.2572 3.16322 16.6814 4.14706 15.3124C4.29059 16.0686 4.52165 16.8048 4.83539 17.5054C6.01506 20.1182 8.00316 22.2624 10.4935 23.6078C9.96108 23.7857 9.44437 24.0092 8.94886 24.276ZM14.1514 22.7266C13.9962 22.6555 13.8256 22.6265 13.6562 22.6425C12.1235 22.2411 10.6976 21.4958 9.48221 20.461C8.26685 19.4261 7.2926 18.1277 6.63029 16.66C6.16216 15.6502 5.92631 14.5445 5.94077 13.4274C5.95523 12.3102 6.21962 11.2112 6.71373 10.2145C7.64306 8.45293 9.17618 7.10357 11.0193 6.42493C9.99726 9.36013 10.6472 13.6553 12.7165 17.6365C13.6785 19.5654 15.0132 21.2752 16.6401 22.6627C15.8195 22.8232 14.9787 22.8448 14.1514 22.7266ZM23.7451 22.3903C23.1716 22.5448 22.5889 22.6613 22.0007 22.7389C21.4117 22.6614 20.8283 22.5449 20.254 22.3903C18.2033 21.8521 16.0374 19.7219 14.462 16.6925C12.6704 13.2438 12.0469 9.47672 12.8834 7.09538C14.473 2.55356 19.9093 2.03223 22.1653 2.01765C25.4445 2.03783 29.66 2.93475 31.1157 7.09538C31.9501 9.4756 31.3353 13.2427 29.5393 16.6903C27.9628 19.7197 25.798 21.851 23.7451 22.3891V22.3903ZM27.3579 22.6649C28.9873 21.2782 30.3233 19.5673 31.2848 17.6365C33.353 13.6542 34.0019 9.36013 32.9798 6.42493C34.8231 7.1032 36.3564 8.45266 37.2854 10.2145C37.7798 11.2111 38.0446 12.31 38.0594 13.4271C38.0743 14.5442 37.8388 15.6501 37.371 16.66C36.7089 18.1267 35.7356 19.4246 34.5215 20.4595C33.3074 21.4945 31.883 22.2405 30.3517 22.6436C30.1773 22.6248 30.0013 22.6546 29.8423 22.73C29.0162 22.8474 28.1769 22.825 27.3579 22.6638V22.6649ZM41.6601 24.9555C41.165 26.7493 40.5009 27.8122 39.7939 27.9579C39.2516 28.07 38.9156 27.7595 38.0033 26.7673C37.1671 25.7707 36.1693 24.9284 35.0536 24.2772C34.5589 24.0089 34.0429 23.7839 33.5111 23.6045C36.0014 22.2591 37.9895 20.1148 39.1692 17.502C39.4825 16.8016 39.7135 16.0659 39.8575 15.3101C40.8408 16.6799 41.5127 18.2562 41.8245 19.9245C42.1364 21.5927 42.0802 23.311 41.6601 24.9543V24.9555Z\" fill=\"currentColor\"/>\n    <path d=\"M17.3428 15.7782C16.1626 13.048 15.7674 10.0313 16.2032 7.08028C16.2231 6.94931 16.2174 6.81565 16.1867 6.68691C16.1559 6.55816 16.1006 6.43686 16.024 6.32994C15.9473 6.22302 15.8508 6.13257 15.7399 6.06375C15.629 5.99493 15.5059 5.94908 15.3777 5.92884C15.2495 5.90859 15.1186 5.91434 14.9925 5.94576C14.8665 5.97717 14.7477 6.03365 14.643 6.11194C14.5383 6.19023 14.4497 6.2888 14.3824 6.40205C14.315 6.5153 14.2701 6.641 14.2503 6.77197C13.7579 10.1061 14.2045 13.5144 15.538 16.5989C15.5889 16.7227 15.6636 16.8349 15.7575 16.9289C15.8515 17.0229 15.9628 17.0967 16.0851 17.1462C16.2074 17.1956 16.3381 17.2197 16.4695 17.2168C16.601 17.214 16.7306 17.1844 16.8507 17.1298C16.9709 17.0752 17.0791 16.9966 17.1691 16.8987C17.2591 16.8008 17.3291 16.6855 17.3749 16.5597C17.4208 16.4338 17.4415 16.2998 17.436 16.1656C17.4305 16.0315 17.3988 15.8997 17.3428 15.7782Z\" fill=\"currentColor\"/>\n    <path d=\"M19.696 19.2067C19.2865 18.9533 18.9569 18.5852 18.7464 18.146C18.6921 18.023 18.6143 17.9124 18.5174 17.8206C18.4206 17.7288 18.3067 17.6578 18.1825 17.6118C18.0583 17.5658 17.9263 17.5456 17.7944 17.5526C17.6625 17.5596 17.5333 17.5935 17.4144 17.6524C17.2955 17.7112 17.1894 17.7939 17.1023 17.8953C17.0153 17.9968 16.949 18.1151 16.9075 18.2432C16.866 18.3712 16.85 18.5065 16.8606 18.641C16.8712 18.7755 16.908 18.9065 16.969 19.0262C17.3477 19.8156 17.9407 20.4772 18.6772 20.9321C18.7884 21.0004 18.9117 21.0457 19.0401 21.0654C19.1684 21.085 19.2993 21.0786 19.4253 21.0466C19.5512 21.0146 19.6698 20.9576 19.7741 20.8788C19.8785 20.8 19.9666 20.701 20.0335 20.5874C20.1004 20.4738 20.1448 20.3478 20.164 20.2168C20.1832 20.0857 20.177 19.952 20.1456 19.8234C20.1143 19.6947 20.0585 19.5737 19.9813 19.4671C19.9041 19.3605 19.8072 19.2705 19.696 19.2022V19.2067Z\" fill=\"currentColor\"/>\n    </svg>\n    ",
  meals: "<svg width=\"44\" height=\"47\" viewBox=\"0 0 44 47\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <g clip-path=\"url(#clip0_598_8219)\">\n    <path d=\"M42.941 2.11595C42.7415 1.9851 42.4981 1.93888 42.2644 1.98745C42.0307 2.03602 41.8259 2.1754 41.695 2.37496L34.006 14.102C33.3796 13.6496 32.7178 13.2483 32.027 12.902C32.0551 12.8557 32.0786 12.8068 32.097 12.756L35.4431 1.14795C35.5094 0.91841 35.4818 0.671927 35.3663 0.46273C35.2509 0.253533 35.0571 0.098759 34.8275 0.0324549C34.598 -0.0338492 34.3515 -0.0062506 34.1423 0.109178C33.9331 0.224607 33.7783 0.41841 33.712 0.647954L30.382 12.202C28.8498 11.6558 27.2357 11.3751 25.609 11.372C23.5868 11.3208 21.5789 11.7248 19.7337 12.5541C17.8886 13.3834 16.2534 14.6167 14.949 16.163C13.472 15.5617 11.8698 15.3326 10.2834 15.4959C8.69704 15.6593 7.17511 16.21 5.85156 17.0996C4.528 17.9893 3.44339 19.1906 2.69314 20.5978C1.94289 22.0051 1.54999 23.5752 1.54904 25.17H0.900049C0.781014 25.1699 0.663159 25.1936 0.553309 25.2394C0.443459 25.2853 0.343801 25.3524 0.260096 25.4371C0.176391 25.5217 0.110305 25.6221 0.0656684 25.7325C0.0210317 25.8428 -0.00126705 25.9609 5.5571e-05 26.08C0.0892682 29.5951 1.16582 33.0142 3.10662 35.9464C5.04743 38.8786 7.77413 41.2054 10.975 42.661V45.147C10.975 45.3856 11.0699 45.6146 11.2386 45.7834C11.4074 45.9521 11.6364 46.047 11.8751 46.047H29.692C29.9307 46.047 30.1596 45.9521 30.3284 45.7834C30.4972 45.6146 30.592 45.3856 30.592 45.147V42.665C33.7927 41.2092 36.5191 38.8822 38.4597 35.9501C40.4004 33.018 41.4768 29.599 41.566 26.084C41.5674 25.9649 41.5451 25.8468 41.5004 25.7365C41.4558 25.6261 41.3897 25.5257 41.306 25.4411C41.2223 25.3565 41.1226 25.2893 41.0128 25.2434C40.9029 25.1976 40.7851 25.1739 40.666 25.174H39.976C39.82 21.3924 38.1759 17.8258 35.402 15.251L43.197 3.36196C43.3282 3.16274 43.3749 2.91961 43.3269 2.68598C43.2789 2.45235 43.1401 2.24733 42.941 2.11595ZM11.292 17.249C13.3949 17.2513 15.4113 18.0864 16.9 19.5716C18.3887 21.0568 19.2286 23.0711 19.236 25.174H18.476C18.4537 23.2835 17.6871 21.4779 16.3423 20.149C14.9976 18.82 13.1832 18.0747 11.2925 18.0747C9.4019 18.0747 7.58747 18.82 6.24273 20.149C4.89799 21.4779 4.13134 23.2835 4.10903 25.174H3.34905C3.35619 23.0712 4.1959 21.0569 5.68447 19.5717C7.17304 18.0865 9.18928 17.2513 11.292 17.249ZM30.46 25.174C30.3295 24.0738 29.829 23.0506 29.0406 22.2723C28.2521 21.494 27.2226 21.0067 26.1208 20.8904C25.019 20.7742 23.9104 21.0358 22.9769 21.6324C22.0433 22.2291 21.3403 23.1252 20.983 24.174C20.8976 23.3879 20.7156 22.6154 20.441 21.874C21.2275 20.8287 22.312 20.0461 23.5519 19.6292C24.7917 19.2124 26.1287 19.1807 27.3869 19.5384C28.6451 19.8962 29.7655 20.6265 30.6005 21.6334C31.4356 22.6402 31.9461 23.8763 32.065 25.179L30.46 25.174ZM28.66 25.174H22.555C22.6942 24.4666 23.0746 23.8296 23.6314 23.3717C24.1882 22.9138 24.8867 22.6634 25.6075 22.6634C26.3284 22.6634 27.0269 22.9138 27.5837 23.3717C28.1404 23.8296 28.5209 24.4666 28.66 25.174ZM33.8661 25.174C33.7524 23.5697 33.1734 22.0335 32.1999 20.7533C31.2265 19.4731 29.9008 18.5046 28.3853 17.9663C26.8698 17.428 25.2303 17.3434 23.6674 17.7227C22.1045 18.102 20.6862 18.9288 19.5861 20.102C19.3425 19.7013 19.0704 19.3187 18.772 18.957C19.6483 18.0285 20.7095 17.2942 21.8871 16.8014C23.0648 16.3086 24.3327 16.0683 25.609 16.096C28.0701 16.1 30.4374 17.0409 32.2298 18.7275C34.0222 20.414 35.1053 22.7196 35.259 25.176L33.8661 25.174ZM15.376 25.174C15.376 24.0911 14.9459 23.0525 14.1802 22.2868C13.4145 21.5211 12.3759 21.091 11.2931 21.091C10.2102 21.091 9.17165 21.5211 8.40594 22.2868C7.64023 23.0525 7.21005 24.0911 7.21005 25.174H5.91003C5.92931 23.7594 6.5048 22.4093 7.51193 21.4158C8.51906 20.4223 9.87684 19.8653 11.2915 19.8653C12.7062 19.8653 14.064 20.4223 15.0712 21.4158C16.0783 22.4093 16.6537 23.7594 16.673 25.174H15.376ZM13.576 25.174H9.01205C9.02455 24.5769 9.27051 24.0085 9.6972 23.5906C10.1239 23.1728 10.6973 22.9387 11.2945 22.9387C11.8918 22.9387 12.4652 23.1728 12.8919 23.5906C13.3186 24.0085 13.5646 24.5769 13.5771 25.174H13.576ZM12.7761 44.251V43.132H28.792V44.251H12.7761ZM29.136 41.332H12.436C9.52258 40.1406 6.99281 38.1712 5.12332 35.6389C3.25383 33.1066 2.11663 30.109 1.83605 26.974H39.7281C39.4482 30.1081 38.3122 33.1051 36.4441 35.6373C34.5761 38.1695 32.048 40.1395 29.136 41.332ZM38.178 25.174H37.0601C36.9048 22.2401 35.6312 19.4773 33.5013 17.4538C31.3713 15.4303 28.547 14.2998 25.609 14.295C24.0957 14.2643 22.5927 14.55 21.1962 15.1338C19.7996 15.7176 18.5404 16.5865 17.499 17.685C17.2087 17.4481 16.9052 17.2277 16.5901 17.025C17.7218 15.7645 19.1155 14.7668 20.6734 14.1017C22.2314 13.4367 23.9159 13.1204 25.609 13.175C28.8438 13.1792 31.9531 14.4275 34.2929 16.6611C36.6327 18.8948 38.0237 21.9428 38.178 25.174Z\" fill=\"currentColor\"/>\n    <path d=\"M3.39209 30.1722C4.045 32.6025 5.31628 34.8222 7.08209 36.6152C7.16443 36.7021 7.26327 36.7717 7.37286 36.8199C7.48244 36.8682 7.60056 36.8941 7.72027 36.8961C7.83999 36.8981 7.95888 36.8762 8.07003 36.8317C8.18118 36.7872 8.28235 36.7209 8.36758 36.6368C8.45281 36.5528 8.52038 36.4525 8.56637 36.342C8.61237 36.2314 8.63585 36.1128 8.63543 35.9931C8.63501 35.8733 8.6107 35.7549 8.56393 35.6447C8.51716 35.5344 8.44888 35.4347 8.36306 35.3512C6.81633 33.7796 5.70257 31.8346 5.13006 29.7052C5.1013 29.589 5.04966 29.4797 4.97815 29.3837C4.90663 29.2878 4.81669 29.207 4.71359 29.1462C4.61049 29.0854 4.49631 29.0458 4.37771 29.0297C4.25912 29.0136 4.1385 29.0213 4.02291 29.0523C3.90733 29.0834 3.7991 29.1372 3.70456 29.2106C3.61001 29.284 3.53106 29.3755 3.47232 29.4798C3.41357 29.584 3.3762 29.699 3.36242 29.8179C3.34865 29.9368 3.35875 30.0572 3.39209 30.1722Z\" fill=\"#323232\"/>\n    <path d=\"M10.5356 39.5502C10.7282 39.6767 10.962 39.7245 11.1889 39.6838C11.4157 39.643 11.6182 39.5168 11.7547 39.3312C11.8913 39.1456 11.9514 38.9146 11.9227 38.6859C11.8941 38.4573 11.7788 38.2483 11.6006 38.1022L10.3336 37.1752C10.1407 37.0392 9.90209 36.9844 9.66918 37.0226C9.43627 37.0609 9.2277 37.1891 9.08843 37.3797C8.94915 37.5702 8.89031 37.8079 8.92458 38.0414C8.95884 38.2749 9.08345 38.4857 9.27159 38.6282L10.5356 39.5502Z\" fill=\"#323232\"/>\n    </g>\n    <defs>\n    <clipPath id=\"clip0_598_8219\">\n    <rect width=\"43.348\" height=\"46.051\" fill=\"white\"/>\n    </clipPath>\n    </defs>\n    </svg>"
};
var CateringItemFiltersComponent = /*#__PURE__*/function (_common_1$AsyncHandle) {
  function CateringItemFiltersComponent(_state, _settings) {
    var _this;
    _classCallCheck(this, CateringItemFiltersComponent);
    _this = _callSuper(this, CateringItemFiltersComponent);
    _this._state = _state;
    _this._settings = _settings;
    _this.search = false;
    _this.at_time = false;
    _this.at_timeChange = new core_1.EventEmitter();
    _this.offset = 0;
    _this.offsetChange = new core_1.EventEmitter();
    _this.offset_day = 0;
    _this.offset_dayChange = new core_1.EventEmitter();
    _this._min_offset = 0;
    _this._max_offset = 60;
    _this.icons = ICONS;
    _this.filters = _this._state.filters;
    _this.setFilters = function (f) {
      return _this._state.setFilters(f);
    };
    _this.categories = _this._state.categories;
    _this.exact_tooltip = 'Deliver at exactly specified time. \nNote that changes to the booking will not be \nreflected in the order if this is set.';
    _this.day_options = [];
    return _this;
  }
  _inherits(CateringItemFiltersComponent, _common_1$AsyncHandle);
  return _createClass(CateringItemFiltersComponent, [{
    key: "start_of_date",
    get: function get() {
      return (0, date_fns_1.startOfDay)((0, date_fns_1.addDays)(this._state.getFilters().date, this.offset_day)).valueOf();
    }
  }, {
    key: "min_offset",
    get: function get() {
      return this.offset_day > 0 ? 0 : this._min_offset;
    }
  }, {
    key: "step_interval",
    get: function get() {
      return this._settings.get('app.catering.step_interval') || 5;
    }
  }, {
    key: "max_offset",
    get: function get() {
      var end = Math.min((0, date_fns_1.endOfDay)((0, date_fns_1.addDays)(this._state.getFilters().date, this.offset_day)).valueOf(), (0, date_fns_1.addMinutes)(this._state.getFilters().date, this._state.getFilters().duration).valueOf());
      var diff = (0, date_fns_1.differenceInMinutes)(end, this._state.getFilters().date);
      return Math.min(diff, Math.min(24 * 60 - 1, this._max_offset));
    }
  }, {
    key: "use_24hr",
    get: function get() {
      return this._settings.get('app.use_24_hour_time');
    }
  }, {
    key: "ngOnInit",
    value: function ngOnInit() {
      var _this2 = this;
      this._min_offset = Math.max(this._settings.get('app.catering.min_offset'), 0);
      this.subscription('filters', this._state.filters.subscribe(function () {
        _this2._max_offset = Math.max(15, (_this2._state.getFilters().duration || 60) - _this2._settings.get('app.catering.end_offset'));
        _this2._updateDayOptions();
      }));
      this._updateDayOptions();
    }
  }, {
    key: "toggleCategory",
    value: function () {
      var _toggleCategory = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(name) {
        var _yield$this$filters$p, categories;
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              _context.next = 2;
              return this.filters.pipe((0, operators_1.take)(1)).toPromise();
            case 2:
              _yield$this$filters$p = _context.sent;
              categories = _yield$this$filters$p.categories;
              if (categories.includes(name)) this.setFilters({
                categories: categories.filter(function (_) {
                  return _ !== name;
                })
              });else this.setFilters({
                categories: [].concat(_toConsumableArray(categories), [name])
              });
            case 5:
            case "end":
              return _context.stop();
          }
        }, _callee, this);
      }));
      function toggleCategory(_x) {
        return _toggleCategory.apply(this, arguments);
      }
      return toggleCategory;
    }()
  }, {
    key: "toggleTag",
    value: function () {
      var _toggleTag = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(tag) {
        var _yield$this$filters$p2, tags;
        return _regeneratorRuntime().wrap(function _callee2$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              _context2.next = 2;
              return this.filters.pipe((0, operators_1.take)(1)).toPromise();
            case 2:
              _yield$this$filters$p2 = _context2.sent;
              tags = _yield$this$filters$p2.tags;
              if (tags.includes(tag)) this.setFilters({
                tags: tags.filter(function (_) {
                  return _ !== tag;
                })
              });else this.setFilters({
                tags: [].concat(_toConsumableArray(tags), [tag])
              });
            case 5:
            case "end":
              return _context2.stop();
          }
        }, _callee2, this);
      }));
      function toggleTag(_x2) {
        return _toggleTag.apply(this, arguments);
      }
      return toggleTag;
    }()
  }, {
    key: "_updateDayOptions",
    value: function _updateDayOptions() {
      var _this$_state$getFilte = this._state.getFilters(),
        date = _this$_state$getFilte.date,
        duration = _this$_state$getFilte.duration;
      if (duration <= 24 * 60) return this.day_options = [];
      var day = (0, date_fns_1.startOfDay)(date);
      var count = 0;
      var end = (0, date_fns_1.endOfDay)((0, date_fns_1.addMinutes)(date, duration)).valueOf();
      var options = [];
      while (day.valueOf() <= end) {
        options.push({
          id: count,
          value: day.valueOf()
        });
        day = (0, date_fns_1.addDays)(day, 1);
        count++;
      }
      this.day_options = options;
    }
  }]);
}(common_1.AsyncHandler);
_CateringItemFiltersComponent = CateringItemFiltersComponent;
_CateringItemFiltersComponent.ɵfac = function CateringItemFiltersComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _CateringItemFiltersComponent)(i0.ɵɵdirectiveInject(i1.CateringOrderStateService), i0.ɵɵdirectiveInject(i2.SettingsService));
};
_CateringItemFiltersComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _CateringItemFiltersComponent,
  selectors: [["catering-item-filters"]],
  inputs: {
    search: "search",
    at_time: "at_time",
    offset: "offset",
    offset_day: "offset_day"
  },
  outputs: {
    at_timeChange: "at_timeChange",
    offsetChange: "offsetChange",
    offset_dayChange: "offset_dayChange"
  },
  features: [i0.ɵɵInheritDefinitionFeature],
  decls: 12,
  vars: 15,
  consts: function consts() {
    var i18n_0;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_637156553417356107$$LIBS_CATERING_SRC_LIB_CATERING_ORDER_MODAL_CATERING_ITEM_FILTERS_COMPONENT_TS_0 = goog.getMsg(" Options ");
      i18n_0 = MSG_EXTERNAL_637156553417356107$$LIBS_CATERING_SRC_LIB_CATERING_ORDER_MODAL_CATERING_ITEM_FILTERS_COMPONENT_TS_0;
    } else {
      i18n_0 = $localize(_templateObject || (_templateObject = _taggedTemplateLiteral([":\u241F07b96192315617e1c3c3f020fed4749eafda31eb\u241F637156553417356107: Options "])));
    }
    var i18n_1;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_3888583854485349732$$LIBS_CATERING_SRC_LIB_CATERING_ORDER_MODAL_CATERING_ITEM_FILTERS_COMPONENT_TS_1 = goog.getMsg(" Catergories ");
      i18n_1 = MSG_EXTERNAL_3888583854485349732$$LIBS_CATERING_SRC_LIB_CATERING_ORDER_MODAL_CATERING_ITEM_FILTERS_COMPONENT_TS_1;
    } else {
      i18n_1 = $localize(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([":\u241F24300e769843b029b0346b3ea18e51e4e97a3502\u241F3888583854485349732: Catergories "])));
    }
    return [i18n_0, i18n_1, [1, "px-4", "mt-3", "mb-2"], ["appearance", "outline", 1, "w-full", "h-14"], ["matPrefix", "", 1, "text-xl"], ["matInput", "", "placeholder", "Search menu...", 3, "ngModelChange", "ngModel"], ["class", "hidden sm:block font-medium px-2 py-2", 4, "ngIf"], ["class", "flex flex-col px-2", 4, "ngIf"], ["class", "hidden sm:block font-medium px-2 py-4", 4, "ngIf"], [1, "flex", "flex-col", "px-2", "space-y-4"], [3, "ngModel", "ngModelChange", 4, "ngFor", "ngForOf"], [1, "hidden", "sm:block", "font-medium", "px-2", "py-2"], [1, "flex", "flex-col", "px-2"], [3, "ngModelChange", "ngModel", "matTooltip"], [4, "ngIf"], [3, "ngModelChange", "ngModel", "time", "step", "min", "max", "use_24hr"], ["appearance", "outline", 1, "w-full", "no-subscript", "mb-4"], [3, "ngModelChange", "ngModel"], [3, "value", 4, "ngFor", "ngForOf"], [3, "value"], [1, "hidden", "sm:block", "font-medium", "px-2", "py-4"]];
  },
  template: function CateringItemFiltersComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵelementStart(0, "div", 2)(1, "mat-form-field", 3)(2, "app-icon", 4);
      i0.ɵɵtext(3, "search");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(4, "input", 5);
      i0.ɵɵpipe(5, "async");
      i0.ɵɵlistener("ngModelChange", function CateringItemFiltersComponent_Template_input_ngModelChange_4_listener($event) {
        return ctx.setFilters({
          search: $event
        });
      });
      i0.ɵɵelementEnd()()();
      i0.ɵɵtemplate(6, CateringItemFiltersComponent_h3_6_Template, 2, 0, "h3", 6)(7, CateringItemFiltersComponent_div_7_Template, 8, 11, "div", 7)(8, CateringItemFiltersComponent_h3_8_Template, 2, 0, "h3", 8);
      i0.ɵɵelementStart(9, "div", 9);
      i0.ɵɵtemplate(10, CateringItemFiltersComponent_mat_checkbox_10_Template, 3, 5, "mat-checkbox", 10);
      i0.ɵɵpipe(11, "async");
      i0.ɵɵelementEnd();
    }
    if (rf & 2) {
      var tmp_1_0;
      i0.ɵɵclassProp("sm:hidden", !ctx.search);
      i0.ɵɵadvance(4);
      i0.ɵɵproperty("ngModel", (tmp_1_0 = i0.ɵɵpipeBind1(5, 11, ctx.filters)) == null ? null : tmp_1_0.search);
      i0.ɵɵadvance(2);
      i0.ɵɵproperty("ngIf", !ctx.search);
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", !ctx.search);
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", !ctx.search);
      i0.ɵɵadvance();
      i0.ɵɵclassProp("sm:hidden", ctx.search)("sm:pt-1", !ctx.search);
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngForOf", i0.ɵɵpipeBind1(11, 13, ctx.categories));
    }
  },
  dependencies: [i3.NgForOf, i3.NgIf, i4.MatOption, i5.MatCheckbox, i6.MatTooltip, i7.DefaultValueAccessor, i7.NgControlStatus, i7.NgModel, i8.IconComponent, i9.MatFormField, i9.MatPrefix, i10.MatSelect, i11.MatInput, i12.DurationFieldComponent, i3.AsyncPipe, i3.DatePipe],
  styles: ["[_nghost-%COMP%] {\n                min-width: 16rem;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNhdGVyaW5nLWl0ZW0tZmlsdGVycy5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLGdCQUFnQjtZQUNwQiIsImZpbGUiOiJjYXRlcmluZy1pdGVtLWZpbHRlcnMuY29tcG9uZW50LnRzIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICA6aG9zdCB7XG4gICAgICAgICAgICAgICAgbWluLXdpZHRoOiAxNnJlbTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl19 */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvY2F0ZXJpbmcvc3JjL2xpYi9jYXRlcmluZy1vcmRlci1tb2RhbC9jYXRlcmluZy1pdGVtLWZpbHRlcnMuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxnQkFBZ0I7WUFDcEI7O0FBRVosNFlBQTRZIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICA6aG9zdCB7XG4gICAgICAgICAgICAgICAgbWluLXdpZHRoOiAxNnJlbTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl0sInNvdXJjZVJvb3QiOiIifQ== */"]
});
exports.CateringItemFiltersComponent = CateringItemFiltersComponent;

/***/ }),

/***/ 89505:
/*!*****************************************************************************************!*\
  !*** ./libs/catering/src/lib/catering-order-modal/catering-item-list-item.component.ts ***!
  \*****************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _CateringItemListItemComponent;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.CateringItemListItemComponent = void 0;
var core_1 = __webpack_require__(/*! @angular/core */ 37580);
var catering_item_class_1 = __webpack_require__(/*! ../catering-item.class */ 25892);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @angular/common */ 60316);
var i2 = __webpack_require__(/*! ../../../../components/src/lib/icon.component */ 69434);
var i3 = __webpack_require__(/*! ../../../../components/src/lib/authenticated-image.directive */ 93208);
var i4 = __webpack_require__(/*! @angular/material/core */ 74646);
function CateringItemListItemComponent_div_3_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 17);
    i0.ɵɵtext(1);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", ctx_r1.item.quantity || "1", " ");
  }
}
function CateringItemListItemComponent_img_4_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelement(0, "img", 18);
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵproperty("source", ctx_r1.item.images[0]);
  }
}
function CateringItemListItemComponent_ng_template_5_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelement(0, "img", 19);
  }
}
function CateringItemListItemComponent_p_14_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "p", 20);
    i0.ɵɵtext(1);
    i0.ɵɵpipe(2, "currency");
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", i0.ɵɵpipeBind2(2, 1, ctx_r1.item.unit_price / 100, ctx_r1.code), " ");
  }
}
function CateringItemListItemComponent_div_15_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 21);
    i0.ɵɵtext(1);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", ctx_r1.options, " ");
  }
}
function CateringItemListItemComponent_div_16_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 22);
    i0.ɵɵtext(1, " GF ");
    i0.ɵɵelementEnd();
  }
}
function CateringItemListItemComponent_div_17_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 23);
    i0.ɵɵtext(1, " VG ");
    i0.ɵɵelementEnd();
  }
}
function CateringItemListItemComponent_div_18_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 23);
    i0.ɵɵtext(1, " V ");
    i0.ɵɵelementEnd();
  }
}
function CateringItemListItemComponent_div_19_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 24);
    i0.ɵɵtext(1, " D ");
    i0.ɵɵelementEnd();
  }
}
function CateringItemListItemComponent_div_20_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 25);
    i0.ɵɵtext(1, " N ");
    i0.ɵɵelementEnd();
  }
}
var CateringItemListItemComponent = /*#__PURE__*/function () {
  function CateringItemListItemComponent() {
    _classCallCheck(this, CateringItemListItemComponent);
    this.active = false;
    this.selected = false;
    this.favourite = false;
    this.code = 'USD';
    this.toggleFav = new core_1.EventEmitter();
    this.select = new core_1.EventEmitter();
  }
  return _createClass(CateringItemListItemComponent, [{
    key: "options",
    get: function get() {
      var _this$item$option_lis;
      return (_this$item$option_lis = this.item.option_list) === null || _this$item$option_lis === void 0 ? void 0 : _this$item$option_lis.map(function (_) {
        return _.name;
      }).join(', ');
    }
  }]);
}();
_CateringItemListItemComponent = CateringItemListItemComponent;
_CateringItemListItemComponent.ɵfac = function CateringItemListItemComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _CateringItemListItemComponent)();
};
_CateringItemListItemComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _CateringItemListItemComponent,
  selectors: [["catering-item-list-item"]],
  inputs: {
    item: "item",
    active: "active",
    selected: "selected",
    favourite: "favourite",
    code: "code"
  },
  outputs: {
    toggleFav: "toggleFav",
    select: "select"
  },
  decls: 24,
  vars: 17,
  consts: [["placeholder", ""], ["item", "", "matRipple", "", 1, "relative", "p-2", "rounded-lg", "w-full", "shadow", "border", "bg-base-100", "border-base-200", "sm:w-[20rem]"], ["name", "select-catering-item", 1, "w-full", "h-full", "flex", "items-center", "z-0", 3, "click"], [1, "relative", "w-16", "h-16", "rounded-xl", "bg-neutral", "mr-4", "overflow-hidden", "border", "border-base-200", "flex", "items-center", "justify-center"], ["class", "absolute top-1 left-1 border border-white bg-neutral rounded-full h-6 w-6 flex items-center justify-center text-white text-xs", 4, "ngIf"], ["auth", "", "class", "object-cover min-h-full min-w-full", 3, "source", 4, "ngIf", "ngIfElse"], [1, "space-y-2", "text-left", "flex-1"], [1, "font-medium", "flex", "flex-col", "pr-10"], [1, "opacity-60", "text-xs"], [1, "flex", "items-center", "text-sm", "space-x-1"], ["class", "flex-1 w-px bg-base-100 rounded", 4, "ngIf"], ["class", "text-xs px-2 py-1 rounded-2xl shadow border border-base-200", 4, "ngIf"], ["class", "text-xs h-5 w-7 rounded-xl shadow bg-success flex items-center justify-center", 4, "ngIf"], ["class", "text-xs h-5 w-7 rounded-xl shadow bg-info flex items-center justify-center", 4, "ngIf"], ["class", "text-xs h-5 w-7 rounded-xl shadow bg-warning flex items-center justify-center", 4, "ngIf"], ["class", "text-xs h-5 w-7 rounded-xl shadow bg-orange-600 flex items-center justify-center", 4, "ngIf"], ["icon", "", "matRipple", "", "name", "toggle-catering-item-favourite", 1, "absolute", "top-1", "right-1", 3, "click"], [1, "absolute", "top-1", "left-1", "border", "border-white", "bg-neutral", "rounded-full", "h-6", "w-6", "flex", "items-center", "justify-center", "text-white", "text-xs"], ["auth", "", 1, "object-cover", "min-h-full", "min-w-full", 3, "source"], ["src", "assets/icons/catering-placeholder.svg", 1, "m-auto"], [1, "flex-1", "w-px", "bg-base-100", "rounded"], [1, "text-xs", "px-2", "py-1", "rounded-2xl", "shadow", "border", "border-base-200"], [1, "text-xs", "h-5", "w-7", "rounded-xl", "shadow", "bg-success", "flex", "items-center", "justify-center"], [1, "text-xs", "h-5", "w-7", "rounded-xl", "shadow", "bg-info", "flex", "items-center", "justify-center"], [1, "text-xs", "h-5", "w-7", "rounded-xl", "shadow", "bg-warning", "flex", "items-center", "justify-center"], [1, "text-xs", "h-5", "w-7", "rounded-xl", "shadow", "bg-orange-600", "flex", "items-center", "justify-center"]],
  template: function CateringItemListItemComponent_Template(rf, ctx) {
    if (rf & 1) {
      var _r1 = i0.ɵɵgetCurrentView();
      i0.ɵɵelementStart(0, "li", 1)(1, "button", 2);
      i0.ɵɵlistener("click", function CateringItemListItemComponent_Template_button_click_1_listener() {
        i0.ɵɵrestoreView(_r1);
        return i0.ɵɵresetView(ctx.select.emit());
      });
      i0.ɵɵelementStart(2, "div", 3);
      i0.ɵɵtemplate(3, CateringItemListItemComponent_div_3_Template, 2, 1, "div", 4)(4, CateringItemListItemComponent_img_4_Template, 1, 1, "img", 5)(5, CateringItemListItemComponent_ng_template_5_Template, 1, 0, "ng-template", null, 0, i0.ɵɵtemplateRefExtractor);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(7, "div", 6)(8, "div", 7)(9, "div");
      i0.ɵɵtext(10);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(11, "div", 8);
      i0.ɵɵtext(12);
      i0.ɵɵelementEnd()();
      i0.ɵɵelementStart(13, "div", 9);
      i0.ɵɵtemplate(14, CateringItemListItemComponent_p_14_Template, 3, 4, "p", 10)(15, CateringItemListItemComponent_div_15_Template, 2, 1, "div", 11)(16, CateringItemListItemComponent_div_16_Template, 2, 0, "div", 12)(17, CateringItemListItemComponent_div_17_Template, 2, 0, "div", 13)(18, CateringItemListItemComponent_div_18_Template, 2, 0, "div", 13)(19, CateringItemListItemComponent_div_19_Template, 2, 0, "div", 14)(20, CateringItemListItemComponent_div_20_Template, 2, 0, "div", 15);
      i0.ɵɵelementEnd()()();
      i0.ɵɵelementStart(21, "button", 16);
      i0.ɵɵlistener("click", function CateringItemListItemComponent_Template_button_click_21_listener() {
        i0.ɵɵrestoreView(_r1);
        return i0.ɵɵresetView(ctx.toggleFav.emit());
      });
      i0.ɵɵelementStart(22, "app-icon");
      i0.ɵɵtext(23);
      i0.ɵɵelementEnd()()();
    }
    if (rf & 2) {
      var placeholder_r3 = i0.ɵɵreference(6);
      i0.ɵɵclassProp("!border-base-200", ctx.active);
      i0.ɵɵadvance(3);
      i0.ɵɵproperty("ngIf", ctx.item.quantity && ctx.selected);
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", ctx.item.images == null ? null : ctx.item.images.length)("ngIfElse", placeholder_r3);
      i0.ɵɵadvance(6);
      i0.ɵɵtextInterpolate(ctx.item.name || "Item");
      i0.ɵɵadvance(2);
      i0.ɵɵtextInterpolate1(" ", ctx.item.category, " ");
      i0.ɵɵadvance(2);
      i0.ɵɵproperty("ngIf", ctx.item.unit_price);
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", ctx.item.option_list == null ? null : ctx.item.option_list.length);
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", ctx.item.tags == null ? null : ctx.item.tags.includes("Gluten Free"));
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", ctx.item.tags == null ? null : ctx.item.tags.includes("Vegan"));
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", ctx.item.tags == null ? null : ctx.item.tags.includes("Vegetarian"));
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", ctx.item.tags == null ? null : ctx.item.tags.includes("Contains Dairy"));
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", ctx.item.tags == null ? null : ctx.item.tags.includes("Contains Nuts"));
      i0.ɵɵadvance();
      i0.ɵɵclassProp("text-blue-400", ctx.favourite);
      i0.ɵɵadvance(2);
      i0.ɵɵtextInterpolate(ctx.favourite ? "favorite" : "favorite_border");
    }
  },
  dependencies: [i1.NgIf, i2.IconComponent, i3.AuthenticatedImageDirective, i4.MatRipple, i1.CurrencyPipe]
});
exports.CateringItemListItemComponent = CateringItemListItemComponent;

/***/ }),

/***/ 32499:
/*!************************************************************************************!*\
  !*** ./libs/catering/src/lib/catering-order-modal/catering-item-list.component.ts ***!
  \************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _CateringItemListComponent;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.CateringItemListComponent = void 0;
var core_1 = __webpack_require__(/*! @angular/core */ 37580);
var rxjs_1 = __webpack_require__(/*! rxjs */ 15681);
var catering_order_state_service_1 = __webpack_require__(/*! ./catering-order-state.service */ 20097);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! ./catering-order-state.service */ 20097);
var i2 = __webpack_require__(/*! @angular/common */ 60316);
var i3 = __webpack_require__(/*! @angular/material/progress-spinner */ 41134);
var i4 = __webpack_require__(/*! ./catering-item-list-item.component */ 89505);
function CateringItemListComponent_ng_container_1_catering_item_list_item_7_Template(rf, ctx) {
  if (rf & 1) {
    var _r1 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "catering-item-list-item", 9);
    i0.ɵɵlistener("toggleFav", function CateringItemListComponent_ng_container_1_catering_item_list_item_7_Template_catering_item_list_item_toggleFav_0_listener() {
      var item_r2 = i0.ɵɵrestoreView(_r1).$implicit;
      var ctx_r2 = i0.ɵɵnextContext(2);
      return i0.ɵɵresetView(ctx_r2.toggleFav.emit(item_r2.id));
    })("select", function CateringItemListComponent_ng_container_1_catering_item_list_item_7_Template_catering_item_list_item_select_0_listener() {
      var item_r2 = i0.ɵɵrestoreView(_r1).$implicit;
      var ctx_r2 = i0.ɵɵnextContext(2);
      return i0.ɵɵresetView(ctx_r2.selectItem(item_r2, true));
    });
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var item_r2 = ctx.$implicit;
    var ctx_r2 = i0.ɵɵnextContext(2);
    i0.ɵɵproperty("item", item_r2)("active", ctx_r2.active === item_r2.custom_id)("selected", true)("favourite", ctx_r2.isFavourite(item_r2.id));
  }
}
function CateringItemListComponent_ng_container_1_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵelementStart(1, "h3", 4);
    i0.ɵɵtext(2, "Ordered Items");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(3, "p", 5);
    i0.ɵɵtext(4);
    i0.ɵɵpipe(5, "async");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(6, "ul", 7);
    i0.ɵɵtemplate(7, CateringItemListComponent_ng_container_1_catering_item_list_item_7_Template, 1, 4, "catering-item-list-item", 8);
    i0.ɵɵpipe(8, "async");
    i0.ɵɵelementEnd();
    i0.ɵɵelementContainerEnd();
  }
  if (rf & 2) {
    var tmp_3_0;
    var ctx_r2 = i0.ɵɵnextContext();
    i0.ɵɵadvance(4);
    i0.ɵɵtextInterpolate1(" ", ((tmp_3_0 = i0.ɵɵpipeBind1(5, 2, ctx_r2.list)) == null ? null : tmp_3_0.length) || 0, " items(s) ");
    i0.ɵɵadvance(3);
    i0.ɵɵproperty("ngForOf", i0.ɵɵpipeBind1(8, 4, ctx_r2.list));
  }
}
function CateringItemListComponent_ng_container_8_ul_1_catering_item_list_item_1_Template(rf, ctx) {
  if (rf & 1) {
    var _r4 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "catering-item-list-item", 12);
    i0.ɵɵlistener("toggleFav", function CateringItemListComponent_ng_container_8_ul_1_catering_item_list_item_1_Template_catering_item_list_item_toggleFav_0_listener() {
      var item_r5 = i0.ɵɵrestoreView(_r4).$implicit;
      var ctx_r2 = i0.ɵɵnextContext(3);
      return i0.ɵɵresetView(ctx_r2.toggleFav(item_r5.id));
    })("select", function CateringItemListComponent_ng_container_8_ul_1_catering_item_list_item_1_Template_catering_item_list_item_select_0_listener() {
      var item_r5 = i0.ɵɵrestoreView(_r4).$implicit;
      var ctx_r2 = i0.ɵɵnextContext(3);
      return i0.ɵɵresetView(ctx_r2.selectItem(item_r5, true));
    });
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var item_r5 = ctx.$implicit;
    var ctx_r2 = i0.ɵɵnextContext(3);
    i0.ɵɵproperty("item", item_r5)("active", ctx_r2.active === item_r5.custom_id)("selected", ctx_r2.selected.includes(item_r5.custom_id))("favourite", ctx_r2.isFavourite(item_r5.id))("code", ctx_r2.code);
  }
}
function CateringItemListComponent_ng_container_8_ul_1_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "ul", 7);
    i0.ɵɵtemplate(1, CateringItemListComponent_ng_container_8_ul_1_catering_item_list_item_1_Template, 1, 5, "catering-item-list-item", 11);
    i0.ɵɵpipe(2, "async");
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r2 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngForOf", i0.ɵɵpipeBind1(2, 1, ctx_r2.item_list));
  }
}
function CateringItemListComponent_ng_container_8_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵtemplate(1, CateringItemListComponent_ng_container_8_ul_1_Template, 3, 3, "ul", 10);
    i0.ɵɵpipe(2, "async");
    i0.ɵɵelementContainerEnd();
  }
  if (rf & 2) {
    var tmp_3_0;
    var ctx_r2 = i0.ɵɵnextContext();
    var empty_state_r6 = i0.ɵɵreference(11);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", (tmp_3_0 = i0.ɵɵpipeBind1(2, 2, ctx_r2.item_list)) == null ? null : tmp_3_0.length)("ngIfElse", empty_state_r6);
  }
}
function CateringItemListComponent_ng_template_10_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 13)(1, "p", 14);
    i0.ɵɵtext(2, " No available items for selected time and/or filters ");
    i0.ɵɵelementEnd()();
  }
}
function CateringItemListComponent_ng_template_12_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 15);
    i0.ɵɵelement(1, "mat-spinner", 16);
    i0.ɵɵelementStart(2, "p", 17);
    i0.ɵɵtext(3, "Finding available items...");
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    i0.ɵɵadvance();
    i0.ɵɵproperty("diameter", 32);
  }
}
var CateringItemListComponent = /*#__PURE__*/function () {
  function CateringItemListComponent(_state) {
    _classCallCheck(this, CateringItemListComponent);
    this._state = _state;
    this.active = '';
    this.selected = '';
    this.selected_items = [];
    this.favorites = [];
    this.toggleFav = new core_1.EventEmitter();
    this.onSelect = new core_1.EventEmitter();
    this.list = new rxjs_1.BehaviorSubject([]);
    this.loading = this._state.loading;
    this.item_list = this._state.filtered_menu;
  }
  return _createClass(CateringItemListComponent, [{
    key: "code",
    get: function get() {
      return this._state.currency_code;
    }
  }, {
    key: "ngOnChanges",
    value: function ngOnChanges(changes) {
      if (changes.selected_items) {
        this.list.next(this.selected_items || []);
      }
    }
  }, {
    key: "isFavourite",
    value: function isFavourite(item_id) {
      var _this$favorites;
      return (_this$favorites = this.favorites) === null || _this$favorites === void 0 ? void 0 : _this$favorites.includes(item_id);
    }
  }, {
    key: "selectItem",
    value: function selectItem(item) {
      var clear_state = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;
      this.onSelect.emit(item);
      if (clear_state) {
        var _item$options;
        (_item$options = item.options) === null || _item$options === void 0 || _item$options.forEach(function (_) {
          return delete _.active;
        });
      }
    }
  }]);
}();
_CateringItemListComponent = CateringItemListComponent;
_CateringItemListComponent.ɵfac = function CateringItemListComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _CateringItemListComponent)(i0.ɵɵdirectiveInject(i1.CateringOrderStateService));
};
_CateringItemListComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _CateringItemListComponent,
  selectors: [["catering-item-list"]],
  inputs: {
    active: "active",
    selected: "selected",
    selected_items: "selected_items",
    favorites: "favorites"
  },
  outputs: {
    toggleFav: "toggleFav",
    onSelect: "onSelect"
  },
  features: [i0.ɵɵNgOnChangesFeature],
  decls: 14,
  vars: 10,
  consts: [["empty_state", ""], ["load_state", ""], [1, "w-full", "h-full", "overflow-auto", "py-2"], [4, "ngIf"], [1, "font-bold", "px-2"], ["count", "", 1, "text-sm", "opacity-60", "mb-2", "px-2"], [4, "ngIf", "ngIfElse"], [1, "list-style-none", "space-y-2", "p-2"], ["class", "block", 3, "item", "active", "selected", "favourite", "toggleFav", "select", 4, "ngFor", "ngForOf"], [1, "block", 3, "toggleFav", "select", "item", "active", "selected", "favourite"], ["class", "list-style-none space-y-2 p-2", 4, "ngIf", "ngIfElse"], ["class", "block", 3, "item", "active", "selected", "favourite", "code", "toggleFav", "select", 4, "ngFor", "ngForOf"], [1, "block", 3, "toggleFav", "select", "item", "active", "selected", "favourite", "code"], ["empty", "", 1, "p-16", "flex", "flex-col", "items-center", "justify-center", "space-y-2"], [1, "opacity-30", "text-center"], ["loading", "", 1, "p-16", "flex", "flex-col", "items-center", "justify-center", "space-y-2"], [3, "diameter"], [1, "opacity-30"]],
  template: function CateringItemListComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵelementStart(0, "div", 2);
      i0.ɵɵtemplate(1, CateringItemListComponent_ng_container_1_Template, 9, 6, "ng-container", 3);
      i0.ɵɵpipe(2, "async");
      i0.ɵɵelementStart(3, "h3", 4);
      i0.ɵɵtext(4, "Results");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(5, "p", 5);
      i0.ɵɵtext(6);
      i0.ɵɵpipe(7, "async");
      i0.ɵɵelementEnd();
      i0.ɵɵtemplate(8, CateringItemListComponent_ng_container_8_Template, 3, 4, "ng-container", 6);
      i0.ɵɵpipe(9, "async");
      i0.ɵɵelementEnd();
      i0.ɵɵtemplate(10, CateringItemListComponent_ng_template_10_Template, 3, 0, "ng-template", null, 0, i0.ɵɵtemplateRefExtractor)(12, CateringItemListComponent_ng_template_12_Template, 4, 1, "ng-template", null, 1, i0.ɵɵtemplateRefExtractor);
    }
    if (rf & 2) {
      var tmp_2_0;
      var tmp_3_0;
      var load_state_r7 = i0.ɵɵreference(13);
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", (tmp_2_0 = i0.ɵɵpipeBind1(2, 4, ctx.list)) == null ? null : tmp_2_0.length);
      i0.ɵɵadvance(5);
      i0.ɵɵtextInterpolate1(" ", ((tmp_3_0 = i0.ɵɵpipeBind1(7, 6, ctx.item_list)) == null ? null : tmp_3_0.length) || 0, " result(s) found ");
      i0.ɵɵadvance(2);
      i0.ɵɵproperty("ngIf", !i0.ɵɵpipeBind1(9, 8, ctx.loading))("ngIfElse", load_state_r7);
    }
  },
  dependencies: [i2.NgForOf, i2.NgIf, i3.MatProgressSpinner, i4.CateringItemListItemComponent, i2.AsyncPipe]
});
exports.CateringItemListComponent = CateringItemListComponent;

/***/ }),

/***/ 20097:
/*!************************************************************************************!*\
  !*** ./libs/catering/src/lib/catering-order-modal/catering-order-state.service.ts ***!
  \************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _objectSpread = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/objectSpread2.js */ 34092)["default"]);
var _regeneratorRuntime = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/regeneratorRuntime.js */ 8698)["default"]);
var _asyncToGenerator = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/asyncToGenerator.js */ 95386)["default"]);
var _slicedToArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/slicedToArray.js */ 6282)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _CateringOrderStateService;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.CateringOrderStateService = void 0;
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var organisation_1 = __webpack_require__(/*! @placeos/organisation */ 2510);
var ts_client_1 = __webpack_require__(/*! @placeos/ts-client */ 35713);
var rxjs_1 = __webpack_require__(/*! rxjs */ 15681);
var operators_1 = __webpack_require__(/*! rxjs/operators */ 97303);
var catering_item_class_1 = __webpack_require__(/*! ../catering-item.class */ 25892);
var utilities_1 = __webpack_require__(/*! ../utilities */ 60285);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @placeos/organisation */ 2510);
var i2 = __webpack_require__(/*! @placeos/common */ 22797);
var CateringOrderStateService = /*#__PURE__*/function () {
  function CateringOrderStateService(_org, _settings) {
    var _this = this;
    _classCallCheck(this, CateringOrderStateService);
    this._org = _org;
    this._settings = _settings;
    this._options = new rxjs_1.BehaviorSubject({});
    this._filters = new rxjs_1.BehaviorSubject({
      search: '',
      tags: [],
      categories: []
    });
    this._loading = new rxjs_1.BehaviorSubject('');
    this.loading = this._loading.asObservable();
    this.filters = this._filters.asObservable();
    this.settings = this._org.active_building.pipe((0, operators_1.filter)(function (_) {
      return !!_;
    }), (0, operators_1.switchMap)(function (_) {
      return (0, ts_client_1.showMetadata)(_.id, 'catering-settings').pipe((0, operators_1.catchError)(function (_) {
        return (0, rxjs_1.of)({});
      }));
    }), (0, operators_1.map)(function (_) {
      return _.details;
    }), (0, operators_1.tap)(function (_) {
      return _this._settings.post('require_catering_notes', !!(_ !== null && _ !== void 0 && _.require_notes));
    }), (0, operators_1.shareReplay)(1));
    this.charge_codes = this.settings.pipe((0, operators_1.map)(function (_) {
      return _.charge_codes || [];
    }));
    this.availability = this.settings.pipe((0, operators_1.map)(function (_) {
      return _.disabled_rooms || [];
    }));
    this.available_menu = (0, rxjs_1.combineLatest)([this._options, this._org.active_building]).pipe((0, operators_1.filter)(function (_ref) {
      var _ref2 = _slicedToArray(_ref, 2),
        _ = _ref2[0],
        bld = _ref2[1];
      return !!bld;
    }), (0, operators_1.switchMap)(function (_ref3) {
      var _ref4 = _slicedToArray(_ref3, 2),
        zone = _ref4[0].zone,
        bld = _ref4[1];
      _this._loading.next('[Menu]');
      return (0, ts_client_1.showMetadata)(zone || bld.id, 'catering').pipe((0, operators_1.map)(function (d) {
        return (d.details instanceof Array ? d.details : []).map(function (_) {
          return new catering_item_class_1.CateringItem(_);
        });
      }), (0, operators_1.catchError)(function (_) {
        return [];
      }));
    }), (0, operators_1.tap)(function (_) {
      return _this._loading.next('');
    }), (0, operators_1.shareReplay)(1));
    this.categories = this.available_menu.pipe((0, operators_1.map)(function (_) {
      return (0, common_1.unique)(_.map(function (i) {
        return i.category;
      }));
    }));
    this.filtered_menu = (0, rxjs_1.combineLatest)([this._filters, this.available_menu]).pipe((0, operators_1.switchMap)( /*#__PURE__*/function () {
      var _ref5 = _asyncToGenerator(function (_ref6) {
        var _ref7 = _slicedToArray(_ref6, 2),
          _ref7$ = _ref7[0],
          search = _ref7$.search,
          tags = _ref7$.tags,
          categories = _ref7$.categories,
          zone_id = _ref7$.zone_id,
          date = _ref7$.date,
          duration = _ref7$.duration,
          resources = _ref7$.resources,
          l = _ref7[1];
        return /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
          var rules, list;
          return _regeneratorRuntime().wrap(function _callee$(_context) {
            while (1) switch (_context.prev = _context.next) {
              case 0:
                _context.next = 2;
                return (0, utilities_1.getCateringRulesForZone)(zone_id).toPromise();
              case 2:
                rules = _context.sent;
                search = search.toLowerCase();
                list = search ? l.filter(function (_) {
                  return _.name.toLowerCase().includes(search);
                }) : l;
                list = tags.length ? list.filter(function (_) {
                  return tags.every(function (t) {
                    return _.tags.includes(t);
                  });
                }) : list;
                list = categories.length ? list.filter(function (_) {
                  return categories.includes(_.category);
                }) : list;
                list = list.filter(function (_) {
                  return (0, utilities_1.cateringItemAvailable)(_, rules, {
                    date: date,
                    duration: duration,
                    resources: resources
                  });
                });
                return _context.abrupt("return", list);
              case 9:
              case "end":
                return _context.stop();
            }
          }, _callee);
        })();
      });
      return function (_x) {
        return _ref5.apply(this, arguments);
      };
    }()), (0, operators_1.shareReplay)(1));
  }
  return _createClass(CateringOrderStateService, [{
    key: "currency_code",
    get: function get() {
      return this._org.currency_code;
    }
  }, {
    key: "setOptions",
    value: function setOptions(opts) {
      this._options.next(_objectSpread(_objectSpread({}, this._options.getValue()), opts));
    }
  }, {
    key: "setFilters",
    value: function setFilters(opts) {
      this._filters.next(_objectSpread(_objectSpread({}, this._filters.getValue()), opts));
    }
  }, {
    key: "getFilters",
    value: function getFilters() {
      return _objectSpread({}, this._filters.getValue());
    }
  }]);
}();
_CateringOrderStateService = CateringOrderStateService;
_CateringOrderStateService.ɵfac = function CateringOrderStateService_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _CateringOrderStateService)(i0.ɵɵinject(i1.OrganisationService), i0.ɵɵinject(i2.SettingsService));
};
_CateringOrderStateService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({
  token: _CateringOrderStateService,
  factory: _CateringOrderStateService.ɵfac,
  providedIn: 'root'
});
exports.CateringOrderStateService = CateringOrderStateService;

/***/ }),

/***/ 11732:
/*!******************************************************************************************!*\
  !*** ./libs/catering/src/lib/catering-order-modal/new-catering-order-modal.component.ts ***!
  \******************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _taggedTemplateLiteral = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js */ 9959)["default"]);
var _objectSpread = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/objectSpread2.js */ 34092)["default"]);
var _toConsumableArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/toConsumableArray.js */ 86033)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _NewCateringOrderModalComponent, _templateObject, _templateObject2, _templateObject3, _templateObject4, _templateObject5;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.NewCateringOrderModalComponent = void 0;
var dialog_1 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var organisation_1 = __webpack_require__(/*! @placeos/organisation */ 2510);
var catering_item_class_1 = __webpack_require__(/*! ../catering-item.class */ 25892);
var catering_order_state_service_1 = __webpack_require__(/*! ./catering-order-state.service */ 20097);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @placeos/common */ 22797);
var i2 = __webpack_require__(/*! ./catering-order-state.service */ 20097);
var i3 = __webpack_require__(/*! @placeos/organisation */ 2510);
var i4 = __webpack_require__(/*! @angular/common */ 60316);
var i5 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var i6 = __webpack_require__(/*! ../../../../components/src/lib/icon.component */ 69434);
var i7 = __webpack_require__(/*! @angular/material/core */ 74646);
var i8 = __webpack_require__(/*! ./catering-item-list.component */ 32499);
var i9 = __webpack_require__(/*! ./catering-item-details.component */ 90699);
var i10 = __webpack_require__(/*! ./catering-item-filters.component */ 26386);
function NewCateringOrderModalComponent_button_14_Template(rf, ctx) {
  if (rf & 1) {
    var _r1 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "button", 25);
    i0.ɵɵlistener("click", function NewCateringOrderModalComponent_button_14_Template_button_click_0_listener() {
      i0.ɵɵrestoreView(_r1);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.displayed = null);
    });
    i0.ɵɵi18n(1, 4);
    i0.ɵɵelementEnd();
  }
}
var EMPTY_FAVS = [];
var NewCateringOrderModalComponent = /*#__PURE__*/function () {
  function NewCateringOrderModalComponent(_settings, _order, _org, _data) {
    var _this$_data$exact_tim;
    _classCallCheck(this, NewCateringOrderModalComponent);
    this._settings = _settings;
    this._order = _order;
    this._org = _org;
    this._data = _data;
    this.displayed = null;
    this.selected = _toConsumableArray(this._data.items || []);
    this.exact_time = (_this$_data$exact_tim = this._data.exact_time) !== null && _this$_data$exact_tim !== void 0 ? _this$_data$exact_tim : false;
    var duration = this._data.details.duration;
    this._order.setFilters(this._data.details);
    this.offset = Math.min(Math.max(this._settings.get('app.catering.min_offset'), this._data.offset || 0), (duration || 60) - this._settings.get('app.catering.end_offset'));
    this.offset_day = this._data.offset_day || 0;
  }
  return _createClass(NewCateringOrderModalComponent, [{
    key: "favorites",
    get: function get() {
      return this._settings.get('favourite_menu_items') || EMPTY_FAVS;
    }
  }, {
    key: "selected_ids",
    get: function get() {
      return this.selected.map(function (_) {
        return _.custom_id;
      }).join(',');
    }
  }, {
    key: "count",
    get: function get() {
      return this.selected.reduce(function (t, i) {
        return t + i.quantity;
      }, 0);
    }
  }, {
    key: "code",
    get: function get() {
      return this._org.currency_code;
    }
  }, {
    key: "isSelected",
    value: function isSelected(id) {
      return id && this.selected_ids.includes(id);
    }
  }, {
    key: "setSelected",
    value: function setSelected(item, state) {
      var list = this.selected.filter(function (_) {
        return _.custom_id !== item.custom_id;
      });
      if (state) {
        var new_item = new catering_item_class_1.CateringItem(_objectSpread(_objectSpread({}, item), {}, {
          in_order: true
        }));
        list.push(new_item);
        this.displayed = new_item;
      }
      this.selected = list;
    }
  }, {
    key: "toggleFavourite",
    value: function toggleFavourite(item) {
      var fav_list = this.favorites;
      var new_state = !fav_list.includes(item.id);
      if (new_state) {
        this._settings.saveUserSetting('favourite_menu_items', [].concat(_toConsumableArray(fav_list), [item.id]));
      } else {
        this._settings.saveUserSetting('favourite_menu_items', fav_list.filter(function (_) {
          return _ !== item.id;
        }));
      }
    }
  }]);
}();
_NewCateringOrderModalComponent = NewCateringOrderModalComponent;
_NewCateringOrderModalComponent.ɵfac = function NewCateringOrderModalComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _NewCateringOrderModalComponent)(i0.ɵɵdirectiveInject(i1.SettingsService), i0.ɵɵdirectiveInject(i2.CateringOrderStateService), i0.ɵɵdirectiveInject(i3.OrganisationService), i0.ɵɵdirectiveInject(dialog_1.MAT_DIALOG_DATA));
};
_NewCateringOrderModalComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _NewCateringOrderModalComponent,
  selectors: [["new-catering-order-modal"]],
  decls: 32,
  vars: 28,
  consts: function consts() {
    var i18n_0;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_2076287131803615740$$LIBS_CATERING_SRC_LIB_CATERING_ORDER_MODAL_NEW_CATERING_ORDER_MODAL_COMPONENT_TS_0 = goog.getMsg("Add Catering");
      i18n_0 = MSG_EXTERNAL_2076287131803615740$$LIBS_CATERING_SRC_LIB_CATERING_ORDER_MODAL_NEW_CATERING_ORDER_MODAL_COMPONENT_TS_0;
    } else {
      i18n_0 = $localize(_templateObject || (_templateObject = _taggedTemplateLiteral([":\u241F737cdc02079fb61b2944ecf62f908ab35efb2d5a\u241F2076287131803615740:Add Catering"])));
    }
    var i18n_1;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_8443571736703532556$$LIBS_CATERING_SRC_LIB_CATERING_ORDER_MODAL_NEW_CATERING_ORDER_MODAL_COMPONENT_TS_1 = goog.getMsg(" View List ");
      i18n_1 = MSG_EXTERNAL_8443571736703532556$$LIBS_CATERING_SRC_LIB_CATERING_ORDER_MODAL_NEW_CATERING_ORDER_MODAL_COMPONENT_TS_1;
    } else {
      i18n_1 = $localize(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([":\u241F30d3439b0e0095fe69503245f3bd7a2e9498be7c\u241F8443571736703532556: View List "])));
    }
    var i18n_2;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_819716823718458903$$LIBS_CATERING_SRC_LIB_CATERING_ORDER_MODAL_NEW_CATERING_ORDER_MODAL_COMPONENT_TS_2 = goog.getMsg("Back to form");
      i18n_2 = MSG_EXTERNAL_819716823718458903$$LIBS_CATERING_SRC_LIB_CATERING_ORDER_MODAL_NEW_CATERING_ORDER_MODAL_COMPONENT_TS_2;
    } else {
      i18n_2 = $localize(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([":\u241F18843b85d1a4f17fefafd07bc5cde636dca44295\u241F819716823718458903:Back to form"])));
    }
    var i18n_3;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_4024487187516268099$$LIBS_CATERING_SRC_LIB_CATERING_ORDER_MODAL_NEW_CATERING_ORDER_MODAL_COMPONENT_TS_3 = goog.getMsg(" {$interpolation} items(s) added ", {
        "interpolation": "\uFFFD0\uFFFD"
      }, {
        original_code: {
          "interpolation": "{{ count }}"
        }
      });
      i18n_3 = MSG_EXTERNAL_4024487187516268099$$LIBS_CATERING_SRC_LIB_CATERING_ORDER_MODAL_NEW_CATERING_ORDER_MODAL_COMPONENT_TS_3;
    } else {
      i18n_3 = $localize(_templateObject4 || (_templateObject4 = _taggedTemplateLiteral([":\u241F523976668707aada89243171aa2abc1402656c5b\u241F4024487187516268099: ", ":INTERPOLATION: items(s) added "])), "\uFFFD0\uFFFD");
    }
    var i18n_4;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_874721418273731876$$LIBS_CATERING_SRC_LIB_CATERING_ORDER_MODAL_NEW_CATERING_ORDER_MODAL_COMPONENT_TS_4 = goog.getMsg(" Back ");
      i18n_4 = MSG_EXTERNAL_874721418273731876$$LIBS_CATERING_SRC_LIB_CATERING_ORDER_MODAL_NEW_CATERING_ORDER_MODAL_COMPONENT_TS_4;
    } else {
      i18n_4 = $localize(_templateObject5 || (_templateObject5 = _taggedTemplateLiteral([":\u241Fccda1d41ca79703a85a3a598c1d97e040a32b766\u241F874721418273731876: Back "])));
    }
    return [i18n_0, i18n_1, i18n_2, i18n_3, i18n_4, [1, "w-[100vw]", "h-[100vh]", "sm:relative", "sm:w-auto", "sm:h-auto", "flex", "flex-col", "bg-base-100"], [1, "flex", "items-center", "space-x-4", "w-full"], ["icon", "", "matRipple", "", 1, "bg-neutral", 3, "mat-dialog-close"], [1, "flex-1", "flex", "items-center", "divide-x", "divide-base-200", "min-h-[65vh]", "h-[65vh]", "sm:max-h-[65vh]", "sm:max-w-[95vw]", "w-full", "overflow-hidden"], [1, "h-full", "hidden", "sm:block", "sm:max-w-[12rem]", "sm:h-[65vh]", "sm:max-h-full", 3, "at_timeChange", "offsetChange", "offset_dayChange", "at_time", "offset", "offset_day"], [1, "flex", "flex-col", "items-center", "flex-1", "w-1/2", "h-full", "sm:h-[65vh]"], [1, "w-full", "border-b", "border-base-200", 3, "search"], [1, "flex-1", "h-1/2", "w-full", "overflow-hidden", 3, "toggleFav", "onSelect", "active", "selected", "selected_items", "favorites"], [1, "h-full", "w-full", "sm:h-[65vh]", "absolute", "sm:relative", "sm:flex", "sm:max-w-[16rem]", "z-20", "bg-base-100", 3, "activeChange", "toggleFav", "close", "item", "active", "code", "fav"], [1, "flex", "sm:hidden", "flex-col-reverse", "items-center", "justify-end", "px-2", "pt-2", "pb-[5.5rem]", "border-t", "border-base-200", "w-full"], ["btn", "", "matRipple", "", "name", "catering-item-return", "class", "inverse sm:hidden w-full sm:w-auto", 3, "click", 4, "ngIf"], ["btn", "", "matRipple", "", "name", "save-catering-item", 1, "w-full", "sm:w-auto", "sm:mb-0", 3, "mat-dialog-close"], [1, "hidden", "sm:flex", "items-center", "justify-between", "p-2", "border-t", "border-base-200", "w-full"], ["btn", "", "matRipple", "", "name", "catering-item-return", 1, "clear", "text-secondary", 3, "mat-dialog-close"], [1, "flex", "items-center"], [1, "text-xl"], [1, "mr-1", "underline"], [1, "opacity-60", "text-sm"], ["btn", "", "matRipple", "", "name", "toggle-catering-item", 3, "click", "disabled"], [1, "mr-1"], ["btn", "", "matRipple", "", "name", "catering-item-return", 1, "inverse", "sm:hidden", "w-full", "sm:w-auto", 3, "click"]];
  },
  template: function NewCateringOrderModalComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵelementStart(0, "div", 5)(1, "header", 6)(2, "button", 7)(3, "app-icon");
      i0.ɵɵtext(4, "close");
      i0.ɵɵelementEnd()();
      i0.ɵɵelementStart(5, "h3");
      i0.ɵɵi18n(6, 0);
      i0.ɵɵelementEnd()();
      i0.ɵɵelementStart(7, "main", 8)(8, "catering-item-filters", 9);
      i0.ɵɵtwoWayListener("at_timeChange", function NewCateringOrderModalComponent_Template_catering_item_filters_at_timeChange_8_listener($event) {
        i0.ɵɵtwoWayBindingSet(ctx.exact_time, $event) || (ctx.exact_time = $event);
        return $event;
      })("offsetChange", function NewCateringOrderModalComponent_Template_catering_item_filters_offsetChange_8_listener($event) {
        i0.ɵɵtwoWayBindingSet(ctx.offset, $event) || (ctx.offset = $event);
        return $event;
      })("offset_dayChange", function NewCateringOrderModalComponent_Template_catering_item_filters_offset_dayChange_8_listener($event) {
        i0.ɵɵtwoWayBindingSet(ctx.offset_day, $event) || (ctx.offset_day = $event);
        return $event;
      });
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(9, "div", 10);
      i0.ɵɵelement(10, "catering-item-filters", 11);
      i0.ɵɵelementStart(11, "catering-item-list", 12);
      i0.ɵɵlistener("toggleFav", function NewCateringOrderModalComponent_Template_catering_item_list_toggleFav_11_listener($event) {
        return ctx.toggleFavourite($event);
      })("onSelect", function NewCateringOrderModalComponent_Template_catering_item_list_onSelect_11_listener($event) {
        return ctx.displayed = $event;
      });
      i0.ɵɵelementEnd()();
      i0.ɵɵelementStart(12, "catering-item-details", 13);
      i0.ɵɵlistener("activeChange", function NewCateringOrderModalComponent_Template_catering_item_details_activeChange_12_listener($event) {
        return ctx.setSelected(ctx.displayed, $event);
      })("toggleFav", function NewCateringOrderModalComponent_Template_catering_item_details_toggleFav_12_listener() {
        return ctx.toggleFavourite(ctx.displayed);
      })("close", function NewCateringOrderModalComponent_Template_catering_item_details_close_12_listener() {
        return ctx.displayed = null;
      });
      i0.ɵɵelementEnd()();
      i0.ɵɵelementStart(13, "footer", 14);
      i0.ɵɵtemplate(14, NewCateringOrderModalComponent_button_14_Template, 2, 0, "button", 15);
      i0.ɵɵelementStart(15, "button", 16);
      i0.ɵɵi18n(16, 1);
      i0.ɵɵelementEnd()();
      i0.ɵɵelementStart(17, "footer", 17)(18, "button", 18)(19, "div", 19)(20, "app-icon", 20);
      i0.ɵɵtext(21, "arrow_back");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(22, "div", 21);
      i0.ɵɵi18n(23, 2);
      i0.ɵɵelementEnd()()();
      i0.ɵɵelementStart(24, "p", 22);
      i0.ɵɵi18n(25, 3);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(26, "button", 23);
      i0.ɵɵlistener("click", function NewCateringOrderModalComponent_Template_button_click_26_listener() {
        return ctx.setSelected(ctx.displayed, !ctx.isSelected(ctx.displayed == null ? null : ctx.displayed.custom_id));
      });
      i0.ɵɵelementStart(27, "div", 19)(28, "app-icon", 20);
      i0.ɵɵtext(29);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(30, "div", 24);
      i0.ɵɵtext(31);
      i0.ɵɵelementEnd()()()()();
    }
    if (rf & 2) {
      i0.ɵɵadvance(2);
      i0.ɵɵproperty("mat-dialog-close", ctx.selected);
      i0.ɵɵadvance(6);
      i0.ɵɵtwoWayProperty("at_time", ctx.exact_time)("offset", ctx.offset)("offset_day", ctx.offset_day);
      i0.ɵɵadvance(2);
      i0.ɵɵproperty("search", true);
      i0.ɵɵadvance();
      i0.ɵɵproperty("active", ctx.displayed == null ? null : ctx.displayed.custom_id)("selected", ctx.selected_ids)("selected_items", ctx.selected)("favorites", ctx.favorites);
      i0.ɵɵadvance();
      i0.ɵɵclassProp("hidden", !ctx.displayed)("inset-0", ctx.displayed);
      i0.ɵɵproperty("item", ctx.displayed)("active", ctx.selected_ids.includes((ctx.displayed == null ? null : ctx.displayed.custom_id) || ""))("code", ctx.code)("fav", !!ctx.displayed && ctx.favorites.includes((ctx.displayed == null ? null : ctx.displayed.id) || ""));
      i0.ɵɵadvance(2);
      i0.ɵɵproperty("ngIf", ctx.displayed);
      i0.ɵɵadvance();
      i0.ɵɵclassProp("mb-2", ctx.displayed);
      i0.ɵɵproperty("mat-dialog-close", ctx.selected);
      i0.ɵɵadvance(3);
      i0.ɵɵproperty("mat-dialog-close", ctx.selected);
      i0.ɵɵadvance(7);
      i0.ɵɵi18nExp(ctx.count);
      i0.ɵɵi18nApply(25);
      i0.ɵɵadvance();
      i0.ɵɵclassProp("inverse", ctx.isSelected(ctx.displayed == null ? null : ctx.displayed.custom_id));
      i0.ɵɵproperty("disabled", !ctx.displayed);
      i0.ɵɵadvance(3);
      i0.ɵɵtextInterpolate(ctx.isSelected(ctx.displayed == null ? null : ctx.displayed.custom_id) ? "remove" : "add");
      i0.ɵɵadvance(2);
      i0.ɵɵtextInterpolate1(" ", ctx.isSelected(ctx.displayed == null ? null : ctx.displayed.custom_id) ? "Remove from Booking" : "Add to booking", " ");
    }
  },
  dependencies: [i4.NgIf, i5.MatDialogClose, i6.IconComponent, i7.MatRipple, i8.CateringItemListComponent, i9.CateringItemDetailsComponent, i10.CateringItemFiltersComponent]
});
exports.NewCateringOrderModalComponent = NewCateringOrderModalComponent;

/***/ }),

/***/ 17707:
/*!*************************************************************************!*\
  !*** ./libs/catering/src/lib/catering-order-options-modal.component.ts ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _createForOfIteratorHelper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createForOfIteratorHelper.js */ 36350)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _CateringOrderOptionsModalComponent;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.CateringOrderOptionsModalComponent = void 0;
var core_1 = __webpack_require__(/*! @angular/core */ 37580);
var dialog_1 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var general_1 = __webpack_require__(/*! libs/common/src/lib/general */ 64217);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @angular/common */ 60316);
var i2 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var i3 = __webpack_require__(/*! @angular/material/checkbox */ 97024);
var i4 = __webpack_require__(/*! @angular/material/radio */ 53804);
var i5 = __webpack_require__(/*! @angular/forms */ 34456);
var i6 = __webpack_require__(/*! ../../../components/src/lib/icon.component */ 69434);
var i7 = __webpack_require__(/*! @angular/material/core */ 74646);
function CateringOrderOptionsModalComponent_div_7_ng_container_4_mat_radio_button_5_div_4_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 18);
    i0.ɵɵtext(1);
    i0.ɵɵpipe(2, "currency");
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var opt_r4 = i0.ɵɵnextContext().$implicit;
    var ctx_r2 = i0.ɵɵnextContext(3);
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" +", i0.ɵɵpipeBind2(2, 1, opt_r4.unit_price / 100, ctx_r2.code), " ");
  }
}
function CateringOrderOptionsModalComponent_div_7_ng_container_4_mat_radio_button_5_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "mat-radio-button", 14)(1, "div", 15)(2, "div", 16);
    i0.ɵɵtext(3);
    i0.ɵɵelementEnd();
    i0.ɵɵtemplate(4, CateringOrderOptionsModalComponent_div_7_ng_container_4_mat_radio_button_5_div_4_Template, 3, 4, "div", 17);
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var opt_r4 = ctx.$implicit;
    i0.ɵɵproperty("value", opt_r4.id);
    i0.ɵɵadvance(3);
    i0.ɵɵtextInterpolate1(" ", opt_r4.name, " ");
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", opt_r4.unit_price);
  }
}
function CateringOrderOptionsModalComponent_div_7_ng_container_4_Template(rf, ctx) {
  if (rf & 1) {
    var _r1 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵelementStart(1, "mat-radio-group", 10);
    i0.ɵɵlistener("ngModelChange", function CateringOrderOptionsModalComponent_div_7_ng_container_4_Template_mat_radio_group_ngModelChange_1_listener($event) {
      i0.ɵɵrestoreView(_r1);
      var group_r2 = i0.ɵɵnextContext().$implicit;
      var ctx_r2 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r2.updateGroupOption(group_r2, $event));
    });
    i0.ɵɵelementStart(2, "mat-radio-button", 11)(3, "span", 12);
    i0.ɵɵtext(4, "None");
    i0.ɵɵelementEnd()();
    i0.ɵɵtemplate(5, CateringOrderOptionsModalComponent_div_7_ng_container_4_mat_radio_button_5_Template, 5, 3, "mat-radio-button", 13);
    i0.ɵɵelementEnd();
    i0.ɵɵelementContainerEnd();
  }
  if (rf & 2) {
    var group_r2 = i0.ɵɵnextContext().$implicit;
    i0.ɵɵadvance(5);
    i0.ɵɵproperty("ngForOf", group_r2 == null ? null : group_r2.options);
  }
}
function CateringOrderOptionsModalComponent_div_7_ng_template_5_mat_checkbox_0_div_4_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 18);
    i0.ɵɵtext(1);
    i0.ɵɵpipe(2, "currency");
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var opt_r6 = i0.ɵɵnextContext().$implicit;
    var ctx_r2 = i0.ɵɵnextContext(3);
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" +", i0.ɵɵpipeBind2(2, 1, opt_r6.unit_price / 100, ctx_r2.code), " ");
  }
}
function CateringOrderOptionsModalComponent_div_7_ng_template_5_mat_checkbox_0_Template(rf, ctx) {
  if (rf & 1) {
    var _r5 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "mat-checkbox", 20);
    i0.ɵɵtwoWayListener("ngModelChange", function CateringOrderOptionsModalComponent_div_7_ng_template_5_mat_checkbox_0_Template_mat_checkbox_ngModelChange_0_listener($event) {
      var opt_r6 = i0.ɵɵrestoreView(_r5).$implicit;
      var ctx_r2 = i0.ɵɵnextContext(3);
      i0.ɵɵtwoWayBindingSet(ctx_r2.option_state[opt_r6.id], $event) || (ctx_r2.option_state[opt_r6.id] = $event);
      return i0.ɵɵresetView($event);
    });
    i0.ɵɵelementStart(1, "div", 15)(2, "div", 16);
    i0.ɵɵtext(3);
    i0.ɵɵelementEnd();
    i0.ɵɵtemplate(4, CateringOrderOptionsModalComponent_div_7_ng_template_5_mat_checkbox_0_div_4_Template, 3, 4, "div", 17);
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var opt_r6 = ctx.$implicit;
    var ctx_r2 = i0.ɵɵnextContext(3);
    i0.ɵɵtwoWayProperty("ngModel", ctx_r2.option_state[opt_r6.id]);
    i0.ɵɵadvance(3);
    i0.ɵɵtextInterpolate1(" ", opt_r6.name, " ");
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", opt_r6.unit_price);
  }
}
function CateringOrderOptionsModalComponent_div_7_ng_template_5_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵtemplate(0, CateringOrderOptionsModalComponent_div_7_ng_template_5_mat_checkbox_0_Template, 5, 3, "mat-checkbox", 19);
  }
  if (rf & 2) {
    var group_r2 = i0.ɵɵnextContext().$implicit;
    i0.ɵɵproperty("ngForOf", group_r2 == null ? null : group_r2.options);
  }
}
function CateringOrderOptionsModalComponent_div_7_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 6)(1, "div", 7);
    i0.ɵɵtext(2);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(3, "div", 8);
    i0.ɵɵtemplate(4, CateringOrderOptionsModalComponent_div_7_ng_container_4_Template, 6, 1, "ng-container", 9)(5, CateringOrderOptionsModalComponent_div_7_ng_template_5_Template, 1, 1, "ng-template", null, 0, i0.ɵɵtemplateRefExtractor);
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var group_r2 = ctx.$implicit;
    var multi_options_r7 = i0.ɵɵreference(6);
    i0.ɵɵattribute("group", group_r2.name);
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate(group_r2.name);
    i0.ɵɵadvance(2);
    i0.ɵɵproperty("ngIf", !group_r2.multiple)("ngIfElse", multi_options_r7);
  }
}
var CateringOrderOptionsModalComponent = /*#__PURE__*/function () {
  function CateringOrderOptionsModalComponent(_data) {
    var _this = this;
    _classCallCheck(this, CateringOrderOptionsModalComponent);
    this._data = _data;
    /** Emitter for events on the modal */
    this.event = new core_1.EventEmitter();
    /** Mapping of options to their active state */
    this.option_state = {};
    this.code = this._data.code;
    var groups = (0, general_1.unique)(this._data.options.map(function (i) {
      return i.group || 'Other';
    }));
    var group_list = [];
    var _iterator = _createForOfIteratorHelper(groups),
      _step;
    try {
      var _loop = function _loop() {
        var group = _step.value;
        var options = _this._data.options.filter(function (i) {
          return i.group === group;
        });
        group_list.push({
          name: group,
          multiple: !!options.find(function (i) {
            return i.multiple;
          }),
          options: options
        });
      };
      for (_iterator.s(); !(_step = _iterator.n()).done;) {
        _loop();
      }
    } catch (err) {
      _iterator.e(err);
    } finally {
      _iterator.f();
    }
    this.groups = group_list;
  }
  return _createClass(CateringOrderOptionsModalComponent, [{
    key: "updateGroupOption",
    value: function updateGroupOption(group, id) {
      var _iterator2 = _createForOfIteratorHelper(group.options),
        _step2;
      try {
        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
          var option = _step2.value;
          this.option_state[option.id] = option.id === id;
        }
      } catch (err) {
        _iterator2.e(err);
      } finally {
        _iterator2.f();
      }
    }
  }, {
    key: "saveOptions",
    value: function saveOptions() {
      var _this2 = this;
      var options = this._data.options.filter(function (opt) {
        return _this2.option_state[opt.id];
      });
      this.event.emit({
        reason: 'done',
        metadata: {
          options: options
        }
      });
    }
  }]);
}();
_CateringOrderOptionsModalComponent = CateringOrderOptionsModalComponent;
_CateringOrderOptionsModalComponent.ɵfac = function CateringOrderOptionsModalComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _CateringOrderOptionsModalComponent)(i0.ɵɵdirectiveInject(dialog_1.MAT_DIALOG_DATA));
};
_CateringOrderOptionsModalComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _CateringOrderOptionsModalComponent,
  selectors: [["app-catering-options-modal"]],
  outputs: {
    event: "event"
  },
  decls: 11,
  vars: 1,
  consts: [["multi_options", ""], ["icon", "", "mat-dialog-close", ""], [1, "overflow-auto"], ["class", "pt-1 pb-2 border-b border-base-200", 4, "ngFor", "ngForOf"], [1, "p-2"], ["btn", "", "matRipple", "", 1, "w-32", 3, "click"], [1, "pt-1", "pb-2", "border-b", "border-base-200"], [1, "font-medium", "p-2", "capitalize"], [1, "flex", "flex-col", "pl-6"], [4, "ngIf", "ngIfElse"], ["aria-label", "Select an option", "ngModel", "", 1, "flex", "flex-col", 3, "ngModelChange"], ["value", "", 1, "my-1", "mx-0"], [1, "font-medium", "p-2"], ["class", "my-1 mx-0", 3, "value", 4, "ngFor", "ngForOf"], [1, "my-1", "mx-0", 3, "value"], [1, "flex", "items-center", "justify-center"], [1, "font-medium", "p-2", "flex-1", "w-1/2"], ["class", "opacity-60 text-xs", 4, "ngIf"], [1, "opacity-60", "text-xs"], [3, "ngModel", "ngModelChange", 4, "ngFor", "ngForOf"], [3, "ngModelChange", "ngModel"]],
  template: function CateringOrderOptionsModalComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵelementStart(0, "header")(1, "h3");
      i0.ɵɵtext(2, "Select options");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(3, "button", 1)(4, "app-icon");
      i0.ɵɵtext(5, "close");
      i0.ɵɵelementEnd()()();
      i0.ɵɵelementStart(6, "main", 2);
      i0.ɵɵtemplate(7, CateringOrderOptionsModalComponent_div_7_Template, 7, 4, "div", 3);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(8, "footer", 4)(9, "button", 5);
      i0.ɵɵlistener("click", function CateringOrderOptionsModalComponent_Template_button_click_9_listener() {
        return ctx.saveOptions();
      });
      i0.ɵɵtext(10, " Save ");
      i0.ɵɵelementEnd()();
    }
    if (rf & 2) {
      i0.ɵɵadvance(7);
      i0.ɵɵproperty("ngForOf", ctx.groups);
    }
  },
  dependencies: [i1.NgForOf, i1.NgIf, i2.MatDialogClose, i3.MatCheckbox, i4.MatRadioGroup, i4.MatRadioButton, i5.NgControlStatus, i5.NgModel, i6.IconComponent, i7.MatRipple, i1.CurrencyPipe],
  styles: ["main[_ngcontent-%COMP%] {\n                min-height: 24em;\n                width: 24rem;\n                max-width: calc(100vw - 2rem);\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNhdGVyaW5nLW9yZGVyLW9wdGlvbnMtbW9kYWwuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxnQkFBZ0I7Z0JBQ2hCLFlBQVk7Z0JBQ1osNkJBQTZCO1lBQ2pDIiwiZmlsZSI6ImNhdGVyaW5nLW9yZGVyLW9wdGlvbnMtbW9kYWwuY29tcG9uZW50LnRzIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICBtYWluIHtcbiAgICAgICAgICAgICAgICBtaW4taGVpZ2h0OiAyNGVtO1xuICAgICAgICAgICAgICAgIHdpZHRoOiAyNHJlbTtcbiAgICAgICAgICAgICAgICBtYXgtd2lkdGg6IGNhbGMoMTAwdncgLSAycmVtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl19 */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvY2F0ZXJpbmcvc3JjL2xpYi9jYXRlcmluZy1vcmRlci1vcHRpb25zLW1vZGFsLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1lBQ1k7Z0JBQ0ksZ0JBQWdCO2dCQUNoQixZQUFZO2dCQUNaLDZCQUE2QjtZQUNqQzs7QUFFWix3aUJBQXdpQiIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgbWFpbiB7XG4gICAgICAgICAgICAgICAgbWluLWhlaWdodDogMjRlbTtcbiAgICAgICAgICAgICAgICB3aWR0aDogMjRyZW07XG4gICAgICAgICAgICAgICAgbWF4LXdpZHRoOiBjYWxjKDEwMHZ3IC0gMnJlbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICJdLCJzb3VyY2VSb290IjoiIn0= */"]
});
exports.CateringOrderOptionsModalComponent = CateringOrderOptionsModalComponent;

/***/ }),

/***/ 75555:
/*!*******************************************************!*\
  !*** ./libs/catering/src/lib/catering-order.class.ts ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.CateringOrder = void 0;
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var catering_item_class_1 = __webpack_require__(/*! ./catering-item.class */ 25892);
var date_fns_1 = __webpack_require__(/*! date-fns */ 25773);
function deliverAtTime(order) {
  var _order$event, _order$event2;
  var date = ((_order$event = order.event) === null || _order$event === void 0 ? void 0 : _order$event.date) || order._time;
  if (order.deliver_time) {
    date = (0, date_fns_1.set)(date, {
      hours: Math.floor(order.deliver_time),
      minutes: order.deliver_time % 1 * 60
    }).valueOf();
  }
  if (order.deliver_day_offset > 0 || (_order$event2 = order.event) !== null && _order$event2 !== void 0 && _order$event2.all_day) {
    date = (0, date_fns_1.addDays)((0, date_fns_1.startOfDay)(date), order.deliver_day_offset).valueOf();
  }
  return (0, date_fns_1.addMinutes)(date, order.deliver_offset).valueOf();
}
var CateringOrder = /*#__PURE__*/function () {
  function CateringOrder() {
    var _data$event;
    var data = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    _classCallCheck(this, CateringOrder);
    this._time = (0, date_fns_1.startOfMinute)(Date.now()).valueOf();
    this.id = data.id || "order-".concat((0, common_1.randomInt)(9999999, 1000000));
    this.system_id = data.system_id || '';
    this.event_id = data.event_id || ((_data$event = data.event) === null || _data$event === void 0 ? void 0 : _data$event.id) || '';
    this.items = (data.items || []).map(function (i) {
      return i instanceof catering_item_class_1.CateringItem ? i : new catering_item_class_1.CateringItem(i);
    });
    this.item_count = this.items.reduce(function (amount, item) {
      return amount + item.quantity;
    }, 0);
    this.total_cost = this.items.reduce(function (amount, item) {
      return amount + (item.total_cost || 0);
    }, 0);
    this.charge_code = data.charge_code || '';
    this.status = data["".concat(this.event_id, "_status")] || data.status || 'accepted';
    this.invoice_number = data.invoice_number || '';
    this.event = data.event || null;
    this.notes = data.notes || '';
    this.deliver_time = data.deliver_time || undefined;
    this.deliver_offset = data.deliver_offset || 0;
    this.deliver_day_offset = data.deliver_day_offset || 0;
    this.deliver_at_time = deliverAtTime(this);
  }
  return _createClass(CateringOrder, [{
    key: "deliver_at",
    get: function get() {
      return deliverAtTime(this);
    }
  }, {
    key: "status",
    get: function get() {
      return this._status;
    },
    set: function set(value) {
      this._status = value;
      this["".concat(this.event_id, "_status")] = value;
    }
  }]);
}();
exports.CateringOrder = CateringOrder;

/***/ }),

/***/ 98197:
/*!**********************************************************!*\
  !*** ./libs/catering/src/lib/catering-orders.service.ts ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _regeneratorRuntime = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/regeneratorRuntime.js */ 8698)["default"]);
var _toConsumableArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/toConsumableArray.js */ 86033)["default"]);
var _asyncToGenerator = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/asyncToGenerator.js */ 95386)["default"]);
var _objectSpread = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/objectSpread2.js */ 34092)["default"]);
var _slicedToArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/slicedToArray.js */ 6282)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _callSuper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/callSuper.js */ 8513)["default"]);
var _inherits = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/inherits.js */ 58160)["default"]);
var _CateringOrdersService;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.CateringOrdersService = void 0;
var rxjs_1 = __webpack_require__(/*! rxjs */ 15681);
var operators_1 = __webpack_require__(/*! rxjs/operators */ 97303);
var date_fns_1 = __webpack_require__(/*! date-fns */ 25773);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var events_fn_1 = __webpack_require__(/*! libs/events/src/lib/events.fn */ 51416);
var event_class_1 = __webpack_require__(/*! libs/events/src/lib/event.class */ 6727);
var catering_order_class_1 = __webpack_require__(/*! ./catering-order.class */ 75555);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
function checkOrder(order, filters) {
  var s = (filters.search || '').toLowerCase();
  return !!order.items.find(function (item) {
    return item.name.toLowerCase().includes(s) || !!item.options.find(function (option) {
      return option.name.toLowerCase().includes(s);
    });
  });
}
var CateringOrdersService = /*#__PURE__*/function (_common_1$AsyncHandle) {
  function CateringOrdersService() {
    var _this;
    _classCallCheck(this, CateringOrdersService);
    _this = _callSuper(this, CateringOrdersService);
    _this._poll = new rxjs_1.BehaviorSubject(0);
    _this._loading = new rxjs_1.BehaviorSubject(false);
    _this._filters = new rxjs_1.BehaviorSubject({});
    /** Observable for list of orders */
    _this.orders = (0, rxjs_1.combineLatest)([_this._filters, _this._poll]).pipe((0, operators_1.debounceTime)(1000), (0, operators_1.switchMap)(function (_ref) {
      var _ref2 = _slicedToArray(_ref, 1),
        _ref2$ = _ref2[0],
        date = _ref2$.date,
        zones = _ref2$.zones;
      _this._loading.next(true);
      var start = (0, date_fns_1.getUnixTime)((0, date_fns_1.startOfDay)(date || Date.now()));
      var end = (0, date_fns_1.getUnixTime)((0, date_fns_1.endOfDay)(date || Date.now()));
      return (0, events_fn_1.queryEvents)({
        zone_ids: (zones || []).join(','),
        period_start: start,
        period_end: end
      }).pipe((0, operators_1.catchError)(function () {
        return (0, rxjs_1.of)([]);
      }), (0, operators_1.map)(function (events) {
        return (0, common_1.flatten)(events.map(function (event) {
          return event.valid_catering.map(function (o) {
            return new catering_order_class_1.CateringOrder(_objectSpread(_objectSpread({}, o), {}, {
              event: event
            }));
          });
        }));
      }), (0, operators_1.map)(function (orders) {
        return orders.filter(function (o) {
          return (0, date_fns_1.format)(o.deliver_at, 'yyyy-MM-dd') === (0, date_fns_1.format)(start * 1000, 'yyyy-MM-dd');
        });
      }));
    }), (0, operators_1.tap)(function () {
      return _this._loading.next(false);
    }), (0, operators_1.shareReplay)(1));
    /** Observable for loading status of orders */
    _this.loading = _this._loading.asObservable();
    /** Filtered list of catering orders */
    _this.filtered = _this.orders.pipe((0, operators_1.map)(function (list) {
      return list.filter(function (order) {
        return checkOrder(order, _this._filters.getValue());
      }).sort(function (a, b) {
        return a.deliver_at - b.deliver_at;
      });
    }));
    _this.subscription('changes', _this.orders.subscribe());
    return _this;
  }
  /** Start polling for catering orders */
  _inherits(CateringOrdersService, _common_1$AsyncHandle);
  return _createClass(CateringOrdersService, [{
    key: "filters",
    get: /** Order filters */
    function get() {
      return this._filters.getValue();
    }
    /** Order filters */,
    set: function set(filters) {
      this._filters.next(filters);
    }
  }, {
    key: "startPolling",
    value: function startPolling() {
      var _this2 = this;
      var delay = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 15 * 1000;
      this.interval('polling', function () {
        return _this2._poll.next(new Date().valueOf());
      }, delay);
    }
    /** Stop polling for new catering orders */
  }, {
    key: "stopPolling",
    value: function stopPolling() {
      this.clearInterval('polling');
    }
    /**
     * Update the status of the order
     * @param order Order to update
     * @param status New order status
     */
  }, {
    key: "updateStatus",
    value: (function () {
      var _updateStatus = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(order, status) {
        var _event$resources$,
          _event$system,
          _this3 = this;
        var updated_order, catering, event, system_id, booking;
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              order.status = status;
              updated_order = new catering_order_class_1.CateringOrder(_objectSpread(_objectSpread({}, order), {}, {
                status: status,
                event: null
              }));
              catering = [].concat(_toConsumableArray((order.event.extension_data.catering || []).filter(function (o) {
                return o.id !== order.id;
              })), [updated_order]).map(function (i) {
                return new catering_order_class_1.CateringOrder(_objectSpread({}, i));
              });
              event = new event_class_1.CalendarEvent(_objectSpread(_objectSpread({}, order.event), {}, {
                catering: catering
              }));
              system_id = (event === null || event === void 0 || (_event$resources$ = event.resources[0]) === null || _event$resources$ === void 0 ? void 0 : _event$resources$.id) || (event === null || event === void 0 || (_event$system = event.system) === null || _event$system === void 0 ? void 0 : _event$system.id);
              _context.next = 7;
              return (0, events_fn_1.updateEventMetadata)(event.id, system_id, event.extension_data).toPromise();
            case 7:
              booking = _context.sent;
              this.timeout('refresh-list', function () {
                return _this3._poll.next(Date.now());
              }, 1000);
              order.status = status;
              return _context.abrupt("return", booking);
            case 11:
            case "end":
              return _context.stop();
          }
        }, _callee, this);
      }));
      function updateStatus(_x, _x2) {
        return _updateStatus.apply(this, arguments);
      }
      return updateStatus;
    }())
  }]);
}(common_1.AsyncHandler);
_CateringOrdersService = CateringOrdersService;
_CateringOrdersService.ɵfac = function CateringOrdersService_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _CateringOrdersService)();
};
_CateringOrdersService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({
  token: _CateringOrdersService,
  factory: _CateringOrdersService.ɵfac,
  providedIn: 'root'
});
exports.CateringOrdersService = CateringOrdersService;

/***/ }),

/***/ 52201:
/*!*********************************************************!*\
  !*** ./libs/catering/src/lib/catering-state.service.ts ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _objectSpread = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/objectSpread2.js */ 34092)["default"]);
var _toConsumableArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/toConsumableArray.js */ 86033)["default"]);
var _regeneratorRuntime = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/regeneratorRuntime.js */ 8698)["default"]);
var _asyncToGenerator = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/asyncToGenerator.js */ 95386)["default"]);
var _slicedToArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/slicedToArray.js */ 6282)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _callSuper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/callSuper.js */ 8513)["default"]);
var _inherits = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/inherits.js */ 58160)["default"]);
var _CateringStateService;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.CateringStateService = void 0;
var dialog_1 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var ts_client_1 = __webpack_require__(/*! @placeos/ts-client */ 35713);
var rxjs_1 = __webpack_require__(/*! rxjs */ 15681);
var operators_1 = __webpack_require__(/*! rxjs/operators */ 97303);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var organisation_1 = __webpack_require__(/*! @placeos/organisation */ 2510);
var catering_item_modal_component_1 = __webpack_require__(/*! ./catering-item-modal.component */ 30807);
var catering_option_modal_component_1 = __webpack_require__(/*! ./catering-option-modal.component */ 37053);
var components_1 = __webpack_require__(/*! @placeos/components */ 51588);
var catering_item_class_1 = __webpack_require__(/*! ./catering-item.class */ 25892);
var catering_order_class_1 = __webpack_require__(/*! ./catering-order.class */ 75555);
var catering_order_modal_component_1 = __webpack_require__(/*! ./catering-order-modal.component */ 82912);
var catering_order_options_modal_component_1 = __webpack_require__(/*! ./catering-order-options-modal.component */ 17707);
var catering_import_menu_modal_component_1 = __webpack_require__(/*! ./catering-import-menu-modal.component */ 76095);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @placeos/organisation */ 2510);
var i2 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var i3 = __webpack_require__(/*! @placeos/common */ 22797);
var CateringStateService = /*#__PURE__*/function (_common_1$AsyncHandle) {
  function CateringStateService(_org, _dialog, _settings) {
    var _this;
    _classCallCheck(this, CateringStateService);
    _this = _callSuper(this, CateringStateService);
    _this._org = _org;
    _this._dialog = _dialog;
    _this._settings = _settings;
    _this._updated = new rxjs_1.BehaviorSubject(0);
    /** Active menu */
    _this._menu = new rxjs_1.BehaviorSubject([]);
    /** Whether the menu for the active building is loading */
    _this._loading = new rxjs_1.BehaviorSubject(false);
    /** Currency code for the active building */
    _this._currency = new rxjs_1.BehaviorSubject('USD');
    _this._change = new rxjs_1.BehaviorSubject(0);
    /** Observable for the active menu */
    _this.menu = _this._menu.asObservable();
    /** Observable for whether the menu for the active building is loadingg */
    _this.loading = _this._loading.asObservable();
    /** Observable for the currency code of the active building */
    _this.currency = _this._currency.asObservable();
    _this.settings = (0, rxjs_1.combineLatest)([_this._org.active_building, _this._change]).pipe((0, operators_1.filter)(function (_ref) {
      var _ref2 = _slicedToArray(_ref, 1),
        _ = _ref2[0];
      return !!_;
    }), (0, operators_1.switchMap)(function (_ref3) {
      var _ref4 = _slicedToArray(_ref3, 1),
        _ = _ref4[0];
      return (0, ts_client_1.showMetadata)(_.id, 'catering-settings').pipe((0, operators_1.catchError)(function (_) {
        return (0, rxjs_1.of)({});
      }));
    }), (0, operators_1.map)(function (_) {
      return _.details || {};
    }), (0, operators_1.tap)(function (_) {
      return _this._settings.post('require_catering_notes', !!(_ !== null && _ !== void 0 && _.require_notes));
    }), (0, operators_1.shareReplay)(1));
    _this.charge_codes = _this.settings.pipe((0, operators_1.map)(function (_) {
      return _.charge_codes || [];
    }));
    _this.availability = _this.settings.pipe((0, operators_1.map)(function (_) {
      return _.disabled_rooms || [];
    }));
    _this.zone = '';
    _this.subscription('building', _this._org.active_building.subscribe( /*#__PURE__*/function () {
      var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(bld) {
        var menu;
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              if (!bld) {
                _context.next = 6;
                break;
              }
              _context.next = 3;
              return _this.getCateringForZone(bld.id);
            case 3:
              menu = _context.sent.map(function (i) {
                return new catering_item_class_1.CateringItem(i);
              });
              _this._currency.next(_this._settings.get('app.currency') || bld.currency || 'USD');
              _this._menu.next(menu);
            case 6:
            case "end":
              return _context.stop();
          }
        }, _callee);
      }));
      return function (_x) {
        return _ref5.apply(this, arguments);
      };
    }()));
    return _this;
  }
  /**
   * Create/Edit catering order
   * @param order Order to manipulate
   */
  _inherits(CateringStateService, _common_1$AsyncHandle);
  return _createClass(CateringStateService, [{
    key: "is_editable",
    get: function get() {
      var _this$_org$building;
      return !this.zone || this.zone === ((_this$_org$building = this._org.building) === null || _this$_org$building === void 0 ? void 0 : _this$_org$building.id);
    }
  }, {
    key: "categories",
    get: function get() {
      var menu = this._menu.getValue();
      return (0, common_1.unique)(menu.map(function (i) {
        return i.category;
      }));
    }
  }, {
    key: "manageCateringOrder",
    value: (function () {
      var _manageCateringOrder = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(order) {
        var _this2 = this,
          _details$metadata;
        var ref, details;
        return _regeneratorRuntime().wrap(function _callee2$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              ref = this._dialog.open(catering_order_modal_component_1.CateringOrderModalComponent, {
                data: {
                  code: this._currency.getValue(),
                  order: order,
                  menu: this.menu,
                  loading: this.loading,
                  getCateringConfig: function getCateringConfig(_) {
                    return _this2.getCateringConfig(_);
                  },
                  selectOptions: function selectOptions(_) {
                    return _this2.selectOptions(_);
                  }
                }
              });
              _context2.next = 3;
              return Promise.race([ref.componentInstance.event.pipe((0, operators_1.first)(function (_) {
                return _.reason === 'done';
              })).toPromise(), ref.afterClosed().toPromise()]);
            case 3:
              details = _context2.sent;
              ref.close();
              return _context2.abrupt("return", (details === null || details === void 0 || (_details$metadata = details.metadata) === null || _details$metadata === void 0 ? void 0 : _details$metadata.order) || order);
            case 6:
            case "end":
              return _context2.stop();
          }
        }, _callee2, this);
      }));
      function manageCateringOrder(_x2) {
        return _manageCateringOrder.apply(this, arguments);
      }
      return manageCateringOrder;
    }())
  }, {
    key: "addItem",
    value: function () {
      var _addItem = _asyncToGenerator(function () {
        var _this3 = this;
        var item = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : new catering_item_class_1.CateringItem();
        return /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {
          var ref, details, menu, index;
          return _regeneratorRuntime().wrap(function _callee3$(_context3) {
            while (1) switch (_context3.prev = _context3.next) {
              case 0:
                ref = _this3._dialog.open(catering_item_modal_component_1.CateringItemModalComponent, {
                  data: {
                    item: item,
                    categories: _this3.categories
                  }
                });
                _context3.next = 3;
                return Promise.race([ref.componentInstance.event.pipe((0, operators_1.first)(function (_) {
                  return _.reason === 'done';
                })).toPromise(), ref.afterClosed().toPromise()]);
              case 3:
                details = _context3.sent;
                if (!((details === null || details === void 0 ? void 0 : details.reason) !== 'done')) {
                  _context3.next = 6;
                  break;
                }
                return _context3.abrupt("return");
              case 6:
                menu = _this3._menu.getValue();
                index = menu.findIndex(function (itm) {
                  return itm.id === item.id;
                });
                if (index >= 0) {
                  menu.splice(index, 1, details.metadata.item);
                } else {
                  menu.push(details.metadata.item);
                }
                _this3.updateMenu(_this3._org.building.id, menu).then(function () {
                  _this3._menu.next(_toConsumableArray(menu));
                  ref.close();
                }, function () {
                  return ref.componentInstance.loading = false;
                });
              case 10:
              case "end":
                return _context3.stop();
            }
          }, _callee3);
        })();
      });
      function addItem() {
        return _addItem.apply(this, arguments);
      }
      return addItem;
    }()
  }, {
    key: "updateItem",
    value: function updateItem(item) {
      var _this4 = this;
      var menu = this._menu.getValue();
      var index = menu.findIndex(function (itm) {
        return itm.id === item.id;
      });
      if (index >= 0) menu.splice(index, 1, item);else menu.push(item);
      this.updateMenu(this._org.building.id, menu).then(function () {
        return _this4._menu.next(_toConsumableArray(menu));
      });
    }
  }, {
    key: "addOption",
    value: function () {
      var _addOption = _asyncToGenerator(function (item) {
        var _this5 = this;
        var option = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
        return /*#__PURE__*/_regeneratorRuntime().mark(function _callee4() {
          var types, ref, details, menu, index;
          return _regeneratorRuntime().wrap(function _callee4$(_context4) {
            while (1) switch (_context4.prev = _context4.next) {
              case 0:
                types = (0, common_1.unique)(item.options.map(function (i) {
                  return i.group;
                }));
                ref = _this5._dialog.open(catering_option_modal_component_1.CateringItemOptionModalComponent, {
                  data: {
                    parent: item,
                    option: option,
                    types: types
                  }
                });
                _context4.next = 4;
                return Promise.race([ref.componentInstance.event.pipe((0, operators_1.first)(function (_) {
                  return _.reason === 'done';
                })).toPromise(), ref.afterClosed().toPromise()]);
              case 4:
                details = _context4.sent;
                if (!((details === null || details === void 0 ? void 0 : details.reason) !== 'done')) {
                  _context4.next = 7;
                  break;
                }
                return _context4.abrupt("return");
              case 7:
                menu = _this5._menu.getValue();
                index = menu.findIndex(function (itm) {
                  return itm.id === item.id;
                });
                if (index >= 0) {
                  menu.splice(index, 1, details.metadata.item);
                } else {
                  menu.push(details.metadata.item);
                }
                _this5.updateMenu(_this5._org.building.id, menu).then(function () {
                  _this5._menu.next(_toConsumableArray(menu));
                  ref.close();
                }, function () {
                  return ref.componentInstance.loading = false;
                });
              case 11:
              case "end":
                return _context4.stop();
            }
          }, _callee4);
        })();
      });
      function addOption(_x3) {
        return _addOption.apply(this, arguments);
      }
      return addOption;
    }()
  }, {
    key: "selectOptions",
    value: function () {
      var _selectOptions = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee5(options) {
        var ref, details;
        return _regeneratorRuntime().wrap(function _callee5$(_context5) {
          while (1) switch (_context5.prev = _context5.next) {
            case 0:
              ref = this._dialog.open(catering_order_options_modal_component_1.CateringOrderOptionsModalComponent, {
                data: {
                  code: this._currency.getValue(),
                  options: options
                }
              });
              _context5.next = 3;
              return Promise.race([ref.componentInstance.event.pipe((0, operators_1.first)(function (_) {
                return _.reason === 'done';
              })).toPromise(), ref.afterClosed().toPromise()]);
            case 3:
              details = _context5.sent;
              if (!((details === null || details === void 0 ? void 0 : details.reason) !== 'done')) {
                _context5.next = 6;
                break;
              }
              return _context5.abrupt("return", []);
            case 6:
              ref.close();
              return _context5.abrupt("return", details.metadata.options);
            case 8:
            case "end":
              return _context5.stop();
          }
        }, _callee5, this);
      }));
      function selectOptions(_x4) {
        return _selectOptions.apply(this, arguments);
      }
      return selectOptions;
    }()
  }, {
    key: "deleteItem",
    value: function () {
      var _deleteItem = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee6(item) {
        var _this6 = this;
        var details, menu;
        return _regeneratorRuntime().wrap(function _callee6$(_context6) {
          while (1) switch (_context6.prev = _context6.next) {
            case 0:
              _context6.next = 2;
              return (0, common_1.openConfirmModal)({
                title: 'Delete Catering Item',
                content: "Are you sure you wish to remove the catering item ".concat(item.name, " from the menu?"),
                icon: {
                  type: 'icon',
                  "class": 'material-icons',
                  content: 'delete'
                }
              }, this._dialog);
            case 2:
              details = _context6.sent;
              if (!(details.reason !== 'done')) {
                _context6.next = 5;
                break;
              }
              return _context6.abrupt("return");
            case 5:
              details.loading('Removing catering item...');
              menu = this._menu.getValue().filter(function (itm) {
                return item.id !== itm.id;
              });
              this.updateMenu(this._org.building.id, menu).then(function () {
                _this6._menu.next(_toConsumableArray(menu));
                details.close();
              }, function () {
                return details.loading('');
              });
            case 8:
            case "end":
              return _context6.stop();
          }
        }, _callee6, this);
      }));
      function deleteItem(_x5) {
        return _deleteItem.apply(this, arguments);
      }
      return deleteItem;
    }()
  }, {
    key: "deleteOption",
    value: function () {
      var _deleteOption = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee7(item, option) {
        var _this7 = this;
        var details, menu;
        return _regeneratorRuntime().wrap(function _callee7$(_context7) {
          while (1) switch (_context7.prev = _context7.next) {
            case 0:
              _context7.next = 2;
              return (0, common_1.openConfirmModal)({
                title: 'Delete Catering Item Option',
                content: "Are you sure you wish to remove the catering option \"".concat(option.name, "\" from \"").concat(item.name, "\"?"),
                icon: {
                  type: 'icon',
                  "class": 'material-icons',
                  content: 'delete'
                }
              }, this._dialog);
            case 2:
              details = _context7.sent;
              if (!(details.reason !== 'done')) {
                _context7.next = 5;
                break;
              }
              return _context7.abrupt("return");
            case 5:
              details.loading('Removing catering item option...');
              menu = this._menu.getValue();
              menu.splice(menu.findIndex(function (itm) {
                return itm.id === item.id;
              }), 1, new catering_item_class_1.CateringItem(_objectSpread(_objectSpread({}, item), {}, {
                options: item.options.filter(function (opt) {
                  return opt.id !== option.id;
                })
              })));
              this.updateMenu(this._org.building.id, menu).then(function () {
                _this7._menu.next(_toConsumableArray(menu));
                details.close();
              }, function () {
                return details.loading('');
              });
            case 9:
            case "end":
              return _context7.stop();
          }
        }, _callee7, this);
      }));
      function deleteOption(_x6, _x7) {
        return _deleteOption.apply(this, arguments);
      }
      return deleteOption;
    }()
  }, {
    key: "editConfig",
    value: function () {
      var _editConfig = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee8() {
        var _this8 = this;
        var config, _yield$this$settings$, require_notes, menu, types, ref, details;
        return _regeneratorRuntime().wrap(function _callee8$(_context8) {
          while (1) switch (_context8.prev = _context8.next) {
            case 0:
              _context8.next = 2;
              return this.getCateringConfig(this._org.building.id);
            case 2:
              config = _context8.sent;
              _context8.next = 5;
              return this.settings.pipe((0, operators_1.take)(1)).toPromise();
            case 5:
              _yield$this$settings$ = _context8.sent;
              require_notes = _yield$this$settings$.require_notes;
              menu = this._menu.getValue();
              types = (0, common_1.unique)((0, common_1.flatten)(menu.map(function (i) {
                return [i.category].concat(_toConsumableArray(i.tags));
              })));
              ref = this._dialog.open(components_1.AttachedResourceConfigModalComponent, {
                data: {
                  config: config,
                  types: types,
                  require_notes: require_notes,
                  saveNotes: function saveNotes(b) {
                    return _this8.saveSettings({
                      require_notes: b
                    });
                  }
                }
              });
              _context8.next = 12;
              return Promise.race([ref.componentInstance.event.pipe((0, operators_1.first)(function (_) {
                return _.reason === 'done';
              })).toPromise(), ref.afterClosed().toPromise()]);
            case 12:
              details = _context8.sent;
              if (!((details === null || details === void 0 ? void 0 : details.reason) !== 'done')) {
                _context8.next = 15;
                break;
              }
              return _context8.abrupt("return");
            case 15:
              this.updateConfig(this._org.building.id, details.metadata).then(function () {
                return ref.close();
              }, function () {
                return ref.componentInstance.loading = false;
              });
            case 16:
            case "end":
              return _context8.stop();
          }
        }, _callee8, this);
      }));
      function editConfig() {
        return _editConfig.apply(this, arguments);
      }
      return editConfig;
    }()
  }, {
    key: "importMenu",
    value: function () {
      var _importMenu = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee9() {
        var ref, details, menu, bld, updated_menu;
        return _regeneratorRuntime().wrap(function _callee9$(_context9) {
          while (1) switch (_context9.prev = _context9.next) {
            case 0:
              ref = this._dialog.open(catering_import_menu_modal_component_1.CateringImportMenuModalComponent);
              _context9.next = 3;
              return Promise.race([ref.componentInstance.event.pipe((0, operators_1.first)(function (_) {
                return _.reason === 'done';
              })).toPromise(), ref.afterClosed().toPromise()]);
            case 3:
              details = _context9.sent;
              if (!((details === null || details === void 0 ? void 0 : details.reason) !== 'done')) {
                _context9.next = 6;
                break;
              }
              return _context9.abrupt("return");
            case 6:
              ref.componentInstance.loading = 'Updating menu...';
              menu = this._menu.getValue();
              bld = this._org.building;
              updated_menu = (0, common_1.unique)(details.metadata.concat(menu), 'id');
              _context9.next = 12;
              return this.updateMenu(bld.id, updated_menu)["catch"](function (_) {
                (0, common_1.notifyError)('Error importing catering menu');
                ref.close();
                throw _;
              });
            case 12:
              (0, common_1.notifySuccess)("Successfully imported catering menu. ".concat(details.metadata.length, " item(s) added."));
              ref.close();
            case 14:
            case "end":
              return _context9.stop();
          }
        }, _callee9, this);
      }));
      function importMenu() {
        return _importMenu.apply(this, arguments);
      }
      return importMenu;
    }()
  }, {
    key: "updateMenu",
    value: function updateMenu(zone_id, menu) {
      return (0, ts_client_1.updateMetadata)(zone_id, {
        id: zone_id,
        name: 'catering',
        details: menu,
        description: "Catering menu for ".concat(zone_id)
      }).toPromise();
    }
  }, {
    key: "saveSettings",
    value: function () {
      var _saveSettings = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee10(settings) {
        var old_settings, result;
        return _regeneratorRuntime().wrap(function _callee10$(_context10) {
          while (1) switch (_context10.prev = _context10.next) {
            case 0:
              _context10.next = 2;
              return this.settings.pipe((0, operators_1.take)(1)).toPromise();
            case 2:
              old_settings = _context10.sent;
              _context10.next = 5;
              return (0, ts_client_1.updateMetadata)(this._org.building.id, {
                id: this._org.building.id,
                name: 'catering-settings',
                details: _objectSpread(_objectSpread({}, old_settings), settings),
                description: "Catering settings for ".concat(this._org.building.id)
              }).toPromise();
            case 5:
              result = _context10.sent;
              this._change.next(Date.now());
              return _context10.abrupt("return", result);
            case 8:
            case "end":
              return _context10.stop();
          }
        }, _callee10, this);
      }));
      function saveSettings(_x8) {
        return _saveSettings.apply(this, arguments);
      }
      return saveSettings;
    }()
  }, {
    key: "getCateringForZone",
    value: function () {
      var _getCateringForZone = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee11(zone_id) {
        var menu;
        return _regeneratorRuntime().wrap(function _callee11$(_context11) {
          while (1) switch (_context11.prev = _context11.next) {
            case 0:
              _context11.next = 2;
              return (0, ts_client_1.showMetadata)(zone_id, 'catering').toPromise();
            case 2:
              menu = _context11.sent.details;
              return _context11.abrupt("return", menu instanceof Array ? menu : []);
            case 4:
            case "end":
              return _context11.stop();
          }
        }, _callee11);
      }));
      function getCateringForZone(_x9) {
        return _getCateringForZone.apply(this, arguments);
      }
      return getCateringForZone;
    }()
  }, {
    key: "getCateringConfig",
    value: function () {
      var _getCateringConfig = _asyncToGenerator(function () {
        var zone_id = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this._org.building.id;
        return /*#__PURE__*/_regeneratorRuntime().mark(function _callee12() {
          var rules;
          return _regeneratorRuntime().wrap(function _callee12$(_context12) {
            while (1) switch (_context12.prev = _context12.next) {
              case 0:
                _context12.next = 2;
                return (0, ts_client_1.showMetadata)(zone_id, 'catering_config').toPromise();
              case 2:
                rules = _context12.sent.details;
                return _context12.abrupt("return", rules instanceof Array ? rules : []);
              case 4:
              case "end":
                return _context12.stop();
            }
          }, _callee12);
        })();
      });
      function getCateringConfig() {
        return _getCateringConfig.apply(this, arguments);
      }
      return getCateringConfig;
    }()
  }, {
    key: "updateConfig",
    value: function updateConfig(zone_id, config) {
      return (0, ts_client_1.updateMetadata)(zone_id, {
        id: zone_id,
        name: 'catering_config',
        details: config,
        description: "Catering menu config for ".concat(zone_id)
      }).toPromise();
    }
  }, {
    key: "addItemToOrder",
    value: function addItemToOrder(order, new_item) {
      var items = order.items;
      var match = items.find(function (item) {
        var _new_item$options, _item$options;
        return item.id === new_item.id && ((_new_item$options = new_item.options) === null || _new_item$options === void 0 ? void 0 : _new_item$options.length) === ((_item$options = item.options) === null || _item$options === void 0 ? void 0 : _item$options.reduce(function (c, o) {
          return c + (new_item.options.find(function (opt) {
            return o.id === opt.id;
          }) ? 1 : 0);
        }, 0));
      });
      match ? match.quantity += 1 : items = items.concat([new catering_item_class_1.CateringItem(_objectSpread(_objectSpread({}, new_item), {}, {
        quantity: 1
      }))]);
      var new_order = new catering_order_class_1.CateringOrder(_objectSpread(_objectSpread({}, order), {}, {
        items: items,
        event: null
      }));
      return new_order;
    }
  }]);
}(common_1.AsyncHandler);
_CateringStateService = CateringStateService;
_CateringStateService.ɵfac = function CateringStateService_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _CateringStateService)(i0.ɵɵinject(i1.OrganisationService), i0.ɵɵinject(i2.MatDialog), i0.ɵɵinject(i3.SettingsService));
};
_CateringStateService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({
  token: _CateringStateService,
  factory: _CateringStateService.ɵfac,
  providedIn: 'root'
});
exports.CateringStateService = CateringStateService;

/***/ }),

/***/ 19172:
/*!******************************************************!*\
  !*** ./libs/catering/src/lib/catering.interfaces.ts ***!
  \******************************************************/
/***/ ((__unused_webpack_module, exports) => {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));

/***/ }),

/***/ 7872:
/*!**************************************************!*\
  !*** ./libs/catering/src/lib/catering.module.ts ***!
  \**************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _SharedCateringModule;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.SharedCateringModule = void 0;
var common_1 = __webpack_require__(/*! @angular/common */ 60316);
var core_1 = __webpack_require__(/*! @angular/core */ 37580);
var forms_1 = __webpack_require__(/*! @angular/forms */ 34456);
var autocomplete_1 = __webpack_require__(/*! @angular/material/autocomplete */ 79771);
var checkbox_1 = __webpack_require__(/*! @angular/material/checkbox */ 97024);
var dialog_1 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var menu_1 = __webpack_require__(/*! @angular/material/menu */ 31034);
var tabs_1 = __webpack_require__(/*! @angular/material/tabs */ 38223);
var radio_1 = __webpack_require__(/*! @angular/material/radio */ 53804);
var tooltip_1 = __webpack_require__(/*! @angular/material/tooltip */ 80640);
var form_field_1 = __webpack_require__(/*! @angular/material/form-field */ 24950);
var progress_spinner_1 = __webpack_require__(/*! @angular/material/progress-spinner */ 41134);
var progress_bar_1 = __webpack_require__(/*! @angular/material/progress-bar */ 26354);
var form_fields_1 = __webpack_require__(/*! @placeos/form-fields */ 63046);
var components_module_1 = __webpack_require__(/*! libs/components/src/lib/components.module */ 14974);
var catering_item_modal_component_1 = __webpack_require__(/*! ./catering-item-modal.component */ 30807);
var catering_menu_component_1 = __webpack_require__(/*! ./catering-menu.component */ 48519);
var catering_option_modal_component_1 = __webpack_require__(/*! ./catering-option-modal.component */ 37053);
var catering_order_item_component_1 = __webpack_require__(/*! ./catering-order-item.component */ 3872);
var catering_order_list_component_1 = __webpack_require__(/*! ./catering-order-list.component */ 41623);
var catering_order_modal_component_1 = __webpack_require__(/*! ./catering-order-modal.component */ 82912);
var catering_order_options_modal_component_1 = __webpack_require__(/*! ./catering-order-options-modal.component */ 17707);
var catering_import_menu_modal_component_1 = __webpack_require__(/*! ./catering-import-menu-modal.component */ 76095);
var new_catering_order_modal_component_1 = __webpack_require__(/*! ./catering-order-modal/new-catering-order-modal.component */ 11732);
var catering_item_list_component_1 = __webpack_require__(/*! ./catering-order-modal/catering-item-list.component */ 32499);
var catering_item_details_component_1 = __webpack_require__(/*! ./catering-order-modal/catering-item-details.component */ 90699);
var catering_item_filters_component_1 = __webpack_require__(/*! ./catering-order-modal/catering-item-filters.component */ 26386);
var catering_list_field_component_1 = __webpack_require__(/*! ./catering-list-field.component */ 61601);
var charge_code_list_modal_component_1 = __webpack_require__(/*! ./charge-code-list-modal.component */ 96861);
var catering_item_list_item_component_1 = __webpack_require__(/*! ./catering-order-modal/catering-item-list-item.component */ 89505);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var COMPONENTS = [catering_order_options_modal_component_1.CateringOrderOptionsModalComponent, catering_order_modal_component_1.CateringOrderModalComponent, catering_item_modal_component_1.CateringItemModalComponent, catering_menu_component_1.CateringMenuComponent, catering_option_modal_component_1.CateringItemOptionModalComponent, catering_order_list_component_1.CateringOrderListComponent, catering_order_item_component_1.CateringOrderItemComponent, catering_import_menu_modal_component_1.CateringImportMenuModalComponent, catering_list_field_component_1.CateringListFieldComponent, new_catering_order_modal_component_1.NewCateringOrderModalComponent, catering_item_list_component_1.CateringItemListComponent, catering_item_details_component_1.CateringItemDetailsComponent, catering_item_filters_component_1.CateringItemFiltersComponent, catering_item_list_item_component_1.CateringItemListItemComponent, charge_code_list_modal_component_1.ChargeCodeListModalComponent];
var SharedCateringModule = /*#__PURE__*/_createClass(function SharedCateringModule() {
  _classCallCheck(this, SharedCateringModule);
});
_SharedCateringModule = SharedCateringModule;
_SharedCateringModule.ɵfac = function SharedCateringModule_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _SharedCateringModule)();
};
_SharedCateringModule.ɵmod = /*@__PURE__*/i0.ɵɵdefineNgModule({
  type: _SharedCateringModule
});
_SharedCateringModule.ɵinj = /*@__PURE__*/i0.ɵɵdefineInjector({
  imports: [common_1.CommonModule, menu_1.MatMenuModule, tabs_1.MatTabsModule, autocomplete_1.MatAutocompleteModule, dialog_1.MatDialogModule, checkbox_1.MatCheckboxModule, radio_1.MatRadioModule, tooltip_1.MatTooltipModule, forms_1.FormsModule, forms_1.ReactiveFormsModule, components_module_1.ComponentsModule, form_field_1.MatFormFieldModule, form_fields_1.FormFieldsModule, progress_spinner_1.MatProgressSpinnerModule, progress_bar_1.MatProgressBarModule]
});
exports.SharedCateringModule = SharedCateringModule;
(function () {
  (typeof ngJitMode === "undefined" || ngJitMode) && i0.ɵɵsetNgModuleScope(SharedCateringModule, {
    declarations: [catering_order_options_modal_component_1.CateringOrderOptionsModalComponent, catering_order_modal_component_1.CateringOrderModalComponent, catering_item_modal_component_1.CateringItemModalComponent, catering_menu_component_1.CateringMenuComponent, catering_option_modal_component_1.CateringItemOptionModalComponent, catering_order_list_component_1.CateringOrderListComponent, catering_order_item_component_1.CateringOrderItemComponent, catering_import_menu_modal_component_1.CateringImportMenuModalComponent, catering_list_field_component_1.CateringListFieldComponent, new_catering_order_modal_component_1.NewCateringOrderModalComponent, catering_item_list_component_1.CateringItemListComponent, catering_item_details_component_1.CateringItemDetailsComponent, catering_item_filters_component_1.CateringItemFiltersComponent, catering_item_list_item_component_1.CateringItemListItemComponent, charge_code_list_modal_component_1.ChargeCodeListModalComponent],
    imports: [common_1.CommonModule, menu_1.MatMenuModule, tabs_1.MatTabsModule, autocomplete_1.MatAutocompleteModule, dialog_1.MatDialogModule, checkbox_1.MatCheckboxModule, radio_1.MatRadioModule, tooltip_1.MatTooltipModule, forms_1.FormsModule, forms_1.ReactiveFormsModule, components_module_1.ComponentsModule, form_field_1.MatFormFieldModule, form_fields_1.FormFieldsModule, progress_spinner_1.MatProgressSpinnerModule, progress_bar_1.MatProgressBarModule],
    exports: [catering_order_options_modal_component_1.CateringOrderOptionsModalComponent, catering_order_modal_component_1.CateringOrderModalComponent, catering_item_modal_component_1.CateringItemModalComponent, catering_menu_component_1.CateringMenuComponent, catering_option_modal_component_1.CateringItemOptionModalComponent, catering_order_list_component_1.CateringOrderListComponent, catering_order_item_component_1.CateringOrderItemComponent, catering_import_menu_modal_component_1.CateringImportMenuModalComponent, catering_list_field_component_1.CateringListFieldComponent, new_catering_order_modal_component_1.NewCateringOrderModalComponent, catering_item_list_component_1.CateringItemListComponent, catering_item_details_component_1.CateringItemDetailsComponent, catering_item_filters_component_1.CateringItemFiltersComponent, catering_item_list_item_component_1.CateringItemListItemComponent, charge_code_list_modal_component_1.ChargeCodeListModalComponent]
  });
})();

/***/ }),

/***/ 95196:
/*!*******************************************!*\
  !*** ./libs/catering/src/lib/catering.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var tslib_1 = __webpack_require__(/*! tslib */ 24398);
tslib_1.__exportStar(__webpack_require__(/*! ./catering-order-options-modal.component */ 17707), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./catering-order-modal.component */ 82912), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./catering-item-modal.component */ 30807), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./catering-item.class */ 25892), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./catering-menu.component */ 48519), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./catering-option-modal.component */ 37053), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./catering-order-item.component */ 3872), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./catering-order-list.component */ 41623), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./catering-order.class */ 75555), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./catering-orders.service */ 98197), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./catering-state.service */ 52201), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./catering.interfaces */ 19172), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./catering.module */ 7872), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./catering.vars */ 91074), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./catering-order-modal/new-catering-order-modal.component */ 11732), exports);

/***/ }),

/***/ 91074:
/*!************************************************!*\
  !*** ./libs/catering/src/lib/catering.vars.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, exports) => {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.CATERING_STATUSES = void 0;
exports.CATERING_STATUSES = [{
  id: 'pending',
  name: 'Pending',
  icon: {
    "class": 'custom-pending'
  },
  colour: '#ccc'
}, {
  id: 'accepted',
  name: 'Accepted',
  icon: {
    "class": 'custom-accepted'
  },
  colour: '#3996B6'
}, {
  id: 'preparing',
  name: 'Preparing',
  icon: {
    "class": 'custom-preparing'
  },
  colour: '#E7536B'
}, {
  id: 'ready',
  name: 'Ready',
  icon: {
    "class": 'custom-ready'
  },
  colour: '#FFD028'
}, {
  id: 'delivered',
  name: 'Delivered',
  icon: {
    "class": 'custom-delivered'
  },
  colour: '#75BB43'
}, {
  id: 'cancelled',
  name: 'Cancelled',
  icon: {
    "class": 'custom-cancelled'
  },
  colour: '#747474'
}];

/***/ }),

/***/ 96861:
/*!*******************************************************************!*\
  !*** ./libs/catering/src/lib/charge-code-list-modal.component.ts ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _createForOfIteratorHelper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createForOfIteratorHelper.js */ 36350)["default"]);
var _regeneratorRuntime = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/regeneratorRuntime.js */ 8698)["default"]);
var _asyncToGenerator = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/asyncToGenerator.js */ 95386)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _ChargeCodeListModalComponent;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.ChargeCodeListModalComponent = void 0;
var dialog_1 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var operators_1 = __webpack_require__(/*! rxjs/operators */ 97303);
var catering_state_service_1 = __webpack_require__(/*! ./catering-state.service */ 52201);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! ./catering-state.service */ 52201);
var i2 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var i3 = __webpack_require__(/*! @angular/common */ 60316);
var i4 = __webpack_require__(/*! @angular/forms */ 34456);
var i5 = __webpack_require__(/*! ../../../components/src/lib/icon.component */ 69434);
var i6 = __webpack_require__(/*! @angular/material/form-field */ 24950);
var i7 = __webpack_require__(/*! @angular/material/core */ 74646);
var i8 = __webpack_require__(/*! @angular/material/input */ 95541);
var i9 = __webpack_require__(/*! @angular/material/progress-spinner */ 41134);
function ChargeCodeListModalComponent_main_6_div_1_Template(rf, ctx) {
  if (rf & 1) {
    var _r1 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 6)(1, "mat-form-field", 7)(2, "input", 8);
    i0.ɵɵtwoWayListener("ngModelChange", function ChargeCodeListModalComponent_main_6_div_1_Template_input_ngModelChange_2_listener($event) {
      var i_r2 = i0.ɵɵrestoreView(_r1).index;
      var ctx_r2 = i0.ɵɵnextContext(2);
      i0.ɵɵtwoWayBindingSet(ctx_r2.charge_codes[i_r2], $event) || (ctx_r2.charge_codes[i_r2] = $event);
      return i0.ɵɵresetView($event);
    });
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(3, "button", 9);
    i0.ɵɵlistener("click", function ChargeCodeListModalComponent_main_6_div_1_Template_button_click_3_listener() {
      var i_r2 = i0.ɵɵrestoreView(_r1).index;
      var ctx_r2 = i0.ɵɵnextContext(2);
      return i0.ɵɵresetView(ctx_r2.removeCode(i_r2));
    });
    i0.ɵɵelementStart(4, "app-icon");
    i0.ɵɵtext(5, "delete");
    i0.ɵɵelementEnd()()();
  }
  if (rf & 2) {
    var i_r2 = ctx.index;
    var ctx_r2 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance(2);
    i0.ɵɵtwoWayProperty("ngModel", ctx_r2.charge_codes[i_r2]);
  }
}
function ChargeCodeListModalComponent_main_6_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "main", 4);
    i0.ɵɵtemplate(1, ChargeCodeListModalComponent_main_6_div_1_Template, 6, 1, "div", 5);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r2 = i0.ɵɵnextContext();
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngForOf", ctx_r2.charge_codes)("ngForTrackBy", ctx_r2.trackByFn);
  }
}
function ChargeCodeListModalComponent_footer_7_Template(rf, ctx) {
  if (rf & 1) {
    var _r4 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "footer", 10)(1, "button", 11);
    i0.ɵɵtext(2, " Import Codes ");
    i0.ɵɵelementStart(3, "input", 12);
    i0.ɵɵlistener("change", function ChargeCodeListModalComponent_footer_7_Template_input_change_3_listener($event) {
      i0.ɵɵrestoreView(_r4);
      var ctx_r2 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r2.addCodesFromFile($event));
    });
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(4, "button", 13);
    i0.ɵɵlistener("click", function ChargeCodeListModalComponent_footer_7_Template_button_click_4_listener() {
      i0.ɵɵrestoreView(_r4);
      var ctx_r2 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r2.newCode());
    });
    i0.ɵɵtext(5, " Add Code ");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(6, "button", 13);
    i0.ɵɵlistener("click", function ChargeCodeListModalComponent_footer_7_Template_button_click_6_listener() {
      i0.ɵɵrestoreView(_r4);
      var ctx_r2 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r2.saveChargeCodes());
    });
    i0.ɵɵtext(7, " Save Changes ");
    i0.ɵɵelementEnd()();
  }
}
function ChargeCodeListModalComponent_ng_template_8_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "main", 14);
    i0.ɵɵelement(1, "mat-spinner", 15);
    i0.ɵɵelementStart(2, "p");
    i0.ɵɵtext(3, "Saving changes to charge codes...");
    i0.ɵɵelementEnd()();
  }
}
var ChargeCodeListModalComponent = /*#__PURE__*/function () {
  function ChargeCodeListModalComponent(_state, _dialog_ref) {
    _classCallCheck(this, ChargeCodeListModalComponent);
    this._state = _state;
    this._dialog_ref = _dialog_ref;
    this.charge_codes = [];
    this.loading = false;
  }
  return _createClass(ChargeCodeListModalComponent, [{
    key: "ngOnInit",
    value: function () {
      var _ngOnInit = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              _context.next = 2;
              return this._state.charge_codes.pipe((0, operators_1.take)(1)).toPromise();
            case 2:
              _context.t0 = _context.sent;
              if (_context.t0) {
                _context.next = 5;
                break;
              }
              _context.t0 = [];
            case 5:
              this.charge_codes = _context.t0;
            case 6:
            case "end":
              return _context.stop();
          }
        }, _callee, this);
      }));
      function ngOnInit() {
        return _ngOnInit.apply(this, arguments);
      }
      return ngOnInit;
    }()
  }, {
    key: "newCode",
    value: function newCode() {
      this.charge_codes.push('');
    }
  }, {
    key: "removeCode",
    value: function removeCode(index) {
      this.charge_codes.splice(index, 1);
    }
    /**
     * Load CSV file and populate the code list with the contents
     * @param event File input field event
     */
  }, {
    key: "addCodesFromFile",
    value: function addCodesFromFile(event) {
      var _this = this;
      /* istanbul ignore else */
      if (event.target) {
        var file = event.target.files[0];
        /* istanbul ignore else */
        if (file) {
          var reader = new FileReader();
          reader.readAsText(file, 'UTF-8');
          reader.addEventListener('load', function (evt) {
            var list = (0, common_1.csvToJson)(evt.srcElement.result) || [];
            var _iterator = _createForOfIteratorHelper(list),
              _step;
            try {
              for (_iterator.s(); !(_step = _iterator.n()).done;) {
                var _step$value = _step.value,
                  code = _step$value.code,
                  description = _step$value.description;
                _this.charge_codes.push(code);
              }
            } catch (err) {
              _iterator.e(err);
            } finally {
              _iterator.f();
            }
            _this.charge_codes = (0, common_1.unique)(_this.charge_codes);
            event.target.value = '';
          });
          reader.addEventListener('error', function (_) {
            return (0, common_1.notifyError)('Error reading file.');
          });
        }
      }
    }
  }, {
    key: "saveChargeCodes",
    value: function () {
      var _saveChargeCodes = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {
        var cleaned_codes;
        return _regeneratorRuntime().wrap(function _callee2$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              this.loading = true;
              cleaned_codes = this.charge_codes.filter(function (_) {
                return _ && _.trim();
              });
              _context2.next = 4;
              return this._state.saveSettings({
                charge_codes: cleaned_codes
              });
            case 4:
              this._dialog_ref.close();
            case 5:
            case "end":
              return _context2.stop();
          }
        }, _callee2, this);
      }));
      function saveChargeCodes() {
        return _saveChargeCodes.apply(this, arguments);
      }
      return saveChargeCodes;
    }()
  }, {
    key: "trackByFn",
    value: function trackByFn(idx, item) {
      return idx;
    }
  }]);
}();
_ChargeCodeListModalComponent = ChargeCodeListModalComponent;
_ChargeCodeListModalComponent.ɵfac = function ChargeCodeListModalComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _ChargeCodeListModalComponent)(i0.ɵɵdirectiveInject(i1.CateringStateService), i0.ɵɵdirectiveInject(i2.MatDialogRef));
};
_ChargeCodeListModalComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _ChargeCodeListModalComponent,
  selectors: [["charge-code-list-modal"]],
  decls: 10,
  vars: 3,
  consts: [["load_state", ""], ["icon", "", "mat-dialog-close", ""], ["class", "overflow-auto max-h-[65vh] min-h-[20rem] flex flex-col", 4, "ngIf", "ngIfElse"], ["class", "flex items-center p-2 space-x-2 border-t border-base-200", 4, "ngIf"], [1, "overflow-auto", "max-h-[65vh]", "min-h-[20rem]", "flex", "flex-col"], ["class", "flex items-center space-x-2 w-full hover:bg-neutral px-2", 4, "ngFor", "ngForOf", "ngForTrackBy"], [1, "flex", "items-center", "space-x-2", "w-full", "hover:bg-neutral", "px-2"], ["appearance", "outline", 1, "h-14", "flex-1"], ["matInput", "", "placeholder", "Charge Code", 3, "ngModelChange", "ngModel"], ["icon", "", 3, "click"], [1, "flex", "items-center", "p-2", "space-x-2", "border-t", "border-base-200"], ["btn", "", "matRipple", "", 1, "w-48", "inverse", "relative"], ["type", "file", 1, "opacity-0", "absolute", "inset-0", 3, "change"], ["btn", "", "matRipple", "", 1, "w-48", 3, "click"], [1, "flex", "flex-col", "items-center", "justify-center", "p-20", "space-y-2"], ["diameter", "32"]],
  template: function ChargeCodeListModalComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵelementStart(0, "header")(1, "h2");
      i0.ɵɵtext(2, "Edit Charge Codes");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(3, "button", 1)(4, "app-icon");
      i0.ɵɵtext(5, "close");
      i0.ɵɵelementEnd()()();
      i0.ɵɵtemplate(6, ChargeCodeListModalComponent_main_6_Template, 2, 2, "main", 2)(7, ChargeCodeListModalComponent_footer_7_Template, 8, 0, "footer", 3)(8, ChargeCodeListModalComponent_ng_template_8_Template, 4, 0, "ng-template", null, 0, i0.ɵɵtemplateRefExtractor);
    }
    if (rf & 2) {
      var load_state_r5 = i0.ɵɵreference(9);
      i0.ɵɵadvance(6);
      i0.ɵɵproperty("ngIf", !ctx.loading)("ngIfElse", load_state_r5);
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", !ctx.loading);
    }
  },
  dependencies: [i3.NgForOf, i3.NgIf, i2.MatDialogClose, i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgModel, i5.IconComponent, i6.MatFormField, i7.MatRipple, i8.MatInput, i9.MatProgressSpinner]
});
exports.ChargeCodeListModalComponent = ChargeCodeListModalComponent;

/***/ }),

/***/ 60285:
/*!********************************************!*\
  !*** ./libs/catering/src/lib/utilities.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _createForOfIteratorHelper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createForOfIteratorHelper.js */ 36350)["default"]);
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.getCateringRulesForZone = getCateringRulesForZone;
exports.cateringItemAvailable = cateringItemAvailable;
var date_fns_1 = __webpack_require__(/*! date-fns */ 25773);
var rxjs_1 = __webpack_require__(/*! rxjs */ 15681);
var ts_client_1 = __webpack_require__(/*! @placeos/ts-client */ 35713);
var operators_1 = __webpack_require__(/*! rxjs/operators */ 97303);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var RULE_REQUESTS = {};
function getCateringRulesForZone(zone_id) {
  var fresh = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;
  if (!zone_id) return (0, rxjs_1.of)([]);
  if (!RULE_REQUESTS[zone_id] || fresh) RULE_REQUESTS[zone_id] = (0, ts_client_1.showMetadata)(zone_id, 'catering_config').pipe((0, operators_1.map)(function (_) {
    return _.details instanceof Array ? _.details : [];
  }), (0, operators_1.catchError)(function (e) {
    return (0, rxjs_1.of)([]);
  }));
  return RULE_REQUESTS[zone_id];
}
function cateringItemAvailable(item, rules, event) {
  var is_available = true;
  var _iterator = _createForOfIteratorHelper(rules),
    _step;
  try {
    var _loop = function _loop() {
      var _event$space;
      var rule = _step.value;
      if (item.category === rule.name || item.tags.includes(rule.name) || event.resources.find(function (_) {
        return _.zones.includes(rule.name);
      }) || (_event$space = event.space) !== null && _event$space !== void 0 && _event$space.zones.includes(rule.name) || rule.name === '*') {
        var matches = 0;
        var _iterator2 = _createForOfIteratorHelper(rule.rules),
          _step2;
        try {
          for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
            var condition = _step2.value;
            var date = new Date(event.date);
            switch (condition[0]) {
              case 'is_before':
                matches += (0, date_fns_1.isBefore)(Date.now(), (0, date_fns_1.subHours)(date, condition[1])) ? 1 : 0;
                break;
              case 'within_hours':
                matches += (0, date_fns_1.isAfter)(Date.now(), (0, date_fns_1.subHours)(date, condition[1])) ? 1 : 0;
                break;
              case 'after_hour':
                matches += (0, date_fns_1.isAfter)(date, (0, date_fns_1.setHours)(date, condition[1])) ? 1 : 0;
                break;
              case 'before_hour':
                matches += (0, date_fns_1.isBefore)(date, (0, date_fns_1.setHours)(date, condition[1])) ? 1 : 0;
                break;
              case 'min_length':
                matches += event.duration >= (0, common_1.stringToMinutes)(condition[1]) ? 1 : 0;
                break;
              case 'max_length':
                matches += event.duration <= (0, common_1.stringToMinutes)(condition[1]) ? 1 : 0;
                break;
              case 'visitor_type':
                matches += event.ext('visitor_type') === condition[1] ? 1 : 0;
                break;
              default:
                matches += 1;
            }
          }
        } catch (err) {
          _iterator2.e(err);
        } finally {
          _iterator2.f();
        }
        is_available = matches >= rule.rules.length;
      }
    };
    for (_iterator.s(); !(_step = _iterator.n()).done;) {
      _loop();
    }
  } catch (err) {
    _iterator.e(err);
  } finally {
    _iterator.f();
  }
  return is_available;
}

/***/ }),

/***/ 22797:
/*!**********************************!*\
  !*** ./libs/common/src/index.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var tslib_1 = __webpack_require__(/*! tslib */ 24398);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/common */ 39248), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/uploads */ 83615), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/feature-available.guard */ 3422), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/remote-logging.service */ 686), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/timezone-helpers */ 35774), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/user-idle-time.service */ 5430), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/booking-rules */ 10380), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/keep-alive.service */ 52369), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/uploads.service */ 55746), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/shorten.fn */ 1284), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/fixed-device-helpers */ 74894), exports);

/***/ }),

/***/ 96159:
/*!***************************************************!*\
  !*** ./libs/common/src/lib/angular-animations.ts ***!
  \***************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.ANIMATION_SHOW_CONTRACT_EXPAND = exports.ANIMATION_SHOW_ENTER_LEAVE = void 0;
var animations_1 = __webpack_require__(/*! @angular/animations */ 47172);
exports.ANIMATION_SHOW_ENTER_LEAVE = (0, animations_1.trigger)('show', [(0, animations_1.transition)(':enter', [(0, animations_1.style)({
  opacity: 0,
  height: 0
}), (0, animations_1.animate)(300, (0, animations_1.style)({
  opacity: 1,
  height: '*'
}))]), (0, animations_1.transition)(':leave', [(0, animations_1.style)({
  opacity: 1,
  height: '*'
}), (0, animations_1.animate)(300, (0, animations_1.style)({
  opacity: 0,
  height: 0
}))])]);
exports.ANIMATION_SHOW_CONTRACT_EXPAND = (0, animations_1.trigger)('show', [(0, animations_1.state)('show', (0, animations_1.style)({
  opacity: 1,
  height: '*'
})), (0, animations_1.state)('hide', (0, animations_1.style)({
  opacity: 0,
  height: 0,
  'pointer-events': 'none'
})), (0, animations_1.transition)('show <=> hide', (0, animations_1.animate)('200ms ease-in'))]);

/***/ }),

/***/ 38385:
/*!************************************!*\
  !*** ./libs/common/src/lib/api.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, exports) => {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.toQueryString = toQueryString;
var IGNORE_VALUES = [undefined, null, ''];
/**
 * Convert map into a query string
 * @param map Key value pairs to convert
 */
function toQueryString(map) {
  var str = '';
  if (map) {
    for (var key in map) {
      if (key in map && !IGNORE_VALUES.includes(map[key])) {
        str += "".concat(str ? '&' : '').concat(key, "=").concat(encodeURIComponent(map[key]));
      }
    }
  }
  return str;
}

/***/ }),

/***/ 60375:
/*!********************************************!*\
  !*** ./libs/common/src/lib/application.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _regeneratorRuntime = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/regeneratorRuntime.js */ 8698)["default"]);
var _asyncToGenerator = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/asyncToGenerator.js */ 95386)["default"]);
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.hasNewVersion = hasNewVersion;
exports.setupCache = setupCache;
exports.clearCacheCheck = clearCacheCheck;
var general_1 = __webpack_require__(/*! ./general */ 64217);
var notifications_1 = __webpack_require__(/*! ./notifications */ 39525);
var _timer;
var _new_version = false;
function hasNewVersion() {
  return _new_version;
}
/**
 * Setup handler for cache change events
 * @param cache Angular Service worker service
 * @param notify Function to call on changes to the cache
 * @param interval Time interval to check the cache for changes
 */
function setupCache(cache) {
  var interval = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 5 * 60 * 1000;
  if (cache.isEnabled) {
    if (_timer) clearInterval(_timer);
    _timer = setInterval(function () {
      (0, general_1.log)('CACHE', "Checking for updates...");
      activateUpdate(cache);
    }, interval);
  }
}
function clearCacheCheck() {
  if (_timer) clearInterval(_timer);
}
/**
 * Update the cache and reload the page
 *
 */
function activateUpdate(_x) {
  return _activateUpdate.apply(this, arguments);
}
function _activateUpdate() {
  _activateUpdate = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(cache) {
    return _regeneratorRuntime().wrap(function _callee$(_context) {
      while (1) switch (_context.prev = _context.next) {
        case 0:
          _context.t0 = cache.isEnabled;
          if (!_context.t0) {
            _context.next = 5;
            break;
          }
          _context.next = 4;
          return cache.checkForUpdate();
        case 4:
          _context.t0 = _context.sent;
        case 5:
          if (!_context.t0) {
            _context.next = 13;
            break;
          }
          (0, general_1.log)('CACHE', "Activating changes to the cache...");
          _context.next = 9;
          return cache.activateUpdate();
        case 9:
          if (_context.sent) {
            _context.next = 11;
            break;
          }
          return _context.abrupt("return");
        case 11:
          _new_version = true;
          (0, notifications_1.notifyInfo)('Newer version of the application is available', 'Refresh', function () {
            return location.reload();
          });
        case 13:
        case "end":
          return _context.stop();
      }
    }, _callee);
  }));
  return _activateUpdate.apply(this, arguments);
}

/***/ }),

/***/ 75354:
/*!****************************************************!*\
  !*** ./libs/common/src/lib/async-handler.class.ts ***!
  \****************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _createForOfIteratorHelper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createForOfIteratorHelper.js */ 36350)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _AsyncHandler;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.AsyncHandler = void 0;
var rxjs_1 = __webpack_require__(/*! rxjs */ 15681);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
/**
 * Class for handling cleanup of async methods when components are destroyed.
 * Async methods include Subscriptions, Timeouts and Intervals
 */
var AsyncHandler = /*#__PURE__*/function () {
  function AsyncHandler() {
    _classCallCheck(this, AsyncHandler);
    /** Store for named timers */
    this._timers = {};
    /** Store for named intervals */
    this._intervals = {};
    /** Store for named subscription unsub callbacks */
    this._subscriptions = {};
    /** Subject which stores the initialised state of the object */
    this._initialised = new rxjs_1.BehaviorSubject(false);
    /** Observable of the initialised state of the object */
    this.initialised = this._initialised.asObservable();
  }
  /** Whether the object has been initialised */
  return _createClass(AsyncHandler, [{
    key: "is_initialised",
    get: function get() {
      return this._initialised.getValue();
    }
  }, {
    key: "ngOnDestroy",
    value: function ngOnDestroy() {
      this.destroy();
    }
  }, {
    key: "destroy",
    value: function destroy() {
      for (var key in this._timers) {
        if (key in this._timers) {
          this.clearTimeout(key);
        }
      }
      for (var _key in this._intervals) {
        if (_key in this._intervals) {
          this.clearInterval(_key);
        }
      }
      for (var _key2 in this._subscriptions) {
        if (_key2 in this._subscriptions) {
          this.unsub(_key2);
        }
      }
    }
    /**
     * Creates a named timer
     * @param name Name of the timer
     * @param fn Callback function for the timer
     * @param delay Callback delay
     */
  }, {
    key: "timeout",
    value: function timeout(name, fn) {
      var _this = this;
      var delay = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 300;
      if (name && fn && fn instanceof Function) {
        this.clearTimeout(name);
        this._timers[name] = setTimeout(function () {
          fn();
          delete _this._timers[name];
        }, delay);
      } else {
        throw new Error(name ? 'Cannot create named timeout without a name' : 'Cannot create a timeout without a callback');
      }
    }
    /**
     * Clears the named timer
     * @param name Timer name
     */
  }, {
    key: "clearTimeout",
    value: function (_clearTimeout) {
      function clearTimeout(_x) {
        return _clearTimeout.apply(this, arguments);
      }
      clearTimeout.toString = function () {
        return _clearTimeout.toString();
      };
      return clearTimeout;
    }(function (name) {
      if (this._timers[name]) {
        clearTimeout(this._timers[name]);
        delete this._timers[name];
      }
    }
    /**
     * Creates a named interval
     * @param name Name of the interval
     * @param fn Callback function for the interval
     * @param delay Callback delay
     */)
  }, {
    key: "interval",
    value: function interval(name, fn) {
      var delay = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 300;
      if (name && fn && fn instanceof Function) {
        this.clearInterval(name);
        this._intervals[name] = setInterval(function () {
          return fn();
        }, delay);
      } else {
        throw new Error(name ? 'Cannot create named interval without a name' : 'Cannot create a interval without a callback');
      }
    }
    /**
     * Clears the named interval
     * @param name Timer name
     */
  }, {
    key: "clearInterval",
    value: function (_clearInterval) {
      function clearInterval(_x2) {
        return _clearInterval.apply(this, arguments);
      }
      clearInterval.toString = function () {
        return _clearInterval.toString();
      };
      return clearInterval;
    }(function (name) {
      if (this._intervals[name]) {
        clearInterval(this._intervals[name]);
        delete this._intervals[name];
      }
    }
    /**
     * Store named subscription
     * @param name Name of the subscription
     * @param unsub Unsubscribe callback or Subscription object
     */)
  }, {
    key: "subscription",
    value: function subscription(name, unsub) {
      this.unsub(name);
      this._subscriptions[name] = unsub;
    }
  }, {
    key: "hasSubscription",
    value: function hasSubscription(name) {
      return this._subscriptions[name] instanceof rxjs_1.Subscription || !!this._subscriptions[name];
    }
    /**
     * Call unsubscribe callback with the given name
     * @param name
     */
  }, {
    key: "unsub",
    value: function unsub(name) {
      if (name in this._subscriptions) {
        if (this._subscriptions[name] instanceof rxjs_1.Subscription) {
          this._subscriptions[name].unsubscribe();
        } else if (this._subscriptions[name]) {
          this._subscriptions[name]();
        }
        delete this._subscriptions[name];
      }
    }
    /** Unsubscribe to the items with names containing the given string */
  }, {
    key: "unsubWith",
    value: function unsubWith(contains) {
      var subs = Object.keys(this._subscriptions).filter(function (k) {
        return k.includes(contains);
      });
      var _iterator = _createForOfIteratorHelper(subs),
        _step;
      try {
        for (_iterator.s(); !(_step = _iterator.n()).done;) {
          var key = _step.value;
          this.unsub(key);
        }
      } catch (err) {
        _iterator.e(err);
      } finally {
        _iterator.f();
      }
    }
  }]);
}();
_AsyncHandler = AsyncHandler;
_AsyncHandler.ɵfac = function AsyncHandler_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _AsyncHandler)();
};
_AsyncHandler.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({
  token: _AsyncHandler,
  factory: _AsyncHandler.ɵfac,
  providedIn: 'root'
});
exports.AsyncHandler = AsyncHandler;

/***/ }),

/***/ 10380:
/*!**********************************************!*\
  !*** ./libs/common/src/lib/booking-rules.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _createForOfIteratorHelper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createForOfIteratorHelper.js */ 36350)["default"]);
var _objectSpread = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/objectSpread2.js */ 34092)["default"]);
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.stringToMinutes = stringToMinutes;
exports.addToDate = addToDate;
exports.filterResourcesFromRules = filterResourcesFromRules;
exports.rulesForResource = rulesForResource;
exports.checkRulesMatch = checkRulesMatch;
var date_fns_1 = __webpack_require__(/*! date-fns */ 25773);
var MINUTE = 1;
var HOUR = 60;
var DAY = 24 * HOUR;
var WEEK = 7 * DAY;
var MONTH = 30 * DAY;
var DURATION_MAP = {
  month: MONTH,
  months: MONTH,
  week: WEEK,
  weeks: WEEK,
  day: DAY,
  days: DAY,
  hour: HOUR,
  hours: HOUR,
  minute: MINUTE,
  minutes: MINUTE
};
var DEFAULT_RULES = {
  auto_approve: true,
  hidden: false
};
/**
 * Conver time string into minutes
 * @param str timestring e.g. `'1 day'`, `'15 minutes'`, `'2 weeks'`
 */
function stringToMinutes(str) {
  var parts = (str || '').split(' ');
  return parts.length > 1 ? +parts[0] * DURATION_MAP[parts[1].toLowerCase()] : 0;
}
function addToDate(add) {
  var date = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : new Date();
  return (0, date_fns_1.addMinutes)(date, stringToMinutes(add));
}
function filterResourcesFromRules(resources, details, ruleset_list) {
  return resources.filter(function (_) {
    var _rulesForResource;
    return !((_rulesForResource = rulesForResource(_objectSpread(_objectSpread({}, details), {}, {
      resource: _
    }), ruleset_list)) !== null && _rulesForResource !== void 0 && _rulesForResource.hidden);
  });
}
function rulesForResource(details, ruleset_list) {
  if (!(ruleset_list instanceof Array)) return DEFAULT_RULES;
  var _iterator = _createForOfIteratorHelper(ruleset_list),
    _step;
  try {
    for (_iterator.s(); !(_step = _iterator.n()).done;) {
      var _details$resource$zon, _details$resource$zon2;
      var ruleset = _step.value;
      if (ruleset.zone === '*' || ruleset.zone === ((_details$resource$zon = details.resource.zone) === null || _details$resource$zon === void 0 ? void 0 : _details$resource$zon.id) || (_details$resource$zon2 = details.resource.zones) !== null && _details$resource$zon2 !== void 0 && _details$resource$zon2.includes(ruleset.zone)) {
        if (checkRulesMatch(details, ruleset)) {
          // console.log(
          //     'Matched Ruleset:',
          //     details.resource.id,
          //     details,
          //     ruleset
          // );
          return ruleset.rules;
        }
      }
    }
    // console.log(
    //     'No Matched Ruleset:',
    //     details.resource.id,
    //     details,
    //     DEFAULT_RULES
    // );
  } catch (err) {
    _iterator.e(err);
  } finally {
    _iterator.f();
  }
  return DEFAULT_RULES;
}
function checkRulesMatch(_ref, ruleset) {
  var date = _ref.date,
    duration = _ref.duration,
    host = _ref.host,
    resource = _ref.resource;
  var date_obj = new Date(date);
  var matches = 0;
  var conditions = ruleset.conditions;
  if (!conditions) return true;
  if (conditions.groups instanceof Array && conditions.groups.every(function (_) {
    var _host$groups;
    return host === null || host === void 0 || (_host$groups = host.groups) === null || _host$groups === void 0 ? void 0 : _host$groups.includes(_);
  })) matches += 1;
  if (conditions.is_before && (0, date_fns_1.isBefore)((0, date_fns_1.addMinutes)(date, duration), addToDate(conditions.is_before))) matches += 1;
  if (conditions.is_after && (0, date_fns_1.isAfter)(date, addToDate(conditions.is_after))) matches += 1;
  if (conditions.min_length && conditions.min_length <= duration) matches += 1;
  if (conditions.is_between && date_obj.getHours() + date_obj.getMinutes() / 60 >= conditions.is_between[0] && date_obj.getHours() + date_obj.getMinutes() / 60 < conditions.is_between[1]) matches += 1;
  if (conditions.is_period && date >= conditions.is_period[0] && date < conditions.is_period[1]) matches += 1;
  if (conditions.max_length && conditions.max_length >= duration) matches += 1;
  if (conditions.resource_ids && conditions.resource_ids.includes(resource.id)) matches += 1;
  if (conditions.locations && conditions.locations.includes(resource.name)) matches += 1;
  return matches >= Object.keys(conditions).length;
}

/***/ }),

/***/ 44571:
/*!***********************************************!*\
  !*** ./libs/common/src/lib/calendar-links.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _toConsumableArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/toConsumableArray.js */ 86033)["default"]);
var _slicedToArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/slicedToArray.js */ 6282)["default"]);
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.generateCalendarFileLink = generateCalendarFileLink;
exports.generateGoogleCalendarLink = generateGoogleCalendarLink;
exports.generateMicrosoftCalendarLink = generateMicrosoftCalendarLink;
var date_fns_1 = __webpack_require__(/*! date-fns */ 25773);
var api_1 = __webpack_require__(/*! ./api */ 38385);
var timezone_helpers_1 = __webpack_require__(/*! ./timezone-helpers */ 35774);
var general_1 = __webpack_require__(/*! ./general */ 64217);
function formatUTC(date) {
  var utc_date = (0, timezone_helpers_1.localToTimezone)(date, 'UTC');
  return "".concat((0, date_fns_1.format)(utc_date, 'yyyyMMdd'), "T").concat((0, date_fns_1.format)(utc_date, 'HHmmss'), "Z");
}
function formatAllDay(date) {
  return "".concat((0, date_fns_1.format)(date, 'yyyyMMdd'));
}
function generateCalendarFileLink(event) {
  var _event$duration, _event$organiser, _event$host;
  var chunks = [];
  var description = formatCalFileText("".concat(event.body || '').concat(event.id ? '\n\n[ID|' + event.id + ']' : ''));
  var location = formatCalFileText("".concat(event.location));
  chunks.push(['BEGIN', 'VCALENDAR']);
  chunks.push(['VERSION', '2.0']);
  chunks.push(['BEGIN', 'VEVENT']);
  chunks.push(['URL', "".concat(event.meeting_url)]);
  chunks.push(['DTSTART', "".concat(new Date(event.all_day ? (0, date_fns_1.startOfMinute)((0, date_fns_1.set)(event.date, {
    hours: 6,
    minutes: 0
  })) : event.date).toISOString())]);
  chunks.push(['DTEND', "".concat(event.all_day ? (0, date_fns_1.startOfMinute)((0, date_fns_1.set)(event.date, {
    hours: 18,
    minutes: 0
  })).toISOString() : (0, date_fns_1.addMinutes)(event.date, (_event$duration = event.duration) !== null && _event$duration !== void 0 ? _event$duration : 60).toISOString())]);
  chunks.push(['SUMMARY', "".concat(event.title)]);
  chunks.push(['DESCRIPTION', description]);
  chunks.push(['LOCATION', location]);
  var host = ((_event$organiser = event.organiser) === null || _event$organiser === void 0 ? void 0 : _event$organiser.name) || ((_event$host = event.host) === null || _event$host === void 0 ? void 0 : _event$host.split('@')) || event.user_name || 'User';
  chunks.push(['ORGANIZER', "CN=".concat(host, ":MAILTO:").concat(event.host || event.user_email)]);
  var url_data = chunks.map(function (_ref) {
    var _ref2 = _slicedToArray(_ref, 2),
      key = _ref2[0],
      value = _ref2[1];
    return "".concat(key, ":").concat(encodeURIComponent(value));
  }).join('\n');
  return "data:text/calendar;charset=utf8,".concat(url_data);
}
function generateGoogleCalendarLink(event) {
  var _event$duration2, _event$resources;
  var fmt = event.all_day ? formatAllDay : formatUTC;
  var details = {
    action: 'TEMPLATE',
    text: event.title,
    details: "".concat(event.body || '').concat(event.id ? '\n\n[ID|' + event.id + ']' : ''),
    location: event.location,
    trp: false,
    dates: "".concat(fmt(event.date), "/").concat(fmt((0, date_fns_1.addMinutes)(event.date, (_event$duration2 = event.duration) !== null && _event$duration2 !== void 0 ? _event$duration2 : 60)))
  };
  var emails = (event.attendees || []).map(function (_) {
    return _.email || _;
  });
  var resources = (((_event$resources = event.resources) !== null && _event$resources !== void 0 && _event$resources.length ? event.resources : null) || [event.system]).map(function (_) {
    return (_ === null || _ === void 0 ? void 0 : _.email) || _;
  });
  if (emails.length || resources.length) details.add = (0, general_1.unique)([].concat(_toConsumableArray(emails), _toConsumableArray(resources))).join();
  return "https://calendar.google.com/calendar/render?".concat((0, api_1.toQueryString)(details));
}
function generateMicrosoftCalendarLink(event) {
  var _event$duration3, _event$all_day, _event$resources2;
  var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'office';
  if (!event.date) event.date = Date.now();
  var data = {
    path: '/calendar/action/compose',
    rru: 'addevent',
    startdt: new Date(event.date).toISOString(),
    enddt: (0, date_fns_1.addMinutes)(event.date, (_event$duration3 = event.duration) !== null && _event$duration3 !== void 0 ? _event$duration3 : 60).toISOString(),
    subject: event.title,
    body: "".concat(event.body || '').concat(event.id ? '\n\n[ID|' + event.id + ']' : ''),
    location: event.location,
    allday: (_event$all_day = event.all_day) !== null && _event$all_day !== void 0 ? _event$all_day : false
  };
  if (event.all_day) delete data.enddt;
  var emails = (event.attendees || []).map(function (_) {
    return _.email || _;
  });
  var resources = (((_event$resources2 = event.resources) !== null && _event$resources2 !== void 0 && _event$resources2.length ? event.resources : null) || [event.system]).map(function (_) {
    return (_ === null || _ === void 0 ? void 0 : _.email) || _;
  });
  if (emails.length || resources.length) data.to = (0, general_1.unique)([].concat(_toConsumableArray(emails), _toConsumableArray(resources))).join();
  return type === 'office' ? "https://outlook.office.com/calendar/0/action/compose?".concat((0, api_1.toQueryString)(data)) : "https://outlook.live.com/calendar/0/action/compose?".concat((0, api_1.toQueryString)(data));
}
function formatCalFileText(str) {
  return str.replace(/,/gm, ',').replace(/;/gm, ';').replace(/\r\n/gm, '\n').replace(/\n/gm, '\\n').replace(/(\\n)[\s\t]+/gm, '\\n');
}

/***/ }),

/***/ 39248:
/*!***************************************!*\
  !*** ./libs/common/src/lib/common.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.MapsPeopleService = exports.VERSION = exports.VorlonService = exports.SettingsService = exports.HotkeysService = exports.GoogleAnalyticsService = exports.AsyncHandler = void 0;
var tslib_1 = __webpack_require__(/*! tslib */ 24398);
var async_handler_class_1 = __webpack_require__(/*! ./async-handler.class */ 75354);
Object.defineProperty(exports, "AsyncHandler", ({
  enumerable: true,
  get: function get() {
    return async_handler_class_1.AsyncHandler;
  }
}));
var google_analytics_service_1 = __webpack_require__(/*! ./google-analytics.service */ 83114);
Object.defineProperty(exports, "GoogleAnalyticsService", ({
  enumerable: true,
  get: function get() {
    return google_analytics_service_1.GoogleAnalyticsService;
  }
}));
var hotkeys_service_1 = __webpack_require__(/*! ./hotkeys.service */ 47643);
Object.defineProperty(exports, "HotkeysService", ({
  enumerable: true,
  get: function get() {
    return hotkeys_service_1.HotkeysService;
  }
}));
var settings_service_1 = __webpack_require__(/*! ./settings.service */ 14233);
Object.defineProperty(exports, "SettingsService", ({
  enumerable: true,
  get: function get() {
    return settings_service_1.SettingsService;
  }
}));
var vorlon_service_1 = __webpack_require__(/*! ./vorlon.service */ 94972);
Object.defineProperty(exports, "VorlonService", ({
  enumerable: true,
  get: function get() {
    return vorlon_service_1.VorlonService;
  }
}));
var version_1 = __webpack_require__(/*! ./version */ 93885);
Object.defineProperty(exports, "VERSION", ({
  enumerable: true,
  get: function get() {
    return version_1.VERSION;
  }
}));
var mapspeople_service_1 = __webpack_require__(/*! ./mapspeople.service */ 99420);
Object.defineProperty(exports, "MapsPeopleService", ({
  enumerable: true,
  get: function get() {
    return mapspeople_service_1.MapsPeopleService;
  }
}));
tslib_1.__exportStar(__webpack_require__(/*! ./angular-animations */ 96159), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./api */ 38385), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./application */ 60375), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./formatting */ 99042), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./general */ 64217), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./notifications */ 39525), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./placeos */ 71676), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./room-configuration.interface */ 5392), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./settings */ 43060), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./types */ 63464), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./user-state */ 37958), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./spec-helpers */ 22310), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./timezones */ 14369), exports);

/***/ }),

/***/ 3422:
/*!********************************************************!*\
  !*** ./libs/common/src/lib/feature-available.guard.ts ***!
  \********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _regeneratorRuntime = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/regeneratorRuntime.js */ 8698)["default"]);
var _asyncToGenerator = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/asyncToGenerator.js */ 95386)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _FeatureAvailableGuard;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.FeatureAvailableGuard = exports.PLACEOS_APP_ACCESS = void 0;
var router_1 = __webpack_require__(/*! @angular/router */ 95072);
var operators_1 = __webpack_require__(/*! rxjs/operators */ 97303);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var organisation_1 = __webpack_require__(/*! @placeos/organisation */ 2510);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @angular/router */ 95072);
var i2 = __webpack_require__(/*! @placeos/common */ 22797);
var i3 = __webpack_require__(/*! @placeos/organisation */ 2510);
var PLACEOS_APP_ACCESS = /*#__PURE__*/_createClass(function PLACEOS_APP_ACCESS() {
  _classCallCheck(this, PLACEOS_APP_ACCESS);
});
exports.PLACEOS_APP_ACCESS = PLACEOS_APP_ACCESS;
var FeatureAvailableGuard = /*#__PURE__*/function () {
  function FeatureAvailableGuard(_router, _settings, _org) {
    _classCallCheck(this, FeatureAvailableGuard);
    this._router = _router;
    this._settings = _settings;
    this._org = _org;
  }
  return _createClass(FeatureAvailableGuard, [{
    key: "canActivate",
    value: function () {
      var _canActivate = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              return _context.abrupt("return", this.checkFeature());
            case 1:
            case "end":
              return _context.stop();
          }
        }, _callee, this);
      }));
      function canActivate() {
        return _canActivate.apply(this, arguments);
      }
      return canActivate;
    }()
  }, {
    key: "canLoad",
    value: function () {
      var _canLoad = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {
        return _regeneratorRuntime().wrap(function _callee2$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              return _context2.abrupt("return", this.checkFeature());
            case 1:
            case "end":
              return _context2.stop();
          }
        }, _callee2, this);
      }));
      function canLoad() {
        return _canLoad.apply(this, arguments);
      }
      return canLoad;
    }()
  }, {
    key: "checkFeature",
    value: function () {
      var _checkFeature = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {
        var _this = this;
        var features, can_activate;
        return _regeneratorRuntime().wrap(function _callee3$(_context3) {
          while (1) switch (_context3.prev = _context3.next) {
            case 0:
              _context3.next = 2;
              return this._org.initialised.pipe((0, operators_1.first)(function (_) {
                return _;
              })).toPromise();
            case 2:
              _context3.next = 4;
              return this._settings.initialised.pipe((0, operators_1.first)(function (_) {
                return _;
              })).toPromise();
            case 4:
              features = this._settings.get('app.disabled_features') || [];
              can_activate = !features.find(function (_) {
                return _this._router.url.includes(_);
              });
              if (!can_activate) {
                this._router.navigate(['/']);
              }
              return _context3.abrupt("return", !!can_activate);
            case 8:
            case "end":
              return _context3.stop();
          }
        }, _callee3, this);
      }));
      function checkFeature() {
        return _checkFeature.apply(this, arguments);
      }
      return checkFeature;
    }()
  }]);
}();
_FeatureAvailableGuard = FeatureAvailableGuard;
_FeatureAvailableGuard.ɵfac = function FeatureAvailableGuard_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _FeatureAvailableGuard)(i0.ɵɵinject(i1.Router), i0.ɵɵinject(i2.SettingsService), i0.ɵɵinject(i3.OrganisationService));
};
_FeatureAvailableGuard.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({
  token: _FeatureAvailableGuard,
  factory: _FeatureAvailableGuard.ɵfac,
  providedIn: 'root'
});
exports.FeatureAvailableGuard = FeatureAvailableGuard;

/***/ }),

/***/ 74894:
/*!*****************************************************!*\
  !*** ./libs/common/src/lib/fixed-device-helpers.ts ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _regeneratorRuntime = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/regeneratorRuntime.js */ 8698)["default"]);
var _asyncToGenerator = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/asyncToGenerator.js */ 95386)["default"]);
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.requestScreenWakeLock = requestScreenWakeLock;
var _wake_lock = null;
function requestScreenWakeLock() {
  return _requestScreenWakeLock.apply(this, arguments);
}
function _requestScreenWakeLock() {
  _requestScreenWakeLock = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {
    return _regeneratorRuntime().wrap(function _callee2$(_context2) {
      while (1) switch (_context2.prev = _context2.next) {
        case 0:
          if (!_wake_lock) {
            _context2.next = 3;
            break;
          }
          _context2.next = 3;
          return _wake_lock.release();
        case 3:
          _context2.prev = 3;
          _context2.next = 6;
          return navigator.wakeLock.request('screen');
        case 6:
          _wake_lock = _context2.sent;
          _context2.next = 12;
          break;
        case 9:
          _context2.prev = 9;
          _context2.t0 = _context2["catch"](3);
          throw _context2.t0;
        case 12:
        case "end":
          return _context2.stop();
      }
    }, _callee2, null, [[3, 9]]);
  }));
  return _requestScreenWakeLock.apply(this, arguments);
}
document.addEventListener('visibilitychange', /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
  return _regeneratorRuntime().wrap(function _callee$(_context) {
    while (1) switch (_context.prev = _context.next) {
      case 0:
        if (!(_wake_lock !== null && document.visibilityState === 'visible')) {
          _context.next = 4;
          break;
        }
        _context.next = 3;
        return navigator.wakeLock.request('screen');
      case 3:
        _wake_lock = _context.sent;
      case 4:
      case "end":
        return _context.stop();
    }
  }, _callee);
})));

/***/ }),

/***/ 99042:
/*!*******************************************!*\
  !*** ./libs/common/src/lib/formatting.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.formatRecurrence = formatRecurrence;
var date_fns_1 = __webpack_require__(/*! date-fns */ 25773);
function formatRecurrence(details) {
  var pattern = details.pattern || '';
  pattern = pattern.charAt(0).toUpperCase() + pattern.slice(1);
  return pattern ? "".concat(pattern, " until ").concat((0, date_fns_1.format)(new Date(details.end), 'do MMM yyyy')) : '<No Recurrence>';
}

/***/ }),

/***/ 64217:
/*!****************************************!*\
  !*** ./libs/common/src/lib/general.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _regeneratorRuntime = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/regeneratorRuntime.js */ 8698)["default"]);
var _objectSpread = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/objectSpread2.js */ 34092)["default"]);
var _toConsumableArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/toConsumableArray.js */ 86033)["default"]);
var _asyncToGenerator = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/asyncToGenerator.js */ 95386)["default"]);
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.setAppName = setAppName;
exports.log = log;
exports.padLength = padLength;
exports.getItemWithKeys = getItemWithKeys;
exports.unique = unique;
exports.randomInt = randomInt;
exports.padString = padString;
exports.randomString = randomString;
exports.openConfirmModal = openConfirmModal;
exports.csvToJson = csvToJson;
exports.loadTextFileFromInputEvent = loadTextFileFromInputEvent;
exports.jsonToCsv = jsonToCsv;
exports.downloadFile = downloadFile;
exports.parseJWT = parseJWT;
exports.flatten = flatten;
exports.timePeriodsIntersect = timePeriodsIntersect;
exports.predictableRandomInt = predictableRandomInt;
exports.timeFormatString = timeFormatString;
exports.is24HourTime = is24HourTime;
exports.getInvalidFields = getInvalidFields;
exports.removeEmptyFields = removeEmptyFields;
exports.capitalizeFirstLetter = capitalizeFirstLetter;
exports.cleanArray = cleanArray;
exports.isMobileSafari = isMobileSafari;
exports.isNestedFrame = isNestedFrame;
exports.calculateDistance = calculateDistance;
exports.hexToRgb = hexToRgb;
exports.interpolateColors = interpolateColors;
exports.rgbToHex = rgbToHex;
exports.shiftColorTowards = shiftColorTowards;
exports.extractTextFromHTML = extractTextFromHTML;
exports.shuffleArray = shuffleArray;
exports.shuffleArrayWithFirstItem = shuffleArrayWithFirstItem;
var forms_1 = __webpack_require__(/*! @angular/forms */ 34456);
var operators_1 = __webpack_require__(/*! rxjs/operators */ 97303);
var confirm_modal_component_1 = __webpack_require__(/*! ../../../components/src/lib/confirm-modal.component */ 30841);
var _app_name = 'APP';
function setAppName(name) {
  _app_name = name;
}
/**
 * Log data to the browser console
 * @param type Type of message
 * @param msg Message body
 * @param args array of argments to log to the console
 * @param stream Stream to emit the console on. 'debug', 'log', 'warn' or 'error'
 * @param force Whether to force message to be emitted when debug is disabled
 */
function log(type, msg, args) {
  var stream = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 'debug';
  var force = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : false;
  var app_name = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : _app_name;
  if (window.jest) return;
  if (window.debug || force) {
    var colors = ['color: #E91E63', 'color: #3F51B5', 'color: default'];
    if (args) {
      var _console;
      (_console = console)[stream].apply(_console, ["%c[".concat(app_name, "]%c[").concat(type, "] %c").concat(msg)].concat(colors, [args]));
    } else {
      var _console2;
      (_console2 = console)[stream].apply(_console2, ["%c[".concat(app_name, "]%c[").concat(type, "] %c").concat(msg)].concat(colors));
    }
  }
}
/**
 * Pad the start of a string or number with given character
 * @param value String or number to pad
 * @param length Length of the final string
 * @param character Character to pad output string with. Defaults to `0`.
 */
function padLength(value) {
  var length = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 2;
  var character = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '0';
  var str = "".concat(value);
  while (str.length < length) str = "".concat(character).concat(str);
  return str;
}
/**
 * Get item from the nested object
 * @param keys List of sub-keys to search for
 * @param map Object to search
 */
function getItemWithKeys(keys, map) {
  var key = keys[0];
  if (map && key in map) {
    return keys.length > 1 ? getItemWithKeys(keys.slice(1), map[key] || {}) : map[key];
  }
  return null;
}
/**
 * Remove duplicates from the given array
 * @param array List of items to remove duplicates from
 * @param key Key on array objects to compare for uniqueness
 */
function unique() {
  var array = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];
  var key = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';
  var keys = [];
  return array.filter(function (el) {
    var id = key ? el[key] : el;
    var exists = keys.includes(id);
    if (!exists) keys.push(id);
    return !exists;
  });
}
/**
 * Generate a random number
 * @param ceil Biggest value to generate not inclusive
 * @param floor Smallest value to generate. Defaults to 0
 */
function randomInt(ceil) {
  var floor = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;
  return Math.floor(Math.random() * (ceil - floor)) + floor;
}
/**
 * Pad string to the given length
 * @param str Base string
 * @param length Length to pad the string
 */
function padString(str) {
  var length = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 5;
  str = "".concat(str);
  while (str.length < length) str = "0".concat(str);
  return str;
}
/**
 * Generate a random string
 * @param length Length of the string
 * @param chars Available characters to use in the string
 */
function randomString(length) {
  var chars = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'abcdefghijklmnopqrstwvxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
  var str = '';
  for (var i = 0; i < length; i++) {
    str += chars[randomInt(chars.length)];
  }
  return str;
}
function openConfirmModal(_x, _x2) {
  return _openConfirmModal.apply(this, arguments);
}
/**
 * Parse raw CSV data into a JSON object
 * @param csv CSV data to parse
 */
function _openConfirmModal() {
  _openConfirmModal = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(data, dialog) {
    var ref;
    return _regeneratorRuntime().wrap(function _callee$(_context) {
      while (1) switch (_context.prev = _context.next) {
        case 0:
          ref = dialog.open(confirm_modal_component_1.ConfirmModalComponent, _objectSpread(_objectSpread({}, confirm_modal_component_1.CONFIRM_METADATA), {}, {
            data: data
          }));
          _context.t0 = _objectSpread;
          _context.t1 = _objectSpread;
          _context.t2 = {};
          _context.next = 6;
          return Promise.race([ref.componentInstance.event.pipe((0, operators_1.first)(function (_) {
            return _.reason === 'done';
          })).toPromise(), ref.afterClosed().toPromise()]);
        case 6:
          _context.t3 = _context.sent;
          _context.t4 = (0, _context.t1)(_context.t2, _context.t3);
          _context.t5 = {};
          _context.t6 = {
            loading: function loading(s) {
              return ref.componentInstance.loading = s;
            },
            close: function close() {
              return ref.close();
            }
          };
          return _context.abrupt("return", (0, _context.t0)(_context.t4, _context.t5, _context.t6));
        case 11:
        case "end":
          return _context.stop();
      }
    }, _callee);
  }));
  return _openConfirmModal.apply(this, arguments);
}
function csvToJson(csv) {
  var delimiter = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : ',';
  var objPattern = new RegExp('(\\,|\\r?\\n|\\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^\\,\\r\\n]*))', 'gi');
  var arrMatches = null;
  var arrData = [[]];
  while (arrMatches = objPattern.exec(csv)) {
    var _arrMatches$;
    if (arrMatches[1].length && arrMatches[1] !== ',') arrData.push([]);
    arrData[arrData.length - 1].push(arrMatches[2] ? (_arrMatches$ = arrMatches[2]) === null || _arrMatches$ === void 0 ? void 0 : _arrMatches$.replace(new RegExp('""', 'g'), '"') : arrMatches[3]);
  }
  var headers = arrData.splice(0, 1)[0];
  var elements = arrData.map(function (row) {
    var element = {};
    for (var i = 0; i < row.length; i++) {
      var key = (headers[i] || '').split(' ').join('_').toLowerCase();
      try {
        var _row$i;
        element[key] = JSON.parse((_row$i = row[i]) === null || _row$i === void 0 ? void 0 : _row$i.replace('|', ','));
      } catch (e) {
        element[key] = row[i] || '';
      }
      if (element[key] === 'TRUE' || element[key] === 'FALSE') element[key] = element[key] === 'TRUE';
    }
    return element;
  });
  return elements;
}
function loadTextFileFromInputEvent(event) {
  var _this = this;
  return new Promise(function (resolve, reject) {
    /* istanbul ignore else */
    if (event.target) {
      var element = event.target;
      var file = element.files[0];
      /* istanbul ignore else */
      if (file) {
        var reader = new FileReader();
        reader.readAsText(file, 'UTF-8');
        reader.addEventListener('load', function (evt) {
          resolve(evt.srcElement.result);
          element.value = '';
        });
        reader.addEventListener('error', function (_) {
          _this.loading = '';
          reject(['Error loading file', _]);
        });
      }
    }
  });
}
/**
 * Convert javascript array to CSV string
 * @param json Javascript array to convert
 */
function jsonToCsv(json) {
  var seperator = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : ',';
  if (json instanceof Array && json.length > 0) {
    var keys = Object.keys(json[0]);
    var valid_keys = keys.filter(function (key) {
      return key in json[0];
    });
    return "".concat(valid_keys.join(seperator), "\n").concat(json.map(function (item) {
      return valid_keys.map(function (key) {
        var _ref;
        return (_ref = JSON.stringify(item[key]) || '') === null || _ref === void 0 ? void 0 : _ref.replace(',', '|');
      }).join(seperator);
    }).join('\n'));
  }
  return '';
}
/**
 * Downloads a file to the users computer with the given filename and contents
 * @param filename Name of the file to download
 * @param contents Contents of the file to download
 */
function downloadFile(filename, contents) {
  var element = document.createElement('a');
  element.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(contents));
  element.setAttribute('download', filename);
  element.style.display = 'none';
  document.body.appendChild(element);
  element.click();
  document.body.removeChild(element);
}
function parseJWT(token) {
  var base64Url = token.split('.')[1];
  var base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');
  var jsonPayload = decodeURIComponent(atob(base64).split('').map(function (c) {
    return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);
  }).join(''));
  return JSON.parse(jsonPayload);
}
/* istanbul ignore next */
/**
 * Flatten nested array
 * @param an_array Array to flatten
 */
function flatten(an_array) {
  var stack = _toConsumableArray(an_array);
  var res = [];
  while (stack.length) {
    // pop value from stack
    var next = stack.pop();
    if (Array.isArray(next)) {
      // push back array items, won't modify the original input
      stack.push.apply(stack, _toConsumableArray(next));
    } else {
      res.push(next);
    }
  }
  // reverse to restore input order
  return res.reverse();
}
/**
 * Check whether two time periods intersect with each other
 * @param start1 Unix epoch in ms of the first period's start time
 * @param end1 Unix epoch in ms of the first period's end time
 * @param start2 Unix epoch in ms of the second period's start time
 * @param end2 Unix epoch in ms of the second period's end time
 */
function timePeriodsIntersect(s1, e1, s2, e2) {
  return s1 >= s2 && s1 < e2 || s2 >= s1 && s2 < e1 ||
  // Check start time
  e1 > s2 && e1 <= e2 || e2 > s1 && e2 <= e1 // Check end time
  ;
}
var seed = xmur3('PlaceOS');
var rand = sfc32(0x9e3779b9, 0x243f6a88, 0xb7e15162, seed());
function predictableRandomInt() {
  var ceil = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 100;
  var floor = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;
  return Math.floor(rand() * (ceil - floor)) + floor;
}
// https://stackoverflow.com/questions/521295/seeding-the-random-number-generator-in-javascript
function xmur3(str) {
  var h = 1779033703 ^ str.length;
  for (var i = 0; i < str.length; i++) h = Math.imul(h ^ str.charCodeAt(i), 3432918353), h = h << 13 | h >>> 19;
  return function () {
    h = Math.imul(h ^ h >>> 16, 2246822507);
    h = Math.imul(h ^ h >>> 13, 3266489909);
    return (h ^= h >>> 16) >>> 0;
  };
}
function sfc32(a, b, c, d) {
  return function () {
    a >>>= 0;
    b >>>= 0;
    c >>>= 0;
    d >>>= 0;
    var t = a + b | 0;
    a = b ^ b >>> 9;
    b = c + (c << 3) | 0;
    c = c << 21 | c >>> 11;
    d = d + 1 | 0;
    t = t + d | 0;
    c = c + t | 0;
    return (t >>> 0) / 4294967296;
  };
}
/** Get time format string for locale */
function timeFormatString() {
  return is24HourTime() ? 'HH:mm' : 'h:mm a';
}
/** Whether locale string is displayed in 24 hour time */
function is24HourTime() {
  var date = new Date();
  var localeString = date.toLocaleTimeString(document.querySelector('html').getAttribute('lang') || navigator.language).toLowerCase();
  return localeString.indexOf('am') < 0 && localeString.indexOf('pm') < 0;
}
function getInvalidFields(form) {
  var prefix = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';
  var invalid = [];
  for (var key in form.controls) {
    if (form.controls[key] instanceof forms_1.FormGroup) {
      invalid = [].concat(_toConsumableArray(invalid), _toConsumableArray(getInvalidFields(form.controls[key], "".concat(key, "."))));
    } else if (!form.controls[key].valid) {
      invalid.push("".concat(prefix).concat(key));
    }
  }
  return invalid;
}
function removeEmptyFields(obj) {
  for (var key in obj) {
    if (obj[key] === undefined || obj[key] === null || obj[key] === '') {
      delete obj[key];
    }
  }
}
function capitalizeFirstLetter(word) {
  return "".concat(word[0].toUpperCase()).concat(word.substring(1));
}
function cleanArray(array) {
  var removal_items = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [undefined, null, ''];
  return array.filter(function (_) {
    return !removal_items.includes(_);
  });
}
function isMobileSafari() {
  return ['iPad Simulator', 'iPhone Simulator', 'iPod Simulator', 'iPad', 'iPhone', 'iPod'].includes(navigator.platform) ||
  // iPad on iOS 13 detection
  navigator.userAgent.includes('Mac') && 'ontouchend' in document;
}
function isNestedFrame() {
  return window.location !== window.parent.location;
}
// Calculate the distance between geographical cooridinates
function calculateDistance(lat1, lon1, lat2, lon2) {
  var radius = 6371; // Earth's radius in kilometers
  var dLat = degreesToRadians(lat2 - lat1);
  var dLon = degreesToRadians(lon2 - lon1);
  lat1 = degreesToRadians(lat1);
  lat2 = degreesToRadians(lat2);
  var a = Math.sin(dLat / 2) * Math.sin(dLat / 2) + Math.sin(dLon / 2) * Math.sin(dLon / 2) * Math.cos(lat1) * Math.cos(lat2);
  var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
  return radius * c;
}
function degreesToRadians(degrees) {
  return degrees * (Math.PI / 180);
}
//////////////////////////////////////////
//////   Colour Conversion Utils   ///////
//////////////////////////////////////////
function hexToRgb(hex) {
  var r = parseInt(hex.slice(1, 3), 16);
  var g = parseInt(hex.slice(3, 5), 16);
  var b = parseInt(hex.slice(5, 7), 16);
  return [r, g, b];
}
function interpolateColors(rgb1, rgb2, fraction) {
  var r = rgb1[0] + (rgb2[0] - rgb1[0]) * fraction;
  var g = rgb1[1] + (rgb2[1] - rgb1[1]) * fraction;
  var b = rgb1[2] + (rgb2[2] - rgb1[2]) * fraction;
  return [Math.round(r), Math.round(g), Math.round(b)];
}
function rgbToHex(r, g, b) {
  function componentToHex(c) {
    var hex = c.toString(16);
    return hex.length == 1 ? '0' + hex : hex;
  }
  return '#' + componentToHex(r) + componentToHex(g) + componentToHex(b);
}
function shiftColorTowards(hex1, hex2, fraction) {
  var rgb1 = hexToRgb(hex1);
  var rgb2 = hexToRgb(hex2);
  var resultRgb = interpolateColors(rgb1, rgb2, fraction);
  return rgbToHex(resultRgb[0], resultRgb[1], resultRgb[2]);
}
function extractTextFromHTML(html_string) {
  // Create a temporary DOM element
  var temp_element = document.createElement('div');
  // Set the innerHTML to our HTML string
  temp_element.innerHTML = html_string;
  // Extract and return the text content
  return temp_element.textContent || temp_element.innerText || '';
}
/**
 * Shuffle the items in array into random order
 * @param array List of items to shuffle
 */
function shuffleArray(array) {
  for (var i = array.length - 1; i > 0; i--) {
    var j = Math.floor(Math.random() * (i + 1));
    var _ref2 = [array[j], array[i]];
    array[i] = _ref2[0];
    array[j] = _ref2[1];
  }
  return array;
}
/**
 * Shuffle the items in array into random order with a specific item as the first
 * @param array List of items to shuffle
 * @param first_index Index of the item in the list to set as first
 */
function shuffleArrayWithFirstItem(array, first_index) {
  // Move the specified item to the beginning
  var firstItem = array.splice(first_index, 1)[0];
  array.unshift(firstItem);
  // Shuffle the rest of the array (starting from index 1)
  for (var i = array.length - 1; i > 1; i--) {
    var j = Math.floor(Math.random() * (i - 1)) + 1;
    var _ref3 = [array[j], array[i]];
    array[i] = _ref3[0];
    array[j] = _ref3[1];
  }
  return array;
}

/***/ }),

/***/ 83114:
/*!*********************************************************!*\
  !*** ./libs/common/src/lib/google-analytics.service.ts ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _objectSpread = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/objectSpread2.js */ 34092)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _GoogleAnalyticsService;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.GoogleAnalyticsService = void 0;
var platform_browser_1 = __webpack_require__(/*! @angular/platform-browser */ 80436);
var general_1 = __webpack_require__(/*! ./general */ 64217);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @angular/platform-browser */ 80436);
var GoogleAnalyticsService = /*#__PURE__*/function () {
  function GoogleAnalyticsService(title) {
    _classCallCheck(this, GoogleAnalyticsService);
    this.title = title;
    /** Whether posting analytics events is enabled */
    this.enabled = true;
    /** Name of the application */
    this.app_name = 'GA_APP';
    /** Store for timer ids */
    this.timers = {};
  }
  return _createClass(GoogleAnalyticsService, [{
    key: "init",
    value: function init() {
      var tracking_id = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';
      if (!window.gtag) {
        window.dataLayer = window.dataLayer || [];
        (function (w, d, s, l, i) {
          w[l] = w[l] || [];
          w[l].push({
            'gtm.start': new Date().getTime(),
            event: 'gtm.js'
          });
          var f = d.getElementsByTagName(s)[0],
            j = d.createElement(s),
            dl = l != 'dataLayer' ? '&l=' + l : '';
          j.async = true;
          j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
          f.parentNode.insertBefore(j, f);
        })(window, document, 'script', 'dataLayer', tracking_id);
        (0, general_1.log)('Analytics', 'Service', 'Injected Google Analytics into page');
      }
      this.service = window.gtag;
    }
  }, {
    key: "push",
    value: function push(obj) {
      window.dataLayer.push(obj);
    }
    /**
     * Initialise Google Analytics
     * @param tracking_id GA Tracking ID
     */
  }, {
    key: "load",
    value: function load(tracking_id) {
      if (!this.enabled) {
        throw new Error('Google Analytics needs to be enabled before being initialised');
      }
      if (!this.service) {
        throw new Error("Google Analytics hasn't been installed on this page");
      }
      (0, general_1.log)('Analytics', 'Service', "Setup with tracking ID: ".concat(tracking_id));
      this.page('');
    }
    /**
     * Set User ID for the Google Analytics session
     * @param id Identifier of the User
     */
  }, {
    key: "setUser",
    value: function setUser(id) {
      var _this = this;
      if (!this.service) {
        throw new Error("Google Analytics hasn't been installed on this page");
      }
      if (this.enabled) {
        this.timeout("user|".concat(id), function () {
          (0, general_1.log)('Analytics', 'Service', "Set user ID: ".concat(id));
          _this.service('set', 'userId', id);
          _this.event('authentication', 'user-id available');
        }, 100);
      }
    }
  }, {
    key: "send",
    value: function send(type, value) {
      var _this2 = this;
      if (!this.service) {
        throw new Error("Google Analytics hasn't been installed on this page");
      }
      if (this.enabled) {
        this.timeout("end|".concat(type), function () {
          _this2.push(_objectSpread(_objectSpread({}, value), {}, {
            event: 'event'
          }));
        });
      }
    }
    /**
     * Post event to Google Analytics API
     * @param category Event Category
     * @param action Event Action
     * @param label Event Label
     * @param value Event Value
     */
  }, {
    key: "event",
    value: function event(category, action, label, value) {
      var _this3 = this;
      if (!this.service) {
        throw new Error("Google Analytics hasn't been installed on this page");
      }
      if (this.enabled) {
        this.timeout("event|".concat(category, "|").concat(action, "|").concat(label, "|").concat(value), function () {
          var l = label ? ', ' + label : '';
          (0, general_1.log)('Analytics', 'Service', "Event: ".concat(category, ", ").concat(action).concat(l).concat(value ? ', ' + value : ''));
          var prefix = _this3.app_prefix ? _this3.app_prefix + '_' : '';
          _this3.push({
            event: 'event',
            category: category,
            action: action,
            label: label
          });
        }, 100);
      }
    }
    /**
     * Post screen change event to Google Analytics API
     * @param name
     * @param app_name
     */
  }, {
    key: "screen",
    value: function screen(name, app_name) {
      var _this4 = this;
      if (!this.service) {
        throw new Error("Google Analytics hasn't been installed on this page");
      }
      if (name && this.enabled) {
        this.timeout("event|".concat(name, "|").concat(app_name || this.app_name), function () {
          (0, general_1.log)('Analytics', 'Service', "Screen: ".concat(name).concat(app_name ? ', ' + app_name : ''));
          _this4.push({
            event: 'screenview',
            appName: app_name || _this4.app_name,
            screenName: name
          });
        }, 100);
      }
    }
    /**
     * Post routing event to Google Analytics API
     * @param route Activated route
     * @param origin Add origin to routh path
     */
  }, {
    key: "page",
    value: function page(route) {
      var _this5 = this;
      var origin = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;
      if (!this.service) {
        throw new Error("Google Analytics hasn't been installed on this page");
      }
      if (this.enabled) {
        this.last_route = route || '/';
        this.timeout("page|".concat(route), function () {
          (0, general_1.log)('Analytics', 'Service', "Page: ".concat(route));
          _this5.push({
            event: 'pageview',
            url: "".concat(origin ? location.origin : '').concat(route)
          });
        }, 100);
      }
    }
    /**
     * Post timing event to Google Analytics API
     * @param category
     * @param variable
     * @param value
     * @param label
     */
  }, {
    key: "timing",
    value: function timing(category, variable, value, label) {
      var _this6 = this;
      if (!this.service) {
        throw new Error("Google Analytics hasn't been installed on this page");
      }
      if (this.enabled) {
        this.timeout("page|".concat(category, "|").concat(variable, "|").concat(value, "|").concat(label), function () {
          (0, general_1.log)('Analytics', 'Service', "Timing: ".concat(category, ", ").concat(variable, ", ").concat(value).concat(label ? ', ' + label : ''));
          _this6.push({
            event: 'timing',
            category: category,
            variable: variable,
            value: value,
            label: label
          });
        }, 100);
      }
    }
    /**
     * Creates a timeout for the given name used for preventing duplicate events in quick succession
     * @param name Name of timer
     * @param fn Timer callback
     * @param delay Timer delay
     */
  }, {
    key: "timeout",
    value: function timeout(name, fn) {
      var _this7 = this;
      var delay = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 300;
      if (this.timers[name]) {
        clearTimeout(this.timers[name]);
        delete this.timers[name];
      }
      this.timers[name] = setTimeout(function () {
        if (fn instanceof Function) {
          fn();
        }
        delete _this7.timers[name];
      }, delay);
    }
  }]);
}();
_GoogleAnalyticsService = GoogleAnalyticsService;
_GoogleAnalyticsService.ɵfac = function GoogleAnalyticsService_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _GoogleAnalyticsService)(i0.ɵɵinject(i1.Title));
};
_GoogleAnalyticsService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({
  token: _GoogleAnalyticsService,
  factory: _GoogleAnalyticsService.ɵfac,
  providedIn: 'root'
});
exports.GoogleAnalyticsService = GoogleAnalyticsService;

/***/ }),

/***/ 47643:
/*!************************************************!*\
  !*** ./libs/common/src/lib/hotkeys.service.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _createForOfIteratorHelper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createForOfIteratorHelper.js */ 36350)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _HotkeysService;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.HotkeysService = void 0;
var rxjs_1 = __webpack_require__(/*! rxjs */ 15681);
var general_1 = __webpack_require__(/*! ./general */ 64217);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
/** List of keys that cannot be in a combination by themselves or with each other */
var INVALID_STANDALONE_KEYS = ['control', 'shift', 'alt', 'meta', 'os'];
var HotkeysService = /*#__PURE__*/function () {
  function HotkeysService() {
    var _this = this;
    _classCallCheck(this, HotkeysService);
    /** Map of subjects which store press states of keys */
    this.keydown_states = {};
    /** Map of obserers for key state subjects */
    this.keydown_observers = {};
    /** List of keys at the end of a combination */
    this.combo_end = [];
    /** List of registered hotkey combinations */
    this.registered_combos = [];
    /** Counter for the number of keydown events. Used for checking order of key presses */
    this.counter = 0;
    window.addEventListener('keydown', function (event) {
      var code = _this.mapKey((event.code || '').toLowerCase());
      if (_this.last_down !== code) {
        if (!_this.keydown_states[code]) {
          _this.keydown_states[code] = new rxjs_1.BehaviorSubject(null);
          _this.keydown_observers[code] = _this.keydown_states[code].asObservable();
        }
        _this.keydown_states[code].next(++_this.counter);
        if (_this.combo_end.indexOf(code) >= 0) {
          event.preventDefault();
        }
        _this.last_down = code;
      }
    });
    window.addEventListener('keyup', function (event) {
      var _this$keydown_states$;
      var code = _this.mapKey((event.code || '').toLowerCase());
      (_this$keydown_states$ = _this.keydown_states[code]) === null || _this$keydown_states$ === void 0 || _this$keydown_states$.next(null);
      if (_this.last_down === code) {
        _this.last_down = null;
      }
    });
  }
  /**
   * Listen to the given key combination
   * @param combo Array of key codes to listen to or a hotkey string e.g. `Alt+Shift+KeyK`
   * @param next Callback for combination presses
   */
  return _createClass(HotkeysService, [{
    key: "listen",
    value: function listen(combo, next) {
      var _this2 = this;
      combo = combo instanceof Array ? combo : combo.split('+');
      var combination = combo.map(function (i) {
        return _this2.mapKey(i.toLowerCase());
      });
      if (combination.length > 0 && this.validCombination(combination)) {
        this.registered_combos.push(combination);
        var last_key = combination[combination.length - 1];
        if (!this.keydown_states[last_key]) {
          this.keydown_states[last_key] = new rxjs_1.BehaviorSubject(null);
          this.keydown_observers[last_key] = this.keydown_states[last_key].asObservable();
        }
        this.updateCombinationEndList();
        return this.keydown_observers[last_key].subscribe(function (count) {
          if (count) {
            var presses = [];
            if (combination.length > 0) {
              // Check that keys are pressed
              var _iterator = _createForOfIteratorHelper(combination),
                _step;
              try {
                for (_iterator.s(); !(_step = _iterator.n()).done;) {
                  var key = _step.value;
                  var state = _this2.keydown_states[key];
                  presses.push(state ? state.getValue() || -1 : -1);
                }
                // Check that keys are pressed in the correct order
              } catch (err) {
                _iterator.e(err);
              } finally {
                _iterator.f();
              }
              for (var i = 0; i < combination.length - 1; i++) {
                if (presses[i] > presses[i + 1]) {
                  return;
                }
              }
            }
            var total = presses.reduce(function (a, v) {
              return a + (v > 0 ? 1 : -1);
            }, 0);
            if (total >= combination.length) {
              next();
            }
          }
        });
      }
      return null;
    }
    /**
     * Map key codes with multiple versions to simple form
     * @param code Code to transform
     */
  }, {
    key: "mapKey",
    value: function mapKey(code) {
      if (code.indexOf('alt') >= 0 || code.indexOf('shift') >= 0 || code.indexOf('control') >= 0) {
        return code.replace('left', '').replace('right', '');
      }
      return code;
    }
    /**
     * Update the list of the last keys in combinations to allow for prevent default actions on pre-existing hotkeys
     */
  }, {
    key: "updateCombinationEndList",
    value: function updateCombinationEndList() {
      var key_list = [];
      var _iterator2 = _createForOfIteratorHelper(this.registered_combos),
        _step2;
      try {
        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
          var combo = _step2.value;
          this.combo_end.push(combo[combo.length - 1]);
        }
      } catch (err) {
        _iterator2.e(err);
      } finally {
        _iterator2.f();
      }
      this.combo_end = (0, general_1.unique)(key_list);
    }
    /**
     * Checks if the given hotkey combination is allowed and valid
     * @param combo Array of key codes
     */
  }, {
    key: "validCombination",
    value: function validCombination(combo) {
      var non_meta = 0;
      var _iterator3 = _createForOfIteratorHelper(combo),
        _step3;
      try {
        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {
          var key = _step3.value;
          if (INVALID_STANDALONE_KEYS.indexOf(key) < 0) {
            non_meta++;
          }
        }
      } catch (err) {
        _iterator3.e(err);
      } finally {
        _iterator3.f();
      }
      return non_meta > 0;
    }
  }]);
}();
_HotkeysService = HotkeysService;
_HotkeysService.ɵfac = function HotkeysService_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _HotkeysService)();
};
_HotkeysService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({
  token: _HotkeysService,
  factory: _HotkeysService.ɵfac,
  providedIn: 'root'
});
exports.HotkeysService = HotkeysService;

/***/ }),

/***/ 52369:
/*!***************************************************!*\
  !*** ./libs/common/src/lib/keep-alive.service.ts ***!
  \***************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _callSuper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/callSuper.js */ 8513)["default"]);
var _inherits = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/inherits.js */ 58160)["default"]);
var _KeepAliveService;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.KeepAliveService = void 0;
var ts_client_1 = __webpack_require__(/*! @placeos/ts-client */ 35713);
var rxjs_1 = __webpack_require__(/*! rxjs */ 15681);
var operators_1 = __webpack_require__(/*! rxjs/operators */ 97303);
var async_handler_class_1 = __webpack_require__(/*! ./async-handler.class */ 75354);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var KeepAliveService = /*#__PURE__*/function (_async_handler_class_) {
  function KeepAliveService() {
    var _this;
    _classCallCheck(this, KeepAliveService);
    _this = _callSuper(this, KeepAliveService);
    _this._system_id = new rxjs_1.BehaviorSubject('');
    _this._delay = 3 * 60 * 1000;
    _this._status = _this._system_id.pipe((0, operators_1.filter)(function (_) {
      return !!_;
    }), (0, operators_1.switchMap)(function (id) {
      return (0, rxjs_1.combineLatest)([(0, rxjs_1.of)(id), _this._bindTo(id, 'poll')]);
    }), (0, operators_1.tap)(function () {
      return _this.timeout('poll', function () {
        return location.reload();
      }, _this._delay);
    }));
    _this.subscription('status', _this._status.subscribe());
    return _this;
  }
  _inherits(KeepAliveService, _async_handler_class_);
  return _createClass(KeepAliveService, [{
    key: "setSystem",
    value: function setSystem(id) {
      this._system_id.next(id);
    }
  }, {
    key: "setReloadDelay",
    value: function setReloadDelay(delay) {
      this._delay = delay;
    }
    /** List to binding */
  }, {
    key: "_bindTo",
    value: function _bindTo(id, name) {
      var mod = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'SystemHealth';
      var module = (0, ts_client_1.getModule)(id, mod).binding(name);
      this.subscription("bind:".concat(name), module.bind());
      return module.listen();
    }
  }]);
}(async_handler_class_1.AsyncHandler);
_KeepAliveService = KeepAliveService;
_KeepAliveService.ɵfac = function KeepAliveService_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _KeepAliveService)();
};
_KeepAliveService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({
  token: _KeepAliveService,
  factory: _KeepAliveService.ɵfac,
  providedIn: 'root'
});
exports.KeepAliveService = KeepAliveService;

/***/ }),

/***/ 99420:
/*!***************************************************!*\
  !*** ./libs/common/src/lib/mapspeople.service.ts ***!
  \***************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _slicedToArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/slicedToArray.js */ 6282)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _callSuper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/callSuper.js */ 8513)["default"]);
var _inherits = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/inherits.js */ 58160)["default"]);
var _MapsPeopleService;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.MapsPeopleService = exports.MapService = void 0;
var settings_service_1 = __webpack_require__(/*! ./settings.service */ 14233);
var organisation_1 = __webpack_require__(/*! @placeos/organisation */ 2510);
var rxjs_1 = __webpack_require__(/*! rxjs */ 15681);
var operators_1 = __webpack_require__(/*! rxjs/operators */ 97303);
var async_handler_class_1 = __webpack_require__(/*! ./async-handler.class */ 75354);
var general_1 = __webpack_require__(/*! ./general */ 64217);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! ./settings.service */ 14233);
var i2 = __webpack_require__(/*! @placeos/organisation */ 2510);
var MapService;
(function (MapService) {
  MapService[MapService["GoogleMaps"] = 0] = "GoogleMaps";
  MapService[MapService["Mapbox"] = 1] = "Mapbox";
})(MapService || (exports.MapService = MapService = {}));
var MapsPeopleService = /*#__PURE__*/function (_async_handler_class_) {
  function MapsPeopleService(_settings, _org) {
    var _this;
    _classCallCheck(this, MapsPeopleService);
    _this = _callSuper(this, MapsPeopleService);
    _this._settings = _settings;
    _this._org = _org;
    _this._map_service = new rxjs_1.BehaviorSubject(null);
    _this._map_token = new rxjs_1.BehaviorSubject('');
    _this._ready = new rxjs_1.BehaviorSubject(false);
    _this._injected = {};
    _this._custom_zone = new rxjs_1.BehaviorSubject('');
    _this.available$ = (0, rxjs_1.combineLatest)([_this._org.active_building, _this._custom_zone, _this._org.initialised]).pipe((0, operators_1.filter)(function (_ref) {
      var _ref2 = _slicedToArray(_ref, 1),
        _ = _ref2[0];
      return !!_;
    }), (0, operators_1.debounceTime)(300), (0, operators_1.tap)(function () {
      return _this._injectMapsApiKeys();
    }), (0, operators_1.map)(function (_ref3) {
      var _ref4 = _slicedToArray(_ref3, 2),
        bld = _ref4[0],
        zone = _ref4[1];
      return _this.map_keys.mapsindoors && (_this.use_service.includes(zone || bld.id) || _this.use_service.includes('*'));
    }), (0, operators_1.shareReplay)(1));
    return _this;
  }
  _inherits(MapsPeopleService, _async_handler_class_);
  return _createClass(MapsPeopleService, [{
    key: "map_keys",
    get: function get() {
      return this._settings.get('app.maps_people.keys') || {};
    }
  }, {
    key: "use_service",
    get: function get() {
      return this._settings.get('app.maps_people.use_zones') || [];
    }
  }, {
    key: "map_service",
    get: function get() {
      return this._map_service.getValue();
    }
  }, {
    key: "map_token",
    get: function get() {
      return this._map_token.getValue();
    }
  }, {
    key: "is_ready",
    get: function get() {
      return this._ready.getValue();
    }
  }, {
    key: "setCustomZone",
    value: function setCustomZone(zone_id) {
      this._custom_zone.next(zone_id);
    }
  }, {
    key: "_injectMapsApiKeys",
    value: function _injectMapsApiKeys() {
      var _this2 = this;
      (0, general_1.log)('MapsPeople', 'Initializing Maps API Keys');
      this._ready.next(false);
      var _this$map_keys = this.map_keys,
        mapsindoors = _this$map_keys.mapsindoors,
        google = _this$map_keys.google,
        mapbox = _this$map_keys.mapbox;
      if (!mapsindoors) return;
      if (mapsindoors && !this._injected.mapsindoors) {
        var script = document.createElement('script');
        script.src = "https://app.mapsindoors.com/mapsindoors/js/sdk/4.35.0/mapsindoors-4.35.0.js.gz?apikey=".concat(mapsindoors);
        document.body.appendChild(script);
        this._injected.mapsindoors = true;
      }
      if (google && mapbox) {
        (0, general_1.log)('MapsPeople', 'Both Google and Mapbox keys provided', undefined, 'error');
        return;
      }
      if (google && !this._injected.google) {
        var _script = document.createElement('script');
        _script.src = "https://maps.googleapis.com/maps/api/js?libraries=geometry&key=".concat(google);
        document.body.appendChild(_script);
        this._map_service.next(MapService.GoogleMaps);
        this._injected.google = true;
      } else if (mapbox && !this._injected.mapbox) {
        var _script2 = document.createElement('script');
        _script2.src = "https://api.mapbox.com/mapbox-gl-js/v2.14.1/mapbox-gl.js";
        document.body.appendChild(_script2);
        var styles = document.createElement('link');
        styles.rel = 'stylesheet';
        styles.href = "https://api.mapbox.com/mapbox-gl-js/v2.14.1/mapbox-gl.css";
        document.head.appendChild(styles);
        this._map_service.next(MapService.Mapbox);
        this._map_token.next(mapbox);
        this._injected.mapbox = true;
      }
      if (google || mapbox) {
        (0, general_1.log)('MapsPeople', "Initialized Maps API Keys for ".concat(google ? 'Google Maps' : 'Mapbox'));
        this.timeout('ready', function () {
          return _this2._ready.next(true);
        }, 300);
      }
    }
  }]);
}(async_handler_class_1.AsyncHandler);
_MapsPeopleService = MapsPeopleService;
_MapsPeopleService.ɵfac = function MapsPeopleService_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _MapsPeopleService)(i0.ɵɵinject(i1.SettingsService), i0.ɵɵinject(i2.OrganisationService));
};
_MapsPeopleService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({
  token: _MapsPeopleService,
  factory: _MapsPeopleService.ɵfac,
  providedIn: 'root'
});
exports.MapsPeopleService = MapsPeopleService;

/***/ }),

/***/ 39525:
/*!**********************************************!*\
  !*** ./libs/common/src/lib/notifications.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _objectSpread = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/objectSpread2.js */ 34092)["default"]);
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.setNotifyOutlet = setNotifyOutlet;
exports.notify = notify;
exports.notifySuccess = notifySuccess;
exports.notifyError = notifyError;
exports.notifyWarn = notifyWarn;
exports.notifyInfo = notifyInfo;
var _service;
var _disable_logging = false;
function setNotifyOutlet(snackbar) {
  var disable_logging = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;
  _service = snackbar;
  _disable_logging = disable_logging;
}
/**
 * Create notification popup
 * @param type CSS Class to add to the notification
 * @param message Message to display on the notificaiton
 * @param action Display text for the callback action
 * @param on_action Callback of action on the notification
 * @param config Configuration details to pass to the snackbar
 */
function notify(type, message) {
  var action = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'OK';
  var on_action = arguments.length > 3 ? arguments[3] : undefined;
  var config = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {};
  if (!_service) {
    return !_disable_logging && console.warn("Snackbar service hasn't been initialised");
  }
  var snackbar_ref = _service.open(message, action, _objectSpread({
    panelClass: [type],
    duration: 5000
  }, config));
  if (action) {
    on_action = on_action || function () {
      return snackbar_ref.dismiss();
    };
    snackbar_ref.onAction().subscribe(function () {
      return on_action();
    });
  }
}
/**
 * Create success notification popup
 * @param msg Message to display on the notificaiton
 * @param action Display text for the callback action
 * @param on_action Callback of action on the notification
 * @param config Configuration details to pass to the snackbar
 */
function notifySuccess(msg, action, on_action) {
  var config = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};
  !_disable_logging && console.debug(msg);
  if (typeof msg !== 'string') msg = 'Success';
  notify('success', msg, action, on_action, config);
}
/**
 * Create error notification popup
 * @param msg Message to display on the notificaiton
 * @param action Display text for the callback action
 * @param on_action Callback of action on the notification
 * @param config Configuration details to pass to the snackbar
 */
function notifyError(msg, action, on_action) {
  var _msg, _msg2;
  var config = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};
  !_disable_logging && console.debug(msg);
  if (typeof msg !== 'string') msg = ((_msg = msg) === null || _msg === void 0 ? void 0 : _msg.error) || ((_msg2 = msg) === null || _msg2 === void 0 ? void 0 : _msg2.message) || 'An error occurred';
  notify('error', msg, action, on_action, config);
}
/**
 * Create warning notification popup
 * @param msg Message to display on the notificaiton
 * @param action Display text for the callback action
 * @param on_action Callback of action on the notification
 * @param config Configuration details to pass to the snackbar
 */
function notifyWarn(msg, action, on_action) {
  var config = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};
  !_disable_logging && console.debug(msg);
  notify('warn', msg, action, on_action, config);
}
/**
 * Create info notification popup
 * @param msg Message to display on the notificaiton
 * @param action Display text for the callback action
 * @param on_action Callback of action on the notification
 * @param config Configuration details to pass to the snackbar
 */
function notifyInfo(msg, action, on_action) {
  var config = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};
  !_disable_logging && console.debug(msg);
  notify('info', msg, action, on_action, config);
}

/***/ }),

/***/ 71676:
/*!****************************************!*\
  !*** ./libs/common/src/lib/placeos.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _regeneratorRuntime = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/regeneratorRuntime.js */ 8698)["default"]);
var _asyncToGenerator = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/asyncToGenerator.js */ 95386)["default"]);
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.setupPlace = setupPlace;
var ts_client_1 = __webpack_require__(/*! @placeos/ts-client */ 35713);
var notifications_1 = __webpack_require__(/*! ./notifications */ 39525);
/**
 * Initialise the PlaceOS API library
 */
function setupPlace(_x) {
  return _setupPlace.apply(this, arguments);
}
function _setupPlace() {
  _setupPlace = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(settings) {
    var protocol, host, port, url, route, mock, config;
    return _regeneratorRuntime().wrap(function _callee$(_context) {
      while (1) switch (_context.prev = _context.next) {
        case 0:
          protocol = settings.protocol || location.protocol;
          host = settings.domain || location.hostname;
          port = settings.port || location.port;
          url = settings.use_domain ? "".concat(protocol, "//").concat(host, ":").concat(port) : location.origin;
          route = (location.pathname + '/').replace('//', '/');
          mock = settings.mock || location.href.includes('mock=true') || localStorage.getItem('mock') === 'true'; // Generate configuration object
          config = {
            auth_type: 'auth_code',
            scope: 'public',
            host: "".concat(host).concat(port ? ':' + port : ''),
            auth_uri: "".concat(url, "/auth/oauth/authorize"),
            token_uri: "".concat(url, "/auth/oauth/token"),
            redirect_uri: "".concat(location.origin).concat(route, "oauth-resp.html"),
            handle_login: !settings.local_login,
            use_iframe: true,
            mock: mock
          };
          if (localStorage) {
            localStorage.setItem('mock', "".concat(!!mock && !location.href.includes('mock=false')));
          }
          if (mock) {
            (0, notifications_1.notifyInfo)('Application in mock mode.');
          }
          return _context.abrupt("return", (0, ts_client_1.setup)(config));
        case 10:
        case "end":
          return _context.stop();
      }
    }, _callee);
  }));
  return _setupPlace.apply(this, arguments);
}

/***/ }),

/***/ 75774:
/*!****************************************!*\
  !*** ./libs/common/src/lib/qr-code.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.generateQRCode = generateQRCode;
var vanillaqr_min_1 = __webpack_require__(/*! ./vanillaqr.min */ 64295);
/** Generates a DataURL for QR code image */
function generateQRCode(code) {
  var _qr$toImage;
  var colorLight = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '#fff0';
  var colorDark = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '#000';
  var qr = new vanillaqr_min_1.VanillaQR({
    url: code || 'Hello',
    size: 360,
    colorLight: colorLight,
    colorDark: colorDark,
    toTable: false,
    ecclevel: 1,
    noBorder: true,
    borderSize: 0
  });
  return qr === null || qr === void 0 || (_qr$toImage = qr.toImage('svg+xml')) === null || _qr$toImage === void 0 ? void 0 : _qr$toImage.src;
}

/***/ }),

/***/ 686:
/*!*******************************************************!*\
  !*** ./libs/common/src/lib/remote-logging.service.ts ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _toConsumableArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/toConsumableArray.js */ 86033)["default"]);
var _regeneratorRuntime = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/regeneratorRuntime.js */ 8698)["default"]);
var _asyncToGenerator = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/asyncToGenerator.js */ 95386)["default"]);
var _slicedToArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/slicedToArray.js */ 6282)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _callSuper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/callSuper.js */ 8513)["default"]);
var _inherits = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/inherits.js */ 58160)["default"]);
var _RemoteLoggingService;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.RemoteLoggingService = void 0;
var ts_client_1 = __webpack_require__(/*! @placeos/ts-client */ 35713);
var rxjs_1 = __webpack_require__(/*! rxjs */ 15681);
var operators_1 = __webpack_require__(/*! rxjs/operators */ 97303);
var async_handler_class_1 = __webpack_require__(/*! ./async-handler.class */ 75354);
var general_1 = __webpack_require__(/*! ./general */ 64217);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
function hookMethod(rootObject, functionToHook, hookingFunction) {
  var previousFunction = rootObject[functionToHook];
  rootObject[functionToHook] = function () {
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    hookingFunction(args);
    previousFunction.call.apply(previousFunction, [rootObject].concat(args));
  };
  return previousFunction;
}
var DEVICE_ID = localStorage.getItem('PLACEOS.DEVICE_ID') || "DEV-".concat((0, general_1.randomString)(8));
var RemoteLoggingService = /*#__PURE__*/function (_async_handler_class_) {
  function RemoteLoggingService() {
    var _this;
    _classCallCheck(this, RemoteLoggingService);
    _this = _callSuper(this, RemoteLoggingService);
    _this._disable_handling = false;
    _this._system_id = new rxjs_1.BehaviorSubject('');
    _this._events = new rxjs_1.Subject();
    _this._event_history = _this._events.pipe((0, operators_1.shareReplay)(20000));
    _this._metadata = null;
    _this._logging_bindings = _this._system_id.pipe((0, operators_1.filter)(function (_) {
      return !!_;
    }), (0, operators_1.switchMap)(function (id) {
      return (0, rxjs_1.combineLatest)([(0, rxjs_1.of)(id), _this._bindTo(id, 'enabled')]);
    }), (0, operators_1.filter)(function (_ref) {
      var _ref2 = _slicedToArray(_ref, 2),
        _ = _ref2[0],
        enabled = _ref2[1];
      return !!enabled;
    }), (0, operators_1.map)(function (_ref3) {
      var _ref4 = _slicedToArray(_ref3, 1),
        id = _ref4[0];
      return _this.subscription('post_events', _this._event_history.subscribe( /*#__PURE__*/function () {
        var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(d) {
          return _regeneratorRuntime().wrap(function _callee$(_context) {
            while (1) switch (_context.prev = _context.next) {
              case 0:
                _this._disable_handling = true;
                _context.next = 3;
                return (0, ts_client_1.getModule)(id, 'Logger').execute('post_event', [d])["catch"]();
              case 3:
                _this._disable_handling = false;
              case 4:
              case "end":
                return _context.stop();
            }
          }, _callee);
        }));
        return function (_x) {
          return _ref5.apply(this, arguments);
        };
      }()));
    }));
    _this.history = _this._event_history;
    localStorage.setItem('PLACEOS.DEVICE_ID', DEVICE_ID);
    _this._patchConsoleMethods();
    _this._logging_bindings.subscribe();
    (0, general_1.log)('Logger', 'Remote logging initialised...');
    return _this;
  }
  _inherits(RemoteLoggingService, _async_handler_class_);
  return _createClass(RemoteLoggingService, [{
    key: "setMetadata",
    value: function setMetadata(metadata) {}
  }, {
    key: "setSystem",
    value: function setSystem(id) {
      this._system_id.next(id);
    }
  }, {
    key: "_patchConsoleMethods",
    value: function _patchConsoleMethods() {
      var _this2 = this;
      var types = ['log', 'debug', 'info', 'warn', 'error'];
      var _loop = function _loop() {
        var key = _types[_i];
        hookMethod(console, key, function () {
          for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
            args[_key2] = arguments[_key2];
          }
          return _this2._handleEvent(key, args);
        });
      };
      for (var _i = 0, _types = types; _i < _types.length; _i++) {
        _loop();
      }
    }
  }, {
    key: "_handleEvent",
    value: function _handleEvent(type, data) {
      var event_type = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'console';
      if (data.includes('"Logger"') || this._disable_handling) return;
      var blob = _toConsumableArray(data[0]);
      blob[0] = typeof blob[0] === 'string' ? blob[0].replace(/\%c/g, '') : blob[0];
      this._events.next({
        id: "".concat(event_type, "-").concat((0, general_1.randomInt)(9999999999)),
        device_id: DEVICE_ID,
        type: event_type,
        subtype: type,
        timestamp: Date.now(),
        raw: data,
        data: blob.filter(function (_) {
          return typeof _ !== 'string' || !_.startsWith('color:');
        }),
        metadata: this._metadata || null
      });
    }
    /** List to binding */
  }, {
    key: "_bindTo",
    value: function _bindTo(id, name) {
      var mod = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'Logger';
      var module = (0, ts_client_1.getModule)(id, mod).binding(name);
      this.subscription("bind:".concat(name), module.bind());
      return module.listen();
    }
  }]);
}(async_handler_class_1.AsyncHandler);
_RemoteLoggingService = RemoteLoggingService;
_RemoteLoggingService.ɵfac = function RemoteLoggingService_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _RemoteLoggingService)();
};
_RemoteLoggingService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({
  token: _RemoteLoggingService,
  factory: _RemoteLoggingService.ɵfac,
  providedIn: 'root'
});
exports.RemoteLoggingService = RemoteLoggingService;

/***/ }),

/***/ 5392:
/*!*************************************************************!*\
  !*** ./libs/common/src/lib/room-configuration.interface.ts ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _objectSpread = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/objectSpread2.js */ 34092)["default"]);
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.roomConfigBuilder = exports.mergeRoomConfig = void 0;
var mergeRoomConfig = function mergeRoomConfig(a, b) {
  var c = _objectSpread(_objectSpread({}, a), b);
  return c;
};
exports.mergeRoomConfig = mergeRoomConfig;
var roomConfigBuilder = function roomConfigBuilder() {
  var buildingConfigs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];
  var roomConfigs = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];
  var map = {};
  buildingConfigs.forEach(function (f) {
    return map[f.id] = f;
  });
  var output = [];
  roomConfigs.forEach(function (r) {
    if (!!map[r.id]) {
      output.push((0, exports.mergeRoomConfig)(map[r.id], r));
    }
  });
  return output;
};
exports.roomConfigBuilder = roomConfigBuilder;

/***/ }),

/***/ 14233:
/*!*************************************************!*\
  !*** ./libs/common/src/lib/settings.service.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _objectSpread = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/objectSpread2.js */ 34092)["default"]);
var _createForOfIteratorHelper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createForOfIteratorHelper.js */ 36350)["default"]);
var _toConsumableArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/toConsumableArray.js */ 86033)["default"]);
var _regeneratorRuntime = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/regeneratorRuntime.js */ 8698)["default"]);
var _asyncToGenerator = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/asyncToGenerator.js */ 95386)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _callSuper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/callSuper.js */ 8513)["default"]);
var _inherits = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/inherits.js */ 58160)["default"]);
var _SettingsService;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.SettingsService = void 0;
var platform_browser_1 = __webpack_require__(/*! @angular/platform-browser */ 80436);
var rxjs_1 = __webpack_require__(/*! rxjs */ 15681);
var ts_client_1 = __webpack_require__(/*! @placeos/ts-client */ 35713);
var date_fns_1 = __webpack_require__(/*! date-fns */ 25773);
var operators_1 = __webpack_require__(/*! rxjs/operators */ 97303);
var general_1 = __webpack_require__(/*! ./general */ 64217);
var settings_1 = __webpack_require__(/*! ./settings */ 43060);
var async_handler_class_1 = __webpack_require__(/*! ./async-handler.class */ 75354);
var version_1 = __webpack_require__(/*! ./version */ 93885);
var user_state_1 = __webpack_require__(/*! ./user-state */ 37958);
var google_analytics_service_1 = __webpack_require__(/*! ./google-analytics.service */ 83114);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @angular/platform-browser */ 80436);
var i2 = __webpack_require__(/*! ./google-analytics.service */ 83114);
var SettingsService = /*#__PURE__*/function (_async_handler_class_) {
  function SettingsService(_title, _analytics) {
    var _this;
    _classCallCheck(this, SettingsService);
    _this = _callSuper(this, SettingsService);
    _this._title = _title;
    _this._analytics = _analytics;
    /** Name of the application */
    _this._app_name = 'PlaceOS';
    /** List of override settings in order of priority */
    _this._overrides = new rxjs_1.BehaviorSubject([]);
    /** User's personal settings */
    _this._user_settings = new rxjs_1.BehaviorSubject({});
    /** Mapping of behaviour subjects */
    _this._subjects = {};
    /** Mapping of observables */
    _this._observables = {};
    /** Mapping of pending settings */
    _this._pending_settings = {};
    var now = new Date();
    var time = new Date(version_1.VERSION.time);
    var built = (0, date_fns_1.isSameDay)(now, time) ? "Today at ".concat((0, date_fns_1.format)(time, 'h:mma')) : (0, date_fns_1.format)(time, 'do MMM yyyy, h:mma');
    (0, general_1.log)('CORE', "".concat(version_1.VERSION.semver), null, 'debug', true);
    (0, general_1.log)('APP', "".concat(version_1.VERSION.hash, " | Built: ").concat(built), null, 'debug', true);
    _this.init();
    return _this;
  }
  /**
   * Initialise the settings
   */
  _inherits(SettingsService, _async_handler_class_);
  return _createClass(SettingsService, [{
    key: "overrides",
    set:
    /**
     * @hidden
     */
    function set(value) {
      this._overrides.next(value);
      this._applyCssVariables();
    }
    /** Get observable for key */
  }, {
    key: "listen",
    value: function listen(name) {
      if (!this._observables[name]) {
        this._subjects[name] = new rxjs_1.BehaviorSubject(null);
        this._observables[name] = this._subjects[name].asObservable();
      }
      return this._observables[name];
    }
    /** Update observable value for key */
  }, {
    key: "post",
    value: function post(name, value) {
      if (!this._observables[name]) {
        this._subjects[name] = new rxjs_1.BehaviorSubject(null);
        this._observables[name] = this._subjects[name].asObservable();
      }
      this._subjects[name].next(value);
    }
  }, {
    key: "value",
    value: function value(name) {
      return !this._observables[name] ? null : this._subjects[name].getValue();
    }
    /** Page title */
  }, {
    key: "title",
    get: function get() {
      return this._title.getTitle();
    },
    set: function set(value) {
      var _this$_analytics;
      this._title.setTitle("".concat(value, " | ").concat(this.get('app.name') || this._app_name));
      var tracking_id = this.get('app.analytics.tracking_id');
      if (!tracking_id) return;
      (_this$_analytics = this._analytics) === null || _this$_analytics === void 0 || _this$_analytics.send('pagename', {
        title: value
      });
    }
  }, {
    key: "init",
    value: (function () {
      var _init = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
        var _this$get,
          _this2 = this;
        var user, data;
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              if (this.get('debug')) window.debug = true;
              if ((_this$get = this.get('app')) !== null && _this$get !== void 0 && _this$get.name) {
                this._app_name = this.get('app').name;
              }
              this._app_name = location.pathname.replace(/[\\\/]/g, '').trim() || this._app_name;
              (0, general_1.setAppName)(this._app_name.split('-').join('_').toUpperCase());
              (0, general_1.log)('Settings', 'Successfully loaded settings');
              this._initialised.next(true);
              if (window.debug) {
                if (!window.application) window.application = {};
                window.application.settings = this;
              }
              this.subscription('user_settings', this._user_settings.subscribe(function (_) {
                return _this2._applyUserSettings(_);
              }));
              _context.next = 10;
              return user_state_1.current_user.pipe((0, operators_1.first)(function (_) {
                return !!_;
              })).toPromise();
            case 10:
              user = _context.sent;
              _context.next = 13;
              return (0, ts_client_1.showMetadata)(user.id, 'settings').toPromise();
            case 13:
              data = _context.sent;
              this._user_settings.next(data.details || {});
              this._initDarkMode();
              this._applyTheme();
              this._setFontSize();
            case 18:
            case "end":
              return _context.stop();
          }
        }, _callee, this);
      }));
      function init() {
        return _init.apply(this, arguments);
      }
      return init;
    }() /** Whether settings service has initialised */)
  }, {
    key: "app_name",
    get: function get() {
      return this._app_name;
    }
  }, {
    key: "time_format",
    get: function get() {
      return this.get('app.use_24_hour_time') ? 'HH:mm' : 'h:mm a';
    }
    /**
     * Get a setting
     * @param key Name of the setting. i.e. nested items can be grabbed using `.` to seperate key names
     */
  }, {
    key: "get",
    value: function get(key) {
      var keys = key.split('.');
      if (keys[0] !== 'app') {
        var _ref, _ref2;
        return (_ref = (_ref2 = (0, general_1.getItemWithKeys)(keys, this._pending_settings)) !== null && _ref2 !== void 0 ? _ref2 : (0, general_1.getItemWithKeys)(keys, this._user_settings.getValue())) !== null && _ref !== void 0 ? _ref : (0, general_1.getItemWithKeys)(keys, settings_1.DEFAULT_SETTINGS);
      }
      var override_settings = _toConsumableArray(this._overrides.getValue());
      var _iterator = _createForOfIteratorHelper(override_settings),
        _step;
      try {
        for (_iterator.s(); !(_step = _iterator.n()).done;) {
          var override = _step.value;
          var value = (0, general_1.getItemWithKeys)(keys.slice(1), override);
          if (value != null) {
            return value;
          }
        }
      } catch (err) {
        _iterator.e(err);
      } finally {
        _iterator.f();
      }
      return (0, general_1.getItemWithKeys)(keys, settings_1.DEFAULT_SETTINGS);
    }
  }, {
    key: "saveUserSetting",
    value: function saveUserSetting(name, value) {
      var _this3 = this;
      this._pending_settings[name] = value;
      if (name === 'dark_mode') this.setTheme(value ? 'dark' : '');
      if (name === 'font_size') this._setFontSize();
      this.timeout('save_settings', function () {
        return _this3._savePendingChanges();
      }, 5000);
    }
  }, {
    key: "overrideCssVariable",
    value: function overrideCssVariable(key, value) {
      var important = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;
      var element = document.getElementById("css-var-overrides+".concat(key));
      if (!element) {
        element = document.createElement('style');
        element.id = "css-var-overrides+".concat(key);
        document.head.appendChild(element);
      }
      element.innerText = "html, body { --".concat(key, ": ").concat(value, " ").concat(important ? '!important' : '', "}");
    }
  }, {
    key: "setTheme",
    value: function setTheme(theme) {
      var current_theme = this.get('theme');
      if (current_theme === theme) return;
      this.saveUserSetting('theme', theme);
      this._applyTheme();
    }
  }, {
    key: "_applyCssVariables",
    value: function _applyCssVariables() {
      var variable_map = this.get('app.css_variables') || {};
      var css_string = 'body { ';
      for (var key in variable_map) {
        css_string += "--".concat(key, ": ").concat(variable_map[key], "; ");
      }
      css_string += '}';
      var element = document.getElementById('css-var-overrides');
      if (!element) {
        element = document.createElement('style');
        element.id = 'css-var-overrides';
        document.head.appendChild(element);
      }
      element.innerText = css_string;
    }
  }, {
    key: "_savePendingChanges",
    value: function () {
      var _savePendingChanges2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {
        var user;
        return _regeneratorRuntime().wrap(function _callee2$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              user = (0, user_state_1.currentUser)();
              if (!(!(user !== null && user !== void 0 && user.id) || !Object.keys(this._pending_settings).length)) {
                _context2.next = 3;
                break;
              }
              return _context2.abrupt("return");
            case 3:
              _context2.next = 5;
              return (0, ts_client_1.updateMetadata)(user.id, {
                name: 'settings',
                description: '',
                details: _objectSpread(_objectSpread({}, this._user_settings.getValue()), this._pending_settings)
              }).toPromise();
            case 5:
              this._user_settings.next(_objectSpread(_objectSpread({}, this._user_settings.getValue()), this._pending_settings));
              this._pending_settings = {};
            case 7:
            case "end":
              return _context2.stop();
          }
        }, _callee2, this);
      }));
      function _savePendingChanges() {
        return _savePendingChanges2.apply(this, arguments);
      }
      return _savePendingChanges;
    }()
  }, {
    key: "_applyUserSettings",
    value: function () {
      var _applyUserSettings2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3(settings) {
        return _regeneratorRuntime().wrap(function _callee3$(_context3) {
          while (1) switch (_context3.prev = _context3.next) {
            case 0:
              if (settings.font_size) {}
            case 1:
            case "end":
              return _context3.stop();
          }
        }, _callee3);
      }));
      function _applyUserSettings(_x) {
        return _applyUserSettings2.apply(this, arguments);
      }
      return _applyUserSettings;
    }()
  }, {
    key: "_setFontSize",
    value: function _setFontSize() {
      if (!this.get('font_size')) return;
      this.overrideCssVariable('font-size', "".concat(this.get('font_size'), "px"));
    }
  }, {
    key: "_applyTheme",
    value: function _applyTheme() {
      var theme = this.get('theme');
      var class_list = document.body.classList.value.split(' ');
      var _iterator2 = _createForOfIteratorHelper(class_list),
        _step2;
      try {
        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
          var item = _step2.value;
          if (item.startsWith('theme-')) {
            document.body.classList.remove(item);
          }
        }
      } catch (err) {
        _iterator2.e(err);
      } finally {
        _iterator2.f();
      }
      if (theme) {
        document.body.classList.add("theme-".concat(theme));
      } else {
        document.body.classList.remove("theme-".concat(theme));
      }
    }
  }, {
    key: "_initDarkMode",
    value: function _initDarkMode() {
      var _window, _window2;
      if (this.get('theme') || true) return;
      var os_dark = (_window = window) !== null && _window !== void 0 && _window.matchMedia ? (_window2 = window) === null || _window2 === void 0 || (_window2 = _window2.matchMedia('(prefers-color-scheme: dark)')) === null || _window2 === void 0 ? void 0 : _window2.matches : false;
      this.setTheme(os_dark ? 'dark' : '');
    }
  }]);
}(async_handler_class_1.AsyncHandler);
_SettingsService = SettingsService;
_SettingsService.ɵfac = function SettingsService_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _SettingsService)(i0.ɵɵinject(i1.Title), i0.ɵɵinject(i2.GoogleAnalyticsService, 8));
};
_SettingsService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({
  token: _SettingsService,
  factory: _SettingsService.ɵfac,
  providedIn: 'root'
});
exports.SettingsService = SettingsService;

/***/ }),

/***/ 43060:
/*!*****************************************!*\
  !*** ./libs/common/src/lib/settings.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, exports) => {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.DEFAULT_SETTINGS = void 0;
/**
 * GENERAL APPLICATION SETTINGS
 */
var general = {
  banner: {
    id: '2',
    type: 'info',
    content: ""
  },
  copyright: 'PlaceOS',
  position: 'right'
};
/**
 * HELP/SUPPORT SETTINGS
 */
var help = {
  tiles: [{
    name: 'About PlaceOS',
    link: 'https://place.technology/resources',
    icon: {
      type: 'icon',
      "class": 'material-icons',
      content: 'dns'
    },
    background: 'https://static1.squarespace.com/static/52142586e4b0c09536a144ad/5c8ed203a4222fa1927bbab3/5cb7cba66e9a7f63584b4d39/1555549341622/too-many-buttons.jpg?format=2500w'
  }, {
    name: 'General Enquiries',
    link: 'mailto:equiries@place.technology?subject=Staff%20App%20Demo',
    icon: {
      type: 'icon',
      "class": 'material-icons',
      content: 'mail'
    },
    background: 'assets/img/it-banner.jpg'
  }, {
    name: 'Contact PlaceOS',
    link: 'https://place.technology/contact-1',
    icon: {
      type: 'icon',
      "class": 'material-icons',
      content: 'call'
    },
    background: 'https://images.squarespace-cdn.com/content/v1/52142586e4b0c09536a144ad/1569984759306-M6ZOKD64OG009U68MYUL/ke17ZwdGBToddI8pDm48kCX-V5vw-8h9IBXN10-_8XN7gQa3H78H3Y0txjaiv_0fDoOvxcdMmMKkDsyUqMSsMWxHk725yiiHCCLfrh8O1z4YTzHvnKhyp6Da-NYroOW3ZGjoBKy3azqku80C789l0p4Wyba38KfG317vYluk45_zZdtnDCZTLKcP2mivxmYi50xvY5saIGKMgOza9mH4XA/image-asset.jpeg?format=2500w'
  }, {
    name: 'About Us',
    link: 'https://place.technology/',
    icon: {
      type: 'icon',
      "class": 'material-icons',
      content: 'business'
    },
    background: 'https://images.squarespace-cdn.com/content/v1/52142586e4b0c09536a144ad/1569985184499-QF839PTJ2EV30KIZF59X/ke17ZwdGBToddI8pDm48kLkXF2pIyv_F2eUT9F60jBl7gQa3H78H3Y0txjaiv_0fDoOvxcdMmMKkDsyUqMSsMWxHk725yiiHCCLfrh8O1z4YTzHvnKhyp6Da-NYroOW3ZGjoBKy3azqku80C789l0iyqMbMesKd95J-X4EagrgU9L3Sa3U8cogeb0tjXbfawd0urKshkc5MgdBeJmALQKw/image-asset.jpeg?format=2500w'
  }],
  columns: 2
};
/**
 * BOOKING FLOW SETTINGS
 */
var events = {
  multiple_spaces: false,
  desk_start: 9,
  can_book_for_others: false,
  has_catering: true
};
/*===========================*\
||  SPACE LISTING SETTINGS   ||
\*===========================*/
var space_display = {
  show_images: false
};
/*===========================*\
||  USER DIRECTORY SETTINGS  ||
\*===========================*/
var directory = {
  show_avatars: true,
  min_search_length: 3
};
/*===========================*\
||    SCHEULDE SETTINGS   ||
\*===========================*/
var schedule = {
  legend: [{
    name: 'Accepted',
    color: '#21A453'
  }, {
    name: 'Pending',
    color: '#ffbf1f'
  }, {
    name: 'Rejected',
    color: '#f44336'
  }]
};
/*===========================*\
||    EXPLORE MAP SETTINGS   ||
\*===========================*/
var explore = {
  colors: {
    'space-free': '#43a047',
    'space-pending': '#ffb300',
    'space-busy': '#e53935',
    'space-not-bookable': '#ccc',
    'space-unknown': '#000',
    // 'desk-available': '#43a047',
    // 'desk-available-stroke': '#1b5e20',
    // 'desk-unavailable': '#e53935',
    // 'desk-unavailable-stroke': '#b71c1c',
    // 'desk-reserved': '#ffb300',
    // 'desk-reserved-stroke': '#ff6f00',
    // 'desk-not-bookable': '#fff',
    // 'desk-not-bookable-stroke': '#ccc',
    'zone-low': '#43a047',
    'zone-medium': '#ffb300',
    'zone-high': '#e53935'
  },
  can_select_building: true,
  show_legend_group_names: true,
  legend: {
    Spaces: [{
      key: 'space-free',
      name: 'Space Available'
    }, {
      key: 'space-pending',
      name: 'Space Pending'
    }, {
      key: 'space-busy',
      name: 'Space in Use'
    }, {
      key: 'space-not-bookable',
      name: 'Space not Bookable'
    }, {
      key: 'space-unknown',
      name: 'Unknown'
    }]
  }
};
/**
 * ROOT APPLICATION SETTINGS
 */
var app = {
  name: 'Workplace',
  title: 'Workplace Application',
  description: 'PlaceOS Workplace UI written with Angular Framework',
  short_name: 'STAFF',
  logo_light: {
    type: 'img',
    src: 'assets/logo-light.svg'
  },
  logo_dark: {
    type: 'img',
    src: 'assets/logo-dark.svg'
  },
  features: ['spaces', 'desks', 'explore', 'parking', 'help', 'schedule'],
  can_deliver: true,
  general: general,
  help: help,
  events: events,
  space_display: space_display,
  directory: directory,
  explore: explore,
  desks: {
    can_book_for_others: true,
    allow_groups: true,
    auto_allocation: false
  },
  analytics: {
    enabled: true,
    tracking_id: ''
  },
  hide_contacts: false,
  schedule: schedule,
  departments: {
    user: {
      level: 'bld-01_lvl-10',
      centered_at: 'table-10.008'
    }
  }
};
/**
 * ROOT SETTIGNS
 */
exports.DEFAULT_SETTINGS = {
  debug: true,
  composer: {
    domain: '',
    route: '/staff',
    protocol: '',
    port: '',
    use_domain: false,
    local_login: false
  },
  app: app
};

/***/ }),

/***/ 1284:
/*!*******************************************!*\
  !*** ./libs/common/src/lib/shorten.fn.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _regeneratorRuntime = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/regeneratorRuntime.js */ 8698)["default"]);
var _asyncToGenerator = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/asyncToGenerator.js */ 95386)["default"]);
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.queryShortURLs = queryShortURLs;
exports.showShortURL = showShortURL;
exports.getShortUrlQRCode = getShortUrlQRCode;
exports.createShortURL = createShortURL;
exports.updateShortURL = updateShortURL;
exports.saveShortURL = saveShortURL;
exports.patchShortURL = patchShortURL;
exports.deleteShortURL = deleteShortURL;
var ts_client_1 = __webpack_require__(/*! @placeos/ts-client */ 35713);
var operators_1 = __webpack_require__(/*! rxjs/operators */ 97303);
var ENDPOINT = '/api/engine/v2/short_url';
function queryShortURLs() {
  var q = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
  return (0, ts_client_1.query)({
    query_params: q,
    fn: function fn(item) {
      return item;
    },
    endpoint: ENDPOINT,
    path: ''
  }).pipe((0, operators_1.map)(function (_) {
    return _.data;
  }));
}
function showShortURL(id) {
  return (0, ts_client_1.get)("".concat(ENDPOINT, "/").concat(id)).pipe((0, operators_1.map)(function (_) {
    return _;
  }));
}
var QR_STORE = new Map();
function getShortUrlQRCode(_x) {
  return _getShortUrlQRCode.apply(this, arguments);
}
function _getShortUrlQRCode() {
  _getShortUrlQRCode = _asyncToGenerator(function (id) {
    var format = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'svg';
    return /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
      var key, tkn, response, blob, url;
      return _regeneratorRuntime().wrap(function _callee$(_context) {
        while (1) switch (_context.prev = _context.next) {
          case 0:
            key = "".concat(id, ".").concat(format);
            if (!QR_STORE.has(key)) {
              _context.next = 3;
              break;
            }
            return _context.abrupt("return", QR_STORE.get(key));
          case 3:
            tkn = (0, ts_client_1.token)();
            document.cookie = "".concat(tkn === 'x-api-key' ? 'api-key=' + encodeURIComponent((0, ts_client_1.apiKey)()) : 'bearer_token=' + encodeURIComponent(tkn), ";max-age=30;path=/api/engine/v2/short_url/;samesite=strict;").concat(location.protocol === 'https:' ? 'secure;' : '');
            _context.next = 7;
            return fetch("".concat(ENDPOINT, "/").concat(id, "/qr_code.").concat(format));
          case 7:
            response = _context.sent;
            _context.next = 10;
            return response.blob();
          case 10:
            blob = _context.sent;
            url = URL.createObjectURL(blob);
            QR_STORE.set(key, url);
            return _context.abrupt("return", url);
          case 14:
          case "end":
            return _context.stop();
        }
      }, _callee);
    })();
  });
  return _getShortUrlQRCode.apply(this, arguments);
}
function createShortURL(data) {
  return (0, ts_client_1.post)(ENDPOINT, data).pipe((0, operators_1.map)(function (_) {
    return _;
  }));
}
function updateShortURL(id, data) {
  return (0, ts_client_1.put)("".concat(ENDPOINT, "/").concat(id), data).pipe((0, operators_1.map)(function (_) {
    return _;
  }));
}
function saveShortURL(data) {
  return data.id ? updateShortURL(data.id, data) : createShortURL(data);
}
function patchShortURL(id, data) {
  return (0, ts_client_1.patch)("".concat(ENDPOINT, "/").concat(id), data).pipe((0, operators_1.map)(function (_) {
    return _;
  }));
}
function deleteShortURL(id) {
  return (0, ts_client_1.del)("".concat(ENDPOINT, "/").concat(id)).pipe((0, operators_1.map)(function (_) {
    return null;
  }));
}

/***/ }),

/***/ 22310:
/*!*********************************************!*\
  !*** ./libs/common/src/lib/spec-helpers.ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _regeneratorRuntime = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/regeneratorRuntime.js */ 8698)["default"]);
var _asyncToGenerator = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/asyncToGenerator.js */ 95386)["default"]);
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.whenChangesStable = whenChangesStable;
function whenChangesStable(_x) {
  return _whenChangesStable.apply(this, arguments);
}
function _whenChangesStable() {
  _whenChangesStable = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(spectator) {
    return _regeneratorRuntime().wrap(function _callee$(_context) {
      while (1) switch (_context.prev = _context.next) {
        case 0:
          spectator.detectChanges();
          _context.next = 3;
          return spectator.fixture.whenStable();
        case 3:
          spectator.detectChanges();
        case 4:
        case "end":
          return _context.stop();
      }
    }, _callee);
  }));
  return _whenChangesStable.apply(this, arguments);
}

/***/ }),

/***/ 35774:
/*!*************************************************!*\
  !*** ./libs/common/src/lib/timezone-helpers.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _Intl;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.LOCAL_TIMEZONE = void 0;
exports.localToTimezone = localToTimezone;
exports.timezoneToLocal = timezoneToLocal;
exports.getTimezoneOffsetString = getTimezoneOffsetString;
exports.getTimezoneOffsetInMinutes = getTimezoneOffsetInMinutes;
exports.getTimezoneDifferenceInHours = getTimezoneDifferenceInHours;
var date_fns_1 = __webpack_require__(/*! date-fns */ 25773);
var date_fns_tz_1 = __webpack_require__(/*! date-fns-tz */ 79315);
var general_1 = __webpack_require__(/*! ./general */ 64217);
exports.LOCAL_TIMEZONE = ((_Intl = Intl) === null || _Intl === void 0 || (_Intl = _Intl.DateTimeFormat()) === null || _Intl === void 0 || (_Intl = _Intl.resolvedOptions()) === null || _Intl === void 0 ? void 0 : _Intl.timeZone) || 'Australia/Sydney';
function localToTimezone(date) {
  var tz = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : exports.LOCAL_TIMEZONE;
  var offset_diff = (0, date_fns_tz_1.getTimezoneOffset)(tz) - (0, date_fns_tz_1.getTimezoneOffset)(exports.LOCAL_TIMEZONE);
  return (0, date_fns_1.addMilliseconds)(date, offset_diff).valueOf();
}
function timezoneToLocal(date) {
  var tz = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : exports.LOCAL_TIMEZONE;
  var offset_diff = (0, date_fns_tz_1.getTimezoneOffset)(exports.LOCAL_TIMEZONE) - (0, date_fns_tz_1.getTimezoneOffset)(tz);
  return (0, date_fns_1.addMilliseconds)(date, offset_diff).valueOf();
}
var TIMZONE_OFFSET_STRINGS = {};
function getTimezoneOffsetString(tz) {
  if (TIMZONE_OFFSET_STRINGS[tz]) return TIMZONE_OFFSET_STRINGS[tz];
  var offset = getTimezoneOffsetInMinutes(tz);
  var hours = Math.floor(Math.abs(offset) / 60);
  var minutes = Math.abs(offset) % 60;
  var output = "".concat(offset > 0 ? '+' : '-').concat((0, general_1.padLength)(hours, 2)).concat((0, general_1.padLength)(minutes, 2));
  TIMZONE_OFFSET_STRINGS[tz] = output;
  return output;
}
function getTimezoneOffsetInMinutes(timeZone) {
  var date = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : new Date();
  var options = {
    timeZone: timeZone,
    hour12: false,
    timeZoneName: 'short'
  };
  var formatter = new Intl.DateTimeFormat([], options);
  var parts = formatter.formatToParts(date);
  // Find the timeZoneName part which contains the GMT offset
  var tzOffsetPart = parts.find(function (part) {
    return part.type === 'timeZoneName';
  });
  var tzOffsetString = tzOffsetPart ? tzOffsetPart.value : 'GMT';
  // Match the offset from the string (e.g., "GMT+0530")
  var offsetMatch = tzOffsetString.match(/GMT([+-])(\d{1,2})(\d{2})?/);
  if (!offsetMatch) {
    return 0; // If no match, assume UTC (offset 0)
  }
  var sign = offsetMatch[1] === '+' ? 1 : -1;
  var hours = parseInt(offsetMatch[2], 10);
  var minutes = offsetMatch[3] ? parseInt(offsetMatch[3], 10) : 0;
  return sign * (hours * 60 + minutes);
}
function getTimezoneDifferenceInHours(src_tz) {
  var dest_tz = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : exports.LOCAL_TIMEZONE;
  var date = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : new Date();
  var offset1 = getTimezoneOffsetInMinutes(src_tz, date);
  var offset2 = getTimezoneOffsetInMinutes(dest_tz, date);
  // Calculate the difference in hours
  return (offset1 - offset2) / 60;
}

/***/ }),

/***/ 14369:
/*!******************************************!*\
  !*** ./libs/common/src/lib/timezones.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.TIMEZONES_IANA = exports.TIMEZONES = void 0;
var general_1 = __webpack_require__(/*! ./general */ 64217);
exports.TIMEZONES = [{
  "value": "Dateline Standard Time",
  "abbr": "DST",
  "offset": -12,
  "isdst": false,
  "text": "(UTC-12:00) International Date Line West",
  "utc": ["Etc/GMT+12"]
}, {
  "value": "UTC-11",
  "abbr": "U",
  "offset": -11,
  "isdst": false,
  "text": "(UTC-11:00) Coordinated Universal Time-11",
  "utc": ["Etc/GMT+11", "Pacific/Midway", "Pacific/Niue", "Pacific/Pago_Pago"]
}, {
  "value": "Hawaiian Standard Time",
  "abbr": "HST",
  "offset": -10,
  "isdst": false,
  "text": "(UTC-10:00) Hawaii",
  "utc": ["Etc/GMT+10", "Pacific/Honolulu", "Pacific/Johnston", "Pacific/Rarotonga", "Pacific/Tahiti"]
}, {
  "value": "Alaskan Standard Time",
  "abbr": "AKDT",
  "offset": -8,
  "isdst": true,
  "text": "(UTC-09:00) Alaska",
  "utc": ["America/Anchorage", "America/Juneau", "America/Nome", "America/Sitka", "America/Yakutat"]
}, {
  "value": "Pacific Standard Time (Mexico)",
  "abbr": "PDT",
  "offset": -7,
  "isdst": true,
  "text": "(UTC-08:00) Baja California",
  "utc": ["America/Santa_Isabel"]
}, {
  "value": "Pacific Daylight Time",
  "abbr": "PDT",
  "offset": -7,
  "isdst": true,
  "text": "(UTC-07:00) Pacific Time (US & Canada)",
  "utc": ["America/Dawson", "America/Los_Angeles", "America/Tijuana", "America/Vancouver", "America/Whitehorse"]
}, {
  "value": "Pacific Standard Time",
  "abbr": "PST",
  "offset": -8,
  "isdst": false,
  "text": "(UTC-08:00) Pacific Time (US & Canada)",
  "utc": ["America/Dawson", "America/Los_Angeles", "America/Tijuana", "America/Vancouver", "America/Whitehorse", "PST8PDT"]
}, {
  "value": "US Mountain Standard Time",
  "abbr": "UMST",
  "offset": -7,
  "isdst": false,
  "text": "(UTC-07:00) Arizona",
  "utc": ["America/Creston", "America/Dawson_Creek", "America/Hermosillo", "America/Phoenix", "Etc/GMT+7"]
}, {
  "value": "Mountain Standard Time (Mexico)",
  "abbr": "MDT",
  "offset": -6,
  "isdst": true,
  "text": "(UTC-07:00) Chihuahua, La Paz, Mazatlan",
  "utc": ["America/Chihuahua", "America/Mazatlan"]
}, {
  "value": "Mountain Standard Time",
  "abbr": "MDT",
  "offset": -6,
  "isdst": true,
  "text": "(UTC-07:00) Mountain Time (US & Canada)",
  "utc": ["America/Boise", "America/Cambridge_Bay", "America/Denver", "America/Edmonton", "America/Inuvik", "America/Ojinaga", "America/Yellowknife", "MST7MDT"]
}, {
  "value": "Central America Standard Time",
  "abbr": "CAST",
  "offset": -6,
  "isdst": false,
  "text": "(UTC-06:00) Central America",
  "utc": ["America/Belize", "America/Costa_Rica", "America/El_Salvador", "America/Guatemala", "America/Managua", "America/Tegucigalpa", "Etc/GMT+6", "Pacific/Galapagos"]
}, {
  "value": "Central Standard Time",
  "abbr": "CDT",
  "offset": -5,
  "isdst": true,
  "text": "(UTC-06:00) Central Time (US & Canada)",
  "utc": ["America/Chicago", "America/Indiana/Knox", "America/Indiana/Tell_City", "America/Matamoros", "America/Menominee", "America/North_Dakota/Beulah", "America/North_Dakota/Center", "America/North_Dakota/New_Salem", "America/Rainy_River", "America/Rankin_Inlet", "America/Resolute", "America/Winnipeg", "CST6CDT"]
}, {
  "value": "Central Standard Time (Mexico)",
  "abbr": "CDT",
  "offset": -5,
  "isdst": true,
  "text": "(UTC-06:00) Guadalajara, Mexico City, Monterrey",
  "utc": ["America/Bahia_Banderas", "America/Cancun", "America/Merida", "America/Mexico_City", "America/Monterrey"]
}, {
  "value": "Canada Central Standard Time",
  "abbr": "CCST",
  "offset": -6,
  "isdst": false,
  "text": "(UTC-06:00) Saskatchewan",
  "utc": ["America/Regina", "America/Swift_Current"]
}, {
  "value": "SA Pacific Standard Time",
  "abbr": "SPST",
  "offset": -5,
  "isdst": false,
  "text": "(UTC-05:00) Bogota, Lima, Quito",
  "utc": ["America/Bogota", "America/Cayman", "America/Coral_Harbour", "America/Eirunepe", "America/Guayaquil", "America/Jamaica", "America/Lima", "America/Panama", "America/Rio_Branco", "Etc/GMT+5"]
}, {
  "value": "Eastern Standard Time",
  "abbr": "EDT",
  "offset": -4,
  "isdst": true,
  "text": "(UTC-05:00) Eastern Time (US & Canada)",
  "utc": ["America/Detroit", "America/Havana", "America/Indiana/Petersburg", "America/Indiana/Vincennes", "America/Indiana/Winamac", "America/Iqaluit", "America/Kentucky/Monticello", "America/Louisville", "America/Montreal", "America/Nassau", "America/New_York", "America/Nipigon", "America/Pangnirtung", "America/Port-au-Prince", "America/Thunder_Bay", "America/Toronto", "EST5EDT"]
}, {
  "value": "US Eastern Standard Time",
  "abbr": "UEDT",
  "offset": -4,
  "isdst": true,
  "text": "(UTC-05:00) Indiana (East)",
  "utc": ["America/Indiana/Marengo", "America/Indiana/Vevay", "America/Indianapolis"]
}, {
  "value": "Venezuela Standard Time",
  "abbr": "VST",
  "offset": -4.5,
  "isdst": false,
  "text": "(UTC-04:30) Caracas",
  "utc": ["America/Caracas"]
}, {
  "value": "Paraguay Standard Time",
  "abbr": "PYT",
  "offset": -4,
  "isdst": false,
  "text": "(UTC-04:00) Asuncion",
  "utc": ["America/Asuncion"]
}, {
  "value": "Atlantic Standard Time",
  "abbr": "ADT",
  "offset": -3,
  "isdst": true,
  "text": "(UTC-04:00) Atlantic Time (Canada)",
  "utc": ["America/Glace_Bay", "America/Goose_Bay", "America/Halifax", "America/Moncton", "America/Thule", "Atlantic/Bermuda"]
}, {
  "value": "Central Brazilian Standard Time",
  "abbr": "CBST",
  "offset": -4,
  "isdst": false,
  "text": "(UTC-04:00) Cuiaba",
  "utc": ["America/Campo_Grande", "America/Cuiaba"]
}, {
  "value": "SA Western Standard Time",
  "abbr": "SWST",
  "offset": -4,
  "isdst": false,
  "text": "(UTC-04:00) Georgetown, La Paz, Manaus, San Juan",
  "utc": ["America/Anguilla", "America/Antigua", "America/Aruba", "America/Barbados", "America/Blanc-Sablon", "America/Boa_Vista", "America/Curacao", "America/Dominica", "America/Grand_Turk", "America/Grenada", "America/Guadeloupe", "America/Guyana", "America/Kralendijk", "America/La_Paz", "America/Lower_Princes", "America/Manaus", "America/Marigot", "America/Martinique", "America/Montserrat", "America/Port_of_Spain", "America/Porto_Velho", "America/Puerto_Rico", "America/Santo_Domingo", "America/St_Barthelemy", "America/St_Kitts", "America/St_Lucia", "America/St_Thomas", "America/St_Vincent", "America/Tortola", "Etc/GMT+4"]
}, {
  "value": "Pacific SA Standard Time",
  "abbr": "PSST",
  "offset": -4,
  "isdst": false,
  "text": "(UTC-04:00) Santiago",
  "utc": ["America/Santiago", "Antarctica/Palmer"]
}, {
  "value": "Newfoundland Standard Time",
  "abbr": "NDT",
  "offset": -2.5,
  "isdst": true,
  "text": "(UTC-03:30) Newfoundland",
  "utc": ["America/St_Johns"]
}, {
  "value": "E. South America Standard Time",
  "abbr": "ESAST",
  "offset": -3,
  "isdst": false,
  "text": "(UTC-03:00) Brasilia",
  "utc": ["America/Sao_Paulo"]
}, {
  "value": "Argentina Standard Time",
  "abbr": "AST",
  "offset": -3,
  "isdst": false,
  "text": "(UTC-03:00) Buenos Aires",
  "utc": ["America/Argentina/La_Rioja", "America/Argentina/Rio_Gallegos", "America/Argentina/Salta", "America/Argentina/San_Juan", "America/Argentina/San_Luis", "America/Argentina/Tucuman", "America/Argentina/Ushuaia", "America/Buenos_Aires", "America/Catamarca", "America/Cordoba", "America/Jujuy", "America/Mendoza"]
}, {
  "value": "SA Eastern Standard Time",
  "abbr": "SEST",
  "offset": -3,
  "isdst": false,
  "text": "(UTC-03:00) Cayenne, Fortaleza",
  "utc": ["America/Araguaina", "America/Belem", "America/Cayenne", "America/Fortaleza", "America/Maceio", "America/Paramaribo", "America/Recife", "America/Santarem", "Antarctica/Rothera", "Atlantic/Stanley", "Etc/GMT+3"]
}, {
  "value": "Greenland Standard Time",
  "abbr": "GDT",
  "offset": -3,
  "isdst": true,
  "text": "(UTC-03:00) Greenland",
  "utc": ["America/Godthab"]
}, {
  "value": "Montevideo Standard Time",
  "abbr": "MST",
  "offset": -3,
  "isdst": false,
  "text": "(UTC-03:00) Montevideo",
  "utc": ["America/Montevideo"]
}, {
  "value": "Bahia Standard Time",
  "abbr": "BST",
  "offset": -3,
  "isdst": false,
  "text": "(UTC-03:00) Salvador",
  "utc": ["America/Bahia"]
}, {
  "value": "UTC-02",
  "abbr": "U",
  "offset": -2,
  "isdst": false,
  "text": "(UTC-02:00) Coordinated Universal Time-02",
  "utc": ["America/Noronha", "Atlantic/South_Georgia", "Etc/GMT+2"]
}, {
  "value": "Mid-Atlantic Standard Time",
  "abbr": "MDT",
  "offset": -1,
  "isdst": true,
  "text": "(UTC-02:00) Mid-Atlantic - Old",
  "utc": []
}, {
  "value": "Azores Standard Time",
  "abbr": "ADT",
  "offset": 0,
  "isdst": true,
  "text": "(UTC-01:00) Azores",
  "utc": ["America/Scoresbysund", "Atlantic/Azores"]
}, {
  "value": "Cape Verde Standard Time",
  "abbr": "CVST",
  "offset": -1,
  "isdst": false,
  "text": "(UTC-01:00) Cape Verde Is.",
  "utc": ["Atlantic/Cape_Verde", "Etc/GMT+1"]
}, {
  "value": "Morocco Standard Time",
  "abbr": "MDT",
  "offset": 1,
  "isdst": true,
  "text": "(UTC) Casablanca",
  "utc": ["Africa/Casablanca", "Africa/El_Aaiun"]
}, {
  "value": "UTC",
  "abbr": "UTC",
  "offset": 0,
  "isdst": false,
  "text": "(UTC) Coordinated Universal Time",
  "utc": ["America/Danmarkshavn", "Etc/GMT"]
}, {
  "value": "GMT Standard Time",
  "abbr": "GMT",
  "offset": 0,
  "isdst": false,
  "text": "(UTC) Edinburgh, London",
  "utc": ["Europe/Isle_of_Man", "Europe/Guernsey", "Europe/Jersey", "Europe/London"]
}, {
  "value": "British Summer Time",
  "abbr": "BST",
  "offset": 1,
  "isdst": true,
  "text": "(UTC+01:00) Edinburgh, London",
  "utc": ["Europe/Isle_of_Man", "Europe/Guernsey", "Europe/Jersey", "Europe/London"]
}, {
  "value": "GMT Standard Time",
  "abbr": "GDT",
  "offset": 1,
  "isdst": true,
  "text": "(UTC) Dublin, Lisbon",
  "utc": ["Atlantic/Canary", "Atlantic/Faeroe", "Atlantic/Madeira", "Europe/Dublin", "Europe/Lisbon"]
}, {
  "value": "Greenwich Standard Time",
  "abbr": "GST",
  "offset": 0,
  "isdst": false,
  "text": "(UTC) Monrovia, Reykjavik",
  "utc": ["Africa/Abidjan", "Africa/Accra", "Africa/Bamako", "Africa/Banjul", "Africa/Bissau", "Africa/Conakry", "Africa/Dakar", "Africa/Freetown", "Africa/Lome", "Africa/Monrovia", "Africa/Nouakchott", "Africa/Ouagadougou", "Africa/Sao_Tome", "Atlantic/Reykjavik", "Atlantic/St_Helena"]
}, {
  "value": "W. Europe Standard Time",
  "abbr": "WEDT",
  "offset": 2,
  "isdst": true,
  "text": "(UTC+01:00) Amsterdam, Berlin, Bern, Rome, Stockholm, Vienna",
  "utc": ["Arctic/Longyearbyen", "Europe/Amsterdam", "Europe/Andorra", "Europe/Berlin", "Europe/Busingen", "Europe/Gibraltar", "Europe/Luxembourg", "Europe/Malta", "Europe/Monaco", "Europe/Oslo", "Europe/Rome", "Europe/San_Marino", "Europe/Stockholm", "Europe/Vaduz", "Europe/Vatican", "Europe/Vienna", "Europe/Zurich"]
}, {
  "value": "Central Europe Standard Time",
  "abbr": "CEDT",
  "offset": 2,
  "isdst": true,
  "text": "(UTC+01:00) Belgrade, Bratislava, Budapest, Ljubljana, Prague",
  "utc": ["Europe/Belgrade", "Europe/Bratislava", "Europe/Budapest", "Europe/Ljubljana", "Europe/Podgorica", "Europe/Prague", "Europe/Tirane"]
}, {
  "value": "Romance Standard Time",
  "abbr": "RDT",
  "offset": 2,
  "isdst": true,
  "text": "(UTC+01:00) Brussels, Copenhagen, Madrid, Paris",
  "utc": ["Africa/Ceuta", "Europe/Brussels", "Europe/Copenhagen", "Europe/Madrid", "Europe/Paris"]
}, {
  "value": "Central European Standard Time",
  "abbr": "CEDT",
  "offset": 2,
  "isdst": true,
  "text": "(UTC+01:00) Sarajevo, Skopje, Warsaw, Zagreb",
  "utc": ["Europe/Sarajevo", "Europe/Skopje", "Europe/Warsaw", "Europe/Zagreb"]
}, {
  "value": "W. Central Africa Standard Time",
  "abbr": "WCAST",
  "offset": 1,
  "isdst": false,
  "text": "(UTC+01:00) West Central Africa",
  "utc": ["Africa/Algiers", "Africa/Bangui", "Africa/Brazzaville", "Africa/Douala", "Africa/Kinshasa", "Africa/Lagos", "Africa/Libreville", "Africa/Luanda", "Africa/Malabo", "Africa/Ndjamena", "Africa/Niamey", "Africa/Porto-Novo", "Africa/Tunis", "Etc/GMT-1"]
}, {
  "value": "Namibia Standard Time",
  "abbr": "NST",
  "offset": 1,
  "isdst": false,
  "text": "(UTC+01:00) Windhoek",
  "utc": ["Africa/Windhoek"]
}, {
  "value": "GTB Standard Time",
  "abbr": "GDT",
  "offset": 3,
  "isdst": true,
  "text": "(UTC+02:00) Athens, Bucharest",
  "utc": ["Asia/Nicosia", "Europe/Athens", "Europe/Bucharest", "Europe/Chisinau"]
}, {
  "value": "Middle East Standard Time",
  "abbr": "MEDT",
  "offset": 3,
  "isdst": true,
  "text": "(UTC+02:00) Beirut",
  "utc": ["Asia/Beirut"]
}, {
  "value": "Egypt Standard Time",
  "abbr": "EST",
  "offset": 2,
  "isdst": false,
  "text": "(UTC+02:00) Cairo",
  "utc": ["Africa/Cairo"]
}, {
  "value": "Syria Standard Time",
  "abbr": "SDT",
  "offset": 3,
  "isdst": true,
  "text": "(UTC+02:00) Damascus",
  "utc": ["Asia/Damascus"]
}, {
  "value": "E. Europe Standard Time",
  "abbr": "EEDT",
  "offset": 3,
  "isdst": true,
  "text": "(UTC+02:00) E. Europe",
  "utc": ["Asia/Nicosia", "Europe/Athens", "Europe/Bucharest", "Europe/Chisinau", "Europe/Helsinki", "Europe/Kiev", "Europe/Mariehamn", "Europe/Nicosia", "Europe/Riga", "Europe/Sofia", "Europe/Tallinn", "Europe/Uzhgorod", "Europe/Vilnius", "Europe/Zaporozhye"]
}, {
  "value": "South Africa Standard Time",
  "abbr": "SAST",
  "offset": 2,
  "isdst": false,
  "text": "(UTC+02:00) Harare, Pretoria",
  "utc": ["Africa/Blantyre", "Africa/Bujumbura", "Africa/Gaborone", "Africa/Harare", "Africa/Johannesburg", "Africa/Kigali", "Africa/Lubumbashi", "Africa/Lusaka", "Africa/Maputo", "Africa/Maseru", "Africa/Mbabane", "Etc/GMT-2"]
}, {
  "value": "FLE Standard Time",
  "abbr": "FDT",
  "offset": 3,
  "isdst": true,
  "text": "(UTC+02:00) Helsinki, Kyiv, Riga, Sofia, Tallinn, Vilnius",
  "utc": ["Europe/Helsinki", "Europe/Kiev", "Europe/Mariehamn", "Europe/Riga", "Europe/Sofia", "Europe/Tallinn", "Europe/Uzhgorod", "Europe/Vilnius", "Europe/Zaporozhye"]
}, {
  "value": "Turkey Standard Time",
  "abbr": "TDT",
  "offset": 3,
  "isdst": false,
  "text": "(UTC+03:00) Istanbul",
  "utc": ["Europe/Istanbul"]
}, {
  "value": "Israel Standard Time",
  "abbr": "JDT",
  "offset": 3,
  "isdst": true,
  "text": "(UTC+02:00) Jerusalem",
  "utc": ["Asia/Jerusalem"]
}, {
  "value": "Libya Standard Time",
  "abbr": "LST",
  "offset": 2,
  "isdst": false,
  "text": "(UTC+02:00) Tripoli",
  "utc": ["Africa/Tripoli"]
}, {
  "value": "Jordan Standard Time",
  "abbr": "JST",
  "offset": 3,
  "isdst": false,
  "text": "(UTC+03:00) Amman",
  "utc": ["Asia/Amman"]
}, {
  "value": "Arabic Standard Time",
  "abbr": "AST",
  "offset": 3,
  "isdst": false,
  "text": "(UTC+03:00) Baghdad",
  "utc": ["Asia/Baghdad"]
}, {
  "value": "Kaliningrad Standard Time",
  "abbr": "KST",
  "offset": 3,
  "isdst": false,
  "text": "(UTC+02:00) Kaliningrad",
  "utc": ["Europe/Kaliningrad"]
}, {
  "value": "Arab Standard Time",
  "abbr": "AST",
  "offset": 3,
  "isdst": false,
  "text": "(UTC+03:00) Kuwait, Riyadh",
  "utc": ["Asia/Aden", "Asia/Bahrain", "Asia/Kuwait", "Asia/Qatar", "Asia/Riyadh"]
}, {
  "value": "E. Africa Standard Time",
  "abbr": "EAST",
  "offset": 3,
  "isdst": false,
  "text": "(UTC+03:00) Nairobi",
  "utc": ["Africa/Addis_Ababa", "Africa/Asmera", "Africa/Dar_es_Salaam", "Africa/Djibouti", "Africa/Juba", "Africa/Kampala", "Africa/Khartoum", "Africa/Mogadishu", "Africa/Nairobi", "Antarctica/Syowa", "Etc/GMT-3", "Indian/Antananarivo", "Indian/Comoro", "Indian/Mayotte"]
}, {
  "value": "Moscow Standard Time",
  "abbr": "MSK",
  "offset": 3,
  "isdst": false,
  "text": "(UTC+03:00) Moscow, St. Petersburg, Volgograd, Minsk",
  "utc": ["Europe/Kirov", "Europe/Moscow", "Europe/Simferopol", "Europe/Volgograd", "Europe/Minsk"]
}, {
  "value": "Samara Time",
  "abbr": "SAMT",
  "offset": 4,
  "isdst": false,
  "text": "(UTC+04:00) Samara, Ulyanovsk, Saratov",
  "utc": ["Europe/Astrakhan", "Europe/Samara", "Europe/Ulyanovsk"]
}, {
  "value": "Iran Standard Time",
  "abbr": "IDT",
  "offset": 4.5,
  "isdst": true,
  "text": "(UTC+03:30) Tehran",
  "utc": ["Asia/Tehran"]
}, {
  "value": "Arabian Standard Time",
  "abbr": "AST",
  "offset": 4,
  "isdst": false,
  "text": "(UTC+04:00) Abu Dhabi, Muscat",
  "utc": ["Asia/Dubai", "Asia/Muscat", "Etc/GMT-4"]
}, {
  "value": "Azerbaijan Standard Time",
  "abbr": "ADT",
  "offset": 5,
  "isdst": true,
  "text": "(UTC+04:00) Baku",
  "utc": ["Asia/Baku"]
}, {
  "value": "Mauritius Standard Time",
  "abbr": "MST",
  "offset": 4,
  "isdst": false,
  "text": "(UTC+04:00) Port Louis",
  "utc": ["Indian/Mahe", "Indian/Mauritius", "Indian/Reunion"]
}, {
  "value": "Georgian Standard Time",
  "abbr": "GET",
  "offset": 4,
  "isdst": false,
  "text": "(UTC+04:00) Tbilisi",
  "utc": ["Asia/Tbilisi"]
}, {
  "value": "Caucasus Standard Time",
  "abbr": "CST",
  "offset": 4,
  "isdst": false,
  "text": "(UTC+04:00) Yerevan",
  "utc": ["Asia/Yerevan"]
}, {
  "value": "Afghanistan Standard Time",
  "abbr": "AST",
  "offset": 4.5,
  "isdst": false,
  "text": "(UTC+04:30) Kabul",
  "utc": ["Asia/Kabul"]
}, {
  "value": "West Asia Standard Time",
  "abbr": "WAST",
  "offset": 5,
  "isdst": false,
  "text": "(UTC+05:00) Ashgabat, Tashkent",
  "utc": ["Antarctica/Mawson", "Asia/Aqtau", "Asia/Aqtobe", "Asia/Ashgabat", "Asia/Dushanbe", "Asia/Oral", "Asia/Samarkand", "Asia/Tashkent", "Etc/GMT-5", "Indian/Kerguelen", "Indian/Maldives"]
}, {
  "value": "Yekaterinburg Time",
  "abbr": "YEKT",
  "offset": 5,
  "isdst": false,
  "text": "(UTC+05:00) Yekaterinburg",
  "utc": ["Asia/Yekaterinburg"]
}, {
  "value": "Pakistan Standard Time",
  "abbr": "PKT",
  "offset": 5,
  "isdst": false,
  "text": "(UTC+05:00) Islamabad, Karachi",
  "utc": ["Asia/Karachi"]
}, {
  "value": "India Standard Time",
  "abbr": "IST",
  "offset": 5.5,
  "isdst": false,
  "text": "(UTC+05:30) Chennai, Kolkata, Mumbai, New Delhi",
  "utc": ["Asia/Kolkata"]
}, {
  "value": "Sri Lanka Standard Time",
  "abbr": "SLST",
  "offset": 5.5,
  "isdst": false,
  "text": "(UTC+05:30) Sri Jayawardenepura",
  "utc": ["Asia/Colombo"]
}, {
  "value": "Nepal Standard Time",
  "abbr": "NST",
  "offset": 5.75,
  "isdst": false,
  "text": "(UTC+05:45) Kathmandu",
  "utc": ["Asia/Kathmandu"]
}, {
  "value": "Central Asia Standard Time",
  "abbr": "CAST",
  "offset": 6,
  "isdst": false,
  "text": "(UTC+06:00) Nur-Sultan (Astana)",
  "utc": ["Antarctica/Vostok", "Asia/Almaty", "Asia/Bishkek", "Asia/Qyzylorda", "Asia/Urumqi", "Etc/GMT-6", "Indian/Chagos"]
}, {
  "value": "Bangladesh Standard Time",
  "abbr": "BST",
  "offset": 6,
  "isdst": false,
  "text": "(UTC+06:00) Dhaka",
  "utc": ["Asia/Dhaka", "Asia/Thimphu"]
}, {
  "value": "Myanmar Standard Time",
  "abbr": "MST",
  "offset": 6.5,
  "isdst": false,
  "text": "(UTC+06:30) Yangon (Rangoon)",
  "utc": ["Asia/Rangoon", "Indian/Cocos"]
}, {
  "value": "SE Asia Standard Time",
  "abbr": "SAST",
  "offset": 7,
  "isdst": false,
  "text": "(UTC+07:00) Bangkok, Hanoi, Jakarta",
  "utc": ["Antarctica/Davis", "Asia/Bangkok", "Asia/Hovd", "Asia/Jakarta", "Asia/Phnom_Penh", "Asia/Pontianak", "Asia/Saigon", "Asia/Vientiane", "Etc/GMT-7", "Indian/Christmas"]
}, {
  "value": "N. Central Asia Standard Time",
  "abbr": "NCAST",
  "offset": 7,
  "isdst": false,
  "text": "(UTC+07:00) Novosibirsk",
  "utc": ["Asia/Novokuznetsk", "Asia/Novosibirsk", "Asia/Omsk"]
}, {
  "value": "China Standard Time",
  "abbr": "CST",
  "offset": 8,
  "isdst": false,
  "text": "(UTC+08:00) Beijing, Chongqing, Hong Kong, Urumqi",
  "utc": ["Asia/Hong_Kong", "Asia/Macau", "Asia/Shanghai"]
}, {
  "value": "North Asia Standard Time",
  "abbr": "NAST",
  "offset": 8,
  "isdst": false,
  "text": "(UTC+08:00) Krasnoyarsk",
  "utc": ["Asia/Krasnoyarsk"]
}, {
  "value": "Singapore Standard Time",
  "abbr": "MPST",
  "offset": 8,
  "isdst": false,
  "text": "(UTC+08:00) Kuala Lumpur, Singapore",
  "utc": ["Asia/Brunei", "Asia/Kuala_Lumpur", "Asia/Kuching", "Asia/Makassar", "Asia/Manila", "Asia/Singapore", "Etc/GMT-8"]
}, {
  "value": "W. Australia Standard Time",
  "abbr": "WAST",
  "offset": 8,
  "isdst": false,
  "text": "(UTC+08:00) Perth",
  "utc": ["Antarctica/Casey", "Australia/Perth"]
}, {
  "value": "Taipei Standard Time",
  "abbr": "TST",
  "offset": 8,
  "isdst": false,
  "text": "(UTC+08:00) Taipei",
  "utc": ["Asia/Taipei"]
}, {
  "value": "Ulaanbaatar Standard Time",
  "abbr": "UST",
  "offset": 8,
  "isdst": false,
  "text": "(UTC+08:00) Ulaanbaatar",
  "utc": ["Asia/Choibalsan", "Asia/Ulaanbaatar"]
}, {
  "value": "North Asia East Standard Time",
  "abbr": "NAEST",
  "offset": 8,
  "isdst": false,
  "text": "(UTC+08:00) Irkutsk",
  "utc": ["Asia/Irkutsk"]
}, {
  "value": "Japan Standard Time",
  "abbr": "JST",
  "offset": 9,
  "isdst": false,
  "text": "(UTC+09:00) Osaka, Sapporo, Tokyo",
  "utc": ["Asia/Dili", "Asia/Jayapura", "Asia/Tokyo", "Etc/GMT-9", "Pacific/Palau"]
}, {
  "value": "Korea Standard Time",
  "abbr": "KST",
  "offset": 9,
  "isdst": false,
  "text": "(UTC+09:00) Seoul",
  "utc": ["Asia/Pyongyang", "Asia/Seoul"]
}, {
  "value": "Cen. Australia Standard Time",
  "abbr": "CAST",
  "offset": 9.5,
  "isdst": false,
  "text": "(UTC+09:30) Adelaide",
  "utc": ["Australia/Adelaide", "Australia/Broken_Hill"]
}, {
  "value": "AUS Central Standard Time",
  "abbr": "ACST",
  "offset": 9.5,
  "isdst": false,
  "text": "(UTC+09:30) Darwin",
  "utc": ["Australia/Darwin"]
}, {
  "value": "E. Australia Standard Time",
  "abbr": "EAST",
  "offset": 10,
  "isdst": false,
  "text": "(UTC+10:00) Brisbane",
  "utc": ["Australia/Brisbane", "Australia/Lindeman"]
}, {
  "value": "AUS Eastern Standard Time",
  "abbr": "AEST",
  "offset": 10,
  "isdst": false,
  "text": "(UTC+10:00) Canberra, Melbourne, Sydney",
  "utc": ["Australia/Melbourne", "Australia/Sydney"]
}, {
  "value": "West Pacific Standard Time",
  "abbr": "WPST",
  "offset": 10,
  "isdst": false,
  "text": "(UTC+10:00) Guam, Port Moresby",
  "utc": ["Antarctica/DumontDUrville", "Etc/GMT-10", "Pacific/Guam", "Pacific/Port_Moresby", "Pacific/Saipan", "Pacific/Truk"]
}, {
  "value": "Tasmania Standard Time",
  "abbr": "TST",
  "offset": 10,
  "isdst": false,
  "text": "(UTC+10:00) Hobart",
  "utc": ["Australia/Currie", "Australia/Hobart"]
}, {
  "value": "Yakutsk Standard Time",
  "abbr": "YST",
  "offset": 9,
  "isdst": false,
  "text": "(UTC+09:00) Yakutsk",
  "utc": ["Asia/Chita", "Asia/Khandyga", "Asia/Yakutsk"]
}, {
  "value": "Central Pacific Standard Time",
  "abbr": "CPST",
  "offset": 11,
  "isdst": false,
  "text": "(UTC+11:00) Solomon Is., New Caledonia",
  "utc": ["Antarctica/Macquarie", "Etc/GMT-11", "Pacific/Efate", "Pacific/Guadalcanal", "Pacific/Kosrae", "Pacific/Noumea", "Pacific/Ponape"]
}, {
  "value": "Vladivostok Standard Time",
  "abbr": "VST",
  "offset": 11,
  "isdst": false,
  "text": "(UTC+11:00) Vladivostok",
  "utc": ["Asia/Sakhalin", "Asia/Ust-Nera", "Asia/Vladivostok"]
}, {
  "value": "New Zealand Standard Time",
  "abbr": "NZST",
  "offset": 12,
  "isdst": false,
  "text": "(UTC+12:00) Auckland, Wellington",
  "utc": ["Antarctica/McMurdo", "Pacific/Auckland"]
}, {
  "value": "UTC+12",
  "abbr": "U",
  "offset": 12,
  "isdst": false,
  "text": "(UTC+12:00) Coordinated Universal Time+12",
  "utc": ["Etc/GMT-12", "Pacific/Funafuti", "Pacific/Kwajalein", "Pacific/Majuro", "Pacific/Nauru", "Pacific/Tarawa", "Pacific/Wake", "Pacific/Wallis"]
}, {
  "value": "Fiji Standard Time",
  "abbr": "FST",
  "offset": 12,
  "isdst": false,
  "text": "(UTC+12:00) Fiji",
  "utc": ["Pacific/Fiji"]
}, {
  "value": "Magadan Standard Time",
  "abbr": "MST",
  "offset": 12,
  "isdst": false,
  "text": "(UTC+12:00) Magadan",
  "utc": ["Asia/Anadyr", "Asia/Kamchatka", "Asia/Magadan", "Asia/Srednekolymsk"]
}, {
  "value": "Kamchatka Standard Time",
  "abbr": "KDT",
  "offset": 13,
  "isdst": true,
  "text": "(UTC+12:00) Petropavlovsk-Kamchatsky - Old",
  "utc": ["Asia/Kamchatka"]
}, {
  "value": "Tonga Standard Time",
  "abbr": "TST",
  "offset": 13,
  "isdst": false,
  "text": "(UTC+13:00) Nuku'alofa",
  "utc": ["Etc/GMT-13", "Pacific/Enderbury", "Pacific/Fakaofo", "Pacific/Tongatapu"]
}, {
  "value": "Samoa Standard Time",
  "abbr": "SST",
  "offset": 13,
  "isdst": false,
  "text": "(UTC+13:00) Samoa",
  "utc": ["Pacific/Apia"]
}];
exports.TIMEZONES_IANA = (0, general_1.unique)((0, general_1.flatten)(exports.TIMEZONES.map(function (_) {
  return _.utc;
}))).sort();

/***/ }),

/***/ 63464:
/*!**************************************!*\
  !*** ./libs/common/src/lib/types.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, exports) => {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));

/***/ }),

/***/ 55746:
/*!************************************************!*\
  !*** ./libs/common/src/lib/uploads.service.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _toConsumableArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/toConsumableArray.js */ 86033)["default"]);
var _regeneratorRuntime = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/regeneratorRuntime.js */ 8698)["default"]);
var _asyncToGenerator = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/asyncToGenerator.js */ 95386)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _UploadsService;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.UploadsService = void 0;
var rxjs_1 = __webpack_require__(/*! rxjs */ 15681);
var uploads_1 = __webpack_require__(/*! ./uploads */ 83615);
var dialog_1 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var upload_permissions_modal_component_1 = __webpack_require__(/*! libs/components/src/lib/upload-permissions-modal.component */ 76871);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var UploadsService = /*#__PURE__*/function () {
  function UploadsService(_dialog) {
    _classCallCheck(this, UploadsService);
    this._dialog = _dialog;
    this._upload_list = new rxjs_1.BehaviorSubject([]);
    this.upload_list = this._upload_list.asObservable();
    if (localStorage) {
      this._upload_list.next(JSON.parse(localStorage.getItem('BACKOFFICE.uploads') || '[]'));
    }
  }
  return _createClass(UploadsService, [{
    key: "clearList",
    value: function clearList() {
      var in_progress_list = this._upload_list.getValue().filter(function (file) {
        return file.progress < 100 && !file.error;
      });
      this._upload_list.next(in_progress_list);
    }
  }, {
    key: "uploadFileWithPermissions",
    value: function uploadFileWithPermissions(file) {
      var _this = this;
      return new Promise(function (resolve, reject) {
        var ref = _this._dialog.open(upload_permissions_modal_component_1.UploadPermissionsModalComponent, {
          data: {
            file: file
          }
        });
        ref.afterClosed().subscribe( /*#__PURE__*/function () {
          var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(details) {
            var id;
            return _regeneratorRuntime().wrap(function _callee$(_context) {
              while (1) switch (_context.prev = _context.next) {
                case 0:
                  if (!details) {
                    _context.next = 7;
                    break;
                  }
                  _context.next = 3;
                  return _this.uploadFile(details.file, details.is_public, details.permissions)["catch"](function (e) {
                    reject(e);
                    throw e;
                  });
                case 3:
                  id = _context.sent;
                  resolve(id);
                  _context.next = 8;
                  break;
                case 7:
                  reject();
                case 8:
                case "end":
                  return _context.stop();
              }
            }, _callee);
          }));
          return function (_x) {
            return _ref.apply(this, arguments);
          };
        }());
      });
    }
  }, {
    key: "uploadFile",
    value: function uploadFile(file) {
      var _this2 = this;
      var pub = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;
      var permissions = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'none';
      return new Promise(function (resolve) {
        var resolved = false;
        var update_fn = function update_fn(details) {
          if (!resolved) {
            resolve(details.id);
            resolved = true;
          }
          _this2._upload_list.next([].concat(_toConsumableArray(_this2._upload_list.getValue().filter(function (_) {
            return _.id !== details.id;
          })), [details]));
        };
        (0, uploads_1.uploadFile)(file, pub, permissions).subscribe(update_fn, update_fn, function () {
          return _this2._updateUploadHistory();
        });
      });
    }
  }, {
    key: "_updateUploadHistory",
    value: function _updateUploadHistory() {
      var done_list = this._upload_list.getValue().filter(function (file) {
        return file.progress >= 100;
      });
      done_list.forEach(function (i) {
        return delete i.upload;
      });
      if (localStorage) {
        localStorage.setItem('PLACEOS.uploads', JSON.stringify(done_list));
      }
    }
  }]);
}();
_UploadsService = UploadsService;
_UploadsService.ɵfac = function UploadsService_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _UploadsService)(i0.ɵɵinject(i1.MatDialog));
};
_UploadsService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({
  token: _UploadsService,
  factory: _UploadsService.ɵfac,
  providedIn: 'root'
});
exports.UploadsService = UploadsService;

/***/ }),

/***/ 83615:
/*!****************************************!*\
  !*** ./libs/common/src/lib/uploads.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _objectSpread = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/objectSpread2.js */ 34092)["default"]);
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.uploadFile = uploadFile;
var cloud_uploads_1 = __webpack_require__(/*! @placeos/cloud-uploads */ 51556);
var rxjs_1 = __webpack_require__(/*! rxjs */ 15681);
var operators_1 = __webpack_require__(/*! rxjs/operators */ 97303);
var general_1 = __webpack_require__(/*! ./general */ 64217);
var blobUtil = __webpack_require__(/*! blob-util */ 67092);
/**
 * Upload the given file to the cloud
 * @param file File to upload
 */
function uploadFile(file) {
  var pub = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;
  var permissions = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'none';
  return new rxjs_1.Observable(function (observer) {
    var fileReader = new FileReader();
    fileReader.addEventListener('loadend', function (e) {
      var arrayBuffer = e.target.result;
      var blob = blobUtil.arrayBufferToBlob(arrayBuffer, file.type);
      var upload_list = (0, cloud_uploads_1.uploadFiles)([blob], {
        file_name: file.name,
        permissions: permissions,
        "public": pub
      });
      var upload = upload_list[0];
      var upload_details = {
        id: (0, general_1.randomInt)(999999999999),
        name: file.name,
        progress: 0,
        link: '',
        formatted_size: (0, cloud_uploads_1.humanReadableByteCount)(file.size),
        size: file.size,
        upload: upload
      };
      upload.status.pipe((0, operators_1.takeWhile)(function (_) {
        return _.status !== 'complete';
      }, true)).subscribe(function (state) {
        if (upload.access_url) {
          upload_details.link = !pub ? "".concat(location.origin, "/api/engine/v2/uploads/").concat(encodeURIComponent(upload.id), "/url") : upload.access_url;
        }
        upload_details.progress = state.progress;
        observer.next(upload_details);
        if (state.status === 'error') observer.error(_objectSpread(_objectSpread({}, upload_details), {}, {
          error: state.error
        }));
        if (state.status === 'complete') observer.complete();
      });
      observer.next(upload_details);
    });
    fileReader.readAsArrayBuffer(file);
  });
}

/***/ }),

/***/ 5430:
/*!*******************************************************!*\
  !*** ./libs/common/src/lib/user-idle-time.service.ts ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _createForOfIteratorHelper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createForOfIteratorHelper.js */ 36350)["default"]);
var _slicedToArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/slicedToArray.js */ 6282)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _UserIdleTimeService;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.UserIdleTimeService = void 0;
var rxjs_1 = __webpack_require__(/*! rxjs */ 15681);
var operators_1 = __webpack_require__(/*! rxjs/operators */ 97303);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var EVENTS_NAMES = ['keypress', 'mousemove', 'touchmove', 'scroll', 'wheel'];
var UserIdleTimeService = /*#__PURE__*/function () {
  function UserIdleTimeService() {
    var _this = this;
    _classCallCheck(this, UserIdleTimeService);
    this._last_action = new rxjs_1.BehaviorSubject(Date.now());
    this._update = function (e) {
      return _this._onUserInteraction();
    };
    this._event_names = EVENTS_NAMES;
    this.last_action = (0, rxjs_1.combineLatest)([this._last_action, (0, rxjs_1.interval)(1000)]).pipe((0, operators_1.throttleTime)(300), (0, operators_1.map)(function (_ref) {
      var _ref2 = _slicedToArray(_ref, 1),
        last_action = _ref2[0];
      return last_action;
    }));
    this.idle_time = this.last_action.pipe((0, operators_1.map)(function (time) {
      return Date.now() - time;
    }));
  }
  return _createClass(UserIdleTimeService, [{
    key: "_onUserInteraction",
    value: function _onUserInteraction() {
      this._last_action.next(Date.now());
    }
  }, {
    key: "idleFor",
    value: function idleFor(time_ms) {
      var stop = this.startListening();
      return this.idle_time.pipe((0, operators_1.first)(function (t) {
        return t >= time_ms;
      }), (0, operators_1.tap)(function () {
        return stop();
      }));
    }
  }, {
    key: "startListening",
    value: function startListening() {
      var _this2 = this;
      this._last_action.next(Date.now());
      var _iterator = _createForOfIteratorHelper(this._event_names),
        _step;
      try {
        for (_iterator.s(); !(_step = _iterator.n()).done;) {
          var name = _step.value;
          document.body.addEventListener(name, this._update);
        }
      } catch (err) {
        _iterator.e(err);
      } finally {
        _iterator.f();
      }
      return function () {
        return _this2.stopListening();
      };
    }
  }, {
    key: "stopListening",
    value: function stopListening() {
      var _iterator2 = _createForOfIteratorHelper(this._event_names),
        _step2;
      try {
        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
          var name = _step2.value;
          document.body.removeEventListener(name, this._update);
        }
      } catch (err) {
        _iterator2.e(err);
      } finally {
        _iterator2.f();
      }
    }
  }]);
}();
_UserIdleTimeService = UserIdleTimeService;
_UserIdleTimeService.ɵfac = function UserIdleTimeService_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _UserIdleTimeService)();
};
_UserIdleTimeService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({
  token: _UserIdleTimeService,
  factory: _UserIdleTimeService.ɵfac,
  providedIn: 'root'
});
exports.UserIdleTimeService = UserIdleTimeService;

/***/ }),

/***/ 37958:
/*!*******************************************!*\
  !*** ./libs/common/src/lib/user-state.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _regeneratorRuntime = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/regeneratorRuntime.js */ 8698)["default"]);
var _asyncToGenerator = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/asyncToGenerator.js */ 95386)["default"]);
var _slicedToArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/slicedToArray.js */ 6282)["default"]);
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.current_user = void 0;
exports.reloadUserData = reloadUserData;
exports.currentUser = currentUser;
var ts_client_1 = __webpack_require__(/*! @placeos/ts-client */ 35713);
var rxjs_1 = __webpack_require__(/*! rxjs */ 15681);
var operators_1 = __webpack_require__(/*! rxjs/operators */ 97303);
var user_class_1 = __webpack_require__(/*! ../../../users/src/lib/user.class */ 93693);
var EMPTY_USER = new user_class_1.StaffUser();
var _current_user = new rxjs_1.BehaviorSubject(null);
var _change = new rxjs_1.BehaviorSubject(0);
exports.current_user = _current_user.asObservable();
setTimeout(function () {
  try {
    if (jest) return;
  } catch (_unused) {}
  (0, rxjs_1.combineLatest)([(0, ts_client_1.showUser)('current'), _change]).pipe((0, operators_1.delay)(1000), (0, operators_1.retry)(10), (0, operators_1.map)(function (_ref) {
    var _ref2 = _slicedToArray(_ref, 1),
      i = _ref2[0];
    return new user_class_1.StaffUser(i);
  })).subscribe(function (user) {
    return _current_user.next(user);
  });
}, 300);
function reloadUserData() {
  setTimeout( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
    var user;
    return _regeneratorRuntime().wrap(function _callee$(_context) {
      while (1) switch (_context.prev = _context.next) {
        case 0:
          _context.next = 2;
          return (0, ts_client_1.showUser)('current').toPromise();
        case 2:
          user = _context.sent;
          _current_user.next(new user_class_1.StaffUser(user));
        case 4:
        case "end":
          return _context.stop();
      }
    }, _callee);
  })), 300);
}
/** Get the current user details */
function currentUser() {
  return _current_user.getValue() || EMPTY_USER;
}

/***/ }),

/***/ 64295:
/*!**********************************************!*\
  !*** ./libs/common/src/lib/vanillaqr.min.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, exports) => {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.VanillaQR = VanillaQR;
// @ts-nocheck
/** From https://github.com/chuckfairy/VanillaQR.js */
function VanillaQR(r) {
  var e = this;
  r = "object" == typeof r ? r : {}, e.revision = 3, e.imageTypes = {
    bmp: "image/bmp",
    gif: "image/gif",
    jpeg: "image/jpeg",
    jpg: "image/jpg",
    png: "image/png",
    "svg+xml": "image/svg+xml",
    tiff: "image/tiff",
    webp: "image/webp",
    "x-icon": "image/x-icon"
  }, e.toTable = r.toTable, e.domElement = e.toTable ? document.createElement("div") : document.createElement("canvas"), e.url = r.url || "", e.size = r.size || 280, e.qrc = !1, e.colorLight = r.colorLight || "#fff", e.colorDark = r.colorDark || "#000", e.ecclevel = r.ecclevel || 1, e.noBorder = r.noBorder, e.borderSize = r.borderSize || 4;
  var o,
    a,
    t,
    i,
    n,
    l,
    f,
    c = [],
    s = [],
    d = [],
    g = [],
    h = [],
    v = [],
    m = function m(r, e) {
      var o;
      r > e && (o = r, r = e, e = o), o = e, o *= e, o += e, o >>= 1, g[o += r] = 1;
    },
    u = function u(r, e) {
      var o;
      for (d[r + t * e] = 1, o = -2; o < 2; o++) d[r + o + t * (e - 2)] = 1, d[r - 2 + t * (e + o + 1)] = 1, d[r + 2 + t * (e + o)] = 1, d[r + o + 1 + t * (e + 2)] = 1;
      for (o = 0; o < 2; o++) m(r - 1, e + o), m(r + 1, e - o), m(r - o, e - 1), m(r + o, e + 1);
    },
    p = function p(r) {
      for (; r >= 255;) r = ((r -= 255) >> 8) + (255 & r);
      return r;
    },
    b = function b(r, e, o, a) {
      var t,
        i,
        n,
        l = VanillaQR.gexp,
        f = VanillaQR.glog;
      for (t = 0; t < a; t++) c[o + t] = 0;
      for (t = 0; t < e; t++) {
        if (255 != (n = f[c[r + t] ^ c[o]])) for (i = 1; i < a; i++) c[o + i - 1] = c[o + i] ^ l[p(n + v[a - i])];else for (i = o; i < o + a; i++) c[i] = c[i + 1];
        c[o + a - 1] = 255 == n ? 0 : l[p(n + v[0])];
      }
    },
    R = function R(r, e) {
      var o;
      return r > e && (o = r, r = e, e = o), o = e, o += e * e, o >>= 1, g[o += r];
    },
    Q = function Q(r) {
      var e, o, a, i;
      switch (r) {
        case 0:
          for (o = 0; o < t; o++) for (e = 0; e < t; e++) e + o & 1 || R(e, o) || (d[e + o * t] ^= 1);
          break;
        case 1:
          for (o = 0; o < t; o++) for (e = 0; e < t; e++) 1 & o || R(e, o) || (d[e + o * t] ^= 1);
          break;
        case 2:
          for (o = 0; o < t; o++) for (a = 0, e = 0; e < t; e++, a++) 3 == a && (a = 0), a || R(e, o) || (d[e + o * t] ^= 1);
          break;
        case 3:
          for (i = 0, o = 0; o < t; o++, i++) for (3 == i && (i = 0), a = i, e = 0; e < t; e++, a++) 3 == a && (a = 0), a || R(e, o) || (d[e + o * t] ^= 1);
          break;
        case 4:
          for (o = 0; o < t; o++) for (a = 0, i = o >> 1 & 1, e = 0; e < t; e++, a++) 3 == a && (a = 0, i = !i), i || R(e, o) || (d[e + o * t] ^= 1);
          break;
        case 5:
          for (i = 0, o = 0; o < t; o++, i++) for (3 == i && (i = 0), a = 0, e = 0; e < t; e++, a++) 3 == a && (a = 0), (e & o & 1) + !(!a | !i) || R(e, o) || (d[e + o * t] ^= 1);
          break;
        case 6:
          for (i = 0, o = 0; o < t; o++, i++) for (3 == i && (i = 0), a = 0, e = 0; e < t; e++, a++) 3 == a && (a = 0), (e & o & 1) + (a && a == i) & 1 || R(e, o) || (d[e + o * t] ^= 1);
          break;
        case 7:
          for (i = 0, o = 0; o < t; o++, i++) for (3 == i && (i = 0), a = 0, e = 0; e < t; e++, a++) 3 == a && (a = 0), (a && a == i) + (e + o & 1) & 1 || R(e, o) || (d[e + o * t] ^= 1);
      }
    },
    V = function V(r) {
      var e,
        o = 0;
      for (e = 0; e <= r; e++) h[e] >= 5 && (o += VanillaQR.N1 + h[e] - 5);
      for (e = 3; e < r - 1; e += 2) h[e - 2] == h[e + 2] && h[e + 2] == h[e - 1] && h[e - 1] == h[e + 1] && 3 * h[e - 1] == h[e] && (0 == h[e - 3] || e + 3 > r || 3 * h[e - 3] >= 4 * h[e] || 3 * h[e + 3] >= 4 * h[e]) && (o += VanillaQR.N3);
      return o;
    },
    k = function k() {
      var r,
        e,
        o,
        a,
        i,
        n = 0,
        l = 0;
      for (e = 0; e < t - 1; e++) for (r = 0; r < t - 1; r++) (d[r + t * e] && d[r + 1 + t * e] && d[r + t * (e + 1)] && d[r + 1 + t * (e + 1)] || !(d[r + t * e] || d[r + 1 + t * e] || d[r + t * (e + 1)] || d[r + 1 + t * (e + 1)])) && (n += VanillaQR.N2);
      for (e = 0; e < t; e++) {
        for (h[0] = 0, o = a = r = 0; r < t; r++) (i = d[r + t * e]) == a ? h[o]++ : h[++o] = 1, l += (a = i) ? 1 : -1;
        n += V(o);
      }
      l < 0 && (l = -l);
      var f = l,
        c = 0;
      for (f += f << 2, f <<= 1; f > t * t;) f -= t * t, c++;
      for (n += c * VanillaQR.N4, r = 0; r < t; r++) {
        for (h[0] = 0, o = a = e = 0; e < t; e++) (i = d[r + t * e]) == a ? h[o]++ : h[++o] = 1, a = i;
        n += V(o);
      }
      return n;
    };
  e.genframe = function (r) {
    var e,
      h,
      V,
      x,
      C,
      w,
      E,
      N,
      T = VanillaQR.eccblocks,
      y = VanillaQR.gexp,
      z = VanillaQR.glog;
    x = r.length, a = 0;
    do {
      if (a++, V = 4 * (o - 1) + 16 * (a - 1), i = T[V++], n = T[V++], l = T[V++], f = T[V], x <= (V = l * (i + n) + n - 3 + (a <= 9))) break;
    } while (a < 40);
    for (t = 17 + 4 * a, C = l + (l + f) * (i + n) + n, x = 0; x < C; x++) s[x] = 0;
    for (c = r.slice(0), x = 0; x < t * t; x++) d[x] = 0;
    for (x = 0; x < (t * (t + 1) + 1) / 2; x++) g[x] = 0;
    for (x = 0; x < 3; x++) {
      for (V = 0, h = 0, 1 == x && (V = t - 7), 2 == x && (h = t - 7), d[h + 3 + t * (V + 3)] = 1, e = 0; e < 6; e++) d[h + e + t * V] = 1, d[h + t * (V + e + 1)] = 1, d[h + 6 + t * (V + e)] = 1, d[h + e + 1 + t * (V + 6)] = 1;
      for (e = 1; e < 5; e++) m(h + e, V + 1), m(h + 1, V + e + 1), m(h + 5, V + e), m(h + e + 1, V + 5);
      for (e = 2; e < 4; e++) d[h + e + t * (V + 2)] = 1, d[h + 2 + t * (V + e + 1)] = 1, d[h + 4 + t * (V + e)] = 1, d[h + e + 1 + t * (V + 4)] = 1;
    }
    if (a > 1) for (x = VanillaQR.adelta[a], h = t - 7;;) {
      for (e = t - 7; e > x - 3 && (u(e, h), !(e < x));) e -= x;
      if (h <= x + 9) break;
      u(6, h -= x), u(h, 6);
    }
    for (d[8 + t * (t - 8)] = 1, h = 0; h < 7; h++) m(7, h), m(t - 8, h), m(7, h + t - 7);
    for (e = 0; e < 8; e++) m(e, 7), m(e + t - 8, 7), m(e, t - 8);
    for (e = 0; e < 9; e++) m(e, 8);
    for (e = 0; e < 8; e++) m(e + t - 8, 8), m(8, e);
    for (h = 0; h < 7; h++) m(8, h + t - 7);
    for (e = 0; e < t - 14; e++) 1 & e ? (m(8 + e, 6), m(6, 8 + e)) : (d[8 + e + 6 * t] = 1, d[6 + t * (8 + e)] = 1);
    if (a > 6) for (x = VanillaQR.vpat[a - 7], V = 17, e = 0; e < 6; e++) for (h = 0; h < 3; h++, V--) 1 & (V > 11 ? a >> V - 12 : x >> V) ? (d[5 - e + t * (2 - h + t - 11)] = 1, d[2 - h + t - 11 + t * (5 - e)] = 1) : (m(5 - e, 2 - h + t - 11), m(2 - h + t - 11, 5 - e));
    for (h = 0; h < t; h++) for (e = 0; e <= h; e++) d[e + t * h] && m(e, h);
    for (C = c.length, w = 0; w < C; w++) s[w] = c.charCodeAt(w);
    if (c = s.slice(0), C >= (e = l * (i + n) + n) - 2 && (C = e - 2, a > 9 && C--), w = C, a > 9) {
      for (c[w + 2] = 0, c[w + 3] = 0; w--;) x = c[w], c[w + 3] |= 255 & x << 4, c[w + 2] = x >> 4;
      c[2] |= 255 & C << 4, c[1] = C >> 4, c[0] = 64 | C >> 12;
    } else {
      for (c[w + 1] = 0, c[w + 2] = 0; w--;) x = c[w], c[w + 2] |= 255 & x << 4, c[w + 1] = x >> 4;
      c[1] |= 255 & C << 4, c[0] = 64 | C >> 4;
    }
    for (w = C + 3 - (a < 10); w < e;) c[w++] = 236, c[w++] = 17;
    for (v[0] = 1, w = 0; w < f; w++) {
      for (v[w + 1] = 1, E = w; E > 0; E--) v[E] = v[E] ? v[E - 1] ^ y[p(z[v[E]] + w)] : v[E - 1];
      v[0] = y[p(z[v[0]] + w)];
    }
    for (w = 0; w <= f; w++) v[w] = z[v[w]];
    for (V = e, h = 0, w = 0; w < i; w++) b(h, l, V, f), h += l, V += f;
    for (w = 0; w < n; w++) b(h, l + 1, V, f), h += l + 1, V += f;
    for (h = 0, w = 0; w < l; w++) {
      for (E = 0; E < i; E++) s[h++] = c[w + E * l];
      for (E = 0; E < n; E++) s[h++] = c[i * l + w + E * (l + 1)];
    }
    for (E = 0; E < n; E++) s[h++] = c[i * l + w + E * (l + 1)];
    for (w = 0; w < f; w++) for (E = 0; E < i + n; E++) s[h++] = c[e + w + E * f];
    for (c = s, e = h = t - 1, V = C = 1, N = (l + f) * (i + n) + n, w = 0; w < N; w++) for (x = c[w], E = 0; E < 8; E++, x <<= 1) {
      128 & x && (d[e + t * h] = 1);
      do {
        C ? e-- : (e++, V ? 0 != h ? h-- : (V = !V, 6 == (e -= 2) && (e--, h = 9)) : h != t - 1 ? h++ : (V = !V, 6 == (e -= 2) && (e--, h -= 8))), C = !C;
      } while (R(e, h));
    }
    for (c = d.slice(0), x = 0, h = 3e4, V = 0; V < 8 && (Q(V), (e = k()) < h && (h = e, x = V), 7 != x); V++) d = c.slice(0);
    for (x != V && Q(x), h = VanillaQR.fmtword[x + (o - 1 << 3)], V = 0; V < 8; V++, h >>= 1) 1 & h && (d[t - 1 - V + 8 * t] = 1, V < 6 ? d[8 + t * V] = 1 : d[8 + t * (V + 1)] = 1);
    for (V = 0; V < 7; V++, h >>= 1) 1 & h && (d[8 + t * (t - 7 + V)] = 1, V ? d[6 - V + 8 * t] = 1 : d[7 + 8 * t] = 1);
    return d;
  }, e.init = function () {
    o = e.ecclevel;
    var r = e.genframe(e.url);
    e.toTable ? e.tableWrite(r, t) : e.canvasWrite(r, t);
  }, e.init();
}
VanillaQR.prototype = {
  canvasWrite: function canvasWrite(r, e) {
    if (!this.qrc && (this.qrc = this.getContext(this.domElement), !this.qrc)) return this.toTable = !0, this.domElement = document.createElement("div"), void this.tableWrite(r, e);
    var o = this.size,
      a = this.qrc;
    a.lineWidth = 1;
    var t = o;
    t /= e + 10, t = Math.round(t - .5);
    var i = 4;
    this.noBorder ? (a.canvas.width = a.canvas.height = t * e, i = 0) : a.canvas.width = a.canvas.height = o, a.clearRect(0, 0, o, o), a.fillStyle = this.colorLight, a.fillRect(0, 0, t * (e + 8), t * (e + 8)), a.fillStyle = this.colorDark;
    for (var n = 0; n < e; n++) for (var l = 0; l < e; l++) r[l * e + n] && a.fillRect(t * (i + n), t * (i + l), t, t);
  },
  tableWrite: function tableWrite(r, e) {
    var o = this,
      a = Math.round(this.size / e - 3.5) + "px",
      t = e + (o.noBorder ? 0 : 2 * o.borderSize),
      i = o.borderSize,
      n = "width:" + a + ";height:" + a + ";",
      l = o.colorLight,
      f = o.colorDark,
      c = document.createElement("table");
    c.style.cssText = "border:0;border-collapse:collapse;";
    for (var s, d = document.createElement("tr"), g = document.createElement("td"), h = function h() {
        return g.cloneNode();
      }, v = function v() {
        var r = h();
        return r.style.cssText = n + "background:" + l, r;
      }, m = function m(r) {
        for (var e = r.firstChild, o = 0; o < i; o++) r.insertBefore(v(), e), r.appendChild(v());
      }, u = 0; u < e; u++) {
      var p = d.cloneNode();
      c.appendChild(p);
      for (var b = 0; b < e; b++) if (1 === r[u * e + b]) {
        var R = (s = void 0, (s = h()).style.cssText = n + "background:" + f, s);
        p.appendChild(R);
      } else {
        var Q = v();
        p.appendChild(Q);
      }
      o.noBorder || m(p);
    }
    o.noBorder || function (r) {
      for (var e = r.firstChild, a = 0; a < o.borderSize; a++) {
        for (var i = d.cloneNode(), n = 0; n < t; n++) {
          var l = v();
          i.appendChild(l);
        }
        r.appendChild(i), r.insertBefore(i.cloneNode(!0), e);
      }
    }(c), o.domElement.innerHTML = "", o.domElement.appendChild(c);
  },
  getContext: function getContext(r) {
    return r.getContext && r.getContext("2d") ? r.getContext("2d") : (console.log("Browser does not have 2d Canvas support"), !1);
  },
  toImage: function toImage(r) {
    if (this.qrc) {
      var e = this.imageTypes[r];
      if (!e) throw new Error(r + " is not a valid image type ");
      var o = new Image();
      return o.src = this.domElement.toDataURL(e), o;
    }
  }
}, VanillaQR.adelta = [0, 11, 15, 19, 23, 27, 31, 16, 18, 20, 22, 24, 26, 28, 20, 22, 24, 24, 26, 28, 28, 22, 24, 24, 26, 26, 28, 28, 24, 24, 26, 26, 26, 28, 28, 24, 26, 26, 26, 28, 28], VanillaQR.vpat = [3220, 1468, 2713, 1235, 3062, 1890, 2119, 1549, 2344, 2936, 1117, 2583, 1330, 2470, 1667, 2249, 2028, 3780, 481, 4011, 142, 3098, 831, 3445, 592, 2517, 1776, 2234, 1951, 2827, 1070, 2660, 1345, 3177], VanillaQR.fmtword = [30660, 29427, 32170, 30877, 26159, 25368, 27713, 26998, 21522, 20773, 24188, 23371, 17913, 16590, 20375, 19104, 13663, 12392, 16177, 14854, 9396, 8579, 11994, 11245, 5769, 5054, 7399, 6608, 1890, 597, 3340, 2107], VanillaQR.eccblocks = [1, 0, 19, 7, 1, 0, 16, 10, 1, 0, 13, 13, 1, 0, 9, 17, 1, 0, 34, 10, 1, 0, 28, 16, 1, 0, 22, 22, 1, 0, 16, 28, 1, 0, 55, 15, 1, 0, 44, 26, 2, 0, 17, 18, 2, 0, 13, 22, 1, 0, 80, 20, 2, 0, 32, 18, 2, 0, 24, 26, 4, 0, 9, 16, 1, 0, 108, 26, 2, 0, 43, 24, 2, 2, 15, 18, 2, 2, 11, 22, 2, 0, 68, 18, 4, 0, 27, 16, 4, 0, 19, 24, 4, 0, 15, 28, 2, 0, 78, 20, 4, 0, 31, 18, 2, 4, 14, 18, 4, 1, 13, 26, 2, 0, 97, 24, 2, 2, 38, 22, 4, 2, 18, 22, 4, 2, 14, 26, 2, 0, 116, 30, 3, 2, 36, 22, 4, 4, 16, 20, 4, 4, 12, 24, 2, 2, 68, 18, 4, 1, 43, 26, 6, 2, 19, 24, 6, 2, 15, 28, 4, 0, 81, 20, 1, 4, 50, 30, 4, 4, 22, 28, 3, 8, 12, 24, 2, 2, 92, 24, 6, 2, 36, 22, 4, 6, 20, 26, 7, 4, 14, 28, 4, 0, 107, 26, 8, 1, 37, 22, 8, 4, 20, 24, 12, 4, 11, 22, 3, 1, 115, 30, 4, 5, 40, 24, 11, 5, 16, 20, 11, 5, 12, 24, 5, 1, 87, 22, 5, 5, 41, 24, 5, 7, 24, 30, 11, 7, 12, 24, 5, 1, 98, 24, 7, 3, 45, 28, 15, 2, 19, 24, 3, 13, 15, 30, 1, 5, 107, 28, 10, 1, 46, 28, 1, 15, 22, 28, 2, 17, 14, 28, 5, 1, 120, 30, 9, 4, 43, 26, 17, 1, 22, 28, 2, 19, 14, 28, 3, 4, 113, 28, 3, 11, 44, 26, 17, 4, 21, 26, 9, 16, 13, 26, 3, 5, 107, 28, 3, 13, 41, 26, 15, 5, 24, 30, 15, 10, 15, 28, 4, 4, 116, 28, 17, 0, 42, 26, 17, 6, 22, 28, 19, 6, 16, 30, 2, 7, 111, 28, 17, 0, 46, 28, 7, 16, 24, 30, 34, 0, 13, 24, 4, 5, 121, 30, 4, 14, 47, 28, 11, 14, 24, 30, 16, 14, 15, 30, 6, 4, 117, 30, 6, 14, 45, 28, 11, 16, 24, 30, 30, 2, 16, 30, 8, 4, 106, 26, 8, 13, 47, 28, 7, 22, 24, 30, 22, 13, 15, 30, 10, 2, 114, 28, 19, 4, 46, 28, 28, 6, 22, 28, 33, 4, 16, 30, 8, 4, 122, 30, 22, 3, 45, 28, 8, 26, 23, 30, 12, 28, 15, 30, 3, 10, 117, 30, 3, 23, 45, 28, 4, 31, 24, 30, 11, 31, 15, 30, 7, 7, 116, 30, 21, 7, 45, 28, 1, 37, 23, 30, 19, 26, 15, 30, 5, 10, 115, 30, 19, 10, 47, 28, 15, 25, 24, 30, 23, 25, 15, 30, 13, 3, 115, 30, 2, 29, 46, 28, 42, 1, 24, 30, 23, 28, 15, 30, 17, 0, 115, 30, 10, 23, 46, 28, 10, 35, 24, 30, 19, 35, 15, 30, 17, 1, 115, 30, 14, 21, 46, 28, 29, 19, 24, 30, 11, 46, 15, 30, 13, 6, 115, 30, 14, 23, 46, 28, 44, 7, 24, 30, 59, 1, 16, 30, 12, 7, 121, 30, 12, 26, 47, 28, 39, 14, 24, 30, 22, 41, 15, 30, 6, 14, 121, 30, 6, 34, 47, 28, 46, 10, 24, 30, 2, 64, 15, 30, 17, 4, 122, 30, 29, 14, 46, 28, 49, 10, 24, 30, 24, 46, 15, 30, 4, 18, 122, 30, 13, 32, 46, 28, 48, 14, 24, 30, 42, 32, 15, 30, 20, 4, 117, 30, 40, 7, 47, 28, 43, 22, 24, 30, 10, 67, 15, 30, 19, 6, 118, 30, 18, 31, 47, 28, 34, 34, 24, 30, 20, 61, 15, 30], VanillaQR.glog = [255, 0, 1, 25, 2, 50, 26, 198, 3, 223, 51, 238, 27, 104, 199, 75, 4, 100, 224, 14, 52, 141, 239, 129, 28, 193, 105, 248, 200, 8, 76, 113, 5, 138, 101, 47, 225, 36, 15, 33, 53, 147, 142, 218, 240, 18, 130, 69, 29, 181, 194, 125, 106, 39, 249, 185, 201, 154, 9, 120, 77, 228, 114, 166, 6, 191, 139, 98, 102, 221, 48, 253, 226, 152, 37, 179, 16, 145, 34, 136, 54, 208, 148, 206, 143, 150, 219, 189, 241, 210, 19, 92, 131, 56, 70, 64, 30, 66, 182, 163, 195, 72, 126, 110, 107, 58, 40, 84, 250, 133, 186, 61, 202, 94, 155, 159, 10, 21, 121, 43, 78, 212, 229, 172, 115, 243, 167, 87, 7, 112, 192, 247, 140, 128, 99, 13, 103, 74, 222, 237, 49, 197, 254, 24, 227, 165, 153, 119, 38, 184, 180, 124, 17, 68, 146, 217, 35, 32, 137, 46, 55, 63, 209, 91, 149, 188, 207, 205, 144, 135, 151, 178, 220, 252, 190, 97, 242, 86, 211, 171, 20, 42, 93, 158, 132, 60, 57, 83, 71, 109, 65, 162, 31, 45, 67, 216, 183, 123, 164, 118, 196, 23, 73, 236, 127, 12, 111, 246, 108, 161, 59, 82, 41, 157, 85, 170, 251, 96, 134, 177, 187, 204, 62, 90, 203, 89, 95, 176, 156, 169, 160, 81, 11, 245, 22, 235, 122, 117, 44, 215, 79, 174, 213, 233, 230, 231, 173, 232, 116, 214, 244, 234, 168, 80, 88, 175], VanillaQR.gexp = [1, 2, 4, 8, 16, 32, 64, 128, 29, 58, 116, 232, 205, 135, 19, 38, 76, 152, 45, 90, 180, 117, 234, 201, 143, 3, 6, 12, 24, 48, 96, 192, 157, 39, 78, 156, 37, 74, 148, 53, 106, 212, 181, 119, 238, 193, 159, 35, 70, 140, 5, 10, 20, 40, 80, 160, 93, 186, 105, 210, 185, 111, 222, 161, 95, 190, 97, 194, 153, 47, 94, 188, 101, 202, 137, 15, 30, 60, 120, 240, 253, 231, 211, 187, 107, 214, 177, 127, 254, 225, 223, 163, 91, 182, 113, 226, 217, 175, 67, 134, 17, 34, 68, 136, 13, 26, 52, 104, 208, 189, 103, 206, 129, 31, 62, 124, 248, 237, 199, 147, 59, 118, 236, 197, 151, 51, 102, 204, 133, 23, 46, 92, 184, 109, 218, 169, 79, 158, 33, 66, 132, 21, 42, 84, 168, 77, 154, 41, 82, 164, 85, 170, 73, 146, 57, 114, 228, 213, 183, 115, 230, 209, 191, 99, 198, 145, 63, 126, 252, 229, 215, 179, 123, 246, 241, 255, 227, 219, 171, 75, 150, 49, 98, 196, 149, 55, 110, 220, 165, 87, 174, 65, 130, 25, 50, 100, 200, 141, 7, 14, 28, 56, 112, 224, 221, 167, 83, 166, 81, 162, 89, 178, 121, 242, 249, 239, 195, 155, 43, 86, 172, 69, 138, 9, 18, 36, 72, 144, 61, 122, 244, 245, 247, 243, 251, 235, 203, 139, 11, 22, 44, 88, 176, 125, 250, 233, 207, 131, 27, 54, 108, 216, 173, 71, 142, 0], VanillaQR.N1 = 3, VanillaQR.N2 = 3, VanillaQR.N3 = 40, VanillaQR.N4 = 10;

/***/ }),

/***/ 93885:
/*!****************************************!*\
  !*** ./libs/common/src/lib/version.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, exports) => {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.VERSION = void 0;
// IMPORTANT: THIS FILE IS AUTO GENERATED! DO NOT MANUALLY EDIT OR CHECKIN!
/* tslint:disable */
exports.VERSION = {
  "dirty": false,
  "raw": "beefb51",
  "hash": "beefb51",
  "distance": null,
  "tag": null,
  "semver": null,
  "suffix": "beefb51",
  "semverString": null,
  "version": "1.12.0",
  "time": 1729496123304
};
/* tslint:enable */

/***/ }),

/***/ 94972:
/*!***********************************************!*\
  !*** ./libs/common/src/lib/vorlon.service.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _regeneratorRuntime = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/regeneratorRuntime.js */ 8698)["default"]);
var _asyncToGenerator = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/asyncToGenerator.js */ 95386)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _callSuper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/callSuper.js */ 8513)["default"]);
var _inherits = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/inherits.js */ 58160)["default"]);
var _VorlonService;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.VorlonService = void 0;
var ts_client_1 = __webpack_require__(/*! @placeos/ts-client */ 35713);
var async_handler_class_1 = __webpack_require__(/*! ./async-handler.class */ 75354);
var settings_service_1 = __webpack_require__(/*! ./settings.service */ 14233);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! ./settings.service */ 14233);
var VorlonService = /*#__PURE__*/function (_async_handler_class_) {
  function VorlonService(_settings) {
    var _this;
    _classCallCheck(this, VorlonService);
    _this = _callSuper(this, VorlonService);
    _this._settings = _settings;
    _this.load();
    return _this;
  }
  _inherits(VorlonService, _async_handler_class_);
  return _createClass(VorlonService, [{
    key: "load",
    value: function () {
      var _load = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
        var _this2 = this;
        var system, module, binding;
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              system = this._settings.get('app.vorlon.system');
              if (system) {
                module = (0, ts_client_1.getModule)(system, 'Vorlon');
                if (module) {
                  binding = module.binding('enabled');
                  this.subscription('binding', binding.bind());
                  this.subscription('binding_value', binding.listen().subscribe(function (state) {
                    state ? _this2.injectVorlonScript() : _this2.removeVorlonScript();
                  }));
                }
              }
            case 2:
            case "end":
              return _context.stop();
          }
        }, _callee, this);
      }));
      function load() {
        return _load.apply(this, arguments);
      }
      return load;
    }()
  }, {
    key: "injectVorlonScript",
    value: function injectVorlonScript() {
      this.removeVorlonScript();
      this._script = document.createElement('script');
      var url = this._settings.get('app.vorlon.url');
      this._script.src = url || "./assets/vorlon.js";
      document.head.appendChild(this._script);
    }
  }, {
    key: "removeVorlonScript",
    value: function removeVorlonScript() {
      if (this._script) {
        this._script.parentNode.removeChild(this._script);
        delete this._script;
        this._script = null;
      }
    }
  }]);
}(async_handler_class_1.AsyncHandler);
_VorlonService = VorlonService;
_VorlonService.ɵfac = function VorlonService_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _VorlonService)(i0.ɵɵinject(i1.SettingsService));
};
_VorlonService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({
  token: _VorlonService,
  factory: _VorlonService.ɵfac,
  providedIn: 'root'
});
exports.VorlonService = VorlonService;

/***/ }),

/***/ 51588:
/*!**************************************!*\
  !*** ./libs/components/src/index.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var tslib_1 = __webpack_require__(/*! tslib */ 24398);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/components.module */ 14974), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/action-icon.component */ 88157), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/binding.directive */ 83938), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/confirm-modal.component */ 30841), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/icon.component */ 69434), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/login.component */ 69024), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/popout-menu.component */ 44418), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/unauthorised.component */ 67834), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/user-avatar.component */ 23574), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/interactive-map.component */ 24918), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/map-renderer.component */ 39489), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/maps-indoors.component */ 30877), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/map-pin.component */ 71865), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/map-radius.component */ 95384), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/indoor-maps.component */ 92124), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/misconfigured.component */ 74118), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/status-overlay.component */ 91960), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/custom-table.component */ 12993), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/custom-tooltip.component */ 22238), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/fixed.pipe */ 62678), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/safe.pipe */ 26781), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/sanitise.pipe */ 54616), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/virtual-keyboard.component */ 75080), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/global-loading.component */ 34921), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/map-locate-modal.component */ 90620), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/image-carousel.component */ 65277), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/redirect.component */ 68283), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/changelog-modal.component */ 65991), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/user-controls.component */ 74633), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/attached-resource-config-modal.component */ 65843), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/available-rooms-state-modal.component */ 10375), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/authorised-admin.guard */ 7345), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/authorised-user.guard */ 1645), exports);

/***/ }),

/***/ 6539:
/*!********************************************************************!*\
  !*** ./libs/components/src/lib/accessibility-tooltip.component.ts ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _taggedTemplateLiteral = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js */ 9959)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _callSuper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/callSuper.js */ 8513)["default"]);
var _inherits = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/inherits.js */ 58160)["default"]);
var _AccessibilityTooltipComponent, _templateObject, _templateObject2, _templateObject3, _templateObject4;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.AccessibilityTooltipComponent = void 0;
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var components_1 = __webpack_require__(/*! @placeos/components */ 51588);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @placeos/common */ 22797);
var i2 = __webpack_require__(/*! @angular/common */ 60316);
var i3 = __webpack_require__(/*! @angular/forms */ 34456);
var i4 = __webpack_require__(/*! @angular/material/slider */ 64992);
var i5 = __webpack_require__(/*! @angular/material/slide-toggle */ 8827);
var i6 = __webpack_require__(/*! ./icon.component */ 69434);
function AccessibilityTooltipComponent_div_6_Template(rf, ctx) {
  if (rf & 1) {
    var _r1 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 9)(1, "div", 10)(2, "app-icon", 11);
    i0.ɵɵtext(3, "mode_night");
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(4, "div", 12);
    i0.ɵɵi18n(5, 2);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(6, "mat-slide-toggle", 13);
    i0.ɵɵlistener("ngModelChange", function AccessibilityTooltipComponent_div_6_Template_mat_slide_toggle_ngModelChange_6_listener($event) {
      i0.ɵɵrestoreView(_r1);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.setDarkMode($event));
    });
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance(6);
    i0.ɵɵproperty("ngModel", ctx_r1.dark_mode);
  }
}
function AccessibilityTooltipComponent_ng_container_14_Template(rf, ctx) {
  if (rf & 1) {
    var _r3 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵelementStart(1, "div", 15);
    i0.ɵɵi18n(2, 3);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(3, "div", 16)(4, "span", 17);
    i0.ɵɵtext(5, "A");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(6, "mat-slider", 18)(7, "input", 19);
    i0.ɵɵlistener("ngModelChange", function AccessibilityTooltipComponent_ng_container_14_Template_input_ngModelChange_7_listener($event) {
      i0.ɵɵrestoreView(_r3);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.applySetting("font_size", $event));
    });
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(8, "span", 6);
    i0.ɵɵtext(9, "A");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(10, "span", 20);
    i0.ɵɵtext(11);
    i0.ɵɵelementEnd()();
    i0.ɵɵelementContainerEnd();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance(6);
    i0.ɵɵproperty("min", 10)("max", 24)("step", 2);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngModel", ctx_r1.font_size);
    i0.ɵɵadvance(4);
    i0.ɵɵtextInterpolate1(" ", ctx_r1.font_size, "px ");
  }
}
var AccessibilityTooltipComponent = /*#__PURE__*/function (_common_1$AsyncHandle) {
  function AccessibilityTooltipComponent(_data, _settings) {
    var _this;
    _classCallCheck(this, AccessibilityTooltipComponent);
    _this = _callSuper(this, AccessibilityTooltipComponent);
    _this._data = _data;
    _this._settings = _settings;
    _this.applySetting = function (n, v) {
      return _this.timeout('apply_setting', function () {
        return _this._settings.saveUserSetting(n, v);
      }, 1000);
    };
    _this.close = function () {
      var _this$_data;
      return (_this$_data = _this._data) === null || _this$_data === void 0 ? void 0 : _this$_data.close();
    };
    return _this;
  }
  _inherits(AccessibilityTooltipComponent, _common_1$AsyncHandle);
  return _createClass(AccessibilityTooltipComponent, [{
    key: "dark_mode",
    get: function get() {
      return this._settings.get('theme') === 'dark';
    }
  }, {
    key: "can_change_dark_mode",
    get: function get() {
      return !!this._settings.get('app.general.dark_mode');
    }
  }, {
    key: "accessible",
    get: function get() {
      return !!this._settings.get('accessible');
    }
  }, {
    key: "font_size",
    get: function get() {
      return this._settings.get('font_size') || 16;
    }
  }, {
    key: "setDarkMode",
    value: function setDarkMode(state) {
      var theme = this._settings.get('theme');
      if (state && theme !== 'dark') this._settings.setTheme('dark');else if (!state && theme === 'dark') this._settings.setTheme('light');
    }
  }]);
}(common_1.AsyncHandler);
_AccessibilityTooltipComponent = AccessibilityTooltipComponent;
_AccessibilityTooltipComponent.ɵfac = function AccessibilityTooltipComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _AccessibilityTooltipComponent)(i0.ɵɵdirectiveInject(components_1.CustomTooltipData), i0.ɵɵdirectiveInject(i1.SettingsService));
};
_AccessibilityTooltipComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _AccessibilityTooltipComponent,
  selectors: [["accessibility-tooltip"]],
  features: [i0.ɵɵInheritDefinitionFeature],
  decls: 15,
  vars: 3,
  consts: function consts() {
    var i18n_0;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_6572705143012462182$$LIBS_COMPONENTS_SRC_LIB_ACCESSIBILITY_TOOLTIP_COMPONENT_TS_0 = goog.getMsg("Display & Accessibility");
      i18n_0 = MSG_EXTERNAL_6572705143012462182$$LIBS_COMPONENTS_SRC_LIB_ACCESSIBILITY_TOOLTIP_COMPONENT_TS_0;
    } else {
      i18n_0 = $localize(_templateObject || (_templateObject = _taggedTemplateLiteral([":\u241Fd22b673a92b43eabbdebd80b1539a553703c84f6\u241F6572705143012462182:Display & Accessibility"])));
    }
    var i18n_1;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_127744830115363320$$LIBS_COMPONENTS_SRC_LIB_ACCESSIBILITY_TOOLTIP_COMPONENT_TS_1 = goog.getMsg("Large Accessibility Sizes");
      i18n_1 = MSG_EXTERNAL_127744830115363320$$LIBS_COMPONENTS_SRC_LIB_ACCESSIBILITY_TOOLTIP_COMPONENT_TS_1;
    } else {
      i18n_1 = $localize(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([":\u241F0f027c150c7e9465a5cdf64c4d07c33aca92384d\u241F127744830115363320:Large Accessibility Sizes"])));
    }
    var i18n_2;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_3279636347259347513$$LIBS_COMPONENTS_SRC_LIB_ACCESSIBILITY_TOOLTIP_COMPONENT_TS_2 = goog.getMsg("Dark Mode");
      i18n_2 = MSG_EXTERNAL_3279636347259347513$$LIBS_COMPONENTS_SRC_LIB_ACCESSIBILITY_TOOLTIP_COMPONENT_TS_2;
    } else {
      i18n_2 = $localize(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([":\u241Fc943d5ecc32b916a210d7c984fe5f55771ad0b1a\u241F3279636347259347513:Dark Mode"])));
    }
    var i18n_3;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_8609643488577372847$$LIBS_COMPONENTS_SRC_LIB_ACCESSIBILITY_TOOLTIP_COMPONENT_TS_3 = goog.getMsg(" Adjust your preferred reading size below. ");
      i18n_3 = MSG_EXTERNAL_8609643488577372847$$LIBS_COMPONENTS_SRC_LIB_ACCESSIBILITY_TOOLTIP_COMPONENT_TS_3;
    } else {
      i18n_3 = $localize(_templateObject4 || (_templateObject4 = _taggedTemplateLiteral([":\u241F3fc32876e34616b005d861eafe737cf4d2793184\u241F8609643488577372847: Adjust your preferred reading size below. "])));
    }
    return [i18n_0, i18n_1, i18n_2, i18n_3, [1, "flex", "flex-col", "w-[18.5rem]", "rounded", "bg-base-100", "shadow", "relative", "-top-12", "-right-1", "overflow-hidden"], [1, "flex", "items-center", "space-x-2", "p-2", 3, "click"], [1, "text-2xl"], [1, ""], ["action", "", "class", "flex items-center space-x-2 w-full text-left h-auto px-4", 4, "ngIf"], ["action", "", 1, "flex", "items-center", "space-x-2", "w-full", "text-left", "h-auto", "px-4"], [1, "flex", "items-center", "justify-center", "rounded-full", "w-8", "h-8", "bg-base-200", "my-2"], [1, "text-xl"], [1, "flex-1", "text-sm"], [3, "ngModelChange", "ngModel"], [4, "ngIf"], [1, "px-8", "py-4", "bg-base-200", "text-center"], [1, "flex", "items-center", "px-4", "space-x-4"], [1, "text-sm"], [1, "flex-1", "w-1/2", "text-[16px]", 3, "min", "max", "step"], ["matSliderThumb", "", 1, "text-[16px]", 3, "ngModelChange", "ngModel"], [1, "text-base", "py-1", "px-2", "rounded", "bg-base-300", "text-white", "my-2"]];
  },
  template: function AccessibilityTooltipComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵelementStart(0, "div", 4)(1, "div", 5);
      i0.ɵɵlistener("click", function AccessibilityTooltipComponent_Template_div_click_1_listener() {
        return ctx.close();
      });
      i0.ɵɵelementStart(2, "app-icon", 6);
      i0.ɵɵtext(3, "arrow_back");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(4, "div", 7);
      i0.ɵɵi18n(5, 0);
      i0.ɵɵelementEnd()();
      i0.ɵɵtemplate(6, AccessibilityTooltipComponent_div_6_Template, 7, 1, "div", 8);
      i0.ɵɵelementStart(7, "div", 9)(8, "div", 10)(9, "app-icon", 11);
      i0.ɵɵtext(10, "playlist_add");
      i0.ɵɵelementEnd()();
      i0.ɵɵelementStart(11, "div", 12);
      i0.ɵɵi18n(12, 1);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(13, "mat-slide-toggle", 13);
      i0.ɵɵlistener("ngModelChange", function AccessibilityTooltipComponent_Template_mat_slide_toggle_ngModelChange_13_listener($event) {
        return ctx.applySetting("accessible", $event);
      });
      i0.ɵɵelementEnd()();
      i0.ɵɵtemplate(14, AccessibilityTooltipComponent_ng_container_14_Template, 12, 5, "ng-container", 14);
      i0.ɵɵelementEnd();
    }
    if (rf & 2) {
      i0.ɵɵadvance(6);
      i0.ɵɵproperty("ngIf", ctx.can_change_dark_mode);
      i0.ɵɵadvance(7);
      i0.ɵɵproperty("ngModel", ctx.accessible);
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", ctx.accessible);
    }
  },
  dependencies: [i2.NgIf, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgModel, i4.MatSlider, i4.MatSliderThumb, i5.MatSlideToggle, i6.IconComponent],
  styles: ["[_nghost-%COMP%]    > div[_ngcontent-%COMP%]    > [action][_ngcontent-%COMP%] {\n                border-top: 1px solid #ccc;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFjY2Vzc2liaWxpdHktdG9vbHRpcC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLDBCQUEwQjtZQUM5QiIsImZpbGUiOiJhY2Nlc3NpYmlsaXR5LXRvb2x0aXAuY29tcG9uZW50LnRzIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICA6aG9zdCA+IGRpdiA+IFthY3Rpb25dIHtcbiAgICAgICAgICAgICAgICBib3JkZXItdG9wOiAxcHggc29saWQgI2NjYztcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl19 */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvY29tcG9uZW50cy9zcmMvbGliL2FjY2Vzc2liaWxpdHktdG9vbHRpcC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLDBCQUEwQjtZQUM5Qjs7QUFFWixnYkFBZ2IiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIDpob3N0ID4gZGl2ID4gW2FjdGlvbl0ge1xuICAgICAgICAgICAgICAgIGJvcmRlci10b3A6IDFweCBzb2xpZCAjY2NjO1xuICAgICAgICAgICAgfVxuICAgICAgICAiXSwic291cmNlUm9vdCI6IiJ9 */"]
});
exports.AccessibilityTooltipComponent = AccessibilityTooltipComponent;

/***/ }),

/***/ 88157:
/*!**********************************************************!*\
  !*** ./libs/components/src/lib/action-icon.component.ts ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _ActionIconComponent;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.ActionIconComponent = void 0;
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @angular/common */ 60316);
var i2 = __webpack_require__(/*! @angular/material/core */ 74646);
var i3 = __webpack_require__(/*! @angular/material/progress-spinner */ 41134);
var i4 = __webpack_require__(/*! ./icon.component */ 69434);
var _c0 = ["*"];
function ActionIconComponent_div_4_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div")(1, "app-icon");
    i0.ɵɵtext(2);
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var ctx_r0 = i0.ɵɵnextContext();
    i0.ɵɵclassMap("state center " + ctx_r0.state);
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate1(" ", ctx_r0.state === "success" ? "done" : "close", " ");
  }
}
function ActionIconComponent_div_5_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 4);
    i0.ɵɵelement(1, "mat-spinner", 5);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    i0.ɵɵadvance();
    i0.ɵɵproperty("diameter", 16);
  }
}
var ActionIconComponent = /*#__PURE__*/_createClass(function ActionIconComponent() {
  _classCallCheck(this, ActionIconComponent);
  /** Icon to display */
  this.className = 'material-icons';
  /** State of the action */
  this.state = '';
});
_ActionIconComponent = ActionIconComponent;
_ActionIconComponent.ɵfac = function ActionIconComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _ActionIconComponent)();
};
_ActionIconComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _ActionIconComponent,
  selectors: [["action-icon"]],
  inputs: {
    icon: "icon",
    className: "className",
    content: "content",
    loading: "loading",
    disabled: "disabled",
    state: "state"
  },
  ngContentSelectors: _c0,
  decls: 6,
  vars: 8,
  consts: [["icon", "", "matRipple", "", "title", "", 1, "relative", 3, "disabled"], ["root", "", 3, "className", "icon"], [3, "class", 4, "ngIf"], ["class", "loader center", 4, "ngIf"], [1, "loader", "center"], [3, "diameter"]],
  template: function ActionIconComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵprojectionDef();
      i0.ɵɵelementStart(0, "button", 0)(1, "app-icon", 1);
      i0.ɵɵtext(2);
      i0.ɵɵprojection(3);
      i0.ɵɵelementEnd();
      i0.ɵɵtemplate(4, ActionIconComponent_div_4_Template, 3, 3, "div", 2)(5, ActionIconComponent_div_5_Template, 2, 1, "div", 3);
      i0.ɵɵelementEnd();
    }
    if (rf & 2) {
      i0.ɵɵclassProp("success", ctx.state === "success");
      i0.ɵɵproperty("disabled", ctx.loading || ctx.disabled);
      i0.ɵɵadvance();
      i0.ɵɵproperty("className", ctx.className)("icon", ctx.icon);
      i0.ɵɵadvance();
      i0.ɵɵtextInterpolate1(" ", ctx.content, " ");
      i0.ɵɵadvance(2);
      i0.ɵɵproperty("ngIf", !ctx.loading && ctx.state);
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", ctx.loading);
    }
  },
  dependencies: [i1.NgIf, i2.MatRipple, i3.MatProgressSpinner, i4.IconComponent],
  styles: [".action-icon.fade[_ngcontent-%COMP%]    > app-icon[_ngcontent-%COMP%] {\n                opacity: 0.35;\n            }\n\n            .success[_ngcontent-%COMP%] {\n                pointer-events: none;\n            }\n\n            .success[_ngcontent-%COMP%]   app-icon[root][_ngcontent-%COMP%] {\n                opacity: 0.2;\n            }\n\n            .state.success[_ngcontent-%COMP%] {\n                color: #388e3c;\n            }\n\n            .state.error[_ngcontent-%COMP%] {\n                color: #e53935;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFjdGlvbi1pY29uLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1lBQ1k7Z0JBQ0ksYUFBYTtZQUNqQjs7WUFFQTtnQkFDSSxvQkFBb0I7WUFDeEI7O1lBRUE7Z0JBQ0ksWUFBWTtZQUNoQjs7WUFFQTtnQkFDSSxjQUFjO1lBQ2xCOztZQUVBO2dCQUNJLGNBQWM7WUFDbEIiLCJmaWxlIjoiYWN0aW9uLWljb24uY29tcG9uZW50LnRzIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICAuYWN0aW9uLWljb24uZmFkZSA+IGFwcC1pY29uIHtcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLjM1O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAuc3VjY2VzcyB7XG4gICAgICAgICAgICAgICAgcG9pbnRlci1ldmVudHM6IG5vbmU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC5zdWNjZXNzIGFwcC1pY29uW3Jvb3RdIHtcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLjI7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC5zdGF0ZS5zdWNjZXNzIHtcbiAgICAgICAgICAgICAgICBjb2xvcjogIzM4OGUzYztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLnN0YXRlLmVycm9yIHtcbiAgICAgICAgICAgICAgICBjb2xvcjogI2U1MzkzNTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl19 */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvY29tcG9uZW50cy9zcmMvbGliL2FjdGlvbi1pY29uLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1lBQ1k7Z0JBQ0ksYUFBYTtZQUNqQjs7WUFFQTtnQkFDSSxvQkFBb0I7WUFDeEI7O1lBRUE7Z0JBQ0ksWUFBWTtZQUNoQjs7WUFFQTtnQkFDSSxjQUFjO1lBQ2xCOztZQUVBO2dCQUNJLGNBQWM7WUFDbEI7O0FBRVosdzdCQUF3N0IiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIC5hY3Rpb24taWNvbi5mYWRlID4gYXBwLWljb24ge1xuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDAuMzU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC5zdWNjZXNzIHtcbiAgICAgICAgICAgICAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLnN1Y2Nlc3MgYXBwLWljb25bcm9vdF0ge1xuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDAuMjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLnN0YXRlLnN1Y2Nlc3Mge1xuICAgICAgICAgICAgICAgIGNvbG9yOiAjMzg4ZTNjO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAuc3RhdGUuZXJyb3Ige1xuICAgICAgICAgICAgICAgIGNvbG9yOiAjZTUzOTM1O1xuICAgICAgICAgICAgfVxuICAgICAgICAiXSwic291cmNlUm9vdCI6IiJ9 */"]
});
exports.ActionIconComponent = ActionIconComponent;

/***/ }),

/***/ 65843:
/*!*****************************************************************************!*\
  !*** ./libs/components/src/lib/attached-resource-config-modal.component.ts ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _objectSpread = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/objectSpread2.js */ 34092)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _callSuper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/callSuper.js */ 8513)["default"]);
var _inherits = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/inherits.js */ 58160)["default"]);
var _AttachedResourceConfigModalComponent;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.AttachedResourceConfigModalComponent = exports.RULE_TYPES = void 0;
var core_1 = __webpack_require__(/*! @angular/core */ 37580);
var dialog_1 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @angular/common */ 60316);
var i2 = __webpack_require__(/*! @angular/forms */ 34456);
var i3 = __webpack_require__(/*! @angular/material/core */ 74646);
var i4 = __webpack_require__(/*! @angular/material/menu */ 31034);
var i5 = __webpack_require__(/*! @angular/material/form-field */ 24950);
var i6 = __webpack_require__(/*! @angular/material/select */ 25175);
var i7 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var i8 = __webpack_require__(/*! @angular/material/input */ 95541);
var i9 = __webpack_require__(/*! @angular/material/checkbox */ 97024);
var i10 = __webpack_require__(/*! ./icon.component */ 69434);
function AttachedResourceConfigModalComponent_button_3_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "button", 8)(1, "app-icon");
    i0.ɵɵtext(2, "close");
    i0.ɵɵelementEnd()();
  }
}
function AttachedResourceConfigModalComponent_div_5_Template(rf, ctx) {
  if (rf & 1) {
    var _r1 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 9)(1, "mat-checkbox", 10);
    i0.ɵɵlistener("ngModelChange", function AttachedResourceConfigModalComponent_div_5_Template_mat_checkbox_ngModelChange_1_listener($event) {
      i0.ɵɵrestoreView(_r1);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.saveNotesSetting($event));
    });
    i0.ɵɵtext(2, " Require notes for orders ");
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngModel", ctx_r1.require_notes);
  }
}
function AttachedResourceConfigModalComponent_div_8_div_30_mat_option_4_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "mat-option", 28);
    i0.ɵɵtext(1);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var type_r8 = ctx.$implicit;
    i0.ɵɵproperty("value", type_r8.id);
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", type_r8.name, " ");
  }
}
function AttachedResourceConfigModalComponent_div_8_div_30_Template(rf, ctx) {
  if (rf & 1) {
    var _r6 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 22);
    i0.ɵɵelement(1, "div", 23);
    i0.ɵɵelementStart(2, "mat-form-field", 13)(3, "mat-select", 24);
    i0.ɵɵtwoWayListener("ngModelChange", function AttachedResourceConfigModalComponent_div_8_div_30_Template_mat_select_ngModelChange_3_listener($event) {
      var rule_r7 = i0.ɵɵrestoreView(_r6).$implicit;
      i0.ɵɵtwoWayBindingSet(rule_r7[0], $event) || (rule_r7[0] = $event);
      return i0.ɵɵresetView($event);
    });
    i0.ɵɵtemplate(4, AttachedResourceConfigModalComponent_div_8_div_30_mat_option_4_Template, 2, 2, "mat-option", 25);
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(5, "mat-form-field", 13)(6, "input", 26);
    i0.ɵɵtwoWayListener("ngModelChange", function AttachedResourceConfigModalComponent_div_8_div_30_Template_input_ngModelChange_6_listener($event) {
      var rule_r7 = i0.ɵɵrestoreView(_r6).$implicit;
      i0.ɵɵtwoWayBindingSet(rule_r7[1], $event) || (rule_r7[1] = $event);
      return i0.ɵɵresetView($event);
    });
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(7, "mat-error");
    i0.ɵɵtext(8, "Rule value is required");
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(9, "button", 27);
    i0.ɵɵlistener("click", function AttachedResourceConfigModalComponent_div_8_div_30_Template_button_click_9_listener() {
      var i_r9 = i0.ɵɵrestoreView(_r6).index;
      var set_r4 = i0.ɵɵnextContext().$implicit;
      return i0.ɵɵresetView(set_r4.rules.splice(i_r9, 1));
    });
    i0.ɵɵelementStart(10, "app-icon");
    i0.ɵɵtext(11, "delete");
    i0.ɵɵelementEnd()()();
  }
  if (rf & 2) {
    var rule_r7 = ctx.$implicit;
    var ctx_r1 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance(3);
    i0.ɵɵtwoWayProperty("ngModel", rule_r7[0]);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngForOf", ctx_r1.rule_types);
    i0.ɵɵadvance(2);
    i0.ɵɵtwoWayProperty("ngModel", rule_r7[1]);
  }
}
function AttachedResourceConfigModalComponent_div_8_Template(rf, ctx) {
  if (rf & 1) {
    var _r3 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 11)(1, "div", 12)(2, "mat-form-field", 13)(3, "input", 14);
    i0.ɵɵtwoWayListener("ngModelChange", function AttachedResourceConfigModalComponent_div_8_Template_input_ngModelChange_3_listener($event) {
      var set_r4 = i0.ɵɵrestoreView(_r3).$implicit;
      i0.ɵɵtwoWayBindingSet(set_r4.name, $event) || (set_r4.name = $event);
      return i0.ɵɵresetView($event);
    });
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(4, "mat-error");
    i0.ɵɵtext(5, "Ruleset name is required");
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(6, "button", 15)(7, "app-icon");
    i0.ɵɵtext(8, "more_vert");
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(9, "mat-menu", null, 0)(11, "button", 16);
    i0.ɵɵlistener("click", function AttachedResourceConfigModalComponent_div_8_Template_button_click_11_listener() {
      var set_r4 = i0.ɵɵrestoreView(_r3).$implicit;
      var ctx_r1 = i0.ɵɵnextContext();
      set_r4.rules.push(["", ""]);
      return i0.ɵɵresetView(ctx_r1.show_rules = set_r4.id);
    });
    i0.ɵɵelementStart(12, "div", 17)(13, "app-icon", 18);
    i0.ɵɵtext(14, "add");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(15, "div");
    i0.ɵɵtext(16, "Add Rule");
    i0.ɵɵelementEnd()()();
    i0.ɵɵelementStart(17, "button", 16);
    i0.ɵɵlistener("click", function AttachedResourceConfigModalComponent_div_8_Template_button_click_17_listener() {
      var set_r4 = i0.ɵɵrestoreView(_r3).$implicit;
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.show_rules = ctx_r1.show_rules !== set_r4.id ? set_r4.id : "");
    });
    i0.ɵɵelementStart(18, "div", 17)(19, "app-icon", 18);
    i0.ɵɵtext(20);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(21, "div");
    i0.ɵɵtext(22);
    i0.ɵɵelementEnd()()();
    i0.ɵɵelementStart(23, "button", 16);
    i0.ɵɵlistener("click", function AttachedResourceConfigModalComponent_div_8_Template_button_click_23_listener() {
      var i_r5 = i0.ɵɵrestoreView(_r3).index;
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.rulesets.splice(i_r5, 1));
    });
    i0.ɵɵelementStart(24, "div", 19)(25, "app-icon", 18);
    i0.ɵɵtext(26, "delete");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(27, "div");
    i0.ɵɵtext(28, "Remove Ruleset");
    i0.ɵɵelementEnd()()()()();
    i0.ɵɵelementStart(29, "div", 20);
    i0.ɵɵtemplate(30, AttachedResourceConfigModalComponent_div_8_div_30_Template, 12, 3, "div", 21);
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var set_r4 = ctx.$implicit;
    var menu_r10 = i0.ɵɵreference(10);
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance(3);
    i0.ɵɵtwoWayProperty("ngModel", set_r4.name);
    i0.ɵɵadvance(3);
    i0.ɵɵproperty("matMenuTriggerFor", menu_r10);
    i0.ɵɵadvance(14);
    i0.ɵɵtextInterpolate(ctx_r1.show_rules === set_r4.id ? "expand_less" : "expand_more");
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate1(" ", ctx_r1.show_rules === set_r4.id ? "Hide" : "Show", " Rules ");
    i0.ɵɵadvance(7);
    i0.ɵɵstyleProp("height", (ctx_r1.show_rules === set_r4.id ? 4 * set_r4.rules.length : 0) + "em");
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngForOf", set_r4.rules);
  }
}
exports.RULE_TYPES = [{
  id: 'after_hour',
  name: 'After Hour of Day'
}, {
  id: 'before_hour',
  name: 'Before Hour of Day'
}, {
  id: 'min_length',
  name: 'Min. Meeting Length'
}, {
  id: 'max_length',
  name: 'Max. Meeting Length'
}, {
  id: 'is_before',
  name: 'Is Hours before Meeting'
}, {
  id: 'within_hours',
  name: 'Within Hours before Meeting'
}, {
  id: 'visitor_type',
  name: 'Visitor Type'
}, {
  id: 'groups',
  name: 'User in Groups'
}];
var AttachedResourceConfigModalComponent = /*#__PURE__*/function (_common_1$AsyncHandle) {
  function AttachedResourceConfigModalComponent(_data) {
    var _this;
    _classCallCheck(this, AttachedResourceConfigModalComponent);
    _this = _callSuper(this, AttachedResourceConfigModalComponent);
    _this._data = _data;
    /** Emitter for events on the modal */
    _this.event = new core_1.EventEmitter();
    /** Whether changes are being saved */
    _this.loading = false;
    _this.require_notes = _this._data.require_notes;
    _this.resource_name = _this._data.resource_name || 'Catering';
    _this.rule_types = exports.RULE_TYPES;
    _this.rulesets = (_data.config || []).map(function (set) {
      set.rules = set.rules.map(function (i) {
        return [i[0], JSON.stringify(i[1])];
      });
      return set;
    });
    return _this;
  }
  _inherits(AttachedResourceConfigModalComponent, _common_1$AsyncHandle);
  return _createClass(AttachedResourceConfigModalComponent, [{
    key: "new_id",
    get: function get() {
      return 'ruleset-' + Math.floor(Math.random() * 99999999);
    }
  }, {
    key: "can_save_notes",
    get: function get() {
      return !!this._data.saveNotes;
    }
  }, {
    key: "saveNotesSetting",
    value: function saveNotesSetting(value) {
      var _this2 = this;
      this.timeout('save-notes', function () {
        return _this2._data.saveNotes ? _this2._data.saveNotes(value) : '';
      }, 1000);
    }
  }, {
    key: "saveChanges",
    value: function saveChanges() {
      this.loading = true;
      var rulesets = this.rulesets.map(function (set) {
        return _objectSpread(_objectSpread({}, set), {}, {
          rules: set.rules.map(function (i) {
            var value = i[1];
            try {
              value = JSON.parse(i[1]);
            } catch (e) {}
            return [i[0], value];
          })
        });
      });
      this.event.emit({
        reason: 'done',
        metadata: rulesets
      });
    }
  }]);
}(common_1.AsyncHandler);
_AttachedResourceConfigModalComponent = AttachedResourceConfigModalComponent;
_AttachedResourceConfigModalComponent.ɵfac = function AttachedResourceConfigModalComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _AttachedResourceConfigModalComponent)(i0.ɵɵdirectiveInject(dialog_1.MAT_DIALOG_DATA));
};
_AttachedResourceConfigModalComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _AttachedResourceConfigModalComponent,
  selectors: [["attached-resource-config-modal"]],
  outputs: {
    event: "event"
  },
  features: [i0.ɵɵInheritDefinitionFeature],
  decls: 12,
  vars: 4,
  consts: [["menu", "matMenu"], ["icon", "", "mat-dialog-close", "", 4, "ngIf"], [1, "overflow-auto", "text-center", "max-w-lg", "min-w-[32rem]", "px-4", "pt-2", "pb-4", "space-y-2"], ["class", "text-left p-2 rounded bg-base-200", 4, "ngIf"], ["btn", "", "matRipple", "", 1, "w-full", 3, "click"], ["class", "ruleset mb-2", 4, "ngFor", "ngForOf"], [1, "flex", "py-2", "px-4", "items-center", "justify-end", "border-t", "border-solid", "border-base-200"], ["btn", "", "matRipple", "", 1, "w-36", 3, "click"], ["icon", "", "mat-dialog-close", ""], [1, "text-left", "p-2", "rounded", "bg-base-200"], [3, "ngModelChange", "ngModel"], [1, "ruleset", "mb-2"], [1, "flex", "items-center", "mb-2", "space-x-2"], ["appearance", "outline", 1, "flex-1", "no-subscript"], ["matInput", "", "name", "name", "placeholder", "Zone ID, Category or Tag", "required", "", 3, "ngModelChange", "ngModel"], ["icon", "", "matRipple", "", 3, "matMenuTriggerFor"], ["mat-menu-item", "", 3, "click"], [1, "flex", "items-center", "space-x-2"], [1, "text-2xl"], [1, "flex", "items-center", "space-x-2", "text-error"], ["name", "rules", 1, "overflow-hidden"], ["class", "flex items-center pl-7 h-16 space-x-2 relative", 4, "ngFor", "ngForOf"], [1, "flex", "items-center", "pl-7", "h-16", "space-x-2", "relative"], [1, "absolute", "left-3", "top-1/2", "-translate-y-full", "w-4", "h-32", "border-b-2", "border-l-2", "border-base-200"], ["name", "booking-type", "placeholder", "Select Rule", 3, "ngModelChange", "ngModel"], [3, "value", 4, "ngFor", "ngForOf"], ["matInput", "", "name", "value", "placeholder", "Rule value", "required", "", 3, "ngModelChange", "ngModel"], ["icon", "", "matRipple", "", 3, "click"], [3, "value"]],
  template: function AttachedResourceConfigModalComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵelementStart(0, "header")(1, "h3");
      i0.ɵɵtext(2);
      i0.ɵɵelementEnd();
      i0.ɵɵtemplate(3, AttachedResourceConfigModalComponent_button_3_Template, 3, 0, "button", 1);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(4, "main", 2);
      i0.ɵɵtemplate(5, AttachedResourceConfigModalComponent_div_5_Template, 3, 1, "div", 3);
      i0.ɵɵelementStart(6, "button", 4);
      i0.ɵɵlistener("click", function AttachedResourceConfigModalComponent_Template_button_click_6_listener() {
        return ctx.rulesets.push({
          id: ctx.new_id,
          rules: []
        });
      });
      i0.ɵɵtext(7, " New Ruleset ");
      i0.ɵɵelementEnd();
      i0.ɵɵtemplate(8, AttachedResourceConfigModalComponent_div_8_Template, 31, 7, "div", 5);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(9, "footer", 6)(10, "button", 7);
      i0.ɵɵlistener("click", function AttachedResourceConfigModalComponent_Template_button_click_10_listener() {
        return ctx.saveChanges();
      });
      i0.ɵɵtext(11, " Save Changes ");
      i0.ɵɵelementEnd()();
    }
    if (rf & 2) {
      i0.ɵɵadvance(2);
      i0.ɵɵtextInterpolate1("Edit ", ctx.resource_name, " Configuration");
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", !ctx.loading);
      i0.ɵɵadvance(2);
      i0.ɵɵproperty("ngIf", ctx.can_save_notes);
      i0.ɵɵadvance(3);
      i0.ɵɵproperty("ngForOf", ctx.rulesets);
    }
  },
  dependencies: [i1.NgForOf, i1.NgIf, i2.DefaultValueAccessor, i2.NgControlStatus, i2.RequiredValidator, i2.NgModel, i3.MatOption, i4.MatMenu, i4.MatMenuItem, i4.MatMenuTrigger, i5.MatFormField, i5.MatError, i6.MatSelect, i3.MatRipple, i7.MatDialogClose, i8.MatInput, i9.MatCheckbox, i10.IconComponent],
  styles: ["[name='rules'][_ngcontent-%COMP%] {\n                transition: height 200ms;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF0dGFjaGVkLXJlc291cmNlLWNvbmZpZy1tb2RhbC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLHdCQUF3QjtZQUM1QiIsImZpbGUiOiJhdHRhY2hlZC1yZXNvdXJjZS1jb25maWctbW9kYWwuY29tcG9uZW50LnRzIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICBbbmFtZT0ncnVsZXMnXSB7XG4gICAgICAgICAgICAgICAgdHJhbnNpdGlvbjogaGVpZ2h0IDIwMG1zO1xuICAgICAgICAgICAgfVxuICAgICAgICAiXX0= */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvY29tcG9uZW50cy9zcmMvbGliL2F0dGFjaGVkLXJlc291cmNlLWNvbmZpZy1tb2RhbC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLHdCQUF3QjtZQUM1Qjs7QUFFWiw0YkFBNGIiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIFtuYW1lPSdydWxlcyddIHtcbiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uOiBoZWlnaHQgMjAwbXM7XG4gICAgICAgICAgICB9XG4gICAgICAgICJdLCJzb3VyY2VSb290IjoiIn0= */"]
});
exports.AttachedResourceConfigModalComponent = AttachedResourceConfigModalComponent;

/***/ }),

/***/ 93208:
/*!******************************************************************!*\
  !*** ./libs/components/src/lib/authenticated-image.directive.ts ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _regeneratorRuntime = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/regeneratorRuntime.js */ 8698)["default"]);
var _asyncToGenerator = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/asyncToGenerator.js */ 95386)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _callSuper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/callSuper.js */ 8513)["default"]);
var _inherits = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/inherits.js */ 58160)["default"]);
var _AuthenticatedImageDirective;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.AuthenticatedImageDirective = void 0;
var core_1 = __webpack_require__(/*! @angular/core */ 37580);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var ts_client_1 = __webpack_require__(/*! @placeos/ts-client */ 35713);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var IMAGE_STORE = new Map();
var AuthenticatedImageDirective = /*#__PURE__*/function (_common_1$AsyncHandle) {
  function AuthenticatedImageDirective(_image_el) {
    var _this;
    _classCallCheck(this, AuthenticatedImageDirective);
    _this = _callSuper(this, AuthenticatedImageDirective);
    _this._image_el = _image_el;
    return _this;
  }
  _inherits(AuthenticatedImageDirective, _common_1$AsyncHandle);
  return _createClass(AuthenticatedImageDirective, [{
    key: "ngOnChanges",
    value: function ngOnChanges(changes) {
      if (changes.source && this.source) this._loadImage();
    }
  }, {
    key: "_loadImage",
    value: function () {
      var _loadImage2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
        var _this2 = this;
        var tkn, response, blob, url;
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              if (!(!this._image_el || !(0, ts_client_1.authority)())) {
                _context.next = 2;
                break;
              }
              return _context.abrupt("return", this.timeout('load', function () {
                return _this2._loadImage();
              }, 300));
            case 2:
              if (this.source.includes('/api/engine/v2/uploads')) {
                _context.next = 5;
                break;
              }
              this._image_el.nativeElement.src = this.source;
              return _context.abrupt("return");
            case 5:
              if (!IMAGE_STORE.has(this.source)) {
                _context.next = 8;
                break;
              }
              this._image_el.nativeElement.src = IMAGE_STORE.get(this.source);
              return _context.abrupt("return");
            case 8:
              tkn = (0, ts_client_1.token)();
              document.cookie = "".concat(tkn === 'x-api-key' ? 'api-key=' + encodeURIComponent((0, ts_client_1.apiKey)()) : 'bearer_token=' + encodeURIComponent(tkn), ";max-age=30;path=/api/engine/v2/uploads;samesite=strict;").concat(location.protocol === 'https:' ? 'secure;' : '');
              response = null;
              _context.prev = 11;
              _context.next = 14;
              return fetch(this.source)["catch"](function (_) {
                return null;
              });
            case 14:
              response = _context.sent;
              _context.next = 19;
              break;
            case 17:
              _context.prev = 17;
              _context.t0 = _context["catch"](11);
            case 19:
              if (!(!response || !response.ok)) {
                _context.next = 22;
                break;
              }
              console.info('Failed to load image:', this.source);
              return _context.abrupt("return");
            case 22:
              _context.next = 24;
              return response.blob();
            case 24:
              blob = _context.sent;
              url = URL.createObjectURL(blob);
              IMAGE_STORE.set(this.source, url);
              this._image_el.nativeElement.src = url;
            case 28:
            case "end":
              return _context.stop();
          }
        }, _callee, this, [[11, 17]]);
      }));
      function _loadImage() {
        return _loadImage2.apply(this, arguments);
      }
      return _loadImage;
    }()
  }]);
}(common_1.AsyncHandler);
_AuthenticatedImageDirective = AuthenticatedImageDirective;
_AuthenticatedImageDirective.ɵfac = function AuthenticatedImageDirective_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _AuthenticatedImageDirective)(i0.ɵɵdirectiveInject(i0.ElementRef));
};
_AuthenticatedImageDirective.ɵdir = /*@__PURE__*/i0.ɵɵdefineDirective({
  type: _AuthenticatedImageDirective,
  selectors: [["img", "auth", ""], ["video", "auth", ""]],
  inputs: {
    source: "source"
  },
  features: [i0.ɵɵInheritDefinitionFeature, i0.ɵɵNgOnChangesFeature]
});
exports.AuthenticatedImageDirective = AuthenticatedImageDirective;

/***/ }),

/***/ 7345:
/*!***********************************************************!*\
  !*** ./libs/components/src/lib/authorised-admin.guard.ts ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _regeneratorRuntime = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/regeneratorRuntime.js */ 8698)["default"]);
var _asyncToGenerator = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/asyncToGenerator.js */ 95386)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _AuthorisedAdminGuard;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.AuthorisedAdminGuard = void 0;
var router_1 = __webpack_require__(/*! @angular/router */ 95072);
var ts_client_1 = __webpack_require__(/*! @placeos/ts-client */ 35713);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var operators_1 = __webpack_require__(/*! rxjs/operators */ 97303);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @angular/router */ 95072);
var AuthorisedAdminGuard = /*#__PURE__*/function () {
  function AuthorisedAdminGuard(_router) {
    _classCallCheck(this, AuthorisedAdminGuard);
    this._router = _router;
  }
  return _createClass(AuthorisedAdminGuard, [{
    key: "canActivate",
    value: function () {
      var _canActivate = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(next, state) {
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              return _context.abrupt("return", this.checkUser());
            case 1:
            case "end":
              return _context.stop();
          }
        }, _callee, this);
      }));
      function canActivate(_x, _x2) {
        return _canActivate.apply(this, arguments);
      }
      return canActivate;
    }()
  }, {
    key: "canLoad",
    value: function () {
      var _canLoad = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(route, segments) {
        return _regeneratorRuntime().wrap(function _callee2$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              return _context2.abrupt("return", this.checkUser());
            case 1:
            case "end":
              return _context2.stop();
          }
        }, _callee2, this);
      }));
      function canLoad(_x3, _x4) {
        return _canLoad.apply(this, arguments);
      }
      return canLoad;
    }()
  }, {
    key: "checkUser",
    value: function () {
      var _checkUser = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {
        var user, can_activate;
        return _regeneratorRuntime().wrap(function _callee3$(_context3) {
          while (1) switch (_context3.prev = _context3.next) {
            case 0:
              _context3.next = 2;
              return (0, ts_client_1.onlineState)().pipe((0, operators_1.first)(function (_) {
                return _;
              })).toPromise();
            case 2:
              _context3.next = 4;
              return common_1.current_user.pipe((0, operators_1.first)(function (_) {
                return !!_;
              })).toPromise();
            case 4:
              user = _context3.sent;
              can_activate = user && user.groups.includes('placeos_admin');
              if (!can_activate) {
                this._router.navigate(['/unauthorised']);
              }
              return _context3.abrupt("return", can_activate);
            case 8:
            case "end":
              return _context3.stop();
          }
        }, _callee3, this);
      }));
      function checkUser() {
        return _checkUser.apply(this, arguments);
      }
      return checkUser;
    }()
  }]);
}();
_AuthorisedAdminGuard = AuthorisedAdminGuard;
_AuthorisedAdminGuard.ɵfac = function AuthorisedAdminGuard_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _AuthorisedAdminGuard)(i0.ɵɵinject(i1.Router));
};
_AuthorisedAdminGuard.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({
  token: _AuthorisedAdminGuard,
  factory: _AuthorisedAdminGuard.ɵfac,
  providedIn: 'root'
});
exports.AuthorisedAdminGuard = AuthorisedAdminGuard;

/***/ }),

/***/ 1645:
/*!**********************************************************!*\
  !*** ./libs/components/src/lib/authorised-user.guard.ts ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _slicedToArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/slicedToArray.js */ 6282)["default"]);
var _regeneratorRuntime = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/regeneratorRuntime.js */ 8698)["default"]);
var _asyncToGenerator = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/asyncToGenerator.js */ 95386)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _AuthorisedUserGuard;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.AuthorisedUserGuard = exports.PLACEOS_APP_ACCESS = void 0;
var router_1 = __webpack_require__(/*! @angular/router */ 95072);
var ts_client_1 = __webpack_require__(/*! @placeos/ts-client */ 35713);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var operators_1 = __webpack_require__(/*! rxjs/operators */ 97303);
var rxjs_1 = __webpack_require__(/*! rxjs */ 15681);
var settings_service_1 = __webpack_require__(/*! libs/common/src/lib/settings.service */ 14233);
var organisation_service_1 = __webpack_require__(/*! libs/organisation/src/lib/organisation.service */ 19863);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @angular/router */ 95072);
var i2 = __webpack_require__(/*! libs/common/src/lib/settings.service */ 14233);
var i3 = __webpack_require__(/*! libs/organisation/src/lib/organisation.service */ 19863);
var PLACEOS_APP_ACCESS = /*#__PURE__*/_createClass(function PLACEOS_APP_ACCESS() {
  _classCallCheck(this, PLACEOS_APP_ACCESS);
});
exports.PLACEOS_APP_ACCESS = PLACEOS_APP_ACCESS;
var AuthorisedUserGuard = /*#__PURE__*/function () {
  function AuthorisedUserGuard(_router, _settings, _org, _access) {
    _classCallCheck(this, AuthorisedUserGuard);
    this._router = _router;
    this._settings = _settings;
    this._org = _org;
    this._access = _access;
  }
  return _createClass(AuthorisedUserGuard, [{
    key: "canActivate",
    value: function () {
      var _canActivate = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(next, state) {
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              return _context.abrupt("return", this.checkUser());
            case 1:
            case "end":
              return _context.stop();
          }
        }, _callee, this);
      }));
      function canActivate(_x, _x2) {
        return _canActivate.apply(this, arguments);
      }
      return canActivate;
    }()
  }, {
    key: "canLoad",
    value: function () {
      var _canLoad = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(route, segments) {
        return _regeneratorRuntime().wrap(function _callee2$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              return _context2.abrupt("return", this.checkUser());
            case 1:
            case "end":
              return _context2.stop();
          }
        }, _callee2, this);
      }));
      function canLoad(_x3, _x4) {
        return _canLoad.apply(this, arguments);
      }
      return canLoad;
    }()
  }, {
    key: "checkUser",
    value: function () {
      var _checkUser = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {
        var _this$_access;
        var user, groups, can_activate;
        return _regeneratorRuntime().wrap(function _callee3$(_context3) {
          while (1) switch (_context3.prev = _context3.next) {
            case 0:
              _context3.next = 2;
              return (0, rxjs_1.combineLatest)([(0, ts_client_1.onlineState)(), this._org.initialised]).pipe((0, operators_1.first)(function (_ref) {
                var _ref2 = _slicedToArray(_ref, 2),
                  online = _ref2[0],
                  org_init = _ref2[1];
                return online && org_init;
              })).toPromise();
            case 2:
              _context3.next = 4;
              return common_1.current_user.pipe((0, operators_1.first)(function (_) {
                return !!_;
              })).toPromise();
            case 4:
              user = _context3.sent;
              groups = (_this$_access = this._access) !== null && _this$_access !== void 0 && _this$_access.group ? [this._access.group] : this._settings.get('app.allow_access_groups') || [];
              can_activate = !!(user && (!groups.length || groups.find(function (_) {
                return user.groups.includes(_);
              })));
              if (!can_activate) {
                this._router.navigate(['/unauthorised']);
              }
              return _context3.abrupt("return", !!can_activate);
            case 9:
            case "end":
              return _context3.stop();
          }
        }, _callee3, this);
      }));
      function checkUser() {
        return _checkUser.apply(this, arguments);
      }
      return checkUser;
    }()
  }]);
}();
_AuthorisedUserGuard = AuthorisedUserGuard;
_AuthorisedUserGuard.ɵfac = function AuthorisedUserGuard_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _AuthorisedUserGuard)(i0.ɵɵinject(i1.Router), i0.ɵɵinject(i2.SettingsService), i0.ɵɵinject(i3.OrganisationService), i0.ɵɵinject(PLACEOS_APP_ACCESS, 8));
};
_AuthorisedUserGuard.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({
  token: _AuthorisedUserGuard,
  factory: _AuthorisedUserGuard.ɵfac,
  providedIn: 'root'
});
exports.AuthorisedUserGuard = AuthorisedUserGuard;

/***/ }),

/***/ 10375:
/*!**************************************************************************!*\
  !*** ./libs/components/src/lib/available-rooms-state-modal.component.ts ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _regeneratorRuntime = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/regeneratorRuntime.js */ 8698)["default"]);
var _toConsumableArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/toConsumableArray.js */ 86033)["default"]);
var _asyncToGenerator = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/asyncToGenerator.js */ 95386)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _AvailableRoomsStateModalComponent;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.AvailableRoomsStateModalComponent = void 0;
var core_1 = __webpack_require__(/*! @angular/core */ 37580);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var organisation_1 = __webpack_require__(/*! @placeos/organisation */ 2510);
var space_utilities_1 = __webpack_require__(/*! libs/spaces/src/lib/space.utilities */ 28363);
var operators_1 = __webpack_require__(/*! rxjs/operators */ 97303);
var dialog_1 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @placeos/organisation */ 2510);
var i2 = __webpack_require__(/*! @angular/common */ 60316);
var i3 = __webpack_require__(/*! @angular/material/core */ 74646);
var i4 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var i5 = __webpack_require__(/*! @angular/material/progress-spinner */ 41134);
var i6 = __webpack_require__(/*! @angular/material/checkbox */ 97024);
var i7 = __webpack_require__(/*! ./icon.component */ 69434);
function AvailableRoomsStateModalComponent_main_7_tr_13_Template(rf, ctx) {
  if (rf & 1) {
    var _r4 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "tr", 14);
    i0.ɵɵlistener("click", function AvailableRoomsStateModalComponent_main_7_tr_13_Template_tr_click_0_listener() {
      var space_r5 = i0.ɵɵrestoreView(_r4).$implicit;
      var ctx_r2 = i0.ɵɵnextContext(2);
      return i0.ɵɵresetView(ctx_r2.toggleRoom(space_r5.id));
    });
    i0.ɵɵelementStart(1, "td");
    i0.ɵɵelement(2, "mat-checkbox", 15);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(3, "td");
    i0.ɵɵtext(4);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(5, "td", 16)(6, "div", 17);
    i0.ɵɵtext(7);
    i0.ɵɵelementEnd()()();
  }
  if (rf & 2) {
    var space_r5 = ctx.$implicit;
    var ctx_r2 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance(2);
    i0.ɵɵproperty("checked", ctx_r2.selected.includes(space_r5.id));
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate(space_r5.display_name || space_r5.name);
    i0.ɵɵadvance(2);
    i0.ɵɵclassProp("bg-success", !(ctx_r2.disabled_rooms == null ? null : ctx_r2.disabled_rooms.includes(space_r5.id)))("bg-error", ctx_r2.disabled_rooms == null ? null : ctx_r2.disabled_rooms.includes(space_r5.id));
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", !(ctx_r2.disabled_rooms == null ? null : ctx_r2.disabled_rooms.includes(space_r5.id)) ? "Enabled" : "Disabled", " ");
  }
}
function AvailableRoomsStateModalComponent_main_7_Template(rf, ctx) {
  if (rf & 1) {
    var _r2 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "main", 7)(1, "table", 8)(2, "thead", 9)(3, "tr")(4, "td", 10);
    i0.ɵɵlistener("click", function AvailableRoomsStateModalComponent_main_7_Template_td_click_4_listener() {
      i0.ɵɵrestoreView(_r2);
      var ctx_r2 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r2.toggleRoom("*"));
    });
    i0.ɵɵelement(5, "mat-checkbox", 11);
    i0.ɵɵpipe(6, "async");
    i0.ɵɵpipe(7, "async");
    i0.ɵɵelementEnd();
    i0.ɵɵelement(8, "td");
    i0.ɵɵelementStart(9, "td", 12);
    i0.ɵɵtext(10);
    i0.ɵɵpipe(11, "async");
    i0.ɵɵelementEnd()()();
    i0.ɵɵelementStart(12, "tbody");
    i0.ɵɵtemplate(13, AvailableRoomsStateModalComponent_main_7_tr_13_Template, 8, 7, "tr", 13);
    i0.ɵɵpipe(14, "async");
    i0.ɵɵelementEnd()()();
  }
  if (rf & 2) {
    var tmp_2_0;
    var tmp_3_0;
    var tmp_4_0;
    var ctx_r2 = i0.ɵɵnextContext();
    i0.ɵɵadvance(5);
    i0.ɵɵproperty("checked", ((tmp_2_0 = i0.ɵɵpipeBind1(6, 4, ctx_r2.rooms)) == null ? null : tmp_2_0.length) === ctx_r2.selected.length)("indeterminate", ctx_r2.selected.length > 0 && ((tmp_3_0 = i0.ɵɵpipeBind1(7, 6, ctx_r2.rooms)) == null ? null : tmp_3_0.length) !== ctx_r2.selected.length);
    i0.ɵɵadvance(5);
    i0.ɵɵtextInterpolate1(" ", (tmp_4_0 = i0.ɵɵpipeBind1(11, 8, ctx_r2.rooms)) == null ? null : tmp_4_0.length, " Room(s) ");
    i0.ɵɵadvance(3);
    i0.ɵɵproperty("ngForOf", i0.ɵɵpipeBind1(14, 10, ctx_r2.rooms));
  }
}
function AvailableRoomsStateModalComponent_ng_template_13_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "main", 18);
    i0.ɵɵelement(1, "mat-spinner", 19);
    i0.ɵɵelementStart(2, "p");
    i0.ɵɵtext(3, "Saving disabled room list...");
    i0.ɵɵelementEnd()();
  }
}
var AvailableRoomsStateModalComponent = /*#__PURE__*/function () {
  function AvailableRoomsStateModalComponent(_data, _org) {
    _classCallCheck(this, AvailableRoomsStateModalComponent);
    this._data = _data;
    this._org = _org;
    this.change = new core_1.EventEmitter();
    this.loading = false;
    this.selected = [];
    this.rooms = (0, space_utilities_1.requestSpacesForZone)(this._org.building.id);
    this.type = this._data.type;
    this.disabled_rooms = this._data.disabled_rooms;
  }
  return _createClass(AvailableRoomsStateModalComponent, [{
    key: "toggleRoom",
    value: function () {
      var _toggleRoom = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(id) {
        var rooms;
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              if (!(id === '*')) {
                _context.next = 7;
                break;
              }
              _context.next = 3;
              return this.rooms.pipe((0, operators_1.take)(1)).toPromise();
            case 3:
              rooms = _context.sent;
              if (this.selected.length !== rooms.length) this.selected = rooms.map(function (_) {
                return _.id;
              });else this.selected = [];
              _context.next = 8;
              break;
            case 7:
              if (this.selected.includes(id)) this.selected = this.selected.filter(function (_) {
                return _ !== id;
              });else this.selected = [].concat(_toConsumableArray(this.selected), [id]);
            case 8:
            case "end":
              return _context.stop();
          }
        }, _callee, this);
      }));
      function toggleRoom(_x) {
        return _toggleRoom.apply(this, arguments);
      }
      return toggleRoom;
    }()
  }, {
    key: "enableSelected",
    value: function () {
      var _enableSelected = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {
        var _this = this;
        var disabled_list, list;
        return _regeneratorRuntime().wrap(function _callee2$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              this.loading = true;
              disabled_list = this.disabled_rooms;
              list = disabled_list.filter(function (_) {
                return !_this.selected.includes(_);
              });
              this.disabled_rooms = list;
              this.change.next(list);
            case 5:
            case "end":
              return _context2.stop();
          }
        }, _callee2, this);
      }));
      function enableSelected() {
        return _enableSelected.apply(this, arguments);
      }
      return enableSelected;
    }()
  }, {
    key: "disableSelected",
    value: function () {
      var _disableSelected = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {
        var disabled_list, list;
        return _regeneratorRuntime().wrap(function _callee3$(_context3) {
          while (1) switch (_context3.prev = _context3.next) {
            case 0:
              this.loading = true;
              disabled_list = this.disabled_rooms;
              list = (0, common_1.unique)(disabled_list.concat(this.selected));
              this.disabled_rooms = list;
              this.change.next(list);
            case 5:
            case "end":
              return _context3.stop();
          }
        }, _callee3, this);
      }));
      function disableSelected() {
        return _disableSelected.apply(this, arguments);
      }
      return disableSelected;
    }()
  }]);
}();
_AvailableRoomsStateModalComponent = AvailableRoomsStateModalComponent;
_AvailableRoomsStateModalComponent.ɵfac = function AvailableRoomsStateModalComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _AvailableRoomsStateModalComponent)(i0.ɵɵdirectiveInject(dialog_1.MAT_DIALOG_DATA), i0.ɵɵdirectiveInject(i1.OrganisationService));
};
_AvailableRoomsStateModalComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _AvailableRoomsStateModalComponent,
  selectors: [["catering-rooms-state-modal"]],
  outputs: {
    change: "change"
  },
  decls: 15,
  vars: 3,
  consts: [["load_state", ""], [1, "flex", "items-center", "justify-between", "p-2"], [1, "p-2"], ["icon", "", "mat-dialog-close", ""], ["class", "max-h-[65vh] overflow-auto", 4, "ngIf", "ngIfElse"], [1, "flex", "items-center", "p-2", "justify-end", "space-x-2", "border-t", "border-base-200"], ["btn", "", "matRipple", "", 3, "click"], [1, "max-h-[65vh]", "overflow-auto"], [1, "min-w-[32rem]"], [1, "border-b", "border-base-200"], [1, "w-12", 3, "click"], [1, "pointer-events-none", 3, "checked", "indeterminate"], [1, "text-right", "text-xs"], ["class", "hover:bg-neutral:bg-base-100/5", 3, "click", 4, "ngFor", "ngForOf"], [1, "hover:bg-neutral:bg-base-100/5", 3, "click"], [1, "pointer-events-none", 3, "checked"], [1, "text-center"], [1, "ml-auto", "px-3", "py-1", "rounded-2xl", "text-white", "w-24"], [1, "w-64", "h-48", "p-8", "flex", "flex-col", "items-center", "justify-center", "space-y-2"], ["diameter", "32"]],
  template: function AvailableRoomsStateModalComponent_Template(rf, ctx) {
    if (rf & 1) {
      var _r1 = i0.ɵɵgetCurrentView();
      i0.ɵɵelementStart(0, "div")(1, "header", 1)(2, "h3", 2);
      i0.ɵɵtext(3);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(4, "button", 3)(5, "app-icon");
      i0.ɵɵtext(6, "close");
      i0.ɵɵelementEnd()()();
      i0.ɵɵtemplate(7, AvailableRoomsStateModalComponent_main_7_Template, 15, 12, "main", 4);
      i0.ɵɵelementStart(8, "footer", 5)(9, "button", 6);
      i0.ɵɵlistener("click", function AvailableRoomsStateModalComponent_Template_button_click_9_listener() {
        i0.ɵɵrestoreView(_r1);
        return i0.ɵɵresetView(ctx.enableSelected());
      });
      i0.ɵɵtext(10, " Enable Selected ");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(11, "button", 6);
      i0.ɵɵlistener("click", function AvailableRoomsStateModalComponent_Template_button_click_11_listener() {
        i0.ɵɵrestoreView(_r1);
        return i0.ɵɵresetView(ctx.disableSelected());
      });
      i0.ɵɵtext(12, " Disable Selected ");
      i0.ɵɵelementEnd()()();
      i0.ɵɵtemplate(13, AvailableRoomsStateModalComponent_ng_template_13_Template, 4, 0, "ng-template", null, 0, i0.ɵɵtemplateRefExtractor);
    }
    if (rf & 2) {
      var load_state_r6 = i0.ɵɵreference(14);
      i0.ɵɵadvance(3);
      i0.ɵɵtextInterpolate1("Set ", ctx.type, " Availability for Rooms");
      i0.ɵɵadvance(4);
      i0.ɵɵproperty("ngIf", !ctx.loading)("ngIfElse", load_state_r6);
    }
  },
  dependencies: [i2.NgForOf, i2.NgIf, i3.MatRipple, i4.MatDialogClose, i5.MatProgressSpinner, i6.MatCheckbox, i7.IconComponent, i2.AsyncPipe],
  styles: ["td[_ngcontent-%COMP%] {\n                padding: 0.5rem;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF2YWlsYWJsZS1yb29tcy1zdGF0ZS1tb2RhbC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLGVBQWU7WUFDbkIiLCJmaWxlIjoiYXZhaWxhYmxlLXJvb21zLXN0YXRlLW1vZGFsLmNvbXBvbmVudC50cyIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgdGQge1xuICAgICAgICAgICAgICAgIHBhZGRpbmc6IDAuNXJlbTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl19 */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvY29tcG9uZW50cy9zcmMvbGliL2F2YWlsYWJsZS1yb29tcy1zdGF0ZS1tb2RhbC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLGVBQWU7WUFDbkI7O0FBRVosb1pBQW9aIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICB0ZCB7XG4gICAgICAgICAgICAgICAgcGFkZGluZzogMC41cmVtO1xuICAgICAgICAgICAgfVxuICAgICAgICAiXSwic291cmNlUm9vdCI6IiJ9 */"]
});
exports.AvailableRoomsStateModalComponent = AvailableRoomsStateModalComponent;

/***/ }),

/***/ 83938:
/*!******************************************************!*\
  !*** ./libs/components/src/lib/binding.directive.ts ***!
  \******************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _callSuper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/callSuper.js */ 8513)["default"]);
var _inherits = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/inherits.js */ 58160)["default"]);
var _BindingDirective;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.BindingDirective = void 0;
var core_1 = __webpack_require__(/*! @angular/core */ 37580);
var ts_client_1 = __webpack_require__(/*! @placeos/ts-client */ 35713);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var operators_1 = __webpack_require__(/*! rxjs/operators */ 97303);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var BindingDirective = /*#__PURE__*/function (_common_1$AsyncHandle) {
  function BindingDirective(_element, _renderer) {
    var _this;
    _classCallCheck(this, BindingDirective);
    _this = _callSuper(this, BindingDirective);
    _this._element = _element;
    _this._renderer = _renderer;
    /** ID of the system to bind */
    _this.sys = '';
    /** Class name of the module to bind */
    _this.mod = '';
    /** Index of the system to bind */
    _this.index = 1;
    /** Status variable to bind to */
    _this.bind = '';
    /** Method to execute */
    _this.exec = '';
    /** Method to execute */
    _this.delay = 100;
    /** Event to listen for on the parent */
    _this.on_event = '';
    /** ID of the system to bind to */
    _this.params = null;
    _this.ignore = false;
    /** Current value of the binding */
    _this.model = null;
    /** Emitter for changes to the value of the binding */
    _this.modelChange = new core_1.EventEmitter();
    _this._binding = false;
    _this._old_model = null;
    return _this;
  }
  _inherits(BindingDirective, _common_1$AsyncHandle);
  return _createClass(BindingDirective, [{
    key: "ngOnInit",
    value: function ngOnInit() {
      var _ref,
        _this2 = this;
      (_ref = (0, ts_client_1.onlineState)()) === null || _ref === void 0 || _ref.pipe((0, operators_1.first)(function (_) {
        return _;
      })).subscribe(function (_) {
        return _this2.bindVariable();
      });
    }
  }, {
    key: "ngOnChanges",
    value: function ngOnChanges(changes) {
      var _this3 = this;
      if (changes.sys || changes.mod || changes.bind) {
        this.bindVariable();
      }
      if (changes.model && this._old_model !== this.model && this.model != null) {
        this._old_model = this.model;
        this.execute();
      }
      if (changes.on_event && this.on_event) {
        this.subscription('on_event', this._renderer.listen(this._element.nativeElement, this.on_event, function () {
          return _this3.execute();
        }));
      }
    }
    /** Bind to set status variable */
  }, {
    key: "bindVariable",
    value: function bindVariable() {
      var _this4 = this;
      if ((0, ts_client_1.authority)() && this.bind && this.sys && this.mod && !this._binding) {
        this.timeout('bind', function () {
          var module = (0, ts_client_1.getModule)(_this4.sys, _this4.mod, _this4.index);
          var binding = module.binding(_this4.bind);
          _this4._binding = true;
          _this4.subscription('binding', binding.bind());
          _this4.subscription('on_changes', binding.listen().pipe((0, operators_1.filter)(function (_) {
            return _ != null;
          })).subscribe(function (value) {
            setTimeout(function () {
              _this4._binding = false;
              _this4.clearTimeout('bound');
              if (_this4.ignore) return;
              _this4.model = value;
              _this4._old_model = _this4.model;
              _this4.modelChange.emit(_this4.model);
            }, 10);
          }));
          _this4.timeout('bound', function () {
            return _this4._binding = false;
          }, 200);
        }, 20);
      }
    }
    /** Excute the set method on the module */
  }, {
    key: "execute",
    value: function execute() {
      var _this5 = this;
      if ((0, ts_client_1.authority)() && this.exec && this.sys && this.mod && !this._timers['execute']) {
        this.timeout('execute', function () {
          var module = (0, ts_client_1.getModule)(_this5.sys, _this5.mod, _this5.index);
          var params = _this5.params;
          if (_this5.bind) params = _this5.params || [_this5.model];
          module.execute(_this5.exec, params || []).then(function (result) {
            // Emit exec result if not bound to status variable
            if (!_this5.bind) {
              _this5.model = result;
              _this5._old_model = _this5.model;
              _this5.modelChange.emit(_this5.model);
            }
          });
        }, this.delay);
      }
    }
  }]);
}(common_1.AsyncHandler);
_BindingDirective = BindingDirective;
_BindingDirective.ɵfac = function BindingDirective_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _BindingDirective)(i0.ɵɵdirectiveInject(i0.ElementRef), i0.ɵɵdirectiveInject(i0.Renderer2));
};
_BindingDirective.ɵdir = /*@__PURE__*/i0.ɵɵdefineDirective({
  type: _BindingDirective,
  selectors: [["i", "bind", ""], ["", "binding", ""], ["co-bind"]],
  inputs: {
    sys: "sys",
    mod: "mod",
    index: "index",
    bind: "bind",
    exec: "exec",
    delay: "delay",
    on_event: [0, "onEvent", "on_event"],
    params: "params",
    ignore: "ignore",
    model: "model"
  },
  outputs: {
    modelChange: "modelChange"
  },
  features: [i0.ɵɵInheritDefinitionFeature, i0.ɵɵNgOnChangesFeature]
});
exports.BindingDirective = BindingDirective;

/***/ }),

/***/ 55550:
/*!**************************************************************!*\
  !*** ./libs/components/src/lib/building-select.component.ts ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _taggedTemplateLiteral = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js */ 9959)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _BuildingSelectComponent, _templateObject;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.BuildingSelectComponent = void 0;
var components_1 = __webpack_require__(/*! @placeos/components */ 51588);
var organisation_1 = __webpack_require__(/*! @placeos/organisation */ 2510);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @placeos/organisation */ 2510);
var i2 = __webpack_require__(/*! @angular/common */ 60316);
var i3 = __webpack_require__(/*! @angular/forms */ 34456);
var i4 = __webpack_require__(/*! @angular/material/radio */ 53804);
var i5 = __webpack_require__(/*! ./icon.component */ 69434);
function BuildingSelectComponent_mat_radio_button_12_Template(rf, ctx) {
  if (rf & 1) {
    var _r1 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "mat-radio-button", 8);
    i0.ɵɵlistener("click", function BuildingSelectComponent_mat_radio_button_12_Template_mat_radio_button_click_0_listener() {
      var bld_r2 = i0.ɵɵrestoreView(_r1).$implicit;
      var ctx_r2 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r2.setBuilding(bld_r2));
    });
    i0.ɵɵtext(1);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var bld_r2 = ctx.$implicit;
    i0.ɵɵproperty("value", bld_r2.id);
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", bld_r2.display_name || bld_r2.name, " ");
  }
}
var BuildingSelectComponent = /*#__PURE__*/_createClass(function BuildingSelectComponent(_data, _org) {
  var _this = this;
  _classCallCheck(this, BuildingSelectComponent);
  this._data = _data;
  this._org = _org;
  this.buildings = this._org.active_buildings;
  this.building = this._org.active_building;
  this.setBuilding = function (b) {
    var _this$_data;
    _this._org.building = b;
    _this._org.saveBuilding(b.id);
    (_this$_data = _this._data) === null || _this$_data === void 0 || _this$_data.close();
  };
  this.close = function () {
    var _this$_data2;
    return (_this$_data2 = _this._data) === null || _this$_data2 === void 0 ? void 0 : _this$_data2.close();
  };
});
_BuildingSelectComponent = BuildingSelectComponent;
_BuildingSelectComponent.ɵfac = function BuildingSelectComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _BuildingSelectComponent)(i0.ɵɵdirectiveInject(components_1.CustomTooltipData), i0.ɵɵdirectiveInject(i1.OrganisationService));
};
_BuildingSelectComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _BuildingSelectComponent,
  selectors: [["building-select"]],
  decls: 14,
  vars: 11,
  consts: function consts() {
    var i18n_0;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_4543839253815117286$$LIBS_COMPONENTS_SRC_LIB_BUILDING_SELECT_COMPONENT_TS_0 = goog.getMsg(" Select a building location ");
      i18n_0 = MSG_EXTERNAL_4543839253815117286$$LIBS_COMPONENTS_SRC_LIB_BUILDING_SELECT_COMPONENT_TS_0;
    } else {
      i18n_0 = $localize(_templateObject || (_templateObject = _taggedTemplateLiteral([":\u241Ff6bc545a20f571c426f74d4d3522b71334f2b845\u241F4543839253815117286: Select a building location "])));
    }
    return [i18n_0, [1, "flex", "flex-col", "w-[18.5rem]", "rounded", "bg-base-100", "shadow", "p-2", "relative", "-top-12", "-right-1", "overflow-auto", "max-h-[65vh]", 3, "click"], [1, "flex", "items-center", "space-x-2"], [1, "text-2xl"], [1, ""], [1, "text-xs", "opacity-60", "mb-4", "px-2"], [1, "flex", "flex-col", "space-y-2", "px-2", 3, "ngModel"], [3, "value", "click", 4, "ngFor", "ngForOf"], [3, "click", "value"]];
  },
  template: function BuildingSelectComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵelementStart(0, "div", 1);
      i0.ɵɵlistener("click", function BuildingSelectComponent_Template_div_click_0_listener() {
        return ctx.close();
      });
      i0.ɵɵelementStart(1, "div", 2)(2, "app-icon", 3);
      i0.ɵɵtext(3, "arrow_back");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(4, "div", 4);
      i0.ɵɵtext(5);
      i0.ɵɵpipe(6, "async");
      i0.ɵɵpipe(7, "async");
      i0.ɵɵelementEnd()();
      i0.ɵɵelementStart(8, "div", 5);
      i0.ɵɵi18n(9, 0);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(10, "mat-radio-group", 6);
      i0.ɵɵpipe(11, "async");
      i0.ɵɵtemplate(12, BuildingSelectComponent_mat_radio_button_12_Template, 2, 2, "mat-radio-button", 7);
      i0.ɵɵpipe(13, "async");
      i0.ɵɵelementEnd()();
    }
    if (rf & 2) {
      var tmp_0_0;
      var tmp_1_0;
      i0.ɵɵadvance(5);
      i0.ɵɵtextInterpolate1(" ", ((tmp_0_0 = i0.ɵɵpipeBind1(6, 3, ctx.building)) == null ? null : tmp_0_0.display_name) || ((tmp_0_0 = i0.ɵɵpipeBind1(7, 5, ctx.building)) == null ? null : tmp_0_0.name), " ");
      i0.ɵɵadvance(5);
      i0.ɵɵproperty("ngModel", (tmp_1_0 = i0.ɵɵpipeBind1(11, 7, ctx.building)) == null ? null : tmp_1_0.id);
      i0.ɵɵadvance(2);
      i0.ɵɵproperty("ngForOf", i0.ɵɵpipeBind1(13, 9, ctx.buildings));
    }
  },
  dependencies: [i2.NgForOf, i3.NgControlStatus, i3.NgModel, i4.MatRadioGroup, i4.MatRadioButton, i5.IconComponent, i2.AsyncPipe]
});
exports.BuildingSelectComponent = BuildingSelectComponent;

/***/ }),

/***/ 56062:
/*!**************************************************!*\
  !*** ./libs/components/src/lib/building.pipe.ts ***!
  \**************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _BuildingPipe;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.BuildingPipe = void 0;
var organisation_1 = __webpack_require__(/*! @placeos/organisation */ 2510);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @placeos/organisation */ 2510);
var BuildingPipe = /*#__PURE__*/function () {
  function BuildingPipe(_org) {
    _classCallCheck(this, BuildingPipe);
    this._org = _org;
  }
  return _createClass(BuildingPipe, [{
    key: "transform",
    value: function transform(id) {
      return this._org.buildings.find(function (bld) {
        return id instanceof Array ? id.includes(bld.id) : bld.id === id;
      });
    }
  }]);
}();
_BuildingPipe = BuildingPipe;
_BuildingPipe.ɵfac = function BuildingPipe_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _BuildingPipe)(i0.ɵɵdirectiveInject(i1.OrganisationService, 16));
};
_BuildingPipe.ɵpipe = /*@__PURE__*/i0.ɵɵdefinePipe({
  name: "building",
  type: _BuildingPipe,
  pure: true
});
exports.BuildingPipe = BuildingPipe;

/***/ }),

/***/ 65991:
/*!**************************************************************!*\
  !*** ./libs/components/src/lib/changelog-modal.component.ts ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _ChangelogModalComponent;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.ChangelogModalComponent = void 0;
var dialog_1 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var marked_1 = __webpack_require__(/*! marked */ 21019);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @angular/common */ 60316);
var i2 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var i3 = __webpack_require__(/*! ./icon.component */ 69434);
var i4 = __webpack_require__(/*! ./safe.pipe */ 26781);
function ChangelogModalComponent_main_6_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelement(0, "main", 4);
    i0.ɵɵpipe(1, "safe");
  }
  if (rf & 2) {
    var ctx_r0 = i0.ɵɵnextContext();
    i0.ɵɵproperty("innerHTML", i0.ɵɵpipeBind2(1, 1, ctx_r0.changelog, "html"), i0.ɵɵsanitizeHtml);
  }
}
function ChangelogModalComponent_ng_template_7_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 5)(1, "app-icon", 6);
    i0.ɵɵtext(2, "close");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(3, "div", 7);
    i0.ɵɵtext(4, "No changelog");
    i0.ɵɵelementEnd()();
  }
}
var ChangelogModalComponent = /*#__PURE__*/function () {
  function ChangelogModalComponent(_data) {
    _classCallCheck(this, ChangelogModalComponent);
    this._data = _data;
  }
  /** HTML string for rendering the change log */
  return _createClass(ChangelogModalComponent, [{
    key: "changelog",
    get: function get() {
      return (0, marked_1.marked)(this._data.changelog || '', {
        async: false
      });
    }
  }]);
}();
_ChangelogModalComponent = ChangelogModalComponent;
_ChangelogModalComponent.ɵfac = function ChangelogModalComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _ChangelogModalComponent)(i0.ɵɵdirectiveInject(dialog_1.MAT_DIALOG_DATA));
};
_ChangelogModalComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _ChangelogModalComponent,
  selectors: [["changelog-modal"]],
  decls: 9,
  vars: 2,
  consts: [["empty_state", ""], ["mat-dialog-title", ""], ["icon", "", "mat-dialog-close", ""], ["class", "p-4 markdown max-h-[65vh] max-w-[80vw] overflow-auto", 3, "innerHTML", 4, "ngIf", "ngIfElse"], [1, "p-4", "markdown", "max-h-[65vh]", "max-w-[80vw]", "overflow-auto", 3, "innerHTML"], [1, "flex", "items-center", "justify-center", "flex-col", "space-y-2"], [1, "text-3xl"], [1, "text"]],
  template: function ChangelogModalComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵelementStart(0, "header")(1, "h3", 1);
      i0.ɵɵtext(2, "Changelog");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(3, "button", 2)(4, "app-icon");
      i0.ɵɵtext(5, "close");
      i0.ɵɵelementEnd()()();
      i0.ɵɵtemplate(6, ChangelogModalComponent_main_6_Template, 2, 4, "main", 3)(7, ChangelogModalComponent_ng_template_7_Template, 5, 0, "ng-template", null, 0, i0.ɵɵtemplateRefExtractor);
    }
    if (rf & 2) {
      var empty_state_r2 = i0.ɵɵreference(8);
      i0.ɵɵadvance(6);
      i0.ɵɵproperty("ngIf", ctx.changelog)("ngIfElse", empty_state_r2);
    }
  },
  dependencies: [i1.NgIf, i2.MatDialogClose, i2.MatDialogTitle, i3.IconComponent, i4.SafePipe]
});
exports.ChangelogModalComponent = ChangelogModalComponent;

/***/ }),

/***/ 79496:
/*!********************************************************!*\
  !*** ./libs/components/src/lib/chat/chat.component.ts ***!
  \********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _callSuper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/callSuper.js */ 8513)["default"]);
var _inherits = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/inherits.js */ 58160)["default"]);
var _ChatComponent;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.ChatComponent = void 0;
var core_1 = __webpack_require__(/*! @angular/core */ 37580);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var chat_service_1 = __webpack_require__(/*! ./chat.service */ 45632);
var operators_1 = __webpack_require__(/*! rxjs/operators */ 97303);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @placeos/common */ 22797);
var i2 = __webpack_require__(/*! ./chat.service */ 45632);
var i3 = __webpack_require__(/*! @angular/common */ 60316);
var i4 = __webpack_require__(/*! @angular/forms */ 34456);
var i5 = __webpack_require__(/*! @angular/material/core */ 74646);
var i6 = __webpack_require__(/*! ../icon.component */ 69434);
var i7 = __webpack_require__(/*! ../sanitise.pipe */ 54616);
var i8 = __webpack_require__(/*! ../date-from.pipe */ 17025);
var _c0 = ["input"];
var _c1 = ["container"];
function ChatComponent_div_0_div_4_div_16_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 21);
    i0.ɵɵtext(1);
    i0.ɵɵpipe(2, "async");
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext(3);
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", i0.ɵɵpipeBind1(2, 1, ctx_r1.hint), " ");
  }
}
function ChatComponent_div_0_div_4_div_18_div_3_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 27);
    i0.ɵɵtext(1, " Assistant ");
    i0.ɵɵelementEnd();
  }
}
function ChatComponent_div_0_div_4_div_18_Template(rf, ctx) {
  if (rf & 1) {
    var _r4 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 22);
    i0.ɵɵpipe(1, "async");
    i0.ɵɵlistener("click", function ChatComponent_div_0_div_4_div_18_Template_div_click_0_listener() {
      var message_r5 = i0.ɵɵrestoreView(_r4).$implicit;
      var ctx_r1 = i0.ɵɵnextContext(3);
      return i0.ɵɵresetView(ctx_r1.show_time[message_r5.id] = !ctx_r1.show_time[message_r5.id]);
    });
    i0.ɵɵelementStart(2, "div", 23);
    i0.ɵɵtemplate(3, ChatComponent_div_0_div_4_div_18_div_3_Template, 2, 0, "div", 24);
    i0.ɵɵelementStart(4, "div", 25);
    i0.ɵɵtext(5);
    i0.ɵɵpipe(6, "dateFrom");
    i0.ɵɵelementEnd()();
    i0.ɵɵelement(7, "div", 26);
    i0.ɵɵpipe(8, "sanitize");
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var message_r5 = ctx.$implicit;
    var ctx_r1 = i0.ɵɵnextContext(3);
    i0.ɵɵclassProp("pr-4", message_r5.user_id !== ctx_r1.user.id)("pl-4", message_r5.user_id === ctx_r1.user.id)("items-left", message_r5.user_id !== ctx_r1.user.id)("items-end", message_r5.user_id === ctx_r1.user.id)("waiting-margin", i0.ɵɵpipeBind1(1, 13, ctx_r1.waiting));
    i0.ɵɵadvance(3);
    i0.ɵɵproperty("ngIf", message_r5.user_id !== ctx_r1.user.id);
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate1(" ", i0.ɵɵpipeBind1(6, 15, message_r5.timestamp + ctx_r1.offset), " ");
    i0.ɵɵadvance(2);
    i0.ɵɵproperty("innerHTML", i0.ɵɵpipeBind1(8, 17, message_r5.content), i0.ɵɵsanitizeHtml);
  }
}
function ChatComponent_div_0_div_4_div_20_div_12_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelement(0, "div", 35);
    i0.ɵɵpipe(1, "async");
    i0.ɵɵpipe(2, "sanitize");
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext(4);
    i0.ɵɵproperty("innerHTML", i0.ɵɵpipeBind1(2, 3, i0.ɵɵpipeBind1(1, 1, ctx_r1.progress).content), i0.ɵɵsanitizeHtml);
  }
}
function ChatComponent_div_0_div_4_div_20_Template(rf, ctx) {
  if (rf & 1) {
    var _r6 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 28)(1, "button", 29);
    i0.ɵɵlistener("click", function ChatComponent_div_0_div_4_div_20_Template_button_click_1_listener() {
      i0.ɵɵrestoreView(_r6);
      var ctx_r1 = i0.ɵɵnextContext(3);
      return i0.ɵɵresetView(ctx_r1.show_info = !ctx_r1.show_info);
    });
    i0.ɵɵelementStart(2, "div", 23)(3, "app-icon", 30);
    i0.ɵɵtext(4);
    i0.ɵɵpipe(5, "async");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(6, "p", 31);
    i0.ɵɵtext(7);
    i0.ɵɵpipe(8, "async");
    i0.ɵɵpipe(9, "async");
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(10, "div", 32);
    i0.ɵɵelement(11, "div", 33);
    i0.ɵɵtemplate(12, ChatComponent_div_0_div_4_div_20_div_12_Template, 3, 5, "div", 34);
    i0.ɵɵelementEnd()()();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext(3);
    i0.ɵɵadvance(4);
    i0.ɵɵtextInterpolate(ctx_r1.icons[i0.ɵɵpipeBind1(5, 3, ctx_r1.progress)["function"]] || "info");
    i0.ɵɵadvance(3);
    i0.ɵɵtextInterpolate1(" ", i0.ɵɵpipeBind1(8, 5, ctx_r1.progress).message || i0.ɵɵpipeBind1(9, 7, ctx_r1.progress)["function"], " ");
    i0.ɵɵadvance(5);
    i0.ɵɵproperty("ngIf", ctx_r1.show_info);
  }
}
function ChatComponent_div_0_div_4_div_22_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 36);
    i0.ɵɵelement(1, "div", 37)(2, "div", 38)(3, "div", 39);
    i0.ɵɵelementStart(4, "span", 40);
    i0.ɵɵtext(5, "Waiting for reply...");
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext(3);
    i0.ɵɵstyleProp("bottom", ctx_r1.height + 8 + "px");
  }
}
function ChatComponent_div_0_div_4_Template(rf, ctx) {
  if (rf & 1) {
    var _r3 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 6)(1, "div", 7)(2, "h3", 8);
    i0.ɵɵtext(3, "Virtual Assistant");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(4, "button", 9);
    i0.ɵɵlistener("click", function ChatComponent_div_0_div_4_Template_button_click_4_listener() {
      i0.ɵɵrestoreView(_r3);
      var ctx_r1 = i0.ɵɵnextContext(2);
      return i0.ɵɵresetView(ctx_r1.toggleChat());
    });
    i0.ɵɵelementStart(5, "app-icon");
    i0.ɵɵtext(6, "close");
    i0.ɵɵelementEnd()()();
    i0.ɵɵelementStart(7, "div", 10, 0)(9, "div", 11)(10, "app-icon", 12);
    i0.ɵɵtext(11, "forum");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(12, "p", 13);
    i0.ɵɵtext(13);
    i0.ɵɵelement(14, "br");
    i0.ɵɵtext(15, " Welcome to the virtual assistant. ");
    i0.ɵɵelementEnd()();
    i0.ɵɵtemplate(16, ChatComponent_div_0_div_4_div_16_Template, 3, 3, "div", 14);
    i0.ɵɵpipe(17, "async");
    i0.ɵɵtemplate(18, ChatComponent_div_0_div_4_div_18_Template, 9, 19, "div", 15);
    i0.ɵɵpipe(19, "async");
    i0.ɵɵtemplate(20, ChatComponent_div_0_div_4_div_20_Template, 13, 9, "div", 16);
    i0.ɵɵpipe(21, "async");
    i0.ɵɵelementEnd();
    i0.ɵɵtemplate(22, ChatComponent_div_0_div_4_div_22_Template, 6, 2, "div", 17);
    i0.ɵɵpipe(23, "async");
    i0.ɵɵelementStart(24, "div", 18)(25, "textarea", 19, 1);
    i0.ɵɵtwoWayListener("ngModelChange", function ChatComponent_div_0_div_4_Template_textarea_ngModelChange_25_listener($event) {
      i0.ɵɵrestoreView(_r3);
      var ctx_r1 = i0.ɵɵnextContext(2);
      i0.ɵɵtwoWayBindingSet(ctx_r1.message, $event) || (ctx_r1.message = $event);
      return i0.ɵɵresetView($event);
    });
    i0.ɵɵlistener("ngModelChange", function ChatComponent_div_0_div_4_Template_textarea_ngModelChange_25_listener() {
      i0.ɵɵrestoreView(_r3);
      var ctx_r1 = i0.ɵɵnextContext(2);
      return i0.ɵɵresetView(ctx_r1.resizeInput());
    })("keyup.enter", function ChatComponent_div_0_div_4_Template_textarea_keyup_enter_25_listener() {
      i0.ɵɵrestoreView(_r3);
      var ctx_r1 = i0.ɵɵnextContext(2);
      return i0.ɵɵresetView(ctx_r1.sendMessage());
    });
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(27, "button", 20);
    i0.ɵɵlistener("click", function ChatComponent_div_0_div_4_Template_button_click_27_listener() {
      i0.ɵɵrestoreView(_r3);
      var ctx_r1 = i0.ɵɵnextContext(2);
      return i0.ɵɵresetView(ctx_r1.sendMessage());
    });
    i0.ɵɵelementStart(28, "app-icon");
    i0.ɵɵtext(29, "send");
    i0.ɵɵelementEnd()()()();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance(13);
    i0.ɵɵtextInterpolate1(" Hi ", ctx_r1.user.name, ". ");
    i0.ɵɵadvance(3);
    i0.ɵɵproperty("ngIf", i0.ɵɵpipeBind1(17, 9, ctx_r1.hint));
    i0.ɵɵadvance(2);
    i0.ɵɵproperty("ngForOf", i0.ɵɵpipeBind1(19, 11, ctx_r1.messages));
    i0.ɵɵadvance(2);
    i0.ɵɵproperty("ngIf", i0.ɵɵpipeBind1(21, 13, ctx_r1.progress));
    i0.ɵɵadvance(2);
    i0.ɵɵproperty("ngIf", i0.ɵɵpipeBind1(23, 15, ctx_r1.waiting));
    i0.ɵɵadvance(3);
    i0.ɵɵstyleProp("height", ctx_r1.height + "px");
    i0.ɵɵtwoWayProperty("ngModel", ctx_r1.message);
    i0.ɵɵadvance(2);
    i0.ɵɵproperty("disabled", !ctx_r1.message);
  }
}
function ChatComponent_div_0_Template(rf, ctx) {
  if (rf & 1) {
    var _r1 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 3)(1, "button", 4);
    i0.ɵɵlistener("click", function ChatComponent_div_0_Template_button_click_1_listener() {
      i0.ɵɵrestoreView(_r1);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.toggleChat());
    });
    i0.ɵɵelementStart(2, "app-icon");
    i0.ɵɵtext(3, "chat");
    i0.ɵɵelementEnd()();
    i0.ɵɵtemplate(4, ChatComponent_div_0_div_4_Template, 30, 17, "div", 5);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance(4);
    i0.ɵɵproperty("ngIf", ctx_r1.show);
  }
}
var ChatComponent = /*#__PURE__*/function (_common_1$AsyncHandle) {
  function ChatComponent(_settings, _chat) {
    var _this;
    _classCallCheck(this, ChatComponent);
    _this = _callSuper(this, ChatComponent);
    _this._settings = _settings;
    _this._chat = _chat;
    _this.show = false;
    _this.show_info = false;
    _this.message = '';
    _this.show_time = {};
    _this.offset = 0;
    _this.height = 56;
    _this.icons = {
      list_function_schemas: 'help',
      call_function: 'settings',
      task_complete: 'check_circle'
    };
    _this.hint = _this._chat.chat_hint;
    _this.messages = _this._chat.messages;
    _this.progress = _this._chat.progress;
    _this.waiting = _this._chat.messages.pipe((0, operators_1.map)(function (_) {
      var _ref, _this$user;
      return _.length !== 0 && ((_ref = _[_.length - 1]) === null || _ref === void 0 ? void 0 : _ref.user_id) === ((_this$user = _this.user) === null || _this$user === void 0 ? void 0 : _this$user.id);
    }));
    return _this;
  }
  _inherits(ChatComponent, _common_1$AsyncHandle);
  return _createClass(ChatComponent, [{
    key: "can_show",
    get: function get() {
      return this._settings.get('app.chat.enabled');
    }
  }, {
    key: "toggleChat",
    value: function toggleChat() {
      this.show = !this.show;
      if (!this.show) this._chat.close();
    }
  }, {
    key: "ngOnInit",
    value: function ngOnInit() {
      var _this2 = this;
      this.subscription('current_user', common_1.current_user.subscribe(function (user) {
        return _this2.user = user;
      }));
      this.subscription('hint', this.hint.subscribe(function () {
        return _this2.scrollToBottom(500);
      }));
      this.subscription('messages', this.messages.subscribe(function () {
        return _this2.scrollToBottom();
      }));
      this.subscription('progress', this.progress.subscribe(function (i) {
        return i ? _this2.scrollToBottom() : _this2.show_info = false;
      }));
      this.interval('offset', function () {
        return _this2.offset = _this2.offset ? 0 : 1;
      }, 20 * 1000);
    }
  }, {
    key: "resizeInput",
    value: function resizeInput() {
      var el = this._input_el.nativeElement;
      this.height = Math.max(el.scrollHeight, 56);
    }
  }, {
    key: "sendMessage",
    value: function sendMessage() {
      var _this3 = this;
      if (!this.message) return;
      if (!this._chat.connected) {
        this._chat.startChat();
        return this.timeout('send', function () {
          return _this3.sendMessage();
        }, 100);
      }
      this._chat.sendMessage(this.message);
      this.message = '';
      this.height = 56;
      setTimeout(function () {
        return _this3._input_el.nativeElement.focus();
      }, 100);
    }
  }, {
    key: "scrollToBottom",
    value: function scrollToBottom() {
      var _this4 = this;
      var delay = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 300;
      this.timeout('scroll', function () {
        var _this4$_container_el;
        if ((_this4$_container_el = _this4._container_el) !== null && _this4$_container_el !== void 0 && _this4$_container_el.nativeElement) {
          _this4._container_el.nativeElement.scrollTop = _this4._container_el.nativeElement.scrollHeight;
        }
      }, delay);
    }
  }]);
}(common_1.AsyncHandler);
_ChatComponent = ChatComponent;
_ChatComponent.ɵfac = function ChatComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _ChatComponent)(i0.ɵɵdirectiveInject(i1.SettingsService), i0.ɵɵdirectiveInject(i2.ChatService));
};
_ChatComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _ChatComponent,
  selectors: [["global-chat"]],
  viewQuery: function ChatComponent_Query(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵviewQuery(_c0, 5);
      i0.ɵɵviewQuery(_c1, 5);
    }
    if (rf & 2) {
      var _t;
      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx._input_el = _t.first);
      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx._container_el = _t.first);
    }
  },
  features: [i0.ɵɵInheritDefinitionFeature],
  decls: 1,
  vars: 1,
  consts: [["container", ""], ["input", ""], ["class", "absolute bottom-0 right-0 p-2", 4, "ngIf"], [1, "absolute", "bottom-0", "right-0", "p-2"], ["icon", "", "matRipple", "", 1, "bg-base-100", "rounded-full", "border", "border-base-300", "shadow", 3, "click"], ["class", "absolute bottom-2 right-2 bg-base-200 rounded-xl border border-base-300 shadow overflow-hidden w-[40rem] max-w-[calc(100vw-1rem)]", 4, "ngIf"], [1, "absolute", "bottom-2", "right-2", "bg-base-200", "rounded-xl", "border", "border-base-300", "shadow", "overflow-hidden", "w-[40rem]", "max-w-[calc(100vw-1rem)]"], [1, "flex", "items-center", "justify-between", "bg-base-100", "w-full", "p-2", "border-b", "border-base-300"], [1, "pl-4"], ["icon", "", "matRipple", "", 3, "click"], [1, "h-[32rem]", "max-h-[60vh]", "overflow-auto"], [1, "w-full", "flex", "flex-col", "items-center", "justify-center", "p-8", "space-y-2"], [1, "text-8xl"], [1, "text-center", "text-xl"], ["class", "m-2 bg-base-100 border-base-300 p-4 rounded shadow text-sm", 4, "ngIf"], ["class", "flex flex-col m-2", 3, "pr-4", "pl-4", "items-left", "items-end", "waiting-margin", "click", 4, "ngFor", "ngForOf"], ["class", "p-4", 4, "ngIf"], ["class", "absolute right-2 flex items-center justify-center space-x-2 p-1 rounded-2xl bg-base-100 border border-neutral", 3, "bottom", 4, "ngIf"], [1, "flex", "bg-base-100", "focus-within:outline", "outline-info", "border-t", "border-base-300", "max-h-[10rem]", "overflow-y-auto"], ["placeholder", "New message...", 1, "p-4", "flex-1", "w-1/2", "focus:outline-none", "resize-none", "overflow-hidden", 3, "ngModelChange", "keyup.enter", "ngModel"], ["icon", "", "matRipple", "", 1, "mt-2", 3, "click", "disabled"], [1, "m-2", "bg-base-100", "border-base-300", "p-4", "rounded", "shadow", "text-sm"], [1, "flex", "flex-col", "m-2", 3, "click"], [1, "flex", "items-center", "space-x-2"], ["class", "text-sm text-base-content opacity-60 px-2 py-1", 4, "ngIf"], [1, "text-xs", "text-base-content", "opacity-40", "px-2", "py-1"], ["message", "", 1, "bg-base-100", "border-base-300", "p-4", "rounded", "shadow", "text-sm", "markdown", "selectable", 3, "innerHTML"], [1, "text-sm", "text-base-content", "opacity-60", "px-2", "py-1"], [1, "p-4"], [1, "block", "p-2", "rounded", "border-base-300", "bg-info", "text-info-content", "w-full", 3, "click"], [1, "text-2xl"], [1, "text-sm"], [1, "relative", "overflow-hidden", "w-full", "rounded"], [1, "absolute", "inset-0", "bg-base-100", "opacity-10"], ["class", "text-xs text-mono text-left p-2 break-words", 3, "innerHTML", 4, "ngIf"], [1, "text-xs", "text-mono", "text-left", "p-2", "break-words", 3, "innerHTML"], [1, "absolute", "right-2", "flex", "items-center", "justify-center", "space-x-2", "p-1", "rounded-2xl", "bg-base-100", "border", "border-neutral"], [1, "h-2", "w-2", "bg-neutral", "rounded-full", "animate-bounce"], [1, "h-2", "w-2", "bg-neutral", "rounded-full", "animate-bounce", "anim-delay-1"], [1, "h-2", "w-2", "bg-neutral", "rounded-full", "animate-bounce", "anim-delay-2"], [1, "sr-only"]],
  template: function ChatComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵtemplate(0, ChatComponent_div_0_Template, 5, 1, "div", 2);
    }
    if (rf & 2) {
      i0.ɵɵproperty("ngIf", ctx.can_show);
    }
  },
  dependencies: [i3.NgForOf, i3.NgIf, i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgModel, i5.MatRipple, i6.IconComponent, i3.AsyncPipe, i7.SanitizePipe, i8.DateFromPipe],
  styles: [".anim-delay-1[_ngcontent-%COMP%] {\n                animation-delay: 0.25s;\n            }\n            .anim-delay-2[_ngcontent-%COMP%] {\n                animation-delay: 0.5s;\n            }\n\n            .waiting-margin[_ngcontent-%COMP%]:last-child {\n                padding-bottom: 2rem;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNoYXQuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxzQkFBc0I7WUFDMUI7WUFDQTtnQkFDSSxxQkFBcUI7WUFDekI7O1lBRUE7Z0JBQ0ksb0JBQW9CO1lBQ3hCIiwiZmlsZSI6ImNoYXQuY29tcG9uZW50LnRzIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICAuYW5pbS1kZWxheS0xIHtcbiAgICAgICAgICAgICAgICBhbmltYXRpb24tZGVsYXk6IDAuMjVzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLmFuaW0tZGVsYXktMiB7XG4gICAgICAgICAgICAgICAgYW5pbWF0aW9uLWRlbGF5OiAwLjVzO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAud2FpdGluZy1tYXJnaW46bGFzdC1jaGlsZCB7XG4gICAgICAgICAgICAgICAgcGFkZGluZy1ib3R0b206IDJyZW07XG4gICAgICAgICAgICB9XG4gICAgICAgICJdfQ== */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvY29tcG9uZW50cy9zcmMvbGliL2NoYXQvY2hhdC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLHNCQUFzQjtZQUMxQjtZQUNBO2dCQUNJLHFCQUFxQjtZQUN6Qjs7WUFFQTtnQkFDSSxvQkFBb0I7WUFDeEI7O0FBRVosd3FCQUF3cUIiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIC5hbmltLWRlbGF5LTEge1xuICAgICAgICAgICAgICAgIGFuaW1hdGlvbi1kZWxheTogMC4yNXM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAuYW5pbS1kZWxheS0yIHtcbiAgICAgICAgICAgICAgICBhbmltYXRpb24tZGVsYXk6IDAuNXM7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC53YWl0aW5nLW1hcmdpbjpsYXN0LWNoaWxkIHtcbiAgICAgICAgICAgICAgICBwYWRkaW5nLWJvdHRvbTogMnJlbTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl0sInNvdXJjZVJvb3QiOiIifQ== */"]
});
exports.ChatComponent = ChatComponent;

/***/ }),

/***/ 45632:
/*!******************************************************!*\
  !*** ./libs/components/src/lib/chat/chat.service.ts ***!
  \******************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _toConsumableArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/toConsumableArray.js */ 86033)["default"]);
var _slicedToArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/slicedToArray.js */ 6282)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _callSuper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/callSuper.js */ 8513)["default"]);
var _inherits = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/inherits.js */ 58160)["default"]);
var _ChatService;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.ChatService = void 0;
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var organisation_1 = __webpack_require__(/*! @placeos/organisation */ 2510);
var ts_client_1 = __webpack_require__(/*! @placeos/ts-client */ 35713);
var rxjs_1 = __webpack_require__(/*! rxjs */ 15681);
var operators_1 = __webpack_require__(/*! rxjs/operators */ 97303);
var webSocket_1 = __webpack_require__(/*! rxjs/webSocket */ 67749);
var marked = __webpack_require__(/*! marked */ 21019);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @placeos/organisation */ 2510);
var i2 = __webpack_require__(/*! @placeos/common */ 22797);
var ChatService = /*#__PURE__*/function (_common_1$AsyncHandle) {
  function ChatService(_org, _settings) {
    var _this;
    _classCallCheck(this, ChatService);
    _this = _callSuper(this, ChatService);
    _this._org = _org;
    _this._settings = _settings;
    _this._binding = new rxjs_1.BehaviorSubject('');
    _this._chat_messages = new rxjs_1.BehaviorSubject([]);
    _this._progress_message = new rxjs_1.BehaviorSubject(null);
    _this._chat_system = (0, rxjs_1.combineLatest)([_this._org.active_building, _this._binding]).pipe((0, operators_1.filter)(function (_ref) {
      var _ref2 = _slicedToArray(_ref, 1),
        b = _ref2[0];
      return !!b;
    }), (0, operators_1.map)(function (_ref3) {
      var _ref4 = _slicedToArray(_ref3, 2),
        _ = _ref4[0],
        biniding = _ref4[1];
      return biniding || _this._org.binding('chat_room');
    }));
    _this._chat_id = '';
    _this.chat_hint = _this._chat_system.pipe((0, operators_1.filter)(function (_) {
      return !!_;
    }), (0, operators_1.switchMap)(function (id) {
      var mod = (0, ts_client_1.getModule)(id, 'LLM');
      var binding = mod.binding('user_hint');
      _this.subscription("binding:LLM:user_hint", binding.bind());
      return binding.listen();
    }), (0, operators_1.shareReplay)(1));
    _this._change = new rxjs_1.BehaviorSubject(0);
    _this._chat_pipe = (0, rxjs_1.combineLatest)([_this._chat_system, _this._change]).pipe((0, operators_1.switchMap)(function (_ref5) {
      var _ref6 = _slicedToArray(_ref5, 1),
        id = _ref6[0];
      var auth = (0, ts_client_1.token)() !== 'x-api-key' ? "bearer_token=".concat(encodeURIComponent((0, ts_client_1.token)())) : "x-api-key=".concat((0, ts_client_1.apiKey)());
      var url = "ws".concat(location.origin.replace('http', ''), "/api/engine/v2/chatgpt/chat/").concat(encodeURIComponent(id), "?").concat(auth).concat(_this._chat_id ? '&resume=' + encodeURIComponent(_this._chat_id) : '');
      _this._socket = (0, webSocket_1.webSocket)({
        url: url,
        serializer: function serializer(data) {
          return typeof data === 'object' ? JSON.stringify(data) : data;
        },
        deserializer: function deserializer(data) {
          var return_value = data.data;
          try {
            var obj = JSON.parse(data.data);
            return_value = obj;
          } catch (e) {
            return_value = return_value;
          }
          return return_value;
        }
      });
      _this.subscription('chat-ws', _this._socket.subscribe(function (_) {
        return _this._onMessage(_);
      }, function (e) {
        (0, common_1.log)('CHAT', 'Connection error:', [e], 'error');
        _this._cleanup();
      }, function () {
        return _this._cleanup();
      }));
      return _this._socket;
    }), (0, operators_1.shareReplay)(1));
    _this.messages = _this._chat_messages.asObservable();
    _this.progress = _this._progress_message.asObservable();
    return _this;
  }
  _inherits(ChatService, _common_1$AsyncHandle);
  return _createClass(ChatService, [{
    key: "connected",
    get: function get() {
      return !!this._socket;
    }
  }, {
    key: "setBinding",
    value: function setBinding(system_id) {
      this._binding.next(system_id);
    }
  }, {
    key: "startChat",
    value: function startChat() {
      var _this2 = this;
      if (this._socket) return;
      this._change.next(Date.now());
      (0, common_1.log)('CHAT', 'Starting chat connection.');
      this.subscription('chat', this._chat_pipe.subscribe());
      return function () {
        return _this2.endChat();
      };
    }
  }, {
    key: "endChat",
    value: function endChat() {
      var _this$_socket;
      (0, common_1.log)('CHAT', 'Dropping chat connection.');
      (_this$_socket = this._socket) === null || _this$_socket === void 0 || _this$_socket.complete();
      this._cleanup();
    }
  }, {
    key: "close",
    value: function close() {
      this.endChat();
      this._chat_id = '';
      this._chat_messages.next([]);
    }
  }, {
    key: "sendMessage",
    value: function sendMessage(message) {
      var _this$_socket2;
      if (!message) return;
      this._onMessage({
        chat_id: '',
        message: message,
        user_id: (0, common_1.currentUser)().id
      });
      (_this$_socket2 = this._socket) === null || _this$_socket2 === void 0 || _this$_socket2.next(message);
    }
  }, {
    key: "_timeoutSocket",
    value: function _timeoutSocket() {
      var _this3 = this;
      var delay = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 55 * 1000;
      this.timeout('socket', function () {
        var msg_list = _this3._chat_messages.getValue();
        if (msg_list.length > 0 && msg_list[msg_list.length - 1].user_id !== 'assistant') {
          return _this3._timeoutSocket(delay);
        }
        _this3.endChat();
      }, delay);
    }
  }, {
    key: "_cleanup",
    value: function _cleanup() {
      this._socket = null;
      this.unsubWith('chat');
    }
  }, {
    key: "_onMessage",
    value: function _onMessage(msg) {
      if (msg.chat_id) this._chat_id = msg.chat_id;
      if (msg.type === 'progress') {
        this._progress_message.next({
          id: "msg-".concat((0, common_1.randomString)(6)),
          chat_id: msg.chat_id,
          message: msg.message,
          content: marked.parse(msg.message, {
            async: false
          }),
          user_id: msg.user_id || 'assistant',
          "function": msg["function"],
          timestamp: Date.now()
        });
        if (msg["function"] === 'task_complete') {
          this._settings.post('CHAT:task_complete', msg.task_id);
        }
      } else {
        this._chat_messages.next([].concat(_toConsumableArray(this._chat_messages.getValue()), [{
          id: "msg-".concat((0, common_1.randomString)(6)),
          chat_id: msg.chat_id,
          message: msg.message,
          content: marked.parse(msg.message, {
            async: false
          }),
          user_id: msg.user_id || 'assistant',
          timestamp: Date.now()
        }]));
        if (msg.type === 'response') {
          this._progress_message.next(null);
        }
      }
      this._timeoutSocket();
    }
  }]);
}(common_1.AsyncHandler);
_ChatService = ChatService;
_ChatService.ɵfac = function ChatService_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _ChatService)(i0.ɵɵinject(i1.OrganisationService), i0.ɵɵinject(i2.SettingsService));
};
_ChatService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({
  token: _ChatService,
  factory: _ChatService.ɵfac,
  providedIn: 'root'
});
exports.ChatService = ChatService;

/***/ }),

/***/ 14974:
/*!******************************************************!*\
  !*** ./libs/components/src/lib/components.module.ts ***!
  \******************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _ComponentsModule;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.ComponentsModule = void 0;
var core_1 = __webpack_require__(/*! @angular/core */ 37580);
var common_1 = __webpack_require__(/*! @angular/common */ 60316);
var forms_1 = __webpack_require__(/*! @angular/forms */ 34456);
var dialog_1 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var menu_1 = __webpack_require__(/*! @angular/material/menu */ 31034);
var form_field_1 = __webpack_require__(/*! @angular/material/form-field */ 24950);
var select_1 = __webpack_require__(/*! @angular/material/select */ 25175);
var autocomplete_1 = __webpack_require__(/*! @angular/material/autocomplete */ 79771);
var datepicker_1 = __webpack_require__(/*! @angular/material/datepicker */ 61977);
var input_1 = __webpack_require__(/*! @angular/material/input */ 95541);
var chips_1 = __webpack_require__(/*! @angular/material/chips */ 12772);
var progress_spinner_1 = __webpack_require__(/*! @angular/material/progress-spinner */ 41134);
var clipboard_1 = __webpack_require__(/*! @angular/cdk/clipboard */ 52352);
var core_2 = __webpack_require__(/*! @angular/material/core */ 74646);
var paginator_1 = __webpack_require__(/*! @angular/material/paginator */ 24624);
var table_1 = __webpack_require__(/*! @angular/cdk/table */ 90198);
var portal_1 = __webpack_require__(/*! @angular/cdk/portal */ 9168);
var tooltip_1 = __webpack_require__(/*! @angular/material/tooltip */ 80640);
var checkbox_1 = __webpack_require__(/*! @angular/material/checkbox */ 97024);
var radio_1 = __webpack_require__(/*! @angular/material/radio */ 53804);
var slider_1 = __webpack_require__(/*! @angular/material/slider */ 64992);
var slide_toggle_1 = __webpack_require__(/*! @angular/material/slide-toggle */ 8827);
var button_toggle_1 = __webpack_require__(/*! @angular/material/button-toggle */ 59864);
var http_1 = __webpack_require__(/*! @angular/common/http */ 46443);
var core_3 = __webpack_require__(/*! @ngx-translate/core */ 597);
var binding_directive_1 = __webpack_require__(/*! ./binding.directive */ 83938);
var action_icon_component_1 = __webpack_require__(/*! ./action-icon.component */ 88157);
var icon_component_1 = __webpack_require__(/*! ./icon.component */ 69434);
var popout_menu_component_1 = __webpack_require__(/*! ./popout-menu.component */ 44418);
var user_avatar_component_1 = __webpack_require__(/*! ./user-avatar.component */ 23574);
var confirm_modal_component_1 = __webpack_require__(/*! ./confirm-modal.component */ 30841);
var interactive_map_component_1 = __webpack_require__(/*! ./interactive-map.component */ 24918);
var map_pin_component_1 = __webpack_require__(/*! ./map-pin.component */ 71865);
var map_radius_component_1 = __webpack_require__(/*! ./map-radius.component */ 95384);
var status_overlay_component_1 = __webpack_require__(/*! ./status-overlay.component */ 91960);
var fixed_pipe_1 = __webpack_require__(/*! ./fixed.pipe */ 62678);
var safe_pipe_1 = __webpack_require__(/*! ./safe.pipe */ 26781);
var sanitise_pipe_1 = __webpack_require__(/*! ./sanitise.pipe */ 54616);
var custom_table_component_1 = __webpack_require__(/*! ./custom-table.component */ 12993);
var custom_tooltip_component_1 = __webpack_require__(/*! ./custom-tooltip.component */ 22238);
var virtual_keyboard_component_1 = __webpack_require__(/*! ./virtual-keyboard.component */ 75080);
var global_loading_component_1 = __webpack_require__(/*! ./global-loading.component */ 34921);
var sort_1 = __webpack_require__(/*! @angular/material/sort */ 22047);
var map_polygon_component_1 = __webpack_require__(/*! ./map-polygon.component */ 84268);
var global_banner_component_1 = __webpack_require__(/*! ./global-banner.component */ 20785);
var map_locate_modal_component_1 = __webpack_require__(/*! ./map-locate-modal.component */ 90620);
var image_carousel_component_1 = __webpack_require__(/*! ./image-carousel.component */ 65277);
var duration_pipe_1 = __webpack_require__(/*! ./duration.pipe */ 17022);
var redirect_component_1 = __webpack_require__(/*! ./redirect.component */ 68283);
var debug_console_component_1 = __webpack_require__(/*! ./debug-console.component */ 18482);
var scrolling_1 = __webpack_require__(/*! @angular/cdk/scrolling */ 79975);
var json_display_component_1 = __webpack_require__(/*! ./json-display.component */ 12354);
var changelog_modal_component_1 = __webpack_require__(/*! ./changelog-modal.component */ 65991);
var level_pipe_1 = __webpack_require__(/*! ./level.pipe */ 23666);
var building_pipe_1 = __webpack_require__(/*! ./building.pipe */ 56062);
var user_controls_component_1 = __webpack_require__(/*! ./user-controls.component */ 74633);
var building_select_component_1 = __webpack_require__(/*! ./building-select.component */ 55550);
var region_select_component_1 = __webpack_require__(/*! ./region-select.component */ 66962);
var help_tooltip_component_1 = __webpack_require__(/*! ./help-tooltip.component */ 46926);
var accessibility_tooltip_component_1 = __webpack_require__(/*! ./accessibility-tooltip.component */ 6539);
var language_tooltip_component_1 = __webpack_require__(/*! ./language-tooltip.component */ 53835);
var authenticated_image_directive_1 = __webpack_require__(/*! ./authenticated-image.directive */ 93208);
var upload_permissions_modal_component_1 = __webpack_require__(/*! ./upload-permissions-modal.component */ 76871);
var indoor_maps_component_1 = __webpack_require__(/*! ./indoor-maps.component */ 92124);
var printable_component_1 = __webpack_require__(/*! ./printable.component */ 74846);
var chat_component_1 = __webpack_require__(/*! ./chat/chat.component */ 79496);
var date_from_pipe_1 = __webpack_require__(/*! ./date-from.pipe */ 17025);
var attached_resource_config_modal_component_1 = __webpack_require__(/*! ./attached-resource-config-modal.component */ 65843);
var status_pill_component_1 = __webpack_require__(/*! ./status-pill.component */ 50907);
var available_rooms_state_modal_component_1 = __webpack_require__(/*! ./available-rooms-state-modal.component */ 10375);
var media_duration_pipe_1 = __webpack_require__(/*! ./media-duration.pipe */ 28975);
var thumbnail_pipe_1 = __webpack_require__(/*! ./thumbnail.pipe */ 12976);
var map_renderer_component_1 = __webpack_require__(/*! ./map-renderer.component */ 39489);
var maps_indoors_component_1 = __webpack_require__(/*! ./maps-indoors.component */ 30877);
var map_canvas_component_1 = __webpack_require__(/*! ./map-canvas.component */ 37558);
var image_viewer_component_1 = __webpack_require__(/*! ./image-viewer.component */ 26821);
var simple_table_component_1 = __webpack_require__(/*! ./simple-table.component */ 88328);
var limit_input_directive_1 = __webpack_require__(/*! ./limit-input.directive */ 62897);
var desk_height_presets_component_1 = __webpack_require__(/*! ./desk-height-presets.component */ 3051);
var work_location_tooltip_component_1 = __webpack_require__(/*! ./work-location-tooltip.component */ 42792);
var zone_pipe_1 = __webpack_require__(/*! ./zone.pipe */ 45312);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @ngx-translate/core */ 597);
var i2 = __webpack_require__(/*! @angular/common */ 60316);
var i3 = __webpack_require__(/*! @angular/material/core */ 74646);
var i4 = __webpack_require__(/*! @angular/material/tooltip */ 80640);
var i5 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var i6 = __webpack_require__(/*! @angular/material/progress-spinner */ 41134);
var i7 = __webpack_require__(/*! @angular/forms */ 34456);
var i8 = __webpack_require__(/*! @angular/cdk/scrolling */ 79975);
var MAT_MODULES = [autocomplete_1.MatAutocompleteModule, menu_1.MatMenuModule, form_field_1.MatFormFieldModule, select_1.MatSelectModule, core_2.MatRippleModule, autocomplete_1.MatAutocompleteModule, select_1.MatSelectModule, dialog_1.MatDialogModule, datepicker_1.MatDatepickerModule, input_1.MatInputModule, clipboard_1.ClipboardModule, progress_spinner_1.MatProgressSpinnerModule, chips_1.MatChipsModule, paginator_1.MatPaginatorModule, table_1.CdkTableModule, portal_1.PortalModule, sort_1.MatSortModule, scrolling_1.ScrollingModule, tooltip_1.MatTooltipModule, checkbox_1.MatCheckboxModule, radio_1.MatRadioModule, slider_1.MatSliderModule, slide_toggle_1.MatSlideToggleModule, button_toggle_1.MatButtonToggleModule];
var COMPONENTS = [action_icon_component_1.ActionIconComponent, icon_component_1.IconComponent, popout_menu_component_1.PopoutMenuComponent, user_avatar_component_1.UserAvatarComponent, confirm_modal_component_1.ConfirmModalComponent, interactive_map_component_1.InteractiveMapComponent, map_renderer_component_1.MapRendererComponent, maps_indoors_component_1.MapsIndoorsComponent, map_pin_component_1.MapPinComponent, map_radius_component_1.MapRadiusComponent, map_polygon_component_1.MapPolygonComponent, map_canvas_component_1.MapCanvasComponent, indoor_maps_component_1.IndoorMapsComponent, status_overlay_component_1.StatusOverlayComponent, custom_table_component_1.CustomTableComponent, custom_tooltip_component_1.CustomTooltipComponent, virtual_keyboard_component_1.VirtualKeyboardComponent, global_loading_component_1.GlobalLoadingComponent, global_banner_component_1.GlobalBannerComponent, map_locate_modal_component_1.MapLocateModalComponent, image_carousel_component_1.ImageCarouselComponent, redirect_component_1.RedirectComponent, debug_console_component_1.DebugConsoleComponent, json_display_component_1.JsonDisplayComponent, changelog_modal_component_1.ChangelogModalComponent, status_pill_component_1.StatusPillComponent, image_viewer_component_1.ImageViewerComponent, simple_table_component_1.SimpleTableComponent, work_location_tooltip_component_1.WorkLocationTooltipComponent, fixed_pipe_1.FixedPipe, safe_pipe_1.SafePipe, sanitise_pipe_1.SanitizePipe, duration_pipe_1.DurationPipe, level_pipe_1.LevelPipe, building_pipe_1.BuildingPipe, date_from_pipe_1.DateFromPipe, media_duration_pipe_1.MediaDurationPipe, thumbnail_pipe_1.ThumbnailPipe, zone_pipe_1.ZonePipe, user_controls_component_1.UserControlsComponent, building_select_component_1.BuildingSelectComponent, region_select_component_1.RegionSelectComponent, help_tooltip_component_1.HelpTooltipComponent, accessibility_tooltip_component_1.AccessibilityTooltipComponent, language_tooltip_component_1.LanguageSelectComponent, upload_permissions_modal_component_1.UploadPermissionsModalComponent, printable_component_1.PrintableComponent, chat_component_1.ChatComponent, attached_resource_config_modal_component_1.AttachedResourceConfigModalComponent, available_rooms_state_modal_component_1.AvailableRoomsStateModalComponent, desk_height_presets_component_1.DeskHeightPresetsComponent];
var DIRECTIVES = [binding_directive_1.BindingDirective, authenticated_image_directive_1.AuthenticatedImageDirective, limit_input_directive_1.LimitInputDirective];
var ComponentsModule = /*#__PURE__*/_createClass(function ComponentsModule() {
  _classCallCheck(this, ComponentsModule);
});
_ComponentsModule = ComponentsModule;
_ComponentsModule.ɵfac = function ComponentsModule_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _ComponentsModule)();
};
_ComponentsModule.ɵmod = /*@__PURE__*/i0.ɵɵdefineNgModule({
  type: _ComponentsModule
});
_ComponentsModule.ɵinj = /*@__PURE__*/i0.ɵɵdefineInjector({
  providers: [{
    provide: interactive_map_component_1.MAP_FEATURE_DATA,
    useValue: {}
  }, (0, http_1.provideHttpClient)((0, http_1.withInterceptorsFromDi)())],
  imports: [common_1.CommonModule, forms_1.FormsModule, forms_1.ReactiveFormsModule, core_3.TranslateModule.forChild(), MAT_MODULES, autocomplete_1.MatAutocompleteModule, menu_1.MatMenuModule, form_field_1.MatFormFieldModule, select_1.MatSelectModule, core_2.MatRippleModule, autocomplete_1.MatAutocompleteModule, select_1.MatSelectModule, dialog_1.MatDialogModule, datepicker_1.MatDatepickerModule, input_1.MatInputModule, clipboard_1.ClipboardModule, progress_spinner_1.MatProgressSpinnerModule, chips_1.MatChipsModule, paginator_1.MatPaginatorModule, table_1.CdkTableModule, portal_1.PortalModule, sort_1.MatSortModule, scrolling_1.ScrollingModule, tooltip_1.MatTooltipModule, checkbox_1.MatCheckboxModule, radio_1.MatRadioModule, slider_1.MatSliderModule, slide_toggle_1.MatSlideToggleModule, button_toggle_1.MatButtonToggleModule, core_3.TranslateModule]
});
exports.ComponentsModule = ComponentsModule;
(function () {
  (typeof ngJitMode === "undefined" || ngJitMode) && i0.ɵɵsetNgModuleScope(ComponentsModule, {
    declarations: [action_icon_component_1.ActionIconComponent, icon_component_1.IconComponent, popout_menu_component_1.PopoutMenuComponent, user_avatar_component_1.UserAvatarComponent, confirm_modal_component_1.ConfirmModalComponent, interactive_map_component_1.InteractiveMapComponent, map_renderer_component_1.MapRendererComponent, maps_indoors_component_1.MapsIndoorsComponent, map_pin_component_1.MapPinComponent, map_radius_component_1.MapRadiusComponent, map_polygon_component_1.MapPolygonComponent, map_canvas_component_1.MapCanvasComponent, indoor_maps_component_1.IndoorMapsComponent, status_overlay_component_1.StatusOverlayComponent, custom_table_component_1.CustomTableComponent, custom_tooltip_component_1.CustomTooltipComponent, virtual_keyboard_component_1.VirtualKeyboardComponent, global_loading_component_1.GlobalLoadingComponent, global_banner_component_1.GlobalBannerComponent, map_locate_modal_component_1.MapLocateModalComponent, image_carousel_component_1.ImageCarouselComponent, redirect_component_1.RedirectComponent, debug_console_component_1.DebugConsoleComponent, json_display_component_1.JsonDisplayComponent, changelog_modal_component_1.ChangelogModalComponent, status_pill_component_1.StatusPillComponent, image_viewer_component_1.ImageViewerComponent, simple_table_component_1.SimpleTableComponent, work_location_tooltip_component_1.WorkLocationTooltipComponent, fixed_pipe_1.FixedPipe, safe_pipe_1.SafePipe, sanitise_pipe_1.SanitizePipe, duration_pipe_1.DurationPipe, level_pipe_1.LevelPipe, building_pipe_1.BuildingPipe, date_from_pipe_1.DateFromPipe, media_duration_pipe_1.MediaDurationPipe, thumbnail_pipe_1.ThumbnailPipe, zone_pipe_1.ZonePipe, user_controls_component_1.UserControlsComponent, building_select_component_1.BuildingSelectComponent, region_select_component_1.RegionSelectComponent, help_tooltip_component_1.HelpTooltipComponent, accessibility_tooltip_component_1.AccessibilityTooltipComponent, language_tooltip_component_1.LanguageSelectComponent, upload_permissions_modal_component_1.UploadPermissionsModalComponent, printable_component_1.PrintableComponent, chat_component_1.ChatComponent, attached_resource_config_modal_component_1.AttachedResourceConfigModalComponent, available_rooms_state_modal_component_1.AvailableRoomsStateModalComponent, desk_height_presets_component_1.DeskHeightPresetsComponent, binding_directive_1.BindingDirective, authenticated_image_directive_1.AuthenticatedImageDirective, limit_input_directive_1.LimitInputDirective],
    imports: [common_1.CommonModule, forms_1.FormsModule, forms_1.ReactiveFormsModule, i1.TranslateModule, autocomplete_1.MatAutocompleteModule, menu_1.MatMenuModule, form_field_1.MatFormFieldModule, select_1.MatSelectModule, core_2.MatRippleModule, autocomplete_1.MatAutocompleteModule, select_1.MatSelectModule, dialog_1.MatDialogModule, datepicker_1.MatDatepickerModule, input_1.MatInputModule, clipboard_1.ClipboardModule, progress_spinner_1.MatProgressSpinnerModule, chips_1.MatChipsModule, paginator_1.MatPaginatorModule, table_1.CdkTableModule, portal_1.PortalModule, sort_1.MatSortModule, scrolling_1.ScrollingModule, tooltip_1.MatTooltipModule, checkbox_1.MatCheckboxModule, radio_1.MatRadioModule, slider_1.MatSliderModule, slide_toggle_1.MatSlideToggleModule, button_toggle_1.MatButtonToggleModule],
    exports: [action_icon_component_1.ActionIconComponent, icon_component_1.IconComponent, popout_menu_component_1.PopoutMenuComponent, user_avatar_component_1.UserAvatarComponent, confirm_modal_component_1.ConfirmModalComponent, interactive_map_component_1.InteractiveMapComponent, map_renderer_component_1.MapRendererComponent, maps_indoors_component_1.MapsIndoorsComponent, map_pin_component_1.MapPinComponent, map_radius_component_1.MapRadiusComponent, map_polygon_component_1.MapPolygonComponent, map_canvas_component_1.MapCanvasComponent, indoor_maps_component_1.IndoorMapsComponent, status_overlay_component_1.StatusOverlayComponent, custom_table_component_1.CustomTableComponent, custom_tooltip_component_1.CustomTooltipComponent, virtual_keyboard_component_1.VirtualKeyboardComponent, global_loading_component_1.GlobalLoadingComponent, global_banner_component_1.GlobalBannerComponent, map_locate_modal_component_1.MapLocateModalComponent, image_carousel_component_1.ImageCarouselComponent, redirect_component_1.RedirectComponent, debug_console_component_1.DebugConsoleComponent, json_display_component_1.JsonDisplayComponent, changelog_modal_component_1.ChangelogModalComponent, status_pill_component_1.StatusPillComponent, image_viewer_component_1.ImageViewerComponent, simple_table_component_1.SimpleTableComponent, work_location_tooltip_component_1.WorkLocationTooltipComponent, fixed_pipe_1.FixedPipe, safe_pipe_1.SafePipe, sanitise_pipe_1.SanitizePipe, duration_pipe_1.DurationPipe, level_pipe_1.LevelPipe, building_pipe_1.BuildingPipe, date_from_pipe_1.DateFromPipe, media_duration_pipe_1.MediaDurationPipe, thumbnail_pipe_1.ThumbnailPipe, zone_pipe_1.ZonePipe, user_controls_component_1.UserControlsComponent, building_select_component_1.BuildingSelectComponent, region_select_component_1.RegionSelectComponent, help_tooltip_component_1.HelpTooltipComponent, accessibility_tooltip_component_1.AccessibilityTooltipComponent, language_tooltip_component_1.LanguageSelectComponent, upload_permissions_modal_component_1.UploadPermissionsModalComponent, printable_component_1.PrintableComponent, chat_component_1.ChatComponent, attached_resource_config_modal_component_1.AttachedResourceConfigModalComponent, available_rooms_state_modal_component_1.AvailableRoomsStateModalComponent, desk_height_presets_component_1.DeskHeightPresetsComponent, binding_directive_1.BindingDirective, authenticated_image_directive_1.AuthenticatedImageDirective, limit_input_directive_1.LimitInputDirective, autocomplete_1.MatAutocompleteModule, menu_1.MatMenuModule, form_field_1.MatFormFieldModule, select_1.MatSelectModule, core_2.MatRippleModule, autocomplete_1.MatAutocompleteModule, select_1.MatSelectModule, dialog_1.MatDialogModule, datepicker_1.MatDatepickerModule, input_1.MatInputModule, clipboard_1.ClipboardModule, progress_spinner_1.MatProgressSpinnerModule, chips_1.MatChipsModule, paginator_1.MatPaginatorModule, table_1.CdkTableModule, portal_1.PortalModule, sort_1.MatSortModule, scrolling_1.ScrollingModule, tooltip_1.MatTooltipModule, checkbox_1.MatCheckboxModule, radio_1.MatRadioModule, slider_1.MatSliderModule, slide_toggle_1.MatSlideToggleModule, button_toggle_1.MatButtonToggleModule, core_3.TranslateModule]
  });
})();
i0.ɵɵsetComponentScope(user_avatar_component_1.UserAvatarComponent, function () {
  return [i2.NgIf, authenticated_image_directive_1.AuthenticatedImageDirective];
}, []);
i0.ɵɵsetComponentScope(interactive_map_component_1.InteractiveMapComponent, function () {
  return [i2.NgIf, i3.MatRipple, i4.MatTooltip, icon_component_1.IconComponent, map_renderer_component_1.MapRendererComponent, maps_indoors_component_1.MapsIndoorsComponent];
}, function () {
  return [i2.AsyncPipe];
});
i0.ɵɵsetComponentScope(map_locate_modal_component_1.MapLocateModalComponent, function () {
  return [i2.NgIf, i3.MatRipple, i5.MatDialogClose, i6.MatProgressSpinner, icon_component_1.IconComponent, interactive_map_component_1.InteractiveMapComponent];
}, []);
i0.ɵɵsetComponentScope(image_carousel_component_1.ImageCarouselComponent, function () {
  return [i2.NgForOf, i2.NgIf, i3.MatRipple, icon_component_1.IconComponent, authenticated_image_directive_1.AuthenticatedImageDirective];
}, []);
i0.ɵɵsetComponentScope(debug_console_component_1.DebugConsoleComponent, function () {
  return [i2.NgForOf, i2.NgIf, i2.NgSwitch, i2.NgSwitchCase, i2.NgSwitchDefault, i7.DefaultValueAccessor, i7.NgControlStatus, i7.NgModel, i3.MatRipple, i8.CdkFixedSizeVirtualScroll, i8.CdkVirtualForOf, i8.CdkVirtualScrollViewport, icon_component_1.IconComponent, custom_tooltip_component_1.CustomTooltipComponent];
}, function () {
  return [i2.AsyncPipe, i2.DatePipe, sanitise_pipe_1.SanitizePipe];
});
i0.ɵɵsetComponentScope(user_controls_component_1.UserControlsComponent, function () {
  return [i2.NgIf, i3.MatRipple, i4.MatTooltip, icon_component_1.IconComponent, user_avatar_component_1.UserAvatarComponent, custom_tooltip_component_1.CustomTooltipComponent, desk_height_presets_component_1.DeskHeightPresetsComponent];
}, function () {
  return [i2.AsyncPipe, i2.DatePipe, i1.TranslatePipe];
});

/***/ }),

/***/ 30841:
/*!************************************************************!*\
  !*** ./libs/components/src/lib/confirm-modal.component.ts ***!
  \************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _callSuper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/callSuper.js */ 8513)["default"]);
var _inherits = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/inherits.js */ 58160)["default"]);
var _ConfirmModalComponent;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.ConfirmModalComponent = exports.CONFIRM_METADATA = void 0;
var core_1 = __webpack_require__(/*! @angular/core */ 37580);
var dialog_1 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var async_handler_class_1 = __webpack_require__(/*! libs/common/src/lib/async-handler.class */ 75354);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var i2 = __webpack_require__(/*! @angular/common */ 60316);
var i3 = __webpack_require__(/*! @angular/material/core */ 74646);
var i4 = __webpack_require__(/*! @angular/material/progress-spinner */ 41134);
var i5 = __webpack_require__(/*! ./icon.component */ 69434);
function ConfirmModalComponent_main_3_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "main", 5);
    i0.ɵɵelement(1, "app-icon", 6)(2, "p", 7);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r0 = i0.ɵɵnextContext();
    i0.ɵɵadvance();
    i0.ɵɵproperty("icon", ctx_r0.icon);
    i0.ɵɵadvance();
    i0.ɵɵproperty("innerHTML", ctx_r0.content, i0.ɵɵsanitizeHtml);
  }
}
function ConfirmModalComponent_footer_4_Template(rf, ctx) {
  if (rf & 1) {
    var _r2 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "footer", 8)(1, "button", 9);
    i0.ɵɵtext(2);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(3, "button", 10);
    i0.ɵɵlistener("click", function ConfirmModalComponent_footer_4_Template_button_click_3_listener() {
      i0.ɵɵrestoreView(_r2);
      var ctx_r0 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r0.onConfirm());
    });
    i0.ɵɵtext(4);
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var ctx_r0 = i0.ɵɵnextContext();
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate1(" ", ctx_r0.cancel_text, " ");
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate1(" ", ctx_r0.confirm_text, " ");
  }
}
function ConfirmModalComponent_ng_template_5_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "main", 11)(1, "div", 12);
    i0.ɵɵelement(2, "mat-spinner", 13);
    i0.ɵɵelementStart(3, "p");
    i0.ɵɵtext(4);
    i0.ɵɵelementEnd()()();
  }
  if (rf & 2) {
    var ctx_r0 = i0.ɵɵnextContext();
    i0.ɵɵadvance(4);
    i0.ɵɵtextInterpolate(ctx_r0.loading);
  }
}
exports.CONFIRM_METADATA = {
  height: 'auto',
  width: '28em',
  maxHeight: 'calc(100vh - 2em)',
  maxWidth: 'calc(100vw - 2em)'
};
var ConfirmModalComponent = /*#__PURE__*/function (_async_handler_class_) {
  function ConfirmModalComponent(_dialog_ref, _data) {
    var _this;
    _classCallCheck(this, ConfirmModalComponent);
    _this = _callSuper(this, ConfirmModalComponent);
    _this._dialog_ref = _dialog_ref;
    _this._data = _data;
    /** Emitter for user action on the modal */
    _this.event = new core_1.EventEmitter();
    /** Title of the confirm modal */
    _this.title = _this._data.title || 'Confirm';
    /** Body of the confirm modal */
    _this.content = _this._data.content || 'Are you sure?';
    /** Display text on the confirm button */
    _this.confirm_text = _this._data.confirm_text || 'Accept';
    /** Display text on the cancel button */
    _this.cancel_text = _this._data.cancel_text || 'Cancel';
    /** Display icon properties */
    _this.icon = _this._data.icon || {
      "class": 'material-icons',
      content: 'done'
    };
    /** Prevent user from closing the modal */
    _this.disableClose = function () {
      return _this._dialog_ref.disableClose = true;
    };
    /** Allow the user to close the modal */
    _this.enableClose = function () {
      return _this._dialog_ref.disableClose = false;
    };
    return _this;
  }
  _inherits(ConfirmModalComponent, _async_handler_class_);
  return _createClass(ConfirmModalComponent, [{
    key: "ngOnInit",
    value: function ngOnInit() {
      var _this2 = this;
      if (this._data.close_delay) {
        this.timeout('close', function () {
          return _this2._dialog_ref.close();
        }, this._data.close_delay);
      }
    }
    /** User confirmation of the content of the modal */
  }, {
    key: "onConfirm",
    value: function onConfirm() {
      this.event.emit({
        reason: 'done'
      });
    }
  }]);
}(async_handler_class_1.AsyncHandler);
_ConfirmModalComponent = ConfirmModalComponent;
_ConfirmModalComponent.ɵfac = function ConfirmModalComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _ConfirmModalComponent)(i0.ɵɵdirectiveInject(i1.MatDialogRef), i0.ɵɵdirectiveInject(dialog_1.MAT_DIALOG_DATA));
};
_ConfirmModalComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _ConfirmModalComponent,
  selectors: [["confirm-modal"]],
  outputs: {
    event: "event"
  },
  features: [i0.ɵɵInheritDefinitionFeature],
  decls: 7,
  vars: 4,
  consts: [["load_state", ""], [1, "px-4", "py-3"], [1, "font-medium", "text-xl"], ["class", "flex flex-col items-center space-y-4 p-4 max-w-[80vw]", 4, "ngIf", "ngIfElse"], ["class", "flex items-center justify-center p-4 space-x-4", 4, "ngIf"], [1, "flex", "flex-col", "items-center", "space-y-4", "p-4", "max-w-[80vw]"], [1, "text-5xl", 3, "icon"], ["content", "", 1, "text-center", 3, "innerHTML"], [1, "flex", "items-center", "justify-center", "p-4", "space-x-4"], ["btn", "", "matRipple", "", "mat-dialog-close", "", 1, "inverse", "flex-1"], ["btn", "", "matRipple", "", "name", "accept", 1, "flex-1", 3, "click"], ["loading", ""], [1, "w-full", "h-48", "flex", "flex-col", "items-center", "justify-center", "space-y-4"], ["diameter", "32"]],
  template: function ConfirmModalComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵelementStart(0, "header", 1)(1, "h3", 2);
      i0.ɵɵtext(2);
      i0.ɵɵelementEnd()();
      i0.ɵɵtemplate(3, ConfirmModalComponent_main_3_Template, 3, 2, "main", 3)(4, ConfirmModalComponent_footer_4_Template, 5, 2, "footer", 4)(5, ConfirmModalComponent_ng_template_5_Template, 5, 1, "ng-template", null, 0, i0.ɵɵtemplateRefExtractor);
    }
    if (rf & 2) {
      var load_state_r3 = i0.ɵɵreference(6);
      i0.ɵɵadvance(2);
      i0.ɵɵtextInterpolate(ctx.title);
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", !ctx.loading)("ngIfElse", load_state_r3);
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", !ctx.loading);
    }
  },
  dependencies: [i2.NgIf, i3.MatRipple, i1.MatDialogClose, i4.MatProgressSpinner, i5.IconComponent]
});
exports.ConfirmModalComponent = ConfirmModalComponent;

/***/ }),

/***/ 12993:
/*!***********************************************************!*\
  !*** ./libs/components/src/lib/custom-table.component.ts ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _callSuper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/callSuper.js */ 8513)["default"]);
var _inherits = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/inherits.js */ 58160)["default"]);
var _CustomTableComponent;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.CustomTableComponent = void 0;
var core_1 = __webpack_require__(/*! @angular/core */ 37580);
var paginator_1 = __webpack_require__(/*! @angular/material/paginator */ 24624);
var sort_1 = __webpack_require__(/*! @angular/material/sort */ 22047);
var table_1 = __webpack_require__(/*! @angular/material/table */ 77697);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var rxjs_1 = __webpack_require__(/*! rxjs */ 15681);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @angular/common */ 60316);
var i2 = __webpack_require__(/*! @angular/material/paginator */ 24624);
var i3 = __webpack_require__(/*! @angular/cdk/table */ 90198);
var i4 = __webpack_require__(/*! @angular/material/sort */ 22047);
var _c0 = function _c0(a0, a1, a2, a3, a4, a5, a6) {
  return {
    first: a0,
    last: a1,
    index: a2,
    data: a3,
    row: a4,
    key: a5,
    name: a6
  };
};
function CustomTableComponent_ng_container_1_div_2_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 12);
    i0.ɵɵtext(1);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r0 = i0.ɵɵnextContext();
    var column_r2 = ctx_r0.$implicit;
    var i_r3 = ctx_r0.index;
    var ctx_r3 = i0.ɵɵnextContext();
    i0.ɵɵstyleProp("width", (ctx_r3.column_size[i_r3] || "8") + "em")("flex", ctx_r3.column_size[i_r3] === "flex" ? "1" : "");
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", ctx_r3.display_column[i_r3] || column_r2, " ");
  }
}
function CustomTableComponent_ng_container_1_div_3_ng_container_1_ng_container_1_span_2_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "span", 16);
    i0.ɵɵtext(1, " N/A ");
    i0.ɵɵelementEnd();
  }
}
function CustomTableComponent_ng_container_1_div_3_ng_container_1_ng_container_1_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵtext(1);
    i0.ɵɵtemplate(2, CustomTableComponent_ng_container_1_div_3_ng_container_1_ng_container_1_span_2_Template, 2, 0, "span", 15);
    i0.ɵɵelementContainerEnd();
  }
  if (rf & 2) {
    var row_r5 = i0.ɵɵnextContext(2).$implicit;
    var column_r2 = i0.ɵɵnextContext().$implicit;
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate(row_r5[column_r2]);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", row_r5[column_r2] == null || row_r5[column_r2] === "");
  }
}
function CustomTableComponent_ng_container_1_div_3_ng_container_1_ng_template_2_ng_container_0_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementContainer(0);
  }
}
function CustomTableComponent_ng_container_1_div_3_ng_container_1_ng_template_2_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵtemplate(0, CustomTableComponent_ng_container_1_div_3_ng_container_1_ng_template_2_ng_container_0_Template, 1, 0, "ng-container", 17);
  }
  if (rf & 2) {
    var ctx_r5 = i0.ɵɵnextContext(2);
    var row_r5 = ctx_r5.$implicit;
    var idx_r7 = ctx_r5.index;
    var ctx_r0 = i0.ɵɵnextContext();
    var column_r2 = ctx_r0.$implicit;
    var i_r3 = ctx_r0.index;
    var ctx_r3 = i0.ɵɵnextContext();
    i0.ɵɵproperty("ngTemplateOutlet", ctx_r3.template[column_r2])("ngTemplateOutletContext", i0.ɵɵpureFunction7(2, _c0, idx_r7 === 0, idx_r7 === ctx_r3.data_source.data.length - 1 || idx_r7 === ctx_r3.data_source.length - 1, i_r3, row_r5[column_r2], row_r5, column_r2, ctx_r3.display_column[i_r3] || column_r2));
  }
}
function CustomTableComponent_ng_container_1_div_3_ng_container_1_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵtemplate(1, CustomTableComponent_ng_container_1_div_3_ng_container_1_ng_container_1_Template, 3, 2, "ng-container", 14)(2, CustomTableComponent_ng_container_1_div_3_ng_container_1_ng_template_2_Template, 1, 10, "ng-template", null, 1, i0.ɵɵtemplateRefExtractor);
    i0.ɵɵelementContainerEnd();
  }
  if (rf & 2) {
    var cell_outlet_r8 = i0.ɵɵreference(3);
    var column_r2 = i0.ɵɵnextContext(2).$implicit;
    var ctx_r3 = i0.ɵɵnextContext();
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", !ctx_r3.template[column_r2])("ngIfElse", cell_outlet_r8);
  }
}
function CustomTableComponent_ng_container_1_div_3_ng_template_2_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 18);
    i0.ɵɵtext(1);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var idx_r7 = i0.ɵɵnextContext().index;
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate(idx_r7 + 1);
  }
}
function CustomTableComponent_ng_container_1_div_3_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 13);
    i0.ɵɵtemplate(1, CustomTableComponent_ng_container_1_div_3_ng_container_1_Template, 4, 2, "ng-container", 14)(2, CustomTableComponent_ng_container_1_div_3_ng_template_2_Template, 2, 1, "ng-template", null, 0, i0.ɵɵtemplateRefExtractor);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var index_outlet_r9 = i0.ɵɵreference(3);
    var ctx_r0 = i0.ɵɵnextContext();
    var column_r2 = ctx_r0.$implicit;
    var i_r3 = ctx_r0.index;
    var ctx_r3 = i0.ɵɵnextContext();
    i0.ɵɵstyleProp("width", (ctx_r3.column_size[i_r3] || "8") + "em")("flex", ctx_r3.column_size[i_r3] === "flex" ? "1" : "");
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", column_r2 !== "_index")("ngIfElse", index_outlet_r9);
  }
}
function CustomTableComponent_ng_container_1_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementContainerStart(0)(1, 9);
    i0.ɵɵtemplate(2, CustomTableComponent_ng_container_1_div_2_Template, 2, 5, "div", 10)(3, CustomTableComponent_ng_container_1_div_3_Template, 4, 6, "div", 11);
    i0.ɵɵelementContainerEnd()();
  }
  if (rf & 2) {
    var column_r2 = ctx.$implicit;
    i0.ɵɵadvance();
    i0.ɵɵproperty("cdkColumnDef", column_r2);
  }
}
function CustomTableComponent_cdk_header_row_2_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelement(0, "cdk-header-row", 19);
  }
}
function CustomTableComponent_cdk_row_3_Template(rf, ctx) {
  if (rf & 1) {
    var _r10 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "cdk-row", 20);
    i0.ɵɵlistener("click", function CustomTableComponent_cdk_row_3_Template_cdk_row_click_0_listener() {
      var row_r11 = i0.ɵɵrestoreView(_r10).$implicit;
      var ctx_r3 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r3.row_clicked.emit(row_r11));
    });
    i0.ɵɵelementEnd();
  }
}
function CustomTableComponent_ng_template_4_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "p", 21);
    i0.ɵɵtext(1);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r3 = i0.ɵɵnextContext();
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", ctx_r3.empty || "No data to display", " ");
  }
}
var CustomTableComponent = /*#__PURE__*/function (_common_1$AsyncHandle) {
  function CustomTableComponent() {
    var _this;
    _classCallCheck(this, CustomTableComponent);
    _this = _callSuper(this, CustomTableComponent, arguments);
    /** Whether table should use pagination */
    _this.pagination = false;
    /** Number of items to display on pagination pages */
    _this.page_size = 7;
    /** Size of the columns in em or flex for a flexible size */
    _this.column_size = [];
    /** Displayed value when the table is empty */
    _this.template = {};
    /** Emitter for when a row is clicked */
    _this.row_clicked = new core_1.EventEmitter();
    /** List of items to display in the table */
    _this.data_source = new table_1.MatTableDataSource([]);
    return _this;
  }
  _inherits(CustomTableComponent, _common_1$AsyncHandle);
  return _createClass(CustomTableComponent, [{
    key: "ngAfterViewInit",
    value: function ngAfterViewInit() {
      this.data_source.sort = this._sort;
      this.data_source.paginator = this.pagination ? this._paginator : null;
      this.data_source.filterPredicate = function (i, s) {
        for (var key in i) {
          if (typeof i[key] === 'string' && i[key].toLowerCase().includes(s.toLowerCase())) {
            return true;
          } else if (i[key] === s) {
            return true;
          }
        }
        return false;
      };
    }
  }, {
    key: "ngOnChanges",
    value: function ngOnChanges(changes) {
      var _this2 = this;
      if (changes.dataSource && this.dataSource) {
        if (this.dataSource instanceof rxjs_1.Observable) {
          this.subscription('data', this.dataSource.subscribe(function (data) {
            return _this2.data_source.data = data;
          }));
        } else {
          this.data_source.data = this.dataSource;
        }
      }
      if (changes.pagination) {
        this.data_source.paginator = this.pagination ? this._paginator : null;
      }
      if (changes.filter) {
        this.data_source.filter = (this.filter || '').trim().toLowerCase();
      }
      if (changes.columns && this.columns) {
        this.display_column = this.columns.map(function (_, idx) {
          return (_this2.display_column || [])[idx] || _.split('_').join(' ');
        });
      }
      if (!this.column_size) {
        this.column_size = [];
      }
      if (changes.reset_page && this.reset_page !== changes.reset_page.previousValue) {
        var _this$_paginator;
        (_this$_paginator = this._paginator) === null || _this$_paginator === void 0 || _this$_paginator.firstPage();
      }
    }
  }]);
}(common_1.AsyncHandler);
_CustomTableComponent = CustomTableComponent;
_CustomTableComponent.ɵfac = /*@__PURE__*/function () {
  var ɵCustomTableComponent_BaseFactory;
  return function CustomTableComponent_Factory(__ngFactoryType__) {
    return (ɵCustomTableComponent_BaseFactory || (ɵCustomTableComponent_BaseFactory = i0.ɵɵgetInheritedFactory(_CustomTableComponent)))(__ngFactoryType__ || _CustomTableComponent);
  };
}();
_CustomTableComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _CustomTableComponent,
  selectors: [["custom-table"]],
  viewQuery: function CustomTableComponent_Query(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵviewQuery(paginator_1.MatPaginator, 5);
      i0.ɵɵviewQuery(sort_1.MatSort, 5);
    }
    if (rf & 2) {
      var _t;
      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx._paginator = _t.first);
      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx._sort = _t.first);
    }
  },
  inputs: {
    dataSource: "dataSource",
    pagination: "pagination",
    page_size: "page_size",
    filter: "filter",
    display_column: "display_column",
    columns: "columns",
    column_size: "column_size",
    empty: "empty",
    template: "template",
    reset_page: "reset_page"
  },
  outputs: {
    row_clicked: "row_clicked"
  },
  features: [i0.ɵɵInheritDefinitionFeature, i0.ɵɵNgOnChangesFeature],
  decls: 7,
  vars: 8,
  consts: [["index_outlet", ""], ["cell_outlet", ""], ["matSort", "", 1, "block", "border", "border-base-200", "divide-y", "divide-base-200", "text-sm", 3, "dataSource"], [4, "ngFor", "ngForOf"], ["class", "sticky flex items-center bg-base-100 top-0 z-10", 4, "cdkHeaderRowDef"], ["row", "", "class", "flex z-0 relative hover:bg-neutral:bg-base-100/5 divide-x divide-base-200", 3, "click", 4, "cdkRowDef", "cdkRowDefColumns"], ["cdkNoDataRow", ""], ["footer", "", 3, "hidden"], [3, "pageSize", "hidePageSize", "showFirstLastButtons"], [3, "cdkColumnDef"], ["cdk-header-cell", "", "class", "capitalize p-2 h-12 bg-base-300 flex items-center", "mat-sort-header", "", 3, "width", "flex", 4, "cdkHeaderCellDef"], ["cdk-cell", "", "class", "p-2 truncate flex items-center", 3, "width", "flex", 4, "cdkCellDef"], ["cdk-header-cell", "", "mat-sort-header", "", 1, "capitalize", "p-2", "h-12", "bg-base-300", "flex", "items-center"], ["cdk-cell", "", 1, "p-2", "truncate", "flex", "items-center"], [4, "ngIf", "ngIfElse"], ["class", "opacity-30", 4, "ngIf"], [1, "opacity-30"], [4, "ngTemplateOutlet", "ngTemplateOutletContext"], [1, "w-full", "text-center"], [1, "sticky", "flex", "items-center", "bg-base-100", "top-0", "z-10"], ["row", "", 1, "flex", "z-0", "relative", "hover:bg-neutral:bg-base-100/5", "divide-x", "divide-base-200", 3, "click"], [1, "w-full", "p-4", "text-center", "opacity-30"]],
  template: function CustomTableComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵelementStart(0, "cdk-table", 2);
      i0.ɵɵtemplate(1, CustomTableComponent_ng_container_1_Template, 4, 1, "ng-container", 3)(2, CustomTableComponent_cdk_header_row_2_Template, 1, 0, "cdk-header-row", 4)(3, CustomTableComponent_cdk_row_3_Template, 1, 0, "cdk-row", 5)(4, CustomTableComponent_ng_template_4_Template, 2, 1, "ng-template", 6);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(5, "div", 7);
      i0.ɵɵelement(6, "mat-paginator", 8);
      i0.ɵɵelementEnd();
    }
    if (rf & 2) {
      i0.ɵɵproperty("dataSource", ctx.data_source);
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngForOf", ctx.columns);
      i0.ɵɵadvance();
      i0.ɵɵproperty("cdkHeaderRowDef", ctx.columns);
      i0.ɵɵadvance();
      i0.ɵɵproperty("cdkRowDefColumns", ctx.columns);
      i0.ɵɵadvance(2);
      i0.ɵɵproperty("hidden", !ctx.pagination);
      i0.ɵɵadvance();
      i0.ɵɵproperty("pageSize", ctx.page_size)("hidePageSize", true)("showFirstLastButtons", true);
    }
  },
  dependencies: [i1.NgForOf, i1.NgIf, i1.NgTemplateOutlet, i2.MatPaginator, i3.CdkTable, i3.CdkRowDef, i3.CdkCellDef, i3.CdkHeaderCellDef, i3.CdkColumnDef, i3.CdkRow, i3.CdkHeaderRow, i3.CdkHeaderRowDef, i3.CdkNoDataRow, i4.MatSort, i4.MatSortHeader],
  styles: ["cdk-header-row[_ngcontent-%COMP%] {\n                font-weight: 500;\n                text-transform: capitalize;\n                min-height: 3rem;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImN1c3RvbS10YWJsZS5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLGdCQUFnQjtnQkFDaEIsMEJBQTBCO2dCQUMxQixnQkFBZ0I7WUFDcEIiLCJmaWxlIjoiY3VzdG9tLXRhYmxlLmNvbXBvbmVudC50cyIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgY2RrLWhlYWRlci1yb3cge1xuICAgICAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gICAgICAgICAgICAgICAgdGV4dC10cmFuc2Zvcm06IGNhcGl0YWxpemU7XG4gICAgICAgICAgICAgICAgbWluLWhlaWdodDogM3JlbTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl19 */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvY29tcG9uZW50cy9zcmMvbGliL2N1c3RvbS10YWJsZS5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLGdCQUFnQjtnQkFDaEIsMEJBQTBCO2dCQUMxQixnQkFBZ0I7WUFDcEI7O0FBRVosZ2hCQUFnaEIiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIGNkay1oZWFkZXItcm93IHtcbiAgICAgICAgICAgICAgICBmb250LXdlaWdodDogNTAwO1xuICAgICAgICAgICAgICAgIHRleHQtdHJhbnNmb3JtOiBjYXBpdGFsaXplO1xuICAgICAgICAgICAgICAgIG1pbi1oZWlnaHQ6IDNyZW07XG4gICAgICAgICAgICB9XG4gICAgICAgICJdLCJzb3VyY2VSb290IjoiIn0= */"]
});
exports.CustomTableComponent = CustomTableComponent;

/***/ }),

/***/ 22238:
/*!*************************************************************!*\
  !*** ./libs/components/src/lib/custom-tooltip.component.ts ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _callSuper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/callSuper.js */ 8513)["default"]);
var _superPropGet = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/superPropGet.js */ 54514)["default"]);
var _inherits = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/inherits.js */ 58160)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _CustomTooltipData, _CustomTooltipComponent;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.CustomTooltipComponent = exports.CustomTooltipData = void 0;
var overlay_1 = __webpack_require__(/*! @angular/cdk/overlay */ 81570);
var portal_1 = __webpack_require__(/*! @angular/cdk/portal */ 9168);
var core_1 = __webpack_require__(/*! @angular/core */ 37580);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @angular/cdk/overlay */ 81570);
var i2 = __webpack_require__(/*! @angular/common */ 60316);
var i3 = __webpack_require__(/*! @angular/cdk/portal */ 9168);
var i4 = __webpack_require__(/*! ./sanitise.pipe */ 54616);
var _c0 = ["customTooltip", ""];
var _c1 = ["*"];
function CustomTooltipComponent_ng_template_1_ng_container_1_ng_container_1_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementContainer(0);
  }
}
function CustomTooltipComponent_ng_template_1_ng_container_1_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵtemplate(1, CustomTooltipComponent_ng_template_1_ng_container_1_ng_container_1_Template, 1, 0, "ng-container", 4);
    i0.ɵɵelementContainerEnd();
  }
  if (rf & 2) {
    var ctx_r0 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngComponentOutlet", ctx_r0.content)("ngComponentOutletInjector", ctx_r0.injector);
  }
}
function CustomTooltipComponent_ng_template_1_ng_container_2_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵelement(1, "div", 5);
    i0.ɵɵpipe(2, "sanitize");
    i0.ɵɵelementContainerEnd();
  }
  if (rf & 2) {
    var ctx_r0 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance();
    i0.ɵɵproperty("innerHTML", i0.ɵɵpipeBind1(2, 1, ctx_r0.content), i0.ɵɵsanitizeHtml);
  }
}
function CustomTooltipComponent_ng_template_1_ng_container_3_ng_container_1_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementContainer(0);
  }
}
function CustomTooltipComponent_ng_template_1_ng_container_3_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵtemplate(1, CustomTooltipComponent_ng_template_1_ng_container_3_ng_container_1_Template, 1, 0, "ng-container", 6);
    i0.ɵɵelementContainerEnd();
  }
  if (rf & 2) {
    var ctx_r0 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngTemplateOutlet", ctx_r0.content)("ngTemplateOutletContext", ctx_r0.data);
  }
}
function CustomTooltipComponent_ng_template_1_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 1);
    i0.ɵɵtemplate(1, CustomTooltipComponent_ng_template_1_ng_container_1_Template, 2, 2, "ng-container", 2)(2, CustomTooltipComponent_ng_template_1_ng_container_2_Template, 3, 3, "ng-container", 2)(3, CustomTooltipComponent_ng_template_1_ng_container_3_Template, 2, 2, "ng-container", 3);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r0 = i0.ɵɵnextContext();
    i0.ɵɵproperty("ngSwitch", ctx_r0.type);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngSwitchCase", "component");
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngSwitchCase", "html");
  }
}
var CustomTooltipData = /*#__PURE__*/_createClass(function CustomTooltipData(d) {
  _classCallCheck(this, CustomTooltipData);
  this.data = d.data;
  this.close = d.close || function () {
    return null;
  };
});
_CustomTooltipData = CustomTooltipData;
_CustomTooltipData.ɵfac = function CustomTooltipData_Factory(__ngFactoryType__) {
  i0.ɵɵinvalidFactory();
};
_CustomTooltipData.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({
  token: _CustomTooltipData,
  factory: _CustomTooltipData.ɵfac
});
exports.CustomTooltipData = CustomTooltipData;
var CustomTooltipComponent = /*#__PURE__*/function (_common_1$AsyncHandle) {
  function CustomTooltipComponent(_element, _overlay, _injector) {
    var _this;
    _classCallCheck(this, CustomTooltipComponent);
    _this = _callSuper(this, CustomTooltipComponent);
    _this._element = _element;
    _this._overlay = _overlay;
    _this._injector = _injector;
    /** Whether tooltip has a backdrop */
    _this.backdrop = true;
    /** Whether tooltip has a backdrop */
    _this.hover = false;
    /** Delay time in milliseconds to close after hover */
    _this.delay = 0;
    /** Type of content to render */
    _this.type = 'template';
    _this._overlay_ref = null;
    _this.onClick = function () {
      return _this.open();
    };
    _this.onTouch = function () {
      return _this.open();
    };
    _this.onEnter = function () {
      return _this.hover ? _this.open() : '';
    };
    _this.onLeave = function () {
      return _this.hover ? _this.close() : '';
    };
    return _this;
  }
  _inherits(CustomTooltipComponent, _common_1$AsyncHandle);
  return _createClass(CustomTooltipComponent, [{
    key: "ngOnChanges",
    value: function ngOnChanges(changes) {
      this._updateInjector();
      if (this._overlay_ref && (changes.x_pos || changes.y_pos || changes.content)) {
        this.open();
      }
    }
  }, {
    key: "ngOnDestroy",
    value: function ngOnDestroy() {
      _superPropGet(CustomTooltipComponent, "ngOnDestroy", this, 3)([]);
      this.close();
    }
  }, {
    key: "open",
    value: function open() {
      var _this2 = this;
      if (!this.content) return;
      this.timeout('open', function () {
        if (_this2.hover && _this2.delay) {
          _this2.timeout('onclose', function () {
            return _this2.close();
          }, _this2.delay);
        }
        _this2._updateType();
        if (_this2._overlay_ref) _this2.close();
        if (!_this2._portal) return;
        var pos = _this2._element.nativeElement.getBoundingClientRect();
        var default_x = 'end';
        var default_y = 'top';
        _this2._overlay_ref = _this2._overlay.create({
          hasBackdrop: !!_this2.backdrop && !_this2.hover,
          positionStrategy: _this2._overlay.position().flexibleConnectedTo(_this2._element).withPositions([{
            originX: _this2.x_pos || default_x,
            originY: (_this2.y_pos === 'top' ? 'bottom' : _this2.y_pos == 'bottom' ? 'top' : _this2.y_pos) || default_y,
            overlayX: _this2.x_pos || default_x,
            overlayY: _this2.y_pos || default_y
          }])
        });
        _this2._overlay_ref.attach(_this2._portal);
        if (_this2.backdrop) {
          _this2.subscription('backdrop', _this2._overlay_ref.backdropClick().subscribe(function () {
            return _this2.close();
          }));
        }
      }, 50);
    }
  }, {
    key: "close",
    value: function close() {
      this.clearTimeout('open');
      if (this._overlay_ref) {
        this._overlay_ref.dispose();
        this._overlay_ref = null;
      }
    }
  }, {
    key: "_updateType",
    value: function _updateType() {
      this.type = typeof this.content === 'string' ? 'html' : this.content instanceof core_1.TemplateRef ? 'template' : 'component';
    }
  }, {
    key: "_updateInjector",
    value: function _updateInjector() {
      var _this3 = this;
      this.injector = core_1.Injector.create({
        providers: [{
          provide: CustomTooltipData,
          useValue: {
            data: this.data,
            close: function close() {
              return _this3.close();
            }
          }
        }],
        parent: this._injector
      });
    }
  }]);
}(common_1.AsyncHandler);
_CustomTooltipComponent = CustomTooltipComponent;
_CustomTooltipComponent.ɵfac = function CustomTooltipComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _CustomTooltipComponent)(i0.ɵɵdirectiveInject(i0.ElementRef), i0.ɵɵdirectiveInject(i1.Overlay), i0.ɵɵdirectiveInject(i0.Injector));
};
_CustomTooltipComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _CustomTooltipComponent,
  selectors: [["", "customTooltip", ""]],
  viewQuery: function CustomTooltipComponent_Query(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵviewQuery(portal_1.CdkPortal, 5);
    }
    if (rf & 2) {
      var _t;
      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx._portal = _t.first);
    }
  },
  hostBindings: function CustomTooltipComponent_HostBindings(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵlistener("click", function CustomTooltipComponent_click_HostBindingHandler() {
        return ctx.onClick();
      })("touchend", function CustomTooltipComponent_touchend_HostBindingHandler() {
        return ctx.onTouch();
      })("mouseenter", function CustomTooltipComponent_mouseenter_HostBindingHandler() {
        return ctx.onEnter();
      })("mouseleave", function CustomTooltipComponent_mouseleave_HostBindingHandler() {
        return ctx.onLeave();
      });
    }
  },
  inputs: {
    x_pos: [0, "xPosition", "x_pos"],
    y_pos: [0, "yPosition", "y_pos"],
    content: "content",
    data: "data",
    backdrop: "backdrop",
    hover: "hover",
    delay: "delay"
  },
  features: [i0.ɵɵInheritDefinitionFeature, i0.ɵɵNgOnChangesFeature],
  attrs: _c0,
  ngContentSelectors: _c1,
  decls: 2,
  vars: 0,
  consts: [["cdk-portal", ""], ["custom-tooltip", "", 1, "relative", "print:hidden", 3, "ngSwitch"], [4, "ngSwitchCase"], [4, "ngSwitchDefault"], [4, "ngComponentOutlet", "ngComponentOutletInjector"], [3, "innerHTML"], [4, "ngTemplateOutlet", "ngTemplateOutletContext"]],
  template: function CustomTooltipComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵprojectionDef();
      i0.ɵɵprojection(0);
      i0.ɵɵtemplate(1, CustomTooltipComponent_ng_template_1_Template, 4, 3, "ng-template", 0);
    }
  },
  dependencies: [i2.NgComponentOutlet, i2.NgTemplateOutlet, i2.NgSwitch, i2.NgSwitchCase, i2.NgSwitchDefault, i3.TemplatePortalDirective, i4.SanitizePipe],
  encapsulation: 2
});
exports.CustomTooltipComponent = CustomTooltipComponent;

/***/ }),

/***/ 17025:
/*!***************************************************!*\
  !*** ./libs/components/src/lib/date-from.pipe.ts ***!
  \***************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _DateFromPipe;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.DateFromPipe = void 0;
var date_fns_1 = __webpack_require__(/*! date-fns */ 25773);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var DateFromPipe = /*#__PURE__*/function () {
  function DateFromPipe() {
    _classCallCheck(this, DateFromPipe);
  }
  return _createClass(DateFromPipe, [{
    key: "transform",
    value: function transform(date) {
      var now = Date.now();
      var diff = (0, date_fns_1.differenceInMinutes)(now, date);
      var direction = diff < 0;
      diff = Math.abs(diff);
      if (diff < 1) {
        // Less than a minute
        return direction ? 'Soon' : 'Now';
      } else if (diff === 1) {
        // 1 minute
        return direction ? 'In 1 min' : '1 min';
      } else if (diff < 60) {
        // Minutes
        return direction ? "In ".concat(diff, " min") : "".concat(diff, " min");
      } else if (diff < 24 * 60) {
        // Hours
        var hours = Math.floor(diff / 60);
        return direction ? "In ".concat(hours, " hour").concat(hours === 1 ? '' : 's') : (0, date_fns_1.format)(date, 'H:mm');
      } else if (diff < 7 * 24 * 60) {
        // Days
        var days = Math.floor(diff / (24 * 60));
        return direction ? (0, date_fns_1.format)(date, 'dd MMM yyyy') : (0, date_fns_1.format)(date, 'E H:mm');
      } else if (diff < 365 * 24 * 60) {
        // Days
        var _days = Math.floor(diff / (24 * 60));
        return direction ? (0, date_fns_1.format)(date, 'dd MMM yyyy') : (0, date_fns_1.format)(date, 'LLL d H:mm');
      }
      return 'Just now';
    }
  }]);
}();
_DateFromPipe = DateFromPipe;
_DateFromPipe.ɵfac = function DateFromPipe_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _DateFromPipe)();
};
_DateFromPipe.ɵpipe = /*@__PURE__*/i0.ɵɵdefinePipe({
  name: "dateFrom",
  type: _DateFromPipe,
  pure: true
});
exports.DateFromPipe = DateFromPipe;

/***/ }),

/***/ 18482:
/*!************************************************************!*\
  !*** ./libs/components/src/lib/debug-console.component.ts ***!
  \************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _regeneratorRuntime = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/regeneratorRuntime.js */ 8698)["default"]);
var _toConsumableArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/toConsumableArray.js */ 86033)["default"]);
var _asyncToGenerator = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/asyncToGenerator.js */ 95386)["default"]);
var _slicedToArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/slicedToArray.js */ 6282)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _callSuper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/callSuper.js */ 8513)["default"]);
var _inherits = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/inherits.js */ 58160)["default"]);
var _DebugConsoleComponent;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.DebugConsoleComponent = void 0;
var rxjs_1 = __webpack_require__(/*! rxjs */ 15681);
var operators_1 = __webpack_require__(/*! rxjs/operators */ 97303);
var hotkeys_service_1 = __webpack_require__(/*! libs/common/src/lib/hotkeys.service */ 47643);
var async_handler_class_1 = __webpack_require__(/*! libs/common/src/lib/async-handler.class */ 75354);
var remote_logging_service_1 = __webpack_require__(/*! libs/common/src/lib/remote-logging.service */ 686);
var json_display_component_1 = __webpack_require__(/*! ./json-display.component */ 12354);
var organisation_1 = __webpack_require__(/*! @placeos/organisation */ 2510);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @placeos/organisation */ 2510);
var i2 = __webpack_require__(/*! libs/common/src/lib/remote-logging.service */ 686);
var i3 = __webpack_require__(/*! libs/common/src/lib/hotkeys.service */ 47643);
var i4 = __webpack_require__(/*! @placeos/common */ 22797);
function DebugConsoleComponent_div_0_cdk_virtual_scroll_viewport_7_div_1_div_8_ng_container_2_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵelementStart(1, "a", 25);
    i0.ɵɵpipe(2, "sanitize");
    i0.ɵɵtext(3);
    i0.ɵɵelementEnd();
    i0.ɵɵelementContainerEnd();
  }
  if (rf & 2) {
    var obj_r3 = i0.ɵɵnextContext().$implicit;
    i0.ɵɵadvance();
    i0.ɵɵproperty("href", i0.ɵɵpipeBind1(2, 2, obj_r3), i0.ɵɵsanitizeUrl);
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate(obj_r3);
  }
}
function DebugConsoleComponent_div_0_cdk_virtual_scroll_viewport_7_div_1_div_8_ng_container_3_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵtext(1, " [");
    i0.ɵɵelementStart(2, "span", 26);
    i0.ɵɵtext(3, "Object");
    i0.ɵɵelementEnd();
    i0.ɵɵtext(4, "] ");
    i0.ɵɵelementContainerEnd();
  }
  if (rf & 2) {
    var obj_r3 = i0.ɵɵnextContext().$implicit;
    var ctx_r1 = i0.ɵɵnextContext(4);
    i0.ɵɵadvance(2);
    i0.ɵɵproperty("content", ctx_r1.json_tooltip)("data", obj_r3)("hover", true)("backdrop", false);
  }
}
function DebugConsoleComponent_div_0_cdk_virtual_scroll_viewport_7_div_1_div_8_ng_container_4_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵtext(1);
    i0.ɵɵelementContainerEnd();
  }
  if (rf & 2) {
    var obj_r3 = i0.ɵɵnextContext().$implicit;
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate(obj_r3);
  }
}
function DebugConsoleComponent_div_0_cdk_virtual_scroll_viewport_7_div_1_div_8_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 21);
    i0.ɵɵelementContainerStart(1, 22);
    i0.ɵɵtemplate(2, DebugConsoleComponent_div_0_cdk_virtual_scroll_viewport_7_div_1_div_8_ng_container_2_Template, 4, 4, "ng-container", 23)(3, DebugConsoleComponent_div_0_cdk_virtual_scroll_viewport_7_div_1_div_8_ng_container_3_Template, 5, 4, "ng-container", 23)(4, DebugConsoleComponent_div_0_cdk_virtual_scroll_viewport_7_div_1_div_8_ng_container_4_Template, 2, 1, "ng-container", 24);
    i0.ɵɵelementContainerEnd();
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var obj_r3 = ctx.$implicit;
    var ctx_r1 = i0.ɵɵnextContext(4);
    i0.ɵɵattribute("data-type", ctx_r1.type(obj_r3));
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngSwitch", ctx_r1.type(obj_r3));
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngSwitchCase", "link");
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngSwitchCase", "object");
  }
}
function DebugConsoleComponent_div_0_cdk_virtual_scroll_viewport_7_div_1_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 18)(1, "div", 19);
    i0.ɵɵtext(2);
    i0.ɵɵpipe(3, "date");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(4, "div");
    i0.ɵɵtext(5);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(6, "div");
    i0.ɵɵtext(7);
    i0.ɵɵelementEnd();
    i0.ɵɵtemplate(8, DebugConsoleComponent_div_0_cdk_virtual_scroll_viewport_7_div_1_div_8_Template, 5, 4, "div", 20);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var log_r4 = ctx.$implicit;
    var ctx_r1 = i0.ɵɵnextContext(3);
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate1(" ", i0.ɵɵpipeBind2(3, 8, log_r4.timestamp, "MMM d HH:mm:ss"), " ");
    i0.ɵɵadvance(2);
    i0.ɵɵclassMap("uppercase text-xs p-1 " + ctx_r1.colors[log_r4.type] + " rounded font-mono");
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", log_r4.type, " ");
    i0.ɵɵadvance();
    i0.ɵɵclassMap("capitalize text-xs p-1 " + ctx_r1.colors[log_r4.subtype] + " rounded font-mono w-16 text-center");
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", log_r4.subtype, " ");
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngForOf", log_r4.data);
  }
}
function DebugConsoleComponent_div_0_cdk_virtual_scroll_viewport_7_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "cdk-virtual-scroll-viewport", 15);
    i0.ɵɵtemplate(1, DebugConsoleComponent_div_0_cdk_virtual_scroll_viewport_7_div_1_Template, 9, 11, "div", 16);
    i0.ɵɵpipe(2, "async");
    i0.ɵɵelement(3, "div", 17);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance();
    i0.ɵɵproperty("cdkVirtualForOf", i0.ɵɵpipeBind1(2, 2, ctx_r1.filtered_logs))("cdkVirtualForTrackBy", ctx_r1.trackByFn);
  }
}
function DebugConsoleComponent_div_0_span_16_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "span", 27);
    i0.ɵɵtext(1);
    i0.ɵɵpipe(2, "async");
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var tmp_4_0;
    var ctx_r1 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", ((tmp_4_0 = i0.ɵɵpipeBind1(2, 1, ctx_r1.filtered_logs)) == null ? null : tmp_4_0.length) || "0", " of ");
  }
}
function DebugConsoleComponent_div_0_Template(rf, ctx) {
  if (rf & 1) {
    var _r1 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 4)(1, "div", 5)(2, "div", 6);
    i0.ɵɵtext(3, "Console");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(4, "button", 7);
    i0.ɵɵlistener("click", function DebugConsoleComponent_div_0_Template_button_click_4_listener() {
      i0.ɵɵrestoreView(_r1);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.show = false);
    });
    i0.ɵɵelementStart(5, "app-icon");
    i0.ɵɵtext(6, "close");
    i0.ɵɵelementEnd()()();
    i0.ɵɵtemplate(7, DebugConsoleComponent_div_0_cdk_virtual_scroll_viewport_7_Template, 4, 4, "cdk-virtual-scroll-viewport", 8);
    i0.ɵɵpipe(8, "async");
    i0.ɵɵelementStart(9, "div", 9);
    i0.ɵɵelement(10, "div", 10)(11, "div", 11);
    i0.ɵɵelementStart(12, "input", 12, 1);
    i0.ɵɵpipe(14, "async");
    i0.ɵɵlistener("ngModelChange", function DebugConsoleComponent_div_0_Template_input_ngModelChange_12_listener($event) {
      i0.ɵɵrestoreView(_r1);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.filter.next($event));
    });
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(15, "div", 13);
    i0.ɵɵtemplate(16, DebugConsoleComponent_div_0_span_16_Template, 3, 3, "span", 14);
    i0.ɵɵpipe(17, "async");
    i0.ɵɵtext(18);
    i0.ɵɵpipe(19, "async");
    i0.ɵɵelementEnd()()();
  }
  if (rf & 2) {
    var tmp_3_0;
    var tmp_6_0;
    var tmp_7_0;
    var ctx_r1 = i0.ɵɵnextContext();
    var empty_state_r5 = i0.ɵɵreference(3);
    i0.ɵɵadvance(7);
    i0.ɵɵproperty("ngIf", (tmp_3_0 = i0.ɵɵpipeBind1(8, 5, ctx_r1.filtered_logs)) == null ? null : tmp_3_0.length)("ngIfElse", empty_state_r5);
    i0.ɵɵadvance(5);
    i0.ɵɵproperty("ngModel", i0.ɵɵpipeBind1(14, 7, ctx_r1.filter));
    i0.ɵɵadvance(4);
    i0.ɵɵproperty("ngIf", (tmp_6_0 = i0.ɵɵpipeBind1(17, 9, ctx_r1.filter)) == null ? null : tmp_6_0.length);
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate1(" ", (tmp_7_0 = i0.ɵɵpipeBind1(19, 11, ctx_r1.logs)) == null ? null : tmp_7_0.length, " ");
  }
}
function DebugConsoleComponent_button_1_Template(rf, ctx) {
  if (rf & 1) {
    var _r6 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "button", 28);
    i0.ɵɵlistener("mousedown", function DebugConsoleComponent_button_1_Template_button_mousedown_0_listener() {
      i0.ɵɵrestoreView(_r6);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.onStart());
    })("touchstart", function DebugConsoleComponent_button_1_Template_button_touchstart_0_listener() {
      i0.ɵɵrestoreView(_r6);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.onStart());
    })("mouseup", function DebugConsoleComponent_button_1_Template_button_mouseup_0_listener() {
      i0.ɵɵrestoreView(_r6);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.onEnd());
    })("touchend", function DebugConsoleComponent_button_1_Template_button_touchend_0_listener() {
      i0.ɵɵrestoreView(_r6);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.onEnd());
    });
    i0.ɵɵelementEnd();
  }
}
function DebugConsoleComponent_ng_template_2_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 29)(1, "div", 30);
    i0.ɵɵtext(2);
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate1(" No ", ctx_r1.filter.getValue() ? "matching" : "", " logs ");
  }
}
var COLOR_MAP = {
  console: 'bg-success-light text-black',
  network: 'bg-success text-success-content',
  dom: 'bg-warning-light text-black',
  log: "bg-info-light text-black",
  info: "bg-info text-info-content",
  warn: "bg-warning text-warning-content",
  debug: "bg-base-300 text-base-content",
  error: "bg-error text-error-content"
};
var URL_STARTS = ['tel:', 'mailto:', 'http:', 'https:', 'ftp:', 'ws:', 'wss:'];
var DebugConsoleComponent = /*#__PURE__*/function (_async_handler_class_) {
  function DebugConsoleComponent(_org, _logs, _hotkey, _settings) {
    var _this;
    _classCallCheck(this, DebugConsoleComponent);
    _this = _callSuper(this, DebugConsoleComponent);
    _this._org = _org;
    _this._logs = _logs;
    _this._hotkey = _hotkey;
    _this._settings = _settings;
    _this.show = false;
    _this.colors = COLOR_MAP;
    _this.json_tooltip = json_display_component_1.JsonDisplayComponent;
    _this.filter = new rxjs_1.BehaviorSubject('');
    _this.logs = new rxjs_1.BehaviorSubject([]);
    _this.filtered_logs = (0, rxjs_1.combineLatest)([_this.filter, _this.logs]).pipe((0, operators_1.map)(function (_ref) {
      var _ref2 = _slicedToArray(_ref, 2),
        s = _ref2[0],
        logs = _ref2[1];
      return logs.filter(function (_) {
        return _.type.toLowerCase().includes(s.toLowerCase()) || _.subtype.toLowerCase().includes(s.toLowerCase()) || "".concat(_.data).toLowerCase().includes(s.toLowerCase());
      });
    }));
    _this.onStart = function () {
      return _this.timeout('show', function () {
        return _this.show = true;
      }, 5000);
    };
    _this.onEnd = function () {
      return _this.clearTimeout('show');
    };
    return _this;
  }
  _inherits(DebugConsoleComponent, _async_handler_class_);
  return _createClass(DebugConsoleComponent, [{
    key: "can_activate",
    get: function get() {
      return !!this._settings.get('app.debug_console');
    }
  }, {
    key: "ngOnInit",
    value: function () {
      var _ngOnInit = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
        var _this2 = this;
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              _context.next = 2;
              return this._org.initialised.pipe((0, operators_1.first)(function (_) {
                return _;
              })).toPromise();
            case 2:
              this.subscription('binding', this._org.active_building.subscribe(function () {
                _this2._logs.setSystem(_this2._org.binding('remote_logger'));
              }));
              this.subscription('logs', this._logs.history.subscribe(function (event) {
                var logs = _this2.logs.getValue();
                if (logs.length > (_this2._settings.get('app.log_limits') || 20000)) logs.splice(0, 1);
                _this2.logs.next([].concat(_toConsumableArray(logs), [event]));
              }));
              this.subscription('toggle', this._hotkey.listen(['Control', 'Backquote'], function () {
                return _this2.show = !_this2.show;
              }));
              this._logs.setSystem(this._org.binding('remote_logger'));
            case 6:
            case "end":
              return _context.stop();
          }
        }, _callee, this);
      }));
      function ngOnInit() {
        return _ngOnInit.apply(this, arguments);
      }
      return ngOnInit;
    }()
  }, {
    key: "type",
    value: function type(item) {
      if (typeof item === 'string' && URL_STARTS.find(function (start) {
        return item.startsWith(start);
      })) {
        return 'link';
      } else if (item instanceof Object) {
        return 'object';
      }
      return 'string';
    }
  }, {
    key: "trackByFn",
    value: function trackByFn(_, item) {
      return item === null || item === void 0 ? void 0 : item.timestamp;
    }
  }]);
}(async_handler_class_1.AsyncHandler);
_DebugConsoleComponent = DebugConsoleComponent;
_DebugConsoleComponent.ɵfac = function DebugConsoleComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _DebugConsoleComponent)(i0.ɵɵdirectiveInject(i1.OrganisationService), i0.ɵɵdirectiveInject(i2.RemoteLoggingService), i0.ɵɵdirectiveInject(i3.HotkeysService), i0.ɵɵdirectiveInject(i4.SettingsService));
};
_DebugConsoleComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _DebugConsoleComponent,
  selectors: [["debug-console"]],
  inputs: {
    show: "show"
  },
  features: [i0.ɵɵInheritDefinitionFeature],
  decls: 4,
  vars: 2,
  consts: [["empty_state", ""], ["search_input", ""], ["class", "absolute bottom-2 left-2 max-w-[80vw] w-[40rem] border border-base-300 bg-base-200 text-base-content shadow rounded overflow-hidden h-[24rem] max-h-[65vh] flex flex-col z-[998]", 4, "ngIf"], ["activation", "", "class", "absolute bottom-0 right-0 h-12 w-12", 3, "mousedown", "touchstart", "mouseup", "touchend", 4, "ngIf"], [1, "absolute", "bottom-2", "left-2", "max-w-[80vw]", "w-[40rem]", "border", "border-base-300", "bg-base-200", "text-base-content", "shadow", "rounded", "overflow-hidden", "h-[24rem]", "max-h-[65vh]", "flex", "flex-col", "z-[998]"], [1, "flex", "items-center", "justify-between", "bg-base-100", "border-b", "border-base-300"], [1, "p-2"], ["icon", "", "matRipple", "", 3, "click"], ["itemSize", "32", "class", "flex-1 h-[30rem] max-h-full w-full", 4, "ngIf", "ngIfElse"], [1, "absolute", "bottom-1", "right-1", "rounded-lg", "p-1", "flex", "items-center", "w-[20rem]", "overflow-hidden"], [1, "absolute", "inset-0", "bg-base-content", "opacity-60", "z-0"], [1, "absolute", "inset-1", "bg-base-content", "opacity-90", "rounded", "z-0"], ["name", "log-filter", "placeholder", "Filter logs...", 1, "relative", "border-none", "flex-1", "text-sm", "px-2", "py-1", "font-mono", "rounded", "text-base-100", 3, "ngModelChange", "ngModel"], [1, "relative", "font-mono", "text-xs", "px-2", "text-center", "text-base-100"], ["class", "font-mono", 4, "ngIf"], ["itemSize", "32", 1, "flex-1", "h-[30rem]", "max-h-full", "w-full"], ["class", "font-mono h-8 truncate p-2 text-sm flex items-center max-w-full hover:bg-base-100 space-x-1", 4, "cdkVirtualFor", "cdkVirtualForOf", "cdkVirtualForTrackBy"], [1, "h-8", "w-full"], [1, "font-mono", "h-8", "truncate", "p-2", "text-sm", "flex", "items-center", "max-w-full", "hover:bg-base-100", "space-x-1"], [1, "uppercase", "text-xs", "p-1", "bg-base-100/10", "rounded", "font-mono"], ["class", "font-mono pl-1", 4, "ngFor", "ngForOf"], [1, "font-mono", "pl-1"], [3, "ngSwitch"], [4, "ngSwitchCase"], [4, "ngSwitchDefault"], ["target", "_blank", "rel", "noopener noreferer", 1, "font-mono", 3, "href"], ["customTooltip", "", "xPosition", "center", "yPosition", "bottom", 1, "underline", "font-mono", "hover:text-info", 3, "content", "data", "hover", "backdrop"], [1, "font-mono"], ["activation", "", 1, "absolute", "bottom-0", "right-0", "h-12", "w-12", 3, "mousedown", "touchstart", "mouseup", "touchend"], [1, "flex-1", "flex", "flex-col", "items-center", "justify-center", "h-[30rem]", "w-full"], [1, "text-2xl", "opacity-30"]],
  template: function DebugConsoleComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵtemplate(0, DebugConsoleComponent_div_0_Template, 20, 13, "div", 2)(1, DebugConsoleComponent_button_1_Template, 1, 0, "button", 3)(2, DebugConsoleComponent_ng_template_2_Template, 3, 1, "ng-template", null, 0, i0.ɵɵtemplateRefExtractor);
    }
    if (rf & 2) {
      i0.ɵɵproperty("ngIf", ctx.show);
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", ctx.can_activate);
    }
  }
});
exports.DebugConsoleComponent = DebugConsoleComponent;

/***/ }),

/***/ 3051:
/*!******************************************************************!*\
  !*** ./libs/components/src/lib/desk-height-presets.component.ts ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _taggedTemplateLiteral = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js */ 9959)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _DeskHeightPresetsComponent, _templateObject, _templateObject2, _templateObject3;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.DeskHeightPresetsComponent = void 0;
var core_1 = __webpack_require__(/*! @angular/core */ 37580);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @placeos/common */ 22797);
var i2 = __webpack_require__(/*! @angular/common */ 60316);
var i3 = __webpack_require__(/*! @angular/forms */ 34456);
var i4 = __webpack_require__(/*! @angular/material/core */ 74646);
var i5 = __webpack_require__(/*! @angular/material/slider */ 64992);
function DeskHeightPresetsComponent_div_5_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 16);
    i0.ɵɵtext(1, " Before you can set a desk height, presets must be set ");
    i0.ɵɵelementEnd();
  }
}
function DeskHeightPresetsComponent_button_23_Template(rf, ctx) {
  if (rf & 1) {
    var _r1 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "button", 17);
    i0.ɵɵlistener("click", function DeskHeightPresetsComponent_button_23_Template_button_click_0_listener() {
      i0.ɵɵrestoreView(_r1);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.onClose());
    });
    i0.ɵɵtext(1, " Save Presets ");
    i0.ɵɵelementEnd();
  }
}
var DeskHeightPresetsComponent = /*#__PURE__*/function () {
  function DeskHeightPresetsComponent(_settings) {
    _classCallCheck(this, DeskHeightPresetsComponent);
    this._settings = _settings;
    this.show_close = false;
    this.close = new core_1.EventEmitter();
    this.not_set = false;
    this.desk_sitting_height = 71;
    this.desk_standing_height = 101;
  }
  return _createClass(DeskHeightPresetsComponent, [{
    key: "ngOnInit",
    value: function ngOnInit() {
      this.not_set = !this._settings.get('desk_sitting_height') && !this._settings.get('desk_standing_height');
      this.desk_sitting_height = this._settings.get('desk_sitting_height') || 71;
      this.desk_standing_height = this._settings.get('desk_standing_height') || 101;
    }
  }, {
    key: "onClose",
    value: function onClose() {
      this.saveSetting('desk_sitting_height', this.desk_sitting_height);
      this.saveSetting('desk_standing_height', this.desk_standing_height);
      this.close.emit();
    }
  }, {
    key: "formatLabel",
    value: function formatLabel(value) {
      return "".concat(value.toFixed(1), "cm");
    }
  }, {
    key: "saveSetting",
    value: function saveSetting(name, value) {
      this._settings.saveUserSetting(name, value);
    }
  }]);
}();
_DeskHeightPresetsComponent = DeskHeightPresetsComponent;
_DeskHeightPresetsComponent.ɵfac = function DeskHeightPresetsComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _DeskHeightPresetsComponent)(i0.ɵɵdirectiveInject(i1.SettingsService));
};
_DeskHeightPresetsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _DeskHeightPresetsComponent,
  selectors: [["desk-height-presets"]],
  inputs: {
    show_close: "show_close"
  },
  outputs: {
    close: "close"
  },
  decls: 24,
  vars: 8,
  consts: function consts() {
    var i18n_0;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_1586279176802880074$$LIBS_COMPONENTS_SRC_LIB_DESK_HEIGHT_PRESETS_COMPONENT_TS_0 = goog.getMsg("Desk Height Presets");
      i18n_0 = MSG_EXTERNAL_1586279176802880074$$LIBS_COMPONENTS_SRC_LIB_DESK_HEIGHT_PRESETS_COMPONENT_TS_0;
    } else {
      i18n_0 = $localize(_templateObject || (_templateObject = _taggedTemplateLiteral([":\u241F4a9ae1d6024ac45fcd744f2b33fcc1078684204c\u241F1586279176802880074:Desk Height Presets"])));
    }
    var i18n_1;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_2517995078699734025$$LIBS_COMPONENTS_SRC_LIB_DESK_HEIGHT_PRESETS_COMPONENT_TS_1 = goog.getMsg(" Desk height presets allow you to store and recall your preferred desk height when checking into a booked desk that supports height adjustment. ");
      i18n_1 = MSG_EXTERNAL_2517995078699734025$$LIBS_COMPONENTS_SRC_LIB_DESK_HEIGHT_PRESETS_COMPONENT_TS_1;
    } else {
      i18n_1 = $localize(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([":\u241F76aa055a2b4d990ee2773112c433cbca362d5cf3\u241F2517995078699734025: Desk height presets allow you to store and recall your preferred desk height when checking into a booked desk that supports height adjustment. "])));
    }
    var i18n_2;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_3844660402650950250$$LIBS_COMPONENTS_SRC_LIB_DESK_HEIGHT_PRESETS_COMPONENT_TS_2 = goog.getMsg(" Set your desk height for the best experience. ");
      i18n_2 = MSG_EXTERNAL_3844660402650950250$$LIBS_COMPONENTS_SRC_LIB_DESK_HEIGHT_PRESETS_COMPONENT_TS_2;
    } else {
      i18n_2 = $localize(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([":\u241F7cdb9f15155eef16ce00f29f1d835dc2360f266f\u241F3844660402650950250: Set your desk height for the best experience. "])));
    }
    return [i18n_0, i18n_1, i18n_2, [1, "relative", "p-4", "bg-base-100", "rounded", "shadow", "w-[20rem]"], [1, "text-lg", "mb-2"], [1, "text-xs", "opacity-60", "mb-4"], ["class", "text-xs mb-4 -mx-2 p-2 rounded bg-warning text-warning-content", 4, "ngIf"], [1, "flex", "flex-col", "mt-2"], [1, "flex", "items-center", "space-x-2"], ["min", "60", "max", "80", "step", "0.5", "discrete", "", 1, "flex-1", 3, "displayWith"], ["matSliderThumb", "", 3, "ngModelChange", "ngModel"], [1, "text-sm", "w-12", "text-right"], [1, "flex", "items-center", "space-x-2", "mr-2"], ["min", "90", "max", "120", "step", "0.5", "discrete", "", 1, "flex-1", 3, "displayWith"], [1, "text-sm", "w-12", "text-right", "mr-2"], ["btn", "", "matRipple", "", "class", "w-full mt-2", 3, "click", 4, "ngIf"], [1, "text-xs", "mb-4", "-mx-2", "p-2", "rounded", "bg-warning", "text-warning-content"], ["btn", "", "matRipple", "", 1, "w-full", "mt-2", 3, "click"]];
  },
  template: function DeskHeightPresetsComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵelementStart(0, "div", 3)(1, "div", 4);
      i0.ɵɵi18n(2, 0);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(3, "div", 5);
      i0.ɵɵi18n(4, 1);
      i0.ɵɵelementEnd();
      i0.ɵɵtemplate(5, DeskHeightPresetsComponent_div_5_Template, 2, 0, "div", 6);
      i0.ɵɵelementStart(6, "div", 5);
      i0.ɵɵi18n(7, 2);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(8, "div", 7)(9, "label");
      i0.ɵɵtext(10, "Sitting Height");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(11, "div", 8)(12, "mat-slider", 9)(13, "input", 10);
      i0.ɵɵtwoWayListener("ngModelChange", function DeskHeightPresetsComponent_Template_input_ngModelChange_13_listener($event) {
        i0.ɵɵtwoWayBindingSet(ctx.desk_sitting_height, $event) || (ctx.desk_sitting_height = $event);
        return $event;
      });
      i0.ɵɵlistener("ngModelChange", function DeskHeightPresetsComponent_Template_input_ngModelChange_13_listener($event) {
        return ctx.saveSetting("desk_sitting_height", $event);
      });
      i0.ɵɵelementEnd()();
      i0.ɵɵelementStart(14, "div", 11);
      i0.ɵɵtext(15);
      i0.ɵɵelementEnd()();
      i0.ɵɵelementStart(16, "label");
      i0.ɵɵtext(17, "Standing Height");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(18, "div", 12)(19, "mat-slider", 13)(20, "input", 10);
      i0.ɵɵtwoWayListener("ngModelChange", function DeskHeightPresetsComponent_Template_input_ngModelChange_20_listener($event) {
        i0.ɵɵtwoWayBindingSet(ctx.desk_standing_height, $event) || (ctx.desk_standing_height = $event);
        return $event;
      });
      i0.ɵɵlistener("ngModelChange", function DeskHeightPresetsComponent_Template_input_ngModelChange_20_listener($event) {
        return ctx.saveSetting("desk_standing_height", $event);
      });
      i0.ɵɵelementEnd()();
      i0.ɵɵelementStart(21, "div", 14);
      i0.ɵɵtext(22);
      i0.ɵɵelementEnd()()();
      i0.ɵɵtemplate(23, DeskHeightPresetsComponent_button_23_Template, 2, 0, "button", 15);
      i0.ɵɵelementEnd();
    }
    if (rf & 2) {
      i0.ɵɵadvance(5);
      i0.ɵɵproperty("ngIf", ctx.not_set && ctx.show_close);
      i0.ɵɵadvance(7);
      i0.ɵɵproperty("displayWith", ctx.formatLabel);
      i0.ɵɵadvance();
      i0.ɵɵtwoWayProperty("ngModel", ctx.desk_sitting_height);
      i0.ɵɵadvance(2);
      i0.ɵɵtextInterpolate1(" ", ctx.desk_sitting_height.toFixed(1), "cm ");
      i0.ɵɵadvance(4);
      i0.ɵɵproperty("displayWith", ctx.formatLabel);
      i0.ɵɵadvance();
      i0.ɵɵtwoWayProperty("ngModel", ctx.desk_standing_height);
      i0.ɵɵadvance(2);
      i0.ɵɵtextInterpolate1(" ", ctx.desk_standing_height.toFixed(1), "cm ");
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", ctx.show_close);
    }
  },
  dependencies: [i2.NgIf, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgModel, i4.MatRipple, i5.MatSlider, i5.MatSliderThumb]
});
exports.DeskHeightPresetsComponent = DeskHeightPresetsComponent;

/***/ }),

/***/ 17022:
/*!**************************************************!*\
  !*** ./libs/components/src/lib/duration.pipe.ts ***!
  \**************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _DurationPipe;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.DurationPipe = void 0;
var date_fns_1 = __webpack_require__(/*! date-fns */ 25773);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var DurationPipe = /*#__PURE__*/function () {
  function DurationPipe() {
    _classCallCheck(this, DurationPipe);
  }
  return _createClass(DurationPipe, [{
    key: "transform",
    value:
    /**
     * Format the duration value
     * @param length Duration to format in minutes
     * @param shorten Whether to shorten the period names e.g. `hours` as `h`
     */
    function transform(length) {
      var shorten = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;
      var duration = (0, date_fns_1.formatDuration)({
        hours: Math.floor(length / 60),
        minutes: length % 60
      });
      if (shorten) {
        duration = duration.replace('hour', 'h').replace('minute', 'm').replace(/s/gi, '');
      }
      return duration;
    }
  }]);
}();
_DurationPipe = DurationPipe;
_DurationPipe.ɵfac = function DurationPipe_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _DurationPipe)();
};
_DurationPipe.ɵpipe = /*@__PURE__*/i0.ɵɵdefinePipe({
  name: "duration",
  type: _DurationPipe,
  pure: true
});
exports.DurationPipe = DurationPipe;

/***/ }),

/***/ 62678:
/*!***********************************************!*\
  !*** ./libs/components/src/lib/fixed.pipe.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _FixedPipe;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.FixedPipe = void 0;
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var FixedPipe = /*#__PURE__*/function () {
  function FixedPipe() {
    _classCallCheck(this, FixedPipe);
  }
  return _createClass(FixedPipe, [{
    key: "transform",
    value:
    /**
     * Fixed a number to x decimal places
     * @param value number to convert
     * @param places Number of decimal places to convert
     */
    function transform(value) {
      var places = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 2;
      return value.toFixed(places);
    }
  }]);
}();
_FixedPipe = FixedPipe;
_FixedPipe.ɵfac = function FixedPipe_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _FixedPipe)();
};
_FixedPipe.ɵpipe = /*@__PURE__*/i0.ɵɵdefinePipe({
  name: "toFixed",
  type: _FixedPipe,
  pure: true
});
exports.FixedPipe = FixedPipe;

/***/ }),

/***/ 20785:
/*!************************************************************!*\
  !*** ./libs/components/src/lib/global-banner.component.ts ***!
  \************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _GlobalBannerComponent;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.GlobalBannerComponent = void 0;
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @placeos/common */ 22797);
var i2 = __webpack_require__(/*! @angular/common */ 60316);
var i3 = __webpack_require__(/*! ./icon.component */ 69434);
function GlobalBannerComponent_div_0_Template(rf, ctx) {
  if (rf & 1) {
    var _r1 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 1)(1, "div", 2);
    i0.ɵɵtext(2);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(3, "button", 3);
    i0.ɵɵlistener("click", function GlobalBannerComponent_div_0_Template_button_click_3_listener() {
      i0.ɵɵrestoreView(_r1);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.close());
    });
    i0.ɵɵelementStart(4, "app-icon");
    i0.ɵɵtext(5, "close");
    i0.ɵɵelementEnd()()();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵclassProp("bg-info", ctx_r1.banner.type === "info" || !ctx_r1.banner.type)("text-info-content", ctx_r1.banner.type === "info" || !ctx_r1.banner.type)("bg-warning", ctx_r1.banner.type === "warn")("text-warning-content", ctx_r1.banner.type === "warn")("bg-error", ctx_r1.banner.type === "error")("text-error-content", ctx_r1.banner.type === "error");
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate(ctx_r1.banner == null ? null : ctx_r1.banner.content);
  }
}
var GlobalBannerComponent = /*#__PURE__*/function () {
  function GlobalBannerComponent(_settings) {
    _classCallCheck(this, GlobalBannerComponent);
    this._settings = _settings;
  }
  return _createClass(GlobalBannerComponent, [{
    key: "has_viewed",
    get: function get() {
      var _this$banner;
      return !((_this$banner = this.banner) !== null && _this$banner !== void 0 && _this$banner.content) || localStorage.getItem('PLACE.last_banner') === this.banner.id;
    }
  }, {
    key: "banner",
    get: function get() {
      return this._settings.get('app.general.banner');
    }
  }, {
    key: "close",
    value: function close() {
      var _this$banner2;
      localStorage.setItem('PLACE.last_banner', ((_this$banner2 = this.banner) === null || _this$banner2 === void 0 ? void 0 : _this$banner2.id) || '');
    }
  }]);
}();
_GlobalBannerComponent = GlobalBannerComponent;
_GlobalBannerComponent.ɵfac = function GlobalBannerComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _GlobalBannerComponent)(i0.ɵɵdirectiveInject(i1.SettingsService));
};
_GlobalBannerComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _GlobalBannerComponent,
  selectors: [["global-banner"]],
  decls: 1,
  vars: 1,
  consts: [["class", "flex items-center w-full p-4 space-x-4", 3, "bg-info", "text-info-content", "bg-warning", "text-warning-content", "bg-error", "text-error-content", 4, "ngIf"], [1, "flex", "items-center", "w-full", "p-4", "space-x-4"], [1, "flex-1"], ["icon", "", 3, "click"]],
  template: function GlobalBannerComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵtemplate(0, GlobalBannerComponent_div_0_Template, 6, 13, "div", 0);
    }
    if (rf & 2) {
      i0.ɵɵproperty("ngIf", !ctx.has_viewed);
    }
  },
  dependencies: [i2.NgIf, i3.IconComponent],
  styles: ["[_nghost-%COMP%] {\n                display: block;\n                width: 100%;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdsb2JhbC1iYW5uZXIuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxjQUFjO2dCQUNkLFdBQVc7WUFDZiIsImZpbGUiOiJnbG9iYWwtYmFubmVyLmNvbXBvbmVudC50cyIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgOmhvc3Qge1xuICAgICAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgfVxuICAgICAgICAiXX0= */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvY29tcG9uZW50cy9zcmMvbGliL2dsb2JhbC1iYW5uZXIuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxjQUFjO2dCQUNkLFdBQVc7WUFDZjs7QUFFWix3YUFBd2EiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIDpob3N0IHtcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl0sInNvdXJjZVJvb3QiOiIifQ== */"]
});
exports.GlobalBannerComponent = GlobalBannerComponent;

/***/ }),

/***/ 34921:
/*!*************************************************************!*\
  !*** ./libs/components/src/lib/global-loading.component.ts ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _regeneratorRuntime = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/regeneratorRuntime.js */ 8698)["default"]);
var _asyncToGenerator = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/asyncToGenerator.js */ 95386)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _callSuper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/callSuper.js */ 8513)["default"]);
var _inherits = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/inherits.js */ 58160)["default"]);
var _GlobalLoadingComponent;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.GlobalLoadingComponent = void 0;
var operators_1 = __webpack_require__(/*! rxjs/operators */ 97303);
var ts_client_1 = __webpack_require__(/*! @placeos/ts-client */ 35713);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var organisation_service_1 = __webpack_require__(/*! libs/organisation/src/lib/organisation.service */ 19863);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! libs/organisation/src/lib/organisation.service */ 19863);
var i2 = __webpack_require__(/*! @placeos/common */ 22797);
var i3 = __webpack_require__(/*! @angular/common */ 60316);
var i4 = __webpack_require__(/*! @angular/material/progress-spinner */ 41134);
function GlobalLoadingComponent_div_0_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 2);
    i0.ɵɵtext(1, " Unable to reach server... Some features may not work. ");
    i0.ɵɵelementEnd();
  }
}
function GlobalLoadingComponent_div_1_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 3);
    i0.ɵɵelement(1, "mat-spinner", 4);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    i0.ɵɵadvance();
    i0.ɵɵproperty("diameter", 64);
  }
}
var GlobalLoadingComponent = /*#__PURE__*/function (_common_1$AsyncHandle) {
  function GlobalLoadingComponent(_org, _settings) {
    var _this;
    _classCallCheck(this, GlobalLoadingComponent);
    _this = _callSuper(this, GlobalLoadingComponent);
    _this._org = _org;
    _this._settings = _settings;
    return _this;
  }
  _inherits(GlobalLoadingComponent, _common_1$AsyncHandle);
  return _createClass(GlobalLoadingComponent, [{
    key: "online",
    get: function get() {
      return (0, ts_client_1.isOnline)();
    }
  }, {
    key: "ngOnInit",
    value: function () {
      var _ngOnInit = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
        var _this2 = this;
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              this.loading = true;
              _context.next = 3;
              return this._org.initialised.pipe((0, operators_1.first)(function (_) {
                return _;
              })).toPromise();
            case 3:
              _context.next = 5;
              return this._settings.initialised.pipe((0, operators_1.first)(function (_) {
                return _;
              })).toPromise();
            case 5:
              this.interval('has_token', function () {
                if (!(0, ts_client_1.authority)() || !(0, ts_client_1.token)()) return;
                _this2.loading = false;
                _this2.clearInterval('has_token');
              }, 1000);
            case 6:
            case "end":
              return _context.stop();
          }
        }, _callee, this);
      }));
      function ngOnInit() {
        return _ngOnInit.apply(this, arguments);
      }
      return ngOnInit;
    }()
  }]);
}(common_1.AsyncHandler);
_GlobalLoadingComponent = GlobalLoadingComponent;
_GlobalLoadingComponent.ɵfac = function GlobalLoadingComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _GlobalLoadingComponent)(i0.ɵɵdirectiveInject(i1.OrganisationService), i0.ɵɵdirectiveInject(i2.SettingsService));
};
_GlobalLoadingComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _GlobalLoadingComponent,
  selectors: [["global-loading"]],
  features: [i0.ɵɵInheritDefinitionFeature],
  decls: 2,
  vars: 2,
  consts: [["class", "fixed bottom-2 left-1/2 -translate-x-1/2 shadow rounded-3xl px-4 py-2 bg-error text-white text-xs", 4, "ngIf"], ["loader", "", "class", "fixed inset-0 flex items-center justify-center pointer-events-auto bg-base-100", 4, "ngIf"], [1, "fixed", "bottom-2", "left-1/2", "-translate-x-1/2", "shadow", "rounded-3xl", "px-4", "py-2", "bg-error", "text-white", "text-xs"], ["loader", "", 1, "fixed", "inset-0", "flex", "items-center", "justify-center", "pointer-events-auto", "bg-base-100"], [3, "diameter"]],
  template: function GlobalLoadingComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵtemplate(0, GlobalLoadingComponent_div_0_Template, 2, 0, "div", 0)(1, GlobalLoadingComponent_div_1_Template, 2, 1, "div", 1);
    }
    if (rf & 2) {
      i0.ɵɵproperty("ngIf", !ctx.online);
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", ctx.loading);
    }
  },
  dependencies: [i3.NgIf, i4.MatProgressSpinner],
  styles: ["[_nghost-%COMP%] {\n                pointer-events: none;\n            }\n\n            [_nghost-%COMP%]    > [loader][_ngcontent-%COMP%] {\n                z-index: 997;\n                background-image: url(\"data:image/svg+xml,%3Csvg width='36' height='36' viewBox='0 0 36 36' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M36 0H0v36h36V0zM15.126 2H2v13.126c.367.094.714.24 1.032.428L15.554 3.032c-.188-.318-.334-.665-.428-1.032zM18 4.874V18H4.874c-.094-.367-.24-.714-.428-1.032L16.968 4.446c.318.188.665.334 1.032.428zM22.874 2h11.712L20 16.586V4.874c1.406-.362 2.512-1.468 2.874-2.874zm10.252 18H20v13.126c.367.094.714.24 1.032.428l12.522-12.522c-.188-.318-.334-.665-.428-1.032zM36 22.874V36H22.874c-.094-.367-.24-.714-.428-1.032l12.522-12.522c.318.188.665.334 1.032.428zm0-7.748V3.414L21.414 18h11.712c.362-1.406 1.468-2.512 2.874-2.874zm-18 18V21.414L3.414 36h11.712c.362-1.406 1.468-2.512 2.874-2.874zM4.874 20h11.712L2 34.586V22.874c1.406-.362 2.512-1.468 2.874-2.874z' fill='%23000000' fill-opacity='0.1' fill-rule='evenodd'/%3E%3C/svg%3E\");\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdsb2JhbC1sb2FkaW5nLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1lBQ1k7Z0JBQ0ksb0JBQW9CO1lBQ3hCOztZQUVBO2dCQUNJLFlBQVk7Z0JBQ1osZzJCQUFnMkI7WUFDcDJCIiwiZmlsZSI6Imdsb2JhbC1sb2FkaW5nLmNvbXBvbmVudC50cyIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgOmhvc3Qge1xuICAgICAgICAgICAgICAgIHBvaW50ZXItZXZlbnRzOiBub25lO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICA6aG9zdCA+IFtsb2FkZXJdIHtcbiAgICAgICAgICAgICAgICB6LWluZGV4OiA5OTc7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZC1pbWFnZTogdXJsKFwiZGF0YTppbWFnZS9zdmcreG1sLCUzQ3N2ZyB3aWR0aD0nMzYnIGhlaWdodD0nMzYnIHZpZXdCb3g9JzAgMCAzNiAzNicgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyUzRSUzQ3BhdGggZD0nTTM2IDBIMHYzNmgzNlYwek0xNS4xMjYgMkgydjEzLjEyNmMuMzY3LjA5NC43MTQuMjQgMS4wMzIuNDI4TDE1LjU1NCAzLjAzMmMtLjE4OC0uMzE4LS4zMzQtLjY2NS0uNDI4LTEuMDMyek0xOCA0Ljg3NFYxOEg0Ljg3NGMtLjA5NC0uMzY3LS4yNC0uNzE0LS40MjgtMS4wMzJMMTYuOTY4IDQuNDQ2Yy4zMTguMTg4LjY2NS4zMzQgMS4wMzIuNDI4ek0yMi44NzQgMmgxMS43MTJMMjAgMTYuNTg2VjQuODc0YzEuNDA2LS4zNjIgMi41MTItMS40NjggMi44NzQtMi44NzR6bTEwLjI1MiAxOEgyMHYxMy4xMjZjLjM2Ny4wOTQuNzE0LjI0IDEuMDMyLjQyOGwxMi41MjItMTIuNTIyYy0uMTg4LS4zMTgtLjMzNC0uNjY1LS40MjgtMS4wMzJ6TTM2IDIyLjg3NFYzNkgyMi44NzRjLS4wOTQtLjM2Ny0uMjQtLjcxNC0uNDI4LTEuMDMybDEyLjUyMi0xMi41MjJjLjMxOC4xODguNjY1LjMzNCAxLjAzMi40Mjh6bTAtNy43NDhWMy40MTRMMjEuNDE0IDE4aDExLjcxMmMuMzYyLTEuNDA2IDEuNDY4LTIuNTEyIDIuODc0LTIuODc0em0tMTggMThWMjEuNDE0TDMuNDE0IDM2aDExLjcxMmMuMzYyLTEuNDA2IDEuNDY4LTIuNTEyIDIuODc0LTIuODc0ek00Ljg3NCAyMGgxMS43MTJMMiAzNC41ODZWMjIuODc0YzEuNDA2LS4zNjIgMi41MTItMS40NjggMi44NzQtMi44NzR6JyBmaWxsPSclMjMwMDAwMDAnIGZpbGwtb3BhY2l0eT0nMC4xJyBmaWxsLXJ1bGU9J2V2ZW5vZGQnLyUzRSUzQy9zdmclM0VcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICJdfQ== */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvY29tcG9uZW50cy9zcmMvbGliL2dsb2JhbC1sb2FkaW5nLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1lBQ1k7Z0JBQ0ksb0JBQW9CO1lBQ3hCOztZQUVBO2dCQUNJLFlBQVk7Z0JBQ1osZzJCQUFnMkI7WUFDcDJCOztBQUVaLDRyREFBNHJEIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICA6aG9zdCB7XG4gICAgICAgICAgICAgICAgcG9pbnRlci1ldmVudHM6IG5vbmU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIDpob3N0ID4gW2xvYWRlcl0ge1xuICAgICAgICAgICAgICAgIHotaW5kZXg6IDk5NztcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoXCJkYXRhOmltYWdlL3N2Zyt4bWwsJTNDc3ZnIHdpZHRoPSczNicgaGVpZ2h0PSczNicgdmlld0JveD0nMCAwIDM2IDM2JyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnJTNFJTNDcGF0aCBkPSdNMzYgMEgwdjM2aDM2VjB6TTE1LjEyNiAySDJ2MTMuMTI2Yy4zNjcuMDk0LjcxNC4yNCAxLjAzMi40MjhMMTUuNTU0IDMuMDMyYy0uMTg4LS4zMTgtLjMzNC0uNjY1LS40MjgtMS4wMzJ6TTE4IDQuODc0VjE4SDQuODc0Yy0uMDk0LS4zNjctLjI0LS43MTQtLjQyOC0xLjAzMkwxNi45NjggNC40NDZjLjMxOC4xODguNjY1LjMzNCAxLjAzMi40Mjh6TTIyLjg3NCAyaDExLjcxMkwyMCAxNi41ODZWNC44NzRjMS40MDYtLjM2MiAyLjUxMi0xLjQ2OCAyLjg3NC0yLjg3NHptMTAuMjUyIDE4SDIwdjEzLjEyNmMuMzY3LjA5NC43MTQuMjQgMS4wMzIuNDI4bDEyLjUyMi0xMi41MjJjLS4xODgtLjMxOC0uMzM0LS42NjUtLjQyOC0xLjAzMnpNMzYgMjIuODc0VjM2SDIyLjg3NGMtLjA5NC0uMzY3LS4yNC0uNzE0LS40MjgtMS4wMzJsMTIuNTIyLTEyLjUyMmMuMzE4LjE4OC42NjUuMzM0IDEuMDMyLjQyOHptMC03Ljc0OFYzLjQxNEwyMS40MTQgMThoMTEuNzEyYy4zNjItMS40MDYgMS40NjgtMi41MTIgMi44NzQtMi44NzR6bS0xOCAxOFYyMS40MTRMMy40MTQgMzZoMTEuNzEyYy4zNjItMS40MDYgMS40NjgtMi41MTIgMi44NzQtMi44NzR6TTQuODc0IDIwaDExLjcxMkwyIDM0LjU4NlYyMi44NzRjMS40MDYtLjM2MiAyLjUxMi0xLjQ2OCAyLjg3NC0yLjg3NHonIGZpbGw9JyUyMzAwMDAwMCcgZmlsbC1vcGFjaXR5PScwLjEnIGZpbGwtcnVsZT0nZXZlbm9kZCcvJTNFJTNDL3N2ZyUzRVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl0sInNvdXJjZVJvb3QiOiIifQ== */"]
});
exports.GlobalLoadingComponent = GlobalLoadingComponent;

/***/ }),

/***/ 46926:
/*!***********************************************************!*\
  !*** ./libs/components/src/lib/help-tooltip.component.ts ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _taggedTemplateLiteral = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js */ 9959)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _HelpTooltipComponent, _templateObject;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.HelpTooltipComponent = void 0;
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var components_1 = __webpack_require__(/*! @placeos/components */ 51588);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @placeos/common */ 22797);
var i2 = __webpack_require__(/*! @angular/common */ 60316);
var i3 = __webpack_require__(/*! @angular/material/core */ 74646);
var i4 = __webpack_require__(/*! ./icon.component */ 69434);
function HelpTooltipComponent_a_6_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "a", 6)(1, "div", 7)(2, "div", 8);
    i0.ɵɵelement(3, "app-icon", 9);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(4, "div", 10);
    i0.ɵɵtext(5);
    i0.ɵɵelementEnd()()();
  }
  if (rf & 2) {
    var tile_r1 = ctx.$implicit;
    i0.ɵɵproperty("href", tile_r1.link, i0.ɵɵsanitizeUrl);
    i0.ɵɵadvance(3);
    i0.ɵɵproperty("icon", tile_r1.icon);
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate(tile_r1.name);
  }
}
var HelpTooltipComponent = /*#__PURE__*/function () {
  function HelpTooltipComponent(_data, _settings) {
    var _this = this;
    _classCallCheck(this, HelpTooltipComponent);
    this._data = _data;
    this._settings = _settings;
    this.close = function () {
      var _this$_data;
      (_this$_data = _this._data) === null || _this$_data === void 0 || _this$_data.close();
    };
  }
  return _createClass(HelpTooltipComponent, [{
    key: "tiles",
    get: /** Tiles to display on the help page */
    function get() {
      return this._settings.get('app.help') || [];
    }
  }]);
}();
_HelpTooltipComponent = HelpTooltipComponent;
_HelpTooltipComponent.ɵfac = function HelpTooltipComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _HelpTooltipComponent)(i0.ɵɵdirectiveInject(components_1.CustomTooltipData), i0.ɵɵdirectiveInject(i1.SettingsService));
};
_HelpTooltipComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _HelpTooltipComponent,
  selectors: [["help-tooltip"]],
  decls: 7,
  vars: 1,
  consts: function consts() {
    var i18n_0;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_7393197899734735120$$LIBS_COMPONENTS_SRC_LIB_HELP_TOOLTIP_COMPONENT_TS_0 = goog.getMsg("Help & Support");
      i18n_0 = MSG_EXTERNAL_7393197899734735120$$LIBS_COMPONENTS_SRC_LIB_HELP_TOOLTIP_COMPONENT_TS_0;
    } else {
      i18n_0 = $localize(_templateObject || (_templateObject = _taggedTemplateLiteral([":\u241F258586f2141d5b6c98ef28c38ac6f55a81a301b2\u241F7393197899734735120:Help & Support"])));
    }
    return [i18n_0, [1, "flex", "flex-col", "w-[18.5rem]", "rounded", "bg-base-100", "shadow", "relative", "-top-12", "-right-1", "divide-y", "divide-base-200", 3, "click"], [1, "flex", "items-center", "space-x-2", "p-2", "border-b"], [1, "text-2xl"], [1, ""], ["btn", "", "matRipple", "", "class", "clear w-full text-left h-auto", "target", "_blank", "ref", "noreferer noopener", 3, "href", 4, "ngFor", "ngForOf"], ["btn", "", "matRipple", "", "target", "_blank", "ref", "noreferer noopener", 1, "clear", "w-full", "text-left", "h-auto", 3, "href"], [1, "flex", "items-center", "space-x-2", "py-2", "w-full"], [1, "flex", "items-center", "justify-center", "rounded-full", "w-8", "h-8", "bg-base-200"], [1, "text-xl", 3, "icon"], [1, "flex-1"]];
  },
  template: function HelpTooltipComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵelementStart(0, "div", 1);
      i0.ɵɵlistener("click", function HelpTooltipComponent_Template_div_click_0_listener() {
        return ctx.close();
      });
      i0.ɵɵelementStart(1, "div", 2)(2, "app-icon", 3);
      i0.ɵɵtext(3, "arrow_back");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(4, "div", 4);
      i0.ɵɵi18n(5, 0);
      i0.ɵɵelementEnd()();
      i0.ɵɵtemplate(6, HelpTooltipComponent_a_6_Template, 6, 3, "a", 5);
      i0.ɵɵelementEnd();
    }
    if (rf & 2) {
      i0.ɵɵadvance(6);
      i0.ɵɵproperty("ngForOf", ctx.tiles);
    }
  },
  dependencies: [i2.NgForOf, i3.MatRipple, i4.IconComponent],
  styles: ["a[_ngcontent-%COMP%]:not(:last-child) {\n                border-bottom-width: 1px !important;\n                border-bottom-style: solid !important;\n                border-radius: 0;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImhlbHAtdG9vbHRpcC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLG1DQUFtQztnQkFDbkMscUNBQXFDO2dCQUNyQyxnQkFBZ0I7WUFDcEIiLCJmaWxlIjoiaGVscC10b29sdGlwLmNvbXBvbmVudC50cyIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgYTpub3QoOmxhc3QtY2hpbGQpIHtcbiAgICAgICAgICAgICAgICBib3JkZXItYm90dG9tLXdpZHRoOiAxcHggIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgICBib3JkZXItYm90dG9tLXN0eWxlOiBzb2xpZCAhaW1wb3J0YW50O1xuICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICJdfQ== */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvY29tcG9uZW50cy9zcmMvbGliL2hlbHAtdG9vbHRpcC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLG1DQUFtQztnQkFDbkMscUNBQXFDO2dCQUNyQyxnQkFBZ0I7WUFDcEI7O0FBRVosZ2tCQUFna0IiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIGE6bm90KDpsYXN0LWNoaWxkKSB7XG4gICAgICAgICAgICAgICAgYm9yZGVyLWJvdHRvbS13aWR0aDogMXB4ICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgICAgYm9yZGVyLWJvdHRvbS1zdHlsZTogc29saWQgIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAiXSwic291cmNlUm9vdCI6IiJ9 */"]
});
exports.HelpTooltipComponent = HelpTooltipComponent;

/***/ }),

/***/ 69434:
/*!***************************************************!*\
  !*** ./libs/components/src/lib/icon.component.ts ***!
  \***************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _IconComponent;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.IconComponent = void 0;
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @angular/common */ 60316);
var i2 = __webpack_require__(/*! ./safe.pipe */ 26781);
var _c0 = ["*"];
function IconComponent_i_1_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "i");
    i0.ɵɵtext(1);
    i0.ɵɵprojection(2);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r0 = i0.ɵɵnextContext();
    i0.ɵɵclassMap((ctx_r0.icon == null ? null : ctx_r0.icon["class"]) || ctx_r0.className);
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", ctx_r0.icon == null ? null : ctx_r0.icon.content, " ");
  }
}
function IconComponent_img_2_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelement(0, "img", 3);
    i0.ɵɵpipe(1, "safe");
  }
  if (rf & 2) {
    var ctx_r0 = i0.ɵɵnextContext();
    i0.ɵɵproperty("src", i0.ɵɵpipeBind2(1, 1, ctx_r0.icon.src, "resource"), i0.ɵɵsanitizeUrl);
  }
}
var IconComponent = /*#__PURE__*/_createClass(function IconComponent() {
  _classCallCheck(this, IconComponent);
  this.className = 'material-icons';
});
_IconComponent = IconComponent;
_IconComponent.ɵfac = function IconComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _IconComponent)();
};
_IconComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _IconComponent,
  selectors: [["app-icon"], ["icon"]],
  inputs: {
    className: "className",
    icon: "icon"
  },
  ngContentSelectors: _c0,
  decls: 3,
  vars: 2,
  consts: [[1, "flex", "items-center", "justify-center", "h-[1.25em]", "w-[1.25em]"], [3, "class", 4, "ngIf"], ["class", "h-[1em] w-[1em]", 3, "src", 4, "ngIf"], [1, "h-[1em]", "w-[1em]", 3, "src"]],
  template: function IconComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵprojectionDef();
      i0.ɵɵelementStart(0, "div", 0);
      i0.ɵɵtemplate(1, IconComponent_i_1_Template, 3, 3, "i", 1)(2, IconComponent_img_2_Template, 2, 4, "img", 2);
      i0.ɵɵelementEnd();
    }
    if (rf & 2) {
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", !ctx.icon || ctx.icon.type !== "img");
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", ctx.icon && ctx.icon.type === "img");
    }
  },
  dependencies: [i1.NgIf, i2.SafePipe],
  styles: ["i[_ngcontent-%COMP%] {\n                font-size: 1em;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImljb24uY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxjQUFjO1lBQ2xCIiwiZmlsZSI6Imljb24uY29tcG9uZW50LnRzIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICBpIHtcbiAgICAgICAgICAgICAgICBmb250LXNpemU6IDFlbTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl19 */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvY29tcG9uZW50cy9zcmMvbGliL2ljb24uY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxjQUFjO1lBQ2xCOztBQUVaLG9WQUFvViIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgaSB7XG4gICAgICAgICAgICAgICAgZm9udC1zaXplOiAxZW07XG4gICAgICAgICAgICB9XG4gICAgICAgICJdLCJzb3VyY2VSb290IjoiIn0= */"]
});
exports.IconComponent = IconComponent;

/***/ }),

/***/ 65277:
/*!*************************************************************!*\
  !*** ./libs/components/src/lib/image-carousel.component.ts ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _ImageCarouselComponent;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.ImageCarouselComponent = void 0;
var i0 = __webpack_require__(/*! @angular/core */ 37580);
function ImageCarouselComponent_div_1_img_1_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelement(0, "img", 8);
  }
  if (rf & 2) {
    var image_r1 = i0.ɵɵnextContext().$implicit;
    i0.ɵɵproperty("source", image_r1.url || image_r1);
  }
}
function ImageCarouselComponent_div_1_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 6);
    i0.ɵɵtemplate(1, ImageCarouselComponent_div_1_img_1_Template, 1, 1, "img", 7);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var image_r1 = ctx.$implicit;
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵstyleProp("transform", "translateX(-" + ctx_r1.offset * 100 + "%)");
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", image_r1);
  }
}
function ImageCarouselComponent_div_2_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 9)(1, "app-icon", 10);
    i0.ɵɵtext(2, "image_not_supported");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(3, "p");
    i0.ɵɵtext(4, "No images");
    i0.ɵɵelementEnd()();
  }
}
function ImageCarouselComponent_button_3_Template(rf, ctx) {
  if (rf & 1) {
    var _r3 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "button", 11);
    i0.ɵɵlistener("click", function ImageCarouselComponent_button_3_Template_button_click_0_listener() {
      i0.ɵɵrestoreView(_r3);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.offset = ctx_r1.offset - 1);
    });
    i0.ɵɵelementStart(1, "app-icon", 12);
    i0.ɵɵtext(2, "chevron_left");
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵproperty("disabled", ctx_r1.offset === 0);
  }
}
function ImageCarouselComponent_button_4_Template(rf, ctx) {
  if (rf & 1) {
    var _r4 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "button", 13);
    i0.ɵɵlistener("click", function ImageCarouselComponent_button_4_Template_button_click_0_listener() {
      i0.ɵɵrestoreView(_r4);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.offset = ctx_r1.offset + 1);
    });
    i0.ɵɵelementStart(1, "app-icon", 12);
    i0.ɵɵtext(2, "chevron_right");
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵproperty("disabled", ctx_r1.offset >= (ctx_r1.images == null ? null : ctx_r1.images.length) - 1);
  }
}
function ImageCarouselComponent_div_5_button_1_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelement(0, "button", 16);
  }
  if (rf & 2) {
    var i_r5 = ctx.index;
    var ctx_r1 = i0.ɵɵnextContext(2);
    i0.ɵɵclassProp("!bg-base-100", ctx_r1.offset === i_r5);
  }
}
function ImageCarouselComponent_div_5_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 14);
    i0.ɵɵtemplate(1, ImageCarouselComponent_div_5_button_1_Template, 1, 2, "button", 15);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngForOf", ctx_r1.images);
  }
}
var ImageCarouselComponent = /*#__PURE__*/_createClass(function ImageCarouselComponent() {
  _classCallCheck(this, ImageCarouselComponent);
  this.images = [];
  this.offset = 0;
});
_ImageCarouselComponent = ImageCarouselComponent;
_ImageCarouselComponent.ɵfac = function ImageCarouselComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _ImageCarouselComponent)();
};
_ImageCarouselComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _ImageCarouselComponent,
  selectors: [["image-carousel"]],
  inputs: {
    images: "images"
  },
  decls: 6,
  vars: 5,
  consts: [[1, "h-full", "w-full", "relative", "overflow-hidden", "flex"], ["image", "", "class", "h-full min-w-full relative flex items-center justify-center overflow-hidden", 3, "transform", 4, "ngFor", "ngForOf"], ["class", "h-full w-full relative flex flex-col items-center justify-center opacity-30 space-y-2", 4, "ngIf"], ["matRipple", "", "class", "opacity-0 hover:opacity-30 flex items-center justify-center absolute left-0 inset-y-0 w-1/3 bg-neutral text-white", 3, "disabled", "click", 4, "ngIf"], ["matRipple", "", "class", "opacity-0 hover:opacity-30 flex items-center justify-center absolute right-0 inset-y-0 w-1/3 bg-neutral text-white", 3, "disabled", "click", 4, "ngIf"], ["class", "absolute bottom-1 left-1/2 -translate-x-1/2 text-sm opacity-30 space-x-2", 4, "ngIf"], ["image", "", 1, "h-full", "min-w-full", "relative", "flex", "items-center", "justify-center", "overflow-hidden"], ["auth", "", "class", "h-full object-contain", 3, "source", 4, "ngIf"], ["auth", "", 1, "h-full", "object-contain", 3, "source"], [1, "h-full", "w-full", "relative", "flex", "flex-col", "items-center", "justify-center", "opacity-30", "space-y-2"], [1, "text-5xl"], ["matRipple", "", 1, "opacity-0", "hover:opacity-30", "flex", "items-center", "justify-center", "absolute", "left-0", "inset-y-0", "w-1/3", "bg-neutral", "text-white", 3, "click", "disabled"], [1, "text-4xl"], ["matRipple", "", 1, "opacity-0", "hover:opacity-30", "flex", "items-center", "justify-center", "absolute", "right-0", "inset-y-0", "w-1/3", "bg-neutral", "text-white", 3, "click", "disabled"], [1, "absolute", "bottom-1", "left-1/2", "-translate-x-1/2", "text-sm", "opacity-30", "space-x-2"], ["matRipple", "", "class", "h-4 w-4 rounded-full bg-base-300 shadow", 3, "!bg-base-100", 4, "ngFor", "ngForOf"], ["matRipple", "", 1, "h-4", "w-4", "rounded-full", "bg-base-300", "shadow"]],
  template: function ImageCarouselComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵelementStart(0, "div", 0);
      i0.ɵɵtemplate(1, ImageCarouselComponent_div_1_Template, 2, 3, "div", 1)(2, ImageCarouselComponent_div_2_Template, 5, 0, "div", 2)(3, ImageCarouselComponent_button_3_Template, 3, 1, "button", 3)(4, ImageCarouselComponent_button_4_Template, 3, 1, "button", 4)(5, ImageCarouselComponent_div_5_Template, 2, 1, "div", 5);
      i0.ɵɵelementEnd();
    }
    if (rf & 2) {
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngForOf", ctx.images);
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", !(ctx.images == null ? null : ctx.images.length));
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", ctx.images == null ? null : ctx.images.length);
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", ctx.images == null ? null : ctx.images.length);
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", ctx.images == null ? null : ctx.images.length);
    }
  },
  styles: ["[_nghost-%COMP%] {\n                display: block;\n                height: 100%;\n                width: 100%;\n            }\n\n            [image][_ngcontent-%COMP%] {\n                transition: transform 300ms;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImltYWdlLWNhcm91c2VsLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1lBQ1k7Z0JBQ0ksY0FBYztnQkFDZCxZQUFZO2dCQUNaLFdBQVc7WUFDZjs7WUFFQTtnQkFDSSwyQkFBMkI7WUFDL0IiLCJmaWxlIjoiaW1hZ2UtY2Fyb3VzZWwuY29tcG9uZW50LnRzIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICA6aG9zdCB7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBbaW1hZ2VdIHtcbiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uOiB0cmFuc2Zvcm0gMzAwbXM7XG4gICAgICAgICAgICB9XG4gICAgICAgICJdfQ== */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvY29tcG9uZW50cy9zcmMvbGliL2ltYWdlLWNhcm91c2VsLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1lBQ1k7Z0JBQ0ksY0FBYztnQkFDZCxZQUFZO2dCQUNaLFdBQVc7WUFDZjs7WUFFQTtnQkFDSSwyQkFBMkI7WUFDL0I7O0FBRVosd25CQUF3bkIiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIDpob3N0IHtcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIFtpbWFnZV0ge1xuICAgICAgICAgICAgICAgIHRyYW5zaXRpb246IHRyYW5zZm9ybSAzMDBtcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl0sInNvdXJjZVJvb3QiOiIifQ== */"]
});
exports.ImageCarouselComponent = ImageCarouselComponent;

/***/ }),

/***/ 26821:
/*!***********************************************************!*\
  !*** ./libs/components/src/lib/image-viewer.component.ts ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _ImageViewerComponent;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.ImageViewerComponent = void 0;
var dialog_1 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @angular/material/core */ 74646);
var i2 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var i3 = __webpack_require__(/*! ./icon.component */ 69434);
var ImageViewerComponent = /*#__PURE__*/_createClass(function ImageViewerComponent(url) {
  _classCallCheck(this, ImageViewerComponent);
  this.url = url;
});
_ImageViewerComponent = ImageViewerComponent;
_ImageViewerComponent.ɵfac = function ImageViewerComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _ImageViewerComponent)(i0.ɵɵdirectiveInject(dialog_1.MAT_DIALOG_DATA));
};
_ImageViewerComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _ImageViewerComponent,
  selectors: [["image-viewer"]],
  decls: 5,
  vars: 1,
  consts: [[1, "h-screen", "w-screen", "bg-base-200"], [1, "object-contain", "object-center", "w-full", "h-full", 3, "src"], ["icon", "", "matRipple", "", "mat-dialog-close", "", 1, "absolute", "top-1", "right-1", "bg-base-100"]],
  template: function ImageViewerComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵelementStart(0, "div", 0);
      i0.ɵɵelement(1, "img", 1);
      i0.ɵɵelementStart(2, "button", 2)(3, "app-icon");
      i0.ɵɵtext(4, "close");
      i0.ɵɵelementEnd()()();
    }
    if (rf & 2) {
      i0.ɵɵadvance();
      i0.ɵɵproperty("src", ctx.url, i0.ɵɵsanitizeUrl);
    }
  },
  dependencies: [i1.MatRipple, i2.MatDialogClose, i3.IconComponent]
});
exports.ImageViewerComponent = ImageViewerComponent;

/***/ }),

/***/ 92124:
/*!**********************************************************!*\
  !*** ./libs/components/src/lib/indoor-maps.component.ts ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _regeneratorRuntime = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/regeneratorRuntime.js */ 8698)["default"]);
var _asyncToGenerator = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/asyncToGenerator.js */ 95386)["default"]);
var _toConsumableArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/toConsumableArray.js */ 86033)["default"]);
var _slicedToArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/slicedToArray.js */ 6282)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _callSuper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/callSuper.js */ 8513)["default"]);
var _inherits = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/inherits.js */ 58160)["default"]);
var _IndoorMapsComponent;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.IndoorMapsComponent = void 0;
var core_1 = __webpack_require__(/*! @angular/core */ 37580);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var explore_state_service_1 = __webpack_require__(/*! ../../../explore/src/lib/explore-state.service */ 12455);
var organisation_1 = __webpack_require__(/*! @placeos/organisation */ 2510);
var rxjs_1 = __webpack_require__(/*! rxjs */ 15681);
var operators_1 = __webpack_require__(/*! rxjs/operators */ 97303);
var mapspeople_service_1 = __webpack_require__(/*! libs/common/src/lib/mapspeople.service */ 99420);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @placeos/common */ 22797);
var i2 = __webpack_require__(/*! ../../../explore/src/lib/explore-state.service */ 12455);
var i3 = __webpack_require__(/*! @placeos/organisation */ 2510);
var i4 = __webpack_require__(/*! @angular/common */ 60316);
var i5 = __webpack_require__(/*! @angular/material/form-field */ 24950);
var i6 = __webpack_require__(/*! @angular/material/core */ 74646);
var i7 = __webpack_require__(/*! @angular/material/input */ 95541);
var i8 = __webpack_require__(/*! @angular/material/progress-spinner */ 41134);
var i9 = __webpack_require__(/*! @angular/material/tooltip */ 80640);
var i10 = __webpack_require__(/*! ./icon.component */ 69434);
var i11 = __webpack_require__(/*! @ngx-translate/core */ 597);
var _c0 = ["searchInput"];
var _c1 = ["searchResultItems"];
function IndoorMapsComponent_div_1_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 11);
    i0.ɵɵelement(1, "mat-spinner", 12);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    i0.ɵɵadvance();
    i0.ɵɵproperty("diameter", 48);
  }
}
function IndoorMapsComponent_div_2_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 13);
    i0.ɵɵelement(1, "img", 14);
    i0.ɵɵelementStart(2, "p", 15);
    i0.ɵɵtext(3);
    i0.ɵɵpipe(4, "translate");
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance(3);
    i0.ɵɵtextInterpolate1(" ", i0.ɵɵpipeBind1(4, 1, ctx_r1.geolocation_error_message), " ");
  }
}
function IndoorMapsComponent_ng_container_11_li_8_Template(rf, ctx) {
  if (rf & 1) {
    var _r4 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "li", 21)(1, "button", 22);
    i0.ɵɵlistener("click", function IndoorMapsComponent_ng_container_11_li_8_Template_button_click_1_listener() {
      var item_r5 = i0.ɵɵrestoreView(_r4).$implicit;
      var ctx_r1 = i0.ɵɵnextContext(2);
      ctx_r1.getRoute(item_r5);
      return i0.ɵɵresetView(ctx_r1.search_result_items = []);
    });
    i0.ɵɵelementStart(2, "div", 23)(3, "div");
    i0.ɵɵtext(4);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(5, "div", 24);
    i0.ɵɵtext(6);
    i0.ɵɵelementEnd()()()();
  }
  if (rf & 2) {
    var item_r5 = ctx.$implicit;
    i0.ɵɵadvance(4);
    i0.ɵɵtextInterpolate(item_r5.properties.name);
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate2(" ", item_r5.properties.roomId, ", Level ", item_r5.properties.floorName, " ");
  }
}
function IndoorMapsComponent_ng_container_11_Template(rf, ctx) {
  if (rf & 1) {
    var _r3 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵelementStart(1, "div", 16)(2, "h3", 17);
    i0.ɵɵtext(3);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(4, "button", 18);
    i0.ɵɵlistener("click", function IndoorMapsComponent_ng_container_11_Template_button_click_4_listener() {
      i0.ɵɵrestoreView(_r3);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.search_result_items = []);
    });
    i0.ɵɵelementStart(5, "app-icon");
    i0.ɵɵtext(6, "close");
    i0.ɵɵelementEnd()()();
    i0.ɵɵelementStart(7, "ul", 19);
    i0.ɵɵtemplate(8, IndoorMapsComponent_ng_container_11_li_8_Template, 7, 3, "li", 20);
    i0.ɵɵpipe(9, "slice");
    i0.ɵɵelementEnd();
    i0.ɵɵelementContainerEnd();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance(3);
    i0.ɵɵtextInterpolate1(" Results (", ctx_r1.search_result_items.length || "0", ") ");
    i0.ɵɵadvance(5);
    i0.ɵɵproperty("ngForOf", i0.ɵɵpipeBind3(9, 2, ctx_r1.search_result_items, 0, 10));
  }
}
function calculateDistance(lat1, lon1, lat2, lon2) {
  var radius = 6371; // Earth's radius in kilometers
  var dLat = degreesToRadians(lat2 - lat1);
  var dLon = degreesToRadians(lon2 - lon1);
  lat1 = degreesToRadians(lat1);
  lat2 = degreesToRadians(lat2);
  var a = Math.sin(dLat / 2) * Math.sin(dLat / 2) + Math.sin(dLon / 2) * Math.sin(dLon / 2) * Math.cos(lat1) * Math.cos(lat2);
  var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
  return radius * c;
}
function degreesToRadians(degrees) {
  return degrees * (Math.PI / 180);
}
var IndoorMapsComponent = /*#__PURE__*/function (_common_1$AsyncHandle) {
  function IndoorMapsComponent(_api_service, _state, _org) {
    var _this;
    _classCallCheck(this, IndoorMapsComponent);
    _this = _callSuper(this, IndoorMapsComponent);
    _this._api_service = _api_service;
    _this._state = _state;
    _this._org = _org;
    /** Default zoom level for the map */
    _this.default_zoom = 19;
    _this.live_data_status = 'enabled';
    _this.search_result_items = [];
    _this.selected_destination = null;
    _this.actions_hashmap = {};
    _this.user_latitude = null;
    _this.user_longitude = null;
    _this.geolocation_error_message = '';
    _this.route_error_message = '';
    _this.coordinates = null;
    _this.buildings = _this._org.building_list;
    _this.building = _this._org.active_building;
    _this.setBuilding = function (b) {
      _this._org.building = b;
      _this._setLocationToBuilding();
    };
    _this.levels = (0, rxjs_1.combineLatest)([_this.building, _this._state.options]).pipe((0, operators_1.filter)(function (_ref) {
      var _ref2 = _slicedToArray(_ref, 1),
        _ = _ref2[0];
      return !!_;
    }), (0, operators_1.map)(function (_ref3) {
      var _ref4 = _slicedToArray(_ref3, 1),
        bld = _ref4[0];
      return [{
        id: _this._org.building.id,
        name: 'All Levels'
      }].concat(_toConsumableArray(_this._org.levelsForBuilding(bld)));
    }));
    _this.floor_mapping = {};
    return _this;
  }
  _inherits(IndoorMapsComponent, _common_1$AsyncHandle);
  return _createClass(IndoorMapsComponent, [{
    key: "ngOnInit",
    value: function () {
      var _ngOnInit = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
        var _this2 = this;
        var _get_location;
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              this.loading = true;
              _context.next = 3;
              return this._org.initialised.pipe((0, operators_1.first)(function (_) {
                return !!_;
              })).toPromise();
            case 3:
              this.setBuilding(this._org.building);
              if (this.custom_coordinates) this.coordinates = this.custom_coordinates;
              _get_location = function get_location() {
                _this2._getUserLocation();
                document.removeEventListener('click', _get_location);
              };
              document.addEventListener('click', _get_location);
              _context.next = 9;
              return this._initMapView();
            case 9:
            case "end":
              return _context.stop();
          }
        }, _callee, this);
      }));
      function ngOnInit() {
        return _ngOnInit.apply(this, arguments);
      }
      return ngOnInit;
    }()
  }, {
    key: "ngOnChanges",
    value: function () {
      var _ngOnChanges = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(change) {
        var _mapsindoors, searchParams, locations;
        return _regeneratorRuntime().wrap(function _callee2$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              if (!(change.styles || change.actions)) {
                _context2.next = 5;
                break;
              }
              _context2.next = 3;
              return this.renderSpaceStatus();
            case 3:
              _context2.next = 5;
              return this.mapActions();
            case 5:
              if (!(change.locate && this.locate && mapsindoors)) {
                _context2.next = 11;
                break;
              }
              searchParams = {
                q: this.searchElement.nativeElement.value
              };
              _context2.next = 9;
              return (_mapsindoors = mapsindoors) === null || _mapsindoors === void 0 ? void 0 : _mapsindoors.services.LocationsService.getLocations(searchParams);
            case 9:
              locations = _context2.sent;
              if (locations.length) this.getRoute(locations[0]);
            case 11:
              this.mapFloorsToIndex();
              this.loading = false;
            case 13:
            case "end":
              return _context2.stop();
          }
        }, _callee2, this);
      }));
      function ngOnChanges(_x) {
        return _ngOnChanges.apply(this, arguments);
      }
      return ngOnChanges;
    }()
  }, {
    key: "ngAfterViewInit",
    value: function ngAfterViewInit() {
      var _this$maps_service,
        _this3 = this;
      (_this$maps_service = this.maps_service) === null || _this$maps_service === void 0 || _this$maps_service.addListener('click', function (location, e) {
        var found_action = _this3.actions_hashmap[location.id];
        if (found_action) found_action.callback(e);
      });
    }
  }, {
    key: "_initMapView",
    value: function _initMapView() {
      var _this4 = this;
      if (!this._api_service.is_ready || !window.mapsindoors) {
        this.timeout('init', function () {
          return _this4._initMapView();
        }, 1000);
        return;
      }
      var view_options = {
        element: document.getElementById('maps-indoors'),
        center: {
          lat: this.user_latitude,
          lng: this.user_longitude
        },
        zoom: this.default_zoom || 19,
        maxZoom: 24
      };
      if (this._api_service.map_service === mapspeople_service_1.MapService.GoogleMaps) {
        (0, common_1.log)('MapsIndoors', 'Using Google Maps API');
        this.view_instance = new mapsindoors.mapView.GoogleMapsView(view_options);
      } else {
        view_options.accessToken = this._api_service.map_token;
        (0, common_1.log)('MapsIndoors', 'Using Mapbox API');
        this.view_instance = new mapsindoors.mapView.MapboxView(view_options);
      }
      if (!this.view_instance) {
        (0, common_1.log)('MapsIndoors', 'Failed to initialise map view instance.', undefined, 'warn');
        return;
      }
      this.maps_service = new mapsindoors.MapsIndoors({
        mapView: this.view_instance
      });
      this.map_instance = this.view_instance.getMap();
      this.initDirections();
      this.handleLocationChange();
      this.mapFloorsToIndex();
      this._setLocationToBuilding();
    }
  }, {
    key: "initDirections",
    value: function initDirections() {
      var provider = this._api_service.map_service === mapspeople_service_1.MapService.GoogleMaps ? new mapsindoors.directions.GoogleMapsProvider() : new mapsindoors.directions.MapboxProvider(this._api_service.map_token);
      this.directions_service = new mapsindoors.services.DirectionsService(provider);
      var directionsRendererOptions = {
        mapsIndoors: this.maps_service
      };
      this.directions_renderer = new mapsindoors.directions.DirectionsRenderer(directionsRendererOptions);
    }
  }, {
    key: "mapFloorsToIndex",
    value: function () {
      var _mapFloorsToIndex = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {
        var _this$maps_service2, _building$buildingInf, _this$maps_service3;
        var building, input_string, pairs, floor_index, level_id;
        return _regeneratorRuntime().wrap(function _callee3$(_context3) {
          while (1) switch (_context3.prev = _context3.next) {
            case 0:
              _context3.next = 2;
              return (_this$maps_service2 = this.maps_service) === null || _this$maps_service2 === void 0 ? void 0 : _this$maps_service2.getBuilding();
            case 2:
              building = _context3.sent;
              input_string = building === null || building === void 0 || (_building$buildingInf = building.buildingInfo) === null || _building$buildingInf === void 0 || (_building$buildingInf = _building$buildingInf.fields) === null || _building$buildingInf === void 0 || (_building$buildingInf = _building$buildingInf.floorMapping) === null || _building$buildingInf === void 0 ? void 0 : _building$buildingInf.value;
              pairs = input_string === null || input_string === void 0 ? void 0 : input_string.split(',\n').map(function (pair) {
                return pair.split(':');
              });
              this.floor_mapping = (pairs === null || pairs === void 0 ? void 0 : pairs.reduce(function (lvl_map, _ref5) {
                var _ref6 = _slicedToArray(_ref5, 2),
                  key = _ref6[0],
                  value = _ref6[1];
                lvl_map[key] = value;
                return lvl_map;
              }, {})) || {};
              _context3.next = 8;
              return (_this$maps_service3 = this.maps_service) === null || _this$maps_service3 === void 0 ? void 0 : _this$maps_service3.getFloor();
            case 8:
              floor_index = _context3.sent;
              if (floor_index && this.floor_mapping) {
                level_id = this.floor_mapping[floor_index];
                this._state.setLevel(level_id);
              }
            case 10:
            case "end":
              return _context3.stop();
          }
        }, _callee3, this);
      }));
      function mapFloorsToIndex() {
        return _mapFloorsToIndex.apply(this, arguments);
      }
      return mapFloorsToIndex;
    }()
  }, {
    key: "handleLocationChange",
    value: function handleLocationChange() {
      var _this$maps_service4,
        _this5 = this,
        _this$maps_service5;
      var floorSelectorElement = document.createElement('div');
      new mapsindoors.FloorSelector(floorSelectorElement, this.maps_service);
      if (this._api_service.map_service === mapspeople_service_1.MapService.GoogleMaps) {
        this.map_instance.controls[google.maps.ControlPosition.RIGHT_TOP].push(floorSelectorElement);
      } else {
        var instance = this.view_instance.getMap();
        instance.addControl({
          onAdd: function onAdd() {
            return floorSelectorElement;
          },
          onRemove: function onRemove() {}
        });
      }
      (_this$maps_service4 = this.maps_service) === null || _this$maps_service4 === void 0 || _this$maps_service4.addListener('building_changed', function (e) {
        var found_building = _this5._org.buildings.find(function (building) {
          var _e$buildingInfo;
          building.name.toLowerCase() === ((_e$buildingInfo = e.buildingInfo) === null || _e$buildingInfo === void 0 ? void 0 : _e$buildingInfo.name.toLowerCase());
          _this5.setBuilding(found_building);
        });
      });
      (_this$maps_service5 = this.maps_service) === null || _this$maps_service5 === void 0 || _this$maps_service5.addListener('floor_changed', function (e) {
        if (!e || !_this5.floor_mapping) return;
        var level_id = _this5.floor_mapping[e];
        _this5._state.setLevel(level_id);
      });
    }
  }, {
    key: "onSearch",
    value: function onSearch() {
      var _mapsindoors2,
        _this6 = this;
      var searchParams = {
        q: this.searchElement.nativeElement.value
      };
      (_mapsindoors2 = mapsindoors) === null || _mapsindoors2 === void 0 || _mapsindoors2.services.LocationsService.getLocations(searchParams).then(function (locations) {
        _this6.search_result_items = locations;
      });
    }
  }, {
    key: "_getUserLocation",
    value: function () {
      var _getUserLocation2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4() {
        var _this7 = this;
        var options;
        return _regeneratorRuntime().wrap(function _callee4$(_context4) {
          while (1) switch (_context4.prev = _context4.next) {
            case 0:
              if ('geolocation' in navigator) {
                _context4.next = 3;
                break;
              }
              (0, common_1.log)('MapsIndoors', "User's geolocation not available.", undefined, 'warn');
              return _context4.abrupt("return", this._setLocationToBuilding());
            case 3:
              if (!this.coordinates) {
                _context4.next = 9;
                break;
              }
              this.user_latitude = this.coordinates.latitude;
              this.user_longitude = this.coordinates.longitude;
              return _context4.abrupt("return");
            case 9:
              navigator.geolocation.watchPosition(function (_) {
                return _this7._updateGeolocation(_);
              }, function (_) {
                return _this7._handleGeolocationError(_);
              });
              options = {
                timeout: 10000,
                enableHighAccuracy: true
              };
              navigator.geolocation.getCurrentPosition(function (position) {
                if (!_this7._userWithinRadius([position.coords.latitude, position.coords.longitude])) {
                  // Only use geolocation if user is within 1km of building
                  return _this7._setLocationToBuilding();
                }
                _this7._updateGeolocation(position);
                _this7.map_instance.setCenter({
                  lat: position.coords.latitude,
                  lng: position.coords.longitude
                });
              }, function () {
                return _this7._setLocationToBuilding();
              }, options);
            case 12:
            case "end":
              return _context4.stop();
          }
        }, _callee4, this);
      }));
      function _getUserLocation() {
        return _getUserLocation2.apply(this, arguments);
      }
      return _getUserLocation;
    }()
  }, {
    key: "_userWithinRadius",
    value: function _userWithinRadius(_ref7) {
      var _this$_org$building;
      var _ref8 = _slicedToArray(_ref7, 2),
        d_lat = _ref8[0],
        d_long = _ref8[1];
      var radius = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;
      var _ref9 = ((_this$_org$building = this._org.building) === null || _this$_org$building === void 0 ? void 0 : _this$_org$building.location.split(',')) || [],
        _ref10 = _slicedToArray(_ref9, 2),
        lat_str = _ref10[0],
        long_str = _ref10[1];
      if (lat_str && long_str) {
        var lat = parseFloat(lat_str);
        var _long = parseFloat(long_str);
        var distance = calculateDistance(lat, _long, d_lat, d_long);
        if (distance >= radius) return false;
      }
      return true;
    }
  }, {
    key: "_setLocationToBuilding",
    value: function _setLocationToBuilding() {
      var _this$_org$building2, _this$_org$building3, _this$_org$building4, _this$_org$building5;
      (0, common_1.log)('MapsIndoors', 'Settings location to building:', [((_this$_org$building2 = this._org.building) === null || _this$_org$building2 === void 0 ? void 0 : _this$_org$building2.display_name) || ((_this$_org$building3 = this._org.building) === null || _this$_org$building3 === void 0 ? void 0 : _this$_org$building3.name), (_this$_org$building4 = this._org.building) === null || _this$_org$building4 === void 0 ? void 0 : _this$_org$building4.location]);
      var _this$_org$building$l = (_this$_org$building5 = this._org.building) === null || _this$_org$building5 === void 0 ? void 0 : _this$_org$building5.location.split(','),
        _this$_org$building$l2 = _slicedToArray(_this$_org$building$l, 2),
        lat = _this$_org$building$l2[0],
        _long2 = _this$_org$building$l2[1];
      if (!this.map_instance) return;
      this.map_instance.setCenter({
        lat: parseFloat(lat),
        lng: parseFloat(_long2)
      });
    }
  }, {
    key: "_updateGeolocation",
    value: function _updateGeolocation(updated_location) {
      if (!(updated_location !== null && updated_location !== void 0 && updated_location.coords)) return;
      (0, common_1.log)('MapsIndoors', 'Settings location to user:', updated_location.coords, 'warn');
      var _updated_location$coo = updated_location.coords,
        latitude = _updated_location$coo.latitude,
        longitude = _updated_location$coo.longitude;
      if (latitude !== this.user_latitude || longitude !== this.user_longitude) {
        this.user_latitude = latitude;
        this.user_longitude = longitude;
        this.getRoute(this.selected_destination);
      }
    }
  }, {
    key: "_handleGeolocationError",
    value: function _handleGeolocationError(error) {
      (0, common_1.notifyError)("Error retrieving your geolocation. [".concat(error.message, "]"));
    }
  }, {
    key: "getRoute",
    value: function () {
      var _getRoute = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee5(location) {
        var _this$maps_service6, _this$directions_rend;
        var destination, level_id, origin, routeParameters, result;
        return _regeneratorRuntime().wrap(function _callee5$(_context5) {
          while (1) switch (_context5.prev = _context5.next) {
            case 0:
              (_this$maps_service6 = this.maps_service) === null || _this$maps_service6 === void 0 || _this$maps_service6.highlight([]);
              if (!(!this.directions_service || !location)) {
                _context5.next = 3;
                break;
              }
              return _context5.abrupt("return");
            case 3:
              (0, common_1.log)('MapsIndoors', 'Getting route to location:', [location, this.user_latitude, this.user_longitude]);
              this.selected_destination = location;
              destination = {
                lat: location.properties.anchor.coordinates[1],
                lng: location.properties.anchor.coordinates[0],
                floor: location.properties.floor
              };
              level_id = (this.floor_mapping || {})[location.properties.floor];
              if (level_id) this._state.setLevel(level_id);
              if (this._userWithinRadius([this.user_latitude, this.user_longitude], 1000)) {
                _context5.next = 14;
                break;
              }
              this.map_instance.setZoom(19);
              this.map_instance.setCenter(destination);
              this.maps_service.setFloor(destination.floor);
              this.maps_service.highlight([location.id]);
              return _context5.abrupt("return");
            case 14:
              if (!(!this.user_latitude || !this.user_longitude)) {
                _context5.next = 16;
                break;
              }
              return _context5.abrupt("return", (0, common_1.notifyError)('Unable to find a route.'));
            case 16:
              origin = {
                lat: this.user_latitude,
                lng: this.user_longitude
              };
              routeParameters = {
                origin: origin,
                destination: destination
              };
              _context5.next = 20;
              return this.directions_service.getRoute(routeParameters)["catch"](function (e) {
                var _e$message;
                (0, common_1.log)('MapsIndoors', 'Error fetching route: ', e.message || e, 'warn');
                var origin_error = e instanceof TypeError && ((_e$message = e.message) === null || _e$message === void 0 ? void 0 : _e$message.includes('origin'));
                if (!origin_error) return;
                (0, common_1.notifyError)('Error: Origin location is outside of map area.');
              });
            case 20:
              result = _context5.sent;
              if (result) {
                _context5.next = 23;
                break;
              }
              return _context5.abrupt("return");
            case 23:
              (_this$directions_rend = this.directions_renderer) === null || _this$directions_rend === void 0 || _this$directions_rend.setRoute(result);
            case 24:
            case "end":
              return _context5.stop();
          }
        }, _callee5, this);
      }));
      function getRoute(_x2) {
        return _getRoute.apply(this, arguments);
      }
      return getRoute;
    }()
  }, {
    key: "renderSpaceStatus",
    value: function () {
      var _renderSpaceStatus = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee6() {
        var promises, key, colour, updated_key;
        return _regeneratorRuntime().wrap(function _callee6$(_context6) {
          while (1) switch (_context6.prev = _context6.next) {
            case 0:
              if (this.styles) {
                _context6.next = 2;
                break;
              }
              return _context6.abrupt("return");
            case 2:
              promises = [];
              for (key in this.styles) {
                colour = this.styles[key]['fill'];
                if (key) {
                  updated_key = key.substring(1);
                  promises.push(this._setPolygonFill(updated_key, colour));
                }
              }
              _context6.next = 6;
              return Promise.all(promises);
            case 6:
              return _context6.abrupt("return", _context6.sent);
            case 7:
            case "end":
              return _context6.stop();
          }
        }, _callee6, this);
      }));
      function renderSpaceStatus() {
        return _renderSpaceStatus.apply(this, arguments);
      }
      return renderSpaceStatus;
    }()
  }, {
    key: "mapActions",
    value: function () {
      var _mapActions = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee7() {
        var _this$actions;
        return _regeneratorRuntime().wrap(function _callee7$(_context7) {
          while (1) switch (_context7.prev = _context7.next) {
            case 0:
              return _context7.abrupt("return", (_this$actions = this.actions) === null || _this$actions === void 0 ? void 0 : _this$actions.reduce(function (accumulator, currentValue) {
                accumulator[currentValue.id] = currentValue;
                return accumulator;
              }, {}));
            case 1:
            case "end":
              return _context7.stop();
          }
        }, _callee7, this);
      }));
      function mapActions() {
        return _mapActions.apply(this, arguments);
      }
      return mapActions;
    }()
  }, {
    key: "_setPolygonFill",
    value: function _setPolygonFill(location_id, colour) {
      var _this$maps_service7;
      return (_this$maps_service7 = this.maps_service) === null || _this$maps_service7 === void 0 ? void 0 : _this$maps_service7.setDisplayRule(location_id, {
        polygonVisible: true,
        polygonFillOpacity: 0.6,
        polygonZoomFrom: 16,
        polygonZoomTo: 22,
        visible: true,
        polygonFillColor: colour
      });
    }
  }]);
}(common_1.AsyncHandler);
_IndoorMapsComponent = IndoorMapsComponent;
_IndoorMapsComponent.ɵfac = function IndoorMapsComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _IndoorMapsComponent)(i0.ɵɵdirectiveInject(i1.MapsPeopleService), i0.ɵɵdirectiveInject(i2.ExploreStateService), i0.ɵɵdirectiveInject(i3.OrganisationService));
};
_IndoorMapsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _IndoorMapsComponent,
  selectors: [["indoor-maps"]],
  viewQuery: function IndoorMapsComponent_Query(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵviewQuery(_c0, 7);
      i0.ɵɵviewQuery(_c1, 5);
    }
    if (rf & 2) {
      var _t;
      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.searchElement = _t.first);
      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.searchResults = _t.first);
    }
  },
  inputs: {
    styles: "styles",
    actions: "actions",
    custom_coordinates: "custom_coordinates",
    locate: "locate",
    default_zoom: "default_zoom"
  },
  features: [i0.ɵɵInheritDefinitionFeature, i0.ɵɵNgOnChangesFeature],
  decls: 12,
  vars: 3,
  consts: [["searchInput", ""], ["id", "maps-indoors", 1, "absolute", "inset-0", "flex", "items-center", "justify-center"], ["class", "absolute inset-0 flex items-center justify-center", 4, "ngIf"], ["class", "absolute inset-0 flex flex-col space-y-2 items-center justify-center", 4, "ngIf"], [1, "absolute", "flex", "flex-col", "h-min", "w-min", "top-2", "left-2", "bg-base-100", "text-base-content", "rounded-lg", "z-50", "p-2", "shadow"], ["appearance", "outline", 1, "map", "no-subscript"], ["matInput", "", "name", "location-search", "type", "text", "placeholder", "Search", 3, "keyup.enter"], ["matSuffix", "", 1, "h-10", "relative"], ["icon", "", "name", "indoor-map-search", "matRipple", "", "aria-label", "search button", "matTooltip", "Search...", 1, "hover:bg-base-200", 3, "click"], ["matPrefix", "", 1, "text-2xl", "relative"], [4, "ngIf"], [1, "absolute", "inset-0", "flex", "items-center", "justify-center"], [3, "diameter"], [1, "absolute", "inset-0", "flex", "flex-col", "space-y-2", "items-center", "justify-center"], ["src", "assets/icons/not-found.svg", "alt", "graphic of magnifying glass", "width", "200px", 1, "items-center"], [1, "opacity-60", "text-sm", "text-center", "mt-10"], [1, "flex", "items-center", "justify-between", "px-2", "my-2", "space-x-2"], [1, "font-medium", "text-lg"], ["icon", "", "matRipple", "", "matTooltip", "Clear Results", 1, "hover:bg-base-200", 3, "click"], [1, "list-none", "m-0", "p-0", "w-full", "space-y-2", "max-h-[65vh]", "overflow-auto"], ["class", "w-full even:bg-base-200 hover:bg-base-300 rounded border border-base-200", 4, "ngFor", "ngForOf"], [1, "w-full", "even:bg-base-200", "hover:bg-base-300", "rounded", "border", "border-base-200"], [1, "flex", "items-center", "w-full", "p-2", "space-x-2", "text-left", 3, "click"], [1, "flex", "flex-col", "flex-1"], [1, "opacity-30", "text-xs"]],
  template: function IndoorMapsComponent_Template(rf, ctx) {
    if (rf & 1) {
      var _r1 = i0.ɵɵgetCurrentView();
      i0.ɵɵelement(0, "div", 1);
      i0.ɵɵtemplate(1, IndoorMapsComponent_div_1_Template, 2, 1, "div", 2)(2, IndoorMapsComponent_div_2_Template, 5, 3, "div", 3);
      i0.ɵɵelementStart(3, "div", 4)(4, "mat-form-field", 5)(5, "input", 6, 0);
      i0.ɵɵlistener("keyup.enter", function IndoorMapsComponent_Template_input_keyup_enter_5_listener() {
        i0.ɵɵrestoreView(_r1);
        return i0.ɵɵresetView(ctx.onSearch());
      });
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(7, "div", 7)(8, "button", 8);
      i0.ɵɵlistener("click", function IndoorMapsComponent_Template_button_click_8_listener() {
        i0.ɵɵrestoreView(_r1);
        return i0.ɵɵresetView(ctx.onSearch());
      });
      i0.ɵɵelementStart(9, "app-icon", 9);
      i0.ɵɵtext(10, " search ");
      i0.ɵɵelementEnd()()()();
      i0.ɵɵtemplate(11, IndoorMapsComponent_ng_container_11_Template, 10, 6, "ng-container", 10);
      i0.ɵɵelementEnd();
    }
    if (rf & 2) {
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", ctx.loading);
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", ctx.geolocation_error_message);
      i0.ɵɵadvance(9);
      i0.ɵɵproperty("ngIf", ctx.search_result_items == null ? null : ctx.search_result_items.length);
    }
  },
  dependencies: [i4.NgForOf, i4.NgIf, i5.MatFormField, i5.MatPrefix, i5.MatSuffix, i6.MatRipple, i7.MatInput, i8.MatProgressSpinner, i9.MatTooltip, i10.IconComponent, i4.SlicePipe, i11.TranslatePipe],
  styles: ["[_nghost-%COMP%] {\n                height: 100%;\n                width: 100%;\n            }\n\n            mat-spinner[_ngcontent-%COMP%] {\n                top: 50%;\n                left: 50%;\n                transform: translate(-50%, -50%);\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZG9vci1tYXBzLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1lBQ1k7Z0JBQ0ksWUFBWTtnQkFDWixXQUFXO1lBQ2Y7O1lBRUE7Z0JBQ0ksUUFBUTtnQkFDUixTQUFTO2dCQUNULGdDQUFnQztZQUNwQyIsImZpbGUiOiJpbmRvb3ItbWFwcy5jb21wb25lbnQudHMiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIDpob3N0IHtcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIG1hdC1zcGlubmVyIHtcbiAgICAgICAgICAgICAgICB0b3A6IDUwJTtcbiAgICAgICAgICAgICAgICBsZWZ0OiA1MCU7XG4gICAgICAgICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwgLTUwJSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICJdfQ== */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvY29tcG9uZW50cy9zcmMvbGliL2luZG9vci1tYXBzLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1lBQ1k7Z0JBQ0ksWUFBWTtnQkFDWixXQUFXO1lBQ2Y7O1lBRUE7Z0JBQ0ksUUFBUTtnQkFDUixTQUFTO2dCQUNULGdDQUFnQztZQUNwQzs7QUFFWix3cUJBQXdxQiIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgOmhvc3Qge1xuICAgICAgICAgICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbWF0LXNwaW5uZXIge1xuICAgICAgICAgICAgICAgIHRvcDogNTAlO1xuICAgICAgICAgICAgICAgIGxlZnQ6IDUwJTtcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLCAtNTAlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl0sInNvdXJjZVJvb3QiOiIifQ== */"]
});
exports.IndoorMapsComponent = IndoorMapsComponent;

/***/ }),

/***/ 24918:
/*!**************************************************************!*\
  !*** ./libs/components/src/lib/interactive-map.component.ts ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _callSuper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/callSuper.js */ 8513)["default"]);
var _inherits = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/inherits.js */ 58160)["default"]);
var _InteractiveMapComponent;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.InteractiveMapComponent = exports.MAP_FEATURE_DATA = void 0;
var core_1 = __webpack_require__(/*! @angular/core */ 37580);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var organisation_1 = __webpack_require__(/*! @placeos/organisation */ 2510);
var explore_state_service_1 = __webpack_require__(/*! libs/explore/src/lib/explore-state.service */ 12455);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @placeos/common */ 22797);
var i2 = __webpack_require__(/*! @placeos/organisation */ 2510);
var i3 = __webpack_require__(/*! libs/explore/src/lib/explore-state.service */ 12455);
var _c0 = ["*", "*"];
function InteractiveMapComponent_ng_container_0_Template(rf, ctx) {
  if (rf & 1) {
    var _r1 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵelementStart(1, "map-renderer", 3);
    i0.ɵɵtwoWayListener("zoomChange", function InteractiveMapComponent_ng_container_0_Template_map_renderer_zoomChange_1_listener($event) {
      i0.ɵɵrestoreView(_r1);
      var ctx_r1 = i0.ɵɵnextContext();
      i0.ɵɵtwoWayBindingSet(ctx_r1.zoom, $event) || (ctx_r1.zoom = $event);
      return i0.ɵɵresetView($event);
    });
    i0.ɵɵlistener("zoomChange", function InteractiveMapComponent_ng_container_0_Template_map_renderer_zoomChange_1_listener($event) {
      i0.ɵɵrestoreView(_r1);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.zoomChange.next($event));
    })("mapInfo", function InteractiveMapComponent_ng_container_0_Template_map_renderer_mapInfo_1_listener($event) {
      i0.ɵɵrestoreView(_r1);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.mapInfo.next($event));
    });
    i0.ɵɵprojection(2);
    i0.ɵɵelementEnd();
    i0.ɵɵelementContainerEnd();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance();
    i0.ɵɵproperty("src", ctx_r1.src);
    i0.ɵɵtwoWayProperty("zoom", ctx_r1.zoom);
    i0.ɵɵproperty("reset", ctx_r1.reset)("styles", ctx_r1.styles || (ctx_r1.metadata == null ? null : ctx_r1.metadata.styles))("features", ctx_r1.features || (ctx_r1.metadata == null ? null : ctx_r1.metadata.features))("actions", ctx_r1.actions || (ctx_r1.metadata == null ? null : ctx_r1.metadata.actions))("labels", ctx_r1.labels || (ctx_r1.metadata == null ? null : ctx_r1.metadata.labels));
  }
}
function InteractiveMapComponent_ng_template_2_Template(rf, ctx) {
  if (rf & 1) {
    var _r3 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "maps-indoors", 4);
    i0.ɵɵlistener("zoneChange", function InteractiveMapComponent_ng_template_2_Template_maps_indoors_zoneChange_0_listener($event) {
      i0.ɵɵrestoreView(_r3);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.onLevelChange($event));
    });
    i0.ɵɵtwoWayListener("zoomChange", function InteractiveMapComponent_ng_template_2_Template_maps_indoors_zoomChange_0_listener($event) {
      i0.ɵɵrestoreView(_r3);
      var ctx_r1 = i0.ɵɵnextContext();
      i0.ɵɵtwoWayBindingSet(ctx_r1.zoom, $event) || (ctx_r1.zoom = $event);
      return i0.ɵɵresetView($event);
    });
    i0.ɵɵlistener("zoomChange", function InteractiveMapComponent_ng_template_2_Template_maps_indoors_zoomChange_0_listener($event) {
      i0.ɵɵrestoreView(_r3);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.zoomChange.next($event));
    });
    i0.ɵɵprojection(1, 1);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵproperty("zone", ctx_r1.location);
    i0.ɵɵtwoWayProperty("zoom", ctx_r1.zoom);
    i0.ɵɵproperty("options", ctx_r1.options)("reset", ctx_r1.reset)("focus", ctx_r1.focus)("metadata", ctx_r1.metadata);
  }
}
function InteractiveMapComponent_div_4_Template(rf, ctx) {
  if (rf & 1) {
    var _r4 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 5)(1, "button", 6);
    i0.ɵɵlistener("click", function InteractiveMapComponent_div_4_Template_button_click_1_listener() {
      i0.ɵɵrestoreView(_r4);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.zoom = ctx_r1.zoom * 1.1);
    });
    i0.ɵɵelementStart(2, "app-icon");
    i0.ɵɵtext(3, "add");
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(4, "button", 7);
    i0.ɵɵlistener("click", function InteractiveMapComponent_div_4_Template_button_click_4_listener() {
      i0.ɵɵrestoreView(_r4);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.zoom = ctx_r1.zoom * (10 / 11));
    });
    i0.ɵɵelementStart(5, "app-icon");
    i0.ɵɵtext(6, "remove");
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(7, "button", 8);
    i0.ɵɵlistener("click", function InteractiveMapComponent_div_4_Template_button_click_7_listener() {
      i0.ɵɵrestoreView(_r4);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.reset = ctx_r1.reset + 1);
    });
    i0.ɵɵelementStart(8, "app-icon");
    i0.ɵɵtext(9, "refresh");
    i0.ɵɵelementEnd()()();
  }
}
exports.MAP_FEATURE_DATA = new core_1.InjectionToken('Data for Map Features');
var InteractiveMapComponent = /*#__PURE__*/function (_common_1$AsyncHandle) {
  function InteractiveMapComponent(_mapspeople, _org, _explore) {
    var _this;
    _classCallCheck(this, InteractiveMapComponent);
    _this = _callSuper(this, InteractiveMapComponent);
    _this._mapspeople = _mapspeople;
    _this._org = _org;
    _this._explore = _explore;
    _this.zoom = 1;
    _this.center = {
      x: 0.5,
      y: 0.5
    };
    _this.reset = 0;
    _this.metadata = {};
    _this.options = {};
    _this.zoomChange = new core_1.EventEmitter();
    _this.centerChange = new core_1.EventEmitter();
    _this.mapInfo = new core_1.EventEmitter();
    _this.use_mapsindoors$ = _this._mapspeople.available$;
    return _this;
  }
  _inherits(InteractiveMapComponent, _common_1$AsyncHandle);
  return _createClass(InteractiveMapComponent, [{
    key: "location",
    get: function get() {
      var _this2 = this;
      return this._org.levels.find(function (_) {
        return _.map_id === _this2.src;
      });
    }
  }, {
    key: "ngOnChanges",
    value: function ngOnChanges(changes) {
      if (changes.actions || changes.labels || changes.styles || changes.features) {
        this.metadata = {
          actions: this.actions || [],
          labels: this.labels || [],
          styles: this.styles || {},
          features: this.features || []
        };
      }
    }
  }, {
    key: "onLevelChange",
    value: function onLevelChange(zone) {
      (0, common_1.log)('Map', 'Level changed to:', (zone === null || zone === void 0 ? void 0 : zone.display_name) || (zone === null || zone === void 0 ? void 0 : zone.name) || zone);
      this._explore.setLevel(zone.id);
    }
  }]);
}(common_1.AsyncHandler);
_InteractiveMapComponent = InteractiveMapComponent;
_InteractiveMapComponent.ɵfac = function InteractiveMapComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _InteractiveMapComponent)(i0.ɵɵdirectiveInject(i1.MapsPeopleService), i0.ɵɵdirectiveInject(i2.OrganisationService), i0.ɵɵdirectiveInject(i3.ExploreStateService));
};
_InteractiveMapComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _InteractiveMapComponent,
  selectors: [["interactive-map"]],
  inputs: {
    src: "src",
    zoom: "zoom",
    center: "center",
    reset: "reset",
    metadata: "metadata",
    styles: "styles",
    features: "features",
    labels: "labels",
    actions: "actions",
    options: "options",
    focus: "focus"
  },
  outputs: {
    zoomChange: "zoomChange",
    centerChange: "centerChange",
    mapInfo: "mapInfo"
  },
  features: [i0.ɵɵInheritDefinitionFeature, i0.ɵɵNgOnChangesFeature],
  ngContentSelectors: _c0,
  decls: 5,
  vars: 5,
  consts: [["mapsindoors_template", ""], [4, "ngIf", "ngIfElse"], ["zoom", "", "class", "absolute bottom-16 right-1 border border-base-200 divide-y divide-base-200 shadow flex flex-col bg-base-100 text-base-content rounded overflow-hidden", 4, "ngIf"], [3, "zoomChange", "mapInfo", "src", "zoom", "reset", "styles", "features", "actions", "labels"], [3, "zoneChange", "zoomChange", "zone", "zoom", "options", "reset", "focus", "metadata"], ["zoom", "", 1, "absolute", "bottom-16", "right-1", "border", "border-base-200", "divide-y", "divide-base-200", "shadow", "flex", "flex-col", "bg-base-100", "text-base-content", "rounded", "overflow-hidden"], ["icon", "", "matRipple", "", "matTooltip", "Zoom In", "matTooltipPosition", "left", 1, "rounded-none", 3, "click"], ["icon", "", "matRipple", "", "matTooltip", "Zoom Out", "matTooltipPosition", "left", 1, "rounded-none", 3, "click"], ["icon", "", "matRipple", "", "matTooltip", "Reset Zoom and Position", "matTooltipPosition", "left", 1, "rounded-none", 3, "click"]],
  template: function InteractiveMapComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵprojectionDef(_c0);
      i0.ɵɵtemplate(0, InteractiveMapComponent_ng_container_0_Template, 3, 7, "ng-container", 1);
      i0.ɵɵpipe(1, "async");
      i0.ɵɵtemplate(2, InteractiveMapComponent_ng_template_2_Template, 2, 6, "ng-template", null, 0, i0.ɵɵtemplateRefExtractor)(4, InteractiveMapComponent_div_4_Template, 10, 0, "div", 2);
    }
    if (rf & 2) {
      var mapsindoors_template_r5 = i0.ɵɵreference(3);
      i0.ɵɵproperty("ngIf", !i0.ɵɵpipeBind1(1, 3, ctx.use_mapsindoors$))("ngIfElse", mapsindoors_template_r5);
      i0.ɵɵadvance(4);
      i0.ɵɵproperty("ngIf", ctx.options == null ? null : ctx.options.controls);
    }
  }
});
exports.InteractiveMapComponent = InteractiveMapComponent;

/***/ }),

/***/ 12354:
/*!***********************************************************!*\
  !*** ./libs/components/src/lib/json-display.component.ts ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _JsonDisplayComponent;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.JsonDisplayComponent = void 0;
var core_1 = __webpack_require__(/*! @angular/core */ 37580);
var custom_tooltip_component_1 = __webpack_require__(/*! ./custom-tooltip.component */ 22238);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! ./custom-tooltip.component */ 22238);
var JsonDisplayComponent = /*#__PURE__*/function () {
  function JsonDisplayComponent(_data) {
    _classCallCheck(this, JsonDisplayComponent);
    this.json = (_data === null || _data === void 0 ? void 0 : _data.data) || '';
    this._updateFormatting();
  }
  return _createClass(JsonDisplayComponent, [{
    key: "ngOnChanges",
    value: function ngOnChanges(changes) {
      if (changes.json) {
        this._updateFormatting();
      }
    }
  }, {
    key: "_updateFormatting",
    value: function _updateFormatting() {
      this.formatted_json = JSON.stringify(this.json, undefined, 4);
    }
  }]);
}();
_JsonDisplayComponent = JsonDisplayComponent;
_JsonDisplayComponent.ɵfac = function JsonDisplayComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _JsonDisplayComponent)(i0.ɵɵdirectiveInject(i1.CustomTooltipData, 8));
};
_JsonDisplayComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _JsonDisplayComponent,
  selectors: [["json-display"]],
  inputs: {
    json: "json"
  },
  features: [i0.ɵɵNgOnChangesFeature],
  decls: 3,
  vars: 1,
  consts: [[1, "bg-base-100", "shadow", "rounded", "overflow-auto", "max-w-[80vw]", "max-h-[80vh]", "p-2", "border", "border-base-300"], [1, "font-mono", "text-sm", "bg-base-200", "p-2", "rounded", "break-all", "w-full"]],
  template: function JsonDisplayComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵelementStart(0, "div", 0)(1, "pre", 1);
      i0.ɵɵtext(2);
      i0.ɵɵelementEnd()();
    }
    if (rf & 2) {
      i0.ɵɵadvance(2);
      i0.ɵɵtextInterpolate(ctx.formatted_json);
    }
  },
  styles: ["pre[_ngcontent-%COMP%] {\n                white-space: pre-wrap; \n\n                white-space: -moz-pre-wrap; \n\n                white-space: -pre-wrap; \n\n                white-space: -o-pre-wrap; \n\n                word-wrap: break-word; \n\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpzb24tZGlzcGxheS5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLHFCQUFxQixFQUFFLGtCQUFrQjtnQkFDekMsMEJBQTBCLEVBQUUsd0JBQXdCO2dCQUNwRCxzQkFBc0IsRUFBRSxjQUFjO2dCQUN0Qyx3QkFBd0IsRUFBRSxZQUFZO2dCQUN0QyxxQkFBcUIsRUFBRSwyQkFBMkI7WUFDdEQiLCJmaWxlIjoianNvbi1kaXNwbGF5LmNvbXBvbmVudC50cyIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgcHJlIHtcbiAgICAgICAgICAgICAgICB3aGl0ZS1zcGFjZTogcHJlLXdyYXA7IC8qIFNpbmNlIENTUyAyLjEgKi9cbiAgICAgICAgICAgICAgICB3aGl0ZS1zcGFjZTogLW1vei1wcmUtd3JhcDsgLyogTW96aWxsYSwgc2luY2UgMTk5OSAqL1xuICAgICAgICAgICAgICAgIHdoaXRlLXNwYWNlOiAtcHJlLXdyYXA7IC8qIE9wZXJhIDQtNiAqL1xuICAgICAgICAgICAgICAgIHdoaXRlLXNwYWNlOiAtby1wcmUtd3JhcDsgLyogT3BlcmEgNyAqL1xuICAgICAgICAgICAgICAgIHdvcmQtd3JhcDogYnJlYWstd29yZDsgLyogSW50ZXJuZXQgRXhwbG9yZXIgNS41KyAqL1xuICAgICAgICAgICAgfVxuICAgICAgICAiXX0= */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvY29tcG9uZW50cy9zcmMvbGliL2pzb24tZGlzcGxheS5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLHFCQUFxQixFQUFFLGtCQUFrQjtnQkFDekMsMEJBQTBCLEVBQUUsd0JBQXdCO2dCQUNwRCxzQkFBc0IsRUFBRSxjQUFjO2dCQUN0Qyx3QkFBd0IsRUFBRSxZQUFZO2dCQUN0QyxxQkFBcUIsRUFBRSwyQkFBMkI7WUFDdEQ7O0FBRVosNDNCQUE0M0IiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIHByZSB7XG4gICAgICAgICAgICAgICAgd2hpdGUtc3BhY2U6IHByZS13cmFwOyAvKiBTaW5jZSBDU1MgMi4xICovXG4gICAgICAgICAgICAgICAgd2hpdGUtc3BhY2U6IC1tb3otcHJlLXdyYXA7IC8qIE1vemlsbGEsIHNpbmNlIDE5OTkgKi9cbiAgICAgICAgICAgICAgICB3aGl0ZS1zcGFjZTogLXByZS13cmFwOyAvKiBPcGVyYSA0LTYgKi9cbiAgICAgICAgICAgICAgICB3aGl0ZS1zcGFjZTogLW8tcHJlLXdyYXA7IC8qIE9wZXJhIDcgKi9cbiAgICAgICAgICAgICAgICB3b3JkLXdyYXA6IGJyZWFrLXdvcmQ7IC8qIEludGVybmV0IEV4cGxvcmVyIDUuNSsgKi9cbiAgICAgICAgICAgIH1cbiAgICAgICAgIl0sInNvdXJjZVJvb3QiOiIifQ== */"]
});
exports.JsonDisplayComponent = JsonDisplayComponent;

/***/ }),

/***/ 53835:
/*!***************************************************************!*\
  !*** ./libs/components/src/lib/language-tooltip.component.ts ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _LanguageSelectComponent;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.LanguageSelectComponent = void 0;
var core_1 = __webpack_require__(/*! @ngx-translate/core */ 597);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var components_1 = __webpack_require__(/*! @placeos/components */ 51588);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @placeos/common */ 22797);
var i2 = __webpack_require__(/*! @ngx-translate/core */ 597);
var i3 = __webpack_require__(/*! @angular/common */ 60316);
var i4 = __webpack_require__(/*! ./icon.component */ 69434);
function LanguageSelectComponent_button_10_Template(rf, ctx) {
  if (rf & 1) {
    var _r1 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "button", 6);
    i0.ɵɵlistener("click", function LanguageSelectComponent_button_10_Template_button_click_0_listener() {
      var lang_r2 = i0.ɵɵrestoreView(_r1).$implicit;
      var ctx_r2 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r2.setLocale(lang_r2.id));
    });
    i0.ɵɵtext(1);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var lang_r2 = ctx.$implicit;
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate2(" ", lang_r2.name, " - ", lang_r2.flag, " ");
  }
}
var LanguageSelectComponent = /*#__PURE__*/function () {
  function LanguageSelectComponent(_data, _settings, _translation) {
    var _this = this;
    _classCallCheck(this, LanguageSelectComponent);
    this._data = _data;
    this._settings = _settings;
    this._translation = _translation;
    this.setLocale = function (code) {
      _this._translation.use(code);
      localStorage.setItem('PLACEOS.locale', code);
    };
    this.close = function () {
      var _this$_data;
      return (_this$_data = _this._data) === null || _this$_data === void 0 ? void 0 : _this$_data.close();
    };
  }
  return _createClass(LanguageSelectComponent, [{
    key: "locales",
    get: function get() {
      return this._settings.get('app.locales') || [];
    }
  }]);
}();
_LanguageSelectComponent = LanguageSelectComponent;
_LanguageSelectComponent.ɵfac = function LanguageSelectComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _LanguageSelectComponent)(i0.ɵɵdirectiveInject(components_1.CustomTooltipData), i0.ɵɵdirectiveInject(i1.SettingsService), i0.ɵɵdirectiveInject(i2.TranslateService));
};
_LanguageSelectComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _LanguageSelectComponent,
  selectors: [["language-select"]],
  decls: 11,
  vars: 7,
  consts: [[1, "flex", "flex-col", "w-[18.5rem]", "rounded", "bg-base-100", "shadow", "relative", "-top-12", "-right-1", 3, "click"], [1, "flex", "items-center", "space-x-2", "p-2"], [1, "text-2xl"], [1, ""], [1, "text-xs", "opacity-60", "mb-4", "px-2", "p-4"], ["class", "w-full p-4 border-t border-base-200 text-left", 3, "click", 4, "ngFor", "ngForOf"], [1, "w-full", "p-4", "border-t", "border-base-200", "text-left", 3, "click"]],
  template: function LanguageSelectComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵelementStart(0, "div", 0);
      i0.ɵɵlistener("click", function LanguageSelectComponent_Template_div_click_0_listener() {
        return ctx.close();
      });
      i0.ɵɵelementStart(1, "div", 1)(2, "app-icon", 2);
      i0.ɵɵtext(3, "arrow_back");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(4, "div", 3);
      i0.ɵɵtext(5);
      i0.ɵɵpipe(6, "translate");
      i0.ɵɵelementEnd()();
      i0.ɵɵelementStart(7, "div", 4);
      i0.ɵɵtext(8);
      i0.ɵɵpipe(9, "translate");
      i0.ɵɵelementEnd();
      i0.ɵɵtemplate(10, LanguageSelectComponent_button_10_Template, 2, 2, "button", 5);
      i0.ɵɵelementEnd();
    }
    if (rf & 2) {
      i0.ɵɵadvance(5);
      i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(6, 3, "COMMON.LANGUAGE"));
      i0.ɵɵadvance(3);
      i0.ɵɵtextInterpolate1(" ", i0.ɵɵpipeBind1(9, 5, "COMMON.LANGUAGE_SELECT"), " ");
      i0.ɵɵadvance(2);
      i0.ɵɵproperty("ngForOf", ctx.locales);
    }
  },
  dependencies: [i3.NgForOf, i4.IconComponent, i2.TranslatePipe]
});
exports.LanguageSelectComponent = LanguageSelectComponent;

/***/ }),

/***/ 23666:
/*!***********************************************!*\
  !*** ./libs/components/src/lib/level.pipe.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _LevelPipe;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.LevelPipe = void 0;
var organisation_1 = __webpack_require__(/*! @placeos/organisation */ 2510);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @placeos/organisation */ 2510);
var LevelPipe = /*#__PURE__*/function () {
  function LevelPipe(_org) {
    _classCallCheck(this, LevelPipe);
    this._org = _org;
  }
  return _createClass(LevelPipe, [{
    key: "transform",
    value: function transform(id) {
      return this._org.levelWithID(id instanceof Array ? id : [id]);
    }
  }]);
}();
_LevelPipe = LevelPipe;
_LevelPipe.ɵfac = function LevelPipe_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _LevelPipe)(i0.ɵɵdirectiveInject(i1.OrganisationService, 16));
};
_LevelPipe.ɵpipe = /*@__PURE__*/i0.ɵɵdefinePipe({
  name: "level",
  type: _LevelPipe,
  pure: true
});
exports.LevelPipe = LevelPipe;

/***/ }),

/***/ 62897:
/*!**********************************************************!*\
  !*** ./libs/components/src/lib/limit-input.directive.ts ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _LimitInputDirective;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.LimitInputDirective = void 0;
var core_1 = __webpack_require__(/*! @angular/core */ 37580);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var ALLOWED_NUMBERS = '0123456789'.split('');
var ALLOWED_DECIMALS = '0123456789.'.split('');
var ALLOWED_LETTERS = 'abcdefghijklmnopqrstuvwxyz'.split('');
var ALLOWED_ALPHANUMERIC = 'abcdefghijklmnopqrstuvwxyz0123456789'.split('');
var LimitInputDirective = /*#__PURE__*/function () {
  function LimitInputDirective(_el) {
    _classCallCheck(this, LimitInputDirective);
    this._el = _el;
    this.restriction = 'decimals';
    this.custom_list = [];
  }
  return _createClass(LimitInputDirective, [{
    key: "onKeyDown",
    value: function onKeyDown(event) {
      var e = event;
      var key = e.key;
      if (['ArrowLeft', 'ArrowRight', 'Tab', 'Backspace', 'Home'].indexOf(key) !== -1 ||
      // Allow: Ctrl+A
      e.key === 'a' && (e.ctrlKey || e.metaKey) ||
      // Allow: Ctrl+C
      e.key === 'c' && (e.ctrlKey || e.metaKey) ||
      // Allow: Ctrl+V
      e.key === 'v' && (e.ctrlKey || e.metaKey) ||
      // Allow: Ctrl+X
      e.key === 'x' && (e.ctrlKey || e.metaKey)) {
        // let it happen, don't do anything
        return;
      }
      switch (this.restriction) {
        case 'letters':
          if (ALLOWED_LETTERS.indexOf(key) === -1) {
            e.preventDefault();
          }
          break;
        case 'alphanumeric':
          if (ALLOWED_ALPHANUMERIC.indexOf(key) === -1) {
            e.preventDefault();
          }
          break;
        case 'custom':
          if (this.custom_list.indexOf(key) === -1) {
            e.preventDefault();
          }
          break;
        case 'decimals':
          if (ALLOWED_DECIMALS.indexOf(key) === -1) {
            e.preventDefault();
          }
          break;
        case 'number':
        default:
          if (ALLOWED_NUMBERS.indexOf(key) === -1) {
            e.preventDefault();
          }
          break;
      }
    }
  }]);
}();
_LimitInputDirective = LimitInputDirective;
_LimitInputDirective.ɵfac = function LimitInputDirective_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _LimitInputDirective)(i0.ɵɵdirectiveInject(i0.ElementRef));
};
_LimitInputDirective.ɵdir = /*@__PURE__*/i0.ɵɵdefineDirective({
  type: _LimitInputDirective,
  selectors: [["", "limitInput", ""]],
  hostBindings: function LimitInputDirective_HostBindings(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵlistener("keydown", function LimitInputDirective_keydown_HostBindingHandler($event) {
        return ctx.onKeyDown($event);
      });
    }
  },
  inputs: {
    restriction: "restriction",
    custom_list: "custom_list"
  }
});
exports.LimitInputDirective = LimitInputDirective;

/***/ }),

/***/ 69024:
/*!****************************************************!*\
  !*** ./libs/components/src/lib/login.component.ts ***!
  \****************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _regeneratorRuntime = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/regeneratorRuntime.js */ 8698)["default"]);
var _asyncToGenerator = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/asyncToGenerator.js */ 95386)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _LoginComponent;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.LoginComponent = void 0;
var core_1 = __webpack_require__(/*! @angular/core */ 37580);
var forms_1 = __webpack_require__(/*! @angular/forms */ 34456);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var operators_1 = __webpack_require__(/*! rxjs/operators */ 97303);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @placeos/common */ 22797);
var _c0 = ["pass_field"];
function LoginComponent_i_3_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "i");
    i0.ɵɵtext(1);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r0 = i0.ɵɵnextContext();
    i0.ɵɵclassMap(ctx_r0.logo["class"]);
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", ctx_r0.logo.content, " ");
  }
}
function LoginComponent_img_4_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelement(0, "img", 11);
    i0.ɵɵpipe(1, "safe");
  }
  if (rf & 2) {
    var ctx_r0 = i0.ɵɵnextContext();
    i0.ɵɵproperty("src", i0.ɵɵpipeBind2(1, 1, ctx_r0.logo.src, "resource"), i0.ɵɵsanitizeUrl);
  }
}
function LoginComponent_ng_container_6_Template(rf, ctx) {
  if (rf & 1) {
    var _r2 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵelementStart(1, "div", 12)(2, "label", 13);
    i0.ɵɵtext(3, " Username ");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(4, "mat-form-field", 14)(5, "input", 15, 1);
    i0.ɵɵlistener("keyup.enter", function LoginComponent_ng_container_6_Template_input_keyup_enter_5_listener() {
      i0.ɵɵrestoreView(_r2);
      var ctx_r0 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r0.toPassword());
    });
    i0.ɵɵelementEnd()()();
    i0.ɵɵelementStart(7, "div", 12)(8, "label", 16);
    i0.ɵɵtext(9, "Password");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(10, "mat-form-field", 14)(11, "input", 17, 2);
    i0.ɵɵlistener("keyup.enter", function LoginComponent_ng_container_6_Template_input_keyup_enter_11_listener() {
      i0.ɵɵrestoreView(_r2);
      var ctx_r0 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r0.login());
    });
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(13, "mat-error");
    i0.ɵɵtext(14, "Invalid username or password");
    i0.ɵɵelementEnd()()();
    i0.ɵɵelementContainerEnd();
  }
  if (rf & 2) {
    var username_r3 = i0.ɵɵreference(6);
    var ctx_r0 = i0.ɵɵnextContext();
    i0.ɵɵadvance(2);
    i0.ɵɵclassProp("focused", username_r3 || ctx_r0.focus === "username")("in-focus", ctx_r0.focus === "username");
  }
}
function LoginComponent_div_7_Template(rf, ctx) {
  if (rf & 1) {
    var _r4 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 18)(1, "button", 19);
    i0.ɵɵlistener("click", function LoginComponent_div_7_Template_button_click_1_listener() {
      i0.ɵɵrestoreView(_r4);
      var ctx_r0 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r0.login());
    });
    i0.ɵɵtext(2, " Login ");
    i0.ɵɵelementEnd()();
  }
}
function LoginComponent_ng_template_8_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 20);
    i0.ɵɵelement(1, "mat-spinner", 21);
    i0.ɵɵelementStart(2, "p");
    i0.ɵɵtext(3, "Checking user credentials...");
    i0.ɵɵelementEnd()();
  }
}
var LoginComponent = /*#__PURE__*/function () {
  function LoginComponent(_settings) {
    _classCallCheck(this, LoginComponent);
    this._settings = _settings;
    this.form = new forms_1.FormGroup({
      username: new forms_1.FormControl('', [forms_1.Validators.required]),
      password: new forms_1.FormControl('', [forms_1.Validators.required])
    });
  }
  return _createClass(LoginComponent, [{
    key: "logo",
    get: /** Logo of the application organisation */
    function get() {
      return this._settings.get('app.logo_dark') || {
        type: 'icon'
      };
    }
  }, {
    key: "ngOnInit",
    value: function () {
      var _ngOnInit = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              this.loading = true;
              _context.next = 3;
              return this._settings.initialised.pipe((0, operators_1.first)(function (_) {
                return _;
              })).toPromise();
            case 3:
              this.loading = false;
            case 4:
            case "end":
              return _context.stop();
          }
        }, _callee, this);
      }));
      function ngOnInit() {
        return _ngOnInit.apply(this, arguments);
      }
      return ngOnInit;
    }() /** Focus on the password field */
  }, {
    key: "toPassword",
    value: function toPassword() {
      if (this.pwd_field && this.pwd_field.nativeElement) {
        this.pwd_field.nativeElement.focus();
      }
    }
    /** Perform user login */
  }, {
    key: "login",
    value: function login() {
      this.loading = true;
      // this._users.login({
      //     username: this.username,
      //     password: this.password
      // }, { form: true }).then(() => {
      //     this.loading = false;
      // }, () => {
      //     this.loading = false;
      //     this.error = true;
      // });
      this.form.setErrors({
        password: 'Invalid username or password'
      });
    }
  }]);
}();
_LoginComponent = LoginComponent;
_LoginComponent.ɵfac = function LoginComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _LoginComponent)(i0.ɵɵdirectiveInject(i1.SettingsService));
};
_LoginComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _LoginComponent,
  selectors: [["app-login"]],
  viewQuery: function LoginComponent_Query(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵviewQuery(_c0, 7);
    }
    if (rf & 2) {
      var _t;
      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.pwd_field = _t.first);
    }
  },
  decls: 10,
  vars: 7,
  consts: [["loading_state", ""], ["username", ""], ["pass_field", ""], [1, "fixed", "inset-0", "overflow-auto"], [1, "flex", "flex-col", "items-center", "overflow-hidden", "mx-auto", "my-4", "bg-base-100", "rounded", "shadow", "p-4"], [1, "flex", "items-center", "justify-center"], [3, "class", 4, "ngIf"], [3, "src", 4, "ngIf"], [1, "w-full", "relative", "h-1/3", "flex-1"], [4, "ngIf", "ngIfElse"], ["class", "flex items-center justify-center w-full", 4, "ngIf"], [3, "src"], [1, "flex", "flex-col"], ["for", "username"], ["appearance", "outline"], ["formControlName", "username", 3, "keyup.enter"], ["for", "password"], ["formControlName", "password", 3, "keyup.enter"], [1, "flex", "items-center", "justify-center", "w-full"], ["btn", "", "matRipple", "", "color", "primary", 3, "click"], [1, "absolute", "inset-0", "flex", "flex-col", "items-center", "justify-center", "space-y-2"], ["diameter", "64"]],
  template: function LoginComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵelementStart(0, "div", 3)(1, "form", 4)(2, "div", 5);
      i0.ɵɵtemplate(3, LoginComponent_i_3_Template, 2, 3, "i", 6)(4, LoginComponent_img_4_Template, 2, 4, "img", 7);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(5, "div", 8);
      i0.ɵɵtemplate(6, LoginComponent_ng_container_6_Template, 15, 4, "ng-container", 9);
      i0.ɵɵelementEnd();
      i0.ɵɵtemplate(7, LoginComponent_div_7_Template, 3, 0, "div", 10);
      i0.ɵɵelementEnd()();
      i0.ɵɵtemplate(8, LoginComponent_ng_template_8_Template, 4, 0, "ng-template", null, 0, i0.ɵɵtemplateRefExtractor);
    }
    if (rf & 2) {
      var loading_state_r5 = i0.ɵɵreference(9);
      i0.ɵɵadvance(2);
      i0.ɵɵstyleProp("background-color", ctx.logo == null ? null : ctx.logo.background);
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", (ctx.logo == null ? null : ctx.logo.type) === "icon");
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", (ctx.logo == null ? null : ctx.logo.type) === "img");
      i0.ɵɵadvance(2);
      i0.ɵɵproperty("ngIf", !ctx.loading)("ngIfElse", loading_state_r5);
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", !ctx.loading);
    }
  },
  styles: ["[_nghost-%COMP%]    > div[_ngcontent-%COMP%] {\n                background-color: #f0f0f0;\n                background-image: url(\"data:image/svg+xml,%3Csvg width='64' height='64' viewBox='0 0 64 64' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M8 16c4.418 0 8-3.582 8-8s-3.582-8-8-8-8 3.582-8 8 3.582 8 8 8zm0-2c3.314 0 6-2.686 6-6s-2.686-6-6-6-6 2.686-6 6 2.686 6 6 6zm33.414-6l5.95-5.95L45.95.636 40 6.586 34.05.636 32.636 2.05 38.586 8l-5.95 5.95 1.414 1.414L40 9.414l5.95 5.95 1.414-1.414L41.414 8zM40 48c4.418 0 8-3.582 8-8s-3.582-8-8-8-8 3.582-8 8 3.582 8 8 8zm0-2c3.314 0 6-2.686 6-6s-2.686-6-6-6-6 2.686-6 6 2.686 6 6 6zM9.414 40l5.95-5.95-1.414-1.414L8 38.586l-5.95-5.95L.636 34.05 6.586 40l-5.95 5.95 1.414 1.414L8 41.414l5.95 5.95 1.414-1.414L9.414 40z' fill='%23ad1457' fill-opacity='0.2' fill-rule='evenodd'/%3E%3C/svg%3E\");\n            }\n\n            form[_ngcontent-%COMP%] {\n                width: 20rem;\n                max-width: calc(100vw - 2rem);\n            }\n\n            img[_ngcontent-%COMP%] {\n                max-height: 3.75rem;\n                max-width: 15rem;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxvZ2luLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1lBQ1k7Z0JBQ0kseUJBQXlCO2dCQUN6Qiw0dEJBQTR0QjtZQUNodUI7O1lBRUE7Z0JBQ0ksWUFBWTtnQkFDWiw2QkFBNkI7WUFDakM7O1lBRUE7Z0JBQ0ksbUJBQW1CO2dCQUNuQixnQkFBZ0I7WUFDcEIiLCJmaWxlIjoibG9naW4uY29tcG9uZW50LnRzIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICA6aG9zdCA+IGRpdiB7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2YwZjBmMDtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoXCJkYXRhOmltYWdlL3N2Zyt4bWwsJTNDc3ZnIHdpZHRoPSc2NCcgaGVpZ2h0PSc2NCcgdmlld0JveD0nMCAwIDY0IDY0JyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnJTNFJTNDcGF0aCBkPSdNOCAxNmM0LjQxOCAwIDgtMy41ODIgOC04cy0zLjU4Mi04LTgtOC04IDMuNTgyLTggOCAzLjU4MiA4IDggOHptMC0yYzMuMzE0IDAgNi0yLjY4NiA2LTZzLTIuNjg2LTYtNi02LTYgMi42ODYtNiA2IDIuNjg2IDYgNiA2em0zMy40MTQtNmw1Ljk1LTUuOTVMNDUuOTUuNjM2IDQwIDYuNTg2IDM0LjA1LjYzNiAzMi42MzYgMi4wNSAzOC41ODYgOGwtNS45NSA1Ljk1IDEuNDE0IDEuNDE0TDQwIDkuNDE0bDUuOTUgNS45NSAxLjQxNC0xLjQxNEw0MS40MTQgOHpNNDAgNDhjNC40MTggMCA4LTMuNTgyIDgtOHMtMy41ODItOC04LTgtOCAzLjU4Mi04IDggMy41ODIgOCA4IDh6bTAtMmMzLjMxNCAwIDYtMi42ODYgNi02cy0yLjY4Ni02LTYtNi02IDIuNjg2LTYgNiAyLjY4NiA2IDYgNnpNOS40MTQgNDBsNS45NS01Ljk1LTEuNDE0LTEuNDE0TDggMzguNTg2bC01Ljk1LTUuOTVMLjYzNiAzNC4wNSA2LjU4NiA0MGwtNS45NSA1Ljk1IDEuNDE0IDEuNDE0TDggNDEuNDE0bDUuOTUgNS45NSAxLjQxNC0xLjQxNEw5LjQxNCA0MHonIGZpbGw9JyUyM2FkMTQ1NycgZmlsbC1vcGFjaXR5PScwLjInIGZpbGwtcnVsZT0nZXZlbm9kZCcvJTNFJTNDL3N2ZyUzRVwiKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZm9ybSB7XG4gICAgICAgICAgICAgICAgd2lkdGg6IDIwcmVtO1xuICAgICAgICAgICAgICAgIG1heC13aWR0aDogY2FsYygxMDB2dyAtIDJyZW0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpbWcge1xuICAgICAgICAgICAgICAgIG1heC1oZWlnaHQ6IDMuNzVyZW07XG4gICAgICAgICAgICAgICAgbWF4LXdpZHRoOiAxNXJlbTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl19 */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvY29tcG9uZW50cy9zcmMvbGliL2xvZ2luLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1lBQ1k7Z0JBQ0kseUJBQXlCO2dCQUN6Qiw0dEJBQTR0QjtZQUNodUI7O1lBRUE7Z0JBQ0ksWUFBWTtnQkFDWiw2QkFBNkI7WUFDakM7O1lBRUE7Z0JBQ0ksbUJBQW1CO2dCQUNuQixnQkFBZ0I7WUFDcEI7O0FBRVosd3dEQUF3d0QiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIDpob3N0ID4gZGl2IHtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjBmMGYwO1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQtaW1hZ2U6IHVybChcImRhdGE6aW1hZ2Uvc3ZnK3htbCwlM0Nzdmcgd2lkdGg9JzY0JyBoZWlnaHQ9JzY0JyB2aWV3Qm94PScwIDAgNjQgNjQnIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyclM0UlM0NwYXRoIGQ9J004IDE2YzQuNDE4IDAgOC0zLjU4MiA4LThzLTMuNTgyLTgtOC04LTggMy41ODItOCA4IDMuNTgyIDggOCA4em0wLTJjMy4zMTQgMCA2LTIuNjg2IDYtNnMtMi42ODYtNi02LTYtNiAyLjY4Ni02IDYgMi42ODYgNiA2IDZ6bTMzLjQxNC02bDUuOTUtNS45NUw0NS45NS42MzYgNDAgNi41ODYgMzQuMDUuNjM2IDMyLjYzNiAyLjA1IDM4LjU4NiA4bC01Ljk1IDUuOTUgMS40MTQgMS40MTRMNDAgOS40MTRsNS45NSA1Ljk1IDEuNDE0LTEuNDE0TDQxLjQxNCA4ek00MCA0OGM0LjQxOCAwIDgtMy41ODIgOC04cy0zLjU4Mi04LTgtOC04IDMuNTgyLTggOCAzLjU4MiA4IDggOHptMC0yYzMuMzE0IDAgNi0yLjY4NiA2LTZzLTIuNjg2LTYtNi02LTYgMi42ODYtNiA2IDIuNjg2IDYgNiA2ek05LjQxNCA0MGw1Ljk1LTUuOTUtMS40MTQtMS40MTRMOCAzOC41ODZsLTUuOTUtNS45NUwuNjM2IDM0LjA1IDYuNTg2IDQwbC01Ljk1IDUuOTUgMS40MTQgMS40MTRMOCA0MS40MTRsNS45NSA1Ljk1IDEuNDE0LTEuNDE0TDkuNDE0IDQweicgZmlsbD0nJTIzYWQxNDU3JyBmaWxsLW9wYWNpdHk9JzAuMicgZmlsbC1ydWxlPSdldmVub2RkJy8lM0UlM0Mvc3ZnJTNFXCIpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmb3JtIHtcbiAgICAgICAgICAgICAgICB3aWR0aDogMjByZW07XG4gICAgICAgICAgICAgICAgbWF4LXdpZHRoOiBjYWxjKDEwMHZ3IC0gMnJlbSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGltZyB7XG4gICAgICAgICAgICAgICAgbWF4LWhlaWdodDogMy43NXJlbTtcbiAgICAgICAgICAgICAgICBtYXgtd2lkdGg6IDE1cmVtO1xuICAgICAgICAgICAgfVxuICAgICAgICAiXSwic291cmNlUm9vdCI6IiJ9 */"]
});
exports.LoginComponent = LoginComponent;

/***/ }),

/***/ 37558:
/*!*********************************************************!*\
  !*** ./libs/components/src/lib/map-canvas.component.ts ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _regeneratorRuntime = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/regeneratorRuntime.js */ 8698)["default"]);
var _asyncToGenerator = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/asyncToGenerator.js */ 95386)["default"]);
var _slicedToArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/slicedToArray.js */ 6282)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _callSuper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/callSuper.js */ 8513)["default"]);
var _inherits = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/inherits.js */ 58160)["default"]);
var _MapCanvasComponent;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.MapCanvasComponent = void 0;
var core_1 = __webpack_require__(/*! @angular/core */ 37580);
var rxjs_1 = __webpack_require__(/*! rxjs */ 15681);
var interactive_map_component_1 = __webpack_require__(/*! ./interactive-map.component */ 24918);
var operators_1 = __webpack_require__(/*! rxjs/operators */ 97303);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var _c0 = ["canvas"];
var _c1 = ["map-canvas", ""];
var MapCanvasComponent = /*#__PURE__*/function (_common_1$AsyncHandle) {
  function MapCanvasComponent(_data) {
    var _this;
    _classCallCheck(this, MapCanvasComponent);
    _this = _callSuper(this, MapCanvasComponent);
    _this._data = _data;
    _this.zoom = 1;
    _this.ratio = 1;
    _this.svg_ratio = 1;
    _this.width = 10000;
    return _this;
  }
  _inherits(MapCanvasComponent, _common_1$AsyncHandle);
  return _createClass(MapCanvasComponent, [{
    key: "ratioed_height",
    get: function get() {
      return +(this.width * this.ratio).toFixed(2);
    }
  }, {
    key: "ngOnInit",
    value: function ngOnInit() {
      var _this2 = this;
      this.subscription('state', (0, rxjs_1.combineLatest)([this._data.ratio$, this._data.zoom$, this._data.svg_ratio$]).subscribe(function (_ref) {
        var _ref2 = _slicedToArray(_ref, 3),
          ratio = _ref2[0],
          zoom = _ref2[1],
          sr = _ref2[2];
        return _this2._handleMapChange(ratio, zoom, sr);
      }));
      this.subscription('polygons', this._data.polygons$.subscribe(function (list) {
        return _this2._handleStateChange(list);
      }));
    }
  }, {
    key: "_handleMapChange",
    value: function () {
      var _handleMapChange2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(ratio, zoom, svg_ratio) {
        var old_ratio, width, height, canvas, polygons;
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              old_ratio = this.ratio;
              this.zoom = zoom;
              this.ratio = ratio;
              this.svg_ratio = svg_ratio;
              width = this.width / 10;
              height = this.width * this.ratio / 10;
              if (!(old_ratio === ratio)) {
                _context.next = 8;
                break;
              }
              return _context.abrupt("return");
            case 8:
              canvas = this.canvas_element.nativeElement;
              canvas.width = width;
              canvas.height = height;
              _context.next = 13;
              return this._data.polygons$.pipe((0, operators_1.take)(1)).toPromise();
            case 13:
              polygons = _context.sent;
              this._handleStateChange(polygons);
            case 15:
            case "end":
              return _context.stop();
          }
        }, _callee, this);
      }));
      function _handleMapChange(_x, _x2, _x3) {
        return _handleMapChange2.apply(this, arguments);
      }
      return _handleMapChange;
    }()
  }, {
    key: "_handleStateChange",
    value: function _handleStateChange(polygon_list) {
      var _this3 = this;
      var canvas = this.canvas_element.nativeElement;
      var ctx = canvas.getContext('2d');
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      polygon_list.forEach(function (poly) {
        return _this3._drawPolygon(poly);
      });
    }
  }, {
    key: "_drawPolygon",
    value: function _drawPolygon(polygon) {
      var points = polygon.points;
      if (!(points !== null && points !== void 0 && points.length)) return;
      var canvas = this.canvas_element.nativeElement;
      var ctx = canvas.getContext('2d');
      var width = canvas.width;
      var height = canvas.height;
      // Draw polygon
      ctx.fillStyle = polygon.color + '80';
      ctx.beginPath();
      ctx.moveTo(points[0][0] * width, points[0][1] * height);
      points.forEach(function (_ref3) {
        var _ref4 = _slicedToArray(_ref3, 2),
          x = _ref4[0],
          y = _ref4[1];
        return ctx.lineTo(x * width, y * height);
      });
      ctx.closePath();
      ctx.fill();
      // Draw Outline
      ctx.strokeStyle = (0, common_1.shiftColorTowards)(polygon.color, '#888888', 0.5);
      ctx.lineWidth = 3;
      ctx.beginPath();
      ctx.moveTo(points[0][0] * width, points[0][1] * height);
      points.forEach(function (_ref5) {
        var _ref6 = _slicedToArray(_ref5, 2),
          x = _ref6[0],
          y = _ref6[1];
        return ctx.lineTo(x * width, y * height);
      });
      ctx.closePath();
      ctx.stroke();
      // Draw Points
      if (this._data.draw_points !== false) {
        ctx.fillStyle = '#fff';
        ctx.strokeStyle = polygon.color;
        ctx.lineWidth = 4;
        points.forEach(function (_ref7) {
          var _ref8 = _slicedToArray(_ref7, 2),
            x = _ref8[0],
            y = _ref8[1];
          ctx.beginPath();
          ctx.arc(x * width, y * height, 8, 0, Math.PI * 2);
          ctx.fill();
          ctx.stroke();
        });
      }
      // Draw Text
      if (this._data.draw_labels !== false) {
        var center = points.reduce(function (acc, _ref9) {
          var _ref10 = _slicedToArray(_ref9, 2),
            x = _ref10[0],
            y = _ref10[1];
          return [acc[0] + x, acc[1] + y];
        }, [0, 0]);
        center[0] /= points.length;
        center[1] /= points.length;
        ctx.textAlign = 'center';
        ctx.textBaseline = 'middle';
        ctx.fillStyle = '#FFF';
        ctx.font = '32px sans-serif';
        ctx.fillText(polygon.name, center[0] * width + 1, center[1] * height + 2);
        ctx.fillStyle = '#000';
        ctx.fillText(polygon.name, center[0] * width, center[1] * height);
      }
    }
  }]);
}(common_1.AsyncHandler);
_MapCanvasComponent = MapCanvasComponent;
_MapCanvasComponent.ɵfac = function MapCanvasComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _MapCanvasComponent)(i0.ɵɵdirectiveInject(interactive_map_component_1.MAP_FEATURE_DATA));
};
_MapCanvasComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _MapCanvasComponent,
  selectors: [["", "map-canvas", ""]],
  viewQuery: function MapCanvasComponent_Query(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵviewQuery(_c0, 7);
    }
    if (rf & 2) {
      var _t;
      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.canvas_element = _t.first);
    }
  },
  features: [i0.ɵɵInheritDefinitionFeature],
  attrs: _c1,
  decls: 2,
  vars: 4,
  consts: [["canvas", ""], [1, "absolute", "top-1/2", "left-1/2", "-translate-x-1/2", "-translate-y-1/2"]],
  template: function MapCanvasComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵelement(0, "canvas", 1, 0);
    }
    if (rf & 2) {
      i0.ɵɵstyleProp("width", ctx.width * ctx.svg_ratio * ctx.zoom + "%")("height", ctx.width * ctx.svg_ratio * ctx.ratio * ctx.zoom + "%");
    }
  },
  encapsulation: 2
});
exports.MapCanvasComponent = MapCanvasComponent;

/***/ }),

/***/ 90620:
/*!***************************************************************!*\
  !*** ./libs/components/src/lib/map-locate-modal.component.ts ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _callSuper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/callSuper.js */ 8513)["default"]);
var _inherits = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/inherits.js */ 58160)["default"]);
var _MapLocateModalComponent;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.MapLocateModalComponent = void 0;
var core_1 = __webpack_require__(/*! @angular/core */ 37580);
var dialog_1 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var organisation_service_1 = __webpack_require__(/*! libs/organisation/src/lib/organisation.service */ 19863);
var map_pin_component_1 = __webpack_require__(/*! ./map-pin.component */ 71865);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! libs/organisation/src/lib/organisation.service */ 19863);
var _c0 = function _c0() {
  return {
    disable_pan: true,
    disable_zoom: true
  };
};
function MapLocateModalComponent_div_6_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 7)(1, "interactive-map", 8);
    i0.ɵɵelement(2, "mat-spinner", 9);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(3, "div", 10);
    i0.ɵɵtext(4);
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var ctx_r0 = i0.ɵɵnextContext();
    i0.ɵɵadvance();
    i0.ɵɵproperty("src", ctx_r0.level == null ? null : ctx_r0.level.map_id)("focus", ctx_r0.item == null ? null : ctx_r0.item.map_id)("features", ctx_r0.features)("options", i0.ɵɵpureFunction0(5, _c0));
    i0.ɵɵadvance(3);
    i0.ɵɵtextInterpolate1(" ", (ctx_r0.level == null ? null : ctx_r0.level.display_name) || (ctx_r0.level == null ? null : ctx_r0.level.name), " ");
  }
}
var MapLocateModalComponent = /*#__PURE__*/function (_common_1$AsyncHandle) {
  function MapLocateModalComponent(_data, _org) {
    var _this$item$level;
    var _this;
    _classCallCheck(this, MapLocateModalComponent);
    _this = _callSuper(this, MapLocateModalComponent);
    _this._data = _data;
    _this._org = _org;
    /** Emitter for user action on the modal */
    _this.event = new core_1.EventEmitter();
    /** Space to show the location of on the map */
    _this.item = _this._data.item;
    /** Mapping of elements to CSS styles */
    _this.style_map = {};
    if (!((_this$item$level = _this.item.level) !== null && _this$item$level !== void 0 && _this$item$level.id)) {
      delete _this.item.level;
    }
    return _this;
  }
  _inherits(MapLocateModalComponent, _common_1$AsyncHandle);
  return _createClass(MapLocateModalComponent, [{
    key: "level",
    get: function get() {
      return this.item.level || this._org.levelWithID(this.item.zones || []);
    }
  }, {
    key: "ngOnInit",
    value: function ngOnInit() {
      var _this2 = this;
      this.timeout('init', function () {
        _this2.processFeature();
        _this2.processStyles();
      }, 1000);
    }
  }, {
    key: "processStyles",
    value: function processStyles() {
      var _this$item;
      var styles = {};
      if ((_this$item = this.item) !== null && _this$item !== void 0 && _this$item.map_id) {
        styles["#zones"] = {
          display: 'none'
        };
        styles["#Zones"] = {
          display: 'none'
        };
      }
      this.style_map = styles;
    }
    /** Point on map to focus on */
  }, {
    key: "processFeature",
    value: function processFeature() {
      if (!this.item) return null;
      var focus = {
        location: this.item.map_id,
        track_id: "focus_item",
        content: map_pin_component_1.MapPinComponent,
        data: {
          name: this.item.name
        },
        z_index: 99,
        zoom: 100
      };
      this.features = [focus];
    }
  }]);
}(common_1.AsyncHandler);
_MapLocateModalComponent = MapLocateModalComponent;
_MapLocateModalComponent.ɵfac = function MapLocateModalComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _MapLocateModalComponent)(i0.ɵɵdirectiveInject(dialog_1.MAT_DIALOG_DATA), i0.ɵɵdirectiveInject(i1.OrganisationService));
};
_MapLocateModalComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _MapLocateModalComponent,
  selectors: [["map-locate-modal"]],
  outputs: {
    event: "event"
  },
  features: [i0.ɵɵInheritDefinitionFeature],
  decls: 10,
  vars: 2,
  consts: [[1, "h-[calc(100vh-4rem)]", "w-screen", "sm:h-auto", "sm:w-auto"], [1, "p-4"], [1, "text-2xl"], [1, "ml-2", "text-xl", "font-medium"], ["body", "", "class", "relative overflow-hidden h-[65vh] w-full sm:max-h-[65vh]", 4, "ngIf"], [1, "w-full", "border-t", "border-base-200", "flex", "items-center", "justify-center", "p-2"], ["btn", "", "matRipple", "", "mat-dialog-close", "", 1, "inverse", "w-32"], ["body", "", 1, "relative", "overflow-hidden", "h-[65vh]", "w-full", "sm:max-h-[65vh]"], [1, "pointer-events-none", 3, "src", "focus", "features", "options"], ["diameter", "64"], [1, "absolute", "top-2", "right-2", "py-2", "px-4", "bg-base-100", "rounded-3xl", "shadow", "border", "border-base-200"]],
  template: function MapLocateModalComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵelementStart(0, "div", 0)(1, "header", 1)(2, "app-icon", 2);
      i0.ɵɵtext(3, "place");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(4, "h1", 3);
      i0.ɵɵtext(5);
      i0.ɵɵelementEnd()();
      i0.ɵɵtemplate(6, MapLocateModalComponent_div_6_Template, 5, 6, "div", 4);
      i0.ɵɵelementStart(7, "footer", 5)(8, "button", 6);
      i0.ɵɵtext(9, " Close ");
      i0.ɵɵelementEnd()()();
    }
    if (rf & 2) {
      i0.ɵɵadvance(5);
      i0.ɵɵtextInterpolate1(" ", ctx.item.display_name || ctx.item.name, " ");
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", ctx.level);
    }
  },
  styles: ["[body][_ngcontent-%COMP%] {\n                min-width: 80vw !important;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1hcC1sb2NhdGUtbW9kYWwuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSwwQkFBMEI7WUFDOUIiLCJmaWxlIjoibWFwLWxvY2F0ZS1tb2RhbC5jb21wb25lbnQudHMiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIFtib2R5XSB7XG4gICAgICAgICAgICAgICAgbWluLXdpZHRoOiA4MHZ3ICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICJdfQ== */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvY29tcG9uZW50cy9zcmMvbGliL21hcC1sb2NhdGUtbW9kYWwuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSwwQkFBMEI7WUFDOUI7O0FBRVosZ1pBQWdaIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICBbYm9keV0ge1xuICAgICAgICAgICAgICAgIG1pbi13aWR0aDogODB2dyAhaW1wb3J0YW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAiXSwic291cmNlUm9vdCI6IiJ9 */"]
});
exports.MapLocateModalComponent = MapLocateModalComponent;

/***/ }),

/***/ 71865:
/*!******************************************************!*\
  !*** ./libs/components/src/lib/map-pin.component.ts ***!
  \******************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _MapPinComponent;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.MapPinComponent = void 0;
var interactive_map_component_1 = __webpack_require__(/*! ./interactive-map.component */ 24918);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @angular/common */ 60316);
var _c0 = ["map-pin", ""];
function MapPinComponent_div_0_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 2);
    i0.ɵɵtext(1);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r0 = i0.ɵɵnextContext();
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", ctx_r0.message, " ");
  }
}
function MapPinComponent__svg_svg_1_Template(rf, ctx) {
  if (rf & 1) {
    var _r2 = i0.ɵɵgetCurrentView();
    i0.ɵɵnamespaceSVG();
    i0.ɵɵelementStart(0, "svg", 3);
    i0.ɵɵlistener("click", function MapPinComponent__svg_svg_1_Template_svg_click_0_listener() {
      i0.ɵɵrestoreView(_r2);
      var ctx_r0 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r0.action());
    });
    i0.ɵɵelementStart(1, "g");
    i0.ɵɵelement(2, "path", 4);
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var ctx_r0 = i0.ɵɵnextContext();
    i0.ɵɵclassProp("action", ctx_r0.action);
    i0.ɵɵadvance(2);
    i0.ɵɵstyleProp("fill", ctx_r0.fill)("stroke", ctx_r0.stroke);
  }
}
var MapPinComponent = /*#__PURE__*/function () {
  function MapPinComponent(_details) {
    _classCallCheck(this, MapPinComponent);
    this._details = _details;
    /** Message to display above the pin */
    this.message = this._details.message;
    /** Fill colour for the pin SVG */
    this.fill = this._details.fill || '#e53935';
    /** Stroke colour for the pin SVG */
    this.stroke = this._details.stroke || '#fff';
    /** Action to perform when clicking pin */
    this.action = this._details.action || null;
  }
  return _createClass(MapPinComponent, [{
    key: "ngOnInit",
    value: function ngOnInit() {
      var _this = this;
      setTimeout(function () {
        return _this.show = true;
      }, 300);
      setTimeout(function () {
        return _this.show_message = true;
      }, 1000);
    }
  }]);
}();
_MapPinComponent = MapPinComponent;
_MapPinComponent.ɵfac = function MapPinComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _MapPinComponent)(i0.ɵɵdirectiveInject(interactive_map_component_1.MAP_FEATURE_DATA));
};
_MapPinComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _MapPinComponent,
  selectors: [["", "map-pin", ""]],
  attrs: _c0,
  decls: 2,
  vars: 2,
  consts: [["name", "message", "class", "p-2 m-2 rounded bg-base-100 text-gray-700 shadow", 4, "ngIf"], ["name", "pin", "viewBox", "0 0 380 560", 3, "action", "click", 4, "ngIf"], ["name", "message", 1, "p-2", "m-2", "rounded", "bg-base-100", "text-gray-700", "shadow"], ["name", "pin", "viewBox", "0 0 380 560", 3, "click"], ["stroke-width", "25", "d", "M182.9,551.7c0,0.1,0.2,0.3,0.2,0.3S358.3,283,358.3,194.6c0-130.1-88.8-186.7-175.4-186.9\n            C96.3,7.9,7.5,64.5,7.5,194.6c0,88.4,175.3,357.4,175.3,357.4S182.9,551.7,182.9,551.7z M122.2,187.2c0-33.6,27.2-60.8,60.8-60.8\n            c33.6,0,60.8,27.2,60.8,60.8S216.5,248,182.9,248C149.4,248,122.2,220.8,122.2,187.2z"]],
  template: function MapPinComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵtemplate(0, MapPinComponent_div_0_Template, 2, 1, "div", 0)(1, MapPinComponent__svg_svg_1_Template, 3, 6, "svg", 1);
    }
    if (rf & 2) {
      i0.ɵɵproperty("ngIf", ctx.message && ctx.show_message);
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", ctx.show);
    }
  },
  dependencies: [i1.NgIf],
  styles: ["[_nghost-%COMP%] {\n                position: absolute;\n                bottom: 50%;\n                left: 50%;\n                width: 24rem;\n                display: flex;\n                flex-direction: column;\n                align-items: center;\n                transform: translateX(-50%);\n                z-index: -1;\n            }\n\n            div[_ngcontent-%COMP%] {\n                animation: _ngcontent-%COMP%_fade-in-top 1s;\n            }\n\n            .action[_ngcontent-%COMP%] {\n                pointer-events: auto;\n            }\n\n            svg[_ngcontent-%COMP%] {\n                width: 2rem;\n                animation: _ngcontent-%COMP%_fade-in-top 1s;\n            }\n\n            @keyframes _ngcontent-%COMP%_fade-in-top {\n                0% {\n                    opacity: 0;\n                    transform: translateY(-100%);\n                }\n                100% {\n                    opacity: 1;\n                    transform: translateY(0%);\n                }\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1hcC1waW4uY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxrQkFBa0I7Z0JBQ2xCLFdBQVc7Z0JBQ1gsU0FBUztnQkFDVCxZQUFZO2dCQUNaLGFBQWE7Z0JBQ2Isc0JBQXNCO2dCQUN0QixtQkFBbUI7Z0JBQ25CLDJCQUEyQjtnQkFDM0IsV0FBVztZQUNmOztZQUVBO2dCQUNJLHlCQUF5QjtZQUM3Qjs7WUFFQTtnQkFDSSxvQkFBb0I7WUFDeEI7O1lBRUE7Z0JBQ0ksV0FBVztnQkFDWCx5QkFBeUI7WUFDN0I7O1lBRUE7Z0JBQ0k7b0JBQ0ksVUFBVTtvQkFDViw0QkFBNEI7Z0JBQ2hDO2dCQUNBO29CQUNJLFVBQVU7b0JBQ1YseUJBQXlCO2dCQUM3QjtZQUNKIiwiZmlsZSI6Im1hcC1waW4uY29tcG9uZW50LnRzIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICA6aG9zdCB7XG4gICAgICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICAgICAgICAgIGJvdHRvbTogNTAlO1xuICAgICAgICAgICAgICAgIGxlZnQ6IDUwJTtcbiAgICAgICAgICAgICAgICB3aWR0aDogMjRyZW07XG4gICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKC01MCUpO1xuICAgICAgICAgICAgICAgIHotaW5kZXg6IC0xO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBkaXYge1xuICAgICAgICAgICAgICAgIGFuaW1hdGlvbjogZmFkZS1pbi10b3AgMXM7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC5hY3Rpb24ge1xuICAgICAgICAgICAgICAgIHBvaW50ZXItZXZlbnRzOiBhdXRvO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzdmcge1xuICAgICAgICAgICAgICAgIHdpZHRoOiAycmVtO1xuICAgICAgICAgICAgICAgIGFuaW1hdGlvbjogZmFkZS1pbi10b3AgMXM7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIEBrZXlmcmFtZXMgZmFkZS1pbi10b3Age1xuICAgICAgICAgICAgICAgIDAlIHtcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMDtcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC0xMDAlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgMTAwJSB7XG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDE7XG4gICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgwJSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAiXX0= */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvY29tcG9uZW50cy9zcmMvbGliL21hcC1waW4uY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxrQkFBa0I7Z0JBQ2xCLFdBQVc7Z0JBQ1gsU0FBUztnQkFDVCxZQUFZO2dCQUNaLGFBQWE7Z0JBQ2Isc0JBQXNCO2dCQUN0QixtQkFBbUI7Z0JBQ25CLDJCQUEyQjtnQkFDM0IsV0FBVztZQUNmOztZQUVBO2dCQUNJLHlCQUF5QjtZQUM3Qjs7WUFFQTtnQkFDSSxvQkFBb0I7WUFDeEI7O1lBRUE7Z0JBQ0ksV0FBVztnQkFDWCx5QkFBeUI7WUFDN0I7O1lBRUE7Z0JBQ0k7b0JBQ0ksVUFBVTtvQkFDViw0QkFBNEI7Z0JBQ2hDO2dCQUNBO29CQUNJLFVBQVU7b0JBQ1YseUJBQXlCO2dCQUM3QjtZQUNKOztBQUVaLDR6REFBNHpEIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICA6aG9zdCB7XG4gICAgICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICAgICAgICAgIGJvdHRvbTogNTAlO1xuICAgICAgICAgICAgICAgIGxlZnQ6IDUwJTtcbiAgICAgICAgICAgICAgICB3aWR0aDogMjRyZW07XG4gICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKC01MCUpO1xuICAgICAgICAgICAgICAgIHotaW5kZXg6IC0xO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBkaXYge1xuICAgICAgICAgICAgICAgIGFuaW1hdGlvbjogZmFkZS1pbi10b3AgMXM7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC5hY3Rpb24ge1xuICAgICAgICAgICAgICAgIHBvaW50ZXItZXZlbnRzOiBhdXRvO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzdmcge1xuICAgICAgICAgICAgICAgIHdpZHRoOiAycmVtO1xuICAgICAgICAgICAgICAgIGFuaW1hdGlvbjogZmFkZS1pbi10b3AgMXM7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIEBrZXlmcmFtZXMgZmFkZS1pbi10b3Age1xuICAgICAgICAgICAgICAgIDAlIHtcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMDtcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC0xMDAlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgMTAwJSB7XG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDE7XG4gICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgwJSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAiXSwic291cmNlUm9vdCI6IiJ9 */"]
});
exports.MapPinComponent = MapPinComponent;

/***/ }),

/***/ 84268:
/*!**********************************************************!*\
  !*** ./libs/components/src/lib/map-polygon.component.ts ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _slicedToArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/slicedToArray.js */ 6282)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _callSuper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/callSuper.js */ 8513)["default"]);
var _inherits = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/inherits.js */ 58160)["default"]);
var _MapPolygonComponent;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.MapPolygonComponent = void 0;
var core_1 = __webpack_require__(/*! @angular/core */ 37580);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var interactive_map_component_1 = __webpack_require__(/*! ./interactive-map.component */ 24918);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var _c0 = ["map-polygon", ""];
var MapPolygonComponent = /*#__PURE__*/function (_common_1$AsyncHandle) {
  function MapPolygonComponent(_details, _cdr) {
    var _this;
    _classCallCheck(this, MapPolygonComponent);
    _this = _callSuper(this, MapPolygonComponent);
    _this._details = _details;
    _this._cdr = _cdr;
    /** Message to display above the pin */
    _this.name = _this._details.name;
    /** Fill colour for the pin SVG */
    _this.fill = "".concat(_this._details.color || '#e53935', "88");
    /** Stroke colour for the pin SVG */
    _this.stroke = _this._details.color || '#e53935';
    _this.padding = 32;
    _this.width = 1;
    _this.height = 1;
    _this.svg_scale = 20;
    /** List of points for drawing the polygon */
    _this.points = "0,0 0,".concat(_this.height, " ").concat(_this.width, ",").concat(_this.height, " ").concat(_this.width, ",0");
    _this.point_list = [];
    return _this;
  }
  _inherits(MapPolygonComponent, _common_1$AsyncHandle);
  return _createClass(MapPolygonComponent, [{
    key: "scale",
    get: function get() {
      return this._details.svg_ratio || 1;
    }
  }, {
    key: "zoom",
    get: function get() {
      return this._details.zoom_value || 1;
    }
  }, {
    key: "ngOnInit",
    value: function ngOnInit() {
      var _this2 = this,
        _this$_details$ratio$,
        _this$_details$zoom$,
        _this$_details$svg_ra;
      if (this._details.data$) {
        this.subscription('data', this._details.data$.subscribe(function (_) {
          _this2.name = _.name;
          _this2.fill = "".concat(_.color || '#e53935', "88");
          _this2.stroke = _.color || '#e53935';
          _this2.processPoints(_.points);
        }));
      }
      this.subscription('ratio', (_this$_details$ratio$ = this._details.ratio$) === null || _this$_details$ratio$ === void 0 ? void 0 : _this$_details$ratio$.subscribe(function (_) {
        _this2._details.ratio = _;
        _this2.processPoints(_this2._details.points);
      }));
      this.subscription('zoom', (_this$_details$zoom$ = this._details.zoom$) === null || _this$_details$zoom$ === void 0 ? void 0 : _this$_details$zoom$.subscribe(function (_) {
        return _this2._details.zoom_value = _;
      }));
      this.subscription('svg_ratio', (_this$_details$svg_ra = this._details.svg_ratio$) === null || _this$_details$svg_ra === void 0 ? void 0 : _this$_details$svg_ra.subscribe(function (_) {
        return _this2._details.svg_ratio = _;
      }));
      this.processPoints(this._details.points);
    }
  }, {
    key: "processPoints",
    value: function processPoints(points) {
      var _this3 = this;
      var diff = points.reduce(function (m, _ref) {
        var _ref2 = _slicedToArray(_ref, 2),
          x = _ref2[0],
          y = _ref2[1];
        return {
          x_min: x < m.x_min ? x : m.x_min,
          x_max: x > m.x_max ? x : m.x_max,
          y_min: y < m.y_min ? y : m.y_min,
          y_max: y > m.y_max ? y : m.y_max
        };
      }, {
        x_min: 100,
        x_max: -100,
        y_min: 100,
        y_max: -100
      });
      var range = {
        x: diff.x_max - diff.x_min,
        y: diff.y_max - diff.y_min
      };
      var ratio = this._details.ratio;
      this.width = range.x * 100;
      this.height = range.y * 100 * (ratio || 1);
      this.width = Math.floor(this.width * 100);
      this.height = Math.floor(this.height * 100);
      this.points = points.reduce(function (s, _ref3) {
        var _ref4 = _slicedToArray(_ref3, 2),
          x = _ref4[0],
          y = _ref4[1];
        return "".concat(s).concat(s ? ' ' : '').concat((x - diff.x_min) / range.x * _this3.width / 20, ",").concat((y - diff.y_min) / range.y * _this3.height / 20);
      }, '').replace(/NaN/g, '0');
      this.point_list = points.map(function (_ref5) {
        var _ref6 = _slicedToArray(_ref5, 2),
          x = _ref6[0],
          y = _ref6[1];
        return [(x - diff.x_min) / range.x * _this3.width / 20, (y - diff.y_min) / range.y * _this3.height / 20];
      });
      this._cdr.detectChanges();
    }
  }]);
}(common_1.AsyncHandler);
_MapPolygonComponent = MapPolygonComponent;
_MapPolygonComponent.ɵfac = function MapPolygonComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _MapPolygonComponent)(i0.ɵɵdirectiveInject(interactive_map_component_1.MAP_FEATURE_DATA), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef));
};
_MapPolygonComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _MapPolygonComponent,
  selectors: [["", "map-polygon", ""]],
  features: [i0.ɵɵInheritDefinitionFeature],
  attrs: _c0,
  decls: 6,
  vars: 13,
  consts: [["polygon", "", 1, "absolute", "w-full", "h-full", "transform", "-translate-x-1/2", "-translate-y-1/2", "-top-1", "-left-1"], [1, "absolute", "top-1/2", "left-1/2", "transform", "-translate-x-1/2", "-translate-y-1/2"], ["preserveAspectRatio", "none", 1, "relative", "w-full", "h-full"], ["text", "", 1, "absolute", "top-1/2", "left-1/2", "transform", "-translate-x-1/2", "-translate-y-1/2", "text-shadow", "text-white", "text-xl", "text-center", "whitespace-pre-line"]],
  template: function MapPolygonComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵelementStart(0, "div", 0)(1, "div", 1);
      i0.ɵɵnamespaceSVG();
      i0.ɵɵelementStart(2, "svg", 2);
      i0.ɵɵelement(3, "polygon");
      i0.ɵɵelementEnd()()();
      i0.ɵɵnamespaceHTML();
      i0.ɵɵelementStart(4, "div", 3);
      i0.ɵɵtext(5);
      i0.ɵɵelementEnd();
    }
    if (rf & 2) {
      i0.ɵɵstyleProp("transform", "scale(" + ctx.scale * ctx.zoom + ")");
      i0.ɵɵadvance();
      i0.ɵɵstyleProp("width", ctx.width + "%")("height", ctx.height + "%");
      i0.ɵɵadvance();
      i0.ɵɵattribute("viewBox", "0 0 " + (ctx.width / 20 || 1) + " " + (ctx.height / 20 || 1));
      i0.ɵɵadvance();
      i0.ɵɵstyleProp("fill", ctx.fill)("stroke", ctx.stroke);
      i0.ɵɵattribute("points", ctx.points);
      i0.ɵɵadvance(2);
      i0.ɵɵtextInterpolate1(" ", ctx.name, " ");
    }
  },
  styles: ["[polygon][_ngcontent-%COMP%] {\n                will-change: transform;\n            }\n\n            polygon[_ngcontent-%COMP%] {\n                stroke-width: 2;\n            }\n            circle[_ngcontent-%COMP%] {\n                stroke-width: 2;\n            }\n\n            [text][_ngcontent-%COMP%] {\n                width: 32rem;\n                max-width: 65vw;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1hcC1wb2x5Z29uLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1lBQ1k7Z0JBQ0ksc0JBQXNCO1lBQzFCOztZQUVBO2dCQUNJLGVBQWU7WUFDbkI7WUFDQTtnQkFDSSxlQUFlO1lBQ25COztZQUVBO2dCQUNJLFlBQVk7Z0JBQ1osZUFBZTtZQUNuQiIsImZpbGUiOiJtYXAtcG9seWdvbi5jb21wb25lbnQudHMiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIFtwb2x5Z29uXSB7XG4gICAgICAgICAgICAgICAgd2lsbC1jaGFuZ2U6IHRyYW5zZm9ybTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcG9seWdvbiB7XG4gICAgICAgICAgICAgICAgc3Ryb2tlLXdpZHRoOiAyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2lyY2xlIHtcbiAgICAgICAgICAgICAgICBzdHJva2Utd2lkdGg6IDI7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIFt0ZXh0XSB7XG4gICAgICAgICAgICAgICAgd2lkdGg6IDMycmVtO1xuICAgICAgICAgICAgICAgIG1heC13aWR0aDogNjV2dztcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl19 */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvY29tcG9uZW50cy9zcmMvbGliL21hcC1wb2x5Z29uLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1lBQ1k7Z0JBQ0ksc0JBQXNCO1lBQzFCOztZQUVBO2dCQUNJLGVBQWU7WUFDbkI7WUFDQTtnQkFDSSxlQUFlO1lBQ25COztZQUVBO2dCQUNJLFlBQVk7Z0JBQ1osZUFBZTtZQUNuQjs7QUFFWixvekJBQW96QiIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgW3BvbHlnb25dIHtcbiAgICAgICAgICAgICAgICB3aWxsLWNoYW5nZTogdHJhbnNmb3JtO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBwb2x5Z29uIHtcbiAgICAgICAgICAgICAgICBzdHJva2Utd2lkdGg6IDI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjaXJjbGUge1xuICAgICAgICAgICAgICAgIHN0cm9rZS13aWR0aDogMjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgW3RleHRdIHtcbiAgICAgICAgICAgICAgICB3aWR0aDogMzJyZW07XG4gICAgICAgICAgICAgICAgbWF4LXdpZHRoOiA2NXZ3O1xuICAgICAgICAgICAgfVxuICAgICAgICAiXSwic291cmNlUm9vdCI6IiJ9 */"]
});
exports.MapPolygonComponent = MapPolygonComponent;

/***/ }),

/***/ 95384:
/*!*********************************************************!*\
  !*** ./libs/components/src/lib/map-radius.component.ts ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _MapRadiusComponent;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.MapRadiusComponent = void 0;
var core_1 = __webpack_require__(/*! @angular/core */ 37580);
var date_fns_1 = __webpack_require__(/*! date-fns */ 25773);
var interactive_map_component_1 = __webpack_require__(/*! ./interactive-map.component */ 24918);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @angular/common */ 60316);
var _c0 = ["map-radius", ""];
function MapRadiusComponent_ng_container_0_div_2_span_2_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "span", 6);
    i0.ɵɵtext(1);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext(3);
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" Last updated: ", ctx_r1.last_seen_at, " ");
  }
}
function MapRadiusComponent_ng_container_0_div_2_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 4);
    i0.ɵɵtext(1);
    i0.ɵɵtemplate(2, MapRadiusComponent_ng_container_0_div_2_span_2_Template, 2, 1, "span", 5);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext(2);
    i0.ɵɵstyleProp("top", "-" + ctx_r1.radius / 2 * ctx_r1.zoom + "px");
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", ctx_r1.message, " ");
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", ctx_r1.last_seen);
  }
}
function MapRadiusComponent_ng_container_0_Template(rf, ctx) {
  if (rf & 1) {
    var _r1 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementContainerStart(0, 1);
    i0.ɵɵlistener("resize", function MapRadiusComponent_ng_container_0_Template_ng_container_resize_0_listener() {
      i0.ɵɵrestoreView(_r1);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.updateRadius());
    }, false, i0.ɵɵresolveWindow);
    i0.ɵɵelement(1, "div", 2);
    i0.ɵɵtemplate(2, MapRadiusComponent_ng_container_0_div_2_Template, 3, 4, "div", 3);
    i0.ɵɵelementContainerEnd();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance();
    i0.ɵɵstyleProp("border-color", ctx_r1.stroke)("background-color", ctx_r1.fill + "40")("width", ctx_r1.radius * ctx_r1.zoom + "px")("height", ctx_r1.radius * ctx_r1.zoom + "px");
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", ctx_r1.message && ctx_r1.show_message);
  }
}
var MapRadiusComponent = /*#__PURE__*/function () {
  function MapRadiusComponent(_details, _el) {
    var _this$_details$zoom$,
      _this = this;
    _classCallCheck(this, MapRadiusComponent);
    this._details = _details;
    this._el = _el;
    this.zoom = 1;
    /** Size of the area marked by this component */
    this.radius = this._details.radius || 10;
    /** Message to display above the pin */
    this.message = this._details.message;
    /** Fill colour for the pin SVG */
    this.fill = this._details.fill || '#e53935';
    /** Stroke colour for the pin SVG */
    this.stroke = this._details.stroke || '#e53935';
    this.last_seen = this._details.last_seen || 0;
    (_this$_details$zoom$ = this._details.zoom$) === null || _this$_details$zoom$ === void 0 || _this$_details$zoom$.subscribe(function (v) {
      return Math.max(0.5, _this.zoom = v || 1);
    });
  }
  return _createClass(MapRadiusComponent, [{
    key: "last_seen_at",
    get: function get() {
      return (0, date_fns_1.formatDistanceToNow)(this.last_seen * 1000) + ' ago';
    }
  }, {
    key: "ngOnInit",
    value: function ngOnInit() {
      var _this2 = this;
      setTimeout(function () {
        return _this2.show = true;
      }, 300);
      setTimeout(function () {
        return _this2.show_message = true;
      }, 1000);
    }
  }, {
    key: "ngAfterViewInit",
    value: function ngAfterViewInit() {
      this.updateRadius();
    }
  }, {
    key: "updateRadius",
    value: function updateRadius() {
      var _this3 = this;
      var box = this._el.nativeElement.getBoundingClientRect();
      if (!box.width) return setTimeout(function () {
        return _this3.updateRadius();
      }, 300);
      this.radius = Math.max(64, (this._details.radius || 10) * (box.width || 10));
    }
  }]);
}();
_MapRadiusComponent = MapRadiusComponent;
_MapRadiusComponent.ɵfac = function MapRadiusComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _MapRadiusComponent)(i0.ɵɵdirectiveInject(interactive_map_component_1.MAP_FEATURE_DATA), i0.ɵɵdirectiveInject(i0.ElementRef));
};
_MapRadiusComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _MapRadiusComponent,
  selectors: [["", "map-radius", ""]],
  attrs: _c0,
  decls: 1,
  vars: 1,
  consts: [[3, "resize", 4, "ngIf"], [3, "resize"], ["radius", "", 1, "center", "border-4", "rounded-full", "border-dashed"], ["message", "", "class", "p-2 m-2 rounded bg-base-100 text-gray-700 shadow absolute top-0 whitespace-no-wrap flex flex-col w-64", 3, "top", 4, "ngIf"], ["message", "", 1, "p-2", "m-2", "rounded", "bg-base-100", "text-gray-700", "shadow", "absolute", "top-0", "whitespace-no-wrap", "flex", "flex-col", "w-64"], ["class", "text-xs", 4, "ngIf"], [1, "text-xs"]],
  template: function MapRadiusComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵtemplate(0, MapRadiusComponent_ng_container_0_Template, 3, 9, "ng-container", 0);
    }
    if (rf & 2) {
      i0.ɵɵproperty("ngIf", ctx.show && ctx.radius);
    }
  },
  dependencies: [i1.NgIf],
  styles: ["[_nghost-%COMP%] {\n                position: absolute;\n                height: 100%;\n                width: 100%;\n            }\n\n            [message][_ngcontent-%COMP%] {\n                transform: translate(-50%, -120%);\n                animation: _ngcontent-%COMP%_fade-in-top 1s;\n            }\n\n            @keyframes _ngcontent-%COMP%_fade-in-top {\n                0% {\n                    opacity: 0;\n                    transform: translate(-50%, -220%);\n                }\n                100% {\n                    opacity: 1;\n                    transform: translate(-50%, -120%);\n                }\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1hcC1yYWRpdXMuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxrQkFBa0I7Z0JBQ2xCLFlBQVk7Z0JBQ1osV0FBVztZQUNmOztZQUVBO2dCQUNJLGlDQUFpQztnQkFDakMseUJBQXlCO1lBQzdCOztZQUVBO2dCQUNJO29CQUNJLFVBQVU7b0JBQ1YsaUNBQWlDO2dCQUNyQztnQkFDQTtvQkFDSSxVQUFVO29CQUNWLGlDQUFpQztnQkFDckM7WUFDSiIsImZpbGUiOiJtYXAtcmFkaXVzLmNvbXBvbmVudC50cyIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgOmhvc3Qge1xuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIFttZXNzYWdlXSB7XG4gICAgICAgICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwgLTEyMCUpO1xuICAgICAgICAgICAgICAgIGFuaW1hdGlvbjogZmFkZS1pbi10b3AgMXM7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIEBrZXlmcmFtZXMgZmFkZS1pbi10b3Age1xuICAgICAgICAgICAgICAgIDAlIHtcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMDtcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwgLTIyMCUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAxMDAlIHtcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMTtcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwgLTEyMCUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgIl19 */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvY29tcG9uZW50cy9zcmMvbGliL21hcC1yYWRpdXMuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxrQkFBa0I7Z0JBQ2xCLFlBQVk7Z0JBQ1osV0FBVztZQUNmOztZQUVBO2dCQUNJLGlDQUFpQztnQkFDakMseUJBQXlCO1lBQzdCOztZQUVBO2dCQUNJO29CQUNJLFVBQVU7b0JBQ1YsaUNBQWlDO2dCQUNyQztnQkFDQTtvQkFDSSxVQUFVO29CQUNWLGlDQUFpQztnQkFDckM7WUFDSjs7QUFFWixvdUNBQW91QyIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgOmhvc3Qge1xuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIFttZXNzYWdlXSB7XG4gICAgICAgICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwgLTEyMCUpO1xuICAgICAgICAgICAgICAgIGFuaW1hdGlvbjogZmFkZS1pbi10b3AgMXM7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIEBrZXlmcmFtZXMgZmFkZS1pbi10b3Age1xuICAgICAgICAgICAgICAgIDAlIHtcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMDtcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwgLTIyMCUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAxMDAlIHtcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMTtcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwgLTEyMCUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgIl0sInNvdXJjZVJvb3QiOiIifQ== */"]
});
exports.MapRadiusComponent = MapRadiusComponent;

/***/ }),

/***/ 39489:
/*!***********************************************************!*\
  !*** ./libs/components/src/lib/map-renderer.component.ts ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _regeneratorRuntime = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/regeneratorRuntime.js */ 8698)["default"]);
var _objectSpread = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/objectSpread2.js */ 34092)["default"]);
var _asyncToGenerator = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/asyncToGenerator.js */ 95386)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _callSuper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/callSuper.js */ 8513)["default"]);
var _inherits = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/inherits.js */ 58160)["default"]);
var _MapRendererComponent;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.MapRendererComponent = void 0;
var core_1 = __webpack_require__(/*! @angular/core */ 37580);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var svg_viewer_1 = __webpack_require__(/*! @placeos/svg-viewer */ 50304);
var ts_client_1 = __webpack_require__(/*! @placeos/ts-client */ 35713);
var rxjs_1 = __webpack_require__(/*! rxjs */ 15681);
var operators_1 = __webpack_require__(/*! rxjs/operators */ 97303);
var interactive_map_component_1 = __webpack_require__(/*! ./interactive-map.component */ 24918);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @angular/common */ 60316);
var i2 = __webpack_require__(/*! @angular/material/progress-spinner */ 41134);
var i3 = __webpack_require__(/*! ./sanitise.pipe */ 54616);
var _c0 = ["outlet"];
var _c1 = ["feature"];
function MapRendererComponent_ng_container_2_mat_spinner_1_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelement(0, "mat-spinner", 7);
  }
  if (rf & 2) {
    i0.ɵɵproperty("diameter", 48);
  }
}
function MapRendererComponent_ng_container_2_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵtemplate(1, MapRendererComponent_ng_container_2_mat_spinner_1_Template, 1, 1, "mat-spinner", 6);
    i0.ɵɵelementContainerEnd();
  }
  if (rf & 2) {
    var ctx_r0 = i0.ɵɵnextContext();
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", !ctx_r0.viewer || ctx_r0.loading);
  }
}
function MapRendererComponent_div_3_ng_container_1_div_1_ng_container_3_ng_container_1_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementContainer(0);
  }
}
function MapRendererComponent_div_3_ng_container_1_div_1_ng_container_3_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵtemplate(1, MapRendererComponent_div_3_ng_container_1_div_1_ng_container_3_ng_container_1_Template, 1, 0, "ng-container", 14);
    i0.ɵɵelementContainerEnd();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext(2);
    var element_r3 = ctx_r1.$implicit;
    var i_r4 = ctx_r1.index;
    var ctx_r0 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngComponentOutlet", element_r3.content)("ngComponentOutletInjector", ctx_r0.injectors[i_r4]);
  }
}
function MapRendererComponent_div_3_ng_container_1_div_1_ng_container_4_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵelement(1, "div", 15);
    i0.ɵɵpipe(2, "sanitize");
    i0.ɵɵelementContainerEnd();
  }
  if (rf & 2) {
    var element_r3 = i0.ɵɵnextContext(2).$implicit;
    i0.ɵɵadvance();
    i0.ɵɵproperty("innerHTML", i0.ɵɵpipeBind1(2, 1, element_r3.content), i0.ɵɵsanitizeHtml);
  }
}
function MapRendererComponent_div_3_ng_container_1_div_1_ng_container_5_ng_container_1_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementContainer(0);
  }
}
function MapRendererComponent_div_3_ng_container_1_div_1_ng_container_5_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵtemplate(1, MapRendererComponent_div_3_ng_container_1_div_1_ng_container_5_ng_container_1_Template, 1, 0, "ng-container", 16);
    i0.ɵɵelementContainerEnd();
  }
  if (rf & 2) {
    var element_r3 = i0.ɵɵnextContext(2).$implicit;
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngTemplateOutlet", element_r3.content)("ngTemplateOutletContext", element_r3.data);
  }
}
function MapRendererComponent_div_3_ng_container_1_div_1_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div")(1, "div", 11, 2);
    i0.ɵɵtemplate(3, MapRendererComponent_div_3_ng_container_1_div_1_ng_container_3_Template, 2, 2, "ng-container", 12)(4, MapRendererComponent_div_3_ng_container_1_div_1_ng_container_4_Template, 3, 3, "ng-container", 12)(5, MapRendererComponent_div_3_ng_container_1_div_1_ng_container_5_Template, 2, 2, "ng-container", 13);
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var element_r3 = i0.ɵɵnextContext().$implicit;
    var ctx_r0 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngSwitch", ctx_r0.type(element_r3.content));
    i0.ɵɵattribute("no-scale", element_r3.no_scale)("el-id", element_r3.location)("track-id", element_r3.track_id)("view-id", ctx_r0.viewer);
    i0.ɵɵadvance(2);
    i0.ɵɵproperty("ngSwitchCase", "component");
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngSwitchCase", "html");
  }
}
function MapRendererComponent_div_3_ng_container_1_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵtemplate(1, MapRendererComponent_div_3_ng_container_1_div_1_Template, 6, 7, "div", 10);
    i0.ɵɵelementContainerEnd();
  }
  if (rf & 2) {
    var element_r3 = ctx.$implicit;
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", element_r3);
  }
}
function MapRendererComponent_div_3_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 8);
    i0.ɵɵtemplate(1, MapRendererComponent_div_3_ng_container_1_Template, 2, 1, "ng-container", 9);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r0 = i0.ɵɵnextContext();
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngForOf", ctx_r0.features)("ngForTrackBy", ctx_r0.trackByFn);
  }
}
function MapRendererComponent_ng_template_4_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 17)(1, "div", 18);
    i0.ɵɵtext(2, "No map");
    i0.ɵɵelementEnd()();
  }
}
function isSamePoint(p1, p2) {
  return p1.x === p2.x && p1.y === p2.y;
}
var MapRendererComponent = /*#__PURE__*/function (_common_1$AsyncHandle) {
  function MapRendererComponent(_injector) {
    var _this;
    _classCallCheck(this, MapRendererComponent);
    _this = _callSuper(this, MapRendererComponent);
    _this._injector = _injector;
    /** Zoom level to apply to the SVG */
    _this.zoom = 1;
    /** Zoom level to apply to the SVG */
    _this.center = {
      x: 0.5,
      y: 0.5
    };
    /** Number of times to reset the map */
    _this.reset = 0;
    _this.zoomChange = new core_1.EventEmitter();
    _this.centerChange = new core_1.EventEmitter();
    _this.mapInfo = new core_1.EventEmitter();
    _this.injectors = [];
    _this.feature_list = [];
    /** Observable for changes on the SVG viewer */
    _this._on_changes = new rxjs_1.BehaviorSubject(null);
    _this._extra_data = {
      ratio$: _this._on_changes.pipe((0, operators_1.map)(function (_) {
        return _.ratio;
      })),
      svg_ratio$: _this._on_changes.pipe((0, operators_1.map)(function (_) {
        return _.svg_ratio;
      })),
      zoom$: _this._on_changes.pipe((0, operators_1.map)(function (_) {
        return _.zoom;
      })),
      position: _this._on_changes.pipe((0, operators_1.map)(function (_) {
        return _.center;
      }))
    };
    return _this;
  }
  _inherits(MapRendererComponent, _common_1$AsyncHandle);
  return _createClass(MapRendererComponent, [{
    key: "onResize",
    value: function onResize() {
      this.zoom = 1;
      this.center = {
        x: 0.5,
        y: 0.5
      };
      this.updateDisplay();
    }
  }, {
    key: "type",
    value: function type(content) {
      return typeof content === 'string' ? 'html' : content instanceof core_1.TemplateRef ? 'template' : 'component';
    }
  }, {
    key: "ngOnInit",
    value: function ngOnInit() {
      (0, svg_viewer_1.applyGlobalStyles)();
    }
  }, {
    key: "ngOnDestroy",
    value: function ngOnDestroy() {
      if (this.viewer) {
        (0, svg_viewer_1.removeViewer)(this.viewer);
      }
    }
  }, {
    key: "ngOnChanges",
    value: function ngOnChanges(changes) {
      var _this2 = this;
      if (changes.src && this.src) {
        this.createView()["catch"](function (e) {
          return console.warn(e);
        });
      }
      if (changes.features) {
        this.updateInjectors();
      }
      if (this.viewer) {
        if (changes.focus && this.focus) {
          this.focusOn(this.focus);
        } else if (changes.zoom && changes.zoom.previousValue != changes.zoom.currentValue || changes.center && !isSamePoint(changes.center.previousValue, changes.center.currentValue)) {
          this.updateDisplay();
        }
        if (changes.styles || changes.features || changes.labels || changes.actions) {
          this.timeout('update_view', function () {
            return _this2.updateView();
          });
        }
      }
      if (changes.reset && changes.reset.currentValue !== changes.reset.previousValue) {
        this.zoom = 1;
        this.center = {
          x: 0.5,
          y: 0.5
        };
        this.updateDisplay();
      }
    }
  }, {
    key: "ngAfterViewInit",
    value: function ngAfterViewInit() {
      this.createView()["catch"](function (e) {
        return console.warn(e);
      });
    }
    /** Update overlays, styles and actions of viewer */
  }, {
    key: "updateView",
    value: function updateView() {
      var _this3 = this;
      try {
        if (!(0, svg_viewer_1.getViewer)(this.viewer) || this.loading) {
          return this.timeout('update_view', function () {
            return _this3.updateView();
          });
        }
        this.updateFeatureList();
        (0, svg_viewer_1.updateViewer)(this.viewer, {
          styles: this.styles,
          features: this.feature_list,
          labels: this.labels,
          actions: this.actions,
          options: this.options
        });
      } catch (e) {}
    }
    /** Update zoom and center position of viewer */
  }, {
    key: "updateDisplay",
    value: function updateDisplay() {
      try {
        (0, svg_viewer_1.updateViewer)(this.viewer, {
          zoom: this.zoom,
          desired_zoom: this.zoom,
          center: this.center,
          desired_center: this.center,
          options: this.options
        });
      } catch (e) {}
    }
  }, {
    key: "createView",
    value: function () {
      var _createView = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
        var _this4 = this,
          _this$src,
          _this$_outlet_el,
          _this$_outlet_el3;
        var simp_url, _this$_outlet_el2, _ref, tkn, viewer;
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              if ((0, ts_client_1.authority)()) {
                _context.next = 2;
                break;
              }
              return _context.abrupt("return", this.timeout('create_view', function () {
                return _this4.createView()["catch"](function (e) {
                  return console.warn(e);
                });
              }, 300));
            case 2:
              simp_url = ((_this$src = this.src) === null || _this$src === void 0 ? void 0 : _this$src.toLowerCase()) || '';
              if (!(!simp_url.includes('svg') && !simp_url.includes('upload'))) {
                _context.next = 5;
                break;
              }
              return _context.abrupt("return");
            case 5:
              if (!(this.src && (_this$_outlet_el = this._outlet_el) !== null && _this$_outlet_el !== void 0 && _this$_outlet_el.nativeElement && !this.loading)) {
                _context.next = 33;
                break;
              }
              this.loading = true;
              if (!this.viewer) {
                _context.next = 17;
                break;
              }
              _context.prev = 8;
              (0, svg_viewer_1.updateViewer)(this.viewer, {
                styles: this.styles,
                features: [],
                labels: this.labels,
                actions: this.actions,
                options: this.options
              });
              (0, svg_viewer_1.removeViewer)(this.viewer);
              _context.next = 17;
              break;
            case 13:
              _context.prev = 13;
              _context.t0 = _context["catch"](8);
              console.warn(_context.t0);
              return _context.abrupt("return");
            case 17:
              this.updateFeatureList();
              tkn = (0, ts_client_1.token)();
              document.cookie = "".concat(tkn === 'x-api-key' ? 'api-key=' + encodeURIComponent((0, ts_client_1.apiKey)()) : 'bearer_token=' + encodeURIComponent(tkn), ";max-age=30;path=/api/engine/v2/uploads;samesite=strict;").concat(location.protocol === 'https:' ? 'secure;' : '');
              _context.next = 22;
              return (0, svg_viewer_1.createViewer)({
                element: (_this$_outlet_el2 = this._outlet_el) === null || _this$_outlet_el2 === void 0 ? void 0 : _this$_outlet_el2.nativeElement,
                url: this.src,
                styles: this.styles,
                zoom: this.zoom,
                desired_zoom: this.zoom,
                center: this.center,
                features: this.feature_list,
                labels: this.labels,
                actions: this.actions,
                options: this.options
              })["catch"](function (e) {
                console.warn(e);
                return '';
              });
            case 22:
              this.viewer = _context.sent;
              this.loading = false;
              if (this.viewer) {
                _context.next = 26;
                break;
              }
              return _context.abrupt("return");
            case 26:
              this.loading = false;
              this.subscription('view_changes', (_ref = (0, svg_viewer_1.listenToViewerChanges)(this.viewer)) === null || _ref === void 0 ? void 0 : _ref.subscribe(function (v) {
                var box = _this4._outlet_el.nativeElement.getBoundingClientRect();
                _this4._on_changes.next(_objectSpread({}, v));
                _this4.zoomChange.emit(v.zoom);
                _this4.centerChange.emit(v.center);
              }));
              viewer = (0, svg_viewer_1.getViewer)(this.viewer);
              this.mapInfo.emit(viewer.mappings);
              if (this.focus) this.focusOn(this.focus);
              _context.next = 34;
              break;
            case 33:
              if (this.src && !((_this$_outlet_el3 = this._outlet_el) !== null && _this$_outlet_el3 !== void 0 && _this$_outlet_el3.nativeElement) || this.loading) {
                this.timeout('create_view', function () {
                  return _this4.createView()["catch"](function (e) {
                    return console.warn(e);
                  });
                });
              }
            case 34:
            case "end":
              return _context.stop();
          }
        }, _callee, this, [[8, 13]]);
      }));
      function createView() {
        return _createView.apply(this, arguments);
      }
      return createView;
    }()
  }, {
    key: "focusOn",
    value: function focusOn(id) {
      if (!id || !this.viewer) return;
      var viewer = (0, svg_viewer_1.getViewer)(this.viewer);
      if (!viewer) return;
      var rect = viewer.mappings[id];
      if (!rect) return;
      this.center = {
        x: 1 - (rect.x + rect.w / 2),
        y: 1 - (rect.y + rect.h / 4)
      };
      this.updateDisplay();
    }
    /* istanbul ignore next */
  }, {
    key: "trackByFn",
    value: function trackByFn(index, feature) {
      return feature === null || feature === void 0 ? void 0 : feature.track_id;
    }
  }, {
    key: "updateFeatureList",
    value: function updateFeatureList() {
      var _this5 = this;
      this.feature_list = (this.features || []).map(function (f, idx) {
        var _this5$_feature_list$;
        return _objectSpread(_objectSpread({}, f), {}, {
          content: (_this5$_feature_list$ = _this5._feature_list.toArray()[idx]) === null || _this5$_feature_list$ === void 0 ? void 0 : _this5$_feature_list$.nativeElement
        });
      }).filter(function (f) {
        return f.content;
      });
    }
  }, {
    key: "updateInjectors",
    value: function updateInjectors() {
      var _this6 = this;
      var old_injectors = this.injectors || [];
      this.injectors = (this.features || []).map(function (f) {
        return old_injectors.find(function (_) {
          var _$get, _$get2;
          return ((_$get = _.get(interactive_map_component_1.MAP_FEATURE_DATA)) === null || _$get === void 0 ? void 0 : _$get.track_id) && ((_$get2 = _.get(interactive_map_component_1.MAP_FEATURE_DATA)) === null || _$get2 === void 0 ? void 0 : _$get2.track_id) === f.track_id;
        }) || core_1.Injector.create({
          providers: [{
            provide: interactive_map_component_1.MAP_FEATURE_DATA,
            useValue: _objectSpread(_objectSpread({
              track_id: f.track_id
            }, f.data), _this6._extra_data)
          }],
          parent: _this6._injector
        });
      });
    }
  }]);
}(common_1.AsyncHandler);
_MapRendererComponent = MapRendererComponent;
_MapRendererComponent.ɵfac = function MapRendererComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _MapRendererComponent)(i0.ɵɵdirectiveInject(i0.Injector));
};
_MapRendererComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _MapRendererComponent,
  selectors: [["map-renderer"]],
  viewQuery: function MapRendererComponent_Query(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵviewQuery(_c0, 5);
      i0.ɵɵviewQuery(_c1, 5);
    }
    if (rf & 2) {
      var _t;
      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx._outlet_el = _t.first);
      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx._feature_list = _t);
    }
  },
  hostBindings: function MapRendererComponent_HostBindings(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵlistener("resize", function MapRendererComponent_resize_HostBindingHandler() {
        return ctx.onResize();
      }, false, i0.ɵɵresolveWindow);
    }
  },
  inputs: {
    src: "src",
    styles: "styles",
    zoom: "zoom",
    center: "center",
    features: "features",
    labels: "labels",
    actions: "actions",
    reset: "reset",
    options: "options",
    focus: "focus"
  },
  outputs: {
    zoomChange: "zoomChange",
    centerChange: "centerChange",
    mapInfo: "mapInfo"
  },
  features: [i0.ɵɵInheritDefinitionFeature, i0.ɵɵNgOnChangesFeature],
  decls: 6,
  vars: 5,
  consts: [["outlet", ""], ["empty_state", ""], ["feature", ""], ["tabindex", "0", "role", "map", 1, "absolute", "inset-0"], [4, "ngIf", "ngIfElse"], ["hidden", "", 4, "ngIf"], ["class", "absolute", 3, "diameter", 4, "ngIf"], [1, "absolute", 3, "diameter"], ["hidden", ""], [4, "ngFor", "ngForOf", "ngForTrackBy"], [4, "ngIf"], [1, "pointer-events-none", 3, "ngSwitch"], [4, "ngSwitchCase"], [4, "ngSwitchDefault"], [4, "ngComponentOutlet", "ngComponentOutletInjector"], [3, "innerHTML"], [4, "ngTemplateOutlet", "ngTemplateOutletContext"], [1, "absolute", "inset-0", "flex", "items-center", "justify-center"], [1, "opacity-30"]],
  template: function MapRendererComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵelement(0, "div", 3, 0);
      i0.ɵɵtemplate(2, MapRendererComponent_ng_container_2_Template, 2, 1, "ng-container", 4)(3, MapRendererComponent_div_3_Template, 2, 2, "div", 5)(4, MapRendererComponent_ng_template_4_Template, 3, 0, "ng-template", null, 1, i0.ɵɵtemplateRefExtractor);
    }
    if (rf & 2) {
      var empty_state_r5 = i0.ɵɵreference(5);
      i0.ɵɵclassProp("hidden", !ctx.src);
      i0.ɵɵadvance(2);
      i0.ɵɵproperty("ngIf", ctx.src)("ngIfElse", empty_state_r5);
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", ctx.injectors == null ? null : ctx.injectors.length);
    }
  },
  dependencies: [i1.NgComponentOutlet, i1.NgForOf, i1.NgIf, i1.NgTemplateOutlet, i1.NgSwitch, i1.NgSwitchCase, i1.NgSwitchDefault, i2.MatProgressSpinner, i3.SanitizePipe],
  styles: ["[_nghost-%COMP%] {\n                height: 100%;\n                width: 100%;\n            }\n\n            mat-spinner[_ngcontent-%COMP%] {\n                top: 50%;\n                left: 50%;\n                transform: translate(-50%, -50%);\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1hcC1yZW5kZXJlci5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLFlBQVk7Z0JBQ1osV0FBVztZQUNmOztZQUVBO2dCQUNJLFFBQVE7Z0JBQ1IsU0FBUztnQkFDVCxnQ0FBZ0M7WUFDcEMiLCJmaWxlIjoibWFwLXJlbmRlcmVyLmNvbXBvbmVudC50cyIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgOmhvc3Qge1xuICAgICAgICAgICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbWF0LXNwaW5uZXIge1xuICAgICAgICAgICAgICAgIHRvcDogNTAlO1xuICAgICAgICAgICAgICAgIGxlZnQ6IDUwJTtcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLCAtNTAlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl19 */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvY29tcG9uZW50cy9zcmMvbGliL21hcC1yZW5kZXJlci5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLFlBQVk7Z0JBQ1osV0FBVztZQUNmOztZQUVBO2dCQUNJLFFBQVE7Z0JBQ1IsU0FBUztnQkFDVCxnQ0FBZ0M7WUFDcEM7O0FBRVosd3FCQUF3cUIiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIDpob3N0IHtcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIG1hdC1zcGlubmVyIHtcbiAgICAgICAgICAgICAgICB0b3A6IDUwJTtcbiAgICAgICAgICAgICAgICBsZWZ0OiA1MCU7XG4gICAgICAgICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwgLTUwJSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICJdLCJzb3VyY2VSb290IjoiIn0= */"]
});
exports.MapRendererComponent = MapRendererComponent;

/***/ }),

/***/ 30877:
/*!***********************************************************!*\
  !*** ./libs/components/src/lib/maps-indoors.component.ts ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _createForOfIteratorHelper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createForOfIteratorHelper.js */ 36350)["default"]);
var _objectSpread = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/objectSpread2.js */ 34092)["default"]);
var _regeneratorRuntime = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/regeneratorRuntime.js */ 8698)["default"]);
var _asyncToGenerator = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/asyncToGenerator.js */ 95386)["default"]);
var _slicedToArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/slicedToArray.js */ 6282)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _callSuper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/callSuper.js */ 8513)["default"]);
var _inherits = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/inherits.js */ 58160)["default"]);
var _MapsIndoorsComponent;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.MapsIndoorsComponent = void 0;
var core_1 = __webpack_require__(/*! @angular/core */ 37580);
var organisation_1 = __webpack_require__(/*! @placeos/organisation */ 2510);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var mapspeople_service_1 = __webpack_require__(/*! libs/common/src/lib/mapspeople.service */ 99420);
var operators_1 = __webpack_require__(/*! rxjs/operators */ 97303);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @placeos/common */ 22797);
var i2 = __webpack_require__(/*! @placeos/organisation */ 2510);
var i3 = __webpack_require__(/*! @angular/common */ 60316);
var i4 = __webpack_require__(/*! @angular/material/core */ 74646);
var i5 = __webpack_require__(/*! @angular/material/progress-spinner */ 41134);
var i6 = __webpack_require__(/*! ./icon.component */ 69434);
var _c0 = ["map_container"];
function MapsIndoorsComponent_button_2_mat_spinner_5_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelement(0, "mat-spinner", 6);
  }
}
function MapsIndoorsComponent_button_2_Template(rf, ctx) {
  if (rf & 1) {
    var _r1 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "button", 3);
    i0.ɵɵlistener("click", function MapsIndoorsComponent_button_2_Template_button_click_0_listener() {
      i0.ɵɵrestoreView(_r1);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.toggleDirections());
    });
    i0.ɵɵelementStart(1, "app-icon");
    i0.ɵɵtext(2, "place");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(3, "div", 4);
    i0.ɵɵtext(4);
    i0.ɵɵelementEnd();
    i0.ɵɵtemplate(5, MapsIndoorsComponent_button_2_mat_spinner_5_Template, 1, 0, "mat-spinner", 5);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance(4);
    i0.ɵɵtextInterpolate1(" ", ctx_r1.viewing_directions ? "Hide" : "Show", " Directions ");
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", ctx_r1.loading_directions);
  }
}
var DEFAULT_ZOOM = 18.5;
var RESOURCE_MAP = {};
var MapsIndoorsComponent = /*#__PURE__*/function (_common_1$AsyncHandle) {
  function MapsIndoorsComponent(_maps_people, _org) {
    var _this;
    _classCallCheck(this, MapsIndoorsComponent);
    _this = _callSuper(this, MapsIndoorsComponent);
    _this._maps_people = _maps_people;
    _this._org = _org;
    _this.zoom = DEFAULT_ZOOM;
    _this.zoomChange = new core_1.EventEmitter();
    _this.zoneChange = new core_1.EventEmitter();
    _this.show_directions = false;
    _this.viewing_directions = false;
    _this.loading_directions = false;
    _this.ignore_zoom = false;
    _this._floor_list = [];
    _this._added_floor_selector = false;
    var data = sessionStorage.getItem('PLACEOS.mapsindoors.resources') || '{}';
    var value = JSON.parse(data);
    for (var key in value) {
      if (value.hasOwnProperty(key)) {
        RESOURCE_MAP[key] = value[key];
      }
    }
    return _this;
  }
  _inherits(MapsIndoorsComponent, _common_1$AsyncHandle);
  return _createClass(MapsIndoorsComponent, [{
    key: "ngOnInit",
    value: function ngOnInit() {
      this.id = (0, common_1.randomString)(8);
      this._initialised.next(false);
      this._initialiseServices();
    }
  }, {
    key: "ngOnChanges",
    value: function ngOnChanges(changes) {
      var _this2 = this;
      if (!this.is_initialised) {
        return this.timeout('on_changes', function () {
          return _this2.ngOnChanges(changes);
        });
      }
      if (changes.zone && this.zone) {
        this._centerOnZone();
      }
      if (changes.focus && this.focus) {
        this._focusOnLocation();
      }
      if (changes.metadata) {
        this._updateMapStyling();
      }
      if (changes.zoom && this.zoom && !this.ignore_zoom) {
        var _this$_services;
        (_this$_services = this._services) === null || _this$_services === void 0 || (_this$_services = _this$_services.map) === null || _this$_services === void 0 || _this$_services.setZoom(this.zoom);
      }
      if (changes.reset) {
        var _this$_services2;
        (_this$_services2 = this._services) === null || _this$_services2 === void 0 || (_this$_services2 = _this$_services2.map) === null || _this$_services2 === void 0 || _this$_services2.setZoom(DEFAULT_ZOOM);
        this._centerOnZone();
      }
      if (changes.options) {
        this._addFloorSelector();
      }
    }
  }, {
    key: "_setResource",
    value: function _setResource(id, resource) {
      RESOURCE_MAP[id] = resource;
      this.timeout('set_resource', function () {
        sessionStorage.setItem('PLACEOS.mapsindoors.resources', JSON.stringify(RESOURCE_MAP));
      });
    }
  }, {
    key: "_initialiseServices",
    value: function _initialiseServices() {
      var _this3 = this,
        _this$_org$building;
      if (!this._maps_people.is_ready || !window.mapsindoors) {
        this.timeout('init', function () {
          return _this3._initialiseServices();
        }, 1000);
        return;
      }
      var _split = (((_this$_org$building = this._org.building) === null || _this$_org$building === void 0 ? void 0 : _this$_org$building.location) || "-33.8567844,151.2152967").split(','),
        _split2 = _slicedToArray(_split, 2),
        lat = _split2[0],
        _long = _split2[1];
      var view_options = {
        element: this._container.nativeElement,
        center: {
          lat: parseFloat(lat),
          lng: parseFloat(_long)
        },
        zoom: DEFAULT_ZOOM,
        maxZoom: 24
      };
      var view_instance = null;
      switch (this._maps_people.map_service) {
        case mapspeople_service_1.MapService.GoogleMaps:
          (0, common_1.log)('MapsIndoors', 'Using Google Maps API');
          view_instance = new mapsindoors.mapView.GoogleMapsView(view_options);
          break;
        case mapspeople_service_1.MapService.Mapbox:
          view_options.accessToken = this._maps_people.map_token;
          (0, common_1.log)('MapsIndoors', 'Using Mapbox API');
          view_instance = new mapsindoors.mapView.MapboxView(view_options);
          break;
      }
      if (!view_instance) {
        (0, common_1.notifyWarn)('Failed to initialise map view.');
        return;
      }
      var provider = this._maps_people.map_service === mapspeople_service_1.MapService.GoogleMaps ? new mapsindoors.directions.GoogleMapsProvider() : new mapsindoors.directions.MapboxProvider(this._maps_people.map_token);
      var maps_indoors = new mapsindoors.MapsIndoors({
        mapView: view_instance
      });
      this._services = {
        mapsindoors: maps_indoors,
        view: view_instance,
        map: view_instance.getMap(),
        directions: new mapsindoors.services.DirectionsService(provider),
        directions_renderer: new mapsindoors.directions.DirectionsRenderer({
          mapsIndoors: maps_indoors
        })
      };
      this._initialised.next(true);
      if (this.zone) {
        this._services.map.setZoom(DEFAULT_ZOOM);
        this._centerOnZone();
      }
      this._addFloorSelector();
      // Add Events listenders
      this._services.mapsindoors.addListener('building_changed', function (e) {
        return _this3._handleBuildingChange(e);
      });
      this._services.mapsindoors.addListener('floor_changed', function (e) {
        return _this3._handleLevelChange(e);
      });
      this._services.mapsindoors.addListener('zoom_changed', function (e) {
        return _this3._handleZoomChange(e);
      });
      this._services.mapsindoors.addListener('click', function (e) {
        return _this3._handleUserClick(e);
      });
      this.timeout('resize', function () {
        return window.dispatchEvent(new Event('resize'));
      }, 100);
      window.maps_indoors = this._services;
      this.timeout('focus', function () {
        return _this3._focusOnLocation();
      });
      this.timeout('init_zoom', function () {
        return _this3._handleZoomChange(DEFAULT_ZOOM);
      });
    }
  }, {
    key: "clearDirections",
    value: function clearDirections() {
      this._services.directions_renderer.setRoute(null);
      this.viewing_directions = false;
    }
  }, {
    key: "toggleDirections",
    value: function () {
      var _toggleDirections = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {
        var _this4 = this,
          _item$properties;
        var items, item, bld, _ref, _ref2, d_lng, d_lat, options;
        return _regeneratorRuntime().wrap(function _callee2$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              if (!this.viewing_directions) {
                _context2.next = 4;
                break;
              }
              this.clearDirections();
              this._focusOnLocation();
              return _context2.abrupt("return");
            case 4:
              if (this.focus) {
                _context2.next = 6;
                break;
              }
              return _context2.abrupt("return");
            case 6:
              _context2.next = 8;
              return this._search(this.focus);
            case 8:
              items = _context2.sent;
              if (items !== null && items !== void 0 && items.length) {
                _context2.next = 12;
                break;
              }
              (0, common_1.notifyError)("Unable to find location \"".concat(this.focus, "\"."));
              return _context2.abrupt("return");
            case 12:
              this.loading_directions = true;
              item = items[0];
              bld = this._org.buildings.find(function (bld) {
                return bld.id === _this4.zone.parent_id;
              });
              _ref = ((_item$properties = item.properties) === null || _item$properties === void 0 || (_item$properties = _item$properties.anchor) === null || _item$properties === void 0 ? void 0 : _item$properties.coordinates) || (bld === null || bld === void 0 ? void 0 : bld.location.split(',')) || [37.8136, 144.9631], _ref2 = _slicedToArray(_ref, 2), d_lng = _ref2[0], d_lat = _ref2[1];
              options = {
                timeout: 10000,
                enableHighAccuracy: true
              };
              navigator.geolocation.getCurrentPosition( /*#__PURE__*/function () {
                var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(position) {
                  return _regeneratorRuntime().wrap(function _callee$(_context) {
                    while (1) switch (_context.prev = _context.next) {
                      case 0:
                        _this4._last_position = position;
                        _this4.setDirectionsFromLocation({
                          lat: position.coords.latitude,
                          lng: position.coords.longitude
                        }, {
                          lat: d_lat,
                          lng: d_lng
                        });
                      case 2:
                      case "end":
                        return _context.stop();
                    }
                  }, _callee);
                }));
                return function (_x) {
                  return _ref3.apply(this, arguments);
                };
              }(), function () {
                if (_this4._last_position) {
                  _this4.setDirectionsFromLocation({
                    lat: _this4._last_position.coords.latitude,
                    lng: _this4._last_position.coords.longitude
                  }, {
                    lat: d_lat,
                    lng: d_lng
                  });
                } else (0, common_1.notifyError)('Failed to get your current location.');
              }, options);
            case 18:
            case "end":
              return _context2.stop();
          }
        }, _callee2, this);
      }));
      function toggleDirections() {
        return _toggleDirections.apply(this, arguments);
      }
      return toggleDirections;
    }()
  }, {
    key: "setDirectionsFromLocation",
    value: function () {
      var _setDirectionsFromLocation = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3(from, to) {
        var _this5 = this;
        var distance, routeParameters, result;
        return _regeneratorRuntime().wrap(function _callee3$(_context3) {
          while (1) switch (_context3.prev = _context3.next) {
            case 0:
              distance = (0, common_1.calculateDistance)(to.lat, to.lng, from.lat, from.lng);
              routeParameters = {
                origin: {
                  lat: from.lat,
                  lng: from.lng
                },
                destination: {
                  lat: to.lat,
                  lng: to.lng
                },
                travelMode: distance < 2 ? 'WALKING' : 'DRIVING'
              };
              _context3.next = 4;
              return this._services.directions.getRoute(routeParameters)["catch"](function (e) {
                var _e$message;
                (0, common_1.log)('MapsIndoors', 'Error fetching route: ', e.message || e, 'warn');
                var origin_error = e instanceof TypeError && ((_e$message = e.message) === null || _e$message === void 0 ? void 0 : _e$message.includes('origin'));
                _this5.loading_directions = false;
                if (!origin_error) return;
                (0, common_1.notifyError)('Error: Origin location is outside of map area.');
              });
            case 4:
              result = _context3.sent;
              if (result) {
                _context3.next = 7;
                break;
              }
              return _context3.abrupt("return");
            case 7:
              this._services.directions_renderer.setRoute(result);
              this.viewing_directions = true;
              this.loading_directions = false;
            case 10:
            case "end":
              return _context3.stop();
          }
        }, _callee3, this);
      }));
      function setDirectionsFromLocation(_x2, _x3) {
        return _setDirectionsFromLocation.apply(this, arguments);
      }
      return setDirectionsFromLocation;
    }()
  }, {
    key: "_handleZoomChange",
    value: function _handleZoomChange(level) {
      var _this6 = this;
      this.timeout('zoom_change', function () {
        _this6.ignore_zoom = true;
        _this6.zoom = level;
        _this6.zoomChange.emit(level);
        _this6.timeout('reset_ignore_zoom', function () {
          return _this6.ignore_zoom = false;
        }, 50);
      }, 100);
    }
  }, {
    key: "_handleBuildingChange",
    value: function _handleBuildingChange(building) {
      var _this7 = this;
      var id = building.externalId || building.id;
      (0, common_1.log)('MapsIndoors', "Building switched to \"".concat(id, "\""));
      var floors = building.floors || {};
      this._floor_list = Object.keys(floors).map(function (key) {
        return _objectSpread({
          index: key
        }, floors[key]);
      });
      (0, common_1.log)('MapsIndoors', 'Floor List:', this._floor_list);
      if (!this._services) return;
      var bld = this._org.buildings.find(function (_) {
        return _.id === id || _.map_id === id;
      });
      this.timeout('set_floor', function () {
        var has_set_floor = _this7._setFloorFromZone();
        if (!has_set_floor && building.defaultFloor) {
          _this7._handleLevelChange(building.defaultFloor);
        }
      });
      if (!bld) return;
      this._org.building = bld;
      this._last_building = bld.id;
    }
  }, {
    key: "_handleLevelChange",
    value: function () {
      var _handleLevelChange2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4(index) {
        var floor, id, levels, new_level;
        return _regeneratorRuntime().wrap(function _callee4$(_context4) {
          while (1) switch (_context4.prev = _context4.next) {
            case 0:
              (0, common_1.log)('MapsIndoors', "Level switched to \"".concat(index, "\""));
              floor = this._floor_list.find(function (_) {
                return _.index === index;
              });
              id = (floor === null || floor === void 0 ? void 0 : floor.externalId) || (floor === null || floor === void 0 ? void 0 : floor.id);
              if (this._services) {
                _context4.next = 5;
                break;
              }
              return _context4.abrupt("return");
            case 5:
              _context4.next = 7;
              return this._org.active_levels.pipe((0, operators_1.take)(1)).toPromise();
            case 7:
              levels = _context4.sent;
              if (levels) {
                _context4.next = 10;
                break;
              }
              return _context4.abrupt("return");
            case 10:
              new_level = levels.find(function (_) {
                return _.map_id === id || _.id === id;
              });
              if (new_level) {
                _context4.next = 13;
                break;
              }
              return _context4.abrupt("return");
            case 13:
              this.zone = new_level;
              this.zoneChange.emit(new_level);
            case 15:
            case "end":
              return _context4.stop();
          }
        }, _callee4, this);
      }));
      function _handleLevelChange(_x4) {
        return _handleLevelChange2.apply(this, arguments);
      }
      return _handleLevelChange;
    }()
  }, {
    key: "_handleUserClick",
    value: function _handleUserClick(event) {
      var _event$properties, _event$properties2, _this$metadata;
      (0, common_1.log)('MapsIndoors', "Click occurred", event);
      var id = ((_event$properties = event.properties) === null || _event$properties === void 0 ? void 0 : _event$properties.externalId) || ((_event$properties2 = event.properties) === null || _event$properties2 === void 0 ? void 0 : _event$properties2.roomId) || event.id;
      var actions = ((_this$metadata = this.metadata) === null || _this$metadata === void 0 ? void 0 : _this$metadata.actions) || [];
      (0, common_1.log)('MapsIndoors', "Registered Actions", actions);
      var ignore_actions = ['mousedown', 'touchstart', 'enter', 'leave'];
      var _iterator = _createForOfIteratorHelper(actions),
        _step;
      try {
        for (_iterator.s(); !(_step = _iterator.n()).done;) {
          var action = _step.value;
          if ((action.id === id || action.id === '*') && !ignore_actions.includes(action.action)) {
            action.callback(event);
            break;
          }
        }
      } catch (err) {
        _iterator.e(err);
      } finally {
        _iterator.f();
      }
    }
  }, {
    key: "_search",
    value: function () {
      var _search2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee5(query) {
        var _mapsindoors;
        return _regeneratorRuntime().wrap(function _callee5$(_context5) {
          while (1) switch (_context5.prev = _context5.next) {
            case 0:
              if (this._services) {
                _context5.next = 2;
                break;
              }
              return _context5.abrupt("return");
            case 2:
              return _context5.abrupt("return", (_mapsindoors = mapsindoors) === null || _mapsindoors === void 0 ? void 0 : _mapsindoors.services.LocationsService.getLocations({
                q: query
              }));
            case 3:
            case "end":
              return _context5.stop();
          }
        }, _callee5, this);
      }));
      function _search(_x5) {
        return _search2.apply(this, arguments);
      }
      return _search;
    }()
  }, {
    key: "_updateMapStyling",
    value: function () {
      var _updateMapStyling2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee6() {
        var _this$metadata2,
          _this8 = this;
        var styles, _loop, _ret, id;
        return _regeneratorRuntime().wrap(function _callee6$(_context7) {
          while (1) switch (_context7.prev = _context7.next) {
            case 0:
              if (this._services) {
                _context7.next = 2;
                break;
              }
              return _context7.abrupt("return");
            case 2:
              styles = ((_this$metadata2 = this.metadata) === null || _this$metadata2 === void 0 ? void 0 : _this$metadata2.styles) || {};
              _loop = /*#__PURE__*/_regeneratorRuntime().mark(function _loop() {
                var resource, id_simple, list, value;
                return _regeneratorRuntime().wrap(function _loop$(_context6) {
                  while (1) switch (_context6.prev = _context6.next) {
                    case 0:
                      if (styles[id].fill) {
                        _context6.next = 2;
                        break;
                      }
                      return _context6.abrupt("return", 0);
                    case 2:
                      resource = RESOURCE_MAP[id];
                      if (resource) {
                        _context6.next = 12;
                        break;
                      }
                      id_simple = id.replace(/#/, '');
                      _context6.next = 7;
                      return _this8._search(id_simple);
                    case 7:
                      list = _context6.sent;
                      if (list.length) {
                        _context6.next = 10;
                        break;
                      }
                      return _context6.abrupt("return", 0);
                    case 10:
                      resource = list.find(function (_) {
                        var _$properties, _$properties2;
                        return ((_$properties = _.properties) === null || _$properties === void 0 ? void 0 : _$properties.externalId) === id_simple || ((_$properties2 = _.properties) === null || _$properties2 === void 0 ? void 0 : _$properties2.roomId) === id_simple || _.id === id_simple;
                      });
                      if (resource) _this8._setResource(id, resource);
                    case 12:
                      if (resource) {
                        _context6.next = 14;
                        break;
                      }
                      return _context6.abrupt("return", 0);
                    case 14:
                      value = {
                        extrusionHeight: 0,
                        extrusionVisible: false,
                        polygonVisible: true,
                        polygonFillColor: styles[id].fill
                      };
                      _this8._services.mapsindoors.setDisplayRule(resource.id, value);
                    case 16:
                    case "end":
                      return _context6.stop();
                  }
                }, _loop);
              });
              _context7.t0 = _regeneratorRuntime().keys(styles);
            case 5:
              if ((_context7.t1 = _context7.t0()).done) {
                _context7.next = 13;
                break;
              }
              id = _context7.t1.value;
              return _context7.delegateYield(_loop(), "t2", 8);
            case 8:
              _ret = _context7.t2;
              if (!(_ret === 0)) {
                _context7.next = 11;
                break;
              }
              return _context7.abrupt("continue", 5);
            case 11:
              _context7.next = 5;
              break;
            case 13:
            case "end":
              return _context7.stop();
          }
        }, _callee6, this);
      }));
      function _updateMapStyling() {
        return _updateMapStyling2.apply(this, arguments);
      }
      return _updateMapStyling;
    }()
  }, {
    key: "_focusOnLocation",
    value: function () {
      var _focusOnLocation2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee7() {
        var _this9 = this,
          _item$properties2,
          _item$properties3;
        var items, item, bld, _ref4, _ref5, lng, lat;
        return _regeneratorRuntime().wrap(function _callee7$(_context8) {
          while (1) switch (_context8.prev = _context8.next) {
            case 0:
              if (this.focus) {
                _context8.next = 2;
                break;
              }
              return _context8.abrupt("return");
            case 2:
              _context8.next = 4;
              return this._search(this.focus);
            case 4:
              items = _context8.sent;
              this.clearDirections();
              if (items !== null && items !== void 0 && items.length) {
                _context8.next = 9;
                break;
              }
              (0, common_1.notifyError)("Unable to find location ".concat(this.focus, "."));
              return _context8.abrupt("return");
            case 9:
              item = items.find(function (_) {
                var _$properties3;
                return ((_$properties3 = _.properties) === null || _$properties3 === void 0 ? void 0 : _$properties3.externalId) === _this9.focus;
              }) || items[0];
              bld = this._org.buildings.find(function (bld) {
                return bld.id === _this9.zone.parent_id;
              });
              _ref4 = ((_item$properties2 = item.properties) === null || _item$properties2 === void 0 || (_item$properties2 = _item$properties2.anchor) === null || _item$properties2 === void 0 ? void 0 : _item$properties2.coordinates) || (bld === null || bld === void 0 ? void 0 : bld.location.split(',')) || [37.8136, 144.9631], _ref5 = _slicedToArray(_ref4, 2), lng = _ref5[0], lat = _ref5[1];
              this._services.map.setZoom(DEFAULT_ZOOM);
              this._services.map.setCenter({
                lat: lat,
                lng: lng
              });
              this._services.mapsindoors.setFloor((_item$properties3 = item.properties) === null || _item$properties3 === void 0 ? void 0 : _item$properties3.floor);
              this._services.mapsindoors.highlight([item.id]);
            case 16:
            case "end":
              return _context8.stop();
          }
        }, _callee7, this);
      }));
      function _focusOnLocation() {
        return _focusOnLocation2.apply(this, arguments);
      }
      return _focusOnLocation;
    }()
  }, {
    key: "_centerOnZone",
    value: function _centerOnZone() {
      var _this10 = this;
      if (!this._services || !this.zone || this.zone.parent_id === this._last_building || this.zone.id === this._last_building) return;
      this.timeout('set_center', function () {
        var bld = _this10._org.buildings.find(function (bld) {
          return bld.id === _this10.zone.parent_id;
        });
        if (!bld) return;
        var _bld$location$split = bld === null || bld === void 0 ? void 0 : bld.location.split(','),
          _bld$location$split2 = _slicedToArray(_bld$location$split, 2),
          lat = _bld$location$split2[0],
          _long2 = _bld$location$split2[1];
        if (!_this10.focus) {
          _this10._services.map.setCenter({
            lat: parseFloat(lat),
            lng: parseFloat(_long2)
          });
        }
        _this10._setFloorFromZone();
        _this10._last_building = _this10.zone.id;
      });
    }
  }, {
    key: "_setFloorFromZone",
    value: function _setFloorFromZone() {
      if (!this.zone.map_id || !this._services) return false;
      var map_id = this.zone.map_id;
      var floor = this._floor_list.find(function (_) {
        return _.index === map_id || _.externalId === map_id || _.id === map_id;
      });
      if (!floor) return false;
      this._services.mapsindoors.setFloor(floor.index);
      return true;
    }
  }, {
    key: "_addFloorSelector",
    value: function _addFloorSelector() {
      var _this$options;
      if (!((_this$options = this.options) !== null && _this$options !== void 0 && _this$options.controls) || this._added_floor_selector) return;
      var element = document.createElement('div');
      new mapsindoors.FloorSelector(element, this._services.mapsindoors);
      if (this._maps_people.map_service === mapspeople_service_1.MapService.GoogleMaps) {
        this._services.map.controls[google.maps.ControlPosition.RIGHT_TOP].push(element);
      } else {
        this._services.map.addControl({
          onAdd: function onAdd() {
            return element;
          },
          onRemove: function onRemove() {}
        });
      }
      this._added_floor_selector = true;
    }
  }]);
}(common_1.AsyncHandler);
_MapsIndoorsComponent = MapsIndoorsComponent;
_MapsIndoorsComponent.ɵfac = function MapsIndoorsComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _MapsIndoorsComponent)(i0.ɵɵdirectiveInject(i1.MapsPeopleService), i0.ɵɵdirectiveInject(i2.OrganisationService));
};
_MapsIndoorsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _MapsIndoorsComponent,
  selectors: [["maps-indoors"]],
  viewQuery: function MapsIndoorsComponent_Query(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵviewQuery(_c0, 7);
    }
    if (rf & 2) {
      var _t;
      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx._container = _t.first);
    }
  },
  inputs: {
    zone: "zone",
    metadata: "metadata",
    options: "options",
    focus: "focus",
    zoom: "zoom",
    reset: "reset"
  },
  outputs: {
    zoomChange: "zoomChange",
    zoneChange: "zoneChange"
  },
  features: [i0.ɵɵInheritDefinitionFeature, i0.ɵɵNgOnChangesFeature],
  decls: 3,
  vars: 1,
  consts: [["map_container", ""], [1, "absolute", "inset-0", "z-0"], ["btn", "", "matRipple", "", "class", "absolute bottom-2 left-2 bg-base-100 text-base-content shadow z-10 border-base-200 space-x-2", 3, "click", 4, "ngIf"], ["btn", "", "matRipple", "", 1, "absolute", "bottom-2", "left-2", "bg-base-100", "text-base-content", "shadow", "z-10", "border-base-200", "space-x-2", 3, "click"], [1, "pr-2"], ["diameter", "24", 4, "ngIf"], ["diameter", "24"]],
  template: function MapsIndoorsComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵelement(0, "div", 1, 0);
      i0.ɵɵtemplate(2, MapsIndoorsComponent_button_2_Template, 6, 2, "button", 2);
    }
    if (rf & 2) {
      i0.ɵɵadvance(2);
      i0.ɵɵproperty("ngIf", ctx.focus && !ctx.show_directions && (ctx.options == null ? null : ctx.options.controls));
    }
  },
  dependencies: [i3.NgIf, i4.MatRipple, i5.MatProgressSpinner, i6.IconComponent]
});
exports.MapsIndoorsComponent = MapsIndoorsComponent;

/***/ }),

/***/ 28975:
/*!********************************************************!*\
  !*** ./libs/components/src/lib/media-duration.pipe.ts ***!
  \********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _MediaDurationPipe;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.MediaDurationPipe = void 0;
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var MediaDurationPipe = /*#__PURE__*/function () {
  function MediaDurationPipe() {
    _classCallCheck(this, MediaDurationPipe);
  }
  return _createClass(MediaDurationPipe, [{
    key: "transform",
    value: function transform(period_length) {
      var show_ms = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;
      var hours = Math.floor(period_length / 60 / 60);
      var minutes = Math.floor(period_length / 60 % 60);
      var seconds = Math.floor(period_length % 60);
      var milliseconds = Math.floor(period_length * 1000 % 1000);
      var str = "".concat((0, common_1.padLength)(minutes), ":").concat((0, common_1.padLength)(seconds));
      if (show_ms) {
        str += ".".concat((0, common_1.padLength)(milliseconds, 3));
      }
      if (hours > 0) str = "".concat((0, common_1.padLength)(hours), ":").concat(str);
      return str;
    }
  }]);
}();
_MediaDurationPipe = MediaDurationPipe;
_MediaDurationPipe.ɵfac = function MediaDurationPipe_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _MediaDurationPipe)();
};
_MediaDurationPipe.ɵpipe = /*@__PURE__*/i0.ɵɵdefinePipe({
  name: "mediaDuration",
  type: _MediaDurationPipe,
  pure: true
});
exports.MediaDurationPipe = MediaDurationPipe;

/***/ }),

/***/ 74118:
/*!************************************************************!*\
  !*** ./libs/components/src/lib/misconfigured.component.ts ***!
  \************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _taggedTemplateLiteral = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js */ 9959)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _MisconfiguredComponent, _templateObject, _templateObject2, _templateObject3;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.MisconfiguredComponent = void 0;
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var MisconfiguredComponent = /*#__PURE__*/_createClass(function MisconfiguredComponent() {
  _classCallCheck(this, MisconfiguredComponent);
});
_MisconfiguredComponent = MisconfiguredComponent;
_MisconfiguredComponent.ɵfac = function MisconfiguredComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _MisconfiguredComponent)();
};
_MisconfiguredComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _MisconfiguredComponent,
  selectors: [["app-misconfigured"]],
  decls: 7,
  vars: 0,
  consts: function consts() {
    var i18n_0;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_forbiddenLabel$$LIBS_COMPONENTS_SRC_LIB_MISCONFIGURED_COMPONENT_TS_0 = goog.getMsg(" Application Misconfigured. ");
      i18n_0 = MSG_EXTERNAL_forbiddenLabel$$LIBS_COMPONENTS_SRC_LIB_MISCONFIGURED_COMPONENT_TS_0;
    } else {
      i18n_0 = $localize(_templateObject || (_templateObject = _taggedTemplateLiteral([":@@forbiddenLabel\u241F182e7b1880a89160c510e11db17c3137d00fed03\u241F6873959187081594674: Application Misconfigured. "])));
    }
    var i18n_1;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_invalidPermissionLabel$$LIBS_COMPONENTS_SRC_LIB_MISCONFIGURED_COMPONENT_TS_1 = goog.getMsg(" This application requires a zone of type org, building and level to operate. ");
      i18n_1 = MSG_EXTERNAL_invalidPermissionLabel$$LIBS_COMPONENTS_SRC_LIB_MISCONFIGURED_COMPONENT_TS_1;
    } else {
      i18n_1 = $localize(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([":@@invalidPermissionLabel\u241F8ae6c247ea026216ce78c84ad733caad125e7429\u241F8256914760043331527: This application requires a zone of type org, building and level to operate. "])));
    }
    var i18n_2;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_contactAdminLabel$$LIBS_COMPONENTS_SRC_LIB_MISCONFIGURED_COMPONENT_TS_2 = goog.getMsg(" If this issue persists please contact your administrator. ");
      i18n_2 = MSG_EXTERNAL_contactAdminLabel$$LIBS_COMPONENTS_SRC_LIB_MISCONFIGURED_COMPONENT_TS_2;
    } else {
      i18n_2 = $localize(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([":@@contactAdminLabel\u241F511dd82ef95cf509a8d011fa1191ee690b27114c\u241F5752634679579289146: If this issue persists please contact your administrator. "])));
    }
    return [i18n_0, i18n_1, i18n_2, ["content", "", 1, "rounded", "m-4", "text-center", "bg-base-100", "text-black", "border", "border-base-200", "p-4", "shadow"], [1, "text-2xl"], [1, "py-4"]];
  },
  template: function MisconfiguredComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵelementStart(0, "div", 3)(1, "h3", 4);
      i0.ɵɵi18n(2, 0);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(3, "p", 5);
      i0.ɵɵi18n(4, 1);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(5, "p");
      i0.ɵɵi18n(6, 2);
      i0.ɵɵelementEnd()();
    }
  },
  styles: ["[_nghost-%COMP%] {\n                display: flex;\n                align-items: center;\n                justify-content: center;\n            }\n\n            [content][_ngcontent-%COMP%] {\n                width: 28em;\n                max-width: calc(100vw - 1rem);\n            }\n\n            @media (prefers-color-scheme: dark) {\n                [content][_ngcontent-%COMP%] {\n                    background-color: #262626;\n                    color: #fff;\n                }\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1pc2NvbmZpZ3VyZWQuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxhQUFhO2dCQUNiLG1CQUFtQjtnQkFDbkIsdUJBQXVCO1lBQzNCOztZQUVBO2dCQUNJLFdBQVc7Z0JBQ1gsNkJBQTZCO1lBQ2pDOztZQUVBO2dCQUNJO29CQUNJLHlCQUF5QjtvQkFDekIsV0FBVztnQkFDZjtZQUNKIiwiZmlsZSI6Im1pc2NvbmZpZ3VyZWQuY29tcG9uZW50LnRzIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICA6aG9zdCB7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBbY29udGVudF0ge1xuICAgICAgICAgICAgICAgIHdpZHRoOiAyOGVtO1xuICAgICAgICAgICAgICAgIG1heC13aWR0aDogY2FsYygxMDB2dyAtIDFyZW0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBAbWVkaWEgKHByZWZlcnMtY29sb3Itc2NoZW1lOiBkYXJrKSB7XG4gICAgICAgICAgICAgICAgW2NvbnRlbnRdIHtcbiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogIzI2MjYyNjtcbiAgICAgICAgICAgICAgICAgICAgY29sb3I6ICNmZmY7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAiXX0= */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvY29tcG9uZW50cy9zcmMvbGliL21pc2NvbmZpZ3VyZWQuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxhQUFhO2dCQUNiLG1CQUFtQjtnQkFDbkIsdUJBQXVCO1lBQzNCOztZQUVBO2dCQUNJLFdBQVc7Z0JBQ1gsNkJBQTZCO1lBQ2pDOztZQUVBO2dCQUNJO29CQUNJLHlCQUF5QjtvQkFDekIsV0FBVztnQkFDZjtZQUNKOztBQUVaLHdoQ0FBd2hDIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICA6aG9zdCB7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBbY29udGVudF0ge1xuICAgICAgICAgICAgICAgIHdpZHRoOiAyOGVtO1xuICAgICAgICAgICAgICAgIG1heC13aWR0aDogY2FsYygxMDB2dyAtIDFyZW0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBAbWVkaWEgKHByZWZlcnMtY29sb3Itc2NoZW1lOiBkYXJrKSB7XG4gICAgICAgICAgICAgICAgW2NvbnRlbnRdIHtcbiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogIzI2MjYyNjtcbiAgICAgICAgICAgICAgICAgICAgY29sb3I6ICNmZmY7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAiXSwic291cmNlUm9vdCI6IiJ9 */"]
});
exports.MisconfiguredComponent = MisconfiguredComponent;

/***/ }),

/***/ 44418:
/*!**********************************************************!*\
  !*** ./libs/components/src/lib/popout-menu.component.ts ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _callSuper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/callSuper.js */ 8513)["default"]);
var _inherits = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/inherits.js */ 58160)["default"]);
var _PopoutMenuComponent;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.PopoutMenuComponent = void 0;
var core_1 = __webpack_require__(/*! @angular/core */ 37580);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @angular/common */ 60316);
var i2 = __webpack_require__(/*! @angular/material/core */ 74646);
var i3 = __webpack_require__(/*! ./icon.component */ 69434);
function PopoutMenuComponent_button_0_Template(rf, ctx) {
  if (rf & 1) {
    var _r1 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "button", 2);
    i0.ɵɵlistener("click", function PopoutMenuComponent_button_0_Template_button_click_0_listener() {
      var item_r2 = i0.ɵɵrestoreView(_r1).$implicit;
      var ctx_r2 = i0.ɵɵnextContext();
      ctx_r2.action.emit(item_r2.id);
      return i0.ɵɵresetView(ctx_r2.show = false);
    });
    i0.ɵɵelement(1, "app-icon", 3);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var item_r2 = ctx.$implicit;
    var i_r4 = ctx.index;
    var ctx_r2 = i0.ɵɵnextContext();
    i0.ɵɵstyleProp("top", ctx_r2.show ? -110 * i_r4 - 60 + "%" : "");
    i0.ɵɵadvance();
    i0.ɵɵproperty("icon", item_r2);
  }
}
var PopoutMenuComponent = /*#__PURE__*/function (_common_1$AsyncHandle) {
  function PopoutMenuComponent() {
    var _this;
    _classCallCheck(this, PopoutMenuComponent);
    _this = _callSuper(this, PopoutMenuComponent, arguments);
    /** List of available actions */
    _this.actions = [];
    /** Emitter for user actions */
    _this.action = new core_1.EventEmitter();
    return _this;
  }
  _inherits(PopoutMenuComponent, _common_1$AsyncHandle);
  return _createClass(PopoutMenuComponent, [{
    key: "close",
    value: function close() {
      var _this2 = this;
      this.timeout('close', function () {
        return _this2.show = false;
      });
    }
  }]);
}(common_1.AsyncHandler);
_PopoutMenuComponent = PopoutMenuComponent;
_PopoutMenuComponent.ɵfac = /*@__PURE__*/function () {
  var ɵPopoutMenuComponent_BaseFactory;
  return function PopoutMenuComponent_Factory(__ngFactoryType__) {
    return (ɵPopoutMenuComponent_BaseFactory || (ɵPopoutMenuComponent_BaseFactory = i0.ɵɵgetInheritedFactory(_PopoutMenuComponent)))(__ngFactoryType__ || _PopoutMenuComponent);
  };
}();
_PopoutMenuComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _PopoutMenuComponent,
  selectors: [["a-popout-menu"]],
  inputs: {
    actions: "actions"
  },
  outputs: {
    action: "action"
  },
  features: [i0.ɵɵInheritDefinitionFeature],
  decls: 4,
  vars: 4,
  consts: [["icon", "", "matRipple", "", "class", "small absolute text-base center shadow", 3, "top", "click", 4, "ngFor", "ngForOf"], ["name", "root", "icon", "", "matRipple", "", 3, "click"], ["icon", "", "matRipple", "", 1, "small", "absolute", "text-base", "center", "shadow", 3, "click"], [3, "icon"]],
  template: function PopoutMenuComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵtemplate(0, PopoutMenuComponent_button_0_Template, 2, 3, "button", 0);
      i0.ɵɵelementStart(1, "button", 1);
      i0.ɵɵlistener("click", function PopoutMenuComponent_Template_button_click_1_listener() {
        return ctx.show = !ctx.show;
      })("click", function PopoutMenuComponent_Template_button_click_1_listener() {
        return ctx.show ? ctx.close() : "";
      }, false, i0.ɵɵresolveWindow);
      i0.ɵɵelementStart(2, "app-icon");
      i0.ɵɵtext(3);
      i0.ɵɵelementEnd()();
    }
    if (rf & 2) {
      i0.ɵɵproperty("ngForOf", ctx.actions);
      i0.ɵɵadvance();
      i0.ɵɵclassProp("show", ctx.show);
      i0.ɵɵadvance(2);
      i0.ɵɵtextInterpolate(ctx.show ? "add" : "more_vert");
    }
  },
  dependencies: [i1.NgForOf, i2.MatRipple, i3.IconComponent],
  styles: ["[_nghost-%COMP%] {\n                position: relative;\n            }\n\n            app-icon[_ngcontent-%COMP%] {\n                transition: transform 200ms;\n            }\n\n            button[_ngcontent-%COMP%] {\n                background-color: #fff;\n                color: rgba(#000, 0.85);\n                font-size: 1.25rem;\n                height: 2.5em;\n                width: 2.5em;\n            }\n\n            button.show[_ngcontent-%COMP%]   app-icon[_ngcontent-%COMP%] {\n                transform: rotate(45deg);\n            }\n\n            button.small[_ngcontent-%COMP%] {\n                transition: top 200ms, left 200ms;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBvcG91dC1tZW51LmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1lBQ1k7Z0JBQ0ksa0JBQWtCO1lBQ3RCOztZQUVBO2dCQUNJLDJCQUEyQjtZQUMvQjs7WUFFQTtnQkFDSSxzQkFBc0I7Z0JBQ3RCLHVCQUF1QjtnQkFDdkIsa0JBQWtCO2dCQUNsQixhQUFhO2dCQUNiLFlBQVk7WUFDaEI7O1lBRUE7Z0JBQ0ksd0JBQXdCO1lBQzVCOztZQUVBO2dCQUNJLGlDQUFpQztZQUNyQyIsImZpbGUiOiJwb3BvdXQtbWVudS5jb21wb25lbnQudHMiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIDpob3N0IHtcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGFwcC1pY29uIHtcbiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uOiB0cmFuc2Zvcm0gMjAwbXM7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGJ1dHRvbiB7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjtcbiAgICAgICAgICAgICAgICBjb2xvcjogcmdiYSgjMDAwLCAwLjg1KTtcbiAgICAgICAgICAgICAgICBmb250LXNpemU6IDEuMjVyZW07XG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAyLjVlbTtcbiAgICAgICAgICAgICAgICB3aWR0aDogMi41ZW07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGJ1dHRvbi5zaG93IGFwcC1pY29uIHtcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IHJvdGF0ZSg0NWRlZyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGJ1dHRvbi5zbWFsbCB7XG4gICAgICAgICAgICAgICAgdHJhbnNpdGlvbjogdG9wIDIwMG1zLCBsZWZ0IDIwMG1zO1xuICAgICAgICAgICAgfVxuICAgICAgICAiXX0= */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvY29tcG9uZW50cy9zcmMvbGliL3BvcG91dC1tZW51LmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1lBQ1k7Z0JBQ0ksa0JBQWtCO1lBQ3RCOztZQUVBO2dCQUNJLDJCQUEyQjtZQUMvQjs7WUFFQTtnQkFDSSxzQkFBc0I7Z0JBQ3RCLHVCQUF1QjtnQkFDdkIsa0JBQWtCO2dCQUNsQixhQUFhO2dCQUNiLFlBQVk7WUFDaEI7O1lBRUE7Z0JBQ0ksd0JBQXdCO1lBQzVCOztZQUVBO2dCQUNJLGlDQUFpQztZQUNyQzs7QUFFWiw0dENBQTR0QyIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgOmhvc3Qge1xuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYXBwLWljb24ge1xuICAgICAgICAgICAgICAgIHRyYW5zaXRpb246IHRyYW5zZm9ybSAyMDBtcztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYnV0dG9uIHtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmO1xuICAgICAgICAgICAgICAgIGNvbG9yOiByZ2JhKCMwMDAsIDAuODUpO1xuICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMS4yNXJlbTtcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDIuNWVtO1xuICAgICAgICAgICAgICAgIHdpZHRoOiAyLjVlbTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYnV0dG9uLnNob3cgYXBwLWljb24ge1xuICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogcm90YXRlKDQ1ZGVnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYnV0dG9uLnNtYWxsIHtcbiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uOiB0b3AgMjAwbXMsIGxlZnQgMjAwbXM7XG4gICAgICAgICAgICB9XG4gICAgICAgICJdLCJzb3VyY2VSb290IjoiIn0= */"]
});
exports.PopoutMenuComponent = PopoutMenuComponent;

/***/ }),

/***/ 74846:
/*!********************************************************!*\
  !*** ./libs/components/src/lib/printable.component.ts ***!
  \********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _callSuper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/callSuper.js */ 8513)["default"]);
var _superPropGet = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/superPropGet.js */ 54514)["default"]);
var _inherits = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/inherits.js */ 58160)["default"]);
var _PrintableComponent;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.PrintableComponent = void 0;
var overlay_1 = __webpack_require__(/*! @angular/cdk/overlay */ 81570);
var portal_1 = __webpack_require__(/*! @angular/cdk/portal */ 9168);
var core_1 = __webpack_require__(/*! @angular/core */ 37580);
var async_handler_class_1 = __webpack_require__(/*! libs/common/src/lib/async-handler.class */ 75354);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @angular/cdk/overlay */ 81570);
var i2 = __webpack_require__(/*! @angular/cdk/portal */ 9168);
var i3 = __webpack_require__(/*! ./sanitise.pipe */ 54616);
var _c0 = ["printable", ""];
var _c1 = ["*"];
function PrintableComponent_ng_template_1_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelement(0, "div", 1);
    i0.ɵɵpipe(1, "sanitize");
  }
  if (rf & 2) {
    var ctx_r0 = i0.ɵɵnextContext();
    i0.ɵɵproperty("innerHTML", i0.ɵɵpipeBind1(1, 1, ctx_r0.content), i0.ɵɵsanitizeHtml);
  }
}
var PrintableComponent = /*#__PURE__*/function (_async_handler_class_) {
  function PrintableComponent(_overlay, _elem) {
    var _this;
    _classCallCheck(this, PrintableComponent);
    _this = _callSuper(this, PrintableComponent);
    _this._overlay = _overlay;
    _this._elem = _elem;
    _this.content = '';
    _this._overlay_ref = null;
    return _this;
  }
  _inherits(PrintableComponent, _async_handler_class_);
  return _createClass(PrintableComponent, [{
    key: "ngOnInit",
    value: function ngOnInit() {
      this.open();
    }
  }, {
    key: "ngAfterViewInit",
    value: function ngAfterViewInit() {
      this.content = this._elem.nativeElement.outerHTML;
    }
  }, {
    key: "ngOnDestroy",
    value: function ngOnDestroy() {
      _superPropGet(PrintableComponent, "ngOnDestroy", this, 3)([]);
      this.close();
    }
  }, {
    key: "open",
    value: function open() {
      var _this2 = this;
      this.timeout('open', function () {
        if (_this2._overlay_ref) _this2.close();
        if (!_this2._portal) return;
        var default_x = 'end';
        var default_y = 'top';
        _this2._overlay_ref = _this2._overlay.create({
          hasBackdrop: false,
          positionStrategy: _this2._overlay.position().flexibleConnectedTo(document.body).withPositions([{
            originX: default_x,
            originY: default_y,
            overlayX: default_x,
            overlayY: default_y
          }])
        });
        _this2._overlay_ref.attach(_this2._portal);
      }, 50);
    }
  }, {
    key: "close",
    value: function close() {
      this.clearTimeout('open');
      if (this._overlay_ref) {
        this._overlay_ref.dispose();
        this._overlay_ref = null;
      }
    }
  }]);
}(async_handler_class_1.AsyncHandler);
_PrintableComponent = PrintableComponent;
_PrintableComponent.ɵfac = function PrintableComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _PrintableComponent)(i0.ɵɵdirectiveInject(i1.Overlay), i0.ɵɵdirectiveInject(i0.ElementRef));
};
_PrintableComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _PrintableComponent,
  selectors: [["", "printable", ""]],
  viewQuery: function PrintableComponent_Query(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵviewQuery(portal_1.CdkPortal, 5);
    }
    if (rf & 2) {
      var _t;
      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx._portal = _t.first);
    }
  },
  features: [i0.ɵɵInheritDefinitionFeature],
  attrs: _c0,
  ngContentSelectors: _c1,
  decls: 2,
  vars: 0,
  consts: [["cdk-portal", ""], ["printable-view", "", 1, "fixed", "top-0", "left-0", "flex-col", "items-end", "hidden", "print:flex", "pointer-events-none", 3, "innerHTML"]],
  template: function PrintableComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵprojectionDef();
      i0.ɵɵprojection(0);
      i0.ɵɵtemplate(1, PrintableComponent_ng_template_1_Template, 2, 3, "ng-template", 0);
    }
  },
  dependencies: [i2.TemplatePortalDirective, i3.SanitizePipe],
  encapsulation: 2
});
exports.PrintableComponent = PrintableComponent;

/***/ }),

/***/ 68283:
/*!*******************************************************!*\
  !*** ./libs/components/src/lib/redirect.component.ts ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _regeneratorRuntime = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/regeneratorRuntime.js */ 8698)["default"]);
var _asyncToGenerator = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/asyncToGenerator.js */ 95386)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _RedirectComponent;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.RedirectComponent = void 0;
var router_1 = __webpack_require__(/*! @angular/router */ 95072);
var operators_1 = __webpack_require__(/*! rxjs/operators */ 97303);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var organisation_service_1 = __webpack_require__(/*! libs/organisation/src/lib/organisation.service */ 19863);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @placeos/common */ 22797);
var i2 = __webpack_require__(/*! libs/organisation/src/lib/organisation.service */ 19863);
var i3 = __webpack_require__(/*! @angular/router */ 95072);
var RedirectComponent = /*#__PURE__*/function () {
  function RedirectComponent(_settings, _org, _router) {
    _classCallCheck(this, RedirectComponent);
    this._settings = _settings;
    this._org = _org;
    this._router = _router;
  }
  return _createClass(RedirectComponent, [{
    key: "ngOnInit",
    value: function () {
      var _ngOnInit = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              _context.next = 2;
              return this._settings.initialised.pipe((0, operators_1.first)(function (_) {
                return _;
              })).toPromise();
            case 2:
              _context.next = 4;
              return this._org.initialised.pipe((0, operators_1.first)(function (_) {
                return _;
              })).toPromise();
            case 4:
              if (this._settings.get('app.default_route')) {
                _context.next = 6;
                break;
              }
              return _context.abrupt("return");
            case 6:
              this._router.navigate(this._settings.get('app.default_route').split('/'));
            case 7:
            case "end":
              return _context.stop();
          }
        }, _callee, this);
      }));
      function ngOnInit() {
        return _ngOnInit.apply(this, arguments);
      }
      return ngOnInit;
    }()
  }]);
}();
_RedirectComponent = RedirectComponent;
_RedirectComponent.ɵfac = function RedirectComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _RedirectComponent)(i0.ɵɵdirectiveInject(i1.SettingsService), i0.ɵɵdirectiveInject(i2.OrganisationService), i0.ɵɵdirectiveInject(i3.Router));
};
_RedirectComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _RedirectComponent,
  selectors: [["page-redirect"]],
  decls: 0,
  vars: 0,
  template: function RedirectComponent_Template(rf, ctx) {}
});
exports.RedirectComponent = RedirectComponent;

/***/ }),

/***/ 66962:
/*!************************************************************!*\
  !*** ./libs/components/src/lib/region-select.component.ts ***!
  \************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _taggedTemplateLiteral = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js */ 9959)["default"]);
var _regeneratorRuntime = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/regeneratorRuntime.js */ 8698)["default"]);
var _asyncToGenerator = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/asyncToGenerator.js */ 95386)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _RegionSelectComponent, _templateObject;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.RegionSelectComponent = void 0;
var components_1 = __webpack_require__(/*! @placeos/components */ 51588);
var organisation_1 = __webpack_require__(/*! @placeos/organisation */ 2510);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @placeos/organisation */ 2510);
var i2 = __webpack_require__(/*! @angular/common */ 60316);
var i3 = __webpack_require__(/*! @angular/forms */ 34456);
var i4 = __webpack_require__(/*! @angular/material/radio */ 53804);
var i5 = __webpack_require__(/*! ./icon.component */ 69434);
function RegionSelectComponent_mat_radio_button_12_Template(rf, ctx) {
  if (rf & 1) {
    var _r1 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "mat-radio-button", 8);
    i0.ɵɵlistener("click", function RegionSelectComponent_mat_radio_button_12_Template_mat_radio_button_click_0_listener() {
      var item_r2 = i0.ɵɵrestoreView(_r1).$implicit;
      var ctx_r2 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r2.setRegion(item_r2));
    });
    i0.ɵɵtext(1);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var item_r2 = ctx.$implicit;
    i0.ɵɵproperty("value", item_r2.id);
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", item_r2.display_name || item_r2.name, " ");
  }
}
var RegionSelectComponent = /*#__PURE__*/_createClass(function RegionSelectComponent(_data, _org) {
  var _this = this;
  _classCallCheck(this, RegionSelectComponent);
  this._data = _data;
  this._org = _org;
  this.regions = this._org.region_list;
  this.region = this._org.active_region;
  this.setRegion = /*#__PURE__*/function () {
    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(i) {
      var _this$_data;
      return _regeneratorRuntime().wrap(function _callee$(_context) {
        while (1) switch (_context.prev = _context.next) {
          case 0:
            _context.next = 2;
            return _this._org.setRegion(i);
          case 2:
            _this._org.saveBuilding(_this._org.building.id);
            (_this$_data = _this._data) === null || _this$_data === void 0 || _this$_data.close();
          case 4:
          case "end":
            return _context.stop();
        }
      }, _callee);
    }));
    return function (_x) {
      return _ref.apply(this, arguments);
    };
  }();
  this.close = function () {
    var _this$_data2;
    return (_this$_data2 = _this._data) === null || _this$_data2 === void 0 ? void 0 : _this$_data2.close();
  };
});
_RegionSelectComponent = RegionSelectComponent;
_RegionSelectComponent.ɵfac = function RegionSelectComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _RegionSelectComponent)(i0.ɵɵdirectiveInject(components_1.CustomTooltipData), i0.ɵɵdirectiveInject(i1.OrganisationService));
};
_RegionSelectComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _RegionSelectComponent,
  selectors: [["region-select"]],
  decls: 14,
  vars: 11,
  consts: function consts() {
    var i18n_0;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_5361505502593902636$$LIBS_COMPONENTS_SRC_LIB_REGION_SELECT_COMPONENT_TS_0 = goog.getMsg("Select a region");
      i18n_0 = MSG_EXTERNAL_5361505502593902636$$LIBS_COMPONENTS_SRC_LIB_REGION_SELECT_COMPONENT_TS_0;
    } else {
      i18n_0 = $localize(_templateObject || (_templateObject = _taggedTemplateLiteral([":\u241F234e996785a944c8e8c7df16179eaa04405b3446\u241F5361505502593902636:Select a region"])));
    }
    return [i18n_0, [1, "flex", "flex-col", "w-[18.5rem]", "rounded", "bg-base-100", "shadow", "p-2", "relative", "-top-12", "-right-1", "overflow-auto", "max-h-[65vh]", 3, "click"], [1, "flex", "items-center", "space-x-2"], [1, "text-2xl"], [1, ""], [1, "text-xs", "opacity-60", "mb-4", "px-2"], [1, "flex", "flex-col", "space-y-2", "px-2", 3, "ngModel"], [3, "value", "click", 4, "ngFor", "ngForOf"], [3, "click", "value"]];
  },
  template: function RegionSelectComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵelementStart(0, "div", 1);
      i0.ɵɵlistener("click", function RegionSelectComponent_Template_div_click_0_listener() {
        return ctx.close();
      });
      i0.ɵɵelementStart(1, "div", 2)(2, "app-icon", 3);
      i0.ɵɵtext(3, "arrow_back");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(4, "div", 4);
      i0.ɵɵtext(5);
      i0.ɵɵpipe(6, "async");
      i0.ɵɵpipe(7, "async");
      i0.ɵɵelementEnd()();
      i0.ɵɵelementStart(8, "div", 5);
      i0.ɵɵi18n(9, 0);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(10, "mat-radio-group", 6);
      i0.ɵɵpipe(11, "async");
      i0.ɵɵtemplate(12, RegionSelectComponent_mat_radio_button_12_Template, 2, 2, "mat-radio-button", 7);
      i0.ɵɵpipe(13, "async");
      i0.ɵɵelementEnd()();
    }
    if (rf & 2) {
      var tmp_0_0;
      var tmp_1_0;
      i0.ɵɵadvance(5);
      i0.ɵɵtextInterpolate1(" ", ((tmp_0_0 = i0.ɵɵpipeBind1(6, 3, ctx.region)) == null ? null : tmp_0_0.display_name) || ((tmp_0_0 = i0.ɵɵpipeBind1(7, 5, ctx.region)) == null ? null : tmp_0_0.name), " ");
      i0.ɵɵadvance(5);
      i0.ɵɵproperty("ngModel", (tmp_1_0 = i0.ɵɵpipeBind1(11, 7, ctx.region)) == null ? null : tmp_1_0.id);
      i0.ɵɵadvance(2);
      i0.ɵɵproperty("ngForOf", i0.ɵɵpipeBind1(13, 9, ctx.regions));
    }
  },
  dependencies: [i2.NgForOf, i3.NgControlStatus, i3.NgModel, i4.MatRadioGroup, i4.MatRadioButton, i5.IconComponent, i2.AsyncPipe]
});
exports.RegionSelectComponent = RegionSelectComponent;

/***/ }),

/***/ 26781:
/*!**********************************************!*\
  !*** ./libs/components/src/lib/safe.pipe.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _SafePipe;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.SafePipe = void 0;
var platform_browser_1 = __webpack_require__(/*! @angular/platform-browser */ 80436);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @angular/platform-browser */ 80436);
var SafePipe = /*#__PURE__*/function () {
  function SafePipe(sanitizer) {
    _classCallCheck(this, SafePipe);
    this.sanitizer = sanitizer;
  }
  /**
   * Sanitizes the string allowing it to be injected into a template
   * @param value String to sanitize
   * @param type Type of value to sanitise. `resource`, `url`, `script`, `style` or `html`
   */
  return _createClass(SafePipe, [{
    key: "transform",
    value: function transform(value) {
      var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'html';
      switch (type) {
        case 'resource':
          return this.sanitizer.bypassSecurityTrustResourceUrl(value);
        case 'url':
          return this.sanitizer.bypassSecurityTrustUrl(value);
        case 'script':
          return this.sanitizer.bypassSecurityTrustScript(value);
        case 'style':
          return this.sanitizer.bypassSecurityTrustStyle(value);
        default:
          return this.sanitizer.bypassSecurityTrustHtml(value);
      }
    }
  }]);
}();
_SafePipe = SafePipe;
_SafePipe.ɵfac = function SafePipe_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _SafePipe)(i0.ɵɵdirectiveInject(i1.DomSanitizer, 16));
};
_SafePipe.ɵpipe = /*@__PURE__*/i0.ɵɵdefinePipe({
  name: "safe",
  type: _SafePipe,
  pure: true
});
exports.SafePipe = SafePipe;

/***/ }),

/***/ 54616:
/*!**************************************************!*\
  !*** ./libs/components/src/lib/sanitise.pipe.ts ***!
  \**************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _SanitizePipe;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.SanitizePipe = void 0;
var platform_browser_1 = __webpack_require__(/*! @angular/platform-browser */ 80436);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @angular/platform-browser */ 80436);
var SecurityContext;
(function (SecurityContext) {
  SecurityContext[SecurityContext["NONE"] = 0] = "NONE";
  SecurityContext[SecurityContext["HTML"] = 1] = "HTML";
  SecurityContext[SecurityContext["STYLE"] = 2] = "STYLE";
  SecurityContext[SecurityContext["SCRIPT"] = 3] = "SCRIPT";
  SecurityContext[SecurityContext["URL"] = 4] = "URL";
  SecurityContext[SecurityContext["RESOURCE_URL"] = 5] = "RESOURCE_URL";
})(SecurityContext || (SecurityContext = {}));
var SanitizePipe = /*#__PURE__*/function () {
  function SanitizePipe(sanitizer) {
    _classCallCheck(this, SanitizePipe);
    this.sanitizer = sanitizer;
  }
  return _createClass(SanitizePipe, [{
    key: "transform",
    value: function transform(value) {
      var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'html';
      switch (type) {
        case 'resource':
          return this.sanitizer.sanitize(SecurityContext.RESOURCE_URL, value);
        case 'url':
          return this.sanitizer.sanitize(SecurityContext.URL, value);
        case 'script':
          return this.sanitizer.sanitize(SecurityContext.SCRIPT, value);
        case 'style':
          return this.sanitizer.sanitize(SecurityContext.STYLE, value);
        default:
          return this.sanitizer.sanitize(SecurityContext.HTML, value);
      }
    }
  }]);
}();
_SanitizePipe = SanitizePipe;
_SanitizePipe.ɵfac = function SanitizePipe_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _SanitizePipe)(i0.ɵɵdirectiveInject(i1.DomSanitizer, 16));
};
_SanitizePipe.ɵpipe = /*@__PURE__*/i0.ɵɵdefinePipe({
  name: "sanitize",
  type: _SanitizePipe,
  pure: true
});
exports.SanitizePipe = SanitizePipe;

/***/ }),

/***/ 88328:
/*!***********************************************************!*\
  !*** ./libs/components/src/lib/simple-table.component.ts ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _regeneratorRuntime = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/regeneratorRuntime.js */ 8698)["default"]);
var _asyncToGenerator = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/asyncToGenerator.js */ 95386)["default"]);
var _toConsumableArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/toConsumableArray.js */ 86033)["default"]);
var _slicedToArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/slicedToArray.js */ 6282)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _callSuper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/callSuper.js */ 8513)["default"]);
var _inherits = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/inherits.js */ 58160)["default"]);
var _SimpleTableComponent;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.SimpleTableComponent = void 0;
var core_1 = __webpack_require__(/*! @angular/core */ 37580);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var rxjs_1 = __webpack_require__(/*! rxjs */ 15681);
var operators_1 = __webpack_require__(/*! rxjs/operators */ 97303);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @angular/common */ 60316);
var i2 = __webpack_require__(/*! @angular/material/core */ 74646);
var i3 = __webpack_require__(/*! @angular/material/checkbox */ 97024);
var i4 = __webpack_require__(/*! ./icon.component */ 69434);
var _c0 = function _c0(a0, a1, a2, a3, a4, a5, a6) {
  return {
    first: a0,
    last: a1,
    index: a2,
    data: a3,
    row: a4,
    key: a5,
    name: a6
  };
};
var _c1 = function _c1(a0, a1, a2, a3) {
  return {
    first: a0,
    last: a1,
    index: a2,
    row: a3
  };
};
function SimpleTableComponent_div_1_Template(rf, ctx) {
  if (rf & 1) {
    var _r1 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 6)(1, "mat-checkbox", 7);
    i0.ɵɵpipe(2, "async");
    i0.ɵɵpipe(3, "async");
    i0.ɵɵlistener("change", function SimpleTableComponent_div_1_Template_mat_checkbox_change_1_listener($event) {
      i0.ɵɵrestoreView(_r1);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.selectAll($event.checked));
    });
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var tmp_2_0;
    var tmp_3_0;
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵstyleProp("grid-column", "1 / 2");
    i0.ɵɵadvance();
    i0.ɵɵproperty("checked", ctx_r1.selected.length === ((tmp_2_0 = i0.ɵɵpipeBind1(2, 4, ctx_r1.data_view$)) == null ? null : tmp_2_0.length))("indeterminate", ctx_r1.selected.length > 0 && ctx_r1.selected.length < ((tmp_3_0 = i0.ɵɵpipeBind1(3, 6, ctx_r1.data_view$)) == null ? null : tmp_3_0.length));
  }
}
function SimpleTableComponent_button_2_app_icon_3_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "app-icon", 11);
    i0.ɵɵtext(1);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var column_r4 = i0.ɵɵnextContext().$implicit;
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", (ctx_r1.sort == null ? null : ctx_r1.sort.key) === column_r4.key && (ctx_r1.sort == null ? null : ctx_r1.sort.reverse) ? "arrow_upward" : "arrow_downward", " ");
  }
}
function SimpleTableComponent_button_2_Template(rf, ctx) {
  if (rf & 1) {
    var _r3 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "button", 8);
    i0.ɵɵlistener("click", function SimpleTableComponent_button_2_Template_button_click_0_listener() {
      var column_r4 = i0.ɵɵrestoreView(_r3).$implicit;
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.setSort(column_r4.key));
    });
    i0.ɵɵelementStart(1, "div", 9);
    i0.ɵɵtext(2);
    i0.ɵɵelementEnd();
    i0.ɵɵtemplate(3, SimpleTableComponent_button_2_app_icon_3_Template, 2, 1, "app-icon", 10);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var column_r4 = ctx.$implicit;
    var i_r5 = ctx.index;
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵstyleProp("grid-column", 1 + i_r5 + (ctx_r1.selectable ? 1 : 0) + " / " + (2 + i_r5 + (ctx_r1.selectable ? 1 : 0)));
    i0.ɵɵclassProp("pointer-events-none", !ctx_r1.sortable || column_r4.sortable === false)("active", (ctx_r1.sort == null ? null : ctx_r1.sort.key) === column_r4.key)("border-r", i_r5 !== ctx_r1.active_columns.length - 1)("width", column_r4.size);
    i0.ɵɵproperty("id", "column-" + column_r4.key);
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate(column_r4.name || column_r4.key);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", ctx_r1.sortable && column_r4.sortable !== false);
  }
}
function SimpleTableComponent_ng_container_3_div_1_Template(rf, ctx) {
  if (rf & 1) {
    var _r6 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 15);
    i0.ɵɵpipe(1, "async");
    i0.ɵɵlistener("mouseenter", function SimpleTableComponent_ng_container_3_div_1_Template_div_mouseenter_0_listener() {
      i0.ɵɵrestoreView(_r6);
      var i_r7 = i0.ɵɵnextContext().index;
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.active_row = i_r7);
    })("touchstart", function SimpleTableComponent_ng_container_3_div_1_Template_div_touchstart_0_listener() {
      i0.ɵɵrestoreView(_r6);
      var i_r7 = i0.ɵɵnextContext().index;
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.active_row = i_r7);
    });
    i0.ɵɵelementStart(2, "mat-checkbox", 16);
    i0.ɵɵlistener("change", function SimpleTableComponent_ng_container_3_div_1_Template_mat_checkbox_change_2_listener($event) {
      i0.ɵɵrestoreView(_r6);
      var i_r7 = i0.ɵɵnextContext().index;
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.select(i_r7, $event.checked));
    });
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var tmp_5_0;
    var i_r7 = i0.ɵɵnextContext().index;
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵstyleProp("grid-column", "1 / 2");
    i0.ɵɵclassProp("border-b", i_r7 !== ((tmp_5_0 = i0.ɵɵpipeBind1(1, 5, ctx_r1.data_view$)) == null ? null : tmp_5_0.length) - 1);
    i0.ɵɵadvance(2);
    i0.ɵɵproperty("checked", ctx_r1.selected.includes(i_r7));
  }
}
function SimpleTableComponent_ng_container_3_div_2_div_3_span_2_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "span", 23);
    i0.ɵɵtext(1);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var column_r9 = i0.ɵɵnextContext(2).$implicit;
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", column_r9.empty || "N/A", " ");
  }
}
function SimpleTableComponent_ng_container_3_div_2_div_3_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 21);
    i0.ɵɵtext(1);
    i0.ɵɵtemplate(2, SimpleTableComponent_ng_container_3_div_2_div_3_span_2_Template, 2, 1, "span", 22);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var tmp_7_0;
    var column_r9 = i0.ɵɵnextContext().$implicit;
    var ctx_r9 = i0.ɵɵnextContext();
    var row_r11 = ctx_r9.$implicit;
    var i_r7 = ctx_r9.index;
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", (tmp_7_0 = row_r11[column_r9.key]) !== null && tmp_7_0 !== undefined ? tmp_7_0 : column_r9.key === "_index" ? i_r7 + 1 : row_r11[column_r9.key], " ");
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", (row_r11[column_r9.key] == null || row_r11[column_r9.key] === "") && column_r9.key !== "_index");
  }
}
function SimpleTableComponent_ng_container_3_div_2_ng_container_4_ng_container_1_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementContainer(0);
  }
}
function SimpleTableComponent_ng_container_3_div_2_ng_container_4_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵtemplate(1, SimpleTableComponent_ng_container_3_div_2_ng_container_4_ng_container_1_Template, 1, 0, "ng-container", 24);
    i0.ɵɵpipe(2, "async");
    i0.ɵɵpipe(3, "async");
    i0.ɵɵelementContainerEnd();
  }
  if (rf & 2) {
    var tmp_8_0;
    var column_r9 = i0.ɵɵnextContext().$implicit;
    var ctx_r9 = i0.ɵɵnextContext();
    var row_r11 = ctx_r9.$implicit;
    var i_r7 = ctx_r9.index;
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngTemplateOutlet", column_r9.content)("ngTemplateOutletContext", i0.ɵɵpureFunction7(6, _c0, i_r7 === 0, i_r7 === ((tmp_8_0 = i0.ɵɵpipeBind1(2, 2, ctx_r1.data_view$)) == null ? null : tmp_8_0.length) - 1 || i_r7 === ((tmp_8_0 = i0.ɵɵpipeBind1(3, 4, ctx_r1.data_view$)) == null ? null : tmp_8_0.length) - 1, i_r7, row_r11[column_r9.key], row_r11, column_r9.key, column_r9.name || column_r9.key));
  }
}
function SimpleTableComponent_ng_container_3_div_2_Template(rf, ctx) {
  if (rf & 1) {
    var _r8 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 17);
    i0.ɵɵpipe(1, "async");
    i0.ɵɵlistener("mouseenter", function SimpleTableComponent_ng_container_3_div_2_Template_div_mouseenter_0_listener() {
      i0.ɵɵrestoreView(_r8);
      var i_r7 = i0.ɵɵnextContext().index;
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.active_row = i_r7);
    })("touchstart", function SimpleTableComponent_ng_container_3_div_2_Template_div_touchstart_0_listener() {
      i0.ɵɵrestoreView(_r8);
      var i_r7 = i0.ɵɵnextContext().index;
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.active_row = i_r7);
    });
    i0.ɵɵelementContainerStart(2, 18);
    i0.ɵɵtemplate(3, SimpleTableComponent_ng_container_3_div_2_div_3_Template, 3, 2, "div", 19)(4, SimpleTableComponent_ng_container_3_div_2_ng_container_4_Template, 4, 14, "ng-container", 20);
    i0.ɵɵelementContainerEnd();
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var tmp_7_0;
    var column_r9 = ctx.$implicit;
    var j_r12 = ctx.index;
    var i_r7 = i0.ɵɵnextContext().index;
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵstyleProp("grid-column", 1 + j_r12 + (ctx_r1.selectable ? 1 : 0) + " / " + (2 + j_r12 + (ctx_r1.selectable ? 1 : 0)));
    i0.ɵɵclassProp("border-b", i_r7 !== ((tmp_7_0 = i0.ɵɵpipeBind1(1, 10, ctx_r1.data_view$)) == null ? null : tmp_7_0.length) - 1)("border-r", j_r12 !== ctx_r1.active_columns.length - 1)("width", column_r9.size);
    i0.ɵɵadvance(2);
    i0.ɵɵproperty("ngSwitch", ctx_r1.columnType(column_r9));
    i0.ɵɵadvance(2);
    i0.ɵɵproperty("ngSwitchCase", "template");
  }
}
function SimpleTableComponent_ng_container_3_div_3_ng_container_1_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementContainer(0);
  }
}
function SimpleTableComponent_ng_container_3_div_3_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 25);
    i0.ɵɵtemplate(1, SimpleTableComponent_ng_container_3_div_3_ng_container_1_Template, 1, 0, "ng-container", 24);
    i0.ɵɵpipe(2, "async");
    i0.ɵɵpipe(3, "async");
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var tmp_6_0;
    var ctx_r9 = i0.ɵɵnextContext();
    var row_r11 = ctx_r9.$implicit;
    var i_r7 = ctx_r9.index;
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵstyleProp("grid-column", "span " + ctx_r1.active_columns.length);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngTemplateOutlet", ctx_r1.child_template)("ngTemplateOutletContext", i0.ɵɵpureFunction4(8, _c1, i_r7 === 0, i_r7 === ((tmp_6_0 = i0.ɵɵpipeBind1(2, 4, ctx_r1.data_view$)) == null ? null : tmp_6_0.length) - 1 || i_r7 === ((tmp_6_0 = i0.ɵɵpipeBind1(3, 6, ctx_r1.data_view$)) == null ? null : tmp_6_0.length) - 1, i_r7, row_r11));
  }
}
function SimpleTableComponent_ng_container_3_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵtemplate(1, SimpleTableComponent_ng_container_3_div_1_Template, 3, 7, "div", 12)(2, SimpleTableComponent_ng_container_3_div_2_Template, 5, 12, "div", 13)(3, SimpleTableComponent_ng_container_3_div_3_Template, 4, 13, "div", 14);
    i0.ɵɵelementContainerEnd();
  }
  if (rf & 2) {
    var row_r11 = ctx.$implicit;
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", ctx_r1.selectable);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngForOf", ctx_r1.active_columns);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", ctx_r1.show_children[row_r11.id] && ctx_r1.child_template);
  }
}
function SimpleTableComponent_div_6_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 26);
    i0.ɵɵtext(1);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵstyleProp("grid-column-start", "span " + ctx_r1.active_columns.length);
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", ctx_r1.empty_message, " ");
  }
}
function SimpleTableComponent_div_8_Template(rf, ctx) {
  if (rf & 1) {
    var _r13 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 27)(1, "div", 28);
    i0.ɵɵtext(2);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(3, "button", 29);
    i0.ɵɵlistener("click", function SimpleTableComponent_div_8_Template_button_click_3_listener() {
      i0.ɵɵrestoreView(_r13);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.setPage(ctx_r1.page - 1));
    });
    i0.ɵɵelementStart(4, "app-icon");
    i0.ɵɵtext(5, "chevron_left");
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(6, "button", 29);
    i0.ɵɵlistener("click", function SimpleTableComponent_div_8_Template_button_click_6_listener() {
      i0.ɵɵrestoreView(_r13);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.setPage(ctx_r1.page + 1));
    });
    i0.ɵɵelementStart(7, "app-icon");
    i0.ɵɵtext(8, "chevron_right");
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(9, "button", 29);
    i0.ɵɵlistener("click", function SimpleTableComponent_div_8_Template_button_click_9_listener() {
      i0.ɵɵrestoreView(_r13);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.setPage(0));
    });
    i0.ɵɵelementStart(10, "app-icon");
    i0.ɵɵtext(11, "first_page");
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(12, "button", 29);
    i0.ɵɵlistener("click", function SimpleTableComponent_div_8_Template_button_click_12_listener() {
      i0.ɵɵrestoreView(_r13);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.setPage(ctx_r1.total_pages - 1));
    });
    i0.ɵɵelementStart(13, "app-icon");
    i0.ɵɵtext(14, "last_page");
    i0.ɵɵelementEnd()()();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate3(" ", ctx_r1.page * (ctx_r1.page_size || 9999) + 1, " \u2013 ", (ctx_r1.page + 1) * (ctx_r1.page_size || 9999) > ctx_r1.total_count ? ctx_r1.total_count : (ctx_r1.page + 1) * (ctx_r1.page_size || 9999), " of ", ctx_r1.total_count, " ");
    i0.ɵɵadvance();
    i0.ɵɵproperty("disabled", ctx_r1.page === 0);
    i0.ɵɵadvance(3);
    i0.ɵɵproperty("disabled", ctx_r1.page === ctx_r1.total_pages - 1);
    i0.ɵɵadvance(3);
    i0.ɵɵproperty("disabled", ctx_r1.page === 0);
    i0.ɵɵadvance(3);
    i0.ɵɵproperty("disabled", ctx_r1.page === ctx_r1.total_pages - 1);
  }
}
var SimpleTableComponent = /*#__PURE__*/function (_common_1$AsyncHandle) {
  function SimpleTableComponent() {
    var _this;
    _classCallCheck(this, SimpleTableComponent);
    _this = _callSuper(this, SimpleTableComponent, arguments);
    _this.columns = [];
    _this.selectable = false;
    _this.filter = '';
    _this.sortable = false;
    _this.selected = [];
    _this.page_size = 0;
    _this.empty_message = 'No data to list';
    _this.child_template = null;
    _this.show_children = {};
    _this.selectedChange = new core_1.EventEmitter();
    _this.rowClicked = new core_1.EventEmitter();
    _this.page = 0;
    _this.total_count = 0;
    _this.total_pages = 0;
    _this.active_row = -1;
    _this.active_columns = [];
    _this._data$ = new rxjs_1.BehaviorSubject([]);
    _this._filter$ = new rxjs_1.BehaviorSubject('');
    _this._sort$ = new rxjs_1.BehaviorSubject(null);
    _this.data_view$ = null;
    return _this;
  }
  _inherits(SimpleTableComponent, _common_1$AsyncHandle);
  return _createClass(SimpleTableComponent, [{
    key: "sort",
    get: function get() {
      return this._sort$.getValue();
    }
  }, {
    key: "data$",
    get: function get() {
      return this.data instanceof Array ? this._data$ : this.data;
    }
  }, {
    key: "column_count",
    get: function get() {
      return this.active_columns.length + (this.selectable ? 1 : 0);
    }
  }, {
    key: "column_template",
    get: function get() {
      var template = this.active_columns.map(function (_) {
        return _.size || 'auto';
      }).join(' ');
      return this.selectable ? "3.5rem ".concat(template) : template;
    }
  }, {
    key: "ngOnChanges",
    value: function ngOnChanges(changes) {
      var _this2 = this;
      if (changes.filter) {
        this._filter$.next(this.filter);
      }
      if (changes.columns) {
        this.active_columns = this.columns.filter(function (_) {
          return _.show !== false;
        });
      }
      if (changes.data) {
        this.data_view$ = (0, rxjs_1.combineLatest)([this.data$, this._filter$, this._sort$]).pipe((0, operators_1.debounceTime)(300), (0, operators_1.map)(function (_ref) {
          var _ref2 = _slicedToArray(_ref, 3),
            data = _ref2[0],
            filter = _ref2[1],
            sort = _ref2[2];
          data = _toConsumableArray(data);
          if (filter) {
            data = data.filter(function (_) {
              return Object.values(_).some(function (i) {
                var _JSON$stringify;
                return (_JSON$stringify = JSON.stringify(i)) === null || _JSON$stringify === void 0 ? void 0 : _JSON$stringify.toLowerCase().includes((filter || '').toLowerCase());
              });
            });
          }
          if (sort && data.length) {
            var type = typeof data[0][sort.key];
            if (type === 'number') {
              data = data.sort(function (a, b) {
                var result = a[sort.key] - b[sort.key];
                return sort.reverse ? -result : result;
              });
            } else {
              data = data.sort(function (a, b) {
                var a_value = JSON.stringify(a[sort.key] || '');
                var b_value = JSON.stringify(b[sort.key] || '');
                var result = a_value.localeCompare(b_value);
                return sort.reverse ? -result : result;
              });
            }
          }
          _this2.selected = [];
          _this2.page = 0;
          if (_this2.page_size) {
            _this2.total_count = data.length;
            _this2.total_pages = Math.ceil(_this2.total_count / _this2.page_size);
          }
          return data;
        }), (0, operators_1.shareReplay)(1));
      }
    }
  }, {
    key: "columnType",
    value: function columnType(column) {
      return column.content instanceof core_1.TemplateRef ? 'template' : 'raw';
    }
  }, {
    key: "gridSquare",
    value: function gridSquare(row, column) {
      return "".concat(row, " / ").concat(column, " / ").concat(row + 1, " / ").concat(column + 1);
    }
  }, {
    key: "select",
    value: function select(index, state) {
      if (state) this.selected.push(index);else this.selected = this.selected.filter(function (i) {
        return i !== index;
      });
    }
  }, {
    key: "selectAll",
    value: function () {
      var _selectAll = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(state) {
        var list;
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              _context.next = 2;
              return this.data_view$.pipe((0, operators_1.take)(1)).toPromise();
            case 2:
              list = _context.sent;
              if (state) this.selected = list.map(function (_, i) {
                return i;
              });else this.selected = [];
            case 4:
            case "end":
              return _context.stop();
          }
        }, _callee, this);
      }));
      function selectAll(_x) {
        return _selectAll.apply(this, arguments);
      }
      return selectAll;
    }()
  }, {
    key: "setSort",
    value: function setSort(key) {
      var sort = this._sort$.getValue();
      if (!sort || sort.key !== key) {
        this._sort$.next({
          key: key,
          reverse: false
        });
      } else if (!sort.reverse) {
        this._sort$.next({
          key: key,
          reverse: true
        });
      } else {
        this._sort$.next(null);
      }
    }
  }, {
    key: "setPage",
    value: function setPage(page) {
      var _this3 = this;
      this.timeout('set_page', function () {
        return _this3.page = page;
      }, 100);
    }
  }]);
}(common_1.AsyncHandler);
_SimpleTableComponent = SimpleTableComponent;
_SimpleTableComponent.ɵfac = /*@__PURE__*/function () {
  var ɵSimpleTableComponent_BaseFactory;
  return function SimpleTableComponent_Factory(__ngFactoryType__) {
    return (ɵSimpleTableComponent_BaseFactory || (ɵSimpleTableComponent_BaseFactory = i0.ɵɵgetInheritedFactory(_SimpleTableComponent)))(__ngFactoryType__ || _SimpleTableComponent);
  };
}();
_SimpleTableComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _SimpleTableComponent,
  selectors: [["simple-table"]],
  inputs: {
    data: "data",
    columns: "columns",
    selectable: "selectable",
    filter: "filter",
    sortable: "sortable",
    selected: "selected",
    page_size: "page_size",
    empty_message: "empty_message",
    child_template: "child_template",
    show_children: "show_children"
  },
  outputs: {
    selectedChange: "selectedChange",
    rowClicked: "rowClicked"
  },
  features: [i0.ɵɵInheritDefinitionFeature, i0.ɵɵNgOnChangesFeature],
  decls: 9,
  vars: 15,
  consts: [["role", "table", 1, "grid", "border", "border-base-300", 3, "click", "touchend", "mouseleave"], ["id", "column-selector", "class", "sticky top-0 flex items-center justify-between px-2 border-r border-b border-base-200 bg-base-300 min-h-full z-20", 3, "gridColumn", 4, "ngIf"], ["header", "", "matRipple", "", "class", "sticky top-0 flex items-center justify-between p-4 border-b border-base-200 bg-base-300 min-h-full z-20", 3, "id", "gridColumn", "pointer-events-none", "active", "border-r", "width", "click", 4, "ngFor", "ngForOf"], [4, "ngFor", "ngForOf"], ["class", "flex items-center justify-center p-8 opacity-30", 3, "gridColumnStart", 4, "ngIf"], ["class", "sticky bottom-0 w-full flex items-center justify-end space-x-2 p-2 bg-base-200", 4, "ngIf"], ["id", "column-selector", 1, "sticky", "top-0", "flex", "items-center", "justify-between", "px-2", "border-r", "border-b", "border-base-200", "bg-base-300", "min-h-full", "z-20"], [3, "change", "checked", "indeterminate"], ["header", "", "matRipple", "", 1, "sticky", "top-0", "flex", "items-center", "justify-between", "p-4", "border-b", "border-base-200", "bg-base-300", "min-h-full", "z-20", 3, "click", "id"], [1, "font-medium"], ["class", "text-[1.25em]", 4, "ngIf"], [1, "text-[1.25em]"], ["id", "column-selector", "class", "flex items-center justify-between px-2 border-r border-base-200 min-h-full z-10", 3, "gridColumn", "border-b", "mouseenter", "touchstart", 4, "ngIf"], ["class", "flex items-center justify-between border-base-200 min-h-full z-10", 3, "gridColumn", "border-b", "border-r", "width", "mouseenter", "touchstart", 4, "ngFor", "ngForOf"], ["child-node", "", "class", "border-b last:border-t last:border-b-0 border-base-200", 3, "gridColumn", 4, "ngIf"], ["id", "column-selector", 1, "flex", "items-center", "justify-between", "px-2", "border-r", "border-base-200", "min-h-full", "z-10", 3, "mouseenter", "touchstart"], [3, "change", "checked"], [1, "flex", "items-center", "justify-between", "border-base-200", "min-h-full", "z-10", 3, "mouseenter", "touchstart"], [3, "ngSwitch"], ["class", "p-4", 4, "ngSwitchDefault"], [4, "ngSwitchCase"], [1, "p-4"], ["class", "opacity-30", 4, "ngIf"], [1, "opacity-30"], [4, "ngTemplateOutlet", "ngTemplateOutletContext"], ["child-node", "", 1, "border-b", "last:border-t", "last:border-b-0", "border-base-200"], [1, "flex", "items-center", "justify-center", "p-8", "opacity-30"], [1, "sticky", "bottom-0", "w-full", "flex", "items-center", "justify-end", "space-x-2", "p-2", "bg-base-200"], [1, "px-4", "py-2"], ["icon", "", "matRipple", "", 3, "click", "disabled"]],
  template: function SimpleTableComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵelementStart(0, "div", 0);
      i0.ɵɵlistener("click", function SimpleTableComponent_Template_div_click_0_listener() {
        return ctx.active_row >= 0 ? ctx.rowClicked.emit(ctx.active_row) : null;
      })("touchend", function SimpleTableComponent_Template_div_touchend_0_listener() {
        return ctx.active_row = -1;
      })("mouseleave", function SimpleTableComponent_Template_div_mouseleave_0_listener() {
        return ctx.active_row = -1;
      });
      i0.ɵɵtemplate(1, SimpleTableComponent_div_1_Template, 4, 8, "div", 1)(2, SimpleTableComponent_button_2_Template, 4, 13, "button", 2)(3, SimpleTableComponent_ng_container_3_Template, 4, 3, "ng-container", 3);
      i0.ɵɵpipe(4, "async");
      i0.ɵɵpipe(5, "slice");
      i0.ɵɵtemplate(6, SimpleTableComponent_div_6_Template, 2, 3, "div", 4);
      i0.ɵɵpipe(7, "async");
      i0.ɵɵelementEnd();
      i0.ɵɵtemplate(8, SimpleTableComponent_div_8_Template, 15, 7, "div", 5);
    }
    if (rf & 2) {
      var tmp_4_0;
      i0.ɵɵstyleProp("grid-template-columns", ctx.column_template);
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", ctx.selectable);
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngForOf", ctx.active_columns);
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngForOf", i0.ɵɵpipeBind3(5, 9, i0.ɵɵpipeBind1(4, 7, ctx.data_view$), ctx.page * (ctx.page_size || 9999), (ctx.page + 1) * (ctx.page_size || 9999)));
      i0.ɵɵadvance(3);
      i0.ɵɵproperty("ngIf", !((tmp_4_0 = i0.ɵɵpipeBind1(7, 13, ctx.data_view$)) == null ? null : tmp_4_0.length));
      i0.ɵɵadvance(2);
      i0.ɵɵproperty("ngIf", ctx.page_size);
    }
  },
  dependencies: [i1.NgForOf, i1.NgIf, i1.NgTemplateOutlet, i1.NgSwitch, i1.NgSwitchCase, i1.NgSwitchDefault, i2.MatRipple, i3.MatCheckbox, i4.IconComponent, i1.AsyncPipe, i1.SlicePipe],
  styles: ["[_nghost-%COMP%], \n   [_nghost-%COMP%]    > button[_ngcontent-%COMP%] {\n                min-width: 100%;\n            }\n\n            [header][_ngcontent-%COMP%]   app-icon[_ngcontent-%COMP%] {\n                opacity: 0;\n            }\n            [header][_ngcontent-%COMP%]:hover   app-icon[_ngcontent-%COMP%] {\n                opacity: 0.3;\n            }\n            [header][_ngcontent-%COMP%]:hover.pointer-events-none   app-icon[_ngcontent-%COMP%] {\n                opacity: 0;\n            }\n            [header].active[_ngcontent-%COMP%]   app-icon[_ngcontent-%COMP%] {\n                opacity: 1;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNpbXBsZS10YWJsZS5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZOztnQkFFSSxlQUFlO1lBQ25COztZQUVBO2dCQUNJLFVBQVU7WUFDZDtZQUNBO2dCQUNJLFlBQVk7WUFDaEI7WUFDQTtnQkFDSSxVQUFVO1lBQ2Q7WUFDQTtnQkFDSSxVQUFVO1lBQ2QiLCJmaWxlIjoic2ltcGxlLXRhYmxlLmNvbXBvbmVudC50cyIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgOmhvc3QsXG4gICAgICAgICAgICA6aG9zdCA+IGJ1dHRvbiB7XG4gICAgICAgICAgICAgICAgbWluLXdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBbaGVhZGVyXSBhcHAtaWNvbiB7XG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFtoZWFkZXJdOmhvdmVyIGFwcC1pY29uIHtcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLjM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBbaGVhZGVyXTpob3Zlci5wb2ludGVyLWV2ZW50cy1ub25lIGFwcC1pY29uIHtcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgW2hlYWRlcl0uYWN0aXZlIGFwcC1pY29uIHtcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAiXX0= */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvY29tcG9uZW50cy9zcmMvbGliL3NpbXBsZS10YWJsZS5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZOztnQkFFSSxlQUFlO1lBQ25COztZQUVBO2dCQUNJLFVBQVU7WUFDZDtZQUNBO2dCQUNJLFlBQVk7WUFDaEI7WUFDQTtnQkFDSSxVQUFVO1lBQ2Q7WUFDQTtnQkFDSSxVQUFVO1lBQ2Q7O0FBRVosZytCQUFnK0IiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIDpob3N0LFxuICAgICAgICAgICAgOmhvc3QgPiBidXR0b24ge1xuICAgICAgICAgICAgICAgIG1pbi13aWR0aDogMTAwJTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgW2hlYWRlcl0gYXBwLWljb24ge1xuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBbaGVhZGVyXTpob3ZlciBhcHAtaWNvbiB7XG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMC4zO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgW2hlYWRlcl06aG92ZXIucG9pbnRlci1ldmVudHMtbm9uZSBhcHAtaWNvbiB7XG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFtoZWFkZXJdLmFjdGl2ZSBhcHAtaWNvbiB7XG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl0sInNvdXJjZVJvb3QiOiIifQ== */"]
});
exports.SimpleTableComponent = SimpleTableComponent;

/***/ }),

/***/ 91960:
/*!*************************************************************!*\
  !*** ./libs/components/src/lib/status-overlay.component.ts ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _StatusOverlayComponent;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.StatusOverlayComponent = void 0;
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @angular/common */ 60316);
var i2 = __webpack_require__(/*! @angular/material/core */ 74646);
var i3 = __webpack_require__(/*! @angular/material/progress-spinner */ 41134);
var i4 = __webpack_require__(/*! ./icon.component */ 69434);
var _c0 = ["*"];
var _c1 = function _c1(a0) {
  return [a0];
};
function StatusOverlayComponent_ng_container_1_ng_container_5_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵprojection(1);
    i0.ɵɵelementContainerEnd();
  }
}
function StatusOverlayComponent_ng_container_1_a_7_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "a", 8);
    i0.ɵɵtext(1);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var link_r1 = ctx.$implicit;
    i0.ɵɵproperty("routerLink", i0.ɵɵpureFunction1(2, _c1, link_r1.route));
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", link_r1.name, " ");
  }
}
function StatusOverlayComponent_ng_container_1_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵelementStart(1, "div", 4)(2, "app-icon");
    i0.ɵɵtext(3);
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(4, "div", 5);
    i0.ɵɵtemplate(5, StatusOverlayComponent_ng_container_1_ng_container_5_Template, 2, 0, "ng-container", 3);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(6, "div", 6);
    i0.ɵɵtemplate(7, StatusOverlayComponent_ng_container_1_a_7_Template, 2, 4, "a", 7);
    i0.ɵɵelementEnd();
    i0.ɵɵelementContainerEnd();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    var error_msg_r3 = i0.ɵɵreference(3);
    i0.ɵɵadvance();
    i0.ɵɵclassProp("text-success", !ctx_r1.error)("text-error", ctx_r1.error);
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate(ctx_r1.error ? "close" : "done");
    i0.ɵɵadvance(2);
    i0.ɵɵproperty("ngIf", !ctx_r1.error)("ngIfElse", error_msg_r3);
    i0.ɵɵadvance(2);
    i0.ɵɵproperty("ngForOf", ctx_r1.links);
  }
}
function StatusOverlayComponent_ng_template_2_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "p", 9);
    i0.ɵɵtext(1);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate(ctx_r1.error);
  }
}
function StatusOverlayComponent_ng_template_4_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelement(0, "mat-spinner", 10);
    i0.ɵɵelementStart(1, "p", 11);
    i0.ɵɵtext(2);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵproperty("diameter", 32);
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate(ctx_r1.loading);
  }
}
var StatusOverlayComponent = /*#__PURE__*/_createClass(function StatusOverlayComponent() {
  _classCallCheck(this, StatusOverlayComponent);
  /** Whether overlay is loading */
  this.loading = '';
  /** Details about any errors that have occurred */
  this.error = '';
  /** Links to display on success */
  this.links = [];
});
_StatusOverlayComponent = StatusOverlayComponent;
_StatusOverlayComponent.ɵfac = function StatusOverlayComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _StatusOverlayComponent)();
};
_StatusOverlayComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _StatusOverlayComponent,
  selectors: [["status-overlay"]],
  inputs: {
    loading: "loading",
    error: "error",
    links: "links"
  },
  ngContentSelectors: _c0,
  decls: 6,
  vars: 2,
  consts: [["error_msg", ""], ["load_state", ""], ["status-overlay", "", 1, "fixed", "inset-0", "flex", "flex-col", "bg-secondary", "items-center", "justify-center", "z-50", "text-white"], [4, "ngIf", "ngIfElse"], [1, "text-4xl", "rounded-full", "bg-base-100", "mb-4"], [1, "text-center", "text-lg", "mb-4"], [1, "flex", "items-center", "space-x-2"], ["btn", "", "matRipple", "", "class", "w-32", 3, "routerLink", 4, "ngFor", "ngForOf"], ["btn", "", "matRipple", "", 1, "w-32", 3, "routerLink"], ["error", ""], [1, "mb-4", 3, "diameter"], ["loading", "", 1, "text-center", "text-lg"]],
  template: function StatusOverlayComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵprojectionDef();
      i0.ɵɵelementStart(0, "div", 2);
      i0.ɵɵtemplate(1, StatusOverlayComponent_ng_container_1_Template, 8, 8, "ng-container", 3);
      i0.ɵɵelementEnd();
      i0.ɵɵtemplate(2, StatusOverlayComponent_ng_template_2_Template, 2, 1, "ng-template", null, 0, i0.ɵɵtemplateRefExtractor)(4, StatusOverlayComponent_ng_template_4_Template, 3, 2, "ng-template", null, 1, i0.ɵɵtemplateRefExtractor);
    }
    if (rf & 2) {
      var load_state_r4 = i0.ɵɵreference(5);
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", !ctx.loading)("ngIfElse", load_state_r4);
    }
  },
  dependencies: [i1.NgForOf, i1.NgIf, i2.MatRipple, i3.MatProgressSpinner, i4.IconComponent]
});
exports.StatusOverlayComponent = StatusOverlayComponent;

/***/ }),

/***/ 50907:
/*!**********************************************************!*\
  !*** ./libs/components/src/lib/status-pill.component.ts ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _StatusPillComponent;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.StatusPillComponent = void 0;
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @angular/common */ 60316);
var i2 = __webpack_require__(/*! ./icon.component */ 69434);
var _c0 = ["*"];
function StatusPillComponent_ng_container_3_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵtext(1, " check_circle ");
    i0.ɵɵelementContainerEnd();
  }
}
function StatusPillComponent_ng_container_4_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵtext(1, "cancel");
    i0.ɵɵelementContainerEnd();
  }
}
function StatusPillComponent_ng_container_5_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵtext(1, "block");
    i0.ɵɵelementContainerEnd();
  }
}
function StatusPillComponent_ng_container_6_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵtext(1, "info");
    i0.ɵɵelementContainerEnd();
  }
}
function StatusPillComponent_ng_container_7_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵtext(1, "warning");
    i0.ɵɵelementContainerEnd();
  }
}
var StatusPillComponent = /*#__PURE__*/_createClass(function StatusPillComponent() {
  _classCallCheck(this, StatusPillComponent);
});
_StatusPillComponent = StatusPillComponent;
_StatusPillComponent.ɵfac = function StatusPillComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _StatusPillComponent)();
};
_StatusPillComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _StatusPillComponent,
  selectors: [["status-pill"]],
  inputs: {
    status: "status"
  },
  ngContentSelectors: _c0,
  decls: 10,
  vars: 31,
  consts: [[1, "flex", "items-center", "bg-opacity-30", "rounded-full", "px-2", "py-1", "text-base", "space-x-2", "font-medium", "text-black"], [1, "rounded-full", "h-5", "w-5", "flex", "items-center", "justify-center"], [1, "text-2xl", 3, "ngSwitch"], [4, "ngSwitchCase"], [4, "ngSwitchDefault"]],
  template: function StatusPillComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵprojectionDef();
      i0.ɵɵelementStart(0, "div", 0)(1, "div", 1)(2, "app-icon", 2);
      i0.ɵɵtemplate(3, StatusPillComponent_ng_container_3_Template, 2, 0, "ng-container", 3)(4, StatusPillComponent_ng_container_4_Template, 2, 0, "ng-container", 3)(5, StatusPillComponent_ng_container_5_Template, 2, 0, "ng-container", 3)(6, StatusPillComponent_ng_container_6_Template, 2, 0, "ng-container", 3)(7, StatusPillComponent_ng_container_7_Template, 2, 0, "ng-container", 4);
      i0.ɵɵelementEnd()();
      i0.ɵɵelementStart(8, "div");
      i0.ɵɵprojection(9);
      i0.ɵɵelementEnd()();
    }
    if (rf & 2) {
      i0.ɵɵclassProp("bg-success-light", ctx.status === "success")("bg-warning-light", ctx.status === "warning")("bg-error-light", ctx.status === "error")("bg-info-light", ctx.status === "info")("bg-base-200", ctx.status === "neutral");
      i0.ɵɵadvance();
      i0.ɵɵclassProp("text-success", ctx.status === "success")("text-warning", ctx.status === "warning")("text-error", ctx.status === "error")("text-info", ctx.status === "info")("text-base-content", ctx.status === "neutral")("opacity-40", ctx.status === "neutral");
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngSwitch", ctx.status);
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngSwitchCase", "success");
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngSwitchCase", "error");
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngSwitchCase", "neutral");
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngSwitchCase", "info");
      i0.ɵɵadvance(2);
      i0.ɵɵclassProp("opacity-40", ctx.status === "neutral")("text-base-content", ctx.status === "neutral");
    }
  },
  dependencies: [i1.NgSwitch, i1.NgSwitchCase, i1.NgSwitchDefault, i2.IconComponent]
});
exports.StatusPillComponent = StatusPillComponent;

/***/ }),

/***/ 12976:
/*!***************************************************!*\
  !*** ./libs/components/src/lib/thumbnail.pipe.ts ***!
  \***************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _ThumbnailPipe;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.ThumbnailPipe = void 0;
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var ThumbnailPipe = /*#__PURE__*/function () {
  function ThumbnailPipe() {
    _classCallCheck(this, ThumbnailPipe);
    this._thumbnail_cache = {};
  }
  return _createClass(ThumbnailPipe, [{
    key: "transform",
    value: function transform(url) {
      var _this = this;
      if (!url) return null;
      if (!this._thumbnail_cache[url]) {
        createVideoThumbnail(url).then(function (_) {
          return _this._thumbnail_cache[url] = _;
        })["catch"](GENERATING[url] = null);
      }
      return this._thumbnail_cache[url] || '';
    }
  }]);
}();
_ThumbnailPipe = ThumbnailPipe;
_ThumbnailPipe.ɵfac = function ThumbnailPipe_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _ThumbnailPipe)();
};
_ThumbnailPipe.ɵpipe = /*@__PURE__*/i0.ɵɵdefinePipe({
  name: "thumbnail",
  type: _ThumbnailPipe,
  pure: true
});
exports.ThumbnailPipe = ThumbnailPipe;
var GENERATING = {};
function createVideoThumbnail(url) {
  if (!GENERATING[url]) {
    GENERATING[url] = new Promise(function (resolve) {
      var video = document.createElement('video');
      video.crossOrigin = 'anonymous';
      video.src = url;
      var canvas = document.createElement('canvas');
      var context = canvas.getContext('2d');
      video.addEventListener('loadedmetadata', function () {
        canvas.width = video.videoWidth;
        canvas.height = video.videoHeight;
        video.currentTime = 1;
      });
      video.addEventListener('seeked', function () {
        context.drawImage(video, 0, 0, canvas.width, canvas.height);
        var thumbnail = canvas.toDataURL('image/png');
        resolve(thumbnail);
      });
      video.load();
    });
  }
  return GENERATING[url];
}

/***/ }),

/***/ 67834:
/*!***********************************************************!*\
  !*** ./libs/components/src/lib/unauthorised.component.ts ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _taggedTemplateLiteral = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js */ 9959)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _UnauthorisedComponent, _templateObject, _templateObject2, _templateObject3;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.UnauthorisedComponent = void 0;
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var UnauthorisedComponent = /*#__PURE__*/_createClass(function UnauthorisedComponent() {
  _classCallCheck(this, UnauthorisedComponent);
});
_UnauthorisedComponent = UnauthorisedComponent;
_UnauthorisedComponent.ɵfac = function UnauthorisedComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _UnauthorisedComponent)();
};
_UnauthorisedComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _UnauthorisedComponent,
  selectors: [["app-unauthorised"]],
  decls: 9,
  vars: 0,
  consts: function consts() {
    var i18n_0;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_4136336337692896315$$LIBS_COMPONENTS_SRC_LIB_UNAUTHORISED_COMPONENT_TS_0 = goog.getMsg("Access forbidden.");
      i18n_0 = MSG_EXTERNAL_4136336337692896315$$LIBS_COMPONENTS_SRC_LIB_UNAUTHORISED_COMPONENT_TS_0;
    } else {
      i18n_0 = $localize(_templateObject || (_templateObject = _taggedTemplateLiteral([":\u241F56a20d819b6e59b0de025988a3f9ed7d6a1bc08c\u241F4136336337692896315:Access forbidden."])));
    }
    var i18n_1;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_8887025903012875176$$LIBS_COMPONENTS_SRC_LIB_UNAUTHORISED_COMPONENT_TS_1 = goog.getMsg(" You do not have permission to view this page and your access attempt has been recorded. ");
      i18n_1 = MSG_EXTERNAL_8887025903012875176$$LIBS_COMPONENTS_SRC_LIB_UNAUTHORISED_COMPONENT_TS_1;
    } else {
      i18n_1 = $localize(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([":\u241F7afe2eb69e486929c5a29d67e6f24975f97604c4\u241F8887025903012875176: You do not have permission to view this page and your access attempt has been recorded. "])));
    }
    var i18n_2;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_1824441478452454363$$LIBS_COMPONENTS_SRC_LIB_UNAUTHORISED_COMPONENT_TS_2 = goog.getMsg(" Contact your Administrator if you feel that you should have access. ");
      i18n_2 = MSG_EXTERNAL_1824441478452454363$$LIBS_COMPONENTS_SRC_LIB_UNAUTHORISED_COMPONENT_TS_2;
    } else {
      i18n_2 = $localize(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([":\u241F1520ecc736c82366b62d64a515b1c3b222c9e1df\u241F1824441478452454363: Contact your Administrator if you feel that you should have access. "])));
    }
    return [i18n_0, i18n_1, i18n_2, [1, "unauthorised", "rounded", "m-4", "text-center", "bg-base-100", "text-black", "border", "border-base-200", "p-4", "shadow"], [1, "text-4xl"], [1, "text-2xl"], [1, "py-4"]];
  },
  template: function UnauthorisedComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵelementStart(0, "div", 3)(1, "h1", 4);
      i0.ɵɵtext(2, "403");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(3, "h3", 5);
      i0.ɵɵi18n(4, 0);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(5, "p", 6);
      i0.ɵɵi18n(6, 1);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(7, "p");
      i0.ɵɵi18n(8, 2);
      i0.ɵɵelementEnd()();
    }
  },
  styles: ["[_nghost-%COMP%] {\n                display: flex;\n                align-items: center;\n                justify-content: center;\n            }\n\n            .unauthorised[_ngcontent-%COMP%] {\n                width: 28em;\n                max-width: calc(100vw - 1rem);\n            }\n\n            @media (prefers-color-scheme: dark) {\n                .unauthorised[_ngcontent-%COMP%] {\n                    background-color: #262626;\n                    color: #fff;\n                }\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVuYXV0aG9yaXNlZC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLGFBQWE7Z0JBQ2IsbUJBQW1CO2dCQUNuQix1QkFBdUI7WUFDM0I7O1lBRUE7Z0JBQ0ksV0FBVztnQkFDWCw2QkFBNkI7WUFDakM7O1lBRUE7Z0JBQ0k7b0JBQ0kseUJBQXlCO29CQUN6QixXQUFXO2dCQUNmO1lBQ0oiLCJmaWxlIjoidW5hdXRob3Jpc2VkLmNvbXBvbmVudC50cyIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgOmhvc3Qge1xuICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLnVuYXV0aG9yaXNlZCB7XG4gICAgICAgICAgICAgICAgd2lkdGg6IDI4ZW07XG4gICAgICAgICAgICAgICAgbWF4LXdpZHRoOiBjYWxjKDEwMHZ3IC0gMXJlbSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIEBtZWRpYSAocHJlZmVycy1jb2xvci1zY2hlbWU6IGRhcmspIHtcbiAgICAgICAgICAgICAgICAudW5hdXRob3Jpc2VkIHtcbiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogIzI2MjYyNjtcbiAgICAgICAgICAgICAgICAgICAgY29sb3I6ICNmZmY7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAiXX0= */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvY29tcG9uZW50cy9zcmMvbGliL3VuYXV0aG9yaXNlZC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLGFBQWE7Z0JBQ2IsbUJBQW1CO2dCQUNuQix1QkFBdUI7WUFDM0I7O1lBRUE7Z0JBQ0ksV0FBVztnQkFDWCw2QkFBNkI7WUFDakM7O1lBRUE7Z0JBQ0k7b0JBQ0kseUJBQXlCO29CQUN6QixXQUFXO2dCQUNmO1lBQ0o7O0FBRVosZ2lDQUFnaUMiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIDpob3N0IHtcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC51bmF1dGhvcmlzZWQge1xuICAgICAgICAgICAgICAgIHdpZHRoOiAyOGVtO1xuICAgICAgICAgICAgICAgIG1heC13aWR0aDogY2FsYygxMDB2dyAtIDFyZW0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBAbWVkaWEgKHByZWZlcnMtY29sb3Itc2NoZW1lOiBkYXJrKSB7XG4gICAgICAgICAgICAgICAgLnVuYXV0aG9yaXNlZCB7XG4gICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICMyNjI2MjY7XG4gICAgICAgICAgICAgICAgICAgIGNvbG9yOiAjZmZmO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgIl0sInNvdXJjZVJvb3QiOiIifQ== */"]
});
exports.UnauthorisedComponent = UnauthorisedComponent;

/***/ }),

/***/ 76871:
/*!***********************************************************************!*\
  !*** ./libs/components/src/lib/upload-permissions-modal.component.ts ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _UploadPermissionsModalComponent;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.UploadPermissionsModalComponent = void 0;
var dialog_1 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var i2 = __webpack_require__(/*! @angular/common */ 60316);
var i3 = __webpack_require__(/*! @angular/forms */ 34456);
var i4 = __webpack_require__(/*! @angular/material/core */ 74646);
var i5 = __webpack_require__(/*! @angular/material/form-field */ 24950);
var i6 = __webpack_require__(/*! @angular/material/select */ 25175);
var i7 = __webpack_require__(/*! @angular/material/input */ 95541);
var i8 = __webpack_require__(/*! @angular/material/checkbox */ 97024);
var i9 = __webpack_require__(/*! ./icon.component */ 69434);
var _c0 = function _c0(a0, a1, a2) {
  return {
    file: a0,
    is_public: a1,
    permissions: a2
  };
};
function UploadPermissionsModalComponent_div_15_Template(rf, ctx) {
  if (rf & 1) {
    var _r1 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 2)(1, "label");
    i0.ɵɵtext(2, "Permissions");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(3, "mat-form-field", 3)(4, "mat-select", 6);
    i0.ɵɵtwoWayListener("ngModelChange", function UploadPermissionsModalComponent_div_15_Template_mat_select_ngModelChange_4_listener($event) {
      i0.ɵɵrestoreView(_r1);
      var ctx_r1 = i0.ɵɵnextContext();
      i0.ɵɵtwoWayBindingSet(ctx_r1.permissions, $event) || (ctx_r1.permissions = $event);
      return i0.ɵɵresetView($event);
    });
    i0.ɵɵelementStart(5, "mat-option", 11);
    i0.ɵɵtext(6, "None");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(7, "mat-option", 12);
    i0.ɵɵtext(8, "Support");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(9, "mat-option", 13);
    i0.ɵɵtext(10, "Admin");
    i0.ɵɵelementEnd()()()();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance(4);
    i0.ɵɵtwoWayProperty("ngModel", ctx_r1.permissions);
  }
}
var UploadPermissionsModalComponent = /*#__PURE__*/function () {
  function UploadPermissionsModalComponent(_dialog_ref, _data) {
    _classCallCheck(this, UploadPermissionsModalComponent);
    this._dialog_ref = _dialog_ref;
    this._data = _data;
    /** File to upload */
    this.file = this._data.file;
    /** Whether file should be public */
    this.is_public = true;
    /** Permissions for file */
    this.permissions = 'none';
    this.file = this._data.file;
  }
  return _createClass(UploadPermissionsModalComponent, [{
    key: "close",
    value: function close() {
      this._dialog_ref.close();
    }
  }]);
}();
_UploadPermissionsModalComponent = UploadPermissionsModalComponent;
_UploadPermissionsModalComponent.ɵfac = function UploadPermissionsModalComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _UploadPermissionsModalComponent)(i0.ɵɵdirectiveInject(i1.MatDialogRef), i0.ɵɵdirectiveInject(dialog_1.MAT_DIALOG_DATA));
};
_UploadPermissionsModalComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _UploadPermissionsModalComponent,
  selectors: [["upload-permissions-modal"]],
  decls: 21,
  vars: 8,
  consts: [["btn", "", "icon", "", "mat-dialog-close", ""], [1, "p-4", "min-w-[20rem]"], [1, "flex", "flex-col", "space-y-2"], ["appearance", "outline"], ["matInput", "", "disabled", "true", "placeholder", "File Name", 3, "ngModel"], [1, "pb-4"], [3, "ngModelChange", "ngModel"], ["class", "flex flex-col space-y-2", 4, "ngIf"], [1, "flex", "items-center", "justify-end", "space-x-2", "px-4", "py-2", "border-t", "border-base-200"], ["btn", "", "mat-dialog-close", "", 1, "inverse", "w-32"], ["btn", "", 1, "w-32", 3, "mat-dialog-close"], ["value", "none"], ["value", "support"], ["value", "admin"]],
  template: function UploadPermissionsModalComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵelementStart(0, "header")(1, "h2");
      i0.ɵɵtext(2, "Upload File");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(3, "button", 0)(4, "app-icon");
      i0.ɵɵtext(5, "close");
      i0.ɵɵelementEnd()()();
      i0.ɵɵelementStart(6, "main", 1)(7, "div", 2)(8, "label");
      i0.ɵɵtext(9, "File Name");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(10, "mat-form-field", 3);
      i0.ɵɵelement(11, "input", 4);
      i0.ɵɵelementEnd()();
      i0.ɵɵelementStart(12, "div", 5)(13, "mat-checkbox", 6);
      i0.ɵɵtwoWayListener("ngModelChange", function UploadPermissionsModalComponent_Template_mat_checkbox_ngModelChange_13_listener($event) {
        i0.ɵɵtwoWayBindingSet(ctx.is_public, $event) || (ctx.is_public = $event);
        return $event;
      });
      i0.ɵɵtext(14, "Public");
      i0.ɵɵelementEnd()();
      i0.ɵɵtemplate(15, UploadPermissionsModalComponent_div_15_Template, 11, 1, "div", 7);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(16, "footer", 8)(17, "button", 9);
      i0.ɵɵtext(18, "Cancel");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(19, "button", 10);
      i0.ɵɵtext(20, " Upload ");
      i0.ɵɵelementEnd()();
    }
    if (rf & 2) {
      i0.ɵɵadvance(11);
      i0.ɵɵproperty("ngModel", ctx.file.name);
      i0.ɵɵadvance(2);
      i0.ɵɵtwoWayProperty("ngModel", ctx.is_public);
      i0.ɵɵadvance(2);
      i0.ɵɵproperty("ngIf", !ctx.is_public);
      i0.ɵɵadvance(4);
      i0.ɵɵproperty("mat-dialog-close", i0.ɵɵpureFunction3(4, _c0, ctx.file, ctx.is_public, ctx.permissions));
    }
  },
  dependencies: [i2.NgIf, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgModel, i4.MatOption, i5.MatFormField, i6.MatSelect, i1.MatDialogClose, i7.MatInput, i8.MatCheckbox, i9.IconComponent]
});
exports.UploadPermissionsModalComponent = UploadPermissionsModalComponent;

/***/ }),

/***/ 23574:
/*!**********************************************************!*\
  !*** ./libs/components/src/lib/user-avatar.component.ts ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _UserAvatarComponent;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.UserAvatarComponent = void 0;
var user_class_1 = __webpack_require__(/*! libs/users/src/lib/user.class */ 93693);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
function UserAvatarComponent_div_0_div_1_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 4);
    i0.ɵɵtext(1);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r0 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", ctx_r0.initials, " ");
  }
}
function UserAvatarComponent_div_0_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 2);
    i0.ɵɵtemplate(1, UserAvatarComponent_div_0_div_1_Template, 2, 1, "div", 3);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r0 = i0.ɵɵnextContext();
    var image_state_r2 = i0.ɵɵreference(2);
    i0.ɵɵattribute("user-id", ctx_r0.user.id);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", !ctx_r0.user.photo)("ngIfElse", image_state_r2);
  }
}
function UserAvatarComponent_ng_template_1_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelement(0, "img", 5);
  }
  if (rf & 2) {
    var ctx_r0 = i0.ɵɵnextContext();
    i0.ɵɵproperty("source", ctx_r0.user.photo);
  }
}
var UserAvatarComponent = /*#__PURE__*/function () {
  function UserAvatarComponent() {
    _classCallCheck(this, UserAvatarComponent);
  }
  return _createClass(UserAvatarComponent, [{
    key: "initials",
    get: function get() {
      if (!this.user) return 'NA';
      var name = this.user.name || '';
      var parts = name.replace(/[()[\]\-+=\\/]+/gi, '').split(' ');
      return parts.length > 1 ? "".concat(parts[0][0]).concat(parts[parts.length - 1][0]) : name.slice(0, 2);
    }
  }]);
}();
_UserAvatarComponent = UserAvatarComponent;
_UserAvatarComponent.ɵfac = function UserAvatarComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _UserAvatarComponent)();
};
_UserAvatarComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _UserAvatarComponent,
  selectors: [["a-user-avatar"]],
  inputs: {
    user: "user"
  },
  decls: 3,
  vars: 1,
  consts: [["image_state", ""], ["class", "flex items-center justify-center rounded-full overflow-hidden", 4, "ngIf"], [1, "flex", "items-center", "justify-center", "rounded-full", "overflow-hidden"], ["initials", "", "class", "text-base-content text-opacity-80 uppercase", 4, "ngIf", "ngIfElse"], ["initials", "", 1, "text-base-content", "text-opacity-80", "uppercase"], ["auth", "", 1, "h-full", "w-full", 3, "source"]],
  template: function UserAvatarComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵtemplate(0, UserAvatarComponent_div_0_Template, 2, 3, "div", 1)(1, UserAvatarComponent_ng_template_1_Template, 1, 1, "ng-template", null, 0, i0.ɵɵtemplateRefExtractor);
    }
    if (rf & 2) {
      i0.ɵɵproperty("ngIf", ctx.user);
    }
  },
  styles: ["[_nghost-%COMP%]    > div[_ngcontent-%COMP%] {\n                height: 2.5em;\n                width: 2.5em;\n                background-color: var(--b2);\n                overflow: hidden;\n                border: 2px solid var(--b1);\n            }\n\n            .initials[_ngcontent-%COMP%] {\n                font-size: 1em;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXItYXZhdGFyLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1lBQ1k7Z0JBQ0ksYUFBYTtnQkFDYixZQUFZO2dCQUNaLDJCQUEyQjtnQkFDM0IsZ0JBQWdCO2dCQUNoQiwyQkFBMkI7WUFDL0I7O1lBRUE7Z0JBQ0ksY0FBYztZQUNsQiIsImZpbGUiOiJ1c2VyLWF2YXRhci5jb21wb25lbnQudHMiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIDpob3N0ID4gZGl2IHtcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDIuNWVtO1xuICAgICAgICAgICAgICAgIHdpZHRoOiAyLjVlbTtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1iMik7XG4gICAgICAgICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgICAgICAgICAgICBib3JkZXI6IDJweCBzb2xpZCB2YXIoLS1iMSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC5pbml0aWFscyB7XG4gICAgICAgICAgICAgICAgZm9udC1zaXplOiAxZW07XG4gICAgICAgICAgICB9XG4gICAgICAgICJdfQ== */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvY29tcG9uZW50cy9zcmMvbGliL3VzZXItYXZhdGFyLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1lBQ1k7Z0JBQ0ksYUFBYTtnQkFDYixZQUFZO2dCQUNaLDJCQUEyQjtnQkFDM0IsZ0JBQWdCO2dCQUNoQiwyQkFBMkI7WUFDL0I7O1lBRUE7Z0JBQ0ksY0FBYztZQUNsQjs7QUFFWixneEJBQWd4QiIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgOmhvc3QgPiBkaXYge1xuICAgICAgICAgICAgICAgIGhlaWdodDogMi41ZW07XG4gICAgICAgICAgICAgICAgd2lkdGg6IDIuNWVtO1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWIyKTtcbiAgICAgICAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgICAgICAgICAgIGJvcmRlcjogMnB4IHNvbGlkIHZhcigtLWIxKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLmluaXRpYWxzIHtcbiAgICAgICAgICAgICAgICBmb250LXNpemU6IDFlbTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl0sInNvdXJjZVJvb3QiOiIifQ== */"]
});
exports.UserAvatarComponent = UserAvatarComponent;

/***/ }),

/***/ 74633:
/*!************************************************************!*\
  !*** ./libs/components/src/lib/user-controls.component.ts ***!
  \************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _taggedTemplateLiteral = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js */ 9959)["default"]);
var _regeneratorRuntime = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/regeneratorRuntime.js */ 8698)["default"]);
var _asyncToGenerator = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/asyncToGenerator.js */ 95386)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _UserControlsComponent, _templateObject, _templateObject2, _templateObject3, _templateObject4, _templateObject5, _templateObject6, _templateObject7, _templateObject8;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.UserControlsComponent = void 0;
var dialog_1 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var components_1 = __webpack_require__(/*! @placeos/components */ 51588);
var organisation_1 = __webpack_require__(/*! @placeos/organisation */ 2510);
var ts_client_1 = __webpack_require__(/*! @placeos/ts-client */ 35713);
var wfh_settings_modal_component_1 = __webpack_require__(/*! libs/users/src/lib/wfh-settings-modal.component */ 43022);
var accessibility_tooltip_component_1 = __webpack_require__(/*! ./accessibility-tooltip.component */ 6539);
var building_select_component_1 = __webpack_require__(/*! ./building-select.component */ 55550);
var help_tooltip_component_1 = __webpack_require__(/*! ./help-tooltip.component */ 46926);
var language_tooltip_component_1 = __webpack_require__(/*! ./language-tooltip.component */ 53835);
var region_select_component_1 = __webpack_require__(/*! ./region-select.component */ 66962);
var support_ticket_modal_component_1 = __webpack_require__(/*! libs/form-fields/src/lib/support-ticket-modal.component */ 38791);
var work_location_tooltip_component_1 = __webpack_require__(/*! ./work-location-tooltip.component */ 42792);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @placeos/common */ 22797);
var i2 = __webpack_require__(/*! @placeos/organisation */ 2510);
var i3 = __webpack_require__(/*! @angular/material/dialog */ 12587);
function UserControlsComponent_div_7_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 31)(1, "button", 17)(2, "div", 18)(3, "div", 19)(4, "app-icon");
    i0.ɵɵtext(5, "layers");
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(6, "div", 32);
    i0.ɵɵtext(7);
    i0.ɵɵpipe(8, "async");
    i0.ɵɵpipe(9, "async");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(10, "app-icon", 21);
    i0.ɵɵtext(11, " chevron_right ");
    i0.ɵɵelementEnd()()()();
  }
  if (rf & 2) {
    var tmp_3_0;
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵproperty("content", ctx_r1.region_select);
    i0.ɵɵadvance(7);
    i0.ɵɵtextInterpolate1(" ", ((tmp_3_0 = i0.ɵɵpipeBind1(8, 2, ctx_r1.region)) == null ? null : tmp_3_0.display_name) || ((tmp_3_0 = i0.ɵɵpipeBind1(9, 4, ctx_r1.region)) == null ? null : tmp_3_0.name), " ");
  }
}
function UserControlsComponent_div_9_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 31)(1, "button", 17)(2, "div", 18)(3, "div", 19)(4, "app-icon");
    i0.ɵɵtext(5, "business");
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(6, "div", 32);
    i0.ɵɵtext(7);
    i0.ɵɵpipe(8, "async");
    i0.ɵɵpipe(9, "async");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(10, "app-icon", 21);
    i0.ɵɵtext(11, " chevron_right ");
    i0.ɵɵelementEnd()()()();
  }
  if (rf & 2) {
    var tmp_3_0;
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵproperty("content", ctx_r1.building_select);
    i0.ɵɵadvance(7);
    i0.ɵɵtextInterpolate1(" ", ((tmp_3_0 = i0.ɵɵpipeBind1(8, 2, ctx_r1.building)) == null ? null : tmp_3_0.display_name) || ((tmp_3_0 = i0.ɵɵpipeBind1(9, 4, ctx_r1.building)) == null ? null : tmp_3_0.name), " ");
  }
}
function UserControlsComponent_div_10_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 16)(1, "button", 17)(2, "div", 18)(3, "div", 19)(4, "app-icon");
    i0.ɵɵtext(5, "help");
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(6, "div", 20);
    i0.ɵɵi18n(7, 4);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(8, "app-icon", 21);
    i0.ɵɵtext(9, "chevron_right");
    i0.ɵɵelementEnd()()()();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵproperty("content", ctx_r1.help_tooltip);
  }
}
function UserControlsComponent_div_11_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 16)(1, "button", 17)(2, "div", 18)(3, "div", 19)(4, "app-icon");
    i0.ɵɵtext(5, "share_location");
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(6, "div", 20);
    i0.ɵɵi18n(7, 5);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(8, "app-icon", 21);
    i0.ɵɵtext(9, "chevron_right");
    i0.ɵɵelementEnd()()()();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵproperty("content", ctx_r1.work_location_tooltip);
  }
}
function UserControlsComponent_div_22_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 16)(1, "button", 17)(2, "div", 18)(3, "div", 19)(4, "app-icon");
    i0.ɵɵtext(5, "desk");
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(6, "div", 20);
    i0.ɵɵi18n(7, 6);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(8, "app-icon", 21);
    i0.ɵɵtext(9, "chevron_right");
    i0.ɵɵelementEnd()()()();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    var desk_height_tooltip_r3 = i0.ɵɵreference(24);
    i0.ɵɵclassProp("!border-b", !(ctx_r1.locales == null ? null : ctx_r1.locales.length));
    i0.ɵɵproperty("content", desk_height_tooltip_r3);
  }
}
function UserControlsComponent_ng_template_23_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelement(0, "desk-height-presets");
  }
}
function UserControlsComponent_div_25_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 33)(1, "button", 17)(2, "div", 18)(3, "div", 19)(4, "app-icon");
    i0.ɵɵtext(5, "mode_night");
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(6, "div", 20);
    i0.ɵɵi18n(7, 7);
    i0.ɵɵpipe(8, "translate");
    i0.ɵɵpipe(9, "translate");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(10, "app-icon", 21);
    i0.ɵɵtext(11, "chevron_right");
    i0.ɵɵelementEnd()()()();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵproperty("content", ctx_r1.language_tooltip);
    i0.ɵɵadvance(9);
    i0.ɵɵi18nExp(i0.ɵɵpipeBind1(8, 3, "COMMON.LANGUAGE_LABEL"))(i0.ɵɵpipeBind1(9, 5, "COMMON.LANGUAGE"));
    i0.ɵɵi18nApply(7);
  }
}
function UserControlsComponent_button_26_Template(rf, ctx) {
  if (rf & 1) {
    var _r4 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "button", 34);
    i0.ɵɵlistener("click", function UserControlsComponent_button_26_Template_button_click_0_listener() {
      i0.ɵɵrestoreView(_r4);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.newSupportTicket());
    });
    i0.ɵɵelementStart(1, "div", 18)(2, "div", 19)(3, "app-icon");
    i0.ɵɵtext(4, "support_agent");
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(5, "div", 20);
    i0.ɵɵi18n(6, 8);
    i0.ɵɵelementEnd()()();
  }
}
function UserControlsComponent_button_31_Template(rf, ctx) {
  if (rf & 1) {
    var _r5 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "button", 35);
    i0.ɵɵlistener("click", function UserControlsComponent_button_31_Template_button_click_0_listener() {
      i0.ɵɵrestoreView(_r5);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.reloadPage());
    });
    i0.ɵɵtext(1, " New Version ");
    i0.ɵɵelementEnd();
  }
}
var UserControlsComponent = /*#__PURE__*/function () {
  function UserControlsComponent(_settings, _org, _dialog) {
    _classCallCheck(this, UserControlsComponent);
    this._settings = _settings;
    this._org = _org;
    this._dialog = _dialog;
    this.building = this._org.active_building;
    this.region = this._org.active_region;
    this.regions = this._org.region_list;
    this.region_select = region_select_component_1.RegionSelectComponent;
    this.building_select = building_select_component_1.BuildingSelectComponent;
    this.help_tooltip = help_tooltip_component_1.HelpTooltipComponent;
    this.accessibility_tooltip = accessibility_tooltip_component_1.AccessibilityTooltipComponent;
    this.language_tooltip = language_tooltip_component_1.LanguageSelectComponent;
    this.work_location_tooltip = work_location_tooltip_component_1.WorkLocationTooltipComponent;
  }
  return _createClass(UserControlsComponent, [{
    key: "user",
    get: function get() {
      return (0, common_1.currentUser)();
    }
  }, {
    key: "groups",
    get: function get() {
      return this.user.groups.join('\n');
    }
  }, {
    key: "version",
    get: function get() {
      return common_1.VERSION;
    }
  }, {
    key: "features",
    get: function get() {
      return this._settings.get('app.features') || [];
    }
  }, {
    key: "locales",
    get: function get() {
      return this._settings.get('app.locales') || [];
    }
  }, {
    key: "desk_height",
    get: function get() {
      return this._settings.get('app.desks.height_enabled');
    }
  }, {
    key: "use_region",
    get: function get() {
      return this._settings.get('app.use_region');
    }
  }, {
    key: "disable_building_select",
    get: function get() {
      return this._settings.get('app.disable_building_select');
    }
  }, {
    key: "has_new_version",
    get: function get() {
      return (0, common_1.hasNewVersion)();
    }
  }, {
    key: "logout",
    value: function logout() {
      (0, ts_client_1.logout)();
    }
  }, {
    key: "reloadPage",
    value: function reloadPage() {
      location.reload();
    }
  }, {
    key: "newSupportTicket",
    value: function newSupportTicket() {
      if (this._settings.get('app.external_support_url')) {
        window.open(this._settings.get('app.external_support_url'), '_blank');
      } else {
        this._dialog.open(support_ticket_modal_component_1.SupportTicketModalComponent);
      }
    }
  }, {
    key: "openWfhModal",
    value: function openWfhModal() {
      this._dialog.open(wfh_settings_modal_component_1.WFHSettingsModalComponent);
    }
  }, {
    key: "viewChangelog",
    value: function () {
      var _viewChangelog = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
        var changelog;
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              _context.next = 2;
              return fetch('https://raw.githubusercontent.com/PlaceOS/user-interfaces/develop/CHANGELOG.md');
            case 2:
              _context.next = 4;
              return _context.sent.text();
            case 4:
              changelog = _context.sent;
              this._dialog.open(components_1.ChangelogModalComponent, {
                data: {
                  changelog: changelog
                }
              });
            case 6:
            case "end":
              return _context.stop();
          }
        }, _callee, this);
      }));
      function viewChangelog() {
        return _viewChangelog.apply(this, arguments);
      }
      return viewChangelog;
    }()
  }, {
    key: "saveSetting",
    value: function saveSetting(name, value) {
      this._settings.saveUserSetting(name, value);
    }
  }, {
    key: "formatLabel",
    value: function formatLabel(value) {
      return "".concat(value.toFixed(1), "cm");
    }
  }]);
}();
_UserControlsComponent = UserControlsComponent;
_UserControlsComponent.ɵfac = function UserControlsComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _UserControlsComponent)(i0.ɵɵdirectiveInject(i1.SettingsService), i0.ɵɵdirectiveInject(i2.OrganisationService), i0.ɵɵdirectiveInject(i3.MatDialog));
};
_UserControlsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _UserControlsComponent,
  selectors: [["user-controls"]],
  decls: 41,
  vars: 26,
  consts: function consts() {
    var i18n_0;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_6572705143012462182$$LIBS_COMPONENTS_SRC_LIB_USER_CONTROLS_COMPONENT_TS_0 = goog.getMsg("Display & Accessibility");
      i18n_0 = MSG_EXTERNAL_6572705143012462182$$LIBS_COMPONENTS_SRC_LIB_USER_CONTROLS_COMPONENT_TS_0;
    } else {
      i18n_0 = $localize(_templateObject || (_templateObject = _taggedTemplateLiteral([":\u241Fd22b673a92b43eabbdebd80b1539a553703c84f6\u241F6572705143012462182:Display & Accessibility"])));
    }
    var i18n_1;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_3324363634810141643$$LIBS_COMPONENTS_SRC_LIB_USER_CONTROLS_COMPONENT_TS_1 = goog.getMsg(" Sign Out ");
      i18n_1 = MSG_EXTERNAL_3324363634810141643$$LIBS_COMPONENTS_SRC_LIB_USER_CONTROLS_COMPONENT_TS_1;
    } else {
      i18n_1 = $localize(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([":\u241Fa9bc2f36435d7979f179c544151bca38e4fe20cc\u241F3324363634810141643: Sign Out "])));
    }
    var i18n_2;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_6267525301152196009$$LIBS_COMPONENTS_SRC_LIB_USER_CONTROLS_COMPONENT_TS_2 = goog.getMsg("Version: ");
      i18n_2 = MSG_EXTERNAL_6267525301152196009$$LIBS_COMPONENTS_SRC_LIB_USER_CONTROLS_COMPONENT_TS_2;
    } else {
      i18n_2 = $localize(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([":\u241F0b1694897c27c2a5bbdf582a7f7d2bac898f3505\u241F6267525301152196009:Version: "])));
    }
    var i18n_3;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_7393197899734735120$$LIBS_COMPONENTS_SRC_LIB_USER_CONTROLS_COMPONENT_TS_3 = goog.getMsg("Help & Support");
      i18n_3 = MSG_EXTERNAL_7393197899734735120$$LIBS_COMPONENTS_SRC_LIB_USER_CONTROLS_COMPONENT_TS_3;
    } else {
      i18n_3 = $localize(_templateObject4 || (_templateObject4 = _taggedTemplateLiteral([":\u241F258586f2141d5b6c98ef28c38ac6f55a81a301b2\u241F7393197899734735120:Help & Support"])));
    }
    var i18n_4;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_8897714476038526431$$LIBS_COMPONENTS_SRC_LIB_USER_CONTROLS_COMPONENT_TS_4 = goog.getMsg("Work Location");
      i18n_4 = MSG_EXTERNAL_8897714476038526431$$LIBS_COMPONENTS_SRC_LIB_USER_CONTROLS_COMPONENT_TS_4;
    } else {
      i18n_4 = $localize(_templateObject5 || (_templateObject5 = _taggedTemplateLiteral([":\u241F8ebf03c6dd7c3ad24dcc9a0f64ffad0e9588ac2e\u241F8897714476038526431:Work Location"])));
    }
    var i18n_5;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_8687640110841202898$$LIBS_COMPONENTS_SRC_LIB_USER_CONTROLS_COMPONENT_TS_5 = goog.getMsg("Desk Settings");
      i18n_5 = MSG_EXTERNAL_8687640110841202898$$LIBS_COMPONENTS_SRC_LIB_USER_CONTROLS_COMPONENT_TS_5;
    } else {
      i18n_5 = $localize(_templateObject6 || (_templateObject6 = _taggedTemplateLiteral([":\u241F6f3ddfacb6cc158043b77530f74c15dc406019fe\u241F8687640110841202898:Desk Settings"])));
    }
    var i18n_6;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_6210988327734808594$$LIBS_COMPONENTS_SRC_LIB_USER_CONTROLS_COMPONENT_TS_6 = goog.getMsg(" {$interpolation}: {$interpolation_1} ", {
        "interpolation": "\uFFFD0\uFFFD",
        "interpolation_1": "\uFFFD1\uFFFD"
      }, {
        original_code: {
          "interpolation": "{{ 'COMMON.LANGUAGE_LABEL' | translate }}",
          "interpolation_1": "{{ 'COMMON.LANGUAGE' | translate }}"
        }
      });
      i18n_6 = MSG_EXTERNAL_6210988327734808594$$LIBS_COMPONENTS_SRC_LIB_USER_CONTROLS_COMPONENT_TS_6;
    } else {
      i18n_6 = $localize(_templateObject7 || (_templateObject7 = _taggedTemplateLiteral([":\u241F5a0db2e7be57ba081264f141f3ee4a8b683f1f6e\u241F6210988327734808594: ", ":INTERPOLATION:: ", ":INTERPOLATION_1: "])), "\uFFFD0\uFFFD", "\uFFFD1\uFFFD");
    }
    var i18n_7;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_270482714535552546$$LIBS_COMPONENTS_SRC_LIB_USER_CONTROLS_COMPONENT_TS_7 = goog.getMsg("Raise a support ticket");
      i18n_7 = MSG_EXTERNAL_270482714535552546$$LIBS_COMPONENTS_SRC_LIB_USER_CONTROLS_COMPONENT_TS_7;
    } else {
      i18n_7 = $localize(_templateObject8 || (_templateObject8 = _taggedTemplateLiteral([":\u241Fb862b54c42ded9ebb47260f60b0f75985c5fab18\u241F270482714535552546:Raise a support ticket"])));
    }
    return [["desk_height_tooltip", ""], i18n_0, i18n_1, i18n_2, i18n_3, i18n_4, i18n_5, i18n_6, i18n_7, [1, "rounded", "bg-base-100", "shadow", "mt-1", "flex", "flex-col", "relative", "divide-y", "divide-base-200"], ["avatar", "", 1, "flex", "flex-col", "items-center", "p-2", "w-[18rem]"], [1, "text-2xl", 3, "user", "matTooltip"], [1, ""], [1, "text-xs", "opacity-60", "truncate"], ["customTooltip", "", "class", "relative", 3, "content", 4, "ngIf"], ["customTooltip", "", 3, "content", 4, "ngIf"], ["customTooltip", "", 3, "content"], ["btn", "", "matRipple", "", 1, "clear", "w-full", "text-left", "h-[3.5rem]"], [1, "w-full", "flex", "items-center", "space-x-2"], [1, "flex", "items-center", "justify-center", "rounded-full", "w-8", "h-8", "bg-base-200"], [1, "flex-1"], [1, "opacity-60", "text-2xl"], ["customTooltip", "", 3, "content", "!border-b", 4, "ngIf"], ["customTooltip", "", "class", "!border-b", 3, "content", 4, "ngIf"], ["btn", "", "matRipple", "", "class", "clear w-full text-left h-[3.5rem]", 3, "click", 4, "ngIf"], [1, "flex", "flex-col", "items-center", "p-4"], [1, "flex", "items-center", "justify-center", "space-x-2", "mb-4"], ["btn", "", "matRipple", "", 1, "inverse", 3, "click"], ["btn", "", "matRipple", "", 3, "click", 4, "ngIf"], [1, "text-xs", "opacity-60", "w-full"], [1, "underline", "p-0", "m-0", "bg-none", "border-none", "text-xs", 3, "click"], ["customTooltip", "", 1, "relative", 3, "content"], [1, "flex-1", "truncate", "w-px"], ["customTooltip", "", 1, "!border-b", 3, "content"], ["btn", "", "matRipple", "", 1, "clear", "w-full", "text-left", "h-[3.5rem]", 3, "click"], ["btn", "", "matRipple", "", 3, "click"]];
  },
  template: function UserControlsComponent_Template(rf, ctx) {
    if (rf & 1) {
      var _r1 = i0.ɵɵgetCurrentView();
      i0.ɵɵelementStart(0, "div", 9)(1, "div", 10);
      i0.ɵɵelement(2, "a-user-avatar", 11);
      i0.ɵɵelementStart(3, "div", 12);
      i0.ɵɵtext(4);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(5, "div", 13);
      i0.ɵɵtext(6);
      i0.ɵɵelementEnd()();
      i0.ɵɵtemplate(7, UserControlsComponent_div_7_Template, 12, 6, "div", 14);
      i0.ɵɵpipe(8, "async");
      i0.ɵɵtemplate(9, UserControlsComponent_div_9_Template, 12, 6, "div", 14)(10, UserControlsComponent_div_10_Template, 10, 1, "div", 15)(11, UserControlsComponent_div_11_Template, 10, 1, "div", 15);
      i0.ɵɵelementStart(12, "div", 16)(13, "button", 17)(14, "div", 18)(15, "div", 19)(16, "app-icon");
      i0.ɵɵtext(17, "mode_night");
      i0.ɵɵelementEnd()();
      i0.ɵɵelementStart(18, "div", 20);
      i0.ɵɵi18n(19, 1);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(20, "app-icon", 21);
      i0.ɵɵtext(21, "chevron_right");
      i0.ɵɵelementEnd()()()();
      i0.ɵɵtemplate(22, UserControlsComponent_div_22_Template, 10, 3, "div", 22)(23, UserControlsComponent_ng_template_23_Template, 1, 0, "ng-template", null, 0, i0.ɵɵtemplateRefExtractor)(25, UserControlsComponent_div_25_Template, 12, 7, "div", 23)(26, UserControlsComponent_button_26_Template, 7, 0, "button", 24);
      i0.ɵɵelementStart(27, "div", 25)(28, "div", 26)(29, "button", 27);
      i0.ɵɵlistener("click", function UserControlsComponent_Template_button_click_29_listener() {
        i0.ɵɵrestoreView(_r1);
        return i0.ɵɵresetView(ctx.logout());
      });
      i0.ɵɵi18n(30, 2);
      i0.ɵɵelementEnd();
      i0.ɵɵtemplate(31, UserControlsComponent_button_31_Template, 2, 0, "button", 28);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(32, "div", 29);
      i0.ɵɵelementContainerStart(33);
      i0.ɵɵi18n(34, 3);
      i0.ɵɵelementContainerEnd();
      i0.ɵɵelementStart(35, "button", 30);
      i0.ɵɵlistener("click", function UserControlsComponent_Template_button_click_35_listener() {
        i0.ɵɵrestoreView(_r1);
        return i0.ɵɵresetView(ctx.viewChangelog());
      });
      i0.ɵɵtext(36);
      i0.ɵɵelementEnd()();
      i0.ɵɵelementStart(37, "div", 29);
      i0.ɵɵtext(38);
      i0.ɵɵpipe(39, "date");
      i0.ɵɵpipe(40, "date");
      i0.ɵɵelementEnd()()();
    }
    if (rf & 2) {
      i0.ɵɵadvance(2);
      i0.ɵɵproperty("user", ctx.user)("matTooltip", ctx.groups);
      i0.ɵɵadvance(2);
      i0.ɵɵtextInterpolate(ctx.user == null ? null : ctx.user.name);
      i0.ɵɵadvance(2);
      i0.ɵɵtextInterpolate(ctx.user == null ? null : ctx.user.email);
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", i0.ɵɵpipeBind1(8, 18, ctx.regions).length);
      i0.ɵɵadvance(2);
      i0.ɵɵproperty("ngIf", !ctx.disable_building_select && !ctx.use_region);
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", ctx.features.includes("help"));
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", ctx.features.includes("wfh"));
      i0.ɵɵadvance();
      i0.ɵɵclassProp("!border-b", !(ctx.locales == null ? null : ctx.locales.length) || !ctx.desk_height);
      i0.ɵɵproperty("content", ctx.accessibility_tooltip);
      i0.ɵɵadvance(10);
      i0.ɵɵproperty("ngIf", ctx.desk_height);
      i0.ɵɵadvance(3);
      i0.ɵɵproperty("ngIf", ctx.locales == null ? null : ctx.locales.length);
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", ctx.features.includes("support-ticket"));
      i0.ɵɵadvance(5);
      i0.ɵɵproperty("ngIf", ctx.has_new_version);
      i0.ɵɵadvance(5);
      i0.ɵɵtextInterpolate1(" ", ctx.version.hash, " ");
      i0.ɵɵadvance(2);
      i0.ɵɵtextInterpolate2(" ", i0.ɵɵpipeBind2(39, 20, ctx.version.time, "longDate"), " (", i0.ɵɵpipeBind2(40, 23, ctx.version.time, "shortTime"), ") ");
    }
  }
});
exports.UserControlsComponent = UserControlsComponent;

/***/ }),

/***/ 75080:
/*!***************************************************************!*\
  !*** ./libs/components/src/lib/virtual-keyboard.component.ts ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _callSuper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/callSuper.js */ 8513)["default"]);
var _superPropGet = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/superPropGet.js */ 54514)["default"]);
var _inherits = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/inherits.js */ 58160)["default"]);
var _VirtualKeyboardComponent;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.VirtualKeyboardComponent = void 0;
var overlay_1 = __webpack_require__(/*! @angular/cdk/overlay */ 81570);
var portal_1 = __webpack_require__(/*! @angular/cdk/portal */ 9168);
var core_1 = __webpack_require__(/*! @angular/core */ 37580);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @angular/cdk/overlay */ 81570);
var i2 = __webpack_require__(/*! @angular/common */ 60316);
var i3 = __webpack_require__(/*! @angular/cdk/portal */ 9168);
var _c0 = ["keyboard", ""];
var _c1 = ["*"];
function VirtualKeyboardComponent_ng_template_1_div_1_ng_container_1_div_3_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelement(0, "div", 7);
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext(4);
    i0.ɵɵclassProp("bg-success", ctx_r1.state === "shift");
  }
}
function VirtualKeyboardComponent_ng_template_1_div_1_ng_container_1_Template(rf, ctx) {
  if (rf & 1) {
    var _r1 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵelementStart(1, "div", 5);
    i0.ɵɵlistener("focus", function VirtualKeyboardComponent_ng_template_1_div_1_ng_container_1_Template_div_focus_1_listener() {
      i0.ɵɵrestoreView(_r1);
      var ctx_r1 = i0.ɵɵnextContext(3);
      return i0.ɵɵresetView(ctx_r1.focusInput());
    })("click", function VirtualKeyboardComponent_ng_template_1_div_1_ng_container_1_Template_div_click_1_listener() {
      var key_r3 = i0.ɵɵrestoreView(_r1).$implicit;
      var ctx_r1 = i0.ɵɵnextContext(3);
      return i0.ɵɵresetView(ctx_r1.handleKeyPress(key_r3));
    });
    i0.ɵɵtext(2);
    i0.ɵɵtemplate(3, VirtualKeyboardComponent_ng_template_1_div_1_ng_container_1_div_3_Template, 1, 2, "div", 6);
    i0.ɵɵelementEnd();
    i0.ɵɵelementContainerEnd();
  }
  if (rf & 2) {
    var key_r3 = ctx.$implicit;
    i0.ɵɵadvance();
    i0.ɵɵclassProp("special", key_r3[0] === "{" && key_r3.length > 1)("space", key_r3 === "{space}");
    i0.ɵɵattribute("key", key_r3);
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", key_r3 === "{space}" ? "Space" : key_r3 === "{caps}" ? "Caps Lock" : key_r3 === "{backspace}" ? "Backspace" : key_r3, " ");
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", key_r3 === "{caps}");
  }
}
function VirtualKeyboardComponent_ng_template_1_div_1_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 3);
    i0.ɵɵtemplate(1, VirtualKeyboardComponent_ng_template_1_div_1_ng_container_1_Template, 4, 7, "ng-container", 4);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var row_r4 = ctx.$implicit;
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngForOf", row_r4);
  }
}
function VirtualKeyboardComponent_ng_template_1_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 1);
    i0.ɵɵtemplate(1, VirtualKeyboardComponent_ng_template_1_div_1_Template, 2, 1, "div", 2);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngForOf", ctx_r1.keyset);
  }
}
var DEFAULT_KEYS = ['0123456789'.split(''), 'qwertyuiop'.split(''), 'asdfghjkl'.split(''), 'zxcvbnm'.split(''), ['{caps}', '{space}', '{backspace}']];
var VirtualKeyboardComponent = /*#__PURE__*/function (_common_1$AsyncHandle) {
  function VirtualKeyboardComponent(_element, _overlay) {
    var _this;
    _classCallCheck(this, VirtualKeyboardComponent);
    _this = _callSuper(this, VirtualKeyboardComponent);
    _this._element = _element;
    _this._overlay = _overlay;
    /** List of rows of keys to display on the keyboard */
    _this.keyset = DEFAULT_KEYS;
    /** Current state of the displayed keyset */
    _this.state = 'normal';
    /** References to the overlay containing the keyboard */
    _this._overlay_ref = null;
    _this.onFocus = function () {
      if (!VirtualKeyboardComponent.enabled) return;
      _this.open();
      _this.clearTimeout('blur');
    };
    _this.onBlur = function () {
      return _this.timeout('blur', function () {
        return _this.close();
      });
    };
    return _this;
  }
  _inherits(VirtualKeyboardComponent, _common_1$AsyncHandle);
  return _createClass(VirtualKeyboardComponent, [{
    key: "ngOnChanges",
    value: function ngOnChanges(changes) {
      if (changes.keyset) {
        if (!this.keyset) this.keyset = DEFAULT_KEYS;
      }
    }
  }, {
    key: "ngOnDestroy",
    value: function ngOnDestroy() {
      _superPropGet(VirtualKeyboardComponent, "ngOnDestroy", this, 3)([]);
      this.close();
    }
  }, {
    key: "focusInput",
    value: function focusInput() {
      var _this$_element, _this$_element2;
      (_this$_element = this._element) === null || _this$_element === void 0 || (_this$_element = _this$_element.nativeElement) === null || _this$_element === void 0 || _this$_element.blur();
      (_this$_element2 = this._element) === null || _this$_element2 === void 0 || (_this$_element2 = _this$_element2.nativeElement) === null || _this$_element2 === void 0 || _this$_element2.focus();
    }
  }, {
    key: "open",
    value: function open() {
      if (this._overlay_ref) return;
      if (!this._portal) return;
      this._overlay_ref = this._overlay.create({
        positionStrategy: this._overlay.position().global().bottom().centerHorizontally()
      });
      this._overlay_ref.attach(this._portal);
    }
  }, {
    key: "close",
    value: function close() {
      if (this._overlay_ref) {
        this._overlay_ref.dispose();
        this._overlay_ref = null;
      }
    }
  }, {
    key: "handleKeyPress",
    value: function handleKeyPress(key) {
      var _this2 = this;
      var cursor_pos = this._element.nativeElement.selectionStart;
      var str = this._element.nativeElement.value || '';
      switch (key.toLowerCase()) {
        case '{caps}':
        case '{shift}':
          this.state = 'shift';
          break;
        case '{backspace}':
          this._element.nativeElement.value = "".concat(str.substr(0, cursor_pos - 1)).concat(str.substr(cursor_pos, str.length));
          cursor_pos = Math.max(0, cursor_pos - 1);
          break;
        case '{space}':
          this._element.nativeElement.value = "".concat(str.substr(0, cursor_pos), ' ').concat(str.substr(cursor_pos, str.length));
          cursor_pos += 1;
          break;
        default:
          if (this.state === 'shift') this.state = 'normal';
          this._element.nativeElement.value = "".concat(str.substr(0, cursor_pos)).concat(key).concat(str.substr(cursor_pos, str.length));
          cursor_pos += 1;
      }
      this._element.nativeElement.dispatchEvent(new InputEvent('input'));
      this.updateKeyState();
      this.timeout('focus', function () {
        _this2.focusInput();
        _this2._element.nativeElement.selectionStart = cursor_pos;
        _this2._element.nativeElement.selectionEnd = cursor_pos;
      }, 50);
    }
  }, {
    key: "updateKeyState",
    value: function updateKeyState() {
      var _this3 = this;
      this.keyset = this.keyset.map(function (_) {
        return _.map(function (k) {
          return k.length > 1 ? k : k[_this3.state !== 'normal' ? 'toUpperCase' : 'toLowerCase']();
        });
      });
    }
  }]);
}(common_1.AsyncHandler);
_VirtualKeyboardComponent = VirtualKeyboardComponent;
_VirtualKeyboardComponent.ɵfac = function VirtualKeyboardComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _VirtualKeyboardComponent)(i0.ɵɵdirectiveInject(i0.ElementRef), i0.ɵɵdirectiveInject(i1.Overlay));
};
_VirtualKeyboardComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _VirtualKeyboardComponent,
  selectors: [["input", "keyboard", ""], ["textarea", "keyboard", ""]],
  viewQuery: function VirtualKeyboardComponent_Query(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵviewQuery(portal_1.CdkPortal, 5);
    }
    if (rf & 2) {
      var _t;
      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx._portal = _t.first);
    }
  },
  hostBindings: function VirtualKeyboardComponent_HostBindings(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵlistener("focus", function VirtualKeyboardComponent_focus_HostBindingHandler() {
        return ctx.onFocus();
      })("blur", function VirtualKeyboardComponent_blur_HostBindingHandler() {
        return ctx.onBlur();
      });
    }
  },
  inputs: {
    keyset: "keyset"
  },
  features: [i0.ɵɵInheritDefinitionFeature, i0.ɵɵNgOnChangesFeature],
  attrs: _c0,
  ngContentSelectors: _c1,
  decls: 2,
  vars: 0,
  consts: [["cdk-portal", ""], ["keyboard-view", "", 1, "w-screen", "flex", "flex-col", "space-y-4", "bg-base-200", "p-2", "border-t", "border-base-200"], ["row", "", "class", "flex items-center justify-center space-x-2", 4, "ngFor", "ngForOf"], ["row", "", 1, "flex", "items-center", "justify-center", "space-x-2"], [4, "ngFor", "ngForOf"], ["tabindex", "0", 1, "rounded-xl", "p-2", "border", "border-base-200", "relative", "cursor-pointer", "bg-base-100", 3, "focus", "click"], ["dot", "", "class", "absolute top-2 right-2 h-2 w-2 rounded-full bg-base-200", 3, "bg-success", 4, "ngIf"], ["dot", "", 1, "absolute", "top-2", "right-2", "h-2", "w-2", "rounded-full", "bg-base-200"]],
  template: function VirtualKeyboardComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵprojectionDef();
      i0.ɵɵprojection(0);
      i0.ɵɵtemplate(1, VirtualKeyboardComponent_ng_template_1_Template, 2, 1, "ng-template", 0);
    }
  },
  dependencies: [i2.NgForOf, i2.NgIf, i3.TemplatePortalDirective],
  styles: ["[key][_ngcontent-%COMP%] {\n                height: 3.5rem;\n                width: 4rem;\n                transition: box-shadow 200ms, top 200ms;\n                box-shadow: 0 4px 0 0.04px rgba(0, 0, 0, 0.1);\n            }\n\n            [key].special[_ngcontent-%COMP%] {\n                width: 10rem;\n            }\n\n            [key].space[_ngcontent-%COMP%] {\n                flex: 1;\n                min-width: 10rem;\n                max-width: 25rem;\n            }\n\n            [key][_ngcontent-%COMP%]:hover {\n                top: 2px;\n                box-shadow: 0 2px 0 0.04px rgba(0, 0, 0, 0.1);\n            }\n\n            [key][_ngcontent-%COMP%]:active {\n                top: 4px;\n                box-shadow: 0 0 0 0.04px rgba(0, 0, 0, 0.1);\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInZpcnR1YWwta2V5Ym9hcmQuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxjQUFjO2dCQUNkLFdBQVc7Z0JBQ1gsdUNBQXVDO2dCQUN2Qyw2Q0FBNkM7WUFDakQ7O1lBRUE7Z0JBQ0ksWUFBWTtZQUNoQjs7WUFFQTtnQkFDSSxPQUFPO2dCQUNQLGdCQUFnQjtnQkFDaEIsZ0JBQWdCO1lBQ3BCOztZQUVBO2dCQUNJLFFBQVE7Z0JBQ1IsNkNBQTZDO1lBQ2pEOztZQUVBO2dCQUNJLFFBQVE7Z0JBQ1IsMkNBQTJDO1lBQy9DIiwiZmlsZSI6InZpcnR1YWwta2V5Ym9hcmQuY29tcG9uZW50LnRzIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICBba2V5XSB7XG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAzLjVyZW07XG4gICAgICAgICAgICAgICAgd2lkdGg6IDRyZW07XG4gICAgICAgICAgICAgICAgdHJhbnNpdGlvbjogYm94LXNoYWRvdyAyMDBtcywgdG9wIDIwMG1zO1xuICAgICAgICAgICAgICAgIGJveC1zaGFkb3c6IDAgNHB4IDAgMC4wNHB4IHJnYmEoMCwgMCwgMCwgMC4xKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgW2tleV0uc3BlY2lhbCB7XG4gICAgICAgICAgICAgICAgd2lkdGg6IDEwcmVtO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBba2V5XS5zcGFjZSB7XG4gICAgICAgICAgICAgICAgZmxleDogMTtcbiAgICAgICAgICAgICAgICBtaW4td2lkdGg6IDEwcmVtO1xuICAgICAgICAgICAgICAgIG1heC13aWR0aDogMjVyZW07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIFtrZXldOmhvdmVyIHtcbiAgICAgICAgICAgICAgICB0b3A6IDJweDtcbiAgICAgICAgICAgICAgICBib3gtc2hhZG93OiAwIDJweCAwIDAuMDRweCByZ2JhKDAsIDAsIDAsIDAuMSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIFtrZXldOmFjdGl2ZSB7XG4gICAgICAgICAgICAgICAgdG9wOiA0cHg7XG4gICAgICAgICAgICAgICAgYm94LXNoYWRvdzogMCAwIDAgMC4wNHB4IHJnYmEoMCwgMCwgMCwgMC4xKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl19 */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvY29tcG9uZW50cy9zcmMvbGliL3ZpcnR1YWwta2V5Ym9hcmQuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxjQUFjO2dCQUNkLFdBQVc7Z0JBQ1gsdUNBQXVDO2dCQUN2Qyw2Q0FBNkM7WUFDakQ7O1lBRUE7Z0JBQ0ksWUFBWTtZQUNoQjs7WUFFQTtnQkFDSSxPQUFPO2dCQUNQLGdCQUFnQjtnQkFDaEIsZ0JBQWdCO1lBQ3BCOztZQUVBO2dCQUNJLFFBQVE7Z0JBQ1IsNkNBQTZDO1lBQ2pEOztZQUVBO2dCQUNJLFFBQVE7Z0JBQ1IsMkNBQTJDO1lBQy9DOztBQUVaLGc4Q0FBZzhDIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICBba2V5XSB7XG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAzLjVyZW07XG4gICAgICAgICAgICAgICAgd2lkdGg6IDRyZW07XG4gICAgICAgICAgICAgICAgdHJhbnNpdGlvbjogYm94LXNoYWRvdyAyMDBtcywgdG9wIDIwMG1zO1xuICAgICAgICAgICAgICAgIGJveC1zaGFkb3c6IDAgNHB4IDAgMC4wNHB4IHJnYmEoMCwgMCwgMCwgMC4xKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgW2tleV0uc3BlY2lhbCB7XG4gICAgICAgICAgICAgICAgd2lkdGg6IDEwcmVtO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBba2V5XS5zcGFjZSB7XG4gICAgICAgICAgICAgICAgZmxleDogMTtcbiAgICAgICAgICAgICAgICBtaW4td2lkdGg6IDEwcmVtO1xuICAgICAgICAgICAgICAgIG1heC13aWR0aDogMjVyZW07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIFtrZXldOmhvdmVyIHtcbiAgICAgICAgICAgICAgICB0b3A6IDJweDtcbiAgICAgICAgICAgICAgICBib3gtc2hhZG93OiAwIDJweCAwIDAuMDRweCByZ2JhKDAsIDAsIDAsIDAuMSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIFtrZXldOmFjdGl2ZSB7XG4gICAgICAgICAgICAgICAgdG9wOiA0cHg7XG4gICAgICAgICAgICAgICAgYm94LXNoYWRvdzogMCAwIDAgMC4wNHB4IHJnYmEoMCwgMCwgMCwgMC4xKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl0sInNvdXJjZVJvb3QiOiIifQ== */"]
});
exports.VirtualKeyboardComponent = VirtualKeyboardComponent;

/***/ }),

/***/ 42792:
/*!********************************************************************!*\
  !*** ./libs/components/src/lib/work-location-tooltip.component.ts ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _regeneratorRuntime = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/regeneratorRuntime.js */ 8698)["default"]);
var _defineProperty = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/defineProperty.js */ 19370)["default"]);
var _toConsumableArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/toConsumableArray.js */ 86033)["default"]);
var _objectSpread = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/objectSpread2.js */ 34092)["default"]);
var _asyncToGenerator = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/asyncToGenerator.js */ 95386)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _WorkLocationTooltipComponent;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.WorkLocationTooltipComponent = void 0;
var dialog_1 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var ts_client_1 = __webpack_require__(/*! @placeos/ts-client */ 35713);
var date_fns_1 = __webpack_require__(/*! date-fns */ 25773);
var wfh_settings_modal_component_1 = __webpack_require__(/*! libs/users/src/lib/wfh-settings-modal.component */ 43022);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var i2 = __webpack_require__(/*! @angular/common */ 60316);
var i3 = __webpack_require__(/*! @angular/material/menu */ 31034);
var i4 = __webpack_require__(/*! @angular/material/core */ 74646);
var i5 = __webpack_require__(/*! @angular/material/tooltip */ 80640);
var i6 = __webpack_require__(/*! ./icon.component */ 69434);
function WorkLocationTooltipComponent_div_10_div_1_button_12_Template(rf, ctx) {
  if (rf & 1) {
    var _r2 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "button", 18);
    i0.ɵɵlistener("click", function WorkLocationTooltipComponent_div_10_div_1_button_12_Template_button_click_0_listener() {
      var loc_r3 = i0.ɵɵrestoreView(_r2).$implicit;
      var i_r4 = i0.ɵɵnextContext().index;
      var ctx_r4 = i0.ɵɵnextContext(2);
      return i0.ɵɵresetView(ctx_r4.setLocation(i_r4, loc_r3.id));
    });
    i0.ɵɵelementStart(1, "div", 19)(2, "app-icon", 12);
    i0.ɵɵtext(3);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(4, "div", 20);
    i0.ɵɵtext(5);
    i0.ɵɵelementEnd()()();
  }
  if (rf & 2) {
    var loc_r3 = ctx.$implicit;
    i0.ɵɵadvance(3);
    i0.ɵɵtextInterpolate(loc_r3.icon);
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate(loc_r3.name);
  }
}
function WorkLocationTooltipComponent_div_10_div_1_div_17_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelement(0, "div", 21);
  }
}
function WorkLocationTooltipComponent_div_10_div_1_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 10)(1, "div", 11)(2, "app-icon", 12);
    i0.ɵɵtext(3);
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(4, "div", 13)(5, "button", 14)(6, "div");
    i0.ɵɵtext(7);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(8, "app-icon");
    i0.ɵɵtext(9, "expand_more");
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(10, "mat-menu", null, 1);
    i0.ɵɵtemplate(12, WorkLocationTooltipComponent_div_10_div_1_button_12_Template, 6, 2, "button", 15);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(13, "div", 16);
    i0.ɵɵtext(14);
    i0.ɵɵpipe(15, "date");
    i0.ɵɵpipe(16, "date");
    i0.ɵɵelementEnd()();
    i0.ɵɵtemplate(17, WorkLocationTooltipComponent_div_10_div_1_div_17_Template, 1, 0, "div", 17);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var block_r6 = ctx.$implicit;
    var i_r4 = ctx.index;
    var menu_r7 = i0.ɵɵreference(11);
    var ctx_r4 = i0.ɵɵnextContext(2);
    i0.ɵɵclassProp("opacity-30", ctx_r4.now > ctx_r4.timeFrom(block_r6.end_time));
    i0.ɵɵadvance();
    i0.ɵɵclassProp("bg-base-200", ctx_r4.now < ctx_r4.timeFrom(block_r6.start_time) || ctx_r4.now > ctx_r4.timeFrom(block_r6.end_time))("bg-info", ctx_r4.now >= ctx_r4.timeFrom(block_r6.start_time) && ctx_r4.now <= ctx_r4.timeFrom(block_r6.end_time))("text-info-content", ctx_r4.now >= ctx_r4.timeFrom(block_r6.start_time) && ctx_r4.now <= ctx_r4.timeFrom(block_r6.end_time));
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate(ctx_r4.location_icon(ctx_r4.timeFrom(block_r6.start_time)));
    i0.ɵɵadvance(2);
    i0.ɵɵproperty("matMenuTriggerFor", menu_r7);
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate1(" ", ctx_r4.location(ctx_r4.timeFrom(block_r6.start_time)), " ");
    i0.ɵɵadvance(5);
    i0.ɵɵproperty("ngForOf", ctx_r4.locations);
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate2(" ", i0.ɵɵpipeBind2(15, 15, ctx_r4.timeFrom(block_r6.start_time), "shortTime"), " \u2013 ", i0.ɵɵpipeBind2(16, 18, ctx_r4.timeFrom(block_r6.end_time), "shortTime"), " ");
    i0.ɵɵadvance(3);
    i0.ɵɵproperty("ngIf", i_r4 > 0);
  }
}
function WorkLocationTooltipComponent_div_10_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 8);
    i0.ɵɵtemplate(1, WorkLocationTooltipComponent_div_10_div_1_Template, 18, 21, "div", 9);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r4 = i0.ɵɵnextContext();
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngForOf", ctx_r4.active_preference == null ? null : ctx_r4.active_preference.blocks);
  }
}
function WorkLocationTooltipComponent_ng_template_11_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 22)(1, "app-icon", 23);
    i0.ɵɵtext(2, "event_busy");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(3, "p", 24);
    i0.ɵɵtext(4, "No work location for today.");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(5, "p", 24);
    i0.ɵɵtext(6, " Click the edit button on the top right to edit your work location preferences. ");
    i0.ɵɵelementEnd()();
  }
}
var WorkLocationTooltipComponent = /*#__PURE__*/function () {
  function WorkLocationTooltipComponent(_dialog) {
    _classCallCheck(this, WorkLocationTooltipComponent);
    this._dialog = _dialog;
    this.locations = [{
      id: 'wfo',
      name: 'Office',
      icon: 'business'
    }, {
      id: 'wfh',
      name: 'Home',
      icon: 'home'
    }, {
      id: 'aol',
      name: 'Leave',
      icon: 'event_busy'
    }];
  }
  return _createClass(WorkLocationTooltipComponent, [{
    key: "active_preference",
    get: function get() {
      var date = (0, date_fns_1.format)(new Date(), 'yyyy-MM-dd');
      if (this.overrides[date]) return this.overrides[date];
      return this.settings.find(function (pref) {
        return pref.day_of_week === new Date().getDay();
      });
    }
  }, {
    key: "now",
    get: function get() {
      return (0, date_fns_1.startOfMinute)(Date.now()).getTime();
    }
  }, {
    key: "ngOnInit",
    value: function ngOnInit() {
      var user = (0, common_1.currentUser)();
      this.settings = user.work_preferences;
      this.overrides = user.work_overrides;
    }
  }, {
    key: "location_icon",
    value: function location_icon(time) {
      var user = (0, common_1.currentUser)();
      return user.location_icon(time + 1 * 60 * 1000);
    }
  }, {
    key: "location",
    value: function location(time) {
      var user = (0, common_1.currentUser)();
      return user.location_name_time(time + 1 * 60 * 1000);
    }
  }, {
    key: "timeFrom",
    value: function timeFrom(hours) {
      return (0, date_fns_1.startOfMinute)((0, date_fns_1.set)(new Date(), {
        hours: Math.floor(hours),
        minutes: hours * 60 % 60,
        seconds: 0,
        milliseconds: 0
      })).getTime();
    }
  }, {
    key: "editSettings",
    value: function editSettings() {
      this._dialog.open(wfh_settings_modal_component_1.WFHSettingsModalComponent);
    }
  }, {
    key: "setLocation",
    value: function () {
      var _setLocation = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(index, location) {
        var user, active_preference, date, new_overrides, key, key_date;
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              user = (0, common_1.currentUser)();
              active_preference = this.active_preference;
              date = (0, date_fns_1.format)(Date.now(), 'yyyy-MM-dd');
              new_overrides = _objectSpread(_objectSpread({}, user.work_overrides), {}, _defineProperty({}, date, _objectSpread(_objectSpread({}, active_preference), {}, {
                blocks: [].concat(_toConsumableArray(active_preference.blocks.slice(0, index)), [_objectSpread(_objectSpread({}, active_preference.blocks[index]), {}, {
                  location: location
                })], _toConsumableArray(active_preference.blocks.slice(index + 1)))
              })));
              for (key in new_overrides) {
                key_date = (0, date_fns_1.parse)(key, 'yyyy-MM-dd', new Date());
                if (!new_overrides[key].blocks.length || (0, date_fns_1.isBefore)(key_date, (0, date_fns_1.addDays)((0, date_fns_1.startOfDay)(Date.now()), -1))) {
                  delete new_overrides[key];
                }
              }
              this.overrides = new_overrides;
              _context.next = 8;
              return (0, ts_client_1.updateUser)(user.id, _objectSpread(_objectSpread({}, user), {}, {
                work_overrides: new_overrides
              })).toPromise();
            case 8:
              (0, common_1.reloadUserData)();
            case 9:
            case "end":
              return _context.stop();
          }
        }, _callee, this);
      }));
      function setLocation(_x, _x2) {
        return _setLocation.apply(this, arguments);
      }
      return setLocation;
    }()
  }]);
}();
_WorkLocationTooltipComponent = WorkLocationTooltipComponent;
_WorkLocationTooltipComponent.ɵfac = function WorkLocationTooltipComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _WorkLocationTooltipComponent)(i0.ɵɵdirectiveInject(i1.MatDialog));
};
_WorkLocationTooltipComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _WorkLocationTooltipComponent,
  selectors: [["work-location-tooltip"]],
  decls: 13,
  vars: 6,
  consts: [["empty_state", ""], ["menu", "matMenu"], [1, "flex", "flex-col", "w-[18.5rem]", "rounded", "bg-base-100", "shadow", "relative", "-top-12", "-right-1", "overflow-hidden"], [1, "flex", "items-center", "justify-between", "px-2"], [1, "px-2", "py-4", "font-medium"], ["icon", "", "matRipple", "", "matTooltip", "Edit Work Location Preferences", "matTooltipPosition", "left", 1, "hover:bg-base-200", 3, "click"], [1, "px-4", "font-medium", "text-sm"], ["class", "pb-2", 4, "ngIf", "ngIfElse"], [1, "pb-2"], ["class", "relative flex items-center px-4 py-2", 3, "opacity-30", 4, "ngFor", "ngForOf"], [1, "relative", "flex", "items-center", "px-4", "py-2"], [1, "rounded-full", "h-10", "w-10", "flex", "items-center", "justify-center", "bg-base-200", "z-20"], [1, "text-2xl"], [1, "flex-1", "ml-2"], ["matRipple", "", 1, "font-medium", "flex", "items-center", "space-x-2", "rounded", "hover:bg-base-200", "px-2", "py-1", 3, "matMenuTriggerFor"], ["mat-menu-item", "", 3, "click", 4, "ngFor", "ngForOf"], [1, "text-xs", "opacity-60", "px-2"], ["class", "absolute -top-2 left-7 h-4 w-0 border-l-2 border-dashed border-base-200 -translate-x-px", 4, "ngIf"], ["mat-menu-item", "", 3, "click"], [1, "flex", "items-center", "space-x-2"], [1, "pr-8"], [1, "absolute", "-top-2", "left-7", "h-4", "w-0", "border-l-2", "border-dashed", "border-base-200", "-translate-x-px"], [1, "flex", "flex-col", "items-center", "justify-center", "p-8", "space-y-2", "w-full", "opacity-30"], [1, "text-6xl"], [1, "text-center", "text-sm"]],
  template: function WorkLocationTooltipComponent_Template(rf, ctx) {
    if (rf & 1) {
      var _r1 = i0.ɵɵgetCurrentView();
      i0.ɵɵelementStart(0, "div", 2)(1, "div", 3)(2, "h3", 4);
      i0.ɵɵtext(3, "Work Location");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(4, "button", 5);
      i0.ɵɵlistener("click", function WorkLocationTooltipComponent_Template_button_click_4_listener() {
        i0.ɵɵrestoreView(_r1);
        return i0.ɵɵresetView(ctx.editSettings());
      });
      i0.ɵɵelementStart(5, "app-icon");
      i0.ɵɵtext(6, "edit_note");
      i0.ɵɵelementEnd()()();
      i0.ɵɵelementStart(7, "h3", 6);
      i0.ɵɵtext(8);
      i0.ɵɵpipe(9, "date");
      i0.ɵɵelementEnd();
      i0.ɵɵtemplate(10, WorkLocationTooltipComponent_div_10_Template, 2, 1, "div", 7);
      i0.ɵɵelementEnd();
      i0.ɵɵtemplate(11, WorkLocationTooltipComponent_ng_template_11_Template, 7, 0, "ng-template", null, 0, i0.ɵɵtemplateRefExtractor);
    }
    if (rf & 2) {
      var empty_state_r8 = i0.ɵɵreference(12);
      i0.ɵɵadvance(8);
      i0.ɵɵtextInterpolate1(" ", i0.ɵɵpipeBind2(9, 3, ctx.now, "fullDate"), " ");
      i0.ɵɵadvance(2);
      i0.ɵɵproperty("ngIf", ctx.active_preference == null ? null : ctx.active_preference.blocks == null ? null : ctx.active_preference.blocks.length)("ngIfElse", empty_state_r8);
    }
  },
  dependencies: [i2.NgForOf, i2.NgIf, i3.MatMenu, i3.MatMenuItem, i3.MatMenuTrigger, i4.MatRipple, i5.MatTooltip, i6.IconComponent, i2.DatePipe]
});
exports.WorkLocationTooltipComponent = WorkLocationTooltipComponent;

/***/ }),

/***/ 45312:
/*!**********************************************!*\
  !*** ./libs/components/src/lib/zone.pipe.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _regeneratorRuntime = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/regeneratorRuntime.js */ 8698)["default"]);
var _asyncToGenerator = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/asyncToGenerator.js */ 95386)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _ZonePipe;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.ZonePipe = void 0;
var ts_client_1 = __webpack_require__(/*! @placeos/ts-client */ 35713);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var ZONE_LIST = {};
var EMPTY_ZONE = new ts_client_1.PlaceZone();
var ZonePipe = /*#__PURE__*/function () {
  function ZonePipe() {
    _classCallCheck(this, ZonePipe);
  }
  return _createClass(ZonePipe, [{
    key: "transform",
    value: function () {
      var _transform = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(id) {
        var zone;
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              if (!ZONE_LIST[id]) {
                _context.next = 2;
                break;
              }
              return _context.abrupt("return", ZONE_LIST[id]);
            case 2:
              _context.next = 4;
              return (0, ts_client_1.showZone)(id).toPromise()["catch"](function (_) {
                return null;
              });
            case 4:
              zone = _context.sent;
              if (zone) {
                _context.next = 7;
                break;
              }
              return _context.abrupt("return", EMPTY_ZONE);
            case 7:
              ZONE_LIST[id] = zone;
              return _context.abrupt("return", zone);
            case 9:
            case "end":
              return _context.stop();
          }
        }, _callee);
      }));
      function transform(_x) {
        return _transform.apply(this, arguments);
      }
      return transform;
    }()
  }]);
}();
_ZonePipe = ZonePipe;
_ZonePipe.ɵfac = function ZonePipe_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _ZonePipe)();
};
_ZonePipe.ɵpipe = /*@__PURE__*/i0.ɵɵdefinePipe({
  name: "zone",
  type: _ZonePipe,
  pure: true
});
exports.ZonePipe = ZonePipe;

/***/ }),

/***/ 40569:
/*!**********************************!*\
  !*** ./libs/events/src/index.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var tslib_1 = __webpack_require__(/*! tslib */ 24398);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/events */ 76), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/events.module */ 2704), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/event-details-modal.component */ 54035), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/event-card.component */ 21765), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/setup-breakdown-modal.component */ 50711), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/group-event-details-modal.component */ 58094), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/group-event-card.component */ 27535), exports);

/***/ }),

/***/ 47249:
/*!********************************************************!*\
  !*** ./libs/events/src/lib/attendee-list.component.ts ***!
  \********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _taggedTemplateLiteral = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js */ 9959)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _AttendeeListComponent, _templateObject;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.AttendeeListComponent = void 0;
var core_1 = __webpack_require__(/*! @angular/core */ 37580);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
function AttendeeListComponent_button_2_Template(rf, ctx) {
  if (rf & 1) {
    var _r1 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "button", 8);
    i0.ɵɵlistener("click", function AttendeeListComponent_button_2_Template_button_click_0_listener() {
      i0.ɵɵrestoreView(_r1);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.close.emit());
    });
    i0.ɵɵelementStart(1, "app-icon");
    i0.ɵɵtext(2, "arrow_back");
    i0.ɵɵelementEnd()();
  }
}
function AttendeeListComponent_div_5_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelement(0, "div", 9);
  }
}
function AttendeeListComponent_ng_container_7_div_1_div_5_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 18);
    i0.ɵɵtext(1, " Host ");
    i0.ɵɵelementEnd();
  }
}
function AttendeeListComponent_ng_container_7_div_1_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 11);
    i0.ɵɵelement(1, "a-user-avatar", 12);
    i0.ɵɵelementStart(2, "div", 13)(3, "div", 14);
    i0.ɵɵtext(4);
    i0.ɵɵelementEnd();
    i0.ɵɵtemplate(5, AttendeeListComponent_ng_container_7_div_1_div_5_Template, 2, 0, "div", 15);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(6, "div", 16);
    i0.ɵɵelement(7, "div", 17);
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var user_r3 = i0.ɵɵnextContext().$implicit;
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance();
    i0.ɵɵproperty("user", user_r3);
    i0.ɵɵadvance(3);
    i0.ɵɵtextInterpolate(user_r3.name);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", ctx_r1.host === user_r3.email);
    i0.ɵɵadvance(2);
    i0.ɵɵclassProp("bg-success", user_r3.checked_in)("bg-pending", !user_r3.checked_in);
    i0.ɵɵproperty("matTooltip", user_r3.checked_in ? "Checked in" : "Not checked in");
  }
}
function AttendeeListComponent_ng_container_7_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵtemplate(1, AttendeeListComponent_ng_container_7_div_1_Template, 8, 8, "div", 10);
    i0.ɵɵelementContainerEnd();
  }
  if (rf & 2) {
    var user_r3 = ctx.$implicit;
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", !user_r3.resource && (ctx_r1.host !== user_r3.email || ctx_r1.show_host));
  }
}
var AttendeeListComponent = /*#__PURE__*/_createClass(function AttendeeListComponent() {
  _classCallCheck(this, AttendeeListComponent);
  this.host = '';
  this.show_host = true;
  this.list = [];
  this.hide_close = false;
  this.custom_title = '';
  this.close = new core_1.EventEmitter();
});
_AttendeeListComponent = AttendeeListComponent;
_AttendeeListComponent.ɵfac = function AttendeeListComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _AttendeeListComponent)();
};
_AttendeeListComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _AttendeeListComponent,
  selectors: [["attendee-list"]],
  inputs: {
    host: "host",
    show_host: "show_host",
    list: "list",
    hide_close: "hide_close",
    custom_title: "custom_title"
  },
  outputs: {
    close: "close"
  },
  decls: 8,
  vars: 5,
  consts: function consts() {
    var i18n_0;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_5922903057904788374$$LIBS_EVENTS_SRC_LIB_ATTENDEE_LIST_COMPONENT_TS_0 = goog.getMsg(" {$interpolation} {$interpolation_1} ", {
        "interpolation": "\uFFFD0\uFFFD",
        "interpolation_1": "\uFFFD1\uFFFD"
      }, {
        original_code: {
          "interpolation": "{{ list.length }}",
          "interpolation_1": "{{\n                        custom_title\n                            ? custom_title\n                            : list.length === 1\n                              ? 'Attendee'\n                              : 'Attendees'\n                    }}"
        }
      });
      i18n_0 = MSG_EXTERNAL_5922903057904788374$$LIBS_EVENTS_SRC_LIB_ATTENDEE_LIST_COMPONENT_TS_0;
    } else {
      i18n_0 = $localize(_templateObject || (_templateObject = _taggedTemplateLiteral([":\u241Fc68a77fe1aa97a8e5588bafc6b5cb8ced3e3d288\u241F5922903057904788374: ", ":INTERPOLATION: ", ":INTERPOLATION_1: "])), "\uFFFD0\uFFFD", "\uFFFD1\uFFFD");
    }
    return [i18n_0, [1, "w-full", "h-full", "overflow-hidden", "flex", "flex-col", "bg-base-100"], [1, "flex", "items-center", "border-b", "border-base-200", "p-2", "min-h-12"], ["close", "", "icon", "", "matRipple", "", 3, "click", 4, "ngIf"], [1, "flex-1", "text-center", "font-medium"], ["class", "w-12", 4, "ngIf"], [1, "flex-1", "w-full", "overflow-auto"], [4, "ngFor", "ngForOf"], ["close", "", "icon", "", "matRipple", "", 3, "click"], [1, "w-12"], ["attendee", "", "class", "flex items-center p-2 space-x-2 hover:bg-base-200", 4, "ngIf"], ["attendee", "", 1, "flex", "items-center", "p-2", "space-x-2", "hover:bg-base-200"], [3, "user"], [1, "flex-1", "w-1/2"], [1, "truncate"], ["class", "opacity-60 text-sm", 4, "ngIf"], [1, "p-2"], [1, "h-3", "w-3", "rounded-full", 3, "matTooltip"], [1, "opacity-60", "text-sm"]];
  },
  template: function AttendeeListComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵelementStart(0, "div", 1)(1, "div", 2);
      i0.ɵɵtemplate(2, AttendeeListComponent_button_2_Template, 3, 0, "button", 3);
      i0.ɵɵelementStart(3, "div", 4);
      i0.ɵɵi18n(4, 0);
      i0.ɵɵelementEnd();
      i0.ɵɵtemplate(5, AttendeeListComponent_div_5_Template, 1, 0, "div", 5);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(6, "div", 6);
      i0.ɵɵtemplate(7, AttendeeListComponent_ng_container_7_Template, 2, 1, "ng-container", 7);
      i0.ɵɵelementEnd()();
    }
    if (rf & 2) {
      i0.ɵɵadvance(2);
      i0.ɵɵproperty("ngIf", !ctx.hide_close);
      i0.ɵɵadvance(2);
      i0.ɵɵi18nExp(ctx.list.length)(ctx.custom_title ? ctx.custom_title : ctx.list.length === 1 ? "Attendee" : "Attendees");
      i0.ɵɵi18nApply(4);
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", !ctx.hide_close);
      i0.ɵɵadvance(2);
      i0.ɵɵproperty("ngForOf", ctx.list);
    }
  }
});
exports.AttendeeListComponent = AttendeeListComponent;

/***/ }),

/***/ 21765:
/*!*****************************************************!*\
  !*** ./libs/events/src/lib/event-card.component.ts ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _regeneratorRuntime = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/regeneratorRuntime.js */ 8698)["default"]);
var _asyncToGenerator = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/asyncToGenerator.js */ 95386)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _callSuper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/callSuper.js */ 8513)["default"]);
var _inherits = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/inherits.js */ 58160)["default"]);
var _EventCardComponent;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.EventCardComponent = void 0;
var core_1 = __webpack_require__(/*! @angular/core */ 37580);
var dialog_1 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var router_1 = __webpack_require__(/*! @angular/router */ 95072);
var date_fns_1 = __webpack_require__(/*! date-fns */ 25773);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var event_class_1 = __webpack_require__(/*! ./event.class */ 6727);
var event_details_modal_component_1 = __webpack_require__(/*! ./event-details-modal.component */ 54035);
var organisation_service_1 = __webpack_require__(/*! libs/organisation/src/lib/organisation.service */ 19863);
var space_pipe_1 = __webpack_require__(/*! libs/spaces/src/lib/space.pipe */ 22011);
var group_event_details_modal_component_1 = __webpack_require__(/*! ./group-event-details-modal.component */ 58094);
var common_2 = __webpack_require__(/*! @angular/common */ 60316);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var i2 = __webpack_require__(/*! @angular/router */ 95072);
var i3 = __webpack_require__(/*! libs/organisation/src/lib/organisation.service */ 19863);
var i4 = __webpack_require__(/*! libs/spaces/src/lib/space.pipe */ 22011);
var i5 = __webpack_require__(/*! @placeos/common */ 22797);
var _c0 = function _c0() {
  return ["./"];
};
var _c1 = function _c1(a0) {
  return {
    event: a0
  };
};
function EventCardComponent_h4_0_span_1_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "span", 5);
    i0.ɵɵtext(1);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r0 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1("", ctx_r0.day, ",\xA0");
  }
}
function EventCardComponent_h4_0_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "h4", 2);
    i0.ɵɵtemplate(1, EventCardComponent_h4_0_span_1_Template, 2, 1, "span", 3);
    i0.ɵɵtext(2);
    i0.ɵɵpipe(3, "date");
    i0.ɵɵelementStart(4, "span", 4);
    i0.ɵɵtext(5);
    i0.ɵɵpipe(6, "date");
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var ctx_r0 = i0.ɵɵnextContext();
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", ctx_r0.show_day);
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", i0.ɵɵpipeBind2(3, 3, ctx_r0.event == null ? null : ctx_r0.event.date, ctx_r0.time_format), " ");
    i0.ɵɵadvance(3);
    i0.ɵɵtextInterpolate1("(", i0.ɵɵpipeBind2(6, 6, ctx_r0.event == null ? null : ctx_r0.event.date, "z"), ")");
  }
}
function EventCardComponent_a_1_div_9_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 20);
    i0.ɵɵtext(1);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r0 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", ctx_r0.period_tz, " ");
  }
}
function EventCardComponent_a_1_div_21_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 14)(1, "app-icon");
    i0.ɵɵtext(2, "restaurant");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(3, "div", 16);
    i0.ɵɵtext(4, "Catered");
    i0.ɵɵelementEnd()();
  }
}
function EventCardComponent_a_1_div_29_div_1_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 24);
    i0.ɵɵelement(1, "a-user-avatar", 25);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var user_r3 = ctx.$implicit;
    i0.ɵɵadvance();
    i0.ɵɵproperty("user", user_r3);
  }
}
function EventCardComponent_a_1_div_29_div_3_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 24)(1, "div", 26);
    i0.ɵɵtext(2);
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var ctx_r0 = i0.ɵɵnextContext(3);
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate1(" +", (ctx_r0.event == null ? null : ctx_r0.event.attendees == null ? null : ctx_r0.event.attendees.length) - 5, " ");
  }
}
function EventCardComponent_a_1_div_29_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 21);
    i0.ɵɵtemplate(1, EventCardComponent_a_1_div_29_div_1_Template, 2, 1, "div", 22);
    i0.ɵɵpipe(2, "slice");
    i0.ɵɵtemplate(3, EventCardComponent_a_1_div_29_div_3_Template, 3, 1, "div", 23);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r0 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngForOf", i0.ɵɵpipeBind3(2, 2, ctx_r0.event == null ? null : ctx_r0.event.attendees, 0, (ctx_r0.event == null ? null : ctx_r0.event.attendees == null ? null : ctx_r0.event.attendees.length) === 6 ? 6 : 5));
    i0.ɵɵadvance(2);
    i0.ɵɵproperty("ngIf", (ctx_r0.event == null ? null : ctx_r0.event.attendees == null ? null : ctx_r0.event.attendees.length) > 6);
  }
}
function EventCardComponent_a_1_Template(rf, ctx) {
  if (rf & 1) {
    var _r2 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "a", 6);
    i0.ɵɵlistener("click", function EventCardComponent_a_1_Template_a_click_0_listener() {
      i0.ɵɵrestoreView(_r2);
      var ctx_r0 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r0.viewDetails());
    });
    i0.ɵɵelementStart(1, "div", 7)(2, "h4", 8);
    i0.ɵɵtext(3);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(4, "div", 9)(5, "status-pill", 10)(6, "div", 11)(7, "div");
    i0.ɵɵtext(8);
    i0.ɵɵelementEnd();
    i0.ɵɵtemplate(9, EventCardComponent_a_1_div_9_Template, 2, 1, "div", 12);
    i0.ɵɵelementEnd()()();
    i0.ɵɵelementStart(10, "div", 13)(11, "div", 14)(12, "app-icon");
    i0.ɵɵtext(13, "meeting_room");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(14, "div", 15);
    i0.ɵɵtext(15);
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(16, "div", 14)(17, "app-icon");
    i0.ɵɵtext(18, "person_outline");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(19, "div", 16);
    i0.ɵɵtext(20);
    i0.ɵɵelementEnd()();
    i0.ɵɵtemplate(21, EventCardComponent_a_1_div_21_Template, 5, 0, "div", 17);
    i0.ɵɵelementStart(22, "div", 14)(23, "app-icon");
    i0.ɵɵtext(24, "people");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(25, "div", 16);
    i0.ɵɵtext(26);
    i0.ɵɵelementEnd()()();
    i0.ɵɵelementStart(27, "app-icon", 18);
    i0.ɵɵtext(28, " chevron_right ");
    i0.ɵɵelementEnd();
    i0.ɵɵtemplate(29, EventCardComponent_a_1_div_29_Template, 4, 6, "div", 19);
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var tmp_10_0;
    var ctx_r0 = i0.ɵɵnextContext();
    i0.ɵɵproperty("routerLink", i0.ɵɵpureFunction0(14, _c0))("queryParams", i0.ɵɵpureFunction1(15, _c1, ctx_r0.event == null ? null : ctx_r0.event.id));
    i0.ɵɵadvance(3);
    i0.ɵɵtextInterpolate(ctx_r0.event == null ? null : ctx_r0.event.title);
    i0.ɵɵadvance(2);
    i0.ɵɵproperty("status", ctx_r0.status);
    i0.ɵɵadvance();
    i0.ɵɵclassProp("pr-4", ctx_r0.timezone && ctx_r0.tz);
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate(ctx_r0.period);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", ctx_r0.timezone && ctx_r0.tz);
    i0.ɵɵadvance(6);
    i0.ɵɵtextInterpolate1(" ", ctx_r0.location, " ");
    i0.ɵɵadvance(5);
    i0.ɵɵtextInterpolate1(" ", (ctx_r0.event == null ? null : ctx_r0.event.organiser == null ? null : ctx_r0.event.organiser.name) || (ctx_r0.event == null ? null : ctx_r0.event.organiser == null ? null : ctx_r0.event.organiser.email), " ");
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", ctx_r0.event == null ? null : (tmp_10_0 = ctx_r0.event.ext("catering")) == null ? null : tmp_10_0.length);
    i0.ɵɵadvance(5);
    i0.ɵɵtextInterpolate2(" ", ctx_r0.event == null ? null : ctx_r0.event.attendees == null ? null : ctx_r0.event.attendees.length, " ", (ctx_r0.event == null ? null : ctx_r0.event.attendees == null ? null : ctx_r0.event.attendees.length) === 1 ? "Person" : "People", " ");
    i0.ɵɵadvance(3);
    i0.ɵɵproperty("ngIf", ctx_r0.event == null ? null : ctx_r0.event.attendees == null ? null : ctx_r0.event.attendees.length);
  }
}
var EventCardComponent = /*#__PURE__*/function (_common_1$AsyncHandle) {
  function EventCardComponent(_dialog, _route, _org, _space_pipe, _settings) {
    var _this;
    _classCallCheck(this, EventCardComponent);
    _this = _callSuper(this, EventCardComponent);
    _this._dialog = _dialog;
    _this._route = _route;
    _this._org = _org;
    _this._space_pipe = _space_pipe;
    _this._settings = _settings;
    _this.show_day = false;
    _this.edit = new core_1.EventEmitter();
    _this.remove = new core_1.EventEmitter();
    _this.location = '';
    _this._local_tz = (0, common_1.getTimezoneOffsetString)(Intl.DateTimeFormat().resolvedOptions().timeZone);
    _this._date = new common_2.DatePipe('en');
    return _this;
  }
  _inherits(EventCardComponent, _common_1$AsyncHandle);
  return _createClass(EventCardComponent, [{
    key: "timezone",
    get: function get() {
      return this._settings.get('app.events.use_building_timezone') ? this._org.building.timezone : '';
    }
  }, {
    key: "tz",
    get: function get() {
      var tz = this.timezone;
      if (!tz) return '';
      var tz_offset = (0, common_1.getTimezoneOffsetString)(tz);
      return tz_offset === this._local_tz ? '' : tz_offset;
    }
  }, {
    key: "time_format",
    get: function get() {
      return this._settings.time_format;
    }
  }, {
    key: "period",
    get: function get() {
      var _this$event;
      if ((_this$event = this.event) !== null && _this$event !== void 0 && _this$event.all_day) return 'All Day';
      return this.formattedTime();
    }
  }, {
    key: "period_tz",
    get: function get() {
      return this.formattedTime(this.tz);
    }
  }, {
    key: "formattedTime",
    value: function formattedTime(tz) {
      var _this$event2;
      var date = this.event.date;
      var date_end = this.event.date_end;
      var all_day = this.event.all_day;
      var tz_format = this._date.transform(date, 'z', tz);
      var start_date = this._date.transform(date, 'MMM d', tz);
      var start_time = this._date.transform(date, this.time_format, tz);
      var end_date = this._date.transform(date_end, 'MMM d', tz);
      var end_time = this._date.transform(date_end, this.time_format, tz);
      var is_multiday = ((_this$event2 = this.event) === null || _this$event2 === void 0 ? void 0 : _this$event2.duration) > 24 * 60;
      if (is_multiday) {
        return "".concat(start_date).concat(all_day ? '' : ', ' + start_time, " - ").concat(end_date).concat(all_day ? '' : ', ' + end_time);
      } else if (all_day) {
        return 'All Day';
      }
      return "".concat(start_time, " - ").concat(end_time, " ").concat('(' + tz_format + ')');
    }
  }, {
    key: "status",
    get: function get() {
      var _this$event3, _this$event4, _this$event5, _this$event6;
      if (((_this$event3 = this.event) === null || _this$event3 === void 0 ? void 0 : _this$event3.state) === 'done') return 'neutral';
      if (((_this$event4 = this.event) === null || _this$event4 === void 0 ? void 0 : _this$event4.status) === 'approved') return 'success';
      if (((_this$event5 = this.event) === null || _this$event5 === void 0 ? void 0 : _this$event5.status) === 'tentative') return 'warning';
      if (((_this$event6 = this.event) === null || _this$event6 === void 0 ? void 0 : _this$event6.status) === 'declined') return 'error';
      return 'warning';
    }
  }, {
    key: "ngOnInit",
    value: function () {
      var _ngOnInit = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
        var _this2 = this;
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              this.subscription('route.query', this._route.queryParamMap.subscribe(function (params) {
                var _this2$event;
                return params.has('event') && ((_this2$event = _this2.event) === null || _this2$event === void 0 ? void 0 : _this2$event.id) === params.get('event') ? _this2.viewDetails() : '';
              }));
              _context.next = 3;
              return this.getLocationString();
            case 3:
              this.location = _context.sent;
            case 4:
            case "end":
              return _context.stop();
          }
        }, _callee, this);
      }));
      function ngOnInit() {
        return _ngOnInit.apply(this, arguments);
      }
      return ngOnInit;
    }()
  }, {
    key: "ngOnChanges",
    value: function () {
      var _ngOnChanges = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(changes) {
        return _regeneratorRuntime().wrap(function _callee2$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              if (!(changes.event && this.event)) {
                _context2.next = 4;
                break;
              }
              _context2.next = 3;
              return this.getLocationString();
            case 3:
              this.location = _context2.sent;
            case 4:
            case "end":
              return _context2.stop();
          }
        }, _callee2, this);
      }));
      function ngOnChanges(_x) {
        return _ngOnChanges.apply(this, arguments);
      }
      return ngOnChanges;
    }()
  }, {
    key: "day",
    get: function get() {
      var _this$event7;
      var date = ((_this$event7 = this.event) === null || _this$event7 === void 0 ? void 0 : _this$event7.date) || Date.now();
      var is_today = (0, date_fns_1.isSameDay)(Date.now(), date);
      return "".concat(is_today ? 'Today' : (0, date_fns_1.format)(date, 'EEEE'));
    }
  }, {
    key: "getLocationString",
    value: function () {
      var _getLocationString = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {
        var _this$event8, _this$event9, _this$event10;
        var system, space, zone_list, zone;
        return _regeneratorRuntime().wrap(function _callee3$(_context3) {
          while (1) switch (_context3.prev = _context3.next) {
            case 0:
              system = ((_this$event8 = this.event) === null || _this$event8 === void 0 ? void 0 : _this$event8.resources[0]) || ((_this$event9 = this.event) === null || _this$event9 === void 0 ? void 0 : _this$event9.system) || ((_this$event10 = this.event) === null || _this$event10 === void 0 ? void 0 : _this$event10.space) || {};
              _context3.next = 3;
              return this._space_pipe.transform(system.id || system.email);
            case 3:
              space = _context3.sent;
              zone_list = (space === null || space === void 0 ? void 0 : space.zones) || [];
              zone = this._org.levelWithID(zone_list) || this._org.buildings.find(function (_) {
                return zone_list.includes(_.id);
              });
              return _context3.abrupt("return", "".concat(zone ? (zone.display_name || zone.name) + ', ' : '', " ").concat((space === null || space === void 0 ? void 0 : space.display_name) || (space === null || space === void 0 ? void 0 : space.name)));
            case 7:
            case "end":
              return _context3.stop();
          }
        }, _callee3, this);
      }));
      function getLocationString() {
        return _getLocationString.apply(this, arguments);
      }
      return getLocationString;
    }()
  }, {
    key: "viewDetails",
    value: function viewDetails() {
      var _this3 = this;
      if (!this.event) return;
      this.timeout('open', function () {
        var _this3$event$extensio;
        if ((_this3$event$extensio = _this3.event.extension_data) !== null && _this3$event$extensio !== void 0 && _this3$event$extensio.shared_event) {
          _this3._dialog.open(group_event_details_modal_component_1.GroupEventDetailsModalComponent, {
            data: {
              event: _this3.event,
              concierge: false
            }
          });
          return;
        }
        var ref = _this3._dialog.open(event_details_modal_component_1.EventDetailsModalComponent, {
          data: _this3.event
        });
        _this3.subscription('edit', ref.componentInstance.edit.subscribe(function () {
          return _this3.edit.emit();
        }));
        _this3.subscription('remove', ref.componentInstance.remove.subscribe(function (_) {
          return _this3.remove.emit(_);
        }));
      });
    }
  }]);
}(common_1.AsyncHandler);
_EventCardComponent = EventCardComponent;
_EventCardComponent.ɵfac = function EventCardComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _EventCardComponent)(i0.ɵɵdirectiveInject(i1.MatDialog), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i3.OrganisationService), i0.ɵɵdirectiveInject(i4.SpacePipe), i0.ɵɵdirectiveInject(i5.SettingsService));
};
_EventCardComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _EventCardComponent,
  selectors: [["event-card"]],
  inputs: {
    event: "event",
    show_day: "show_day"
  },
  outputs: {
    edit: "edit",
    remove: "remove"
  },
  features: [i0.ɵɵProvidersFeature([space_pipe_1.SpacePipe]), i0.ɵɵInheritDefinitionFeature, i0.ɵɵNgOnChangesFeature],
  decls: 2,
  vars: 2,
  consts: [["class", "mb-2 flex items-center", "date", "", 4, "ngIf"], ["name", "view-event-details", "class", "w-full cursor-pointer relative", 3, "routerLink", "queryParams", "click", 4, "ngIf"], ["date", "", 1, "mb-2", "flex", "items-center"], ["day", "", 4, "ngIf"], [1, "text-xs", "px-2"], ["day", ""], ["name", "view-event-details", 1, "w-full", "cursor-pointer", "relative", 3, "click", "routerLink", "queryParams"], [1, "w-full", "bg-base-100", "border", "border-base-300", "rounded-xl", "shadow", "py-4", "relative"], [1, "px-4", "text-lg"], [1, "flex", "mx-4", "my-2"], [3, "status"], [1, "flex", "flex-col", "leading-tight"], ["class", "opacity-30 text-xs", 4, "ngIf"], [1, "flex", "flex-wrap", "flex-col", "sm:flex-row", "sm:divide-x", "divide-base-200-500", "py-2", "space-y-2", "sm:space-y-0"], [1, "flex", "items-center", "px-4"], [1, "mx-2", "truncate"], [1, "mx-2"], ["class", "flex items-center px-4", 4, "ngIf"], [1, "absolute", "top-1/2", "right-1", "text-4xl", "-translate-y-1/2"], ["class", "absolute bottom-2 right-2 sm:bottom-auto sm:top-2 text-sm sm:text-base flex items-center pr-4", 4, "ngIf"], [1, "opacity-30", "text-xs"], [1, "absolute", "bottom-2", "right-2", "sm:bottom-auto", "sm:top-2", "text-sm", "sm:text-base", "flex", "items-center", "pr-4"], ["class", "h-10 w-6", 4, "ngFor", "ngForOf"], ["class", "h-10 w-6", 4, "ngIf"], [1, "h-10", "w-6"], [3, "user"], [1, "bg-secondary", "rounded-full", "h-10", "w-10", "border-2", "border-base-100", "flex", "items-center", "justify-center", "text-secondary-content"]],
  template: function EventCardComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵtemplate(0, EventCardComponent_h4_0_Template, 7, 9, "h4", 0)(1, EventCardComponent_a_1_Template, 30, 17, "a", 1);
    }
    if (rf & 2) {
      i0.ɵɵproperty("ngIf", ctx.event);
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", ctx.event);
    }
  },
  styles: ["[_nghost-%COMP%] {\n                display: block;\n                width: 100%;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImV2ZW50LWNhcmQuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxjQUFjO2dCQUNkLFdBQVc7WUFDZiIsImZpbGUiOiJldmVudC1jYXJkLmNvbXBvbmVudC50cyIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgOmhvc3Qge1xuICAgICAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgfVxuICAgICAgICAiXX0= */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvZXZlbnRzL3NyYy9saWIvZXZlbnQtY2FyZC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLGNBQWM7Z0JBQ2QsV0FBVztZQUNmOztBQUVaLGdhQUFnYSIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgOmhvc3Qge1xuICAgICAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgfVxuICAgICAgICAiXSwic291cmNlUm9vdCI6IiJ9 */"]
});
exports.EventCardComponent = EventCardComponent;

/***/ }),

/***/ 54035:
/*!**************************************************************!*\
  !*** ./libs/events/src/lib/event-details-modal.component.ts ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _taggedTemplateLiteral = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js */ 9959)["default"]);
var _objectSpread = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/objectSpread2.js */ 34092)["default"]);
var _regeneratorRuntime = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/regeneratorRuntime.js */ 8698)["default"]);
var _asyncToGenerator = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/asyncToGenerator.js */ 95386)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _EventDetailsModalComponent, _templateObject, _templateObject2, _templateObject3, _templateObject4, _templateObject5, _templateObject6, _templateObject7, _templateObject8, _templateObject9, _templateObject10, _templateObject11, _templateObject12, _templateObject13, _templateObject14, _templateObject15, _templateObject16;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.EventDetailsModalComponent = void 0;
var core_1 = __webpack_require__(/*! @angular/core */ 37580);
var dialog_1 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var date_fns_1 = __webpack_require__(/*! date-fns */ 25773);
var event_class_1 = __webpack_require__(/*! ./event.class */ 6727);
var map_pin_component_1 = __webpack_require__(/*! libs/components/src/lib/map-pin.component */ 71865);
var organisation_service_1 = __webpack_require__(/*! libs/organisation/src/lib/organisation.service */ 19863);
var space_pipe_1 = __webpack_require__(/*! libs/spaces/src/lib/space.pipe */ 22011);
var building_class_1 = __webpack_require__(/*! libs/organisation/src/lib/building.class */ 95170);
var level_class_1 = __webpack_require__(/*! libs/organisation/src/lib/level.class */ 60602);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var space_class_1 = __webpack_require__(/*! libs/spaces/src/lib/space.class */ 30735);
var ts_client_1 = __webpack_require__(/*! @placeos/ts-client */ 35713);
var map_locate_modal_component_1 = __webpack_require__(/*! libs/components/src/lib/map-locate-modal.component */ 90620);
var events_fn_1 = __webpack_require__(/*! ./events.fn */ 51416);
var common_2 = __webpack_require__(/*! @angular/common */ 60316);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! libs/organisation/src/lib/organisation.service */ 19863);
var i2 = __webpack_require__(/*! libs/spaces/src/lib/space.pipe */ 22011);
var i3 = __webpack_require__(/*! @placeos/common */ 22797);
var i4 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var i5 = __webpack_require__(/*! ./event.class */ 6727);
var _c0 = function _c0() {
  return {
    disable_pan: true,
    disable_zoom: true
  };
};
function EventDetailsModalComponent_div_3_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelement(0, "div", 64);
  }
}
function EventDetailsModalComponent_div_4_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 65);
    i0.ɵɵelement(1, "image-carousel", 66);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance();
    i0.ɵɵproperty("images", ctx_r1.event == null ? null : ctx_r1.event.system == null ? null : ctx_r1.event.system.images);
  }
}
function EventDetailsModalComponent_div_13_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 67);
    i0.ɵɵtext(1);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", ctx_r1.period_tz, " ");
  }
}
function EventDetailsModalComponent_div_14_button_1_Template(rf, ctx) {
  if (rf & 1) {
    var _r3 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "button", 71);
    i0.ɵɵlistener("click", function EventDetailsModalComponent_div_14_button_1_Template_button_click_0_listener() {
      i0.ɵɵrestoreView(_r3);
      var ctx_r1 = i0.ɵɵnextContext(2);
      return i0.ɵɵresetView(ctx_r1.checkin());
    });
    i0.ɵɵelementStart(1, "div", 72)(2, "app-icon", 73);
    i0.ɵɵtext(3);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(4, "div", 74);
    i0.ɵɵi18n(5, 9);
    i0.ɵɵelementEnd()()();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext(2);
    i0.ɵɵclassProp("bg-success", ctx_r1.room_status !== "pending")("border-none", ctx_r1.room_status !== "pending")("pointer-events-none", ctx_r1.room_status !== "pending");
    i0.ɵɵadvance(3);
    i0.ɵɵtextInterpolate(ctx_r1.room_status === "pending" ? "arrow_back" : "done");
    i0.ɵɵadvance(2);
    i0.ɵɵi18nExp(ctx_r1.room_status === "pending" ? "Check in" : "Checked in");
    i0.ɵɵi18nApply(5);
  }
}
function EventDetailsModalComponent_div_14_button_2_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "button", 75)(1, "app-icon");
    i0.ɵɵtext(2, "more_horiz");
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    i0.ɵɵnextContext(2);
    var menu_r4 = i0.ɵɵreference(86);
    i0.ɵɵproperty("matMenuTriggerFor", menu_r4);
  }
}
function EventDetailsModalComponent_div_14_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 68);
    i0.ɵɵtemplate(1, EventDetailsModalComponent_div_14_button_1_Template, 6, 8, "button", 69)(2, EventDetailsModalComponent_div_14_button_2_Template, 3, 1, "button", 70);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", ctx_r1.room_status && (ctx_r1.event == null ? null : ctx_r1.event.can_check_in) && ctx_r1.room_status !== "free");
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", ctx_r1.allow_edit);
  }
}
function EventDetailsModalComponent_div_26_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 67);
    i0.ɵɵtext(1);
    i0.ɵɵpipe(2, "date");
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", i0.ɵɵpipeBind3(2, 1, ctx_r1.event.date, "EEEE, dd LLLL y (z)", ctx_r1.tz), " ");
  }
}
function EventDetailsModalComponent_div_33_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 67);
    i0.ɵɵtext(1);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", ctx_r1.period_tz, " ");
  }
}
function EventDetailsModalComponent_ng_container_38_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵtext(1);
    i0.ɵɵelementContainerEnd();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", (ctx_r1.level == null ? null : ctx_r1.level.display_name) || (ctx_r1.level == null ? null : ctx_r1.level.name), ", ");
  }
}
function EventDetailsModalComponent_div_40_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 32)(1, "app-icon");
    i0.ɵɵtext(2, "place");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(3, "div");
    i0.ɵɵtext(4);
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance(4);
    i0.ɵɵtextInterpolate2(" ", (ctx_r1.building == null ? null : ctx_r1.building.display_name) || (ctx_r1.building == null ? null : ctx_r1.building.name), ", ", ctx_r1.building == null ? null : ctx_r1.building.address, " ");
  }
}
function EventDetailsModalComponent_div_47_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 76);
    i0.ɵɵtext(1, " Entity: ");
    i0.ɵɵelementStart(2, "span", 77);
    i0.ɵɵtext(3);
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance(3);
    i0.ɵɵtextInterpolate1(" ", ctx_r1.event.extension_data.visitor_entity, " ");
  }
}
function EventDetailsModalComponent_ng_container_65_div_1_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 79);
    i0.ɵɵelement(1, "a-user-avatar", 48);
    i0.ɵɵelementStart(2, "div", 49)(3, "div", 50);
    i0.ɵɵtext(4);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(5, "div", 51);
    i0.ɵɵtext(6);
    i0.ɵɵelementEnd()()();
  }
  if (rf & 2) {
    var user_r5 = i0.ɵɵnextContext().$implicit;
    i0.ɵɵadvance();
    i0.ɵɵproperty("user", user_r5);
    i0.ɵɵadvance(3);
    i0.ɵɵtextInterpolate1(" ", user_r5 == null ? null : user_r5.name, " ");
    i0.ɵɵadvance();
    i0.ɵɵproperty("title", user_r5.email);
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", user_r5.email, " ");
  }
}
function EventDetailsModalComponent_ng_container_65_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵtemplate(1, EventDetailsModalComponent_ng_container_65_div_1_Template, 7, 4, "div", 78);
    i0.ɵɵelementContainerEnd();
  }
  if (rf & 2) {
    var user_r5 = ctx.$implicit;
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", user_r5.email !== ctx_r1.event.host);
  }
}
function EventDetailsModalComponent_div_75_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 80);
    i0.ɵɵtext(1, " Entity: ");
    i0.ɵɵelementStart(2, "span", 77);
    i0.ɵɵtext(3);
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance(3);
    i0.ɵɵtextInterpolate1(" ", ctx_r1.event.extension_data.host_entity, " ");
  }
}
function EventDetailsModalComponent_ng_container_76_div_5_div_13_span_4_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "span", 97);
    i0.ɵɵtext(1);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var item_r8 = i0.ɵɵnextContext().$implicit;
    var ctx_r1 = i0.ɵɵnextContext(3);
    i0.ɵɵproperty("matTooltip", ctx_r1.optionList(item_r8));
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", (item_r8.option_list == null ? null : item_r8.option_list.length) || "0", " option(s) ");
  }
}
function EventDetailsModalComponent_ng_container_76_div_5_div_13_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 92)(1, "div", 93)(2, "span", 87);
    i0.ɵɵtext(3);
    i0.ɵɵelementEnd();
    i0.ɵɵtemplate(4, EventDetailsModalComponent_ng_container_76_div_5_div_13_span_4_Template, 2, 2, "span", 94);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(5, "div", 95);
    i0.ɵɵtext(6);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(7, "div", 96);
    i0.ɵɵtext(8);
    i0.ɵɵpipe(9, "currency");
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var item_r8 = ctx.$implicit;
    var ctx_r1 = i0.ɵɵnextContext(3);
    i0.ɵɵadvance(3);
    i0.ɵɵtextInterpolate(item_r8.name || "Item");
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", item_r8.option_list == null ? null : item_r8.option_list.length);
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate1(" x", item_r8.quantity, " ");
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate1(" ", i0.ɵɵpipeBind2(9, 4, item_r8.unit_price_with_options / 100, ctx_r1.currency_code), " ea ");
  }
}
function EventDetailsModalComponent_ng_container_76_div_5_Template(rf, ctx) {
  if (rf & 1) {
    var _r6 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 84)(1, "div", 85)(2, "div", 86)(3, "div", 87);
    i0.ɵɵtext(4);
    i0.ɵɵpipe(5, "date");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(6, "div", 88);
    i0.ɵɵtext(7);
    i0.ɵɵpipe(8, "currency");
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(9, "button", 89);
    i0.ɵɵlistener("click", function EventDetailsModalComponent_ng_container_76_div_5_Template_button_click_9_listener() {
      var order_r7 = i0.ɵɵrestoreView(_r6).$implicit;
      var ctx_r1 = i0.ɵɵnextContext(2);
      return i0.ɵɵresetView(ctx_r1.show_order[order_r7.id] = !ctx_r1.show_order[order_r7.id]);
    });
    i0.ɵɵelementStart(10, "app-icon");
    i0.ɵɵtext(11);
    i0.ɵɵelementEnd()()();
    i0.ɵɵelementStart(12, "div", 90);
    i0.ɵɵtemplate(13, EventDetailsModalComponent_ng_container_76_div_5_div_13_Template, 10, 7, "div", 91);
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var order_r7 = ctx.$implicit;
    var ctx_r1 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance(4);
    i0.ɵɵtextInterpolate1(" Order at ", i0.ɵɵpipeBind2(5, 7, order_r7.deliver_at, "MMM d, " + ctx_r1.time_format), " ");
    i0.ɵɵadvance(3);
    i0.ɵɵtextInterpolate2(" ", order_r7.item_count, " item(s) for ", i0.ɵɵpipeBind2(8, 10, order_r7.total_cost / 100, ctx_r1.currency_code), " ");
    i0.ɵɵadvance(2);
    i0.ɵɵproperty("matTooltip", ctx_r1.show_order[order_r7.id] ? "Hide order items" : "Show order items");
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate1(" ", ctx_r1.show_order[order_r7.id] ? "expand_less" : "expand_more", " ");
    i0.ɵɵadvance();
    i0.ɵɵproperty("@show", ctx_r1.print || ctx_r1.show_order[order_r7.id] ? "show" : "hide");
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngForOf", order_r7.items);
  }
}
function EventDetailsModalComponent_ng_container_76_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵelementStart(1, "div", 35)(2, "h3", 81);
    i0.ɵɵi18n(3, 10);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(4, "div", 82);
    i0.ɵɵtemplate(5, EventDetailsModalComponent_ng_container_76_div_5_Template, 14, 13, "div", 83);
    i0.ɵɵelementEnd()();
    i0.ɵɵelementContainerEnd();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance(5);
    i0.ɵɵproperty("ngForOf", ctx_r1.event.valid_catering);
  }
}
function EventDetailsModalComponent_ng_container_78_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵelement(1, "interactive-map", 98);
    i0.ɵɵelementContainerEnd();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance();
    i0.ɵɵproperty("src", ctx_r1.level == null ? null : ctx_r1.level.map_id)("features", ctx_r1.features)("options", i0.ɵɵpureFunction0(3, _c0));
  }
}
function EventDetailsModalComponent_div_79_div_3_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelement(0, "div", 101);
    i0.ɵɵpipe(1, "sanitize");
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext(2);
    i0.ɵɵproperty("innerHTML", i0.ɵɵpipeBind1(1, 1, ctx_r1.body) || "Unable to sanitize notes contents", i0.ɵɵsanitizeHtml);
  }
}
function EventDetailsModalComponent_div_79_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 35)(1, "h3", 99);
    i0.ɵɵi18n(2, 11);
    i0.ɵɵelementEnd();
    i0.ɵɵtemplate(3, EventDetailsModalComponent_div_79_div_3_Template, 2, 3, "div", 100);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance(3);
    i0.ɵɵproperty("ngIf", ctx_r1.raw_body);
  }
}
function EventDetailsModalComponent_ng_container_80_div_5_div_13_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 92)(1, "div", 93)(2, "span", 87);
    i0.ɵɵtext(3);
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(4, "div", 95);
    i0.ɵɵtext(5);
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var item_r11 = ctx.$implicit;
    i0.ɵɵadvance(3);
    i0.ɵɵtextInterpolate(item_r11.name || "Item");
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate1(" x", item_r11.quantity, " ");
  }
}
function EventDetailsModalComponent_ng_container_80_div_5_Template(rf, ctx) {
  if (rf & 1) {
    var _r9 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 104)(1, "button", 105);
    i0.ɵɵlistener("click", function EventDetailsModalComponent_ng_container_80_div_5_Template_button_click_1_listener() {
      var request_r10 = i0.ɵɵrestoreView(_r9).$implicit;
      var ctx_r1 = i0.ɵɵnextContext(2);
      return i0.ɵɵresetView(ctx_r1.show_request[request_r10.id] = !ctx_r1.show_request[request_r10.id]);
    });
    i0.ɵɵelementStart(2, "div", 106)(3, "div", 87);
    i0.ɵɵtext(4);
    i0.ɵɵpipe(5, "date");
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(6, "div", 107)(7, "app-icon");
    i0.ɵɵtext(8);
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(9, "div", 108)(10, "app-icon", 73);
    i0.ɵɵtext(11);
    i0.ɵɵelementEnd()()();
    i0.ɵɵelementStart(12, "div", 90);
    i0.ɵɵtemplate(13, EventDetailsModalComponent_ng_container_80_div_5_div_13_Template, 6, 2, "div", 91);
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var request_r10 = ctx.$implicit;
    var ctx_r1 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance(4);
    i0.ɵɵtextInterpolate1(" Requested for ", i0.ɵɵpipeBind2(5, 18, request_r10.deliver_at, "MMM d, " + ctx_r1.time_format), " ");
    i0.ɵɵadvance(2);
    i0.ɵɵclassProp("bg-success", request_r10.state === "approved")("text-success-content", request_r10.state === "approved")("bg-warning", request_r10.state !== "approved" && request_r10.state !== "rejected")("text-warning-content", request_r10.state !== "approved" && request_r10.state !== "rejected")("bg-error", request_r10.state === "rejected")("text-error-content", request_r10.state === "rejected");
    i0.ɵɵproperty("matTooltip", request_r10.state || "Tentative");
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate1(" ", request_r10.state === "approved" ? "done" : request_r10.state === "rejected" ? "close" : "schedule", " ");
    i0.ɵɵadvance(3);
    i0.ɵɵtextInterpolate1(" ", ctx_r1.show_request[request_r10.id] ? "expand_less" : "expand_more", " ");
    i0.ɵɵadvance();
    i0.ɵɵproperty("@show", ctx_r1.print || ctx_r1.show_request[request_r10.id] ? "show" : "hide");
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngForOf", request_r10.items);
  }
}
function EventDetailsModalComponent_ng_container_80_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵelementStart(1, "div", 35)(2, "h3", 102);
    i0.ɵɵi18n(3, 12);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(4, "div", 82);
    i0.ɵɵtemplate(5, EventDetailsModalComponent_ng_container_80_div_5_Template, 14, 21, "div", 103);
    i0.ɵɵelementEnd()();
    i0.ɵɵelementContainerEnd();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance(3);
    i0.ɵɵi18nExp((ctx_r1.event.valid_assets == null ? null : ctx_r1.event.valid_assets.length) || 0);
    i0.ɵɵi18nApply(3);
    i0.ɵɵadvance(2);
    i0.ɵɵproperty("ngForOf", ctx_r1.event.valid_assets);
  }
}
function EventDetailsModalComponent_div_84_Template(rf, ctx) {
  if (rf & 1) {
    var _r12 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 109)(1, "attendee-list", 110);
    i0.ɵɵlistener("click", function EventDetailsModalComponent_div_84_Template_attendee_list_click_1_listener() {
      i0.ɵɵrestoreView(_r12);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.show_attendees = false);
    });
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance();
    i0.ɵɵproperty("list", ctx_r1.event.attendees)("host", ctx_r1.event.host);
  }
}
function EventDetailsModalComponent_button_87_Template(rf, ctx) {
  if (rf & 1) {
    var _r13 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "button", 111);
    i0.ɵɵlistener("click", function EventDetailsModalComponent_button_87_Template_button_click_0_listener() {
      i0.ɵɵrestoreView(_r13);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.edit.emit(ctx_r1.space));
    });
    i0.ɵɵelementStart(1, "div", 60)(2, "app-icon", 73);
    i0.ɵɵtext(3, "edit");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(4, "div");
    i0.ɵɵi18n(5, 13);
    i0.ɵɵelementEnd()()();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵproperty("matTooltip", !ctx_r1.can_edit ? ctx_r1.no_edit_message : "")("disabled", !ctx_r1.can_edit);
  }
}
function EventDetailsModalComponent_button_94_Template(rf, ctx) {
  if (rf & 1) {
    var _r14 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "button", 59);
    i0.ɵɵlistener("click", function EventDetailsModalComponent_button_94_Template_button_click_0_listener() {
      i0.ɵɵrestoreView(_r14);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.printEvent());
    });
    i0.ɵɵelementStart(1, "div", 60)(2, "app-icon", 73);
    i0.ɵɵtext(3, "print");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(4, "div");
    i0.ɵɵi18n(5, 14);
    i0.ɵɵelementEnd()()();
  }
}
function EventDetailsModalComponent_button_95_Template(rf, ctx) {
  if (rf & 1) {
    var _r15 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "button", 59);
    i0.ɵɵlistener("click", function EventDetailsModalComponent_button_95_Template_button_click_0_listener() {
      i0.ɵɵrestoreView(_r15);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.remove.emit(true));
    });
    i0.ɵɵelementStart(1, "div", 60)(2, "app-icon", 61);
    i0.ɵɵtext(3, "delete");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(4, "div");
    i0.ɵɵi18n(5, 15);
    i0.ɵɵelementEnd()()();
  }
}
function EventDetailsModalComponent_button_96_Template(rf, ctx) {
  if (rf & 1) {
    var _r16 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "button", 59);
    i0.ɵɵlistener("click", function EventDetailsModalComponent_button_96_Template_button_click_0_listener() {
      var act_r17 = i0.ɵɵrestoreView(_r16).$implicit;
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.action.emit(act_r17.id));
    });
    i0.ɵɵelementStart(1, "div", 60)(2, "app-icon", 73);
    i0.ɵɵtext(3);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(4, "div");
    i0.ɵɵi18n(5, 16);
    i0.ɵɵelementEnd()()();
  }
  if (rf & 2) {
    var act_r17 = ctx.$implicit;
    i0.ɵɵadvance(3);
    i0.ɵɵtextInterpolate(act_r17.icon);
    i0.ɵɵadvance(2);
    i0.ɵɵi18nExp(act_r17.name);
    i0.ɵɵi18nApply(5);
  }
}
var EMPTY_ACTIONS = [];
var EventDetailsModalComponent = /*#__PURE__*/function () {
  function EventDetailsModalComponent(_event, _org, _space_pipe, _settings, _dialog) {
    var _this$event, _this$event2, _this$event3;
    _classCallCheck(this, EventDetailsModalComponent);
    this._event = _event;
    this._org = _org;
    this._space_pipe = _space_pipe;
    this._settings = _settings;
    this._dialog = _dialog;
    this.action = new core_1.EventEmitter();
    this.edit = new core_1.EventEmitter();
    this.remove = new core_1.EventEmitter();
    this.show_order = {};
    this.show_request = {};
    this.room_status = '';
    this.hide_map = false;
    this.hide_edit = false;
    this.raw_body = '';
    this.print = false;
    this.show_attendees = false;
    this.event = this._event;
    this.no_edit_message = 'Editing bookings long than \n a day is not available';
    this.features = [{
      location: (_this$event = this.event) === null || _this$event === void 0 || (_this$event = _this$event.system) === null || _this$event === void 0 ? void 0 : _this$event.map_id,
      content: map_pin_component_1.MapPinComponent
    }];
    this.has_catering = ((_this$event2 = this.event) === null || _this$event2 === void 0 || (_this$event2 = _this$event2.ext('catering')) === null || _this$event2 === void 0 ? void 0 : _this$event2.length) > 0;
    this.has_assets = !!((_this$event3 = this.event) !== null && _this$event3 !== void 0 && (_this$event3 = _this$event3.linked_bookings) !== null && _this$event3 !== void 0 && _this$event3.find(function (_) {
      return _.booking_type === 'asset-request';
    }));
    this.level = new level_class_1.BuildingLevel();
    this.building = new building_class_1.Building();
    this.space = new space_class_1.Space();
    this._local_tz = (0, common_1.getTimezoneOffsetString)(Intl.DateTimeFormat().resolvedOptions().timeZone);
    this.accept_count = this._event.attendees.reduce(function (count, user) {
      return count += user.response_status === 'accepted' ? 1 : 0;
    }, 0);
    this.declined_count = this._event.attendees.reduce(function (count, user) {
      return count += user.response_status === 'declined' ? 1 : 0;
    }, 0);
    this.pending_count = this._event.attendees.reduce(function (count, user) {
      return count += user.response_status === 'tentative' || user.response_status === 'needsAction' ? 1 : 0;
    }, 0);
    this._date = new common_2.DatePipe('en');
    var doc = new DOMParser().parseFromString(this.event.body, 'text/html');
    this.raw_body = (doc.body.textContent || '').trim();
    console.log('Body:', this.raw_body);
    this._load().then();
    console.log('Timezone:', this.timezone);
  }
  return _createClass(EventDetailsModalComponent, [{
    key: "is_concierge",
    get: function get() {
      return this._settings.app_name.toLowerCase().includes('concierge');
    }
  }, {
    key: "can_edit",
    get: function get() {
      return true;
      // return (
      //     this.event.duration <= 24 * 60 ||
      //     this._settings.get('app.events.allow_multiday')
      // );
    }
  }, {
    key: "timezone",
    get: function get() {
      return this._settings.get('app.events.use_building_timezone') ? this._org.building.timezone : '';
    }
  }, {
    key: "tz",
    get: function get() {
      var tz = this.timezone;
      if (!tz) return '';
      var tz_offset = (0, common_1.getTimezoneOffsetString)(tz);
      return tz_offset === this._local_tz ? '' : tz_offset;
    }
  }, {
    key: "tz_date_same",
    get: function get() {
      return !this._date.transform(this.event.date, 'yyyy-MM-dd', this.tz).localeCompare(this._date.transform(this.event.date, 'yyyy-MM-dd'));
    }
  }, {
    key: "body",
    get: function get() {
      return this.event.body.replace(/\\n\\n\[ID\|.*\]/gm, '');
    }
  }, {
    key: "allow_edit",
    get: function get() {
      return !this._settings.get('app.events.booking_unavailable');
    }
  }, {
    key: "custom_actions",
    get: function get() {
      return this._settings.get('app.events.custom_actions') || EMPTY_ACTIONS;
    }
  }, {
    key: "time_format",
    get: function get() {
      return this._settings.time_format;
    }
  }, {
    key: "event_status",
    get: function get() {
      var _this$event4, _this$event5, _this$event6, _this$event7;
      if (((_this$event4 = this.event) === null || _this$event4 === void 0 ? void 0 : _this$event4.state) === 'done') return 'neutral';
      if (((_this$event5 = this.event) === null || _this$event5 === void 0 ? void 0 : _this$event5.status) === 'approved') return 'success';
      if (((_this$event6 = this.event) === null || _this$event6 === void 0 ? void 0 : _this$event6.status) === 'tentative') return 'warning';
      if (((_this$event7 = this.event) === null || _this$event7 === void 0 ? void 0 : _this$event7.status) === 'declined') return 'error';
      return 'warning';
    }
  }, {
    key: "period",
    get: function get() {
      var _this$event8;
      if ((_this$event8 = this.event) !== null && _this$event8 !== void 0 && _this$event8.all_day) return 'All Day';
      return this.formattedTime();
    }
  }, {
    key: "period_tz",
    get: function get() {
      return this.formattedTime(this.tz);
    }
  }, {
    key: "formattedTime",
    value: function formattedTime(tz) {
      var _this$event9;
      var date = this.event.date;
      var date_end = this.event.date_end;
      var all_day = this.event.all_day;
      var tz_format = this._date.transform(date, 'z', tz);
      var start_date = this._date.transform(date, 'MMM d', tz);
      var start_time = this._date.transform(date, this.time_format, tz);
      var end_date = this._date.transform(date_end, 'MMM d', tz);
      var end_time = this._date.transform(date_end, this.time_format, tz);
      var is_multiday = ((_this$event9 = this.event) === null || _this$event9 === void 0 ? void 0 : _this$event9.duration) > 24 * 60;
      if (is_multiday) {
        return "".concat(start_date).concat(all_day ? '' : ', ' + start_time, " - ").concat(end_date).concat(all_day ? '' : ', ' + end_time);
      } else if (all_day) {
        return 'All Day';
      }
      return "".concat(start_time, " - ").concat(end_time, " ").concat('(' + tz_format + ')');
    }
  }, {
    key: "optionList",
    value: function optionList(item) {
      var _item$option_list;
      return (_item$option_list = item.option_list) === null || _item$option_list === void 0 ? void 0 : _item$option_list.map(function (_) {
        return _.name;
      }).join('\n');
    }
  }, {
    key: "checkin",
    value: function () {
      var _checkin = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
        var _this$space;
        var mod;
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              mod = (0, ts_client_1.getModule)((_this$space = this.space) === null || _this$space === void 0 ? void 0 : _this$space.id, 'Bookings');
              if (mod) {
                _context.next = 3;
                break;
              }
              return _context.abrupt("return");
            case 3:
              _context.next = 5;
              return mod.execute('checkin', [(0, date_fns_1.getUnixTime)(this.event.date)])["catch"](function (e) {
                return (0, common_1.notifyError)("Error checking in booking. ".concat(e));
              });
            case 5:
              this.room_status = 'busy';
            case 6:
            case "end":
              return _context.stop();
          }
        }, _callee, this);
      }));
      function checkin() {
        return _checkin.apply(this, arguments);
      }
      return checkin;
    }()
  }, {
    key: "_load",
    value: function () {
      var _load2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {
        var _this$_event$system,
          _this$_event$system2,
          _this = this,
          _this$event$extension,
          _this$event$extension2;
        var doc, metadata;
        return _regeneratorRuntime().wrap(function _callee2$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              _context2.next = 2;
              return this._space_pipe.transform(((_this$_event$system = this._event.system) === null || _this$_event$system === void 0 ? void 0 : _this$_event$system.id) || ((_this$_event$system2 = this._event.system) === null || _this$_event$system2 === void 0 ? void 0 : _this$_event$system2.email));
            case 2:
              this.space = _context2.sent;
              this.level = this._org.levelWithID(this.space.zones);
              this.building = this._org.buildings.find(function (bld) {
                return _this.space.zones.includes(bld.id);
              });
              this.features = [{
                location: this.space.map_id,
                content: map_pin_component_1.MapPinComponent
              }];
              doc = new DOMParser().parseFromString(this.event.body, 'text/html');
              this.raw_body = (doc.body.textContent || '').trim();
              if (!((_this$event$extension = this.event.extension_data.catering) !== null && _this$event$extension !== void 0 && _this$event$extension.length || (_this$event$extension2 = this.event.extension_data.assets) !== null && _this$event$extension2 !== void 0 && _this$event$extension2.length)) {
                _context2.next = 10;
                break;
              }
              return _context2.abrupt("return");
            case 10:
              _context2.next = 12;
              return (0, events_fn_1.getEventMetadata)(this._event.id, this.space.id).toPromise();
            case 12:
              metadata = _context2.sent;
              if (metadata) {
                this._event = new event_class_1.CalendarEvent(_objectSpread(_objectSpread({}, this._event), {}, {
                  extension_data: _objectSpread(_objectSpread({}, this._event.extension_data), metadata)
                }));
              }
            case 14:
            case "end":
              return _context2.stop();
          }
        }, _callee2, this);
      }));
      function _load() {
        return _load2.apply(this, arguments);
      }
      return _load;
    }()
  }, {
    key: "status",
    value: function status(id) {
      var booking = this.event.linked_bookings.find(function (_) {
        return _.asset_id === id;
      });
      if (booking.status) return booking.status;
      return booking ? booking.approved ? 'approved' : booking.rejected ? 'rejected' : 'pending' : 'pending';
    }
  }, {
    key: "viewLocation",
    value: function viewLocation() {
      var _this2 = this;
      this.hide_map = true;
      var ref = this._dialog.open(map_locate_modal_component_1.MapLocateModalComponent, {
        maxWidth: '95vw',
        maxHeight: '95vh',
        data: {
          item: this.space
        }
      });
      ref.afterClosed().subscribe(function () {
        _this2.hide_map = false;
      });
    }
  }, {
    key: "printEvent",
    value: function printEvent() {
      var _this3 = this;
      this.print = true;
      setTimeout(function () {
        window.print();
        setTimeout(function () {
          return _this3.print = false;
        }, 100);
      }, 300);
    }
  }]);
}();
_EventDetailsModalComponent = EventDetailsModalComponent;
_EventDetailsModalComponent.ɵfac = function EventDetailsModalComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _EventDetailsModalComponent)(i0.ɵɵdirectiveInject(dialog_1.MAT_DIALOG_DATA), i0.ɵɵdirectiveInject(i1.OrganisationService), i0.ɵɵdirectiveInject(i2.SpacePipe), i0.ɵɵdirectiveInject(i3.SettingsService), i0.ɵɵdirectiveInject(i4.MatDialog));
};
_EventDetailsModalComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _EventDetailsModalComponent,
  selectors: [["event-details-modal"]],
  outputs: {
    action: "action",
    edit: "edit",
    remove: "remove"
  },
  features: [i0.ɵɵProvidersFeature([space_pipe_1.SpacePipe])],
  decls: 97,
  vars: 42,
  consts: function consts() {
    var i18n_0;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_2102851380219026584$$LIBS_EVENTS_SRC_LIB_EVENT_DETAILS_MODAL_COMPONENT_TS_0 = goog.getMsg(" Details ");
      i18n_0 = MSG_EXTERNAL_2102851380219026584$$LIBS_EVENTS_SRC_LIB_EVENT_DETAILS_MODAL_COMPONENT_TS_0;
    } else {
      i18n_0 = $localize(_templateObject || (_templateObject = _taggedTemplateLiteral([":\u241F2c8ce65c566300dc9063f69c615fda2e3a6b896a\u241F2102851380219026584: Details "])));
    }
    var i18n_1;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_8291262399353359697$$LIBS_EVENTS_SRC_LIB_EVENT_DETAILS_MODAL_COMPONENT_TS_1 = goog.getMsg("Attendees");
      i18n_1 = MSG_EXTERNAL_8291262399353359697$$LIBS_EVENTS_SRC_LIB_EVENT_DETAILS_MODAL_COMPONENT_TS_1;
    } else {
      i18n_1 = $localize(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([":\u241Fdc34e61df786db36347c8dc09510fa3d5d4c6253\u241F8291262399353359697:Attendees"])));
    }
    var i18n_2;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_5528514721268144968$$LIBS_EVENTS_SRC_LIB_EVENT_DETAILS_MODAL_COMPONENT_TS_2 = goog.getMsg(" See All ");
      i18n_2 = MSG_EXTERNAL_5528514721268144968$$LIBS_EVENTS_SRC_LIB_EVENT_DETAILS_MODAL_COMPONENT_TS_2;
    } else {
      i18n_2 = $localize(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([":\u241F8ee85ef5a3693fb53511af55f66b8543941a5968\u241F5528514721268144968: See All "])));
    }
    var i18n_3;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_2807800733729323332$$LIBS_EVENTS_SRC_LIB_EVENT_DETAILS_MODAL_COMPONENT_TS_3 = goog.getMsg("Yes");
      i18n_3 = MSG_EXTERNAL_2807800733729323332$$LIBS_EVENTS_SRC_LIB_EVENT_DETAILS_MODAL_COMPONENT_TS_3;
    } else {
      i18n_3 = $localize(_templateObject4 || (_templateObject4 = _taggedTemplateLiteral([":\u241F4f20f2d5a6882190892e58b85f6ccbedfa737952\u241F2807800733729323332:Yes"])));
    }
    var i18n_4;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_3542042671420335679$$LIBS_EVENTS_SRC_LIB_EVENT_DETAILS_MODAL_COMPONENT_TS_4 = goog.getMsg("No");
      i18n_4 = MSG_EXTERNAL_3542042671420335679$$LIBS_EVENTS_SRC_LIB_EVENT_DETAILS_MODAL_COMPONENT_TS_4;
    } else {
      i18n_4 = $localize(_templateObject5 || (_templateObject5 = _taggedTemplateLiteral([":\u241F3d3ae7deebc5949b0c1c78b9847886a94321d9fd\u241F3542042671420335679:No"])));
    }
    var i18n_5;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_4416413576346763682$$LIBS_EVENTS_SRC_LIB_EVENT_DETAILS_MODAL_COMPONENT_TS_5 = goog.getMsg("Pending");
      i18n_5 = MSG_EXTERNAL_4416413576346763682$$LIBS_EVENTS_SRC_LIB_EVENT_DETAILS_MODAL_COMPONENT_TS_5;
    } else {
      i18n_5 = $localize(_templateObject6 || (_templateObject6 = _taggedTemplateLiteral([":\u241Fe6a27066251ca1e04c5be86ad758380856df2506\u241F4416413576346763682:Pending"])));
    }
    var i18n_6;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_6139423482037031714$$LIBS_EVENTS_SRC_LIB_EVENT_DETAILS_MODAL_COMPONENT_TS_6 = goog.getMsg(" Host ");
      i18n_6 = MSG_EXTERNAL_6139423482037031714$$LIBS_EVENTS_SRC_LIB_EVENT_DETAILS_MODAL_COMPONENT_TS_6;
    } else {
      i18n_6 = $localize(_templateObject7 || (_templateObject7 = _taggedTemplateLiteral([":\u241F01072150a2c93fe7032783804ebfa5a1e41f3685\u241F6139423482037031714: Host "])));
    }
    var i18n_7;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_4014175048517775632$$LIBS_EVENTS_SRC_LIB_EVENT_DETAILS_MODAL_COMPONENT_TS_7 = goog.getMsg("Delete event");
      i18n_7 = MSG_EXTERNAL_4014175048517775632$$LIBS_EVENTS_SRC_LIB_EVENT_DETAILS_MODAL_COMPONENT_TS_7;
    } else {
      i18n_7 = $localize(_templateObject8 || (_templateObject8 = _taggedTemplateLiteral([":\u241Fe634daa29c58868c9c9c4d9fcc7ba1c016fac86b\u241F4014175048517775632:Delete event"])));
    }
    var i18n_8;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_3151361020738293834$$LIBS_EVENTS_SRC_LIB_EVENT_DETAILS_MODAL_COMPONENT_TS_8 = goog.getMsg(" {$interpolation} ", {
        "interpolation": "\uFFFD0\uFFFD"
      }, {
        original_code: {
          "interpolation": "{{\n                                        room_status === 'pending'\n                                            ? 'Check in'\n                                            : 'Checked in'\n                                    }}"
        }
      });
      i18n_8 = MSG_EXTERNAL_3151361020738293834$$LIBS_EVENTS_SRC_LIB_EVENT_DETAILS_MODAL_COMPONENT_TS_8;
    } else {
      i18n_8 = $localize(_templateObject9 || (_templateObject9 = _taggedTemplateLiteral([":\u241Fe00cf812605b14c9c2390da404d3cd3ea67f19a6\u241F3151361020738293834: ", ":INTERPOLATION: "])), "\uFFFD0\uFFFD");
    }
    var i18n_9;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_6975755512274629403$$LIBS_EVENTS_SRC_LIB_EVENT_DETAILS_MODAL_COMPONENT_TS_9 = goog.getMsg(" Catering ");
      i18n_9 = MSG_EXTERNAL_6975755512274629403$$LIBS_EVENTS_SRC_LIB_EVENT_DETAILS_MODAL_COMPONENT_TS_9;
    } else {
      i18n_9 = $localize(_templateObject10 || (_templateObject10 = _taggedTemplateLiteral([":\u241Fef2612559c447d8f4c218c06bb66af9de8edf365\u241F6975755512274629403: Catering "])));
    }
    var i18n_10;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_4484880822148672471$$LIBS_EVENTS_SRC_LIB_EVENT_DETAILS_MODAL_COMPONENT_TS_10 = goog.getMsg(" Notes ");
      i18n_10 = MSG_EXTERNAL_4484880822148672471$$LIBS_EVENTS_SRC_LIB_EVENT_DETAILS_MODAL_COMPONENT_TS_10;
    } else {
      i18n_10 = $localize(_templateObject11 || (_templateObject11 = _taggedTemplateLiteral([":\u241F195b2f1c65301b0700459c9d0ae2ce407ed9c7bf\u241F4484880822148672471: Notes "])));
    }
    var i18n_11;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_3391582008093299175$$LIBS_EVENTS_SRC_LIB_EVENT_DETAILS_MODAL_COMPONENT_TS_11 = goog.getMsg(" Assets ({$interpolation}) ", {
        "interpolation": "\uFFFD0\uFFFD"
      }, {
        original_code: {
          "interpolation": "{{ event.valid_assets?.length || 0 }}"
        }
      });
      i18n_11 = MSG_EXTERNAL_3391582008093299175$$LIBS_EVENTS_SRC_LIB_EVENT_DETAILS_MODAL_COMPONENT_TS_11;
    } else {
      i18n_11 = $localize(_templateObject12 || (_templateObject12 = _taggedTemplateLiteral([":\u241Fe30ee857e7399db3f72ec7aa8aa9b56ce76fca96\u241F3391582008093299175: Assets (", ":INTERPOLATION:) "])), "\uFFFD0\uFFFD");
    }
    var i18n_12;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_2772374745622574688$$LIBS_EVENTS_SRC_LIB_EVENT_DETAILS_MODAL_COMPONENT_TS_12 = goog.getMsg("Edit event");
      i18n_12 = MSG_EXTERNAL_2772374745622574688$$LIBS_EVENTS_SRC_LIB_EVENT_DETAILS_MODAL_COMPONENT_TS_12;
    } else {
      i18n_12 = $localize(_templateObject13 || (_templateObject13 = _taggedTemplateLiteral([":\u241F56c74224d22c7379fdbf9d0a00c8bf519a9ee661\u241F2772374745622574688:Edit event"])));
    }
    var i18n_13;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_3510992542220959923$$LIBS_EVENTS_SRC_LIB_EVENT_DETAILS_MODAL_COMPONENT_TS_13 = goog.getMsg("Print event");
      i18n_13 = MSG_EXTERNAL_3510992542220959923$$LIBS_EVENTS_SRC_LIB_EVENT_DETAILS_MODAL_COMPONENT_TS_13;
    } else {
      i18n_13 = $localize(_templateObject14 || (_templateObject14 = _taggedTemplateLiteral([":\u241Fc2d85636ba32bd1dd78e1a65f42f02651e54a66e\u241F3510992542220959923:Print event"])));
    }
    var i18n_14;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_3974228098480354844$$LIBS_EVENTS_SRC_LIB_EVENT_DETAILS_MODAL_COMPONENT_TS_14 = goog.getMsg("Delete Series");
      i18n_14 = MSG_EXTERNAL_3974228098480354844$$LIBS_EVENTS_SRC_LIB_EVENT_DETAILS_MODAL_COMPONENT_TS_14;
    } else {
      i18n_14 = $localize(_templateObject15 || (_templateObject15 = _taggedTemplateLiteral([":\u241Fecb2e91e2775870da0ea8e51b4951994493672fb\u241F3974228098480354844:Delete Series"])));
    }
    var i18n_15;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_941732683947462971$$LIBS_EVENTS_SRC_LIB_EVENT_DETAILS_MODAL_COMPONENT_TS_15 = goog.getMsg("{$interpolation}", {
        "interpolation": "\uFFFD0\uFFFD"
      }, {
        original_code: {
          "interpolation": "{{ act.name }}"
        }
      });
      i18n_15 = MSG_EXTERNAL_941732683947462971$$LIBS_EVENTS_SRC_LIB_EVENT_DETAILS_MODAL_COMPONENT_TS_15;
    } else {
      i18n_15 = $localize(_templateObject16 || (_templateObject16 = _taggedTemplateLiteral([":\u241F8fcf89a6df3c02c129a41d4b202221a4013f107c\u241F941732683947462971:", ":INTERPOLATION:"])), "\uFFFD0\uFFFD");
    }
    return [["menu", "matMenu"], i18n_0, i18n_1, i18n_2, i18n_3, i18n_4, i18n_5, i18n_6, i18n_7, i18n_8, i18n_9, i18n_10, i18n_11, i18n_12, i18n_13, i18n_14, i18n_15, [1, "w-screen", "h-screen", "print:min-h-screen", "print:w-screen", "sm:relative", "sm:inset-auto", "sm:w-[51rem]", "sm:h-auto", "sm:max-h-[80vh]", "bg-base-100", "sm:bg-base-200", "sm:rounded", "overflow-auto", "space-y-2", "pb-2", "print:overflow-visible"], [1, "sm:flex", "flex-col", "items-center", "pb-4", "max-h-screen", "sm:max-h-[80vh]", "sm:px-16", "sm:border-b", "bg-base-100", "border-base-200", "print:border-none"], ["binding", "", "mod", "Bookings", "bind", "status", 3, "modelChange", "model", "sys"], ["class", "h-8 w-full sm:hidden block", 4, "ngIf"], ["class", "bg-neutral w-full h-64 sm:rounded-b overflow-hidden print:hidden", 4, "ngIf"], ["title", "", 1, "px-3", "mt-2", "text-xl", "font-medium", "w-full"], [1, "sm:flex", "items-center", "justify-between", "w-full"], [1, "flex", "m-2"], [3, "status"], [1, "flex", "flex-col", "leading-tight"], ["class", "opacity-30 text-xs", 4, "ngIf"], ["actions", "", "class", "flex items-center space-x-2 px-2 print:hidden", 4, "ngIf"], [1, "sm:flex", "flex-wrap", "sm:px-12"], [1, "sm:p-4", "sm:bg-base-100", "rounded", "sm:m-2", "sm:border", "border-base-200", "flex-grow-[3]", "min-w-1/3", "sm:w-[16rem]", "space-y-2"], [1, "px-3", "mt-2", "text-lg", "font-medium", "mb-2"], [1, "flex", "items-center", "px-2", "space-x-2"], [4, "ngIf"], ["class", "flex items-center px-2 space-x-2", 4, "ngIf"], [1, "mt-4", "sm:p-4", "sm:bg-base-100", "rounded", "sm:m-2", "sm:border", "border-base-200", "flex-grow-[3]", "min-w-1/3", "sm:w-[16rem]"], [1, "mx-3", "border-t", "border-base-200", "sm:border-none", "flex", "items-center", "justify-between"], [1, "text-lg", "font-medium"], ["matRipple", "", "show-attendees", "", 1, "clear", "text-xs", "underline", "print:hidden", 3, "click"], ["class", "flex items-center py-2 space-x-2 text-sm px-4 max-w-full", 4, "ngIf"], [1, "flex", "items-center", "p-1"], [1, "flex", "flex-col", "flex-1", "items-center", "justify-center", "space-y-1"], [1, "text-lg"], [1, "text-sm", "uppercase"], [1, "hidden", "print:block"], [4, "ngFor", "ngForOf"], [1, "mx-3", "mt-2", "pt-2", "text-lg", "font-medium", "border-t", "border-base-200"], ["host", "", 1, "px-2", "flex", "items-center", "space-x-2"], [3, "user"], [1, "text-sm", "flex-1", "w-px"], [1, "truncate", "w-full"], [1, "opacity-60", "truncate", "w-full", 3, "title"], ["class", "flex items-center space-x-2 text-sm px-4 py-2 max-w-full", 4, "ngIf"], ["map", "", 1, "mt-4", "sm:mt-2", "h-64", "sm:h-48", "relative", "border", "border-base-200", "overflow-hidden", "rounded", "sm:bg-base-100", "m-2", "flex-grow-[3]", "min-w-1/3", "p-2", "w-[calc(100%-1rem)]", "sm:w-[16rem]", 3, "click"], ["class", "mt-4 sm:p-4 sm:bg-base-100 rounded sm:m-2 sm:border border-base-200 flex-grow-[3] min-w-1/3 sm:w-[16rem]", 4, "ngIf"], ["icon", "", "matRipple", "", "mat-dialog-close", "", 1, "absolute", "top-2", "left-2", "bg-neutral", "text-white", "print:hidden"], ["class", "absolute inset-0 z-50", 4, "ngIf"], ["xPosition", "before"], ["mat-menu-item", "", "mat-dialog-close", "", 3, "matTooltip", "disabled", "click", 4, "ngIf"], ["mat-menu-item", "", 3, "click"], [1, "flex", "items-center", "space-x-2", "text-base", "pr-2"], [1, "text-2xl", "text-error"], ["mat-menu-item", "", 3, "click", 4, "ngIf"], ["mat-menu-item", "", 3, "click", 4, "ngFor", "ngForOf"], [1, "h-8", "w-full", "sm:hidden", "block"], [1, "bg-neutral", "w-full", "h-64", "sm:rounded-b", "overflow-hidden", "print:hidden"], [1, "w-full", "h-64", 3, "images"], [1, "opacity-30", "text-xs"], ["actions", "", 1, "flex", "items-center", "space-x-2", "px-2", "print:hidden"], ["btn", "", "matRipple", "", "class", "flex-1 h-10", 3, "bg-success", "border-none", "pointer-events-none", "click", 4, "ngIf"], ["icon", "", "matRipple", "", "class", "bg-secondary rounded text-white h-12 w-12", 3, "matMenuTriggerFor", 4, "ngIf"], ["btn", "", "matRipple", "", 1, "flex-1", "h-10", 3, "click"], [1, "flex", "items-center", "space-x-2", "justify-center"], [1, "text-2xl"], [1, "pr-4"], ["icon", "", "matRipple", "", 1, "bg-secondary", "rounded", "text-white", "h-12", "w-12", 3, "matMenuTriggerFor"], [1, "flex", "items-center", "py-2", "space-x-2", "text-sm", "px-4", "max-w-full"], [1, "ml-2", "opacity-60", "p-1", "text-xs", "bg-base-200", "rounded", "truncate"], ["class", "px-2 flex items-center space-x-2", "attendee", "", 4, "ngIf"], ["attendee", "", 1, "px-2", "flex", "items-center", "space-x-2"], [1, "flex", "items-center", "space-x-2", "text-sm", "px-4", "py-2", "max-w-full"], [1, "mx-3", "my-2", "text-lg", "font-medium"], [1, "flex", "flex-col", "space-y-2"], ["order", "", "class", "border border-base-300 bg-base-100 rounded-xl overflow-hidden", 4, "ngFor", "ngForOf"], ["order", "", 1, "border", "border-base-300", "bg-base-100", "rounded-xl", "overflow-hidden"], [1, "flex", "items-center", "space-x-2", "p-3"], [1, "flex-1"], [1, "text-sm"], [1, "text-xs", "opacity-60"], ["icon", "", "matRipple", "", 1, "print:hidden", 3, "click", "matTooltip"], [1, "flex", "flex-col", "bg-base-200", "divide-y", "divide-base-100"], ["class", "flex items-center px-3 py-1 space-x-2 hover:opacity-90", 4, "ngFor", "ngForOf"], [1, "flex", "items-center", "px-3", "py-1", "space-x-2", "hover:opacity-90"], [1, "flex", "items-center", "flex-1"], ["class", "text-xs opacity-60 ml-4 font-normal", 3, "matTooltip", 4, "ngIf"], [1, "rounded", "bg-success", "text-success-content", "text-xs", "px-2", "py-1"], [1, "rounded", "bg-info", "text-info-content", "text-xs", "px-2", "py-1"], [1, "text-xs", "opacity-60", "ml-4", "font-normal", 3, "matTooltip"], [1, "pointer-events-none", 3, "src", "features", "options"], [1, "mx-3", "text-lg", "font-medium", "border-t", "sm:border-none", "border-base-200"], ["notes", "", "class", "mx-4 overflow-hidden max-w-full", 3, "innerHTML", 4, "ngIf"], ["notes", "", 1, "mx-4", "overflow-hidden", "max-w-full", 3, "innerHTML"], [1, "mx-3", "pt-2", "text-lg", "font-medium"], ["request", "", "class", "border border-base-300 bg-base-100 rounded-xl overflow-hidden", 4, "ngFor", "ngForOf"], ["request", "", 1, "border", "border-base-300", "bg-base-100", "rounded-xl", "overflow-hidden"], ["matRipple", "", 1, "flex", "items-center", "space-x-2", "p-3", "w-full", 3, "click"], [1, "flex-1", "text-left"], [1, "flex", "items-center", "justify-center", "rounded-full", "w-8", "h-8", "print:hidden", 3, "matTooltip"], [1, "flex", "items-center", "justify-center", "rounded-full", "w-8", "h-8", "print:hidden"], [1, "absolute", "inset-0", "z-50"], [3, "click", "list", "host"], ["mat-menu-item", "", "mat-dialog-close", "", 3, "click", "matTooltip", "disabled"]];
  },
  template: function EventDetailsModalComponent_Template(rf, ctx) {
    if (rf & 1) {
      var _r1 = i0.ɵɵgetCurrentView();
      i0.ɵɵelementStart(0, "div", 17)(1, "div", 18)(2, "i", 19);
      i0.ɵɵtwoWayListener("modelChange", function EventDetailsModalComponent_Template_i_modelChange_2_listener($event) {
        i0.ɵɵrestoreView(_r1);
        i0.ɵɵtwoWayBindingSet(ctx.room_status, $event) || (ctx.room_status = $event);
        return i0.ɵɵresetView($event);
      });
      i0.ɵɵelementEnd();
      i0.ɵɵtemplate(3, EventDetailsModalComponent_div_3_Template, 1, 0, "div", 20)(4, EventDetailsModalComponent_div_4_Template, 2, 1, "div", 21);
      i0.ɵɵelementStart(5, "h3", 22);
      i0.ɵɵtext(6);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(7, "div", 23)(8, "div", 24)(9, "status-pill", 25)(10, "div", 26)(11, "div");
      i0.ɵɵtext(12);
      i0.ɵɵelementEnd();
      i0.ɵɵtemplate(13, EventDetailsModalComponent_div_13_Template, 2, 1, "div", 27);
      i0.ɵɵelementEnd()()();
      i0.ɵɵtemplate(14, EventDetailsModalComponent_div_14_Template, 3, 2, "div", 28);
      i0.ɵɵelementEnd()();
      i0.ɵɵelementStart(15, "div", 29)(16, "div", 30)(17, "h3", 31);
      i0.ɵɵi18n(18, 1);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(19, "div", 32)(20, "app-icon");
      i0.ɵɵtext(21, "event");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(22, "div", 26)(23, "div");
      i0.ɵɵtext(24);
      i0.ɵɵpipe(25, "date");
      i0.ɵɵelementEnd();
      i0.ɵɵtemplate(26, EventDetailsModalComponent_div_26_Template, 3, 5, "div", 27);
      i0.ɵɵelementEnd()();
      i0.ɵɵelementStart(27, "div", 32)(28, "app-icon");
      i0.ɵɵtext(29, "schedule");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(30, "div", 26)(31, "div");
      i0.ɵɵtext(32);
      i0.ɵɵelementEnd();
      i0.ɵɵtemplate(33, EventDetailsModalComponent_div_33_Template, 2, 1, "div", 27);
      i0.ɵɵelementEnd()();
      i0.ɵɵelementStart(34, "div", 32)(35, "app-icon");
      i0.ɵɵtext(36, "map");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(37, "div");
      i0.ɵɵtemplate(38, EventDetailsModalComponent_ng_container_38_Template, 2, 1, "ng-container", 33);
      i0.ɵɵtext(39);
      i0.ɵɵelementEnd()();
      i0.ɵɵtemplate(40, EventDetailsModalComponent_div_40_Template, 5, 2, "div", 34);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(41, "div", 35)(42, "div", 36)(43, "h3", 37);
      i0.ɵɵi18n(44, 2);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(45, "button", 38);
      i0.ɵɵlistener("click", function EventDetailsModalComponent_Template_button_click_45_listener() {
        i0.ɵɵrestoreView(_r1);
        return i0.ɵɵresetView(ctx.show_attendees = true);
      });
      i0.ɵɵi18n(46, 3);
      i0.ɵɵelementEnd()();
      i0.ɵɵtemplate(47, EventDetailsModalComponent_div_47_Template, 4, 1, "div", 39);
      i0.ɵɵelementStart(48, "div", 40)(49, "div", 41)(50, "div", 42);
      i0.ɵɵtext(51);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(52, "div", 43);
      i0.ɵɵi18n(53, 4);
      i0.ɵɵelementEnd()();
      i0.ɵɵelementStart(54, "div", 41)(55, "div", 42);
      i0.ɵɵtext(56);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(57, "div", 43);
      i0.ɵɵi18n(58, 5);
      i0.ɵɵelementEnd()();
      i0.ɵɵelementStart(59, "div", 41)(60, "div", 42);
      i0.ɵɵtext(61);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(62, "div", 43);
      i0.ɵɵi18n(63, 6);
      i0.ɵɵelementEnd()()();
      i0.ɵɵelementStart(64, "div", 44);
      i0.ɵɵtemplate(65, EventDetailsModalComponent_ng_container_65_Template, 2, 1, "ng-container", 45);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(66, "h3", 46);
      i0.ɵɵi18n(67, 7);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(68, "div", 47);
      i0.ɵɵelement(69, "a-user-avatar", 48);
      i0.ɵɵelementStart(70, "div", 49)(71, "div", 50);
      i0.ɵɵtext(72);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(73, "div", 51);
      i0.ɵɵtext(74);
      i0.ɵɵelementEnd()()();
      i0.ɵɵtemplate(75, EventDetailsModalComponent_div_75_Template, 4, 1, "div", 52);
      i0.ɵɵelementEnd();
      i0.ɵɵtemplate(76, EventDetailsModalComponent_ng_container_76_Template, 6, 1, "ng-container", 33);
      i0.ɵɵelementStart(77, "button", 53);
      i0.ɵɵlistener("click", function EventDetailsModalComponent_Template_button_click_77_listener() {
        i0.ɵɵrestoreView(_r1);
        return i0.ɵɵresetView(ctx.viewLocation());
      });
      i0.ɵɵtemplate(78, EventDetailsModalComponent_ng_container_78_Template, 2, 4, "ng-container", 33);
      i0.ɵɵelementEnd();
      i0.ɵɵtemplate(79, EventDetailsModalComponent_div_79_Template, 4, 1, "div", 54)(80, EventDetailsModalComponent_ng_container_80_Template, 6, 2, "ng-container", 33);
      i0.ɵɵelementStart(81, "button", 55)(82, "app-icon");
      i0.ɵɵtext(83, "close");
      i0.ɵɵelementEnd()();
      i0.ɵɵtemplate(84, EventDetailsModalComponent_div_84_Template, 2, 2, "div", 56);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(85, "mat-menu", 57, 0);
      i0.ɵɵtemplate(87, EventDetailsModalComponent_button_87_Template, 6, 2, "button", 58);
      i0.ɵɵelementStart(88, "button", 59);
      i0.ɵɵlistener("click", function EventDetailsModalComponent_Template_button_click_88_listener() {
        i0.ɵɵrestoreView(_r1);
        return i0.ɵɵresetView(ctx.remove.emit());
      });
      i0.ɵɵelementStart(89, "div", 60)(90, "app-icon", 61);
      i0.ɵɵtext(91, "delete");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(92, "div");
      i0.ɵɵi18n(93, 8);
      i0.ɵɵelementEnd()()();
      i0.ɵɵtemplate(94, EventDetailsModalComponent_button_94_Template, 6, 0, "button", 62)(95, EventDetailsModalComponent_button_95_Template, 6, 0, "button", 62)(96, EventDetailsModalComponent_button_96_Template, 6, 2, "button", 63);
      i0.ɵɵelementEnd()();
    }
    if (rf & 2) {
      i0.ɵɵadvance(2);
      i0.ɵɵtwoWayProperty("model", ctx.room_status);
      i0.ɵɵproperty("sys", ctx.space == null ? null : ctx.space.id);
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", !(ctx.event == null ? null : ctx.event.system == null ? null : ctx.event.system.images == null ? null : ctx.event.system.images.length));
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", ctx.event == null ? null : ctx.event.system == null ? null : ctx.event.system.images == null ? null : ctx.event.system.images.length);
      i0.ɵɵadvance();
      i0.ɵɵclassProp("pt-4", !(ctx.event == null ? null : ctx.event.system == null ? null : ctx.event.system.images == null ? null : ctx.event.system.images.length));
      i0.ɵɵadvance();
      i0.ɵɵtextInterpolate1(" ", ctx.event.title, " ");
      i0.ɵɵadvance(3);
      i0.ɵɵproperty("status", ctx.event_status);
      i0.ɵɵadvance();
      i0.ɵɵclassProp("pr-4", ctx.timezone && ctx.tz);
      i0.ɵɵadvance(2);
      i0.ɵɵtextInterpolate(ctx.period);
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", ctx.timezone && ctx.tz);
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", ctx.event.state !== "done");
      i0.ɵɵadvance(10);
      i0.ɵɵtextInterpolate1(" ", i0.ɵɵpipeBind2(25, 39, ctx.event.date, "EEEE, dd LLLL y"), " ");
      i0.ɵɵadvance(2);
      i0.ɵɵproperty("ngIf", ctx.timezone && ctx.tz && !ctx.tz_date_same);
      i0.ɵɵadvance(6);
      i0.ɵɵtextInterpolate(ctx.period);
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", ctx.timezone && ctx.tz);
      i0.ɵɵadvance(5);
      i0.ɵɵproperty("ngIf", ctx.level);
      i0.ɵɵadvance();
      i0.ɵɵtextInterpolate1(" ", (ctx.event == null ? null : ctx.event.system == null ? null : ctx.event.system.display_name) || (ctx.event == null ? null : ctx.event.system == null ? null : ctx.event.system.name) || (ctx.event == null ? null : ctx.event.location), " ");
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", ctx.building);
      i0.ɵɵadvance(7);
      i0.ɵɵproperty("ngIf", ctx.event.extension_data.visitor_entity);
      i0.ɵɵadvance(4);
      i0.ɵɵtextInterpolate(ctx.accept_count || 0);
      i0.ɵɵadvance(5);
      i0.ɵɵtextInterpolate(ctx.declined_count || 0);
      i0.ɵɵadvance(5);
      i0.ɵɵtextInterpolate(ctx.pending_count || 0);
      i0.ɵɵadvance(4);
      i0.ɵɵproperty("ngForOf", ctx.event.attendees);
      i0.ɵɵadvance(4);
      i0.ɵɵproperty("user", ctx.event.organiser);
      i0.ɵɵadvance(3);
      i0.ɵɵtextInterpolate1(" ", ctx.event.organiser == null ? null : ctx.event.organiser.name, " ");
      i0.ɵɵadvance();
      i0.ɵɵproperty("title", ctx.event.host);
      i0.ɵɵadvance();
      i0.ɵɵtextInterpolate1(" ", ctx.event.host, " ");
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", ctx.event.extension_data.host_entity);
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", ctx.has_catering);
      i0.ɵɵadvance(2);
      i0.ɵɵproperty("ngIf", !ctx.hide_map);
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", ctx.raw_body);
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", ctx.has_assets);
      i0.ɵɵadvance(4);
      i0.ɵɵproperty("ngIf", ctx.show_attendees);
      i0.ɵɵadvance(3);
      i0.ɵɵproperty("ngIf", !ctx.hide_edit);
      i0.ɵɵadvance(7);
      i0.ɵɵproperty("ngIf", ctx.is_concierge);
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", ctx.event.recurring_event_id);
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngForOf", ctx.custom_actions);
    }
  },
  data: {
    animation: [common_1.ANIMATION_SHOW_CONTRACT_EXPAND]
  }
});
exports.EventDetailsModalComponent = EventDetailsModalComponent;

/***/ }),

/***/ 26101:
/*!***************************************************!*\
  !*** ./libs/events/src/lib/event-form.service.ts ***!
  \***************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _regeneratorRuntime = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/regeneratorRuntime.js */ 8698)["default"]);
var _asyncToGenerator = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/asyncToGenerator.js */ 95386)["default"]);
var _objectSpread = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/objectSpread2.js */ 34092)["default"]);
var _toConsumableArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/toConsumableArray.js */ 86033)["default"]);
var _slicedToArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/slicedToArray.js */ 6282)["default"]);
var _createForOfIteratorHelper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createForOfIteratorHelper.js */ 36350)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _callSuper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/callSuper.js */ 8513)["default"]);
var _inherits = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/inherits.js */ 58160)["default"]);
var _EventFormService;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.EventFormService = void 0;
var router_1 = __webpack_require__(/*! @angular/router */ 95072);
var dialog_1 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var ts_client_1 = __webpack_require__(/*! @placeos/ts-client */ 35713);
var rxjs_1 = __webpack_require__(/*! rxjs */ 15681);
var operators_1 = __webpack_require__(/*! rxjs/operators */ 97303);
var date_fns_1 = __webpack_require__(/*! date-fns */ 25773);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var settings_service_1 = __webpack_require__(/*! libs/common/src/lib/settings.service */ 14233);
var organisation_service_1 = __webpack_require__(/*! libs/organisation/src/lib/organisation.service */ 19863);
var bookings_fn_1 = __webpack_require__(/*! libs/bookings/src/lib/bookings.fn */ 18026);
var event_class_1 = __webpack_require__(/*! ./event.class */ 6727);
var events_fn_1 = __webpack_require__(/*! ./events.fn */ 51416);
var utilities_1 = __webpack_require__(/*! ./utilities */ 55049);
var booking_utilities_1 = __webpack_require__(/*! libs/bookings/src/lib/booking.utilities */ 39522);
var payments_service_1 = __webpack_require__(/*! libs/payments/src/lib/payments.service */ 34525);
var event_link_modal_component_1 = __webpack_require__(/*! ./event-link-modal.component */ 22671);
var space_utilities_1 = __webpack_require__(/*! libs/spaces/src/lib/space.utilities */ 28363);
var helpers_1 = __webpack_require__(/*! ./helpers */ 37420);
var space_pipe_1 = __webpack_require__(/*! libs/spaces/src/lib/space.pipe */ 22011);
var assets_fn_1 = __webpack_require__(/*! libs/assets/src/lib/assets.fn */ 75204);
var user_class_1 = __webpack_require__(/*! libs/users/src/lib/user.class */ 93693);
var asset_state_service_1 = __webpack_require__(/*! libs/assets/src/lib/asset-state.service */ 46088);
var events_fn_2 = __webpack_require__(/*! ./events.fn */ 51416);
var asset_request_class_1 = __webpack_require__(/*! libs/assets/src/lib/asset-request.class */ 33747);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! libs/organisation/src/lib/organisation.service */ 19863);
var i2 = __webpack_require__(/*! @angular/router */ 95072);
var i3 = __webpack_require__(/*! libs/payments/src/lib/payments.service */ 34525);
var i4 = __webpack_require__(/*! libs/common/src/lib/settings.service */ 14233);
var i5 = __webpack_require__(/*! libs/assets/src/lib/asset-state.service */ 46088);
var i6 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var BOOKING_URLS = ['book/rooms', 'book/spaces', 'book/meeting', 'schedule/view', 'confirm/success', 'upcoming'];
var MINUTES = 60 * 1000;
var EventFormService = /*#__PURE__*/function (_common_1$AsyncHandle) {
  function EventFormService(_org, _router, _payments, _settings, _assets, _dialog) {
    var _this;
    _classCallCheck(this, EventFormService);
    _this = _callSuper(this, EventFormService);
    _this._org = _org;
    _this._router = _router;
    _this._payments = _payments;
    _this._settings = _settings;
    _this._assets = _assets;
    _this._dialog = _dialog;
    _this._view = new rxjs_1.BehaviorSubject('form');
    _this._options = new rxjs_1.BehaviorSubject({
      zone_ids: [],
      features: []
    });
    _this._form = (0, utilities_1.generateEventForm)(undefined, _this._settings);
    _this._date = new rxjs_1.BehaviorSubject(Date.now());
    _this._event = new rxjs_1.BehaviorSubject(null);
    _this._loading = new rxjs_1.BehaviorSubject('');
    _this._changed = new rxjs_1.BehaviorSubject(0);
    _this.last_success = new event_class_1.CalendarEvent(JSON.parse(sessionStorage.getItem('PLACEOS.last_booked_event') || '{}'));
    _this.loading = _this._loading.asObservable();
    _this.options = _this._options.asObservable();
    _this.booking_rules = _this._org.building_list.pipe((0, operators_1.switchMap)(function (list) {
      return Promise.all(list.map(function (bld) {
        return (0, ts_client_1.showMetadata)(bld.id, 'room_booking_rules').toPromise();
      }));
    }), (0, operators_1.map)(function (building_rules) {
      var mapping = {};
      var _iterator = _createForOfIteratorHelper(building_rules),
        _step;
      try {
        for (_iterator.s(); !(_step = _iterator.n()).done;) {
          var rules = _step.value;
          mapping[rules.id] = rules.details instanceof Array ? rules.details : [];
        }
      } catch (err) {
        _iterator.e(err);
      } finally {
        _iterator.f();
      }
      return mapping;
    }), (0, operators_1.shareReplay)(1));
    _this.spaces = (0, rxjs_1.combineLatest)([_this._options.pipe((0, operators_1.distinctUntilKeyChanged)('zone_ids')), _this._org.active_region.pipe((0, operators_1.filter)(function (_) {
      return !!_;
    }), (0, operators_1.distinctUntilKeyChanged)('id')), _this._org.active_building.pipe((0, operators_1.filter)(function (_) {
      return !!_;
    }), (0, operators_1.distinctUntilKeyChanged)('id'))]).pipe((0, operators_1.debounceTime)(300), (0, operators_1.tap)(function (_) {
      return _this.unsubWith('bind:');
    }), (0, operators_1.switchMap)(function (_ref) {
      var _zone_ids;
      var _ref2 = _slicedToArray(_ref, 1),
        zone_ids = _ref2[0].zone_ids;
      _this._loading.next('Loading space list for location...');
      var use_region = _this._settings.get('app.use_region');
      if (!((_zone_ids = zone_ids) !== null && _zone_ids !== void 0 && _zone_ids.length)) {
        var _this$_org$region, _this$_org$building, _this$_org$building2;
        zone_ids = [(use_region ? (_this$_org$region = _this._org.region) === null || _this$_org$region === void 0 ? void 0 : _this$_org$region.id : (_this$_org$building = _this._org.building) === null || _this$_org$building === void 0 ? void 0 : _this$_org$building.id) || ((_this$_org$building2 = _this._org.building) === null || _this$_org$building2 === void 0 ? void 0 : _this$_org$building2.id)];
      }
      return (0, rxjs_1.forkJoin)(zone_ids.map(function (id) {
        return (0, space_utilities_1.requestSpacesForZone)(id).pipe((0, operators_1.catchError)(function () {
          return (0, rxjs_1.of)([]);
        }));
      }));
    }), (0, operators_1.map)(function (l) {
      return (0, common_1.flatten)(l);
    }), (0, operators_1.tap)(function (_) {
      return _this._loading.next('');
    }), (0, operators_1.shareReplay)(1));
    _this.features = _this.spaces.pipe((0, operators_1.map)(function (l) {
      return (0, common_1.unique)((0, common_1.flatten)(l.map(function (_) {
        return _.features;
      })));
    }));
    _this.filtered_spaces = (0, rxjs_1.combineLatest)([_this.spaces, _this.options]).pipe((0, operators_1.map)(function (_ref3) {
      var _ref4 = _slicedToArray(_ref3, 2),
        spaces = _ref4[0],
        _ref4$ = _ref4[1],
        show_fav = _ref4$.show_fav,
        features = _ref4$.features,
        capacity = _ref4$.capacity;
      return spaces.filter(function (s) {
        var _ref5;
        var domain = (((_ref5 = (0, common_1.currentUser)()) === null || _ref5 === void 0 ? void 0 : _ref5.email) || '@').split('@')[1];
        var zone = (_this._settings.get('app.events.restrict_spaces') || {})[domain];
        var limit_map = _this._settings.get('app.events.limit_spaces') || {};
        var limited_zones = Object.keys(limit_map);
        var zone_limit = s.zones.find(function (_) {
          return limited_zones.includes(_);
        });
        return s.bookable && (!zone || s.zones.includes(zone)) && (!zone_limit || limit_map[zone_limit] === domain) && (!show_fav || _this.favorite_spaces.includes(s.id)) && features.every(function (f) {
          return s.features.includes(f);
        }) && s.capacity >= Math.max(0, capacity || 0);
      }).slice(0, Math.min(100, spaces.length));
    }), (0, operators_1.shareReplay)(1));
    _this._space_bookings = (0, rxjs_1.combineLatest)([_this.spaces, _this.filtered_spaces]).pipe((0, operators_1.distinctUntilChanged)(function (_ref6, _ref7) {
      var _ref8 = _slicedToArray(_ref6, 1),
        s1 = _ref8[0];
      var _ref9 = _slicedToArray(_ref7, 1),
        s2 = _ref9[0];
      return s1 !== s2;
    }), (0, operators_1.switchMap)(function (_ref10) {
      var _ref11 = _slicedToArray(_ref10, 2),
        _ = _ref11[0],
        list = _ref11[1];
      return (0, rxjs_1.combineLatest)((list || []).map(function (_) {
        var binding = (0, ts_client_1.getModule)(_.id, 'Bookings').binding('bookings');
        var obs = binding.listen().pipe((0, operators_1.map)(function (_) {
          return (_ || []).map(function (i) {
            return new event_class_1.CalendarEvent(i);
          });
        }));
        if (!_this.hasSubscription("bind:".concat(_.id))) {
          _this.subscription("bind:".concat(_.id), binding.bind());
        }
        return obs;
      }));
    }), (0, operators_1.shareReplay)(1));
    _this.current_available_spaces = (0, rxjs_1.combineLatest)([_this.filtered_spaces, _this._space_bookings, _this.booking_rules, (0, rxjs_1.merge)(_this.form.valueChanges, (0, rxjs_1.timer)(1000)), _this._changed]).pipe((0, operators_1.debounceTime)(300), (0, operators_1.map)(function (_ref12) {
      var _this$_org$building3;
      var _ref13 = _slicedToArray(_ref12, 3),
        list = _ref13[0],
        bookings = _ref13[1],
        booking_rules = _ref13[2];
      _this._loading.next('Updating available spaces...');
      var _this$_form$getRawVal = _this._form.getRawValue(),
        ical_uid = _this$_form$getRawVal.ical_uid,
        date = _this$_form$getRawVal.date,
        duration = _this$_form$getRawVal.duration,
        all_day = _this$_form$getRawVal.all_day;
      list = (0, common_1.filterResourcesFromRules)(list, {
        date: date,
        duration: duration,
        resource: null,
        host: (0, common_1.currentUser)()
      }, booking_rules[(_this$_org$building3 = _this._org.building) === null || _this$_org$building3 === void 0 ? void 0 : _this$_org$building3.id] || []);
      return (list || []).filter(function (_, idx) {
        var _this$last_success;
        var start = all_day ? (0, date_fns_1.startOfDay)(date).valueOf() : date;
        var end = start + (all_day ? Math.max(24 * 60, duration) : duration) * MINUTES;
        var booking_list = bookings[idx] || [];
        if (((_this$last_success = _this.last_success) === null || _this$last_success === void 0 || (_this$last_success = _this$last_success.system) === null || _this$last_success === void 0 ? void 0 : _this$last_success.id) === _.id) {
          booking_list = [].concat(_toConsumableArray(booking_list), [_this.last_success]);
        }
        return (0, helpers_1.periodInFreeTimeSlot)(start, end, booking_list.filter(function (_) {
          return _.ical_uid !== ical_uid;
        }));
      }).sort(function (a, b) {
        return a.capacity - b.capacity;
      });
    }), (0, operators_1.tap)(function (_) {
      return _this._loading.next('');
    }), (0, operators_1.shareReplay)(1));
    _this.future_available_spaces = (0, rxjs_1.combineLatest)([_this.filtered_spaces, _this.booking_rules, _this.form.valueChanges.pipe((0, operators_1.debounceTime)(400), (0, operators_1.startWith)({}))]).pipe((0, operators_1.filter)(function () {
      return !_this._loading.getValue();
    }), (0, operators_1.debounceTime)(500), (0, operators_1.switchMap)(function (_ref14) {
      var _this$_org$building4, _this2, _this$event, _this$event2, _this$event3, _this$event4;
      var _ref15 = _slicedToArray(_ref14, 2),
        spaces = _ref15[0],
        booking_rules = _ref15[1];
      if (!spaces.length) return (0, rxjs_1.of)([]);
      _this._loading.next('Retrieving available spaces...');
      var _this$_form$getRawVal2 = _this._form.getRawValue(),
        date = _this$_form$getRawVal2.date,
        duration = _this$_form$getRawVal2.duration,
        all_day = _this$_form$getRawVal2.all_day;
      var availability_method = _this.has_calendar ? events_fn_1.querySpaceAvailability : bookings_fn_1.queryResourceAvailability;
      spaces = (0, common_1.filterResourcesFromRules)(spaces, {
        date: date,
        duration: duration,
        resource: null,
        host: (0, common_1.currentUser)()
      }, booking_rules[(_this$_org$building4 = _this._org.building) === null || _this$_org$building4 === void 0 ? void 0 : _this$_org$building4.id] || []);
      return availability_method(spaces.map(function (_ref16) {
        var id = _ref16.id;
        return id;
      }), all_day ? (0, date_fns_1.startOfDay)(date).valueOf() : date, all_day ? Math.max(24 * 60, duration) : duration, ((_this2 = _this) === null || _this2 === void 0 || (_this2 = _this2.event) === null || _this2 === void 0 || (_this2 = _this2.resources[0]) === null || _this2 === void 0 ? void 0 : _this2.id) || ((_this$event = _this.event) === null || _this$event === void 0 || (_this$event = _this$event.system) === null || _this$event === void 0 ? void 0 : _this$event.id) || ((_this$event2 = _this.event) === null || _this$event2 === void 0 ? void 0 : _this$event2.id) || undefined, undefined, [(_this$event3 = _this.event) === null || _this$event3 === void 0 ? void 0 : _this$event3.date, (_this$event4 = _this.event) === null || _this$event4 === void 0 ? void 0 : _this$event4.duration]).pipe((0, operators_1.map)(function (availability) {
        var _this$_org$building5;
        var list = spaces.filter(function (_, i) {
          return availability[i];
        });
        list = (0, common_1.filterResourcesFromRules)(list, {
          date: date,
          duration: duration,
          resource: null,
          host: (0, common_1.currentUser)()
        }, booking_rules[(_this$_org$building5 = _this._org.building) === null || _this$_org$building5 === void 0 ? void 0 : _this$_org$building5.id] || []);
        return list;
      }), (0, operators_1.catchError)(function (_) {
        return [];
      }));
    }), (0, operators_1.tap)(function (_) {
      return _this._loading.next('');
    }), (0, operators_1.shareReplay)(1));
    _this.available_spaces = _this._date.pipe((0, operators_1.switchMap)(function (d) {
      var diff = Math.abs((0, date_fns_1.differenceInDays)(d, Date.now()));
      var cache_length = _this._settings.get('app.events.cache_duration_in_days') || 14;
      return diff < cache_length ? _this.current_available_spaces : _this.future_available_spaces;
    }), (0, operators_1.shareReplay)(1));
    _this.cancelPostForm = function () {
      return _this.unsub('post-event-form');
    };
    _this._space_pipe = new space_pipe_1.SpacePipe(_this._org);
    _this.subscription('router.events', _this._router.events.subscribe(function (event) {
      if (event instanceof router_1.NavigationEnd && !BOOKING_URLS.some(function (_) {
        return event.url.includes(_);
      })) {
        _this.clearForm();
      }
    }));
    var previous = {};
    _this.subscription('form_change', _this._form.valueChanges.subscribe(function (_ref17) {
      var date = _ref17.date,
        duration = _ref17.duration,
        assets = _ref17.assets;
      if (date && date !== previous['date'] || duration && duration !== previous['duration']) {
        _this._assets.setOptions({
          date: _this.form.value.date,
          duration: _this.form.value.duration
        });
        previous['date'] = date;
        previous['duration'] = duration;
      }
      if (date && date !== _this._date.getValue()) {
        _this._date.next(date);
      }
      _this.storeForm();
    }));
    return _this;
  }
  _inherits(EventFormService, _common_1$AsyncHandle);
  return _createClass(EventFormService, [{
    key: "options_value",
    get: function get() {
      return this._options.getValue();
    }
  }, {
    key: "is_multiday",
    get: function get() {
      var _this$_event$getValue;
      return ((_this$_event$getValue = this._event.getValue()) === null || _this$_event$getValue === void 0 ? void 0 : _this$_event$getValue.duration) > 24 * 60;
    }
  }, {
    key: "view",
    get: function get() {
      return this._view.getValue();
    }
  }, {
    key: "form",
    get: function get() {
      return this._form;
    }
  }, {
    key: "event",
    get: function get() {
      return this._event.getValue();
    }
  }, {
    key: "favorite_spaces",
    get: function get() {
      return this._settings.get('favourite_spaces') || [];
    }
  }, {
    key: "has_calendar",
    get: function get() {
      return this._settings.get('app.events.use_bookings') !== true;
    }
  }, {
    key: "listenForStatusChanges",
    value: function listenForStatusChanges() {
      this.subscription('status:rooms', this.available_spaces.subscribe());
    }
  }, {
    key: "setView",
    value: function setView(value) {
      var _this3 = this;
      this.timeout('set_view', function () {
        return _this3._view.next(value);
      }, 50);
    }
  }, {
    key: "setOptions",
    value: function setOptions(value) {
      this._options.next(_objectSpread(_objectSpread({}, this._options.getValue()), value));
    }
  }, {
    key: "newForm",
    value: function () {
      var _newForm = _asyncToGenerator(function () {
        var _this4 = this;
        var event = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : new event_class_1.CalendarEvent({
          all_day: this._settings.get('app.events.all_day_default')
        });
        return /*#__PURE__*/_regeneratorRuntime().mark(function _callee(_event$linked_booking) {
          var master, idx, space;
          return _regeneratorRuntime().wrap(function _callee$(_context) {
            while (1) switch (_context.prev = _context.next) {
              case 0:
                _this4._event.next(event);
                if (!event.recurring_event_id) {
                  _context.next = 6;
                  break;
                }
                _context.next = 4;
                return (0, events_fn_1.showEvent)(event.recurring_event_id).toPromise()["catch"](function (_) {
                  return null;
                });
              case 4:
                master = _context.sent;
                if (master) {
                  _this4._event.getValue().recurrence = _objectSpread(_objectSpread({}, master.recurrence), {}, {
                    _pattern: master.recurrence.pattern
                  });
                }
              case 6:
                _this4._assets.setOptions({
                  ignore: (0, common_1.flatten)(((_event$linked_booking = event.linked_bookings) === null || _event$linked_booking === void 0 ? void 0 : _event$linked_booking.map(function (_) {
                    return _.asset_ids || [_.asset_id];
                  })) || [])
                });
                _context.t0 = _regeneratorRuntime().keys(event.resources);
              case 8:
                if ((_context.t1 = _context.t0()).done) {
                  _context.next = 16;
                  break;
                }
                idx = _context.t1.value;
                space = event.resources[idx];
                _context.next = 13;
                return _this4._space_pipe.transform(space.id || space.email);
              case 13:
                event.resources[idx] = _context.sent;
                _context.next = 8;
                break;
              case 16:
                _this4._date.next(event.date);
                _this4.timeout('post-event-form', function () {
                  _this4._form.patchValue({
                    date: event.date || _this4._form.value.date
                  });
                }, 1000);
                _this4.resetForm();
              case 19:
              case "end":
                return _context.stop();
            }
          }, _callee);
        })();
      });
      function newForm() {
        return _newForm.apply(this, arguments);
      }
      return newForm;
    }()
  }, {
    key: "resetForm",
    value: function resetForm() {
      var _event$linked_booking2, _event$extension_data;
      this._form.reset();
      var event = this._event.getValue() || {
        extension_data: {}
      };
      this._assets.setOptions({
        ignore: (0, common_1.flatten)(((_event$linked_booking2 = event.linked_bookings) === null || _event$linked_booking2 === void 0 ? void 0 : _event$linked_booking2.map(function (_) {
          return _.asset_ids || [_.asset_id];
        })) || [])
      });
      var has_catering = !!event.extension_data.catering[0];
      this._form.patchValue(_objectSpread(_objectSpread(_objectSpread({}, event.extension_data), event), {}, {
        duration: event.duration >= 12 * 60 ? 30 : event.duration,
        organiser: (event === null || event === void 0 ? void 0 : event.organiser) || (0, common_1.currentUser)() || new user_class_1.User({
          email: event === null || event === void 0 ? void 0 : event.host
        }),
        catering_charge_code: ((_event$extension_data = event.extension_data.catering[0]) === null || _event$extension_data === void 0 ? void 0 : _event$extension_data.charge_code) || (event.id && has_catering ? ' ' : ''),
        assets: (event.extension_data.assets || []).map(function (_) {
          return new asset_request_class_1.AssetRequest(_objectSpread(_objectSpread({}, _), {}, {
            event: event
          }));
        })
      }));
      this._form.patchValue({
        date: event.date || this._form.value.date,
        date_end: event.date_end || this._form.value.date_end
      });
      this._options.next({
        features: []
      });
      this.storeForm();
    }
  }, {
    key: "clearForm",
    value: function clearForm() {
      sessionStorage.removeItem('PLACEOS.event_form');
      this.unsubWith('status:');
      this.unsubWith('bind:');
      this.newForm();
    }
  }, {
    key: "storeForm",
    value: function storeForm() {
      sessionStorage.setItem('PLACEOS.event_form', JSON.stringify(this._form.getRawValue() || {}));
    }
  }, {
    key: "loadForm",
    value: function loadForm() {
      var _this$_event$getValue2,
        _this5 = this;
      if (!sessionStorage.getItem('PLACEOS.event_form')) {
        return this.newForm();
      }
      var form_data = JSON.parse(sessionStorage.getItem('PLACEOS.event_form') || '{}');
      if (form_data.id && form_data.id !== ((_this$_event$getValue2 = this._event.getValue()) === null || _this$_event$getValue2 === void 0 ? void 0 : _this$_event$getValue2.id)) {
        (0, events_fn_1.showEvent)(form_data.id).subscribe(function (event) {
          var _event$linked_booking3;
          _this5._event.next(event);
          _this5._assets.setOptions({
            ignore: (0, common_1.flatten)(((_event$linked_booking3 = event.linked_bookings) === null || _event$linked_booking3 === void 0 ? void 0 : _event$linked_booking3.map(function (_) {
              return _.asset_ids || [_.asset_id];
            })) || [])
          });
        });
      }
      this._form.patchValue(_objectSpread({}, form_data));
    }
  }, {
    key: "openEventLinkModal",
    value: function openEventLinkModal() {
      var _this6 = this;
      var force = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;
      var form = this._form;
      form.markAllAsTouched();
      if (!form.valid && !force) return;
      var event = new event_class_1.CalendarEvent(_objectSpread(_objectSpread({}, form.getRawValue()), {}, {
        assets: []
      }));
      var ref = this._dialog.open(event_link_modal_component_1.EventLinkModalComponent, {
        data: event
      });
      ref.afterClosed().subscribe(function (d) {
        return d ? _this6._router.navigate(['/']) : '';
      });
    }
  }, {
    key: "postForm",
    value: function postForm() {
      var _this7 = this;
      var force = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;
      var ignore_space_check = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];
      var ignore_owner = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;
      return new Promise( /*#__PURE__*/function () {
        var _ref18 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3(resolve, reject) {
          var _this7$event, _form$get, _form$get2, _form$get3, _ref19, _ref20, _spaces$, _this7$event2, _this7$event3, _this7$event4, _value$organiser, _ref21, _value$organiser2, _ref22, _ref23, _event$extension_data2, _result$extension_dat, _result$extension_dat2;
          var form, event, ical_uid, value, _value, id, host, date, duration, creator, all_day, assets, recurrence, spaces, catering, changed_times, changed_spaces, is_owner, space, attendees, message, space_id, query, receipt, d, _iterator2, _step2, order, setup, breakdown, _iterator3, _step3, _space, overflow, processed_assets, result, domain, visitors, creating_assets, on_error, _spaces$2, _spaces$3, _spaces$4, _this7$_org$region, _this7$_org$building, _spaces$5, requests;
          return _regeneratorRuntime().wrap(function _callee3$(_context3) {
            while (1) switch (_context3.prev = _context3.next) {
              case 0:
                _this7._loading.next('Creating event...');
                form = _this7._form;
                form.markAllAsTouched();
                event = _this7.event || new event_class_1.CalendarEvent();
                if (!(!form.valid && !force)) {
                  _context3.next = 7;
                  break;
                }
                _this7._loading.next('');
                return _context3.abrupt("return", reject("Some form fields are invalid. [".concat((0, common_1.getInvalidFields)(form).join(', '), "]")));
              case 7:
                ical_uid = (_this7$event = _this7.event) === null || _this7$event === void 0 ? void 0 : _this7$event.ical_uid;
                value = _this7._form.getRawValue();
                _value = value, id = _value.id, host = _value.host, date = _value.date, duration = _value.duration, creator = _value.creator, all_day = _value.all_day, assets = _value.assets, recurrence = _value.recurrence;
                spaces = ((_form$get = form.get('resources')) === null || _form$get === void 0 ? void 0 : _form$get.value) || [];
                if (ignore_space_check.length) {
                  spaces = spaces.filter(function (_) {
                    return !ignore_space_check.includes(_.email) && !ignore_space_check.includes(_.id);
                  });
                }
                catering = ((_form$get2 = form.get('catering')) === null || _form$get2 === void 0 ? void 0 : _form$get2.value) || [];
                if (recurrence !== null && recurrence !== void 0 && recurrence._pattern && (recurrence === null || recurrence === void 0 ? void 0 : recurrence._pattern) !== 'none') {
                  _this7.form.patchValue({
                    recurring: true
                  });
                  value = _this7._form.getRawValue();
                }
                changed_times = false;
                changed_spaces = spaces.some(function (s) {
                  var _event$resources;
                  return !((_event$resources = event.resources) !== null && _event$resources !== void 0 && _event$resources.find(function (_) {
                    return _.id === s.id;
                  }));
                });
                if (!((!id || date !== event.date || duration !== event.duration) && spaces.length)) {
                  _context3.next = 20;
                  break;
                }
                changed_times = true;
                _context3.next = 20;
                return _this7.checkSelectedSpacesAreAvailable(spaces, all_day ? (0, date_fns_1.startOfDay)(date).valueOf() : date, all_day ? Math.max(24 * 60, duration) : duration, ical_uid || id || '')["catch"](function (_) {
                  _this7._loading.next('');
                  reject(_);
                  throw _;
                });
              case 20:
                spaces = ((_form$get3 = form.get('resources')) === null || _form$get3 === void 0 ? void 0 : _form$get3.value) || [];
                is_owner = host === ((_ref19 = (0, common_1.currentUser)()) === null || _ref19 === void 0 ? void 0 : _ref19.email) || creator === ((_ref20 = (0, common_1.currentUser)()) === null || _ref20 === void 0 ? void 0 : _ref20.email);
                if (!(!spaces.length && _this7._settings.get('app.events.no_space_resource'))) {
                  _context3.next = 27;
                  break;
                }
                _context3.next = 25;
                return _this7._space_pipe.transform(_this7._settings.get('app.events.no_space_resource'));
              case 25:
                space = _context3.sent;
                spaces.push(space);
              case 27:
                attendees = (0, common_1.unique)([].concat(_toConsumableArray(value.attendees), [value.organiser || (0, common_1.currentUser)()]), 'email');
                if (!(!spaces.length && attendees.find(function (_) {
                  return _.is_external;
                }))) {
                  _context3.next = 33;
                  break;
                }
                _this7._loading.next('');
                message = 'External attendees require a space to be booked';
                reject(message);
                throw message;
              case 33:
                space_id = (_spaces$ = spaces[0]) === null || _spaces$ === void 0 ? void 0 : _spaces$.id;
                query = id ? {
                  system_id: ((_this7$event2 = _this7.event) === null || _this7$event2 === void 0 || (_this7$event2 = _this7$event2.resources[0]) === null || _this7$event2 === void 0 ? void 0 : _this7$event2.id) || ((_this7$event3 = _this7.event) === null || _this7$event3 === void 0 || (_this7$event3 = _this7$event3.system) === null || _this7$event3 === void 0 ? void 0 : _this7$event3.id) || space_id
                } : {};
                if (is_owner && !ignore_owner) query.calendar = host || creator;
                if (!(_this7._payments.payment_module && spaces.length)) {
                  _context3.next = 43;
                  break;
                }
                _context3.next = 39;
                return _this7._payments.makePayment({
                  type: 'space',
                  resource_name: spaces[0].display_name || spaces[0].name,
                  date: date,
                  duration: duration,
                  all_day: all_day
                });
              case 39:
                receipt = _context3.sent;
                if (receipt !== null && receipt !== void 0 && receipt.success) {
                  _context3.next = 42;
                  break;
                }
                return _context3.abrupt("return", _this7._loading.next(''));
              case 42:
                value.extension_data = {
                  invoice: receipt,
                  invoice_id: receipt.invoice_id
                };
              case 43:
                d = value.date;
                _iterator2 = _createForOfIteratorHelper(catering);
                try {
                  for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
                    order = _step2.value;
                    order.notes = value.catering_notes;
                    order.charge_code = value.catering_charge_code;
                  }
                } catch (err) {
                  _iterator2.e(err);
                } finally {
                  _iterator2.f();
                }
                if (spaces.length) {
                  setup = 0, breakdown = 0;
                  _iterator3 = _createForOfIteratorHelper(spaces);
                  try {
                    for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {
                      _space = _step3.value;
                      overflow = _this7._settings.get("app.events.overflow.".concat(_space.id));
                      if (overflow !== null && overflow !== void 0 && overflow.setup) {
                        setup = Math.max(setup, overflow.setup);
                      }
                      if (overflow !== null && overflow !== void 0 && overflow.breakdown) {
                        breakdown = Math.max(breakdown, overflow.breakdown);
                      }
                    }
                  } catch (err) {
                    _iterator3.e(err);
                  } finally {
                    _iterator3.f();
                  }
                  value.setup = value.setup_time || setup;
                  value.breakdown = value.breakdown_time || breakdown;
                  value.setup_time = value.setup_time || setup;
                  value.breakdown_time = value.breakdown_time || breakdown;
                }
                processed_assets = (assets || []).map(function (_) {
                  return new asset_request_class_1.AssetRequest(_).toJSON();
                });
                _context3.next = 50;
                return _this7._makeBooking(new event_class_1.CalendarEvent(_objectSpread(_objectSpread({}, value), {}, {
                  old_system: (_this7$event4 = _this7.event) === null || _this7$event4 === void 0 ? void 0 : _this7$event4.system,
                  host: _this7._settings.get('app.events.force_host') || (_this7._settings.get('app.events.room_as_host') ? value.resources[0].email : '') || value.host,
                  title: value.title || 'Space Booking',
                  attendees: attendees.map(function (_) {
                    var v = _objectSpread({}, _);
                    delete v.visit_expected;
                    return v;
                  }),
                  date: d,
                  catering: catering,
                  assets: processed_assets,
                  extension_data: _this7._settings.get('app.events.force_host') || _this7._settings.get('app.events.room_as_host') ? {
                    host_override: value.host,
                    department: ((_value$organiser = value.organiser) === null || _value$organiser === void 0 ? void 0 : _value$organiser.department) || ((_ref21 = (0, common_1.currentUser)()) === null || _ref21 === void 0 ? void 0 : _ref21.department)
                  } : {
                    department: ((_value$organiser2 = value.organiser) === null || _value$organiser2 === void 0 ? void 0 : _value$organiser2.department) || ((_ref22 = (0, common_1.currentUser)()) === null || _ref22 === void 0 ? void 0 : _ref22.department)
                  }
                })), query)["catch"](function (e) {
                  reject(e);
                  _this7._loading.next('');
                  throw e;
                });
              case 50:
                result = _context3.sent;
                domain = (((_ref23 = (0, common_1.currentUser)()) === null || _ref23 === void 0 ? void 0 : _ref23.email) || '@').split('@')[1];
                visitors = attendees.filter(function (user) {
                  return user.is_external && user.email !== event.host && !user.email.includes(domain) && user.visit_expected;
                });
                creating_assets = false;
                on_error = /*#__PURE__*/function () {
                  var _ref24 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(e) {
                    var _ref25;
                    return _regeneratorRuntime().wrap(function _callee2$(_context2) {
                      while (1) switch (_context2.prev = _context2.next) {
                        case 0:
                          if (_this7.form.value.id) {
                            _context2.next = 7;
                            break;
                          }
                          _context2.next = 3;
                          return (0, events_fn_2.removeEvent)(result.id, spaces.length ? {
                            calendar: _this7.form.value.host || ((_ref25 = (0, common_1.currentUser)()) === null || _ref25 === void 0 ? void 0 : _ref25.email),
                            system_id: spaces[0].id
                          } : {}).toPromise();
                        case 3:
                          console.warn("Couldn't update asset requests", e);
                          if ((e === null || e === void 0 ? void 0 : e.status) === 409) {
                            (0, common_1.notifyError)('Some assets are already booked for the selected time');
                          } else (0, common_1.notifyError)('Unable to book the selected assets.');
                          _context2.next = 10;
                          break;
                        case 7:
                          if (!creating_assets) {
                            _context2.next = 10;
                            break;
                          }
                          (0, common_1.notifyError)("Unable to update all asset requests for event.\n".concat(e));
                          return _context2.abrupt("return");
                        case 10:
                          _this7._loading.next('');
                          throw e;
                        case 12:
                        case "end":
                          return _context2.stop();
                      }
                    }, _callee2);
                  }));
                  return function on_error(_x3) {
                    return _ref24.apply(this, arguments);
                  };
                }();
                if (!visitors.length) {
                  _context3.next = 58;
                  break;
                }
                _context3.next = 58;
                return (0, bookings_fn_1.createBookingsForEvent)(result, 'visitor', visitors)["catch"](on_error);
              case 58:
                if (!(assets !== null && assets !== void 0 && assets.length || (_event$extension_data2 = event.extension_data.assets) !== null && _event$extension_data2 !== void 0 && _event$extension_data2.length)) {
                  _context3.next = 68;
                  break;
                }
                creating_assets = true;
                _context3.next = 62;
                return (0, assets_fn_1.validateAssetRequestsForResource)(result, {
                  date: date,
                  duration: duration,
                  host: host,
                  all_day: all_day,
                  location_name: ((_spaces$2 = spaces[0]) === null || _spaces$2 === void 0 ? void 0 : _spaces$2.display_name) || ((_spaces$3 = spaces[0]) === null || _spaces$3 === void 0 ? void 0 : _spaces$3.name) || '',
                  location_id: ((_spaces$4 = spaces[0]) === null || _spaces$4 === void 0 ? void 0 : _spaces$4.id) || '',
                  zones: (0, common_1.unique)([_this7._org.organisation.id, (_this7$_org$region = _this7._org.region) === null || _this7$_org$region === void 0 ? void 0 : _this7$_org$region.id, (_this7$_org$building = _this7._org.building) === null || _this7$_org$building === void 0 ? void 0 : _this7$_org$building.id].concat(_toConsumableArray((_spaces$5 = spaces[0]) === null || _spaces$5 === void 0 ? void 0 : _spaces$5.zones))).filter(function (_) {
                    return !!_;
                  }),
                  reset_state: changed_times
                }, assets, changed_spaces || changed_times)["catch"](on_error);
              case 62:
                requests = _context3.sent;
                if (requests) {
                  _context3.next = 65;
                  break;
                }
                throw 'Unable to validate asset requests';
              case 65:
                _context3.next = 67;
                return requests();
              case 67:
                creating_assets = false;
              case 68:
                _this7.clearForm();
                _this7.last_success = result;
                sessionStorage.setItem('PLACEOS.last_booked_event', JSON.stringify(result));
                _this7.setView('success');
                _this7.timeout('post_finshed', function () {
                  return _this7._changed.next(Date.now());
                });
                resolve(result);
                _this7._saveEntity([(_result$extension_dat = result.extension_data) === null || _result$extension_dat === void 0 ? void 0 : _result$extension_dat.host_entity]);
                _this7._saveEntity([(_result$extension_dat2 = result.extension_data) === null || _result$extension_dat2 === void 0 ? void 0 : _result$extension_dat2.visitor_entity], 'visitor');
                _this7._loading.next('');
              case 77:
              case "end":
                return _context3.stop();
            }
          }, _callee3);
        }));
        return function (_x, _x2) {
          return _ref18.apply(this, arguments);
        };
      }());
    }
  }, {
    key: "_makeBooking",
    value: function () {
      var _makeBooking2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4(event, query) {
        return _regeneratorRuntime().wrap(function _callee4$(_context4) {
          while (1) switch (_context4.prev = _context4.next) {
            case 0:
              this._updateVisitorList(event.attendees);
              return _context4.abrupt("return", (!this.has_calendar ? (0, bookings_fn_1.saveBooking)((0, booking_utilities_1.newBookingFromCalendarEvent)(_objectSpread(_objectSpread({}, event.toJSON()), {}, {
                status: this._settings.get('app.bookings.no_approval') ? 'approved' : 'tentative'
              }))).pipe((0, operators_1.map)(function (_) {
                return (0, utilities_1.newCalendarEventFromBooking)(_);
              })) : (0, events_fn_1.saveEvent)(event, query)).toPromise());
            case 2:
            case "end":
              return _context4.stop();
          }
        }, _callee4, this);
      }));
      function _makeBooking(_x4, _x5) {
        return _makeBooking2.apply(this, arguments);
      }
      return _makeBooking;
    }()
  }, {
    key: "checkSelectedSpacesAreAvailable",
    value: function () {
      var _checkSelectedSpacesAreAvailable = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee5(spaces, date, duration, ignore) {
        var _this$event5, _this$event6, _this$event7, _this$event8, _this$event9, response, availability;
        return _regeneratorRuntime().wrap(function _callee5$(_context5) {
          while (1) switch (_context5.prev = _context5.next) {
            case 0:
              if (spaces !== null && spaces !== void 0 && spaces.length) {
                _context5.next = 2;
                break;
              }
              return _context5.abrupt("return", true);
            case 2:
              if (!this.has_calendar) {
                _context5.next = 10;
                break;
              }
              _context5.next = 5;
              return (0, events_fn_1.querySpaceAvailability)(spaces.map(function (_ref26) {
                var id = _ref26.id;
                return id;
              }), date, duration, (this === null || this === void 0 || (_this$event5 = this.event) === null || _this$event5 === void 0 || (_this$event5 = _this$event5.resources[0]) === null || _this$event5 === void 0 ? void 0 : _this$event5.id) || ((_this$event6 = this.event) === null || _this$event6 === void 0 || (_this$event6 = _this$event6.system) === null || _this$event6 === void 0 ? void 0 : _this$event6.id) || ((_this$event7 = this.event) === null || _this$event7 === void 0 ? void 0 : _this$event7.id) || undefined, undefined, [(_this$event8 = this.event) === null || _this$event8 === void 0 ? void 0 : _this$event8.date, (_this$event9 = this.event) === null || _this$event9 === void 0 ? void 0 : _this$event9.duration]).toPromise();
            case 5:
              response = _context5.sent;
              if (response.every(function (_) {
                return _;
              })) {
                _context5.next = 8;
                break;
              }
              throw "".concat(spaces.length > 1 ? 'The selected space' : 'Some of the selected spaces', " is not available at the selected time");
            case 8:
              _context5.next = 15;
              break;
            case 10:
              _context5.next = 12;
              return (0, bookings_fn_1.queryResourceAvailability)(spaces.map(function (_) {
                return _.id;
              }), date, duration, ignore).toPromise();
            case 12:
              availability = _context5.sent;
              if (availability.every(function (_) {
                return _;
              })) {
                _context5.next = 15;
                break;
              }
              throw "".concat(spaces.length > 1 ? 'The selected space' : 'Some of the selected spaces', " are not available at the selected time");
            case 15:
              return _context5.abrupt("return", true);
            case 16:
            case "end":
              return _context5.stop();
          }
        }, _callee5, this);
      }));
      function checkSelectedSpacesAreAvailable(_x6, _x7, _x8, _x9) {
        return _checkSelectedSpacesAreAvailable.apply(this, arguments);
      }
      return checkSelectedSpacesAreAvailable;
    }()
  }, {
    key: "_updateVisitorList",
    value: function _updateVisitorList(attendees) {
      var visitors = attendees.filter(function (user) {
        return user.is_external;
      });
      if (!(visitors !== null && visitors !== void 0 && visitors.length)) return;
      var old_visitors = this._settings.get('visitor-invitees') || [];
      this._settings.saveUserSetting('visitor-invitees', (0, common_1.unique)([].concat(_toConsumableArray(old_visitors.filter(function (_) {
        return !_.includes(_.email);
      })), _toConsumableArray(visitors.map(function (_) {
        return "".concat(_.email, "|").concat(_.name, "|").concat(_.organisation);
      })))));
    }
  }, {
    key: "_saveEntity",
    value: function () {
      var _saveEntity2 = _asyncToGenerator(function (entities) {
        var _this8 = this;
        var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'host';
        return /*#__PURE__*/_regeneratorRuntime().mark(function _callee6(_entities) {
          var metadata, entity_list, new_list;
          return _regeneratorRuntime().wrap(function _callee6$(_context6) {
            while (1) switch (_context6.prev = _context6.next) {
              case 0:
                entities = entities.filter(function (_) {
                  return !!_;
                });
                if ((_entities = entities) !== null && _entities !== void 0 && _entities.length) {
                  _context6.next = 3;
                  break;
                }
                return _context6.abrupt("return");
              case 3:
                _context6.next = 5;
                return (0, ts_client_1.showMetadata)(_this8._org.organisation.id, "".concat(type, "_entities")).toPromise();
              case 5:
                metadata = _context6.sent;
                entity_list = metadata.details instanceof Array ? metadata.details : [];
                new_list = (0, common_1.unique)([].concat(_toConsumableArray(entity_list), _toConsumableArray(entities)));
                _context6.next = 10;
                return (0, ts_client_1.updateMetadata)(_this8._org.organisation.id, {
                  name: "".concat(type, "_entities"),
                  details: new_list,
                  description: "List of ".concat(type, " entities")
                }).toPromise();
              case 10:
              case "end":
                return _context6.stop();
            }
          }, _callee6);
        })();
      });
      function _saveEntity(_x10) {
        return _saveEntity2.apply(this, arguments);
      }
      return _saveEntity;
    }()
  }]);
}(common_1.AsyncHandler);
_EventFormService = EventFormService;
_EventFormService.ɵfac = function EventFormService_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _EventFormService)(i0.ɵɵinject(i1.OrganisationService), i0.ɵɵinject(i2.Router), i0.ɵɵinject(i3.PaymentsService), i0.ɵɵinject(i4.SettingsService), i0.ɵɵinject(i5.AssetStateService), i0.ɵɵinject(i6.MatDialog));
};
_EventFormService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({
  token: _EventFormService,
  factory: _EventFormService.ɵfac,
  providedIn: 'root'
});
exports.EventFormService = EventFormService;

/***/ }),

/***/ 22671:
/*!***********************************************************!*\
  !*** ./libs/events/src/lib/event-link-modal.component.ts ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _taggedTemplateLiteral = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js */ 9959)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _EventLinkModalComponent, _templateObject, _templateObject2, _templateObject3, _templateObject4, _templateObject5;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.EventLinkModalComponent = void 0;
var dialog_1 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var calendar_links_1 = __webpack_require__(/*! libs/common/src/lib/calendar-links */ 44571);
var event_class_1 = __webpack_require__(/*! ./event.class */ 6727);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var i2 = __webpack_require__(/*! ../../../components/src/lib/icon.component */ 69434);
var i3 = __webpack_require__(/*! @angular/material/core */ 74646);
var i4 = __webpack_require__(/*! ../../../components/src/lib/safe.pipe */ 26781);
var i5 = __webpack_require__(/*! ../../../components/src/lib/sanitise.pipe */ 54616);
var i6 = __webpack_require__(/*! ./event.class */ 6727);
var EventLinkModalComponent = /*#__PURE__*/function () {
  function EventLinkModalComponent(_event, _dialog) {
    _classCallCheck(this, EventLinkModalComponent);
    this._event = _event;
    this._dialog = _dialog;
    this.outlook_link = (0, calendar_links_1.generateMicrosoftCalendarLink)(this._event);
    this.google_link = (0, calendar_links_1.generateGoogleCalendarLink)(this._event);
    this.ical_link = (0, calendar_links_1.generateCalendarFileLink)(this._event);
    this.has_actioned = false;
  }
  return _createClass(EventLinkModalComponent, [{
    key: "close",
    value: function close() {
      if (!this.has_actioned) {
        return (0, common_1.notifyError)('You need to select a calendar option to finish creating this booking');
      }
      this._dialog.close(true);
    }
  }]);
}();
_EventLinkModalComponent = EventLinkModalComponent;
_EventLinkModalComponent.ɵfac = function EventLinkModalComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _EventLinkModalComponent)(i0.ɵɵdirectiveInject(dialog_1.MAT_DIALOG_DATA), i0.ɵɵdirectiveInject(i1.MatDialogRef));
};
_EventLinkModalComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _EventLinkModalComponent,
  selectors: [["event-link-modal"]],
  decls: 24,
  vars: 13,
  consts: function consts() {
    var i18n_0;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_5139383754155835256$$LIBS_EVENTS_SRC_LIB_EVENT_LINK_MODAL_COMPONENT_TS_0 = goog.getMsg("Add event to your calendar");
      i18n_0 = MSG_EXTERNAL_5139383754155835256$$LIBS_EVENTS_SRC_LIB_EVENT_LINK_MODAL_COMPONENT_TS_0;
    } else {
      i18n_0 = $localize(_templateObject || (_templateObject = _taggedTemplateLiteral([":\u241F29e3480e3d010232704522cde3ca29d23cc7725f\u241F5139383754155835256:Add event to your calendar"])));
    }
    var i18n_1;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_4015832758698516701$$LIBS_EVENTS_SRC_LIB_EVENT_LINK_MODAL_COMPONENT_TS_1 = goog.getMsg("Create in Outlook");
      i18n_1 = MSG_EXTERNAL_4015832758698516701$$LIBS_EVENTS_SRC_LIB_EVENT_LINK_MODAL_COMPONENT_TS_1;
    } else {
      i18n_1 = $localize(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([":\u241F34c16b14ad0e33db574c8bea543e66e766aa3a01\u241F4015832758698516701:Create in Outlook"])));
    }
    var i18n_2;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_3788591245559456526$$LIBS_EVENTS_SRC_LIB_EVENT_LINK_MODAL_COMPONENT_TS_2 = goog.getMsg("Create in Google Calendar");
      i18n_2 = MSG_EXTERNAL_3788591245559456526$$LIBS_EVENTS_SRC_LIB_EVENT_LINK_MODAL_COMPONENT_TS_2;
    } else {
      i18n_2 = $localize(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([":\u241Ff745484670e6b6bbb8a1c327c222e665fb25b863\u241F3788591245559456526:Create in Google Calendar"])));
    }
    var i18n_3;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_4894641609416495396$$LIBS_EVENTS_SRC_LIB_EVENT_LINK_MODAL_COMPONENT_TS_3 = goog.getMsg("Download iCal File");
      i18n_3 = MSG_EXTERNAL_4894641609416495396$$LIBS_EVENTS_SRC_LIB_EVENT_LINK_MODAL_COMPONENT_TS_3;
    } else {
      i18n_3 = $localize(_templateObject4 || (_templateObject4 = _taggedTemplateLiteral([":\u241F1af54061e7f4bcfb1048ffaa05c9b8f7c4b41679\u241F4894641609416495396:Download iCal File"])));
    }
    var i18n_4;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_6327967827692127661$$LIBS_EVENTS_SRC_LIB_EVENT_LINK_MODAL_COMPONENT_TS_4 = goog.getMsg(" Close ");
      i18n_4 = MSG_EXTERNAL_6327967827692127661$$LIBS_EVENTS_SRC_LIB_EVENT_LINK_MODAL_COMPONENT_TS_4;
    } else {
      i18n_4 = $localize(_templateObject5 || (_templateObject5 = _taggedTemplateLiteral([":\u241F4dc1e9a4bbd21cf153990984cd4ecb4444117098\u241F6327967827692127661: Close "])));
    }
    return [i18n_0, i18n_1, i18n_2, i18n_3, i18n_4, [1, "p-4", "w-full", "pb-2"], [1, "flex", "flex-col", "items-center", "space-y-4", "p-4", "relative"], ["btn", "", "matRipple", "", "target", "_blank", "rel", "noopener noreferer", 1, "flex", "items-center", "p-2", "space-x-2", "pr-4", "w-64", "rounded", "inverse", 3, "click", "href"], ["src", "assets/icons/outlook.svg", 1, "w-6"], ["src", "assets/icons/gcal.svg", 1, "w-6"], [1, "text-xl"], ["btn", "", "matRipple", "", 1, "w-64", 3, "click"], ["icon", "", "matRipple", "", 1, "absolute", "top-2", "right-0", 3, "mat-dialog-close"]];
  },
  template: function EventLinkModalComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵelementStart(0, "div", 5);
      i0.ɵɵi18n(1, 0);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(2, "div", 6)(3, "a", 7);
      i0.ɵɵpipe(4, "sanitize");
      i0.ɵɵlistener("click", function EventLinkModalComponent_Template_a_click_3_listener() {
        return ctx.has_actioned = true;
      });
      i0.ɵɵelement(5, "img", 8);
      i0.ɵɵelementStart(6, "span");
      i0.ɵɵi18n(7, 1);
      i0.ɵɵelementEnd()();
      i0.ɵɵelementStart(8, "a", 7);
      i0.ɵɵpipe(9, "sanitize");
      i0.ɵɵlistener("click", function EventLinkModalComponent_Template_a_click_8_listener() {
        return ctx.has_actioned = true;
      });
      i0.ɵɵelement(10, "img", 9);
      i0.ɵɵelementStart(11, "span");
      i0.ɵɵi18n(12, 2);
      i0.ɵɵelementEnd()();
      i0.ɵɵelementStart(13, "a", 7);
      i0.ɵɵpipe(14, "safe");
      i0.ɵɵlistener("click", function EventLinkModalComponent_Template_a_click_13_listener() {
        return ctx.has_actioned = true;
      });
      i0.ɵɵelementStart(15, "app-icon", 10);
      i0.ɵɵtext(16, "download");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(17, "span");
      i0.ɵɵi18n(18, 3);
      i0.ɵɵelementEnd()();
      i0.ɵɵelementStart(19, "button", 11);
      i0.ɵɵlistener("click", function EventLinkModalComponent_Template_button_click_19_listener() {
        return ctx.close();
      });
      i0.ɵɵi18n(20, 4);
      i0.ɵɵelementEnd()();
      i0.ɵɵelementStart(21, "button", 12)(22, "app-icon");
      i0.ɵɵtext(23, "close");
      i0.ɵɵelementEnd()();
    }
    if (rf & 2) {
      i0.ɵɵadvance(3);
      i0.ɵɵproperty("href", i0.ɵɵpipeBind2(4, 4, ctx.outlook_link, "url"), i0.ɵɵsanitizeUrl);
      i0.ɵɵadvance(5);
      i0.ɵɵproperty("href", i0.ɵɵpipeBind2(9, 7, ctx.google_link, "url"), i0.ɵɵsanitizeUrl);
      i0.ɵɵadvance(5);
      i0.ɵɵproperty("href", i0.ɵɵpipeBind2(14, 10, ctx.ical_link, "url"), i0.ɵɵsanitizeUrl);
      i0.ɵɵadvance(8);
      i0.ɵɵproperty("mat-dialog-close", ctx.has_actioned);
    }
  },
  dependencies: [i1.MatDialogClose, i2.IconComponent, i3.MatRipple, i4.SafePipe, i5.SanitizePipe],
  styles: ["[_nghost-%COMP%] {\n                position: relative;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImV2ZW50LWxpbmstbW9kYWwuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxrQkFBa0I7WUFDdEIiLCJmaWxlIjoiZXZlbnQtbGluay1tb2RhbC5jb21wb25lbnQudHMiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIDpob3N0IHtcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICAgICAgICB9XG4gICAgICAgICJdfQ== */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvZXZlbnRzL3NyYy9saWIvZXZlbnQtbGluay1tb2RhbC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLGtCQUFrQjtZQUN0Qjs7QUFFWixvWUFBb1kiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIDpob3N0IHtcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICAgICAgICB9XG4gICAgICAgICJdLCJzb3VyY2VSb290IjoiIn0= */"]
});
exports.EventLinkModalComponent = EventLinkModalComponent;

/***/ }),

/***/ 6727:
/*!********************************************!*\
  !*** ./libs/events/src/lib/event.class.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _toConsumableArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/toConsumableArray.js */ 86033)["default"]);
var _objectSpread = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/objectSpread2.js */ 34092)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.CalendarEvent = void 0;
exports.setDefaultCreator = setDefaultCreator;
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var date_fns_1 = __webpack_require__(/*! date-fns */ 25773);
var catering_order_class_1 = __webpack_require__(/*! libs/catering/src/lib/catering-order.class */ 75555);
var space_class_1 = __webpack_require__(/*! libs/spaces/src/lib/space.class */ 30735);
var user_class_1 = __webpack_require__(/*! libs/users/src/lib/user.class */ 93693);
var helpers_1 = __webpack_require__(/*! ./helpers */ 37420);
var asset_request_class_1 = __webpack_require__(/*! libs/assets/src/lib/asset-request.class */ 33747);
var _default_user = {
  id: 'default',
  name: 'Default User'
};
function setDefaultCreator(user) {
  if (user) _default_user = user;
}
var DAYS_OF_WEEK = ['sunday', 'monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday'];
/** User's calendar event/booking */
var CalendarEvent = /*#__PURE__*/function () {
  function CalendarEvent() {
    var _ref,
      _this = this,
      _data$from_bookings,
      _data$update_master,
      _this$space,
      _this$space2;
    var data = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    _classCallCheck(this, CalendarEvent);
    this._valid_asset_cache = [];
    this._valid_cache_expiry = 0;
    this.id = data.event_id || data.id || '';
    this.event_start = data.event_start || (0, date_fns_1.getUnixTime)(data.date || (0, date_fns_1.roundToNearestMinutes)((0, date_fns_1.addMinutes)(new Date(), 3), {
      nearestTo: 5
    }));
    this.event_end = data.event_end || (0, date_fns_1.getUnixTime)((0, date_fns_1.addMinutes)(this.event_start * 1000, data.duration || 30));
    this.calendar = data.calendar || '';
    this.creator = ((_ref = data.creator || _default_user.email) === null || _ref === void 0 ? void 0 : _ref.toLowerCase()) || '';
    this.host = (data.host || this.creator || data.host_email || _default_user.email || '').toLowerCase();
    var attendees = data.attendees || [];
    this.attendees = attendees.filter(function (user) {
      return !user.resource;
    }).map(function (u) {
      return new user_class_1.User(u);
    });
    this.resources = (0, common_1.unique)(data.resources || attendees.filter(function (user) {
      return user.resource;
    }).map(function (s) {
      return new space_class_1.Space(s);
    }), 'email') || [];
    this.title = data.title;
    this.body = data.body || '';
    this["private"] = !!data["private"];
    this.all_day = !!data.all_day;
    this.date = this.event_start * 1000 || this.date;
    this.date_end = this.event_end * 1000 || this.date_end;
    this.duration = (0, date_fns_1.differenceInMinutes)(this.date_end, this.date);
    if (this.all_day) {
      this.date = (0, date_fns_1.startOfDay)(this.date).getTime();
      this.duration = Math.max(24 * 60 - 1, this.duration - 1);
      this.date_end = (0, date_fns_1.endOfDay)((0, date_fns_1.addMinutes)(this.date, this.duration).valueOf() - 1).getTime();
    }
    var matches = this.body.match(/\[ID\|([^\]]+)\]/);
    var associated_id = matches ? matches[1] : null;
    this.timezone = data.timezone || Intl.DateTimeFormat().resolvedOptions().timeZone;
    this.meeting_url = data.meeting_url || data.online_meeting_url || '';
    this.meeting_id = associated_id || data.meeting_id || data.online_meeting_id || '';
    this.meeting_provider = data.meeting_provider || data.online_meeting_provider || '';
    this.recurring = !!data.recurring;
    this.recurring_event_id = data.recurring_event_id || '';
    this.organiser = this.attendees.find(function (user) {
      return user.email === _this.host;
    });
    this.from_bookings = (_data$from_bookings = data.from_bookings) !== null && _data$from_bookings !== void 0 ? _data$from_bookings : false;
    this.master = data.master ? new CalendarEvent(data.master) : null;
    this.mailbox = data.mailbox || '';
    this.ical_uid = data.ical_uid;
    this.linked_bookings = data.linked_bookings || [];
    this.update_master = (_data$update_master = data.update_master) !== null && _data$update_master !== void 0 ? _data$update_master : false;
    if (data.recurring) {
      var _data$recurrence$days;
      this.recurrence = {
        start: this.event_start * 1000 || new Date(data.recurrence.range_start * 1000).valueOf(),
        end: data.recurrence.end || new Date(data.recurrence.range_end * 1000).valueOf(),
        interval: data.recurrence.interval,
        pattern: data.recurrence.pattern,
        occurrences: data.recurrence.occurrences,
        days_of_week: ((_data$recurrence$days = data.recurrence.days_of_week) === null || _data$recurrence$days === void 0 ? void 0 : _data$recurrence$days.map(function (_) {
          return typeof _ === 'number' ? _ : DAYS_OF_WEEK.indexOf(_);
        })) || []
      };
    } else {
      this.recurrence = {};
    }
    var system = data.system;
    if (system !== null && system !== void 0 && system.email && !this.resources.find(function (_) {
      return _.email === system.email;
    })) {
      this.resources.push(new space_class_1.Space(system));
    }
    this.system = system || this.resources[0] || null;
    if (!system && data.system_id) {
      this.system = {
        id: data.system_id
      };
    }
    this.old_system = data.old_system || data.system;
    this.is_system_event = this.body.includes('main_event_id');
    this.attachments = data.attachments || [];
    this.extension_data = data.extension_data || {};
    this.status = (0, helpers_1.eventStatus)(_objectSpread(_objectSpread({}, data), this)) || 'none';
    this.location = data.location || ((_this$space = this.space) === null || _this$space === void 0 ? void 0 : _this$space.display_name) || ((_this$space2 = this.space) === null || _this$space2 === void 0 ? void 0 : _this$space2.name) || '';
    this.setup_time = data.setup_time || 0;
    this.breakdown_time = data.breakdown_time || 0;
    this.type = this.status === 'declined' ? 'cancelled' : this.attendees.find(function (_) {
      return _.is_external;
    }) ? 'external' : 'internal';
    for (var key in data) {
      if (!(key in this)) {
        this.extension_data[key] = data[key] || this.extension_data[key];
      }
    }
    var simple_event = {
      date: this.date,
      duration: this.duration,
      date_end: this.date_end,
      all_day: this.all_day,
      space: this.space,
      organiser: this.organiser
    };
    this.extension_data.catering = (this.extension_data.catering || []).map(function (i) {
      return new catering_order_class_1.CateringOrder(_objectSpread(_objectSpread({}, i), {}, {
        event: simple_event
      }));
    });
    var linked_assets = this.linked_bookings.filter(function (_) {
      return _.booking_type === 'asset-request';
    }).map(function (_) {
      var _$extension_data;
      return (_$extension_data = _.extension_data) === null || _$extension_data === void 0 ? void 0 : _$extension_data.request;
    }).filter(function (_) {
      return !!_;
    });
    var asset_requests = (linked_assets.length ? linked_assets : this.extension_data.assets) || [];
    this.extension_data.images = this.extension_data.images || data.images || [];
    this.extension_data.assets = asset_requests.map(function (i) {
      return new asset_request_class_1.AssetRequest(_objectSpread(_objectSpread({}, i), {}, {
        event: simple_event
      }));
    });
  }
  /** List of external attendees associated with the event */
  return _createClass(CalendarEvent, [{
    key: "images",
    get: function get() {
      return this.extension_data.images || [];
    }
  }, {
    key: "is_all_day",
    get: function get() {
      return this.all_day || this.duration >= 12 * 60;
    }
  }, {
    key: "view_access",
    get: function get() {
      return this.extension_data.view_access || 'OPEN';
    }
    /** Get field from extension data */
  }, {
    key: "ext",
    value: function ext(key) {
      return this.extension_data[key];
    }
  }, {
    key: "guests",
    get: function get() {
      return this.attendees.filter(function (f) {
        return !!f.is_external;
      });
    }
    /** Primary space associated with the booking */
  }, {
    key: "space",
    get: function get() {
      return this.resources[0] || null;
    }
  }, {
    key: "is_today",
    get: function get() {
      return (0, date_fns_1.isSameDay)(this.date, Date.now());
    }
  }, {
    key: "valid_catering",
    get: function get() {
      var _this2 = this;
      return (this.ext('catering') || []).filter(function (order) {
        return order.deliver_at < _this2.date_end;
      });
    }
  }, {
    key: "valid_assets",
    get: function get() {
      var _this3 = this;
      if (this._valid_cache_expiry > Date.now() && this._valid_asset_cache.length) {
        return this._valid_asset_cache;
      }
      var list = this.linked_bookings;
      this._valid_asset_cache = (this.ext('assets') || []).map(function (request) {
        return new asset_request_class_1.AssetRequest(_objectSpread(_objectSpread({}, request), {}, {
          event: _this3
        }));
      }).filter(function (request) {
        return request.deliver_at < _this3.date_end;
      }).map(function (request) {
        var booking = list.find(function (_) {
          return _.extension_data.request_id === request.id;
        });
        if (booking) {
          request.state = booking.approved ? 'approved' : booking.rejected ? 'rejected' : 'pending';
        }
        return request;
      });
      this._valid_cache_expiry = (0, date_fns_1.addMinutes)(Date.now(), 5).valueOf();
      return this._valid_asset_cache;
    }
    /**
     * Convert class data to simple JSON object
     */
  }, {
    key: "toJSON",
    value: function toJSON() {
      var _this$recurrence, _this$system;
      var obj = _objectSpread({}, this);
      var date = this.all_day ? (0, date_fns_1.startOfDay)(this.date) : this.date;
      var end = this.all_day ? (0, date_fns_1.endOfDay)(this.date_end).valueOf() + 1 : this.date_end;
      obj.event_start = (0, date_fns_1.getUnixTime)(date);
      obj.event_end = (0, date_fns_1.getUnixTime)(end);
      var attendees = this.attendees;
      this.recurring = ((_this$recurrence = this.recurrence) === null || _this$recurrence === void 0 ? void 0 : _this$recurrence.pattern) && this.recurrence._pattern !== 'none';
      if (this.recurring) {
        obj.recurrence = (0, helpers_1.parseRecurrence)(_objectSpread(_objectSpread({}, this.recurrence), {}, {
          start: this.date
        }));
        delete obj.recurrence.start;
        delete obj.recurrence.end;
      }
      obj.recurrence = obj.recurrence ? Object.keys(obj.recurrence).length ? obj.recurrence : null : null;
      obj.attendees = (0, common_1.unique)([].concat(_toConsumableArray(attendees), _toConsumableArray(this.resources.map(function (_) {
        return _objectSpread(_objectSpread({}, _), {}, {
          resource: true
        });
      }))), 'email');
      if (this.all_day) {
        obj.setup_time = 0;
        obj.breakdown_time = 0;
        obj.extension_data.all_day_date = (0, date_fns_1.format)(date, 'yyyy-MM-dd');
      }
      obj.extension_data.catering = obj.extension_data.catering.map(function (i) {
        return new catering_order_class_1.CateringOrder(_objectSpread(_objectSpread({}, i), {}, {
          event: null
        }));
      });
      obj.extension_data.assets = obj.extension_data.assets.map(function (i) {
        return new asset_request_class_1.AssetRequest(_objectSpread(_objectSpread({}, i), {}, {
          event: null
        }));
      });
      obj.system_id = (_this$system = this.system) === null || _this$system === void 0 ? void 0 : _this$system.id;
      for (var _i = 0, _arr = ['catering', 'date', 'date_end', 'duration', 'status', 'linked_bookings', '_valid_asset_cache', '_valid_cache_expiry', 'type']; _i < _arr.length; _i++) {
        var key = _arr[_i];
        if (key in obj) delete obj[key];
      }
      if (!obj.update_master) delete obj.recurring_event_id;
      (0, common_1.removeEmptyFields)(obj);
      return obj;
    }
    /** Status of the booking */
  }, {
    key: "state",
    get: function get() {
      var now = new Date();
      var date = this.date;
      if ((0, date_fns_1.isBefore)(now, (0, date_fns_1.add)(date, {
        minutes: -15
      }))) return 'future';
      if ((0, date_fns_1.isBefore)(now, date)) return 'upcoming';
      if ((0, date_fns_1.isBefore)(now, (0, date_fns_1.add)(date, {
        minutes: 15
      }))) return 'started';
      if ((0, date_fns_1.isBefore)(now, (0, date_fns_1.add)(date, {
        minutes: this.duration
      }))) return 'in_progress';
      return 'done';
    }
  }, {
    key: "can_check_in",
    get: function get() {
      var now = new Date();
      return this.is_today || (0, date_fns_1.isAfter)(now, (0, date_fns_1.addMinutes)(this.date, -5)) && (0, date_fns_1.isBefore)(now, (0, date_fns_1.addMinutes)(this.date, this.duration));
    }
  }]);
}();
exports.CalendarEvent = CalendarEvent;

/***/ }),

/***/ 59451:
/*!*************************************************!*\
  !*** ./libs/events/src/lib/event.interfaces.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, exports) => {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));

/***/ }),

/***/ 51416:
/*!******************************************!*\
  !*** ./libs/events/src/lib/events.fn.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _createForOfIteratorHelper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createForOfIteratorHelper.js */ 36350)["default"]);
var _slicedToArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/slicedToArray.js */ 6282)["default"]);
var _objectSpread = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/objectSpread2.js */ 34092)["default"]);
var _regeneratorRuntime = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/regeneratorRuntime.js */ 8698)["default"]);
var _toConsumableArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/toConsumableArray.js */ 86033)["default"]);
var _asyncToGenerator = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/asyncToGenerator.js */ 95386)["default"]);
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.saveEvent = void 0;
exports.queryEvents = queryEvents;
exports.queryAllEvents = queryAllEvents;
exports.showEvent = showEvent;
exports.createEvent = createEvent;
exports.updateEvent = updateEvent;
exports.removeEvent = removeEvent;
exports.approveEvent = approveEvent;
exports.rejectEvent = rejectEvent;
exports.declineEvent = declineEvent;
exports.queryEventGuests = queryEventGuests;
exports.checkinEventGuest = checkinEventGuest;
exports.addEventGuest = addEventGuest;
exports.removeEventGuest = removeEventGuest;
exports.getEventMetadata = getEventMetadata;
exports.updateEventMetadata = updateEventMetadata;
exports.isSpaceAvailable = isSpaceAvailable;
exports.querySpaceAvailability = querySpaceAvailability;
var ts_client_1 = __webpack_require__(/*! @placeos/ts-client */ 35713);
var rxjs_1 = __webpack_require__(/*! rxjs */ 15681);
var operators_1 = __webpack_require__(/*! rxjs/operators */ 97303);
var api_1 = __webpack_require__(/*! libs/common/src/lib/api */ 38385);
var user_class_1 = __webpack_require__(/*! libs/users/src/lib/user.class */ 93693);
var event_class_1 = __webpack_require__(/*! ./event.class */ 6727);
var date_fns_1 = __webpack_require__(/*! date-fns */ 25773);
var calendar_fn_1 = __webpack_require__(/*! libs/calendar/src/lib/calendar.fn */ 458);
var EVENTS_ENDPOINT = "/api/staff/v1/events";
/**
 * List events
 * @param q Parameters to pass to the API request
 */
function queryEvents(q) {
  var query = (0, api_1.toQueryString)(q);
  return (0, ts_client_1.get)("".concat(EVENTS_ENDPOINT).concat(query ? '?' + query : '')).pipe((0, operators_1.map)(function (list) {
    return list.map(function (e) {
      return new event_class_1.CalendarEvent(e);
    });
  }), (0, operators_1.catchError)(function (_) {
    return (0, rxjs_1.of)([]);
  }));
}
function queryAllEvents(q) {
  return (0, ts_client_1.query)({
    query_params: q,
    fn: function fn(item) {
      return new event_class_1.CalendarEvent(item);
    },
    endpoint: EVENTS_ENDPOINT,
    path: ''
  }).pipe((0, operators_1.switchMap)( /*#__PURE__*/function () {
    var _ref = _asyncToGenerator(function (_ref2) {
      var data = _ref2.data,
        next = _ref2.next;
      return /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
        var list, resp;
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              list = _toConsumableArray(data);
            case 1:
              if (!next) {
                _context.next = 10;
                break;
              }
              _context.next = 4;
              return next().toPromise();
            case 4:
              resp = _context.sent;
              data = resp.data;
              next = resp.next;
              list = [].concat(_toConsumableArray(list), _toConsumableArray(data));
              _context.next = 1;
              break;
            case 10:
              return _context.abrupt("return", list);
            case 11:
            case "end":
              return _context.stop();
          }
        }, _callee);
      })();
    });
    return function (_x) {
      return _ref.apply(this, arguments);
    };
  }()), (0, operators_1.catchError)(function (_) {
    return (0, rxjs_1.of)([]);
  }));
}
/**
 * Get event details
 * @param id ID of the event to grab
 * @param q Parameters to pass to the API request
 */
function showEvent(id) {
  var q = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
  var query = (0, api_1.toQueryString)(q);
  return (0, ts_client_1.get)("".concat(EVENTS_ENDPOINT, "/").concat(encodeURIComponent(id)).concat(query ? '?' + query : '')).pipe((0, operators_1.map)(function (item) {
    return new event_class_1.CalendarEvent(item);
  }));
}
/**
 * Create new calendar event and add it to the database
 * @param data New calendar event fields
 */
function createEvent(data) {
  return (0, ts_client_1.post)("".concat(EVENTS_ENDPOINT), new event_class_1.CalendarEvent(data).toJSON()).pipe((0, operators_1.map)(function (item) {
    return new event_class_1.CalendarEvent(item);
  }));
}
/**
 * Update an existing calendar event
 * @param id ID of the event to update
 * @param data New values for event fields
 * @param q Parameters to pass to the API request
 * @param method HTTP verb to use with API request
 */
function updateEvent(id, data) {
  var q = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
  var method = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 'patch';
  var query = (0, api_1.toQueryString)(q);
  return (method === 'patch' ? ts_client_1.patch : ts_client_1.put)("".concat(EVENTS_ENDPOINT, "/").concat(encodeURIComponent(id)).concat(query ? '?' + query : ''), new event_class_1.CalendarEvent(data).toJSON()).pipe((0, operators_1.map)(function (item) {
    return new event_class_1.CalendarEvent(item);
  }));
}
/**
 * Save changes to or create a calendar event
 * @param data State of the calendar event
 * @param q Parameters to pass to the API request
 */
var saveEvent = function saveEvent(data, q) {
  var id = data.update_master ? data.recurring_event_id || data.id : data.id;
  data === null || data === void 0 || delete data.status;
  return id ? updateEvent(id, _objectSpread(_objectSpread({}, data), {}, {
    id: id
  }), q) : createEvent(data);
};
exports.saveEvent = saveEvent;
/**
 * Remove calendar event from the database
 * @param id ID of the event to remove
 * @param q Parameters to pass to the API request
 */
function removeEvent(id) {
  var q = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
  var query = (0, api_1.toQueryString)(q);
  return (0, ts_client_1.del)("".concat(EVENTS_ENDPOINT, "/").concat(encodeURIComponent(id)).concat(query ? '?' + query : ''), {
    response_type: 'void'
  });
}
/**
 * Set the approval state of the event to approved
 * @param id ID of the event to approve
 * @param system_id Associated system to approve
 */
function approveEvent(id, system_id) {
  return (0, ts_client_1.post)("".concat(EVENTS_ENDPOINT, "/").concat(encodeURIComponent(id), "/approve?system_id=").concat(encodeURIComponent(system_id)), '').pipe((0, operators_1.map)(function (item) {
    return new event_class_1.CalendarEvent(item);
  }));
}
/**
 * Set the approval state of the event to rejected
 * @param id ID of the event to reject
 * @param system_id Associated system to reject
 */
function rejectEvent(id, system_id) {
  return (0, ts_client_1.post)("".concat(EVENTS_ENDPOINT, "/").concat(encodeURIComponent(id), "/reject?system_id=").concat(encodeURIComponent(system_id)), '').pipe((0, operators_1.map)(function (item) {
    return new event_class_1.CalendarEvent(item);
  }));
}
/**
 * Decline the given event
 * @param id ID of the event to decline
 * @returns
 */
function declineEvent(id) {
  var query = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
  var q = (0, api_1.toQueryString)(query);
  return (0, ts_client_1.post)("".concat(EVENTS_ENDPOINT, "/").concat(encodeURIComponent(id), "/decline").concat(q ? '?' + q : ''), '').pipe((0, operators_1.map)(function (item) {
    return new event_class_1.CalendarEvent(item);
  }));
}
/**
 * List guests for event
 * @param id ID of the event to grab
 * @param q Parameters to pass to the API request
 */
function queryEventGuests(id) {
  var q = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
  var query = (0, api_1.toQueryString)(q);
  return (0, ts_client_1.get)("".concat(EVENTS_ENDPOINT, "/").concat(encodeURIComponent(id), "/guests").concat(query ? '?' + query : '')).pipe((0, operators_1.map)(function (list) {
    return list.map(function (item) {
      return new user_class_1.GuestUser(item);
    });
  }));
}
/**
 * Set the checkin state of an event guest
 * @param id ID of the event to grab
 * @param guest_id ID of the guest to update
 * @param state New checkin state of the guest
 * @param q Parameters to pass to the API request
 */
function checkinEventGuest(id, guest_id, state) {
  var q = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};
  var query = (0, api_1.toQueryString)(_objectSpread(_objectSpread({}, q), {}, {
    state: state
  }));
  return (0, ts_client_1.post)("".concat(EVENTS_ENDPOINT, "/").concat(encodeURIComponent(id), "/guests/").concat(guest_id, "/checkin").concat(query ? '?' + query : ''), '').pipe((0, operators_1.map)(function (item) {
    return new user_class_1.GuestUser(item);
  }));
}
/**
 * Add a guest to a booking
 * @param id ID of the booking
 * @param guest Guest to add to the booking
 */
function addEventGuest(id, guest) {
  var q = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
  var query = (0, api_1.toQueryString)(q);
  return (0, ts_client_1.post)("".concat(EVENTS_ENDPOINT, "/").concat(encodeURIComponent(id), "/attendee").concat(query ? '?' + query : ''), guest).pipe((0, operators_1.map)(function (item) {
    return new user_class_1.GuestUser(item);
  }));
}
/**
 * Remove an attendee from a booking
 * @param id ID of the booking
 * @param guest Guest to remove from the booking
 */
function removeEventGuest(id, guest) {
  var q = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
  var query = (0, api_1.toQueryString)(q);
  return (0, ts_client_1.del)("".concat(EVENTS_ENDPOINT, "/").concat(encodeURIComponent(id), "/attendee/").concat(encodeURIComponent(guest.email)).concat(query ? '?' + query : '')).pipe((0, operators_1.map)(function (item) {
    return new user_class_1.GuestUser(item);
  }));
}
/**
 * Get the extension data for an event
 * @param id ID of the event
 * @param system_id  ID of the system associated with the event
 * @param query Extra query parameters to pass to the API request
 */
function getEventMetadata(id, system_id) {
  var query = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
  var q = (0, api_1.toQueryString)(_objectSpread({}, query));
  return (0, ts_client_1.get)("".concat(EVENTS_ENDPOINT, "/").concat(encodeURIComponent(id), "/metadata/").concat(encodeURIComponent(system_id)).concat(q ? '?' + q : '')).pipe((0, operators_1.map)(function (item) {
    return item;
  }));
}
/**
 * Update the extension data for an event
 * @param id ID of the event
 * @param system_id ID of the system associated with the event
 * @param metadata New metadata value to merge to exisiting
 * @param query Extra query parameters to pass to the API request
 */
function updateEventMetadata(id, system_id, metadata) {
  var query = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};
  var q = (0, api_1.toQueryString)(_objectSpread({}, query));
  return (0, ts_client_1.patch)("".concat(EVENTS_ENDPOINT, "/").concat(encodeURIComponent(id), "/metadata/").concat(encodeURIComponent(system_id)).concat(q ? '?' + q : ''), metadata).pipe((0, operators_1.map)(function (item) {
    return item;
  }));
}
/**
 * Check whether a selected space is available
 * @param id ID of the space to check
 * @param start Start of the availability period to check
 * @param duration Duration of the availability block in minutes
 * @param ignore ID of a booking to ignore when checking availability
 */
function isSpaceAvailable(id, start, duration, ignore) {
  return queryEvents({
    system_ids: id,
    period_start: (0, date_fns_1.getUnixTime)(start),
    period_end: (0, date_fns_1.getUnixTime)((0, date_fns_1.addMinutes)(start, duration))
  }).pipe((0, operators_1.map)(function (_) {
    return _.filter(function (_) {
      return _.id !== ignore;
    }).length === 0;
  }));
}
/**
 * Check whether a list of spaces are available
 * @param id_list List of space IDs to check
 * @param start Start of the availability period to check
 * @param duration Duration of the availability block in minutes
 * @param ignore ID of a booking to ignore when checking availability
 */
function querySpaceAvailability(id_list, start, duration, ignore, type) {
  var ignore_period = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : [0, 0];
  var end = (0, date_fns_1.addMinutes)(start, duration).valueOf();
  return (0, rxjs_1.combineLatest)([(0, calendar_fn_1.queryCalendarAvailability)({
    system_ids: id_list.join(),
    period_start: (0, date_fns_1.getUnixTime)(start),
    period_end: (0, date_fns_1.getUnixTime)(end)
  }).pipe((0, operators_1.catchError)(function (_) {
    return (0, rxjs_1.of)([]);
  })), ignore && id_list.includes(ignore) ? (0, calendar_fn_1.querySpaceFreeBusy)({
    period_start: (0, date_fns_1.getUnixTime)(start),
    period_end: (0, date_fns_1.getUnixTime)(end),
    system_ids: ignore
  }) : (0, rxjs_1.of)([])]).pipe((0, operators_1.map)(function (_ref3) {
    var _ref4 = _slicedToArray(_ref3, 2),
      spaces = _ref4[0],
      ignore_check = _ref4[1];
    var short_list = id_list.map(function (id) {
      return !!spaces.find(function (s) {
        var _s$resource;
        return s.id === id || ((_s$resource = s.resource) === null || _s$resource === void 0 ? void 0 : _s$resource.id) === id;
      });
    });
    var _iterator = _createForOfIteratorHelper(ignore_check),
      _step;
    try {
      for (_iterator.s(); !(_step = _iterator.n()).done;) {
        var space = _step.value;
        if (!id_list.includes(space.id)) continue;
        var availability = space.availability.filter(function (i) {
          return !(i.date === ignore_period[0] && i.duration === ignore_period[1]);
        });
        short_list[id_list.indexOf(space.id)] = !availability.find(function (i) {
          return i.status !== 'free';
        });
      }
    } catch (err) {
      _iterator.e(err);
    } finally {
      _iterator.f();
    }
    return short_list;
  }));
}

/***/ }),

/***/ 2704:
/*!**********************************************!*\
  !*** ./libs/events/src/lib/events.module.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _regeneratorRuntime = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/regeneratorRuntime.js */ 8698)["default"]);
var _asyncToGenerator = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/asyncToGenerator.js */ 95386)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _SharedEventsModule;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.SharedEventsModule = void 0;
var common_1 = __webpack_require__(/*! @angular/common */ 60316);
var forms_1 = __webpack_require__(/*! @angular/forms */ 34456);
var button_1 = __webpack_require__(/*! @angular/material/button */ 84175);
var core_1 = __webpack_require__(/*! @angular/material/core */ 74646);
var datepicker_1 = __webpack_require__(/*! @angular/material/datepicker */ 61977);
var dialog_1 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var form_field_1 = __webpack_require__(/*! @angular/material/form-field */ 24950);
var input_1 = __webpack_require__(/*! @angular/material/input */ 95541);
var progress_spinner_1 = __webpack_require__(/*! @angular/material/progress-spinner */ 41134);
var radio_1 = __webpack_require__(/*! @angular/material/radio */ 53804);
var form_fields_module_1 = __webpack_require__(/*! libs/form-fields/src/lib/form-fields.module */ 77066);
var components_module_1 = __webpack_require__(/*! libs/components/src/lib/components.module */ 14974);
var spaces_module_1 = __webpack_require__(/*! libs/spaces/src/lib/spaces.module */ 34360);
var attendee_list_component_1 = __webpack_require__(/*! ./attendee-list.component */ 47249);
var event_card_component_1 = __webpack_require__(/*! ./event-card.component */ 21765);
var event_details_modal_component_1 = __webpack_require__(/*! ./event-details-modal.component */ 54035);
var event_link_modal_component_1 = __webpack_require__(/*! ./event-link-modal.component */ 22671);
var setup_breakdown_modal_component_1 = __webpack_require__(/*! ./setup-breakdown-modal.component */ 50711);
var group_event_card_component_1 = __webpack_require__(/*! ./group-event-card.component */ 27535);
var group_event_details_modal_component_1 = __webpack_require__(/*! ./group-event-details-modal.component */ 58094);
var event_class_1 = __webpack_require__(/*! ./event.class */ 6727);
var user_state_1 = __webpack_require__(/*! libs/common/src/lib/user-state */ 37958);
var operators_1 = __webpack_require__(/*! rxjs/operators */ 97303);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @angular/common */ 60316);
var i2 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var i3 = __webpack_require__(/*! ../../../components/src/lib/icon.component */ 69434);
var i4 = __webpack_require__(/*! ../../../components/src/lib/user-avatar.component */ 23574);
var i5 = __webpack_require__(/*! ../../../components/src/lib/interactive-map.component */ 24918);
var i6 = __webpack_require__(/*! ../../../components/src/lib/image-carousel.component */ 65277);
var i7 = __webpack_require__(/*! ../../../components/src/lib/status-pill.component */ 50907);
var i8 = __webpack_require__(/*! ../../../components/src/lib/binding.directive */ 83938);
var i9 = __webpack_require__(/*! @angular/material/menu */ 31034);
var i10 = __webpack_require__(/*! @angular/material/core */ 74646);
var i11 = __webpack_require__(/*! @angular/material/tooltip */ 80640);
var i12 = __webpack_require__(/*! ../../../components/src/lib/sanitise.pipe */ 54616);
var i13 = __webpack_require__(/*! @angular/forms */ 34456);
var i14 = __webpack_require__(/*! @angular/material/progress-spinner */ 41134);
var i15 = __webpack_require__(/*! ../../../form-fields/src/lib/duration-field.component */ 83476);
var i16 = __webpack_require__(/*! ../../../components/src/lib/authenticated-image.directive */ 93208);
var i17 = __webpack_require__(/*! ../../../spaces/src/lib/space.pipe */ 22011);
var COMPONENTS = [event_details_modal_component_1.EventDetailsModalComponent, attendee_list_component_1.AttendeeListComponent, event_card_component_1.EventCardComponent, event_link_modal_component_1.EventLinkModalComponent, setup_breakdown_modal_component_1.SetupBreakdownModalComponent, group_event_details_modal_component_1.GroupEventDetailsModalComponent, group_event_card_component_1.GroupEventCardComponent];
var SharedEventsModule = /*#__PURE__*/function () {
  function SharedEventsModule() {
    _classCallCheck(this, SharedEventsModule);
  }
  return _createClass(SharedEventsModule, [{
    key: "ngOnInit",
    value: function () {
      var _ngOnInit = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              _context.next = 2;
              return user_state_1.current_user.pipe((0, operators_1.first)(function (_) {
                return !!_;
              })).toPromise();
            case 2:
              (0, event_class_1.setDefaultCreator)((0, user_state_1.currentUser)());
            case 3:
            case "end":
              return _context.stop();
          }
        }, _callee);
      }));
      function ngOnInit() {
        return _ngOnInit.apply(this, arguments);
      }
      return ngOnInit;
    }()
  }]);
}();
_SharedEventsModule = SharedEventsModule;
_SharedEventsModule.ɵfac = function SharedEventsModule_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _SharedEventsModule)();
};
_SharedEventsModule.ɵmod = /*@__PURE__*/i0.ɵɵdefineNgModule({
  type: _SharedEventsModule
});
_SharedEventsModule.ɵinj = /*@__PURE__*/i0.ɵɵdefineInjector({
  providers: [forms_1.ReactiveFormsModule],
  imports: [common_1.CommonModule, forms_1.FormsModule, forms_1.ReactiveFormsModule, radio_1.MatRadioModule, input_1.MatInputModule, form_field_1.MatFormFieldModule, datepicker_1.MatDatepickerModule, button_1.MatButtonModule, dialog_1.MatDialogModule, progress_spinner_1.MatProgressSpinnerModule, form_fields_module_1.FormFieldsModule, components_module_1.ComponentsModule, core_1.MatRippleModule, spaces_module_1.SharedSpacesModule]
});
exports.SharedEventsModule = SharedEventsModule;
(function () {
  (typeof ngJitMode === "undefined" || ngJitMode) && i0.ɵɵsetNgModuleScope(SharedEventsModule, {
    declarations: [event_details_modal_component_1.EventDetailsModalComponent, attendee_list_component_1.AttendeeListComponent, event_card_component_1.EventCardComponent, event_link_modal_component_1.EventLinkModalComponent, setup_breakdown_modal_component_1.SetupBreakdownModalComponent, group_event_details_modal_component_1.GroupEventDetailsModalComponent, group_event_card_component_1.GroupEventCardComponent],
    imports: [common_1.CommonModule, forms_1.FormsModule, forms_1.ReactiveFormsModule, radio_1.MatRadioModule, input_1.MatInputModule, form_field_1.MatFormFieldModule, datepicker_1.MatDatepickerModule, button_1.MatButtonModule, dialog_1.MatDialogModule, progress_spinner_1.MatProgressSpinnerModule, form_fields_module_1.FormFieldsModule, components_module_1.ComponentsModule, core_1.MatRippleModule, spaces_module_1.SharedSpacesModule],
    exports: [event_details_modal_component_1.EventDetailsModalComponent, attendee_list_component_1.AttendeeListComponent, event_card_component_1.EventCardComponent, event_link_modal_component_1.EventLinkModalComponent, setup_breakdown_modal_component_1.SetupBreakdownModalComponent, group_event_details_modal_component_1.GroupEventDetailsModalComponent, group_event_card_component_1.GroupEventCardComponent]
  });
})();
i0.ɵɵsetComponentScope(event_details_modal_component_1.EventDetailsModalComponent, [i1.NgForOf, i1.NgIf, i2.MatDialogClose, i3.IconComponent, i4.UserAvatarComponent, i5.InteractiveMapComponent, i6.ImageCarouselComponent, i7.StatusPillComponent, i8.BindingDirective, i9.MatMenu, i9.MatMenuItem, i9.MatMenuTrigger, i10.MatRipple, i11.MatTooltip, attendee_list_component_1.AttendeeListComponent], [i1.CurrencyPipe, i1.DatePipe, i12.SanitizePipe]);
i0.ɵɵsetComponentScope(attendee_list_component_1.AttendeeListComponent, [i1.NgForOf, i1.NgIf, i3.IconComponent, i4.UserAvatarComponent, i10.MatRipple, i11.MatTooltip], []);
i0.ɵɵsetComponentScope(event_card_component_1.EventCardComponent, [i1.NgForOf, i1.NgIf, i3.IconComponent, i4.UserAvatarComponent, i7.StatusPillComponent], [i1.SlicePipe, i1.DatePipe]);
i0.ɵɵsetComponentScope(setup_breakdown_modal_component_1.SetupBreakdownModalComponent, [i1.NgIf, i13.NgControlStatus, i13.NgControlStatusGroup, i13.FormGroupDirective, i13.FormControlName, i2.MatDialogClose, i14.MatProgressSpinner, i15.DurationFieldComponent, i3.IconComponent, i10.MatRipple], []);
i0.ɵɵsetComponentScope(group_event_details_modal_component_1.GroupEventDetailsModalComponent, [i1.NgIf, i2.MatDialogClose, i3.IconComponent, i5.InteractiveMapComponent, i16.AuthenticatedImageDirective, i9.MatMenu, i9.MatMenuItem, i9.MatMenuTrigger, i10.MatRipple, attendee_list_component_1.AttendeeListComponent], [i1.AsyncPipe, i1.DatePipe, i12.SanitizePipe, i17.SpacePipe]);
i0.ɵɵsetComponentScope(group_event_card_component_1.GroupEventCardComponent, [i1.NgIf, i3.IconComponent, i16.AuthenticatedImageDirective, i10.MatRipple], [i1.DatePipe]);

/***/ }),

/***/ 76:
/*!***************************************!*\
  !*** ./libs/events/src/lib/events.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var tslib_1 = __webpack_require__(/*! tslib */ 24398);
tslib_1.__exportStar(__webpack_require__(/*! ./event-form.service */ 26101), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./event.class */ 6727), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./event.interfaces */ 59451), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./events.fn */ 51416), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./helpers */ 37420), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./utilities */ 55049), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./validators */ 90690), exports);

/***/ }),

/***/ 27535:
/*!***********************************************************!*\
  !*** ./libs/events/src/lib/group-event-card.component.ts ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _regeneratorRuntime = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/regeneratorRuntime.js */ 8698)["default"]);
var _asyncToGenerator = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/asyncToGenerator.js */ 95386)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _GroupEventCardComponent;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.GroupEventCardComponent = void 0;
var dialog_1 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var group_event_details_modal_component_1 = __webpack_require__(/*! ./group-event-details-modal.component */ 58094);
var space_pipe_1 = __webpack_require__(/*! libs/spaces/src/lib/space.pipe */ 22011);
var organisation_service_1 = __webpack_require__(/*! libs/organisation/src/lib/organisation.service */ 19863);
var event_class_1 = __webpack_require__(/*! ./event.class */ 6727);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @placeos/common */ 22797);
var i2 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var i3 = __webpack_require__(/*! libs/organisation/src/lib/organisation.service */ 19863);
function GroupEventCardComponent_button_0_img_2_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelement(0, "img", 15);
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext(2);
    i0.ɵɵproperty("source", ctx_r1.event.images[0]);
  }
}
function GroupEventCardComponent_button_0_p_13_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "p", 16);
    i0.ɵɵtext(1, " No description ");
    i0.ɵɵelementEnd();
  }
}
function GroupEventCardComponent_button_0_div_17_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div");
    i0.ɵɵtext(1);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", ctx_r1.space.display_name || ctx_r1.space.name || "", " ");
  }
}
function GroupEventCardComponent_button_0_div_18_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 16);
    i0.ɵɵtext(1, " Room to be confirmed ");
    i0.ɵɵelementEnd();
  }
}
function GroupEventCardComponent_button_0_div_19_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 16);
    i0.ɵɵtext(1, " Remote event ");
    i0.ɵɵelementEnd();
  }
}
function GroupEventCardComponent_button_0_Template(rf, ctx) {
  if (rf & 1) {
    var _r1 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "button", 2);
    i0.ɵɵlistener("click", function GroupEventCardComponent_button_0_Template_button_click_0_listener() {
      i0.ɵɵrestoreView(_r1);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.viewDetails());
    });
    i0.ɵɵelementStart(1, "div", 3);
    i0.ɵɵtemplate(2, GroupEventCardComponent_button_0_img_2_Template, 1, 1, "img", 4);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(3, "div", 5)(4, "div", 6);
    i0.ɵɵtext(5);
    i0.ɵɵpipe(6, "date");
    i0.ɵɵpipe(7, "date");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(8, "h2", 7);
    i0.ɵɵtext(9);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(10, "div", 8)(11, "p", 9);
    i0.ɵɵtext(12);
    i0.ɵɵelementEnd();
    i0.ɵɵtemplate(13, GroupEventCardComponent_button_0_p_13_Template, 2, 0, "p", 10);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(14, "div", 11)(15, "app-icon", 12);
    i0.ɵɵtext(16, "place");
    i0.ɵɵelementEnd();
    i0.ɵɵtemplate(17, GroupEventCardComponent_button_0_div_17_Template, 2, 1, "div", 13)(18, GroupEventCardComponent_button_0_div_18_Template, 2, 0, "div", 10)(19, GroupEventCardComponent_button_0_div_19_Template, 2, 0, "div", 10);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(20, "div", 11)(21, "app-icon", 12);
    i0.ɵɵtext(22, "people");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(23, "div", 14);
    i0.ɵɵtext(24);
    i0.ɵɵelementEnd()()()();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance(2);
    i0.ɵɵproperty("ngIf", ctx_r1.event.images == null ? null : ctx_r1.event.images.length);
    i0.ɵɵadvance(3);
    i0.ɵɵtextInterpolate2(" ", i0.ɵɵpipeBind2(6, 11, ctx_r1.event.date, "EEE d MMM"), ", ", i0.ɵɵpipeBind2(7, 14, ctx_r1.event.date, ctx_r1.time_format), " ");
    i0.ɵɵadvance(3);
    i0.ɵɵproperty("title", ctx_r1.event.title);
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", ctx_r1.event.title, " ");
    i0.ɵɵadvance(3);
    i0.ɵɵtextInterpolate(ctx_r1.raw_description);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", !ctx_r1.raw_description.trim());
    i0.ɵɵadvance(4);
    i0.ɵɵproperty("ngIf", ctx_r1.is_onsite && ctx_r1.has_space);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", ctx_r1.is_onsite && !ctx_r1.has_space);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", !ctx_r1.is_onsite);
    i0.ɵɵadvance(5);
    i0.ɵɵtextInterpolate1(" ", (ctx_r1.event.attendees == null ? null : ctx_r1.event.attendees.length) || "0", " attending ");
  }
}
function GroupEventCardComponent_ng_template_1_img_2_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelement(0, "img", 15);
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext(2);
    i0.ɵɵproperty("source", ctx_r1.event.images[0]);
  }
}
function GroupEventCardComponent_ng_template_1_p_27_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "p", 16);
    i0.ɵɵtext(1, " No description ");
    i0.ɵɵelementEnd();
  }
}
function GroupEventCardComponent_ng_template_1_div_31_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div");
    i0.ɵɵtext(1);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", ctx_r1.space.display_name || ctx_r1.space.name || "", " ");
  }
}
function GroupEventCardComponent_ng_template_1_div_32_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 16);
    i0.ɵɵtext(1, " Room to be confirmed ");
    i0.ɵɵelementEnd();
  }
}
function GroupEventCardComponent_ng_template_1_div_33_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 16);
    i0.ɵɵtext(1, " Remote event ");
    i0.ɵɵelementEnd();
  }
}
function GroupEventCardComponent_ng_template_1_Template(rf, ctx) {
  if (rf & 1) {
    var _r3 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "button", 17);
    i0.ɵɵlistener("click", function GroupEventCardComponent_ng_template_1_Template_button_click_0_listener() {
      i0.ɵɵrestoreView(_r3);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.viewDetails());
    });
    i0.ɵɵelementStart(1, "div", 18);
    i0.ɵɵtemplate(2, GroupEventCardComponent_ng_template_1_img_2_Template, 1, 1, "img", 4);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(3, "div", 19)(4, "app-icon", 20);
    i0.ɵɵtext(5, "star");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(6, "div", 21);
    i0.ɵɵtext(7, "Featured");
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(8, "div", 22)(9, "div", 23)(10, "div", 24);
    i0.ɵɵtext(11);
    i0.ɵɵpipe(12, "date");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(13, "div", 25);
    i0.ɵɵtext(14);
    i0.ɵɵpipe(15, "date");
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(16, "div", 26)(17, "h3", 27);
    i0.ɵɵtext(18);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(19, "div", 28);
    i0.ɵɵtext(20);
    i0.ɵɵpipe(21, "date");
    i0.ɵɵpipe(22, "date");
    i0.ɵɵpipe(23, "date");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(24, "div", 29)(25, "p", 30);
    i0.ɵɵtext(26);
    i0.ɵɵelementEnd();
    i0.ɵɵtemplate(27, GroupEventCardComponent_ng_template_1_p_27_Template, 2, 0, "p", 10);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(28, "div", 11)(29, "app-icon", 12);
    i0.ɵɵtext(30, "place");
    i0.ɵɵelementEnd();
    i0.ɵɵtemplate(31, GroupEventCardComponent_ng_template_1_div_31_Template, 2, 1, "div", 13)(32, GroupEventCardComponent_ng_template_1_div_32_Template, 2, 0, "div", 10)(33, GroupEventCardComponent_ng_template_1_div_33_Template, 2, 0, "div", 10);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(34, "div", 11)(35, "app-icon", 12);
    i0.ɵɵtext(36, "people");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(37, "div", 14);
    i0.ɵɵtext(38);
    i0.ɵɵelementEnd()()()();
    i0.ɵɵelementStart(39, "div", 31);
    i0.ɵɵtext(40, " View Details ");
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance(2);
    i0.ɵɵproperty("ngIf", ctx_r1.event.images == null ? null : ctx_r1.event.images.length);
    i0.ɵɵadvance(9);
    i0.ɵɵtextInterpolate1(" ", i0.ɵɵpipeBind2(12, 13, ctx_r1.event.date, "MMM"), " ");
    i0.ɵɵadvance(3);
    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(15, 16, ctx_r1.event.date, "d"));
    i0.ɵɵadvance(4);
    i0.ɵɵtextInterpolate(ctx_r1.event.title);
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate3(" ", i0.ɵɵpipeBind2(21, 19, ctx_r1.event.date, "EEEE"), " ", i0.ɵɵpipeBind2(22, 22, ctx_r1.event.date, ctx_r1.time_format), " - ", i0.ɵɵpipeBind2(23, 25, ctx_r1.event.date + ctx_r1.event.duration * 60 * 1000, ctx_r1.time_format), " ");
    i0.ɵɵadvance(6);
    i0.ɵɵtextInterpolate(ctx_r1.raw_description);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", !ctx_r1.raw_description.trim());
    i0.ɵɵadvance(4);
    i0.ɵɵproperty("ngIf", ctx_r1.is_onsite && ctx_r1.has_space);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", ctx_r1.is_onsite && !ctx_r1.has_space);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", !ctx_r1.is_onsite);
    i0.ɵɵadvance(5);
    i0.ɵɵtextInterpolate1(" ", (ctx_r1.event.attendees == null ? null : ctx_r1.event.attendees.length) || "0", " attending ");
  }
}
var GroupEventCardComponent = /*#__PURE__*/function () {
  function GroupEventCardComponent(_settings, _dialog, _org) {
    _classCallCheck(this, GroupEventCardComponent);
    this._settings = _settings;
    this._dialog = _dialog;
    this._org = _org;
    this.raw_description = '';
  }
  return _createClass(GroupEventCardComponent, [{
    key: "time_format",
    get: function get() {
      return this._settings.time_format;
    }
  }, {
    key: "is_onsite",
    get: function get() {
      var _this$event;
      return ((_this$event = this.event) === null || _this$event === void 0 ? void 0 : _this$event.extension_data.attendance_type) !== 'ONLINE';
    }
  }, {
    key: "has_space",
    get: function get() {
      var _this$space;
      return !!((_this$space = this.space) !== null && _this$space !== void 0 && _this$space.id);
    }
  }, {
    key: "is_online",
    get: function get() {
      var _this$event2;
      return !this.is_onsite || ((_this$event2 = this.event) === null || _this$event2 === void 0 ? void 0 : _this$event2.extension_data.attendance_type) === 'ANY';
    }
  }, {
    key: "group_event_calendar",
    get: function get() {
      return this._settings.get('app.group_events_calendar');
    }
  }, {
    key: "ngOnInit",
    value: function () {
      var _ngOnInit = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
        var _this = this;
        var space_pipe, resource;
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              space_pipe = new space_pipe_1.SpacePipe(this._org);
              resource = this.event.resources.find(function (_) {
                return _.email !== _this.group_event_calendar;
              });
              _context.next = 4;
              return space_pipe.transform((resource === null || resource === void 0 ? void 0 : resource.id) || (resource === null || resource === void 0 ? void 0 : resource.email));
            case 4:
              this.space = _context.sent;
              this.raw_description = this.removeHtmlTags(this.event.body);
            case 6:
            case "end":
              return _context.stop();
          }
        }, _callee, this);
      }));
      function ngOnInit() {
        return _ngOnInit.apply(this, arguments);
      }
      return ngOnInit;
    }()
  }, {
    key: "removeHtmlTags",
    value: function removeHtmlTags(html) {
      var doc = new DOMParser().parseFromString(html, 'text/html');
      return doc.body.textContent || '';
    }
  }, {
    key: "viewDetails",
    value: function viewDetails() {
      this._dialog.open(group_event_details_modal_component_1.GroupEventDetailsModalComponent, {
        data: {
          event: this.event,
          concierge: false
        }
      });
    }
  }]);
}();
_GroupEventCardComponent = GroupEventCardComponent;
_GroupEventCardComponent.ɵfac = function GroupEventCardComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _GroupEventCardComponent)(i0.ɵɵdirectiveInject(i1.SettingsService), i0.ɵɵdirectiveInject(i2.MatDialog), i0.ɵɵdirectiveInject(i3.OrganisationService));
};
_GroupEventCardComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _GroupEventCardComponent,
  selectors: [["group-event-card"]],
  inputs: {
    event: "event",
    featured: "featured"
  },
  decls: 3,
  vars: 2,
  consts: [["featured_card", ""], ["matRipple", "", "class", "border border-base-300 hover:border-info flex flex-col bg-base-100 rounded-xl shadow hover:shadow-2xl overflow-hidden w-60 h-[20rem]", 3, "click", 4, "ngIf", "ngIfElse"], ["matRipple", "", 1, "border", "border-base-300", "hover:border-info", "flex", "flex-col", "bg-base-100", "rounded-xl", "shadow", "hover:shadow-2xl", "overflow-hidden", "w-60", "h-[20rem]", 3, "click"], [1, "relative", "flex", "items-center", "justify-between", "h-28", "min-h-28", "w-full", "bg-base-200", "overflow-hidden", "border-b", "border-base-200"], ["auth", "", "class", "absolute top-0 left-0 h-full w-full object-center object-cover", 3, "source", 4, "ngIf"], [1, "p-4", "flex-1", "h-1/2", "w-full"], [1, "opacity-60", "text-sm", "text-left"], [1, "text-xl", "mb-2", "text-left", "truncate", "w-full", 3, "title"], [1, "opacity-60", "text-xs", "flex-1", "overflow-hidden", "h-[4.5rem]", "mb-2", "text-left"], [1, "line-clamp-4"], ["class", "opacity-30", 4, "ngIf"], [1, "flex", "items-center", "space-x-2", "text-sm"], [1, "text-info"], [4, "ngIf"], [1, ""], ["auth", "", 1, "absolute", "top-0", "left-0", "h-full", "w-full", "object-center", "object-cover", 3, "source"], [1, "opacity-30"], ["matRipple", "", 1, "border", "border-base-300", "hover:border-info", "flex", "bg-base-100", "rounded-xl", "shadow", "hover:shadow-2xl", "overflow-hidden", "w-[63rem]", "max-w-full", "h-56", "mx-auto", 3, "click"], [1, "relative", "flex", "items-center", "justify-between", "h-full", "min-w-56", "w-1/2", "max-w-[20rem]", "bg-base-200", "overflow-hidden", "border-r", "border-base-200"], [1, "absolute", "top-0", "left-0", "rounded-br-xl", "py-2", "pl-2", "pr-4", "space-x-2", "bg-info", "text-info-content", "flex", "items-center", "text-sm"], [1, "text-base"], [1, "uppercase"], ["details", "", 1, "flex", "px-8", "py-4", "space-x-4"], [1, "flex", "flex-col", "items-center"], [1, "text-sm", "opacity-30"], [1, "text-lg"], [1, "flex", "flex-col", "space-y-2"], [1, "text-left"], ["time", "", 1, "text-sm", "opacity-30", "text-left"], [1, "h-20", "overflow-hidden", "text-left"], [1, "line-clamp-3"], [1, "absolute", "top-4", "right-4", "bg-secondary", "text-secondary-content", "rounded", "px-4", "py-2", "w-32", "text-center", "truncate"]],
  template: function GroupEventCardComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵtemplate(0, GroupEventCardComponent_button_0_Template, 25, 17, "button", 1)(1, GroupEventCardComponent_ng_template_1_Template, 41, 28, "ng-template", null, 0, i0.ɵɵtemplateRefExtractor);
    }
    if (rf & 2) {
      var featured_card_r4 = i0.ɵɵreference(2);
      i0.ɵɵproperty("ngIf", !ctx.featured)("ngIfElse", featured_card_r4);
    }
  },
  styles: ["button[_ngcontent-%COMP%] {\n                transition:\n                    box-shadow 300ms,\n                    border 200ms;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdyb3VwLWV2ZW50LWNhcmQuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSTs7Z0NBRWdCO1lBQ3BCIiwiZmlsZSI6Imdyb3VwLWV2ZW50LWNhcmQuY29tcG9uZW50LnRzIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICBidXR0b24ge1xuICAgICAgICAgICAgICAgIHRyYW5zaXRpb246XG4gICAgICAgICAgICAgICAgICAgIGJveC1zaGFkb3cgMzAwbXMsXG4gICAgICAgICAgICAgICAgICAgIGJvcmRlciAyMDBtcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl19 */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvZXZlbnRzL3NyYy9saWIvZ3JvdXAtZXZlbnQtY2FyZC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJOztnQ0FFZ0I7WUFDcEI7O0FBRVosNGRBQTRkIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICBidXR0b24ge1xuICAgICAgICAgICAgICAgIHRyYW5zaXRpb246XG4gICAgICAgICAgICAgICAgICAgIGJveC1zaGFkb3cgMzAwbXMsXG4gICAgICAgICAgICAgICAgICAgIGJvcmRlciAyMDBtcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl0sInNvdXJjZVJvb3QiOiIifQ== */"]
});
exports.GroupEventCardComponent = GroupEventCardComponent;

/***/ }),

/***/ 58094:
/*!********************************************************************!*\
  !*** ./libs/events/src/lib/group-event-details-modal.component.ts ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _objectSpread = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/objectSpread2.js */ 34092)["default"]);
var _toConsumableArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/toConsumableArray.js */ 86033)["default"]);
var _regeneratorRuntime = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/regeneratorRuntime.js */ 8698)["default"]);
var _asyncToGenerator = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/asyncToGenerator.js */ 95386)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _GroupEventDetailsModalComponent;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.GroupEventDetailsModalComponent = void 0;
var core_1 = __webpack_require__(/*! @angular/core */ 37580);
var dialog_1 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var components_1 = __webpack_require__(/*! @placeos/components */ 51588);
var organisation_1 = __webpack_require__(/*! @placeos/organisation */ 2510);
var space_pipe_1 = __webpack_require__(/*! libs/spaces/src/lib/space.pipe */ 22011);
var events_fn_1 = __webpack_require__(/*! ./events.fn */ 51416);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @placeos/organisation */ 2510);
var i2 = __webpack_require__(/*! @placeos/common */ 22797);
var i3 = __webpack_require__(/*! @angular/material/dialog */ 12587);
function GroupEventDetailsModalComponent_img_2_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelement(0, "img", 36);
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵproperty("source", ctx_r1.event.extension_data == null ? null : ctx_r1.event.extension_data.images[0]);
  }
}
function GroupEventDetailsModalComponent_div_3_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 37)(1, "app-icon", 38);
    i0.ɵɵtext(2, "star");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(3, "div", 39);
    i0.ɵɵtext(4, "Featured");
    i0.ɵɵelementEnd()();
  }
}
function GroupEventDetailsModalComponent_ng_container_12_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵelementStart(1, "div", 40)(2, "app-icon");
    i0.ɵɵtext(3, "star");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(4, "div", 41);
    i0.ɵɵtext(5);
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(6, "div", 40)(7, "app-icon");
    i0.ɵɵtext(8, "help");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(9, "div", 41);
    i0.ɵɵtext(10);
    i0.ɵɵelementEnd()();
    i0.ɵɵelementContainerEnd();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance();
    i0.ɵɵclassProp("bg-base-200", !ctx_r1.is_interested)("text-base-content", !ctx_r1.is_interested)("opacity-30", !ctx_r1.is_interested)("bg-success", ctx_r1.is_interested)("text-success-content", ctx_r1.is_interested)("opacity-100", ctx_r1.is_interested);
    i0.ɵɵadvance(4);
    i0.ɵɵtextInterpolate1(" ", ctx_r1.is_interested ? "" : "Not ", "Interested ");
    i0.ɵɵadvance();
    i0.ɵɵclassProp("bg-base-200", !ctx_r1.is_going)("text-base-content", !ctx_r1.is_going)("opacity-30", !ctx_r1.is_going)("bg-success", ctx_r1.is_going)("text-success-content", ctx_r1.is_going)("opacity-100", ctx_r1.is_going);
    i0.ɵɵadvance(4);
    i0.ɵɵtextInterpolate1(" ", ctx_r1.is_going ? "" : "Not ", "Going ");
  }
}
function GroupEventDetailsModalComponent_div_83_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div");
    i0.ɵɵtext(1);
    i0.ɵɵpipe(2, "space");
    i0.ɵɵpipe(3, "async");
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var tmp_3_0;
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", (tmp_3_0 = i0.ɵɵpipeBind1(3, 3, i0.ɵɵpipeBind1(2, 1, ctx_r1.system_id))) == null ? null : tmp_3_0.display_name, " ");
  }
}
function GroupEventDetailsModalComponent_div_84_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 42);
    i0.ɵɵtext(1, " Room to be confirmed ");
    i0.ɵɵelementEnd();
  }
}
function GroupEventDetailsModalComponent_div_85_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 42);
    i0.ɵɵtext(1);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", ctx_r1.is_onsite ? "Can be attended online" : "Remote Event", " ");
  }
}
function GroupEventDetailsModalComponent_span_97_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "span", 42);
    i0.ɵɵtext(1, " No description ");
    i0.ɵɵelementEnd();
  }
}
function GroupEventDetailsModalComponent_div_99_interactive_map_3_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelement(0, "interactive-map", 50);
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext(2);
    i0.ɵɵproperty("src", ctx_r1.level == null ? null : ctx_r1.level.map_id)("features", ctx_r1.features)("styles", ctx_r1.styles);
  }
}
function GroupEventDetailsModalComponent_div_99_div_5_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div");
    i0.ɵɵtext(1);
    i0.ɵɵpipe(2, "space");
    i0.ɵɵpipe(3, "async");
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var tmp_4_0;
    var ctx_r1 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", (tmp_4_0 = i0.ɵɵpipeBind1(3, 3, i0.ɵɵpipeBind1(2, 1, ctx_r1.system_id))) == null ? null : tmp_4_0.display_name, " ");
  }
}
function GroupEventDetailsModalComponent_div_99_div_6_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 42);
    i0.ɵɵtext(1, " Room to be confirmed ");
    i0.ɵɵelementEnd();
  }
}
function GroupEventDetailsModalComponent_div_99_span_8_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "span");
    i0.ɵɵtext(1);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate2(" ", ctx_r1.building.display_name || ctx_r1.building.name, ", ", (ctx_r1.level == null ? null : ctx_r1.level.display_name) || (ctx_r1.level == null ? null : ctx_r1.level.name), " ");
  }
}
function GroupEventDetailsModalComponent_div_99_span_9_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "span", 42);
    i0.ɵɵtext(1, " No location set for this event ");
    i0.ɵɵelementEnd();
  }
}
function GroupEventDetailsModalComponent_div_99_a_10_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "a", 51);
    i0.ɵɵtext(1);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext(2);
    i0.ɵɵclassProp("underline", ctx_r1.event.meeting_url);
    i0.ɵɵproperty("href", ctx_r1.event.meeting_url, i0.ɵɵsanitizeUrl);
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", ctx_r1.is_onsite ? "Can be attended online" : "Remote Event", " ");
  }
}
function GroupEventDetailsModalComponent_div_99_Template(rf, ctx) {
  if (rf & 1) {
    var _r3 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 43)(1, "div", 44)(2, "button", 45);
    i0.ɵɵlistener("click", function GroupEventDetailsModalComponent_div_99_Template_button_click_2_listener() {
      i0.ɵɵrestoreView(_r3);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.viewLocation());
    });
    i0.ɵɵtemplate(3, GroupEventDetailsModalComponent_div_99_interactive_map_3_Template, 1, 3, "interactive-map", 46);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(4, "div", 47);
    i0.ɵɵtemplate(5, GroupEventDetailsModalComponent_div_99_div_5_Template, 4, 5, "div", 12)(6, GroupEventDetailsModalComponent_div_99_div_6_Template, 2, 0, "div", 30);
    i0.ɵɵelementStart(7, "div", 48);
    i0.ɵɵtemplate(8, GroupEventDetailsModalComponent_div_99_span_8_Template, 2, 2, "span", 12)(9, GroupEventDetailsModalComponent_div_99_span_9_Template, 2, 0, "span", 30);
    i0.ɵɵelementEnd();
    i0.ɵɵtemplate(10, GroupEventDetailsModalComponent_div_99_a_10_Template, 2, 4, "a", 49);
    i0.ɵɵelementEnd()()();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance(3);
    i0.ɵɵproperty("ngIf", !ctx_r1.showing_map);
    i0.ɵɵadvance(2);
    i0.ɵɵproperty("ngIf", ctx_r1.is_onsite && ctx_r1.has_space);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", ctx_r1.is_onsite && !ctx_r1.has_space);
    i0.ɵɵadvance(2);
    i0.ɵɵproperty("ngIf", ctx_r1.building && ctx_r1.level);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", !ctx_r1.building || !ctx_r1.level);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", ctx_r1.is_online);
  }
}
function GroupEventDetailsModalComponent_div_100_Template(rf, ctx) {
  if (rf & 1) {
    var _r4 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 52)(1, "button", 53);
    i0.ɵɵlistener("click", function GroupEventDetailsModalComponent_div_100_Template_button_click_1_listener() {
      i0.ɵɵrestoreView(_r4);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.show_attendees = false);
    });
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(2, "div", 54)(3, "attendee-list", 55);
    i0.ɵɵlistener("click", function GroupEventDetailsModalComponent_div_100_Template_attendee_list_click_3_listener() {
      i0.ɵɵrestoreView(_r4);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.show_attendees = false);
    });
    i0.ɵɵelementEnd()()();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance(3);
    i0.ɵɵproperty("show_host", false)("list", ctx_r1.event.attendees)("host", ctx_r1.event.user_email);
  }
}
var GroupEventDetailsModalComponent = /*#__PURE__*/function () {
  function GroupEventDetailsModalComponent(_data, _org, _settings, _dialog, _dialog_ref) {
    _classCallCheck(this, GroupEventDetailsModalComponent);
    this._data = _data;
    this._org = _org;
    this._settings = _settings;
    this._dialog = _dialog;
    this._dialog_ref = _dialog_ref;
    this.edit = new core_1.EventEmitter();
    this.remove = new core_1.EventEmitter();
    this.event = this._data.event;
    this.concierge = this._data.concierge;
    this.features = [];
    this.locate = '';
    this.showing_map = false;
    this.show_attendees = false;
    this.styles = {};
    this.raw_description = '';
  }
  return _createClass(GroupEventDetailsModalComponent, [{
    key: "time_format",
    get: function get() {
      return this._settings.time_format;
    }
  }, {
    key: "featured",
    get: function get() {
      var _this$event$extension;
      return this.event.featured || ((_this$event$extension = this.event.extension_data) === null || _this$event$extension === void 0 ? void 0 : _this$event$extension.featured);
    }
  }, {
    key: "is_onsite",
    get: function get() {
      return this.event.extension_data.attendance_type !== 'ONLINE';
    }
  }, {
    key: "has_space",
    get: function get() {
      var _this$space;
      return !!((_this$space = this.space) !== null && _this$space !== void 0 && _this$space.id);
    }
  }, {
    key: "is_online",
    get: function get() {
      return !this.is_onsite || this.event.extension_data.attendance_type === 'ANY';
    }
  }, {
    key: "body",
    get: function get() {
      if (this.is_online) return this.event.body;
      var body = this.event.body;
      var remove_blocks = ["<div style=\"margin-bottom:24px; overflow:hidden; white-space:nowrap\">________________________________________________________________________________</div>", "<p>________________________________________________________________________________</p>"];
      for (var _i = 0, _remove_blocks = remove_blocks; _i < _remove_blocks.length; _i++) {
        var block = _remove_blocks[_i];
        var first = body.indexOf(block);
        var last = body.lastIndexOf(block);
        body = body.substring(0, first) + body.substring(last);
      }
      for (var _i2 = 0, _remove_blocks2 = remove_blocks; _i2 < _remove_blocks2.length; _i2++) {
        var _block = _remove_blocks2[_i2];
        body = body.replace(_block, '');
      }
      return body;
    }
  }, {
    key: "attendance",
    get: function get() {
      var _this$event$attendees;
      return ((_this$event$attendees = this.event.attendees) === null || _this$event$attendees === void 0 || (_this$event$attendees = _this$event$attendees.filter(function (_) {
        return _.checked_in;
      })) === null || _this$event$attendees === void 0 ? void 0 : _this$event$attendees.length) || 0;
    }
  }, {
    key: "is_interested",
    get: function get() {
      return !!this.guest_details;
    }
  }, {
    key: "is_going",
    get: function get() {
      var _this$guest_details;
      return (_this$guest_details = this.guest_details) === null || _this$guest_details === void 0 ? void 0 : _this$guest_details.checked_in;
    }
  }, {
    key: "system_id",
    get: function get() {
      var _this$space2;
      return (_this$space2 = this.space) === null || _this$space2 === void 0 ? void 0 : _this$space2.id;
    }
  }, {
    key: "guest_details",
    get: function get() {
      var _this$event$attendees2;
      var user = (0, common_1.currentUser)();
      return (_this$event$attendees2 = this.event.attendees) === null || _this$event$attendees2 === void 0 ? void 0 : _this$event$attendees2.find(function (_) {
        return _.email === user.email;
      });
    }
  }, {
    key: "group_event_calendar",
    get: function get() {
      return this._settings.get('app.group_events_calendar');
    }
  }, {
    key: "ngOnInit",
    value: function () {
      var _ngOnInit = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
        var _this = this,
          _this$event$extension2,
          _this$space3,
          _this$space4;
        var space_pipe, resource, map_id, id, zones;
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              space_pipe = new space_pipe_1.SpacePipe(this._org);
              resource = this.event.resources.find(function (_) {
                return _.email !== _this.group_event_calendar;
              });
              _context.next = 4;
              return space_pipe.transform((resource === null || resource === void 0 ? void 0 : resource.id) || (resource === null || resource === void 0 ? void 0 : resource.email));
            case 4:
              this.space = _context.sent;
              map_id = (_this$event$extension2 = this.event.extension_data) === null || _this$event$extension2 === void 0 ? void 0 : _this$event$extension2.map_id;
              id = ((_this$space3 = this.space) === null || _this$space3 === void 0 ? void 0 : _this$space3.map_id) || map_id;
              if (id) {
                this.styles["#".concat(id)] = {
                  fill: 'green'
                };
                this.features = [{
                  location: id,
                  content: components_1.MapPinComponent,
                  data: {}
                }];
              }
              zones = ((_this$space4 = this.space) === null || _this$space4 === void 0 ? void 0 : _this$space4.zones) || [];
              this.level = this._org.levelWithID(zones);
              this.building = this._org.buildings.find(function (_) {
                return zones.includes(_.id);
              }) || this._org.building;
              this.locate = map_id || '';
              this.raw_description = this.removeHtmlTags(this.event.body);
            case 13:
            case "end":
              return _context.stop();
          }
        }, _callee, this);
      }));
      function ngOnInit() {
        return _ngOnInit.apply(this, arguments);
      }
      return ngOnInit;
    }()
  }, {
    key: "removeHtmlTags",
    value: function removeHtmlTags(html) {
      var doc = new DOMParser().parseFromString(html, 'text/html');
      return (doc.body.textContent || '').trim();
    }
  }, {
    key: "viewLocation",
    value: function viewLocation() {
      var _this$space5,
        _this2 = this;
      if (!((_this$space5 = this.space) !== null && _this$space5 !== void 0 && _this$space5.map_id)) {
        return (0, common_1.notifyInfo)('Unable to locate space on map.');
      }
      this.showing_map = true;
      var ref = this._dialog.open(components_1.MapLocateModalComponent, {
        maxWidth: '95vw',
        maxHeight: '95vh',
        data: {
          item: this.space
        }
      });
      ref.afterClosed().subscribe(function () {
        _this2.showing_map = false;
      });
    }
  }, {
    key: "toggleInterest",
    value: function () {
      var _toggleInterest = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {
        var user, _this$event$system, _this$event$system2;
        return _regeneratorRuntime().wrap(function _callee2$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              user = this.guest_details;
              if (!(this.is_interested && user)) {
                _context2.next = 7;
                break;
              }
              _context2.next = 4;
              return (0, events_fn_1.removeEventGuest)(this.event.id, (0, common_1.currentUser)(), {
                system_id: (_this$event$system = this.event.system) === null || _this$event$system === void 0 ? void 0 : _this$event$system.id
              }).toPromise();
            case 4:
              this.event.attendees = (this.event.attendees || []).filter(function (_) {
                return _.email !== user.email;
              });
              _context2.next = 11;
              break;
            case 7:
              _context2.next = 9;
              return (0, events_fn_1.addEventGuest)(this.event.id, (0, common_1.currentUser)(), {
                system_id: (_this$event$system2 = this.event.system) === null || _this$event$system2 === void 0 ? void 0 : _this$event$system2.id
              }).toPromise();
            case 9:
              user = _context2.sent;
              this.event.attendees = (0, common_1.unique)([].concat(_toConsumableArray(this.event.attendees || []), [user]), 'email');
            case 11:
            case "end":
              return _context2.stop();
          }
        }, _callee2, this);
      }));
      function toggleInterest() {
        return _toggleInterest.apply(this, arguments);
      }
      return toggleInterest;
    }()
  }, {
    key: "toggleAttendance",
    value: function () {
      var _toggleAttendance = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {
        var _this$event$system4;
        var user, _this$event$system3, guest;
        return _regeneratorRuntime().wrap(function _callee3$(_context3) {
          while (1) switch (_context3.prev = _context3.next) {
            case 0:
              user = this.guest_details;
              if (user) {
                _context3.next = 6;
                break;
              }
              _context3.next = 4;
              return (0, events_fn_1.addEventGuest)(this.event.id, (0, common_1.currentUser)(), {
                system_id: (_this$event$system3 = this.event.system) === null || _this$event$system3 === void 0 ? void 0 : _this$event$system3.id
              }).toPromise();
            case 4:
              user = _context3.sent;
              this.event.attendees = (0, common_1.unique)([].concat(_toConsumableArray(this.event.attendees || []), [user]), 'email');
            case 6:
              user = _objectSpread(_objectSpread({}, (0, common_1.currentUser)()), user || {});
              if (user.email) {
                _context3.next = 9;
                break;
              }
              return _context3.abrupt("return");
            case 9:
              _context3.next = 11;
              return (0, events_fn_1.checkinEventGuest)(this.event.id, user.email, !this.is_going, {
                system_id: (_this$event$system4 = this.event.system) === null || _this$event$system4 === void 0 ? void 0 : _this$event$system4.id
              }).toPromise();
            case 11:
              guest = this.event.attendees.find(function (_) {
                return _.email === user.email;
              });
              if (guest) {
                _context3.next = 14;
                break;
              }
              return _context3.abrupt("return");
            case 14:
              guest.checked_in = !this.is_going;
            case 15:
            case "end":
              return _context3.stop();
          }
        }, _callee3, this);
      }));
      function toggleAttendance() {
        return _toggleAttendance.apply(this, arguments);
      }
      return toggleAttendance;
    }()
  }]);
}();
_GroupEventDetailsModalComponent = GroupEventDetailsModalComponent;
_GroupEventDetailsModalComponent.ɵfac = function GroupEventDetailsModalComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _GroupEventDetailsModalComponent)(i0.ɵɵdirectiveInject(dialog_1.MAT_DIALOG_DATA), i0.ɵɵdirectiveInject(i1.OrganisationService), i0.ɵɵdirectiveInject(i2.SettingsService), i0.ɵɵdirectiveInject(i3.MatDialog), i0.ɵɵdirectiveInject(i3.MatDialogRef));
};
_GroupEventDetailsModalComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _GroupEventDetailsModalComponent,
  selectors: [["group-event-details-modal"]],
  outputs: {
    edit: "edit",
    remove: "remove"
  },
  decls: 101,
  vars: 38,
  consts: [["concierge_menu", "matMenu"], ["menu", "matMenu"], [1, "relative", "w-[48rem]", "max-w-[calc(100vw-1rem)]", "max-h-[80vh]", "overflow-hidden"], [1, "relative", "flex", "items-center", "justify-between", "h-52", "w-full", "bg-base-200", "overflow-hidden"], ["auth", "", "class", "absolute top-1/2 left-1/2 min-h-full min-w-full object-cover -translate-x-1/2 -translate-y-1/2", 3, "source", 4, "ngIf"], ["class", "absolute top-0 left-0 rounded-br py-2 pl-2 pr-4 space-x-2 bg-info text-info-content flex items-center text-sm", 4, "ngIf"], ["icon", "", "mat-dialog-close", "", 1, "absolute", "top-1", "right-1", "overflow-hidden"], [1, "absolute", "inset-0", "bg-base-100", "opacity-30", "z-0"], [1, "z-10"], [1, "flex", "items-center", "justify-between", "py-4", "px-8", "border-b", "border-base-200"], [1, "text-left", "text-xl"], [1, "flex", "items-center", "space-x-2"], [4, "ngIf"], ["btn", "", "matRipple", "", 1, "clear", "bg-base-200", "text-base-content", "w-[2.75rem]", 3, "disabled", "matMenuTriggerFor"], [1, "text-2xl"], ["mat-menu-item", "", 3, "disabled"], [1, "mr-2"], ["mat-menu-item", "", "mat-dialog-close", "", 3, "click"], ["mat-menu-item", "", 3, "click"], [1, "text-2xl", "text-error"], ["mat-menu-item", "", 1, "flex", "items-center", "space-x-2", 3, "click"], [1, "flex", "flex-1", "max-h-[calc(80vh-18rem)]", "overflow-y-auto", "overflow-x-hidden", "p-8", "space-x-6"], [1, "flex", "flex-1", "flex-col", "space-y-2", "w-1/3"], [1, "flex", "items-center", "space-x-4"], [1, "flex", "items-center", "justify-center", "w-10", "h-10", "bg-base-200", "rounded-full"], [1, "font-medium", "pt-4"], [1, "flex", "flex-col"], [1, "text-sm"], [1, "text-sm", "opacity-30"], [1, "flex", "flex-col", "text-sm"], ["class", "opacity-30", 4, "ngIf"], ["matRipple", "", 1, "flex", "items-center", "space-x-4", "rounded", "min-h-12", 3, "click"], [1, "text-sm", "pb-4"], ["event-details", "", 3, "innerHTML"], ["class", "flex w-[20rem]", 4, "ngIf"], ["class", "absolute inset-0 z-50", 4, "ngIf"], ["auth", "", 1, "absolute", "top-1/2", "left-1/2", "min-h-full", "min-w-full", "object-cover", "-translate-x-1/2", "-translate-y-1/2", 3, "source"], [1, "absolute", "top-0", "left-0", "rounded-br", "py-2", "pl-2", "pr-4", "space-x-2", "bg-info", "text-info-content", "flex", "items-center", "text-sm"], [1, "text-base"], [1, "uppercase"], ["btn", "", 1, "flex", "items-center", "px-4", "h-10", "rounded", "space-x-2"], [1, "pr-2"], [1, "opacity-30"], [1, "flex", "w-[20rem]"], [1, "border", "border-base-300", "w-full"], ["matRipple", "", 1, "relative", "w-full", "h-40", "bg-base-200", 3, "click"], [3, "src", "features", "styles", 4, "ngIf"], [1, "p-4", "space-y-2"], [1, "opacity-30", "text-sm", "!mt-0"], ["class", "opacity-30 mt-4", "target", "_blank", "rel", "noopener noreferrer", 3, "underline", "href", 4, "ngIf"], [3, "src", "features", "styles"], ["target", "_blank", "rel", "noopener noreferrer", 1, "opacity-30", "mt-4", 3, "href"], [1, "absolute", "inset-0", "z-50"], [1, "absolute", "inset-0", "bg-base-content", "opacity-60", 3, "click"], [1, "absolute", "left-1/2", "-translate-x-1/2", "w-[24rem]", "inset-y-8", "rounded", "shadow", "overflow-hidden"], [3, "click", "show_host", "list", "host"]],
  template: function GroupEventDetailsModalComponent_Template(rf, ctx) {
    if (rf & 1) {
      var _r1 = i0.ɵɵgetCurrentView();
      i0.ɵɵelementStart(0, "div", 2)(1, "div", 3);
      i0.ɵɵtemplate(2, GroupEventDetailsModalComponent_img_2_Template, 1, 1, "img", 4);
      i0.ɵɵelementEnd();
      i0.ɵɵtemplate(3, GroupEventDetailsModalComponent_div_3_Template, 5, 0, "div", 5);
      i0.ɵɵelementStart(4, "button", 6);
      i0.ɵɵelement(5, "div", 7);
      i0.ɵɵelementStart(6, "app-icon", 8);
      i0.ɵɵtext(7, "close");
      i0.ɵɵelementEnd()();
      i0.ɵɵelementStart(8, "div", 9)(9, "h3", 10);
      i0.ɵɵtext(10);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(11, "div", 11);
      i0.ɵɵtemplate(12, GroupEventDetailsModalComponent_ng_container_12_Template, 11, 26, "ng-container", 12);
      i0.ɵɵelementStart(13, "button", 13)(14, "app-icon", 14);
      i0.ɵɵtext(15, "more_horiz");
      i0.ɵɵelementEnd()();
      i0.ɵɵelementStart(16, "mat-menu", null, 0)(18, "button", 15)(19, "div", 11)(20, "app-icon", 14);
      i0.ɵɵtext(21, " confirmation_number ");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(22, "div", 16);
      i0.ɵɵtext(23, "Promote Event");
      i0.ɵɵelementEnd()()();
      i0.ɵɵelementStart(24, "button", 17);
      i0.ɵɵlistener("click", function GroupEventDetailsModalComponent_Template_button_click_24_listener() {
        i0.ɵɵrestoreView(_r1);
        return i0.ɵɵresetView(ctx.edit.emit());
      });
      i0.ɵɵelementStart(25, "div", 11)(26, "app-icon", 14);
      i0.ɵɵtext(27, "edit");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(28, "div", 16);
      i0.ɵɵtext(29, "Edit Event");
      i0.ɵɵelementEnd()()();
      i0.ɵɵelementStart(30, "button", 15)(31, "div", 11)(32, "app-icon", 14);
      i0.ɵɵtext(33, "content_copy");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(34, "div", 16);
      i0.ɵɵtext(35, "Copy URL");
      i0.ɵɵelementEnd()()();
      i0.ɵɵelementStart(36, "button", 18);
      i0.ɵɵlistener("click", function GroupEventDetailsModalComponent_Template_button_click_36_listener() {
        i0.ɵɵrestoreView(_r1);
        return i0.ɵɵresetView(ctx.remove.emit());
      });
      i0.ɵɵelementStart(37, "div", 11)(38, "app-icon", 19);
      i0.ɵɵtext(39, " delete ");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(40, "div", 16);
      i0.ɵɵtext(41, "Delete Event");
      i0.ɵɵelementEnd()()()();
      i0.ɵɵelementStart(42, "mat-menu", null, 1)(44, "button", 20);
      i0.ɵɵlistener("click", function GroupEventDetailsModalComponent_Template_button_click_44_listener() {
        i0.ɵɵrestoreView(_r1);
        return i0.ɵɵresetView(ctx.toggleInterest());
      });
      i0.ɵɵelementStart(45, "div", 11)(46, "app-icon");
      i0.ɵɵtext(47, " star ");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(48, "span");
      i0.ɵɵtext(49);
      i0.ɵɵelementEnd()()();
      i0.ɵɵelementStart(50, "button", 18);
      i0.ɵɵlistener("click", function GroupEventDetailsModalComponent_Template_button_click_50_listener() {
        i0.ɵɵrestoreView(_r1);
        return i0.ɵɵresetView(ctx.toggleAttendance());
      });
      i0.ɵɵelementStart(51, "div", 11)(52, "app-icon");
      i0.ɵɵtext(53, " help ");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(54, "span");
      i0.ɵɵtext(55);
      i0.ɵɵelementEnd()()()()()();
      i0.ɵɵelementStart(56, "div", 21)(57, "div", 22)(58, "div", 23)(59, "div", 24)(60, "app-icon");
      i0.ɵɵtext(61, "person");
      i0.ɵɵelementEnd()();
      i0.ɵɵelementStart(62, "div");
      i0.ɵɵtext(63);
      i0.ɵɵelementEnd()();
      i0.ɵɵelementStart(64, "h3", 25);
      i0.ɵɵtext(65, "When and where");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(66, "div", 23)(67, "div", 24)(68, "app-icon");
      i0.ɵɵtext(69, "calendar_today");
      i0.ɵɵelementEnd()();
      i0.ɵɵelementStart(70, "div", 26)(71, "div", 27);
      i0.ɵɵtext(72, "Date and Time");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(73, "div", 28);
      i0.ɵɵtext(74);
      i0.ɵɵpipe(75, "date");
      i0.ɵɵpipe(76, "date");
      i0.ɵɵpipe(77, "date");
      i0.ɵɵelementEnd()()();
      i0.ɵɵelementStart(78, "div", 23)(79, "div", 24)(80, "app-icon");
      i0.ɵɵtext(81, "place");
      i0.ɵɵelementEnd()();
      i0.ɵɵelementStart(82, "div", 29);
      i0.ɵɵtemplate(83, GroupEventDetailsModalComponent_div_83_Template, 4, 5, "div", 12)(84, GroupEventDetailsModalComponent_div_84_Template, 2, 0, "div", 30)(85, GroupEventDetailsModalComponent_div_85_Template, 2, 1, "div", 30);
      i0.ɵɵelementEnd()();
      i0.ɵɵelementStart(86, "button", 31);
      i0.ɵɵlistener("click", function GroupEventDetailsModalComponent_Template_button_click_86_listener() {
        i0.ɵɵrestoreView(_r1);
        return i0.ɵɵresetView(ctx.show_attendees = true);
      });
      i0.ɵɵelementStart(87, "div", 24)(88, "app-icon");
      i0.ɵɵtext(89, "person");
      i0.ɵɵelementEnd()();
      i0.ɵɵelementStart(90, "div");
      i0.ɵɵtext(91);
      i0.ɵɵelementEnd()();
      i0.ɵɵelementStart(92, "h3", 25);
      i0.ɵɵtext(93, "About this event");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(94, "div", 32);
      i0.ɵɵelement(95, "span", 33);
      i0.ɵɵpipe(96, "sanitize");
      i0.ɵɵtemplate(97, GroupEventDetailsModalComponent_span_97_Template, 2, 0, "span", 30);
      i0.ɵɵelementEnd()();
      i0.ɵɵelementStart(98, "div");
      i0.ɵɵtemplate(99, GroupEventDetailsModalComponent_div_99_Template, 11, 6, "div", 34);
      i0.ɵɵelementEnd()()();
      i0.ɵɵtemplate(100, GroupEventDetailsModalComponent_div_100_Template, 4, 3, "div", 35);
    }
    if (rf & 2) {
      var concierge_menu_r5 = i0.ɵɵreference(17);
      var menu_r6 = i0.ɵɵreference(43);
      i0.ɵɵadvance(2);
      i0.ɵɵproperty("ngIf", ctx.event.extension_data == null ? null : ctx.event.extension_data.images == null ? null : ctx.event.extension_data.images.length);
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", ctx.featured);
      i0.ɵɵadvance(7);
      i0.ɵɵtextInterpolate1(" ", ctx.event.title, " ");
      i0.ɵɵadvance(2);
      i0.ɵɵproperty("ngIf", !ctx.concierge);
      i0.ɵɵadvance();
      i0.ɵɵproperty("disabled", ctx.event.state === "done")("matMenuTriggerFor", ctx.concierge ? concierge_menu_r5 : menu_r6);
      i0.ɵɵadvance(5);
      i0.ɵɵproperty("disabled", true);
      i0.ɵɵadvance(12);
      i0.ɵɵproperty("disabled", true);
      i0.ɵɵadvance(16);
      i0.ɵɵclassProp("text-error", ctx.is_interested);
      i0.ɵɵadvance(3);
      i0.ɵɵtextInterpolate1(" ", ctx.is_interested ? "Revoke" : "Indicate", " Interest ");
      i0.ɵɵadvance(3);
      i0.ɵɵclassProp("text-error", ctx.is_going);
      i0.ɵɵadvance(3);
      i0.ɵɵtextInterpolate1(" ", ctx.is_going ? "Revoke" : "Indicate", " Going ");
      i0.ɵɵadvance(8);
      i0.ɵɵtextInterpolate1(" Event by ", (ctx.event.organiser == null ? null : ctx.event.organiser.name) || ctx.event.host, " ");
      i0.ɵɵadvance(11);
      i0.ɵɵtextInterpolate3(" ", i0.ɵɵpipeBind2(75, 27, ctx.event.date, "EEEE, d MMMM, yyyy"), " . ", i0.ɵɵpipeBind2(76, 30, ctx.event.date, ctx.time_format), " - ", i0.ɵɵpipeBind2(77, 33, ctx.event.date + ctx.event.duration * 60 * 1000, ctx.time_format), " ");
      i0.ɵɵadvance(9);
      i0.ɵɵproperty("ngIf", ctx.is_onsite && ctx.has_space);
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", ctx.is_onsite && !ctx.has_space);
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", ctx.is_online);
      i0.ɵɵadvance(6);
      i0.ɵɵtextInterpolate2(" ", ctx.attendance, " going, ", ctx.event.attendees == null ? null : ctx.event.attendees.length, " interested ");
      i0.ɵɵadvance(4);
      i0.ɵɵproperty("innerHTML", i0.ɵɵpipeBind1(96, 36, ctx.body), i0.ɵɵsanitizeHtml);
      i0.ɵɵadvance(2);
      i0.ɵɵproperty("ngIf", !ctx.raw_description.trim());
      i0.ɵɵadvance(2);
      i0.ɵɵproperty("ngIf", ctx.level);
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", ctx.show_attendees);
    }
  }
});
exports.GroupEventDetailsModalComponent = GroupEventDetailsModalComponent;

/***/ }),

/***/ 37420:
/*!****************************************!*\
  !*** ./libs/events/src/lib/helpers.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _createForOfIteratorHelper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createForOfIteratorHelper.js */ 36350)["default"]);
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.eventStatus = eventStatus;
exports.parseRecurrence = parseRecurrence;
exports.formatRecurrence = formatRecurrence;
exports.getFreeTimeSlots = getFreeTimeSlots;
exports.periodInFreeTimeSlot = periodInFreeTimeSlot;
exports.getNextFreeTimeSlot = getNextFreeTimeSlot;
var date_fns_1 = __webpack_require__(/*! date-fns */ 25773);
var DAYS_OF_WEEK = ['sunday', 'monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday'];
function eventStatus(details) {
  var _details$resources;
  if (details.status === 'cancelled') return 'declined';
  if ((_details$resources = details.resources) !== null && _details$resources !== void 0 && _details$resources.length) {
    if (details.resources.every(function (i) {
      return i.response_status === 'accepted' || details.approved;
    })) {
      return 'approved';
    } else if (details.resources.some(function (i) {
      return i.response_status === 'tentative' || i.response_status === 'needsAction';
    })) {
      return 'tentative';
    }
    return 'declined';
  }
  return 'approved';
}
function parseRecurrence(data) {
  var _data$days_of_week;
  var start = data.start || data.range_start * 1000;
  var end = data.end || data.range_end;
  if (data.occurrences > 1) {
    switch (data.pattern) {
      case 'daily':
        end = (0, date_fns_1.addDays)(start || Date.now(), (data.occurrences - 1) * data.interval).valueOf();
        break;
      case 'weekly':
        end = (0, date_fns_1.addWeeks)(start || Date.now(), (data.occurrences - 1) * data.interval).valueOf();
        break;
      case 'month_day':
      case 'monthly':
        end = (0, date_fns_1.addMonths)(start || Date.now(), (data.occurrences - 1) * data.interval).valueOf();
        end = (0, date_fns_1.addDays)(end, 7).valueOf();
        break;
      case 'yearly':
        end = (0, date_fns_1.addYears)(start || Date.now(), (data.occurrences - 1) * data.interval).valueOf();
        break;
    }
  }
  return {
    range_start: (0, date_fns_1.getUnixTime)((0, date_fns_1.startOfDay)(start)),
    range_end: (0, date_fns_1.getUnixTime)((0, date_fns_1.endOfDay)(end)),
    interval: data.interval,
    pattern: data.pattern,
    days_of_week: ((_data$days_of_week = data.days_of_week) === null || _data$days_of_week === void 0 ? void 0 : _data$days_of_week.map(function (_) {
      return typeof _ === 'number' ? DAYS_OF_WEEK[_] : _;
    })) || []
  };
}
function formatRecurrence(_ref) {
  var interval = _ref.interval,
    pattern = _ref.pattern,
    start = _ref.start,
    end = _ref.end,
    occurrences = _ref.occurrences;
  var details = '';
  if (interval) {
    switch (pattern) {
      case 'daily':
        details = details.concat(interval > 1 ? "Every ".concat(interval, " days") : 'Daily');
        if (occurrences > 1) end = (0, date_fns_1.addDays)(start || Date.now(), (occurrences - 1) * interval).valueOf();
        break;
      case 'weekly':
        details = details.concat(interval > 1 ? "Every ".concat(interval, " weeks") : 'Weekly');
        if (occurrences > 1) end = (0, date_fns_1.addWeeks)(start || Date.now(), (occurrences - 1) * interval).valueOf();
        break;
      case 'month_day':
      case 'monthly':
        details = details.concat(interval > 1 ? "Every ".concat(interval, " months") : 'Monthly');
        if (occurrences > 1) end = (0, date_fns_1.addMonths)(start || Date.now(), (occurrences - 1) * interval).valueOf();
        break;
      case 'yearly':
        details = details.concat(interval > 1 ? "Every ".concat(interval, " yeats") : 'Yearly');
        if (occurrences > 1) end = (0, date_fns_1.addYears)(start || Date.now(), (occurrences - 1) * interval).valueOf();
        break;
    }
    if (occurrences >= 1) {
      details = details.concat(", until ".concat((0, date_fns_1.format)(end, 'MMM do, yyyy')));
    }
  }
  return details;
}
/**
 * Generate a list of free time slots between the given bookings
 * @param list List of bookings to find slots between
 * @param min_size Minimum length of a free slot in minutes
 */
function getFreeTimeSlots(list) {
  var min_size = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 29;
  var start = new Date(0);
  var slots = [];
  list.sort(function (a, b) {
    return a.date - b.date;
  });
  var _iterator = _createForOfIteratorHelper(list),
    _step;
  try {
    for (_iterator.s(); !(_step = _iterator.n()).done;) {
      var _booking$extension_da, _booking$extension_da2;
      var booking = _step.value;
      var bkn_start = new Date((0, date_fns_1.addMinutes)(booking.date, -((_booking$extension_da = booking.extension_data) === null || _booking$extension_da === void 0 ? void 0 : _booking$extension_da.setup_time) || 0));
      var bkn_end = (0, date_fns_1.addMinutes)(booking.date, booking.duration + (((_booking$extension_da2 = booking.extension_data) === null || _booking$extension_da2 === void 0 ? void 0 : _booking$extension_da2.breakdown_time) || 0));
      if ((0, date_fns_1.isAfter)(booking.date, start)) {
        var diff = Math.abs((0, date_fns_1.differenceInMinutes)(bkn_start, start));
        if (diff >= min_size) {
          slots.push({
            start: start.valueOf(),
            end: booking.date
          });
        }
        start = bkn_end;
      } else if ((0, date_fns_1.isSameMinute)(start, booking.date)) {
        start = bkn_end;
      }
    }
  } catch (err) {
    _iterator.e(err);
  } finally {
    _iterator.f();
  }
  var s = start.valueOf();
  slots.push({
    start: s,
    end: (s ? s : Date.now()) * 10
  });
  return slots;
}
function periodInFreeTimeSlot(start, end, list) {
  var min_size = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 29;
  var blocks = getFreeTimeSlots(list, min_size);
  var _iterator2 = _createForOfIteratorHelper(blocks),
    _step2;
  try {
    for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
      var blk = _step2.value;
      if (start >= blk.start && start < blk.end && end > blk.start && end <= blk.end) {
        return true;
      }
    }
  } catch (err) {
    _iterator2.e(err);
  } finally {
    _iterator2.f();
  }
  return false;
}
/**
 * Get the next free time slot from the given bookings
 * @param list List of bookings to find the next slot
 * @param date Date to find next slot after in ms since UTC epoch
 * @param min_size Minimum length of the free slot in minutes
 */
function getNextFreeTimeSlot(list) {
  var date = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : new Date().valueOf();
  var min_size = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 29;
  var slots = getFreeTimeSlots(list, min_size);
  var time = (0, date_fns_1.addSeconds)((0, date_fns_1.startOfMinute)(date), 1);
  var _iterator3 = _createForOfIteratorHelper(slots),
    _step3;
  try {
    for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {
      var block = _step3.value;
      if ((0, date_fns_1.isAfter)(block.start, time)) {
        return block;
      } else if ((0, date_fns_1.isBefore)(time, block.end)) {
        var duration = (0, date_fns_1.differenceInMinutes)(block.end, time);
        if (duration >= min_size) return block;
      }
    }
  } catch (err) {
    _iterator3.e(err);
  } finally {
    _iterator3.f();
  }
  return slots[slots.length - 1];
}

/***/ }),

/***/ 50711:
/*!****************************************************************!*\
  !*** ./libs/events/src/lib/setup-breakdown-modal.component.ts ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _regeneratorRuntime = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/regeneratorRuntime.js */ 8698)["default"]);
var _objectSpread = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/objectSpread2.js */ 34092)["default"]);
var _asyncToGenerator = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/asyncToGenerator.js */ 95386)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _SetupBreakdownModalComponent;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.SetupBreakdownModalComponent = void 0;
var forms_1 = __webpack_require__(/*! @angular/forms */ 34456);
var dialog_1 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var event_class_1 = __webpack_require__(/*! ./event.class */ 6727);
var events_fn_1 = __webpack_require__(/*! ./events.fn */ 51416);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var i2 = __webpack_require__(/*! ./event.class */ 6727);
var _c0 = function _c0() {
  return [5, 10];
};
function SetupBreakdownModalComponent_button_3_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "button", 5)(1, "app-icon");
    i0.ɵɵtext(2, "close");
    i0.ɵɵelementEnd()();
  }
}
function SetupBreakdownModalComponent_main_4_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "main", 6)(1, "div", 7)(2, "label", 8);
    i0.ɵɵtext(3, "Setup Duration");
    i0.ɵɵelementEnd();
    i0.ɵɵelement(4, "a-duration-field", 9);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(5, "div", 7)(6, "label", 10);
    i0.ɵɵtext(7, "Breakdown Duration");
    i0.ɵɵelementEnd();
    i0.ɵɵelement(8, "a-duration-field", 11);
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var ctx_r0 = i0.ɵɵnextContext();
    i0.ɵɵproperty("formGroup", ctx_r0.form);
    i0.ɵɵadvance(4);
    i0.ɵɵproperty("min", 0)("custom_options", i0.ɵɵpureFunction0(5, _c0));
    i0.ɵɵadvance(4);
    i0.ɵɵproperty("min", 0)("custom_options", i0.ɵɵpureFunction0(6, _c0));
  }
}
function SetupBreakdownModalComponent_footer_5_Template(rf, ctx) {
  if (rf & 1) {
    var _r2 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "footer", 12)(1, "button", 13);
    i0.ɵɵlistener("click", function SetupBreakdownModalComponent_footer_5_Template_button_click_1_listener() {
      i0.ɵɵrestoreView(_r2);
      var ctx_r0 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r0.save());
    });
    i0.ɵɵtext(2, "Save Changes");
    i0.ɵɵelementEnd()();
  }
}
function SetupBreakdownModalComponent_ng_template_6_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 14);
    i0.ɵɵelement(1, "mat-spinner", 15);
    i0.ɵɵelementStart(2, "p", 16);
    i0.ɵɵtext(3, " Saving setup and breakdown durations... ");
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    i0.ɵɵadvance();
    i0.ɵɵproperty("diameter", 32);
  }
}
var SetupBreakdownModalComponent = /*#__PURE__*/function () {
  function SetupBreakdownModalComponent(_event, _dialog_ref) {
    _classCallCheck(this, SetupBreakdownModalComponent);
    this._event = _event;
    this._dialog_ref = _dialog_ref;
    this.loading = false;
    this.form = new forms_1.FormGroup({
      setup: new forms_1.FormControl(this._event.setup_time || 0),
      breakdown: new forms_1.FormControl(this._event.breakdown_time || 0)
    });
  }
  return _createClass(SetupBreakdownModalComponent, [{
    key: "save",
    value: function () {
      var _save = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
        var _this$_event2, _this$_event3, _this$_event4;
        var _this$_event, host, creator, query, event;
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              this.loading = true;
              this._dialog_ref.disableClose = true;
              _this$_event = this._event, host = _this$_event.host, creator = _this$_event.creator;
              query = {
                system_id: ((_this$_event2 = this._event) === null || _this$_event2 === void 0 || (_this$_event2 = _this$_event2.resources[0]) === null || _this$_event2 === void 0 ? void 0 : _this$_event2.id) || ((_this$_event3 = this._event) === null || _this$_event3 === void 0 || (_this$_event3 = _this$_event3.system) === null || _this$_event3 === void 0 ? void 0 : _this$_event3.id),
                ical_uid: (_this$_event4 = this._event) === null || _this$_event4 === void 0 ? void 0 : _this$_event4.ical_uid
              };
              _context.next = 6;
              return (0, events_fn_1.saveEvent)(new event_class_1.CalendarEvent(_objectSpread(_objectSpread({}, this._event), {}, {
                setup_time: this.form.value.setup,
                breakdown_time: this.form.value.breakdown
              })).toJSON(), query).toPromise()["catch"](function (_) {
                return null;
              });
            case 6:
              event = _context.sent;
              if (event) {
                _context.next = 11;
                break;
              }
              _context.next = 10;
              return (0, events_fn_1.updateEventMetadata)(this._event.id, query.system_id, _objectSpread(_objectSpread({}, this._event.extension_data), {}, {
                setup_time: this.form.value.setup,
                breakdown_time: this.form.value.breakdown,
                setup: this.form.value.setup,
                breakdown: this.form.value.breakdown
              })).toPromise()["catch"](function (_) {
                return null;
              });
            case 10:
              event = _context.sent;
            case 11:
              if (event) {
                _context.next = 16;
                break;
              }
              this.loading = false;
              this._dialog_ref.disableClose = false;
              (0, common_1.notifyError)("Error updating setup and breakdown.");
              return _context.abrupt("return");
            case 16:
              (0, common_1.notifySuccess)('Succesfully updated setup and breakdown period.');
              this._dialog_ref.disableClose = false;
              this.loading = false;
              this._dialog_ref.close(event);
            case 20:
            case "end":
              return _context.stop();
          }
        }, _callee, this);
      }));
      function save() {
        return _save.apply(this, arguments);
      }
      return save;
    }()
  }]);
}();
_SetupBreakdownModalComponent = SetupBreakdownModalComponent;
_SetupBreakdownModalComponent.ɵfac = function SetupBreakdownModalComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _SetupBreakdownModalComponent)(i0.ɵɵdirectiveInject(dialog_1.MAT_DIALOG_DATA), i0.ɵɵdirectiveInject(i1.MatDialogRef));
};
_SetupBreakdownModalComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _SetupBreakdownModalComponent,
  selectors: [["setup-breakdown-modal"]],
  decls: 8,
  vars: 4,
  consts: [["load_state", ""], [1, "space-x-4", "min-h-16"], ["btn", "", "icon", "", "mat-dialog-close", "", "matRipple", "", 4, "ngIf"], ["class", "p-4 min-w-[20rem] w-full", 3, "formGroup", 4, "ngIf", "ngIfElse"], ["class", "flex justify-end px-4 py-2 border-t border-base-200", 4, "ngIf"], ["btn", "", "icon", "", "mat-dialog-close", "", "matRipple", ""], [1, "p-4", "min-w-[20rem]", "w-full", 3, "formGroup"], [1, "flex", "flex-col", "space-y-2"], ["for", "setup"], ["name", "setup", "formControlName", "setup", 3, "min", "custom_options"], ["for", "breakdown"], ["name", "breakdown", "formControlName", "breakdown", 3, "min", "custom_options"], [1, "flex", "justify-end", "px-4", "py-2", "border-t", "border-base-200"], ["btn", "", "matRipple", "", 3, "click"], [1, "flex", "flex-col", "items-center", "justify-center", "h-64", "w-64"], [3, "diameter"], [1, "text-center", "p-4"]],
  template: function SetupBreakdownModalComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵelementStart(0, "header", 1)(1, "h2");
      i0.ɵɵtext(2, "Set Event's Setup and Breakdown");
      i0.ɵɵelementEnd();
      i0.ɵɵtemplate(3, SetupBreakdownModalComponent_button_3_Template, 3, 0, "button", 2);
      i0.ɵɵelementEnd();
      i0.ɵɵtemplate(4, SetupBreakdownModalComponent_main_4_Template, 9, 7, "main", 3)(5, SetupBreakdownModalComponent_footer_5_Template, 3, 0, "footer", 4)(6, SetupBreakdownModalComponent_ng_template_6_Template, 4, 1, "ng-template", null, 0, i0.ɵɵtemplateRefExtractor);
    }
    if (rf & 2) {
      var load_state_r3 = i0.ɵɵreference(7);
      i0.ɵɵadvance(3);
      i0.ɵɵproperty("ngIf", !ctx.loading);
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", !ctx.loading)("ngIfElse", load_state_r3);
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", !ctx.loading);
    }
  }
});
exports.SetupBreakdownModalComponent = SetupBreakdownModalComponent;

/***/ }),

/***/ 55049:
/*!******************************************!*\
  !*** ./libs/events/src/lib/utilities.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _objectSpread = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/objectSpread2.js */ 34092)["default"]);
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.generateEventForm = generateEventForm;
exports.setMockBookingStartDatetime = setMockBookingStartDatetime;
exports.statusFromBookings = statusFromBookings;
exports.replaceBookings = replaceBookings;
exports.newCalendarEventFromBooking = newCalendarEventFromBooking;
var forms_1 = __webpack_require__(/*! @angular/forms */ 34456);
var date_fns_1 = __webpack_require__(/*! date-fns */ 25773);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var event_class_1 = __webpack_require__(/*! ./event.class */ 6727);
var validators_1 = __webpack_require__(/*! ./validators */ 90690);
var helpers_1 = __webpack_require__(/*! ./helpers */ 37420);
var user_class_1 = __webpack_require__(/*! libs/users/src/lib/user.class */ 93693);
var BOOKING_DATE = (0, date_fns_1.add)((0, date_fns_1.setMinutes)((0, date_fns_1.setHours)(new Date(), 6), 0), {
  days: -1
});
var validateCateringField = function validateCateringField(catering_control) {
  return function (control) {
    var _catering_control$val;
    if ((_catering_control$val = catering_control.value) !== null && _catering_control$val !== void 0 && _catering_control$val.length && !control.value) {
      return {
        catering_field: 'Catering sub-fields are required'
      };
    }
    return null;
  };
};
function generateEventForm() {
  var _event$organiser, _ref, _ref2, _event$extension_data, _event$extension_data2, _event$extension_data3, _event$extension_data4, _event$extension_data5, _event$extension_data6, _event$extension_data7, _event$extension_data8, _event$extension_data9, _event$extension_data10, _event$extension_data11, _event$extension_data12, _event$extension_data13, _event$extension_data14, _event$extension_data15, _event$extension_data16;
  var event = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : new event_class_1.CalendarEvent();
  var settings = arguments.length > 1 ? arguments[1] : undefined;
  if (!event) event = new event_class_1.CalendarEvent();
  var form = new forms_1.FormGroup({
    id: new forms_1.FormControl(event.id),
    ical_uid: new forms_1.FormControl(event.ical_uid),
    host: new forms_1.FormControl(event.host || ((_event$organiser = event.organiser) === null || _event$organiser === void 0 ? void 0 : _event$organiser.email) || ((_ref = (0, common_1.currentUser)()) === null || _ref === void 0 ? void 0 : _ref.email) || '', [forms_1.Validators.required]),
    organiser: new forms_1.FormControl(event.organiser || new user_class_1.User({
      email: event.host || ''
    })),
    creator: new forms_1.FormControl(event.creator || ((_ref2 = (0, common_1.currentUser)()) === null || _ref2 === void 0 ? void 0 : _ref2.email)),
    calendar: new forms_1.FormControl(event.calendar),
    attendees: new forms_1.FormControl(event.attendees || []),
    resources: new forms_1.FormControl(event.resources || []),
    title: new forms_1.FormControl(event.title),
    body: new forms_1.FormControl(event.body),
    "private": new forms_1.FormControl(event["private"]),
    date: new forms_1.FormControl(event.date, [forms_1.Validators.required]),
    duration: new forms_1.FormControl(event.duration, [validators_1.endInFuture]),
    all_day: new forms_1.FormControl(event.all_day),
    date_end: new forms_1.FormControl(event.date_end),
    recurring: new forms_1.FormControl(event.recurring),
    recurrence: new forms_1.FormControl(event.recurrence),
    recurring_event_id: new forms_1.FormControl(event.recurring_event_id),
    master: new forms_1.FormControl(event.master),
    attachments: new forms_1.FormControl(event.attachments),
    catering: new forms_1.FormControl((_event$extension_data = event.extension_data) === null || _event$extension_data === void 0 ? void 0 : _event$extension_data.catering),
    catering_notes: new forms_1.FormControl(((_event$extension_data2 = event.extension_data) === null || _event$extension_data2 === void 0 || (_event$extension_data2 = _event$extension_data2.catering[0]) === null || _event$extension_data2 === void 0 ? void 0 : _event$extension_data2.notes) || ''),
    catering_charge_code: new forms_1.FormControl(((_event$extension_data3 = event.extension_data) === null || _event$extension_data3 === void 0 || (_event$extension_data3 = _event$extension_data3.catering[0]) === null || _event$extension_data3 === void 0 ? void 0 : _event$extension_data3.charge_code) || ''),
    setup_time: new forms_1.FormControl(event.setup_time || 0),
    breakdown_time: new forms_1.FormControl(event.breakdown_time || 0),
    assets: new forms_1.FormControl((_event$extension_data4 = event.extension_data) === null || _event$extension_data4 === void 0 ? void 0 : _event$extension_data4.assets),
    // has_catering: new FormControl(event.has_catering || false),
    visitor_type: new forms_1.FormControl((_event$extension_data5 = event.extension_data) === null || _event$extension_data5 === void 0 ? void 0 : _event$extension_data5.visitor_type),
    location: new forms_1.FormControl(event.location),
    needs_space: new forms_1.FormControl(true),
    needs_parking: new forms_1.FormControl(((_event$extension_data6 = event.extension_data) === null || _event$extension_data6 === void 0 ? void 0 : _event$extension_data6.needs_parking) || false),
    event_type: new forms_1.FormControl(((_event$extension_data7 = event.extension_data) === null || _event$extension_data7 === void 0 ? void 0 : _event$extension_data7.event_type) || ''),
    category: new forms_1.FormControl(((_event$extension_data8 = event.extension_data) === null || _event$extension_data8 === void 0 ? void 0 : _event$extension_data8.category) || ''),
    tags: new forms_1.FormControl(((_event$extension_data9 = event.extension_data) === null || _event$extension_data9 === void 0 ? void 0 : _event$extension_data9.tags) || []),
    update_master: new forms_1.FormControl(false),
    system: new forms_1.FormControl(event.system),
    attendance_type: new forms_1.FormControl(((_event$extension_data10 = event.extension_data) === null || _event$extension_data10 === void 0 ? void 0 : _event$extension_data10.attendance_type) || 'ONSITE'),
    timezone: new forms_1.FormControl(event.timezone || common_1.LOCAL_TIMEZONE),
    shared_event: new forms_1.FormControl(((_event$extension_data11 = event.extension_data) === null || _event$extension_data11 === void 0 ? void 0 : _event$extension_data11.shared_event) || false),
    view_access: new forms_1.FormControl(((_event$extension_data12 = event.extension_data) === null || _event$extension_data12 === void 0 ? void 0 : _event$extension_data12.view_access) || 'OPEN'),
    images: new forms_1.FormControl(((_event$extension_data13 = event.extension_data) === null || _event$extension_data13 === void 0 ? void 0 : _event$extension_data13.images) || []),
    featured: new forms_1.FormControl(((_event$extension_data14 = event.extension_data) === null || _event$extension_data14 === void 0 ? void 0 : _event$extension_data14.featured) || false),
    host_entity: new forms_1.FormControl(((_event$extension_data15 = event.extension_data) === null || _event$extension_data15 === void 0 ? void 0 : _event$extension_data15.host_entity) || ''),
    visitor_entity: new forms_1.FormControl(((_event$extension_data16 = event.extension_data) === null || _event$extension_data16 === void 0 ? void 0 : _event$extension_data16.visitor_entity) || '')
  });
  form.get('organiser').valueChanges.subscribe(function (o) {
    return form.controls.host.setValue(o === null || o === void 0 ? void 0 : o.email);
  });
  form.get('resources').valueChanges.subscribe(function (l) {
    form.controls.system.setValue(l !== null && l !== void 0 && l.length ? l[0] : null);
    form.controls.assets[l !== null && l !== void 0 && l.length ? 'enable' : 'disable']();
  });
  var setCateringTime = function setCateringTime() {
    var _form$value$catering;
    if (!((_form$value$catering = form.value.catering) !== null && _form$value$catering !== void 0 && _form$value$catering.length) || !form.getRawValue().date) return;
    form.patchValue({
      catering: form.value.catering.map(function (order) {
        return _objectSpread(_objectSpread({}, order), {}, {
          event: {
            date: form.value.all_day ? (0, date_fns_1.startOfDay)(form.getRawValue().date) : form.getRawValue().date,
            duration: form.value.all_day ? 24 * 60 : form.value.duration
          }
        });
      })
    }, {
      emitEvent: false
    });
  };
  form.valueChanges.subscribe(function (v) {
    if (form.getRawValue().date < Date.now() && form.value.id) {
      var _form$get;
      (_form$get = form.get('date')) === null || _form$get === void 0 || _form$get.disable({
        emitEvent: false
      });
    } else {
      var _form$get2;
      (_form$get2 = form.get('date')) === null || _form$get2 === void 0 || _form$get2.enable({
        emitEvent: false
      });
    }
    if (v.date || v.duration || v.all_day) setCateringTime();
  });
  form.controls.duration.valueChanges.subscribe(function (duration) {
    form.patchValue({
      date_end: (0, date_fns_1.roundToNearestMinutes)((0, date_fns_1.addMinutes)(form.getRawValue().date, duration), {
        nearestTo: 5,
        roundingMethod: 'ceil'
      }).valueOf()
    }, {
      emitEvent: false
    });
    setCateringTime();
  });
  form.controls.date_end.valueChanges.subscribe(function (date) {
    if (date < (0, date_fns_1.addMinutes)(form.getRawValue().date, 30).valueOf()) {
      form.patchValue({
        date_end: (0, date_fns_1.roundToNearestMinutes)((0, date_fns_1.addMinutes)(form.getRawValue().date, 30), {
          nearestTo: 5,
          roundingMethod: 'ceil'
        }).valueOf(),
        duration: 30
      }, {
        emitEvent: false
      });
    } else {
      form.patchValue({
        duration: (0, date_fns_1.differenceInMinutes)(date, form.getRawValue().date)
      }, {
        emitEvent: false
      });
    }
    setCateringTime();
  });
  form.controls.date.valueChanges.subscribe(function (date) {
    var _form$value$recurrenc, _form$value$recurrenc2;
    form.patchValue({
      date_end: (0, date_fns_1.roundToNearestMinutes)((0, date_fns_1.addMinutes)(date, form.value.duration), {
        nearestTo: 5,
        roundingMethod: 'ceil'
      }).valueOf()
    }, {
      emitEvent: false
    });
    if (date < Date.now() && !form.value.id) {
      form.patchValue({
        date: (0, date_fns_1.roundToNearestMinutes)(Date.now(), {
          nearestTo: 5,
          roundingMethod: 'ceil'
        }).valueOf()
      }, {
        emitEvent: false
      });
    }
    if (((_form$value$recurrenc = form.value.recurrence) === null || _form$value$recurrenc === void 0 ? void 0 : _form$value$recurrenc._pattern) !== 'custom_display' && ((_form$value$recurrenc2 = form.value.recurrence) === null || _form$value$recurrenc2 === void 0 ? void 0 : _form$value$recurrenc2._pattern) !== 'none') {
      form.patchValue({
        recurrence: _objectSpread(_objectSpread({}, form.value.recurrence), {}, {
          days_of_week: [new Date(date).getDay()]
        })
      });
    }
    setCateringTime();
  });
  form.controls.catering.valueChanges.subscribe(function (_) {
    var catering = form.getRawValue().catering || [];
    if (catering !== null && catering !== void 0 && catering.length && (settings !== null && settings !== void 0 && settings.get('app.events.catering_notes_required') || settings.value('require_catering_notes'))) {
      var _form$get3;
      (_form$get3 = form.get('catering_notes')) === null || _form$get3 === void 0 || _form$get3.setValidators([forms_1.Validators.required]);
      form.get('catering_notes').patchValue(form.value.catering_notes);
    } else {
      var _form$get4;
      (_form$get4 = form.get('catering_notes')) === null || _form$get4 === void 0 || _form$get4.clearValidators();
      form.get('catering_notes').setErrors(null);
    }
    form.updateValueAndValidity();
  });
  form.get('catering_charge_code').setValidators([validateCateringField(form.get('catering'))]);
  if (event.id) {
    form.get('host').disable();
    form.get('organiser').disable();
  }
  if (event.state === 'started') form.get('date').disable();
  return form;
}
/**
 * Set the initial time used for generating mock bookings
 * @param time New initial time as ms from UTC epoch
 */
function setMockBookingStartDatetime(time) {
  BOOKING_DATE = (0, date_fns_1.startOfMinute)(new Date(time));
}
/**
 * Get current status within bookings
 * @param bookings List of bookings
 * @param host Host of the new event
 * @param date Datetime of the new event
 */
function statusFromBookings(bookings, bookable, requestable) {
  var date = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : (0, date_fns_1.getTime)(new Date());
  var now = new Date(date);
  var next_free_slot = (0, helpers_1.getNextFreeTimeSlot)(bookings, date, 5);
  var start = new Date(next_free_slot.start);
  var end = new Date(next_free_slot.end);
  var currently_free = (0, common_1.timePeriodsIntersect)(date, date, next_free_slot.start, next_free_slot.end);
  var time_until_next_block = (0, date_fns_1.formatDuration)({
    minutes: currently_free ? (0, date_fns_1.differenceInMinutes)(end, now) : (0, date_fns_1.differenceInMinutes)(start, now)
  });
  var free_tomorrow = !currently_free && !(0, date_fns_1.isSameDay)(start, now);
  var free_today = currently_free && !(0, date_fns_1.isSameDay)(end, now);
  return {
    status: !bookable ? 'Not Bookable' : currently_free ? requestable ? 'Available by Request' : 'Available' : 'Meeting in Progress',
    available_until: free_today ? 'No meetings today' : currently_free ? "Free until ".concat((0, date_fns_1.format)(end, 'h:mm B'), "(").concat(time_until_next_block, ")") : free_tomorrow ? 'Unavailable today' : "Free at ".concat((0, date_fns_1.format)(start, 'h:mm B'), "(").concat(time_until_next_block, ")")
  };
}
function replaceBookings(list, new_bookings, filter_options) {
  var from = filter_options.from;
  var to = filter_options.to;
  var filtered_list = list.filter(function (booking) {
    var _booking$resources;
    var start = new Date(booking.date);
    var end = (0, date_fns_1.addMinutes)(start, booking.duration);
    return !((_booking$resources = booking.resources) !== null && _booking$resources !== void 0 && _booking$resources.find(function (space) {
      return space.email === filter_options.space;
    })) || !(0, common_1.timePeriodsIntersect)(from, to, start.valueOf(), end.valueOf());
  });
  var updated_list = filtered_list.concat(new_bookings);
  updated_list.sort(function (a, b) {
    return a.date - b.date;
  });
  return (0, common_1.unique)(updated_list, 'id');
}
function newCalendarEventFromBooking(booking) {
  var attendees = [{
    id: booking.user_id,
    name: booking.user_name,
    email: booking.user_email,
    organizer: true
  }];
  if (booking.booking_type === 'visitor') {
    attendees.push(new user_class_1.User({
      name: booking.asset_name || booking.description,
      email: booking.asset_id,
      checked_in: booking.checked_in
    }));
  }
  attendees = attendees.concat(booking.attendees);
  return new event_class_1.CalendarEvent(_objectSpread(_objectSpread(_objectSpread({}, booking), booking.extension_data), {}, {
    attendees: attendees,
    id: booking.id || booking.extension_data.id,
    host: booking.user_email,
    from_bookings: true
  }));
}

/***/ }),

/***/ 90690:
/*!*******************************************!*\
  !*** ./libs/events/src/lib/validators.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.endInFuture = void 0;
exports.isFuture = isFuture;
var date_fns_1 = __webpack_require__(/*! date-fns */ 25773);
var endInFuture = function endInFuture(control) {
  var _control$parent;
  var date = (_control$parent = control.parent) === null || _control$parent === void 0 ? void 0 : _control$parent.get('date');
  if (date && (0, date_fns_1.isAfter)(Date.now(), (0, date_fns_1.addMinutes)(date.value, control.value))) {
    return {
      duration: true
    };
  }
  return null;
};
exports.endInFuture = endInFuture;
/** Check that date in unix ms is in the future */
function isFuture(control) {
  return control.value && (0, date_fns_1.isBefore)(control.value, new Date()) ? {
    is_future: true
  } : null;
}

/***/ }),

/***/ 27009:
/*!***********************************!*\
  !*** ./libs/explore/src/index.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var tslib_1 = __webpack_require__(/*! tslib */ 24398);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/explore.module */ 42434), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/explore */ 11874), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/explore-lockers.service */ 49591), exports);

/***/ }),

/***/ 72213:
/*!***********************************************************!*\
  !*** ./libs/explore/src/lib/explore-book-qr.component.ts ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _taggedTemplateLiteral = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js */ 9959)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _ExploreBookQrComponent, _templateObject;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.ExploreBookQrComponent = void 0;
var dialog_1 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var settings_service_1 = __webpack_require__(/*! libs/common/src/lib/settings.service */ 14233);
var qr_code_1 = __webpack_require__(/*! libs/common/src/lib/qr-code */ 75774);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! libs/common/src/lib/settings.service */ 14233);
var i2 = __webpack_require__(/*! ../../../components/src/lib/icon.component */ 69434);
var i3 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var DEFAULT_PATH = "workplace/#/explore?space={{id}}";
var ExploreBookQrComponent = /*#__PURE__*/_createClass(function ExploreBookQrComponent(_data, _settings) {
  var _this$_data$space;
  _classCallCheck(this, ExploreBookQrComponent);
  this._data = _data;
  this._settings = _settings;
  this.space = this._data.space;
  this.qr_code = (0, qr_code_1.generateQRCode)("".concat(location.origin).concat((this._settings.get('app.booking_qr_path') || DEFAULT_PATH).replace('{{id}}', (_this$_data$space = this._data.space) === null || _this$_data$space === void 0 ? void 0 : _this$_data$space.email)));
});
_ExploreBookQrComponent = ExploreBookQrComponent;
_ExploreBookQrComponent.ɵfac = function ExploreBookQrComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _ExploreBookQrComponent)(i0.ɵɵdirectiveInject(dialog_1.MAT_DIALOG_DATA), i0.ɵɵdirectiveInject(i1.SettingsService));
};
_ExploreBookQrComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _ExploreBookQrComponent,
  selectors: [["explore-book-qr"]],
  decls: 9,
  vars: 2,
  consts: function consts() {
    var i18n_0;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_381017318285325317$$LIBS_EXPLORE_SRC_LIB_EXPLORE_BOOK_QR_COMPONENT_TS_0 = goog.getMsg("Book - {$interpolation}", {
        "interpolation": "\uFFFD0\uFFFD"
      }, {
        original_code: {
          "interpolation": "{{ space?.name }}"
        }
      });
      i18n_0 = MSG_EXTERNAL_381017318285325317$$LIBS_EXPLORE_SRC_LIB_EXPLORE_BOOK_QR_COMPONENT_TS_0;
    } else {
      i18n_0 = $localize(_templateObject || (_templateObject = _taggedTemplateLiteral([":\u241Fcbd43c9fe40f6bb5fd5497b1436b4dce15539dfb\u241F381017318285325317:Book - ", ":INTERPOLATION:"])), "\uFFFD0\uFFFD");
    }
    return [i18n_0, [1, "truncate"], [1, "flex-1"], ["icon", "", "mat-dialog-close", ""], [1, "p-4"], [1, "w-64", "h-64", "m-auto", 3, "src"]];
  },
  template: function ExploreBookQrComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵelementStart(0, "header")(1, "h2", 1);
      i0.ɵɵi18n(2, 0);
      i0.ɵɵelementEnd();
      i0.ɵɵelement(3, "div", 2);
      i0.ɵɵelementStart(4, "button", 3)(5, "app-icon");
      i0.ɵɵtext(6, "close");
      i0.ɵɵelementEnd()()();
      i0.ɵɵelementStart(7, "main", 4);
      i0.ɵɵelement(8, "img", 5);
      i0.ɵɵelementEnd();
    }
    if (rf & 2) {
      i0.ɵɵadvance(2);
      i0.ɵɵi18nExp(ctx.space == null ? null : ctx.space.name);
      i0.ɵɵi18nApply(2);
      i0.ɵɵadvance(6);
      i0.ɵɵproperty("src", ctx.qr_code, i0.ɵɵsanitizeUrl);
    }
  },
  dependencies: [i2.IconComponent, i3.MatDialogClose]
});
exports.ExploreBookQrComponent = ExploreBookQrComponent;

/***/ }),

/***/ 76301:
/*!*****************************************************************!*\
  !*** ./libs/explore/src/lib/explore-booking-modal.component.ts ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _taggedTemplateLiteral = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js */ 9959)["default"]);
var _regeneratorRuntime = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/regeneratorRuntime.js */ 8698)["default"]);
var _asyncToGenerator = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/asyncToGenerator.js */ 95386)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _ExploreBookingModalComponent, _templateObject, _templateObject2, _templateObject3, _templateObject4, _templateObject5, _templateObject6, _templateObject7;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.ExploreBookingModalComponent = void 0;
var dialog_1 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var event_form_service_1 = __webpack_require__(/*! libs/events/src/lib/event-form.service */ 26101);
var router_1 = __webpack_require__(/*! @angular/router */ 95072);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @placeos/common */ 22797);
var i2 = __webpack_require__(/*! libs/events/src/lib/event-form.service */ 26101);
var i3 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var i4 = __webpack_require__(/*! @angular/router */ 95072);
function ExploreBookingModalComponent_button_4_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "button", 10)(1, "app-icon");
    i0.ɵɵtext(2, "close");
    i0.ɵɵelementEnd()();
  }
}
function ExploreBookingModalComponent_ng_container_6_main_1_div_11_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 15)(1, "label", 24);
    i0.ɵɵtext(2, "Host");
    i0.ɵɵelementStart(3, "span");
    i0.ɵɵtext(4, "*");
    i0.ɵɵelementEnd();
    i0.ɵɵtext(5, ":");
    i0.ɵɵelementEnd();
    i0.ɵɵelement(6, "a-user-search-field", 25);
    i0.ɵɵelementEnd();
  }
}
function ExploreBookingModalComponent_ng_container_6_main_1_div_18_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 26)(1, "label");
    i0.ɵɵi18n(2, 5);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(3, "div", 27);
    i0.ɵɵtext(4);
    i0.ɵɵpipe(5, "date");
    i0.ɵɵpipe(6, "date");
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext(3);
    i0.ɵɵadvance(4);
    i0.ɵɵtextInterpolate2(" ", i0.ɵɵpipeBind2(5, 2, ctx_r1.form.value.date, "mediumDate"), " at ", i0.ɵɵpipeBind2(6, 5, ctx_r1.form.value.date, ctx_r1.time_format), " ");
  }
}
function ExploreBookingModalComponent_ng_container_6_main_1_div_19_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 28)(1, "label");
    i0.ɵɵi18n(2, 6);
    i0.ɵɵelementEnd();
    i0.ɵɵelement(3, "a-duration-field", 29);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext(3);
    i0.ɵɵadvance(3);
    i0.ɵɵproperty("time", ctx_r1.form.value.date)("max", ctx_r1.max_duration)("use_24hr", ctx_r1.use_24hr_time);
  }
}
function ExploreBookingModalComponent_ng_container_6_main_1_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "main", 14)(1, "div", 15)(2, "label", 16);
    i0.ɵɵtext(3, "Title");
    i0.ɵɵelementStart(4, "span");
    i0.ɵɵtext(5, "*");
    i0.ɵɵelementEnd();
    i0.ɵɵtext(6, ":");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(7, "mat-form-field", 17);
    i0.ɵɵelement(8, "input", 18);
    i0.ɵɵelementStart(9, "mat-error");
    i0.ɵɵi18n(10, 3);
    i0.ɵɵelementEnd()()();
    i0.ɵɵtemplate(11, ExploreBookingModalComponent_ng_container_6_main_1_div_11_Template, 7, 0, "div", 19);
    i0.ɵɵelementStart(12, "div", 15)(13, "label");
    i0.ɵɵi18n(14, 4);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(15, "div", 20);
    i0.ɵɵtext(16);
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(17, "div", 21);
    i0.ɵɵtemplate(18, ExploreBookingModalComponent_ng_container_6_main_1_div_18_Template, 7, 8, "div", 22)(19, ExploreBookingModalComponent_ng_container_6_main_1_div_19_Template, 4, 3, "div", 23);
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext(2);
    i0.ɵɵproperty("formGroup", ctx_r1.form);
    i0.ɵɵadvance(11);
    i0.ɵɵproperty("ngIf", ctx_r1.can_book_for_others);
    i0.ɵɵadvance(5);
    i0.ɵɵtextInterpolate1(" ", (ctx_r1.form.controls.resources == null ? null : ctx_r1.form.controls.resources.value[0] == null ? null : ctx_r1.form.controls.resources.value[0].display_name) || (ctx_r1.form.controls.resources == null ? null : ctx_r1.form.controls.resources.value[0] == null ? null : ctx_r1.form.controls.resources.value[0].name), " ");
    i0.ɵɵadvance(2);
    i0.ɵɵproperty("ngIf", ctx_r1.form.controls.date);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", ctx_r1.form.controls.duration);
  }
}
function ExploreBookingModalComponent_ng_container_6_Template(rf, ctx) {
  if (rf & 1) {
    var _r1 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵtemplate(1, ExploreBookingModalComponent_ng_container_6_main_1_Template, 20, 5, "main", 11);
    i0.ɵɵelementStart(2, "footer", 12)(3, "button", 13);
    i0.ɵɵlistener("click", function ExploreBookingModalComponent_ng_container_6_Template_button_click_3_listener() {
      i0.ɵɵrestoreView(_r1);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.save());
    });
    i0.ɵɵi18n(4, 2);
    i0.ɵɵelementEnd()();
    i0.ɵɵelementContainerEnd();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", ctx_r1.form);
  }
}
function ExploreBookingModalComponent_ng_template_8_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 30);
    i0.ɵɵelement(1, "mat-spinner", 31);
    i0.ɵɵelementStart(2, "p");
    i0.ɵɵtext(3);
    i0.ɵɵpipe(4, "async");
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance();
    i0.ɵɵproperty("diameter", 48);
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(4, 2, ctx_r1.loading));
  }
}
var ExploreBookingModalComponent = /*#__PURE__*/function () {
  function ExploreBookingModalComponent(_data, _settings, _event_form, _dialog_ref, _router) {
    _classCallCheck(this, ExploreBookingModalComponent);
    this._data = _data;
    this._settings = _settings;
    this._event_form = _event_form;
    this._dialog_ref = _dialog_ref;
    this._router = _router;
    this.loading = this._event_form.loading;
  }
  return _createClass(ExploreBookingModalComponent, [{
    key: "form",
    get: function get() {
      return this._event_form.form;
    }
  }, {
    key: "max_duration",
    get: function get() {
      return this._settings.get('app.events.max_duration') || 4 * 60;
    }
  }, {
    key: "can_book_for_others",
    get: function get() {
      return this._settings.get('app.events.can_book_for_others');
    }
  }, {
    key: "use_24hr_time",
    get: function get() {
      return this._settings.get('app.use_24_hour_time');
    }
  }, {
    key: "time_format",
    get: function get() {
      return this._settings.time_format;
    }
  }, {
    key: "ngOnInit",
    value: function ngOnInit() {
      this._event_form.newForm();
      this.form.patchValue({
        resources: [this._data.space],
        host: (0, common_1.currentUser)().email,
        organiser: (0, common_1.currentUser)()
      });
    }
  }, {
    key: "save",
    value: function () {
      var _save = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              _context.next = 2;
              return this._event_form.postForm()["catch"](function (_) {
                (0, common_1.notifyError)(_);
                throw _;
              });
            case 2:
              if (this._settings.app_name.toLowerCase().includes('workplace')) {
                this._router.navigate(['/book', 'meeting', 'success']);
              } else {
                (0, common_1.notifySuccess)('Successfully booked room.');
              }
              this._dialog_ref.close();
            case 4:
            case "end":
              return _context.stop();
          }
        }, _callee, this);
      }));
      function save() {
        return _save.apply(this, arguments);
      }
      return save;
    }()
  }]);
}();
_ExploreBookingModalComponent = ExploreBookingModalComponent;
_ExploreBookingModalComponent.ɵfac = function ExploreBookingModalComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _ExploreBookingModalComponent)(i0.ɵɵdirectiveInject(dialog_1.MAT_DIALOG_DATA), i0.ɵɵdirectiveInject(i1.SettingsService), i0.ɵɵdirectiveInject(i2.EventFormService), i0.ɵɵdirectiveInject(i3.MatDialogRef), i0.ɵɵdirectiveInject(i4.Router));
};
_ExploreBookingModalComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _ExploreBookingModalComponent,
  selectors: [["explore-booking-modal"]],
  decls: 10,
  vars: 7,
  consts: function consts() {
    var i18n_0;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_6464057252608386690$$LIBS_EXPLORE_SRC_LIB_EXPLORE_BOOKING_MODAL_COMPONENT_TS_0 = goog.getMsg("New Booking");
      i18n_0 = MSG_EXTERNAL_6464057252608386690$$LIBS_EXPLORE_SRC_LIB_EXPLORE_BOOKING_MODAL_COMPONENT_TS_0;
    } else {
      i18n_0 = $localize(_templateObject || (_templateObject = _taggedTemplateLiteral([":\u241Fbd532c9813cc0577fcc3ff32640a61afef2bf40a\u241F6464057252608386690:New Booking"])));
    }
    var i18n_1;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_2367152680379951719$$LIBS_EXPLORE_SRC_LIB_EXPLORE_BOOKING_MODAL_COMPONENT_TS_1 = goog.getMsg(" Save ");
      i18n_1 = MSG_EXTERNAL_2367152680379951719$$LIBS_EXPLORE_SRC_LIB_EXPLORE_BOOKING_MODAL_COMPONENT_TS_1;
    } else {
      i18n_1 = $localize(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([":\u241F2fa313c798ad138557539ba3c6a3bfdc426eaaa2\u241F2367152680379951719: Save "])));
    }
    var i18n_2;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_2997066279074525950$$LIBS_EXPLORE_SRC_LIB_EXPLORE_BOOKING_MODAL_COMPONENT_TS_2 = goog.getMsg("Booking Title");
      i18n_2 = MSG_EXTERNAL_2997066279074525950$$LIBS_EXPLORE_SRC_LIB_EXPLORE_BOOKING_MODAL_COMPONENT_TS_2;
    } else {
      i18n_2 = $localize(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([":\u241F5cf0071757dd8065e052662e4d191a210c766579\u241F2997066279074525950:Booking Title"])));
    }
    var i18n_3;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_8953173802652113530$$LIBS_EXPLORE_SRC_LIB_EXPLORE_BOOKING_MODAL_COMPONENT_TS_3 = goog.getMsg("Booking title is required");
      i18n_3 = MSG_EXTERNAL_8953173802652113530$$LIBS_EXPLORE_SRC_LIB_EXPLORE_BOOKING_MODAL_COMPONENT_TS_3;
    } else {
      i18n_3 = $localize(_templateObject4 || (_templateObject4 = _taggedTemplateLiteral([":\u241F35a900d9fa8e824539ca4b0d1a10bd2f7f8c1172\u241F8953173802652113530:Booking title is required"])));
    }
    var i18n_4;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_1329943553963489238$$LIBS_EXPLORE_SRC_LIB_EXPLORE_BOOKING_MODAL_COMPONENT_TS_4 = goog.getMsg("Space:");
      i18n_4 = MSG_EXTERNAL_1329943553963489238$$LIBS_EXPLORE_SRC_LIB_EXPLORE_BOOKING_MODAL_COMPONENT_TS_4;
    } else {
      i18n_4 = $localize(_templateObject5 || (_templateObject5 = _taggedTemplateLiteral([":\u241F0f342dcd63b8732a5599eb91ce166b55335dbbc4\u241F1329943553963489238:Space:"])));
    }
    var i18n_5;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_6899410641137821757$$LIBS_EXPLORE_SRC_LIB_EXPLORE_BOOKING_MODAL_COMPONENT_TS_5 = goog.getMsg("Date:");
      i18n_5 = MSG_EXTERNAL_6899410641137821757$$LIBS_EXPLORE_SRC_LIB_EXPLORE_BOOKING_MODAL_COMPONENT_TS_5;
    } else {
      i18n_5 = $localize(_templateObject6 || (_templateObject6 = _taggedTemplateLiteral([":\u241F05fa0bded36de6e73a1fa44838b627349dace044\u241F6899410641137821757:Date:"])));
    }
    var i18n_6;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_4220765745195024064$$LIBS_EXPLORE_SRC_LIB_EXPLORE_BOOKING_MODAL_COMPONENT_TS_6 = goog.getMsg("Duration:");
      i18n_6 = MSG_EXTERNAL_4220765745195024064$$LIBS_EXPLORE_SRC_LIB_EXPLORE_BOOKING_MODAL_COMPONENT_TS_6;
    } else {
      i18n_6 = $localize(_templateObject7 || (_templateObject7 = _taggedTemplateLiteral([":\u241Fe17a1d75189da843f541f7764f188f2b19a97df2\u241F4220765745195024064:Duration:"])));
    }
    return [["load_state", ""], i18n_0, i18n_1, i18n_3, i18n_4, i18n_5, i18n_6, [1, "flex-1"], ["icon", "", "matRipple", "", "mat-dialog-close", "", 4, "ngIf"], [4, "ngIf", "ngIfElse"], ["icon", "", "matRipple", "", "mat-dialog-close", ""], ["class", "p-4 max-w-[85vw]", 3, "formGroup", 4, "ngIf"], [1, "flex", "justify-center", "p-2", "border-t", "border-base-200"], ["btn", "", "matRipple", "", 1, "w-32", 3, "click"], [1, "p-4", "max-w-[85vw]", 3, "formGroup"], [1, "flex", "flex-col"], ["for", "title"], ["appearance", "outline"], ["matInput", "", "name", "title", "formControlName", "title", "placeholder", i18n_2], ["class", "flex flex-col", 4, "ngIf"], ["name", "space", 1, "px-4", "py-3", "border", "border-base-200", "rounded", "w-full", "mb-4"], [1, "flex", "sm:space-x-4", "flex-wrap"], ["class", "flex flex-col flex-1 w-full sm:w-auto", 4, "ngIf"], ["class", "flex flex-col w-full sm:w-auto", 4, "ngIf"], ["for", "host"], ["name", "host", "formControlName", "organiser", 1, "mb-4"], [1, "flex", "flex-col", "flex-1", "w-full", "sm:w-auto"], [1, "px-4", "py-3", "border", "border-base-200", "rounded", "w-full", "mb-4"], [1, "flex", "flex-col", "w-full", "sm:w-auto"], ["formControlName", "duration", 1, "w-full", 3, "time", "max", "use_24hr"], ["load", "", 1, "h-64", "flex", "flex-col", "items-center", "justify-center"], [1, "m-4", 3, "diameter"]];
  },
  template: function ExploreBookingModalComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵelementStart(0, "header")(1, "h2");
      i0.ɵɵi18n(2, 1);
      i0.ɵɵelementEnd();
      i0.ɵɵelement(3, "div", 7);
      i0.ɵɵtemplate(4, ExploreBookingModalComponent_button_4_Template, 3, 0, "button", 8);
      i0.ɵɵpipe(5, "async");
      i0.ɵɵelementEnd();
      i0.ɵɵtemplate(6, ExploreBookingModalComponent_ng_container_6_Template, 5, 1, "ng-container", 9);
      i0.ɵɵpipe(7, "async");
      i0.ɵɵtemplate(8, ExploreBookingModalComponent_ng_template_8_Template, 5, 4, "ng-template", null, 0, i0.ɵɵtemplateRefExtractor);
    }
    if (rf & 2) {
      var load_state_r3 = i0.ɵɵreference(9);
      i0.ɵɵadvance(4);
      i0.ɵɵproperty("ngIf", !i0.ɵɵpipeBind1(5, 3, ctx.loading));
      i0.ɵɵadvance(2);
      i0.ɵɵproperty("ngIf", !i0.ɵɵpipeBind1(7, 5, ctx.loading))("ngIfElse", load_state_r3);
    }
  },
  styles: ["header[_ngcontent-%COMP%] {\n                max-width: calc(100vw + 100%);\n            }\n\n            [load][_ngcontent-%COMP%] {\n                width: 32rem;\n                max-width: calc(100vw - 2rem);\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImV4cGxvcmUtYm9va2luZy1tb2RhbC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLDZCQUE2QjtZQUNqQzs7WUFFQTtnQkFDSSxZQUFZO2dCQUNaLDZCQUE2QjtZQUNqQyIsImZpbGUiOiJleHBsb3JlLWJvb2tpbmctbW9kYWwuY29tcG9uZW50LnRzIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICBoZWFkZXIge1xuICAgICAgICAgICAgICAgIG1heC13aWR0aDogY2FsYygxMDB2dyArIDEwMCUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBbbG9hZF0ge1xuICAgICAgICAgICAgICAgIHdpZHRoOiAzMnJlbTtcbiAgICAgICAgICAgICAgICBtYXgtd2lkdGg6IGNhbGMoMTAwdncgLSAycmVtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl19 */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvZXhwbG9yZS9zcmMvbGliL2V4cGxvcmUtYm9va2luZy1tb2RhbC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLDZCQUE2QjtZQUNqQzs7WUFFQTtnQkFDSSxZQUFZO2dCQUNaLDZCQUE2QjtZQUNqQzs7QUFFWiw0bUJBQTRtQiIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgaGVhZGVyIHtcbiAgICAgICAgICAgICAgICBtYXgtd2lkdGg6IGNhbGMoMTAwdncgKyAxMDAlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgW2xvYWRdIHtcbiAgICAgICAgICAgICAgICB3aWR0aDogMzJyZW07XG4gICAgICAgICAgICAgICAgbWF4LXdpZHRoOiBjYWxjKDEwMHZ3IC0gMnJlbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICJdLCJzb3VyY2VSb290IjoiIn0= */"]
});
exports.ExploreBookingModalComponent = ExploreBookingModalComponent;

/***/ }),

/***/ 82882:
/*!*************************************************************!*\
  !*** ./libs/explore/src/lib/explore-desk-info.component.ts ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _ExploreDeskInfoComponent;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.ExploreDeskInfoComponent = void 0;
var core_1 = __webpack_require__(/*! @angular/core */ 37580);
var interactive_map_component_1 = __webpack_require__(/*! libs/components/src/lib/interactive-map.component */ 24918);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @angular/common */ 60316);
var i2 = __webpack_require__(/*! ../../../components/src/lib/custom-tooltip.component */ 22238);
function ExploreDeskInfoComponent_ng_template_1_p_5_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "p", 9);
    i0.ɵɵtext(1);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r0 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate(ctx_r0.user);
  }
}
function ExploreDeskInfoComponent_ng_template_1_p_6_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "p", 10);
    i0.ɵɵtext(1);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r0 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", ctx_r0.department, " ");
  }
}
function ExploreDeskInfoComponent_ng_template_1_p_7_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "p", 11);
    i0.ɵɵtext(1);
    i0.ɵɵpipe(2, "date");
    i0.ɵɵpipe(3, "date");
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r0 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate2(" ", i0.ɵɵpipeBind2(2, 2, ctx_r0.start, "shortTime"), " \u2013 ", i0.ɵɵpipeBind2(3, 5, ctx_r0.end, "shortTime"), " ");
  }
}
function ExploreDeskInfoComponent_ng_template_1_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 2);
    i0.ɵɵelement(1, "div", 3);
    i0.ɵɵelementStart(2, "div", 4)(3, "h4", 5);
    i0.ɵɵtext(4);
    i0.ɵɵelementEnd();
    i0.ɵɵtemplate(5, ExploreDeskInfoComponent_ng_template_1_p_5_Template, 2, 1, "p", 6)(6, ExploreDeskInfoComponent_ng_template_1_p_6_Template, 2, 1, "p", 7)(7, ExploreDeskInfoComponent_ng_template_1_p_7_Template, 4, 8, "p", 8);
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var ctx_r0 = i0.ɵɵnextContext();
    i0.ɵɵclassMap("absolute rounded bg-base-100 p-4 top-0 left-0 shadow pointer-events-none " + ctx_r0.x_pos + " " + ctx_r0.y_pos);
    i0.ɵɵproperty("id", ctx_r0.map_id);
    i0.ɵɵadvance(4);
    i0.ɵɵtextInterpolate1(" ", ctx_r0.name || ctx_r0.map_id || ctx_r0.id, " ");
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", ctx_r0.user);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", ctx_r0.user && ctx_r0.department);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", ctx_r0.start);
  }
}
var ExploreDeskInfoComponent = /*#__PURE__*/function () {
  function ExploreDeskInfoComponent(_details, _element) {
    _classCallCheck(this, ExploreDeskInfoComponent);
    this._details = _details;
    this._element = _element;
    /** Space to display details for */
    this.id = this._details.id;
    this.map_id = this._details.map_id;
    this.name = this._details.name;
    this.user = this._details.user;
    this.start = this._details.start;
    this.end = this._details.end;
    this.status = this._details.status;
    this.department = this._details.department;
  }
  return _createClass(ExploreDeskInfoComponent, [{
    key: "ngOnInit",
    value: function ngOnInit() {
      var _this = this;
      var tries = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;
      if (tries > 10) return;
      setTimeout(function () {
        var _this$_element$native;
        var parent = (_this$_element$native = _this._element.nativeElement.parentElement) === null || _this$_element$native === void 0 ? void 0 : _this$_element$native.parentElement;
        if (!parent) return _this.ngOnInit(++tries);
        var position = {
          y: parseInt(parent.style.top, 10) / 100,
          x: parseInt(parent.style.left, 10) / 100
        };
        _this.y_pos = position.y >= 0.5 ? 'bottom' : 'top';
        _this.x_pos = position.x >= 0.5 ? 'right' : 'left';
      }, 200);
    }
  }, {
    key: "available_until",
    get: function get() {
      return '';
    }
  }]);
}();
_ExploreDeskInfoComponent = ExploreDeskInfoComponent;
_ExploreDeskInfoComponent.ɵfac = function ExploreDeskInfoComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _ExploreDeskInfoComponent)(i0.ɵɵdirectiveInject(interactive_map_component_1.MAP_FEATURE_DATA), i0.ɵɵdirectiveInject(i0.ElementRef));
};
_ExploreDeskInfoComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _ExploreDeskInfoComponent,
  selectors: [["explore-desk-info"]],
  decls: 3,
  vars: 8,
  consts: [["desk_tooltip", ""], ["customTooltip", "", 1, "h-full", "w-full", "pointer-events-auto", "relative", "z-20", 3, "content", "backdrop", "xPosition", "yPosition", "hover", "delay"], ["name", "space-info", 3, "id"], [1, "arrow"], [1, "details"], ["map-id", "", 1, "m-0", "font-medium"], ["user", "", "class", "mt-2 text-sm", 4, "ngIf"], ["user", "", "class", "mt-1 text-sm", 4, "ngIf"], ["start", "", "class", "mt-1 text-sm", 4, "ngIf"], ["user", "", 1, "mt-2", "text-sm"], ["user", "", 1, "mt-1", "text-sm"], ["start", "", 1, "mt-1", "text-sm"]],
  template: function ExploreDeskInfoComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵelement(0, "div", 1);
      i0.ɵɵtemplate(1, ExploreDeskInfoComponent_ng_template_1_Template, 8, 7, "ng-template", null, 0, i0.ɵɵtemplateRefExtractor);
    }
    if (rf & 2) {
      var desk_tooltip_r2 = i0.ɵɵreference(2);
      i0.ɵɵproperty("content", desk_tooltip_r2)("backdrop", false)("xPosition", "center")("yPosition", "center")("hover", true)("delay", 3000);
      i0.ɵɵattribute("id", ctx.id)("map_id", ctx.map_id);
    }
  },
  dependencies: [i1.NgIf, i2.CustomTooltipComponent, i1.DatePipe],
  styles: ["[name='space-info'][_ngcontent-%COMP%] {\n                width: 16rem;\n            }\n\n            [name='status'][_ngcontent-%COMP%] {\n                background-color: #43a047;\n                font-weight: 500;\n            }\n\n            [name='status'].busy[_ngcontent-%COMP%] {\n                background-color: #e53935;\n            }\n\n            [name='status'].pending[_ngcontent-%COMP%] {\n                background-color: #ffb300;\n            }\n\n            [name='status'].not-bookable[_ngcontent-%COMP%] {\n                background-color: #757575;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImV4cGxvcmUtZGVzay1pbmZvLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1lBQ1k7Z0JBQ0ksWUFBWTtZQUNoQjs7WUFFQTtnQkFDSSx5QkFBeUI7Z0JBQ3pCLGdCQUFnQjtZQUNwQjs7WUFFQTtnQkFDSSx5QkFBeUI7WUFDN0I7O1lBRUE7Z0JBQ0kseUJBQXlCO1lBQzdCOztZQUVBO2dCQUNJLHlCQUF5QjtZQUM3QiIsImZpbGUiOiJleHBsb3JlLWRlc2staW5mby5jb21wb25lbnQudHMiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIFtuYW1lPSdzcGFjZS1pbmZvJ10ge1xuICAgICAgICAgICAgICAgIHdpZHRoOiAxNnJlbTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgW25hbWU9J3N0YXR1cyddIHtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjNDNhMDQ3O1xuICAgICAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIFtuYW1lPSdzdGF0dXMnXS5idXN5IHtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZTUzOTM1O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBbbmFtZT0nc3RhdHVzJ10ucGVuZGluZyB7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmYjMwMDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgW25hbWU9J3N0YXR1cyddLm5vdC1ib29rYWJsZSB7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogIzc1NzU3NTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl19 */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvZXhwbG9yZS9zcmMvbGliL2V4cGxvcmUtZGVzay1pbmZvLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1lBQ1k7Z0JBQ0ksWUFBWTtZQUNoQjs7WUFFQTtnQkFDSSx5QkFBeUI7Z0JBQ3pCLGdCQUFnQjtZQUNwQjs7WUFFQTtnQkFDSSx5QkFBeUI7WUFDN0I7O1lBRUE7Z0JBQ0kseUJBQXlCO1lBQzdCOztZQUVBO2dCQUNJLHlCQUF5QjtZQUM3Qjs7QUFFWixnbUNBQWdtQyIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgW25hbWU9J3NwYWNlLWluZm8nXSB7XG4gICAgICAgICAgICAgICAgd2lkdGg6IDE2cmVtO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBbbmFtZT0nc3RhdHVzJ10ge1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICM0M2EwNDc7XG4gICAgICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgW25hbWU9J3N0YXR1cyddLmJ1c3kge1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNlNTM5MzU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIFtuYW1lPSdzdGF0dXMnXS5wZW5kaW5nIHtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZiMzAwO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBbbmFtZT0nc3RhdHVzJ10ubm90LWJvb2thYmxlIHtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjNzU3NTc1O1xuICAgICAgICAgICAgfVxuICAgICAgICAiXSwic291cmNlUm9vdCI6IiJ9 */"]
});
exports.ExploreDeskInfoComponent = ExploreDeskInfoComponent;

/***/ }),

/***/ 61104:
/*!*******************************************************!*\
  !*** ./libs/explore/src/lib/explore-desks.service.ts ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _regeneratorRuntime = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/regeneratorRuntime.js */ 8698)["default"]);
var _createForOfIteratorHelper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createForOfIteratorHelper.js */ 36350)["default"]);
var _asyncToGenerator = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/asyncToGenerator.js */ 95386)["default"]);
var _slicedToArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/slicedToArray.js */ 6282)["default"]);
var _objectSpread = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/objectSpread2.js */ 34092)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _callSuper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/callSuper.js */ 8513)["default"]);
var _inherits = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/inherits.js */ 58160)["default"]);
var _ExploreDesksService;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.ExploreDesksService = void 0;
var dialog_1 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var ts_client_1 = __webpack_require__(/*! @placeos/ts-client */ 35713);
var date_fns_1 = __webpack_require__(/*! date-fns */ 25773);
var rxjs_1 = __webpack_require__(/*! rxjs */ 15681);
var operators_1 = __webpack_require__(/*! rxjs/operators */ 97303);
var booking_form_service_1 = __webpack_require__(/*! libs/bookings/src/lib/booking-form.service */ 18379);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var organisation_service_1 = __webpack_require__(/*! libs/organisation/src/lib/organisation.service */ 19863);
var desk_class_1 = __webpack_require__(/*! libs/organisation/src/lib/desk.class */ 47451);
var set_datetime_modal_component_1 = __webpack_require__(/*! libs/explore/src/lib/set-datetime-modal.component */ 27146);
var explore_desk_info_component_1 = __webpack_require__(/*! ./explore-desk-info.component */ 82882);
var explore_device_info_component_1 = __webpack_require__(/*! ./explore-device-info.component */ 51207);
var explore_spaces_service_1 = __webpack_require__(/*! ./explore-spaces.service */ 65897);
var explore_state_service_1 = __webpack_require__(/*! ./explore-state.service */ 12455);
var bookings_fn_1 = __webpack_require__(/*! libs/bookings/src/lib/bookings.fn */ 18026);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! ./explore-state.service */ 12455);
var i2 = __webpack_require__(/*! libs/organisation/src/lib/organisation.service */ 19863);
var i3 = __webpack_require__(/*! @placeos/common */ 22797);
var i4 = __webpack_require__(/*! libs/bookings/src/lib/booking-form.service */ 18379);
var i5 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var ExploreDesksService = /*#__PURE__*/function (_common_1$AsyncHandle) {
  function ExploreDesksService(_state, _org, _settings, _bookings, _dialog) {
    var _this;
    _classCallCheck(this, ExploreDesksService);
    _this = _callSuper(this, ExploreDesksService);
    _this._state = _state;
    _this._org = _org;
    _this._settings = _settings;
    _this._bookings = _bookings;
    _this._dialog = _dialog;
    _this._in_use = new rxjs_1.BehaviorSubject([]);
    _this._options = new rxjs_1.BehaviorSubject({});
    _this._presence = new rxjs_1.BehaviorSubject([]);
    _this._signs_of_life = new rxjs_1.BehaviorSubject([]);
    _this._statuses = {};
    _this._users = {};
    _this._departments = {};
    _this._checked_in = new rxjs_1.BehaviorSubject([]);
    _this.booking_rules = _this._org.active_building.pipe((0, operators_1.filter)(function (bld) {
      return !!bld;
    }), (0, operators_1.switchMap)(function (bld) {
      return (0, ts_client_1.showMetadata)(bld.id, "desk_booking_rules").pipe((0, operators_1.catchError)(function () {
        return (0, rxjs_1.of)({
          details: []
        });
      }));
    }), (0, operators_1.map)(function (_) {
      return (_ === null || _ === void 0 ? void 0 : _.details) instanceof Array ? _.details : [];
    }), (0, operators_1.shareReplay)(1));
    _this.desk_list = _this._state.level.pipe((0, operators_1.debounceTime)(50), (0, operators_1.switchMap)(function (lvl) {
      return (0, ts_client_1.showMetadata)(lvl.id, 'desks').pipe((0, operators_1.catchError)(function () {
        return (0, rxjs_1.of)({
          details: []
        });
      }), (0, operators_1.map)(function (i) {
        return ((i === null || i === void 0 ? void 0 : i.details) instanceof Array ? i.details : []).map(function (j) {
          return new desk_class_1.Desk(_objectSpread(_objectSpread({}, j), {}, {
            zone: lvl
          }));
        });
      }));
    }), (0, operators_1.catchError)(function (e) {
      return [];
    }), (0, operators_1.shareReplay)(1));
    _this._bind = (0, rxjs_1.combineLatest)([_this._state.level, _this._state.options]).pipe((0, operators_1.debounceTime)(300), (0, operators_1.filter)(function (_ref) {
      var _ref2 = _slicedToArray(_ref, 2),
        _ = _ref2[0],
        is_public = _ref2[1].is_public;
      return !!_ && !is_public;
    }), (0, operators_1.map)(function (_ref3) {
      var _ref5;
      var _ref4 = _slicedToArray(_ref3, 1),
        lvl = _ref4[0];
      _this._statuses = {};
      var system_id = _this._org.binding('area_management');
      if (!system_id) return;
      var binding = (_ref5 = (0, ts_client_1.getModule)(system_id, 'AreaManagement')) === null || _ref5 === void 0 ? void 0 : _ref5.binding(lvl.id);
      if (!binding) return;
      _this.subscription("lvl-in_use", binding.listen().subscribe(function (d) {
        return _this.processBindingChange(d || {}, system_id);
      }));
      _this.subscription('lvl-in_use_bind', binding.bind());
    }));
    _this._booking_list = (0, rxjs_1.combineLatest)([_this._options, _this._state.level]).pipe((0, operators_1.filter)(function (_ref6) {
      var _ref7 = _slicedToArray(_ref6, 2),
        _ = _ref7[0],
        lvl = _ref7[1];
      return (_.use_api || _.date > (0, date_fns_1.endOfDay)(Date.now()).valueOf()) && !!lvl;
    }), (0, operators_1.switchMap)(function (_ref8) {
      var _ref9 = _slicedToArray(_ref8, 2),
        _ = _ref9[0],
        level = _ref9[1];
      return (0, bookings_fn_1.queryBookings)({
        type: 'desk',
        period_start: (0, date_fns_1.getUnixTime)((0, date_fns_1.startOfDay)(_.date || Date.now())),
        period_end: (0, date_fns_1.getUnixTime)((0, date_fns_1.endOfDay)(_.date || Date.now())),
        zones: level.id
      });
    }), (0, operators_1.debounceTime)(200), (0, operators_1.tap)(function (bookings) {
      _this._in_use.next(bookings.map(function (_) {
        return _.asset_id;
      }));
      _this._checked_in.next(bookings.filter(function (_) {
        return _.checked_in;
      }).map(function (_) {
        return _.asset_id;
      }));
    }), (0, operators_1.shareReplay)(1));
    _this._state_change = (0, rxjs_1.combineLatest)([_this.desk_list, _this._in_use, _this._presence, _this._checked_in, _this._signs_of_life, _this.booking_rules, _this._options]).pipe((0, operators_1.debounceTime)(50), (0, operators_1.map)( /*#__PURE__*/function () {
      var _ref10 = _asyncToGenerator(function (_ref11) {
        var _ref12 = _slicedToArray(_ref11, 6),
          desks = _ref12[0],
          in_use = _ref12[1],
          presence = _ref12[2],
          checked_in = _ref12[3],
          signs = _ref12[4],
          restrictions = _ref12[5];
        return /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
          var level, _iterator, _step, _loop;
          return _regeneratorRuntime().wrap(function _callee$(_context2) {
            while (1) switch (_context2.prev = _context2.next) {
              case 0:
                _this._statuses = {};
                _context2.next = 3;
                return _this._state.level.pipe((0, operators_1.take)(1)).toPromise();
              case 3:
                level = _context2.sent;
                _iterator = _createForOfIteratorHelper(desks);
                _context2.prev = 5;
                _loop = /*#__PURE__*/_regeneratorRuntime().mark(function _loop() {
                  var _ref13;
                  var _step$value, id, bookable, is_used, has_presence, has_signs, is_checked_in, is_restricted;
                  return _regeneratorRuntime().wrap(function _loop$(_context) {
                    while (1) switch (_context.prev = _context.next) {
                      case 0:
                        _step$value = _step.value, id = _step$value.id, bookable = _step$value.bookable;
                        is_used = in_use.some(function (i) {
                          return id === i;
                        });
                        has_presence = presence.some(function (i) {
                          return id === i;
                        });
                        has_signs = signs.some(function (i) {
                          return id === i;
                        });
                        is_checked_in = checked_in.some(function (i) {
                          return id === i;
                        }) || is_used && _this._settings.get("app.desk.auto_checkin");
                        is_restricted = (_ref13 = (0, common_1.rulesForResource)({
                          date: Date.now(),
                          duration: 60,
                          host: (0, common_1.currentUser)(),
                          resource: {
                            id: id,
                            zones: [level.parent_id, level.id]
                          }
                        }, restrictions)) === null || _ref13 === void 0 ? void 0 : _ref13.hidden;
                        _this._statuses[id] = bookable && !is_restricted ? !is_used && !has_presence && !is_checked_in ? has_signs ? 'signs-of-life' : 'free' : !has_presence && !is_checked_in ? 'pending' : 'busy' : 'not-bookable';
                      case 7:
                      case "end":
                        return _context.stop();
                    }
                  }, _loop);
                });
                _iterator.s();
              case 8:
                if ((_step = _iterator.n()).done) {
                  _context2.next = 12;
                  break;
                }
                return _context2.delegateYield(_loop(), "t0", 10);
              case 10:
                _context2.next = 8;
                break;
              case 12:
                _context2.next = 17;
                break;
              case 14:
                _context2.prev = 14;
                _context2.t1 = _context2["catch"](5);
                _iterator.e(_context2.t1);
              case 17:
                _context2.prev = 17;
                _iterator.f();
                return _context2.finish(17);
              case 20:
                _this.processDesks(desks);
              case 21:
              case "end":
                return _context2.stop();
            }
          }, _callee, null, [[5, 14, 17, 20]]);
        })();
      });
      return function (_x) {
        return _ref10.apply(this, arguments);
      };
    }()));
    _this.init();
    return _this;
  }
  _inherits(ExploreDesksService, _common_1$AsyncHandle);
  return _createClass(ExploreDesksService, [{
    key: "init",
    value: function () {
      var _init = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {
        var _this2 = this;
        return _regeneratorRuntime().wrap(function _callee2$(_context3) {
          while (1) switch (_context3.prev = _context3.next) {
            case 0:
              _context3.next = 2;
              return this._org.initialised.pipe((0, operators_1.first)(function (_) {
                return _;
              })).toPromise();
            case 2:
              this.setOptions({
                enable_booking: this._settings.get('app.desks.enable_maps') !== false
              });
              this.subscription('bookings', this._booking_list.subscribe());
              this.subscription('bind', this._bind.subscribe());
              this.subscription('booking_rules', this.booking_rules.subscribe());
              this.subscription('changes', this._state_change.subscribe());
              this.subscription('desks', this.desk_list.subscribe(function (desks) {
                return _this2.processDesks(desks);
              }));
            case 8:
            case "end":
              return _context3.stop();
          }
        }, _callee2, this);
      }));
      function init() {
        return _init.apply(this, arguments);
      }
      return init;
    }()
  }, {
    key: "setOptions",
    value: function setOptions(options) {
      this._options.next(_objectSpread(_objectSpread({}, this._options.getValue()), options));
    }
  }, {
    key: "processBindingChange",
    value: function processBindingChange(_ref14, system_id) {
      var _this3 = this;
      var value = _ref14.value;
      var devices = (value || []).filter(function (v) {
        return !['desk', 'booking'].includes(v.location);
      });
      var desks = (value || []).filter(function (v) {
        return v.location === 'desk' || v.location === 'booking' && v.type === 'desk';
      });
      var date = this._options.getValue().date || Date.now();
      if (date <= (0, date_fns_1.endOfDay)(Date.now()).valueOf() && !this._options.getValue().use_api) {
        this._in_use.next(desks.filter(function (v) {
          return v.location === 'booking';
        }).map(function (v) {
          return v.map_id || v.asset_id;
        }));
        this._checked_in.next(desks.filter(function (v) {
          return v.location === 'booking' && v.checked_in;
        }).map(function (v) {
          return v.map_id || v.asset_id;
        }));
        this._presence.next(desks.filter(function (v) {
          return v.at_location;
        }).map(function (v) {
          return v.map_id || v.asset_id;
        }));
        this._signs_of_life.next(desks.filter(function (v) {
          return v.signs_of_life;
        }).map(function (v) {
          return v.map_id || v.asset_id;
        }));
      }
      var departments = this._settings.get('app.department_map') || {};
      var _iterator2 = _createForOfIteratorHelper(desks),
        _step2;
      try {
        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
          var desk = _step2.value;
          this._users[desk.map_id || desk.asset_id] = desk.staff_name;
          this._departments[desk.map_id || desk.asset_id] = departments[desk.department] || '';
        }
      } catch (err) {
        _iterator2.e(err);
      } finally {
        _iterator2.f();
      }
      this.processDevices(devices, system_id);
      this.timeout('update', function () {
        return _this3.updateStatus();
      }, 100);
    }
  }, {
    key: "updateStatus",
    value: function updateStatus() {
      var style_map = {};
      var colours = this._settings.get('app.explore.colors') || {};
      for (var desk_id in this._statuses) {
        if (!this._statuses[desk_id]) continue;
        style_map["#".concat(desk_id)] = {
          fill: colours["desk-".concat(this._statuses[desk_id])] || colours["".concat(this._statuses[desk_id])] || explore_spaces_service_1.DEFAULT_COLOURS["".concat(this._statuses[desk_id])]
        };
      }
      this._state.setStyles('desks', style_map);
    }
  }, {
    key: "processDevices",
    value: function processDevices(devices, system_id) {
      var list = [];
      var _iterator3 = _createForOfIteratorHelper(devices),
        _step3;
      try {
        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {
          var _device$coordinates_f, _device$coordinates_f2;
          var device = _step3.value;
          var x = device.x / device.map_width;
          var y = device.y / device.map_height;
          list.push({
            track_id: "device:hover:".concat(x, ",").concat(y),
            location: {
              x: (_device$coordinates_f = device.coordinates_from) !== null && _device$coordinates_f !== void 0 && _device$coordinates_f.includes('right') ? 1 - x : x,
              y: (_device$coordinates_f2 = device.coordinates_from) !== null && _device$coordinates_f2 !== void 0 && _device$coordinates_f2.includes('bottom') ? 1 - y : y
            },
            content: explore_device_info_component_1.ExploreDeviceInfoComponent,
            z_index: 20,
            data: _objectSpread(_objectSpread({}, device), {}, {
              system: system_id
            })
          });
        }
      } catch (err) {
        _iterator3.e(err);
      } finally {
        _iterator3.f();
      }
      this._state.setFeatures('devices', list);
    }
  }, {
    key: "processDesks",
    value: function processDesks(desks) {
      var _this4 = this;
      var list = [];
      var actions = [];
      var options = this._options.getValue();
      var _iterator4 = _createForOfIteratorHelper(desks),
        _step4;
      try {
        var _loop2 = function _loop2() {
          var desk = _step4.value;
          list.push({
            track_id: "desk:hover:".concat(desk.map_id || desk.id),
            location: desk.id,
            content: explore_desk_info_component_1.ExploreDeskInfoComponent,
            full_size: true,
            no_scale: true,
            data: {
              id: desk.map_id || desk.id,
              map_id: desk.name,
              name: desk.name || desk.map_id,
              user: _this4._users[desk.map_id] || desk.staff_name,
              status: _this4._statuses[desk.map_id],
              department: _this4._departments[desk.map_id] || ''
            },
            z_index: 20
          });
          if (!desk.bookable) return 1; // continue
          var can_book = true;
          var book_fn = /*#__PURE__*/function () {
            var _ref15 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {
              var _desk$groups, _this4$_options$getVa, _this4$_options$getVa2, _user, _desk$zone, _desk$zone2, _ref16;
              var _yield$_this4$_setBoo, date, duration, user, user_email;
              return _regeneratorRuntime().wrap(function _callee3$(_context4) {
                while (1) switch (_context4.prev = _context4.next) {
                  case 0:
                    if (can_book) {
                      _context4.next = 2;
                      break;
                    }
                    return _context4.abrupt("return");
                  case 2:
                    if (!(_this4._statuses[desk.id] !== 'free')) {
                      _context4.next = 4;
                      break;
                    }
                    return _context4.abrupt("return", (0, common_1.notifyError)("".concat(desk.name || 'Desk', " is unavailable at this time.")));
                  case 4:
                    if (!((_desk$groups = desk.groups) !== null && _desk$groups !== void 0 && _desk$groups.length && !desk.groups.find(function (_) {
                      return (0, common_1.currentUser)().groups.includes(_);
                    }))) {
                      _context4.next = 6;
                      break;
                    }
                    return _context4.abrupt("return", (0, common_1.notifyError)("You are not allowed to book ".concat(desk.name, ".")));
                  case 6:
                    _this4._bookings.newForm();
                    _this4._bookings.setOptions({
                      type: 'desk'
                    });
                    if (options.date) {
                      _this4._bookings.form.patchValue({
                        date: options.date
                      });
                      _this4._bookings.form.patchValue({
                        all_day: !!options.all_day
                      });
                    }
                    _context4.next = 11;
                    return _this4._setBookingTime(_this4._bookings.form.value.date, _this4._bookings.form.value.duration, (_this4$_options$getVa = (_this4$_options$getVa2 = _this4._options.getValue()) === null || _this4$_options$getVa2 === void 0 ? void 0 : _this4$_options$getVa2.custom) !== null && _this4$_options$getVa !== void 0 ? _this4$_options$getVa : false, desk);
                  case 11:
                    _yield$_this4$_setBoo = _context4.sent;
                    date = _yield$_this4$_setBoo.date;
                    duration = _yield$_this4$_setBoo.duration;
                    user = _yield$_this4$_setBoo.user;
                    user = user || options.host || (0, common_1.currentUser)();
                    user_email = (_user = user) === null || _user === void 0 ? void 0 : _user.email;
                    _this4._bookings.form.patchValue({
                      resources: [desk],
                      asset_id: desk.id,
                      asset_name: desk.name,
                      date: date,
                      duration: options.all_day ? 12 * 60 : duration,
                      map_id: (desk === null || desk === void 0 ? void 0 : desk.map_id) || (desk === null || desk === void 0 ? void 0 : desk.id),
                      description: desk.name,
                      user: user,
                      user_email: user_email,
                      booking_type: 'desk',
                      zones: desk.zone ? [(_desk$zone = desk.zone) === null || _desk$zone === void 0 ? void 0 : _desk$zone.parent_id, (_desk$zone2 = desk.zone) === null || _desk$zone2 === void 0 ? void 0 : _desk$zone2.id] : []
                    });
                    _context4.next = 20;
                    return _this4._bookings.confirmPost()["catch"](function (e) {
                      console.log(e);
                      (0, common_1.notifyError)("Failed to book desk ".concat(desk.name || desk.id, ". ").concat(e.message || e.error || e));
                      throw e;
                    });
                  case 20:
                    _this4._users[desk.map_id] = (_ref16 = options.host || (0, common_1.currentUser)()) === null || _ref16 === void 0 ? void 0 : _ref16.name;
                    (0, common_1.notifySuccess)("Successfully booked desk ".concat(desk.name || desk.id));
                  case 22:
                  case "end":
                    return _context4.stop();
                }
              }, _callee3);
            }));
            return function book_fn() {
              return _ref15.apply(this, arguments);
            };
          }();
          ['mousedown', 'touchstart'].forEach(function (event) {
            return actions.push({
              id: desk.id,
              action: event,
              priority: 10,
              callback: function callback() {
                can_book = true;
                _this4.timeout('booking', function () {
                  return can_book = false;
                });
              }
            });
          });
          ['mouseup', 'touchend'].forEach(function (event) {
            return actions.push({
              id: desk.id,
              action: event,
              priority: 10,
              callback: book_fn
            });
          });
        };
        for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {
          if (_loop2()) continue;
        }
      } catch (err) {
        _iterator4.e(err);
      } finally {
        _iterator4.f();
      }
      this._state.setActions('desks', this._options.getValue().enable_booking ? actions : []);
      this._state.setFeatures('desks', list);
      this.timeout('update', function () {
        return _this4.updateStatus();
      }, 100);
    }
  }, {
    key: "_setBookingTime",
    value: function () {
      var _setBookingTime2 = _asyncToGenerator(function (date, duration) {
        var _this5 = this;
        var host = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;
        var resource = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;
        return /*#__PURE__*/_regeneratorRuntime().mark(function _callee4() {
          var user, until, ref, details;
          return _regeneratorRuntime().wrap(function _callee4$(_context5) {
            while (1) switch (_context5.prev = _context5.next) {
              case 0:
                user = null;
                if (!_this5._settings.get('app.desks.allow_time_changes')) {
                  _context5.next = 12;
                  break;
                }
                until = (0, date_fns_1.endOfDay)((0, date_fns_1.addDays)(Date.now(), _this5._settings.get('app.desks.available_period') || 90));
                ref = _this5._dialog.open(set_datetime_modal_component_1.SetDatetimeModalComponent, {
                  data: {
                    date: date,
                    duration: duration,
                    until: until,
                    host: host,
                    resource: resource
                  }
                });
                _context5.next = 6;
                return ref.afterClosed().toPromise();
              case 6:
                details = _context5.sent;
                if (details) {
                  _context5.next = 9;
                  break;
                }
                throw 'User cancelled';
              case 9:
                date = details.date;
                duration = details.duration;
                user = details.user;
              case 12:
                return _context5.abrupt("return", {
                  date: date,
                  duration: duration,
                  user: user
                });
              case 13:
              case "end":
                return _context5.stop();
            }
          }, _callee4);
        })();
      });
      function _setBookingTime(_x2, _x3) {
        return _setBookingTime2.apply(this, arguments);
      }
      return _setBookingTime;
    }()
  }]);
}(common_1.AsyncHandler);
_ExploreDesksService = ExploreDesksService;
_ExploreDesksService.ɵfac = function ExploreDesksService_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _ExploreDesksService)(i0.ɵɵinject(i1.ExploreStateService), i0.ɵɵinject(i2.OrganisationService), i0.ɵɵinject(i3.SettingsService), i0.ɵɵinject(i4.BookingFormService), i0.ɵɵinject(i5.MatDialog));
};
_ExploreDesksService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({
  token: _ExploreDesksService,
  factory: _ExploreDesksService.ɵfac
});
exports.ExploreDesksService = ExploreDesksService;

/***/ }),

/***/ 51207:
/*!***************************************************************!*\
  !*** ./libs/explore/src/lib/explore-device-info.component.ts ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _taggedTemplateLiteral = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js */ 9959)["default"]);
var _regeneratorRuntime = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/regeneratorRuntime.js */ 8698)["default"]);
var _asyncToGenerator = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/asyncToGenerator.js */ 95386)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _callSuper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/callSuper.js */ 8513)["default"]);
var _inherits = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/inherits.js */ 58160)["default"]);
var _ExploreDeviceInfoComponent, _templateObject, _templateObject2, _templateObject3, _templateObject4, _templateObject5, _templateObject6, _templateObject7, _templateObject8;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.ExploreDeviceInfoComponent = void 0;
var core_1 = __webpack_require__(/*! @angular/core */ 37580);
var ts_client_1 = __webpack_require__(/*! @placeos/ts-client */ 35713);
var date_fns_1 = __webpack_require__(/*! date-fns */ 25773);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var interactive_map_component_1 = __webpack_require__(/*! libs/components/src/lib/interactive-map.component */ 24918);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @placeos/common */ 22797);
var i2 = __webpack_require__(/*! @angular/common */ 60316);
var i3 = __webpack_require__(/*! ../../../components/src/lib/custom-tooltip.component */ 22238);
var _c0 = ["explore-device-info", ""];
function ExploreDeviceInfoComponent_ng_template_5_p_3_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "p", 23)(1, "label");
    i0.ɵɵi18n(2, 4);
    i0.ɵɵelementEnd();
    i0.ɵɵtext(3);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r2 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance(3);
    i0.ɵɵtextInterpolate1(" ", ctx_r2.mac, " ");
  }
}
function ExploreDeviceInfoComponent_ng_template_5_p_12_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "p", 24)(1, "label");
    i0.ɵɵi18n(2, 5);
    i0.ɵɵelementEnd();
    i0.ɵɵtext(3);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r2 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance(3);
    i0.ɵɵtextInterpolate1(" ", ctx_r2.manufacturer, " ");
  }
}
function ExploreDeviceInfoComponent_ng_template_5_p_13_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "p", 25)(1, "label");
    i0.ɵɵi18n(2, 6);
    i0.ɵɵelementEnd();
    i0.ɵɵtext(3);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r2 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance(3);
    i0.ɵɵtextInterpolate1(" ", ctx_r2.os, " ");
  }
}
function ExploreDeviceInfoComponent_ng_template_5_p_14_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "p", 26)(1, "label");
    i0.ɵɵi18n(2, 7);
    i0.ɵɵelementEnd();
    i0.ɵɵtext(3);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r2 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance(3);
    i0.ɵɵtextInterpolate1(" ", ctx_r2.ssid, " ");
  }
}
function ExploreDeviceInfoComponent_ng_template_5_p_15_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "p", 27)(1, "label");
    i0.ɵɵi18n(2, 8);
    i0.ɵɵelementEnd();
    i0.ɵɵtext(3);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r2 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance(3);
    i0.ɵɵtextInterpolate1(" ", (ctx_r2.user == null ? null : ctx_r2.user.name) || (ctx_r2.user == null ? null : ctx_r2.user.username) || ctx_r2.username, " ");
  }
}
function ExploreDeviceInfoComponent_ng_template_5_p_16_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "p", 28)(1, "label");
    i0.ɵɵi18n(2, 9);
    i0.ɵɵelementEnd();
    i0.ɵɵtext(3);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r2 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance(3);
    i0.ɵɵtextInterpolate1(" ", ctx_r2.user.type, " ");
  }
}
function ExploreDeviceInfoComponent_ng_template_5_Template(rf, ctx) {
  if (rf & 1) {
    var _r2 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 14);
    i0.ɵɵlistener("mouseleave", function ExploreDeviceInfoComponent_ng_template_5_Template_div_mouseleave_0_listener() {
      i0.ɵɵrestoreView(_r2);
      var ctx_r2 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r2.close());
    });
    i0.ɵɵelement(1, "div", 15);
    i0.ɵɵelementStart(2, "div", 16);
    i0.ɵɵtemplate(3, ExploreDeviceInfoComponent_ng_template_5_p_3_Template, 4, 1, "p", 17);
    i0.ɵɵelementStart(4, "p")(5, "label");
    i0.ɵɵi18n(6, 2);
    i0.ɵɵelementEnd();
    i0.ɵɵtext(7);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(8, "p")(9, "label");
    i0.ɵɵi18n(10, 3);
    i0.ɵɵelementEnd();
    i0.ɵɵtext(11);
    i0.ɵɵelementEnd();
    i0.ɵɵtemplate(12, ExploreDeviceInfoComponent_ng_template_5_p_12_Template, 4, 1, "p", 18)(13, ExploreDeviceInfoComponent_ng_template_5_p_13_Template, 4, 1, "p", 19)(14, ExploreDeviceInfoComponent_ng_template_5_p_14_Template, 4, 1, "p", 20)(15, ExploreDeviceInfoComponent_ng_template_5_p_15_Template, 4, 1, "p", 21)(16, ExploreDeviceInfoComponent_ng_template_5_p_16_Template, 4, 1, "p", 22);
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var ctx_r2 = i0.ɵɵnextContext();
    i0.ɵɵadvance(3);
    i0.ɵɵproperty("ngIf", ctx_r2.mac && !ctx_r2.hide_fields.includes("mac"));
    i0.ɵɵadvance(4);
    i0.ɵɵtextInterpolate1(" ", ctx_r2.variance, "m");
    i0.ɵɵadvance(4);
    i0.ɵɵtextInterpolate1(" ", ctx_r2.last_seen, "");
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", ctx_r2.manufacturer && !ctx_r2.hide_fields.includes("manufacturer"));
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", ctx_r2.os && !ctx_r2.hide_fields.includes("os"));
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", ctx_r2.ssid && !ctx_r2.hide_fields.includes("ssid"));
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", ctx_r2.username && !ctx_r2.hide_fields.includes("username"));
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", ctx_r2.user && !ctx_r2.hide_fields.includes("user"));
  }
}
var EMPTY = [];
var ExploreDeviceInfoComponent = /*#__PURE__*/function (_common_1$AsyncHandle) {
  function ExploreDeviceInfoComponent(_details, _settings, _element) {
    var _this$_details$varian;
    var _this;
    _classCallCheck(this, ExploreDeviceInfoComponent);
    _this = _callSuper(this, ExploreDeviceInfoComponent);
    _this._details = _details;
    _this._settings = _settings;
    _this._element = _element;
    /** Name of the user associated with the mac address */
    _this.username = '';
    /** User details associated with device */
    _this.user = _this._details.user;
    /** Mac Address of the device */
    _this.mac = _this._details.mac;
    /** Mac Address of the device */
    _this.manufacturer = _this._details.manufacturer;
    /** Mac Address of the device */
    _this.os = _this._details.os;
    /** Mac Address of the device */
    _this.ssid = _this._details.ssid;
    /** Accuracy of the location data */
    _this.variance = (_this$_details$varian = _this._details.variance) === null || _this$_details$varian === void 0 ? void 0 : _this$_details$varian.toFixed(2);
    /** Background color for the dot */
    _this.bg_color = _this._details.bg_color || _this.distance_color;
    _this.zoom = 1;
    return _this;
  }
  _inherits(ExploreDeviceInfoComponent, _common_1$AsyncHandle);
  return _createClass(ExploreDeviceInfoComponent, [{
    key: "hide_fields",
    get: function get() {
      return this._settings.get('app.explore.hide_device_fields') || EMPTY;
    }
    /** Time of the last update */
  }, {
    key: "last_seen",
    get: function get() {
      return (0, date_fns_1.formatDistanceToNow)((this._details.last_seen || 0) * 1000, {
        addSuffix: true
      });
    }
    /** Diameter of the radius circle */
  }, {
    key: "diameter",
    get: function get() {
      return this._details.variance * 100 * this.zoom;
    }
  }, {
    key: "distance",
    get: function get() {
      return Math.abs((0, date_fns_1.differenceInMinutes)((this._details.last_seen || 0) * 1000, new Date()));
    }
  }, {
    key: "distance_color",
    get: function get() {
      return this.distance < 10 ? '#43a047' : this.distance < 20 ? '#ffb300' : '#e53935';
    }
  }, {
    key: "ngOnInit",
    value: function ngOnInit() {
      var _this2 = this;
      var tries = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;
      if (tries > 10) return;
      setTimeout(function () {
        var _this2$_element$nativ;
        var parent = (_this2$_element$nativ = _this2._element.nativeElement.parentElement) === null || _this2$_element$nativ === void 0 ? void 0 : _this2$_element$nativ.parentElement;
        if (!parent) return _this2.ngOnInit(++tries);
        var position = {
          y: parseInt(parent.style.top, 10) / 100,
          x: parseInt(parent.style.left, 10) / 100
        };
        _this2.y_pos = position.y >= 0.5 ? 'bottom' : 'top';
        _this2.x_pos = position.x >= 0.5 ? 'end' : 'start';
        _this2.subscription('zoom', _this2._details.zoom$.subscribe(function (_) {
          return _this2.zoom = _;
        }));
      }, 200);
    }
  }, {
    key: "loadUser",
    value: function () {
      var _loadUser = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
        var mod, details;
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              if (!this.username) {
                _context.next = 2;
                break;
              }
              return _context.abrupt("return");
            case 2:
              mod = (0, ts_client_1.getModule)(this._details.system, 'LocationServices');
              if (mod) {
                _context.next = 5;
                break;
              }
              return _context.abrupt("return");
            case 5:
              this.username = 'Loading...';
              _context.next = 8;
              return mod.execute('check_ownership_of', [this.mac])["catch"](function (_) {
                return null;
              });
            case 8:
              details = _context.sent;
              this.username = details && details.assigned_to ? details.assigned_to : '';
            case 10:
            case "end":
              return _context.stop();
          }
        }, _callee, this);
      }));
      function loadUser() {
        return _loadUser.apply(this, arguments);
      }
      return loadUser;
    }()
  }]);
}(common_1.AsyncHandler);
_ExploreDeviceInfoComponent = ExploreDeviceInfoComponent;
_ExploreDeviceInfoComponent.ɵfac = function ExploreDeviceInfoComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _ExploreDeviceInfoComponent)(i0.ɵɵdirectiveInject(interactive_map_component_1.MAP_FEATURE_DATA), i0.ɵɵdirectiveInject(i1.SettingsService), i0.ɵɵdirectiveInject(i0.ElementRef));
};
_ExploreDeviceInfoComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _ExploreDeviceInfoComponent,
  selectors: [["", "explore-device-info", ""]],
  features: [i0.ɵɵInheritDefinitionFeature],
  attrs: _c0,
  decls: 7,
  vars: 9,
  consts: function consts() {
    var i18n_0;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_1921442792032576180$$LIBS_EXPLORE_SRC_LIB_EXPLORE_DEVICE_INFO_COMPONENT_TS_0 = goog.getMsg("Accuracy:");
      i18n_0 = MSG_EXTERNAL_1921442792032576180$$LIBS_EXPLORE_SRC_LIB_EXPLORE_DEVICE_INFO_COMPONENT_TS_0;
    } else {
      i18n_0 = $localize(_templateObject || (_templateObject = _taggedTemplateLiteral([":\u241F4e79bc7b2a23c2e4e80d256c8167411cf124bd20\u241F1921442792032576180:Accuracy:"])));
    }
    var i18n_1;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_5291488112436395082$$LIBS_EXPLORE_SRC_LIB_EXPLORE_DEVICE_INFO_COMPONENT_TS_1 = goog.getMsg("Last Seen:");
      i18n_1 = MSG_EXTERNAL_5291488112436395082$$LIBS_EXPLORE_SRC_LIB_EXPLORE_DEVICE_INFO_COMPONENT_TS_1;
    } else {
      i18n_1 = $localize(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([":\u241F1c564bebf178f9c70f2c66a80393137bfa0d2ea8\u241F5291488112436395082:Last Seen:"])));
    }
    var i18n_2;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_5080596488336446120$$LIBS_EXPLORE_SRC_LIB_EXPLORE_DEVICE_INFO_COMPONENT_TS_2 = goog.getMsg("MAC:");
      i18n_2 = MSG_EXTERNAL_5080596488336446120$$LIBS_EXPLORE_SRC_LIB_EXPLORE_DEVICE_INFO_COMPONENT_TS_2;
    } else {
      i18n_2 = $localize(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([":\u241F14802d5580219b4522c9c50e1a9f401aee191e1e\u241F5080596488336446120:MAC:"])));
    }
    var i18n_3;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_6296767522110275448$$LIBS_EXPLORE_SRC_LIB_EXPLORE_DEVICE_INFO_COMPONENT_TS_3 = goog.getMsg("Manufacturer:");
      i18n_3 = MSG_EXTERNAL_6296767522110275448$$LIBS_EXPLORE_SRC_LIB_EXPLORE_DEVICE_INFO_COMPONENT_TS_3;
    } else {
      i18n_3 = $localize(_templateObject4 || (_templateObject4 = _taggedTemplateLiteral([":\u241Fa082daef9c0b66268ce56dfa8d96d47a04d2c4b1\u241F6296767522110275448:Manufacturer:"])));
    }
    var i18n_4;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_2346706060395913038$$LIBS_EXPLORE_SRC_LIB_EXPLORE_DEVICE_INFO_COMPONENT_TS_4 = goog.getMsg("OS:");
      i18n_4 = MSG_EXTERNAL_2346706060395913038$$LIBS_EXPLORE_SRC_LIB_EXPLORE_DEVICE_INFO_COMPONENT_TS_4;
    } else {
      i18n_4 = $localize(_templateObject5 || (_templateObject5 = _taggedTemplateLiteral([":\u241F5544405b325c518c94412239610d44250d5a223a\u241F2346706060395913038:OS:"])));
    }
    var i18n_5;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_4345272263810420547$$LIBS_EXPLORE_SRC_LIB_EXPLORE_DEVICE_INFO_COMPONENT_TS_5 = goog.getMsg("SSID:");
      i18n_5 = MSG_EXTERNAL_4345272263810420547$$LIBS_EXPLORE_SRC_LIB_EXPLORE_DEVICE_INFO_COMPONENT_TS_5;
    } else {
      i18n_5 = $localize(_templateObject6 || (_templateObject6 = _taggedTemplateLiteral([":\u241Fafd0fc7b37f54299537ba2abc9babf749adf383e\u241F4345272263810420547:SSID:"])));
    }
    var i18n_6;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_140822705245800362$$LIBS_EXPLORE_SRC_LIB_EXPLORE_DEVICE_INFO_COMPONENT_TS_6 = goog.getMsg("Username:");
      i18n_6 = MSG_EXTERNAL_140822705245800362$$LIBS_EXPLORE_SRC_LIB_EXPLORE_DEVICE_INFO_COMPONENT_TS_6;
    } else {
      i18n_6 = $localize(_templateObject7 || (_templateObject7 = _taggedTemplateLiteral([":\u241F67fc3fe0566f8700b84a908c35497759db78addc\u241F140822705245800362:Username:"])));
    }
    var i18n_7;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_2736556170366900089$$LIBS_EXPLORE_SRC_LIB_EXPLORE_DEVICE_INFO_COMPONENT_TS_7 = goog.getMsg("Type:");
      i18n_7 = MSG_EXTERNAL_2736556170366900089$$LIBS_EXPLORE_SRC_LIB_EXPLORE_DEVICE_INFO_COMPONENT_TS_7;
    } else {
      i18n_7 = $localize(_templateObject8 || (_templateObject8 = _taggedTemplateLiteral([":\u241Fe78c0d60ac39787f62c9159646fe0b3c1ed55a1d\u241F2736556170366900089:Type:"])));
    }
    return [["dot", ""], ["device_tooltip", ""], i18n_0, i18n_1, i18n_2, i18n_3, i18n_4, i18n_5, i18n_6, i18n_7, ["name", "radius", 1, "radius", "absolute", "center", "bg-info", "bg-opacity-25", "border-8", "border-dashed", "border-blue-600", "rounded-full"], ["shadow", "", 1, "absolute", "center", "bg-neutral", "h-8", "w-8", "rounded-full"], ["name", "dot", 1, "h-3", "w-3", "absolute", "center", "rounded-full", "shadow", "border-2", "border-white"], ["customTooltip", "", 1, "absolute", "inset-0", "pointer-events-auto", 3, "mouseenter", "content", "backdrop", "xPosition", "yPosition", "hover"], ["name", "device-info", 1, "w-64", "rounded", "bg-base-100", "p-4", "top-0", "left-0", "shadow", "pointer-events-none", "mx-2", 3, "mouseleave"], [1, "arrow"], [1, "details"], ["class", "break-words", 4, "ngIf"], ["type", "", 4, "ngIf"], ["os", "", 4, "ngIf"], ["ssid", "", 4, "ngIf"], ["username", "", 4, "ngIf"], ["user", "", 4, "ngIf"], [1, "break-words"], ["type", ""], ["os", ""], ["ssid", ""], ["username", ""], ["user", ""]];
  },
  template: function ExploreDeviceInfoComponent_Template(rf, ctx) {
    if (rf & 1) {
      var _r1 = i0.ɵɵgetCurrentView();
      i0.ɵɵelement(0, "div", 10)(1, "div", 11)(2, "div", 12, 0);
      i0.ɵɵelementStart(4, "div", 13);
      i0.ɵɵlistener("mouseenter", function ExploreDeviceInfoComponent_Template_div_mouseenter_4_listener() {
        i0.ɵɵrestoreView(_r1);
        return i0.ɵɵresetView(ctx.loadUser());
      });
      i0.ɵɵelementEnd();
      i0.ɵɵtemplate(5, ExploreDeviceInfoComponent_ng_template_5_Template, 17, 8, "ng-template", null, 1, i0.ɵɵtemplateRefExtractor);
    }
    if (rf & 2) {
      var device_tooltip_r4 = i0.ɵɵreference(6);
      i0.ɵɵstyleMap("height: " + ctx.diameter + "%; width: " + ctx.diameter + "%;");
      i0.ɵɵadvance(2);
      i0.ɵɵstyleProp("background-color", ctx.bg_color);
      i0.ɵɵadvance(2);
      i0.ɵɵproperty("content", device_tooltip_r4)("backdrop", false)("xPosition", ctx.x_pos)("yPosition", ctx.y_pos)("hover", true);
    }
  },
  dependencies: [i2.NgIf, i3.CustomTooltipComponent],
  styles: ["[_nghost-%COMP%] {\n                pointer-events: auto;\n            }\n\n            [_nghost-%COMP%]    > [name='dot'][_ngcontent-%COMP%] {\n                background-color: #616161;\n            }\n\n            [_nghost-%COMP%]:hover    > [name='radius'][_ngcontent-%COMP%] {\n                opacity: 1;\n            }\n\n            [name='radius'][_ngcontent-%COMP%] {\n                opacity: 0;\n                transition: opacity 200ms;\n                pointer-events: none;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImV4cGxvcmUtZGV2aWNlLWluZm8uY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxvQkFBb0I7WUFDeEI7O1lBRUE7Z0JBQ0kseUJBQXlCO1lBQzdCOztZQUVBO2dCQUNJLFVBQVU7WUFDZDs7WUFFQTtnQkFDSSxVQUFVO2dCQUNWLHlCQUF5QjtnQkFDekIsb0JBQW9CO1lBQ3hCIiwiZmlsZSI6ImV4cGxvcmUtZGV2aWNlLWluZm8uY29tcG9uZW50LnRzIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICA6aG9zdCB7XG4gICAgICAgICAgICAgICAgcG9pbnRlci1ldmVudHM6IGF1dG87XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIDpob3N0ID4gW25hbWU9J2RvdCddIHtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjNjE2MTYxO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICA6aG9zdDpob3ZlciA+IFtuYW1lPSdyYWRpdXMnXSB7XG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgW25hbWU9J3JhZGl1cyddIHtcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAwO1xuICAgICAgICAgICAgICAgIHRyYW5zaXRpb246IG9wYWNpdHkgMjAwbXM7XG4gICAgICAgICAgICAgICAgcG9pbnRlci1ldmVudHM6IG5vbmU7XG4gICAgICAgICAgICB9XG4gICAgICAgICJdfQ== */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvZXhwbG9yZS9zcmMvbGliL2V4cGxvcmUtZGV2aWNlLWluZm8uY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxvQkFBb0I7WUFDeEI7O1lBRUE7Z0JBQ0kseUJBQXlCO1lBQzdCOztZQUVBO2dCQUNJLFVBQVU7WUFDZDs7WUFFQTtnQkFDSSxVQUFVO2dCQUNWLHlCQUF5QjtnQkFDekIsb0JBQW9CO1lBQ3hCOztBQUVaLGcrQkFBZytCIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICA6aG9zdCB7XG4gICAgICAgICAgICAgICAgcG9pbnRlci1ldmVudHM6IGF1dG87XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIDpob3N0ID4gW25hbWU9J2RvdCddIHtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjNjE2MTYxO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICA6aG9zdDpob3ZlciA+IFtuYW1lPSdyYWRpdXMnXSB7XG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgW25hbWU9J3JhZGl1cyddIHtcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAwO1xuICAgICAgICAgICAgICAgIHRyYW5zaXRpb246IG9wYWNpdHkgMjAwbXM7XG4gICAgICAgICAgICAgICAgcG9pbnRlci1ldmVudHM6IG5vbmU7XG4gICAgICAgICAgICB9XG4gICAgICAgICJdLCJzb3VyY2VSb290IjoiIn0= */"]
});
exports.ExploreDeviceInfoComponent = ExploreDeviceInfoComponent;

/***/ }),

/***/ 83207:
/*!********************************************************!*\
  !*** ./libs/explore/src/lib/explore-icon.component.ts ***!
  \********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _ExploreIconComponent;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.ExploreIconComponent = void 0;
var components_1 = __webpack_require__(/*! @placeos/components */ 51588);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! ../../../components/src/lib/icon.component */ 69434);
var ExploreIconComponent = /*#__PURE__*/_createClass(function ExploreIconComponent(_details) {
  _classCallCheck(this, ExploreIconComponent);
  this._details = _details;
  this.icon = this._details.icon || {
    content: 'done'
  };
  this.color = this._details.color || 'var(--in)';
  this.text_color = this._details.text_color || 'var(--inc)';
});
_ExploreIconComponent = ExploreIconComponent;
_ExploreIconComponent.ɵfac = function ExploreIconComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _ExploreIconComponent)(i0.ɵɵdirectiveInject(components_1.MAP_FEATURE_DATA));
};
_ExploreIconComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _ExploreIconComponent,
  selectors: [["explore-icon"]],
  decls: 2,
  vars: 5,
  consts: [[1, "flex", "items-center", "justify-center", "h-8", "w-8", "shadow", "rounded-full", "border", "border-base-200"], [1, "text-xl", 3, "icon"]],
  template: function ExploreIconComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵelementStart(0, "div", 0);
      i0.ɵɵelement(1, "app-icon", 1);
      i0.ɵɵelementEnd();
    }
    if (rf & 2) {
      i0.ɵɵstyleProp("background-color", ctx.color)("color", ctx.text_color);
      i0.ɵɵadvance();
      i0.ɵɵproperty("icon", ctx.icon);
    }
  },
  dependencies: [i1.IconComponent],
  styles: ["[_nghost-%COMP%] {\n                display: flex;\n                height: 100%;\n                width: 100%;\n                align-items: end;\n                justify-content: end;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImV4cGxvcmUtaWNvbi5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLGFBQWE7Z0JBQ2IsWUFBWTtnQkFDWixXQUFXO2dCQUNYLGdCQUFnQjtnQkFDaEIsb0JBQW9CO1lBQ3hCIiwiZmlsZSI6ImV4cGxvcmUtaWNvbi5jb21wb25lbnQudHMiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIDpob3N0IHtcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICAgICAgICBhbGlnbi1pdGVtczogZW5kO1xuICAgICAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogZW5kO1xuICAgICAgICAgICAgfVxuICAgICAgICAiXX0= */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvZXhwbG9yZS9zcmMvbGliL2V4cGxvcmUtaWNvbi5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLGFBQWE7Z0JBQ2IsWUFBWTtnQkFDWixXQUFXO2dCQUNYLGdCQUFnQjtnQkFDaEIsb0JBQW9CO1lBQ3hCOztBQUVaLG9tQkFBb21CIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICA6aG9zdCB7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICAgICAgYWxpZ24taXRlbXM6IGVuZDtcbiAgICAgICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGVuZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl0sInNvdXJjZVJvb3QiOiIifQ== */"]
});
exports.ExploreIconComponent = ExploreIconComponent;

/***/ }),

/***/ 84810:
/*!********************************************************************!*\
  !*** ./libs/explore/src/lib/explore-locker-bank-info.component.ts ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _objectSpread = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/objectSpread2.js */ 34092)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _ExploreLockerBankInfoComponent;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.ExploreLockerBankInfoComponent = void 0;
var core_1 = __webpack_require__(/*! @angular/core */ 37580);
var components_1 = __webpack_require__(/*! @placeos/components */ 51588);
var explore_locker_bank_modal_component_1 = __webpack_require__(/*! ./explore-locker-bank-modal.component */ 50795);
var dialog_1 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var i2 = __webpack_require__(/*! ../../../components/src/lib/custom-tooltip.component */ 22238);
function ExploreLockerBankInfoComponent_ng_template_2_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 3)(1, "h3", 4);
    i0.ɵɵtext(2);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(3, "p", 5);
    i0.ɵɵtext(4);
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵclassMap("absolute rounded bg-base-100 p-4 top-0 left-0 shadow pointer-events-none " + ctx_r1.x_pos + " " + ctx_r1.y_pos);
    i0.ɵɵproperty("id", ctx_r1.map_id);
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate(ctx_r1.bank.name);
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate2(" ", ctx_r1.in_use_count, " lockers in use of ", ctx_r1.bank.lockers.length || 1, " ");
  }
}
var ExploreLockerBankInfoComponent = /*#__PURE__*/function () {
  function ExploreLockerBankInfoComponent(_details, _element, _dialog) {
    _classCallCheck(this, ExploreLockerBankInfoComponent);
    this._details = _details;
    this._element = _element;
    this._dialog = _dialog;
    this.bank = this._details.bank;
    this.in_use_count = this._details.in_use_count;
  }
  return _createClass(ExploreLockerBankInfoComponent, [{
    key: "ngOnInit",
    value: function ngOnInit() {
      var _this = this;
      var tries = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;
      if (tries > 10) return;
      setTimeout(function () {
        var _this$_element$native;
        var parent = (_this$_element$native = _this._element.nativeElement.parentElement) === null || _this$_element$native === void 0 ? void 0 : _this$_element$native.parentElement;
        if (!parent) return _this.ngOnInit(++tries);
        var position = {
          y: parseInt(parent.style.top, 10) / 100,
          x: parseInt(parent.style.left, 10) / 100
        };
        _this.y_pos = position.y >= 0.5 ? 'bottom' : 'top';
        _this.x_pos = position.x >= 0.5 ? 'right' : 'left';
      }, 200);
    }
  }, {
    key: "openBankModal",
    value: function openBankModal() {
      this._dialog.open(explore_locker_bank_modal_component_1.ExploreLockerBankModalComponent, {
        data: _objectSpread({}, this._details)
      });
    }
  }]);
}();
_ExploreLockerBankInfoComponent = ExploreLockerBankInfoComponent;
_ExploreLockerBankInfoComponent.ɵfac = function ExploreLockerBankInfoComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _ExploreLockerBankInfoComponent)(i0.ɵɵdirectiveInject(components_1.MAP_FEATURE_DATA), i0.ɵɵdirectiveInject(i0.ElementRef), i0.ɵɵdirectiveInject(i1.MatDialog));
};
_ExploreLockerBankInfoComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _ExploreLockerBankInfoComponent,
  selectors: [["explore-locker-bank-info"]],
  decls: 4,
  vars: 6,
  consts: [["desk_tooltip", ""], [1, "h-full", "w-full", "pointer-events-auto", "relative", 3, "click"], ["customTooltip", "", 1, "h-full", "w-full", "pointer-events-auto", "relative", 3, "content", "backdrop", "xPosition", "yPosition", "hover", "delay"], ["name", "space-info", 3, "id"], [1, "font-medium"], [1, "whitespace-nowrap", "text-sm"]],
  template: function ExploreLockerBankInfoComponent_Template(rf, ctx) {
    if (rf & 1) {
      var _r1 = i0.ɵɵgetCurrentView();
      i0.ɵɵelementStart(0, "button", 1);
      i0.ɵɵlistener("click", function ExploreLockerBankInfoComponent_Template_button_click_0_listener() {
        i0.ɵɵrestoreView(_r1);
        return i0.ɵɵresetView(ctx.openBankModal());
      });
      i0.ɵɵelement(1, "div", 2);
      i0.ɵɵelementEnd();
      i0.ɵɵtemplate(2, ExploreLockerBankInfoComponent_ng_template_2_Template, 5, 6, "ng-template", null, 0, i0.ɵɵtemplateRefExtractor);
    }
    if (rf & 2) {
      var desk_tooltip_r3 = i0.ɵɵreference(3);
      i0.ɵɵadvance();
      i0.ɵɵproperty("content", desk_tooltip_r3)("backdrop", false)("xPosition", "center")("yPosition", "center")("hover", true)("delay", 3000);
    }
  },
  dependencies: [i2.CustomTooltipComponent]
});
exports.ExploreLockerBankInfoComponent = ExploreLockerBankInfoComponent;

/***/ }),

/***/ 50795:
/*!*********************************************************************!*\
  !*** ./libs/explore/src/lib/explore-locker-bank-modal.component.ts ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _ExploreLockerBankModalComponent;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.ExploreLockerBankModalComponent = void 0;
var dialog_1 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var lockers_service_1 = __webpack_require__(/*! libs/bookings/src/lib/lockers.service */ 98796);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! ../../../components/src/lib/icon.component */ 69434);
var i2 = __webpack_require__(/*! @angular/material/core */ 74646);
var i3 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var i4 = __webpack_require__(/*! ../../../bookings/src/lib/locker-grid.component */ 84854);
var ExploreLockerBankModalComponent = /*#__PURE__*/_createClass(function ExploreLockerBankModalComponent(_data) {
  _classCallCheck(this, ExploreLockerBankModalComponent);
  this._data = _data;
  this.bank = this._data.bank;
  this.lockers = this._data.lockers.reduce(function (map, l) {
    map[l.id] = 'busy';
    return map;
  }, {});
});
_ExploreLockerBankModalComponent = ExploreLockerBankModalComponent;
_ExploreLockerBankModalComponent.ɵfac = function ExploreLockerBankModalComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _ExploreLockerBankModalComponent)(i0.ɵɵdirectiveInject(dialog_1.MAT_DIALOG_DATA));
};
_ExploreLockerBankModalComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _ExploreLockerBankModalComponent,
  selectors: [["explore-locker-bank-modal"]],
  decls: 8,
  vars: 3,
  consts: [[1, "text-xl", "font-medium"], ["btn", "", "icon", "", "matRipple", "", "mat-dialog-close", ""], [1, "h-[65vh]", "overflow-hidden"], [3, "bank", "bank_status"]],
  template: function ExploreLockerBankModalComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵelementStart(0, "header")(1, "h2", 0);
      i0.ɵɵtext(2);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(3, "button", 1)(4, "app-icon");
      i0.ɵɵtext(5, "close");
      i0.ɵɵelementEnd()()();
      i0.ɵɵelementStart(6, "main", 2);
      i0.ɵɵelement(7, "locker-grid", 3);
      i0.ɵɵelementEnd();
    }
    if (rf & 2) {
      i0.ɵɵadvance(2);
      i0.ɵɵtextInterpolate(ctx.bank.name);
      i0.ɵɵadvance(5);
      i0.ɵɵproperty("bank", ctx.bank)("bank_status", ctx.lockers);
    }
  },
  dependencies: [i1.IconComponent, i2.MatRipple, i3.MatDialogClose, i4.LockerGridComponent]
});
exports.ExploreLockerBankModalComponent = ExploreLockerBankModalComponent;

/***/ }),

/***/ 49591:
/*!*********************************************************!*\
  !*** ./libs/explore/src/lib/explore-lockers.service.ts ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _createForOfIteratorHelper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createForOfIteratorHelper.js */ 36350)["default"]);
var _slicedToArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/slicedToArray.js */ 6282)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _callSuper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/callSuper.js */ 8513)["default"]);
var _inherits = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/inherits.js */ 58160)["default"]);
var _ExploreLockersService;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.ExploreLockersService = void 0;
var lockers_service_1 = __webpack_require__(/*! libs/bookings/src/lib/lockers.service */ 98796);
var explore_state_service_1 = __webpack_require__(/*! ./explore-state.service */ 12455);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var operators_1 = __webpack_require__(/*! rxjs/operators */ 97303);
var rxjs_1 = __webpack_require__(/*! rxjs */ 15681);
var ts_client_1 = __webpack_require__(/*! @placeos/ts-client */ 35713);
var organisation_1 = __webpack_require__(/*! @placeos/organisation */ 2510);
var explore_locker_bank_info_component_1 = __webpack_require__(/*! ./explore-locker-bank-info.component */ 84810);
var explore_spaces_service_1 = __webpack_require__(/*! ./explore-spaces.service */ 65897);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! libs/bookings/src/lib/lockers.service */ 98796);
var i2 = __webpack_require__(/*! ./explore-state.service */ 12455);
var i3 = __webpack_require__(/*! @placeos/organisation */ 2510);
var i4 = __webpack_require__(/*! @placeos/common */ 22797);
var ExploreLockersService = /*#__PURE__*/function (_common_1$AsyncHandle) {
  function ExploreLockersService(_lockers, _explore, _org, _settings) {
    var _this;
    _classCallCheck(this, ExploreLockersService);
    _this = _callSuper(this, ExploreLockersService);
    _this._lockers = _lockers;
    _this._explore = _explore;
    _this._org = _org;
    _this._settings = _settings;
    _this._status = new rxjs_1.BehaviorSubject([]);
    _this.lockers$ = _this._lockers.filtered_lockers$;
    _this.status = (0, rxjs_1.combineLatest)([_this._explore.level, _this._explore.options, _this._org.active_building]).pipe((0, operators_1.map)(function (_ref) {
      var _ref2 = _slicedToArray(_ref, 2),
        lvl = _ref2[0],
        is_public = _ref2[1].is_public;
      if (!lvl || is_public) return [];
      var sys_id = _this._org.binding('area_management');
      if (!sys_id) return (0, rxjs_1.of)({});
      var binding = (0, ts_client_1.getModule)(sys_id, 'AreaManagement').binding(lvl.id);
      _this.subscription("lvl-in_use", binding.listen().subscribe(function (data) {
        var _data$value;
        return _this._status.next((data === null || data === void 0 || (_data$value = data.value) === null || _data$value === void 0 ? void 0 : _data$value.filter(function (_) {
          return _.location === 'locker';
        })) || []);
      }));
      _this.subscription('lvl-in_use_bind', binding.bind());
    }));
    _this.locker_status = (0, rxjs_1.combineLatest)([_this._explore.level, _this._lockers.lockers_banks$, _this.lockers$, _this._status]).pipe((0, operators_1.map)(function (_ref3) {
      var _ref4 = _slicedToArray(_ref3, 4),
        lvl = _ref4[0],
        locker_banks = _ref4[1],
        lockers = _ref4[2],
        status = _ref4[3];
      if (!lvl) return [];
      var features = [];
      var map_status = {};
      var colours = _this._settings.get('app.explore.colors') || {};
      var banks = (0, common_1.unique)(locker_banks.filter(function (_) {
        return _.level_id === lvl.id;
      }).map(function (_) {
        return _.id;
      }));
      var _iterator = _createForOfIteratorHelper(banks),
        _step;
      try {
        var _loop = function _loop() {
          var bank = _step.value;
          var bank_lockers = lockers.filter(function (_) {
            return _.bank_id === bank;
          });
          var in_use_count = 0;
          var _iterator2 = _createForOfIteratorHelper(bank_lockers),
            _step2;
          try {
            var _loop2 = function _loop2() {
              var locker = _step2.value;
              var in_use = status.find(function (_) {
                return _.locker_id === locker.id && _.allocated;
              });
              in_use_count += in_use ? 1 : 0;
            };
            for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
              _loop2();
            }
          } catch (err) {
            _iterator2.e(err);
          } finally {
            _iterator2.f();
          }
          var bank_info = locker_banks.find(function (_) {
            return _.id === bank;
          });
          features.push({
            location: bank_info.map_id,
            content: explore_locker_bank_info_component_1.ExploreLockerBankInfoComponent,
            full_size: true,
            no_scale: true,
            z_index: 20,
            data: {
              bank: bank_info,
              lockers: lockers,
              in_use_count: in_use_count,
              locker_count: bank_lockers.length,
              system: _this._org.binding('area_management')
            }
          });
          var in_use_percent = in_use_count / bank_lockers.length;
          var value = in_use_percent > 0.8 ? 'busy' : in_use_percent > 0.3 ? 'pending' : 'free';
          map_status["#".concat(bank_info.map_id)] = {
            fill: colours["lockers-".concat(value)] || colours["".concat(value)] || explore_spaces_service_1.DEFAULT_COLOURS["".concat(value)]
          };
        };
        for (_iterator.s(); !(_step = _iterator.n()).done;) {
          _loop();
        }
      } catch (err) {
        _iterator.e(err);
      } finally {
        _iterator.f();
      }
      _this._explore.setStyles('lockers', map_status);
      _this._explore.setFeatures('lockers', features);
    }));
    _this.subscription('level', _this._explore.level.pipe((0, operators_1.filter)(function (_) {
      return !!_;
    })).subscribe(function (level) {
      return _this._lockers.setLevel(level.id);
    }));
    _this.subscription('status', _this.status.subscribe());
    _this.subscription('locker_status', _this.locker_status.subscribe());
    return _this;
  }
  _inherits(ExploreLockersService, _common_1$AsyncHandle);
  return _createClass(ExploreLockersService);
}(common_1.AsyncHandler);
_ExploreLockersService = ExploreLockersService;
_ExploreLockersService.ɵfac = function ExploreLockersService_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _ExploreLockersService)(i0.ɵɵinject(i1.LockersService), i0.ɵɵinject(i2.ExploreStateService), i0.ɵɵinject(i3.OrganisationService), i0.ɵɵinject(i4.SettingsService));
};
_ExploreLockersService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({
  token: _ExploreLockersService,
  factory: _ExploreLockersService.ɵfac,
  providedIn: 'root'
});
exports.ExploreLockersService = ExploreLockersService;

/***/ }),

/***/ 60468:
/*!***************************************************************!*\
  !*** ./libs/explore/src/lib/explore-map-control.component.ts ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _taggedTemplateLiteral = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js */ 9959)["default"]);
var _regeneratorRuntime = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/regeneratorRuntime.js */ 8698)["default"]);
var _asyncToGenerator = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/asyncToGenerator.js */ 95386)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _callSuper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/callSuper.js */ 8513)["default"]);
var _inherits = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/inherits.js */ 58160)["default"]);
var _ExploreMapControlComponent, _templateObject, _templateObject2;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.ExploreMapControlComponent = void 0;
var router_1 = __webpack_require__(/*! @angular/router */ 95072);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var operators_1 = __webpack_require__(/*! rxjs/operators */ 97303);
var organisation_service_1 = __webpack_require__(/*! libs/organisation/src/lib/organisation.service */ 19863);
var explore_state_service_1 = __webpack_require__(/*! ./explore-state.service */ 12455);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! libs/organisation/src/lib/organisation.service */ 19863);
var i2 = __webpack_require__(/*! ./explore-state.service */ 12455);
var i3 = __webpack_require__(/*! @angular/router */ 95072);
var i4 = __webpack_require__(/*! @angular/common */ 60316);
var i5 = __webpack_require__(/*! @angular/material/core */ 74646);
var i6 = __webpack_require__(/*! @angular/material/form-field */ 24950);
var i7 = __webpack_require__(/*! @angular/material/select */ 25175);
var i8 = __webpack_require__(/*! @angular/forms */ 34456);
function ExploreMapControlComponent_mat_form_field_1_mat_option_3_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "mat-option", 6);
    i0.ɵɵtext(1);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var bld_r3 = ctx.$implicit;
    i0.ɵɵproperty("value", bld_r3);
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", bld_r3.display_name || bld_r3.name, " ");
  }
}
function ExploreMapControlComponent_mat_form_field_1_Template(rf, ctx) {
  if (rf & 1) {
    var _r1 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "mat-form-field", 3)(1, "mat-select", 4);
    i0.ɵɵpipe(2, "async");
    i0.ɵɵlistener("ngModelChange", function ExploreMapControlComponent_mat_form_field_1_Template_mat_select_ngModelChange_1_listener($event) {
      i0.ɵɵrestoreView(_r1);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.setBuilding($event));
    });
    i0.ɵɵtemplate(3, ExploreMapControlComponent_mat_form_field_1_mat_option_3_Template, 2, 2, "mat-option", 5);
    i0.ɵɵpipe(4, "async");
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngModel", i0.ɵɵpipeBind1(2, 2, ctx_r1.building));
    i0.ɵɵadvance(2);
    i0.ɵɵproperty("ngForOf", i0.ɵɵpipeBind1(4, 4, ctx_r1.buildings));
  }
}
function ExploreMapControlComponent_mat_form_field_3_mat_option_4_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "mat-option", 6);
    i0.ɵɵtext(1);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var lvl_r5 = ctx.$implicit;
    i0.ɵɵproperty("value", lvl_r5);
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", lvl_r5.display_name || lvl_r5.name, " ");
  }
}
function ExploreMapControlComponent_mat_form_field_3_Template(rf, ctx) {
  if (rf & 1) {
    var _r4 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "mat-form-field", 7);
    i0.ɵɵpipe(1, "async");
    i0.ɵɵelementStart(2, "mat-select", 8);
    i0.ɵɵpipe(3, "async");
    i0.ɵɵlistener("ngModelChange", function ExploreMapControlComponent_mat_form_field_3_Template_mat_select_ngModelChange_2_listener($event) {
      i0.ɵɵrestoreView(_r4);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.setLevel($event));
    });
    i0.ɵɵtemplate(4, ExploreMapControlComponent_mat_form_field_3_mat_option_4_Template, 2, 2, "mat-option", 5);
    i0.ɵɵpipe(5, "async");
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var tmp_1_0;
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵattribute("has-bld", ((tmp_1_0 = i0.ɵɵpipeBind1(1, 3, ctx_r1.buildings)) == null ? null : tmp_1_0.length) > 1);
    i0.ɵɵadvance(2);
    i0.ɵɵproperty("ngModel", i0.ɵɵpipeBind1(3, 5, ctx_r1.level));
    i0.ɵɵadvance(2);
    i0.ɵɵproperty("ngForOf", i0.ɵɵpipeBind1(5, 7, ctx_r1.levels));
  }
}
var ExploreMapControlComponent = /*#__PURE__*/function (_common_1$AsyncHandle) {
  function ExploreMapControlComponent(_org, _state, _router, _route) {
    var _this;
    _classCallCheck(this, ExploreMapControlComponent);
    _this = _callSuper(this, ExploreMapControlComponent);
    _this._org = _org;
    _this._state = _state;
    _this._router = _router;
    _this._route = _route;
    /** List of available buildings */
    _this.buildings = _this._org.active_buildings;
    /** Currently active building */
    _this.building = _this._org.active_building;
    /** List of availabel levels */
    _this.levels = _this._org.active_levels;
    /** Currently active level */
    _this.level = _this._state.level;
    /** Set the currently active level */
    _this.setLevel = function (lvl) {
      _this._state.setFeatures('_located', []);
      _this.timeout('set_level', function () {
        return _this._router.navigate([], {
          relativeTo: _this._route,
          queryParams: {
            zone: lvl.id
          }
        });
      }, 201);
    };
    /** Set the currenly active building */
    _this.setBuilding = function (bld) {
      return _this._org.building = bld;
    };
    return _this;
  }
  _inherits(ExploreMapControlComponent, _common_1$AsyncHandle);
  return _createClass(ExploreMapControlComponent, [{
    key: "ngOnInit",
    value: function () {
      var _ngOnInit = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
        var _this2 = this;
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              _context.next = 2;
              return this._org.initialised.pipe((0, operators_1.first)(function (_) {
                return _;
              })).toPromise();
            case 2:
              this.subscription('route.query', this._route.queryParamMap.subscribe(function (params) {
                return params.has('zone') ? _this2._state.setLevel(params.get('zone')) : '';
              }));
            case 3:
            case "end":
              return _context.stop();
          }
        }, _callee, this);
      }));
      function ngOnInit() {
        return _ngOnInit.apply(this, arguments);
      }
      return ngOnInit;
    }()
  }]);
}(common_1.AsyncHandler);
_ExploreMapControlComponent = ExploreMapControlComponent;
_ExploreMapControlComponent.ɵfac = function ExploreMapControlComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _ExploreMapControlComponent)(i0.ɵɵdirectiveInject(i1.OrganisationService), i0.ɵɵdirectiveInject(i2.ExploreStateService), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i3.ActivatedRoute));
};
_ExploreMapControlComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _ExploreMapControlComponent,
  selectors: [["explore-map-controls"]],
  features: [i0.ɵɵInheritDefinitionFeature],
  decls: 5,
  vars: 6,
  consts: function consts() {
    var i18n_0;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_1533056789917995243$$LIBS_EXPLORE_SRC_LIB_EXPLORE_MAP_CONTROL_COMPONENT_TS_0 = goog.getMsg("Select Building...");
      i18n_0 = MSG_EXTERNAL_1533056789917995243$$LIBS_EXPLORE_SRC_LIB_EXPLORE_MAP_CONTROL_COMPONENT_TS_0;
    } else {
      i18n_0 = $localize(_templateObject || (_templateObject = _taggedTemplateLiteral([":\u241Fdea1f8bc2b32584fadf07ef815709b946d3726ff\u241F1533056789917995243:Select Building..."])));
    }
    var i18n_1;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_7854898325453225869$$LIBS_EXPLORE_SRC_LIB_EXPLORE_MAP_CONTROL_COMPONENT_TS_1 = goog.getMsg("Select Level...");
      i18n_1 = MSG_EXTERNAL_7854898325453225869$$LIBS_EXPLORE_SRC_LIB_EXPLORE_MAP_CONTROL_COMPONENT_TS_1;
    } else {
      i18n_1 = $localize(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([":\u241F025373b97845a8c2b54d2eb17d9c479f64207b11\u241F7854898325453225869:Select Level..."])));
    }
    return [[1, "flex", "space-x-2", "w-full"], ["overlay", "", "buildings", "", "class", "flex-1 min-w-[10.5rem] no-subscript", "has-bld", "true", "appearance", "outline", 4, "ngIf"], ["overlay", "", "levels", "", "class", "flex-1 min-w-[10.25rem] no-subscript", "appearance", "outline", 4, "ngIf"], ["overlay", "", "buildings", "", "has-bld", "true", "appearance", "outline", 1, "flex-1", "min-w-[10.5rem]", "no-subscript"], ["placeholder", i18n_0, 3, "ngModelChange", "ngModel"], [3, "value", 4, "ngFor", "ngForOf"], [3, "value"], ["overlay", "", "levels", "", "appearance", "outline", 1, "flex-1", "min-w-[10.25rem]", "no-subscript"], ["placeholder", i18n_1, 3, "ngModelChange", "ngModel"]];
  },
  template: function ExploreMapControlComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵelementStart(0, "div", 0);
      i0.ɵɵtemplate(1, ExploreMapControlComponent_mat_form_field_1_Template, 5, 6, "mat-form-field", 1);
      i0.ɵɵpipe(2, "async");
      i0.ɵɵtemplate(3, ExploreMapControlComponent_mat_form_field_3_Template, 6, 9, "mat-form-field", 2);
      i0.ɵɵpipe(4, "async");
      i0.ɵɵelementEnd();
    }
    if (rf & 2) {
      var tmp_0_0;
      var tmp_1_0;
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", ((tmp_0_0 = i0.ɵɵpipeBind1(2, 2, ctx.buildings)) == null ? null : tmp_0_0.length) > 1);
      i0.ɵɵadvance(2);
      i0.ɵɵproperty("ngIf", (tmp_1_0 = i0.ɵɵpipeBind1(4, 4, ctx.levels)) == null ? null : tmp_1_0.length);
    }
  },
  dependencies: [i4.NgForOf, i4.NgIf, i5.MatOption, i6.MatFormField, i7.MatSelect, i8.NgControlStatus, i8.NgModel, i4.AsyncPipe],
  styles: ["mat-form-field[has-bld='true'][_ngcontent-%COMP%] {\n                max-width: calc(50vw - 2.5rem);\n            }\n\n            [full][_nghost-%COMP%]   mat-form-field[_ngcontent-%COMP%] {\n                max-width: calc(50% - 2.5rem);\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImV4cGxvcmUtbWFwLWNvbnRyb2wuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSw4QkFBOEI7WUFDbEM7O1lBRUE7Z0JBQ0ksNkJBQTZCO1lBQ2pDIiwiZmlsZSI6ImV4cGxvcmUtbWFwLWNvbnRyb2wuY29tcG9uZW50LnRzIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICBtYXQtZm9ybS1maWVsZFtoYXMtYmxkPSd0cnVlJ10ge1xuICAgICAgICAgICAgICAgIG1heC13aWR0aDogY2FsYyg1MHZ3IC0gMi41cmVtKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgOmhvc3RbZnVsbF0gbWF0LWZvcm0tZmllbGQge1xuICAgICAgICAgICAgICAgIG1heC13aWR0aDogY2FsYyg1MCUgLSAyLjVyZW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAiXX0= */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvZXhwbG9yZS9zcmMvbGliL2V4cGxvcmUtbWFwLWNvbnRyb2wuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSw4QkFBOEI7WUFDbEM7O1lBRUE7Z0JBQ0ksNkJBQTZCO1lBQ2pDOztBQUVaLDRtQkFBNG1CIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICBtYXQtZm9ybS1maWVsZFtoYXMtYmxkPSd0cnVlJ10ge1xuICAgICAgICAgICAgICAgIG1heC13aWR0aDogY2FsYyg1MHZ3IC0gMi41cmVtKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgOmhvc3RbZnVsbF0gbWF0LWZvcm0tZmllbGQge1xuICAgICAgICAgICAgICAgIG1heC13aWR0aDogY2FsYyg1MCUgLSAyLjVyZW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAiXSwic291cmNlUm9vdCI6IiJ9 */"]
});
exports.ExploreMapControlComponent = ExploreMapControlComponent;

/***/ }),

/***/ 83134:
/*!************************************************************!*\
  !*** ./libs/explore/src/lib/explore-map-view.component.ts ***!
  \************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _taggedTemplateLiteral = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js */ 9959)["default"]);
var _regeneratorRuntime = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/regeneratorRuntime.js */ 8698)["default"]);
var _toConsumableArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/toConsumableArray.js */ 86033)["default"]);
var _asyncToGenerator = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/asyncToGenerator.js */ 95386)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _callSuper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/callSuper.js */ 8513)["default"]);
var _inherits = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/inherits.js */ 58160)["default"]);
var _ExploreMapViewComponent, _templateObject, _templateObject2;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.ExploreMapViewComponent = void 0;
var router_1 = __webpack_require__(/*! @angular/router */ 95072);
var ts_client_1 = __webpack_require__(/*! @placeos/ts-client */ 35713);
var operators_1 = __webpack_require__(/*! rxjs/operators */ 97303);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var users_1 = __webpack_require__(/*! @placeos/users */ 63870);
var spaces_service_1 = __webpack_require__(/*! libs/spaces/src/lib/spaces.service */ 7401);
var map_pin_component_1 = __webpack_require__(/*! libs/components/src/lib/map-pin.component */ 71865);
var map_radius_component_1 = __webpack_require__(/*! libs/components/src/lib/map-radius.component */ 95384);
var organisation_service_1 = __webpack_require__(/*! libs/organisation/src/lib/organisation.service */ 19863);
var space_pipe_1 = __webpack_require__(/*! libs/spaces/src/lib/space.pipe */ 22011);
var explore_state_service_1 = __webpack_require__(/*! ./explore-state.service */ 12455);
var explore_spaces_service_1 = __webpack_require__(/*! ./explore-spaces.service */ 65897);
var explore_zones_service_1 = __webpack_require__(/*! ./explore-zones.service */ 61369);
var explore_desks_service_1 = __webpack_require__(/*! ./explore-desks.service */ 61104);
var explore_parking_service_1 = __webpack_require__(/*! ./explore-parking.service */ 34498);
var explore_lockers_service_1 = __webpack_require__(/*! ./explore-lockers.service */ 49591);
var mapspeople_service_1 = __webpack_require__(/*! libs/common/src/lib/mapspeople.service */ 99420);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! ./explore-state.service */ 12455);
var i2 = __webpack_require__(/*! ./explore-spaces.service */ 65897);
var i3 = __webpack_require__(/*! ./explore-desks.service */ 61104);
var i4 = __webpack_require__(/*! ./explore-zones.service */ 61369);
var i5 = __webpack_require__(/*! ./explore-parking.service */ 34498);
var i6 = __webpack_require__(/*! ./explore-lockers.service */ 49591);
var i7 = __webpack_require__(/*! @angular/router */ 95072);
var i8 = __webpack_require__(/*! libs/spaces/src/lib/spaces.service */ 7401);
var i9 = __webpack_require__(/*! libs/organisation/src/lib/organisation.service */ 19863);
var i10 = __webpack_require__(/*! @placeos/common */ 22797);
var i11 = __webpack_require__(/*! libs/spaces/src/lib/space.pipe */ 22011);
var i12 = __webpack_require__(/*! libs/common/src/lib/mapspeople.service */ 99420);
var i13 = __webpack_require__(/*! @angular/common */ 60316);
var i14 = __webpack_require__(/*! ../../../components/src/lib/interactive-map.component */ 24918);
var i15 = __webpack_require__(/*! @angular/material/slide-toggle */ 8827);
var i16 = __webpack_require__(/*! @angular/forms */ 34456);
var i17 = __webpack_require__(/*! ./explore-map-control.component */ 60468);
var _c0 = function _c0() {
  return {
    controls: true
  };
};
function ExploreMapViewComponent_div_6_div_2_Template(rf, ctx) {
  if (rf & 1) {
    var _r1 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 7)(1, "mat-slide-toggle", 8);
    i0.ɵɵpipe(2, "async");
    i0.ɵɵlistener("ngModelChange", function ExploreMapViewComponent_div_6_div_2_Template_mat_slide_toggle_ngModelChange_1_listener($event) {
      i0.ɵɵrestoreView(_r1);
      var ctx_r1 = i0.ɵɵnextContext(2);
      return i0.ɵɵresetView(ctx_r1.toggleZones($event));
    });
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(3, "label", 9);
    i0.ɵɵi18n(4, 0);
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var tmp_2_0;
    var ctx_r1 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngModel", !((tmp_2_0 = i0.ɵɵpipeBind1(2, 1, ctx_r1.options)) == null ? null : tmp_2_0.disable == null ? null : tmp_2_0.disable.includes("zones")));
  }
}
function ExploreMapViewComponent_div_6_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 5);
    i0.ɵɵelement(1, "explore-map-controls");
    i0.ɵɵtemplate(2, ExploreMapViewComponent_div_6_div_2_Template, 5, 3, "div", 6);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance(2);
    i0.ɵɵproperty("ngIf", !ctx_r1.hide_zones);
  }
}
function ExploreMapViewComponent_div_8_div_3_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 7);
    i0.ɵɵelement(1, "div", 13);
    i0.ɵɵelementStart(2, "div", 14);
    i0.ɵɵtext(3);
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var pair_r3 = ctx.$implicit;
    i0.ɵɵadvance();
    i0.ɵɵstyleProp("background-color", pair_r3[1]);
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate(pair_r3[0]);
  }
}
function ExploreMapViewComponent_div_8_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 10)(1, "h3", 11);
    i0.ɵɵi18n(2, 1);
    i0.ɵɵelementEnd();
    i0.ɵɵtemplate(3, ExploreMapViewComponent_div_8_div_3_Template, 4, 3, "div", 12);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance(3);
    i0.ɵɵproperty("ngForOf", ctx_r1.legend);
  }
}
var EMPTY = [];
var ExploreMapViewComponent = /*#__PURE__*/function (_common_1$AsyncHandle) {
  function ExploreMapViewComponent(_state, _s, _desks, _zones, _parking, _lockers, _route, _router, _spaces, _org, _settings, _space_pipe, _maps) {
    var _this;
    _classCallCheck(this, ExploreMapViewComponent);
    _this = _callSuper(this, ExploreMapViewComponent);
    _this._state = _state;
    _this._s = _s;
    _this._desks = _desks;
    _this._zones = _zones;
    _this._parking = _parking;
    _this._lockers = _lockers;
    _this._route = _route;
    _this._router = _router;
    _this._spaces = _spaces;
    _this._org = _org;
    _this._settings = _settings;
    _this._space_pipe = _space_pipe;
    _this._maps = _maps;
    /** Observable for the active map */
    _this.url = _this._state.map_url;
    /** Observable for the active map */
    _this.styles = _this._state.map_styles;
    /** Observable for the active map */
    _this.positions = _this._state.map_positions;
    /** Observable for the active map */
    _this.features = _this._state.map_features;
    /** Observable for the active map */
    _this.actions = _this._state.map_actions;
    /** Observable for the labels map */
    _this.labels = _this._state.map_labels;
    /** Observable for the active map */
    _this.options = _this._state.options;
    /** Observable for user messages */
    _this.message = _this._state.message;
    _this.setOptions = function (o) {
      return _this._state.setOptions(o);
    };
    _this.locate = '';
    _this.use_mapsindoors$ = _this._maps.available$;
    return _this;
  }
  _inherits(ExploreMapViewComponent, _common_1$AsyncHandle);
  return _createClass(ExploreMapViewComponent, [{
    key: "toggleZones",
    value: function () {
      var _toggleZones = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(enabled) {
        var _options$disable;
        var options, disable;
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              _context.next = 2;
              return this.options.pipe((0, operators_1.take)(1)).toPromise();
            case 2:
              options = _context.sent;
              disable = !enabled ? (0, common_1.unique)([].concat(_toConsumableArray(options.disable || []), ['zones', 'devices'])) : ((_options$disable = options.disable) === null || _options$disable === void 0 ? void 0 : _options$disable.filter(function (_) {
                return _ !== 'zones' && _ !== 'devices';
              })) || [];
              this.setOptions({
                disable: disable
              });
            case 5:
            case "end":
              return _context.stop();
          }
        }, _callee, this);
      }));
      function toggleZones(_x) {
        return _toggleZones.apply(this, arguments);
      }
      return toggleZones;
    }()
  }, {
    key: "show_legend",
    get: function get() {
      return !!this._settings.get('app.explore.show_legend');
    }
  }, {
    key: "hide_zones",
    get: function get() {
      return !!this._settings.get('app.explore.hide_zones');
    }
  }, {
    key: "legend",
    get: function get() {
      return this._settings.get('app.explore.legend') || EMPTY;
    }
  }, {
    key: "ngOnInit",
    value: function () {
      var _ngOnInit = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {
        var _this2 = this;
        return _regeneratorRuntime().wrap(function _callee3$(_context3) {
          while (1) switch (_context3.prev = _context3.next) {
            case 0:
              this._state.reset();
              _context3.next = 3;
              return this._spaces.initialised.pipe((0, operators_1.first)(function (_) {
                return _;
              })).toPromise();
            case 3:
              this.toggleZones(false);
              this.subscription('parking_poll', this._parking.startPolling());
              this.subscription('route.query', this._route.queryParamMap.subscribe( /*#__PURE__*/function () {
                var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(params) {
                  var user;
                  return _regeneratorRuntime().wrap(function _callee2$(_context2) {
                    while (1) switch (_context2.prev = _context2.next) {
                      case 0:
                        if (params.has('level') || params.has('zone')) {
                          _this2._state.setLevel(params.get('level') || params.get('zone'));
                        }
                        _this2._state.setFeatures('_located', []);
                        if (!params.has('space')) {
                          _context2.next = 6;
                          break;
                        }
                        _this2.locateSpace(params.get('space'));
                        _context2.next = 19;
                        break;
                      case 6:
                        if (!params.has('user')) {
                          _context2.next = 18;
                          break;
                        }
                        user = _this2._settings.value('last_search');
                        if (!(!user || params.get('user') !== user.email)) {
                          _context2.next = 13;
                          break;
                        }
                        user = null;
                        _context2.next = 12;
                        return (0, users_1.showStaff)(params.get('user')).toPromise();
                      case 12:
                        user = _context2.sent;
                      case 13:
                        if (user) {
                          _context2.next = 15;
                          break;
                        }
                        return _context2.abrupt("return", (0, common_1.notifyError)("Unable to user details for ".concat(params.get('user'))));
                      case 15:
                        _this2.locateUser(user instanceof Array ? user[0] : user)["catch"](function (_) {
                          (0, common_1.notifyError)("Unable to locate ".concat(params.get('user')));
                          _this2._router.navigate([], {
                            relativeTo: _this2._route,
                            queryParams: {}
                          });
                        });
                        _context2.next = 19;
                        break;
                      case 18:
                        if (params.has('locate')) {
                          _this2._locateFeature(params.get('locate'), params.get('name'));
                        } else {
                          _this2.timeout('update_location', function () {
                            _this2._state.setFeatures('_located', []);
                          });
                        }
                      case 19:
                      case "end":
                        return _context2.stop();
                    }
                  }, _callee2);
                }));
                return function (_x2) {
                  return _ref.apply(this, arguments);
                };
              }()));
            case 6:
            case "end":
              return _context3.stop();
          }
        }, _callee3, this);
      }));
      function ngOnInit() {
        return _ngOnInit.apply(this, arguments);
      }
      return ngOnInit;
    }()
  }, {
    key: "updateZoom",
    value: function updateZoom(zoom) {
      this._state.setPositions(zoom, this._state.positions.center);
    }
  }, {
    key: "updateCenter",
    value: function updateCenter(center) {
      this._state.setPositions(this._state.positions.zoom, center);
    }
  }, {
    key: "_locateFeature",
    value: function _locateFeature(id) {
      var _this3 = this;
      var name = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';
      var has_coordinates = id.includes(',');
      var parts = id.split(',');
      var feature = {
        track_id: "locate-".concat(id),
        location: has_coordinates ? {
          x: parseFloat(parts[0]),
          y: parseFloat(parts[1])
        } : id,
        content: map_pin_component_1.MapPinComponent,
        z_index: 99,
        data: {
          message: name
        }
      };
      this.locate = id;
      this.timeout('update_location', function () {
        return _this3._state.setFeatures('_located', [feature]);
      });
    }
  }, {
    key: "locateSpace",
    value: function () {
      var _locateSpace = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4(id) {
        var _this$_org$levelWithI,
          _this4 = this;
        var space, feature;
        return _regeneratorRuntime().wrap(function _callee4$(_context4) {
          while (1) switch (_context4.prev = _context4.next) {
            case 0:
              _context4.next = 2;
              return this._space_pipe.transform(id);
            case 2:
              space = _context4.sent;
              if (space) {
                _context4.next = 5;
                break;
              }
              return _context4.abrupt("return", (0, common_1.notifyError)('Unable to load space details.'));
            case 5:
              this._state.setLevel((_this$_org$levelWithI = this._org.levelWithID(space.zones)) === null || _this$_org$levelWithI === void 0 ? void 0 : _this$_org$levelWithI.id);
              feature = {
                track_id: "locate-".concat(space.id),
                location: space.map_id,
                content: map_pin_component_1.MapPinComponent,
                z_index: 99,
                data: {
                  message: "".concat(space.display_name || space.name, " is here")
                }
              };
              this.timeout('update_location', function () {
                return _this4._state.setFeatures('_located', [feature]);
              });
            case 8:
            case "end":
              return _context4.stop();
          }
        }, _callee4, this);
      }));
      function locateSpace(_x3) {
        return _locateSpace.apply(this, arguments);
      }
      return locateSpace;
    }()
  }, {
    key: "locateUser",
    value: function () {
      var _locateUser = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee5(user) {
        var _this$_org$levelWithI2,
          _locations$,
          _this5 = this;
        var locate_details, mod, locations, pos, coordinates_from, feature;
        return _regeneratorRuntime().wrap(function _callee5$(_context5) {
          while (1) switch (_context5.prev = _context5.next) {
            case 0:
              locate_details = this._org.binding('location_services');
              if (locate_details) {
                _context5.next = 3;
                break;
              }
              throw 'Location services is not setup for this application.';
            case 3:
              if (typeof locate_details === 'string') {
                locate_details = {
                  system_id: locate_details,
                  module: 'LocationServices',
                  priority: []
                };
              }
              mod = (0, ts_client_1.getModule)(locate_details.system_id, locate_details.module);
              _context5.next = 7;
              return mod.execute('locate_user', [user.email, user.username || user.id]);
            case 7:
              locations = _context5.sent.map(function (i) {
                return new users_1.MapLocation(i);
              });
              locations.sort(function (a, b) {
                return locate_details.priority.indexOf(a.type) - locate_details.priority.indexOf(b.type);
              });
              if (locations !== null && locations !== void 0 && locations.length) {
                _context5.next = 11;
                break;
              }
              throw 'No locations for the given user';
            case 11:
              this._state.setLevel((_this$_org$levelWithI2 = this._org.levelWithID([(_locations$ = locations[0]) === null || _locations$ === void 0 ? void 0 : _locations$.level])) === null || _this$_org$levelWithI2 === void 0 ? void 0 : _this$_org$levelWithI2.id);
              pos = locations[0].position;
              coordinates_from = locations[0].coordinates_from;
              feature = {
                track_id: "locate-".concat(user.id),
                location: locations[0].type === 'wireless' ? {
                  x: coordinates_from !== null && coordinates_from !== void 0 && coordinates_from.includes('right') ? 1 - pos.x : pos.x,
                  y: coordinates_from !== null && coordinates_from !== void 0 && coordinates_from.includes('bottom') ? 1 - pos.y : pos.y
                } : pos,
                content: locations[0].type === 'wireless' ? map_radius_component_1.MapRadiusComponent : map_pin_component_1.MapPinComponent,
                z_index: 99,
                data: {
                  message: "".concat(user.name, " is here"),
                  radius: locations[0].variance,
                  last_seen: locations[0].last_seen
                }
              };
              this.timeout('update_location', function () {
                _this5._state.setFeatures('_located', [feature]);
              });
            case 16:
            case "end":
              return _context5.stop();
          }
        }, _callee5, this);
      }));
      function locateUser(_x4) {
        return _locateUser.apply(this, arguments);
      }
      return locateUser;
    }()
  }]);
}(common_1.AsyncHandler);
_ExploreMapViewComponent = ExploreMapViewComponent;
_ExploreMapViewComponent.ɵfac = function ExploreMapViewComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _ExploreMapViewComponent)(i0.ɵɵdirectiveInject(i1.ExploreStateService), i0.ɵɵdirectiveInject(i2.ExploreSpacesService), i0.ɵɵdirectiveInject(i3.ExploreDesksService), i0.ɵɵdirectiveInject(i4.ExploreZonesService), i0.ɵɵdirectiveInject(i5.ExploreParkingService), i0.ɵɵdirectiveInject(i6.ExploreLockersService), i0.ɵɵdirectiveInject(i7.ActivatedRoute), i0.ɵɵdirectiveInject(i7.Router), i0.ɵɵdirectiveInject(i8.SpacesService), i0.ɵɵdirectiveInject(i9.OrganisationService), i0.ɵɵdirectiveInject(i10.SettingsService), i0.ɵɵdirectiveInject(i11.SpacePipe), i0.ɵɵdirectiveInject(i12.MapsPeopleService));
};
_ExploreMapViewComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _ExploreMapViewComponent,
  selectors: [["explore-map-view"]],
  features: [i0.ɵɵProvidersFeature([explore_desks_service_1.ExploreDesksService, explore_spaces_service_1.ExploreSpacesService, explore_zones_service_1.ExploreZonesService, explore_parking_service_1.ExploreParkingService, explore_lockers_service_1.ExploreLockersService, space_pipe_1.SpacePipe]), i0.ɵɵInheritDefinitionFeature],
  decls: 9,
  vars: 22,
  consts: function consts() {
    var i18n_0;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_4377629928032707348$$LIBS_EXPLORE_SRC_LIB_EXPLORE_MAP_VIEW_COMPONENT_TS_0 = goog.getMsg("Zones");
      i18n_0 = MSG_EXTERNAL_4377629928032707348$$LIBS_EXPLORE_SRC_LIB_EXPLORE_MAP_VIEW_COMPONENT_TS_0;
    } else {
      i18n_0 = $localize(_templateObject || (_templateObject = _taggedTemplateLiteral([":\u241Fdab9a30ea9f109a7395ec84fe144c4f70d50c32d\u241F4377629928032707348:Zones"])));
    }
    var i18n_1;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_7297822327994766046$$LIBS_EXPLORE_SRC_LIB_EXPLORE_MAP_VIEW_COMPONENT_TS_1 = goog.getMsg("Legend");
      i18n_1 = MSG_EXTERNAL_7297822327994766046$$LIBS_EXPLORE_SRC_LIB_EXPLORE_MAP_VIEW_COMPONENT_TS_1;
    } else {
      i18n_1 = $localize(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([":\u241F5c5419db944ed6a96f9515a2ac0ee390ec8cf3b5\u241F7297822327994766046:Legend"])));
    }
    return [i18n_0, i18n_1, [3, "src", "styles", "features", "actions", "labels", "focus", "options"], ["controls", "", "class", "absolute top-2 left-2 max-w-[calc(100vw-1rem)] bg-base-100 border border-base-200 rounded p-2 space-y-2 overflow-hidden", 4, "ngIf"], ["legend", "", "class", "absolute bottom-2 left-2 p-2 rounded bg-base-100 border border-base-200", 4, "ngIf"], ["controls", "", 1, "absolute", "top-2", "left-2", "max-w-[calc(100vw-1rem)]", "bg-base-100", "border", "border-base-200", "rounded", "p-2", "space-y-2", "overflow-hidden"], ["class", "flex items-center space-x-2", 4, "ngIf"], [1, "flex", "items-center", "space-x-2"], ["name", "zones", 1, "ml-2", 3, "ngModelChange", "ngModel"], ["for", "zones", 1, "mb-0"], ["legend", "", 1, "absolute", "bottom-2", "left-2", "p-2", "rounded", "bg-base-100", "border", "border-base-200"], [1, "mb-2", "font-medium"], ["class", "flex items-center space-x-2", 4, "ngFor", "ngForOf"], [1, "w-3", "h-3", "rounded-full", "border", "border-base-200"], [1, "text-sm"]];
  },
  template: function ExploreMapViewComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵelement(0, "interactive-map", 2);
      i0.ɵɵpipe(1, "async");
      i0.ɵɵpipe(2, "async");
      i0.ɵɵpipe(3, "async");
      i0.ɵɵpipe(4, "async");
      i0.ɵɵpipe(5, "async");
      i0.ɵɵtemplate(6, ExploreMapViewComponent_div_6_Template, 3, 1, "div", 3);
      i0.ɵɵpipe(7, "async");
      i0.ɵɵtemplate(8, ExploreMapViewComponent_div_8_Template, 4, 1, "div", 4);
    }
    if (rf & 2) {
      i0.ɵɵproperty("src", i0.ɵɵpipeBind1(1, 9, ctx.url))("styles", i0.ɵɵpipeBind1(2, 11, ctx.styles))("features", i0.ɵɵpipeBind1(3, 13, ctx.features))("actions", i0.ɵɵpipeBind1(4, 15, ctx.actions))("labels", i0.ɵɵpipeBind1(5, 17, ctx.labels))("focus", ctx.locate)("options", i0.ɵɵpureFunction0(21, _c0));
      i0.ɵɵadvance(6);
      i0.ɵɵproperty("ngIf", !i0.ɵɵpipeBind1(7, 19, ctx.use_mapsindoors$));
      i0.ɵɵadvance(2);
      i0.ɵɵproperty("ngIf", ctx.show_legend && ctx.legend.length);
    }
  },
  dependencies: [i13.NgForOf, i13.NgIf, i14.InteractiveMapComponent, i15.MatSlideToggle, i16.NgControlStatus, i16.NgModel, i17.ExploreMapControlComponent, i13.AsyncPipe],
  styles: ["[_nghost-%COMP%] {\n                height: 100%;\n                width: 100%;\n            }\n\n            [zones][_ngcontent-%COMP%] {\n                top: 3.5rem;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImV4cGxvcmUtbWFwLXZpZXcuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxZQUFZO2dCQUNaLFdBQVc7WUFDZjs7WUFFQTtnQkFDSSxXQUFXO1lBQ2YiLCJmaWxlIjoiZXhwbG9yZS1tYXAtdmlldy5jb21wb25lbnQudHMiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIDpob3N0IHtcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIFt6b25lc10ge1xuICAgICAgICAgICAgICAgIHRvcDogMy41cmVtO1xuICAgICAgICAgICAgfVxuICAgICAgICAiXX0= */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvZXhwbG9yZS9zcmMvbGliL2V4cGxvcmUtbWFwLXZpZXcuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxZQUFZO2dCQUNaLFdBQVc7WUFDZjs7WUFFQTtnQkFDSSxXQUFXO1lBQ2Y7O0FBRVosd2lCQUF3aUIiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIDpob3N0IHtcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIFt6b25lc10ge1xuICAgICAgICAgICAgICAgIHRvcDogMy41cmVtO1xuICAgICAgICAgICAgfVxuICAgICAgICAiXSwic291cmNlUm9vdCI6IiJ9 */"]
});
exports.ExploreMapViewComponent = ExploreMapViewComponent;

/***/ }),

/***/ 17889:
/*!****************************************************************!*\
  !*** ./libs/explore/src/lib/explore-parking-info.component.ts ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _ExploreParkingInfoComponent;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.ExploreParkingInfoComponent = void 0;
var core_1 = __webpack_require__(/*! @angular/core */ 37580);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var components_1 = __webpack_require__(/*! @placeos/components */ 51588);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @placeos/common */ 22797);
var i2 = __webpack_require__(/*! @angular/common */ 60316);
function ExploreParkingInfoComponent_div_8_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 7)(1, "div", 8);
    i0.ɵɵtext(2, " Plate Number ");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(3, "div", 9);
    i0.ɵɵtext(4);
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var ctx_r0 = i0.ɵɵnextContext();
    i0.ɵɵadvance(4);
    i0.ɵɵtextInterpolate1(" ", ctx_r0.plate_number || "ABC3", " ");
  }
}
var ExploreParkingInfoComponent = /*#__PURE__*/function () {
  function ExploreParkingInfoComponent(_data, _element, _settings) {
    _classCallCheck(this, ExploreParkingInfoComponent);
    this._data = _data;
    this._element = _element;
    this._settings = _settings;
    this.status = this._data.assigned_to === this._data.user && this._data.user ? 'reserved' : this._data.status;
    this.user = this._data.user;
    this.name = this._data.name;
    this.map_id = this._data.map_id;
    this.plate_number = this._data.plate_number;
  }
  return _createClass(ExploreParkingInfoComponent, [{
    key: "is_concierge",
    get: function get() {
      return this._settings.app_name.toLowerCase().includes('concierge');
    }
  }]);
}();
_ExploreParkingInfoComponent = ExploreParkingInfoComponent;
_ExploreParkingInfoComponent.ɵfac = function ExploreParkingInfoComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _ExploreParkingInfoComponent)(i0.ɵɵdirectiveInject(components_1.MAP_FEATURE_DATA), i0.ɵɵdirectiveInject(i0.ElementRef), i0.ɵɵdirectiveInject(i1.SettingsService));
};
_ExploreParkingInfoComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _ExploreParkingInfoComponent,
  selectors: [["explore-parking-info"]],
  decls: 9,
  vars: 15,
  consts: [[1, "absolute", "bg-base-300", "p-2", "rounded-lg", "!rounded-tl-none", "shadow", "top-1/2", "left-1/2", "text-left"], [1, "absolute", "top-0.5", "left-0.5", "triangle"], [1, "flex", "space-x-2"], [1, "flex", "flex-col", "leading-tight", "min-w-24", "pl-1"], [1, "whitespace-nowrap"], [1, "capitalize", "text-sm", "font-medium"], ["class", "flex flex-col relative h-full px-2 rounded bg-base-100 text-base-content shadow leading-tight", 4, "ngIf"], [1, "flex", "flex-col", "relative", "h-full", "px-2", "rounded", "bg-base-100", "text-base-content", "shadow", "leading-tight"], [1, "text-[0.625rem]", "w-full", "text-center", "pt-1", "whitespace-nowrap", "font-medium"], [1, "font-mono", "pb-1", "w-full", "text-center", "uppercase"]],
  template: function ExploreParkingInfoComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵelementStart(0, "div", 0);
      i0.ɵɵelement(1, "div", 1);
      i0.ɵɵelementStart(2, "div", 2)(3, "div", 3)(4, "div", 4);
      i0.ɵɵtext(5);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(6, "div", 5);
      i0.ɵɵtext(7);
      i0.ɵɵelementEnd()();
      i0.ɵɵtemplate(8, ExploreParkingInfoComponent_div_8_Template, 5, 1, "div", 6);
      i0.ɵɵelementEnd()();
    }
    if (rf & 2) {
      i0.ɵɵclassProp("!bg-error", ctx.status === "busy")("!text-error-content", ctx.status === "busy")("!bg-warning", ctx.status === "reserved")("!text-warning-content", ctx.status === "reserved")("!bg-success", ctx.status === "free")("!text-success-content", ctx.status === "free");
      i0.ɵɵadvance(5);
      i0.ɵɵtextInterpolate(ctx.name);
      i0.ɵɵadvance(2);
      i0.ɵɵtextInterpolate1(" ", ctx.status, " ");
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", ctx.is_concierge && ctx.plate_number);
    }
  },
  dependencies: [i2.NgIf],
  styles: [".triangle[_ngcontent-%COMP%] {\n                width: 0px;\n                height: 0px;\n                border-style: solid;\n                border-width: 0.5rem 0.5rem 0 0;\n                border-color: currentColor transparent transparent transparent;\n                transform: rotate(0deg);\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImV4cGxvcmUtcGFya2luZy1pbmZvLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1lBQ1k7Z0JBQ0ksVUFBVTtnQkFDVixXQUFXO2dCQUNYLG1CQUFtQjtnQkFDbkIsK0JBQStCO2dCQUMvQiw4REFBOEQ7Z0JBQzlELHVCQUF1QjtZQUMzQiIsImZpbGUiOiJleHBsb3JlLXBhcmtpbmctaW5mby5jb21wb25lbnQudHMiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIC50cmlhbmdsZSB7XG4gICAgICAgICAgICAgICAgd2lkdGg6IDBweDtcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDBweDtcbiAgICAgICAgICAgICAgICBib3JkZXItc3R5bGU6IHNvbGlkO1xuICAgICAgICAgICAgICAgIGJvcmRlci13aWR0aDogMC41cmVtIDAuNXJlbSAwIDA7XG4gICAgICAgICAgICAgICAgYm9yZGVyLWNvbG9yOiBjdXJyZW50Q29sb3IgdHJhbnNwYXJlbnQgdHJhbnNwYXJlbnQgdHJhbnNwYXJlbnQ7XG4gICAgICAgICAgICAgICAgdHJhbnNmb3JtOiByb3RhdGUoMGRlZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICJdfQ== */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvZXhwbG9yZS9zcmMvbGliL2V4cGxvcmUtcGFya2luZy1pbmZvLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1lBQ1k7Z0JBQ0ksVUFBVTtnQkFDVixXQUFXO2dCQUNYLG1CQUFtQjtnQkFDbkIsK0JBQStCO2dCQUMvQiw4REFBOEQ7Z0JBQzlELHVCQUF1QjtZQUMzQjs7QUFFWixneUJBQWd5QiIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgLnRyaWFuZ2xlIHtcbiAgICAgICAgICAgICAgICB3aWR0aDogMHB4O1xuICAgICAgICAgICAgICAgIGhlaWdodDogMHB4O1xuICAgICAgICAgICAgICAgIGJvcmRlci1zdHlsZTogc29saWQ7XG4gICAgICAgICAgICAgICAgYm9yZGVyLXdpZHRoOiAwLjVyZW0gMC41cmVtIDAgMDtcbiAgICAgICAgICAgICAgICBib3JkZXItY29sb3I6IGN1cnJlbnRDb2xvciB0cmFuc3BhcmVudCB0cmFuc3BhcmVudCB0cmFuc3BhcmVudDtcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IHJvdGF0ZSgwZGVnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl0sInNvdXJjZVJvb3QiOiIifQ== */"]
});
exports.ExploreParkingInfoComponent = ExploreParkingInfoComponent;

/***/ }),

/***/ 34498:
/*!*********************************************************!*\
  !*** ./libs/explore/src/lib/explore-parking.service.ts ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _regeneratorRuntime = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/regeneratorRuntime.js */ 8698)["default"]);
var _createForOfIteratorHelper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createForOfIteratorHelper.js */ 36350)["default"]);
var _asyncToGenerator = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/asyncToGenerator.js */ 95386)["default"]);
var _objectSpread = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/objectSpread2.js */ 34092)["default"]);
var _slicedToArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/slicedToArray.js */ 6282)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _callSuper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/callSuper.js */ 8513)["default"]);
var _inherits = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/inherits.js */ 58160)["default"]);
var _ExploreParkingService;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.ExploreParkingService = void 0;
var dialog_1 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var ts_client_1 = __webpack_require__(/*! @placeos/ts-client */ 35713);
var date_fns_1 = __webpack_require__(/*! date-fns */ 25773);
var rxjs_1 = __webpack_require__(/*! rxjs */ 15681);
var operators_1 = __webpack_require__(/*! rxjs/operators */ 97303);
var organisation_service_1 = __webpack_require__(/*! libs/organisation/src/lib/organisation.service */ 19863);
var bookings_fn_1 = __webpack_require__(/*! libs/bookings/src/lib/bookings.fn */ 18026);
var explore_state_service_1 = __webpack_require__(/*! ./explore-state.service */ 12455);
var explore_spaces_service_1 = __webpack_require__(/*! ./explore-spaces.service */ 65897);
var booking_form_service_1 = __webpack_require__(/*! libs/bookings/src/lib/booking-form.service */ 18379);
var set_datetime_modal_component_1 = __webpack_require__(/*! ./set-datetime-modal.component */ 27146);
var explore_parking_info_component_1 = __webpack_require__(/*! ./explore-parking-info.component */ 17889);
var parking_service_1 = __webpack_require__(/*! libs/bookings/src/lib/parking.service */ 1593);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! libs/organisation/src/lib/organisation.service */ 19863);
var i2 = __webpack_require__(/*! ./explore-state.service */ 12455);
var i3 = __webpack_require__(/*! @placeos/common */ 22797);
var i4 = __webpack_require__(/*! libs/bookings/src/lib/booking-form.service */ 18379);
var i5 = __webpack_require__(/*! libs/bookings/src/lib/parking.service */ 1593);
var i6 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var ExploreParkingService = /*#__PURE__*/function (_common_1$AsyncHandle) {
  function ExploreParkingService(_org, _state, _settings, _bookings, _parking, _dialog) {
    var _this;
    _classCallCheck(this, ExploreParkingService);
    _this = _callSuper(this, ExploreParkingService);
    _this._org = _org;
    _this._state = _state;
    _this._settings = _settings;
    _this._bookings = _bookings;
    _this._parking = _parking;
    _this._dialog = _dialog;
    _this._options = new rxjs_1.BehaviorSubject({});
    _this._poll = new rxjs_1.BehaviorSubject(0);
    _this.options = _this._options.asObservable();
    _this.on_book = null;
    /** List of available parking levels for the active building */
    _this.levels = _this._org.active_levels.pipe((0, operators_1.map)(function (l) {
      return l.filter(function (_) {
        return _.tags.includes('parking');
      });
    }));
    /** List of current bookings for the current building */
    _this.events = (0, rxjs_1.combineLatest)([_this._org.active_building, _this._options, _this._poll, _this._state.options]).pipe((0, operators_1.debounceTime)(300), (0, operators_1.switchMap)(function (_ref) {
      var _ref2 = _slicedToArray(_ref, 4),
        bld = _ref2[0],
        _ = _ref2[1],
        __ = _ref2[2],
        is_public = _ref2[3].is_public;
      return is_public ? (0, rxjs_1.of)([]) : (0, bookings_fn_1.queryBookings)({
        period_start: (0, date_fns_1.getUnixTime)((0, date_fns_1.startOfMinute)(_.date || Date.now())),
        period_end: (0, date_fns_1.getUnixTime)((0, date_fns_1.endOfMinute)(_.date || Date.now())),
        type: 'parking',
        zones: _this._settings.get('app.use_region') ? bld === null || bld === void 0 ? void 0 : bld.parent_id : bld === null || bld === void 0 ? void 0 : bld.id,
        rejected: false
      });
    }), (0, operators_1.shareReplay)(1));
    /** Any event that the selected user has for the current date */
    _this.user_events = (0, rxjs_1.combineLatest)([_this._options]).pipe((0, operators_1.switchMap)(function (_ref3) {
      var _ref5;
      var _ref4 = _slicedToArray(_ref3, 1),
        _ = _ref4[0];
      return (0, bookings_fn_1.queryBookings)({
        period_start: (0, date_fns_1.getUnixTime)((0, date_fns_1.startOfDay)(_.date || Date.now())),
        period_end: (0, date_fns_1.getUnixTime)((0, date_fns_1.endOfDay)(_.date || Date.now())),
        type: 'parking',
        email: (_ === null || _ === void 0 ? void 0 : _.user) || ((_ref5 = (0, common_1.currentUser)()) === null || _ref5 === void 0 ? void 0 : _ref5.email)
      });
    }), (0, operators_1.shareReplay)(1));
    /** List of parking spaces for the active building */
    _this.spaces = _this.levels.pipe((0, operators_1.switchMap)(function (_) {
      return (0, rxjs_1.forkJoin)(_.map(function (l) {
        return (0, ts_client_1.showMetadata)(l.id, 'parking-spaces').pipe((0, operators_1.map)(function (d) {
          return (d.details instanceof Array ? d.details : []).map(function (s) {
            return _objectSpread(_objectSpread({}, s), {}, {
              zone_id: l.id
            });
          });
        }));
      }));
    }), (0, operators_1.map)(function (_) {
      return (0, common_1.flatten)(_);
    }), (0, operators_1.shareReplay)(1));
    _this.active_spaces = (0, rxjs_1.combineLatest)([_this.spaces, _this._state.level]).pipe((0, operators_1.map)(function (_ref6) {
      var _ref7 = _slicedToArray(_ref6, 2),
        spaces = _ref7[0],
        level = _ref7[1];
      return spaces.filter(function (_) {
        return _.zone_id === level.id;
      });
    }));
    _this._users = {};
    _this._plate_numbers = {};
    /** Available parking spaces for the current level and date */
    _this.available_spaces = (0, rxjs_1.combineLatest)([_this.events, _this.active_spaces, _this._parking.users]).pipe((0, operators_1.map)(function (_ref8) {
      var _ref9 = _slicedToArray(_ref8, 3),
        events = _ref9[0],
        spaces = _ref9[1],
        users = _ref9[2];
      var available = spaces.filter(function (_) {
        var _event$extension_data;
        var event = events.find(function (e) {
          return e.asset_id === _.id && !e.rejected;
        });
        var assigned = "".concat((event === null || event === void 0 ? void 0 : event.user_email) || _.assigned_to || '').toLowerCase();
        var user = users.find(function (u) {
          return u.email.toLowerCase() === assigned.toLowerCase();
        });
        _this._users[_.id] = assigned;
        _this._plate_numbers[_.id] = (event === null || event === void 0 || (_event$extension_data = event.extension_data) === null || _event$extension_data === void 0 ? void 0 : _event$extension_data.plate_number) || (user === null || user === void 0 ? void 0 : user.plate_number) || undefined;
        return !event;
      });
      _this._updateParkingSpaces(spaces, available);
      return available;
    }));
    _this.subscription('spaces', _this.available_spaces.subscribe());
    _this.setOptions({
      enable_booking: _this._settings.get('app.parking.enable_maps') !== false
    });
    return _this;
  }
  _inherits(ExploreParkingService, _common_1$AsyncHandle);
  return _createClass(ExploreParkingService, [{
    key: "startPolling",
    value: function startPolling() {
      var _this2 = this;
      this.interval('poll', function () {
        return _this2._poll.next(Date.now());
      }, 10 * 1000);
      this._poll.next(Date.now());
      return function () {
        return _this2.stopPolling();
      };
    }
  }, {
    key: "stopPolling",
    value: function stopPolling() {
      this.clearInterval('poll');
    }
  }, {
    key: "setOptions",
    value: function setOptions(options) {
      this._options.next(_objectSpread(_objectSpread({}, this._options.getValue()), options));
    }
  }, {
    key: "_updateParkingSpaces",
    value: function () {
      var _updateParkingSpaces2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(spaces, available) {
        var _this3 = this;
        var styles, features, actions, colours, options, assigned_space, deny_parking_access, booked_space, _iterator, _step, _loop;
        return _regeneratorRuntime().wrap(function _callee2$(_context3) {
          while (1) switch (_context3.prev = _context3.next) {
            case 0:
              styles = {};
              features = [];
              actions = [];
              colours = this._settings.get('app.explore.colors') || {};
              options = this._options.getValue();
              _context3.next = 7;
              return this._parking.assigned_space.pipe((0, operators_1.take)(1)).toPromise();
            case 7:
              assigned_space = _context3.sent;
              _context3.next = 10;
              return this._parking.deny_parking_access.pipe((0, operators_1.take)(1)).toPromise();
            case 10:
              deny_parking_access = _context3.sent;
              _context3.next = 13;
              return this._parking.booked_space.pipe((0, operators_1.take)(1)).toPromise();
            case 13:
              booked_space = _context3.sent;
              _iterator = _createForOfIteratorHelper(spaces);
              _context3.prev = 15;
              _loop = /*#__PURE__*/_regeneratorRuntime().mark(function _loop() {
                var space, can_book, is_assigned, id, status, book_fn;
                return _regeneratorRuntime().wrap(function _loop$(_context2) {
                  while (1) switch (_context2.prev = _context2.next) {
                    case 0:
                      space = _step.value;
                      can_book = !!available.find(function (_) {
                        return _.id === space.id;
                      });
                      is_assigned = !!space.assigned_to;
                      id = space.map_id || space.id;
                      status = is_assigned ? can_book ? 'pending' : 'busy' : can_book ? 'free' : 'busy';
                      styles["#".concat(id)] = {
                        fill: colours["parking-".concat(status)] || colours["".concat(status)] || explore_spaces_service_1.DEFAULT_COLOURS["".concat(status)],
                        opacity: 0.6
                      };
                      features.push({
                        location: "".concat(id),
                        content: explore_parking_info_component_1.ExploreParkingInfoComponent,
                        z_index: 20,
                        hover: true,
                        data: _objectSpread(_objectSpread({}, space), {}, {
                          user: _this3._users[space.id],
                          plate_number: _this3._plate_numbers[space.id],
                          status: status === 'pending' && is_assigned ? 'reserved' : status
                        })
                      });
                      if (can_book) {
                        _context2.next = 9;
                        break;
                      }
                      return _context2.abrupt("return", 1);
                    case 9:
                      book_fn = /*#__PURE__*/function () {
                        var _ref10 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
                          var _space$groups, _this3$_org$region;
                          var _space$zone, _space$zone2, user, user_email, zone, date;
                          return _regeneratorRuntime().wrap(function _callee$(_context) {
                            while (1) switch (_context.prev = _context.next) {
                              case 0:
                                if (!_this3.on_book) {
                                  _context.next = 5;
                                  break;
                                }
                                _context.next = 3;
                                return _this3.on_book(space);
                              case 3:
                                _this3._poll.next(Date.now());
                                return _context.abrupt("return");
                              case 5:
                                if (!deny_parking_access) {
                                  _context.next = 7;
                                  break;
                                }
                                return _context.abrupt("return", (0, common_1.notifyError)("Your user account has been denied parking access to ".concat(((_space$zone = space.zone) === null || _space$zone === void 0 ? void 0 : _space$zone.display_name) || ((_space$zone2 = space.zone) === null || _space$zone2 === void 0 ? void 0 : _space$zone2.name), ".")));
                              case 7:
                                if (!assigned_space) {
                                  _context.next = 9;
                                  break;
                                }
                                return _context.abrupt("return", (0, common_1.notifyError)("You are already assigned to parking space \"".concat(space.name || space.id, "\".")));
                              case 9:
                                if (!(booked_space !== null && booked_space !== void 0 && booked_space.find(function (_) {
                                  return _.id === space.id;
                                }))) {
                                  _context.next = 11;
                                  break;
                                }
                                return _context.abrupt("return", (0, common_1.notifyError)("You already have a parking space booked for the selected time."));
                              case 11:
                                if (!(status !== 'free')) {
                                  _context.next = 13;
                                  break;
                                }
                                return _context.abrupt("return", (0, common_1.notifyError)("".concat(space.name || 'Parking Space', " is unavailable at this time.")));
                              case 13:
                                if (!((_space$groups = space.groups) !== null && _space$groups !== void 0 && _space$groups.length && !space.groups.find(function (_) {
                                  return (0, common_1.currentUser)().groups.includes(_);
                                }))) {
                                  _context.next = 15;
                                  break;
                                }
                                return _context.abrupt("return", (0, common_1.notifyError)("You are not allowed to book ".concat(space.name, ".")));
                              case 15:
                                _this3._bookings.newForm();
                                _this3._bookings.setOptions({
                                  type: 'parking'
                                });
                                options = _this3._options.getValue();
                                user = options.host || (0, common_1.currentUser)();
                                user_email = user === null || user === void 0 ? void 0 : user.email;
                                zone = _this3._org.levelWithID([space.zone_id || space.zone]) || _this3._state.active_level;
                                date = !options.date || (0, date_fns_1.isSameDay)(options.date, Date.now()) ? (0, date_fns_1.startOfMinute)(Date.now()).valueOf() : (0, date_fns_1.setHours)(options.date, 8).valueOf();
                                debugger;
                                _this3._bookings.form.patchValue({
                                  resources: [space],
                                  asset_id: space.id,
                                  asset_name: space.name,
                                  date: date,
                                  duration: 11 * 60,
                                  all_day: true,
                                  map_id: (space === null || space === void 0 ? void 0 : space.map_id) || (space === null || space === void 0 ? void 0 : space.id),
                                  description: space.name,
                                  user: user,
                                  user_email: user_email,
                                  booking_type: 'parking',
                                  zones: [_this3._org.organisation.id, (_this3$_org$region = _this3._org.region) === null || _this3$_org$region === void 0 ? void 0 : _this3$_org$region.id, zone.parent_id, zone.id]
                                });
                                _context.next = 26;
                                return _this3._bookings.confirmPost()["catch"](function (e) {
                                  if (e === 'User cancelled') throw e;
                                  (0, common_1.notifyError)("Failed to book parking space ".concat(space.name || space.id, ". ").concat(e.message || e.error || e));
                                  throw e;
                                });
                              case 26:
                                (0, common_1.notifySuccess)("Successfully booked parking space ".concat(space.name || space.id));
                                _this3.timeout('poll', function () {
                                  return _this3._poll.next(Date.now());
                                }, 1000);
                              case 28:
                              case "end":
                                return _context.stop();
                            }
                          }, _callee);
                        }));
                        return function book_fn() {
                          return _ref10.apply(this, arguments);
                        };
                      }();
                      actions.push({
                        id: id,
                        action: 'click',
                        priority: 10,
                        callback: book_fn
                      });
                    case 11:
                    case "end":
                      return _context2.stop();
                  }
                }, _loop);
              });
              _iterator.s();
            case 18:
              if ((_step = _iterator.n()).done) {
                _context3.next = 24;
                break;
              }
              return _context3.delegateYield(_loop(), "t0", 20);
            case 20:
              if (!_context3.t0) {
                _context3.next = 22;
                break;
              }
              return _context3.abrupt("continue", 22);
            case 22:
              _context3.next = 18;
              break;
            case 24:
              _context3.next = 29;
              break;
            case 26:
              _context3.prev = 26;
              _context3.t1 = _context3["catch"](15);
              _iterator.e(_context3.t1);
            case 29:
              _context3.prev = 29;
              _iterator.f();
              return _context3.finish(29);
            case 32:
              this._state.setActions('parking', options.enable_booking ? actions : []);
              this._state.setStyles('parking', styles);
              this._state.setFeatures('parking', features);
            case 35:
            case "end":
              return _context3.stop();
          }
        }, _callee2, this, [[15, 26, 29, 32]]);
      }));
      function _updateParkingSpaces(_x, _x2) {
        return _updateParkingSpaces2.apply(this, arguments);
      }
      return _updateParkingSpaces;
    }()
  }, {
    key: "_setBookingTime",
    value: function () {
      var _setBookingTime2 = _asyncToGenerator(function (date, duration) {
        var _this4 = this;
        var host = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;
        var resource = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;
        return /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {
          var user, until, ref, details;
          return _regeneratorRuntime().wrap(function _callee3$(_context4) {
            while (1) switch (_context4.prev = _context4.next) {
              case 0:
                user = null;
                if (!_this4._settings.get('app.parking.allow_time_changes')) {
                  _context4.next = 12;
                  break;
                }
                until = (0, date_fns_1.endOfDay)((0, date_fns_1.addDays)(Date.now(), _this4._settings.get('app.parking.available_period') || 90));
                ref = _this4._dialog.open(set_datetime_modal_component_1.SetDatetimeModalComponent, {
                  data: {
                    date: date,
                    duration: duration,
                    until: until,
                    host: host,
                    resource: resource
                  }
                });
                _context4.next = 6;
                return ref.afterClosed().toPromise();
              case 6:
                details = _context4.sent;
                if (details) {
                  _context4.next = 9;
                  break;
                }
                throw 'User cancelled';
              case 9:
                date = details.date;
                duration = details.duration;
                user = details.user;
              case 12:
                return _context4.abrupt("return", {
                  date: date,
                  duration: duration,
                  user: user
                });
              case 13:
              case "end":
                return _context4.stop();
            }
          }, _callee3);
        })();
      });
      function _setBookingTime(_x3, _x4) {
        return _setBookingTime2.apply(this, arguments);
      }
      return _setBookingTime;
    }()
  }]);
}(common_1.AsyncHandler);
_ExploreParkingService = ExploreParkingService;
_ExploreParkingService.ɵfac = function ExploreParkingService_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _ExploreParkingService)(i0.ɵɵinject(i1.OrganisationService), i0.ɵɵinject(i2.ExploreStateService), i0.ɵɵinject(i3.SettingsService), i0.ɵɵinject(i4.BookingFormService), i0.ɵɵinject(i5.ParkingService), i0.ɵɵinject(i6.MatDialog));
};
_ExploreParkingService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({
  token: _ExploreParkingService,
  factory: _ExploreParkingService.ɵfac
});
exports.ExploreParkingService = ExploreParkingService;

/***/ }),

/***/ 64114:
/*!**********************************************************!*\
  !*** ./libs/explore/src/lib/explore-search.component.ts ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _taggedTemplateLiteral = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js */ 9959)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _callSuper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/callSuper.js */ 8513)["default"]);
var _inherits = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/inherits.js */ 58160)["default"]);
var _ExploreSearchComponent, _templateObject, _templateObject2;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.ExploreSearchComponent = void 0;
var core_1 = __webpack_require__(/*! @angular/core */ 37580);
var router_1 = __webpack_require__(/*! @angular/router */ 95072);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var explore_search_service_1 = __webpack_require__(/*! ./explore-search.service */ 35446);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! ./explore-search.service */ 35446);
var i2 = __webpack_require__(/*! @angular/router */ 95072);
var i3 = __webpack_require__(/*! @angular/common */ 60316);
var i4 = __webpack_require__(/*! ../../../components/src/lib/icon.component */ 69434);
var i5 = __webpack_require__(/*! ../../../components/src/lib/virtual-keyboard.component */ 75080);
var i6 = __webpack_require__(/*! @angular/material/autocomplete */ 79771);
var i7 = __webpack_require__(/*! @angular/material/core */ 74646);
var i8 = __webpack_require__(/*! @angular/material/progress-spinner */ 41134);
var i9 = __webpack_require__(/*! @angular/forms */ 34456);
var _c0 = ["input"];
var _c1 = ["button"];
function ExploreSearchComponent_mat_spinner_8_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelement(0, "mat-spinner", 10);
  }
  if (rf & 2) {
    i0.ɵɵproperty("diameter", 32);
  }
}
function ExploreSearchComponent_ng_container_12_mat_option_1_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "mat-option", 13);
    i0.ɵɵi18n(1, 4);
    i0.ɵɵelementEnd();
  }
}
function ExploreSearchComponent_ng_container_12_mat_option_3_Template(rf, ctx) {
  if (rf & 1) {
    var _r2 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "mat-option", 14);
    i0.ɵɵlistener("click", function ExploreSearchComponent_ng_container_12_mat_option_3_Template_mat_option_click_0_listener() {
      var option_r3 = i0.ɵɵrestoreView(_r2).$implicit;
      var ctx_r3 = i0.ɵɵnextContext(2);
      return i0.ɵɵresetView(ctx_r3.select(option_r3));
    });
    i0.ɵɵelementStart(1, "div", 15)(2, "div", 16)(3, "div", 17);
    i0.ɵɵtext(4);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(5, "div", 18);
    i0.ɵɵtext(6);
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(7, "div", 19);
    i0.ɵɵtext(8);
    i0.ɵɵelementEnd()()();
  }
  if (rf & 2) {
    var option_r3 = ctx.$implicit;
    i0.ɵɵproperty("value", option_r3.name);
    i0.ɵɵadvance(4);
    i0.ɵɵtextInterpolate(option_r3.name);
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate(option_r3.description);
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate1(" ", option_r3.type, " ");
  }
}
function ExploreSearchComponent_ng_container_12_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵtemplate(1, ExploreSearchComponent_ng_container_12_mat_option_1_Template, 2, 0, "mat-option", 11);
    i0.ɵɵpipe(2, "async");
    i0.ɵɵtemplate(3, ExploreSearchComponent_ng_container_12_mat_option_3_Template, 9, 4, "mat-option", 12);
    i0.ɵɵpipe(4, "async");
    i0.ɵɵpipe(5, "slice");
    i0.ɵɵelementContainerEnd();
  }
  if (rf & 2) {
    var tmp_5_0;
    var ctx_r3 = i0.ɵɵnextContext();
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", !((tmp_5_0 = i0.ɵɵpipeBind1(2, 2, ctx_r3.results)) == null ? null : tmp_5_0.length));
    i0.ɵɵadvance(2);
    i0.ɵɵproperty("ngForOf", i0.ɵɵpipeBind3(5, 6, i0.ɵɵpipeBind1(4, 4, ctx_r3.results), 0, 5));
  }
}
var ExploreSearchComponent = /*#__PURE__*/function (_common_1$AsyncHandle) {
  function ExploreSearchComponent(_el, _search, _router, _route) {
    var _this;
    _classCallCheck(this, ExploreSearchComponent);
    _this = _callSuper(this, ExploreSearchComponent);
    _this._el = _el;
    _this._search = _search;
    _this._router = _router;
    _this._route = _route;
    _this.show = false;
    _this.search_str = '';
    _this.right_size = false;
    _this.results = _this._search.search_results;
    _this.loading = _this._search.loading;
    _this.setFilter = function (s) {
      return _this._search.setFilter(s);
    };
    return _this;
  }
  _inherits(ExploreSearchComponent, _common_1$AsyncHandle);
  return _createClass(ExploreSearchComponent, [{
    key: "ngOnInit",
    value: function ngOnInit() {
      this.checkButtonPosition();
    }
  }, {
    key: "clear",
    value: function clear() {
      var _this2 = this;
      this.timeout('clear', function () {
        _this2.show = false;
        _this2.search_str = '';
        _this2.setFilter('');
      });
    }
  }, {
    key: "cancelClear",
    value: function cancelClear() {
      this.clearTimeout('clear');
    }
  }, {
    key: "focusInput",
    value: function focusInput() {
      var _this$_input_el,
        _this3 = this;
      if ((_this$_input_el = this._input_el) !== null && _this$_input_el !== void 0 && _this$_input_el.nativeElement) {
        this.timeout('focus', function () {
          return _this3._input_el.nativeElement.focus();
        }, 300);
      }
    }
  }, {
    key: "showSearch",
    value: function showSearch() {
      this.show = true;
      this.focusInput();
    }
  }, {
    key: "closeSearch",
    value: function closeSearch(e) {
      var _this$_input_el2;
      this.show = false;
      this.search_str = '';
      this.setFilter('');
      if ((_this$_input_el2 = this._input_el) !== null && _this$_input_el2 !== void 0 && _this$_input_el2.nativeElement) {
        this._input_el.nativeElement.focus();
        this._input_el.nativeElement.blur();
      }
    }
  }, {
    key: "select",
    value: function select(item) {
      this.search_str = item.name;
      var query = {};
      var type = item.type === 'space' ? 'space' : item.type === 'feature' ? 'locate' : 'user';
      query[type] = item.id;
      if (type === 'locate') {
        query.name = item.name;
        query.zone = item.zone;
      }
      this._router.navigate([], {
        relativeTo: this._route,
        queryParams: query
      });
      this.focusInput();
    }
  }, {
    key: "checkButtonPosition",
    value: function checkButtonPosition() {
      var window_width = window.innerWidth;
      var button_rect = this._button_el.nativeElement.getBoundingClientRect();
      var x_center = button_rect.left + button_rect.width / 2;
      this.right_size = x_center > window_width / 2;
    }
  }]);
}(common_1.AsyncHandler);
_ExploreSearchComponent = ExploreSearchComponent;
_ExploreSearchComponent.ɵfac = function ExploreSearchComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _ExploreSearchComponent)(i0.ɵɵdirectiveInject(i0.ElementRef), i0.ɵɵdirectiveInject(i1.ExploreSearchService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i2.ActivatedRoute));
};
_ExploreSearchComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _ExploreSearchComponent,
  selectors: [["explore-search"]],
  viewQuery: function ExploreSearchComponent_Query(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵviewQuery(_c0, 5);
      i0.ɵɵviewQuery(_c1, 7);
    }
    if (rf & 2) {
      var _t;
      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx._input_el = _t.first);
      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx._button_el = _t.first);
    }
  },
  features: [i0.ɵɵInheritDefinitionFeature],
  decls: 14,
  vars: 20,
  consts: function consts() {
    var i18n_0;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_6939663044582448373$$LIBS_EXPLORE_SRC_LIB_EXPLORE_SEARCH_COMPONENT_TS_0 = goog.getMsg("Search for...");
      i18n_0 = MSG_EXTERNAL_6939663044582448373$$LIBS_EXPLORE_SRC_LIB_EXPLORE_SEARCH_COMPONENT_TS_0;
    } else {
      i18n_0 = $localize(_templateObject || (_templateObject = _taggedTemplateLiteral([":\u241F7a428104a6c33787961fda306f9c518f89fb0261\u241F6939663044582448373:Search for..."])));
    }
    var i18n_1;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_3411517965707112535$$LIBS_EXPLORE_SRC_LIB_EXPLORE_SEARCH_COMPONENT_TS_1 = goog.getMsg(" No matches found ");
      i18n_1 = MSG_EXTERNAL_3411517965707112535$$LIBS_EXPLORE_SRC_LIB_EXPLORE_SEARCH_COMPONENT_TS_1;
    } else {
      i18n_1 = $localize(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([":\u241F0c720c4e60410fcfcd8582a32297bdd397620830\u241F3411517965707112535: No matches found "])));
    }
    return [["button", ""], ["origin", "matAutocompleteOrigin"], ["input", ""], ["auto", "matAutocomplete"], i18n_1, ["icon", "", "matRipple", "", 1, "bg-base-200", "m-2", 3, "resize", "click"], ["role", "search", "tabindex", "0", "matRipple", "", "matAutocompleteOrigin", "", 1, "absolute", "top-1/2", "-translate-y-1/2", "bg-base-100", "flex", "items-center", "z-10", "overflow-hidden", "outline-none", "px-4", "max-w-[calc(100vw-7rem)]", 3, "click"], ["keyboard", "", "placeholder", i18n_0, 1, "flex-1", "text-base", "border-none", "outline-none", 3, "ngModelChange", "focus", "blur", "ngModel", "matAutocomplete", "matAutocompleteConnectedTo"], ["class", "mr-2", 3, "diameter", 4, "ngIf"], [4, "ngIf"], [1, "mr-2", 3, "diameter"], ["class", "pointer-events-none", 4, "ngIf"], [3, "value", "click", 4, "ngFor", "ngForOf"], [1, "pointer-events-none"], [3, "click", "value"], [1, "flex", "items-center", "leading-tight", "w-[22rem]", "max-w-[calc(100vw-2rem)]"], [1, "flex-1", "w-1/2", "overflow-hidden"], [1, "truncate", "w-full"], [1, "text-xs"], [1, "text-xs", "font-bold", "p-2", "capitalize", "text-white", "bg-base-300", "rounded"]];
  },
  template: function ExploreSearchComponent_Template(rf, ctx) {
    if (rf & 1) {
      var _r1 = i0.ɵɵgetCurrentView();
      i0.ɵɵelementStart(0, "button", 5, 0);
      i0.ɵɵlistener("resize", function ExploreSearchComponent_Template_button_resize_0_listener() {
        i0.ɵɵrestoreView(_r1);
        return i0.ɵɵresetView(ctx.checkButtonPosition());
      }, false, i0.ɵɵresolveWindow)("click", function ExploreSearchComponent_Template_button_click_0_listener($event) {
        i0.ɵɵrestoreView(_r1);
        return i0.ɵɵresetView(ctx.show ? ctx.closeSearch($event) : ctx.showSearch());
      });
      i0.ɵɵelementStart(2, "app-icon");
      i0.ɵɵtext(3);
      i0.ɵɵelementEnd()();
      i0.ɵɵelementStart(4, "div", 6, 1);
      i0.ɵɵlistener("click", function ExploreSearchComponent_Template_div_click_4_listener() {
        i0.ɵɵrestoreView(_r1);
        return i0.ɵɵresetView(ctx.focusInput());
      });
      i0.ɵɵelementStart(6, "input", 7, 2);
      i0.ɵɵtwoWayListener("ngModelChange", function ExploreSearchComponent_Template_input_ngModelChange_6_listener($event) {
        i0.ɵɵrestoreView(_r1);
        i0.ɵɵtwoWayBindingSet(ctx.search_str, $event) || (ctx.search_str = $event);
        return i0.ɵɵresetView($event);
      });
      i0.ɵɵlistener("ngModelChange", function ExploreSearchComponent_Template_input_ngModelChange_6_listener($event) {
        i0.ɵɵrestoreView(_r1);
        return i0.ɵɵresetView(ctx.setFilter($event));
      })("focus", function ExploreSearchComponent_Template_input_focus_6_listener() {
        i0.ɵɵrestoreView(_r1);
        return i0.ɵɵresetView(ctx.cancelClear());
      })("blur", function ExploreSearchComponent_Template_input_blur_6_listener() {
        i0.ɵɵrestoreView(_r1);
        return i0.ɵɵresetView(ctx.clear());
      });
      i0.ɵɵelementEnd();
      i0.ɵɵtemplate(8, ExploreSearchComponent_mat_spinner_8_Template, 1, 1, "mat-spinner", 8);
      i0.ɵɵpipe(9, "async");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(10, "mat-autocomplete", null, 3);
      i0.ɵɵtemplate(12, ExploreSearchComponent_ng_container_12_Template, 6, 10, "ng-container", 9);
      i0.ɵɵpipe(13, "async");
      i0.ɵɵelementEnd();
    }
    if (rf & 2) {
      var origin_r5 = i0.ɵɵreference(5);
      var auto_r6 = i0.ɵɵreference(11);
      i0.ɵɵadvance(3);
      i0.ɵɵtextInterpolate(ctx.show || ctx.search_str ? "close" : "search");
      i0.ɵɵadvance();
      i0.ɵɵclassProp("right-0", ctx.right_size)("-translate-x-14", ctx.right_size)("left-0", !ctx.right_size)("translate-x-14", !ctx.right_size)("show", ctx.show || ctx.search_str);
      i0.ɵɵadvance(2);
      i0.ɵɵtwoWayProperty("ngModel", ctx.search_str);
      i0.ɵɵproperty("matAutocomplete", auto_r6)("matAutocompleteConnectedTo", origin_r5);
      i0.ɵɵadvance(2);
      i0.ɵɵproperty("ngIf", i0.ɵɵpipeBind1(9, 16, ctx.loading));
      i0.ɵɵadvance(4);
      i0.ɵɵproperty("ngIf", i0.ɵɵpipeBind1(13, 18, ctx.loading) !== true && (ctx.show || ctx.search_str));
    }
  },
  dependencies: [i3.NgForOf, i3.NgIf, i4.IconComponent, i5.VirtualKeyboardComponent, i6.MatAutocomplete, i7.MatOption, i6.MatAutocompleteTrigger, i6.MatAutocompleteOrigin, i7.MatRipple, i8.MatProgressSpinner, i9.DefaultValueAccessor, i9.NgControlStatus, i9.NgModel, i3.AsyncPipe, i3.SlicePipe],
  styles: ["[_nghost-%COMP%] {\n                z-index: 99;\n                position: relative;\n            }\n\n            [role='search'][_ngcontent-%COMP%] {\n                height: 3rem;\n                width: 0;\n                border-radius: 1.5rem;\n                border: 1px solid var(--b3);\n                transition: width 200ms opacity 200ms;\n                opacity: 0;\n                pointer-events: none;\n            }\n\n            [role='search'].show[_ngcontent-%COMP%] {\n                width: 24rem;\n                opacity: 1;\n                pointer-events: auto;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImV4cGxvcmUtc2VhcmNoLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1lBQ1k7Z0JBQ0ksV0FBVztnQkFDWCxrQkFBa0I7WUFDdEI7O1lBRUE7Z0JBQ0ksWUFBWTtnQkFDWixRQUFRO2dCQUNSLHFCQUFxQjtnQkFDckIsMkJBQTJCO2dCQUMzQixxQ0FBcUM7Z0JBQ3JDLFVBQVU7Z0JBQ1Ysb0JBQW9CO1lBQ3hCOztZQUVBO2dCQUNJLFlBQVk7Z0JBQ1osVUFBVTtnQkFDVixvQkFBb0I7WUFDeEIiLCJmaWxlIjoiZXhwbG9yZS1zZWFyY2guY29tcG9uZW50LnRzIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICA6aG9zdCB7XG4gICAgICAgICAgICAgICAgei1pbmRleDogOTk7XG4gICAgICAgICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBbcm9sZT0nc2VhcmNoJ10ge1xuICAgICAgICAgICAgICAgIGhlaWdodDogM3JlbTtcbiAgICAgICAgICAgICAgICB3aWR0aDogMDtcbiAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiAxLjVyZW07XG4gICAgICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYjMpO1xuICAgICAgICAgICAgICAgIHRyYW5zaXRpb246IHdpZHRoIDIwMG1zIG9wYWNpdHkgMjAwbXM7XG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMDtcbiAgICAgICAgICAgICAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgW3JvbGU9J3NlYXJjaCddLnNob3cge1xuICAgICAgICAgICAgICAgIHdpZHRoOiAyNHJlbTtcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAxO1xuICAgICAgICAgICAgICAgIHBvaW50ZXItZXZlbnRzOiBhdXRvO1xuICAgICAgICAgICAgfVxuICAgICAgICAiXX0= */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvZXhwbG9yZS9zcmMvbGliL2V4cGxvcmUtc2VhcmNoLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1lBQ1k7Z0JBQ0ksV0FBVztnQkFDWCxrQkFBa0I7WUFDdEI7O1lBRUE7Z0JBQ0ksWUFBWTtnQkFDWixRQUFRO2dCQUNSLHFCQUFxQjtnQkFDckIsMkJBQTJCO2dCQUMzQixxQ0FBcUM7Z0JBQ3JDLFVBQVU7Z0JBQ1Ysb0JBQW9CO1lBQ3hCOztZQUVBO2dCQUNJLFlBQVk7Z0JBQ1osVUFBVTtnQkFDVixvQkFBb0I7WUFDeEI7O0FBRVosd3VDQUF3dUMiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIDpob3N0IHtcbiAgICAgICAgICAgICAgICB6LWluZGV4OiA5OTtcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIFtyb2xlPSdzZWFyY2gnXSB7XG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAzcmVtO1xuICAgICAgICAgICAgICAgIHdpZHRoOiAwO1xuICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDEuNXJlbTtcbiAgICAgICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iMyk7XG4gICAgICAgICAgICAgICAgdHJhbnNpdGlvbjogd2lkdGggMjAwbXMgb3BhY2l0eSAyMDBtcztcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAwO1xuICAgICAgICAgICAgICAgIHBvaW50ZXItZXZlbnRzOiBub25lO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBbcm9sZT0nc2VhcmNoJ10uc2hvdyB7XG4gICAgICAgICAgICAgICAgd2lkdGg6IDI0cmVtO1xuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDE7XG4gICAgICAgICAgICAgICAgcG9pbnRlci1ldmVudHM6IGF1dG87XG4gICAgICAgICAgICB9XG4gICAgICAgICJdLCJzb3VyY2VSb290IjoiIn0= */"]
});
exports.ExploreSearchComponent = ExploreSearchComponent;

/***/ }),

/***/ 35446:
/*!********************************************************!*\
  !*** ./libs/explore/src/lib/explore-search.service.ts ***!
  \********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _regeneratorRuntime = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/regeneratorRuntime.js */ 8698)["default"]);
var _asyncToGenerator = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/asyncToGenerator.js */ 95386)["default"]);
var _toConsumableArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/toConsumableArray.js */ 86033)["default"]);
var _createForOfIteratorHelper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createForOfIteratorHelper.js */ 36350)["default"]);
var _slicedToArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/slicedToArray.js */ 6282)["default"]);
var _objectSpread = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/objectSpread2.js */ 34092)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _ExploreSearchService;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.ExploreSearchService = void 0;
var ts_client_1 = __webpack_require__(/*! @placeos/ts-client */ 35713);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var rxjs_1 = __webpack_require__(/*! rxjs */ 15681);
var operators_1 = __webpack_require__(/*! rxjs/operators */ 97303);
var space_class_1 = __webpack_require__(/*! libs/spaces/src/lib/space.class */ 30735);
var staff_fn_1 = __webpack_require__(/*! libs/users/src/lib/staff.fn */ 2372);
var organisation_service_1 = __webpack_require__(/*! libs/organisation/src/lib/organisation.service */ 19863);
var organisation_1 = __webpack_require__(/*! @placeos/organisation */ 2510);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! libs/organisation/src/lib/organisation.service */ 19863);
var i2 = __webpack_require__(/*! @placeos/common */ 22797);
var TYPES = ['space', 'contact', 'feature', 'user'];
function typeIndex(item) {
  return TYPES.indexOf(item.is_role ? 'contact' : item.type);
}
var ExploreSearchService = /*#__PURE__*/function () {
  function ExploreSearchService(_org, _settings, _maps_people) {
    var _this = this;
    _classCallCheck(this, ExploreSearchService);
    this._org = _org;
    this._settings = _settings;
    this._maps_people = _maps_people;
    /** Current search results for staff users */
    this._emergency_contacts = new rxjs_1.BehaviorSubject([]);
    /** Filter string for results */
    this._filter = new rxjs_1.BehaviorSubject('');
    /** Whether results are being loaded */
    this._loading = new rxjs_1.BehaviorSubject(false);
    this.emergency_contacts = this._emergency_contacts.asObservable();
    this._role_assigned_contacts = this._org.active_building.pipe((0, operators_1.filter)(function (bld) {
      return !!bld;
    }), (0, operators_1.switchMap)(function (bld) {
      return (0, ts_client_1.showMetadata)(bld.id, 'emergency_contacts');
    }), (0, operators_1.map)(function (_ref) {
      var details = _ref.details;
      return (details === null || details === void 0 ? void 0 : details.contacts) || [];
    }), (0, operators_1.shareReplay)(1));
    this._user_search = this._filter.pipe((0, operators_1.debounceTime)(400), (0, operators_1.tap)(function () {
      return _this._loading.next(true);
    }), (0, operators_1.switchMap)(function (q) {
      return (q === null || q === void 0 ? void 0 : q.length) > 2 ? _this.search_fn(q).pipe((0, operators_1.catchError)(function () {
        return (0, rxjs_1.of)([]);
      })) : (0, rxjs_1.of)([]);
    }), (0, operators_1.shareReplay)(1));
    this._space_search = this._filter.pipe((0, operators_1.debounceTime)(400), (0, operators_1.tap)(function () {
      return _this._loading.next(true);
    }), (0, operators_1.switchMap)(function (q) {
      return (q === null || q === void 0 ? void 0 : q.length) > 2 ? (0, ts_client_1.querySystems)({
        q: q,
        zone_id: _this._org.organisation.id
      }).pipe((0, operators_1.map)(function (_ref2) {
        var data = _ref2.data;
        return data.filter(function (_) {
          return _.map_id;
        }).map(function (_) {
          return new space_class_1.Space(_objectSpread(_objectSpread({}, _), {}, {
            level: _this._org.levelWithID(_.zones)
          }));
        });
      })) : (0, rxjs_1.of)([]);
    }), (0, operators_1.catchError)(function () {
      return [];
    }));
    this._maps_people_search = (0, rxjs_1.combineLatest)([this._maps_people.available$, this._filter, this._org.active_building]).pipe((0, operators_1.debounceTime)(1000), (0, operators_1.switchMap)(function (_ref3) {
      var _mapsindoors;
      var _ref4 = _slicedToArray(_ref3, 2),
        available = _ref4[0],
        q = _ref4[1];
      return available && q.length > 2 ? (_mapsindoors = mapsindoors) === null || _mapsindoors === void 0 ? void 0 : _mapsindoors.services.LocationsService.getLocations({
        q: q
      }) : (0, rxjs_1.of)([]);
    }), (0, operators_1.map)(function (list) {
      return list.map(function (_) {
        var _$properties, _$properties2, _$properties3, _$properties4, _$properties5, _$properties6, _$properties7;
        return {
          id: ((_$properties = _.properties) === null || _$properties === void 0 ? void 0 : _$properties.externalId) || ((_$properties2 = _.properties) === null || _$properties2 === void 0 ? void 0 : _$properties2.roomId) || _.roomId || _.id,
          map_id: ((_$properties3 = _.properties) === null || _$properties3 === void 0 ? void 0 : _$properties3.externalId) || ((_$properties4 = _.properties) === null || _$properties4 === void 0 ? void 0 : _$properties4.roomId) || _.roomId || '',
          type: 'feature',
          name: ((_$properties5 = _.properties) === null || _$properties5 === void 0 ? void 0 : _$properties5.name) || '',
          description: "".concat((_$properties6 = _.properties) === null || _$properties6 === void 0 ? void 0 : _$properties6.roomId, " , Level ").concat((_$properties7 = _.properties) === null || _$properties7 === void 0 ? void 0 : _$properties7.floorName)
        };
      });
    }), (0, operators_1.shareReplay)(1));
    this._map_features = this._org.active_building.pipe((0, operators_1.filter)(function (bld) {
      return !!bld;
    }), (0, operators_1.switchMap)(function () {
      return (0, ts_client_1.listChildMetadata)(_this._org.building.id, {
        name: 'map_features'
      }).pipe((0, operators_1.catchError)(function () {
        return (0, rxjs_1.of)({
          details: []
        });
      }));
    }), (0, operators_1.map)(function (data) {
      var list = [];
      var _iterator = _createForOfIteratorHelper(data),
        _step;
      try {
        for (_iterator.s(); !(_step = _iterator.n()).done;) {
          var item = _step.value;
          var metadata = item.metadata.map_features;
          if (!metadata) continue;
          var feature_list = metadata.details instanceof Array ? metadata.details : [];
          var _iterator2 = _createForOfIteratorHelper(feature_list),
            _step2;
          try {
            for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
              var feature = _step2.value;
              list.push({
                id: feature.id,
                type: 'feature',
                name: feature.name,
                description: '',
                zone: item.zone
              });
            }
          } catch (err) {
            _iterator2.e(err);
          } finally {
            _iterator2.f();
          }
        }
      } catch (err) {
        _iterator.e(err);
      } finally {
        _iterator.f();
      }
      return list;
    }));
    this._poi_metadata = this._org.initialised.pipe((0, operators_1.filter)(function (_) {
      return _;
    }), (0, operators_1.switchMap)(function () {
      return (0, ts_client_1.showMetadata)(_this._org.organisation.id, 'points-of-interest').pipe((0, operators_1.catchError)(function (_) {
        return (0, rxjs_1.of)({
          details: {}
        });
      }));
    }), (0, operators_1.shareReplay)(1));
    this._poi_list = (0, rxjs_1.combineLatest)([this._org.active_building, this._poi_metadata]).pipe((0, operators_1.filter)(function (_ref5) {
      var _ref6 = _slicedToArray(_ref5, 1),
        bld = _ref6[0];
      return !!bld.id;
    }), (0, operators_1.map)(function (_ref7) {
      var _ref8 = _slicedToArray(_ref7, 2),
        bld = _ref8[0],
        metadata = _ref8[1];
      var mapping = metadata.details || {};
      var levels = _this._org.levelsForBuilding(bld);
      var list = (0, common_1.flatten)(levels.map(function (lvl) {
        return mapping[lvl.id] || [];
      }));
      return list.filter(function (_) {
        return _.can_search;
      });
    }));
    this._points_of_interest = this._poi_list.pipe((0, operators_1.map)(function (poi_list) {
      return poi_list.map(function (item) {
        return {
          id: item.id || item.location,
          type: 'feature',
          name: item.name,
          description: '',
          zone: item.level_id
        };
      });
    }));
    this.search_results = (0, rxjs_1.combineLatest)([this._filter, this._space_search, this._user_search, this._emergency_contacts, this._role_assigned_contacts, this._map_features, this._maps_people_search, this._points_of_interest]).pipe((0, operators_1.map)(function (_ref9) {
      var _ref10 = _slicedToArray(_ref9, 8),
        filter = _ref10[0],
        spaces = _ref10[1],
        users = _ref10[2],
        contacts = _ref10[3],
        roled_contacts = _ref10[4],
        features = _ref10[5],
        mapspeople_items = _ref10[6],
        points_of_interest = _ref10[7];
      var search = filter.toLowerCase();
      var results = [].concat(_toConsumableArray(mapspeople_items), _toConsumableArray(spaces.filter(function (_) {
        return _.email.toLowerCase().includes(search) || _.name.toLowerCase().includes(search) || _.display_name.toLowerCase().includes(search);
      }).map(function (s) {
        return {
          id: s.id,
          type: 'space',
          name: s.display_name || s.name,
          description: "Capacity: ".concat(s.capacity, " ")
        };
      })), _toConsumableArray((0, common_1.flatten)(roled_contacts.map(function (u) {
        return u.roles.map(function (role) {
          return {
            id: u.email,
            type: role || 'contact',
            is_role: true,
            name: u.name,
            description: u.email
          };
        });
      })).filter(function (_) {
        return _.name.toLowerCase().includes(search) || _.description.toLowerCase().includes(search) || _.type.toLowerCase().includes(search);
      })), _toConsumableArray(features.filter(function (_) {
        return _.name.toLowerCase().includes(search);
      }).map(function (s) {
        var _s$zone;
        return {
          id: s.id,
          type: 'feature',
          name: s.name,
          description: '',
          zone: (_s$zone = s.zone) === null || _s$zone === void 0 ? void 0 : _s$zone.id
        };
      })), _toConsumableArray(points_of_interest.filter(function (_) {
        return _.name.toLowerCase().includes(search);
      })), _toConsumableArray(contacts.map(function (u) {
        return {
          id: u.email,
          type: u.type || 'contact',
          is_role: true,
          name: u.name,
          description: u.email
        };
      }).filter(function (_) {
        return _.name.toLowerCase().includes(search) || _.description.toLowerCase().includes(search) || _.type.toLowerCase().includes(search);
      })), _toConsumableArray(users.map(function (u) {
        return {
          id: u.email,
          type: 'user',
          name: u.name,
          description: u.email
        };
      })));
      results.sort(function (a, b) {
        return typeIndex(a) - typeIndex(b) || a.name.localeCompare(b.name);
      });
      return results;
    }), (0, operators_1.tap)(function () {
      return _this._loading.next(false);
    }), (0, operators_1.shareReplay)(1));
    /** Obverable for whether results are being loaded */
    this.loading = this._loading.asObservable();
    /** Function used to query for users */
    this.search_fn = function (q) {
      var _ref11;
      return _this._settings.get('app.basic_user_search') ? (0, ts_client_1.queryUsers)({
        q: q,
        authority_id: (_ref11 = (0, ts_client_1.authority)()) === null || _ref11 === void 0 ? void 0 : _ref11.id
      }).pipe((0, operators_1.map)(function (_) {
        return _.data;
      })) : (0, staff_fn_1.searchStaff)(q);
    };
    this.search_results.subscribe();
    this.init();
  }
  return _createClass(ExploreSearchService, [{
    key: "init",
    value: function () {
      var _init = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
        var _this2 = this;
        var mod, binding;
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              _context.next = 2;
              return this._org.initialised.pipe((0, operators_1.first)(function (_) {
                return _;
              })).toPromise();
            case 2:
              mod = (0, organisation_1.moduleFromMetadata)(this._org.binding('location_services'), 'LocationServices');
              if (mod) {
                binding = mod.binding('emergency_contacts');
                binding.listen().subscribe(function (contacts_map) {
                  var list = [];
                  for (var type in contacts_map) {
                    var _iterator3 = _createForOfIteratorHelper(contacts_map[type]),
                      _step3;
                    try {
                      for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {
                        var user = _step3.value;
                        list.push(_objectSpread(_objectSpread({}, user), {}, {
                          type: type
                        }));
                      }
                    } catch (err) {
                      _iterator3.e(err);
                    } finally {
                      _iterator3.f();
                    }
                  }
                  _this2._emergency_contacts.next(list);
                });
                binding.bind();
              }
            case 4:
            case "end":
              return _context.stop();
          }
        }, _callee, this);
      }));
      function init() {
        return _init.apply(this, arguments);
      }
      return init;
    }()
  }, {
    key: "setFilter",
    value: function setFilter(str) {
      this._filter.next(str);
    }
  }]);
}();
_ExploreSearchService = ExploreSearchService;
_ExploreSearchService.ɵfac = function ExploreSearchService_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _ExploreSearchService)(i0.ɵɵinject(i1.OrganisationService), i0.ɵɵinject(i2.SettingsService), i0.ɵɵinject(i2.MapsPeopleService));
};
_ExploreSearchService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({
  token: _ExploreSearchService,
  factory: _ExploreSearchService.ɵfac,
  providedIn: 'root'
});
exports.ExploreSearchService = ExploreSearchService;

/***/ }),

/***/ 79303:
/*!***************************************************************!*\
  !*** ./libs/explore/src/lib/explore-sensor-info.component.ts ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _callSuper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/callSuper.js */ 8513)["default"]);
var _inherits = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/inherits.js */ 58160)["default"]);
var _ExploreSensorInfoComponent;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.ExploreSensorInfoComponent = void 0;
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var components_1 = __webpack_require__(/*! @placeos/components */ 51588);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @angular/common */ 60316);
var i2 = __webpack_require__(/*! ../../../components/src/lib/icon.component */ 69434);
var i3 = __webpack_require__(/*! ../../../components/src/lib/custom-tooltip.component */ 22238);
var i4 = __webpack_require__(/*! @angular/material/core */ 74646);
function ExploreSensorInfoComponent_ng_template_3_div_1_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 5)(1, "app-icon");
    i0.ɵɵtext(2, "thermostat");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(3, "div", 6);
    i0.ɵɵtext(4);
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var ctx_r0 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance(4);
    i0.ɵɵtextInterpolate1("", ctx_r0.temp, "\u02DAF");
  }
}
function ExploreSensorInfoComponent_ng_template_3_div_2_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 5)(1, "app-icon");
    i0.ɵɵtext(2, "opacity");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(3, "div", 6);
    i0.ɵɵtext(4);
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var ctx_r0 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance(4);
    i0.ɵɵtextInterpolate1("", ctx_r0.humidity, "%");
  }
}
function ExploreSensorInfoComponent_ng_template_3_div_3_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 7)(1, "app-icon", 8);
    i0.ɵɵtext(2, "error");
    i0.ɵɵelementEnd()();
  }
}
function ExploreSensorInfoComponent_ng_template_3_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 2);
    i0.ɵɵtemplate(1, ExploreSensorInfoComponent_ng_template_3_div_1_Template, 5, 1, "div", 3)(2, ExploreSensorInfoComponent_ng_template_3_div_2_Template, 5, 1, "div", 3)(3, ExploreSensorInfoComponent_ng_template_3_div_3_Template, 3, 0, "div", 4);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r0 = i0.ɵɵnextContext();
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", ctx_r0.temp);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", ctx_r0.humidity);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", ctx_r0.temp > 82);
  }
}
var shown_id = '';
var ExploreSensorInfoComponent = /*#__PURE__*/function (_common_1$AsyncHandle) {
  function ExploreSensorInfoComponent(_details) {
    var _this;
    _classCallCheck(this, ExploreSensorInfoComponent);
    _this = _callSuper(this, ExploreSensorInfoComponent);
    _this._details = _details;
    _this.temp = _this._details.temp || 0;
    _this.humidity = _this._details.humidity || 0;
    return _this;
  }
  _inherits(ExploreSensorInfoComponent, _common_1$AsyncHandle);
  return _createClass(ExploreSensorInfoComponent, [{
    key: "show",
    get: function get() {
      return shown_id === this._details.id;
    },
    set: function set(value) {
      var _this2 = this;
      this.timeout('show', function () {
        return shown_id = value ? _this2._details.id : '';
      });
    }
  }]);
}(common_1.AsyncHandler);
_ExploreSensorInfoComponent = ExploreSensorInfoComponent;
_ExploreSensorInfoComponent.ɵfac = function ExploreSensorInfoComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _ExploreSensorInfoComponent)(i0.ɵɵdirectiveInject(components_1.MAP_FEATURE_DATA));
};
_ExploreSensorInfoComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _ExploreSensorInfoComponent,
  selectors: [["explore-sensor-info"]],
  features: [i0.ɵɵInheritDefinitionFeature],
  decls: 5,
  vars: 1,
  consts: [["stats", ""], ["icon", "", "matRipple", "", "customTooltip", "", "yPosition", "center", "xPosition", "center", 1, "absolute", "top-1/2", "left-1/2", "w-7", "h-7", "min-w-0", "-translate-x-1/2", "-translate-y-1/2", "bg-base-100", "shadow", "pointer-events-auto", 3, "content"], [1, "absolute", "top-1/2", "left-1/2", "-translate-x-1/2", "-translate-y-1/2", "bg-base-100", "rounded-lg", "border", "border-base-200", "p-2", "text-xl"], ["class", "flex items-center space-x-2 whitespace-nowrap pr-2", 4, "ngIf"], ["class", "absolute top-0 right-0 rounded-full translate-x-1/2 -translate-y-1/2 bg-base-100 border border-base-200", 4, "ngIf"], [1, "flex", "items-center", "space-x-2", "whitespace-nowrap", "pr-2"], [1, ""], [1, "absolute", "top-0", "right-0", "rounded-full", "translate-x-1/2", "-translate-y-1/2", "bg-base-100", "border", "border-base-200"], [1, "text-error", "text-xl"]],
  template: function ExploreSensorInfoComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵelementStart(0, "button", 1)(1, "app-icon");
      i0.ɵɵtext(2, " visibility ");
      i0.ɵɵelementEnd()();
      i0.ɵɵtemplate(3, ExploreSensorInfoComponent_ng_template_3_Template, 4, 3, "ng-template", null, 0, i0.ɵɵtemplateRefExtractor);
    }
    if (rf & 2) {
      var stats_r2 = i0.ɵɵreference(4);
      i0.ɵɵproperty("content", stats_r2);
    }
  },
  dependencies: [i1.NgIf, i2.IconComponent, i3.CustomTooltipComponent, i4.MatRipple]
});
exports.ExploreSensorInfoComponent = ExploreSensorInfoComponent;

/***/ }),

/***/ 48303:
/*!**************************************************************!*\
  !*** ./libs/explore/src/lib/explore-space-info.component.ts ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _taggedTemplateLiteral = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js */ 9959)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _ExploreSpaceInfoComponent, _templateObject, _templateObject2;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.ExploreSpaceInfoComponent = void 0;
var core_1 = __webpack_require__(/*! @angular/core */ 37580);
var components_1 = __webpack_require__(/*! @placeos/components */ 51588);
var settings_service_1 = __webpack_require__(/*! libs/common/src/lib/settings.service */ 14233);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! libs/common/src/lib/settings.service */ 14233);
function ExploreSpaceInfoComponent_ng_template_2_img_4_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelement(0, "img", 18);
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext(2);
    i0.ɵɵproperty("source", ctx_r1.space.images[0]);
  }
}
function ExploreSpaceInfoComponent_ng_template_2_div_5_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelement(0, "div", 19);
  }
}
function ExploreSpaceInfoComponent_ng_template_2_div_11_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 20);
    i0.ɵɵtext(1);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", ctx_r1.available_until, " ");
  }
}
function ExploreSpaceInfoComponent_ng_template_2_div_15_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 21)(1, "span");
    i0.ɵɵi18n(2, 3);
    i0.ɵɵelementEnd();
    i0.ɵɵtext(3);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance(3);
    i0.ɵɵtextInterpolate2("", ctx_r1.space.capacity, " ", ctx_r1.space.capacity === 1 ? "person" : "people", " ");
  }
}
function ExploreSpaceInfoComponent_ng_template_2_ul_16_li_1_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "li", 24);
    i0.ɵɵtext(1);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var feature_r3 = ctx.$implicit;
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", feature_r3, " ");
  }
}
function ExploreSpaceInfoComponent_ng_template_2_ul_16_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "ul", 22);
    i0.ɵɵtemplate(1, ExploreSpaceInfoComponent_ng_template_2_ul_16_li_1_Template, 2, 1, "li", 23);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngForOf", ctx_r1.space.features);
  }
}
function ExploreSpaceInfoComponent_ng_template_2_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 5);
    i0.ɵɵelement(1, "div", 6);
    i0.ɵɵelementStart(2, "div", 7)(3, "div", 8);
    i0.ɵɵtemplate(4, ExploreSpaceInfoComponent_ng_template_2_img_4_Template, 1, 1, "img", 9)(5, ExploreSpaceInfoComponent_ng_template_2_div_5_Template, 1, 0, "div", 10);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(6, "div", 11)(7, "div", 12);
    i0.ɵɵtext(8, " ");
    i0.ɵɵi18n(9, 2);
    i0.ɵɵtext(10, " ");
    i0.ɵɵelementEnd();
    i0.ɵɵtemplate(11, ExploreSpaceInfoComponent_ng_template_2_div_11_Template, 2, 1, "div", 13);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(12, "div", 14)(13, "h4", 15);
    i0.ɵɵtext(14);
    i0.ɵɵelementEnd();
    i0.ɵɵtemplate(15, ExploreSpaceInfoComponent_ng_template_2_div_15_Template, 4, 2, "div", 16)(16, ExploreSpaceInfoComponent_ng_template_2_ul_16_Template, 2, 1, "ul", 17);
    i0.ɵɵelementEnd()()();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵclassProp("-translate-x-full", ctx_r1.x_pos === "end")("-translate-y-full", ctx_r1.y_pos === "bottom");
    i0.ɵɵproperty("id", ctx_r1.space == null ? null : ctx_r1.space.id);
    i0.ɵɵadvance(3);
    i0.ɵɵclassProp("bg-neutral", ctx_r1.space.images[0])("h-32", ctx_r1.space.images[0])("h-8", !ctx_r1.space.images[0]);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", ctx_r1.space.images[0]);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", ctx_r1.space.images[0]);
    i0.ɵɵadvance(2);
    i0.ɵɵclassMap("capitalize rounded p-1 px-2 text-light border border-white shadow " + ctx_r1.status);
    i0.ɵɵadvance(2);
    i0.ɵɵi18nExp(ctx_r1.status);
    i0.ɵɵi18nApply(9);
    i0.ɵɵadvance(2);
    i0.ɵɵproperty("ngIf", ctx_r1.status !== "not-bookable");
    i0.ɵɵadvance(3);
    i0.ɵɵtextInterpolate1(" ", ctx_r1.space.display_name || ctx_r1.space.name, " ");
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", ctx_r1.space.capacity >= 0);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", (ctx_r1.space.features == null ? null : ctx_r1.space.features.length) > 0 && ctx_r1.show_features);
  }
}
var ExploreSpaceInfoComponent = /*#__PURE__*/function () {
  function ExploreSpaceInfoComponent(_details, _settings, _element) {
    _classCallCheck(this, ExploreSpaceInfoComponent);
    this._details = _details;
    this._settings = _settings;
    this._element = _element;
    /** Space to display details for */
    this.space = this._details.space;
    /** List of upcoming events for space */
    this.events = this._details.events;
    /** Current status of the space */
    this.status = this._details.status;
  }
  return _createClass(ExploreSpaceInfoComponent, [{
    key: "show_features",
    get: function get() {
      return !this._settings.get('app.spaces.hide_features');
    }
  }, {
    key: "ngOnInit",
    value: function ngOnInit() {
      var _this = this;
      setTimeout(function () {
        return _this.updateOffset();
      }, 200);
    }
  }, {
    key: "updateOffset",
    value: function updateOffset() {
      var pos = this._element.nativeElement.getBoundingClientRect();
      this.x_pos = pos.x < document.body.clientWidth / 2 ? 'start' : 'end';
      this.y_pos = pos.y < document.body.clientHeight / 2 ? 'top' : 'bottom';
    }
  }, {
    key: "available_until",
    get: function get() {
      return '';
    }
  }]);
}();
_ExploreSpaceInfoComponent = ExploreSpaceInfoComponent;
_ExploreSpaceInfoComponent.ɵfac = function ExploreSpaceInfoComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _ExploreSpaceInfoComponent)(i0.ɵɵdirectiveInject(components_1.MAP_FEATURE_DATA), i0.ɵɵdirectiveInject(i1.SettingsService), i0.ɵɵdirectiveInject(i0.ElementRef));
};
_ExploreSpaceInfoComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _ExploreSpaceInfoComponent,
  selectors: [["explore-space-info"]],
  decls: 4,
  vars: 7,
  consts: function consts() {
    var i18n_0;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_3658078071800974217$$LIBS_EXPLORE_SRC_LIB_EXPLORE_SPACE_INFO_COMPONENT_TS_0 = goog.getMsg("{VAR_SELECT, select, free {Free } busy {Busy } pending {Pending } reserved {Reserved } other {Not Bookable }}");
      i18n_0 = MSG_EXTERNAL_3658078071800974217$$LIBS_EXPLORE_SRC_LIB_EXPLORE_SPACE_INFO_COMPONENT_TS_0;
    } else {
      i18n_0 = $localize(_templateObject || (_templateObject = _taggedTemplateLiteral([":\u241F86e6b3a473ea3e05830d2aef91c81199de1b9d33\u241F3658078071800974217:{VAR_SELECT, select, free {Free } busy {Busy } pending {Pending } reserved {Reserved } other {Not Bookable }}"])));
    }
    i18n_0 = i0.ɵɵi18nPostprocess(i18n_0, {
      "VAR_SELECT": "\uFFFD0\uFFFD"
    });
    var i18n_1;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_2292396409867038415$$LIBS_EXPLORE_SRC_LIB_EXPLORE_SPACE_INFO_COMPONENT_TS_1 = goog.getMsg("Capacity: ");
      i18n_1 = MSG_EXTERNAL_2292396409867038415$$LIBS_EXPLORE_SRC_LIB_EXPLORE_SPACE_INFO_COMPONENT_TS_1;
    } else {
      i18n_1 = $localize(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([":\u241F36c2a5db33c6cfc9e239e589f975f5492bbb0550\u241F2292396409867038415:Capacity: "])));
    }
    return [["tooltip", ""], ["space_tooltip", ""], i18n_0, i18n_1, ["customTooltip", "", 1, "h-full", "w-full", "pointer-events-auto", "relative", "hidden", "sm:block", "cursor-pointer", 3, "mouseenter", "content", "backdrop", "xPosition", "yPosition", "hover", "delay"], ["name", "space-info", 1, "absolute", "rounded", "bg-base-100", "top-0", "left-0", "transform", "shadow", "pointer-events-none", "overflow-hidden", 3, "id"], [1, "arrow"], [1, "relative"], [1, "w-full", "overflow-hidden", "flex", "items-center", "justify-center", "relative", "bg-opacity-20"], ["auth", "", "class", "object-cover min-h-full min-w-full", 3, "source", 4, "ngIf"], ["class", "absolute inset-0 bg-neutral", 4, "ngIf"], [1, "absolute", "top-2", "left-2", "flex", "flex-wrap", "text-sm"], ["status", ""], ["available-until", "", 4, "ngIf"], [1, "flex", "flex-col", "py-4", "px-2"], [1, "font-medium", "text-xl", "mb-2", "px-2"], ["capacity", "", "class", "text-base px-2 mb-2", 4, "ngIf"], ["class", "flex flex-wrap", 4, "ngIf"], ["auth", "", 1, "object-cover", "min-h-full", "min-w-full", 3, "source"], [1, "absolute", "inset-0", "bg-neutral"], ["available-until", ""], ["capacity", "", 1, "text-base", "px-2", "mb-2"], [1, "flex", "flex-wrap"], ["class", "text-xs px-2 py-1 m-1 rounded-2xl bg-base-200 font-medium", 4, "ngFor", "ngForOf"], [1, "text-xs", "px-2", "py-1", "m-1", "rounded-2xl", "bg-base-200", "font-medium"]];
  },
  template: function ExploreSpaceInfoComponent_Template(rf, ctx) {
    if (rf & 1) {
      var _r1 = i0.ɵɵgetCurrentView();
      i0.ɵɵelementStart(0, "div", 4, 0);
      i0.ɵɵlistener("mouseenter", function ExploreSpaceInfoComponent_Template_div_mouseenter_0_listener() {
        i0.ɵɵrestoreView(_r1);
        return i0.ɵɵresetView(ctx.updateOffset());
      });
      i0.ɵɵelementEnd();
      i0.ɵɵtemplate(2, ExploreSpaceInfoComponent_ng_template_2_Template, 17, 20, "ng-template", null, 1, i0.ɵɵtemplateRefExtractor);
    }
    if (rf & 2) {
      var space_tooltip_r4 = i0.ɵɵreference(3);
      i0.ɵɵproperty("content", space_tooltip_r4)("backdrop", false)("xPosition", "center")("yPosition", "center")("hover", true)("delay", 3000);
      i0.ɵɵattribute("id", (ctx.space == null ? null : ctx.space.map_id) || (ctx.space == null ? null : ctx.space.id));
    }
  },
  styles: ["[name='space-info'][_ngcontent-%COMP%] {\n                width: 16rem;\n            }\n\n            [status][_ngcontent-%COMP%] {\n                background-color: #43a047;\n                font-weight: 500;\n            }\n\n            [status].busy[_ngcontent-%COMP%] {\n                background-color: #e53935;\n            }\n\n            [status].pending[_ngcontent-%COMP%] {\n                background-color: #ffb300;\n            }\n\n            [status].not-bookable[_ngcontent-%COMP%] {\n                background-color: #757575;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImV4cGxvcmUtc3BhY2UtaW5mby5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLFlBQVk7WUFDaEI7O1lBRUE7Z0JBQ0kseUJBQXlCO2dCQUN6QixnQkFBZ0I7WUFDcEI7O1lBRUE7Z0JBQ0kseUJBQXlCO1lBQzdCOztZQUVBO2dCQUNJLHlCQUF5QjtZQUM3Qjs7WUFFQTtnQkFDSSx5QkFBeUI7WUFDN0IiLCJmaWxlIjoiZXhwbG9yZS1zcGFjZS1pbmZvLmNvbXBvbmVudC50cyIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgW25hbWU9J3NwYWNlLWluZm8nXSB7XG4gICAgICAgICAgICAgICAgd2lkdGg6IDE2cmVtO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBbc3RhdHVzXSB7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogIzQzYTA0NztcbiAgICAgICAgICAgICAgICBmb250LXdlaWdodDogNTAwO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBbc3RhdHVzXS5idXN5IHtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZTUzOTM1O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBbc3RhdHVzXS5wZW5kaW5nIHtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZiMzAwO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBbc3RhdHVzXS5ub3QtYm9va2FibGUge1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICM3NTc1NzU7XG4gICAgICAgICAgICB9XG4gICAgICAgICJdfQ== */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvZXhwbG9yZS9zcmMvbGliL2V4cGxvcmUtc3BhY2UtaW5mby5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLFlBQVk7WUFDaEI7O1lBRUE7Z0JBQ0kseUJBQXlCO2dCQUN6QixnQkFBZ0I7WUFDcEI7O1lBRUE7Z0JBQ0kseUJBQXlCO1lBQzdCOztZQUVBO2dCQUNJLHlCQUF5QjtZQUM3Qjs7WUFFQTtnQkFDSSx5QkFBeUI7WUFDN0I7O0FBRVosZ2tDQUFna0MiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIFtuYW1lPSdzcGFjZS1pbmZvJ10ge1xuICAgICAgICAgICAgICAgIHdpZHRoOiAxNnJlbTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgW3N0YXR1c10ge1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICM0M2EwNDc7XG4gICAgICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgW3N0YXR1c10uYnVzeSB7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2U1MzkzNTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgW3N0YXR1c10ucGVuZGluZyB7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmYjMwMDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgW3N0YXR1c10ubm90LWJvb2thYmxlIHtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjNzU3NTc1O1xuICAgICAgICAgICAgfVxuICAgICAgICAiXSwic291cmNlUm9vdCI6IiJ9 */"]
});
exports.ExploreSpaceInfoComponent = ExploreSpaceInfoComponent;

/***/ }),

/***/ 65897:
/*!********************************************************!*\
  !*** ./libs/explore/src/lib/explore-spaces.service.ts ***!
  \********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _regeneratorRuntime = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/regeneratorRuntime.js */ 8698)["default"]);
var _asyncToGenerator = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/asyncToGenerator.js */ 95386)["default"]);
var _createForOfIteratorHelper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createForOfIteratorHelper.js */ 36350)["default"]);
var _slicedToArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/slicedToArray.js */ 6282)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _callSuper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/callSuper.js */ 8513)["default"]);
var _inherits = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/inherits.js */ 58160)["default"]);
var _ExploreSpacesService;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.ExploreSpacesService = exports.DEFAULT_COLOURS = void 0;
var dialog_1 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var ts_client_1 = __webpack_require__(/*! @placeos/ts-client */ 35713);
var operators_1 = __webpack_require__(/*! rxjs/operators */ 97303);
var rxjs_1 = __webpack_require__(/*! rxjs */ 15681);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var notifications_1 = __webpack_require__(/*! libs/common/src/lib/notifications */ 39525);
var space_class_1 = __webpack_require__(/*! libs/spaces/src/lib/space.class */ 30735);
var event_class_1 = __webpack_require__(/*! libs/events/src/lib/event.class */ 6727);
var event_form_service_1 = __webpack_require__(/*! libs/events/src/lib/event-form.service */ 26101);
var organisation_service_1 = __webpack_require__(/*! libs/organisation/src/lib/organisation.service */ 19863);
var explore_state_service_1 = __webpack_require__(/*! ./explore-state.service */ 12455);
var explore_space_info_component_1 = __webpack_require__(/*! ./explore-space-info.component */ 48303);
var explore_booking_modal_component_1 = __webpack_require__(/*! ./explore-booking-modal.component */ 76301);
var explore_book_qr_component_1 = __webpack_require__(/*! ./explore-book-qr.component */ 72213);
var explore_icon_component_1 = __webpack_require__(/*! ./explore-icon.component */ 83207);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! ./explore-state.service */ 12455);
var i2 = __webpack_require__(/*! @placeos/common */ 22797);
var i3 = __webpack_require__(/*! libs/events/src/lib/event-form.service */ 26101);
var i4 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var i5 = __webpack_require__(/*! libs/organisation/src/lib/organisation.service */ 19863);
exports.DEFAULT_COLOURS = {
  free: '#43a047',
  pending: '#ffb300',
  reserved: '#e65100',
  busy: '#e53935',
  'signs-of-life': '#1565c0',
  'not-bookable': '#757575',
  unknown: '#757575'
};
var ExploreSpacesService = /*#__PURE__*/function (_common_1$AsyncHandle) {
  function ExploreSpacesService(_state, _settings, _event_form, _dialog, _org) {
    var _this;
    _classCallCheck(this, ExploreSpacesService);
    _this = _callSuper(this, ExploreSpacesService);
    _this._state = _state;
    _this._settings = _settings;
    _this._event_form = _event_form;
    _this._dialog = _dialog;
    _this._org = _org;
    _this._bookings = {};
    _this._statuses = {};
    _this._presence = {};
    _this._panning = true;
    _this._last_action = '';
    _this.booking_rules = _this._org.active_building.pipe((0, operators_1.filter)(function (bld) {
      return !!bld;
    }), (0, operators_1.switchMap)(function (bld) {
      return (0, ts_client_1.showMetadata)(bld.id, "room_booking_rules").pipe((0, operators_1.catchError)(function () {
        return (0, rxjs_1.of)({
          details: []
        });
      }));
    }), (0, operators_1.map)(function (_) {
      return (_ === null || _ === void 0 ? void 0 : _.details) instanceof Array ? _.details : [];
    }), (0, operators_1.shareReplay)(1));
    _this._bind = (0, rxjs_1.combineLatest)([_this._state.spaces, _this._state.options]).pipe((0, operators_1.filter)(function (_ref) {
      var _ref2 = _slicedToArray(_ref, 2),
        _ = _ref2[0],
        is_public = _ref2[1].is_public;
      return !is_public;
    }), (0, operators_1.map)(function (_ref3) {
      var _ref4 = _slicedToArray(_ref3, 1),
        list = _ref4[0];
      _this.unsubWith('b-');
      _this.unsubWith('s-');
      _this.unsubWith('c-');
      _this._statuses = {};
      if (!(list !== null && list !== void 0 && list.length)) return;
      var _iterator = _createForOfIteratorHelper(list),
        _step;
      try {
        var _loop = function _loop() {
          var space = _step.value;
          var mod = (0, ts_client_1.getModule)(space.id, 'Bookings');
          var binding = mod.binding('bookings');
          _this.subscription("b-".concat(space.id), binding.listen().subscribe(function (d) {
            return _this.handleBookingsChange(list, space, d);
          }));
          _this.subscription("b-bind-".concat(space.id), binding.bind());
          binding = mod.binding('status');
          _this.subscription("s-".concat(space.id), binding.listen().subscribe(function (d) {
            return _this.handleStatusChange(list, space, d);
          }));
          _this.subscription("s-bind-".concat(space.id), binding.bind());
          binding = mod.binding('presence');
          _this.subscription("c-".concat(space.id), binding.listen().subscribe(function (d) {
            return _this.handlePresenceChange(list, space, d);
          }));
          _this.subscription("c-bind-".concat(space.id), binding.bind());
        };
        for (_iterator.s(); !(_step = _iterator.n()).done;) {
          _loop();
        }
      } catch (err) {
        _iterator.e(err);
      } finally {
        _iterator.f();
      }
      _this.updateActions(list);
      _this._updateHoverElements(list);
    }));
    _this.subscription('spaces', _this._bind.subscribe());
    return _this;
  }
  _inherits(ExploreSpacesService, _common_1$AsyncHandle);
  return _createClass(ExploreSpacesService, [{
    key: "bookSpace",
    value: function () {
      var _bookSpace = _asyncToGenerator(function (space) {
        var _this2 = this;
        var force = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;
        return /*#__PURE__*/_regeneratorRuntime().mark(function _callee(_ref6) {
          var booking_rules, _ref5, hidden;
          return _regeneratorRuntime().wrap(function _callee$(_context) {
            while (1) switch (_context.prev = _context.next) {
              case 0:
                if (!(_this2._panning && _this2._last_action === 'down')) {
                  _context.next = 2;
                  break;
                }
                return _context.abrupt("return");
              case 2:
                _context.next = 4;
                return _this2.booking_rules.pipe((0, operators_1.take)(1)).toPromise();
              case 4:
                booking_rules = _context.sent;
                _ref5 = (0, common_1.rulesForResource)({
                  date: Date.now(),
                  duration: 60,
                  resource: space,
                  host: (0, common_1.currentUser)()
                }, booking_rules) || {}, hidden = _ref5.hidden;
                if (!hidden) {
                  _context.next = 8;
                  break;
                }
                return _context.abrupt("return", (0, notifications_1.notifyError)('You do not have permission to book this space at this time.'));
              case 8:
                if (!(_this2._statuses[space.id] !== 'free' && !force || !space.bookable)) {
                  _context.next = 10;
                  break;
                }
                return _context.abrupt("return", (0, notifications_1.notifyError)("".concat(space.display_name || space.name, " is unavailable for the selected time and duration")));
              case 10:
                _this2._event_form.newForm();
                _this2._event_form.form.patchValue({
                  host: (_ref6 = (0, common_1.currentUser)()) === null || _ref6 === void 0 ? void 0 : _ref6.email,
                  resources: [space]
                });
                if (!_this2._settings.get('app.events.booking_unavailable')) {
                  _context.next = 14;
                  break;
                }
                return _context.abrupt("return", _this2._event_form.openEventLinkModal());
              case 14:
                _this2._dialog.open(_this2._settings.get('app.explore.show_booking_qr') ? explore_book_qr_component_1.ExploreBookQrComponent : explore_booking_modal_component_1.ExploreBookingModalComponent, {
                  data: {
                    space: space
                  }
                });
              case 15:
              case "end":
                return _context.stop();
            }
          }, _callee);
        })();
      });
      function bookSpace(_x) {
        return _bookSpace.apply(this, arguments);
      }
      return bookSpace;
    }()
  }, {
    key: "handleBookingsChange",
    value: function handleBookingsChange(spaces, space, bookings) {
      var _this3 = this;
      if (!bookings) return;
      this._bookings[space.id] = bookings.map(function (i) {
        return new event_class_1.CalendarEvent(i);
      });
      this.timeout('update_hover_els', function () {
        return _this3._updateHoverElements(spaces);
      }, 100);
    }
  }, {
    key: "handleStatusChange",
    value: function handleStatusChange(spaces, space, status) {
      var _this4 = this;
      if (space.bookable) this._statuses[space.id] = status || 'free';else delete this._statuses[space.id];
      this.timeout('update_statuses', function () {
        _this4.clearTimeout('update_hover_els');
        _this4._updateStatus(spaces);
        _this4._updateHoverElements(spaces);
      }, 100);
    }
  }, {
    key: "handlePresenceChange",
    value: function handlePresenceChange(spaces, space, presence) {
      var _this5 = this;
      this._presence[space.id] = presence;
      this.timeout('update_icons', function () {
        return _this5._updateIcons(spaces);
      }, 100);
    }
  }, {
    key: "_updateStatus",
    value: function () {
      var _updateStatus2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(spaces) {
        var style_map, colours, _iterator2, _step2, space, status;
        return _regeneratorRuntime().wrap(function _callee2$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              style_map = {};
              colours = this._settings.get('app.explore.colors') || {};
              _iterator2 = _createForOfIteratorHelper(spaces);
              _context2.prev = 3;
              _iterator2.s();
            case 5:
              if ((_step2 = _iterator2.n()).done) {
                _context2.next = 13;
                break;
              }
              space = _step2.value;
              if (this._statuses[space.id]) {
                _context2.next = 9;
                break;
              }
              return _context2.abrupt("continue", 11);
            case 9:
              status = this._statuses[space.id];
              style_map["#".concat(space.map_id)] = {
                fill: colours["space-".concat(status)] || colours["".concat(status)] || exports.DEFAULT_COLOURS["".concat(status)],
                opacity: 0.6
              };
            case 11:
              _context2.next = 5;
              break;
            case 13:
              _context2.next = 18;
              break;
            case 15:
              _context2.prev = 15;
              _context2.t0 = _context2["catch"](3);
              _iterator2.e(_context2.t0);
            case 18:
              _context2.prev = 18;
              _iterator2.f();
              return _context2.finish(18);
            case 21:
              this._state.setStyles('spaces', style_map);
            case 22:
            case "end":
              return _context2.stop();
          }
        }, _callee2, this, [[3, 15, 18, 21]]);
      }));
      function _updateStatus(_x2) {
        return _updateStatus2.apply(this, arguments);
      }
      return _updateStatus;
    }()
  }, {
    key: "_updateHoverElements",
    value: function _updateHoverElements(spaces) {
      var features = [];
      var _iterator3 = _createForOfIteratorHelper(spaces),
        _step3;
      try {
        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {
          var space = _step3.value;
          if (!space.map_id) continue;
          features.push({
            location: space.map_id,
            full_size: true,
            no_scale: true,
            content: explore_space_info_component_1.ExploreSpaceInfoComponent,
            z_index: 10,
            data: {
              space: new space_class_1.Space(space),
              events: this._bookings[space.id],
              status: this._statuses[space.id] || 'not-bookable'
            }
          });
        }
      } catch (err) {
        _iterator3.e(err);
      } finally {
        _iterator3.f();
      }
      this._state.setFeatures('spaces', features);
    }
  }, {
    key: "_updateIcons",
    value: function _updateIcons(spaces) {
      if (!this._settings.get('app.show_presence_indicators')) return;
      var features = [];
      var _iterator4 = _createForOfIteratorHelper(spaces),
        _step4;
      try {
        for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {
          var space = _step4.value;
          if (!space.map_id) continue;
          features.push({
            location: space.map_id,
            content: explore_icon_component_1.ExploreIconComponent,
            data: {
              icon: {
                "class": 'material-symbols-rounded',
                content: 'sensor_occupied'
              },
              color: this._presence[space.id] ? 'var(--su)' : 'var(--bc)',
              text_color: this._presence[space.id] ? 'var(--suc)' : 'var(--b1)'
            },
            z_index: 98
          });
        }
      } catch (err) {
        _iterator4.e(err);
      } finally {
        _iterator4.f();
      }
      this._state.setFeatures('spaces-presence', features);
    }
  }, {
    key: "updateActions",
    value: function updateActions(spaces) {
      var _this6 = this;
      var actions = [];
      var _iterator5 = _createForOfIteratorHelper(spaces),
        _step5;
      try {
        var _loop2 = function _loop2() {
          var space = _step5.value;
          if (!space.map_id) return 1; // continue
          for (var _i = 0, _arr = ['mousedown', 'touchstart']; _i < _arr.length; _i++) {
            var action = _arr[_i];
            actions.push({
              id: space.map_id,
              action: action,
              priority: 5,
              callback: function callback() {
                _this6._panning = false;
                _this6.timeout('panning', function () {
                  return _this6._panning = true;
                }, 300);
                _this6._last_action = 'down';
              }
            });
          }
          for (var _i2 = 0, _arr2 = ['mouseup', 'touchend']; _i2 < _arr2.length; _i2++) {
            var _action = _arr2[_i2];
            actions.push({
              id: space.map_id,
              action: _action,
              priority: 5,
              callback: function callback() {
                _this6.bookSpace(space);
                _this6._last_action = 'up';
              }
            });
          }
        };
        for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {
          if (_loop2()) continue;
        }
      } catch (err) {
        _iterator5.e(err);
      } finally {
        _iterator5.f();
      }
      this.timeout('set-actions', function () {
        return _this6._state.setActions('spaces', actions);
      }, 50);
    }
  }]);
}(common_1.AsyncHandler);
_ExploreSpacesService = ExploreSpacesService;
_ExploreSpacesService.ɵfac = function ExploreSpacesService_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _ExploreSpacesService)(i0.ɵɵinject(i1.ExploreStateService), i0.ɵɵinject(i2.SettingsService), i0.ɵɵinject(i3.EventFormService), i0.ɵɵinject(i4.MatDialog), i0.ɵɵinject(i5.OrganisationService));
};
_ExploreSpacesService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({
  token: _ExploreSpacesService,
  factory: _ExploreSpacesService.ɵfac
});
exports.ExploreSpacesService = ExploreSpacesService;

/***/ }),

/***/ 12455:
/*!*******************************************************!*\
  !*** ./libs/explore/src/lib/explore-state.service.ts ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _createForOfIteratorHelper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createForOfIteratorHelper.js */ 36350)["default"]);
var _toConsumableArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/toConsumableArray.js */ 86033)["default"]);
var _regeneratorRuntime = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/regeneratorRuntime.js */ 8698)["default"]);
var _asyncToGenerator = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/asyncToGenerator.js */ 95386)["default"]);
var _objectSpread = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/objectSpread2.js */ 34092)["default"]);
var _slicedToArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/slicedToArray.js */ 6282)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _callSuper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/callSuper.js */ 8513)["default"]);
var _inherits = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/inherits.js */ 58160)["default"]);
var _ExploreStateService;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.ExploreStateService = void 0;
var ts_client_1 = __webpack_require__(/*! @placeos/ts-client */ 35713);
var rxjs_1 = __webpack_require__(/*! rxjs */ 15681);
var operators_1 = __webpack_require__(/*! rxjs/operators */ 97303);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var organisation_service_1 = __webpack_require__(/*! libs/organisation/src/lib/organisation.service */ 19863);
var space_class_1 = __webpack_require__(/*! libs/spaces/src/lib/space.class */ 30735);
var spaces_service_1 = __webpack_require__(/*! libs/spaces/src/lib/spaces.service */ 7401);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! libs/organisation/src/lib/organisation.service */ 19863);
var i2 = __webpack_require__(/*! libs/spaces/src/lib/spaces.service */ 7401);
var i3 = __webpack_require__(/*! @placeos/common */ 22797);
var ExploreStateService = /*#__PURE__*/function (_common_1$AsyncHandle) {
  function ExploreStateService(_org, _spaces, _settings) {
    var _this;
    _classCallCheck(this, ExploreStateService);
    _this = _callSuper(this, ExploreStateService);
    _this._org = _org;
    _this._spaces = _spaces;
    _this._settings = _settings;
    /** Currently active level */
    _this._level = new rxjs_1.BehaviorSubject(null);
    /** Currently active level */
    _this._positions = new rxjs_1.BehaviorSubject({
      zoom: 1,
      center: {
        x: 0.5,
        y: 0.5
      }
    });
    /** Mapping of groups to their styles */
    _this._styles = new rxjs_1.BehaviorSubject({});
    /** Mapping of groups to their features */
    _this._features = new rxjs_1.BehaviorSubject({});
    /** Mapping of groups to their actions */
    _this._actions = new rxjs_1.BehaviorSubject({});
    /** Mapping of groups to their actions */
    _this._labels = new rxjs_1.BehaviorSubject({});
    _this._options = new rxjs_1.BehaviorSubject({
      is_public: false,
      disable: ['zones', 'devices']
    });
    _this._message = new rxjs_1.BehaviorSubject('');
    /** Currently active level */
    _this.level = _this._level.asObservable();
    /** Currently active level */
    _this.message = _this._message.asObservable();
    /** Spaces associated with the active level */
    _this.spaces = (0, rxjs_1.combineLatest)([_this._level, _this._org.initialised]).pipe((0, operators_1.filter)(function (_ref) {
      var _ref2 = _slicedToArray(_ref, 2),
        _ = _ref2[0],
        initialised = _ref2[1];
      return initialised;
    }), (0, operators_1.switchMap)(function (_ref3) {
      var _ref4 = _slicedToArray(_ref3, 1),
        level = _ref4[0];
      return (0, ts_client_1.querySystems)({
        zone_id: (level === null || level === void 0 ? void 0 : level.id) || _this._org.organisation.id,
        limit: 50
      }).pipe((0, operators_1.map)(function (_ref5) {
        var data = _ref5.data;
        return data.map(function (_) {
          return new space_class_1.Space(_);
        });
      }), (0, operators_1.catchError)(function (_) {
        return (0, rxjs_1.of)([]);
      }));
    }), (0, operators_1.shareReplay)(1));
    /** Currently shown space's map URL */
    _this.map_url = _this._level.pipe((0, operators_1.map)(function (lvl) {
      return (lvl ? lvl.map_id : '') || '';
    }));
    /** Currently center and zoom positions for map */
    _this.map_positions = _this._positions.asObservable();
    /** Currently center and zoom positions for map */
    _this.map_features = (0, rxjs_1.combineLatest)([_this._features, _this._options]).pipe((0, operators_1.debounceTime)(200), (0, operators_1.map)(function (_ref6) {
      var _ref7 = _slicedToArray(_ref6, 2),
        features = _ref7[0],
        options = _ref7[1];
      var list = [];
      for (var key in features) {
        var _options$disable, _options$disable_feat, _options$disable2;
        if ((_options$disable = options.disable) !== null && _options$disable !== void 0 && _options$disable.includes(key) || (_options$disable_feat = options.disable_features) !== null && _options$disable_feat !== void 0 && _options$disable_feat.includes(key) || key === 'zones-canvas' && (_options$disable2 = options.disable) !== null && _options$disable2 !== void 0 && _options$disable2.includes('zones')) continue;
        list = list.concat(features[key]);
      }
      return list;
    }));
    /** Currently center and zoom positions for map */
    _this.map_actions = (0, rxjs_1.combineLatest)([_this._actions, _this._options]).pipe((0, operators_1.debounceTime)(200), (0, operators_1.map)(function (_ref8) {
      var _ref9 = _slicedToArray(_ref8, 2),
        actions = _ref9[0],
        options = _ref9[1];
      var list = [];
      for (var key in actions) {
        var _options$disable3, _options$disable_acti;
        if ((_options$disable3 = options.disable) !== null && _options$disable3 !== void 0 && _options$disable3.includes(key) || (_options$disable_acti = options.disable_actions) !== null && _options$disable_acti !== void 0 && _options$disable_acti.includes(key)) continue;
        list = list.concat(actions[key]);
      }
      return list;
    }));
    /** Currently center and zoom positions for map */
    _this.map_labels = (0, rxjs_1.combineLatest)([_this._labels, _this._options]).pipe((0, operators_1.debounceTime)(200), (0, operators_1.map)(function (_ref10) {
      var _ref11 = _slicedToArray(_ref10, 2),
        labels = _ref11[0],
        options = _ref11[1];
      var list = [];
      for (var key in labels) {
        var _options$disable4, _options$disable_labe;
        if ((_options$disable4 = options.disable) !== null && _options$disable4 !== void 0 && _options$disable4.includes(key) || (_options$disable_labe = options.disable_labels) !== null && _options$disable_labe !== void 0 && _options$disable_labe.includes(key)) continue;
        list = list.concat(labels[key]);
      }
      return list;
    }));
    /** Current map styles */
    _this.map_styles = (0, rxjs_1.combineLatest)([_this._styles, _this._options]).pipe((0, operators_1.debounceTime)(200), (0, operators_1.map)(function (_ref12) {
      var _options$disable6;
      var _ref13 = _slicedToArray(_ref12, 2),
        styles = _ref13[0],
        options = _ref13[1];
      var style_mappings = {
        text: {
          display: 'none'
        }
      };
      for (var key in styles) {
        var _options$disable5, _options$disable_styl;
        if ((_options$disable5 = options.disable) !== null && _options$disable5 !== void 0 && _options$disable5.includes(key) || (_options$disable_styl = options.disable_styles) !== null && _options$disable_styl !== void 0 && _options$disable_styl.includes(key)) continue;
        style_mappings = _objectSpread(_objectSpread({}, style_mappings), styles[key]);
      }
      if ((_options$disable6 = options.disable) !== null && _options$disable6 !== void 0 && _options$disable6.includes('zones')) {
        style_mappings['#zones'] = {
          display: 'none'
        };
        style_mappings['#Zones'] = {
          display: 'none'
        };
      }
      return style_mappings;
    }));
    _this.options = _this._options.asObservable();
    _this.init();
    return _this;
  }
  _inherits(ExploreStateService, _common_1$AsyncHandle);
  return _createClass(ExploreStateService, [{
    key: "positions",
    get: function get() {
      return this._positions.getValue();
    }
  }, {
    key: "active_level",
    get: function get() {
      return this._level.getValue();
    }
  }, {
    key: "init",
    value: function () {
      var _init = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
        var _this2 = this;
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              _context.next = 2;
              return this._org.initialised.pipe((0, operators_1.first)(function (_) {
                return _;
              })).toPromise();
            case 2:
              this._org.active_levels.pipe((0, operators_1.filter)(function (_) {
                return !!_;
              })).subscribe(function (level_list) {
                var level = _this2._level.getValue();
                var has_level = level_list.find(function (lvl) {
                  return (level === null || level === void 0 ? void 0 : level.id) === lvl.id;
                });
                if (!has_level && level_list.length) {
                  _this2.setLevel(level_list[0].id);
                }
                if (_this2._settings.get('app.explore.disable_actions')) {
                  _this2.setOptions({
                    disable_actions: _this2._settings.get('app.explore.disable_actions')
                  });
                }
                if (_this2._settings.get('app.explore.disable_labels')) {
                  _this2.setOptions({
                    disable_labels: _this2._settings.get('app.explore.disable_labels')
                  });
                }
                if (_this2._settings.get('app.explore.disable_features')) {
                  _this2.setOptions({
                    disable_features: _this2._settings.get('app.explore.disable_features')
                  });
                }
                if (_this2._settings.get('app.explore.disable_styles')) {
                  _this2.setOptions({
                    disable_styles: _this2._settings.get('app.explore.disable_styles')
                  });
                }
              });
            case 3:
            case "end":
              return _context.stop();
          }
        }, _callee, this);
      }));
      function init() {
        return _init.apply(this, arguments);
      }
      return init;
    }()
  }, {
    key: "setOptions",
    value: function setOptions(options) {
      var old_options = this._options.getValue();
      var disable = (0, common_1.unique)([].concat(_toConsumableArray(options.disable || old_options.disable), _toConsumableArray(this._settings.get('app.explore.disable') || [])));
      this._options.next(_objectSpread(_objectSpread(_objectSpread({}, this._options.getValue()), options), {}, {
        disable: disable
      }));
    }
  }, {
    key: "reset",
    value: function reset() {
      this._styles.next({});
      this._features.next({});
      this._labels.next({});
      this._actions.next({});
      this._options.next({
        is_public: false,
        disable: ['zones', 'devices']
      });
      this.setPositions(1, {
        x: 0.5,
        y: 0.5
      });
    }
  }, {
    key: "setLevel",
    value: function setLevel(zone_id) {
      var lvl = this._org.levelWithID([zone_id]);
      if (lvl) this._level.next(lvl);
    }
  }, {
    key: "setStyles",
    value: function setStyles(name, styles) {
      var style_map = this._styles.getValue();
      style_map[name] = styles;
      this._styles.next(style_map);
    }
  }, {
    key: "setFeatures",
    value: function setFeatures(name, features) {
      var feature_map = this._features.getValue();
      feature_map[name] = features;
      this._features.next(feature_map);
    }
  }, {
    key: "setActions",
    value: function setActions(name, actions) {
      var actions_map = this._actions.getValue();
      actions_map[name] = actions;
      this._actions.next(actions_map);
    }
  }, {
    key: "setLabels",
    value: function setLabels(name, labels) {
      var labels_map = this._labels.getValue();
      labels_map[name] = labels;
      this._labels.next(labels_map);
    }
  }, {
    key: "setPositions",
    value: function setPositions(zoom, center) {
      this._positions.next({
        zoom: zoom,
        center: center
      });
    }
  }, {
    key: "has",
    value: function has(type, id) {
      var exclude = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];
      if (type === 'style') {
        var styles_map = this._styles.getValue();
        for (var group in styles_map) {
          if (exclude.includes(group)) continue;
          var styles = styles_map[group];
          if (id in styles || "#".concat(id) in styles) return true;
        }
      } else if (type === 'feature') {
        var feature_map = this._features.getValue();
        for (var _group in feature_map) {
          if (exclude.includes(_group)) continue;
          var _iterator = _createForOfIteratorHelper(feature_map[_group]),
            _step;
          try {
            for (_iterator.s(); !(_step = _iterator.n()).done;) {
              var feature = _step.value;
              if (feature.location === id) return true;
            }
          } catch (err) {
            _iterator.e(err);
          } finally {
            _iterator.f();
          }
        }
      } else if (type === 'action') {
        var actions_map = this._actions.getValue();
        for (var _group2 in actions_map) {
          if (exclude.includes(_group2)) continue;
          var _iterator2 = _createForOfIteratorHelper(actions_map[_group2]),
            _step2;
          try {
            for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
              var _feature = _step2.value;
              if (_feature.id === id) return true;
            }
          } catch (err) {
            _iterator2.e(err);
          } finally {
            _iterator2.f();
          }
        }
      } else if (type === 'label') {
        var labels_map = this._labels.getValue();
        for (var _group3 in labels_map) {
          if (exclude.includes(_group3)) continue;
          var _iterator3 = _createForOfIteratorHelper(labels_map[_group3]),
            _step3;
          try {
            for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {
              var _feature2 = _step3.value;
              if (_feature2.location === id) return true;
            }
          } catch (err) {
            _iterator3.e(err);
          } finally {
            _iterator3.f();
          }
        }
      }
      return false;
    }
  }]);
}(common_1.AsyncHandler);
_ExploreStateService = ExploreStateService;
_ExploreStateService.ɵfac = function ExploreStateService_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _ExploreStateService)(i0.ɵɵinject(i1.OrganisationService), i0.ɵɵinject(i2.SpacesService), i0.ɵɵinject(i3.SettingsService));
};
_ExploreStateService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({
  token: _ExploreStateService,
  factory: _ExploreStateService.ɵfac,
  providedIn: 'root'
});
exports.ExploreStateService = ExploreStateService;

/***/ }),

/***/ 61369:
/*!*******************************************************!*\
  !*** ./libs/explore/src/lib/explore-zones.service.ts ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _regeneratorRuntime = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/regeneratorRuntime.js */ 8698)["default"]);
var _createForOfIteratorHelper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createForOfIteratorHelper.js */ 36350)["default"]);
var _asyncToGenerator = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/asyncToGenerator.js */ 95386)["default"]);
var _toConsumableArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/toConsumableArray.js */ 86033)["default"]);
var _slicedToArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/slicedToArray.js */ 6282)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _callSuper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/callSuper.js */ 8513)["default"]);
var _inherits = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/inherits.js */ 58160)["default"]);
var _ExploreZonesService;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.ExploreZonesService = void 0;
var ts_client_1 = __webpack_require__(/*! @placeos/ts-client */ 35713);
var operators_1 = __webpack_require__(/*! rxjs/operators */ 97303);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var organisation_service_1 = __webpack_require__(/*! libs/organisation/src/lib/organisation.service */ 19863);
var explore_state_service_1 = __webpack_require__(/*! ./explore-state.service */ 12455);
var explore_spaces_service_1 = __webpack_require__(/*! ./explore-spaces.service */ 65897);
var explore_sensor_info_component_1 = __webpack_require__(/*! ./explore-sensor-info.component */ 79303);
var rxjs_1 = __webpack_require__(/*! rxjs */ 15681);
var map_canvas_component_1 = __webpack_require__(/*! libs/components/src/lib/map-canvas.component */ 37558);
var explore_icon_component_1 = __webpack_require__(/*! ./explore-icon.component */ 83207);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! ./explore-state.service */ 12455);
var i2 = __webpack_require__(/*! libs/organisation/src/lib/organisation.service */ 19863);
var i3 = __webpack_require__(/*! @placeos/common */ 22797);
var ExploreZonesService = /*#__PURE__*/function (_common_1$AsyncHandle) {
  function ExploreZonesService(_state, _org, _settings) {
    var _this;
    _classCallCheck(this, ExploreZonesService);
    _this = _callSuper(this, ExploreZonesService);
    _this._state = _state;
    _this._org = _org;
    _this._settings = _settings;
    _this._area_list = [];
    _this._statuses = {};
    _this._count_key = {};
    _this._location = {};
    _this._label_location = {};
    _this._capacity = {};
    _this._draw = {};
    _this._points = {};
    _this._features = [];
    _this._polygons$ = new rxjs_1.BehaviorSubject([]);
    _this._bind = (0, rxjs_1.combineLatest)([_this._org.active_building, _this._state.level, _this._state.options]).pipe((0, operators_1.filter)(function (_ref) {
      var _ref2 = _slicedToArray(_ref, 3),
        bld = _ref2[0],
        lvl = _ref2[1],
        is_public = _ref2[2].is_public;
      return !!bld && !!lvl && !is_public;
    }), (0, operators_1.map)(function (_ref3) {
      var _ref4 = _slicedToArray(_ref3, 2),
        _ = _ref4[0],
        lvl = _ref4[1];
      _this._statuses = {};
      var system_id = _this._org.binding('area_management');
      if (!system_id) return;
      var bind_areas = (0, ts_client_1.getModule)(system_id, 'AreaManagement').binding("".concat(lvl.id, ":areas"));
      var bind_zone = (0, ts_client_1.getModule)(system_id, 'AreaManagement').binding("".concat(lvl.id));
      var zones = (0, rxjs_1.combineLatest)([bind_areas.listen(), bind_zone.listen()]).pipe((0, operators_1.debounceTime)(100), (0, operators_1.map)(function (_ref5) {
        var _ref6 = _slicedToArray(_ref5, 2),
          a = _ref6[0],
          z = _ref6[1];
        return [].concat(_toConsumableArray((a === null || a === void 0 ? void 0 : a.value) || []), _toConsumableArray(((z === null || z === void 0 ? void 0 : z.value) || []).filter(function (_) {
          return _.location === 'area';
        })));
      }));
      _this.subscription("zones-status", zones.subscribe(function (l) {
        return _this.parseData(l);
      }));
      _this.subscription('binding', bind_areas.bind());
      _this.subscription('zone-binding', bind_zone.bind());
    }));
    _this.init();
    return _this;
  }
  _inherits(ExploreZonesService, _common_1$AsyncHandle);
  return _createClass(ExploreZonesService, [{
    key: "init",
    value: function () {
      var _init = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
        var zone_metadata, _iterator, _step, _zone$details, zone, areas, _iterator2, _step2, area, _ref7, capacity, hide_label, label_location, draw_polygon, area_count_key, _ref8, coordinates;
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              _context.next = 2;
              return this._org.initialised.pipe((0, operators_1.first)(function (_) {
                return _;
              })).toPromise();
            case 2:
              _context.next = 4;
              return Promise.all(this._org.levels.map(function (bld) {
                return (0, ts_client_1.showMetadata)(bld.id, 'map_regions').toPromise();
              }));
            case 4:
              zone_metadata = _context.sent;
              this._area_list = [];
              _iterator = _createForOfIteratorHelper(zone_metadata);
              _context.prev = 7;
              _iterator.s();
            case 9:
              if ((_step = _iterator.n()).done) {
                _context.next = 18;
                break;
              }
              zone = _step.value;
              areas = zone === null || zone === void 0 || (_zone$details = zone.details) === null || _zone$details === void 0 ? void 0 : _zone$details.areas;
              if (areas) {
                _context.next = 14;
                break;
              }
              return _context.abrupt("continue", 16);
            case 14:
              _iterator2 = _createForOfIteratorHelper(areas);
              try {
                for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
                  area = _step2.value;
                  _ref7 = area.properties || {}, capacity = _ref7.capacity, hide_label = _ref7.hide_label, label_location = _ref7.label_location, draw_polygon = _ref7.draw_polygon, area_count_key = _ref7.area_count_key;
                  _ref8 = area.geometry || {}, coordinates = _ref8.coordinates;
                  this._capacity[area.id] = capacity || 100;
                  this._count_key[area.id] = area_count_key || '';
                  this._location[area.id] = coordinates !== null && coordinates !== void 0 && coordinates.length ? getCenterPoint(coordinates) : null;
                  this._label_location[area.id] = hide_label === false ? label_location || this._location[area.id] : null;
                  this._draw[area.id] = !!draw_polygon || this._settings.get('app.explore.use_zone_polygons');
                  this._points[area.id] = coordinates || [];
                  this._area_list.push(area.map_id || area.id);
                }
              } catch (err) {
                _iterator2.e(err);
              } finally {
                _iterator2.f();
              }
            case 16:
              _context.next = 9;
              break;
            case 18:
              _context.next = 23;
              break;
            case 20:
              _context.prev = 20;
              _context.t0 = _context["catch"](7);
              _iterator.e(_context.t0);
            case 23:
              _context.prev = 23;
              _iterator.f();
              return _context.finish(23);
            case 26:
              this._state.setFeatures('zones-canvas', [{
                track_id: 'zones-canvas',
                location: {
                  x: 0.5,
                  y: 0.5
                },
                content: map_canvas_component_1.MapCanvasComponent,
                data: {
                  polygons$: this._polygons$,
                  draw_points: false,
                  draw_labels: false
                }
              }]);
              this.updateStatus();
              this.subscription('bind', this._bind.subscribe());
            case 29:
            case "end":
              return _context.stop();
          }
        }, _callee, this, [[7, 20, 23, 26]]);
      }));
      function init() {
        return _init.apply(this, arguments);
      }
      return init;
    }()
  }, {
    key: "parseData",
    value: function parseData() {
      var value = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];
      var labels = [];
      var features = [];
      var _iterator3 = _createForOfIteratorHelper(value),
        _step3;
      try {
        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {
          var zone = _step3.value;
          var id = zone.map_id || zone.area_id;
          // if (!this._area_list.includes(id)) continue;
          var capacity = zone.capacity || this._capacity[id] || 100;
          var count = zone[this._count_key[id] || this._settings.get('app.explore.area_count_key') || 'count'] || 0;
          var filled = count / capacity;
          this._statuses[id] = zone.at_location ? 'busy' : filled < 0.4 ? 'free' : filled < 0.75 ? 'pending' : 'busy';
          if (!this._location[id]) continue;
          var content = '';
          if (zone.count) {
            content += "".concat(zone.count || 0, " User Device").concat(zone.count === 1 ? '' : 's', "\n");
          }
          if (zone.temperature) content += "Temperature: ".concat(zone.temperature, " \u02DAC\n");
          if (zone.people_count > 0) content += "".concat(zone.people_count_sum, " ").concat(zone.people_count_sum === 1 ? 'Person' : 'People', "\n");
          if (zone.humidity) content += "Humidity: ".concat(zone.humidity, "%\n");
          if (zone.queue_size) content += "Queue Size: ".concat(zone.queue_size, "%\n");
          if (zone.counter) content += "Count: ".concat(zone.counter, "\n");
          if (this._label_location[id] && !this._settings.get('app.explore.show_zone_labels')) {
            labels.push({
              location: this._label_location[id],
              content: content,
              z_index: 100
            });
          }
          if (this._settings.get('app.explore.show_zone_sensor_info') && (zone.temperature || zone.humidity)) {
            features.push({
              track_id: "sensors:".concat(id),
              location: this._location[id],
              content: explore_sensor_info_component_1.ExploreSensorInfoComponent,
              data: {
                id: id,
                temp: zone.temperature || 10,
                humidity: zone.humidity || 10
              },
              z_index: 98
            });
          }
        }
      } catch (err) {
        _iterator3.e(err);
      } finally {
        _iterator3.f();
      }
      this._features = features;
      this._state.setLabels('zones', labels);
      this.updateStatus();
    }
  }, {
    key: "updateStatus",
    value: function updateStatus() {
      var style_map = {};
      var features = [];
      var colours = this._settings.get('app.explore.colors') || {};
      var polygons = [];
      for (var zone_id in this._statuses) {
        var colour = colours["zone-".concat(this._statuses[zone_id])] || colours["".concat(this._statuses[zone_id])] || explore_spaces_service_1.DEFAULT_COLOURS["".concat(this._statuses[zone_id])];
        if (this._draw[zone_id]) {
          polygons.push({
            name: zone_id,
            points: this._points[zone_id],
            color: colour
          });
        } else {
          if (this._state.has('style', zone_id, ['zones', 'zones-styles'])) {
            features.push({
              location: zone_id,
              content: explore_icon_component_1.ExploreIconComponent,
              data: {
                icon: {
                  content: 'pin_drop'
                }
              },
              full_size: true,
              z_index: 98
            });
          } else {
            style_map["#".concat(zone_id)] = {
              fill: colour,
              opacity: 0.6
            };
          }
        }
      }
      this._polygons$.next(polygons);
      this._state.setFeatures('zones', [].concat(features, _toConsumableArray(this._features)));
      this._state.setStyles('zones-styles', style_map);
    }
  }]);
}(common_1.AsyncHandler);
_ExploreZonesService = ExploreZonesService;
_ExploreZonesService.ɵfac = function ExploreZonesService_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _ExploreZonesService)(i0.ɵɵinject(i1.ExploreStateService), i0.ɵɵinject(i2.OrganisationService), i0.ɵɵinject(i3.SettingsService));
};
_ExploreZonesService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({
  token: _ExploreZonesService,
  factory: _ExploreZonesService.ɵfac
});
exports.ExploreZonesService = ExploreZonesService;
function getCenterPoint(points) {
  var diff = (points || []).reduce(function (m, _ref9) {
    var _ref10 = _slicedToArray(_ref9, 2),
      x = _ref10[0],
      y = _ref10[1];
    return {
      x_min: x < m.x_min ? x : m.x_min,
      x_max: x > m.x_max ? x : m.x_max,
      y_min: y < m.y_min ? y : m.y_min,
      y_max: y > m.y_max ? y : m.y_max
    };
  }, {
    x_min: 100,
    x_max: -100,
    y_min: 100,
    y_max: -100
  });
  return {
    x: diff.x_min + (diff.x_max - diff.x_min) / 2,
    y: diff.y_min + (diff.y_max - diff.y_min) / 2
  };
}

/***/ }),

/***/ 69801:
/*!****************************************************************!*\
  !*** ./libs/explore/src/lib/explore-zoom-control.component.ts ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _taggedTemplateLiteral = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js */ 9959)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _ExploreZoomControlComponent, _templateObject, _templateObject2, _templateObject3;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.ExploreZoomControlComponent = void 0;
var explore_state_service_1 = __webpack_require__(/*! ./explore-state.service */ 12455);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! ./explore-state.service */ 12455);
var i2 = __webpack_require__(/*! ../../../components/src/lib/icon.component */ 69434);
var i3 = __webpack_require__(/*! @angular/material/core */ 74646);
var i4 = __webpack_require__(/*! @angular/material/tooltip */ 80640);
var ExploreZoomControlComponent = /*#__PURE__*/_createClass(function ExploreZoomControlComponent(_state) {
  var _this = this;
  _classCallCheck(this, ExploreZoomControlComponent);
  this._state = _state;
  this.zoomIn = function () {
    return _this._state.setPositions(Math.min(10, _this._state.positions.zoom * 1.2), _this._state.positions.center);
  };
  this.zoomOut = function () {
    return _this._state.setPositions(Math.max(1, _this._state.positions.zoom * (1 / 1.2)), _this._state.positions.center);
  };
  this.reset = function () {
    return _this._state.setPositions(1, {
      x: 0.5,
      y: 0.5
    });
  };
});
_ExploreZoomControlComponent = ExploreZoomControlComponent;
_ExploreZoomControlComponent.ɵfac = function ExploreZoomControlComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _ExploreZoomControlComponent)(i0.ɵɵdirectiveInject(i1.ExploreStateService));
};
_ExploreZoomControlComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _ExploreZoomControlComponent,
  selectors: [["explore-zoom-controls"]],
  decls: 9,
  vars: 0,
  consts: function consts() {
    var i18n_0;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_1470758907984185227$$LIBS_EXPLORE_SRC_LIB_EXPLORE_ZOOM_CONTROL_COMPONENT_TS_0 = goog.getMsg("Zoom In");
      i18n_0 = MSG_EXTERNAL_1470758907984185227$$LIBS_EXPLORE_SRC_LIB_EXPLORE_ZOOM_CONTROL_COMPONENT_TS_0;
    } else {
      i18n_0 = $localize(_templateObject || (_templateObject = _taggedTemplateLiteral([":\u241F34fb6028a6630cf3a7308084b31e86e89d057965\u241F1470758907984185227:Zoom In"])));
    }
    var i18n_1;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_1356460275822781324$$LIBS_EXPLORE_SRC_LIB_EXPLORE_ZOOM_CONTROL_COMPONENT_TS_1 = goog.getMsg("Zoom Out");
      i18n_1 = MSG_EXTERNAL_1356460275822781324$$LIBS_EXPLORE_SRC_LIB_EXPLORE_ZOOM_CONTROL_COMPONENT_TS_1;
    } else {
      i18n_1 = $localize(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([":\u241F677ce9c57b5558cb10f0b39327d5a965bfb21dc5\u241F1356460275822781324:Zoom Out"])));
    }
    var i18n_2;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_5016012668378976433$$LIBS_EXPLORE_SRC_LIB_EXPLORE_ZOOM_CONTROL_COMPONENT_TS_2 = goog.getMsg("Reset Zoom & Center");
      i18n_2 = MSG_EXTERNAL_5016012668378976433$$LIBS_EXPLORE_SRC_LIB_EXPLORE_ZOOM_CONTROL_COMPONENT_TS_2;
    } else {
      i18n_2 = $localize(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([":\u241F77981432124895c410e5b9157b3deb948831ffc6\u241F5016012668378976433:Reset Zoom & Center"])));
    }
    return [["z-in", "", "icon", "", "matRipple", "", "matTooltip", i18n_0, 1, "bg-base-100", 3, "click"], ["z-out", "", "icon", "", "matRipple", "", "matTooltip", i18n_1, 1, "bg-base-100", 3, "click"], ["reset", "", "icon", "", "matRipple", "", "matTooltip", i18n_2, 1, "bg-base-100", 3, "click"]];
  },
  template: function ExploreZoomControlComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵelementStart(0, "button", 0);
      i0.ɵɵlistener("click", function ExploreZoomControlComponent_Template_button_click_0_listener() {
        return ctx.zoomIn();
      });
      i0.ɵɵelementStart(1, "app-icon");
      i0.ɵɵtext(2, "add");
      i0.ɵɵelementEnd()();
      i0.ɵɵelementStart(3, "button", 1);
      i0.ɵɵlistener("click", function ExploreZoomControlComponent_Template_button_click_3_listener() {
        return ctx.zoomOut();
      });
      i0.ɵɵelementStart(4, "app-icon");
      i0.ɵɵtext(5, "remove");
      i0.ɵɵelementEnd()();
      i0.ɵɵelementStart(6, "button", 2);
      i0.ɵɵlistener("click", function ExploreZoomControlComponent_Template_button_click_6_listener() {
        return ctx.reset();
      });
      i0.ɵɵelementStart(7, "app-icon");
      i0.ɵɵtext(8, "autorenew");
      i0.ɵɵelementEnd()();
    }
  },
  dependencies: [i2.IconComponent, i3.MatRipple, i4.MatTooltip],
  styles: ["[_nghost-%COMP%] {\n                display: flex;\n                flex-direction: column;\n            }\n\n            button[_ngcontent-%COMP%] {\n                border: 1px solid #9998;\n                border-radius: 0;\n            }\n\n            button[_ngcontent-%COMP%]:first-child {\n                border-radius: 0.25rem 0.25rem 0 0;\n                border-bottom: none;\n            }\n\n            button[_ngcontent-%COMP%]:last-child {\n                border-radius: 0 0 0.25rem 0.25rem;\n                border-top: none;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImV4cGxvcmUtem9vbS1jb250cm9sLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1lBQ1k7Z0JBQ0ksYUFBYTtnQkFDYixzQkFBc0I7WUFDMUI7O1lBRUE7Z0JBQ0ksdUJBQXVCO2dCQUN2QixnQkFBZ0I7WUFDcEI7O1lBRUE7Z0JBQ0ksa0NBQWtDO2dCQUNsQyxtQkFBbUI7WUFDdkI7O1lBRUE7Z0JBQ0ksa0NBQWtDO2dCQUNsQyxnQkFBZ0I7WUFDcEIiLCJmaWxlIjoiZXhwbG9yZS16b29tLWNvbnRyb2wuY29tcG9uZW50LnRzIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICA6aG9zdCB7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBidXR0b24ge1xuICAgICAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICM5OTk4O1xuICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDA7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGJ1dHRvbjpmaXJzdC1jaGlsZCB7XG4gICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMC4yNXJlbSAwLjI1cmVtIDAgMDtcbiAgICAgICAgICAgICAgICBib3JkZXItYm90dG9tOiBub25lO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBidXR0b246bGFzdC1jaGlsZCB7XG4gICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMCAwIDAuMjVyZW0gMC4yNXJlbTtcbiAgICAgICAgICAgICAgICBib3JkZXItdG9wOiBub25lO1xuICAgICAgICAgICAgfVxuICAgICAgICAiXX0= */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvZXhwbG9yZS9zcmMvbGliL2V4cGxvcmUtem9vbS1jb250cm9sLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1lBQ1k7Z0JBQ0ksYUFBYTtnQkFDYixzQkFBc0I7WUFDMUI7O1lBRUE7Z0JBQ0ksdUJBQXVCO2dCQUN2QixnQkFBZ0I7WUFDcEI7O1lBRUE7Z0JBQ0ksa0NBQWtDO2dCQUNsQyxtQkFBbUI7WUFDdkI7O1lBRUE7Z0JBQ0ksa0NBQWtDO2dCQUNsQyxnQkFBZ0I7WUFDcEI7O0FBRVosd25DQUF3bkMiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIDpob3N0IHtcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGJ1dHRvbiB7XG4gICAgICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgIzk5OTg7XG4gICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYnV0dG9uOmZpcnN0LWNoaWxkIHtcbiAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiAwLjI1cmVtIDAuMjVyZW0gMCAwO1xuICAgICAgICAgICAgICAgIGJvcmRlci1ib3R0b206IG5vbmU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGJ1dHRvbjpsYXN0LWNoaWxkIHtcbiAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiAwIDAgMC4yNXJlbSAwLjI1cmVtO1xuICAgICAgICAgICAgICAgIGJvcmRlci10b3A6IG5vbmU7XG4gICAgICAgICAgICB9XG4gICAgICAgICJdLCJzb3VyY2VSb290IjoiIn0= */"]
});
exports.ExploreZoomControlComponent = ExploreZoomControlComponent;

/***/ }),

/***/ 42434:
/*!************************************************!*\
  !*** ./libs/explore/src/lib/explore.module.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _SharedExploreModule;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.SharedExploreModule = void 0;
var common_1 = __webpack_require__(/*! @angular/common */ 60316);
var core_1 = __webpack_require__(/*! @angular/core */ 37580);
var forms_1 = __webpack_require__(/*! @angular/forms */ 34456);
var components_1 = __webpack_require__(/*! @placeos/components */ 51588);
var slide_toggle_1 = __webpack_require__(/*! @angular/material/slide-toggle */ 8827);
var overlay_1 = __webpack_require__(/*! @angular/cdk/overlay */ 81570);
var portal_1 = __webpack_require__(/*! @angular/cdk/portal */ 9168);
var form_fields_module_1 = __webpack_require__(/*! libs/form-fields/src/lib/form-fields.module */ 77066);
var bookings_module_1 = __webpack_require__(/*! libs/bookings/src/lib/bookings.module */ 38742);
var explore_map_control_component_1 = __webpack_require__(/*! ./explore-map-control.component */ 60468);
var explore_map_view_component_1 = __webpack_require__(/*! ./explore-map-view.component */ 83134);
var explore_search_component_1 = __webpack_require__(/*! ./explore-search.component */ 64114);
var explore_space_info_component_1 = __webpack_require__(/*! ./explore-space-info.component */ 48303);
var explore_zoom_control_component_1 = __webpack_require__(/*! ./explore-zoom-control.component */ 69801);
var explore_device_info_component_1 = __webpack_require__(/*! ./explore-device-info.component */ 51207);
var explore_booking_modal_component_1 = __webpack_require__(/*! ./explore-booking-modal.component */ 76301);
var explore_desk_info_component_1 = __webpack_require__(/*! ./explore-desk-info.component */ 82882);
var set_datetime_modal_component_1 = __webpack_require__(/*! ./set-datetime-modal.component */ 27146);
var explore_book_qr_component_1 = __webpack_require__(/*! ./explore-book-qr.component */ 72213);
var explore_sensor_info_component_1 = __webpack_require__(/*! ./explore-sensor-info.component */ 79303);
var explore_locker_bank_info_component_1 = __webpack_require__(/*! ./explore-locker-bank-info.component */ 84810);
var explore_locker_bank_modal_component_1 = __webpack_require__(/*! ./explore-locker-bank-modal.component */ 50795);
var explore_parking_info_component_1 = __webpack_require__(/*! ./explore-parking-info.component */ 17889);
var explore_icon_component_1 = __webpack_require__(/*! ./explore-icon.component */ 83207);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @angular/common */ 60316);
var i2 = __webpack_require__(/*! ../../../components/src/lib/custom-tooltip.component */ 22238);
var i3 = __webpack_require__(/*! ../../../components/src/lib/authenticated-image.directive */ 93208);
var i4 = __webpack_require__(/*! ../../../components/src/lib/icon.component */ 69434);
var i5 = __webpack_require__(/*! @angular/material/form-field */ 24950);
var i6 = __webpack_require__(/*! @angular/material/core */ 74646);
var i7 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var i8 = __webpack_require__(/*! @angular/material/input */ 95541);
var i9 = __webpack_require__(/*! @angular/material/progress-spinner */ 41134);
var i10 = __webpack_require__(/*! @angular/forms */ 34456);
var i11 = __webpack_require__(/*! ../../../form-fields/src/lib/duration-field.component */ 83476);
var i12 = __webpack_require__(/*! ../../../form-fields/src/lib/user-search-field.component */ 18000);
var COMPONENTS = [explore_map_control_component_1.ExploreMapControlComponent, explore_map_view_component_1.ExploreMapViewComponent, explore_search_component_1.ExploreSearchComponent, explore_space_info_component_1.ExploreSpaceInfoComponent, explore_device_info_component_1.ExploreDeviceInfoComponent, explore_desk_info_component_1.ExploreDeskInfoComponent, explore_zoom_control_component_1.ExploreZoomControlComponent, explore_booking_modal_component_1.ExploreBookingModalComponent, set_datetime_modal_component_1.SetDatetimeModalComponent, explore_book_qr_component_1.ExploreBookQrComponent, explore_sensor_info_component_1.ExploreSensorInfoComponent, explore_locker_bank_info_component_1.ExploreLockerBankInfoComponent, explore_locker_bank_modal_component_1.ExploreLockerBankModalComponent, explore_parking_info_component_1.ExploreParkingInfoComponent, explore_icon_component_1.ExploreIconComponent];
var SharedExploreModule = /*#__PURE__*/_createClass(function SharedExploreModule() {
  _classCallCheck(this, SharedExploreModule);
});
_SharedExploreModule = SharedExploreModule;
_SharedExploreModule.ɵfac = function SharedExploreModule_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _SharedExploreModule)();
};
_SharedExploreModule.ɵmod = /*@__PURE__*/i0.ɵɵdefineNgModule({
  type: _SharedExploreModule
});
_SharedExploreModule.ɵinj = /*@__PURE__*/i0.ɵɵdefineInjector({
  imports: [common_1.CommonModule, components_1.ComponentsModule, forms_1.FormsModule, forms_1.ReactiveFormsModule, slide_toggle_1.MatSlideToggleModule, overlay_1.OverlayModule, portal_1.PortalModule, form_fields_module_1.FormFieldsModule, bookings_module_1.SharedBookingsModule]
});
exports.SharedExploreModule = SharedExploreModule;
(function () {
  (typeof ngJitMode === "undefined" || ngJitMode) && i0.ɵɵsetNgModuleScope(SharedExploreModule, {
    declarations: [explore_map_control_component_1.ExploreMapControlComponent, explore_map_view_component_1.ExploreMapViewComponent, explore_search_component_1.ExploreSearchComponent, explore_space_info_component_1.ExploreSpaceInfoComponent, explore_device_info_component_1.ExploreDeviceInfoComponent, explore_desk_info_component_1.ExploreDeskInfoComponent, explore_zoom_control_component_1.ExploreZoomControlComponent, explore_booking_modal_component_1.ExploreBookingModalComponent, set_datetime_modal_component_1.SetDatetimeModalComponent, explore_book_qr_component_1.ExploreBookQrComponent, explore_sensor_info_component_1.ExploreSensorInfoComponent, explore_locker_bank_info_component_1.ExploreLockerBankInfoComponent, explore_locker_bank_modal_component_1.ExploreLockerBankModalComponent, explore_parking_info_component_1.ExploreParkingInfoComponent, explore_icon_component_1.ExploreIconComponent],
    imports: [common_1.CommonModule, components_1.ComponentsModule, forms_1.FormsModule, forms_1.ReactiveFormsModule, slide_toggle_1.MatSlideToggleModule, overlay_1.OverlayModule, portal_1.PortalModule, form_fields_module_1.FormFieldsModule, bookings_module_1.SharedBookingsModule],
    exports: [explore_map_control_component_1.ExploreMapControlComponent, explore_map_view_component_1.ExploreMapViewComponent, explore_search_component_1.ExploreSearchComponent, explore_space_info_component_1.ExploreSpaceInfoComponent, explore_device_info_component_1.ExploreDeviceInfoComponent, explore_desk_info_component_1.ExploreDeskInfoComponent, explore_zoom_control_component_1.ExploreZoomControlComponent, explore_booking_modal_component_1.ExploreBookingModalComponent, set_datetime_modal_component_1.SetDatetimeModalComponent, explore_book_qr_component_1.ExploreBookQrComponent, explore_sensor_info_component_1.ExploreSensorInfoComponent, explore_locker_bank_info_component_1.ExploreLockerBankInfoComponent, explore_locker_bank_modal_component_1.ExploreLockerBankModalComponent, explore_parking_info_component_1.ExploreParkingInfoComponent, explore_icon_component_1.ExploreIconComponent]
  });
})();
i0.ɵɵsetComponentScope(explore_space_info_component_1.ExploreSpaceInfoComponent, [i1.NgForOf, i1.NgIf, i2.CustomTooltipComponent, i3.AuthenticatedImageDirective], []);
i0.ɵɵsetComponentScope(explore_booking_modal_component_1.ExploreBookingModalComponent, [i1.NgIf, i4.IconComponent, i5.MatFormField, i5.MatError, i6.MatRipple, i7.MatDialogClose, i8.MatInput, i9.MatProgressSpinner, i10.DefaultValueAccessor, i10.NgControlStatus, i10.NgControlStatusGroup, i10.FormGroupDirective, i10.FormControlName, i11.DurationFieldComponent, i12.UserSearchFieldComponent], [i1.AsyncPipe, i1.DatePipe]);

/***/ }),

/***/ 11874:
/*!*****************************************!*\
  !*** ./libs/explore/src/lib/explore.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var tslib_1 = __webpack_require__(/*! tslib */ 24398);
tslib_1.__exportStar(__webpack_require__(/*! ./explore-desks.service */ 61104), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./explore-map-control.component */ 60468), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./explore-map-view.component */ 83134), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./explore-search.component */ 64114), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./explore-search.service */ 35446), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./explore-space-info.component */ 48303), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./explore-spaces.service */ 65897), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./explore-state.service */ 12455), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./explore-zones.service */ 61369), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./explore-zoom-control.component */ 69801), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./explore-parking.service */ 34498), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./explore.module */ 42434), exports);

/***/ }),

/***/ 27146:
/*!**************************************************************!*\
  !*** ./libs/explore/src/lib/set-datetime-modal.component.ts ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _SetDatetimeModalComponent;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.SetDatetimeModalComponent = void 0;
var forms_1 = __webpack_require__(/*! @angular/forms */ 34456);
var dialog_1 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @placeos/common */ 22797);
var i2 = __webpack_require__(/*! @angular/common */ 60316);
var i3 = __webpack_require__(/*! ../../../components/src/lib/icon.component */ 69434);
var i4 = __webpack_require__(/*! @angular/material/core */ 74646);
var i5 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var i6 = __webpack_require__(/*! @angular/forms */ 34456);
var i7 = __webpack_require__(/*! ../../../form-fields/src/lib/date-field.component */ 19608);
var i8 = __webpack_require__(/*! ../../../form-fields/src/lib/duration-field.component */ 83476);
var i9 = __webpack_require__(/*! ../../../form-fields/src/lib/time-field.component */ 81413);
var i10 = __webpack_require__(/*! ../../../form-fields/src/lib/user-search-field.component */ 18000);
var _c0 = function _c0() {
  return {
    standalone: true
  };
};
function SetDatetimeModalComponent_main_6_div_1_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 7)(1, "div", 13)(2, "label");
    i0.ɵɵtext(3, "Resource:");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(4, "div", 14);
    i0.ɵɵtext(5);
    i0.ɵɵelementEnd()()();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance(5);
    i0.ɵɵtextInterpolate1(" ", ctx_r1.resource.name || ctx_r1.resource.map_id || "Unknown Resource", " ");
  }
}
function SetDatetimeModalComponent_main_6_div_2_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 7)(1, "div", 8)(2, "label");
    i0.ɵɵtext(3, "Host");
    i0.ɵɵelementEnd();
    i0.ɵɵelement(4, "a-user-search-field", 15);
    i0.ɵɵelementEnd()();
  }
}
function SetDatetimeModalComponent_main_6_Template(rf, ctx) {
  if (rf & 1) {
    var _r1 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "main", 5);
    i0.ɵɵtemplate(1, SetDatetimeModalComponent_main_6_div_1_Template, 6, 1, "div", 6)(2, SetDatetimeModalComponent_main_6_div_2_Template, 5, 0, "div", 6);
    i0.ɵɵelementStart(3, "div", 7)(4, "div", 8)(5, "label");
    i0.ɵɵtext(6, "Date");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(7, "a-date-field", 9);
    i0.ɵɵtext(8, " Date and time must be in the future ");
    i0.ɵɵelementEnd()()();
    i0.ɵɵelementStart(9, "div", 7)(10, "div", 10)(11, "label");
    i0.ɵɵtext(12, "Start Time");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(13, "a-time-field", 11);
    i0.ɵɵlistener("ngModelChange", function SetDatetimeModalComponent_main_6_Template_a_time_field_ngModelChange_13_listener($event) {
      i0.ɵɵrestoreView(_r1);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.form.patchValue({
        date: $event
      }));
    });
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(14, "div", 10)(15, "label");
    i0.ɵɵtext(16, "End Time");
    i0.ɵɵelementEnd();
    i0.ɵɵelement(17, "a-duration-field", 12);
    i0.ɵɵelementEnd()()();
  }
  if (rf & 2) {
    var tmp_8_0;
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵproperty("formGroup", ctx_r1.form);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", ctx_r1.resource);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", ctx_r1.host);
    i0.ɵɵadvance(5);
    i0.ɵɵproperty("to", ctx_r1.book_until);
    i0.ɵɵadvance(6);
    i0.ɵɵproperty("ngModel", ctx_r1.form.value.date)("ngModelOptions", i0.ɵɵpureFunction0(12, _c0))("use_24hr", ctx_r1.use_24hr_time);
    i0.ɵɵadvance(4);
    i0.ɵɵproperty("time", (tmp_8_0 = ctx_r1.form.get("date")) == null ? null : tmp_8_0.value)("max", 10 * 60)("min", 60)("step", 60)("use_24hr", ctx_r1.use_24hr_time);
  }
}
var SetDatetimeModalComponent = /*#__PURE__*/function () {
  function SetDatetimeModalComponent(_data, _settings) {
    _classCallCheck(this, SetDatetimeModalComponent);
    this._data = _data;
    this._settings = _settings;
    this.host = this._data.host;
    this.form = new forms_1.FormGroup({
      user: new forms_1.FormControl(this._data.user),
      date: new forms_1.FormControl(this._data.date),
      duration: new forms_1.FormControl(this._data.duration)
    });
    this.book_until = this._data.until;
    this.resource = this._data.resource;
  }
  return _createClass(SetDatetimeModalComponent, [{
    key: "use_24hr_time",
    get: function get() {
      return this._settings.get('app.use_24_hour_time');
    }
  }]);
}();
_SetDatetimeModalComponent = SetDatetimeModalComponent;
_SetDatetimeModalComponent.ɵfac = function SetDatetimeModalComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _SetDatetimeModalComponent)(i0.ɵɵdirectiveInject(dialog_1.MAT_DIALOG_DATA), i0.ɵɵdirectiveInject(i1.SettingsService));
};
_SetDatetimeModalComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _SetDatetimeModalComponent,
  selectors: [["set-datetime-modal"]],
  decls: 10,
  vars: 2,
  consts: [["classs", "flex items-center justify-between"], ["icon", "", "mat-dialog-close", ""], ["class", "w-[24rem] max-w-[85vw] pt-4", 3, "formGroup", 4, "ngIf"], [1, "w-full", "p-2", "border-t", "border-base-200", "flex", "items-center", "justify-center"], ["btn", "", "matRipple", "", 1, "w-32", 3, "mat-dialog-close"], [1, "w-[24rem]", "max-w-[85vw]", "pt-4", 3, "formGroup"], ["class", "flex flex-col sm:flex-row space-x-0 sm:space-x-2 w-[640px] max-w-[calc(100%-2rem)] mx-auto", 4, "ngIf"], [1, "flex", "flex-col", "sm:flex-row", "space-x-0", "sm:space-x-2", "w-[640px]", "max-w-[calc(100%-2rem)]", "mx-auto"], [1, "flex", "flex-col", "flex-1", "w-full", "sm:w-1/4"], ["formControlName", "date", 3, "to"], [1, "flex", "flex-col", "flex-1", "w-full", "sm:w-1/3"], [3, "ngModelChange", "ngModel", "ngModelOptions", "use_24hr"], ["formControlName", "duration", 3, "time", "max", "min", "step", "use_24hr"], [1, "flex", "flex-col", "flex-1", "w-full", "sm:w-1/4", "mb-2"], [1, "px-4", "py-3", "border", "border-base-200", "rounded", "w-full", "mb-4"], ["formControlName", "user", 1, "mb-4"]],
  template: function SetDatetimeModalComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵelementStart(0, "header", 0)(1, "h2");
      i0.ɵɵtext(2, "Set date and time");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(3, "button", 1)(4, "app-icon");
      i0.ɵɵtext(5, "close");
      i0.ɵɵelementEnd()()();
      i0.ɵɵtemplate(6, SetDatetimeModalComponent_main_6_Template, 18, 13, "main", 2);
      i0.ɵɵelementStart(7, "footer", 3)(8, "button", 4);
      i0.ɵɵtext(9, " Continue ");
      i0.ɵɵelementEnd()();
    }
    if (rf & 2) {
      i0.ɵɵadvance(6);
      i0.ɵɵproperty("ngIf", ctx.form);
      i0.ɵɵadvance(2);
      i0.ɵɵproperty("mat-dialog-close", ctx.form.value);
    }
  },
  dependencies: [i2.NgIf, i3.IconComponent, i4.MatRipple, i5.MatDialogClose, i6.NgControlStatus, i6.NgControlStatusGroup, i6.NgModel, i6.FormGroupDirective, i6.FormControlName, i7.DateFieldComponent, i8.DurationFieldComponent, i9.TimeFieldComponent, i10.UserSearchFieldComponent]
});
exports.SetDatetimeModalComponent = SetDatetimeModalComponent;

/***/ }),

/***/ 63046:
/*!***************************************!*\
  !*** ./libs/form-fields/src/index.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var tslib_1 = __webpack_require__(/*! tslib */ 24398);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/form-fields.module */ 77066), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/action-field.component */ 79842), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/counter.component */ 55507), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/date-field.component */ 19608), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/duration-field.component */ 83476), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/time-field.component */ 81413), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/user-list-field.component */ 840), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/user-search-field.component */ 18000), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/image-list-field.component */ 56864), exports);

/***/ }),

/***/ 79842:
/*!************************************************************!*\
  !*** ./libs/form-fields/src/lib/action-field.component.ts ***!
  \************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _ActionFieldComponent;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.ActionFieldComponent = void 0;
var core_1 = __webpack_require__(/*! @angular/core */ 37580);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! ../../../components/src/lib/icon.component */ 69434);
var _c0 = ["*"];
var ActionFieldComponent = /*#__PURE__*/function () {
  function ActionFieldComponent() {
    _classCallCheck(this, ActionFieldComponent);
    /** Emitter for user interaction events */
    this.on_action = new core_1.EventEmitter();
    /** Whether to show tooltip */
    this.show_tooltip = false;
  }
  /**
   * Emit that the user has performed an action on the field
   */
  return _createClass(ActionFieldComponent, [{
    key: "performAction",
    value: function performAction() {
      this.show_tooltip = !this.show_tooltip;
      this.on_action.emit();
    }
  }]);
}();
_ActionFieldComponent = ActionFieldComponent;
_ActionFieldComponent.ɵfac = function ActionFieldComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _ActionFieldComponent)();
};
_ActionFieldComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _ActionFieldComponent,
  selectors: [["an-action-field"]],
  inputs: {
    name: "name",
    disabled: "disabled"
  },
  outputs: {
    on_action: "onAction"
  },
  ngContentSelectors: _c0,
  decls: 5,
  vars: 3,
  consts: [["type", "button", "role", "button", "form-field", "", "tabindex", "0", 1, "flex", "items-center", "rounded", "p-2", "border", "border-base-200", "hover:border-base-200", "w-full", 3, "keydown.enter"], ["placeholder", "", 1, "flex-1", "w-0", "truncate", 3, "click"], [1, "text-xl", 3, "click"]],
  template: function ActionFieldComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵprojectionDef();
      i0.ɵɵelementStart(0, "button", 0);
      i0.ɵɵlistener("keydown.enter", function ActionFieldComponent_Template_button_keydown_enter_0_listener() {
        return ctx.performAction();
      });
      i0.ɵɵelementStart(1, "div", 1);
      i0.ɵɵlistener("click", function ActionFieldComponent_Template_div_click_1_listener() {
        return ctx.performAction();
      });
      i0.ɵɵprojection(2);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(3, "app-icon", 2);
      i0.ɵɵlistener("click", function ActionFieldComponent_Template_app_icon_click_3_listener() {
        return ctx.performAction();
      });
      i0.ɵɵtext(4);
      i0.ɵɵelementEnd()();
    }
    if (rf & 2) {
      i0.ɵɵattribute("disabled", ctx.disabled)("name", ctx.name);
      i0.ɵɵadvance(4);
      i0.ɵɵtextInterpolate1(" arrow_drop_", ctx.show_tooltip ? "up" : "down", " ");
    }
  },
  dependencies: [i1.IconComponent],
  styles: ["[_nghost-%COMP%]    > div[_ngcontent-%COMP%]:hover {\n                box-shadow: inset 0 0 0 1px #000;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFjdGlvbi1maWVsZC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLGdDQUFnQztZQUNwQyIsImZpbGUiOiJhY3Rpb24tZmllbGQuY29tcG9uZW50LnRzIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICA6aG9zdCA+IGRpdjpob3ZlciB7XG4gICAgICAgICAgICAgICAgYm94LXNoYWRvdzogaW5zZXQgMCAwIDAgMXB4ICMwMDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICJdfQ== */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvZm9ybS1maWVsZHMvc3JjL2xpYi9hY3Rpb24tZmllbGQuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxnQ0FBZ0M7WUFDcEM7O0FBRVosNFpBQTRaIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICA6aG9zdCA+IGRpdjpob3ZlciB7XG4gICAgICAgICAgICAgICAgYm94LXNoYWRvdzogaW5zZXQgMCAwIDAgMXB4ICMwMDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICJdLCJzb3VyY2VSb290IjoiIn0= */"]
});
exports.ActionFieldComponent = ActionFieldComponent;

/***/ }),

/***/ 33683:
/*!******************************************************************!*\
  !*** ./libs/form-fields/src/lib/booking-rules-form.component.ts ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _BookingRulesFormComponent;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.BookingRulesFormComponent = void 0;
var core_1 = __webpack_require__(/*! @angular/core */ 37580);
var forms_1 = __webpack_require__(/*! @angular/forms */ 34456);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var organisation_1 = __webpack_require__(/*! @placeos/organisation */ 2510);
var ts_client_1 = __webpack_require__(/*! @placeos/ts-client */ 35713);
var date_fns_1 = __webpack_require__(/*! date-fns */ 25773);
var rxjs_1 = __webpack_require__(/*! rxjs */ 15681);
var operators_1 = __webpack_require__(/*! rxjs/operators */ 97303);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @placeos/organisation */ 2510);
var i2 = __webpack_require__(/*! @placeos/common */ 22797);
var _c0 = function _c0() {
  return {
    standalone: true
  };
};
function BookingRulesFormComponent_mat_option_12_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "mat-option", 26);
    i0.ɵɵtext(1);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var zone_r1 = ctx.$implicit;
    i0.ɵɵproperty("value", zone_r1.id);
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", zone_r1.display_name || zone_r1.name, " ");
  }
}
function BookingRulesFormComponent_mat_checkbox_31_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "mat-checkbox", 27);
    i0.ɵɵtext(1, " Auto Approve Bookings ");
    i0.ɵɵelementEnd();
  }
}
function BookingRulesFormComponent_div_57_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 28)(1, "label", 29);
    i0.ɵɵtext(2);
    i0.ɵɵelementEnd();
    i0.ɵɵelement(3, "item-list-field", 30);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate1("", ctx_r1.form.value.rules.hidden ? "Prevent" : "Allow", " Booking for Groups:");
  }
}
function BookingRulesFormComponent_div_58_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 28)(1, "label", 31);
    i0.ɵɵtext(2, "Locations:");
    i0.ɵɵelementEnd();
    i0.ɵɵelement(3, "item-list-field", 32);
    i0.ɵɵelementEnd();
  }
}
function BookingRulesFormComponent_div_59_div_1_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 2)(1, "label", 35);
    i0.ɵɵtext(2);
    i0.ɵɵelementEnd();
    i0.ɵɵelement(3, "a-duration-field", 36);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate1("", ctx_r1.form.value.rules.hidden ? "Prevent" : "Allow", " booking with a minimum length of:");
    i0.ɵɵadvance();
    i0.ɵɵproperty("min", 15)("max", 1440)("step", 15);
  }
}
function BookingRulesFormComponent_div_59_div_2_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 2)(1, "label", 37);
    i0.ɵɵtext(2);
    i0.ɵɵelementEnd();
    i0.ɵɵelement(3, "a-duration-field", 38);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate1("", ctx_r1.form.value.rules.hidden ? "Prevent" : "Allow", " booking with a maximum length up to:");
    i0.ɵɵadvance();
    i0.ɵɵproperty("min", ctx_r1.form.value.conditions.min_length || 15)("max", 1440)("step", 15);
  }
}
function BookingRulesFormComponent_div_59_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 33);
    i0.ɵɵtemplate(1, BookingRulesFormComponent_div_59_div_1_Template, 4, 4, "div", 34)(2, BookingRulesFormComponent_div_59_div_2_Template, 4, 4, "div", 34);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", ctx_r1.available_conditions.includes("min_length"));
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", ctx_r1.available_conditions.includes("max_length"));
  }
}
function BookingRulesFormComponent_div_60_mat_option_5_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "mat-option", 26);
    i0.ɵɵtext(1);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var time_r3 = ctx.$implicit;
    i0.ɵɵproperty("value", time_r3);
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", time_r3, " ");
  }
}
function BookingRulesFormComponent_div_60_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 28)(1, "label", 39);
    i0.ɵɵtext(2);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(3, "mat-form-field", 40)(4, "mat-select", 41);
    i0.ɵɵtemplate(5, BookingRulesFormComponent_div_60_mat_option_5_Template, 2, 2, "mat-option", 7);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(6, "mat-error");
    i0.ɵɵtext(7, "A valid time is required");
    i0.ɵɵelementEnd()()();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate1("", ctx_r1.form.value.rules.hidden ? "Prevent" : "Allow", " booking before:");
    i0.ɵɵadvance(3);
    i0.ɵɵproperty("ngForOf", ctx_r1.duration_blocks);
  }
}
function BookingRulesFormComponent_div_61_mat_option_5_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "mat-option", 26);
    i0.ɵɵtext(1);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var time_r4 = ctx.$implicit;
    i0.ɵɵproperty("value", time_r4);
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", time_r4, " ");
  }
}
function BookingRulesFormComponent_div_61_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 28)(1, "label", 42);
    i0.ɵɵtext(2);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(3, "mat-form-field", 40)(4, "mat-select", 43);
    i0.ɵɵtemplate(5, BookingRulesFormComponent_div_61_mat_option_5_Template, 2, 2, "mat-option", 7);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(6, "mat-error");
    i0.ɵɵtext(7, "A valid time is required");
    i0.ɵɵelementEnd()()();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate1("", ctx_r1.form.value.rules.hidden ? "Prevent" : "Allow", " booking after:");
    i0.ɵɵadvance(3);
    i0.ɵɵproperty("ngForOf", ctx_r1.duration_blocks);
  }
}
function BookingRulesFormComponent_div_62_Template(rf, ctx) {
  if (rf & 1) {
    var _r5 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 28)(1, "label", 42);
    i0.ɵɵtext(2);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(3, "div", 1)(4, "a-date-field", 44);
    i0.ɵɵlistener("ngModelChange", function BookingRulesFormComponent_div_62_Template_a_date_field_ngModelChange_4_listener($event) {
      i0.ɵɵrestoreView(_r5);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.setIsPeriod($event, ctx_r1.form.value.conditions.is_period[1]));
    });
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(5, "a-date-field", 45);
    i0.ɵɵlistener("ngModelChange", function BookingRulesFormComponent_div_62_Template_a_date_field_ngModelChange_5_listener($event) {
      i0.ɵɵrestoreView(_r5);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.setIsPeriod(ctx_r1.form.value.conditions.is_period[0], $event));
    });
    i0.ɵɵelementEnd()()();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate1("", ctx_r1.form.value.rules.hidden ? "Prevent" : "Allow", " booking between dates:");
    i0.ɵɵadvance(2);
    i0.ɵɵproperty("ngModel", ctx_r1.form.value.conditions.is_period[0])("ngModelOptions", i0.ɵɵpureFunction0(6, _c0));
    i0.ɵɵadvance();
    i0.ɵɵproperty("from", ctx_r1.form.value.conditions.is_period[0])("ngModel", ctx_r1.form.value.conditions.is_period[1])("ngModelOptions", i0.ɵɵpureFunction0(7, _c0));
  }
}
function BookingRulesFormComponent_div_63_mat_option_6_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "mat-option", 26);
    i0.ɵɵtext(1);
    i0.ɵɵpipe(2, "date");
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var time_r7 = ctx.$implicit;
    var ctx_r1 = i0.ɵɵnextContext(2);
    i0.ɵɵproperty("value", time_r7.id);
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", i0.ɵɵpipeBind2(2, 2, time_r7.value, ctx_r1.time_format), " ");
  }
}
function BookingRulesFormComponent_div_63_ng_container_9_mat_option_1_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "mat-option", 26);
    i0.ɵɵtext(1);
    i0.ɵɵpipe(2, "date");
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var time_r8 = i0.ɵɵnextContext().$implicit;
    var ctx_r1 = i0.ɵɵnextContext(2);
    i0.ɵɵproperty("value", time_r8.id);
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", i0.ɵɵpipeBind2(2, 2, time_r8.value, ctx_r1.time_format), " ");
  }
}
function BookingRulesFormComponent_div_63_ng_container_9_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵtemplate(1, BookingRulesFormComponent_div_63_ng_container_9_mat_option_1_Template, 3, 5, "mat-option", 51);
    i0.ɵɵelementContainerEnd();
  }
  if (rf & 2) {
    var time_r8 = ctx.$implicit;
    var ctx_r1 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", time_r8.id > (ctx_r1.form.value.conditions.is_between[0] || 6));
  }
}
function BookingRulesFormComponent_div_63_Template(rf, ctx) {
  if (rf & 1) {
    var _r6 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 28)(1, "label", 46);
    i0.ɵɵtext(2);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(3, "div", 47)(4, "mat-form-field", 40)(5, "mat-select", 48);
    i0.ɵɵlistener("ngModelChange", function BookingRulesFormComponent_div_63_Template_mat_select_ngModelChange_5_listener($event) {
      i0.ɵɵrestoreView(_r6);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.setIsBetween($event, ctx_r1.form.value.conditions.is_between[1]));
    });
    i0.ɵɵtemplate(6, BookingRulesFormComponent_div_63_mat_option_6_Template, 3, 5, "mat-option", 7);
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(7, "mat-form-field", 40)(8, "mat-select", 49);
    i0.ɵɵlistener("ngModelChange", function BookingRulesFormComponent_div_63_Template_mat_select_ngModelChange_8_listener($event) {
      i0.ɵɵrestoreView(_r6);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.setIsBetween(ctx_r1.form.value.conditions.is_between[0], $event));
    });
    i0.ɵɵtemplate(9, BookingRulesFormComponent_div_63_ng_container_9_Template, 2, 1, "ng-container", 50);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(10, "mat-error");
    i0.ɵɵtext(11, "A valid end time is required");
    i0.ɵɵelementEnd()()()();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate1("", ctx_r1.form.value.rules.hidden ? "Prevent" : "Allow", " booking between:");
    i0.ɵɵadvance(3);
    i0.ɵɵproperty("ngModel", ctx_r1.form.value.conditions.is_between[0] || 6)("ngModelOptions", i0.ɵɵpureFunction0(7, _c0));
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngForOf", ctx_r1.time_blocks);
    i0.ɵɵadvance(2);
    i0.ɵɵproperty("ngModel", ctx_r1.form.value.conditions.is_between[1] || 18)("ngModelOptions", i0.ɵɵpureFunction0(8, _c0));
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngForOf", ctx_r1.time_blocks);
  }
}
function BookingRulesFormComponent_div_64_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 28)(1, "label", 52);
    i0.ɵɵtext(2);
    i0.ɵɵelementEnd();
    i0.ɵɵelement(3, "item-list-field", 53);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate1(" ", ctx_r1.form.value.rules.hidden ? "Prevent" : "Allow", " booking these resources: ");
  }
}
var BookingRulesFormComponent = /*#__PURE__*/function () {
  function BookingRulesFormComponent(_org, _settings) {
    _classCallCheck(this, BookingRulesFormComponent);
    this._org = _org;
    this._settings = _settings;
    this.save = false;
    this.rulesetChange = new core_1.EventEmitter();
    this.available_conditions = [];
    this.building_zones = this._org.active_building.pipe((0, operators_1.filter)(function (_) {
      return !!_;
    }), (0, operators_1.switchMap)(function (bld) {
      return (0, ts_client_1.queryZones)({
        parent_id: bld.id
      }).pipe((0, operators_1.catchError)(function () {
        return (0, rxjs_1.of)({
          data: []
        });
      }));
    }), (0, operators_1.map)(function (res) {
      return res.data;
    }), (0, operators_1.shareReplay)(1));
    this.time_blocks = new Array(24 * 4).fill(0).map(function (_, idx) {
      var hour = Math.floor(idx / 4);
      var minutes = idx % 4 * 15;
      return {
        id: hour + minutes / 60,
        value: (0, date_fns_1.set)(new Date(), {
          hours: hour,
          minutes: minutes
        })
      };
    });
    this.duration_blocks = ['1 Day', '2 Days', '3 Days', '4 Days', '5 Days', '1 Week', '2 Weeks', '3 Weeks', '4 Weeks', '1 Month', '2 Months', '3 Months', '4 Months', '5 Months', '6 Months'];
    this.form = new forms_1.FormGroup({
      id: new forms_1.FormControl("ruleset-".concat((0, common_1.randomString)(8))),
      zone: new forms_1.FormControl('*', forms_1.Validators.required),
      name: new forms_1.FormControl('', forms_1.Validators.required),
      rules: new forms_1.FormGroup({
        auto_approve: new forms_1.FormControl(false),
        hidden: new forms_1.FormControl(false)
      }),
      conditions: new forms_1.FormGroup({
        groups: new forms_1.FormControl([]),
        locations: new forms_1.FormControl([]),
        min_length: new forms_1.FormControl(0),
        max_length: new forms_1.FormControl(24 * 60),
        is_before: new forms_1.FormControl('1 Week'),
        is_after: new forms_1.FormControl('1 Day'),
        is_between: new forms_1.FormControl([6, 18]),
        is_period: new forms_1.FormControl([(0, date_fns_1.startOfDay)(Date.now()).valueOf(), (0, date_fns_1.endOfDay)(Date.now()).valueOf()]),
        resource_ids: new forms_1.FormControl([])
      })
    });
  }
  return _createClass(BookingRulesFormComponent, [{
    key: "time_format",
    get: function get() {
      return this._settings.time_format;
    }
  }, {
    key: "ngOnChanges",
    value: function ngOnChanges(changes) {
      if (changes.ruleset && this.ruleset) {
        this.available_conditions = Object.keys(this.ruleset.conditions || {});
        this.form.patchValue(this.ruleset);
      }
      if (changes.save && this.save !== changes.save.previousValue && !changes.save.firstChange) {
        this.post();
      }
    }
  }, {
    key: "setIsBetween",
    value: function setIsBetween(start, end) {
      if (!start || !end) return;
      if (start > end) end = start + 0.25;
      this.form.patchValue({
        conditions: {
          is_between: [start, end]
        }
      });
    }
  }, {
    key: "setIsPeriod",
    value: function setIsPeriod(start, end) {
      if (!start || !end) return;
      if (start > end) end = start;
      this.form.patchValue({
        conditions: {
          is_period: [(0, date_fns_1.startOfDay)(start).valueOf(), (0, date_fns_1.endOfDay)(end).valueOf()]
        }
      });
    }
  }, {
    key: "post",
    value: function post() {
      if (!this.form.valid) {
        return (0, common_1.notifyError)("Some form fields are invalid. [".concat((0, common_1.getInvalidFields)(this.form).join(', '), "]"));
      }
      var value = this.form.getRawValue();
      var condition_keys = Object.keys(value.conditions);
      for (var _i = 0, _condition_keys = condition_keys; _i < _condition_keys.length; _i++) {
        var key = _condition_keys[_i];
        if (!this.available_conditions.includes(key)) {
          delete value.conditions[key];
        }
      }
      this.rulesetChange.emit(value);
    }
  }]);
}();
_BookingRulesFormComponent = BookingRulesFormComponent;
_BookingRulesFormComponent.ɵfac = function BookingRulesFormComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _BookingRulesFormComponent)(i0.ɵɵdirectiveInject(i1.OrganisationService), i0.ɵɵdirectiveInject(i2.SettingsService));
};
_BookingRulesFormComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _BookingRulesFormComponent,
  selectors: [["booking-rules-form"]],
  inputs: {
    ruleset: "ruleset",
    save: "save"
  },
  outputs: {
    rulesetChange: "rulesetChange"
  },
  features: [i0.ɵɵNgOnChangesFeature],
  decls: 65,
  vars: 16,
  consts: [[1, "flex", "flex-col", "space-y-2", 3, "formGroup"], [1, "flex", "items-center", "space-x-2"], [1, "flex", "flex-col", "flex-1"], ["for", "zone"], ["appearance", "outline"], ["name", "zone", "formControlName", "zone"], ["value", "*"], [3, "value", 4, "ngFor", "ngForOf"], ["for", "name"], ["matInput", "", "name", "name", "formControlName", "name", "placeholder", "Ruleset Name"], ["formGroupName", "rules", 1, "flex", "items-center", "space-x-2"], ["name", "hidden", "formControlName", "hidden", "matTooltip", "Prevent user from booking the resource if the conditions match"], ["name", "auto_approve", "formControlName", "auto_approve", "matTooltip", "Whether resource should be auto-approved when booking if the conditions match", 4, "ngIf"], [1, "flex", "flex-col"], ["name", "zone", "multiple", "", "placeholder", "No Conditions. Match all resources in zone", 3, "ngModelChange", "ngModel", "ngModelOptions"], ["value", "groups"], ["value", "locations"], ["value", "min_length"], ["value", "max_length"], ["value", "is_before"], ["value", "is_after"], ["value", "is_between"], ["value", "is_period"], ["value", "resource_ids"], ["class", "flex flex-col", "formGroupName", "conditions", 4, "ngIf"], ["class", "flex items-center space-x-2", "formGroupName", "conditions", 4, "ngIf"], [3, "value"], ["name", "auto_approve", "formControlName", "auto_approve", "matTooltip", "Whether resource should be auto-approved when booking if the conditions match"], ["formGroupName", "conditions", 1, "flex", "flex-col"], ["for", "groups"], ["name", "groups", "formControlName", "groups", "placeholder", "User groups"], ["for", "locations"], ["name", "locations", "formControlName", "locations", "placeholder", "Locations"], ["formGroupName", "conditions", 1, "flex", "items-center", "space-x-2"], ["class", "flex flex-col flex-1", 4, "ngIf"], ["for", "min_length"], ["name", "min_length", "formControlName", "min_length", 3, "min", "max", "step"], ["for", "max_length"], ["name", "max_length", "formControlName", "max_length", 3, "min", "max", "step"], ["for", "is-before"], ["appearance", "outline", 1, "flex-1"], ["name", "is-before", "formControlName", "is_before"], ["for", "is-after"], ["name", "is-after", "formControlName", "is_after"], [1, "flex-1", 3, "ngModelChange", "ngModel", "ngModelOptions"], [1, "flex-1", 3, "ngModelChange", "from", "ngModel", "ngModelOptions"], ["for", "is_between"], [1, "flex", "items-center", "space-x-2", "w-full"], ["name", "start-time", 3, "ngModelChange", "ngModel", "ngModelOptions"], ["name", "end-time", 3, "ngModelChange", "ngModel", "ngModelOptions"], [4, "ngFor", "ngForOf"], [3, "value", 4, "ngIf"], ["for", "resource_ids"], ["name", "resource_ids", "formControlName", "resource_ids", "placeholder", "Resource IDs"]],
  template: function BookingRulesFormComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵelementStart(0, "div", 0)(1, "div", 1)(2, "div", 2)(3, "label", 3);
      i0.ɵɵtext(4, "Zone");
      i0.ɵɵelementStart(5, "span");
      i0.ɵɵtext(6, "*");
      i0.ɵɵelementEnd();
      i0.ɵɵtext(7, ":");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(8, "mat-form-field", 4)(9, "mat-select", 5)(10, "mat-option", 6);
      i0.ɵɵtext(11, "Any Zone");
      i0.ɵɵelementEnd();
      i0.ɵɵtemplate(12, BookingRulesFormComponent_mat_option_12_Template, 2, 2, "mat-option", 7);
      i0.ɵɵpipe(13, "async");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(14, "mat-error");
      i0.ɵɵtext(15, "A valid zone is required");
      i0.ɵɵelementEnd()()();
      i0.ɵɵelementStart(16, "div", 2)(17, "label", 8);
      i0.ɵɵtext(18, "Name");
      i0.ɵɵelementStart(19, "span");
      i0.ɵɵtext(20, "*");
      i0.ɵɵelementEnd();
      i0.ɵɵtext(21, ":");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(22, "mat-form-field", 4);
      i0.ɵɵelement(23, "input", 9);
      i0.ɵɵelementStart(24, "mat-error");
      i0.ɵɵtext(25, "A valid name is required");
      i0.ɵɵelementEnd()()()();
      i0.ɵɵelementStart(26, "div", 10)(27, "div", 2)(28, "mat-checkbox", 11);
      i0.ɵɵtext(29, " Prevent Bookings ");
      i0.ɵɵelementEnd()();
      i0.ɵɵelementStart(30, "div", 2);
      i0.ɵɵtemplate(31, BookingRulesFormComponent_mat_checkbox_31_Template, 2, 0, "mat-checkbox", 12);
      i0.ɵɵelementEnd()();
      i0.ɵɵelementStart(32, "div", 13)(33, "label", 3);
      i0.ɵɵtext(34, "Rule Conditions:");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(35, "mat-form-field", 4)(36, "mat-select", 14);
      i0.ɵɵtwoWayListener("ngModelChange", function BookingRulesFormComponent_Template_mat_select_ngModelChange_36_listener($event) {
        i0.ɵɵtwoWayBindingSet(ctx.available_conditions, $event) || (ctx.available_conditions = $event);
        return $event;
      });
      i0.ɵɵelementStart(37, "mat-option", 15);
      i0.ɵɵtext(38, "Groups");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(39, "mat-option", 16);
      i0.ɵɵtext(40, "Locations");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(41, "mat-option", 17);
      i0.ɵɵtext(42, " Minimum Length ");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(43, "mat-option", 18);
      i0.ɵɵtext(44, " Maximum Length ");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(45, "mat-option", 19);
      i0.ɵɵtext(46, " Is Within Days ");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(47, "mat-option", 20);
      i0.ɵɵtext(48, " Is After Days ");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(49, "mat-option", 21);
      i0.ɵɵtext(50, " Is Between Hours ");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(51, "mat-option", 22);
      i0.ɵɵtext(52, " Between Dates ");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(53, "mat-option", 23);
      i0.ɵɵtext(54, "Resources");
      i0.ɵɵelementEnd()();
      i0.ɵɵelementStart(55, "mat-error");
      i0.ɵɵtext(56, "A valid zone is required");
      i0.ɵɵelementEnd()()();
      i0.ɵɵtemplate(57, BookingRulesFormComponent_div_57_Template, 4, 1, "div", 24)(58, BookingRulesFormComponent_div_58_Template, 4, 0, "div", 24)(59, BookingRulesFormComponent_div_59_Template, 3, 2, "div", 25)(60, BookingRulesFormComponent_div_60_Template, 8, 2, "div", 24)(61, BookingRulesFormComponent_div_61_Template, 8, 2, "div", 24)(62, BookingRulesFormComponent_div_62_Template, 6, 8, "div", 24)(63, BookingRulesFormComponent_div_63_Template, 12, 9, "div", 24)(64, BookingRulesFormComponent_div_64_Template, 4, 1, "div", 24);
      i0.ɵɵelementEnd();
    }
    if (rf & 2) {
      i0.ɵɵproperty("formGroup", ctx.form);
      i0.ɵɵadvance(12);
      i0.ɵɵproperty("ngForOf", i0.ɵɵpipeBind1(13, 13, ctx.building_zones));
      i0.ɵɵadvance(19);
      i0.ɵɵproperty("ngIf", !ctx.form.value.rules.hidden);
      i0.ɵɵadvance(5);
      i0.ɵɵtwoWayProperty("ngModel", ctx.available_conditions);
      i0.ɵɵproperty("ngModelOptions", i0.ɵɵpureFunction0(15, _c0));
      i0.ɵɵadvance(21);
      i0.ɵɵproperty("ngIf", ctx.available_conditions.includes("groups"));
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", ctx.available_conditions.includes("locations"));
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", ctx.available_conditions.includes("min_length") || ctx.available_conditions.includes("max_length"));
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", ctx.available_conditions.includes("is_before"));
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", ctx.available_conditions.includes("is_after"));
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", ctx.available_conditions.includes("is_period"));
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", ctx.available_conditions.includes("is_between"));
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", ctx.available_conditions.includes("resource_ids"));
    }
  },
  styles: ["[_nghost-%COMP%] {\n                display: block;\n                padding: 0.5rem;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJvb2tpbmctcnVsZXMtZm9ybS5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLGNBQWM7Z0JBQ2QsZUFBZTtZQUNuQiIsImZpbGUiOiJib29raW5nLXJ1bGVzLWZvcm0uY29tcG9uZW50LnRzIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICA6aG9zdCB7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICAgICAgICAgICAgcGFkZGluZzogMC41cmVtO1xuICAgICAgICAgICAgfVxuICAgICAgICAiXX0= */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvZm9ybS1maWVsZHMvc3JjL2xpYi9ib29raW5nLXJ1bGVzLWZvcm0uY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxjQUFjO2dCQUNkLGVBQWU7WUFDbkI7O0FBRVosNGJBQTRiIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICA6aG9zdCB7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICAgICAgICAgICAgcGFkZGluZzogMC41cmVtO1xuICAgICAgICAgICAgfVxuICAgICAgICAiXSwic291cmNlUm9vdCI6IiJ9 */"]
});
exports.BookingRulesFormComponent = BookingRulesFormComponent;

/***/ }),

/***/ 55507:
/*!*******************************************************!*\
  !*** ./libs/form-fields/src/lib/counter.component.ts ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _CounterComponent;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.CounterComponent = void 0;
var core_1 = __webpack_require__(/*! @angular/core */ 37580);
var forms_1 = __webpack_require__(/*! @angular/forms */ 34456);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @angular/common */ 60316);
var i2 = __webpack_require__(/*! @angular/forms */ 34456);
var i3 = __webpack_require__(/*! @angular/material/core */ 74646);
var i4 = __webpack_require__(/*! ../../../components/src/lib/icon.component */ 69434);
var i5 = __webpack_require__(/*! ../../../components/src/lib/limit-input.directive */ 62897);
function CounterComponent_span_5_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "span");
    i0.ɵɵtext(1);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r0 = i0.ɵɵnextContext();
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", (ctx_r0.render_fn ? ctx_r0.render_fn(ctx_r0.value) : ctx_r0.value) || "0", " ");
  }
}
var CounterComponent = /*#__PURE__*/function () {
  function CounterComponent() {
    _classCallCheck(this, CounterComponent);
    /** Size of a single step */
    this.step = 1;
    /** Maximum amount for the counter */
    this.max = 999;
    /** Minimum amount for the counter */
    this.min = 0;
    this.focused = false;
  }
  /**
   * Add the `step` to the current value
   */
  return _createClass(CounterComponent, [{
    key: "add",
    value: function add() {
      if (!this.value) {
        this.value = this.min || 0;
      }
      var step = this.ctrl_key ? 100 * this.step : this.shift_key ? 10 * this.step : this.step || 1;
      this.value += step;
      if (this.value > this.max) {
        this.value = this.max || 10;
      }
      this.setValue(this.value);
    }
    /** Remove the `step` from the current value */
  }, {
    key: "remove",
    value: function remove() {
      if (!this.value) {
        this.value = this.min || 0;
      }
      var step = this.ctrl_key ? 100 * this.step : this.shift_key ? 10 * this.step : this.step || 1;
      this.value -= step;
      if (this.value < this.min) {
        this.value = this.min || 0;
      }
      this.setValue(this.value);
    }
    /**
     * Update the form field value
     * @param new_value New value to set on the form field
     */
  }, {
    key: "setValue",
    value: function setValue(new_value) {
      if (new_value < this.min) new_value = this.min;
      if (new_value > this.max) new_value = this.max;
      if (new_value / this.step % 1 !== 0) {
        new_value = Math.round(new_value * (1 / this.step)) / (1 / this.step);
      }
      this.value = new_value;
      /* istanbul ignore else */
      if (this._onChange) {
        this._onChange(new_value);
      }
    }
    /**
     * Update local value when form control value is changed
     * @param value The new value for the component
     */
  }, {
    key: "writeValue",
    value: function writeValue(value) {
      this.value = value;
    }
    /* istanbul ignore next */
    /**
     * Registers a callback function that is called when the control's value changes in the UI.
     * @param fn The callback function to register
     */
  }, {
    key: "registerOnChange",
    value: function registerOnChange(fn) {
      this._onChange = fn;
    }
    /* istanbul ignore next */
    /**
     * Registers a callback function is called by the forms API on initialization to update the form model on blur.
     * @param fn The callback function to register
     */
  }, {
    key: "registerOnTouched",
    value: function registerOnTouched(fn) {
      this._onTouch = fn;
    }
  }]);
}();
_CounterComponent = CounterComponent;
_CounterComponent.ɵfac = function CounterComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _CounterComponent)();
};
_CounterComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _CounterComponent,
  selectors: [["a-counter"]],
  inputs: {
    step: "step",
    max: "max",
    min: "min",
    render_fn: "render_fn"
  },
  features: [i0.ɵɵProvidersFeature([{
    provide: forms_1.NG_VALUE_ACCESSOR,
    /* istanbul ignore next */
    useExisting: (0, core_1.forwardRef)(function () {
      return _CounterComponent;
    }),
    multi: true
  }])],
  decls: 10,
  vars: 4,
  consts: [["counter", "", 1, "flex", "items-center", "text-base", "space-x-2", "p-2", 3, "keydown.shift", "keydown.control", "keydown.meta", "keyup.shift", "keyup.control", "keyup.meta"], ["decrease", "", "icon", "", "matRipple", "", "type", "button", 1, "border", "border-error", "text-error", "rounded", "h-10", "w-10", 3, "click", "disabled"], ["value", "", 1, "relative", "p-1", "flex", "items-center", "justify-center", "w-16", "h-10", "rounded", "border", "border-base-300"], [4, "ngIf"], ["type", "text", "limitInput", "", 1, "absolute", "inset-0", "opacity-0", "focus:opacity-100", "p-2", 3, "ngModelChange", "focus", "blur", "ngModel"], ["increase", "", "icon", "", "matRipple", "", "type", "button", 1, "border", "border-success", "text-success", "rounded", "h-10", "w-10", 3, "click", "disabled"]],
  template: function CounterComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵelementStart(0, "div", 0);
      i0.ɵɵlistener("keydown.shift", function CounterComponent_Template_div_keydown_shift_0_listener() {
        return ctx.shift_key = true;
      }, false, i0.ɵɵresolveWindow)("keydown.control", function CounterComponent_Template_div_keydown_control_0_listener() {
        return ctx.ctrl_key = true;
      }, false, i0.ɵɵresolveWindow)("keydown.meta", function CounterComponent_Template_div_keydown_meta_0_listener() {
        return ctx.ctrl_key = true;
      }, false, i0.ɵɵresolveWindow)("keyup.shift", function CounterComponent_Template_div_keyup_shift_0_listener() {
        return ctx.shift_key = false;
      }, false, i0.ɵɵresolveWindow)("keyup.control", function CounterComponent_Template_div_keyup_control_0_listener() {
        return ctx.ctrl_key = false;
      }, false, i0.ɵɵresolveWindow)("keyup.meta", function CounterComponent_Template_div_keyup_meta_0_listener() {
        return ctx.ctrl_key = false;
      }, false, i0.ɵɵresolveWindow);
      i0.ɵɵelementStart(1, "button", 1);
      i0.ɵɵlistener("click", function CounterComponent_Template_button_click_1_listener() {
        return ctx.remove();
      });
      i0.ɵɵelementStart(2, "app-icon");
      i0.ɵɵtext(3, "remove");
      i0.ɵɵelementEnd()();
      i0.ɵɵelementStart(4, "div", 2);
      i0.ɵɵtemplate(5, CounterComponent_span_5_Template, 2, 1, "span", 3);
      i0.ɵɵelementStart(6, "input", 4);
      i0.ɵɵtwoWayListener("ngModelChange", function CounterComponent_Template_input_ngModelChange_6_listener($event) {
        i0.ɵɵtwoWayBindingSet(ctx.value, $event) || (ctx.value = $event);
        return $event;
      });
      i0.ɵɵlistener("focus", function CounterComponent_Template_input_focus_6_listener() {
        return ctx.focused = true;
      })("blur", function CounterComponent_Template_input_blur_6_listener() {
        ctx.setValue(+ctx.value);
        return ctx.focused = false;
      });
      i0.ɵɵelementEnd()();
      i0.ɵɵelementStart(7, "button", 5);
      i0.ɵɵlistener("click", function CounterComponent_Template_button_click_7_listener() {
        return ctx.add();
      });
      i0.ɵɵelementStart(8, "app-icon");
      i0.ɵɵtext(9, "add");
      i0.ɵɵelementEnd()()();
    }
    if (rf & 2) {
      i0.ɵɵadvance();
      i0.ɵɵproperty("disabled", !ctx.value || ctx.value === ctx.min);
      i0.ɵɵadvance(4);
      i0.ɵɵproperty("ngIf", !ctx.focused);
      i0.ɵɵadvance();
      i0.ɵɵtwoWayProperty("ngModel", ctx.value);
      i0.ɵɵadvance();
      i0.ɵɵproperty("disabled", ctx.value === ctx.max);
    }
  },
  dependencies: [i1.NgIf, i2.DefaultValueAccessor, i2.NgControlStatus, i2.NgModel, i3.MatRipple, i4.IconComponent, i5.LimitInputDirective]
});
exports.CounterComponent = CounterComponent;

/***/ }),

/***/ 89058:
/*!*************************************************************!*\
  !*** ./libs/form-fields/src/lib/date-calendar.component.ts ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _callSuper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/callSuper.js */ 8513)["default"]);
var _inherits = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/inherits.js */ 58160)["default"]);
var _DateCalendarComponent;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.DateCalendarComponent = void 0;
var core_1 = __webpack_require__(/*! @angular/core */ 37580);
var forms_1 = __webpack_require__(/*! @angular/forms */ 34456);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var date_fns_1 = __webpack_require__(/*! date-fns */ 25773);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @placeos/common */ 22797);
var i2 = __webpack_require__(/*! @angular/common */ 60316);
var i3 = __webpack_require__(/*! @angular/material/core */ 74646);
var i4 = __webpack_require__(/*! ../../../components/src/lib/icon.component */ 69434);
function DateCalendarComponent_div_13_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 10);
    i0.ɵɵtext(1);
    i0.ɵɵpipe(2, "date");
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var day_r1 = ctx.$implicit;
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", i0.ɵɵpipeBind2(2, 1, day_r1 == null ? null : day_r1.id, "EE"), " ");
  }
}
function DateCalendarComponent_button_16_div_3_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelement(0, "div", 14);
  }
}
function DateCalendarComponent_button_16_Template(rf, ctx) {
  if (rf & 1) {
    var _r2 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "button", 11);
    i0.ɵɵlistener("click", function DateCalendarComponent_button_16_Template_button_click_0_listener() {
      var day_r3 = i0.ɵɵrestoreView(_r2).$implicit;
      var ctx_r3 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r3.setValue(day_r3.id));
    });
    i0.ɵɵtext(1);
    i0.ɵɵpipe(2, "date");
    i0.ɵɵtemplate(3, DateCalendarComponent_button_16_div_3_Template, 1, 0, "div", 12);
    i0.ɵɵelement(4, "div", 13);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var day_r3 = ctx.$implicit;
    var ctx_r3 = i0.ɵɵnextContext();
    i0.ɵɵclassProp("hover:bg-base-100", day_r3.id !== ctx_r3.active_date)("!text-base-300", !day_r3.is_month)("text-secondary-content", day_r3.id === ctx_r3.active_date)("text-base-content", day_r3.id !== ctx_r3.active_date)("bg-secondary", day_r3.id === ctx_r3.active_date)("font-normal", day_r3.id !== ctx_r3.active_date);
    i0.ɵɵproperty("disabled", day_r3.id < ctx_r3.from || day_r3.id > ctx_r3.to);
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", i0.ɵɵpipeBind2(2, 15, day_r3.id, "d"), " ");
    i0.ɵɵadvance(2);
    i0.ɵɵproperty("ngIf", ctx_r3.today === day_r3.id);
  }
}
var DateCalendarComponent = /*#__PURE__*/function (_common_1$AsyncHandle) {
  function DateCalendarComponent(_settings) {
    var _this;
    _classCallCheck(this, DateCalendarComponent);
    _this = _callSuper(this, DateCalendarComponent);
    _this._settings = _settings;
    _this.from = 0;
    _this.to = Date.now() * 10;
    _this.offset_weekday = 0;
    _this.today = (0, date_fns_1.startOfDay)(Date.now()).valueOf();
    _this.date = Date.now();
    _this.active_date = (0, date_fns_1.startOfDay)(Date.now()).valueOf();
    _this.offset = 0;
    _this.date_list = [];
    _this.registerOnChange = function (fn) {
      return _this._onChange = fn;
    };
    _this.registerOnTouched = function (fn) {
      return _this._onTouch = fn;
    };
    return _this;
  }
  _inherits(DateCalendarComponent, _common_1$AsyncHandle);
  return _createClass(DateCalendarComponent, [{
    key: "ngOnInit",
    value: function ngOnInit() {
      this.generateDates();
    }
  }, {
    key: "ngOnChanges",
    value: function ngOnChanges(changes) {
      if (changes.offset_weekday) {
        this.generateDates();
      }
    }
  }, {
    key: "setValue",
    value: function setValue(new_value) {
      if (new_value < this.from || new_value >= this.to) return;
      var date = new Date(new_value);
      this.date = (0, date_fns_1.set)(this.date, {
        date: date.getDate(),
        month: date.getMonth(),
        year: date.getFullYear()
      }).valueOf();
      this.active_date = (0, date_fns_1.startOfDay)(this.date).valueOf();
      if (this._onChange) this._onChange(new_value);
    }
  }, {
    key: "writeValue",
    value: function writeValue(value) {
      this.date = value;
      this.active_date = (0, date_fns_1.startOfDay)(value).valueOf();
      this.offset = 0;
      this.generateDates();
    }
  }, {
    key: "changeMonth",
    value: function changeMonth(change) {
      this.offset += change;
      this.generateDates();
    }
  }, {
    key: "generateDates",
    value: function generateDates() {
      var offset = this._settings.get('app.week_start') || this.offset_weekday;
      var date = (0, date_fns_1.addMonths)(this.date, this.offset);
      var start = (0, date_fns_1.startOfWeek)((0, date_fns_1.startOfMonth)(date), {
        weekStartsOn: offset
      });
      var now = (0, date_fns_1.startOfDay)(Date.now());
      var list = [];
      while (list.length < 42) {
        list.push({
          id: start.valueOf(),
          is_past: (0, date_fns_1.isBefore)(start, now),
          is_month: (0, date_fns_1.isSameMonth)(start, date)
        });
        start = (0, date_fns_1.addDays)(start, 1);
      }
      this.date_list = list;
    }
  }]);
}(common_1.AsyncHandler);
_DateCalendarComponent = DateCalendarComponent;
_DateCalendarComponent.ɵfac = function DateCalendarComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _DateCalendarComponent)(i0.ɵɵdirectiveInject(i1.SettingsService));
};
_DateCalendarComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _DateCalendarComponent,
  selectors: [["date-calendar"]],
  inputs: {
    from: "from",
    to: "to",
    offset_weekday: "offset_weekday"
  },
  features: [i0.ɵɵProvidersFeature([{
    provide: forms_1.NG_VALUE_ACCESSOR,
    useExisting: (0, core_1.forwardRef)(function () {
      return _DateCalendarComponent;
    }),
    multi: true
  }]), i0.ɵɵInheritDefinitionFeature, i0.ɵɵNgOnChangesFeature],
  decls: 17,
  vars: 12,
  consts: [[1, "p-2"], [1, "flex", "items-center", "justify-between"], [1, "pl-1.5", "pr-2", "font-medium"], [1, "flex", "items-center"], ["icon", "", "matRipple", "", "name", "schedule-next-month", 3, "click", "disabled"], ["icon", "", "matRipple", "", "name", "schedule-previous-month", 3, "click", "disabled"], [1, "flex", "items-center", "text-sm", "mb-2", "pb-2", "border-b", "border-base-200"], ["class", "flex-1 opacity-60 text-center", 4, "ngFor", "ngForOf"], [1, "flex", "items-center", "justify-between", "flex-wrap"], ["icon", "", "name", "schedule-set-date", "class", "min-w-[14%] w-9 h-9 relative overflow-visible my-0.5", 3, "hover:bg-base-100", "!text-base-300", "text-secondary-content", "text-base-content", "bg-secondary", "font-normal", "disabled", "click", 4, "ngFor", "ngForOf"], [1, "flex-1", "opacity-60", "text-center"], ["icon", "", "name", "schedule-set-date", 1, "min-w-[14%]", "w-9", "h-9", "relative", "overflow-visible", "my-0.5", 3, "click", "disabled"], ["class", "absolute -inset-[2px] border border-secondary rounded-full overflow-hidden", "matRipple", "", 4, "ngIf"], ["matRipple", "", 1, "absolute", "inset-0", "overflow-hidden", "rounded-full"], ["matRipple", "", 1, "absolute", "-inset-[2px]", "border", "border-secondary", "rounded-full", "overflow-hidden"]],
  template: function DateCalendarComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵelementStart(0, "div", 0)(1, "div", 1)(2, "div", 2);
      i0.ɵɵtext(3);
      i0.ɵɵpipe(4, "date");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(5, "div", 3)(6, "button", 4);
      i0.ɵɵlistener("click", function DateCalendarComponent_Template_button_click_6_listener() {
        return ctx.changeMonth(-1);
      });
      i0.ɵɵelementStart(7, "app-icon");
      i0.ɵɵtext(8, "chevron_left");
      i0.ɵɵelementEnd()();
      i0.ɵɵelementStart(9, "button", 5);
      i0.ɵɵlistener("click", function DateCalendarComponent_Template_button_click_9_listener() {
        return ctx.changeMonth(1);
      });
      i0.ɵɵelementStart(10, "app-icon");
      i0.ɵɵtext(11, "chevron_right");
      i0.ɵɵelementEnd()()()();
      i0.ɵɵelementStart(12, "div", 6);
      i0.ɵɵtemplate(13, DateCalendarComponent_div_13_Template, 3, 4, "div", 7);
      i0.ɵɵpipe(14, "slice");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(15, "div", 8);
      i0.ɵɵtemplate(16, DateCalendarComponent_button_16_Template, 5, 18, "button", 9);
      i0.ɵɵelementEnd()();
    }
    if (rf & 2) {
      i0.ɵɵadvance(3);
      i0.ɵɵtextInterpolate1(" ", i0.ɵɵpipeBind2(4, 5, (ctx.date_list[6] == null ? null : ctx.date_list[6].id) || ctx.date, "LLLL YYYY"), " ");
      i0.ɵɵadvance(3);
      i0.ɵɵproperty("disabled", (ctx.date_list[0] == null ? null : ctx.date_list[0].id) < ctx.from);
      i0.ɵɵadvance(3);
      i0.ɵɵproperty("disabled", (ctx.date_list[34] == null ? null : ctx.date_list[34].id) > ctx.to);
      i0.ɵɵadvance(4);
      i0.ɵɵproperty("ngForOf", i0.ɵɵpipeBind3(14, 8, ctx.date_list, 0, 7));
      i0.ɵɵadvance(3);
      i0.ɵɵproperty("ngForOf", ctx.date_list);
    }
  },
  dependencies: [i2.NgForOf, i2.NgIf, i3.MatRipple, i4.IconComponent, i2.SlicePipe, i2.DatePipe]
});
exports.DateCalendarComponent = DateCalendarComponent;

/***/ }),

/***/ 19608:
/*!**********************************************************!*\
  !*** ./libs/form-fields/src/lib/date-field.component.ts ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _callSuper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/callSuper.js */ 8513)["default"]);
var _inherits = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/inherits.js */ 58160)["default"]);
var _DateFieldComponent;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.DateFieldComponent = exports.TimezoneDiffRange = void 0;
var core_1 = __webpack_require__(/*! @angular/core */ 37580);
var forms_1 = __webpack_require__(/*! @angular/forms */ 34456);
var custom_tooltip_component_1 = __webpack_require__(/*! libs/components/src/lib/custom-tooltip.component */ 22238);
var date_fns_1 = __webpack_require__(/*! date-fns */ 25773);
var async_handler_class_1 = __webpack_require__(/*! libs/common/src/lib/async-handler.class */ 75354);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var common_2 = __webpack_require__(/*! @angular/common */ 60316);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var _c0 = ["*"];
function DateFieldComponent_Conditional_3_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵtext(0);
    i0.ɵɵpipe(1, "date");
  }
  if (rf & 2) {
    var ctx_r0 = i0.ɵɵnextContext();
    i0.ɵɵtextInterpolate1(" ", i0.ɵɵpipeBind2(1, 1, ctx_r0.date, ctx_r0.date_format), " ");
  }
}
function DateFieldComponent_Conditional_4_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "span", 4);
    i0.ɵɵtext(1, "No Date Selected");
    i0.ɵɵelementEnd();
  }
}
function DateFieldComponent_div_5_span_1_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "span");
    i0.ɵɵtext(1);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r0 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate(ctx_r0.start_of_day);
  }
}
function DateFieldComponent_div_5_span_2_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "span");
    i0.ɵɵtext(1, " - ");
    i0.ɵɵelementEnd();
  }
}
function DateFieldComponent_div_5_span_3_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "span");
    i0.ɵɵtext(1);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r0 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate(ctx_r0.end_of_day);
  }
}
function DateFieldComponent_div_5_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 9);
    i0.ɵɵtemplate(1, DateFieldComponent_div_5_span_1_Template, 2, 1, "span", 8)(2, DateFieldComponent_div_5_span_2_Template, 2, 0, "span", 8)(3, DateFieldComponent_div_5_span_3_Template, 2, 1, "span", 8);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r0 = i0.ɵɵnextContext();
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", ctx_r0.range !== 2);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", ctx_r0.range === 0);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", ctx_r0.range !== 1);
  }
}
function DateFieldComponent_span_10_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "span");
    i0.ɵɵprojection(1);
    i0.ɵɵelementEnd();
  }
}
function DateFieldComponent_ng_template_11_Template(rf, ctx) {
  if (rf & 1) {
    var _r2 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 10)(1, "date-calendar", 11);
    i0.ɵɵlistener("ngModelChange", function DateFieldComponent_ng_template_11_Template_date_calendar_ngModelChange_1_listener($event) {
      i0.ɵɵrestoreView(_r2);
      var ctx_r0 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r0.setValue($event));
    });
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var ctx_r0 = i0.ɵɵnextContext();
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngModel", ctx_r0.date || ctx_r0.now)("from", ctx_r0.from)("to", ctx_r0.until)("offset_weekday", ctx_r0.week_start);
  }
}
var TimezoneDiffRange;
(function (TimezoneDiffRange) {
  TimezoneDiffRange[TimezoneDiffRange["Both"] = 0] = "Both";
  TimezoneDiffRange[TimezoneDiffRange["Start"] = 1] = "Start";
  TimezoneDiffRange[TimezoneDiffRange["End"] = 2] = "End";
})(TimezoneDiffRange || (exports.TimezoneDiffRange = TimezoneDiffRange = {}));
var DateFieldComponent = /*#__PURE__*/function (_async_handler_class_) {
  function DateFieldComponent(_injector) {
    var _this;
    _classCallCheck(this, DateFieldComponent);
    _this = _callSuper(this, DateFieldComponent);
    _this._injector = _injector;
    /** Earliest date available the user is allowed to pick */
    _this.from_date = (0, date_fns_1.startOfDay)(Date.now()).valueOf();
    /** Index of the day to start the week on when displaying the calendar */
    _this.week_start = 0;
    _this.use_24hr = false;
    _this["short"] = false;
    _this.timezone = '';
    _this.range = TimezoneDiffRange.Both;
    _this.now = Date.now();
    _this._date_pipe = new common_2.DatePipe('en');
    _this._local_tz = (0, common_1.getTimezoneOffsetString)(Intl.DateTimeFormat().resolvedOptions().timeZone);
    return _this;
  }
  /** First allowed date on the calendar */
  _inherits(DateFieldComponent, _async_handler_class_);
  return _createClass(DateFieldComponent, [{
    key: "date_format",
    get: function get() {
      return this["short"] ? 'MMM d, yyyy' : 'MMMM d, yyyy';
    }
  }, {
    key: "time_format",
    get: function get() {
      return this.use_24hr ? 'HH : mm' : 'h : mm a';
    }
  }, {
    key: "start_of_day",
    get: function get() {
      var start = (0, date_fns_1.startOfDay)(this.date).valueOf();
      var format = "MMM d, ".concat(this.time_format).concat(this.range === 1 ? ' (z)' : '');
      return this._date_pipe.transform(start, format, this.tz);
    }
  }, {
    key: "end_of_day",
    get: function get() {
      var end = (0, date_fns_1.endOfDay)(this.date).valueOf();
      var format = "MMM d, ".concat(this.time_format).concat(this.range === 1 ? ' (z)' : '');
      return this._date_pipe.transform(end, format, this.tz);
    }
  }, {
    key: "has_error",
    get: function get() {
      var _this$_control, _this$_control2;
      return ((_this$_control = this._control) === null || _this$_control === void 0 ? void 0 : _this$_control.invalid) && ((_this$_control2 = this._control) === null || _this$_control2 === void 0 ? void 0 : _this$_control2.touched);
    }
  }, {
    key: "tz",
    get: function get() {
      var tz = this.timezone;
      if (!tz) return '';
      var tz_offset = (0, common_1.getTimezoneOffsetString)(tz);
      return tz_offset === this._local_tz ? '' : tz_offset;
    }
  }, {
    key: "from",
    get: function get() {
      return new Date(this.from_date) || (0, date_fns_1.startOfDay)(new Date());
    }
    /** Current date value */
  }, {
    key: "until",
    get: function get() {
      return new Date(this.to_date) || (0, date_fns_1.addYears)((0, date_fns_1.endOfDay)(new Date()), 1);
    }
  }, {
    key: "ngOnInit",
    value: function ngOnInit() {
      this._control = this._injector.get(forms_1.NgControl);
      this.date = Date.now();
    }
    /**
     * Update the form field value
     * @param new_value New value to set on the form field
     */
  }, {
    key: "setValue",
    value: function setValue(new_value) {
      var _this$_tooltip;
      // Keep hours and minutes of the old date
      var old_date = new Date(this.date);
      var new_date = (0, date_fns_1.set)(new_value, {
        hours: old_date.getHours(),
        minutes: old_date.getMinutes()
      }).valueOf();
      // Check that new date is before from
      if (new_date < this.from.valueOf()) {
        new_date = this.from.valueOf();
      }
      this.date = new_date;
      if (this._onChange) {
        this._onChange(new_date);
      }
      (_this$_tooltip = this._tooltip) === null || _this$_tooltip === void 0 || _this$_tooltip.close();
    }
    /* istanbul ignore next */
    /**
     * Update local value when form control value is changed
     * @param value The new value for the component
     */
  }, {
    key: "writeValue",
    value: function writeValue(value) {
      var _this$_tooltip2;
      this.date = value;
      (_this$_tooltip2 = this._tooltip) === null || _this$_tooltip2 === void 0 || _this$_tooltip2.close();
    }
    /* istanbul ignore next */
    /**
     * Registers a callback function that is called when the control's value changes in the UI.
     * @param fn The callback function to register
     */
  }, {
    key: "registerOnChange",
    value: function registerOnChange(fn) {
      this._onChange = fn;
    }
    /* istanbul ignore next */
    /**
     * Registers a callback function is called by the forms API on initialization to update the form model on blur.
     * @param fn The callback function to register
     */
  }, {
    key: "registerOnTouched",
    value: function registerOnTouched(fn) {
      this._onTouch = fn;
    }
  }, {
    key: "setDisabledState",
    value: function setDisabledState(disabled) {
      this.disabled = disabled;
    }
  }]);
}(async_handler_class_1.AsyncHandler);
_DateFieldComponent = DateFieldComponent;
_DateFieldComponent.ɵfac = function DateFieldComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _DateFieldComponent)(i0.ɵɵdirectiveInject(i0.Injector));
};
_DateFieldComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _DateFieldComponent,
  selectors: [["a-date-field"]],
  viewQuery: function DateFieldComponent_Query(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵviewQuery(custom_tooltip_component_1.CustomTooltipComponent, 5);
    }
    if (rf & 2) {
      var _t;
      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx._tooltip = _t.first);
    }
  },
  inputs: {
    from_date: [0, "from", "from_date"],
    to_date: [0, "to", "to_date"],
    week_start: "week_start",
    use_24hr: "use_24hr",
    disabled: "disabled",
    "short": "short",
    timezone: "timezone",
    range: "range"
  },
  features: [i0.ɵɵProvidersFeature([{
    provide: forms_1.NG_VALUE_ACCESSOR,
    useExisting: (0, core_1.forwardRef)(function () {
      return _DateFieldComponent;
    }),
    multi: true
  }]), i0.ɵɵInheritDefinitionFeature],
  ngContentSelectors: _c0,
  decls: 13,
  vars: 7,
  consts: [["calendar_picker", ""], ["customTooltip", "", "yPosition", "top", "matRipple", "", 1, "flex", "items-center", "justify-between", "border", "border-neutral", "rounded", "h-12", "w-full", 3, "content", "disabled"], [1, "flex", "flex-col", "px-4", "py-2", "flex-1", "truncate", "w-1/2", "text-left", "leading-tight"], [1, "font-normal", "text-base"], [1, "opacity-30"], ["class", "text-xs opacity-30 truncate", 4, "ngIf"], [1, "h-10", "w-10", "flex", "items-center", "justify-center", "text-2xl"], [1, "error", "h-5", "p-1", "text-xs", "text-error"], [4, "ngIf"], [1, "text-xs", "opacity-30", "truncate"], [1, "relative", "w-[18rem]", "rounded", "bg-base-100", "px-2", "py-4"], [3, "ngModelChange", "ngModel", "from", "to", "offset_weekday"]],
  template: function DateFieldComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵprojectionDef();
      i0.ɵɵelementStart(0, "button", 1)(1, "div", 2)(2, "div", 3);
      i0.ɵɵtemplate(3, DateFieldComponent_Conditional_3_Template, 2, 4)(4, DateFieldComponent_Conditional_4_Template, 2, 0, "span", 4);
      i0.ɵɵelementEnd();
      i0.ɵɵtemplate(5, DateFieldComponent_div_5_Template, 4, 3, "div", 5);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(6, "div", 6)(7, "app-icon");
      i0.ɵɵtext(8, "today");
      i0.ɵɵelementEnd()()();
      i0.ɵɵelementStart(9, "div", 7);
      i0.ɵɵtemplate(10, DateFieldComponent_span_10_Template, 2, 0, "span", 8);
      i0.ɵɵelementEnd();
      i0.ɵɵtemplate(11, DateFieldComponent_ng_template_11_Template, 2, 4, "ng-template", null, 0, i0.ɵɵtemplateRefExtractor);
    }
    if (rf & 2) {
      var calendar_picker_r3 = i0.ɵɵreference(12);
      i0.ɵɵclassProp("opacity-30", ctx.disabled);
      i0.ɵɵproperty("content", calendar_picker_r3)("disabled", ctx.disabled);
      i0.ɵɵadvance(3);
      i0.ɵɵconditional(ctx.date ? 3 : 4);
      i0.ɵɵadvance(2);
      i0.ɵɵproperty("ngIf", ctx.timezone && ctx.tz);
      i0.ɵɵadvance(5);
      i0.ɵɵproperty("ngIf", ctx.has_error);
    }
  }
});
exports.DateFieldComponent = DateFieldComponent;

/***/ }),

/***/ 29466:
/*!*******************************************************************!*\
  !*** ./libs/form-fields/src/lib/date-range-calendar.component.ts ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _DateRangeCalendarComponent;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.DateRangeCalendarComponent = void 0;
var core_1 = __webpack_require__(/*! @angular/core */ 37580);
var date_fns_1 = __webpack_require__(/*! date-fns */ 25773);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @angular/common */ 60316);
var i2 = __webpack_require__(/*! @angular/material/core */ 74646);
var i3 = __webpack_require__(/*! ../../../components/src/lib/icon.component */ 69434);
function DateRangeCalendarComponent_div_13_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 8);
    i0.ɵɵtext(1);
    i0.ɵɵpipe(2, "date");
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var weekday_r1 = ctx.$implicit;
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", i0.ɵɵpipeBind2(2, 1, weekday_r1, "EEE"), " ");
  }
}
function DateRangeCalendarComponent_button_14_div_1_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelement(0, "div", 16);
  }
}
function DateRangeCalendarComponent_button_14_div_2_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelement(0, "div", 17);
  }
}
function DateRangeCalendarComponent_button_14_div_3_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelement(0, "div", 18);
  }
}
function DateRangeCalendarComponent_button_14_div_4_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelement(0, "div", 19);
  }
}
function DateRangeCalendarComponent_button_14_div_8_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelement(0, "div", 20);
  }
}
function DateRangeCalendarComponent_button_14_Template(rf, ctx) {
  if (rf & 1) {
    var _r2 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "button", 9);
    i0.ɵɵlistener("click", function DateRangeCalendarComponent_button_14_Template_button_click_0_listener() {
      var day_r3 = i0.ɵɵrestoreView(_r2).$implicit;
      var ctx_r3 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r3.selectDate(day_r3.id));
    })("mouseenter", function DateRangeCalendarComponent_button_14_Template_button_mouseenter_0_listener() {
      var day_r3 = i0.ɵɵrestoreView(_r2).$implicit;
      var ctx_r3 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r3.setHoveredDate(day_r3.id));
    });
    i0.ɵɵtemplate(1, DateRangeCalendarComponent_button_14_div_1_Template, 1, 0, "div", 10)(2, DateRangeCalendarComponent_button_14_div_2_Template, 1, 0, "div", 11)(3, DateRangeCalendarComponent_button_14_div_3_Template, 1, 0, "div", 12)(4, DateRangeCalendarComponent_button_14_div_4_Template, 1, 0, "div", 13);
    i0.ɵɵelementStart(5, "div", 14);
    i0.ɵɵtext(6);
    i0.ɵɵpipe(7, "date");
    i0.ɵɵelementEnd();
    i0.ɵɵtemplate(8, DateRangeCalendarComponent_button_14_div_8_Template, 1, 0, "div", 15);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var day_r3 = ctx.$implicit;
    var ctx_r3 = i0.ɵɵnextContext();
    i0.ɵɵclassProp("text-secondary-content", day_r3.is_start || day_r3.is_end);
    i0.ɵɵproperty("disabled", day_r3.disabled);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", day_r3.is_selected && !day_r3.is_start && !day_r3.is_end);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", day_r3.is_start && ctx_r3.end_after_start);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", day_r3.is_end && ctx_r3.end_after_start);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", day_r3.is_start || day_r3.is_end);
    i0.ɵɵadvance();
    i0.ɵɵclassProp("opacity-30", !day_r3.is_month);
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", i0.ɵɵpipeBind2(7, 11, day_r3.id, "d"), " ");
    i0.ɵɵadvance(2);
    i0.ɵɵproperty("ngIf", day_r3.is_today);
  }
}
var DateRangeCalendarComponent = /*#__PURE__*/function () {
  function DateRangeCalendarComponent() {
    _classCallCheck(this, DateRangeCalendarComponent);
    /** Earliest date available the user is allowed to pick */
    this.from_date = (0, date_fns_1.startOfDay)(Date.now()).valueOf();
    /** Index of the day to start the week on when displaying the calendar */
    this.offset_weekday = 0;
    /** Month to display the calendar for */
    this.month = (0, date_fns_1.startOfDay)(Date.now()).valueOf();
    /** Emitter for when the start date changes */
    this.startChange = new core_1.EventEmitter();
    /** Emitter for when the end date changes */
    this.endChange = new core_1.EventEmitter();
    this.hovered_date = null;
    this.weekdays = [];
    this.month_days = [];
  }
  return _createClass(DateRangeCalendarComponent, [{
    key: "end_after_start",
    get: function get() {
      return this.end && this.end > this.start && !(0, date_fns_1.isSameDay)(this.end, this.start);
    }
  }, {
    key: "ngOnInit",
    value: function ngOnInit() {
      this._setWeekdays();
      this._setMonthDays();
    }
  }, {
    key: "ngOnChanges",
    value: function ngOnChanges(changes) {
      if (changes.offset_weekday) {
        this._setWeekdays();
        this._setMonthDays();
      }
      if (changes.start) {
        this._setMonthDays();
        this.month = this.start || Date.now();
      }
      if (changes.month) {
        this._setMonthDays();
      }
      if (changes.end) this._setMonthDays();
    }
  }, {
    key: "selectDate",
    value: function selectDate(date) {
      if (!this.start || date < this.start) {
        this.start = date;
        this.startChange.emit(date);
      } else {
        this.end = date;
        this.endChange.emit(date);
      }
      this._setMonthDays();
    }
  }, {
    key: "setHoveredDate",
    value: function setHoveredDate(date) {
      if (!this.start) return;
      this.end = date;
      this._setMonthDays();
    }
  }, {
    key: "trackByFn",
    value: function trackByFn(index, day) {
      return day.id;
    }
  }, {
    key: "nextMonth",
    value: function nextMonth() {
      this.month = (0, date_fns_1.addMonths)(this.month, 1).valueOf();
      this._setMonthDays();
    }
  }, {
    key: "previousMonth",
    value: function previousMonth() {
      this.month = (0, date_fns_1.addMonths)(this.month, -1).valueOf();
      this._setMonthDays();
    }
  }, {
    key: "_setMonthDays",
    value: function _setMonthDays() {
      var _this = this;
      var start = (0, date_fns_1.startOfWeek)((0, date_fns_1.startOfMonth)(this.month), {
        weekStartsOn: this.offset_weekday
      });
      this.month_days = Array.from(Array(7 * 6).keys()).map(function (i) {
        var date = (0, date_fns_1.addDays)(start, i).valueOf();
        return {
          id: date,
          disabled: _this.from_date && (0, date_fns_1.isBefore)(date, _this.from_date) || _this.to_date && (0, date_fns_1.isAfter)(date, _this.to_date),
          is_today: (0, date_fns_1.isSameDay)(date, Date.now()),
          is_start: (0, date_fns_1.isSameDay)(date, _this.start),
          is_end: (0, date_fns_1.isSameDay)(date, _this.end),
          is_month: (0, date_fns_1.isSameMonth)(date, _this.month),
          is_selected: _this.end && date >= (0, date_fns_1.startOfDay)(_this.start).valueOf() && date <= (0, date_fns_1.endOfDay)(_this.end).valueOf()
        };
      });
    }
  }, {
    key: "_setWeekdays",
    value: function _setWeekdays() {
      var start = (0, date_fns_1.startOfWeek)(Date.now(), {
        weekStartsOn: this.offset_weekday
      });
      this.weekdays = Array.from(Array(7).keys()).map(function (i) {
        return (0, date_fns_1.addDays)(start, i);
      });
    }
  }]);
}();
_DateRangeCalendarComponent = DateRangeCalendarComponent;
_DateRangeCalendarComponent.ɵfac = function DateRangeCalendarComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _DateRangeCalendarComponent)();
};
_DateRangeCalendarComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _DateRangeCalendarComponent,
  selectors: [["date-range-calendar"]],
  inputs: {
    from_date: [0, "from", "from_date"],
    to_date: [0, "to", "to_date"],
    offset_weekday: "offset_weekday",
    start: "start",
    end: "end",
    month: "month"
  },
  outputs: {
    startChange: "startChange",
    endChange: "endChange"
  },
  features: [i0.ɵɵNgOnChangesFeature],
  decls: 15,
  vars: 7,
  consts: [[1, "flex", "items-center", "justify-between"], ["month", "", 1, "font-medium", "px-2"], [1, "flex", "items-center", "space-x-2"], ["icon", "", "matRipple", "", 3, "click"], [1, "grid", "grid-cols-7", "grid-rows-7", "gap-1", "w-[17.25rem]", "h-[17.25rem]"], [1, "col-span-full", "grid", "grid-cols-7", "border-b", "border-base-200"], ["weekday", "", "class", "relative flex items-center justify-center text-sm opacity-60", 4, "ngFor", "ngForOf"], ["class", "relative h-9 w-9 hover:bg-base-200 rounded-full", 3, "text-secondary-content", "disabled", "click", "mouseenter", 4, "ngFor", "ngForOf", "ngForTrackBy"], ["weekday", "", 1, "relative", "flex", "items-center", "justify-center", "text-sm", "opacity-60"], [1, "relative", "h-9", "w-9", "hover:bg-base-200", "rounded-full", 3, "click", "mouseenter", "disabled"], ["class", "absolute inset-y-0 -inset-x-0.5 border-y border-base-content border-dashed bg-base-200", 4, "ngIf"], ["class", "absolute inset-y-0 -right-0.5 w-[calc(50%+2px)] border-y border-base-content border-dashed bg-base-200", 4, "ngIf"], ["class", "absolute inset-y-0 -left-0.5 w-[calc(50%+2px)] border-y border-base-content border-dashed bg-base-200", 4, "ngIf"], ["class", "absolute inset-0 flex items-center justify-center bg-secondary rounded-full z-10", 4, "ngIf"], ["matRipple", "", 1, "absolute", "inset-0", "flex", "items-center", "justify-center", "rounded-full", "z-20"], ["class", "absolute -inset-[3px] flex items-center justify-center border border-secondary rounded-full z-10", 4, "ngIf"], [1, "absolute", "inset-y-0", "-inset-x-0.5", "border-y", "border-base-content", "border-dashed", "bg-base-200"], [1, "absolute", "inset-y-0", "-right-0.5", "w-[calc(50%+2px)]", "border-y", "border-base-content", "border-dashed", "bg-base-200"], [1, "absolute", "inset-y-0", "-left-0.5", "w-[calc(50%+2px)]", "border-y", "border-base-content", "border-dashed", "bg-base-200"], [1, "absolute", "inset-0", "flex", "items-center", "justify-center", "bg-secondary", "rounded-full", "z-10"], [1, "absolute", "-inset-[3px]", "flex", "items-center", "justify-center", "border", "border-secondary", "rounded-full", "z-10"]],
  template: function DateRangeCalendarComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵelementStart(0, "div", 0)(1, "div", 1);
      i0.ɵɵtext(2);
      i0.ɵɵpipe(3, "date");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(4, "div", 2)(5, "button", 3);
      i0.ɵɵlistener("click", function DateRangeCalendarComponent_Template_button_click_5_listener() {
        return ctx.previousMonth();
      });
      i0.ɵɵelementStart(6, "app-icon");
      i0.ɵɵtext(7, "chevron_left");
      i0.ɵɵelementEnd()();
      i0.ɵɵelementStart(8, "button", 3);
      i0.ɵɵlistener("click", function DateRangeCalendarComponent_Template_button_click_8_listener() {
        return ctx.nextMonth();
      });
      i0.ɵɵelementStart(9, "app-icon");
      i0.ɵɵtext(10, "chevron_right");
      i0.ɵɵelementEnd()()()();
      i0.ɵɵelementStart(11, "div", 4)(12, "div", 5);
      i0.ɵɵtemplate(13, DateRangeCalendarComponent_div_13_Template, 3, 4, "div", 6);
      i0.ɵɵelementEnd();
      i0.ɵɵtemplate(14, DateRangeCalendarComponent_button_14_Template, 9, 14, "button", 7);
      i0.ɵɵelementEnd();
    }
    if (rf & 2) {
      i0.ɵɵadvance(2);
      i0.ɵɵtextInterpolate1(" ", i0.ɵɵpipeBind2(3, 4, ctx.month, "MMMM yyyy"), " ");
      i0.ɵɵadvance(11);
      i0.ɵɵproperty("ngForOf", ctx.weekdays);
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngForOf", ctx.month_days)("ngForTrackBy", ctx.trackByFn);
    }
  },
  dependencies: [i1.NgForOf, i1.NgIf, i2.MatRipple, i3.IconComponent, i1.DatePipe]
});
exports.DateRangeCalendarComponent = DateRangeCalendarComponent;

/***/ }),

/***/ 5472:
/*!****************************************************************!*\
  !*** ./libs/form-fields/src/lib/date-range-field.component.ts ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _callSuper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/callSuper.js */ 8513)["default"]);
var _inherits = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/inherits.js */ 58160)["default"]);
var _DateRangeFieldComponent;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.DateRangeFieldComponent = void 0;
var forms_1 = __webpack_require__(/*! @angular/forms */ 34456);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var components_1 = __webpack_require__(/*! @placeos/components */ 51588);
var date_fns_1 = __webpack_require__(/*! date-fns */ 25773);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var _c0 = ["startDate"];
var _c1 = ["endDate"];
var _c2 = [[["input", "startDate", ""]], [["input", "endDate", ""]]];
var _c3 = ["input[startDate]", "input[endDate]"];
function DateRangeFieldComponent_ng_template_14_Template(rf, ctx) {
  if (rf & 1) {
    var _r1 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 5)(1, "date-range-calendar", 6);
    i0.ɵɵlistener("startChange", function DateRangeFieldComponent_ng_template_14_Template_date_range_calendar_startChange_1_listener($event) {
      i0.ɵɵrestoreView(_r1);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.setStartDate($event));
    })("endChange", function DateRangeFieldComponent_ng_template_14_Template_date_range_calendar_endChange_1_listener($event) {
      i0.ɵɵrestoreView(_r1);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.setEndDate($event));
    });
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance();
    i0.ɵɵproperty("month", (ctx_r1.start_date == null ? null : ctx_r1.start_date.control == null ? null : ctx_r1.start_date.control.value) || ctx_r1.now)("from", ctx_r1.from)("to", ctx_r1.until)("offset_weekday", ctx_r1.week_start);
  }
}
var DateRangeFieldComponent = /*#__PURE__*/function (_common_1$AsyncHandle) {
  function DateRangeFieldComponent() {
    var _this;
    _classCallCheck(this, DateRangeFieldComponent);
    _this = _callSuper(this, DateRangeFieldComponent, arguments);
    /** Earliest date available the user is allowed to pick */
    _this.from_date = (0, date_fns_1.startOfDay)(Date.now()).valueOf();
    /** Index of the day to start the week on when displaying the calendar */
    _this.week_start = 0;
    /** Whether form control is disabled */
    _this.disabled = false;
    _this["short"] = false;
    _this.now = Date.now();
    return _this;
  }
  _inherits(DateRangeFieldComponent, _common_1$AsyncHandle);
  return _createClass(DateRangeFieldComponent, [{
    key: "setStartDate",
    value: function setStartDate(date) {
      if (!this.start_date) return;
      this.start_date.control.setValue(date);
    }
  }, {
    key: "setEndDate",
    value: function setEndDate(date) {
      var _this$_tooltip;
      (_this$_tooltip = this._tooltip) === null || _this$_tooltip === void 0 || _this$_tooltip.close();
      if (!this.end_date) return;
      this.end_date.control.setValue(date);
    }
  }]);
}(common_1.AsyncHandler);
_DateRangeFieldComponent = DateRangeFieldComponent;
_DateRangeFieldComponent.ɵfac = /*@__PURE__*/function () {
  var ɵDateRangeFieldComponent_BaseFactory;
  return function DateRangeFieldComponent_Factory(__ngFactoryType__) {
    return (ɵDateRangeFieldComponent_BaseFactory || (ɵDateRangeFieldComponent_BaseFactory = i0.ɵɵgetInheritedFactory(_DateRangeFieldComponent)))(__ngFactoryType__ || _DateRangeFieldComponent);
  };
}();
_DateRangeFieldComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _DateRangeFieldComponent,
  selectors: [["date-range-field"]],
  contentQueries: function DateRangeFieldComponent_ContentQueries(rf, ctx, dirIndex) {
    if (rf & 1) {
      i0.ɵɵcontentQuery(dirIndex, _c0, 5, forms_1.NgControl);
      i0.ɵɵcontentQuery(dirIndex, _c1, 5, forms_1.NgControl);
    }
    if (rf & 2) {
      var _t;
      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.start_date = _t.first);
      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.end_date = _t.first);
    }
  },
  viewQuery: function DateRangeFieldComponent_Query(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵviewQuery(components_1.CustomTooltipComponent, 5);
    }
    if (rf & 2) {
      var _t;
      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx._tooltip = _t.first);
    }
  },
  inputs: {
    from_date: [0, "from", "from_date"],
    to_date: [0, "to", "to_date"],
    week_start: "week_start",
    disabled: "disabled",
    "short": "short"
  },
  features: [i0.ɵɵInheritDefinitionFeature],
  ngContentSelectors: _c3,
  decls: 16,
  vars: 12,
  consts: [["calendar_picker", ""], ["matRipple", "", "type", "button", "role", "date-picker", "customTooltip", "", "yPosition", "top", 1, "flex", "items-center", "rounded", "px-4", "py-2", "border", "border-neutral", "hover:border-base-content", "focus:outline-2", "outline-base-content", "space-x-2", "min-w-max", 3, "content", "disabled"], [1, "flex-1", "whitespace-nowrap"], [1, "text-2xl"], [1, "hidden"], [1, "relative", "w-[18.25rem]", "rounded", "bg-base-100", "px-2", "py-4"], [3, "startChange", "endChange", "month", "from", "to", "offset_weekday"]],
  template: function DateRangeFieldComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵprojectionDef(_c2);
      i0.ɵɵelementStart(0, "button", 1)(1, "div", 2);
      i0.ɵɵtext(2);
      i0.ɵɵpipe(3, "date");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(4, "div");
      i0.ɵɵtext(5, "\u2013");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(6, "div", 2);
      i0.ɵɵtext(7);
      i0.ɵɵpipe(8, "date");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(9, "app-icon", 3);
      i0.ɵɵtext(10, "today");
      i0.ɵɵelementEnd()();
      i0.ɵɵelementStart(11, "div", 4);
      i0.ɵɵprojection(12);
      i0.ɵɵprojection(13, 1);
      i0.ɵɵelementEnd();
      i0.ɵɵtemplate(14, DateRangeFieldComponent_ng_template_14_Template, 2, 4, "ng-template", null, 0, i0.ɵɵtemplateRefExtractor);
    }
    if (rf & 2) {
      var calendar_picker_r3 = i0.ɵɵreference(15);
      i0.ɵɵclassProp("opacity-30", ctx.disabled);
      i0.ɵɵproperty("content", calendar_picker_r3)("disabled", ctx.disabled);
      i0.ɵɵadvance(2);
      i0.ɵɵtextInterpolate1(" ", i0.ɵɵpipeBind2(3, 6, (ctx.start_date == null ? null : ctx.start_date.value) || ctx.now, "MMM d, yyyy"), " ");
      i0.ɵɵadvance(5);
      i0.ɵɵtextInterpolate1(" ", i0.ɵɵpipeBind2(8, 9, (ctx.end_date == null ? null : ctx.end_date.value) || ctx.now, "MMM d, yyyy"), " ");
    }
  }
});
exports.DateRangeFieldComponent = DateRangeFieldComponent;

/***/ }),

/***/ 83476:
/*!**************************************************************!*\
  !*** ./libs/form-fields/src/lib/duration-field.component.ts ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _createForOfIteratorHelper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createForOfIteratorHelper.js */ 36350)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _DurationFieldComponent;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.DurationFieldComponent = void 0;
var core_1 = __webpack_require__(/*! @angular/core */ 37580);
var forms_1 = __webpack_require__(/*! @angular/forms */ 34456);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var date_fns_1 = __webpack_require__(/*! date-fns */ 25773);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @angular/common */ 60316);
var i2 = __webpack_require__(/*! @angular/material/core */ 74646);
var i3 = __webpack_require__(/*! @angular/material/form-field */ 24950);
var i4 = __webpack_require__(/*! ../../../components/src/lib/icon.component */ 69434);
var i5 = __webpack_require__(/*! @angular/material/menu */ 31034);
var _c0 = ["*"];
function DurationFieldComponent_div_5_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 8);
    i0.ɵɵtext(1);
    i0.ɵɵpipe(2, "date");
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r0 = i0.ɵɵnextContext();
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", i0.ɵɵpipeBind3(2, 1, ctx_r0.selected == null ? null : ctx_r0.selected.date, ctx_r0.time_format + " (z)", ctx_r0.tz), " ");
  }
}
function DurationFieldComponent_button_10_ng_container_2_div_5_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 8);
    i0.ɵɵtext(1);
    i0.ɵɵpipe(2, "date");
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var option_r3 = i0.ɵɵnextContext(2).$implicit;
    var ctx_r0 = i0.ɵɵnextContext();
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", i0.ɵɵpipeBind3(2, 1, option_r3.date, ctx_r0.time_format + " (z)", ctx_r0.tz), " ");
  }
}
function DurationFieldComponent_button_10_ng_container_2_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵelementStart(1, "div", 13)(2, "div", 3);
    i0.ɵɵtext(3);
    i0.ɵɵpipe(4, "date");
    i0.ɵɵelementEnd();
    i0.ɵɵtemplate(5, DurationFieldComponent_button_10_ng_container_2_div_5_Template, 3, 5, "div", 4);
    i0.ɵɵelementEnd();
    i0.ɵɵelementContainerEnd();
  }
  if (rf & 2) {
    var option_r3 = i0.ɵɵnextContext().$implicit;
    var ctx_r0 = i0.ɵɵnextContext();
    i0.ɵɵadvance(3);
    i0.ɵɵtextInterpolate3(" ", option_r3.date ? i0.ɵɵpipeBind2(4, 4, option_r3.date, option_r3.id >= 24 * 60 ? "mediumDate" : ctx_r0.time_format) + " (" : "", "", option_r3.name, "", option_r3.date ? ")" : "", " ");
    i0.ɵɵadvance(2);
    i0.ɵɵproperty("ngIf", ctx_r0.timezone && ctx_r0.tz);
  }
}
function DurationFieldComponent_button_10_app_icon_5_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "app-icon", 14);
    i0.ɵɵtext(1, " done ");
    i0.ɵɵelementEnd();
  }
}
function DurationFieldComponent_button_10_Template(rf, ctx) {
  if (rf & 1) {
    var _r2 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "button", 9);
    i0.ɵɵlistener("click", function DurationFieldComponent_button_10_Template_button_click_0_listener() {
      var option_r3 = i0.ɵɵrestoreView(_r2).$implicit;
      var ctx_r0 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r0.setValue(option_r3.id));
    });
    i0.ɵɵelementStart(1, "div", 10);
    i0.ɵɵtemplate(2, DurationFieldComponent_button_10_ng_container_2_Template, 6, 7, "ng-container", 11);
    i0.ɵɵelementStart(3, "div");
    i0.ɵɵtext(4);
    i0.ɵɵelementEnd();
    i0.ɵɵtemplate(5, DurationFieldComponent_button_10_app_icon_5_Template, 2, 0, "app-icon", 12);
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var option_r3 = ctx.$implicit;
    var ctx_r0 = i0.ɵɵnextContext();
    i0.ɵɵadvance(2);
    i0.ɵɵproperty("ngIf", !ctx_r0.force);
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate(ctx_r0.force);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", (ctx_r0.selected == null ? null : ctx_r0.selected.id) === option_r3.id);
  }
}
var DurationFieldComponent = /*#__PURE__*/function () {
  function DurationFieldComponent() {
    _classCallCheck(this, DurationFieldComponent);
    /** Maximum duration option available */
    this.max = 240;
    /** Minimum duration option available */
    this.min = 30;
    /** Step value between options */
    this.step = 15;
    /** Special case prepopulation i.e. out of step options */
    this.custom_options = [];
    /** Whether to use 24 hour time when formatting displayed time */
    this.use_24hr = false;
    /** Display extra information for displayed times for timezone */
    this.timezone = '';
    this.duration = 60;
    /** List of available duration options */
    this.duration_options = [];
    this._local_tz = (0, common_1.getTimezoneOffsetString)(Intl.DateTimeFormat().resolvedOptions().timeZone);
  }
  return _createClass(DurationFieldComponent, [{
    key: "time_format",
    get: function get() {
      return this.use_24hr ? 'HH : mm' : 'h : mm a';
    }
  }, {
    key: "selected",
    get: function get() {
      var _this = this;
      return this.duration_options.find(function (_) {
        return _.id === _this.duration;
      });
    }
  }, {
    key: "tz",
    get: function get() {
      var tz = this.timezone;
      if (!tz) return '';
      var tz_offset = (0, common_1.getTimezoneOffsetString)(tz);
      return tz_offset === this._local_tz ? '' : tz_offset;
    }
  }, {
    key: "ngOnInit",
    value: function ngOnInit() {
      this.duration_options = this.generateDurationOptions(this.max, this.min, this.step);
      this._updateOption();
    }
  }, {
    key: "ngOnChanges",
    value: function ngOnChanges(changes) {
      /* istanbul ignore else */
      if (changes.max || changes.min || changes.step || changes.time || changes.custom_options) {
        this.duration_options = this.generateDurationOptions(this.max, this.min, this.step);
        this._updateOption();
      }
    }
    /**
     * Update the form field value
     * @param new_value New value to set on the form field
     */
  }, {
    key: "setValue",
    value: function setValue(new_value) {
      this.duration = new_value;
      /* istanbul ignore else */
      if (this._onChange) {
        this._onChange(+new_value);
      }
    }
    /* istanbul ignore next */
    /**
     * Update local value when form control value is changed
     * @param value The new value for the component
     */
  }, {
    key: "writeValue",
    value: function writeValue(value) {
      this.duration = value;
      this._updateOption();
    }
  }, {
    key: "setDisabledState",
    value: function setDisabledState(disabled) {
      this.disabled = disabled;
    }
    /* istanbul ignore next */
    /**
     * Registers a callback function that is called when the control's value changes in the UI.
     * @param fn The callback function to register
     */
  }, {
    key: "registerOnChange",
    value: function registerOnChange(fn) {
      this._onChange = fn;
    }
    /* istanbul ignore next */
    /**
     * Registers a callback function is called by the forms API on initialization to update the form model on blur.
     * @param fn The callback function to register
     */
  }, {
    key: "registerOnTouched",
    value: function registerOnTouched(fn) {
      this._onTouch = fn;
    }
  }, {
    key: "generateDurationOptions",
    value: function generateDurationOptions(max, min, step) {
      var blocks = [];
      var time = min;
      var date = this.time ? this.time : null;
      // Add special cases
      var _iterator = _createForOfIteratorHelper(this.custom_options),
        _step;
      try {
        for (_iterator.s(); !(_step = _iterator.n()).done;) {
          var option = _step.value;
          blocks.push({
            id: option,
            date: date ? (0, date_fns_1.addMinutes)(date, option).valueOf() : undefined,
            name: option >= 24 * 60 ? "".concat((0, date_fns_1.formatDuration)({
              days: Math.floor(option / (24 * 60))
            })) : "".concat((0, date_fns_1.formatDuration)({
              hours: Math.floor(option / 60),
              minutes: option % 60
            }))
          });
        }
      } catch (err) {
        _iterator.e(err);
      } finally {
        _iterator.f();
      }
      while (time <= max) {
        blocks.push({
          id: time,
          date: date ? (0, date_fns_1.addMinutes)(date, time).valueOf() : undefined,
          name: time === 0 ? (0, date_fns_1.formatDuration)({
            minutes: 0
          }, {
            zero: true
          }) : time >= 24 * 60 ? "".concat((0, date_fns_1.formatDuration)({
            days: Math.floor(time / (24 * 60))
          })) : "".concat((0, date_fns_1.formatDuration)({
            hours: Math.floor(time / 60),
            minutes: time % 60
          }))
        });
        time += step;
      }
      blocks.sort(function (a, b) {
        return a.id - b.id;
      });
      return blocks;
    }
  }, {
    key: "_updateOption",
    value: function _updateOption() {
      var _this$duration_option,
        _this2 = this;
      if (!((_this$duration_option = this.duration_options) !== null && _this$duration_option !== void 0 && _this$duration_option.length)) return;
      var idx = this.duration_options.findIndex(function (_) {
        return _.id === _this2.duration;
      });
      if (idx < 0) this.setValue(this.min);
    }
  }]);
}();
_DurationFieldComponent = DurationFieldComponent;
_DurationFieldComponent.ɵfac = function DurationFieldComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _DurationFieldComponent)();
};
_DurationFieldComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _DurationFieldComponent,
  selectors: [["a-duration-field"]],
  inputs: {
    max: "max",
    min: "min",
    step: "step",
    time: "time",
    disabled: "disabled",
    custom_options: "custom_options",
    force: "force",
    use_24hr: "use_24hr",
    timezone: "timezone"
  },
  features: [i0.ɵɵProvidersFeature([{
    provide: forms_1.NG_VALUE_ACCESSOR,
    useExisting: (0, core_1.forwardRef)(function () {
      return _DurationFieldComponent;
    }),
    multi: true
  }]), i0.ɵɵNgOnChangesFeature],
  ngContentSelectors: _c0,
  decls: 13,
  vars: 12,
  consts: [["menu", "matMenu"], ["duration-field", "", "matRipple", "", 1, "flex", "items-center", "justify-between", "border", "border-neutral", "rounded", "h-12", "w-full", "px-2", 3, "disabled", "matMenuTriggerFor"], [1, "flex", "flex-col", "leading-tight", "px-2", "text-left", "flex-1", "w-1/2"], [1, "truncate"], ["class", "text-xs opacity-30 truncate", 4, "ngIf"], [1, "text-2xl"], [1, "max-h-[15rem]", "min-w-[18rem]"], ["mat-menu-item", "", "class", "text-left", 3, "click", 4, "ngFor", "ngForOf"], [1, "text-xs", "opacity-30", "truncate"], ["mat-menu-item", "", 1, "text-left", 3, "click"], [1, "flex", "items-center", "justify-between"], [4, "ngIf"], ["class", "text-2xl ml-2", 4, "ngIf"], [1, "flex", "flex-col", "leading-tight"], [1, "text-2xl", "ml-2"]],
  template: function DurationFieldComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵprojectionDef();
      i0.ɵɵelementStart(0, "button", 1)(1, "div", 2)(2, "div", 3);
      i0.ɵɵtext(3);
      i0.ɵɵpipe(4, "date");
      i0.ɵɵelementEnd();
      i0.ɵɵtemplate(5, DurationFieldComponent_div_5_Template, 3, 5, "div", 4);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(6, "app-icon", 5);
      i0.ɵɵtext(7, "arrow_drop_down");
      i0.ɵɵelementEnd()();
      i0.ɵɵelementStart(8, "mat-menu", 6, 0);
      i0.ɵɵtemplate(10, DurationFieldComponent_button_10_Template, 6, 3, "button", 7);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(11, "mat-error");
      i0.ɵɵprojection(12);
      i0.ɵɵelementEnd();
    }
    if (rf & 2) {
      var menu_r4 = i0.ɵɵreference(9);
      i0.ɵɵclassProp("opacity-30", ctx.disabled);
      i0.ɵɵproperty("disabled", ctx.disabled)("matMenuTriggerFor", menu_r4);
      i0.ɵɵadvance(3);
      i0.ɵɵtextInterpolate3(" ", (ctx.selected == null ? null : ctx.selected.date) ? i0.ɵɵpipeBind2(4, 9, ctx.selected == null ? null : ctx.selected.date, ctx.selected.id >= 24 * 60 ? "mediumDate" : ctx.time_format) + " (" : "", "", ctx.selected == null ? null : ctx.selected.name, "", (ctx.selected == null ? null : ctx.selected.date) ? ")" : "", " ");
      i0.ɵɵadvance(2);
      i0.ɵɵproperty("ngIf", ctx.timezone && ctx.tz);
      i0.ɵɵadvance(5);
      i0.ɵɵproperty("ngForOf", ctx.duration_options);
    }
  },
  dependencies: [i1.NgForOf, i1.NgIf, i2.MatRipple, i3.MatError, i4.IconComponent, i5.MatMenu, i5.MatMenuItem, i5.MatMenuTrigger, i1.DatePipe],
  styles: ["[_nghost-%COMP%] {\n                width: 100%;\n            }\n\n            mat-form-field[_ngcontent-%COMP%] {\n                width: 100%;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImR1cmF0aW9uLWZpZWxkLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1lBQ1k7Z0JBQ0ksV0FBVztZQUNmOztZQUVBO2dCQUNJLFdBQVc7WUFDZiIsImZpbGUiOiJkdXJhdGlvbi1maWVsZC5jb21wb25lbnQudHMiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIDpob3N0IHtcbiAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbWF0LWZvcm0tZmllbGQge1xuICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgfVxuICAgICAgICAiXX0= */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvZm9ybS1maWVsZHMvc3JjL2xpYi9kdXJhdGlvbi1maWVsZC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLFdBQVc7WUFDZjs7WUFFQTtnQkFDSSxXQUFXO1lBQ2Y7O0FBRVosb2ZBQW9mIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICA6aG9zdCB7XG4gICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIG1hdC1mb3JtLWZpZWxkIHtcbiAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl0sInNvdXJjZVJvb3QiOiIifQ== */"]
});
exports.DurationFieldComponent = DurationFieldComponent;

/***/ }),

/***/ 77066:
/*!********************************************************!*\
  !*** ./libs/form-fields/src/lib/form-fields.module.ts ***!
  \********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _FormFieldsModule;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.FormFieldsModule = void 0;
var core_1 = __webpack_require__(/*! @angular/core */ 37580);
var common_1 = __webpack_require__(/*! @angular/common */ 60316);
var forms_1 = __webpack_require__(/*! @angular/forms */ 34456);
var clipboard_1 = __webpack_require__(/*! @angular/cdk/clipboard */ 52352);
var chips_1 = __webpack_require__(/*! @angular/material/chips */ 12772);
var core_2 = __webpack_require__(/*! @angular/material/core */ 74646);
var form_field_1 = __webpack_require__(/*! @angular/material/form-field */ 24950);
var input_1 = __webpack_require__(/*! @angular/material/input */ 95541);
var select_1 = __webpack_require__(/*! @angular/material/select */ 25175);
var autocomplete_1 = __webpack_require__(/*! @angular/material/autocomplete */ 79771);
var tooltip_1 = __webpack_require__(/*! @angular/material/tooltip */ 80640);
var checkbox_1 = __webpack_require__(/*! @angular/material/checkbox */ 97024);
var radio_1 = __webpack_require__(/*! @angular/material/radio */ 53804);
var components_module_1 = __webpack_require__(/*! libs/components/src/lib/components.module */ 14974);
var action_field_component_1 = __webpack_require__(/*! ./action-field.component */ 79842);
var counter_component_1 = __webpack_require__(/*! ./counter.component */ 55507);
var date_field_component_1 = __webpack_require__(/*! ./date-field.component */ 19608);
var duration_field_component_1 = __webpack_require__(/*! ./duration-field.component */ 83476);
var time_field_component_1 = __webpack_require__(/*! ./time-field.component */ 81413);
var user_list_field_component_1 = __webpack_require__(/*! ./user-list-field.component */ 840);
var user_search_field_component_1 = __webpack_require__(/*! ./user-search-field.component */ 18000);
var item_list_field_component_1 = __webpack_require__(/*! ./item-list-field.component */ 20212);
var upload_list_field_component_1 = __webpack_require__(/*! ./upload-list-field.component */ 65542);
var upload_file_field_component_1 = __webpack_require__(/*! ./upload-file-field.component */ 45748);
var space_list_field_component_1 = __webpack_require__(/*! ./space-list-field.component */ 84809);
var rich_text_input_component_1 = __webpack_require__(/*! ./rich-text-input.component */ 81772);
var host_select_field_component_1 = __webpack_require__(/*! ./host-select-field.component */ 65347);
var image_list_field_component_1 = __webpack_require__(/*! ./image-list-field.component */ 56864);
var recurrence_field_component_1 = __webpack_require__(/*! ./recurrence-field.component */ 83138);
var recurrence_modal_component_1 = __webpack_require__(/*! ./recurrence-modal.component */ 375);
var support_ticket_modal_component_1 = __webpack_require__(/*! ./support-ticket-modal.component */ 38791);
var date_calendar_component_1 = __webpack_require__(/*! ./date-calendar.component */ 89058);
var booking_rules_form_component_1 = __webpack_require__(/*! ./booking-rules-form.component */ 33683);
var place_user_pipe_1 = __webpack_require__(/*! ./place-user.pipe */ 12863);
var date_range_field_component_1 = __webpack_require__(/*! ./date-range-field.component */ 5472);
var date_range_calendar_component_1 = __webpack_require__(/*! ./date-range-calendar.component */ 29466);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @angular/common */ 60316);
var i2 = __webpack_require__(/*! @angular/forms */ 34456);
var i3 = __webpack_require__(/*! @angular/material/core */ 74646);
var i4 = __webpack_require__(/*! ../../../components/src/lib/icon.component */ 69434);
var i5 = __webpack_require__(/*! ../../../components/src/lib/custom-tooltip.component */ 22238);
var i6 = __webpack_require__(/*! @angular/material/form-field */ 24950);
var i7 = __webpack_require__(/*! @angular/material/autocomplete */ 79771);
var i8 = __webpack_require__(/*! @angular/material/tooltip */ 80640);
var i9 = __webpack_require__(/*! @angular/material/chips */ 12772);
var i10 = __webpack_require__(/*! @angular/material/progress-spinner */ 41134);
var i11 = __webpack_require__(/*! @angular/material/input */ 95541);
var i12 = __webpack_require__(/*! ../../../components/src/lib/virtual-keyboard.component */ 75080);
var i13 = __webpack_require__(/*! @angular/material/radio */ 53804);
var i14 = __webpack_require__(/*! ../../../components/src/lib/authenticated-image.directive */ 93208);
var i15 = __webpack_require__(/*! @angular/material/select */ 25175);
var i16 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var i17 = __webpack_require__(/*! @angular/material/checkbox */ 97024);
var COMPONENTS = [action_field_component_1.ActionFieldComponent, counter_component_1.CounterComponent, date_field_component_1.DateFieldComponent, date_range_field_component_1.DateRangeFieldComponent, date_range_calendar_component_1.DateRangeCalendarComponent, duration_field_component_1.DurationFieldComponent, time_field_component_1.TimeFieldComponent, user_list_field_component_1.UserListFieldComponent, user_search_field_component_1.UserSearchFieldComponent, item_list_field_component_1.ItemListFieldComponent, upload_list_field_component_1.UploadListFieldComponent, upload_file_field_component_1.UploadFileFieldComponent, space_list_field_component_1.SpaceListFieldComponent, rich_text_input_component_1.RichTextInputComponent, host_select_field_component_1.HostSelectFieldComponent, image_list_field_component_1.ImageListFieldComponent, support_ticket_modal_component_1.SupportTicketModalComponent, recurrence_field_component_1.RecurrenceFieldComponent, recurrence_modal_component_1.RecurrenceModalComponent, date_calendar_component_1.DateCalendarComponent, booking_rules_form_component_1.BookingRulesFormComponent, place_user_pipe_1.PlaceUserPipe];
var FormFieldsModule = /*#__PURE__*/_createClass(function FormFieldsModule() {
  _classCallCheck(this, FormFieldsModule);
});
_FormFieldsModule = FormFieldsModule;
_FormFieldsModule.ɵfac = function FormFieldsModule_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _FormFieldsModule)();
};
_FormFieldsModule.ɵmod = /*@__PURE__*/i0.ɵɵdefineNgModule({
  type: _FormFieldsModule
});
_FormFieldsModule.ɵinj = /*@__PURE__*/i0.ɵɵdefineInjector({
  imports: [common_1.CommonModule, forms_1.FormsModule, forms_1.ReactiveFormsModule, core_2.MatRippleModule, forms_1.ReactiveFormsModule, form_field_1.MatFormFieldModule, input_1.MatInputModule, select_1.MatSelectModule, autocomplete_1.MatAutocompleteModule, tooltip_1.MatTooltipModule, checkbox_1.MatCheckboxModule, radio_1.MatRadioModule, chips_1.MatChipsModule, clipboard_1.ClipboardModule, components_module_1.ComponentsModule]
});
exports.FormFieldsModule = FormFieldsModule;
(function () {
  (typeof ngJitMode === "undefined" || ngJitMode) && i0.ɵɵsetNgModuleScope(FormFieldsModule, {
    declarations: [action_field_component_1.ActionFieldComponent, counter_component_1.CounterComponent, date_field_component_1.DateFieldComponent, date_range_field_component_1.DateRangeFieldComponent, date_range_calendar_component_1.DateRangeCalendarComponent, duration_field_component_1.DurationFieldComponent, time_field_component_1.TimeFieldComponent, user_list_field_component_1.UserListFieldComponent, user_search_field_component_1.UserSearchFieldComponent, item_list_field_component_1.ItemListFieldComponent, upload_list_field_component_1.UploadListFieldComponent, upload_file_field_component_1.UploadFileFieldComponent, space_list_field_component_1.SpaceListFieldComponent, rich_text_input_component_1.RichTextInputComponent, host_select_field_component_1.HostSelectFieldComponent, image_list_field_component_1.ImageListFieldComponent, support_ticket_modal_component_1.SupportTicketModalComponent, recurrence_field_component_1.RecurrenceFieldComponent, recurrence_modal_component_1.RecurrenceModalComponent, date_calendar_component_1.DateCalendarComponent, booking_rules_form_component_1.BookingRulesFormComponent, place_user_pipe_1.PlaceUserPipe],
    imports: [common_1.CommonModule, forms_1.FormsModule, forms_1.ReactiveFormsModule, core_2.MatRippleModule, forms_1.ReactiveFormsModule, form_field_1.MatFormFieldModule, input_1.MatInputModule, select_1.MatSelectModule, autocomplete_1.MatAutocompleteModule, tooltip_1.MatTooltipModule, checkbox_1.MatCheckboxModule, radio_1.MatRadioModule, chips_1.MatChipsModule, clipboard_1.ClipboardModule, components_module_1.ComponentsModule],
    exports: [action_field_component_1.ActionFieldComponent, counter_component_1.CounterComponent, date_field_component_1.DateFieldComponent, date_range_field_component_1.DateRangeFieldComponent, date_range_calendar_component_1.DateRangeCalendarComponent, duration_field_component_1.DurationFieldComponent, time_field_component_1.TimeFieldComponent, user_list_field_component_1.UserListFieldComponent, user_search_field_component_1.UserSearchFieldComponent, item_list_field_component_1.ItemListFieldComponent, upload_list_field_component_1.UploadListFieldComponent, upload_file_field_component_1.UploadFileFieldComponent, space_list_field_component_1.SpaceListFieldComponent, rich_text_input_component_1.RichTextInputComponent, host_select_field_component_1.HostSelectFieldComponent, image_list_field_component_1.ImageListFieldComponent, support_ticket_modal_component_1.SupportTicketModalComponent, recurrence_field_component_1.RecurrenceFieldComponent, recurrence_modal_component_1.RecurrenceModalComponent, date_calendar_component_1.DateCalendarComponent, booking_rules_form_component_1.BookingRulesFormComponent, place_user_pipe_1.PlaceUserPipe]
  });
})();
i0.ɵɵsetComponentScope(date_field_component_1.DateFieldComponent, [i1.NgIf, i2.NgControlStatus, i2.NgModel, i3.MatRipple, i4.IconComponent, i5.CustomTooltipComponent, date_calendar_component_1.DateCalendarComponent], [i1.DatePipe]);
i0.ɵɵsetComponentScope(date_range_field_component_1.DateRangeFieldComponent, [i3.MatRipple, i4.IconComponent, i5.CustomTooltipComponent, date_range_calendar_component_1.DateRangeCalendarComponent], [i1.DatePipe]);
i0.ɵɵsetComponentScope(user_list_field_component_1.UserListFieldComponent, [i1.NgForOf, i1.NgIf, i2.DefaultValueAccessor, i2.NgControlStatus, i2.NgModel, i3.MatRipple, i6.MatFormField, i6.MatSuffix, i3.MatOption, i7.MatAutocomplete, i7.MatAutocompleteTrigger, i7.MatAutocompleteOrigin, i8.MatTooltip, i9.MatChipGrid, i9.MatChipInput, i9.MatChipRemove, i9.MatChipRow, i4.IconComponent, i10.MatProgressSpinner], [i1.AsyncPipe, place_user_pipe_1.PlaceUserPipe]);
i0.ɵɵsetComponentScope(user_search_field_component_1.UserSearchFieldComponent, [i1.NgForOf, i1.NgIf, i2.DefaultValueAccessor, i2.NgControlStatus, i2.NgModel, i6.MatFormField, i6.MatPrefix, i6.MatSuffix, i11.MatInput, i3.MatOption, i7.MatAutocomplete, i7.MatAutocompleteTrigger, i4.IconComponent, i12.VirtualKeyboardComponent, i10.MatProgressSpinner], []);
i0.ɵɵsetComponentScope(space_list_field_component_1.SpaceListFieldComponent, [i1.NgForOf, i1.NgIf, i2.NgControlStatus, i2.NgModel, i3.MatRipple, i13.MatRadioGroup, i13.MatRadioButton, i4.IconComponent, i14.AuthenticatedImageDirective], [i1.AsyncPipe]);
i0.ɵɵsetComponentScope(image_list_field_component_1.ImageListFieldComponent, [i1.NgForOf, i1.NgIf, i3.MatRipple, i6.MatFormField, i8.MatTooltip, i9.MatChipGrid, i9.MatChipInput, i9.MatChipRemove, i9.MatChipRow, i4.IconComponent, i14.AuthenticatedImageDirective, i10.MatProgressSpinner], [i1.AsyncPipe]);
i0.ɵɵsetComponentScope(support_ticket_modal_component_1.SupportTicketModalComponent, [i1.NgForOf, i1.NgIf, i2.ɵNgNoValidate, i2.DefaultValueAccessor, i2.NgControlStatus, i2.NgControlStatusGroup, i2.FormGroupDirective, i2.FormControlName, i3.MatRipple, i6.MatFormField, i6.MatError, i11.MatInput, i15.MatSelect, i3.MatOption, i4.IconComponent, i16.MatDialogClose, i10.MatProgressSpinner, rich_text_input_component_1.RichTextInputComponent, image_list_field_component_1.ImageListFieldComponent], [i1.AsyncPipe]);
i0.ɵɵsetComponentScope(recurrence_modal_component_1.RecurrenceModalComponent, [i1.NgIf, i2.DefaultValueAccessor, i2.NumberValueAccessor, i2.NgControlStatus, i2.NgModel, i3.MatRipple, i6.MatFormField, i6.MatSuffix, i11.MatInput, i15.MatSelect, i3.MatOption, i13.MatRadioGroup, i13.MatRadioButton, i4.IconComponent, i16.MatDialogClose, date_field_component_1.DateFieldComponent], []);
i0.ɵɵsetComponentScope(booking_rules_form_component_1.BookingRulesFormComponent, [i1.NgForOf, i1.NgIf, i2.DefaultValueAccessor, i2.NgControlStatus, i2.NgControlStatusGroup, i2.NgModel, i2.FormGroupDirective, i2.FormControlName, i2.FormGroupName, i6.MatFormField, i6.MatError, i11.MatInput, i15.MatSelect, i3.MatOption, i8.MatTooltip, i17.MatCheckbox, date_field_component_1.DateFieldComponent, duration_field_component_1.DurationFieldComponent, item_list_field_component_1.ItemListFieldComponent], [i1.AsyncPipe, i1.DatePipe]);

/***/ }),

/***/ 65347:
/*!*****************************************************************!*\
  !*** ./libs/form-fields/src/lib/host-select-field.component.ts ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _taggedTemplateLiteral = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js */ 9959)["default"]);
var _regeneratorRuntime = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/regeneratorRuntime.js */ 8698)["default"]);
var _asyncToGenerator = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/asyncToGenerator.js */ 95386)["default"]);
var _toConsumableArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/toConsumableArray.js */ 86033)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _HostSelectFieldComponent, _templateObject;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.HostSelectFieldComponent = void 0;
var core_1 = __webpack_require__(/*! @angular/core */ 37580);
var forms_1 = __webpack_require__(/*! @angular/forms */ 34456);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var staff_fn_1 = __webpack_require__(/*! libs/users/src/lib/staff.fn */ 2372);
var user_class_1 = __webpack_require__(/*! libs/users/src/lib/user.class */ 93693);
var calendar_fn_1 = __webpack_require__(/*! libs/calendar/src/lib/calendar.fn */ 458);
var rxjs_1 = __webpack_require__(/*! rxjs */ 15681);
var operators_1 = __webpack_require__(/*! rxjs/operators */ 97303);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @angular/common */ 60316);
var i2 = __webpack_require__(/*! @angular/forms */ 34456);
var i3 = __webpack_require__(/*! @angular/material/form-field */ 24950);
var i4 = __webpack_require__(/*! @angular/material/select */ 25175);
var i5 = __webpack_require__(/*! @angular/material/core */ 74646);
function HostSelectFieldComponent_mat_option_2_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "mat-option", 5)(1, "div", 6)(2, "div");
    i0.ɵɵtext(3);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(4, "span", 7);
    i0.ɵɵtext(5, "\xA0|\xA0");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(6, "div", 8);
    i0.ɵɵtext(7);
    i0.ɵɵelementEnd()()();
  }
  if (rf & 2) {
    var user_r1 = ctx.$implicit;
    i0.ɵɵproperty("value", user_r1 == null ? null : user_r1.email);
    i0.ɵɵadvance(3);
    i0.ɵɵtextInterpolate(user_r1.name);
    i0.ɵɵadvance(4);
    i0.ɵɵtextInterpolate(user_r1 == null ? null : user_r1.email);
  }
}
function HostSelectFieldComponent_ng_container_6_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementContainer(0);
  }
}
var HostSelectFieldComponent = /*#__PURE__*/function () {
  function HostSelectFieldComponent() {
    var _this = this;
    _classCallCheck(this, HostSelectFieldComponent);
    this.users = (0, rxjs_1.of)(1).pipe((0, operators_1.switchMap)(function () {
      return (0, calendar_fn_1.queryCalendars)().pipe((0, operators_1.catchError)(function (_) {
        return (0, rxjs_1.of)([]);
      }));
    }), (0, operators_1.switchMap)(function (list) {
      return (0, rxjs_1.zip).apply(void 0, _toConsumableArray(list.map(function (_) {
        return (0, staff_fn_1.showStaff)(_.id).pipe((0, operators_1.catchError)(function (_) {
          return (0, rxjs_1.of)(null);
        }));
      })));
    }), (0, operators_1.map)(function (_) {
      return (0, common_1.unique)([(0, common_1.currentUser)()].concat(_toConsumableArray(_)), 'email');
    }), (0, operators_1.shareReplay)(1));
    this.disabled = false;
    this.registerOnChange = function (fn) {
      return _this._onChange = fn;
    };
    this.registerOnTouched = function (fn) {
      return _this._onTouch = fn;
    };
    this.setDisabledState = function (s) {
      return _this.disabled = s;
    };
  }
  /**
   * Update the form field value
   * @param new_value New value to set on the form field
   */
  return _createClass(HostSelectFieldComponent, [{
    key: "setValue",
    value: (function () {
      var _setValue = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(email) {
        var users;
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              _context.next = 2;
              return this.users.pipe((0, operators_1.take)(1)).toPromise();
            case 2:
              users = _context.sent;
              this.item = users === null || users === void 0 ? void 0 : users.find(function (_) {
                return _.email === email;
              });
              if (!this.item) this.item = new user_class_1.User({
                email: email
              });
              if (this._onChange) this._onChange(this.item);
            case 6:
            case "end":
              return _context.stop();
          }
        }, _callee, this);
      }));
      function setValue(_x) {
        return _setValue.apply(this, arguments);
      }
      return setValue;
    }()
    /**
     * Update local value when form control value is changed
     * @param value The new value for the component
     */
    )
  }, {
    key: "writeValue",
    value: function writeValue(value) {
      this.item = value;
      if (!(value !== null && value !== void 0 && value.email)) this.item = (0, common_1.currentUser)();
    }
  }]);
}();
_HostSelectFieldComponent = HostSelectFieldComponent;
_HostSelectFieldComponent.ɵfac = function HostSelectFieldComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _HostSelectFieldComponent)();
};
_HostSelectFieldComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _HostSelectFieldComponent,
  selectors: [["host-select-field"]],
  features: [i0.ɵɵProvidersFeature([{
    provide: forms_1.NG_VALUE_ACCESSOR,
    useExisting: (0, core_1.forwardRef)(function () {
      return _HostSelectFieldComponent;
    }),
    multi: true
  }])],
  decls: 8,
  vars: 9,
  consts: function consts() {
    var i18n_0;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_5838187330179805553$$LIBS_FORM_FIELDS_SRC_LIB_HOST_SELECT_FIELD_COMPONENT_TS_0 = goog.getMsg("Host is required");
      i18n_0 = MSG_EXTERNAL_5838187330179805553$$LIBS_FORM_FIELDS_SRC_LIB_HOST_SELECT_FIELD_COMPONENT_TS_0;
    } else {
      i18n_0 = $localize(_templateObject || (_templateObject = _taggedTemplateLiteral([":\u241F1cdb1c4c30b26c94c19e88ecdbde0e55665504d4\u241F5838187330179805553:Host is required"])));
    }
    return [i18n_0, ["appearance", "outline", 1, "w-full"], [3, "ngModelChange", "ngModel", "disabled", "placeholder"], ["class", "leading-tight", 3, "value", 4, "ngFor", "ngForOf"], [4, "ngIf"], [1, "leading-tight", 3, "value"], [1, "flex", "flex-col"], [1, "hidden"], [1, "text-xs", "opacity-60"]];
  },
  template: function HostSelectFieldComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵelementStart(0, "mat-form-field", 1)(1, "mat-select", 2);
      i0.ɵɵlistener("ngModelChange", function HostSelectFieldComponent_Template_mat_select_ngModelChange_1_listener($event) {
        return ctx.setValue($event);
      });
      i0.ɵɵtemplate(2, HostSelectFieldComponent_mat_option_2_Template, 8, 3, "mat-option", 3);
      i0.ɵɵpipe(3, "async");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(4, "mat-error");
      i0.ɵɵi18n(5, 0);
      i0.ɵɵelementEnd()();
      i0.ɵɵtemplate(6, HostSelectFieldComponent_ng_container_6_Template, 1, 0, "ng-container", 4);
      i0.ɵɵpipe(7, "async");
    }
    if (rf & 2) {
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngModel", ctx.item == null ? null : ctx.item.email)("disabled", ctx.disabled)("placeholder", (ctx.item == null ? null : ctx.item.email) ? ctx.item.name || ctx.item.email : "Select host");
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngForOf", i0.ɵɵpipeBind1(3, 5, ctx.users));
      i0.ɵɵadvance(4);
      i0.ɵɵproperty("ngIf", i0.ɵɵpipeBind1(7, 7, ctx.users));
    }
  },
  dependencies: [i1.NgForOf, i1.NgIf, i2.NgControlStatus, i2.NgModel, i3.MatFormField, i3.MatError, i4.MatSelect, i5.MatOption, i1.AsyncPipe]
});
exports.HostSelectFieldComponent = HostSelectFieldComponent;

/***/ }),

/***/ 56864:
/*!****************************************************************!*\
  !*** ./libs/form-fields/src/lib/image-list-field.component.ts ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _taggedTemplateLiteral = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js */ 9959)["default"]);
var _regeneratorRuntime = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/regeneratorRuntime.js */ 8698)["default"]);
var _asyncToGenerator = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/asyncToGenerator.js */ 95386)["default"]);
var _toConsumableArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/toConsumableArray.js */ 86033)["default"]);
var _createForOfIteratorHelper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createForOfIteratorHelper.js */ 36350)["default"]);
var _slicedToArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/slicedToArray.js */ 6282)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _callSuper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/callSuper.js */ 8513)["default"]);
var _inherits = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/inherits.js */ 58160)["default"]);
var _ImageListFieldComponent, _templateObject, _templateObject2;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.ImageListFieldComponent = void 0;
var keycodes_1 = __webpack_require__(/*! @angular/cdk/keycodes */ 74879);
var core_1 = __webpack_require__(/*! @angular/core */ 37580);
var forms_1 = __webpack_require__(/*! @angular/forms */ 34456);
var clipboard_1 = __webpack_require__(/*! @angular/cdk/clipboard */ 52352);
var rxjs_1 = __webpack_require__(/*! rxjs */ 15681);
var operators_1 = __webpack_require__(/*! rxjs/operators */ 97303);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var dialog_1 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var image_viewer_component_1 = __webpack_require__(/*! libs/components/src/lib/image-viewer.component */ 26821);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @angular/cdk/clipboard */ 52352);
var i2 = __webpack_require__(/*! @placeos/common */ 22797);
var i3 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var _c0 = ["image_list"];
var _c1 = ["file_input"];
function ImageListFieldComponent_div_9_Template(rf, ctx) {
  if (rf & 1) {
    var _r2 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 17);
    i0.ɵɵelement(1, "img", 18);
    i0.ɵɵelementStart(2, "div", 19);
    i0.ɵɵelement(3, "div", 20);
    i0.ɵɵelementStart(4, "div", 21)(5, "button", 22);
    i0.ɵɵlistener("click", function ImageListFieldComponent_div_9_Template_button_click_5_listener() {
      var url_r3 = i0.ɵɵrestoreView(_r2).$implicit;
      var ctx_r3 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r3.copyLink(url_r3));
    });
    i0.ɵɵelementStart(6, "app-icon");
    i0.ɵɵtext(7, "link");
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(8, "button", 22);
    i0.ɵɵlistener("click", function ImageListFieldComponent_div_9_Template_button_click_8_listener() {
      var url_r3 = i0.ɵɵrestoreView(_r2).$implicit;
      var ctx_r3 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r3.viewImage(url_r3));
    });
    i0.ɵɵelementStart(9, "app-icon");
    i0.ɵɵtext(10, "visibility");
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(11, "button", 22);
    i0.ɵɵlistener("click", function ImageListFieldComponent_div_9_Template_button_click_11_listener() {
      var url_r3 = i0.ɵɵrestoreView(_r2).$implicit;
      var ctx_r3 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r3.removeImage(url_r3));
    });
    i0.ɵɵelementStart(12, "app-icon");
    i0.ɵɵtext(13, "close");
    i0.ɵɵelementEnd()()()()();
  }
  if (rf & 2) {
    var url_r3 = ctx.$implicit;
    var ctx_r3 = i0.ɵɵnextContext();
    i0.ɵɵstyleProp("transform", "translate(-" + ctx_r3.offset + "00%)");
    i0.ɵɵadvance();
    i0.ɵɵproperty("source", url_r3);
  }
}
function ImageListFieldComponent_div_10_mat_progress_spinner_1_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelement(0, "mat-progress-spinner", 27);
  }
  if (rf & 2) {
    var item_r6 = i0.ɵɵnextContext().$implicit;
    i0.ɵɵproperty("value", item_r6.progress)("diameter", 64);
  }
}
function ImageListFieldComponent_div_10_app_icon_2_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "app-icon", 28);
    i0.ɵɵtext(1, "warning");
    i0.ɵɵelementEnd();
  }
}
function ImageListFieldComponent_div_10_div_3_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 29)(1, "app-icon", 30);
    i0.ɵɵtext(2, "refresh");
    i0.ɵɵelementEnd()();
  }
}
function ImageListFieldComponent_div_10_Template(rf, ctx) {
  if (rf & 1) {
    var _r5 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 23);
    i0.ɵɵlistener("click", function ImageListFieldComponent_div_10_Template_div_click_0_listener() {
      var item_r6 = i0.ɵɵrestoreView(_r5).$implicit;
      var ctx_r3 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r3.retryUpload(item_r6));
    });
    i0.ɵɵtemplate(1, ImageListFieldComponent_div_10_mat_progress_spinner_1_Template, 1, 2, "mat-progress-spinner", 24)(2, ImageListFieldComponent_div_10_app_icon_2_Template, 2, 0, "app-icon", 25)(3, ImageListFieldComponent_div_10_div_3_Template, 3, 0, "div", 26);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var item_r6 = ctx.$implicit;
    var ctx_r3 = i0.ɵɵnextContext();
    i0.ɵɵstyleProp("transform", "translate(-" + ctx_r3.offset + "00%)");
    i0.ɵɵproperty("matTooltip", item_r6.error);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", !item_r6.error);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", item_r6.error);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", item_r6.error);
  }
}
function ImageListFieldComponent_button_12_Template(rf, ctx) {
  if (rf & 1) {
    var _r7 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "button", 31);
    i0.ɵɵlistener("click", function ImageListFieldComponent_button_12_Template_button_click_0_listener() {
      i0.ɵɵrestoreView(_r7);
      var ctx_r3 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r3.offset = ctx_r3.offset - 1);
    });
    i0.ɵɵelementStart(1, "app-icon");
    i0.ɵɵtext(2, "chevron_left");
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var ctx_r3 = i0.ɵɵnextContext();
    i0.ɵɵproperty("disabled", ctx_r3.offset === 0);
  }
}
function ImageListFieldComponent_button_13_Template(rf, ctx) {
  if (rf & 1) {
    var _r8 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "button", 32);
    i0.ɵɵlistener("click", function ImageListFieldComponent_button_13_Template_button_click_0_listener() {
      i0.ɵɵrestoreView(_r8);
      var ctx_r3 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r3.offset = ctx_r3.offset + 1);
    });
    i0.ɵɵelementStart(1, "app-icon");
    i0.ɵɵtext(2, "chevron_right");
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var ctx_r3 = i0.ɵɵnextContext();
    i0.ɵɵproperty("disabled", ctx_r3.offset >= ctx_r3.length - ctx_r3.view_space);
  }
}
function ImageListFieldComponent_mat_chip_row_17_Template(rf, ctx) {
  if (rf & 1) {
    var _r9 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "mat-chip-row", 33);
    i0.ɵɵlistener("removed", function ImageListFieldComponent_mat_chip_row_17_Template_mat_chip_row_removed_0_listener() {
      var item_r10 = i0.ɵɵrestoreView(_r9).$implicit;
      var ctx_r3 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r3.removeImage(item_r10));
    });
    i0.ɵɵelementStart(1, "div", 34);
    i0.ɵɵtext(2);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(3, "button", 35)(4, "app-icon");
    i0.ɵɵtext(5, "cancel");
    i0.ɵɵelementEnd()()();
  }
  if (rf & 2) {
    var item_r10 = ctx.$implicit;
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate(item_r10);
    i0.ɵɵadvance();
    i0.ɵɵattribute("aria-label", "Remove " + item_r10);
  }
}
var ImageListFieldComponent = /*#__PURE__*/function (_common_1$AsyncHandle) {
  function ImageListFieldComponent(_clipboard, _uploads, _dialog) {
    var _this;
    _classCallCheck(this, ImageListFieldComponent);
    _this = _callSuper(this, ImageListFieldComponent);
    _this._clipboard = _clipboard;
    _this._uploads = _uploads;
    _this._dialog = _dialog;
    /** List of images */
    _this.list = [];
    /** List of images */
    _this.upload_ids = new rxjs_1.BehaviorSubject([]);
    _this._upload_list = new rxjs_1.BehaviorSubject([]);
    _this.upload_list = _this._upload_list.asObservable();
    _this.offset = 0;
    _this.view_space = 0;
    _this.separators = [keycodes_1.COMMA, keycodes_1.ENTER];
    _this.uploads = (0, rxjs_1.combineLatest)([_this.upload_list, _this.upload_ids]).pipe((0, operators_1.map)(function (_ref) {
      var _ref2 = _slicedToArray(_ref, 2),
        list = _ref2[0],
        ids = _ref2[1];
      return list.filter(function (i) {
        return ids.includes(i.id);
      });
    }));
    _this.registerOnChange = function (fn) {
      return _this._onChange = fn;
    };
    _this.registerOnTouched = function (fn) {
      return _this._onTouch = fn;
    };
    return _this;
  }
  _inherits(ImageListFieldComponent, _common_1$AsyncHandle);
  return _createClass(ImageListFieldComponent, [{
    key: "length",
    get: function get() {
      return this.list.length + this._upload_list.getValue().length + 1;
    }
  }, {
    key: "ngAfterViewInit",
    value: function ngAfterViewInit() {
      var _this2 = this;
      this.timeout('init_view_space', function () {
        var box = _this2._list_el.nativeElement.getBoundingClientRect();
        _this2.view_space = Math.floor(box.width / 152);
      }, 100);
      this.subscription('upload_changes', this.upload_list.subscribe(function (list) {
        var id_list = _this2.upload_ids.getValue();
        var _iterator = _createForOfIteratorHelper(id_list),
          _step;
        try {
          var _loop = function _loop() {
            var id = _step.value;
            var item = list.find(function (_) {
              return _.id === id;
            });
            if (item && item.progress >= 100) {
              _this2.addImageUrl(item.link);
              _this2.upload_ids.next(_this2.upload_ids.getValue().filter(function (_) {
                return _ !== id;
              }));
            }
          };
          for (_iterator.s(); !(_step = _iterator.n()).done;) {
            _loop();
          }
        } catch (err) {
          _iterator.e(err);
        } finally {
          _iterator.f();
        }
      }));
    }
  }, {
    key: "copyLink",
    value: function copyLink(url) {
      this._clipboard.copy(url);
      (0, common_1.notifyInfo)('Copied image URL to clipboard');
    }
  }, {
    key: "viewImage",
    value: function viewImage(url) {
      this._dialog.open(image_viewer_component_1.ImageViewerComponent, {
        data: url
      });
    }
  }, {
    key: "removeImage",
    value: function removeImage(url) {
      this.setValue(this.list.filter(function (_) {
        return _ !== url;
      }));
    }
  }, {
    key: "addImage",
    value: function addImage(event) {
      if (!event.value) return;
      this.setValue((0, common_1.unique)([].concat(_toConsumableArray(this.list), [event.value])));
      event.chipInput.inputElement.value = '';
    }
  }, {
    key: "addImageUrl",
    value: function addImageUrl(url) {
      this.setValue((0, common_1.unique)([].concat(_toConsumableArray(this.list), [url])));
    }
  }, {
    key: "retryUpload",
    value: function retryUpload(item) {
      if (item.error) {
        item.error = null;
        item.upload.resume();
      }
    }
  }, {
    key: "uploadImages",
    value: function () {
      var _uploadImages = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(event) {
        var _this3 = this;
        var element, files, i, id;
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              element = event.target;
              /* istanbul ignore else */
              if (!(element !== null && element !== void 0 && element.files)) {
                _context.next = 15;
                break;
              }
              files = element.files;
              /* istanbul ignore else */
              if (!files.length) {
                _context.next = 15;
                break;
              }
              this.interval('update_status', function () {
                return _this3._updateUploadHistory();
              });
              i = 0;
            case 6:
              if (!(i < files.length)) {
                _context.next = 15;
                break;
              }
              _context.next = 9;
              return this._uploads.uploadFileWithPermissions(files[i]);
            case 9:
              id = _context.sent;
              this.upload_ids.next([].concat(_toConsumableArray(this.upload_ids.getValue()), [id]));
              this._file_input.nativeElement.value = '';
            case 12:
              i++;
              _context.next = 6;
              break;
            case 15:
            case "end":
              return _context.stop();
          }
        }, _callee, this);
      }));
      function uploadImages(_x) {
        return _uploadImages.apply(this, arguments);
      }
      return uploadImages;
    }()
  }, {
    key: "setValue",
    value: function setValue(value) {
      this.list = value;
      if (this._onChange) this._onChange(value);
    }
    /**
     * Update local value when form control value is changed
     * @param value The new value for the component
     */
  }, {
    key: "writeValue",
    value: function writeValue(value) {
      this.list = value || [];
    }
  }, {
    key: "_updateUploadHistory",
    value: function () {
      var _updateUploadHistory2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {
        var list, global_list, new_list, done_list;
        return _regeneratorRuntime().wrap(function _callee2$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              list = this.upload_ids.getValue();
              if (!(list.length === 0)) {
                _context2.next = 3;
                break;
              }
              return _context2.abrupt("return");
            case 3:
              _context2.next = 5;
              return this._uploads.upload_list.pipe((0, operators_1.take)(1)).toPromise();
            case 5:
              global_list = _context2.sent;
              new_list = global_list.filter(function (_) {
                return list.find(function (i) {
                  return i === _.id;
                });
              });
              done_list = new_list.filter(function (file) {
                return file.progress >= 100;
              });
              this._upload_list.next(new_list);
              done_list.forEach(function (i) {
                return delete i.upload;
              });
              if (done_list.length >= list.length) this.clearInterval('update_status');
            case 11:
            case "end":
              return _context2.stop();
          }
        }, _callee2, this);
      }));
      function _updateUploadHistory() {
        return _updateUploadHistory2.apply(this, arguments);
      }
      return _updateUploadHistory;
    }()
  }]);
}(common_1.AsyncHandler);
_ImageListFieldComponent = ImageListFieldComponent;
_ImageListFieldComponent.ɵfac = function ImageListFieldComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _ImageListFieldComponent)(i0.ɵɵdirectiveInject(i1.Clipboard), i0.ɵɵdirectiveInject(i2.UploadsService), i0.ɵɵdirectiveInject(i3.MatDialog));
};
_ImageListFieldComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _ImageListFieldComponent,
  selectors: [["image-list-field"]],
  viewQuery: function ImageListFieldComponent_Query(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵviewQuery(_c0, 5);
      i0.ɵɵviewQuery(_c1, 5);
    }
    if (rf & 2) {
      var _t;
      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx._list_el = _t.first);
      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx._file_input = _t.first);
    }
  },
  features: [i0.ɵɵProvidersFeature([{
    provide: forms_1.NG_VALUE_ACCESSOR,
    useExisting: (0, core_1.forwardRef)(function () {
      return _ImageListFieldComponent;
    }),
    multi: true
  }]), i0.ɵɵInheritDefinitionFeature],
  decls: 19,
  vars: 12,
  consts: function consts() {
    var i18n_0;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_7586116958417863153$$LIBS_FORM_FIELDS_SRC_LIB_IMAGE_LIST_FIELD_COMPONENT_TS_0 = goog.getMsg("Add image via URL");
      i18n_0 = MSG_EXTERNAL_7586116958417863153$$LIBS_FORM_FIELDS_SRC_LIB_IMAGE_LIST_FIELD_COMPONENT_TS_0;
    } else {
      i18n_0 = $localize(_templateObject || (_templateObject = _taggedTemplateLiteral([":\u241Fdc952a36d53a7092578b8706e3c6e28fd59866bf\u241F7586116958417863153:Add image via URL"])));
    }
    var i18n_1;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_889671581456916004$$LIBS_FORM_FIELDS_SRC_LIB_IMAGE_LIST_FIELD_COMPONENT_TS_1 = goog.getMsg("Upload Image(s)");
      i18n_1 = MSG_EXTERNAL_889671581456916004$$LIBS_FORM_FIELDS_SRC_LIB_IMAGE_LIST_FIELD_COMPONENT_TS_1;
    } else {
      i18n_1 = $localize(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([":\u241F3f0243e1118dafecaa05696a3dffcbfb83295f9b\u241F889671581456916004:Upload Image(s)"])));
    }
    return [["image_list", ""], ["file_input", ""], ["chipList", ""], i18n_1, ["images", "", 1, "space-x-2", "py-2", "overflow-hidden", "mb-2", "w-full", "flex", "items-center", "relative", 3, "resize"], ["image", "", 1, "relative", "rounded", "border-2", "border-base-200", "border-dashed", "flex-shrink-0", "flex", "flex-col", "items-center", "justify-center", "h-32", "w-36", "hover:bg-base-content/10", ":bg-base-100/10", "cursor-pointer"], [1, "text-4xl", "opacity-60"], [1, "opacity-60"], ["type", "file", 1, "absolute", "inset-0", "opacity-0", "h-32", "w-32", "cursor-pointer", 3, "change"], ["image", "", "class", "bg-center bg-cover h-32 w-36 relative rounded overflow-hidden flex-shrink-0 bg-base-200", 3, "transform", 4, "ngFor", "ngForOf"], ["image", "", "class", "bg-center bg-cover h-32 w-36 rounded border border-base-content/10 /5 bg-base-200  flex items-center justify-center flex-shrink-0", 3, "transform", "matTooltip", "click", 4, "ngFor", "ngForOf"], ["icon", "", "matRipple", "", "class", "absolute top-1/2 left-0 transform -translate-y-1/2 bg-base-100", 3, "disabled", "click", 4, "ngIf"], ["icon", "", "matRipple", "", "class", "absolute top-1/2 right-0 transform -translate-y-1/2 bg-base-100", 3, "disabled", "click", 4, "ngIf"], ["appearance", "outline", 1, "w-full"], ["aria-label", "Image List"], [3, "removed", 4, "ngFor", "ngForOf"], ["placeholder", i18n_0, 3, "matChipInputTokenEnd", "matChipInputFor", "matChipInputSeparatorKeyCodes", "matChipInputAddOnBlur"], ["image", "", 1, "bg-center", "bg-cover", "h-32", "w-36", "relative", "rounded", "overflow-hidden", "flex-shrink-0", "bg-base-200"], ["auth", "", 1, "object-contain", "absolute", "top-1/2", "left-1/2", "-translate-x-1/2", "-translate-y-1/2", "z-10", "pointer-events-none", 3, "source"], ["overlay", "", 1, "absolute", "inset-0", "text-base-100", "z-20"], ["bg", "", 1, "absolute", "inset-0", "opacity-0", "bg-black"], ["actions", "", 1, "absolute", "top-0", "left-0", "right-0", "flex", "items-center", "justify-center", "space-x-2", "opacity-0"], ["icon", "", 3, "click"], ["image", "", 1, "bg-center", "bg-cover", "h-32", "w-36", "rounded", "border", "border-base-content/10", "/5", "bg-base-200", "flex", "items-center", "justify-center", "flex-shrink-0", 3, "click", "matTooltip"], ["mode", "determinate", 3, "value", "diameter", 4, "ngIf"], ["class", "text-error text-6xl", 4, "ngIf"], ["overlay", "", "class", "absolute inset-0 hover:bg-base-content hover:bg-opacity-50 text-base-100 flex items-center justify-center", 4, "ngIf"], ["mode", "determinate", 3, "value", "diameter"], [1, "text-error", "text-6xl"], ["overlay", "", 1, "absolute", "inset-0", "hover:bg-base-content", "hover:bg-opacity-50", "text-base-100", "flex", "items-center", "justify-center"], [1, "text-3xl", "opacity-0"], ["icon", "", "matRipple", "", 1, "absolute", "top-1/2", "left-0", "transform", "-translate-y-1/2", "bg-base-100", 3, "click", "disabled"], ["icon", "", "matRipple", "", 1, "absolute", "top-1/2", "right-0", "transform", "-translate-y-1/2", "bg-base-100", 3, "click", "disabled"], [3, "removed"], [1, "truncate", "max-w-md"], ["matChipRemove", ""]];
  },
  template: function ImageListFieldComponent_Template(rf, ctx) {
    if (rf & 1) {
      var _r1 = i0.ɵɵgetCurrentView();
      i0.ɵɵelementStart(0, "div", 4, 0);
      i0.ɵɵlistener("resize", function ImageListFieldComponent_Template_div_resize_0_listener() {
        i0.ɵɵrestoreView(_r1);
        return i0.ɵɵresetView(ctx.ngAfterViewInit());
      }, false, i0.ɵɵresolveWindow);
      i0.ɵɵelementStart(2, "div", 5)(3, "app-icon", 6);
      i0.ɵɵtext(4, "add");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(5, "p", 7);
      i0.ɵɵi18n(6, 3);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(7, "input", 8, 1);
      i0.ɵɵlistener("change", function ImageListFieldComponent_Template_input_change_7_listener($event) {
        i0.ɵɵrestoreView(_r1);
        return i0.ɵɵresetView(ctx.uploadImages($event));
      });
      i0.ɵɵelementEnd()();
      i0.ɵɵtemplate(9, ImageListFieldComponent_div_9_Template, 14, 3, "div", 9)(10, ImageListFieldComponent_div_10_Template, 4, 6, "div", 10);
      i0.ɵɵpipe(11, "async");
      i0.ɵɵtemplate(12, ImageListFieldComponent_button_12_Template, 3, 1, "button", 11)(13, ImageListFieldComponent_button_13_Template, 3, 1, "button", 12);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(14, "mat-form-field", 13)(15, "mat-chip-grid", 14, 2);
      i0.ɵɵtemplate(17, ImageListFieldComponent_mat_chip_row_17_Template, 6, 2, "mat-chip-row", 15);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(18, "input", 16);
      i0.ɵɵlistener("matChipInputTokenEnd", function ImageListFieldComponent_Template_input_matChipInputTokenEnd_18_listener($event) {
        i0.ɵɵrestoreView(_r1);
        return i0.ɵɵresetView(ctx.addImage($event));
      });
      i0.ɵɵelementEnd()();
    }
    if (rf & 2) {
      var chipList_r11 = i0.ɵɵreference(16);
      i0.ɵɵadvance(2);
      i0.ɵɵstyleProp("transform", "translate(-" + ctx.offset + "00%)");
      i0.ɵɵadvance(7);
      i0.ɵɵproperty("ngForOf", ctx.list);
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngForOf", i0.ɵɵpipeBind1(11, 10, ctx.uploads));
      i0.ɵɵadvance(2);
      i0.ɵɵproperty("ngIf", ctx.length > ctx.view_space);
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", ctx.length > ctx.view_space);
      i0.ɵɵadvance(4);
      i0.ɵɵproperty("ngForOf", ctx.list);
      i0.ɵɵadvance();
      i0.ɵɵproperty("matChipInputFor", chipList_r11)("matChipInputSeparatorKeyCodes", ctx.separators)("matChipInputAddOnBlur", true);
    }
  },
  styles: ["[_nghost-%COMP%] {\n                width: 100%;\n            }\n\n            [overlay][_ngcontent-%COMP%] {\n                transition: background 200ms;\n            }\n\n            [image][_ngcontent-%COMP%]:hover   [actions][_ngcontent-%COMP%], \n   [image][_ngcontent-%COMP%]:hover    > app-icon[_ngcontent-%COMP%] {\n                opacity: 1 !important;\n            }\n\n            [image][_ngcontent-%COMP%]:hover   [bg][_ngcontent-%COMP%] {\n                opacity: 0.4 !important;\n            }\n\n            [actions][_ngcontent-%COMP%], \n   [image][_ngcontent-%COMP%]    > app-icon[_ngcontent-%COMP%] {\n                transition: opacity 200ms;\n            }\n\n            [image][_ngcontent-%COMP%] {\n                transition: transform 200ms;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImltYWdlLWxpc3QtZmllbGQuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxXQUFXO1lBQ2Y7O1lBRUE7Z0JBQ0ksNEJBQTRCO1lBQ2hDOztZQUVBOztnQkFFSSxxQkFBcUI7WUFDekI7O1lBRUE7Z0JBQ0ksdUJBQXVCO1lBQzNCOztZQUVBOztnQkFFSSx5QkFBeUI7WUFDN0I7O1lBRUE7Z0JBQ0ksMkJBQTJCO1lBQy9CIiwiZmlsZSI6ImltYWdlLWxpc3QtZmllbGQuY29tcG9uZW50LnRzIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICA6aG9zdCB7XG4gICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIFtvdmVybGF5XSB7XG4gICAgICAgICAgICAgICAgdHJhbnNpdGlvbjogYmFja2dyb3VuZCAyMDBtcztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgW2ltYWdlXTpob3ZlciBbYWN0aW9uc10sXG4gICAgICAgICAgICBbaW1hZ2VdOmhvdmVyID4gYXBwLWljb24ge1xuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDEgIWltcG9ydGFudDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgW2ltYWdlXTpob3ZlciBbYmddIHtcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLjQgIWltcG9ydGFudDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgW2FjdGlvbnNdLFxuICAgICAgICAgICAgW2ltYWdlXSA+IGFwcC1pY29uIHtcbiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uOiBvcGFjaXR5IDIwMG1zO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBbaW1hZ2VdIHtcbiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uOiB0cmFuc2Zvcm0gMjAwbXM7XG4gICAgICAgICAgICB9XG4gICAgICAgICJdfQ== */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvZm9ybS1maWVsZHMvc3JjL2xpYi9pbWFnZS1saXN0LWZpZWxkLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1lBQ1k7Z0JBQ0ksV0FBVztZQUNmOztZQUVBO2dCQUNJLDRCQUE0QjtZQUNoQzs7WUFFQTs7Z0JBRUkscUJBQXFCO1lBQ3pCOztZQUVBO2dCQUNJLHVCQUF1QjtZQUMzQjs7WUFFQTs7Z0JBRUkseUJBQXlCO1lBQzdCOztZQUVBO2dCQUNJLDJCQUEyQjtZQUMvQjs7QUFFWix3dENBQXd0QyIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgOmhvc3Qge1xuICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBbb3ZlcmxheV0ge1xuICAgICAgICAgICAgICAgIHRyYW5zaXRpb246IGJhY2tncm91bmQgMjAwbXM7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIFtpbWFnZV06aG92ZXIgW2FjdGlvbnNdLFxuICAgICAgICAgICAgW2ltYWdlXTpob3ZlciA+IGFwcC1pY29uIHtcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAxICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIFtpbWFnZV06aG92ZXIgW2JnXSB7XG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMC40ICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIFthY3Rpb25zXSxcbiAgICAgICAgICAgIFtpbWFnZV0gPiBhcHAtaWNvbiB7XG4gICAgICAgICAgICAgICAgdHJhbnNpdGlvbjogb3BhY2l0eSAyMDBtcztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgW2ltYWdlXSB7XG4gICAgICAgICAgICAgICAgdHJhbnNpdGlvbjogdHJhbnNmb3JtIDIwMG1zO1xuICAgICAgICAgICAgfVxuICAgICAgICAiXSwic291cmNlUm9vdCI6IiJ9 */"]
});
exports.ImageListFieldComponent = ImageListFieldComponent;

/***/ }),

/***/ 20212:
/*!***************************************************************!*\
  !*** ./libs/form-fields/src/lib/item-list-field.component.ts ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _createForOfIteratorHelper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createForOfIteratorHelper.js */ 36350)["default"]);
var _ItemListFieldComponent;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.ItemListFieldComponent = void 0;
exports.addChipItem = addChipItem;
exports.removeChipItem = removeChipItem;
var core_1 = __webpack_require__(/*! @angular/core */ 37580);
var forms_1 = __webpack_require__(/*! @angular/forms */ 34456);
var keycodes_1 = __webpack_require__(/*! @angular/cdk/keycodes */ 74879);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @angular/common */ 60316);
var i2 = __webpack_require__(/*! @angular/material/form-field */ 24950);
var i3 = __webpack_require__(/*! @angular/material/chips */ 12772);
var i4 = __webpack_require__(/*! ../../../components/src/lib/icon.component */ 69434);
function ItemListFieldComponent_mat_chip_row_3_Template(rf, ctx) {
  if (rf & 1) {
    var _r2 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "mat-chip-row", 5);
    i0.ɵɵlistener("removed", function ItemListFieldComponent_mat_chip_row_3_Template_mat_chip_row_removed_0_listener() {
      var item_r3 = i0.ɵɵrestoreView(_r2).$implicit;
      var ctx_r3 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r3.remove(item_r3));
    });
    i0.ɵɵelementStart(1, "span", 6);
    i0.ɵɵtext(2);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(3, "button", 7)(4, "app-icon");
    i0.ɵɵtext(5, "cancel");
    i0.ɵɵelementEnd()()();
  }
  if (rf & 2) {
    var item_r3 = ctx.$implicit;
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate(item_r3);
    i0.ɵɵadvance();
    i0.ɵɵattribute("aria-label", "Remove " + item_r3);
  }
}
/**
 * Add a tag to the list of tags for the item
 * @param event Input event
 */
function addChipItem(control, event) {
  if (!control) return;
  var input = event.input;
  var value = event.value;
  var item_list = control.value;
  if (value.includes(',')) {
    var list = value.split(',');
    var _iterator = _createForOfIteratorHelper(list),
      _step;
    try {
      for (_iterator.s(); !(_step = _iterator.n()).done;) {
        var item = _step.value;
        if ((item || '').trim()) {
          item_list.push(item.trim());
          control.setValue(item_list);
        }
      }
    } catch (err) {
      _iterator.e(err);
    } finally {
      _iterator.f();
    }
  } else {
    if ((value || '').trim()) {
      item_list.push(value.trim());
      control.setValue(item_list);
    }
  }
  // Reset the input value
  if (input) {
    input.value = '';
  }
}
/**
 * Remove tag from the list
 * @param existing_tag Tag to remove
 */
function removeChipItem(control, item) {
  if (!control) {
    return;
  }
  var item_list = control.value;
  var index = item_list.indexOf(item);
  if (index >= 0) {
    item_list.splice(index, 1);
    control.setValue(item_list);
  }
}
var ItemListFieldComponent = /*#__PURE__*/function () {
  function ItemListFieldComponent() {
    var _this = this;
    _classCallCheck(this, ItemListFieldComponent);
    this.separators = [keycodes_1.ENTER, keycodes_1.COMMA];
    this.placeholder = '';
    /** List of items stored */
    this.value = [];
    /**
     * Add the `step` to the current value
     */
    this.add = function (e) {
      return addChipItem({
        value: _this.value,
        setValue: function setValue(i) {
          return _this.setValue(i);
        }
      }, e);
    };
    /** Remove the `step` from the current value */
    this.remove = function (item) {
      return removeChipItem({
        value: _this.value,
        setValue: function setValue(i) {
          return _this.setValue(i);
        }
      }, item);
    };
  }
  /**
   * Update the form field value
   * @param new_value New value to set on the form field
   */
  return _createClass(ItemListFieldComponent, [{
    key: "setValue",
    value: function setValue(new_value) {
      this.value = new_value;
      /* istanbul ignore else */
      if (this._onChange) {
        this._onChange(new_value);
      }
    }
    /**
     * Update local value when form control value is changed
     * @param value The new value for the component
     */
  }, {
    key: "writeValue",
    value: function writeValue(value) {
      this.value = value;
    }
    /* istanbul ignore next */
    /**
     * Registers a callback function that is called when the control's value changes in the UI.
     * @param fn The callback function to register
     */
  }, {
    key: "registerOnChange",
    value: function registerOnChange(fn) {
      this._onChange = fn;
    }
    /* istanbul ignore next */
    /**
     * Registers a callback function is called by the forms API on initialization to update the form model on blur.
     * @param fn The callback function to register
     */
  }, {
    key: "registerOnTouched",
    value: function registerOnTouched(fn) {
      this._onTouch = fn;
    }
  }]);
}();
_ItemListFieldComponent = ItemListFieldComponent;
_ItemListFieldComponent.ɵfac = function ItemListFieldComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _ItemListFieldComponent)();
};
_ItemListFieldComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _ItemListFieldComponent,
  selectors: [["item-list-field"]],
  inputs: {
    separators: "separators",
    placeholder: "placeholder"
  },
  features: [i0.ɵɵProvidersFeature([{
    provide: forms_1.NG_VALUE_ACCESSOR,
    /* istanbul ignore next */
    useExisting: (0, core_1.forwardRef)(function () {
      return _ItemListFieldComponent;
    }),
    multi: true
  }])],
  decls: 5,
  vars: 5,
  consts: [["chipList", ""], ["appearance", "outline", 1, "w-full"], ["aria-label", "Zone Tags"], [3, "removed", 4, "ngFor", "ngForOf"], [3, "matChipInputTokenEnd", "placeholder", "matChipInputFor", "matChipInputSeparatorKeyCodes", "matChipInputAddOnBlur"], [3, "removed"], [1, "truncate", "max-w-md"], ["matChipRemove", ""]],
  template: function ItemListFieldComponent_Template(rf, ctx) {
    if (rf & 1) {
      var _r1 = i0.ɵɵgetCurrentView();
      i0.ɵɵelementStart(0, "mat-form-field", 1)(1, "mat-chip-grid", 2, 0);
      i0.ɵɵtemplate(3, ItemListFieldComponent_mat_chip_row_3_Template, 6, 2, "mat-chip-row", 3);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(4, "input", 4);
      i0.ɵɵlistener("matChipInputTokenEnd", function ItemListFieldComponent_Template_input_matChipInputTokenEnd_4_listener($event) {
        i0.ɵɵrestoreView(_r1);
        return i0.ɵɵresetView(ctx.add($event));
      });
      i0.ɵɵelementEnd()();
    }
    if (rf & 2) {
      var chipList_r5 = i0.ɵɵreference(2);
      i0.ɵɵadvance(3);
      i0.ɵɵproperty("ngForOf", ctx.value);
      i0.ɵɵadvance();
      i0.ɵɵproperty("placeholder", ctx.placeholder || "User groups...")("matChipInputFor", chipList_r5)("matChipInputSeparatorKeyCodes", ctx.separators)("matChipInputAddOnBlur", true);
    }
  },
  dependencies: [i1.NgForOf, i2.MatFormField, i3.MatChipGrid, i3.MatChipInput, i3.MatChipRemove, i3.MatChipRow, i4.IconComponent]
});
exports.ItemListFieldComponent = ItemListFieldComponent;

/***/ }),

/***/ 12863:
/*!*****************************************************!*\
  !*** ./libs/form-fields/src/lib/place-user.pipe.ts ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _regeneratorRuntime = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/regeneratorRuntime.js */ 8698)["default"]);
var _asyncToGenerator = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/asyncToGenerator.js */ 95386)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _PlaceUserPipe;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.PlaceUserPipe = void 0;
var user_class_1 = __webpack_require__(/*! ../../../users/src/lib/user.class */ 93693);
var ts_client_1 = __webpack_require__(/*! @placeos/ts-client */ 35713);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var USER_LIST = [];
var EMPTY_USER = new user_class_1.StaffUser();
var PlaceUserPipe = /*#__PURE__*/function () {
  function PlaceUserPipe() {
    _classCallCheck(this, PlaceUserPipe);
  }
  return _createClass(PlaceUserPipe, [{
    key: "transform",
    value: (
    /**
     * Get details of the user with the given ID
     * @param user_id ID or Email of the user
     */
    function () {
      var _transform = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(user_id) {
        var user;
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              if (user_id) {
                _context.next = 2;
                break;
              }
              return _context.abrupt("return", EMPTY_USER);
            case 2:
              user = USER_LIST.find(function (_ref) {
                var id = _ref.id,
                  email = _ref.email;
                return id === user_id || email === user_id;
              });
              if (!user) {
                _context.next = 5;
                break;
              }
              return _context.abrupt("return", user);
            case 5:
              _context.next = 7;
              return (0, ts_client_1.showUser)(user_id).toPromise()["catch"](function () {
                return null;
              });
            case 7:
              user = _context.sent;
              if (!user) {
                _context.next = 12;
                break;
              }
              user = new user_class_1.StaffUser(user);
              USER_LIST.push(user);
              return _context.abrupt("return", user);
            case 12:
              return _context.abrupt("return", EMPTY_USER);
            case 13:
            case "end":
              return _context.stop();
          }
        }, _callee);
      }));
      function transform(_x) {
        return _transform.apply(this, arguments);
      }
      return transform;
    }())
  }]);
}();
_PlaceUserPipe = PlaceUserPipe;
_PlaceUserPipe.ɵfac = function PlaceUserPipe_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _PlaceUserPipe)();
};
_PlaceUserPipe.ɵpipe = /*@__PURE__*/i0.ɵɵdefinePipe({
  name: "placeuser",
  type: _PlaceUserPipe,
  pure: true
});
exports.PlaceUserPipe = PlaceUserPipe;

/***/ }),

/***/ 83138:
/*!****************************************************************!*\
  !*** ./libs/form-fields/src/lib/recurrence-field.component.ts ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _objectSpread = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/objectSpread2.js */ 34092)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _RecurrenceFieldComponent;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.RecurrenceFieldComponent = void 0;
var core_1 = __webpack_require__(/*! @angular/core */ 37580);
var forms_1 = __webpack_require__(/*! @angular/forms */ 34456);
var dialog_1 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var helpers_1 = __webpack_require__(/*! libs/events/src/lib/helpers */ 37420);
var recurrence_modal_component_1 = __webpack_require__(/*! ./recurrence-modal.component */ 375);
var date_fns_1 = __webpack_require__(/*! date-fns */ 25773);
var settings_service_1 = __webpack_require__(/*! libs/common/src/lib/settings.service */ 14233);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var i2 = __webpack_require__(/*! libs/common/src/lib/settings.service */ 14233);
var i3 = __webpack_require__(/*! @angular/common */ 60316);
var i4 = __webpack_require__(/*! @angular/forms */ 34456);
var i5 = __webpack_require__(/*! @angular/material/form-field */ 24950);
var i6 = __webpack_require__(/*! @angular/material/select */ 25175);
var i7 = __webpack_require__(/*! @angular/material/core */ 74646);
function RecurrenceFieldComponent_mat_option_12_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "mat-option", 8);
    i0.ɵɵtext(1);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r0 = i0.ɵɵnextContext();
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", ctx_r0.formatted_value, " ");
  }
}
var RecurrenceFieldComponent = /*#__PURE__*/function () {
  function RecurrenceFieldComponent(_dialog, _settings) {
    _classCallCheck(this, RecurrenceFieldComponent);
    this._dialog = _dialog;
    this._settings = _settings;
    /** Size of a single step */
    this.date = Date.now();
    this.value = {
      pattern: 'none'
    };
  }
  return _createClass(RecurrenceFieldComponent, [{
    key: "ngOnChanges",
    value: function ngOnChanges(changes) {
      if (changes.date && this.date) {
        var date = new Date(this.date).getDate();
        var instance = Math.floor(date / 7) + (date % 7 ? 1 : 0);
        this.instance_of_month = "".concat(instance).concat(instance === 2 ? 'nd' : instance === 3 ? 'rd' : 'th');
        if (instance === 4 && date >= 25 || instance === 5) this.instance_of_month = 'Last';
        if (instance === 1) this.instance_of_month = 'First';
        this.value = _objectSpread(_objectSpread({}, this.value), {}, {
          start: this.date,
          days_of_week: !this.value.pattern ? [new Date(this.date).getDay()] : this.value.days_of_week
        });
        this.setValue(this.value);
      }
    }
  }, {
    key: "formatted_value",
    get: function get() {
      return (0, helpers_1.formatRecurrence)(this.value);
    }
    /**
     * Update the form field value
     * @param new_value New value to set on the form field
     */
  }, {
    key: "setValue",
    value: function setValue(new_value) {
      this.value = new_value;
      /* istanbul ignore else */
      if (this._onChange) {
        this._onChange(new_value);
      }
    }
    /**
     * Update local value when form control value is changed
     * @param value The new value for the component
     */
  }, {
    key: "writeValue",
    value: function writeValue(value) {
      this.value = value || {};
    }
    /* istanbul ignore next */
    /**
     * Registers a callback function that is called when the control's value changes in the UI.
     * @param fn The callback function to register
     */
  }, {
    key: "registerOnChange",
    value: function registerOnChange(fn) {
      this._onChange = fn;
    }
    /* istanbul ignore next */
    /**
     * Registers a callback function is called by the forms API on initialization to update the form model on blur.
     * @param fn The callback function to register
     */
  }, {
    key: "registerOnTouched",
    value: function registerOnTouched(fn) {
      this._onTouch = fn;
    }
  }, {
    key: "openCustomRecurrenceModal",
    value: function openCustomRecurrenceModal() {
      var _this = this;
      if (!this.value.pattern) {
        this.value.days_of_week = [new Date(this.date).getDay()];
      }
      var ref = this._dialog.open(recurrence_modal_component_1.RecurrenceModalComponent, {
        data: {
          value: this.value
        }
      });
      this.setValue(_objectSpread(_objectSpread({}, this.value), {}, {
        _pattern: 'none'
      }));
      ref.afterClosed().subscribe(function (data) {
        _this.setValue(_objectSpread(_objectSpread({}, data || _this.value), {}, {
          _pattern: data ? 'custom_display' : _this.old_value
        }));
      });
    }
  }, {
    key: "setSimple",
    value: function setSimple(pattern) {
      var day_of_week = new Date(this.date).getDay();
      var default_recurrence = this._settings.get('app.default_recurrence_period') || 180;
      this.old_value = this.value._pattern;
      if (pattern === 'none') {
        this.setValue({
          pattern: null,
          _pattern: 'none',
          days_of_week: [day_of_week]
        });
      } else if (pattern === 'daily') {
        this.setValue({
          pattern: pattern,
          _pattern: pattern,
          start: this.date,
          end: (0, date_fns_1.endOfDay)((0, date_fns_1.addDays)(this.date, default_recurrence)).valueOf(),
          days_of_week: [day_of_week],
          interval: 1
        });
      } else if (pattern === 'weekly') {
        this.setValue({
          pattern: pattern,
          _pattern: pattern,
          start: this.date,
          end: (0, date_fns_1.endOfDay)((0, date_fns_1.addDays)(this.date, default_recurrence)).valueOf(),
          days_of_week: [day_of_week],
          interval: 1
        });
      } else if (pattern === 'monthly') {
        this.setValue({
          pattern: pattern,
          _pattern: pattern,
          start: this.date,
          end: (0, date_fns_1.endOfDay)((0, date_fns_1.addDays)(this.date, default_recurrence)).valueOf(),
          days_of_week: [day_of_week],
          interval: 1
        });
      } else if (pattern === 'yearly') {
        this.setValue({
          pattern: pattern,
          _pattern: pattern,
          start: this.date,
          end: (0, date_fns_1.addYears)(this.date, 7).valueOf(),
          days_of_week: [day_of_week],
          interval: 1
        });
      }
    }
  }]);
}();
_RecurrenceFieldComponent = RecurrenceFieldComponent;
_RecurrenceFieldComponent.ɵfac = function RecurrenceFieldComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _RecurrenceFieldComponent)(i0.ɵɵdirectiveInject(i1.MatDialog), i0.ɵɵdirectiveInject(i2.SettingsService));
};
_RecurrenceFieldComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _RecurrenceFieldComponent,
  selectors: [["recurrence-field"]],
  inputs: {
    date: "date"
  },
  features: [i0.ɵɵProvidersFeature([{
    provide: forms_1.NG_VALUE_ACCESSOR,
    /* istanbul ignore next */
    useExisting: (0, core_1.forwardRef)(function () {
      return _RecurrenceFieldComponent;
    }),
    multi: true
  }]), i0.ɵɵNgOnChangesFeature],
  decls: 15,
  vars: 11,
  consts: [["appearance", "outline", 1, "w-full"], ["placeholder", "Doesn't repeat", 3, "ngModelChange", "ngModel"], ["value", "none"], ["value", "daily"], ["value", "weekly"], ["value", "monthly"], ["value", "custom_display", 4, "ngIf"], ["value", "custom", 3, "click"], ["value", "custom_display"]],
  template: function RecurrenceFieldComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵelementStart(0, "mat-form-field", 0)(1, "mat-select", 1);
      i0.ɵɵlistener("ngModelChange", function RecurrenceFieldComponent_Template_mat_select_ngModelChange_1_listener($event) {
        return ctx.setSimple($event);
      });
      i0.ɵɵelementStart(2, "mat-option", 2);
      i0.ɵɵtext(3, "Doesn't repeat");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(4, "mat-option", 3);
      i0.ɵɵtext(5, "Daily");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(6, "mat-option", 4);
      i0.ɵɵtext(7);
      i0.ɵɵpipe(8, "date");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(9, "mat-option", 5);
      i0.ɵɵtext(10);
      i0.ɵɵpipe(11, "date");
      i0.ɵɵelementEnd();
      i0.ɵɵtemplate(12, RecurrenceFieldComponent_mat_option_12_Template, 2, 1, "mat-option", 6);
      i0.ɵɵelementStart(13, "mat-option", 7);
      i0.ɵɵlistener("click", function RecurrenceFieldComponent_Template_mat_option_click_13_listener() {
        return ctx.openCustomRecurrenceModal();
      });
      i0.ɵɵtext(14, " Custom... ");
      i0.ɵɵelementEnd()()();
    }
    if (rf & 2) {
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngModel", ctx.value._pattern);
      i0.ɵɵadvance(6);
      i0.ɵɵtextInterpolate1(" Weekly on ", i0.ɵɵpipeBind2(8, 5, ctx.date, "EEEE"), " ");
      i0.ɵɵadvance(3);
      i0.ɵɵtextInterpolate2(" ", ctx.instance_of_month, " ", i0.ɵɵpipeBind2(11, 8, ctx.date, "EEEE"), " of Month ");
      i0.ɵɵadvance(2);
      i0.ɵɵproperty("ngIf", ctx.value._pattern === "custom_display");
    }
  },
  dependencies: [i3.NgIf, i4.NgControlStatus, i4.NgModel, i5.MatFormField, i6.MatSelect, i7.MatOption, i3.DatePipe],
  styles: ["[value][_ngcontent-%COMP%] {\n                min-width: 3em;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlY3VycmVuY2UtZmllbGQuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxjQUFjO1lBQ2xCIiwiZmlsZSI6InJlY3VycmVuY2UtZmllbGQuY29tcG9uZW50LnRzIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICBbdmFsdWVdIHtcbiAgICAgICAgICAgICAgICBtaW4td2lkdGg6IDNlbTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl19 */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvZm9ybS1maWVsZHMvc3JjL2xpYi9yZWN1cnJlbmNlLWZpZWxkLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1lBQ1k7Z0JBQ0ksY0FBYztZQUNsQjs7QUFFWiw0WEFBNFgiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIFt2YWx1ZV0ge1xuICAgICAgICAgICAgICAgIG1pbi13aWR0aDogM2VtO1xuICAgICAgICAgICAgfVxuICAgICAgICAiXSwic291cmNlUm9vdCI6IiJ9 */"]
});
exports.RecurrenceFieldComponent = RecurrenceFieldComponent;

/***/ }),

/***/ 375:
/*!****************************************************************!*\
  !*** ./libs/form-fields/src/lib/recurrence-modal.component.ts ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _objectSpread = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/objectSpread2.js */ 34092)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _RecurrenceModalComponent;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.RecurrenceModalComponent = void 0;
var dialog_1 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var date_fns_1 = __webpack_require__(/*! date-fns */ 25773);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
function RecurrenceModalComponent_h2_20_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "h2", 24);
    i0.ɵɵtext(1, " Repeat on ");
    i0.ɵɵelementEnd();
  }
}
function RecurrenceModalComponent_div_21_Template(rf, ctx) {
  if (rf & 1) {
    var _r1 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 25)(1, "button", 26);
    i0.ɵɵlistener("click", function RecurrenceModalComponent_div_21_Template_button_click_1_listener() {
      i0.ɵɵrestoreView(_r1);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.toggleDayOfWeek(0));
    });
    i0.ɵɵtext(2, " S ");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(3, "button", 26);
    i0.ɵɵlistener("click", function RecurrenceModalComponent_div_21_Template_button_click_3_listener() {
      i0.ɵɵrestoreView(_r1);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.toggleDayOfWeek(1));
    });
    i0.ɵɵtext(4, " M ");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(5, "button", 26);
    i0.ɵɵlistener("click", function RecurrenceModalComponent_div_21_Template_button_click_5_listener() {
      i0.ɵɵrestoreView(_r1);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.toggleDayOfWeek(2));
    });
    i0.ɵɵtext(6, " T ");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(7, "button", 26);
    i0.ɵɵlistener("click", function RecurrenceModalComponent_div_21_Template_button_click_7_listener() {
      i0.ɵɵrestoreView(_r1);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.toggleDayOfWeek(3));
    });
    i0.ɵɵtext(8, " W ");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(9, "button", 26);
    i0.ɵɵlistener("click", function RecurrenceModalComponent_div_21_Template_button_click_9_listener() {
      i0.ɵɵrestoreView(_r1);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.toggleDayOfWeek(4));
    });
    i0.ɵɵtext(10, " T ");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(11, "button", 26);
    i0.ɵɵlistener("click", function RecurrenceModalComponent_div_21_Template_button_click_11_listener() {
      i0.ɵɵrestoreView(_r1);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.toggleDayOfWeek(5));
    });
    i0.ɵɵtext(12, " F ");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(13, "button", 26);
    i0.ɵɵlistener("click", function RecurrenceModalComponent_div_21_Template_button_click_13_listener() {
      i0.ɵɵrestoreView(_r1);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.toggleDayOfWeek(6));
    });
    i0.ɵɵtext(14, " S ");
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance();
    i0.ɵɵclassProp("inverse", !(ctx_r1.data.days_of_week == null ? null : ctx_r1.data.days_of_week.includes(0)));
    i0.ɵɵadvance(2);
    i0.ɵɵclassProp("inverse", !(ctx_r1.data.days_of_week == null ? null : ctx_r1.data.days_of_week.includes(1)));
    i0.ɵɵadvance(2);
    i0.ɵɵclassProp("inverse", !(ctx_r1.data.days_of_week == null ? null : ctx_r1.data.days_of_week.includes(2)));
    i0.ɵɵadvance(2);
    i0.ɵɵclassProp("inverse", !(ctx_r1.data.days_of_week == null ? null : ctx_r1.data.days_of_week.includes(3)));
    i0.ɵɵadvance(2);
    i0.ɵɵclassProp("inverse", !(ctx_r1.data.days_of_week == null ? null : ctx_r1.data.days_of_week.includes(4)));
    i0.ɵɵadvance(2);
    i0.ɵɵclassProp("inverse", !(ctx_r1.data.days_of_week == null ? null : ctx_r1.data.days_of_week.includes(5)));
    i0.ɵɵadvance(2);
    i0.ɵɵclassProp("inverse", !(ctx_r1.data.days_of_week == null ? null : ctx_r1.data.days_of_week.includes(6)));
  }
}
var RecurrenceModalComponent = /*#__PURE__*/function () {
  function RecurrenceModalComponent(_data) {
    _classCallCheck(this, RecurrenceModalComponent);
    this._data = _data;
    this.data = _objectSpread(_objectSpread({}, this._data.value), {}, {
      end: this._data.value.end || (0, date_fns_1.addDays)(new Date(), 7).valueOf(),
      interval: this._data.value.interval || 1,
      pattern: this._data.value.pattern ? this._data.value.pattern : 'weekly',
      occurrences: this._data.value.occurrences || 1
    });
    this.ends_key = 'never';
  }
  return _createClass(RecurrenceModalComponent, [{
    key: "toggleDayOfWeek",
    value: function toggleDayOfWeek(day) {
      if (!this.data.days_of_week) this.data.days_of_week = [];
      if (this.data.days_of_week.includes(day)) {
        this.data.days_of_week = this.data.days_of_week.filter(function (d) {
          return d !== day;
        });
      } else this.data.days_of_week.push(day);
    }
  }]);
}();
_RecurrenceModalComponent = RecurrenceModalComponent;
_RecurrenceModalComponent.ɵfac = function RecurrenceModalComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _RecurrenceModalComponent)(i0.ɵɵdirectiveInject(dialog_1.MAT_DIALOG_DATA));
};
_RecurrenceModalComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _RecurrenceModalComponent,
  selectors: [["recurrence-modal"]],
  decls: 42,
  vars: 13,
  consts: [["btn", "", "icon", "", "mat-dialog-close", "", "matRipple", ""], [1, "p-4"], [1, "flex", "items-center", "space-x-2", "mb-4"], ["appearance", "outline", 1, "w-16"], ["matInput", "", "type", "number", 3, "ngModelChange", "ngModel"], ["appearance", "outline"], [3, "ngModelChange", "ngModel"], ["value", "daily"], ["value", "weekly"], ["value", "month_day"], ["for", "repeat-on", "class", "mb-2", 4, "ngIf"], ["class", "flex items-center space-x-2 mb-4", "name", "repeat-on", 4, "ngIf"], ["for", "ends-at"], ["name", "ends-at", 3, "ngModelChange", "ngModel"], [1, "flex", "items-center"], ["value", "never", 3, "click"], [1, "flex", "items-center", "space-x-2"], ["value", "on"], [3, "ngModelChange", "ngModel", "disabled"], ["value", "after"], ["matInput", "", "type", "number", 3, "ngModelChange", "ngModel", "disabled"], ["matSuffix", ""], [1, "px-4", "py-2", "flex", "items-center", "justify-end", "border-t", "border-base-200"], ["btn", "", "matRipple", "", 1, "w-32", 3, "click", "mat-dialog-close"], ["for", "repeat-on", 1, "mb-2"], ["name", "repeat-on", 1, "flex", "items-center", "space-x-2", "mb-4"], ["btn", "", "matRipple", "", 1, "w-12", 3, "click"]],
  template: function RecurrenceModalComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵelementStart(0, "header")(1, "h2");
      i0.ɵɵtext(2, "Custom Recurrence");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(3, "button", 0)(4, "app-icon");
      i0.ɵɵtext(5, "close");
      i0.ɵɵelementEnd()()();
      i0.ɵɵelementStart(6, "main", 1)(7, "div", 2)(8, "div");
      i0.ɵɵtext(9, "Repeat every");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(10, "mat-form-field", 3)(11, "input", 4);
      i0.ɵɵtwoWayListener("ngModelChange", function RecurrenceModalComponent_Template_input_ngModelChange_11_listener($event) {
        i0.ɵɵtwoWayBindingSet(ctx.data.interval, $event) || (ctx.data.interval = $event);
        return $event;
      });
      i0.ɵɵelementEnd()();
      i0.ɵɵelementStart(12, "mat-form-field", 5)(13, "mat-select", 6);
      i0.ɵɵtwoWayListener("ngModelChange", function RecurrenceModalComponent_Template_mat_select_ngModelChange_13_listener($event) {
        i0.ɵɵtwoWayBindingSet(ctx.data.pattern, $event) || (ctx.data.pattern = $event);
        return $event;
      });
      i0.ɵɵelementStart(14, "mat-option", 7);
      i0.ɵɵtext(15);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(16, "mat-option", 8);
      i0.ɵɵtext(17);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(18, "mat-option", 9);
      i0.ɵɵtext(19);
      i0.ɵɵelementEnd()()()();
      i0.ɵɵtemplate(20, RecurrenceModalComponent_h2_20_Template, 2, 0, "h2", 10)(21, RecurrenceModalComponent_div_21_Template, 15, 14, "div", 11);
      i0.ɵɵelementStart(22, "h2", 12);
      i0.ɵɵtext(23, "Ends");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(24, "mat-radio-group", 13);
      i0.ɵɵtwoWayListener("ngModelChange", function RecurrenceModalComponent_Template_mat_radio_group_ngModelChange_24_listener($event) {
        i0.ɵɵtwoWayBindingSet(ctx.ends_key, $event) || (ctx.ends_key = $event);
        return $event;
      });
      i0.ɵɵelementStart(25, "div", 14)(26, "mat-radio-button", 15);
      i0.ɵɵlistener("click", function RecurrenceModalComponent_Template_mat_radio_button_click_26_listener() {
        return ctx.data.occurrences = 0;
      });
      i0.ɵɵtext(27, " Never ");
      i0.ɵɵelementEnd()();
      i0.ɵɵelementStart(28, "div", 16)(29, "mat-radio-button", 17);
      i0.ɵɵtext(30, "On");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(31, "a-date-field", 18);
      i0.ɵɵtwoWayListener("ngModelChange", function RecurrenceModalComponent_Template_a_date_field_ngModelChange_31_listener($event) {
        i0.ɵɵtwoWayBindingSet(ctx.data.end, $event) || (ctx.data.end = $event);
        return $event;
      });
      i0.ɵɵelementEnd()();
      i0.ɵɵelementStart(32, "div", 16)(33, "mat-radio-button", 19);
      i0.ɵɵtext(34, "After");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(35, "mat-form-field", 5)(36, "input", 20);
      i0.ɵɵtwoWayListener("ngModelChange", function RecurrenceModalComponent_Template_input_ngModelChange_36_listener($event) {
        i0.ɵɵtwoWayBindingSet(ctx.data.occurrences, $event) || (ctx.data.occurrences = $event);
        return $event;
      });
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(37, "span", 21);
      i0.ɵɵtext(38, "occurences");
      i0.ɵɵelementEnd()()()()();
      i0.ɵɵelementStart(39, "footer", 22)(40, "button", 23);
      i0.ɵɵlistener("click", function RecurrenceModalComponent_Template_button_click_40_listener() {
        return ctx.data.occurrences = ctx.ends_key === "never" ? 0 : ctx.data.occurrences;
      });
      i0.ɵɵtext(41, " Save ");
      i0.ɵɵelementEnd()();
    }
    if (rf & 2) {
      i0.ɵɵadvance(11);
      i0.ɵɵtwoWayProperty("ngModel", ctx.data.interval);
      i0.ɵɵadvance(2);
      i0.ɵɵtwoWayProperty("ngModel", ctx.data.pattern);
      i0.ɵɵadvance(2);
      i0.ɵɵtextInterpolate1(" day", ctx.data.interval === 1 ? "" : "s", " ");
      i0.ɵɵadvance(2);
      i0.ɵɵtextInterpolate1(" week", ctx.data.interval === 1 ? "" : "s", " ");
      i0.ɵɵadvance(2);
      i0.ɵɵtextInterpolate1(" month", ctx.data.interval === 1 ? "" : "s", " ");
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", ctx.data.pattern === "weekly");
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", ctx.data.pattern === "weekly");
      i0.ɵɵadvance(3);
      i0.ɵɵtwoWayProperty("ngModel", ctx.ends_key);
      i0.ɵɵadvance(7);
      i0.ɵɵtwoWayProperty("ngModel", ctx.data.end);
      i0.ɵɵproperty("disabled", ctx.ends_key !== "on");
      i0.ɵɵadvance(5);
      i0.ɵɵtwoWayProperty("ngModel", ctx.data.occurrences);
      i0.ɵɵproperty("disabled", ctx.ends_key !== "after");
      i0.ɵɵadvance(4);
      i0.ɵɵproperty("mat-dialog-close", ctx.data);
    }
  },
  styles: ["mat-form-field[_ngcontent-%COMP%], \n   a-date-field[_ngcontent-%COMP%] {\n                height: 3.25rem;\n            }\n\n            mat-radio-button[_ngcontent-%COMP%] {\n                width: 8rem;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlY3VycmVuY2UtbW9kYWwuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTs7Z0JBRUksZUFBZTtZQUNuQjs7WUFFQTtnQkFDSSxXQUFXO1lBQ2YiLCJmaWxlIjoicmVjdXJyZW5jZS1tb2RhbC5jb21wb25lbnQudHMiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIG1hdC1mb3JtLWZpZWxkLFxuICAgICAgICAgICAgYS1kYXRlLWZpZWxkIHtcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDMuMjVyZW07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIG1hdC1yYWRpby1idXR0b24ge1xuICAgICAgICAgICAgICAgIHdpZHRoOiA4cmVtO1xuICAgICAgICAgICAgfVxuICAgICAgICAiXX0= */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvZm9ybS1maWVsZHMvc3JjL2xpYi9yZWN1cnJlbmNlLW1vZGFsLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1lBQ1k7O2dCQUVJLGVBQWU7WUFDbkI7O1lBRUE7Z0JBQ0ksV0FBVztZQUNmOztBQUVaLG9qQkFBb2pCIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICBtYXQtZm9ybS1maWVsZCxcbiAgICAgICAgICAgIGEtZGF0ZS1maWVsZCB7XG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAzLjI1cmVtO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBtYXQtcmFkaW8tYnV0dG9uIHtcbiAgICAgICAgICAgICAgICB3aWR0aDogOHJlbTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl0sInNvdXJjZVJvb3QiOiIifQ== */"]
});
exports.RecurrenceModalComponent = RecurrenceModalComponent;

/***/ }),

/***/ 81772:
/*!***************************************************************!*\
  !*** ./libs/form-fields/src/lib/rich-text-input.component.ts ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _callSuper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/callSuper.js */ 8513)["default"]);
var _inherits = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/inherits.js */ 58160)["default"]);
var _RichTextInputComponent;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.RichTextInputComponent = void 0;
var core_1 = __webpack_require__(/*! @angular/core */ 37580);
var forms_1 = __webpack_require__(/*! @angular/forms */ 34456);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var quill_1 = __webpack_require__(/*! quill */ 83890);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var _c0 = ["container"];
var _c1 = ["editor"];
var RichTextInputComponent = /*#__PURE__*/function (_common_1$AsyncHandle) {
  function RichTextInputComponent() {
    var _this;
    _classCallCheck(this, RichTextInputComponent);
    _this = _callSuper(this, RichTextInputComponent, arguments);
    _this.placeholder = '';
    _this.readonly = false;
    _this.images_allowed = false;
    _this._updateFn = function () {
      return _this.setValue(_this._editor.root.innerHTML);
    };
    _this.registerOnChange = function (fn) {
      return _this._onChange = fn;
    };
    _this.registerOnTouched = function (fn) {
      return _this._onTouch = fn;
    };
    return _this;
  }
  _inherits(RichTextInputComponent, _common_1$AsyncHandle);
  return _createClass(RichTextInputComponent, [{
    key: "ngOnChanges",
    value: function ngOnChanges(changes) {
      var _this2 = this;
      if (changes.images_allowed) {
        this.timeout('init', function () {
          return _this2._initialiseEditor();
        });
      }
    }
  }, {
    key: "ngAfterViewInit",
    value: function ngAfterViewInit() {
      var _this3 = this;
      this.timeout('init', function () {
        return _this3._initialiseEditor();
      });
    }
    /**
     * Update the form field value
     * @param new_value New value to set on the form field
     */
  }, {
    key: "setValue",
    value: function setValue(new_value) {
      /* istanbul ignore else */
      if (this._onChange) {
        this._onChange(new_value);
      }
    }
    /**
     * Update local value when form control value is changed
     * @param value The new value for the component
     */
  }, {
    key: "writeValue",
    value: function writeValue(value) {
      var _this4 = this;
      this.timeout('write', function () {
        if (_this4._editor) {
          var delta = _this4._editor.clipboard.convert({
            html: value
          });
          _this4._editor.setContents(delta, 'silent');
        } else {
          _this4.timeout('write', function () {
            return _this4.writeValue(value);
          });
        }
      });
    }
  }, {
    key: "_initialiseEditor",
    value: function _initialiseEditor() {
      var _this$_editor_el,
        _this$_container_el,
        _this5 = this;
      if (!((_this$_editor_el = this._editor_el) !== null && _this$_editor_el !== void 0 && _this$_editor_el.nativeElement) || !((_this$_container_el = this._container_el) !== null && _this$_container_el !== void 0 && _this$_container_el.nativeElement)) {
        return this.timeout('init', function () {
          return _this5._initialiseEditor();
        });
      }
      var toolbarOptions = [[{
        font: []
      }], [{
        header: [1, 2, 3, 4, 5, 6, false]
      }], ['bold', 'italic', 'underline'],
      // toggled buttons
      [{
        list: 'ordered'
      }, {
        list: 'bullet'
      }, {
        list: 'check'
      }], [{
        align: []
      }]];
      if (this.images_allowed) {
        toolbarOptions.push(['image', 'link']);
      }
      if (this._editor) {
        this.unsub('changes');
        this._editor_el.nativeElement.innerHTML = '';
        delete this._editor;
      }
      this._editor = new quill_1["default"](this._editor_el.nativeElement, {
        bounds: this._container_el.nativeElement,
        placeholder: this.placeholder,
        modules: {
          toolbar: {
            container: toolbarOptions,
            handlers: {
              image: function image() {
                return _this5._embedImage();
              },
              link: function link() {
                return _this5._embedAttachment();
              }
            }
          }
        },
        readOnly: this.readonly,
        theme: 'snow'
      });
      this._editor.on('text-change', this._updateFn);
      this.subscription('changes', function () {
        return _this5._editor.off('text-change', _this5._updateFn);
      });
    }
  }, {
    key: "_embedImage",
    value: function _embedImage() {
      var _this6 = this;
      if (!this._editor) return;
      var range = this._editor.getSelection();
      if (!range) return;
      var index = range.index;
      // Create a File input element
      var file_input = document.createElement('input');
      file_input.setAttribute('type', 'file');
      file_input.setAttribute('accept', 'image/*');
      file_input.click();
      file_input.onchange = function () {
        var file = file_input.files[0];
        (0, common_1.uploadFile)(file, true).subscribe(function (_ref) {
          var link = _ref.link,
            progress = _ref.progress;
          if (!link || progress !== 100) return;
          _this6._editor.insertEmbed(index, 'image', link);
        });
      };
    }
  }, {
    key: "_embedAttachment",
    value: function _embedAttachment() {
      var _this7 = this;
      if (!this._editor) return;
      var range = this._editor.getSelection();
      if (!range) return;
      var index = range.index;
      // Create a File input element
      var file_input = document.createElement('input');
      file_input.setAttribute('type', 'file');
      file_input.click();
      file_input.onchange = function () {
        var file = file_input.files[0];
        (0, common_1.uploadFile)(file, true).subscribe(function (_ref2) {
          var link = _ref2.link,
            progress = _ref2.progress;
          if (!link || progress !== 100) return;
          _this7._editor.insertText(range.index, file.name, 'link', link);
          _this7._editor.setSelection(range.index + file.name.length);
        });
      };
    }
  }]);
}(common_1.AsyncHandler);
_RichTextInputComponent = RichTextInputComponent;
_RichTextInputComponent.ɵfac = /*@__PURE__*/function () {
  var ɵRichTextInputComponent_BaseFactory;
  return function RichTextInputComponent_Factory(__ngFactoryType__) {
    return (ɵRichTextInputComponent_BaseFactory || (ɵRichTextInputComponent_BaseFactory = i0.ɵɵgetInheritedFactory(_RichTextInputComponent)))(__ngFactoryType__ || _RichTextInputComponent);
  };
}();
_RichTextInputComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _RichTextInputComponent,
  selectors: [["rich-text-input"]],
  viewQuery: function RichTextInputComponent_Query(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵviewQuery(_c0, 5);
      i0.ɵɵviewQuery(_c1, 5);
    }
    if (rf & 2) {
      var _t;
      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx._container_el = _t.first);
      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx._editor_el = _t.first);
    }
  },
  inputs: {
    placeholder: "placeholder",
    readonly: "readonly",
    images_allowed: "images_allowed"
  },
  features: [i0.ɵɵProvidersFeature([{
    provide: forms_1.NG_VALUE_ACCESSOR,
    /* istanbul ignore next */
    useExisting: (0, core_1.forwardRef)(function () {
      return _RichTextInputComponent;
    }),
    multi: true
  }]), i0.ɵɵInheritDefinitionFeature, i0.ɵɵNgOnChangesFeature],
  decls: 4,
  vars: 0,
  consts: [["container", ""], ["editor", ""], [1, "absolute", "inset-0"], [1, "h-full"]],
  template: function RichTextInputComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵelementStart(0, "div", 2, 0);
      i0.ɵɵelement(2, "div", 3, 1);
      i0.ɵɵelementEnd();
    }
  },
  styles: ["[_nghost-%COMP%] {\n                display: block;\n                position: relative;\n                min-height: 8rem;\n                margin-bottom: 4rem;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJpY2gtdGV4dC1pbnB1dC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLGNBQWM7Z0JBQ2Qsa0JBQWtCO2dCQUNsQixnQkFBZ0I7Z0JBQ2hCLG1CQUFtQjtZQUN2QiIsImZpbGUiOiJyaWNoLXRleHQtaW5wdXQuY29tcG9uZW50LnRzIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICA6aG9zdCB7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICAgICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgICAgICAgICAgIG1pbi1oZWlnaHQ6IDhyZW07XG4gICAgICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogNHJlbTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl19 */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvZm9ybS1maWVsZHMvc3JjL2xpYi9yaWNoLXRleHQtaW5wdXQuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxjQUFjO2dCQUNkLGtCQUFrQjtnQkFDbEIsZ0JBQWdCO2dCQUNoQixtQkFBbUI7WUFDdkI7O0FBRVosZ2tCQUFna0IiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIDpob3N0IHtcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICAgICAgICAgICAgbWluLWhlaWdodDogOHJlbTtcbiAgICAgICAgICAgICAgICBtYXJnaW4tYm90dG9tOiA0cmVtO1xuICAgICAgICAgICAgfVxuICAgICAgICAiXSwic291cmNlUm9vdCI6IiJ9 */"]
});
exports.RichTextInputComponent = RichTextInputComponent;

/***/ }),

/***/ 84809:
/*!****************************************************************!*\
  !*** ./libs/form-fields/src/lib/space-list-field.component.ts ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _taggedTemplateLiteral = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js */ 9959)["default"]);
var _toConsumableArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/toConsumableArray.js */ 86033)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _SpaceListFieldComponent, _templateObject, _templateObject2, _templateObject3, _templateObject4, _templateObject5, _templateObject6, _templateObject7, _templateObject8, _templateObject9;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.SpaceListFieldComponent = void 0;
var core_1 = __webpack_require__(/*! @angular/core */ 37580);
var forms_1 = __webpack_require__(/*! @angular/forms */ 34456);
var dialog_1 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var settings_service_1 = __webpack_require__(/*! libs/common/src/lib/settings.service */ 14233);
var new_space_select_modal_component_1 = __webpack_require__(/*! libs/spaces/src/lib/space-select-modal/new-space-select-modal.component */ 85752);
var organisation_1 = __webpack_require__(/*! @placeos/organisation */ 2510);
var rxjs_1 = __webpack_require__(/*! rxjs */ 15681);
var operators_1 = __webpack_require__(/*! rxjs/operators */ 97303);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! libs/common/src/lib/settings.service */ 14233);
var i2 = __webpack_require__(/*! @placeos/organisation */ 2510);
var i3 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var _c0 = function _c0() {
  return {
    standalone: true
  };
};
function SpaceListFieldComponent_div_15_img_2_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelement(0, "img", 30);
  }
  if (rf & 2) {
    var space_r2 = i0.ɵɵnextContext().$implicit;
    i0.ɵɵproperty("source", space_r2.images[0]);
  }
}
function SpaceListFieldComponent_div_15_ng_template_3_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelement(0, "img", 31);
  }
}
function SpaceListFieldComponent_div_15_Template(rf, ctx) {
  if (rf & 1) {
    var _r1 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 18)(1, "div", 19);
    i0.ɵɵtemplate(2, SpaceListFieldComponent_div_15_img_2_Template, 1, 1, "img", 20)(3, SpaceListFieldComponent_div_15_ng_template_3_Template, 1, 0, "ng-template", null, 0, i0.ɵɵtemplateRefExtractor);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(5, "div", 21)(6, "div", 22);
    i0.ɵɵtext(7);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(8, "div", 23)(9, "app-icon", 24);
    i0.ɵɵtext(10, "place");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(11, "p");
    i0.ɵɵtext(12);
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(13, "div", 23)(14, "app-icon", 24);
    i0.ɵɵtext(15, "people");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(16, "p");
    i0.ɵɵi18n(17, 6);
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(18, "div", 25)(19, "button", 26);
    i0.ɵɵlistener("click", function SpaceListFieldComponent_div_15_Template_button_click_19_listener() {
      var space_r2 = i0.ɵɵrestoreView(_r1).$implicit;
      var ctx_r2 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r2.changeSpaces(space_r2));
    });
    i0.ɵɵelementStart(20, "div", 27);
    i0.ɵɵi18nStart(21, 7);
    i0.ɵɵelement(22, "app-icon");
    i0.ɵɵi18nEnd();
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(23, "button", 28);
    i0.ɵɵlistener("click", function SpaceListFieldComponent_div_15_Template_button_click_23_listener() {
      var space_r2 = i0.ɵɵrestoreView(_r1).$implicit;
      var ctx_r2 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r2.removeSpace(space_r2));
    });
    i0.ɵɵelementStart(24, "div", 27);
    i0.ɵɵi18nStart(25, 8);
    i0.ɵɵelement(26, "app-icon");
    i0.ɵɵi18nEnd();
    i0.ɵɵelementEnd()()()();
    i0.ɵɵelementStart(27, "button", 29);
    i0.ɵɵlistener("click", function SpaceListFieldComponent_div_15_Template_button_click_27_listener() {
      var space_r2 = i0.ɵɵrestoreView(_r1).$implicit;
      var ctx_r2 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r2.toggleFavourite(space_r2));
    });
    i0.ɵɵelementStart(28, "app-icon");
    i0.ɵɵtext(29);
    i0.ɵɵelementEnd()()();
  }
  if (rf & 2) {
    var tmp_6_0;
    var space_r2 = ctx.$implicit;
    var placeholder_r4 = i0.ɵɵreference(4);
    var ctx_r2 = i0.ɵɵnextContext();
    i0.ɵɵadvance(2);
    i0.ɵɵproperty("ngIf", space_r2.images == null ? null : space_r2.images.length)("ngIfElse", placeholder_r4);
    i0.ɵɵadvance(5);
    i0.ɵɵtextInterpolate1(" ", space_r2.display_name || space_r2.name || "Meeting Space", " ");
    i0.ɵɵadvance(5);
    i0.ɵɵtextInterpolate1(" ", space_r2.location || ((tmp_6_0 = ctx_r2.level(space_r2.zones)) == null ? null : tmp_6_0.display_name) || ((tmp_6_0 = ctx_r2.level(space_r2.zones)) == null ? null : tmp_6_0.name), " ");
    i0.ɵɵadvance(5);
    i0.ɵɵi18nExp(space_r2.capacity < 1 ? 2 : space_r2.capacity)(space_r2.capacity);
    i0.ɵɵi18nApply(17);
    i0.ɵɵadvance(10);
    i0.ɵɵclassProp("text-blue-400", ctx_r2.favorites.includes(space_r2 == null ? null : space_r2.id));
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate(ctx_r2.favorites.includes(space_r2 == null ? null : space_r2.id) ? "favorite" : "favorite_border");
  }
}
var EMPTY_FAVS = [];
var SpaceListFieldComponent = /*#__PURE__*/function () {
  function SpaceListFieldComponent(_settings, _org, _dialog) {
    var _this = this;
    _classCallCheck(this, SpaceListFieldComponent);
    this._settings = _settings;
    this._org = _org;
    this._dialog = _dialog;
    this.multiday = false;
    this.room_size = 4;
    this.spaces = new rxjs_1.BehaviorSubject([]);
    this.space_list = this.spaces.pipe((0, operators_1.debounceTime)(300));
    this.disabled = false;
    /* istanbul ignore next */
    this.registerOnChange = function (fn) {
      return _this._onChange = fn;
    };
    /* istanbul ignore next */
    this.registerOnTouched = function (fn) {
      return _this._onTouch = fn;
    };
    this.setDisabledState = function (s) {
      return _this.disabled = s;
    };
  }
  return _createClass(SpaceListFieldComponent, [{
    key: "favorites",
    get: function get() {
      return this._settings.get('favourite_spaces') || EMPTY_FAVS;
    }
  }, {
    key: "ngOnDestroy",
    value: function ngOnDestroy() {
      if (this._dialog_ref) this._dialog_ref.close();
    }
  }, {
    key: "level",
    value: function level(zones) {
      return this._org.levelWithID(zones);
    }
    /** Add or edit selected spaces */
  }, {
    key: "changeSpaces",
    value: function changeSpaces() {
      var _this2 = this;
      this._dialog_ref = this._dialog.open(new_space_select_modal_component_1.NewSpaceSelectModalComponent, {
        data: {
          spaces: this.spaces.getValue(),
          options: {
            capacity: this.room_size
          },
          multiday: this.multiday
        }
      });
      this._dialog_ref.afterClosed().subscribe(function () {
        var _this2$_dialog_ref;
        _this2.setValue((_this2$_dialog_ref = _this2._dialog_ref) === null || _this2$_dialog_ref === void 0 || (_this2$_dialog_ref = _this2$_dialog_ref.componentInstance) === null || _this2$_dialog_ref === void 0 ? void 0 : _this2$_dialog_ref.selected);
        _this2._dialog_ref = undefined;
      });
    }
    /** Remove the selected space from the list */
  }, {
    key: "removeSpace",
    value: function removeSpace(space) {
      this.setValue(this.spaces.getValue().filter(function (_) {
        return _.id !== space.id;
      }));
    }
    /**
     * Update the form field value
     * @param new_value New value to set on the form field
     */
  }, {
    key: "setValue",
    value: function setValue(new_value) {
      this.spaces.next(new_value || []);
      if (this._onChange) this._onChange(new_value || []);
    }
    /* istanbul ignore next */
    /**
     * Update local value when form control value is changed
     * @param value The new value for the component
     */
  }, {
    key: "writeValue",
    value: function writeValue(value) {
      this.spaces.next(value || []);
    }
  }, {
    key: "toggleFavourite",
    value: function toggleFavourite(space) {
      if (!(space !== null && space !== void 0 && space.id)) return;
      var fav_list = this.favorites;
      var new_state = !fav_list.includes(space.id);
      if (new_state) {
        this._settings.saveUserSetting('favourite_spaces', [].concat(_toConsumableArray(fav_list), [space.id]));
      } else {
        this._settings.saveUserSetting('favourite_spaces', fav_list.filter(function (_) {
          return _ !== space.id;
        }));
      }
    }
  }]);
}();
_SpaceListFieldComponent = SpaceListFieldComponent;
_SpaceListFieldComponent.ɵfac = function SpaceListFieldComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _SpaceListFieldComponent)(i0.ɵɵdirectiveInject(i1.SettingsService), i0.ɵɵdirectiveInject(i2.OrganisationService), i0.ɵɵdirectiveInject(i3.MatDialog));
};
_SpaceListFieldComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _SpaceListFieldComponent,
  selectors: [["space-list-field"]],
  inputs: {
    multiday: "multiday"
  },
  features: [i0.ɵɵProvidersFeature([{
    provide: forms_1.NG_VALUE_ACCESSOR,
    useExisting: (0, core_1.forwardRef)(function () {
      return _SpaceListFieldComponent;
    }),
    multi: true
  }])],
  decls: 23,
  vars: 9,
  consts: function consts() {
    var i18n_0;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_2378084019110582405$$LIBS_FORM_FIELDS_SRC_LIB_SPACE_LIST_FIELD_COMPONENT_TS_0 = goog.getMsg("Select Room Size{$startTagSpan}*{$closeTagSpan}", {
        "closeTagSpan": "\uFFFD/#5\uFFFD",
        "startTagSpan": "\uFFFD#5\uFFFD"
      }, {
        original_code: {
          "closeTagSpan": "</span>",
          "startTagSpan": "<span>"
        }
      });
      i18n_0 = MSG_EXTERNAL_2378084019110582405$$LIBS_FORM_FIELDS_SRC_LIB_SPACE_LIST_FIELD_COMPONENT_TS_0;
    } else {
      i18n_0 = $localize(_templateObject || (_templateObject = _taggedTemplateLiteral([":\u241F1b75f93ee5764eaf4e3e5b35f9142aa730286aba\u241F2378084019110582405:Select Room Size", ":START_TAG_SPAN:*", ":CLOSE_TAG_SPAN:"])), "\uFFFD#5\uFFFD", "\uFFFD/#5\uFFFD");
    }
    var i18n_1;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_5941148565596549711$$LIBS_FORM_FIELDS_SRC_LIB_SPACE_LIST_FIELD_COMPONENT_TS_1 = goog.getMsg(" Min. 2 People ");
      i18n_1 = MSG_EXTERNAL_5941148565596549711$$LIBS_FORM_FIELDS_SRC_LIB_SPACE_LIST_FIELD_COMPONENT_TS_1;
    } else {
      i18n_1 = $localize(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([":\u241F9a4b4695fcd5f591ff27d32d69654210c1edbce8\u241F5941148565596549711: Min. 2 People "])));
    }
    var i18n_2;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_5844713600133557099$$LIBS_FORM_FIELDS_SRC_LIB_SPACE_LIST_FIELD_COMPONENT_TS_2 = goog.getMsg(" Min. 4 People ");
      i18n_2 = MSG_EXTERNAL_5844713600133557099$$LIBS_FORM_FIELDS_SRC_LIB_SPACE_LIST_FIELD_COMPONENT_TS_2;
    } else {
      i18n_2 = $localize(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([":\u241Fc08792b3fa94dc973ac18033a872580a83beded9\u241F5844713600133557099: Min. 4 People "])));
    }
    var i18n_3;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_694015482067564775$$LIBS_FORM_FIELDS_SRC_LIB_SPACE_LIST_FIELD_COMPONENT_TS_3 = goog.getMsg(" Min. 10 People ");
      i18n_3 = MSG_EXTERNAL_694015482067564775$$LIBS_FORM_FIELDS_SRC_LIB_SPACE_LIST_FIELD_COMPONENT_TS_3;
    } else {
      i18n_3 = $localize(_templateObject4 || (_templateObject4 = _taggedTemplateLiteral([":\u241F94d037a05d336158339e193309f967a769878040\u241F694015482067564775: Min. 10 People "])));
    }
    var i18n_4;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_4961016996305563664$$LIBS_FORM_FIELDS_SRC_LIB_SPACE_LIST_FIELD_COMPONENT_TS_4 = goog.getMsg("Add Space");
      i18n_4 = MSG_EXTERNAL_4961016996305563664$$LIBS_FORM_FIELDS_SRC_LIB_SPACE_LIST_FIELD_COMPONENT_TS_4;
    } else {
      i18n_4 = $localize(_templateObject5 || (_templateObject5 = _taggedTemplateLiteral([":\u241F2a4f48e169dc20ba9ed88d3bfe38f47ecc9204e6\u241F4961016996305563664:Add Space"])));
    }
    var i18n_5;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_426413428618668868$$LIBS_FORM_FIELDS_SRC_LIB_SPACE_LIST_FIELD_COMPONENT_TS_5 = goog.getMsg("{VAR_PLURAL, plural, =1 {Person } other {People\n                            }}");
      i18n_5 = MSG_EXTERNAL_426413428618668868$$LIBS_FORM_FIELDS_SRC_LIB_SPACE_LIST_FIELD_COMPONENT_TS_5;
    } else {
      i18n_5 = $localize(_templateObject6 || (_templateObject6 = _taggedTemplateLiteral([":\u241Fed210c8c0f2511082633f06a2c94b8410f6cd9bf\u241F426413428618668868:{VAR_PLURAL, plural, =1 {Person } other {People\n                            }}"])));
    }
    i18n_5 = i0.ɵɵi18nPostprocess(i18n_5, {
      "VAR_PLURAL": "\uFFFD1\uFFFD"
    });
    var i18n_6;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_686822217414553756$$LIBS_FORM_FIELDS_SRC_LIB_SPACE_LIST_FIELD_COMPONENT_TS_6 = goog.getMsg(" {$interpolation} {$icu} ", {
        "icu": i18n_5,
        "interpolation": "\uFFFD0\uFFFD"
      }, {
        original_code: {
          "icu": "{\n                            space.capacity, plural, =1 { Person } other { People\n                            } }",
          "interpolation": "{{ space.capacity < 1 ? 2 : space.capacity }}"
        }
      });
      i18n_6 = MSG_EXTERNAL_686822217414553756$$LIBS_FORM_FIELDS_SRC_LIB_SPACE_LIST_FIELD_COMPONENT_TS_6;
    } else {
      i18n_6 = $localize(_templateObject7 || (_templateObject7 = _taggedTemplateLiteral([":\u241Fddc17cbb67fd49c13c14733c877b09fb9bd86d87\u241F686822217414553756: ", ":INTERPOLATION: ", ":ICU: "])), "\uFFFD0\uFFFD", i18n_5);
    }
    var i18n_7;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_559636443235347532$$LIBS_FORM_FIELDS_SRC_LIB_SPACE_LIST_FIELD_COMPONENT_TS_7 = goog.getMsg("{$startTagAppIcon}edit{$closeTagAppIcon} Change ", {
        "closeTagAppIcon": "\uFFFD/#22\uFFFD",
        "startTagAppIcon": "\uFFFD#22\uFFFD"
      }, {
        original_code: {
          "closeTagAppIcon": "</app-icon>",
          "startTagAppIcon": "<app-icon>"
        }
      });
      i18n_7 = MSG_EXTERNAL_559636443235347532$$LIBS_FORM_FIELDS_SRC_LIB_SPACE_LIST_FIELD_COMPONENT_TS_7;
    } else {
      i18n_7 = $localize(_templateObject8 || (_templateObject8 = _taggedTemplateLiteral([":\u241Fca9092fdbbb85e5828de77fdf85c49b918cec128\u241F559636443235347532:", ":START_TAG_APP_ICON:edit", ":CLOSE_TAG_APP_ICON: Change "])), "\uFFFD#22\uFFFD", "\uFFFD/#22\uFFFD");
    }
    var i18n_8;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_2582674642057285571$$LIBS_FORM_FIELDS_SRC_LIB_SPACE_LIST_FIELD_COMPONENT_TS_8 = goog.getMsg("{$startTagAppIcon}close{$closeTagAppIcon} Remove ", {
        "closeTagAppIcon": "\uFFFD/#26\uFFFD",
        "startTagAppIcon": "\uFFFD#26\uFFFD"
      }, {
        original_code: {
          "closeTagAppIcon": "</app-icon>",
          "startTagAppIcon": "<app-icon>"
        }
      });
      i18n_8 = MSG_EXTERNAL_2582674642057285571$$LIBS_FORM_FIELDS_SRC_LIB_SPACE_LIST_FIELD_COMPONENT_TS_8;
    } else {
      i18n_8 = $localize(_templateObject9 || (_templateObject9 = _taggedTemplateLiteral([":\u241Fa386ba350cdee69beeb12a908d96f0724ddc2054\u241F2582674642057285571:", ":START_TAG_APP_ICON:close", ":CLOSE_TAG_APP_ICON: Remove "])), "\uFFFD#26\uFFFD", "\uFFFD/#26\uFFFD");
    }
    return [["placeholder", ""], i18n_0, i18n_1, i18n_2, i18n_3, i18n_4, i18n_6, i18n_7, i18n_8, [1, "flex", "items-center", "flex-wrap", "sm:space-x-2", "mb-2"], [1, "flex-1", "min-w-[256px]", "space-y-2"], [1, "flex", "items-center"], ["aria-label", "Select Room Size", 1, "space-x-4", 3, "ngModelChange", "ngModel", "ngModelOptions"], [3, "value"], ["list", "", 1, "space-y-2"], ["space", "", "class", "relative p-2 rounded-lg w-full flex items-center shadow border border-base-200", 4, "ngFor", "ngForOf"], ["btn", "", "matRipple", "", "name", "add-space", 1, "w-full", "inverse", "mt-2", 3, "click"], [1, "flex", "items-center", "justify-center", "space-x-2"], ["space", "", 1, "relative", "p-2", "rounded-lg", "w-full", "flex", "items-center", "shadow", "border", "border-base-200"], [1, "w-24", "h-24", "rounded-xl", "bg-base-200", "mr-4", "overflow-hidden", "flex", "items-center", "justify-center"], ["auth", "", "class", "min-h-full object-cover", 3, "source", 4, "ngIf", "ngIfElse"], [1, "sm:space-y-2", "pb-4"], [1, "font-medium"], [1, "flex", "items-center", "text-sm", "space-x-2"], [1, "text-blue-500"], [1, "absolute", "bottom-0", "right-0", "flex", "items-center", "justify-end", "text-xs"], ["btn", "", "matRipple", "", "name", "edit-space", 1, "clear", 3, "click"], [1, "flex", "items-center", "space-x-2"], ["btn", "", "matRipple", "", "name", "remove-space", 1, "clear", 3, "click"], ["icon", "", "matRipple", "", "name", "toggle-space-favourite", 1, "absolute", "top-1", "right-1", 3, "click"], ["auth", "", 1, "min-h-full", "object-cover", 3, "source"], ["src", "assets/icons/room-placeholder.svg", 1, "m-auto"]];
  },
  template: function SpaceListFieldComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵelementStart(0, "div")(1, "div", 9)(2, "div", 10)(3, "label");
      i0.ɵɵi18nStart(4, 1);
      i0.ɵɵelement(5, "span");
      i0.ɵɵi18nEnd();
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(6, "div", 11)(7, "mat-radio-group", 12);
      i0.ɵɵtwoWayListener("ngModelChange", function SpaceListFieldComponent_Template_mat_radio_group_ngModelChange_7_listener($event) {
        i0.ɵɵtwoWayBindingSet(ctx.room_size, $event) || (ctx.room_size = $event);
        return $event;
      });
      i0.ɵɵelementStart(8, "mat-radio-button", 13);
      i0.ɵɵi18n(9, 2);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(10, "mat-radio-button", 13);
      i0.ɵɵi18n(11, 3);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(12, "mat-radio-button", 13);
      i0.ɵɵi18n(13, 4);
      i0.ɵɵelementEnd()()()()()();
      i0.ɵɵelementStart(14, "div", 14);
      i0.ɵɵtemplate(15, SpaceListFieldComponent_div_15_Template, 30, 9, "div", 15);
      i0.ɵɵpipe(16, "async");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(17, "button", 16);
      i0.ɵɵlistener("click", function SpaceListFieldComponent_Template_button_click_17_listener() {
        return ctx.changeSpaces();
      });
      i0.ɵɵelementStart(18, "div", 17)(19, "app-icon");
      i0.ɵɵtext(20, "search");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(21, "span");
      i0.ɵɵi18n(22, 5);
      i0.ɵɵelementEnd()()();
    }
    if (rf & 2) {
      i0.ɵɵadvance(7);
      i0.ɵɵtwoWayProperty("ngModel", ctx.room_size);
      i0.ɵɵproperty("ngModelOptions", i0.ɵɵpureFunction0(8, _c0));
      i0.ɵɵadvance();
      i0.ɵɵproperty("value", 1);
      i0.ɵɵadvance(2);
      i0.ɵɵproperty("value", 4);
      i0.ɵɵadvance(2);
      i0.ɵɵproperty("value", 10);
      i0.ɵɵadvance(3);
      i0.ɵɵproperty("ngForOf", i0.ɵɵpipeBind1(16, 6, ctx.space_list));
    }
  }
});
exports.SpaceListFieldComponent = SpaceListFieldComponent;

/***/ }),

/***/ 38791:
/*!********************************************************************!*\
  !*** ./libs/form-fields/src/lib/support-ticket-modal.component.ts ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _taggedTemplateLiteral = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js */ 9959)["default"]);
var _regeneratorRuntime = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/regeneratorRuntime.js */ 8698)["default"]);
var _asyncToGenerator = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/asyncToGenerator.js */ 95386)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _SupportTicketModalComponent, _templateObject, _templateObject2, _templateObject3, _templateObject4, _templateObject5, _templateObject6, _templateObject7, _templateObject8, _templateObject9, _templateObject10, _templateObject11, _templateObject12;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.SupportTicketModalComponent = void 0;
var forms_1 = __webpack_require__(/*! @angular/forms */ 34456);
var dialog_1 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var organisation_1 = __webpack_require__(/*! @placeos/organisation */ 2510);
var ts_client_1 = __webpack_require__(/*! @placeos/ts-client */ 35713);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var i2 = __webpack_require__(/*! @placeos/organisation */ 2510);
var i3 = __webpack_require__(/*! @placeos/common */ 22797);
function SupportTicketModalComponent_main_6_mat_option_24_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "mat-option", 34);
    i0.ɵɵtext(1);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var bld_r1 = ctx.$implicit;
    i0.ɵɵproperty("value", bld_r1.display_name || bld_r1.name);
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", bld_r1.display_name || bld_r1.name, " ");
  }
}
function SupportTicketModalComponent_main_6_div_26_mat_option_5_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "mat-option", 34);
    i0.ɵɵtext(1);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var type_r2 = ctx.$implicit;
    i0.ɵɵproperty("value", (type_r2 == null ? null : type_r2.name) || type_r2);
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", type_r2.name || type_r2, " ");
  }
}
function SupportTicketModalComponent_main_6_div_26_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 24)(1, "label");
    i0.ɵɵi18n(2, 9);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(3, "mat-form-field", 25)(4, "mat-select", 35);
    i0.ɵɵtemplate(5, SupportTicketModalComponent_main_6_div_26_mat_option_5_Template, 2, 2, "mat-option", 27);
    i0.ɵɵelementEnd()()();
  }
  if (rf & 2) {
    var ctx_r2 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance(5);
    i0.ɵɵproperty("ngForOf", ctx_r2.support_request_types);
  }
}
function SupportTicketModalComponent_main_6_mat_error_32_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "mat-error", 36);
    i0.ɵɵi18n(1, 10);
    i0.ɵɵelementEnd();
  }
}
function SupportTicketModalComponent_main_6_div_33_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div")(1, "label", 29);
    i0.ɵɵi18n(2, 11);
    i0.ɵɵelementEnd();
    i0.ɵɵelement(3, "image-list-field", 37);
    i0.ɵɵelementEnd();
  }
}
function SupportTicketModalComponent_main_6_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "main", 17)(1, "form", 18)(2, "div", 19)(3, "div", 20)(4, "label");
    i0.ɵɵi18nStart(5, 2);
    i0.ɵɵelement(6, "span");
    i0.ɵɵi18nEnd();
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(7, "mat-form-field", 21);
    i0.ɵɵelement(8, "input", 22);
    i0.ɵɵelementStart(9, "mat-error");
    i0.ɵɵi18n(10, 3);
    i0.ɵɵelementEnd()()();
    i0.ɵɵelementStart(11, "div", 20)(12, "label");
    i0.ɵɵi18nStart(13, 4);
    i0.ɵɵelement(14, "span");
    i0.ɵɵi18nEnd();
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(15, "mat-form-field", 21);
    i0.ɵɵelement(16, "input", 23);
    i0.ɵɵelementStart(17, "mat-error");
    i0.ɵɵi18n(18, 5);
    i0.ɵɵelementEnd()()()();
    i0.ɵɵelementStart(19, "div", 24)(20, "label");
    i0.ɵɵi18n(21, 6);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(22, "mat-form-field", 25)(23, "mat-select", 26);
    i0.ɵɵtemplate(24, SupportTicketModalComponent_main_6_mat_option_24_Template, 2, 2, "mat-option", 27);
    i0.ɵɵpipe(25, "async");
    i0.ɵɵelementEnd()()();
    i0.ɵɵtemplate(26, SupportTicketModalComponent_main_6_div_26_Template, 6, 1, "div", 28);
    i0.ɵɵelementStart(27, "div")(28, "label", 29);
    i0.ɵɵi18nStart(29, 7);
    i0.ɵɵelement(30, "span");
    i0.ɵɵi18nEnd();
    i0.ɵɵelementEnd();
    i0.ɵɵelement(31, "rich-text-input", 30);
    i0.ɵɵtemplate(32, SupportTicketModalComponent_main_6_mat_error_32_Template, 2, 0, "mat-error", 31);
    i0.ɵɵelementEnd();
    i0.ɵɵtemplate(33, SupportTicketModalComponent_main_6_div_33_Template, 4, 0, "div", 32);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(34, "div", 33);
    i0.ɵɵi18n(35, 8);
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var ctx_r2 = i0.ɵɵnextContext();
    i0.ɵɵadvance();
    i0.ɵɵproperty("formGroup", ctx_r2.form);
    i0.ɵɵadvance(23);
    i0.ɵɵproperty("ngForOf", i0.ɵɵpipeBind1(25, 5, ctx_r2.buildings));
    i0.ɵɵadvance(2);
    i0.ɵɵproperty("ngIf", ctx_r2.support_request_types == null ? null : ctx_r2.support_request_types.length);
    i0.ɵɵadvance(6);
    i0.ɵɵproperty("ngIf", ctx_r2.desc_error);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", ctx_r2.allow_images);
  }
}
function SupportTicketModalComponent_footer_7_Template(rf, ctx) {
  if (rf & 1) {
    var _r4 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "footer", 38)(1, "button", 39);
    i0.ɵɵlistener("click", function SupportTicketModalComponent_footer_7_Template_button_click_1_listener() {
      i0.ɵɵrestoreView(_r4);
      var ctx_r2 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r2.submit());
    });
    i0.ɵɵi18n(2, 12);
    i0.ɵɵelementEnd()();
  }
}
function SupportTicketModalComponent_ng_template_8_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "main", 40);
    i0.ɵɵelement(1, "mat-spinner", 41);
    i0.ɵɵelementStart(2, "p");
    i0.ɵɵtext(3, "Sending support ticket...");
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    i0.ɵɵadvance();
    i0.ɵɵproperty("diameter", 32);
  }
}
var SupportTicketModalComponent = /*#__PURE__*/function () {
  function SupportTicketModalComponent(_dialog_ref, _org, _settings) {
    _classCallCheck(this, SupportTicketModalComponent);
    this._dialog_ref = _dialog_ref;
    this._org = _org;
    this._settings = _settings;
    this.loading = false;
    this.form = new forms_1.FormGroup({
      name: new forms_1.FormControl('', [forms_1.Validators.required]),
      email: new forms_1.FormControl('', [forms_1.Validators.required]),
      location: new forms_1.FormControl(''),
      description: new forms_1.FormControl('', [forms_1.Validators.required]),
      issue_type: new forms_1.FormControl(''),
      images: new forms_1.FormControl([])
    });
    this.buildings = this._org.building_list;
  }
  return _createClass(SupportTicketModalComponent, [{
    key: "desc_error",
    get: function get() {
      return !this.form.controls.description.valid && this.form.controls.description.touched;
    }
  }, {
    key: "support_email",
    get: function get() {
      return this._settings.get('app.support_email') || 'support@place.tech';
    }
  }, {
    key: "support_request_types",
    get: function get() {
      return this._settings.get('app.support_issue_types') || [];
    }
  }, {
    key: "allow_images",
    get: function get() {
      return this._settings.get('app.allow_support_ticket_images');
    }
  }, {
    key: "ngOnInit",
    value: function ngOnInit() {
      var user = (0, common_1.currentUser)();
      if (user) {
        this.form.patchValue({
          name: user.name,
          email: user.email
        });
      }
      if (this._org.building) {
        this.form.patchValue({
          location: this._org.building.display_name || this._org.building.name
        });
      }
    }
  }, {
    key: "submit",
    value: function () {
      var _submit = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
        var _this$support_request, stmp_system, mod, _this$form$value, name, email, location, description, images, issue_type, support_email;
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              this.loading = true;
              this.form.markAllAsTouched();
              this.form.updateValueAndValidity();
              if (!this.form.valid) {
                _context.next = 15;
                break;
              }
              stmp_system = this._org.binding('smtp');
              if (stmp_system) {
                _context.next = 7;
                break;
              }
              return _context.abrupt("return", (0, common_1.notifyError)('Mailing system not configured for application.'));
            case 7:
              mod = (0, ts_client_1.getModule)(stmp_system, 'Mailer');
              _this$form$value = this.form.value, name = _this$form$value.name, email = _this$form$value.email, location = _this$form$value.location, description = _this$form$value.description, images = _this$form$value.images, issue_type = _this$form$value.issue_type;
              support_email = ((_this$support_request = this.support_request_types.find(function (type) {
                return type.name === issue_type;
              })) === null || _this$support_request === void 0 ? void 0 : _this$support_request.email) || this.support_email;
              _context.next = 12;
              return mod.execute('send_mail', [support_email, "Support Ticket from Workplace Application".concat(issue_type ? ' - ' + issue_type : ''), "".concat(name, "\n").concat(email, "\n\n").concat(location, "\n\n").concat(description.replace(/<[^>]+>/g, ''), "\n\n").concat(images.join('\n')), "<p>".concat(name, "</p><p>").concat(email, "</p><p>").concat(location, "</p><p>").concat(description, "</p>").concat(images.join('<br>')), [], [], [], [], null, "".concat(email)]);
            case 12:
              this._dialog_ref.close();
              this.loading = false;
              (0, common_1.notifySuccess)('Successfully submitted support ticket');
            case 15:
            case "end":
              return _context.stop();
          }
        }, _callee, this);
      }));
      function submit() {
        return _submit.apply(this, arguments);
      }
      return submit;
    }()
  }]);
}();
_SupportTicketModalComponent = SupportTicketModalComponent;
_SupportTicketModalComponent.ɵfac = function SupportTicketModalComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _SupportTicketModalComponent)(i0.ɵɵdirectiveInject(i1.MatDialogRef), i0.ɵɵdirectiveInject(i2.OrganisationService), i0.ɵɵdirectiveInject(i3.SettingsService));
};
_SupportTicketModalComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _SupportTicketModalComponent,
  selectors: [["support-ticket-modal"]],
  decls: 10,
  vars: 3,
  consts: function consts() {
    var i18n_0;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_270482714535552546$$LIBS_FORM_FIELDS_SRC_LIB_SUPPORT_TICKET_MODAL_COMPONENT_TS_0 = goog.getMsg("Raise a support ticket");
      i18n_0 = MSG_EXTERNAL_270482714535552546$$LIBS_FORM_FIELDS_SRC_LIB_SUPPORT_TICKET_MODAL_COMPONENT_TS_0;
    } else {
      i18n_0 = $localize(_templateObject || (_templateObject = _taggedTemplateLiteral([":\u241Fb862b54c42ded9ebb47260f60b0f75985c5fab18\u241F270482714535552546:Raise a support ticket"])));
    }
    var i18n_1;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_5257092898921510014$$LIBS_FORM_FIELDS_SRC_LIB_SUPPORT_TICKET_MODAL_COMPONENT_TS_1 = goog.getMsg("Name{$startTagSpan}*{$closeTagSpan}", {
        "closeTagSpan": "\uFFFD/#6\uFFFD",
        "startTagSpan": "\uFFFD#6\uFFFD"
      }, {
        original_code: {
          "closeTagSpan": "</span>",
          "startTagSpan": "<span>"
        }
      });
      i18n_1 = MSG_EXTERNAL_5257092898921510014$$LIBS_FORM_FIELDS_SRC_LIB_SUPPORT_TICKET_MODAL_COMPONENT_TS_1;
    } else {
      i18n_1 = $localize(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([":\u241F84f7804a7a51f1144c5a3fda7b9b881af4212c4a\u241F5257092898921510014:Name", ":START_TAG_SPAN:*", ":CLOSE_TAG_SPAN:"])), "\uFFFD#6\uFFFD", "\uFFFD/#6\uFFFD");
    }
    var i18n_2;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_3833692663709091545$$LIBS_FORM_FIELDS_SRC_LIB_SUPPORT_TICKET_MODAL_COMPONENT_TS_2 = goog.getMsg("Name is required");
      i18n_2 = MSG_EXTERNAL_3833692663709091545$$LIBS_FORM_FIELDS_SRC_LIB_SUPPORT_TICKET_MODAL_COMPONENT_TS_2;
    } else {
      i18n_2 = $localize(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([":\u241F5b752f143ab30faa45a2679b5e7a28bbf3fb246d\u241F3833692663709091545:Name is required"])));
    }
    var i18n_3;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_8600249315708032613$$LIBS_FORM_FIELDS_SRC_LIB_SUPPORT_TICKET_MODAL_COMPONENT_TS_3 = goog.getMsg("Email{$startTagSpan}*{$closeTagSpan}", {
        "closeTagSpan": "\uFFFD/#14\uFFFD",
        "startTagSpan": "\uFFFD#14\uFFFD"
      }, {
        original_code: {
          "closeTagSpan": "</span>",
          "startTagSpan": "<span>"
        }
      });
      i18n_3 = MSG_EXTERNAL_8600249315708032613$$LIBS_FORM_FIELDS_SRC_LIB_SUPPORT_TICKET_MODAL_COMPONENT_TS_3;
    } else {
      i18n_3 = $localize(_templateObject4 || (_templateObject4 = _taggedTemplateLiteral([":\u241F15032ab5f5dcf10cb837008e8ff61acb42e957db\u241F8600249315708032613:Email", ":START_TAG_SPAN:*", ":CLOSE_TAG_SPAN:"])), "\uFFFD#14\uFFFD", "\uFFFD/#14\uFFFD");
    }
    var i18n_4;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_8552587679160911578$$LIBS_FORM_FIELDS_SRC_LIB_SUPPORT_TICKET_MODAL_COMPONENT_TS_4 = goog.getMsg("Email is required");
      i18n_4 = MSG_EXTERNAL_8552587679160911578$$LIBS_FORM_FIELDS_SRC_LIB_SUPPORT_TICKET_MODAL_COMPONENT_TS_4;
    } else {
      i18n_4 = $localize(_templateObject5 || (_templateObject5 = _taggedTemplateLiteral([":\u241F9b2fd2a81342b5821f47ce0e6f2383b1403fd659\u241F8552587679160911578:Email is required"])));
    }
    var i18n_5;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_471816275243265264$$LIBS_FORM_FIELDS_SRC_LIB_SUPPORT_TICKET_MODAL_COMPONENT_TS_5 = goog.getMsg("Location");
      i18n_5 = MSG_EXTERNAL_471816275243265264$$LIBS_FORM_FIELDS_SRC_LIB_SUPPORT_TICKET_MODAL_COMPONENT_TS_5;
    } else {
      i18n_5 = $localize(_templateObject6 || (_templateObject6 = _taggedTemplateLiteral([":\u241Fed31c09fd77c36238c13d83635f3fe5294c733d2\u241F471816275243265264:Location"])));
    }
    var i18n_6;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_5204458475414246750$$LIBS_FORM_FIELDS_SRC_LIB_SUPPORT_TICKET_MODAL_COMPONENT_TS_6 = goog.getMsg(" Issue Description{$startTagSpan}*{$closeTagSpan}", {
        "closeTagSpan": "\uFFFD/#30\uFFFD",
        "startTagSpan": "\uFFFD#30\uFFFD"
      }, {
        original_code: {
          "closeTagSpan": "</span>",
          "startTagSpan": "<span>"
        }
      });
      i18n_6 = MSG_EXTERNAL_5204458475414246750$$LIBS_FORM_FIELDS_SRC_LIB_SUPPORT_TICKET_MODAL_COMPONENT_TS_6;
    } else {
      i18n_6 = $localize(_templateObject7 || (_templateObject7 = _taggedTemplateLiteral([":\u241Fbd571e4b6aa662ccde3593b99728c60a9c4e2722\u241F5204458475414246750: Issue Description", ":START_TAG_SPAN:*", ":CLOSE_TAG_SPAN:"])), "\uFFFD#30\uFFFD", "\uFFFD/#30\uFFFD");
    }
    var i18n_7;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_2365971609064887430$$LIBS_FORM_FIELDS_SRC_LIB_SUPPORT_TICKET_MODAL_COMPONENT_TS_7 = goog.getMsg(" Completing this form will raise an incident in your support management platform ");
      i18n_7 = MSG_EXTERNAL_2365971609064887430$$LIBS_FORM_FIELDS_SRC_LIB_SUPPORT_TICKET_MODAL_COMPONENT_TS_7;
    } else {
      i18n_7 = $localize(_templateObject8 || (_templateObject8 = _taggedTemplateLiteral([":\u241F860180fb81e0877ec8059acbf30938f5d31daede\u241F2365971609064887430: Completing this form will raise an incident in your support management platform "])));
    }
    var i18n_8;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_3187063371811307868$$LIBS_FORM_FIELDS_SRC_LIB_SUPPORT_TICKET_MODAL_COMPONENT_TS_8 = goog.getMsg("Issue Type");
      i18n_8 = MSG_EXTERNAL_3187063371811307868$$LIBS_FORM_FIELDS_SRC_LIB_SUPPORT_TICKET_MODAL_COMPONENT_TS_8;
    } else {
      i18n_8 = $localize(_templateObject9 || (_templateObject9 = _taggedTemplateLiteral([":\u241F712648c55b8f81cc494ffeff1c304f275dcafc61\u241F3187063371811307868:Issue Type"])));
    }
    var i18n_9;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_124716140796903078$$LIBS_FORM_FIELDS_SRC_LIB_SUPPORT_TICKET_MODAL_COMPONENT_TS_9 = goog.getMsg(" Description is required ");
      i18n_9 = MSG_EXTERNAL_124716140796903078$$LIBS_FORM_FIELDS_SRC_LIB_SUPPORT_TICKET_MODAL_COMPONENT_TS_9;
    } else {
      i18n_9 = $localize(_templateObject10 || (_templateObject10 = _taggedTemplateLiteral([":\u241Fae855fe6e11d47178c1051e1a3f9e78c5bb7fb4e\u241F124716140796903078: Description is required "])));
    }
    var i18n_10;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_414887388288176527$$LIBS_FORM_FIELDS_SRC_LIB_SUPPORT_TICKET_MODAL_COMPONENT_TS_10 = goog.getMsg("Images");
      i18n_10 = MSG_EXTERNAL_414887388288176527$$LIBS_FORM_FIELDS_SRC_LIB_SUPPORT_TICKET_MODAL_COMPONENT_TS_10;
    } else {
      i18n_10 = $localize(_templateObject11 || (_templateObject11 = _taggedTemplateLiteral([":\u241Fb73f7f5060fb22a1e9ec462b1bb02493fa3ab866\u241F414887388288176527:Images"])));
    }
    var i18n_11;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_1413112058430688330$$LIBS_FORM_FIELDS_SRC_LIB_SUPPORT_TICKET_MODAL_COMPONENT_TS_11 = goog.getMsg(" Submit ");
      i18n_11 = MSG_EXTERNAL_1413112058430688330$$LIBS_FORM_FIELDS_SRC_LIB_SUPPORT_TICKET_MODAL_COMPONENT_TS_11;
    } else {
      i18n_11 = $localize(_templateObject12 || (_templateObject12 = _taggedTemplateLiteral([":\u241F932802b79d36312ecbe949fc5b703fef638f41df\u241F1413112058430688330: Submit "])));
    }
    return [["load_state", ""], i18n_0, i18n_1, i18n_2, i18n_3, i18n_4, i18n_5, i18n_6, i18n_7, i18n_8, i18n_9, i18n_10, i18n_11, [1, "flex", "items-center", "justify-between"], ["icon", "", "mat-dialog-close", ""], ["class", "w-[32rem] max-w-[85vw]", 4, "ngIf", "ngIfElse"], ["class", "p-2 border-t border-base-200 flex items-center justify-center", 4, "ngIf"], [1, "w-[32rem]", "max-w-[85vw]"], [1, "p-2", 3, "formGroup"], [1, "flex", "items-center", "sm:space-x-2", "flex-wrap"], [1, "flex", "flex-col", "flex-1"], ["appearance", "outline"], ["matInput", "", "placeholder", "Name", "formControlName", "name"], ["matInput", "", "placeholder", "Email", "formControlName", "email"], [1, "flex", "flex-col"], ["appearance", "outline", 1, "w-full"], ["placeholder", "Location", "formControlName", "location"], [3, "value", 4, "ngFor", "ngForOf"], ["class", "flex flex-col", 4, "ngIf"], [1, "mb-4"], ["placeholder", "Issue Description", "formControlName", "description"], ["class", "text-xs my-2", 4, "ngIf"], [4, "ngIf"], [1, "italic", "text-center", "text-xs", "mb-2"], [3, "value"], ["placeholder", "Issue Type", "formControlName", "issue_type"], [1, "text-xs", "my-2"], ["formControlName", "images"], [1, "p-2", "border-t", "border-base-200", "flex", "items-center", "justify-center"], ["btn", "", "matRipple", "", 1, "w-32", 3, "click"], [1, "w-[32rem]", "min-h-[24rem]", "max-w-[100vw]", "flex", "flex-col", "items-center", "justify-center", "space-y-2"], [3, "diameter"]];
  },
  template: function SupportTicketModalComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵelementStart(0, "header", 13)(1, "h2");
      i0.ɵɵi18n(2, 1);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(3, "button", 14)(4, "app-icon");
      i0.ɵɵtext(5, "close");
      i0.ɵɵelementEnd()()();
      i0.ɵɵtemplate(6, SupportTicketModalComponent_main_6_Template, 36, 7, "main", 15)(7, SupportTicketModalComponent_footer_7_Template, 3, 0, "footer", 16)(8, SupportTicketModalComponent_ng_template_8_Template, 4, 1, "ng-template", null, 0, i0.ɵɵtemplateRefExtractor);
    }
    if (rf & 2) {
      var load_state_r5 = i0.ɵɵreference(9);
      i0.ɵɵadvance(6);
      i0.ɵɵproperty("ngIf", !ctx.loading)("ngIfElse", load_state_r5);
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", !ctx.loading);
    }
  },
  styles: ["mat-form-field[_ngcontent-%COMP%] {\n                width: 100%;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInN1cHBvcnQtdGlja2V0LW1vZGFsLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1lBQ1k7Z0JBQ0ksV0FBVztZQUNmIiwiZmlsZSI6InN1cHBvcnQtdGlja2V0LW1vZGFsLmNvbXBvbmVudC50cyIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgbWF0LWZvcm0tZmllbGQge1xuICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgfVxuICAgICAgICAiXX0= */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvZm9ybS1maWVsZHMvc3JjL2xpYi9zdXBwb3J0LXRpY2tldC1tb2RhbC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLFdBQVc7WUFDZjs7QUFFWiw0WUFBNFkiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIG1hdC1mb3JtLWZpZWxkIHtcbiAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl0sInNvdXJjZVJvb3QiOiIifQ== */"]
});
exports.SupportTicketModalComponent = SupportTicketModalComponent;

/***/ }),

/***/ 81413:
/*!**********************************************************!*\
  !*** ./libs/form-fields/src/lib/time-field.component.ts ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _callSuper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/callSuper.js */ 8513)["default"]);
var _inherits = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/inherits.js */ 58160)["default"]);
var _TimeFieldComponent;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.TimeFieldComponent = void 0;
var core_1 = __webpack_require__(/*! @angular/core */ 37580);
var forms_1 = __webpack_require__(/*! @angular/forms */ 34456);
var select_1 = __webpack_require__(/*! @angular/material/select */ 25175);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var date_fns_1 = __webpack_require__(/*! date-fns */ 25773);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @angular/common */ 60316);
var i2 = __webpack_require__(/*! @angular/material/core */ 74646);
var i3 = __webpack_require__(/*! @angular/material/form-field */ 24950);
var i4 = __webpack_require__(/*! ../../../components/src/lib/icon.component */ 69434);
var i5 = __webpack_require__(/*! @angular/material/menu */ 31034);
var _c0 = ["select"];
var _c1 = ["*"];
function TimeFieldComponent_div_5_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 9);
    i0.ɵɵtext(1);
    i0.ɵɵpipe(2, "date");
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r0 = i0.ɵɵnextContext();
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", i0.ɵɵpipeBind3(2, 1, ctx_r0.active_time, ctx_r0.time_format + " (z)", ctx_r0.tz), " ");
  }
}
function TimeFieldComponent_button_10_div_6_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 16);
    i0.ɵɵtext(1);
    i0.ɵɵpipe(2, "date");
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r0 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", i0.ɵɵpipeBind3(2, 1, ctx_r0.force_time, ctx_r0.time_format + " (z)", ctx_r0.tz), " ");
  }
}
function TimeFieldComponent_button_10_app_icon_7_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "app-icon", 17);
    i0.ɵɵtext(1, " done ");
    i0.ɵɵelementEnd();
  }
}
function TimeFieldComponent_button_10_Template(rf, ctx) {
  if (rf & 1) {
    var _r2 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "button", 10);
    i0.ɵɵlistener("click", function TimeFieldComponent_button_10_Template_button_click_0_listener() {
      i0.ɵɵrestoreView(_r2);
      var ctx_r0 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r0.setValue(ctx_r0.force_time));
    });
    i0.ɵɵelementStart(1, "div", 11)(2, "div", 12)(3, "div", 13);
    i0.ɵɵtext(4);
    i0.ɵɵpipe(5, "date");
    i0.ɵɵelementEnd();
    i0.ɵɵtemplate(6, TimeFieldComponent_button_10_div_6_Template, 3, 5, "div", 14);
    i0.ɵɵelementEnd();
    i0.ɵɵtemplate(7, TimeFieldComponent_button_10_app_icon_7_Template, 2, 0, "app-icon", 15);
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var ctx_r0 = i0.ɵɵnextContext();
    i0.ɵɵproperty("value", ctx_r0.force_time);
    i0.ɵɵadvance(4);
    i0.ɵɵtextInterpolate1(" ", i0.ɵɵpipeBind2(5, 4, ctx_r0.force_time, ctx_r0.time_format), " ");
    i0.ɵɵadvance(2);
    i0.ɵɵproperty("ngIf", ctx_r0.timezone && ctx_r0.tz);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", ctx_r0.active_time === ctx_r0.force_time);
  }
}
function TimeFieldComponent_button_11_div_6_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 16);
    i0.ɵɵtext(1);
    i0.ɵɵpipe(2, "date");
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var option_r4 = i0.ɵɵnextContext().$implicit;
    var ctx_r0 = i0.ɵɵnextContext();
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", i0.ɵɵpipeBind3(2, 1, option_r4.date, ctx_r0.time_format + " (z)", ctx_r0.tz), " ");
  }
}
function TimeFieldComponent_button_11_app_icon_7_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "app-icon", 17);
    i0.ɵɵtext(1, " done ");
    i0.ɵɵelementEnd();
  }
}
function TimeFieldComponent_button_11_Template(rf, ctx) {
  if (rf & 1) {
    var _r3 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "button", 10);
    i0.ɵɵlistener("click", function TimeFieldComponent_button_11_Template_button_click_0_listener() {
      var option_r4 = i0.ɵɵrestoreView(_r3).$implicit;
      var ctx_r0 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r0.setValue(option_r4.id));
    });
    i0.ɵɵelementStart(1, "div", 11)(2, "div", 12)(3, "div", 13);
    i0.ɵɵtext(4);
    i0.ɵɵpipe(5, "date");
    i0.ɵɵelementEnd();
    i0.ɵɵtemplate(6, TimeFieldComponent_button_11_div_6_Template, 3, 5, "div", 14);
    i0.ɵɵelementEnd();
    i0.ɵɵtemplate(7, TimeFieldComponent_button_11_app_icon_7_Template, 2, 0, "app-icon", 15);
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var option_r4 = ctx.$implicit;
    var ctx_r0 = i0.ɵɵnextContext();
    i0.ɵɵproperty("value", option_r4.id);
    i0.ɵɵadvance(4);
    i0.ɵɵtextInterpolate2(" ", i0.ɵɵpipeBind2(5, 5, option_r4.date, ctx_r0.time_format), " ", ctx_r0.extra_info_fn(option_r4.date), " ");
    i0.ɵɵadvance(2);
    i0.ɵɵproperty("ngIf", ctx_r0.timezone && ctx_r0.tz);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", ctx_r0.active_time === option_r4.date);
  }
}
var TimeFieldComponent = /*#__PURE__*/function (_common_1$AsyncHandle) {
  function TimeFieldComponent() {
    var _this;
    _classCallCheck(this, TimeFieldComponent);
    _this = _callSuper(this, TimeFieldComponent, arguments);
    /** Time step between each allowed time option */
    _this.step = 15;
    /** Whether past times are allowed */
    _this.no_past_times = true;
    _this.use_24hr = false;
    _this.extra_info_fn = function (t) {
      return '';
    };
    /** Prevent times before */
    _this.from = (0, date_fns_1.startOfDay)(Date.now()).valueOf();
    _this.timezone = '';
    /** String representing the currently set time */
    _this.date = new Date().valueOf();
    /** String representing the currently set time */
    _this.time = (0, date_fns_1.format)(new Date(), 'HH:mm');
    _this.active_time = Date.now();
    _this._local_tz = (0, common_1.getTimezoneOffsetString)(Intl.DateTimeFormat().resolvedOptions().timeZone);
    return _this;
  }
  _inherits(TimeFieldComponent, _common_1$AsyncHandle);
  return _createClass(TimeFieldComponent, [{
    key: "time_format",
    get: function get() {
      return this.use_24hr ? 'HH : mm' : 'h : mm a';
    }
  }, {
    key: "tz",
    get: function get() {
      var tz = this.timezone;
      if (!tz) return '';
      var tz_offset = (0, common_1.getTimezoneOffsetString)(tz);
      return tz_offset === this._local_tz ? '' : tz_offset;
    }
  }, {
    key: "ngOnInit",
    value: function ngOnInit() {
      var _this2 = this,
        _this$_time_options$f;
      this.show_select = true;
      this._time_options = this.generateAvailableTimes(this.date, !this.no_past_times, this.step);
      this.timeout('hide', function () {
        return _this2.show_select = false;
      });
      this.active_time = ((_this$_time_options$f = this._time_options.find(function (_) {
        return _.id === (0, date_fns_1.format)(_this2.date, 'HH:mm');
      })) === null || _this$_time_options$f === void 0 ? void 0 : _this$_time_options$f.date) || this.active_time;
    }
  }, {
    key: "ngOnChanges",
    value: function ngOnChanges(changes) {
      if (changes.no_past_times || changes.step || changes.from) {
        this._time_options = this.generateAvailableTimes(this.date, !this.no_past_times, this.step);
      }
    }
    /** Available time blocks for the selected date */
  }, {
    key: "time_options",
    get: function get() {
      var time = (this.time || '00:00').split(':');
      var date = (0, date_fns_1.set)(this.date, {
        hours: +time[0],
        minutes: +time[1]
      });
      if (date.getMinutes() % 15 !== 0 && !this._time_options.find(function (time) {
        return time.id === (0, date_fns_1.format)(date, 'HH:mm');
      })) {
        this._time_options.push({
          date: date,
          id: (0, date_fns_1.format)(date, 'HH:mm')
        });
        this._time_options.sort(function (a, b) {
          return "".concat(a.id).localeCompare("".concat(b.id));
        });
      }
      return this._time_options;
    }
    /**
     * Update the form field value
     * @param new_value New value to set on the form field
     */
  }, {
    key: "setValue",
    value: function setValue(new_value) {
      var _this$_time_options$f2;
      this.time = new_value;
      if (this._onChange) {
        var _time = (this.time || '00:00').split(':');
        var _date = (0, date_fns_1.startOfMinute)((0, date_fns_1.set)(this.date, {
          hours: +_time[0],
          minutes: +_time[1]
        }));
        this._onChange(_date.valueOf());
      }
      var time = this.force_time || this.time;
      var date = (0, date_fns_1.startOfMinute)((0, date_fns_1.set)(this.date, {
        hours: +time[0],
        minutes: +time[1]
      }));
      this.active_time = ((_this$_time_options$f2 = this._time_options.find(function (_) {
        return _.id === time;
      })) === null || _this$_time_options$f2 === void 0 ? void 0 : _this$_time_options$f2.date) || date;
    }
    /**
     * Update local value when form control value is changed
     * @param value The new value for the component
     */
  }, {
    key: "writeValue",
    value: function writeValue(value) {
      var _this$_time_options$f3;
      this.date = value || this.date;
      var date = (0, date_fns_1.startOfMinute)(this.date);
      date = (0, date_fns_1.roundToNearestMinutes)(date, {
        nearestTo: 5
      });
      this.time = (0, date_fns_1.format)(date, 'HH:mm');
      this._time_options = this.generateAvailableTimes(this.date, !this.no_past_times, this.step);
      var time = this.force_time || this.time;
      this.active_time = ((_this$_time_options$f3 = this._time_options.find(function (_) {
        return _.id === time;
      })) === null || _this$_time_options$f3 === void 0 ? void 0 : _this$_time_options$f3.date) || date;
    }
  }, {
    key: "setDisabledState",
    value: function setDisabledState(disabled) {
      this.disabled = disabled;
      this._time_options = this.generateAvailableTimes(this.date, !this.no_past_times || disabled, this.step);
    }
    /**
     * Registers a callback function that is called when the control's value changes in the UI.
     * @param fn The callback function to register
     */
  }, {
    key: "registerOnChange",
    value: function registerOnChange(fn) {
      this._onChange = fn;
    }
    /**
     * Registers a callback function is called by the forms API on initialization to update the form model on blur.
     * @param fn The callback function to register
     */
  }, {
    key: "registerOnTouched",
    value: function registerOnTouched(fn) {
      this._onTouch = fn;
    }
    /**
     * Show select field for time options
     */
  }, {
    key: "showSelect",
    value: function showSelect() {
      var _this3 = this;
      this.show_select = true;
      this.timeout('on_shown', function () {
        if (_this3.select_field) {
          _this3.select_field.focus();
          _this3.select_field.open();
          _this3.subscription('listen_close', _this3.select_field.openedChange.subscribe(function (state) {
            if (!state) {
              _this3.show_select = false;
            }
          }));
        }
      });
    }
    /**
     * Generate a list of time options for the given date
     * @param datestamp Date to generate options for
     * @param show_past Whether past times should be options
     */
  }, {
    key: "generateAvailableTimes",
    value: function generateAvailableTimes(datestamp, show_past) {
      var step = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 15;
      var now = new Date(Math.max(this.from, Date.now()));
      var date = new Date(datestamp);
      var blocks = [];
      if (show_past || !(0, date_fns_1.isSameDay)(date, now) && (0, date_fns_1.isAfter)(date, now)) {
        date = (0, date_fns_1.startOfDay)(date);
      } else if ((0, date_fns_1.isAfter)(date, now)) {
        date = new Date(now);
      }
      date = (0, date_fns_1.roundToNearestMinutes)(date, {
        nearestTo: step
      });
      var end = (0, date_fns_1.endOfDay)(date);
      // Add options for the rest of the day
      while ((0, date_fns_1.isAfter)(end, date)) {
        blocks.push({
          date: date.valueOf(),
          id: (0, date_fns_1.format)(date, 'HH:mm')
        });
        date = (0, date_fns_1.addMinutes)(date, step);
      }
      return blocks;
    }
  }]);
}(common_1.AsyncHandler);
_TimeFieldComponent = TimeFieldComponent;
_TimeFieldComponent.ɵfac = /*@__PURE__*/function () {
  var ɵTimeFieldComponent_BaseFactory;
  return function TimeFieldComponent_Factory(__ngFactoryType__) {
    return (ɵTimeFieldComponent_BaseFactory || (ɵTimeFieldComponent_BaseFactory = i0.ɵɵgetInheritedFactory(_TimeFieldComponent)))(__ngFactoryType__ || _TimeFieldComponent);
  };
}();
_TimeFieldComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _TimeFieldComponent,
  selectors: [["a-time-field"]],
  viewQuery: function TimeFieldComponent_Query(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵviewQuery(_c0, 5);
    }
    if (rf & 2) {
      var _t;
      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.select_field = _t.first);
    }
  },
  inputs: {
    step: "step",
    disabled: "disabled",
    no_past_times: "no_past_times",
    use_24hr: "use_24hr",
    force_time: "force_time",
    extra_info_fn: "extra_info_fn",
    from: "from",
    timezone: "timezone"
  },
  features: [i0.ɵɵProvidersFeature([{
    provide: forms_1.NG_VALUE_ACCESSOR,
    useExisting: (0, core_1.forwardRef)(function () {
      return _TimeFieldComponent;
    }),
    multi: true
  }]), i0.ɵɵInheritDefinitionFeature, i0.ɵɵNgOnChangesFeature],
  ngContentSelectors: _c1,
  decls: 14,
  vars: 11,
  consts: [["menu", "matMenu"], ["time-field", "", "matRipple", "", 1, "flex", "items-center", "justify-between", "border", "border-neutral", "rounded", "h-12", "w-full", "px-2", 3, "disabled", "matMenuTriggerFor"], [1, "flex", "flex-col", "leading-tight", "px-2", "text-left", "flex-1", "w-1/2"], [1, "truncate"], ["class", "text-xs opacity-30 truncate", 4, "ngIf"], [1, "text-2xl"], [1, "max-h-[15rem]", "min-w-[18rem]"], ["mat-menu-item", "", "class", "text-left", 3, "value", "click", 4, "ngIf"], ["mat-menu-item", "", "class", "text-left", 3, "value", "click", 4, "ngFor", "ngForOf"], [1, "text-xs", "opacity-30", "truncate"], ["mat-menu-item", "", 1, "text-left", 3, "click", "value"], [1, "flex", "items-center", "justify-between"], [1, "flex", "flex-col", "leading-tight"], [1, ""], ["class", "text-xs opacity-30", 4, "ngIf"], ["class", "text-2xl ml-2", 4, "ngIf"], [1, "text-xs", "opacity-30"], [1, "text-2xl", "ml-2"]],
  template: function TimeFieldComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵprojectionDef();
      i0.ɵɵelementStart(0, "button", 1)(1, "div", 2)(2, "div", 3);
      i0.ɵɵtext(3);
      i0.ɵɵpipe(4, "date");
      i0.ɵɵelementEnd();
      i0.ɵɵtemplate(5, TimeFieldComponent_div_5_Template, 3, 5, "div", 4);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(6, "app-icon", 5);
      i0.ɵɵtext(7, "arrow_drop_down");
      i0.ɵɵelementEnd()();
      i0.ɵɵelementStart(8, "mat-menu", 6, 0);
      i0.ɵɵtemplate(10, TimeFieldComponent_button_10_Template, 8, 7, "button", 7)(11, TimeFieldComponent_button_11_Template, 8, 8, "button", 8);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(12, "mat-error");
      i0.ɵɵprojection(13);
      i0.ɵɵelementEnd();
    }
    if (rf & 2) {
      var menu_r5 = i0.ɵɵreference(9);
      i0.ɵɵclassProp("opacity-30", ctx.disabled);
      i0.ɵɵproperty("disabled", ctx.disabled)("matMenuTriggerFor", menu_r5);
      i0.ɵɵadvance(3);
      i0.ɵɵtextInterpolate1(" ", i0.ɵɵpipeBind2(4, 8, ctx.active_time, ctx.time_format), " ");
      i0.ɵɵadvance(2);
      i0.ɵɵproperty("ngIf", ctx.timezone && ctx.tz);
      i0.ɵɵadvance(5);
      i0.ɵɵproperty("ngIf", ctx.force_time);
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngForOf", ctx.time_options);
    }
  },
  dependencies: [i1.NgForOf, i1.NgIf, i2.MatRipple, i3.MatError, i4.IconComponent, i5.MatMenu, i5.MatMenuItem, i5.MatMenuTrigger, i1.DatePipe],
  styles: ["mat-form-field[_ngcontent-%COMP%] {\n                width: 100%;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRpbWUtZmllbGQuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxXQUFXO1lBQ2YiLCJmaWxlIjoidGltZS1maWVsZC5jb21wb25lbnQudHMiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIG1hdC1mb3JtLWZpZWxkIHtcbiAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl19 */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvZm9ybS1maWVsZHMvc3JjL2xpYi90aW1lLWZpZWxkLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1lBQ1k7Z0JBQ0ksV0FBVztZQUNmOztBQUVaLGdYQUFnWCIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgbWF0LWZvcm0tZmllbGQge1xuICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgfVxuICAgICAgICAiXSwic291cmNlUm9vdCI6IiJ9 */"]
});
exports.TimeFieldComponent = TimeFieldComponent;

/***/ }),

/***/ 45748:
/*!*****************************************************************!*\
  !*** ./libs/form-fields/src/lib/upload-file-field.component.ts ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _taggedTemplateLiteral = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js */ 9959)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _UploadFileFieldComponent, _templateObject;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.UploadFileFieldComponent = void 0;
var core_1 = __webpack_require__(/*! @angular/core */ 37580);
var forms_1 = __webpack_require__(/*! @angular/forms */ 34456);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var operators_1 = __webpack_require__(/*! rxjs/operators */ 97303);
var blobUtil = __webpack_require__(/*! blob-util */ 67092);
var cloud_uploads_1 = __webpack_require__(/*! @placeos/cloud-uploads */ 51556);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @angular/common */ 60316);
var i2 = __webpack_require__(/*! @angular/material/core */ 74646);
var i3 = __webpack_require__(/*! ../../../components/src/lib/icon.component */ 69434);
var i4 = __webpack_require__(/*! @angular/material/progress-spinner */ 41134);
function UploadFileFieldComponent_div_2_ng_container_3_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵelementStart(1, "div", 10);
    i0.ɵɵelement(2, "mat-progress-spinner", 11);
    i0.ɵɵelementStart(3, "div", 12);
    i0.ɵɵtext(4);
    i0.ɵɵelementEnd()();
    i0.ɵɵelementContainerEnd();
  }
  if (rf & 2) {
    var ctx_r2 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance(2);
    i0.ɵɵproperty("diameter", 32)("value", ctx_r2.item.progress);
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate1(" ", ctx_r2.item.progress, " ");
  }
}
function UploadFileFieldComponent_div_2_a_4_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "a", 13)(1, "app-icon");
    i0.ɵɵtext(2, "link");
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var ctx_r2 = i0.ɵɵnextContext(2);
    i0.ɵɵproperty("href", ctx_r2.item.url, i0.ɵɵsanitizeUrl);
  }
}
function UploadFileFieldComponent_div_2_Template(rf, ctx) {
  if (rf & 1) {
    var _r2 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 5)(1, "div", 6);
    i0.ɵɵtext(2);
    i0.ɵɵelementEnd();
    i0.ɵɵtemplate(3, UploadFileFieldComponent_div_2_ng_container_3_Template, 5, 3, "ng-container", 7)(4, UploadFileFieldComponent_div_2_a_4_Template, 3, 1, "a", 8);
    i0.ɵɵelementStart(5, "button", 9);
    i0.ɵɵlistener("click", function UploadFileFieldComponent_div_2_Template_button_click_5_listener() {
      i0.ɵɵrestoreView(_r2);
      var ctx_r2 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r2.writeValue(null));
    });
    i0.ɵɵelementStart(6, "app-icon");
    i0.ɵɵtext(7, "close");
    i0.ɵɵelementEnd()()();
  }
  if (rf & 2) {
    var ctx_r2 = i0.ɵɵnextContext();
    i0.ɵɵclassProp("!bg-error", ctx_r2.item.progress < 1)("!bg-opacity-20", ctx_r2.item.progress < 1);
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate1(" ", ctx_r2.item.name, " ");
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", ctx_r2.item.progress >= 0 && ctx_r2.item.progress < 100);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", ctx_r2.item.progress >= 100);
  }
}
function UploadFileFieldComponent_ng_template_3_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 14)(1, "p", 15);
    i0.ɵɵi18n(2, 1);
    i0.ɵɵelementEnd()();
  }
}
var UploadFileFieldComponent = /*#__PURE__*/function () {
  function UploadFileFieldComponent() {
    var _this = this;
    _classCallCheck(this, UploadFileFieldComponent);
    this.registerOnChange = function (fn) {
      return _this._onChange = fn;
    };
    this.registerOnTouched = function (fn) {
      return _this._onTouch = fn;
    };
  }
  /**
   * Update the form field value
   * @param new_value New value to set on the form field
   */
  return _createClass(UploadFileFieldComponent, [{
    key: "setValue",
    value: function setValue(new_value) {
      this.item = new_value;
      if (this._onChange) this._onChange(this.item);
    }
    /**
     * Update local value when form control value is changed
     * @param value The new value for the component
     */
  }, {
    key: "writeValue",
    value: function writeValue(value) {
      this.item = value;
    }
  }, {
    key: "onFileEvent",
    value: function onFileEvent(event) {
      var _element$files,
        _this2 = this;
      var element = event.target;
      /* istanbul ignore else */
      if (!(element !== null && element !== void 0 && (_element$files = element.files) !== null && _element$files !== void 0 && _element$files.length)) return;
      var files = element.files;
      var on_change = function on_change(item) {
        _this2.item = item;
        _this2.setValue(_this2.item);
      };
      this._uploadFile(files[0], on_change);
    }
  }, {
    key: "_uploadFile",
    value: function _uploadFile(file, on_change) {
      var fileReader = new FileReader();
      fileReader.addEventListener('loadend', function (e) {
        var arrayBuffer = e.target.result;
        var blob = blobUtil.arrayBufferToBlob(arrayBuffer, file.type);
        var upload_list = (0, cloud_uploads_1.uploadFiles)([blob], {
          file_name: file.name
        });
        var upload = upload_list[0];
        var upload_details = {
          id: "".concat((0, common_1.randomInt)(999999999999)),
          name: file.name,
          progress: 0,
          size: file.size,
          created_at: Date.now(),
          url: ''
        };
        upload.status.pipe((0, operators_1.takeWhile)(function (_) {
          return _.status !== 'complete';
        }, true)).subscribe(function (state) {
          if (upload.access_url) upload_details.url = upload.access_url;
          upload_details.progress = state.progress;
          if (state.status === 'error') upload_details.progress = -1;
          on_change(upload_details);
        });
        on_change(upload_details);
      });
      fileReader.readAsArrayBuffer(file);
    }
  }]);
}();
_UploadFileFieldComponent = UploadFileFieldComponent;
_UploadFileFieldComponent.ɵfac = function UploadFileFieldComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _UploadFileFieldComponent)();
};
_UploadFileFieldComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _UploadFileFieldComponent,
  selectors: [["upload-file"]],
  features: [i0.ɵɵProvidersFeature([{
    provide: forms_1.NG_VALUE_ACCESSOR,
    useExisting: (0, core_1.forwardRef)(function () {
      return _UploadFileFieldComponent;
    }),
    multi: true
  }])],
  decls: 5,
  vars: 2,
  consts: function consts() {
    var i18n_0;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_7812370821534854890$$LIBS_FORM_FIELDS_SRC_LIB_UPLOAD_FILE_FIELD_COMPONENT_TS_0 = goog.getMsg("Drop file or click to upload file");
      i18n_0 = MSG_EXTERNAL_7812370821534854890$$LIBS_FORM_FIELDS_SRC_LIB_UPLOAD_FILE_FIELD_COMPONENT_TS_0;
    } else {
      i18n_0 = $localize(_templateObject || (_templateObject = _taggedTemplateLiteral([":\u241F1004d86509270a6dd320fdb33686c5c48dcb5208\u241F7812370821534854890:Drop file or click to upload file"])));
    }
    return [["empty_state", ""], i18n_0, [1, "bg-base-200", "hover:bg-base-200", "cursor-pointer", "p-2", "rounded", "border", "border-base-200", "w-full", "relative"], ["type", "file", 1, "absolute", "inset-0", "opacity-0", "max-w-full", "z-10", 3, "change"], ["item", "", "class", "w-full flex items-center border border-base-200 rounded bg-base-100 hover:bg-base-200 relative z-50", 3, "!bg-error", "!bg-opacity-20", 4, "ngIf", "ngIfElse"], ["item", "", 1, "w-full", "flex", "items-center", "border", "border-base-200", "rounded", "bg-base-100", "hover:bg-base-200", "relative", "z-50"], [1, "flex-1", "w-px", "font-mono", "truncate", "px-2", "text-sm"], [4, "ngIf"], ["icon", "", "matRipple", "", "target", "_blank", "rel", "noopener noreferrer", 3, "href", 4, "ngIf"], ["icon", "", 3, "click"], [1, "relative", "mx-1"], ["mode", "determinate", 3, "diameter", "value"], [1, "absolute", "top-1/2", "left-1/2", "-translate-x-1/2", "-translate-y-1/2", "text-sm", "font-bold"], ["icon", "", "matRipple", "", "target", "_blank", "rel", "noopener noreferrer", 3, "href"], [1, "h-full", "w-full", "flex", "flex-col", "justify-center", "items-center", "z-0"], [1, "opacity-30"]];
  },
  template: function UploadFileFieldComponent_Template(rf, ctx) {
    if (rf & 1) {
      var _r1 = i0.ɵɵgetCurrentView();
      i0.ɵɵelementStart(0, "div", 2)(1, "input", 3);
      i0.ɵɵlistener("change", function UploadFileFieldComponent_Template_input_change_1_listener($event) {
        i0.ɵɵrestoreView(_r1);
        return i0.ɵɵresetView(ctx.onFileEvent($event));
      });
      i0.ɵɵelementEnd();
      i0.ɵɵtemplate(2, UploadFileFieldComponent_div_2_Template, 8, 7, "div", 4);
      i0.ɵɵelementEnd();
      i0.ɵɵtemplate(3, UploadFileFieldComponent_ng_template_3_Template, 3, 0, "ng-template", null, 0, i0.ɵɵtemplateRefExtractor);
    }
    if (rf & 2) {
      var empty_state_r4 = i0.ɵɵreference(4);
      i0.ɵɵadvance(2);
      i0.ɵɵproperty("ngIf", ctx.item)("ngIfElse", empty_state_r4);
    }
  },
  dependencies: [i1.NgIf, i2.MatRipple, i3.IconComponent, i4.MatProgressSpinner]
});
exports.UploadFileFieldComponent = UploadFileFieldComponent;

/***/ }),

/***/ 65542:
/*!*****************************************************************!*\
  !*** ./libs/form-fields/src/lib/upload-list-field.component.ts ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _taggedTemplateLiteral = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js */ 9959)["default"]);
var _toConsumableArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/toConsumableArray.js */ 86033)["default"]);
var _objectSpread = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/objectSpread2.js */ 34092)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _UploadListFieldComponent, _templateObject, _templateObject2, _templateObject3, _templateObject4;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.UploadListFieldComponent = void 0;
var core_1 = __webpack_require__(/*! @angular/core */ 37580);
var forms_1 = __webpack_require__(/*! @angular/forms */ 34456);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var operators_1 = __webpack_require__(/*! rxjs/operators */ 97303);
var blobUtil = __webpack_require__(/*! blob-util */ 67092);
var cloud_uploads_1 = __webpack_require__(/*! @placeos/cloud-uploads */ 51556);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @angular/common */ 60316);
var i2 = __webpack_require__(/*! @angular/material/core */ 74646);
var i3 = __webpack_require__(/*! ../../../components/src/lib/icon.component */ 69434);
var i4 = __webpack_require__(/*! @angular/material/progress-spinner */ 41134);
function UploadListFieldComponent_div_12_div_1_ng_container_3_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵelementStart(1, "div", 21);
    i0.ɵɵelement(2, "mat-progress-spinner", 22);
    i0.ɵɵelementStart(3, "div", 23);
    i0.ɵɵtext(4);
    i0.ɵɵelementEnd()();
    i0.ɵɵelementContainerEnd();
  }
  if (rf & 2) {
    var item_r3 = i0.ɵɵnextContext().$implicit;
    i0.ɵɵadvance(2);
    i0.ɵɵproperty("diameter", 32)("value", item_r3.progress);
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate1(" ", item_r3.progress, " ");
  }
}
function UploadListFieldComponent_div_12_div_1_a_4_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "a", 24)(1, "app-icon");
    i0.ɵɵtext(2, "link");
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var item_r3 = i0.ɵɵnextContext().$implicit;
    i0.ɵɵproperty("href", item_r3.url, i0.ɵɵsanitizeUrl);
  }
}
function UploadListFieldComponent_div_12_div_1_Template(rf, ctx) {
  if (rf & 1) {
    var _r2 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 16)(1, "div", 17);
    i0.ɵɵtext(2);
    i0.ɵɵelementEnd();
    i0.ɵɵtemplate(3, UploadListFieldComponent_div_12_div_1_ng_container_3_Template, 5, 3, "ng-container", 18)(4, UploadListFieldComponent_div_12_div_1_a_4_Template, 3, 1, "a", 19);
    i0.ɵɵelementStart(5, "button", 20);
    i0.ɵɵlistener("click", function UploadListFieldComponent_div_12_div_1_Template_button_click_5_listener() {
      var item_r3 = i0.ɵɵrestoreView(_r2).$implicit;
      var ctx_r3 = i0.ɵɵnextContext(2);
      return i0.ɵɵresetView(ctx_r3.removeFile(item_r3));
    });
    i0.ɵɵelementStart(6, "app-icon");
    i0.ɵɵtext(7, "close");
    i0.ɵɵelementEnd()()();
  }
  if (rf & 2) {
    var item_r3 = ctx.$implicit;
    i0.ɵɵclassProp("!bg-error", item_r3.progress < 1)("!bg-opacity-20", item_r3.progress < 1);
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate1(" ", item_r3.name, " ");
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", item_r3.progress >= 0 && item_r3.progress < 100);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", item_r3.progress >= 100);
  }
}
function UploadListFieldComponent_div_12_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 14);
    i0.ɵɵtemplate(1, UploadListFieldComponent_div_12_div_1_Template, 8, 7, "div", 15);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r3 = i0.ɵɵnextContext();
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngForOf", ctx_r3.list);
  }
}
function UploadListFieldComponent_ng_template_13_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 25)(1, "p", 26);
    i0.ɵɵi18n(2, 4);
    i0.ɵɵelementEnd()();
  }
}
var UploadListFieldComponent = /*#__PURE__*/function () {
  function UploadListFieldComponent() {
    var _this = this;
    _classCallCheck(this, UploadListFieldComponent);
    this.list = [];
    this.registerOnChange = function (fn) {
      return _this._onChange = fn;
    };
    this.registerOnTouched = function (fn) {
      return _this._onTouch = fn;
    };
  }
  /**
   * Update the form field value
   * @param new_value New value to set on the form field
   */
  return _createClass(UploadListFieldComponent, [{
    key: "setValue",
    value: function setValue(new_value) {
      this.list = new_value.filter(function (_) {
        return _.url && _.progress >= 100;
      });
      if (this._onChange) this._onChange(this.list);
    }
    /**
     * Update local value when form control value is changed
     * @param value The new value for the component
     */
  }, {
    key: "writeValue",
    value: function writeValue(value) {
      this.list = value.map(function (_) {
        return _objectSpread({
          id: "file-".concat((0, common_1.randomInt)(999999999))
        }, _);
      });
    }
  }, {
    key: "removeFile",
    value: function removeFile(item) {
      this.list = this.list.filter(function (_) {
        return _.id !== item.id;
      });
    }
  }, {
    key: "onFileEvent",
    value: function onFileEvent(event) {
      var _element$files,
        _this2 = this;
      var element = event.target;
      /* istanbul ignore else */
      if (!(element !== null && element !== void 0 && (_element$files = element.files) !== null && _element$files !== void 0 && _element$files.length)) return;
      var files = element.files;
      var on_change = function on_change(item) {
        _this2.list = _toConsumableArray((_this2.list || []).filter(function (_) {
          return _.id !== item.id;
        })).sort(function (a, b) {
          return a.created_at - b.created_at;
        });
        _this2.setValue(_this2.list);
      };
      for (var i = 0; i < files.length; i++) {
        this._uploadFile(files[i], on_change);
      }
    }
  }, {
    key: "_uploadFile",
    value: function _uploadFile(file, on_change) {
      var fileReader = new FileReader();
      fileReader.addEventListener('loadend', function (e) {
        var arrayBuffer = e.target.result;
        var blob = blobUtil.arrayBufferToBlob(arrayBuffer, file.type);
        var upload_list = (0, cloud_uploads_1.uploadFiles)([blob], {
          file_name: file.name
        });
        var upload = upload_list[0];
        var upload_details = {
          id: "".concat((0, common_1.randomInt)(999999999999)),
          name: file.name,
          progress: 0,
          size: file.size,
          created_at: Date.now(),
          url: ''
        };
        upload.status.pipe((0, operators_1.takeWhile)(function (_) {
          return _.status !== 'complete';
        }, true)).subscribe(function (state) {
          if (upload.access_url) upload_details.url = upload.access_url;
          upload_details.progress = state.progress;
          if (state.status === 'error') upload_details.progress = -1;
          on_change(upload_details);
        });
        on_change(upload_details);
      });
      fileReader.readAsArrayBuffer(file);
    }
  }]);
}();
_UploadListFieldComponent = UploadListFieldComponent;
_UploadListFieldComponent.ɵfac = function UploadListFieldComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _UploadListFieldComponent)();
};
_UploadListFieldComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _UploadListFieldComponent,
  selectors: [["upload-list"]],
  features: [i0.ɵɵProvidersFeature([{
    provide: forms_1.NG_VALUE_ACCESSOR,
    useExisting: (0, core_1.forwardRef)(function () {
      return _UploadListFieldComponent;
    }),
    multi: true
  }])],
  decls: 15,
  vars: 2,
  consts: function consts() {
    var i18n_0;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_8563959152643174307$$LIBS_FORM_FIELDS_SRC_LIB_UPLOAD_LIST_FIELD_COMPONENT_TS_0 = goog.getMsg("Drop files");
      i18n_0 = MSG_EXTERNAL_8563959152643174307$$LIBS_FORM_FIELDS_SRC_LIB_UPLOAD_LIST_FIELD_COMPONENT_TS_0;
    } else {
      i18n_0 = $localize(_templateObject || (_templateObject = _taggedTemplateLiteral([":\u241F23f1ffc24dd64fff388b73d7a0fd774ccdcb016c\u241F8563959152643174307:Drop files"])));
    }
    var i18n_1;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_6627551976444260400$$LIBS_FORM_FIELDS_SRC_LIB_UPLOAD_LIST_FIELD_COMPONENT_TS_1 = goog.getMsg("or");
      i18n_1 = MSG_EXTERNAL_6627551976444260400$$LIBS_FORM_FIELDS_SRC_LIB_UPLOAD_LIST_FIELD_COMPONENT_TS_1;
    } else {
      i18n_1 = $localize(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([":\u241F053e81597467a642e04109eebe934c84e6a1f467\u241F6627551976444260400:or"])));
    }
    var i18n_2;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_787163983066183218$$LIBS_FORM_FIELDS_SRC_LIB_UPLOAD_LIST_FIELD_COMPONENT_TS_2 = goog.getMsg("Browse");
      i18n_2 = MSG_EXTERNAL_787163983066183218$$LIBS_FORM_FIELDS_SRC_LIB_UPLOAD_LIST_FIELD_COMPONENT_TS_2;
    } else {
      i18n_2 = $localize(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([":\u241F2c7dc726e93bcf3ca2f316bbebe96fa1e5288ba0\u241F787163983066183218:Browse"])));
    }
    var i18n_3;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_7718554075744605971$$LIBS_FORM_FIELDS_SRC_LIB_UPLOAD_LIST_FIELD_COMPONENT_TS_3 = goog.getMsg("No uploaded files");
      i18n_3 = MSG_EXTERNAL_7718554075744605971$$LIBS_FORM_FIELDS_SRC_LIB_UPLOAD_LIST_FIELD_COMPONENT_TS_3;
    } else {
      i18n_3 = $localize(_templateObject4 || (_templateObject4 = _taggedTemplateLiteral([":\u241F5d00f53d21b24330adb70a4f0579ee811f589bd4\u241F7718554075744605971:No uploaded files"])));
    }
    return [["empty_state", ""], i18n_0, i18n_1, i18n_2, i18n_3, [1, "flex", "items-center", "space-x-2"], [1, "w-52", "h-48", "relative", "border-2", "border-dashed", "border-base-200", "flex", "flex-col", "items-center", "justify-center", "rounded", "hover:bg-neutral", "cursor-pointer"], [1, "text-3xl", "mb-2"], [1, "text-center"], [1, "text-center", "text-xs", "my-1"], ["btn", "", "matRipple", "", 1, "w-28"], ["multiple", "true", "type", "file", 1, "absolute", "inset-0", "opacity-0", "max-w-full", 3, "change"], [1, "w-1/2", "h-48", "flex-1", "flex", "flex-col", "items-center"], ["list", "", "class", "space-y-2 w-full h-full overflow-auto", 4, "ngIf", "ngIfElse"], ["list", "", 1, "space-y-2", "w-full", "h-full", "overflow-auto"], ["item", "", "class", "w-full flex items-center border border-base-200 rounded bg-base-100 hover:bg-base-200", 3, "!bg-error", "!bg-opacity-20", 4, "ngFor", "ngForOf"], ["item", "", 1, "w-full", "flex", "items-center", "border", "border-base-200", "rounded", "bg-base-100", "hover:bg-base-200"], [1, "flex-1", "w-px", "font-mono", "truncate", "px-2", "text-sm"], [4, "ngIf"], ["icon", "", "matRipple", "", "target", "_blank", "rel", "noopener noreferrer", 3, "href", 4, "ngIf"], ["icon", "", 3, "click"], [1, "relative", "mx-1"], ["mode", "determinate", 3, "diameter", "value"], [1, "absolute", "top-1/2", "left-1/2", "-translate-x-1/2", "-translate-y-1/2", "text-sm", "font-bold"], ["icon", "", "matRipple", "", "target", "_blank", "rel", "noopener noreferrer", 3, "href"], [1, "h-full", "w-full", "flex", "flex-col", "justify-center", "items-center"], [1, "opacity-30"]];
  },
  template: function UploadListFieldComponent_Template(rf, ctx) {
    if (rf & 1) {
      var _r1 = i0.ɵɵgetCurrentView();
      i0.ɵɵelementStart(0, "div", 5)(1, "div", 6)(2, "app-icon", 7);
      i0.ɵɵtext(3, "upload_file");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(4, "p", 8);
      i0.ɵɵi18n(5, 1);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(6, "p", 9);
      i0.ɵɵi18n(7, 2);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(8, "button", 10);
      i0.ɵɵi18n(9, 3);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(10, "input", 11);
      i0.ɵɵlistener("change", function UploadListFieldComponent_Template_input_change_10_listener($event) {
        i0.ɵɵrestoreView(_r1);
        return i0.ɵɵresetView(ctx.onFileEvent($event));
      });
      i0.ɵɵelementEnd()();
      i0.ɵɵelementStart(11, "div", 12);
      i0.ɵɵtemplate(12, UploadListFieldComponent_div_12_Template, 2, 1, "div", 13);
      i0.ɵɵelementEnd()();
      i0.ɵɵtemplate(13, UploadListFieldComponent_ng_template_13_Template, 3, 0, "ng-template", null, 0, i0.ɵɵtemplateRefExtractor);
    }
    if (rf & 2) {
      var empty_state_r5 = i0.ɵɵreference(14);
      i0.ɵɵadvance(12);
      i0.ɵɵproperty("ngIf", ctx.list == null ? null : ctx.list.length)("ngIfElse", empty_state_r5);
    }
  },
  dependencies: [i1.NgForOf, i1.NgIf, i2.MatRipple, i3.IconComponent, i4.MatProgressSpinner]
});
exports.UploadListFieldComponent = UploadListFieldComponent;

/***/ }),

/***/ 840:
/*!***************************************************************!*\
  !*** ./libs/form-fields/src/lib/user-list-field.component.ts ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _taggedTemplateLiteral = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js */ 9959)["default"]);
var _objectSpread = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/objectSpread2.js */ 34092)["default"]);
var _toConsumableArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/toConsumableArray.js */ 86033)["default"]);
var _createForOfIteratorHelper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createForOfIteratorHelper.js */ 36350)["default"]);
var _slicedToArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/slicedToArray.js */ 6282)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _callSuper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/callSuper.js */ 8513)["default"]);
var _inherits = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/inherits.js */ 58160)["default"]);
var _UserListFieldComponent, _templateObject, _templateObject2, _templateObject3, _templateObject4, _templateObject5;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.UserListFieldComponent = void 0;
var core_1 = __webpack_require__(/*! @angular/core */ 37580);
var forms_1 = __webpack_require__(/*! @angular/forms */ 34456);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var operators_1 = __webpack_require__(/*! rxjs/operators */ 97303);
var dialog_1 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var keycodes_1 = __webpack_require__(/*! @angular/cdk/keycodes */ 74879);
var rxjs_1 = __webpack_require__(/*! rxjs */ 15681);
var new_user_modal_component_1 = __webpack_require__(/*! libs/users/src/lib/new-user-modal.component */ 11543);
var guests_fn_1 = __webpack_require__(/*! libs/users/src/lib/guests.fn */ 86039);
var staff_fn_1 = __webpack_require__(/*! libs/users/src/lib/staff.fn */ 2372);
var user_class_1 = __webpack_require__(/*! libs/users/src/lib/user.class */ 93693);
var user_utilities_1 = __webpack_require__(/*! libs/users/src/lib/user.utilities */ 24129);
var ts_client_1 = __webpack_require__(/*! @placeos/ts-client */ 35713);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var i2 = __webpack_require__(/*! @placeos/common */ 22797);
var _c0 = ["search_field"];
function UserListFieldComponent_mat_chip_row_6_app_icon_4_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "app-icon", 22);
    i0.ɵɵpipe(1, "placeuser");
    i0.ɵɵpipe(2, "async");
    i0.ɵɵtext(3);
    i0.ɵɵpipe(4, "placeuser");
    i0.ɵɵpipe(5, "async");
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var tmp_7_0;
    var tmp_8_0;
    var item_r3 = i0.ɵɵnextContext().$implicit;
    var ctx_r3 = i0.ɵɵnextContext();
    i0.ɵɵproperty("matTooltip", (tmp_7_0 = i0.ɵɵpipeBind1(2, 4, i0.ɵɵpipeBind1(1, 2, item_r3 == null ? null : item_r3.email))) == null ? null : tmp_7_0.location_name_time(ctx_r3.time));
    i0.ɵɵadvance(3);
    i0.ɵɵtextInterpolate1(" ", (tmp_8_0 = i0.ɵɵpipeBind1(5, 8, i0.ɵɵpipeBind1(4, 6, item_r3 == null ? null : item_r3.email))) == null ? null : tmp_8_0.location_icon(ctx_r3.time), " ");
  }
}
function UserListFieldComponent_mat_chip_row_6_Template(rf, ctx) {
  if (rf & 1) {
    var _r2 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "mat-chip-row", 18);
    i0.ɵɵlistener("removed", function UserListFieldComponent_mat_chip_row_6_Template_mat_chip_row_removed_0_listener() {
      var item_r3 = i0.ɵɵrestoreView(_r2).$implicit;
      var ctx_r3 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r3.removeUser(item_r3));
    });
    i0.ɵɵelementStart(1, "div", 19)(2, "div");
    i0.ɵɵtext(3);
    i0.ɵɵelementEnd();
    i0.ɵɵtemplate(4, UserListFieldComponent_mat_chip_row_6_app_icon_4_Template, 6, 10, "app-icon", 20);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(5, "button", 21)(6, "app-icon");
    i0.ɵɵtext(7, "cancel");
    i0.ɵɵelementEnd()()();
  }
  if (rf & 2) {
    var item_r3 = ctx.$implicit;
    i0.ɵɵclassProp("bg-warning", item_r3.is_external);
    i0.ɵɵadvance(3);
    i0.ɵɵtextInterpolate(item_r3.name || item_r3.email);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", !item_r3.is_external);
    i0.ɵɵadvance();
    i0.ɵɵattribute("aria-label", "Remove " + (item_r3.name || item_r3.email));
  }
}
function UserListFieldComponent_mat_spinner_10_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelement(0, "mat-spinner", 23);
  }
}
function UserListFieldComponent_mat_option_13_Template(rf, ctx) {
  if (rf & 1) {
    var _r5 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "mat-option", 24);
    i0.ɵɵlistener("click", function UserListFieldComponent_mat_option_13_Template_mat_option_click_0_listener() {
      i0.ɵɵrestoreView(_r5);
      var ctx_r3 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r3.addUserFromEmail());
    });
    i0.ɵɵi18n(1, 4);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r3 = i0.ɵɵnextContext();
    i0.ɵɵadvance();
    i0.ɵɵi18nExp(ctx_r3.search$.getValue());
    i0.ɵɵi18nApply(1);
  }
}
function UserListFieldComponent_mat_option_14_Template(rf, ctx) {
  if (rf & 1) {
    var _r6 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "mat-option", 25);
    i0.ɵɵlistener("click", function UserListFieldComponent_mat_option_14_Template_mat_option_click_0_listener() {
      var user_r7 = i0.ɵɵrestoreView(_r6).$implicit;
      var ctx_r3 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r3.addUser(user_r7));
    });
    i0.ɵɵtext(1);
    i0.ɵɵelement(2, "br");
    i0.ɵɵelementStart(3, "span", 26);
    i0.ɵɵtext(4);
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var user_r7 = ctx.$implicit;
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", user_r7.name, "");
    i0.ɵɵadvance(3);
    i0.ɵɵtextInterpolate(user_r7.email);
  }
}
function UserListFieldComponent_div_16_Template(rf, ctx) {
  if (rf & 1) {
    var _r8 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 27)(1, "button", 28);
    i0.ɵɵlistener("click", function UserListFieldComponent_div_16_Template_button_click_1_listener() {
      i0.ɵɵrestoreView(_r8);
      var ctx_r3 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r3.openNewUserModal());
    });
    i0.ɵɵi18nStart(2, 5);
    i0.ɵɵelementStart(3, "div", 29);
    i0.ɵɵelement(4, "span", 30);
    i0.ɵɵelementEnd();
    i0.ɵɵi18nEnd();
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(5, "button", 31);
    i0.ɵɵi18nStart(6, 6);
    i0.ɵɵelementStart(7, "div", 29);
    i0.ɵɵelement(8, "span", 30);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(9, "input", 32);
    i0.ɵɵlistener("change", function UserListFieldComponent_div_16_Template_input_change_9_listener($event) {
      i0.ɵɵrestoreView(_r8);
      var ctx_r3 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r3.addUsersFromFile($event));
    });
    i0.ɵɵelementEnd();
    i0.ɵɵi18nEnd();
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(10, "button", 33);
    i0.ɵɵlistener("click", function UserListFieldComponent_div_16_Template_button_click_10_listener() {
      i0.ɵɵrestoreView(_r8);
      var ctx_r3 = i0.ɵɵnextContext();
      ctx_r3.downloadCSVTemplate();
      return i0.ɵɵresetView(ctx_r3.download.emit());
    });
    i0.ɵɵi18nStart(11, 7);
    i0.ɵɵelementStart(12, "div", 29);
    i0.ɵɵelement(13, "span", 30);
    i0.ɵɵelementEnd();
    i0.ɵɵi18nEnd();
    i0.ɵɵelementEnd()();
  }
}
function validateEmail(email) {
  var re = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
  return re.test(email);
}
var ACCEPTED_FILE_TYPES = ['text/csv', 'text/plain'];
var DENIED_FILE_TYPES = ['application/vnd.ms-excel', 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet'];
var UserListFieldComponent = /*#__PURE__*/function (_common_1$AsyncHandle) {
  function UserListFieldComponent(_dialog, _settings) {
    var _this;
    _classCallCheck(this, UserListFieldComponent);
    _this = _callSuper(this, UserListFieldComponent);
    _this._dialog = _dialog;
    _this._settings = _settings;
    _this.time = Date.now();
    /** Number of characters needed before a search will start */
    _this.limit = 3;
    /** Whether guests should also show when searching for users */
    _this.guests = false;
    /** Whether guests should also show when searching for users */
    _this.guests_only = false;
    /** Whether optional actions should be shown */
    _this.hide_actions = false;
    /** Whether as custom template will be provided outside the component */
    _this.custom_template = false;
    /** Emitter for action to make a new user */
    _this.new_user = new core_1.EventEmitter();
    /** Whether user should download the CSV template */
    _this.download = new core_1.EventEmitter();
    _this.separatorKeysCodes = [keycodes_1.ENTER, keycodes_1.COMMA];
    /** Whether user list is loading */
    _this.loading = false;
    _this.search$ = new rxjs_1.BehaviorSubject('');
    /** User list to display */
    _this.user_list$ = _this.search$.pipe((0, operators_1.debounceTime)(300), (0, operators_1.switchMap)(function (_) {
      _this.loading = true;
      return (_ ? _this.guests ? (0, rxjs_1.combineLatest)([_this.searchStaff(_), (0, guests_fn_1.searchGuests)(_)]).pipe((0, operators_1.map)(function (_ref) {
        var _ref2 = _slicedToArray(_ref, 2),
          staff = _ref2[0],
          guests = _ref2[1];
        if (_this.guests_only) staff = [];
        var visitors_list = [];
        var visitors = _this._settings.get('visitor-invitees') || [];
        var _iterator = _createForOfIteratorHelper(visitors),
          _step;
        try {
          for (_iterator.s(); !(_step = _iterator.n()).done;) {
            var item = _step.value;
            var _item$split = item.split('|'),
              _item$split2 = _slicedToArray(_item$split, 3),
              email = _item$split2[0],
              name = _item$split2[1],
              company = _item$split2[2];
            visitors_list.push({
              email: email,
              name: name,
              company: company
            });
          }
        } catch (err) {
          _iterator.e(err);
        } finally {
          _iterator.f();
        }
        return (0, common_1.unique)(staff.concat(guests).concat(visitors_list), 'email');
      })) : _this.searchStaff(_) : (0, rxjs_1.of)([])).pipe((0, operators_1.catchError)(function (_) {
        return (0, rxjs_1.of)([]);
      }));
    }), (0, operators_1.tap)(function (_) {
      return _this.loading = false;
    }));
    /** List of active selected users on the list */
    _this.active_list = [];
    _this.validFn = function (s) {
      return validateEmail(s);
    };
    _this.emptyClick = function () {
      return _this.openNewUserModal(new user_class_1.User());
    };
    return _this;
  }
  _inherits(UserListFieldComponent, _common_1$AsyncHandle);
  return _createClass(UserListFieldComponent, [{
    key: "searchStaff",
    value: function searchStaff(q) {
      var _ref3;
      return this._settings.get('app.basic_user_search') ? (0, ts_client_1.queryUsers)({
        q: q,
        authority_id: (_ref3 = (0, ts_client_1.authority)()) === null || _ref3 === void 0 ? void 0 : _ref3.id
      }).pipe((0, operators_1.map)(function (_) {
        return _.data.map(function (u) {
          return new user_class_1.User(u);
        });
      })) : (0, staff_fn_1.searchStaff)(q);
    }
  }, {
    key: "search_valid_email",
    get: function get() {
      return validateEmail(this.search$.getValue());
    }
  }, {
    key: "updateSearch",
    value: function updateSearch() {
      var _this2 = this;
      var new_value = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';
      this.timeout('search', function () {
        return _this2.search$.next(new_value);
      });
    }
  }, {
    key: "addUserFromEmail",
    value: function addUserFromEmail() {
      var _this3 = this;
      var email = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';
      if (!email) email = this.search$.getValue();
      if (!validateEmail(email)) return;
      var user = new user_class_1.User({
        id: email,
        email: email,
        name: email.split('@')[0]
      });
      this.addUser(user);
      var name = user.name,
        organisation = user.organisation;
      var visitor_details = "".concat(email, "|").concat(name, "|").concat(organisation);
      var old_visitors = this._settings.get('visitor-invitees') || [];
      this._settings.saveUserSetting('visitor-invitees', [].concat(_toConsumableArray(old_visitors.filter(function (_) {
        return !_.includes(email);
      })), [visitor_details]));
      this.timeout('clear_search', function () {
        _this3.search$.next('');
        _this3._search_el.nativeElement.value = '';
      }, 100);
    }
    /**
     * Add user to the user list
     * @param user
     */
  }, {
    key: "addUser",
    value: function addUser(user) {
      var _this$active_list,
        _ref4,
        _this4 = this;
      var list = ((_this$active_list = this.active_list) === null || _this$active_list === void 0 ? void 0 : _this$active_list.filter(function (_) {
        return _.id !== user.id;
      })) || [];
      this.setValue([].concat(_toConsumableArray(list), [new user_class_1.User(_objectSpread(_objectSpread({}, user), {}, {
        id: user.id || user.email,
        visit_expected: (_ref4 = !user.id && user.is_external !== true ? user.visit_expected : null) !== null && _ref4 !== void 0 ? _ref4 : true
      }))]));
      this.timeout('clear_search', function () {
        _this4.search$.next('');
        _this4._search_el.nativeElement.value = '';
      }, 100);
    }
    /**
     * Remove user from the user list
     * @param user
     */
  }, {
    key: "removeUser",
    value: function removeUser(user) {
      var list = this.active_list.filter(function (a_user) {
        return a_user.id !== user.id;
      });
      this.setValue(list);
    }
    /**
     * Load CSV file and populate the user list with the contents
     * @param event File input field event
     */
  }, {
    key: "addUsersFromFile",
    value: function addUsersFromFile(event) {
      var _this5 = this;
      /* istanbul ignore else */
      if (event.target) {
        var file = event.target.files[0];
        /* istanbul ignore else */
        if (file) {
          if (!ACCEPTED_FILE_TYPES.includes(file.type) || DENIED_FILE_TYPES.includes(file.type)) {
            (0, common_1.notifyError)('Only CSV files are supported');
            return;
          }
          var reader = new FileReader();
          reader.readAsText(file, 'UTF-8');
          reader.addEventListener('load', function (evt) {
            _this5.processCsvData(evt.srcElement.result);
            event.target.value = '';
          });
          reader.addEventListener('error', function (_) {
            return (0, common_1.notifyError)('Error reading file.');
          });
        }
      }
    }
    /**
     * Process raw CSV data and save user data to attendee list
     * @param data CSV data
     */
  }, {
    key: "processCsvData",
    value: function processCsvData(data) {
      var _ref5,
        _this6 = this;
      var list = (0, common_1.csvToJson)(data) || [];
      var id = ((_ref5 = (0, common_1.currentUser)()) === null || _ref5 === void 0 ? void 0 : _ref5.staff_id) || 'unknown';
      var _iterator2 = _createForOfIteratorHelper(list),
        _step2;
      try {
        var _loop = function _loop() {
          var _el$visit_expected;
          var el = _step2.value;
          el.name = el.name || "".concat(el.first_name, " ").concat(el.last_name);
          var display = (el.name || "".concat(Math.floor(Math.random() * 99999999))).split(' ').join('_').toLowerCase();
          /* istanbul ignore else */
          if (!el.email) {
            el.email = "".concat(display, "+").concat(id, "@guest.").concat(user_utilities_1.USER_DOMAIN);
          }
          var internal_emails = _this6._settings.get('app.bookings.internal_emails') || ['place.tech'];
          el.visit_expected = (_el$visit_expected = el.visit_expected) !== null && _el$visit_expected !== void 0 ? _el$visit_expected : !internal_emails.find(function (_) {
            return el.email.endsWith(_);
          });
          /** Convert phone to string. PWCME-544 */
          el.phone = '' + el.phone;
          _this6.addUser(new user_class_1.User(el));
        };
        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
          _loop();
        }
      } catch (err) {
        _iterator2.e(err);
      } finally {
        _iterator2.f();
      }
    }
    /* istanbul ignore next */
    /** Download template CSV file */
  }, {
    key: "downloadCSVTemplate",
    value: function downloadCSVTemplate() {
      if (this.custom_template) return;
      var template = "Organisation,First Name,Last Name,Email,Phone,Assistance Required,Visit Expected\nFake Org,John,Smith,john.smith@example.com,01234567898,false,true";
      (0, common_1.downloadFile)('template.csv', template);
    }
    /**
     * Update the form field value
     * @param new_value New value to set on the form field
     */
  }, {
    key: "setValue",
    value: function setValue(new_value) {
      this.active_list = new_value;
      if (this._onChange) {
        this._onChange(new_value);
      }
    }
    /* istanbul ignore next */
    /**
     * Update local value when form control value is changed
     * @param value The new value for the component
     */
  }, {
    key: "writeValue",
    value: function writeValue(value) {
      this.active_list = value;
    }
  }, {
    key: "setDisabledState",
    value: function setDisabledState(disabled) {
      this.disabled = disabled;
    }
    /* istanbul ignore next */
    /**
     * Registers a callback function that is called when the control's value changes in the UI.
     * @param fn The callback function to register
     */
  }, {
    key: "registerOnChange",
    value: function registerOnChange(fn) {
      this._onChange = fn;
    }
    /* istanbul ignore next */
    /**
     * Registers a callback function is called by the forms API on initialization to update the form model on blur.
     * @param fn The callback function to register
     */
  }, {
    key: "registerOnTouched",
    value: function registerOnTouched(fn) {
      this._onTouch = fn;
    }
  }, {
    key: "displayFn",
    value: function displayFn(item) {
      return (item === null || item === void 0 ? void 0 : item.name) || '';
    }
    /**
     * Open modal to add or update user details
     */
  }, {
    key: "openNewUserModal",
    value: function openNewUserModal() {
      var _ref$componentInstanc,
        _this7 = this;
      var user = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : new user_class_1.User();
      var ref = this._dialog.open(new_user_modal_component_1.NewUserModalComponent, {
        width: 'auto',
        height: 'auto',
        data: {
          user: user
        }
      });
      (_ref$componentInstanc = ref.componentInstance) === null || _ref$componentInstanc === void 0 || _ref$componentInstanc.event.pipe((0, operators_1.first)(function (_) {
        return _.reason === 'done';
      })).subscribe(function (event) {
        _this7.addUser(event.metadata);
        ref.close();
      });
    }
  }]);
}(common_1.AsyncHandler);
_UserListFieldComponent = UserListFieldComponent;
_UserListFieldComponent.ɵfac = function UserListFieldComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _UserListFieldComponent)(i0.ɵɵdirectiveInject(i1.MatDialog), i0.ɵɵdirectiveInject(i2.SettingsService));
};
_UserListFieldComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _UserListFieldComponent,
  selectors: [["a-user-list-field"]],
  viewQuery: function UserListFieldComponent_Query(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵviewQuery(_c0, 5);
    }
    if (rf & 2) {
      var _t;
      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx._search_el = _t.first);
    }
  },
  inputs: {
    time: "time",
    disabled: "disabled",
    limit: "limit",
    guests: "guests",
    guests_only: "guests_only",
    hide_actions: "hide_actions",
    custom_template: "custom_template",
    filter: "filter"
  },
  outputs: {
    new_user: "new_user",
    download: "download"
  },
  features: [i0.ɵɵProvidersFeature([{
    provide: forms_1.NG_VALUE_ACCESSOR,
    useExisting: (0, core_1.forwardRef)(function () {
      return _UserListFieldComponent;
    }),
    multi: true
  }]), i0.ɵɵInheritDefinitionFeature],
  decls: 17,
  vars: 14,
  consts: function consts() {
    var i18n_0;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_5361968336322693258$$LIBS_FORM_FIELDS_SRC_LIB_USER_LIST_FIELD_COMPONENT_TS_0 = goog.getMsg("Type a name or email");
      i18n_0 = MSG_EXTERNAL_5361968336322693258$$LIBS_FORM_FIELDS_SRC_LIB_USER_LIST_FIELD_COMPONENT_TS_0;
    } else {
      i18n_0 = $localize(_templateObject || (_templateObject = _taggedTemplateLiteral([":\u241F5ecf84665fa441ea616e171804e6652d010c9ed2\u241F5361968336322693258:Type a name or email"])));
    }
    var i18n_1;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_2206723750290169400$$LIBS_FORM_FIELDS_SRC_LIB_USER_LIST_FIELD_COMPONENT_TS_1 = goog.getMsg(" Add external user with email \"{$interpolation}\" ", {
        "interpolation": "\uFFFD0\uFFFD"
      }, {
        original_code: {
          "interpolation": "{{ search$.getValue() }}"
        }
      });
      i18n_1 = MSG_EXTERNAL_2206723750290169400$$LIBS_FORM_FIELDS_SRC_LIB_USER_LIST_FIELD_COMPONENT_TS_1;
    } else {
      i18n_1 = $localize(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([":\u241F8ddbc311625de88f24142f65336765837378c1ca\u241F2206723750290169400: Add external user with email \"", ":INTERPOLATION:\" "])), "\uFFFD0\uFFFD");
    }
    var i18n_2;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @desc Add new external attendee
       */
      var MSG_EXTERNAL_145038058737617323$$LIBS_FORM_FIELDS_SRC_LIB_USER_LIST_FIELD_COMPONENT_TS_2 = goog.getMsg("{$startTagDiv} Add\xA0{$startTagSpan}External{$closeTagSpan}{$closeTagDiv}", {
        "closeTagDiv": "\uFFFD/#3\uFFFD",
        "closeTagSpan": "\uFFFD/#4\uFFFD",
        "startTagDiv": "\uFFFD#3\uFFFD",
        "startTagSpan": "\uFFFD#4\uFFFD"
      }, {
        original_code: {
          "closeTagDiv": "</div>",
          "closeTagSpan": "</span>",
          "startTagDiv": "<div class=\"flex items-center justify-center\">",
          "startTagSpan": "<span class=\"hidden sm:inline\">"
        }
      });
      i18n_2 = MSG_EXTERNAL_145038058737617323$$LIBS_FORM_FIELDS_SRC_LIB_USER_LIST_FIELD_COMPONENT_TS_2;
    } else {
      i18n_2 = $localize(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([":Add new external attendee\u241Fafa9063944169ae2cd6bd8c0d5e943468ab77e90\u241F145038058737617323:", ":START_TAG_DIV: Add\xA0", ":START_TAG_SPAN:External", ":CLOSE_TAG_SPAN:", ":CLOSE_TAG_DIV:"])), "\uFFFD#3\uFFFD", "\uFFFD#4\uFFFD", "\uFFFD/#4\uFFFD", "\uFFFD/#3\uFFFD");
    }
    var i18n_3;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @desc Upload attendee list from CSV file
       */
      var MSG_EXTERNAL_4462048288204440387$$LIBS_FORM_FIELDS_SRC_LIB_USER_LIST_FIELD_COMPONENT_TS_3 = goog.getMsg("{$startTagDiv} Upload\xA0{$startTagSpan}CSV{$closeTagSpan}{$closeTagDiv}{$tagInput}", {
        "closeTagDiv": "\uFFFD/#7\uFFFD",
        "closeTagSpan": "\uFFFD/#8\uFFFD",
        "startTagDiv": "\uFFFD#7\uFFFD",
        "startTagSpan": "\uFFFD#8\uFFFD",
        "tagInput": "\uFFFD#9\uFFFD\uFFFD/#9\uFFFD"
      }, {
        original_code: {
          "closeTagDiv": "</div>",
          "closeTagSpan": "</span>",
          "startTagDiv": "<div class=\"flex items-center justify-center\">",
          "startTagSpan": "<span class=\"hidden sm:inline\">",
          "tagInput": "<input\n                        class=\"opacity-0 absolute inset-0\"\n                        type=\"file\"\n                        (change)=\"addUsersFromFile($event)\"\n                    />"
        }
      });
      i18n_3 = MSG_EXTERNAL_4462048288204440387$$LIBS_FORM_FIELDS_SRC_LIB_USER_LIST_FIELD_COMPONENT_TS_3;
    } else {
      i18n_3 = $localize(_templateObject4 || (_templateObject4 = _taggedTemplateLiteral([":Upload attendee list from CSV file\u241F0115abeee77902eeda78bb11be738c011e8be933\u241F4462048288204440387:", ":START_TAG_DIV: Upload\xA0", ":START_TAG_SPAN:CSV", ":CLOSE_TAG_SPAN:", ":CLOSE_TAG_DIV:", ":TAG_INPUT:"])), "\uFFFD#7\uFFFD", "\uFFFD#8\uFFFD", "\uFFFD/#8\uFFFD", "\uFFFD/#7\uFFFD", "\uFFFD#9\uFFFD\uFFFD/#9\uFFFD");
    }
    var i18n_4;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @desc Download template CSV file
       */
      var MSG_EXTERNAL_6030611805365927572$$LIBS_FORM_FIELDS_SRC_LIB_USER_LIST_FIELD_COMPONENT_TS_4 = goog.getMsg("{$startTagDiv}{$startTagSpan}CSV{$closeTagSpan}\xA0Template {$closeTagDiv}", {
        "closeTagDiv": "\uFFFD/#12\uFFFD",
        "closeTagSpan": "\uFFFD/#13\uFFFD",
        "startTagDiv": "\uFFFD#12\uFFFD",
        "startTagSpan": "\uFFFD#13\uFFFD"
      }, {
        original_code: {
          "closeTagDiv": "</div>",
          "closeTagSpan": "</span>",
          "startTagDiv": "<div class=\"flex items-center justify-center\">",
          "startTagSpan": "<span class=\"hidden sm:inline\">"
        }
      });
      i18n_4 = MSG_EXTERNAL_6030611805365927572$$LIBS_FORM_FIELDS_SRC_LIB_USER_LIST_FIELD_COMPONENT_TS_4;
    } else {
      i18n_4 = $localize(_templateObject5 || (_templateObject5 = _taggedTemplateLiteral([":Download template CSV file\u241Ff761a83c085b86f026cdf949cf8015ee62d8ca8c\u241F6030611805365927572:", ":START_TAG_DIV:", ":START_TAG_SPAN:CSV", ":CLOSE_TAG_SPAN:\xA0Template ", ":CLOSE_TAG_DIV:"])), "\uFFFD#12\uFFFD", "\uFFFD#13\uFFFD", "\uFFFD/#13\uFFFD", "\uFFFD/#12\uFFFD");
    }
    return [["origin", "matAutocompleteOrigin"], ["chipList", ""], ["search_field", ""], ["auto", "matAutocomplete"], i18n_1, i18n_2, i18n_3, i18n_4, ["form-field", "", 1, "mb-4"], ["search", ""], ["appearance", "outline", "matAutocompleteOrigin", "", 1, "w-full"], ["aria-label", "User Seleciom"], ["user", "", 3, "bg-warning", "removed", 4, "ngFor", "ngForOf"], ["placeholder", i18n_0, "name", "user_email", 3, "ngModelChange", "matChipInputTokenEnd", "ngModel", "matAutocomplete", "matChipInputFor", "matChipInputSeparatorKeyCodes"], ["diameter", "24", "matSuffix", "", 4, "ngIf"], [3, "click", 4, "ngIf"], ["class", "leading-tight", 3, "click", 4, "ngFor", "ngForOf"], ["class", "flex items-center space-x-2 -mt-4", "actions", "", 4, "ngIf"], ["user", "", 3, "removed"], [1, "flex", "items-center", "space-x-2"], [3, "matTooltip", 4, "ngIf"], ["matChipRemove", "", "remove", ""], [3, "matTooltip"], ["diameter", "24", "matSuffix", ""], [3, "click"], [1, "leading-tight", 3, "click"], [1, "text-xs"], ["actions", "", 1, "flex", "items-center", "space-x-2", "-mt-4"], ["btn", "", "matRipple", "", "type", "button", "name", "new-contact", 1, "inverse", "flex-1", "sm:flex-none", 3, "click"], [1, "flex", "items-center", "justify-center"], [1, "hidden", "sm:inline"], ["btn", "", "matRipple", "", "type", "button", "name", "upload-csv", 1, "relative", "inverse", "flex-1", "sm:flex-none"], ["type", "file", 1, "opacity-0", "absolute", "inset-0", 3, "change"], ["btn", "", "matRipple", "", "type", "button", "name", "download-template", 1, "inverse", "flex-1", "sm:flex-none", 3, "click"]];
  },
  template: function UserListFieldComponent_Template(rf, ctx) {
    if (rf & 1) {
      var _r1 = i0.ɵɵgetCurrentView();
      i0.ɵɵelementStart(0, "div", 8)(1, "div", 9)(2, "mat-form-field", 10, 0)(4, "mat-chip-grid", 11, 1);
      i0.ɵɵtemplate(6, UserListFieldComponent_mat_chip_row_6_Template, 8, 5, "mat-chip-row", 12);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(7, "input", 13, 2);
      i0.ɵɵpipe(9, "async");
      i0.ɵɵlistener("ngModelChange", function UserListFieldComponent_Template_input_ngModelChange_7_listener($event) {
        i0.ɵɵrestoreView(_r1);
        return i0.ɵɵresetView(ctx.updateSearch($event));
      })("matChipInputTokenEnd", function UserListFieldComponent_Template_input_matChipInputTokenEnd_7_listener($event) {
        i0.ɵɵrestoreView(_r1);
        return i0.ɵɵresetView(ctx.addUserFromEmail($event.value));
      });
      i0.ɵɵelementEnd();
      i0.ɵɵtemplate(10, UserListFieldComponent_mat_spinner_10_Template, 1, 0, "mat-spinner", 14);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(11, "mat-autocomplete", null, 3);
      i0.ɵɵtemplate(13, UserListFieldComponent_mat_option_13_Template, 2, 1, "mat-option", 15)(14, UserListFieldComponent_mat_option_14_Template, 5, 2, "mat-option", 16);
      i0.ɵɵpipe(15, "async");
      i0.ɵɵelementEnd()();
      i0.ɵɵtemplate(16, UserListFieldComponent_div_16_Template, 14, 0, "div", 17);
      i0.ɵɵelementEnd();
    }
    if (rf & 2) {
      var chipList_r9 = i0.ɵɵreference(5);
      var auto_r10 = i0.ɵɵreference(12);
      i0.ɵɵattribute("disabled", ctx.disabled);
      i0.ɵɵadvance(6);
      i0.ɵɵproperty("ngForOf", ctx.active_list);
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngModel", i0.ɵɵpipeBind1(9, 10, ctx.search$))("matAutocomplete", auto_r10)("matChipInputFor", chipList_r9)("matChipInputSeparatorKeyCodes", ctx.separatorKeysCodes);
      i0.ɵɵadvance(3);
      i0.ɵɵproperty("ngIf", ctx.loading);
      i0.ɵɵadvance(3);
      i0.ɵɵproperty("ngIf", ctx.search_valid_email);
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngForOf", i0.ɵɵpipeBind1(15, 12, ctx.user_list$));
      i0.ɵɵadvance(2);
      i0.ɵɵproperty("ngIf", !ctx.hide_actions);
    }
  },
  styles: ["[search][_ngcontent-%COMP%] {\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXItbGlzdC1maWVsZC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO1lBQ0EiLCJmaWxlIjoidXNlci1saXN0LWZpZWxkLmNvbXBvbmVudC50cyIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgW3NlYXJjaF0ge1xuICAgICAgICAgICAgfVxuICAgICAgICAiXX0= */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvZm9ybS1maWVsZHMvc3JjL2xpYi91c2VyLWxpc3QtZmllbGQuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtZQUNBOztBQUVaLGdVQUFnVSIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgW3NlYXJjaF0ge1xuICAgICAgICAgICAgfVxuICAgICAgICAiXSwic291cmNlUm9vdCI6IiJ9 */"]
});
exports.UserListFieldComponent = UserListFieldComponent;

/***/ }),

/***/ 18000:
/*!*****************************************************************!*\
  !*** ./libs/form-fields/src/lib/user-search-field.component.ts ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _taggedTemplateLiteral = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js */ 9959)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _callSuper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/callSuper.js */ 8513)["default"]);
var _inherits = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/inherits.js */ 58160)["default"]);
var _UserSearchFieldComponent, _templateObject;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.UserSearchFieldComponent = void 0;
/* eslint-disable @typescript-eslint/member-ordering */
var core_1 = __webpack_require__(/*! @angular/core */ 37580);
var forms_1 = __webpack_require__(/*! @angular/forms */ 34456);
var rxjs_1 = __webpack_require__(/*! rxjs */ 15681);
var operators_1 = __webpack_require__(/*! rxjs/operators */ 97303);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var guests_fn_1 = __webpack_require__(/*! libs/users/src/lib/guests.fn */ 86039);
var staff_fn_1 = __webpack_require__(/*! libs/users/src/lib/staff.fn */ 2372);
var user_class_1 = __webpack_require__(/*! libs/users/src/lib/user.class */ 93693);
var ts_client_1 = __webpack_require__(/*! @placeos/ts-client */ 35713);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @placeos/common */ 22797);
var _c0 = ["input"];
function UserSearchFieldComponent_mat_spinner_5_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelement(0, "mat-spinner", 11);
  }
}
function UserSearchFieldComponent_mat_option_8_Template(rf, ctx) {
  if (rf & 1) {
    var _r2 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "mat-option", 12);
    i0.ɵɵlistener("click", function UserSearchFieldComponent_mat_option_8_Template_mat_option_click_0_listener() {
      var option_r3 = i0.ɵɵrestoreView(_r2).$implicit;
      var ctx_r3 = i0.ɵɵnextContext();
      ctx_r3.setValue(option_r3);
      return i0.ɵɵresetView(ctx_r3.blurInput());
    });
    i0.ɵɵelementStart(1, "div", 13);
    i0.ɵɵtext(2);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(3, "div", 14);
    i0.ɵɵtext(4);
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var option_r3 = ctx.$implicit;
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate(option_r3.name);
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate1(" ", option_r3.email, " ");
  }
}
function UserSearchFieldComponent_mat_option_9_Template(rf, ctx) {
  if (rf & 1) {
    var _r5 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "mat-option", 15)(1, "div", 16);
    i0.ɵɵlistener("mousedown", function UserSearchFieldComponent_mat_option_9_Template_div_mousedown_1_listener($event) {
      i0.ɵɵrestoreView(_r5);
      $event.stopPropagation();
      return i0.ɵɵresetView($event.preventDefault());
    })("touchstart", function UserSearchFieldComponent_mat_option_9_Template_div_touchstart_1_listener($event) {
      i0.ɵɵrestoreView(_r5);
      $event.stopPropagation();
      return i0.ɵɵresetView($event.preventDefault());
    })("click", function UserSearchFieldComponent_mat_option_9_Template_div_click_1_listener($event) {
      i0.ɵɵrestoreView(_r5);
      var ctx_r3 = i0.ɵɵnextContext();
      ctx_r3.setValue(ctx_r3.search_str);
      $event.stopPropagation();
      return i0.ɵɵresetView($event.preventDefault());
    });
    i0.ɵɵelementStart(2, "div", 17);
    i0.ɵɵi18n(3, 2);
    i0.ɵɵelementEnd()()();
  }
  if (rf & 2) {
    var ctx_r3 = i0.ɵɵnextContext();
    i0.ɵɵadvance(3);
    i0.ɵɵi18nExp(ctx_r3.search_str);
    i0.ɵɵi18nApply(3);
  }
}
function UserSearchFieldComponent_mat_option_10_Template(rf, ctx) {
  if (rf & 1) {
    var _r6 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "mat-option", 18);
    i0.ɵɵlistener("click", function UserSearchFieldComponent_mat_option_10_Template_mat_option_click_0_listener() {
      i0.ɵɵrestoreView(_r6);
      var ctx_r3 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r3.empty_fn());
    });
    i0.ɵɵtext(1);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r3 = i0.ɵɵnextContext();
    i0.ɵɵproperty("disabled", !ctx_r3.empty_fn);
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate2(" ", ctx_r3.search_str ? "No users found." : "", " ", ctx_r3.error, " ");
  }
}
var UserSearchFieldComponent = /*#__PURE__*/function (_common_1$AsyncHandle) {
  function UserSearchFieldComponent(_settings) {
    var _this;
    _classCallCheck(this, UserSearchFieldComponent);
    _this = _callSuper(this, UserSearchFieldComponent);
    _this._settings = _settings;
    /** Message to display when no user matches have been found */
    _this.error = '';
    _this.query_fn = function (q) {
      var _ref;
      return _this._settings.get('app.basic_user_search') ? (0, ts_client_1.queryUsers)({
        q: q,
        authority_id: (_ref = (0, ts_client_1.authority)()) === null || _ref === void 0 ? void 0 : _ref.id
      }).pipe((0, operators_1.map)(function (_) {
        return _.data.map(function (_) {
          return new user_class_1.User(_);
        });
      })) : (0, staff_fn_1.searchStaff)(q);
    };
    /** Subject holding the value of the search */
    _this.search$ = new rxjs_1.Subject();
    /** List of users from an API search */
    _this.search_results$ = _this.search$.pipe((0, operators_1.debounceTime)(400), (0, operators_1.distinctUntilChanged)(), (0, operators_1.switchMap)(function (query) {
      _this.loading = true;
      return _this.options && _this.options.length > 0 ? (0, rxjs_1.of)(_this.options) : query.length >= 3 ? !_this.guests ? _this.query_fn(query) : (0, rxjs_1.forkJoin)([(0, staff_fn_1.searchStaff)(query), (0, guests_fn_1.searchGuests)(query)]) : (0, rxjs_1.of)([]);
    }), (0, operators_1.catchError)(function (_) {
      return (0, rxjs_1.of)([]);
    }), (0, operators_1.map)(function (list) {
      _this.loading = false;
      list = (0, common_1.flatten)(list);
      var search = (_this.search_str || '').toLowerCase();
      return list.filter(function (item) {
        return !_this.filter || _this.filter(item, search);
      });
    }));
    _this.cancelReset = function () {
      return _this.clearTimeout('reset');
    };
    _this.blurInput = function () {
      _this.timeout('blur', function () {
        var _this$_input_el;
        return (_this$_input_el = _this._input_el) === null || _this$_input_el === void 0 || (_this$_input_el = _this$_input_el.nativeElement) === null || _this$_input_el === void 0 ? void 0 : _this$_input_el.blur();
      });
    };
    return _this;
  }
  _inherits(UserSearchFieldComponent, _common_1$AsyncHandle);
  return _createClass(UserSearchFieldComponent, [{
    key: "ngOnInit",
    value: function ngOnInit() {
      var _this2 = this;
      // Process API results
      this.subscription('search_results', this.search_results$.subscribe(function (list) {
        return _this2.user_list = list;
      }));
      this.resetSearchString();
    }
    /**
     * Reset the search string back to the name of the active user
     */
  }, {
    key: "resetSearchString",
    value: function resetSearchString() {
      var _this3 = this;
      this.timeout('reset', function () {
        var _this3$active_user;
        return _this3.search_str = ((_this3$active_user = _this3.active_user) === null || _this3$active_user === void 0 ? void 0 : _this3$active_user.name) || '';
      }, 100);
    }
    /**
     * Update the form field value
     * @param new_value New value to set on the form field
     */
  }, {
    key: "setValue",
    value: function setValue(new_value, email) {
      if (!new_value) return;
      if (typeof new_value === 'string' && new_value === this.search_str) {
        new_value = new user_class_1.User({
          name: (this.search_str || email || '').split('@')[0],
          email: this.search_str || email || ''
        });
      }
      var user = new_value;
      if (!('name' in user) && !('email' in user)) return;
      this.active_user = user;
      if (this._onChange) this._onChange(user);
      this.resetSearchString();
    }
    /**
     * Update local value when form control value is changed
     * @param value The new value for the component
     */
  }, {
    key: "writeValue",
    value: function writeValue(value) {
      this.active_user = value;
      this.resetSearchString();
    }
  }, {
    key: "setDisabledState",
    value: function setDisabledState(disabled) {
      this.disabled = disabled;
    }
    /**
     * Registers a callback function that is called when the control's value changes in the UI.
     * @param fn The callback function to register
     */
  }, {
    key: "registerOnChange",
    value: function registerOnChange(fn) {
      this._onChange = fn;
    }
    /**
     * Registers a callback function is called by the forms API on initialization to update the form model on blur.
     * @param fn The callback function to register
     */
  }, {
    key: "registerOnTouched",
    value: function registerOnTouched(fn) {
      this._onTouch = fn;
    }
  }]);
}(common_1.AsyncHandler);
_UserSearchFieldComponent = UserSearchFieldComponent;
_UserSearchFieldComponent.ɵfac = function UserSearchFieldComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _UserSearchFieldComponent)(i0.ɵɵdirectiveInject(i1.SettingsService));
};
_UserSearchFieldComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _UserSearchFieldComponent,
  selectors: [["a-user-search-field"]],
  viewQuery: function UserSearchFieldComponent_Query(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵviewQuery(_c0, 5, core_1.ElementRef);
    }
    if (rf & 2) {
      var _t;
      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx._input_el = _t.first);
    }
  },
  inputs: {
    disabled: "disabled",
    placeholder: "placeholder",
    options: "options",
    guests: "guests",
    error: "error",
    validate: "validate",
    empty_fn: "empty_fn",
    filter: "filter",
    query_fn: "query_fn"
  },
  features: [i0.ɵɵProvidersFeature([{
    provide: forms_1.NG_VALUE_ACCESSOR,
    useExisting: (0, core_1.forwardRef)(function () {
      return _UserSearchFieldComponent;
    }),
    multi: true
  }]), i0.ɵɵInheritDefinitionFeature],
  decls: 11,
  vars: 8,
  consts: function consts() {
    var i18n_0;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_1390235508766899631$$LIBS_FORM_FIELDS_SRC_LIB_USER_SEARCH_FIELD_COMPONENT_TS_0 = goog.getMsg(" Add external attendee \"{$interpolation}\" ", {
        "interpolation": "\uFFFD0\uFFFD"
      }, {
        original_code: {
          "interpolation": "{{ search_str }}"
        }
      });
      i18n_0 = MSG_EXTERNAL_1390235508766899631$$LIBS_FORM_FIELDS_SRC_LIB_USER_SEARCH_FIELD_COMPONENT_TS_0;
    } else {
      i18n_0 = $localize(_templateObject || (_templateObject = _taggedTemplateLiteral([":\u241Fbda749fab8de2e52f25203a840d2aca70b8e5b4d\u241F1390235508766899631: Add external attendee \"", ":INTERPOLATION:\" "])), "\uFFFD0\uFFFD");
    }
    return [["input", ""], ["auto", "matAutocomplete"], i18n_0, ["appearance", "outline", 1, "w-full", "no-subscript"], ["matInput", "", "keyboard", "", "name", "user-search", 3, "ngModelChange", "keyup.enter", "blur", "focus", "ngModel", "disabled", "placeholder", "matAutocomplete"], ["matPrefix", "", 1, "text-2xl", "relative"], ["matSuffix", "", "diameter", "16", 4, "ngIf"], [3, "optionSelected"], [3, "click", 4, "ngFor", "ngForOf"], ["class", "relative pointer-events-none", 4, "ngIf"], [3, "disabled", "click", 4, "ngIf"], ["matSuffix", "", "diameter", "16"], [3, "click"], [1, "leading-tight"], [1, "text-xs", "opacity-60"], [1, "relative", "pointer-events-none"], [1, "absolute", "inset-0", "px-4", "pointer-events-auto", 3, "mousedown", "touchstart", "click"], [1, "pointer-events-none"], [3, "click", "disabled"]];
  },
  template: function UserSearchFieldComponent_Template(rf, ctx) {
    if (rf & 1) {
      var _r1 = i0.ɵɵgetCurrentView();
      i0.ɵɵelementStart(0, "mat-form-field", 3)(1, "input", 4, 0);
      i0.ɵɵtwoWayListener("ngModelChange", function UserSearchFieldComponent_Template_input_ngModelChange_1_listener($event) {
        i0.ɵɵrestoreView(_r1);
        i0.ɵɵtwoWayBindingSet(ctx.search_str, $event) || (ctx.search_str = $event);
        return i0.ɵɵresetView($event);
      });
      i0.ɵɵlistener("ngModelChange", function UserSearchFieldComponent_Template_input_ngModelChange_1_listener($event) {
        i0.ɵɵrestoreView(_r1);
        return i0.ɵɵresetView(ctx.search$.next($event || ""));
      })("keyup.enter", function UserSearchFieldComponent_Template_input_keyup_enter_1_listener() {
        i0.ɵɵrestoreView(_r1);
        return i0.ɵɵresetView(ctx.validate && ctx.validate(ctx.search_str) ? ctx.setValue(ctx.search_str) : "");
      })("blur", function UserSearchFieldComponent_Template_input_blur_1_listener() {
        i0.ɵɵrestoreView(_r1);
        return i0.ɵɵresetView(ctx.resetSearchString());
      })("focus", function UserSearchFieldComponent_Template_input_focus_1_listener() {
        i0.ɵɵrestoreView(_r1);
        return i0.ɵɵresetView(ctx.cancelReset());
      });
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(3, "app-icon", 5);
      i0.ɵɵtext(4, "search");
      i0.ɵɵelementEnd();
      i0.ɵɵtemplate(5, UserSearchFieldComponent_mat_spinner_5_Template, 1, 0, "mat-spinner", 6);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(6, "mat-autocomplete", 7, 1);
      i0.ɵɵlistener("optionSelected", function UserSearchFieldComponent_Template_mat_autocomplete_optionSelected_6_listener($event) {
        i0.ɵɵrestoreView(_r1);
        return i0.ɵɵresetView(ctx.setValue($event.option.value));
      });
      i0.ɵɵtemplate(8, UserSearchFieldComponent_mat_option_8_Template, 5, 2, "mat-option", 8)(9, UserSearchFieldComponent_mat_option_9_Template, 4, 1, "mat-option", 9)(10, UserSearchFieldComponent_mat_option_10_Template, 2, 3, "mat-option", 10);
      i0.ɵɵelementEnd();
    }
    if (rf & 2) {
      var auto_r7 = i0.ɵɵreference(7);
      i0.ɵɵadvance();
      i0.ɵɵtwoWayProperty("ngModel", ctx.search_str);
      i0.ɵɵproperty("disabled", ctx.disabled)("placeholder", ctx.placeholder || "Search for user...")("matAutocomplete", auto_r7);
      i0.ɵɵadvance(4);
      i0.ɵɵproperty("ngIf", ctx.loading);
      i0.ɵɵadvance(3);
      i0.ɵɵproperty("ngForOf", ctx.user_list);
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", ctx.search_str && ctx.validate && ctx.validate(ctx.search_str));
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", !(ctx.user_list == null ? null : ctx.user_list.length) && (ctx.search_str || ctx.error));
    }
  },
  styles: ["[_nghost-%COMP%] {\n                display: block;\n            }\n            app-icon[_ngcontent-%COMP%] {\n                top: 0.15em;\n                left: -0.15em;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXItc2VhcmNoLWZpZWxkLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1lBQ1k7Z0JBQ0ksY0FBYztZQUNsQjtZQUNBO2dCQUNJLFdBQVc7Z0JBQ1gsYUFBYTtZQUNqQiIsImZpbGUiOiJ1c2VyLXNlYXJjaC1maWVsZC5jb21wb25lbnQudHMiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIDpob3N0IHtcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGFwcC1pY29uIHtcbiAgICAgICAgICAgICAgICB0b3A6IDAuMTVlbTtcbiAgICAgICAgICAgICAgICBsZWZ0OiAtMC4xNWVtO1xuICAgICAgICAgICAgfVxuICAgICAgICAiXX0= */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvZm9ybS1maWVsZHMvc3JjL2xpYi91c2VyLXNlYXJjaC1maWVsZC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLGNBQWM7WUFDbEI7WUFDQTtnQkFDSSxXQUFXO2dCQUNYLGFBQWE7WUFDakI7O0FBRVosZ2pCQUFnakIiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIDpob3N0IHtcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGFwcC1pY29uIHtcbiAgICAgICAgICAgICAgICB0b3A6IDAuMTVlbTtcbiAgICAgICAgICAgICAgICBsZWZ0OiAtMC4xNWVtO1xuICAgICAgICAgICAgfVxuICAgICAgICAiXSwic291cmNlUm9vdCI6IiJ9 */"]
});
exports.UserSearchFieldComponent = UserSearchFieldComponent;

/***/ }),

/***/ 46773:
/*!*********************************!*\
  !*** ./libs/mocks/src/index.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.MOCKS = void 0;
exports.MOCKS = __webpack_require__(/*! ./mocks */ 11110);

/***/ }),

/***/ 26155:
/*!***********************************************!*\
  !*** ./libs/mocks/src/lib/api/assets.data.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.MOCK_PURCHASE_ORDERS = exports.MOCK_ASSETS = exports.MOCK_PRODUCTS = exports.MOCK_CATEGORIES = void 0;
var date_fns_1 = __webpack_require__(/*! date-fns */ 25773);
exports.MOCK_CATEGORIES = [{
  id: '1',
  name: 'Technology'
}, {
  id: '2',
  name: 'Furniture'
}, {
  id: '3',
  name: 'Stationary'
}, {
  id: '4',
  name: 'Other'
}];
exports.MOCK_PRODUCTS = [{
  id: '1',
  name: 'iPad',
  category_id: '1',
  brand: 'Apple',
  barcode: '123'
}, {
  id: '2',
  name: 'iPhone',
  category_id: '1',
  brand: 'Apple',
  barcode: '456',
  images: []
}, {
  id: '3',
  name: 'iWatch',
  category_id: '1',
  brand: 'Apple',
  barcode: '789'
}, {
  id: '4',
  name: 'Chair',
  category_id: '2',
  brand: 'Herman Miller',
  barcode: '101'
}, {
  id: '5',
  name: 'Lounge',
  category_id: '2',
  brand: 'Ikea',
  barcode: '102'
}, {
  id: '6',
  name: 'Table',
  category_id: '2',
  brand: 'Ikea',
  barcode: '103'
}, {
  id: '7',
  name: 'Couch',
  category_id: '2',
  brand: 'Ikea',
  barcode: '104'
}, {
  id: '8',
  name: 'Test Item',
  category_id: '4',
  brand: 'Test Brand',
  barcode: '105'
}, {
  id: '9',
  name: 'Notepad',
  category_id: '3',
  brand: 'J.Burrows',
  barcode: '106'
}, {
  id: '10',
  name: 'Whiteboard Markers',
  category_id: '3',
  brand: 'Artline',
  barcode: '107'
}, {
  id: '11',
  name: 'Whiteboard',
  category_id: '2',
  brand: 'Ikea',
  barcode: '108'
}];
exports.MOCK_ASSETS = Array(100).fill(null).map(function (_, i) {
  return {
    id: "asset-".concat(i),
    name: "Asset ".concat(i),
    type_id: exports.MOCK_PRODUCTS[i % exports.MOCK_PRODUCTS.length].id,
    description: "This is asset ".concat(i),
    model_number: "Model ".concat(i),
    serial_number: "Serial ".concat(i),
    identifier: "Identifier ".concat(i),
    other_data: {},
    purchase_order_id: "purchase-order-".concat(i)
  };
});
exports.MOCK_PURCHASE_ORDERS = Array(100).fill(null).map(function (_, i) {
  return {
    id: "purchase-order-".concat(i),
    order_number: "Order ".concat(i),
    invoice_number: "Invoice ".concat(i),
    purchase_date: (0, date_fns_1.getUnixTime)(Date.now()),
    expected_service_start_date: (0, date_fns_1.getUnixTime)(Date.now()),
    expected_service_end_date: (0, date_fns_1.getUnixTime)(Date.now() + 1000000000)
  };
});

/***/ }),

/***/ 76525:
/*!***********************************************!*\
  !*** ./libs/mocks/src/lib/api/assets.mock.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _objectSpread = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/objectSpread2.js */ 34092)["default"]);
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.ASSET_MOCKS = void 0;
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var ts_client_1 = __webpack_require__(/*! @placeos/ts-client */ 35713);
var assets_data_1 = __webpack_require__(/*! ./assets.data */ 26155);
var BASE_PATH = '/api/engine/v2';
exports.ASSET_MOCKS = registerMocks();
var update = function update(dataset) {
  return function (id, data) {
    var index = dataset.findIndex(function (e) {
      return e.id === id;
    });
    if (index < 0) throw {
      status: 404,
      message: "Unable to find booking with ID ".concat(id)
    };
    var new_event = _objectSpread({}, data);
    dataset.splice(index, 1, new_event);
    return new_event;
  };
};
function registerMocks() {
  (0, ts_client_1.registerMockEndpoint)({
    path: "".concat(BASE_PATH, "/asset_categories"),
    metadata: {},
    method: 'GET',
    callback: function callback(_) {
      var events = assets_data_1.MOCK_CATEGORIES;
      return events;
    }
  });
  (0, ts_client_1.registerMockEndpoint)({
    path: "".concat(BASE_PATH, "/asset_categories/:id"),
    metadata: {},
    method: 'GET',
    callback: function callback(_) {
      var event = assets_data_1.MOCK_CATEGORIES.find(function (e) {
        return e.id === _.route_params.id;
      });
      if (!event) throw {
        status: 404,
        message: "Unable to find booking with ID ".concat(_.route_params.id)
      };
      return event;
    }
  });
  (0, ts_client_1.registerMockEndpoint)({
    path: "".concat(BASE_PATH, "/asset_categories"),
    metadata: {},
    method: 'POST',
    callback: function callback(request) {
      var new_event = _objectSpread(_objectSpread({}, request.body), {}, {
        id: "-category-".concat((0, common_1.predictableRandomInt)(999))
      });
      assets_data_1.MOCK_CATEGORIES.push(new_event);
      return new_event;
    }
  });
  (0, ts_client_1.registerMockEndpoint)({
    path: "".concat(BASE_PATH, "/asset_categories/:id"),
    metadata: {},
    method: 'PUT',
    callback: function callback(req) {
      return update(assets_data_1.MOCK_CATEGORIES)(req.route_params.id, _objectSpread({}, req.body));
    }
  });
  (0, ts_client_1.registerMockEndpoint)({
    path: "".concat(BASE_PATH, "/asset_categories/:id"),
    metadata: {},
    method: 'DELETE',
    callback: function callback(req) {
      var index = assets_data_1.MOCK_CATEGORIES.findIndex(function (e) {
        return e.id === req.route_params.id;
      });
      if (index < 0) throw {
        status: 404,
        message: "Unable to find booking with ID ".concat(req.route_params.id)
      };
      assets_data_1.MOCK_CATEGORIES.splice(index, 1);
      return;
    }
  });
  (0, ts_client_1.registerMockEndpoint)({
    path: "".concat(BASE_PATH, "/asset_types"),
    metadata: {},
    method: 'GET',
    callback: function callback(_) {
      var events = assets_data_1.MOCK_PRODUCTS;
      return events;
    }
  });
  (0, ts_client_1.registerMockEndpoint)({
    path: "".concat(BASE_PATH, "/asset_types/:id"),
    metadata: {},
    method: 'GET',
    callback: function callback(_) {
      var event = assets_data_1.MOCK_PRODUCTS.find(function (e) {
        return e.id === _.route_params.id;
      });
      if (!event) throw {
        status: 404,
        message: "Unable to find booking with ID ".concat(_.route_params.id)
      };
      return event;
    }
  });
  (0, ts_client_1.registerMockEndpoint)({
    path: "".concat(BASE_PATH, "/asset_types"),
    metadata: {},
    method: 'POST',
    callback: function callback(request) {
      var new_event = _objectSpread(_objectSpread({}, request.body), {}, {
        id: "-product-".concat((0, common_1.predictableRandomInt)(999))
      });
      assets_data_1.MOCK_PRODUCTS.push(new_event);
      return new_event;
    }
  });
  (0, ts_client_1.registerMockEndpoint)({
    path: "".concat(BASE_PATH, "/asset_types/:id"),
    metadata: {},
    method: 'PUT',
    callback: function callback(req) {
      return update(assets_data_1.MOCK_PRODUCTS)(req.route_params.id, _objectSpread({}, req.body));
    }
  });
  (0, ts_client_1.registerMockEndpoint)({
    path: "".concat(BASE_PATH, "/asset_types/:id"),
    metadata: {},
    method: 'DELETE',
    callback: function callback(req) {
      var index = assets_data_1.MOCK_PRODUCTS.findIndex(function (e) {
        return e.id === req.route_params.id;
      });
      if (index < 0) throw {
        status: 404,
        message: "Unable to find booking with ID ".concat(req.route_params.id)
      };
      assets_data_1.MOCK_PRODUCTS.splice(index, 1);
      return;
    }
  });
  (0, ts_client_1.registerMockEndpoint)({
    path: "".concat(BASE_PATH, "/asset_purchase_orders"),
    metadata: {},
    method: 'GET',
    callback: function callback(_) {
      var events = assets_data_1.MOCK_PURCHASE_ORDERS;
      return events;
    }
  });
  (0, ts_client_1.registerMockEndpoint)({
    path: "".concat(BASE_PATH, "/asset_purchase_orders/:id"),
    metadata: {},
    method: 'GET',
    callback: function callback(_) {
      var event = assets_data_1.MOCK_PURCHASE_ORDERS.find(function (e) {
        return e.id === _.route_params.id;
      });
      if (!event) throw {
        status: 404,
        message: "Unable to find booking with ID ".concat(_.route_params.id)
      };
      return event;
    }
  });
  (0, ts_client_1.registerMockEndpoint)({
    path: "".concat(BASE_PATH, "/asset_purchase_orders"),
    metadata: {},
    method: 'POST',
    callback: function callback(request) {
      var new_event = _objectSpread(_objectSpread({}, request.body), {}, {
        id: "-purchase-order-".concat((0, common_1.predictableRandomInt)(999))
      });
      assets_data_1.MOCK_PURCHASE_ORDERS.push(new_event);
      return new_event;
    }
  });
  (0, ts_client_1.registerMockEndpoint)({
    path: "".concat(BASE_PATH, "/asset_purchase_orders/:id"),
    metadata: {},
    method: 'PUT',
    callback: function callback(req) {
      return update(assets_data_1.MOCK_PURCHASE_ORDERS)(req.route_params.id, _objectSpread({}, req.body));
    }
  });
  (0, ts_client_1.registerMockEndpoint)({
    path: "".concat(BASE_PATH, "/asset_purchase_orders/:id"),
    metadata: {},
    method: 'DELETE',
    callback: function callback(req) {
      var index = assets_data_1.MOCK_PURCHASE_ORDERS.findIndex(function (e) {
        return e.id === req.route_params.id;
      });
      if (index < 0) throw {
        status: 404,
        message: "Unable to find purchase order with ID ".concat(req.route_params.id)
      };
      assets_data_1.MOCK_PURCHASE_ORDERS.splice(index, 1);
      return;
    }
  });
  (0, ts_client_1.registerMockEndpoint)({
    path: "".concat(BASE_PATH, "/assets"),
    metadata: {},
    method: 'GET',
    callback: function callback(_) {
      var events = assets_data_1.MOCK_ASSETS;
      return events;
    }
  });
  (0, ts_client_1.registerMockEndpoint)({
    path: "".concat(BASE_PATH, "/assets/:id"),
    metadata: {},
    method: 'GET',
    callback: function callback(_) {
      var event = assets_data_1.MOCK_ASSETS.find(function (e) {
        return e.id === _.route_params.id;
      });
      if (!event) throw {
        status: 404,
        message: "Unable to find booking with ID ".concat(_.route_params.id)
      };
      return event;
    }
  });
  (0, ts_client_1.registerMockEndpoint)({
    path: "".concat(BASE_PATH, "/assets"),
    metadata: {},
    method: 'POST',
    callback: function callback(request) {
      var new_event = _objectSpread(_objectSpread({}, request.body), {}, {
        id: "-asset-".concat((0, common_1.predictableRandomInt)(999))
      });
      assets_data_1.MOCK_ASSETS.push(new_event);
      return new_event;
    }
  });
  (0, ts_client_1.registerMockEndpoint)({
    path: "".concat(BASE_PATH, "/assets/:id"),
    metadata: {},
    method: 'PUT',
    callback: function callback(req) {
      return update(assets_data_1.MOCK_ASSETS)(req.route_params.id, _objectSpread({}, req.body));
    }
  });
  (0, ts_client_1.registerMockEndpoint)({
    path: "".concat(BASE_PATH, "/assets/:id"),
    metadata: {},
    method: 'DELETE',
    callback: function callback(req) {
      var index = assets_data_1.MOCK_ASSETS.findIndex(function (e) {
        return e.id === req.route_params.id;
      });
      if (index < 0) throw {
        status: 404,
        message: "Unable to find booking with ID ".concat(req.route_params.id)
      };
      assets_data_1.MOCK_ASSETS.splice(index, 1);
      return;
    }
  });
}

/***/ }),

/***/ 32252:
/*!*************************************************!*\
  !*** ./libs/mocks/src/lib/api/bookings.data.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _objectSpread = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/objectSpread2.js */ 34092)["default"]);
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.MOCK_BOOKINGS = void 0;
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var date_fns_1 = __webpack_require__(/*! date-fns */ 25773);
var assets_data_1 = __webpack_require__(/*! ./assets.data */ 26155);
var spaces_data_1 = __webpack_require__(/*! ./spaces.data */ 27309);
var users_data_1 = __webpack_require__(/*! ./users.data */ 90726);
var zone_data_1 = __webpack_require__(/*! ./zone.data */ 19658);
var EVENT_TIME = (0, date_fns_1.set)((0, date_fns_1.subDays)(Date.now(), 3), {
  hours: 7,
  minutes: 0,
  seconds: 0,
  milliseconds: 0
});
var nextEventTime = function nextEventTime() {
  var save = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;
  var next = (0, date_fns_1.addMinutes)(EVENT_TIME, ((0, common_1.predictableRandomInt)(8) + 1) * 15);
  if (save) EVENT_TIME = (0, date_fns_1.addMinutes)(next, 60);
  return (0, date_fns_1.getUnixTime)(next);
};
var TYPES = ['desk', 'parking', 'asset-request', 'visitor', 'locker', 'group-event'];
var TRACKING = ['in_storage', 'in_transit', 'at_location'];
exports.MOCK_BOOKINGS = new Array(300).fill(0).map(function (_, index) {
  var _lvl_spaces;
  var throw_away = (0, common_1.predictableRandomInt)(999999) % 3 === 0;
  var user = users_data_1.MOCK_STAFF[(0, common_1.predictableRandomInt)(users_data_1.MOCK_STAFF.length)] || {};
  var type = TYPES[(0, common_1.predictableRandomInt)(TYPES.length)];
  var bld = zone_data_1.MOCK_BUILDINGS[(0, common_1.predictableRandomInt)(zone_data_1.MOCK_BUILDINGS.length)];
  var lvls = zone_data_1.MOCK_LEVELS.filter(function (_) {
    return _.parent_id === (bld === null || bld === void 0 ? void 0 : bld.id);
  });
  var lvl = lvls[(0, common_1.predictableRandomInt)(lvls.length)];
  var lvl_spaces = spaces_data_1.MOCK_SPACES.filter(function (_) {
    return _.zones.includes(lvl === null || lvl === void 0 ? void 0 : lvl.id);
  }) || [];
  var approved = (0, common_1.predictableRandomInt)(999999) % 4;
  var approver = users_data_1.MOCK_STAFF[(0, common_1.predictableRandomInt)(users_data_1.MOCK_STAFF.length)];
  var guest = users_data_1.MOCK_GUESTS[(0, common_1.predictableRandomInt)(users_data_1.MOCK_GUESTS.length)];
  var asset_count = (0, common_1.predictableRandomInt)(3, 1);
  var position = (0, common_1.padString)(index % 18 + 1 + Math.floor(index / 18) * 100, 3);
  return {
    id: "booking-".concat(index),
    booking_start: nextEventTime(true),
    booking_end: nextEventTime(),
    user_id: user.id,
    user_name: user.name,
    user_email: user.email,
    booked_by_name: user.name,
    booked_by_email: user.email,
    asset_id: type === 'visitor' ? guest.email : type === 'parking' ? "park-".concat(position) : "desk-".concat(lvl === null || lvl === void 0 ? void 0 : lvl.id, "-").concat(index),
    asset_name: type === 'visitor' ? guest.name : type === 'parking' ? position : "".concat(lvl === null || lvl === void 0 ? void 0 : lvl.id, "-").concat(index),
    description: type === 'visitor' ? guest.name : type === 'parking' ? position : "Desk ".concat(index),
    title: "".concat((0, common_1.capitalizeFirstLetter)(type), " Booking ").concat(index),
    type: type,
    booking_type: type,
    attendees: [],
    checked_in: (0, common_1.predictableRandomInt)(999999) % 3 === 0,
    access: (0, common_1.predictableRandomInt)(999999) % 3 === 0,
    approved: approved === 0,
    rejected: approved === 1,
    permission: type === 'group-event' ? 'OPEN' : 'PRIVATE',
    approver_id: approved === 0 ? approver.id : '',
    approver_name: approved === 0 ? approver.name : '',
    approver_email: approved === 0 ? approver.email : '',
    zones: [bld === null || bld === void 0 ? void 0 : bld.id, type === 'parking' ? 'level-p1' : lvl === null || lvl === void 0 ? void 0 : lvl.id],
    extension_data: {
      map_id: "table-10.00".concat(index),
      plate_number: (0, common_1.randomString)(8, 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789'),
      assets: new Array(asset_count).fill(0).map(function (_) {
        return _objectSpread(_objectSpread({}, assets_data_1.MOCK_ASSETS[(0, common_1.predictableRandomInt)(asset_count)]), {}, {
          amount: (0, common_1.predictableRandomInt)(5, 1)
        });
      }),
      tracking: approved === 0 ? TRACKING[(0, common_1.predictableRandomInt)(TRACKING.length)] : 'in_storage',
      space_id: (_lvl_spaces = lvl_spaces[(0, common_1.predictableRandomInt)(lvl_spaces.length)]) === null || _lvl_spaces === void 0 ? void 0 : _lvl_spaces.id
    }
  };
});

/***/ }),

/***/ 86242:
/*!*************************************************!*\
  !*** ./libs/mocks/src/lib/api/bookings.mock.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _objectSpread = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/objectSpread2.js */ 34092)["default"]);
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.BOOKING_MOCKS = void 0;
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var ts_client_1 = __webpack_require__(/*! @placeos/ts-client */ 35713);
var bookings_data_1 = __webpack_require__(/*! ./bookings.data */ 32252);
exports.BOOKING_MOCKS = registerMocks();
function registerMocks() {
  (0, ts_client_1.registerMockEndpoint)({
    path: '/api/staff/v1/bookings',
    metadata: {},
    method: 'GET',
    callback: function callback(_) {
      var events = bookings_data_1.MOCK_BOOKINGS.filter(function (event) {
        return (0, common_1.timePeriodsIntersect)(+_.query_params.period_start, +_.query_params.period_end, event.booking_start, event.booking_end) && (event.type === _.query_params.type || event.booking_type === _.query_params.type);
      });
      return events;
    }
  });
  (0, ts_client_1.registerMockEndpoint)({
    path: '/api/staff/v1/bookings/:id',
    metadata: {},
    method: 'GET',
    callback: function callback(_) {
      var event = bookings_data_1.MOCK_BOOKINGS.find(function (e) {
        return e.id === _.route_params.id;
      });
      if (!event) throw {
        status: 404,
        message: "Unable to find booking with ID ".concat(_.route_params.id)
      };
      return event;
    }
  });
  (0, ts_client_1.registerMockEndpoint)({
    path: '/api/staff/v1/bookings/:id/attendee',
    metadata: {},
    method: 'POST',
    callback: function callback(_) {
      var event = bookings_data_1.MOCK_BOOKINGS.find(function (e) {
        return e.id === _.route_params.id;
      });
      if (!event) {
        throw {
          status: 404,
          message: "Unable to find booking with ID ".concat(_.route_params.id)
        };
      }
      var user = {
        id: _.body.id,
        name: _.body.name,
        email: _.body.email,
        checked_in: false
      };
      event.attendees.push(user);
      return user;
    }
  });
  (0, ts_client_1.registerMockEndpoint)({
    path: '/api/staff/v1/bookings/:id/guests/:email/check_in',
    metadata: {},
    method: 'POST',
    callback: function callback(_) {
      var _$route_params = _.route_params,
        id = _$route_params.id,
        email = _$route_params.email;
      var event = bookings_data_1.MOCK_BOOKINGS.find(function (e) {
        return e.id === id;
      });
      if (!event) {
        throw {
          status: 404,
          message: "Unable to find booking with ID ".concat(id)
        };
      }
      var guest = event.attendees.find(function (_) {
        return _.email === decodeURIComponent(email);
      });
      if (!guest) {
        throw {
          status: 404,
          message: "Unable to find guest with email ".concat(email)
        };
      }
      guest.checked_in = _.query_params.state === 'true';
      return guest;
    }
  });
  (0, ts_client_1.registerMockEndpoint)({
    path: '/api/staff/v1/bookings/:id/attendee/:email',
    metadata: {},
    method: 'DELETE',
    callback: function callback(_) {
      var _$route_params2 = _.route_params,
        id = _$route_params2.id,
        email = _$route_params2.email;
      var event = bookings_data_1.MOCK_BOOKINGS.find(function (e) {
        return e.id === id;
      });
      if (!event) {
        throw {
          status: 404,
          message: "Unable to find booking with ID ".concat(id)
        };
      }
      event.attendees = event.attendees.filter(function (_) {
        return _.email !== decodeURIComponent(email);
      });
      return event;
    }
  });
  (0, ts_client_1.registerMockEndpoint)({
    path: '/api/staff/v1/bookings',
    metadata: {},
    method: 'POST',
    callback: function callback(request) {
      var new_event = _objectSpread(_objectSpread({}, request.body), {}, {
        id: "-booking-".concat((0, common_1.predictableRandomInt)(999))
      });
      bookings_data_1.MOCK_BOOKINGS.push(new_event);
      return new_event;
    }
  });
  var updateBooking = function updateBooking(id, data) {
    var index = bookings_data_1.MOCK_BOOKINGS.findIndex(function (e) {
      return e.id === id;
    });
    if (index < 0) throw {
      status: 404,
      message: "Unable to find booking with ID ".concat(id)
    };
    var new_event = _objectSpread({}, data);
    bookings_data_1.MOCK_BOOKINGS.splice(index, 1, new_event);
    return new_event;
  };
  (0, ts_client_1.registerMockEndpoint)({
    path: '/api/staff/v1/bookings/:id',
    metadata: {},
    method: 'PUT',
    callback: function callback(req) {
      return updateBooking(req.route_params.id, _objectSpread({}, req.body));
    }
  });
  (0, ts_client_1.registerMockEndpoint)({
    path: '/api/staff/v1/bookings/:id',
    metadata: {},
    method: 'PATCH',
    callback: function callback(req) {
      return updateBooking(req.route_params.id, _objectSpread({}, req.body));
    }
  });
  (0, ts_client_1.registerMockEndpoint)({
    path: '/api/staff/v1/bookings/:id/approve',
    metadata: {},
    method: 'POST',
    callback: function callback(req) {
      return updateBooking(req.route_params.id, _objectSpread(_objectSpread({}, req.body), {}, {
        approved: true,
        rejected: false
      }));
    }
  });
  (0, ts_client_1.registerMockEndpoint)({
    path: '/api/staff/v1/bookings/:id/reject',
    metadata: {},
    method: 'POST',
    callback: function callback(req) {
      return updateBooking(req.route_params.id, _objectSpread(_objectSpread({}, req.body), {}, {
        approved: false,
        rejected: true
      }));
    }
  });
  (0, ts_client_1.registerMockEndpoint)({
    path: '/api/staff/v1/bookings/:id/check_in',
    metadata: {},
    method: 'POST',
    callback: function callback(req) {
      return updateBooking(req.route_params.id, _objectSpread(_objectSpread({}, req.body), {}, {
        checked_in: req.query_params.state === 'true'
      }));
    }
  });
  (0, ts_client_1.registerMockEndpoint)({
    path: '/api/staff/v1/bookings/:id',
    metadata: {},
    method: 'DELETE',
    callback: function callback(req) {
      var index = bookings_data_1.MOCK_BOOKINGS.findIndex(function (e) {
        return e.id === req.route_params.id;
      });
      if (index < 0) throw {
        status: 404,
        message: "Unable to find booking with ID ".concat(req.route_params.id)
      };
      bookings_data_1.MOCK_BOOKINGS.splice(index, 1);
      return;
    }
  });
}

/***/ }),

/***/ 30105:
/*!**************************************************!*\
  !*** ./libs/mocks/src/lib/api/calendars.mock.ts ***!
  \**************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _createForOfIteratorHelper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createForOfIteratorHelper.js */ 36350)["default"]);
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.CALENDAR_MOCKS = void 0;
var ts_client_1 = __webpack_require__(/*! @placeos/ts-client */ 35713);
var events_data_1 = __webpack_require__(/*! ./events.data */ 64055);
var spaces_data_1 = __webpack_require__(/*! ./spaces.data */ 27309);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var users_data_1 = __webpack_require__(/*! ./users.data */ 90726);
exports.CALENDAR_MOCKS = registerMocks();
function registerMocks() {
  (0, ts_client_1.registerMockEndpoint)({
    path: '/api/staff/v1/calendars',
    metadata: {},
    method: 'GET',
    callback: function callback(request) {
      var user = users_data_1.MOCK_STAFF[(0, common_1.predictableRandomInt)(users_data_1.MOCK_STAFF.length)];
      var user2 = users_data_1.MOCK_STAFF[(0, common_1.predictableRandomInt)(users_data_1.MOCK_STAFF.length)];
      var user3 = users_data_1.MOCK_STAFF[(0, common_1.predictableRandomInt)(users_data_1.MOCK_STAFF.length)];
      return [{
        id: users_data_1.ACTIVE_USER.email,
        summary: users_data_1.ACTIVE_USER.name,
        primary: true,
        can_edit: true,
        hidden: false
      }, {
        id: user.email,
        summary: user.name,
        primary: false,
        can_edit: true,
        hidden: false
      }, {
        id: user2.email,
        summary: user2.name,
        primary: false,
        can_edit: false,
        hidden: false
      }, {
        id: user3.email,
        summary: user3.name,
        primary: false,
        can_edit: false,
        hidden: true
      }];
    }
  });
  var handleSpaceAvailability = function handleSpaceAvailability(request) {
    var start = +request.query_params.period_start;
    var end = +request.query_params.period_end;
    var zones = (request.query_params.zone_ids || '').split(',').filter(function (i) {
      return !!i;
    });
    var systems = (request.query_params.system_ids || '').split(',').filter(function (i) {
      return !!i;
    });
    var spaces = spaces_data_1.MOCK_SPACES.filter(function (space) {
      return zones.length ? zones.reduce(function (has, zone) {
        return has && space.zones.includes(zone);
      }, true) : systems.length ? systems.includes(space.id) : true;
    }).filter(function (space) {
      var bookings = events_data_1.MOCK_EVENTS.filter(function (event) {
        return event.attendees.find(function (user) {
          return user.id === space.id;
        });
      });
      var _iterator = _createForOfIteratorHelper(bookings),
        _step;
      try {
        for (_iterator.s(); !(_step = _iterator.n()).done;) {
          var event = _step.value;
          if ((0, common_1.timePeriodsIntersect)(start, end, event.event_start, event.event_end)) return false;
        }
      } catch (err) {
        _iterator.e(err);
      } finally {
        _iterator.f();
      }
      return true;
    });
    return spaces;
  };
  (0, ts_client_1.registerMockEndpoint)({
    path: '/api/staff/v1/calendars/availability',
    metadata: {},
    method: 'GET',
    callback: function callback(request) {
      return handleSpaceAvailability(request).map(function (_) {
        return {
          resource: _
        };
      });
    }
  });
  (0, ts_client_1.registerMockEndpoint)({
    path: '/api/staff/v1/calendars/free_busy',
    metadata: {},
    method: 'GET',
    callback: function callback(request) {
      return handleSpaceAvailability(request).map(function (_) {
        return {
          resource: _
        };
      });
    }
  });
}

/***/ }),

/***/ 8287:
/*!*************************************************!*\
  !*** ./libs/mocks/src/lib/api/catering.data.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _objectSpread = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/objectSpread2.js */ 34092)["default"]);
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.MOCK_MENU = void 0;
exports.generateCateringOrder = generateCateringOrder;
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var date_fns_1 = __webpack_require__(/*! date-fns */ 25773);
exports.MOCK_MENU = [{
  id: 'item-1',
  name: 'Coffee',
  unit_price: 200,
  category: 'Drinks',
  tags: ['drink', 'Contains Nuts', 'Contains Dairy'],
  options: [{
    id: 'opt-1',
    name: 'Cappacino',
    group: 'type'
  }, {
    id: 'opt-2',
    name: 'Latte',
    group: 'type'
  }, {
    id: 'opt-3',
    name: '1 Sugar',
    group: 'sugars',
    unit_price: 20
  }, {
    id: 'opt-4',
    name: '2 Sugar',
    group: 'sugars',
    unit_price: 20
  }, {
    id: 'opt-5',
    name: '3 Sugar',
    group: 'sugars',
    unit_price: 20
  }, {
    id: 'opt-6',
    name: '4 Sugar',
    group: 'sugars',
    unit_price: 20
  }]
}, {
  id: 'item-2',
  name: 'Soda',
  unit_price: 160,
  category: 'Drinks',
  tags: ['drink'],
  options: [{
    id: 'opt-1',
    name: 'Pepsi',
    group: 'type'
  }, {
    id: 'opt-2',
    name: 'Sunkist',
    group: 'type'
  }, {
    id: 'opt-3',
    name: 'Solo',
    group: 'type'
  }, {
    id: 'opt-4',
    name: 'Dr Pepper',
    group: 'type'
  }]
}, {
  id: 'item-3',
  name: 'Water',
  unit_price: 100,
  category: 'Drinks'
}, {
  id: 'item-4',
  name: 'Muffin',
  unit_price: 160,
  category: 'Snacks',
  options: [{
    id: 'opt-1',
    name: 'Choc Chip',
    group: 'type'
  }, {
    id: 'opt-2',
    name: 'Banana',
    group: 'type'
  }, {
    id: 'opt-3',
    name: 'Blueberry',
    group: 'type'
  }]
}, {
  id: 'item-5',
  name: 'Cookies',
  unit_price: 400,
  category: 'Snacks',
  options: [{
    id: 'opt-1',
    name: 'Choc Chip',
    group: 'type'
  }, {
    id: 'opt-2',
    name: 'Macadamia',
    group: 'type'
  }, {
    id: 'opt-3',
    name: 'Dark Choc',
    group: 'type'
  }]
}, {
  id: 'item-6',
  name: 'Fish & Chips',
  unit_price: 250,
  category: 'Simple Meals',
  options: [{
    id: 'opt-1',
    name: 'Tomato Sauce',
    group: 'sauce',
    unit_price: 30
  }, {
    id: 'opt-2',
    name: 'BBQ Sauce',
    group: 'sauce',
    unit_price: 35
  }, {
    id: 'opt-3',
    name: 'Tartare Sause',
    group: 'sauce',
    unit_price: 40
  }, {
    id: 'opt-4',
    name: 'Garlic Aoili Sauce',
    group: 'sauce',
    unit_price: 50
  }]
}, {
  id: 'item-7',
  name: 'Sandwich',
  unit_price: 300,
  category: 'Simple Meals',
  options: [{
    id: 'opt-1',
    name: 'Ham & Cheese',
    group: 'type'
  }, {
    id: 'opt-2',
    name: 'Chicken',
    group: 'type'
  }, {
    id: 'opt-3',
    name: 'Fairy Bread',
    group: 'type'
  }]
}];
function generateCateringOrder(event) {
  var duration = (0, date_fns_1.differenceInMinutes)(event.event_start, event.event_end);
  var mx = (0, common_1.predictableRandomInt)(exports.MOCK_MENU.length);
  return {
    id: "order-".concat((0, common_1.predictableRandomInt)(999999)),
    event_id: event.id,
    invoice_number: "I".concat((0, common_1.predictableRandomInt)(999999)),
    charge_code: "C".concat((0, common_1.predictableRandomInt)(9999)),
    deliver_at: (0, date_fns_1.addMinutes)(event.event_start * 1000, (0, common_1.predictableRandomInt)(Math.floor(duration / 5)) * 5),
    notes: (0, common_1.predictableRandomInt)(99999999) % 2 === 0 ? 'Test notes' : '',
    items: new Array(3).fill(0).map(function (_, idx) {
      return _objectSpread(_objectSpread({}, exports.MOCK_MENU[mx * idx % exports.MOCK_MENU.length]), {}, {
        options: [],
        quantity: (0, common_1.predictableRandomInt)(10, 1)
      });
    })
  };
}

/***/ }),

/***/ 53737:
/*!***********************************************!*\
  !*** ./libs/mocks/src/lib/api/common.mock.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, exports) => {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.API = exports.DOMAIN = void 0;
/** Domain of the organisation */
exports.DOMAIN = 'place.tech';
/** Endpoint where the staff API is located */
exports.API = '/api/staff/v1';

/***/ }),

/***/ 64055:
/*!***********************************************!*\
  !*** ./libs/mocks/src/lib/api/events.data.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _objectSpread = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/objectSpread2.js */ 34092)["default"]);
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.MOCK_EVENTS = void 0;
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var catering_data_1 = __webpack_require__(/*! ./catering.data */ 8287);
var spaces_data_1 = __webpack_require__(/*! ./spaces.data */ 27309);
var users_data_1 = __webpack_require__(/*! ./users.data */ 90726);
var date_fns_1 = __webpack_require__(/*! date-fns */ 25773);
var EVENT_TIME = (0, date_fns_1.setHours)((0, date_fns_1.startOfDay)(Date.now()), 7);
var nextEventTime = function nextEventTime() {
  var save = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;
  var next = (0, date_fns_1.addMinutes)(EVENT_TIME, ((0, common_1.predictableRandomInt)(8) + 1) * 15);
  if (save) {
    EVENT_TIME = next;
  }
  return (0, date_fns_1.getUnixTime)(next);
};
var event_status = ['tentative', 'confirmed', 'cancelled'];
var randomStatus = function randomStatus() {
  var rnd = (0, common_1.predictableRandomInt)(10);
  return rnd < 2 ? event_status[2] : rnd < 5 ? event_status[0] : event_status[1];
};
exports.MOCK_EVENTS = new Array(200).fill(0).map(function (_, index) {
  var PEOPLE = users_data_1.MOCK_STAFF.concat(users_data_1.MOCK_GUESTS);
  var attendees = new Array((0, common_1.predictableRandomInt)(8, 1)).fill(0).map(function () {
    return PEOPLE[(0, common_1.predictableRandomInt)(PEOPLE.length)];
  });
  attendees.sort(function (a, b) {
    return (a.visit_expected ? 0 : -1) - (b.visit_expected ? 0 : -1);
  });
  var space = spaces_data_1.MOCK_SPACES[(0, common_1.predictableRandomInt)(spaces_data_1.MOCK_SPACES.length)];
  attendees = attendees.concat(_objectSpread(_objectSpread({}, space), {}, {
    resource: true
  }));
  if ((0, common_1.predictableRandomInt)(9999) % 2 === 0) attendees.unshift(users_data_1.ACTIVE_USER);else attendees.unshift(users_data_1.MOCK_STAFF[(0, common_1.predictableRandomInt)(users_data_1.MOCK_STAFF.length)]);
  attendees = (0, common_1.unique)(attendees, 'email') || [{}];
  var event_start = nextEventTime(true);
  var event_end = nextEventTime();
  var meeting_url = (0, common_1.predictableRandomInt)(9999) % 3 === 0 ? 'https://meet.place.tech' : '';
  return {
    id: "cal-event-".concat(index),
    status: randomStatus(),
    host: attendees[0].email,
    calendar: 'calendar_id',
    creator: 'optional@fake.com',
    attendees: ((0, common_1.unique)(attendees, 'email') || []).map(function (_, idx) {
      return _objectSpread(_objectSpread({}, _), {}, {
        organizer: idx === 0,
        checked_in: (0, common_1.predictableRandomInt)(99999) % 2 === 0,
        response_status: (0, common_1.predictableRandomInt)(99999) % 2 === 0 ? 'accepted' : (0, common_1.predictableRandomInt)(99999) % 6 === 0 ? 'declined' : 'tentative'
      });
    }),
    title: "Some Meeting ".concat(index),
    body: "A Description",
    "private": false,
    event_start: event_start,
    event_end: event_end,
    timezone: 'Australia/Sydney',
    all_day: false,
    location: "".concat(space === null || space === void 0 ? void 0 : space.name),
    recurring: false,
    recurrence: {},
    attachments: {},
    system: space,
    meeting_url: meeting_url,
    meeting_id: meeting_url ? "m".concat((0, common_1.predictableRandomInt)(9999)) : '',
    meeting_provider: meeting_url ? 'PlaceOS' : '',
    extension_data: {
      catering: (0, common_1.predictableRandomInt)(99999) % 4 === 0 ? [(0, catering_data_1.generateCateringOrder)({
        id: "cal-event-".concat(index),
        event_start: event_start,
        event_end: event_end
      })] : [],
      setup: (0, common_1.predictableRandomInt)(4) * 5,
      breakdown: (0, common_1.predictableRandomInt)(4) * 5
    }
  };
});
var event_spaces = {};
exports.MOCK_EVENTS.forEach(function (event) {
  var _event$system, _event$system3;
  if (!event_spaces[(_event$system = event.system) === null || _event$system === void 0 ? void 0 : _event$system.id]) {
    var _event$system2;
    event_spaces[(_event$system2 = event.system) === null || _event$system2 === void 0 ? void 0 : _event$system2.id] = [];
  }
  event_spaces[(_event$system3 = event.system) === null || _event$system3 === void 0 ? void 0 : _event$system3.id].push(event);
});

/***/ }),

/***/ 43769:
/*!***********************************************!*\
  !*** ./libs/mocks/src/lib/api/events.mock.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _toConsumableArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/toConsumableArray.js */ 86033)["default"]);
var _objectSpread = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/objectSpread2.js */ 34092)["default"]);
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.EVENT_MOCKS = void 0;
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var ts_client_1 = __webpack_require__(/*! @placeos/ts-client */ 35713);
var events_data_1 = __webpack_require__(/*! ./events.data */ 64055);
var users_data_1 = __webpack_require__(/*! ./users.data */ 90726);
exports.EVENT_MOCKS = registerMocks();
function registerMocks() {
  (0, ts_client_1.registerMockEndpoint)({
    path: '/api/staff/v1/events',
    metadata: {},
    method: 'GET',
    callback: function callback(_) {
      var events = events_data_1.MOCK_EVENTS;
      if (!_.query_params.zone_ids) {
        events = events.filter(function (event) {
          return !!event.attendees.find(function (user) {
            return user.email === users_data_1.ACTIVE_USER.email;
          });
        });
      }
      if (_.query_params.period_start) {
        events = events.filter(function (e) {
          return (0, common_1.timePeriodsIntersect)(+_.query_params.period_start, +_.query_params.period_end, e.event_start, e.event_end);
        });
      }
      return events;
    }
  });
  (0, ts_client_1.registerMockEndpoint)({
    path: '/api/staff/v1/events',
    metadata: {},
    method: 'POST',
    callback: function callback(request) {
      var _new_event$system, _system$Bookings$;
      var new_event = _objectSpread(_objectSpread({}, request.body), {}, {
        id: "-cal-event-".concat((0, common_1.predictableRandomInt)(999))
      });
      new_event.attendees = [users_data_1.MOCK_STAFF.find(function (_) {
        return _.email === new_event.host;
      })].concat(_toConsumableArray(new_event.attendees || []));
      new_event.attendees.forEach(function (user) {
        if (user.zones) user.resource = true;
      });
      if (new_event.system) {
        new_event.attendees = [].concat(_toConsumableArray(new_event.attendees || []), [_objectSpread(_objectSpread({}, new_event.system), {}, {
          resource: true
        })]);
      }
      events_data_1.MOCK_EVENTS.push(new_event);
      var system = (0, ts_client_1.mockSystem)((_new_event$system = new_event.system) === null || _new_event$system === void 0 ? void 0 : _new_event$system.id);
      system === null || system === void 0 || (_system$Bookings$ = system.Bookings[0]) === null || _system$Bookings$ === void 0 || _system$Bookings$.$poll_bookings();
      return new_event;
    }
  });
  (0, ts_client_1.registerMockEndpoint)({
    path: '/api/staff/v1/events/:id',
    metadata: {},
    method: 'GET',
    callback: function callback(request) {
      var item = events_data_1.MOCK_EVENTS.find(function (event) {
        return event.id === request.route_params.id;
      });
      if (item) {
        return item;
      }
      throw {
        status: 404,
        message: 'Event not found'
      };
    }
  });
  (0, ts_client_1.registerMockEndpoint)({
    path: '/api/staff/v1/events/:id',
    metadata: {},
    method: 'DELETE',
    callback: function callback(request) {
      var index = events_data_1.MOCK_EVENTS.findIndex(function (event) {
        return event.id === request.route_params.id;
      });
      if (index > 0) {
        if (events_data_1.MOCK_EVENTS[index].host === users_data_1.ACTIVE_USER.email) {
          events_data_1.MOCK_EVENTS.splice(index, 1);
        } else {
          var user = events_data_1.MOCK_EVENTS[index].attendees.find(function (_) {
            return _.email === users_data_1.ACTIVE_USER.email;
          });
          user.response_status = 'declined';
        }
        return;
      }
      throw {
        status: 404,
        message: 'Event not found'
      };
    }
  });
  (0, ts_client_1.registerMockEndpoint)({
    path: '/api/staff/v1/events/:id',
    metadata: {},
    method: 'PATCH',
    callback: function callback(request) {
      var index = events_data_1.MOCK_EVENTS.findIndex(function (event) {
        return event.id === request.route_params.id;
      });
      if (index >= 0) {
        return events_data_1.MOCK_EVENTS.splice(index, 1, request.body);
      }
      throw {
        status: 404,
        message: 'Event not found'
      };
    }
  });
  (0, ts_client_1.registerMockEndpoint)({
    path: '/api/staff/v1/events/:id/guests/:email/checkin',
    metadata: {},
    method: 'POST',
    callback: function callback(request) {
      var event = events_data_1.MOCK_EVENTS.find(function (event) {
        return event.id === request.route_params.id;
      });
      if (event) {
        var checked_in = event.extension_data.checked_in || [];
        event.extension_data.checked_in = checked_in.concat([request.route_params.email]);
        return event;
      }
      throw {
        status: 404,
        message: 'Guest not found'
      };
    }
  });
}

/***/ }),

/***/ 27309:
/*!***********************************************!*\
  !*** ./libs/mocks/src/lib/api/spaces.data.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _objectSpread = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/objectSpread2.js */ 34092)["default"]);
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.MOCK_SPACES = void 0;
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var spaces_1 = __webpack_require__(/*! @placeos/spaces */ 44855);
var randomSpaceFeatures = function randomSpaceFeatures() {
  var f = ['Whiteboard', 'VidConf', 'Projector', 'Views'];
  var numFeatures = (0, common_1.predictableRandomInt)(f.length + 1);
  var res = [];
  for (var i = 0; i < numFeatures; i++) {
    res.push(f[(0, common_1.predictableRandomInt)(f.length)]);
  }
  return res.filter(function (el, i, r) {
    return r.indexOf(el) === i;
  });
};
exports.MOCK_SPACES = [{
  name: '1.01 Operations Room',
  map_id: 'area-1.01-status',
  zones: ['bld-01', 'bld-01_lvl-1', 'zone-EmWFTjuYExK']
}, {
  name: '1.03 Sydney Boardroom',
  map_id: 'area-1.03-status',
  zones: ['bld-01', 'bld-01_lvl-1', 'zone-EmWFTjuYExK']
}, {
  name: '1.04 The Studio',
  map_id: 'area-1.04-status',
  zones: ['bld-01', 'bld-01_lvl-1', 'zone-EmWFTjuYExK']
}, {
  name: 'Jam Board',
  map_id: 'area-1.02-status',
  zones: ['bld-01', 'bld-01_lvl-1', 'zone-EmWFTjuYExK']
}, {
  name: 'G.01 Cisco Room',
  map_id: 'area-G.01-status',
  zones: ['bld-01', 'bld-01_lvl-1', 'zone-EmWFTjuYExK']
}, {
  name: 'G.02 The Lab',
  map_id: 'area-G.02-status',
  zones: ['bld-01', 'bld-01_lvl-1', 'zone-EmWFTjuYExK']
}, {
  name: 'Conference Room 2.01',
  map_id: 'area-2.01-status',
  zones: ['bld-02', 'bld-02_lvl-2', 'zone-EmWFTjuYExK']
}, {
  name: 'Conference Room 2.02',
  map_id: 'area-2.02-status',
  zones: ['bld-02', 'bld-02_lvl-2', 'zone-EmWFTjuYExK']
}, {
  name: 'Conference Room 3.01',
  map_id: 'area-3.01-status',
  zones: ['bld-02', 'bld-02_lvl-3', 'zone-EmWFTjuYExK']
}, {
  name: 'Conference Room 3.02',
  map_id: 'area-3.02-status',
  zones: ['bld-02', 'bld-02_lvl-3', 'zone-EmWFTjuYExK']
}, {
  name: 'Conference Room 3.03',
  map_id: 'area-3.03-status',
  zones: ['bld-02', 'bld-02_lvl-3', 'zone-EmWFTjuYExK']
},
//MapsIndoors mock spaces
{
  name: 'Boardroom 1',
  map_id: '12beee0d06a1475293aadd9f',
  zones: ['bld-01', 'bld-01_lvl-1', 'zone-EmWFTjuYExK'],
  level: {
    id: 'bld-01_lvl-1',
    parent_id: 'bld-01',
    name: 'Level 1',
    display_name: 'Level 1',
    capacity: 5,
    number: '',
    map_id: '12beee0d06a1475293aadd9f',
    tags: [''],
    setting: {},
    images: [''],
    locations: {
      id: '',
      name: ''
    }
  }
}, {
  name: 'Boardroom 2',
  map_id: 'dd2dec8c291a4fb7995bff3c',
  zones: ['bld-01', 'bld-01_lvl-1', 'zone-EmWFTjuYExK'],
  level: {
    id: 'bld-01_lvl-1',
    parent_id: 'bld-01',
    name: 'Level 1',
    display_name: 'Level 1',
    capacity: 5,
    number: '',
    map_id: 'dd2dec8c291a4fb7995bff3c',
    tags: [''],
    setting: {},
    images: [''],
    locations: {
      id: '',
      name: ''
    }
  }
}, {
  name: 'Boardroom 3',
  map_id: '23bc6cf392c842d69abc71bf',
  zones: ['bld-01', 'bld-01_lvl-1', 'zone-EmWFTjuYExK'],
  level: {
    id: 'bld-01_lvl-1',
    parent_id: 'bld-01',
    name: 'Level 1',
    display_name: 'Level 1',
    capacity: 5,
    number: '',
    map_id: '23bc6cf392c842d69abc71bf',
    tags: [''],
    setting: {},
    images: [''],
    locations: {
      id: '',
      name: ''
    }
  }
}, {
  name: 'Boardroom 4',
  map_id: '696971dbc50a4c66a7f5356a',
  zones: ['bld-01', 'bld-01_lvl-1', 'zone-EmWFTjuYExK'],
  level: {
    id: 'bld-01_lvl-1',
    parent_id: 'bld-01',
    name: 'Level 1',
    display_name: 'Level 1',
    capacity: 5,
    number: '',
    map_id: '23bc6cf392c842d69abc71bf',
    tags: [''],
    setting: {},
    images: [''],
    locations: {
      id: '',
      name: ''
    }
  }
}, {
  name: 'Boardroom 5',
  map_id: '58cc74c5dd4249148674a191',
  zones: ['bld-01', 'bld-01_lvl-1', 'zone-EmWFTjuYExK'],
  level: {
    id: 'bld-01_lvl-1',
    parent_id: 'bld-01',
    name: 'Level 1',
    display_name: 'Level 1',
    capacity: 5,
    number: '',
    map_id: '23bc6cf392c842d69abc71bf',
    tags: [''],
    setting: {},
    images: [''],
    locations: {
      id: '',
      name: ''
    }
  }
}, {
  name: 'Boardroom 6',
  map_id: 'a4c02df953f34e5dad26c95f',
  zones: ['bld-01', 'bld-01_lvl-1', 'zone-EmWFTjuYExK']
}, {
  name: 'Boardroom 7',
  map_id: '23bc6cf392c842d69abc71bf',
  zones: ['bld-02', 'bld-02_lvl-3', 'zone-EmWFTjuYExK']
}, {
  name: 'Boardroom 8',
  map_id: '21a49f92c5924d2f9b39934b',
  zones: ['bld-02', 'bld-02_lvl-3', 'zone-EmWFTjuYExK']
}, {
  name: 'Boardroom 9',
  map_id: '0d3f964712ec4d36b9776449',
  zones: ['bld-02', 'bld-02_lvl-3', 'zone-EmWFTjuYExK']
}, {
  name: 'Boardroom 10',
  map_id: '7c01d7766a38488b8813347c',
  zones: ['bld-02', 'bld-02_lvl-3', 'zone-EmWFTjuYExK']
}, {
  name: 'Boardroom 11',
  map_id: '9e9efbe702bb4d91a2615c06',
  zones: ['bld-02', 'bld-02_lvl-3', 'zone-EmWFTjuYExK']
}, {
  name: 'Boardroom 12',
  map_id: '66161113fff74d8780daeb2e',
  zones: ['bld-02', 'bld-02_lvl-3', 'zone-EmWFTjuYExK']
}].map(function (d) {
  return (0, spaces_1.generateMockSpace)(_objectSpread(_objectSpread({}, d), {}, {
    features: randomSpaceFeatures(),
    images: ['https://webcdn.executivecentre.com/wp-content/uploads/sites/39/2020/10/img-meetingroomrental_hire.jpg']
  }));
});

/***/ }),

/***/ 19825:
/*!************************************************!*\
  !*** ./libs/mocks/src/lib/api/surveys.mock.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _objectSpread = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/objectSpread2.js */ 34092)["default"]);
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.SURVEY_MOCKS = void 0;
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var ts_client_1 = __webpack_require__(/*! @placeos/ts-client */ 35713);
var zone_data_1 = __webpack_require__(/*! ./zone.data */ 19658);
var date_fns_1 = __webpack_require__(/*! date-fns */ 25773);
exports.SURVEY_MOCKS = registerMocks();
var MOCK_SURVEYS = new Array(20).fill(0).map(function () {
  return createMockSurvey();
});
var MOCK_SURVEY_QUESTIONS = new Array(20).fill(0).map(function () {
  return createMockSurveyQuestion();
});
var MOCK_SURVEY_ANSWERS = (0, common_1.flatten)(MOCK_SURVEYS.map(function (_) {
  return new Array(20).fill(0).map(function () {
    return createMockSurveyAnswer(_);
  });
}));
function createMockSurvey(survey) {
  var id = (0, common_1.predictableRandomInt)(999999, 0);
  var bld = zone_data_1.MOCK_BUILDINGS[(0, common_1.predictableRandomInt)(zone_data_1.MOCK_BUILDINGS.length, 0)];
  return _objectSpread({
    id: id,
    title: "Survey ".concat(id),
    description: '',
    trigger: 'none',
    pages: [],
    zone_id: bld === null || bld === void 0 ? void 0 : bld.id,
    building_id: bld === null || bld === void 0 ? void 0 : bld.id,
    created_at: (0, date_fns_1.getUnixTime)(Date.now()),
    updated_at: (0, date_fns_1.getUnixTime)(Date.now())
  }, survey || {});
}
function createMockSurveyAnswer(survey) {
  var id = (0, common_1.predictableRandomInt)(999999, 0);
  return {
    id: id,
    survey_id: survey.id,
    question_id: (0, common_1.predictableRandomInt)(999999, 0),
    answer_json: (0, common_1.predictableRandomInt)(10, 0),
    type: 'rating',
    created_at: (0, date_fns_1.getUnixTime)(Date.now()),
    updated_at: (0, date_fns_1.getUnixTime)(Date.now())
  };
}
function createMockSurveyQuestion() {
  var id = (0, common_1.predictableRandomInt)(999999, 0);
  return {
    id: id,
    type: 'text',
    title: "Question ".concat(id),
    options: {},
    required: false,
    choices: {},
    tags: [],
    deleted: false,
    created_at: (0, date_fns_1.getUnixTime)(Date.now()),
    updated_at: (0, date_fns_1.getUnixTime)(Date.now())
  };
}
function registerMocks() {
  (0, ts_client_1.registerMockEndpoint)({
    path: '/api/staff/v1/surveys',
    metadata: {},
    method: 'GET',
    callback: function callback(request) {
      var _request$query_params;
      return (_request$query_params = request.query_params) !== null && _request$query_params !== void 0 && _request$query_params.building_id ? MOCK_SURVEYS.filter(function (_) {
        return _.zone_id === request.query_params.building_id;
      }) : MOCK_SURVEYS;
    }
  });
  (0, ts_client_1.registerMockEndpoint)({
    path: '/api/staff/v1/surveys/answers',
    metadata: {},
    method: 'GET',
    callback: function callback(request) {
      var _request$query_params2;
      return (_request$query_params2 = request.query_params) !== null && _request$query_params2 !== void 0 && _request$query_params2.survey_id ? MOCK_SURVEY_ANSWERS.filter(function (_) {
        return _.survey_id === request.query_params.survey_id;
      }) : MOCK_SURVEY_ANSWERS;
    }
  });
  (0, ts_client_1.registerMockEndpoint)({
    path: '/api/staff/v1/surveys/questions',
    metadata: {},
    method: 'GET',
    callback: function callback(request) {
      var _request$query_params3;
      return (_request$query_params3 = request.query_params) !== null && _request$query_params3 !== void 0 && _request$query_params3.id ? MOCK_SURVEY_QUESTIONS.filter(function (_) {
        return _.id === +request.query_params.id;
      }) : MOCK_SURVEY_QUESTIONS;
    }
  });
  (0, ts_client_1.registerMockEndpoint)({
    path: '/api/staff/v1/surveys/:id',
    metadata: {},
    method: 'GET',
    callback: function callback(request) {
      console.log('Surveys:', MOCK_SURVEYS);
      var survey = MOCK_SURVEYS.find(function (_) {
        return _.id === +request.route_params.id;
      });
      if (!survey) throw {
        status: 404
      };
      return survey;
    }
  });
}

/***/ }),

/***/ 61654:
/*!************************************************!*\
  !*** ./libs/mocks/src/lib/api/systems.mock.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.SYSTEM_MOCKS = void 0;
var ts_client_1 = __webpack_require__(/*! @placeos/ts-client */ 35713);
var systems_bindings_mock_1 = __webpack_require__(/*! ../systems-bindings.mock */ 12028);
var spaces_data_1 = __webpack_require__(/*! ./spaces.data */ 27309);
exports.SYSTEM_MOCKS = registerMocks();
function registerMocks() {
  spaces_data_1.MOCK_SPACES.forEach(function (space, index) {
    return (0, systems_bindings_mock_1.createSystem)(space);
  });
  (0, ts_client_1.registerMockEndpoint)({
    path: '/api/engine/v2/systems',
    metadata: {},
    method: 'GET',
    callback: function callback(request) {
      var _request$query_params;
      return (_request$query_params = request.query_params) !== null && _request$query_params !== void 0 && _request$query_params.zone_id ? spaces_data_1.MOCK_SPACES.filter(function (_) {
        return _.zones.includes(request.query_params.zone_id);
      }) : spaces_data_1.MOCK_SPACES;
    }
  });
  (0, ts_client_1.registerMockEndpoint)({
    path: '/api/engine/v2/systems/:id',
    metadata: {},
    method: 'GET',
    callback: function callback(request) {
      var space = spaces_data_1.MOCK_SPACES.find(function (_) {
        return _.id === request.route_params.id;
      });
      if (!space) throw {
        status: 404
      };
      return space;
    }
  });
}

/***/ }),

/***/ 90726:
/*!**********************************************!*\
  !*** ./libs/mocks/src/lib/api/users.data.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.MOCK_GUESTS = exports.MOCK_STAFF = exports.ACTIVE_USER = void 0;
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var common_mock_1 = __webpack_require__(/*! ./common.mock */ 53737);
var PREDEF_USERS = ['Jonathan McFarlane', 'Alex Sorafumo', 'Jim Doe', 'Cristina Boston', 'Jeremy West', 'Viv Briffa', 'Candy Russo', 'Jeff Wiz', 'Sravani Kotha', 'Kim Burgess', 'Caspian Baska', 'Stephen Von Takach', 'Cameron Reeves', 'Shane Boseley'];
exports.ACTIVE_USER = {
  id: 'current',
  name: 'PlaceOS - Demo User',
  email: 'dev@place.tech',
  groups: ['deals', 'user'],
  sys_admin: true
};
exports.MOCK_STAFF = PREDEF_USERS.map(function (name, i) {
  return {
    id: "user-".concat(i + 1),
    name: "".concat(name, " (PlaceOS)"),
    email: "".concat(name.split(' ').join('.').toLowerCase(), "@").concat(common_mock_1.DOMAIN)
  };
}).concat([exports.ACTIVE_USER]);
exports.MOCK_GUESTS = PREDEF_USERS.map(function (name, i) {
  return {
    id: "guest-".concat(i + 1),
    name: "".concat(name, " (External)"),
    email: "".concat(name.split(' ').join('.').toLowerCase(), "@guest.").concat(common_mock_1.DOMAIN),
    visit_expected: (0, common_1.predictableRandomInt)(99999) % 2 === 0,
    extension_data: (0, common_1.predictableRandomInt)(99999) % 3 === 0 ? {
      vaccination_proof: {
        url: 'https://fonts.gstatic.com/s/i/materialicons/verified/v11/24px.svg'
      },
      id_data: {
        url: 'https://fonts.gstatic.com/s/i/materialicons/fingerprint/v12/24px.svg'
      }
    } : {}
  };
});

/***/ }),

/***/ 13864:
/*!**********************************************!*\
  !*** ./libs/mocks/src/lib/api/users.mock.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _objectSpread = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/objectSpread2.js */ 34092)["default"]);
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.USER_MOCKS = void 0;
var ts_client_1 = __webpack_require__(/*! @placeos/ts-client */ 35713);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var users_data_1 = __webpack_require__(/*! ./users.data */ 90726);
var zone_data_1 = __webpack_require__(/*! ./zone.data */ 19658);
var spaces_data_1 = __webpack_require__(/*! ./spaces.data */ 27309);
var events_data_1 = __webpack_require__(/*! ./events.data */ 64055);
var date_fns_1 = __webpack_require__(/*! date-fns */ 25773);
exports.USER_MOCKS = registerMocks();
function registerMocks() {
  (0, ts_client_1.registerMockEndpoint)({
    path: '/api/engine/v2/users/:id',
    metadata: {},
    method: 'GET',
    callback: function callback(request) {
      if (request.route_params.id === 'current') {
        return users_data_1.ACTIVE_USER;
      }
      var person = users_data_1.MOCK_STAFF.find(function (user) {
        return user.email === request.route_params.id;
      });
      if (person) {
        return person;
      }
      throw {
        status: 404,
        message: 'User not found'
      };
    }
  });
  (0, ts_client_1.registerMockEndpoint)({
    path: '/api/staff/v1/people',
    metadata: {},
    method: 'GET',
    callback: function callback(request) {
      if (request.query_params.q) {
        var search = request.query_params.q.toLowerCase();
        return users_data_1.MOCK_STAFF.filter(function (_ref) {
          var name = _ref.name,
            email = _ref.email;
          return name.toLowerCase().includes(search) || email.toLowerCase().includes(search);
        });
      }
      return users_data_1.MOCK_STAFF;
    }
  });
  (0, ts_client_1.registerMockEndpoint)({
    path: '/api/staff/v1/people/:id',
    metadata: {},
    method: 'GET',
    callback: function callback(request) {
      var id = decodeURIComponent(request.route_params.id);
      var person = users_data_1.MOCK_STAFF.find(function (user) {
        return user.email === id;
      });
      if (person) {
        return _objectSpread(_objectSpread({}, person), {}, {
          location: generateLocation()
        });
      }
      throw {
        status: 404,
        message: 'User not found'
      };
    }
  });
  (0, ts_client_1.registerMockEndpoint)({
    path: '/api/staff/v1/guests',
    metadata: {},
    method: 'GET',
    callback: function callback(request) {
      if (request.query_params.q) {
        var search = request.query_params.q.toLowerCase();
        return users_data_1.MOCK_GUESTS.filter(function (user) {
          return user.name.toLowerCase().includes(search) || user.email.toLowerCase().includes(search);
        });
      }
      return users_data_1.MOCK_STAFF;
    }
  });
  (0, ts_client_1.registerMockEndpoint)({
    path: '/api/staff/v1/guests/:email',
    metadata: {},
    method: 'GET',
    callback: function callback(request) {
      var email = decodeURIComponent(request.route_params.email);
      var person = users_data_1.MOCK_GUESTS.find(function (user) {
        return user.email === email;
      });
      if (person) return person;
      throw {
        status: 404,
        message: 'Guest not found'
      };
    }
  });
  (0, ts_client_1.registerMockEndpoint)({
    path: '/api/staff/v1/guests/:email/meetings',
    metadata: {},
    method: 'GET',
    callback: function callback(request) {
      if (request.route_params.email) {
        var email = request.route_params.email.toLowerCase();
        var events = events_data_1.MOCK_EVENTS.filter(function (event) {
          return event.attendees.find(function (user) {
            return user.email.toLowerCase() === email;
          });
        });
        return events;
      }
      throw {
        status: 404,
        message: "Unable to find meetings with guest with email ".concat(request.route_params.email)
      };
    }
  });
  var LOCATION_TYPES = ['meeting', 'desk_id', 'laptop', 'mobile', 'geo', 'none'];
  function generateLocation() {
    var type = LOCATION_TYPES[(0, common_1.predictableRandomInt)(LOCATION_TYPES.length)];
    var level = zone_data_1.MOCK_LEVELS[(0, common_1.predictableRandomInt)(zone_data_1.MOCK_LEVELS.length)];
    var level_spaces = spaces_data_1.MOCK_SPACES.filter(function (s) {
      return s.zones.includes(level.id);
    });
    var space = level_spaces[(0, common_1.predictableRandomInt)(level_spaces.length)] || {};
    var location = {};
    switch (type) {
      case 'meeting':
        location.meeting = {
          building: level.parent_id,
          level: level.id,
          system: space.id,
          map_id: space.map_id,
          event_id: ''
        };
        break;
      case 'desk_id':
        location.meeting = {
          building: level.parent_id,
          level: level.id,
          map_id: space.map_id,
          checked_in: (0, date_fns_1.getUnixTime)(Date.now())
        };
        break;
      case 'laptop':
      case 'mobile':
        location[type] = {
          building: level.parent_id,
          level: level.id,
          x: +(0, common_1.predictableRandomInt)(10000),
          y: +(0, common_1.predictableRandomInt)(5000),
          last_seen: (0, date_fns_1.getUnixTime)((0, date_fns_1.subMinutes)(Date.now(), (0, common_1.predictableRandomInt)(60)))
        };
        break;
      case 'geo':
        location.geo = {
          lat: (0, common_1.predictableRandomInt)(180) - 90,
          lon: (0, common_1.predictableRandomInt)(360) - 180,
          last_seen: (0, date_fns_1.getUnixTime)((0, date_fns_1.subMinutes)(Date.now(), (0, common_1.predictableRandomInt)(60)))
        };
        break;
    }
    return location;
  }
}

/***/ }),

/***/ 19658:
/*!*********************************************!*\
  !*** ./libs/mocks/src/lib/api/zone.data.ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, exports) => {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.MOCK_LEVELS = exports.MOCK_ZONES = exports.MOCK_BUILDINGS = exports.MOCK_ORGS = void 0;
exports.MOCK_ORGS = [{
  created_at: 1587057070,
  updated_at: 1587692680,
  name: 'PlaceOS',
  description: '',
  tags: ['org'],
  count: 0,
  capacity: 0,
  parent_id: '',
  triggers: [],
  id: 'zone-EmWFTjuYExK'
}];
exports.MOCK_BUILDINGS = [{
  name: 'Sydney',
  description: '',
  tags: ['building'],
  count: 0,
  capacity: 0,
  parent_id: 'zone-EmWFTjuYExK',
  triggers: [],
  id: 'bld-01',
  levels: ['lvl-G', 'lvl-1']
}, {
  name: 'Brisbane',
  description: '',
  tags: ['building'],
  count: 0,
  capacity: 0,
  parent_id: 'zone-EmWFTjuYExK',
  triggers: [],
  id: 'bld-02',
  levels: ['lvl-2', 'lvl-3']
}];
exports.MOCK_ZONES = [];
var mockLevel = function mockLevel(id, idx, building) {
  var num = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : '10';
  var map_id = id.substr(4);
  map_id = "assets/maps/level_".concat(num, ".svg");
  return {
    id: "".concat(building.id, "_").concat(id),
    name: "Level ".concat(id.endsWith('00') ? 'G' : id.split('-')[1]),
    parent_id: building.id,
    description: '',
    tags: ['level'],
    map_id: map_id,
    code: 'level code 12',
    type: 'staff floor',
    count: 5,
    capacity: 30,
    location: 'optional lat,long',
    display_name: ''
  };
};
exports.MOCK_LEVELS = exports.MOCK_BUILDINGS.map(function (bld) {
  return bld.levels.map(function (level, idx) {
    return mockLevel(level, idx, bld, level.split('-')[1]);
  });
}).reduce(function (p, c) {
  return p.concat(c);
}, [
// {
//     id: 'test',
//     parent_id: 'bld-01',
//     name: 'Test',
//     map_id: 'assets/maps/test.svg',
// },
{
  id: 'level-p1',
  parent_id: 'bld-01',
  name: 'Level P1',
  tags: ['level', 'parking'],
  map_id: 'assets/maps/level_P1.svg'
}]);

/***/ }),

/***/ 67825:
/*!**********************************************!*\
  !*** ./libs/mocks/src/lib/api/zones.mock.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.ZONE_MOCKS = exports.LOCKERS = exports.PARKING_SPACES = void 0;
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var ts_client_1 = __webpack_require__(/*! @placeos/ts-client */ 35713);
var catering_data_1 = __webpack_require__(/*! ./catering.data */ 8287);
var users_data_1 = __webpack_require__(/*! ./users.data */ 90726);
var zone_data_1 = __webpack_require__(/*! ./zone.data */ 19658);
var MOCK_METADATA = {
  current: {
    contacts: {
      name: 'contacts',
      description: '',
      details: [{
        id: 'user-1',
        name: 'Jonathan McFarlane (PlaceOS)',
        email: 'jon@place.tech',
        first_name: 'Jonathan',
        last_name: 'McFarlane'
      }, {
        id: 'user-1',
        name: 'Alex Sorafumo (PlaceOS)',
        email: 'alex@place.tech',
        first_name: 'Alex',
        last_name: 'Sorafumo'
      }]
    }
  }
};
exports.PARKING_SPACES = {};
exports.LOCKERS = {};
exports.ZONE_MOCKS = registerMocks();
function registerMocks() {
  (0, ts_client_1.registerMockEndpoint)({
    path: '/api/engine/v2/zones',
    metadata: {},
    method: 'GET',
    callback: function callback(request) {
      if (request.query_params.tags === 'org') {
        return zone_data_1.MOCK_ORGS;
      } else if (request.query_params.tags === 'region') {
        return [];
      } else if (request.query_params.tags === 'building') {
        return zone_data_1.MOCK_BUILDINGS;
      } else if (request.query_params.tags === 'level') {
        return zone_data_1.MOCK_LEVELS;
      } else if (request.query_params.tags) {
        return zone_data_1.MOCK_ZONES.filter(function (_) {
          return _.tags.includes(request.query_params.tags);
        });
      }
      throw {
        status: 404,
        message: 'Zones not found'
      };
    }
  });
  (0, ts_client_1.registerMockEndpoint)({
    path: '/api/engine/v2/settings',
    metadata: {},
    method: 'GET',
    callback: function callback(request) {
      return [];
    }
  });
  (0, ts_client_1.registerMockEndpoint)({
    path: '/api/engine/v2/settings/:id',
    metadata: {},
    method: 'GET',
    callback: function callback(request) {
      return {};
    }
  });
  (0, ts_client_1.registerMockEndpoint)({
    path: '/api/engine/v2/metadata/:id',
    metadata: {},
    method: 'GET',
    callback: function callback(request) {
      if (request.query_params.name === 'bindings') {
        return {
          bindings: {
            details: {
              area_management: 'space-0',
              location_services: 'space-0',
              contact_tracing: 'space-0',
              lockers: 'space-0'
              // payments: 'space-0',
            }
          }
        };
      }
      if (request.query_params.name === 'catering') {
        return {
          catering: {
            details: catering_data_1.MOCK_MENU
          }
        };
      }
      if (request.query_params.name === 'parking-spaces') {
        var parts = request.route_params.id.split('-');
        var id = parts[parts.length - 1];
        return generateParkingSpaces(id);
      }
      if (request.query_params.name === 'lockers') {
        var _parts = request.route_params.id.split('-');
        var _id = _parts[_parts.length - 1];
        return generateLockers(_id);
      }
      if (request.query_params.name === 'desks') {
        var _parts2 = request.route_params.id.split('-');
        var _id2 = _parts2[_parts2.length - 1];
        return generateMockDeskMetadata(_id2);
      }
      if (request.query_params.name === 'charge_codes') {
        var _parts3 = request.route_params.id.split('-');
        var _id3 = _parts3[_parts3.length - 1];
        return {
          charge_codes: {
            details: new Array(30).fill(0).map(function (_, idx) {
              return "C-".concat(idx);
            })
          }
        };
      }
      if (request.query_params.name === 'map_regions') {
        return {
          map_regions: {
            details: {
              areas: [{
                id: 'zone-10.A',
                properties: {
                  capacity: 100,
                  label_location: {
                    x: 0.36,
                    y: 0.33
                  }
                  // draw_polygon: true
                },
                geometry: {
                  coordinates: [[0.0, 0.0], [0.0, 0.5], [0.5, 0.5], [0.5, 0.0]]
                }
              }, {
                id: 'zone-10.B',
                properties: {
                  capacity: 100,
                  label_location: {
                    x: 0.76,
                    y: 0.33
                  }
                }
              }, {
                id: 'zone-10.C',
                properties: {
                  capacity: 100,
                  label_location: {
                    x: 0.63,
                    y: 0.77
                  }
                }
              }]
            }
          }
        };
      }
      if (MOCK_METADATA[request.route_params.id] && MOCK_METADATA[request.route_params.id][request.query_params.name]) {
        return MOCK_METADATA[request.route_params.id];
      } else if (MOCK_METADATA[request.route_params.id] && !request.query_params.name) {
        return MOCK_METADATA[request.route_params.id] || {};
      }
      return {};
    }
  });
  (0, ts_client_1.registerMockEndpoint)({
    path: '/api/engine/v2/metadata/:id',
    metadata: {},
    method: 'PATCH',
    callback: function callback(request) {
      if (!MOCK_METADATA[request.route_params.id]) MOCK_METADATA[request.route_params.id] = {};
      MOCK_METADATA[request.route_params.id][request.body.name] = request.body;
      return request.body;
    }
  });
  (0, ts_client_1.registerMockEndpoint)({
    path: '/api/engine/v2/metadata/:id',
    metadata: {},
    method: 'PUT',
    callback: function callback(request) {
      if (!MOCK_METADATA[request.route_params.id]) MOCK_METADATA[request.route_params.id] = {};
      MOCK_METADATA[request.route_params.id][request.body.name] = request.body;
      return request.body;
    }
  });
  var DESK_FEATURES = ['sit_to_stand', 'single_monitor', 'dual_monitor'];
  function generateMockDeskMetadata(id) {
    return {
      desks: {
        details: new Array(30).fill(0).map(function (_, idx) {
          return {
            id: "table-".concat((0, common_1.padString)(id, 2), ".").concat((0, common_1.padString)(idx + 1, 3)),
            name: "Desk ".concat(id, ".").concat((0, common_1.padString)(idx + 1, 3)),
            bookable: (0, common_1.predictableRandomInt)(9999) % 4 !== 0,
            groups: (0, common_1.predictableRandomInt)(9999) % 4 === 0 ? ['test-1'] : [],
            features: DESK_FEATURES.filter(function (_) {
              return (0, common_1.predictableRandomInt)(99999) % 3 === 0;
            })
          };
        })
      }
    };
  }
  function generateParkingSpaces(id) {
    if (!exports.PARKING_SPACES[id]) {
      exports.PARKING_SPACES[id] = {
        'parking-spaces': {
          details: new Array(18 * 6).fill(0).map(function (_, idx) {
            var position = (0, common_1.padString)(idx % 18 + Math.floor(idx / 18) * 100, 3);
            var assignee = (0, common_1.predictableRandomInt)(9999) % 4 === 0 ? users_data_1.MOCK_STAFF[(0, common_1.predictableRandomInt)(users_data_1.MOCK_STAFF.length)] : {};
            return {
              id: "park-".concat(position),
              map_id: "park-".concat(position),
              name: "".concat(position),
              bookable: (0, common_1.predictableRandomInt)(9999) % 4 !== 0,
              assigned_to: assignee.email || '',
              assigned_name: assignee.name || ''
            };
          })
        }
      };
    }
    return exports.PARKING_SPACES[id];
  }
  function generateLockers(id) {
    if (!exports.LOCKERS[id]) {
      exports.LOCKERS[id] = {
        lockers: {
          details: new Array(6).fill(0).map(function (_, idx) {
            var position = (0, common_1.padString)(idx + 1, 2);
            var assignee = (0, common_1.predictableRandomInt)(9999) % 4 === 0 ? users_data_1.MOCK_STAFF[(0, common_1.predictableRandomInt)(users_data_1.MOCK_STAFF.length)] : {};
            return {
              id: "locker-bank-".concat(id, ".").concat(position),
              map_id: "bank-".concat(id, ".").concat(position),
              level_id: "lvl-02",
              name: "Bank ".concat(position),
              height: 3,
              lockers: new Array(18).fill(0).map(function (_, idx2) {
                return {
                  id: "locker-".concat(position, ".").concat((0, common_1.padString)(idx2 + 1, 3)),
                  name: "Locker ".concat(idx2 + 1),
                  accessible: (0, common_1.predictableRandomInt)(9999) % 2 !== 0,
                  bookable: (0, common_1.predictableRandomInt)(9999) % 4 !== 0,
                  position: [idx2 % 6, Math.floor(idx2 / 6)],
                  size: [1, 1]
                };
              })
            };
          })
        }
      };
    }
    return exports.LOCKERS[id];
  }
  (0, ts_client_1.registerMockEndpoint)({
    path: '/api/engine/v2/metadata/:id/children',
    metadata: {},
    method: 'GET',
    callback: function callback(request) {
      var zone = zone_data_1.MOCK_BUILDINGS.find(function (_) {
        return _.id === request.route_params.id;
      });
      if (!zone) throw {
        status: 404,
        message: "Unable to find zone with id \"".concat(request.route_params.id, "\"")
      };
      return zone_data_1.MOCK_LEVELS.filter(function (_) {
        return _.parent_id === zone.id;
      }).map(function (lvl) {
        var parts = lvl.id.split('-');
        var id = parts[parts.length - 1];
        return {
          zone: lvl,
          metadata: request.query_params.name === 'parking-spaces' ? generateParkingSpaces(id) : request.query_params.name === 'lockers' ? generateLockers(id) : generateMockDeskMetadata(id)
        };
      });
    }
  });
}

/***/ }),

/***/ 30084:
/*!***********************************************!*\
  !*** ./libs/mocks/src/lib/realtime/camera.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _objectSpread = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/objectSpread2.js */ 34092)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.createCameraModule = exports.CameraPan = exports.CameraTilt = void 0;
var CameraTilt;
(function (CameraTilt) {
  CameraTilt[CameraTilt["Down"] = 0] = "Down";
  CameraTilt[CameraTilt["Up"] = 1] = "Up";
  CameraTilt[CameraTilt["Stop"] = 2] = "Stop";
})(CameraTilt || (exports.CameraTilt = CameraTilt = {}));
var CameraPan;
(function (CameraPan) {
  CameraPan[CameraPan["Left"] = 0] = "Left";
  CameraPan[CameraPan["Right"] = 1] = "Right";
  CameraPan[CameraPan["Stop"] = 2] = "Stop";
})(CameraPan || (exports.CameraPan = CameraPan = {}));
var CameraModule = /*#__PURE__*/function () {
  function CameraModule(_) {
    _classCallCheck(this, CameraModule);
    this.presets = ['Preset One', 'Preset 2', 'Preset Three'];
  }
  return _createClass(CameraModule, [{
    key: "$pan",
    value: function $pan(dir) {}
  }, {
    key: "$tilt",
    value: function $tilt(tilt) {}
  }, {
    key: "$recall",
    value: function $recall(name) {}
  }, {
    key: "$save_preset",
    value: function $save_preset(name) {}
  }]);
}();
var createCameraModule = function createCameraModule(space) {
  var overrides = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
  return new CameraModule(_objectSpread(_objectSpread({}, space), overrides));
};
exports.createCameraModule = createCameraModule;

/***/ }),

/***/ 43037:
/*!************************************************!*\
  !*** ./libs/mocks/src/lib/realtime/capture.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _objectSpread = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/objectSpread2.js */ 34092)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.createCaptureModule = exports.CaptureModule = void 0;
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var interval;
var CaptureModule = /*#__PURE__*/function () {
  function CaptureModule(_) {
    _classCallCheck(this, CaptureModule);
    this.status = 'stopped';
    this.live = false;
    this.remaining = (0, common_1.randomInt)(24 * 60 * 60);
  }
  return _createClass(CaptureModule, [{
    key: "$start",
    value: function $start() {
      var _this = this;
      this.status = 'playing';
      interval = setInterval(function () {
        if (_this.remaining < 1) clearInterval(interval);
        _this.remaining = _this.remaining - 1;
        _this.current = _this.current + 1;
      }, 3000);
    }
  }, {
    key: "$pause",
    value: function $pause() {
      this.status = 'paused';
      clearInterval(interval);
    }
  }, {
    key: "$resume",
    value: function $resume() {
      this.$start();
    }
  }, {
    key: "$stop",
    value: function $stop() {
      this.status = 'stopped';
      this.current = 0;
      clearInterval(interval);
    }
  }]);
}();
exports.CaptureModule = CaptureModule;
var createCaptureModule = function createCaptureModule(space) {
  var overrides = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
  return new CaptureModule(_objectSpread(_objectSpread({}, space), overrides));
};
exports.createCaptureModule = createCaptureModule;

/***/ }),

/***/ 83924:
/*!********************************************************!*\
  !*** ./libs/mocks/src/lib/realtime/contact-tracing.ts ***!
  \********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _objectSpread = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/objectSpread2.js */ 34092)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.createContactTracingModule = void 0;
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var date_fns_1 = __webpack_require__(/*! date-fns */ 25773);
var users_data_1 = __webpack_require__(/*! ../api/users.data */ 90726);
var CONTACT_EVENTS = {};
var filterFn = function filterFn(start, end) {
  return function (itm) {
    return (0, common_1.timePeriodsIntersect)(start, end, itm.contact_time, itm.contact_time);
  };
};
var ContactTracingModule = /*#__PURE__*/function () {
  function ContactTracingModule(_) {
    _classCallCheck(this, ContactTracingModule);
  }
  return _createClass(ContactTracingModule, [{
    key: "$close_contacts",
    value: function $close_contacts(email, user, start, end) {
      if (!CONTACT_EVENTS[email]) CONTACT_EVENTS[email] = [];
      if (CONTACT_EVENTS[email].length) return CONTACT_EVENTS[email].filter(filterFn(start, end));
      var events = [];
      var beginning = (0, date_fns_1.addDays)(start * 1000, -10);
      var ending = (0, date_fns_1.addDays)(end * 1000, 10);
      var date = new Date(beginning);
      while ((0, date_fns_1.isBefore)(date, ending)) {
        new Array((0, common_1.randomInt)(4)).fill(0).map(function (_) {
          return {
            mac_address: (0, common_1.randomString)(10),
            contact_time: (0, date_fns_1.getUnixTime)((0, date_fns_1.setHours)(date, (0, common_1.randomInt)(11) + 7)),
            duration: (0, common_1.randomInt)(60) * 60,
            username: users_data_1.MOCK_STAFF[(0, common_1.randomInt)(users_data_1.MOCK_STAFF.length)].email
          };
        }).forEach(function (e) {
          return events.push(e);
        });
        date = (0, date_fns_1.addDays)(date, 1);
      }
      CONTACT_EVENTS[email] = events;
      return CONTACT_EVENTS[email].filter(filterFn(start, end));
    }
  }]);
}();
var createContactTracingModule = function createContactTracingModule(space) {
  var overrides = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
  return new ContactTracingModule(_objectSpread(_objectSpread({}, space), overrides));
};
exports.createContactTracingModule = createContactTracingModule;

/***/ }),

/***/ 42:
/*!************************************************!*\
  !*** ./libs/mocks/src/lib/realtime/control.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _objectSpread = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/objectSpread2.js */ 34092)["default"]);
var _toConsumableArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/toConsumableArray.js */ 86033)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.createSystemModule = void 0;
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var RoomModule = /*#__PURE__*/function () {
  function RoomModule(_data) {
    var _data$connected,
      _this = this;
    _classCallCheck(this, RoomModule);
    this.help = {
      help: {
        title: 'Help',
        content: "\n# Using the asset browser\n\n## Activating the menu\nThe 5 finger touch can be actvated by placing 4 fingers and your thumb on the screen, or quickly double-tapping the screen. Activation through double tap will leave the menu on-screen. To close tap the \u2018X\u2019.\n\n## Selecting a menu item\nLeaving at least one finger on the screen, drag your finger to the icon to select.\n\n## Home Menu\nThe home menu allows you to access files and navigate to content and presentations via the Launcher.\n\n## Connect and stream your laptop or access the CMS to add files\nPlug your laptop into the HDMI to stream it to the screen, or access the CMS to add your own content and create custom presentations.\n\n<video></video>\n\n1. Test1\n2. Test2\n3. Test3\n            "
      },
      'laptop-help': {
        icon: 'web_asset',
        title: 'Asset Browser',
        content: "# Test 2"
      }
    };
    this.tabs = [{
      icon: 'laptop',
      name: 'Laptop',
      type: 'Laptop'
    }, {
      icon: 'call',
      name: 'VC',
      inputs: ['VidConf_1'],
      help: 'vidconf-help',
      controls: 'vidconf-controls'
    }];
    this.volume = 0;
    this.name = _data.name || 'Test Module';
    this.connected = (_data$connected = _data.connected) !== null && _data$connected !== void 0 ? _data$connected : true;
    this.active = _data.active || false;
    this.input_list = _data.input_list;
    this.output_list = _data.output_list;
    this.env_sources = _data.env_sources || [];
    this.inputs = Object.keys(this.input_list || {}) || [];
    this.outputs = Object.keys(this.output_list || {}) || [];
    this.available_outputs = this.outputs;
    var types = (0, common_1.unique)(this.env_sources.map(function (_) {
      return _.type;
    })) || [];
    types.forEach(function (t) {
      return _this["".concat(t)] = _this.env_sources.filter(function (_) {
        return _.type === t;
      }).map(function (_) {
        return _.id;
      });
    });
    this.env_sources.forEach(function (source) {
      return _this["".concat(source.type, "/").concat(source.id)] = source;
    });
    this.inputs.forEach(function (key) {
      return _this["input/".concat(key)] = _this.input_list[key];
    });
    this.outputs.forEach(function (key) {
      return _this["output/".concat(key)] = _this.output_list[key];
    });
  }
  return _createClass(RoomModule, [{
    key: "$power",
    value: function $power() {
      var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;
      this.active = state;
    }
    /** Shares a signal source with the room and any connected remote participants. */
  }, {
    key: "$share",
    value: function $share() {}
    /**
     * Connect a signal source to a signal output, or set of outputs. Any intermediate
     * device interactions are handled internally. For example, on a system using a small
     * presentation switcher and a display, routing a laptop input will select the
     * appropriate input on the switcher, and select the appropriate input on the display.
     *
     * This includes all routable signal types - in addition to the above example, this may
     * be interacting with an audio DSP to add a microphone feed to an output zone, or
     * connecting a USB HID input device with a specific output.
     **/
  }, {
    key: "$route",
    value: function $route(input, output) {
      if (this.inputs.includes(input) && this.outputs.includes(output)) {
        this.$updateState(input, {
          routes: (0, common_1.unique)([].concat(_toConsumableArray(this.input_list[input].routes || []), [output]))
        });
        this.$updateState(output, {
          source: input,
          following: input
        });
      }
    }
    /**
     * Remove a signal source from a signal output.
     * Predominantly intended for outputs that support more than one simultaneous input source
     * (mixed audio zone, or display capable of compositing multiple video sources).
     **/
  }, {
    key: "$unroute",
    value: function $unroute() {}
    /**
     * Establish a call (either phone or video) with a remote participant.
     * This may be a peer-to-peer connection or a wider group via an external bridging service.
     **/
  }, {
    key: "$connect",
    value: function $connect() {}
    /** End a call with a remote participant. */
  }, {
    key: "$disconnect",
    value: function $disconnect() {}
    /**
     * Bind the current system to another PlaceOS controlled space, relinquishing local control.
     * This may be used for an education pod that pairs with a wider classroom or a room being
     * used as an overflow from a primary event space.
     **/
  }, {
    key: "$link",
    value: function $link() {}
    /**
     * Join the current system with another PlaceOS controlled space, sharing control and signal IO.
     * Examples of usage would be a set of rooms with moveable walls. N-way merges supported.
     **/
  }, {
    key: "$merge",
    value: function $merge() {}
    /** Separate from a linked or merged system. */
  }, {
    key: "$split",
    value: function $split() {}
    /**
     * Display an alert visible to participants in the space. This may occur as a screen overlay,
     * on a control interface, a bot post in a chat space associated with the current meeting or
     * other modalities depending on hardware capability.
     **/
  }, {
    key: "$notify",
    value: function $notify() {}
    /**
     * Place the room into a predefined operation mode. This may include executing an arbitrary
     * set of device interactions, changing metadata associated with the system itself (changing
     * available input or output nodes), or other configurable actions designed to transition
     * the space to a specific state.
     **/
  }, {
    key: "$preset",
    value: function $preset() {}
    /**
     * Set the volume for a signal node in the space. This can include outputs as well as inputs
     * where supported (e.g. microphone). If unspecified, default is to interact with a ‘primary’
     * output node.
     **/
  }, {
    key: "$volume",
    value: function $volume(value) {
      var source = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'all';
      if (source === 'all') {
        this.volume = value;
      }
    }
    /** Interact with audio muting on supporting signal nodes within the space. */
  }, {
    key: "$mute",
    value: function $mute() {
      var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;
      var source = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'all';
      this.$updateState(source, {
        mute: state
      });
    }
    /**
     * Activates or deactivates a signal mute for the associated IO. If this is not possible,
     * (e.g. unsupported by the device) an error is returned.
     **/
  }, {
    key: "$unmute",
    value: function $unmute() {
      var source = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'all';
      this.$mute(false, source);
    }
    /**
     * Wrapper for an arbitrary set of control points defined in system configuration.
     * Each of these may map to control options available on a sibling module and take one of two forms:
     *  - Continuous value within a range (temperature set point 16.0...28.0 degrees, lighting level 0...100)
     *  - Set of possible states (lighting high/med/low, blind up/down, electrochromic glass clear/opaque)
     *
     * System state provides the ability to introspect configured points for both control limits and current value.
     **/
  }, {
    key: "$environment",
    value: function $environment(id, state) {
      var source = this.env_sources.find(function (_) {
        return _.id === id;
      });
      if (source) {
        this["".concat(source.type, "/").concat(source.id)] = _objectSpread(_objectSpread({}, source), {}, {
          state: state
        });
      }
    }
    /** Locks an IO node. Prevents any route changes that include this until unlocked. */
  }, {
    key: "$lock",
    value: function $lock(source) {
      this.$updateState(source, {
        locked: true
      });
    }
    /** Unlocks an IO node. */
  }, {
    key: "$unlock",
    value: function $unlock(source) {
      this.$updateState(source, {
        locked: false
      });
    }
  }, {
    key: "$updateState",
    value: function $updateState(source, data) {
      if (this["input/".concat(source)]) {
        this["input/".concat(source)] = _objectSpread(_objectSpread({}, this["input/".concat(source)]), data);
        this.input_list[source] = _objectSpread(_objectSpread({}, this["input/".concat(source)]), data);
      } else if (this["output/".concat(source)]) {
        this["output/".concat(source)] = _objectSpread(_objectSpread({}, this["output/".concat(source)]), data);
        this.output_list[source] = _objectSpread(_objectSpread({}, this["output/".concat(source)]), data);
      }
    }
  }]);
}();
var input_list = {
  Mic1: {
    name: 'Lectern Mic',
    type: 'Microphone',
    mod: 'Microphone_1'
  },
  Mic2: {
    name: 'Lapel Mic',
    type: 'Microphone',
    mod: 'Microphone_2'
  },
  Mic3: {
    name: 'Handheld Mic',
    type: 'Microphone',
    mod: 'Microphone_3'
  },
  PC1: {
    name: 'PC-1',
    type: 'PC'
  },
  PC2: {
    name: 'PC-2',
    type: 'PC'
  },
  PC3: {
    name: 'PC-3',
    type: 'PC'
  },
  PC4: {
    name: 'PC-4',
    type: 'PC'
  },
  HDMI: {
    name: 'Laptop HDMI',
    type: 'Laptop'
  },
  VGA: {
    name: 'Laptop VGA',
    type: 'Laptop'
  },
  Camera1: {
    name: 'Camera Rear',
    type: 'Camera',
    mod: 'Camera_1'
  },
  Camera2: {
    name: 'Camera Front',
    type: 'Camera',
    mod: 'Camera_2'
  },
  Camera3: {
    name: 'Camera Rear 2',
    type: 'Camera',
    mod: 'Camera_3'
  },
  Camera4: {
    name: 'Camera Front 2',
    type: 'Camera',
    mod: 'Camera_4'
  },
  TV1: {
    name: 'IPTV 1',
    type: 'TV',
    mod: 'IPTV_1'
  },
  VC1: {
    name: 'Video Conference 1',
    type: 'VC',
    mod: 'VidConf_1'
  }
};
var output_list = {
  Display1: {
    name: 'Screen 1',
    type: 'Display',
    source: 'PC1',
    mod: 'Display_1'
  },
  Display2: {
    name: 'Screen 2',
    type: 'Display',
    mod: 'Display_2'
  },
  Display5: {
    name: 'TV 1',
    type: 'Display',
    mod: 'Display_5',
    source: 'TV1'
  }
};
var env_sources = [{
  id: 'light1',
  name: 'Lighting',
  type: 'lights',
  states: ['Off', 'Presentation', 'Meeting', 'Full'],
  state: 'Off'
}, {
  id: 'blind1',
  name: 'Blinds',
  type: 'blinds',
  states: ['Off', 'Presentation', 'Meeting'],
  state: 'Off'
}, {
  id: 'screen1',
  name: 'Screen',
  type: 'screen',
  states: ['Up', 'Down'],
  state: 'Down'
}];
var createSystemModule = function createSystemModule(space) {
  var overrides = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
  return new RoomModule(_objectSpread(_objectSpread({}, space), {}, {
    input_list: input_list,
    output_list: output_list,
    env_sources: env_sources
  }, overrides));
};
exports.createSystemModule = createSystemModule;

/***/ }),

/***/ 57133:
/*!**********************************************!*\
  !*** ./libs/mocks/src/lib/realtime/desks.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _objectSpread = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/objectSpread2.js */ 34092)["default"]);
var _createForOfIteratorHelper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createForOfIteratorHelper.js */ 36350)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.MockLocationServicesModule = exports.MockAreaManagementModule = void 0;
exports.createAreaManagementModule = createAreaManagementModule;
exports.updateLocations = updateLocations;
exports.generateLocation = generateLocation;
var ts_md5_1 = __webpack_require__(/*! ts-md5 */ 96466);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var zone_data_1 = __webpack_require__(/*! ../api/zone.data */ 19658);
var users_data_1 = __webpack_require__(/*! ../api/users.data */ 90726);
var MockAreaManagementModule = /*#__PURE__*/function () {
  function MockAreaManagementModule() {
    _classCallCheck(this, MockAreaManagementModule);
    /** Overview of the zones */
    this.overview = {};
    this.emergency_contacts = {
      'First Aid': users_data_1.MOCK_STAFF.filter(function (_) {
        return (0, common_1.predictableRandomInt)(9999) % 5 === 0;
      }),
      'Fire Warden': users_data_1.MOCK_STAFF.filter(function (_) {
        return (0, common_1.predictableRandomInt)(9999) % 5 === 0;
      })
    };
  }
  return _createClass(MockAreaManagementModule, [{
    key: "$locate_user",
    value: function $locate_user(email, username) {}
  }, {
    key: "$update",
    value: function $update() {
      updateLocations(this, zone_data_1.MOCK_LEVELS);
    }
  }]);
}();
exports.MockAreaManagementModule = MockAreaManagementModule;
var MAC_LOOKUP = {};
var MockLocationServicesModule = /*#__PURE__*/function () {
  function MockLocationServicesModule() {
    _classCallCheck(this, MockLocationServicesModule);
  }
  return _createClass(MockLocationServicesModule, [{
    key: "$check_ownership_of",
    value: function $check_ownership_of(mac_address) {
      if (!MAC_LOOKUP[mac_address]) {
        var staff = (0, common_1.randomInt)(999999) % 3 === 0 ? users_data_1.MOCK_STAFF[(0, common_1.randomInt)(users_data_1.MOCK_STAFF.length)] : {
          name: ''
        };
        MAC_LOOKUP[mac_address] = {
          assigned_to: staff.name
        };
      }
      return MAC_LOOKUP[mac_address];
    }
  }, {
    key: "$locate_user",
    value: function $locate_user(email, username) {
      return [{
        type: 'wireless',
        position: {
          x: 0.5,
          y: 0.5
        },
        level: zone_data_1.MOCK_LEVELS[(0, common_1.randomInt)(zone_data_1.MOCK_LEVELS.length)].id,
        priority: 0
      }];
    }
  }]);
}();
exports.MockLocationServicesModule = MockLocationServicesModule;
function padZero(no) {
  var len = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 3;
  var str = "".concat(no);
  while (str.length < len) {
    str = '0' + str;
  }
  return str;
}
function createAreaManagementModule(space) {
  var overrides = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
  var mod = new MockAreaManagementModule();
  var _iterator = _createForOfIteratorHelper(zone_data_1.MOCK_LEVELS),
    _step;
  try {
    var _loop = function _loop() {
      var lvl = _step.value;
      mod.overview[lvl.id] = {
        desk_count: 100,
        desk_usage: 0,
        device_capacity: 100,
        device_count: 0,
        estimated_people: 0,
        percentage_use: 0,
        recommendation: 10000
      };
      mod["".concat(lvl.id, ":desk_ids")] = new Array(mod.overview[lvl.id].desk_count).fill(0).map(function (_, idx) {
        return "table-".concat(lvl.number, ".").concat(padZero(idx));
      });
      mod["".concat(lvl.id)] = {
        value: []
      };
      mod["".concat(lvl.id, ":areas")] = {
        value: [{
          area_id: 'zone-10.B',
          count: (0, common_1.randomInt)(100),
          name: '.L1 IFS IT'
        }, {
          area_id: 'zone-10.A',
          count: (0, common_1.randomInt)(100),
          name: '.L1 IFS IT'
        }, {
          area_id: 'zone-10.C',
          count: (0, common_1.randomInt)(50),
          name: '.L1 IFS IT'
        }, {
          area_id: 'zone-02.D',
          count: (0, common_1.randomInt)(100),
          name: 'Quite Work'
        }, {
          area_id: 'zone-02.B',
          count: (0, common_1.randomInt)(100),
          name: 'Meeting Area A'
        }, {
          area_id: 'zone-02.A',
          count: (0, common_1.randomInt)(100),
          name: 'Meeting Area B'
        }, {
          area_id: 'zone-02.C',
          count: (0, common_1.randomInt)(50),
          name: 'Casual Work'
        }]
      };
    };
    for (_iterator.s(); !(_step = _iterator.n()).done;) {
      _loop();
    }
  } catch (err) {
    _iterator.e(err);
  } finally {
    _iterator.f();
  }
  return mod;
}
function updateLocations(mod, levels) {
  var _iterator2 = _createForOfIteratorHelper(levels),
    _step2;
  try {
    var _loop2 = function _loop2() {
      var lvl = _step2.value;
      mod[lvl.id] = {
        value: new Array((0, common_1.predictableRandomInt)(20)).fill(0).map(function () {
          return generateLocation(lvl, mod["".concat(lvl.id, ":desk_ids")]);
        })
      };
      var _iterator3 = _createForOfIteratorHelper(mod["".concat(lvl.id, ":areas")].value),
        _step3;
      try {
        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {
          var area = _step3.value;
          area.count = (0, common_1.randomInt)(100);
        }
      } catch (err) {
        _iterator3.e(err);
      } finally {
        _iterator3.f();
      }
      mod["".concat(lvl.id, ":areas")] = _objectSpread({}, mod["".concat(lvl.id, ":areas")]);
    };
    for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
      _loop2();
    }
  } catch (err) {
    _iterator2.e(err);
  } finally {
    _iterator2.f();
  }
}
function generateLocation(lvl, desks) {
  var _ref, _ref2, _ts_md5_1$Md, _ts_md5_1$Md2;
  var users = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : users_data_1.MOCK_STAFF;
  var fixed = (0, common_1.predictableRandomInt)(9999) % 3 === 0;
  var usr = (_ref = (users || [])[(0, common_1.predictableRandomInt)((_ref2 = users || []) === null || _ref2 === void 0 ? void 0 : _ref2.length)]) === null || _ref === void 0 ? void 0 : _ref.email;
  return fixed ? {
    location: 'desk',
    at_location: (0, common_1.predictableRandomInt)(9999) % 2 !== 0,
    map_id: desks[(0, common_1.predictableRandomInt)(desks.length)],
    mac: (_ts_md5_1$Md = ts_md5_1.Md5) === null || _ts_md5_1$Md === void 0 ? void 0 : _ts_md5_1$Md.hashStr(usr || ''),
    level: lvl.id,
    building: lvl.parent_id
  } : {
    location: 'wireless',
    coordinates_from: 'bottom-left',
    x: (0, common_1.predictableRandomInt)(1000) / 10,
    y: (0, common_1.predictableRandomInt)(1000) / 10,
    lon: 55.27476066828535,
    lat: 25.20106100633537,
    s2_cell_id: '3e5f4281459c',
    mac: (_ts_md5_1$Md2 = ts_md5_1.Md5) === null || _ts_md5_1$Md2 === void 0 ? void 0 : _ts_md5_1$Md2.hashStr(usr || ''),
    variance: 9.62534032222287,
    last_seen: Math.floor(new Date().valueOf() / 1000),
    map_width: 100,
    map_height: 100
  };
}

/***/ }),

/***/ 42669:
/*!************************************************!*\
  !*** ./libs/mocks/src/lib/realtime/display.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _objectSpread = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/objectSpread2.js */ 34092)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.createDisplayModule = void 0;
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var DisplayModule = /*#__PURE__*/function () {
  function DisplayModule(_) {
    _classCallCheck(this, DisplayModule);
    this.volume = (0, common_1.randomInt)(100);
  }
  return _createClass(DisplayModule, [{
    key: "$mute",
    value: function $mute() {
      var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;
      this.mute = state;
    }
  }, {
    key: "$volume",
    value: function $volume(value) {
      this.volume = value;
    }
  }]);
}();
var createDisplayModule = function createDisplayModule(space) {
  var overrides = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
  return new DisplayModule(_objectSpread(_objectSpread({}, space), overrides));
};
exports.createDisplayModule = createDisplayModule;

/***/ }),

/***/ 74722:
/*!***********************************************!*\
  !*** ./libs/mocks/src/lib/realtime/events.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.createBookingsModule = exports.MockBookingModule = void 0;
var date_fns_1 = __webpack_require__(/*! date-fns */ 25773);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var events_data_1 = __webpack_require__(/*! ../api/events.data */ 64055);
var MockBookingModule = /*#__PURE__*/function () {
  function MockBookingModule(space, _data) {
    _classCallCheck(this, MockBookingModule);
    /** Timezone the associated space resided */
    this.time_zone = 'Australia/Sydney';
    /** Whether booking is disabled */
    this.disable_book_now = false;
    /** Whether ending current meeting is disabled */
    this.disable_end_meeting = false;
    /** List of current and upcoming bookings for space */
    this.bookings = [];
    this.pending_period = 0;
    this.pending_before = 0;
    /** Control UI associated with the space */
    this.control_ui = '';
    /** Catering UI associated with the space */
    this.catering_ui = '';
    /** Time of the last booking started by a user */
    this.last_booking_started = 0;
    this.current_booking = null;
    this.next_booking = null;
    /** Current status of the space */
    this.room_image = 'assets/boardroom.jpg';
    this.status = 'free';
    this._space = null;
    this._space = space;
  }
  /** Start the meeting at the given time */
  return _createClass(MockBookingModule, [{
    key: "$start_meeting",
    value: function $start_meeting(t) {
      this.last_booking_started = t;
    }
    /** End the meeting at the given time */
  }, {
    key: "$end_meeting",
    value: function $end_meeting(t) {}
    /** Book meeting for the current time */
  }, {
    key: "$book_now",
    value: function $book_now(len, t, o) {}
  }, {
    key: "$poll_bookings",
    value: function $poll_bookings() {
      updateBookings(this._space, this);
    }
  }]);
}();
exports.MockBookingModule = MockBookingModule;
var createBookingsModule = function createBookingsModule(space) {
  var overrides = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
  return new MockBookingModule(space, overrides);
};
exports.createBookingsModule = createBookingsModule;
function updateBookings(space, mod) {
  var _ref;
  var bookings = events_data_1.MOCK_EVENTS.filter(function (event) {
    var _event$attendees;
    return (_event$attendees = event.attendees) === null || _event$attendees === void 0 ? void 0 : _event$attendees.find(function (u) {
      var _event$system;
      return u.email === space.email || u.id === space.id || ((_event$system = event.system) === null || _event$system === void 0 ? void 0 : _event$system.id) === space.id;
    });
  }) || [];
  bookings.sort(function (a, b) {
    return a.event_start - b.event_start;
  });
  mod.bookings = bookings;
  mod.current_booking = bookings.find(function (_) {
    return (0, common_1.timePeriodsIntersect)(Date.now(), Date.now(), _.event_start * 1000, _.event_end * 1000);
  });
  mod.next_booking = bookings.find(function (_) {
    return _.event_start * 1000 > Date.now();
  });
  var date = new Date();
  var current_booking = mod.current_booking,
    next_booking = mod.next_booking;
  var start = new Date((_ref = current_booking || next_booking) === null || _ref === void 0 ? void 0 : _ref.event_start);
  var pending = (0, common_1.timePeriodsIntersect)(date.valueOf(), date.valueOf(), (0, date_fns_1.subSeconds)(start, mod.pending_before).valueOf(), (0, date_fns_1.addSeconds)(start, mod.pending_period).valueOf());
  mod.status = space !== null && space !== void 0 && space.bookable ? current_booking ? 'busy' : pending ? 'pending' : 'free' : 'not-bookable';
}

/***/ }),

/***/ 20062:
/*!*********************************************************!*\
  !*** ./libs/mocks/src/lib/realtime/locker-locations.ts ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _objectSpread = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/objectSpread2.js */ 34092)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.createLockerLocationsModule = void 0;
var LockerLocationsModule = /*#__PURE__*/function () {
  function LockerLocationsModule(data) {
    _classCallCheck(this, LockerLocationsModule);
  }
  return _createClass(LockerLocationsModule, [{
    key: "$lockers_allocated_to_me",
    value: function $lockers_allocated_to_me() {
      return [{
        location: 'locker',
        bank_id: '977cb758-4e42-4292-848a-4821f2fb4d74',
        locker_id: 'adda7802-dfd7-467c-b369-d73394ad7084',
        locker_name: '0.105',
        allocated: true,
        group_id: '6c246e35-4a73-475a-8725-0676d78167f4'
      }];
    }
  }]);
}();
var createLockerLocationsModule = function createLockerLocationsModule(details) {
  var overrides = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
  return new LockerLocationsModule(_objectSpread(_objectSpread({}, details), overrides));
};
exports.createLockerLocationsModule = createLockerLocationsModule;

/***/ }),

/***/ 82050:
/*!************************************************!*\
  !*** ./libs/mocks/src/lib/realtime/meeting.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _objectSpread = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/objectSpread2.js */ 34092)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.createMeetingPushModule = void 0;
var MeetingPushModule = /*#__PURE__*/function () {
  function MeetingPushModule(data) {
    _classCallCheck(this, MeetingPushModule);
    this.supported_meeting_url = 'https://meet.';
  }
  return _createClass(MeetingPushModule, [{
    key: "$econtrol",
    value: function $econtrol() {}
  }]);
}();
var createMeetingPushModule = function createMeetingPushModule(details) {
  var overrides = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
  return new MeetingPushModule(_objectSpread(_objectSpread({}, details), overrides));
};
exports.createMeetingPushModule = createMeetingPushModule;

/***/ }),

/***/ 84131:
/*!***************************************************!*\
  !*** ./libs/mocks/src/lib/realtime/microphone.ts ***!
  \***************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _objectSpread = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/objectSpread2.js */ 34092)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.createMicrophoneModule = void 0;
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var MicrophoneModule = /*#__PURE__*/function () {
  function MicrophoneModule(_) {
    _classCallCheck(this, MicrophoneModule);
    this.volume = (0, common_1.randomInt)(100);
  }
  return _createClass(MicrophoneModule, [{
    key: "$mute",
    value: function $mute() {
      var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;
      this.mute = state;
    }
  }, {
    key: "$volume",
    value: function $volume(value) {
      this.volume = value;
    }
  }]);
}();
var createMicrophoneModule = function createMicrophoneModule(space) {
  var overrides = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
  return new MicrophoneModule(_objectSpread(_objectSpread({}, space), overrides));
};
exports.createMicrophoneModule = createMicrophoneModule;

/***/ }),

/***/ 90948:
/*!*************************************************!*\
  !*** ./libs/mocks/src/lib/realtime/payments.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _objectSpread = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/objectSpread2.js */ 34092)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.createPaymentsModule = void 0;
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var PaymentsModule = /*#__PURE__*/function () {
  function PaymentsModule(_) {
    _classCallCheck(this, PaymentsModule);
  }
  return _createClass(PaymentsModule, [{
    key: "$list_payment_methods",
    value: function $list_payment_methods(type) {}
  }, {
    key: "$add_payment_method",
    value: function $add_payment_method(type, details) {}
  }, {
    key: "$get_product_prices",
    value: function $get_product_prices(id, period) {
      return [12000, 60];
    }
  }, {
    key: "$create_payment_intent",
    value: function $create_payment_intent(amount, source) {
      return (0, common_1.randomString)(12);
    }
  }, {
    key: "$confirm_payment_intent",
    value: function $confirm_payment_intent(id) {}
  }, {
    key: "$cancel_payment_intent",
    value: function $cancel_payment_intent(id) {}
  }, {
    key: "$create_customer",
    value: function $create_customer() {
      return "stripe-".concat((0, common_1.randomInt)(9999999, 1000000));
    }
  }]);
}();
var createPaymentsModule = function createPaymentsModule(space) {
  var overrides = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
  return new PaymentsModule(_objectSpread(_objectSpread({}, space), overrides));
};
exports.createPaymentsModule = createPaymentsModule;

/***/ }),

/***/ 73607:
/*!*********************************************************!*\
  !*** ./libs/mocks/src/lib/realtime/video-conference.ts ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _objectSpread = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/objectSpread2.js */ 34092)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.createVideoConferenceModule = void 0;
var VideoConferenceModule = /*#__PURE__*/function () {
  function VideoConferenceModule(_) {
    _classCallCheck(this, VideoConferenceModule);
    this.mic_mute = false;
    this.selfview = false;
    this.video_layout = 'Auto';
    this.presentation_mode = 'None';
    this.calls = {
      test: {
        Status: 'Connected'
      }
    };
  }
  return _createClass(VideoConferenceModule, [{
    key: "$show_camera_pip",
    value: function $show_camera_pip(visible) {
      this.selfview = visible;
    }
  }, {
    key: "$mic_mute",
    value: function $mic_mute(visible) {
      this.mic_mute = visible;
    }
  }, {
    key: "$presentation_mode",
    value: function $presentation_mode(state) {
      this.presentation_mode = state;
    }
  }, {
    key: "$hangup",
    value: function $hangup() {}
  }, {
    key: "$call_place_on_hold",
    value: function $call_place_on_hold() {
      for (var key in this.calls) {
        if (this.calls[key].Status) {
          this.calls[key].Status = 'OnHold';
          this.calls = _objectSpread({}, this.calls);
          return;
        }
      }
    }
  }, {
    key: "$call_resume",
    value: function $call_resume() {
      for (var key in this.calls) {
        if (this.calls[key].Status) {
          this.calls[key].Status = 'Idle';
          this.calls = _objectSpread({}, this.calls);
          return;
        }
      }
    }
  }, {
    key: "$video_layout",
    value: function $video_layout(layout) {
      this.video_layout = layout;
    }
  }, {
    key: "$dtmf_send",
    value: function $dtmf_send(digit) {}
  }, {
    key: "$dial",
    value: function $dial(dial_number) {
      return new Promise(function (r) {
        return setTimeout(function () {
          return r();
        }, 1000);
      });
    }
  }]);
}();
var createVideoConferenceModule = function createVideoConferenceModule() {
  var space = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
  var overrides = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
  return new VideoConferenceModule(_objectSpread(_objectSpread({}, space), overrides));
};
exports.createVideoConferenceModule = createVideoConferenceModule;

/***/ }),

/***/ 12028:
/*!*****************************************************!*\
  !*** ./libs/mocks/src/lib/systems-bindings.mock.ts ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.createSystem = createSystem;
var ts_client_1 = __webpack_require__(/*! @placeos/ts-client */ 35713);
var control_1 = __webpack_require__(/*! ./realtime/control */ 42);
var events_1 = __webpack_require__(/*! ./realtime/events */ 74722);
var desks_1 = __webpack_require__(/*! ./realtime/desks */ 57133);
var camera_1 = __webpack_require__(/*! ./realtime/camera */ 30084);
var display_1 = __webpack_require__(/*! ./realtime/display */ 42669);
var microphone_1 = __webpack_require__(/*! ./realtime/microphone */ 84131);
var capture_1 = __webpack_require__(/*! ./realtime/capture */ 43037);
var meeting_1 = __webpack_require__(/*! ./realtime/meeting */ 82050);
var video_conference_1 = __webpack_require__(/*! ./realtime/video-conference */ 73607);
var contact_tracing_1 = __webpack_require__(/*! ./realtime/contact-tracing */ 83924);
var payments_1 = __webpack_require__(/*! ./realtime/payments */ 90948);
var locker_locations_1 = __webpack_require__(/*! ./realtime/locker-locations */ 20062);
function createSystem(space) {
  (0, ts_client_1.registerSystem)(space.id, {
    System: [(0, control_1.createSystemModule)(space)],
    Bookings: [(0, events_1.createBookingsModule)(space)],
    ContactTracing: [(0, contact_tracing_1.createContactTracingModule)(space)],
    AreaManagement: [(0, desks_1.createAreaManagementModule)(space)],
    LocationServices: [new desks_1.MockLocationServicesModule()],
    Camera: new Array(10).fill(0).map(function (_) {
      return (0, camera_1.createCameraModule)(space);
    }),
    Display: new Array(10).fill(0).map(function (_) {
      return (0, display_1.createDisplayModule)(space);
    }),
    Microphone: new Array(10).fill(0).map(function (_) {
      return (0, microphone_1.createMicrophoneModule)(space);
    }),
    Capture: [(0, capture_1.createCaptureModule)(space)],
    MeetingPush: [(0, meeting_1.createMeetingPushModule)()],
    VidConf: [(0, video_conference_1.createVideoConferenceModule)()],
    Payment: [(0, payments_1.createPaymentsModule)(space)],
    LockerLocations: [(0, locker_locations_1.createLockerLocationsModule)()]
  });
  var system = (0, ts_client_1.mockSystem)(space.id);
  system.Bookings[0].$poll_bookings();
  setInterval(function () {
    return system.Bookings[0].$poll_bookings();
  }, 30 * 1000);
  system.AreaManagement[0].$update();
  setInterval(function () {
    return system.AreaManagement[0].$update();
  }, 30 * 1000);
}

/***/ }),

/***/ 11110:
/*!*********************************!*\
  !*** ./libs/mocks/src/mocks.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var zones_mock_1 = __webpack_require__(/*! ./lib/api/zones.mock */ 67825);
var users_mock_1 = __webpack_require__(/*! ./lib/api/users.mock */ 13864);
var systems_mock_1 = __webpack_require__(/*! ./lib/api/systems.mock */ 61654);
var events_mock_1 = __webpack_require__(/*! ./lib/api/events.mock */ 43769);
var calendars_mock_1 = __webpack_require__(/*! ./lib/api/calendars.mock */ 30105);
var bookings_mock_1 = __webpack_require__(/*! ./lib/api/bookings.mock */ 86242);
var assets_mock_1 = __webpack_require__(/*! ./lib/api/assets.mock */ 76525);
var surveys_mock_1 = __webpack_require__(/*! ./lib/api/surveys.mock */ 19825);
exports["default"] = {
  ZONE_MOCKS: zones_mock_1.ZONE_MOCKS,
  USER_MOCKS: users_mock_1.USER_MOCKS,
  SYSTEM_MOCKS: systems_mock_1.SYSTEM_MOCKS,
  EVENT_MOCKS: events_mock_1.EVENT_MOCKS,
  CALENDAR_MOCKS: calendars_mock_1.CALENDAR_MOCKS,
  BOOKING_MOCKS: bookings_mock_1.BOOKING_MOCKS,
  ASSET_MOCKS: assets_mock_1.ASSET_MOCKS,
  SURVEY_MOCKS: surveys_mock_1.SURVEY_MOCKS
};
(0, common_1.log)('MOCKS', 'Mocks included with application.');

/***/ }),

/***/ 2510:
/*!****************************************!*\
  !*** ./libs/organisation/src/index.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var tslib_1 = __webpack_require__(/*! tslib */ 24398);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/building.class */ 95170), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/building.utilities */ 41274), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/level.class */ 60602), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/organisation.class */ 16612), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/organisation.service */ 19863), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/organisation.utilities */ 58772), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/desk.class */ 47451), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/region.class */ 13466), exports);

/***/ }),

/***/ 95170:
/*!*****************************************************!*\
  !*** ./libs/organisation/src/lib/building.class.ts ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _toConsumableArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/toConsumableArray.js */ 86033)["default"]);
var _objectSpread = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/objectSpread2.js */ 34092)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.Building = void 0;
var level_class_1 = __webpack_require__(/*! ./level.class */ 60602);
var Building = /*#__PURE__*/function () {
  function Building() {
    var _this = this;
    var raw_data = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    _classCallCheck(this, Building);
    this.id = raw_data.id || '';
    this.parent_id = raw_data.parent_id || '';
    this.name = raw_data.name || '';
    var settings = raw_data.settings || {};
    this.display_name = raw_data.display_name;
    this.images = this.images || [];
    var disc_info = settings.discovery_info || settings;
    this.zone_id = raw_data.zone_id || raw_data.zone;
    this.extras = (raw_data.extras || disc_info.extras || []).map(function (i) {
      return {
        id: i.extra_id || i.id,
        name: i.extra_name || i.name
      };
    });
    this.loan_items = (raw_data.loan_items || disc_info.loan_items || []).map(function (i) {
      return {
        id: i.extra_id || i.id,
        name: i.extra_name || i.name
      };
    });
    this.levels = (raw_data.levels || disc_info.levels || []).map(function (i) {
      return new level_class_1.BuildingLevel(_objectSpread(_objectSpread({}, i), {}, {
        building_id: _this.id
      }));
    });
    this._roles = raw_data.roles || disc_info.roles || {};
    this._lockers = raw_data.lockers || raw_data.locker_structure || disc_info.locker_structure || {};
    this._systems = raw_data.systems || disc_info.systems || {};
    this._phone_numbers = raw_data.phone_numbers || disc_info.phone_numbers || {};
    this.location = raw_data.location || disc_info.location || '0,0';
    this.room_configurations = raw_data.room_configurations || disc_info.room_configurations || [];
    this.attributes = raw_data.attributes || disc_info.attributes || [];
    var searchables = [];
    if (raw_data.neighbourhoods) {
      for (var lvl in raw_data.neighbourhoods) {
        if (lvl in raw_data.neighbourhoods) {
          var lvl_features = raw_data.neighbourhoods[lvl] || {};
          for (var feature in lvl_features) {
            if (feature in lvl_features) {
              searchables.push({
                id: lvl_features[feature],
                name: feature,
                level_id: lvl
              });
            }
          }
        }
      }
    }
    this.bindings = raw_data.bindings || {};
    this.searchables = searchables;
    this.map_id = raw_data.map_id || '';
    this.timezone = raw_data.timezone || disc_info.timezone || settings.timezone || '';
    this.catering_hours = raw_data.catering_hours || disc_info.catering_hours || settings.catering_hours || {
      start: 7,
      end: 20
    };
    this.visitor_space = raw_data.visitor_space || disc_info.visitor_space || settings.visitor_space || '';
    this.holding_bay = raw_data.holding_bay || disc_info.holding_bay || settings.holding_bay || '';
    this.code = raw_data.code || disc_info.code || settings.code || '';
    this.address = raw_data.address || disc_info.address || settings.address || '';
    this.orientations = raw_data.orientations || disc_info.orientations || settings.orientations || {};
    this.booking_details = raw_data.booking_details || disc_info.booking_details || settings.booking_details || null;
    this.catering_restricted_from = raw_data.catering_restricted_from || disc_info.catering_restricted_from || settings.catering_restricted_from || -1440;
    this.currency = raw_data.currency || disc_info.currency || settings.currency || 'USD';
  }
  /**
   * Get list of users with the associated role
   * @param name Role to find users for
   */
  return _createClass(Building, [{
    key: "role",
    value: function role(name) {
      return _toConsumableArray(this._roles[name] || []);
    }
    /**
     * Get list of the names of available user role lists
     */
  }, {
    key: "role_names",
    get: function get() {
      var _this2 = this;
      return Object.keys(this._roles).filter(function (i) {
        return i in _this2._roles;
      });
    }
    /** Map of the locker ID arrays */
  }, {
    key: "lockers",
    get: function get() {
      return _objectSpread({}, this._lockers || {});
    }
    /** Map of important system ids for the building */
  }, {
    key: "systems",
    get: function get() {
      return _objectSpread({}, this._systems || {});
    }
    /** Map of important phone numbers for the building */
  }, {
    key: "phone_numbers",
    get: function get() {
      return _objectSpread({}, this._phone_numbers || {});
    }
    /**
     * Get search map feature for the given level ID
     * @param level_id ID of level to grab features for
     */
  }, {
    key: "featuresForLevel",
    value: function featuresForLevel(level_id) {
      return (this.searchables || []).filter(function (i) {
        return i.level_id === level_id;
      });
    }
  }]);
}();
exports.Building = Building;

/***/ }),

/***/ 41274:
/*!*********************************************************!*\
  !*** ./libs/organisation/src/lib/building.utilities.ts ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _createForOfIteratorHelper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createForOfIteratorHelper.js */ 36350)["default"]);
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.generateMockBuilding = generateMockBuilding;
exports.generateMockLevel = generateMockLevel;
var BLD_COUNT = 0;
var LVL_COUNT = 0;
/* istanbul ignore next */
/**
 * Generate raw mock data for creating a building
 * @param id Forced ID for the mock
 */
function generateMockBuilding(id) {
  if (!id) {
    id = "zone_bld-".concat(BLD_COUNT++);
  }
  var levels = Array(10).fill(0).map(function (i) {
    return generateMockLevel();
  });
  var features = {};
  var _iterator = _createForOfIteratorHelper(levels),
    _step;
  try {
    for (_iterator.s(); !(_step = _iterator.n()).done;) {
      var lvl = _step.value;
      var count = Math.floor(Math.random() * 3 + 2);
      features[lvl.level_id] = {};
      for (var i = 0; i < count; i++) {
        features[lvl.level_id]["A Feature ".concat(i + 1)] = "feature-".concat(i + 1);
      }
    }
  } catch (err) {
    _iterator.e(err);
  } finally {
    _iterator.f();
  }
  return {
    id: id,
    zone_id: id,
    extras: Array(10).fill(0).map(function (_, idx) {
      var name = "Property ".concat(idx + 1);
      return {
        extra_id: name.split(' ').join('-').toLowerCase(),
        extra_name: name
      };
    }),
    loan_items: Array(10).fill(0).map(function (_, idx) {
      var name = "Property ".concat(idx + 1);
      return {
        extra_id: name.split(' ').join('-').toLowerCase(),
        extra_name: name
      };
    }),
    levels: levels,
    roles: {
      'first-aiders': Array(10).fill(0).map(function (i) {
        return {
          name: 'Test'
        };
      })
    },
    neighbourhoods: features,
    settings: {
      test: {
        nested: {
          level2: true,
          org: false
        }
      }
    },
    room_configurations: [{
      id: 'boardroom',
      name: 'Boardroom',
      description: 'A boardroom setting'
    }, {
      id: 'cocktail',
      name: 'Cocktail',
      description: 'A cocktail setting'
    }]
  };
}
/* istanbul ignore next */
/**
 * Generate raw mock data for a building level
 * @param id Forced ID for the mock
 * @param map_url Map URL for the level
 */
function generateMockLevel(id, map_url) {
  if (!id) {
    id = "zone_lvl-".concat(LVL_COUNT++);
  }
  return {
    level_id: id,
    level_name: "Level ".concat(LVL_COUNT),
    map_url: map_url
  };
}

/***/ }),

/***/ 47451:
/*!*************************************************!*\
  !*** ./libs/organisation/src/lib/desk.class.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _objectSpread = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/objectSpread2.js */ 34092)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.Desk = void 0;
var ts_client_1 = __webpack_require__(/*! @placeos/ts-client */ 35713);
var IGNORE_KEYS = ['zone', 'qr_code', 'toJSON'];
var Desk = /*#__PURE__*/function () {
  function Desk() {
    var _this = this,
      _data$bookable;
    var data = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    _classCallCheck(this, Desk);
    this.toJSON = function () {
      return _this.format();
    };
    this.id = data.id || '';
    this.map_id = data.map_id || data.id || '';
    this.name = data.name || '';
    this.bookable = (_data$bookable = data.bookable) !== null && _data$bookable !== void 0 ? _data$bookable : false;
    this.zone = data.zone || new ts_client_1.PlaceZone();
    this.groups = data.groups || [];
    this.qr_code = data.qr_code || '';
    this.features = data.features || [];
    this.images = data.images || [];
    for (var key in data) {
      if (!(key in this)) this[key] = data[key];
    }
  }
  return _createClass(Desk, [{
    key: "format",
    value: function format() {
      var data = _objectSpread({}, this);
      for (var _i = 0, _IGNORE_KEYS = IGNORE_KEYS; _i < _IGNORE_KEYS.length; _i++) {
        var key = _IGNORE_KEYS[_i];
        delete data[key];
      }
      (0, ts_client_1.cleanObject)(data, [undefined, null, []]);
      return data;
    }
  }]);
}();
exports.Desk = Desk;

/***/ }),

/***/ 60602:
/*!**************************************************!*\
  !*** ./libs/organisation/src/lib/level.class.ts ***!
  \**************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.BuildingLevel = void 0;
/** Building Level data */
var BuildingLevel = /*#__PURE__*/_createClass(function BuildingLevel() {
  var _ref;
  var _data = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
  _classCallCheck(this, BuildingLevel);
  /** Settings overrides associated with the level */
  this.settings = {};
  this.id = _data.id || '';
  this.parent_id = _data.parent_id || '';
  this.name = _data.name || '';
  this.display_name = _data.display_name || '';
  this.map_id = _data.map_id || '';
  this.capacity = _data.capacity || 0;
  this.location = _data.location || '';
  this.locations = _data.locations || [];
  this.tags = _data.tags || [];
  this.images = _data.images || [];
  var parts = this.display_name.split(' ');
  this.number = (((_ref = parts.length >= 2 ? parts[parts.length - 1] : this.display_name[0]) === null || _ref === void 0 ? void 0 : _ref.toUpperCase()) || '').substring(0, 2);
});
exports.BuildingLevel = BuildingLevel;

/***/ }),

/***/ 16612:
/*!*********************************************************!*\
  !*** ./libs/organisation/src/lib/organisation.class.ts ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.Organisation = void 0;
var general_1 = __webpack_require__(/*! libs/common/src/lib/general */ 64217);
var Organisation = /*#__PURE__*/function () {
  function Organisation() {
    var raw_data = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    _classCallCheck(this, Organisation);
    this.id = raw_data.id || '';
    this.name = raw_data.name || '';
    this.description = raw_data.description || '';
    this.tags = raw_data.tags || [];
    this.count = raw_data.count || 0;
    this.capacity = raw_data.capacity || 0;
    this.bindings = raw_data.bindings || {};
    this._settings = raw_data.settings || {};
  }
  /**
   * Get a custom organisation setting
   * @param key Name of the setting. i.e. nested items can be grabbed using `.` to seperate key names
   */
  return _createClass(Organisation, [{
    key: "setting",
    value: function setting(key) {
      var keys = key.split('.');
      var value = (0, general_1.getItemWithKeys)(keys, this._settings);
      return value;
    }
  }]);
}();
exports.Organisation = Organisation;

/***/ }),

/***/ 19863:
/*!***********************************************************!*\
  !*** ./libs/organisation/src/lib/organisation.service.ts ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _toConsumableArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/toConsumableArray.js */ 86033)["default"]);
var _objectSpread = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/objectSpread2.js */ 34092)["default"]);
var _createForOfIteratorHelper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createForOfIteratorHelper.js */ 36350)["default"]);
var _regeneratorRuntime = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/regeneratorRuntime.js */ 8698)["default"]);
var _asyncToGenerator = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/asyncToGenerator.js */ 95386)["default"]);
var _slicedToArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/slicedToArray.js */ 6282)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _OrganisationService;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.OrganisationService = void 0;
var router_1 = __webpack_require__(/*! @angular/router */ 95072);
var ts_client_1 = __webpack_require__(/*! @placeos/ts-client */ 35713);
var rxjs_1 = __webpack_require__(/*! rxjs */ 15681);
var operators_1 = __webpack_require__(/*! rxjs/operators */ 97303);
var notifications_1 = __webpack_require__(/*! libs/common/src/lib/notifications */ 39525);
var settings_service_1 = __webpack_require__(/*! libs/common/src/lib/settings.service */ 14233);
var building_class_1 = __webpack_require__(/*! ./building.class */ 95170);
var level_class_1 = __webpack_require__(/*! ./level.class */ 60602);
var organisation_class_1 = __webpack_require__(/*! ./organisation.class */ 16612);
var region_class_1 = __webpack_require__(/*! ./region.class */ 13466);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var yaml = __webpack_require__(/*! js-yaml */ 80238);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! libs/common/src/lib/settings.service */ 14233);
var i2 = __webpack_require__(/*! @angular/router */ 95072);
var OrganisationService = /*#__PURE__*/function () {
  function OrganisationService(_service, _router) {
    var _this = this;
    _classCallCheck(this, OrganisationService);
    this._service = _service;
    this._router = _router;
    /** Subject which stores the initialised state of the object */
    this._initialised = new rxjs_1.BehaviorSubject(false);
    /** Observable of the initialised state of the object */
    this.initialised = this._initialised.asObservable();
    this._regions = new rxjs_1.BehaviorSubject([]);
    this._active_region = new rxjs_1.BehaviorSubject(null);
    this._buildings = new rxjs_1.BehaviorSubject([]);
    this._active_building = new rxjs_1.BehaviorSubject(null);
    this._levels = new rxjs_1.BehaviorSubject([]);
    this._loaded_data = [];
    this.app_key = "".concat((this._service.app_name || 'workplace').toLowerCase(), "_app");
    /** Observable for the list of regions */
    this.region_list = this._regions.asObservable();
    /** Observable for the list of buildings */
    this.building_list = this._buildings.asObservable();
    /** Observable for the list of levels */
    this.level_list = this._levels.asObservable();
    /** Observable for the currently active region */
    this.active_region = this._active_region.asObservable();
    /** Observable for the currently active building */
    this.active_building = this._active_building.asObservable();
    /** Observable for the buildings associated with the currently active region */
    this.active_buildings = (0, rxjs_1.combineLatest)([this._buildings, this._active_region]).pipe((0, operators_1.map)(function (_ref) {
      var _ref2 = _slicedToArray(_ref, 2),
        _ = _ref2[0],
        region = _ref2[1];
      return region ? _this.buildingsForRegion(region) : _this.buildings;
    }));
    /** Observable for the levels associated with the currently active building */
    this.active_levels = (0, rxjs_1.combineLatest)([this._levels, this._active_building]).pipe((0, operators_1.map)(function (_ref3) {
      var _ref4 = _slicedToArray(_ref3, 2),
        _ = _ref4[0],
        bld = _ref4[1];
      return bld ? _this.levelsForBuilding(bld) : [];
    }), (0, operators_1.shareReplay)(1));
    /** Mapping of organisation settings overrides */
    this._settings = [];
    /** Mapping of regions to settings overrides */
    this._region_settings = {};
    /** Mapping of buildings to settings overrides */
    this._building_settings = {};
    (0, ts_client_1.onlineState)().pipe((0, operators_1.first)(function (_) {
      return _;
    })).subscribe(function () {
      return setTimeout(function () {
        return _this.init();
      }, 1000);
    });
    (0, rxjs_1.combineLatest)([this.active_region, this.active_building]).pipe((0, operators_1.filter)(function (_ref5) {
      var _ref6 = _slicedToArray(_ref5, 2),
        _ = _ref6[0],
        bld = _ref6[1];
      return !!bld;
    }), (0, operators_1.debounceTime)(300)).subscribe(function () {
      return _this._updateSettingOverrides();
    });
  }
  /**
   * Get level with a matching ID
   * @param id_list List of IDs to find a match
   */
  return _createClass(OrganisationService, [{
    key: "settings",
    get: /** Mapping of organisation settings overrides */
    function get() {
      return this._settings;
    }
    /** Mapping of regions to settings overrides */
  }, {
    key: "region_settings",
    get: function get() {
      return this._region_settings;
    }
    /** Mapping of buildings to settings overrides */
  }, {
    key: "building_settings",
    get: function get() {
      return this._building_settings;
    }
    /** Mapping region settings overrides */
  }, {
    key: "regionSettings",
    value: function regionSettings() {
      var id = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';
      var region = this._active_region.getValue();
      if (!id && region) id = region === null || region === void 0 ? void 0 : region.id;
      return this._region_settings ? this._region_settings[id] || {} : {};
    }
    /** Mapping building settings overrides */
  }, {
    key: "buildingSettings",
    value: function buildingSettings() {
      var bld_id = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';
      if (!bld_id && this.building) {
        var _this$building, _this$buildings$;
        bld_id = ((_this$building = this.building) === null || _this$building === void 0 ? void 0 : _this$building.id) || ((_this$buildings$ = this.buildings[0]) === null || _this$buildings$ === void 0 ? void 0 : _this$buildings$.id);
      }
      return this._building_settings ? this._building_settings[bld_id] || {} : {};
    }
    /** Organisation data for the application */
  }, {
    key: "organisation",
    get: function get() {
      return this._organisation;
    }
    /** List of available regions */
  }, {
    key: "regions",
    get: function get() {
      return this._regions.getValue();
    }
    /** Currently active region */
  }, {
    key: "region",
    get: function get() {
      return this._active_region.getValue();
    },
    set: function set(item) {
      this.setRegion(item);
    }
  }, {
    key: "setRegion",
    value: function () {
      var _setRegion = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(item) {
        var _this$building2;
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              if (item) {
                _context.next = 2;
                break;
              }
              return _context.abrupt("return");
            case 2:
              this._active_region.next(item);
              _context.next = 5;
              return this.loadRegionData(item);
            case 5:
              this._setBuildingFromTimezone();
              if (((_this$building2 = this.building) === null || _this$building2 === void 0 ? void 0 : _this$building2.parent_id) !== item.id && this.buildingsForRegion(item).length) {
                this.building = this.buildingsForRegion(item)[0];
              } else this._updateSettingOverrides();
            case 7:
            case "end":
              return _context.stop();
          }
        }, _callee, this);
      }));
      function setRegion(_x) {
        return _setRegion.apply(this, arguments);
      }
      return setRegion;
    }() /** List of available buildings */
  }, {
    key: "buildings",
    get: function get() {
      return this._buildings.getValue() || [];
    }
    /** Currently active building */
  }, {
    key: "building",
    get: function get() {
      return this._active_building.getValue();
    },
    set: function set(bld) {
      var _this2 = this,
        _this$region;
      if (!bld) return;
      this._active_building.next(bld);
      if (!this._service.get('dont_load_metadata')) {
        this.loadBuildingData(bld).then(function () {
          return _this2._updateSettingOverrides();
        });
      }
      if (this.regions.length && ((_this$region = this.region) === null || _this$region === void 0 ? void 0 : _this$region.id) !== bld.parent_id) {
        this.region = this.regions.find(function (_) {
          return _.id === _this2.building.parent_id;
        });
      }
    }
  }, {
    key: "timezone",
    get: function get() {
      return Intl.DateTimeFormat().resolvedOptions().timeZone;
    }
  }, {
    key: "currency_code",
    get: function get() {
      var _this$building3;
      return this._service.get('app.currency') || ((_this$building3 = this.building) === null || _this$building3 === void 0 ? void 0 : _this$building3.currency) || 'USD';
    }
    /** Get binding value from the building/organisation */
  }, {
    key: "binding",
    value: function binding(name) {
      var _this$building4, _this$_organisation;
      return ((_this$building4 = this.building) === null || _this$building4 === void 0 ? void 0 : _this$building4.bindings[name]) || ((_this$_organisation = this._organisation) === null || _this$_organisation === void 0 ? void 0 : _this$_organisation.bindings[name]);
    }
    /** Get building by id */
  }, {
    key: "find",
    value: function find(id) {
      return this.buildings.find(function (i) {
        return i.id === id;
      });
    }
    /** List of available levels */
  }, {
    key: "levels",
    get: function get() {
      return this._levels.getValue();
    }
  }, {
    key: "levelWithID",
    value: function levelWithID(id_list) {
      return this.levels.find(function (lvl) {
        return id_list === null || id_list === void 0 ? void 0 : id_list.includes(lvl.id);
      });
    }
    /**
     * Get list of levels for the given building
     * @param bld Building to list levels for
     */
  }, {
    key: "levelsForBuilding",
    value: function levelsForBuilding() {
      var bld = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.building;
      return this.levels.filter(function (lvl) {
        return lvl.parent_id && lvl.parent_id === (bld === null || bld === void 0 ? void 0 : bld.id);
      });
    }
    /**
     * Get list of buildings for the given region
     * @param region Region to list buildings for
     */
  }, {
    key: "buildingsForRegion",
    value: function buildingsForRegion() {
      var region = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.region;
      return this.buildings.filter(function (bld) {
        return bld.parent_id === (region === null || region === void 0 ? void 0 : region.id);
      });
    }
    /**
     * Get list of levels for the given region
     * @param region Region to list levels for
     */
  }, {
    key: "levelsForRegion",
    value: function levelsForRegion() {
      var region = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.region;
      var bld_list = this.buildingsForRegion(region);
      return this.levels.filter(function (lvl) {
        return lvl.parent_id && bld_list.find(function (bld) {
          return bld.id === lvl.parent_id;
        });
      });
    }
  }, {
    key: "addZone",
    value: function addZone(zone) {
      if (zone.tags.includes('region')) {
        var region = new region_class_1.Region(zone);
        var regions = this._regions.getValue().filter(function (_) {
          return _.id !== region.id;
        });
        regions.push(region);
        this._regions.next(regions);
      } else if (zone.tags.includes('building')) {
        var bld = new building_class_1.Building(zone);
        var buildings = this._buildings.getValue().filter(function (_) {
          return _.id !== bld.id;
        });
        buildings.push(bld);
        buildings = buildings.sort(function (a, b) {
          return (a.name || '').localeCompare(b.name || '');
        });
        this._buildings.next(buildings);
      } else if (zone.tags.includes('level')) {
        var lvl = new level_class_1.BuildingLevel(zone);
        var levels = this._levels.getValue().filter(function (_) {
          return _.id !== lvl.id;
        });
        levels.push(lvl);
        levels = levels.sort(function (a, b) {
          return (a.name || '').localeCompare(b.name || '');
        });
        this._levels.next(levels);
      } else {
        console.warn('Unable to add zone as it is missing the required tag.', zone.id);
      }
    }
  }, {
    key: "removeZone",
    value: function removeZone(zone) {
      if (zone.tags.includes('region')) {
        var regions = this._regions.getValue().filter(function (_) {
          return _.id !== zone.id;
        });
        this._regions.next(regions);
      } else if (zone.tags.includes('building')) {
        var buildings = this._buildings.getValue().filter(function (_) {
          return _.id !== zone.id;
        });
        this._buildings.next(buildings);
      } else if (zone.tags.includes('level')) {
        var levels = this._levels.getValue().filter(function (_) {
          return _.id !== zone.id;
        });
        this._levels.next(levels);
      } else {
        console.warn('Unable to remove zone as it is missing the required tag.', zone.id);
      }
    }
  }, {
    key: "init",
    value: function () {
      var _init = _asyncToGenerator(function () {
        var _this3 = this;
        var tries = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;
        return /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {
          return _regeneratorRuntime().wrap(function _callee2$(_context2) {
            while (1) switch (_context2.prev = _context2.next) {
              case 0:
                _this3._initialised.next(false);
                _context2.next = 3;
                return _this3.load()["catch"](function (err) {
                  (0, notifications_1.notifyError)('Error loading organisation data. Retrying...');
                  setTimeout(function () {
                    return _this3.init(tries);
                  }, Math.min(10000, 300 * ++tries));
                  throw err;
                });
              case 3:
                _this3._initialised.next(true);
                if (window.debug) {
                  if (!window.application) window.application = {};
                  window.application.orgs = _this3;
                }
              case 5:
              case "end":
                return _context2.stop();
            }
          }, _callee2);
        })();
      });
      function init() {
        return _init.apply(this, arguments);
      }
      return init;
    }()
    /**
     * Initialise service data
     */
  }, {
    key: "load",
    value: (function () {
      var _load = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {
        var _this$_buildings$getV;
        var _iterator, _step, region, blds;
        return _regeneratorRuntime().wrap(function _callee3$(_context3) {
          while (1) switch (_context3.prev = _context3.next) {
            case 0:
              _context3.next = 2;
              return this.loadOrganisation();
            case 2:
              _context3.next = 4;
              return this.loadRegions();
            case 4:
              if (this._regions.getValue().length) {
                _context3.next = 12;
                break;
              }
              _context3.t0 = this._buildings;
              _context3.next = 8;
              return this.loadBuildings();
            case 8:
              _context3.t1 = _context3.sent;
              _context3.t0.next.call(_context3.t0, _context3.t1);
              _context3.next = 33;
              break;
            case 12:
              _iterator = _createForOfIteratorHelper(this._regions.getValue());
              _context3.prev = 13;
              _iterator.s();
            case 15:
              if ((_step = _iterator.n()).done) {
                _context3.next = 25;
                break;
              }
              region = _step.value;
              _context3.next = 19;
              return this.loadBuildings(region.id);
            case 19:
              blds = _context3.sent;
              if (!blds.length) {
                _context3.next = 23;
                break;
              }
              this._buildings.next(blds);
              return _context3.abrupt("break", 25);
            case 23:
              _context3.next = 15;
              break;
            case 25:
              _context3.next = 30;
              break;
            case 27:
              _context3.prev = 27;
              _context3.t2 = _context3["catch"](13);
              _iterator.e(_context3.t2);
            case 30:
              _context3.prev = 30;
              _iterator.f();
              return _context3.finish(30);
            case 33:
              _context3.next = 35;
              return this.loadSettings();
            case 35:
              if (!((_this$_buildings$getV = this._buildings.getValue()) !== null && _this$_buildings$getV !== void 0 && _this$_buildings$getV.length)) {
                (0, common_1.log)('ORG', 'Unable to find any building zones');
              }
              _context3.next = 38;
              return this.loadLevels();
            case 38:
              this._updateSettingOverrides();
            case 39:
            case "end":
              return _context3.stop();
          }
        }, _callee3, this, [[13, 27, 30, 33]]);
      }));
      function load() {
        return _load.apply(this, arguments);
      }
      return load;
    }()
    /**
     * Load organisation data for application
     */
    )
  }, {
    key: "loadOrganisation",
    value: (function () {
      var _loadOrganisation = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4() {
        var org_list, _yield$toPromise, auth, org, load_metadata, bindings;
        return _regeneratorRuntime().wrap(function _callee4$(_context4) {
          while (1) switch (_context4.prev = _context4.next) {
            case 0:
              _context4.next = 2;
              return (0, ts_client_1.queryZones)({
                tags: 'org'
              }).pipe((0, operators_1.map)(function (i) {
                return i.data;
              })).toPromise();
            case 2:
              org_list = _context4.sent;
              if (!org_list.length) {
                _context4.next = 22;
                break;
              }
              auth = (0, ts_client_1.authority)();
              org = org_list.find(function (list) {
                var _auth$config;
                return (0, ts_client_1.isMock)() || list.id === (auth === null || auth === void 0 || (_auth$config = auth.config) === null || _auth$config === void 0 ? void 0 : _auth$config.org_zone);
              }) || org_list[0];
              load_metadata = !this._service.get('dont_load_metadata');
              _context4.next = 9;
              return (load_metadata ? (0, ts_client_1.showMetadata)(org.id, 'bindings') : (0, rxjs_1.of)({
                details: {}
              })).toPromise();
            case 9:
              _context4.t1 = _yield$toPromise = _context4.sent;
              _context4.t0 = _context4.t1 === null;
              if (_context4.t0) {
                _context4.next = 13;
                break;
              }
              _context4.t0 = _yield$toPromise === void 0;
            case 13:
              if (!_context4.t0) {
                _context4.next = 17;
                break;
              }
              _context4.t2 = void 0;
              _context4.next = 18;
              break;
            case 17:
              _context4.t2 = _yield$toPromise.details;
            case 18:
              bindings = _context4.t2;
              this._organisation = new organisation_class_1.Organisation(_objectSpread(_objectSpread({}, org), {}, {
                bindings: bindings
              }));
              _context4.next = 24;
              break;
            case 22:
              (0, common_1.log)('ORG', 'Unable to find organisation');
              this._router.navigate(['/misconfigured']);
            case 24:
            case "end":
              return _context4.stop();
          }
        }, _callee4, this);
      }));
      function loadOrganisation() {
        return _loadOrganisation.apply(this, arguments);
      }
      return loadOrganisation;
    }()
    /**
     * Load region data for the organisation
     */
    )
  }, {
    key: "loadRegions",
    value: (function () {
      var _loadRegions = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee5() {
        var _this$_organisation2;
        var list;
        return _regeneratorRuntime().wrap(function _callee5$(_context5) {
          while (1) switch (_context5.prev = _context5.next) {
            case 0:
              _context5.next = 2;
              return (0, ts_client_1.queryZones)({
                tags: 'region',
                parent_id: ((_this$_organisation2 = this._organisation) === null || _this$_organisation2 === void 0 ? void 0 : _this$_organisation2.id) || '',
                limit: 500
              }).pipe((0, operators_1.map)(function (i) {
                return i.data.map(function (_) {
                  return new region_class_1.Region(_);
                });
              }), (0, operators_1.catchError)(function () {
                return (0, rxjs_1.of)([]);
              })).toPromise();
            case 2:
              list = _context5.sent;
              this._regions.next(list);
            case 4:
            case "end":
              return _context5.stop();
          }
        }, _callee5, this);
      }));
      function loadRegions() {
        return _loadRegions.apply(this, arguments);
      }
      return loadRegions;
    }())
  }, {
    key: "loadRegionData",
    value: function () {
      var _loadRegionData = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee6(region) {
        var load_metadata, settings_request, bindings_request, _yield$Promise$all, _yield$Promise$all2, settings, bindings, buildings;
        return _regeneratorRuntime().wrap(function _callee6$(_context6) {
          while (1) switch (_context6.prev = _context6.next) {
            case 0:
              if (!this._loaded_data[region.id]) {
                _context6.next = 2;
                break;
              }
              return _context6.abrupt("return");
            case 2:
              load_metadata = !this._service.get('dont_load_metadata');
              settings_request = load_metadata ? (0, ts_client_1.showMetadata)(region.id, this.app_key) : (0, rxjs_1.of)(new ts_client_1.PlaceMetadata());
              bindings_request = load_metadata ? (0, ts_client_1.showMetadata)(region.id, 'bindings') : (0, rxjs_1.of)(new ts_client_1.PlaceMetadata());
              _context6.next = 7;
              return Promise.all([settings_request.pipe((0, operators_1.map)(function (_) {
                return _ === null || _ === void 0 ? void 0 : _.details;
              })).toPromise(), bindings_request.pipe((0, operators_1.map)(function (_) {
                return _ === null || _ === void 0 ? void 0 : _.details;
              })).toPromise(), this.loadBuildings(region.id)]);
            case 7:
              _yield$Promise$all = _context6.sent;
              _yield$Promise$all2 = _slicedToArray(_yield$Promise$all, 3);
              settings = _yield$Promise$all2[0];
              bindings = _yield$Promise$all2[1];
              buildings = _yield$Promise$all2[2];
              this._buildings.next((0, common_1.unique)([].concat(_toConsumableArray(this._buildings.getValue()), _toConsumableArray(buildings)), 'id'));
              this._loaded_data[region.id] = true;
              region.bindings = bindings;
              this._region_settings[region.id] = settings;
            case 16:
            case "end":
              return _context6.stop();
          }
        }, _callee6, this);
      }));
      function loadRegionData(_x2) {
        return _loadRegionData.apply(this, arguments);
      }
      return loadRegionData;
    }()
    /**
     * Load buildings data for the organisation
     */
  }, {
    key: "loadBuildings",
    value: (function () {
      var _loadBuildings = _asyncToGenerator(function () {
        var _this$_organisation3;
        var parent_id = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : (_this$_organisation3 = this._organisation) === null || _this$_organisation3 === void 0 ? void 0 : _this$_organisation3.id;
        return /*#__PURE__*/_regeneratorRuntime().mark(function _callee7() {
          var building_list;
          return _regeneratorRuntime().wrap(function _callee7$(_context7) {
            while (1) switch (_context7.prev = _context7.next) {
              case 0:
                _context7.next = 2;
                return (0, ts_client_1.queryZones)({
                  tags: 'building',
                  parent_id: parent_id,
                  limit: 500
                }).pipe((0, operators_1.map)(function (i) {
                  return i.data.map(function (_) {
                    return new building_class_1.Building(_);
                  });
                })).toPromise();
              case 2:
                building_list = _context7.sent;
                return _context7.abrupt("return", building_list);
              case 4:
              case "end":
                return _context7.stop();
            }
          }, _callee7);
        })();
      });
      function loadBuildings() {
        return _loadBuildings.apply(this, arguments);
      }
      return loadBuildings;
    }())
  }, {
    key: "loadBuildingData",
    value: function () {
      var _loadBuildingData = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee8(bld) {
        var _yield$Promise$all3, _yield$Promise$all4, settings, bindings, booking_rules, driver_settings;
        return _regeneratorRuntime().wrap(function _callee8$(_context8) {
          while (1) switch (_context8.prev = _context8.next) {
            case 0:
              if (!(!bld || this._loaded_data[bld.id])) {
                _context8.next = 2;
                break;
              }
              return _context8.abrupt("return");
            case 2:
              _context8.next = 4;
              return Promise.all([(0, ts_client_1.showMetadata)(bld.id, this.app_key).pipe((0, operators_1.map)(function (_) {
                return _ === null || _ === void 0 ? void 0 : _.details;
              }), (0, operators_1.catchError)(function () {
                return (0, rxjs_1.of)({});
              })).toPromise(), (0, ts_client_1.showMetadata)(bld.id, 'bindings').pipe((0, operators_1.map)(function (_) {
                return _ === null || _ === void 0 ? void 0 : _.details;
              }), (0, operators_1.catchError)(function () {
                return (0, rxjs_1.of)({});
              })).toPromise(), (0, ts_client_1.showMetadata)(bld.id, 'booking_rules').pipe((0, operators_1.map)(function (_) {
                return _ === null || _ === void 0 ? void 0 : _.details;
              }), (0, operators_1.catchError)(function () {
                return (0, rxjs_1.of)({});
              })).toPromise(), (0, ts_client_1.querySettings)({
                parent_id: bld.id
              }).pipe((0, operators_1.catchError)(function () {
                return (0, rxjs_1.of)({
                  data: {}
                });
              }), (0, operators_1.map)(function (_) {
                try {
                  return yaml.load((_ === null || _ === void 0 ? void 0 : _.data.find(function (_) {
                    return _.encryption_level === ts_client_1.EncryptionLevel.None;
                  })) || {
                    settings_string: ''
                  });
                } catch (_unused) {
                  return {};
                }
              })).toPromise()]);
            case 4:
              _yield$Promise$all3 = _context8.sent;
              _yield$Promise$all4 = _slicedToArray(_yield$Promise$all3, 4);
              settings = _yield$Promise$all4[0];
              bindings = _yield$Promise$all4[1];
              booking_rules = _yield$Promise$all4[2];
              driver_settings = _yield$Promise$all4[3];
              this._building_settings[bld.id] = _objectSpread(_objectSpread({}, driver_settings || {}), settings || {});
              bld.bindings = bindings;
              bld.booking_rules = booking_rules;
              this._loaded_data[bld.id] = true;
              this._updateSettingOverrides();
            case 15:
            case "end":
              return _context8.stop();
          }
        }, _callee8, this);
      }));
      function loadBuildingData(_x3) {
        return _loadBuildingData.apply(this, arguments);
      }
      return loadBuildingData;
    }()
    /**
     * Load levels data for the buildings
     */
  }, {
    key: "loadLevels",
    value: (function () {
      var _loadLevels = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee9() {
        var _level_list;
        var level_list, levels;
        return _regeneratorRuntime().wrap(function _callee9$(_context9) {
          while (1) switch (_context9.prev = _context9.next) {
            case 0:
              _context9.next = 2;
              return (0, ts_client_1.queryZones)({
                tags: 'level',
                authority_id: (0, ts_client_1.authority)().id,
                limit: 2500
              }).pipe((0, operators_1.map)(function (i) {
                return i.data;
              })).toPromise();
            case 2:
              level_list = _context9.sent;
              level_list = level_list.filter(function (_) {
                return _.parent_id;
              });
              if (!((_level_list = level_list) !== null && _level_list !== void 0 && _level_list.length)) {
                this._router.navigate(['/misconfigured']);
              }
              levels = level_list.map(function (lvl) {
                return new level_class_1.BuildingLevel(lvl);
              });
              levels = levels.sort(function (a, b) {
                return (a.name || '').localeCompare(b.name || '');
              });
              this._levels.next(levels);
            case 8:
            case "end":
              return _context9.stop();
          }
        }, _callee9, this);
      }));
      function loadLevels() {
        return _loadLevels.apply(this, arguments);
      }
      return loadLevels;
    }())
  }, {
    key: "available_room_configs",
    get: function get() {
      return this.buildings.map(function (m) {
        return _toConsumableArray(m.room_configurations);
      }).reduce(function (prev, curr) {
        return prev.concat(curr);
      }, []).sort(function (a, b) {
        return a.name.localeCompare(b.name);
      });
    }
  }, {
    key: "loadSettings",
    value: function () {
      var _loadSettings = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee10() {
        var load_metadata, _yield$toPromise2, _this$_organisation4, _yield$toPromise3, _this$_organisation5, app_settings, global_settings;
        return _regeneratorRuntime().wrap(function _callee10$(_context10) {
          while (1) switch (_context10.prev = _context10.next) {
            case 0:
              if (this._organisation) {
                _context10.next = 2;
                break;
              }
              return _context10.abrupt("return");
            case 2:
              load_metadata = !this._service.get('dont_load_metadata');
              if (!load_metadata) {
                _context10.next = 29;
                break;
              }
              _context10.next = 6;
              return (0, ts_client_1.showMetadata)((_this$_organisation4 = this._organisation) === null || _this$_organisation4 === void 0 ? void 0 : _this$_organisation4.id, this.app_key).toPromise();
            case 6:
              _context10.t1 = _yield$toPromise2 = _context10.sent;
              _context10.t0 = _context10.t1 === null;
              if (_context10.t0) {
                _context10.next = 10;
                break;
              }
              _context10.t0 = _yield$toPromise2 === void 0;
            case 10:
              if (!_context10.t0) {
                _context10.next = 14;
                break;
              }
              _context10.t2 = void 0;
              _context10.next = 15;
              break;
            case 14:
              _context10.t2 = _yield$toPromise2.details;
            case 15:
              app_settings = _context10.t2;
              _context10.next = 18;
              return (0, ts_client_1.showMetadata)((_this$_organisation5 = this._organisation) === null || _this$_organisation5 === void 0 ? void 0 : _this$_organisation5.id, 'settings').toPromise();
            case 18:
              _context10.t4 = _yield$toPromise3 = _context10.sent;
              _context10.t3 = _context10.t4 === null;
              if (_context10.t3) {
                _context10.next = 22;
                break;
              }
              _context10.t3 = _yield$toPromise3 === void 0;
            case 22:
              if (!_context10.t3) {
                _context10.next = 26;
                break;
              }
              _context10.t5 = void 0;
              _context10.next = 27;
              break;
            case 26:
              _context10.t5 = _yield$toPromise3.details;
            case 27:
              global_settings = _context10.t5;
              this._settings = [global_settings, app_settings];
            case 29:
              this._service.overrides = _toConsumableArray(this._settings);
              _context10.next = 32;
              return this._initialiseActiveBuilding();
            case 32:
              this._updateSettingOverrides();
            case 33:
            case "end":
              return _context10.stop();
          }
        }, _callee10, this);
      }));
      function loadSettings() {
        return _loadSettings.apply(this, arguments);
      }
      return loadSettings;
    }() /** Save building selection */
  }, {
    key: "saveBuilding",
    value: function saveBuilding(id) {
      var _this$_buildings$getV2;
      var region_id = (_this$_buildings$getV2 = this._buildings.getValue().find(function (bld) {
        return bld.id === id;
      })) === null || _this$_buildings$getV2 === void 0 ? void 0 : _this$_buildings$getV2.parent_id;
      if (region_id && region_id !== this._organisation.id) {
        sessionStorage.setItem("PLACEOS.region", region_id);
      }
      sessionStorage.setItem("PLACEOS.building", id);
    }
  }, {
    key: "_initialiseActiveBuilding",
    value: function _initialiseActiveBuilding() {
      var _this4 = this;
      return new Promise(function (resolve) {
        var _this4$building3;
        var id = sessionStorage.getItem("PLACEOS.building");
        if (id && _this4.buildings.find(function (bld) {
          return bld.id === id;
        })) {
          _this4.building = _this4.buildings.find(function (bld) {
            return bld.id === id;
          });
          return resolve();
        }
        var use_location = !!_this4._service.get('app.use_geolocation');
        if (use_location && 'geolocation' in navigator) {
          navigator.geolocation.getCurrentPosition(function (position) {
            var _this4$building;
            var _position$coords = position.coords,
              latitude = _position$coords.latitude,
              longitude = _position$coords.longitude;
            var closest_bld = null;
            var _iterator2 = _createForOfIteratorHelper(_this4.buildings),
              _step2;
            try {
              for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
                var bld = _step2.value;
                if (!bld.location || bld.location === '0,0') continue;
                if (!closest_bld) closest_bld = bld;else {
                  var _split = (closest_bld.location || '0,0').split(','),
                    _split2 = _slicedToArray(_split, 2),
                    c_lat = _split2[0],
                    c_long = _split2[1];
                  var _split3 = (bld.location || '0,0').split(','),
                    _split4 = _slicedToArray(_split3, 2),
                    b_lat = _split4[0],
                    b_long = _split4[1];
                  var b_dist = Math.sqrt(Math.pow(latitude - +b_lat, 2) + Math.pow(longitude - +b_long, 2));
                  var c_dist = Math.sqrt(Math.pow(latitude - +c_lat, 2) + Math.pow(longitude - +c_long, 2));
                  if (b_dist < c_dist) closest_bld = bld;
                }
              }
            } catch (err) {
              _iterator2.e(err);
            } finally {
              _iterator2.f();
            }
            if (closest_bld) _this4.building = closest_bld;
            if (!((_this4$building = _this4.building) !== null && _this4$building !== void 0 && _this4$building.id)) _this4._setDefaultBuilding();
            resolve();
          }, function () {
            var _this4$building2;
            if (!((_this4$building2 = _this4.building) !== null && _this4$building2 !== void 0 && _this4$building2.id)) _this4._setDefaultBuilding();
            resolve();
          });
        } else if (!((_this4$building3 = _this4.building) !== null && _this4$building3 !== void 0 && _this4$building3.id)) {
          _this4._setDefaultBuilding();
          resolve();
        }
      });
    }
  }, {
    key: "_setDefaultBuilding",
    value: function () {
      var _setDefaultBuilding2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee11() {
        var region_id, bld_id;
        return _regeneratorRuntime().wrap(function _callee11$(_context11) {
          while (1) switch (_context11.prev = _context11.next) {
            case 0:
              if (this.buildings.length) {
                _context11.next = 2;
                break;
              }
              return _context11.abrupt("return");
            case 2:
              region_id = sessionStorage.getItem("PLACEOS.region");
              _context11.next = 5;
              return region_id ? this.setRegion(this._regions.getValue().find(function (_) {
                return _.id === region_id;
              })) : this._setRegionFromTimezone();
            case 5:
              this._setBuildingFromTimezone();
              if (!this.building) {
                _context11.next = 8;
                break;
              }
              return _context11.abrupt("return");
            case 8:
              bld_id = this._service.get('app.default_building');
              if (bld_id) {
                this.building = this.buildings.find(function (_ref7) {
                  var id = _ref7.id;
                  return id === bld_id;
                });
              }
              if (!this.building) this.building = this.buildings[0];
            case 11:
            case "end":
              return _context11.stop();
          }
        }, _callee11, this);
      }));
      function _setDefaultBuilding() {
        return _setDefaultBuilding2.apply(this, arguments);
      }
      return _setDefaultBuilding;
    }()
  }, {
    key: "_setRegionFromTimezone",
    value: function () {
      var _setRegionFromTimezone2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee12() {
        var region_list, timezone, _iterator3, _step3, region, tz_start, _iterator4, _step4, _region;
        return _regeneratorRuntime().wrap(function _callee12$(_context12) {
          while (1) switch (_context12.prev = _context12.next) {
            case 0:
              region_list = this.regions;
              timezone = this.timezone;
              _iterator3 = _createForOfIteratorHelper(region_list);
              _context12.prev = 3;
              _iterator3.s();
            case 5:
              if ((_step3 = _iterator3.n()).done) {
                _context12.next = 13;
                break;
              }
              region = _step3.value;
              if (!(region.timezone === timezone)) {
                _context12.next = 11;
                break;
              }
              _context12.next = 10;
              return this.setRegion(region);
            case 10:
              return _context12.abrupt("return", _context12.sent);
            case 11:
              _context12.next = 5;
              break;
            case 13:
              _context12.next = 18;
              break;
            case 15:
              _context12.prev = 15;
              _context12.t0 = _context12["catch"](3);
              _iterator3.e(_context12.t0);
            case 18:
              _context12.prev = 18;
              _iterator3.f();
              return _context12.finish(18);
            case 21:
              tz_start = timezone.split('/')[0];
              _iterator4 = _createForOfIteratorHelper(region_list);
              _context12.prev = 23;
              _iterator4.s();
            case 25:
              if ((_step4 = _iterator4.n()).done) {
                _context12.next = 33;
                break;
              }
              _region = _step4.value;
              if (!_region.timezone.startsWith(tz_start)) {
                _context12.next = 31;
                break;
              }
              _context12.next = 30;
              return this.setRegion(_region);
            case 30:
              return _context12.abrupt("return", _context12.sent);
            case 31:
              _context12.next = 25;
              break;
            case 33:
              _context12.next = 38;
              break;
            case 35:
              _context12.prev = 35;
              _context12.t1 = _context12["catch"](23);
              _iterator4.e(_context12.t1);
            case 38:
              _context12.prev = 38;
              _iterator4.f();
              return _context12.finish(38);
            case 41:
            case "end":
              return _context12.stop();
          }
        }, _callee12, this, [[3, 15, 18, 21], [23, 35, 38, 41]]);
      }));
      function _setRegionFromTimezone() {
        return _setRegionFromTimezone2.apply(this, arguments);
      }
      return _setRegionFromTimezone;
    }()
  }, {
    key: "_setBuildingFromTimezone",
    value: function _setBuildingFromTimezone() {
      var _this5 = this;
      var bld_list = this.buildings.filter(function (bld) {
        var _this5$region;
        return !_this5.region || bld.parent_id === ((_this5$region = _this5.region) === null || _this5$region === void 0 ? void 0 : _this5$region.id);
      });
      var timezone = this.timezone;
      var _iterator5 = _createForOfIteratorHelper(bld_list),
        _step5;
      try {
        for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {
          var bld = _step5.value;
          if (bld.timezone === timezone) {
            this.building = bld;
            return;
          }
        }
      } catch (err) {
        _iterator5.e(err);
      } finally {
        _iterator5.f();
      }
      var tz_start = timezone.split('/')[0];
      var _iterator6 = _createForOfIteratorHelper(bld_list),
        _step6;
      try {
        for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {
          var _bld = _step6.value;
          if (_bld.timezone.startsWith(tz_start)) {
            this.building = _bld;
            return;
          }
        }
      } catch (err) {
        _iterator6.e(err);
      } finally {
        _iterator6.f();
      }
    }
  }, {
    key: "_updateSettingOverrides",
    value: function _updateSettingOverrides() {
      var _this6 = this;
      setTimeout(function () {
        var _this6$building, _this6$region;
        return _this6._service.overrides = [_this6.buildingSettings((_this6$building = _this6.building) === null || _this6$building === void 0 ? void 0 : _this6$building.id), _this6.regionSettings((_this6$region = _this6.region) === null || _this6$region === void 0 ? void 0 : _this6$region.id)].concat(_toConsumableArray(_this6._settings));
      }, 300);
    }
  }]);
}();
_OrganisationService = OrganisationService;
_OrganisationService.ɵfac = function OrganisationService_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _OrganisationService)(i0.ɵɵinject(i1.SettingsService), i0.ɵɵinject(i2.Router));
};
_OrganisationService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({
  token: _OrganisationService,
  factory: _OrganisationService.ɵfac,
  providedIn: 'root'
});
exports.OrganisationService = OrganisationService;

/***/ }),

/***/ 58772:
/*!*************************************************************!*\
  !*** ./libs/organisation/src/lib/organisation.utilities.ts ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.generateMockOrganisation = generateMockOrganisation;
exports.moduleFromMetadata = moduleFromMetadata;
var ts_client_1 = __webpack_require__(/*! @placeos/ts-client */ 35713);
var building_utilities_1 = __webpack_require__(/*! ./building.utilities */ 41274);
var ORG_COUNT = 0;
function generateMockOrganisation() {
  return {
    id: "zone_org-".concat(ORG_COUNT++),
    name: "Organisation ".concat(ORG_COUNT),
    buildings: Array(3).fill(0).map(function (i) {
      return (0, building_utilities_1.generateMockBuilding)();
    }),
    settings: {
      test: {
        nested: {
          org: true
        }
      }
    }
  };
}
function moduleFromMetadata(value, default_module) {
  if (!value) return null;
  return value instanceof Object ? (0, ts_client_1.getModule)(value.system_id, value.module || default_module) : (0, ts_client_1.getModule)(value, default_module);
}

/***/ }),

/***/ 13466:
/*!***************************************************!*\
  !*** ./libs/organisation/src/lib/region.class.ts ***!
  \***************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.Region = void 0;
var Region = /*#__PURE__*/_createClass(function Region(_data) {
  _classCallCheck(this, Region);
  this.id = _data.id || '';
  this.name = _data.name || '';
  this.display_name = _data.display_name || '';
  this.timezone = _data.timezone || '';
  this.images = _data.images || [];
  this.bindings = _data.bindings || {};
  this.address = _data.address || '';
});
exports.Region = Region;

/***/ }),

/***/ 99831:
/*!************************************!*\
  !*** ./libs/payments/src/index.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var tslib_1 = __webpack_require__(/*! tslib */ 24398);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/payments.module */ 32460), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/payments.service */ 34525), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/card-input-field.component */ 49900), exports);

/***/ }),

/***/ 49900:
/*!*************************************************************!*\
  !*** ./libs/payments/src/lib/card-input-field.component.ts ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _taggedTemplateLiteral = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js */ 9959)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _callSuper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/callSuper.js */ 8513)["default"]);
var _inherits = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/inherits.js */ 58160)["default"]);
var _CardInputFieldComponent, _templateObject, _templateObject2, _templateObject3, _templateObject4, _templateObject5, _templateObject6, _templateObject7;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.CardInputFieldComponent = void 0;
var common_1 = __webpack_require__(/*! @angular/common */ 60316);
var core_1 = __webpack_require__(/*! @angular/core */ 37580);
var forms_1 = __webpack_require__(/*! @angular/forms */ 34456);
var common_2 = __webpack_require__(/*! @placeos/common */ 22797);
var date_fns_1 = __webpack_require__(/*! date-fns */ 25773);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @angular/common */ 60316);
var i2 = __webpack_require__(/*! @angular/forms */ 34456);
var i3 = __webpack_require__(/*! @angular/material/form-field */ 24950);
var i4 = __webpack_require__(/*! @angular/material/input */ 95541);
var i5 = __webpack_require__(/*! @angular/material/select */ 25175);
var i6 = __webpack_require__(/*! @angular/material/core */ 74646);
var _c0 = ["input"];
function CardInputFieldComponent_img_9_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelement(0, "img", 27);
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵproperty("src", "assets/icons/" + ctx_r1.card_type + ".svg", i0.ɵɵsanitizeUrl);
  }
}
function CardInputFieldComponent_mat_option_23_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "mat-option", 28);
    i0.ɵɵtext(1);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var item_r3 = ctx.$implicit;
    i0.ɵɵproperty("value", item_r3[0]);
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate2(" ", item_r3[1], " (", item_r3[0], ") ");
  }
}
function CardInputFieldComponent_mat_option_31_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "mat-option", 28);
    i0.ɵɵtext(1);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var item_r4 = ctx.$implicit;
    i0.ɵɵproperty("value", item_r4);
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate(item_r4);
  }
}
var BLANK_CARD = {
  card_number: '                ',
  cardholder: '',
  cvv: ''
};
var DATE_PIPE = new common_1.DatePipe('en-us', '');
var CardInputFieldComponent = /*#__PURE__*/function (_common_2$AsyncHandle) {
  function CardInputFieldComponent() {
    var _this;
    _classCallCheck(this, CardInputFieldComponent);
    _this = _callSuper(this, CardInputFieldComponent, arguments);
    _this.details = new forms_1.FormGroup({
      card_number: new forms_1.FormControl(Array(16).fill('X').join()),
      cardholder: new forms_1.FormControl(''),
      exp_month: new forms_1.FormControl(''),
      exp_year: new forms_1.FormControl(''),
      cvv: new forms_1.FormControl('', [forms_1.Validators.minLength(3), forms_1.Validators.maxLength(4)])
    });
    _this.disabled = false;
    _this.months = Array(12).fill(0).map(function (_, idx) {
      return [DATE_PIPE.transform((0, date_fns_1.setMonth)(Date.now(), idx), 'MM'), DATE_PIPE.transform((0, date_fns_1.setMonth)(Date.now(), idx), 'MMM')];
    });
    _this.years = Array(12).fill(0).map(function (_, idx) {
      return DATE_PIPE.transform((0, date_fns_1.addYears)(Date.now(), idx), 'yyyy');
    });
    _this.digits = Array(16).fill(0);
    _this._index = 0;
    _this.registerOnChange = function (fn) {
      return _this._onChange = fn;
    };
    _this.registerOnTouched = function (fn) {
      return _this._onTouch = fn;
    };
    _this.setDisabledState = function (s) {
      return _this.disabled = s;
    };
    return _this;
  }
  _inherits(CardInputFieldComponent, _common_2$AsyncHandle);
  return _createClass(CardInputFieldComponent, [{
    key: "is_amex",
    get: function get() {
      var _this$details$value;
      var no = ((_this$details$value = this.details.value) === null || _this$details$value === void 0 ? void 0 : _this$details$value.card_number) || '';
      return no.startsWith('3');
    }
  }, {
    key: "card_type",
    get: function get() {
      var _this$details$value2;
      var no = ((_this$details$value2 = this.details.value) === null || _this$details$value2 === void 0 ? void 0 : _this$details$value2.card_number) || '';
      if (no.startsWith('3')) return 'amex';
      if (no.startsWith('4')) return 'visa';
      if (no.startsWith('5')) return 'mastercard';
      return '';
    }
  }, {
    key: "card_display",
    get: function get() {
      var _this$details$value3;
      var no = ((_this$details$value3 = this.details.value) === null || _this$details$value3 === void 0 ? void 0 : _this$details$value3.card_number) || '';
      if (this.card_focused) no = no.substring(0, this._index) + '⯐' + no.substring(this._index + 1);
      return this.is_amex ? "".concat(no.substring(0, 4), "-").concat(no.substring(4, 10), "-").concat(no.substring(10)) : "".concat(no.substring(0, 4), "-").concat(no.substring(4, 8), "-").concat(no.substring(8, 12), "-").concat(no.substring(12));
    }
  }, {
    key: "card_focused",
    get: function get() {
      return document.activeElement === this._input_el.nativeElement || document.activeElement === this._input_el.nativeElement.parentElement;
    }
  }, {
    key: "ngOnInit",
    value: function ngOnInit() {
      var _this2 = this;
      this.subscription('changes', this.details.valueChanges.subscribe(function (v) {
        return _this2.timeout('update', function () {
          return _this2.setValue(_this2.details.getRawValue());
        });
      }));
    }
  }, {
    key: "focusInput",
    value: function focusInput() {
      this._input_el.nativeElement.focus();
      this._index = this._input_el.nativeElement.selectionStart || 0;
    }
  }, {
    key: "onInput",
    value: function onInput(event) {
      if (!event || !this.card_focused) return;
      var idx = this._index;
      if (idx < 0 || idx > 16) return;
      var card_number = this.details.value.card_number;
      if ((event.code.startsWith('Digit') || event.code.startsWith('Numpad')) && idx < (this.is_amex ? 15 : 16)) {
        card_number = card_number.substring(0, idx) + event.key + card_number.substring(idx + 1);
        this.details.patchValue({
          card_number: card_number
        });
        this._focusChange(idx, 1);
      } else if (event.code === 'Backspace' && idx > 0) {
        var _card_number = this.details.value.card_number;
        _card_number = _card_number.substring(0, idx) + ' ' + _card_number.substring(idx + 1);
        this.details.patchValue({
          card_number: _card_number
        });
        this._focusChange(idx, -1);
      } else if (event.code === 'ArrowLeft') {
        this._focusChange(idx, -1);
      } else if (event.code === 'ArrowRight' && card_number[idx] !== ' ') {
        this._focusChange(idx, 1);
      }
    }
  }, {
    key: "_focusChange",
    value: function _focusChange(idx, dir) {
      this._index = Math.min(16, Math.max(0, idx + dir));
    }
    /**
     * Update the form field value
     * @param new_value New value to set on the form field
     */
  }, {
    key: "setValue",
    value: function setValue(new_value) {
      if (this._onChange) this._onChange(new_value);
    }
    /**
     * Update local value when form control value is changed
     * @param value The new value for the component
     */
  }, {
    key: "writeValue",
    value: function writeValue(value) {
      this.details.patchValue(value || BLANK_CARD);
    }
  }]);
}(common_2.AsyncHandler);
_CardInputFieldComponent = CardInputFieldComponent;
_CardInputFieldComponent.ɵfac = /*@__PURE__*/function () {
  var ɵCardInputFieldComponent_BaseFactory;
  return function CardInputFieldComponent_Factory(__ngFactoryType__) {
    return (ɵCardInputFieldComponent_BaseFactory || (ɵCardInputFieldComponent_BaseFactory = i0.ɵɵgetInheritedFactory(_CardInputFieldComponent)))(__ngFactoryType__ || _CardInputFieldComponent);
  };
}();
_CardInputFieldComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _CardInputFieldComponent,
  selectors: [["card-input-field"]],
  viewQuery: function CardInputFieldComponent_Query(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵviewQuery(_c0, 7);
    }
    if (rf & 2) {
      var _t;
      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx._input_el = _t.first);
    }
  },
  features: [i0.ɵɵProvidersFeature([{
    provide: forms_1.NG_VALUE_ACCESSOR,
    /* istanbul ignore next */
    useExisting: (0, core_1.forwardRef)(function () {
      return _CardInputFieldComponent;
    }),
    multi: true
  }]), i0.ɵɵInheritDefinitionFeature],
  decls: 41,
  vars: 6,
  consts: function consts() {
    var i18n_0;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_1085309836704157602$$LIBS_PAYMENTS_SRC_LIB_CARD_INPUT_FIELD_COMPONENT_TS_0 = goog.getMsg("Card Number");
      i18n_0 = MSG_EXTERNAL_1085309836704157602$$LIBS_PAYMENTS_SRC_LIB_CARD_INPUT_FIELD_COMPONENT_TS_0;
    } else {
      i18n_0 = $localize(_templateObject || (_templateObject = _taggedTemplateLiteral([":\u241Fc51ae86488666fc691751bf76d88811b37505c00\u241F1085309836704157602:Card Number"])));
    }
    var i18n_1;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_4148395957159016439$$LIBS_PAYMENTS_SRC_LIB_CARD_INPUT_FIELD_COMPONENT_TS_1 = goog.getMsg("Name on Card");
      i18n_1 = MSG_EXTERNAL_4148395957159016439$$LIBS_PAYMENTS_SRC_LIB_CARD_INPUT_FIELD_COMPONENT_TS_1;
    } else {
      i18n_1 = $localize(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([":\u241Fcc927e92ada1f250e8c5ea7884d0b1294be56635\u241F4148395957159016439:Name on Card"])));
    }
    var i18n_2;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_598947732489453783$$LIBS_PAYMENTS_SRC_LIB_CARD_INPUT_FIELD_COMPONENT_TS_2 = goog.getMsg("Cardholder name is required");
      i18n_2 = MSG_EXTERNAL_598947732489453783$$LIBS_PAYMENTS_SRC_LIB_CARD_INPUT_FIELD_COMPONENT_TS_2;
    } else {
      i18n_2 = $localize(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([":\u241F6402e768a1ac6a5f86edf0daccf05b3d9d63f465\u241F598947732489453783:Cardholder name is required"])));
    }
    var i18n_3;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_7043163776563263056$$LIBS_PAYMENTS_SRC_LIB_CARD_INPUT_FIELD_COMPONENT_TS_3 = goog.getMsg("Expiry Month");
      i18n_3 = MSG_EXTERNAL_7043163776563263056$$LIBS_PAYMENTS_SRC_LIB_CARD_INPUT_FIELD_COMPONENT_TS_3;
    } else {
      i18n_3 = $localize(_templateObject4 || (_templateObject4 = _taggedTemplateLiteral([":\u241F48b5a0234304bd29aeaab8f2793b8245517a7102\u241F7043163776563263056:Expiry Month"])));
    }
    var i18n_4;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_1539914853150581191$$LIBS_PAYMENTS_SRC_LIB_CARD_INPUT_FIELD_COMPONENT_TS_4 = goog.getMsg("Expiry month is required");
      i18n_4 = MSG_EXTERNAL_1539914853150581191$$LIBS_PAYMENTS_SRC_LIB_CARD_INPUT_FIELD_COMPONENT_TS_4;
    } else {
      i18n_4 = $localize(_templateObject5 || (_templateObject5 = _taggedTemplateLiteral([":\u241F28b0c8359cc099ef3dcaddac4c1357d45751ac9d\u241F1539914853150581191:Expiry month is required"])));
    }
    var i18n_5;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_6698859483517525075$$LIBS_PAYMENTS_SRC_LIB_CARD_INPUT_FIELD_COMPONENT_TS_5 = goog.getMsg("Expiry year is required");
      i18n_5 = MSG_EXTERNAL_6698859483517525075$$LIBS_PAYMENTS_SRC_LIB_CARD_INPUT_FIELD_COMPONENT_TS_5;
    } else {
      i18n_5 = $localize(_templateObject6 || (_templateObject6 = _taggedTemplateLiteral([":\u241F84a41ff903da0de49f3172fef0d0528701065d6e\u241F6698859483517525075:Expiry year is required"])));
    }
    var i18n_6;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_203544573091191988$$LIBS_PAYMENTS_SRC_LIB_CARD_INPUT_FIELD_COMPONENT_TS_6 = goog.getMsg("Invalid security code");
      i18n_6 = MSG_EXTERNAL_203544573091191988$$LIBS_PAYMENTS_SRC_LIB_CARD_INPUT_FIELD_COMPONENT_TS_6;
    } else {
      i18n_6 = $localize(_templateObject7 || (_templateObject7 = _taggedTemplateLiteral([":\u241F11a0ab2762b4af425c3d20aa211a751e4785e04e\u241F203544573091191988:Invalid security code"])));
    }
    return [["input", ""], i18n_0, i18n_1, i18n_2, i18n_3, i18n_4, i18n_5, i18n_6, [3, "keyup", "formGroup"], [1, "flex", "flex-col"], ["for", "card-number"], ["tabindex", "0", 1, "border", "border-base-200", "p-2", "h-12", "mb-4", "focus-within:shadow", "focus-within:border-base-200", "flex", "items-center", "font-mono", "w-full", "rounded", "relative", 3, "focus"], [1, "flex-1"], ["type", "tel", "maxlength", "17", 1, "hidden", "absolute", 3, "keydown", "value"], ["class", "h-8", 3, "src", 4, "ngIf"], [1, "flex", "flex-col", "flex-1"], ["for", "cardholder"], ["appearance", "outline"], ["name", "cardholder", "matInput", "", "placeholder", "Mr John Smith", "formControlName", "cardholder"], [1, "flex", "items-center", "space-x-2"], [1, "flex", "flex-col", "flex-1", "w-1/4"], ["placeholder", "MM", "formControlName", "exp_month"], [3, "value", 4, "ngFor", "ngForOf"], ["placeholder", "YYYY", "formControlName", "exp_year"], ["for", "cvv"], ["appearance", "outline", 1, "w-20"], ["name", "cvv", "matInput", "", "formControlName", "cvv", "maxlength", "4"], [1, "h-8", 3, "src"], [3, "value"]];
  },
  template: function CardInputFieldComponent_Template(rf, ctx) {
    if (rf & 1) {
      var _r1 = i0.ɵɵgetCurrentView();
      i0.ɵɵelementStart(0, "form", 8);
      i0.ɵɵlistener("keyup", function CardInputFieldComponent_Template_form_keyup_0_listener($event) {
        i0.ɵɵrestoreView(_r1);
        return i0.ɵɵresetView(ctx.onInput($event));
      }, false, i0.ɵɵresolveWindow);
      i0.ɵɵelementStart(1, "div", 9)(2, "label", 10);
      i0.ɵɵi18n(3, 1);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(4, "div", 11);
      i0.ɵɵlistener("focus", function CardInputFieldComponent_Template_div_focus_4_listener() {
        i0.ɵɵrestoreView(_r1);
        return i0.ɵɵresetView(ctx.focusInput());
      });
      i0.ɵɵelementStart(5, "pre", 12);
      i0.ɵɵtext(6);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(7, "input", 13, 0);
      i0.ɵɵlistener("keydown", function CardInputFieldComponent_Template_input_keydown_7_listener() {
        i0.ɵɵrestoreView(_r1);
        return i0.ɵɵresetView(false);
      });
      i0.ɵɵelementEnd();
      i0.ɵɵtemplate(9, CardInputFieldComponent_img_9_Template, 1, 1, "img", 14);
      i0.ɵɵelementEnd()();
      i0.ɵɵelementStart(10, "div", 15)(11, "label", 16);
      i0.ɵɵi18n(12, 2);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(13, "mat-form-field", 17);
      i0.ɵɵelement(14, "input", 18);
      i0.ɵɵelementStart(15, "mat-error");
      i0.ɵɵi18n(16, 3);
      i0.ɵɵelementEnd()()();
      i0.ɵɵelementStart(17, "div", 19)(18, "div", 20)(19, "label", 16);
      i0.ɵɵi18n(20, 4);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(21, "mat-form-field", 17)(22, "mat-select", 21);
      i0.ɵɵtemplate(23, CardInputFieldComponent_mat_option_23_Template, 2, 3, "mat-option", 22);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(24, "mat-error");
      i0.ɵɵi18n(25, 5);
      i0.ɵɵelementEnd()()();
      i0.ɵɵelementStart(26, "div", 20)(27, "label", 16);
      i0.ɵɵtext(28, "Expiry Year");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(29, "mat-form-field", 17)(30, "mat-select", 23);
      i0.ɵɵtemplate(31, CardInputFieldComponent_mat_option_31_Template, 2, 2, "mat-option", 22);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(32, "mat-error");
      i0.ɵɵi18n(33, 6);
      i0.ɵɵelementEnd()()();
      i0.ɵɵelementStart(34, "div", 9)(35, "label", 24);
      i0.ɵɵtext(36, "CVV");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(37, "mat-form-field", 25);
      i0.ɵɵelement(38, "input", 26);
      i0.ɵɵelementStart(39, "mat-error");
      i0.ɵɵi18n(40, 7);
      i0.ɵɵelementEnd()()()()();
    }
    if (rf & 2) {
      i0.ɵɵproperty("formGroup", ctx.details);
      i0.ɵɵadvance(6);
      i0.ɵɵtextInterpolate(ctx.card_display);
      i0.ɵɵadvance();
      i0.ɵɵproperty("value", ctx.details.value.card_number == null ? null : ctx.details.value.card_number.trim());
      i0.ɵɵadvance(2);
      i0.ɵɵproperty("ngIf", ctx.card_type);
      i0.ɵɵadvance(14);
      i0.ɵɵproperty("ngForOf", ctx.months);
      i0.ɵɵadvance(8);
      i0.ɵɵproperty("ngForOf", ctx.years);
    }
  },
  dependencies: [i1.NgForOf, i1.NgIf, i2.ɵNgNoValidate, i2.DefaultValueAccessor, i2.NgControlStatus, i2.NgControlStatusGroup, i2.MaxLengthValidator, i2.FormGroupDirective, i2.FormControlName, i3.MatFormField, i3.MatError, i4.MatInput, i5.MatSelect, i6.MatOption],
  styles: ["mat-form-field[_ngcontent-%COMP%] {\n                height: 3.25rem;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNhcmQtaW5wdXQtZmllbGQuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxlQUFlO1lBQ25CIiwiZmlsZSI6ImNhcmQtaW5wdXQtZmllbGQuY29tcG9uZW50LnRzIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICBtYXQtZm9ybS1maWVsZCB7XG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAzLjI1cmVtO1xuICAgICAgICAgICAgfVxuICAgICAgICAiXX0= */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvcGF5bWVudHMvc3JjL2xpYi9jYXJkLWlucHV0LWZpZWxkLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1lBQ1k7Z0JBQ0ksZUFBZTtZQUNuQjs7QUFFWix3WUFBd1kiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIG1hdC1mb3JtLWZpZWxkIHtcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDMuMjVyZW07XG4gICAgICAgICAgICB9XG4gICAgICAgICJdLCJzb3VyY2VSb290IjoiIn0= */"]
});
exports.CardInputFieldComponent = CardInputFieldComponent;

/***/ }),

/***/ 85272:
/*!**********************************************************!*\
  !*** ./libs/payments/src/lib/payment-modal.component.ts ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _taggedTemplateLiteral = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js */ 9959)["default"]);
var _regeneratorRuntime = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/regeneratorRuntime.js */ 8698)["default"]);
var _asyncToGenerator = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/asyncToGenerator.js */ 95386)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _PaymentModalComponent, _templateObject, _templateObject2, _templateObject3, _templateObject4, _templateObject5, _templateObject6, _templateObject7, _templateObject8, _templateObject9;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.PaymentModalComponent = void 0;
var core_1 = __webpack_require__(/*! @angular/core */ 37580);
var dialog_1 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var organisation_service_1 = __webpack_require__(/*! libs/organisation/src/lib/organisation.service */ 19863);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! libs/organisation/src/lib/organisation.service */ 19863);
function PaymentModalComponent_div_0_ng_container_1_ng_container_8_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵi18nStart(0, 3, 1);
    i0.ɵɵelementContainer(1);
    i0.ɵɵpipe(2, "date");
    i0.ɵɵpipe(3, "date");
    i0.ɵɵi18nEnd();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext(3);
    i0.ɵɵadvance(3);
    i0.ɵɵi18nExp(i0.ɵɵpipeBind2(2, 2, ctx_r1.details.date, "shortTime"))(i0.ɵɵpipeBind2(3, 5, ctx_r1.details.date + ctx_r1.details.duration * 60 * 1000, "shortTime"));
    i0.ɵɵi18nApply(0);
  }
}
function PaymentModalComponent_div_0_ng_container_1_Template(rf, ctx) {
  if (rf & 1) {
    var _r1 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵelementStart(1, "main", 14)(2, "h2", 15);
    i0.ɵɵi18n(3, 2);
    i0.ɵɵelementEnd();
    i0.ɵɵelement(4, "img", 16);
    i0.ɵɵelementStart(5, "p", 17);
    i0.ɵɵi18nStart(6, 3);
    i0.ɵɵpipe(7, "date");
    i0.ɵɵtemplate(8, PaymentModalComponent_div_0_ng_container_1_ng_container_8_Template, 4, 8, "ng-container", 18);
    i0.ɵɵi18nEnd();
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(9, "p", 19);
    i0.ɵɵi18n(10, 4);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(11, "p", 20)(12, "strong");
    i0.ɵɵtext(13);
    i0.ɵɵpipe(14, "currency");
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(15, "card-input-field", 21);
    i0.ɵɵtwoWayListener("ngModelChange", function PaymentModalComponent_div_0_ng_container_1_Template_card_input_field_ngModelChange_15_listener($event) {
      i0.ɵɵrestoreView(_r1);
      var ctx_r1 = i0.ɵɵnextContext(2);
      i0.ɵɵtwoWayBindingSet(ctx_r1.card_details, $event) || (ctx_r1.card_details = $event);
      return i0.ɵɵresetView($event);
    });
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(16, "footer", 22)(17, "button", 23);
    i0.ɵɵlistener("click", function PaymentModalComponent_div_0_ng_container_1_Template_button_click_17_listener() {
      i0.ɵɵrestoreView(_r1);
      var ctx_r1 = i0.ɵɵnextContext(2);
      return i0.ɵɵresetView(ctx_r1.processPayment());
    });
    i0.ɵɵi18n(18, 5);
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(19, "button", 24)(20, "i", 25);
    i0.ɵɵtext(21, "close");
    i0.ɵɵelementEnd()();
    i0.ɵɵelementContainerEnd();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance(8);
    i0.ɵɵproperty("ngIf", !ctx_r1.details.all_day);
    i0.ɵɵi18nExp(ctx_r1.details.type)(ctx_r1.details.resource_name)(i0.ɵɵpipeBind2(7, 6, ctx_r1.details.date, "mediumDate"));
    i0.ɵɵi18nApply(6);
    i0.ɵɵadvance(5);
    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(14, 9, ctx_r1.details.amount / 100, ctx_r1.code));
    i0.ɵɵadvance(2);
    i0.ɵɵtwoWayProperty("ngModel", ctx_r1.card_details);
  }
}
function PaymentModalComponent_div_0_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 12);
    i0.ɵɵtemplate(1, PaymentModalComponent_div_0_ng_container_1_Template, 22, 12, "ng-container", 13);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    var success_state_r3 = i0.ɵɵreference(5);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", !ctx_r1.success)("ngIfElse", success_state_r3);
  }
}
function PaymentModalComponent_ng_template_2_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 26);
    i0.ɵɵelement(1, "mat-spinner", 27);
    i0.ɵɵelementStart(2, "p");
    i0.ɵɵtext(3);
    i0.ɵɵpipe(4, "async");
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance(3);
    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(4, 1, ctx_r1.loading));
  }
}
function PaymentModalComponent_ng_template_4_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "main", 28)(1, "h2", 15);
    i0.ɵɵi18n(2, 6);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(3, "h3", 29);
    i0.ɵɵtext(4);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(5, "p");
    i0.ɵɵi18n(6, 7);
    i0.ɵɵpipe(7, "currency");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(8, "p");
    i0.ɵɵi18n(9, 8);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(10, "p");
    i0.ɵɵtext(11);
    i0.ɵɵpipe(12, "date");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(13, "p");
    i0.ɵɵi18n(14, 9);
    i0.ɵɵpipe(15, "date");
    i0.ɵɵpipe(16, "date");
    i0.ɵɵelementEnd()();
    i0.ɵɵelement(17, "img", 30);
    i0.ɵɵelementStart(18, "footer", 31)(19, "button", 32);
    i0.ɵɵi18n(20, 10);
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance(4);
    i0.ɵɵtextInterpolate1(" Ref #", ctx_r1.transaction_id, " ");
    i0.ɵɵadvance(3);
    i0.ɵɵi18nExp(i0.ɵɵpipeBind2(7, 6, ctx_r1.details.amount / 100, ctx_r1.code));
    i0.ɵɵi18nApply(6);
    i0.ɵɵadvance(2);
    i0.ɵɵi18nExp(ctx_r1.details.resource_name);
    i0.ɵɵi18nApply(9);
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(12, 9, ctx_r1.details.date, "mediumDate"));
    i0.ɵɵadvance(5);
    i0.ɵɵi18nExp(i0.ɵɵpipeBind2(15, 12, ctx_r1.details.date, "shortTime"))(i0.ɵɵpipeBind2(16, 15, ctx_r1.details.date + ctx_r1.details.duration * 60 * 1000, "shortTime"));
    i0.ɵɵi18nApply(14);
  }
}
var PaymentModalComponent = /*#__PURE__*/function () {
  function PaymentModalComponent(_data, _org) {
    _classCallCheck(this, PaymentModalComponent);
    this._data = _data;
    this._org = _org;
    this.event = new core_1.EventEmitter();
    this.details = this._data;
    this.loading = this._data.loading;
    this.success = false;
    this.transaction_id = '12345678';
  }
  return _createClass(PaymentModalComponent, [{
    key: "code",
    get: function get() {
      return this._org.currency_code;
    }
  }, {
    key: "processPayment",
    value: function () {
      var _processPayment = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              if (!(!this.card_details || !this._validCardDetails())) {
                _context.next = 2;
                break;
              }
              return _context.abrupt("return");
            case 2:
              this.event.emit(this.card_details);
              _context.next = 5;
              return this._data.makePayment(this.card_details);
            case 5:
              this.success = true;
            case 6:
            case "end":
              return _context.stop();
          }
        }, _callee, this);
      }));
      function processPayment() {
        return _processPayment.apply(this, arguments);
      }
      return processPayment;
    }()
  }, {
    key: "_validCardDetails",
    value: function _validCardDetails() {
      var _this$card_details, _this$card_details2;
      return (((_this$card_details = this.card_details) === null || _this$card_details === void 0 ? void 0 : _this$card_details.cardholder.length) || 0) > 0 && (((_this$card_details2 = this.card_details) === null || _this$card_details2 === void 0 ? void 0 : _this$card_details2.cvv.length) || 0) >= 3;
    }
  }]);
}();
_PaymentModalComponent = PaymentModalComponent;
_PaymentModalComponent.ɵfac = function PaymentModalComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _PaymentModalComponent)(i0.ɵɵdirectiveInject(dialog_1.MAT_DIALOG_DATA), i0.ɵɵdirectiveInject(i1.OrganisationService));
};
_PaymentModalComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _PaymentModalComponent,
  selectors: [["payment-modal"]],
  outputs: {
    event: "event"
  },
  decls: 6,
  vars: 4,
  consts: function consts() {
    var i18n_0;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_7177958266181561076$$LIBS_PAYMENTS_SRC_LIB_PAYMENT_MODAL_COMPONENT_TS_0 = goog.getMsg("Booking Payment");
      i18n_0 = MSG_EXTERNAL_7177958266181561076$$LIBS_PAYMENTS_SRC_LIB_PAYMENT_MODAL_COMPONENT_TS_0;
    } else {
      i18n_0 = $localize(_templateObject || (_templateObject = _taggedTemplateLiteral([":\u241F4d64c520c43eead598939b50c326e665c6e88fa4\u241F7177958266181561076:Booking Payment"])));
    }
    var i18n_1;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_6612380128469929872$$LIBS_PAYMENTS_SRC_LIB_PAYMENT_MODAL_COMPONENT_TS_1 = goog.getMsg(" You are requesting a {$interpolation} booking in {$interpolation_1} for {$interpolation_2} {$startTagNgContainer} between {$interpolation_3} and {$interpolation_4} {$closeTagNgContainer}", {
        "closeTagNgContainer": "\uFFFD/#1:1\uFFFD\uFFFD/*8:1\uFFFD",
        "interpolation": "\uFFFD0\uFFFD",
        "interpolation_1": "\uFFFD1\uFFFD",
        "interpolation_2": "\uFFFD2\uFFFD",
        "interpolation_3": "\uFFFD0:1\uFFFD",
        "interpolation_4": "\uFFFD1:1\uFFFD",
        "startTagNgContainer": "\uFFFD*8:1\uFFFD\uFFFD#1:1\uFFFD"
      }, {
        original_code: {
          "closeTagNgContainer": "</ng-container>",
          "interpolation": "{{ details.type }}",
          "interpolation_1": "{{ details.resource_name }}",
          "interpolation_2": "{{ details.date | date: 'mediumDate' }}",
          "interpolation_3": "{{ details.date | date: 'shortTime' }}",
          "interpolation_4": "{{\n                                details.date + details.duration * 60 * 1000\n                                    | date: 'shortTime'\n                            }}",
          "startTagNgContainer": "<ng-container *ngIf=\"!details.all_day\">"
        }
      });
      i18n_1 = MSG_EXTERNAL_6612380128469929872$$LIBS_PAYMENTS_SRC_LIB_PAYMENT_MODAL_COMPONENT_TS_1;
    } else {
      i18n_1 = $localize(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([":\u241F00a4b4852357812c8f53bb8e5c7598d479bea113\u241F6612380128469929872: You are requesting a ", ":INTERPOLATION: booking in ", ":INTERPOLATION_1: for ", ":INTERPOLATION_2: ", ":START_TAG_NG_CONTAINER: between ", ":INTERPOLATION_3: and ", ":INTERPOLATION_4: ", ":CLOSE_TAG_NG_CONTAINER:"])), "\uFFFD0\uFFFD", "\uFFFD1\uFFFD", "\uFFFD2\uFFFD", "\uFFFD*8:1\uFFFD\uFFFD#1:1\uFFFD", "\uFFFD0:1\uFFFD", "\uFFFD1:1\uFFFD", "\uFFFD/#1:1\uFFFD\uFFFD/*8:1\uFFFD");
    }
    var i18n_2;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_2305336913310307878$$LIBS_PAYMENTS_SRC_LIB_PAYMENT_MODAL_COMPONENT_TS_2 = goog.getMsg("You booking will cost:");
      i18n_2 = MSG_EXTERNAL_2305336913310307878$$LIBS_PAYMENTS_SRC_LIB_PAYMENT_MODAL_COMPONENT_TS_2;
    } else {
      i18n_2 = $localize(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([":\u241F7a9510cbfdcb53b8dcac3f0bd7958196958333ff\u241F2305336913310307878:You booking will cost:"])));
    }
    var i18n_3;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_8427617350792373644$$LIBS_PAYMENTS_SRC_LIB_PAYMENT_MODAL_COMPONENT_TS_3 = goog.getMsg(" Make Payment ");
      i18n_3 = MSG_EXTERNAL_8427617350792373644$$LIBS_PAYMENTS_SRC_LIB_PAYMENT_MODAL_COMPONENT_TS_3;
    } else {
      i18n_3 = $localize(_templateObject4 || (_templateObject4 = _taggedTemplateLiteral([":\u241F9069fc3477fe6107249755afedd9fe14140bb201\u241F8427617350792373644: Make Payment "])));
    }
    var i18n_4;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_8206804611071524488$$LIBS_PAYMENTS_SRC_LIB_PAYMENT_MODAL_COMPONENT_TS_4 = goog.getMsg("Payment Successful");
      i18n_4 = MSG_EXTERNAL_8206804611071524488$$LIBS_PAYMENTS_SRC_LIB_PAYMENT_MODAL_COMPONENT_TS_4;
    } else {
      i18n_4 = $localize(_templateObject5 || (_templateObject5 = _taggedTemplateLiteral([":\u241Fdbbd5277093a2dbc265472510779d835afc39f45\u241F8206804611071524488:Payment Successful"])));
    }
    var i18n_5;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_2765198892596811562$$LIBS_PAYMENTS_SRC_LIB_PAYMENT_MODAL_COMPONENT_TS_5 = goog.getMsg("{$interpolation} paid.", {
        "interpolation": "\uFFFD0\uFFFD"
      }, {
        original_code: {
          "interpolation": "{{ details.amount / 100 | currency: code }}"
        }
      });
      i18n_5 = MSG_EXTERNAL_2765198892596811562$$LIBS_PAYMENTS_SRC_LIB_PAYMENT_MODAL_COMPONENT_TS_5;
    } else {
      i18n_5 = $localize(_templateObject6 || (_templateObject6 = _taggedTemplateLiteral([":\u241Fbb02e353442d9b1ec8fc7d9875465cafb134f7e4\u241F2765198892596811562:", ":INTERPOLATION: paid."])), "\uFFFD0\uFFFD");
    }
    var i18n_6;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_6374111499070607459$$LIBS_PAYMENTS_SRC_LIB_PAYMENT_MODAL_COMPONENT_TS_6 = goog.getMsg("{$interpolation} booked.", {
        "interpolation": "\uFFFD0\uFFFD"
      }, {
        original_code: {
          "interpolation": "{{ details.resource_name }}"
        }
      });
      i18n_6 = MSG_EXTERNAL_6374111499070607459$$LIBS_PAYMENTS_SRC_LIB_PAYMENT_MODAL_COMPONENT_TS_6;
    } else {
      i18n_6 = $localize(_templateObject7 || (_templateObject7 = _taggedTemplateLiteral([":\u241F931d5e8e4e517671212210e9d716fa2721c9e67c\u241F6374111499070607459:", ":INTERPOLATION: booked."])), "\uFFFD0\uFFFD");
    }
    var i18n_7;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_783447026381975793$$LIBS_PAYMENTS_SRC_LIB_PAYMENT_MODAL_COMPONENT_TS_7 = goog.getMsg(" {$interpolation} and {$interpolation_1} ", {
        "interpolation": "\uFFFD0\uFFFD",
        "interpolation_1": "\uFFFD1\uFFFD"
      }, {
        original_code: {
          "interpolation": "{{ details.date | date: 'shortTime' }}",
          "interpolation_1": "{{\n                        details.date + details.duration * 60 * 1000\n                            | date: 'shortTime'\n                    }}"
        }
      });
      i18n_7 = MSG_EXTERNAL_783447026381975793$$LIBS_PAYMENTS_SRC_LIB_PAYMENT_MODAL_COMPONENT_TS_7;
    } else {
      i18n_7 = $localize(_templateObject8 || (_templateObject8 = _taggedTemplateLiteral([":\u241Fe2ddd0e2db3568ac26e9f86a9e366f864a4e6e94\u241F783447026381975793: ", ":INTERPOLATION: and ", ":INTERPOLATION_1: "])), "\uFFFD0\uFFFD", "\uFFFD1\uFFFD");
    }
    var i18n_8;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_8163835392610431386$$LIBS_PAYMENTS_SRC_LIB_PAYMENT_MODAL_COMPONENT_TS_8 = goog.getMsg(" Great, thanks. ");
      i18n_8 = MSG_EXTERNAL_8163835392610431386$$LIBS_PAYMENTS_SRC_LIB_PAYMENT_MODAL_COMPONENT_TS_8;
    } else {
      i18n_8 = $localize(_templateObject9 || (_templateObject9 = _taggedTemplateLiteral([":\u241F001127b263e7132960af8fa70cce4c2635980fbc\u241F8163835392610431386: Great, thanks. "])));
    }
    return [["load_state", ""], ["success_state", ""], i18n_0, i18n_1, i18n_2, i18n_3, i18n_4, i18n_5, i18n_6, i18n_7, i18n_8, ["class", "relative max-h-[100vh] overflow-auto", 4, "ngIf", "ngIfElse"], [1, "relative", "max-h-[100vh]", "overflow-auto"], [4, "ngIf", "ngIfElse"], [1, "px-4", "pt-8", "w-[24rem]", "space-y-2", "flex", "flex-col", "items-center", "relative"], [1, "text-2xl", "font-medium"], ["src", "assets/icons/cost.svg", 1, "w-1/2"], [1, "text-sm", "text-center", "pb-2"], [4, "ngIf"], [1, "text-sm"], [1, "text-lg", "font-medium", "text-center"], [1, "w-full", 3, "ngModelChange", "ngModel"], [1, "p-4"], ["matRipple", "", 1, "w-full", 3, "click"], ["icon", "", "matRipple", "", "mat-dialog-close", "", 1, "absolute", "top-1", "left-1"], [1, "material-icons", "text-2xl"], [1, "w-full", "h-full", "flex", "flex-col", "items-center", "justify-center", "p-8"], ["diameter", "32"], [1, "px-8", "pt-8", "w-[24rem]", "flex", "flex-col", "relative"], [1, "text-xl", "font-medium", "mb-2"], ["src", "assets/icons/payment-confirmed.svg", 1, "w-full"], [1, "p-4", "border-t", "border-base-200"], ["btn", "", "matRipple", "", "mat-dialog-close", "", 1, "w-full"]];
  },
  template: function PaymentModalComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵtemplate(0, PaymentModalComponent_div_0_Template, 2, 2, "div", 11);
      i0.ɵɵpipe(1, "async");
      i0.ɵɵtemplate(2, PaymentModalComponent_ng_template_2_Template, 5, 3, "ng-template", null, 0, i0.ɵɵtemplateRefExtractor)(4, PaymentModalComponent_ng_template_4_Template, 21, 18, "ng-template", null, 1, i0.ɵɵtemplateRefExtractor);
    }
    if (rf & 2) {
      var load_state_r4 = i0.ɵɵreference(3);
      i0.ɵɵproperty("ngIf", !i0.ɵɵpipeBind1(1, 2, ctx.loading))("ngIfElse", load_state_r4);
    }
  }
});
exports.PaymentModalComponent = PaymentModalComponent;

/***/ }),

/***/ 32460:
/*!**************************************************!*\
  !*** ./libs/payments/src/lib/payments.module.ts ***!
  \**************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _PaymentsModule;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.PaymentsModule = void 0;
var common_1 = __webpack_require__(/*! @angular/common */ 60316);
var dialog_1 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var form_field_1 = __webpack_require__(/*! @angular/material/form-field */ 24950);
var input_1 = __webpack_require__(/*! @angular/material/input */ 95541);
var forms_1 = __webpack_require__(/*! @angular/forms */ 34456);
var button_1 = __webpack_require__(/*! @angular/material/button */ 84175);
var select_1 = __webpack_require__(/*! @angular/material/select */ 25175);
var progress_spinner_1 = __webpack_require__(/*! @angular/material/progress-spinner */ 41134);
var payment_modal_component_1 = __webpack_require__(/*! ./payment-modal.component */ 85272);
var card_input_field_component_1 = __webpack_require__(/*! ./card-input-field.component */ 49900);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @angular/common */ 60316);
var i2 = __webpack_require__(/*! @angular/forms */ 34456);
var i3 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var i4 = __webpack_require__(/*! @angular/material/progress-spinner */ 41134);
var COMPONENTS = [payment_modal_component_1.PaymentModalComponent, card_input_field_component_1.CardInputFieldComponent];
var PaymentsModule = /*#__PURE__*/_createClass(function PaymentsModule() {
  _classCallCheck(this, PaymentsModule);
});
_PaymentsModule = PaymentsModule;
_PaymentsModule.ɵfac = function PaymentsModule_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _PaymentsModule)();
};
_PaymentsModule.ɵmod = /*@__PURE__*/i0.ɵɵdefineNgModule({
  type: _PaymentsModule
});
_PaymentsModule.ɵinj = /*@__PURE__*/i0.ɵɵdefineInjector({
  imports: [common_1.CommonModule, forms_1.FormsModule, forms_1.ReactiveFormsModule, form_field_1.MatFormFieldModule, input_1.MatInputModule, dialog_1.MatDialogModule, button_1.MatButtonModule, select_1.MatSelectModule, progress_spinner_1.MatProgressSpinnerModule]
});
exports.PaymentsModule = PaymentsModule;
(function () {
  (typeof ngJitMode === "undefined" || ngJitMode) && i0.ɵɵsetNgModuleScope(PaymentsModule, {
    declarations: [payment_modal_component_1.PaymentModalComponent, card_input_field_component_1.CardInputFieldComponent],
    imports: [common_1.CommonModule, forms_1.FormsModule, forms_1.ReactiveFormsModule, form_field_1.MatFormFieldModule, input_1.MatInputModule, dialog_1.MatDialogModule, button_1.MatButtonModule, select_1.MatSelectModule, progress_spinner_1.MatProgressSpinnerModule],
    exports: [payment_modal_component_1.PaymentModalComponent, card_input_field_component_1.CardInputFieldComponent]
  });
})();
i0.ɵɵsetComponentScope(payment_modal_component_1.PaymentModalComponent, [i1.NgIf, i2.NgControlStatus, i2.NgModel, i3.MatDialogClose, i4.MatProgressSpinner, card_input_field_component_1.CardInputFieldComponent], [i1.AsyncPipe, i1.CurrencyPipe, i1.DatePipe]);

/***/ }),

/***/ 34525:
/*!***************************************************!*\
  !*** ./libs/payments/src/lib/payments.service.ts ***!
  \***************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _objectSpread = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/objectSpread2.js */ 34092)["default"]);
var _regeneratorRuntime = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/regeneratorRuntime.js */ 8698)["default"]);
var _slicedToArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/slicedToArray.js */ 6282)["default"]);
var _asyncToGenerator = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/asyncToGenerator.js */ 95386)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _PaymentsService;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.PaymentsService = exports.STRIPE_ID_TOKEN = void 0;
var dialog_1 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var ts_client_1 = __webpack_require__(/*! @placeos/ts-client */ 35713);
var rxjs_1 = __webpack_require__(/*! rxjs */ 15681);
var operators_1 = __webpack_require__(/*! rxjs/operators */ 97303);
var settings_service_1 = __webpack_require__(/*! libs/common/src/lib/settings.service */ 14233);
var user_state_1 = __webpack_require__(/*! libs/common/src/lib/user-state */ 37958);
var organisation_service_1 = __webpack_require__(/*! libs/organisation/src/lib/organisation.service */ 19863);
var payment_modal_component_1 = __webpack_require__(/*! ./payment-modal.component */ 85272);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! libs/organisation/src/lib/organisation.service */ 19863);
var i2 = __webpack_require__(/*! libs/common/src/lib/settings.service */ 14233);
var i3 = __webpack_require__(/*! @angular/material/dialog */ 12587);
exports.STRIPE_ID_TOKEN = 'STRIPE+customer_id';
var STRIPE_MODULE = 'Payment';
var PaymentsService = /*#__PURE__*/function () {
  function PaymentsService(_org, _settings, _dialog) {
    var _this = this;
    _classCallCheck(this, PaymentsService);
    this._org = _org;
    this._settings = _settings;
    this._dialog = _dialog;
    this._loading = new rxjs_1.BehaviorSubject('');
    this._active_card = new rxjs_1.BehaviorSubject('');
    this.loading = this._loading.asObservable();
    this.payment_sources = (0, rxjs_1.of)(1).pipe((0, operators_1.switchMap)(function () {
      var mod = (0, ts_client_1.getModule)(_this.payment_module, STRIPE_MODULE);
      if (!mod) return (0, rxjs_1.of)([]);
      return mod.execute('list_payment_methods', ['card']);
    }), (0, operators_1.tap)(function (_) {
      return _[0] ? _this._active_card.next(_[0].id) : '';
    }), (0, operators_1.shareReplay)(1));
  }
  return _createClass(PaymentsService, [{
    key: "payment_module",
    get: function get() {
      return this._org.binding('payments');
    }
  }, {
    key: "makePayment",
    value: function () {
      var _makePayment = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(details) {
        var _this2 = this;
        var _yield$this$_getCostO, _yield$this$_getCostO2, cost, period, customer_id, amount, result, makePayment, data, ref;
        return _regeneratorRuntime().wrap(function _callee2$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              if (this.payment_module) {
                _context2.next = 2;
                break;
              }
              throw 'Payments not enabled';
            case 2:
              _context2.next = 4;
              return this._getCostOfProduct(details === null || details === void 0 ? void 0 : details.type)["catch"](function (_) {
                return [0, 60];
              });
            case 4:
              _yield$this$_getCostO = _context2.sent;
              _yield$this$_getCostO2 = _slicedToArray(_yield$this$_getCostO, 2);
              cost = _yield$this$_getCostO2[0];
              period = _yield$this$_getCostO2[1];
              console.log('Cost:', cost, period);
              if (!(cost <= 0)) {
                _context2.next = 11;
                break;
              }
              return _context2.abrupt("return");
            case 11:
              customer_id = this._settings.get('STRIPE_Customer_ID');
              if (customer_id) {
                _context2.next = 16;
                break;
              }
              _context2.next = 15;
              return this._newCustomerID();
            case 15:
              customer_id = _context2.sent;
            case 16:
              this._settings.saveUserSetting('STRIPE_Customer_ID', customer_id);
              amount = cost * (details.duration / period);
              result = undefined;
              makePayment = /*#__PURE__*/function () {
                var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(c) {
                  return _regeneratorRuntime().wrap(function _callee$(_context) {
                    while (1) switch (_context.prev = _context.next) {
                      case 0:
                        _context.next = 2;
                        return _this2._processPayment(amount, customer_id, c)["catch"](function (e) {
                          _this2._loading.next('');
                          throw e;
                        });
                      case 2:
                        result = _context.sent;
                      case 3:
                      case "end":
                        return _context.stop();
                    }
                  }, _callee);
                }));
                return function makePayment(_x2) {
                  return _ref.apply(this, arguments);
                };
              }();
              data = _objectSpread(_objectSpread({}, details), {}, {
                rate: "$".concat((cost / 100).toFixed(2), " per hour"),
                amount: amount,
                makePayment: makePayment,
                loading: this.loading
              });
              ref = this._dialog.open(payment_modal_component_1.PaymentModalComponent, {
                data: data
              });
              _context2.next = 24;
              return ref.afterClosed().toPromise();
            case 24:
              return _context2.abrupt("return", result);
            case 25:
            case "end":
              return _context2.stop();
          }
        }, _callee2, this);
      }));
      function makePayment(_x) {
        return _makePayment.apply(this, arguments);
      }
      return makePayment;
    }()
  }, {
    key: "_addPaymentMethod",
    value: function () {
      var _addPaymentMethod2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3(card) {
        var mod, payment_method;
        return _regeneratorRuntime().wrap(function _callee3$(_context3) {
          while (1) switch (_context3.prev = _context3.next) {
            case 0:
              mod = (0, ts_client_1.getModule)(this.payment_module, STRIPE_MODULE);
              if (mod) {
                _context3.next = 3;
                break;
              }
              throw 'Unable to load module';
            case 3:
              _context3.next = 5;
              return mod.execute('add_payment_method', ['card', null, null, null, null, null, null, null, null, null, null, null, card]);
            case 5:
              payment_method = _context3.sent;
              return _context3.abrupt("return", payment_method.id || payment_method);
            case 7:
            case "end":
              return _context3.stop();
          }
        }, _callee3, this);
      }));
      function _addPaymentMethod(_x3) {
        return _addPaymentMethod2.apply(this, arguments);
      }
      return _addPaymentMethod;
    }()
  }, {
    key: "_getCostOfProduct",
    value: function () {
      var _getCostOfProduct2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4(type) {
        var price, mod, product_list;
        return _regeneratorRuntime().wrap(function _callee4$(_context4) {
          while (1) switch (_context4.prev = _context4.next) {
            case 0:
              price = [0, 60];
              mod = (0, ts_client_1.getModule)(this.payment_module, STRIPE_MODULE);
              if (mod) {
                _context4.next = 4;
                break;
              }
              return _context4.abrupt("return", price);
            case 4:
              _context4.next = 6;
              return mod.execute('get_product_prices', [null, null, type]);
            case 6:
              product_list = _context4.sent;
              if (product_list.length) {
                _context4.next = 9;
                break;
              }
              return _context4.abrupt("return", price);
            case 9:
              return _context4.abrupt("return", product_list);
            case 10:
            case "end":
              return _context4.stop();
          }
        }, _callee4, this);
      }));
      function _getCostOfProduct(_x4) {
        return _getCostOfProduct2.apply(this, arguments);
      }
      return _getCostOfProduct;
    }()
  }, {
    key: "_processPayment",
    value: function () {
      var _processPayment2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee5(amount, customer_id, card_details) {
        var _ref2;
        var source, mod, id;
        return _regeneratorRuntime().wrap(function _callee5$(_context5) {
          while (1) switch (_context5.prev = _context5.next) {
            case 0:
              this._loading.next('Checking payment method...');
              console.log('Getting payment method...');
              if (!card_details) {
                _context5.next = 8;
                break;
              }
              _context5.next = 5;
              return this._addPaymentMethod(card_details);
            case 5:
              _context5.t0 = _context5.sent;
              _context5.next = 9;
              break;
            case 8:
              _context5.t0 = this._active_card.getValue();
            case 9:
              source = _context5.t0;
              if (source) {
                _context5.next = 12;
                break;
              }
              throw 'No payment source selected';
            case 12:
              this._loading.next('Processing payment...');
              console.log('Processing payment...');
              mod = (0, ts_client_1.getModule)(this.payment_module, STRIPE_MODULE);
              if (mod) {
                _context5.next = 17;
                break;
              }
              throw 'Unable to load module';
            case 17:
              _context5.next = 19;
              return mod.execute('create_payment_intent', [amount, this._org.building.currency || 'USD', null, null, customer_id, null, null, null, (_ref2 = (0, user_state_1.currentUser)()) === null || _ref2 === void 0 ? void 0 : _ref2.email]);
            case 19:
              id = _context5.sent;
              if (id) {
                _context5.next = 22;
                break;
              }
              throw 'Failed to create payment';
            case 22:
              console.log('Confirming payment...');
              _context5.next = 25;
              return mod.execute('confirm_payment_intent', [id, source]);
            case 25:
              this._loading.next('');
              return _context5.abrupt("return", {
                success: true,
                state: 'approved',
                invoice_id: id,
                amount: amount,
                created_at: Date.now(),
                updated_at: Date.now()
              });
            case 27:
            case "end":
              return _context5.stop();
          }
        }, _callee5, this);
      }));
      function _processPayment(_x5, _x6, _x7) {
        return _processPayment2.apply(this, arguments);
      }
      return _processPayment;
    }()
  }, {
    key: "_newCustomerID",
    value: function () {
      var _newCustomerID2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee6() {
        var mod, user, id;
        return _regeneratorRuntime().wrap(function _callee6$(_context6) {
          while (1) switch (_context6.prev = _context6.next) {
            case 0:
              mod = (0, ts_client_1.getModule)(this.payment_module, STRIPE_MODULE);
              if (mod) {
                _context6.next = 3;
                break;
              }
              throw 'Unable to load module';
            case 3:
              user = (0, user_state_1.currentUser)();
              _context6.next = 6;
              return mod.execute('create_customer', [0, null, null, null, "".concat(user.id, "|").concat(user.name, "|FromPlaceOS"), user.email]);
            case 6:
              id = _context6.sent;
              return _context6.abrupt("return", id);
            case 8:
            case "end":
              return _context6.stop();
          }
        }, _callee6, this);
      }));
      function _newCustomerID() {
        return _newCustomerID2.apply(this, arguments);
      }
      return _newCustomerID;
    }()
  }]);
}();
_PaymentsService = PaymentsService;
_PaymentsService.ɵfac = function PaymentsService_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _PaymentsService)(i0.ɵɵinject(i1.OrganisationService), i0.ɵɵinject(i2.SettingsService), i0.ɵɵinject(i3.MatDialog));
};
_PaymentsService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({
  token: _PaymentsService,
  factory: _PaymentsService.ɵfac,
  providedIn: 'root'
});
exports.PaymentsService = PaymentsService;

/***/ }),

/***/ 44855:
/*!**********************************!*\
  !*** ./libs/spaces/src/index.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var tslib_1 = __webpack_require__(/*! tslib */ 24398);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/spaces.module */ 34360), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/spaces */ 33220), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/space.pipe */ 22011), exports);

/***/ }),

/***/ 85752:
/*!************************************************************************************!*\
  !*** ./libs/spaces/src/lib/space-select-modal/new-space-select-modal.component.ts ***!
  \************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _taggedTemplateLiteral = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js */ 9959)["default"]);
var _toConsumableArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/toConsumableArray.js */ 86033)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _NewSpaceSelectModalComponent, _templateObject, _templateObject2, _templateObject3, _templateObject4, _templateObject5;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.NewSpaceSelectModalComponent = void 0;
var dialog_1 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var event_form_service_1 = __webpack_require__(/*! libs/events/src/lib/event-form.service */ 26101);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var i2 = __webpack_require__(/*! @placeos/common */ 22797);
var i3 = __webpack_require__(/*! libs/events/src/lib/event-form.service */ 26101);
function NewSpaceSelectModalComponent_space_list_16_Template(rf, ctx) {
  if (rf & 1) {
    var _r2 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "space-list", 29);
    i0.ɵɵlistener("toggleFav", function NewSpaceSelectModalComponent_space_list_16_Template_space_list_toggleFav_0_listener($event) {
      i0.ɵɵrestoreView(_r2);
      var ctx_r2 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r2.toggleFavourite($event));
    })("onSelect", function NewSpaceSelectModalComponent_space_list_16_Template_space_list_onSelect_0_listener($event) {
      i0.ɵɵrestoreView(_r2);
      var ctx_r2 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r2.displayed = $event);
    });
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r2 = i0.ɵɵnextContext();
    i0.ɵɵproperty("active", ctx_r2.displayed == null ? null : ctx_r2.displayed.id)("selected", ctx_r2.selected_ids)("favorites", ctx_r2.favorites);
  }
}
function NewSpaceSelectModalComponent_button_19_Template(rf, ctx) {
  if (rf & 1) {
    var _r4 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "button", 30);
    i0.ɵɵlistener("click", function NewSpaceSelectModalComponent_button_19_Template_button_click_0_listener() {
      i0.ɵɵrestoreView(_r4);
      var ctx_r2 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r2.displayed = null);
    });
    i0.ɵɵi18n(1, 5);
    i0.ɵɵelementEnd();
  }
}
function NewSpaceSelectModalComponent_ng_template_37_Template(rf, ctx) {
  if (rf & 1) {
    var _r5 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "space-map", 31);
    i0.ɵɵlistener("onSelect", function NewSpaceSelectModalComponent_ng_template_37_Template_space_map_onSelect_0_listener($event) {
      i0.ɵɵrestoreView(_r5);
      var ctx_r2 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r2.displayed = $event);
    });
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r2 = i0.ɵɵnextContext();
    i0.ɵɵproperty("selected", ctx_r2.selected_ids)("is_displayed", !!ctx_r2.displayed)("active", ctx_r2.displayed == null ? null : ctx_r2.displayed.id);
  }
}
var NewSpaceSelectModalComponent = /*#__PURE__*/function () {
  function NewSpaceSelectModalComponent(_dialog_ref, _settings, _event_form, _data) {
    _classCallCheck(this, NewSpaceSelectModalComponent);
    this._dialog_ref = _dialog_ref;
    this._settings = _settings;
    this._event_form = _event_form;
    this._data = _data;
    this.selected = [];
    this.view = 'list';
    this.multiday = !!this._data.multiday;
    this.selected = _toConsumableArray(_data.spaces || []);
    this._event_form.setOptions(_data.options);
  }
  return _createClass(NewSpaceSelectModalComponent, [{
    key: "selected_ids",
    get: function get() {
      return this.selected.map(function (_) {
        return _.id;
      }).join(',');
    }
  }, {
    key: "favorites",
    get: function get() {
      return this._settings.get('favourite_spaces') || [];
    }
  }, {
    key: "isSelected",
    value: function isSelected(id) {
      return id && this.selected_ids.includes(id);
    }
  }, {
    key: "setSelected",
    value: function setSelected(item, state) {
      var list = this.selected.filter(function (_) {
        return _.id !== item.id;
      });
      if (state) list.push(item);
      this.selected = list;
      if (!this._settings.get('app.events.allow_multiple_spaces') && state) {
        this.selected = [item];
        this._dialog_ref.close([item]);
      }
    }
  }, {
    key: "toggleFavourite",
    value: function toggleFavourite(item) {
      var fav_list = this.favorites;
      var new_state = !fav_list.includes(item.id);
      if (new_state) {
        this._settings.saveUserSetting('favourite_spaces', [].concat(_toConsumableArray(fav_list), [item.id]));
      } else {
        this._settings.saveUserSetting('favourite_spaces', fav_list.filter(function (_) {
          return _ !== item.id;
        }));
      }
    }
  }]);
}();
_NewSpaceSelectModalComponent = NewSpaceSelectModalComponent;
_NewSpaceSelectModalComponent.ɵfac = function NewSpaceSelectModalComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _NewSpaceSelectModalComponent)(i0.ɵɵdirectiveInject(i1.MatDialogRef), i0.ɵɵdirectiveInject(i2.SettingsService), i0.ɵɵdirectiveInject(i3.EventFormService), i0.ɵɵdirectiveInject(dialog_1.MAT_DIALOG_DATA));
};
_NewSpaceSelectModalComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _NewSpaceSelectModalComponent,
  selectors: [["new-space-select-modal"]],
  decls: 39,
  vars: 29,
  consts: function consts() {
    var i18n_0;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_3245405487284732016$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_NEW_SPACE_SELECT_MODAL_COMPONENT_TS_0 = goog.getMsg("Find Space");
      i18n_0 = MSG_EXTERNAL_3245405487284732016$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_NEW_SPACE_SELECT_MODAL_COMPONENT_TS_0;
    } else {
      i18n_0 = $localize(_templateObject || (_templateObject = _taggedTemplateLiteral([":\u241F2a8f5812e693119f28847362c97c1924c4b5e2ad\u241F3245405487284732016:Find Space"])));
    }
    var i18n_1;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_8443571736703532556$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_NEW_SPACE_SELECT_MODAL_COMPONENT_TS_1 = goog.getMsg(" View List ");
      i18n_1 = MSG_EXTERNAL_8443571736703532556$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_NEW_SPACE_SELECT_MODAL_COMPONENT_TS_1;
    } else {
      i18n_1 = $localize(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([":\u241F30d3439b0e0095fe69503245f3bd7a2e9498be7c\u241F8443571736703532556: View List "])));
    }
    var i18n_2;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_819716823718458903$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_NEW_SPACE_SELECT_MODAL_COMPONENT_TS_2 = goog.getMsg("Back to form");
      i18n_2 = MSG_EXTERNAL_819716823718458903$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_NEW_SPACE_SELECT_MODAL_COMPONENT_TS_2;
    } else {
      i18n_2 = $localize(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([":\u241F18843b85d1a4f17fefafd07bc5cde636dca44295\u241F819716823718458903:Back to form"])));
    }
    var i18n_3;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_8164592885301950366$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_NEW_SPACE_SELECT_MODAL_COMPONENT_TS_3 = goog.getMsg(" {$interpolation} room(s) added ", {
        "interpolation": "\uFFFD0\uFFFD"
      }, {
        original_code: {
          "interpolation": "{{ selected.length }}"
        }
      });
      i18n_3 = MSG_EXTERNAL_8164592885301950366$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_NEW_SPACE_SELECT_MODAL_COMPONENT_TS_3;
    } else {
      i18n_3 = $localize(_templateObject4 || (_templateObject4 = _taggedTemplateLiteral([":\u241F7651117c4dcb18eb274657230a366a428c9a113b\u241F8164592885301950366: ", ":INTERPOLATION: room(s) added "])), "\uFFFD0\uFFFD");
    }
    var i18n_4;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_874721418273731876$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_NEW_SPACE_SELECT_MODAL_COMPONENT_TS_4 = goog.getMsg(" Back ");
      i18n_4 = MSG_EXTERNAL_874721418273731876$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_NEW_SPACE_SELECT_MODAL_COMPONENT_TS_4;
    } else {
      i18n_4 = $localize(_templateObject5 || (_templateObject5 = _taggedTemplateLiteral([":\u241Fccda1d41ca79703a85a3a598c1d97e040a32b766\u241F874721418273731876: Back "])));
    }
    return [["map_view", ""], i18n_0, i18n_1, i18n_2, i18n_3, i18n_4, [1, "w-[100vw]", "h-[100vh]", "sm:relative", "sm:w-auto", "sm:h-auto", "flex", "flex-col", "bg-base-100"], [1, "flex", "items-center", "space-x-4", "w-full"], ["icon", "", "matRipple", "", "mat-dialog-close", "", 1, "bg-base-200"], [1, "hidden", "sm:flex", "items-center", "justify-end", "flex-1"], ["btn", "", "matRipple", "", "map", "", 1, "rounded-l", "rounded-r-none", 3, "click"], ["btn", "", "matRipple", "", "list", "", 1, "rounded-r", "rounded-l-none", 3, "click"], [1, "flex-1", "flex", "items-center", "divide-x", "divide-base-200", "min-h-[65vh]", "h-[65vh]", "sm:max-h-[65vh]", "sm:max-w-[95vw]", "w-full", "overflow-hidden"], [1, "h-full", "hidden", "sm:flex", "max-w-[20rem]", "sm:h-[65vh]", "sm:max-h-full", 3, "multiday", "hide_levels", "viewing_map"], [1, "flex", "flex-col", "items-center", "flex-1", "w-1/2", "h-full", "sm:h-[65vh]"], [1, "w-full", "border-b", "border-base-200", 3, "viewChange", "view"], ["class", "flex-1 h-1/2 bg-base-200", 3, "active", "selected", "favorites", "toggleFav", "onSelect", 4, "ngIf", "ngIfElse"], [1, "h-full", "w-full", "sm:h-[65vh]", "absolute", "sm:relative", "flex", "sm:flex-col", "sm:max-w-[20rem]", "z-20", "bg-base-100", 3, "activeChange", "toggleFav", "close", "space", "hide_map", "active", "fav"], [1, "flex", "sm:hidden", "flex-col-reverse", "items-center", "justify-end", "px-2", "pt-2", "pb-[5.5rem]", "border-t", "border-base-200", "w-full"], ["btn", "", "matRipple", "", "name", "spaces-return", "class", "inverse sm:hidden w-full", 3, "click", 4, "ngIf"], ["btn", "", "matRipple", "", "name", "save-spaces", 1, "w-full", "sm:w-32", "sm:mb-0", 3, "mat-dialog-close"], [1, "hidden", "sm:flex", "items-center", "justify-between", "p-2", "border-t", "border-base-200", "w-full"], ["btn", "", "matRipple", "", "name", "spaces-return", 1, "clear", "text-secondary", 3, "mat-dialog-close"], [1, "flex", "items-center"], [1, "text-xl"], [1, "mr-1", "underline"], [1, "opacity-60", "text-sm"], ["btn", "", "matRipple", "", "name", "toggle-space", 3, "click", "disabled"], [1, "mr-1"], [1, "flex-1", "h-1/2", "bg-base-200", 3, "toggleFav", "onSelect", "active", "selected", "favorites"], ["btn", "", "matRipple", "", "name", "spaces-return", 1, "inverse", "sm:hidden", "w-full", 3, "click"], [1, "flex-1", "h-1/2", "w-full", 3, "onSelect", "selected", "is_displayed", "active"]];
  },
  template: function NewSpaceSelectModalComponent_Template(rf, ctx) {
    if (rf & 1) {
      var _r1 = i0.ɵɵgetCurrentView();
      i0.ɵɵelementStart(0, "div", 6)(1, "header", 7)(2, "button", 8)(3, "app-icon");
      i0.ɵɵtext(4, "close");
      i0.ɵɵelementEnd()();
      i0.ɵɵelementStart(5, "h3");
      i0.ɵɵi18n(6, 1);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(7, "div", 9)(8, "button", 10);
      i0.ɵɵlistener("click", function NewSpaceSelectModalComponent_Template_button_click_8_listener() {
        i0.ɵɵrestoreView(_r1);
        return i0.ɵɵresetView(ctx.view = "map");
      });
      i0.ɵɵtext(9, " Map ");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(10, "button", 11);
      i0.ɵɵlistener("click", function NewSpaceSelectModalComponent_Template_button_click_10_listener() {
        i0.ɵɵrestoreView(_r1);
        return i0.ɵɵresetView(ctx.view = "list");
      });
      i0.ɵɵtext(11, " List ");
      i0.ɵɵelementEnd()()();
      i0.ɵɵelementStart(12, "main", 12);
      i0.ɵɵelement(13, "space-filters", 13);
      i0.ɵɵelementStart(14, "div", 14)(15, "space-filters-display", 15);
      i0.ɵɵtwoWayListener("viewChange", function NewSpaceSelectModalComponent_Template_space_filters_display_viewChange_15_listener($event) {
        i0.ɵɵrestoreView(_r1);
        i0.ɵɵtwoWayBindingSet(ctx.view, $event) || (ctx.view = $event);
        return i0.ɵɵresetView($event);
      });
      i0.ɵɵelementEnd();
      i0.ɵɵtemplate(16, NewSpaceSelectModalComponent_space_list_16_Template, 1, 3, "space-list", 16);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(17, "space-details", 17);
      i0.ɵɵlistener("activeChange", function NewSpaceSelectModalComponent_Template_space_details_activeChange_17_listener($event) {
        i0.ɵɵrestoreView(_r1);
        return i0.ɵɵresetView(ctx.setSelected(ctx.displayed, $event));
      })("toggleFav", function NewSpaceSelectModalComponent_Template_space_details_toggleFav_17_listener() {
        i0.ɵɵrestoreView(_r1);
        return i0.ɵɵresetView(ctx.toggleFavourite(ctx.displayed));
      })("close", function NewSpaceSelectModalComponent_Template_space_details_close_17_listener() {
        i0.ɵɵrestoreView(_r1);
        return i0.ɵɵresetView(ctx.displayed = null);
      });
      i0.ɵɵelementEnd()();
      i0.ɵɵelementStart(18, "footer", 18);
      i0.ɵɵtemplate(19, NewSpaceSelectModalComponent_button_19_Template, 2, 0, "button", 19);
      i0.ɵɵelementStart(20, "button", 20);
      i0.ɵɵi18n(21, 2);
      i0.ɵɵelementEnd()();
      i0.ɵɵelementStart(22, "footer", 21)(23, "button", 22)(24, "div", 23)(25, "app-icon", 24);
      i0.ɵɵtext(26, "arrow_back");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(27, "div", 25);
      i0.ɵɵi18n(28, 3);
      i0.ɵɵelementEnd()()();
      i0.ɵɵelementStart(29, "p", 26);
      i0.ɵɵi18n(30, 4);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(31, "button", 27);
      i0.ɵɵlistener("click", function NewSpaceSelectModalComponent_Template_button_click_31_listener() {
        i0.ɵɵrestoreView(_r1);
        return i0.ɵɵresetView(ctx.setSelected(ctx.displayed, !ctx.isSelected(ctx.displayed == null ? null : ctx.displayed.id)));
      });
      i0.ɵɵelementStart(32, "div", 23)(33, "app-icon", 24);
      i0.ɵɵtext(34);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(35, "div", 28);
      i0.ɵɵtext(36);
      i0.ɵɵelementEnd()()()()();
      i0.ɵɵtemplate(37, NewSpaceSelectModalComponent_ng_template_37_Template, 1, 3, "ng-template", null, 0, i0.ɵɵtemplateRefExtractor);
    }
    if (rf & 2) {
      var map_view_r6 = i0.ɵɵreference(38);
      i0.ɵɵadvance(8);
      i0.ɵɵclassProp("inverse", ctx.view !== "map");
      i0.ɵɵadvance(2);
      i0.ɵɵclassProp("inverse", ctx.view !== "list");
      i0.ɵɵadvance(3);
      i0.ɵɵproperty("multiday", ctx.multiday)("hide_levels", ctx.view !== "list")("viewing_map", ctx.view === "map");
      i0.ɵɵadvance(2);
      i0.ɵɵtwoWayProperty("view", ctx.view);
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", ctx.view === "list")("ngIfElse", map_view_r6);
      i0.ɵɵadvance();
      i0.ɵɵclassProp("hidden", !ctx.displayed)("inset-0", ctx.displayed);
      i0.ɵɵproperty("space", ctx.displayed)("hide_map", ctx.view === "map")("active", ctx.selected_ids.includes(ctx.displayed == null ? null : ctx.displayed.id))("fav", ctx.displayed && ctx.favorites.includes(ctx.displayed == null ? null : ctx.displayed.id));
      i0.ɵɵadvance(2);
      i0.ɵɵproperty("ngIf", ctx.displayed);
      i0.ɵɵadvance();
      i0.ɵɵclassProp("mb-2", ctx.displayed);
      i0.ɵɵproperty("mat-dialog-close", ctx.selected);
      i0.ɵɵadvance(3);
      i0.ɵɵproperty("mat-dialog-close", ctx.selected);
      i0.ɵɵadvance(7);
      i0.ɵɵi18nExp(ctx.selected.length);
      i0.ɵɵi18nApply(30);
      i0.ɵɵadvance();
      i0.ɵɵclassProp("inverse", ctx.isSelected(ctx.displayed == null ? null : ctx.displayed.id));
      i0.ɵɵproperty("disabled", !ctx.displayed);
      i0.ɵɵadvance(3);
      i0.ɵɵtextInterpolate(ctx.isSelected(ctx.displayed == null ? null : ctx.displayed.id) ? "remove" : "add");
      i0.ɵɵadvance(2);
      i0.ɵɵtextInterpolate1(" ", ctx.isSelected(ctx.displayed == null ? null : ctx.displayed.id) ? "Remove from Booking" : "Add to booking", " ");
    }
  }
});
exports.NewSpaceSelectModalComponent = NewSpaceSelectModalComponent;

/***/ }),

/***/ 17309:
/*!***************************************************************************!*\
  !*** ./libs/spaces/src/lib/space-select-modal/space-details.component.ts ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _taggedTemplateLiteral = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js */ 9959)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _SpaceDetailsComponent, _templateObject, _templateObject2, _templateObject3, _templateObject4, _templateObject5;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.SpaceDetailsComponent = void 0;
var core_1 = __webpack_require__(/*! @angular/core */ 37580);
var map_pin_component_1 = __webpack_require__(/*! libs/components/src/lib/map-pin.component */ 71865);
var organisation_service_1 = __webpack_require__(/*! libs/organisation/src/lib/organisation.service */ 19863);
var space_class_1 = __webpack_require__(/*! ../space.class */ 30735);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! libs/organisation/src/lib/organisation.service */ 19863);
var _c0 = function _c0() {
  return {
    disable_pan: true,
    disable_zoom: true
  };
};
function SpaceDetailsComponent_ng_container_0_image_carousel_2_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelement(0, "image-carousel", 23);
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext(2);
    i0.ɵɵproperty("images", ctx_r1.space.images);
  }
}
function SpaceDetailsComponent_ng_container_0_section_33_div_3_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 16)(1, "p");
    i0.ɵɵi18n(2, 4);
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var feature_r3 = ctx.$implicit;
    i0.ɵɵadvance(2);
    i0.ɵɵi18nExp(feature_r3);
    i0.ɵɵi18nApply(2);
  }
}
function SpaceDetailsComponent_ng_container_0_section_33_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "section", 24)(1, "h2", 15);
    i0.ɵɵi18n(2, 3);
    i0.ɵɵelementEnd();
    i0.ɵɵtemplate(3, SpaceDetailsComponent_ng_container_0_section_33_div_3_Template, 3, 1, "div", 25);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance(3);
    i0.ɵɵproperty("ngForOf", ctx_r1.space.features);
  }
}
function SpaceDetailsComponent_ng_container_0_section_34_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "section", 26);
    i0.ɵɵelement(1, "interactive-map", 27);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance();
    i0.ɵɵproperty("src", ctx_r1.map_url)("focus", ctx_r1.space.map_id)("features", ctx_r1.features)("options", i0.ɵɵpureFunction0(4, _c0));
  }
}
function SpaceDetailsComponent_ng_container_0_Template(rf, ctx) {
  if (rf & 1) {
    var _r1 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵelementStart(1, "section", 7);
    i0.ɵɵtemplate(2, SpaceDetailsComponent_ng_container_0_image_carousel_2_Template, 1, 1, "image-carousel", 8);
    i0.ɵɵelementStart(3, "button", 9);
    i0.ɵɵlistener("click", function SpaceDetailsComponent_ng_container_0_Template_button_click_3_listener() {
      i0.ɵɵrestoreView(_r1);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.close.emit());
    });
    i0.ɵɵelementStart(4, "app-icon");
    i0.ɵɵtext(5, "arrow_back");
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(6, "button", 10);
    i0.ɵɵlistener("click", function SpaceDetailsComponent_ng_container_0_Template_button_click_6_listener() {
      i0.ɵɵrestoreView(_r1);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.toggleFav.emit());
    });
    i0.ɵɵelementStart(7, "app-icon");
    i0.ɵɵtext(8);
    i0.ɵɵelementEnd()()();
    i0.ɵɵelementStart(9, "div", 11)(10, "section", 12)(11, "h2", 13);
    i0.ɵɵtext(12);
    i0.ɵɵelementEnd()();
    i0.ɵɵelement(13, "hr");
    i0.ɵɵelementStart(14, "section", 14)(15, "h2", 15);
    i0.ɵɵi18n(16, 1);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(17, "div", 16)(18, "app-icon");
    i0.ɵɵtext(19, "people");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(20, "p");
    i0.ɵɵi18n(21, 2);
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(22, "div", 16)(23, "app-icon");
    i0.ɵɵtext(24, "meeting_room");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(25, "p");
    i0.ɵɵtext(26);
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(27, "div", 16)(28, "app-icon");
    i0.ɵɵtext(29, "place");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(30, "p");
    i0.ɵɵtext(31);
    i0.ɵɵelementEnd()()();
    i0.ɵɵelement(32, "hr");
    i0.ɵɵtemplate(33, SpaceDetailsComponent_ng_container_0_section_33_Template, 4, 1, "section", 17)(34, SpaceDetailsComponent_ng_container_0_section_34_Template, 2, 5, "section", 18);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(35, "div", 19)(36, "button", 20);
    i0.ɵɵlistener("click", function SpaceDetailsComponent_ng_container_0_Template_button_click_36_listener() {
      i0.ɵɵrestoreView(_r1);
      var ctx_r1 = i0.ɵɵnextContext();
      ctx_r1.active = !ctx_r1.active;
      return i0.ɵɵresetView(ctx_r1.activeChange.emit(ctx_r1.active));
    });
    i0.ɵɵelementStart(37, "div", 21)(38, "app-icon", 22);
    i0.ɵɵtext(39);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(40, "p");
    i0.ɵɵtext(41);
    i0.ɵɵelementEnd()()()();
    i0.ɵɵelementContainerEnd();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance();
    i0.ɵɵclassProp("sm:h-64", ctx_r1.space.images == null ? null : ctx_r1.space.images.length)("h-40", ctx_r1.space.images == null ? null : ctx_r1.space.images.length)("sm:h-0", !(ctx_r1.space.images == null ? null : ctx_r1.space.images.length))("h-12", !(ctx_r1.space.images == null ? null : ctx_r1.space.images.length))("!bg-transparent", !(ctx_r1.space.images == null ? null : ctx_r1.space.images.length));
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", ctx_r1.space.images == null ? null : ctx_r1.space.images.length);
    i0.ɵɵadvance(4);
    i0.ɵɵclassProp("text-white", !ctx_r1.fav)("text-blue-400", ctx_r1.fav);
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate(ctx_r1.fav ? "favorite" : "favorite_border");
    i0.ɵɵadvance(4);
    i0.ɵɵtextInterpolate1(" ", ctx_r1.space.display_name || ctx_r1.space.name, " ");
    i0.ɵɵadvance(9);
    i0.ɵɵi18nExp(ctx_r1.space.capacity);
    i0.ɵɵi18nApply(21);
    i0.ɵɵadvance(5);
    i0.ɵɵtextInterpolate1(" ", (ctx_r1.level == null ? null : ctx_r1.level.display_name) || (ctx_r1.level == null ? null : ctx_r1.level.name), " ");
    i0.ɵɵadvance(5);
    i0.ɵɵtextInterpolate1(" ", (ctx_r1.building == null ? null : ctx_r1.building.address) || (ctx_r1.building == null ? null : ctx_r1.building.display_name) || (ctx_r1.building == null ? null : ctx_r1.building.name), " ");
    i0.ɵɵadvance(2);
    i0.ɵɵproperty("ngIf", ctx_r1.space.features == null ? null : ctx_r1.space.features.length);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", !ctx_r1.hide_map);
    i0.ɵɵadvance(2);
    i0.ɵɵclassProp("inverse", ctx_r1.active);
    i0.ɵɵadvance(3);
    i0.ɵɵtextInterpolate(ctx_r1.active ? "remove" : "add");
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate1(" ", ctx_r1.active ? "Remove this room" : "Add this room", " ");
  }
}
function SpaceDetailsComponent_ng_template_1_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 28)(1, "p", 29);
    i0.ɵɵi18n(2, 5);
    i0.ɵɵelementEnd()();
  }
}
var SpaceDetailsComponent = /*#__PURE__*/function () {
  function SpaceDetailsComponent(_org) {
    _classCallCheck(this, SpaceDetailsComponent);
    this._org = _org;
    this.fav = false;
    this.active = false;
    this.hide_map = false;
    this.activeChange = new core_1.EventEmitter();
    this.close = new core_1.EventEmitter();
    this.toggleFav = new core_1.EventEmitter();
    this.map_url = '';
    this.features = [];
  }
  return _createClass(SpaceDetailsComponent, [{
    key: "level",
    get: function get() {
      var _this$space, _this$space2;
      return this._org.levelWithID((_this$space = this.space) === null || _this$space === void 0 ? void 0 : _this$space.zones) || ((_this$space2 = this.space) === null || _this$space2 === void 0 ? void 0 : _this$space2.level);
    }
  }, {
    key: "building",
    get: function get() {
      var _this = this;
      return this._org.buildings.find(function (_) {
        var _this$space3;
        return (_this$space3 = _this.space) === null || _this$space3 === void 0 ? void 0 : _this$space3.zones.includes(_.id);
      });
    }
  }, {
    key: "ngOnChanges",
    value: function ngOnChanges(changes) {
      if (changes.space && this.space) {
        this._updateFeature();
      }
    }
  }, {
    key: "_updateFeature",
    value: function _updateFeature() {
      var _this$level, _this$space4;
      this.map_url = (_this$level = this.level) === null || _this$level === void 0 ? void 0 : _this$level.map_id;
      this.features = [{
        location: (_this$space4 = this.space) === null || _this$space4 === void 0 ? void 0 : _this$space4.map_id,
        content: map_pin_component_1.MapPinComponent
      }];
    }
  }]);
}();
_SpaceDetailsComponent = SpaceDetailsComponent;
_SpaceDetailsComponent.ɵfac = function SpaceDetailsComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _SpaceDetailsComponent)(i0.ɵɵdirectiveInject(i1.OrganisationService));
};
_SpaceDetailsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _SpaceDetailsComponent,
  selectors: [["space-details"]],
  inputs: {
    space: "space",
    fav: "fav",
    active: "active",
    hide_map: "hide_map"
  },
  outputs: {
    activeChange: "activeChange",
    close: "close",
    toggleFav: "toggleFav"
  },
  features: [i0.ɵɵNgOnChangesFeature],
  decls: 3,
  vars: 2,
  consts: function consts() {
    var i18n_0;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_5028777105388019087$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_DETAILS_COMPONENT_TS_0 = goog.getMsg("Details");
      i18n_0 = MSG_EXTERNAL_5028777105388019087$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_DETAILS_COMPONENT_TS_0;
    } else {
      i18n_0 = $localize(_templateObject || (_templateObject = _taggedTemplateLiteral([":\u241F4f8b2bb476981727ab34ed40fde1218361f92c45\u241F5028777105388019087:Details"])));
    }
    var i18n_1;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_2731085793954892186$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_DETAILS_COMPONENT_TS_1 = goog.getMsg("{$interpolation} People", {
        "interpolation": "\uFFFD0\uFFFD"
      }, {
        original_code: {
          "interpolation": "{{ space.capacity }}"
        }
      });
      i18n_1 = MSG_EXTERNAL_2731085793954892186$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_DETAILS_COMPONENT_TS_1;
    } else {
      i18n_1 = $localize(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([":\u241F2fe5caca246424da5e7fcee12a1fe341335e1286\u241F2731085793954892186:", ":INTERPOLATION: People"])), "\uFFFD0\uFFFD");
    }
    var i18n_2;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_3223773701700202859$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_DETAILS_COMPONENT_TS_2 = goog.getMsg("Room Facilities");
      i18n_2 = MSG_EXTERNAL_3223773701700202859$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_DETAILS_COMPONENT_TS_2;
    } else {
      i18n_2 = $localize(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([":\u241F45b5b90d7df8adeb648858761739fa700117c0d5\u241F3223773701700202859:Room Facilities"])));
    }
    var i18n_3;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_1353747351482281557$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_DETAILS_COMPONENT_TS_3 = goog.getMsg("{$interpolation}", {
        "interpolation": "\uFFFD0\uFFFD"
      }, {
        original_code: {
          "interpolation": "{{ feature }}"
        }
      });
      i18n_3 = MSG_EXTERNAL_1353747351482281557$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_DETAILS_COMPONENT_TS_3;
    } else {
      i18n_3 = $localize(_templateObject4 || (_templateObject4 = _taggedTemplateLiteral([":\u241F9a6f64944a2acf1f8315f9ffac43e3fe58bac31f\u241F1353747351482281557:", ":INTERPOLATION:"])), "\uFFFD0\uFFFD");
    }
    var i18n_4;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_5676660199414904214$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_DETAILS_COMPONENT_TS_4 = goog.getMsg(" Select a room to view it's details ");
      i18n_4 = MSG_EXTERNAL_5676660199414904214$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_DETAILS_COMPONENT_TS_4;
    } else {
      i18n_4 = $localize(_templateObject5 || (_templateObject5 = _taggedTemplateLiteral([":\u241F02434c6ff0f41cc7f311ace51ce0787ae315e5fb\u241F5676660199414904214: Select a room to view it's details "])));
    }
    return [["empty_state", ""], i18n_0, i18n_1, i18n_2, i18n_3, i18n_4, [4, "ngIf", "ngIfElse"], ["image", "", 1, "relative", "w-full", "bg-neutral"], ["class", "absolute inset-0", 3, "images", 4, "ngIf"], ["icon", "", "matRipple", "", "name", "close-space-details", 1, "absolute", "top-2", "left-2", "bg-neutral", "sm:hidden", "text-white", 3, "click"], ["icon", "", "matRipple", "", "name", "toggle-space-favourite-details", 1, "absolute", "top-2", "right-2", "bg-neutral", 3, "click"], [1, "p-2", "space-y-2", "flex-1", "h-1/2", "overflow-auto"], ["actions", "", 1, "z-0"], [1, "text-xl", "font-medium", "mb-2", "mt-4"], ["details", "", 1, "space-y-2"], [1, "text-xl", "font-medium"], [1, "flex", "items-center", "space-x-2"], ["facilities", "", "class", "space-y-2", 4, "ngIf"], ["map", "", "class", "w-full mx-auto h-64 sm:h-48 relative border border-base-200 overflow-hidden rounded", 4, "ngIf"], [1, "px-2", "pt-2", "pb-[5.5rem]", "border-t", "border-base-200", "shadow", "sm:hidden"], ["btn", "", "matRipple", "", "name", "toggle-space-details", 1, "w-full", 3, "click"], [1, "flex", "items-center", "justify-center"], [1, "text-2xl"], [1, "absolute", "inset-0", 3, "images"], ["facilities", "", 1, "space-y-2"], ["class", "flex items-center space-x-2", 4, "ngFor", "ngForOf"], ["map", "", 1, "w-full", "mx-auto", "h-64", "sm:h-48", "relative", "border", "border-base-200", "overflow-hidden", "rounded"], [1, "pointer-events-none", 3, "src", "focus", "features", "options"], ["empty", "", 1, "p-16", "flex", "flex-col", "items-center", "justify-center", "space-y-2"], [1, "opacity-30", "text-center"]];
  },
  template: function SpaceDetailsComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵtemplate(0, SpaceDetailsComponent_ng_container_0_Template, 42, 26, "ng-container", 6)(1, SpaceDetailsComponent_ng_template_1_Template, 3, 0, "ng-template", null, 0, i0.ɵɵtemplateRefExtractor);
    }
    if (rf & 2) {
      var empty_state_r4 = i0.ɵɵreference(2);
      i0.ɵɵproperty("ngIf", ctx.space)("ngIfElse", empty_state_r4);
    }
  },
  styles: ["[_nghost-%COMP%] {\n                position: relative;\n                display: flex;\n                flex-direction: column;\n                width: 30%;\n                min-width: 20rem;\n                height: 100%;\n                min-height: 65vh;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNwYWNlLWRldGFpbHMuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxrQkFBa0I7Z0JBQ2xCLGFBQWE7Z0JBQ2Isc0JBQXNCO2dCQUN0QixVQUFVO2dCQUNWLGdCQUFnQjtnQkFDaEIsWUFBWTtnQkFDWixnQkFBZ0I7WUFDcEIiLCJmaWxlIjoic3BhY2UtZGV0YWlscy5jb21wb25lbnQudHMiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIDpob3N0IHtcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgICAgICAgIHdpZHRoOiAzMCU7XG4gICAgICAgICAgICAgICAgbWluLXdpZHRoOiAyMHJlbTtcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgICAgICAgICAgbWluLWhlaWdodDogNjV2aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl19 */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvc3BhY2VzL3NyYy9saWIvc3BhY2Utc2VsZWN0LW1vZGFsL3NwYWNlLWRldGFpbHMuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxrQkFBa0I7Z0JBQ2xCLGFBQWE7Z0JBQ2Isc0JBQXNCO2dCQUN0QixVQUFVO2dCQUNWLGdCQUFnQjtnQkFDaEIsWUFBWTtnQkFDWixnQkFBZ0I7WUFDcEI7O0FBRVosNHVCQUE0dUIiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIDpob3N0IHtcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgICAgICAgIHdpZHRoOiAzMCU7XG4gICAgICAgICAgICAgICAgbWluLXdpZHRoOiAyMHJlbTtcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgICAgICAgICAgbWluLWhlaWdodDogNjV2aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl0sInNvdXJjZVJvb3QiOiIifQ== */"]
});
exports.SpaceDetailsComponent = SpaceDetailsComponent;

/***/ }),

/***/ 62779:
/*!***********************************************************************************!*\
  !*** ./libs/spaces/src/lib/space-select-modal/space-filters-display.component.ts ***!
  \***********************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _taggedTemplateLiteral = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js */ 9959)["default"]);
var _regeneratorRuntime = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/regeneratorRuntime.js */ 8698)["default"]);
var _objectSpread = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/objectSpread2.js */ 34092)["default"]);
var _asyncToGenerator = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/asyncToGenerator.js */ 95386)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _callSuper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/callSuper.js */ 8513)["default"]);
var _inherits = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/inherits.js */ 58160)["default"]);
var _SpaceFiltersDisplayComponent, _templateObject, _templateObject2, _templateObject3, _templateObject4;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.SpaceFiltersDisplayComponent = void 0;
var core_1 = __webpack_require__(/*! @angular/core */ 37580);
var bottom_sheet_1 = __webpack_require__(/*! @angular/material/bottom-sheet */ 15244);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var event_form_service_1 = __webpack_require__(/*! libs/events/src/lib/event-form.service */ 26101);
var organisation_service_1 = __webpack_require__(/*! libs/organisation/src/lib/organisation.service */ 19863);
var operators_1 = __webpack_require__(/*! rxjs/operators */ 97303);
var space_filters_component_1 = __webpack_require__(/*! ./space-filters.component */ 62796);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @angular/material/bottom-sheet */ 15244);
var i2 = __webpack_require__(/*! libs/events/src/lib/event-form.service */ 26101);
var i3 = __webpack_require__(/*! libs/organisation/src/lib/organisation.service */ 19863);
var i4 = __webpack_require__(/*! @placeos/common */ 22797);
var i5 = __webpack_require__(/*! @angular/common */ 60316);
var i6 = __webpack_require__(/*! ../../../../components/src/lib/icon.component */ 69434);
var i7 = __webpack_require__(/*! @angular/material/core */ 74646);
function SpaceFiltersDisplayComponent_button_9_Template(rf, ctx) {
  if (rf & 1) {
    var _r1 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "button", 17);
    i0.ɵɵlistener("click", function SpaceFiltersDisplayComponent_button_9_Template_button_click_0_listener() {
      i0.ɵɵrestoreView(_r1);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.removeAllFeatures());
    });
    i0.ɵɵtext(1, " Clear Filters ");
    i0.ɵɵelementEnd();
  }
}
function SpaceFiltersDisplayComponent_div_11_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 18);
    i0.ɵɵtext(1);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", ctx_r1.location, " ");
  }
}
function SpaceFiltersDisplayComponent_ng_container_16_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵtext(1);
    i0.ɵɵpipe(2, "date");
    i0.ɵɵpipe(3, "date");
    i0.ɵɵelementContainerEnd();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate2(" ", i0.ɵɵpipeBind2(2, 2, ctx_r1.start, ctx_r1.time_format), " \u2014 ", i0.ɵɵpipeBind2(3, 5, ctx_r1.end, ctx_r1.time_format), " ");
  }
}
function SpaceFiltersDisplayComponent_ng_container_17_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵtext(1, "All Day");
    i0.ɵɵelementContainerEnd();
  }
}
function SpaceFiltersDisplayComponent_div_21_Template(rf, ctx) {
  if (rf & 1) {
    var _r3 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 19)(1, "p", 20);
    i0.ɵɵtext(2);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(3, "button", 21);
    i0.ɵɵlistener("click", function SpaceFiltersDisplayComponent_div_21_Template_button_click_3_listener() {
      var feat_r4 = i0.ɵɵrestoreView(_r3).$implicit;
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.removeFeature(feat_r4));
    });
    i0.ɵɵelementStart(4, "app-icon");
    i0.ɵɵtext(5, "close");
    i0.ɵɵelementEnd()()();
  }
  if (rf & 2) {
    var feat_r4 = ctx.$implicit;
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate(feat_r4);
  }
}
var SpaceFiltersDisplayComponent = /*#__PURE__*/function (_common_1$AsyncHandle) {
  function SpaceFiltersDisplayComponent(_bsheet, _event_form, _org, _settings) {
    var _this;
    _classCallCheck(this, SpaceFiltersDisplayComponent);
    _this = _callSuper(this, SpaceFiltersDisplayComponent);
    _this._bsheet = _bsheet;
    _this._event_form = _event_form;
    _this._org = _org;
    _this._settings = _settings;
    _this.view = 'list';
    _this.viewChange = new core_1.EventEmitter();
    _this.options = _this._event_form.options;
    _this.location = '';
    _this.editFilters = function () {
      return _this._bsheet.open(space_filters_component_1.SpaceFiltersComponent);
    };
    return _this;
  }
  _inherits(SpaceFiltersDisplayComponent, _common_1$AsyncHandle);
  return _createClass(SpaceFiltersDisplayComponent, [{
    key: "all_day",
    get: function get() {
      return this._event_form.form.value.all_day;
    }
  }, {
    key: "start",
    get: function get() {
      return this._event_form.form.value.date;
    }
  }, {
    key: "end",
    get: function get() {
      var _this$_event_form$for = this._event_form.form.value,
        date = _this$_event_form$for.date,
        duration = _this$_event_form$for.duration;
      return date + duration * 60 * 1000;
    }
  }, {
    key: "time_format",
    get: function get() {
      return this._settings.time_format;
    }
  }, {
    key: "ngOnInit",
    value: function ngOnInit() {
      var _this2 = this;
      this.subscription('opts', this.options.subscribe(function (_ref) {
        var zone_ids = _ref.zone_ids;
        return _this2._updateLocation(zone_ids);
      }));
    }
  }, {
    key: "removeFeature",
    value: function () {
      var _removeFeature = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(feat) {
        var value;
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              _context.next = 2;
              return this._event_form.options.pipe((0, operators_1.take)(1)).toPromise();
            case 2:
              value = _context.sent;
              this._event_form.setOptions(_objectSpread(_objectSpread({}, value), {}, {
                features: (value.features || []).filter(function (_) {
                  return _ !== feat;
                })
              }));
            case 4:
            case "end":
              return _context.stop();
          }
        }, _callee, this);
      }));
      function removeFeature(_x) {
        return _removeFeature.apply(this, arguments);
      }
      return removeFeature;
    }()
  }, {
    key: "removeAllFeatures",
    value: function () {
      var _removeAllFeatures = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {
        var value;
        return _regeneratorRuntime().wrap(function _callee2$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              _context2.next = 2;
              return this._event_form.options.pipe((0, operators_1.take)(1)).toPromise();
            case 2:
              value = _context2.sent;
              this._event_form.setOptions(_objectSpread(_objectSpread({}, value), {}, {
                features: []
              }));
            case 4:
            case "end":
              return _context2.stop();
          }
        }, _callee2, this);
      }));
      function removeAllFeatures() {
        return _removeAllFeatures.apply(this, arguments);
      }
      return removeAllFeatures;
    }()
  }, {
    key: "_updateLocation",
    value: function _updateLocation() {
      var zone_ids = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];
      var level = this._org.levelWithID(zone_ids);
      var item = level || this._org.building;
      this.location = (item === null || item === void 0 ? void 0 : item.display_name) || (item === null || item === void 0 ? void 0 : item.name) || '';
    }
  }]);
}(common_1.AsyncHandler);
_SpaceFiltersDisplayComponent = SpaceFiltersDisplayComponent;
_SpaceFiltersDisplayComponent.ɵfac = function SpaceFiltersDisplayComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _SpaceFiltersDisplayComponent)(i0.ɵɵdirectiveInject(i1.MatBottomSheet), i0.ɵɵdirectiveInject(i2.EventFormService), i0.ɵɵdirectiveInject(i3.OrganisationService), i0.ɵɵdirectiveInject(i4.SettingsService));
};
_SpaceFiltersDisplayComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _SpaceFiltersDisplayComponent,
  selectors: [["space-filters-display"]],
  inputs: {
    view: "view"
  },
  outputs: {
    viewChange: "viewChange"
  },
  features: [i0.ɵɵInheritDefinitionFeature],
  decls: 23,
  vars: 20,
  consts: function consts() {
    var i18n_0;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_5208858215712453646$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_FILTERS_DISPLAY_COMPONENT_TS_0 = goog.getMsg(" Filters ");
      i18n_0 = MSG_EXTERNAL_5208858215712453646$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_FILTERS_DISPLAY_COMPONENT_TS_0;
    } else {
      i18n_0 = $localize(_templateObject || (_templateObject = _taggedTemplateLiteral([":\u241F19eaa5cd51d70d9ea957eecac78cfd811e9b93d8\u241F5208858215712453646: Filters "])));
    }
    var i18n_1;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_8553228906889869186$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_FILTERS_DISPLAY_COMPONENT_TS_1 = goog.getMsg(" Map ");
      i18n_1 = MSG_EXTERNAL_8553228906889869186$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_FILTERS_DISPLAY_COMPONENT_TS_1;
    } else {
      i18n_1 = $localize(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([":\u241F992a9a6a193a56c5b8846dc972c5e1977ee5f1aa\u241F8553228906889869186: Map "])));
    }
    var i18n_2;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_7787942140742011951$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_FILTERS_DISPLAY_COMPONENT_TS_2 = goog.getMsg(" List ");
      i18n_2 = MSG_EXTERNAL_7787942140742011951$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_FILTERS_DISPLAY_COMPONENT_TS_2;
    } else {
      i18n_2 = $localize(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([":\u241F4b286e90831dd637c5cd3eb20544664ee7112669\u241F7787942140742011951: List "])));
    }
    var i18n_3;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_5300384898733875729$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_FILTERS_DISPLAY_COMPONENT_TS_3 = goog.getMsg(" Min. {$interpolation} People ", {
        "interpolation": "\uFFFD0\uFFFD"
      }, {
        original_code: {
          "interpolation": "{{ (options | async)?.capacity || 2 }}"
        }
      });
      i18n_3 = MSG_EXTERNAL_5300384898733875729$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_FILTERS_DISPLAY_COMPONENT_TS_3;
    } else {
      i18n_3 = $localize(_templateObject4 || (_templateObject4 = _taggedTemplateLiteral([":\u241Fdfdd3d7879401ba6edca2e5198df414f15c112c2\u241F5300384898733875729: Min. ", ":INTERPOLATION: People "])), "\uFFFD0\uFFFD");
    }
    return [i18n_0, i18n_1, i18n_2, i18n_3, ["actions", "", 1, "sm:hidden", "space-x-2", "flex", "items-center", "p-2"], ["btn", "", "matRipple", "", "name", "edit-space-filters", 1, "flex-1", "w-1/2", 3, "click"], [1, "flex", "items-center"], ["btn", "", "matRipple", "", "name", "view-space-map", 1, "rounded-l", "rounded-r-none", 3, "click"], ["btn", "", "matRipple", "", "name", "view-space-list", 1, "rounded-r", "rounded-l-none", 3, "click"], ["filters", "", 1, "flex", "items-center", "flex-wrap", "p-2", "w-[35rem]", "max-w-full", "sm:max-w-[35rem]"], ["btn", "", "matRipple", "", "name", "clear-space-filters", "class", "min-h-[2rem] mb-2 mr-2", 3, "click", 4, "ngIf"], ["filter-item", "", "zone", "", 4, "ngIf"], ["filter-item", "", "date", ""], ["filter-item", "", "time", ""], [4, "ngIf"], ["filter-item", "", "count", ""], ["filter-item", "", 4, "ngFor", "ngForOf"], ["btn", "", "matRipple", "", "name", "clear-space-filters", 1, "min-h-[2rem]", "mb-2", "mr-2", 3, "click"], ["filter-item", "", "zone", ""], ["filter-item", ""], [1, "truncate"], ["icon", "", "matRipple", "", "name", "remove-space-filter", 1, "-mr-4", 3, "click"]];
  },
  template: function SpaceFiltersDisplayComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵelementStart(0, "section", 4)(1, "button", 5);
      i0.ɵɵlistener("click", function SpaceFiltersDisplayComponent_Template_button_click_1_listener() {
        return ctx.editFilters();
      });
      i0.ɵɵi18n(2, 0);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(3, "div", 6)(4, "button", 7);
      i0.ɵɵlistener("click", function SpaceFiltersDisplayComponent_Template_button_click_4_listener() {
        ctx.view = "map";
        return ctx.viewChange.emit(ctx.view);
      });
      i0.ɵɵi18n(5, 1);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(6, "button", 8);
      i0.ɵɵlistener("click", function SpaceFiltersDisplayComponent_Template_button_click_6_listener() {
        ctx.view = "list";
        return ctx.viewChange.emit(ctx.view);
      });
      i0.ɵɵi18n(7, 2);
      i0.ɵɵelementEnd()()();
      i0.ɵɵelementStart(8, "section", 9);
      i0.ɵɵtemplate(9, SpaceFiltersDisplayComponent_button_9_Template, 2, 0, "button", 10);
      i0.ɵɵpipe(10, "async");
      i0.ɵɵtemplate(11, SpaceFiltersDisplayComponent_div_11_Template, 2, 1, "div", 11);
      i0.ɵɵelementStart(12, "div", 12);
      i0.ɵɵtext(13);
      i0.ɵɵpipe(14, "date");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(15, "div", 13);
      i0.ɵɵtemplate(16, SpaceFiltersDisplayComponent_ng_container_16_Template, 4, 8, "ng-container", 14)(17, SpaceFiltersDisplayComponent_ng_container_17_Template, 2, 0, "ng-container", 14);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(18, "div", 15);
      i0.ɵɵi18n(19, 3);
      i0.ɵɵpipe(20, "async");
      i0.ɵɵelementEnd();
      i0.ɵɵtemplate(21, SpaceFiltersDisplayComponent_div_21_Template, 6, 1, "div", 16);
      i0.ɵɵpipe(22, "async");
      i0.ɵɵelementEnd();
    }
    if (rf & 2) {
      var tmp_2_0;
      var tmp_7_0;
      var tmp_9_0;
      i0.ɵɵadvance(4);
      i0.ɵɵclassProp("inverse", ctx.view !== "map");
      i0.ɵɵadvance(2);
      i0.ɵɵclassProp("inverse", ctx.view !== "list");
      i0.ɵɵadvance(3);
      i0.ɵɵproperty("ngIf", ((tmp_2_0 = i0.ɵɵpipeBind1(10, 11, ctx.options)) == null ? null : tmp_2_0.features == null ? null : tmp_2_0.features.length) > 1);
      i0.ɵɵadvance(2);
      i0.ɵɵproperty("ngIf", ctx.location);
      i0.ɵɵadvance(2);
      i0.ɵɵtextInterpolate1(" ", i0.ɵɵpipeBind2(14, 13, ctx.start, "mediumDate"), " ");
      i0.ɵɵadvance(3);
      i0.ɵɵproperty("ngIf", !ctx.all_day);
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", ctx.all_day);
      i0.ɵɵadvance(3);
      i0.ɵɵi18nExp(((tmp_7_0 = i0.ɵɵpipeBind1(20, 16, ctx.options)) == null ? null : tmp_7_0.capacity) || 2);
      i0.ɵɵi18nApply(19);
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngForOf", (tmp_9_0 = i0.ɵɵpipeBind1(22, 18, ctx.options)) == null ? null : tmp_9_0.features);
    }
  },
  dependencies: [i5.NgForOf, i5.NgIf, i6.IconComponent, i7.MatRipple, i5.AsyncPipe, i5.DatePipe],
  styles: ["[filter-item][_ngcontent-%COMP%] {\n                display: flex;\n                align-items: center;\n                padding: 0 1rem;\n                min-height: 2rem;\n                font-size: 0.875rem;\n                border: 1px solid rgba(0, 0, 0, 0.2);\n                border-radius: 1.25rem;\n                margin-right: 0.5rem;\n                margin-bottom: 0.5rem;\n                max-width: 100%;\n                text-align: center;\n            }\n\n            [filter-item][_ngcontent-%COMP%]:hover {\n                background: rgba(0, 0, 0, 0.1);\n            }\n\n            [filter-item][_ngcontent-%COMP%]    > *[_ngcontent-%COMP%]    + *[_ngcontent-%COMP%] {\n                margin-left: 0.5rem;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNwYWNlLWZpbHRlcnMtZGlzcGxheS5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLGFBQWE7Z0JBQ2IsbUJBQW1CO2dCQUNuQixlQUFlO2dCQUNmLGdCQUFnQjtnQkFDaEIsbUJBQW1CO2dCQUNuQixvQ0FBb0M7Z0JBQ3BDLHNCQUFzQjtnQkFDdEIsb0JBQW9CO2dCQUNwQixxQkFBcUI7Z0JBQ3JCLGVBQWU7Z0JBQ2Ysa0JBQWtCO1lBQ3RCOztZQUVBO2dCQUNJLDhCQUE4QjtZQUNsQzs7WUFFQTtnQkFDSSxtQkFBbUI7WUFDdkIiLCJmaWxlIjoic3BhY2UtZmlsdGVycy1kaXNwbGF5LmNvbXBvbmVudC50cyIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgW2ZpbHRlci1pdGVtXSB7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICAgICAgICAgIHBhZGRpbmc6IDAgMXJlbTtcbiAgICAgICAgICAgICAgICBtaW4taGVpZ2h0OiAycmVtO1xuICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMC44NzVyZW07XG4gICAgICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgcmdiYSgwLCAwLCAwLCAwLjIpO1xuICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDEuMjVyZW07XG4gICAgICAgICAgICAgICAgbWFyZ2luLXJpZ2h0OiAwLjVyZW07XG4gICAgICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMC41cmVtO1xuICAgICAgICAgICAgICAgIG1heC13aWR0aDogMTAwJTtcbiAgICAgICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIFtmaWx0ZXItaXRlbV06aG92ZXIge1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IHJnYmEoMCwgMCwgMCwgMC4xKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgW2ZpbHRlci1pdGVtXSA+ICogKyAqIHtcbiAgICAgICAgICAgICAgICBtYXJnaW4tbGVmdDogMC41cmVtO1xuICAgICAgICAgICAgfVxuICAgICAgICAiXX0= */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvc3BhY2VzL3NyYy9saWIvc3BhY2Utc2VsZWN0LW1vZGFsL3NwYWNlLWZpbHRlcnMtZGlzcGxheS5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLGFBQWE7Z0JBQ2IsbUJBQW1CO2dCQUNuQixlQUFlO2dCQUNmLGdCQUFnQjtnQkFDaEIsbUJBQW1CO2dCQUNuQixvQ0FBb0M7Z0JBQ3BDLHNCQUFzQjtnQkFDdEIsb0JBQW9CO2dCQUNwQixxQkFBcUI7Z0JBQ3JCLGVBQWU7Z0JBQ2Ysa0JBQWtCO1lBQ3RCOztZQUVBO2dCQUNJLDhCQUE4QjtZQUNsQzs7WUFFQTtnQkFDSSxtQkFBbUI7WUFDdkI7O0FBRVosZzVDQUFnNUMiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIFtmaWx0ZXItaXRlbV0ge1xuICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiAwIDFyZW07XG4gICAgICAgICAgICAgICAgbWluLWhlaWdodDogMnJlbTtcbiAgICAgICAgICAgICAgICBmb250LXNpemU6IDAuODc1cmVtO1xuICAgICAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHJnYmEoMCwgMCwgMCwgMC4yKTtcbiAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiAxLjI1cmVtO1xuICAgICAgICAgICAgICAgIG1hcmdpbi1yaWdodDogMC41cmVtO1xuICAgICAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDAuNXJlbTtcbiAgICAgICAgICAgICAgICBtYXgtd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBbZmlsdGVyLWl0ZW1dOmhvdmVyIHtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiByZ2JhKDAsIDAsIDAsIDAuMSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIFtmaWx0ZXItaXRlbV0gPiAqICsgKiB7XG4gICAgICAgICAgICAgICAgbWFyZ2luLWxlZnQ6IDAuNXJlbTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl0sInNvdXJjZVJvb3QiOiIifQ== */"]
});
exports.SpaceFiltersDisplayComponent = SpaceFiltersDisplayComponent;

/***/ }),

/***/ 62796:
/*!***************************************************************************!*\
  !*** ./libs/spaces/src/lib/space-select-modal/space-filters.component.ts ***!
  \***************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _taggedTemplateLiteral = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js */ 9959)["default"]);
var _regeneratorRuntime = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/regeneratorRuntime.js */ 8698)["default"]);
var _asyncToGenerator = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/asyncToGenerator.js */ 95386)["default"]);
var _slicedToArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/slicedToArray.js */ 6282)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _SpaceFiltersComponent, _templateObject, _templateObject2, _templateObject3, _templateObject4, _templateObject5, _templateObject6, _templateObject7, _templateObject8, _templateObject9, _templateObject10, _templateObject11, _templateObject12, _templateObject13;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.SpaceFiltersComponent = void 0;
var bottom_sheet_1 = __webpack_require__(/*! @angular/material/bottom-sheet */ 15244);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var date_fns_1 = __webpack_require__(/*! date-fns */ 25773);
var rxjs_1 = __webpack_require__(/*! rxjs */ 15681);
var operators_1 = __webpack_require__(/*! rxjs/operators */ 97303);
var event_form_service_1 = __webpack_require__(/*! libs/events/src/lib/event-form.service */ 26101);
var organisation_service_1 = __webpack_require__(/*! libs/organisation/src/lib/organisation.service */ 19863);
var spaces_service_1 = __webpack_require__(/*! ../spaces.service */ 7401);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @angular/material/bottom-sheet */ 15244);
var i2 = __webpack_require__(/*! @placeos/common */ 22797);
var i3 = __webpack_require__(/*! libs/events/src/lib/event-form.service */ 26101);
var i4 = __webpack_require__(/*! libs/organisation/src/lib/organisation.service */ 19863);
var i5 = __webpack_require__(/*! ../spaces.service */ 7401);
var _c0 = function _c0() {
  return {
    standalone: true
  };
};
function SpaceFiltersComponent_button_2_Template(rf, ctx) {
  if (rf & 1) {
    var _r1 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "button", 32);
    i0.ɵɵlistener("click", function SpaceFiltersComponent_button_2_Template_button_click_0_listener() {
      i0.ɵɵrestoreView(_r1);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.close());
    });
    i0.ɵɵelementStart(1, "app-icon");
    i0.ɵɵtext(2, "keyboard_arrow_left");
    i0.ɵɵelementEnd()();
  }
}
function SpaceFiltersComponent_mat_form_field_13_mat_option_2_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "mat-option", 36);
    i0.ɵɵtext(1);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var reg_r4 = ctx.$implicit;
    i0.ɵɵproperty("value", reg_r4);
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", reg_r4.display_name || reg_r4.name, " ");
  }
}
function SpaceFiltersComponent_mat_form_field_13_Template(rf, ctx) {
  if (rf & 1) {
    var _r3 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "mat-form-field", 33)(1, "mat-select", 34);
    i0.ɵɵlistener("ngModelChange", function SpaceFiltersComponent_mat_form_field_13_Template_mat_select_ngModelChange_1_listener($event) {
      i0.ɵɵrestoreView(_r3);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.setRegion($event));
    });
    i0.ɵɵtemplate(2, SpaceFiltersComponent_mat_form_field_13_mat_option_2_Template, 2, 2, "mat-option", 35);
    i0.ɵɵpipe(3, "async");
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngModel", ctx_r1.region)("ngModelOptions", i0.ɵɵpureFunction0(5, _c0));
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngForOf", i0.ɵɵpipeBind1(3, 3, ctx_r1.regions));
  }
}
function SpaceFiltersComponent_mat_form_field_15_mat_option_5_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "mat-option", 36);
    i0.ɵɵtext(1);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var bld_r6 = ctx.$implicit;
    i0.ɵɵproperty("value", bld_r6);
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", bld_r6.display_name || bld_r6.name, " ");
  }
}
function SpaceFiltersComponent_mat_form_field_15_Template(rf, ctx) {
  if (rf & 1) {
    var _r5 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "mat-form-field", 33)(1, "mat-select", 37);
    i0.ɵɵpipe(2, "async");
    i0.ɵɵpipe(3, "async");
    i0.ɵɵpipe(4, "async");
    i0.ɵɵlistener("ngModelChange", function SpaceFiltersComponent_mat_form_field_15_Template_mat_select_ngModelChange_1_listener($event) {
      i0.ɵɵrestoreView(_r5);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.setBuilding($event));
    });
    i0.ɵɵtemplate(5, SpaceFiltersComponent_mat_form_field_15_mat_option_5_Template, 2, 2, "mat-option", 35);
    i0.ɵɵpipe(6, "async");
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var tmp_3_0;
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngModel", i0.ɵɵpipeBind1(2, 4, ctx_r1.building))("ngModelOptions", i0.ɵɵpureFunction0(12, _c0))("placeholder", ((tmp_3_0 = i0.ɵɵpipeBind1(3, 6, ctx_r1.building)) == null ? null : tmp_3_0.display_name) || ((tmp_3_0 = i0.ɵɵpipeBind1(4, 8, ctx_r1.building)) == null ? null : tmp_3_0.name));
    i0.ɵɵadvance(4);
    i0.ɵɵproperty("ngForOf", i0.ɵɵpipeBind1(6, 10, ctx_r1.buildings));
  }
}
function SpaceFiltersComponent_mat_form_field_17_mat_option_3_div_2_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 41);
    i0.ɵɵtext(1);
    i0.ɵɵpipe(2, "building");
    i0.ɵɵelementStart(3, "span", 42);
    i0.ɵɵtext(4, " - ");
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var tmp_4_0;
    var lvl_r8 = i0.ɵɵnextContext().$implicit;
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", (tmp_4_0 = i0.ɵɵpipeBind1(2, 1, lvl_r8.parent_id)) == null ? null : tmp_4_0.display_name, " ");
  }
}
function SpaceFiltersComponent_mat_form_field_17_mat_option_3_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "mat-option", 36)(1, "div", 39);
    i0.ɵɵtemplate(2, SpaceFiltersComponent_mat_form_field_17_mat_option_3_div_2_Template, 5, 3, "div", 40);
    i0.ɵɵelementStart(3, "div");
    i0.ɵɵtext(4);
    i0.ɵɵelementEnd()()();
  }
  if (rf & 2) {
    var lvl_r8 = ctx.$implicit;
    var ctx_r1 = i0.ɵɵnextContext(2);
    i0.ɵɵproperty("value", lvl_r8.id);
    i0.ɵɵadvance(2);
    i0.ɵɵproperty("ngIf", ctx_r1.use_region);
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate1(" ", lvl_r8.display_name || lvl_r8.name, " ");
  }
}
function SpaceFiltersComponent_mat_form_field_17_Template(rf, ctx) {
  if (rf & 1) {
    var _r7 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "mat-form-field", 33)(1, "mat-select", 38);
    i0.ɵɵpipe(2, "async");
    i0.ɵɵlistener("ngModelChange", function SpaceFiltersComponent_mat_form_field_17_Template_mat_select_ngModelChange_1_listener($event) {
      i0.ɵɵrestoreView(_r7);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.setOptions({
        zone_ids: $event
      }));
    });
    i0.ɵɵtemplate(3, SpaceFiltersComponent_mat_form_field_17_mat_option_3_Template, 5, 3, "mat-option", 35);
    i0.ɵɵpipe(4, "async");
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var tmp_1_0;
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngModel", (tmp_1_0 = i0.ɵɵpipeBind1(2, 4, ctx_r1.options)) == null ? null : tmp_1_0.zone_ids)("ngModelOptions", i0.ɵɵpureFunction0(8, _c0))("multiple", true);
    i0.ɵɵadvance(2);
    i0.ɵɵproperty("ngForOf", i0.ɵɵpipeBind1(4, 6, ctx_r1.levels));
  }
}
function SpaceFiltersComponent_div_26_Template(rf, ctx) {
  if (rf & 1) {
    var _r9 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 43)(1, "label", 24);
    i0.ɵɵtext(2);
    i0.ɵɵpipe(3, "translate");
    i0.ɵɵelementStart(4, "span");
    i0.ɵɵtext(5, "*");
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(6, "a-date-field", 44);
    i0.ɵɵlistener("ngModelChange", function SpaceFiltersComponent_div_26_Template_a_date_field_ngModelChange_6_listener($event) {
      i0.ɵɵrestoreView(_r9);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.form.patchValue({
        date_end: $event
      }));
    });
    i0.ɵɵtext(7);
    i0.ɵɵpipe(8, "translate");
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate1(" ", i0.ɵɵpipeBind1(3, 9, "FORM.END_DATE"), "");
    i0.ɵɵadvance(4);
    i0.ɵɵproperty("ngModel", ctx_r1.form.getRawValue().date_end)("ngModelOptions", i0.ɵɵpureFunction0(13, _c0))("from", ctx_r1.start_date)("to", ctx_r1.end_date)("short", true)("timezone", ctx_r1.timezone)("range", 2);
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", i0.ɵɵpipeBind1(8, 11, "FORM.DATE_ERROR"), " ");
  }
}
function SpaceFiltersComponent_div_27_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 45)(1, "mat-checkbox", 46);
    i0.ɵɵi18n(2, 5);
    i0.ɵɵelementEnd()();
  }
}
function SpaceFiltersComponent_div_28_div_6_Template(rf, ctx) {
  if (rf & 1) {
    var _r11 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 48)(1, "label", 52);
    i0.ɵɵtext(2);
    i0.ɵɵpipe(3, "translate");
    i0.ɵɵelementStart(4, "span");
    i0.ɵɵtext(5, "*");
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(6, "a-time-field", 53);
    i0.ɵɵlistener("ngModelChange", function SpaceFiltersComponent_div_28_div_6_Template_a_time_field_ngModelChange_6_listener($event) {
      i0.ɵɵrestoreView(_r11);
      var ctx_r1 = i0.ɵɵnextContext(2);
      return i0.ɵɵresetView(ctx_r1.form.patchValue({
        date_end: $event
      }));
    });
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var tmp_5_0;
    var ctx_r1 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate1(" ", i0.ɵɵpipeBind1(3, 6, "FORM.END_TIME"), "");
    i0.ɵɵadvance(4);
    i0.ɵɵproperty("ngModel", ctx_r1.form.value.date_end)("ngModelOptions", i0.ɵɵpureFunction0(8, _c0))("from", ctx_r1.form == null ? null : (tmp_5_0 = ctx_r1.form.getRawValue()) == null ? null : tmp_5_0.date)("use_24hr", ctx_r1.use_24hr)("timezone", ctx_r1.timezone);
  }
}
function SpaceFiltersComponent_div_28_div_7_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 48)(1, "label", 52);
    i0.ɵɵtext(2);
    i0.ɵɵpipe(3, "translate");
    i0.ɵɵelementStart(4, "span");
    i0.ɵɵtext(5, "*");
    i0.ɵɵelementEnd()();
    i0.ɵɵelement(6, "a-duration-field", 54);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var tmp_3_0;
    var ctx_r1 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate1(" ", i0.ɵɵpipeBind1(3, 5, "FORM.END_TIME"), "");
    i0.ɵɵadvance(4);
    i0.ɵɵproperty("time", ctx_r1.form == null ? null : (tmp_3_0 = ctx_r1.form.getRawValue()) == null ? null : tmp_3_0.date)("max", ctx_r1.max_duration)("use_24hr", ctx_r1.use_24hr)("timezone", ctx_r1.timezone);
  }
}
function SpaceFiltersComponent_div_28_Template(rf, ctx) {
  if (rf & 1) {
    var _r10 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 47)(1, "div", 48)(2, "label", 49);
    i0.ɵɵi18nStart(3, 6);
    i0.ɵɵelement(4, "span");
    i0.ɵɵi18nEnd();
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(5, "a-time-field", 50);
    i0.ɵɵlistener("ngModelChange", function SpaceFiltersComponent_div_28_Template_a_time_field_ngModelChange_5_listener($event) {
      i0.ɵɵrestoreView(_r10);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.form.patchValue({
        date: $event
      }));
    });
    i0.ɵɵelementEnd()();
    i0.ɵɵtemplate(6, SpaceFiltersComponent_div_28_div_6_Template, 7, 9, "div", 51)(7, SpaceFiltersComponent_div_28_div_7_Template, 7, 7, "div", 51);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance(5);
    i0.ɵɵproperty("ngModel", ctx_r1.form.getRawValue().date)("ngModelOptions", i0.ɵɵpureFunction0(6, _c0))("use_24hr", ctx_r1.use_24hr)("timezone", ctx_r1.timezone);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", ctx_r1.multiday);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", !ctx_r1.multiday);
  }
}
function SpaceFiltersComponent_section_29_Template(rf, ctx) {
  if (rf & 1) {
    var _r12 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "section", 55)(1, "h2", 56);
    i0.ɵɵi18n(2, 7);
    i0.ɵɵpipe(3, "translate");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(4, "div", 57)(5, "div", 58);
    i0.ɵɵi18n(6, 8);
    i0.ɵɵpipe(7, "translate");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(8, "mat-checkbox", 59);
    i0.ɵɵpipe(9, "async");
    i0.ɵɵlistener("ngModelChange", function SpaceFiltersComponent_section_29_Template_mat_checkbox_ngModelChange_8_listener($event) {
      i0.ɵɵrestoreView(_r12);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.setOptions({
        show_fav: $event
      }));
    });
    i0.ɵɵelementEnd()()();
  }
  if (rf & 2) {
    var tmp_5_0;
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance(3);
    i0.ɵɵi18nExp(i0.ɵɵpipeBind1(3, 4, "COMMON.FAVOURITES"));
    i0.ɵɵi18nApply(2);
    i0.ɵɵadvance(4);
    i0.ɵɵi18nExp(i0.ɵɵpipeBind1(7, 6, "ROOMS.SHOW_FAVOURITES"));
    i0.ɵɵi18nApply(6);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngModel", (tmp_5_0 = i0.ɵɵpipeBind1(9, 8, ctx_r1.options)) == null ? null : tmp_5_0.show_fav)("ngModelOptions", i0.ɵɵpureFunction0(10, _c0));
  }
}
function SpaceFiltersComponent_section_31_ng_container_3_div_1_Template(rf, ctx) {
  if (rf & 1) {
    var _r13 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 57)(1, "div", 63);
    i0.ɵɵtext(2);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(3, "mat-checkbox", 64);
    i0.ɵɵpipe(4, "async");
    i0.ɵɵlistener("ngModelChange", function SpaceFiltersComponent_section_31_ng_container_3_div_1_Template_mat_checkbox_ngModelChange_3_listener($event) {
      i0.ɵɵrestoreView(_r13);
      var feat_r14 = i0.ɵɵnextContext().$implicit;
      var ctx_r1 = i0.ɵɵnextContext(2);
      return i0.ɵɵresetView(ctx_r1.toggleFeature(feat_r14, $event));
    });
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var tmp_5_0;
    var feat_r14 = i0.ɵɵnextContext().$implicit;
    var ctx_r1 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate1(" ", ctx_r1.feature_display[feat_r14] || feat_r14, " ");
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngModel", (tmp_5_0 = i0.ɵɵpipeBind1(4, 3, ctx_r1.options)) == null ? null : tmp_5_0.features == null ? null : tmp_5_0.features.includes(feat_r14))("ngModelOptions", i0.ɵɵpureFunction0(5, _c0));
  }
}
function SpaceFiltersComponent_section_31_ng_container_3_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵtemplate(1, SpaceFiltersComponent_section_31_ng_container_3_div_1_Template, 5, 6, "div", 62);
    i0.ɵɵelementContainerEnd();
  }
  if (rf & 2) {
    var feat_r14 = ctx.$implicit;
    var ctx_r1 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", !ctx_r1.hide_features.includes(feat_r14));
  }
}
function SpaceFiltersComponent_section_31_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "section", 60)(1, "h2", 56);
    i0.ɵɵi18n(2, 9);
    i0.ɵɵelementEnd();
    i0.ɵɵtemplate(3, SpaceFiltersComponent_section_31_ng_container_3_Template, 2, 1, "ng-container", 61);
    i0.ɵɵpipe(4, "async");
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance(3);
    i0.ɵɵproperty("ngForOf", i0.ɵɵpipeBind1(4, 1, ctx_r1.features));
  }
}
function SpaceFiltersComponent_div_34_Template(rf, ctx) {
  if (rf & 1) {
    var _r15 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 65)(1, "button", 66);
    i0.ɵɵlistener("click", function SpaceFiltersComponent_div_34_Template_button_click_1_listener() {
      i0.ɵɵrestoreView(_r15);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.close());
    });
    i0.ɵɵi18n(2, 10);
    i0.ɵɵelementEnd()();
  }
}
var SpaceFiltersComponent = /*#__PURE__*/function () {
  function SpaceFiltersComponent(_bsheet_ref, _settings, _event_form, _org, _spaces, _mapspeople) {
    var _this = this;
    _classCallCheck(this, SpaceFiltersComponent);
    this._bsheet_ref = _bsheet_ref;
    this._settings = _settings;
    this._event_form = _event_form;
    this._org = _org;
    this._spaces = _spaces;
    this._mapspeople = _mapspeople;
    this.can_close = false;
    this.options = this._event_form.options;
    this.building = this._org.active_building;
    this.buildings = this._org.active_buildings;
    this.levels = (0, rxjs_1.combineLatest)([this._org.active_region, this._org.active_building]).pipe((0, operators_1.map)(function (_ref) {
      var _ref2 = _slicedToArray(_ref, 2),
        region = _ref2[0],
        bld = _ref2[1];
      var level_list = _this.use_region ? _this._org.levelsForRegion(region) : _this._org.levelsForBuilding(bld);
      var viewable_levels = level_list.filter(function (lvl) {
        return !lvl.tags.includes('parking');
      });
      return viewable_levels.sort(function (a, b) {
        return a.parent_id.localeCompare(b.parent_id) || (a.display_name || '').localeCompare(b.display_name || '');
      });
    }));
    this.regions = this._org.region_list;
    this.using_mapspeople = this._mapspeople.available$;
    this.features = (0, rxjs_1.combineLatest)([this._spaces.features, this._event_form.available_spaces]).pipe((0, operators_1.map)(function (_ref3) {
      var _ref4 = _slicedToArray(_ref3, 2),
        features = _ref4[0],
        spaces = _ref4[1];
      return (0, common_1.unique)(features.concat((0, common_1.flatten)(spaces.map(function (_) {
        return _.features;
      }))));
    }));
    this.close = function () {
      return _this._bsheet_ref.dismiss();
    };
    this.setOptions = function (o) {
      return _this._event_form.setOptions(o);
    };
    this.can_close = !!this._bsheet_ref;
  }
  return _createClass(SpaceFiltersComponent, [{
    key: "allow_all_day",
    get: function get() {
      return !!this._settings.get('app.events.allow_all_day');
    }
  }, {
    key: "use_region",
    get: function get() {
      return !!this._settings.get('app.use_region');
    }
  }, {
    key: "timezone",
    get: function get() {
      return this._settings.get('app.events.use_building_timezone') ? this._org.building.timezone : '';
    }
  }, {
    key: "bld",
    get: function get() {
      return this._org.building;
    }
  }, {
    key: "region",
    get: function get() {
      return this._org.region;
    }
  }, {
    key: "form",
    get: function get() {
      return this._event_form.form;
    }
  }, {
    key: "max_duration",
    get: function get() {
      return this._settings.get('app.events.max_duration') || 480;
    }
  }, {
    key: "feature_display",
    get: function get() {
      return this._settings.get('app.events.feature_decriptions') || {};
    }
  }, {
    key: "hide_features",
    get: function get() {
      return this._settings.get('app.events.hide_features') || [];
    }
  }, {
    key: "use_24hr",
    get: function get() {
      return this._settings.get('app.use_24_hour_time');
    }
  }, {
    key: "start_date",
    get: function get() {
      return (0, date_fns_1.startOfDay)(this.form.getRawValue().date).valueOf();
    }
  }, {
    key: "end_date",
    get: function get() {
      return (0, date_fns_1.endOfDay)((0, date_fns_1.addDays)(Date.now(), this._settings.get('app.events.allowed_future_days') || 180));
    }
  }, {
    key: "setBuilding",
    value: function setBuilding(bld) {
      this._org.building = bld;
    }
  }, {
    key: "setRegion",
    value: function setRegion(region) {
      this._org.region = region;
    }
  }, {
    key: "toggleFeature",
    value: function () {
      var _toggleFeature = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(feat, state) {
        var _yield$this$options$p, features, new_list;
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              _context.next = 2;
              return this.options.pipe((0, operators_1.take)(1)).toPromise();
            case 2:
              _yield$this$options$p = _context.sent;
              features = _yield$this$options$p.features;
              new_list = (features || []).filter(function (_) {
                return feat !== _;
              });
              if (state) new_list.push(feat);
              this.setOptions({
                features: new_list
              });
            case 7:
            case "end":
              return _context.stop();
          }
        }, _callee, this);
      }));
      function toggleFeature(_x, _x2) {
        return _toggleFeature.apply(this, arguments);
      }
      return toggleFeature;
    }()
  }]);
}();
_SpaceFiltersComponent = SpaceFiltersComponent;
_SpaceFiltersComponent.ɵfac = function SpaceFiltersComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _SpaceFiltersComponent)(i0.ɵɵdirectiveInject(i1.MatBottomSheetRef, 8), i0.ɵɵdirectiveInject(i2.SettingsService), i0.ɵɵdirectiveInject(i3.EventFormService), i0.ɵɵdirectiveInject(i4.OrganisationService), i0.ɵɵdirectiveInject(i5.SpacesService), i0.ɵɵdirectiveInject(i2.MapsPeopleService));
};
_SpaceFiltersComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _SpaceFiltersComponent,
  selectors: [["space-filters"]],
  inputs: {
    multiday: "multiday",
    hide_levels: "hide_levels",
    viewing_map: "viewing_map"
  },
  decls: 35,
  vars: 31,
  consts: function consts() {
    var i18n_0;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_7173310086383878456$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_FILTERS_COMPONENT_TS_0 = goog.getMsg("Space Filters");
      i18n_0 = MSG_EXTERNAL_7173310086383878456$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_FILTERS_COMPONENT_TS_0;
    } else {
      i18n_0 = $localize(_templateObject || (_templateObject = _taggedTemplateLiteral([":\u241F36173168a4643aa78634e9242a63f3a40862f166\u241F7173310086383878456:Space Filters"])));
    }
    var i18n_1;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_5028777105388019087$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_FILTERS_COMPONENT_TS_1 = goog.getMsg("Details");
      i18n_1 = MSG_EXTERNAL_5028777105388019087$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_FILTERS_COMPONENT_TS_1;
    } else {
      i18n_1 = $localize(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([":\u241F4f8b2bb476981727ab34ed40fde1218361f92c45\u241F5028777105388019087:Details"])));
    }
    var i18n_2;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_471816275243265264$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_FILTERS_COMPONENT_TS_2 = goog.getMsg("Location");
      i18n_2 = MSG_EXTERNAL_471816275243265264$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_FILTERS_COMPONENT_TS_2;
    } else {
      i18n_2 = $localize(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([":\u241Fed31c09fd77c36238c13d83635f3fe5294c733d2\u241F471816275243265264:Location"])));
    }
    var i18n_3;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_3158758063619980932$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_FILTERS_COMPONENT_TS_3 = goog.getMsg("Date{$startTagSpan}*{$closeTagSpan}", {
        "closeTagSpan": "\uFFFD/#22\uFFFD",
        "startTagSpan": "\uFFFD#22\uFFFD"
      }, {
        original_code: {
          "closeTagSpan": "</span>",
          "startTagSpan": "<span>"
        }
      });
      i18n_3 = MSG_EXTERNAL_3158758063619980932$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_FILTERS_COMPONENT_TS_3;
    } else {
      i18n_3 = $localize(_templateObject4 || (_templateObject4 = _taggedTemplateLiteral([":\u241F04cfb5fd033651743bc4b9408bd52ba4ee894070\u241F3158758063619980932:Date", ":START_TAG_SPAN:*", ":CLOSE_TAG_SPAN:"])), "\uFFFD#22\uFFFD", "\uFFFD/#22\uFFFD");
    }
    var i18n_4;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_3894192522062036998$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_FILTERS_COMPONENT_TS_4 = goog.getMsg(" {$interpolation} ", {
        "interpolation": "\uFFFD0\uFFFD"
      }, {
        original_code: {
          "interpolation": "{{ 'FORM.DATE_ERROR' | translate }}"
        }
      });
      i18n_4 = MSG_EXTERNAL_3894192522062036998$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_FILTERS_COMPONENT_TS_4;
    } else {
      i18n_4 = $localize(_templateObject5 || (_templateObject5 = _taggedTemplateLiteral([":\u241Fbeead5a3a21b1ca4abe67610030f8a520995de4e\u241F3894192522062036998: ", ":INTERPOLATION: "])), "\uFFFD0\uFFFD");
    }
    var i18n_5;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_8264413387051126615$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_FILTERS_COMPONENT_TS_5 = goog.getMsg("Any Region");
      i18n_5 = MSG_EXTERNAL_8264413387051126615$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_FILTERS_COMPONENT_TS_5;
    } else {
      i18n_5 = $localize(_templateObject6 || (_templateObject6 = _taggedTemplateLiteral([":\u241F130845b58eba8e50c98f3fba117a0168cdba4f31\u241F8264413387051126615:Any Region"])));
    }
    var i18n_6;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_7323982518822503502$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_FILTERS_COMPONENT_TS_6 = goog.getMsg("Any Level");
      i18n_6 = MSG_EXTERNAL_7323982518822503502$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_FILTERS_COMPONENT_TS_6;
    } else {
      i18n_6 = $localize(_templateObject7 || (_templateObject7 = _taggedTemplateLiteral([":\u241F50407595967bf29832e873b41f9de3502d5c3e03\u241F7323982518822503502:Any Level"])));
    }
    var i18n_7;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_835486935962207481$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_FILTERS_COMPONENT_TS_7 = goog.getMsg(" All Day ");
      i18n_7 = MSG_EXTERNAL_835486935962207481$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_FILTERS_COMPONENT_TS_7;
    } else {
      i18n_7 = $localize(_templateObject8 || (_templateObject8 = _taggedTemplateLiteral([":\u241Fd7f43e20f3a729fa3de32bc7a1f709ccd722eae5\u241F835486935962207481: All Day "])));
    }
    var i18n_8;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_4735431816432396893$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_FILTERS_COMPONENT_TS_8 = goog.getMsg(" Start Time{$startTagSpan}*{$closeTagSpan}", {
        "closeTagSpan": "\uFFFD/#4\uFFFD",
        "startTagSpan": "\uFFFD#4\uFFFD"
      }, {
        original_code: {
          "closeTagSpan": "</span>",
          "startTagSpan": "<span>"
        }
      });
      i18n_8 = MSG_EXTERNAL_4735431816432396893$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_FILTERS_COMPONENT_TS_8;
    } else {
      i18n_8 = $localize(_templateObject9 || (_templateObject9 = _taggedTemplateLiteral([":\u241F02d39ddac5bbf95c424df03d5f0d22cc257556bd\u241F4735431816432396893: Start Time", ":START_TAG_SPAN:*", ":CLOSE_TAG_SPAN:"])), "\uFFFD#4\uFFFD", "\uFFFD/#4\uFFFD");
    }
    var i18n_9;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_5010873675481014004$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_FILTERS_COMPONENT_TS_9 = goog.getMsg(" {$interpolation} ", {
        "interpolation": "\uFFFD0\uFFFD"
      }, {
        original_code: {
          "interpolation": "{{ 'COMMON.FAVOURITES' | translate }}"
        }
      });
      i18n_9 = MSG_EXTERNAL_5010873675481014004$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_FILTERS_COMPONENT_TS_9;
    } else {
      i18n_9 = $localize(_templateObject10 || (_templateObject10 = _taggedTemplateLiteral([":\u241Fbde3d9fd949ba4c6014b8e64c1362753bca1cf0c\u241F5010873675481014004: ", ":INTERPOLATION: "])), "\uFFFD0\uFFFD");
    }
    var i18n_10;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_1614226322496100282$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_FILTERS_COMPONENT_TS_10 = goog.getMsg(" {$interpolation} ", {
        "interpolation": "\uFFFD0\uFFFD"
      }, {
        original_code: {
          "interpolation": "{{ 'ROOMS.SHOW_FAVOURITES' | translate }}"
        }
      });
      i18n_10 = MSG_EXTERNAL_1614226322496100282$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_FILTERS_COMPONENT_TS_10;
    } else {
      i18n_10 = $localize(_templateObject11 || (_templateObject11 = _taggedTemplateLiteral([":\u241F210742da6591a33630e0bfba757b95e6a1d99b20\u241F1614226322496100282: ", ":INTERPOLATION: "])), "\uFFFD0\uFFFD");
    }
    var i18n_11;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_1551920764795208868$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_FILTERS_COMPONENT_TS_11 = goog.getMsg("Facilities");
      i18n_11 = MSG_EXTERNAL_1551920764795208868$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_FILTERS_COMPONENT_TS_11;
    } else {
      i18n_11 = $localize(_templateObject12 || (_templateObject12 = _taggedTemplateLiteral([":\u241Fbf10c600bd861cfd0a23f4759562ee0ae9dbe19f\u241F1551920764795208868:Facilities"])));
    }
    var i18n_12;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_2296888311792137027$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_FILTERS_COMPONENT_TS_12 = goog.getMsg(" Apply Filters ");
      i18n_12 = MSG_EXTERNAL_2296888311792137027$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_FILTERS_COMPONENT_TS_12;
    } else {
      i18n_12 = $localize(_templateObject13 || (_templateObject13 = _taggedTemplateLiteral([":\u241Fc17e2cc448524a39eb83b2937cea3235a2e8bf37\u241F2296888311792137027: Apply Filters "])));
    }
    return [i18n_0, i18n_1, i18n_2, i18n_3, i18n_4, i18n_7, i18n_8, i18n_9, i18n_10, i18n_11, i18n_12, [1, "flex", "items-center", "border-b", "border-base-200", "pb-2", "sm:hidden"], [1, "flex-1", "pl-2"], ["icon", "", "matRipple", "", "name", "close-space-filters", 3, "click", 4, "ngIf"], [1, "font-medium", "flex-2", "text-center"], [1, "flex-1"], [1, "max-h-[65vh]", "p-2", "overflow-y-auto", "overflow-x-hidden", "divide-y", "divide-base-200", "w-full", "max-w-[100vw]", 3, "formGroup"], ["details", ""], [1, "text-lg", "font-medium", "mb-1"], [1, "flex-1", "min-w-[8rem]", "flex", "flex-col"], ["for", "location"], ["appearance", "outline", "class", "w-full", 4, "ngIf"], [1, "flex", "items-center", "flex-wrap", "sm:space-x-2"], [1, "flex-1", "min-w-[8rem]"], ["for", "date"], ["name", "date", 3, "ngModelChange", "ngModel", "ngModelOptions", "to", "short", "timezone", "range"], ["class", "flex-1 min-w-[8rem] relative", 4, "ngIf"], ["class", "flex justify-end -mt-2 mb-2", 4, "ngIf"], ["class", "flex items-center space-x-2", 4, "ngIf"], ["favs", "", "class", "space-y-2 pb-4", 4, "ngIf"], ["features", "", "class", "space-y-2", 4, "ngIf"], ["class", "px-2 pt-2 w-full border-t border-base-200", 4, "ngIf"], ["icon", "", "matRipple", "", "name", "close-space-filters", 3, "click"], ["appearance", "outline", 1, "w-full"], ["name", "region", "placeholder", i18n_5, 3, "ngModelChange", "ngModel", "ngModelOptions"], [3, "value", 4, "ngFor", "ngForOf"], [3, "value"], ["name", "building", 3, "ngModelChange", "ngModel", "ngModelOptions", "placeholder"], ["name", "location", "placeholder", i18n_6, 3, "ngModelChange", "ngModel", "ngModelOptions", "multiple"], [1, "flex", "flex-col-reverse"], ["class", "opacity-30 text-xs", 4, "ngIf"], [1, "opacity-30", "text-xs"], [1, "opacity-0"], [1, "flex-1", "min-w-[8rem]", "relative"], ["name", "date", 3, "ngModelChange", "ngModel", "ngModelOptions", "from", "to", "short", "timezone", "range"], [1, "flex", "justify-end", "-mt-2", "mb-2"], ["formControlName", "all_day"], [1, "flex", "items-center", "space-x-2"], [1, "flex-1", "w-1/3"], ["for", "start-time"], ["name", "start-time", 3, "ngModelChange", "ngModel", "ngModelOptions", "use_24hr", "timezone"], ["class", "flex-1 w-1/3", 4, "ngIf"], ["for", "end-time"], ["name", "end-time", 3, "ngModelChange", "ngModel", "ngModelOptions", "from", "use_24hr", "timezone"], ["name", "end-time", "formControlName", "duration", 3, "time", "max", "use_24hr", "timezone"], ["favs", "", 1, "space-y-2", "pb-4"], [1, "text-lg", "font-medium"], [1, "flex", "items-center"], ["for", "fav", 1, "flex-1", "w-1/2"], ["name", "fav", 3, "ngModelChange", "ngModel", "ngModelOptions"], ["features", "", 1, "space-y-2"], [4, "ngFor", "ngForOf"], ["class", "flex items-center", 4, "ngIf"], ["for", "feat", 1, "flex-1", "w-1/2"], ["name", "feat", 3, "ngModelChange", "ngModel", "ngModelOptions"], [1, "px-2", "pt-2", "w-full", "border-t", "border-base-200"], ["btn", "", "matRipple", "", "name", "apply-space-filters", 1, "w-full", 3, "click"]];
  },
  template: function SpaceFiltersComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵelementStart(0, "div", 11)(1, "div", 12);
      i0.ɵɵtemplate(2, SpaceFiltersComponent_button_2_Template, 3, 0, "button", 13);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(3, "h3", 14);
      i0.ɵɵi18n(4, 0);
      i0.ɵɵelementEnd();
      i0.ɵɵelement(5, "div", 15);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(6, "form", 16)(7, "section", 17)(8, "h2", 18);
      i0.ɵɵi18n(9, 1);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(10, "div", 19)(11, "label", 20);
      i0.ɵɵi18n(12, 2);
      i0.ɵɵelementEnd();
      i0.ɵɵtemplate(13, SpaceFiltersComponent_mat_form_field_13_Template, 4, 6, "mat-form-field", 21);
      i0.ɵɵpipe(14, "async");
      i0.ɵɵtemplate(15, SpaceFiltersComponent_mat_form_field_15_Template, 7, 13, "mat-form-field", 21);
      i0.ɵɵpipe(16, "async");
      i0.ɵɵtemplate(17, SpaceFiltersComponent_mat_form_field_17_Template, 5, 9, "mat-form-field", 21);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(18, "div", 22)(19, "div", 23)(20, "label", 24);
      i0.ɵɵi18nStart(21, 3);
      i0.ɵɵelement(22, "span");
      i0.ɵɵi18nEnd();
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(23, "a-date-field", 25);
      i0.ɵɵlistener("ngModelChange", function SpaceFiltersComponent_Template_a_date_field_ngModelChange_23_listener($event) {
        return ctx.form.patchValue({
          date: $event
        });
      });
      i0.ɵɵi18n(24, 4);
      i0.ɵɵpipe(25, "translate");
      i0.ɵɵelementEnd()();
      i0.ɵɵtemplate(26, SpaceFiltersComponent_div_26_Template, 9, 14, "div", 26);
      i0.ɵɵelementEnd();
      i0.ɵɵtemplate(27, SpaceFiltersComponent_div_27_Template, 3, 0, "div", 27)(28, SpaceFiltersComponent_div_28_Template, 8, 7, "div", 28);
      i0.ɵɵelementEnd();
      i0.ɵɵtemplate(29, SpaceFiltersComponent_section_29_Template, 10, 11, "section", 29);
      i0.ɵɵpipe(30, "async");
      i0.ɵɵtemplate(31, SpaceFiltersComponent_section_31_Template, 5, 3, "section", 30);
      i0.ɵɵpipe(32, "async");
      i0.ɵɵpipe(33, "async");
      i0.ɵɵelementEnd();
      i0.ɵɵtemplate(34, SpaceFiltersComponent_div_34_Template, 3, 0, "div", 31);
    }
    if (rf & 2) {
      var tmp_2_0;
      var tmp_3_0;
      var tmp_17_0;
      i0.ɵɵadvance(2);
      i0.ɵɵproperty("ngIf", ctx.can_close);
      i0.ɵɵadvance(4);
      i0.ɵɵproperty("formGroup", ctx.form);
      i0.ɵɵadvance(7);
      i0.ɵɵproperty("ngIf", ctx.use_region && ((tmp_2_0 = i0.ɵɵpipeBind1(14, 18, ctx.regions)) == null ? null : tmp_2_0.length));
      i0.ɵɵadvance(2);
      i0.ɵɵproperty("ngIf", !ctx.use_region && ((tmp_3_0 = i0.ɵɵpipeBind1(16, 20, ctx.buildings)) == null ? null : tmp_3_0.length) > 1);
      i0.ɵɵadvance(2);
      i0.ɵɵproperty("ngIf", !ctx.hide_levels);
      i0.ɵɵadvance(6);
      i0.ɵɵproperty("ngModel", ctx.form.getRawValue().date)("ngModelOptions", i0.ɵɵpureFunction0(30, _c0))("to", ctx.end_date)("short", true)("timezone", ctx.timezone)("range", ctx.multiday ? 1 : 0);
      i0.ɵɵadvance(2);
      i0.ɵɵi18nExp(i0.ɵɵpipeBind1(25, 22, "FORM.DATE_ERROR"));
      i0.ɵɵi18nApply(24);
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", ctx.multiday);
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", ctx.allow_all_day);
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", !ctx.form.value.all_day);
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", !ctx.viewing_map || !i0.ɵɵpipeBind1(30, 24, ctx.using_mapspeople));
      i0.ɵɵadvance(2);
      i0.ɵɵproperty("ngIf", ((tmp_17_0 = i0.ɵɵpipeBind1(32, 26, ctx.features)) == null ? null : tmp_17_0.length) && (!ctx.viewing_map || !i0.ɵɵpipeBind1(33, 28, ctx.using_mapspeople)));
      i0.ɵɵadvance(3);
      i0.ɵɵproperty("ngIf", ctx.can_close);
    }
  },
  styles: ["[_nghost-%COMP%] {\n                display: flex;\n                flex-direction: column;\n                width: 100%;\n                max-width: 100vw;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNwYWNlLWZpbHRlcnMuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxhQUFhO2dCQUNiLHNCQUFzQjtnQkFDdEIsV0FBVztnQkFDWCxnQkFBZ0I7WUFDcEIiLCJmaWxlIjoic3BhY2UtZmlsdGVycy5jb21wb25lbnQudHMiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIDpob3N0IHtcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICAgICAgbWF4LXdpZHRoOiAxMDB2dztcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl19 */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvc3BhY2VzL3NyYy9saWIvc3BhY2Utc2VsZWN0LW1vZGFsL3NwYWNlLWZpbHRlcnMuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxhQUFhO2dCQUNiLHNCQUFzQjtnQkFDdEIsV0FBVztnQkFDWCxnQkFBZ0I7WUFDcEI7O0FBRVosZ2pCQUFnakIiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIDpob3N0IHtcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICAgICAgbWF4LXdpZHRoOiAxMDB2dztcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl0sInNvdXJjZVJvb3QiOiIifQ== */"]
});
exports.SpaceFiltersComponent = SpaceFiltersComponent;

/***/ }),

/***/ 49609:
/*!************************************************************************!*\
  !*** ./libs/spaces/src/lib/space-select-modal/space-list.component.ts ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _taggedTemplateLiteral = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js */ 9959)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _SpaceListComponent, _templateObject, _templateObject2, _templateObject3, _templateObject4;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.SpaceListComponent = void 0;
var core_1 = __webpack_require__(/*! @angular/core */ 37580);
var event_form_service_1 = __webpack_require__(/*! libs/events/src/lib/event-form.service */ 26101);
var organisation_service_1 = __webpack_require__(/*! libs/organisation/src/lib/organisation.service */ 19863);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! libs/events/src/lib/event-form.service */ 26101);
var i2 = __webpack_require__(/*! libs/organisation/src/lib/organisation.service */ 19863);
function SpaceListComponent_ng_container_5_ul_1_li_1_div_3_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 24)(1, "app-icon");
    i0.ɵɵtext(2, "done");
    i0.ɵɵelementEnd()();
  }
}
function SpaceListComponent_ng_container_5_ul_1_li_1_img_4_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelement(0, "img", 25);
  }
  if (rf & 2) {
    var space_r2 = i0.ɵɵnextContext().$implicit;
    i0.ɵɵproperty("source", space_r2.images[0]);
  }
}
function SpaceListComponent_ng_container_5_ul_1_li_1_ng_template_5_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelement(0, "img", 26);
  }
}
function SpaceListComponent_ng_container_5_ul_1_li_1_Template(rf, ctx) {
  if (rf & 1) {
    var _r1 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "li", 13)(1, "button", 14);
    i0.ɵɵlistener("click", function SpaceListComponent_ng_container_5_ul_1_li_1_Template_button_click_1_listener() {
      var space_r2 = i0.ɵɵrestoreView(_r1).$implicit;
      var ctx_r2 = i0.ɵɵnextContext(3);
      return i0.ɵɵresetView(ctx_r2.selectSpace(space_r2));
    });
    i0.ɵɵelementStart(2, "div", 15);
    i0.ɵɵtemplate(3, SpaceListComponent_ng_container_5_ul_1_li_1_div_3_Template, 3, 0, "div", 16)(4, SpaceListComponent_ng_container_5_ul_1_li_1_img_4_Template, 1, 1, "img", 17)(5, SpaceListComponent_ng_container_5_ul_1_li_1_ng_template_5_Template, 1, 0, "ng-template", null, 2, i0.ɵɵtemplateRefExtractor);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(7, "div", 18)(8, "div", 19);
    i0.ɵɵtext(9);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(10, "div", 20)(11, "app-icon", 21);
    i0.ɵɵtext(12, "place");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(13, "p", 22);
    i0.ɵɵtext(14);
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(15, "div", 20)(16, "app-icon", 21);
    i0.ɵɵtext(17, "people");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(18, "p");
    i0.ɵɵi18n(19, 4);
    i0.ɵɵelementEnd()()()();
    i0.ɵɵelementStart(20, "button", 23);
    i0.ɵɵlistener("click", function SpaceListComponent_ng_container_5_ul_1_li_1_Template_button_click_20_listener() {
      var space_r2 = i0.ɵɵrestoreView(_r1).$implicit;
      var ctx_r2 = i0.ɵɵnextContext(3);
      return i0.ɵɵresetView(ctx_r2.toggleFav.emit(space_r2));
    });
    i0.ɵɵelementStart(21, "app-icon");
    i0.ɵɵtext(22);
    i0.ɵɵelementEnd()()();
  }
  if (rf & 2) {
    var tmp_12_0;
    var space_r2 = ctx.$implicit;
    var space_placeholder_r4 = i0.ɵɵreference(6);
    var ctx_r2 = i0.ɵɵnextContext(3);
    i0.ɵɵclassProp("!border-info", ctx_r2.active === space_r2.id);
    i0.ɵɵadvance(3);
    i0.ɵɵproperty("ngIf", ctx_r2.selected.includes(space_r2.id));
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", space_r2.images == null ? null : space_r2.images.length)("ngIfElse", space_placeholder_r4);
    i0.ɵɵadvance(5);
    i0.ɵɵtextInterpolate1(" ", space_r2.display_name || space_r2.name || "Meeting Space", " ");
    i0.ɵɵadvance(5);
    i0.ɵɵtextInterpolate1(" ", space_r2.location || ((tmp_12_0 = ctx_r2.level(space_r2.zones)) == null ? null : tmp_12_0.display_name) || ((tmp_12_0 = ctx_r2.level(space_r2.zones)) == null ? null : tmp_12_0.name), " ");
    i0.ɵɵadvance(5);
    i0.ɵɵi18nExp(space_r2.capacity < 1 ? 2 : space_r2.capacity);
    i0.ɵɵi18nApply(19);
    i0.ɵɵadvance();
    i0.ɵɵclassProp("text-info", ctx_r2.isFavourite(space_r2.id));
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate(ctx_r2.isFavourite(space_r2.id) ? "favorite" : "favorite_border");
  }
}
function SpaceListComponent_ng_container_5_ul_1_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "ul", 11);
    i0.ɵɵtemplate(1, SpaceListComponent_ng_container_5_ul_1_li_1_Template, 23, 11, "li", 12);
    i0.ɵɵpipe(2, "async");
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r2 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngForOf", i0.ɵɵpipeBind1(2, 1, ctx_r2.available_spaces));
  }
}
function SpaceListComponent_ng_container_5_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵtemplate(1, SpaceListComponent_ng_container_5_ul_1_Template, 3, 3, "ul", 10);
    i0.ɵɵpipe(2, "async");
    i0.ɵɵelementContainerEnd();
  }
  if (rf & 2) {
    var tmp_3_0;
    var ctx_r2 = i0.ɵɵnextContext();
    var empty_state_r5 = i0.ɵɵreference(8);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", (tmp_3_0 = i0.ɵɵpipeBind1(2, 2, ctx_r2.available_spaces)) == null ? null : tmp_3_0.length)("ngIfElse", empty_state_r5);
  }
}
function SpaceListComponent_ng_template_7_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 27)(1, "p", 28);
    i0.ɵɵi18n(2, 5);
    i0.ɵɵelementEnd()();
  }
}
function SpaceListComponent_ng_template_9_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 29);
    i0.ɵɵelement(1, "mat-spinner", 30);
    i0.ɵɵelementStart(2, "p", 31);
    i0.ɵɵi18n(3, 6);
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    i0.ɵɵadvance();
    i0.ɵɵproperty("diameter", 32);
  }
}
var SpaceListComponent = /*#__PURE__*/function () {
  function SpaceListComponent(_event_form, _org) {
    _classCallCheck(this, SpaceListComponent);
    this._event_form = _event_form;
    this._org = _org;
    this.active = '';
    this.selected = '';
    this.favorites = [];
    this.onSelect = new core_1.EventEmitter();
    this.toggleFav = new core_1.EventEmitter();
    this.loading = this._event_form.loading;
    this.available_spaces = this._event_form.available_spaces;
  }
  return _createClass(SpaceListComponent, [{
    key: "level",
    value: function level(zones) {
      return this._org.levelWithID(zones);
    }
  }, {
    key: "ngOnInit",
    value: function ngOnInit() {
      this._event_form.setView('find');
    }
  }, {
    key: "isFavourite",
    value: function isFavourite(space_id) {
      return this.favorites.includes(space_id);
    }
  }, {
    key: "selectSpace",
    value: function selectSpace(space) {
      this.onSelect.emit(space);
    }
  }]);
}();
_SpaceListComponent = SpaceListComponent;
_SpaceListComponent.ɵfac = function SpaceListComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _SpaceListComponent)(i0.ɵɵdirectiveInject(i1.EventFormService), i0.ɵɵdirectiveInject(i2.OrganisationService));
};
_SpaceListComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _SpaceListComponent,
  selectors: [["space-list"]],
  inputs: {
    active: "active",
    selected: "selected",
    favorites: "favorites"
  },
  outputs: {
    onSelect: "onSelect",
    toggleFav: "toggleFav"
  },
  decls: 11,
  vars: 7,
  consts: function consts() {
    var i18n_0;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_2290177789691483092$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_LIST_COMPONENT_TS_0 = goog.getMsg(" {$interpolation} result(s) found ", {
        "interpolation": "\uFFFD0\uFFFD"
      }, {
        original_code: {
          "interpolation": "{{ (available_spaces | async)?.length || 0 }}"
        }
      });
      i18n_0 = MSG_EXTERNAL_2290177789691483092$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_LIST_COMPONENT_TS_0;
    } else {
      i18n_0 = $localize(_templateObject || (_templateObject = _taggedTemplateLiteral([":\u241Ff3733dfad4477862079351d9f8cf60c7964cc3e3\u241F2290177789691483092: ", ":INTERPOLATION: result(s) found "])), "\uFFFD0\uFFFD");
    }
    var i18n_1;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_4552898751936658514$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_LIST_COMPONENT_TS_1 = goog.getMsg(" {$interpolation} People ", {
        "interpolation": "\uFFFD0\uFFFD"
      }, {
        original_code: {
          "interpolation": "{{\n                                        space.capacity < 1 ? 2 : space.capacity\n                                    }}"
        }
      });
      i18n_1 = MSG_EXTERNAL_4552898751936658514$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_LIST_COMPONENT_TS_1;
    } else {
      i18n_1 = $localize(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([":\u241F08719ea79f574b595da7d187fda2fa8c491b5de7\u241F4552898751936658514: ", ":INTERPOLATION: People "])), "\uFFFD0\uFFFD");
    }
    var i18n_2;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_3831747985282777621$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_LIST_COMPONENT_TS_2 = goog.getMsg(" No available spaces for selected time and/or filters ");
      i18n_2 = MSG_EXTERNAL_3831747985282777621$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_LIST_COMPONENT_TS_2;
    } else {
      i18n_2 = $localize(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([":\u241F027c29534f5dc45741b226edfebb3f7f578384b0\u241F3831747985282777621: No available spaces for selected time and/or filters "])));
    }
    var i18n_3;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_126579492602011343$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_LIST_COMPONENT_TS_3 = goog.getMsg("Finding available spaces...");
      i18n_3 = MSG_EXTERNAL_126579492602011343$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_LIST_COMPONENT_TS_3;
    } else {
      i18n_3 = $localize(_templateObject4 || (_templateObject4 = _taggedTemplateLiteral([":\u241F8dad32dda6491a1051df9156e98031c0e634b413\u241F126579492602011343:Finding available spaces..."])));
    }
    return [["empty_state", ""], ["load_state", ""], ["space_placeholder", ""], i18n_0, i18n_1, i18n_2, i18n_3, [1, "font-bold"], ["count", "", 1, "text-sm", "opacity-60", "mb-4"], [4, "ngIf", "ngIfElse"], ["class", "list-style-none space-y-2", 4, "ngIf", "ngIfElse"], [1, "list-style-none", "space-y-2"], ["space", "", "class", "relative p-2 rounded-lg w-full shadow border bg-base-100 border-base-200", 3, "!border-info", 4, "ngFor", "ngForOf"], ["space", "", 1, "relative", "p-2", "rounded-lg", "w-full", "shadow", "border", "bg-base-100", "border-base-200"], ["matRipple", "", "name", "select-space", 1, "w-full", "h-full", "flex", "items-center", 3, "click"], [1, "relative", "min-w-[5rem]", "w-20", "h-20", "rounded-xl", "bg-base-200", "mr-4", "overflow-hidden", "flex", "items-center", "justify-center"], ["class", "absolute top-1 left-1 border border-neutral bg-base-200 rounded-full h-6 w-6 flex items-center justify-center text-white", 4, "ngIf"], ["auth", "", "class", "object-cover h-full", 3, "source", 4, "ngIf", "ngIfElse"], [1, "space-y-2"], [1, "font-medium", "truncate", "mr-10"], [1, "flex", "items-center", "text-sm", "space-x-2"], [1, "text-info"], [1, "truncate"], ["icon", "", "matRipple", "", "name", "toggle-space-favourite", 1, "absolute", "top-1", "right-1", 3, "click"], [1, "absolute", "top-1", "left-1", "border", "border-neutral", "bg-base-200", "rounded-full", "h-6", "w-6", "flex", "items-center", "justify-center", "text-white"], ["auth", "", 1, "object-cover", "h-full", 3, "source"], ["src", "assets/icons/room-placeholder.svg", 1, "m-auto"], ["empty", "", 1, "p-16", "flex", "flex-col", "items-center", "justify-center", "space-y-2"], [1, "opacity-30", "text-center"], ["loading", "", 1, "p-16", "flex", "flex-col", "items-center", "justify-center", "space-y-2"], [3, "diameter"], [1, "opacity-30"]];
  },
  template: function SpaceListComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵelementStart(0, "h3", 7);
      i0.ɵɵtext(1, "Results");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(2, "p", 8);
      i0.ɵɵi18n(3, 3);
      i0.ɵɵpipe(4, "async");
      i0.ɵɵelementEnd();
      i0.ɵɵtemplate(5, SpaceListComponent_ng_container_5_Template, 3, 4, "ng-container", 9);
      i0.ɵɵpipe(6, "async");
      i0.ɵɵtemplate(7, SpaceListComponent_ng_template_7_Template, 3, 0, "ng-template", null, 0, i0.ɵɵtemplateRefExtractor)(9, SpaceListComponent_ng_template_9_Template, 4, 1, "ng-template", null, 1, i0.ɵɵtemplateRefExtractor);
    }
    if (rf & 2) {
      var tmp_2_0;
      var load_state_r6 = i0.ɵɵreference(10);
      i0.ɵɵadvance(4);
      i0.ɵɵi18nExp(((tmp_2_0 = i0.ɵɵpipeBind1(4, 3, ctx.available_spaces)) == null ? null : tmp_2_0.length) || 0);
      i0.ɵɵi18nApply(3);
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", !i0.ɵɵpipeBind1(6, 5, ctx.loading))("ngIfElse", load_state_r6);
    }
  },
  styles: ["[_nghost-%COMP%] {\n                width: 100%;\n                height: 100%;\n                padding: 0.5rem;\n                overflow: auto;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNwYWNlLWxpc3QuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxXQUFXO2dCQUNYLFlBQVk7Z0JBQ1osZUFBZTtnQkFDZixjQUFjO1lBQ2xCIiwiZmlsZSI6InNwYWNlLWxpc3QuY29tcG9uZW50LnRzIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICA6aG9zdCB7XG4gICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgICAgICAgICAgIHBhZGRpbmc6IDAuNXJlbTtcbiAgICAgICAgICAgICAgICBvdmVyZmxvdzogYXV0bztcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl19 */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvc3BhY2VzL3NyYy9saWIvc3BhY2Utc2VsZWN0LW1vZGFsL3NwYWNlLWxpc3QuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTtnQkFDSSxXQUFXO2dCQUNYLFlBQVk7Z0JBQ1osZUFBZTtnQkFDZixjQUFjO1lBQ2xCOztBQUVaLG9oQkFBb2hCIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICA6aG9zdCB7XG4gICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgICAgICAgICAgIHBhZGRpbmc6IDAuNXJlbTtcbiAgICAgICAgICAgICAgICBvdmVyZmxvdzogYXV0bztcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl0sInNvdXJjZVJvb3QiOiIifQ== */"]
});
exports.SpaceListComponent = SpaceListComponent;

/***/ }),

/***/ 83904:
/*!********************************************************************************!*\
  !*** ./libs/spaces/src/lib/space-select-modal/space-location-pin.component.ts ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _SpaceLocationPinComponent;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.SpaceLocationPinComponent = void 0;
var components_1 = __webpack_require__(/*! @placeos/components */ 51588);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @angular/common */ 60316);
var i2 = __webpack_require__(/*! ../../../../components/src/lib/icon.component */ 69434);
function SpaceLocationPinComponent_div_15_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelement(0, "div", 16);
  }
}
function SpaceLocationPinComponent_app_icon_16_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "app-icon", 17);
    i0.ɵɵtext(1, " done ");
    i0.ɵɵelementEnd();
  }
}
var SpaceLocationPinComponent = /*#__PURE__*/function () {
  function SpaceLocationPinComponent(_data) {
    _classCallCheck(this, SpaceLocationPinComponent);
    this._data = _data;
    this.selected = this._data.selected === true;
    this.active = this._data.active === true;
  }
  return _createClass(SpaceLocationPinComponent, [{
    key: "color",
    get: function get() {
      return this.active ? '#F4511E' : this.selected ? '#D32F2F' : '#309251';
    }
  }]);
}();
_SpaceLocationPinComponent = SpaceLocationPinComponent;
_SpaceLocationPinComponent.ɵfac = function SpaceLocationPinComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _SpaceLocationPinComponent)(i0.ɵɵdirectiveInject(components_1.MAP_FEATURE_DATA));
};
_SpaceLocationPinComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _SpaceLocationPinComponent,
  selectors: [["space-location-pin"]],
  decls: 17,
  vars: 3,
  consts: [[1, "absolute", "bottom-0", "left-1/2", "-translate-x-1/2"], ["width", "44", "height", "60", "viewBox", "0 0 66 80", "fill", "none", "xmlns", "http://www.w3.org/2000/svg"], ["filter", "url(#filter0_d_1065_10313)"], ["d", "M19.724 53.0408C25.0871 60.3435 30.5582 65.8583 31.0184 66.3178C31.4558 66.755 32.0489 67.0007 32.6674 67.0008H32.6678C33.2863 67.0007 33.8795 66.755 34.3169 66.3178C34.7771 65.8583 40.2481 60.3435 45.6112 53.0408C48.2928 49.3894 50.963 45.2701 52.9663 41.0957C54.9629 36.935 56.3331 32.6459 56.3342 28.6724C56.364 25.5564 55.7725 22.4657 54.5941 19.5809C53.415 16.6946 51.6722 14.0724 49.4675 11.8677C47.2629 9.66308 44.6407 7.92024 41.7544 6.74121C38.8711 5.5634 35.782 4.97184 32.6676 5.00103C29.5533 4.97184 26.4642 5.5634 23.5809 6.74121C20.6946 7.92024 18.0724 9.66308 15.8677 11.8677C13.6631 14.0724 11.9202 16.6946 10.7412 19.5809C9.56278 22.4657 8.97122 25.5565 9.00108 28.6726C9.0022 32.646 10.3724 36.9351 12.369 41.0957C14.3723 45.2701 17.0425 49.3894 19.724 53.0408Z", "stroke", "#0B421D", "stroke-width", "2"], ["id", "filter0_d_1065_10313", "x", "0", "y", "0", "width", "65.3353", "height", "80.001", "filterUnits", "userSpaceOnUse", "color-interpolation-filters", "sRGB"], ["flood-opacity", "0", "result", "BackgroundImageFix"], ["in", "SourceAlpha", "type", "matrix", "values", "0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0", "result", "hardAlpha"], ["dy", "4"], ["stdDeviation", "4"], ["in2", "hardAlpha", "operator", "out"], ["type", "matrix", "values", "0 0 0 0 0.0196078 0 0 0 0 0.109804 0 0 0 0 0.172549 0 0 0 0.2 0"], ["mode", "normal", "in2", "BackgroundImageFix", "result", "effect1_dropShadow_1065_10313"], ["mode", "normal", "in", "SourceGraphic", "in2", "effect1_dropShadow_1065_10313", "result", "shape"], [1, "absolute", "top-0", "left-0", "w-full", "h-3/4", "flex", "items-center", "justify-center"], ["class", "relative z-10 h-4 w-4 rounded-full bg-base-100 border-2 border-[#0B421D]", 4, "ngIf"], ["class", "relative text-white z-10 text-2xl", 4, "ngIf"], [1, "relative", "z-10", "h-4", "w-4", "rounded-full", "bg-base-100", "border-2", "border-[#0B421D]"], [1, "relative", "text-white", "z-10", "text-2xl"]],
  template: function SpaceLocationPinComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵelementStart(0, "div", 0);
      i0.ɵɵnamespaceSVG();
      i0.ɵɵelementStart(1, "svg", 1)(2, "g", 2);
      i0.ɵɵelement(3, "path", 3);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(4, "defs")(5, "filter", 4);
      i0.ɵɵelement(6, "feFlood", 5)(7, "feColorMatrix", 6)(8, "feOffset", 7)(9, "feGaussianBlur", 8)(10, "feComposite", 9)(11, "feColorMatrix", 10)(12, "feBlend", 11)(13, "feBlend", 12);
      i0.ɵɵelementEnd()()();
      i0.ɵɵnamespaceHTML();
      i0.ɵɵelementStart(14, "div", 13);
      i0.ɵɵtemplate(15, SpaceLocationPinComponent_div_15_Template, 1, 0, "div", 14)(16, SpaceLocationPinComponent_app_icon_16_Template, 2, 0, "app-icon", 15);
      i0.ɵɵelementEnd()();
    }
    if (rf & 2) {
      i0.ɵɵadvance(3);
      i0.ɵɵattribute("fill", ctx.color);
      i0.ɵɵadvance(12);
      i0.ɵɵproperty("ngIf", !ctx.selected);
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", ctx.selected);
    }
  },
  dependencies: [i1.NgIf, i2.IconComponent],
  encapsulation: 2
});
exports.SpaceLocationPinComponent = SpaceLocationPinComponent;

/***/ }),

/***/ 30937:
/*!***********************************************************************!*\
  !*** ./libs/spaces/src/lib/space-select-modal/space-map.component.ts ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _taggedTemplateLiteral = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js */ 9959)["default"]);
var _objectSpread = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/objectSpread2.js */ 34092)["default"]);
var _slicedToArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/slicedToArray.js */ 6282)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _callSuper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/callSuper.js */ 8513)["default"]);
var _inherits = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/inherits.js */ 58160)["default"]);
var _SpaceSelectMapComponent, _templateObject;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.SpaceSelectMapComponent = void 0;
var core_1 = __webpack_require__(/*! @angular/core */ 37580);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var rxjs_1 = __webpack_require__(/*! rxjs */ 15681);
var operators_1 = __webpack_require__(/*! rxjs/operators */ 97303);
var explore_spaces_service_1 = __webpack_require__(/*! libs/explore/src/lib/explore-spaces.service */ 65897);
var event_form_service_1 = __webpack_require__(/*! libs/events/src/lib/event-form.service */ 26101);
var organisation_service_1 = __webpack_require__(/*! libs/organisation/src/lib/organisation.service */ 19863);
var space_location_pin_component_1 = __webpack_require__(/*! ./space-location-pin.component */ 83904);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! libs/events/src/lib/event-form.service */ 26101);
var i2 = __webpack_require__(/*! libs/organisation/src/lib/organisation.service */ 19863);
var i3 = __webpack_require__(/*! @placeos/common */ 22797);
var _c0 = function _c0() {
  return {
    controls: true
  };
};
var _c1 = function _c1() {
  return {
    standalone: true
  };
};
function SpaceSelectMapComponent_mat_form_field_1_mat_option_2_div_2_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 10);
    i0.ɵɵtext(1);
    i0.ɵɵpipe(2, "building");
    i0.ɵɵelementStart(3, "span", 11);
    i0.ɵɵtext(4, " - ");
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var tmp_4_0;
    var lvl_r3 = i0.ɵɵnextContext().$implicit;
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", (tmp_4_0 = i0.ɵɵpipeBind1(2, 1, lvl_r3.parent_id)) == null ? null : tmp_4_0.display_name, " ");
  }
}
function SpaceSelectMapComponent_mat_form_field_1_mat_option_2_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "mat-option", 7)(1, "div", 8);
    i0.ɵɵtemplate(2, SpaceSelectMapComponent_mat_form_field_1_mat_option_2_div_2_Template, 5, 3, "div", 9);
    i0.ɵɵelementStart(3, "div");
    i0.ɵɵtext(4);
    i0.ɵɵelementEnd()()();
  }
  if (rf & 2) {
    var lvl_r3 = ctx.$implicit;
    var ctx_r1 = i0.ɵɵnextContext(2);
    i0.ɵɵproperty("value", lvl_r3);
    i0.ɵɵadvance(2);
    i0.ɵɵproperty("ngIf", ctx_r1.use_region);
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate1(" ", lvl_r3.display_name || lvl_r3.name, " ");
  }
}
function SpaceSelectMapComponent_mat_form_field_1_Template(rf, ctx) {
  if (rf & 1) {
    var _r1 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "mat-form-field", 4)(1, "mat-select", 5);
    i0.ɵɵtwoWayListener("ngModelChange", function SpaceSelectMapComponent_mat_form_field_1_Template_mat_select_ngModelChange_1_listener($event) {
      i0.ɵɵrestoreView(_r1);
      var ctx_r1 = i0.ɵɵnextContext();
      i0.ɵɵtwoWayBindingSet(ctx_r1.level, $event) || (ctx_r1.level = $event);
      return i0.ɵɵresetView($event);
    });
    i0.ɵɵlistener("ngModelChange", function SpaceSelectMapComponent_mat_form_field_1_Template_mat_select_ngModelChange_1_listener($event) {
      i0.ɵɵrestoreView(_r1);
      var ctx_r1 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r1.setOptions({
        zone_ids: [$event.id]
      }));
    });
    i0.ɵɵtemplate(2, SpaceSelectMapComponent_mat_form_field_1_mat_option_2_Template, 5, 3, "mat-option", 6);
    i0.ɵɵpipe(3, "async");
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵadvance();
    i0.ɵɵtwoWayProperty("ngModel", ctx_r1.level);
    i0.ɵɵproperty("ngModelOptions", i0.ɵɵpureFunction0(5, _c1));
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngForOf", i0.ɵɵpipeBind1(3, 3, ctx_r1.levels));
  }
}
var SpaceSelectMapComponent = /*#__PURE__*/function (_common_1$AsyncHandle) {
  function SpaceSelectMapComponent(_event_form, _org, _settings) {
    var _this;
    _classCallCheck(this, SpaceSelectMapComponent);
    _this = _callSuper(this, SpaceSelectMapComponent);
    _this._event_form = _event_form;
    _this._org = _org;
    _this._settings = _settings;
    _this.selected = [];
    _this.is_displayed = false;
    _this.onSelect = new core_1.EventEmitter();
    _this.zoom = 1;
    _this.center = {
      x: 0.5,
      y: 0.5
    };
    _this.coordinates = undefined;
    _this._seletedSpace = function (s) {
      return function () {
        _this.onSelect.emit(s);
        _this._change.next(Date.now());
      };
    };
    _this.level = null;
    _this._change = new rxjs_1.BehaviorSubject(0);
    _this.levels = (0, rxjs_1.combineLatest)([_this._org.active_region, _this._org.active_building]).pipe((0, operators_1.map)(function (_ref) {
      var _ref2 = _slicedToArray(_ref, 2),
        region = _ref2[0],
        bld = _ref2[1];
      var level_list = _this.use_region ? _this._org.levelsForRegion(region) : _this._org.levelsForBuilding(bld);
      var viewable_levels = level_list.filter(function (lvl) {
        return !lvl.tags.includes('parking');
      });
      return viewable_levels.sort(function (a, b) {
        return a.parent_id.localeCompare(b.parent_id) || (a.display_name || '').localeCompare(b.display_name || '');
      });
    }));
    _this.setOptions = function (o) {
      return _this._event_form.setOptions(o);
    };
    _this.features = (0, rxjs_1.combineLatest)([_this._event_form.available_spaces, _this._change]).pipe((0, operators_1.debounceTime)(300), (0, operators_1.map)(function (_ref3) {
      var _ref4 = _slicedToArray(_ref3, 1),
        l = _ref4[0];
      return l.map(function (space) {
        return {
          location: space.map_id,
          content: space_location_pin_component_1.SpaceLocationPinComponent,
          data: _objectSpread(_objectSpread({}, space), {}, {
            active: _this.active === space.id,
            selected: _this.selected.includes(space.id)
          })
        };
      });
    }));
    _this.actions = _this._event_form.available_spaces.pipe((0, operators_1.map)(function (l) {
      return l.map(function (space) {
        return {
          id: space.map_id,
          action: ['touchend', 'mouseup'],
          callback: _this._seletedSpace(space)
        };
      });
    }));
    _this.styles = (0, rxjs_1.combineLatest)([_this._event_form.spaces, _this._event_form.available_spaces]).pipe((0, operators_1.map)(function (_ref5) {
      var _ref6 = _slicedToArray(_ref5, 2),
        spaces = _ref6[0],
        free_spaces = _ref6[1];
      return spaces.reduce(function (styles, space) {
        var colours = _this._settings.get('app.explore.colors') || {};
        var status = free_spaces.find(function (_) {
          return _.id === space.id;
        }) ? 'free' : 'busy';
        styles["#".concat(space.map_id || space.id)] = {
          fill: colours["space-".concat(status)] || colours["".concat(status)] || explore_spaces_service_1.DEFAULT_COLOURS["".concat(status)]
        };
        return styles;
      }, {});
    }));
    return _this;
  }
  _inherits(SpaceSelectMapComponent, _common_1$AsyncHandle);
  return _createClass(SpaceSelectMapComponent, [{
    key: "map_url",
    get: function get() {
      var _this$level;
      return ((_this$level = this.level) === null || _this$level === void 0 ? void 0 : _this$level.map_id) || '';
    }
  }, {
    key: "use_region",
    get: function get() {
      return !!this._settings.get('app.use_region');
    }
  }, {
    key: "ngOnInit",
    value: function ngOnInit() {
      var _this2 = this;
      this.subscription('levels_update', this._event_form.options.subscribe(function (_ref7) {
        var zone_ids = _ref7.zone_ids;
        var level = _this2._org.levelWithID(zone_ids);
        if (level) _this2.level = level;
      }));
    }
  }, {
    key: "setLevel",
    value: function setLevel(level) {
      this.setOptions({
        zone_ids: [level === null || level === void 0 ? void 0 : level.id]
      });
      var bld = this._org.buildings.find(function (_) {
        return _.id === (level === null || level === void 0 ? void 0 : level.parent_id);
      });
      if (bld) {
        var _split$map = (level.location || bld.location).split(',').map(function (_) {
            return parseFloat(_);
          }),
          _split$map2 = _slicedToArray(_split$map, 2),
          latitude = _split$map2[0],
          longitude = _split$map2[1];
        this.coordinates = {
          latitude: latitude,
          longitude: longitude
        };
      }
      this.level = level;
    }
  }, {
    key: "setZoom",
    value: function setZoom(new_zoom) {
      this.zoom = Math.max(0.5, Math.min(10, new_zoom));
    }
  }, {
    key: "resetMap",
    value: function resetMap() {
      this.zoom = 1;
      this.center = {
        x: 0.5,
        y: 0.5
      };
    }
  }]);
}(common_1.AsyncHandler);
_SpaceSelectMapComponent = SpaceSelectMapComponent;
_SpaceSelectMapComponent.ɵfac = function SpaceSelectMapComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _SpaceSelectMapComponent)(i0.ɵɵdirectiveInject(i1.EventFormService), i0.ɵɵdirectiveInject(i2.OrganisationService), i0.ɵɵdirectiveInject(i3.SettingsService));
};
_SpaceSelectMapComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _SpaceSelectMapComponent,
  selectors: [["space-map"]],
  inputs: {
    selected: "selected",
    active: "active",
    is_displayed: "is_displayed"
  },
  outputs: {
    onSelect: "onSelect"
  },
  features: [i0.ɵɵInheritDefinitionFeature],
  decls: 8,
  vars: 17,
  consts: function consts() {
    var i18n_0;
    if (typeof ngI18nClosureMode !== "undefined" && ngI18nClosureMode) {
      /**
       * @suppress {msgDescriptions}
       */
      var MSG_EXTERNAL_7323982518822503502$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_MAP_COMPONENT_TS_0 = goog.getMsg("Any Level");
      i18n_0 = MSG_EXTERNAL_7323982518822503502$$LIBS_SPACES_SRC_LIB_SPACE_SELECT_MODAL_SPACE_MAP_COMPONENT_TS_0;
    } else {
      i18n_0 = $localize(_templateObject || (_templateObject = _taggedTemplateLiteral([":\u241F50407595967bf29832e873b41f9de3502d5c3e03\u241F7323982518822503502:Any Level"])));
    }
    return [[1, "bg-base-100", "p-2", "border-b", "border-base-200", "w-full"], ["appearance", "outline", "class", "w-full", 4, "ngIf"], [1, "relative", "flex-1", "w-full"], [3, "zoomChange", "centerChange", "src", "zoom", "center", "styles", "features", "actions", "options"], ["appearance", "outline", 1, "w-full"], ["name", "location", "placeholder", i18n_0, 3, "ngModelChange", "ngModel", "ngModelOptions"], [3, "value", 4, "ngFor", "ngForOf"], [3, "value"], [1, "flex", "flex-col-reverse"], ["class", "opacity-30 text-xs", 4, "ngIf"], [1, "opacity-30", "text-xs"], [1, "opacity-0"]];
  },
  template: function SpaceSelectMapComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵelementStart(0, "div", 0);
      i0.ɵɵtemplate(1, SpaceSelectMapComponent_mat_form_field_1_Template, 4, 6, "mat-form-field", 1);
      i0.ɵɵpipe(2, "async");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(3, "div", 2)(4, "interactive-map", 3);
      i0.ɵɵpipe(5, "async");
      i0.ɵɵpipe(6, "async");
      i0.ɵɵpipe(7, "async");
      i0.ɵɵtwoWayListener("zoomChange", function SpaceSelectMapComponent_Template_interactive_map_zoomChange_4_listener($event) {
        i0.ɵɵtwoWayBindingSet(ctx.zoom, $event) || (ctx.zoom = $event);
        return $event;
      })("centerChange", function SpaceSelectMapComponent_Template_interactive_map_centerChange_4_listener($event) {
        i0.ɵɵtwoWayBindingSet(ctx.center, $event) || (ctx.center = $event);
        return $event;
      });
      i0.ɵɵelementEnd()();
    }
    if (rf & 2) {
      var tmp_0_0;
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", (tmp_0_0 = i0.ɵɵpipeBind1(2, 8, ctx.levels)) == null ? null : tmp_0_0.length);
      i0.ɵɵadvance(3);
      i0.ɵɵproperty("src", ctx.map_url);
      i0.ɵɵtwoWayProperty("zoom", ctx.zoom)("center", ctx.center);
      i0.ɵɵproperty("styles", i0.ɵɵpipeBind1(5, 10, ctx.styles))("features", i0.ɵɵpipeBind1(6, 12, ctx.features))("actions", i0.ɵɵpipeBind1(7, 14, ctx.actions))("options", i0.ɵɵpureFunction0(16, _c0));
    }
  },
  styles: ["[_nghost-%COMP%] {\n                position: relative;\n                background: rgba(0, 0, 0, 0.05);\n                display: flex;\n                flex-direction: column;\n            }\n\n            button[_ngcontent-%COMP%] {\n                border-radius: 0;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNwYWNlLW1hcC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLGtCQUFrQjtnQkFDbEIsK0JBQStCO2dCQUMvQixhQUFhO2dCQUNiLHNCQUFzQjtZQUMxQjs7WUFFQTtnQkFDSSxnQkFBZ0I7WUFDcEIiLCJmaWxlIjoic3BhY2UtbWFwLmNvbXBvbmVudC50cyIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgOmhvc3Qge1xuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiByZ2JhKDAsIDAsIDAsIDAuMDUpO1xuICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYnV0dG9uIHtcbiAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAiXX0= */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvc3BhY2VzL3NyYy9saWIvc3BhY2Utc2VsZWN0LW1vZGFsL3NwYWNlLW1hcC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLGtCQUFrQjtnQkFDbEIsK0JBQStCO2dCQUMvQixhQUFhO2dCQUNiLHNCQUFzQjtZQUMxQjs7WUFFQTtnQkFDSSxnQkFBZ0I7WUFDcEI7O0FBRVosNHNCQUE0c0IiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIDpob3N0IHtcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZDogcmdiYSgwLCAwLCAwLCAwLjA1KTtcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGJ1dHRvbiB7XG4gICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl0sInNvdXJjZVJvb3QiOiIifQ== */"]
});
exports.SpaceSelectMapComponent = SpaceSelectMapComponent;

/***/ }),

/***/ 30735:
/*!********************************************!*\
  !*** ./libs/spaces/src/lib/space.class.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.Space = void 0;
var level_class_1 = __webpack_require__(/*! libs/organisation/src/lib/level.class */ 60602);
var Space = /*#__PURE__*/function () {
  function Space() {
    var data = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    _classCallCheck(this, Space);
    this.id = data.id || '';
    this.name = data.name || '';
    this.display_name = data.display_name || '';
    this.email = (data.email || '').toLowerCase();
    this.capacity = data.capacity || -1;
    this.feature_list = data.feature_list || data.features || [];
    this.bookable = !!data.bookable;
    this.zones = data.zones || [];
    this.support_url = data.support_url || '';
    this.map_id = data.map_id || '';
    this.images = data.images || [];
    this.configurations = data.configurations || [];
    this.features = data.features || [];
    this.response_status = data.response_status;
    this.level = data.level || new level_class_1.BuildingLevel();
    this.availability = data.availability || [];
  }
  return _createClass(Space, [{
    key: "inUseAt",
    value: function inUseAt(start, duration) {
      var end = start + duration * 60 * 1000;
      return this.availability.filter(function (i) {
        return i.date == start && i.date + i.duration * 60 * 1000 == end && i.status !== 'free';
      }).length > 0;
    }
  }]);
}();
exports.Space = Space;

/***/ }),

/***/ 22011:
/*!*******************************************!*\
  !*** ./libs/spaces/src/lib/space.pipe.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _regeneratorRuntime = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/regeneratorRuntime.js */ 8698)["default"]);
var _toConsumableArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/toConsumableArray.js */ 86033)["default"]);
var _objectSpread = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/objectSpread2.js */ 34092)["default"]);
var _asyncToGenerator = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/asyncToGenerator.js */ 95386)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _createForOfIteratorHelper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createForOfIteratorHelper.js */ 36350)["default"]);
var _SpacePipe;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.SpacePipe = void 0;
exports.updateSpaceList = _updateSpaceList;
var ts_client_1 = __webpack_require__(/*! @placeos/ts-client */ 35713);
var organisation_service_1 = __webpack_require__(/*! libs/organisation/src/lib/organisation.service */ 19863);
var space_class_1 = __webpack_require__(/*! ./space.class */ 30735);
var operators_1 = __webpack_require__(/*! rxjs/operators */ 97303);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! libs/organisation/src/lib/organisation.service */ 19863);
var SPACE_LIST = [];
var ATTEMPT_COUNT = {};
var EMPTY_SPACE = new space_class_1.Space({
  email: 'empty.space@place.os'
});
function _updateSpaceList(space_list) {
  var _iterator = _createForOfIteratorHelper(space_list),
    _step;
  try {
    var _loop = function _loop() {
      var space = _step.value;
      if (!SPACE_LIST.find(function (_ref) {
        var id = _ref.id;
        return id === space.id;
      })) {
        SPACE_LIST.push(space);
      }
    };
    for (_iterator.s(); !(_step = _iterator.n()).done;) {
      _loop();
    }
  } catch (err) {
    _iterator.e(err);
  } finally {
    _iterator.f();
  }
}
setInterval(function () {
  for (var id in ATTEMPT_COUNT) {
    ATTEMPT_COUNT[id] = ATTEMPT_COUNT[id] - 1;
    if (ATTEMPT_COUNT[id] <= 0) {
      delete ATTEMPT_COUNT[id];
    }
  }
}, 10 * 1000);
var SpacePipe = /*#__PURE__*/function () {
  function SpacePipe(_org) {
    _classCallCheck(this, SpacePipe);
    this._org = _org;
  }
  /**
   * Get details of the space with the given ID
   * @param space_id ID or Email of the space
   */
  return _createClass(SpacePipe, [{
    key: "transform",
    value: (function () {
      var _transform = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(space_id) {
        var _this$_org2;
        var is_email, space, system, _this$_org, systems, _this$_org3;
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              if (!this._org) {
                _context.next = 3;
                break;
              }
              _context.next = 3;
              return this._org.initialised.pipe((0, operators_1.first)(function (_) {
                return _;
              })).toPromise();
            case 3:
              is_email = space_id === null || space_id === void 0 ? void 0 : space_id.includes('@');
              if (space_id) {
                _context.next = 6;
                break;
              }
              return _context.abrupt("return", EMPTY_SPACE);
            case 6:
              space = SPACE_LIST.find(function (_ref2) {
                var id = _ref2.id,
                  email = _ref2.email;
                return id === space_id || email === space_id;
              });
              if (!space) {
                _context.next = 9;
                break;
              }
              return _context.abrupt("return", space);
            case 9:
              if (!ATTEMPT_COUNT[space_id]) {
                _context.next = 11;
                break;
              }
              return _context.abrupt("return", EMPTY_SPACE);
            case 11:
              if (is_email) {
                _context.next = 19;
                break;
              }
              _context.next = 14;
              return (0, ts_client_1.showSystem)(space_id).toPromise()["catch"](function (_) {
                return null;
              });
            case 14:
              system = _context.sent;
              if (!system) {
                _context.next = 19;
                break;
              }
              space = new space_class_1.Space(_objectSpread(_objectSpread({}, system), {}, {
                level: (_this$_org = this._org) === null || _this$_org === void 0 ? void 0 : _this$_org.levelWithID(_toConsumableArray(system.zones))
              }));
              SPACE_LIST.push(space);
              return _context.abrupt("return", space);
            case 19:
              _context.next = 21;
              return (0, ts_client_1.querySystemsWithEmails)({
                "in": space_id,
                zone_id: (_this$_org2 = this._org) === null || _this$_org2 === void 0 ? void 0 : _this$_org2.organisation.id
              }).toPromise();
            case 21:
              systems = _context.sent.data;
              if (!(systems.length === 1)) {
                _context.next = 26;
                break;
              }
              space = new space_class_1.Space(_objectSpread(_objectSpread({}, systems[0]), {}, {
                level: (_this$_org3 = this._org) === null || _this$_org3 === void 0 ? void 0 : _this$_org3.levelWithID(_toConsumableArray(systems[0].zones))
              }));
              SPACE_LIST.push(space);
              return _context.abrupt("return", space);
            case 26:
              return _context.abrupt("return", EMPTY_SPACE);
            case 27:
            case "end":
              return _context.stop();
          }
        }, _callee, this);
      }));
      function transform(_x) {
        return _transform.apply(this, arguments);
      }
      return transform;
    }())
  }, {
    key: "updateSpaceList",
    value: function updateSpaceList(space_list) {
      _updateSpaceList(space_list);
    }
  }]);
}();
_SpacePipe = SpacePipe;
_SpacePipe.ɵfac = function SpacePipe_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _SpacePipe)(i0.ɵɵdirectiveInject(i1.OrganisationService, 24));
};
_SpacePipe.ɵpipe = /*@__PURE__*/i0.ɵɵdefinePipe({
  name: "space",
  type: _SpacePipe,
  pure: true
});
exports.SpacePipe = SpacePipe;

/***/ }),

/***/ 28363:
/*!************************************************!*\
  !*** ./libs/spaces/src/lib/space.utilities.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _objectSpread = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/objectSpread2.js */ 34092)["default"]);
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.validateURL = exports.isValidUrl = void 0;
exports.generateSystemsFormFields = generateSystemsFormFields;
exports.requestSpacesForZone = requestSpacesForZone;
exports.generateMockSpace = generateMockSpace;
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var ts_client_1 = __webpack_require__(/*! @placeos/ts-client */ 35713);
var rxjs_1 = __webpack_require__(/*! rxjs */ 15681);
var operators_1 = __webpack_require__(/*! rxjs/operators */ 97303);
var user_utilities_1 = __webpack_require__(/*! ../../../users/src/lib/user.utilities */ 24129);
var space_class_1 = __webpack_require__(/*! ./space.class */ 30735);
var space_pipe_1 = __webpack_require__(/*! ./space.pipe */ 22011);
var forms_1 = __webpack_require__(/*! @angular/forms */ 34456);
var SPACE_LIST_REQUESTS = {};
var isValidUrl = function isValidUrl(url) {
  if (!url) return true;
  try {
    new URL(url);
  } catch (e) {
    return false;
  }
  return true;
};
exports.isValidUrl = isValidUrl;
var validateURL = function validateURL(ctrl) {
  return (0, exports.isValidUrl)(ctrl === null || ctrl === void 0 ? void 0 : ctrl.value) ? null : {
    url: 'invalid'
  };
};
exports.validateURL = validateURL;
function generateSystemsFormFields(system) {
  var fields = {
    id: new forms_1.FormControl((system === null || system === void 0 ? void 0 : system.id) || ''),
    name: new forms_1.FormControl(system.name || '', [forms_1.Validators.required]),
    display_name: new forms_1.FormControl(system.display_name || ''),
    email: new forms_1.FormControl(system.email || '', [forms_1.Validators.email]),
    code: new forms_1.FormControl(system.code || ''),
    support_url: new forms_1.FormControl(system.support_url || '', [exports.validateURL]),
    installed_ui_devices: new forms_1.FormControl(system.installed_ui_devices || 0, [forms_1.Validators.pattern('[0-9]*')]),
    features: new forms_1.FormControl((typeof system.features === 'string' ? system.features.split(' ') : system.features) || []),
    capacity: new forms_1.FormControl(system.capacity || 0, [forms_1.Validators.pattern('[0-9]*')]),
    bookable: new forms_1.FormControl(system.bookable || false),
    "public": new forms_1.FormControl(system["public"] || false),
    description: new forms_1.FormControl(system.description || ''),
    images: new forms_1.FormControl(system.images || []),
    map_id: new forms_1.FormControl(system.map_id || ''),
    timezone: new forms_1.FormControl(system.timezone || ''),
    zone: new forms_1.FormControl(null, [forms_1.Validators.required]),
    zones: new forms_1.FormControl(system.zones, [forms_1.Validators.required]),
    version: new forms_1.FormControl(system.version)
  };
  if (!system.id) {
    fields.zone.valueChanges.subscribe(function (value) {
      return fields.zones.setValue([value.id]);
    });
  } else delete fields.zone;
  return new forms_1.FormGroup(fields);
}
function requestSpacesForZone(id) {
  if (!id) return (0, rxjs_1.of)([]);
  if (SPACE_LIST_REQUESTS[id]) return SPACE_LIST_REQUESTS[id];
  SPACE_LIST_REQUESTS[id] = (0, ts_client_1.querySystems)({
    zone_id: id,
    limit: 500
  }).pipe((0, operators_1.map)(function (_) {
    return (_.data || []).map(function (_) {
      return new space_class_1.Space(_);
    });
  }), (0, operators_1.tap)(function (_) {
    return (0, space_pipe_1.updateSpaceList)(_);
  }), (0, operators_1.shareReplay)(1));
  return SPACE_LIST_REQUESTS[id];
}
var SPACE_COUNT = 0;
/* istanbul ignore next */
function generateMockSpace() {
  var overrides = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
  var id = "space-".concat(SPACE_COUNT++);
  var name = "Test Space ".concat(SPACE_COUNT);
  var linked = (0, common_1.predictableRandomInt)(99999) % 2 === 0 && SPACE_COUNT > 1;
  var space = _objectSpread({
    id: id,
    name: name,
    long_name: "".concat(name, " with an long name"),
    map_id: "".concat(SPACE_COUNT),
    capacity: (0, common_1.predictableRandomInt)(21, 1) * 2,
    email: "".concat(name.toLowerCase().split(' ').join('.'), "@").concat(user_utilities_1.USER_DOMAIN),
    type: '',
    searchable: (0, common_1.predictableRandomInt)(99999) % 2 === 0,
    controlable: (0, common_1.predictableRandomInt)(99999) % 2 === 0,
    bookable: (0, common_1.predictableRandomInt)(99999) % 2 === 0,
    cost_hour: (0, common_1.predictableRandomInt)(300) * 100,
    setup: (0, common_1.predictableRandomInt)(6) * 5,
    breakdown: (0, common_1.predictableRandomInt)(6) * 5,
    zones: ['zone_lvl-0'],
    support_url: "/control/#/panel/".concat(id),
    bookings: [],
    //Array(10).fill(0).map(i => generateMockBooking()),
    linked_rooms: linked ? ["space-".concat((0, common_1.predictableRandomInt)(SPACE_COUNT - 1))] : [],
    image: ''
  }, overrides);
  if (space['configurations'] && space['configurations'].length > 0) {
    space['configurations'].forEach(function (config) {
      return config.capacity = (0, common_1.predictableRandomInt)(space.capacity) + 1;
    });
    space['configurations'][0].capacity = space.capacity;
  }
  return space;
}

/***/ }),

/***/ 34360:
/*!**********************************************!*\
  !*** ./libs/spaces/src/lib/spaces.module.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _SharedSpacesModule;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.SharedSpacesModule = void 0;
var common_1 = __webpack_require__(/*! @angular/common */ 60316);
var core_1 = __webpack_require__(/*! @angular/core */ 37580);
var forms_1 = __webpack_require__(/*! @angular/forms */ 34456);
var dialog_1 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var bottom_sheet_1 = __webpack_require__(/*! @angular/material/bottom-sheet */ 15244);
var checkbox_1 = __webpack_require__(/*! @angular/material/checkbox */ 97024);
var components_module_1 = __webpack_require__(/*! libs/components/src/lib/components.module */ 14974);
var form_fields_module_1 = __webpack_require__(/*! libs/form-fields/src/lib/form-fields.module */ 77066);
var new_space_select_modal_component_1 = __webpack_require__(/*! ./space-select-modal/new-space-select-modal.component */ 85752);
var space_details_component_1 = __webpack_require__(/*! ./space-select-modal/space-details.component */ 17309);
var space_list_component_1 = __webpack_require__(/*! ./space-select-modal/space-list.component */ 49609);
var space_filters_component_1 = __webpack_require__(/*! ./space-select-modal/space-filters.component */ 62796);
var space_filters_display_component_1 = __webpack_require__(/*! ./space-select-modal/space-filters-display.component */ 62779);
var space_map_component_1 = __webpack_require__(/*! ./space-select-modal/space-map.component */ 30937);
var space_location_pin_component_1 = __webpack_require__(/*! ./space-select-modal/space-location-pin.component */ 83904);
var space_pipe_1 = __webpack_require__(/*! ./space.pipe */ 22011);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @angular/common */ 60316);
var i2 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var i3 = __webpack_require__(/*! ../../../components/src/lib/icon.component */ 69434);
var i4 = __webpack_require__(/*! @angular/material/core */ 74646);
var i5 = __webpack_require__(/*! ../../../components/src/lib/interactive-map.component */ 24918);
var i6 = __webpack_require__(/*! ../../../components/src/lib/image-carousel.component */ 65277);
var i7 = __webpack_require__(/*! ../../../components/src/lib/authenticated-image.directive */ 93208);
var i8 = __webpack_require__(/*! @angular/material/progress-spinner */ 41134);
var i9 = __webpack_require__(/*! @angular/material/form-field */ 24950);
var i10 = __webpack_require__(/*! @angular/material/select */ 25175);
var i11 = __webpack_require__(/*! @angular/material/checkbox */ 97024);
var i12 = __webpack_require__(/*! ../../../form-fields/src/lib/date-field.component */ 19608);
var i13 = __webpack_require__(/*! ../../../form-fields/src/lib/duration-field.component */ 83476);
var i14 = __webpack_require__(/*! ../../../form-fields/src/lib/time-field.component */ 81413);
var i15 = __webpack_require__(/*! @angular/forms */ 34456);
var i16 = __webpack_require__(/*! ../../../components/src/lib/building.pipe */ 56062);
var i17 = __webpack_require__(/*! @ngx-translate/core */ 597);
var COMPONENTS = [new_space_select_modal_component_1.NewSpaceSelectModalComponent, space_details_component_1.SpaceDetailsComponent, space_list_component_1.SpaceListComponent, space_filters_component_1.SpaceFiltersComponent, space_filters_display_component_1.SpaceFiltersDisplayComponent, space_map_component_1.SpaceSelectMapComponent, space_location_pin_component_1.SpaceLocationPinComponent, space_pipe_1.SpacePipe];
var SharedSpacesModule = /*#__PURE__*/_createClass(function SharedSpacesModule() {
  _classCallCheck(this, SharedSpacesModule);
});
_SharedSpacesModule = SharedSpacesModule;
_SharedSpacesModule.ɵfac = function SharedSpacesModule_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _SharedSpacesModule)();
};
_SharedSpacesModule.ɵmod = /*@__PURE__*/i0.ɵɵdefineNgModule({
  type: _SharedSpacesModule
});
_SharedSpacesModule.ɵinj = /*@__PURE__*/i0.ɵɵdefineInjector({
  imports: [common_1.CommonModule, dialog_1.MatDialogModule, components_module_1.ComponentsModule, form_fields_module_1.FormFieldsModule, bottom_sheet_1.MatBottomSheetModule, checkbox_1.MatCheckboxModule, forms_1.FormsModule, forms_1.ReactiveFormsModule]
});
exports.SharedSpacesModule = SharedSpacesModule;
(function () {
  (typeof ngJitMode === "undefined" || ngJitMode) && i0.ɵɵsetNgModuleScope(SharedSpacesModule, {
    declarations: [new_space_select_modal_component_1.NewSpaceSelectModalComponent, space_details_component_1.SpaceDetailsComponent, space_list_component_1.SpaceListComponent, space_filters_component_1.SpaceFiltersComponent, space_filters_display_component_1.SpaceFiltersDisplayComponent, space_map_component_1.SpaceSelectMapComponent, space_location_pin_component_1.SpaceLocationPinComponent, space_pipe_1.SpacePipe],
    imports: [common_1.CommonModule, dialog_1.MatDialogModule, components_module_1.ComponentsModule, form_fields_module_1.FormFieldsModule, bottom_sheet_1.MatBottomSheetModule, checkbox_1.MatCheckboxModule, forms_1.FormsModule, forms_1.ReactiveFormsModule],
    exports: [new_space_select_modal_component_1.NewSpaceSelectModalComponent, space_details_component_1.SpaceDetailsComponent, space_list_component_1.SpaceListComponent, space_filters_component_1.SpaceFiltersComponent, space_filters_display_component_1.SpaceFiltersDisplayComponent, space_map_component_1.SpaceSelectMapComponent, space_location_pin_component_1.SpaceLocationPinComponent, space_pipe_1.SpacePipe]
  });
})();
i0.ɵɵsetComponentScope(new_space_select_modal_component_1.NewSpaceSelectModalComponent, [i1.NgIf, i2.MatDialogClose, i3.IconComponent, i4.MatRipple, space_details_component_1.SpaceDetailsComponent, space_list_component_1.SpaceListComponent, space_filters_component_1.SpaceFiltersComponent, space_filters_display_component_1.SpaceFiltersDisplayComponent, space_map_component_1.SpaceSelectMapComponent], []);
i0.ɵɵsetComponentScope(space_details_component_1.SpaceDetailsComponent, [i1.NgForOf, i1.NgIf, i3.IconComponent, i5.InteractiveMapComponent, i6.ImageCarouselComponent, i4.MatRipple], []);
i0.ɵɵsetComponentScope(space_list_component_1.SpaceListComponent, [i1.NgForOf, i1.NgIf, i3.IconComponent, i7.AuthenticatedImageDirective, i4.MatRipple, i8.MatProgressSpinner], [i1.AsyncPipe]);
i0.ɵɵsetComponentScope(space_filters_component_1.SpaceFiltersComponent, [i1.NgForOf, i1.NgIf, i3.IconComponent, i4.MatOption, i9.MatFormField, i10.MatSelect, i4.MatRipple, i11.MatCheckbox, i12.DateFieldComponent, i13.DurationFieldComponent, i14.TimeFieldComponent, i15.ɵNgNoValidate, i15.NgControlStatus, i15.NgControlStatusGroup, i15.NgModel, i15.FormGroupDirective, i15.FormControlName], [i1.AsyncPipe, i16.BuildingPipe, i17.TranslatePipe]);
i0.ɵɵsetComponentScope(space_map_component_1.SpaceSelectMapComponent, [i1.NgForOf, i1.NgIf, i5.InteractiveMapComponent, i4.MatOption, i9.MatFormField, i10.MatSelect, i15.NgControlStatus, i15.NgModel], [i1.AsyncPipe, i16.BuildingPipe]);

/***/ }),

/***/ 7401:
/*!***********************************************!*\
  !*** ./libs/spaces/src/lib/spaces.service.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _toConsumableArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/toConsumableArray.js */ 86033)["default"]);
var _objectSpread = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/objectSpread2.js */ 34092)["default"]);
var _regeneratorRuntime = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/regeneratorRuntime.js */ 8698)["default"]);
var _asyncToGenerator = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/asyncToGenerator.js */ 95386)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _SpacesService;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.SpacesService = void 0;
var ts_client_1 = __webpack_require__(/*! @placeos/ts-client */ 35713);
var operators_1 = __webpack_require__(/*! rxjs/operators */ 97303);
var rxjs_1 = __webpack_require__(/*! rxjs */ 15681);
var organisation_service_1 = __webpack_require__(/*! libs/organisation/src/lib/organisation.service */ 19863);
var space_class_1 = __webpack_require__(/*! ./space.class */ 30735);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var space_pipe_1 = __webpack_require__(/*! ./space.pipe */ 22011);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! libs/organisation/src/lib/organisation.service */ 19863);
var i2 = __webpack_require__(/*! @placeos/common */ 22797);
var SPACE_PIPE;
var SpacesService = /*#__PURE__*/function () {
  function SpacesService(_org, _settings) {
    var _this = this;
    _classCallCheck(this, SpacesService);
    this._org = _org;
    this._settings = _settings;
    /** Subject to store list of spaces */
    this._list = new rxjs_1.BehaviorSubject([]);
    /** Subject which stores the initialised state of the object */
    this._initialised = new rxjs_1.BehaviorSubject(false);
    /** Observable of the initialised state of the object */
    this.initialised = this._initialised.asObservable();
    /** Observable for list of spaces */
    this.list = this._list.asObservable();
    /** List of available features */
    this.features = this.list.pipe((0, operators_1.map)(function (_) {
      return (0, common_1.unique)((0, common_1.flatten)(_.map(function (i) {
        return i.features;
      })));
    }));
    /** Default predicate for filter method */
    this._compare = function (space) {
      return space.zones.includes(_this._org.building.id);
    };
    SPACE_PIPE = new space_pipe_1.SpacePipe(_org);
    this._init();
  }
  return _createClass(SpacesService, [{
    key: "space_list",
    get: /** List of available spaces */
    function get() {
      return this._list.getValue();
    }
  }, {
    key: "_init",
    value: function () {
      var _init2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              _context.next = 2;
              return this._org.initialised.pipe((0, operators_1.first)(function (_) {
                return _;
              })).toPromise();
            case 2:
              if (!this._settings.get('app.prevent_space_init')) this.loadSpaces();else this._initialised.next(true);
            case 3:
            case "end":
              return _context.stop();
          }
        }, _callee, this);
      }));
      function _init() {
        return _init2.apply(this, arguments);
      }
      return _init;
    }()
    /**
     * Get a filtered list of the available spaces
     * @param predicate Predicate for filtering spaces
     */
  }, {
    key: "filter",
    value: function filter() {
      var predicate = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this._compare;
      return this._list.getValue().filter(function (_) {
        return predicate(_);
      });
    }
  }, {
    key: "loadSpace",
    value: function () {
      var _loadSpace = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(space_id) {
        var system, space;
        return _regeneratorRuntime().wrap(function _callee2$(_context2) {
          while (1) switch (_context2.prev = _context2.next) {
            case 0:
              _context2.next = 2;
              return (0, ts_client_1.showSystem)(space_id).toPromise();
            case 2:
              system = _context2.sent;
              space = new space_class_1.Space(_objectSpread(_objectSpread({}, system), {}, {
                level: this._org.levelWithID(_toConsumableArray(system.zones))
              }));
              SPACE_PIPE.updateSpaceList([space]);
            case 5:
            case "end":
              return _context2.stop();
          }
        }, _callee2, this);
      }));
      function loadSpace(_x) {
        return _loadSpace.apply(this, arguments);
      }
      return loadSpace;
    }()
    /**
     * Find space with given id/email
     * @param space_id ID/Email address associated with the space
     */
  }, {
    key: "find",
    value: function find(space_id) {
      return this._list.getValue().find(function (_ref) {
        var id = _ref.id;
        return space_id === id;
      });
    }
  }, {
    key: "loadSpaces",
    value: function () {
      var _loadSpaces = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {
        var _this2 = this;
        var systems, space_list, valid_spaces;
        return _regeneratorRuntime().wrap(function _callee3$(_context3) {
          while (1) switch (_context3.prev = _context3.next) {
            case 0:
              _context3.next = 2;
              return (0, ts_client_1.querySystems)({
                zone_id: this._org.organisation.id,
                limit: 5000
              }).pipe((0, operators_1.map)(function (i) {
                return i.data;
              })).toPromise();
            case 2:
              systems = _context3.sent;
              space_list = systems.map(function (sys) {
                return new space_class_1.Space(_objectSpread(_objectSpread({}, sys), {}, {
                  level: _this2._org.levelWithID(_toConsumableArray(sys.zones))
                }));
              }); // Remove spaces without a map ID
              valid_spaces = space_list.filter(function (space) {
                return space.map_id;
              });
              this._list.next(valid_spaces);
              SPACE_PIPE.updateSpaceList(valid_spaces);
              this._initialised.next(true);
            case 8:
            case "end":
              return _context3.stop();
          }
        }, _callee3, this);
      }));
      function loadSpaces() {
        return _loadSpaces.apply(this, arguments);
      }
      return loadSpaces;
    }()
  }]);
}();
_SpacesService = SpacesService;
_SpacesService.ɵfac = function SpacesService_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _SpacesService)(i0.ɵɵinject(i1.OrganisationService), i0.ɵɵinject(i2.SettingsService));
};
_SpacesService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({
  token: _SpacesService,
  factory: _SpacesService.ɵfac,
  providedIn: 'root'
});
exports.SpacesService = SpacesService;

/***/ }),

/***/ 33220:
/*!***************************************!*\
  !*** ./libs/spaces/src/lib/spaces.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var tslib_1 = __webpack_require__(/*! tslib */ 24398);
tslib_1.__exportStar(__webpack_require__(/*! ./space.class */ 30735), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./space.utilities */ 28363), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./spaces.module */ 34360), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./spaces.service */ 7401), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./space-select-modal/new-space-select-modal.component */ 85752), exports);

/***/ }),

/***/ 63870:
/*!*********************************!*\
  !*** ./libs/users/src/index.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
var tslib_1 = __webpack_require__(/*! tslib */ 24398);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/users.module */ 34426), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/new-user-modal.component */ 11543), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/find-availability-modal/find-availability-modal.component */ 12716), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/user-form.component */ 7111), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/location.class */ 74529), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/user.class */ 93693), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/user.utilities */ 24129), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/users.module */ 34426), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/guests.fn */ 86039), exports);
tslib_1.__exportStar(__webpack_require__(/*! ./lib/staff.fn */ 2372), exports);

/***/ }),

/***/ 12716:
/*!*****************************************************************************************!*\
  !*** ./libs/users/src/lib/find-availability-modal/find-availability-modal.component.ts ***!
  \*****************************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _createForOfIteratorHelper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createForOfIteratorHelper.js */ 36350)["default"]);
var _toConsumableArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/toConsumableArray.js */ 86033)["default"]);
var _slicedToArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/slicedToArray.js */ 6282)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _callSuper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/callSuper.js */ 8513)["default"]);
var _inherits = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/inherits.js */ 58160)["default"]);
var _FindAvailabilityModalComponent;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.FindAvailabilityModalComponent = void 0;
var core_1 = __webpack_require__(/*! @angular/core */ 37580);
var dialog_1 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var date_fns_1 = __webpack_require__(/*! date-fns */ 25773);
var calendar_fn_1 = __webpack_require__(/*! libs/calendar/src/lib/calendar.fn */ 458);
var rxjs_1 = __webpack_require__(/*! rxjs */ 15681);
var operators_1 = __webpack_require__(/*! rxjs/operators */ 97303);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var _c0 = ["container"];
var _c1 = function _c1() {
  return [];
};
function FindAvailabilityModalComponent_div_12_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 32);
    i0.ɵɵtext(1);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var hour_r2 = ctx.index;
    var ctx_r2 = i0.ɵɵnextContext();
    i0.ɵɵstyleProp("left", -ctx_r2.offset_x + "px");
    i0.ɵɵattribute("disabled", ctx_r2.today && ctx_r2.current_hour > hour_r2);
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate2(" ", hour_r2 % 12 === 0 ? "12" : hour_r2 % 12, "", hour_r2 >= 12 ? "pm" : "am", " ");
  }
}
function FindAvailabilityModalComponent_div_18_Template(rf, ctx) {
  if (rf & 1) {
    var _r4 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 33);
    i0.ɵɵelement(1, "a-user-avatar", 12);
    i0.ɵɵelementStart(2, "div", 34);
    i0.ɵɵtext(3);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(4, "button", 35);
    i0.ɵɵlistener("click", function FindAvailabilityModalComponent_div_18_Template_button_click_4_listener() {
      var user_r5 = i0.ɵɵrestoreView(_r4).$implicit;
      var ctx_r2 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r2.removeUser(user_r5));
    });
    i0.ɵɵelementStart(5, "app-icon");
    i0.ɵɵtext(6, "close");
    i0.ɵɵelementEnd()()();
  }
  if (rf & 2) {
    var user_r5 = ctx.$implicit;
    var ctx_r2 = i0.ɵɵnextContext();
    i0.ɵɵstyleProp("top", -ctx_r2.offset_y + "px");
    i0.ɵɵadvance();
    i0.ɵɵproperty("user", user_r5);
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate1(" ", user_r5.name || ctx_r2.host.email, " ");
  }
}
function FindAvailabilityModalComponent_div_22_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelement(0, "div", 36);
  }
  if (rf & 2) {
    var h_r6 = ctx.index;
    var ctx_r2 = i0.ɵɵnextContext();
    i0.ɵɵstyleProp("left", -(ctx_r2.offset_x + 1) + "px");
    i0.ɵɵattribute("disabled", ctx_r2.today && ctx_r2.current_hour > h_r6);
  }
}
function FindAvailabilityModalComponent_div_30_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 37);
    i0.ɵɵtext(1);
    i0.ɵɵpipe(2, "date");
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r2 = i0.ɵɵnextContext();
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", i0.ɵɵpipeBind2(2, 1, ctx_r2.date, "shortTime"), " ");
  }
}
function FindAvailabilityModalComponent_user_availability_list_36_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelement(0, "user-availability-list", 25);
    i0.ɵɵpipe(1, "async");
    i0.ɵɵpipe(2, "async");
  }
  if (rf & 2) {
    var user_r7 = ctx.$implicit;
    var ctx_r2 = i0.ɵɵnextContext();
    i0.ɵɵproperty("user", user_r7)("date", ctx_r2.date)("availability", i0.ɵɵpipeBind1(1, 3, ctx_r2.availability) ? i0.ɵɵpipeBind1(2, 5, ctx_r2.availability)[user_r7.email.toLowerCase()] : i0.ɵɵpureFunction0(7, _c1));
  }
}
var FindAvailabilityModalComponent = /*#__PURE__*/function (_common_1$AsyncHandle) {
  function FindAvailabilityModalComponent(_data, _renderer, _dialog_ref) {
    var _this;
    _classCallCheck(this, FindAvailabilityModalComponent);
    _this = _callSuper(this, FindAvailabilityModalComponent);
    _this._data = _data;
    _this._renderer = _renderer;
    _this._dialog_ref = _dialog_ref;
    _this.users = new rxjs_1.BehaviorSubject([]);
    _this.search = '';
    _this.date = _this._data.date || Date.now();
    _this.duration = _this._data.duration || 60;
    _this.offset_y = 0;
    _this.offset_x = 0;
    _this.host = _this._data.host;
    _this.hours = new Array(24).fill(0);
    _this.on_change = new rxjs_1.BehaviorSubject(0);
    _this.availability = (0, rxjs_1.combineLatest)([_this.users, _this.on_change]).pipe((0, operators_1.debounceTime)(300), (0, operators_1.switchMap)(function (_ref) {
      var _ref2 = _slicedToArray(_ref, 1),
        users = _ref2[0];
      return (0, calendar_fn_1.queryUserFreeBusy)({
        calendars: [_this.host.email].concat(_toConsumableArray(users.map(function (_) {
          return _.email.toLowerCase();
        }))).join(','),
        period_start: (0, date_fns_1.getUnixTime)((0, date_fns_1.startOfDay)(_this.date)),
        period_end: (0, date_fns_1.getUnixTime)((0, date_fns_1.endOfDay)(_this.date))
      }).pipe((0, operators_1.catchError)(function () {
        return (0, rxjs_1.of)([]);
      }));
    }), (0, operators_1.map)(function (availability_list) {
      var availability_map = {};
      var _iterator = _createForOfIteratorHelper(availability_list),
        _step;
      try {
        for (_iterator.s(); !(_step = _iterator.n()).done;) {
          var item = _step.value;
          availability_map[item.id.toLowerCase()] = item.availability.filter(function (_) {
            return _.status === 'busy';
          }).map(function (block) {
            var date = (0, date_fns_1.fromUnixTime)(block.starts_at);
            var duration = (0, date_fns_1.differenceInMinutes)((0, date_fns_1.fromUnixTime)(block.ends_at), (0, date_fns_1.fromUnixTime)(block.starts_at));
            return {
              date: date,
              duration: duration,
              start: (date.getHours() + date.getMinutes() / 60) / 24 * 100,
              size: duration / 60 / 24 * 100
            };
          });
        }
      } catch (err) {
        _iterator.e(err);
      } finally {
        _iterator.f();
      }
      return availability_map;
    }), (0, operators_1.defaultIfEmpty)({}), (0, operators_1.shareReplay)(1));
    _this.move_time = false;
    _this._start_time = 0;
    _this._move_last = 0;
    _this._move_size = 80 * 24;
    _this.users.next(_toConsumableArray(_this._data.users));
    return _this;
  }
  _inherits(FindAvailabilityModalComponent, _common_1$AsyncHandle);
  return _createClass(FindAvailabilityModalComponent, [{
    key: "today",
    get: function get() {
      return (0, date_fns_1.isSameDay)(this.date, Date.now());
    }
  }, {
    key: "current_hour",
    get: function get() {
      return new Date().getHours();
    }
  }, {
    key: "selection_left",
    get: function get() {
      var date = new Date(this.date);
      return (date.getHours() + date.getMinutes() / 60) * 5;
    }
  }, {
    key: "selection_width",
    get: function get() {
      return this.duration / 60 * 5;
    }
  }, {
    key: "addUser",
    value: function addUser(user) {
      this.users.next([].concat(_toConsumableArray(this.users.getValue().filter(function (u) {
        return u.email !== user.email;
      })), [user]));
      this.user = null;
    }
  }, {
    key: "removeUser",
    value: function removeUser(user) {
      this.users.next(this.users.getValue().filter(function (u) {
        return u.email !== user.email;
      }));
      this.user = null;
    }
  }, {
    key: "closeAndUpdate",
    value: function closeAndUpdate() {
      this._dialog_ref.close(true);
    }
  }, {
    key: "ngAfterViewInit",
    value: function ngAfterViewInit() {
      var _this2 = this;
      var date = new Date(this.date);
      this.timeout('init', function () {
        var el = _this2._container_el.nativeElement.querySelector("[hour=\"".concat(date.getHours(), "\"]"));
        if (el) {
          var rect = _this2._container_el.nativeElement.getBoundingClientRect();
          var el_rect = el.getBoundingClientRect();
          _this2._container_el.nativeElement.scrollTo(el_rect.left - 128 - rect.left, 0);
        }
        _this2.onScroll();
      }, 300);
    }
  }, {
    key: "onScroll",
    value: function onScroll() {
      this.offset_x = this._container_el.nativeElement.scrollLeft;
      this.offset_y = this._container_el.nativeElement.scrollTop;
    }
  }, {
    key: "startMovePeriod",
    value: function startMovePeriod(event) {
      var _this3 = this;
      event.preventDefault();
      event.stopPropagation();
      this._move_last = event instanceof MouseEvent ? event.clientX : event.touches[0].clientX;
      this.move_time = true;
      this._start_time = this.date;
      event instanceof MouseEvent ? this.subscription('on_move', this._renderer.listen('window', 'mousemove', function (e) {
        return _this3._onMovePeriod(e);
      })) : this.subscription('on_move', this._renderer.listen('window', 'touchmove', function (e) {
        return _this3._onMovePeriod(e);
      }));
      event instanceof MouseEvent ? this.subscription('on_move_end', this._renderer.listen('window', 'mouseup', function () {
        return _this3._onMoveEnd();
      })) : this.subscription('on_move_end', this._renderer.listen('window', 'touchend', function () {
        return _this3._onMoveEnd();
      }));
    }
  }, {
    key: "startMoveDuration",
    value: function startMoveDuration(event) {
      var _this4 = this;
      event.preventDefault();
      event.stopPropagation();
      this._move_last = event instanceof MouseEvent ? event.clientX : event.touches[0].clientX;
      this._start_time = this.duration;
      event instanceof MouseEvent ? this.subscription('on_move', this._renderer.listen('window', 'mousemove', function (e) {
        return _this4._onMoveDuration(e);
      })) : this.subscription('on_move', this._renderer.listen('window', 'touchmove', function (e) {
        return _this4._onMoveDuration(e);
      }));
      event instanceof MouseEvent ? this.subscription('on_move_end', this._renderer.listen('window', 'mouseup', function () {
        return _this4._onMoveEnd();
      })) : this.subscription('on_move_end', this._renderer.listen('window', 'touchend', function () {
        return _this4._onMoveEnd();
      }));
    }
  }, {
    key: "_onMovePeriod",
    value: function _onMovePeriod(event) {
      var change_px = this._move_last - (event instanceof MouseEvent ? event.clientX : event.touches[0].clientX);
      var dir = change_px > 0 ? -1 : 1;
      var change_min = dir * Math.floor(Math.abs(change_px / this._move_size * 24 * 60) / 5) * 5;
      if (change_min) {
        var old_date = this.date;
        this.date = (0, date_fns_1.addMinutes)(this._start_time, change_min).valueOf();
        if (this.date < Date.now()) this.date = old_date;
      }
    }
  }, {
    key: "_onMoveDuration",
    value: function _onMoveDuration(event) {
      var change_px = this._move_last - (event instanceof MouseEvent ? event.clientX : event.touches[0].clientX);
      var dir = change_px > 0 ? -1 : 1;
      var change_min = dir * Math.floor(Math.abs(change_px / this._move_size * 24 * 60) / 5) * 5;
      if (change_min) {
        this.duration = Math.max(30, this._start_time + change_min);
      }
    }
  }, {
    key: "_onMoveEnd",
    value: function _onMoveEnd() {
      this.unsub('on_move');
      this.unsub('on_move_end');
      this._move_last = 0;
      this.move_time = false;
    }
  }]);
}(common_1.AsyncHandler);
_FindAvailabilityModalComponent = FindAvailabilityModalComponent;
_FindAvailabilityModalComponent.ɵfac = function FindAvailabilityModalComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _FindAvailabilityModalComponent)(i0.ɵɵdirectiveInject(dialog_1.MAT_DIALOG_DATA), i0.ɵɵdirectiveInject(i0.Renderer2), i0.ɵɵdirectiveInject(i1.MatDialogRef));
};
_FindAvailabilityModalComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _FindAvailabilityModalComponent,
  selectors: [["find-availability-modal"]],
  viewQuery: function FindAvailabilityModalComponent_Query(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵviewQuery(_c0, 7);
    }
    if (rf & 2) {
      var _t;
      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx._container_el = _t.first);
    }
  },
  features: [i0.ɵɵInheritDefinitionFeature],
  decls: 45,
  vars: 31,
  consts: [["container", ""], [1, "relative", "flex", "items-center", "justify-center", "p-4"], [1, "text-center"], ["icon", "", "matRipple", "", "mat-dialog-close", "", 1, "absolute", "top-1/2", "left-1", "-translate-y-1/2"], [1, "flex", "flex-col", "h-[calc(100vh-7rem)]", "sm:h-[65vh]", "overflow-hidden"], [1, "w-full", "flex", "flex-col", "sm:flex-row", "space-y-2", "sm:space-y-0", "sm:space-x-2", "p-2"], [1, "max-h-[3.25rem]", "flex-1", 3, "ngModelChange", "ngModel"], [1, "grid", "flex-1", "h-1/2", "w-full", "border-t", "border-base-200", "relative", "overflow-hidden", "divide-x", "divide-y", "divide-base-200", "max-w-[100vw]", "sm:max-w-[80vw]"], ["times", "", 1, "col-start-2", "h-10", "flex", "overflow-hidden", "border-l", "border-base-200"], ["hour", "", "class", "relative border-r border-base-200 h-10 min-w-[5rem] p-2", 3, "left", 4, "ngFor", "ngForOf"], ["users", "", 1, "row-start-2", "w-24", "overflow-hidden"], ["host", "", 1, "flex", "flex-col", "items-center", "justify-center", "h-32", "w-24", "relative", "border-b", "border-base-200", "py-2"], [1, "text-2xl", 3, "user"], [1, "text-xs", "break-words", "overflow-hidden", "max-w-full", "px-2", "text-center"], ["person", "", "class", "flex flex-col items-center justify-center h-32 w-24 relative border-b border-base-200 py-2", 3, "top", 4, "ngFor", "ngForOf"], ["blocks", "", 1, "relative", "row-start-2", "overflow-hidden"], ["fixed", "", 1, "absolute", "inset-0", "flex", "overflow-hidden"], ["divider", "", "class", "relative h-full min-w-[5rem] border-l border-base-200", 3, "left", 4, "ngFor", "ngForOf"], ["selection", "", 1, "absolute", "inset-y-0", "!border-x-2", "!border-info", "z-20", "cursor-grab", "active:cursor-grabbing", 3, "mousedown", "touchstart"], [1, "absolute", "inset-0", "bg-info", "opacity-30"], ["handle", "", 1, "absolute", "top-1/2", "-left-px", "-translate-x-1/2", "-translate-y-1/2", "h-3", "w-3", "rounded-full", "bg-info"], ["handle", "", 1, "absolute", "top-1/2", "-right-px", "translate-x-1/2", "-translate-y-1/2", "h-3", "w-3", "rounded-full", "bg-info", "hover:h-4", "hover:w-4", "active:bg-secondary", 3, "mousedown", "touchstart"], [1, "bg-base-100", "border", "border-base-200", "p-2", "absolute", "top-2", "left-1/2", "-translate-x-1/2", "shadow", "text-xs", "whitespace-nowrap", "rounded"], ["class", "bg-base-100 border border-base-200 p-2 absolute top-12 left-1/2 -translate-x-1/2 shadow text-xs whitespace-nowrap rounded", 4, "ngIf"], ["scroll", "", 1, "absolute", "inset-0", "overflow-auto", 3, "scroll"], [1, "pointer-events-none", 3, "user", "date", "availability"], ["class", "pointer-events-none", 3, "user", "date", "availability", 4, "ngFor", "ngForOf"], [1, "flex", "items-center", "justify-between", "p-2", "border-t", "border-base-200", "w-full"], ["btn", "", "matRipple", "", 1, "clear", "text-secondary", 3, "mat-dialog-close"], [1, "flex", "items-center"], [1, "text-xl"], [1, "mr-1", "underline"], ["hour", "", 1, "relative", "border-r", "border-base-200", "h-10", "min-w-[5rem]", "p-2"], ["person", "", 1, "flex", "flex-col", "items-center", "justify-center", "h-32", "w-24", "relative", "border-b", "border-base-200", "py-2"], [1, "text-xs", "break-words", "max-w-full", "px-2", "text-center"], ["icon", "", 1, "absolute", "-top-1", "-left-1", 3, "click"], ["divider", "", 1, "relative", "h-full", "min-w-[5rem]", "border-l", "border-base-200"], [1, "bg-base-100", "border", "border-base-200", "p-2", "absolute", "top-12", "left-1/2", "-translate-x-1/2", "shadow", "text-xs", "whitespace-nowrap", "rounded"]],
  template: function FindAvailabilityModalComponent_Template(rf, ctx) {
    if (rf & 1) {
      var _r1 = i0.ɵɵgetCurrentView();
      i0.ɵɵelementStart(0, "header", 1)(1, "h2", 2);
      i0.ɵɵtext(2, "Find Availability");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(3, "button", 3)(4, "app-icon");
      i0.ɵɵtext(5, "close");
      i0.ɵɵelementEnd()()();
      i0.ɵɵelementStart(6, "main", 4)(7, "div", 5)(8, "a-date-field", 6);
      i0.ɵɵtwoWayListener("ngModelChange", function FindAvailabilityModalComponent_Template_a_date_field_ngModelChange_8_listener($event) {
        i0.ɵɵrestoreView(_r1);
        i0.ɵɵtwoWayBindingSet(ctx.date, $event) || (ctx.date = $event);
        return i0.ɵɵresetView($event);
      });
      i0.ɵɵlistener("ngModelChange", function FindAvailabilityModalComponent_Template_a_date_field_ngModelChange_8_listener() {
        i0.ɵɵrestoreView(_r1);
        return i0.ɵɵresetView(ctx.on_change.next(ctx.on_change.getValue() + 1));
      });
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(9, "a-user-search-field", 6);
      i0.ɵɵtwoWayListener("ngModelChange", function FindAvailabilityModalComponent_Template_a_user_search_field_ngModelChange_9_listener($event) {
        i0.ɵɵrestoreView(_r1);
        i0.ɵɵtwoWayBindingSet(ctx.user, $event) || (ctx.user = $event);
        return i0.ɵɵresetView($event);
      });
      i0.ɵɵlistener("ngModelChange", function FindAvailabilityModalComponent_Template_a_user_search_field_ngModelChange_9_listener($event) {
        i0.ɵɵrestoreView(_r1);
        return i0.ɵɵresetView(ctx.addUser($event));
      });
      i0.ɵɵelementEnd()();
      i0.ɵɵelementStart(10, "div", 7)(11, "div", 8);
      i0.ɵɵtemplate(12, FindAvailabilityModalComponent_div_12_Template, 2, 5, "div", 9);
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(13, "div", 10)(14, "div", 11);
      i0.ɵɵelement(15, "a-user-avatar", 12);
      i0.ɵɵelementStart(16, "div", 13);
      i0.ɵɵtext(17);
      i0.ɵɵelementEnd()();
      i0.ɵɵtemplate(18, FindAvailabilityModalComponent_div_18_Template, 7, 4, "div", 14);
      i0.ɵɵpipe(19, "async");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(20, "div", 15)(21, "div", 16);
      i0.ɵɵtemplate(22, FindAvailabilityModalComponent_div_22_Template, 1, 3, "div", 17);
      i0.ɵɵelementStart(23, "div", 18);
      i0.ɵɵlistener("mousedown", function FindAvailabilityModalComponent_Template_div_mousedown_23_listener($event) {
        i0.ɵɵrestoreView(_r1);
        return i0.ɵɵresetView(ctx.startMovePeriod($event));
      })("touchstart", function FindAvailabilityModalComponent_Template_div_touchstart_23_listener($event) {
        i0.ɵɵrestoreView(_r1);
        return i0.ɵɵresetView(ctx.startMovePeriod($event));
      });
      i0.ɵɵelement(24, "div", 19)(25, "div", 20);
      i0.ɵɵelementStart(26, "div", 21);
      i0.ɵɵlistener("mousedown", function FindAvailabilityModalComponent_Template_div_mousedown_26_listener($event) {
        i0.ɵɵrestoreView(_r1);
        return i0.ɵɵresetView(ctx.startMoveDuration($event));
      })("touchstart", function FindAvailabilityModalComponent_Template_div_touchstart_26_listener($event) {
        i0.ɵɵrestoreView(_r1);
        return i0.ɵɵresetView(ctx.startMoveDuration($event));
      });
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(27, "div", 22);
      i0.ɵɵtext(28);
      i0.ɵɵpipe(29, "duration");
      i0.ɵɵelementEnd();
      i0.ɵɵtemplate(30, FindAvailabilityModalComponent_div_30_Template, 3, 4, "div", 23);
      i0.ɵɵelementEnd()();
      i0.ɵɵelementStart(31, "div", 24, 0);
      i0.ɵɵlistener("scroll", function FindAvailabilityModalComponent_Template_div_scroll_31_listener() {
        i0.ɵɵrestoreView(_r1);
        return i0.ɵɵresetView(ctx.onScroll());
      });
      i0.ɵɵelement(33, "user-availability-list", 25);
      i0.ɵɵpipe(34, "async");
      i0.ɵɵpipe(35, "async");
      i0.ɵɵtemplate(36, FindAvailabilityModalComponent_user_availability_list_36_Template, 3, 8, "user-availability-list", 26);
      i0.ɵɵpipe(37, "async");
      i0.ɵɵelementEnd()()()();
      i0.ɵɵelementStart(38, "footer", 27)(39, "button", 28)(40, "div", 29)(41, "app-icon", 30);
      i0.ɵɵtext(42, "arrow_back");
      i0.ɵɵelementEnd();
      i0.ɵɵelementStart(43, "div", 31);
      i0.ɵɵtext(44, "Back to form");
      i0.ɵɵelementEnd()()()();
    }
    if (rf & 2) {
      i0.ɵɵadvance(8);
      i0.ɵɵtwoWayProperty("ngModel", ctx.date);
      i0.ɵɵadvance();
      i0.ɵɵtwoWayProperty("ngModel", ctx.user);
      i0.ɵɵadvance(3);
      i0.ɵɵproperty("ngForOf", ctx.hours);
      i0.ɵɵadvance(2);
      i0.ɵɵstyleProp("top", -ctx.offset_y + "px");
      i0.ɵɵadvance();
      i0.ɵɵproperty("user", ctx.host);
      i0.ɵɵadvance(2);
      i0.ɵɵtextInterpolate1(" ", ctx.host.name || ctx.host.email, " ");
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngForOf", i0.ɵɵpipeBind1(19, 20, ctx.users));
      i0.ɵɵadvance(4);
      i0.ɵɵproperty("ngForOf", ctx.hours);
      i0.ɵɵadvance();
      i0.ɵɵstyleProp("left", "calc(" + ctx.selection_left + "rem - " + ctx.offset_x + "px)")("width", ctx.selection_width + "rem");
      i0.ɵɵadvance(5);
      i0.ɵɵtextInterpolate1(" ", i0.ɵɵpipeBind1(29, 22, ctx.duration), " ");
      i0.ɵɵadvance(2);
      i0.ɵɵproperty("ngIf", ctx.move_time);
      i0.ɵɵadvance(3);
      i0.ɵɵproperty("user", ctx.host)("date", ctx.date)("availability", i0.ɵɵpipeBind1(34, 24, ctx.availability) ? i0.ɵɵpipeBind1(35, 26, ctx.availability)[ctx.host.email] : i0.ɵɵpureFunction0(30, _c1));
      i0.ɵɵadvance(3);
      i0.ɵɵproperty("ngForOf", i0.ɵɵpipeBind1(37, 28, ctx.users));
      i0.ɵɵadvance(3);
      i0.ɵɵproperty("mat-dialog-close", true);
    }
  },
  styles: [".grid[_ngcontent-%COMP%] {\n                grid-template-columns: 6rem 1fr;\n                grid-template-rows: 2.5rem minmax(0, 1fr);\n            }\n            [disabled='true'][_ngcontent-%COMP%], \n   [disabled='true'][_ngcontent-%COMP%]   [header][_ngcontent-%COMP%] {\n                background: var(--b3) !important;\n                pointer-events: none;\n            }\n            [disabled='true'][_ngcontent-%COMP%]    > *[_ngcontent-%COMP%] {\n                opacity: 0.3;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZpbmQtYXZhaWxhYmlsaXR5LW1vZGFsLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1lBQ1k7Z0JBQ0ksK0JBQStCO2dCQUMvQix5Q0FBeUM7WUFDN0M7WUFDQTs7Z0JBRUksZ0NBQWdDO2dCQUNoQyxvQkFBb0I7WUFDeEI7WUFDQTtnQkFDSSxZQUFZO1lBQ2hCIiwiZmlsZSI6ImZpbmQtYXZhaWxhYmlsaXR5LW1vZGFsLmNvbXBvbmVudC50cyIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgLmdyaWQge1xuICAgICAgICAgICAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogNnJlbSAxZnI7XG4gICAgICAgICAgICAgICAgZ3JpZC10ZW1wbGF0ZS1yb3dzOiAyLjVyZW0gbWlubWF4KDAsIDFmcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBbZGlzYWJsZWQ9J3RydWUnXSxcbiAgICAgICAgICAgIFtkaXNhYmxlZD0ndHJ1ZSddIFtoZWFkZXJdIHtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iMykgIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFtkaXNhYmxlZD0ndHJ1ZSddID4gKiB7XG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMC4zO1xuICAgICAgICAgICAgfVxuICAgICAgICAiXX0= */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvdXNlcnMvc3JjL2xpYi9maW5kLWF2YWlsYWJpbGl0eS1tb2RhbC9maW5kLWF2YWlsYWJpbGl0eS1tb2RhbC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLCtCQUErQjtnQkFDL0IseUNBQXlDO1lBQzdDO1lBQ0E7O2dCQUVJLGdDQUFnQztnQkFDaEMsb0JBQW9CO1lBQ3hCO1lBQ0E7Z0JBQ0ksWUFBWTtZQUNoQjs7QUFFWix3N0JBQXc3QiIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgLmdyaWQge1xuICAgICAgICAgICAgICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczogNnJlbSAxZnI7XG4gICAgICAgICAgICAgICAgZ3JpZC10ZW1wbGF0ZS1yb3dzOiAyLjVyZW0gbWlubWF4KDAsIDFmcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBbZGlzYWJsZWQ9J3RydWUnXSxcbiAgICAgICAgICAgIFtkaXNhYmxlZD0ndHJ1ZSddIFtoZWFkZXJdIHtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iMykgIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFtkaXNhYmxlZD0ndHJ1ZSddID4gKiB7XG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMC4zO1xuICAgICAgICAgICAgfVxuICAgICAgICAiXSwic291cmNlUm9vdCI6IiJ9 */"]
});
exports.FindAvailabilityModalComponent = FindAvailabilityModalComponent;

/***/ }),

/***/ 94060:
/*!***********************************************************************************!*\
  !*** ./libs/users/src/lib/find-availability-modal/user-availability.component.ts ***!
  \***********************************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _UserAvailabilityComponent;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.UserAvailabilityComponent = void 0;
var user_class_1 = __webpack_require__(/*! ../user.class */ 93693);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @angular/common */ 60316);
function UserAvailabilityComponent_div_1_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 2)(1, "div", 3);
    i0.ɵɵtext(2);
    i0.ɵɵpipe(3, "date");
    i0.ɵɵpipe(4, "date");
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    var event_r1 = ctx.$implicit;
    i0.ɵɵstyleProp("left", event_r1.start + "%")("width", event_r1.size + "%");
    i0.ɵɵadvance(2);
    i0.ɵɵtextInterpolate2(" ", i0.ɵɵpipeBind2(3, 6, event_r1.date, "shortTime"), " - ", i0.ɵɵpipeBind2(4, 9, event_r1.date.valueOf() + event_r1.duration * 60 * 1000, "shortTime"), " ");
  }
}
var UserAvailabilityComponent = /*#__PURE__*/_createClass(function UserAvailabilityComponent() {
  _classCallCheck(this, UserAvailabilityComponent);
  this.availability = [];
  this.date = Date.now();
});
_UserAvailabilityComponent = UserAvailabilityComponent;
_UserAvailabilityComponent.ɵfac = function UserAvailabilityComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _UserAvailabilityComponent)();
};
_UserAvailabilityComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _UserAvailabilityComponent,
  selectors: [["user-availability-list"]],
  inputs: {
    user: "user",
    availability: "availability",
    date: "date"
  },
  decls: 2,
  vars: 1,
  consts: [[1, "relative", "w-[120rem]", "h-32", "inset-y-0", "border-b", "border-base-200"], ["event", "", "class", "absolute inset-y-0 bg-error text-white p-2 overflow-hidden border border-red-700 rounded", 3, "left", "width", 4, "ngFor", "ngForOf"], ["event", "", 1, "absolute", "inset-y-0", "bg-error", "text-white", "p-2", "overflow-hidden", "border", "border-red-700", "rounded"], [1, "text-xs", "max-w-full"]],
  template: function UserAvailabilityComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵelementStart(0, "div", 0);
      i0.ɵɵtemplate(1, UserAvailabilityComponent_div_1_Template, 5, 12, "div", 1);
      i0.ɵɵelementEnd();
    }
    if (rf & 2) {
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngForOf", ctx.availability);
    }
  },
  dependencies: [i1.NgForOf, i1.DatePipe],
  styles: ["[_nghost-%COMP%] {\n                display: block;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXItYXZhaWxhYmlsaXR5LmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1lBQ1k7Z0JBQ0ksY0FBYztZQUNsQiIsImZpbGUiOiJ1c2VyLWF2YWlsYWJpbGl0eS5jb21wb25lbnQudHMiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIDpob3N0IHtcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgIl19 */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvdXNlcnMvc3JjL2xpYi9maW5kLWF2YWlsYWJpbGl0eS1tb2RhbC91c2VyLWF2YWlsYWJpbGl0eS5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLGNBQWM7WUFDbEI7O0FBRVosNFhBQTRYIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgICAgICAgICA6aG9zdCB7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICAgICAgICB9XG4gICAgICAgICJdLCJzb3VyY2VSb290IjoiIn0= */"]
});
exports.UserAvailabilityComponent = UserAvailabilityComponent;

/***/ }),

/***/ 86039:
/*!*****************************************!*\
  !*** ./libs/users/src/lib/guests.fn.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _objectSpread = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/objectSpread2.js */ 34092)["default"]);
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.searchGuests = searchGuests;
exports.queryGuests = queryGuests;
exports.showGuest = showGuest;
exports.updateGuest = updateGuest;
exports.removeGuest = removeGuest;
exports.listGuestMeetings = listGuestMeetings;
var ts_client_1 = __webpack_require__(/*! @placeos/ts-client */ 35713);
var operators_1 = __webpack_require__(/*! rxjs/operators */ 97303);
var event_class_1 = __webpack_require__(/*! ../../../events/src/lib/event.class */ 6727);
var api_1 = __webpack_require__(/*! libs/common/src/lib/api */ 38385);
var user_class_1 = __webpack_require__(/*! ./user.class */ 93693);
var GUEST_ENDPOINT = '/api/staff/v1/guests';
/**
 * Search guests
 * @param q Search string for filtering guests
 */
function searchGuests(q) {
  var query = (0, api_1.toQueryString)({
    q: q
  });
  return (0, ts_client_1.get)("".concat(GUEST_ENDPOINT).concat(q ? '?' + query : '')).pipe((0, operators_1.map)(function (list) {
    return list.map(function (item) {
      return new user_class_1.GuestUser(item);
    });
  }));
}
/**
 * List guests
 * @param q Parameters to pass to the API request
 */
function queryGuests(q) {
  var query = (0, api_1.toQueryString)(_objectSpread({}, q));
  return (0, ts_client_1.get)("".concat(GUEST_ENDPOINT).concat(query ? '?' + query : '')).pipe((0, operators_1.map)(function (list) {
    return list.map(function (item) {
      return new user_class_1.GuestUser(item);
    });
  }));
}
/**
 * Get guest details
 * @param id ID of the guest
 */
function showGuest(id) {
  return (0, ts_client_1.get)("".concat(GUEST_ENDPOINT, "/").concat(encodeURIComponent(id))).pipe((0, operators_1.map)(function (item) {
    return new user_class_1.GuestUser(item);
  }));
}
/**
 * Update guest metadata
 * @param id ID of the guest
 * @param data New metadata state
 */
function updateGuest(id, data) {
  return (0, ts_client_1.patch)("".concat(GUEST_ENDPOINT, "/").concat(encodeURIComponent(id)), data).pipe((0, operators_1.map)(function (item) {
    return new user_class_1.GuestUser(item);
  }));
}
/**
 * Remove a guest
 * @param id ID of the guest to remove
 */
function removeGuest(id) {
  return (0, ts_client_1.del)("".concat(GUEST_ENDPOINT, "/").concat(encodeURIComponent(id)), {
    response_type: 'void'
  });
}
/**
 * List upcoming meetings for a guest
 * @param id ID of the guest
 */
function listGuestMeetings(id) {
  return (0, ts_client_1.get)("".concat(GUEST_ENDPOINT, "/").concat(encodeURIComponent(id), "/meetings")).pipe((0, operators_1.map)(function (list) {
    return list.map(function (item) {
      return new event_class_1.CalendarEvent(item);
    });
  }));
}

/***/ }),

/***/ 74529:
/*!**********************************************!*\
  !*** ./libs/users/src/lib/location.class.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.MapLocation = void 0;
var date_fns_1 = __webpack_require__(/*! date-fns */ 25773);
var MapLocation = /*#__PURE__*/_createClass(function MapLocation() {
  var _data = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
  _classCallCheck(this, MapLocation);
  this.type = _data.type || _data.location || 'other';
  this.position = _data.position || _data.map_id || _data.asset_id || {
    x: _data.x / _data.map_width || 0,
    y: _data.y / _data.map_height || 0
  };
  this.variance = _data.variance || 0;
  this.last_seen = _data.last_seen || (0, date_fns_1.getUnixTime)(new Date());
  this.level = _data.level;
  this.building = _data.building;
  this.at_location = !!_data.at_location;
  this.coordinates_from = _data.coordinates_from || 'top-left';
});
exports.MapLocation = MapLocation;

/***/ }),

/***/ 11543:
/*!********************************************************!*\
  !*** ./libs/users/src/lib/new-user-modal.component.ts ***!
  \********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _objectSpread = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/objectSpread2.js */ 34092)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _callSuper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/callSuper.js */ 8513)["default"]);
var _inherits = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/inherits.js */ 58160)["default"]);
var _NewUserModalComponent;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.NewUserModalComponent = void 0;
var core_1 = __webpack_require__(/*! @angular/core */ 37580);
var dialog_1 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var user_class_1 = __webpack_require__(/*! ./user.class */ 93693);
var user_utilities_1 = __webpack_require__(/*! ./user.utilities */ 24129);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @angular/common */ 60316);
var i2 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var i3 = __webpack_require__(/*! ../../../components/src/lib/icon.component */ 69434);
var i4 = __webpack_require__(/*! @angular/material/core */ 74646);
var i5 = __webpack_require__(/*! @angular/material/progress-spinner */ 41134);
var i6 = __webpack_require__(/*! ./user-form.component */ 7111);
function NewUserModalComponent_main_7_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "main", 6);
    i0.ɵɵelement(1, "user-form", 7);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r0 = i0.ɵɵnextContext();
    i0.ɵɵadvance();
    i0.ɵɵproperty("form", ctx_r0.form);
  }
}
function NewUserModalComponent_footer_8_Template(rf, ctx) {
  if (rf & 1) {
    var _r2 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "footer", 8)(1, "button", 9);
    i0.ɵɵtext(2, " Cancel ");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(3, "button", 10);
    i0.ɵɵlistener("click", function NewUserModalComponent_footer_8_Template_button_click_3_listener() {
      i0.ɵɵrestoreView(_r2);
      var ctx_r0 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r0.saveChanges());
    });
    i0.ɵɵtext(4, "Save");
    i0.ɵɵelementEnd()();
  }
}
function NewUserModalComponent_ng_template_9_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "main", 11);
    i0.ɵɵelement(1, "mat-spinner", 12);
    i0.ɵɵelementStart(2, "p");
    i0.ɵɵtext(3, "Saving attendee...");
    i0.ɵɵelementEnd()();
  }
}
var NewUserModalComponent = /*#__PURE__*/function (_common_1$AsyncHandle) {
  function NewUserModalComponent(_data) {
    var _this;
    _classCallCheck(this, NewUserModalComponent);
    _this = _callSuper(this, NewUserModalComponent);
    _this._data = _data;
    /** Emitter for user action on the modal */
    _this.event = new core_1.EventEmitter();
    /** Form fields for the new user */
    _this.form = (0, user_utilities_1.generateUserForm)(_this.user || new user_class_1.User());
    /** Whether user details are being saved */
    _this.loading = false;
    _this.user = _this._data.user || {};
    _this.form = (0, user_utilities_1.generateUserForm)(_this.user);
    return _this;
  }
  _inherits(NewUserModalComponent, _common_1$AsyncHandle);
  return _createClass(NewUserModalComponent, [{
    key: "ngOnInit",
    value: function ngOnInit() {}
  }, {
    key: "saveChanges",
    value: function saveChanges() {
      if (!this.form) return;
      this.form.markAllAsTouched();
      if (this.form.valid) {
        var new_user = new user_class_1.User(_objectSpread(_objectSpread({}, this.form.value), {}, {
          is_external: true
        }));
        this.event.emit({
          reason: 'done',
          metadata: new_user
        });
      }
    }
  }]);
}(common_1.AsyncHandler);
_NewUserModalComponent = NewUserModalComponent;
_NewUserModalComponent.ɵfac = function NewUserModalComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _NewUserModalComponent)(i0.ɵɵdirectiveInject(dialog_1.MAT_DIALOG_DATA));
};
_NewUserModalComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _NewUserModalComponent,
  selectors: [["new-user-modal"]],
  outputs: {
    event: "event"
  },
  features: [i0.ɵɵInheritDefinitionFeature],
  decls: 11,
  vars: 4,
  consts: [["load_state", ""], ["mat-dialog-title", "", 1, "heading"], [1, "flex-1"], ["icon", "", "mat-dialog-close", ""], ["class", "flex flex-col items-center w-full p-2", 4, "ngIf", "ngIfElse"], ["class", "flex items-center justify-center w-full p-2 border-t border-base-200 space-x-2", 4, "ngIf"], [1, "flex", "flex-col", "items-center", "w-full", "p-2"], [3, "form"], [1, "flex", "items-center", "justify-center", "w-full", "p-2", "border-t", "border-base-200", "space-x-2"], ["btn", "", "matRipple", "", "mat-dialog-close", "", 1, "inverse"], ["btn", "", "matRipple", "", 3, "click"], [1, "flex", "flex-col", "items-center", "w-full", "p-2", "space-y-2"], ["diameter", "32"]],
  template: function NewUserModalComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵelementStart(0, "header")(1, "div", 1);
      i0.ɵɵtext(2);
      i0.ɵɵelementEnd();
      i0.ɵɵelement(3, "div", 2);
      i0.ɵɵelementStart(4, "button", 3)(5, "app-icon");
      i0.ɵɵtext(6, "close");
      i0.ɵɵelementEnd()()();
      i0.ɵɵtemplate(7, NewUserModalComponent_main_7_Template, 2, 1, "main", 4)(8, NewUserModalComponent_footer_8_Template, 5, 0, "footer", 5)(9, NewUserModalComponent_ng_template_9_Template, 4, 0, "ng-template", null, 0, i0.ɵɵtemplateRefExtractor);
    }
    if (rf & 2) {
      var load_state_r3 = i0.ɵɵreference(10);
      i0.ɵɵadvance(2);
      i0.ɵɵtextInterpolate1(" ", (ctx.user == null ? null : ctx.user.id) ? "Edit" : "Add", " External Attendee ");
      i0.ɵɵadvance(5);
      i0.ɵɵproperty("ngIf", !ctx.loading)("ngIfElse", load_state_r3);
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", !ctx.loading);
    }
  },
  dependencies: [i1.NgIf, i2.MatDialogClose, i2.MatDialogTitle, i3.IconComponent, i4.MatRipple, i5.MatProgressSpinner, i6.UserFormComponent],
  styles: ["main[_ngcontent-%COMP%] {\n                min-height: 20em !important;\n                width: 100%;\n            }\n\n            footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\n                min-width: 8em;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5ldy11c2VyLW1vZGFsLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO1lBQ1k7Z0JBQ0ksMkJBQTJCO2dCQUMzQixXQUFXO1lBQ2Y7O1lBRUE7Z0JBQ0ksY0FBYztZQUNsQiIsImZpbGUiOiJuZXctdXNlci1tb2RhbC5jb21wb25lbnQudHMiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIG1haW4ge1xuICAgICAgICAgICAgICAgIG1pbi1oZWlnaHQ6IDIwZW0gIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZm9vdGVyIGJ1dHRvbiB7XG4gICAgICAgICAgICAgICAgbWluLXdpZHRoOiA4ZW07XG4gICAgICAgICAgICB9XG4gICAgICAgICJdfQ== */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvdXNlcnMvc3JjL2xpYi9uZXctdXNlci1tb2RhbC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZO2dCQUNJLDJCQUEyQjtnQkFDM0IsV0FBVztZQUNmOztZQUVBO2dCQUNJLGNBQWM7WUFDbEI7O0FBRVosd2tCQUF3a0IiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAgICAgICAgIG1haW4ge1xuICAgICAgICAgICAgICAgIG1pbi1oZWlnaHQ6IDIwZW0gIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZm9vdGVyIGJ1dHRvbiB7XG4gICAgICAgICAgICAgICAgbWluLXdpZHRoOiA4ZW07XG4gICAgICAgICAgICB9XG4gICAgICAgICJdLCJzb3VyY2VSb290IjoiIn0= */"]
});
exports.NewUserModalComponent = NewUserModalComponent;

/***/ }),

/***/ 2372:
/*!****************************************!*\
  !*** ./libs/users/src/lib/staff.fn.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.searchStaff = searchStaff;
exports.showStaff = showStaff;
exports.locateStaff = locateStaff;
var ts_client_1 = __webpack_require__(/*! @placeos/ts-client */ 35713);
var api_1 = __webpack_require__(/*! libs/common/src/lib/api */ 38385);
var operators_1 = __webpack_require__(/*! rxjs/operators */ 97303);
var user_class_1 = __webpack_require__(/*! ./user.class */ 93693);
var STAFF_ENDPOINT = '/api/staff/v1/people';
/**
 * Search staff members
 * @param q Search string for filtering staff
 */
function searchStaff(q) {
  var query = (0, api_1.toQueryString)({
    q: q,
    fields: ['id', 'name', 'email', 'username', 'organisation', 'department'].join(',')
  });
  return (0, ts_client_1.get)("".concat(STAFF_ENDPOINT).concat(q ? '?' + query : '')).pipe((0, operators_1.map)(function (list) {
    return list.map(function (item) {
      return new user_class_1.StaffUser(item);
    });
  }));
}
/**
 * Get user details
 * @param id User ID or email
 */
function showStaff(id) {
  return (0, ts_client_1.get)("".concat(STAFF_ENDPOINT, "/").concat(encodeURIComponent(id))).pipe((0, operators_1.map)(function (item) {
    return new user_class_1.StaffUser(item);
  }));
}
/**
 * Get user with their location details
 * @param email User email
 */
function locateStaff(email) {
  return (0, ts_client_1.get)("".concat(STAFF_ENDPOINT, "/").concat(email)).pipe((0, operators_1.map)(function (item) {
    return new user_class_1.StaffUser(item);
  }));
}

/***/ }),

/***/ 7111:
/*!***************************************************!*\
  !*** ./libs/users/src/lib/user-form.component.ts ***!
  \***************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _UserFormComponent;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.UserFormComponent = void 0;
var forms_1 = __webpack_require__(/*! @angular/forms */ 34456);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @angular/common */ 60316);
var i2 = __webpack_require__(/*! @angular/forms */ 34456);
var i3 = __webpack_require__(/*! @angular/material/form-field */ 24950);
var i4 = __webpack_require__(/*! @angular/material/input */ 95541);
var i5 = __webpack_require__(/*! @angular/material/checkbox */ 97024);
var i6 = __webpack_require__(/*! @ngx-translate/core */ 597);
function UserFormComponent_form_0_div_1_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 3)(1, "label", 4);
    i0.ɵɵtext(2, " Name");
    i0.ɵɵelementStart(3, "span");
    i0.ɵɵtext(4, "*");
    i0.ɵɵelementEnd();
    i0.ɵɵtext(5, ": ");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(6, "mat-form-field", 5);
    i0.ɵɵelement(7, "input", 6);
    i0.ɵɵelementStart(8, "mat-error");
    i0.ɵɵtext(9, "Name is required");
    i0.ɵɵelementEnd()()();
  }
  if (rf & 2) {
    var ctx_r0 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance();
    i0.ɵɵclassProp("error", ctx_r0.hasError("name"));
  }
}
function UserFormComponent_form_0_div_2_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 3)(1, "label", 7);
    i0.ɵɵtext(2, " Email");
    i0.ɵɵelementStart(3, "span");
    i0.ɵɵtext(4, "*");
    i0.ɵɵelementEnd();
    i0.ɵɵtext(5, ": ");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(6, "mat-form-field", 5);
    i0.ɵɵelement(7, "input", 8);
    i0.ɵɵelementStart(8, "mat-error");
    i0.ɵɵtext(9, "A valid email is required");
    i0.ɵɵelementEnd()()();
  }
  if (rf & 2) {
    var ctx_r0 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance();
    i0.ɵɵclassProp("error", ctx_r0.hasError("email"));
  }
}
function UserFormComponent_form_0_div_3_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 3)(1, "label", 9);
    i0.ɵɵtext(2);
    i0.ɵɵpipe(3, "translate");
    i0.ɵɵelementStart(4, "span");
    i0.ɵɵtext(5, "*");
    i0.ɵɵelementEnd();
    i0.ɵɵtext(6, ": ");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(7, "mat-form-field", 5);
    i0.ɵɵelement(8, "input", 10);
    i0.ɵɵelementStart(9, "mat-error");
    i0.ɵɵtext(10);
    i0.ɵɵpipe(11, "translate");
    i0.ɵɵelementEnd()()();
  }
  if (rf & 2) {
    var ctx_r0 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance();
    i0.ɵɵclassProp("error", ctx_r0.hasError("organisation"));
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", i0.ɵɵpipeBind1(3, 4, "COMMON.ORGANISATION"), "");
    i0.ɵɵadvance(8);
    i0.ɵɵtextInterpolate1(" ", i0.ɵɵpipeBind1(11, 6, "COMMON.ORGANISATION"), " is required ");
  }
}
function UserFormComponent_form_0_div_4_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 3)(1, "label", 11);
    i0.ɵɵtext(2, " Phone: ");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(3, "mat-form-field", 5);
    i0.ɵɵelement(4, "input", 12);
    i0.ɵɵelementStart(5, "mat-error");
    i0.ɵɵtext(6, "Phone format is invalid");
    i0.ɵɵelementEnd()()();
  }
  if (rf & 2) {
    var ctx_r0 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance();
    i0.ɵɵclassProp("error", ctx_r0.hasError("phone"));
  }
}
function UserFormComponent_form_0_div_5_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 3)(1, "mat-checkbox", 13);
    i0.ɵɵtext(2, " Assistance required ");
    i0.ɵɵelementEnd()();
  }
}
function UserFormComponent_form_0_div_6_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 3)(1, "mat-checkbox", 14);
    i0.ɵɵtext(2, " Visit expected ");
    i0.ɵɵelementEnd()();
  }
}
function UserFormComponent_form_0_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "form", 1);
    i0.ɵɵtemplate(1, UserFormComponent_form_0_div_1_Template, 10, 2, "div", 2)(2, UserFormComponent_form_0_div_2_Template, 10, 2, "div", 2)(3, UserFormComponent_form_0_div_3_Template, 12, 8, "div", 2)(4, UserFormComponent_form_0_div_4_Template, 7, 2, "div", 2)(5, UserFormComponent_form_0_div_5_Template, 3, 0, "div", 2)(6, UserFormComponent_form_0_div_6_Template, 3, 0, "div", 2);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var ctx_r0 = i0.ɵɵnextContext();
    i0.ɵɵproperty("formGroup", ctx_r0.form);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", ctx_r0.form.controls.name);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", ctx_r0.form.controls.email);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", ctx_r0.form.controls.organisation);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", ctx_r0.form.controls.phone);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", ctx_r0.form.controls.assistance_required);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", ctx_r0.form.controls.visit_expected);
  }
}
var UserFormComponent = /*#__PURE__*/function () {
  function UserFormComponent() {
    _classCallCheck(this, UserFormComponent);
  }
  return _createClass(UserFormComponent, [{
    key: "hasError",
    value: function hasError(name) {
      var _this$form;
      var _ref = ((_this$form = this.form) === null || _this$form === void 0 ? void 0 : _this$form.controls[name]) || {},
        invalid = _ref.invalid,
        touched = _ref.touched;
      return invalid && touched;
    }
  }]);
}();
_UserFormComponent = UserFormComponent;
_UserFormComponent.ɵfac = function UserFormComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _UserFormComponent)();
};
_UserFormComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _UserFormComponent,
  selectors: [["user-form"]],
  inputs: {
    form: "form"
  },
  decls: 1,
  vars: 1,
  consts: [["user-form", "", "class", "w-full", 3, "formGroup", 4, "ngIf"], ["user-form", "", 1, "w-full", 3, "formGroup"], ["class", "flex flex-col w-full", 4, "ngIf"], [1, "flex", "flex-col", "w-full"], ["for", "name"], ["appearance", "outline"], ["matInput", "", "name", "name", "placeholder", "Name", "formControlName", "name"], ["for", "email"], ["matInput", "", "name", "email", "placeholder", "Email Address", "formControlName", "email"], ["for", "org"], ["matInput", "", "name", "org", "placeholder", "e.g. Conteso", "formControlName", "organisation"], ["for", "phone"], ["matInput", "", "name", "phone", "type", "tel", "placeholder", "Phone", "formControlName", "phone"], ["name", "assistance-required", "color", "primary", "formControlName", "assistance_required"], ["name", "visit-expected", "color", "primary", "formControlName", "visit_expected"]],
  template: function UserFormComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵtemplate(0, UserFormComponent_form_0_Template, 7, 7, "form", 0);
    }
    if (rf & 2) {
      i0.ɵɵproperty("ngIf", ctx.form);
    }
  },
  dependencies: [i1.NgIf, i2.ɵNgNoValidate, i2.DefaultValueAccessor, i2.NgControlStatus, i2.NgControlStatusGroup, i2.FormGroupDirective, i2.FormControlName, i3.MatFormField, i3.MatError, i4.MatInput, i5.MatCheckbox, i6.TranslatePipe],
  styles: ["[_nghost-%COMP%], \n   mat-form-field[_ngcontent-%COMP%] {\n                width: 100%;\n            }\n        \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXItZm9ybS5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtZQUNZOztnQkFFSSxXQUFXO1lBQ2YiLCJmaWxlIjoidXNlci1mb3JtLmNvbXBvbmVudC50cyIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgOmhvc3QsXG4gICAgICAgICAgICBtYXQtZm9ybS1maWVsZCB7XG4gICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICB9XG4gICAgICAgICJdfQ== */\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL2xpYnMvdXNlcnMvc3JjL2xpYi91c2VyLWZvcm0uY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7WUFDWTs7Z0JBRUksV0FBVztZQUNmOztBQUVaLDRZQUE0WSIsInNvdXJjZXNDb250ZW50IjpbIlxuICAgICAgICAgICAgOmhvc3QsXG4gICAgICAgICAgICBtYXQtZm9ybS1maWVsZCB7XG4gICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgICB9XG4gICAgICAgICJdLCJzb3VyY2VSb290IjoiIn0= */"]
});
exports.UserFormComponent = UserFormComponent;

/***/ }),

/***/ 93693:
/*!******************************************!*\
  !*** ./libs/users/src/lib/user.class.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _createForOfIteratorHelper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createForOfIteratorHelper.js */ 36350)["default"]);
var _callSuper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/callSuper.js */ 8513)["default"]);
var _inherits = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/inherits.js */ 58160)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.StaffUser = exports.GuestUser = exports.User = void 0;
var general_1 = __webpack_require__(/*! libs/common/src/lib/general */ 64217);
var user_utilities_1 = __webpack_require__(/*! ./user.utilities */ 24129);
var date_fns_1 = __webpack_require__(/*! date-fns */ 25773);
var User = /*#__PURE__*/_createClass(function User() {
  var _data$required, _data$resource, _data$department, _this$email, _data$visit_expected, _this$extension_data;
  var data = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
  _classCallCheck(this, User);
  this.id = data.id || data.email || "USER::".concat((0, general_1.randomString)(8));
  this.name = data.name || '';
  this.email = data.email || '';
  this.first_name = data.first_name || data.name || '';
  this.last_name = data.last_name || '';
  this.phone = data.phone || '';
  this.organisation = data.organisation || '';
  this.notes = data.notes || '';
  this.photo = data.photo || '';
  this.username = data.username || '';
  this.organizer = !!data.organizer;
  this.checked_in = !!data.checked_in;
  this.required = (_data$required = data.required) !== null && _data$required !== void 0 ? _data$required : true;
  this.resource = (_data$resource = data.resource) !== null && _data$resource !== void 0 ? _data$resource : false;
  this.response_status = data.response_status || '';
  var groups = data.groups || [];
  this.department = (_data$department = data.department) !== null && _data$department !== void 0 ? _data$department : '';
  if (data.sys_admin) groups.push('placeos_admin');
  if (data.support) groups.push('placeos_support');
  if (data.department) groups.push(data.department);
  this.groups = groups;
  this.extension_data = data.extension_data || {};
  this.extension_data.assistance_required = data.assistance_required || this.extension_data.assistance_required;
  this.is_external = !((_this$email = this.email) !== null && _this$email !== void 0 && _this$email.endsWith("".concat(user_utilities_1.USER_DOMAIN)));
  this.visit_expected = (_data$visit_expected = data.visit_expected) !== null && _data$visit_expected !== void 0 ? _data$visit_expected : true;
  this.assistance_required = !!((_this$extension_data = this.extension_data) !== null && _this$extension_data !== void 0 && _this$extension_data.assistance_required);
  for (var key in data) {
    if (!(key in this)) this.extension_data[key] = data[key];
  }
});
exports.User = User;
var GuestUser = /*#__PURE__*/function (_User) {
  function GuestUser() {
    var _data$extension_data, _data$booking, _data$booking2, _data$extension_data2;
    var _this;
    var data = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    _classCallCheck(this, GuestUser);
    _this = _callSuper(this, GuestUser, [data]);
    _this.preferred_beverage = data.preferred_beverage || '';
    _this.accepted_terms_conditions = data.accepted_terms_conditions || false;
    _this.attachments = ((_data$extension_data = data.extension_data) === null || _data$extension_data === void 0 ? void 0 : _data$extension_data.attachments) || data.attachments || [];
    _this.status = (_data$booking = data.booking) !== null && _data$booking !== void 0 && _data$booking.approved ? 'approved' : (_data$booking2 = data.booking) !== null && _data$booking2 !== void 0 && _data$booking2.rejected ? 'declined' : ((_data$extension_data2 = data.extension_data) === null || _data$extension_data2 === void 0 ? void 0 : _data$extension_data2.status) || data.status || 'pending';
    _this.booking = data.booking;
    _this.extension_data.event = data.event_metadata;
    return _this;
  }
  _inherits(GuestUser, _User);
  return _createClass(GuestUser);
}(User);
exports.GuestUser = GuestUser;
var StaffUser = /*#__PURE__*/function (_User2) {
  function StaffUser() {
    var _this2;
    var data = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    _classCallCheck(this, StaffUser);
    _this2 = _callSuper(this, StaffUser, [data]);
    _this2.card_number = data.card_number || '';
    _this2.staff_id = data.staff_id || '';
    _this2.is_logged_in = !!data.is_logged_in;
    _this2.work_preferences = data.work_preferences || [];
    _this2.work_overrides = data.work_overrides || {};
    return _this2;
  }
  _inherits(StaffUser, _User2);
  return _createClass(StaffUser, [{
    key: "location",
    get: function get() {
      return this.location_time(Date.now());
    }
  }, {
    key: "work_preference",
    value: function work_preference(datetime) {
      var _this$work_overrides$;
      if (!datetime) datetime = Date.now();
      var date = new Date(datetime);
      var day = date.getDay();
      var date_string = (0, date_fns_1.format)(date, 'yyyy-MM-dd');
      if ((_this$work_overrides$ = this.work_overrides[date_string]) !== null && _this$work_overrides$ !== void 0 && (_this$work_overrides$ = _this$work_overrides$.blocks) !== null && _this$work_overrides$ !== void 0 && _this$work_overrides$.length) {
        var _iterator = _createForOfIteratorHelper(this.work_overrides[date_string].blocks),
          _step;
        try {
          for (_iterator.s(); !(_step = _iterator.n()).done;) {
            var block = _step.value;
            var start = block.start_time;
            var end = block.end_time;
            if (start <= date.getHours() + date.getMinutes() / 60 && end >= date.getHours() + date.getMinutes() / 60) {
              return block;
            }
          }
        } catch (err) {
          _iterator.e(err);
        } finally {
          _iterator.f();
        }
      }
      var _iterator2 = _createForOfIteratorHelper(this.work_preferences),
        _step2;
      try {
        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
          var _pref$blocks;
          var pref = _step2.value;
          if (pref.day_of_week === day && (_pref$blocks = pref.blocks) !== null && _pref$blocks !== void 0 && _pref$blocks.length) {
            var _iterator3 = _createForOfIteratorHelper(pref.blocks),
              _step3;
            try {
              for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {
                var _block = _step3.value;
                if (_block.start_time <= date.getHours() + date.getMinutes() / 60 && _block.end_time >= date.getHours() + date.getMinutes() / 60) {
                  return _block;
                }
              }
            } catch (err) {
              _iterator3.e(err);
            } finally {
              _iterator3.f();
            }
          }
        }
      } catch (err) {
        _iterator2.e(err);
      } finally {
        _iterator2.f();
      }
    }
  }, {
    key: "location_time",
    value: function location_time() {
      var _this$work_preference;
      var datetime = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : Date.now();
      return ((_this$work_preference = this.work_preference(datetime)) === null || _this$work_preference === void 0 ? void 0 : _this$work_preference.location) || 'wfo';
    }
  }, {
    key: "location_name",
    get: function get() {
      return this.location_name_time();
    }
  }, {
    key: "location_name_time",
    value: function location_name_time() {
      var datetime = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : Date.now();
      if (!datetime) datetime = Date.now();
      var location = this.location_time(datetime);
      var in_hours = this.in_hours_time(datetime);
      if (location.includes('w') && !in_hours) {
        return 'Outside working hours';
      }
      switch (location) {
        case 'wfh':
          return 'Working from Home';
        case 'wfo':
          return 'Working from Office';
        case 'ooo':
          return 'Out of Office';
        case 'aol':
          return 'Away on Leave';
        default:
          return 'Unknown';
      }
    }
  }, {
    key: "outsideHours",
    value: function outsideHours() {
      var datetime = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : Date.now();
      var location = this.location_time(datetime);
      var in_hours = this.in_hours_time(datetime);
      return location.includes('w') && !in_hours;
    }
  }, {
    key: "in_hours",
    get: function get() {
      return this.in_hours_time(Date.now());
    }
  }, {
    key: "location_icon",
    value: function location_icon(datetime) {
      if (!datetime) datetime = Date.now();
      var location = this.location_time(datetime);
      var in_hours = this.in_hours_time(datetime);
      if (location === 'wfh' && in_hours) return 'home';
      if (location === 'wfo' && in_hours) return 'business';
      return 'event_busy';
    }
  }, {
    key: "in_hours_time",
    value: function in_hours_time() {
      var datetime = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : Date.now();
      var block = this.work_preference(datetime);
      return !!block;
    }
  }]);
}(User);
exports.StaffUser = StaffUser;

/***/ }),

/***/ 89577:
/*!*****************************************!*\
  !*** ./libs/users/src/lib/user.pipe.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _regeneratorRuntime = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/regeneratorRuntime.js */ 8698)["default"]);
var _asyncToGenerator = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/asyncToGenerator.js */ 95386)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _UserPipe;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.UserPipe = void 0;
var guests_fn_1 = __webpack_require__(/*! ./guests.fn */ 86039);
var staff_fn_1 = __webpack_require__(/*! ./staff.fn */ 2372);
var user_class_1 = __webpack_require__(/*! ./user.class */ 93693);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var USER_LIST = [];
var EMPTY_USER = new user_class_1.User();
var UserPipe = /*#__PURE__*/function () {
  function UserPipe() {
    _classCallCheck(this, UserPipe);
  }
  return _createClass(UserPipe, [{
    key: "transform",
    value: (
    /**
     * Get details of the user with the given ID
     * @param user_id ID or Email of the user
     */
    function () {
      var _transform = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(user_id) {
        var user;
        return _regeneratorRuntime().wrap(function _callee$(_context) {
          while (1) switch (_context.prev = _context.next) {
            case 0:
              if (user_id) {
                _context.next = 2;
                break;
              }
              return _context.abrupt("return", EMPTY_USER);
            case 2:
              user = USER_LIST.find(function (_ref) {
                var id = _ref.id,
                  email = _ref.email;
                return id === user_id || email === user_id;
              });
              if (!user) {
                _context.next = 5;
                break;
              }
              return _context.abrupt("return", user);
            case 5:
              _context.next = 7;
              return (0, staff_fn_1.showStaff)(user_id).toPromise()["catch"](function () {
                return null;
              });
            case 7:
              user = _context.sent;
              if (!user) {
                _context.next = 11;
                break;
              }
              USER_LIST.push(user);
              return _context.abrupt("return", user);
            case 11:
              _context.next = 13;
              return (0, guests_fn_1.showGuest)(user_id).toPromise()["catch"](function () {
                return null;
              });
            case 13:
              user = _context.sent;
              if (!user) {
                _context.next = 17;
                break;
              }
              USER_LIST.push(user);
              return _context.abrupt("return", user);
            case 17:
              return _context.abrupt("return", EMPTY_USER);
            case 18:
            case "end":
              return _context.stop();
          }
        }, _callee);
      }));
      function transform(_x) {
        return _transform.apply(this, arguments);
      }
      return transform;
    }())
  }]);
}();
_UserPipe = UserPipe;
_UserPipe.ɵfac = function UserPipe_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _UserPipe)();
};
_UserPipe.ɵpipe = /*@__PURE__*/i0.ɵɵdefinePipe({
  name: "user",
  type: _UserPipe,
  pure: true
});
exports.UserPipe = UserPipe;

/***/ }),

/***/ 24129:
/*!**********************************************!*\
  !*** ./libs/users/src/lib/user.utilities.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.USER_DOMAIN = void 0;
exports.setInternalUserDomain = setInternalUserDomain;
exports.generateMockUser = generateMockUser;
exports.generateUserForm = generateUserForm;
exports.generateGuestForm = generateGuestForm;
var forms_1 = __webpack_require__(/*! @angular/forms */ 34456);
var general_1 = __webpack_require__(/*! ../../../common/src/lib/general */ 64217);
var user_class_1 = __webpack_require__(/*! ./user.class */ 93693);
var USER_COUNT = 0;
exports.USER_DOMAIN = '@place.tech';
function setInternalUserDomain(domain) {
  exports.USER_DOMAIN = domain;
}
var USER_EMAILS = [];
/* istanbul ignore next */
/**
 * Generate raw mock data for a user
 * @param id Forced ID for the mock
 * @param name Forced name for the user
 * @param external Whether user is external of the organisation
 */
function generateMockUser(id, name, external) {
  if (!id) {
    id = "user-".concat(USER_COUNT++);
  }
  if (!name) {
    name = "User ".concat(USER_COUNT);
  }
  if (external === undefined) {
    external = !((0, general_1.predictableRandomInt)(99999) % 2);
  }
  var organisation = external ? "Fake Co." : exports.USER_DOMAIN.split('.')[0];
  var delegates = [];
  var delegate_count = Math.min((0, general_1.predictableRandomInt)(4) + 1, USER_EMAILS.length);
  for (var i = 0; i < delegate_count; i++) {
    delegates.push(USER_EMAILS[(0, general_1.predictableRandomInt)(USER_EMAILS.length)]);
  }
  delegates = (0, general_1.unique)(delegates);
  var email = "".concat(name.split(' ').join('.').toLowerCase(), "@").concat(external ? 'not-' : '').concat(exports.USER_DOMAIN);
  USER_EMAILS.push(email);
  return {
    id: id,
    name: name,
    first_name: name.split(' ')[0],
    last_name: name.split(' ')[1],
    email: email,
    phone: "(02) 4567 8901",
    visitor: external,
    organisation: {
      id: organisation.split(' ').join('.').toLowerCase(),
      name: organisation
    },
    department: "Department ".concat((0, general_1.predictableRandomInt)(10)),
    staff_code: (0, general_1.predictableRandomInt)(999999),
    delegates: delegates,
    image: "".concat(id, ".png")
  };
}
/**
 * Generate form fields for the given user
 * @param user User to generate form for
 */
function generateUserForm(user) {
  var _user$visit_expected;
  if (!user) {
    throw Error('No user passed');
  }
  var fields = {
    name: new forms_1.FormControl(user.name || '', [forms_1.Validators.required]),
    email: new forms_1.FormControl(user.email || '', [forms_1.Validators.email, forms_1.Validators.required]),
    organisation: new forms_1.FormControl(user.organisation || '', forms_1.Validators.required),
    phone: new forms_1.FormControl(user.phone || '', forms_1.Validators.pattern(/^\+?(\d[\d\s\-\(\)]{5,13}\d)$/)),
    assistance_required: new forms_1.FormControl(user.assistance_required || false),
    visit_expected: new forms_1.FormControl((_user$visit_expected = user.visit_expected) !== null && _user$visit_expected !== void 0 ? _user$visit_expected : true)
  };
  // Generate form group for the user
  var form = new forms_1.FormGroup(fields);
  return form;
}
function generateGuestForm() {
  var user = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : new user_class_1.GuestUser();
  var host = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';
  var fields = {
    name: new forms_1.FormControl(user.name || ''),
    email: new forms_1.FormControl(user.email || '', [forms_1.Validators.email, forms_1.Validators.required]),
    organisation: new forms_1.FormControl(user.organisation || '', forms_1.Validators.required),
    phone: new forms_1.FormControl(user.phone || ''),
    host: new forms_1.FormControl(host || '', [forms_1.Validators.required])
  };
  // Generate form group for the guest
  var form = new forms_1.FormGroup(fields);
  return form;
}

/***/ }),

/***/ 34426:
/*!********************************************!*\
  !*** ./libs/users/src/lib/users.module.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _SharedUsersModule;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.SharedUsersModule = void 0;
var common_1 = __webpack_require__(/*! @angular/common */ 60316);
var forms_1 = __webpack_require__(/*! @angular/forms */ 34456);
var progress_spinner_1 = __webpack_require__(/*! @angular/material/progress-spinner */ 41134);
var menu_1 = __webpack_require__(/*! @angular/material/menu */ 31034);
var dialog_1 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var checkbox_1 = __webpack_require__(/*! @angular/material/checkbox */ 97024);
var components_module_1 = __webpack_require__(/*! libs/components/src/lib/components.module */ 14974);
var form_fields_module_1 = __webpack_require__(/*! libs/form-fields/src/lib/form-fields.module */ 77066);
var new_user_modal_component_1 = __webpack_require__(/*! ./new-user-modal.component */ 11543);
var user_form_component_1 = __webpack_require__(/*! ./user-form.component */ 7111);
var user_pipe_1 = __webpack_require__(/*! ./user.pipe */ 89577);
var wfh_settings_modal_component_1 = __webpack_require__(/*! ./wfh-settings-modal.component */ 43022);
var find_availability_modal_component_1 = __webpack_require__(/*! ./find-availability-modal/find-availability-modal.component */ 12716);
var user_availability_component_1 = __webpack_require__(/*! ./find-availability-modal/user-availability.component */ 94060);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @angular/common */ 60316);
var i2 = __webpack_require__(/*! @angular/forms */ 34456);
var i3 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var i4 = __webpack_require__(/*! ../../../form-fields/src/lib/time-field.component */ 81413);
var i5 = __webpack_require__(/*! ../../../components/src/lib/icon.component */ 69434);
var i6 = __webpack_require__(/*! @angular/material/core */ 74646);
var i7 = __webpack_require__(/*! @angular/material/form-field */ 24950);
var i8 = __webpack_require__(/*! @angular/material/select */ 25175);
var i9 = __webpack_require__(/*! @angular/material/progress-spinner */ 41134);
var i10 = __webpack_require__(/*! @angular/material/checkbox */ 97024);
var i11 = __webpack_require__(/*! ../../../form-fields/src/lib/date-field.component */ 19608);
var i12 = __webpack_require__(/*! ../../../form-fields/src/lib/user-search-field.component */ 18000);
var i13 = __webpack_require__(/*! ../../../components/src/lib/user-avatar.component */ 23574);
var i14 = __webpack_require__(/*! ../../../components/src/lib/duration.pipe */ 17022);
var COMPONENTS = [new_user_modal_component_1.NewUserModalComponent, user_form_component_1.UserFormComponent, wfh_settings_modal_component_1.WFHSettingsModalComponent, user_pipe_1.UserPipe, find_availability_modal_component_1.FindAvailabilityModalComponent, user_availability_component_1.UserAvailabilityComponent];
var SharedUsersModule = /*#__PURE__*/_createClass(function SharedUsersModule() {
  _classCallCheck(this, SharedUsersModule);
});
_SharedUsersModule = SharedUsersModule;
_SharedUsersModule.ɵfac = function SharedUsersModule_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _SharedUsersModule)();
};
_SharedUsersModule.ɵmod = /*@__PURE__*/i0.ɵɵdefineNgModule({
  type: _SharedUsersModule
});
_SharedUsersModule.ɵinj = /*@__PURE__*/i0.ɵɵdefineInjector({
  imports: [common_1.CommonModule, forms_1.FormsModule, forms_1.ReactiveFormsModule, dialog_1.MatDialogModule, form_fields_module_1.FormFieldsModule, components_module_1.ComponentsModule, checkbox_1.MatCheckboxModule, progress_spinner_1.MatProgressSpinnerModule, menu_1.MatMenuModule]
});
exports.SharedUsersModule = SharedUsersModule;
(function () {
  (typeof ngJitMode === "undefined" || ngJitMode) && i0.ɵɵsetNgModuleScope(SharedUsersModule, {
    declarations: [new_user_modal_component_1.NewUserModalComponent, user_form_component_1.UserFormComponent, wfh_settings_modal_component_1.WFHSettingsModalComponent, user_pipe_1.UserPipe, find_availability_modal_component_1.FindAvailabilityModalComponent, user_availability_component_1.UserAvailabilityComponent],
    imports: [common_1.CommonModule, forms_1.FormsModule, forms_1.ReactiveFormsModule, dialog_1.MatDialogModule, form_fields_module_1.FormFieldsModule, components_module_1.ComponentsModule, checkbox_1.MatCheckboxModule, progress_spinner_1.MatProgressSpinnerModule, menu_1.MatMenuModule],
    exports: [new_user_modal_component_1.NewUserModalComponent, user_form_component_1.UserFormComponent, wfh_settings_modal_component_1.WFHSettingsModalComponent, user_pipe_1.UserPipe, find_availability_modal_component_1.FindAvailabilityModalComponent, user_availability_component_1.UserAvailabilityComponent]
  });
})();
i0.ɵɵsetComponentScope(wfh_settings_modal_component_1.WFHSettingsModalComponent, [i1.NgForOf, i1.NgIf, i2.NgControlStatus, i2.NgModel, i3.MatDialogClose, i4.TimeFieldComponent, i5.IconComponent, i6.MatOption, i7.MatFormField, i8.MatSelect, i6.MatRipple, i9.MatProgressSpinner, i10.MatCheckbox], [i1.DatePipe]);
i0.ɵɵsetComponentScope(find_availability_modal_component_1.FindAvailabilityModalComponent, [i1.NgForOf, i1.NgIf, i2.NgControlStatus, i2.NgModel, i3.MatDialogClose, i11.DateFieldComponent, i12.UserSearchFieldComponent, i5.IconComponent, i13.UserAvatarComponent, i6.MatRipple, user_availability_component_1.UserAvailabilityComponent], [i1.AsyncPipe, i1.DatePipe, i14.DurationPipe]);

/***/ }),

/***/ 43022:
/*!************************************************************!*\
  !*** ./libs/users/src/lib/wfh-settings-modal.component.ts ***!
  \************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {



var _regeneratorRuntime = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/regeneratorRuntime.js */ 8698)["default"]);
var _asyncToGenerator = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/asyncToGenerator.js */ 95386)["default"]);
var _createForOfIteratorHelper = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createForOfIteratorHelper.js */ 36350)["default"]);
var _objectSpread = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/objectSpread2.js */ 34092)["default"]);
var _toConsumableArray = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/toConsumableArray.js */ 86033)["default"]);
var _classCallCheck = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/classCallCheck.js */ 80912)["default"]);
var _createClass = (__webpack_require__(/*! ./node_modules/@babel/runtime/helpers/createClass.js */ 92974)["default"]);
var _WFHSettingsModalComponent;
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.WFHSettingsModalComponent = void 0;
var dialog_1 = __webpack_require__(/*! @angular/material/dialog */ 12587);
var common_1 = __webpack_require__(/*! @placeos/common */ 22797);
var date_fns_1 = __webpack_require__(/*! date-fns */ 25773);
var ts_client_1 = __webpack_require__(/*! @placeos/ts-client */ 35713);
var i0 = __webpack_require__(/*! @angular/core */ 37580);
var i1 = __webpack_require__(/*! @angular/material/dialog */ 12587);
function WFHSettingsModalComponent_button_3_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "button", 7)(1, "app-icon");
    i0.ɵɵtext(2, "close");
    i0.ɵɵelementEnd()();
  }
}
function WFHSettingsModalComponent_main_4_mat_checkbox_4_Template(rf, ctx) {
  if (rf & 1) {
    var _r1 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "mat-checkbox", 12);
    i0.ɵɵtwoWayListener("ngModelChange", function WFHSettingsModalComponent_main_4_mat_checkbox_4_Template_mat_checkbox_ngModelChange_0_listener($event) {
      var day_r2 = i0.ɵɵrestoreView(_r1).$implicit;
      var ctx_r2 = i0.ɵɵnextContext(2);
      i0.ɵɵtwoWayBindingSet(ctx_r2.weekdays_enabled[day_r2.getDay()], $event) || (ctx_r2.weekdays_enabled[day_r2.getDay()] = $event);
      return i0.ɵɵresetView($event);
    });
    i0.ɵɵlistener("ngModelChange", function WFHSettingsModalComponent_main_4_mat_checkbox_4_Template_mat_checkbox_ngModelChange_0_listener($event) {
      var day_r2 = i0.ɵɵrestoreView(_r1).$implicit;
      var ctx_r2 = i0.ɵɵnextContext(2);
      return i0.ɵɵresetView($event && ctx_r2.initialiseDay(day_r2.getDay()));
    });
    i0.ɵɵtext(1);
    i0.ɵɵpipe(2, "date");
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var day_r2 = ctx.$implicit;
    var ctx_r2 = i0.ɵɵnextContext(2);
    i0.ɵɵtwoWayProperty("ngModel", ctx_r2.weekdays_enabled[day_r2.getDay()]);
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", i0.ɵɵpipeBind2(2, 2, day_r2, "EEE"), " ");
  }
}
function WFHSettingsModalComponent_main_4_ng_container_7_ng_container_1_ng_container_1_div_6_mat_option_5_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "mat-option", 25);
    i0.ɵɵtext(1);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var type_r7 = ctx.$implicit;
    i0.ɵɵproperty("value", type_r7.id);
    i0.ɵɵadvance();
    i0.ɵɵtextInterpolate1(" ", type_r7.name, " ");
  }
}
function WFHSettingsModalComponent_main_4_ng_container_7_ng_container_1_ng_container_1_div_6_Template(rf, ctx) {
  if (rf & 1) {
    var _r4 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "div", 19)(1, "a-time-field", 20);
    i0.ɵɵlistener("ngModelChange", function WFHSettingsModalComponent_main_4_ng_container_7_ng_container_1_ng_container_1_div_6_Template_a_time_field_ngModelChange_1_listener($event) {
      var block_r5 = i0.ɵɵrestoreView(_r4).$implicit;
      var day_r6 = i0.ɵɵnextContext(2).$implicit;
      var ctx_r2 = i0.ɵɵnextContext(3);
      return i0.ɵɵresetView(ctx_r2.setStartTime(block_r5, day_r6.getDay(), $event));
    });
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(2, "a-time-field", 20);
    i0.ɵɵlistener("ngModelChange", function WFHSettingsModalComponent_main_4_ng_container_7_ng_container_1_ng_container_1_div_6_Template_a_time_field_ngModelChange_2_listener($event) {
      var block_r5 = i0.ɵɵrestoreView(_r4).$implicit;
      var day_r6 = i0.ɵɵnextContext(2).$implicit;
      var ctx_r2 = i0.ɵɵnextContext(3);
      return i0.ɵɵresetView(ctx_r2.setEndTime(block_r5, day_r6.getDay(), $event));
    });
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(3, "mat-form-field", 21)(4, "mat-select", 12);
    i0.ɵɵtwoWayListener("ngModelChange", function WFHSettingsModalComponent_main_4_ng_container_7_ng_container_1_ng_container_1_div_6_Template_mat_select_ngModelChange_4_listener($event) {
      var block_r5 = i0.ɵɵrestoreView(_r4).$implicit;
      i0.ɵɵtwoWayBindingSet(block_r5.location, $event) || (block_r5.location = $event);
      return i0.ɵɵresetView($event);
    });
    i0.ɵɵtemplate(5, WFHSettingsModalComponent_main_4_ng_container_7_ng_container_1_ng_container_1_div_6_mat_option_5_Template, 2, 2, "mat-option", 22);
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(6, "button", 23);
    i0.ɵɵlistener("click", function WFHSettingsModalComponent_main_4_ng_container_7_ng_container_1_ng_container_1_div_6_Template_button_click_6_listener() {
      var i_r8 = i0.ɵɵrestoreView(_r4).index;
      var day_r6 = i0.ɵɵnextContext(2).$implicit;
      var ctx_r2 = i0.ɵɵnextContext(3);
      return i0.ɵɵresetView(ctx_r2.addBlock(ctx_r2.settings[day_r6.getDay()], i_r8));
    });
    i0.ɵɵelementStart(7, "app-icon");
    i0.ɵɵtext(8, "add");
    i0.ɵɵelementEnd()();
    i0.ɵɵelementStart(9, "button", 24);
    i0.ɵɵlistener("click", function WFHSettingsModalComponent_main_4_ng_container_7_ng_container_1_ng_container_1_div_6_Template_button_click_9_listener() {
      var i_r8 = i0.ɵɵrestoreView(_r4).index;
      var day_r6 = i0.ɵɵnextContext(2).$implicit;
      var ctx_r2 = i0.ɵɵnextContext(3);
      return i0.ɵɵresetView(ctx_r2.removeBlock(ctx_r2.settings[day_r6.getDay()], i_r8));
    });
    i0.ɵɵelementStart(10, "app-icon");
    i0.ɵɵtext(11, "delete");
    i0.ɵɵelementEnd()()();
  }
  if (rf & 2) {
    var tmp_11_0;
    var block_r5 = ctx.$implicit;
    var i_r8 = ctx.index;
    var day_r6 = i0.ɵɵnextContext(2).$implicit;
    var ctx_r2 = i0.ɵɵnextContext(3);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngModel", ctx_r2.timeFrom(block_r5.start_time))("from", ctx_r2.timeFrom((i_r8 > 0 ? (tmp_11_0 = ctx_r2.settings[day_r6.getDay()].blocks[i_r8 - 1]) == null ? null : tmp_11_0.end_time : 0) || 0));
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngModel", ctx_r2.timeFrom(block_r5.end_time))("from", ctx_r2.timeFrom(block_r5.start_time + 0.25));
    i0.ɵɵadvance(2);
    i0.ɵɵtwoWayProperty("ngModel", block_r5.location);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngForOf", ctx_r2.options);
    i0.ɵɵadvance();
    i0.ɵɵproperty("disabled", ctx_r2.settings[day_r6.getDay()].blocks.length > 2);
    i0.ɵɵadvance(3);
    i0.ɵɵclassProp("opacity-0", i_r8 === 0)("pointer-events-none", i_r8 === 0);
  }
}
function WFHSettingsModalComponent_main_4_ng_container_7_ng_container_1_ng_container_1_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵelementStart(1, "div", 15)(2, "label", 16);
    i0.ɵɵtext(3);
    i0.ɵɵpipe(4, "date");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(5, "div", 17);
    i0.ɵɵtemplate(6, WFHSettingsModalComponent_main_4_ng_container_7_ng_container_1_ng_container_1_div_6_Template, 12, 11, "div", 18);
    i0.ɵɵelementEnd()();
    i0.ɵɵelementContainerEnd();
  }
  if (rf & 2) {
    var day_r6 = i0.ɵɵnextContext().$implicit;
    var ctx_r2 = i0.ɵɵnextContext(3);
    i0.ɵɵadvance(3);
    i0.ɵɵtextInterpolate1(" ", i0.ɵɵpipeBind2(4, 2, day_r6, "EEE"), " ");
    i0.ɵɵadvance(3);
    i0.ɵɵproperty("ngForOf", ctx_r2.settings[day_r6.getDay()].blocks);
  }
}
function WFHSettingsModalComponent_main_4_ng_container_7_ng_container_1_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵtemplate(1, WFHSettingsModalComponent_main_4_ng_container_7_ng_container_1_ng_container_1_Template, 7, 5, "ng-container", 14);
    i0.ɵɵelementContainerEnd();
  }
  if (rf & 2) {
    var day_r6 = ctx.$implicit;
    var ctx_r2 = i0.ɵɵnextContext(3);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngIf", ctx_r2.weekdays_enabled[day_r6.getDay()]);
  }
}
function WFHSettingsModalComponent_main_4_ng_container_7_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementContainerStart(0);
    i0.ɵɵtemplate(1, WFHSettingsModalComponent_main_4_ng_container_7_ng_container_1_Template, 2, 1, "ng-container", 13);
    i0.ɵɵelementContainerEnd();
  }
  if (rf & 2) {
    var ctx_r2 = i0.ɵɵnextContext(2);
    i0.ɵɵadvance();
    i0.ɵɵproperty("ngForOf", ctx_r2.days);
  }
}
function WFHSettingsModalComponent_main_4_ng_template_8_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 26);
    i0.ɵɵelement(1, "img", 27);
    i0.ɵɵelementStart(2, "p", 28);
    i0.ɵɵtext(3, " No work days are currently set for this user ");
    i0.ɵɵelementEnd()();
  }
}
function WFHSettingsModalComponent_main_4_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "main", 8)(1, "h3");
    i0.ɵɵtext(2, "Working Days");
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(3, "div", 9);
    i0.ɵɵtemplate(4, WFHSettingsModalComponent_main_4_mat_checkbox_4_Template, 3, 5, "mat-checkbox", 10);
    i0.ɵɵelementEnd();
    i0.ɵɵelementStart(5, "h3");
    i0.ɵɵtext(6, "Work Hours");
    i0.ɵɵelementEnd();
    i0.ɵɵtemplate(7, WFHSettingsModalComponent_main_4_ng_container_7_Template, 2, 1, "ng-container", 11)(8, WFHSettingsModalComponent_main_4_ng_template_8_Template, 4, 0, "ng-template", null, 1, i0.ɵɵtemplateRefExtractor);
    i0.ɵɵelementEnd();
  }
  if (rf & 2) {
    var empty_state_r9 = i0.ɵɵreference(9);
    var ctx_r2 = i0.ɵɵnextContext();
    i0.ɵɵadvance(4);
    i0.ɵɵproperty("ngForOf", ctx_r2.days);
    i0.ɵɵadvance(3);
    i0.ɵɵproperty("ngIf", ctx_r2.has_working_days)("ngIfElse", empty_state_r9);
  }
}
function WFHSettingsModalComponent_footer_5_Template(rf, ctx) {
  if (rf & 1) {
    var _r10 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "footer", 29)(1, "button", 30);
    i0.ɵɵlistener("click", function WFHSettingsModalComponent_footer_5_Template_button_click_1_listener() {
      i0.ɵɵrestoreView(_r10);
      var ctx_r2 = i0.ɵɵnextContext();
      return i0.ɵɵresetView(ctx_r2.saveChanges());
    });
    i0.ɵɵtext(2, " Save ");
    i0.ɵɵelementEnd()();
  }
}
function WFHSettingsModalComponent_ng_template_6_Template(rf, ctx) {
  if (rf & 1) {
    i0.ɵɵelementStart(0, "div", 31);
    i0.ɵɵelement(1, "mat-spinner", 32);
    i0.ɵɵelementStart(2, "p", 28);
    i0.ɵɵtext(3, " Saving changes to work location settings... ");
    i0.ɵɵelementEnd()();
  }
  if (rf & 2) {
    i0.ɵɵadvance();
    i0.ɵɵproperty("diameter", 32);
  }
}
var WFHSettingsModalComponent = /*#__PURE__*/function () {
  function WFHSettingsModalComponent(_dialog_ref) {
    _classCallCheck(this, WFHSettingsModalComponent);
    this._dialog_ref = _dialog_ref;
    this.options = [{
      id: 'wfo',
      name: 'Office'
    }, {
      id: 'wfh',
      name: 'Home'
    }, {
      id: 'aol',
      name: 'Leave'
    }];
    this.option = this.options[0].id;
    this.settings = [];
    this.weekdays_enabled = {};
    this.changed = false;
    this.loading = false;
    this.available_weekdays = [];
    this.days = new Array(7).fill(0).map(function (_, idx) {
      return (0, date_fns_1.addDays)((0, date_fns_1.startOfWeek)((0, date_fns_1.addDays)(Date.now(), 30)), idx);
    });
  }
  return _createClass(WFHSettingsModalComponent, [{
    key: "has_working_days",
    get: function get() {
      var _this = this;
      return Object.keys(this.weekdays_enabled).some(function (day) {
        return _this.weekdays_enabled[day];
      });
    }
  }, {
    key: "option_name",
    get: function get() {
      var _this$options$find,
        _this2 = this;
      return ((_this$options$find = this.options.find(function (_) {
        return _.id === _this2.option;
      })) === null || _this$options$find === void 0 ? void 0 : _this$options$find.name) || '';
    }
  }, {
    key: "now",
    get: function get() {
      return (0, date_fns_1.startOfMinute)(Date.now()).getTime();
    }
  }, {
    key: "ngOnInit",
    value: function ngOnInit() {
      var user = (0, common_1.currentUser)();
      this.settings = _toConsumableArray((user.work_preferences || []).map(function (_) {
        return _objectSpread(_objectSpread({}, _), {}, {
          blocks: _toConsumableArray((_ === null || _ === void 0 ? void 0 : _.blocks) || [])
        });
      }));
      var _iterator = _createForOfIteratorHelper(this.settings),
        _step;
      try {
        for (_iterator.s(); !(_step = _iterator.n()).done;) {
          var day = _step.value;
          if (day.blocks.length) this.weekdays_enabled[day.day_of_week] = true;
        }
      } catch (err) {
        _iterator.e(err);
      } finally {
        _iterator.f();
      }
    }
  }, {
    key: "timeFrom",
    value: function timeFrom(hours) {
      return (0, date_fns_1.startOfMinute)((0, date_fns_1.set)((0, date_fns_1.addDays)(new Date(), 1), {
        hours: Math.floor(hours),
        minutes: hours * 60 % 60
      })).getTime();
    }
  }, {
    key: "fromTime",
    value: function fromTime(time) {
      var date = new Date(time);
      return date.getHours() + date.getMinutes() / 60;
    }
  }, {
    key: "initialiseDay",
    value: function initialiseDay(day) {
      if (!this.settings[day]) this.settings[day] = {
        day_of_week: day,
        blocks: []
      };
      if (!this.settings[day].blocks) this.settings[day].blocks = [];
      if (this.settings[day].blocks.length === 0) {
        this.addBlock(this.settings[day], 0);
      }
    }
  }, {
    key: "addBlock",
    value: function addBlock(pref, index) {
      pref.blocks.splice(index + 1, 0, {
        start_time: 9,
        end_time: 17,
        location: 'wfo'
      });
      this.cleanupBlocks(pref);
    }
  }, {
    key: "removeBlock",
    value: function removeBlock(pref, index) {
      if (pref.blocks.length <= 1) return;
      pref.blocks.splice(index, 1);
    }
  }, {
    key: "setEndTime",
    value: function setEndTime(block, day, time) {
      var _this3 = this;
      setTimeout(function () {
        block.end_time = _this3.fromTime(time);
        _this3.cleanupBlocks(_this3.settings[day]);
      }, 50);
    }
  }, {
    key: "setStartTime",
    value: function setStartTime(block, day, time) {
      var _this4 = this;
      setTimeout(function () {
        block.start_time = _this4.fromTime(time);
        _this4.cleanupBlocks(_this4.settings[day]);
      }, 50);
    }
  }, {
    key: "cleanupBlocks",
    value: function cleanupBlocks(pref) {
      var _pref$blocks;
      if (!(pref !== null && pref !== void 0 && (_pref$blocks = pref.blocks) !== null && _pref$blocks !== void 0 && _pref$blocks.length)) return;
      for (var i = 0; i < pref.blocks.length; i++) {
        var block = pref.blocks[i];
        if (i > 0) {
          if (block.start_time < pref.blocks[i - 1].end_time) {
            block.start_time = pref.blocks[i - 1].end_time;
          }
        }
        if (block.end_time <= block.start_time) {
          block.end_time = block.start_time + 1;
        }
      }
    }
  }, {
    key: "saveChanges",
    value: function () {
      var _saveChanges = _asyncToGenerator(function () {
        var _this5 = this;
        var close = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;
        return /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {
          var user, new_settings, _iterator2, _step2, day, day_of_week;
          return _regeneratorRuntime().wrap(function _callee$(_context) {
            while (1) switch (_context.prev = _context.next) {
              case 0:
                _this5.loading = true;
                _this5._dialog_ref.disableClose = true;
                _context.next = 4;
                return (0, ts_client_1.showUser)('current').toPromise();
              case 4:
                user = _context.sent;
                new_settings = new Array(7).fill(0).map(function (_, idx) {
                  return {
                    day_of_week: idx,
                    blocks: []
                  };
                });
                _iterator2 = _createForOfIteratorHelper(_this5.days);
                try {
                  for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
                    day = _step2.value;
                    day_of_week = day.getDay();
                    if (_this5.weekdays_enabled[day_of_week]) {
                      new_settings[day_of_week] = {
                        day_of_week: day_of_week,
                        blocks: _this5.settings[day_of_week].blocks
                      };
                    }
                  }
                } catch (err) {
                  _iterator2.e(err);
                } finally {
                  _iterator2.f();
                }
                console.log('Update user...');
                _context.next = 11;
                return (0, ts_client_1.updateUser)(user.id, _objectSpread(_objectSpread({}, user), {}, {
                  groups: user.groups.filter(function (_) {
                    return !_.startsWith('placeos_');
                  }),
                  work_preferences: new_settings
                })).toPromise()["catch"](function (e) {
                  _this5.loading = false;
                  _this5._dialog_ref.disableClose = false;
                  (0, common_1.notifyError)('Unable to save user work preferences.');
                  throw e;
                });
              case 11:
                console.log('Updated user');
                _this5.loading = false;
                _this5._dialog_ref.disableClose = false;
                if (close) {
                  (0, common_1.reloadUserData)();
                  console.log('Close WFH Modal');
                  _this5._dialog_ref.close();
                }
              case 15:
              case "end":
                return _context.stop();
            }
          }, _callee);
        })();
      });
      function saveChanges() {
        return _saveChanges.apply(this, arguments);
      }
      return saveChanges;
    }()
  }]);
}();
_WFHSettingsModalComponent = WFHSettingsModalComponent;
_WFHSettingsModalComponent.ɵfac = function WFHSettingsModalComponent_Factory(__ngFactoryType__) {
  return new (__ngFactoryType__ || _WFHSettingsModalComponent)(i0.ɵɵdirectiveInject(i1.MatDialogRef));
};
_WFHSettingsModalComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({
  type: _WFHSettingsModalComponent,
  selectors: [["wfh-settings-modal"]],
  decls: 8,
  vars: 4,
  consts: [["load_state", ""], ["empty_state", ""], [1, "relative", "flex", "items-center", "justify-between"], [1, "font-medium", "text-xl"], ["icon", "", "matRipple", "", "mat-dialog-close", "", "class", "bg-base-200", 4, "ngIf"], ["class", "relative flex flex-col rounded w-[40rem] max-w-full p-4 space-y-2 max-h-[65vh] overflow-auto", 4, "ngIf", "ngIfElse"], ["class", "flex justify-end px-4 py-2 border-t border-base-200", 4, "ngIf"], ["icon", "", "matRipple", "", "mat-dialog-close", "", 1, "bg-base-200"], [1, "relative", "flex", "flex-col", "rounded", "w-[40rem]", "max-w-full", "p-4", "space-y-2", "max-h-[65vh]", "overflow-auto"], [1, "flex", "items-center", "justify-between", "w-full", "pb-4", "space-x-2"], [3, "ngModel", "ngModelChange", 4, "ngFor", "ngForOf"], [4, "ngIf", "ngIfElse"], [3, "ngModelChange", "ngModel"], [4, "ngFor", "ngForOf"], [4, "ngIf"], [1, "flex", "w-full", "space-x-2", "hover:bg-base-200", "rounded", "px-2", "pt-1"], [1, "w-12", "min-w-0", "px-2", "pt-3"], [1, "flex-1", "w-1/2"], ["class", "flex items-center space-x-2", 4, "ngFor", "ngForOf"], [1, "flex", "items-center", "space-x-2"], [1, "flex-1", "w-1/4", "h-[3.25rem]", 3, "ngModelChange", "ngModel", "from"], ["appearance", "outline", 1, "flex-1", "w-1/4", "h-[3.25rem]"], [3, "value", 4, "ngFor", "ngForOf"], ["icon", "", "matRipple", "", 3, "click", "disabled"], ["icon", "", "matRipple", "", 1, "text-error", 3, "click"], [3, "value"], [1, "flex", "flex-col", "items-center", "justify-center", "px-8", "py-16", "space-y-4"], ["src", "assets/icons/no-results.svg", 1, "m-auto"], [1, "opacity-30"], [1, "flex", "justify-end", "px-4", "py-2", "border-t", "border-base-200"], ["btn", "", "matRipple", "", 1, "w-48", 3, "click"], ["loading", "", 1, "relative", "bg-base-100", "flex", "flex-col", "justify-center", "items-center", "rounded", "overflow-hidden", "w-[24rem]", "h-[18rem]", "text-center", "space-y-2"], [3, "diameter"]],
  template: function WFHSettingsModalComponent_Template(rf, ctx) {
    if (rf & 1) {
      i0.ɵɵelementStart(0, "header", 2)(1, "h2", 3);
      i0.ɵɵtext(2, "Working Location Settings");
      i0.ɵɵelementEnd();
      i0.ɵɵtemplate(3, WFHSettingsModalComponent_button_3_Template, 3, 0, "button", 4);
      i0.ɵɵelementEnd();
      i0.ɵɵtemplate(4, WFHSettingsModalComponent_main_4_Template, 10, 3, "main", 5)(5, WFHSettingsModalComponent_footer_5_Template, 3, 0, "footer", 6)(6, WFHSettingsModalComponent_ng_template_6_Template, 4, 1, "ng-template", null, 0, i0.ɵɵtemplateRefExtractor);
    }
    if (rf & 2) {
      var load_state_r11 = i0.ɵɵreference(7);
      i0.ɵɵadvance(3);
      i0.ɵɵproperty("ngIf", !ctx.loading);
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", !ctx.loading)("ngIfElse", load_state_r11);
      i0.ɵɵadvance();
      i0.ɵɵproperty("ngIf", !ctx.loading);
    }
  }
});
exports.WFHSettingsModalComponent = WFHSettingsModalComponent;

/***/ })

},
/******/ __webpack_require__ => { // webpackRuntimeModules
/******/ var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
/******/ __webpack_require__.O(0, ["vendor"], () => (__webpack_exec__(83591)));
/******/ var __webpack_exports__ = __webpack_require__.O();
/******/ }
]);
//# sourceMappingURL=main.js.map