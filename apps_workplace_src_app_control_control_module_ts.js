(self.webpackChunkplaceos=self.webpackChunkplaceos||[]).push([["apps_workplace_src_app_control_control_module_ts"],{5088:(e,t,s)=>{"use strict";s.r(t),s.d(t,{ControlModule:()=>M});var n=s(1511),o=s(6898),l=s(2619),i=s(3730),r=s(4892),a=s(2142),c=s(4762),p=s(3530),f=s(7209),u=s(1496),d=s(6283),m=s(1548),g=s(6756),x=s(6073),h=s(7806),_=s(5980),v=s(7695);const w=function(){return["/explore"]},Z=function(e){return{space:e}};function q(e,t){if(1&e&&(l.TgZ(0,"div",1),l.TgZ(1,"div",2),l.TgZ(2,"div",3),l._uU(3),l.qZA(),l.TgZ(4,"div",4),l.TgZ(5,"div",5),l._uU(6),l.qZA(),l.TgZ(7,"div",6),l.TgZ(8,"app-icon"),l._uU(9,"account_circle"),l.qZA(),l._uU(10),l.qZA(),l.qZA(),l.qZA(),l.TgZ(11,"div",7),l.TgZ(12,"a",8),l.ALo(13,"safe"),l._uU(14," Control "),l.qZA(),l.TgZ(15,"a",9),l._uU(16," Find "),l.qZA(),l.qZA(),l.qZA()),2&e){const e=l.oxw();l.ekj("with-image",e.show_image),l.xp6(3),l.Oqu(e.space.name),l.xp6(3),l.Oqu(e.location),l.xp6(4),l.hij(" ",e.space.capacity||"0"," "),l.xp6(2),l.Q6J("href",l.xi3(13,8,e.space.support_url,"url"),l.LSH),l.xp6(3),l.Q6J("routerLink",l.DdM(11,w))("queryParams",l.VKq(12,Z,e.space.id))}}let y=(()=>{class e{constructor(e,t){this._settings=e,this._org=t}get show_image(){return this._settings.get("app.space_display.show_images")}get location(){if(!this.space)return"Unable to determine location";const e=this.space.level,t=this._org.buildings.find(t=>t.id===e.parent_id);return`${t?(t.display_name||t.name)+", ":""}${(null==e?void 0:e.display_name)||(null==e?void 0:e.name)||"<No Level>"}`}}return e.\u0275fac=function(t){return new(t||e)(l.Y36(i.gb),l.Y36(u.w7))},e.\u0275cmp=l.Xpm({type:e,selectors:[["a-control-space-list-item"]],inputs:{space:"space"},decls:1,vars:1,consts:[["class","flex flex-wrap items-center sm:space-x-4 bg-white hover:bg-gray-100 overflow-hidden p-2 pl-4 mb-2",3,"with-image",4,"ngIf"],[1,"flex","flex-wrap","items-center","sm:space-x-4","bg-white","hover:bg-gray-100","overflow-hidden","p-2","pl-4","mb-2"],[1,"flex","flex-col","flex-1"],[1,"text-xl"],[1,"flex","items-center","w-full","text-sm"],[1,"flex-1"],[1,"flex","items-center","text-lg"],[1,"flex","w-full","sm:w-auto","sm:flex-col","items-center","space-x-2","sm:space-x-0","sm:space-y-2","mt-4","sm:mt-0"],["mat-button","","button","","control","",1,"w-32","flex-1","sm:flex-none",3,"href"],["mat-button","","button","","locate","",1,"w-32","flex-1","sm:flex-none","inverse",3,"routerLink","queryParams"]],template:function(e,t){1&e&&l.YNc(0,q,17,14,"div",0),2&e&&l.Q6J("ngIf",t.space)},directives:[n.O5,m.o,_.zs,o.yS],pipes:[v.y],styles:[""]}),e})();function C(e,t){1&e&&l._UZ(0,"mat-spinner",7),2&e&&l.Q6J("diameter",32)}function A(e,t){1&e&&l._UZ(0,"a-control-space-list-item",10),2&e&&l.Q6J("space",t.$implicit)}function b(e,t){if(1&e&&(l.TgZ(0,"div",8),l.YNc(1,A,1,1,"a-control-space-list-item",9),l.qZA()),2&e){const e=l.oxw();l.xp6(1),l.Q6J("ngForOf",e.filtered_list)}}function T(e,t){if(1&e&&(l.TgZ(0,"div",11),l.TgZ(1,"app-icon"),l._uU(2,"close"),l.qZA(),l.TgZ(3,"p"),l._uU(4),l.qZA(),l.qZA()),2&e){const e=l.oxw();l.xp6(4),l.hij(" ",e.search_str?' No matches for "'+e.search_str+'"':"No controllable spaces"," ")}}let O=(()=>{class e extends i.KG{constructor(e,t){super(),this._spaces=e,this._org=t,this.space_list=[]}ngOnInit(){return(0,c.mG)(this,void 0,void 0,function*(){yield this._spaces.initialised.pipe((0,p.P)(e=>e)).toPromise(),this.space_list=this._spaces.filter(e=>!!e.support_url),this.space_list.sort((e,t)=>this.sortSpaces(e,t))})}get filtered_list(){const e=(this.search_str||"").toLowerCase();return(this.space_list||[]).filter(t=>{const s=this._org.buildings.find(e=>e.id===t.level.parent_id),n=(t.name||"").toLowerCase(),o=((t.level?t.level.name:"")||"").toLowerCase(),l=((s?s.name:"")||"").toLowerCase();return n.indexOf(e)>=0||o&&o.indexOf(e)>=0||l&&l.indexOf(e)>=0})}sortSpaces(e,t){const s=this._org.buildings.find(t=>{var s;return t.id===(null===(s=e.level)||void 0===s?void 0:s.parent_id)}),n=(e.name||"").toLowerCase(),o=((e.level?e.level.name:"")||"").toLowerCase(),l=((null==s?void 0:s.name)||"").toLowerCase(),i=this._org.buildings.find(e=>{var s;return e.id===(null===(s=t.level)||void 0===s?void 0:s.parent_id)}),r=(t.name||"").toLowerCase(),a=((t.level?t.level.name:"")||"").toLowerCase(),c=((null==i?void 0:i.name)||"").toLowerCase();return l.localeCompare(c)||o.localeCompare(a)||n.localeCompare(r)}}return e.\u0275fac=function(t){return new(t||e)(l.Y36(f.sK),l.Y36(u.w7))},e.\u0275cmp=l.Xpm({type:e,selectors:[["a-control-space-list"]],features:[l.qOj],decls:9,vars:4,consts:[[1,"w-full","flex","items-center","justify-center","p-2"],["overlay","","appearance","outline",1,"rounded","h-12"],["matPrefix","",1,"text-xl"],["matInput","","placeholder","Search...",3,"ngModel","ngModelChange"],["matSuffix","","class","top-2",3,"diameter",4,"ngIf"],["class","flex flex-col flex-1 overflow-auto w-full",4,"ngIf","ngIfElse"],["empty_state",""],["matSuffix","",1,"top-2",3,"diameter"],[1,"flex","flex-col","flex-1","overflow-auto","w-full"],[3,"space",4,"ngFor","ngForOf"],[3,"space"],[1,"flex","flex-col","items-center","p-8"]],template:function(e,t){if(1&e&&(l.TgZ(0,"div",0),l.TgZ(1,"mat-form-field",1),l.TgZ(2,"app-icon",2),l._uU(3,"search"),l.qZA(),l.TgZ(4,"input",3),l.NdJ("ngModelChange",function(e){return t.search_str=e}),l.qZA(),l.YNc(5,C,1,1,"mat-spinner",4),l.qZA(),l.qZA(),l.YNc(6,b,2,1,"div",5),l.YNc(7,T,5,1,"ng-template",null,6,l.W1O)),2&e){const e=l.MAs(8);l.xp6(4),l.Q6J("ngModel",t.search_str),l.xp6(1),l.Q6J("ngIf",t.loading),l.xp6(1),l.Q6J("ngIf",t.filtered_list.length)("ngIfElse",e)}},directives:[d.KE,m.o,d.qo,g.Nt,x.Fj,x.JJ,x.On,n.O5,h.$g,d.R9,n.sg,y],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%;width:100%}mat-form-field[_ngcontent-%COMP%]{width:768px;max-width:calc(100% - 2rem)}"]}),e})();const L=["app-control",""];let U=(()=>{class e{constructor(e){this._settings=e}ngOnInit(){this._settings.title="Control"}}return e.\u0275fac=function(t){return new(t||e)(l.Y36(i.gb))},e.\u0275cmp=l.Xpm({type:e,selectors:[["","app-control",""]],attrs:L,decls:5,vars:0,consts:[[1,"flex-1","flex","sm:flex-row","flex-col-reverse","h-1/2"],[1,"relative","z-10"],[1,"relative","z-0","flex","flex-col","flex-1","h-1/2","sm:h-auto","overflow-hidden"]],template:function(e,t){1&e&&(l._UZ(0,"topbar"),l.TgZ(1,"div",0),l._UZ(2,"nav-menu",1),l.TgZ(3,"main",2),l._UZ(4,"a-control-space-list"),l.qZA(),l.qZA())},directives:[r.o,a.D,O],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%;width:100%;background:#f0f0f0}"]}),e})();var J=s(1781);const I=[{path:"",component:U}];let M=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l.oAB({type:e}),e.\u0275inj=l.cJS({imports:[[n.ez,x.u5,o.Bz.forChild(I),J.v]]}),e})()}}]);
//# sourceMappingURL=apps_workplace_src_app_control_control_module_ts.js.map