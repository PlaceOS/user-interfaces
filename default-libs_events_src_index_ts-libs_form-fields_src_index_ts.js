(self.webpackChunkplaceos=self.webpackChunkplaceos||[]).push([["default-libs_events_src_index_ts-libs_form-fields_src_index_ts"],{7141:(e,t,n)=>{"use strict";n.d(t,{ym:()=>i.y,rq:()=>s.rq,r7:()=>m,ry:()=>s.ry,Vh:()=>s.Vh,eJ:()=>s.eJ}),n(8223),n(9720);var i=n(9005),s=n(3499),r=n(6073),o=n(6925),a=n(1948),l=n(5090),c=n(6280),u=n(847),d=n(8774),p=n(804);const h=e=>{var t;return(null===(t=e.parent)||void 0===t?void 0:t.get("date"))&&(0,d.Z)(new Date,(0,p.Z)(e.parent.get("date").value,e.value))?{duration:!0}:null};function m(e){var t,n,i;const s=new r.cw({id:new r.NI(e.id),host:new r.NI(e.host||"",[r.kI.required]),organiser:new r.NI(e.organiser||{},[r.kI.required]),creator:new r.NI(e.creator,[r.kI.required]),calendar:new r.NI(e.calendar),attendees:new r.NI(e.attendees||[]),resources:new r.NI(e.resources||[]),title:new r.NI(e.title,[r.kI.required]),body:new r.NI(e.body),private:new r.NI(e.private),date:new r.NI(e.date,[r.kI.required]),duration:new r.NI(e.duration,[h]),all_day:new r.NI(e.all_day),recurring:new r.NI(e.recurring),recurrence:new r.NI(e.recurrence),recurring_master_id:new r.NI(e.recurring_master_id),master:new r.NI(e.master),attachments:new r.NI(e.attachments),catering:new r.NI((null===(t=e.extension_data)||void 0===t?void 0:t.catering)||[]),visitor_type:new r.NI(null===(n=e.extension_data)||void 0===n?void 0:n.visitor_type),location:new r.NI(e.location),needs_space:new r.NI(!0),needs_parking:new r.NI((null===(i=e.extension_data)||void 0===i?void 0:i.needs_parking)||!1),system:new r.NI(e.system)});return s.get("organiser").valueChanges.subscribe(e=>s.controls.host.setValue(null==e?void 0:e.email)),s.get("resources").valueChanges.subscribe(e=>s.controls.system.setValue(e.length?e[0]:null)),e.id&&(s.get("host").disable(),s.get("organiser").disable()),"started"===e.state&&s.get("date").disable(),s}n(391),(0,o.Z)(function(e,t){(0,c.Z)(2,arguments);var n=(0,l.Z)(e),i=(0,a.Z)(t);return n.setMinutes(i),n}((0,u.Z)(new Date,6),0),{days:-1}),n(1496)},3499:(e,t,n)=>{"use strict";n.d(t,{u$:()=>c,Vh:()=>u,eJ:()=>d,ry:()=>p,rq:()=>h});var i=n(6817),s=n(9996),r=n(2775),o=n(7271),a=n(9005);const l="/api/staff/v1/events";function c(e){const t=(0,r.U)(e);return(0,i.U2M)(`${l}${t?"?"+t:""}`).pipe((0,s.U)(e=>e.map(e=>new a.y(e))))}function u(e,t={}){const n=(0,r.U)(t);return(0,i.U2M)(`${l}/${encodeURIComponent(e)}${n?"?"+n:""}`).pipe((0,s.U)(e=>new a.y(e)))}function d(e,t,n={},o="patch"){const c=(0,r.U)(n);return("patch"===o?i.r$K:i.gzd)(`${l}/${encodeURIComponent(e)}${c?"?"+c:""}`,"patch"===o?t:new a.y(t).toJSON()).pipe((0,s.U)(e=>new a.y(e)))}const p=(e,t)=>{var n;return null===(n=e)||void 0===n||delete n.status,e.id?d(e.id,e,t):function(e){return(0,i.v_Q)(`${l}`,new a.y(e).toJSON()).pipe((0,s.U)(e=>new a.y(e)))}(e)};function h(e,t,n,a={}){const c=(0,r.U)(Object.assign(Object.assign({},a),{state:n}));return(0,i.v_Q)(`${l}/${encodeURIComponent(e)}/guests/${t}/checkin${c?"?"+c:""}`,"").pipe((0,s.U)(e=>new o.OO(e)))}},2572:(e,t,n)=>{"use strict";n.d(t,{W9:()=>h});var i=n(1511),s=n(6073),r=n(6283),o=n(6756),a=n(4786),l=n(84),c=n(8012),u=n(2619);n(1548),n(5135),n(7388),n(5445),n(9524),n(8223),n(3530),n(4587),n(4608),n(3881),n(5980),n(5969);var d=n(6828);n(5842),n(33);var p=n(9236);let h=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({imports:[[i.ez,s.u5,s.UX,r.lN,o.c,a.LD,l.Bb,d.AV,p.p9,c.Kk]]}),e})()},5135:(e,t,n)=>{"use strict";n.d(t,{R:()=>a});var i=n(2619),s=n(6073),r=n(5980),o=n(1548);let a=(()=>{class e{constructor(){this.step=1,this.max=10,this.min=0}add(){this.value||(this.value=this.min||0),this.value+=this.ctrl_key?100*this.step:this.shift_key?10*this.step:this.step||1,this.value>this.max&&(this.value=this.max||10),this.setValue(this.value)}remove(){this.value||(this.value=this.min||0),this.value-=this.ctrl_key?100*this.step:this.shift_key?10*this.step:this.step||1,this.value<this.min&&(this.value=this.min||0),this.setValue(this.value)}setValue(e){this.value=e,this._onChange&&this._onChange(e)}writeValue(e){this.value=e}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouch=e}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Xpm({type:e,selectors:[["a-counter"]],inputs:{step:"step",max:"max",min:"min",render_fn:"render_fn"},features:[i._Bn([{provide:s.JU,useExisting:(0,i.Gpc)(()=>e),multi:!0}])],decls:9,vars:3,consts:[["counter","",1,"flex","items-center","text-base",3,"keydown.shift","keydown.control","keydown.meta","keyup.shift","keyup.control","keyup.meta"],["mat-icon-button","","name","remove","type","button",3,"disabled","click"],["value","",1,"p-1","text-center"],["mat-icon-button","","name","add","type","button",3,"disabled","click"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0),i.NdJ("keydown.shift",function(){return t.shift_key=!0},!1,i.Jf7)("keydown.control",function(){return t.ctrl_key=!0},!1,i.Jf7)("keydown.meta",function(){return t.ctrl_key=!0},!1,i.Jf7)("keyup.shift",function(){return t.shift_key=!1},!1,i.Jf7)("keyup.control",function(){return t.ctrl_key=!1},!1,i.Jf7)("keyup.meta",function(){return t.ctrl_key=!1},!1,i.Jf7),i.TgZ(1,"button",1),i.NdJ("click",function(){return t.remove()}),i.TgZ(2,"app-icon"),i._uU(3,"remove"),i.qZA(),i.qZA(),i.TgZ(4,"div",2),i._uU(5),i.qZA(),i.TgZ(6,"button",3),i.NdJ("click",function(){return t.add()}),i.TgZ(7,"app-icon"),i._uU(8,"add"),i.qZA(),i.qZA(),i.qZA()),2&e&&(i.xp6(1),i.Q6J("disabled",!t.value||t.value===t.min),i.xp6(4),i.Oqu((t.render_fn?t.render_fn(t.value):t.value)||"0"),i.xp6(1),i.Q6J("disabled",t.value===t.max))},directives:[r.lW,o.o],styles:["[value][_ngcontent-%COMP%]{min-width:3em}"]}),e})()},7388:(e,t,n)=>{"use strict";n.d(t,{Q:()=>q});var i=n(2619),s=n(6073),r=n(1522),o=n(1948),a=n(3975),l=n(6280),c=n(5090),u=n(7212),d=n(9477);function p(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only ".concat(arguments.length," present"));var n=(0,c.Z)(e);if(!(0,u.Z)(n))throw new RangeError("Invalid time value");var i=t||{},s=null==i.format?"extended":String(i.format),r=null==i.representation?"complete":String(i.representation);if("extended"!==s&&"basic"!==s)throw new RangeError("format must be 'extended' or 'basic'");if("date"!==r&&"time"!==r&&"complete"!==r)throw new RangeError("representation must be 'date', 'time', or 'complete'");var o="",a="",l="extended"===s?"-":"",p="extended"===s?":":"";if("time"!==r){var h=(0,d.Z)(n.getDate(),2),m=(0,d.Z)(n.getMonth()+1,2),f=(0,d.Z)(n.getFullYear(),4);o="".concat(f).concat(l).concat(m).concat(l).concat(h)}if("date"!==r){var g=n.getTimezoneOffset();if(0!==g){var _=Math.abs(g),v=(0,d.Z)(Math.floor(_/60),2),Z=(0,d.Z)(_%60,2),w=g<0?"+":"-";a="".concat(w).concat(v,":").concat(Z)}else a="Z";var x=(0,d.Z)(n.getHours(),2),b=(0,d.Z)(n.getMinutes(),2),y=(0,d.Z)(n.getSeconds(),2),q=""===o?"":"T",T=[x,b,y].join(p);o="".concat(o).concat(q).concat(T).concat(a)}return o}var h=n(4441),m=n(205),f=n(8125),g=n(5884),_=n(6488),v=n(6283),Z=n(6756),w=n(5812);const x=["*"];let b=(()=>{class e extends r.LF{format(e,t){return(0,h.Z)(e,"input"===t?"MMMM d, yyyy":"MMM yyyy")}}return e.\u0275fac=function(){let t;return function(n){return(t||(t=i.n5z(e)))(n||e)}}(),e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})();const y={parse:{dateInput:"LL"},display:{dateInput:"input",monthYearLabel:"MMM YYYY",dateA11yLabel:"LL",monthYearA11yLabel:"MMMM YYYY"}};let q=(()=>{class e extends _.K{constructor(){super(...arguments),this._from=(new Date).valueOf(),this.position="right",this.offset="bottom"}get from(){return new Date(this._from)||(0,m.Z)(new Date)}get until(){return new Date(this._to)||function(e,t){(0,l.Z)(2,arguments);var n=(0,o.Z)(t);return(0,a.Z)(e,12*n)}((0,f.Z)(new Date),1)}get date_string(){return(0,h.Z)(new Date(this.date),"DD MMM YYYY")}ngOnInit(){this.date=(new Date).toISOString()}setValue(e){const t=new Date(this.date);let n=(0,g.Z)(e,{hours:t.getHours(),minutes:t.getMinutes()}).valueOf();n<this.from.valueOf()&&(n=this.from.valueOf()),this.date=p(n||new Date),this._onChange&&this._onChange(n),this.show_tooltip=!1}writeValue(e){this.date=p(e||new Date),this.show_tooltip=!1}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouch=e}setDisabledState(e){this.disabled=e}}return e.\u0275fac=function(){let t;return function(n){return(t||(t=i.n5z(e)))(n||e)}}(),e.\u0275cmp=i.Xpm({type:e,selectors:[["a-date-field"]],inputs:{_from:["from","_from"],_to:["to","_to"],position:"position",offset:"offset",disabled:"disabled"},features:[i._Bn([{provide:r._A,useClass:b},{provide:r.sG,useValue:y},{provide:s.JU,useExisting:(0,i.Gpc)(()=>e),multi:!0}]),i.qOj],ngContentSelectors:x,decls:7,vars:6,consts:[["appearance","outline","overlay","",3,"click"],["matInput","",3,"ngModel","disabled","min","max","matDatepicker","ngModelChange"],["matSuffix","",3,"for"],["picker",""]],template:function(e,t){if(1&e){const e=i.EpF();i.F$t(),i.TgZ(0,"mat-form-field",0),i.NdJ("click",function(){return i.CHM(e),i.MAs(4).open()}),i.TgZ(1,"input",1),i.NdJ("ngModelChange",function(e){return t.setValue(e)}),i.qZA(),i._UZ(2,"mat-datepicker-toggle",2),i._UZ(3,"mat-datepicker",null,3),i.TgZ(5,"mat-error"),i.Hsn(6),i.qZA(),i.qZA()}if(2&e){const e=i.MAs(4);i.xp6(1),i.Q6J("ngModel",t.date)("disabled",t.disabled)("min",t.from)("max",t.until)("matDatepicker",e),i.xp6(1),i.Q6J("for",e)}},directives:[v.KE,Z.Nt,s.Fj,w.hl,s.JJ,s.On,w.nW,v.R9,w.Mq,v.TO],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}"]}),e})()},5445:(e,t,n)=>{"use strict";n.d(t,{B:()=>f});var i=n(2619),s=n(6073),r=n(672),o=["years","months","weeks","days","hours","minutes","seconds"];function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(arguments.length<1)throw new TypeError("1 argument required, but only ".concat(arguments.length," present"));var n=t.format||o,i=t.locale||r.Z,s=t.zero||!1,a=t.delimiter||" ",l=n.reduce(function(t,n){var r="x".concat(n.replace(/(^.)/,function(e){return e.toUpperCase()}));return"number"==typeof e[n]&&(s||e[n])?t.concat(i.formatDistance(r,e[n])):t},[]).join(a);return l}var l=n(4312),c=n(6283),u=n(4786),d=n(1511),p=n(1522);function h(e,t){if(1&e&&(i.TgZ(0,"mat-option",5),i._uU(1),i.qZA()),2&e){const e=t.$implicit;i.Q6J("value",e.id),i.xp6(1),i.hij(" ",e.name," ")}}const m=["*"];let f=(()=>{class e{constructor(){this.max=240,this.min=30,this.step=15,this.specialPreprops=[],this.duration=60}ngOnInit(){this.duration_options=this.generateDurationOptions(this.max,this.min,this.step)}ngOnChanges(e){(e.max||e.min||e.step||e.time)&&(this.duration_options=this.generateDurationOptions(this.max,this.min,this.step))}setValue(e){this.duration=e,this._onChange&&this._onChange(+e)}writeValue(e){this.duration=e}setDisabledState(e){this.disabled=e}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouch=e}generateDurationOptions(e,t,n){const i=[];let s=t;const r=this.time?l(this.time):null;for(const o of this.specialPreprops)i.push({id:o,name:r?`${r.add(o,"m").format("h:mm A")} (${a({hours:Math.floor(o/60),minutes:o%60})})`:`${a({hours:Math.floor(o/60),minutes:o%60})}`});for(;s<=e;)i.push({id:s,name:r?`${r.add(s,"m").format("h:mm A")} (${a({hours:Math.floor(s/60),minutes:s%60})})`:`${a({hours:Math.floor(s/60),minutes:s%60})}`}),s+=n;return i}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Xpm({type:e,selectors:[["a-duration-field"]],inputs:{max:"max",min:"min",step:"step",time:"time",disabled:"disabled",specialPreprops:"specialPreprops"},features:[i._Bn([{provide:s.JU,useExisting:(0,i.Gpc)(()=>e),multi:!0}]),i.TTD],ngContentSelectors:m,decls:7,vars:5,consts:[[1,"duration-field"],["appearance","outline"],[3,"value","disabled","placeholder","valueChange"],["select",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&(i.F$t(),i.TgZ(0,"div",0),i.TgZ(1,"mat-form-field",1),i.TgZ(2,"mat-select",2,3),i.NdJ("valueChange",function(e){return t.setValue(e)}),i.YNc(4,h,2,2,"mat-option",4),i.qZA(),i.TgZ(5,"mat-error"),i.Hsn(6),i.qZA(),i.qZA(),i.qZA()),2&e&&(i.uIk("disabled",t.disabled),i.xp6(2),i.Q6J("value",t.duration)("disabled",t.disabled)("placeholder",t.duration+" minutes"),i.xp6(2),i.Q6J("ngForOf",t.duration_options))},directives:[c.KE,u.gD,d.sg,c.TO,p.ey],styles:["[_nghost-%COMP%], mat-form-field[_ngcontent-%COMP%]{width:100%}"]}),e})()},9524:(e,t,n)=>{"use strict";n.d(t,{N:()=>U});var i=n(2619),s=n(6073),r=n(8223),o=n(5090),a=n(6280);function l(e){(0,a.Z)(1,arguments);var t=(0,o.Z)(e);return t.setSeconds(0,0),t}var c=n(4441),u=n(5884),d=n(999),p=n(4941),h=n(8774),m=n(205),f=n(8125),g=n(804),_=n(6283),v=n(6756),Z=n(5980),w=n(1548),x=n(1511),b=n(4786),y=n(1522);const q=["select"];function T(e,t){if(1&e&&(i.TgZ(0,"mat-option",9),i._uU(1),i.qZA()),2&e){const e=t.$implicit;i.Q6J("value",e.id),i.xp6(1),i.hij(" ",e.name," ")}}function A(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"mat-form-field",5),i.TgZ(1,"mat-select",6,7),i.NdJ("valueChange",function(t){return i.CHM(e),i.oxw().setValue(t)}),i.YNc(3,T,2,2,"mat-option",8),i.qZA(),i.qZA()}if(2&e){const e=i.oxw();i.xp6(1),i.Q6J("value",e.time)("disabled",e.disabled),i.xp6(2),i.Q6J("ngForOf",e.time_options)}}const O=["*"];let U=(()=>{class e extends r.KG{constructor(){super(...arguments),this.step=15,this.no_past_times=!0,this.date=(new Date).valueOf(),this.time=(0,c.Z)(new Date,"HH:mm")}ngOnInit(){this.show_select=!0,this._time_options=this.generateAvailableTimes(this.date,!this.no_past_times,this.step),this.timeout("hide",()=>this.show_select=!1)}ngOnChanges(e){(e.no_past_times||e.step)&&(this._time_options=this.generateAvailableTimes(this.date,!this.no_past_times,this.step))}get time_options(){const e=(this.time||"00:00").split(":"),t=(0,u.Z)(this.date,{hours:+e[0],minutes:+e[1]});return t.getMinutes()%15==0||this._time_options.find(e=>e.id===(0,c.Z)(t,"HH:mm"))||(this._time_options.push({name:`${(0,c.Z)(t,(0,r.hI)())}`,id:(0,c.Z)(t,"HH:mm")}),this._time_options.sort((e,t)=>`${e.id}`.localeCompare(`${t.id}`))),this._time_options}setValue(e){if(this.time=e,this._onChange){const e=(this.time||"00:00").split(":"),t=l((0,u.Z)(this.date,{hours:+e[0],minutes:+e[1]}));this._onChange(t.valueOf())}}writeValue(e){this.date=e||this.date;let t=l(this.date);t=(0,d.Z)(t,{nearestTo:5}),this.time=(0,c.Z)(t,"HH:mm"),this._time_options=this.generateAvailableTimes(this.date,!this.no_past_times,this.step)}setDisabledState(e){this.disabled=e}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouch=e}showSelect(){this.show_select=!0,this.timeout("on_shown",()=>{this.select_field&&(this.select_field.focus(),this.select_field.open(),this.subscription("listen_close",this.select_field.openedChange.subscribe(e=>{e||(this.show_select=!1)})))})}generateAvailableTimes(e,t,n=15){const i=new Date;let s=new Date(e);const o=[];t||!(0,p.Z)(s,i)&&(0,h.Z)(s,i)?s=(0,m.Z)(s):(0,h.Z)(s,i)&&(s=i),s=(0,d.Z)(s,{nearestTo:n});const a=(0,f.Z)(s);for(;(0,h.Z)(a,s);)o.push({name:`${(0,c.Z)(s,(0,r.hI)())}`,id:(0,c.Z)(s,"HH:mm")}),s=(0,g.Z)(s,n);return o}}return e.\u0275fac=function(){let t;return function(n){return(t||(t=i.n5z(e)))(n||e)}}(),e.\u0275cmp=i.Xpm({type:e,selectors:[["a-time-field"]],viewQuery:function(e,t){if(1&e&&i.Gf(q,5),2&e){let e;i.iGM(e=i.CRH())&&(t.select_field=e.first)}},inputs:{step:"step",disabled:"disabled",no_past_times:"no_past_times"},features:[i._Bn([{provide:s.JU,useExisting:(0,i.Gpc)(()=>e),multi:!0}]),i.qOj,i.TTD],ngContentSelectors:O,decls:8,vars:5,consts:[["appearance","outline",3,"keydown.enter"],["matInput","","type","time",3,"disabled","ngModel","ngModelChange"],["mat-icon-button","","matSuffix","",1,"relative","top-1","-right-1",3,"click"],[1,"text-2xl","text-black","text-opacity-50"],["appearance","outline",4,"ngIf"],["appearance","outline"],[3,"value","disabled","valueChange"],["select",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&(i.F$t(),i.TgZ(0,"mat-form-field",0),i.NdJ("keydown.enter",function(){return t.showSelect()}),i.TgZ(1,"input",1),i.NdJ("ngModelChange",function(e){return t.setValue(e)}),i.qZA(),i.TgZ(2,"button",2),i.NdJ("click",function(){return t.showSelect()}),i.TgZ(3,"app-icon",3),i._uU(4," arrow_drop_down "),i.qZA(),i.qZA(),i.TgZ(5,"mat-error"),i.Hsn(6),i.qZA(),i.qZA(),i.YNc(7,A,4,3,"mat-form-field",4)),2&e&&(i.Udp("display",t.show_select?"none":""),i.xp6(1),i.Q6J("disabled",t.disabled)("ngModel",t.time),i.xp6(6),i.Q6J("ngIf",t.show_select))},directives:[_.KE,v.Nt,s.Fj,s.JJ,s.On,Z.lW,_.R9,w.o,_.TO,x.O5,b.gD,x.sg,y.ey],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}"]}),e})()},3881:(e,t,n)=>{"use strict";n.d(t,{d:()=>U});var i=n(2619),s=n(6073),r=n(5959),o=n(878),a=n(3148),l=n(7701),c=n(8720),u=n(4689),d=n(7727),p=n(9996),h=n(8223),m=n(4587),f=n(6283),g=n(6756),_=n(5205),v=n(84),Z=n(1548),w=n(1511),x=n(7806),b=n(1522);const y=["input"];function q(e,t){1&e&&i._UZ(0,"mat-spinner",11)}function T(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"mat-option",12),i.NdJ("click",function(){const t=i.CHM(e).$implicit,n=i.oxw();return n.setValue(t),n.blurInput()}),i.TgZ(1,"div",13),i._uU(2),i.qZA(),i.TgZ(3,"div",14),i._uU(4),i.qZA(),i.qZA()}if(2&e){const e=t.$implicit;i.xp6(2),i.Oqu(e.name),i.xp6(2),i.hij(" ",e.email," ")}}function A(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"mat-option",15),i.TgZ(1,"div",16),i.NdJ("mousedown",function(e){return e.stopPropagation(),e.preventDefault()})("touchstart",function(e){return e.stopPropagation(),e.preventDefault()})("click",function(t){i.CHM(e);const n=i.oxw();return n.setValue(n.search_str),t.stopPropagation(),t.preventDefault()}),i.TgZ(2,"div",17),i._uU(3),i.qZA(),i.qZA(),i.qZA()}if(2&e){const e=i.oxw();i.xp6(3),i.hij(' Add external attendee "',e.search_str,'" ')}}function O(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"mat-option",18),i.NdJ("click",function(){return i.CHM(e),i.oxw().empty_fn()}),i._uU(1),i.qZA()}if(2&e){const e=i.oxw();i.Q6J("disabled",!e.empty_fn),i.xp6(1),i.AsE(" ",e.search_str?"No users found.":""," ",e.error," ")}}let U=(()=>{class e extends h.KG{constructor(){super(...arguments),this.error="",this.query_fn=e=>(0,m.VE)(e),this.search$=new r.xQ,this.search_results$=this.search$.pipe((0,l.b)(400),(0,c.x)(),(0,u.w)(e=>(this.loading=!0,this.options&&this.options.length>0?(0,o.of)(this.options):e.length>=3?this.guests?(0,a.D)([(0,m.VE)(e),(0,m.jf)(e)]):this.query_fn(e):(0,o.of)([]))),(0,d.K)(e=>(0,o.of)([])),(0,p.U)(e=>{this.loading=!1,e=(0,h.xH)(e);const t=(this.search_str||"").toLowerCase();return e.filter(e=>!this.filter||this.filter(e,t))})),this.cancelReset=()=>this.clearTimeout("reset"),this.blurInput=()=>{this.timeout("blur",()=>{var e,t;return null===(t=null===(e=this._input_el)||void 0===e?void 0:e.nativeElement)||void 0===t?void 0:t.blur()})}}ngOnInit(){this.subscription("search_results",this.search_results$.subscribe(e=>this.user_list=e))}resetSearchString(){this.timeout("reset",()=>{var e;return this.search_str=(null===(e=this.active_user)||void 0===e?void 0:e.name)||""},100)}setValue(e,t){"string"==typeof e&&e===this.search_str&&(e=new m.n5({name:(this.search_str||t||"").split("@")[0],email:this.search_str||t||""})),e instanceof m.n5&&(this.active_user=e,this._onChange&&this._onChange(e),this.resetSearchString())}writeValue(e){this.active_user=e,this.resetSearchString()}setDisabledState(e){this.disabled=e}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouch=e}}return e.\u0275fac=function(){let t;return function(n){return(t||(t=i.n5z(e)))(n||e)}}(),e.\u0275cmp=i.Xpm({type:e,selectors:[["a-user-search-field"]],viewQuery:function(e,t){if(1&e&&i.Gf(y,5,i.SBq),2&e){let e;i.iGM(e=i.CRH())&&(t._input_el=e.first)}},inputs:{disabled:"disabled",placeholder:"placeholder",options:"options",guests:"guests",error:"error",validate:"validate",empty_fn:"empty_fn",filter:"filter",query_fn:"query_fn"},features:[i._Bn([{provide:s.JU,useExisting:(0,i.Gpc)(()=>e),multi:!0}]),i.qOj],decls:12,vars:8,consts:[["form-field","",1,"user-search-field","text-black"],["overlay","","appearance","outline"],["matInput","","keyboard","","name","user-search",3,"ngModel","disabled","placeholder","matAutocomplete","ngModelChange","keyup.enter","blur","focus"],["input",""],["matPrefix","",1,"text-2xl","relative"],["matSuffix","","diameter","16",4,"ngIf"],[3,"optionSelected"],["auto","matAutocomplete"],[3,"click",4,"ngFor","ngForOf"],["class","relative pointer-events-none",4,"ngIf"],[3,"disabled","click",4,"ngIf"],["matSuffix","","diameter","16"],[3,"click"],[1,"leading-tight"],[1,"text-xs","text-black","opacity-60"],[1,"relative","pointer-events-none"],[1,"absolute","inset-0","px-4","pointer-events-auto",3,"mousedown","touchstart","click"],[1,"pointer-events-none"],[3,"disabled","click"]],template:function(e,t){if(1&e&&(i.TgZ(0,"div",0),i.TgZ(1,"mat-form-field",1),i.TgZ(2,"input",2,3),i.NdJ("ngModelChange",function(e){return t.search_str=e})("ngModelChange",function(e){return t.search$.next(e||"")})("keyup.enter",function(){return t.validate&&t.validate(t.search_str)?t.setValue(t.search_str):""})("blur",function(){return t.resetSearchString()})("focus",function(){return t.cancelReset()}),i.qZA(),i.TgZ(4,"app-icon",4),i._uU(5,"search"),i.qZA(),i.YNc(6,q,1,0,"mat-spinner",5),i.qZA(),i.TgZ(7,"mat-autocomplete",6,7),i.NdJ("optionSelected",function(e){return t.setValue(e.option.value)}),i.YNc(9,T,5,2,"mat-option",8),i.YNc(10,A,4,1,"mat-option",9),i.YNc(11,O,2,3,"mat-option",10),i.qZA(),i.qZA()),2&e){const e=i.MAs(8);i.xp6(2),i.Q6J("ngModel",t.search_str)("disabled",t.disabled)("placeholder",t.placeholder||"Search for user...")("matAutocomplete",e),i.xp6(4),i.Q6J("ngIf",t.loading),i.xp6(3),i.Q6J("ngForOf",t.user_list),i.xp6(1),i.Q6J("ngIf",t.search_str&&t.validate&&t.validate(t.search_str)),i.xp6(1),i.Q6J("ngIf",!(null!=t.user_list&&t.user_list.length)&&(t.search_str||t.error))}},directives:[f.KE,g.Nt,_.U,s.Fj,v.ZL,s.JJ,s.On,Z.o,f.qo,w.O5,v.XC,w.sg,x.$g,f.R9,b.ey],styles:["[_nghost-%COMP%], mat-form-field[_ngcontent-%COMP%]{width:100%}app-icon[_ngcontent-%COMP%]{top:.15em;left:-.15em}"]}),e})()},4587:(e,t,n)=>{"use strict";n.d(t,{Y:()=>C,rW:()=>d,U9:()=>a.U9,n5:()=>o.n5,en:()=>a.en,n2:()=>E,jf:()=>$,VE:()=>Y,pP:()=>D,w0:()=>Q}),n(8012);var i=n(2619),s=n(4608),r=n(8223),o=n(7271),a=n(1167);function l(e,t){if(1&e&&(i.TgZ(0,"main",6),i._UZ(1,"user-form",7),i.qZA()),2&e){const e=i.oxw();i.xp6(1),i.Q6J("form",e.form)}}function c(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"footer",8),i.TgZ(1,"button",9),i._uU(2,"Cancel"),i.qZA(),i.TgZ(3,"button",10),i.NdJ("click",function(){return i.CHM(e),i.oxw().saveChanges()}),i._uU(4,"Save"),i.qZA(),i.qZA()}}function u(e,t){1&e&&(i.TgZ(0,"main",11),i._UZ(1,"mat-spinner",12),i.TgZ(2,"p"),i._uU(3,"Saving attendee..."),i.qZA(),i.qZA())}let d=(()=>{class e extends r.KG{constructor(e){super(),this._data=e,this.event=new i.vpe}ngOnInit(){this.user=this._data.user||{},this.form=(0,a.HO)(this.user)}saveChanges(){if(this.form.markAllAsTouched(),this.form.valid){const e=new o.n5(Object.assign(Object.assign({},this.form.value),{type:"external"}));this.event.emit({reason:"done",metadata:e})}}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(s.WI))},e.\u0275cmp=i.Xpm({type:e,selectors:[["new-user-modal"]],outputs:{event:"event"},features:[i.qOj],decls:11,vars:4,consts:[["mat-dialog-title","",1,"heading"],[1,"flex-1"],["mat-icon-button","","mat-dialog-close",""],["class","flex flex-col items-center w-full p-2",4,"ngIf","ngIfElse"],["class","flex items-center justify-center w-full p-2 border-t border-gray-300 space-x-2",4,"ngIf"],["load_state",""],[1,"flex","flex-col","items-center","w-full","p-2"],[3,"form"],[1,"flex","items-center","justify-center","w-full","p-2","border-t","border-gray-300","space-x-2"],["mat-button","","mat-dialog-close","",1,"inverse"],["mat-button","",3,"click"],[1,"flex","flex-col","items-center","w-full","p-2","space-y-2"],["diameter","32"]],template:function(e,t){if(1&e&&(i.TgZ(0,"header"),i.TgZ(1,"div",0),i._uU(2),i.qZA(),i._UZ(3,"div",1),i.TgZ(4,"button",2),i.TgZ(5,"app-icon"),i._uU(6,"close"),i.qZA(),i.qZA(),i.qZA(),i.YNc(7,l,2,1,"main",3),i.YNc(8,c,5,0,"footer",4),i.YNc(9,u,4,0,"ng-template",null,5,i.W1O)),2&e){const e=i.MAs(10);i.xp6(2),i.hij(" ",null!=t.user&&t.user.id?"Edit":"Add"," External Attendee "),i.xp6(5),i.Q6J("ngIf",!t.loading)("ngIfElse",e),i.xp6(1),i.Q6J("ngIf",!t.loading)}},styles:["main[_ngcontent-%COMP%]{min-height:20em!important;width:100%}footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:8em}"]}),e})();var p=n(1511),h=n(6073),m=n(6283),f=n(6756),g=n(9236);function _(e,t){if(1&e&&(i.TgZ(0,"div",3),i.TgZ(1,"label",4),i._uU(2," Name"),i.TgZ(3,"span"),i._uU(4,"*"),i.qZA(),i._uU(5,": "),i.qZA(),i.TgZ(6,"mat-form-field",5),i._UZ(7,"input",6),i.TgZ(8,"mat-error"),i._uU(9,"Name is required"),i.qZA(),i.qZA(),i.qZA()),2&e){const e=i.oxw(2);i.xp6(1),i.ekj("error",e.hasError("name"))}}function v(e,t){if(1&e&&(i.TgZ(0,"div",3),i.TgZ(1,"label",7),i._uU(2," Email"),i.TgZ(3,"span"),i._uU(4,"*"),i.qZA(),i._uU(5,": "),i.qZA(),i.TgZ(6,"mat-form-field",5),i._UZ(7,"input",8),i.TgZ(8,"mat-error"),i._uU(9,"A valid email is required"),i.qZA(),i.qZA(),i.qZA()),2&e){const e=i.oxw(2);i.xp6(1),i.ekj("error",e.hasError("email"))}}function Z(e,t){if(1&e&&(i.TgZ(0,"div",3),i.TgZ(1,"label",9),i._uU(2," Organisation"),i.TgZ(3,"span"),i._uU(4,"*"),i.qZA(),i._uU(5,": "),i.qZA(),i.TgZ(6,"mat-form-field",5),i._UZ(7,"input",10),i.TgZ(8,"mat-error"),i._uU(9,"Organisation is required"),i.qZA(),i.qZA(),i.qZA()),2&e){const e=i.oxw(2);i.xp6(1),i.ekj("error",e.hasError("organisation"))}}function w(e,t){if(1&e&&(i.TgZ(0,"div",3),i.TgZ(1,"label",11),i._uU(2," Phone: "),i.qZA(),i.TgZ(3,"mat-form-field",5),i._UZ(4,"input",12),i.TgZ(5,"mat-error"),i._uU(6,"Phone format is invalid"),i.qZA(),i.qZA(),i.qZA()),2&e){const e=i.oxw(2);i.xp6(1),i.ekj("error",e.hasError("phone"))}}function x(e,t){1&e&&(i.TgZ(0,"div",3),i.TgZ(1,"mat-checkbox",13),i._uU(2," Assistance required "),i.qZA(),i.qZA())}function b(e,t){1&e&&(i.TgZ(0,"div",3),i.TgZ(1,"mat-checkbox",14),i._uU(2," Visit expected "),i.qZA(),i.qZA())}function y(e,t){if(1&e&&(i.TgZ(0,"form",1),i.YNc(1,_,10,2,"div",2),i.YNc(2,v,10,2,"div",2),i.YNc(3,Z,10,2,"div",2),i.YNc(4,w,7,2,"div",2),i.YNc(5,x,3,0,"div",2),i.YNc(6,b,3,0,"div",2),i.qZA()),2&e){const e=i.oxw();i.Q6J("formGroup",e.form),i.xp6(1),i.Q6J("ngIf",e.form.controls.name),i.xp6(1),i.Q6J("ngIf",e.form.controls.email),i.xp6(1),i.Q6J("ngIf",e.form.controls.organisation),i.xp6(1),i.Q6J("ngIf",e.form.controls.phone),i.xp6(1),i.Q6J("ngIf",e.form.controls.assistance_required),i.xp6(1),i.Q6J("ngIf",e.form.controls.visit_expected)}}let q=(()=>{class e{hasError(e){return this.form.controls[e].invalid&&this.form.controls[e].touched}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Xpm({type:e,selectors:[["user-form"]],inputs:{form:"form"},decls:1,vars:1,consts:[["user-form","",3,"formGroup",4,"ngIf"],["user-form","",3,"formGroup"],["class","field",4,"ngIf"],[1,"field"],["for","name"],["appearance","outline"],["matInput","","name","name","placeholder","Name","formControlName","name"],["for","email"],["matInput","","name","email","placeholder","Email Address","formControlName","email"],["for","org"],["matInput","","name","org","placeholder","Organisation","formControlName","organisation"],["for","phone"],["matInput","","name","phone","type","tel","placeholder","Phone","formControlName","phone"],["name","assistance-required","color","primary","formControlName","assistance_required"],["name","visit-expected","color","primary","formControlName","visit_expected"]],template:function(e,t){1&e&&i.YNc(0,y,7,7,"form",0),2&e&&i.Q6J("ngIf",t.form)},directives:[p.O5,h._Y,h.JL,h.sg,m.KE,f.Nt,h.Fj,h.JJ,h.u,m.TO,g.oG],styles:[".field[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}mat-form-field[_ngcontent-%COMP%]{width:100%}"]}),e})();var T=n(5980),A=n(1548),O=n(7806);i.B6R(d,[s.uh,T.lW,s.ZT,A.o,p.O5,q,O.$g],[]);var U=n(4914);class C{constructor(e={}){this.type=e.type||e.location||"other",this.position=e.position||e.map_id||{x:e.x/e.map_width||0,y:e.y/e.map_height||0},this.variance=e.variance||0,this.last_seen=e.last_seen||(0,U.Z)(new Date),this.level=e.level,this.building=e.building,this.at_location=!!e.at_location,this.coordinates_from=e.coordinates_from||"top-left"}}var I=n(6817),k=n(9996),N=n(9005),M=n(2775);const J="/api/staff/v1/guests";function $(e){const t=(0,M.U)({q:e});return(0,I.U2M)(`${J}${e?"?"+t:""}`).pipe((0,k.U)(e=>e.map(e=>new o.OO(e))))}function D(e){return(0,I.U2M)(`${J}/${encodeURIComponent(e)}`).pipe((0,k.U)(e=>new o.OO(e)))}function E(e){return(0,I.U2M)(`${J}/${encodeURIComponent(e)}/meetings`).pipe((0,k.U)(e=>e.map(e=>new N.y(e))))}const S="/api/staff/v1/people";function Y(e){const t=(0,M.U)({q:e});return(0,I.U2M)(`${S}${e?"?"+t:""}`).pipe((0,k.U)(e=>e.map(e=>new o.mO(e))))}function Q(e){return(0,I.U2M)(`${S}/${encodeURIComponent(e)}`).pipe((0,k.U)(e=>new o.mO(e)))}}}]);
//# sourceMappingURL=default-libs_events_src_index_ts-libs_form-fields_src_index_ts.js.map