{"version":3,"file":"default-libs_catering_src_index_ts.js","mappings":"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","names":["i0","$event","i_r2","_r1","index","ctx_r2","charge_codes","removeCode","ChargeCodeListModalComponent_main_6_div_1_Template","trackByFn","_r4","addCodesFromFile","newCode","saveChargeCodes","ChargeCodeListModalComponent","constructor","_state","_dialog_ref","this","loading","ngOnInit","_this","_asyncToGenerator","pipe","take","toPromise","push","splice","event","target","file","files","reader","FileReader","readAsText","addEventListener","evt","list","csvToJson","srcElement","result","code","unique","value","_","notifyError","_this2","cleaned_codes","filter","trim","saveSettings","close","idx","item","static","__ngFactoryType__","i1","i2","core","VBU","selectors","decls","vars","consts","template","rf","ctx","ChargeCodeListModalComponent_main_6_Template","ChargeCodeListModalComponent_footer_7_Template","ChargeCodeListModalComponent_ng_template_8_Template","load_state_r5","SharedCateringModule","$C","G2t","CommonModule","MatMenuModule","MatTabsModule","MatAutocompleteModule","MatDialogModule","MatCheckboxModule","MatRadioModule","MatTooltipModule","FormsModule","ReactiveFormsModule","ComponentsModule","MatFormFieldModule","FormFieldsModule","MatProgressSpinnerModule","ctx_r1","handleFileEvent","downloadTemplate","CateringImportMenuModalComponent","EventEmitter","element","length","fileReader","e","data","emit","reason","metadata","type","toLowerCase","map","i","CateringItem","options","tags","id","name","group","category","multiple","unit_price","downloadFile","_angular_core__WEBPACK_IMPORTED_MODULE_1__","outputs","CateringImportMenuModalComponent_button_3_Template","CateringImportMenuModalComponent_main_4_Template","CateringImportMenuModalComponent_ng_template_5_Template","load_state_r3","form","controls","invalid","touched","auto_r3","item_r6","_r5","$implicit","removeTag","CateringItemModalComponent_form_4_div_4_mat_chip_row_6_Template","addTag","tag_list","chipList_r7","separators","CateringItemModalComponent_form_4_div_2_Template","CateringItemModalComponent_form_4_div_3_Template","CateringItemModalComponent_form_4_div_4_Template","CateringItemModalComponent_form_4_div_5_Template","CateringItemModalComponent_form_4_div_6_Template","CateringItemModalComponent_form_4_div_27_Template","description","tmp_9_0","get","hasTag","_c0","renderPercent","images","_r8","saveChanges","dirty","option_r9","CateringItemModalComponent","_data","categories","tag","includes","FormGroup","FormControl","Validators","required","accept_points","discount_cap","ENTER","COMMA","SPACE","markAsDirty","input","setValue","existing_tag","indexOf","randomInt","MAT_DIALOG_DATA","_angular_core__WEBPACK_IMPORTED_MODULE_3__","i18n_0","$localize","CateringItemModalComponent_button_3_Template","CateringItemModalComponent_form_4_Template","CateringItemModalComponent_footer_5_Template","CateringItemModalComponent_ng_template_6_Template","CateringItemModalComponent_mat_option_10_Template","load_state_r10","row_r2","row","setEnabled","isEnabled","data_r4","symbol","row_r6","addOption","editItem","removeItem","show_children","can_edit","menu_r7","row_r10","editOption","_r11","removeOption","CateringMenuComponent_ng_template_7_div_0_button_7_Template","CateringMenuComponent_ng_template_7_div_0_button_8_Template","CateringMenuComponent_ng_template_7_div_0_Template","CateringMenuComponent","filters","_orders","_catering","is_editable","menu","option","deleteOption","addItem","deleteItem","hide_for_zones","zone","state","updateItem","_angular_core__WEBPACK_IMPORTED_MODULE_4__","CateringMenuComponent_ng_template_1_Template","CateringMenuComponent_ng_template_3_Template","CateringMenuComponent_ng_template_5_Template","CateringMenuComponent_ng_template_7_Template","_c5","active_template_r12","_c1","_c2","_c3","price_template_r13","_c4","actions_template_r14","search","child_template_r15","ctx_r0","auto_r2","CateringItemOptionModalComponent_form_4_div_1_Template","CateringItemOptionModalComponent_form_4_div_2_Template","CateringItemOptionModalComponent_form_4_div_3_Template","CateringItemOptionModalComponent_form_4_div_4_Template","_r3","option_r4","CateringItemOptionModalComponent","types","new_option","parent","concat","CateringItemOptionModalComponent_button_3_Template","CateringItemOptionModalComponent_form_4_Template","CateringItemOptionModalComponent_footer_5_Template","CateringItemOptionModalComponent_ng_template_6_Template","CateringItemOptionModalComponent_mat_option_10_Template","opt_r3","CateringOrderItemComponent_ng_container_0_ng_container_14_div_1_Template","toggle","CateringOrderItemComponent_ng_container_0_ng_container_14_Template","active","amount","quantity","option_list","ACTIVE_ITEMS","Set","CateringOrderItemComponent","item_key","order_id","has","delete","add","_angular_core__WEBPACK_IMPORTED_MODULE_0__","inputs","attrs","CateringOrderItemComponent_ng_container_0_Template","data_r1","time_format","date","date_end","CateringOrderListComponent_ng_template_6_span_2_Template","space","display_name","CateringOrderListComponent_ng_template_8_span_3_Template","data_r5","organiser","host","email","status_r7","_r6","row_r8","updateStatus","colour","CateringOrderListComponent_ng_template_10_button_8_Template","tmp_11_0","status","data_r9","menu_r10","tmp_13_0","statuses","row_r12","notes","CateringOrderListComponent_ng_template_12_ng_template_4_Template","notes_template_r13","row_r15","item_r14","CateringOrderListComponent_ng_template_14_ul_0_li_1_Template","items","CateringOrderListComponent_ng_template_14_ul_0_Template","CateringOrderListComponent","AsyncHandler","_settings","CATERING_STATUSES","find","super","order_list","filtered","_ref","order","s","timeout","_x","_x2","apply","arguments","startPolling","ngOnDestroy","stopPolling","undefined","_angular_core__WEBPACK_IMPORTED_MODULE_6__","features","CateringOrderListComponent_ng_template_2_Template","CateringOrderListComponent_ng_template_4_Template","CateringOrderListComponent_ng_template_6_Template","CateringOrderListComponent_ng_template_8_Template","CateringOrderListComponent_ng_template_10_Template","CateringOrderListComponent_ng_template_12_Template","CateringOrderListComponent_ng_template_14_Template","_c8","state_template_r16","time_template_r17","location_template_r18","host_template_r19","_c6","status_template_r20","_c7","actions_template_r21","child_template_r22","item_r2","updateItemQuantity","CateringOrderModalComponent_div_0_ng_container_1_ng_container_2_mat_tab_1_div_2_div_4_Template","CateringOrderModalComponent_div_0_ng_container_1_ng_container_2_mat_tab_1_div_2_a_counter_8_Template","CateringOrderModalComponent_div_0_ng_container_1_ng_container_2_mat_tab_1_div_2_div_9_Template","CateringOrderModalComponent_div_0_ng_container_1_ng_container_2_mat_tab_1_div_2_Template","cat_r5","menu_items","CateringOrderModalComponent_div_0_ng_container_1_ng_container_2_mat_tab_1_Template","CateringOrderModalComponent_div_0_ng_container_1_ng_container_2_Template","CateringOrderModalComponent_div_0_ng_container_1_Template","show_order_details","order_details_r6","_r7","item_count","saveOrder","CateringOrderModalComponent_footer_1_ng_container_1_Template","CateringOrderModalComponent_footer_1_ng_template_2_Template","order_actions_r9","optionsFor","item_r11","CateringOrderModalComponent_ng_template_4_div_4_div_4_Template","_r10","total_cost","CateringOrderModalComponent_ng_template_4_div_4_Template","CateringOrderModalComponent","_org","currency_code","CateringOrder","rules","getCateringConfig","level","parent_id","subscribe","cat","cateringItemAvailable","updateMenuQuantities","choose_options","old_item","itm","reduce","c","o","opt","selectOptions","then","new_item","options_string","sort","a","b","localeCompare","join","confirmOrder","_angular_core__WEBPACK_IMPORTED_MODULE_5__","CateringOrderModalComponent_div_0_Template","CateringOrderModalComponent_footer_1_Template","CateringOrderModalComponent_ng_template_2_Template","CateringOrderModalComponent_ng_template_4_Template","load_state_r12","opt_r4","CateringOrderOptionsModalComponent_div_7_ng_container_4_mat_radio_button_5_div_4_Template","group_r2","updateGroupOption","CateringOrderOptionsModalComponent_div_7_ng_container_4_mat_radio_button_5_Template","opt_r6","option_state","CateringOrderOptionsModalComponent_div_7_ng_template_5_mat_checkbox_0_div_4_Template","CateringOrderOptionsModalComponent_div_7_ng_template_5_mat_checkbox_0_Template","CateringOrderOptionsModalComponent_div_7_ng_container_4_Template","CateringOrderOptionsModalComponent_div_7_ng_template_5_Template","multi_options_r7","CateringOrderOptionsModalComponent","groups","group_list","saveOptions","CateringOrderOptionsModalComponent_div_7_Template","CateringOrdersService","_filters","getValue","next","_poll","BehaviorSubject","_loading","orders","combineLatest","debounceTime","switchMap","zones","start","getUnixTime","startOfDay","Date","now","end","endOfDay","queryEvents","zone_ids","period_start","period_end","catchError","of","events","flatten","valid_catering","format","deliver_at","tap","shareReplay","asObservable","checkOrder","subscription","delay","interval","valueOf","clearInterval","updated_order","catering","extension_data","CalendarEvent","system_id","resources","system","booking","updateEventMetadata","_angular_core__WEBPACK_IMPORTED_MODULE_18__","jDH","factory","ɵfac","providedIn","CateringStateService","building","_menu","_dialog","_updated","_currency","_change","currency","settings","active_building","showMetadata","details","post","require_notes","availability","disabled_rooms","bld","getCateringForZone","manageCateringOrder","ref","open","Promise","race","componentInstance","first","afterClosed","_this3","findIndex","updateMenu","_this4","_this5","_this6","openConfirmModal","title","content","icon","class","_this7","editConfig","_this8","config","AttachedResourceConfigModalComponent","saveNotes","updateConfig","importMenu","_this9","updated_menu","catch","notifySuccess","zone_id","updateMetadata","_this10","old_settings","Array","addItemToOrder","match","i3","_angular_core__WEBPACK_IMPORTED_MODULE_23__"],"ignoreList":[],"sourceRoot":"webpack:///","sources":["./libs/catering/src/lib/charge-code-list-modal.component.ts","./libs/catering/src/lib/catering.module.ts","./libs/catering/src/lib/catering-import-menu-modal.component.ts","./libs/catering/src/lib/catering-item-modal.component.ts","./libs/catering/src/lib/catering-menu.component.ts","./libs/catering/src/lib/catering-option-modal.component.ts","./libs/catering/src/lib/catering-order-item.component.ts","./libs/catering/src/lib/catering-order-list.component.ts","./libs/catering/src/lib/catering-order-modal.component.ts","./libs/catering/src/lib/catering-order-options-modal.component.ts","./libs/catering/src/lib/catering-orders.service.ts","./libs/catering/src/lib/catering-state.service.ts","./libs/catering/src/lib/catering.vars.ts"],"sourcesContent":["import { Component } from '@angular/core';\nimport { MatDialogRef } from '@angular/material/dialog';\nimport { csvToJson, notifyError, unique } from '@placeos/common';\nimport { take } from 'rxjs/operators';\nimport { CateringStateService } from './catering-state.service';\n\n@Component({\n    selector: 'charge-code-list-modal',\n    template: `\n        <header>\n            <h2>Edit Charge Codes</h2>\n            <button icon mat-dialog-close>\n                <app-icon>close</app-icon>\n            </button>\n        </header>\n        <main\n            *ngIf=\"!loading; else load_state\"\n            class=\"overflow-auto max-h-[65vh] min-h-[20rem] flex flex-col\"\n        >\n            <div\n                class=\"flex items-center space-x-2 w-full hover:bg-neutral px-2\"\n                *ngFor=\"\n                    let code of charge_codes;\n                    let i = index;\n                    trackBy: trackByFn\n                \"\n            >\n                <mat-form-field appearance=\"outline\" class=\"h-14 flex-1\">\n                    <input\n                        matInput\n                        [(ngModel)]=\"charge_codes[i]\"\n                        placeholder=\"Charge Code\"\n                    />\n                </mat-form-field>\n                <button icon (click)=\"removeCode(i)\">\n                    <app-icon>delete</app-icon>\n                </button>\n            </div>\n        </main>\n        <footer\n            class=\"flex items-center p-2 space-x-2 border-t border-base-200\"\n            *ngIf=\"!loading\"\n        >\n            <button btn matRipple class=\"w-48 inverse relative\">\n                Import Codes\n                <input\n                    class=\"opacity-0 absolute inset-0\"\n                    type=\"file\"\n                    (change)=\"addCodesFromFile($event)\"\n                />\n            </button>\n            <button btn matRipple class=\"w-48\" (click)=\"newCode()\">\n                Add Code\n            </button>\n            <button btn matRipple class=\"w-48\" (click)=\"saveChargeCodes()\">\n                Save Changes\n            </button>\n        </footer>\n        <ng-template #load_state>\n            <main\n                class=\"flex flex-col items-center justify-center p-20 space-y-2\"\n            >\n                <mat-spinner diameter=\"32\"></mat-spinner>\n                <p>Saving changes to charge codes...</p>\n            </main>\n        </ng-template>\n    `,\n    styles: [``],\n})\nexport class ChargeCodeListModalComponent {\n    public charge_codes: string[] = [];\n    public loading = false;\n\n    constructor(\n        private _state: CateringStateService,\n        private _dialog_ref: MatDialogRef<ChargeCodeListModalComponent>\n    ) {}\n\n    public async ngOnInit() {\n        this.charge_codes =\n            (await this._state.charge_codes.pipe(take(1)).toPromise()) || [];\n    }\n\n    public newCode() {\n        this.charge_codes.push('');\n    }\n\n    public removeCode(index: number) {\n        this.charge_codes.splice(index, 1);\n    }\n\n    /**\n     * Load CSV file and populate the code list with the contents\n     * @param event File input field event\n     */\n    public addCodesFromFile(event) {\n        /* istanbul ignore else */\n        if (event.target) {\n            const file = event.target.files[0];\n            /* istanbul ignore else */\n            if (file) {\n                const reader = new FileReader();\n                reader.readAsText(file, 'UTF-8');\n                reader.addEventListener('load', (evt) => {\n                    const list =\n                        csvToJson((evt.srcElement as any).result) || [];\n                    for (const { code, description } of list) {\n                        this.charge_codes.push(code);\n                    }\n                    this.charge_codes = unique(this.charge_codes);\n                    event.target.value = '';\n                });\n                reader.addEventListener('error', (_) =>\n                    notifyError('Error reading file.')\n                );\n            }\n        }\n    }\n\n    public async saveChargeCodes() {\n        this.loading = true;\n        const cleaned_codes = this.charge_codes.filter((_) => _ && _.trim());\n        await this._state.saveSettings({ charge_codes: cleaned_codes });\n        this._dialog_ref.close();\n    }\n\n    public trackByFn(idx: number, item: any) {\n        return idx;\n    }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule, Type } from '@angular/core';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { MatAutocompleteModule } from '@angular/material/autocomplete';\nimport { MatCheckboxModule } from '@angular/material/checkbox';\nimport { MatDialogModule } from '@angular/material/dialog';\nimport { MatMenuModule } from '@angular/material/menu';\nimport { MatTabsModule } from '@angular/material/tabs';\nimport { MatRadioModule } from '@angular/material/radio';\nimport { MatTooltipModule } from '@angular/material/tooltip';\nimport { MatFormFieldModule } from '@angular/material/form-field';\n\nimport { FormFieldsModule } from '@placeos/form-fields';\n\nimport { ComponentsModule } from 'libs/components/src/lib/components.module';\n\nimport { CateringItemModalComponent } from './catering-item-modal.component';\nimport { CateringMenuComponent } from './catering-menu.component';\nimport { CateringItemOptionModalComponent } from './catering-option-modal.component';\nimport { CateringOrderItemComponent } from './catering-order-item.component';\nimport { CateringOrderListComponent } from './catering-order-list.component';\nimport { CateringOrderModalComponent } from './catering-order-modal.component';\nimport { CateringOrderOptionsModalComponent } from './catering-order-options-modal.component';\nimport { CateringImportMenuModalComponent } from './catering-import-menu-modal.component';\n\nimport { NewCateringOrderModalComponent } from './catering-order-modal/new-catering-order-modal.component';\nimport { CateringItemListComponent } from './catering-order-modal/catering-item-list.component';\nimport { CateringItemDetailsComponent } from './catering-order-modal/catering-item-details.component';\nimport { CateringItemFiltersComponent } from './catering-order-modal/catering-item-filters.component';\nimport { CateringListFieldComponent } from './catering-list-field.component';\nimport { ChargeCodeListModalComponent } from './charge-code-list-modal.component';\nimport { CateringItemListItemComponent } from './catering-order-modal/catering-item-list-item.component';\nimport { MatProgressSpinnerModule } from '@angular/material/progress-spinner';\n\nconst COMPONENTS: Type<any>[] = [\n    CateringOrderOptionsModalComponent,\n    CateringOrderModalComponent,\n    CateringItemModalComponent,\n    CateringMenuComponent,\n    CateringItemOptionModalComponent,\n    CateringOrderListComponent,\n    CateringOrderItemComponent,\n    CateringImportMenuModalComponent,\n\n    CateringListFieldComponent,\n    NewCateringOrderModalComponent,\n    CateringItemListComponent,\n    CateringItemDetailsComponent,\n    CateringItemFiltersComponent,\n    CateringItemListItemComponent,\n\n    ChargeCodeListModalComponent,\n];\n\n@NgModule({\n    declarations: [...COMPONENTS],\n    imports: [\n        CommonModule,\n        MatMenuModule,\n        MatTabsModule,\n        MatAutocompleteModule,\n        MatDialogModule,\n        MatCheckboxModule,\n        MatRadioModule,\n        MatTooltipModule,\n        FormsModule,\n        ReactiveFormsModule,\n        ComponentsModule,\n        MatFormFieldModule,\n        FormFieldsModule,\n        MatProgressSpinnerModule,\n    ],\n    providers: [],\n    exports: [...COMPONENTS],\n})\nexport class SharedCateringModule {}\n","import { Component, EventEmitter, Output } from '@angular/core';\nimport { csvToJson, DialogEvent, downloadFile } from '@placeos/common';\nimport { CateringItem } from './catering-item.class';\n\n@Component({\n    selector: 'catering-import-menu-modal',\n    template: `\n        <header class=\"h-12 bg-primary flex items-center justify-between px-4\">\n            <h2>Import Catering Menu</h2>\n            <button icon mat-dialog-close *ngIf=\"!loading\">\n                <app-icon>close</app-icon>\n            </button>\n        </header>\n        <main *ngIf=\"!loading; else load_state\">\n            <div\n                class=\"relative flex flex-col items-center justify-center space-y-2 h-[24rem] w-[24rem] border-4 border-base-200 border-dashed rounded-xl hover:bg-base-200 m-4 p-4 cursor-pointer\"\n            >\n                <app-icon class=\"text-4xl\">upload</app-icon>\n                <p>Click to select file or Drag and drop files</p>\n                <input\n                    type=\"file\"\n                    class=\"absolute inset-0 opacity-0\"\n                    (change)=\"handleFileEvent($event)\"\n                />\n            </div>\n            <div class=\"flex items-center justify-center px-4 pb-4\">\n                <button\n                    matRipple\n                    class=\"clear underline w-48\"\n                    (click)=\"downloadTemplate()\"\n                >\n                    Download Template\n                </button>\n            </div>\n        </main>\n        <ng-template #load_state>\n            <main\n                class=\"flex flex-col items-center justify-center space-y-2 p-8 h-[24rem] w-[24rem]\"\n            >\n                <mat-spinner diameter=\"32\"></mat-spinner>\n                <p>{{ loading }}</p>\n            </main>\n        </ng-template>\n    `,\n    styles: [``],\n})\nexport class CateringImportMenuModalComponent {\n    @Output() public event = new EventEmitter<DialogEvent>();\n    public loading: string;\n\n    /** Upload the image to the cloud */\n    public handleFileEvent(event: DragEvent) {\n        this.loading = 'Processing menu data...';\n        const element: HTMLInputElement = event.target as any;\n        if (!element?.files) return (this.loading = '');\n        const files: FileList = element.files;\n        if (!files.length) return (this.loading = '');\n        const file = files[0];\n        const fileReader = new FileReader();\n        fileReader.addEventListener('loadend', (e: any) => {\n            const contents = e.target.result;\n            const data = csvToJson(contents);\n            this.loading = '';\n            this.event.emit({\n                reason: 'done',\n                metadata: data\n                    .filter((_) => (_.type || '').toLowerCase() === 'item')\n                    .map(\n                        (i) =>\n                            new CateringItem({\n                                ...i,\n                                options: data\n                                    .filter(\n                                        (_) =>\n                                            (_.type || '').toLowerCase() ===\n                                                'option' && _.tags === i.id\n                                    )\n                                    .map((_) => ({\n                                        id: _.id,\n                                        name: _.name,\n                                        group: _.category,\n                                        multiple: _.multiple,\n                                        unit_price: _.unit_price,\n                                    })),\n                            })\n                    ),\n            });\n        });\n        fileReader.readAsText(file);\n    }\n\n    public downloadTemplate() {\n        const template = `ID,Type,Name,Unit Price,Category,Description,Tags,Multiple\nitem-1,item,Coffee,200,Drink,Wake Up,,\noption-1,option,1 Sugar,20,Sugars,,item-1,false`;\n        downloadFile('import-menu-template.csv', template);\n    }\n}\n","import { COMMA, ENTER, SPACE } from '@angular/cdk/keycodes';\nimport { Component, EventEmitter, Inject, Output } from '@angular/core';\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\nimport { MatChipInputEvent } from '@angular/material/chips';\nimport { MAT_DIALOG_DATA } from '@angular/material/dialog';\nimport { DialogEvent, randomInt } from '@placeos/common';\nimport { CateringItem } from './catering-item.class';\n\nexport interface CateringItemModalData {\n    item: CateringItem;\n    categories?: string[];\n}\n\n@Component({\n    selector: 'catering-item-modal',\n    template: `\n        <header>\n            <h3>{{ item.id ? 'Edit' : 'Add' }} Item</h3>\n            <button icon matRipple mat-dialog-close *ngIf=\"!loading\">\n                <app-icon>close</app-icon>\n            </button>\n        </header>\n        <form\n            class=\"p-4 overflow-auto max-h-[65vh]\"\n            *ngIf=\"form && !loading; else load_state\"\n            [formGroup]=\"form\"\n        >\n            <div class=\"flex items-center space-x-2\">\n                <div class=\"flex flex-col\" *ngIf=\"form.controls.name\">\n                    <label\n                        for=\"title\"\n                        [class.error]=\"\n                            form.controls.name.invalid &&\n                            form.controls.name.touched\n                        \"\n                    >\n                        Name<span>*</span>:\n                    </label>\n                    <mat-form-field appearance=\"outline\">\n                        <input\n                            matInput\n                            name=\"name\"\n                            placeholder=\"Item name\"\n                            formControlName=\"name\"\n                        />\n                        <mat-error>Name is required</mat-error>\n                    </mat-form-field>\n                </div>\n                <div class=\"flex flex-col\" *ngIf=\"form.controls.category\">\n                    <label\n                        for=\"category\"\n                        [class.error]=\"\n                            form.controls.category.invalid &&\n                            form.controls.category.touched\n                        \"\n                    >\n                        Category<span>*</span>:\n                    </label>\n                    <mat-form-field appearance=\"outline\">\n                        <input\n                            matInput\n                            name=\"category\"\n                            placeholder=\"Category\"\n                            formControlName=\"category\"\n                            [matAutocomplete]=\"auto\"\n                        />\n                        <mat-error>Category is required</mat-error>\n                    </mat-form-field>\n                </div>\n            </div>\n            <div class=\"flex flex-col\" *ngIf=\"form.controls.tags\">\n                <label\n                    for=\"tags\"\n                    [class.error]=\"\n                        form.controls.tags.invalid && form.controls.tags.touched\n                    \"\n                    i18n=\"@@tagsLabel\"\n                >\n                    Tags:\n                </label>\n                <mat-form-field appearance=\"outline\">\n                    <mat-chip-grid #chipList aria-label=\"Item Tags\">\n                        <mat-chip-row\n                            *ngFor=\"let item of tag_list\"\n                            (removed)=\"removeTag(item)\"\n                        >\n                            {{ item }}\n                            <button\n                                matChipRemove\n                                [attr.aria-label]=\"'Remove ' + item\"\n                            >\n                                <app-icon>cancel</app-icon>\n                            </button>\n                        </mat-chip-row>\n                    </mat-chip-grid>\n                    <input\n                        name=\"tags\"\n                        placeholder=\"Item tags e.g. Gluten Free, Vegan etc.\"\n                        i18n-placeholder=\"@@zoneTagsPlaceholder\"\n                        [matChipInputFor]=\"chipList\"\n                        [matChipInputSeparatorKeyCodes]=\"separators\"\n                        [matChipInputAddOnBlur]=\"true\"\n                        (matChipInputTokenEnd)=\"addTag($event)\"\n                    />\n                </mat-form-field>\n            </div>\n            <div class=\"flex flex-col\" *ngIf=\"form.controls.description\">\n                <label for=\"description\">Description:</label>\n                <mat-form-field appearance=\"outline\">\n                    <textarea\n                        matInput\n                        name=\"description\"\n                        placeholder=\"Item Description\"\n                        formControlName=\"description\"\n                    ></textarea>\n                </mat-form-field>\n            </div>\n            <div class=\"flex flex-col\" *ngIf=\"form.controls.unit_price\">\n                <label\n                    for=\"title\"\n                    [class.error]=\"\n                        form.controls.unit_price.invalid &&\n                        form.controls.unit_price.touched\n                    \"\n                >\n                    Unit Price<span>*</span>:\n                </label>\n                <mat-form-field appearance=\"outline\">\n                    <input\n                        matInput\n                        name=\"unit-price\"\n                        type=\"number\"\n                        placeholder=\"Unit Price\"\n                        formControlName=\"unit_price\"\n                    />\n                    <mat-error>Unit Price is required</mat-error>\n                </mat-form-field>\n            </div>\n            <div class=\"flex items-center\">\n                <label class=\"flex-none w-28 min-w-0\">Accept Points?</label>\n                <mat-checkbox formControlName=\"accept_points\">{{\n                    form.get('accept_points')?.value ? 'No' : 'Yes'\n                }}</mat-checkbox>\n            </div>\n            <div class=\"flex items-center flex-wrap max-w-lg\" list>\n                <mat-checkbox\n                    [ngModel]=\"hasTag('Gluten Free')\"\n                    (ngModelChange)=\"\n                        $event\n                            ? addTag({ value: 'Gluten Free' })\n                            : removeTag('Gluten Free')\n                    \"\n                    [ngModelOptions]=\"{ standalone: true }\"\n                >\n                    Gluten Free (GF)\n                </mat-checkbox>\n                <mat-checkbox\n                    [ngModel]=\"hasTag('Vegan')\"\n                    (ngModelChange)=\"\n                        $event ? addTag({ value: 'Vegan' }) : removeTag('Vegan')\n                    \"\n                    [ngModelOptions]=\"{ standalone: true }\"\n                >\n                    Vegan (VG)\n                </mat-checkbox>\n                <mat-checkbox\n                    [ngModel]=\"hasTag('Vegetarian')\"\n                    (ngModelChange)=\"\n                        $event\n                            ? addTag({ value: 'Vegetarian' })\n                            : removeTag('Vegetarian')\n                    \"\n                    [ngModelOptions]=\"{ standalone: true }\"\n                >\n                    Vegetarian (V)\n                </mat-checkbox>\n                <mat-checkbox\n                    [ngModel]=\"hasTag('Contains Dairy')\"\n                    (ngModelChange)=\"\n                        $event\n                            ? addTag({ value: 'Contains Dairy' })\n                            : removeTag('Contains Dairy')\n                    \"\n                    [ngModelOptions]=\"{ standalone: true }\"\n                >\n                    Contains Dairy (D)\n                </mat-checkbox>\n                <mat-checkbox\n                    [ngModel]=\"hasTag('Contains Nuts')\"\n                    (ngModelChange)=\"\n                        $event\n                            ? addTag({ value: 'Contains Nuts' })\n                            : removeTag('Contains Nuts')\n                    \"\n                    [ngModelOptions]=\"{ standalone: true }\"\n                >\n                    Contains Nuts (N)\n                </mat-checkbox>\n            </div>\n            <div class=\"flex items-center\">\n                <label class=\"flex-1 w-24 min-w-0\">Discount Cap</label>\n                <a-counter\n                    class=\"border border-base-200 rounded\"\n                    formControlName=\"discount_cap\"\n                    [min]=\"0\"\n                    [max]=\"100\"\n                    [step]=\"5\"\n                    [render_fn]=\"renderPercent\"\n                ></a-counter>\n            </div>\n            <div class=\"flex flex-col\" *ngIf=\"form.controls.images\">\n                <label for=\"images\" i18n=\"@@imagesLabel\">Images:</label>\n                <image-list-field\n                    name=\"images\"\n                    formControlName=\"images\"\n                ></image-list-field>\n            </div>\n        </form>\n        <footer\n            *ngIf=\"!loading\"\n            class=\"flex p-2 items-center justify-center border-t border-solid border-base-200\"\n        >\n            <button\n                btn\n                matRipple\n                [disabled]=\"!form.dirty\"\n                (click)=\"saveChanges()\"\n            >\n                Save\n            </button>\n        </footer>\n        <ng-template #load_state>\n            <div class=\"flex flex-col items-center p-8 space-y-2 w-64\">\n                <mat-spinner diameter=\"32\"></mat-spinner>\n                <p>Saving catering item...</p>\n            </div>\n        </ng-template>\n        <mat-autocomplete #auto=\"matAutocomplete\">\n            <mat-option *ngFor=\"let option of categories\" [value]=\"option\">\n                {{ option }}\n            </mat-option>\n        </mat-autocomplete>\n    `,\n    styles: [\n        `\n            [list] mat-checkbox {\n                margin: 0.5rem;\n            }\n        `,\n    ],\n})\nexport class CateringItemModalComponent {\n    /** Emitter for events on the modal */\n    @Output() public event = new EventEmitter<DialogEvent>();\n    /** Form fields for item */\n    public form = new FormGroup({\n        name: new FormControl(this.item.name || '', [Validators.required]),\n        description: new FormControl(this.item.description || ''),\n        category: new FormControl(this.item.category || '', [\n            Validators.required,\n        ]),\n        unit_price: new FormControl(this.item.unit_price, [\n            Validators.required,\n        ]),\n        tags: new FormControl(this.item.tags || []),\n        accept_points: new FormControl(this.item.accept_points || false),\n        discount_cap: new FormControl(this.item.discount_cap || 0),\n        images: new FormControl(this.item.images || []),\n    });\n    /** Whether changes are being saved */\n    public loading = false;\n    /** List of separator characters for tags */\n    public readonly separators: number[] = [ENTER, COMMA, SPACE];\n\n    /** Current item details */\n    public get item(): CateringItem {\n        return this._data.item || new CateringItem();\n    }\n\n    /** List of available categories */\n    public get categories(): string[] {\n        return this._data.categories || [];\n    }\n\n    public get tag_list(): string[] {\n        return this.form.controls.tags.value;\n    }\n\n    public renderPercent(value: number = 0) {\n        return `${value}%`;\n    }\n\n    public hasTag(tag: string) {\n        return this.tag_list.includes(tag);\n    }\n\n    constructor(\n        @Inject(MAT_DIALOG_DATA) private _data: CateringItemModalData\n    ) {}\n\n    /**\n     * Add a tag to the list of tags for the item\n     * @param event Input event\n     */\n    public addTag(event: MatChipInputEvent): void {\n        if (!this.form || !this.form.controls.tags) return;\n        this.form.controls.tags.markAsDirty();\n        const input = event.input;\n        const value = event.value;\n        const tag_list = this.tag_list;\n        if ((value || '').trim()) {\n            tag_list.push(value);\n            this.form.controls.tags.setValue(tag_list);\n        }\n\n        // Reset the input value\n        if (input) input.value = '';\n    }\n\n    /**\n     * Remove tag from the list\n     * @param existing_tag Tag to remove\n     */\n    public removeTag(existing_tag: string): void {\n        if (!this.form || !this.form.controls.tags) return;\n        const tag_list = this.tag_list;\n        this.form.controls.tags.markAsDirty();\n        const index = tag_list.indexOf(existing_tag);\n\n        if (index >= 0) {\n            tag_list.splice(index, 1);\n            this.form.controls.tags.setValue(tag_list);\n        }\n    }\n\n    public saveChanges() {\n        this.loading = true;\n        this.event.emit({\n            reason: 'done',\n            metadata: {\n                item: new CateringItem({\n                    ...this.item,\n                    id: this.item.id || `item-${randomInt(9999_9999)}`,\n                    ...this.form.value,\n                }),\n            },\n        });\n    }\n}\n","import { Component } from '@angular/core';\nimport { BehaviorSubject } from 'rxjs';\nimport { map } from 'rxjs/operators';\n\nimport { CateringStateService } from './catering-state.service';\nimport { CateringItem } from './catering-item.class';\nimport { unique } from '@placeos/common';\nimport { CateringOrdersService } from './catering-orders.service';\n\n@Component({\n    selector: 'catering-menu',\n    template: `\n        <simple-table\n            class=\"w-full min-w-[32rem] block text-sm\"\n            [data]=\"menu\"\n            [columns]=\"[\n                {\n                    key: 'active',\n                    name: ' ',\n                    content: active_template,\n                    size: '3.5rem',\n                    sortable: false\n                },\n                { key: 'name', name: 'Name' },\n                { key: 'category', name: 'Category' },\n                {\n                    key: 'unit_price',\n                    name: 'Price',\n                    content: price_template,\n                    size: '6rem'\n                },\n                {\n                    key: 'actions',\n                    name: ' ',\n                    content: actions_template,\n                    size: '6.5rem',\n                    sortable: false\n                }\n            ]\"\n            [filter]=\"filters?.search\"\n            [show_children]=\"show_children\"\n            [child_template]=\"child_template\"\n            [sortable]=\"true\"\n            empty_message=\"No Items in Menu\"\n        ></simple-table>\n        <ng-template #active_template let-row=\"row\">\n            <mat-checkbox\n                class=\"mx-auto\"\n                matTooltip=\"Allow Ordering Item for this zone\"\n                matTooltipPosition=\"right\"\n                [ngModel]=\"isEnabled(row)\"\n                (ngModelChange)=\"setEnabled(row, $event)\"\n            ></mat-checkbox>\n        </ng-template>\n        <ng-template #price_template let-data=\"data\">\n            <div\n                class=\"px-2 py-1 font-mono text-xs flex items-center mx-auto bg-secondary text-secondary-content rounded\"\n            >\n                {{ data / 100 | currency: (symbol | async) }}\n            </div>\n        </ng-template>\n        <ng-template #actions_template let-row=\"row\">\n            <div class=\"p-2 flex items-center mx-auto space-x-2\">\n                <button\n                    icon\n                    matRipple\n                    [disabled]=\"!can_edit\"\n                    [class.opacity-0]=\"!can_edit\"\n                    [matMenuTriggerFor]=\"menu\"\n                >\n                    <app-icon>more_vert</app-icon>\n                </button>\n                <mat-menu #menu=\"matMenu\">\n                    <button\n                        mat-menu-item\n                        class=\"flex items-center\"\n                        (click)=\"addOption(row)\"\n                    >\n                        <div class=\"flex items-center space-x-2 pr-2\">\n                            <app-icon>add</app-icon>\n                            <div>Add Option</div>\n                        </div>\n                    </button>\n                    <button\n                        mat-menu-item\n                        class=\"flex items-center\"\n                        (click)=\"editItem(row)\"\n                    >\n                        <div class=\"flex items-center space-x-2 pr-2\">\n                            <app-icon>edit</app-icon>\n                            <div>Edit Item</div>\n                        </div>\n                    </button>\n                    <button\n                        mat-menu-item\n                        class=\"flex items-center\"\n                        (click)=\"removeItem(row)\"\n                    >\n                        <div class=\"flex items-center space-x-2 pr-2\">\n                            <app-icon class=\"text-error\">delete</app-icon>\n                            <div>Remove Item</div>\n                        </div>\n                    </button>\n                </mat-menu>\n                <button\n                    icon\n                    matRipple\n                    [disabled]=\"!row.options?.length\"\n                    [matTooltip]=\"\n                        row.options?.length\n                            ? (show_children[row.id] ? 'Hide' : 'Show') +\n                              ' Menu Item Options'\n                            : ''\n                    \"\n                    (click)=\"show_children[row.id] = !show_children[row.id]\"\n                >\n                    <app-icon>\n                        {{\n                            show_children[row.id]\n                                ? 'keyboard_arrow_down'\n                                : 'chevron_right'\n                        }}\n                    </app-icon>\n                </button>\n            </div>\n        </ng-template>\n        <ng-template #child_template let-row=\"row\">\n            <div\n                class=\"flex p-2 items-center border-b border-solid border-base-200 relative space-x-2\"\n                *ngFor=\"let option of row.options\"\n            >\n                <div\n                    class=\"absolute inset-y-0 left-0 w-2 bg-black opacity-10\"\n                ></div>\n                <div class=\"flex-1 pl-4 pr-2\">\n                    <div class=\"text\">{{ option.name }}</div>\n                    <div class=\"text-xs opacity-60\">\n                        {{ option.group }}\n                    </div>\n                </div>\n                <button\n                    icon\n                    matRipple\n                    matTooltip=\"Edit Menu Item Option\"\n                    (click)=\"editOption(row, option)\"\n                    *ngIf=\"can_edit\"\n                >\n                    <app-icon>edit</app-icon>\n                </button>\n                <button\n                    icon\n                    matRipple\n                    class=\"!mr-1\"\n                    matTooltip=\"Remove Menu Item Option\"\n                    (click)=\"removeOption(row, option)\"\n                    *ngIf=\"can_edit\"\n                >\n                    <app-icon class=\"text-error\">delete</app-icon>\n                </button>\n            </div>\n        </ng-template>\n    `,\n    styles: [\n        `\n            :host {\n                display: flex;\n                flex-direction: column;\n                height: 90%;\n                width: 100%;\n            }\n        `,\n    ],\n})\nexport class CateringMenuComponent {\n    public show_children: Record<string, boolean> = {};\n    /** Observable for the currently active menu */\n    public readonly menu = this._catering.menu;\n\n    public readonly addOption = (item) => this._catering.addOption(item);\n\n    public readonly editOption = (item, option) =>\n        this._catering.addOption(item, option);\n\n    public readonly removeOption = (item, option) =>\n        this._catering.deleteOption(item, option);\n\n    public readonly editItem = (item) => this._catering.addItem(item);\n\n    public readonly removeItem = (item) => this._catering.deleteItem(item);\n\n    public get filters() {\n        return this._orders.filters;\n    }\n\n    public get can_edit() {\n        return this._catering.is_editable;\n    }\n    public get categories() {\n        return this._catering.categories;\n    }\n\n    constructor(\n        private _catering: CateringStateService,\n        private _orders: CateringOrdersService\n    ) {}\n\n    public isEnabled(item: CateringItem) {\n        return !item.hide_for_zones.includes(this._catering.zone);\n    }\n\n    public setEnabled(item: CateringItem, state: boolean) {\n        let list = item.hide_for_zones;\n        if (!state) list = unique([...list, this._catering.zone]);\n        else list = list.filter((_) => _ !== this._catering.zone);\n        this._catering.updateItem(\n            new CateringItem({ ...item, hide_for_zones: list })\n        );\n    }\n}\n","import { Component, EventEmitter, Inject, OnInit, Output } from '@angular/core';\nimport { FormGroup, FormControl, Validators } from '@angular/forms';\nimport { MAT_DIALOG_DATA } from '@angular/material/dialog';\n\nimport { DialogEvent } from 'libs/common/src/lib/types';\nimport { randomInt } from 'libs/common/src/lib/general';\n\nimport { CateringItem } from './catering-item.class';\nimport { CateringOption } from './catering.interfaces';\n\nexport interface CateringItemOptionModalData {\n    parent: CateringItem;\n    option: CateringOption;\n    types: string[];\n}\n\n@Component({\n    selector: 'catering-option-modal',\n    template: `\n        <header>\n            <h3>{{ option.id ? 'Edit' : 'Add' }} Item Option</h3>\n            <button icon mat-dialog-close *ngIf=\"!loading\">\n                <app-icon>close</app-icon>\n            </button>\n        </header>\n        <form\n            class=\"p-4 overflow-auto max-h-[65vh]\"\n            *ngIf=\"form && !loading; else load_state\"\n            [formGroup]=\"form\"\n        >\n            <div class=\"flex flex-col\" *ngIf=\"form.controls.name\">\n                <label\n                    for=\"title\"\n                    [class.error]=\"\n                        form.controls.name.invalid && form.controls.name.touched\n                    \"\n                >\n                    Name<span>*</span>:\n                </label>\n                <mat-form-field appearance=\"outline\">\n                    <input\n                        matInput\n                        name=\"name\"\n                        placeholder=\"Item name\"\n                        formControlName=\"name\"\n                    />\n                    <mat-error>Name is required</mat-error>\n                </mat-form-field>\n            </div>\n            <div class=\"flex flex-col\" *ngIf=\"form.controls.group\">\n                <label\n                    for=\"group\"\n                    [class.error]=\"\n                        form.controls.group.invalid &&\n                        form.controls.group.touched\n                    \"\n                >\n                    Type<span>*</span>:\n                </label>\n                <mat-form-field appearance=\"outline\">\n                    <input\n                        matInput\n                        name=\"group\"\n                        placeholder=\"Type of option e.g. Number of sugars\"\n                        formControlName=\"group\"\n                        [matAutocomplete]=\"auto\"\n                    />\n                    <mat-error>Type is required</mat-error>\n                </mat-form-field>\n            </div>\n            <div class=\"flex flex-col\" *ngIf=\"form.controls.unit_price\">\n                <label for=\"title\">Unit Price:</label>\n                <mat-form-field appearance=\"outline\">\n                    <input\n                        matInput\n                        name=\"unit-price\"\n                        type=\"number\"\n                        placeholder=\"Unit Price\"\n                        formControlName=\"unit_price\"\n                    />\n                </mat-form-field>\n            </div>\n            <div class=\"flex flex-col\" *ngIf=\"form.controls.multiple\">\n                <mat-checkbox name=\"multiple\" formControlName=\"multiple\">\n                    Can select multiple of type\n                </mat-checkbox>\n            </div>\n        </form>\n        <footer\n            *ngIf=\"!loading\"\n            class=\"flex p-2 items-center justify-center border-t border-solid border-base-200\"\n        >\n            <button\n                btn\n                matRipple\n                [disabled]=\"!form.dirty\"\n                (click)=\"saveChanges()\"\n            >\n                Save\n            </button>\n        </footer>\n        <ng-template #load_state>\n            <div loading class=\"flex flex-col items-center p-8 space-y-2 w-64\">\n                <mat-spinner diameter=\"32\"></mat-spinner>\n                <p>Saving catering item option...</p>\n            </div>\n        </ng-template>\n        <mat-autocomplete #auto=\"matAutocomplete\">\n            <mat-option *ngFor=\"let option of types\" [value]=\"option\">\n                {{ option }}\n            </mat-option>\n        </mat-autocomplete>\n    `,\n    styles: [``],\n})\nexport class CateringItemOptionModalComponent {\n    /** Emitter for events on the modal */\n    @Output() public event = new EventEmitter<DialogEvent>();\n    /** Form fields for item */\n    public form = new FormGroup({\n        name: new FormControl(this.option.name || '', [Validators.required]),\n        group: new FormControl(this.option.group || '', [Validators.required]),\n        unit_price: new FormControl(this.option.unit_price),\n        multiple: new FormControl(!!this.option.multiple, []),\n    });\n    /** Whether changes are being saved */\n    public loading = false;\n\n    /** Current item details */\n    public get option(): CateringOption {\n        return this._data.option;\n    }\n\n    /** List of available categories */\n    public get types(): string[] {\n        return this._data.types || [];\n    }\n\n    constructor(\n        @Inject(MAT_DIALOG_DATA) private _data: CateringItemOptionModalData\n    ) {}\n\n    public saveChanges() {\n        this.loading = true;\n        const new_option = {\n            ...this.option,\n            id: this.option.id || `option-${randomInt(9999_9999)}`,\n            ...this.form.value,\n        } as CateringOption;\n        this.event.emit({\n            reason: 'done',\n            metadata: {\n                item: new CateringItem({\n                    ...this._data.parent,\n                    options: this._data.parent.options\n                        .filter((i) => i.id !== new_option.id)\n                        .concat([new_option]),\n                }),\n            },\n        });\n    }\n}\n","import { Component, Input } from '@angular/core';\n\nimport { CateringItem } from './catering-item.class';\n\nconst ACTIVE_ITEMS = new Set<string>();\n\n@Component({\n    selector: '[catering-order-item]',\n    template: `\n        <ng-container *ngIf=\"item\">\n            <div class=\"w-16 text-right h-14 relative\">\n                <div\n                    arm\n                    class=\"border-b-2 border-l-2 border-base-200 w-4 h-16 absolute top-1/2 left-1/2 -translate-y-full -translate-x-px\"\n                ></div>\n            </div>\n            <div class=\"w-12 mr-4\">\n                <button\n                    action\n                    icon\n                    matRipple\n                    class=\"border-2 border-base-200 border-dashed text-xl text-dark-fade p-2\"\n                    [class.bg-success]=\"active\"\n                    [class.text-white]=\"active\"\n                    [class.border-solid]=\"active\"\n                    (click)=\"toggle()\"\n                >\n                    <app-icon>{{ active ? 'done' : 'local_pizza' }}</app-icon>\n                </button>\n            </div>\n            <div\n                class=\"flex flex-1 items-center border-b border-base-200 border-solid py-4 space-x-4\"\n            >\n                <div class=\"\">\n                    <div\n                        class=\"p-1 rounded-full bg-base-300 w-10 h-10 flex items-center justify-center font-mono text-sm\"\n                    >\n                        {{ item?.amount || item?.quantity || 1 }}×\n                    </div>\n                </div>\n                <div class=\"flex-1\">{{ item?.name }}</div>\n                <div class=\"flex space-x-2 mr-2 px-4\">\n                    <ng-container *ngFor=\"let opt of item.option_list\">\n                        <div\n                            class=\"text-xs py-1 px-2 bg-warning text-warning-content rounded-2xl shadow\"\n                            *ngIf=\"opt\"\n                        >\n                            {{ opt.name }}\n                        </div>\n                    </ng-container>\n                </div>\n            </div>\n        </ng-container>\n    `,\n    styles: [\n        `\n            :host:last-child > div {\n                border: none !important;\n            }\n        `,\n    ],\n})\nexport class CateringOrderItemComponent {\n    @Input() public order_id: string;\n    @Input() public item: CateringItem;\n\n    public active = false;\n\n    public get item_key() {\n        return `${this.order_id}|${this.item?.id}`;\n    }\n\n    public ngOnInit() {\n        this.active = ACTIVE_ITEMS.has(this.item_key);\n    }\n\n    public toggle() {\n        if (ACTIVE_ITEMS.has(this.item_key)) {\n            ACTIVE_ITEMS.delete(this.item_key);\n            this.active = false;\n        } else {\n            ACTIVE_ITEMS.add(this.item_key);\n            this.active = true;\n        }\n    }\n}\n","import { Component } from '@angular/core';\nimport { CateringOrder } from './catering-order.class';\n\nimport { CateringOrdersService } from './catering-orders.service';\nimport { AsyncHandler, SettingsService } from '@placeos/common';\nimport { CATERING_STATUSES } from './catering.vars';\n\n@Component({\n    selector: 'catering-order-list',\n    template: `\n        <div class=\"flex flex-col h-full w-full overflow-auto\">\n            <!-- <mat-progress-bar\n                [class.opacity-0]=\"!(loading | async)\"\n                class=\"w-full\"\n                mode=\"indeterminate\"\n            ></mat-progress-bar> -->\n            <simple-table\n                class=\"min-w-[72rem] w-full block text-sm\"\n                [data]=\"order_list\"\n                [columns]=\"[\n                    {\n                        key: 'state',\n                        name: ' ',\n                        size: '4rem',\n                        sortable: false,\n                        content: state_template\n                    },\n                    {\n                        key: 'deliver_at',\n                        name: 'Time',\n                        content: time_template\n                    },\n                    {\n                        key: 'event',\n                        name: 'Location',\n                        content: location_template,\n                        sortable: false\n                    },\n                    {\n                        key: 'event',\n                        name: 'Host',\n                        content: host_template,\n                        sortable: false\n                    },\n                    { key: 'charge_code', name: 'Charge Code' },\n                    {\n                        key: 'invoice_number',\n                        name: 'Invoice No.',\n                        empty: 'No Invoice'\n                    },\n                    {\n                        key: 'status',\n                        name: 'Status',\n                        content: status_template,\n                        size: '11rem'\n                    },\n                    {\n                        key: 'actions',\n                        name: ' ',\n                        size: '6.5rem',\n                        content: actions_template,\n                        sortable: false\n                    }\n                ]\"\n                [sortable]=\"true\"\n                [show_children]=\"show_children\"\n                [child_template]=\"child_template\"\n                empty_message=\"No Catering Orders\"\n            >\n            </simple-table>\n            <ng-template #state_template let-data=\"data\">\n                <div class=\"p-2\">\n                    <div\n                        class=\"rounded-full bg-base-200 p-2 text-2xl flex items-center justify-center\"\n                    >\n                        <app-icon>room_service</app-icon>\n                    </div>\n                </div>\n            </ng-template>\n            <ng-template #time_template let-data=\"data\" let-row=\"row\">\n                <div class=\"p-4\">\n                    <div>Deliver at {{ data | date: time_format }}</div>\n                    <div class=\"text-xs opacity-30\">\n                        {{ row?.event?.date | date: 'MMM d' }},\n                        {{ row?.event?.date | date: time_format }}\n                        -\n                        {{ row?.event?.date_end | date: 'MMM d' }},\n                        {{ row?.event?.date_end | date: time_format }}\n                    </div>\n                </div>\n            </ng-template>\n            <ng-template #location_template let-data=\"data\">\n                <div class=\"px-4 py-2\">\n                    {{ data?.space?.display_name || data?.space?.name || '' }}\n                    <span\n                        class=\"opacity-30\"\n                        *ngIf=\"\n                            !(data?.space?.display_name || data?.space?.name)\n                        \"\n                    >\n                        No Location\n                    </span>\n                </div>\n            </ng-template>\n            <ng-template #host_template let-data=\"data\">\n                <div class=\"px-4 py-2\">\n                    <div>\n                        {{ data?.organiser?.name || data?.host || '' }}\n                        <span\n                            class=\"opacity-30\"\n                            *ngIf=\"!(data?.organiser?.name || data?.host)\"\n                        >\n                            Unknown Host\n                        </span>\n                    </div>\n                    <div class=\"text-xs opacity-30\">\n                        {{ data?.organiser?.email || data?.host }}\n                    </div>\n                </div>\n            </ng-template>\n            <ng-template #status_template let-row=\"row\" let-data=\"data\">\n                <div class=\"px-4 py-2\">\n                    <button\n                        status\n                        matRipple\n                        class=\"rounded-3xl text-base border-none h-10 px-4 flex items-center text-white w-36\"\n                        [style.background]=\"status(data)?.colour\"\n                        [matMenuTriggerFor]=\"menu\"\n                    >\n                        <div class=\"flex text-center capitalize mx-2\">\n                            {{ status(data)?.name }}\n                        </div>\n                        <app-icon class=\"pl-2\">arrow_drop_down</app-icon>\n                    </button>\n                </div>\n                <mat-menu #menu=\"matMenu\">\n                    <button\n                        mat-menu-item\n                        *ngFor=\"let status of statuses\"\n                        class=\"flex items-center\"\n                        (click)=\"updateStatus(row, status.id)\"\n                    >\n                        <div class=\"flex items-center space-x-2\">\n                            <div\n                                class=\"rounded-full h-4 w-4 mr-2\"\n                                [style.background-color]=\"status.colour\"\n                            ></div>\n                            <span class=\"mr-2 w-20\">{{ status.name }}</span>\n                        </div>\n                    </button>\n                </mat-menu>\n            </ng-template>\n            <ng-template #actions_template let-row=\"row\">\n                <div class=\"flex items-center space-x-2 p-2 mx-auto\">\n                    <button\n                        icon\n                        matRipple\n                        customTooltip\n                        [hover]=\"true\"\n                        xPosition=\"end\"\n                        yPosition=\"top\"\n                        [content]=\"notes_template\"\n                        [disabled]=\"!row.notes\"\n                    >\n                        <app-icon>description</app-icon>\n                    </button>\n                    <ng-template #notes_template>\n                        <div\n                            class=\"p-2 rounded-lg bg-base-100 text-base-content max-w-[32rem] min-w-[8rem] shadow border border-base-200\"\n                        >\n                            <div class=\"mb-2\">Notes</div>\n                            <p class=\"text-sm px-4 py-2 bg-base-200 rounded\">\n                                {{ row.notes }}\n                            </p>\n                        </div>\n                    </ng-template>\n                    <button\n                        icon\n                        matRipple\n                        (click)=\"show_children[row.id] = !show_children[row.id]\"\n                    >\n                        <app-icon>\n                            {{\n                                show_children[row.id]\n                                    ? 'keyboard_arrow_down'\n                                    : 'chevron_right'\n                            }}\n                        </app-icon>\n                    </button>\n                </div>\n            </ng-template>\n            <ng-template #child_template let-row=\"row\">\n                <ul\n                    *ngIf=\"row?.items.length\"\n                    class=\"list-none p-0 m-0 w-full relative z-0\"\n                >\n                    <li\n                        catering-order-item\n                        class=\"flex items-center\"\n                        *ngFor=\"let item of row.items; let i = index\"\n                        [order_id]=\"row?.id\"\n                        [item]=\"item\"\n                    ></li>\n                </ul>\n            </ng-template>\n        </div>\n    `,\n    styles: [\n        `\n            :host {\n                display: flex;\n                flex-direction: column;\n                height: 100%;\n                width: 100%;\n            }\n        `,\n    ],\n})\nexport class CateringOrderListComponent extends AsyncHandler {\n    /** List of filtered orders */\n    public readonly order_list = this._orders.filtered;\n    /** Whether order list is loading */\n    public readonly loading = this._orders.loading;\n\n    public readonly statuses = CATERING_STATUSES;\n    public readonly show_children: Record<string, boolean> = {};\n\n    public readonly updateStatus = async (order, s) => {\n        await this._orders.updateStatus(order, s);\n        this.timeout('status-change', () => ((order as any).status = s));\n    };\n\n    public get time_format() {\n        return this._settings.time_format;\n    }\n\n    public status(value: string) {\n        return CATERING_STATUSES.find((i) => i.id === value);\n    }\n\n    constructor(\n        private _orders: CateringOrdersService,\n        private _settings: SettingsService\n    ) {\n        super();\n    }\n\n    public ngOnInit() {\n        this._orders.startPolling();\n    }\n\n    public ngOnDestroy() {\n        this._orders.stopPolling();\n    }\n\n    /* istanbul ignore next */\n    public trackByFn(index: number, order: CateringOrder) {\n        return order ? order.id : undefined;\n    }\n}\n","import { Component, Inject, Output, EventEmitter, OnInit } from '@angular/core';\nimport { MAT_DIALOG_DATA } from '@angular/material/dialog';\nimport { Observable } from 'rxjs';\n\nimport { AsyncHandler, DialogEvent, HashMap, unique } from '@placeos/common';\n\nimport { CateringItem } from './catering-item.class';\nimport { CateringOrder } from './catering-order.class';\nimport { CateringOption } from './catering.interfaces';\nimport { OrganisationService } from '@placeos/organisation';\nimport { cateringItemAvailable } from './utilities';\nimport { AttachedResourceRuleset } from '@placeos/components';\n\nexport interface CateringOrderModalData {\n    order: CateringOrder;\n    code: string;\n    menu: Observable<CateringItem[]>;\n    loading: Observable<boolean>;\n    getCateringConfig: (_: string) => Promise<AttachedResourceRuleset[]>;\n    selectOptions: (_: CateringOption[]) => Promise<CateringOption[]>;\n}\n\n// TODO: Split template into 2 children components. Order menu and Order Confirm;\n\n@Component({\n    selector: 'app-catering-order-modal',\n    template: `\n        <div class=\"main min-w-[20rem]\" *ngIf=\"!loading; else load_state\">\n            <ng-container *ngIf=\"!show_order_details; else order_details\">\n                <mat-tab-group>\n                    <ng-container *ngFor=\"let cat of categories\">\n                        <mat-tab\n                            *ngIf=\"(menu_items || {})[cat].length\"\n                            [label]=\"cat\"\n                        >\n                            <div class=\"list\">\n                                <div\n                                    item\n                                    class=\"flex items-center p-2 border-b border-base-200\"\n                                    *ngFor=\"let item of (menu_items || {})[cat]\"\n                                >\n                                    <div class=\"flex-1 w-1/2\">\n                                        <div class=\"flex-1 w-1/2\">\n                                            {{ item.name }}\n                                        </div>\n                                        <div\n                                            class=\"text-xs no-underline\"\n                                            *ngIf=\"item.options.length\"\n                                        >\n                                            Options Available\n                                        </div>\n                                    </div>\n                                    <div\n                                        class=\"bg-primary text-xs rounded px-4 py-2 mx-2 text-white font-medium\"\n                                    >\n                                        {{\n                                            item.unit_price / 100\n                                                | currency: code\n                                        }}\n                                    </div>\n                                    <a-counter\n                                        ngDefaultControl\n                                        [ngModel]=\"item.quantity\"\n                                        (ngModelChange)=\"\n                                            updateItemQuantity(item, $event)\n                                        \"\n                                        *ngIf=\"!item.options.length\"\n                                    ></a-counter>\n                                    <div\n                                        class=\"flex items-center\"\n                                        *ngIf=\"item.options.length\"\n                                    >\n                                        <div\n                                            [matTooltip]=\"\n                                                item.quantity\n                                                    ? 'Items with options must be removed from order confirmation page'\n                                                    : ''\n                                            \"\n                                        >\n                                            <button\n                                                icon\n                                                matRipple\n                                                [disabled]=\"true\"\n                                            >\n                                                <app-icon>remove</app-icon>\n                                            </button>\n                                        </div>\n                                        <div\n                                            class=\"count h-12 w-12 flex items-center justify-center\"\n                                        >\n                                            {{ item.quantity }}\n                                        </div>\n                                        <button\n                                            icon\n                                            matRipple\n                                            (click)=\"addItem(item)\"\n                                        >\n                                            <app-icon>add</app-icon>\n                                        </button>\n                                    </div>\n                                </div>\n                            </div>\n                        </mat-tab>\n                    </ng-container>\n                </mat-tab-group>\n            </ng-container>\n        </div>\n        <footer\n            *ngIf=\"!loading\"\n            class=\"flex items-center justify-center space-x-2 p-2 border-t border-base-200\"\n        >\n            <ng-container *ngIf=\"!show_order_details; else order_actions\">\n                <button btn matRipple class=\"inverse\" mat-dialog-close>\n                    Cancel\n                </button>\n                <button\n                    confirm\n                    btn\n                    matRipple\n                    [disabled]=\"!order.item_count\"\n                    [matBadge]=\"order.item_count\"\n                    [matBadgeHidden]=\"!order.item_count\"\n                    matBadgeColor=\"warn\"\n                    (click)=\"show_order_details = true\"\n                >\n                    Confirm\n                </button>\n            </ng-container>\n            <ng-template #order_actions>\n                <button\n                    matRipple\n                    class=\"inverse\"\n                    (click)=\"show_order_details = false\"\n                >\n                    Back\n                </button>\n                <button save btn matRipple (click)=\"saveOrder()\">\n                    Save Order\n                </button>\n            </ng-template>\n        </footer>\n        <ng-template #load_state>\n            <div class=\"flex flex-col w-64 p-8 items-center space-y-2\">\n                <mat-spinner diameter=\"32\"></mat-spinner>\n                <p>{{ loading }}</p>\n            </div>\n        </ng-template>\n        <ng-template #order_details>\n            <header class=\"h-[3.25rem]\">\n                <h3>Confirm Order</h3>\n            </header>\n            <div class=\"list\">\n                <div\n                    item\n                    class=\"flex items-center p-2 border-b border-base-200\"\n                    *ngFor=\"let item of order.items\"\n                >\n                    <div class=\"flex-1 w-1/2\">\n                        <div class=\"flex-1 w-1/2\">{{ item.name }}</div>\n                        <div\n                            class=\"text-xs underline\"\n                            *ngIf=\"item.options.length\"\n                            [matTooltip]=\"optionsFor(item)\"\n                        >\n                            {{ item.options.length }} option{{\n                                item.options.length === 1 ? '' : 's'\n                            }}\n                            selected\n                        </div>\n                    </div>\n                    <div\n                        class=\"bg-primary text-xs rounded px-4 py-2 mx-2 text-white font-medium\"\n                    >\n                        {{ item.total_cost / 100 | currency: code }}\n                    </div>\n                    <a-counter\n                        [ngModel]=\"item.quantity\"\n                        (ngModelChange)=\"updateItemQuantity(item, $event)\"\n                    ></a-counter>\n                </div>\n            </div>\n        </ng-template>\n    `,\n    styles: [\n        `\n            .list {\n                height: 24em;\n                min-width: 32em;\n                max-width: calc(100vw - 1em);\n            }\n\n            footer button {\n                min-width: 12em;\n            }\n\n            input {\n                position: relative;\n                width: 100%;\n                padding: 1em;\n                border: none;\n                border-radius: 0 !important;\n                border-top: 1px solid #ccc;\n                border-bottom: 1px solid #ccc;\n                outline: none;\n                font-size: 1em;\n            }\n\n            input:focus {\n                border: none;\n                border-top: 2px solid var(--s);\n                border-bottom: 2px solid var(--s);\n                box-shadow: none;\n            }\n\n            input.error::placeholder {\n                color: rgba(var(--error), 0.45);\n            }\n        `,\n    ],\n})\nexport class CateringOrderModalComponent\n    extends AsyncHandler\n    implements OnInit\n{\n    /** Emitter for events on the modal */\n    @Output() public event = new EventEmitter<DialogEvent>();\n    /** Whether changes are being saved */\n    public loading = '';\n    /** Current order */\n    public order: CateringOrder;\n    /** Name of the active category */\n    public category: string;\n    /** Whether order details should be shown */\n    public show_order_details: boolean;\n    /** Catering rules for selected space */\n    public rules: readonly AttachedResourceRuleset[];\n    /** List of menu items to show */\n    public menu_items: HashMap<CateringItem[]> = {};\n    /** List of categories for the active menu */\n    public categories: string[] = [];\n\n    public get code() {\n        return this._org.currency_code;\n    }\n\n    constructor(\n        private _org: OrganisationService,\n        @Inject(MAT_DIALOG_DATA) private _data: CateringOrderModalData\n    ) {\n        super();\n        this.loading = 'Loading menu...';\n    }\n\n    public async ngOnInit() {\n        this.loading = 'Loading menu...';\n        this.order = new CateringOrder(this._data.order);\n        this.rules = await this._data.getCateringConfig(\n            this.order.event?.space?.level?.parent_id\n        );\n        this._data.menu.subscribe((list) => {\n            this.loading = 'Loading menu...';\n            const categories = unique(list.map((item) => item.category));\n            const map = {};\n            for (const cat of categories) {\n                map[cat] = list.filter((item) => {\n                    return (\n                        item.category === cat &&\n                        cateringItemAvailable(\n                            item,\n                            this.rules as any,\n                            this.order.event\n                        )\n                    );\n                });\n            }\n            this.categories = categories;\n            this.menu_items = map;\n            this.updateMenuQuantities();\n            this.timeout('clear_loading', () => (this.loading = ''), 1000);\n        });\n    }\n\n    public addItem(item: CateringItem, choose_options: boolean = true) {\n        const old_item = this.order.items.find(\n            (itm) =>\n                itm.id === item.id &&\n                itm.options.length ===\n                    itm.options.reduce(\n                        (c, o) =>\n                            c +\n                            (item.options.find((opt) => o.id === opt.id)\n                                ? 1\n                                : 0),\n                        0\n                    )\n        );\n        if (choose_options && item.options?.length) {\n            this._data.selectOptions(item.options).then((options) => {\n                const new_item = new CateringItem({ ...item, options });\n                this.addItem(new_item, false);\n            });\n        } else if (old_item) {\n            this.order = new CateringOrder({\n                ...this.order,\n                items: this.order.items\n                    .filter(\n                        (i) =>\n                            !(\n                                i.id === item.id &&\n                                i.options_string === item.options_string\n                            )\n                    )\n                    .concat([\n                        new CateringItem({\n                            ...item,\n                            quantity: old_item.quantity + 1,\n                        }),\n                    ]),\n            });\n        } else {\n            this.order = new CateringOrder({\n                ...this.order,\n                items: this.order.items.concat([\n                    new CateringItem({ ...item, quantity: 1 }),\n                ]),\n            });\n        }\n        this.updateMenuQuantities();\n    }\n\n    public removeItem(item: CateringItem) {\n        this.order = new CateringOrder({\n            ...this.order,\n            items: this.order.items.filter(\n                (_) =>\n                    _.id !== item.id && _.options_string === item.options_string\n            ),\n        });\n        this.updateMenuQuantities();\n    }\n\n    public updateItemQuantity(item: CateringItem, amount: number) {\n        const old_item = this.order.items.find(\n            (itm) =>\n                itm.id === item.id && itm.options_string === item.options_string\n        );\n        let items = [...this.order.items];\n        if (old_item) {\n            items = this.order.items\n                .filter(\n                    (i) =>\n                        !(\n                            i.id === item.id &&\n                            i.options_string === item.options_string\n                        )\n                )\n                .concat([new CateringItem({ ...item, quantity: amount })]);\n        } else {\n            items = this.order.items.concat([\n                new CateringItem({ ...item, quantity: amount }),\n            ]);\n        }\n        items.sort((a, b) => a.name.localeCompare(b.name));\n        this.order = new CateringOrder({\n            ...this.order,\n            items,\n        });\n        this.updateMenuQuantities();\n    }\n\n    public updateMenuQuantities() {\n        for (const cat in this.menu_items) {\n            for (const item of this.menu_items[cat]) {\n                (item as any).quantity = this.order.items.reduce(\n                    (c, i) => (i.id === item.id ? c + i.quantity : c),\n                    0\n                );\n            }\n        }\n    }\n\n    public optionsFor(item: CateringItem) {\n        return item.options.map((i) => i.name).join('\\n');\n    }\n\n    public saveOrder() {\n        this.event.emit({\n            reason: 'done',\n            metadata: { order: this.order },\n        });\n    }\n\n    public confirmOrder() {\n        this.show_order_details = true;\n    }\n}\n","import { Component, Inject, Output, EventEmitter } from '@angular/core';\nimport { MAT_DIALOG_DATA } from '@angular/material/dialog';\n\nimport { DialogEvent, HashMap } from 'libs/common/src/lib/types';\nimport { unique } from 'libs/common/src/lib/general';\n\nimport { CateringOption, CateringOptionGroup } from './catering.interfaces';\n\nexport interface CateringOrderOptionsModalData {\n    code: string;\n    options: CateringOption[];\n}\n\n@Component({\n    selector: 'app-catering-options-modal',\n    template: `\n        <header>\n            <h3>Select options</h3>\n            <button icon mat-dialog-close>\n                <app-icon>close</app-icon>\n            </button>\n        </header>\n        <main class=\"overflow-auto\">\n            <div\n                class=\"pt-1 pb-2 border-b border-base-200\"\n                *ngFor=\"let group of groups\"\n                [attr.group]=\"group.name\"\n            >\n                <div class=\"font-medium p-2 capitalize\">{{ group.name }}</div>\n                <div class=\"flex flex-col pl-6\">\n                    <ng-container *ngIf=\"!group.multiple; else multi_options\">\n                        <mat-radio-group\n                            class=\"flex flex-col\"\n                            aria-label=\"Select an option\"\n                            ngModel\n                            (ngModelChange)=\"updateGroupOption(group, $event)\"\n                        >\n                            <mat-radio-button class=\"my-1 mx-0\" value=\"\">\n                                <span class=\"font-medium p-2\">None</span>\n                            </mat-radio-button>\n                            <mat-radio-button\n                                class=\"my-1 mx-0\"\n                                *ngFor=\"let opt of group?.options\"\n                                [value]=\"opt.id\"\n                            >\n                                <div class=\"flex items-center justify-center\">\n                                    <div class=\"font-medium p-2 flex-1 w-1/2\">\n                                        {{ opt.name }}\n                                    </div>\n                                    <div\n                                        class=\"opacity-60 text-xs\"\n                                        *ngIf=\"opt.unit_price\"\n                                    >\n                                        +{{\n                                            opt.unit_price / 100\n                                                | currency: code\n                                        }}\n                                    </div>\n                                </div>\n                            </mat-radio-button>\n                        </mat-radio-group>\n                    </ng-container>\n                    <ng-template #multi_options>\n                        <mat-checkbox\n                            *ngFor=\"let opt of group?.options\"\n                            [(ngModel)]=\"option_state[opt.id]\"\n                        >\n                            <div class=\"flex items-center justify-center\">\n                                <div class=\"font-medium p-2 flex-1 w-1/2\">\n                                    {{ opt.name }}\n                                </div>\n                                <div\n                                    class=\"opacity-60 text-xs\"\n                                    *ngIf=\"opt.unit_price\"\n                                >\n                                    +{{ opt.unit_price / 100 | currency: code }}\n                                </div>\n                            </div>\n                        </mat-checkbox>\n                    </ng-template>\n                </div>\n            </div>\n        </main>\n        <footer class=\"p-2\">\n            <button btn matRipple class=\"w-32\" (click)=\"saveOptions()\">\n                Save\n            </button>\n        </footer>\n    `,\n    styles: [\n        `\n            main {\n                min-height: 24em;\n                width: 24rem;\n                max-width: calc(100vw - 2rem);\n            }\n        `,\n    ],\n})\nexport class CateringOrderOptionsModalComponent {\n    /** Emitter for events on the modal */\n    @Output() public event = new EventEmitter<DialogEvent>();\n    /** List of option groups */\n    public readonly groups: CateringOptionGroup[];\n    /** Mapping of options to their active state */\n    public option_state: HashMap<boolean> = {};\n    public readonly code = this._data.code;\n\n    constructor(\n        @Inject(MAT_DIALOG_DATA) private _data: CateringOrderOptionsModalData\n    ) {\n        const groups = unique(\n            this._data.options.map((i) => i.group || 'Other')\n        );\n        const group_list = [];\n        for (const group of groups) {\n            const options = this._data.options.filter((i) => i.group === group);\n            group_list.push({\n                name: group,\n                multiple: !!options.find((i) => i.multiple),\n                options,\n            });\n        }\n        this.groups = group_list;\n    }\n\n    public updateGroupOption(group: CateringOptionGroup, id: string) {\n        for (const option of group.options) {\n            this.option_state[option.id] = option.id === id;\n        }\n    }\n\n    public saveOptions() {\n        const options = this._data.options.filter(\n            (opt) => this.option_state[opt.id]\n        );\n        this.event.emit({ reason: 'done', metadata: { options } });\n    }\n}\n","import { Injectable } from '@angular/core';\nimport { BehaviorSubject, combineLatest, Observable, of } from 'rxjs';\nimport {\n    map,\n    switchMap,\n    debounceTime,\n    tap,\n    shareReplay,\n    catchError,\n} from 'rxjs/operators';\nimport { startOfDay, endOfDay, getUnixTime, format } from 'date-fns';\n\nimport { AsyncHandler, currentUser, flatten } from '@placeos/common';\nimport {\n    queryEvents,\n    saveEvent,\n    updateEventMetadata,\n} from 'libs/events/src/lib/events.fn';\nimport { CalendarEvent } from 'libs/events/src/lib/event.class';\n\nimport { CateringOrder } from './catering-order.class';\nimport { CateringOrderStatus } from './catering.interfaces';\n\nexport interface CateringOrderFilters {\n    /** UTC epoch of the date to get catering orders for */\n    date?: number;\n    /** List of zones to filter catering order bookings */\n    zones?: string[];\n    /** Search string to filter orders on */\n    search?: string;\n}\n\nfunction checkOrder(\n    order: CateringOrder,\n    filters: CateringOrderFilters\n): boolean {\n    const s = (filters.search || '').toLowerCase();\n    return !!order.items.find(\n        (item) =>\n            item.name.toLowerCase().includes(s) ||\n            !!item.options.find((option) =>\n                option.name.toLowerCase().includes(s)\n            )\n    );\n}\n\n@Injectable({\n    providedIn: 'root',\n})\nexport class CateringOrdersService extends AsyncHandler {\n    private _poll = new BehaviorSubject<number>(0);\n    private _loading = new BehaviorSubject<boolean>(false);\n    private _filters = new BehaviorSubject<CateringOrderFilters>({});\n\n    /** Observable for list of orders */\n    public readonly orders: Observable<CateringOrder[]> = combineLatest([\n        this._filters,\n        this._poll,\n    ]).pipe(\n        debounceTime(1000),\n        switchMap(([{ date, zones }]) => {\n            this._loading.next(true);\n            const start = getUnixTime(startOfDay(date || Date.now()));\n            const end = getUnixTime(endOfDay(date || Date.now()));\n            return queryEvents({\n                zone_ids: (zones || []).join(','),\n                period_start: start,\n                period_end: end,\n            }).pipe(\n                catchError(() => of([])),\n                map((events) =>\n                    flatten(\n                        events.map((event) =>\n                            event.valid_catering.map(\n                                (o) => new CateringOrder({ ...o, event })\n                            )\n                        )\n                    )\n                ),\n                map((orders) =>\n                    orders.filter(\n                        (o) =>\n                            format(o.deliver_at, 'yyyy-MM-dd') ===\n                            format(start * 1000, 'yyyy-MM-dd')\n                    )\n                )\n            );\n        }),\n        tap(() => this._loading.next(false)),\n        shareReplay(1)\n    );\n    /** Observable for loading status of orders */\n    public readonly loading = this._loading.asObservable();\n    /** Order filters */\n    public get filters() {\n        return this._filters.getValue();\n    }\n    /** Order filters */\n    public set filters(filters: CateringOrderFilters) {\n        this._filters.next(filters);\n    }\n    /** Filtered list of catering orders */\n    public readonly filtered = this.orders.pipe(\n        map((list) =>\n            list\n                .filter((order) => checkOrder(order, this._filters.getValue()))\n                .sort((a, b) => a.deliver_at - b.deliver_at)\n        )\n    );\n\n    constructor() {\n        super();\n        this.subscription('changes', this.orders.subscribe());\n    }\n\n    /** Start polling for catering orders */\n    public startPolling(delay: number = 15 * 1000) {\n        this.interval(\n            'polling',\n            () => this._poll.next(new Date().valueOf()),\n            delay\n        );\n    }\n\n    /** Stop polling for new catering orders */\n    public stopPolling() {\n        this.clearInterval('polling');\n    }\n\n    /**\n     * Update the status of the order\n     * @param order Order to update\n     * @param status New order status\n     */\n    public async updateStatus(\n        order: CateringOrder,\n        status: CateringOrderStatus\n    ) {\n        order.status = status;\n        const updated_order = new CateringOrder({\n            ...order,\n            status,\n            event: null,\n        });\n        const catering = [\n            ...(order.event.extension_data.catering || []).filter(\n                (o) => o.id !== order.id\n            ),\n            updated_order,\n        ].map((i) => new CateringOrder({ ...i }));\n        const event = new CalendarEvent({\n            ...order.event,\n            catering,\n        });\n        const system_id = event?.resources[0]?.id || event?.system?.id;\n        const booking = await updateEventMetadata(\n            event.id,\n            system_id,\n            event.extension_data\n        ).toPromise();\n        this.timeout('refresh-list', () => this._poll.next(Date.now()), 1000);\n        (order as any).status = status;\n        return booking;\n    }\n}\n","import { Injectable } from '@angular/core';\nimport { MatDialog } from '@angular/material/dialog';\nimport {\n    updateMetadata,\n    showMetadata,\n    PlaceMetadata,\n} from '@placeos/ts-client';\nimport { BehaviorSubject, combineLatest, of } from 'rxjs';\nimport {\n    catchError,\n    filter,\n    first,\n    map,\n    shareReplay,\n    switchMap,\n    take,\n    tap,\n} from 'rxjs/operators';\n\nimport {\n    AsyncHandler,\n    flatten,\n    notifyError,\n    notifySuccess,\n    openConfirmModal,\n    SettingsService,\n    unique,\n} from '@placeos/common';\nimport { Building, OrganisationService } from '@placeos/organisation';\n\nimport {\n    CateringItemModalComponent,\n    CateringItemModalData,\n} from './catering-item-modal.component';\nimport {\n    CateringItemOptionModalComponent,\n    CateringItemOptionModalData,\n} from './catering-option-modal.component';\nimport {\n    AttachedResourceConfigModalComponent,\n    AttachedResourceRuleset,\n    AttachedResourceConfigModalData,\n} from '@placeos/components';\nimport { CateringItem } from './catering-item.class';\nimport { CateringOrder } from './catering-order.class';\nimport {\n    CateringOrderModalComponent,\n    CateringOrderModalData,\n} from './catering-order-modal.component';\nimport { CateringOption } from './catering.interfaces';\nimport {\n    CateringOrderOptionsModalComponent,\n    CateringOrderOptionsModalData,\n} from './catering-order-options-modal.component';\nimport { CateringImportMenuModalComponent } from './catering-import-menu-modal.component';\n\nexport interface CateringSettings {\n    require_notes?: boolean;\n    charge_codes?: string[];\n    disabled_rooms?: string[];\n}\n\n@Injectable({\n    providedIn: 'root',\n})\nexport class CateringStateService extends AsyncHandler {\n    private _updated = new BehaviorSubject(0);\n    /** Active menu */\n    private _menu = new BehaviorSubject<CateringItem[]>([]);\n    /** Whether the menu for the active building is loading */\n    private _loading = new BehaviorSubject<boolean>(false);\n    /** Currency code for the active building */\n    private _currency = new BehaviorSubject<string>('USD');\n\n    private _change = new BehaviorSubject(0);\n    /** Observable for the active menu */\n    public readonly menu = this._menu.asObservable();\n    /** Observable for whether the menu for the active building is loadingg */\n    public readonly loading = this._loading.asObservable();\n    /** Observable for the currency code of the active building */\n    public readonly currency = this._currency.asObservable();\n\n    public readonly settings = combineLatest([\n        this._org.active_building,\n        this._change,\n    ]).pipe(\n        filter(([_]) => !!_),\n        switchMap(([_]) =>\n            showMetadata(_.id, 'catering-settings').pipe(\n                catchError((_) => of({} as PlaceMetadata))\n            )\n        ),\n        map((_) => (_.details as CateringSettings) || {}),\n        tap((_) =>\n            this._settings.post('require_catering_notes', !!_?.require_notes)\n        ),\n        shareReplay(1)\n    );\n\n    public readonly charge_codes = this.settings.pipe(\n        map((_) => _.charge_codes || [])\n    );\n    public readonly availability = this.settings.pipe(\n        map((_) => _.disabled_rooms || [])\n    );\n\n    public zone = '';\n\n    public get is_editable() {\n        return !this.zone || this.zone === this._org.building?.id;\n    }\n\n    public get categories() {\n        const menu = this._menu.getValue();\n        return unique(menu.map((i) => i.category));\n    }\n\n    constructor(\n        private _org: OrganisationService,\n        private _dialog: MatDialog,\n        private _settings: SettingsService\n    ) {\n        super();\n        this.subscription(\n            'building',\n            this._org.active_building.subscribe(async (bld: Building) => {\n                if (bld) {\n                    const menu = (await this.getCateringForZone(bld.id)).map(\n                        (i) => new CateringItem(i)\n                    );\n                    this._currency.next(\n                        this._settings.get('app.currency') ||\n                            bld.currency ||\n                            'USD'\n                    );\n                    this._menu.next(menu);\n                }\n            })\n        );\n    }\n\n    /**\n     * Create/Edit catering order\n     * @param order Order to manipulate\n     */\n    public async manageCateringOrder(order: CateringOrder) {\n        const ref = this._dialog.open<\n            CateringOrderModalComponent,\n            CateringOrderModalData\n        >(CateringOrderModalComponent, {\n            data: {\n                code: this._currency.getValue(),\n                order,\n                menu: this.menu,\n                loading: this.loading,\n                getCateringConfig: (_) => this.getCateringConfig(_),\n                selectOptions: (_) => this.selectOptions(_),\n            },\n        });\n        const details = await Promise.race([\n            ref.componentInstance.event\n                .pipe(first((_) => _.reason === 'done'))\n                .toPromise(),\n            ref.afterClosed().toPromise(),\n        ]);\n        ref.close();\n        return details?.metadata?.order || order;\n    }\n\n    public async addItem(item: CateringItem = new CateringItem()) {\n        const ref = this._dialog.open<\n            CateringItemModalComponent,\n            CateringItemModalData\n        >(CateringItemModalComponent, {\n            data: {\n                item,\n                categories: this.categories,\n            },\n        });\n        const details = await Promise.race([\n            ref.componentInstance.event\n                .pipe(first((_) => _.reason === 'done'))\n                .toPromise(),\n            ref.afterClosed().toPromise(),\n        ]);\n        if (details?.reason !== 'done') return;\n        const menu = this._menu.getValue();\n        const index = menu.findIndex((itm) => itm.id === item.id);\n        if (index >= 0) {\n            menu.splice(index, 1, details.metadata.item);\n        } else {\n            menu.push(details.metadata.item);\n        }\n        this.updateMenu(this._org.building.id, menu).then(\n            () => {\n                this._menu.next([...menu]);\n                ref.close();\n            },\n            () => (ref.componentInstance.loading = false)\n        );\n    }\n\n    public updateItem(item: CateringItem) {\n        const menu = this._menu.getValue();\n        const index = menu.findIndex((itm) => itm.id === item.id);\n        if (index >= 0) menu.splice(index, 1, item);\n        else menu.push(item);\n        this.updateMenu(this._org.building.id, menu).then(() =>\n            this._menu.next([...menu])\n        );\n    }\n\n    public async addOption(\n        item: CateringItem,\n        option: CateringOption = {} as any\n    ) {\n        const types = unique(item.options.map((i) => i.group));\n        const ref = this._dialog.open<\n            CateringItemOptionModalComponent,\n            CateringItemOptionModalData\n        >(CateringItemOptionModalComponent, {\n            data: {\n                parent: item,\n                option,\n                types,\n            },\n        });\n        const details = await Promise.race([\n            ref.componentInstance.event\n                .pipe(first((_) => _.reason === 'done'))\n                .toPromise(),\n            ref.afterClosed().toPromise(),\n        ]);\n        if (details?.reason !== 'done') return;\n        const menu = this._menu.getValue();\n        const index = menu.findIndex((itm) => itm.id === item.id);\n        if (index >= 0) {\n            menu.splice(index, 1, details.metadata.item);\n        } else {\n            menu.push(details.metadata.item);\n        }\n        this.updateMenu(this._org.building.id, menu).then(\n            () => {\n                this._menu.next([...menu]);\n                ref.close();\n            },\n            () => (ref.componentInstance.loading = false)\n        );\n    }\n\n    public async selectOptions(options: CateringOption[]) {\n        const ref = this._dialog.open<\n            CateringOrderOptionsModalComponent,\n            CateringOrderOptionsModalData\n        >(CateringOrderOptionsModalComponent, {\n            data: {\n                code: this._currency.getValue(),\n                options,\n            },\n        });\n        const details = await Promise.race([\n            ref.componentInstance.event\n                .pipe(first((_) => _.reason === 'done'))\n                .toPromise(),\n            ref.afterClosed().toPromise(),\n        ]);\n        if (details?.reason !== 'done') return [];\n        ref.close();\n        return details.metadata.options;\n    }\n\n    public async deleteItem(item: CateringItem) {\n        const details = await openConfirmModal(\n            {\n                title: 'Delete Catering Item',\n                content: `Are you sure you wish to remove the catering item ${item.name} from the menu?`,\n                icon: {\n                    type: 'icon',\n                    class: 'material-icons',\n                    content: 'delete',\n                },\n            },\n            this._dialog\n        );\n        if (details.reason !== 'done') return;\n        details.loading('Removing catering item...');\n        const menu = this._menu.getValue().filter((itm) => item.id !== itm.id);\n        this.updateMenu(this._org.building.id, menu).then(\n            () => {\n                this._menu.next([...menu]);\n                details.close();\n            },\n            () => details.loading('')\n        );\n    }\n\n    public async deleteOption(item: CateringItem, option: CateringOption) {\n        const details = await openConfirmModal(\n            {\n                title: 'Delete Catering Item Option',\n                content: `Are you sure you wish to remove the catering option \"${option.name}\" from \"${item.name}\"?`,\n                icon: {\n                    type: 'icon',\n                    class: 'material-icons',\n                    content: 'delete',\n                },\n            },\n            this._dialog\n        );\n        if (details.reason !== 'done') return;\n        details.loading('Removing catering item option...');\n        const menu = this._menu.getValue();\n        menu.splice(\n            menu.findIndex((itm) => itm.id === item.id),\n            1,\n            new CateringItem({\n                ...item,\n                options: item.options.filter((opt) => opt.id !== option.id),\n            })\n        );\n        this.updateMenu(this._org.building.id, menu).then(\n            () => {\n                this._menu.next([...menu]);\n                details.close();\n            },\n            () => details.loading('')\n        );\n    }\n\n    public async editConfig() {\n        const config = await this.getCateringConfig(this._org.building.id);\n        const { require_notes } = await this.settings.pipe(take(1)).toPromise();\n        const menu = this._menu.getValue();\n        const types = unique(flatten(menu.map((i) => [i.category, ...i.tags])));\n        const ref = this._dialog.open<\n            AttachedResourceConfigModalComponent,\n            AttachedResourceConfigModalData\n        >(AttachedResourceConfigModalComponent, {\n            data: {\n                config,\n                types,\n                require_notes,\n                saveNotes: (b) => this.saveSettings({ require_notes: b }),\n            },\n        });\n        const details = await Promise.race([\n            ref.componentInstance.event\n                .pipe(first((_) => _.reason === 'done'))\n                .toPromise(),\n            ref.afterClosed().toPromise(),\n        ]);\n        if (details?.reason !== 'done') return;\n        this.updateConfig(this._org.building.id, details.metadata).then(\n            () => ref.close(),\n            () => (ref.componentInstance.loading = false)\n        );\n    }\n\n    public async importMenu() {\n        const ref = this._dialog.open(CateringImportMenuModalComponent);\n        const details = await Promise.race([\n            ref.componentInstance.event\n                .pipe(first((_) => _.reason === 'done'))\n                .toPromise(),\n            ref.afterClosed().toPromise(),\n        ]);\n        if (details?.reason !== 'done') return;\n        ref.componentInstance.loading = 'Updating menu...';\n        const menu = this._menu.getValue();\n        const bld = this._org.building;\n        const updated_menu = unique(details.metadata.concat(menu), 'id');\n        await this.updateMenu(bld.id, updated_menu).catch((_) => {\n            notifyError('Error importing catering menu');\n            ref.close();\n            throw _;\n        });\n        notifySuccess(\n            `Successfully imported catering menu. ${details.metadata.length} item(s) added.`\n        );\n        ref.close();\n    }\n\n    private updateMenu(zone_id: string, menu: CateringItem[]) {\n        return updateMetadata(zone_id, {\n            id: zone_id,\n            name: 'catering',\n            details: menu,\n            description: `Catering menu for ${zone_id}`,\n        }).toPromise();\n    }\n\n    public async saveSettings(settings: CateringSettings) {\n        const old_settings = await this.settings.pipe(take(1)).toPromise();\n        const result = await updateMetadata(this._org.building.id, {\n            id: this._org.building.id,\n            name: 'catering-settings',\n            details: { ...old_settings, ...settings },\n            description: `Catering settings for ${this._org.building.id}`,\n        }).toPromise();\n        this._change.next(Date.now());\n        return result;\n    }\n\n    private async getCateringForZone(zone_id: string): Promise<CateringItem[]> {\n        const menu = (await showMetadata(zone_id, 'catering').toPromise())\n            .details;\n        return menu instanceof Array ? menu : [];\n    }\n\n    public async getCateringConfig(\n        zone_id: string = this._org.building.id\n    ): Promise<AttachedResourceRuleset[]> {\n        const rules = (\n            await showMetadata(zone_id, 'catering_config').toPromise()\n        ).details;\n        return rules instanceof Array ? (rules as any) : [];\n    }\n\n    private updateConfig(zone_id: string, config: AttachedResourceRuleset[]) {\n        return updateMetadata(zone_id, {\n            id: zone_id,\n            name: 'catering_config',\n            details: config,\n            description: `Catering menu config for ${zone_id}`,\n        }).toPromise();\n    }\n\n    public addItemToOrder(order: CateringOrder, new_item: CateringItem) {\n        let items = order.items;\n        const match = items.find(\n            (item) =>\n                item.id === new_item.id &&\n                new_item.options?.length ===\n                    item.options?.reduce(\n                        (c, o) =>\n                            c +\n                            (new_item.options.find((opt) => o.id === opt.id)\n                                ? 1\n                                : 0),\n                        0\n                    )\n        );\n        match\n            ? ((match as any).quantity += 1)\n            : (items = items.concat([\n                  new CateringItem({ ...new_item, quantity: 1 }),\n              ]));\n        const new_order = new CateringOrder({\n            ...order,\n            items,\n            event: null,\n        });\n        return new_order;\n    }\n}\n","import { Identity } from '@placeos/common';\n\nexport const CATERING_STATUSES: Identity[] = [\n    { id: 'pending', name: 'Pending', icon: { class: 'custom-pending' }, colour: '#ccc' },\n    { id: 'accepted', name: 'Accepted', icon: { class: 'custom-accepted' }, colour: '#3996B6' },\n    {\n        id: 'preparing',\n        name: 'Preparing',\n        icon: { class: 'custom-preparing' },\n        colour: '#E7536B',\n    },\n    { id: 'ready', name: 'Ready', icon: { class: 'custom-ready' }, colour: '#FFD028' },\n    {\n        id: 'delivered',\n        name: 'Delivered',\n        icon: { class: 'custom-delivered' },\n        colour: '#75BB43',\n    },\n    {\n        id: 'cancelled',\n        name: 'Cancelled',\n        icon: { class: 'custom-cancelled' },\n        colour: '#747474',\n    },\n];\n"],"x_google_ignoreList":[]}