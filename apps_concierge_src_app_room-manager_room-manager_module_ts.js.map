{"version":3,"file":"apps_concierge_src_app_room-manager_room-manager_module_ts.js","mappings":"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","sources":["./apps/concierge/src/app/room-manager/new-room-manager.component.ts","./apps/concierge/src/app/room-manager/room-list.component.ts","./apps/concierge/src/app/room-manager/room-management.service.ts","./apps/concierge/src/app/room-manager/room-manager-topbar.component.ts","./apps/concierge/src/app/room-manager/room-manager.component.ts","./apps/concierge/src/app/room-manager/room-manager.module.ts","./apps/concierge/src/app/room-manager/room-modal.component.ts","./libs/users/src/index.ts","./libs/users/src/lib/location.class.ts"],"sourcesContent":["import { Component } from '@angular/core';\n\n@Component({\n    selector: '[app-new-room-manager]',\n    template: `\n        <app-topbar></app-topbar>\n        <div class=\"flex flex-1 h-px\">\n            <app-sidebar></app-sidebar>\n            <main class=\"flex flex-col flex-1 w-1/2 h-full\">\n                <room-manager-topbar class=\"block w-full\"></room-manager-topbar>\n                <room-list\n                    class=\"block w-full relative flex-1 h-1/2\"\n                ></room-list>\n            </main>\n        </div>\n    `,\n    styles: [\n        `\n            :host {\n                display: flex;\n                flex-direction: column;\n                height: 100%;\n                width: 100%;\n                background-color: var(--b1);\n            }\n\n            sidebar {\n                height: 100%;\n            }\n\n            main {\n                display: flex;\n                flex-direction: column;\n                flex: 1;\n                min-width: 50%;\n                height: 100%;\n            }\n        `,\n    ],\n})\nexport class NewRoomManagerComponent {}\n","import { Component } from '@angular/core';\nimport { RoomManagementService } from './room-management.service';\nimport { Clipboard } from '@angular/cdk/clipboard';\nimport { notifySuccess, SettingsService } from '@placeos/common';\n\n@Component({\n    selector: 'room-list',\n    template: `\n        <div class=\"absolute inset-0 overflow-auto px-8\">\n            <simple-table\n                class=\"min-w-[48rem] block text-sm\"\n                [data]=\"rooms\"\n                empty_message=\"No rooms for selected level or building\"\n                [columns]=\"[\n                    {\n                        key: 'display_name',\n                        name: 'Room Name',\n                        content: name_template,\n                    },\n                    {\n                        key: 'zones',\n                        name: 'Level',\n                        size: '10rem',\n                        content: level_template,\n                    },\n                    { key: 'capacity', name: 'Capacity', size: '6rem' },\n                    { key: 'type', name: 'Room Type', size: '8rem' },\n                    {\n                        key: 'bookable',\n                        name: 'Bookable',\n                        size: '5.5rem',\n                        content: bool_template,\n                        sortable: false,\n                    },\n                    {\n                        key: 'actions',\n                        name: ' ',\n                        content: action_template,\n                        size: '6.5rem',\n                        sortable: false,\n                    },\n                ]\"\n                [sortable]=\"true\"\n            ></simple-table>\n            <div class=\"w-full h-20\"></div>\n        </div>\n        <ng-template #name_template let-row=\"row\" let-data=\"data\">\n            <button\n                class=\"px-4 py-2 text-left leading-tight\"\n                (click)=\"copyToClipboard(row.id)\"\n            >\n                <div class=\"\">{{ data }}</div>\n                <div class=\"text-[0.625rem] opacity-30 font-mono\">\n                    {{ row.id }}\n                </div>\n            </button>\n        </ng-template>\n        <ng-template #level_template let-data=\"data\">\n            <div class=\"p-4\">\n                {{ (data | level)?.display_name || (data | level)?.name }}\n            </div>\n        </ng-template>\n        <ng-template #bool_template let-data=\"data\">\n            <div\n                [class.bg-error]=\"!data\"\n                [class.bg-success]=\"data\"\n                class=\"rounded h-8 w-8 flex items-center justify-center text-2xl text-white mx-auto\"\n            >\n                <app-icon>{{ data ? 'done' : 'close' }}</app-icon>\n            </div>\n        </ng-template>\n        <ng-template #action_template let-row=\"row\">\n            <div class=\"flex items-center space-x-2 p-2 mx-auto\">\n                <button\n                    icon\n                    matRipple\n                    matTooltip=\"Edit Room\"\n                    (click)=\"editRoom(row)\"\n                >\n                    <app-icon>edit</app-icon>\n                </button>\n            </div>\n            <div class=\"flex items-center space-x-2 p-2 mx-auto\">\n                <a\n                    icon\n                    matRipple\n                    matTooltip=\"View AV Control Panel\"\n                    [href]=\"control_path + '/#/tabbed/' + row.id\"\n                    target=\"_blank\"\n                    ref=\"noopener noreferrer\"\n                >\n                    <app-icon className=\"material-symbols-rounded\">\n                        tv_remote\n                    </app-icon>\n                </a>\n            </div>\n        </ng-template>\n    `,\n    styles: [``],\n})\nexport class RoomListComponent {\n    public readonly rooms = this._manager.filtered_rooms;\n\n    public readonly editRoom = (room) => this._manager.editRoom(room);\n\n    public readonly copyToClipboard = (id: string) => {\n        const success = this._clipboard.copy(id);\n        if (success) notifySuccess('Room ID copied to clipboard.');\n    };\n\n    public get control_path() {\n        return this._settings.get('app.control_path') || '/av_control';\n    }\n\n    constructor(\n        private _manager: RoomManagementService,\n        private _clipboard: Clipboard,\n        private _settings: SettingsService,\n    ) {}\n}\n","import { Injectable } from '@angular/core';\nimport { MatDialog } from '@angular/material/dialog';\nimport { OrganisationService } from '@placeos/organisation';\nimport { PlaceSystem, querySystems } from '@placeos/ts-client';\nimport { BehaviorSubject, combineLatest, of } from 'rxjs';\nimport {\n    catchError,\n    filter,\n    map,\n    shareReplay,\n    switchMap,\n} from 'rxjs/operators';\nimport { RoomModalComponent } from './room-modal.component';\nimport { SettingsService } from '@placeos/common';\n\nexport interface RoomListOptions {\n    zones?: string[];\n    search?: string;\n}\n\n@Injectable({\n    providedIn: 'root',\n})\nexport class RoomManagementService {\n    private _options = new BehaviorSubject<RoomListOptions>({});\n    private _change = new BehaviorSubject(0);\n\n    public options = this._options.asObservable();\n\n    public readonly room_list = combineLatest([\n        this._org.active_building,\n        this._org.active_region,\n        this._change,\n    ]).pipe(\n        filter(([b, r]) => !!b?.id),\n        switchMap(([bld, region]) =>\n            querySystems({\n                zone_id:\n                    (this._settings.get('app.use_region') ? region.id : '') ||\n                    bld.id,\n                limit: 2500,\n            }).pipe(\n                map(({ data }) => data),\n                catchError(() => of([]))\n            )\n        ),\n        map((list) =>\n            list\n                .filter((_) => this._org.levelWithID(_.zones as any))\n                .sort((a, b) => a.name.localeCompare(b.name))\n        ),\n        shareReplay(1)\n    );\n\n    public readonly filtered_rooms = combineLatest([\n        this.room_list,\n        this._options,\n    ]).pipe(\n        map(([list, options]) => {\n            if (options.zones?.length) {\n                list = list.filter((_) =>\n                    options.zones.find((z) => _.zones.includes(z))\n                );\n            }\n            if (options.search) {\n                list = list.filter((_) =>\n                    _.name.toLowerCase().includes(options.search.toLowerCase())\n                );\n            }\n            return list;\n        })\n    );\n\n    constructor(\n        private _org: OrganisationService,\n        private _dialog: MatDialog,\n        private _settings: SettingsService\n    ) {}\n\n    public setFilters(options: Partial<RoomListOptions>) {\n        this._options.next({ ...this._options.getValue(), ...options });\n    }\n\n    public setSearchString(search: string) {\n        this._options.next({ ...this._options.getValue(), search });\n    }\n\n    public editRoom(room: PlaceSystem = new PlaceSystem()) {\n        const ref = this._dialog.open(RoomModalComponent, { data: { room } });\n        ref.afterClosed().subscribe((data) => {\n            if (data) setTimeout(() => this._change.next(Date.now()), 300);\n        });\n    }\n}\n","import { Component } from '@angular/core';\nimport { RoomManagementService } from './room-management.service';\nimport { OrganisationService } from '@placeos/organisation';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { AsyncHandler, SettingsService } from '@placeos/common';\nimport { first, map, take } from 'rxjs/operators';\nimport { MatDialog } from '@angular/material/dialog';\nimport { BookingRulesModalComponent } from '../ui/booking-rules-modal.component';\nimport { combineLatest } from 'rxjs';\n\n@Component({\n    selector: 'room-manager-topbar',\n    template: `\n        <div class=\"flex items-center px-8 pt-4 space-x-2\">\n            <h2 class=\"text-2xl font-medium\">Room Management</h2>\n            <div class=\"flex-1 w-2\"></div>\n            <searchbar (modelChange)=\"setSearch($event)\"></searchbar>\n            <button btn (click)=\"newRoom()\" class=\"w-40\">New Room</button>\n        </div>\n        <div class=\"flex items-center bg-base-100 h-20 px-8 space-x-2\">\n            <mat-form-field appearance=\"outline\" class=\"no-subscript w-60\">\n                <mat-select\n                    [ngModel]=\"(filters | async)?.zones\"\n                    (ngModelChange)=\"updateZones($event)\"\n                    placeholder=\"All Levels\"\n                    multiple\n                >\n                    <mat-option\n                        *ngFor=\"let level of levels | async\"\n                        [value]=\"level.id\"\n                    >\n                        <div class=\"flex flex-col-reverse\">\n                            <div class=\"text-xs opacity-30\" *ngIf=\"use_region\">\n                                {{ (level.parent_id | building)?.display_name }}\n                                <span class=\"opacity-0\"> - </span>\n                            </div>\n                            <div>\n                                {{ level.display_name || level.name }}\n                            </div>\n                        </div>\n                    </mat-option>\n                </mat-select>\n            </mat-form-field>\n            <div class=\"flex-1 w-2\"></div>\n            <button\n                btn\n                icon\n                matRipple\n                class=\"bg-secondary text-secondary-content rounded h-12 w-12\"\n                (click)=\"manageRestrictions()\"\n                matTooltip=\"Room Restrictions\"\n            >\n                <app-icon>lock_open</app-icon>\n            </button>\n        </div>\n    `,\n    styles: [\n        `\n            mat-form-field {\n                height: 3.25rem;\n            }\n        `,\n    ],\n})\nexport class RoomManagerTopbarComponent extends AsyncHandler {\n    /** List of levels for the active building */\n    public readonly levels = combineLatest([\n        this._org.active_building,\n        this._org.active_region,\n    ]).pipe(\n        map(([bld, region]) =>\n            this.use_region\n                ? this._org.levelsForRegion(region)\n                : this._org.levelsForBuilding(bld)\n        )\n    );\n\n    public readonly filters = this._manager.options;\n    /** Set filtered date */\n    public readonly setFilters = (filters) => this._manager.setFilters(filters);\n    /** Set filter string */\n    public readonly setSearch = (str) => this._manager.setSearchString(str);\n    /** Update active zones for desks */\n    public readonly updateZones = (zones) => {\n        this._router.navigate([], {\n            relativeTo: this._route,\n            queryParams: { zone_ids: zones.join(',') },\n        });\n    };\n\n    public readonly newRoom = () => this._manager.editRoom();\n\n    public get building() {\n        return this._org.building;\n    }\n\n    public get use_region() {\n        return !!this._settings.get('app.use_region');\n    }\n\n    public get root_zone() {\n        return (\n            (this.use_region ? this._org.region.id : '') ||\n            this._org.building.id\n        );\n    }\n\n    constructor(\n        private _manager: RoomManagementService,\n        private _org: OrganisationService,\n        private _route: ActivatedRoute,\n        private _router: Router,\n        private _dialog: MatDialog,\n        private _settings: SettingsService\n    ) {\n        super();\n    }\n\n    public manageRestrictions() {\n        this._dialog.open(BookingRulesModalComponent, {\n            data: { type: 'room' },\n        });\n    }\n\n    public async ngOnInit() {\n        await this._org.initialised.pipe(first((_) => _)).toPromise();\n        this.subscription(\n            'route.query',\n            this._route.queryParamMap.subscribe(async (params) => {\n                if (params.has('zone_ids')) {\n                    const zone_list = (params.get('zone_ids') || '').split(',');\n                    const zones = zone_list.filter((z) => z);\n                    this._manager.setFilters({ zones });\n                }\n            })\n        );\n        this.setSearch('');\n    }\n}\n","import { Component } from '@angular/core';\n\n@Component({\n    selector: '[app-room-manager]',\n    template: `\n        <sidebar></sidebar>\n        <main class=\"relative overflow-hidden flex flex-col\">\n            <room-manager-topbar class=\"block w-full\"></room-manager-topbar>\n            <room-list class=\"block w-full relative flex-1 h-1/2\"></room-list>\n        </main>\n    `,\n    styles: [\n        `\n            :host {\n                display: flex;\n                height: 100%;\n                width: 100%;\n                background: var(--b1);\n            }\n\n            sidebar {\n                height: 100%;\n            }\n\n            main {\n                display: flex;\n                flex-direction: column;\n                flex: 1;\n                min-width: 50%;\n                height: 100%;\n            }\n        `,\n    ],\n})\nexport class RoomManagerComponent {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { RouterModule, Route } from '@angular/router';\n\nimport { UIModule } from '../ui/ui.module';\n\nimport { SharedSpacesModule } from '@placeos/spaces';\nimport { SharedUsersModule } from '@placeos/users';\n\nimport { RoomManagerComponent } from './room-manager.component';\nimport { RoomManagerTopbarComponent } from './room-manager-topbar.component';\nimport { RoomListComponent } from './room-list.component';\nimport { RoomModalComponent } from './room-modal.component';\nimport { MatChipsModule } from '@angular/material/chips';\nimport { NewRoomManagerComponent } from './new-room-manager.component';\n\nconst ROUTES: Route[] = [\n    { path: '', component: RoomManagerComponent },\n    { path: 'new', component: NewRoomManagerComponent },\n];\n\n@NgModule({\n    declarations: [\n        NewRoomManagerComponent,\n        RoomManagerComponent,\n        RoomManagerTopbarComponent,\n        RoomListComponent,\n        RoomModalComponent,\n    ],\n    imports: [\n        CommonModule,\n        FormsModule,\n        UIModule,\n        SharedSpacesModule,\n        SharedUsersModule,\n        MatChipsModule,\n        RouterModule.forChild(ROUTES),\n    ],\n})\nexport class RoomManagerModule {}\n","import { Component, Inject, SimpleChanges } from '@angular/core';\nimport { SPACE, ENTER, COMMA } from '@angular/cdk/keycodes';\nimport { MatChipInputEvent } from '@angular/material/chips';\nimport {\n    EncryptionLevel,\n    addSystem,\n    queryZones,\n    showMetadata,\n    updateMetadata,\n    updateSystem,\n} from '@placeos/ts-client';\nimport { map } from 'rxjs/operators';\n\nimport {\n    AsyncHandler,\n    TIMEZONES_IANA,\n    getInvalidFields,\n    getItemWithKeys,\n    notifyError,\n    notifyInfo,\n    notifyWarn,\n    unique,\n} from '@placeos/common';\nimport { Space, generateSystemsFormFields } from '@placeos/spaces';\nimport { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material/dialog';\nimport { OrganisationService } from '@placeos/organisation';\nimport { FormControl, FormGroup } from '@angular/forms';\n\n@Component({\n    selector: 'room-form-modal',\n    template: `\n        <header>\n            <h2>{{ form.value.id ? 'Edit' : 'Add' }} Room</h2>\n            <button btn icon mat-dialog-close *ngIf=\"!loading\">\n                <app-icon>close</app-icon>\n            </button>\n        </header>\n        <main\n            class=\"max-h-[65vh] overflow-y-auto overflow-x-hidden p-4\"\n            *ngIf=\"!loading; else load_state\"\n        >\n            <form\n                system\n                class=\"flex flex-col w-[36rem] max-w-[calc(100vw-4rem)]\"\n                *ngIf=\"form\"\n                [formGroup]=\"form\"\n            >\n                <div class=\"flex flex-col\" *ngIf=\"form.controls.zone\">\n                    <label\n                        for=\"zone\"\n                        [class.error]=\"\n                            form.controls.zone.invalid &&\n                            form.controls.zone.touched\n                        \"\n                        i18n=\"@@zoneLabel\"\n                    >\n                        Level<span>*</span>:\n                    </label>\n                    <mat-form-field appearance=\"outline\">\n                        <mat-select\n                            formControlName=\"zone\"\n                            placeholder=\"Select Level\"\n                        >\n                            <mat-option\n                                *ngFor=\"let level of levels | async\"\n                                [value]=\"level.id\"\n                            >\n                                {{ level.display_name || level.name }}\n                            </mat-option>\n                        </mat-select>\n                        <mat-error>Level is required</mat-error>\n                    </mat-form-field>\n                </div>\n                <div class=\"flex space-x-2\">\n                    <div\n                        class=\"flex flex-col flex-1\"\n                        *ngIf=\"form.controls.name\"\n                    >\n                        <label\n                            for=\"system-name\"\n                            [class.error]=\"\n                                form.controls.name.invalid &&\n                                form.controls.name.touched\n                            \"\n                            i18n=\"@@nameLabel\"\n                        >\n                            Name<span>*</span>:\n                        </label>\n                        <mat-form-field appearance=\"outline\">\n                            <input\n                                matInput\n                                name=\"system-name\"\n                                placeholder=\"Room Name\"\n                                i18n-placeholder=\"@@systemNamePlaceholder\"\n                                formControlName=\"name\"\n                                required\n                            />\n                            <mat-error\n                                *ngIf=\"form.controls.name.invalid\"\n                                i18n=\"@@systemNameError\"\n                                >Room name is required</mat-error\n                            >\n                        </mat-form-field>\n                    </div>\n                    <div\n                        class=\"flex flex-col flex-1\"\n                        *ngIf=\"form.controls.email\"\n                    >\n                        <label\n                            for=\"system-email\"\n                            [class.error]=\"\n                                form.controls.email.invalid &&\n                                form.controls.email.touched\n                            \"\n                            i18n=\"@@emailLabel\"\n                        >\n                            Email:\n                        </label>\n                        <mat-form-field appearance=\"outline\">\n                            <input\n                                matInput\n                                name=\"system-email\"\n                                placeholder=\"Room Email\"\n                                i18n-placeholder=\"@@systemEmailPlaceholder\"\n                                formControlName=\"email\"\n                            />\n                            <mat-error\n                                *ngIf=\"form.controls.email.invalid\"\n                                i18n=\"@@emailError\"\n                                >A valid email is required</mat-error\n                            >\n                        </mat-form-field>\n                    </div>\n                </div>\n                <div class=\"flex space-x-2\">\n                    <div\n                        class=\"flex flex-col flex-1\"\n                        *ngIf=\"form.controls.display_name\"\n                    >\n                        <label for=\"display-name\" i18n=\"@@displayNameLabel\"\n                            >Display Name:\n                        </label>\n                        <mat-form-field appearance=\"outline\">\n                            <input\n                                matInput\n                                name=\"display-name\"\n                                placeholder=\"Display Name\"\n                                i18n-placeholder=\"@@displayNamePlaceholder\"\n                                formControlName=\"display_name\"\n                            />\n                        </mat-form-field>\n                    </div>\n                    <div\n                        class=\"flex flex-col flex-1\"\n                        *ngIf=\"form.controls.display_name\"\n                    >\n                        <label for=\"code-name\" i18n=\"@@codeNameLabel\"\n                            >Code:\n                        </label>\n                        <mat-form-field appearance=\"outline\">\n                            <input\n                                matInput\n                                name=\"code-name\"\n                                placeholder=\"Code\"\n                                i18n-placeholder=\"@@codeNamePlaceholder\"\n                                formControlName=\"code\"\n                            />\n                        </mat-form-field>\n                    </div>\n                </div>\n                <div class=\"flex space-x-2\" [formGroup]=\"settings_form\">\n                    <div class=\"flex-1 flex flex-col space-y-2\">\n                        <label for=\"setup\" class=\"flex items-center\">\n                            Default Setup Duration\n                            <app-icon\n                                class=\"ml-2\"\n                                matTooltip=\"Time before a meeting needed for setup and preparation for the upcoming meeting\"\n                            >\n                                info_outline\n                            </app-icon>\n                        </label>\n                        <a-duration-field\n                            name=\"setup\"\n                            formControlName=\"setup\"\n                            [min]=\"0\"\n                        ></a-duration-field>\n                    </div>\n                    <div class=\"flex-1 flex flex-col space-y-2\">\n                        <label for=\"breakdown\" class=\"flex items-center\">\n                            Default Breakdown Duration\n                            <app-icon\n                                class=\"ml-2\"\n                                matTooltip=\"Time after a meeting needed for cleaning and preparation for next meeting\"\n                            >\n                                info_outline\n                            </app-icon>\n                        </label>\n                        <a-duration-field\n                            name=\"breakdown\"\n                            [min]=\"0\"\n                            formControlName=\"breakdown\"\n                        ></a-duration-field>\n                    </div>\n                </div>\n                <div class=\"flex space-x-2\">\n                    <div\n                        class=\"flex flex-col flex-1\"\n                        *ngIf=\"form.controls.capacity\"\n                    >\n                        <label\n                            for=\"capacity\"\n                            [class.error]=\"\n                                form.controls.capacity.invalid &&\n                                form.controls.capacity.touched\n                            \"\n                            i18n=\"@@capacityLabel\"\n                        >\n                            Capacity:\n                        </label>\n                        <mat-form-field appearance=\"outline\">\n                            <input\n                                matInput\n                                name=\"capacity\"\n                                type=\"number\"\n                                placeholder=\"Capacity\"\n                                i18n-placeholder=\"@@capacityPlaceholder\"\n                                formControlName=\"capacity\"\n                            />\n                            <mat-error\n                                *ngIf=\"form.controls.capacity.invalid\"\n                                i18n=\"@@capacityError\"\n                            >\n                                A valid positive number is required\n                            </mat-error>\n                        </mat-form-field>\n                    </div>\n                    <div class=\"flex flex-col\" *ngIf=\"form.controls.bookable\">\n                        <mat-checkbox\n                            name=\"bookable\"\n                            formControlName=\"bookable\"\n                            i18n=\"@@bookableLabel\"\n                        >\n                            Bookable\n                        </mat-checkbox>\n                    </div>\n                </div>\n                <div class=\"flex flex-col\" *ngIf=\"form.controls.description\">\n                    <label for=\"description\" i18n=\"@@descriptionLabel\"\n                        >Description:</label\n                    >\n                    <mat-form-field appearance=\"outline\">\n                        <textarea\n                            matInput\n                            name=\"description\"\n                            placeholder=\"Description\"\n                            i18n=\"@@descriptionPlaceholder\"\n                            formControlName=\"description\"\n                        ></textarea>\n                    </mat-form-field>\n                </div>\n                <div class=\"flex flex-col\" *ngIf=\"form.controls.features\">\n                    <label\n                        [class.error]=\"\n                            form.controls.features.invalid &&\n                            form.controls.features.touched\n                        \"\n                        i18n=\"@@featuresLabel\"\n                    >\n                        Features:\n                    </label>\n                    <mat-form-field appearance=\"outline\">\n                        <mat-chip-grid #chipList aria-label=\"Room features\">\n                            <mat-chip-row\n                                *ngFor=\"let feature of feature_list\"\n                                [selectable]=\"true\"\n                                [removable]=\"true\"\n                                (removed)=\"removeFeature(feature)\"\n                            >\n                                {{ feature }}\n                                <app-icon matChipRemove>close</app-icon>\n                            </mat-chip-row>\n                            <input\n                                placeholder=\"New feature...\"\n                                [matChipInputFor]=\"chipList\"\n                                [matChipInputSeparatorKeyCodes]=\"separators\"\n                                [matChipInputAddOnBlur]=\"true\"\n                                (matChipInputTokenEnd)=\"addFeature($event)\"\n                            />\n                        </mat-chip-grid>\n                    </mat-form-field>\n                </div>\n                <div class=\"flex flex-col\" *ngIf=\"form.controls.map_id\">\n                    <label for=\"map_id\" i18n=\"@@mapIdLabel\">Map ID:</label>\n                    <mat-form-field appearance=\"outline\">\n                        <input\n                            matInput\n                            name=\"map_id\"\n                            i18n-placeholder=\"@@mapIdPlaceholder\"\n                            placeholder=\"Map SVG ID selector e.g. area-01.10-status\"\n                            formControlName=\"map_id\"\n                        />\n                    </mat-form-field>\n                </div>\n                <div class=\"flex flex-col\">\n                    <label for=\"timezone\">Timezone</label>\n                    <mat-form-field appearance=\"outline\">\n                        <app-icon matPrefix class=\"text-2xl\">search</app-icon>\n                        <input\n                            matInput\n                            formControlName=\"timezone\"\n                            placeholder=\"Room timezone\"\n                            [matAutocomplete]=\"auto\"\n                        />\n                    </mat-form-field>\n                    <mat-autocomplete #auto=\"matAutocomplete\">\n                        <mat-option\n                            *ngFor=\"let tz of filtered_timezones\"\n                            [value]=\"tz\"\n                            >{{ tz }}</mat-option\n                        >\n                        <mat-option *ngIf=\"!timezones.length\" [disabled]=\"true\">\n                            No matching timezones\n                        </mat-option>\n                    </mat-autocomplete>\n                </div>\n                <div class=\"flex flex-col\" *ngIf=\"form.controls.images\">\n                    <label for=\"images\" i18n=\"@@imagesLabel\">Images:</label>\n                    <image-list-field\n                        name=\"images\"\n                        formControlName=\"images\"\n                    ></image-list-field>\n                </div>\n            </form>\n        </main>\n        <footer\n            class=\"p-2 flex justify-end border-t border-base-200\"\n            *ngIf=\"!loading\"\n        >\n            <button btn class=\"w-32\" (click)=\"save()\">Save</button>\n        </footer>\n        <ng-template #load_state>\n            <div class=\"flex flex-col items-center justify-center w-64 h-64\">\n                <mat-spinner diameter=\"32\"></mat-spinner>\n                <p class=\"mt-4\">Saving room...</p>\n            </div>\n        </ng-template>\n    `,\n    styles: [\n        `\n            mat-checkbox {\n                margin-top: 2.5em;\n                margin-bottom: 1.5em;\n            }\n\n            @media screen and (max-width: 640px) {\n                mat-checkbox {\n                    margin-top: 0;\n                }\n            }\n        `,\n    ],\n})\nexport class RoomModalComponent extends AsyncHandler {\n    public loading = false;\n    public timezones: string[] = [];\n    public filtered_timezones: string[] = [];\n    /** List of levels for the active building */\n    public readonly levels = this._org.active_levels;\n    /** Group of form fields used for creating the system */\n    public form = generateSystemsFormFields(this._data.room as any);\n    public settings_form = new FormGroup({\n        setup: new FormControl(0),\n        breakdown: new FormControl(0),\n    });\n    /** Levels of encyption available for the system's settings */\n    public encryption_levels: any[] = [\n        { id: EncryptionLevel.None, name: 'None' },\n        { id: EncryptionLevel.Support, name: 'Support' },\n        { id: EncryptionLevel.Admin, name: 'Admin' },\n        { id: EncryptionLevel.NeverDisplay, name: 'Never Display' },\n    ];\n    /** Function for querying zones */\n    public readonly query_fn = (_: string) =>\n        queryZones({ q: _ }).pipe(map((resp) => resp.data));\n    /** List of separator characters for features */\n    public readonly separators: number[] = [ENTER, COMMA, SPACE];\n\n    public get feature_list(): string[] {\n        return this.form.controls.features.value;\n    }\n\n    constructor(\n        @Inject(MAT_DIALOG_DATA) private _data: { room: Space },\n        private _dialog_ref: MatDialogRef<RoomModalComponent>,\n        private _org: OrganisationService\n    ) {\n        super();\n    }\n\n    public async ngOnInit() {\n        const { details } = await showMetadata(\n            this._org.organisation.id,\n            'settings'\n        ).toPromise();\n        const overflow = getItemWithKeys(['events', 'overflow'], details) || {};\n        if (this._data.room.id && overflow[this._data.room.id]) {\n            this.settings_form.patchValue(overflow[this._data.room.id]);\n        }\n    }\n\n    public ngOnChanges(changes: SimpleChanges): void {\n        if (changes.form) {\n            this.updateTimezoneList();\n            this.subscription(\n                'tz-change',\n                this.form.valueChanges.subscribe(\n                    ({ timezone }) =>\n                        (this.filtered_timezones = this.timezones.filter((_) =>\n                            _.toLowerCase().includes(timezone.toLowerCase())\n                        ))\n                )\n            );\n        }\n    }\n\n    /**\n     * Add a feature to the list of features for the item\n     * @param event Input event\n     */\n    public addFeature(event: MatChipInputEvent): void {\n        if (!this.form || !this.form.controls.features) return;\n        const input = event.input;\n        const value = event.value;\n        const feature_list = this.feature_list;\n        if ((value || '').trim()) {\n            feature_list.push(value);\n            this.form.controls.features.setValue(feature_list);\n        }\n\n        // Reset the input value\n        if (input) {\n            input.value = '';\n        }\n    }\n\n    /**\n     * Remove feature from the list\n     * @param existing_feature Feature to remove\n     */\n    public removeFeature(existing_feature: string): void {\n        if (!this.form || !this.form.controls.features) return;\n        const feature_list = this.feature_list;\n        const index = feature_list.indexOf(existing_feature);\n\n        if (index >= 0) {\n            feature_list.splice(index, 1);\n            this.form.controls.features.setValue(feature_list);\n        }\n    }\n\n    public updateTimezoneList() {\n        const timezone = this.form?.value?.timezone || '';\n        this.timezones = TIMEZONES_IANA;\n        this.filtered_timezones = this.timezones.filter((_) =>\n            _.toLowerCase().includes(timezone.toLowerCase())\n        );\n    }\n\n    public async save() {\n        if (!this.form.valid)\n            return notifyError(\n                `Some form fields are invalid. [${getInvalidFields(\n                    this.form\n                ).join(', ')}]`\n            );\n        if (!this.form.value.id) {\n            this.form.patchValue({\n                display_name:\n                    this.form.value.display_name || this.form.value.name,\n                zones: unique([\n                    this._org.organisation.id,\n                    this._org.building.parent_id,\n                    this._org.building.id,\n                    `${this.form.value.zone?.id || this.form.value.zone || ''}`,\n                ]).filter((_) => _),\n            });\n        }\n        this.loading = true;\n        this._dialog_ref.disableClose = true;\n        const data = this.form.getRawValue();\n        const { details } = (await showMetadata(\n            this._org.organisation.id,\n            'settings'\n        ).toPromise()) as any;\n        const overflow = getItemWithKeys(['events', 'overflow'], details) || {};\n        overflow[data.id] = this.settings_form.value;\n        await updateMetadata(this._org.organisation.id, {\n            name: 'settings',\n            details: {\n                ...details,\n                events: { ...(details.events || {}), overflow },\n            },\n            description: '',\n        })\n            .toPromise()\n            .catch((e) =>\n                notifyWarn('Unable to save room setup and breakdown times')\n            );\n        await (data.id\n            ? updateSystem(data.id, data)\n            : addSystem(data)\n        ).toPromise();\n        this._dialog_ref.disableClose = false;\n        this._dialog_ref.close(true);\n        this.loading = false;\n    }\n}\n","export * from './lib/users.module';\nexport * from './lib/new-user-modal.component';\nexport * from './lib/find-availability-modal/find-availability-modal.component';\nexport * from './lib/user-form.component';\nexport * from './lib/location.class';\nexport * from './lib/user.class';\nexport * from './lib/user.utilities';\nexport * from './lib/users.module';\nexport * from './lib/guests.fn';\nexport * from './lib/staff.fn';\n","import { HashMap } from '@placeos/common';\nimport { getUnixTime } from 'date-fns';\n\nexport class MapLocation {\n    /** Source that the location was generated */\n    public type: 'desk' | 'wireless' | 'meeting' | 'other';\n    /** Details of the location */\n    public position: string | { x: number, y: number };\n    /** Accuracy of the location data */\n    public variance: number;\n    /** Unix epoch in seconds that the data was last updated */\n    public last_seen: number;\n    /** ID of the level associated with the location */\n    public level: string;\n    /** ID of the building associated with the location */\n    public building: string;\n    /** Whether user is currently at the location if fixed */\n    public at_location: boolean;\n    /**  */\n    public coordinates_from:\n        | 'top-left'\n        | 'top-right'\n        | 'bottom-left'\n        | 'bottom-right';\n\n    constructor(_data: HashMap = {}) {\n        this.type = _data.type || _data.location || 'other';\n        this.position = _data.position ||\n            _data.map_id || _data.asset_id || {\n                x: _data.x / _data.map_width || 0,\n                y: _data.y / _data.map_height || 0,\n            };\n        this.variance = _data.variance || 0;\n        this.last_seen = _data.last_seen || getUnixTime(new Date());\n        this.level = _data.level;\n        this.building = _data.building;\n        this.at_location = !!_data.at_location;\n        this.coordinates_from = _data.coordinates_from || 'top-left';\n    }\n}\n"],"names":["NewRoomManagerComponent","_","_2","selectors","attrs","_c0","decls","vars","consts","template","NewRoomManagerComponent_Template","rf","ctx","i0","element","elementStart","elementEnd","RoomManagementService","Clipboard","notifySuccess","SettingsService","listener","RoomListComponent_ng_template_3_Template_button_click_0_listener","row_r2","restoreView","_r1","row","ctx_r2","nextContext","resetView","copyToClipboard","id","text","advance","textInterpolate","data_r4","textInterpolate1","tmp_6_0","pipeBind1","data_r5","display_name","name","classProp","data_r6","RoomListComponent_ng_template_9_Template_button_click_1_listener","row_r8","_r7","editRoom","property","control_path","sanitizeUrl","RoomListComponent","_settings","get","constructor","_manager","_clipboard","rooms","filtered_rooms","room","success","copy","directiveInject","i1","i2","i3","RoomListComponent_Template","template","RoomListComponent_ng_template_3_Template","templateRefExtractor","RoomListComponent_ng_template_5_Template","RoomListComponent_ng_template_7_Template","RoomListComponent_ng_template_9_Template","pureFunction6","_c6","pureFunction1","name_template_r9","_c1","level_template_r10","pureFunction0","_c2","_c3","_c4","bool_template_r11","_c5","action_template_r12","MatDialog","OrganisationService","PlaceSystem","querySystems","BehaviorSubject","combineLatest","of","catchError","filter","map","shareReplay","switchMap","RoomModalComponent","_org","_dialog","_options","_change","options","asObservable","room_list","active_building","active_region","pipe","b","r","bld","region","zone_id","limit","data","list","levelWithID","zones","sort","a","localeCompare","length","find","z","includes","search","toLowerCase","setFilters","next","getValue","setSearchString","ref","open","afterClosed","subscribe","setTimeout","Date","now","inject","factory","fac","providedIn","ActivatedRoute","Router","AsyncHandler","first","BookingRulesModalComponent","tmp_3_0","level_r1","parent_id","RoomManagerTopbarComponent_mat_option_11_div_2_Template","ctx_r1","use_region","RoomManagerTopbarComponent","building","root_zone","_route","_router","levels","levelsForRegion","levelsForBuilding","filters","setSearch","str","updateZones","navigate","relativeTo","queryParams","zone_ids","join","newRoom","manageRestrictions","type","ngOnInit","_this","_asyncToGenerator","initialised","toPromise","subscription","queryParamMap","_ref","params","has","zone_list","split","_x","apply","arguments","i4","i5","features","InheritDefinitionFeature","RoomManagerTopbarComponent_Template","RoomManagerTopbarComponent_Template_searchbar_modelChange_4_listener","$event","RoomManagerTopbarComponent_Template_button_click_5_listener","RoomManagerTopbarComponent_Template_mat_select_ngModelChange_9_listener","RoomManagerTopbarComponent_mat_option_11_Template","RoomManagerTopbarComponent_Template_button_click_14_listener","tmp_0_0","RoomManagerComponent","RoomManagerComponent_Template","CommonModule","FormsModule","RouterModule","UIModule","SharedSpacesModule","SharedUsersModule","MatChipsModule","ROUTES","path","component","RoomManagerModule","_3","forChild","declarations","imports","SimpleChanges","SPACE","ENTER","COMMA","EncryptionLevel","addSystem","queryZones","showMetadata","updateMetadata","updateSystem","TIMEZONES_IANA","getInvalidFields","getItemWithKeys","notifyError","notifyWarn","unique","generateSystemsFormFields","MAT_DIALOG_DATA","MatDialogRef","FormControl","FormGroup","i18nStart","i18nEnd","RoomModalComponent_main_4_form_1_div_1_mat_option_6_Template","form","controls","zone","invalid","touched","i18n","RoomModalComponent_main_4_form_1_div_3_mat_error_6_Template","RoomModalComponent_main_4_form_1_div_4_mat_error_5_Template","email","RoomModalComponent_main_4_form_1_div_22_mat_error_5_Template","capacity","RoomModalComponent_main_4_form_1_div_25_mat_chip_row_6_Template_mat_chip_row_removed_0_listener","feature_r5","_r4","$implicit","removeFeature","RoomModalComponent_main_4_form_1_div_25_mat_chip_row_6_Template","RoomModalComponent_main_4_form_1_div_25_Template_input_matChipInputTokenEnd_7_listener","_r3","addFeature","feature_list","chipList_r6","separators","tz_r7","RoomModalComponent_main_4_form_1_div_1_Template","RoomModalComponent_main_4_form_1_div_3_Template","RoomModalComponent_main_4_form_1_div_4_Template","RoomModalComponent_main_4_form_1_div_6_Template","RoomModalComponent_main_4_form_1_div_7_Template","RoomModalComponent_main_4_form_1_div_22_Template","RoomModalComponent_main_4_form_1_div_23_Template","RoomModalComponent_main_4_form_1_div_24_Template","RoomModalComponent_main_4_form_1_div_25_Template","RoomModalComponent_main_4_form_1_div_26_Template","RoomModalComponent_main_4_form_1_mat_option_36_Template","RoomModalComponent_main_4_form_1_mat_option_37_Template","RoomModalComponent_main_4_form_1_div_38_Template","settings_form","bookable","description","map_id","auto_r8","filtered_timezones","timezones","images","RoomModalComponent_main_4_form_1_Template","RoomModalComponent_footer_5_Template_button_click_1_listener","_r9","save","value","_data","_dialog_ref","loading","active_levels","setup","breakdown","encryption_levels","None","Support","Admin","NeverDisplay","query_fn","q","resp","details","organisation","overflow","patchValue","ngOnChanges","changes","updateTimezoneList","valueChanges","timezone","event","input","trim","push","setValue","existing_feature","index","indexOf","splice","_this2","valid","disableClose","getRawValue","events","catch","e","close","NgOnChangesFeature","i18n_0","ngI18nClosureMode","$localize","RoomModalComponent_button_3_Template","RoomModalComponent_main_4_Template","RoomModalComponent_footer_5_Template","RoomModalComponent_ng_template_6_Template","load_state_r10","getUnixTime","MapLocation","location","position","asset_id","x","map_width","y","map_height","variance","last_seen","level","at_location","coordinates_from"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}