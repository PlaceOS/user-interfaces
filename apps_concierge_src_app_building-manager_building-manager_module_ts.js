"use strict";(self.webpackChunkconcierge=self.webpackChunkconcierge||[]).push([["apps_concierge_src_app_building-manager_building-manager_module_ts"],{4253:(W,m,i)=>{i.r(m),i.d(m,{BuildingManagerModule:()=>D});var d=i(6477),f=i(9542),h=i(6585),v=i(3045),x=i(2886),B=i(5533),n=i(6839),M=i(6866),C=i(3320),y=i(7728),L=i(5912),Z=i(308),u=i(4505),b=i(7716),T=i(6942),A=i(7486);let U=(()=>{class t{constructor(e,l){this._org=e,this._dialog=l,this._options=new u.X({}),this._change=new u.X(0),this.options=this._options.asObservable(),this.filtered_buildings=(0,b.aj)([this._org.region_list,this._org.building_list,this._options,this._org.initialised]).pipe((0,T.U)(([r,a,s])=>{s.zone&&(a=a.filter(c=>c.parent_id===s.zone)),s.search&&(a=a.filter(c=>c.name.toLowerCase().includes(s.search.toLowerCase())));for(const c of a){const g=r.find(H=>H.id===c.parent_id);g&&(c.region=g.display_name||g.name),c.level_count=this._org.levelsForBuilding(c)?.length||0}return a}))}setFilters(e){this._options.next({...this._options.getValue(),...e})}setSearchString(e){this._options.next({...this._options.getValue(),search:e})}editBuilding(e=new Z.G6j){}}return t.\u0275fac=function(e){return new(e||t)(n.LFG(L.w7),n.LFG(A.uw))},t.\u0275prov=n.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var _=i(2423),S=i(5306),z=i(1110),O=i(3838);function F(t,o){if(1&t&&(n._uU(0),n.ALo(1,"level"),n.ALo(2,"level")),2&t){const e=o.data;let l;n.hij(" ",(null==(l=n.lcZ(1,1,e))?null:l.display_name)||(null==(l=n.lcZ(2,3,e))?null:l.name)," ")}}function N(t,o){if(1&t&&n._UZ(0,"img",7),2&t){const e=n.oxw().data;n.Q6J("src",e[0],n.LSH)}}function w(t,o){1&t&&(n.TgZ(0,"span",8),n._uU(1,"No Images"),n.qZA())}function Y(t,o){if(1&t&&(n.YNc(0,N,1,1,"img",5),n.YNc(1,w,2,0,"span",6)),2&t){const e=o.data;n.Q6J("ngIf",e.length),n.xp6(1),n.Q6J("ngIf",!e.length)}}function j(t,o){if(1&t){const e=n.EpF();n.TgZ(0,"div",9)(1,"button",10),n.NdJ("click",function(){const a=n.CHM(e).row,s=n.oxw();return n.KtG(s.editBuilding(a))}),n.TgZ(2,"app-icon"),n._uU(3,"edit"),n.qZA()()()}}const I=function(){return["display_name","address","timezone","region","level_count","actions"]},J=function(){return["Name","Location","Timezone","Region","Levels"," "]},G=function(){return["flex","12r","12r","10r","6r","6r","5r"]},P=function(t,o,e){return{images:t,zones:o,actions:e}};let R=(()=>{class t{constructor(e){this._manager=e,this.buildings=this._manager.filtered_buildings,this.editBuilding=l=>this._manager.editBuilding(l)}}return t.\u0275fac=function(e){return new(e||t)(n.Y36(U))},t.\u0275cmp=n.Xpm({type:t,selectors:[["building-list"]],decls:8,vars:12,consts:[[1,"absolute","inset-0","overflow-auto"],["empty","No buildings",1,"block","min-w-[60rem]","w-full","h-full",3,"dataSource","columns","display_column","column_size","template"],["level_template",""],["image_template",""],["action_template",""],["class","max-h-[3rem] max-w-[8rem]",3,"src",4,"ngIf"],["class","opacity-30",4,"ngIf"],[1,"max-h-[3rem]","max-w-[8rem]",3,"src"],[1,"opacity-30"],[1,"w-full","flex","justify-end","space-x-2"],["btn","","icon","","matTooltip","Edit Building",3,"click"]],template:function(e,l){if(1&e&&(n.TgZ(0,"div",0),n._UZ(1,"custom-table",1),n.qZA(),n.YNc(2,F,3,5,"ng-template",null,2,n.W1O),n.YNc(4,Y,2,2,"ng-template",null,3,n.W1O),n.YNc(6,j,4,0,"ng-template",null,4,n.W1O)),2&e){const r=n.MAs(3),a=n.MAs(5),s=n.MAs(7);n.xp6(1),n.Q6J("dataSource",l.buildings)("columns",n.DdM(5,I))("display_column",n.DdM(6,J))("column_size",n.DdM(7,G))("template",n.kEZ(8,P,a,r,s))}},dependencies:[d.O5,_.gM,S.o,z.C,O.M]}),t})();const E=["app-building-manager",""];let p=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=n.Xpm({type:t,selectors:[["","app-building-manager",""]],attrs:E,decls:10,vars:0,consts:[[1,"flex","flex-1","h-px"],[1,"flex","flex-col","flex-1","w-1/2","h-full"],[1,"flex","items-center","justify-between","mb-2","p-8"],[1,"text-2xl","font-medium"],["btn","","matRipple",""],[1,"block","w-full","relative","flex-1","h-1/2"]],template:function(e,l){1&e&&(n._UZ(0,"app-topbar"),n.TgZ(1,"div",0),n._UZ(2,"app-sidebar"),n.TgZ(3,"main",1)(4,"header",2)(5,"h2",3),n._uU(6,"Building Management"),n.qZA(),n.TgZ(7,"button",4),n._uU(8,"Add Building"),n.qZA()(),n._UZ(9,"building-list",5),n.qZA()())},dependencies:[M.O,C.u,y.wG,R],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%;width:100%;background-color:#fff}sidebar[_ngcontent-%COMP%]{height:100%}main[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1;min-width:50%;height:100%}\n/*# sourceMappingURL=building-manager.component.ts-angular-inline--178.css.map*/"]}),t})();var Q=i(1031);const X=[{path:"",component:p},{path:"new",component:p}];let D=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({imports:[d.ez,f.u5,v.v,x.YR,B.PP,Q.Hi,h.Bz.forChild(X)]}),t})()}}]);
//# sourceMappingURL=apps_concierge_src_app_building-manager_building-manager_module_ts.js.map