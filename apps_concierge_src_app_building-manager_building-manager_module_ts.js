"use strict";(self.webpackChunkconcierge=self.webpackChunkconcierge||[]).push([["apps_concierge_src_app_building-manager_building-manager_module_ts"],{43414:(O,Z,a)=>{a.r(Z),a.d(Z,{BuildingManagerModule:()=>Ae});var _=a(26575),d=a(28849),L=a(92649),M=a(97910),A=a(46514),y=a(59524),f=a(71670),u=a(34592),x=a(93121),c=a(47298),g=a(70462),P=a(28159),b=a(47422),p=a(17401),e=a(29039),C=a(94888),N=a(71268),G=a(99674),R=a(96355),h=a(10257),w=a(33910),U=a(99892);function J(i,r){if(1&i&&(e.TgZ(0,"mat-option",22),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.Q6J("value",t.id),e.xp6(),e.hij(" ",t.display_name||t.name," ")}}function F(i,r){if(1&i&&(e.TgZ(0,"div",5)(1,"label",19),e.SDv(2,20),e.qZA(),e.TgZ(3,"mat-form-field",8)(4,"mat-select",21)(5,"mat-option",22),e._uU(6,"None"),e.qZA(),e.YNc(7,J,2,2,"mat-option",14),e.ALo(8,"async"),e.qZA()()()),2&i){const t=e.oxw(3);e.xp6(5),e.Q6J("value",t.default_parent),e.xp6(2),e.Q6J("ngForOf",e.lcZ(8,2,t.region_list))}}function D(i,r){if(1&i&&(e.TgZ(0,"mat-option",22),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.Q6J("value",t),e.xp6(),e.Oqu(t)}}function z(i,r){1&i&&(e.TgZ(0,"mat-option",23),e._uU(1," No matching timezones "),e.qZA()),2&i&&e.Q6J("disabled",!0)}function Q(i,r){if(1&i&&(e.TgZ(0,"form",3),e.YNc(1,F,9,4,"div",4),e.ALo(2,"async"),e.TgZ(3,"div",5)(4,"label",6),e.SDv(5,7),e.qZA(),e.TgZ(6,"mat-form-field",8),e._UZ(7,"input",9),e.qZA()(),e.TgZ(8,"div",5)(9,"label",6),e.SDv(10,10),e.qZA(),e.TgZ(11,"mat-form-field",8)(12,"app-icon",11),e._uU(13,"search"),e.qZA(),e._UZ(14,"input",12),e.qZA(),e.TgZ(15,"mat-autocomplete",null,13),e.YNc(17,D,2,2,"mat-option",14)(18,z,2,1,"mat-option",15),e.qZA()(),e.TgZ(19,"div",5)(20,"label",16),e.SDv(21,17),e.qZA(),e.TgZ(22,"mat-form-field",8),e._UZ(23,"input",18),e.qZA()()()),2&i){const t=e.MAs(16),n=e.oxw(2);let o;e.Q6J("formGroup",n.form),e.xp6(),e.Q6J("ngIf",null==(o=e.lcZ(2,5,n.region_list))?null:o.length),e.xp6(13),e.Q6J("matAutocomplete",t),e.xp6(3),e.Q6J("ngForOf",n.filtered_timezones),e.xp6(),e.Q6J("ngIf",!n.timezones.length)}}function Y(i,r){if(1&i&&(e.ynx(0),e.YNc(1,Q,24,7,"form",2),e.BQk()),2&i){const t=e.oxw();e.xp6(),e.Q6J("ngIf",t.form)}}function $(i,r){1&i&&(e.TgZ(0,"div",24),e._UZ(1,"mat-spinner",25),e.TgZ(2,"p",26),e._uU(3,"Saving building..."),e.qZA()())}let q=(()=>{class i extends u.cx{get default_parent(){return this._org.organisation.id}constructor(t){super(),this._org=t,this.building=null,this.save=0,this.loading=!1,this.loadingChange=new e.vpe,this.done=new e.vpe,this.timezones=[],this.filtered_timezones=[],this.region_list=this._org.region_list,this.form=new d.cw({id:new d.NI(""),parent_id:new d.NI(this._org.organisation.id,[d.kI.required]),display_name:new d.NI("",[d.kI.required]),timezone:new d.NI(Intl?.DateTimeFormat()?.resolvedOptions()?.timeZone||""),location:new d.NI("")})}ngOnInit(){this._updateTimezoneList(),this.subscription("tz-change",this.form.valueChanges.subscribe(()=>this._updateTimezoneList())),this.building&&this.form.patchValue(this.building)}ngOnChanges(t){t.building&&this.building&&this.form.patchValue(this.building),t.save&&this.save&&this.saveChanges()}saveChanges(){var t=this;return(0,f.Z)(function*(){if(t.form.patchValue({parent_id:t.form.value.parent_id||t._org.organisation.id}),!t.form.valid)return(0,u.cB)(`Some form fields are invalid. [${(0,u.RD)(t.form).join(", ")}]`);const n=t.form.getRawValue();t.loading=!0,t.loadingChange.emit(!0);const o={...n,tags:["building"],name:`BLD ${(0,c.N9E)().description} ${n.display_name}`},s=yield(n.id?(0,c.BfP)(n.id,o):(0,c.ri3)(o)).toPromise().catch(l=>{throw(0,u.cB)(`Error saving building: ${l.message||l.error||l}`),t.loading=!1,t.loadingChange.emit(!1),l});(0,u.t5)("Successfully saved building."),t.loading=!1,t.loadingChange.emit(!1),t.done.emit(s)})()}_updateTimezoneList(){const t=this.form?.value?.timezone||"";this.timezones=u.sM,this.filtered_timezones=this.timezones.filter(n=>n.toLowerCase().includes(t.toLowerCase()))}static#e=this.\u0275fac=function(n){return new(n||i)(e.Y36(x.w7))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["building-form"]],inputs:{building:"building",save:"save",loading:"loading"},outputs:{loadingChange:"loadingChange",done:"done"},features:[e.qOj,e.TTD],decls:3,vars:2,consts:()=>{let t,n,o,s;return t=$localize`:@@displayNameLabel␟8d766661ed5e178519720ec8e959d2a737f600a6␟1377207093952578744: Display Name: `,n=$localize`:@@displayNameLabel␟dbd34479df566856113383ebef3a2cb98e494642␟7608711767660448404: Timezone: `,o=$localize`:@@displayNameLabel␟8dfcfa872af9be0ad27411537a6944e3d33a278f␟2698045878883517755: Location: `,s=$localize`:@@displayNameLabel␟88b397510643ec67156f0eb2d333d4012801a8c1␟2672381863752151894: Region: `,[[4,"ngIf","ngIfElse"],["load_state",""],["building","","class","flex flex-col w-[36rem] max-w-[calc(100vw-4rem)]",3,"formGroup",4,"ngIf"],["building","",1,"flex","flex-col","w-[36rem]","max-w-[calc(100vw-4rem)]",3,"formGroup"],["class","flex flex-col",4,"ngIf"],[1,"flex","flex-col"],["for","display-name"],t,["appearance","outline"],["matInput","","name","display-name","placeholder","Display Name","formControlName","display_name"],n,["matPrefix","",1,"text-2xl"],["matInput","","formControlName","timezone","placeholder","Building timezone",3,"matAutocomplete"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"disabled",4,"ngIf"],["for","address"],o,["matInput","","name","address","placeholder","Location or Address...","formControlName","location"],["for","region"],s,["name","region","formControlName","parent_id","placeholder","Select Region..."],[3,"value"],[3,"disabled"],[1,"flex","flex-col","items-center","justify-center","w-64","h-64"],["diameter","32"],[1,"mt-4"]]},template:function(n,o){if(1&n&&e.YNc(0,Y,2,1,"ng-container",0)(1,$,4,0,"ng-template",null,1,e.W1O),2&n){const s=e.MAs(2);e.Q6J("ngIf",!o.loading)("ngIfElse",s)}},dependencies:[_.sg,_.O5,d._Y,d.Fj,d.JJ,d.JL,N.KE,N.qo,G.Nt,R.gD,h.ey,w.Ou,U.XC,U.ZL,d.sg,d.u,C.o,_.Ov]})}return i})();function j(i,r){1&i&&(e.TgZ(0,"button",4)(1,"app-icon"),e._uU(2,"close"),e.qZA()())}function k(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"footer",5)(1,"button",6),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.save())}),e._uU(2,"Save"),e.qZA()()}}let K=(()=>{class i{constructor(t,n){this._data=t,this._dialog_ref=n,this.loading=!1,this.save_state=0,this.building=this._data,this.close=o=>this._dialog_ref.close(o),this.save=()=>this.save_state=Date.now()}static#e=this.\u0275fac=function(n){return new(n||i)(e.Y36(p.WI),e.Y36(p.so))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["building-modal"]],decls:7,vars:6,consts:[["btn","","icon","","mat-dialog-close","",4,"ngIf"],[1,"max-h-[65vh]","overflow-y-auto","overflow-x-hidden","p-4"],[3,"building","save","loading","loadingChange","done"],["class","p-2 flex justify-end border-t border-base-200",4,"ngIf"],["btn","","icon","","mat-dialog-close",""],[1,"p-2","flex","justify-end","border-t","border-base-200"],["btn","",1,"w-32",3,"click"]],template:function(n,o){1&n&&(e.TgZ(0,"header")(1,"h2"),e._uU(2),e.qZA(),e.YNc(3,j,3,0,"button",0),e.qZA(),e.TgZ(4,"main",1)(5,"building-form",2),e.NdJ("loadingChange",function(l){return o.loading=l})("done",function(l){return o.close(l)}),e.qZA()(),e.YNc(6,k,3,0,"footer",3)),2&n&&(e.xp6(2),e.hij("",o.building.id?"Edit":"Add"," Building"),e.xp6(),e.Q6J("ngIf",!o.loading),e.xp6(2),e.Q6J("building",o.building)("save",o.save_state)("loading",o.loading),e.xp6(),e.Q6J("ngIf",!o.loading))},dependencies:[_.O5,p.ZT,C.o,q]})}return i})();var X=a(66229),I=a(43811),H=a(28442);function V(i,r){1&i&&(e.TgZ(0,"button",6)(1,"app-icon",7),e._uU(2,"close"),e.qZA()())}function W(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"main",8)(1,"label"),e._uU(2,"Before Event"),e.qZA(),e.TgZ(3,"a-duration-field",9),e.NdJ("ngModelChange",function(o){e.CHM(t);const s=e.oxw();return e.KtG(s.settings.time_before=o)}),e.qZA(),e.TgZ(4,"label"),e._uU(5,"After Event"),e.qZA(),e.TgZ(6,"a-duration-field",9),e.NdJ("ngModelChange",function(o){e.CHM(t);const s=e.oxw();return e.KtG(s.settings.time_after=o)}),e.qZA(),e.TgZ(7,"label"),e._uU(8,"Event Types"),e.qZA(),e.TgZ(9,"mat-form-field",10)(10,"mat-select",11),e.NdJ("ngModelChange",function(o){e.CHM(t);const s=e.oxw();return e.KtG(s.settings.resources=o)}),e.TgZ(11,"mat-option",12),e._uU(12," Desks "),e.qZA(),e.TgZ(13,"mat-option",13),e._uU(14," Visitors "),e.qZA(),e.TgZ(15,"mat-option",14),e._uU(16," Parking "),e.qZA()()()()}if(2&i){const t=e.oxw();e.xp6(3),e.Q6J("min",0)("ngModel",t.settings.time_before),e.xp6(3),e.Q6J("min",0)("ngModel",t.settings.time_after),e.xp6(4),e.Q6J("ngModel",t.settings.resources)}}function ee(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"footer",15)(1,"button",16),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.save())}),e._uU(2,"Save"),e.qZA()()}}function te(i,r){if(1&i&&(e.TgZ(0,"main",17),e._UZ(1,"mat-spinner",18),e.TgZ(2,"p"),e._uU(3),e.qZA()()),2&i){const t=e.oxw();e.xp6(),e.Q6J("diameter",48),e.xp6(2),e.Oqu(t.loading)}}let ne=(()=>{class i{constructor(t,n,o){this._id=t,this._dialog_ref=n,this._settings=o,this.loading="",this.id=this._id,this.settings={}}ngOnInit(){this.loadSettings(this.id)}loadSettings(t){var n=this;return(0,f.Z)(function*(){n.loading="Loading auto-release settings for building...",n.settings={};const s=(yield(0,c.oOs)({parent_id:t}).pipe((0,b.U)(l=>l.data)).toPromise()).find(l=>l.encryption_level===c.sUp.None);if(s){try{n.settings=I.zD(s.settings_string)?.auto_release||{}}catch{}n.loading=""}})()}save(){var t=this;return(0,f.Z)(function*(){t.loading="Saving changes to auto-release settings...";let o=(yield(0,c.oOs)({parent_id:t.id}).pipe((0,b.U)(T=>T.data)).toPromise()).find(T=>T.encryption_level===c.sUp.None);o||(o=new c.iJM({parent_id:t.id,encryption_level:c.sUp.None,settings_string:""}));let s={};try{s=I.zD(o.settings_string)||{}}catch{}o.settings_string=I.$w({...s,auto_release:t.settings}),o.id?yield(0,c.VPJ)(o.id,o).toPromise():yield(0,c.zZM)(o).toPromise();const l=t._settings.get("app.workplace_metadata_key")||"workplace_app",v=(yield(0,c.rlq)(t.id,l).toPromise()).details||{};v.auto_release=t.settings,yield(0,c.Ymr)(t.id,{name:l,details:v,description:""}).toPromise(),(0,u.t5)("Auto-release settings updated"),t.loading="",t._dialog_ref.close()})()}static#e=this.\u0275fac=function(n){return new(n||i)(e.Y36(p.WI),e.Y36(p.so),e.Y36(u.gb))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["auto-release-modal"]],decls:8,vars:4,consts:[[1,"flex","items-center","justify-between","border-b","border-gray-300","p-4"],[1,"text-xl","font-medium"],["icon","","matRipple","","mat-dialog-close","",4,"ngIf"],["class","px-2 w-[20rem]",4,"ngIf","ngIfElse"],["class","p-4 flex justify-end",4,"ngIf"],["load_state",""],["icon","","matRipple","","mat-dialog-close",""],[1,"text-2xl"],[1,"px-2","w-[20rem]"],[3,"min","ngModel","ngModelChange"],["appearance","outline",1,"w-full"],["multiple","","placeholder","Set Event Types...",3,"ngModel","ngModelChange"],["value","desk"],["value","visitor"],["value","parking"],[1,"p-4","flex","justify-end"],["btn","","matRipple","",1,"w-32",3,"click"],[1,"flex","flex-col","items-center","justify-center","p-32","space-y-2"],[3,"diameter"]],template:function(n,o){if(1&n&&(e.TgZ(0,"header",0)(1,"h3",1),e._uU(2,"Auto-Release Settings"),e.qZA(),e.YNc(3,V,3,0,"button",2),e.qZA(),e.YNc(4,W,17,5,"main",3)(5,ee,3,0,"footer",4)(6,te,4,2,"ng-template",null,5,e.W1O)),2&n){const s=e.MAs(7);e.xp6(3),e.Q6J("ngIf",!o.loading),e.xp6(),e.Q6J("ngIf",!o.loading)("ngIfElse",s),e.xp6(),e.Q6J("ngIf",!o.loading)}},dependencies:[_.O5,d.JJ,d.On,N.KE,R.gD,h.ey,w.Ou,p.ZT,h.wG,H.B,C.o]})}return i})();var ie=a(60702);function oe(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",6)(1,"input",7),e.NdJ("ngModelChange",function(o){const l=e.CHM(t).index,m=e.oxw();return e.KtG(m.item_list[l].name=o)}),e.qZA(),e.TgZ(2,"input",8),e.NdJ("ngModelChange",function(o){const l=e.CHM(t).index,m=e.oxw();return e.KtG(m.item_list[l].email=o)}),e.qZA(),e.TgZ(3,"button",9),e.NdJ("click",function(){const s=e.CHM(t).index,l=e.oxw();return e.KtG(l.item_list.splice(s,1))}),e.TgZ(4,"app-icon"),e._uU(5,"close"),e.qZA()()()}if(2&i){const t=r.index,n=e.oxw();e.xp6(),e.Q6J("ngModel",n.item_list[t].name),e.xp6(),e.Q6J("ngModel",n.item_list[t].email)}}let se=(()=>{class i{constructor(t,n,o){this._bld_id=t,this._settings=n,this._dialog_ref=o,this.item_list=[],this.loading=!1,this.identify=(s,l)=>s}ngOnInit(){var t=this;return(0,f.Z)(function*(){const n=t._settings.get("app.workplace_metadata_key")||"workplace_app",s=(yield(0,c.rlq)(t._bld_id,n).toPromise())?.details?.support_issue_types||[];t.item_list=s})()}save(){var t=this;return(0,f.Z)(function*(){const n=t._settings.get("app.workplace_metadata_key")||"workplace_app";t.loading=!0;const o=t.item_list.filter(m=>m),s=yield(0,c.rlq)(t._bld_id,n).toPromise();s.details.support_issue_types=o;const l=yield(0,c.Ymr)(t._bld_id,{name:n,details:s.details,description:s.description||""}).toPromise().catch(m=>{(0,u.cB)(`Failed to save issue types. ${m}`)});t.loading=!1,l&&t._dialog_ref.close()})()}static#e=this.\u0275fac=function(n){return new(n||i)(e.Y36(p.WI),e.Y36(u.gb),e.Y36(p.so))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["item-list-modal"]],decls:13,vars:2,consts:[["icon","","matRipple","","mat-dialog-close",""],[1,"w-[36rem]","overflow-auto","h-[50vh]","p-2","space-y-2"],["btn","","matRipple","",1,"w-full",3,"click"],["class","w-full flex items-center space-x-2",4,"ngFor","ngForOf","ngForTrackBy"],[1,"flex","items-center","justify-end","p-2","border-t","border-base-200"],["btn","","matRipple","",1,"w-32",3,"click"],[1,"w-full","flex","items-center","space-x-2"],["type","text","placeholder","Issue Name",1,"flex-1","border","border-base-200","px-4","py-3","rounded",3,"ngModel","ngModelChange"],["type","email","placeholder","Issue Email",1,"flex-[2]","border","border-base-200","px-4","py-3","rounded",3,"ngModel","ngModelChange"],["icon","","matRipple","","matTooltip","Remove Item",3,"click"]],template:function(n,o){1&n&&(e.TgZ(0,"header")(1,"h2"),e._uU(2,"Support Request Issue Types"),e.qZA(),e.TgZ(3,"button",0)(4,"app-icon"),e._uU(5,"close"),e.qZA()()(),e.TgZ(6,"main",1)(7,"button",2),e.NdJ("click",function(){return o.item_list.push({name:"",email:""})}),e._uU(8," Add Item "),e.qZA(),e.YNc(9,oe,6,2,"div",3),e.qZA(),e.TgZ(10,"footer",4)(11,"button",5),e.NdJ("click",function(){return o.save()}),e._uU(12,"Save"),e.qZA()()),2&n&&(e.xp6(9),e.Q6J("ngForOf",o.item_list)("ngForTrackBy",o.identify))},dependencies:[_.sg,d.Fj,d.JJ,d.On,ie.gM,p.ZT,h.wG,C.o]})}return i})(),S=(()=>{class i{constructor(t,n){this._org=t,this._dialog=n,this._options=new g.X({}),this._change=new g.X(0),this.options=this._options.asObservable(),this.filtered_buildings=(0,P.aj)([this._org.region_list,this._org.building_list,this._options,this._org.initialised]).pipe((0,b.U)(([o,s,l])=>{l.zone&&(s=s.filter(m=>m.parent_id===l.zone)),l.search&&(s=s.filter(m=>m.name.toLowerCase().includes(l.search.toLowerCase())));for(const m of s){const v=o.find(T=>T.id===m.parent_id);v&&(m.region=v.display_name||v.name),m.level_count=this._org.levelsForBuilding(m)?.length||0}return s}))}setFilters(t){this._options.next({...this._options.getValue(),...t})}setSearchString(t){this._options.next({...this._options.getValue(),search:t})}editBuilding(t=new c.TT8){this._dialog.open(K,{data:t}).afterClosed().subscribe(o=>{o&&this._org.addZone(o)})}editBuildingMetadata(t=new c.TT8){this._dialog.open(X.K,{data:{zone:t}}).afterClosed().subscribe(o=>{o&&setTimeout(()=>location.reload(),300)})}setAutoRelease(t){t?.id&&this._dialog.open(ne,{data:t.id})}setSupportIssueTypes(t){t?.id&&this._dialog.open(se,{data:t.id})}removeBuilding(t){var n=this;return(0,f.Z)(function*(){const o=yield(0,u._5)({title:"Remove Building",content:`Are you sure you want to remove the building "${t.name}"?`,icon:{content:"delete_forever"},confirm_text:"Remove"},n._dialog);if("done"!==o.reason)return o.close();o.loading("Removing building..."),yield(0,c.Jwl)(t.id).toPromise(),n._org.removeZone({id:t.id,tags:["building"]}),(0,u.t5)("Successfully removed building."),o.close()})()}static#e=this.\u0275fac=function(n){return new(n||i)(e.LFG(x.w7),e.LFG(p.uw))};static#t=this.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var ae=a(33005),le=a(19842),B=a(78128),re=a(27442),de=a(78075),ce=a(6612);function me(i,r){if(1&i&&(e._uU(0),e.ALo(1,"level"),e.ALo(2,"level")),2&i){const t=r.data;let n;e.hij(" ",(null==(n=e.lcZ(1,1,t))?null:n.display_name)||(null==(n=e.lcZ(2,3,t))?null:n.name)," ")}}function ge(i,r){if(1&i&&e._UZ(0,"img",7),2&i){const t=e.oxw().data;e.Q6J("source",t[0])}}function ue(i,r){1&i&&(e.TgZ(0,"span",8),e._uU(1,"No Images"),e.qZA())}function _e(i,r){if(1&i&&e.YNc(0,ge,1,1,"img",5)(1,ue,2,0,"span",6),2&i){const t=r.data;e.Q6J("ngIf",t.length),e.xp6(),e.Q6J("ngIf",!t.length)}}function pe(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",9)(1,"button",10)(2,"app-icon"),e._uU(3,"more_vert"),e.qZA()(),e.TgZ(4,"mat-menu",null,11)(6,"button",12),e.NdJ("click",function(){const s=e.CHM(t).row,l=e.oxw();return e.KtG(l.editBuildingMetadata(s))}),e.TgZ(7,"div",13)(8,"app-icon",14),e._uU(9,"edit_square"),e.qZA(),e.TgZ(10,"span"),e._uU(11,"App Configuration"),e.qZA()()(),e.TgZ(12,"button",12),e.NdJ("click",function(){const s=e.CHM(t).row,l=e.oxw();return e.KtG(l.editBuilding(s))}),e.TgZ(13,"div",13)(14,"app-icon",14),e._uU(15,"edit"),e.qZA(),e.TgZ(16,"span"),e._uU(17,"Edit Building"),e.qZA()()(),e.TgZ(18,"button",12),e.NdJ("click",function(){const s=e.CHM(t).row,l=e.oxw();return e.KtG(l.setAutoRelease(s))}),e.TgZ(19,"div",13)(20,"app-icon",15),e._uU(21," release_alert "),e.qZA(),e.TgZ(22,"span"),e._uU(23,"Auto-release Settings"),e.qZA()()(),e.TgZ(24,"button",12),e.NdJ("click",function(){const s=e.CHM(t).row,l=e.oxw();return e.KtG(l.setSupportIssueTypes(s))}),e.TgZ(25,"div",13)(26,"app-icon",15),e._uU(27," support_agent "),e.qZA(),e.TgZ(28,"span"),e._uU(29,"Support Request Types"),e.qZA()()(),e.TgZ(30,"button",12),e.NdJ("click",function(){const s=e.CHM(t).row,l=e.oxw();return e.KtG(l.removeBuilding(s))}),e.TgZ(31,"div",16)(32,"app-icon",17),e._uU(33," delete "),e.qZA(),e.TgZ(34,"span"),e._uU(35,"Delete Building"),e.qZA()()()()()}if(2&i){const t=e.MAs(5);e.xp6(),e.Q6J("matMenuTriggerFor",t)}}const fe=()=>["display_name","address","timezone","region","level_count","actions"],he=()=>["Name","Location","Timezone","Region","Levels"," "],ve=()=>["12r","flex","12r","10r","6r","3.75r"],xe=(i,r,t)=>({images:i,zones:r,actions:t});let Ce=(()=>{class i{constructor(t,n){this._manager=t,this._settings=n,this.buildings=this._manager.filtered_buildings,this.settings={},this.editBuilding=o=>this._manager.editBuilding(o),this.editBuildingMetadata=o=>this._manager.editBuildingMetadata(o),this.removeBuilding=o=>this._manager.removeBuilding(o),this.setAutoRelease=o=>this._manager.setAutoRelease(o),this.setSupportIssueTypes=o=>this._manager.setSupportIssueTypes(o)}static#e=this.\u0275fac=function(n){return new(n||i)(e.Y36(S),e.Y36(u.gb))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["building-list"]],decls:8,vars:12,consts:[[1,"absolute","inset-0","overflow-auto","px-4"],["empty","No buildings",1,"block","min-w-[60rem]","w-full","h-full",3,"dataSource","columns","display_column","column_size","template"],["level_template",""],["image_template",""],["action_template",""],["auth","","class","max-h-[3rem] max-w-[8rem]",3,"source",4,"ngIf"],["class","opacity-30",4,"ngIf"],["auth","",1,"max-h-[3rem]","max-w-[8rem]",3,"source"],[1,"opacity-30"],[1,"w-full","flex","justify-end","space-x-2"],["btn","","icon","","matRipple","",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"click"],[1,"flex","items-center","space-x-2"],[1,"text-xl"],["className","material-symbols-rounded",1,"text-xl"],[1,"flex","items-center","space-x-2","text-red-500"],[1,"text-error","text-xl"]],template:function(n,o){if(1&n&&(e.TgZ(0,"div",0),e._UZ(1,"custom-table",1),e.qZA(),e.YNc(2,me,3,5,"ng-template",null,2,e.W1O)(4,_e,2,2,"ng-template",null,3,e.W1O)(6,pe,36,1,"ng-template",null,4,e.W1O)),2&n){const s=e.MAs(3),l=e.MAs(5),m=e.MAs(7);e.xp6(),e.Q6J("dataSource",o.buildings)("columns",e.DdM(5,fe))("display_column",e.DdM(6,he))("column_size",e.DdM(7,ve))("template",e.kEZ(8,xe,l,s,m))}},dependencies:[_.O5,B.VK,B.OP,B.p6,h.wG,C.o,re.C,de.A,ce.M]})}return i})();const Te=["app-building-manager",""];let E=(()=>{class i{constructor(t){this._state=t,this.newBuilding=()=>this._state.editBuilding()}static#e=this.\u0275fac=function(n){return new(n||i)(e.Y36(S))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["","app-building-manager",""]],attrs:Te,decls:10,vars:0,consts:[[1,"flex","flex-1","h-px"],[1,"flex","flex-col","flex-1","w-1/2","h-full"],[1,"flex","items-center","justify-between","mb-2","p-8"],[1,"text-2xl","font-medium"],["btn","","matRipple","",3,"click"],[1,"block","w-full","relative","flex-1","h-1/2"]],template:function(n,o){1&n&&(e._UZ(0,"app-topbar"),e.TgZ(1,"div",0),e._UZ(2,"app-sidebar"),e.TgZ(3,"main",1)(4,"header",2)(5,"h2",3),e._uU(6,"Building Management"),e.qZA(),e.TgZ(7,"button",4),e.NdJ("click",function(){return o.newBuilding()}),e._uU(8," Add Building "),e.qZA()(),e._UZ(9,"building-list",5),e.qZA()())},dependencies:[ae.O,le.u,h.wG,Ce],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%;width:100%;background-color:var(--b1)}sidebar[_ngcontent-%COMP%]{height:100%}main[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1;min-width:50%;height:100%}\n\n/*# sourceMappingURL=building-manager.component.ts-angular-inline--187.css.map*/"]})}return i})();var Ze=a(21757);const Me=[{path:"",component:E},{path:"new",component:E}];let Ae=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=e.oAB({type:i});static#n=this.\u0275inj=e.cJS({imports:[_.ez,d.u5,M.v,A.YR,y.PP,Ze.Hi,L.Bz.forChild(Me)]})}return i})()},59524:(O,Z,a)=>{a.d(Z,{Y:()=>A,PP:()=>_.P,mO:()=>y.mO,VE:()=>x.VE,w0:()=>x.w0,sF:()=>u.sF});var _=a(43211),M=(a(86755),a(80882),a(67343));class A{constructor(g={}){this.type=g.type||g.location||"other",this.position=g.position||g.map_id||g.asset_id||{x:g.x/g.map_width||0,y:g.y/g.map_height||0},this.variance=g.variance||0,this.last_seen=g.last_seen||(0,M.Z)(new Date),this.level=g.level,this.building=g.building,this.at_location=!!g.at_location,this.coordinates_from=g.coordinates_from||"top-left"}}var y=a(223),u=(a(11451),a(38125)),x=a(48675)}}]);
//# sourceMappingURL=apps_concierge_src_app_building-manager_building-manager_module_ts.js.map