(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{"2sop":function(e,t,n){"use strict";n.r(t),n.d(t,"VisitorsModule",(function(){return ee}));var i=n("2kYt"),s=n("nIj0"),o=n("sEIs"),l=n("oRDy"),a=n("EM62"),c=n("D57K"),r=n("20lr"),u=n("eZII"),d=n("zYp8"),h=n("9MvL"),b=n("JS2V"),v=n("KuCG"),g=n("C05f"),f=n("HM3f"),m=n("mWib"),p=n("TLy2"),_=n("YtkY"),w=n("wqq/");let O=(()=>{class e extends r.c{constructor(e){super(),this._events=e,this._filters=new g.a({}),this._search=new g.a(""),this._loading=new g.a(!1),this.loading=this._loading.asObservable(),this.filters=this._filters.asObservable(),this.events=Object(f.b)([this._filters]).pipe(Object(m.a)(500),Object(p.a)(e=>{this._loading.next(!0);const[t]=e,n=t.date?new Date(t.date):new Date,i=(t.show_week?Object(d.a)(n):Object(h.a)(n)).valueOf(),s=(t.show_week?Object(b.a)(n):Object(v.a)(n)).valueOf();return this._events.query({period_start:Math.floor(i/1e3),period_end:Math.floor(s/1e3),zone_ids:(t.zones||[]).join(",")})}),Object(_.a)(e=>(this._loading.next(!1),this._filters.getValue().all_bookings?e:e.filter(e=>e.has_visitors&&e.attendees.length>1))),Object(w.a)()),this.filtered_events=Object(f.b)([this._search,this.events]).pipe(Object(_.a)(e=>{const[t,n]=e,i=t.toLowerCase();return n.filter(e=>e.attendees.find(e=>e.name.toLowerCase().includes(i)||e.email.toLowerCase().includes(i)))}))}get search(){return this._search.getValue()}setFilters(e){this._filters.next(Object.assign(Object.assign({},this._filters.getValue()),e))}setSearchString(e){this._search.next(e)}startPolling(e=3e4){this.interval("poll",()=>this.setFilters(this._filters.getValue()),e)}stopPolling(){this.clearInterval("poll")}checkGuestIn(e,t){var n,i;return Object(c.a)(this,void 0,void 0,(function*(){const s=yield this._events.checkInGuest(e.id,t.id,{system_id:(null===(n=e.system)||void 0===n?void 0:n.id)||(null===(i=e.resources[0])||void 0===i?void 0:i.id),state:!0}).catch(n=>{throw Object(r.l)(`Error checking in ${t.name} for ${e.organiser.name}'s meeting`),n});Object(r.n)(`Successfully checked in ${t.name} for ${e.organiser.name}'s meeting`);const o=Object(r.x)([s,...e.attendees],"email");return o.sort((e,t)=>e.organizer?-1:e.email.localeCompare(t.email)),new u.a(Object.assign(Object.assign({},e),{attendees:o}))}))}checkGuestOut(e,t){var n,i;return Object(c.a)(this,void 0,void 0,(function*(){const s=yield this._events.checkInGuest(e.id,t.id,{system_id:(null===(n=e.system)||void 0===n?void 0:n.id)||(null===(i=e.resources[0])||void 0===i?void 0:i.id),state:!1}).catch(n=>{throw Object(r.l)(`Error checking out ${t.name} from ${e.organiser.name}'s meeting`),n});Object(r.n)(`Successfully checked out ${t.name} from ${e.organiser.name}'s meeting`);const o=Object(r.x)([s,...e.attendees],"email");return o.sort((e,t)=>e.organizer?-1:e.email.localeCompare(t.email)),new u.a(Object.assign(Object.assign({},e),{attendees:o}))}))}checkAllGuestsIn(e){return Object(c.a)(this,void 0,void 0,(function*(){const t=e.attendees.filter(e=>e.is_external&&!e.checked_in);if(t.length<=0)throw new Error("No Guests to checkin");const n=yield Promise.all(t.map(t=>{var n,i;return this._events.checkInGuest(e.id,t.id,{system_id:(null===(n=e.system)||void 0===n?void 0:n.id)||(null===(i=e.resources[0])||void 0===i?void 0:i.id),state:!0})})).catch(t=>{throw Object(r.l)(`Error checking in all guests for ${e.organiser.name}'s meeting`),t});Object(r.n)(`Successfully checked in all guests for ${e.organiser.name}'s meeting`);const i=Object(r.x)([...n,...e.attendees],"email");return i.sort((e,t)=>e.organizer?-1:e.email.localeCompare(t.email)),new u.a(Object.assign(Object.assign({},e),{attendees:i}))}))}checkAllGuestsOut(e){return Object(c.a)(this,void 0,void 0,(function*(){const t=e.attendees.filter(e=>e.is_external&&e.checked_in&&!e.organizer);if(t.length<=0)throw new Error("No Guests to checkout");const n=yield Promise.all(t.map(t=>{var n,i;return this._events.checkInGuest(e.id,t.id,{system_id:(null===(n=e.system)||void 0===n?void 0:n.id)||(null===(i=e.resources[0])||void 0===i?void 0:i.id),state:!1})})).catch(t=>{throw Object(r.l)(`Error checking out all guests from ${e.organiser.name}'s meeting`),t});Object(r.n)(`Successfully checked out all guests from ${e.organiser.name}'s meeting`);const i=Object(r.x)([...n,...e.attendees],"email");return i.sort((e,t)=>e.organizer?-1:e.email.localeCompare(t.email)),new u.a(Object.assign(Object.assign({},e),{attendees:i}))}))}}return e.\u0275fac=function(t){return new(t||e)(a.cc(u.b))},e.\u0275prov=a.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var k=n("UfDH"),y=n("jOdJ"),j=n("dJst"),V=n("29Wa"),C=n("R7+U"),x=n("k8N0"),U=n("wobF"),M=n("wrRZ"),D=n("mFH5");function P(e,t){if(1&e&&(a.Vb(0,"mat-option",8),a.Lc(1),a.Ub()),2&e){const e=t.$implicit;a.pc("value",e.id),a.Db(1),a.Nc(" ",e.display_name||e.name," ")}}let I=(()=>{class e extends r.c{constructor(e,t,n,i){super(),this._state=e,this._org=t,this._route=n,this._router=i,this.zones=[],this.levels=this._org.active_levels,this.filters=this._state.filters,this.setDate=e=>this._state.setFilters({date:e}),this.setFilters=e=>this._state.setFilters(e),this.setSearch=e=>this._state.setSearchString(e),this.updateZones=e=>{this._router.navigate([],{relativeTo:this._route,queryParams:{zone_ids:e.join(",")}}),this._state.setFilters({zones:e})}}ngOnInit(){return Object(c.a)(this,void 0,void 0,(function*(){yield this._org.initialised.pipe(Object(y.a)(e=>e)).toPromise(),this.subscription("route.query",this._route.queryParamMap.subscribe(e=>{if(e.has("zone_ids")){const t=e.get("zone_ids").split(",");if(t.length){const e=this._org.levelWithID(t);if(!e)return;this._org.building=this._org.buildings.find(t=>t.id===e.parent_id),this.zones=t}}})),this.subscription("levels",this._org.active_levels.subscribe(e=>{this.zones=this.zones.filter(t=>e.find(e=>e.id===t)),!this.zones.length&&e.length&&this.zones.push(e[0].id),this.updateZones(this.zones)})),this.setSearch("")}))}}return e.\u0275fac=function(t){return new(t||e)(a.Pb(O),a.Pb(j.c),a.Pb(o.a),a.Pb(o.d))},e.\u0275cmp=a.Jb({type:e,selectors:[["visitors-topbar"]],features:[a.Ab],decls:15,vars:10,consts:[["appearance","outline"],["multiple","","placeholder","All Levels",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"m-2",3,"ngModel","ngModelChange"],[1,"text-xs"],[1,"flex-1","w-2"],[1,"mr-2",3,"modelChange"],[3,"dateChange"],[3,"value"]],template:function(e,t){if(1&e&&(a.Vb(0,"mat-form-field",0),a.Vb(1,"mat-select",1),a.fc("ngModelChange",(function(e){return t.zones=e}))("ngModelChange",(function(e){return t.updateZones(e)})),a.Jc(2,P,2,2,"mat-option",2),a.kc(3,"async"),a.Ub(),a.Ub(),a.Vb(4,"mat-slide-toggle",3),a.fc("ngModelChange",(function(e){return t.setFilters({all_bookings:e})})),a.kc(5,"async"),a.Vb(6,"div",4),a.Lc(7,"All Bookings"),a.Ub(),a.Ub(),a.Vb(8,"mat-slide-toggle",3),a.fc("ngModelChange",(function(e){return t.setFilters({show_week:e})})),a.kc(9,"async"),a.Vb(10,"div",4),a.Lc(11,"Show Week"),a.Ub(),a.Ub(),a.Qb(12,"div",5),a.Vb(13,"searchbar",6),a.fc("modelChange",(function(e){return t.setSearch(e)})),a.Ub(),a.Vb(14,"date-options",7),a.fc("dateChange",(function(e){return t.setDate(e)})),a.Ub()),2&e){let e=null,n=null;a.Db(1),a.pc("ngModel",t.zones),a.Db(1),a.pc("ngForOf",a.lc(3,4,t.levels)),a.Db(2),a.pc("ngModel",null==(e=a.lc(5,6,t.filters))?null:e.all_bookings),a.Db(4),a.pc("ngModel",null==(n=a.lc(9,8,t.filters))?null:n.show_week)}},directives:[V.c,C.a,s.l,s.o,i.m,x.a,U.a,M.a,D.j],pipes:[i.b],styles:["[_nghost-%COMP%] {\n                display: flex;\n                align-items: center;\n                background-color: #fff;\n                height: 5em;\n                padding: 0 1em;\n                border-bottom: 1px solid #ccc;\n            }\n\n            [_nghost-%COMP%]    > *[_ngcontent-%COMP%]    + *[_ngcontent-%COMP%] {\n                margin-left: 0.5rem;\n            }\n\n            mat-form-field[_ngcontent-%COMP%] {\n                height: 3.25em;\n                width: 8em;\n            }"]}),e})();var L=n("ZnXB"),S=n("Y2X+"),z=n("PBFl"),J=n("ukpX");function G(e,t){1&e&&(a.Vb(0,"i",13),a.Lc(1,"face"),a.Ub())}function E(e,t){if(1&e&&(a.Tb(0),a.Jc(1,G,2,0,"i",12),a.Sb()),2&e){const e=a.jc(),t=a.vc(3);a.Db(1),a.pc("ngIf",!(null!=e.visitor&&e.visitor.checked_in))("ngIfElse",t)}}function F(e,t){1&e&&(a.Vb(0,"i",14),a.Lc(1,"done"),a.Ub())}function T(e,t){1&e&&(a.Vb(0,"i",15),a.Lc(1,"assignment_ind"),a.Ub())}let N=(()=>{class e{constructor(e,t){this._state=e,this._events=t,this.eventChange=new a.o,this.checkin=()=>Object(c.a)(this,void 0,void 0,(function*(){this.loading="checkin",this.event=yield this._state.checkGuestIn(this.event,this.visitor).catch(e=>this.event),this.eventChange.emit(this.event),this.loading=""})),this.toggleRemote=()=>Object(c.a)(this,void 0,void 0,(function*(){var e;this.loading="remote";const t=this.event.remote.filter(e=>e!==this.visitor.email);this.remote||t.push(this.visitor.email);const n=new u.a(Object.assign(Object.assign({},this.event.toJSON()),{remote:t})).toJSON();console.log("Remote:",t,n),this.event=yield this._events.update(this.event.id,n,{system_id:null===(e=this.event.system)||void 0===e?void 0:e.id},"patch").catch(e=>(Object(r.l)("Error setting visitor status. Error: "+(e.statusText||e.message||e)),this.event)),this.eventChange.emit(this.event),this.loading=""})),this.checkout=()=>Object(c.a)(this,void 0,void 0,(function*(){this.loading="checkout",this.event=yield this._state.checkGuestOut(this.event,this.visitor).catch(e=>this.event),this.eventChange.emit(this.event),this.loading=""}))}get remote(){var e;return!!(null===(e=this.event)||void 0===e?void 0:e.remote.find(e=>{var t;return e===(null===(t=this.visitor)||void 0===t?void 0:t.email)}))}}return e.\u0275fac=function(t){return new(t||e)(a.Pb(O),a.Pb(u.b))},e.\u0275cmp=a.Jb({type:e,selectors:[["visitor-details"]],inputs:{event:"event",visitor:"visitor"},outputs:{eventChange:"eventChange"},decls:16,vars:17,consts:[[1,"w-12","text-lg","flex","justify-center"],[4,"ngIf","ngIfElse"],["checkin_state",""],["host_state",""],["flex","",1,"p-2","flex-1"],[1,"w-40","p-2","flex","items-center","justify-end"],["className","material-icons",3,"matTooltip","loading","content","click"],["matTooltip","Checkin Guest","className","material-icons","content","event_available",3,"loading","state","click"],["matTooltip","Checkout Guest","className","material-icons","content","event_busy",3,"loading","click"],["mat-icon-button","",3,"href","matTooltip"],["className","material-icons"],[1,"w-16","p-2"],["class","p-2 rounded-full material-icons border-2 border-dotted border-gray-600",4,"ngIf","ngIfElse"],[1,"p-2","rounded-full","material-icons","border-2","border-dotted","border-gray-600"],[1,"p-2","rounded-full","material-icons","bg-green-600","border-2","border-green-600","text-white"],[1,"p-2","rounded-full","material-icons","bg-blue-600","border-2","border-blue-600","text-white"]],template:function(e,t){if(1&e&&(a.Vb(0,"div",0),a.Jc(1,E,2,2,"ng-container",1),a.Jc(2,F,2,0,"ng-template",null,2,a.Kc),a.Jc(4,T,2,0,"ng-template",null,3,a.Kc),a.Ub(),a.Vb(6,"div",4),a.Lc(7),a.Ub(),a.Vb(8,"div",5),a.Vb(9,"action-icon",6),a.fc("click",(function(){return t.toggleRemote()})),a.Ub(),a.Vb(10,"action-icon",7),a.fc("click",(function(){return t.checkin()})),a.Ub(),a.Vb(11,"action-icon",8),a.fc("click",(function(){return t.checkout()})),a.Ub(),a.Vb(12,"a",9),a.Vb(13,"app-icon",10),a.Lc(14,"email"),a.Ub(),a.Ub(),a.Ub(),a.Qb(15,"div",11)),2&e){const e=a.vc(5);a.Db(1),a.pc("ngIf",!t.visitor.organizer)("ngIfElse",e),a.Db(6),a.Mc((null==t.visitor?null:t.visitor.name)||(null==t.visitor?null:t.visitor.email)),a.Db(2),a.Hb("invisible",!(null!=t.visitor&&t.visitor.is_external)||(null==t.visitor?null:t.visitor.organizer)),a.pc("matTooltip",t.remote?"Set as In-Person Visitor":"Set as Remote Visitior")("loading","remote"===t.loading)("content",t.remote?"tap_and_play":"business"),a.Db(1),a.Hb("invisible",!(null!=t.visitor&&t.visitor.is_external)||(null==t.visitor?null:t.visitor.organizer)),a.pc("loading","checkin"===t.loading)("state",null!=t.visitor&&t.visitor.checked_in?"success":""),a.Db(1),a.Hb("invisible",!(null!=t.visitor&&t.visitor.is_external)||(null==t.visitor?null:t.visitor.organizer)),a.pc("loading","checkout"===t.loading),a.Db(1),a.pc("href","mailto:"+(null==t.visitor?null:t.visitor.email),a.Ac)("matTooltip",null!=t.visitor&&t.visitor.organizer?"Email Host":"Email Guest")}},directives:[i.n,L.a,S.a,z.a,J.a],styles:["[_nghost-%COMP%] {\n                display: flex;\n                align-items: center;\n                width: 100%;\n                padding: 0 0.5rem;\n            }\n\n            [_nghost-%COMP%]    > div[_ngcontent-%COMP%] {\n                display: flex;\n                align-items: center;\n                height: 100%;\n                border-bottom: 1px solid #ccc;\n                height: 3.5rem;\n            }\n\n            [_nghost-%COMP%]    > div[_ngcontent-%COMP%]:first-child {\n                border: none;\n            }\n\n            .invisible[_ngcontent-%COMP%] {\n                opacity: 0;\n                pointer-events: none;\n            }"]}),e})();function A(e,t){1&e&&(a.Vb(0,"i",17),a.Lc(1,"event"),a.Ub())}function $(e,t){1&e&&(a.Vb(0,"i",17),a.Lc(1,"close"),a.Ub())}function H(e,t){1&e&&(a.Vb(0,"i",17),a.Lc(1,"done"),a.Ub())}function R(e,t){if(1&e){const e=a.Wb();a.Vb(0,"div",18),a.Qb(1,"div",19),a.Vb(2,"visitor-details",20),a.fc("eventChange",(function(t){return a.yc(e),a.jc().event=t})),a.Ub(),a.Ub()}if(2&e){const e=t.$implicit,n=a.jc();a.Db(2),a.pc("visitor",e)("event",n.event),a.Eb("disabled",!n.matches[e.email])}}let Q=(()=>{class e extends r.c{constructor(e){super(),this._state=e,this.matches={},this.filters=this._state.filters,this.checkinGuests=()=>Object(c.a)(this,void 0,void 0,(function*(){this.loading="checkin",this.event=yield this._state.checkAllGuestsIn(this.event).catch(e=>this.event),this.loading=""})),this.checkoutGuests=()=>Object(c.a)(this,void 0,void 0,(function*(){this.loading="checkout",this.event=yield this._state.checkAllGuestsOut(this.event).catch(e=>this.event),this.loading=""}))}get guestCount(){var e;return(null===(e=this.event)||void 0===e?void 0:e.attendees.reduce((e,t)=>e+(t.is_external&&!t.organizer?1:0),0))||0}get has_search(){return this._state.search}ngOnInit(){this.subscription("events",this._state.filtered_events.subscribe(()=>this.updateMatches()))}updateMatches(){this.matches={};const e=(this._state.search||"").toLowerCase();for(const t of this.event.attendees)this.matches[t.email]=!e||t.email.toLowerCase().includes(e)||t.name.toLowerCase().includes(e)}}return e.\u0275fac=function(t){return new(t||e)(a.Pb(O))},e.\u0275cmp=a.Jb({type:e,selectors:[["visitor-event"]],inputs:{event:"event"},features:[a.Ab],decls:28,vars:25,consts:[[1,"flex","items-center","px-2","bg-gray-100"],[1,"w-12","text-lg","flex","justify-center"],["class","p-2 rounded-full material-icons bg-gray-400",4,"ngIf"],[1,"w-24","p-2"],[1,"w-48","p-2"],["flex","",1,"p-2","flex-1"],[1,"w-64","p-2","truncate"],[1,"w-32","p-2","flex","items-center","justify-end"],["matTooltip","Checkin All Guests","className","material-icons","content","event_available",3,"loading","disabled","click"],["matTooltip","Checkout All Guests","className","material-icons","content","event_busy",3,"loading","disabled","click"],["mat-icon-button","","matTooltip","Email Host",3,"href"],["className","material-icons"],[1,"w-16","p-2"],["mat-icon-button","",3,"disabled","matTooltip","click"],["attendees","",1,"w-full","overflow-hidden","relative","border-b","border-gray-300"],["bar","",1,"absolute","top-0","bg-gray-400","z-10"],["visitor","","class","relative w-full pl-12 bg-gray-200",4,"ngFor","ngForOf"],[1,"p-2","rounded-full","material-icons","bg-gray-400"],["visitor","",1,"relative","w-full","pl-12","bg-gray-200"],["l-bar","",1,"absolute","bg-gray-400"],[3,"visitor","event","eventChange"]],template:function(e,t){if(1&e&&(a.Vb(0,"div",0),a.Vb(1,"div",1),a.Jc(2,A,2,0,"i",2),a.Jc(3,$,2,0,"i",2),a.Jc(4,H,2,0,"i",2),a.Ub(),a.Vb(5,"div",3),a.Lc(6),a.kc(7,"date"),a.kc(8,"async"),a.Ub(),a.Vb(9,"div",4),a.Lc(10),a.Ub(),a.Vb(11,"div",5),a.Lc(12),a.Ub(),a.Vb(13,"div",6),a.Lc(14),a.Ub(),a.Vb(15,"div",7),a.Vb(16,"action-icon",8),a.fc("click",(function(){return t.checkinGuests()})),a.Ub(),a.Vb(17,"action-icon",9),a.fc("click",(function(){return t.checkoutGuests()})),a.Ub(),a.Vb(18,"a",10),a.Vb(19,"app-icon",11),a.Lc(20,"email"),a.Ub(),a.Ub(),a.Ub(),a.Vb(21,"div",12),a.Vb(22,"button",13),a.fc("click",(function(){return t.show_attendees=!t.show_attendees})),a.Vb(23,"app-icon",11),a.Lc(24),a.Ub(),a.Ub(),a.Ub(),a.Ub(),a.Vb(25,"div",14),a.Qb(26,"div",15),a.Jc(27,R,3,3,"div",16),a.Ub()),2&e){let e=null;a.Db(2),a.pc("ngIf","cancelled"!==(null==t.event?null:t.event.status)&&"done"!==(null==t.event?null:t.event.state)),a.Db(1),a.pc("ngIf","cancelled"===(null==t.event?null:t.event.status)),a.Db(1),a.pc("ngIf","done"===(null==t.event?null:t.event.state)&&"cancelled"!==(null==t.event?null:t.event.status)),a.Db(2),a.Mc(a.mc(7,20,null==t.event?null:t.event.date,null!=(e=a.lc(8,23,t.filters))&&e.show_week?"MMM d, h:mm a":"shortTime")),a.Db(4),a.Nc(" ",(null==t.event||null==t.event.organiser?null:t.event.organiser.name)||(null==t.event||null==t.event.organiser?null:t.event.organiser.email)," "),a.Db(2),a.Mc(null==t.event?null:t.event.title),a.Db(2),a.Mc(null==t.event?null:t.event.location),a.Db(2),a.pc("loading","checkin"===t.loading)("disabled",t.guestCount<=0),a.Db(1),a.pc("loading","checkout"===t.loading)("disabled",t.guestCount<=0),a.Db(1),a.pc("href","mailto:"+(null==t.event||null==t.event.organiser?null:t.event.organiser.email),a.Ac),a.Db(4),a.pc("disabled",!(null!=t.event&&null!=t.event.attendees&&t.event.attendees.length))("matTooltip",t.show_attendees||t.has_search?"Hide Attendees":"Show Attendees"),a.Db(2),a.Mc(t.show_attendees?"keyboard_arrow_down":"keyboard_arrow_right"),a.Db(1),a.Gc("height",t.show_attendees||t.has_search?3.5*t.event.attendees.length+"rem":"0rem"),a.Db(1),a.Gc("height","calc("+(3.5*(t.event.attendees.length-1)+1.75)+"rem + 1px)"),a.Db(1),a.pc("ngForOf",t.event.attendees)}},directives:[i.n,L.a,S.a,z.a,J.a,z.b,i.m,N],pipes:[i.f,i.b],styles:['[_nghost-%COMP%] {\n                width: 100%;\n            }\n\n            visitor-details[_ngcontent-%COMP%] {\n                transition: opacity 200ms;\n            }\n\n            [attendees][_ngcontent-%COMP%] {\n                transition: height 200ms;\n            }\n\n            [visitor][_ngcontent-%COMP%] {\n                height: 3.5rem;\n            }\n\n            [bar][_ngcontent-%COMP%] {\n                width: 2px;\n                left: calc(2rem - 1px);\n            }\n\n            [l-bar][_ngcontent-%COMP%] {\n                height: 2px;\n                left: 2rem;\n                top: calc(50% - 1px);\n                width: 1rem;\n            }\n\n            [disabled="true"][_ngcontent-%COMP%] {\n                opacity: 0.35;\n            }']}),e})();function q(e,t){1&e&&a.Qb(0,"visitor-event",13),2&e&&a.pc("event",t.$implicit)}function B(e,t){if(1&e&&(a.Tb(0),a.Jc(1,q,1,1,"visitor-event",12),a.kc(2,"async"),a.Sb()),2&e){const e=a.jc();a.Db(1),a.pc("ngForOf",a.lc(2,2,e.bookings))("ngForTrackBy",e.trackByFn)}}function K(e,t){1&e&&(a.Vb(0,"div",14),a.Vb(1,"p",15),a.Lc(2," There are no visitors for the currently selected date. "),a.Ub(),a.Ub())}let Y=(()=>{class e{constructor(e){this._state=e,this.bookings=this._state.filtered_events}trackByFn(e,t){return t?t.id:void 0}}return e.\u0275fac=function(t){return new(t||e)(a.Pb(O))},e.\u0275cmp=a.Jb({type:e,selectors:[["visitor-listings"]],decls:19,vars:4,consts:[[1,"w-full","flex-1","text-sm"],[1,"w-full","flex","items-center","bg-white","border-b","border-gray-500","p-2","font-medium"],[1,"w-12","p-2"],[1,"w-24","p-2"],[1,"w-48","p-2"],["flex","",1,"p-2","flex-1"],[1,"w-64","p-2"],[1,"w-32","p-2"],[1,"w-16","p-2"],[1,"w-full","flex-1","overflow-auto"],[4,"ngIf","ngIfElse"],["empty_state",""],[3,"event",4,"ngFor","ngForOf","ngForTrackBy"],[3,"event"],[1,"h-full","w-full","flex","items-center","justify-center"],[1,"p-8"]],template:function(e,t){if(1&e&&(a.Vb(0,"div",0),a.Vb(1,"div",1),a.Qb(2,"div",2),a.Vb(3,"div",3),a.Lc(4,"Time"),a.Ub(),a.Vb(5,"div",4),a.Lc(6,"Host"),a.Ub(),a.Vb(7,"div",5),a.Lc(8,"Title"),a.Ub(),a.Vb(9,"div",6),a.Lc(10,"Location"),a.Ub(),a.Vb(11,"div",7),a.Lc(12,"Actions"),a.Ub(),a.Qb(13,"div",8),a.Ub(),a.Vb(14,"div",9),a.Jc(15,B,3,4,"ng-container",10),a.kc(16,"async"),a.Ub(),a.Ub(),a.Jc(17,K,3,0,"ng-template",null,11,a.Kc)),2&e){const e=a.vc(18);let n=null;a.Db(15),a.pc("ngIf",null==(n=a.lc(16,2,t.bookings))?null:n.length)("ngIfElse",e)}},directives:[i.n,i.m,Q],pipes:[i.b],styles:[""]}),e})();var Z=n("66mq");function W(e,t){1&e&&a.Qb(0,"mat-progress-bar",4)}const X=[{path:"",component:(()=>{class e{constructor(e){this._state=e,this.loading=this._state.loading}ngOnInit(){this._state.startPolling()}ngOnDestroy(){this._state.stopPolling()}}return e.\u0275fac=function(t){return new(t||e)(a.Pb(O))},e.\u0275cmp=a.Jb({type:e,selectors:[["app-visitors"]],decls:6,vars:3,consts:[[1,"relative","overflow-hidden","flex-1","flex","flex-col"],[1,"w-full"],[1,"w-full","flex-1","h-0"],["class","w-full","mode","indeterminate",4,"ngIf"],["mode","indeterminate",1,"w-full"]],template:function(e,t){1&e&&(a.Qb(0,"sidebar"),a.Vb(1,"main",0),a.Qb(2,"visitors-topbar",1),a.Qb(3,"visitor-listings",2),a.Jc(4,W,1,0,"mat-progress-bar",3),a.kc(5,"async"),a.Ub()),2&e&&(a.Db(4),a.pc("ngIf",a.lc(5,1,t.loading)))},directives:[k.a,I,Y,i.n,Z.a],pipes:[i.b],styles:["[_nghost-%COMP%] {\n                display: flex;\n                height: 100%;\n                width: 100%;\n            }"]}),e})()}];let ee=(()=>{class e{}return e.\u0275mod=a.Nb({type:e}),e.\u0275inj=a.Mb({factory:function(t){return new(t||e)},imports:[[i.c,s.h,l.a,o.g.forChild(X)]]}),e})()},JS2V:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n("JuBR"),s=n("N1LS"),o=n("mrqE");function l(e,t){Object(o.a)(1,arguments);var n=t||{},l=n.locale,a=l&&l.options&&l.options.weekStartsOn,c=null==a?0:Object(s.a)(a),r=null==n.weekStartsOn?c:Object(s.a)(n.weekStartsOn);if(!(r>=0&&r<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var u=Object(i.a)(e),d=u.getDay(),h=6+(d<r?-7:0)-(d-r);return u.setDate(u.getDate()+h),u.setHours(23,59,59,999),u}},KuCG:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("JuBR"),s=n("mrqE");function o(e){Object(s.a)(1,arguments);var t=Object(i.a)(e);return t.setHours(23,59,59,999),t}},zYp8:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n("JuBR"),s=n("N1LS"),o=n("mrqE");function l(e,t){Object(o.a)(1,arguments);var n=t||{},l=n.locale,a=l&&l.options&&l.options.weekStartsOn,c=null==a?0:Object(s.a)(a),r=null==n.weekStartsOn?c:Object(s.a)(n.weekStartsOn);if(!(r>=0&&r<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var u=Object(i.a)(e),d=u.getDay(),h=(d<r?7:0)+d-r;return u.setDate(u.getDate()-h),u.setHours(0,0,0,0),u}}}]);
//# sourceMappingURL=visitors-visitors-module.92d7554d396900ee9a29.js.map