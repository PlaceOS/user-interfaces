(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{kanD:function(t,e,n){"use strict";n.r(e),n.d(e,"COMPONENTS",(function(){return Z})),n.d(e,"StaffModule",(function(){return B}));var i=n("2kYt"),o=n("nIj0"),s=n("sEIs"),c=n("EM62"),r=n("D57K"),a=n("mjT4"),l=n("C05f"),f=n("HM3f"),b=n("05Mk"),d=n("YtkY"),u=n("TLy2"),m=n("wqq/"),h=n("9MvL"),g=n("KuCG"),p=n("20lr"),v=n("dJst");let _=(()=>{class t extends p.b{constructor(t){super(),this._org=t,this._onsite={},this._events={},this._filters=new l.a({}),this._search=new l.a(""),this._loading=new l.a(!1),this._users=new l.a([]),this.loading=this._loading.asObservable(),this.filters=this._filters.asObservable(),this.users=this._filters.asObservable(),this.filtered_users=Object(f.b)([this._search,this._users,this._filters]).pipe(Object(d.a)(t=>{const[e,n,i]=t;return n.filter(t=>(!e||t.name.toLowerCase().includes(e)||t.email.toLowerCase().includes(e))&&(!i.only_onsite||this._onsite[t.email]))})),this.user_events=Object(f.b)([this._filters]).pipe(Object(u.a)(t=>Object(r.a)(this,void 0,void 0,(function*(){this._loading.next(!0);const t=yield Object(b.d)({period_start:Math.floor(Object(h.a)(new Date).valueOf()/1e3),period_end:Math.floor(Object(g.a)(new Date).valueOf()/1e3),type:"staff"}).toPromise(),e={},n=(new Date).valueOf();for(const i of t)Object(p.v)(n,n,i.date,i.date+60*i.duration*1e3)&&(e[i.asset_id]=i.checked_in,this._events[i.asset_id]=i);return this._onsite=e,this._loading.next(!1),e}))),Object(m.a)()),this.loadUsers()}setFilters(t){this._filters.next(Object.assign(Object.assign({},this._filters.getValue()),t))}setSearchString(t){this._search.next(t)}startPolling(t=3e4){this.setFilters(this._filters.getValue()),this.interval("poll",()=>this.setFilters(this._filters.getValue()),t)}stopPolling(){this.clearInterval("poll")}checkin(t){return Object(r.a)(this,void 0,void 0,(function*(){const e=yield Object(b.f)({booking_start:Math.floor((new Date).valueOf()/1e3),booking_end:Math.floor(Object(g.a)(new Date).valueOf()/1e3),asset_id:t.email,title:"Checked-in Onsite",description:this._org.building.display_name||this._org.building.name,zones:[this._org.building.id],booking_type:"staff"}).toPromise();yield Object(b.c)(e.id,!0),this._events[t.email]=e,this._onsite[t.email]=!0}))}checkout(t){return Object(r.a)(this,void 0,void 0,(function*(){const e=this._events[t.email];if(e){const n=yield Object(b.f)(Object.assign(Object.assign({},e.toJSON()),{booking_end:Math.floor((new Date).valueOf()/1e3)})).toPromise();yield Object(b.c)(n.id,!1).toPromise(),this._events[t.email]=n,this._onsite[t.email]=!1}}))}loadUsers(){return Object(r.a)(this,void 0,void 0,(function*(){const t=yield Object(a.c)("").toPromise();t.sort((t,e)=>t.name.localeCompare(e.name)),this._users.next(t)}))}}return t.\u0275fac=function(e){return new(e||t)(c.ac(v.c))},t.\u0275prov=c.Lb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var O=n("UfDH"),y=n("jOdJ"),I=n("29Wa"),x=n("R7+U"),U=n("k8N0"),w=n("wobF"),V=n("mFH5");function j(t,e){if(1&t&&(c.Vb(0,"mat-option",7),c.Ic(1),c.Ub()),2&t){const t=e.$implicit;c.nc("value",t.id),c.Db(1),c.Kc(" ",t.display_name||t.name," ")}}let C=(()=>{class t extends p.b{constructor(t,e,n,i){super(),this._state=t,this._org=e,this._route=n,this._router=i,this.zones=[],this.levels=this._org.active_levels,this.filters=this._state.filters,this.setDate=t=>this._state.setFilters({date:t}),this.setFilters=t=>this._state.setFilters(t),this.setSearch=t=>this._state.setSearchString(t),this.updateZones=t=>{this._router.navigate([],{relativeTo:this._route,queryParams:{zone_ids:t.join(",")}}),this._state.setFilters({zones:t})}}ngOnInit(){return Object(r.a)(this,void 0,void 0,(function*(){yield this._org.initialised.pipe(Object(y.a)(t=>t)).toPromise(),this.subscription("route.query",this._route.queryParamMap.subscribe(t=>{if(t.has("zone_ids")){const e=t.get("zone_ids").split(",");if(e.length){const t=this._org.levelWithID(e);if(!t)return;this._org.building=this._org.buildings.find(e=>e.id===t.parent_id),this.zones=e}}})),this.subscription("levels",this._org.active_levels.subscribe(t=>{this.zones=this.zones.filter(e=>t.find(t=>t.id===e)),!this.zones.length&&t.length&&this.zones.push(t[0].id),this.updateZones(this.zones)})),this.setSearch("")}))}}return t.\u0275fac=function(e){return new(e||t)(c.Pb(_),c.Pb(v.c),c.Pb(s.a),c.Pb(s.d))},t.\u0275cmp=c.Jb({type:t,selectors:[["staff-topbar"]],features:[c.Ab],decls:10,vars:7,consts:[["appearance","outline"],["multiple","","placeholder","All Levels",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"m-2",3,"ngModel","ngModelChange"],[1,"text-xs"],[1,"flex-1","w-2"],[1,"mr-2",3,"modelChange"],[3,"value"]],template:function(t,e){if(1&t&&(c.Vb(0,"mat-form-field",0),c.Vb(1,"mat-select",1),c.dc("ngModelChange",(function(t){return e.zones=t}))("ngModelChange",(function(t){return e.updateZones(t)})),c.Gc(2,j,2,2,"mat-option",2),c.ic(3,"async"),c.Ub(),c.Ub(),c.Vb(4,"mat-slide-toggle",3),c.dc("ngModelChange",(function(t){return e.setFilters({only_onsite:t})})),c.ic(5,"async"),c.Vb(6,"div",4),c.Ic(7,"Onsite Only"),c.Ub(),c.Ub(),c.Qb(8,"div",5),c.Vb(9,"searchbar",6),c.dc("modelChange",(function(t){return e.setSearch(t)})),c.Ub()),2&t){let t=null;c.Db(1),c.nc("ngModel",e.zones),c.Db(1),c.nc("ngForOf",c.jc(3,3,e.levels)),c.Db(2),c.nc("ngModel",null==(t=c.jc(5,5,e.filters))?null:t.only_onsite)}},directives:[I.c,x.a,o.l,o.o,i.m,U.a,w.a,V.j],pipes:[i.b],styles:["[_nghost-%COMP%] {\n                display: flex;\n                align-items: center;\n                background-color: #fff;\n                height: 5em;\n                padding: 0 1em;\n                border-bottom: 1px solid #ccc;\n            }\n\n            [_nghost-%COMP%]    > *[_ngcontent-%COMP%]    + *[_ngcontent-%COMP%] {\n                margin-left: 0.5rem;\n            }\n\n            mat-form-field[_ngcontent-%COMP%] {\n                height: 3.25em;\n                width: 8em;\n            }"]}),t})();var P=n("/ILR"),M=n("WKsi"),D=n("Y2X+"),k=n("PBFl"),z=n("0/Ep");function S(t,e){1&t&&(c.Vb(0,"div",11),c.Ic(1,"Onsite"),c.Ub())}let G=(()=>{class t{constructor(t){this._state=t,this.checkin=()=>Object(r.a)(this,void 0,void 0,(function*(){this.loading=!0,yield this._state.checkin(this.user).catch(t=>Object(p.m)("Error checking in Staff member")),this.loading=!1})),this.checkout=()=>Object(r.a)(this,void 0,void 0,(function*(){this.loading=!0,yield this._state.checkout(this.user).catch(t=>Object(p.m)("Error checking out Staff member")),this.loading=!1}))}}return t.\u0275fac=function(e){return new(e||t)(c.Pb(_))},t.\u0275cmp=c.Jb({type:t,selectors:[["staff-details"]],inputs:{user:"user",onsite:"onsite"},decls:16,vars:11,consts:[[1,"w-full","flex","items-center","px-4","py-2","bg-white","border-b","border-gray-200"],[3,"user"],[1,"flex","flex-col","flex-1"],[1,"px-2"],[1,"px-2","text-xs","text-opacity-50"],["class","text-xs opacity-50 px-4",4,"ngIf"],[1,"flex","items-center"],["className","material-icons",3,"matTooltip","loading","content","click"],["mat-icon-button","","matTooltip","Email Staff",3,"disabled","href"],["className","material-icons"],["mat-icon-button","","matTooltip","Phone Staff",3,"disabled","href"],[1,"text-xs","opacity-50","px-4"]],template:function(t,e){1&t&&(c.Vb(0,"div",0),c.Qb(1,"a-user-avatar",1),c.Vb(2,"div",2),c.Vb(3,"div",3),c.Ic(4),c.Ub(),c.Vb(5,"div",4),c.Ic(6),c.Ub(),c.Ub(),c.Gc(7,S,2,0,"div",5),c.Vb(8,"div",6),c.Vb(9,"action-icon",7),c.dc("click",(function(){return e.onsite?e.checkout():e.checkin()})),c.Ub(),c.Vb(10,"a",8),c.Vb(11,"app-icon",9),c.Ic(12,"email"),c.Ub(),c.Ub(),c.Vb(13,"a",10),c.Vb(14,"app-icon",9),c.Ic(15,"call"),c.Ub(),c.Ub(),c.Ub(),c.Ub()),2&t&&(c.Db(1),c.nc("user",e.user),c.Db(3),c.Jc(null==e.user?null:e.user.name),c.Db(2),c.Jc(null==e.user?null:e.user.email),c.Db(1),c.nc("ngIf",e.onsite),c.Db(2),c.nc("matTooltip",e.onsite?"Checkout Staff":"Checkin Staff")("loading",e.loading)("content",e.onsite?"event_busy":"event_available"),c.Db(1),c.nc("disabled",!(null!=e.user&&e.user.email))("href","mailto:"+(null==e.user?null:e.user.email),c.xc),c.Db(3),c.nc("disabled",!(null!=e.user&&e.user.phone))("href","tel:"+(null==e.user?null:e.user.phone),c.xc))},directives:[P.a,i.n,M.a,D.a,k.a,z.a],styles:["[_nghost-%COMP%]    > div[_ngcontent-%COMP%]:hover {\n            background-color: #f0f0f0 !important;\n        }"]}),t})();var F=n("66mq");const T=["container"];function E(t,e){if(1&t){const t=c.Wb();c.Vb(0,"div",7),c.dc("click",(function(){c.vc(t);const n=e.$implicit;return c.hc().scrollTo(n)})),c.ic(1,"async"),c.Ic(2),c.Ub()}if(2&t){const t=e.$implicit,n=c.hc();c.Hb("disabled",c.jc(1,5,n.user_list)[t].length<=0)("active",t===n.active_group),c.Db(2),c.Kc(" ",t," ")}}function N(t,e){if(1&t&&(c.Qb(0,"staff-details",12),c.ic(1,"async"),c.ic(2,"async")),2&t){const t=e.$implicit,n=e.index,i=c.hc(2).$implicit,o=c.hc(2);c.nc("id","letter-"+i+"-"+n)("user",t)("onsite",!!c.jc(1,3,o.events)&&c.jc(2,5,o.events)[t.email])}}function Q(t,e){if(1&t&&(c.Tb(0),c.Vb(1,"div",10),c.Ic(2),c.Ub(),c.Gc(3,N,3,7,"staff-details",11),c.ic(4,"async"),c.Sb()),2&t){const t=c.hc().$implicit,e=c.hc(2);c.Db(1),c.nc("id","letter-"+("#"===t?"0":t)),c.Db(1),c.Kc(" ",t," "),c.Db(1),c.nc("ngForOf",c.jc(4,3,e.user_list)[t])}}function q(t,e){if(1&t&&(c.Tb(0),c.Gc(1,Q,5,5,"ng-container",9),c.ic(2,"async"),c.Sb()),2&t){const t=e.$implicit,n=c.hc(2);c.Db(1),c.nc("ngIf",c.jc(2,1,n.user_list)[t].length)}}function J(t,e){if(1&t&&(c.Tb(0),c.Gc(1,q,3,3,"ng-container",8),c.Sb()),2&t){const t=c.hc();c.Db(1),c.nc("ngForOf",t.groups)}}function H(t,e){1&t&&c.Qb(0,"mat-progress-bar",13)}function $(t,e){1&t&&(c.Vb(0,"div",14),c.Vb(1,"p"),c.Ic(2,"No matching staff members"),c.Ub(),c.Ub())}const A="#abcdefghijklmnopqrstuvwxyz".split("");let L=(()=>{class t extends p.b{constructor(t){super(),this._state=t,this.active_group="#",this.groups=A,this.events=this._state.user_events,this.loading=this._state.loading,this.user_count=this._state.filtered_users.pipe(Object(d.a)(t=>t.length)),this.user_list=this._state.filtered_users.pipe(Object(d.a)(t=>{const e={};for(const n of A)e[n]=(t||[]).filter(t=>t.name.toLowerCase()[0].startsWith(n)||"#"===n&&!A.includes(t.name.toLowerCase()[0]));return this.timeout("scroll",()=>this.onScroll({}),30),e}))}onScroll(t){const e=this._el.nativeElement.scrollTop;for(const n of A){const t=document.querySelector("#letter-"+("#"===n?"0":n));if(t){if(t.offsetTop-e>0)break;this.active_group=n}}}scrollTo(t){const e=document.querySelector(`#letter-${t}-0`);e&&(e.scrollIntoView({behavior:"smooth",block:"center"}),this.active_group=t)}}return t.\u0275fac=function(e){return new(e||t)(c.Pb(_))},t.\u0275cmp=c.Jb({type:t,selectors:[["staff-listings"]],viewQuery:function(t,e){if(1&t&&c.Mc(T,!0),2&t){let t;c.rc(t=c.ec())&&(e._el=t.first)}},features:[c.Ab],decls:10,vars:8,consts:[[1,"w-full","p-2","flex","items-center","justify-center"],["letter","","class","capitalize h-6 w-6 flex items-center justify-center text-xs cursor-pointer",3,"disabled","active","click",4,"ngFor","ngForOf"],[1,"flex-1","overflow-auto","w-full","relative","bg-gray-100",2,"height","50%",3,"scroll"],["container",""],[4,"ngIf","ngIfElse"],["mode","indeterminate",4,"ngIf"],["empty_state",""],["letter","",1,"capitalize","h-6","w-6","flex","items-center","justify-center","text-xs","cursor-pointer",3,"click"],[4,"ngFor","ngForOf"],[4,"ngIf"],["group","",1,"capitalize","bg-gray-300","border-b","text-sm","font-medium","sticky","top-0","z-10",3,"id"],[3,"id","user","onsite",4,"ngFor","ngForOf"],[3,"id","user","onsite"],["mode","indeterminate"],[1,"absolute","inset-0","flex","flex-col","items-center","justify-center"]],template:function(t,e){if(1&t&&(c.Vb(0,"div",0),c.Gc(1,E,3,7,"div",1),c.Ub(),c.Vb(2,"div",2,3),c.dc("scroll",(function(t){return e.onScroll(t)})),c.Gc(4,J,2,1,"ng-container",4),c.ic(5,"async"),c.Ub(),c.Gc(6,H,1,0,"mat-progress-bar",5),c.ic(7,"async"),c.Gc(8,$,3,0,"ng-template",null,6,c.Hc)),2&t){const t=c.sc(9);c.Db(1),c.nc("ngForOf",e.groups),c.Db(3),c.nc("ngIf",c.jc(5,4,e.user_count))("ngIfElse",t),c.Db(2),c.nc("ngIf",c.jc(7,6,e.loading))}},directives:[i.m,i.n,G,F.a],pipes:[i.b],styles:["[_nghost-%COMP%] {\n                display: flex;\n                flex-direction: column;\n                width: 100%;\n                height: 50%;\n            }\n\n            [letter][_ngcontent-%COMP%] {\n                transition: font-size 200ms, color 200ms;\n            }\n\n            [group][_ngcontent-%COMP%] {\n                border-color: #ccc;\n                padding: 0.5rem 1.65rem;\n            }\n\n            .disabled[_ngcontent-%COMP%] {\n                opacity: 0.2;\n                pointer-events: none;\n            }\n\n            .active[_ngcontent-%COMP%] {\n                font-size: 1.25rem;\n                opacity: 1;\n                color: #d81b60;\n            }"]}),t})();function W(t,e){1&t&&c.Qb(0,"mat-progress-bar",4)}let K=(()=>{class t{constructor(t){this._state=t,this.loading=this._state.loading}ngOnInit(){this._state.startPolling()}ngOnDestroy(){this._state.stopPolling()}}return t.\u0275fac=function(e){return new(e||t)(c.Pb(_))},t.\u0275cmp=c.Jb({type:t,selectors:[["app-staff"]],decls:6,vars:3,consts:[[1,"relative","overflow-hidden","flex-1","flex","flex-col"],[1,"w-full"],[1,"w-full","flex-1","h-0"],["class","w-full","mode","indeterminate",4,"ngIf"],["mode","indeterminate",1,"w-full"]],template:function(t,e){1&t&&(c.Qb(0,"sidebar"),c.Vb(1,"main",0),c.Qb(2,"staff-topbar",1),c.Qb(3,"staff-listings",2),c.Gc(4,W,1,0,"mat-progress-bar",3),c.ic(5,"async"),c.Ub()),2&t&&(c.Db(4),c.nc("ngIf",c.jc(5,1,e.loading)))},directives:[O.a,C,L,i.n,F.a],pipes:[i.b],styles:["[_nghost-%COMP%] {\n                display: flex;\n                height: 100%;\n                width: 100%;\n            }"]}),t})();var Y=n("oRDy");const R=[{path:"",component:K}],Z=[K,C,L,G];let B=(()=>{class t{}return t.\u0275mod=c.Nb({type:t}),t.\u0275inj=c.Mb({factory:function(e){return new(e||t)},imports:[[i.c,o.h,Y.a,s.g.forChild(R)]]}),t})()},mjT4:function(t,e,n){"use strict";n.d(e,"a",(function(){return M})),n.d(e,"b",(function(){return G})),n.d(e,"c",(function(){return Q})),n.d(e,"d",(function(){return q}));var i=n("EM62"),o=n("OZ4H"),s=n("20lr"),c=n("xuqh"),r=n("HTl7");function a(t,e){if(1&t&&(i.Vb(0,"div",7),i.Qb(1,"user-form",8),i.Ub()),2&t){const t=i.hc();i.Db(1),i.nc("form",t.form)}}function l(t,e){if(1&t){const t=i.Wb();i.Vb(0,"footer"),i.Vb(1,"button",9),i.Ic(2,"Cancel"),i.Ub(),i.Vb(3,"button",10),i.dc("click",(function(){return i.vc(t),i.hc().saveChanges()})),i.Ic(4,"Save"),i.Ub(),i.Ub()}}function f(t,e){1&t&&(i.Vb(0,"div",7),i.Vb(1,"div",11),i.Vb(2,"div",12),i.Qb(3,"mat-spinner",13),i.Ub(),i.Vb(4,"div",14),i.Ic(5,"Saving attendee..."),i.Ub(),i.Ub(),i.Ub())}const b=function(){return{type:"icon",class:"material-icons",content:"close"}};let d=(()=>{class t extends s.b{constructor(t){super(),this._data=t,this.event=new i.o}ngOnInit(){this.user=this._data.user||{},this.form=Object(r.c)(this.user)}saveChanges(){if(this.form.markAllAsTouched(),this.form.valid){const t=new c.c(Object.assign(Object.assign({},this.form.value),{type:"external",visit_expected:!this.form.value.email.endsWith("place.tech")}));this.event.emit({reason:"done",metadata:t})}}}return t.\u0275fac=function(e){return new(e||t)(i.Pb(o.a))},t.\u0275cmp=i.Jb({type:t,selectors:[["new-user-modal"]],outputs:{event:"event"},features:[i.Ab],decls:12,vars:6,consts:[["mat-dialog-title","",1,"heading"],[1,"flex-1"],["mat-icon-button","","mat-dialog-close",""],[3,"icon"],["class","body",4,"ngIf","ngIfElse"],[4,"ngIf"],["load_state",""],[1,"body"],[3,"form"],["mat-button","","mat-dialog-close","",1,"inverse"],["mat-button","",3,"click"],[1,"info-block"],[1,"icon"],["diameter","32"],[1,"text"]],template:function(t,e){if(1&t&&(i.Vb(0,"header"),i.Vb(1,"div",0),i.Ic(2),i.Ub(),i.Qb(3,"div",1),i.Vb(4,"button",2),i.Qb(5,"app-icon",3),i.Ub(),i.Ub(),i.Vb(6,"mat-dialog-content"),i.Gc(7,a,2,1,"div",4),i.Ub(),i.Vb(8,"mat-dialog-actions"),i.Gc(9,l,5,0,"footer",5),i.Ub(),i.Gc(10,f,6,0,"ng-template",null,6,i.Hc)),2&t){const t=i.sc(11);i.Db(2),i.Kc("",null!=e.user&&e.user.id?"Edit":"Add"," External Attendee"),i.Db(3),i.nc("icon",i.oc(5,b)),i.Db(2),i.nc("ngIf",!e.loading)("ngIfElse",t),i.Db(2),i.nc("ngIf",!e.loading)}},styles:[".body[_ngcontent-%COMP%]{position:relative;flex-direction:column;min-height:20em!important}.body[_ngcontent-%COMP%], footer[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%}footer[_ngcontent-%COMP%]{justify-content:center;padding:.35em;border-top:1px solid #ccc}footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:8em}.icon[_ngcontent-%COMP%]{height:1.2em;width:1.2em;display:flex;align-items:center;justify-content:center;font-size:2em}.content[_ngcontent-%COMP%]{width:16rem;text-align:center;font-size:.8em}app-icon[_ngcontent-%COMP%]{transition:font-size .2s}.close[_ngcontent-%COMP%]{font-size:1em;cursor:pointer}.close[_ngcontent-%COMP%]:hover   app-icon[_ngcontent-%COMP%]{font-size:.8em}button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;font-size:1rem;margin:0 .25em}"]}),t})();var u=n("2kYt"),m=n("nIj0"),h=n("29Wa"),g=n("Cd2c"),p=n("+Tre");function v(t,e){1&t&&(i.Vb(0,"mat-error"),i.Ic(1,"Name is required"),i.Ub())}function _(t,e){if(1&t&&(i.Vb(0,"div",4),i.Vb(1,"label",5),i.Ic(2,"Name"),i.Vb(3,"span"),i.Ic(4,"*"),i.Ub(),i.Ic(5,":"),i.Ub(),i.Vb(6,"mat-form-field",6),i.Qb(7,"input",7),i.Gc(8,v,2,0,"mat-error",8),i.Ub(),i.Ub()),2&t){const t=i.hc(2);i.Db(1),i.Hb("error",t.form.controls.name.invalid&&t.form.controls.name.touched),i.Db(7),i.nc("ngIf",t.form.controls.name.invalid)}}function O(t,e){1&t&&(i.Vb(0,"mat-error"),i.Ic(1,"A valid email is required"),i.Ub())}function y(t,e){if(1&t&&(i.Vb(0,"div",4),i.Vb(1,"label",9),i.Ic(2,"Email"),i.Vb(3,"span"),i.Ic(4,"*"),i.Ub(),i.Ic(5,":"),i.Ub(),i.Vb(6,"mat-form-field",6),i.Qb(7,"input",10),i.Gc(8,O,2,0,"mat-error",8),i.Ub(),i.Ub()),2&t){const t=i.hc(2);i.Db(1),i.Hb("error",t.form.controls.email.invalid&&t.form.controls.email.touched),i.Db(7),i.nc("ngIf",t.form.controls.email.invalid)}}function I(t,e){1&t&&(i.Vb(0,"mat-error"),i.Ic(1,"Organisation is required"),i.Ub())}function x(t,e){if(1&t&&(i.Vb(0,"div",4),i.Vb(1,"label",11),i.Ic(2,"Organisation"),i.Vb(3,"span"),i.Ic(4,"*"),i.Ub(),i.Ic(5,":"),i.Ub(),i.Vb(6,"mat-form-field",6),i.Qb(7,"input",12),i.Gc(8,I,2,0,"mat-error",8),i.Ub(),i.Ub()),2&t){const t=i.hc(2);i.Db(1),i.Hb("error",t.form.controls.organisation.invalid&&t.form.controls.organisation.touched),i.Db(7),i.nc("ngIf",t.form.controls.organisation.invalid)}}function U(t,e){1&t&&(i.Vb(0,"mat-error"),i.Ic(1,"Phone format is invalid"),i.Ub())}function w(t,e){if(1&t&&(i.Vb(0,"div",4),i.Vb(1,"label",13),i.Ic(2,"Phone:"),i.Ub(),i.Vb(3,"mat-form-field",6),i.Qb(4,"input",14),i.Gc(5,U,2,0,"mat-error",8),i.Ub(),i.Ub()),2&t){const t=i.hc(2);i.Db(1),i.Hb("error",t.form.controls.phone.invalid&&t.form.controls.phone.touched),i.Db(4),i.nc("ngIf",t.form.controls.phone.invalid)}}function V(t,e){1&t&&(i.Vb(0,"div",4),i.Vb(1,"mat-checkbox",15),i.Ic(2,"Assistance required"),i.Ub(),i.Ub())}function j(t,e){1&t&&(i.Vb(0,"div",4),i.Vb(1,"mat-checkbox",16),i.Ic(2,"Visit expected"),i.Ub(),i.Ub())}function C(t,e){if(1&t&&(i.Vb(0,"div",1),i.Vb(1,"form",2),i.Gc(2,_,9,3,"div",3),i.Gc(3,y,9,3,"div",3),i.Gc(4,x,9,3,"div",3),i.Gc(5,w,6,3,"div",3),i.Gc(6,V,3,0,"div",3),i.Gc(7,j,3,0,"div",3),i.Ub(),i.Ub()),2&t){const t=i.hc();i.Db(1),i.nc("formGroup",t.form),i.Db(1),i.nc("ngIf",t.form.controls.name),i.Db(1),i.nc("ngIf",t.form.controls.email),i.Db(1),i.nc("ngIf",t.form.controls.organisation),i.Db(1),i.nc("ngIf",t.form.controls.phone),i.Db(1),i.nc("ngIf",t.form.controls.assistance_required),i.Db(1),i.nc("ngIf",t.form.controls.visit_expected)}}let P=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Jb({type:t,selectors:[["user-form"]],inputs:{form:"form"},decls:1,vars:1,consts:[["class","user form",4,"ngIf"],[1,"user","form"],[3,"formGroup"],["class","field",4,"ngIf"],[1,"field"],["for","name"],["appearance","outline"],["matInput","","name","name","placeholder","Name","formControlName","name"],[4,"ngIf"],["for","email"],["matInput","","name","email","placeholder","Email Address","formControlName","email"],["for","organisation"],["matInput","","name","organisation","placeholder","Organisation","formControlName","organisation"],["for","phone"],["matInput","","name","phone","placeholder","Phone","formControlName","phone"],["color","primary","formControlName","assistance_required"],["color","primary","formControlName","visit_expected"]],template:function(t,e){1&t&&i.Gc(0,C,8,7,"div",0),2&t&&i.nc("ngIf",e.form)},directives:[u.n,m.r,m.m,m.g,h.c,g.b,m.c,m.l,m.e,h.b,p.a],styles:["label[_ngcontent-%COMP%]{min-width:100%;margin-right:1em;font-weight:700;font-size:.8em;width:100%;margin-top:0;margin-bottom:.5em}label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--pending)}label.error[_ngcontent-%COMP%]{color:var(--error)}.field[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}mat-form-field[_ngcontent-%COMP%]{width:100%}"]}),t})();class M{constructor(t){this.type=t.type||t.location||"other",this.position=t.position||t.map_id||{x:t.x/t.map_width,y:t.y/t.map_height},this.variance=t.variance||0,this.last_seen=t.last_seen||Math.floor((new Date).valueOf()/1e3),this.level=t.level,this.building=t.building,this.at_location=!!t.at_location}}var D=n("Rc+I"),k=n("PBFl"),z=n("0/Ep"),S=n("csyo");let G=(()=>{class t{}return t.\u0275mod=i.Nb({type:t}),t.\u0275inj=i.Mb({factory:function(e){return new(e||t)},imports:[[u.c,m.h,m.p,o.f,D.b,p.b]]}),t})();i.yc(d,[o.h,k.b,o.d,z.a,o.e,u.n,P,o.c,S.b],[]);var F=n("/It1"),T=n("YtkY"),E=(n("SUR7"),n("SQ91"));const N="/api/staff/v1/people";function Q(t){const e=Object(E.a)({q:t});return Object(F.d)(`${N}${e?"?"+e:""}`).pipe(Object(T.a)(t=>t.map(t=>new c.b(t))))}function q(t){return Object(F.d)(`${N}/${encodeURIComponent(t)}`).pipe(Object(T.a)(t=>new c.b(t)))}}}]);
//# sourceMappingURL=staff-staff-module.a7ab78e3c9842a8040f4.js.map