"use strict";(self.webpackChunkvisitor_kiosk=self.webpackChunkvisitor_kiosk||[]).push([["apps_visitor-kiosk_src_app_checkin_checkin_module_ts"],{5105:(aa,Ze,c)=>{c.r(Ze),c.d(Ze,{VisitorCheckinModule:()=>oa});var _=c(2954),d=c(3557),Z=c(465),ct=c(2487),u=c(1415),S=c(3155),N=c(1091),g=c(9112),ae=c(9830),V=c(4653),dt=c(5816),y=c(8406),e=c(9523);let J=(()=>{class i{constructor(){this._event=new y.X(null),this._guest=new y.X(null),this._photo=new y.X(""),this._error=new y.X(""),this._form=new y.X((0,V.en)()),this.event=this._event.asObservable(),this.guest=this._guest.asObservable(),this.error=this._error.asObservable(),this.form=this._form.asObservable()}clear(){this._guest.next(null),this._event.next(null),this._photo.next(null)}setPhoto(t){this._photo.next(t)}setError(t){this._error.next(t)}loadGuestAndEvent(t,n){var o=this;return(0,u.Z)(function*(){const a=yield(0,V.pP)(t).toPromise();if(n){const p=yield(0,ae.Vh)(n).toPromise();return o._guest.next(a),o._event.next(p),o._form.next((0,V.en)(a,p.host)),{guest:a,event:p}}const s=yield(0,V.n2)(t).toPromise(),l=new Date,m=s.filter(p=>(0,dt.Z)(new Date(p.date),l));if(m.sort((p,h)=>p.date-h.date),m.length<=0)throw new Error(`No meetings for with guest "${t}" today`);return o._guest.next(a),o._event.next(m[0]),o._form.next((0,V.en)(a,m[0].host)),{guest:a,event:m[0]}})()}updateGuest(t){var n=this;return(0,u.Z)(function*(){const o=n._guest.getValue(),a=n._form.getValue();!o||!a||(yield(0,N.Ymr)(o.email,{name:"preferences",details:{...o,...a.value,...t||{}}}).toPromise())})()}checkinGuest(){var t=this;return(0,u.Z)(function*(){const n=t._guest.getValue(),o=t._event.getValue();!n||!o||(yield(0,ae.rq)(o.id,n.email,!0,{system_id:o.system?.id||o.resources[0]?.id}).toPromise())})()}printPass(){try{return new Promise(t=>setTimeout(()=>t(""),5e3))}catch{(0,g.cB)("Error printing visitor pass")}return Promise.reject()}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var x=c(5306),I=c(952),v=c(5432),Q=c(7515),F=c(3139);const mt=["checkin-details",""],_t=function(){return["/welcome"]};function ut(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"form",2),e.ALo(1,"async"),e.TgZ(2,"h3",3),e._uU(3,"Confirm Details"),e.qZA(),e.TgZ(4,"div",4)(5,"label",5),e._uU(6,"Host"),e.qZA(),e.TgZ(7,"mat-form-field",6),e._UZ(8,"input",7),e.TgZ(9,"mat-error"),e._uU(10," The email address of your host is required "),e.qZA()()(),e.TgZ(11,"div",4)(12,"label",8),e._uU(13,"Name"),e.qZA(),e.TgZ(14,"mat-form-field",6),e._UZ(15,"input",9),e.TgZ(16,"mat-error"),e._uU(17,"Please enter your full name"),e.qZA()()(),e.TgZ(18,"div",4)(19,"label",10),e._uU(20,"Email"),e.qZA(),e.TgZ(21,"mat-form-field",6),e._UZ(22,"input",11),e.TgZ(23,"mat-error"),e._uU(24,"A valid email address is required"),e.qZA()()(),e.TgZ(25,"div",4)(26,"label",10),e._uU(27,"Phone Number"),e.qZA(),e.TgZ(28,"mat-form-field",6),e._UZ(29,"input",12),e.qZA()(),e.TgZ(30,"div",4)(31,"label",10),e._uU(32,"Organisation / Company"),e.qZA(),e.TgZ(33,"mat-form-field",6),e._UZ(34,"input",13),e.qZA()(),e.TgZ(35,"button",14),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.updateGuest())}),e._uU(36,"Next"),e.qZA(),e.TgZ(37,"a",15)(38,"app-icon"),e._uU(39,"close"),e.qZA()()()}if(2&i){const t=e.oxw();e.Q6J("formGroup",e.lcZ(1,2,t.form)),e.xp6(37),e.Q6J("routerLink",e.DdM(4,_t))}}function pt(i,r){1&i&&(e.TgZ(0,"div",16),e._UZ(1,"mat-spinner",17),e.TgZ(2,"div",18),e._uU(3," Updating data and checking in... "),e.qZA()()),2&i&&(e.xp6(1),e.Q6J("diameter",48))}let gt=(()=>{class i{constructor(t,n){this._checkin=t,this._router=n,this.form=this._checkin.form,this.loading=!1}ngOnInit(){this.form.pipe((0,S.P)()).subscribe(t=>t?"":this.previous())}updateGuest(){var t=this;return(0,u.Z)(function*(){t.loading=!0,yield t._checkin.updateGuest(),yield t._checkin.checkinGuest(),t.loading=!1,t._router.navigate(["/checkin","covid"])})()}previous(){this._router.navigate(["/checkin","scan"])}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(J),e.Y36(Z.F0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["","checkin-details",""]],attrs:mt,decls:4,vars:4,consts:[["class","bg-white rounded shadow overflow-hidden relative flex flex-col items-center my-4 mx-auto",3,"formGroup",4,"ngIf","ngIfElse"],["load_state",""],[1,"bg-white","rounded","shadow","overflow-hidden","relative","flex","flex-col","items-center","my-4","mx-auto",3,"formGroup"],[1,"text-2xl","m-4"],["field","",1,"flex","flex-col"],["form","host"],["appearance","outline"],["matInput","","name","host","formControlName","host","placeholder","Host's Email Address"],["form","name"],["matInput","","name","name","formControlName","name","placeholder","Full Name"],["form","email"],["matInput","","name","email","formControlName","email","placeholder","Email Address"],["matInput","","name","phone","type","tel","formControlName","phone","placeholder","Phone Number"],["matInput","","name","phone","type","tel","formControlName","phone","placeholder","Organisation / Company"],["next","","mat-button","",3,"click"],["mat-icon-button","",1,"absolute","top-0","right-0",3,"routerLink"],[1,"flex","flex-col","items-center","m-auto"],[3,"diameter"],[1,"my-4","text-lg","text-white"]],template:function(t,n){if(1&t&&(e.YNc(0,ut,40,5,"form",0),e.ALo(1,"async"),e.YNc(2,pt,4,1,"ng-template",null,1,e.W1O)),2&t){const o=e.MAs(3);e.Q6J("ngIf",e.lcZ(1,2,n.form)&&!n.loading)("ngIfElse",o)}},dependencies:[_.O5,d._Y,d.Fj,d.JJ,d.JL,d.sg,d.u,x.o,I.TO,I.KE,v.lW,v.zs,Q.Nt,F.Ou,Z.yS,_.Ov],styles:["[_nghost-%COMP%]{position:absolute;inset:0;background-color:#00000080}form[_ngcontent-%COMP%]{width:32rem;max-width:calc(100vw - 2rem)}[field][_ngcontent-%COMP%]{width:calc(100% - 2rem)}.absolute[_ngcontent-%COMP%]{position:absolute}button[_ngcontent-%COMP%]{margin-bottom:1rem;width:8rem}\n/*# sourceMappingURL=checkin-details.component.ts-angular-inline--56.css.map*/"]}),i})();var ht=c(2171);const ft=function(){return["/welcome"]};function bt(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",2)(1,"h3",3),e._uU(2,"Take a photo to continue"),e.qZA(),e.TgZ(3,"a-take-photo",4),e.NdJ("photoAccepted",function(o){e.CHM(t);const a=e.oxw();return e.KtG(a.handlePhoto(o))}),e.qZA(),e.TgZ(4,"a",5)(5,"app-icon"),e._uU(6,"close"),e.qZA()()()}2&i&&(e.xp6(4),e.Q6J("routerLink",e.DdM(1,ft)))}function Ct(i,r){1&i&&(e.TgZ(0,"div",6),e._UZ(1,"mat-spinner",7),e.TgZ(2,"div",8),e._uU(3," Printing guest pass... "),e.qZA()()),2&i&&(e.xp6(1),e.Q6J("diameter",48))}let vt=(()=>{class i{constructor(t,n){this._checkin=t,this._router=n}handlePhoto(t){var n=this;return(0,u.Z)(function*(){if(!t)return(0,g.cB)("Error saving image, please try again");n.loading=!0,n._checkin.setPhoto(t),yield n._checkin.printPass().catch(o=>{throw n.loading=!1,(0,g.cB)(o),o}),n.loading=!1,n._router.navigate(["/checkin","results"])})()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(J),e.Y36(Z.F0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["checkin-photo"]],decls:3,vars:2,consts:[["class","bg-white rounded shadow overflow-hidden relative flex flex-col items-center p-4",4,"ngIf","ngIfElse"],["load_state",""],[1,"bg-white","rounded","shadow","overflow-hidden","relative","flex","flex-col","items-center","p-4"],[1,"text-xl","mb-4"],[3,"photoAccepted"],["mat-icon-button","",1,"absolute","top-0","right-0",3,"routerLink"],[1,"flex","flex-col","items-center","m-auto"],[3,"diameter"],[1,"my-4","text-lg","text-white"]],template:function(t,n){if(1&t&&(e.YNc(0,bt,7,2,"div",0),e.YNc(1,Ct,4,1,"ng-template",null,1,e.W1O)),2&t){const o=e.MAs(2);e.Q6J("ngIf",!n.loading)("ngIfElse",o)}},dependencies:[_.O5,x.o,v.zs,F.Ou,ht.Q,Z.yS],styles:["[_nghost-%COMP%]{position:absolute;display:flex;align-items:center;justify-content:center;inset:0;background-color:#00000080}.absolute[_ngcontent-%COMP%]{position:absolute}\n/*# sourceMappingURL=checkin-photo.component.ts-angular-inline--57.css.map*/"]}),i})();c(9816),c(4537);var T=c(6053);const xt=[{id:"after_hour",name:"After Hour of Day"},{id:"before_hour",name:"Before Hour of Day"},{id:"min_length",name:"Min. Meeting Length"},{id:"max_length",name:"Max. Meeting Length"},{id:"is_before",name:"Is Hours before Meeting"},{id:"within_hours",name:"Within Hours before Meeting"},{id:"visitor_type",name:"Visitor Type"},{id:"groups",name:"User in Groups"}];var L=c(4626),U=c(9383),we=c(7943);function Tt(i,r){1&i&&(e.TgZ(0,"button",6)(1,"app-icon"),e._uU(2,"close"),e.qZA()())}function yt(i,r){if(1&i&&(e.TgZ(0,"mat-option",19),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.name," ")}}function Mt(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",15)(1,"mat-form-field",9)(2,"mat-select",16),e.NdJ("ngModelChange",function(o){const s=e.CHM(t).$implicit;return e.KtG(s[0]=o)}),e.YNc(3,yt,2,2,"mat-option",17),e.qZA()(),e.TgZ(4,"mat-form-field",9)(5,"input",18),e.NdJ("ngModelChange",function(o){const s=e.CHM(t).$implicit;return e.KtG(s[1]=o)}),e.qZA(),e.TgZ(6,"mat-error"),e._uU(7,"Rule value is required"),e.qZA()(),e.TgZ(8,"button",11),e.NdJ("click",function(){const a=e.CHM(t).index,s=e.oxw().$implicit;return e.KtG(s.rules.splice(a,1))}),e.TgZ(9,"app-icon"),e._uU(10,"delete"),e.qZA()()()}if(2&i){const t=r.$implicit,n=e.oxw(2);e.xp6(2),e.Q6J("ngModel",t[0]),e.xp6(1),e.Q6J("ngForOf",n.rule_types),e.xp6(2),e.Q6J("ngModel",t[1])}}function Zt(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",7)(1,"div",8)(2,"mat-form-field",9)(3,"input",10),e.NdJ("ngModelChange",function(o){const s=e.CHM(t).$implicit;return e.KtG(s.name=o)}),e.qZA(),e.TgZ(4,"mat-error"),e._uU(5,"Ruleset name is required"),e.qZA()(),e.TgZ(6,"button",11),e.NdJ("click",function(){const a=e.CHM(t).$implicit,s=e.oxw();return a.rules.push(["",""]),e.KtG(s.show_rules=a.id)}),e.TgZ(7,"app-icon"),e._uU(8,"add"),e.qZA()(),e.TgZ(9,"button",12),e.NdJ("click",function(){const a=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.show_rules=s.show_rules!==a.id?a.id:"")}),e.TgZ(10,"app-icon"),e._uU(11),e.qZA()(),e.TgZ(12,"button",11),e.NdJ("click",function(){const a=e.CHM(t).index,s=e.oxw();return e.KtG(s.rulesets.splice(a,1))}),e.TgZ(13,"app-icon"),e._uU(14,"delete"),e.qZA()()(),e.TgZ(15,"div",13),e.YNc(16,Mt,11,3,"div",14),e.qZA()()}if(2&i){const t=r.$implicit,n=e.oxw();e.xp6(3),e.Q6J("ngModel",t.name),e.xp6(6),e.Q6J("disabled",!t.rules.length),e.xp6(2),e.Oqu(n.show_rules===t.id?"expand_less":"expand_more"),e.xp6(4),e.Udp("height",(n.show_rules===t.id?5*t.rules.length:0)+"em"),e.xp6(1),e.Q6J("ngForOf",t.rules)}}let Ie=(()=>{class i extends g.KG{constructor(t){super(),this._data=t,this.event=new e.vpe,this.loading=!1,this.require_notes=this._data.require_notes,this.rule_types=xt,this.rulesets=(t.config||[]).map(n=>(n.rules=n.rules.map(o=>[o[0],JSON.stringify(o[1])]),n))}get new_id(){return"ruleset-"+Math.floor(99999999*Math.random())}saveNotesSetting(t){this.timeout("save-notes",()=>this._data.saveNotes?this._data.saveNotes(t):"",1e3)}saveChanges(){this.loading=!0;const t=this.rulesets.map(n=>({...n,rules:n.rules.map(o=>{let a=o[1];try{a=JSON.parse(o[1])}catch{}return[o[0],a]})}));this.event.emit({reason:"done",metadata:t})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(T.WI))},i.\u0275cmp=e.Xpm({type:i,selectors:[["catering-config-modal"]],outputs:{event:"event"},features:[e.qOj],decls:14,vars:3,consts:[["mat-icon-button","","mat-dialog-close","",4,"ngIf"],[1,"overflow-auto","text-center"],[1,"m-2",3,"ngModel","ngModelChange"],["mat-button","",3,"click"],["class","ruleset",4,"ngFor","ngForOf"],[1,"flex","p-2","items-center","justify-center","border-t","border-solid","border-gray-300"],["mat-icon-button","","mat-dialog-close",""],[1,"ruleset"],[1,"flex"],["appearance","outline",1,"flex-1"],["matInput","","name","name","placeholder","Zone ID, Category or Tag","required","",3,"ngModel","ngModelChange"],["mat-icon-button","",1,"mb-6",3,"click"],["mat-icon-button","",1,"mb-6",3,"disabled","click"],["name","rules",1,"bg-gray-100","rounded","overflow-hidden"],["class","flex items-center px-2 h-20 space-x-2",4,"ngFor","ngForOf"],[1,"flex","items-center","px-2","h-20","space-x-2"],["name","booking-type","placeholder","Select Rule",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["matInput","","name","value","placeholder","Rule value","required","",3,"ngModel","ngModelChange"],[3,"value"]],template:function(t,n){1&t&&(e.TgZ(0,"header")(1,"h3"),e._uU(2,"Edit Catering Configuration"),e.qZA(),e.YNc(3,Tt,3,0,"button",0),e.qZA(),e.TgZ(4,"main",1)(5,"mat-checkbox",2),e.NdJ("ngModelChange",function(a){return n.saveNotesSetting(a)}),e._uU(6," Require notes for orders "),e.qZA(),e._UZ(7,"br"),e.TgZ(8,"button",3),e.NdJ("click",function(){return n.rulesets.push({id:n.new_id,rules:[]})}),e._uU(9," New Ruleset "),e.qZA(),e.YNc(10,Zt,17,6,"div",4),e.qZA(),e.TgZ(11,"footer",5)(12,"button",3),e.NdJ("click",function(){return n.saveChanges()}),e._uU(13,"Save Changes"),e.qZA()()),2&t&&(e.xp6(3),e.Q6J("ngIf",!n.loading),e.xp6(2),e.Q6J("ngModel",n.require_notes),e.xp6(5),e.Q6J("ngForOf",n.rulesets))},dependencies:[_.sg,_.O5,L.ey,T.ZT,U.oG,d.Fj,d.JJ,d.Q7,d.On,x.o,I.TO,I.KE,we.gD,v.lW,Q.Nt],styles:["[name=rules][_ngcontent-%COMP%]{transition:height .2s}main[_ngcontent-%COMP%]{width:32em;padding:.5em 1em 1em}main[_ngcontent-%COMP%]   button.mat-button[_ngcontent-%COMP%]{margin:0 auto .5em;min-width:12em}\n/*# sourceMappingURL=catering-config-modal.component.ts-angular-inline--58.css.map*/"]}),i})();var G=c(2828),M=c(2962),re=c(6523),se=c(7810),he=c(2793),wt=c(3670);function It(i,r){1&i&&(e.TgZ(0,"button",7)(1,"app-icon"),e._uU(2,"close"),e.qZA()())}function At(i,r){if(1&i&&(e.TgZ(0,"div",18)(1,"label",19),e._uU(2," Name"),e.TgZ(3,"span"),e._uU(4,"*"),e.qZA(),e._uU(5,": "),e.qZA(),e.TgZ(6,"mat-form-field",20),e._UZ(7,"input",21),e.TgZ(8,"mat-error"),e._uU(9,"Name is required"),e.qZA()()()),2&i){const t=e.oxw(2);e.xp6(1),e.ekj("error",t.form.controls.name.invalid&&t.form.controls.name.touched)}}function Ot(i,r){if(1&i&&(e.TgZ(0,"div",18)(1,"label",22),e._uU(2," Category"),e.TgZ(3,"span"),e._uU(4,"*"),e.qZA(),e._uU(5,": "),e.qZA(),e.TgZ(6,"mat-form-field",20),e._UZ(7,"input",23),e.TgZ(8,"mat-error"),e._uU(9,"Category is required"),e.qZA()()()),2&i){const t=e.oxw(2),n=e.MAs(9);e.xp6(1),e.ekj("error",t.form.controls.category.invalid&&t.form.controls.category.touched),e.xp6(6),e.Q6J("matAutocomplete",n)}}const kt=function(){return{class:"material-icons",content:"close"}};function Nt(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"mat-chip",30),e.NdJ("removed",function(){const a=e.CHM(t).$implicit,s=e.oxw(3);return e.KtG(s.removeTag(a))}),e._uU(1),e._UZ(2,"app-icon",31),e.qZA()}if(2&i){const t=r.$implicit;e.Q6J("selectable",!0)("removable",!0),e.xp6(1),e.hij(" ",t," "),e.xp6(1),e.Q6J("icon",e.DdM(4,kt))}}function Lt(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",18)(1,"label",24),e.SDv(2,25),e.qZA(),e.TgZ(3,"mat-form-field",20)(4,"mat-chip-list",26,27),e.YNc(6,Nt,3,5,"mat-chip",28),e.TgZ(7,"input",29),e.NdJ("matChipInputTokenEnd",function(o){e.CHM(t);const a=e.oxw(2);return e.KtG(a.addTag(o))}),e.qZA()()()()}if(2&i){const t=e.MAs(5),n=e.oxw(2);e.xp6(1),e.ekj("error",n.form.controls.tags.invalid&&n.form.controls.tags.touched),e.xp6(5),e.Q6J("ngForOf",n.tag_list),e.xp6(1),e.Q6J("matChipInputFor",t)("matChipInputSeparatorKeyCodes",n.separators)("matChipInputAddOnBlur",!0)}}function Rt(i,r){1&i&&(e.TgZ(0,"div",18)(1,"label",32),e._uU(2,"Description:"),e.qZA(),e.TgZ(3,"mat-form-field",20),e._UZ(4,"textarea",33),e.qZA()())}function Et(i,r){if(1&i&&(e.TgZ(0,"div",18)(1,"label",19),e._uU(2," Unit Price"),e.TgZ(3,"span"),e._uU(4,"*"),e.qZA(),e._uU(5,": "),e.qZA(),e.TgZ(6,"mat-form-field",20),e._UZ(7,"input",34),e.TgZ(8,"mat-error"),e._uU(9,"Unit Price is required"),e.qZA()()()),2&i){const t=e.oxw(2);e.xp6(1),e.ekj("error",t.form.controls.unit_price.invalid&&t.form.controls.unit_price.touched)}}function St(i,r){1&i&&(e.TgZ(0,"div",18)(1,"label",35),e.SDv(2,36),e.qZA(),e._UZ(3,"image-list-field",37),e.qZA())}const K=function(){return{standalone:!0}};function Ft(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"form",8)(1,"div",9),e.YNc(2,At,10,2,"div",10),e.YNc(3,Ot,10,3,"div",10),e.qZA(),e.YNc(4,Lt,8,6,"div",10),e.YNc(5,Rt,5,0,"div",10),e.YNc(6,Et,10,2,"div",10),e.TgZ(7,"div",11)(8,"label",12),e._uU(9,"Accept Points?"),e.qZA(),e.TgZ(10,"mat-checkbox",13),e._uU(11),e.qZA()(),e.TgZ(12,"div",14)(13,"mat-checkbox",15),e.NdJ("ngModelChange",function(o){e.CHM(t);const a=e.oxw();return e.KtG(o?a.addTag({value:"Gluten Free"}):a.removeTag("Gluten Free"))}),e._uU(14," Gluten Free (GF) "),e.qZA(),e.TgZ(15,"mat-checkbox",15),e.NdJ("ngModelChange",function(o){e.CHM(t);const a=e.oxw();return e.KtG(o?a.addTag({value:"Vegan"}):a.removeTag("Vegan"))}),e._uU(16," Vegan (VG) "),e.qZA(),e.TgZ(17,"mat-checkbox",15),e.NdJ("ngModelChange",function(o){e.CHM(t);const a=e.oxw();return e.KtG(o?a.addTag({value:"Vegetarian"}):a.removeTag("Vegetarian"))}),e._uU(18," Vegetarian (V) "),e.qZA(),e.TgZ(19,"mat-checkbox",15),e.NdJ("ngModelChange",function(o){e.CHM(t);const a=e.oxw();return e.KtG(o?a.addTag({value:"Contains Dairy"}):a.removeTag("Contains Dairy"))}),e._uU(20," Contains Dairy (D) "),e.qZA(),e.TgZ(21,"mat-checkbox",15),e.NdJ("ngModelChange",function(o){e.CHM(t);const a=e.oxw();return e.KtG(o?a.addTag({value:"Contains Nuts"}):a.removeTag("Contains Nuts"))}),e._uU(22," Contains Nuts (N) "),e.qZA()(),e.TgZ(23,"div",11)(24,"label",16),e._uU(25,"Discount Cap"),e.qZA(),e._UZ(26,"a-counter",17),e.qZA(),e.YNc(27,St,4,0,"div",10),e.qZA()}if(2&i){const t=e.oxw();let n;e.Q6J("formGroup",t.form),e.xp6(2),e.Q6J("ngIf",t.form.controls.name),e.xp6(1),e.Q6J("ngIf",t.form.controls.category),e.xp6(1),e.Q6J("ngIf",t.form.controls.tags),e.xp6(1),e.Q6J("ngIf",t.form.controls.description),e.xp6(1),e.Q6J("ngIf",t.form.controls.unit_price),e.xp6(5),e.Oqu(null!=(n=t.form.get("accept_points"))&&n.value?"No":"Yes"),e.xp6(2),e.Q6J("ngModel",t.hasTag("Gluten Free"))("ngModelOptions",e.DdM(22,K)),e.xp6(2),e.Q6J("ngModel",t.hasTag("Vegan"))("ngModelOptions",e.DdM(23,K)),e.xp6(2),e.Q6J("ngModel",t.hasTag("Vegetarian"))("ngModelOptions",e.DdM(24,K)),e.xp6(2),e.Q6J("ngModel",t.hasTag("Contains Dairy"))("ngModelOptions",e.DdM(25,K)),e.xp6(2),e.Q6J("ngModel",t.hasTag("Contains Nuts"))("ngModelOptions",e.DdM(26,K)),e.xp6(5),e.Q6J("min",0)("max",100)("step",5)("render_fn",t.renderPercent),e.xp6(1),e.Q6J("ngIf",t.form.controls.images)}}function Ut(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"footer",38)(1,"button",39),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.saveChanges())}),e._uU(2," Save "),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("disabled",!t.form.dirty)}}function Pt(i,r){1&i&&(e.TgZ(0,"div",40),e._UZ(1,"mat-spinner",41),e.TgZ(2,"p"),e._uU(3,"Saving catering item..."),e.qZA()())}function Dt(i,r){if(1&i&&(e.TgZ(0,"mat-option",42),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}let Ae=(()=>{class i{constructor(t){this._data=t,this.event=new e.vpe,this.form=new d.cw({name:new d.NI(this.item.name||"",[d.kI.required]),description:new d.NI(this.item.description||""),category:new d.NI(this.item.category||"",[d.kI.required]),unit_price:new d.NI(this.item.unit_price,[d.kI.required]),tags:new d.NI(this.item.tags||[]),accept_points:new d.NI(this.item.accept_points||!1),discount_cap:new d.NI(this.item.discount_cap||0),images:new d.NI(this.item.images||[])}),this.loading=!1,this.separators=[G.K5,G.OC,G.L_]}get item(){return this._data.item||new M.U}get categories(){return this._data.categories||[]}get tag_list(){return this.form.controls.tags.value}renderPercent(t=0){return`${t}%`}hasTag(t){return this.tag_list.includes(t)}addTag(t){if(!this.form||!this.form.controls.tags)return;this.form.controls.tags.markAsDirty();const n=t.input,o=t.value,a=this.tag_list;(o||"").trim()&&(a.push(o),this.form.controls.tags.setValue(a)),n&&(n.value="")}removeTag(t){if(!this.form||!this.form.controls.tags)return;const n=this.tag_list;this.form.controls.tags.markAsDirty();const o=n.indexOf(t);o>=0&&(n.splice(o,1),this.form.controls.tags.setValue(n))}saveChanges(){this.loading=!0,this.event.emit({reason:"done",metadata:{item:new M.U({...this.item,id:this.item.id||`item-${(0,g.Iy)(99999999)}`,...this.form.value})}})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(T.WI))},i.\u0275cmp=e.Xpm({type:i,selectors:[["catering-item-modal"]],outputs:{event:"event"},decls:11,vars:6,consts:function(){let r,t,n;return r=$localize`:@@tagsLabel␟800ffadd463cfe152c5af3fa9f13803ab2e77b93␟4746186018558508280: Tags: `,t=$localize`:@@zoneTagsPlaceholder␟c133beffffe3288bbdbf8572a32910c33ce14991␟2194594490376201833:Item tags e.g. Gluten Free, Vegan etc.`,n=$localize`:@@imagesLabel␟e5d9e00faa06714d7671b164cad364b26f4c585b␟5137125764814732349:Images:`,[["mat-dialog-title",""],["mat-icon-button","","mat-dialog-close","",4,"ngIf"],["class","p-4 overflow-auto max-h-[65vh]",3,"formGroup",4,"ngIf","ngIfElse"],["class","flex p-2 items-center justify-center border-t border-solid border-gray-300",4,"ngIf"],["load_state",""],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["mat-icon-button","","mat-dialog-close",""],[1,"p-4","overflow-auto","max-h-[65vh]",3,"formGroup"],[1,"flex","items-center","space-x-2"],["class","field",4,"ngIf"],[1,"flex","items-center"],[1,"flex-none","w-28","min-w-0"],["formControlName","accept_points"],["list","",1,"flex","items-center","flex-wrap"],[3,"ngModel","ngModelOptions","ngModelChange"],[1,"flex-1","w-24","min-w-0"],["formControlName","discount_cap",1,"border","border-gray-200","rounded",3,"min","max","step","render_fn"],[1,"field"],["for","title"],["appearance","outline"],["matInput","","name","name","placeholder","Item name","formControlName","name"],["for","category"],["matInput","","name","category","placeholder","Category","formControlName","category",3,"matAutocomplete"],["for","tags"],r,["aria-label","Item Tags"],["chipList",""],[3,"selectable","removable","removed",4,"ngFor","ngForOf"],["name","tags","placeholder",t,3,"matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputAddOnBlur","matChipInputTokenEnd"],[3,"selectable","removable","removed"],["matChipRemove","",3,"icon"],["for","description"],["matInput","","name","description","placeholder","Item Description","formControlName","description"],["matInput","","name","unit-price","type","number","placeholder","Unit Price","formControlName","unit_price"],["for","images"],n,["name","images","formControlName","images"],[1,"flex","p-2","items-center","justify-center","border-t","border-solid","border-gray-300"],["mat-button","",3,"disabled","click"],[1,"flex","flex-col","items-center","p-8","space-y-2","w-64"],["diameter","32"],[3,"value"]]},template:function(t,n){if(1&t&&(e.TgZ(0,"header")(1,"h3",0),e._uU(2),e.qZA(),e.YNc(3,It,3,0,"button",1),e.qZA(),e.YNc(4,Ft,28,27,"form",2),e.YNc(5,Ut,3,1,"footer",3),e.YNc(6,Pt,4,0,"ng-template",null,4,e.W1O),e.TgZ(8,"mat-autocomplete",null,5),e.YNc(10,Dt,2,2,"mat-option",6),e.qZA()),2&t){const o=e.MAs(7);e.xp6(2),e.hij("",n.item.id?"Edit":"Add"," Item"),e.xp6(1),e.Q6J("ngIf",!n.loading),e.xp6(1),e.Q6J("ngIf",n.form&&!n.loading)("ngIfElse",o),e.xp6(1),e.Q6J("ngIf",!n.loading),e.xp6(5),e.Q6J("ngForOf",n.categories)}},dependencies:[_.sg,_.O5,re.XC,re.ZL,L.ey,T.ZT,T.uh,U.oG,d._Y,d.Fj,d.wV,d.JJ,d.JL,d.On,d.sg,d.u,x.o,I.TO,I.KE,v.lW,Q.Nt,F.Ou,se.qn,se.HS,se.oH,se.qH,he.R,wt.h],styles:[".field[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}[list][_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]{margin:.5rem}\n/*# sourceMappingURL=catering-item-modal.component.ts-angular-inline--59.css.map*/"]}),i})();var z=c(3815),fe=c(4266),H=c(3800),le=c(1325),A=c(9258),ce=c(1265),X=c(7693),R=c(2629),ee=c(6221),Oe=c(3245);function qt(i,r){1&i&&(e.TgZ(0,"button",7)(1,"app-icon"),e._uU(2,"close"),e.qZA()())}function Jt(i,r){if(1&i&&(e.TgZ(0,"div",10)(1,"label",11),e._uU(2," Name"),e.TgZ(3,"span"),e._uU(4,"*"),e.qZA(),e._uU(5,": "),e.qZA(),e.TgZ(6,"mat-form-field",12),e._UZ(7,"input",13),e.TgZ(8,"mat-error"),e._uU(9,"Name is required"),e.qZA()()()),2&i){const t=e.oxw(2);e.xp6(1),e.ekj("error",t.form.controls.name.invalid&&t.form.controls.name.touched)}}function Qt(i,r){if(1&i&&(e.TgZ(0,"div",10)(1,"label",14),e._uU(2," Type"),e.TgZ(3,"span"),e._uU(4,"*"),e.qZA(),e._uU(5,": "),e.qZA(),e.TgZ(6,"mat-form-field",12),e._UZ(7,"input",15),e.TgZ(8,"mat-error"),e._uU(9,"Type is required"),e.qZA()()()),2&i){const t=e.oxw(2),n=e.MAs(9);e.xp6(1),e.ekj("error",t.form.controls.group.invalid&&t.form.controls.group.touched),e.xp6(6),e.Q6J("matAutocomplete",n)}}function Bt(i,r){1&i&&(e.TgZ(0,"div",10)(1,"label",11),e._uU(2,"Unit Price:"),e.qZA(),e.TgZ(3,"mat-form-field",12),e._UZ(4,"input",16),e.qZA()())}function Gt(i,r){1&i&&(e.TgZ(0,"div",10)(1,"mat-checkbox",17),e._uU(2," Can select multiple of type "),e.qZA()())}function Ht(i,r){if(1&i&&(e.TgZ(0,"form",8),e.YNc(1,Jt,10,2,"div",9),e.YNc(2,Qt,10,3,"div",9),e.YNc(3,Bt,5,0,"div",9),e.YNc(4,Gt,3,0,"div",9),e.qZA()),2&i){const t=e.oxw();e.Q6J("formGroup",t.form),e.xp6(1),e.Q6J("ngIf",t.form.controls.name),e.xp6(1),e.Q6J("ngIf",t.form.controls.group),e.xp6(1),e.Q6J("ngIf",t.form.controls.unit_price),e.xp6(1),e.Q6J("ngIf",t.form.controls.multiple)}}function $t(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"footer",18)(1,"button",19),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.saveChanges())}),e._uU(2," Save "),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("disabled",!t.form.dirty)}}function Yt(i,r){1&i&&(e.TgZ(0,"div",20),e._UZ(1,"mat-spinner",21),e.TgZ(2,"p"),e._uU(3,"Saving catering item option..."),e.qZA()())}function jt(i,r){if(1&i&&(e.TgZ(0,"mat-option",22),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}let ke=(()=>{class i{constructor(t){this._data=t,this.event=new e.vpe,this.form=new d.cw({name:new d.NI(this.option.name||"",[d.kI.required]),group:new d.NI(this.option.group||"",[d.kI.required]),unit_price:new d.NI(this.option.unit_price),multiple:new d.NI(!!this.option.multiple,[])}),this.loading=!1}get option(){return this._data.option}get types(){return this._data.types||[]}saveChanges(){this.loading=!0;const t={...this.option,id:this.option.id||`option-${(0,Oe.Iy)(99999999)}`,...this.form.value};this.event.emit({reason:"done",metadata:{item:new M.U({...this._data.parent,options:this._data.parent.options.filter(n=>n.id!==t.id).concat([t])})}})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(T.WI))},i.\u0275cmp=e.Xpm({type:i,selectors:[["catering-option-modal"]],outputs:{event:"event"},decls:11,vars:6,consts:[["mat-dialog-title",""],["mat-icon-button","","mat-dialog-close","",4,"ngIf"],["class","p-4 overflow-auto max-h-[65vh]",3,"formGroup",4,"ngIf","ngIfElse"],["class","flex p-2 items-center justify-center border-t border-solid border-gray-300",4,"ngIf"],["load_state",""],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["mat-icon-button","","mat-dialog-close",""],[1,"p-4","overflow-auto","max-h-[65vh]",3,"formGroup"],["class","field",4,"ngIf"],[1,"field"],["for","title"],["appearance","outline"],["matInput","","name","name","placeholder","Item name","formControlName","name"],["for","group"],["matInput","","name","group","placeholder","Type of option e.g. Number of sugars","formControlName","group",3,"matAutocomplete"],["matInput","","name","unit-price","type","number","placeholder","Unit Price","formControlName","unit_price"],["name","multiple","formControlName","multiple"],[1,"flex","p-2","items-center","justify-center","border-t","border-solid","border-gray-300"],["mat-button","",3,"disabled","click"],["loading","",1,"flex","flex-col","items-center","p-8","space-y-2","w-64"],["diameter","32"],[3,"value"]],template:function(t,n){if(1&t&&(e.TgZ(0,"header")(1,"h3",0),e._uU(2),e.qZA(),e.YNc(3,qt,3,0,"button",1),e.qZA(),e.YNc(4,Ht,5,5,"form",2),e.YNc(5,$t,3,1,"footer",3),e.YNc(6,Yt,4,0,"ng-template",null,4,e.W1O),e.TgZ(8,"mat-autocomplete",null,5),e.YNc(10,jt,2,2,"mat-option",6),e.qZA()),2&t){const o=e.MAs(7);e.xp6(2),e.hij(" ",n.option.id?"Edit":"Add"," Item Option "),e.xp6(1),e.Q6J("ngIf",!n.loading),e.xp6(1),e.Q6J("ngIf",n.form&&!n.loading)("ngIfElse",o),e.xp6(1),e.Q6J("ngIf",!n.loading),e.xp6(5),e.Q6J("ngForOf",n.types)}},dependencies:[_.sg,_.O5,re.XC,re.ZL,L.ey,T.ZT,T.uh,U.oG,d._Y,d.Fj,d.wV,d.JJ,d.JL,d.sg,d.u,x.o,I.TO,I.KE,v.lW,Q.Nt,F.Ou],styles:[".field[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}\n/*# sourceMappingURL=catering-option-modal.component.ts-angular-inline--60.css.map*/"]}),i})();var E=c(5163),Ne=c(586),Wt=c(8627),Vt=c(9014),Kt=c(9354);function Le(i,r){(0,Vt.Z)(2,arguments);var t=(0,Kt.Z)(r);return(0,Wt.Z)(i,-t)}var Re=c(2662),Ee=c(9042),Se=c(8025);function Fe(i,r,t){let n=!0;for(const o of r)if(i.category===o.name||i.tags.includes(o.name)||t.resources.find(a=>a.zones.includes(o.name))||t.space?.zones.includes(o.name)||"*"===o.name){let a=0;for(const s of o.rules){const l=new Date(t.date);switch(s[0]){case"is_before":a+=(0,Ne.Z)(Date.now(),Le(l,s[1]))?1:0;break;case"within_hours":a+=(0,Re.Z)(Date.now(),Le(l,s[1]))?1:0;break;case"after_hour":a+=(0,Re.Z)(l,(0,Ee.Z)(l,s[1]))?1:0;break;case"before_hour":a+=(0,Ne.Z)(l,(0,Ee.Z)(l,s[1]))?1:0;break;case"min_length":a+=t.duration>=(0,Se.H1)(s[1])?1:0;break;case"max_length":a+=t.duration<=(0,Se.H1)(s[1])?1:0;break;case"visitor_type":a+=t.ext("visitor_type")===s[1]?1:0;break;default:a+=1}}n=a>=o.rules.length}return n}var Ue=c(2467),Xt=c(9407),de=c(9240),Ce=c(8765),en=c(2606),$=c(907),tn=c(8181),me=c(6671),te=c(91),ve=c(9700),xe=c(2520),nn=c(3809),on=c(7575),an=c(3468),ne=c(1637),w=c(3950),P=c(576),Te=c(4601),_e=c(8757);
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */function rn(i,r){1&i&&e.Hsn(0)}const Pe=["*"];function sn(i,r){}const ln=function(i){return{animationDuration:i}},cn=function(i,r){return{value:i,params:r}},dn=["tabListContainer"],mn=["tabList"],_n=["tabListInner"],un=["nextPaginator"],pn=["previousPaginator"],gn=["tabBodyWrapper"],hn=["tabHeader"];function fn(i,r){}function bn(i,r){if(1&i&&e.YNc(0,fn,0,0,"ng-template",10),2&i){const t=e.oxw().$implicit;e.Q6J("cdkPortalOutlet",t.templateLabel)}}function Cn(i,r){if(1&i&&e._uU(0),2&i){const t=e.oxw().$implicit;e.Oqu(t.textLabel)}}function vn(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",6),e.NdJ("click",function(){const o=e.CHM(t),a=o.$implicit,s=o.index,l=e.oxw(),m=e.MAs(1);return e.KtG(l._handleClick(a,m,s))})("cdkFocusChange",function(o){const s=e.CHM(t).index,l=e.oxw();return e.KtG(l._tabFocusChanged(o,s))}),e.TgZ(1,"div",7),e.YNc(2,bn,1,1,"ng-template",8),e.YNc(3,Cn,1,1,"ng-template",null,9,e.W1O),e.qZA()()}if(2&i){const t=r.$implicit,n=r.index,o=e.MAs(4),a=e.oxw();e.ekj("mat-tab-label-active",a.selectedIndex===n),e.Q6J("id",a._getTabLabelId(n))("ngClass",t.labelClass)("disabled",t.disabled)("matRippleDisabled",t.disabled||a.disableRipple),e.uIk("tabIndex",a._getTabIndex(t,n))("aria-posinset",n+1)("aria-setsize",a._tabs.length)("aria-controls",a._getTabContentId(n))("aria-selected",a.selectedIndex===n)("aria-label",t.ariaLabel||null)("aria-labelledby",!t.ariaLabel&&t.ariaLabelledby?t.ariaLabelledby:null),e.xp6(2),e.Q6J("ngIf",t.templateLabel)("ngIfElse",o)}}function xn(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"mat-tab-body",11),e.NdJ("_onCentered",function(){e.CHM(t);const o=e.oxw();return e.KtG(o._removeTabBodyWrapperHeight())})("_onCentering",function(o){e.CHM(t);const a=e.oxw();return e.KtG(a._setTabBodyWrapperHeight(o))}),e.qZA()}if(2&i){const t=r.$implicit,n=r.index,o=e.oxw();e.ekj("mat-tab-body-active",o.selectedIndex===n),e.Q6J("id",o._getTabContentId(n))("ngClass",t.bodyClass)("content",t.content)("position",t.position)("origin",t.origin)("animationDuration",o.animationDuration)("preserveContent",o.preserveContent),e.uIk("tabindex",null!=o.contentTabIndex&&o.selectedIndex===n?o.contentTabIndex:null)("aria-labelledby",o._getTabLabelId(n))}}const Tn=new e.OlP("MatInkBarPositioner",{providedIn:"root",factory:function yn(){return r=>({left:r?(r.offsetLeft||0)+"px":"0",width:r?(r.offsetWidth||0)+"px":"0"})}});let De=(()=>{class i{constructor(t,n,o,a){this._elementRef=t,this._ngZone=n,this._inkBarPositioner=o,this._animationMode=a}alignToElement(t){this.show(),this._ngZone.run(()=>{this._ngZone.onStable.pipe((0,R.q)(1)).subscribe(()=>{const n=this._inkBarPositioner(t),o=this._elementRef.nativeElement;o.style.left=n.left,o.style.width=n.width})})}show(){this._elementRef.nativeElement.style.visibility="visible"}hide(){this._elementRef.nativeElement.style.visibility="hidden"}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.SBq),e.Y36(e.R0b),e.Y36(Tn),e.Y36(e.QbO,8))},i.\u0275dir=e.lG2({type:i,selectors:[["mat-ink-bar"]],hostAttrs:[1,"mat-ink-bar"],hostVars:2,hostBindings:function(t,n){2&t&&e.ekj("_mat-animation-noopable","NoopAnimations"===n._animationMode)}}),i})();
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */const Mn=new e.OlP("MatTabContent"),Zn=new e.OlP("MatTabLabel"),wn=new e.OlP("MAT_TAB"),In=(0,L.Id)(class{}),qe=new e.OlP("MAT_TAB_GROUP");let ye=(()=>{class i extends In{constructor(t,n){super(),this._viewContainerRef=t,this._closestTabGroup=n,this.textLabel="",this._contentPortal=null,this._stateChanges=new me.xQ,this.position=null,this.origin=null,this.isActive=!1}get templateLabel(){return this._templateLabel}set templateLabel(t){this._setTemplateLabelInput(t)}get content(){return this._contentPortal}ngOnChanges(t){(t.hasOwnProperty("textLabel")||t.hasOwnProperty("disabled"))&&this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}ngOnInit(){this._contentPortal=new de.UE(this._explicitContent||this._implicitContent,this._viewContainerRef)}_setTemplateLabelInput(t){t&&t._closestTab===this&&(this._templateLabel=t)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.s_b),e.Y36(qe,8))},i.\u0275cmp=e.Xpm({type:i,selectors:[["mat-tab"]],contentQueries:function(t,n,o){if(1&t&&(e.Suo(o,Zn,5),e.Suo(o,Mn,7,e.Rgc)),2&t){let a;e.iGM(a=e.CRH())&&(n.templateLabel=a.first),e.iGM(a=e.CRH())&&(n._explicitContent=a.first)}},viewQuery:function(t,n){if(1&t&&e.Gf(e.Rgc,7),2&t){let o;e.iGM(o=e.CRH())&&(n._implicitContent=o.first)}},inputs:{disabled:"disabled",textLabel:["label","textLabel"],ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],labelClass:"labelClass",bodyClass:"bodyClass"},exportAs:["matTab"],features:[e._Bn([{provide:wn,useExisting:i}]),e.qOj,e.TTD],ngContentSelectors:Pe,decls:1,vars:0,template:function(t,n){1&t&&(e.F$t(),e.YNc(0,rn,1,0,"ng-template"))},encapsulation:2}),i})();
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */const An={translateTab:(0,w.X$)("translateTab",[(0,w.SB)("center, void, left-origin-center, right-origin-center",(0,w.oB)({transform:"none"})),(0,w.SB)("left",(0,w.oB)({transform:"translate3d(-100%, 0, 0)",minHeight:"1px",visibility:"hidden"})),(0,w.SB)("right",(0,w.oB)({transform:"translate3d(100%, 0, 0)",minHeight:"1px",visibility:"hidden"})),(0,w.eR)("* => left, * => right, left => center, right => center",(0,w.jt)("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")),(0,w.eR)("void => left-origin-center",[(0,w.oB)({transform:"translate3d(-100%, 0, 0)",visibility:"hidden"}),(0,w.jt)("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")]),(0,w.eR)("void => right-origin-center",[(0,w.oB)({transform:"translate3d(100%, 0, 0)",visibility:"hidden"}),(0,w.jt)("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")])])};
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */let On=(()=>{class i extends de.Pl{constructor(t,n,o,a){super(t,n,a),this._host=o,this._centeringSub=te.w.EMPTY,this._leavingSub=te.w.EMPTY}ngOnInit(){super.ngOnInit(),this._centeringSub=this._host._beforeCentering.pipe((0,Ce.O)(this._host._isCenterPosition(this._host._position))).subscribe(t=>{t&&!this.hasAttached()&&this.attach(this._host._content)}),this._leavingSub=this._host._afterLeavingCenter.subscribe(()=>{this._host.preserveContent||this.detach()})}ngOnDestroy(){super.ngOnDestroy(),this._centeringSub.unsubscribe(),this._leavingSub.unsubscribe()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e._Vd),e.Y36(e.s_b),e.Y36((0,e.Gpc)(()=>Je)),e.Y36(_.K0))},i.\u0275dir=e.lG2({type:i,selectors:[["","matTabBodyHost",""]],features:[e.qOj]}),i})(),kn=(()=>{class i{constructor(t,n,o){this._elementRef=t,this._dir=n,this._dirChangeSubscription=te.w.EMPTY,this._translateTabComplete=new me.xQ,this._onCentering=new e.vpe,this._beforeCentering=new e.vpe,this._afterLeavingCenter=new e.vpe,this._onCentered=new e.vpe(!0),this.animationDuration="500ms",this.preserveContent=!1,n&&(this._dirChangeSubscription=n.change.subscribe(a=>{this._computePositionAnimationState(a),o.markForCheck()})),this._translateTabComplete.pipe((0,en.x)((a,s)=>a.fromState===s.fromState&&a.toState===s.toState)).subscribe(a=>{this._isCenterPosition(a.toState)&&this._isCenterPosition(this._position)&&this._onCentered.emit(),this._isCenterPosition(a.fromState)&&!this._isCenterPosition(this._position)&&this._afterLeavingCenter.emit()})}set position(t){this._positionIndex=t,this._computePositionAnimationState()}ngOnInit(){"center"==this._position&&null!=this.origin&&(this._position=this._computePositionFromOrigin(this.origin))}ngOnDestroy(){this._dirChangeSubscription.unsubscribe(),this._translateTabComplete.complete()}_onTranslateTabStarted(t){const n=this._isCenterPosition(t.toState);this._beforeCentering.emit(n),n&&this._onCentering.emit(this._elementRef.nativeElement.clientHeight)}_getLayoutDirection(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}_isCenterPosition(t){return"center"==t||"left-origin-center"==t||"right-origin-center"==t}_computePositionAnimationState(t=this._getLayoutDirection()){this._position=this._positionIndex<0?"ltr"==t?"left":"right":this._positionIndex>0?"ltr"==t?"right":"left":"center"}_computePositionFromOrigin(t){const n=this._getLayoutDirection();return"ltr"==n&&t<=0||"rtl"==n&&t>0?"left-origin-center":"right-origin-center"}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.SBq),e.Y36(ne.Is,8),e.Y36(e.sBO))},i.\u0275dir=e.lG2({type:i,inputs:{_content:["content","_content"],origin:"origin",animationDuration:"animationDuration",preserveContent:"preserveContent",position:"position"},outputs:{_onCentering:"_onCentering",_beforeCentering:"_beforeCentering",_afterLeavingCenter:"_afterLeavingCenter",_onCentered:"_onCentered"}}),i})(),Je=(()=>{class i extends kn{constructor(t,n,o){super(t,n,o)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.SBq),e.Y36(ne.Is,8),e.Y36(e.sBO))},i.\u0275cmp=e.Xpm({type:i,selectors:[["mat-tab-body"]],viewQuery:function(t,n){if(1&t&&e.Gf(de.Pl,5),2&t){let o;e.iGM(o=e.CRH())&&(n._portalHost=o.first)}},hostAttrs:[1,"mat-tab-body"],features:[e.qOj],decls:3,vars:6,consts:[["cdkScrollable","",1,"mat-tab-body-content"],["content",""],["matTabBodyHost",""]],template:function(t,n){1&t&&(e.TgZ(0,"div",0,1),e.NdJ("@translateTab.start",function(a){return n._onTranslateTabStarted(a)})("@translateTab.done",function(a){return n._translateTabComplete.next(a)}),e.YNc(2,sn,0,0,"ng-template",2),e.qZA()),2&t&&e.Q6J("@translateTab",e.WLB(3,cn,n._position,e.VKq(1,ln,n.animationDuration)))},dependencies:[On],styles:['.mat-tab-body-content{height:100%;overflow:auto}.mat-tab-group-dynamic-height .mat-tab-body-content{overflow:hidden}.mat-tab-body-content[style*="visibility: hidden"]{display:none}'],encapsulation:2,data:{animation:[An.translateTab]}}),i})();
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */const Qe=new e.OlP("MAT_TABS_CONFIG"),Nn=(0,L.Id)(class{});
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */let Be=(()=>{class i extends Nn{constructor(t){super(),this.elementRef=t}focus(){this.elementRef.nativeElement.focus()}getOffsetLeft(){return this.elementRef.nativeElement.offsetLeft}getOffsetWidth(){return this.elementRef.nativeElement.offsetWidth}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.SBq))},i.\u0275dir=e.lG2({type:i,selectors:[["","matTabLabelWrapper",""]],hostVars:3,hostBindings:function(t,n){2&t&&(e.uIk("aria-disabled",!!n.disabled),e.ekj("mat-tab-disabled",n.disabled))},inputs:{disabled:"disabled"},features:[e.qOj]}),i})();
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */const Ge=(0,_e.i$)({passive:!0});let En=(()=>{class i{constructor(t,n,o,a,s,l,m){this._elementRef=t,this._changeDetectorRef=n,this._viewportRuler=o,this._dir=a,this._ngZone=s,this._platform=l,this._animationMode=m,this._scrollDistance=0,this._selectedIndexChanged=!1,this._destroyed=new me.xQ,this._showPaginationControls=!1,this._disableScrollAfter=!0,this._disableScrollBefore=!0,this._stopScrolling=new me.xQ,this._disablePagination=!1,this._selectedIndex=0,this.selectFocusedIndex=new e.vpe,this.indexFocused=new e.vpe,s.runOutsideAngular(()=>{(0,ve.R)(t.nativeElement,"mouseleave").pipe((0,$.R)(this._destroyed)).subscribe(()=>{this._stopInterval()})})}get disablePagination(){return this._disablePagination}set disablePagination(t){this._disablePagination=(0,P.Ig)(t)}get selectedIndex(){return this._selectedIndex}set selectedIndex(t){t=(0,P.su)(t),this._selectedIndex!=t&&(this._selectedIndexChanged=!0,this._selectedIndex=t,this._keyManager&&this._keyManager.updateActiveItem(t))}ngAfterViewInit(){(0,ve.R)(this._previousPaginator.nativeElement,"touchstart",Ge).pipe((0,$.R)(this._destroyed)).subscribe(()=>{this._handlePaginatorPress("before")}),(0,ve.R)(this._nextPaginator.nativeElement,"touchstart",Ge).pipe((0,$.R)(this._destroyed)).subscribe(()=>{this._handlePaginatorPress("after")})}ngAfterContentInit(){const t=this._dir?this._dir.change:(0,z.of)("ltr"),n=this._viewportRuler.change(150),o=()=>{this.updatePagination(),this._alignInkBarToSelectedTab()};this._keyManager=new Ue.Em(this._items).withHorizontalOrientation(this._getLayoutDirection()).withHomeAndEnd().withWrap(),this._keyManager.updateActiveItem(this._selectedIndex),this._ngZone.onStable.pipe((0,R.q)(1)).subscribe(o),(0,xe.T)(t,n,this._items.changes,this._itemsResized()).pipe((0,$.R)(this._destroyed)).subscribe(()=>{this._ngZone.run(()=>{Promise.resolve().then(()=>{this._scrollDistance=Math.max(0,Math.min(this._getMaxScrollDistance(),this._scrollDistance)),o()})}),this._keyManager.withHorizontalOrientation(this._getLayoutDirection())}),this._keyManager.change.pipe((0,$.R)(this._destroyed)).subscribe(a=>{this.indexFocused.emit(a),this._setTabFocus(a)})}_itemsResized(){return"function"!=typeof ResizeObserver?nn.E:this._items.changes.pipe((0,Ce.O)(this._items),(0,H.w)(t=>new on.y(n=>this._ngZone.runOutsideAngular(()=>{const o=new ResizeObserver(()=>{n.next()});return t.forEach(a=>{o.observe(a.elementRef.nativeElement)}),()=>{o.disconnect()}}))),(0,tn.T)(1))}ngAfterContentChecked(){this._tabLabelCount!=this._items.length&&(this.updatePagination(),this._tabLabelCount=this._items.length,this._changeDetectorRef.markForCheck()),this._selectedIndexChanged&&(this._scrollToLabel(this._selectedIndex),this._checkScrollingControls(),this._alignInkBarToSelectedTab(),this._selectedIndexChanged=!1,this._changeDetectorRef.markForCheck()),this._scrollDistanceChanged&&(this._updateTabScrollPosition(),this._scrollDistanceChanged=!1,this._changeDetectorRef.markForCheck())}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete(),this._stopScrolling.complete()}_handleKeydown(t){if(!(0,G.Vb)(t))switch(t.keyCode){case G.K5:case G.L_:this.focusIndex!==this.selectedIndex&&(this.selectFocusedIndex.emit(this.focusIndex),this._itemSelected(t));break;default:this._keyManager.onKeydown(t)}}_onContentChanges(){const t=this._elementRef.nativeElement.textContent;t!==this._currentTextContent&&(this._currentTextContent=t||"",this._ngZone.run(()=>{this.updatePagination(),this._alignInkBarToSelectedTab(),this._changeDetectorRef.markForCheck()}))}updatePagination(){this._checkPaginationEnabled(),this._checkScrollingControls(),this._updateTabScrollPosition()}get focusIndex(){return this._keyManager?this._keyManager.activeItemIndex:0}set focusIndex(t){!this._isValidIndex(t)||this.focusIndex===t||!this._keyManager||this._keyManager.setActiveItem(t)}_isValidIndex(t){if(!this._items)return!0;const n=this._items?this._items.toArray()[t]:null;return!!n&&!n.disabled}_setTabFocus(t){if(this._showPaginationControls&&this._scrollToLabel(t),this._items&&this._items.length){this._items.toArray()[t].focus();const n=this._tabListContainer.nativeElement;n.scrollLeft="ltr"==this._getLayoutDirection()?0:n.scrollWidth-n.offsetWidth}}_getLayoutDirection(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}_updateTabScrollPosition(){if(this.disablePagination)return;const t=this.scrollDistance,n="ltr"===this._getLayoutDirection()?-t:t;this._tabList.nativeElement.style.transform=`translateX(${Math.round(n)}px)`,(this._platform.TRIDENT||this._platform.EDGE)&&(this._tabListContainer.nativeElement.scrollLeft=0)}get scrollDistance(){return this._scrollDistance}set scrollDistance(t){this._scrollTo(t)}_scrollHeader(t){return this._scrollTo(this._scrollDistance+("before"==t?-1:1)*this._tabListContainer.nativeElement.offsetWidth/3)}_handlePaginatorClick(t){this._stopInterval(),this._scrollHeader(t)}_scrollToLabel(t){if(this.disablePagination)return;const n=this._items?this._items.toArray()[t]:null;if(!n)return;const o=this._tabListContainer.nativeElement.offsetWidth,{offsetLeft:a,offsetWidth:s}=n.elementRef.nativeElement;let l,m;"ltr"==this._getLayoutDirection()?(l=a,m=l+s):(m=this._tabListInner.nativeElement.offsetWidth-a,l=m-s);const p=this.scrollDistance,h=this.scrollDistance+o;l<p?this.scrollDistance-=p-l+60:m>h&&(this.scrollDistance+=m-h+60)}_checkPaginationEnabled(){if(this.disablePagination)this._showPaginationControls=!1;else{const t=this._tabListInner.nativeElement.scrollWidth>this._elementRef.nativeElement.offsetWidth;t||(this.scrollDistance=0),t!==this._showPaginationControls&&this._changeDetectorRef.markForCheck(),this._showPaginationControls=t}}_checkScrollingControls(){this.disablePagination?this._disableScrollAfter=this._disableScrollBefore=!0:(this._disableScrollBefore=0==this.scrollDistance,this._disableScrollAfter=this.scrollDistance==this._getMaxScrollDistance(),this._changeDetectorRef.markForCheck())}_getMaxScrollDistance(){return this._tabListInner.nativeElement.scrollWidth-this._tabListContainer.nativeElement.offsetWidth||0}_alignInkBarToSelectedTab(){const t=this._items&&this._items.length?this._items.toArray()[this.selectedIndex]:null,n=t?t.elementRef.nativeElement:null;n?this._inkBar.alignToElement(n):this._inkBar.hide()}_stopInterval(){this._stopScrolling.next()}_handlePaginatorPress(t,n){n&&null!=n.button&&0!==n.button||(this._stopInterval(),(0,an.H)(650,100).pipe((0,$.R)((0,xe.T)(this._stopScrolling,this._destroyed))).subscribe(()=>{const{maxScrollDistance:o,distance:a}=this._scrollHeader(t);(0===a||a>=o)&&this._stopInterval()}))}_scrollTo(t){if(this.disablePagination)return{maxScrollDistance:0,distance:0};const n=this._getMaxScrollDistance();return this._scrollDistance=Math.max(0,Math.min(n,t)),this._scrollDistanceChanged=!0,this._checkScrollingControls(),{maxScrollDistance:n,distance:this._scrollDistance}}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.SBq),e.Y36(e.sBO),e.Y36(Te.rL),e.Y36(ne.Is,8),e.Y36(e.R0b),e.Y36(_e.t4),e.Y36(e.QbO,8))},i.\u0275dir=e.lG2({type:i,inputs:{disablePagination:"disablePagination"}}),i})(),Sn=(()=>{class i extends En{constructor(t,n,o,a,s,l,m){super(t,n,o,a,s,l,m),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=(0,P.Ig)(t)}_itemSelected(t){t.preventDefault()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.SBq),e.Y36(e.sBO),e.Y36(Te.rL),e.Y36(ne.Is,8),e.Y36(e.R0b),e.Y36(_e.t4),e.Y36(e.QbO,8))},i.\u0275dir=e.lG2({type:i,inputs:{disableRipple:"disableRipple"},features:[e.qOj]}),i})(),Fn=(()=>{class i extends Sn{constructor(t,n,o,a,s,l,m){super(t,n,o,a,s,l,m)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.SBq),e.Y36(e.sBO),e.Y36(Te.rL),e.Y36(ne.Is,8),e.Y36(e.R0b),e.Y36(_e.t4),e.Y36(e.QbO,8))},i.\u0275cmp=e.Xpm({type:i,selectors:[["mat-tab-header"]],contentQueries:function(t,n,o){if(1&t&&e.Suo(o,Be,4),2&t){let a;e.iGM(a=e.CRH())&&(n._items=a)}},viewQuery:function(t,n){if(1&t&&(e.Gf(De,7),e.Gf(dn,7),e.Gf(mn,7),e.Gf(_n,7),e.Gf(un,5),e.Gf(pn,5)),2&t){let o;e.iGM(o=e.CRH())&&(n._inkBar=o.first),e.iGM(o=e.CRH())&&(n._tabListContainer=o.first),e.iGM(o=e.CRH())&&(n._tabList=o.first),e.iGM(o=e.CRH())&&(n._tabListInner=o.first),e.iGM(o=e.CRH())&&(n._nextPaginator=o.first),e.iGM(o=e.CRH())&&(n._previousPaginator=o.first)}},hostAttrs:[1,"mat-tab-header"],hostVars:4,hostBindings:function(t,n){2&t&&e.ekj("mat-tab-header-pagination-controls-enabled",n._showPaginationControls)("mat-tab-header-rtl","rtl"==n._getLayoutDirection())},inputs:{selectedIndex:"selectedIndex"},outputs:{selectFocusedIndex:"selectFocusedIndex",indexFocused:"indexFocused"},features:[e.qOj],ngContentSelectors:Pe,decls:14,vars:10,consts:[["aria-hidden","true","type","button","mat-ripple","","tabindex","-1",1,"mat-tab-header-pagination","mat-tab-header-pagination-before","mat-elevation-z4",3,"matRippleDisabled","disabled","click","mousedown","touchend"],["previousPaginator",""],[1,"mat-tab-header-pagination-chevron"],[1,"mat-tab-label-container",3,"keydown"],["tabListContainer",""],["role","tablist",1,"mat-tab-list",3,"cdkObserveContent"],["tabList",""],[1,"mat-tab-labels"],["tabListInner",""],["aria-hidden","true","type","button","mat-ripple","","tabindex","-1",1,"mat-tab-header-pagination","mat-tab-header-pagination-after","mat-elevation-z4",3,"matRippleDisabled","disabled","mousedown","click","touchend"],["nextPaginator",""]],template:function(t,n){1&t&&(e.F$t(),e.TgZ(0,"button",0,1),e.NdJ("click",function(){return n._handlePaginatorClick("before")})("mousedown",function(a){return n._handlePaginatorPress("before",a)})("touchend",function(){return n._stopInterval()}),e._UZ(2,"div",2),e.qZA(),e.TgZ(3,"div",3,4),e.NdJ("keydown",function(a){return n._handleKeydown(a)}),e.TgZ(5,"div",5,6),e.NdJ("cdkObserveContent",function(){return n._onContentChanges()}),e.TgZ(7,"div",7,8),e.Hsn(9),e.qZA(),e._UZ(10,"mat-ink-bar"),e.qZA()(),e.TgZ(11,"button",9,10),e.NdJ("mousedown",function(a){return n._handlePaginatorPress("after",a)})("click",function(){return n._handlePaginatorClick("after")})("touchend",function(){return n._stopInterval()}),e._UZ(13,"div",2),e.qZA()),2&t&&(e.ekj("mat-tab-header-pagination-disabled",n._disableScrollBefore),e.Q6J("matRippleDisabled",n._disableScrollBefore||n.disableRipple)("disabled",n._disableScrollBefore||null),e.xp6(5),e.ekj("_mat-animation-noopable","NoopAnimations"===n._animationMode),e.xp6(6),e.ekj("mat-tab-header-pagination-disabled",n._disableScrollAfter),e.Q6J("matRippleDisabled",n._disableScrollAfter||n.disableRipple)("disabled",n._disableScrollAfter||null))},dependencies:[L.wG,Xt.wD,De],styles:[".mat-tab-header{display:flex;overflow:hidden;position:relative;flex-shrink:0}.mat-tab-header-pagination{-webkit-user-select:none;user-select:none;position:relative;display:none;justify-content:center;align-items:center;min-width:32px;cursor:pointer;z-index:2;-webkit-tap-highlight-color:rgba(0,0,0,0);touch-action:none;box-sizing:content-box;background:none;border:none;outline:0;padding:0}.mat-tab-header-pagination::-moz-focus-inner{border:0}.mat-tab-header-pagination-controls-enabled .mat-tab-header-pagination{display:flex}.mat-tab-header-pagination-before,.mat-tab-header-rtl .mat-tab-header-pagination-after{padding-left:4px}.mat-tab-header-pagination-before .mat-tab-header-pagination-chevron,.mat-tab-header-rtl .mat-tab-header-pagination-after .mat-tab-header-pagination-chevron{transform:rotate(-135deg)}.mat-tab-header-rtl .mat-tab-header-pagination-before,.mat-tab-header-pagination-after{padding-right:4px}.mat-tab-header-rtl .mat-tab-header-pagination-before .mat-tab-header-pagination-chevron,.mat-tab-header-pagination-after .mat-tab-header-pagination-chevron{transform:rotate(45deg)}.mat-tab-header-pagination-chevron{border-style:solid;border-width:2px 2px 0 0;height:8px;width:8px}.mat-tab-header-pagination-disabled{box-shadow:none;cursor:default}.mat-tab-list{flex-grow:1;position:relative;transition:transform 500ms cubic-bezier(0.35, 0, 0.25, 1)}.mat-ink-bar{position:absolute;bottom:0;height:2px;transition:500ms cubic-bezier(0.35, 0, 0.25, 1)}.mat-ink-bar._mat-animation-noopable{transition:none !important;animation:none !important}.mat-tab-group-inverted-header .mat-ink-bar{bottom:auto;top:0}.cdk-high-contrast-active .mat-ink-bar{outline:solid 2px;height:0}.mat-tab-labels{display:flex}[mat-align-tabs=center]>.mat-tab-header .mat-tab-labels{justify-content:center}[mat-align-tabs=end]>.mat-tab-header .mat-tab-labels{justify-content:flex-end}.mat-tab-label-container{display:flex;flex-grow:1;overflow:hidden;z-index:1}.mat-tab-list._mat-animation-noopable{transition:none !important;animation:none !important}.mat-tab-label{height:48px;padding:0 24px;cursor:pointer;box-sizing:border-box;opacity:.6;min-width:160px;text-align:center;display:inline-flex;justify-content:center;align-items:center;white-space:nowrap;position:relative}.mat-tab-label:focus{outline:none}.mat-tab-label:focus:not(.mat-tab-disabled){opacity:1}.mat-tab-label.mat-tab-disabled{cursor:default}.cdk-high-contrast-active .mat-tab-label.mat-tab-disabled{opacity:.5}.mat-tab-label .mat-tab-label-content{display:inline-flex;justify-content:center;align-items:center;white-space:nowrap}.cdk-high-contrast-active .mat-tab-label{opacity:1}.mat-tab-label::before{margin:5px}@media(max-width: 599px){.mat-tab-label{min-width:72px}}"],encapsulation:2}),i})(),Un=0;
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */class Pn{}const Dn=(0,L.pj)((0,L.Kr)(class{constructor(i){this._elementRef=i}}),"primary");let qn=(()=>{class i extends Dn{constructor(t,n,o,a){super(t),this._changeDetectorRef=n,this._animationMode=a,this._tabs=new e.n_E,this._indexToSelect=0,this._lastFocusedTabIndex=null,this._tabBodyWrapperHeight=0,this._tabsSubscription=te.w.EMPTY,this._tabLabelSubscription=te.w.EMPTY,this._dynamicHeight=!1,this._selectedIndex=null,this.headerPosition="above",this._disablePagination=!1,this._preserveContent=!1,this.selectedIndexChange=new e.vpe,this.focusChange=new e.vpe,this.animationDone=new e.vpe,this.selectedTabChange=new e.vpe(!0),this._groupId=Un++,this.animationDuration=o&&o.animationDuration?o.animationDuration:"500ms",this.disablePagination=!(!o||null==o.disablePagination)&&o.disablePagination,this.dynamicHeight=!(!o||null==o.dynamicHeight)&&o.dynamicHeight,this.contentTabIndex=o?.contentTabIndex??null,this.preserveContent=!!o?.preserveContent}get dynamicHeight(){return this._dynamicHeight}set dynamicHeight(t){this._dynamicHeight=(0,P.Ig)(t)}get selectedIndex(){return this._selectedIndex}set selectedIndex(t){this._indexToSelect=(0,P.su)(t,null)}get animationDuration(){return this._animationDuration}set animationDuration(t){this._animationDuration=/^\d+$/.test(t+"")?t+"ms":t}get contentTabIndex(){return this._contentTabIndex}set contentTabIndex(t){this._contentTabIndex=(0,P.su)(t,null)}get disablePagination(){return this._disablePagination}set disablePagination(t){this._disablePagination=(0,P.Ig)(t)}get preserveContent(){return this._preserveContent}set preserveContent(t){this._preserveContent=(0,P.Ig)(t)}get backgroundColor(){return this._backgroundColor}set backgroundColor(t){const n=this._elementRef.nativeElement;n.classList.remove(`mat-background-${this.backgroundColor}`),t&&n.classList.add(`mat-background-${t}`),this._backgroundColor=t}ngAfterContentChecked(){const t=this._indexToSelect=this._clampTabIndex(this._indexToSelect);if(this._selectedIndex!=t){const n=null==this._selectedIndex;if(!n){this.selectedTabChange.emit(this._createChangeEvent(t));const o=this._tabBodyWrapper.nativeElement;o.style.minHeight=o.clientHeight+"px"}Promise.resolve().then(()=>{this._tabs.forEach((o,a)=>o.isActive=a===t),n||(this.selectedIndexChange.emit(t),this._tabBodyWrapper.nativeElement.style.minHeight="")})}this._tabs.forEach((n,o)=>{n.position=o-t,null!=this._selectedIndex&&0==n.position&&!n.origin&&(n.origin=t-this._selectedIndex)}),this._selectedIndex!==t&&(this._selectedIndex=t,this._lastFocusedTabIndex=null,this._changeDetectorRef.markForCheck())}ngAfterContentInit(){this._subscribeToAllTabChanges(),this._subscribeToTabLabels(),this._tabsSubscription=this._tabs.changes.subscribe(()=>{const t=this._clampTabIndex(this._indexToSelect);if(t===this._selectedIndex){const n=this._tabs.toArray();let o;for(let a=0;a<n.length;a++)if(n[a].isActive){this._indexToSelect=this._selectedIndex=a,this._lastFocusedTabIndex=null,o=n[a];break}!o&&n[t]&&Promise.resolve().then(()=>{n[t].isActive=!0,this.selectedTabChange.emit(this._createChangeEvent(t))})}this._changeDetectorRef.markForCheck()})}_subscribeToAllTabChanges(){this._allTabs.changes.pipe((0,Ce.O)(this._allTabs)).subscribe(t=>{this._tabs.reset(t.filter(n=>n._closestTabGroup===this||!n._closestTabGroup)),this._tabs.notifyOnChanges()})}ngOnDestroy(){this._tabs.destroy(),this._tabsSubscription.unsubscribe(),this._tabLabelSubscription.unsubscribe()}realignInkBar(){this._tabHeader&&this._tabHeader._alignInkBarToSelectedTab()}updatePagination(){this._tabHeader&&this._tabHeader.updatePagination()}focusTab(t){const n=this._tabHeader;n&&(n.focusIndex=t)}_focusChanged(t){this._lastFocusedTabIndex=t,this.focusChange.emit(this._createChangeEvent(t))}_createChangeEvent(t){const n=new Pn;return n.index=t,this._tabs&&this._tabs.length&&(n.tab=this._tabs.toArray()[t]),n}_subscribeToTabLabels(){this._tabLabelSubscription&&this._tabLabelSubscription.unsubscribe(),this._tabLabelSubscription=(0,xe.T)(...this._tabs.map(t=>t._stateChanges)).subscribe(()=>this._changeDetectorRef.markForCheck())}_clampTabIndex(t){return Math.min(this._tabs.length-1,Math.max(t||0,0))}_getTabLabelId(t){return`mat-tab-label-${this._groupId}-${t}`}_getTabContentId(t){return`mat-tab-content-${this._groupId}-${t}`}_setTabBodyWrapperHeight(t){if(!this._dynamicHeight||!this._tabBodyWrapperHeight)return;const n=this._tabBodyWrapper.nativeElement;n.style.height=this._tabBodyWrapperHeight+"px",this._tabBodyWrapper.nativeElement.offsetHeight&&(n.style.height=t+"px")}_removeTabBodyWrapperHeight(){const t=this._tabBodyWrapper.nativeElement;this._tabBodyWrapperHeight=t.clientHeight,t.style.height="",this.animationDone.emit()}_handleClick(t,n,o){t.disabled||(this.selectedIndex=n.focusIndex=o)}_getTabIndex(t,n){return t.disabled?null:n===(this._lastFocusedTabIndex??this.selectedIndex)?0:-1}_tabFocusChanged(t,n){t&&"mouse"!==t&&"touch"!==t&&(this._tabHeader.focusIndex=n)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.SBq),e.Y36(e.sBO),e.Y36(Qe,8),e.Y36(e.QbO,8))},i.\u0275dir=e.lG2({type:i,inputs:{dynamicHeight:"dynamicHeight",selectedIndex:"selectedIndex",headerPosition:"headerPosition",animationDuration:"animationDuration",contentTabIndex:"contentTabIndex",disablePagination:"disablePagination",preserveContent:"preserveContent",backgroundColor:"backgroundColor"},outputs:{selectedIndexChange:"selectedIndexChange",focusChange:"focusChange",animationDone:"animationDone",selectedTabChange:"selectedTabChange"},features:[e.qOj]}),i})(),$e=(()=>{class i extends qn{constructor(t,n,o,a){super(t,n,o,a)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.SBq),e.Y36(e.sBO),e.Y36(Qe,8),e.Y36(e.QbO,8))},i.\u0275cmp=e.Xpm({type:i,selectors:[["mat-tab-group"]],contentQueries:function(t,n,o){if(1&t&&e.Suo(o,ye,5),2&t){let a;e.iGM(a=e.CRH())&&(n._allTabs=a)}},viewQuery:function(t,n){if(1&t&&(e.Gf(gn,5),e.Gf(hn,5)),2&t){let o;e.iGM(o=e.CRH())&&(n._tabBodyWrapper=o.first),e.iGM(o=e.CRH())&&(n._tabHeader=o.first)}},hostAttrs:[1,"mat-tab-group"],hostVars:4,hostBindings:function(t,n){2&t&&e.ekj("mat-tab-group-dynamic-height",n.dynamicHeight)("mat-tab-group-inverted-header","below"===n.headerPosition)},inputs:{color:"color",disableRipple:"disableRipple"},exportAs:["matTabGroup"],features:[e._Bn([{provide:qe,useExisting:i}]),e.qOj],decls:6,vars:7,consts:[[3,"selectedIndex","disableRipple","disablePagination","indexFocused","selectFocusedIndex"],["tabHeader",""],["class","mat-tab-label mat-focus-indicator","role","tab","matTabLabelWrapper","","mat-ripple","","cdkMonitorElementFocus","",3,"id","mat-tab-label-active","ngClass","disabled","matRippleDisabled","click","cdkFocusChange",4,"ngFor","ngForOf"],[1,"mat-tab-body-wrapper"],["tabBodyWrapper",""],["role","tabpanel",3,"id","mat-tab-body-active","ngClass","content","position","origin","animationDuration","preserveContent","_onCentered","_onCentering",4,"ngFor","ngForOf"],["role","tab","matTabLabelWrapper","","mat-ripple","","cdkMonitorElementFocus","",1,"mat-tab-label","mat-focus-indicator",3,"id","ngClass","disabled","matRippleDisabled","click","cdkFocusChange"],[1,"mat-tab-label-content"],[3,"ngIf","ngIfElse"],["tabTextLabel",""],[3,"cdkPortalOutlet"],["role","tabpanel",3,"id","ngClass","content","position","origin","animationDuration","preserveContent","_onCentered","_onCentering"]],template:function(t,n){1&t&&(e.TgZ(0,"mat-tab-header",0,1),e.NdJ("indexFocused",function(a){return n._focusChanged(a)})("selectFocusedIndex",function(a){return n.selectedIndex=a}),e.YNc(2,vn,5,15,"div",2),e.qZA(),e.TgZ(3,"div",3,4),e.YNc(5,xn,1,11,"mat-tab-body",5),e.qZA()),2&t&&(e.Q6J("selectedIndex",n.selectedIndex||0)("disableRipple",n.disableRipple)("disablePagination",n.disablePagination),e.xp6(2),e.Q6J("ngForOf",n._tabs),e.xp6(1),e.ekj("_mat-animation-noopable","NoopAnimations"===n._animationMode),e.xp6(2),e.Q6J("ngForOf",n._tabs))},dependencies:[_.mk,_.sg,_.O5,de.Pl,L.wG,Ue.kH,Be,Je,Fn],styles:[".mat-tab-group{display:flex;flex-direction:column;max-width:100%}.mat-tab-group.mat-tab-group-inverted-header{flex-direction:column-reverse}.mat-tab-label{height:48px;padding:0 24px;cursor:pointer;box-sizing:border-box;opacity:.6;min-width:160px;text-align:center;display:inline-flex;justify-content:center;align-items:center;white-space:nowrap;position:relative}.mat-tab-label:focus{outline:none}.mat-tab-label:focus:not(.mat-tab-disabled){opacity:1}.mat-tab-label.mat-tab-disabled{cursor:default}.cdk-high-contrast-active .mat-tab-label.mat-tab-disabled{opacity:.5}.mat-tab-label .mat-tab-label-content{display:inline-flex;justify-content:center;align-items:center;white-space:nowrap}.cdk-high-contrast-active .mat-tab-label{opacity:1}@media(max-width: 599px){.mat-tab-label{padding:0 12px}}@media(max-width: 959px){.mat-tab-label{padding:0 12px}}.mat-tab-group[mat-stretch-tabs]>.mat-tab-header .mat-tab-label{flex-basis:0;flex-grow:1}.mat-tab-body-wrapper{position:relative;overflow:hidden;display:flex;transition:height 500ms cubic-bezier(0.35, 0, 0.25, 1)}.mat-tab-body-wrapper._mat-animation-noopable{transition:none !important;animation:none !important}.mat-tab-body{top:0;left:0;right:0;bottom:0;position:absolute;display:block;overflow:hidden;outline:0;flex-basis:100%}.mat-tab-body.mat-tab-body-active{position:relative;overflow-x:hidden;overflow-y:auto;z-index:1;flex-grow:1}.mat-tab-group.mat-tab-group-dynamic-height .mat-tab-body.mat-tab-body-active{overflow-y:hidden}"],encapsulation:2}),i})();
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
var ue=c(5504);function Jn(i,r){1&i&&(e.TgZ(0,"div",17),e._uU(1," Options Available "),e.qZA())}function Qn(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"a-counter",18),e.NdJ("ngModelChange",function(o){e.CHM(t);const a=e.oxw().$implicit,s=e.oxw(5);return e.KtG(s.updateItemQuantity(a,o))}),e.qZA()}if(2&i){const t=e.oxw().$implicit;e.Q6J("ngModel",t.quantity)}}function Bn(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",19)(1,"div",20)(2,"button",21)(3,"app-icon"),e._uU(4,"remove"),e.qZA()()(),e.TgZ(5,"div",22),e._uU(6),e.qZA(),e.TgZ(7,"button",23),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,a=e.oxw(5);return e.KtG(a.addItem(o))}),e.TgZ(8,"app-icon"),e._uU(9,"add"),e.qZA()()()}if(2&i){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("matTooltip",t.quantity?"Items with options must be removed from order confirmation page":""),e.xp6(1),e.Q6J("disabled",!0),e.xp6(4),e.hij(" ",t.quantity," ")}}function Gn(i,r){if(1&i&&(e.TgZ(0,"div",11)(1,"div",12)(2,"div",12),e._uU(3),e.qZA(),e.YNc(4,Jn,2,0,"div",13),e.qZA(),e.TgZ(5,"div",14),e._uU(6),e.ALo(7,"currency"),e.qZA(),e.YNc(8,Qn,1,1,"a-counter",15),e.YNc(9,Bn,10,3,"div",16),e.qZA()),2&i){const t=r.$implicit,n=e.oxw(5);e.xp6(3),e.hij(" ",t.name," "),e.xp6(1),e.Q6J("ngIf",t.options.length),e.xp6(2),e.hij(" ",e.xi3(7,5,t.unit_price/100,n.code)," "),e.xp6(2),e.Q6J("ngIf",!t.options.length),e.xp6(1),e.Q6J("ngIf",t.options.length)}}const Ye=function(){return{}};function Hn(i,r){if(1&i&&(e.TgZ(0,"mat-tab",8)(1,"div",9),e.YNc(2,Gn,10,8,"div",10),e.qZA()()),2&i){const t=e.oxw().$implicit,n=e.oxw(3);e.Q6J("label",t),e.xp6(2),e.Q6J("ngForOf",(n.menu_items||e.DdM(2,Ye))[t])}}function $n(i,r){if(1&i&&(e.ynx(0),e.YNc(1,Hn,3,3,"mat-tab",7),e.BQk()),2&i){const t=r.$implicit,n=e.oxw(3);e.xp6(1),e.Q6J("ngIf",(n.menu_items||e.DdM(1,Ye))[t].length)}}function Yn(i,r){if(1&i&&(e.ynx(0),e.TgZ(1,"mat-tab-group"),e.YNc(2,$n,2,2,"ng-container",6),e.qZA(),e.BQk()),2&i){const t=e.oxw(2);e.xp6(2),e.Q6J("ngForOf",t.categories)}}function jn(i,r){if(1&i&&(e.TgZ(0,"div",4),e.YNc(1,Yn,3,1,"ng-container",5),e.qZA()),2&i){const t=e.oxw(),n=e.MAs(5);e.xp6(1),e.Q6J("ngIf",!t.show_order_details)("ngIfElse",n)}}function Wn(i,r){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",26),e._uU(2," Cancel "),e.qZA(),e.TgZ(3,"button",27),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.show_order_details=!0)}),e._uU(4," Confirm "),e.qZA(),e.BQk()}if(2&i){const t=e.oxw(2);e.xp6(3),e.Q6J("disabled",!t.order.item_count)("matBadge",t.order.item_count)("matBadgeHidden",!t.order.item_count)}}function Vn(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",28),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.show_order_details=!1)}),e._uU(1," Back "),e.qZA(),e.TgZ(2,"button",29),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.saveOrder())}),e._uU(3," Save Order "),e.qZA()}}function Kn(i,r){if(1&i&&(e.TgZ(0,"footer",24),e.YNc(1,Wn,5,3,"ng-container",5),e.YNc(2,Vn,4,0,"ng-template",null,25,e.W1O),e.qZA()),2&i){const t=e.MAs(3),n=e.oxw();e.xp6(1),e.Q6J("ngIf",!n.show_order_details)("ngIfElse",t)}}function zn(i,r){if(1&i&&(e.TgZ(0,"div",30),e._UZ(1,"mat-spinner",31),e.TgZ(2,"p"),e._uU(3),e.qZA()()),2&i){const t=e.oxw();e.xp6(3),e.Oqu(t.loading)}}function Xn(i,r){if(1&i&&(e.TgZ(0,"div",37),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit,n=e.oxw(2);e.Q6J("matTooltip",n.optionsFor(t)),e.xp6(1),e.AsE(" ",t.options.length," option",1===t.options.length?"":"s"," selected ")}}function ei(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",34)(1,"div",12)(2,"div",12),e._uU(3),e.qZA(),e.YNc(4,Xn,2,3,"div",35),e.qZA(),e.TgZ(5,"div",14),e._uU(6),e.ALo(7,"currency"),e.qZA(),e.TgZ(8,"a-counter",36),e.NdJ("ngModelChange",function(o){const s=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.updateItemQuantity(s,o))}),e.qZA()()}if(2&i){const t=r.$implicit,n=e.oxw(2);e.xp6(3),e.Oqu(t.name),e.xp6(1),e.Q6J("ngIf",t.options.length),e.xp6(2),e.hij(" ",e.xi3(7,4,t.total_cost/100,n.code)," "),e.xp6(2),e.Q6J("ngModel",t.quantity)}}function ti(i,r){if(1&i&&(e.TgZ(0,"header",32)(1,"h3"),e._uU(2,"Confirm Order"),e.qZA()(),e.TgZ(3,"div",9),e.YNc(4,ei,9,7,"div",33),e.qZA()),2&i){const t=e.oxw();e.xp6(4),e.Q6J("ngForOf",t.order.items)}}let je=(()=>{class i extends g.KG{constructor(t,n){super(),this._org=t,this._data=n,this.event=new e.vpe,this.loading="",this.menu_items={},this.categories=[],this.loading="Loading menu..."}get code(){return this._org.currency_code}ngOnInit(){var t=this;return(0,u.Z)(function*(){t.loading="Loading menu...",t.order=new E.G(t._data.order),t.rules=yield t._data.getCateringConfig(t.order.event?.space?.level?.parent_id),t._data.menu.subscribe(n=>{t.loading="Loading menu...";const o=(0,g.Tw)(n.map(s=>s.category)),a={};for(const s of o)a[s]=n.filter(l=>l.category===s&&Fe(l,t.rules,t.order.event));t.categories=o,t.menu_items=a,t.updateMenuQuantities(),t.timeout("clear_loading",()=>t.loading="",1e3)})})()}addItem(t,n=!0){const o=this.order.items.find(a=>a.id===t.id&&a.options.length===a.options.reduce((s,l)=>s+(t.options.find(m=>l.id===m.id)?1:0),0));n&&t.options?.length?this._data.selectOptions(t.options).then(a=>{const s=new M.U({...t,options:a});this.addItem(s,!1)}):this.order=new E.G(o?{...this.order,items:this.order.items.filter(a=>!(a.id===t.id&&a.options_string===t.options_string)).concat([new M.U({...t,quantity:o.quantity+1})])}:{...this.order,items:this.order.items.concat([new M.U({...t,quantity:1})])}),this.updateMenuQuantities()}removeItem(t){this.order=new E.G({...this.order,items:this.order.items.filter(n=>n.id!==t.id&&n.options_string===t.options_string)}),this.updateMenuQuantities()}updateItemQuantity(t,n){const o=this.order.items.find(s=>s.id===t.id&&s.options_string===t.options_string);let a=[...this.order.items];a=o?this.order.items.filter(s=>!(s.id===t.id&&s.options_string===t.options_string)).concat([new M.U({...t,quantity:n})]):this.order.items.concat([new M.U({...t,quantity:n})]),a.sort((s,l)=>s.name.localeCompare(l.name)),this.order=new E.G({...this.order,items:a}),this.updateMenuQuantities()}updateMenuQuantities(){for(const t in this.menu_items)for(const n of this.menu_items[t])n.quantity=this.order.items.reduce((o,a)=>a.id===n.id?o+a.quantity:o,0)}optionsFor(t){return t.options.map(n=>n.name).join("\n")}saveOrder(){this.event.emit({reason:"done",metadata:{order:this.order}})}confirmOrder(){this.show_order_details=!0}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(ee.w7),e.Y36(T.WI))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-catering-order-modal"]],outputs:{event:"event"},features:[e.qOj],decls:6,vars:3,consts:[["class","main min-w-[20rem]",4,"ngIf","ngIfElse"],["class","flex items-center justify-center space-x-2 p-2 border-t border-gray-200",4,"ngIf"],["load_state",""],["order_details",""],[1,"main","min-w-[20rem]"],[4,"ngIf","ngIfElse"],[4,"ngFor","ngForOf"],[3,"label",4,"ngIf"],[3,"label"],[1,"list"],["item","","class","flex items-center p-2 border-b border-gray-200",4,"ngFor","ngForOf"],["item","",1,"flex","items-center","p-2","border-b","border-gray-200"],[1,"flex-1","w-1/2"],["class","text-xs no-underline",4,"ngIf"],[1,"bg-primary","text-xs","rounded","px-4","py-2","mx-2","text-white","font-medium"],["ngDefaultControl","",3,"ngModel","ngModelChange",4,"ngIf"],["class","flex items-center",4,"ngIf"],[1,"text-xs","no-underline"],["ngDefaultControl","",3,"ngModel","ngModelChange"],[1,"flex","items-center"],[3,"matTooltip"],["mat-icon-button","",3,"disabled"],[1,"count","h-12","w-12","flex","items-center","justify-center"],["mat-icon-button","",3,"click"],[1,"flex","items-center","justify-center","space-x-2","p-2","border-t","border-gray-200"],["order_actions",""],["mat-button","","mat-dialog-close","",1,"inverse"],["confirm","","mat-button","","matBadgeColor","warn",3,"disabled","matBadge","matBadgeHidden","click"],["mat-button","",1,"inverse",3,"click"],["save","","mat-button","",3,"click"],[1,"flex","flex-col","w-64","p-8","items-center","space-y-2"],["diameter","32"],[1,"h-[3.25rem]"],["item","","class","flex items-center p-2 border-b border-gray-50",4,"ngFor","ngForOf"],["item","",1,"flex","items-center","p-2","border-b","border-gray-50"],["class","text-xs underline",3,"matTooltip",4,"ngIf"],[3,"ngModel","ngModelChange"],[1,"text-xs","underline",3,"matTooltip"]],template:function(t,n){if(1&t&&(e.YNc(0,jn,2,2,"div",0),e.YNc(1,Kn,4,2,"footer",1),e.YNc(2,zn,4,1,"ng-template",null,2,e.W1O),e.YNc(4,ti,5,1,"ng-template",null,3,e.W1O)),2&t){const o=e.MAs(3);e.Q6J("ngIf",!n.loading)("ngIfElse",o),e.xp6(1),e.Q6J("ngIf",!n.loading)}},dependencies:[_.sg,_.O5,$e,ye,T.ZT,ue.gM,d.Fj,d.JJ,d.On,x.o,v.lW,F.Ou,he.R,_.H9],styles:[".list[_ngcontent-%COMP%]{height:24em;min-width:32em;max-width:calc(100vw - 1em)}footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:12em}input[_ngcontent-%COMP%]{position:relative;width:100%;padding:1em;border:none;border-radius:0!important;border-top:1px solid #ccc;border-bottom:1px solid #ccc;outline:none;font-size:1em}input[_ngcontent-%COMP%]:focus{border:none;border-top:2px solid var(--primary);border-bottom:2px solid var(--primary);box-shadow:none}input.error[_ngcontent-%COMP%]::placeholder{color:rgba(var(--error),.45)}\n/*# sourceMappingURL=catering-order-modal.component.ts-angular-inline--61.css.map*/"]}),i})();var Y=c(8281);function ni(i,r){if(1&i&&(e.TgZ(0,"div",18),e._uU(1),e.ALo(2,"currency"),e.qZA()),2&i){const t=e.oxw().$implicit,n=e.oxw(3);e.xp6(1),e.hij(" +",e.xi3(2,1,t.unit_price/100,n.code)," ")}}function ii(i,r){if(1&i&&(e.TgZ(0,"mat-radio-button",14)(1,"div",15)(2,"div",16),e._uU(3),e.qZA(),e.YNc(4,ni,3,4,"div",17),e.qZA()()),2&i){const t=r.$implicit;e.Q6J("value",t.id),e.xp6(3),e.hij(" ",t.name," "),e.xp6(1),e.Q6J("ngIf",t.unit_price)}}function oi(i,r){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"mat-radio-group",10),e.NdJ("ngModelChange",function(o){e.CHM(t);const a=e.oxw().$implicit,s=e.oxw();return e.KtG(s.updateGroupOption(a,o))}),e.TgZ(2,"mat-radio-button",11)(3,"span",12),e._uU(4,"None"),e.qZA()(),e.YNc(5,ii,5,3,"mat-radio-button",13),e.qZA(),e.BQk()}if(2&i){const t=e.oxw().$implicit;e.xp6(5),e.Q6J("ngForOf",null==t?null:t.options)}}function ai(i,r){if(1&i&&(e.TgZ(0,"div",18),e._uU(1),e.ALo(2,"currency"),e.qZA()),2&i){const t=e.oxw().$implicit,n=e.oxw(3);e.xp6(1),e.hij(" +",e.xi3(2,1,t.unit_price/100,n.code)," ")}}function ri(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"mat-checkbox",20),e.NdJ("ngModelChange",function(o){const s=e.CHM(t).$implicit,l=e.oxw(3);return e.KtG(l.option_state[s.id]=o)}),e.TgZ(1,"div",15)(2,"div",16),e._uU(3),e.qZA(),e.YNc(4,ai,3,4,"div",17),e.qZA()()}if(2&i){const t=r.$implicit,n=e.oxw(3);e.Q6J("ngModel",n.option_state[t.id]),e.xp6(3),e.hij(" ",t.name," "),e.xp6(1),e.Q6J("ngIf",t.unit_price)}}function si(i,r){if(1&i&&e.YNc(0,ri,5,3,"mat-checkbox",19),2&i){const t=e.oxw().$implicit;e.Q6J("ngForOf",null==t?null:t.options)}}function li(i,r){if(1&i&&(e.TgZ(0,"div",5)(1,"div",6),e._uU(2),e.qZA(),e.TgZ(3,"div",7),e.YNc(4,oi,6,1,"ng-container",8),e.YNc(5,si,1,1,"ng-template",null,9,e.W1O),e.qZA()()),2&i){const t=r.$implicit,n=e.MAs(6);e.uIk("group",t.name),e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Q6J("ngIf",!t.multiple)("ngIfElse",n)}}let We=(()=>{class i{constructor(t){this._data=t,this.event=new e.vpe,this.option_state={},this.code=this._data.code;const n=(0,Oe.Tw)(this._data.options.map(a=>a.group||"Other")),o=[];for(const a of n){const s=this._data.options.filter(l=>l.group===a);o.push({name:a,multiple:!!s.find(l=>l.multiple),options:s})}this.groups=o}updateGroupOption(t,n){for(const o of t.options)this.option_state[o.id]=o.id===n}saveOptions(){const t=this._data.options.filter(n=>this.option_state[n.id]);this.event.emit({reason:"done",metadata:{options:t}})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(T.WI))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-catering-options-modal"]],outputs:{event:"event"},decls:11,vars:1,consts:[["mat-icon-button","","mat-dialog-close",""],[1,"overflow-auto"],["class","pt-1 pb-2 border-b border-gray-200",4,"ngFor","ngForOf"],[1,"p-2"],["mat-button","",1,"w-32",3,"click"],[1,"pt-1","pb-2","border-b","border-gray-200"],[1,"font-medium","p-2","capitalize"],[1,"flex","flex-col","pl-6"],[4,"ngIf","ngIfElse"],["multi_options",""],["aria-label","Select an option","ngModel","",1,"flex","flex-col",3,"ngModelChange"],["value","",1,"my-1","mx-0"],[1,"font-medium","p-2"],["class","my-1 mx-0",3,"value",4,"ngFor","ngForOf"],[1,"my-1","mx-0",3,"value"],[1,"flex","items-center","justify-center"],[1,"font-medium","p-2","flex-1","w-1/2"],["class","opacity-60 text-xs",4,"ngIf"],[1,"opacity-60","text-xs"],[3,"ngModel","ngModelChange",4,"ngFor","ngForOf"],[3,"ngModel","ngModelChange"]],template:function(t,n){1&t&&(e.TgZ(0,"header")(1,"h3"),e._uU(2,"Select options"),e.qZA(),e.TgZ(3,"button",0)(4,"app-icon"),e._uU(5,"close"),e.qZA()()(),e.TgZ(6,"main",1),e.YNc(7,li,7,4,"div",2),e.qZA(),e.TgZ(8,"footer",3)(9,"button",4),e.NdJ("click",function(){return n.saveOptions()}),e._uU(10," Save "),e.qZA()()),2&t&&(e.xp6(7),e.Q6J("ngForOf",n.groups))},dependencies:[_.sg,_.O5,T.ZT,U.oG,Y.VQ,Y.U0,d.JJ,d.On,x.o,v.lW,_.H9],styles:["main[_ngcontent-%COMP%]{min-height:24em;width:24rem;max-width:calc(100vw - 2rem)}\n/*# sourceMappingURL=catering-order-options-modal.component.ts-angular-inline--62.css.map*/"]}),i})();function ci(i,r){1&i&&(e.TgZ(0,"button",4)(1,"app-icon"),e._uU(2,"close"),e.qZA()())}function di(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"main")(1,"div",5)(2,"app-icon",6),e._uU(3,"upload"),e.qZA(),e.TgZ(4,"p"),e._uU(5,"Click to select file or Drag and drop files"),e.qZA(),e.TgZ(6,"input",7),e.NdJ("change",function(o){e.CHM(t);const a=e.oxw();return e.KtG(a.handleFileEvent(o))}),e.qZA()(),e.TgZ(7,"div",8)(8,"button",9),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.downloadTemplate())}),e._uU(9," Download Template "),e.qZA()()()}}function mi(i,r){if(1&i&&(e.TgZ(0,"main",10),e._UZ(1,"mat-spinner",11),e.TgZ(2,"p"),e._uU(3),e.qZA()()),2&i){const t=e.oxw();e.xp6(3),e.Oqu(t.loading)}}let Ve=(()=>{class i{constructor(){this.event=new e.vpe}handleFileEvent(t){this.loading="Processing menu data...";const n=t.target;if(!n?.files)return this.loading="";const o=n.files;if(!o.length)return this.loading="";const a=o[0],s=new FileReader;s.addEventListener("loadend",l=>{const p=(0,g.n5)(l.target.result);this.loading="",this.event.emit({reason:"done",metadata:p.filter(h=>"item"===(h.type||"").toLowerCase()).map(h=>new M.U({...h,options:p.filter(b=>"option"===(b.type||"").toLowerCase()&&b.tags===h.id).map(b=>({id:b.id,name:b.name,group:b.category,multiple:b.multiple,unit_price:b.unit_price}))}))})}),s.readAsText(a)}downloadTemplate(){(0,g.Sv)("import-menu-template.csv","ID,Type,Name,Unit Price,Category,Description,Tags,Multiple\nitem-1,item,Coffee,200,Drink,Wake Up,,\noption-1,option,1 Sugar,20,Sugars,,item-1,false")}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["catering-import-menu-modal"]],outputs:{event:"event"},decls:7,vars:3,consts:[[1,"h-12","bg-primary","flex","items-center","justify-between","px-4"],["mat-icon-button","","mat-dialog-close","",4,"ngIf"],[4,"ngIf","ngIfElse"],["load_state",""],["mat-icon-button","","mat-dialog-close",""],[1,"relative","flex","flex-col","items-center","justify-center","space-y-2","h-[24rem]","w-[24rem]","border-4","border-gray-200","border-dashed","rounded-xl","hover:bg-gray-100","m-4","p-4","cursor-pointer"],[1,"text-4xl"],["type","file",1,"absolute","inset-0","opacity-0",3,"change"],[1,"flex","items-center","justify-center","px-4","pb-4"],["mat-button","",1,"clear","underline","w-48",3,"click"],[1,"flex","flex-col","items-center","justify-center","space-y-2","p-8","h-[24rem]","w-[24rem]"],["diameter","32"]],template:function(t,n){if(1&t&&(e.TgZ(0,"header",0)(1,"h2"),e._uU(2,"Import Catering Menu"),e.qZA(),e.YNc(3,ci,3,0,"button",1),e.qZA(),e.YNc(4,di,10,0,"main",2),e.YNc(5,mi,4,1,"ng-template",null,3,e.W1O)),2&t){const o=e.MAs(6);e.xp6(3),e.Q6J("ngIf",!n.loading),e.xp6(1),e.Q6J("ngIf",!n.loading)("ngIfElse",o)}},dependencies:[_.O5,T.ZT,x.o,v.lW,F.Ou]}),i})(),ie=(()=>{class i extends g.KG{constructor(t,n,o){var a;super(),a=this,this._org=t,this._dialog=n,this._settings=o,this._updated=new y.X(0),this._menu=new y.X([]),this._loading=new y.X(!1),this._currency=new y.X("USD"),this.menu=this._menu.asObservable(),this.loading=this._loading.asObservable(),this.currency=this._currency.asObservable(),this.settings=this._org.active_building.pipe((0,fe.h)(s=>!!s),(0,H.w)(s=>(0,N.rlq)(s.id,"catering-settings").pipe((0,le.K)(l=>(0,z.of)({})))),(0,A.U)(s=>s.details||{}),(0,ce.b)(s=>this._settings.post("require_catering_notes",!!s?.require_notes)),(0,X.d)(1)),this.charge_codes=this.settings.pipe((0,A.U)(s=>s.charge_codes||[])),this.availability=this.settings.pipe((0,A.U)(s=>s.disabled_rooms||[])),this.zone="",this.subscription("building",this._org.active_building.subscribe(function(){var s=(0,u.Z)(function*(l){if(l){const m=(yield a.getCateringForZone(l.id)).map(p=>new M.U(p));a._currency.next(a._settings.get("app.currency")||l.currency||"USD"),a._menu.next(m)}});return function(l){return s.apply(this,arguments)}}()))}get is_editable(){return!this.zone||this.zone===this._org.building?.id}get categories(){const t=this._menu.getValue();return(0,g.Tw)(t.map(n=>n.category))}manageCateringOrder(t){var n=this;return(0,u.Z)(function*(){const o=n._dialog.open(je,{data:{code:n._currency.getValue(),order:t,menu:n.menu,loading:n.loading,getCateringConfig:s=>n.getCateringConfig(s),selectOptions:s=>n.selectOptions(s)}}),a=yield Promise.race([o.componentInstance.event.pipe((0,S.P)(s=>"done"===s.reason)).toPromise(),o.afterClosed().toPromise()]);return o.close(),a?.metadata?.order||t})()}addItem(t=new M.U){var n=this;return(0,u.Z)(function*(){const o=n._dialog.open(Ae,{data:{item:t,categories:n.categories}}),a=yield Promise.race([o.componentInstance.event.pipe((0,S.P)(m=>"done"===m.reason)).toPromise(),o.afterClosed().toPromise()]);if("done"!==a?.reason)return;const s=n._menu.getValue(),l=s.findIndex(m=>m.id===t.id);l>=0?s.splice(l,1,a.metadata.item):s.push(a.metadata.item),n.updateMenu(n._org.building.id,s).then(()=>{n._menu.next([...s]),o.close()},()=>o.componentInstance.loading=!1)})()}updateItem(t){const n=this._menu.getValue(),o=n.findIndex(a=>a.id===t.id);o>=0?n.splice(o,1,t):n.push(t),this.updateMenu(this._org.building.id,n).then(()=>this._menu.next([...n]))}addOption(t,n={}){var o=this;return(0,u.Z)(function*(){const a=(0,g.Tw)(t.options.map(h=>h.group)),s=o._dialog.open(ke,{data:{parent:t,option:n,types:a}}),l=yield Promise.race([s.componentInstance.event.pipe((0,S.P)(h=>"done"===h.reason)).toPromise(),s.afterClosed().toPromise()]);if("done"!==l?.reason)return;const m=o._menu.getValue(),p=m.findIndex(h=>h.id===t.id);p>=0?m.splice(p,1,l.metadata.item):m.push(l.metadata.item),o.updateMenu(o._org.building.id,m).then(()=>{o._menu.next([...m]),s.close()},()=>s.componentInstance.loading=!1)})()}selectOptions(t){var n=this;return(0,u.Z)(function*(){const o=n._dialog.open(We,{data:{code:n._currency.getValue(),options:t}}),a=yield Promise.race([o.componentInstance.event.pipe((0,S.P)(s=>"done"===s.reason)).toPromise(),o.afterClosed().toPromise()]);return"done"!==a?.reason?[]:(o.close(),a.metadata.options)})()}deleteItem(t){var n=this;return(0,u.Z)(function*(){const o=yield(0,g._5)({title:"Delete Catering Item",content:`Are you sure you wish to remove the catering item ${t.name} from the menu?`,icon:{type:"icon",class:"material-icons",content:"delete"}},n._dialog);if("done"!==o.reason)return;o.loading("Removing catering item...");const a=n._menu.getValue().filter(s=>t.id!==s.id);n.updateMenu(n._org.building.id,a).then(()=>{n._menu.next([...a]),o.close()},()=>o.loading(""))})()}deleteOption(t,n){var o=this;return(0,u.Z)(function*(){const a=yield(0,g._5)({title:"Delete Catering Item Option",content:`Are you sure you wish to remove the catering option "${n.name}" from "${t.name}"?`,icon:{type:"icon",class:"material-icons",content:"delete"}},o._dialog);if("done"!==a.reason)return;a.loading("Removing catering item option...");const s=o._menu.getValue();s.splice(s.findIndex(l=>l.id===t.id),1,new M.U({...t,options:t.options.filter(l=>l.id!==n.id)})),o.updateMenu(o._org.building.id,s).then(()=>{o._menu.next([...s]),a.close()},()=>a.loading(""))})()}editConfig(){var t=this;return(0,u.Z)(function*(){const n=yield t.getCateringConfig(t._org.building.id),{require_notes:o}=yield t.settings.pipe((0,R.q)(1)).toPromise(),a=t._menu.getValue(),s=(0,g.Tw)((0,g.xH)(a.map(p=>[p.category,...p.tags]))),l=t._dialog.open(Ie,{data:{config:n,types:s,require_notes:o,saveNotes:p=>t.saveSettings({require_notes:p})}}),m=yield Promise.race([l.componentInstance.event.pipe((0,S.P)(p=>"done"===p.reason)).toPromise(),l.afterClosed().toPromise()]);"done"===m?.reason&&t.updateConfig(t._org.building.id,m.metadata).then(()=>l.close(),()=>l.componentInstance.loading=!1)})()}importMenu(){var t=this;return(0,u.Z)(function*(){const n=t._dialog.open(Ve),o=yield Promise.race([n.componentInstance.event.pipe((0,S.P)(m=>"done"===m.reason)).toPromise(),n.afterClosed().toPromise()]);if("done"!==o?.reason)return;n.componentInstance.loading="Updating menu...";const a=t._menu.getValue(),s=t._org.building,l=(0,g.Tw)(o.metadata.concat(a),"id");yield t.updateMenu(s.id,l).catch(m=>{throw(0,g.cB)("Error importing catering menu"),n.close(),m}),(0,g.t5)(`Successfully imported catering menu. ${o.metadata.length} item(s) added.`),n.close()})()}updateMenu(t,n){return(0,N.Ymr)(t,{id:t,name:"catering",details:n,description:`Catering menu for ${t}`}).toPromise()}saveSettings(t){var n=this;return(0,u.Z)(function*(){const o=yield n.settings.pipe((0,R.q)(1)).toPromise();return(0,N.Ymr)(n._org.building.id,{id:n._org.building.id,name:"catering-settings",details:{...o,...t},description:`Catering settings for ${n._org.building.id}`}).toPromise()})()}getCateringForZone(t){return(0,u.Z)(function*(){const n=(yield(0,N.rlq)(t,"catering").toPromise()).details;return n instanceof Array?n:[]})()}getCateringConfig(t=this._org.building.id){return(0,u.Z)(function*(){const n=(yield(0,N.rlq)(t,"catering_config").toPromise()).details;return n instanceof Array?n:[]})()}updateConfig(t,n){return(0,N.Ymr)(t,{id:t,name:"catering_config",details:n,description:`Catering menu config for ${t}`}).toPromise()}addItemToOrder(t,n){let o=t.items;const a=o.find(l=>l.id===n.id&&n.options?.length===l.options?.reduce((m,p)=>m+(n.options.find(h=>p.id===h.id)?1:0),0));return a?a.quantity+=1:o=o.concat([new M.U({...n,quantity:1})]),new E.G({...t,items:o,event:null})}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(ee.w7),e.LFG(T.uw),e.LFG(g.gb))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Uo(i,r){if(1&i&&(e.TgZ(0,"mat-option",8),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.name," ")}}c(2460),c(8005),c(572),c(7895),c(3841),c(5039),c(4211),c(3902),c(2581),c(8840);const Po=function(){return["/welcome"]};let Do=(()=>{class i{constructor(t,n,o){this._router=t,this._checkin=n,this._catering=o,this.menu=this._catering.menu.pipe((0,A.U)(a=>a.filter(s=>s.tags.find(l=>"drink"===l.toLowerCase()))))}update(){var t=this;return(0,u.Z)(function*(){if(!t.beverage)return t.next();const n=yield t._checkin.event.pipe((0,S.P)(a=>!!a)).toPromise();if(!n)return(0,g.cB)("Unable to load event data.");const o=(n.ext("catering")?n.ext("catering")[0]:null)||new E.G;yield(0,ae.eJ)(n.id,new ae.ym({...n,extension_data:{...n.extension_data,catering:[...n.extension_data.catering?.filter(a=>a.id!==o.id)||[],new E.G({...o,items:[...o.items,new M.U({...t.beverage,quantity:1})]})]}})).toPromise(),(0,g.t5)("Successfully update event."),t.next()})()}next(){this._router.navigate(["/welcome"])}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Z.F0),e.Y36(J),e.Y36(ie))},i.\u0275cmp=e.Xpm({type:i,selectors:[["checkin-preferences"]],decls:13,vars:7,consts:[[1,"bg-white","rounded","shadow","overflow-hidden","relative","flex","flex-col","items-center","my-4","p-4","mx-auto"],[1,"text-xl","mb-2","w-full"],[1,"w-full"],["appearance","outline",1,"w-full"],["placeholder","Select beverage",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["mat-button","",1,"w-32",3,"click"],["mat-icon-button","",1,"absolute","top-0","right-0",3,"routerLink"],[3,"value"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"h3",1),e._uU(2,"Would you like a drink?"),e.qZA(),e.TgZ(3,"div",2)(4,"mat-form-field",3)(5,"mat-select",4),e.NdJ("ngModelChange",function(a){return n.beverage=a}),e.YNc(6,Uo,2,2,"mat-option",5),e.ALo(7,"async"),e.qZA()()(),e.TgZ(8,"button",6),e.NdJ("click",function(){return n.update()}),e._uU(9),e.qZA(),e.TgZ(10,"a",7)(11,"app-icon"),e._uU(12,"close"),e.qZA()()()),2&t&&(e.xp6(5),e.Q6J("ngModel",n.beverage),e.xp6(1),e.Q6J("ngForOf",e.lcZ(7,4,n.menu)),e.xp6(3),e.hij(" ",n.beverage?"Update":"Continue"," "),e.xp6(1),e.Q6J("routerLink",e.DdM(6,Po)))},dependencies:[_.sg,d.JJ,d.On,x.o,L.ey,I.KE,we.gD,v.lW,v.zs,Z.yS,_.Ov],styles:["[_nghost-%COMP%] > div[_ngcontent-%COMP%]{width:32rem;max-width:calc(100vw - 2rem)}\n/*# sourceMappingURL=checkin-preferences.component.ts-angular-inline--71.css.map*/"]}),i})();const lt=(()=>{class i{constructor(t,n,o,a,s){this._legacyCanvasSize=i.DEFAULT_CANVAS_SIZE,this._preferredCamera="environment",this._maxScansPerSecond=25,this._lastScanTimestamp=-1,this._destroyed=this._flashOn=this._paused=this._active=!1,this.$video=t,this.$canvas=document.createElement("canvas"),o&&"object"==typeof o?this._onDecode=n:(console.warn(o||a||s?"You're using a deprecated version of the QrScanner constructor which will be removed in the future":"Note that the type of the scan result passed to onDecode will change in the future. To already switch to the new api today, you can pass returnDetailedScanResult: true."),this._legacyOnDecode=n),this._onDecodeError=(n="object"==typeof o?o:{}).onDecodeError||("function"==typeof o?o:this._onDecodeError),this._calculateScanRegion=n.calculateScanRegion||("function"==typeof a?a:this._calculateScanRegion),this._preferredCamera=n.preferredCamera||s||this._preferredCamera,this._legacyCanvasSize="number"==typeof o?o:"number"==typeof a?a:this._legacyCanvasSize,this._maxScansPerSecond=n.maxScansPerSecond||this._maxScansPerSecond,this._onPlay=this._onPlay.bind(this),this._onLoadedMetaData=this._onLoadedMetaData.bind(this),this._onVisibilityChange=this._onVisibilityChange.bind(this),this._updateOverlay=this._updateOverlay.bind(this),t.disablePictureInPicture=!0,t.playsInline=!0,t.muted=!0;let l=!1;if(t.hidden&&(t.hidden=!1,l=!0),document.body.contains(t)||(document.body.appendChild(t),l=!0),o=t.parentElement,n.highlightScanRegion||n.highlightCodeOutline){if(a=!!n.overlay,this.$overlay=n.overlay||document.createElement("div"),(s=this.$overlay.style).position="absolute",s.display="none",s.pointerEvents="none",this.$overlay.classList.add("scan-region-highlight"),!a&&n.highlightScanRegion){this.$overlay.innerHTML='<svg class="scan-region-highlight-svg" viewBox="0 0 238 238" preserveAspectRatio="none" style="position:absolute;width:100%;height:100%;left:0;top:0;fill:none;stroke:#e9b213;stroke-width:4;stroke-linecap:round;stroke-linejoin:round"><path d="M31 2H10a8 8 0 0 0-8 8v21M207 2h21a8 8 0 0 1 8 8v21m0 176v21a8 8 0 0 1-8 8h-21m-176 0H10a8 8 0 0 1-8-8v-21"/></svg>';try{this.$overlay.firstElementChild.animate({transform:["scale(.98)","scale(1.01)"]},{duration:400,iterations:1/0,direction:"alternate",easing:"ease-in-out"})}catch{}o.insertBefore(this.$overlay,this.$video.nextSibling)}n.highlightCodeOutline&&(this.$overlay.insertAdjacentHTML("beforeend",'<svg class="code-outline-highlight" preserveAspectRatio="none" style="display:none;width:100%;height:100%;fill:none;stroke:#e9b213;stroke-width:5;stroke-dasharray:25;stroke-linecap:round;stroke-linejoin:round"><polygon/></svg>'),this.$codeOutlineHighlight=this.$overlay.lastElementChild)}this._scanRegion=this._calculateScanRegion(t),requestAnimationFrame(()=>{let m=window.getComputedStyle(t);"none"===m.display&&(t.style.setProperty("display","block","important"),l=!0),"visible"!==m.visibility&&(t.style.setProperty("visibility","visible","important"),l=!0),l&&(console.warn("QrScanner has overwritten the video hiding style to avoid Safari stopping the playback."),t.style.opacity="0",t.style.width="0",t.style.height="0",this.$overlay&&this.$overlay.parentElement&&this.$overlay.parentElement.removeChild(this.$overlay),delete this.$overlay,delete this.$codeOutlineHighlight),this.$overlay&&this._updateOverlay()}),t.addEventListener("play",this._onPlay),t.addEventListener("loadedmetadata",this._onLoadedMetaData),document.addEventListener("visibilitychange",this._onVisibilityChange),window.addEventListener("resize",this._updateOverlay),this._qrEnginePromise=i.createQrEngine()}static set WORKER_PATH(t){console.warn("Setting QrScanner.WORKER_PATH is not required and not supported anymore. Have a look at the README for new setup instructions.")}static hasCamera(){return(0,u.Z)(function*(){try{return!!(yield i.listCameras(!1)).length}catch{return!1}})()}static listCameras(t=!1){return(0,u.Z)(function*(){if(!navigator.mediaDevices)return[];let o,n=function(){var a=(0,u.Z)(function*(){return(yield navigator.mediaDevices.enumerateDevices()).filter(s=>"videoinput"===s.kind)});return function(){return a.apply(this,arguments)}}();try{t&&(yield n()).every(a=>!a.label)&&(o=yield navigator.mediaDevices.getUserMedia({audio:!1,video:!0}))}catch{}try{return(yield n()).map((a,s)=>({id:a.deviceId,label:a.label||(0===s?"Default Camera":`Camera ${s+1}`)}))}finally{o&&(console.warn("Call listCameras after successfully starting a QR scanner to avoid creating a temporary video stream"),i._stopVideoStream(o))}})()}hasFlash(){var t=this;return(0,u.Z)(function*(){let n;try{if(t.$video.srcObject){if(!(t.$video.srcObject instanceof MediaStream))return!1;n=t.$video.srcObject}else n=(yield t._getCameraStream()).stream;return"torch"in n.getVideoTracks()[0].getSettings()}catch{return!1}finally{n&&n!==t.$video.srcObject&&(console.warn("Call hasFlash after successfully starting the scanner to avoid creating a temporary video stream"),i._stopVideoStream(n))}})()}isFlashOn(){return this._flashOn}toggleFlash(){var t=this;return(0,u.Z)(function*(){t._flashOn?yield t.turnFlashOff():yield t.turnFlashOn()})()}turnFlashOn(){var t=this;return(0,u.Z)(function*(){if(!t._flashOn&&!t._destroyed&&(t._flashOn=!0,t._active&&!t._paused))try{if(!(yield t.hasFlash()))throw"No flash available";yield t.$video.srcObject.getVideoTracks()[0].applyConstraints({advanced:[{torch:!0}]})}catch(n){throw t._flashOn=!1,n}})()}turnFlashOff(){var t=this;return(0,u.Z)(function*(){t._flashOn&&(t._flashOn=!1,yield t._restartVideoStream())})()}destroy(){this.$video.removeEventListener("loadedmetadata",this._onLoadedMetaData),this.$video.removeEventListener("play",this._onPlay),document.removeEventListener("visibilitychange",this._onVisibilityChange),window.removeEventListener("resize",this._updateOverlay),this._destroyed=!0,this._flashOn=!1,this.stop(),i._postWorkerMessage(this._qrEnginePromise,"close")}start(){var t=this;return(0,u.Z)(function*(){if(t._destroyed)throw Error("The QR scanner can not be started as it had been destroyed.");if((!t._active||t._paused)&&("https:"!==window.location.protocol&&console.warn("The camera stream is only accessible if the page is transferred via https."),t._active=!0,!document.hidden))if(t._paused=!1,t.$video.srcObject)yield t.$video.play();else try{let{stream:n,facingMode:o}=yield t._getCameraStream();!t._active||t._paused?i._stopVideoStream(n):(t._setVideoMirror(o),t.$video.srcObject=n,yield t.$video.play(),t._flashOn&&(t._flashOn=!1,t.turnFlashOn().catch(()=>{})))}catch(n){if(!t._paused)throw t._active=!1,n}})()}stop(){this.pause(),this._active=!1}pause(t=!1){var n=this;return(0,u.Z)(function*(){if(n._paused=!0,!n._active)return!0;n.$video.pause(),n.$overlay&&(n.$overlay.style.display="none");let o=()=>{n.$video.srcObject instanceof MediaStream&&(i._stopVideoStream(n.$video.srcObject),n.$video.srcObject=null)};return t?(o(),!0):(yield new Promise(a=>setTimeout(a,300)),!!n._paused&&(o(),!0))})()}setCamera(t){var n=this;return(0,u.Z)(function*(){t!==n._preferredCamera&&(n._preferredCamera=t,yield n._restartVideoStream())})()}static scanImage(t,n,o,a,s=!1,l=!1){return(0,u.Z)(function*(){let m,p=!1;n&&("scanRegion"in n||"qrEngine"in n||"canvas"in n||"disallowCanvasResizing"in n||"alsoTryWithoutScanRegion"in n||"returnDetailedScanResult"in n)?(m=n.scanRegion,o=n.qrEngine,a=n.canvas,s=n.disallowCanvasResizing||!1,l=n.alsoTryWithoutScanRegion||!1,p=!0):console.warn(n||o||a||s||l?"You're using a deprecated api for scanImage which will be removed in the future.":"Note that the return type of scanImage will change in the future. To already switch to the new api today, you can pass returnDetailedScanResult: true."),n=!!o;try{let h,b,k;if([o,h]=yield Promise.all([o||i.createQrEngine(),i._loadImage(t)]),[a,b]=i._drawToCanvas(h,m,a,s),o instanceof Worker){let f=o;n||i._postWorkerMessageSync(f,"inversionMode","both"),k=yield new Promise((C,O)=>{let B,W,D,ge=-1;W=q=>{q.data.id===ge&&(f.removeEventListener("message",W),f.removeEventListener("error",D),clearTimeout(B),null!==q.data.data?C({data:q.data.data,cornerPoints:i._convertPoints(q.data.cornerPoints,m)}):O(i.NO_QR_CODE_FOUND))},D=q=>{f.removeEventListener("message",W),f.removeEventListener("error",D),clearTimeout(B),O("Scanner error: "+(q?q.message||q:"Unknown Error"))},f.addEventListener("message",W),f.addEventListener("error",D),B=setTimeout(()=>D("timeout"),1e4);let oe=b.getImageData(0,0,a.width,a.height);ge=i._postWorkerMessageSync(f,"decode",oe,[oe.data.buffer])})}else k=yield Promise.race([new Promise((f,C)=>window.setTimeout(()=>C("Scanner error: timeout"),1e4)),(0,u.Z)(function*(){try{var[f]=yield o.detect(a);if(!f)throw i.NO_QR_CODE_FOUND;return{data:f.rawValue,cornerPoints:i._convertPoints(f.cornerPoints,m)}}catch(C){if(/not implemented|service unavailable/.test(f=C.message||C))return i._disableBarcodeDetector=!0,i.scanImage(t,{scanRegion:m,canvas:a,disallowCanvasResizing:s,alsoTryWithoutScanRegion:l});throw`Scanner error: ${f}`}})()]);return p?k:k.data}catch(h){if(!m||!l)throw h;let b=yield i.scanImage(t,{qrEngine:o,canvas:a,disallowCanvasResizing:s});return p?b:b.data}finally{n||i._postWorkerMessage(o,"close")}})()}setGrayscaleWeights(t,n,o,a=!0){i._postWorkerMessage(this._qrEnginePromise,"grayscaleWeights",{red:t,green:n,blue:o,useIntegerApproximation:a})}setInversionMode(t){i._postWorkerMessage(this._qrEnginePromise,"inversionMode",t)}static createQrEngine(t){return(0,u.Z)(function*(){if(t&&console.warn("Specifying a worker path is not required and not supported anymore."),t=()=>c.e("node_modules_qr-scanner_qr-scanner-worker_min_js").then(c.bind(c,4757)).then(o=>o.createWorker()),i._disableBarcodeDetector||!("BarcodeDetector"in window)||!BarcodeDetector.getSupportedFormats||!(yield BarcodeDetector.getSupportedFormats()).includes("qr_code"))return t();let n=navigator.userAgentData;return n&&n.brands.some(({brand:o})=>/Chromium/i.test(o))&&/mac ?OS/i.test(n.platform)&&(yield n.getHighEntropyValues(["architecture","platformVersion"]).then(({architecture:o,platformVersion:a})=>/arm/i.test(o||"arm")&&13<=parseInt(a||"13")).catch(()=>!0))?t():new BarcodeDetector({formats:["qr_code"]})})()}_onPlay(){this._scanRegion=this._calculateScanRegion(this.$video),this._updateOverlay(),this.$overlay&&(this.$overlay.style.display=""),this._scanFrame()}_onLoadedMetaData(){this._scanRegion=this._calculateScanRegion(this.$video),this._updateOverlay()}_onVisibilityChange(){document.hidden?this.pause():this._active&&this.start()}_calculateScanRegion(t){let n=Math.round(.6666666666666666*Math.min(t.videoWidth,t.videoHeight));return{x:Math.round((t.videoWidth-n)/2),y:Math.round((t.videoHeight-n)/2),width:n,height:n,downScaledWidth:this._legacyCanvasSize,downScaledHeight:this._legacyCanvasSize}}_updateOverlay(){requestAnimationFrame(()=>{if(this.$overlay){var t=this.$video,n=t.videoWidth,o=t.videoHeight,a=t.offsetWidth,s=t.offsetHeight,l=t.offsetLeft,m=t.offsetTop,p=window.getComputedStyle(t),h=p.objectFit,b=n/o,k=a/s;switch(h){case"none":var f=n,C=o;break;case"fill":f=a,C=s;break;default:("cover"===h?b>k:b<k)?f=(C=s)*b:C=(f=a)/b,"scale-down"===h&&(f=Math.min(f,n),C=Math.min(C,o))}var[O,B]=p.objectPosition.split(" ").map((D,ge)=>{const oe=parseFloat(D);return D.endsWith("%")?(ge?s-C:a-f)*oe/100:oe});k=this._scanRegion.height||o,h=this._scanRegion.x||0;var W=this._scanRegion.y||0;(b=this.$overlay.style).width=(p=this._scanRegion.width||n)/n*f+"px",b.height=k/o*C+"px",b.top=`${m+B+W/o*C}px`,o=/scaleX\(-1\)/.test(t.style.transform),b.left=`${l+(o?a-O-f:O)+(o?n-h-p:h)/n*f}px`,b.transform=t.style.transform}})}static _convertPoints(t,n){if(!n)return t;let o=n.x||0,a=n.y||0,s=n.width&&n.downScaledWidth?n.width/n.downScaledWidth:1;n=n.height&&n.downScaledHeight?n.height/n.downScaledHeight:1;for(let l of t)l.x=l.x*s+o,l.y=l.y*n+a;return t}_scanFrame(){var t=this;!this._active||this.$video.paused||this.$video.ended||("requestVideoFrameCallback"in this.$video?this.$video.requestVideoFrameCallback.bind(this.$video):requestAnimationFrame)((0,u.Z)(function*(){if(!(1>=t.$video.readyState)){var n=Date.now()-t._lastScanTimestamp,o=1e3/t._maxScansPerSecond;n<o&&(yield new Promise(s=>setTimeout(s,o-n))),t._lastScanTimestamp=Date.now();try{var a=yield i.scanImage(t.$video,{scanRegion:t._scanRegion,qrEngine:t._qrEnginePromise,canvas:t.$canvas})}catch(s){if(!t._active)return;t._onDecodeError(s)}!i._disableBarcodeDetector||(yield t._qrEnginePromise)instanceof Worker||(t._qrEnginePromise=i.createQrEngine()),a?(t._onDecode?t._onDecode(a):t._legacyOnDecode&&t._legacyOnDecode(a.data),t.$codeOutlineHighlight&&(clearTimeout(t._codeOutlineHighlightRemovalTimeout),t._codeOutlineHighlightRemovalTimeout=void 0,t.$codeOutlineHighlight.setAttribute("viewBox",`${t._scanRegion.x||0} ${t._scanRegion.y||0} ${t._scanRegion.width||t.$video.videoWidth} ${t._scanRegion.height||t.$video.videoHeight}`),t.$codeOutlineHighlight.firstElementChild.setAttribute("points",a.cornerPoints.map(({x:s,y:l})=>`${s},${l}`).join(" ")),t.$codeOutlineHighlight.style.display="")):t.$codeOutlineHighlight&&!t._codeOutlineHighlightRemovalTimeout&&(t._codeOutlineHighlightRemovalTimeout=setTimeout(()=>t.$codeOutlineHighlight.style.display="none",100))}t._scanFrame()}))}_onDecodeError(t){t!==i.NO_QR_CODE_FOUND&&console.log(t)}_getCameraStream(){var t=this;return(0,u.Z)(function*(){if(!navigator.mediaDevices)throw"Camera not found.";let n=/^(environment|user)$/.test(t._preferredCamera)?"facingMode":"deviceId",o=[{width:{min:1024}},{width:{min:768}},{}],a=o.map(s=>Object.assign({},s,{[n]:{exact:t._preferredCamera}}));for(let s of[...a,...o])try{let l=yield navigator.mediaDevices.getUserMedia({video:s,audio:!1});return{stream:l,facingMode:t._getFacingMode(l)||(s.facingMode?t._preferredCamera:"environment"===t._preferredCamera?"user":"environment")}}catch{}throw"Camera not found."})()}_restartVideoStream(){var t=this;return(0,u.Z)(function*(){let n=t._paused;(yield t.pause(!0))&&!n&&t._active&&(yield t.start())})()}static _stopVideoStream(t){for(let n of t.getTracks())n.stop(),t.removeTrack(n)}_setVideoMirror(t){this.$video.style.transform="scaleX("+("user"===t?-1:1)+")"}_getFacingMode(t){return(t=t.getVideoTracks()[0])?/rear|back|environment/i.test(t.label)?"environment":/front|user|face/i.test(t.label)?"user":null:null}static _drawToCanvas(t,n,o,a=!1){o=o||document.createElement("canvas");let s=n&&n.x?n.x:0,l=n&&n.y?n.y:0,m=n&&n.width?n.width:t.videoWidth||t.width,p=n&&n.height?n.height:t.videoHeight||t.height;return a||(a=n&&n.downScaledWidth?n.downScaledWidth:m,n=n&&n.downScaledHeight?n.downScaledHeight:p,o.width!==a&&(o.width=a),o.height!==n&&(o.height=n)),(n=o.getContext("2d",{alpha:!1})).imageSmoothingEnabled=!1,n.drawImage(t,s,l,m,p,0,0,o.width,o.height),[o,n]}static _loadImage(t){return(0,u.Z)(function*(){if(t instanceof Image)return yield i._awaitImageLoad(t),t;if(t instanceof HTMLVideoElement||t instanceof HTMLCanvasElement||t instanceof SVGImageElement||"OffscreenCanvas"in window&&t instanceof OffscreenCanvas||"ImageBitmap"in window&&t instanceof ImageBitmap)return t;if(!(t instanceof File||t instanceof Blob||t instanceof URL||"string"==typeof t))throw"Unsupported image type.";{let n=new Image;n.src=t instanceof File||t instanceof Blob?URL.createObjectURL(t):t.toString();try{return yield i._awaitImageLoad(n),n}finally{(t instanceof File||t instanceof Blob)&&URL.revokeObjectURL(n.src)}}})()}static _awaitImageLoad(t){return(0,u.Z)(function*(){t.complete&&0!==t.naturalWidth||(yield new Promise((n,o)=>{let a=s=>{t.removeEventListener("load",a),t.removeEventListener("error",a),s instanceof ErrorEvent?o("Image load error"):n()};t.addEventListener("load",a),t.addEventListener("error",a)}))})()}static _postWorkerMessage(t,n,o,a){return(0,u.Z)(function*(){return i._postWorkerMessageSync(yield t,n,o,a)})()}static _postWorkerMessageSync(t,n,o,a){if(!(t instanceof Worker))return-1;let s=i._workerMessageId++;return t.postMessage({id:s,type:n,data:o},a),s}}return i.DEFAULT_CANVAS_SIZE=400,i.NO_QR_CODE_FOUND="No QR code found",i._disableBarcodeDetector=!1,i._workerMessageId=0,i})(),qo=["video"],Jo=["checkin-qr-scan",""],Qo=function(){return["/welcome"]};let Bo=(()=>{class i{constructor(t,n){this._checkin=t,this._router=n}ngOnInit(){this.setupQRReader()}ngOnDestroy(){this._video_el.nativeElement.srcObject&&this._video_el.nativeElement.srcObject.getTracks().forEach(t=>t?.stop()),this._reader?.stop()}checkQRCode(t){var n=this;return(0,u.Z)(function*(){const o=t.split(",");if(2!==o.length)return(0,g.cB)("Invalid QRCode"),void n.setupQRReader();yield n._checkin.loadGuestAndEvent(o[0],o[1]).catch(a=>{throw n.handleError(a.message||a),a}),n._router.navigate(["/checkin","details"])})()}checkEmail(t){var n=this;return(0,u.Z)(function*(){!t||!t.includes("@")||t.length<5||(yield n._checkin.loadGuestAndEvent(t).catch(o=>{throw n.handleError(o.message||o),o}),n._router.navigate(["/checkin","details"]))})()}setupQRReader(){navigator.mediaDevices?.getUserMedia&&navigator.mediaDevices.getUserMedia({video:!0}).then(t=>this._video_el.nativeElement.srcObject=t).catch(t=>console.error("Unable to fetch media devices!",t)),lt&&(this._reader=new lt(this._video_el.nativeElement,t=>this.checkQRCode(t)),this._reader.start())}handleError(t){this._checkin.setError(t?.statusText||t),this._router.navigate(["/checkin","error"])}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(J),e.Y36(Z.F0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["","checkin-qr-scan",""]],viewQuery:function(t,n){if(1&t&&e.Gf(qo,7),2&t){let o;e.iGM(o=e.CRH())&&(n._video_el=o.first)}},attrs:Jo,decls:12,vars:3,consts:[[1,"bg-white","rounded","shadow","overflow-hidden","relative","flex","flex-col","items-center"],[1,"mt-6","mb-4"],["appearance","outline"],["matInput","","placeholder","Enter email...","type","email","autocomplete","off",3,"ngModel","ngModelChange","blur","keyup.enter"],["id","qr-stream","playsinline","","width","640","height","480","autoplay","",1,"rounded","m-4","bg-gray-200","border","border-gray-500"],["video",""],["mat-icon-button","",1,"absolute","top-0","right-0",3,"routerLink"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"p",1),e._uU(2," Please enter your email address or scan your QR code "),e.qZA(),e.TgZ(3,"mat-form-field",2)(4,"input",3),e.NdJ("ngModelChange",function(a){return n.email=a})("blur",function(){return n.checkEmail(n.email)})("keyup.enter",function(){return n.checkEmail(n.email)}),e.qZA(),e.TgZ(5,"mat-error"),e._uU(6,"Invalid email format"),e.qZA()(),e._UZ(7,"video",4,5),e.TgZ(9,"a",6)(10,"app-icon"),e._uU(11,"close"),e.qZA()()()),2&t&&(e.xp6(4),e.Q6J("ngModel",n.email),e.xp6(5),e.Q6J("routerLink",e.DdM(2,Qo)))},dependencies:[d.Fj,d.JJ,d.On,x.o,I.TO,I.KE,v.zs,Q.Nt,Z.yS],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;width:100%;background-color:#00000080}video[_ngcontent-%COMP%]{width:36rem;height:27rem}mat-form-field[_ngcontent-%COMP%]{width:36rem}a[_ngcontent-%COMP%]{position:absolute}\n/*# sourceMappingURL=checkin-qr-scan.component.ts-angular-inline--72.css.map*/"]}),i})();function Go(i,r){1&i&&(e.TgZ(0,"p"),e._uU(1," Please wait in the lobby. "),e.qZA())}function Ho(i,r){1&i&&(e.TgZ(0,"p"),e._uU(1," Please use the vistor access lift over there. "),e.qZA())}const $o=function(){return["/checkin","preferences"]};function Yo(i,r){if(1&i&&(e.TgZ(0,"div",1)(1,"h3",2),e._uU(2,"You are checked in!"),e.qZA(),e.TgZ(3,"p",3),e._uU(4),e.ALo(5,"date"),e.ALo(6,"async"),e.ALo(7,"async"),e._UZ(8,"br"),e._uU(9),e.ALo(10,"async"),e.qZA(),e.YNc(11,Go,2,0,"p",4),e.ALo(12,"async"),e.YNc(13,Ho,2,0,"p",4),e.ALo(14,"async"),e.TgZ(15,"a",5),e._uU(16," Done "),e.qZA()()),2&i){const t=e.oxw();let n,o,a;e.xp6(4),e.AsE(" Welcome, you have a meeting at ",e.xi3(5,6,(null==(n=e.lcZ(6,9,t.event))?null:n.date)||"","shortDate")," with ",(null==e.lcZ(7,11,t.event).organiser?null:e.lcZ(7,11,t.event).organiser.name)||"","."),e.xp6(5),e.hij(" ",(null==e.lcZ(10,13,t.event).organiser?null:e.lcZ(10,13,t.event).organiser.name)||""," has been notified and will be with you shortly.\xa0 "),e.xp6(2),e.Q6J("ngIf",!(null!=(o=e.lcZ(12,15,t.event))&&o.can_access_lift)),e.xp6(2),e.Q6J("ngIf",null==(a=e.lcZ(14,17,t.event))?null:a.can_access_lift),e.xp6(2),e.Q6J("routerLink",e.DdM(19,$o))}}let jo=(()=>{class i{constructor(t,n){this._checkin=t,this._router=n,this.event=this._checkin.event,this.guest=this._checkin.guest}ngOnInit(){this.event.pipe((0,S.P)()).subscribe(t=>t?"":this.previous())}previous(){this._router.navigate(["/checkin"])}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(J),e.Y36(Z.F0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["checkin-results"]],decls:2,vars:3,consts:[["class","bg-white rounded shadow overflow-hidden relative flex flex-col items-center my-4 p-4 mx-auto space-y-4",4,"ngIf"],[1,"bg-white","rounded","shadow","overflow-hidden","relative","flex","flex-col","items-center","my-4","p-4","mx-auto","space-y-4"],[1,"text-xl"],[1,"text-center"],[4,"ngIf"],["button","","mat-button","",1,"w-32",3,"routerLink"]],template:function(t,n){1&t&&(e.YNc(0,Yo,17,20,"div",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,n.event))},dependencies:[_.O5,v.zs,Z.yS,_.Ov,_.uU],styles:["[_nghost-%COMP%]{position:absolute;display:flex;align-items:center;justify-content:center;inset:0;background-color:#00000080}[_nghost-%COMP%] > div[_ngcontent-%COMP%]{width:32rem;max-width:calc(100vw - 2rem)}\n/*# sourceMappingURL=checkin-result.component.ts-angular-inline--73.css.map*/"]}),i})();function Wo(i,r){if(1&i&&(e.TgZ(0,"p",5),e._uU(1),e.ALo(2,"async"),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(e.lcZ(2,1,t.error))}}const Vo=function(){return["/welcome"]};let Ko=(()=>{class i{constructor(t){this._checkin=t,this.error=this._checkin.error}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(J))},i.\u0275cmp=e.Xpm({type:i,selectors:[["checkin-error"]],decls:9,vars:5,consts:[[1,"bg-white","rounded","shadow","overflow-hidden","relative","flex","flex-col","items-center","my-4","mx-auto","p-4"],[1,"text-2xl","mb-4"],["class","mb-2",4,"ngIf"],[1,"mb-4"],["button","","mat-button","",1,"w-32",3,"routerLink"],[1,"mb-2"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"h3",1),e._uU(2,"Please see reception."),e.qZA(),e.YNc(3,Wo,3,3,"p",2),e.ALo(4,"async"),e.TgZ(5,"p",3),e._uU(6,"Our staff at reception will assist you."),e.qZA(),e.TgZ(7,"a",4),e._uU(8," Back "),e.qZA()()),2&t&&(e.xp6(3),e.Q6J("ngIf",e.lcZ(4,2,n.error)),e.xp6(4),e.Q6J("routerLink",e.DdM(4,Vo)))},dependencies:[_.O5,v.zs,Z.yS,_.Ov],styles:["[_nghost-%COMP%]{position:absolute;display:flex;align-items:center;justify-content:center;inset:0;background-color:#00000080}[_nghost-%COMP%] > div[_ngcontent-%COMP%]{width:28rem;max-width:calc(100vw - 2rem)}\n/*# sourceMappingURL=checkin-error.component.ts-angular-inline--74.css.map*/"]}),i})();const zo=["checkin-covid",""],Xo=function(){return["/welcome"]};let ea=(()=>{class i{constructor(t,n){this._router=t,this._checkin=n}confirm(){if(!this.symptoms||!this.contact)return(0,g.cB)("Please select yes or no for each question");this._checkin.updateGuest({covid:"true"===this.contact,symptoms:"true"===this.symptoms}),"false"===this.symptoms&&"false"===this.contact?this._router.navigate(["/checkin","results"]):(this._checkin.setError("Please get tested for COVID-19 and self-isolate at home for 14 days"),this._router.navigate(["/checkin","error"]))}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Z.F0),e.Y36(J))},i.\u0275cmp=e.Xpm({type:i,selectors:[["","checkin-covid",""]],attrs:zo,decls:55,vars:5,consts:[[1,"bg-white","rounded","p-4","relative","overflow-y-auto","overflow-x-hidden"],[1,"text-xl","font-medium","mb-4"],[1,"list-decimal","list-inside"],[1,"list-disc","list-inside","px-4","mb-4"],["aria-label","Has Symptoms",3,"ngModel","ngModelChange"],["value","true"],["value","false",1,"ml-4"],[1,"my-4"],["aria-label","COVID contact or self-isolated",3,"ngModel","ngModelChange"],["mat-button","",3,"click"],["mat-icon-button","",1,"absolute","top-0","right-0",3,"routerLink"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"h3",1),e._uU(2,"COVID Disclaimer"),e.qZA(),e.TgZ(3,"ol",2)(4,"li"),e._uU(5," Do you have any of the following symptoms?"),e._UZ(6,"br")(7,"br"),e.TgZ(8,"ul",3)(9,"li"),e._uU(10,"Fever"),e.qZA(),e.TgZ(11,"li"),e._uU(12,"Cough"),e.qZA(),e.TgZ(13,"li"),e._uU(14,"Shortness of breath"),e.qZA(),e.TgZ(15,"li"),e._uU(16,"Chills"),e.qZA(),e.TgZ(17,"li"),e._uU(18,"Body aches"),e.qZA(),e.TgZ(19,"li"),e._uU(20,"Sore or scratchy throat"),e.qZA(),e.TgZ(21,"li"),e._uU(22,"Headache"),e.qZA(),e.TgZ(23,"li"),e._uU(24,"Runny nose"),e.qZA(),e.TgZ(25,"li"),e._uU(26,"Muscle pain"),e.qZA(),e.TgZ(27,"li"),e._uU(28,"Vomitting"),e.qZA(),e.TgZ(29,"li"),e._uU(30,"Nausea"),e.qZA(),e.TgZ(31,"li"),e._uU(32,"Diarrhoa"),e.qZA(),e.TgZ(33,"li"),e._uU(34,"Loss of taste or smell"),e.qZA()(),e.TgZ(35,"mat-radio-group",4),e.NdJ("ngModelChange",function(a){return n.symptoms=a}),e.TgZ(36,"mat-radio-button",5),e._uU(37,"Yes"),e.qZA(),e.TgZ(38,"mat-radio-button",6),e._uU(39,"No"),e.qZA()()(),e._UZ(40,"hr",7),e.TgZ(41,"li"),e._uU(42," Have you been in contact with a COVID-19 case in the last 14 days or been asked to self-isolate by a health offical?"),e._UZ(43,"br")(44,"br"),e.TgZ(45,"mat-radio-group",8),e.NdJ("ngModelChange",function(a){return n.contact=a}),e.TgZ(46,"mat-radio-button",5),e._uU(47,"Yes"),e.qZA(),e.TgZ(48,"mat-radio-button",6),e._uU(49,"No"),e.qZA()()()(),e.TgZ(50,"button",9),e.NdJ("click",function(){return n.confirm()}),e._uU(51,"Confirm"),e.qZA(),e.TgZ(52,"a",10)(53,"app-icon"),e._uU(54,"close"),e.qZA()()()),2&t&&(e.xp6(35),e.Q6J("ngModel",n.symptoms),e.xp6(10),e.Q6J("ngModel",n.contact),e.xp6(7),e.Q6J("routerLink",e.DdM(4,Xo)),e.uIk("disabled",!n.symptoms&&!n.contact))},dependencies:[d.JJ,d.On,x.o,v.lW,v.zs,Y.VQ,Y.U0,Z.yS],styles:["[_nghost-%COMP%]{position:absolute;display:flex;align-items:center;justify-content:center;inset:0;background-color:#00000080}[_nghost-%COMP%] > div[_ngcontent-%COMP%]{width:32rem;max-width:calc(100vw - 2rem);max-height:calc(100% - 2rem)}.absolute[_ngcontent-%COMP%]{position:absolute}button[_ngcontent-%COMP%]{margin:1rem 11rem 0;width:8rem}\n/*# sourceMappingURL=checkin-covid.component.ts-angular-inline--75.css.map*/"]}),i})();var ta=c(3925);const na=["app-checkin",""],ia=[{path:"",component:(()=>{class i{constructor(t){this._settings=t}get background(){return this._settings.get("app.home.background")}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(g.gb))},i.\u0275cmp=e.Xpm({type:i,selectors:[["","app-checkin",""]],attrs:na,decls:3,vars:2,consts:[[1,"w-full"],[1,"flex-1","w-full","bg-center","bg-cover","relative"]],template:function(t,n){1&t&&(e._UZ(0,"a-topbar-header",0),e.TgZ(1,"div",1),e._UZ(2,"router-outlet"),e.qZA()),2&t&&(e.xp6(1),e.Udp("background-image","url("+n.background+")"))},dependencies:[ta.B,Z.lC],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%;width:100%}\n/*# sourceMappingURL=checkin.component.ts-angular-inline--76.css.map*/"]}),i})(),children:[{path:"scan",component:Bo},{path:"details",component:gt},{path:"preferences",component:Do},{path:"photo",component:vt},{path:"results",component:jo},{path:"error",component:Ko},{path:"covid",component:ea},{path:"**",redirectTo:"scan"}]},{path:"**",redirectTo:""}];let oa=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[_.ez,d.u5,d.UX,ct.q,Z.Bz.forChild(ia)]}),i})()}}]);
//# sourceMappingURL=apps_visitor-kiosk_src_app_checkin_checkin_module_ts.js.map