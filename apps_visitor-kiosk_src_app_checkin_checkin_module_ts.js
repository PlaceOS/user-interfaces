"use strict";(self.webpackChunkvisitor_kiosk=self.webpackChunkvisitor_kiosk||[]).push([["apps_visitor-kiosk_src_app_checkin_checkin_module_ts"],{1212:(Co,Ot,l)=>{l.r(Ot),l.d(Ot,{VisitorCheckinModule:()=>vo});var _=l(316),m=l(4456),M=l(9805),ue=l(4658),h=l(9204),O=l(7871),u=l(2333),q=l(8390),he=l(9103),ge=l(4507);function fe(a){(0,ge.A)(1,arguments);var s=(0,he.A)(a);return s.setMinutes(0,0,0),s}var st=l(7450),vt=l(3838),be=l(6078),y=l(521),X=l(7915),ve=l(2168),t=l(8559);let $=(()=>{class a{constructor(){this._booking=new y.t(new X.Qr({asset_id:"jim@1234.com",asset_name:"Jim Jones",user_email:"alex@place.tech",user_name:"Alex Sorafumo",date:fe(Date.now()).valueOf(),duration:60,zones:["zone-Do2HJ00hTG"]})),this._guest=new y.t(null),this._photo=new y.t(""),this._error=new y.t(""),this._form=new y.t((0,q.Wq)()),this._space_pipe=new ve.Jm,this.event=this._booking.asObservable(),this.guest=this._guest.asObservable(),this.error=this._error.asObservable(),this.form=this._form.asObservable()}clear(){this._guest.next(null),this._booking.next(null),this._photo.next(null)}setPhoto(e){this._photo.next(e)}setError(e){this._error.next(e)}loadGuestAndEvent(e,n){var i=this;return(0,h.A)(function*(){const o=yield(0,q.qc)(e).toPromise();if(n){const p=yield(0,X.DO)(n).toPromise();return i._guest.next(o),i._booking.next(p),i._form.next((0,q.Wq)(o,p.user_email)),{guest:o,event:p}}if(o.booking)return i._guest.next(o),i._booking.next(o.booking),i._form.next((0,q.Wq)(o,o.booking.user_email)),{guest:o,event:o.booking};let r=yield(0,X.u3)({type:"visitor",period_start:(0,st.A)(Date.now()),period_end:(0,st.A)((0,vt.A)(Date.now(),120))}).toPromise();r=r.filter(p=>p.user_email===e||p.asset_id===e);const c=new Date,d=r.filter(p=>(0,be.A)(new Date(p.date),c));if(d.sort((p,g)=>p.date-g.date),d.length<=0)throw new Error(`No meetings for guest "${e}" today`);return i._guest.next(o),i._booking.next(d[0]),i._form.next((0,q.Wq)(o,d[0].user_email)),{guest:o,event:d[0]}})()}updateGuest(e){var n=this;return(0,h.A)(function*(){n._guest.getValue(),n._form.getValue()})()}completeInduction(){var e=this;return(0,h.A)(function*(){const n=e._guest.getValue(),i=e._booking.getValue()||n.extension_data.event;!n||!i||(yield(0,X.tl)(i.id,"inducted").toPromise())})()}declineInduction(){var e=this;return(0,h.A)(function*(){const n=e._guest.getValue(),i=e._booking.getValue()||n.extension_data.event;!n||!i||(yield(0,X.tl)(i.id,"declined_induction").toPromise())})()}checkinGuest(){var e=this;return(0,h.A)(function*(){const n=e._guest.getValue(),i=e._booking.getValue()||n.extension_data.event;n&&i&&(yield(0,X.Z$)(i.id,!0).toPromise().catch(function(){var r=(0,h.A)(function*(c){throw(0,u.UG)(c||`Error checking in ${n.name} for ${i.user_name||i.user_email}'s meeting.`),c});return function(c){return r.apply(this,arguments)}}()),(0,u.VX)(`Successfully checked in ${n.name} for ${i.user_name||i.user_email}'s meeting`))})()}printPass(){try{return new Promise(e=>setTimeout(()=>e(""),5e3))}catch{(0,u.UG)("Error printing visitor pass")}return Promise.reject()}static#t=this.\u0275fac=function(n){return new(n||a)};static#e=this.\u0275prov=t.jDH({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})();var x=l(9434),j=l(4950),v=l(5060),U=l(7984),G=l(1134);const Ce=["checkin-details",""],xe=()=>["/welcome"];function ye(a,s){if(1&a){const e=t.RV6();t.j41(0,"form",2),t.nI1(1,"async"),t.j41(2,"h3",3),t.EFF(3,"Confirm Details"),t.k0s(),t.j41(4,"div",4)(5,"label",5),t.EFF(6,"Host"),t.k0s(),t.j41(7,"mat-form-field",6),t.nrm(8,"input",7),t.j41(9,"mat-error"),t.EFF(10," The email address of your host is required "),t.k0s()()(),t.j41(11,"div",4)(12,"label",8),t.EFF(13,"Name"),t.k0s(),t.j41(14,"mat-form-field",6),t.nrm(15,"input",9),t.j41(16,"mat-error"),t.EFF(17,"Please enter your full name"),t.k0s()()(),t.j41(18,"div",4)(19,"label",10),t.EFF(20,"Email"),t.k0s(),t.j41(21,"mat-form-field",6),t.nrm(22,"input",11),t.j41(23,"mat-error"),t.EFF(24,"A valid email address is required"),t.k0s()()(),t.j41(25,"div",4)(26,"label",10),t.EFF(27,"Phone Number"),t.k0s(),t.j41(28,"mat-form-field",6),t.nrm(29,"input",12),t.k0s()(),t.j41(30,"div",4)(31,"label",13),t.EFF(32,"Organisation / Company"),t.k0s(),t.j41(33,"mat-form-field",6),t.nrm(34,"input",14),t.k0s()(),t.j41(35,"button",15),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.updateGuest())}),t.EFF(36,"Next"),t.k0s(),t.j41(37,"a",16)(38,"app-icon"),t.EFF(39,"close"),t.k0s()()()}if(2&a){const e=t.XpG();t.Y8G("formGroup",t.bMT(1,2,e.form)),t.R7$(37),t.Y8G("routerLink",t.lJ4(4,xe))}}function ke(a,s){1&a&&(t.j41(0,"div",17)(1,"div",18),t.nrm(2,"mat-spinner",19),t.j41(3,"div",20),t.EFF(4," Updating data and checking in... "),t.k0s()()()),2&a&&(t.R7$(2),t.Y8G("diameter",48))}let Ie=(()=>{class a{get induction_after_details(){return this._settings.get("app.induction_after_details")}constructor(e,n,i){this._checkin=e,this._router=n,this._settings=i,this.form=this._checkin.form,this.loading=!1}ngOnInit(){this.form.pipe((0,O.$)()).subscribe(e=>e&&e.value.email?"":this.previous())}updateGuest(){var e=this;return(0,h.A)(function*(){e.loading=!0,yield e._checkin.updateGuest(),yield e._checkin.checkinGuest()?.catch(n=>{throw e.loading=!1,n}),e.loading=!1,e._router.navigate(e.induction_after_details?["/checkin","induction"]:["/checkin","results"])})()}previous(){this._router.navigate(["/checkin","scan"])}static#t=this.\u0275fac=function(n){return new(n||a)(t.rXU($),t.rXU(M.Ix),t.rXU(u.h$))};static#e=this.\u0275cmp=t.VBU({type:a,selectors:[["","checkin-details",""]],attrs:Ce,decls:4,vars:4,consts:[["load_state",""],["class","bg-base-100 rounded shadow overflow-hidden relative flex flex-col items-center w-[36rem] p-4",3,"formGroup",4,"ngIf","ngIfElse"],[1,"bg-base-100","rounded","shadow","overflow-hidden","relative","flex","flex-col","items-center","w-[36rem]","p-4",3,"formGroup"],[1,"text-2xl","m-4"],["field","",1,"flex","flex-col"],["form","host"],["appearance","outline"],["matInput","","name","host","formControlName","host","placeholder","Host's Email Address"],["form","name"],["matInput","","name","name","formControlName","name","placeholder","Full Name"],["form","email"],["matInput","","name","email","formControlName","email","placeholder","Email Address"],["matInput","","name","phone","type","tel","formControlName","phone","placeholder","Phone Number"],["form","org"],["matInput","","name","org","formControlName","organisation","placeholder","Organisation / Company"],["next","","btn","","matRipple","",3,"click"],["icon","","matRipple","",1,"absolute","top-0","right-0",3,"routerLink"],[1,"absolute","inset-0","flex","flex-col","items-center","justify-center"],[1,"flex","flex-col","items-center","space-y-2","bg-base-100","rounded","shadow","p-16"],[3,"diameter"],[1,"my-4","text-lg"]],template:function(n,i){if(1&n&&(t.DNE(0,ye,40,5,"form",1),t.nI1(1,"async"),t.DNE(2,ke,5,1,"ng-template",null,0,t.C5r)),2&n){const o=t.sdS(3);t.Y8G("ngIf",t.bMT(1,2,i.form)&&!i.loading)("ngIfElse",o)}},dependencies:[_.bT,m.qT,m.me,m.BC,m.cb,m.j4,m.JD,x.R,j.rl,j.TL,v.r6,U.fg,G.LG,M.Wk,_.Jj],styles:["form[_ngcontent-%COMP%]{width:32rem;max-width:calc(100vw - 2rem)}[field][_ngcontent-%COMP%]{width:calc(100% - 2rem)}button[_ngcontent-%COMP%]{margin-bottom:1rem;width:8rem}\n\n/*# sourceMappingURL=checkin-details.component.ts-angular-inline--84.css.map*/"]})}return a})();var Te=l(9536);const Me=()=>["/welcome"];function Fe(a,s){if(1&a){const e=t.RV6();t.j41(0,"div",2)(1,"h3",3),t.EFF(2,"Take a photo to continue"),t.k0s(),t.j41(3,"a-take-photo",4),t.bIt("photoAccepted",function(i){t.eBV(e);const o=t.XpG();return t.Njj(o.handlePhoto(i))}),t.k0s(),t.j41(4,"a",5)(5,"app-icon"),t.EFF(6,"close"),t.k0s()()()}2&a&&(t.R7$(4),t.Y8G("routerLink",t.lJ4(1,Me)))}function Re(a,s){1&a&&(t.j41(0,"div",6),t.nrm(1,"mat-spinner",7),t.j41(2,"div",8),t.EFF(3," Printing guest pass... "),t.k0s()()),2&a&&(t.R7$(),t.Y8G("diameter",48))}let we=(()=>{class a{constructor(e,n){this._checkin=e,this._router=n}handlePhoto(e){var n=this;return(0,h.A)(function*(){if(!e)return(0,u.UG)("Error saving image, please try again");n.loading=!0,n._checkin.setPhoto(e),yield n._checkin.printPass().catch(i=>{throw n.loading=!1,(0,u.UG)(i),i}),n.loading=!1,n._router.navigate(["/checkin","results"])})()}static#t=this.\u0275fac=function(n){return new(n||a)(t.rXU($),t.rXU(M.Ix))};static#e=this.\u0275cmp=t.VBU({type:a,selectors:[["checkin-photo"]],decls:3,vars:2,consts:[["load_state",""],["class","bg-base-100 rounded shadow overflow-hidden relative flex flex-col items-center p-4",4,"ngIf","ngIfElse"],[1,"bg-base-100","rounded","shadow","overflow-hidden","relative","flex","flex-col","items-center","p-4"],[1,"text-xl","mb-4"],[3,"photoAccepted"],["icon","","matRipple","",1,"absolute","top-0","right-0",3,"routerLink"],[1,"flex","flex-col","items-center","m-auto"],[3,"diameter"],[1,"my-4","text-lg","text-white"]],template:function(n,i){if(1&n&&t.DNE(0,Fe,7,2,"div",1)(1,Re,4,1,"ng-template",null,0,t.C5r),2&n){const o=t.sdS(2);t.Y8G("ngIf",!i.loading)("ngIfElse",o)}},dependencies:[_.bT,x.R,v.r6,G.LG,Te.J,M.Wk],styles:["[_nghost-%COMP%]{position:absolute;display:flex;align-items:center;justify-content:center;inset:0;background-color:#00000080}.absolute[_ngcontent-%COMP%]{position:absolute}\n\n/*# sourceMappingURL=checkin-photo.component.ts-angular-inline--85.css.map*/"]})}return a})();l(3046),l(3653);var Y=l(4879),F=l(2587),k=l(5892),ct=l(9771),A=l(7024),lt=l(2772),Ct=l(5507),Ee=l(6864);const K=()=>({standalone:!0});function je(a,s){1&a&&(t.j41(0,"button",9)(1,"app-icon"),t.EFF(2,"close"),t.k0s()())}function Oe(a,s){if(1&a&&(t.j41(0,"div",20)(1,"label",21),t.EFF(2," Name"),t.j41(3,"span"),t.EFF(4,"*"),t.k0s(),t.EFF(5,": "),t.k0s(),t.j41(6,"mat-form-field",22),t.nrm(7,"input",23),t.j41(8,"mat-error"),t.EFF(9,"Name is required"),t.k0s()()()),2&a){const e=t.XpG(2);t.R7$(),t.AVh("error",e.form.controls.name.invalid&&e.form.controls.name.touched)}}function Ge(a,s){if(1&a&&(t.j41(0,"div",20)(1,"label",24),t.EFF(2," Category"),t.j41(3,"span"),t.EFF(4,"*"),t.k0s(),t.EFF(5,": "),t.k0s(),t.j41(6,"mat-form-field",22),t.nrm(7,"input",25),t.j41(8,"mat-error"),t.EFF(9,"Category is required"),t.k0s()()()),2&a){const e=t.XpG(2),n=t.sdS(9);t.R7$(),t.AVh("error",e.form.controls.category.invalid&&e.form.controls.category.touched),t.R7$(6),t.Y8G("matAutocomplete",n)}}function De(a,s){if(1&a){const e=t.RV6();t.j41(0,"mat-chip-row",30),t.bIt("removed",function(){const i=t.eBV(e).$implicit,o=t.XpG(3);return t.Njj(o.removeTag(i))}),t.EFF(1),t.j41(2,"button",31)(3,"app-icon"),t.EFF(4,"cancel"),t.k0s()()()}if(2&a){const e=s.$implicit;t.R7$(),t.SpI(" ",e," "),t.R7$(),t.BMQ("aria-label","Remove "+e)}}function $e(a,s){if(1&a){const e=t.RV6();t.j41(0,"div",20)(1,"label",26),t.pXf(2,3),t.k0s(),t.j41(3,"mat-form-field",22)(4,"mat-chip-grid",27,2),t.DNE(6,De,5,2,"mat-chip-row",28),t.k0s(),t.j41(7,"input",29),t.bIt("matChipInputTokenEnd",function(i){t.eBV(e);const o=t.XpG(2);return t.Njj(o.addTag(i))}),t.k0s()()()}if(2&a){const e=t.sdS(5),n=t.XpG(2);t.R7$(),t.AVh("error",n.form.controls.tags.invalid&&n.form.controls.tags.touched),t.R7$(5),t.Y8G("ngForOf",n.tag_list),t.R7$(),t.Y8G("matChipInputFor",e)("matChipInputSeparatorKeyCodes",n.separators)("matChipInputAddOnBlur",!0)}}function Se(a,s){1&a&&(t.j41(0,"div",20)(1,"label",32),t.EFF(2,"Description:"),t.k0s(),t.j41(3,"mat-form-field",22),t.nrm(4,"textarea",33),t.k0s()())}function Ne(a,s){if(1&a&&(t.j41(0,"div",20)(1,"label",21),t.EFF(2," Unit Price"),t.j41(3,"span"),t.EFF(4,"*"),t.k0s(),t.EFF(5,": "),t.k0s(),t.j41(6,"mat-form-field",22),t.nrm(7,"input",34),t.j41(8,"mat-error"),t.EFF(9,"Unit Price is required"),t.k0s()()()),2&a){const e=t.XpG(2);t.R7$(),t.AVh("error",e.form.controls.unit_price.invalid&&e.form.controls.unit_price.touched)}}function Ae(a,s){1&a&&(t.j41(0,"div",20)(1,"label",35),t.pXf(2,4),t.k0s(),t.nrm(3,"image-list-field",36),t.k0s())}function Le(a,s){if(1&a){const e=t.RV6();t.j41(0,"form",10)(1,"div",11),t.DNE(2,Oe,10,2,"div",12)(3,Ge,10,3,"div",12),t.k0s(),t.DNE(4,$e,8,6,"div",12)(5,Se,5,0,"div",12)(6,Ne,10,2,"div",12),t.j41(7,"div",13)(8,"label",14),t.EFF(9,"Accept Points?"),t.k0s(),t.j41(10,"mat-checkbox",15),t.EFF(11),t.k0s()(),t.j41(12,"div",16)(13,"mat-checkbox",17),t.bIt("ngModelChange",function(i){t.eBV(e);const o=t.XpG();return t.Njj(i?o.addTag({value:"Gluten Free"}):o.removeTag("Gluten Free"))}),t.EFF(14," Gluten Free (GF) "),t.k0s(),t.j41(15,"mat-checkbox",17),t.bIt("ngModelChange",function(i){t.eBV(e);const o=t.XpG();return t.Njj(i?o.addTag({value:"Vegan"}):o.removeTag("Vegan"))}),t.EFF(16," Vegan (VG) "),t.k0s(),t.j41(17,"mat-checkbox",17),t.bIt("ngModelChange",function(i){t.eBV(e);const o=t.XpG();return t.Njj(i?o.addTag({value:"Vegetarian"}):o.removeTag("Vegetarian"))}),t.EFF(18," Vegetarian (V) "),t.k0s(),t.j41(19,"mat-checkbox",17),t.bIt("ngModelChange",function(i){t.eBV(e);const o=t.XpG();return t.Njj(i?o.addTag({value:"Contains Dairy"}):o.removeTag("Contains Dairy"))}),t.EFF(20," Contains Dairy (D) "),t.k0s(),t.j41(21,"mat-checkbox",17),t.bIt("ngModelChange",function(i){t.eBV(e);const o=t.XpG();return t.Njj(i?o.addTag({value:"Contains Nuts"}):o.removeTag("Contains Nuts"))}),t.EFF(22," Contains Nuts (N) "),t.k0s()(),t.j41(23,"div",13)(24,"label",18),t.EFF(25,"Discount Cap"),t.k0s(),t.nrm(26,"a-counter",19),t.k0s(),t.DNE(27,Ae,4,0,"div",12),t.k0s()}if(2&a){let e;const n=t.XpG();t.Y8G("formGroup",n.form),t.R7$(2),t.Y8G("ngIf",n.form.controls.name),t.R7$(),t.Y8G("ngIf",n.form.controls.category),t.R7$(),t.Y8G("ngIf",n.form.controls.tags),t.R7$(),t.Y8G("ngIf",n.form.controls.description),t.R7$(),t.Y8G("ngIf",n.form.controls.unit_price),t.R7$(5),t.JRh(null!=(e=n.form.get("accept_points"))&&e.value?"No":"Yes"),t.R7$(2),t.Y8G("ngModel",n.hasTag("Gluten Free"))("ngModelOptions",t.lJ4(22,K)),t.R7$(2),t.Y8G("ngModel",n.hasTag("Vegan"))("ngModelOptions",t.lJ4(23,K)),t.R7$(2),t.Y8G("ngModel",n.hasTag("Vegetarian"))("ngModelOptions",t.lJ4(24,K)),t.R7$(2),t.Y8G("ngModel",n.hasTag("Contains Dairy"))("ngModelOptions",t.lJ4(25,K)),t.R7$(2),t.Y8G("ngModel",n.hasTag("Contains Nuts"))("ngModelOptions",t.lJ4(26,K)),t.R7$(5),t.Y8G("min",0)("max",100)("step",5)("render_fn",n.renderPercent),t.R7$(),t.Y8G("ngIf",n.form.controls.images)}}function Be(a,s){if(1&a){const e=t.RV6();t.j41(0,"footer",37)(1,"button",38),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.saveChanges())}),t.EFF(2," Save "),t.k0s()()}if(2&a){const e=t.XpG();t.R7$(),t.Y8G("disabled",!e.form.dirty)}}function Ve(a,s){1&a&&(t.j41(0,"div",39),t.nrm(1,"mat-spinner",40),t.j41(2,"p"),t.EFF(3,"Saving catering item..."),t.k0s()())}function Pe(a,s){if(1&a&&(t.j41(0,"mat-option",41),t.EFF(1),t.k0s()),2&a){const e=s.$implicit;t.Y8G("value",e),t.R7$(),t.SpI(" ",e," ")}}let Gt=(()=>{class a{get item(){return this._data.item||new k.T}get categories(){return this._data.categories||[]}get tag_list(){return this.form.controls.tags.value}renderPercent(e=0){return`${e}%`}hasTag(e){return this.tag_list.includes(e)}constructor(e){this._data=e,this.event=new t.bkB,this.form=new m.gE({name:new m.MJ(this.item.name||"",[m.k0.required]),description:new m.MJ(this.item.description||""),category:new m.MJ(this.item.category||"",[m.k0.required]),unit_price:new m.MJ(this.item.unit_price,[m.k0.required]),tags:new m.MJ(this.item.tags||[]),accept_points:new m.MJ(this.item.accept_points||!1),discount_cap:new m.MJ(this.item.discount_cap||0),images:new m.MJ(this.item.images||[])}),this.loading=!1,this.separators=[Y.Fm,Y.KE,Y.t6]}addTag(e){if(!this.form||!this.form.controls.tags)return;this.form.controls.tags.markAsDirty();const n=e.input,i=e.value,o=this.tag_list;(i||"").trim()&&(o.push(i),this.form.controls.tags.setValue(o)),n&&(n.value="")}removeTag(e){if(!this.form||!this.form.controls.tags)return;const n=this.tag_list;this.form.controls.tags.markAsDirty();const i=n.indexOf(e);i>=0&&(n.splice(i,1),this.form.controls.tags.setValue(n))}saveChanges(){this.loading=!0,this.event.emit({reason:"done",metadata:{item:new k.T({...this.item,id:this.item.id||`item-${(0,u.HO)(99999999)}`,...this.form.value})}})}static#t=this.\u0275fac=function(n){return new(n||a)(t.rXU(F.Vh))};static#e=this.\u0275cmp=t.VBU({type:a,selectors:[["catering-item-modal"]],outputs:{event:"event"},decls:11,vars:6,consts:()=>{let e,n,i;return e=$localize`:@@zoneTagsPlaceholder␟c133beffffe3288bbdbf8572a32910c33ce14991␟2194594490376201833:Item tags e.g. Gluten Free, Vegan etc.`,n=$localize`:@@tagsLabel␟800ffadd463cfe152c5af3fa9f13803ab2e77b93␟4746186018558508280: Tags: `,i=$localize`:@@imagesLabel␟e5d9e00faa06714d7671b164cad364b26f4c585b␟5137125764814732349:Images:`,[["load_state",""],["auto","matAutocomplete"],["chipList",""],n,i,["icon","","matRipple","","mat-dialog-close","",4,"ngIf"],["class","p-4 overflow-auto max-h-[65vh]",3,"formGroup",4,"ngIf","ngIfElse"],["class","flex p-2 items-center justify-center border-t border-solid border-base-200",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],["icon","","matRipple","","mat-dialog-close",""],[1,"p-4","overflow-auto","max-h-[65vh]",3,"formGroup"],[1,"flex","items-center","space-x-2"],["class","flex flex-col",4,"ngIf"],[1,"flex","items-center"],[1,"flex-none","w-28","min-w-0"],["formControlName","accept_points"],["list","",1,"flex","items-center","flex-wrap","max-w-lg"],[3,"ngModelChange","ngModel","ngModelOptions"],[1,"flex-1","w-24","min-w-0"],["formControlName","discount_cap",1,"border","border-base-200","rounded",3,"min","max","step","render_fn"],[1,"flex","flex-col"],["for","title"],["appearance","outline"],["matInput","","name","name","placeholder","Item name","formControlName","name"],["for","category"],["matInput","","name","category","placeholder","Category","formControlName","category",3,"matAutocomplete"],["for","tags"],["aria-label","Item Tags"],[3,"removed",4,"ngFor","ngForOf"],["name","tags","placeholder",e,3,"matChipInputTokenEnd","matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputAddOnBlur"],[3,"removed"],["matChipRemove",""],["for","description"],["matInput","","name","description","placeholder","Item Description","formControlName","description"],["matInput","","name","unit-price","type","number","placeholder","Unit Price","formControlName","unit_price"],["for","images"],["name","images","formControlName","images"],[1,"flex","p-2","items-center","justify-center","border-t","border-solid","border-base-200"],["btn","","matRipple","",3,"click","disabled"],[1,"flex","flex-col","items-center","p-8","space-y-2","w-64"],["diameter","32"],[3,"value"]]},template:function(n,i){if(1&n&&(t.j41(0,"header")(1,"h3"),t.EFF(2),t.k0s(),t.DNE(3,je,3,0,"button",5),t.k0s(),t.DNE(4,Le,28,27,"form",6)(5,Be,3,1,"footer",7)(6,Ve,4,0,"ng-template",null,0,t.C5r),t.j41(8,"mat-autocomplete",null,1),t.DNE(10,Pe,2,2,"mat-option",8),t.k0s()),2&n){const o=t.sdS(7);t.R7$(2),t.SpI("",i.item.id?"Edit":"Add"," Item"),t.R7$(),t.Y8G("ngIf",!i.loading),t.R7$(),t.Y8G("ngIf",i.form&&!i.loading)("ngIfElse",o),t.R7$(),t.Y8G("ngIf",!i.loading),t.R7$(5),t.Y8G("ngForOf",i.categories)}},dependencies:[_.Sq,_.bT,ct.$3,v.wT,ct.pN,F.tx,A.So,m.qT,m.me,m.Q0,m.BC,m.cb,m.vS,m.j4,m.JD,x.R,j.rl,j.TL,v.r6,U.fg,G.LG,lt.HW,lt.D7,lt.Zv,lt.jH,Ct.s,Ee.$],styles:["[list][_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]{margin:.5rem}\n\n/*# sourceMappingURL=catering-item-modal.component.ts-angular-inline--86.css.map*/"]})}return a})();var D=l(6484),H=l(2175),z=l(1536),tt=l(8627),W=l(1963),et=l(9314),I=l(5443),dt=l(6e3),nt=l(7841),L=l(3602),B=l(2185),Dt=l(4217);function Xe(a,s){1&a&&(t.j41(0,"button",6)(1,"app-icon"),t.EFF(2,"close"),t.k0s()())}function Ue(a,s){if(1&a&&(t.j41(0,"div",9)(1,"label",10),t.EFF(2," Name"),t.j41(3,"span"),t.EFF(4,"*"),t.k0s(),t.EFF(5,": "),t.k0s(),t.j41(6,"mat-form-field",11),t.nrm(7,"input",12),t.j41(8,"mat-error"),t.EFF(9,"Name is required"),t.k0s()()()),2&a){const e=t.XpG(2);t.R7$(),t.AVh("error",e.form.controls.name.invalid&&e.form.controls.name.touched)}}function Ye(a,s){if(1&a&&(t.j41(0,"div",9)(1,"label",13),t.EFF(2," Type"),t.j41(3,"span"),t.EFF(4,"*"),t.k0s(),t.EFF(5,": "),t.k0s(),t.j41(6,"mat-form-field",11),t.nrm(7,"input",14),t.j41(8,"mat-error"),t.EFF(9,"Type is required"),t.k0s()()()),2&a){const e=t.XpG(2),n=t.sdS(9);t.R7$(),t.AVh("error",e.form.controls.group.invalid&&e.form.controls.group.touched),t.R7$(6),t.Y8G("matAutocomplete",n)}}function He(a,s){1&a&&(t.j41(0,"div",9)(1,"label",10),t.EFF(2,"Unit Price:"),t.k0s(),t.j41(3,"mat-form-field",11),t.nrm(4,"input",15),t.k0s()())}function ze(a,s){1&a&&(t.j41(0,"div",9)(1,"mat-checkbox",16),t.EFF(2," Can select multiple of type "),t.k0s()())}function We(a,s){if(1&a&&(t.j41(0,"form",7),t.DNE(1,Ue,10,2,"div",8)(2,Ye,10,3,"div",8)(3,He,5,0,"div",8)(4,ze,3,0,"div",8),t.k0s()),2&a){const e=t.XpG();t.Y8G("formGroup",e.form),t.R7$(),t.Y8G("ngIf",e.form.controls.name),t.R7$(),t.Y8G("ngIf",e.form.controls.group),t.R7$(),t.Y8G("ngIf",e.form.controls.unit_price),t.R7$(),t.Y8G("ngIf",e.form.controls.multiple)}}function Qe(a,s){if(1&a){const e=t.RV6();t.j41(0,"footer",17)(1,"button",18),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.saveChanges())}),t.EFF(2," Save "),t.k0s()()}if(2&a){const e=t.XpG();t.R7$(),t.Y8G("disabled",!e.form.dirty)}}function Je(a,s){1&a&&(t.j41(0,"div",19),t.nrm(1,"mat-spinner",20),t.j41(2,"p"),t.EFF(3,"Saving catering item option..."),t.k0s()())}function Ze(a,s){if(1&a&&(t.j41(0,"mat-option",21),t.EFF(1),t.k0s()),2&a){const e=s.$implicit;t.Y8G("value",e),t.R7$(),t.SpI(" ",e," ")}}let $t=(()=>{class a{get option(){return this._data.option}get types(){return this._data.types||[]}constructor(e){this._data=e,this.event=new t.bkB,this.form=new m.gE({name:new m.MJ(this.option.name||"",[m.k0.required]),group:new m.MJ(this.option.group||"",[m.k0.required]),unit_price:new m.MJ(this.option.unit_price),multiple:new m.MJ(!!this.option.multiple,[])}),this.loading=!1}saveChanges(){this.loading=!0;const e={...this.option,id:this.option.id||`option-${(0,Dt.HO)(99999999)}`,...this.form.value};this.event.emit({reason:"done",metadata:{item:new k.T({...this._data.parent,options:this._data.parent.options.filter(n=>n.id!==e.id).concat([e])})}})}static#t=this.\u0275fac=function(n){return new(n||a)(t.rXU(F.Vh))};static#e=this.\u0275cmp=t.VBU({type:a,selectors:[["catering-option-modal"]],outputs:{event:"event"},decls:11,vars:6,consts:[["load_state",""],["auto","matAutocomplete"],["icon","","mat-dialog-close","",4,"ngIf"],["class","p-4 overflow-auto max-h-[65vh]",3,"formGroup",4,"ngIf","ngIfElse"],["class","flex p-2 items-center justify-center border-t border-solid border-base-200",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],["icon","","mat-dialog-close",""],[1,"p-4","overflow-auto","max-h-[65vh]",3,"formGroup"],["class","flex flex-col",4,"ngIf"],[1,"flex","flex-col"],["for","title"],["appearance","outline"],["matInput","","name","name","placeholder","Item name","formControlName","name"],["for","group"],["matInput","","name","group","placeholder","Type of option e.g. Number of sugars","formControlName","group",3,"matAutocomplete"],["matInput","","name","unit-price","type","number","placeholder","Unit Price","formControlName","unit_price"],["name","multiple","formControlName","multiple"],[1,"flex","p-2","items-center","justify-center","border-t","border-solid","border-base-200"],["btn","","matRipple","",3,"click","disabled"],["loading","",1,"flex","flex-col","items-center","p-8","space-y-2","w-64"],["diameter","32"],[3,"value"]],template:function(n,i){if(1&n&&(t.j41(0,"header")(1,"h3"),t.EFF(2),t.k0s(),t.DNE(3,Xe,3,0,"button",2),t.k0s(),t.DNE(4,We,5,5,"form",3)(5,Qe,3,1,"footer",4)(6,Je,4,0,"ng-template",null,0,t.C5r),t.j41(8,"mat-autocomplete",null,1),t.DNE(10,Ze,2,2,"mat-option",5),t.k0s()),2&n){const o=t.sdS(7);t.R7$(2),t.SpI("",i.option.id?"Edit":"Add"," Item Option"),t.R7$(),t.Y8G("ngIf",!i.loading),t.R7$(),t.Y8G("ngIf",i.form&&!i.loading)("ngIfElse",o),t.R7$(),t.Y8G("ngIf",!i.loading),t.R7$(5),t.Y8G("ngForOf",i.types)}},dependencies:[_.Sq,_.bT,ct.$3,v.wT,ct.pN,F.tx,A.So,m.qT,m.me,m.Q0,m.BC,m.cb,m.j4,m.JD,x.R,j.rl,j.TL,v.r6,U.fg,G.LG]})}return a})();var qe=l(8030),R=l(5555),St=l(2561),Nt=l(2611),At=l(5220),Lt=l(2121);function Bt(a,s,e){let n=!0;for(const i of s)if(a.category===i.name||a.tags.includes(i.name)||e.resources.find(o=>o.zones.includes(i.name))||e.space?.zones.includes(i.name)||"*"===i.name){let o=0;for(const r of i.rules){const c=new Date(e.date);switch(r[0]){case"is_before":o+=(0,St.A)(Date.now(),(0,Nt.A)(c,r[1]))?1:0;break;case"within_hours":o+=(0,At.A)(Date.now(),(0,Nt.A)(c,r[1]))?1:0;break;case"after_hour":o+=(0,At.A)(c,(0,Lt.A)(c,r[1]))?1:0;break;case"before_hour":o+=(0,St.A)(c,(0,Lt.A)(c,r[1]))?1:0;break;case"min_length":o+=e.duration>=(0,u.II)(r[1])?1:0;break;case"max_length":o+=e.duration<=(0,u.II)(r[1])?1:0;break;case"visitor_type":o+=e.ext("visitor_type")===r[1]?1:0;break;default:o+=1}}n=o>=i.rules.length}return n}var it=l(9168),mt=l(3119),yt=l(7557),kt=l(7405),tn=l(4380),en=l(434),nn=l(3340),at=l(2672),It=l(4053),_t=l(7699),Tt=l(3680),Vt=l(2102),an=l(8615),V=l(7464),Pt=l(9803),pt=l(9273),on=l(1314),rn=l(6109),sn=l(9539),w=l(7172);const Mt=["*"];function cn(a,s){1&a&&t.SdG(0)}const ln=["tabListContainer"],dn=["tabList"],mn=["tabListInner"],_n=["nextPaginator"],pn=["previousPaginator"],un=a=>({animationDuration:a}),hn=(a,s)=>({value:a,params:s});function gn(a,s){}const fn=["tabBodyWrapper"],bn=["tabHeader"];function vn(a,s){}function Cn(a,s){if(1&a&&t.DNE(0,vn,0,0,"ng-template",12),2&a){const e=t.XpG().$implicit;t.Y8G("cdkPortalOutlet",e.templateLabel)}}function xn(a,s){if(1&a&&t.EFF(0),2&a){const e=t.XpG().$implicit;t.JRh(e.textLabel)}}function yn(a,s){if(1&a){const e=t.RV6();t.j41(0,"div",7,2),t.bIt("click",function(){const i=t.eBV(e),o=i.$implicit,r=i.$index,c=t.XpG(),d=t.sdS(1);return t.Njj(c._handleClick(o,d,r))})("cdkFocusChange",function(i){const o=t.eBV(e).$index,r=t.XpG();return t.Njj(r._tabFocusChanged(i,o))}),t.nrm(2,"span",8)(3,"div",9),t.j41(4,"span",10)(5,"span",11),t.DNE(6,Cn,1,1,null,12)(7,xn,1,1),t.k0s()()()}if(2&a){const e=s.$implicit,n=s.$index,i=t.sdS(1),o=t.XpG();t.HbH(e.labelClass),t.AVh("mdc-tab--active",o.selectedIndex===n),t.Y8G("id",o._getTabLabelId(n))("disabled",e.disabled)("fitInkBarToContent",o.fitInkBarToContent),t.BMQ("tabIndex",o._getTabIndex(n))("aria-posinset",n+1)("aria-setsize",o._tabs.length)("aria-controls",o._getTabContentId(n))("aria-selected",o.selectedIndex===n)("aria-label",e.ariaLabel||null)("aria-labelledby",!e.ariaLabel&&e.ariaLabelledby?e.ariaLabelledby:null),t.R7$(3),t.Y8G("matRippleTrigger",i)("matRippleDisabled",e.disabled||o.disableRipple),t.R7$(3),t.vxM(e.templateLabel?6:7)}}function kn(a,s){1&a&&t.SdG(0)}function In(a,s){if(1&a){const e=t.RV6();t.j41(0,"mat-tab-body",13),t.bIt("_onCentered",function(){t.eBV(e);const i=t.XpG();return t.Njj(i._removeTabBodyWrapperHeight())})("_onCentering",function(i){t.eBV(e);const o=t.XpG();return t.Njj(o._setTabBodyWrapperHeight(i))}),t.k0s()}if(2&a){const e=s.$implicit,n=s.$index,i=t.XpG();t.HbH(e.bodyClass),t.AVh("mat-mdc-tab-body-active",i.selectedIndex===n),t.Y8G("id",i._getTabContentId(n))("content",e.content)("position",e.position)("origin",e.origin)("animationDuration",i.animationDuration)("preserveContent",i.preserveContent),t.BMQ("tabindex",null!=i.contentTabIndex&&i.selectedIndex===n?i.contentTabIndex:null)("aria-labelledby",i._getTabLabelId(n))("aria-hidden",i.selectedIndex!==n)}}const Tn=new t.nKC("MatTabContent");let Mn=(()=>{class a{constructor(e){this.template=e}static#t=this.\u0275fac=function(n){return new(n||a)(t.rXU(t.C4Q))};static#e=this.\u0275dir=t.FsC({type:a,selectors:[["","matTabContent",""]],standalone:!0,features:[t.Jv_([{provide:Tn,useExisting:a}])]})}return a})();const Fn=new t.nKC("MatTabLabel"),Xt=new t.nKC("MAT_TAB");let Rn=(()=>{class a extends it.bV{constructor(e,n,i){super(e,n),this._closestTab=i}static#t=this.\u0275fac=function(n){return new(n||a)(t.rXU(t.C4Q),t.rXU(t.c1b),t.rXU(Xt,8))};static#e=this.\u0275dir=t.FsC({type:a,selectors:[["","mat-tab-label",""],["","matTabLabel",""]],standalone:!0,features:[t.Jv_([{provide:Fn,useExisting:a}]),t.Vt3]})}return a})();const Ut=new t.nKC("MAT_TAB_GROUP");let Ft=(()=>{class a{get templateLabel(){return this._templateLabel}set templateLabel(e){this._setTemplateLabelInput(e)}get content(){return this._contentPortal}constructor(e,n){this._viewContainerRef=e,this._closestTabGroup=n,this.disabled=!1,this._explicitContent=void 0,this.textLabel="",this._contentPortal=null,this._stateChanges=new mt.B7,this.position=null,this.origin=null,this.isActive=!1}ngOnChanges(e){(e.hasOwnProperty("textLabel")||e.hasOwnProperty("disabled"))&&this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}ngOnInit(){this._contentPortal=new it.VA(this._explicitContent||this._implicitContent,this._viewContainerRef)}_setTemplateLabelInput(e){e&&e._closestTab===this&&(this._templateLabel=e)}static#t=this.\u0275fac=function(n){return new(n||a)(t.rXU(t.c1b),t.rXU(Ut,8))};static#e=this.\u0275cmp=t.VBU({type:a,selectors:[["mat-tab"]],contentQueries:function(n,i,o){if(1&n&&(t.wni(o,Rn,5),t.wni(o,Mn,7,t.C4Q)),2&n){let r;t.mGM(r=t.lsd())&&(i.templateLabel=r.first),t.mGM(r=t.lsd())&&(i._explicitContent=r.first)}},viewQuery:function(n,i){if(1&n&&t.GBs(t.C4Q,7),2&n){let o;t.mGM(o=t.lsd())&&(i._implicitContent=o.first)}},hostAttrs:["hidden",""],inputs:{disabled:[2,"disabled","disabled",t.L39],textLabel:[0,"label","textLabel"],ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],labelClass:"labelClass",bodyClass:"bodyClass"},exportAs:["matTab"],standalone:!0,features:[t.Jv_([{provide:Xt,useExisting:a}]),t.GFd,t.OA$,t.aNF],ngContentSelectors:Mt,decls:1,vars:0,template:function(n,i){1&n&&(t.NAR(),t.DNE(0,cn,1,0,"ng-template"))},encapsulation:2})}return a})();const Rt="mdc-tab-indicator--active",Yt="mdc-tab-indicator--no-transition";class wn{constructor(s){this._items=s}hide(){this._items.forEach(s=>s.deactivateInkBar())}alignToElement(s){const e=this._items.find(i=>i.elementRef.nativeElement===s),n=this._currentItem;if(e!==n&&(n?.deactivateInkBar(),e)){const i=n?.elementRef.nativeElement.getBoundingClientRect?.();e.activateInkBar(i),this._currentItem=e}}}let En=(()=>{class a{constructor(){this._elementRef=(0,t.WQX)(t.aKT),this._fitToContent=!1}get fitInkBarToContent(){return this._fitToContent}set fitInkBarToContent(e){this._fitToContent!==e&&(this._fitToContent=e,this._inkBarElement&&this._appendInkBarElement())}activateInkBar(e){const n=this._elementRef.nativeElement;if(!e||!n.getBoundingClientRect||!this._inkBarContentElement)return void n.classList.add(Rt);const i=n.getBoundingClientRect(),o=e.width/i.width,r=e.left-i.left;n.classList.add(Yt),this._inkBarContentElement.style.setProperty("transform",`translateX(${r}px) scaleX(${o})`),n.getBoundingClientRect(),n.classList.remove(Yt),n.classList.add(Rt),this._inkBarContentElement.style.setProperty("transform","")}deactivateInkBar(){this._elementRef.nativeElement.classList.remove(Rt)}ngOnInit(){this._createInkBarElement()}ngOnDestroy(){this._inkBarElement?.remove(),this._inkBarElement=this._inkBarContentElement=null}_createInkBarElement(){const e=this._elementRef.nativeElement.ownerDocument||document,n=this._inkBarElement=e.createElement("span"),i=this._inkBarContentElement=e.createElement("span");n.className="mdc-tab-indicator",i.className="mdc-tab-indicator__content mdc-tab-indicator__content--underline",n.appendChild(this._inkBarContentElement),this._appendInkBarElement()}_appendInkBarElement(){(this._fitToContent?this._elementRef.nativeElement.querySelector(".mdc-tab__content"):this._elementRef.nativeElement).appendChild(this._inkBarElement)}static#t=this.\u0275fac=function(n){return new(n||a)};static#e=this.\u0275dir=t.FsC({type:a,inputs:{fitInkBarToContent:[2,"fitInkBarToContent","fitInkBarToContent",t.L39]},features:[t.GFd]})}return a})(),Ht=(()=>{class a extends En{constructor(e){super(),this.elementRef=e,this.disabled=!1}focus(){this.elementRef.nativeElement.focus()}getOffsetLeft(){return this.elementRef.nativeElement.offsetLeft}getOffsetWidth(){return this.elementRef.nativeElement.offsetWidth}static#t=this.\u0275fac=function(n){return new(n||a)(t.rXU(t.aKT))};static#e=this.\u0275dir=t.FsC({type:a,selectors:[["","matTabLabelWrapper",""]],hostVars:3,hostBindings:function(n,i){2&n&&(t.BMQ("aria-disabled",!!i.disabled),t.AVh("mat-mdc-tab-disabled",i.disabled))},inputs:{disabled:[2,"disabled","disabled",t.L39]},standalone:!0,features:[t.GFd,t.Vt3]})}return a})();const zt=(0,_t.BQ)({passive:!0});let Dn=(()=>{class a{get selectedIndex(){return this._selectedIndex}set selectedIndex(e){const n=isNaN(e)?0:e;this._selectedIndex!=n&&(this._selectedIndexChanged=!0,this._selectedIndex=n,this._keyManager&&this._keyManager.updateActiveItem(n))}constructor(e,n,i,o,r,c,d){this._elementRef=e,this._changeDetectorRef=n,this._viewportRuler=i,this._dir=o,this._ngZone=r,this._platform=c,this._animationMode=d,this._scrollDistance=0,this._selectedIndexChanged=!1,this._destroyed=new mt.B7,this._showPaginationControls=!1,this._disableScrollAfter=!0,this._disableScrollBefore=!0,this._stopScrolling=new mt.B7,this.disablePagination=!1,this._selectedIndex=0,this.selectFocusedIndex=new t.bkB,this.indexFocused=new t.bkB,this._sharedResizeObserver=(0,t.WQX)(an.a),this._injector=(0,t.WQX)(t.zZn),r.runOutsideAngular(()=>{(0,yt.R)(e.nativeElement,"mouseleave").pipe((0,V.Q)(this._destroyed)).subscribe(()=>{this._stopInterval()})})}ngAfterViewInit(){(0,yt.R)(this._previousPaginator.nativeElement,"touchstart",zt).pipe((0,V.Q)(this._destroyed)).subscribe(()=>{this._handlePaginatorPress("before")}),(0,yt.R)(this._nextPaginator.nativeElement,"touchstart",zt).pipe((0,V.Q)(this._destroyed)).subscribe(()=>{this._handlePaginatorPress("after")})}ngAfterContentInit(){const e=this._dir?this._dir.change:(0,z.of)("ltr"),n=this._sharedResizeObserver.observe(this._elementRef.nativeElement).pipe((0,Pt.B)(32),(0,V.Q)(this._destroyed)),i=this._viewportRuler.change(150).pipe((0,V.Q)(this._destroyed)),o=()=>{this.updatePagination(),this._alignInkBarToSelectedTab()};this._keyManager=new Vt.Bu(this._items).withHorizontalOrientation(this._getLayoutDirection()).withHomeAndEnd().withWrap().skipPredicate(()=>!1),this._keyManager.updateActiveItem(this._selectedIndex),(0,t.mal)(o,{injector:this._injector}),(0,kt.h)(e,i,n,this._items.changes,this._itemsResized()).pipe((0,V.Q)(this._destroyed)).subscribe(()=>{this._ngZone.run(()=>{Promise.resolve().then(()=>{this._scrollDistance=Math.max(0,Math.min(this._getMaxScrollDistance(),this._scrollDistance)),o()})}),this._keyManager.withHorizontalOrientation(this._getLayoutDirection())}),this._keyManager.change.subscribe(r=>{this.indexFocused.emit(r),this._setTabFocus(r)})}_itemsResized(){return"function"!=typeof ResizeObserver?tn.w:this._items.changes.pipe((0,pt.Z)(this._items),(0,W.n)(e=>new en.c(n=>this._ngZone.runOutsideAngular(()=>{const i=new ResizeObserver(o=>n.next(o));return e.forEach(o=>i.observe(o.elementRef.nativeElement)),()=>{i.disconnect()}}))),(0,on.i)(1),(0,tt.p)(e=>e.some(n=>n.contentRect.width>0&&n.contentRect.height>0)))}ngAfterContentChecked(){this._tabLabelCount!=this._items.length&&(this.updatePagination(),this._tabLabelCount=this._items.length,this._changeDetectorRef.markForCheck()),this._selectedIndexChanged&&(this._scrollToLabel(this._selectedIndex),this._checkScrollingControls(),this._alignInkBarToSelectedTab(),this._selectedIndexChanged=!1,this._changeDetectorRef.markForCheck()),this._scrollDistanceChanged&&(this._updateTabScrollPosition(),this._scrollDistanceChanged=!1,this._changeDetectorRef.markForCheck())}ngOnDestroy(){this._keyManager?.destroy(),this._destroyed.next(),this._destroyed.complete(),this._stopScrolling.complete()}_handleKeydown(e){if(!(0,Y.rp)(e))switch(e.keyCode){case Y.Fm:case Y.t6:if(this.focusIndex!==this.selectedIndex){const n=this._items.get(this.focusIndex);n&&!n.disabled&&(this.selectFocusedIndex.emit(this.focusIndex),this._itemSelected(e))}break;default:this._keyManager.onKeydown(e)}}_onContentChanges(){const e=this._elementRef.nativeElement.textContent;e!==this._currentTextContent&&(this._currentTextContent=e||"",this._ngZone.run(()=>{this.updatePagination(),this._alignInkBarToSelectedTab(),this._changeDetectorRef.markForCheck()}))}updatePagination(){this._checkPaginationEnabled(),this._checkScrollingControls(),this._updateTabScrollPosition()}get focusIndex(){return this._keyManager?this._keyManager.activeItemIndex:0}set focusIndex(e){!this._isValidIndex(e)||this.focusIndex===e||!this._keyManager||this._keyManager.setActiveItem(e)}_isValidIndex(e){return!this._items||!!this._items.toArray()[e]}_setTabFocus(e){if(this._showPaginationControls&&this._scrollToLabel(e),this._items&&this._items.length){this._items.toArray()[e].focus();const n=this._tabListContainer.nativeElement;n.scrollLeft="ltr"==this._getLayoutDirection()?0:n.scrollWidth-n.offsetWidth}}_getLayoutDirection(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}_updateTabScrollPosition(){if(this.disablePagination)return;const e=this.scrollDistance,n="ltr"===this._getLayoutDirection()?-e:e;this._tabList.nativeElement.style.transform=`translateX(${Math.round(n)}px)`,(this._platform.TRIDENT||this._platform.EDGE)&&(this._tabListContainer.nativeElement.scrollLeft=0)}get scrollDistance(){return this._scrollDistance}set scrollDistance(e){this._scrollTo(e)}_scrollHeader(e){return this._scrollTo(this._scrollDistance+("before"==e?-1:1)*this._tabListContainer.nativeElement.offsetWidth/3)}_handlePaginatorClick(e){this._stopInterval(),this._scrollHeader(e)}_scrollToLabel(e){if(this.disablePagination)return;const n=this._items?this._items.toArray()[e]:null;if(!n)return;const i=this._tabListContainer.nativeElement.offsetWidth,{offsetLeft:o,offsetWidth:r}=n.elementRef.nativeElement;let c,d;"ltr"==this._getLayoutDirection()?(c=o,d=c+r):(d=this._tabListInner.nativeElement.offsetWidth-o,c=d-r);const p=this.scrollDistance,g=this.scrollDistance+i;c<p?this.scrollDistance-=p-c:d>g&&(this.scrollDistance+=Math.min(d-g,c-p))}_checkPaginationEnabled(){if(this.disablePagination)this._showPaginationControls=!1;else{const e=this._tabListInner.nativeElement.scrollWidth>this._elementRef.nativeElement.offsetWidth;e||(this.scrollDistance=0),e!==this._showPaginationControls&&this._changeDetectorRef.markForCheck(),this._showPaginationControls=e}}_checkScrollingControls(){this.disablePagination?this._disableScrollAfter=this._disableScrollBefore=!0:(this._disableScrollBefore=0==this.scrollDistance,this._disableScrollAfter=this.scrollDistance==this._getMaxScrollDistance(),this._changeDetectorRef.markForCheck())}_getMaxScrollDistance(){return this._tabListInner.nativeElement.scrollWidth-this._tabListContainer.nativeElement.offsetWidth||0}_alignInkBarToSelectedTab(){const e=this._items&&this._items.length?this._items.toArray()[this.selectedIndex]:null,n=e?e.elementRef.nativeElement:null;n?this._inkBar.alignToElement(n):this._inkBar.hide()}_stopInterval(){this._stopScrolling.next()}_handlePaginatorPress(e,n){n&&null!=n.button&&0!==n.button||(this._stopInterval(),(0,nn.O)(650,100).pipe((0,V.Q)((0,kt.h)(this._stopScrolling,this._destroyed))).subscribe(()=>{const{maxScrollDistance:i,distance:o}=this._scrollHeader(e);(0===o||o>=i)&&this._stopInterval()}))}_scrollTo(e){if(this.disablePagination)return{maxScrollDistance:0,distance:0};const n=this._getMaxScrollDistance();return this._scrollDistance=Math.max(0,Math.min(n,e)),this._scrollDistanceChanged=!0,this._checkScrollingControls(),{maxScrollDistance:n,distance:this._scrollDistance}}static#t=this.\u0275fac=function(n){return new(n||a)(t.rXU(t.aKT),t.rXU(t.gRc),t.rXU(It.Xj),t.rXU(Tt.dS,8),t.rXU(t.SKi),t.rXU(_t.OD),t.rXU(t.bc$,8))};static#e=this.\u0275dir=t.FsC({type:a,inputs:{disablePagination:[2,"disablePagination","disablePagination",t.L39],selectedIndex:[2,"selectedIndex","selectedIndex",t.Udg]},outputs:{selectFocusedIndex:"selectFocusedIndex",indexFocused:"indexFocused"},features:[t.GFd]})}return a})(),$n=(()=>{class a extends Dn{constructor(e,n,i,o,r,c,d){super(e,n,i,o,r,c,d),this.disableRipple=!1}ngAfterContentInit(){this._inkBar=new wn(this._items),super.ngAfterContentInit()}_itemSelected(e){e.preventDefault()}static#t=this.\u0275fac=function(n){return new(n||a)(t.rXU(t.aKT),t.rXU(t.gRc),t.rXU(It.Xj),t.rXU(Tt.dS,8),t.rXU(t.SKi),t.rXU(_t.OD),t.rXU(t.bc$,8))};static#e=this.\u0275cmp=t.VBU({type:a,selectors:[["mat-tab-header"]],contentQueries:function(n,i,o){if(1&n&&t.wni(o,Ht,4),2&n){let r;t.mGM(r=t.lsd())&&(i._items=r)}},viewQuery:function(n,i){if(1&n&&(t.GBs(ln,7),t.GBs(dn,7),t.GBs(mn,7),t.GBs(_n,5),t.GBs(pn,5)),2&n){let o;t.mGM(o=t.lsd())&&(i._tabListContainer=o.first),t.mGM(o=t.lsd())&&(i._tabList=o.first),t.mGM(o=t.lsd())&&(i._tabListInner=o.first),t.mGM(o=t.lsd())&&(i._nextPaginator=o.first),t.mGM(o=t.lsd())&&(i._previousPaginator=o.first)}},hostAttrs:[1,"mat-mdc-tab-header"],hostVars:4,hostBindings:function(n,i){2&n&&t.AVh("mat-mdc-tab-header-pagination-controls-enabled",i._showPaginationControls)("mat-mdc-tab-header-rtl","rtl"==i._getLayoutDirection())},inputs:{disableRipple:[2,"disableRipple","disableRipple",t.L39]},standalone:!0,features:[t.GFd,t.Vt3,t.aNF],ngContentSelectors:Mt,decls:13,vars:10,consts:[["previousPaginator",""],["tabListContainer",""],["tabList",""],["tabListInner",""],["nextPaginator",""],["aria-hidden","true","type","button","mat-ripple","","tabindex","-1",1,"mat-mdc-tab-header-pagination","mat-mdc-tab-header-pagination-before",3,"click","mousedown","touchend","matRippleDisabled","disabled"],[1,"mat-mdc-tab-header-pagination-chevron"],[1,"mat-mdc-tab-label-container",3,"keydown"],["role","tablist",1,"mat-mdc-tab-list",3,"cdkObserveContent"],[1,"mat-mdc-tab-labels"],["aria-hidden","true","type","button","mat-ripple","","tabindex","-1",1,"mat-mdc-tab-header-pagination","mat-mdc-tab-header-pagination-after",3,"mousedown","click","touchend","matRippleDisabled","disabled"]],template:function(n,i){if(1&n){const o=t.RV6();t.NAR(),t.j41(0,"button",5,0),t.bIt("click",function(){return t.eBV(o),t.Njj(i._handlePaginatorClick("before"))})("mousedown",function(c){return t.eBV(o),t.Njj(i._handlePaginatorPress("before",c))})("touchend",function(){return t.eBV(o),t.Njj(i._stopInterval())}),t.nrm(2,"div",6),t.k0s(),t.j41(3,"div",7,1),t.bIt("keydown",function(c){return t.eBV(o),t.Njj(i._handleKeydown(c))}),t.j41(5,"div",8,2),t.bIt("cdkObserveContent",function(){return t.eBV(o),t.Njj(i._onContentChanges())}),t.j41(7,"div",9,3),t.SdG(9),t.k0s()()(),t.j41(10,"button",10,4),t.bIt("mousedown",function(c){return t.eBV(o),t.Njj(i._handlePaginatorPress("after",c))})("click",function(){return t.eBV(o),t.Njj(i._handlePaginatorClick("after"))})("touchend",function(){return t.eBV(o),t.Njj(i._stopInterval())}),t.nrm(12,"div",6),t.k0s()}2&n&&(t.AVh("mat-mdc-tab-header-pagination-disabled",i._disableScrollBefore),t.Y8G("matRippleDisabled",i._disableScrollBefore||i.disableRipple)("disabled",i._disableScrollBefore||null),t.R7$(3),t.AVh("_mat-animation-noopable","NoopAnimations"===i._animationMode),t.R7$(7),t.AVh("mat-mdc-tab-header-pagination-disabled",i._disableScrollAfter),t.Y8G("matRippleDisabled",i._disableScrollAfter||i.disableRipple)("disabled",i._disableScrollAfter||null))},dependencies:[v.r6,sn.Wv],styles:[".mat-mdc-tab-header{display:flex;overflow:hidden;position:relative;flex-shrink:0}.mdc-tab-indicator .mdc-tab-indicator__content{transition-duration:var(--mat-tab-animation-duration, 250ms)}.mat-mdc-tab-header-pagination{-webkit-user-select:none;user-select:none;position:relative;display:none;justify-content:center;align-items:center;min-width:32px;cursor:pointer;z-index:2;-webkit-tap-highlight-color:rgba(0,0,0,0);touch-action:none;box-sizing:content-box;background:none;border:none;outline:0;padding:0}.mat-mdc-tab-header-pagination::-moz-focus-inner{border:0}.mat-mdc-tab-header-pagination .mat-ripple-element{opacity:.12;background-color:var(--mat-tab-header-inactive-ripple-color)}.mat-mdc-tab-header-pagination-controls-enabled .mat-mdc-tab-header-pagination{display:flex}.mat-mdc-tab-header-pagination-before,.mat-mdc-tab-header-rtl .mat-mdc-tab-header-pagination-after{padding-left:4px}.mat-mdc-tab-header-pagination-before .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-header-rtl .mat-mdc-tab-header-pagination-after .mat-mdc-tab-header-pagination-chevron{transform:rotate(-135deg)}.mat-mdc-tab-header-rtl .mat-mdc-tab-header-pagination-before,.mat-mdc-tab-header-pagination-after{padding-right:4px}.mat-mdc-tab-header-rtl .mat-mdc-tab-header-pagination-before .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-header-pagination-after .mat-mdc-tab-header-pagination-chevron{transform:rotate(45deg)}.mat-mdc-tab-header-pagination-chevron{border-style:solid;border-width:2px 2px 0 0;height:8px;width:8px;border-color:var(--mat-tab-header-pagination-icon-color)}.mat-mdc-tab-header-pagination-disabled{box-shadow:none;cursor:default;pointer-events:none}.mat-mdc-tab-header-pagination-disabled .mat-mdc-tab-header-pagination-chevron{opacity:.4}.mat-mdc-tab-list{flex-grow:1;position:relative;transition:transform 500ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-mdc-tab-list{transition:none}._mat-animation-noopable span.mdc-tab-indicator__content,._mat-animation-noopable span.mdc-tab__text-label{transition:none}.mat-mdc-tab-label-container{display:flex;flex-grow:1;overflow:hidden;z-index:1;border-bottom-style:solid;border-bottom-width:var(--mat-tab-header-divider-height);border-bottom-color:var(--mat-tab-header-divider-color)}.mat-mdc-tab-group-inverted-header .mat-mdc-tab-label-container{border-bottom:none;border-top-style:solid;border-top-width:var(--mat-tab-header-divider-height);border-top-color:var(--mat-tab-header-divider-color)}.mat-mdc-tab-labels{display:flex;flex:1 0 auto}[mat-align-tabs=center]>.mat-mdc-tab-header .mat-mdc-tab-labels{justify-content:center}[mat-align-tabs=end]>.mat-mdc-tab-header .mat-mdc-tab-labels{justify-content:flex-end}.mat-mdc-tab::before{margin:5px}.cdk-high-contrast-active .mat-mdc-tab[aria-disabled=true]{color:GrayText}"],encapsulation:2})}return a})();const Sn=new t.nKC("MAT_TABS_CONFIG"),Nn={translateTab:(0,w.hZ)("translateTab",[(0,w.wk)("center, void, left-origin-center, right-origin-center",(0,w.iF)({transform:"none"})),(0,w.wk)("left",(0,w.iF)({transform:"translate3d(-100%, 0, 0)",minHeight:"1px",visibility:"hidden"})),(0,w.wk)("right",(0,w.iF)({transform:"translate3d(100%, 0, 0)",minHeight:"1px",visibility:"hidden"})),(0,w.kY)("* => left, * => right, left => center, right => center",(0,w.i0)("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")),(0,w.kY)("void => left-origin-center",[(0,w.iF)({transform:"translate3d(-100%, 0, 0)",visibility:"hidden"}),(0,w.i0)("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")]),(0,w.kY)("void => right-origin-center",[(0,w.iF)({transform:"translate3d(100%, 0, 0)",visibility:"hidden"}),(0,w.i0)("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")])])};let An=(()=>{class a extends it.I3{constructor(e,n,i,o){super(e,n,o),this._host=i,this._centeringSub=at.y.EMPTY,this._leavingSub=at.y.EMPTY}ngOnInit(){super.ngOnInit(),this._centeringSub=this._host._beforeCentering.pipe((0,pt.Z)(this._host._isCenterPosition(this._host._position))).subscribe(e=>{e&&!this.hasAttached()&&this.attach(this._host._content)}),this._leavingSub=this._host._afterLeavingCenter.subscribe(()=>{this._host.preserveContent||this.detach()})}ngOnDestroy(){super.ngOnDestroy(),this._centeringSub.unsubscribe(),this._leavingSub.unsubscribe()}static#t=this.\u0275fac=function(n){return new(n||a)(t.rXU(t.OM3),t.rXU(t.c1b),t.rXU((0,t.Rfq)(()=>Wt)),t.rXU(_.qQ))};static#e=this.\u0275dir=t.FsC({type:a,selectors:[["","matTabBodyHost",""]],standalone:!0,features:[t.Vt3]})}return a})(),Wt=(()=>{class a{set position(e){this._positionIndex=e,this._computePositionAnimationState()}constructor(e,n,i){this._elementRef=e,this._dir=n,this._dirChangeSubscription=at.y.EMPTY,this._translateTabComplete=new mt.B7,this._onCentering=new t.bkB,this._beforeCentering=new t.bkB,this._afterLeavingCenter=new t.bkB,this._onCentered=new t.bkB(!0),this.animationDuration="500ms",this.preserveContent=!1,n&&(this._dirChangeSubscription=n.change.subscribe(o=>{this._computePositionAnimationState(o),i.markForCheck()})),this._translateTabComplete.pipe((0,rn.F)((o,r)=>o.fromState===r.fromState&&o.toState===r.toState)).subscribe(o=>{this._isCenterPosition(o.toState)&&this._isCenterPosition(this._position)&&this._onCentered.emit(),this._isCenterPosition(o.fromState)&&!this._isCenterPosition(this._position)&&this._afterLeavingCenter.emit()})}ngOnInit(){"center"==this._position&&null!=this.origin&&(this._position=this._computePositionFromOrigin(this.origin))}ngOnDestroy(){this._dirChangeSubscription.unsubscribe(),this._translateTabComplete.complete()}_onTranslateTabStarted(e){const n=this._isCenterPosition(e.toState);this._beforeCentering.emit(n),n&&this._onCentering.emit(this._elementRef.nativeElement.clientHeight)}_getLayoutDirection(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}_isCenterPosition(e){return"center"==e||"left-origin-center"==e||"right-origin-center"==e}_computePositionAnimationState(e=this._getLayoutDirection()){this._position=this._positionIndex<0?"ltr"==e?"left":"right":this._positionIndex>0?"ltr"==e?"right":"left":"center"}_computePositionFromOrigin(e){const n=this._getLayoutDirection();return"ltr"==n&&e<=0||"rtl"==n&&e>0?"left-origin-center":"right-origin-center"}static#t=this.\u0275fac=function(n){return new(n||a)(t.rXU(t.aKT),t.rXU(Tt.dS,8),t.rXU(t.gRc))};static#e=this.\u0275cmp=t.VBU({type:a,selectors:[["mat-tab-body"]],viewQuery:function(n,i){if(1&n&&t.GBs(it.I3,5),2&n){let o;t.mGM(o=t.lsd())&&(i._portalHost=o.first)}},hostAttrs:[1,"mat-mdc-tab-body"],inputs:{_content:[0,"content","_content"],origin:"origin",animationDuration:"animationDuration",preserveContent:"preserveContent",position:"position"},outputs:{_onCentering:"_onCentering",_beforeCentering:"_beforeCentering",_afterLeavingCenter:"_afterLeavingCenter",_onCentered:"_onCentered"},standalone:!0,features:[t.aNF],decls:3,vars:6,consts:[["content",""],["cdkScrollable","",1,"mat-mdc-tab-body-content"],["matTabBodyHost",""]],template:function(n,i){if(1&n){const o=t.RV6();t.j41(0,"div",1,0),t.bIt("@translateTab.start",function(c){return t.eBV(o),t.Njj(i._onTranslateTabStarted(c))})("@translateTab.done",function(c){return t.eBV(o),t.Njj(i._translateTabComplete.next(c))}),t.DNE(2,gn,0,0,"ng-template",2),t.k0s()}2&n&&t.Y8G("@translateTab",t.l_i(3,hn,i._position,t.eq3(1,un,i.animationDuration)))},dependencies:[An,It.uv],styles:['.mat-mdc-tab-body{top:0;left:0;right:0;bottom:0;position:absolute;display:block;overflow:hidden;outline:0;flex-basis:100%}.mat-mdc-tab-body.mat-mdc-tab-body-active{position:relative;overflow-x:hidden;overflow-y:auto;z-index:1;flex-grow:1}.mat-mdc-tab-group.mat-mdc-tab-group-dynamic-height .mat-mdc-tab-body.mat-mdc-tab-body-active{overflow-y:hidden}.mat-mdc-tab-body-content{height:100%;overflow:auto}.mat-mdc-tab-group-dynamic-height .mat-mdc-tab-body-content{overflow:hidden}.mat-mdc-tab-body-content[style*="visibility: hidden"]{display:none}'],encapsulation:2,data:{animation:[Nn.translateTab]}})}return a})(),Ln=0,Qt=(()=>{class a{get fitInkBarToContent(){return this._fitInkBarToContent}set fitInkBarToContent(e){this._fitInkBarToContent=e,this._changeDetectorRef.markForCheck()}get selectedIndex(){return this._selectedIndex}set selectedIndex(e){this._indexToSelect=isNaN(e)?null:e}get animationDuration(){return this._animationDuration}set animationDuration(e){const n=e+"";this._animationDuration=/^\d+$/.test(n)?e+"ms":n}get contentTabIndex(){return this._contentTabIndex}set contentTabIndex(e){this._contentTabIndex=isNaN(e)?null:e}get backgroundColor(){return this._backgroundColor}set backgroundColor(e){const n=this._elementRef.nativeElement.classList;n.remove("mat-tabs-with-background",`mat-background-${this.backgroundColor}`),e&&n.add("mat-tabs-with-background",`mat-background-${e}`),this._backgroundColor=e}constructor(e,n,i,o){this._elementRef=e,this._changeDetectorRef=n,this._animationMode=o,this._tabs=new t.rOR,this._indexToSelect=0,this._lastFocusedTabIndex=null,this._tabBodyWrapperHeight=0,this._tabsSubscription=at.y.EMPTY,this._tabLabelSubscription=at.y.EMPTY,this._fitInkBarToContent=!1,this.stretchTabs=!0,this.dynamicHeight=!1,this._selectedIndex=null,this.headerPosition="above",this.disablePagination=!1,this.disableRipple=!1,this.preserveContent=!1,this.selectedIndexChange=new t.bkB,this.focusChange=new t.bkB,this.animationDone=new t.bkB,this.selectedTabChange=new t.bkB(!0),this._isServer=!(0,t.WQX)(_t.OD).isBrowser,this._groupId=Ln++,this.animationDuration=i&&i.animationDuration?i.animationDuration:"500ms",this.disablePagination=!(!i||null==i.disablePagination)&&i.disablePagination,this.dynamicHeight=!(!i||null==i.dynamicHeight)&&i.dynamicHeight,null!=i?.contentTabIndex&&(this.contentTabIndex=i.contentTabIndex),this.preserveContent=!!i?.preserveContent,this.fitInkBarToContent=!(!i||null==i.fitInkBarToContent)&&i.fitInkBarToContent,this.stretchTabs=!i||null==i.stretchTabs||i.stretchTabs}ngAfterContentChecked(){const e=this._indexToSelect=this._clampTabIndex(this._indexToSelect);if(this._selectedIndex!=e){const n=null==this._selectedIndex;if(!n){this.selectedTabChange.emit(this._createChangeEvent(e));const i=this._tabBodyWrapper.nativeElement;i.style.minHeight=i.clientHeight+"px"}Promise.resolve().then(()=>{this._tabs.forEach((i,o)=>i.isActive=o===e),n||(this.selectedIndexChange.emit(e),this._tabBodyWrapper.nativeElement.style.minHeight="")})}this._tabs.forEach((n,i)=>{n.position=i-e,null!=this._selectedIndex&&0==n.position&&!n.origin&&(n.origin=e-this._selectedIndex)}),this._selectedIndex!==e&&(this._selectedIndex=e,this._lastFocusedTabIndex=null,this._changeDetectorRef.markForCheck())}ngAfterContentInit(){this._subscribeToAllTabChanges(),this._subscribeToTabLabels(),this._tabsSubscription=this._tabs.changes.subscribe(()=>{const e=this._clampTabIndex(this._indexToSelect);if(e===this._selectedIndex){const n=this._tabs.toArray();let i;for(let o=0;o<n.length;o++)if(n[o].isActive){this._indexToSelect=this._selectedIndex=o,this._lastFocusedTabIndex=null,i=n[o];break}!i&&n[e]&&Promise.resolve().then(()=>{n[e].isActive=!0,this.selectedTabChange.emit(this._createChangeEvent(e))})}this._changeDetectorRef.markForCheck()})}_subscribeToAllTabChanges(){this._allTabs.changes.pipe((0,pt.Z)(this._allTabs)).subscribe(e=>{this._tabs.reset(e.filter(n=>n._closestTabGroup===this||!n._closestTabGroup)),this._tabs.notifyOnChanges()})}ngOnDestroy(){this._tabs.destroy(),this._tabsSubscription.unsubscribe(),this._tabLabelSubscription.unsubscribe()}realignInkBar(){this._tabHeader&&this._tabHeader._alignInkBarToSelectedTab()}updatePagination(){this._tabHeader&&this._tabHeader.updatePagination()}focusTab(e){const n=this._tabHeader;n&&(n.focusIndex=e)}_focusChanged(e){this._lastFocusedTabIndex=e,this.focusChange.emit(this._createChangeEvent(e))}_createChangeEvent(e){const n=new Vn;return n.index=e,this._tabs&&this._tabs.length&&(n.tab=this._tabs.toArray()[e]),n}_subscribeToTabLabels(){this._tabLabelSubscription&&this._tabLabelSubscription.unsubscribe(),this._tabLabelSubscription=(0,kt.h)(...this._tabs.map(e=>e._stateChanges)).subscribe(()=>this._changeDetectorRef.markForCheck())}_clampTabIndex(e){return Math.min(this._tabs.length-1,Math.max(e||0,0))}_getTabLabelId(e){return`mat-tab-label-${this._groupId}-${e}`}_getTabContentId(e){return`mat-tab-content-${this._groupId}-${e}`}_setTabBodyWrapperHeight(e){if(!this.dynamicHeight||!this._tabBodyWrapperHeight)return;const n=this._tabBodyWrapper.nativeElement;n.style.height=this._tabBodyWrapperHeight+"px",this._tabBodyWrapper.nativeElement.offsetHeight&&(n.style.height=e+"px")}_removeTabBodyWrapperHeight(){const e=this._tabBodyWrapper.nativeElement;this._tabBodyWrapperHeight=e.clientHeight,e.style.height="",this.animationDone.emit()}_handleClick(e,n,i){n.focusIndex=i,e.disabled||(this.selectedIndex=i)}_getTabIndex(e){return e===(this._lastFocusedTabIndex??this.selectedIndex)?0:-1}_tabFocusChanged(e,n){e&&"mouse"!==e&&"touch"!==e&&(this._tabHeader.focusIndex=n)}static#t=this.\u0275fac=function(n){return new(n||a)(t.rXU(t.aKT),t.rXU(t.gRc),t.rXU(Sn,8),t.rXU(t.bc$,8))};static#e=this.\u0275cmp=t.VBU({type:a,selectors:[["mat-tab-group"]],contentQueries:function(n,i,o){if(1&n&&t.wni(o,Ft,5),2&n){let r;t.mGM(r=t.lsd())&&(i._allTabs=r)}},viewQuery:function(n,i){if(1&n&&(t.GBs(fn,5),t.GBs(bn,5)),2&n){let o;t.mGM(o=t.lsd())&&(i._tabBodyWrapper=o.first),t.mGM(o=t.lsd())&&(i._tabHeader=o.first)}},hostAttrs:[1,"mat-mdc-tab-group"],hostVars:10,hostBindings:function(n,i){2&n&&(t.HbH("mat-"+(i.color||"primary")),t.xc7("--mat-tab-animation-duration",i.animationDuration),t.AVh("mat-mdc-tab-group-dynamic-height",i.dynamicHeight)("mat-mdc-tab-group-inverted-header","below"===i.headerPosition)("mat-mdc-tab-group-stretch-tabs",i.stretchTabs))},inputs:{color:"color",fitInkBarToContent:[2,"fitInkBarToContent","fitInkBarToContent",t.L39],stretchTabs:[2,"mat-stretch-tabs","stretchTabs",t.L39],dynamicHeight:[2,"dynamicHeight","dynamicHeight",t.L39],selectedIndex:[2,"selectedIndex","selectedIndex",t.Udg],headerPosition:"headerPosition",animationDuration:"animationDuration",contentTabIndex:[2,"contentTabIndex","contentTabIndex",t.Udg],disablePagination:[2,"disablePagination","disablePagination",t.L39],disableRipple:[2,"disableRipple","disableRipple",t.L39],preserveContent:[2,"preserveContent","preserveContent",t.L39],backgroundColor:"backgroundColor"},outputs:{selectedIndexChange:"selectedIndexChange",focusChange:"focusChange",animationDone:"animationDone",selectedTabChange:"selectedTabChange"},exportAs:["matTabGroup"],standalone:!0,features:[t.Jv_([{provide:Ut,useExisting:a}]),t.GFd,t.aNF],ngContentSelectors:Mt,decls:9,vars:6,consts:[["tabHeader",""],["tabBodyWrapper",""],["tabNode",""],[3,"indexFocused","selectFocusedIndex","selectedIndex","disableRipple","disablePagination"],["role","tab","matTabLabelWrapper","","cdkMonitorElementFocus","",1,"mdc-tab","mat-mdc-tab","mat-mdc-focus-indicator",3,"id","mdc-tab--active","class","disabled","fitInkBarToContent"],[1,"mat-mdc-tab-body-wrapper"],["role","tabpanel",3,"id","mat-mdc-tab-body-active","class","content","position","origin","animationDuration","preserveContent"],["role","tab","matTabLabelWrapper","","cdkMonitorElementFocus","",1,"mdc-tab","mat-mdc-tab","mat-mdc-focus-indicator",3,"click","cdkFocusChange","id","disabled","fitInkBarToContent"],[1,"mdc-tab__ripple"],["mat-ripple","",1,"mat-mdc-tab-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mdc-tab__content"],[1,"mdc-tab__text-label"],[3,"cdkPortalOutlet"],["role","tabpanel",3,"_onCentered","_onCentering","id","content","position","origin","animationDuration","preserveContent"]],template:function(n,i){if(1&n){const o=t.RV6();t.NAR(),t.j41(0,"mat-tab-header",3,0),t.bIt("indexFocused",function(c){return t.eBV(o),t.Njj(i._focusChanged(c))})("selectFocusedIndex",function(c){return t.eBV(o),t.Njj(i.selectedIndex=c)}),t.Z7z(2,yn,8,17,"div",4,t.fX1),t.k0s(),t.DNE(4,kn,1,0),t.j41(5,"div",5,1),t.Z7z(7,In,1,13,"mat-tab-body",6,t.fX1),t.k0s()}2&n&&(t.Y8G("selectedIndex",i.selectedIndex||0)("disableRipple",i.disableRipple)("disablePagination",i.disablePagination),t.R7$(2),t.Dyx(i._tabs),t.R7$(2),t.vxM(i._isServer?4:-1),t.R7$(),t.AVh("_mat-animation-noopable","NoopAnimations"===i._animationMode),t.R7$(2),t.Dyx(i._tabs))},dependencies:[$n,Ht,Vt.vR,v.r6,it.I3,Wt],styles:['.mdc-tab{min-width:90px;padding-right:24px;padding-left:24px;display:flex;flex:1 0 auto;justify-content:center;box-sizing:border-box;margin:0;padding-top:0;padding-bottom:0;border:none;outline:none;text-align:center;white-space:nowrap;cursor:pointer;-webkit-appearance:none;z-index:1}.mdc-tab::-moz-focus-inner{padding:0;border:0}.mdc-tab[hidden]{display:none}.mdc-tab--min-width{flex:0 1 auto}.mdc-tab__content{display:flex;align-items:center;justify-content:center;height:inherit;pointer-events:none}.mdc-tab__text-label{transition:150ms color linear;display:inline-block;line-height:1;z-index:2}.mdc-tab__icon{transition:150ms color linear;z-index:2}.mdc-tab--stacked .mdc-tab__content{flex-direction:column;align-items:center;justify-content:center}.mdc-tab--stacked .mdc-tab__text-label{padding-top:6px;padding-bottom:4px}.mdc-tab--active .mdc-tab__text-label,.mdc-tab--active .mdc-tab__icon{transition-delay:100ms}.mdc-tab:not(.mdc-tab--stacked) .mdc-tab__icon+.mdc-tab__text-label{padding-left:8px;padding-right:0}[dir=rtl] .mdc-tab:not(.mdc-tab--stacked) .mdc-tab__icon+.mdc-tab__text-label,.mdc-tab:not(.mdc-tab--stacked) .mdc-tab__icon+.mdc-tab__text-label[dir=rtl]{padding-left:0;padding-right:8px}.mdc-tab-indicator{display:flex;position:absolute;top:0;left:0;justify-content:center;width:100%;height:100%;pointer-events:none;z-index:1}.mdc-tab-indicator__content{transform-origin:left;opacity:0}.mdc-tab-indicator__content--underline{align-self:flex-end;box-sizing:border-box;width:100%;border-top-style:solid}.mdc-tab-indicator__content--icon{align-self:center;margin:0 auto}.mdc-tab-indicator--active .mdc-tab-indicator__content{opacity:1}.mdc-tab-indicator .mdc-tab-indicator__content{transition:250ms transform cubic-bezier(0.4, 0, 0.2, 1)}.mdc-tab-indicator--no-transition .mdc-tab-indicator__content{transition:none}.mdc-tab-indicator--fade .mdc-tab-indicator__content{transition:150ms opacity linear}.mdc-tab-indicator--active.mdc-tab-indicator--fade .mdc-tab-indicator__content{transition-delay:100ms}.mat-mdc-tab-ripple{position:absolute;top:0;left:0;bottom:0;right:0;pointer-events:none}.mat-mdc-tab{-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;text-decoration:none;background:none;font-family:var(--mat-tab-header-label-text-font);font-size:var(--mat-tab-header-label-text-size);letter-spacing:var(--mat-tab-header-label-text-tracking);line-height:var(--mat-tab-header-label-text-line-height);font-weight:var(--mat-tab-header-label-text-weight)}.mat-mdc-tab .mdc-tab-indicator__content--underline{border-color:var(--mdc-tab-indicator-active-indicator-color)}.mat-mdc-tab .mdc-tab-indicator__content--underline{border-top-width:var(--mdc-tab-indicator-active-indicator-height)}.mat-mdc-tab .mdc-tab-indicator__content--underline{border-radius:var(--mdc-tab-indicator-active-indicator-shape)}.mat-mdc-tab:not(.mdc-tab--stacked){height:var(--mdc-secondary-navigation-tab-container-height)}.mat-mdc-tab:not(:disabled).mdc-tab--active .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):hover.mdc-tab--active .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):focus.mdc-tab--active .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):active.mdc-tab--active .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:disabled.mdc-tab--active .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):not(.mdc-tab--active) .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):hover:not(.mdc-tab--active) .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):focus:not(.mdc-tab--active) .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):active:not(.mdc-tab--active) .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:disabled:not(.mdc-tab--active) .mdc-tab__icon{fill:currentColor}.mat-mdc-tab.mdc-tab{flex-grow:0}.mat-mdc-tab:hover .mdc-tab__text-label{color:var(--mat-tab-header-inactive-hover-label-text-color)}.mat-mdc-tab:focus .mdc-tab__text-label{color:var(--mat-tab-header-inactive-focus-label-text-color)}.mat-mdc-tab.mdc-tab--active .mdc-tab__text-label{color:var(--mat-tab-header-active-label-text-color)}.mat-mdc-tab.mdc-tab--active .mdc-tab__ripple::before,.mat-mdc-tab.mdc-tab--active .mat-ripple-element{background-color:var(--mat-tab-header-active-ripple-color)}.mat-mdc-tab.mdc-tab--active:hover .mdc-tab__text-label{color:var(--mat-tab-header-active-hover-label-text-color)}.mat-mdc-tab.mdc-tab--active:hover .mdc-tab-indicator__content--underline{border-color:var(--mat-tab-header-active-hover-indicator-color)}.mat-mdc-tab.mdc-tab--active:focus .mdc-tab__text-label{color:var(--mat-tab-header-active-focus-label-text-color)}.mat-mdc-tab.mdc-tab--active:focus .mdc-tab-indicator__content--underline{border-color:var(--mat-tab-header-active-focus-indicator-color)}.mat-mdc-tab.mat-mdc-tab-disabled{opacity:.4;pointer-events:none}.mat-mdc-tab.mat-mdc-tab-disabled .mdc-tab__content{pointer-events:none}.mat-mdc-tab.mat-mdc-tab-disabled .mdc-tab__ripple::before,.mat-mdc-tab.mat-mdc-tab-disabled .mat-ripple-element{background-color:var(--mat-tab-header-disabled-ripple-color)}.mat-mdc-tab .mdc-tab__ripple::before{content:"";display:block;position:absolute;top:0;left:0;right:0;bottom:0;opacity:0;pointer-events:none;background-color:var(--mat-tab-header-inactive-ripple-color)}.mat-mdc-tab .mdc-tab__text-label{color:var(--mat-tab-header-inactive-label-text-color);display:inline-flex;align-items:center}.mat-mdc-tab .mdc-tab__content{position:relative;pointer-events:auto}.mat-mdc-tab:hover .mdc-tab__ripple::before{opacity:.04}.mat-mdc-tab.cdk-program-focused .mdc-tab__ripple::before,.mat-mdc-tab.cdk-keyboard-focused .mdc-tab__ripple::before{opacity:.12}.mat-mdc-tab .mat-ripple-element{opacity:.12;background-color:var(--mat-tab-header-inactive-ripple-color)}.mat-mdc-tab-group.mat-mdc-tab-group-stretch-tabs>.mat-mdc-tab-header .mat-mdc-tab{flex-grow:1}.mat-mdc-tab-group{display:flex;flex-direction:column;max-width:100%}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination{background-color:var(--mat-tab-header-with-background-background-color)}.mat-mdc-tab-group.mat-tabs-with-background.mat-primary>.mat-mdc-tab-header .mat-mdc-tab .mdc-tab__text-label{color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background.mat-primary>.mat-mdc-tab-header .mdc-tab-indicator__content--underline{border-color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background:not(.mat-primary)>.mat-mdc-tab-header .mat-mdc-tab:not(.mdc-tab--active) .mdc-tab__text-label{color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background:not(.mat-primary)>.mat-mdc-tab-header .mat-mdc-tab:not(.mdc-tab--active) .mdc-tab-indicator__content--underline{border-color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-mdc-focus-indicator::before,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mat-mdc-focus-indicator::before{border-color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-ripple-element,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mdc-tab__ripple::before,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mat-ripple-element,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mdc-tab__ripple::before{background-color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mat-mdc-tab-header-pagination-chevron{color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-mdc-tab-group-inverted-header{flex-direction:column-reverse}.mat-mdc-tab-group.mat-mdc-tab-group-inverted-header .mdc-tab-indicator__content--underline{align-self:flex-start}.mat-mdc-tab-body-wrapper{position:relative;overflow:hidden;display:flex;transition:height 500ms cubic-bezier(0.35, 0, 0.25, 1)}.mat-mdc-tab-body-wrapper._mat-animation-noopable{transition:none !important;animation:none !important}'],encapsulation:2})}return a})();class Vn{}var ot=l(640);const Jt=()=>({});function Pn(a,s){1&a&&(t.j41(0,"div",18),t.EFF(1," Options Available "),t.k0s())}function Xn(a,s){if(1&a){const e=t.RV6();t.j41(0,"a-counter",19),t.bIt("ngModelChange",function(i){t.eBV(e);const o=t.XpG().$implicit,r=t.XpG(5);return t.Njj(r.updateItemQuantity(o,i))}),t.k0s()}if(2&a){const e=t.XpG().$implicit;t.Y8G("ngModel",e.quantity)}}function Un(a,s){if(1&a){const e=t.RV6();t.j41(0,"div",20)(1,"div",21)(2,"button",22)(3,"app-icon"),t.EFF(4,"remove"),t.k0s()()(),t.j41(5,"div",23),t.EFF(6),t.k0s(),t.j41(7,"button",24),t.bIt("click",function(){t.eBV(e);const i=t.XpG().$implicit,o=t.XpG(5);return t.Njj(o.addItem(i))}),t.j41(8,"app-icon"),t.EFF(9,"add"),t.k0s()()()}if(2&a){const e=t.XpG().$implicit;t.R7$(),t.Y8G("matTooltip",e.quantity?"Items with options must be removed from order confirmation page":""),t.R7$(),t.Y8G("disabled",!0),t.R7$(4),t.SpI(" ",e.quantity," ")}}function Yn(a,s){if(1&a&&(t.j41(0,"div",12)(1,"div",13)(2,"div",13),t.EFF(3),t.k0s(),t.DNE(4,Pn,2,0,"div",14),t.k0s(),t.j41(5,"div",15),t.EFF(6),t.nI1(7,"currency"),t.k0s(),t.DNE(8,Xn,1,1,"a-counter",16)(9,Un,10,3,"div",17),t.k0s()),2&a){const e=s.$implicit,n=t.XpG(5);t.R7$(3),t.SpI(" ",e.name," "),t.R7$(),t.Y8G("ngIf",e.options.length),t.R7$(2),t.SpI(" ",t.i5U(7,5,e.unit_price/100,n.code)," "),t.R7$(2),t.Y8G("ngIf",!e.options.length),t.R7$(),t.Y8G("ngIf",e.options.length)}}function Hn(a,s){if(1&a&&(t.j41(0,"mat-tab",9)(1,"div",10),t.DNE(2,Yn,10,8,"div",11),t.k0s()()),2&a){const e=t.XpG().$implicit,n=t.XpG(3);t.Y8G("label",e),t.R7$(2),t.Y8G("ngForOf",(n.menu_items||t.lJ4(2,Jt))[e])}}function zn(a,s){if(1&a&&(t.qex(0),t.DNE(1,Hn,3,3,"mat-tab",8),t.bVm()),2&a){const e=s.$implicit,n=t.XpG(3);t.R7$(),t.Y8G("ngIf",(n.menu_items||t.lJ4(1,Jt))[e].length)}}function Wn(a,s){if(1&a&&(t.qex(0),t.j41(1,"mat-tab-group"),t.DNE(2,zn,2,2,"ng-container",7),t.k0s(),t.bVm()),2&a){const e=t.XpG(2);t.R7$(2),t.Y8G("ngForOf",e.categories)}}function Qn(a,s){if(1&a&&(t.j41(0,"div",5),t.DNE(1,Wn,3,1,"ng-container",6),t.k0s()),2&a){const e=t.XpG(),n=t.sdS(5);t.R7$(),t.Y8G("ngIf",!e.show_order_details)("ngIfElse",n)}}function Jn(a,s){if(1&a){const e=t.RV6();t.qex(0),t.j41(1,"button",26),t.EFF(2," Cancel "),t.k0s(),t.j41(3,"button",27),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.show_order_details=!0)}),t.EFF(4," Confirm "),t.k0s(),t.bVm()}if(2&a){const e=t.XpG(2);t.R7$(3),t.Y8G("disabled",!e.order.item_count)("matBadge",e.order.item_count)("matBadgeHidden",!e.order.item_count)}}function Zn(a,s){if(1&a){const e=t.RV6();t.j41(0,"button",28),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.show_order_details=!1)}),t.EFF(1," Back "),t.k0s(),t.j41(2,"button",29),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.saveOrder())}),t.EFF(3," Save Order "),t.k0s()}}function qn(a,s){if(1&a&&(t.j41(0,"footer",25),t.DNE(1,Jn,5,3,"ng-container",6)(2,Zn,4,0,"ng-template",null,2,t.C5r),t.k0s()),2&a){const e=t.sdS(3),n=t.XpG();t.R7$(),t.Y8G("ngIf",!n.show_order_details)("ngIfElse",e)}}function Kn(a,s){if(1&a&&(t.j41(0,"div",30),t.nrm(1,"mat-spinner",31),t.j41(2,"p"),t.EFF(3),t.k0s()()),2&a){const e=t.XpG();t.R7$(3),t.JRh(e.loading)}}function ti(a,s){if(1&a&&(t.j41(0,"div",35),t.EFF(1),t.k0s()),2&a){const e=t.XpG().$implicit,n=t.XpG(2);t.Y8G("matTooltip",n.optionsFor(e)),t.R7$(),t.Lme(" ",e.options.length," option",1===e.options.length?"":"s"," selected ")}}function ei(a,s){if(1&a){const e=t.RV6();t.j41(0,"div",12)(1,"div",13)(2,"div",13),t.EFF(3),t.k0s(),t.DNE(4,ti,2,3,"div",33),t.k0s(),t.j41(5,"div",15),t.EFF(6),t.nI1(7,"currency"),t.k0s(),t.j41(8,"a-counter",34),t.bIt("ngModelChange",function(i){const o=t.eBV(e).$implicit,r=t.XpG(2);return t.Njj(r.updateItemQuantity(o,i))}),t.k0s()()}if(2&a){const e=s.$implicit,n=t.XpG(2);t.R7$(3),t.JRh(e.name),t.R7$(),t.Y8G("ngIf",e.options.length),t.R7$(2),t.SpI(" ",t.i5U(7,4,e.total_cost/100,n.code)," "),t.R7$(2),t.Y8G("ngModel",e.quantity)}}function ni(a,s){if(1&a&&(t.j41(0,"header",32)(1,"h3"),t.EFF(2,"Confirm Order"),t.k0s()(),t.j41(3,"div",10),t.DNE(4,ei,9,7,"div",11),t.k0s()),2&a){const e=t.XpG();t.R7$(4),t.Y8G("ngForOf",e.order.items)}}let Zt=(()=>{class a extends u.Tv{get code(){return this._org.currency_code}constructor(e,n){super(),this._org=e,this._data=n,this.event=new t.bkB,this.loading="",this.menu_items={},this.categories=[],this.loading="Loading menu..."}ngOnInit(){var e=this;return(0,h.A)(function*(){e.loading="Loading menu...",e.order=new R.M(e._data.order),e.rules=yield e._data.getCateringConfig(e.order.event?.space?.level?.parent_id),e._data.menu.subscribe(n=>{e.loading="Loading menu...";const i=(0,u.Am)(n.map(r=>r.category)),o={};for(const r of i)o[r]=n.filter(c=>c.category===r&&Bt(c,e.rules,e.order.event));e.categories=i,e.menu_items=o,e.updateMenuQuantities(),e.timeout("clear_loading",()=>e.loading="",1e3)})})()}addItem(e,n=!0){const i=this.order.items.find(o=>o.id===e.id&&o.options.length===o.options.reduce((r,c)=>r+(e.options.find(d=>c.id===d.id)?1:0),0));n&&e.options?.length?this._data.selectOptions(e.options).then(o=>{const r=new k.T({...e,options:o});this.addItem(r,!1)}):this.order=new R.M(i?{...this.order,items:this.order.items.filter(o=>!(o.id===e.id&&o.options_string===e.options_string)).concat([new k.T({...e,quantity:i.quantity+1})])}:{...this.order,items:this.order.items.concat([new k.T({...e,quantity:1})])}),this.updateMenuQuantities()}removeItem(e){this.order=new R.M({...this.order,items:this.order.items.filter(n=>n.id!==e.id&&n.options_string===e.options_string)}),this.updateMenuQuantities()}updateItemQuantity(e,n){const i=this.order.items.find(r=>r.id===e.id&&r.options_string===e.options_string);let o=[...this.order.items];o=i?this.order.items.filter(r=>!(r.id===e.id&&r.options_string===e.options_string)).concat([new k.T({...e,quantity:n})]):this.order.items.concat([new k.T({...e,quantity:n})]),o.sort((r,c)=>r.name.localeCompare(c.name)),this.order=new R.M({...this.order,items:o}),this.updateMenuQuantities()}updateMenuQuantities(){for(const e in this.menu_items)for(const n of this.menu_items[e])n.quantity=this.order.items.reduce((i,o)=>o.id===n.id?i+o.quantity:i,0)}optionsFor(e){return e.options.map(n=>n.name).join("\n")}saveOrder(){this.event.emit({reason:"done",metadata:{order:this.order}})}confirmOrder(){this.show_order_details=!0}static#t=this.\u0275fac=function(n){return new(n||a)(t.rXU(B.yb),t.rXU(F.Vh))};static#e=this.\u0275cmp=t.VBU({type:a,selectors:[["app-catering-order-modal"]],outputs:{event:"event"},features:[t.Vt3],decls:6,vars:3,consts:[["load_state",""],["order_details",""],["order_actions",""],["class","main min-w-[20rem]",4,"ngIf","ngIfElse"],["class","flex items-center justify-center space-x-2 p-2 border-t border-base-200",4,"ngIf"],[1,"main","min-w-[20rem]"],[4,"ngIf","ngIfElse"],[4,"ngFor","ngForOf"],[3,"label",4,"ngIf"],[3,"label"],[1,"list"],["item","","class","flex items-center p-2 border-b border-base-200",4,"ngFor","ngForOf"],["item","",1,"flex","items-center","p-2","border-b","border-base-200"],[1,"flex-1","w-1/2"],["class","text-xs no-underline",4,"ngIf"],[1,"bg-primary","text-xs","rounded","px-4","py-2","mx-2","text-white","font-medium"],["ngDefaultControl","",3,"ngModel","ngModelChange",4,"ngIf"],["class","flex items-center",4,"ngIf"],[1,"text-xs","no-underline"],["ngDefaultControl","",3,"ngModelChange","ngModel"],[1,"flex","items-center"],[3,"matTooltip"],["icon","","matRipple","",3,"disabled"],[1,"count","h-12","w-12","flex","items-center","justify-center"],["icon","","matRipple","",3,"click"],[1,"flex","items-center","justify-center","space-x-2","p-2","border-t","border-base-200"],["btn","","matRipple","","mat-dialog-close","",1,"inverse"],["confirm","","btn","","matRipple","","matBadgeColor","warn",3,"click","disabled","matBadge","matBadgeHidden"],["matRipple","",1,"inverse",3,"click"],["save","","btn","","matRipple","",3,"click"],[1,"flex","flex-col","w-64","p-8","items-center","space-y-2"],["diameter","32"],[1,"h-[3.25rem]"],["class","text-xs underline",3,"matTooltip",4,"ngIf"],[3,"ngModelChange","ngModel"],[1,"text-xs","underline",3,"matTooltip"]],template:function(n,i){if(1&n&&t.DNE(0,Qn,2,2,"div",3)(1,qn,4,2,"footer",4)(2,Kn,4,1,"ng-template",null,0,t.C5r)(4,ni,5,1,"ng-template",null,1,t.C5r),2&n){const o=t.sdS(3);t.Y8G("ngIf",!i.loading)("ngIfElse",o),t.R7$(),t.Y8G("ngIf",!i.loading)}},dependencies:[_.Sq,_.bT,Ft,Qt,F.tx,ot.oV,m.me,m.BC,m.vS,x.R,v.r6,G.LG,Ct.s,_.oe],styles:[".list[_ngcontent-%COMP%]{height:24em;min-width:32em;max-width:calc(100vw - 1em)}footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:12em}input[_ngcontent-%COMP%]{position:relative;width:100%;padding:1em;border:none;border-radius:0!important;border-top:1px solid #ccc;border-bottom:1px solid #ccc;outline:none;font-size:1em}input[_ngcontent-%COMP%]:focus{border:none;border-top:2px solid var(--s);border-bottom:2px solid var(--s);box-shadow:none}input.error[_ngcontent-%COMP%]::placeholder{color:rgba(var(--error),.45)}\n\n/*# sourceMappingURL=catering-order-modal.component.ts-angular-inline--87.css.map*/"]})}return a})();var Q=l(3804);function ii(a,s){if(1&a&&(t.j41(0,"div",18),t.EFF(1),t.nI1(2,"currency"),t.k0s()),2&a){const e=t.XpG().$implicit,n=t.XpG(3);t.R7$(),t.SpI(" +",t.i5U(2,1,e.unit_price/100,n.code)," ")}}function ai(a,s){if(1&a&&(t.j41(0,"mat-radio-button",14)(1,"div",15)(2,"div",16),t.EFF(3),t.k0s(),t.DNE(4,ii,3,4,"div",17),t.k0s()()),2&a){const e=s.$implicit;t.Y8G("value",e.id),t.R7$(3),t.SpI(" ",e.name," "),t.R7$(),t.Y8G("ngIf",e.unit_price)}}function oi(a,s){if(1&a){const e=t.RV6();t.qex(0),t.j41(1,"mat-radio-group",10),t.bIt("ngModelChange",function(i){t.eBV(e);const o=t.XpG().$implicit,r=t.XpG();return t.Njj(r.updateGroupOption(o,i))}),t.j41(2,"mat-radio-button",11)(3,"span",12),t.EFF(4,"None"),t.k0s()(),t.DNE(5,ai,5,3,"mat-radio-button",13),t.k0s(),t.bVm()}if(2&a){const e=t.XpG().$implicit;t.R7$(5),t.Y8G("ngForOf",null==e?null:e.options)}}function ri(a,s){if(1&a&&(t.j41(0,"div",18),t.EFF(1),t.nI1(2,"currency"),t.k0s()),2&a){const e=t.XpG().$implicit,n=t.XpG(3);t.R7$(),t.SpI(" +",t.i5U(2,1,e.unit_price/100,n.code)," ")}}function si(a,s){if(1&a){const e=t.RV6();t.j41(0,"mat-checkbox",20),t.mxI("ngModelChange",function(i){const o=t.eBV(e).$implicit,r=t.XpG(3);return t.DH7(r.option_state[o.id],i)||(r.option_state[o.id]=i),t.Njj(i)}),t.j41(1,"div",15)(2,"div",16),t.EFF(3),t.k0s(),t.DNE(4,ri,3,4,"div",17),t.k0s()()}if(2&a){const e=s.$implicit,n=t.XpG(3);t.R50("ngModel",n.option_state[e.id]),t.R7$(3),t.SpI(" ",e.name," "),t.R7$(),t.Y8G("ngIf",e.unit_price)}}function ci(a,s){if(1&a&&t.DNE(0,si,5,3,"mat-checkbox",19),2&a){const e=t.XpG().$implicit;t.Y8G("ngForOf",null==e?null:e.options)}}function li(a,s){if(1&a&&(t.j41(0,"div",6)(1,"div",7),t.EFF(2),t.k0s(),t.j41(3,"div",8),t.DNE(4,oi,6,1,"ng-container",9)(5,ci,1,1,"ng-template",null,0,t.C5r),t.k0s()()),2&a){const e=s.$implicit,n=t.sdS(6);t.BMQ("group",e.name),t.R7$(2),t.JRh(e.name),t.R7$(2),t.Y8G("ngIf",!e.multiple)("ngIfElse",n)}}let qt=(()=>{class a{constructor(e){this._data=e,this.event=new t.bkB,this.option_state={},this.code=this._data.code;const n=(0,Dt.Am)(this._data.options.map(o=>o.group||"Other")),i=[];for(const o of n){const r=this._data.options.filter(c=>c.group===o);i.push({name:o,multiple:!!r.find(c=>c.multiple),options:r})}this.groups=i}updateGroupOption(e,n){for(const i of e.options)this.option_state[i.id]=i.id===n}saveOptions(){const e=this._data.options.filter(n=>this.option_state[n.id]);this.event.emit({reason:"done",metadata:{options:e}})}static#t=this.\u0275fac=function(n){return new(n||a)(t.rXU(F.Vh))};static#e=this.\u0275cmp=t.VBU({type:a,selectors:[["app-catering-options-modal"]],outputs:{event:"event"},decls:11,vars:1,consts:[["multi_options",""],["icon","","mat-dialog-close",""],[1,"overflow-auto"],["class","pt-1 pb-2 border-b border-base-200",4,"ngFor","ngForOf"],[1,"p-2"],["btn","","matRipple","",1,"w-32",3,"click"],[1,"pt-1","pb-2","border-b","border-base-200"],[1,"font-medium","p-2","capitalize"],[1,"flex","flex-col","pl-6"],[4,"ngIf","ngIfElse"],["aria-label","Select an option","ngModel","",1,"flex","flex-col",3,"ngModelChange"],["value","",1,"my-1","mx-0"],[1,"font-medium","p-2"],["class","my-1 mx-0",3,"value",4,"ngFor","ngForOf"],[1,"my-1","mx-0",3,"value"],[1,"flex","items-center","justify-center"],[1,"font-medium","p-2","flex-1","w-1/2"],["class","opacity-60 text-xs",4,"ngIf"],[1,"opacity-60","text-xs"],[3,"ngModel","ngModelChange",4,"ngFor","ngForOf"],[3,"ngModelChange","ngModel"]],template:function(n,i){1&n&&(t.j41(0,"header")(1,"h3"),t.EFF(2,"Select options"),t.k0s(),t.j41(3,"button",1)(4,"app-icon"),t.EFF(5,"close"),t.k0s()()(),t.j41(6,"main",2),t.DNE(7,li,7,4,"div",3),t.k0s(),t.j41(8,"footer",4)(9,"button",5),t.bIt("click",function(){return i.saveOptions()}),t.EFF(10," Save "),t.k0s()()),2&n&&(t.R7$(7),t.Y8G("ngForOf",i.groups))},dependencies:[_.Sq,_.bT,F.tx,A.So,Q.VT,Q._g,m.BC,m.vS,x.R,v.r6,_.oe],styles:["main[_ngcontent-%COMP%]{min-height:24em;width:24rem;max-width:calc(100vw - 2rem)}\n\n/*# sourceMappingURL=catering-order-options-modal.component.ts-angular-inline--88.css.map*/"]})}return a})();function di(a,s){1&a&&(t.j41(0,"button",4)(1,"app-icon"),t.EFF(2,"close"),t.k0s()())}function mi(a,s){if(1&a){const e=t.RV6();t.j41(0,"main")(1,"div",5)(2,"app-icon",6),t.EFF(3,"upload"),t.k0s(),t.j41(4,"p"),t.EFF(5,"Click to select file or Drag and drop files"),t.k0s(),t.j41(6,"input",7),t.bIt("change",function(i){t.eBV(e);const o=t.XpG();return t.Njj(o.handleFileEvent(i))}),t.k0s()(),t.j41(7,"div",8)(8,"button",9),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.downloadTemplate())}),t.EFF(9," Download Template "),t.k0s()()()}}function _i(a,s){if(1&a&&(t.j41(0,"main",10),t.nrm(1,"mat-spinner",11),t.j41(2,"p"),t.EFF(3),t.k0s()()),2&a){const e=t.XpG();t.R7$(3),t.JRh(e.loading)}}let Kt=(()=>{class a{constructor(){this.event=new t.bkB}handleFileEvent(e){this.loading="Processing menu data...";const n=e.target;if(!n?.files)return this.loading="";const i=n.files;if(!i.length)return this.loading="";const o=i[0],r=new FileReader;r.addEventListener("loadend",c=>{const p=(0,u.a6)(c.target.result);this.loading="",this.event.emit({reason:"done",metadata:p.filter(g=>"item"===(g.type||"").toLowerCase()).map(g=>new k.T({...g,options:p.filter(f=>"option"===(f.type||"").toLowerCase()&&f.tags===g.id).map(f=>({id:f.id,name:f.name,group:f.category,multiple:f.multiple,unit_price:f.unit_price}))}))})}),r.readAsText(o)}downloadTemplate(){(0,u.PE)("import-menu-template.csv","ID,Type,Name,Unit Price,Category,Description,Tags,Multiple\nitem-1,item,Coffee,200,Drink,Wake Up,,\noption-1,option,1 Sugar,20,Sugars,,item-1,false")}static#t=this.\u0275fac=function(n){return new(n||a)};static#e=this.\u0275cmp=t.VBU({type:a,selectors:[["catering-import-menu-modal"]],outputs:{event:"event"},decls:7,vars:3,consts:[["load_state",""],[1,"h-12","bg-primary","flex","items-center","justify-between","px-4"],["icon","","mat-dialog-close","",4,"ngIf"],[4,"ngIf","ngIfElse"],["icon","","mat-dialog-close",""],[1,"relative","flex","flex-col","items-center","justify-center","space-y-2","h-[24rem]","w-[24rem]","border-4","border-base-200","border-dashed","rounded-xl","hover:bg-base-200","m-4","p-4","cursor-pointer"],[1,"text-4xl"],["type","file",1,"absolute","inset-0","opacity-0",3,"change"],[1,"flex","items-center","justify-center","px-4","pb-4"],["matRipple","",1,"clear","underline","w-48",3,"click"],[1,"flex","flex-col","items-center","justify-center","space-y-2","p-8","h-[24rem]","w-[24rem]"],["diameter","32"]],template:function(n,i){if(1&n&&(t.j41(0,"header",1)(1,"h2"),t.EFF(2,"Import Catering Menu"),t.k0s(),t.DNE(3,di,3,0,"button",2),t.k0s(),t.DNE(4,mi,10,0,"main",3)(5,_i,4,1,"ng-template",null,0,t.C5r)),2&n){const o=t.sdS(6);t.R7$(3),t.Y8G("ngIf",!i.loading),t.R7$(),t.Y8G("ngIf",!i.loading)("ngIfElse",o)}},dependencies:[_.bT,F.tx,x.R,v.r6,G.LG]})}return a})(),ut=(()=>{class a extends u.Tv{get is_editable(){return!this.zone||this.zone===this._org.building?.id}get categories(){const e=this._menu.getValue();return(0,u.Am)(e.map(n=>n.category))}constructor(e,n,i){var o;super(),o=this,this._org=e,this._dialog=n,this._settings=i,this._updated=new y.t(0),this._menu=new y.t([]),this._loading=new y.t(!1),this._currency=new y.t("USD"),this._change=new y.t(0),this.menu=this._menu.asObservable(),this.loading=this._loading.asObservable(),this.currency=this._currency.asObservable(),this.settings=(0,H.zV)([this._org.active_building,this._change]).pipe((0,tt.p)(([r])=>!!r),(0,W.n)(([r])=>(0,D.bpY)(r.id,"catering-settings").pipe((0,et.W)(c=>(0,z.of)({})))),(0,I.T)(r=>r.details||{}),(0,dt.M)(r=>this._settings.post("require_catering_notes",!!r?.require_notes)),(0,nt.t)(1)),this.charge_codes=this.settings.pipe((0,I.T)(r=>r.charge_codes||[])),this.availability=this.settings.pipe((0,I.T)(r=>r.disabled_rooms||[])),this.zone="",this.subscription("building",this._org.active_building.subscribe(function(){var r=(0,h.A)(function*(c){if(c){const d=(yield o.getCateringForZone(c.id)).map(p=>new k.T(p));o._currency.next(o._settings.get("app.currency")||c.currency||"USD"),o._menu.next(d)}});return function(c){return r.apply(this,arguments)}}()))}manageCateringOrder(e){var n=this;return(0,h.A)(function*(){const i=n._dialog.open(Zt,{data:{code:n._currency.getValue(),order:e,menu:n.menu,loading:n.loading,getCateringConfig:r=>n.getCateringConfig(r),selectOptions:r=>n.selectOptions(r)}}),o=yield Promise.race([i.componentInstance.event.pipe((0,O.$)(r=>"done"===r.reason)).toPromise(),i.afterClosed().toPromise()]);return i.close(),o?.metadata?.order||e})()}addItem(e=new k.T){var n=this;return(0,h.A)(function*(){const i=n._dialog.open(Gt,{data:{item:e,categories:n.categories}}),o=yield Promise.race([i.componentInstance.event.pipe((0,O.$)(d=>"done"===d.reason)).toPromise(),i.afterClosed().toPromise()]);if("done"!==o?.reason)return;const r=n._menu.getValue(),c=r.findIndex(d=>d.id===e.id);c>=0?r.splice(c,1,o.metadata.item):r.push(o.metadata.item),n.updateMenu(n._org.building.id,r).then(()=>{n._menu.next([...r]),i.close()},()=>i.componentInstance.loading=!1)})()}updateItem(e){const n=this._menu.getValue(),i=n.findIndex(o=>o.id===e.id);i>=0?n.splice(i,1,e):n.push(e),this.updateMenu(this._org.building.id,n).then(()=>this._menu.next([...n]))}addOption(e,n={}){var i=this;return(0,h.A)(function*(){const o=(0,u.Am)(e.options.map(g=>g.group)),r=i._dialog.open($t,{data:{parent:e,option:n,types:o}}),c=yield Promise.race([r.componentInstance.event.pipe((0,O.$)(g=>"done"===g.reason)).toPromise(),r.afterClosed().toPromise()]);if("done"!==c?.reason)return;const d=i._menu.getValue(),p=d.findIndex(g=>g.id===e.id);p>=0?d.splice(p,1,c.metadata.item):d.push(c.metadata.item),i.updateMenu(i._org.building.id,d).then(()=>{i._menu.next([...d]),r.close()},()=>r.componentInstance.loading=!1)})()}selectOptions(e){var n=this;return(0,h.A)(function*(){const i=n._dialog.open(qt,{data:{code:n._currency.getValue(),options:e}}),o=yield Promise.race([i.componentInstance.event.pipe((0,O.$)(r=>"done"===r.reason)).toPromise(),i.afterClosed().toPromise()]);return"done"!==o?.reason?[]:(i.close(),o.metadata.options)})()}deleteItem(e){var n=this;return(0,h.A)(function*(){const i=yield(0,u.GE)({title:"Delete Catering Item",content:`Are you sure you wish to remove the catering item ${e.name} from the menu?`,icon:{type:"icon",class:"material-icons",content:"delete"}},n._dialog);if("done"!==i.reason)return;i.loading("Removing catering item...");const o=n._menu.getValue().filter(r=>e.id!==r.id);n.updateMenu(n._org.building.id,o).then(()=>{n._menu.next([...o]),i.close()},()=>i.loading(""))})()}deleteOption(e,n){var i=this;return(0,h.A)(function*(){const o=yield(0,u.GE)({title:"Delete Catering Item Option",content:`Are you sure you wish to remove the catering option "${n.name}" from "${e.name}"?`,icon:{type:"icon",class:"material-icons",content:"delete"}},i._dialog);if("done"!==o.reason)return;o.loading("Removing catering item option...");const r=i._menu.getValue();r.splice(r.findIndex(c=>c.id===e.id),1,new k.T({...e,options:e.options.filter(c=>c.id!==n.id)})),i.updateMenu(i._org.building.id,r).then(()=>{i._menu.next([...r]),o.close()},()=>o.loading(""))})()}editConfig(){var e=this;return(0,h.A)(function*(){const n=yield e.getCateringConfig(e._org.building.id),{require_notes:i}=yield e.settings.pipe((0,L.s)(1)).toPromise(),o=e._menu.getValue(),r=(0,u.Am)((0,u.Bq)(o.map(p=>[p.category,...p.tags]))),c=e._dialog.open(qe.Rt,{data:{config:n,types:r,require_notes:i,saveNotes:p=>e.saveSettings({require_notes:p})}}),d=yield Promise.race([c.componentInstance.event.pipe((0,O.$)(p=>"done"===p.reason)).toPromise(),c.afterClosed().toPromise()]);"done"===d?.reason&&e.updateConfig(e._org.building.id,d.metadata).then(()=>c.close(),()=>c.componentInstance.loading=!1)})()}importMenu(){var e=this;return(0,h.A)(function*(){const n=e._dialog.open(Kt),i=yield Promise.race([n.componentInstance.event.pipe((0,O.$)(d=>"done"===d.reason)).toPromise(),n.afterClosed().toPromise()]);if("done"!==i?.reason)return;n.componentInstance.loading="Updating menu...";const o=e._menu.getValue(),r=e._org.building,c=(0,u.Am)(i.metadata.concat(o),"id");yield e.updateMenu(r.id,c).catch(d=>{throw(0,u.UG)("Error importing catering menu"),n.close(),d}),(0,u.VX)(`Successfully imported catering menu. ${i.metadata.length} item(s) added.`),n.close()})()}updateMenu(e,n){return(0,D.D58)(e,{id:e,name:"catering",details:n,description:`Catering menu for ${e}`}).toPromise()}saveSettings(e){var n=this;return(0,h.A)(function*(){const i=yield n.settings.pipe((0,L.s)(1)).toPromise(),o=yield(0,D.D58)(n._org.building.id,{id:n._org.building.id,name:"catering-settings",details:{...i,...e},description:`Catering settings for ${n._org.building.id}`}).toPromise();return n._change.next(Date.now()),o})()}getCateringForZone(e){return(0,h.A)(function*(){const n=(yield(0,D.bpY)(e,"catering").toPromise()).details;return n instanceof Array?n:[]})()}getCateringConfig(e=this._org.building.id){return(0,h.A)(function*(){const n=(yield(0,D.bpY)(e,"catering_config").toPromise()).details;return n instanceof Array?n:[]})()}updateConfig(e,n){return(0,D.D58)(e,{id:e,name:"catering_config",details:n,description:`Catering menu config for ${e}`}).toPromise()}addItemToOrder(e,n){let i=e.items;const o=i.find(c=>c.id===n.id&&n.options?.length===c.options?.reduce((d,p)=>d+(n.options.find(g=>p.id===g.id)?1:0),0));return o?o.quantity+=1:i=i.concat([new k.T({...n,quantity:1})]),new R.M({...e,items:i,event:null})}static#t=this.\u0275fac=function(n){return new(n||a)(t.KVO(B.yb),t.KVO(F.bZ),t.KVO(u.h$))};static#e=this.\u0275prov=t.jDH({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})();l(1034),l(7419),l(3264),l(1031),l(1416),l(6727),l(3208),l(5277),l(6021),l(433);var le=l(5175);l(3476);const Ha=()=>["/welcome"];function za(a,s){if(1&a&&(t.j41(0,"mat-option",8),t.EFF(1),t.k0s()),2&a){const e=s.$implicit;t.Y8G("value",e),t.R7$(),t.SpI(" ",e.name," ")}}let Wa=(()=>{class a{constructor(e,n,i){this._router=e,this._checkin=n,this._catering=i,this.menu=this._catering.menu.pipe((0,I.T)(o=>o.filter(r=>r.tags.find(c=>"drink"===c.toLowerCase()||"drinks"===c.toLowerCase()||"beverage"===c.toLowerCase()))))}update(){var e=this;return(0,h.A)(function*(){return e.beverage?(yield e._checkin.event.pipe((0,O.$)(i=>!!i)).toPromise())?((0,u.VX)("Successfully update event."),void e.next()):(0,u.UG)("Unable to load event data."):e.next()})()}next(){this._router.navigate(["/welcome"])}static#t=this.\u0275fac=function(n){return new(n||a)(t.rXU(M.Ix),t.rXU($),t.rXU(ut))};static#e=this.\u0275cmp=t.VBU({type:a,selectors:[["checkin-preferences"]],decls:13,vars:7,consts:[[1,"bg-base-100","rounded","shadow","overflow-hidden","relative","flex","flex-col","items-center","w-[36rem]","p-4"],[1,"text-xl","mb-2","w-full"],[1,"w-full"],["appearance","outline",1,"w-full"],["placeholder","Select beverage",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["btn","","matRipple","",1,"w-32",3,"click"],["icon","","matRipple","",1,"absolute","top-0","right-0",3,"routerLink"],[3,"value"]],template:function(n,i){1&n&&(t.j41(0,"div",0)(1,"h3",1),t.EFF(2,"Would you like a drink?"),t.k0s(),t.j41(3,"div",2)(4,"mat-form-field",3)(5,"mat-select",4),t.mxI("ngModelChange",function(r){return t.DH7(i.beverage,r)||(i.beverage=r),r}),t.DNE(6,za,2,2,"mat-option",5),t.nI1(7,"async"),t.k0s()()(),t.j41(8,"button",6),t.bIt("click",function(){return i.update()}),t.EFF(9),t.k0s(),t.j41(10,"a",7)(11,"app-icon"),t.EFF(12,"close"),t.k0s()()()),2&n&&(t.R7$(5),t.R50("ngModel",i.beverage),t.R7$(),t.Y8G("ngForOf",t.bMT(7,4,i.menu)),t.R7$(3),t.SpI(" ",i.beverage?"Update":"Continue"," "),t.R7$(),t.Y8G("routerLink",t.lJ4(6,Ha)))},dependencies:[_.Sq,m.BC,m.vS,x.R,v.wT,j.rl,le.VO,v.r6,M.Wk,_.Jj],styles:["[_nghost-%COMP%] > div[_ngcontent-%COMP%]{max-width:calc(100vw - 2rem)}\n\n/*# sourceMappingURL=checkin-preferences.component.ts-angular-inline--96.css.map*/"]})}return a})();const _e=(()=>{class a{constructor(e,n,i,o,r){this._legacyCanvasSize=a.DEFAULT_CANVAS_SIZE,this._preferredCamera="environment",this._maxScansPerSecond=25,this._lastScanTimestamp=-1,this._destroyed=this._flashOn=this._paused=this._active=!1,this.$video=e,this.$canvas=document.createElement("canvas"),i&&"object"==typeof i?this._onDecode=n:(console.warn(i||o||r?"You're using a deprecated version of the QrScanner constructor which will be removed in the future":"Note that the type of the scan result passed to onDecode will change in the future. To already switch to the new api today, you can pass returnDetailedScanResult: true."),this._legacyOnDecode=n),this._onDecodeError=(n="object"==typeof i?i:{}).onDecodeError||("function"==typeof i?i:this._onDecodeError),this._calculateScanRegion=n.calculateScanRegion||("function"==typeof o?o:this._calculateScanRegion),this._preferredCamera=n.preferredCamera||r||this._preferredCamera,this._legacyCanvasSize="number"==typeof i?i:"number"==typeof o?o:this._legacyCanvasSize,this._maxScansPerSecond=n.maxScansPerSecond||this._maxScansPerSecond,this._onPlay=this._onPlay.bind(this),this._onLoadedMetaData=this._onLoadedMetaData.bind(this),this._onVisibilityChange=this._onVisibilityChange.bind(this),this._updateOverlay=this._updateOverlay.bind(this),e.disablePictureInPicture=!0,e.playsInline=!0,e.muted=!0;let c=!1;if(e.hidden&&(e.hidden=!1,c=!0),document.body.contains(e)||(document.body.appendChild(e),c=!0),i=e.parentElement,n.highlightScanRegion||n.highlightCodeOutline){if(o=!!n.overlay,this.$overlay=n.overlay||document.createElement("div"),(r=this.$overlay.style).position="absolute",r.display="none",r.pointerEvents="none",this.$overlay.classList.add("scan-region-highlight"),!o&&n.highlightScanRegion){this.$overlay.innerHTML='<svg class="scan-region-highlight-svg" viewBox="0 0 238 238" preserveAspectRatio="none" style="position:absolute;width:100%;height:100%;left:0;top:0;fill:none;stroke:#e9b213;stroke-width:4;stroke-linecap:round;stroke-linejoin:round"><path d="M31 2H10a8 8 0 0 0-8 8v21M207 2h21a8 8 0 0 1 8 8v21m0 176v21a8 8 0 0 1-8 8h-21m-176 0H10a8 8 0 0 1-8-8v-21"/></svg>';try{this.$overlay.firstElementChild.animate({transform:["scale(.98)","scale(1.01)"]},{duration:400,iterations:1/0,direction:"alternate",easing:"ease-in-out"})}catch{}i.insertBefore(this.$overlay,this.$video.nextSibling)}n.highlightCodeOutline&&(this.$overlay.insertAdjacentHTML("beforeend",'<svg class="code-outline-highlight" preserveAspectRatio="none" style="display:none;width:100%;height:100%;fill:none;stroke:#e9b213;stroke-width:5;stroke-dasharray:25;stroke-linecap:round;stroke-linejoin:round"><polygon/></svg>'),this.$codeOutlineHighlight=this.$overlay.lastElementChild)}this._scanRegion=this._calculateScanRegion(e),requestAnimationFrame(()=>{let d=window.getComputedStyle(e);"none"===d.display&&(e.style.setProperty("display","block","important"),c=!0),"visible"!==d.visibility&&(e.style.setProperty("visibility","visible","important"),c=!0),c&&(console.warn("QrScanner has overwritten the video hiding style to avoid Safari stopping the playback."),e.style.opacity="0",e.style.width="0",e.style.height="0",this.$overlay&&this.$overlay.parentElement&&this.$overlay.parentElement.removeChild(this.$overlay),delete this.$overlay,delete this.$codeOutlineHighlight),this.$overlay&&this._updateOverlay()}),e.addEventListener("play",this._onPlay),e.addEventListener("loadedmetadata",this._onLoadedMetaData),document.addEventListener("visibilitychange",this._onVisibilityChange),window.addEventListener("resize",this._updateOverlay),this._qrEnginePromise=a.createQrEngine()}static set WORKER_PATH(e){console.warn("Setting QrScanner.WORKER_PATH is not required and not supported anymore. Have a look at the README for new setup instructions.")}static hasCamera(){return(0,h.A)(function*(){try{return!!(yield a.listCameras(!1)).length}catch{return!1}})()}static listCameras(e=!1){return(0,h.A)(function*(){if(!navigator.mediaDevices)return[];let i,n=function(){var o=(0,h.A)(function*(){return(yield navigator.mediaDevices.enumerateDevices()).filter(r=>"videoinput"===r.kind)});return function(){return o.apply(this,arguments)}}();try{e&&(yield n()).every(o=>!o.label)&&(i=yield navigator.mediaDevices.getUserMedia({audio:!1,video:!0}))}catch{}try{return(yield n()).map((o,r)=>({id:o.deviceId,label:o.label||(0===r?"Default Camera":`Camera ${r+1}`)}))}finally{i&&(console.warn("Call listCameras after successfully starting a QR scanner to avoid creating a temporary video stream"),a._stopVideoStream(i))}})()}hasFlash(){var e=this;return(0,h.A)(function*(){let n;try{if(e.$video.srcObject){if(!(e.$video.srcObject instanceof MediaStream))return!1;n=e.$video.srcObject}else n=(yield e._getCameraStream()).stream;return"torch"in n.getVideoTracks()[0].getSettings()}catch{return!1}finally{n&&n!==e.$video.srcObject&&(console.warn("Call hasFlash after successfully starting the scanner to avoid creating a temporary video stream"),a._stopVideoStream(n))}})()}isFlashOn(){return this._flashOn}toggleFlash(){var e=this;return(0,h.A)(function*(){e._flashOn?yield e.turnFlashOff():yield e.turnFlashOn()})()}turnFlashOn(){var e=this;return(0,h.A)(function*(){if(!e._flashOn&&!e._destroyed&&(e._flashOn=!0,e._active&&!e._paused))try{if(!(yield e.hasFlash()))throw"No flash available";yield e.$video.srcObject.getVideoTracks()[0].applyConstraints({advanced:[{torch:!0}]})}catch(n){throw e._flashOn=!1,n}})()}turnFlashOff(){var e=this;return(0,h.A)(function*(){e._flashOn&&(e._flashOn=!1,yield e._restartVideoStream())})()}destroy(){this.$video.removeEventListener("loadedmetadata",this._onLoadedMetaData),this.$video.removeEventListener("play",this._onPlay),document.removeEventListener("visibilitychange",this._onVisibilityChange),window.removeEventListener("resize",this._updateOverlay),this._destroyed=!0,this._flashOn=!1,this.stop(),a._postWorkerMessage(this._qrEnginePromise,"close")}start(){var e=this;return(0,h.A)(function*(){if(e._destroyed)throw Error("The QR scanner can not be started as it had been destroyed.");if((!e._active||e._paused)&&("https:"!==window.location.protocol&&console.warn("The camera stream is only accessible if the page is transferred via https."),e._active=!0,!document.hidden))if(e._paused=!1,e.$video.srcObject)yield e.$video.play();else try{let{stream:n,facingMode:i}=yield e._getCameraStream();!e._active||e._paused?a._stopVideoStream(n):(e._setVideoMirror(i),e.$video.srcObject=n,yield e.$video.play(),e._flashOn&&(e._flashOn=!1,e.turnFlashOn().catch(()=>{})))}catch(n){if(!e._paused)throw e._active=!1,n}})()}stop(){this.pause(),this._active=!1}pause(e=!1){var n=this;return(0,h.A)(function*(){if(n._paused=!0,!n._active)return!0;n.$video.pause(),n.$overlay&&(n.$overlay.style.display="none");let i=()=>{n.$video.srcObject instanceof MediaStream&&(a._stopVideoStream(n.$video.srcObject),n.$video.srcObject=null)};return e?(i(),!0):(yield new Promise(o=>setTimeout(o,300)),!!n._paused&&(i(),!0))})()}setCamera(e){var n=this;return(0,h.A)(function*(){e!==n._preferredCamera&&(n._preferredCamera=e,yield n._restartVideoStream())})()}static scanImage(e,n,i,o,r=!1,c=!1){return(0,h.A)(function*(){let d,p=!1;n&&("scanRegion"in n||"qrEngine"in n||"canvas"in n||"disallowCanvasResizing"in n||"alsoTryWithoutScanRegion"in n||"returnDetailedScanResult"in n)?(d=n.scanRegion,i=n.qrEngine,o=n.canvas,r=n.disallowCanvasResizing||!1,c=n.alsoTryWithoutScanRegion||!1,p=!0):console.warn(n||i||o||r||c?"You're using a deprecated api for scanImage which will be removed in the future.":"Note that the return type of scanImage will change in the future. To already switch to the new api today, you can pass returnDetailedScanResult: true."),n=!!i;try{let g,f,T;if([i,g]=yield Promise.all([i||a.createQrEngine(),a._loadImage(e)]),[o,f]=a._drawToCanvas(g,d,o,r),i instanceof Worker){let b=i;n||a._postWorkerMessageSync(b,"inversionMode","both"),T=yield new Promise((C,E)=>{let P,Z,S,bt=-1;Z=N=>{N.data.id===bt&&(b.removeEventListener("message",Z),b.removeEventListener("error",S),clearTimeout(P),null!==N.data.data?C({data:N.data.data,cornerPoints:a._convertPoints(N.data.cornerPoints,d)}):E(a.NO_QR_CODE_FOUND))},S=N=>{b.removeEventListener("message",Z),b.removeEventListener("error",S),clearTimeout(P),E("Scanner error: "+(N?N.message||N:"Unknown Error"))},b.addEventListener("message",Z),b.addEventListener("error",S),P=setTimeout(()=>S("timeout"),1e4);let rt=f.getImageData(0,0,o.width,o.height);bt=a._postWorkerMessageSync(b,"decode",rt,[rt.data.buffer])})}else T=yield Promise.race([new Promise((b,C)=>window.setTimeout(()=>C("Scanner error: timeout"),1e4)),(0,h.A)(function*(){try{var[b]=yield i.detect(o);if(!b)throw a.NO_QR_CODE_FOUND;return{data:b.rawValue,cornerPoints:a._convertPoints(b.cornerPoints,d)}}catch(C){if(/not implemented|service unavailable/.test(b=C.message||C))return a._disableBarcodeDetector=!0,a.scanImage(e,{scanRegion:d,canvas:o,disallowCanvasResizing:r,alsoTryWithoutScanRegion:c});throw`Scanner error: ${b}`}})()]);return p?T:T.data}catch(g){if(!d||!c)throw g;let f=yield a.scanImage(e,{qrEngine:i,canvas:o,disallowCanvasResizing:r});return p?f:f.data}finally{n||a._postWorkerMessage(i,"close")}})()}setGrayscaleWeights(e,n,i,o=!0){a._postWorkerMessage(this._qrEnginePromise,"grayscaleWeights",{red:e,green:n,blue:i,useIntegerApproximation:o})}setInversionMode(e){a._postWorkerMessage(this._qrEnginePromise,"inversionMode",e)}static createQrEngine(e){return(0,h.A)(function*(){if(e&&console.warn("Specifying a worker path is not required and not supported anymore."),e=()=>l.e("node_modules_qr-scanner_qr-scanner-worker_min_js").then(l.bind(l,5614)).then(i=>i.createWorker()),a._disableBarcodeDetector||!("BarcodeDetector"in window)||!BarcodeDetector.getSupportedFormats||!(yield BarcodeDetector.getSupportedFormats()).includes("qr_code"))return e();let n=navigator.userAgentData;return n&&n.brands.some(({brand:i})=>/Chromium/i.test(i))&&/mac ?OS/i.test(n.platform)&&(yield n.getHighEntropyValues(["architecture","platformVersion"]).then(({architecture:i,platformVersion:o})=>/arm/i.test(i||"arm")&&13<=parseInt(o||"13")).catch(()=>!0))?e():new BarcodeDetector({formats:["qr_code"]})})()}_onPlay(){this._scanRegion=this._calculateScanRegion(this.$video),this._updateOverlay(),this.$overlay&&(this.$overlay.style.display=""),this._scanFrame()}_onLoadedMetaData(){this._scanRegion=this._calculateScanRegion(this.$video),this._updateOverlay()}_onVisibilityChange(){document.hidden?this.pause():this._active&&this.start()}_calculateScanRegion(e){let n=Math.round(.6666666666666666*Math.min(e.videoWidth,e.videoHeight));return{x:Math.round((e.videoWidth-n)/2),y:Math.round((e.videoHeight-n)/2),width:n,height:n,downScaledWidth:this._legacyCanvasSize,downScaledHeight:this._legacyCanvasSize}}_updateOverlay(){requestAnimationFrame(()=>{if(this.$overlay){var e=this.$video,n=e.videoWidth,i=e.videoHeight,o=e.offsetWidth,r=e.offsetHeight,c=e.offsetLeft,d=e.offsetTop,p=window.getComputedStyle(e),g=p.objectFit,f=n/i,T=o/r;switch(g){case"none":var b=n,C=i;break;case"fill":b=o,C=r;break;default:("cover"===g?f>T:f<T)?b=(C=r)*f:C=(b=o)/f,"scale-down"===g&&(b=Math.min(b,n),C=Math.min(C,i))}var[E,P]=p.objectPosition.split(" ").map((S,bt)=>{const rt=parseFloat(S);return S.endsWith("%")?(bt?r-C:o-b)*rt/100:rt});T=this._scanRegion.height||i,g=this._scanRegion.x||0;var Z=this._scanRegion.y||0;(f=this.$overlay.style).width=(p=this._scanRegion.width||n)/n*b+"px",f.height=T/i*C+"px",f.top=`${d+P+Z/i*C}px`,i=/scaleX\(-1\)/.test(e.style.transform),f.left=`${c+(i?o-E-b:E)+(i?n-g-p:g)/n*b}px`,f.transform=e.style.transform}})}static _convertPoints(e,n){if(!n)return e;let i=n.x||0,o=n.y||0,r=n.width&&n.downScaledWidth?n.width/n.downScaledWidth:1;n=n.height&&n.downScaledHeight?n.height/n.downScaledHeight:1;for(let c of e)c.x=c.x*r+i,c.y=c.y*n+o;return e}_scanFrame(){var e=this;!this._active||this.$video.paused||this.$video.ended||("requestVideoFrameCallback"in this.$video?this.$video.requestVideoFrameCallback.bind(this.$video):requestAnimationFrame)((0,h.A)(function*(){if(!(1>=e.$video.readyState)){var n=Date.now()-e._lastScanTimestamp,i=1e3/e._maxScansPerSecond;n<i&&(yield new Promise(r=>setTimeout(r,i-n))),e._lastScanTimestamp=Date.now();try{var o=yield a.scanImage(e.$video,{scanRegion:e._scanRegion,qrEngine:e._qrEnginePromise,canvas:e.$canvas})}catch(r){if(!e._active)return;e._onDecodeError(r)}!a._disableBarcodeDetector||(yield e._qrEnginePromise)instanceof Worker||(e._qrEnginePromise=a.createQrEngine()),o?(e._onDecode?e._onDecode(o):e._legacyOnDecode&&e._legacyOnDecode(o.data),e.$codeOutlineHighlight&&(clearTimeout(e._codeOutlineHighlightRemovalTimeout),e._codeOutlineHighlightRemovalTimeout=void 0,e.$codeOutlineHighlight.setAttribute("viewBox",`${e._scanRegion.x||0} ${e._scanRegion.y||0} ${e._scanRegion.width||e.$video.videoWidth} ${e._scanRegion.height||e.$video.videoHeight}`),e.$codeOutlineHighlight.firstElementChild.setAttribute("points",o.cornerPoints.map(({x:r,y:c})=>`${r},${c}`).join(" ")),e.$codeOutlineHighlight.style.display="")):e.$codeOutlineHighlight&&!e._codeOutlineHighlightRemovalTimeout&&(e._codeOutlineHighlightRemovalTimeout=setTimeout(()=>e.$codeOutlineHighlight.style.display="none",100))}e._scanFrame()}))}_onDecodeError(e){e!==a.NO_QR_CODE_FOUND&&console.log(e)}_getCameraStream(){var e=this;return(0,h.A)(function*(){if(!navigator.mediaDevices)throw"Camera not found.";let n=/^(environment|user)$/.test(e._preferredCamera)?"facingMode":"deviceId",i=[{width:{min:1024}},{width:{min:768}},{}],o=i.map(r=>Object.assign({},r,{[n]:{exact:e._preferredCamera}}));for(let r of[...o,...i])try{let c=yield navigator.mediaDevices.getUserMedia({video:r,audio:!1});return{stream:c,facingMode:e._getFacingMode(c)||(r.facingMode?e._preferredCamera:"environment"===e._preferredCamera?"user":"environment")}}catch{}throw"Camera not found."})()}_restartVideoStream(){var e=this;return(0,h.A)(function*(){let n=e._paused;(yield e.pause(!0))&&!n&&e._active&&(yield e.start())})()}static _stopVideoStream(e){for(let n of e.getTracks())n.stop(),e.removeTrack(n)}_setVideoMirror(e){this.$video.style.transform="scaleX("+("user"===e?-1:1)+")"}_getFacingMode(e){return(e=e.getVideoTracks()[0])?/rear|back|environment/i.test(e.label)?"environment":/front|user|face/i.test(e.label)?"user":null:null}static _drawToCanvas(e,n,i,o=!1){i=i||document.createElement("canvas");let r=n&&n.x?n.x:0,c=n&&n.y?n.y:0,d=n&&n.width?n.width:e.videoWidth||e.width,p=n&&n.height?n.height:e.videoHeight||e.height;return o||(o=n&&n.downScaledWidth?n.downScaledWidth:d,n=n&&n.downScaledHeight?n.downScaledHeight:p,i.width!==o&&(i.width=o),i.height!==n&&(i.height=n)),(n=i.getContext("2d",{alpha:!1})).imageSmoothingEnabled=!1,n.drawImage(e,r,c,d,p,0,0,i.width,i.height),[i,n]}static _loadImage(e){return(0,h.A)(function*(){if(e instanceof Image)return yield a._awaitImageLoad(e),e;if(e instanceof HTMLVideoElement||e instanceof HTMLCanvasElement||e instanceof SVGImageElement||"OffscreenCanvas"in window&&e instanceof OffscreenCanvas||"ImageBitmap"in window&&e instanceof ImageBitmap)return e;if(!(e instanceof File||e instanceof Blob||e instanceof URL||"string"==typeof e))throw"Unsupported image type.";{let n=new Image;n.src=e instanceof File||e instanceof Blob?URL.createObjectURL(e):e.toString();try{return yield a._awaitImageLoad(n),n}finally{(e instanceof File||e instanceof Blob)&&URL.revokeObjectURL(n.src)}}})()}static _awaitImageLoad(e){return(0,h.A)(function*(){e.complete&&0!==e.naturalWidth||(yield new Promise((n,i)=>{let o=r=>{e.removeEventListener("load",o),e.removeEventListener("error",o),r instanceof ErrorEvent?i("Image load error"):n()};e.addEventListener("load",o),e.addEventListener("error",o)}))})()}static _postWorkerMessage(e,n,i,o){return(0,h.A)(function*(){return a._postWorkerMessageSync(yield e,n,i,o)})()}static _postWorkerMessageSync(e,n,i,o){if(!(e instanceof Worker))return-1;let r=a._workerMessageId++;return e.postMessage({id:r,type:n,data:i},o),r}}return a.DEFAULT_CANVAS_SIZE=400,a.NO_QR_CODE_FOUND="No QR code found",a._disableBarcodeDetector=!1,a._workerMessageId=0,a})(),Qa=["video"],Ja=["checkin-qr-scan",""],Za=()=>["/welcome"];let qa=(()=>{class a extends u.Tv{get is_induction_enabled(){return this._settings.get("app.induction_enabled")&&this._settings.get("app.induction_details")}get induction_after_details(){return this._settings.get("app.induction_after_details")}constructor(e,n,i){super(),this._checkin=e,this._router=n,this._settings=i,this.checking_code=!1}ngAfterViewInit(){this.setupQRReader()}ngOnDestroy(){this._video_el.nativeElement.srcObject&&this._video_el.nativeElement.srcObject.getTracks().forEach(e=>e?.stop()),this._reader?.stop()}checkQRCode(e){var n=this;return(0,h.A)(function*(){n.checking_code||n.timeout("check_qr_code",(0,h.A)(function*(){n._reader?.stop(),n.checking_code=!0;const i=e.split(",");let[o,r,c,d]=i;const[p,g]=o.split(":");if(!g&&!c)return(0,u.UG)("Invalid QRCode"),n.setupQRReader(),void(n.checking_code=!1);/^\d+$/.test(c)||(c=void 0),yield n._checkin.loadGuestAndEvent(g,c).catch(T=>{throw n.handleError(T.message||T),n.checking_code=!1,T});const f=yield n._checkin.event.pipe((0,L.s)(1)).toPromise();if(f.rejected)return n.handleError("Your meeting has been rejected."),void(n.checking_code=!1);n._router.navigate(n.is_induction_enabled&&!f?.induction?["/checkin","induction"]:["/checkin","details"]),n.checking_code=!1}))})()}checkEmail(e){var n=this;return(0,h.A)(function*(){!e||!e.includes("@")||e.length<5||(yield n._checkin.loadGuestAndEvent(e).catch(o=>{throw n.handleError("Unable to find visitor or a meeting associated with the given email address."),o}),(yield n._checkin.event.pipe((0,L.s)(1)).toPromise())?.induction||!n.is_induction_enabled||n.induction_after_details?n._router.navigate(["/checkin","details"]):n._router.navigate(["/checkin","induction"]))})()}setupQRReader(){this.timeout("setup_qr_reader",()=>{if(!this._video_el?.nativeElement)return this.setupQRReader();navigator.mediaDevices?.getUserMedia&&navigator.mediaDevices.getUserMedia({video:!0}).then(e=>this._video_el.nativeElement.srcObject=e).catch(e=>console.error("Unable to fetch media devices!",e)),_e&&(this._reader=new _e(this._video_el.nativeElement,e=>this.checkQRCode(e)),this._reader.start())})}handleError(e){this._checkin.setError(e?.statusText||e),this._router.navigate(["/checkin","error"])}static#t=this.\u0275fac=function(n){return new(n||a)(t.rXU($),t.rXU(M.Ix),t.rXU(u.h$))};static#e=this.\u0275cmp=t.VBU({type:a,selectors:[["","checkin-qr-scan",""]],viewQuery:function(n,i){if(1&n&&t.GBs(Qa,7),2&n){let o;t.mGM(o=t.lsd())&&(i._video_el=o.first)}},features:[t.Vt3],attrs:Ja,decls:25,vars:7,consts:[["video",""],[1,"bg-base-100","rounded","shadow","overflow-hidden","relative","flex","flex-col","items-center","w-[36rem]","p-4"],[1,"my-4"],[1,"flex","items-center","space-x-2","w-full"],["appearance","outline",1,"w-px","flex-1","no-subscript"],["matInput","","placeholder","Enter email...","type","email","autocomplete","off",3,"ngModelChange","blur","keyup.enter","ngModel"],["btn","","matRipple","",3,"click"],[1,"relative","rounded","mt-4","bg-base-200","border","border-base-200","overflow-hidden"],[1,"absolute","top-1/2","left-1/2","-translate-x-1/2","-translate-y-1/2","opacity-30","flex","flex-col","items-center","space-y-2","z-0"],[1,"text-6xl"],[1,"text-center"],["id","qr-stream","playsinline","","width","640","height","480","autoplay","",1,"object-cover","relative","z-10"],["icon","","matRipple","",1,"absolute","top-0","right-0",3,"routerLink"],[1,"bg-base-100","rounded","shadow","overflow-hidden","relative","flex","flex-col","items-center","p-16"],["diameter","32"]],template:function(n,i){if(1&n){const o=t.RV6();t.j41(0,"div",1)(1,"p",2),t.EFF(2," Please enter your email address or scan your QR code "),t.k0s(),t.j41(3,"div",3)(4,"mat-form-field",4)(5,"input",5),t.mxI("ngModelChange",function(c){return t.eBV(o),t.DH7(i.email,c)||(i.email=c),t.Njj(c)}),t.bIt("blur",function(){return t.eBV(o),t.Njj(i.checkEmail(i.email))})("keyup.enter",function(){return t.eBV(o),t.Njj(i.checkEmail(i.email))}),t.k0s(),t.j41(6,"mat-error"),t.EFF(7,"Invalid email format"),t.k0s()(),t.j41(8,"button",6),t.bIt("click",function(){return t.eBV(o),t.Njj(i.checkEmail(i.email))}),t.EFF(9," Find Details "),t.k0s()(),t.j41(10,"div",7)(11,"div",8)(12,"app-icon",9),t.EFF(13,"videocam_off"),t.k0s(),t.j41(14,"p",10),t.EFF(15," Camera feed loading or is not available "),t.k0s()(),t.nrm(16,"video",11,0),t.k0s(),t.j41(18,"a",12)(19,"app-icon"),t.EFF(20,"close"),t.k0s()()(),t.j41(21,"div",13),t.nrm(22,"mat-spinner",14),t.j41(23,"p",2),t.EFF(24,"Loading visitor information..."),t.k0s()()}2&n&&(t.AVh("hidden",i.checking_code),t.R7$(5),t.R50("ngModel",i.email),t.R7$(13),t.Y8G("routerLink",t.lJ4(6,Za)),t.R7$(3),t.AVh("hidden",!i.checking_code))},dependencies:[m.me,m.BC,m.vS,x.R,j.rl,j.TL,v.r6,U.fg,G.LG,M.Wk],styles:["video[_ngcontent-%COMP%]{width:34rem;height:24rem}a[_ngcontent-%COMP%]{position:absolute}\n\n/*# sourceMappingURL=checkin-qr-scan.component.ts-angular-inline--97.css.map*/"]})}return a})();var jt=l(6247),Ka=l(6264),to=l(3574),eo=l(4846),no=l(4616);const io=()=>({});function ao(a,s){if(1&a&&(t.j41(0,"div",22),t.EFF(1),t.nI1(2,"async"),t.nI1(3,"async"),t.k0s()),2&a){let e;const n=t.XpG(2);t.R7$(),t.SpI(" Cleared for ",(null==(e=t.bMT(2,1,n.level))?null:e.display_name)||(null==(e=t.bMT(3,3,n.level))?null:e.name)," ")}}function oo(a,s){if(1&a){const e=t.RV6();t.j41(0,"button",21),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.print())}),t.EFF(1," Print Label "),t.k0s()}}function ro(a,s){if(1&a){const e=t.RV6();t.j41(0,"div",1)(1,"h3",2),t.EFF(2,"You are checked in!"),t.k0s(),t.nrm(3,"div",3),t.nI1(4,"async"),t.nI1(5,"sanitize"),t.j41(6,"div",4)(7,"div",5)(8,"div",6),t.nrm(9,"a-user-avatar",7),t.k0s(),t.j41(10,"div",8),t.EFF(11),t.nI1(12,"async"),t.k0s(),t.j41(13,"div",9),t.EFF(14),t.nI1(15,"async"),t.k0s(),t.j41(16,"div",10),t.EFF(17),t.nI1(18,"async"),t.k0s(),t.j41(19,"div",11),t.EFF(20," Visitor "),t.k0s()(),t.j41(21,"div",12),t.nrm(22,"img",13),t.DNE(23,ao,4,5,"div",14),t.nI1(24,"async"),t.j41(25,"pre",15),t.EFF(26),t.nI1(27,"async"),t.k0s()(),t.j41(28,"div",16)(29,"div",17)(30,"div"),t.EFF(31),t.nI1(32,"async"),t.nI1(33,"date"),t.k0s(),t.j41(34,"div"),t.EFF(35),t.nI1(36,"async"),t.nI1(37,"date"),t.k0s()(),t.nrm(38,"div",18),t.k0s()(),t.j41(39,"div",19),t.DNE(40,oo,2,0,"button",20),t.j41(41,"button",21),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.next())}),t.EFF(42," Done "),t.k0s()()()}if(2&a){let e,n,i,o,r,c;const d=t.XpG();t.R7$(3),t.Y8G("innerHTML",t.i5U(5,13,t.bMT(4,11,d.result_template),"html"),t.npT),t.R7$(6),t.Y8G("user",t.lJ4(36,io)),t.R7$(2),t.SpI(" ",null==(e=t.bMT(12,16,d.event))?null:e.asset_name," "),t.R7$(3),t.SpI(" For: ",null==(n=t.bMT(15,18,d.event))?null:n.title," "),t.R7$(3),t.SpI(" Seeing ",null==(i=t.bMT(18,20,d.event))?null:i.user_name," "),t.R7$(5),t.Y8G("src",null==d.logo?null:d.logo.src,t.B4B),t.R7$(),t.Y8G("ngIf",t.bMT(24,22,d.level)),t.R7$(3),t.SpI("                        ",null==(o=t.bMT(27,24,d.event))||null==o.extension_data?null:o.extension_data.extra_details,"\n                    "),t.R7$(5),t.SpI(" ",t.i5U(33,28,(null==(r=t.bMT(32,26,d.event))?null:r.date)||"","shortTime")," "),t.R7$(4),t.SpI(" ",t.i5U(37,33,(null==(c=t.bMT(36,31,d.event))?null:c.date)||"","mediumDate")," "),t.R7$(5),t.Y8G("ngIf",d.allow_printing_label)}}const pe='\n<p class="text-center">\n    Welcome, you have a meeting at {{ time }} with {{ host_name }}.\n    <br />{{ host_name }} has been notified and will be with you shortly.\n</p>\n<p>{{ can_use_lift }}</p>\n';let so=(()=>{class a{get time_format(){return this._settings.time_format}get now(){return(0,jt.A)((0,Ka.A)(Date.now(),{nearestTo:5}))}get logo(){return this._settings.get("app.logo_light")}get allow_printing_label(){return!1!==this._settings.get("app.allow_printing_label")}constructor(e,n,i,o,r){this._org=e,this._checkin=n,this._settings=i,this._router=o,this._date=r,this.event=this._checkin.event,this.guest=this._checkin.guest,this.level=(0,H.zV)([this.event,this._org.initialised]).pipe((0,I.T)(([c])=>c?this._org.levelWithID(c.zones):null)),this.result_template=(0,H.zV)([this.event,this.guest]).pipe((0,tt.p)(([c,d])=>!!c&&!!d),(0,I.T)(([c,d])=>{let p=this._settings.get("app.checked_in_template");p||(p=pe);let g=p.replace(/{{ title }}/g,c?.title||"").replace(/{{ room_name }}/g,c.extension_data?.location_id||"").replace(/{{ host_name }}/g,c?.user_name||"").replace(/{{ host_email }}/g,c?.user_email||"").replace(/{{ visitor_name }}/g,d?.name||"").replace(/{{ visitor_email }}/g,d?.email||"").replace(/{{ can_use_lift }}/g,c.extension_data.can_use_lift?"Please use the vistor access lift over there":"Please wait in the lobby.");try{const f=c.date||1e3*c.event_start||1e3*c.booking_start||(0,jt.A)(Date.now());g=g.replace(/{{ date }}/g,this._date.transform(f,"mediumDate")).replace(/{{ time }}/g,this._date.transform(f,this.time_format))}catch{}return g}),(0,pt.Z)(pe)),this.print=()=>window.print()}ngOnInit(){this.event.pipe((0,O.$)()).subscribe(e=>e?"":this.previous())}previous(){this._router.navigate(["/checkin"])}next(){this._router.navigate(["/welcome"])}static#t=this.\u0275fac=function(n){return new(n||a)(t.rXU(B.yb),t.rXU($),t.rXU(u.h$),t.rXU(M.Ix),t.rXU(_.vh))};static#e=this.\u0275cmp=t.VBU({type:a,selectors:[["checkin-results"]],features:[t.Jv_([_.vh])],decls:2,vars:3,consts:[["class","bg-base-100 rounded shadow overflow-hidden relative flex flex-col items-center w-[36rem] p-4 space-y-4",4,"ngIf"],[1,"bg-base-100","rounded","shadow","overflow-hidden","relative","flex","flex-col","items-center","w-[36rem]","p-4","space-y-4"],[1,"text-xl"],[1,"",3,"innerHTML"],["printable","",1,"relative","w-[24rem]","h-[14rem]","rounded-xl","border","border-neutral","m-4","p-4","bg-base-100","print-only"],[1,"flex","flex-col","h-full"],[1,"h-[4.75rem]","w-[4.75rem]","rounded-full","bg-base-200","flex","items-center","justify-center"],[1,"text-3xl",3,"user"],[1,"text-2xl"],[1,"text-sm","mt-1"],[1,"text-sm","opacity-60"],[1,"rounded-lg","bg-black","text-white","px-2","py-1","text-sm","mt-2","w-32","text-center"],[1,"absolute","top-4","right-4","flex","flex-col","items-end"],["logo","","alt","Logo",1,"h-10",3,"src"],["class","text-xs text-right",4,"ngIf"],[1,"text-right"],[1,"absolute","bottom-4","right-4","flex","items-end","space-x-2"],[1,"text-right","font-medium","leading-tight"],[1,"h-16","w-16","rounded-lg","border","border-base-200"],[1,"flex","items-center","space-x-2"],["btn","","matRipple","","class","w-32",3,"click",4,"ngIf"],["btn","","matRipple","",1,"w-32",3,"click"],[1,"text-xs","text-right"]],template:function(n,i){1&n&&(t.DNE(0,ro,43,37,"div",0),t.nI1(1,"async")),2&n&&t.Y8G("ngIf",t.bMT(1,1,i.event))},dependencies:[_.bT,to.a,eo.L,v.r6,_.Jj,_.vh,no.a],styles:["[_nghost-%COMP%] > div[_ngcontent-%COMP%]{max-width:calc(100vw - 2rem)}\n\n/*# sourceMappingURL=checkin-result.component.ts-angular-inline--98.css.map*/"]})}return a})();const co=()=>["/welcome"];function lo(a,s){if(1&a&&(t.j41(0,"p"),t.EFF(1),t.nI1(2,"async"),t.k0s()),2&a){const e=t.XpG();t.R7$(),t.JRh(t.bMT(2,1,e.error))}}let mo=(()=>{class a{constructor(e){this._checkin=e,this.error=this._checkin.error}static#t=this.\u0275fac=function(n){return new(n||a)(t.rXU($))};static#e=this.\u0275cmp=t.VBU({type:a,selectors:[["checkin-error"]],decls:9,vars:5,consts:[[1,"bg-base-100","rounded","shadow","overflow-hidden","relative","flex","flex-col","items-center","m-4","py-4","px-16","text-center","space-y-4"],[1,"text-2xl","pb-2"],[4,"ngIf"],["btn","","matRipple","",1,"w-32",3,"routerLink"]],template:function(n,i){1&n&&(t.j41(0,"div",0)(1,"h3",1),t.EFF(2,"Please see reception."),t.k0s(),t.DNE(3,lo,3,3,"p",2),t.nI1(4,"async"),t.j41(5,"p"),t.EFF(6,"Our staff at reception will assist you."),t.k0s(),t.j41(7,"a",3),t.EFF(8," Back "),t.k0s()()),2&n&&(t.R7$(3),t.Y8G("ngIf",t.bMT(4,2,i.error)),t.R7$(4),t.Y8G("routerLink",t.lJ4(4,co)))},dependencies:[_.bT,v.r6,M.Wk,_.Jj],styles:["[_nghost-%COMP%] > div[_ngcontent-%COMP%]{width:28rem;max-width:calc(100vw - 2rem)}\n\n/*# sourceMappingURL=checkin-error.component.ts-angular-inline--99.css.map*/"]})}return a})();const _o=["checkin-covid",""],po=()=>["/welcome"];let uo=(()=>{class a{constructor(e,n){this._router=e,this._checkin=n}confirm(){if(!this.symptoms||!this.contact)return(0,u.UG)("Please select yes or no for each question");this._checkin.updateGuest({covid:"true"===this.contact,symptoms:"true"===this.symptoms}),"false"===this.symptoms&&"false"===this.contact?this._router.navigate(["/checkin","results"]):(this._checkin.setError("Please get tested for COVID-19 and self-isolate at home for 14 days"),this._router.navigate(["/checkin","error"]))}static#t=this.\u0275fac=function(n){return new(n||a)(t.rXU(M.Ix),t.rXU($))};static#e=this.\u0275cmp=t.VBU({type:a,selectors:[["","checkin-covid",""]],attrs:_o,decls:55,vars:5,consts:[[1,"bg-base-100","rounded","p-4","relative","overflow-y-auto","overflow-x-hidden"],[1,"text-xl","font-medium","mb-4"],[1,"list-decimal","list-inside"],[1,"list-disc","list-inside","px-4","mb-4"],["aria-label","Has Symptoms",3,"ngModelChange","ngModel"],["value","true"],["value","false",1,"ml-4"],[1,"my-4"],["aria-label","COVID contact or self-isolated",3,"ngModelChange","ngModel"],["btn","","matRipple","",3,"click"],["icon","","matRipple","",1,"absolute","top-0","right-0",3,"routerLink"]],template:function(n,i){1&n&&(t.j41(0,"div",0)(1,"h3",1),t.EFF(2,"COVID Disclaimer"),t.k0s(),t.j41(3,"ol",2)(4,"li"),t.EFF(5," Do you have any of the following symptoms?"),t.nrm(6,"br")(7,"br"),t.j41(8,"ul",3)(9,"li"),t.EFF(10,"Fever"),t.k0s(),t.j41(11,"li"),t.EFF(12,"Cough"),t.k0s(),t.j41(13,"li"),t.EFF(14,"Shortness of breath"),t.k0s(),t.j41(15,"li"),t.EFF(16,"Chills"),t.k0s(),t.j41(17,"li"),t.EFF(18,"Body aches"),t.k0s(),t.j41(19,"li"),t.EFF(20,"Sore or scratchy throat"),t.k0s(),t.j41(21,"li"),t.EFF(22,"Headache"),t.k0s(),t.j41(23,"li"),t.EFF(24,"Runny nose"),t.k0s(),t.j41(25,"li"),t.EFF(26,"Muscle pain"),t.k0s(),t.j41(27,"li"),t.EFF(28,"Vomitting"),t.k0s(),t.j41(29,"li"),t.EFF(30,"Nausea"),t.k0s(),t.j41(31,"li"),t.EFF(32,"Diarrhoa"),t.k0s(),t.j41(33,"li"),t.EFF(34,"Loss of taste or smell"),t.k0s()(),t.j41(35,"mat-radio-group",4),t.mxI("ngModelChange",function(r){return t.DH7(i.symptoms,r)||(i.symptoms=r),r}),t.j41(36,"mat-radio-button",5),t.EFF(37,"Yes"),t.k0s(),t.j41(38,"mat-radio-button",6),t.EFF(39,"No"),t.k0s()()(),t.nrm(40,"hr",7),t.j41(41,"li"),t.EFF(42," Have you been in contact with a COVID-19 case in the last 14 days or been asked to self-isolate by a health offical?"),t.nrm(43,"br")(44,"br"),t.j41(45,"mat-radio-group",8),t.mxI("ngModelChange",function(r){return t.DH7(i.contact,r)||(i.contact=r),r}),t.j41(46,"mat-radio-button",5),t.EFF(47,"Yes"),t.k0s(),t.j41(48,"mat-radio-button",6),t.EFF(49,"No"),t.k0s()()()(),t.j41(50,"button",9),t.bIt("click",function(){return i.confirm()}),t.EFF(51,"Confirm"),t.k0s(),t.j41(52,"a",10)(53,"app-icon"),t.EFF(54,"close"),t.k0s()()()),2&n&&(t.R7$(35),t.R50("ngModel",i.symptoms),t.R7$(10),t.R50("ngModel",i.contact),t.R7$(7),t.Y8G("routerLink",t.lJ4(4,po)),t.BMQ("disabled",!i.symptoms&&!i.contact))},dependencies:[m.BC,m.vS,x.R,v.r6,Q.VT,Q._g,M.Wk],styles:["[_nghost-%COMP%] > div[_ngcontent-%COMP%]{width:32rem;max-width:calc(100vw - 2rem);max-height:calc(100% - 2rem)}button[_ngcontent-%COMP%]{margin:1rem 11rem 0;width:8rem}\n\n/*# sourceMappingURL=checkin-covid.component.ts-angular-inline--100.css.map*/"]})}return a})();const ho=["app-checkin",""],fo=["checkin-induction",""],bo=[{path:"",component:(()=>{class a{get now(){return(0,jt.A)(new Date)}get background(){return this._settings.get("app.home.background")}constructor(e){this._settings=e}static#t=this.\u0275fac=function(n){return new(n||a)(t.rXU(u.h$))};static#e=this.\u0275cmp=t.VBU({type:a,selectors:[["","app-checkin",""]],attrs:ho,decls:8,vars:10,consts:[[1,"absolute","inset-0","p-8","flex","items-center"],[1,"flex","flex-col","justify-center","space-y-8","z-10","w-full"],[1,"absolute","top-4","right-4","text-2xl","text-white"],["src","assets/img/building.png",1,"absolute","w-[60%]","bottom-0","right-0"]],template:function(n,i){1&n&&(t.j41(0,"div",0)(1,"div",1),t.nrm(2,"router-outlet"),t.k0s(),t.j41(3,"div",2),t.EFF(4),t.nI1(5,"date"),t.nI1(6,"date"),t.k0s(),t.nrm(7,"img",3),t.k0s()),2&n&&(t.xc7("background-image","url("+i.background+")"),t.R7$(4),t.Lme(" ",t.i5U(5,4,i.now,"mediumDate")," ",t.i5U(6,7,i.now,"shortTime")," "))},dependencies:[M.n3,_.vh],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%;width:100%}\n\n/*# sourceMappingURL=checkin.component.ts-angular-inline--101.css.map*/"]})}return a})(),children:[{path:"scan",component:qa},{path:"details",component:Ie},{path:"preferences",component:Wa},{path:"photo",component:we},{path:"results",component:so},{path:"error",component:mo},{path:"covid",component:uo},{path:"induction",component:(()=>{class a{get induction_details(){return this._settings.get("app.induction_details")}get induction_after_details(){return this._settings.get("app.induction_after_details")}get is_enabled(){return this._settings.get("app.induction_enabled")&&this._settings.get("app.induction_details")}constructor(e,n,i,o){this._checkin=e,this._router=n,this._settings=i,this._org=o,this.event=this._checkin.event,this.agree=!1,this.loading=!1}ngOnInit(){var e=this;return(0,h.A)(function*(){yield e._org.initialised.pipe((0,O.$)(i=>i)).toPromise();const n=yield e.event.pipe((0,O.$)()).toPromise();n||e._router.navigate(["/checkin"]),(!e.is_enabled||n.induction)&&e._router.navigate(e.induction_after_details?["/checkin","results"]:["/checkin","details"])})()}decline(){var e=this;return(0,h.A)(function*(){e.loading=!0,yield e._checkin.declineInduction().catch(n=>{throw(0,u.UG)("Error declining induction",n),n}),e._checkin.setError("You have declined the induction."),(0,u.uA)("Induction declined successfully"),e._router.navigate(["/checkin","error"])})()}continue(){var e=this;return(0,h.A)(function*(){e.loading=!0,yield e._checkin.completeInduction().catch(n=>{throw(0,u.UG)("Error completing induction",n),n}),(0,u.VX)("Induction completed successfully"),e._router.navigate(["/checkin","details"])})()}static#t=this.\u0275fac=function(n){return new(n||a)(t.rXU($),t.rXU(M.Ix),t.rXU(u.h$),t.rXU(B.yb))};static#e=this.\u0275cmp=t.VBU({type:a,selectors:[["","checkin-induction",""]],attrs:fo,decls:12,vars:3,consts:[[1,"relative","bg-base-100","rounded","shadow","overflow-hidden","flex","flex-col","items-center","w-[32rem]","p-4"],[1,"my-4"],[1,"rounded","border","border-base-300","w-full","p-4","opacity-60","text-sm","overflow-y-auto","overflow-x-hidden","max-h-[50vh]","whitespace-pre-wrap"],[1,"my-4",3,"ngModelChange","ngModel"],[1,"flex","items-center","justify-center","space-x-2"],["btn","","matRipple","",1,"w-32","clear","underline",3,"click"],["btn","","matRipple","",1,"w-32",3,"click","disabled"]],template:function(n,i){1&n&&(t.j41(0,"div",0)(1,"p",1),t.EFF(2," Please read the induction information below before proceeding "),t.k0s(),t.j41(3,"div",2),t.EFF(4),t.k0s(),t.j41(5,"mat-checkbox",3),t.mxI("ngModelChange",function(r){return t.DH7(i.agree,r)||(i.agree=r),r}),t.EFF(6," I agree "),t.k0s(),t.j41(7,"div",4)(8,"button",5),t.bIt("click",function(){return i.decline()}),t.EFF(9," Decline "),t.k0s(),t.j41(10,"button",6),t.bIt("click",function(){return i.continue()}),t.EFF(11," Accept "),t.k0s()()()),2&n&&(t.R7$(4),t.SpI(" ",i.induction_details," "),t.R7$(),t.R50("ngModel",i.agree),t.R7$(5),t.Y8G("disabled",!i.agree))},dependencies:[m.BC,m.vS,v.r6,A.So],encapsulation:2})}return a})()},{path:"**",redirectTo:"scan"}]},{path:"**",redirectTo:""}];let vo=(()=>{class a{static#t=this.\u0275fac=function(n){return new(n||a)};static#e=this.\u0275mod=t.$C({type:a});static#n=this.\u0275inj=t.G2t({imports:[_.MD,m.YN,m.X1,ue.u,M.iI.forChild(bo)]})}return a})()}}]);
//# sourceMappingURL=apps_visitor-kiosk_src_app_checkin_checkin_module_ts.js.map