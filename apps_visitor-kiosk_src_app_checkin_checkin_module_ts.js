"use strict";(self.webpackChunkvisitor_kiosk=self.webpackChunkvisitor_kiosk||[]).push([["apps_visitor-kiosk_src_app_checkin_checkin_module_ts"],{5548:(Mo,Re,c)=>{c.r(Re),c.d(Re,{VisitorCheckinModule:()=>To});var _=c(316),m=c(4456),I=c(9805),mt=c(4658),h=c(9204),O=c(7871),D=c(8488),p=c(7375),e=c(7404),y=c(9434),E=c(4950),v=c(5060),X=c(7984),G=c(1134);const _t=["checkin-details",""],pt=()=>["/welcome"];function ut(a,s){if(1&a){const t=e.RV6();e.j41(0,"form",2),e.nI1(1,"async"),e.j41(2,"h3",3),e.EFF(3,"Confirm Details"),e.k0s(),e.j41(4,"div",4)(5,"label",5),e.EFF(6,"Host"),e.k0s(),e.j41(7,"mat-form-field",6),e.nrm(8,"input",7),e.j41(9,"mat-error"),e.EFF(10," The email address of your host is required "),e.k0s()()(),e.j41(11,"div",4)(12,"label",8),e.EFF(13,"Name"),e.k0s(),e.j41(14,"mat-form-field",6),e.nrm(15,"input",9),e.j41(16,"mat-error"),e.EFF(17,"Please enter your full name"),e.k0s()()(),e.j41(18,"div",4)(19,"label",10),e.EFF(20,"Email"),e.k0s(),e.j41(21,"mat-form-field",6),e.nrm(22,"input",11),e.j41(23,"mat-error"),e.EFF(24,"A valid email address is required"),e.k0s()()(),e.j41(25,"div",4)(26,"label",10),e.EFF(27,"Phone Number"),e.k0s(),e.j41(28,"mat-form-field",6),e.nrm(29,"input",12),e.k0s()(),e.j41(30,"div",4)(31,"label",13),e.EFF(32,"Organisation / Company"),e.k0s(),e.j41(33,"mat-form-field",6),e.nrm(34,"input",14),e.k0s()(),e.j41(35,"button",15),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.updateGuest())}),e.EFF(36,"Next"),e.k0s(),e.j41(37,"a",16)(38,"app-icon"),e.EFF(39,"close"),e.k0s()()()}if(2&a){const t=e.XpG();e.Y8G("formGroup",e.bMT(1,2,t.form)),e.R7$(37),e.Y8G("routerLink",e.lJ4(4,pt))}}function ht(a,s){1&a&&(e.j41(0,"div",17)(1,"div",18),e.nrm(2,"mat-spinner",19),e.j41(3,"div",20),e.EFF(4," Updating data and checking in... "),e.k0s()()()),2&a&&(e.R7$(2),e.Y8G("diameter",48))}let gt=(()=>{class a{get induction_after_details(){return this._settings.get("app.induction_after_details")}constructor(t,n,i){this._checkin=t,this._router=n,this._settings=i,this.form=this._checkin.form,this.loading=!1}ngOnInit(){this.form.pipe((0,O.$)()).subscribe(t=>t&&t.value.email?"":this.previous()),"registered"===this._checkin.metadata&&this.updateGuest()}updateGuest(){var t=this;return(0,h.A)(function*(){t.loading=!0;const n=yield t._checkin.checkinGuest().then(()=>!0).catch(()=>!1);t.loading=!1,n&&t._router.navigate(t.induction_after_details?["/checkin","induction"]:["/checkin","results"])})()}previous(){this._router.navigate(["/checkin","scan"])}static#e=this.\u0275fac=function(n){return new(n||a)(e.rXU(D.G),e.rXU(I.Ix),e.rXU(p.h$))};static#t=this.\u0275cmp=e.VBU({type:a,selectors:[["","checkin-details",""]],attrs:_t,decls:4,vars:4,consts:[["load_state",""],["class","bg-base-100 rounded shadow overflow-hidden relative flex flex-col items-center w-[36rem] p-4",3,"formGroup",4,"ngIf","ngIfElse"],[1,"bg-base-100","rounded","shadow","overflow-hidden","relative","flex","flex-col","items-center","w-[36rem]","p-4",3,"formGroup"],[1,"text-2xl","m-4"],["field","",1,"flex","flex-col"],["form","host"],["appearance","outline"],["matInput","","name","host","formControlName","host","placeholder","Host's Email Address"],["form","name"],["matInput","","name","name","formControlName","name","placeholder","Full Name"],["form","email"],["matInput","","name","email","formControlName","email","placeholder","Email Address"],["matInput","","name","phone","type","tel","formControlName","phone","placeholder","Phone Number"],["form","org"],["matInput","","name","org","formControlName","organisation","placeholder","Organisation / Company"],["next","","btn","","matRipple","",3,"click"],["icon","","matRipple","",1,"absolute","top-0","right-0",3,"routerLink"],[1,"absolute","inset-0","flex","flex-col","items-center","justify-center"],[1,"flex","flex-col","items-center","space-y-2","bg-base-100","rounded","shadow","p-16"],[3,"diameter"],[1,"my-4","text-lg"]],template:function(n,i){if(1&n&&(e.DNE(0,ut,40,5,"form",1),e.nI1(1,"async"),e.DNE(2,ht,5,1,"ng-template",null,0,e.C5r)),2&n){const o=e.sdS(3);e.Y8G("ngIf",e.bMT(1,2,i.form)&&!i.loading)("ngIfElse",o)}},dependencies:[_.bT,m.qT,m.me,m.BC,m.cb,m.j4,m.JD,y.R,E.rl,E.TL,v.r6,X.fg,G.LG,I.Wk,_.Jj],styles:["form[_ngcontent-%COMP%]{width:32rem;max-width:calc(100vw - 2rem)}[field][_ngcontent-%COMP%]{width:calc(100% - 2rem)}button[_ngcontent-%COMP%]{margin-bottom:1rem;width:8rem}\n\n/*# sourceMappingURL=checkin-details.component.ts-angular-inline--86.css.map*/"]})}return a})();var ft=c(9536);const bt=()=>["/welcome"];function vt(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",2)(1,"h3",3),e.EFF(2,"Take a photo to continue"),e.k0s(),e.j41(3,"a-take-photo",4),e.bIt("photoAccepted",function(i){e.eBV(t);const o=e.XpG();return e.Njj(o.handlePhoto(i))}),e.k0s(),e.j41(4,"a",5)(5,"app-icon"),e.EFF(6,"close"),e.k0s()()()}2&a&&(e.R7$(4),e.Y8G("routerLink",e.lJ4(1,bt)))}function Ct(a,s){1&a&&(e.j41(0,"div",6),e.nrm(1,"mat-spinner",7),e.j41(2,"div",8),e.EFF(3," Printing guest pass... "),e.k0s()()),2&a&&(e.R7$(),e.Y8G("diameter",48))}let yt=(()=>{class a{constructor(t,n){this._checkin=t,this._router=n}handlePhoto(t){var n=this;return(0,h.A)(function*(){if(!t)return(0,p.UG)("Error saving image, please try again");n.loading=!0,n._checkin.setPhoto(t),yield n._checkin.printPass().catch(i=>{throw n.loading=!1,(0,p.UG)(i),i}),n.loading=!1,n._router.navigate(["/checkin","results"])})()}static#e=this.\u0275fac=function(n){return new(n||a)(e.rXU(D.G),e.rXU(I.Ix))};static#t=this.\u0275cmp=e.VBU({type:a,selectors:[["checkin-photo"]],decls:3,vars:2,consts:[["load_state",""],["class","bg-base-100 rounded shadow overflow-hidden relative flex flex-col items-center p-4",4,"ngIf","ngIfElse"],[1,"bg-base-100","rounded","shadow","overflow-hidden","relative","flex","flex-col","items-center","p-4"],[1,"text-xl","mb-4"],[3,"photoAccepted"],["icon","","matRipple","",1,"absolute","top-0","right-0",3,"routerLink"],[1,"flex","flex-col","items-center","m-auto"],[3,"diameter"],[1,"my-4","text-lg","text-white"]],template:function(n,i){if(1&n&&e.DNE(0,vt,7,2,"div",1)(1,Ct,4,1,"ng-template",null,0,e.C5r),2&n){const o=e.sdS(2);e.Y8G("ngIf",!i.loading)("ngIfElse",o)}},dependencies:[_.bT,y.R,v.r6,G.LG,ft.J,I.Wk],styles:["[_nghost-%COMP%]{position:absolute;display:flex;align-items:center;justify-content:center;inset:0;background-color:#00000080}.absolute[_ngcontent-%COMP%]{position:absolute}\n\n/*# sourceMappingURL=checkin-photo.component.ts-angular-inline--87.css.map*/"]})}return a})();c(3046),c(7572);var U=c(4879),T=c(2587),x=c(5892),ae=c(9771),L=c(7024),oe=c(2772),he=c(5507),xt=c(6864);const Z=()=>({standalone:!0});function kt(a,s){1&a&&(e.j41(0,"button",9)(1,"app-icon"),e.EFF(2,"close"),e.k0s()())}function It(a,s){if(1&a&&(e.j41(0,"div",20)(1,"label",21),e.EFF(2," Name"),e.j41(3,"span"),e.EFF(4,"*"),e.k0s(),e.EFF(5,": "),e.k0s(),e.j41(6,"mat-form-field",22),e.nrm(7,"input",23),e.j41(8,"mat-error"),e.EFF(9,"Name is required"),e.k0s()()()),2&a){const t=e.XpG(2);e.R7$(),e.AVh("error",t.form.controls.name.invalid&&t.form.controls.name.touched)}}function Tt(a,s){if(1&a&&(e.j41(0,"div",20)(1,"label",24),e.EFF(2," Category"),e.j41(3,"span"),e.EFF(4,"*"),e.k0s(),e.EFF(5,": "),e.k0s(),e.j41(6,"mat-form-field",22),e.nrm(7,"input",25),e.j41(8,"mat-error"),e.EFF(9,"Category is required"),e.k0s()()()),2&a){const t=e.XpG(2),n=e.sdS(9);e.R7$(),e.AVh("error",t.form.controls.category.invalid&&t.form.controls.category.touched),e.R7$(6),e.Y8G("matAutocomplete",n)}}function Mt(a,s){if(1&a){const t=e.RV6();e.j41(0,"mat-chip-row",30),e.bIt("removed",function(){const i=e.eBV(t).$implicit,o=e.XpG(3);return e.Njj(o.removeTag(i))}),e.EFF(1),e.j41(2,"button",31)(3,"app-icon"),e.EFF(4,"cancel"),e.k0s()()()}if(2&a){const t=s.$implicit;e.R7$(),e.SpI(" ",t," "),e.R7$(),e.BMQ("aria-label","Remove "+t)}}function Rt(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",20)(1,"label",26),e.pXf(2,3),e.k0s(),e.j41(3,"mat-form-field",22)(4,"mat-chip-grid",27,2),e.DNE(6,Mt,5,2,"mat-chip-row",28),e.k0s(),e.j41(7,"input",29),e.bIt("matChipInputTokenEnd",function(i){e.eBV(t);const o=e.XpG(2);return e.Njj(o.addTag(i))}),e.k0s()()()}if(2&a){const t=e.sdS(5),n=e.XpG(2);e.R7$(),e.AVh("error",n.form.controls.tags.invalid&&n.form.controls.tags.touched),e.R7$(5),e.Y8G("ngForOf",n.tag_list),e.R7$(),e.Y8G("matChipInputFor",t)("matChipInputSeparatorKeyCodes",n.separators)("matChipInputAddOnBlur",!0)}}function Ft(a,s){1&a&&(e.j41(0,"div",20)(1,"label",32),e.EFF(2,"Description:"),e.k0s(),e.j41(3,"mat-form-field",22),e.nrm(4,"textarea",33),e.k0s()())}function wt(a,s){if(1&a&&(e.j41(0,"div",20)(1,"label",21),e.EFF(2," Unit Price"),e.j41(3,"span"),e.EFF(4,"*"),e.k0s(),e.EFF(5,": "),e.k0s(),e.j41(6,"mat-form-field",22),e.nrm(7,"input",34),e.j41(8,"mat-error"),e.EFF(9,"Unit Price is required"),e.k0s()()()),2&a){const t=e.XpG(2);e.R7$(),e.AVh("error",t.form.controls.unit_price.invalid&&t.form.controls.unit_price.touched)}}function Et(a,s){1&a&&(e.j41(0,"div",20)(1,"label",35),e.pXf(2,4),e.k0s(),e.nrm(3,"image-list-field",36),e.k0s())}function jt(a,s){if(1&a){const t=e.RV6();e.j41(0,"form",10)(1,"div",11),e.DNE(2,It,10,2,"div",12)(3,Tt,10,3,"div",12),e.k0s(),e.DNE(4,Rt,8,6,"div",12)(5,Ft,5,0,"div",12)(6,wt,10,2,"div",12),e.j41(7,"div",13)(8,"label",14),e.EFF(9,"Accept Points?"),e.k0s(),e.j41(10,"mat-checkbox",15),e.EFF(11),e.k0s()(),e.j41(12,"div",16)(13,"mat-checkbox",17),e.bIt("ngModelChange",function(i){e.eBV(t);const o=e.XpG();return e.Njj(i?o.addTag({value:"Gluten Free"}):o.removeTag("Gluten Free"))}),e.EFF(14," Gluten Free (GF) "),e.k0s(),e.j41(15,"mat-checkbox",17),e.bIt("ngModelChange",function(i){e.eBV(t);const o=e.XpG();return e.Njj(i?o.addTag({value:"Vegan"}):o.removeTag("Vegan"))}),e.EFF(16," Vegan (VG) "),e.k0s(),e.j41(17,"mat-checkbox",17),e.bIt("ngModelChange",function(i){e.eBV(t);const o=e.XpG();return e.Njj(i?o.addTag({value:"Vegetarian"}):o.removeTag("Vegetarian"))}),e.EFF(18," Vegetarian (V) "),e.k0s(),e.j41(19,"mat-checkbox",17),e.bIt("ngModelChange",function(i){e.eBV(t);const o=e.XpG();return e.Njj(i?o.addTag({value:"Contains Dairy"}):o.removeTag("Contains Dairy"))}),e.EFF(20," Contains Dairy (D) "),e.k0s(),e.j41(21,"mat-checkbox",17),e.bIt("ngModelChange",function(i){e.eBV(t);const o=e.XpG();return e.Njj(i?o.addTag({value:"Contains Nuts"}):o.removeTag("Contains Nuts"))}),e.EFF(22," Contains Nuts (N) "),e.k0s()(),e.j41(23,"div",13)(24,"label",18),e.EFF(25,"Discount Cap"),e.k0s(),e.nrm(26,"a-counter",19),e.k0s(),e.DNE(27,Et,4,0,"div",12),e.k0s()}if(2&a){let t;const n=e.XpG();e.Y8G("formGroup",n.form),e.R7$(2),e.Y8G("ngIf",n.form.controls.name),e.R7$(),e.Y8G("ngIf",n.form.controls.category),e.R7$(),e.Y8G("ngIf",n.form.controls.tags),e.R7$(),e.Y8G("ngIf",n.form.controls.description),e.R7$(),e.Y8G("ngIf",n.form.controls.unit_price),e.R7$(5),e.JRh(null!=(t=n.form.get("accept_points"))&&t.value?"No":"Yes"),e.R7$(2),e.Y8G("ngModel",n.hasTag("Gluten Free"))("ngModelOptions",e.lJ4(22,Z)),e.R7$(2),e.Y8G("ngModel",n.hasTag("Vegan"))("ngModelOptions",e.lJ4(23,Z)),e.R7$(2),e.Y8G("ngModel",n.hasTag("Vegetarian"))("ngModelOptions",e.lJ4(24,Z)),e.R7$(2),e.Y8G("ngModel",n.hasTag("Contains Dairy"))("ngModelOptions",e.lJ4(25,Z)),e.R7$(2),e.Y8G("ngModel",n.hasTag("Contains Nuts"))("ngModelOptions",e.lJ4(26,Z)),e.R7$(5),e.Y8G("min",0)("max",100)("step",5)("render_fn",n.renderPercent),e.R7$(),e.Y8G("ngIf",n.form.controls.images)}}function Ot(a,s){if(1&a){const t=e.RV6();e.j41(0,"footer",37)(1,"button",38),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.saveChanges())}),e.EFF(2," Save "),e.k0s()()}if(2&a){const t=e.XpG();e.R7$(),e.Y8G("disabled",!t.form.dirty)}}function Gt(a,s){1&a&&(e.j41(0,"div",39),e.nrm(1,"mat-spinner",40),e.j41(2,"p"),e.EFF(3,"Saving catering item..."),e.k0s()())}function St(a,s){if(1&a&&(e.j41(0,"mat-option",41),e.EFF(1),e.k0s()),2&a){const t=s.$implicit;e.Y8G("value",t),e.R7$(),e.SpI(" ",t," ")}}let Fe=(()=>{class a{get item(){return this._data.item||new x.T}get categories(){return this._data.categories||[]}get tag_list(){return this.form.controls.tags.value}renderPercent(t=0){return`${t}%`}hasTag(t){return this.tag_list.includes(t)}constructor(t){this._data=t,this.event=new e.bkB,this.form=new m.gE({name:new m.MJ(this.item.name||"",[m.k0.required]),description:new m.MJ(this.item.description||""),category:new m.MJ(this.item.category||"",[m.k0.required]),unit_price:new m.MJ(this.item.unit_price,[m.k0.required]),tags:new m.MJ(this.item.tags||[]),accept_points:new m.MJ(this.item.accept_points||!1),discount_cap:new m.MJ(this.item.discount_cap||0),images:new m.MJ(this.item.images||[])}),this.loading=!1,this.separators=[U.Fm,U.KE,U.t6]}addTag(t){if(!this.form||!this.form.controls.tags)return;this.form.controls.tags.markAsDirty();const n=t.input,i=t.value,o=this.tag_list;(i||"").trim()&&(o.push(i),this.form.controls.tags.setValue(o)),n&&(n.value="")}removeTag(t){if(!this.form||!this.form.controls.tags)return;const n=this.tag_list;this.form.controls.tags.markAsDirty();const i=n.indexOf(t);i>=0&&(n.splice(i,1),this.form.controls.tags.setValue(n))}saveChanges(){this.loading=!0,this.event.emit({reason:"done",metadata:{item:new x.T({...this.item,id:this.item.id||`item-${(0,p.HO)(99999999)}`,...this.form.value})}})}static#e=this.\u0275fac=function(n){return new(n||a)(e.rXU(T.Vh))};static#t=this.\u0275cmp=e.VBU({type:a,selectors:[["catering-item-modal"]],outputs:{event:"event"},decls:11,vars:6,consts:()=>{let t,n,i;return t=$localize`:@@zoneTagsPlaceholder␟c133beffffe3288bbdbf8572a32910c33ce14991␟2194594490376201833:Item tags e.g. Gluten Free, Vegan etc.`,n=$localize`:@@tagsLabel␟800ffadd463cfe152c5af3fa9f13803ab2e77b93␟4746186018558508280: Tags: `,i=$localize`:@@imagesLabel␟e5d9e00faa06714d7671b164cad364b26f4c585b␟5137125764814732349:Images:`,[["load_state",""],["auto","matAutocomplete"],["chipList",""],n,i,["icon","","matRipple","","mat-dialog-close","",4,"ngIf"],["class","p-4 overflow-auto max-h-[65vh]",3,"formGroup",4,"ngIf","ngIfElse"],["class","flex p-2 items-center justify-center border-t border-solid border-base-200",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],["icon","","matRipple","","mat-dialog-close",""],[1,"p-4","overflow-auto","max-h-[65vh]",3,"formGroup"],[1,"flex","items-center","space-x-2"],["class","flex flex-col",4,"ngIf"],[1,"flex","items-center"],[1,"flex-none","w-28","min-w-0"],["formControlName","accept_points"],["list","",1,"flex","items-center","flex-wrap","max-w-lg"],[3,"ngModelChange","ngModel","ngModelOptions"],[1,"flex-1","w-24","min-w-0"],["formControlName","discount_cap",1,"border","border-base-200","rounded",3,"min","max","step","render_fn"],[1,"flex","flex-col"],["for","title"],["appearance","outline"],["matInput","","name","name","placeholder","Item name","formControlName","name"],["for","category"],["matInput","","name","category","placeholder","Category","formControlName","category",3,"matAutocomplete"],["for","tags"],["aria-label","Item Tags"],[3,"removed",4,"ngFor","ngForOf"],["name","tags","placeholder",t,3,"matChipInputTokenEnd","matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputAddOnBlur"],[3,"removed"],["matChipRemove",""],["for","description"],["matInput","","name","description","placeholder","Item Description","formControlName","description"],["matInput","","name","unit-price","type","number","placeholder","Unit Price","formControlName","unit_price"],["for","images"],["name","images","formControlName","images"],[1,"flex","p-2","items-center","justify-center","border-t","border-solid","border-base-200"],["btn","","matRipple","",3,"click","disabled"],[1,"flex","flex-col","items-center","p-8","space-y-2","w-64"],["diameter","32"],[3,"value"]]},template:function(n,i){if(1&n&&(e.j41(0,"header")(1,"h3"),e.EFF(2),e.k0s(),e.DNE(3,kt,3,0,"button",5),e.k0s(),e.DNE(4,jt,28,27,"form",6)(5,Ot,3,1,"footer",7)(6,Gt,4,0,"ng-template",null,0,e.C5r),e.j41(8,"mat-autocomplete",null,1),e.DNE(10,St,2,2,"mat-option",8),e.k0s()),2&n){const o=e.sdS(7);e.R7$(2),e.SpI("",i.item.id?"Edit":"Add"," Item"),e.R7$(),e.Y8G("ngIf",!i.loading),e.R7$(),e.Y8G("ngIf",i.form&&!i.loading)("ngIfElse",o),e.R7$(),e.Y8G("ngIf",!i.loading),e.R7$(5),e.Y8G("ngForOf",i.categories)}},dependencies:[_.Sq,_.bT,ae.$3,v.wT,ae.pN,T.tx,L.So,m.qT,m.me,m.Q0,m.BC,m.cb,m.vS,m.j4,m.JD,y.R,E.rl,E.TL,v.r6,X.fg,G.LG,oe.HW,oe.D7,oe.Zv,oe.jH,he.s,xt.$],styles:["[list][_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]{margin:.5rem}\n\n/*# sourceMappingURL=catering-item-modal.component.ts-angular-inline--88.css.map*/"]})}return a})();var S=c(118),j=c(521),Y=c(2175),H=c(1536),q=c(8627),z=c(1963),K=c(9314),M=c(5443),re=c(6e3),ee=c(7841),B=c(3602),A=c(2185),we=c(4217);function Dt(a,s){1&a&&(e.j41(0,"button",6)(1,"app-icon"),e.EFF(2,"close"),e.k0s()())}function Nt(a,s){if(1&a&&(e.j41(0,"div",9)(1,"label",10),e.EFF(2," Name"),e.j41(3,"span"),e.EFF(4,"*"),e.k0s(),e.EFF(5,": "),e.k0s(),e.j41(6,"mat-form-field",11),e.nrm(7,"input",12),e.j41(8,"mat-error"),e.EFF(9,"Name is required"),e.k0s()()()),2&a){const t=e.XpG(2);e.R7$(),e.AVh("error",t.form.controls.name.invalid&&t.form.controls.name.touched)}}function $t(a,s){if(1&a&&(e.j41(0,"div",9)(1,"label",13),e.EFF(2," Type"),e.j41(3,"span"),e.EFF(4,"*"),e.k0s(),e.EFF(5,": "),e.k0s(),e.j41(6,"mat-form-field",11),e.nrm(7,"input",14),e.j41(8,"mat-error"),e.EFF(9,"Type is required"),e.k0s()()()),2&a){const t=e.XpG(2),n=e.sdS(9);e.R7$(),e.AVh("error",t.form.controls.group.invalid&&t.form.controls.group.touched),e.R7$(6),e.Y8G("matAutocomplete",n)}}function Lt(a,s){1&a&&(e.j41(0,"div",9)(1,"label",10),e.EFF(2,"Unit Price:"),e.k0s(),e.j41(3,"mat-form-field",11),e.nrm(4,"input",15),e.k0s()())}function Bt(a,s){1&a&&(e.j41(0,"div",9)(1,"mat-checkbox",16),e.EFF(2," Can select multiple of type "),e.k0s()())}function At(a,s){if(1&a&&(e.j41(0,"form",7),e.DNE(1,Nt,10,2,"div",8)(2,$t,10,3,"div",8)(3,Lt,5,0,"div",8)(4,Bt,3,0,"div",8),e.k0s()),2&a){const t=e.XpG();e.Y8G("formGroup",t.form),e.R7$(),e.Y8G("ngIf",t.form.controls.name),e.R7$(),e.Y8G("ngIf",t.form.controls.group),e.R7$(),e.Y8G("ngIf",t.form.controls.unit_price),e.R7$(),e.Y8G("ngIf",t.form.controls.multiple)}}function Vt(a,s){if(1&a){const t=e.RV6();e.j41(0,"footer",17)(1,"button",18),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.saveChanges())}),e.EFF(2," Save "),e.k0s()()}if(2&a){const t=e.XpG();e.R7$(),e.Y8G("disabled",!t.form.dirty)}}function Pt(a,s){1&a&&(e.j41(0,"div",19),e.nrm(1,"mat-spinner",20),e.j41(2,"p"),e.EFF(3,"Saving catering item option..."),e.k0s()())}function Xt(a,s){if(1&a&&(e.j41(0,"mat-option",21),e.EFF(1),e.k0s()),2&a){const t=s.$implicit;e.Y8G("value",t),e.R7$(),e.SpI(" ",t," ")}}let Ee=(()=>{class a{get option(){return this._data.option}get types(){return this._data.types||[]}constructor(t){this._data=t,this.event=new e.bkB,this.form=new m.gE({name:new m.MJ(this.option.name||"",[m.k0.required]),group:new m.MJ(this.option.group||"",[m.k0.required]),unit_price:new m.MJ(this.option.unit_price),multiple:new m.MJ(!!this.option.multiple,[])}),this.loading=!1}saveChanges(){this.loading=!0;const t={...this.option,id:this.option.id||`option-${(0,we.HO)(99999999)}`,...this.form.value};this.event.emit({reason:"done",metadata:{item:new x.T({...this._data.parent,options:this._data.parent.options.filter(n=>n.id!==t.id).concat([t])})}})}static#e=this.\u0275fac=function(n){return new(n||a)(e.rXU(T.Vh))};static#t=this.\u0275cmp=e.VBU({type:a,selectors:[["catering-option-modal"]],outputs:{event:"event"},decls:11,vars:6,consts:[["load_state",""],["auto","matAutocomplete"],["icon","","mat-dialog-close","",4,"ngIf"],["class","p-4 overflow-auto max-h-[65vh]",3,"formGroup",4,"ngIf","ngIfElse"],["class","flex p-2 items-center justify-center border-t border-solid border-base-200",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],["icon","","mat-dialog-close",""],[1,"p-4","overflow-auto","max-h-[65vh]",3,"formGroup"],["class","flex flex-col",4,"ngIf"],[1,"flex","flex-col"],["for","title"],["appearance","outline"],["matInput","","name","name","placeholder","Item name","formControlName","name"],["for","group"],["matInput","","name","group","placeholder","Type of option e.g. Number of sugars","formControlName","group",3,"matAutocomplete"],["matInput","","name","unit-price","type","number","placeholder","Unit Price","formControlName","unit_price"],["name","multiple","formControlName","multiple"],[1,"flex","p-2","items-center","justify-center","border-t","border-solid","border-base-200"],["btn","","matRipple","",3,"click","disabled"],["loading","",1,"flex","flex-col","items-center","p-8","space-y-2","w-64"],["diameter","32"],[3,"value"]],template:function(n,i){if(1&n&&(e.j41(0,"header")(1,"h3"),e.EFF(2),e.k0s(),e.DNE(3,Dt,3,0,"button",2),e.k0s(),e.DNE(4,At,5,5,"form",3)(5,Vt,3,1,"footer",4)(6,Pt,4,0,"ng-template",null,0,e.C5r),e.j41(8,"mat-autocomplete",null,1),e.DNE(10,Xt,2,2,"mat-option",5),e.k0s()),2&n){const o=e.sdS(7);e.R7$(2),e.SpI("",i.option.id?"Edit":"Add"," Item Option"),e.R7$(),e.Y8G("ngIf",!i.loading),e.R7$(),e.Y8G("ngIf",i.form&&!i.loading)("ngIfElse",o),e.R7$(),e.Y8G("ngIf",!i.loading),e.R7$(5),e.Y8G("ngForOf",i.types)}},dependencies:[_.Sq,_.bT,ae.$3,v.wT,ae.pN,T.tx,L.So,m.qT,m.me,m.Q0,m.BC,m.cb,m.j4,m.JD,y.R,E.rl,E.TL,v.r6,X.fg,G.LG]})}return a})();var Ut=c(8030),R=c(5555),je=c(5882),Oe=c(8848),Ge=c(1543),Se=c(3330);function De(a,s,t){let n=!0;for(const i of s)if(a.category===i.name||a.tags.includes(i.name)||t.resources.find(o=>o.zones.includes(i.name))||t.space?.zones.includes(i.name)||"*"===i.name){let o=0;for(const r of i.rules){const l=new Date(t.date);switch(r[0]){case"is_before":o+=(0,je.Y)(Date.now(),(0,Oe.O)(l,r[1]))?1:0;break;case"within_hours":o+=(0,Ge.d)(Date.now(),(0,Oe.O)(l,r[1]))?1:0;break;case"after_hour":o+=(0,Ge.d)(l,(0,Se.a)(l,r[1]))?1:0;break;case"before_hour":o+=(0,je.Y)(l,(0,Se.a)(l,r[1]))?1:0;break;case"min_length":o+=t.duration>=(0,p.II)(r[1])?1:0;break;case"max_length":o+=t.duration<=(0,p.II)(r[1])?1:0;break;case"visitor_type":o+=t.ext("visitor_type")===r[1]?1:0;break;default:o+=1}}n=o>=i.rules.length}return n}var te=c(9168),se=c(3119),fe=c(7557),be=c(7405),Ht=c(4380),zt=c(434),Wt=c(3340),ne=c(2672),ve=c(4053),le=c(7699),Ce=c(3680),Ne=c(2139),Qt=c(8615),V=c(7464),$e=c(9803),ce=c(9273),Jt=c(1314),Zt=c(6109),qt=c(9539),F=c(7172);const ye=["*"];function Kt(a,s){1&a&&e.SdG(0)}const en=["tabListContainer"],tn=["tabList"],nn=["tabListInner"],an=["nextPaginator"],on=["previousPaginator"],rn=a=>({animationDuration:a}),sn=(a,s)=>({value:a,params:s});function ln(a,s){}const cn=["tabBodyWrapper"],dn=["tabHeader"];function mn(a,s){}function _n(a,s){if(1&a&&e.DNE(0,mn,0,0,"ng-template",12),2&a){const t=e.XpG().$implicit;e.Y8G("cdkPortalOutlet",t.templateLabel)}}function pn(a,s){if(1&a&&e.EFF(0),2&a){const t=e.XpG().$implicit;e.JRh(t.textLabel)}}function un(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",7,2),e.bIt("click",function(){const i=e.eBV(t),o=i.$implicit,r=i.$index,l=e.XpG(),d=e.sdS(1);return e.Njj(l._handleClick(o,d,r))})("cdkFocusChange",function(i){const o=e.eBV(t).$index,r=e.XpG();return e.Njj(r._tabFocusChanged(i,o))}),e.nrm(2,"span",8)(3,"div",9),e.j41(4,"span",10)(5,"span",11),e.DNE(6,_n,1,1,null,12)(7,pn,1,1),e.k0s()()()}if(2&a){const t=s.$implicit,n=s.$index,i=e.sdS(1),o=e.XpG();e.HbH(t.labelClass),e.AVh("mdc-tab--active",o.selectedIndex===n),e.Y8G("id",o._getTabLabelId(n))("disabled",t.disabled)("fitInkBarToContent",o.fitInkBarToContent),e.BMQ("tabIndex",o._getTabIndex(n))("aria-posinset",n+1)("aria-setsize",o._tabs.length)("aria-controls",o._getTabContentId(n))("aria-selected",o.selectedIndex===n)("aria-label",t.ariaLabel||null)("aria-labelledby",!t.ariaLabel&&t.ariaLabelledby?t.ariaLabelledby:null),e.R7$(3),e.Y8G("matRippleTrigger",i)("matRippleDisabled",t.disabled||o.disableRipple),e.R7$(3),e.vxM(t.templateLabel?6:7)}}function hn(a,s){1&a&&e.SdG(0)}function gn(a,s){if(1&a){const t=e.RV6();e.j41(0,"mat-tab-body",13),e.bIt("_onCentered",function(){e.eBV(t);const i=e.XpG();return e.Njj(i._removeTabBodyWrapperHeight())})("_onCentering",function(i){e.eBV(t);const o=e.XpG();return e.Njj(o._setTabBodyWrapperHeight(i))}),e.k0s()}if(2&a){const t=s.$implicit,n=s.$index,i=e.XpG();e.HbH(t.bodyClass),e.AVh("mat-mdc-tab-body-active",i.selectedIndex===n),e.Y8G("id",i._getTabContentId(n))("content",t.content)("position",t.position)("origin",t.origin)("animationDuration",i.animationDuration)("preserveContent",i.preserveContent),e.BMQ("tabindex",null!=i.contentTabIndex&&i.selectedIndex===n?i.contentTabIndex:null)("aria-labelledby",i._getTabLabelId(n))("aria-hidden",i.selectedIndex!==n)}}const fn=new e.nKC("MatTabContent");let bn=(()=>{class a{constructor(t){this.template=t}static#e=this.\u0275fac=function(n){return new(n||a)(e.rXU(e.C4Q))};static#t=this.\u0275dir=e.FsC({type:a,selectors:[["","matTabContent",""]],standalone:!0,features:[e.Jv_([{provide:fn,useExisting:a}])]})}return a})();const vn=new e.nKC("MatTabLabel"),Le=new e.nKC("MAT_TAB");let Cn=(()=>{class a extends te.bV{constructor(t,n,i){super(t,n),this._closestTab=i}static#e=this.\u0275fac=function(n){return new(n||a)(e.rXU(e.C4Q),e.rXU(e.c1b),e.rXU(Le,8))};static#t=this.\u0275dir=e.FsC({type:a,selectors:[["","mat-tab-label",""],["","matTabLabel",""]],standalone:!0,features:[e.Jv_([{provide:vn,useExisting:a}]),e.Vt3]})}return a})();const Be=new e.nKC("MAT_TAB_GROUP");let Ae=(()=>{class a{get templateLabel(){return this._templateLabel}set templateLabel(t){this._setTemplateLabelInput(t)}get content(){return this._contentPortal}constructor(t,n){this._viewContainerRef=t,this._closestTabGroup=n,this.disabled=!1,this._explicitContent=void 0,this.textLabel="",this._contentPortal=null,this._stateChanges=new se.B7,this.position=null,this.origin=null,this.isActive=!1}ngOnChanges(t){(t.hasOwnProperty("textLabel")||t.hasOwnProperty("disabled"))&&this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}ngOnInit(){this._contentPortal=new te.VA(this._explicitContent||this._implicitContent,this._viewContainerRef)}_setTemplateLabelInput(t){t&&t._closestTab===this&&(this._templateLabel=t)}static#e=this.\u0275fac=function(n){return new(n||a)(e.rXU(e.c1b),e.rXU(Be,8))};static#t=this.\u0275cmp=e.VBU({type:a,selectors:[["mat-tab"]],contentQueries:function(n,i,o){if(1&n&&(e.wni(o,Cn,5),e.wni(o,bn,7,e.C4Q)),2&n){let r;e.mGM(r=e.lsd())&&(i.templateLabel=r.first),e.mGM(r=e.lsd())&&(i._explicitContent=r.first)}},viewQuery:function(n,i){if(1&n&&e.GBs(e.C4Q,7),2&n){let o;e.mGM(o=e.lsd())&&(i._implicitContent=o.first)}},hostAttrs:["hidden",""],inputs:{disabled:[2,"disabled","disabled",e.L39],textLabel:[0,"label","textLabel"],ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],labelClass:"labelClass",bodyClass:"bodyClass"},exportAs:["matTab"],standalone:!0,features:[e.Jv_([{provide:Le,useExisting:a}]),e.GFd,e.OA$,e.aNF],ngContentSelectors:ye,decls:1,vars:0,template:function(n,i){1&n&&(e.NAR(),e.DNE(0,Kt,1,0,"ng-template"))},encapsulation:2})}return a})();const xe="mdc-tab-indicator--active",Ve="mdc-tab-indicator--no-transition";class yn{constructor(s){this._items=s}hide(){this._items.forEach(s=>s.deactivateInkBar())}alignToElement(s){const t=this._items.find(i=>i.elementRef.nativeElement===s),n=this._currentItem;if(t!==n&&(n?.deactivateInkBar(),t)){const i=n?.elementRef.nativeElement.getBoundingClientRect?.();t.activateInkBar(i),this._currentItem=t}}}let xn=(()=>{class a{constructor(){this._elementRef=(0,e.WQX)(e.aKT),this._fitToContent=!1}get fitInkBarToContent(){return this._fitToContent}set fitInkBarToContent(t){this._fitToContent!==t&&(this._fitToContent=t,this._inkBarElement&&this._appendInkBarElement())}activateInkBar(t){const n=this._elementRef.nativeElement;if(!t||!n.getBoundingClientRect||!this._inkBarContentElement)return void n.classList.add(xe);const i=n.getBoundingClientRect(),o=t.width/i.width,r=t.left-i.left;n.classList.add(Ve),this._inkBarContentElement.style.setProperty("transform",`translateX(${r}px) scaleX(${o})`),n.getBoundingClientRect(),n.classList.remove(Ve),n.classList.add(xe),this._inkBarContentElement.style.setProperty("transform","")}deactivateInkBar(){this._elementRef.nativeElement.classList.remove(xe)}ngOnInit(){this._createInkBarElement()}ngOnDestroy(){this._inkBarElement?.remove(),this._inkBarElement=this._inkBarContentElement=null}_createInkBarElement(){const t=this._elementRef.nativeElement.ownerDocument||document,n=this._inkBarElement=t.createElement("span"),i=this._inkBarContentElement=t.createElement("span");n.className="mdc-tab-indicator",i.className="mdc-tab-indicator__content mdc-tab-indicator__content--underline",n.appendChild(this._inkBarContentElement),this._appendInkBarElement()}_appendInkBarElement(){(this._fitToContent?this._elementRef.nativeElement.querySelector(".mdc-tab__content"):this._elementRef.nativeElement).appendChild(this._inkBarElement)}static#e=this.\u0275fac=function(n){return new(n||a)};static#t=this.\u0275dir=e.FsC({type:a,inputs:{fitInkBarToContent:[2,"fitInkBarToContent","fitInkBarToContent",e.L39]},features:[e.GFd]})}return a})(),Pe=(()=>{class a extends xn{constructor(t){super(),this.elementRef=t,this.disabled=!1}focus(){this.elementRef.nativeElement.focus()}getOffsetLeft(){return this.elementRef.nativeElement.offsetLeft}getOffsetWidth(){return this.elementRef.nativeElement.offsetWidth}static#e=this.\u0275fac=function(n){return new(n||a)(e.rXU(e.aKT))};static#t=this.\u0275dir=e.FsC({type:a,selectors:[["","matTabLabelWrapper",""]],hostVars:3,hostBindings:function(n,i){2&n&&(e.BMQ("aria-disabled",!!i.disabled),e.AVh("mat-mdc-tab-disabled",i.disabled))},inputs:{disabled:[2,"disabled","disabled",e.L39]},standalone:!0,features:[e.GFd,e.Vt3]})}return a})();const Xe=(0,le.BQ)({passive:!0});let Mn=(()=>{class a{get selectedIndex(){return this._selectedIndex}set selectedIndex(t){const n=isNaN(t)?0:t;this._selectedIndex!=n&&(this._selectedIndexChanged=!0,this._selectedIndex=n,this._keyManager&&this._keyManager.updateActiveItem(n))}constructor(t,n,i,o,r,l,d){this._elementRef=t,this._changeDetectorRef=n,this._viewportRuler=i,this._dir=o,this._ngZone=r,this._platform=l,this._animationMode=d,this._scrollDistance=0,this._selectedIndexChanged=!1,this._destroyed=new se.B7,this._showPaginationControls=!1,this._disableScrollAfter=!0,this._disableScrollBefore=!0,this._stopScrolling=new se.B7,this.disablePagination=!1,this._selectedIndex=0,this.selectFocusedIndex=new e.bkB,this.indexFocused=new e.bkB,this._sharedResizeObserver=(0,e.WQX)(Qt.a),this._injector=(0,e.WQX)(e.zZn),r.runOutsideAngular(()=>{(0,fe.R)(t.nativeElement,"mouseleave").pipe((0,V.Q)(this._destroyed)).subscribe(()=>{this._stopInterval()})})}ngAfterViewInit(){(0,fe.R)(this._previousPaginator.nativeElement,"touchstart",Xe).pipe((0,V.Q)(this._destroyed)).subscribe(()=>{this._handlePaginatorPress("before")}),(0,fe.R)(this._nextPaginator.nativeElement,"touchstart",Xe).pipe((0,V.Q)(this._destroyed)).subscribe(()=>{this._handlePaginatorPress("after")})}ngAfterContentInit(){const t=this._dir?this._dir.change:(0,H.of)("ltr"),n=this._sharedResizeObserver.observe(this._elementRef.nativeElement).pipe((0,$e.B)(32),(0,V.Q)(this._destroyed)),i=this._viewportRuler.change(150).pipe((0,V.Q)(this._destroyed)),o=()=>{this.updatePagination(),this._alignInkBarToSelectedTab()};this._keyManager=new Ne.Bu(this._items).withHorizontalOrientation(this._getLayoutDirection()).withHomeAndEnd().withWrap().skipPredicate(()=>!1),this._keyManager.updateActiveItem(this._selectedIndex),(0,e.mal)(o,{injector:this._injector}),(0,be.h)(t,i,n,this._items.changes,this._itemsResized()).pipe((0,V.Q)(this._destroyed)).subscribe(()=>{this._ngZone.run(()=>{Promise.resolve().then(()=>{this._scrollDistance=Math.max(0,Math.min(this._getMaxScrollDistance(),this._scrollDistance)),o()})}),this._keyManager.withHorizontalOrientation(this._getLayoutDirection())}),this._keyManager.change.subscribe(r=>{this.indexFocused.emit(r),this._setTabFocus(r)})}_itemsResized(){return"function"!=typeof ResizeObserver?Ht.w:this._items.changes.pipe((0,ce.Z)(this._items),(0,z.n)(t=>new zt.c(n=>this._ngZone.runOutsideAngular(()=>{const i=new ResizeObserver(o=>n.next(o));return t.forEach(o=>i.observe(o.elementRef.nativeElement)),()=>{i.disconnect()}}))),(0,Jt.i)(1),(0,q.p)(t=>t.some(n=>n.contentRect.width>0&&n.contentRect.height>0)))}ngAfterContentChecked(){this._tabLabelCount!=this._items.length&&(this.updatePagination(),this._tabLabelCount=this._items.length,this._changeDetectorRef.markForCheck()),this._selectedIndexChanged&&(this._scrollToLabel(this._selectedIndex),this._checkScrollingControls(),this._alignInkBarToSelectedTab(),this._selectedIndexChanged=!1,this._changeDetectorRef.markForCheck()),this._scrollDistanceChanged&&(this._updateTabScrollPosition(),this._scrollDistanceChanged=!1,this._changeDetectorRef.markForCheck())}ngOnDestroy(){this._keyManager?.destroy(),this._destroyed.next(),this._destroyed.complete(),this._stopScrolling.complete()}_handleKeydown(t){if(!(0,U.rp)(t))switch(t.keyCode){case U.Fm:case U.t6:if(this.focusIndex!==this.selectedIndex){const n=this._items.get(this.focusIndex);n&&!n.disabled&&(this.selectFocusedIndex.emit(this.focusIndex),this._itemSelected(t))}break;default:this._keyManager.onKeydown(t)}}_onContentChanges(){const t=this._elementRef.nativeElement.textContent;t!==this._currentTextContent&&(this._currentTextContent=t||"",this._ngZone.run(()=>{this.updatePagination(),this._alignInkBarToSelectedTab(),this._changeDetectorRef.markForCheck()}))}updatePagination(){this._checkPaginationEnabled(),this._checkScrollingControls(),this._updateTabScrollPosition()}get focusIndex(){return this._keyManager?this._keyManager.activeItemIndex:0}set focusIndex(t){!this._isValidIndex(t)||this.focusIndex===t||!this._keyManager||this._keyManager.setActiveItem(t)}_isValidIndex(t){return!this._items||!!this._items.toArray()[t]}_setTabFocus(t){if(this._showPaginationControls&&this._scrollToLabel(t),this._items&&this._items.length){this._items.toArray()[t].focus();const n=this._tabListContainer.nativeElement;n.scrollLeft="ltr"==this._getLayoutDirection()?0:n.scrollWidth-n.offsetWidth}}_getLayoutDirection(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}_updateTabScrollPosition(){if(this.disablePagination)return;const t=this.scrollDistance,n="ltr"===this._getLayoutDirection()?-t:t;this._tabList.nativeElement.style.transform=`translateX(${Math.round(n)}px)`,(this._platform.TRIDENT||this._platform.EDGE)&&(this._tabListContainer.nativeElement.scrollLeft=0)}get scrollDistance(){return this._scrollDistance}set scrollDistance(t){this._scrollTo(t)}_scrollHeader(t){return this._scrollTo(this._scrollDistance+("before"==t?-1:1)*this._tabListContainer.nativeElement.offsetWidth/3)}_handlePaginatorClick(t){this._stopInterval(),this._scrollHeader(t)}_scrollToLabel(t){if(this.disablePagination)return;const n=this._items?this._items.toArray()[t]:null;if(!n)return;const i=this._tabListContainer.nativeElement.offsetWidth,{offsetLeft:o,offsetWidth:r}=n.elementRef.nativeElement;let l,d;"ltr"==this._getLayoutDirection()?(l=o,d=l+r):(d=this._tabListInner.nativeElement.offsetWidth-o,l=d-r);const u=this.scrollDistance,g=this.scrollDistance+i;l<u?this.scrollDistance-=u-l:d>g&&(this.scrollDistance+=Math.min(d-g,l-u))}_checkPaginationEnabled(){if(this.disablePagination)this._showPaginationControls=!1;else{const i=this._tabListInner.nativeElement.scrollWidth-this._elementRef.nativeElement.offsetWidth>=5;i||(this.scrollDistance=0),i!==this._showPaginationControls&&(this._showPaginationControls=i,this._changeDetectorRef.markForCheck())}}_checkScrollingControls(){this.disablePagination?this._disableScrollAfter=this._disableScrollBefore=!0:(this._disableScrollBefore=0==this.scrollDistance,this._disableScrollAfter=this.scrollDistance==this._getMaxScrollDistance(),this._changeDetectorRef.markForCheck())}_getMaxScrollDistance(){return this._tabListInner.nativeElement.scrollWidth-this._tabListContainer.nativeElement.offsetWidth||0}_alignInkBarToSelectedTab(){const t=this._items&&this._items.length?this._items.toArray()[this.selectedIndex]:null,n=t?t.elementRef.nativeElement:null;n?this._inkBar.alignToElement(n):this._inkBar.hide()}_stopInterval(){this._stopScrolling.next()}_handlePaginatorPress(t,n){n&&null!=n.button&&0!==n.button||(this._stopInterval(),(0,Wt.O)(650,100).pipe((0,V.Q)((0,be.h)(this._stopScrolling,this._destroyed))).subscribe(()=>{const{maxScrollDistance:i,distance:o}=this._scrollHeader(t);(0===o||o>=i)&&this._stopInterval()}))}_scrollTo(t){if(this.disablePagination)return{maxScrollDistance:0,distance:0};const n=this._getMaxScrollDistance();return this._scrollDistance=Math.max(0,Math.min(n,t)),this._scrollDistanceChanged=!0,this._checkScrollingControls(),{maxScrollDistance:n,distance:this._scrollDistance}}static#e=this.\u0275fac=function(n){return new(n||a)(e.rXU(e.aKT),e.rXU(e.gRc),e.rXU(ve.Xj),e.rXU(Ce.dS,8),e.rXU(e.SKi),e.rXU(le.OD),e.rXU(e.bc$,8))};static#t=this.\u0275dir=e.FsC({type:a,inputs:{disablePagination:[2,"disablePagination","disablePagination",e.L39],selectedIndex:[2,"selectedIndex","selectedIndex",e.Udg]},outputs:{selectFocusedIndex:"selectFocusedIndex",indexFocused:"indexFocused"},features:[e.GFd]})}return a})(),Rn=(()=>{class a extends Mn{constructor(t,n,i,o,r,l,d){super(t,n,i,o,r,l,d),this.disableRipple=!1}ngAfterContentInit(){this._inkBar=new yn(this._items),super.ngAfterContentInit()}_itemSelected(t){t.preventDefault()}static#e=this.\u0275fac=function(n){return new(n||a)(e.rXU(e.aKT),e.rXU(e.gRc),e.rXU(ve.Xj),e.rXU(Ce.dS,8),e.rXU(e.SKi),e.rXU(le.OD),e.rXU(e.bc$,8))};static#t=this.\u0275cmp=e.VBU({type:a,selectors:[["mat-tab-header"]],contentQueries:function(n,i,o){if(1&n&&e.wni(o,Pe,4),2&n){let r;e.mGM(r=e.lsd())&&(i._items=r)}},viewQuery:function(n,i){if(1&n&&(e.GBs(en,7),e.GBs(tn,7),e.GBs(nn,7),e.GBs(an,5),e.GBs(on,5)),2&n){let o;e.mGM(o=e.lsd())&&(i._tabListContainer=o.first),e.mGM(o=e.lsd())&&(i._tabList=o.first),e.mGM(o=e.lsd())&&(i._tabListInner=o.first),e.mGM(o=e.lsd())&&(i._nextPaginator=o.first),e.mGM(o=e.lsd())&&(i._previousPaginator=o.first)}},hostAttrs:[1,"mat-mdc-tab-header"],hostVars:4,hostBindings:function(n,i){2&n&&e.AVh("mat-mdc-tab-header-pagination-controls-enabled",i._showPaginationControls)("mat-mdc-tab-header-rtl","rtl"==i._getLayoutDirection())},inputs:{ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],disableRipple:[2,"disableRipple","disableRipple",e.L39]},standalone:!0,features:[e.GFd,e.Vt3,e.aNF],ngContentSelectors:ye,decls:13,vars:10,consts:[["previousPaginator",""],["tabListContainer",""],["tabList",""],["tabListInner",""],["nextPaginator",""],["mat-ripple","",1,"mat-mdc-tab-header-pagination","mat-mdc-tab-header-pagination-before",3,"click","mousedown","touchend","matRippleDisabled"],[1,"mat-mdc-tab-header-pagination-chevron"],[1,"mat-mdc-tab-label-container",3,"keydown"],["role","tablist",1,"mat-mdc-tab-list",3,"cdkObserveContent"],[1,"mat-mdc-tab-labels"],["mat-ripple","",1,"mat-mdc-tab-header-pagination","mat-mdc-tab-header-pagination-after",3,"mousedown","click","touchend","matRippleDisabled"]],template:function(n,i){if(1&n){const o=e.RV6();e.NAR(),e.j41(0,"div",5,0),e.bIt("click",function(){return e.eBV(o),e.Njj(i._handlePaginatorClick("before"))})("mousedown",function(l){return e.eBV(o),e.Njj(i._handlePaginatorPress("before",l))})("touchend",function(){return e.eBV(o),e.Njj(i._stopInterval())}),e.nrm(2,"div",6),e.k0s(),e.j41(3,"div",7,1),e.bIt("keydown",function(l){return e.eBV(o),e.Njj(i._handleKeydown(l))}),e.j41(5,"div",8,2),e.bIt("cdkObserveContent",function(){return e.eBV(o),e.Njj(i._onContentChanges())}),e.j41(7,"div",9,3),e.SdG(9),e.k0s()()(),e.j41(10,"div",10,4),e.bIt("mousedown",function(l){return e.eBV(o),e.Njj(i._handlePaginatorPress("after",l))})("click",function(){return e.eBV(o),e.Njj(i._handlePaginatorClick("after"))})("touchend",function(){return e.eBV(o),e.Njj(i._stopInterval())}),e.nrm(12,"div",6),e.k0s()}2&n&&(e.AVh("mat-mdc-tab-header-pagination-disabled",i._disableScrollBefore),e.Y8G("matRippleDisabled",i._disableScrollBefore||i.disableRipple),e.R7$(3),e.AVh("_mat-animation-noopable","NoopAnimations"===i._animationMode),e.R7$(2),e.BMQ("aria-label",i.ariaLabel||null)("aria-labelledby",i.ariaLabelledby||null),e.R7$(5),e.AVh("mat-mdc-tab-header-pagination-disabled",i._disableScrollAfter),e.Y8G("matRippleDisabled",i._disableScrollAfter||i.disableRipple))},dependencies:[v.r6,qt.Wv],styles:[".mat-mdc-tab-header{display:flex;overflow:hidden;position:relative;flex-shrink:0}.mdc-tab-indicator .mdc-tab-indicator__content{transition-duration:var(--mat-tab-animation-duration, 250ms)}.mat-mdc-tab-header-pagination{-webkit-user-select:none;user-select:none;position:relative;display:none;justify-content:center;align-items:center;min-width:32px;cursor:pointer;z-index:2;-webkit-tap-highlight-color:rgba(0,0,0,0);touch-action:none;box-sizing:content-box;outline:0}.mat-mdc-tab-header-pagination::-moz-focus-inner{border:0}.mat-mdc-tab-header-pagination .mat-ripple-element{opacity:.12;background-color:var(--mat-tab-header-inactive-ripple-color, var(--mat-app-on-surface))}.mat-mdc-tab-header-pagination-controls-enabled .mat-mdc-tab-header-pagination{display:flex}.mat-mdc-tab-header-pagination-before,.mat-mdc-tab-header-rtl .mat-mdc-tab-header-pagination-after{padding-left:4px}.mat-mdc-tab-header-pagination-before .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-header-rtl .mat-mdc-tab-header-pagination-after .mat-mdc-tab-header-pagination-chevron{transform:rotate(-135deg)}.mat-mdc-tab-header-rtl .mat-mdc-tab-header-pagination-before,.mat-mdc-tab-header-pagination-after{padding-right:4px}.mat-mdc-tab-header-rtl .mat-mdc-tab-header-pagination-before .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-header-pagination-after .mat-mdc-tab-header-pagination-chevron{transform:rotate(45deg)}.mat-mdc-tab-header-pagination-chevron{border-style:solid;border-width:2px 2px 0 0;height:8px;width:8px;border-color:var(--mat-tab-header-pagination-icon-color, var(--mat-app-on-surface))}.mat-mdc-tab-header-pagination-disabled{box-shadow:none;cursor:default;pointer-events:none}.mat-mdc-tab-header-pagination-disabled .mat-mdc-tab-header-pagination-chevron{opacity:.4}.mat-mdc-tab-list{flex-grow:1;position:relative;transition:transform 500ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-mdc-tab-list{transition:none}.mat-mdc-tab-label-container{display:flex;flex-grow:1;overflow:hidden;z-index:1;border-bottom-style:solid;border-bottom-width:var(--mat-tab-header-divider-height);border-bottom-color:var(--mat-tab-header-divider-color, var(--mat-app-surface-variant))}.mat-mdc-tab-group-inverted-header .mat-mdc-tab-label-container{border-bottom:none;border-top-style:solid;border-top-width:var(--mat-tab-header-divider-height);border-top-color:var(--mat-tab-header-divider-color, var(--mat-app-surface-variant))}.mat-mdc-tab-labels{display:flex;flex:1 0 auto}[mat-align-tabs=center]>.mat-mdc-tab-header .mat-mdc-tab-labels{justify-content:center}[mat-align-tabs=end]>.mat-mdc-tab-header .mat-mdc-tab-labels{justify-content:flex-end}.cdk-drop-list .mat-mdc-tab-labels,.mat-mdc-tab-labels.cdk-drop-list{min-height:var(--mdc-secondary-navigation-tab-container-height)}.mat-mdc-tab::before{margin:5px}.cdk-high-contrast-active .mat-mdc-tab[aria-disabled=true]{color:GrayText}"],encapsulation:2})}return a})();const Fn=new e.nKC("MAT_TABS_CONFIG"),wn={translateTab:(0,F.hZ)("translateTab",[(0,F.wk)("center, void, left-origin-center, right-origin-center",(0,F.iF)({transform:"none",visibility:"visible"})),(0,F.wk)("left",(0,F.iF)({transform:"translate3d(-100%, 0, 0)",minHeight:"1px",visibility:"hidden"})),(0,F.wk)("right",(0,F.iF)({transform:"translate3d(100%, 0, 0)",minHeight:"1px",visibility:"hidden"})),(0,F.kY)("* => left, * => right, left => center, right => center",(0,F.i0)("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")),(0,F.kY)("void => left-origin-center",[(0,F.iF)({transform:"translate3d(-100%, 0, 0)",visibility:"hidden"}),(0,F.i0)("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")]),(0,F.kY)("void => right-origin-center",[(0,F.iF)({transform:"translate3d(100%, 0, 0)",visibility:"hidden"}),(0,F.i0)("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")])])};let En=(()=>{class a extends te.I3{constructor(t,n,i,o){super(t,n,o),this._host=i,this._centeringSub=ne.y.EMPTY,this._leavingSub=ne.y.EMPTY}ngOnInit(){super.ngOnInit(),this._centeringSub=this._host._beforeCentering.pipe((0,ce.Z)(this._host._isCenterPosition(this._host._position))).subscribe(t=>{this._host._content&&t&&!this.hasAttached()&&this.attach(this._host._content)}),this._leavingSub=this._host._afterLeavingCenter.subscribe(()=>{this._host.preserveContent||this.detach()})}ngOnDestroy(){super.ngOnDestroy(),this._centeringSub.unsubscribe(),this._leavingSub.unsubscribe()}static#e=this.\u0275fac=function(n){return new(n||a)(e.rXU(e.OM3),e.rXU(e.c1b),e.rXU((0,e.Rfq)(()=>Ue)),e.rXU(_.qQ))};static#t=this.\u0275dir=e.FsC({type:a,selectors:[["","matTabBodyHost",""]],standalone:!0,features:[e.Vt3]})}return a})(),Ue=(()=>{class a{set position(t){this._positionIndex=t,this._computePositionAnimationState()}constructor(t,n,i){this._elementRef=t,this._dir=n,this._dirChangeSubscription=ne.y.EMPTY,this._translateTabComplete=new se.B7,this._onCentering=new e.bkB,this._beforeCentering=new e.bkB,this._afterLeavingCenter=new e.bkB,this._onCentered=new e.bkB(!0),this.animationDuration="500ms",this.preserveContent=!1,n&&(this._dirChangeSubscription=n.change.subscribe(o=>{this._computePositionAnimationState(o),i.markForCheck()})),this._translateTabComplete.pipe((0,Zt.F)((o,r)=>o.fromState===r.fromState&&o.toState===r.toState)).subscribe(o=>{this._isCenterPosition(o.toState)&&this._isCenterPosition(this._position)&&this._onCentered.emit(),this._isCenterPosition(o.fromState)&&!this._isCenterPosition(this._position)&&this._afterLeavingCenter.emit()})}ngOnInit(){"center"==this._position&&null!=this.origin&&(this._position=this._computePositionFromOrigin(this.origin))}ngOnDestroy(){this._dirChangeSubscription.unsubscribe(),this._translateTabComplete.complete()}_onTranslateTabStarted(t){const n=this._isCenterPosition(t.toState);this._beforeCentering.emit(n),n&&this._onCentering.emit(this._elementRef.nativeElement.clientHeight)}_getLayoutDirection(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}_isCenterPosition(t){return"center"==t||"left-origin-center"==t||"right-origin-center"==t}_computePositionAnimationState(t=this._getLayoutDirection()){this._position=this._positionIndex<0?"ltr"==t?"left":"right":this._positionIndex>0?"ltr"==t?"right":"left":"center"}_computePositionFromOrigin(t){const n=this._getLayoutDirection();return"ltr"==n&&t<=0||"rtl"==n&&t>0?"left-origin-center":"right-origin-center"}static#e=this.\u0275fac=function(n){return new(n||a)(e.rXU(e.aKT),e.rXU(Ce.dS,8),e.rXU(e.gRc))};static#t=this.\u0275cmp=e.VBU({type:a,selectors:[["mat-tab-body"]],viewQuery:function(n,i){if(1&n&&e.GBs(te.I3,5),2&n){let o;e.mGM(o=e.lsd())&&(i._portalHost=o.first)}},hostAttrs:[1,"mat-mdc-tab-body"],inputs:{_content:[0,"content","_content"],origin:"origin",animationDuration:"animationDuration",preserveContent:"preserveContent",position:"position"},outputs:{_onCentering:"_onCentering",_beforeCentering:"_beforeCentering",_afterLeavingCenter:"_afterLeavingCenter",_onCentered:"_onCentered"},standalone:!0,features:[e.aNF],decls:3,vars:6,consts:[["content",""],["cdkScrollable","",1,"mat-mdc-tab-body-content"],["matTabBodyHost",""]],template:function(n,i){if(1&n){const o=e.RV6();e.j41(0,"div",1,0),e.bIt("@translateTab.start",function(l){return e.eBV(o),e.Njj(i._onTranslateTabStarted(l))})("@translateTab.done",function(l){return e.eBV(o),e.Njj(i._translateTabComplete.next(l))}),e.DNE(2,ln,0,0,"ng-template",2),e.k0s()}2&n&&e.Y8G("@translateTab",e.l_i(3,sn,i._position,e.eq3(1,rn,i.animationDuration)))},dependencies:[En,ve.uv],styles:['.mat-mdc-tab-body{top:0;left:0;right:0;bottom:0;position:absolute;display:block;overflow:hidden;outline:0;flex-basis:100%}.mat-mdc-tab-body.mat-mdc-tab-body-active{position:relative;overflow-x:hidden;overflow-y:auto;z-index:1;flex-grow:1}.mat-mdc-tab-group.mat-mdc-tab-group-dynamic-height .mat-mdc-tab-body.mat-mdc-tab-body-active{overflow-y:hidden}.mat-mdc-tab-body-content{height:100%;overflow:auto}.mat-mdc-tab-group-dynamic-height .mat-mdc-tab-body-content{overflow:hidden}.mat-mdc-tab-body-content[style*="visibility: hidden"]{display:none}'],encapsulation:2,data:{animation:[wn.translateTab]}})}return a})(),jn=0,Gn=(()=>{class a{get fitInkBarToContent(){return this._fitInkBarToContent}set fitInkBarToContent(t){this._fitInkBarToContent=t,this._changeDetectorRef.markForCheck()}get selectedIndex(){return this._selectedIndex}set selectedIndex(t){this._indexToSelect=isNaN(t)?null:t}get animationDuration(){return this._animationDuration}set animationDuration(t){const n=t+"";this._animationDuration=/^\d+$/.test(n)?t+"ms":n}get contentTabIndex(){return this._contentTabIndex}set contentTabIndex(t){this._contentTabIndex=isNaN(t)?null:t}get backgroundColor(){return this._backgroundColor}set backgroundColor(t){const n=this._elementRef.nativeElement.classList;n.remove("mat-tabs-with-background",`mat-background-${this.backgroundColor}`),t&&n.add("mat-tabs-with-background",`mat-background-${t}`),this._backgroundColor=t}constructor(t,n,i,o){this._elementRef=t,this._changeDetectorRef=n,this._animationMode=o,this._tabs=new e.rOR,this._indexToSelect=0,this._lastFocusedTabIndex=null,this._tabBodyWrapperHeight=0,this._tabsSubscription=ne.y.EMPTY,this._tabLabelSubscription=ne.y.EMPTY,this._fitInkBarToContent=!1,this.stretchTabs=!0,this.dynamicHeight=!1,this._selectedIndex=null,this.headerPosition="above",this.disablePagination=!1,this.disableRipple=!1,this.preserveContent=!1,this.selectedIndexChange=new e.bkB,this.focusChange=new e.bkB,this.animationDone=new e.bkB,this.selectedTabChange=new e.bkB(!0),this._isServer=!(0,e.WQX)(le.OD).isBrowser,this._groupId=jn++,this.animationDuration=i&&i.animationDuration?i.animationDuration:"500ms",this.disablePagination=!(!i||null==i.disablePagination)&&i.disablePagination,this.dynamicHeight=!(!i||null==i.dynamicHeight)&&i.dynamicHeight,null!=i?.contentTabIndex&&(this.contentTabIndex=i.contentTabIndex),this.preserveContent=!!i?.preserveContent,this.fitInkBarToContent=!(!i||null==i.fitInkBarToContent)&&i.fitInkBarToContent,this.stretchTabs=!i||null==i.stretchTabs||i.stretchTabs}ngAfterContentChecked(){const t=this._indexToSelect=this._clampTabIndex(this._indexToSelect);if(this._selectedIndex!=t){const n=null==this._selectedIndex;if(!n){this.selectedTabChange.emit(this._createChangeEvent(t));const i=this._tabBodyWrapper.nativeElement;i.style.minHeight=i.clientHeight+"px"}Promise.resolve().then(()=>{this._tabs.forEach((i,o)=>i.isActive=o===t),n||(this.selectedIndexChange.emit(t),this._tabBodyWrapper.nativeElement.style.minHeight="")})}this._tabs.forEach((n,i)=>{n.position=i-t,null!=this._selectedIndex&&0==n.position&&!n.origin&&(n.origin=t-this._selectedIndex)}),this._selectedIndex!==t&&(this._selectedIndex=t,this._lastFocusedTabIndex=null,this._changeDetectorRef.markForCheck())}ngAfterContentInit(){this._subscribeToAllTabChanges(),this._subscribeToTabLabels(),this._tabsSubscription=this._tabs.changes.subscribe(()=>{const t=this._clampTabIndex(this._indexToSelect);if(t===this._selectedIndex){const n=this._tabs.toArray();let i;for(let o=0;o<n.length;o++)if(n[o].isActive){this._indexToSelect=this._selectedIndex=o,this._lastFocusedTabIndex=null,i=n[o];break}!i&&n[t]&&Promise.resolve().then(()=>{n[t].isActive=!0,this.selectedTabChange.emit(this._createChangeEvent(t))})}this._changeDetectorRef.markForCheck()})}_subscribeToAllTabChanges(){this._allTabs.changes.pipe((0,ce.Z)(this._allTabs)).subscribe(t=>{this._tabs.reset(t.filter(n=>n._closestTabGroup===this||!n._closestTabGroup)),this._tabs.notifyOnChanges()})}ngOnDestroy(){this._tabs.destroy(),this._tabsSubscription.unsubscribe(),this._tabLabelSubscription.unsubscribe()}realignInkBar(){this._tabHeader&&this._tabHeader._alignInkBarToSelectedTab()}updatePagination(){this._tabHeader&&this._tabHeader.updatePagination()}focusTab(t){const n=this._tabHeader;n&&(n.focusIndex=t)}_focusChanged(t){this._lastFocusedTabIndex=t,this.focusChange.emit(this._createChangeEvent(t))}_createChangeEvent(t){const n=new Sn;return n.index=t,this._tabs&&this._tabs.length&&(n.tab=this._tabs.toArray()[t]),n}_subscribeToTabLabels(){this._tabLabelSubscription&&this._tabLabelSubscription.unsubscribe(),this._tabLabelSubscription=(0,be.h)(...this._tabs.map(t=>t._stateChanges)).subscribe(()=>this._changeDetectorRef.markForCheck())}_clampTabIndex(t){return Math.min(this._tabs.length-1,Math.max(t||0,0))}_getTabLabelId(t){return`mat-tab-label-${this._groupId}-${t}`}_getTabContentId(t){return`mat-tab-content-${this._groupId}-${t}`}_setTabBodyWrapperHeight(t){if(!this.dynamicHeight||!this._tabBodyWrapperHeight)return;const n=this._tabBodyWrapper.nativeElement;n.style.height=this._tabBodyWrapperHeight+"px",this._tabBodyWrapper.nativeElement.offsetHeight&&(n.style.height=t+"px")}_removeTabBodyWrapperHeight(){const t=this._tabBodyWrapper.nativeElement;this._tabBodyWrapperHeight=t.clientHeight,t.style.height="",this.animationDone.emit()}_handleClick(t,n,i){n.focusIndex=i,t.disabled||(this.selectedIndex=i)}_getTabIndex(t){return t===(this._lastFocusedTabIndex??this.selectedIndex)?0:-1}_tabFocusChanged(t,n){t&&"mouse"!==t&&"touch"!==t&&(this._tabHeader.focusIndex=n)}static#e=this.\u0275fac=function(n){return new(n||a)(e.rXU(e.aKT),e.rXU(e.gRc),e.rXU(Fn,8),e.rXU(e.bc$,8))};static#t=this.\u0275cmp=e.VBU({type:a,selectors:[["mat-tab-group"]],contentQueries:function(n,i,o){if(1&n&&e.wni(o,Ae,5),2&n){let r;e.mGM(r=e.lsd())&&(i._allTabs=r)}},viewQuery:function(n,i){if(1&n&&(e.GBs(cn,5),e.GBs(dn,5)),2&n){let o;e.mGM(o=e.lsd())&&(i._tabBodyWrapper=o.first),e.mGM(o=e.lsd())&&(i._tabHeader=o.first)}},hostAttrs:[1,"mat-mdc-tab-group"],hostVars:10,hostBindings:function(n,i){2&n&&(e.HbH("mat-"+(i.color||"primary")),e.xc7("--mat-tab-animation-duration",i.animationDuration),e.AVh("mat-mdc-tab-group-dynamic-height",i.dynamicHeight)("mat-mdc-tab-group-inverted-header","below"===i.headerPosition)("mat-mdc-tab-group-stretch-tabs",i.stretchTabs))},inputs:{color:"color",fitInkBarToContent:[2,"fitInkBarToContent","fitInkBarToContent",e.L39],stretchTabs:[2,"mat-stretch-tabs","stretchTabs",e.L39],dynamicHeight:[2,"dynamicHeight","dynamicHeight",e.L39],selectedIndex:[2,"selectedIndex","selectedIndex",e.Udg],headerPosition:"headerPosition",animationDuration:"animationDuration",contentTabIndex:[2,"contentTabIndex","contentTabIndex",e.Udg],disablePagination:[2,"disablePagination","disablePagination",e.L39],disableRipple:[2,"disableRipple","disableRipple",e.L39],preserveContent:[2,"preserveContent","preserveContent",e.L39],backgroundColor:"backgroundColor",ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"]},outputs:{selectedIndexChange:"selectedIndexChange",focusChange:"focusChange",animationDone:"animationDone",selectedTabChange:"selectedTabChange"},exportAs:["matTabGroup"],standalone:!0,features:[e.Jv_([{provide:Be,useExisting:a}]),e.GFd,e.aNF],ngContentSelectors:ye,decls:9,vars:8,consts:[["tabHeader",""],["tabBodyWrapper",""],["tabNode",""],[3,"indexFocused","selectFocusedIndex","selectedIndex","disableRipple","disablePagination","aria-label","aria-labelledby"],["role","tab","matTabLabelWrapper","","cdkMonitorElementFocus","",1,"mdc-tab","mat-mdc-tab","mat-mdc-focus-indicator",3,"id","mdc-tab--active","class","disabled","fitInkBarToContent"],[1,"mat-mdc-tab-body-wrapper"],["role","tabpanel",3,"id","mat-mdc-tab-body-active","class","content","position","origin","animationDuration","preserveContent"],["role","tab","matTabLabelWrapper","","cdkMonitorElementFocus","",1,"mdc-tab","mat-mdc-tab","mat-mdc-focus-indicator",3,"click","cdkFocusChange","id","disabled","fitInkBarToContent"],[1,"mdc-tab__ripple"],["mat-ripple","",1,"mat-mdc-tab-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mdc-tab__content"],[1,"mdc-tab__text-label"],[3,"cdkPortalOutlet"],["role","tabpanel",3,"_onCentered","_onCentering","id","content","position","origin","animationDuration","preserveContent"]],template:function(n,i){if(1&n){const o=e.RV6();e.NAR(),e.j41(0,"mat-tab-header",3,0),e.bIt("indexFocused",function(l){return e.eBV(o),e.Njj(i._focusChanged(l))})("selectFocusedIndex",function(l){return e.eBV(o),e.Njj(i.selectedIndex=l)}),e.Z7z(2,un,8,17,"div",4,e.fX1),e.k0s(),e.DNE(4,hn,1,0),e.j41(5,"div",5,1),e.Z7z(7,gn,1,13,"mat-tab-body",6,e.fX1),e.k0s()}2&n&&(e.Y8G("selectedIndex",i.selectedIndex||0)("disableRipple",i.disableRipple)("disablePagination",i.disablePagination)("aria-label",i.ariaLabel)("aria-labelledby",i.ariaLabelledby),e.R7$(2),e.Dyx(i._tabs),e.R7$(2),e.vxM(i._isServer?4:-1),e.R7$(),e.AVh("_mat-animation-noopable","NoopAnimations"===i._animationMode),e.R7$(2),e.Dyx(i._tabs))},dependencies:[Rn,Pe,Ne.vR,v.r6,te.I3,Ue],styles:['.mdc-tab{min-width:90px;padding:0 24px;display:flex;flex:1 0 auto;justify-content:center;box-sizing:border-box;border:none;outline:none;text-align:center;white-space:nowrap;cursor:pointer;z-index:1}.mdc-tab__content{display:flex;align-items:center;justify-content:center;height:inherit;pointer-events:none}.mdc-tab__text-label{transition:150ms color linear;display:inline-block;line-height:1;z-index:2}.mdc-tab--active .mdc-tab__text-label{transition-delay:100ms}._mat-animation-noopable .mdc-tab__text-label{transition:none}.mdc-tab-indicator{display:flex;position:absolute;top:0;left:0;justify-content:center;width:100%;height:100%;pointer-events:none;z-index:1}.mdc-tab-indicator__content{transition:var(--mat-tab-animation-duration, 250ms) transform cubic-bezier(0.4, 0, 0.2, 1);transform-origin:left;opacity:0}.mdc-tab-indicator__content--underline{align-self:flex-end;box-sizing:border-box;width:100%;border-top-style:solid}.mdc-tab-indicator--active .mdc-tab-indicator__content{opacity:1}._mat-animation-noopable .mdc-tab-indicator__content,.mdc-tab-indicator--no-transition .mdc-tab-indicator__content{transition:none}.mat-mdc-tab-ripple{position:absolute;top:0;left:0;bottom:0;right:0;pointer-events:none}.mat-mdc-tab{-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;text-decoration:none;background:none;height:var(--mdc-secondary-navigation-tab-container-height);font-family:var(--mat-tab-header-label-text-font, var(--mat-app-title-small-font));font-size:var(--mat-tab-header-label-text-size, var(--mat-app-title-small-size));letter-spacing:var(--mat-tab-header-label-text-tracking, var(--mat-app-title-small-tracking));line-height:var(--mat-tab-header-label-text-line-height, var(--mat-app-title-small-line-height));font-weight:var(--mat-tab-header-label-text-weight, var(--mat-app-title-small-weight))}.mat-mdc-tab.mdc-tab{flex-grow:0}.mat-mdc-tab .mdc-tab-indicator__content--underline{border-color:var(--mdc-tab-indicator-active-indicator-color, var(--mat-app-primary));border-top-width:var(--mdc-tab-indicator-active-indicator-height);border-radius:var(--mdc-tab-indicator-active-indicator-shape)}.mat-mdc-tab:hover .mdc-tab__text-label{color:var(--mat-tab-header-inactive-hover-label-text-color, var(--mat-app-on-surface))}.mat-mdc-tab:focus .mdc-tab__text-label{color:var(--mat-tab-header-inactive-focus-label-text-color, var(--mat-app-on-surface))}.mat-mdc-tab.mdc-tab--active .mdc-tab__text-label{color:var(--mat-tab-header-active-label-text-color, var(--mat-app-on-surface))}.mat-mdc-tab.mdc-tab--active .mdc-tab__ripple::before,.mat-mdc-tab.mdc-tab--active .mat-ripple-element{background-color:var(--mat-tab-header-active-ripple-color, var(--mat-app-on-surface))}.mat-mdc-tab.mdc-tab--active:hover .mdc-tab__text-label{color:var(--mat-tab-header-active-hover-label-text-color, var(--mat-app-on-surface))}.mat-mdc-tab.mdc-tab--active:hover .mdc-tab-indicator__content--underline{border-color:var(--mat-tab-header-active-hover-indicator-color, var(--mat-app-primary))}.mat-mdc-tab.mdc-tab--active:focus .mdc-tab__text-label{color:var(--mat-tab-header-active-focus-label-text-color, var(--mat-app-on-surface))}.mat-mdc-tab.mdc-tab--active:focus .mdc-tab-indicator__content--underline{border-color:var(--mat-tab-header-active-focus-indicator-color, var(--mat-app-primary))}.mat-mdc-tab.mat-mdc-tab-disabled{opacity:.4;pointer-events:none}.mat-mdc-tab.mat-mdc-tab-disabled .mdc-tab__content{pointer-events:none}.mat-mdc-tab.mat-mdc-tab-disabled .mdc-tab__ripple::before,.mat-mdc-tab.mat-mdc-tab-disabled .mat-ripple-element{background-color:var(--mat-tab-header-disabled-ripple-color)}.mat-mdc-tab .mdc-tab__ripple::before{content:"";display:block;position:absolute;top:0;left:0;right:0;bottom:0;opacity:0;pointer-events:none;background-color:var(--mat-tab-header-inactive-ripple-color, var(--mat-app-on-surface))}.mat-mdc-tab .mdc-tab__text-label{color:var(--mat-tab-header-inactive-label-text-color, var(--mat-app-on-surface));display:inline-flex;align-items:center}.mat-mdc-tab .mdc-tab__content{position:relative;pointer-events:auto}.mat-mdc-tab:hover .mdc-tab__ripple::before{opacity:.04}.mat-mdc-tab.cdk-program-focused .mdc-tab__ripple::before,.mat-mdc-tab.cdk-keyboard-focused .mdc-tab__ripple::before{opacity:.12}.mat-mdc-tab .mat-ripple-element{opacity:.12;background-color:var(--mat-tab-header-inactive-ripple-color, var(--mat-app-on-surface))}.mat-mdc-tab-group.mat-mdc-tab-group-stretch-tabs>.mat-mdc-tab-header .mat-mdc-tab{flex-grow:1}.mat-mdc-tab-group{display:flex;flex-direction:column;max-width:100%}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination{background-color:var(--mat-tab-header-with-background-background-color)}.mat-mdc-tab-group.mat-tabs-with-background.mat-primary>.mat-mdc-tab-header .mat-mdc-tab .mdc-tab__text-label{color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background.mat-primary>.mat-mdc-tab-header .mdc-tab-indicator__content--underline{border-color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background:not(.mat-primary)>.mat-mdc-tab-header .mat-mdc-tab:not(.mdc-tab--active) .mdc-tab__text-label{color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background:not(.mat-primary)>.mat-mdc-tab-header .mat-mdc-tab:not(.mdc-tab--active) .mdc-tab-indicator__content--underline{border-color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-mdc-focus-indicator::before,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mat-mdc-focus-indicator::before{border-color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-ripple-element,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mdc-tab__ripple::before,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mat-ripple-element,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mdc-tab__ripple::before{background-color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mat-mdc-tab-header-pagination-chevron{color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-mdc-tab-group-inverted-header{flex-direction:column-reverse}.mat-mdc-tab-group.mat-mdc-tab-group-inverted-header .mdc-tab-indicator__content--underline{align-self:flex-start}.mat-mdc-tab-body-wrapper{position:relative;overflow:hidden;display:flex;transition:height 500ms cubic-bezier(0.35, 0, 0.25, 1)}.mat-mdc-tab-body-wrapper._mat-animation-noopable{transition:none !important;animation:none !important}'],encapsulation:2})}return a})();class Sn{}var de=c(640);const Ye=()=>({});function Dn(a,s){1&a&&(e.j41(0,"div",18),e.EFF(1," Options Available "),e.k0s())}function Nn(a,s){if(1&a){const t=e.RV6();e.j41(0,"a-counter",19),e.bIt("ngModelChange",function(i){e.eBV(t);const o=e.XpG().$implicit,r=e.XpG(5);return e.Njj(r.updateItemQuantity(o,i))}),e.k0s()}if(2&a){const t=e.XpG().$implicit;e.Y8G("ngModel",t.quantity)}}function $n(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",20)(1,"div",21)(2,"button",22)(3,"app-icon"),e.EFF(4,"remove"),e.k0s()()(),e.j41(5,"div",23),e.EFF(6),e.k0s(),e.j41(7,"button",24),e.bIt("click",function(){e.eBV(t);const i=e.XpG().$implicit,o=e.XpG(5);return e.Njj(o.addItem(i))}),e.j41(8,"app-icon"),e.EFF(9,"add"),e.k0s()()()}if(2&a){const t=e.XpG().$implicit;e.R7$(),e.Y8G("matTooltip",t.quantity?"Items with options must be removed from order confirmation page":""),e.R7$(),e.Y8G("disabled",!0),e.R7$(4),e.SpI(" ",t.quantity," ")}}function Ln(a,s){if(1&a&&(e.j41(0,"div",12)(1,"div",13)(2,"div",13),e.EFF(3),e.k0s(),e.DNE(4,Dn,2,0,"div",14),e.k0s(),e.j41(5,"div",15),e.EFF(6),e.nI1(7,"currency"),e.k0s(),e.DNE(8,Nn,1,1,"a-counter",16)(9,$n,10,3,"div",17),e.k0s()),2&a){const t=s.$implicit,n=e.XpG(5);e.R7$(3),e.SpI(" ",t.name," "),e.R7$(),e.Y8G("ngIf",t.options.length),e.R7$(2),e.SpI(" ",e.i5U(7,5,t.unit_price/100,n.code)," "),e.R7$(2),e.Y8G("ngIf",!t.options.length),e.R7$(),e.Y8G("ngIf",t.options.length)}}function Bn(a,s){if(1&a&&(e.j41(0,"mat-tab",9)(1,"div",10),e.DNE(2,Ln,10,8,"div",11),e.k0s()()),2&a){const t=e.XpG().$implicit,n=e.XpG(3);e.Y8G("label",t),e.R7$(2),e.Y8G("ngForOf",(n.menu_items||e.lJ4(2,Ye))[t])}}function An(a,s){if(1&a&&(e.qex(0),e.DNE(1,Bn,3,3,"mat-tab",8),e.bVm()),2&a){const t=s.$implicit,n=e.XpG(3);e.R7$(),e.Y8G("ngIf",(n.menu_items||e.lJ4(1,Ye))[t].length)}}function Vn(a,s){if(1&a&&(e.qex(0),e.j41(1,"mat-tab-group"),e.DNE(2,An,2,2,"ng-container",7),e.k0s(),e.bVm()),2&a){const t=e.XpG(2);e.R7$(2),e.Y8G("ngForOf",t.categories)}}function Pn(a,s){if(1&a&&(e.j41(0,"div",5),e.DNE(1,Vn,3,1,"ng-container",6),e.k0s()),2&a){const t=e.XpG(),n=e.sdS(5);e.R7$(),e.Y8G("ngIf",!t.show_order_details)("ngIfElse",n)}}function Xn(a,s){if(1&a){const t=e.RV6();e.qex(0),e.j41(1,"button",26),e.EFF(2," Cancel "),e.k0s(),e.j41(3,"button",27),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.show_order_details=!0)}),e.EFF(4," Confirm "),e.k0s(),e.bVm()}if(2&a){const t=e.XpG(2);e.R7$(3),e.Y8G("disabled",!t.order.item_count)("matBadge",t.order.item_count)("matBadgeHidden",!t.order.item_count)}}function Un(a,s){if(1&a){const t=e.RV6();e.j41(0,"button",28),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.show_order_details=!1)}),e.EFF(1," Back "),e.k0s(),e.j41(2,"button",29),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.saveOrder())}),e.EFF(3," Save Order "),e.k0s()}}function Yn(a,s){if(1&a&&(e.j41(0,"footer",25),e.DNE(1,Xn,5,3,"ng-container",6)(2,Un,4,0,"ng-template",null,2,e.C5r),e.k0s()),2&a){const t=e.sdS(3),n=e.XpG();e.R7$(),e.Y8G("ngIf",!n.show_order_details)("ngIfElse",t)}}function Hn(a,s){if(1&a&&(e.j41(0,"div",30),e.nrm(1,"mat-spinner",31),e.j41(2,"p"),e.EFF(3),e.k0s()()),2&a){const t=e.XpG();e.R7$(3),e.JRh(t.loading)}}function zn(a,s){if(1&a&&(e.j41(0,"div",35),e.EFF(1),e.k0s()),2&a){const t=e.XpG().$implicit,n=e.XpG(2);e.Y8G("matTooltip",n.optionsFor(t)),e.R7$(),e.Lme(" ",t.options.length," option",1===t.options.length?"":"s"," selected ")}}function Wn(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",12)(1,"div",13)(2,"div",13),e.EFF(3),e.k0s(),e.DNE(4,zn,2,3,"div",33),e.k0s(),e.j41(5,"div",15),e.EFF(6),e.nI1(7,"currency"),e.k0s(),e.j41(8,"a-counter",34),e.bIt("ngModelChange",function(i){const o=e.eBV(t).$implicit,r=e.XpG(2);return e.Njj(r.updateItemQuantity(o,i))}),e.k0s()()}if(2&a){const t=s.$implicit,n=e.XpG(2);e.R7$(3),e.JRh(t.name),e.R7$(),e.Y8G("ngIf",t.options.length),e.R7$(2),e.SpI(" ",e.i5U(7,4,t.total_cost/100,n.code)," "),e.R7$(2),e.Y8G("ngModel",t.quantity)}}function Qn(a,s){if(1&a&&(e.j41(0,"header",32)(1,"h3"),e.EFF(2,"Confirm Order"),e.k0s()(),e.j41(3,"div",10),e.DNE(4,Wn,9,7,"div",11),e.k0s()),2&a){const t=e.XpG();e.R7$(4),e.Y8G("ngForOf",t.order.items)}}let He=(()=>{class a extends p.Tv{get code(){return this._org.currency_code}constructor(t,n){super(),this._org=t,this._data=n,this.event=new e.bkB,this.loading="",this.menu_items={},this.categories=[],this.loading="Loading menu..."}ngOnInit(){var t=this;return(0,h.A)(function*(){t.loading="Loading menu...",t.order=new R.M(t._data.order),t.rules=yield t._data.getCateringConfig(t.order.event?.space?.level?.parent_id),t._data.menu.subscribe(n=>{t.loading="Loading menu...";const i=(0,p.Am)(n.map(r=>r.category)),o={};for(const r of i)o[r]=n.filter(l=>l.category===r&&De(l,t.rules,t.order.event));t.categories=i,t.menu_items=o,t.updateMenuQuantities(),t.timeout("clear_loading",()=>t.loading="",1e3)})})()}addItem(t,n=!0){const i=this.order.items.find(o=>o.id===t.id&&o.options.length===o.options.reduce((r,l)=>r+(t.options.find(d=>l.id===d.id)?1:0),0));n&&t.options?.length?this._data.selectOptions(t.options).then(o=>{const r=new x.T({...t,options:o});this.addItem(r,!1)}):this.order=new R.M(i?{...this.order,items:this.order.items.filter(o=>!(o.id===t.id&&o.options_string===t.options_string)).concat([new x.T({...t,quantity:i.quantity+1})])}:{...this.order,items:this.order.items.concat([new x.T({...t,quantity:1})])}),this.updateMenuQuantities()}removeItem(t){this.order=new R.M({...this.order,items:this.order.items.filter(n=>n.id!==t.id&&n.options_string===t.options_string)}),this.updateMenuQuantities()}updateItemQuantity(t,n){const i=this.order.items.find(r=>r.id===t.id&&r.options_string===t.options_string);let o=[...this.order.items];o=i?this.order.items.filter(r=>!(r.id===t.id&&r.options_string===t.options_string)).concat([new x.T({...t,quantity:n})]):this.order.items.concat([new x.T({...t,quantity:n})]),o.sort((r,l)=>r.name.localeCompare(l.name)),this.order=new R.M({...this.order,items:o}),this.updateMenuQuantities()}updateMenuQuantities(){for(const t in this.menu_items)for(const n of this.menu_items[t])n.quantity=this.order.items.reduce((i,o)=>o.id===n.id?i+o.quantity:i,0)}optionsFor(t){return t.options.map(n=>n.name).join("\n")}saveOrder(){this.event.emit({reason:"done",metadata:{order:this.order}})}confirmOrder(){this.show_order_details=!0}static#e=this.\u0275fac=function(n){return new(n||a)(e.rXU(A.yb),e.rXU(T.Vh))};static#t=this.\u0275cmp=e.VBU({type:a,selectors:[["app-catering-order-modal"]],outputs:{event:"event"},features:[e.Vt3],decls:6,vars:3,consts:[["load_state",""],["order_details",""],["order_actions",""],["class","main min-w-[20rem]",4,"ngIf","ngIfElse"],["class","flex items-center justify-center space-x-2 p-2 border-t border-base-200",4,"ngIf"],[1,"main","min-w-[20rem]"],[4,"ngIf","ngIfElse"],[4,"ngFor","ngForOf"],[3,"label",4,"ngIf"],[3,"label"],[1,"list"],["item","","class","flex items-center p-2 border-b border-base-200",4,"ngFor","ngForOf"],["item","",1,"flex","items-center","p-2","border-b","border-base-200"],[1,"flex-1","w-1/2"],["class","text-xs no-underline",4,"ngIf"],[1,"bg-primary","text-xs","rounded","px-4","py-2","mx-2","text-white","font-medium"],["ngDefaultControl","",3,"ngModel","ngModelChange",4,"ngIf"],["class","flex items-center",4,"ngIf"],[1,"text-xs","no-underline"],["ngDefaultControl","",3,"ngModelChange","ngModel"],[1,"flex","items-center"],[3,"matTooltip"],["icon","","matRipple","",3,"disabled"],[1,"count","h-12","w-12","flex","items-center","justify-center"],["icon","","matRipple","",3,"click"],[1,"flex","items-center","justify-center","space-x-2","p-2","border-t","border-base-200"],["btn","","matRipple","","mat-dialog-close","",1,"inverse"],["confirm","","btn","","matRipple","","matBadgeColor","warn",3,"click","disabled","matBadge","matBadgeHidden"],["matRipple","",1,"inverse",3,"click"],["save","","btn","","matRipple","",3,"click"],[1,"flex","flex-col","w-64","p-8","items-center","space-y-2"],["diameter","32"],[1,"h-[3.25rem]"],["class","text-xs underline",3,"matTooltip",4,"ngIf"],[3,"ngModelChange","ngModel"],[1,"text-xs","underline",3,"matTooltip"]],template:function(n,i){if(1&n&&e.DNE(0,Pn,2,2,"div",3)(1,Yn,4,2,"footer",4)(2,Hn,4,1,"ng-template",null,0,e.C5r)(4,Qn,5,1,"ng-template",null,1,e.C5r),2&n){const o=e.sdS(3);e.Y8G("ngIf",!i.loading)("ngIfElse",o),e.R7$(),e.Y8G("ngIf",!i.loading)}},dependencies:[_.Sq,_.bT,Ae,Gn,T.tx,de.oV,m.me,m.BC,m.vS,y.R,v.r6,G.LG,he.s,_.oe],styles:[".list[_ngcontent-%COMP%]{height:24em;min-width:32em;max-width:calc(100vw - 1em)}footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:12em}input[_ngcontent-%COMP%]{position:relative;width:100%;padding:1em;border:none;border-radius:0!important;border-top:1px solid #ccc;border-bottom:1px solid #ccc;outline:none;font-size:1em}input[_ngcontent-%COMP%]:focus{border:none;border-top:2px solid var(--s);border-bottom:2px solid var(--s);box-shadow:none}input.error[_ngcontent-%COMP%]::placeholder{color:rgba(var(--error),.45)}\n\n/*# sourceMappingURL=catering-order-modal.component.ts-angular-inline--89.css.map*/"]})}return a})();var W=c(3804);function Jn(a,s){if(1&a&&(e.j41(0,"div",18),e.EFF(1),e.nI1(2,"currency"),e.k0s()),2&a){const t=e.XpG().$implicit,n=e.XpG(3);e.R7$(),e.SpI(" +",e.i5U(2,1,t.unit_price/100,n.code)," ")}}function Zn(a,s){if(1&a&&(e.j41(0,"mat-radio-button",14)(1,"div",15)(2,"div",16),e.EFF(3),e.k0s(),e.DNE(4,Jn,3,4,"div",17),e.k0s()()),2&a){const t=s.$implicit;e.Y8G("value",t.id),e.R7$(3),e.SpI(" ",t.name," "),e.R7$(),e.Y8G("ngIf",t.unit_price)}}function qn(a,s){if(1&a){const t=e.RV6();e.qex(0),e.j41(1,"mat-radio-group",10),e.bIt("ngModelChange",function(i){e.eBV(t);const o=e.XpG().$implicit,r=e.XpG();return e.Njj(r.updateGroupOption(o,i))}),e.j41(2,"mat-radio-button",11)(3,"span",12),e.EFF(4,"None"),e.k0s()(),e.DNE(5,Zn,5,3,"mat-radio-button",13),e.k0s(),e.bVm()}if(2&a){const t=e.XpG().$implicit;e.R7$(5),e.Y8G("ngForOf",null==t?null:t.options)}}function Kn(a,s){if(1&a&&(e.j41(0,"div",18),e.EFF(1),e.nI1(2,"currency"),e.k0s()),2&a){const t=e.XpG().$implicit,n=e.XpG(3);e.R7$(),e.SpI(" +",e.i5U(2,1,t.unit_price/100,n.code)," ")}}function ei(a,s){if(1&a){const t=e.RV6();e.j41(0,"mat-checkbox",20),e.mxI("ngModelChange",function(i){const o=e.eBV(t).$implicit,r=e.XpG(3);return e.DH7(r.option_state[o.id],i)||(r.option_state[o.id]=i),e.Njj(i)}),e.j41(1,"div",15)(2,"div",16),e.EFF(3),e.k0s(),e.DNE(4,Kn,3,4,"div",17),e.k0s()()}if(2&a){const t=s.$implicit,n=e.XpG(3);e.R50("ngModel",n.option_state[t.id]),e.R7$(3),e.SpI(" ",t.name," "),e.R7$(),e.Y8G("ngIf",t.unit_price)}}function ti(a,s){if(1&a&&e.DNE(0,ei,5,3,"mat-checkbox",19),2&a){const t=e.XpG().$implicit;e.Y8G("ngForOf",null==t?null:t.options)}}function ni(a,s){if(1&a&&(e.j41(0,"div",6)(1,"div",7),e.EFF(2),e.k0s(),e.j41(3,"div",8),e.DNE(4,qn,6,1,"ng-container",9)(5,ti,1,1,"ng-template",null,0,e.C5r),e.k0s()()),2&a){const t=s.$implicit,n=e.sdS(6);e.BMQ("group",t.name),e.R7$(2),e.JRh(t.name),e.R7$(2),e.Y8G("ngIf",!t.multiple)("ngIfElse",n)}}let ze=(()=>{class a{constructor(t){this._data=t,this.event=new e.bkB,this.option_state={},this.code=this._data.code;const n=(0,we.Am)(this._data.options.map(o=>o.group||"Other")),i=[];for(const o of n){const r=this._data.options.filter(l=>l.group===o);i.push({name:o,multiple:!!r.find(l=>l.multiple),options:r})}this.groups=i}updateGroupOption(t,n){for(const i of t.options)this.option_state[i.id]=i.id===n}saveOptions(){const t=this._data.options.filter(n=>this.option_state[n.id]);this.event.emit({reason:"done",metadata:{options:t}})}static#e=this.\u0275fac=function(n){return new(n||a)(e.rXU(T.Vh))};static#t=this.\u0275cmp=e.VBU({type:a,selectors:[["app-catering-options-modal"]],outputs:{event:"event"},decls:11,vars:1,consts:[["multi_options",""],["icon","","mat-dialog-close",""],[1,"overflow-auto"],["class","pt-1 pb-2 border-b border-base-200",4,"ngFor","ngForOf"],[1,"p-2"],["btn","","matRipple","",1,"w-32",3,"click"],[1,"pt-1","pb-2","border-b","border-base-200"],[1,"font-medium","p-2","capitalize"],[1,"flex","flex-col","pl-6"],[4,"ngIf","ngIfElse"],["aria-label","Select an option","ngModel","",1,"flex","flex-col",3,"ngModelChange"],["value","",1,"my-1","mx-0"],[1,"font-medium","p-2"],["class","my-1 mx-0",3,"value",4,"ngFor","ngForOf"],[1,"my-1","mx-0",3,"value"],[1,"flex","items-center","justify-center"],[1,"font-medium","p-2","flex-1","w-1/2"],["class","opacity-60 text-xs",4,"ngIf"],[1,"opacity-60","text-xs"],[3,"ngModel","ngModelChange",4,"ngFor","ngForOf"],[3,"ngModelChange","ngModel"]],template:function(n,i){1&n&&(e.j41(0,"header")(1,"h3"),e.EFF(2,"Select options"),e.k0s(),e.j41(3,"button",1)(4,"app-icon"),e.EFF(5,"close"),e.k0s()()(),e.j41(6,"main",2),e.DNE(7,ni,7,4,"div",3),e.k0s(),e.j41(8,"footer",4)(9,"button",5),e.bIt("click",function(){return i.saveOptions()}),e.EFF(10," Save "),e.k0s()()),2&n&&(e.R7$(7),e.Y8G("ngForOf",i.groups))},dependencies:[_.Sq,_.bT,T.tx,L.So,W.VT,W._g,m.BC,m.vS,y.R,v.r6,_.oe],styles:["main[_ngcontent-%COMP%]{min-height:24em;width:24rem;max-width:calc(100vw - 2rem)}\n\n/*# sourceMappingURL=catering-order-options-modal.component.ts-angular-inline--90.css.map*/"]})}return a})();function ii(a,s){1&a&&(e.j41(0,"button",4)(1,"app-icon"),e.EFF(2,"close"),e.k0s()())}function ai(a,s){if(1&a){const t=e.RV6();e.j41(0,"main")(1,"div",5)(2,"app-icon",6),e.EFF(3,"upload"),e.k0s(),e.j41(4,"p"),e.EFF(5,"Click to select file or Drag and drop files"),e.k0s(),e.j41(6,"input",7),e.bIt("change",function(i){e.eBV(t);const o=e.XpG();return e.Njj(o.handleFileEvent(i))}),e.k0s()(),e.j41(7,"div",8)(8,"button",9),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.downloadTemplate())}),e.EFF(9," Download Template "),e.k0s()()()}}function oi(a,s){if(1&a&&(e.j41(0,"main",10),e.nrm(1,"mat-spinner",11),e.j41(2,"p"),e.EFF(3),e.k0s()()),2&a){const t=e.XpG();e.R7$(3),e.JRh(t.loading)}}let We=(()=>{class a{constructor(){this.event=new e.bkB}handleFileEvent(t){this.loading="Processing menu data...";const n=t.target;if(!n?.files)return this.loading="";const i=n.files;if(!i.length)return this.loading="";const o=i[0],r=new FileReader;r.addEventListener("loadend",l=>{const u=(0,p.a6)(l.target.result);this.loading="",this.event.emit({reason:"done",metadata:u.filter(g=>"item"===(g.type||"").toLowerCase()).map(g=>new x.T({...g,options:u.filter(f=>"option"===(f.type||"").toLowerCase()&&f.tags===g.id).map(f=>({id:f.id,name:f.name,group:f.category,multiple:f.multiple,unit_price:f.unit_price}))}))})}),r.readAsText(o)}downloadTemplate(){(0,p.PE)("import-menu-template.csv","ID,Type,Name,Unit Price,Category,Description,Tags,Multiple\nitem-1,item,Coffee,200,Drink,Wake Up,,\noption-1,option,1 Sugar,20,Sugars,,item-1,false")}static#e=this.\u0275fac=function(n){return new(n||a)};static#t=this.\u0275cmp=e.VBU({type:a,selectors:[["catering-import-menu-modal"]],outputs:{event:"event"},decls:7,vars:3,consts:[["load_state",""],[1,"h-12","bg-primary","flex","items-center","justify-between","px-4"],["icon","","mat-dialog-close","",4,"ngIf"],[4,"ngIf","ngIfElse"],["icon","","mat-dialog-close",""],[1,"relative","flex","flex-col","items-center","justify-center","space-y-2","h-[24rem]","w-[24rem]","border-4","border-base-200","border-dashed","rounded-xl","hover:bg-base-200","m-4","p-4","cursor-pointer"],[1,"text-4xl"],["type","file",1,"absolute","inset-0","opacity-0",3,"change"],[1,"flex","items-center","justify-center","px-4","pb-4"],["matRipple","",1,"clear","underline","w-48",3,"click"],[1,"flex","flex-col","items-center","justify-center","space-y-2","p-8","h-[24rem]","w-[24rem]"],["diameter","32"]],template:function(n,i){if(1&n&&(e.j41(0,"header",1)(1,"h2"),e.EFF(2,"Import Catering Menu"),e.k0s(),e.DNE(3,ii,3,0,"button",2),e.k0s(),e.DNE(4,ai,10,0,"main",3)(5,oi,4,1,"ng-template",null,0,e.C5r)),2&n){const o=e.sdS(6);e.R7$(3),e.Y8G("ngIf",!i.loading),e.R7$(),e.Y8G("ngIf",!i.loading)("ngIfElse",o)}},dependencies:[_.bT,T.tx,y.R,v.r6,G.LG]})}return a})(),ke=(()=>{class a extends p.Tv{get is_editable(){return!this.zone||this.zone===this._org.building?.id}get categories(){const t=this._menu.getValue();return(0,p.Am)(t.map(n=>n.category))}constructor(t,n,i){var o;super(),o=this,this._org=t,this._dialog=n,this._settings=i,this._updated=new j.t(0),this._menu=new j.t([]),this._loading=new j.t(!1),this._currency=new j.t("USD"),this._change=new j.t(0),this.menu=this._menu.asObservable(),this.loading=this._loading.asObservable(),this.currency=this._currency.asObservable(),this.settings=(0,Y.zV)([this._org.active_building,this._change]).pipe((0,q.p)(([r])=>!!r),(0,z.n)(([r])=>(0,S.bpY)(r.id,"catering-settings").pipe((0,K.W)(l=>(0,H.of)({})))),(0,M.T)(r=>r.details||{}),(0,re.M)(r=>this._settings.post("require_catering_notes",!!r?.require_notes)),(0,ee.t)(1)),this.charge_codes=this.settings.pipe((0,M.T)(r=>r.charge_codes||[])),this.availability=this.settings.pipe((0,M.T)(r=>r.disabled_rooms||[])),this.zone="",this.subscription("building",this._org.active_building.subscribe(function(){var r=(0,h.A)(function*(l){if(l){const d=(yield o.getCateringForZone(l.id)).map(u=>new x.T(u));o._currency.next(o._settings.get("app.currency")||l.currency||"USD"),o._menu.next(d)}});return function(l){return r.apply(this,arguments)}}()))}manageCateringOrder(t){var n=this;return(0,h.A)(function*(){const i=n._dialog.open(He,{data:{code:n._currency.getValue(),order:t,menu:n.menu,loading:n.loading,getCateringConfig:r=>n.getCateringConfig(r),selectOptions:r=>n.selectOptions(r)}}),o=yield Promise.race([i.componentInstance.event.pipe((0,O.$)(r=>"done"===r.reason)).toPromise(),i.afterClosed().toPromise()]);return i.close(),o?.metadata?.order||t})()}addItem(t=new x.T){var n=this;return(0,h.A)(function*(){const i=n._dialog.open(Fe,{data:{item:t,categories:n.categories}}),o=yield Promise.race([i.componentInstance.event.pipe((0,O.$)(d=>"done"===d.reason)).toPromise(),i.afterClosed().toPromise()]);if("done"!==o?.reason)return;const r=n._menu.getValue(),l=r.findIndex(d=>d.id===t.id);l>=0?r.splice(l,1,o.metadata.item):r.push(o.metadata.item),n.updateMenu(n._org.building.id,r).then(()=>{n._menu.next([...r]),i.close()},()=>i.componentInstance.loading=!1)})()}updateItem(t){const n=this._menu.getValue(),i=n.findIndex(o=>o.id===t.id);i>=0?n.splice(i,1,t):n.push(t),this.updateMenu(this._org.building.id,n).then(()=>this._menu.next([...n]))}addOption(t,n={}){var i=this;return(0,h.A)(function*(){const o=(0,p.Am)(t.options.map(g=>g.group)),r=i._dialog.open(Ee,{data:{parent:t,option:n,types:o}}),l=yield Promise.race([r.componentInstance.event.pipe((0,O.$)(g=>"done"===g.reason)).toPromise(),r.afterClosed().toPromise()]);if("done"!==l?.reason)return;const d=i._menu.getValue(),u=d.findIndex(g=>g.id===t.id);u>=0?d.splice(u,1,l.metadata.item):d.push(l.metadata.item),i.updateMenu(i._org.building.id,d).then(()=>{i._menu.next([...d]),r.close()},()=>r.componentInstance.loading=!1)})()}selectOptions(t){var n=this;return(0,h.A)(function*(){const i=n._dialog.open(ze,{data:{code:n._currency.getValue(),options:t}}),o=yield Promise.race([i.componentInstance.event.pipe((0,O.$)(r=>"done"===r.reason)).toPromise(),i.afterClosed().toPromise()]);return"done"!==o?.reason?[]:(i.close(),o.metadata.options)})()}deleteItem(t){var n=this;return(0,h.A)(function*(){const i=yield(0,p.GE)({title:"Delete Catering Item",content:`Are you sure you wish to remove the catering item ${t.name} from the menu?`,icon:{type:"icon",class:"material-icons",content:"delete"}},n._dialog);if("done"!==i.reason)return;i.loading("Removing catering item...");const o=n._menu.getValue().filter(r=>t.id!==r.id);n.updateMenu(n._org.building.id,o).then(()=>{n._menu.next([...o]),i.close()},()=>i.loading(""))})()}deleteOption(t,n){var i=this;return(0,h.A)(function*(){const o=yield(0,p.GE)({title:"Delete Catering Item Option",content:`Are you sure you wish to remove the catering option "${n.name}" from "${t.name}"?`,icon:{type:"icon",class:"material-icons",content:"delete"}},i._dialog);if("done"!==o.reason)return;o.loading("Removing catering item option...");const r=i._menu.getValue();r.splice(r.findIndex(l=>l.id===t.id),1,new x.T({...t,options:t.options.filter(l=>l.id!==n.id)})),i.updateMenu(i._org.building.id,r).then(()=>{i._menu.next([...r]),o.close()},()=>o.loading(""))})()}editConfig(){var t=this;return(0,h.A)(function*(){const n=yield t.getCateringConfig(t._org.building.id),{require_notes:i}=yield t.settings.pipe((0,B.s)(1)).toPromise(),o=t._menu.getValue(),r=(0,p.Am)((0,p.Bq)(o.map(u=>[u.category,...u.tags]))),l=t._dialog.open(Ut.Rt,{data:{config:n,types:r,require_notes:i,saveNotes:u=>t.saveSettings({require_notes:u})}}),d=yield Promise.race([l.componentInstance.event.pipe((0,O.$)(u=>"done"===u.reason)).toPromise(),l.afterClosed().toPromise()]);"done"===d?.reason&&t.updateConfig(t._org.building.id,d.metadata).then(()=>l.close(),()=>l.componentInstance.loading=!1)})()}importMenu(){var t=this;return(0,h.A)(function*(){const n=t._dialog.open(We),i=yield Promise.race([n.componentInstance.event.pipe((0,O.$)(d=>"done"===d.reason)).toPromise(),n.afterClosed().toPromise()]);if("done"!==i?.reason)return;n.componentInstance.loading="Updating menu...";const o=t._menu.getValue(),r=t._org.building,l=(0,p.Am)(i.metadata.concat(o),"id");yield t.updateMenu(r.id,l).catch(d=>{throw(0,p.UG)("Error importing catering menu"),n.close(),d}),(0,p.VX)(`Successfully imported catering menu. ${i.metadata.length} item(s) added.`),n.close()})()}updateMenu(t,n){return(0,S.D58)(t,{id:t,name:"catering",details:n,description:`Catering menu for ${t}`}).toPromise()}saveSettings(t){var n=this;return(0,h.A)(function*(){const i=yield n.settings.pipe((0,B.s)(1)).toPromise(),o=yield(0,S.D58)(n._org.building.id,{id:n._org.building.id,name:"catering-settings",details:{...i,...t},description:`Catering settings for ${n._org.building.id}`}).toPromise();return n._change.next(Date.now()),o})()}getCateringForZone(t){return(0,h.A)(function*(){const n=(yield(0,S.bpY)(t,"catering").toPromise()).details;return n instanceof Array?n:[]})()}getCateringConfig(t=this._org.building.id){return(0,h.A)(function*(){const n=(yield(0,S.bpY)(t,"catering_config").toPromise()).details;return n instanceof Array?n:[]})()}updateConfig(t,n){return(0,S.D58)(t,{id:t,name:"catering_config",details:n,description:`Catering menu config for ${t}`}).toPromise()}addItemToOrder(t,n){let i=t.items;const o=i.find(l=>l.id===n.id&&n.options?.length===l.options?.reduce((d,u)=>d+(n.options.find(g=>u.id===g.id)?1:0),0));return o?o.quantity+=1:i=i.concat([new x.T({...n,quantity:1})]),new R.M({...t,items:i,event:null})}static#e=this.\u0275fac=function(n){return new(n||a)(e.KVO(A.yb),e.KVO(T.bZ),e.KVO(p.h$))};static#t=this.\u0275prov=e.jDH({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})();c(9908),c(3240),c(6441),c(4268),c(1416),c(6727),c(1034),c(8328),c(2238),c(6354),c(3208),c(5277),c(8797),c(9675),c(1874);var rt=c(5175);c(3476);const qa=()=>["/welcome"];function Ka(a,s){if(1&a&&(e.j41(0,"mat-option",8),e.EFF(1),e.k0s()),2&a){const t=s.$implicit;e.Y8G("value",t),e.R7$(),e.SpI(" ",t.name," ")}}let eo=(()=>{class a{constructor(t,n,i){this._router=t,this._checkin=n,this._catering=i,this.menu=this._catering.menu.pipe((0,M.T)(o=>o.filter(r=>r.tags.find(l=>"drink"===l.toLowerCase()||"drinks"===l.toLowerCase()||"beverage"===l.toLowerCase()))))}update(){var t=this;return(0,h.A)(function*(){return t.beverage?(yield t._checkin.event.pipe((0,O.$)(i=>!!i)).toPromise())?((0,p.VX)("Successfully update event."),void t.next()):(0,p.UG)("Unable to load event data."):t.next()})()}next(){this._router.navigate(["/welcome"])}static#e=this.\u0275fac=function(n){return new(n||a)(e.rXU(I.Ix),e.rXU(D.G),e.rXU(ke))};static#t=this.\u0275cmp=e.VBU({type:a,selectors:[["checkin-preferences"]],decls:13,vars:7,consts:[[1,"bg-base-100","rounded","shadow","overflow-hidden","relative","flex","flex-col","items-center","w-[36rem]","p-4"],[1,"text-xl","mb-2","w-full"],[1,"w-full"],["appearance","outline",1,"w-full"],["placeholder","Select beverage",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["btn","","matRipple","",1,"w-32",3,"click"],["icon","","matRipple","",1,"absolute","top-0","right-0",3,"routerLink"],[3,"value"]],template:function(n,i){1&n&&(e.j41(0,"div",0)(1,"h3",1),e.EFF(2,"Would you like a drink?"),e.k0s(),e.j41(3,"div",2)(4,"mat-form-field",3)(5,"mat-select",4),e.mxI("ngModelChange",function(r){return e.DH7(i.beverage,r)||(i.beverage=r),r}),e.DNE(6,Ka,2,2,"mat-option",5),e.nI1(7,"async"),e.k0s()()(),e.j41(8,"button",6),e.bIt("click",function(){return i.update()}),e.EFF(9),e.k0s(),e.j41(10,"a",7)(11,"app-icon"),e.EFF(12,"close"),e.k0s()()()),2&n&&(e.R7$(5),e.R50("ngModel",i.beverage),e.R7$(),e.Y8G("ngForOf",e.bMT(7,4,i.menu)),e.R7$(3),e.SpI(" ",i.beverage?"Update":"Continue"," "),e.R7$(),e.Y8G("routerLink",e.lJ4(6,qa)))},dependencies:[_.Sq,m.BC,m.vS,y.R,v.wT,E.rl,rt.VO,v.r6,I.Wk,_.Jj],styles:["[_nghost-%COMP%] > div[_ngcontent-%COMP%]{max-width:calc(100vw - 2rem)}\n\n/*# sourceMappingURL=checkin-preferences.component.ts-angular-inline--96.css.map*/"]})}return a})();const ct=(()=>{class a{constructor(t,n,i,o,r){this._legacyCanvasSize=a.DEFAULT_CANVAS_SIZE,this._preferredCamera="environment",this._maxScansPerSecond=25,this._lastScanTimestamp=-1,this._destroyed=this._flashOn=this._paused=this._active=!1,this.$video=t,this.$canvas=document.createElement("canvas"),i&&"object"==typeof i?this._onDecode=n:(console.warn(i||o||r?"You're using a deprecated version of the QrScanner constructor which will be removed in the future":"Note that the type of the scan result passed to onDecode will change in the future. To already switch to the new api today, you can pass returnDetailedScanResult: true."),this._legacyOnDecode=n),this._onDecodeError=(n="object"==typeof i?i:{}).onDecodeError||("function"==typeof i?i:this._onDecodeError),this._calculateScanRegion=n.calculateScanRegion||("function"==typeof o?o:this._calculateScanRegion),this._preferredCamera=n.preferredCamera||r||this._preferredCamera,this._legacyCanvasSize="number"==typeof i?i:"number"==typeof o?o:this._legacyCanvasSize,this._maxScansPerSecond=n.maxScansPerSecond||this._maxScansPerSecond,this._onPlay=this._onPlay.bind(this),this._onLoadedMetaData=this._onLoadedMetaData.bind(this),this._onVisibilityChange=this._onVisibilityChange.bind(this),this._updateOverlay=this._updateOverlay.bind(this),t.disablePictureInPicture=!0,t.playsInline=!0,t.muted=!0;let l=!1;if(t.hidden&&(t.hidden=!1,l=!0),document.body.contains(t)||(document.body.appendChild(t),l=!0),i=t.parentElement,n.highlightScanRegion||n.highlightCodeOutline){if(o=!!n.overlay,this.$overlay=n.overlay||document.createElement("div"),(r=this.$overlay.style).position="absolute",r.display="none",r.pointerEvents="none",this.$overlay.classList.add("scan-region-highlight"),!o&&n.highlightScanRegion){this.$overlay.innerHTML='<svg class="scan-region-highlight-svg" viewBox="0 0 238 238" preserveAspectRatio="none" style="position:absolute;width:100%;height:100%;left:0;top:0;fill:none;stroke:#e9b213;stroke-width:4;stroke-linecap:round;stroke-linejoin:round"><path d="M31 2H10a8 8 0 0 0-8 8v21M207 2h21a8 8 0 0 1 8 8v21m0 176v21a8 8 0 0 1-8 8h-21m-176 0H10a8 8 0 0 1-8-8v-21"/></svg>';try{this.$overlay.firstElementChild.animate({transform:["scale(.98)","scale(1.01)"]},{duration:400,iterations:1/0,direction:"alternate",easing:"ease-in-out"})}catch{}i.insertBefore(this.$overlay,this.$video.nextSibling)}n.highlightCodeOutline&&(this.$overlay.insertAdjacentHTML("beforeend",'<svg class="code-outline-highlight" preserveAspectRatio="none" style="display:none;width:100%;height:100%;fill:none;stroke:#e9b213;stroke-width:5;stroke-dasharray:25;stroke-linecap:round;stroke-linejoin:round"><polygon/></svg>'),this.$codeOutlineHighlight=this.$overlay.lastElementChild)}this._scanRegion=this._calculateScanRegion(t),requestAnimationFrame(()=>{let d=window.getComputedStyle(t);"none"===d.display&&(t.style.setProperty("display","block","important"),l=!0),"visible"!==d.visibility&&(t.style.setProperty("visibility","visible","important"),l=!0),l&&(console.warn("QrScanner has overwritten the video hiding style to avoid Safari stopping the playback."),t.style.opacity="0",t.style.width="0",t.style.height="0",this.$overlay&&this.$overlay.parentElement&&this.$overlay.parentElement.removeChild(this.$overlay),delete this.$overlay,delete this.$codeOutlineHighlight),this.$overlay&&this._updateOverlay()}),t.addEventListener("play",this._onPlay),t.addEventListener("loadedmetadata",this._onLoadedMetaData),document.addEventListener("visibilitychange",this._onVisibilityChange),window.addEventListener("resize",this._updateOverlay),this._qrEnginePromise=a.createQrEngine()}static set WORKER_PATH(t){console.warn("Setting QrScanner.WORKER_PATH is not required and not supported anymore. Have a look at the README for new setup instructions.")}static hasCamera(){return(0,h.A)(function*(){try{return!!(yield a.listCameras(!1)).length}catch{return!1}})()}static listCameras(t=!1){return(0,h.A)(function*(){if(!navigator.mediaDevices)return[];let i,n=function(){var o=(0,h.A)(function*(){return(yield navigator.mediaDevices.enumerateDevices()).filter(r=>"videoinput"===r.kind)});return function(){return o.apply(this,arguments)}}();try{t&&(yield n()).every(o=>!o.label)&&(i=yield navigator.mediaDevices.getUserMedia({audio:!1,video:!0}))}catch{}try{return(yield n()).map((o,r)=>({id:o.deviceId,label:o.label||(0===r?"Default Camera":`Camera ${r+1}`)}))}finally{i&&(console.warn("Call listCameras after successfully starting a QR scanner to avoid creating a temporary video stream"),a._stopVideoStream(i))}})()}hasFlash(){var t=this;return(0,h.A)(function*(){let n;try{if(t.$video.srcObject){if(!(t.$video.srcObject instanceof MediaStream))return!1;n=t.$video.srcObject}else n=(yield t._getCameraStream()).stream;return"torch"in n.getVideoTracks()[0].getSettings()}catch{return!1}finally{n&&n!==t.$video.srcObject&&(console.warn("Call hasFlash after successfully starting the scanner to avoid creating a temporary video stream"),a._stopVideoStream(n))}})()}isFlashOn(){return this._flashOn}toggleFlash(){var t=this;return(0,h.A)(function*(){t._flashOn?yield t.turnFlashOff():yield t.turnFlashOn()})()}turnFlashOn(){var t=this;return(0,h.A)(function*(){if(!t._flashOn&&!t._destroyed&&(t._flashOn=!0,t._active&&!t._paused))try{if(!(yield t.hasFlash()))throw"No flash available";yield t.$video.srcObject.getVideoTracks()[0].applyConstraints({advanced:[{torch:!0}]})}catch(n){throw t._flashOn=!1,n}})()}turnFlashOff(){var t=this;return(0,h.A)(function*(){t._flashOn&&(t._flashOn=!1,yield t._restartVideoStream())})()}destroy(){this.$video.removeEventListener("loadedmetadata",this._onLoadedMetaData),this.$video.removeEventListener("play",this._onPlay),document.removeEventListener("visibilitychange",this._onVisibilityChange),window.removeEventListener("resize",this._updateOverlay),this._destroyed=!0,this._flashOn=!1,this.stop(),a._postWorkerMessage(this._qrEnginePromise,"close")}start(){var t=this;return(0,h.A)(function*(){if(t._destroyed)throw Error("The QR scanner can not be started as it had been destroyed.");if((!t._active||t._paused)&&("https:"!==window.location.protocol&&console.warn("The camera stream is only accessible if the page is transferred via https."),t._active=!0,!document.hidden))if(t._paused=!1,t.$video.srcObject)yield t.$video.play();else try{let{stream:n,facingMode:i}=yield t._getCameraStream();!t._active||t._paused?a._stopVideoStream(n):(t._setVideoMirror(i),t.$video.srcObject=n,yield t.$video.play(),t._flashOn&&(t._flashOn=!1,t.turnFlashOn().catch(()=>{})))}catch(n){if(!t._paused)throw t._active=!1,n}})()}stop(){this.pause(),this._active=!1}pause(t=!1){var n=this;return(0,h.A)(function*(){if(n._paused=!0,!n._active)return!0;n.$video.pause(),n.$overlay&&(n.$overlay.style.display="none");let i=()=>{n.$video.srcObject instanceof MediaStream&&(a._stopVideoStream(n.$video.srcObject),n.$video.srcObject=null)};return t?(i(),!0):(yield new Promise(o=>setTimeout(o,300)),!!n._paused&&(i(),!0))})()}setCamera(t){var n=this;return(0,h.A)(function*(){t!==n._preferredCamera&&(n._preferredCamera=t,yield n._restartVideoStream())})()}static scanImage(t,n,i,o,r=!1,l=!1){return(0,h.A)(function*(){let d,u=!1;n&&("scanRegion"in n||"qrEngine"in n||"canvas"in n||"disallowCanvasResizing"in n||"alsoTryWithoutScanRegion"in n||"returnDetailedScanResult"in n)?(d=n.scanRegion,i=n.qrEngine,o=n.canvas,r=n.disallowCanvasResizing||!1,l=n.alsoTryWithoutScanRegion||!1,u=!0):console.warn(n||i||o||r||l?"You're using a deprecated api for scanImage which will be removed in the future.":"Note that the return type of scanImage will change in the future. To already switch to the new api today, you can pass returnDetailedScanResult: true."),n=!!i;try{let g,f,k;if([i,g]=yield Promise.all([i||a.createQrEngine(),a._loadImage(t)]),[o,f]=a._drawToCanvas(g,d,o,r),i instanceof Worker){let b=i;n||a._postWorkerMessageSync(b,"inversionMode","both"),k=yield new Promise((C,w)=>{let P,J,N,ue=-1;J=$=>{$.data.id===ue&&(b.removeEventListener("message",J),b.removeEventListener("error",N),clearTimeout(P),null!==$.data.data?C({data:$.data.data,cornerPoints:a._convertPoints($.data.cornerPoints,d)}):w(a.NO_QR_CODE_FOUND))},N=$=>{b.removeEventListener("message",J),b.removeEventListener("error",N),clearTimeout(P),w("Scanner error: "+($?$.message||$:"Unknown Error"))},b.addEventListener("message",J),b.addEventListener("error",N),P=setTimeout(()=>N("timeout"),1e4);let ie=f.getImageData(0,0,o.width,o.height);ue=a._postWorkerMessageSync(b,"decode",ie,[ie.data.buffer])})}else k=yield Promise.race([new Promise((b,C)=>window.setTimeout(()=>C("Scanner error: timeout"),1e4)),(0,h.A)(function*(){try{var[b]=yield i.detect(o);if(!b)throw a.NO_QR_CODE_FOUND;return{data:b.rawValue,cornerPoints:a._convertPoints(b.cornerPoints,d)}}catch(C){if(/not implemented|service unavailable/.test(b=C.message||C))return a._disableBarcodeDetector=!0,a.scanImage(t,{scanRegion:d,canvas:o,disallowCanvasResizing:r,alsoTryWithoutScanRegion:l});throw`Scanner error: ${b}`}})()]);return u?k:k.data}catch(g){if(!d||!l)throw g;let f=yield a.scanImage(t,{qrEngine:i,canvas:o,disallowCanvasResizing:r});return u?f:f.data}finally{n||a._postWorkerMessage(i,"close")}})()}setGrayscaleWeights(t,n,i,o=!0){a._postWorkerMessage(this._qrEnginePromise,"grayscaleWeights",{red:t,green:n,blue:i,useIntegerApproximation:o})}setInversionMode(t){a._postWorkerMessage(this._qrEnginePromise,"inversionMode",t)}static createQrEngine(t){return(0,h.A)(function*(){if(t&&console.warn("Specifying a worker path is not required and not supported anymore."),t=()=>c.e("node_modules_qr-scanner_qr-scanner-worker_min_js").then(c.bind(c,5614)).then(i=>i.createWorker()),a._disableBarcodeDetector||!("BarcodeDetector"in window)||!BarcodeDetector.getSupportedFormats||!(yield BarcodeDetector.getSupportedFormats()).includes("qr_code"))return t();let n=navigator.userAgentData;return n&&n.brands.some(({brand:i})=>/Chromium/i.test(i))&&/mac ?OS/i.test(n.platform)&&(yield n.getHighEntropyValues(["architecture","platformVersion"]).then(({architecture:i,platformVersion:o})=>/arm/i.test(i||"arm")&&13<=parseInt(o||"13")).catch(()=>!0))?t():new BarcodeDetector({formats:["qr_code"]})})()}_onPlay(){this._scanRegion=this._calculateScanRegion(this.$video),this._updateOverlay(),this.$overlay&&(this.$overlay.style.display=""),this._scanFrame()}_onLoadedMetaData(){this._scanRegion=this._calculateScanRegion(this.$video),this._updateOverlay()}_onVisibilityChange(){document.hidden?this.pause():this._active&&this.start()}_calculateScanRegion(t){let n=Math.round(.6666666666666666*Math.min(t.videoWidth,t.videoHeight));return{x:Math.round((t.videoWidth-n)/2),y:Math.round((t.videoHeight-n)/2),width:n,height:n,downScaledWidth:this._legacyCanvasSize,downScaledHeight:this._legacyCanvasSize}}_updateOverlay(){requestAnimationFrame(()=>{if(this.$overlay){var t=this.$video,n=t.videoWidth,i=t.videoHeight,o=t.offsetWidth,r=t.offsetHeight,l=t.offsetLeft,d=t.offsetTop,u=window.getComputedStyle(t),g=u.objectFit,f=n/i,k=o/r;switch(g){case"none":var b=n,C=i;break;case"fill":b=o,C=r;break;default:("cover"===g?f>k:f<k)?b=(C=r)*f:C=(b=o)/f,"scale-down"===g&&(b=Math.min(b,n),C=Math.min(C,i))}var[w,P]=u.objectPosition.split(" ").map((N,ue)=>{const ie=parseFloat(N);return N.endsWith("%")?(ue?r-C:o-b)*ie/100:ie});k=this._scanRegion.height||i,g=this._scanRegion.x||0;var J=this._scanRegion.y||0;(f=this.$overlay.style).width=(u=this._scanRegion.width||n)/n*b+"px",f.height=k/i*C+"px",f.top=`${d+P+J/i*C}px`,i=/scaleX\(-1\)/.test(t.style.transform),f.left=`${l+(i?o-w-b:w)+(i?n-g-u:g)/n*b}px`,f.transform=t.style.transform}})}static _convertPoints(t,n){if(!n)return t;let i=n.x||0,o=n.y||0,r=n.width&&n.downScaledWidth?n.width/n.downScaledWidth:1;n=n.height&&n.downScaledHeight?n.height/n.downScaledHeight:1;for(let l of t)l.x=l.x*r+i,l.y=l.y*n+o;return t}_scanFrame(){var t=this;!this._active||this.$video.paused||this.$video.ended||("requestVideoFrameCallback"in this.$video?this.$video.requestVideoFrameCallback.bind(this.$video):requestAnimationFrame)((0,h.A)(function*(){if(!(1>=t.$video.readyState)){var n=Date.now()-t._lastScanTimestamp,i=1e3/t._maxScansPerSecond;n<i&&(yield new Promise(r=>setTimeout(r,i-n))),t._lastScanTimestamp=Date.now();try{var o=yield a.scanImage(t.$video,{scanRegion:t._scanRegion,qrEngine:t._qrEnginePromise,canvas:t.$canvas})}catch(r){if(!t._active)return;t._onDecodeError(r)}!a._disableBarcodeDetector||(yield t._qrEnginePromise)instanceof Worker||(t._qrEnginePromise=a.createQrEngine()),o?(t._onDecode?t._onDecode(o):t._legacyOnDecode&&t._legacyOnDecode(o.data),t.$codeOutlineHighlight&&(clearTimeout(t._codeOutlineHighlightRemovalTimeout),t._codeOutlineHighlightRemovalTimeout=void 0,t.$codeOutlineHighlight.setAttribute("viewBox",`${t._scanRegion.x||0} ${t._scanRegion.y||0} ${t._scanRegion.width||t.$video.videoWidth} ${t._scanRegion.height||t.$video.videoHeight}`),t.$codeOutlineHighlight.firstElementChild.setAttribute("points",o.cornerPoints.map(({x:r,y:l})=>`${r},${l}`).join(" ")),t.$codeOutlineHighlight.style.display="")):t.$codeOutlineHighlight&&!t._codeOutlineHighlightRemovalTimeout&&(t._codeOutlineHighlightRemovalTimeout=setTimeout(()=>t.$codeOutlineHighlight.style.display="none",100))}t._scanFrame()}))}_onDecodeError(t){t!==a.NO_QR_CODE_FOUND&&console.log(t)}_getCameraStream(){var t=this;return(0,h.A)(function*(){if(!navigator.mediaDevices)throw"Camera not found.";let n=/^(environment|user)$/.test(t._preferredCamera)?"facingMode":"deviceId",i=[{width:{min:1024}},{width:{min:768}},{}],o=i.map(r=>Object.assign({},r,{[n]:{exact:t._preferredCamera}}));for(let r of[...o,...i])try{let l=yield navigator.mediaDevices.getUserMedia({video:r,audio:!1});return{stream:l,facingMode:t._getFacingMode(l)||(r.facingMode?t._preferredCamera:"environment"===t._preferredCamera?"user":"environment")}}catch{}throw"Camera not found."})()}_restartVideoStream(){var t=this;return(0,h.A)(function*(){let n=t._paused;(yield t.pause(!0))&&!n&&t._active&&(yield t.start())})()}static _stopVideoStream(t){for(let n of t.getTracks())n.stop(),t.removeTrack(n)}_setVideoMirror(t){this.$video.style.transform="scaleX("+("user"===t?-1:1)+")"}_getFacingMode(t){return(t=t.getVideoTracks()[0])?/rear|back|environment/i.test(t.label)?"environment":/front|user|face/i.test(t.label)?"user":null:null}static _drawToCanvas(t,n,i,o=!1){i=i||document.createElement("canvas");let r=n&&n.x?n.x:0,l=n&&n.y?n.y:0,d=n&&n.width?n.width:t.videoWidth||t.width,u=n&&n.height?n.height:t.videoHeight||t.height;return o||(o=n&&n.downScaledWidth?n.downScaledWidth:d,n=n&&n.downScaledHeight?n.downScaledHeight:u,i.width!==o&&(i.width=o),i.height!==n&&(i.height=n)),(n=i.getContext("2d",{alpha:!1})).imageSmoothingEnabled=!1,n.drawImage(t,r,l,d,u,0,0,i.width,i.height),[i,n]}static _loadImage(t){return(0,h.A)(function*(){if(t instanceof Image)return yield a._awaitImageLoad(t),t;if(t instanceof HTMLVideoElement||t instanceof HTMLCanvasElement||t instanceof SVGImageElement||"OffscreenCanvas"in window&&t instanceof OffscreenCanvas||"ImageBitmap"in window&&t instanceof ImageBitmap)return t;if(!(t instanceof File||t instanceof Blob||t instanceof URL||"string"==typeof t))throw"Unsupported image type.";{let n=new Image;n.src=t instanceof File||t instanceof Blob?URL.createObjectURL(t):t.toString();try{return yield a._awaitImageLoad(n),n}finally{(t instanceof File||t instanceof Blob)&&URL.revokeObjectURL(n.src)}}})()}static _awaitImageLoad(t){return(0,h.A)(function*(){t.complete&&0!==t.naturalWidth||(yield new Promise((n,i)=>{let o=r=>{t.removeEventListener("load",o),t.removeEventListener("error",o),r instanceof ErrorEvent?i("Image load error"):n()};t.addEventListener("load",o),t.addEventListener("error",o)}))})()}static _postWorkerMessage(t,n,i,o){return(0,h.A)(function*(){return a._postWorkerMessageSync(yield t,n,i,o)})()}static _postWorkerMessageSync(t,n,i,o){if(!(t instanceof Worker))return-1;let r=a._workerMessageId++;return t.postMessage({id:r,type:n,data:i},o),r}}return a.DEFAULT_CANVAS_SIZE=400,a.NO_QR_CODE_FOUND="No QR code found",a._disableBarcodeDetector=!1,a._workerMessageId=0,a})(),to=["video"],no=["checkin-qr-scan",""],io=()=>["/welcome"];let ao=(()=>{class a extends p.Tv{get is_induction_enabled(){return this._settings.get("app.induction_enabled")&&this._settings.get("app.induction_details")}get induction_after_details(){return this._settings.get("app.induction_after_details")}constructor(t,n,i){super(),this._checkin=t,this._router=n,this._settings=i,this.checking_code=!1}ngAfterViewInit(){this.setupQRReader()}ngOnDestroy(){this._video_el.nativeElement.srcObject&&this._video_el.nativeElement.srcObject.getTracks().forEach(t=>t?.stop()),this._reader?.stop()}checkQRCode(t){var n=this;return(0,h.A)(function*(){n.checking_code||n.timeout("check_qr_code",(0,h.A)(function*(){n._reader?.stop(),n.checking_code=!0;const i=t.split(",");let[o,r,l,d]=i;const[u,g]=o.split(":");if(!g&&!l)return(0,p.UG)("Invalid QRCode"),n.setupQRReader(),void(n.checking_code=!1);/^\d+$/.test(l)||(l=void 0),yield n._checkin.loadGuestAndEvent(g,l).catch(k=>{throw n.handleError(k.message||k),n.checking_code=!1,k});const f=yield n._checkin.event.pipe((0,B.s)(1)).toPromise();if(f.rejected)return n.handleError("Your meeting has been rejected."),void(n.checking_code=!1);n._router.navigate(n.is_induction_enabled&&"accepted"!==f?.induction?["/checkin","induction"]:["/checkin","details"]),n.checking_code=!1}))})()}checkEmail(t){var n=this;return(0,h.A)(function*(){!t||!t.includes("@")||t.length<5||(yield n._checkin.loadGuestAndEvent(t).catch(o=>{throw n.handleError("Unable to find visitor or a meeting associated with the given email address."),o}),"accepted"!==(yield n._checkin.event.pipe((0,B.s)(1)).toPromise()).induction&&n.is_induction_enabled&&!n.induction_after_details?n._router.navigate(["/checkin","induction"]):n._router.navigate(["/checkin","details"]))})()}setupQRReader(){this.timeout("setup_qr_reader",()=>{if(!this._video_el?.nativeElement)return this.setupQRReader();navigator.mediaDevices?.getUserMedia&&!this._video_el.nativeElement.srcObject&&navigator.mediaDevices.getUserMedia({video:!0}).then(t=>this._video_el.nativeElement.srcObject=t).catch(t=>console.error("Unable to fetch media devices!",t)),ct&&(this._reader=new ct(this._video_el.nativeElement,t=>this.checkQRCode(t.data),{}),this._reader.start())})}handleError(t){this._checkin.setError(t?.statusText||t),this._router.navigate(["/checkin","error"])}static#e=this.\u0275fac=function(n){return new(n||a)(e.rXU(D.G),e.rXU(I.Ix),e.rXU(p.h$))};static#t=this.\u0275cmp=e.VBU({type:a,selectors:[["","checkin-qr-scan",""]],viewQuery:function(n,i){if(1&n&&e.GBs(to,7),2&n){let o;e.mGM(o=e.lsd())&&(i._video_el=o.first)}},features:[e.Vt3],attrs:no,decls:25,vars:7,consts:[["video",""],[1,"bg-base-100","rounded","shadow","overflow-hidden","relative","flex","flex-col","items-center","w-[36rem]","p-4"],[1,"my-4"],[1,"flex","items-center","space-x-2","w-full"],["appearance","outline",1,"w-px","flex-1","no-subscript"],["matInput","","placeholder","Enter email...","type","email","autocomplete","off",3,"ngModelChange","blur","keyup.enter","ngModel"],["btn","","matRipple","",3,"click"],[1,"relative","rounded","mt-4","bg-base-200","border","border-base-200","overflow-hidden"],[1,"absolute","top-1/2","left-1/2","-translate-x-1/2","-translate-y-1/2","opacity-30","flex","flex-col","items-center","space-y-2","z-0"],[1,"text-6xl"],[1,"text-center"],["id","qr-stream","playsinline","","width","640","height","480","autoplay","",1,"object-cover","relative","z-10"],["icon","","matRipple","",1,"absolute","top-0","right-0",3,"routerLink"],[1,"bg-base-100","rounded","shadow","overflow-hidden","relative","flex","flex-col","items-center","p-16"],["diameter","32"]],template:function(n,i){if(1&n){const o=e.RV6();e.j41(0,"div",1)(1,"p",2),e.EFF(2," Please enter your email address or scan your QR code "),e.k0s(),e.j41(3,"div",3)(4,"mat-form-field",4)(5,"input",5),e.mxI("ngModelChange",function(l){return e.eBV(o),e.DH7(i.email,l)||(i.email=l),e.Njj(l)}),e.bIt("blur",function(){return e.eBV(o),e.Njj(i.checkEmail(i.email))})("keyup.enter",function(){return e.eBV(o),e.Njj(i.checkEmail(i.email))}),e.k0s(),e.j41(6,"mat-error"),e.EFF(7,"Invalid email format"),e.k0s()(),e.j41(8,"button",6),e.bIt("click",function(){return e.eBV(o),e.Njj(i.checkEmail(i.email))}),e.EFF(9," Find Details "),e.k0s()(),e.j41(10,"div",7)(11,"div",8)(12,"app-icon",9),e.EFF(13,"videocam_off"),e.k0s(),e.j41(14,"p",10),e.EFF(15," Camera feed loading or is not available "),e.k0s()(),e.nrm(16,"video",11,0),e.k0s(),e.j41(18,"a",12)(19,"app-icon"),e.EFF(20,"close"),e.k0s()()(),e.j41(21,"div",13),e.nrm(22,"mat-spinner",14),e.j41(23,"p",2),e.EFF(24,"Loading visitor information..."),e.k0s()()}2&n&&(e.AVh("hidden",i.checking_code),e.R7$(5),e.R50("ngModel",i.email),e.R7$(13),e.Y8G("routerLink",e.lJ4(6,io)),e.R7$(3),e.AVh("hidden",!i.checking_code))},dependencies:[m.me,m.BC,m.vS,y.R,E.rl,E.TL,v.r6,X.fg,G.LG,I.Wk],styles:["video[_ngcontent-%COMP%]{width:34rem;height:24rem}a[_ngcontent-%COMP%]{position:absolute}\n\n/*# sourceMappingURL=checkin-qr-scan.component.ts-angular-inline--97.css.map*/"]})}return a})();var Me=c(3206),oo=c(5647),ro=c(3574),so=c(4846),lo=c(4616);const co=()=>({});function mo(a,s){if(1&a&&(e.j41(0,"div",22),e.EFF(1),e.nI1(2,"async"),e.nI1(3,"async"),e.k0s()),2&a){let t;const n=e.XpG(2);e.R7$(),e.SpI(" Cleared for ",(null==(t=e.bMT(2,1,n.level))?null:t.display_name)||(null==(t=e.bMT(3,3,n.level))?null:t.name)," ")}}function _o(a,s){if(1&a){const t=e.RV6();e.j41(0,"button",21),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.print())}),e.EFF(1," Print Label "),e.k0s()}}function po(a,s){if(1&a){const t=e.RV6();e.j41(0,"div",1)(1,"h3",2),e.EFF(2,"You are checked in!"),e.k0s(),e.nrm(3,"div",3),e.nI1(4,"async"),e.nI1(5,"sanitize"),e.j41(6,"div",4)(7,"div",5)(8,"div",6),e.nrm(9,"a-user-avatar",7),e.k0s(),e.j41(10,"div",8),e.EFF(11),e.nI1(12,"async"),e.k0s(),e.j41(13,"div",9),e.EFF(14),e.nI1(15,"async"),e.k0s(),e.j41(16,"div",10),e.EFF(17),e.nI1(18,"async"),e.k0s(),e.j41(19,"div",11),e.EFF(20," Visitor "),e.k0s()(),e.j41(21,"div",12),e.nrm(22,"img",13),e.DNE(23,mo,4,5,"div",14),e.nI1(24,"async"),e.j41(25,"pre",15),e.EFF(26),e.nI1(27,"async"),e.k0s()(),e.j41(28,"div",16)(29,"div",17)(30,"div"),e.EFF(31),e.nI1(32,"async"),e.nI1(33,"date"),e.k0s(),e.j41(34,"div"),e.EFF(35),e.nI1(36,"async"),e.nI1(37,"date"),e.k0s()(),e.nrm(38,"div",18),e.k0s()(),e.j41(39,"div",19),e.DNE(40,_o,2,0,"button",20),e.j41(41,"button",21),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.next())}),e.EFF(42," Done "),e.k0s()()()}if(2&a){let t,n,i,o,r,l;const d=e.XpG();e.R7$(3),e.Y8G("innerHTML",e.i5U(5,13,e.bMT(4,11,d.result_template),"html"),e.npT),e.R7$(6),e.Y8G("user",e.lJ4(36,co)),e.R7$(2),e.SpI(" ",null==(t=e.bMT(12,16,d.event))?null:t.asset_name," "),e.R7$(3),e.SpI(" For: ",null==(n=e.bMT(15,18,d.event))?null:n.title," "),e.R7$(3),e.SpI(" Seeing ",null==(i=e.bMT(18,20,d.event))?null:i.user_name," "),e.R7$(5),e.Y8G("src",null==d.logo?null:d.logo.src,e.B4B),e.R7$(),e.Y8G("ngIf",e.bMT(24,22,d.level)),e.R7$(3),e.SpI("                        ",null==(o=e.bMT(27,24,d.event))||null==o.extension_data?null:o.extension_data.extra_details,"\n                    "),e.R7$(5),e.SpI(" ",e.i5U(33,28,(null==(r=e.bMT(32,26,d.event))?null:r.date)||"","shortTime")," "),e.R7$(4),e.SpI(" ",e.i5U(37,33,(null==(l=e.bMT(36,31,d.event))?null:l.date)||"","mediumDate")," "),e.R7$(5),e.Y8G("ngIf",d.allow_printing_label)}}const dt='\n<p class="text-center">\n    Welcome, you have a meeting at {{ time }} with {{ host_name }}.\n    <br />{{ host_name }} has been notified and will be with you shortly.\n</p>\n<p>{{ can_use_lift }}</p>\n';let uo=(()=>{class a{get time_format(){return this._settings.time_format}get now(){return(0,Me.c)((0,oo.X)(Date.now(),{nearestTo:5}))}get logo(){return this._settings.get("app.logo_light")}get allow_printing_label(){return!1!==this._settings.get("app.allow_printing_label")}constructor(t,n,i,o,r){this._org=t,this._checkin=n,this._settings=i,this._router=o,this._date=r,this.event=this._checkin.event,this.guest=this._checkin.guest,this.level=(0,Y.zV)([this.event,this._org.initialised]).pipe((0,M.T)(([l])=>l?this._org.levelWithID(l.zones):null)),this.result_template=(0,Y.zV)([this.event,this.guest]).pipe((0,q.p)(([l,d])=>!!l&&!!d),(0,M.T)(([l,d])=>{let u=this._settings.get("app.checked_in_template");u||(u=dt);let g=u.replace(/{{ title }}/g,l?.title||"").replace(/{{ room_name }}/g,l.extension_data?.location_id||"").replace(/{{ host_name }}/g,l?.user_name||"").replace(/{{ host_email }}/g,l?.user_email||"").replace(/{{ visitor_name }}/g,d?.name||"").replace(/{{ visitor_email }}/g,d?.email||"").replace(/{{ can_use_lift }}/g,l.extension_data.can_use_lift?"Please use the vistor access lift over there":"Please wait in the lobby.");try{const f=l.date||1e3*l.event_start||1e3*l.booking_start||(0,Me.c)(Date.now());g=g.replace(/{{ date }}/g,this._date.transform(f,"mediumDate")).replace(/{{ time }}/g,this._date.transform(f,this.time_format))}catch{}return g}),(0,ce.Z)(dt)),this.print=()=>window.print()}ngOnInit(){this.event.pipe((0,O.$)()).subscribe(t=>t?"":this.previous())}previous(){this._router.navigate(["/checkin"])}next(){this._router.navigate(["/welcome"])}static#e=this.\u0275fac=function(n){return new(n||a)(e.rXU(A.yb),e.rXU(D.G),e.rXU(p.h$),e.rXU(I.Ix),e.rXU(_.vh))};static#t=this.\u0275cmp=e.VBU({type:a,selectors:[["checkin-results"]],features:[e.Jv_([_.vh])],decls:2,vars:3,consts:[["class","bg-base-100 rounded shadow overflow-hidden relative flex flex-col items-center w-[36rem] p-4 space-y-4",4,"ngIf"],[1,"bg-base-100","rounded","shadow","overflow-hidden","relative","flex","flex-col","items-center","w-[36rem]","p-4","space-y-4"],[1,"text-xl"],[1,"",3,"innerHTML"],["printable","",1,"relative","w-[24rem]","h-[14rem]","rounded-xl","border","border-neutral","m-4","p-4","bg-base-100","print-only"],[1,"flex","flex-col","h-full"],[1,"h-[4.75rem]","w-[4.75rem]","rounded-full","bg-base-200","flex","items-center","justify-center"],[1,"text-3xl",3,"user"],[1,"text-2xl"],[1,"text-sm","mt-1"],[1,"text-sm","opacity-60"],[1,"rounded-lg","bg-black","text-white","px-2","py-1","text-sm","mt-2","w-32","text-center"],[1,"absolute","top-4","right-4","flex","flex-col","items-end"],["logo","","alt","Logo",1,"h-10",3,"src"],["class","text-xs text-right",4,"ngIf"],[1,"text-right"],[1,"absolute","bottom-4","right-4","flex","items-end","space-x-2"],[1,"text-right","font-medium","leading-tight"],[1,"h-16","w-16","rounded-lg","border","border-base-200"],[1,"flex","items-center","space-x-2"],["btn","","matRipple","","class","w-32",3,"click",4,"ngIf"],["btn","","matRipple","",1,"w-32",3,"click"],[1,"text-xs","text-right"]],template:function(n,i){1&n&&(e.DNE(0,po,43,37,"div",0),e.nI1(1,"async")),2&n&&e.Y8G("ngIf",e.bMT(1,1,i.event))},dependencies:[_.bT,ro.a,so.L,v.r6,_.Jj,_.vh,lo.a],styles:["[_nghost-%COMP%] > div[_ngcontent-%COMP%]{max-width:calc(100vw - 2rem)}\n\n/*# sourceMappingURL=checkin-result.component.ts-angular-inline--98.css.map*/"]})}return a})();const ho=()=>["/welcome"];function go(a,s){if(1&a&&(e.j41(0,"p"),e.EFF(1),e.nI1(2,"async"),e.k0s()),2&a){const t=e.XpG();e.R7$(),e.JRh(e.bMT(2,1,t.error))}}let fo=(()=>{class a{constructor(t){this._checkin=t,this.error=this._checkin.error}static#e=this.\u0275fac=function(n){return new(n||a)(e.rXU(D.G))};static#t=this.\u0275cmp=e.VBU({type:a,selectors:[["checkin-error"]],decls:9,vars:5,consts:[[1,"bg-base-100","rounded","shadow","overflow-hidden","relative","flex","flex-col","items-center","m-4","py-4","px-16","text-center","space-y-4"],[1,"text-2xl","pb-2"],[4,"ngIf"],["btn","","matRipple","",1,"w-32",3,"routerLink"]],template:function(n,i){1&n&&(e.j41(0,"div",0)(1,"h3",1),e.EFF(2,"Please see reception."),e.k0s(),e.DNE(3,go,3,3,"p",2),e.nI1(4,"async"),e.j41(5,"p"),e.EFF(6,"Our staff at reception will assist you."),e.k0s(),e.j41(7,"a",3),e.EFF(8," Back "),e.k0s()()),2&n&&(e.R7$(3),e.Y8G("ngIf",e.bMT(4,2,i.error)),e.R7$(4),e.Y8G("routerLink",e.lJ4(4,ho)))},dependencies:[_.bT,v.r6,I.Wk,_.Jj],styles:["[_nghost-%COMP%] > div[_ngcontent-%COMP%]{width:28rem;max-width:calc(100vw - 2rem)}\n\n/*# sourceMappingURL=checkin-error.component.ts-angular-inline--99.css.map*/"]})}return a})();const bo=["checkin-covid",""],vo=()=>["/welcome"];let Co=(()=>{class a{constructor(t,n){this._router=t,this._checkin=n}confirm(){if(!this.symptoms||!this.contact)return(0,p.UG)("Please select yes or no for each question");this._checkin.updateGuest({covid:"true"===this.contact,symptoms:"true"===this.symptoms}),"false"===this.symptoms&&"false"===this.contact?this._router.navigate(["/checkin","results"]):(this._checkin.setError("Please get tested for COVID-19 and self-isolate at home for 14 days"),this._router.navigate(["/checkin","error"]))}static#e=this.\u0275fac=function(n){return new(n||a)(e.rXU(I.Ix),e.rXU(D.G))};static#t=this.\u0275cmp=e.VBU({type:a,selectors:[["","checkin-covid",""]],attrs:bo,decls:55,vars:5,consts:[[1,"bg-base-100","rounded","p-4","relative","overflow-y-auto","overflow-x-hidden"],[1,"text-xl","font-medium","mb-4"],[1,"list-decimal","list-inside"],[1,"list-disc","list-inside","px-4","mb-4"],["aria-label","Has Symptoms",3,"ngModelChange","ngModel"],["value","true"],["value","false",1,"ml-4"],[1,"my-4"],["aria-label","COVID contact or self-isolated",3,"ngModelChange","ngModel"],["btn","","matRipple","",3,"click"],["icon","","matRipple","",1,"absolute","top-0","right-0",3,"routerLink"]],template:function(n,i){1&n&&(e.j41(0,"div",0)(1,"h3",1),e.EFF(2,"COVID Disclaimer"),e.k0s(),e.j41(3,"ol",2)(4,"li"),e.EFF(5," Do you have any of the following symptoms?"),e.nrm(6,"br")(7,"br"),e.j41(8,"ul",3)(9,"li"),e.EFF(10,"Fever"),e.k0s(),e.j41(11,"li"),e.EFF(12,"Cough"),e.k0s(),e.j41(13,"li"),e.EFF(14,"Shortness of breath"),e.k0s(),e.j41(15,"li"),e.EFF(16,"Chills"),e.k0s(),e.j41(17,"li"),e.EFF(18,"Body aches"),e.k0s(),e.j41(19,"li"),e.EFF(20,"Sore or scratchy throat"),e.k0s(),e.j41(21,"li"),e.EFF(22,"Headache"),e.k0s(),e.j41(23,"li"),e.EFF(24,"Runny nose"),e.k0s(),e.j41(25,"li"),e.EFF(26,"Muscle pain"),e.k0s(),e.j41(27,"li"),e.EFF(28,"Vomitting"),e.k0s(),e.j41(29,"li"),e.EFF(30,"Nausea"),e.k0s(),e.j41(31,"li"),e.EFF(32,"Diarrhoa"),e.k0s(),e.j41(33,"li"),e.EFF(34,"Loss of taste or smell"),e.k0s()(),e.j41(35,"mat-radio-group",4),e.mxI("ngModelChange",function(r){return e.DH7(i.symptoms,r)||(i.symptoms=r),r}),e.j41(36,"mat-radio-button",5),e.EFF(37,"Yes"),e.k0s(),e.j41(38,"mat-radio-button",6),e.EFF(39,"No"),e.k0s()()(),e.nrm(40,"hr",7),e.j41(41,"li"),e.EFF(42," Have you been in contact with a COVID-19 case in the last 14 days or been asked to self-isolate by a health offical?"),e.nrm(43,"br")(44,"br"),e.j41(45,"mat-radio-group",8),e.mxI("ngModelChange",function(r){return e.DH7(i.contact,r)||(i.contact=r),r}),e.j41(46,"mat-radio-button",5),e.EFF(47,"Yes"),e.k0s(),e.j41(48,"mat-radio-button",6),e.EFF(49,"No"),e.k0s()()()(),e.j41(50,"button",9),e.bIt("click",function(){return i.confirm()}),e.EFF(51,"Confirm"),e.k0s(),e.j41(52,"a",10)(53,"app-icon"),e.EFF(54,"close"),e.k0s()()()),2&n&&(e.R7$(35),e.R50("ngModel",i.symptoms),e.R7$(10),e.R50("ngModel",i.contact),e.R7$(7),e.Y8G("routerLink",e.lJ4(4,vo)),e.BMQ("disabled",!i.symptoms&&!i.contact))},dependencies:[m.BC,m.vS,y.R,v.r6,W.VT,W._g,I.Wk],styles:["[_nghost-%COMP%] > div[_ngcontent-%COMP%]{width:32rem;max-width:calc(100vw - 2rem);max-height:calc(100% - 2rem)}button[_ngcontent-%COMP%]{margin:1rem 11rem 0;width:8rem}\n\n/*# sourceMappingURL=checkin-covid.component.ts-angular-inline--100.css.map*/"]})}return a})();const yo=["app-checkin",""],ko=["checkin-induction",""],Io=[{path:"",component:(()=>{class a{get now(){return(0,Me.c)(new Date)}get background(){return this._settings.get("app.home.background")}constructor(t){this._settings=t}static#e=this.\u0275fac=function(n){return new(n||a)(e.rXU(p.h$))};static#t=this.\u0275cmp=e.VBU({type:a,selectors:[["","app-checkin",""]],attrs:yo,decls:8,vars:10,consts:[[1,"absolute","inset-0","p-8","flex","items-center"],[1,"flex","flex-col","justify-center","space-y-8","z-10","w-full"],[1,"absolute","top-4","right-4","text-2xl","text-white"],["src","assets/img/building.png",1,"absolute","w-[60%]","bottom-0","right-0"]],template:function(n,i){1&n&&(e.j41(0,"div",0)(1,"div",1),e.nrm(2,"router-outlet"),e.k0s(),e.j41(3,"div",2),e.EFF(4),e.nI1(5,"date"),e.nI1(6,"date"),e.k0s(),e.nrm(7,"img",3),e.k0s()),2&n&&(e.xc7("background-image","url("+i.background+")"),e.R7$(4),e.Lme(" ",e.i5U(5,4,i.now,"mediumDate")," ",e.i5U(6,7,i.now,"shortTime")," "))},dependencies:[I.n3,_.vh],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%;width:100%}\n\n/*# sourceMappingURL=checkin.component.ts-angular-inline--101.css.map*/"]})}return a})(),children:[{path:"scan",component:ao},{path:"details",component:gt},{path:"preferences",component:eo},{path:"photo",component:yt},{path:"results",component:uo},{path:"error",component:fo},{path:"covid",component:Co},{path:"induction",component:(()=>{class a{get induction_details(){return this._settings.get("app.induction_details")}get induction_after_details(){return this._settings.get("app.induction_after_details")}get is_enabled(){return this._settings.get("app.induction_enabled")&&this._settings.get("app.induction_details")}constructor(t,n,i,o){this._checkin=t,this._router=n,this._settings=i,this._org=o,this.event=this._checkin.event,this.agree=!1,this.loading=!1}ngOnInit(){var t=this;return(0,h.A)(function*(){yield t._org.initialised.pipe((0,O.$)(i=>i)).toPromise();const n=yield t.event.pipe((0,O.$)()).toPromise();n||t._router.navigate(["/checkin"]),(!t.is_enabled||"accepted"===n.induction)&&t._router.navigate(t.induction_after_details?["/checkin","results"]:["/checkin","details"])})()}decline(){var t=this;return(0,h.A)(function*(){t.loading=!0,yield t._checkin.declineInduction().catch(n=>{throw(0,p.UG)("Error declining induction",n),n}),t._checkin.setError("You have declined the induction."),(0,p.uA)("Induction declined successfully"),t._router.navigate(["/checkin","error"])})()}continue(){var t=this;return(0,h.A)(function*(){t.loading=!0,yield t._checkin.completeInduction().catch(n=>{throw(0,p.UG)("Error completing induction",n),n}),(0,p.VX)("Induction completed successfully"),t._router.navigate(["/checkin","details"])})()}static#e=this.\u0275fac=function(n){return new(n||a)(e.rXU(D.G),e.rXU(I.Ix),e.rXU(p.h$),e.rXU(A.yb))};static#t=this.\u0275cmp=e.VBU({type:a,selectors:[["","checkin-induction",""]],attrs:ko,decls:12,vars:3,consts:[[1,"relative","bg-base-100","rounded","shadow","overflow-hidden","flex","flex-col","items-center","w-[32rem]","p-4"],[1,"my-4"],[1,"rounded","border","border-base-300","w-full","p-4","opacity-60","text-sm","overflow-y-auto","overflow-x-hidden","max-h-[50vh]","whitespace-pre-wrap"],[1,"my-4",3,"ngModelChange","ngModel"],[1,"flex","items-center","justify-center","space-x-2"],["btn","","matRipple","",1,"w-32","clear","underline",3,"click"],["btn","","matRipple","",1,"w-32",3,"click","disabled"]],template:function(n,i){1&n&&(e.j41(0,"div",0)(1,"p",1),e.EFF(2," Please read the induction information below before proceeding "),e.k0s(),e.j41(3,"div",2),e.EFF(4),e.k0s(),e.j41(5,"mat-checkbox",3),e.mxI("ngModelChange",function(r){return e.DH7(i.agree,r)||(i.agree=r),r}),e.EFF(6," I agree "),e.k0s(),e.j41(7,"div",4)(8,"button",5),e.bIt("click",function(){return i.decline()}),e.EFF(9," Decline "),e.k0s(),e.j41(10,"button",6),e.bIt("click",function(){return i.continue()}),e.EFF(11," Accept "),e.k0s()()()),2&n&&(e.R7$(4),e.SpI(" ",i.induction_details," "),e.R7$(),e.R50("ngModel",i.agree),e.R7$(5),e.Y8G("disabled",!i.agree))},dependencies:[m.BC,m.vS,v.r6,L.So],encapsulation:2})}return a})()},{path:"**",redirectTo:"scan"}]},{path:"**",redirectTo:""}];let To=(()=>{class a{static#e=this.\u0275fac=function(n){return new(n||a)};static#t=this.\u0275mod=e.$C({type:a});static#n=this.\u0275inj=e.G2t({imports:[_.MD,m.YN,m.X1,mt.u,I.iI.forChild(Io)]})}return a})()}}]);
//# sourceMappingURL=apps_visitor-kiosk_src_app_checkin_checkin_module_ts.js.map