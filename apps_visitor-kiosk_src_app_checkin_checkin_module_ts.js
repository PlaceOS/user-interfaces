"use strict";(self.webpackChunkvisitor_kiosk=self.webpackChunkvisitor_kiosk||[]).push([["apps_visitor-kiosk_src_app_checkin_checkin_module_ts"],{4545:(uo,Ot,l)=>{l.r(Ot),l.d(Ot,{VisitorCheckinModule:()=>po});var _=l(6575),m=l(8849),k=l(9794),_e=l(8714),u=l(1670),L=l(7627),g=l(7109),z=l(8377),pe=l(7120),ue=l(7265);function ge(a){(0,ue.Z)(1,arguments);var s=(0,pe.Z)(a);return s.setMinutes(0,0,0),s}var st=l(7343),bt=l(8415),he=l(7393),T=l(462),ct=l(8466),fe=l(7049),t=l(163);let U=(()=>{class a{constructor(){this._booking=new T.X(new ct.$N({asset_id:"jim@1234.com",asset_name:"Jim Jones",user_email:"alex@place.tech",user_name:"Alex Sorafumo",date:ge(Date.now()).valueOf(),duration:60,zones:["zone-Do2HJ00hTG"]})),this._guest=new T.X(null),this._photo=new T.X(""),this._error=new T.X(""),this._form=new T.X((0,z.en)()),this._space_pipe=new fe.XE,this.event=this._booking.asObservable(),this.guest=this._guest.asObservable(),this.error=this._error.asObservable(),this.form=this._form.asObservable()}clear(){this._guest.next(null),this._booking.next(null),this._photo.next(null)}setPhoto(e){this._photo.next(e)}setError(e){this._error.next(e)}loadGuestAndEvent(e,n){var i=this;return(0,u.Z)(function*(){const o=yield(0,z.pP)(e).toPromise();if(n){const p=yield(0,ct.Fo)(n).toPromise();return i._guest.next(o),i._booking.next(p),i._form.next((0,z.en)(o,p.user_email)),{guest:o,event:p}}if(o.booking)return i._guest.next(o),i._booking.next(o.booking),i._form.next((0,z.en)(o,o.booking.user_email)),{guest:o,event:o.booking};let r=yield(0,ct.NP)({type:"visitor",period_start:(0,st.Z)(Date.now()),period_end:(0,st.Z)((0,bt.Z)(Date.now(),120))}).toPromise();r=r.filter(p=>p.user_email===e||p.asset_id===e);const c=new Date,d=r.filter(p=>(0,he.Z)(new Date(p.date),c));if(d.sort((p,h)=>p.date-h.date),d.length<=0)throw new Error(`No meetings for guest "${e}" today`);return i._guest.next(o),i._booking.next(d[0]),i._form.next((0,z.en)(o,d[0].user_email)),{guest:o,event:d[0]}})()}updateGuest(e){var n=this;return(0,u.Z)(function*(){n._guest.getValue(),n._form.getValue()})()}checkinGuest(){var e=this;return(0,u.Z)(function*(){const n=e._guest.getValue(),i=e._booking.getValue()||n.extension_data.event;n&&i&&(yield(0,ct.FD)(i.id,!0).toPromise().catch(function(){var r=(0,u.Z)(function*(c){throw(0,g.cB)(c||`Error checking in ${n.name} for ${i.user_name||i.user_email}'s meeting.`),c});return function(c){return r.apply(this,arguments)}}()),(0,g.t5)(`Successfully checked in ${n.name} for ${i.user_name||i.user_email}'s meeting`))})()}printPass(){try{return new Promise(e=>setTimeout(()=>e(""),5e3))}catch{(0,g.cB)("Error printing visitor pass")}return Promise.reject()}static#t=this.\u0275fac=function(n){return new(n||a)};static#e=this.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})();var x=l(4888),O=l(1268),b=l(257),q=l(9674),N=l(3910);const be=["checkin-details",""],ve=()=>["/welcome"];function Ce(a,s){if(1&a){const e=t.EpF();t.TgZ(0,"form",2),t.ALo(1,"async"),t.TgZ(2,"h3",3),t._uU(3,"Confirm Details"),t.qZA(),t.TgZ(4,"div",4)(5,"label",5),t._uU(6,"Host"),t.qZA(),t.TgZ(7,"mat-form-field",6),t._UZ(8,"input",7),t.TgZ(9,"mat-error"),t._uU(10," The email address of your host is required "),t.qZA()()(),t.TgZ(11,"div",4)(12,"label",8),t._uU(13,"Name"),t.qZA(),t.TgZ(14,"mat-form-field",6),t._UZ(15,"input",9),t.TgZ(16,"mat-error"),t._uU(17,"Please enter your full name"),t.qZA()()(),t.TgZ(18,"div",4)(19,"label",10),t._uU(20,"Email"),t.qZA(),t.TgZ(21,"mat-form-field",6),t._UZ(22,"input",11),t.TgZ(23,"mat-error"),t._uU(24,"A valid email address is required"),t.qZA()()(),t.TgZ(25,"div",4)(26,"label",10),t._uU(27,"Phone Number"),t.qZA(),t.TgZ(28,"mat-form-field",6),t._UZ(29,"input",12),t.qZA()(),t.TgZ(30,"div",4)(31,"label",13),t._uU(32,"Organisation / Company"),t.qZA(),t.TgZ(33,"mat-form-field",6),t._UZ(34,"input",14),t.qZA()(),t.TgZ(35,"button",15),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.updateGuest())}),t._uU(36,"Next"),t.qZA(),t.TgZ(37,"a",16)(38,"app-icon"),t._uU(39,"close"),t.qZA()()()}if(2&a){const e=t.oxw();t.Q6J("formGroup",t.lcZ(1,2,e.form)),t.xp6(37),t.Q6J("routerLink",t.DdM(4,ve))}}function xe(a,s){1&a&&(t.TgZ(0,"div",17)(1,"div",18),t._UZ(2,"mat-spinner",19),t.TgZ(3,"div",20),t._uU(4," Updating data and checking in... "),t.qZA()()()),2&a&&(t.xp6(2),t.Q6J("diameter",48))}let Te=(()=>{class a{constructor(e,n){this._checkin=e,this._router=n,this.form=this._checkin.form,this.loading=!1}ngOnInit(){this.form.pipe((0,L.P)()).subscribe(e=>e&&e.value.email?"":this.previous())}updateGuest(){var e=this;return(0,u.Z)(function*(){e.loading=!0,yield e._checkin.updateGuest(),yield e._checkin.checkinGuest()?.catch(n=>{throw e.loading=!1,n}),e.loading=!1,e._router.navigate(["/checkin","results"])})()}previous(){this._router.navigate(["/checkin","scan"])}static#t=this.\u0275fac=function(n){return new(n||a)(t.Y36(U),t.Y36(k.F0))};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["","checkin-details",""]],attrs:be,decls:4,vars:4,consts:[["class","bg-base-100 rounded shadow overflow-hidden relative flex flex-col items-center my-4 mx-auto",3,"formGroup",4,"ngIf","ngIfElse"],["load_state",""],[1,"bg-base-100","rounded","shadow","overflow-hidden","relative","flex","flex-col","items-center","my-4","mx-auto",3,"formGroup"],[1,"text-2xl","m-4"],["field","",1,"flex","flex-col"],["form","host"],["appearance","outline"],["matInput","","name","host","formControlName","host","placeholder","Host's Email Address"],["form","name"],["matInput","","name","name","formControlName","name","placeholder","Full Name"],["form","email"],["matInput","","name","email","formControlName","email","placeholder","Email Address"],["matInput","","name","phone","type","tel","formControlName","phone","placeholder","Phone Number"],["form","org"],["matInput","","name","org","formControlName","organisation","placeholder","Organisation / Company"],["next","","btn","","matRipple","",3,"click"],["icon","","matRipple","",1,"absolute","top-0","right-0",3,"routerLink"],[1,"absolute","inset-0","flex","flex-col","items-center","justify-center"],[1,"flex","flex-col","items-center","space-y-2","bg-base-100","rounded","shadow","p-16"],[3,"diameter"],[1,"my-4","text-lg"]],template:function(n,i){if(1&n&&(t.YNc(0,Ce,40,5,"form",0),t.ALo(1,"async"),t.YNc(2,xe,5,1,"ng-template",null,1,t.W1O)),2&n){const o=t.MAs(3);t.Q6J("ngIf",t.lcZ(1,2,i.form)&&!i.loading)("ngIfElse",o)}},dependencies:[_.O5,m._Y,m.Fj,m.JJ,m.JL,m.sg,m.u,x.o,O.KE,O.TO,b.wG,q.Nt,N.Ou,k.rH,_.Ov],styles:["[_nghost-%COMP%]{position:absolute;inset:0;background-color:#00000080}form[_ngcontent-%COMP%]{width:32rem;max-width:calc(100vw - 2rem)}[field][_ngcontent-%COMP%]{width:calc(100% - 2rem)}.absolute[_ngcontent-%COMP%]{position:absolute}button[_ngcontent-%COMP%]{margin-bottom:1rem;width:8rem}\n\n/*# sourceMappingURL=checkin-details.component.ts-angular-inline--82.css.map*/"]})}return a})();var ye=l(3645);const we=()=>["/welcome"];function Me(a,s){if(1&a){const e=t.EpF();t.TgZ(0,"div",2)(1,"h3",3),t._uU(2,"Take a photo to continue"),t.qZA(),t.TgZ(3,"a-take-photo",4),t.NdJ("photoAccepted",function(i){t.CHM(e);const o=t.oxw();return t.KtG(o.handlePhoto(i))}),t.qZA(),t.TgZ(4,"a",5)(5,"app-icon"),t._uU(6,"close"),t.qZA()()()}2&a&&(t.xp6(4),t.Q6J("routerLink",t.DdM(1,we)))}function Ze(a,s){1&a&&(t.TgZ(0,"div",6),t._UZ(1,"mat-spinner",7),t.TgZ(2,"div",8),t._uU(3," Printing guest pass... "),t.qZA()()),2&a&&(t.xp6(1),t.Q6J("diameter",48))}let Ie=(()=>{class a{constructor(e,n){this._checkin=e,this._router=n}handlePhoto(e){var n=this;return(0,u.Z)(function*(){if(!e)return(0,g.cB)("Error saving image, please try again");n.loading=!0,n._checkin.setPhoto(e),yield n._checkin.printPass().catch(i=>{throw n.loading=!1,(0,g.cB)(i),i}),n.loading=!1,n._router.navigate(["/checkin","results"])})()}static#t=this.\u0275fac=function(n){return new(n||a)(t.Y36(U),t.Y36(k.F0))};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["checkin-photo"]],decls:3,vars:2,consts:[["class","bg-base-100 rounded shadow overflow-hidden relative flex flex-col items-center p-4",4,"ngIf","ngIfElse"],["load_state",""],[1,"bg-base-100","rounded","shadow","overflow-hidden","relative","flex","flex-col","items-center","p-4"],[1,"text-xl","mb-4"],[3,"photoAccepted"],["icon","","matRipple","",1,"absolute","top-0","right-0",3,"routerLink"],[1,"flex","flex-col","items-center","m-auto"],[3,"diameter"],[1,"my-4","text-lg","text-white"]],template:function(n,i){if(1&n&&t.YNc(0,Me,7,2,"div",0)(1,Ze,4,1,"ng-template",null,1,t.W1O),2&n){const o=t.MAs(2);t.Q6J("ngIf",!i.loading)("ngIfElse",o)}},dependencies:[_.O5,x.o,b.wG,N.Ou,ye.Q,k.rH],styles:["[_nghost-%COMP%]{position:absolute;display:flex;align-items:center;justify-content:center;inset:0;background-color:#00000080}.absolute[_ngcontent-%COMP%]{position:absolute}\n\n/*# sourceMappingURL=checkin-photo.component.ts-angular-inline--83.css.map*/"]})}return a})();l(9304),l(9934);var J=l(554),M=l(7401),y=l(5784),lt=l(9892),B=l(6658),dt=l(1757),vt=l(622),ke=l(4035);function Ae(a,s){1&a&&(t.TgZ(0,"button",6)(1,"app-icon"),t._uU(2,"close"),t.qZA()())}function Oe(a,s){if(1&a&&(t.TgZ(0,"div",17)(1,"label",18),t._uU(2," Name"),t.TgZ(3,"span"),t._uU(4,"*"),t.qZA(),t._uU(5,": "),t.qZA(),t.TgZ(6,"mat-form-field",19),t._UZ(7,"input",20),t.TgZ(8,"mat-error"),t._uU(9,"Name is required"),t.qZA()()()),2&a){const e=t.oxw(2);t.xp6(1),t.ekj("error",e.form.controls.name.invalid&&e.form.controls.name.touched)}}function Ee(a,s){if(1&a&&(t.TgZ(0,"div",17)(1,"label",21),t._uU(2," Category"),t.TgZ(3,"span"),t._uU(4,"*"),t.qZA(),t._uU(5,": "),t.qZA(),t.TgZ(6,"mat-form-field",19),t._UZ(7,"input",22),t.TgZ(8,"mat-error"),t._uU(9,"Category is required"),t.qZA()()()),2&a){const e=t.oxw(2),n=t.MAs(9);t.xp6(1),t.ekj("error",e.form.controls.category.invalid&&e.form.controls.category.touched),t.xp6(6),t.Q6J("matAutocomplete",n)}}function Re(a,s){if(1&a){const e=t.EpF();t.TgZ(0,"mat-chip-row",29),t.NdJ("removed",function(){const o=t.CHM(e).$implicit,r=t.oxw(3);return t.KtG(r.removeTag(o))}),t._uU(1),t.TgZ(2,"button",30)(3,"app-icon"),t._uU(4,"cancel"),t.qZA()()()}if(2&a){const e=s.$implicit;t.xp6(1),t.hij(" ",e," "),t.xp6(1),t.uIk("aria-label","Remove "+e)}}function Le(a,s){if(1&a){const e=t.EpF();t.TgZ(0,"div",17)(1,"label",23),t.SDv(2,24),t.qZA(),t.TgZ(3,"mat-form-field",19)(4,"mat-chip-grid",25,26),t.YNc(6,Re,5,2,"mat-chip-row",27),t.qZA(),t.TgZ(7,"input",28),t.NdJ("matChipInputTokenEnd",function(i){t.CHM(e);const o=t.oxw(2);return t.KtG(o.addTag(i))}),t.qZA()()()}if(2&a){const e=t.MAs(5),n=t.oxw(2);t.xp6(1),t.ekj("error",n.form.controls.tags.invalid&&n.form.controls.tags.touched),t.xp6(5),t.Q6J("ngForOf",n.tag_list),t.xp6(1),t.Q6J("matChipInputFor",e)("matChipInputSeparatorKeyCodes",n.separators)("matChipInputAddOnBlur",!0)}}function Ne(a,s){1&a&&(t.TgZ(0,"div",17)(1,"label",31),t._uU(2,"Description:"),t.qZA(),t.TgZ(3,"mat-form-field",19),t._UZ(4,"textarea",32),t.qZA()())}function Fe(a,s){if(1&a&&(t.TgZ(0,"div",17)(1,"label",18),t._uU(2," Unit Price"),t.TgZ(3,"span"),t._uU(4,"*"),t.qZA(),t._uU(5,": "),t.qZA(),t.TgZ(6,"mat-form-field",19),t._UZ(7,"input",33),t.TgZ(8,"mat-error"),t._uU(9,"Unit Price is required"),t.qZA()()()),2&a){const e=t.oxw(2);t.xp6(1),t.ekj("error",e.form.controls.unit_price.invalid&&e.form.controls.unit_price.touched)}}function De(a,s){1&a&&(t.TgZ(0,"div",17)(1,"label",34),t.SDv(2,35),t.qZA(),t._UZ(3,"image-list-field",36),t.qZA())}const K=()=>({standalone:!0});function Se(a,s){if(1&a){const e=t.EpF();t.TgZ(0,"form",7)(1,"div",8),t.YNc(2,Oe,10,2,"div",9)(3,Ee,10,3,"div",9),t.qZA(),t.YNc(4,Le,8,6,"div",9)(5,Ne,5,0,"div",9)(6,Fe,10,2,"div",9),t.TgZ(7,"div",10)(8,"label",11),t._uU(9,"Accept Points?"),t.qZA(),t.TgZ(10,"mat-checkbox",12),t._uU(11),t.qZA()(),t.TgZ(12,"div",13)(13,"mat-checkbox",14),t.NdJ("ngModelChange",function(i){t.CHM(e);const o=t.oxw();return t.KtG(i?o.addTag({value:"Gluten Free"}):o.removeTag("Gluten Free"))}),t._uU(14," Gluten Free (GF) "),t.qZA(),t.TgZ(15,"mat-checkbox",14),t.NdJ("ngModelChange",function(i){t.CHM(e);const o=t.oxw();return t.KtG(i?o.addTag({value:"Vegan"}):o.removeTag("Vegan"))}),t._uU(16," Vegan (VG) "),t.qZA(),t.TgZ(17,"mat-checkbox",14),t.NdJ("ngModelChange",function(i){t.CHM(e);const o=t.oxw();return t.KtG(i?o.addTag({value:"Vegetarian"}):o.removeTag("Vegetarian"))}),t._uU(18," Vegetarian (V) "),t.qZA(),t.TgZ(19,"mat-checkbox",14),t.NdJ("ngModelChange",function(i){t.CHM(e);const o=t.oxw();return t.KtG(i?o.addTag({value:"Contains Dairy"}):o.removeTag("Contains Dairy"))}),t._uU(20," Contains Dairy (D) "),t.qZA(),t.TgZ(21,"mat-checkbox",14),t.NdJ("ngModelChange",function(i){t.CHM(e);const o=t.oxw();return t.KtG(i?o.addTag({value:"Contains Nuts"}):o.removeTag("Contains Nuts"))}),t._uU(22," Contains Nuts (N) "),t.qZA()(),t.TgZ(23,"div",10)(24,"label",15),t._uU(25,"Discount Cap"),t.qZA(),t._UZ(26,"a-counter",16),t.qZA(),t.YNc(27,De,4,0,"div",9),t.qZA()}if(2&a){const e=t.oxw();let n;t.Q6J("formGroup",e.form),t.xp6(2),t.Q6J("ngIf",e.form.controls.name),t.xp6(1),t.Q6J("ngIf",e.form.controls.category),t.xp6(1),t.Q6J("ngIf",e.form.controls.tags),t.xp6(1),t.Q6J("ngIf",e.form.controls.description),t.xp6(1),t.Q6J("ngIf",e.form.controls.unit_price),t.xp6(5),t.Oqu(null!=(n=e.form.get("accept_points"))&&n.value?"No":"Yes"),t.xp6(2),t.Q6J("ngModel",e.hasTag("Gluten Free"))("ngModelOptions",t.DdM(22,K)),t.xp6(2),t.Q6J("ngModel",e.hasTag("Vegan"))("ngModelOptions",t.DdM(23,K)),t.xp6(2),t.Q6J("ngModel",e.hasTag("Vegetarian"))("ngModelOptions",t.DdM(24,K)),t.xp6(2),t.Q6J("ngModel",e.hasTag("Contains Dairy"))("ngModelOptions",t.DdM(25,K)),t.xp6(2),t.Q6J("ngModel",e.hasTag("Contains Nuts"))("ngModelOptions",t.DdM(26,K)),t.xp6(5),t.Q6J("min",0)("max",100)("step",5)("render_fn",e.renderPercent),t.xp6(1),t.Q6J("ngIf",e.form.controls.images)}}function Ue(a,s){if(1&a){const e=t.EpF();t.TgZ(0,"footer",37)(1,"button",38),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.saveChanges())}),t._uU(2," Save "),t.qZA()()}if(2&a){const e=t.oxw();t.xp6(1),t.Q6J("disabled",!e.form.dirty)}}function Pe(a,s){1&a&&(t.TgZ(0,"div",39),t._UZ(1,"mat-spinner",40),t.TgZ(2,"p"),t._uU(3,"Saving catering item..."),t.qZA()())}function qe(a,s){if(1&a&&(t.TgZ(0,"mat-option",41),t._uU(1),t.qZA()),2&a){const e=s.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e," ")}}let Et=(()=>{class a{get item(){return this._data.item||new y.U}get categories(){return this._data.categories||[]}get tag_list(){return this.form.controls.tags.value}renderPercent(e=0){return`${e}%`}hasTag(e){return this.tag_list.includes(e)}constructor(e){this._data=e,this.event=new t.vpe,this.form=new m.cw({name:new m.NI(this.item.name||"",[m.kI.required]),description:new m.NI(this.item.description||""),category:new m.NI(this.item.category||"",[m.kI.required]),unit_price:new m.NI(this.item.unit_price,[m.kI.required]),tags:new m.NI(this.item.tags||[]),accept_points:new m.NI(this.item.accept_points||!1),discount_cap:new m.NI(this.item.discount_cap||0),images:new m.NI(this.item.images||[])}),this.loading=!1,this.separators=[J.K5,J.OC,J.L_]}addTag(e){if(!this.form||!this.form.controls.tags)return;this.form.controls.tags.markAsDirty();const n=e.input,i=e.value,o=this.tag_list;(i||"").trim()&&(o.push(i),this.form.controls.tags.setValue(o)),n&&(n.value="")}removeTag(e){if(!this.form||!this.form.controls.tags)return;const n=this.tag_list;this.form.controls.tags.markAsDirty();const i=n.indexOf(e);i>=0&&(n.splice(i,1),this.form.controls.tags.setValue(n))}saveChanges(){this.loading=!0,this.event.emit({reason:"done",metadata:{item:new y.U({...this.item,id:this.item.id||`item-${(0,g.Iy)(99999999)}`,...this.form.value})}})}static#t=this.\u0275fac=function(n){return new(n||a)(t.Y36(M.WI))};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["catering-item-modal"]],outputs:{event:"event"},decls:11,vars:6,consts:()=>{let e,n,i;return e=$localize`:@@tagsLabel␟800ffadd463cfe152c5af3fa9f13803ab2e77b93␟4746186018558508280: Tags: `,n=$localize`:@@zoneTagsPlaceholder␟c133beffffe3288bbdbf8572a32910c33ce14991␟2194594490376201833:Item tags e.g. Gluten Free, Vegan etc.`,i=$localize`:@@imagesLabel␟e5d9e00faa06714d7671b164cad364b26f4c585b␟5137125764814732349:Images:`,[["icon","","matRipple","","mat-dialog-close","",4,"ngIf"],["class","p-4 overflow-auto max-h-[65vh]",3,"formGroup",4,"ngIf","ngIfElse"],["class","flex p-2 items-center justify-center border-t border-solid border-base-200",4,"ngIf"],["load_state",""],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["icon","","matRipple","","mat-dialog-close",""],[1,"p-4","overflow-auto","max-h-[65vh]",3,"formGroup"],[1,"flex","items-center","space-x-2"],["class","flex flex-col",4,"ngIf"],[1,"flex","items-center"],[1,"flex-none","w-28","min-w-0"],["formControlName","accept_points"],["list","",1,"flex","items-center","flex-wrap","max-w-lg"],[3,"ngModel","ngModelOptions","ngModelChange"],[1,"flex-1","w-24","min-w-0"],["formControlName","discount_cap",1,"border","border-base-200","rounded",3,"min","max","step","render_fn"],[1,"flex","flex-col"],["for","title"],["appearance","outline"],["matInput","","name","name","placeholder","Item name","formControlName","name"],["for","category"],["matInput","","name","category","placeholder","Category","formControlName","category",3,"matAutocomplete"],["for","tags"],e,["aria-label","Item Tags"],["chipList",""],[3,"removed",4,"ngFor","ngForOf"],["name","tags","placeholder",n,3,"matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputAddOnBlur","matChipInputTokenEnd"],[3,"removed"],["matChipRemove",""],["for","description"],["matInput","","name","description","placeholder","Item Description","formControlName","description"],["matInput","","name","unit-price","type","number","placeholder","Unit Price","formControlName","unit_price"],["for","images"],i,["name","images","formControlName","images"],[1,"flex","p-2","items-center","justify-center","border-t","border-solid","border-base-200"],["btn","","matRipple","",3,"disabled","click"],[1,"flex","flex-col","items-center","p-8","space-y-2","w-64"],["diameter","32"],[3,"value"]]},template:function(n,i){if(1&n&&(t.TgZ(0,"header")(1,"h3"),t._uU(2),t.qZA(),t.YNc(3,Ae,3,0,"button",0),t.qZA(),t.YNc(4,Se,28,27,"form",1)(5,Ue,3,1,"footer",2)(6,Pe,4,0,"ng-template",null,3,t.W1O),t.TgZ(8,"mat-autocomplete",null,4),t.YNc(10,qe,2,2,"mat-option",5),t.qZA()),2&n){const o=t.MAs(7);t.xp6(2),t.hij("",i.item.id?"Edit":"Add"," Item"),t.xp6(1),t.Q6J("ngIf",!i.loading),t.xp6(1),t.Q6J("ngIf",i.form&&!i.loading)("ngIfElse",o),t.xp6(1),t.Q6J("ngIf",!i.loading),t.xp6(5),t.Q6J("ngForOf",i.categories)}},dependencies:[_.sg,_.O5,lt.XC,b.ey,lt.ZL,M.ZT,B.oG,m._Y,m.Fj,m.wV,m.JJ,m.JL,m.On,m.sg,m.u,x.o,O.KE,O.TO,b.wG,q.Nt,N.Ou,dt.RA,dt.oH,dt.qH,dt.z3,vt.R,ke.h],styles:["[list][_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]{margin:.5rem}\n\n/*# sourceMappingURL=catering-item-modal.component.ts-angular-inline--84.css.map*/"]})}return a})();var F=l(2141),G=l(8159),Q=l(9681),X=l(5046),$=l(6520),tt=l(8175),w=l(7422),mt=l(5746),et=l(680),H=l(6939),j=l(3121),Rt=l(2338);function Je(a,s){1&a&&(t.TgZ(0,"button",6)(1,"app-icon"),t._uU(2,"close"),t.qZA()())}function Be(a,s){if(1&a&&(t.TgZ(0,"div",9)(1,"label",10),t._uU(2," Name"),t.TgZ(3,"span"),t._uU(4,"*"),t.qZA(),t._uU(5,": "),t.qZA(),t.TgZ(6,"mat-form-field",11),t._UZ(7,"input",12),t.TgZ(8,"mat-error"),t._uU(9,"Name is required"),t.qZA()()()),2&a){const e=t.oxw(2);t.xp6(1),t.ekj("error",e.form.controls.name.invalid&&e.form.controls.name.touched)}}function Ge(a,s){if(1&a&&(t.TgZ(0,"div",9)(1,"label",13),t._uU(2," Type"),t.TgZ(3,"span"),t._uU(4,"*"),t.qZA(),t._uU(5,": "),t.qZA(),t.TgZ(6,"mat-form-field",11),t._UZ(7,"input",14),t.TgZ(8,"mat-error"),t._uU(9,"Type is required"),t.qZA()()()),2&a){const e=t.oxw(2),n=t.MAs(9);t.xp6(1),t.ekj("error",e.form.controls.group.invalid&&e.form.controls.group.touched),t.xp6(6),t.Q6J("matAutocomplete",n)}}function Qe(a,s){1&a&&(t.TgZ(0,"div",9)(1,"label",10),t._uU(2,"Unit Price:"),t.qZA(),t.TgZ(3,"mat-form-field",11),t._UZ(4,"input",15),t.qZA()())}function $e(a,s){1&a&&(t.TgZ(0,"div",9)(1,"mat-checkbox",16),t._uU(2," Can select multiple of type "),t.qZA()())}function He(a,s){if(1&a&&(t.TgZ(0,"form",7),t.YNc(1,Be,10,2,"div",8)(2,Ge,10,3,"div",8)(3,Qe,5,0,"div",8)(4,$e,3,0,"div",8),t.qZA()),2&a){const e=t.oxw();t.Q6J("formGroup",e.form),t.xp6(1),t.Q6J("ngIf",e.form.controls.name),t.xp6(1),t.Q6J("ngIf",e.form.controls.group),t.xp6(1),t.Q6J("ngIf",e.form.controls.unit_price),t.xp6(1),t.Q6J("ngIf",e.form.controls.multiple)}}function je(a,s){if(1&a){const e=t.EpF();t.TgZ(0,"footer",17)(1,"button",18),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.saveChanges())}),t._uU(2," Save "),t.qZA()()}if(2&a){const e=t.oxw();t.xp6(1),t.Q6J("disabled",!e.form.dirty)}}function Ye(a,s){1&a&&(t.TgZ(0,"div",19),t._UZ(1,"mat-spinner",20),t.TgZ(2,"p"),t._uU(3,"Saving catering item option..."),t.qZA()())}function Ve(a,s){if(1&a&&(t.TgZ(0,"mat-option",21),t._uU(1),t.qZA()),2&a){const e=s.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e," ")}}let Lt=(()=>{class a{get option(){return this._data.option}get types(){return this._data.types||[]}constructor(e){this._data=e,this.event=new t.vpe,this.form=new m.cw({name:new m.NI(this.option.name||"",[m.kI.required]),group:new m.NI(this.option.group||"",[m.kI.required]),unit_price:new m.NI(this.option.unit_price),multiple:new m.NI(!!this.option.multiple,[])}),this.loading=!1}saveChanges(){this.loading=!0;const e={...this.option,id:this.option.id||`option-${(0,Rt.Iy)(99999999)}`,...this.form.value};this.event.emit({reason:"done",metadata:{item:new y.U({...this._data.parent,options:this._data.parent.options.filter(n=>n.id!==e.id).concat([e])})}})}static#t=this.\u0275fac=function(n){return new(n||a)(t.Y36(M.WI))};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["catering-option-modal"]],outputs:{event:"event"},decls:11,vars:6,consts:[["icon","","mat-dialog-close","",4,"ngIf"],["class","p-4 overflow-auto max-h-[65vh]",3,"formGroup",4,"ngIf","ngIfElse"],["class","flex p-2 items-center justify-center border-t border-solid border-base-200",4,"ngIf"],["load_state",""],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["icon","","mat-dialog-close",""],[1,"p-4","overflow-auto","max-h-[65vh]",3,"formGroup"],["class","flex flex-col",4,"ngIf"],[1,"flex","flex-col"],["for","title"],["appearance","outline"],["matInput","","name","name","placeholder","Item name","formControlName","name"],["for","group"],["matInput","","name","group","placeholder","Type of option e.g. Number of sugars","formControlName","group",3,"matAutocomplete"],["matInput","","name","unit-price","type","number","placeholder","Unit Price","formControlName","unit_price"],["name","multiple","formControlName","multiple"],[1,"flex","p-2","items-center","justify-center","border-t","border-solid","border-base-200"],["btn","","matRipple","",3,"disabled","click"],["loading","",1,"flex","flex-col","items-center","p-8","space-y-2","w-64"],["diameter","32"],[3,"value"]],template:function(n,i){if(1&n&&(t.TgZ(0,"header")(1,"h3"),t._uU(2),t.qZA(),t.YNc(3,Je,3,0,"button",0),t.qZA(),t.YNc(4,He,5,5,"form",1)(5,je,3,1,"footer",2)(6,Ye,4,0,"ng-template",null,3,t.W1O),t.TgZ(8,"mat-autocomplete",null,4),t.YNc(10,Ve,2,2,"mat-option",5),t.qZA()),2&n){const o=t.MAs(7);t.xp6(2),t.hij("",i.option.id?"Edit":"Add"," Item Option"),t.xp6(1),t.Q6J("ngIf",!i.loading),t.xp6(1),t.Q6J("ngIf",i.form&&!i.loading)("ngIfElse",o),t.xp6(1),t.Q6J("ngIf",!i.loading),t.xp6(5),t.Q6J("ngForOf",i.types)}},dependencies:[_.sg,_.O5,lt.XC,b.ey,lt.ZL,M.ZT,B.oG,m._Y,m.Fj,m.wV,m.JJ,m.JL,m.sg,m.u,x.o,O.KE,O.TO,b.wG,q.Nt,N.Ou]})}return a})();var We=l(5077),Z=l(5688),Nt=l(7508),Ft=l(7072),Dt=l(227),St=l(4562);function Ut(a,s,e){let n=!0;for(const i of s)if(a.category===i.name||a.tags.includes(i.name)||e.resources.find(o=>o.zones.includes(i.name))||e.space?.zones.includes(i.name)||"*"===i.name){let o=0;for(const r of i.rules){const c=new Date(e.date);switch(r[0]){case"is_before":o+=(0,Nt.Z)(Date.now(),(0,Ft.Z)(c,r[1]))?1:0;break;case"within_hours":o+=(0,Dt.Z)(Date.now(),(0,Ft.Z)(c,r[1]))?1:0;break;case"after_hour":o+=(0,Dt.Z)(c,(0,St.Z)(c,r[1]))?1:0;break;case"before_hour":o+=(0,Nt.Z)(c,(0,St.Z)(c,r[1]))?1:0;break;case"min_length":o+=e.duration>=(0,g.H1)(r[1])?1:0;break;case"max_length":o+=e.duration<=(0,g.H1)(r[1])?1:0;break;case"visitor_type":o+=e.ext("visitor_type")===r[1]?1:0;break;default:o+=1}}n=o>=i.rules.length}return n}var nt=l(3517),Ke=l(6787),Pt=l(3170),xt=l(4565),it=l(4646),_t=l(2484),Tt=l(3190),yt=l(9718),Xe=l(506),tn=l(2330),en=l(3166),wt=l(1062),nn=l(5083),at=l(3303),an=l(1063),I=l(2501),R=l(5998),qt=l(1706),Mt=l(3274);function on(a,s){}const rn=a=>({animationDuration:a}),sn=(a,s)=>({value:a,params:s});function cn(a,s){1&a&&t.Hsn(0)}const Jt=["*"],ln=["tabListContainer"],dn=["tabList"],mn=["tabListInner"],_n=["nextPaginator"],pn=["previousPaginator"],un=["tabBodyWrapper"],gn=["tabHeader"];function hn(a,s){}function fn(a,s){if(1&a&&t.YNc(0,hn,0,0,"ng-template",10),2&a){const e=t.oxw().$implicit;t.Q6J("cdkPortalOutlet",e.templateLabel)}}function bn(a,s){if(1&a&&t._uU(0),2&a){const e=t.oxw().$implicit;t.Oqu(e.textLabel)}}function vn(a,s){if(1&a){const e=t.EpF();t.TgZ(0,"div",4,5),t.NdJ("click",function(){const i=t.CHM(e),o=i.$implicit,r=i.$index,c=t.oxw(),d=t.MAs(1);return t.KtG(c._handleClick(o,d,r))})("cdkFocusChange",function(i){const r=t.CHM(e).$index,c=t.oxw();return t.KtG(c._tabFocusChanged(i,r))}),t._UZ(2,"span",6)(3,"div",7),t.TgZ(4,"span",8)(5,"span",9),t.YNc(6,fn,1,1,null,10)(7,bn,1,1),t.qZA()()()}if(2&a){const e=s.$implicit,n=s.$index,i=t.MAs(1),o=t.oxw();t.ekj("mdc-tab--active",o.selectedIndex===n),t.Q6J("id",o._getTabLabelId(n))("ngClass",e.labelClass)("disabled",e.disabled)("fitInkBarToContent",o.fitInkBarToContent),t.uIk("tabIndex",o._getTabIndex(n))("aria-posinset",n+1)("aria-setsize",o._tabs.length)("aria-controls",o._getTabContentId(n))("aria-selected",o.selectedIndex===n)("aria-label",e.ariaLabel||null)("aria-labelledby",!e.ariaLabel&&e.ariaLabelledby?e.ariaLabelledby:null),t.xp6(3),t.Q6J("matRippleTrigger",i)("matRippleDisabled",e.disabled||o.disableRipple),t.xp6(3),t.um2(6,e.templateLabel?6:7)}}function Cn(a,s){if(1&a){const e=t.EpF();t.TgZ(0,"mat-tab-body",11),t.NdJ("_onCentered",function(){t.CHM(e);const i=t.oxw();return t.KtG(i._removeTabBodyWrapperHeight())})("_onCentering",function(i){t.CHM(e);const o=t.oxw();return t.KtG(o._setTabBodyWrapperHeight(i))}),t.qZA()}if(2&a){const e=s.$implicit,n=s.$index,i=t.oxw();t.ekj("mat-mdc-tab-body-active",i.selectedIndex===n),t.Q6J("id",i._getTabContentId(n))("ngClass",e.bodyClass)("content",e.content)("position",e.position)("origin",e.origin)("animationDuration",i.animationDuration)("preserveContent",i.preserveContent),t.uIk("tabindex",null!=i.contentTabIndex&&i.selectedIndex===n?i.contentTabIndex:null)("aria-labelledby",i._getTabLabelId(n))("aria-hidden",i.selectedIndex!==n)}}const xn={translateTab:(0,I.X$)("translateTab",[(0,I.SB)("center, void, left-origin-center, right-origin-center",(0,I.oB)({transform:"none"})),(0,I.SB)("left",(0,I.oB)({transform:"translate3d(-100%, 0, 0)",minHeight:"1px",visibility:"hidden"})),(0,I.SB)("right",(0,I.oB)({transform:"translate3d(100%, 0, 0)",minHeight:"1px",visibility:"hidden"})),(0,I.eR)("* => left, * => right, left => center, right => center",(0,I.jt)("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")),(0,I.eR)("void => left-origin-center",[(0,I.oB)({transform:"translate3d(-100%, 0, 0)",visibility:"hidden"}),(0,I.jt)("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")]),(0,I.eR)("void => right-origin-center",[(0,I.oB)({transform:"translate3d(100%, 0, 0)",visibility:"hidden"}),(0,I.jt)("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")])])};let Tn=(()=>{class a extends nt.Pl{constructor(e,n,i,o){super(e,n,o),this._host=i,this._centeringSub=it.w.EMPTY,this._leavingSub=it.w.EMPTY}ngOnInit(){super.ngOnInit(),this._centeringSub=this._host._beforeCentering.pipe((0,wt.O)(this._host._isCenterPosition(this._host._position))).subscribe(e=>{e&&!this.hasAttached()&&this.attach(this._host._content)}),this._leavingSub=this._host._afterLeavingCenter.subscribe(()=>{this._host.preserveContent||this.detach()})}ngOnDestroy(){super.ngOnDestroy(),this._centeringSub.unsubscribe(),this._leavingSub.unsubscribe()}static#t=this.\u0275fac=function(n){return new(n||a)(t.Y36(t._Vd),t.Y36(t.s_b),t.Y36((0,t.Gpc)(()=>Bt)),t.Y36(_.K0))};static#e=this.\u0275dir=t.lG2({type:a,selectors:[["","matTabBodyHost",""]],features:[t.qOj]})}return a})(),Bt=(()=>{class a{set position(e){this._positionIndex=e,this._computePositionAnimationState()}constructor(e,n,i){this._elementRef=e,this._dir=n,this._dirChangeSubscription=it.w.EMPTY,this._translateTabComplete=new _t.xQ,this._onCentering=new t.vpe,this._beforeCentering=new t.vpe,this._afterLeavingCenter=new t.vpe,this._onCentered=new t.vpe(!0),this.animationDuration="500ms",this.preserveContent=!1,n&&(this._dirChangeSubscription=n.change.subscribe(o=>{this._computePositionAnimationState(o),i.markForCheck()})),this._translateTabComplete.pipe((0,nn.x)((o,r)=>o.fromState===r.fromState&&o.toState===r.toState)).subscribe(o=>{this._isCenterPosition(o.toState)&&this._isCenterPosition(this._position)&&this._onCentered.emit(),this._isCenterPosition(o.fromState)&&!this._isCenterPosition(this._position)&&this._afterLeavingCenter.emit()})}ngOnInit(){"center"==this._position&&null!=this.origin&&(this._position=this._computePositionFromOrigin(this.origin))}ngOnDestroy(){this._dirChangeSubscription.unsubscribe(),this._translateTabComplete.complete()}_onTranslateTabStarted(e){const n=this._isCenterPosition(e.toState);this._beforeCentering.emit(n),n&&this._onCentering.emit(this._elementRef.nativeElement.clientHeight)}_getLayoutDirection(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}_isCenterPosition(e){return"center"==e||"left-origin-center"==e||"right-origin-center"==e}_computePositionAnimationState(e=this._getLayoutDirection()){this._position=this._positionIndex<0?"ltr"==e?"left":"right":this._positionIndex>0?"ltr"==e?"right":"left":"center"}_computePositionFromOrigin(e){const n=this._getLayoutDirection();return"ltr"==n&&e<=0||"rtl"==n&&e>0?"left-origin-center":"right-origin-center"}static#t=this.\u0275fac=function(n){return new(n||a)(t.Y36(t.SBq),t.Y36(xt.Is,8),t.Y36(t.sBO))};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["mat-tab-body"]],viewQuery:function(n,i){if(1&n&&t.Gf(nt.Pl,5),2&n){let o;t.iGM(o=t.CRH())&&(i._portalHost=o.first)}},hostAttrs:[1,"mat-mdc-tab-body"],inputs:{_content:["content","_content"],origin:"origin",animationDuration:"animationDuration",preserveContent:"preserveContent",position:"position"},outputs:{_onCentering:"_onCentering",_beforeCentering:"_beforeCentering",_afterLeavingCenter:"_afterLeavingCenter",_onCentered:"_onCentered"},decls:3,vars:6,consts:[["cdkScrollable","",1,"mat-mdc-tab-body-content"],["content",""],["matTabBodyHost",""]],template:function(n,i){1&n&&(t.TgZ(0,"div",0,1),t.NdJ("@translateTab.start",function(r){return i._onTranslateTabStarted(r)})("@translateTab.done",function(r){return i._translateTabComplete.next(r)}),t.YNc(2,on,0,0,"ng-template",2),t.qZA()),2&n&&t.Q6J("@translateTab",t.WLB(3,sn,i._position,t.VKq(1,rn,i.animationDuration)))},dependencies:[Tn],styles:['.mat-mdc-tab-body{top:0;left:0;right:0;bottom:0;position:absolute;display:block;overflow:hidden;outline:0;flex-basis:100%}.mat-mdc-tab-body.mat-mdc-tab-body-active{position:relative;overflow-x:hidden;overflow-y:auto;z-index:1;flex-grow:1}.mat-mdc-tab-group.mat-mdc-tab-group-dynamic-height .mat-mdc-tab-body.mat-mdc-tab-body-active{overflow-y:hidden}.mat-mdc-tab-body-content{height:100%;overflow:auto}.mat-mdc-tab-group-dynamic-height .mat-mdc-tab-body-content{overflow:hidden}.mat-mdc-tab-body-content[style*="visibility: hidden"]{display:none}'],encapsulation:2,data:{animation:[xn.translateTab]}})}return a})();const yn=new t.OlP("MatTabContent");let wn=(()=>{class a{constructor(e){this.template=e}static#t=this.\u0275fac=function(n){return new(n||a)(t.Y36(t.Rgc))};static#e=this.\u0275dir=t.lG2({type:a,selectors:[["","matTabContent",""]],features:[t._Bn([{provide:yn,useExisting:a}])]})}return a})();const Mn=new t.OlP("MatTabLabel"),Gt=new t.OlP("MAT_TAB");let Zn=(()=>{class a extends nt.ig{constructor(e,n,i){super(e,n),this._closestTab=i}static#t=this.\u0275fac=function(n){return new(n||a)(t.Y36(t.Rgc),t.Y36(t.s_b),t.Y36(Gt,8))};static#e=this.\u0275dir=t.lG2({type:a,selectors:[["","mat-tab-label",""],["","matTabLabel",""]],features:[t._Bn([{provide:Mn,useExisting:a}]),t.qOj]})}return a})();const Zt="mdc-tab-indicator--active",Qt="mdc-tab-indicator--no-transition";class In{constructor(s){this._items=s}hide(){this._items.forEach(s=>s.deactivateInkBar())}alignToElement(s){const e=this._items.find(i=>i.elementRef.nativeElement===s),n=this._currentItem;if(e!==n&&(n?.deactivateInkBar(),e)){const i=n?.elementRef.nativeElement.getBoundingClientRect?.();e.activateInkBar(i),this._currentItem=e}}}function kn(a){return class extends a{constructor(...s){super(...s),this._fitToContent=!1}get fitInkBarToContent(){return this._fitToContent}set fitInkBarToContent(s){const e=(0,R.Ig)(s);this._fitToContent!==e&&(this._fitToContent=e,this._inkBarElement&&this._appendInkBarElement())}activateInkBar(s){const e=this.elementRef.nativeElement;if(!s||!e.getBoundingClientRect||!this._inkBarContentElement)return void e.classList.add(Zt);const n=e.getBoundingClientRect(),i=s.width/n.width,o=s.left-n.left;e.classList.add(Qt),this._inkBarContentElement.style.setProperty("transform",`translateX(${o}px) scaleX(${i})`),e.getBoundingClientRect(),e.classList.remove(Qt),e.classList.add(Zt),this._inkBarContentElement.style.setProperty("transform","")}deactivateInkBar(){this.elementRef.nativeElement.classList.remove(Zt)}ngOnInit(){this._createInkBarElement()}ngOnDestroy(){this._inkBarElement?.remove(),this._inkBarElement=this._inkBarContentElement=null}_createInkBarElement(){const s=this.elementRef.nativeElement.ownerDocument||document;this._inkBarElement=s.createElement("span"),this._inkBarContentElement=s.createElement("span"),this._inkBarElement.className="mdc-tab-indicator",this._inkBarContentElement.className="mdc-tab-indicator__content mdc-tab-indicator__content--underline",this._inkBarElement.appendChild(this._inkBarContentElement),this._appendInkBarElement()}_appendInkBarElement(){(this._fitToContent?this.elementRef.nativeElement.querySelector(".mdc-tab__content"):this.elementRef.nativeElement).appendChild(this._inkBarElement)}}}const On=kn((0,b.Id)(class{}));let $t=(()=>{class a extends On{constructor(e){super(),this.elementRef=e}focus(){this.elementRef.nativeElement.focus()}getOffsetLeft(){return this.elementRef.nativeElement.offsetLeft}getOffsetWidth(){return this.elementRef.nativeElement.offsetWidth}static#t=this.\u0275fac=function(n){return new(n||a)(t.Y36(t.SBq))};static#e=this.\u0275dir=t.lG2({type:a,selectors:[["","matTabLabelWrapper",""]],hostVars:3,hostBindings:function(n,i){2&n&&(t.uIk("aria-disabled",!!i.disabled),t.ekj("mat-mdc-tab-disabled",i.disabled))},inputs:{disabled:"disabled",fitInkBarToContent:"fitInkBarToContent"},features:[t.qOj]})}return a})();const En=(0,b.Id)(class{}),Ht=new t.OlP("MAT_TAB_GROUP");let It=(()=>{class a extends En{get templateLabel(){return this._templateLabel}set templateLabel(e){this._setTemplateLabelInput(e)}get content(){return this._contentPortal}constructor(e,n){super(),this._viewContainerRef=e,this._closestTabGroup=n,this._explicitContent=void 0,this.textLabel="",this._contentPortal=null,this._stateChanges=new _t.xQ,this.position=null,this.origin=null,this.isActive=!1}ngOnChanges(e){(e.hasOwnProperty("textLabel")||e.hasOwnProperty("disabled"))&&this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}ngOnInit(){this._contentPortal=new nt.UE(this._explicitContent||this._implicitContent,this._viewContainerRef)}_setTemplateLabelInput(e){e&&e._closestTab===this&&(this._templateLabel=e)}static#t=this.\u0275fac=function(n){return new(n||a)(t.Y36(t.s_b),t.Y36(Ht,8))};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["mat-tab"]],contentQueries:function(n,i,o){if(1&n&&(t.Suo(o,Zn,5),t.Suo(o,wn,7,t.Rgc)),2&n){let r;t.iGM(r=t.CRH())&&(i.templateLabel=r.first),t.iGM(r=t.CRH())&&(i._explicitContent=r.first)}},viewQuery:function(n,i){if(1&n&&t.Gf(t.Rgc,7),2&n){let o;t.iGM(o=t.CRH())&&(i._implicitContent=o.first)}},inputs:{disabled:"disabled",textLabel:["label","textLabel"],ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],labelClass:"labelClass",bodyClass:"bodyClass"},exportAs:["matTab"],features:[t._Bn([{provide:Gt,useExisting:a}]),t.qOj,t.TTD],ngContentSelectors:Jt,decls:1,vars:0,template:function(n,i){1&n&&(t.F$t(),t.YNc(0,cn,1,0,"ng-template"))},encapsulation:2})}return a})();const jt=(0,Mt.i$)({passive:!0});let Nn=(()=>{class a{get disablePagination(){return this._disablePagination}set disablePagination(e){this._disablePagination=(0,R.Ig)(e)}get selectedIndex(){return this._selectedIndex}set selectedIndex(e){e=(0,R.su)(e),this._selectedIndex!=e&&(this._selectedIndexChanged=!0,this._selectedIndex=e,this._keyManager&&this._keyManager.updateActiveItem(e))}constructor(e,n,i,o,r,c,d){this._elementRef=e,this._changeDetectorRef=n,this._viewportRuler=i,this._dir=o,this._ngZone=r,this._platform=c,this._animationMode=d,this._scrollDistance=0,this._selectedIndexChanged=!1,this._destroyed=new _t.xQ,this._showPaginationControls=!1,this._disableScrollAfter=!0,this._disableScrollBefore=!0,this._stopScrolling=new _t.xQ,this._disablePagination=!1,this._selectedIndex=0,this.selectFocusedIndex=new t.vpe,this.indexFocused=new t.vpe,r.runOutsideAngular(()=>{(0,Tt.R)(e.nativeElement,"mouseleave").pipe((0,at.R)(this._destroyed)).subscribe(()=>{this._stopInterval()})})}ngAfterViewInit(){(0,Tt.R)(this._previousPaginator.nativeElement,"touchstart",jt).pipe((0,at.R)(this._destroyed)).subscribe(()=>{this._handlePaginatorPress("before")}),(0,Tt.R)(this._nextPaginator.nativeElement,"touchstart",jt).pipe((0,at.R)(this._destroyed)).subscribe(()=>{this._handlePaginatorPress("after")})}ngAfterContentInit(){const e=this._dir?this._dir.change:(0,Q.of)("ltr"),n=this._viewportRuler.change(150),i=()=>{this.updatePagination(),this._alignInkBarToSelectedTab()};this._keyManager=new Pt.Em(this._items).withHorizontalOrientation(this._getLayoutDirection()).withHomeAndEnd().withWrap().skipPredicate(()=>!1),this._keyManager.updateActiveItem(this._selectedIndex),this._ngZone.onStable.pipe((0,H.q)(1)).subscribe(i),(0,yt.T)(e,n,this._items.changes,this._itemsResized()).pipe((0,at.R)(this._destroyed)).subscribe(()=>{this._ngZone.run(()=>{Promise.resolve().then(()=>{this._scrollDistance=Math.max(0,Math.min(this._getMaxScrollDistance(),this._scrollDistance)),i()})}),this._keyManager.withHorizontalOrientation(this._getLayoutDirection())}),this._keyManager.change.subscribe(o=>{this.indexFocused.emit(o),this._setTabFocus(o)})}_itemsResized(){return"function"!=typeof ResizeObserver?Xe.E:this._items.changes.pipe((0,wt.O)(this._items),(0,$.w)(e=>new tn.y(n=>this._ngZone.runOutsideAngular(()=>{const i=new ResizeObserver(o=>n.next(o));return e.forEach(o=>i.observe(o.elementRef.nativeElement)),()=>{i.disconnect()}}))),(0,an.T)(1),(0,X.h)(e=>e.some(n=>n.contentRect.width>0&&n.contentRect.height>0)))}ngAfterContentChecked(){this._tabLabelCount!=this._items.length&&(this.updatePagination(),this._tabLabelCount=this._items.length,this._changeDetectorRef.markForCheck()),this._selectedIndexChanged&&(this._scrollToLabel(this._selectedIndex),this._checkScrollingControls(),this._alignInkBarToSelectedTab(),this._selectedIndexChanged=!1,this._changeDetectorRef.markForCheck()),this._scrollDistanceChanged&&(this._updateTabScrollPosition(),this._scrollDistanceChanged=!1,this._changeDetectorRef.markForCheck())}ngOnDestroy(){this._keyManager?.destroy(),this._destroyed.next(),this._destroyed.complete(),this._stopScrolling.complete()}_handleKeydown(e){if(!(0,J.Vb)(e))switch(e.keyCode){case J.K5:case J.L_:if(this.focusIndex!==this.selectedIndex){const n=this._items.get(this.focusIndex);n&&!n.disabled&&(this.selectFocusedIndex.emit(this.focusIndex),this._itemSelected(e))}break;default:this._keyManager.onKeydown(e)}}_onContentChanges(){const e=this._elementRef.nativeElement.textContent;e!==this._currentTextContent&&(this._currentTextContent=e||"",this._ngZone.run(()=>{this.updatePagination(),this._alignInkBarToSelectedTab(),this._changeDetectorRef.markForCheck()}))}updatePagination(){this._checkPaginationEnabled(),this._checkScrollingControls(),this._updateTabScrollPosition()}get focusIndex(){return this._keyManager?this._keyManager.activeItemIndex:0}set focusIndex(e){!this._isValidIndex(e)||this.focusIndex===e||!this._keyManager||this._keyManager.setActiveItem(e)}_isValidIndex(e){return!this._items||!!this._items.toArray()[e]}_setTabFocus(e){if(this._showPaginationControls&&this._scrollToLabel(e),this._items&&this._items.length){this._items.toArray()[e].focus();const n=this._tabListContainer.nativeElement;n.scrollLeft="ltr"==this._getLayoutDirection()?0:n.scrollWidth-n.offsetWidth}}_getLayoutDirection(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}_updateTabScrollPosition(){if(this.disablePagination)return;const e=this.scrollDistance,n="ltr"===this._getLayoutDirection()?-e:e;this._tabList.nativeElement.style.transform=`translateX(${Math.round(n)}px)`,(this._platform.TRIDENT||this._platform.EDGE)&&(this._tabListContainer.nativeElement.scrollLeft=0)}get scrollDistance(){return this._scrollDistance}set scrollDistance(e){this._scrollTo(e)}_scrollHeader(e){return this._scrollTo(this._scrollDistance+("before"==e?-1:1)*this._tabListContainer.nativeElement.offsetWidth/3)}_handlePaginatorClick(e){this._stopInterval(),this._scrollHeader(e)}_scrollToLabel(e){if(this.disablePagination)return;const n=this._items?this._items.toArray()[e]:null;if(!n)return;const i=this._tabListContainer.nativeElement.offsetWidth,{offsetLeft:o,offsetWidth:r}=n.elementRef.nativeElement;let c,d;"ltr"==this._getLayoutDirection()?(c=o,d=c+r):(d=this._tabListInner.nativeElement.offsetWidth-o,c=d-r);const p=this.scrollDistance,h=this.scrollDistance+i;c<p?this.scrollDistance-=p-c:d>h&&(this.scrollDistance+=Math.min(d-h,c-p))}_checkPaginationEnabled(){if(this.disablePagination)this._showPaginationControls=!1;else{const e=this._tabListInner.nativeElement.scrollWidth>this._elementRef.nativeElement.offsetWidth;e||(this.scrollDistance=0),e!==this._showPaginationControls&&this._changeDetectorRef.markForCheck(),this._showPaginationControls=e}}_checkScrollingControls(){this.disablePagination?this._disableScrollAfter=this._disableScrollBefore=!0:(this._disableScrollBefore=0==this.scrollDistance,this._disableScrollAfter=this.scrollDistance==this._getMaxScrollDistance(),this._changeDetectorRef.markForCheck())}_getMaxScrollDistance(){return this._tabListInner.nativeElement.scrollWidth-this._tabListContainer.nativeElement.offsetWidth||0}_alignInkBarToSelectedTab(){const e=this._items&&this._items.length?this._items.toArray()[this.selectedIndex]:null,n=e?e.elementRef.nativeElement:null;n?this._inkBar.alignToElement(n):this._inkBar.hide()}_stopInterval(){this._stopScrolling.next()}_handlePaginatorPress(e,n){n&&null!=n.button&&0!==n.button||(this._stopInterval(),(0,en.H)(650,100).pipe((0,at.R)((0,yt.T)(this._stopScrolling,this._destroyed))).subscribe(()=>{const{maxScrollDistance:i,distance:o}=this._scrollHeader(e);(0===o||o>=i)&&this._stopInterval()}))}_scrollTo(e){if(this.disablePagination)return{maxScrollDistance:0,distance:0};const n=this._getMaxScrollDistance();return this._scrollDistance=Math.max(0,Math.min(n,e)),this._scrollDistanceChanged=!0,this._checkScrollingControls(),{maxScrollDistance:n,distance:this._scrollDistance}}static#t=this.\u0275fac=function(n){return new(n||a)(t.Y36(t.SBq),t.Y36(t.sBO),t.Y36(qt.rL),t.Y36(xt.Is,8),t.Y36(t.R0b),t.Y36(Mt.t4),t.Y36(t.QbO,8))};static#e=this.\u0275dir=t.lG2({type:a,inputs:{disablePagination:"disablePagination"}})}return a})(),Fn=(()=>{class a extends Nn{get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=(0,R.Ig)(e)}constructor(e,n,i,o,r,c,d){super(e,n,i,o,r,c,d),this._disableRipple=!1}ngAfterContentInit(){this._inkBar=new In(this._items),super.ngAfterContentInit()}_itemSelected(e){e.preventDefault()}static#t=this.\u0275fac=function(n){return new(n||a)(t.Y36(t.SBq),t.Y36(t.sBO),t.Y36(qt.rL),t.Y36(xt.Is,8),t.Y36(t.R0b),t.Y36(Mt.t4),t.Y36(t.QbO,8))};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["mat-tab-header"]],contentQueries:function(n,i,o){if(1&n&&t.Suo(o,$t,4),2&n){let r;t.iGM(r=t.CRH())&&(i._items=r)}},viewQuery:function(n,i){if(1&n&&(t.Gf(ln,7),t.Gf(dn,7),t.Gf(mn,7),t.Gf(_n,5),t.Gf(pn,5)),2&n){let o;t.iGM(o=t.CRH())&&(i._tabListContainer=o.first),t.iGM(o=t.CRH())&&(i._tabList=o.first),t.iGM(o=t.CRH())&&(i._tabListInner=o.first),t.iGM(o=t.CRH())&&(i._nextPaginator=o.first),t.iGM(o=t.CRH())&&(i._previousPaginator=o.first)}},hostAttrs:[1,"mat-mdc-tab-header"],hostVars:4,hostBindings:function(n,i){2&n&&t.ekj("mat-mdc-tab-header-pagination-controls-enabled",i._showPaginationControls)("mat-mdc-tab-header-rtl","rtl"==i._getLayoutDirection())},inputs:{selectedIndex:"selectedIndex",disableRipple:"disableRipple"},outputs:{selectFocusedIndex:"selectFocusedIndex",indexFocused:"indexFocused"},features:[t.qOj],ngContentSelectors:Jt,decls:13,vars:10,consts:[["aria-hidden","true","type","button","mat-ripple","","tabindex","-1",1,"mat-mdc-tab-header-pagination","mat-mdc-tab-header-pagination-before",3,"matRippleDisabled","disabled","click","mousedown","touchend"],["previousPaginator",""],[1,"mat-mdc-tab-header-pagination-chevron"],[1,"mat-mdc-tab-label-container",3,"keydown"],["tabListContainer",""],["role","tablist",1,"mat-mdc-tab-list",3,"cdkObserveContent"],["tabList",""],[1,"mat-mdc-tab-labels"],["tabListInner",""],["aria-hidden","true","type","button","mat-ripple","","tabindex","-1",1,"mat-mdc-tab-header-pagination","mat-mdc-tab-header-pagination-after",3,"matRippleDisabled","disabled","mousedown","click","touchend"],["nextPaginator",""]],template:function(n,i){1&n&&(t.F$t(),t.TgZ(0,"button",0,1),t.NdJ("click",function(){return i._handlePaginatorClick("before")})("mousedown",function(r){return i._handlePaginatorPress("before",r)})("touchend",function(){return i._stopInterval()}),t._UZ(2,"div",2),t.qZA(),t.TgZ(3,"div",3,4),t.NdJ("keydown",function(r){return i._handleKeydown(r)}),t.TgZ(5,"div",5,6),t.NdJ("cdkObserveContent",function(){return i._onContentChanges()}),t.TgZ(7,"div",7,8),t.Hsn(9),t.qZA()()(),t.TgZ(10,"button",9,10),t.NdJ("mousedown",function(r){return i._handlePaginatorPress("after",r)})("click",function(){return i._handlePaginatorClick("after")})("touchend",function(){return i._stopInterval()}),t._UZ(12,"div",2),t.qZA()),2&n&&(t.ekj("mat-mdc-tab-header-pagination-disabled",i._disableScrollBefore),t.Q6J("matRippleDisabled",i._disableScrollBefore||i.disableRipple)("disabled",i._disableScrollBefore||null),t.xp6(3),t.ekj("_mat-animation-noopable","NoopAnimations"===i._animationMode),t.xp6(7),t.ekj("mat-mdc-tab-header-pagination-disabled",i._disableScrollAfter),t.Q6J("matRippleDisabled",i._disableScrollAfter||i.disableRipple)("disabled",i._disableScrollAfter||null))},dependencies:[b.wG,Ke.wD],styles:[".mat-mdc-tab-header{display:flex;overflow:hidden;position:relative;flex-shrink:0}.mdc-tab-indicator .mdc-tab-indicator__content{transition-duration:var(--mat-tab-animation-duration, 250ms)}.mat-mdc-tab-header-pagination{-webkit-user-select:none;user-select:none;position:relative;display:none;justify-content:center;align-items:center;min-width:32px;cursor:pointer;z-index:2;-webkit-tap-highlight-color:rgba(0,0,0,0);touch-action:none;box-sizing:content-box;background:none;border:none;outline:0;padding:0}.mat-mdc-tab-header-pagination::-moz-focus-inner{border:0}.mat-mdc-tab-header-pagination .mat-ripple-element{opacity:.12;background-color:var(--mat-tab-header-inactive-ripple-color)}.mat-mdc-tab-header-pagination-controls-enabled .mat-mdc-tab-header-pagination{display:flex}.mat-mdc-tab-header-pagination-before,.mat-mdc-tab-header-rtl .mat-mdc-tab-header-pagination-after{padding-left:4px}.mat-mdc-tab-header-pagination-before .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-header-rtl .mat-mdc-tab-header-pagination-after .mat-mdc-tab-header-pagination-chevron{transform:rotate(-135deg)}.mat-mdc-tab-header-rtl .mat-mdc-tab-header-pagination-before,.mat-mdc-tab-header-pagination-after{padding-right:4px}.mat-mdc-tab-header-rtl .mat-mdc-tab-header-pagination-before .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-header-pagination-after .mat-mdc-tab-header-pagination-chevron{transform:rotate(45deg)}.mat-mdc-tab-header-pagination-chevron{border-style:solid;border-width:2px 2px 0 0;height:8px;width:8px;border-color:var(--mat-tab-header-pagination-icon-color)}.mat-mdc-tab-header-pagination-disabled{box-shadow:none;cursor:default;pointer-events:none}.mat-mdc-tab-header-pagination-disabled .mat-mdc-tab-header-pagination-chevron{opacity:.4}.mat-mdc-tab-list{flex-grow:1;position:relative;transition:transform 500ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-mdc-tab-list{transition:none}._mat-animation-noopable span.mdc-tab-indicator__content,._mat-animation-noopable span.mdc-tab__text-label{transition:none}.mat-mdc-tab-label-container{display:flex;flex-grow:1;overflow:hidden;z-index:1}.mat-mdc-tab-labels{display:flex;flex:1 0 auto}[mat-align-tabs=center]>.mat-mdc-tab-header .mat-mdc-tab-labels{justify-content:center}[mat-align-tabs=end]>.mat-mdc-tab-header .mat-mdc-tab-labels{justify-content:flex-end}.mat-mdc-tab::before{margin:5px}.cdk-high-contrast-active .mat-mdc-tab[aria-disabled=true]{color:GrayText}"],encapsulation:2})}return a})();const Dn=new t.OlP("MAT_TABS_CONFIG");let Sn=0;const Un=(0,b.pj)((0,b.Kr)(class{constructor(a){this._elementRef=a}}),"primary");let Yt=(()=>{class a extends Un{get fitInkBarToContent(){return this._fitInkBarToContent}set fitInkBarToContent(e){this._fitInkBarToContent=(0,R.Ig)(e),this._changeDetectorRef.markForCheck()}get stretchTabs(){return this._stretchTabs}set stretchTabs(e){this._stretchTabs=(0,R.Ig)(e)}get dynamicHeight(){return this._dynamicHeight}set dynamicHeight(e){this._dynamicHeight=(0,R.Ig)(e)}get selectedIndex(){return this._selectedIndex}set selectedIndex(e){this._indexToSelect=(0,R.su)(e,null)}get animationDuration(){return this._animationDuration}set animationDuration(e){this._animationDuration=/^\d+$/.test(e+"")?e+"ms":e}get contentTabIndex(){return this._contentTabIndex}set contentTabIndex(e){this._contentTabIndex=(0,R.su)(e,null)}get disablePagination(){return this._disablePagination}set disablePagination(e){this._disablePagination=(0,R.Ig)(e)}get preserveContent(){return this._preserveContent}set preserveContent(e){this._preserveContent=(0,R.Ig)(e)}get backgroundColor(){return this._backgroundColor}set backgroundColor(e){const n=this._elementRef.nativeElement.classList;n.remove("mat-tabs-with-background",`mat-background-${this.backgroundColor}`),e&&n.add("mat-tabs-with-background",`mat-background-${e}`),this._backgroundColor=e}constructor(e,n,i,o){super(e),this._changeDetectorRef=n,this._animationMode=o,this._tabs=new t.n_E,this._indexToSelect=0,this._lastFocusedTabIndex=null,this._tabBodyWrapperHeight=0,this._tabsSubscription=it.w.EMPTY,this._tabLabelSubscription=it.w.EMPTY,this._fitInkBarToContent=!1,this._stretchTabs=!0,this._dynamicHeight=!1,this._selectedIndex=null,this.headerPosition="above",this._disablePagination=!1,this._preserveContent=!1,this.selectedIndexChange=new t.vpe,this.focusChange=new t.vpe,this.animationDone=new t.vpe,this.selectedTabChange=new t.vpe(!0),this._groupId=Sn++,this.animationDuration=i&&i.animationDuration?i.animationDuration:"500ms",this.disablePagination=!(!i||null==i.disablePagination)&&i.disablePagination,this.dynamicHeight=!(!i||null==i.dynamicHeight)&&i.dynamicHeight,this.contentTabIndex=i?.contentTabIndex??null,this.preserveContent=!!i?.preserveContent,this.fitInkBarToContent=!(!i||null==i.fitInkBarToContent)&&i.fitInkBarToContent,this.stretchTabs=!i||null==i.stretchTabs||i.stretchTabs}ngAfterContentChecked(){const e=this._indexToSelect=this._clampTabIndex(this._indexToSelect);if(this._selectedIndex!=e){const n=null==this._selectedIndex;if(!n){this.selectedTabChange.emit(this._createChangeEvent(e));const i=this._tabBodyWrapper.nativeElement;i.style.minHeight=i.clientHeight+"px"}Promise.resolve().then(()=>{this._tabs.forEach((i,o)=>i.isActive=o===e),n||(this.selectedIndexChange.emit(e),this._tabBodyWrapper.nativeElement.style.minHeight="")})}this._tabs.forEach((n,i)=>{n.position=i-e,null!=this._selectedIndex&&0==n.position&&!n.origin&&(n.origin=e-this._selectedIndex)}),this._selectedIndex!==e&&(this._selectedIndex=e,this._lastFocusedTabIndex=null,this._changeDetectorRef.markForCheck())}ngAfterContentInit(){this._subscribeToAllTabChanges(),this._subscribeToTabLabels(),this._tabsSubscription=this._tabs.changes.subscribe(()=>{const e=this._clampTabIndex(this._indexToSelect);if(e===this._selectedIndex){const n=this._tabs.toArray();let i;for(let o=0;o<n.length;o++)if(n[o].isActive){this._indexToSelect=this._selectedIndex=o,this._lastFocusedTabIndex=null,i=n[o];break}!i&&n[e]&&Promise.resolve().then(()=>{n[e].isActive=!0,this.selectedTabChange.emit(this._createChangeEvent(e))})}this._changeDetectorRef.markForCheck()})}_subscribeToAllTabChanges(){this._allTabs.changes.pipe((0,wt.O)(this._allTabs)).subscribe(e=>{this._tabs.reset(e.filter(n=>n._closestTabGroup===this||!n._closestTabGroup)),this._tabs.notifyOnChanges()})}ngOnDestroy(){this._tabs.destroy(),this._tabsSubscription.unsubscribe(),this._tabLabelSubscription.unsubscribe()}realignInkBar(){this._tabHeader&&this._tabHeader._alignInkBarToSelectedTab()}updatePagination(){this._tabHeader&&this._tabHeader.updatePagination()}focusTab(e){const n=this._tabHeader;n&&(n.focusIndex=e)}_focusChanged(e){this._lastFocusedTabIndex=e,this.focusChange.emit(this._createChangeEvent(e))}_createChangeEvent(e){const n=new Pn;return n.index=e,this._tabs&&this._tabs.length&&(n.tab=this._tabs.toArray()[e]),n}_subscribeToTabLabels(){this._tabLabelSubscription&&this._tabLabelSubscription.unsubscribe(),this._tabLabelSubscription=(0,yt.T)(...this._tabs.map(e=>e._stateChanges)).subscribe(()=>this._changeDetectorRef.markForCheck())}_clampTabIndex(e){return Math.min(this._tabs.length-1,Math.max(e||0,0))}_getTabLabelId(e){return`mat-tab-label-${this._groupId}-${e}`}_getTabContentId(e){return`mat-tab-content-${this._groupId}-${e}`}_setTabBodyWrapperHeight(e){if(!this._dynamicHeight||!this._tabBodyWrapperHeight)return;const n=this._tabBodyWrapper.nativeElement;n.style.height=this._tabBodyWrapperHeight+"px",this._tabBodyWrapper.nativeElement.offsetHeight&&(n.style.height=e+"px")}_removeTabBodyWrapperHeight(){const e=this._tabBodyWrapper.nativeElement;this._tabBodyWrapperHeight=e.clientHeight,e.style.height="",this.animationDone.emit()}_handleClick(e,n,i){n.focusIndex=i,e.disabled||(this.selectedIndex=i)}_getTabIndex(e){return e===(this._lastFocusedTabIndex??this.selectedIndex)?0:-1}_tabFocusChanged(e,n){e&&"mouse"!==e&&"touch"!==e&&(this._tabHeader.focusIndex=n)}static#t=this.\u0275fac=function(n){return new(n||a)(t.Y36(t.SBq),t.Y36(t.sBO),t.Y36(Dn,8),t.Y36(t.QbO,8))};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["mat-tab-group"]],contentQueries:function(n,i,o){if(1&n&&t.Suo(o,It,5),2&n){let r;t.iGM(r=t.CRH())&&(i._allTabs=r)}},viewQuery:function(n,i){if(1&n&&(t.Gf(un,5),t.Gf(gn,5)),2&n){let o;t.iGM(o=t.CRH())&&(i._tabBodyWrapper=o.first),t.iGM(o=t.CRH())&&(i._tabHeader=o.first)}},hostAttrs:["ngSkipHydration","",1,"mat-mdc-tab-group"],hostVars:8,hostBindings:function(n,i){2&n&&(t.Udp("--mat-tab-animation-duration",i.animationDuration),t.ekj("mat-mdc-tab-group-dynamic-height",i.dynamicHeight)("mat-mdc-tab-group-inverted-header","below"===i.headerPosition)("mat-mdc-tab-group-stretch-tabs",i.stretchTabs))},inputs:{color:"color",disableRipple:"disableRipple",fitInkBarToContent:"fitInkBarToContent",stretchTabs:["mat-stretch-tabs","stretchTabs"],dynamicHeight:"dynamicHeight",selectedIndex:"selectedIndex",headerPosition:"headerPosition",animationDuration:"animationDuration",contentTabIndex:"contentTabIndex",disablePagination:"disablePagination",preserveContent:"preserveContent",backgroundColor:"backgroundColor"},outputs:{selectedIndexChange:"selectedIndexChange",focusChange:"focusChange",animationDone:"animationDone",selectedTabChange:"selectedTabChange"},exportAs:["matTabGroup"],features:[t._Bn([{provide:Ht,useExisting:a}]),t.qOj],decls:8,vars:5,consts:[[3,"selectedIndex","disableRipple","disablePagination","indexFocused","selectFocusedIndex"],["tabHeader",""],[1,"mat-mdc-tab-body-wrapper"],["tabBodyWrapper",""],["role","tab","matTabLabelWrapper","","cdkMonitorElementFocus","",1,"mdc-tab","mat-mdc-tab","mat-mdc-focus-indicator",3,"id","ngClass","disabled","fitInkBarToContent","click","cdkFocusChange"],["tabNode",""],[1,"mdc-tab__ripple"],["mat-ripple","",1,"mat-mdc-tab-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mdc-tab__content"],[1,"mdc-tab__text-label"],[3,"cdkPortalOutlet"],["role","tabpanel",3,"id","ngClass","content","position","origin","animationDuration","preserveContent","_onCentered","_onCentering"],["class","mdc-tab mat-mdc-tab mat-mdc-focus-indicator","role","tab","matTabLabelWrapper","","cdkMonitorElementFocus","",3,"id","mdc-tab--active","ngClass","disabled","fitInkBarToContent"],["role","tabpanel",3,"id","mat-mdc-tab-body-active","ngClass","content","position","origin","animationDuration","preserveContent"]],template:function(n,i){1&n&&(t.TgZ(0,"mat-tab-header",0,1),t.NdJ("indexFocused",function(r){return i._focusChanged(r)})("selectFocusedIndex",function(r){return i.selectedIndex=r}),t.SjG(2,vn,8,16,"div",12,t.x6l),t.qZA(),t.TgZ(4,"div",2,3),t.SjG(6,Cn,1,12,"mat-tab-body",13,t.x6l),t.qZA()),2&n&&(t.Q6J("selectedIndex",i.selectedIndex||0)("disableRipple",i.disableRipple)("disablePagination",i.disablePagination),t.wJu(2,i._tabs),t.xp6(4),t.ekj("_mat-animation-noopable","NoopAnimations"===i._animationMode),t.wJu(6,i._tabs))},dependencies:[_.mk,nt.Pl,b.wG,Pt.kH,Bt,$t,Fn],styles:['.mdc-tab{min-width:90px;padding-right:24px;padding-left:24px;display:flex;flex:1 0 auto;justify-content:center;box-sizing:border-box;margin:0;padding-top:0;padding-bottom:0;border:none;outline:none;text-align:center;white-space:nowrap;cursor:pointer;-webkit-appearance:none;z-index:1}.mdc-tab::-moz-focus-inner{padding:0;border:0}.mdc-tab[hidden]{display:none}.mdc-tab--min-width{flex:0 1 auto}.mdc-tab__content{display:flex;align-items:center;justify-content:center;height:inherit;pointer-events:none}.mdc-tab__text-label{transition:150ms color linear;display:inline-block;line-height:1;z-index:2}.mdc-tab__icon{transition:150ms color linear;z-index:2}.mdc-tab--stacked .mdc-tab__content{flex-direction:column;align-items:center;justify-content:center}.mdc-tab--stacked .mdc-tab__text-label{padding-top:6px;padding-bottom:4px}.mdc-tab--active .mdc-tab__text-label,.mdc-tab--active .mdc-tab__icon{transition-delay:100ms}.mdc-tab:not(.mdc-tab--stacked) .mdc-tab__icon+.mdc-tab__text-label{padding-left:8px;padding-right:0}[dir=rtl] .mdc-tab:not(.mdc-tab--stacked) .mdc-tab__icon+.mdc-tab__text-label,.mdc-tab:not(.mdc-tab--stacked) .mdc-tab__icon+.mdc-tab__text-label[dir=rtl]{padding-left:0;padding-right:8px}.mdc-tab-indicator{display:flex;position:absolute;top:0;left:0;justify-content:center;width:100%;height:100%;pointer-events:none;z-index:1}.mdc-tab-indicator__content{transform-origin:left;opacity:0}.mdc-tab-indicator__content--underline{align-self:flex-end;box-sizing:border-box;width:100%;border-top-style:solid}.mdc-tab-indicator__content--icon{align-self:center;margin:0 auto}.mdc-tab-indicator--active .mdc-tab-indicator__content{opacity:1}.mdc-tab-indicator .mdc-tab-indicator__content{transition:250ms transform cubic-bezier(0.4, 0, 0.2, 1)}.mdc-tab-indicator--no-transition .mdc-tab-indicator__content{transition:none}.mdc-tab-indicator--fade .mdc-tab-indicator__content{transition:150ms opacity linear}.mdc-tab-indicator--active.mdc-tab-indicator--fade .mdc-tab-indicator__content{transition-delay:100ms}.mat-mdc-tab-ripple{position:absolute;top:0;left:0;bottom:0;right:0;pointer-events:none}.mat-mdc-tab{-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;text-decoration:none;background:none;font-family:var(--mat-tab-header-label-text-font);font-size:var(--mat-tab-header-label-text-size);letter-spacing:var(--mat-tab-header-label-text-tracking);line-height:var(--mat-tab-header-label-text-line-height);font-weight:var(--mat-tab-header-label-text-weight)}.mat-mdc-tab .mdc-tab-indicator__content--underline{border-color:var(--mdc-tab-indicator-active-indicator-color)}.mat-mdc-tab .mdc-tab-indicator__content--underline{border-top-width:var(--mdc-tab-indicator-active-indicator-height)}.mat-mdc-tab .mdc-tab-indicator__content--underline{border-radius:var(--mdc-tab-indicator-active-indicator-shape)}.mat-mdc-tab:not(.mdc-tab--stacked){height:var(--mdc-secondary-navigation-tab-container-height)}.mat-mdc-tab:not(:disabled).mdc-tab--active .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):hover.mdc-tab--active .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):focus.mdc-tab--active .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):active.mdc-tab--active .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:disabled.mdc-tab--active .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):not(.mdc-tab--active) .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):hover:not(.mdc-tab--active) .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):focus:not(.mdc-tab--active) .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):active:not(.mdc-tab--active) .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:disabled:not(.mdc-tab--active) .mdc-tab__icon{fill:currentColor}.mat-mdc-tab.mdc-tab{flex-grow:0}.mat-mdc-tab:hover .mdc-tab__text-label{color:var(--mat-tab-header-inactive-hover-label-text-color)}.mat-mdc-tab:focus .mdc-tab__text-label{color:var(--mat-tab-header-inactive-focus-label-text-color)}.mat-mdc-tab.mdc-tab--active .mdc-tab__text-label{color:var(--mat-tab-header-active-label-text-color)}.mat-mdc-tab.mdc-tab--active .mdc-tab__ripple::before,.mat-mdc-tab.mdc-tab--active .mat-ripple-element{background-color:var(--mat-tab-header-active-ripple-color)}.mat-mdc-tab.mdc-tab--active:hover .mdc-tab__text-label{color:var(--mat-tab-header-active-hover-label-text-color)}.mat-mdc-tab.mdc-tab--active:hover .mdc-tab-indicator__content--underline{border-color:var(--mat-tab-header-active-hover-indicator-color)}.mat-mdc-tab.mdc-tab--active:focus .mdc-tab__text-label{color:var(--mat-tab-header-active-focus-label-text-color)}.mat-mdc-tab.mdc-tab--active:focus .mdc-tab-indicator__content--underline{border-color:var(--mat-tab-header-active-focus-indicator-color)}.mat-mdc-tab.mat-mdc-tab-disabled{opacity:.4;pointer-events:none}.mat-mdc-tab.mat-mdc-tab-disabled .mdc-tab__content{pointer-events:none}.mat-mdc-tab.mat-mdc-tab-disabled .mdc-tab__ripple::before,.mat-mdc-tab.mat-mdc-tab-disabled .mat-ripple-element{background-color:var(--mat-tab-header-disabled-ripple-color)}.mat-mdc-tab .mdc-tab__ripple::before{content:"";display:block;position:absolute;top:0;left:0;right:0;bottom:0;opacity:0;pointer-events:none;background-color:var(--mat-tab-header-inactive-ripple-color)}.mat-mdc-tab .mdc-tab__text-label{color:var(--mat-tab-header-inactive-label-text-color);display:inline-flex;align-items:center}.mat-mdc-tab .mdc-tab__content{position:relative;pointer-events:auto}.mat-mdc-tab:hover .mdc-tab__ripple::before{opacity:.04}.mat-mdc-tab.cdk-program-focused .mdc-tab__ripple::before,.mat-mdc-tab.cdk-keyboard-focused .mdc-tab__ripple::before{opacity:.12}.mat-mdc-tab .mat-ripple-element{opacity:.12;background-color:var(--mat-tab-header-inactive-ripple-color)}.mat-mdc-tab-group.mat-mdc-tab-group-stretch-tabs>.mat-mdc-tab-header .mat-mdc-tab{flex-grow:1}.mat-mdc-tab-group{display:flex;flex-direction:column;max-width:100%}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination{background-color:var(--mat-tab-header-with-background-background-color)}.mat-mdc-tab-group.mat-tabs-with-background.mat-primary>.mat-mdc-tab-header .mat-mdc-tab .mdc-tab__text-label{color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background.mat-primary>.mat-mdc-tab-header .mdc-tab-indicator__content--underline{border-color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background:not(.mat-primary)>.mat-mdc-tab-header .mat-mdc-tab:not(.mdc-tab--active) .mdc-tab__text-label{color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background:not(.mat-primary)>.mat-mdc-tab-header .mat-mdc-tab:not(.mdc-tab--active) .mdc-tab-indicator__content--underline{border-color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-mdc-focus-indicator::before,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mat-mdc-focus-indicator::before{border-color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-ripple-element,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mdc-tab__ripple::before,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mat-ripple-element,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mdc-tab__ripple::before{background-color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mat-mdc-tab-header-pagination-chevron{color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-mdc-tab-group-inverted-header{flex-direction:column-reverse}.mat-mdc-tab-group.mat-mdc-tab-group-inverted-header .mdc-tab-indicator__content--underline{align-self:flex-start}.mat-mdc-tab-body-wrapper{position:relative;overflow:hidden;display:flex;transition:height 500ms cubic-bezier(0.35, 0, 0.25, 1)}.mat-mdc-tab-body-wrapper._mat-animation-noopable{transition:none !important;animation:none !important}'],encapsulation:2})}return a})();class Pn{}var ot=l(702);function qn(a,s){1&a&&(t.TgZ(0,"div",17),t._uU(1," Options Available "),t.qZA())}function Jn(a,s){if(1&a){const e=t.EpF();t.TgZ(0,"a-counter",18),t.NdJ("ngModelChange",function(i){t.CHM(e);const o=t.oxw().$implicit,r=t.oxw(5);return t.KtG(r.updateItemQuantity(o,i))}),t.qZA()}if(2&a){const e=t.oxw().$implicit;t.Q6J("ngModel",e.quantity)}}function Bn(a,s){if(1&a){const e=t.EpF();t.TgZ(0,"div",19)(1,"div",20)(2,"button",21)(3,"app-icon"),t._uU(4,"remove"),t.qZA()()(),t.TgZ(5,"div",22),t._uU(6),t.qZA(),t.TgZ(7,"button",23),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit,o=t.oxw(5);return t.KtG(o.addItem(i))}),t.TgZ(8,"app-icon"),t._uU(9,"add"),t.qZA()()()}if(2&a){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("matTooltip",e.quantity?"Items with options must be removed from order confirmation page":""),t.xp6(1),t.Q6J("disabled",!0),t.xp6(4),t.hij(" ",e.quantity," ")}}function Gn(a,s){if(1&a&&(t.TgZ(0,"div",11)(1,"div",12)(2,"div",12),t._uU(3),t.qZA(),t.YNc(4,qn,2,0,"div",13),t.qZA(),t.TgZ(5,"div",14),t._uU(6),t.ALo(7,"currency"),t.qZA(),t.YNc(8,Jn,1,1,"a-counter",15)(9,Bn,10,3,"div",16),t.qZA()),2&a){const e=s.$implicit,n=t.oxw(5);t.xp6(3),t.hij(" ",e.name," "),t.xp6(1),t.Q6J("ngIf",e.options.length),t.xp6(2),t.hij(" ",t.xi3(7,5,e.unit_price/100,n.code)," "),t.xp6(2),t.Q6J("ngIf",!e.options.length),t.xp6(1),t.Q6J("ngIf",e.options.length)}}const Vt=()=>({});function Qn(a,s){if(1&a&&(t.TgZ(0,"mat-tab",8)(1,"div",9),t.YNc(2,Gn,10,8,"div",10),t.qZA()()),2&a){const e=t.oxw().$implicit,n=t.oxw(3);t.Q6J("label",e),t.xp6(2),t.Q6J("ngForOf",(n.menu_items||t.DdM(2,Vt))[e])}}function $n(a,s){if(1&a&&(t.ynx(0),t.YNc(1,Qn,3,3,"mat-tab",7),t.BQk()),2&a){const e=s.$implicit,n=t.oxw(3);t.xp6(1),t.Q6J("ngIf",(n.menu_items||t.DdM(1,Vt))[e].length)}}function Hn(a,s){if(1&a&&(t.ynx(0),t.TgZ(1,"mat-tab-group"),t.YNc(2,$n,2,2,"ng-container",6),t.qZA(),t.BQk()),2&a){const e=t.oxw(2);t.xp6(2),t.Q6J("ngForOf",e.categories)}}function jn(a,s){if(1&a&&(t.TgZ(0,"div",4),t.YNc(1,Hn,3,1,"ng-container",5),t.qZA()),2&a){const e=t.oxw(),n=t.MAs(5);t.xp6(1),t.Q6J("ngIf",!e.show_order_details)("ngIfElse",n)}}function Yn(a,s){if(1&a){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",26),t._uU(2," Cancel "),t.qZA(),t.TgZ(3,"button",27),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.show_order_details=!0)}),t._uU(4," Confirm "),t.qZA(),t.BQk()}if(2&a){const e=t.oxw(2);t.xp6(3),t.Q6J("disabled",!e.order.item_count)("matBadge",e.order.item_count)("matBadgeHidden",!e.order.item_count)}}function Vn(a,s){if(1&a){const e=t.EpF();t.TgZ(0,"button",28),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.show_order_details=!1)}),t._uU(1," Back "),t.qZA(),t.TgZ(2,"button",29),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.saveOrder())}),t._uU(3," Save Order "),t.qZA()}}function Wn(a,s){if(1&a&&(t.TgZ(0,"footer",24),t.YNc(1,Yn,5,3,"ng-container",5)(2,Vn,4,0,"ng-template",null,25,t.W1O),t.qZA()),2&a){const e=t.MAs(3),n=t.oxw();t.xp6(1),t.Q6J("ngIf",!n.show_order_details)("ngIfElse",e)}}function zn(a,s){if(1&a&&(t.TgZ(0,"div",30),t._UZ(1,"mat-spinner",31),t.TgZ(2,"p"),t._uU(3),t.qZA()()),2&a){const e=t.oxw();t.xp6(3),t.Oqu(e.loading)}}function Kn(a,s){if(1&a&&(t.TgZ(0,"div",35),t._uU(1),t.qZA()),2&a){const e=t.oxw().$implicit,n=t.oxw(2);t.Q6J("matTooltip",n.optionsFor(e)),t.xp6(1),t.AsE(" ",e.options.length," option",1===e.options.length?"":"s"," selected ")}}function Xn(a,s){if(1&a){const e=t.EpF();t.TgZ(0,"div",11)(1,"div",12)(2,"div",12),t._uU(3),t.qZA(),t.YNc(4,Kn,2,3,"div",33),t.qZA(),t.TgZ(5,"div",14),t._uU(6),t.ALo(7,"currency"),t.qZA(),t.TgZ(8,"a-counter",34),t.NdJ("ngModelChange",function(i){const r=t.CHM(e).$implicit,c=t.oxw(2);return t.KtG(c.updateItemQuantity(r,i))}),t.qZA()()}if(2&a){const e=s.$implicit,n=t.oxw(2);t.xp6(3),t.Oqu(e.name),t.xp6(1),t.Q6J("ngIf",e.options.length),t.xp6(2),t.hij(" ",t.xi3(7,4,e.total_cost/100,n.code)," "),t.xp6(2),t.Q6J("ngModel",e.quantity)}}function ti(a,s){if(1&a&&(t.TgZ(0,"header",32)(1,"h3"),t._uU(2,"Confirm Order"),t.qZA()(),t.TgZ(3,"div",9),t.YNc(4,Xn,9,7,"div",10),t.qZA()),2&a){const e=t.oxw();t.xp6(4),t.Q6J("ngForOf",e.order.items)}}let Wt=(()=>{class a extends g.cx{get code(){return this._org.currency_code}constructor(e,n){super(),this._org=e,this._data=n,this.event=new t.vpe,this.loading="",this.menu_items={},this.categories=[],this.loading="Loading menu..."}ngOnInit(){var e=this;return(0,u.Z)(function*(){e.loading="Loading menu...",e.order=new Z.G(e._data.order),e.rules=yield e._data.getCateringConfig(e.order.event?.space?.level?.parent_id),e._data.menu.subscribe(n=>{e.loading="Loading menu...";const i=(0,g.Tw)(n.map(r=>r.category)),o={};for(const r of i)o[r]=n.filter(c=>c.category===r&&Ut(c,e.rules,e.order.event));e.categories=i,e.menu_items=o,e.updateMenuQuantities(),e.timeout("clear_loading",()=>e.loading="",1e3)})})()}addItem(e,n=!0){const i=this.order.items.find(o=>o.id===e.id&&o.options.length===o.options.reduce((r,c)=>r+(e.options.find(d=>c.id===d.id)?1:0),0));n&&e.options?.length?this._data.selectOptions(e.options).then(o=>{const r=new y.U({...e,options:o});this.addItem(r,!1)}):this.order=new Z.G(i?{...this.order,items:this.order.items.filter(o=>!(o.id===e.id&&o.options_string===e.options_string)).concat([new y.U({...e,quantity:i.quantity+1})])}:{...this.order,items:this.order.items.concat([new y.U({...e,quantity:1})])}),this.updateMenuQuantities()}removeItem(e){this.order=new Z.G({...this.order,items:this.order.items.filter(n=>n.id!==e.id&&n.options_string===e.options_string)}),this.updateMenuQuantities()}updateItemQuantity(e,n){const i=this.order.items.find(r=>r.id===e.id&&r.options_string===e.options_string);let o=[...this.order.items];o=i?this.order.items.filter(r=>!(r.id===e.id&&r.options_string===e.options_string)).concat([new y.U({...e,quantity:n})]):this.order.items.concat([new y.U({...e,quantity:n})]),o.sort((r,c)=>r.name.localeCompare(c.name)),this.order=new Z.G({...this.order,items:o}),this.updateMenuQuantities()}updateMenuQuantities(){for(const e in this.menu_items)for(const n of this.menu_items[e])n.quantity=this.order.items.reduce((i,o)=>o.id===n.id?i+o.quantity:i,0)}optionsFor(e){return e.options.map(n=>n.name).join("\n")}saveOrder(){this.event.emit({reason:"done",metadata:{order:this.order}})}confirmOrder(){this.show_order_details=!0}static#t=this.\u0275fac=function(n){return new(n||a)(t.Y36(j.w7),t.Y36(M.WI))};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["app-catering-order-modal"]],outputs:{event:"event"},features:[t.qOj],decls:6,vars:3,consts:[["class","main min-w-[20rem]",4,"ngIf","ngIfElse"],["class","flex items-center justify-center space-x-2 p-2 border-t border-base-200",4,"ngIf"],["load_state",""],["order_details",""],[1,"main","min-w-[20rem]"],[4,"ngIf","ngIfElse"],[4,"ngFor","ngForOf"],[3,"label",4,"ngIf"],[3,"label"],[1,"list"],["item","","class","flex items-center p-2 border-b border-base-200",4,"ngFor","ngForOf"],["item","",1,"flex","items-center","p-2","border-b","border-base-200"],[1,"flex-1","w-1/2"],["class","text-xs no-underline",4,"ngIf"],[1,"bg-primary","text-xs","rounded","px-4","py-2","mx-2","text-white","font-medium"],["ngDefaultControl","",3,"ngModel","ngModelChange",4,"ngIf"],["class","flex items-center",4,"ngIf"],[1,"text-xs","no-underline"],["ngDefaultControl","",3,"ngModel","ngModelChange"],[1,"flex","items-center"],[3,"matTooltip"],["icon","","matRipple","",3,"disabled"],[1,"count","h-12","w-12","flex","items-center","justify-center"],["icon","","matRipple","",3,"click"],[1,"flex","items-center","justify-center","space-x-2","p-2","border-t","border-base-200"],["order_actions",""],["btn","","matRipple","","mat-dialog-close","",1,"inverse"],["confirm","","btn","","matRipple","","matBadgeColor","warn",3,"disabled","matBadge","matBadgeHidden","click"],["matRipple","",1,"inverse",3,"click"],["save","","btn","","matRipple","",3,"click"],[1,"flex","flex-col","w-64","p-8","items-center","space-y-2"],["diameter","32"],[1,"h-[3.25rem]"],["class","text-xs underline",3,"matTooltip",4,"ngIf"],[3,"ngModel","ngModelChange"],[1,"text-xs","underline",3,"matTooltip"]],template:function(n,i){if(1&n&&t.YNc(0,jn,2,2,"div",0)(1,Wn,4,2,"footer",1)(2,zn,4,1,"ng-template",null,2,t.W1O)(4,ti,5,1,"ng-template",null,3,t.W1O),2&n){const o=t.MAs(3);t.Q6J("ngIf",!i.loading)("ngIfElse",o),t.xp6(1),t.Q6J("ngIf",!i.loading)}},dependencies:[_.sg,_.O5,It,Yt,M.ZT,ot.gM,m.Fj,m.JJ,m.On,x.o,b.wG,N.Ou,vt.R,_.H9],styles:[".list[_ngcontent-%COMP%]{height:24em;min-width:32em;max-width:calc(100vw - 1em)}footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:12em}input[_ngcontent-%COMP%]{position:relative;width:100%;padding:1em;border:none;border-radius:0!important;border-top:1px solid #ccc;border-bottom:1px solid #ccc;outline:none;font-size:1em}input[_ngcontent-%COMP%]:focus{border:none;border-top:2px solid var(--s);border-bottom:2px solid var(--s);box-shadow:none}input.error[_ngcontent-%COMP%]::placeholder{color:rgba(var(--error),.45)}\n\n/*# sourceMappingURL=catering-order-modal.component.ts-angular-inline--85.css.map*/"]})}return a})();var Y=l(2106);function ei(a,s){if(1&a&&(t.TgZ(0,"div",18),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&a){const e=t.oxw().$implicit,n=t.oxw(3);t.xp6(1),t.hij(" +",t.xi3(2,1,e.unit_price/100,n.code)," ")}}function ni(a,s){if(1&a&&(t.TgZ(0,"mat-radio-button",14)(1,"div",15)(2,"div",16),t._uU(3),t.qZA(),t.YNc(4,ei,3,4,"div",17),t.qZA()()),2&a){const e=s.$implicit;t.Q6J("value",e.id),t.xp6(3),t.hij(" ",e.name," "),t.xp6(1),t.Q6J("ngIf",e.unit_price)}}function ii(a,s){if(1&a){const e=t.EpF();t.ynx(0),t.TgZ(1,"mat-radio-group",10),t.NdJ("ngModelChange",function(i){t.CHM(e);const o=t.oxw().$implicit,r=t.oxw();return t.KtG(r.updateGroupOption(o,i))}),t.TgZ(2,"mat-radio-button",11)(3,"span",12),t._uU(4,"None"),t.qZA()(),t.YNc(5,ni,5,3,"mat-radio-button",13),t.qZA(),t.BQk()}if(2&a){const e=t.oxw().$implicit;t.xp6(5),t.Q6J("ngForOf",null==e?null:e.options)}}function ai(a,s){if(1&a&&(t.TgZ(0,"div",18),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&a){const e=t.oxw().$implicit,n=t.oxw(3);t.xp6(1),t.hij(" +",t.xi3(2,1,e.unit_price/100,n.code)," ")}}function oi(a,s){if(1&a){const e=t.EpF();t.TgZ(0,"mat-checkbox",20),t.NdJ("ngModelChange",function(i){const r=t.CHM(e).$implicit,c=t.oxw(3);return t.KtG(c.option_state[r.id]=i)}),t.TgZ(1,"div",15)(2,"div",16),t._uU(3),t.qZA(),t.YNc(4,ai,3,4,"div",17),t.qZA()()}if(2&a){const e=s.$implicit,n=t.oxw(3);t.Q6J("ngModel",n.option_state[e.id]),t.xp6(3),t.hij(" ",e.name," "),t.xp6(1),t.Q6J("ngIf",e.unit_price)}}function ri(a,s){if(1&a&&t.YNc(0,oi,5,3,"mat-checkbox",19),2&a){const e=t.oxw().$implicit;t.Q6J("ngForOf",null==e?null:e.options)}}function si(a,s){if(1&a&&(t.TgZ(0,"div",5)(1,"div",6),t._uU(2),t.qZA(),t.TgZ(3,"div",7),t.YNc(4,ii,6,1,"ng-container",8)(5,ri,1,1,"ng-template",null,9,t.W1O),t.qZA()()),2&a){const e=s.$implicit,n=t.MAs(6);t.uIk("group",e.name),t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Q6J("ngIf",!e.multiple)("ngIfElse",n)}}let zt=(()=>{class a{constructor(e){this._data=e,this.event=new t.vpe,this.option_state={},this.code=this._data.code;const n=(0,Rt.Tw)(this._data.options.map(o=>o.group||"Other")),i=[];for(const o of n){const r=this._data.options.filter(c=>c.group===o);i.push({name:o,multiple:!!r.find(c=>c.multiple),options:r})}this.groups=i}updateGroupOption(e,n){for(const i of e.options)this.option_state[i.id]=i.id===n}saveOptions(){const e=this._data.options.filter(n=>this.option_state[n.id]);this.event.emit({reason:"done",metadata:{options:e}})}static#t=this.\u0275fac=function(n){return new(n||a)(t.Y36(M.WI))};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["app-catering-options-modal"]],outputs:{event:"event"},decls:11,vars:1,consts:[["icon","","mat-dialog-close",""],[1,"overflow-auto"],["class","pt-1 pb-2 border-b border-base-200",4,"ngFor","ngForOf"],[1,"p-2"],["btn","","matRipple","",1,"w-32",3,"click"],[1,"pt-1","pb-2","border-b","border-base-200"],[1,"font-medium","p-2","capitalize"],[1,"flex","flex-col","pl-6"],[4,"ngIf","ngIfElse"],["multi_options",""],["aria-label","Select an option","ngModel","",1,"flex","flex-col",3,"ngModelChange"],["value","",1,"my-1","mx-0"],[1,"font-medium","p-2"],["class","my-1 mx-0",3,"value",4,"ngFor","ngForOf"],[1,"my-1","mx-0",3,"value"],[1,"flex","items-center","justify-center"],[1,"font-medium","p-2","flex-1","w-1/2"],["class","opacity-60 text-xs",4,"ngIf"],[1,"opacity-60","text-xs"],[3,"ngModel","ngModelChange",4,"ngFor","ngForOf"],[3,"ngModel","ngModelChange"]],template:function(n,i){1&n&&(t.TgZ(0,"header")(1,"h3"),t._uU(2,"Select options"),t.qZA(),t.TgZ(3,"button",0)(4,"app-icon"),t._uU(5,"close"),t.qZA()()(),t.TgZ(6,"main",1),t.YNc(7,si,7,4,"div",2),t.qZA(),t.TgZ(8,"footer",3)(9,"button",4),t.NdJ("click",function(){return i.saveOptions()}),t._uU(10," Save "),t.qZA()()),2&n&&(t.xp6(7),t.Q6J("ngForOf",i.groups))},dependencies:[_.sg,_.O5,M.ZT,B.oG,Y.VQ,Y.U0,m.JJ,m.On,x.o,b.wG,_.H9],styles:["main[_ngcontent-%COMP%]{min-height:24em;width:24rem;max-width:calc(100vw - 2rem)}\n\n/*# sourceMappingURL=catering-order-options-modal.component.ts-angular-inline--86.css.map*/"]})}return a})();function ci(a,s){1&a&&(t.TgZ(0,"button",4)(1,"app-icon"),t._uU(2,"close"),t.qZA()())}function li(a,s){if(1&a){const e=t.EpF();t.TgZ(0,"main")(1,"div",5)(2,"app-icon",6),t._uU(3,"upload"),t.qZA(),t.TgZ(4,"p"),t._uU(5,"Click to select file or Drag and drop files"),t.qZA(),t.TgZ(6,"input",7),t.NdJ("change",function(i){t.CHM(e);const o=t.oxw();return t.KtG(o.handleFileEvent(i))}),t.qZA()(),t.TgZ(7,"div",8)(8,"button",9),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.downloadTemplate())}),t._uU(9," Download Template "),t.qZA()()()}}function di(a,s){if(1&a&&(t.TgZ(0,"main",10),t._UZ(1,"mat-spinner",11),t.TgZ(2,"p"),t._uU(3),t.qZA()()),2&a){const e=t.oxw();t.xp6(3),t.Oqu(e.loading)}}let Kt=(()=>{class a{constructor(){this.event=new t.vpe}handleFileEvent(e){this.loading="Processing menu data...";const n=e.target;if(!n?.files)return this.loading="";const i=n.files;if(!i.length)return this.loading="";const o=i[0],r=new FileReader;r.addEventListener("loadend",c=>{const p=(0,g.n5)(c.target.result);this.loading="",this.event.emit({reason:"done",metadata:p.filter(h=>"item"===(h.type||"").toLowerCase()).map(h=>new y.U({...h,options:p.filter(f=>"option"===(f.type||"").toLowerCase()&&f.tags===h.id).map(f=>({id:f.id,name:f.name,group:f.category,multiple:f.multiple,unit_price:f.unit_price}))}))})}),r.readAsText(o)}downloadTemplate(){(0,g.Sv)("import-menu-template.csv","ID,Type,Name,Unit Price,Category,Description,Tags,Multiple\nitem-1,item,Coffee,200,Drink,Wake Up,,\noption-1,option,1 Sugar,20,Sugars,,item-1,false")}static#t=this.\u0275fac=function(n){return new(n||a)};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["catering-import-menu-modal"]],outputs:{event:"event"},decls:7,vars:3,consts:[[1,"h-12","bg-primary","flex","items-center","justify-between","px-4"],["icon","","mat-dialog-close","",4,"ngIf"],[4,"ngIf","ngIfElse"],["load_state",""],["icon","","mat-dialog-close",""],[1,"relative","flex","flex-col","items-center","justify-center","space-y-2","h-[24rem]","w-[24rem]","border-4","border-base-200","border-dashed","rounded-xl","hover:bg-base-200","m-4","p-4","cursor-pointer"],[1,"text-4xl"],["type","file",1,"absolute","inset-0","opacity-0",3,"change"],[1,"flex","items-center","justify-center","px-4","pb-4"],["matRipple","",1,"clear","underline","w-48",3,"click"],[1,"flex","flex-col","items-center","justify-center","space-y-2","p-8","h-[24rem]","w-[24rem]"],["diameter","32"]],template:function(n,i){if(1&n&&(t.TgZ(0,"header",0)(1,"h2"),t._uU(2,"Import Catering Menu"),t.qZA(),t.YNc(3,ci,3,0,"button",1),t.qZA(),t.YNc(4,li,10,0,"main",2)(5,di,4,1,"ng-template",null,3,t.W1O)),2&n){const o=t.MAs(6);t.xp6(3),t.Q6J("ngIf",!i.loading),t.xp6(1),t.Q6J("ngIf",!i.loading)("ngIfElse",o)}},dependencies:[_.O5,M.ZT,x.o,b.wG,N.Ou]})}return a})(),pt=(()=>{class a extends g.cx{get is_editable(){return!this.zone||this.zone===this._org.building?.id}get categories(){const e=this._menu.getValue();return(0,g.Tw)(e.map(n=>n.category))}constructor(e,n,i){var o;super(),o=this,this._org=e,this._dialog=n,this._settings=i,this._updated=new T.X(0),this._menu=new T.X([]),this._loading=new T.X(!1),this._currency=new T.X("USD"),this._change=new T.X(0),this.menu=this._menu.asObservable(),this.loading=this._loading.asObservable(),this.currency=this._currency.asObservable(),this.settings=(0,G.aj)([this._org.active_building,this._change]).pipe((0,X.h)(([r])=>!!r),(0,$.w)(([r])=>(0,F.rlq)(r.id,"catering-settings").pipe((0,tt.K)(c=>(0,Q.of)({})))),(0,w.U)(r=>r.details||{}),(0,mt.b)(r=>this._settings.post("require_catering_notes",!!r?.require_notes)),(0,et.d)(1)),this.charge_codes=this.settings.pipe((0,w.U)(r=>r.charge_codes||[])),this.availability=this.settings.pipe((0,w.U)(r=>r.disabled_rooms||[])),this.zone="",this.subscription("building",this._org.active_building.subscribe(function(){var r=(0,u.Z)(function*(c){if(c){const d=(yield o.getCateringForZone(c.id)).map(p=>new y.U(p));o._currency.next(o._settings.get("app.currency")||c.currency||"USD"),o._menu.next(d)}});return function(c){return r.apply(this,arguments)}}()))}manageCateringOrder(e){var n=this;return(0,u.Z)(function*(){const i=n._dialog.open(Wt,{data:{code:n._currency.getValue(),order:e,menu:n.menu,loading:n.loading,getCateringConfig:r=>n.getCateringConfig(r),selectOptions:r=>n.selectOptions(r)}}),o=yield Promise.race([i.componentInstance.event.pipe((0,L.P)(r=>"done"===r.reason)).toPromise(),i.afterClosed().toPromise()]);return i.close(),o?.metadata?.order||e})()}addItem(e=new y.U){var n=this;return(0,u.Z)(function*(){const i=n._dialog.open(Et,{data:{item:e,categories:n.categories}}),o=yield Promise.race([i.componentInstance.event.pipe((0,L.P)(d=>"done"===d.reason)).toPromise(),i.afterClosed().toPromise()]);if("done"!==o?.reason)return;const r=n._menu.getValue(),c=r.findIndex(d=>d.id===e.id);c>=0?r.splice(c,1,o.metadata.item):r.push(o.metadata.item),n.updateMenu(n._org.building.id,r).then(()=>{n._menu.next([...r]),i.close()},()=>i.componentInstance.loading=!1)})()}updateItem(e){const n=this._menu.getValue(),i=n.findIndex(o=>o.id===e.id);i>=0?n.splice(i,1,e):n.push(e),this.updateMenu(this._org.building.id,n).then(()=>this._menu.next([...n]))}addOption(e,n={}){var i=this;return(0,u.Z)(function*(){const o=(0,g.Tw)(e.options.map(h=>h.group)),r=i._dialog.open(Lt,{data:{parent:e,option:n,types:o}}),c=yield Promise.race([r.componentInstance.event.pipe((0,L.P)(h=>"done"===h.reason)).toPromise(),r.afterClosed().toPromise()]);if("done"!==c?.reason)return;const d=i._menu.getValue(),p=d.findIndex(h=>h.id===e.id);p>=0?d.splice(p,1,c.metadata.item):d.push(c.metadata.item),i.updateMenu(i._org.building.id,d).then(()=>{i._menu.next([...d]),r.close()},()=>r.componentInstance.loading=!1)})()}selectOptions(e){var n=this;return(0,u.Z)(function*(){const i=n._dialog.open(zt,{data:{code:n._currency.getValue(),options:e}}),o=yield Promise.race([i.componentInstance.event.pipe((0,L.P)(r=>"done"===r.reason)).toPromise(),i.afterClosed().toPromise()]);return"done"!==o?.reason?[]:(i.close(),o.metadata.options)})()}deleteItem(e){var n=this;return(0,u.Z)(function*(){const i=yield(0,g._5)({title:"Delete Catering Item",content:`Are you sure you wish to remove the catering item ${e.name} from the menu?`,icon:{type:"icon",class:"material-icons",content:"delete"}},n._dialog);if("done"!==i.reason)return;i.loading("Removing catering item...");const o=n._menu.getValue().filter(r=>e.id!==r.id);n.updateMenu(n._org.building.id,o).then(()=>{n._menu.next([...o]),i.close()},()=>i.loading(""))})()}deleteOption(e,n){var i=this;return(0,u.Z)(function*(){const o=yield(0,g._5)({title:"Delete Catering Item Option",content:`Are you sure you wish to remove the catering option "${n.name}" from "${e.name}"?`,icon:{type:"icon",class:"material-icons",content:"delete"}},i._dialog);if("done"!==o.reason)return;o.loading("Removing catering item option...");const r=i._menu.getValue();r.splice(r.findIndex(c=>c.id===e.id),1,new y.U({...e,options:e.options.filter(c=>c.id!==n.id)})),i.updateMenu(i._org.building.id,r).then(()=>{i._menu.next([...r]),o.close()},()=>o.loading(""))})()}editConfig(){var e=this;return(0,u.Z)(function*(){const n=yield e.getCateringConfig(e._org.building.id),{require_notes:i}=yield e.settings.pipe((0,H.q)(1)).toPromise(),o=e._menu.getValue(),r=(0,g.Tw)((0,g.xH)(o.map(p=>[p.category,...p.tags]))),c=e._dialog.open(We.uX,{data:{config:n,types:r,require_notes:i,saveNotes:p=>e.saveSettings({require_notes:p})}}),d=yield Promise.race([c.componentInstance.event.pipe((0,L.P)(p=>"done"===p.reason)).toPromise(),c.afterClosed().toPromise()]);"done"===d?.reason&&e.updateConfig(e._org.building.id,d.metadata).then(()=>c.close(),()=>c.componentInstance.loading=!1)})()}importMenu(){var e=this;return(0,u.Z)(function*(){const n=e._dialog.open(Kt),i=yield Promise.race([n.componentInstance.event.pipe((0,L.P)(d=>"done"===d.reason)).toPromise(),n.afterClosed().toPromise()]);if("done"!==i?.reason)return;n.componentInstance.loading="Updating menu...";const o=e._menu.getValue(),r=e._org.building,c=(0,g.Tw)(i.metadata.concat(o),"id");yield e.updateMenu(r.id,c).catch(d=>{throw(0,g.cB)("Error importing catering menu"),n.close(),d}),(0,g.t5)(`Successfully imported catering menu. ${i.metadata.length} item(s) added.`),n.close()})()}updateMenu(e,n){return(0,F.Ymr)(e,{id:e,name:"catering",details:n,description:`Catering menu for ${e}`}).toPromise()}saveSettings(e){var n=this;return(0,u.Z)(function*(){const i=yield n.settings.pipe((0,H.q)(1)).toPromise(),o=yield(0,F.Ymr)(n._org.building.id,{id:n._org.building.id,name:"catering-settings",details:{...i,...e},description:`Catering settings for ${n._org.building.id}`}).toPromise();return n._change.next(Date.now()),o})()}getCateringForZone(e){return(0,u.Z)(function*(){const n=(yield(0,F.rlq)(e,"catering").toPromise()).details;return n instanceof Array?n:[]})()}getCateringConfig(e=this._org.building.id){return(0,u.Z)(function*(){const n=(yield(0,F.rlq)(e,"catering_config").toPromise()).details;return n instanceof Array?n:[]})()}updateConfig(e,n){return(0,F.Ymr)(e,{id:e,name:"catering_config",details:n,description:`Catering menu config for ${e}`}).toPromise()}addItemToOrder(e,n){let i=e.items;const o=i.find(c=>c.id===n.id&&n.options?.length===c.options?.reduce((d,p)=>d+(n.options.find(h=>p.id===h.id)?1:0),0));return o?o.quantity+=1:i=i.concat([new y.U({...n,quantity:1})]),new Z.G({...e,items:i,event:null})}static#t=this.\u0275fac=function(n){return new(n||a)(t.LFG(j.w7),t.LFG(M.uw),t.LFG(g.gb))};static#e=this.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})();l(8128),l(5933),l(7016),l(4512),l(873),l(4386),l(8975),l(8075),l(1624),l(5822),l(9737);var ce=l(162);function Ja(a,s){if(1&a&&(t.TgZ(0,"mat-option",8),t._uU(1),t.qZA()),2&a){const e=s.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e.name," ")}}l(8442);const Ba=()=>["/welcome"];let Ga=(()=>{class a{constructor(e,n,i){this._router=e,this._checkin=n,this._catering=i,this.menu=this._catering.menu.pipe((0,w.U)(o=>o.filter(r=>r.tags.find(c=>"drink"===c.toLowerCase()||"drinks"===c.toLowerCase()||"beverage"===c.toLowerCase()))))}update(){var e=this;return(0,u.Z)(function*(){return e.beverage?(yield e._checkin.event.pipe((0,L.P)(i=>!!i)).toPromise())?((0,g.t5)("Successfully update event."),void e.next()):(0,g.cB)("Unable to load event data."):e.next()})()}next(){this._router.navigate(["/welcome"])}static#t=this.\u0275fac=function(n){return new(n||a)(t.Y36(k.F0),t.Y36(U),t.Y36(pt))};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["checkin-preferences"]],decls:13,vars:7,consts:[[1,"bg-base-100","rounded","shadow","overflow-hidden","relative","flex","flex-col","items-center","my-4","p-4","mx-auto"],[1,"text-xl","mb-2","w-full"],[1,"w-full"],["appearance","outline",1,"w-full"],["placeholder","Select beverage",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["btn","","matRipple","",1,"w-32",3,"click"],["icon","","matRipple","",1,"absolute","top-0","right-0",3,"routerLink"],[3,"value"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0)(1,"h3",1),t._uU(2,"Would you like a drink?"),t.qZA(),t.TgZ(3,"div",2)(4,"mat-form-field",3)(5,"mat-select",4),t.NdJ("ngModelChange",function(r){return i.beverage=r}),t.YNc(6,Ja,2,2,"mat-option",5),t.ALo(7,"async"),t.qZA()()(),t.TgZ(8,"button",6),t.NdJ("click",function(){return i.update()}),t._uU(9),t.qZA(),t.TgZ(10,"a",7)(11,"app-icon"),t._uU(12,"close"),t.qZA()()()),2&n&&(t.xp6(5),t.Q6J("ngModel",i.beverage),t.xp6(1),t.Q6J("ngForOf",t.lcZ(7,4,i.menu)),t.xp6(3),t.hij(" ",i.beverage?"Update":"Continue"," "),t.xp6(1),t.Q6J("routerLink",t.DdM(6,Ba)))},dependencies:[_.sg,m.JJ,m.On,x.o,b.ey,O.KE,ce.gD,b.wG,k.rH,_.Ov],styles:["[_nghost-%COMP%] > div[_ngcontent-%COMP%]{width:32rem;max-width:calc(100vw - 2rem)}\n\n/*# sourceMappingURL=checkin-preferences.component.ts-angular-inline--94.css.map*/"]})}return a})();const me=(()=>{class a{constructor(e,n,i,o,r){this._legacyCanvasSize=a.DEFAULT_CANVAS_SIZE,this._preferredCamera="environment",this._maxScansPerSecond=25,this._lastScanTimestamp=-1,this._destroyed=this._flashOn=this._paused=this._active=!1,this.$video=e,this.$canvas=document.createElement("canvas"),i&&"object"==typeof i?this._onDecode=n:(console.warn(i||o||r?"You're using a deprecated version of the QrScanner constructor which will be removed in the future":"Note that the type of the scan result passed to onDecode will change in the future. To already switch to the new api today, you can pass returnDetailedScanResult: true."),this._legacyOnDecode=n),this._onDecodeError=(n="object"==typeof i?i:{}).onDecodeError||("function"==typeof i?i:this._onDecodeError),this._calculateScanRegion=n.calculateScanRegion||("function"==typeof o?o:this._calculateScanRegion),this._preferredCamera=n.preferredCamera||r||this._preferredCamera,this._legacyCanvasSize="number"==typeof i?i:"number"==typeof o?o:this._legacyCanvasSize,this._maxScansPerSecond=n.maxScansPerSecond||this._maxScansPerSecond,this._onPlay=this._onPlay.bind(this),this._onLoadedMetaData=this._onLoadedMetaData.bind(this),this._onVisibilityChange=this._onVisibilityChange.bind(this),this._updateOverlay=this._updateOverlay.bind(this),e.disablePictureInPicture=!0,e.playsInline=!0,e.muted=!0;let c=!1;if(e.hidden&&(e.hidden=!1,c=!0),document.body.contains(e)||(document.body.appendChild(e),c=!0),i=e.parentElement,n.highlightScanRegion||n.highlightCodeOutline){if(o=!!n.overlay,this.$overlay=n.overlay||document.createElement("div"),(r=this.$overlay.style).position="absolute",r.display="none",r.pointerEvents="none",this.$overlay.classList.add("scan-region-highlight"),!o&&n.highlightScanRegion){this.$overlay.innerHTML='<svg class="scan-region-highlight-svg" viewBox="0 0 238 238" preserveAspectRatio="none" style="position:absolute;width:100%;height:100%;left:0;top:0;fill:none;stroke:#e9b213;stroke-width:4;stroke-linecap:round;stroke-linejoin:round"><path d="M31 2H10a8 8 0 0 0-8 8v21M207 2h21a8 8 0 0 1 8 8v21m0 176v21a8 8 0 0 1-8 8h-21m-176 0H10a8 8 0 0 1-8-8v-21"/></svg>';try{this.$overlay.firstElementChild.animate({transform:["scale(.98)","scale(1.01)"]},{duration:400,iterations:1/0,direction:"alternate",easing:"ease-in-out"})}catch{}i.insertBefore(this.$overlay,this.$video.nextSibling)}n.highlightCodeOutline&&(this.$overlay.insertAdjacentHTML("beforeend",'<svg class="code-outline-highlight" preserveAspectRatio="none" style="display:none;width:100%;height:100%;fill:none;stroke:#e9b213;stroke-width:5;stroke-dasharray:25;stroke-linecap:round;stroke-linejoin:round"><polygon/></svg>'),this.$codeOutlineHighlight=this.$overlay.lastElementChild)}this._scanRegion=this._calculateScanRegion(e),requestAnimationFrame(()=>{let d=window.getComputedStyle(e);"none"===d.display&&(e.style.setProperty("display","block","important"),c=!0),"visible"!==d.visibility&&(e.style.setProperty("visibility","visible","important"),c=!0),c&&(console.warn("QrScanner has overwritten the video hiding style to avoid Safari stopping the playback."),e.style.opacity="0",e.style.width="0",e.style.height="0",this.$overlay&&this.$overlay.parentElement&&this.$overlay.parentElement.removeChild(this.$overlay),delete this.$overlay,delete this.$codeOutlineHighlight),this.$overlay&&this._updateOverlay()}),e.addEventListener("play",this._onPlay),e.addEventListener("loadedmetadata",this._onLoadedMetaData),document.addEventListener("visibilitychange",this._onVisibilityChange),window.addEventListener("resize",this._updateOverlay),this._qrEnginePromise=a.createQrEngine()}static set WORKER_PATH(e){console.warn("Setting QrScanner.WORKER_PATH is not required and not supported anymore. Have a look at the README for new setup instructions.")}static hasCamera(){return(0,u.Z)(function*(){try{return!!(yield a.listCameras(!1)).length}catch{return!1}})()}static listCameras(e=!1){return(0,u.Z)(function*(){if(!navigator.mediaDevices)return[];let i,n=function(){var o=(0,u.Z)(function*(){return(yield navigator.mediaDevices.enumerateDevices()).filter(r=>"videoinput"===r.kind)});return function(){return o.apply(this,arguments)}}();try{e&&(yield n()).every(o=>!o.label)&&(i=yield navigator.mediaDevices.getUserMedia({audio:!1,video:!0}))}catch{}try{return(yield n()).map((o,r)=>({id:o.deviceId,label:o.label||(0===r?"Default Camera":`Camera ${r+1}`)}))}finally{i&&(console.warn("Call listCameras after successfully starting a QR scanner to avoid creating a temporary video stream"),a._stopVideoStream(i))}})()}hasFlash(){var e=this;return(0,u.Z)(function*(){let n;try{if(e.$video.srcObject){if(!(e.$video.srcObject instanceof MediaStream))return!1;n=e.$video.srcObject}else n=(yield e._getCameraStream()).stream;return"torch"in n.getVideoTracks()[0].getSettings()}catch{return!1}finally{n&&n!==e.$video.srcObject&&(console.warn("Call hasFlash after successfully starting the scanner to avoid creating a temporary video stream"),a._stopVideoStream(n))}})()}isFlashOn(){return this._flashOn}toggleFlash(){var e=this;return(0,u.Z)(function*(){e._flashOn?yield e.turnFlashOff():yield e.turnFlashOn()})()}turnFlashOn(){var e=this;return(0,u.Z)(function*(){if(!e._flashOn&&!e._destroyed&&(e._flashOn=!0,e._active&&!e._paused))try{if(!(yield e.hasFlash()))throw"No flash available";yield e.$video.srcObject.getVideoTracks()[0].applyConstraints({advanced:[{torch:!0}]})}catch(n){throw e._flashOn=!1,n}})()}turnFlashOff(){var e=this;return(0,u.Z)(function*(){e._flashOn&&(e._flashOn=!1,yield e._restartVideoStream())})()}destroy(){this.$video.removeEventListener("loadedmetadata",this._onLoadedMetaData),this.$video.removeEventListener("play",this._onPlay),document.removeEventListener("visibilitychange",this._onVisibilityChange),window.removeEventListener("resize",this._updateOverlay),this._destroyed=!0,this._flashOn=!1,this.stop(),a._postWorkerMessage(this._qrEnginePromise,"close")}start(){var e=this;return(0,u.Z)(function*(){if(e._destroyed)throw Error("The QR scanner can not be started as it had been destroyed.");if((!e._active||e._paused)&&("https:"!==window.location.protocol&&console.warn("The camera stream is only accessible if the page is transferred via https."),e._active=!0,!document.hidden))if(e._paused=!1,e.$video.srcObject)yield e.$video.play();else try{let{stream:n,facingMode:i}=yield e._getCameraStream();!e._active||e._paused?a._stopVideoStream(n):(e._setVideoMirror(i),e.$video.srcObject=n,yield e.$video.play(),e._flashOn&&(e._flashOn=!1,e.turnFlashOn().catch(()=>{})))}catch(n){if(!e._paused)throw e._active=!1,n}})()}stop(){this.pause(),this._active=!1}pause(e=!1){var n=this;return(0,u.Z)(function*(){if(n._paused=!0,!n._active)return!0;n.$video.pause(),n.$overlay&&(n.$overlay.style.display="none");let i=()=>{n.$video.srcObject instanceof MediaStream&&(a._stopVideoStream(n.$video.srcObject),n.$video.srcObject=null)};return e?(i(),!0):(yield new Promise(o=>setTimeout(o,300)),!!n._paused&&(i(),!0))})()}setCamera(e){var n=this;return(0,u.Z)(function*(){e!==n._preferredCamera&&(n._preferredCamera=e,yield n._restartVideoStream())})()}static scanImage(e,n,i,o,r=!1,c=!1){return(0,u.Z)(function*(){let d,p=!1;n&&("scanRegion"in n||"qrEngine"in n||"canvas"in n||"disallowCanvasResizing"in n||"alsoTryWithoutScanRegion"in n||"returnDetailedScanResult"in n)?(d=n.scanRegion,i=n.qrEngine,o=n.canvas,r=n.disallowCanvasResizing||!1,c=n.alsoTryWithoutScanRegion||!1,p=!0):console.warn(n||i||o||r||c?"You're using a deprecated api for scanImage which will be removed in the future.":"Note that the return type of scanImage will change in the future. To already switch to the new api today, you can pass returnDetailedScanResult: true."),n=!!i;try{let h,f,E;if([i,h]=yield Promise.all([i||a.createQrEngine(),a._loadImage(e)]),[o,f]=a._drawToCanvas(h,d,o,r),i instanceof Worker){let v=i;n||a._postWorkerMessageSync(v,"inversionMode","both"),E=yield new Promise((C,A)=>{let P,W,D,ft=-1;W=S=>{S.data.id===ft&&(v.removeEventListener("message",W),v.removeEventListener("error",D),clearTimeout(P),null!==S.data.data?C({data:S.data.data,cornerPoints:a._convertPoints(S.data.cornerPoints,d)}):A(a.NO_QR_CODE_FOUND))},D=S=>{v.removeEventListener("message",W),v.removeEventListener("error",D),clearTimeout(P),A("Scanner error: "+(S?S.message||S:"Unknown Error"))},v.addEventListener("message",W),v.addEventListener("error",D),P=setTimeout(()=>D("timeout"),1e4);let rt=f.getImageData(0,0,o.width,o.height);ft=a._postWorkerMessageSync(v,"decode",rt,[rt.data.buffer])})}else E=yield Promise.race([new Promise((v,C)=>window.setTimeout(()=>C("Scanner error: timeout"),1e4)),(0,u.Z)(function*(){try{var[v]=yield i.detect(o);if(!v)throw a.NO_QR_CODE_FOUND;return{data:v.rawValue,cornerPoints:a._convertPoints(v.cornerPoints,d)}}catch(C){if(/not implemented|service unavailable/.test(v=C.message||C))return a._disableBarcodeDetector=!0,a.scanImage(e,{scanRegion:d,canvas:o,disallowCanvasResizing:r,alsoTryWithoutScanRegion:c});throw`Scanner error: ${v}`}})()]);return p?E:E.data}catch(h){if(!d||!c)throw h;let f=yield a.scanImage(e,{qrEngine:i,canvas:o,disallowCanvasResizing:r});return p?f:f.data}finally{n||a._postWorkerMessage(i,"close")}})()}setGrayscaleWeights(e,n,i,o=!0){a._postWorkerMessage(this._qrEnginePromise,"grayscaleWeights",{red:e,green:n,blue:i,useIntegerApproximation:o})}setInversionMode(e){a._postWorkerMessage(this._qrEnginePromise,"inversionMode",e)}static createQrEngine(e){return(0,u.Z)(function*(){if(e&&console.warn("Specifying a worker path is not required and not supported anymore."),e=()=>l.e("node_modules_qr-scanner_qr-scanner-worker_min_js").then(l.bind(l,2582)).then(i=>i.createWorker()),a._disableBarcodeDetector||!("BarcodeDetector"in window)||!BarcodeDetector.getSupportedFormats||!(yield BarcodeDetector.getSupportedFormats()).includes("qr_code"))return e();let n=navigator.userAgentData;return n&&n.brands.some(({brand:i})=>/Chromium/i.test(i))&&/mac ?OS/i.test(n.platform)&&(yield n.getHighEntropyValues(["architecture","platformVersion"]).then(({architecture:i,platformVersion:o})=>/arm/i.test(i||"arm")&&13<=parseInt(o||"13")).catch(()=>!0))?e():new BarcodeDetector({formats:["qr_code"]})})()}_onPlay(){this._scanRegion=this._calculateScanRegion(this.$video),this._updateOverlay(),this.$overlay&&(this.$overlay.style.display=""),this._scanFrame()}_onLoadedMetaData(){this._scanRegion=this._calculateScanRegion(this.$video),this._updateOverlay()}_onVisibilityChange(){document.hidden?this.pause():this._active&&this.start()}_calculateScanRegion(e){let n=Math.round(.6666666666666666*Math.min(e.videoWidth,e.videoHeight));return{x:Math.round((e.videoWidth-n)/2),y:Math.round((e.videoHeight-n)/2),width:n,height:n,downScaledWidth:this._legacyCanvasSize,downScaledHeight:this._legacyCanvasSize}}_updateOverlay(){requestAnimationFrame(()=>{if(this.$overlay){var e=this.$video,n=e.videoWidth,i=e.videoHeight,o=e.offsetWidth,r=e.offsetHeight,c=e.offsetLeft,d=e.offsetTop,p=window.getComputedStyle(e),h=p.objectFit,f=n/i,E=o/r;switch(h){case"none":var v=n,C=i;break;case"fill":v=o,C=r;break;default:("cover"===h?f>E:f<E)?v=(C=r)*f:C=(v=o)/f,"scale-down"===h&&(v=Math.min(v,n),C=Math.min(C,i))}var[A,P]=p.objectPosition.split(" ").map((D,ft)=>{const rt=parseFloat(D);return D.endsWith("%")?(ft?r-C:o-v)*rt/100:rt});E=this._scanRegion.height||i,h=this._scanRegion.x||0;var W=this._scanRegion.y||0;(f=this.$overlay.style).width=(p=this._scanRegion.width||n)/n*v+"px",f.height=E/i*C+"px",f.top=`${d+P+W/i*C}px`,i=/scaleX\(-1\)/.test(e.style.transform),f.left=`${c+(i?o-A-v:A)+(i?n-h-p:h)/n*v}px`,f.transform=e.style.transform}})}static _convertPoints(e,n){if(!n)return e;let i=n.x||0,o=n.y||0,r=n.width&&n.downScaledWidth?n.width/n.downScaledWidth:1;n=n.height&&n.downScaledHeight?n.height/n.downScaledHeight:1;for(let c of e)c.x=c.x*r+i,c.y=c.y*n+o;return e}_scanFrame(){var e=this;!this._active||this.$video.paused||this.$video.ended||("requestVideoFrameCallback"in this.$video?this.$video.requestVideoFrameCallback.bind(this.$video):requestAnimationFrame)((0,u.Z)(function*(){if(!(1>=e.$video.readyState)){var n=Date.now()-e._lastScanTimestamp,i=1e3/e._maxScansPerSecond;n<i&&(yield new Promise(r=>setTimeout(r,i-n))),e._lastScanTimestamp=Date.now();try{var o=yield a.scanImage(e.$video,{scanRegion:e._scanRegion,qrEngine:e._qrEnginePromise,canvas:e.$canvas})}catch(r){if(!e._active)return;e._onDecodeError(r)}!a._disableBarcodeDetector||(yield e._qrEnginePromise)instanceof Worker||(e._qrEnginePromise=a.createQrEngine()),o?(e._onDecode?e._onDecode(o):e._legacyOnDecode&&e._legacyOnDecode(o.data),e.$codeOutlineHighlight&&(clearTimeout(e._codeOutlineHighlightRemovalTimeout),e._codeOutlineHighlightRemovalTimeout=void 0,e.$codeOutlineHighlight.setAttribute("viewBox",`${e._scanRegion.x||0} ${e._scanRegion.y||0} ${e._scanRegion.width||e.$video.videoWidth} ${e._scanRegion.height||e.$video.videoHeight}`),e.$codeOutlineHighlight.firstElementChild.setAttribute("points",o.cornerPoints.map(({x:r,y:c})=>`${r},${c}`).join(" ")),e.$codeOutlineHighlight.style.display="")):e.$codeOutlineHighlight&&!e._codeOutlineHighlightRemovalTimeout&&(e._codeOutlineHighlightRemovalTimeout=setTimeout(()=>e.$codeOutlineHighlight.style.display="none",100))}e._scanFrame()}))}_onDecodeError(e){e!==a.NO_QR_CODE_FOUND&&console.log(e)}_getCameraStream(){var e=this;return(0,u.Z)(function*(){if(!navigator.mediaDevices)throw"Camera not found.";let n=/^(environment|user)$/.test(e._preferredCamera)?"facingMode":"deviceId",i=[{width:{min:1024}},{width:{min:768}},{}],o=i.map(r=>Object.assign({},r,{[n]:{exact:e._preferredCamera}}));for(let r of[...o,...i])try{let c=yield navigator.mediaDevices.getUserMedia({video:r,audio:!1});return{stream:c,facingMode:e._getFacingMode(c)||(r.facingMode?e._preferredCamera:"environment"===e._preferredCamera?"user":"environment")}}catch{}throw"Camera not found."})()}_restartVideoStream(){var e=this;return(0,u.Z)(function*(){let n=e._paused;(yield e.pause(!0))&&!n&&e._active&&(yield e.start())})()}static _stopVideoStream(e){for(let n of e.getTracks())n.stop(),e.removeTrack(n)}_setVideoMirror(e){this.$video.style.transform="scaleX("+("user"===e?-1:1)+")"}_getFacingMode(e){return(e=e.getVideoTracks()[0])?/rear|back|environment/i.test(e.label)?"environment":/front|user|face/i.test(e.label)?"user":null:null}static _drawToCanvas(e,n,i,o=!1){i=i||document.createElement("canvas");let r=n&&n.x?n.x:0,c=n&&n.y?n.y:0,d=n&&n.width?n.width:e.videoWidth||e.width,p=n&&n.height?n.height:e.videoHeight||e.height;return o||(o=n&&n.downScaledWidth?n.downScaledWidth:d,n=n&&n.downScaledHeight?n.downScaledHeight:p,i.width!==o&&(i.width=o),i.height!==n&&(i.height=n)),(n=i.getContext("2d",{alpha:!1})).imageSmoothingEnabled=!1,n.drawImage(e,r,c,d,p,0,0,i.width,i.height),[i,n]}static _loadImage(e){return(0,u.Z)(function*(){if(e instanceof Image)return yield a._awaitImageLoad(e),e;if(e instanceof HTMLVideoElement||e instanceof HTMLCanvasElement||e instanceof SVGImageElement||"OffscreenCanvas"in window&&e instanceof OffscreenCanvas||"ImageBitmap"in window&&e instanceof ImageBitmap)return e;if(!(e instanceof File||e instanceof Blob||e instanceof URL||"string"==typeof e))throw"Unsupported image type.";{let n=new Image;n.src=e instanceof File||e instanceof Blob?URL.createObjectURL(e):e.toString();try{return yield a._awaitImageLoad(n),n}finally{(e instanceof File||e instanceof Blob)&&URL.revokeObjectURL(n.src)}}})()}static _awaitImageLoad(e){return(0,u.Z)(function*(){e.complete&&0!==e.naturalWidth||(yield new Promise((n,i)=>{let o=r=>{e.removeEventListener("load",o),e.removeEventListener("error",o),r instanceof ErrorEvent?i("Image load error"):n()};e.addEventListener("load",o),e.addEventListener("error",o)}))})()}static _postWorkerMessage(e,n,i,o){return(0,u.Z)(function*(){return a._postWorkerMessageSync(yield e,n,i,o)})()}static _postWorkerMessageSync(e,n,i,o){if(!(e instanceof Worker))return-1;let r=a._workerMessageId++;return e.postMessage({id:r,type:n,data:i},o),r}}return a.DEFAULT_CANVAS_SIZE=400,a.NO_QR_CODE_FOUND="No QR code found",a._disableBarcodeDetector=!1,a._workerMessageId=0,a})(),Qa=["video"],$a=["checkin-qr-scan",""],Ha=()=>["/welcome"];let ja=(()=>{class a extends g.cx{constructor(e,n){super(),this._checkin=e,this._router=n,this.checking_code=!1}ngAfterViewInit(){this.setupQRReader()}ngOnDestroy(){this._video_el.nativeElement.srcObject&&this._video_el.nativeElement.srcObject.getTracks().forEach(e=>e?.stop()),this._reader?.stop()}checkQRCode(e){var n=this;return(0,u.Z)(function*(){n.checking_code||n.timeout("check_qr_code",(0,u.Z)(function*(){n._reader?.stop(),n.checking_code=!0;const i=e.split(",");let[o,r,c,d]=i;const[p,h]=o.split(":");if(!h&&!c)return(0,g.cB)("Invalid QRCode"),n.setupQRReader(),void(n.checking_code=!1);/^\d+$/.test(c)||(c=void 0),yield n._checkin.loadGuestAndEvent(h,c).catch(f=>{throw n.handleError(f.message||f),n.checking_code=!1,f}),n._router.navigate(["/checkin","details"]),n.checking_code=!1}))})()}checkEmail(e){var n=this;return(0,u.Z)(function*(){!e||!e.includes("@")||e.length<5||(yield n._checkin.loadGuestAndEvent(e).catch(i=>{throw n.handleError("Unable to find visitor or a meeting associated with the given email address."),i}),n._router.navigate(["/checkin","details"]))})()}setupQRReader(){this.timeout("setup_qr_reader",()=>{if(!this._video_el?.nativeElement)return this.setupQRReader();navigator.mediaDevices?.getUserMedia&&navigator.mediaDevices.getUserMedia({video:!0}).then(e=>this._video_el.nativeElement.srcObject=e).catch(e=>console.error("Unable to fetch media devices!",e)),me&&(this._reader=new me(this._video_el.nativeElement,e=>this.checkQRCode(e)),this._reader.start())})}handleError(e){this._checkin.setError(e?.statusText||e),this._router.navigate(["/checkin","error"])}static#t=this.\u0275fac=function(n){return new(n||a)(t.Y36(U),t.Y36(k.F0))};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["","checkin-qr-scan",""]],viewQuery:function(n,i){if(1&n&&t.Gf(Qa,7),2&n){let o;t.iGM(o=t.CRH())&&(i._video_el=o.first)}},features:[t.qOj],attrs:$a,decls:22,vars:7,consts:[[1,"bg-base-100","rounded","shadow","overflow-hidden","relative","flex","flex-col","items-center"],[1,"mt-6","mb-4"],["appearance","outline"],["matInput","","placeholder","Enter email...","type","email","autocomplete","off",3,"ngModel","ngModelChange","blur","keyup.enter"],[1,"relative","rounded","m-4","bg-base-200","border","border-base-200","overflow-hidden"],[1,"absolute","top-1/2","left-1/2","-translate-x-1/2","-translate-y-1/2","opacity-30","flex","flex-col","items-center","space-y-2","z-0"],[1,"text-6xl"],["id","qr-stream","playsinline","","width","640","height","480","autoplay","",1,"object-cover","relative","z-10"],["video",""],["icon","","matRipple","",1,"absolute","top-0","right-0",3,"routerLink"],[1,"bg-base-100","rounded","shadow","overflow-hidden","relative","flex","flex-col","items-center","p-16"],["diameter","32"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0)(1,"p",1),t._uU(2," Please enter your email address or scan your QR code "),t.qZA(),t.TgZ(3,"mat-form-field",2)(4,"input",3),t.NdJ("ngModelChange",function(r){return i.email=r})("blur",function(){return i.checkEmail(i.email)})("keyup.enter",function(){return i.checkEmail(i.email)}),t.qZA(),t.TgZ(5,"mat-error"),t._uU(6,"Invalid email format"),t.qZA()(),t.TgZ(7,"div",4)(8,"div",5)(9,"app-icon",6),t._uU(10,"videocam_off"),t.qZA(),t.TgZ(11,"p"),t._uU(12,"Camera feed loading or is not available"),t.qZA()(),t._UZ(13,"video",7,8),t.qZA(),t.TgZ(15,"a",9)(16,"app-icon"),t._uU(17,"close"),t.qZA()()(),t.TgZ(18,"div",10),t._UZ(19,"mat-spinner",11),t.TgZ(20,"p",1),t._uU(21,"Loading visitor information..."),t.qZA()()),2&n&&(t.ekj("hidden",i.checking_code),t.xp6(4),t.Q6J("ngModel",i.email),t.xp6(11),t.Q6J("routerLink",t.DdM(6,Ha)),t.xp6(3),t.ekj("hidden",!i.checking_code))},dependencies:[m.Fj,m.JJ,m.On,x.o,O.KE,O.TO,b.wG,q.Nt,N.Ou,k.rH],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;width:100%;background-color:#00000080}video[_ngcontent-%COMP%]{width:36rem;height:27rem}mat-form-field[_ngcontent-%COMP%]{width:36rem}a[_ngcontent-%COMP%]{position:absolute}\n\n/*# sourceMappingURL=checkin-qr-scan.component.ts-angular-inline--95.css.map*/"]})}return a})();var Ya=l(5702),Va=l(9147),Wa=l(2882),za=l(1886);function Ka(a,s){if(1&a&&(t.TgZ(0,"div",22),t._uU(1),t.ALo(2,"async"),t.ALo(3,"async"),t.qZA()),2&a){const e=t.oxw(2);let n;t.xp6(1),t.hij(" Cleared for ",(null==(n=t.lcZ(2,1,e.level))?null:n.display_name)||(null==(n=t.lcZ(3,3,e.level))?null:n.name)," ")}}function Xa(a,s){if(1&a){const e=t.EpF();t.TgZ(0,"button",21),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.print())}),t._uU(1," Print Label "),t.qZA()}}const to=()=>({});function eo(a,s){if(1&a){const e=t.EpF();t.TgZ(0,"div",1)(1,"h3",2),t._uU(2,"You are checked in!"),t.qZA(),t._UZ(3,"div",3),t.ALo(4,"async"),t.TgZ(5,"div",4)(6,"div",5)(7,"div",6),t._UZ(8,"a-user-avatar",7),t.qZA(),t.TgZ(9,"div",8),t._uU(10),t.ALo(11,"async"),t.qZA(),t.TgZ(12,"div",9),t._uU(13),t.ALo(14,"async"),t.qZA(),t.TgZ(15,"div",10),t._uU(16),t.ALo(17,"async"),t.qZA(),t.TgZ(18,"div",11),t._uU(19," Visitor "),t.qZA()(),t.TgZ(20,"div",12),t._UZ(21,"img",13),t.YNc(22,Ka,4,5,"div",14),t.ALo(23,"async"),t.TgZ(24,"pre",15),t._uU(25),t.ALo(26,"async"),t.qZA()(),t.TgZ(27,"div",16)(28,"div",17)(29,"div"),t._uU(30),t.ALo(31,"date"),t.ALo(32,"async"),t.qZA(),t.TgZ(33,"div"),t._uU(34),t.ALo(35,"date"),t.ALo(36,"async"),t.qZA()(),t._UZ(37,"div",18),t.qZA()(),t.TgZ(38,"div",19),t.YNc(39,Xa,2,0,"button",20),t.TgZ(40,"button",21),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.next())}),t._uU(41," Done "),t.qZA()()()}if(2&a){const e=t.oxw();let n,i,o,r,c,d;t.xp6(3),t.Q6J("innerHTML",t.lcZ(4,11,e.template),t.oJD),t.xp6(5),t.Q6J("user",t.DdM(33,to)),t.xp6(2),t.hij(" ",null==(n=t.lcZ(11,13,e.event))?null:n.asset_name," "),t.xp6(3),t.hij(" For: ",null==(i=t.lcZ(14,15,e.event))?null:i.title," "),t.xp6(3),t.hij(" Seeing ",null==(o=t.lcZ(17,17,e.event))?null:o.user_name," "),t.xp6(5),t.Q6J("src",null==e.logo?null:e.logo.src,t.LSH),t.xp6(1),t.Q6J("ngIf",t.lcZ(23,19,e.level)),t.xp6(3),t.hij("                        ",null==(r=t.lcZ(26,21,e.event))||null==r.extension_data?null:r.extension_data.extra_details,"\n                    "),t.xp6(5),t.hij(" ",t.xi3(31,23,(null==(c=t.lcZ(32,26,e.event))?null:c.date)||"","shortTime")," "),t.xp6(4),t.hij(" ",t.xi3(35,28,(null==(d=t.lcZ(36,31,e.event))?null:d.date)||"","mediumDate")," "),t.xp6(5),t.Q6J("ngIf",e.allow_printing_label)}}let no=(()=>{class a{get time_format(){return this._settings.time_format}get now(){return(0,Ya.Z)((0,Va.Z)(Date.now(),{nearestTo:5}))}get logo(){return this._settings.get("app.logo_light")}get allow_printing_label(){return!1!==this._settings.get("app.allow_printing_label")}constructor(e,n,i,o,r){this._org=e,this._checkin=n,this._settings=i,this._router=o,this._date=r,this.event=this._checkin.event,this.guest=this._checkin.guest,this.level=(0,G.aj)([this.event,this._org.initialised]).pipe((0,w.U)(([c])=>c?this._org.levelWithID(c.zones):null)),this.checkedInTemplate=(0,G.aj)([this.event,this.guest]).pipe((0,X.h)(([c,d])=>!!c&&!!d),(0,w.U)(([c,d])=>(this._settings.get("app.checked_in_template")||'\n    <p class="text-center">\n        Welcome, you have a meeting at {{ time }} with {{ host_name }}.<br />\n        {{ host_name }} has been notified and will be with you shortly.&nbsp;\n    </p>\n    <p>{{ can_use_lift }}</p>\n        ').replace("{{ date }}",this._date.transform(c.date||this.now,"mediumDate")).replace("{{ time }}",this._date.transform(c.date||this.now,this.time_format)).replace("{{ title }}",c.title||"").replace("{{ room_name }}",c.extension_data.location_id||"").replace("{{ host_name }}",c.user_name||"").replace("{{ host_email }}",c.user_email||"").replace("{{ visitor_name }}",d.name||"").replace("{{ visitor_email }}",d.email||"").replace("{{ can_use_lift }}",c.extension_data.can_use_lift?"Please use the vistor access lift over there":"Please wait in the lobby."))),this.print=()=>window.print()}ngOnInit(){this.event.pipe((0,L.P)()).subscribe(e=>e?"":this.previous())}previous(){this._router.navigate(["/checkin"])}next(){this._router.navigate(["/welcome"])}static#t=this.\u0275fac=function(n){return new(n||a)(t.Y36(j.w7),t.Y36(U),t.Y36(g.gb),t.Y36(k.F0),t.Y36(_.uU))};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["checkin-results"]],decls:2,vars:3,consts:[["class","bg-base-100 rounded shadow overflow-hidden relative flex flex-col items-center my-4 p-4 mx-auto space-y-4",4,"ngIf"],[1,"bg-base-100","rounded","shadow","overflow-hidden","relative","flex","flex-col","items-center","my-4","p-4","mx-auto","space-y-4"],[1,"text-xl"],[1,"",3,"innerHTML"],["printable","",1,"relative","w-[24rem]","h-[14rem]","rounded-xl","border","border-neutral","m-4","p-4","bg-base-100","print-only"],[1,"flex","flex-col","h-full"],[1,"h-[4.75rem]","w-[4.75rem]","rounded-full","bg-base-200","flex","items-center","justify-center"],[1,"text-3xl",3,"user"],[1,"text-2xl"],[1,"text-sm","mt-1"],[1,"text-sm","opacity-60"],[1,"rounded-lg","bg-black","text-white","px-2","py-1","text-sm","mt-2","w-32","text-center"],[1,"absolute","top-4","right-4","flex","flex-col","items-end"],["logo","","alt","Logo",1,"h-10",3,"src"],["class","text-xs text-right",4,"ngIf"],[1,"text-right"],[1,"absolute","bottom-4","right-4","flex","items-end","space-x-2"],[1,"text-right","font-medium","leading-tight"],[1,"h-16","w-16","rounded-lg","border","border-base-200"],[1,"flex","items-center","space-x-2"],["btn","","matRipple","","class","w-32",3,"click",4,"ngIf"],["btn","","matRipple","",1,"w-32",3,"click"],[1,"text-xs","text-right"]],template:function(n,i){1&n&&(t.YNc(0,eo,42,34,"div",0),t.ALo(1,"async")),2&n&&t.Q6J("ngIf",t.lcZ(1,1,i.event))},dependencies:[_.O5,Wa.k,za.o,b.wG,_.Ov,_.uU],styles:["[_nghost-%COMP%]{position:absolute;display:flex;align-items:center;justify-content:center;inset:0;background-color:#00000080}[_nghost-%COMP%] > div[_ngcontent-%COMP%]{width:32rem;max-width:calc(100vw - 2rem)}\n\n/*# sourceMappingURL=checkin-result.component.ts-angular-inline--96.css.map*/"]})}return a})();function io(a,s){if(1&a&&(t.TgZ(0,"p",5),t._uU(1),t.ALo(2,"async"),t.qZA()),2&a){const e=t.oxw();t.xp6(1),t.Oqu(t.lcZ(2,1,e.error))}}const ao=()=>["/welcome"];let oo=(()=>{class a{constructor(e){this._checkin=e,this.error=this._checkin.error}static#t=this.\u0275fac=function(n){return new(n||a)(t.Y36(U))};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["checkin-error"]],decls:9,vars:5,consts:[[1,"bg-base-100","rounded","shadow","overflow-hidden","relative","flex","flex-col","items-center","my-4","mx-auto","p-4"],[1,"text-2xl","mb-4"],["class","mb-2",4,"ngIf"],[1,"mb-4"],["btn","","btn","","matRipple","",1,"w-32",3,"routerLink"],[1,"mb-2"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0)(1,"h3",1),t._uU(2,"Please see reception."),t.qZA(),t.YNc(3,io,3,3,"p",2),t.ALo(4,"async"),t.TgZ(5,"p",3),t._uU(6,"Our staff at reception will assist you."),t.qZA(),t.TgZ(7,"a",4),t._uU(8," Back "),t.qZA()()),2&n&&(t.xp6(3),t.Q6J("ngIf",t.lcZ(4,2,i.error)),t.xp6(4),t.Q6J("routerLink",t.DdM(4,ao)))},dependencies:[_.O5,b.wG,k.rH,_.Ov],styles:["[_nghost-%COMP%]{position:absolute;display:flex;align-items:center;justify-content:center;inset:0;background-color:#00000080}[_nghost-%COMP%] > div[_ngcontent-%COMP%]{width:28rem;max-width:calc(100vw - 2rem)}\n\n/*# sourceMappingURL=checkin-error.component.ts-angular-inline--97.css.map*/"]})}return a})();const ro=["checkin-covid",""],so=()=>["/welcome"];let co=(()=>{class a{constructor(e,n){this._router=e,this._checkin=n}confirm(){if(!this.symptoms||!this.contact)return(0,g.cB)("Please select yes or no for each question");this._checkin.updateGuest({covid:"true"===this.contact,symptoms:"true"===this.symptoms}),"false"===this.symptoms&&"false"===this.contact?this._router.navigate(["/checkin","results"]):(this._checkin.setError("Please get tested for COVID-19 and self-isolate at home for 14 days"),this._router.navigate(["/checkin","error"]))}static#t=this.\u0275fac=function(n){return new(n||a)(t.Y36(k.F0),t.Y36(U))};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["","checkin-covid",""]],attrs:ro,decls:55,vars:5,consts:[[1,"bg-base-100","rounded","p-4","relative","overflow-y-auto","overflow-x-hidden"],[1,"text-xl","font-medium","mb-4"],[1,"list-decimal","list-inside"],[1,"list-disc","list-inside","px-4","mb-4"],["aria-label","Has Symptoms",3,"ngModel","ngModelChange"],["value","true"],["value","false",1,"ml-4"],[1,"my-4"],["aria-label","COVID contact or self-isolated",3,"ngModel","ngModelChange"],["btn","","matRipple","",3,"click"],["icon","","matRipple","",1,"absolute","top-0","right-0",3,"routerLink"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0)(1,"h3",1),t._uU(2,"COVID Disclaimer"),t.qZA(),t.TgZ(3,"ol",2)(4,"li"),t._uU(5," Do you have any of the following symptoms?"),t._UZ(6,"br")(7,"br"),t.TgZ(8,"ul",3)(9,"li"),t._uU(10,"Fever"),t.qZA(),t.TgZ(11,"li"),t._uU(12,"Cough"),t.qZA(),t.TgZ(13,"li"),t._uU(14,"Shortness of breath"),t.qZA(),t.TgZ(15,"li"),t._uU(16,"Chills"),t.qZA(),t.TgZ(17,"li"),t._uU(18,"Body aches"),t.qZA(),t.TgZ(19,"li"),t._uU(20,"Sore or scratchy throat"),t.qZA(),t.TgZ(21,"li"),t._uU(22,"Headache"),t.qZA(),t.TgZ(23,"li"),t._uU(24,"Runny nose"),t.qZA(),t.TgZ(25,"li"),t._uU(26,"Muscle pain"),t.qZA(),t.TgZ(27,"li"),t._uU(28,"Vomitting"),t.qZA(),t.TgZ(29,"li"),t._uU(30,"Nausea"),t.qZA(),t.TgZ(31,"li"),t._uU(32,"Diarrhoa"),t.qZA(),t.TgZ(33,"li"),t._uU(34,"Loss of taste or smell"),t.qZA()(),t.TgZ(35,"mat-radio-group",4),t.NdJ("ngModelChange",function(r){return i.symptoms=r}),t.TgZ(36,"mat-radio-button",5),t._uU(37,"Yes"),t.qZA(),t.TgZ(38,"mat-radio-button",6),t._uU(39,"No"),t.qZA()()(),t._UZ(40,"hr",7),t.TgZ(41,"li"),t._uU(42," Have you been in contact with a COVID-19 case in the last 14 days or been asked to self-isolate by a health offical?"),t._UZ(43,"br")(44,"br"),t.TgZ(45,"mat-radio-group",8),t.NdJ("ngModelChange",function(r){return i.contact=r}),t.TgZ(46,"mat-radio-button",5),t._uU(47,"Yes"),t.qZA(),t.TgZ(48,"mat-radio-button",6),t._uU(49,"No"),t.qZA()()()(),t.TgZ(50,"button",9),t.NdJ("click",function(){return i.confirm()}),t._uU(51,"Confirm"),t.qZA(),t.TgZ(52,"a",10)(53,"app-icon"),t._uU(54,"close"),t.qZA()()()),2&n&&(t.xp6(35),t.Q6J("ngModel",i.symptoms),t.xp6(10),t.Q6J("ngModel",i.contact),t.xp6(7),t.Q6J("routerLink",t.DdM(4,so)),t.uIk("disabled",!i.symptoms&&!i.contact))},dependencies:[m.JJ,m.On,x.o,b.wG,Y.VQ,Y.U0,k.rH],styles:["[_nghost-%COMP%]{position:absolute;display:flex;align-items:center;justify-content:center;inset:0;background-color:#00000080}[_nghost-%COMP%] > div[_ngcontent-%COMP%]{width:32rem;max-width:calc(100vw - 2rem);max-height:calc(100% - 2rem)}.absolute[_ngcontent-%COMP%]{position:absolute}button[_ngcontent-%COMP%]{margin:1rem 11rem 0;width:8rem}\n\n/*# sourceMappingURL=checkin-covid.component.ts-angular-inline--98.css.map*/"]})}return a})();var lo=l(2678);const mo=["app-checkin",""],_o=[{path:"",component:(()=>{class a{get background(){return this._settings.get("app.home.background")}constructor(e){this._settings=e}static#t=this.\u0275fac=function(n){return new(n||a)(t.Y36(g.gb))};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["","app-checkin",""]],attrs:mo,decls:3,vars:2,consts:[[1,"w-full","screen-only"],[1,"flex-1","w-full","bg-center","bg-cover","relative","screen-only"]],template:function(n,i){1&n&&(t._UZ(0,"a-topbar-header",0),t.TgZ(1,"div",1),t._UZ(2,"router-outlet"),t.qZA()),2&n&&(t.xp6(1),t.Udp("background-image","url("+i.background+")"))},dependencies:[lo.B,k.lC],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%;width:100%}\n\n/*# sourceMappingURL=checkin.component.ts-angular-inline--99.css.map*/"]})}return a})(),children:[{path:"scan",component:ja},{path:"details",component:Te},{path:"preferences",component:Ga},{path:"photo",component:Ie},{path:"results",component:no},{path:"error",component:oo},{path:"covid",component:co},{path:"**",redirectTo:"scan"}]},{path:"**",redirectTo:""}];let po=(()=>{class a{static#t=this.\u0275fac=function(n){return new(n||a)};static#e=this.\u0275mod=t.oAB({type:a});static#n=this.\u0275inj=t.cJS({imports:[_.ez,m.u5,m.UX,_e.q,k.Bz.forChild(_o)]})}return a})()}}]);
//# sourceMappingURL=apps_visitor-kiosk_src_app_checkin_checkin_module_ts.js.map