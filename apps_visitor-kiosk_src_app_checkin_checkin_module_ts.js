"use strict";(self.webpackChunkvisitor_kiosk=self.webpackChunkvisitor_kiosk||[]).push([["apps_visitor-kiosk_src_app_checkin_checkin_module_ts"],{1390:(uo,we,l)=>{l.r(we),l.d(we,{VisitorCheckinModule:()=>_o});var _=l(6477),m=l(9542),w=l(854),dt=l(2487),p=l(1670),E=l(5670),g=l(337),V=l(1320),G=l(5533),mt=l(5845),y=l(4505),_t=l(3496),e=l(9445);let q=(()=>{class i{constructor(){this._event=new y.X(null),this._guest=new y.X(null),this._photo=new y.X(""),this._error=new y.X(""),this._form=new y.X((0,G.en)()),this.event=this._event.asObservable(),this.guest=this._guest.asObservable(),this.error=this._error.asObservable(),this.form=this._form.asObservable()}clear(){this._guest.next(null),this._event.next(null),this._photo.next(null)}setPhoto(t){this._photo.next(t)}setError(t){this._error.next(t)}loadGuestAndEvent(t,n){var a=this;return(0,p.Z)(function*(){const o=yield(0,G.pP)(t).toPromise();if(n){const u=yield(0,V.Vh)(n).toPromise();return a._guest.next(o),a._event.next(u),a._form.next((0,G.en)(o,u.host)),{guest:o,event:u}}if(o.booking){const u=(0,V.Yd)(o.booking);return a._guest.next(o),a._event.next(u),a._form.next((0,G.en)(o,u.host)),{guest:o,event:u}}const s=yield(0,G.n2)(t).toPromise(),c=new Date,d=s.filter(u=>(0,mt.Z)(new Date(u.date),c));if(d.sort((u,f)=>u.date-f.date),d.length<=0)throw new Error(`No meetings for guest "${t}" today`);return a._guest.next(o),a._event.next(d[0]),a._form.next((0,G.en)(o,d[0].host)),{guest:o,event:d[0]}})()}updateGuest(t){var n=this;return(0,p.Z)(function*(){n._guest.getValue(),n._form.getValue()})()}checkinGuest(){var t=this;return(0,p.Z)(function*(){const n=t._guest.getValue(),a=t._event.getValue();!n||!a||(n.booking?yield(0,_t.FD)(n.booking.id,!0).toPromise():yield(0,V.rq)(a.id,n.email,!0,{system_id:a.system?.id||a.resources[0]?.id}).toPromise())})()}printPass(){try{return new Promise(t=>setTimeout(()=>t(""),5e3))}catch{(0,g.cB)("Error printing visitor pass")}return Promise.reject()}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var x=l(5306),Z=l(8750),h=l(7728),B=l(380),L=l(5312);const ut=["checkin-details",""],pt=function(){return["/welcome"]};function gt(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"form",2),e.ALo(1,"async"),e.TgZ(2,"h3",3),e._uU(3,"Confirm Details"),e.qZA(),e.TgZ(4,"div",4)(5,"label",5),e._uU(6,"Host"),e.qZA(),e.TgZ(7,"mat-form-field",6),e._UZ(8,"input",7),e.TgZ(9,"mat-error"),e._uU(10," The email address of your host is required "),e.qZA()()(),e.TgZ(11,"div",4)(12,"label",8),e._uU(13,"Name"),e.qZA(),e.TgZ(14,"mat-form-field",6),e._UZ(15,"input",9),e.TgZ(16,"mat-error"),e._uU(17,"Please enter your full name"),e.qZA()()(),e.TgZ(18,"div",4)(19,"label",10),e._uU(20,"Email"),e.qZA(),e.TgZ(21,"mat-form-field",6),e._UZ(22,"input",11),e.TgZ(23,"mat-error"),e._uU(24,"A valid email address is required"),e.qZA()()(),e.TgZ(25,"div",4)(26,"label",10),e._uU(27,"Phone Number"),e.qZA(),e.TgZ(28,"mat-form-field",6),e._UZ(29,"input",12),e.qZA()(),e.TgZ(30,"div",4)(31,"label",13),e._uU(32,"Organisation / Company"),e.qZA(),e.TgZ(33,"mat-form-field",6),e._UZ(34,"input",14),e.qZA()(),e.TgZ(35,"button",15),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.updateGuest())}),e._uU(36,"Next"),e.qZA(),e.TgZ(37,"a",16)(38,"app-icon"),e._uU(39,"close"),e.qZA()()()}if(2&i){const t=e.oxw();e.Q6J("formGroup",e.lcZ(1,2,t.form)),e.xp6(37),e.Q6J("routerLink",e.DdM(4,pt))}}function ht(i,r){1&i&&(e.TgZ(0,"div",17)(1,"div",18),e._UZ(2,"mat-spinner",19),e.TgZ(3,"div",20),e._uU(4," Updating data and checking in... "),e.qZA()()()),2&i&&(e.xp6(2),e.Q6J("diameter",48))}let ft=(()=>{class i{constructor(t,n){this._checkin=t,this._router=n,this.form=this._checkin.form,this.loading=!1}ngOnInit(){this.form.pipe((0,E.P)()).subscribe(t=>t&&t.value.email?"":this.previous())}updateGuest(){var t=this;return(0,p.Z)(function*(){t.loading=!0,yield t._checkin.updateGuest(),yield t._checkin.checkinGuest()?.catch(n=>{t.loading=!1}),t.loading=!1,t._router.navigate(["/checkin","results"])})()}previous(){this._router.navigate(["/checkin","scan"])}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(q),e.Y36(w.F0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["","checkin-details",""]],attrs:ut,decls:4,vars:4,consts:[["class","bg-white rounded shadow overflow-hidden relative flex flex-col items-center my-4 mx-auto",3,"formGroup",4,"ngIf","ngIfElse"],["load_state",""],[1,"bg-white","rounded","shadow","overflow-hidden","relative","flex","flex-col","items-center","my-4","mx-auto",3,"formGroup"],[1,"text-2xl","m-4"],["field","",1,"flex","flex-col"],["form","host"],["appearance","outline"],["matInput","","name","host","formControlName","host","placeholder","Host's Email Address"],["form","name"],["matInput","","name","name","formControlName","name","placeholder","Full Name"],["form","email"],["matInput","","name","email","formControlName","email","placeholder","Email Address"],["matInput","","name","phone","type","tel","formControlName","phone","placeholder","Phone Number"],["form","org"],["matInput","","name","org","formControlName","organisation","placeholder","Organisation / Company"],["next","","btn","","matRipple","",3,"click"],["icon","","matRipple","",1,"absolute","top-0","right-0",3,"routerLink"],[1,"absolute","inset-0","flex","flex-col","items-center","justify-center"],[1,"flex","flex-col","items-center","space-y-2","bg-white","rounded","shadow","p-16"],[3,"diameter"],[1,"my-4","text-lg"]],template:function(t,n){if(1&t&&(e.YNc(0,gt,40,5,"form",0),e.ALo(1,"async"),e.YNc(2,ht,5,1,"ng-template",null,1,e.W1O)),2&t){const a=e.MAs(3);e.Q6J("ngIf",e.lcZ(1,2,n.form)&&!n.loading)("ngIfElse",a)}},dependencies:[_.O5,m._Y,m.Fj,m.JJ,m.JL,m.sg,m.u,x.o,Z.KE,Z.TO,h.wG,B.Nt,L.Ou,w.rH,_.Ov],styles:["[_nghost-%COMP%]{position:absolute;inset:0;background-color:#00000080}form[_ngcontent-%COMP%]{width:32rem;max-width:calc(100vw - 2rem)}[field][_ngcontent-%COMP%]{width:calc(100% - 2rem)}.absolute[_ngcontent-%COMP%]{position:absolute}button[_ngcontent-%COMP%]{margin-bottom:1rem;width:8rem}\n/*# sourceMappingURL=checkin-details.component.ts-angular-inline--78.css.map*/"]}),i})();var bt=l(2171);const Ct=function(){return["/welcome"]};function vt(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",2)(1,"h3",3),e._uU(2,"Take a photo to continue"),e.qZA(),e.TgZ(3,"a-take-photo",4),e.NdJ("photoAccepted",function(a){e.CHM(t);const o=e.oxw();return e.KtG(o.handlePhoto(a))}),e.qZA(),e.TgZ(4,"a",5)(5,"app-icon"),e._uU(6,"close"),e.qZA()()()}2&i&&(e.xp6(4),e.Q6J("routerLink",e.DdM(1,Ct)))}function xt(i,r){1&i&&(e.TgZ(0,"div",6),e._UZ(1,"mat-spinner",7),e.TgZ(2,"div",8),e._uU(3," Printing guest pass... "),e.qZA()()),2&i&&(e.xp6(1),e.Q6J("diameter",48))}let Tt=(()=>{class i{constructor(t,n){this._checkin=t,this._router=n}handlePhoto(t){var n=this;return(0,p.Z)(function*(){if(!t)return(0,g.cB)("Error saving image, please try again");n.loading=!0,n._checkin.setPhoto(t),yield n._checkin.printPass().catch(a=>{throw n.loading=!1,(0,g.cB)(a),a}),n.loading=!1,n._router.navigate(["/checkin","results"])})()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(q),e.Y36(w.F0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["checkin-photo"]],decls:3,vars:2,consts:[["class","bg-white rounded shadow overflow-hidden relative flex flex-col items-center p-4",4,"ngIf","ngIfElse"],["load_state",""],[1,"bg-white","rounded","shadow","overflow-hidden","relative","flex","flex-col","items-center","p-4"],[1,"text-xl","mb-4"],[3,"photoAccepted"],["icon","","matRipple","",1,"absolute","top-0","right-0",3,"routerLink"],[1,"flex","flex-col","items-center","m-auto"],[3,"diameter"],[1,"my-4","text-lg","text-white"]],template:function(t,n){if(1&t&&(e.YNc(0,vt,7,2,"div",0),e.YNc(1,xt,4,1,"ng-template",null,1,e.W1O)),2&t){const a=e.MAs(2);e.Q6J("ngIf",!n.loading)("ngIfElse",a)}},dependencies:[_.O5,x.o,h.wG,L.Ou,bt.Q,w.rH],styles:["[_nghost-%COMP%]{position:absolute;display:flex;align-items:center;justify-content:center;inset:0;background-color:#00000080}.absolute[_ngcontent-%COMP%]{position:absolute}\n/*# sourceMappingURL=checkin-photo.component.ts-angular-inline--79.css.map*/"]}),i})();l(9816),l(9861);var T=l(7486);const yt=[{id:"after_hour",name:"After Hour of Day"},{id:"before_hour",name:"Before Hour of Day"},{id:"min_length",name:"Min. Meeting Length"},{id:"max_length",name:"Max. Meeting Length"},{id:"is_before",name:"Is Hours before Meeting"},{id:"within_hours",name:"Within Hours before Meeting"},{id:"visitor_type",name:"Visitor Type"},{id:"groups",name:"User in Groups"}];var D=l(7672),Ie=l(6508);function Mt(i,r){1&i&&(e.TgZ(0,"button",7)(1,"app-icon"),e._uU(2,"close"),e.qZA()())}function wt(i,r){if(1&i&&(e.TgZ(0,"mat-option",20),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.name," ")}}function It(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",16)(1,"mat-form-field",10)(2,"mat-select",17),e.NdJ("ngModelChange",function(a){const s=e.CHM(t).$implicit;return e.KtG(s[0]=a)}),e.YNc(3,wt,2,2,"mat-option",18),e.qZA()(),e.TgZ(4,"mat-form-field",10)(5,"input",19),e.NdJ("ngModelChange",function(a){const s=e.CHM(t).$implicit;return e.KtG(s[1]=a)}),e.qZA(),e.TgZ(6,"mat-error"),e._uU(7,"Rule value is required"),e.qZA()(),e.TgZ(8,"button",12),e.NdJ("click",function(){const o=e.CHM(t).index,s=e.oxw().$implicit;return e.KtG(s.rules.splice(o,1))}),e.TgZ(9,"app-icon"),e._uU(10,"delete"),e.qZA()()()}if(2&i){const t=r.$implicit,n=e.oxw(2);e.xp6(2),e.Q6J("ngModel",t[0]),e.xp6(1),e.Q6J("ngForOf",n.rule_types),e.xp6(2),e.Q6J("ngModel",t[1])}}function Zt(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",8)(1,"div",9)(2,"mat-form-field",10)(3,"input",11),e.NdJ("ngModelChange",function(a){const s=e.CHM(t).$implicit;return e.KtG(s.name=a)}),e.qZA(),e.TgZ(4,"mat-error"),e._uU(5,"Ruleset name is required"),e.qZA()(),e.TgZ(6,"button",12),e.NdJ("click",function(){const o=e.CHM(t).$implicit,s=e.oxw();return o.rules.push(["",""]),e.KtG(s.show_rules=o.id)}),e.TgZ(7,"app-icon"),e._uU(8,"add"),e.qZA()(),e.TgZ(9,"button",13),e.NdJ("click",function(){const o=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.show_rules=s.show_rules!==o.id?o.id:"")}),e.TgZ(10,"app-icon"),e._uU(11),e.qZA()(),e.TgZ(12,"button",12),e.NdJ("click",function(){const o=e.CHM(t).index,s=e.oxw();return e.KtG(s.rulesets.splice(o,1))}),e.TgZ(13,"app-icon"),e._uU(14,"delete"),e.qZA()()(),e.TgZ(15,"div",14),e.YNc(16,It,11,3,"div",15),e.qZA()()}if(2&i){const t=r.$implicit,n=e.oxw();e.xp6(3),e.Q6J("ngModel",t.name),e.xp6(6),e.Q6J("disabled",!t.rules.length),e.xp6(2),e.Oqu(n.show_rules===t.id?"expand_less":"expand_more"),e.xp6(4),e.Udp("height",(n.show_rules===t.id?5*t.rules.length:0)+"em"),e.xp6(1),e.Q6J("ngForOf",t.rules)}}let Ze=(()=>{class i extends g.cx{get new_id(){return"ruleset-"+Math.floor(99999999*Math.random())}constructor(t){super(),this._data=t,this.event=new e.vpe,this.loading=!1,this.require_notes=this._data.require_notes,this.rule_types=yt,this.rulesets=(t.config||[]).map(n=>(n.rules=n.rules.map(a=>[a[0],JSON.stringify(a[1])]),n))}saveNotesSetting(t){this.timeout("save-notes",()=>this._data.saveNotes?this._data.saveNotes(t):"",1e3)}saveChanges(){this.loading=!0;const t=this.rulesets.map(n=>({...n,rules:n.rules.map(a=>{let o=a[1];try{o=JSON.parse(a[1])}catch{}return[a[0],o]})}));this.event.emit({reason:"done",metadata:t})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(T.WI))},i.\u0275cmp=e.Xpm({type:i,selectors:[["catering-config-modal"]],outputs:{event:"event"},features:[e.qOj],decls:14,vars:3,consts:[["icon","","mat-dialog-close","",4,"ngIf"],[1,"overflow-auto","text-center","max-w-lg","px-4","pt-2","pb-4"],[1,"m-2",3,"ngModel","ngModelChange"],["matRipple","",3,"click"],["class","ruleset",4,"ngFor","ngForOf"],[1,"flex","p-2","items-center","justify-center","border-t","border-solid","border-gray-300"],["btn","","matRipple","",1,"mx-auto","w-32",3,"click"],["icon","","mat-dialog-close",""],[1,"ruleset"],[1,"flex"],["appearance","outline",1,"flex-1"],["matInput","","name","name","placeholder","Zone ID, Category or Tag","required","",3,"ngModel","ngModelChange"],["icon","","matRipple","",1,"mb-6",3,"click"],["icon","","matRipple","",1,"mb-6",3,"disabled","click"],["name","rules",1,"bg-gray-100","rounded","overflow-hidden"],["class","flex items-center px-2 h-20 space-x-2",4,"ngFor","ngForOf"],[1,"flex","items-center","px-2","h-20","space-x-2"],["name","booking-type","placeholder","Select Rule",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["matInput","","name","value","placeholder","Rule value","required","",3,"ngModel","ngModelChange"],[3,"value"]],template:function(t,n){1&t&&(e.TgZ(0,"header")(1,"h3"),e._uU(2,"Edit Catering Configuration"),e.qZA(),e.YNc(3,Mt,3,0,"button",0),e.qZA(),e.TgZ(4,"main",1)(5,"mat-checkbox",2),e.NdJ("ngModelChange",function(o){return n.saveNotesSetting(o)}),e._uU(6," Require notes for orders "),e.qZA(),e._UZ(7,"br"),e.TgZ(8,"button",3),e.NdJ("click",function(){return n.rulesets.push({id:n.new_id,rules:[]})}),e._uU(9," New Ruleset "),e.qZA(),e.YNc(10,Zt,17,6,"div",4),e.qZA(),e.TgZ(11,"footer",5)(12,"button",6),e.NdJ("click",function(){return n.saveChanges()}),e._uU(13," Save Changes "),e.qZA()()),2&t&&(e.xp6(3),e.Q6J("ngIf",!n.loading),e.xp6(2),e.Q6J("ngModel",n.require_notes),e.xp6(5),e.Q6J("ngForOf",n.rulesets))},dependencies:[_.sg,_.O5,h.ey,T.ZT,D.oG,m.Fj,m.JJ,m.Q7,m.On,x.o,Z.KE,Z.TO,Ie.gD,h.wG,B.Nt],styles:["[name=rules][_ngcontent-%COMP%]{transition:height .2s}\n/*# sourceMappingURL=catering-config-modal.component.ts-angular-inline--80.css.map*/"]}),i})();var Q=l(4387),M=l(2962),re=l(2556),se=l(1031),ge=l(2793),kt=l(3670);function At(i,r){1&i&&(e.TgZ(0,"button",6)(1,"app-icon"),e._uU(2,"close"),e.qZA()())}function Ot(i,r){if(1&i&&(e.TgZ(0,"div",17)(1,"label",18),e._uU(2," Name"),e.TgZ(3,"span"),e._uU(4,"*"),e.qZA(),e._uU(5,": "),e.qZA(),e.TgZ(6,"mat-form-field",19),e._UZ(7,"input",20),e.TgZ(8,"mat-error"),e._uU(9,"Name is required"),e.qZA()()()),2&i){const t=e.oxw(2);e.xp6(1),e.ekj("error",t.form.controls.name.invalid&&t.form.controls.name.touched)}}function Nt(i,r){if(1&i&&(e.TgZ(0,"div",17)(1,"label",21),e._uU(2," Category"),e.TgZ(3,"span"),e._uU(4,"*"),e.qZA(),e._uU(5,": "),e.qZA(),e.TgZ(6,"mat-form-field",19),e._UZ(7,"input",22),e.TgZ(8,"mat-error"),e._uU(9,"Category is required"),e.qZA()()()),2&i){const t=e.oxw(2),n=e.MAs(9);e.xp6(1),e.ekj("error",t.form.controls.category.invalid&&t.form.controls.category.touched),e.xp6(6),e.Q6J("matAutocomplete",n)}}function Rt(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"mat-chip-row",29),e.NdJ("removed",function(){const o=e.CHM(t).$implicit,s=e.oxw(3);return e.KtG(s.removeTag(o))}),e._uU(1),e.TgZ(2,"button",30)(3,"app-icon"),e._uU(4,"cancel"),e.qZA()()()}if(2&i){const t=r.$implicit;e.xp6(1),e.hij(" ",t," "),e.xp6(1),e.uIk("aria-label","Remove "+t)}}function Et(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",17)(1,"label",23),e.SDv(2,24),e.qZA(),e.TgZ(3,"mat-form-field",19)(4,"mat-chip-grid",25,26),e.YNc(6,Rt,5,2,"mat-chip-row",27),e.qZA(),e.TgZ(7,"input",28),e.NdJ("matChipInputTokenEnd",function(a){e.CHM(t);const o=e.oxw(2);return e.KtG(o.addTag(a))}),e.qZA()()()}if(2&i){const t=e.MAs(5),n=e.oxw(2);e.xp6(1),e.ekj("error",n.form.controls.tags.invalid&&n.form.controls.tags.touched),e.xp6(5),e.Q6J("ngForOf",n.tag_list),e.xp6(1),e.Q6J("matChipInputFor",t)("matChipInputSeparatorKeyCodes",n.separators)("matChipInputAddOnBlur",!0)}}function Lt(i,r){1&i&&(e.TgZ(0,"div",17)(1,"label",31),e._uU(2,"Description:"),e.qZA(),e.TgZ(3,"mat-form-field",19),e._UZ(4,"textarea",32),e.qZA()())}function St(i,r){if(1&i&&(e.TgZ(0,"div",17)(1,"label",18),e._uU(2," Unit Price"),e.TgZ(3,"span"),e._uU(4,"*"),e.qZA(),e._uU(5,": "),e.qZA(),e.TgZ(6,"mat-form-field",19),e._UZ(7,"input",33),e.TgZ(8,"mat-error"),e._uU(9,"Unit Price is required"),e.qZA()()()),2&i){const t=e.oxw(2);e.xp6(1),e.ekj("error",t.form.controls.unit_price.invalid&&t.form.controls.unit_price.touched)}}function Ft(i,r){1&i&&(e.TgZ(0,"div",17)(1,"label",34),e.SDv(2,35),e.qZA(),e._UZ(3,"image-list-field",36),e.qZA())}const W=function(){return{standalone:!0}};function Dt(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"form",7)(1,"div",8),e.YNc(2,Ot,10,2,"div",9),e.YNc(3,Nt,10,3,"div",9),e.qZA(),e.YNc(4,Et,8,6,"div",9),e.YNc(5,Lt,5,0,"div",9),e.YNc(6,St,10,2,"div",9),e.TgZ(7,"div",10)(8,"label",11),e._uU(9,"Accept Points?"),e.qZA(),e.TgZ(10,"mat-checkbox",12),e._uU(11),e.qZA()(),e.TgZ(12,"div",13)(13,"mat-checkbox",14),e.NdJ("ngModelChange",function(a){e.CHM(t);const o=e.oxw();return e.KtG(a?o.addTag({value:"Gluten Free"}):o.removeTag("Gluten Free"))}),e._uU(14," Gluten Free (GF) "),e.qZA(),e.TgZ(15,"mat-checkbox",14),e.NdJ("ngModelChange",function(a){e.CHM(t);const o=e.oxw();return e.KtG(a?o.addTag({value:"Vegan"}):o.removeTag("Vegan"))}),e._uU(16," Vegan (VG) "),e.qZA(),e.TgZ(17,"mat-checkbox",14),e.NdJ("ngModelChange",function(a){e.CHM(t);const o=e.oxw();return e.KtG(a?o.addTag({value:"Vegetarian"}):o.removeTag("Vegetarian"))}),e._uU(18," Vegetarian (V) "),e.qZA(),e.TgZ(19,"mat-checkbox",14),e.NdJ("ngModelChange",function(a){e.CHM(t);const o=e.oxw();return e.KtG(a?o.addTag({value:"Contains Dairy"}):o.removeTag("Contains Dairy"))}),e._uU(20," Contains Dairy (D) "),e.qZA(),e.TgZ(21,"mat-checkbox",14),e.NdJ("ngModelChange",function(a){e.CHM(t);const o=e.oxw();return e.KtG(a?o.addTag({value:"Contains Nuts"}):o.removeTag("Contains Nuts"))}),e._uU(22," Contains Nuts (N) "),e.qZA()(),e.TgZ(23,"div",10)(24,"label",15),e._uU(25,"Discount Cap"),e.qZA(),e._UZ(26,"a-counter",16),e.qZA(),e.YNc(27,Ft,4,0,"div",9),e.qZA()}if(2&i){const t=e.oxw();let n;e.Q6J("formGroup",t.form),e.xp6(2),e.Q6J("ngIf",t.form.controls.name),e.xp6(1),e.Q6J("ngIf",t.form.controls.category),e.xp6(1),e.Q6J("ngIf",t.form.controls.tags),e.xp6(1),e.Q6J("ngIf",t.form.controls.description),e.xp6(1),e.Q6J("ngIf",t.form.controls.unit_price),e.xp6(5),e.Oqu(null!=(n=t.form.get("accept_points"))&&n.value?"No":"Yes"),e.xp6(2),e.Q6J("ngModel",t.hasTag("Gluten Free"))("ngModelOptions",e.DdM(22,W)),e.xp6(2),e.Q6J("ngModel",t.hasTag("Vegan"))("ngModelOptions",e.DdM(23,W)),e.xp6(2),e.Q6J("ngModel",t.hasTag("Vegetarian"))("ngModelOptions",e.DdM(24,W)),e.xp6(2),e.Q6J("ngModel",t.hasTag("Contains Dairy"))("ngModelOptions",e.DdM(25,W)),e.xp6(2),e.Q6J("ngModel",t.hasTag("Contains Nuts"))("ngModelOptions",e.DdM(26,W)),e.xp6(5),e.Q6J("min",0)("max",100)("step",5)("render_fn",t.renderPercent),e.xp6(1),e.Q6J("ngIf",t.form.controls.images)}}function Ut(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"footer",37)(1,"button",38),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.saveChanges())}),e._uU(2," Save "),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("disabled",!t.form.dirty)}}function Pt(i,r){1&i&&(e.TgZ(0,"div",39),e._UZ(1,"mat-spinner",40),e.TgZ(2,"p"),e._uU(3,"Saving catering item..."),e.qZA()())}function qt(i,r){if(1&i&&(e.TgZ(0,"mat-option",41),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}let ke=(()=>{class i{get item(){return this._data.item||new M.U}get categories(){return this._data.categories||[]}get tag_list(){return this.form.controls.tags.value}renderPercent(t=0){return`${t}%`}hasTag(t){return this.tag_list.includes(t)}constructor(t){this._data=t,this.event=new e.vpe,this.form=new m.cw({name:new m.NI(this.item.name||"",[m.kI.required]),description:new m.NI(this.item.description||""),category:new m.NI(this.item.category||"",[m.kI.required]),unit_price:new m.NI(this.item.unit_price,[m.kI.required]),tags:new m.NI(this.item.tags||[]),accept_points:new m.NI(this.item.accept_points||!1),discount_cap:new m.NI(this.item.discount_cap||0),images:new m.NI(this.item.images||[])}),this.loading=!1,this.separators=[Q.K5,Q.OC,Q.L_]}addTag(t){if(!this.form||!this.form.controls.tags)return;this.form.controls.tags.markAsDirty();const n=t.input,a=t.value,o=this.tag_list;(a||"").trim()&&(o.push(a),this.form.controls.tags.setValue(o)),n&&(n.value="")}removeTag(t){if(!this.form||!this.form.controls.tags)return;const n=this.tag_list;this.form.controls.tags.markAsDirty();const a=n.indexOf(t);a>=0&&(n.splice(a,1),this.form.controls.tags.setValue(n))}saveChanges(){this.loading=!0,this.event.emit({reason:"done",metadata:{item:new M.U({...this.item,id:this.item.id||`item-${(0,g.Iy)(99999999)}`,...this.form.value})}})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(T.WI))},i.\u0275cmp=e.Xpm({type:i,selectors:[["catering-item-modal"]],outputs:{event:"event"},decls:11,vars:6,consts:function(){let r,t,n;return r=$localize`:@@tagsLabel␟800ffadd463cfe152c5af3fa9f13803ab2e77b93␟4746186018558508280: Tags: `,t=$localize`:@@zoneTagsPlaceholder␟c133beffffe3288bbdbf8572a32910c33ce14991␟2194594490376201833:Item tags e.g. Gluten Free, Vegan etc.`,n=$localize`:@@imagesLabel␟e5d9e00faa06714d7671b164cad364b26f4c585b␟5137125764814732349:Images:`,[["icon","","matRipple","","mat-dialog-close","",4,"ngIf"],["class","p-4 overflow-auto max-h-[65vh]",3,"formGroup",4,"ngIf","ngIfElse"],["class","flex p-2 items-center justify-center border-t border-solid border-gray-300",4,"ngIf"],["load_state",""],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["icon","","matRipple","","mat-dialog-close",""],[1,"p-4","overflow-auto","max-h-[65vh]",3,"formGroup"],[1,"flex","items-center","space-x-2"],["class","flex flex-col",4,"ngIf"],[1,"flex","items-center"],[1,"flex-none","w-28","min-w-0"],["formControlName","accept_points"],["list","",1,"flex","items-center","flex-wrap","max-w-lg"],[3,"ngModel","ngModelOptions","ngModelChange"],[1,"flex-1","w-24","min-w-0"],["formControlName","discount_cap",1,"border","border-gray-200","rounded",3,"min","max","step","render_fn"],[1,"flex","flex-col"],["for","title"],["appearance","outline"],["matInput","","name","name","placeholder","Item name","formControlName","name"],["for","category"],["matInput","","name","category","placeholder","Category","formControlName","category",3,"matAutocomplete"],["for","tags"],r,["aria-label","Item Tags"],["chipList",""],[3,"removed",4,"ngFor","ngForOf"],["name","tags","placeholder",t,3,"matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputAddOnBlur","matChipInputTokenEnd"],[3,"removed"],["matChipRemove",""],["for","description"],["matInput","","name","description","placeholder","Item Description","formControlName","description"],["matInput","","name","unit-price","type","number","placeholder","Unit Price","formControlName","unit_price"],["for","images"],n,["name","images","formControlName","images"],[1,"flex","p-2","items-center","justify-center","border-t","border-solid","border-gray-300"],["btn","","matRipple","",3,"disabled","click"],[1,"flex","flex-col","items-center","p-8","space-y-2","w-64"],["diameter","32"],[3,"value"]]},template:function(t,n){if(1&t&&(e.TgZ(0,"header")(1,"h3"),e._uU(2),e.qZA(),e.YNc(3,At,3,0,"button",0),e.qZA(),e.YNc(4,Dt,28,27,"form",1),e.YNc(5,Ut,3,1,"footer",2),e.YNc(6,Pt,4,0,"ng-template",null,3,e.W1O),e.TgZ(8,"mat-autocomplete",null,4),e.YNc(10,qt,2,2,"mat-option",5),e.qZA()),2&t){const a=e.MAs(7);e.xp6(2),e.hij("",n.item.id?"Edit":"Add"," Item"),e.xp6(1),e.Q6J("ngIf",!n.loading),e.xp6(1),e.Q6J("ngIf",n.form&&!n.loading)("ngIfElse",a),e.xp6(1),e.Q6J("ngIf",!n.loading),e.xp6(5),e.Q6J("ngForOf",n.categories)}},dependencies:[_.sg,_.O5,re.XC,h.ey,re.ZL,T.ZT,D.oG,m._Y,m.Fj,m.wV,m.JJ,m.JL,m.On,m.sg,m.u,x.o,Z.KE,Z.TO,h.wG,B.Nt,L.Ou,se.RA,se.oH,se.qH,se.z3,ge.R,kt.h],styles:["[list][_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]{margin:.5rem}\n/*# sourceMappingURL=catering-item-modal.component.ts-angular-inline--81.css.map*/"]}),i})();var S=l(7502),z=l(4139),ce=l(9151),H=l(9095),le=l(7418),k=l(6942),de=l(8759),K=l(9128),F=l(3910),X=l(5912),Ae=l(3245);function Bt(i,r){1&i&&(e.TgZ(0,"button",6)(1,"app-icon"),e._uU(2,"close"),e.qZA()())}function Jt(i,r){if(1&i&&(e.TgZ(0,"div",9)(1,"label",10),e._uU(2," Name"),e.TgZ(3,"span"),e._uU(4,"*"),e.qZA(),e._uU(5,": "),e.qZA(),e.TgZ(6,"mat-form-field",11),e._UZ(7,"input",12),e.TgZ(8,"mat-error"),e._uU(9,"Name is required"),e.qZA()()()),2&i){const t=e.oxw(2);e.xp6(1),e.ekj("error",t.form.controls.name.invalid&&t.form.controls.name.touched)}}function Gt(i,r){if(1&i&&(e.TgZ(0,"div",9)(1,"label",13),e._uU(2," Type"),e.TgZ(3,"span"),e._uU(4,"*"),e.qZA(),e._uU(5,": "),e.qZA(),e.TgZ(6,"mat-form-field",11),e._UZ(7,"input",14),e.TgZ(8,"mat-error"),e._uU(9,"Type is required"),e.qZA()()()),2&i){const t=e.oxw(2),n=e.MAs(9);e.xp6(1),e.ekj("error",t.form.controls.group.invalid&&t.form.controls.group.touched),e.xp6(6),e.Q6J("matAutocomplete",n)}}function Qt(i,r){1&i&&(e.TgZ(0,"div",9)(1,"label",10),e._uU(2,"Unit Price:"),e.qZA(),e.TgZ(3,"mat-form-field",11),e._UZ(4,"input",15),e.qZA()())}function Ht(i,r){1&i&&(e.TgZ(0,"div",9)(1,"mat-checkbox",16),e._uU(2," Can select multiple of type "),e.qZA()())}function jt(i,r){if(1&i&&(e.TgZ(0,"form",7),e.YNc(1,Jt,10,2,"div",8),e.YNc(2,Gt,10,3,"div",8),e.YNc(3,Qt,5,0,"div",8),e.YNc(4,Ht,3,0,"div",8),e.qZA()),2&i){const t=e.oxw();e.Q6J("formGroup",t.form),e.xp6(1),e.Q6J("ngIf",t.form.controls.name),e.xp6(1),e.Q6J("ngIf",t.form.controls.group),e.xp6(1),e.Q6J("ngIf",t.form.controls.unit_price),e.xp6(1),e.Q6J("ngIf",t.form.controls.multiple)}}function $t(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"footer",17)(1,"button",18),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.saveChanges())}),e._uU(2," Save "),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("disabled",!t.form.dirty)}}function Yt(i,r){1&i&&(e.TgZ(0,"div",19),e._UZ(1,"mat-spinner",20),e.TgZ(2,"p"),e._uU(3,"Saving catering item option..."),e.qZA()())}function Vt(i,r){if(1&i&&(e.TgZ(0,"mat-option",21),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}let Oe=(()=>{class i{get option(){return this._data.option}get types(){return this._data.types||[]}constructor(t){this._data=t,this.event=new e.vpe,this.form=new m.cw({name:new m.NI(this.option.name||"",[m.kI.required]),group:new m.NI(this.option.group||"",[m.kI.required]),unit_price:new m.NI(this.option.unit_price),multiple:new m.NI(!!this.option.multiple,[])}),this.loading=!1}saveChanges(){this.loading=!0;const t={...this.option,id:this.option.id||`option-${(0,Ae.Iy)(99999999)}`,...this.form.value};this.event.emit({reason:"done",metadata:{item:new M.U({...this._data.parent,options:this._data.parent.options.filter(n=>n.id!==t.id).concat([t])})}})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(T.WI))},i.\u0275cmp=e.Xpm({type:i,selectors:[["catering-option-modal"]],outputs:{event:"event"},decls:11,vars:6,consts:[["icon","","mat-dialog-close","",4,"ngIf"],["class","p-4 overflow-auto max-h-[65vh]",3,"formGroup",4,"ngIf","ngIfElse"],["class","flex p-2 items-center justify-center border-t border-solid border-gray-300",4,"ngIf"],["load_state",""],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["icon","","mat-dialog-close",""],[1,"p-4","overflow-auto","max-h-[65vh]",3,"formGroup"],["class","flex flex-col",4,"ngIf"],[1,"flex","flex-col"],["for","title"],["appearance","outline"],["matInput","","name","name","placeholder","Item name","formControlName","name"],["for","group"],["matInput","","name","group","placeholder","Type of option e.g. Number of sugars","formControlName","group",3,"matAutocomplete"],["matInput","","name","unit-price","type","number","placeholder","Unit Price","formControlName","unit_price"],["name","multiple","formControlName","multiple"],[1,"flex","p-2","items-center","justify-center","border-t","border-solid","border-gray-300"],["btn","","matRipple","",3,"disabled","click"],["loading","",1,"flex","flex-col","items-center","p-8","space-y-2","w-64"],["diameter","32"],[3,"value"]],template:function(t,n){if(1&t&&(e.TgZ(0,"header")(1,"h3"),e._uU(2),e.qZA(),e.YNc(3,Bt,3,0,"button",0),e.qZA(),e.YNc(4,jt,5,5,"form",1),e.YNc(5,$t,3,1,"footer",2),e.YNc(6,Yt,4,0,"ng-template",null,3,e.W1O),e.TgZ(8,"mat-autocomplete",null,4),e.YNc(10,Vt,2,2,"mat-option",5),e.qZA()),2&t){const a=e.MAs(7);e.xp6(2),e.hij("",n.option.id?"Edit":"Add"," Item Option"),e.xp6(1),e.Q6J("ngIf",!n.loading),e.xp6(1),e.Q6J("ngIf",n.form&&!n.loading)("ngIfElse",a),e.xp6(1),e.Q6J("ngIf",!n.loading),e.xp6(5),e.Q6J("ngForOf",n.types)}},dependencies:[_.sg,_.O5,re.XC,h.ey,re.ZL,T.ZT,D.oG,m._Y,m.Fj,m.wV,m.JJ,m.JL,m.sg,m.u,x.o,Z.KE,Z.TO,h.wG,B.Nt,L.Ou]}),i})();var R=l(5163),Ne=l(475),Wt=l(2757),zt=l(1170),Kt=l(7367);function Re(i,r){(0,zt.Z)(2,arguments);var t=(0,Kt.Z)(r);return(0,Wt.Z)(i,-t)}var Ee=l(1233),Le=l(6119),Se=l(8025);function Fe(i,r,t){let n=!0;for(const a of r)if(i.category===a.name||i.tags.includes(a.name)||t.resources.find(o=>o.zones.includes(a.name))||t.space?.zones.includes(a.name)||"*"===a.name){let o=0;for(const s of a.rules){const c=new Date(t.date);switch(s[0]){case"is_before":o+=(0,Ne.Z)(Date.now(),Re(c,s[1]))?1:0;break;case"within_hours":o+=(0,Ee.Z)(Date.now(),Re(c,s[1]))?1:0;break;case"after_hour":o+=(0,Ee.Z)(c,(0,Le.Z)(c,s[1]))?1:0;break;case"before_hour":o+=(0,Ne.Z)(c,(0,Le.Z)(c,s[1]))?1:0;break;case"min_length":o+=t.duration>=(0,Se.H1)(s[1])?1:0;break;case"max_length":o+=t.duration<=(0,Se.H1)(s[1])?1:0;break;case"visitor_type":o+=t.ext("visitor_type")===s[1]?1:0;break;default:o+=1}}n=o>=a.rules.length}return n}var ee=l(2035),en=l(8577),De=l(6958),te=l(4564),ne=l(6957),me=l(2218),fe=l(6312),be=l(8623),tn=l(6439),nn=l(7473),an=l(1942),Ce=l(5722),on=l(3298),ie=l(5921),rn=l(6276),I=l(2223),N=l(867),ve=l(9015),_e=l(5712);function sn(i,r){}const cn=function(i){return{animationDuration:i}},ln=function(i,r){return{value:i,params:r}};function dn(i,r){1&i&&e.Hsn(0)}const Ue=["*"],mn=["tabListContainer"],_n=["tabList"],un=["tabListInner"],pn=["nextPaginator"],gn=["previousPaginator"],hn=["tabBodyWrapper"],fn=["tabHeader"];function bn(i,r){}function Cn(i,r){if(1&i&&e.YNc(0,bn,0,0,"ng-template",14),2&i){const t=e.oxw().$implicit;e.Q6J("cdkPortalOutlet",t.templateLabel)}}function vn(i,r){if(1&i&&e._uU(0),2&i){const t=e.oxw().$implicit;e.Oqu(t.textLabel)}}function xn(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",6,7),e.NdJ("click",function(){const a=e.CHM(t),o=a.$implicit,s=a.index,c=e.oxw(),d=e.MAs(1);return e.KtG(c._handleClick(o,d,s))})("cdkFocusChange",function(a){const s=e.CHM(t).index,c=e.oxw();return e.KtG(c._tabFocusChanged(a,s))}),e._UZ(2,"span",8)(3,"div",9),e.TgZ(4,"span",10)(5,"span",11),e.YNc(6,Cn,1,1,"ng-template",12),e.YNc(7,vn,1,1,"ng-template",null,13,e.W1O),e.qZA()()()}if(2&i){const t=r.$implicit,n=r.index,a=e.MAs(1),o=e.MAs(8),s=e.oxw();e.ekj("mdc-tab--active",s.selectedIndex===n),e.Q6J("id",s._getTabLabelId(n))("ngClass",t.labelClass)("disabled",t.disabled)("fitInkBarToContent",s.fitInkBarToContent),e.uIk("tabIndex",s._getTabIndex(n))("aria-posinset",n+1)("aria-setsize",s._tabs.length)("aria-controls",s._getTabContentId(n))("aria-selected",s.selectedIndex===n)("aria-label",t.ariaLabel||null)("aria-labelledby",!t.ariaLabel&&t.ariaLabelledby?t.ariaLabelledby:null),e.xp6(3),e.Q6J("matRippleTrigger",a)("matRippleDisabled",t.disabled||s.disableRipple),e.xp6(3),e.Q6J("ngIf",t.templateLabel)("ngIfElse",o)}}function Tn(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"mat-tab-body",15),e.NdJ("_onCentered",function(){e.CHM(t);const a=e.oxw();return e.KtG(a._removeTabBodyWrapperHeight())})("_onCentering",function(a){e.CHM(t);const o=e.oxw();return e.KtG(o._setTabBodyWrapperHeight(a))}),e.qZA()}if(2&i){const t=r.$implicit,n=r.index,a=e.oxw();e.ekj("mat-mdc-tab-body-active",a.selectedIndex===n),e.Q6J("id",a._getTabContentId(n))("ngClass",t.bodyClass)("content",t.content)("position",t.position)("origin",t.origin)("animationDuration",a.animationDuration)("preserveContent",a.preserveContent),e.uIk("tabindex",null!=a.contentTabIndex&&a.selectedIndex===n?a.contentTabIndex:null)("aria-labelledby",a._getTabLabelId(n))}}const yn={translateTab:(0,I.X$)("translateTab",[(0,I.SB)("center, void, left-origin-center, right-origin-center",(0,I.oB)({transform:"none"})),(0,I.SB)("left",(0,I.oB)({transform:"translate3d(-100%, 0, 0)",minHeight:"1px",visibility:"hidden"})),(0,I.SB)("right",(0,I.oB)({transform:"translate3d(100%, 0, 0)",minHeight:"1px",visibility:"hidden"})),(0,I.eR)("* => left, * => right, left => center, right => center",(0,I.jt)("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")),(0,I.eR)("void => left-origin-center",[(0,I.oB)({transform:"translate3d(-100%, 0, 0)",visibility:"hidden"}),(0,I.jt)("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")]),(0,I.eR)("void => right-origin-center",[(0,I.oB)({transform:"translate3d(100%, 0, 0)",visibility:"hidden"}),(0,I.jt)("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")])])};let Mn=(()=>{class i extends ee.Pl{constructor(t,n,a,o){super(t,n,o),this._host=a,this._centeringSub=ne.w.EMPTY,this._leavingSub=ne.w.EMPTY}ngOnInit(){super.ngOnInit(),this._centeringSub=this._host._beforeCentering.pipe((0,Ce.O)(this._host._isCenterPosition(this._host._position))).subscribe(t=>{t&&!this.hasAttached()&&this.attach(this._host._content)}),this._leavingSub=this._host._afterLeavingCenter.subscribe(()=>{this._host.preserveContent||this.detach()})}ngOnDestroy(){super.ngOnDestroy(),this._centeringSub.unsubscribe(),this._leavingSub.unsubscribe()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e._Vd),e.Y36(e.s_b),e.Y36((0,e.Gpc)(()=>Pe)),e.Y36(_.K0))},i.\u0275dir=e.lG2({type:i,selectors:[["","matTabBodyHost",""]],features:[e.qOj]}),i})(),wn=(()=>{class i{set position(t){this._positionIndex=t,this._computePositionAnimationState()}constructor(t,n,a){this._elementRef=t,this._dir=n,this._dirChangeSubscription=ne.w.EMPTY,this._translateTabComplete=new me.xQ,this._onCentering=new e.vpe,this._beforeCentering=new e.vpe,this._afterLeavingCenter=new e.vpe,this._onCentered=new e.vpe(!0),this.animationDuration="500ms",this.preserveContent=!1,n&&(this._dirChangeSubscription=n.change.subscribe(o=>{this._computePositionAnimationState(o),a.markForCheck()})),this._translateTabComplete.pipe((0,on.x)((o,s)=>o.fromState===s.fromState&&o.toState===s.toState)).subscribe(o=>{this._isCenterPosition(o.toState)&&this._isCenterPosition(this._position)&&this._onCentered.emit(),this._isCenterPosition(o.fromState)&&!this._isCenterPosition(this._position)&&this._afterLeavingCenter.emit()})}ngOnInit(){"center"==this._position&&null!=this.origin&&(this._position=this._computePositionFromOrigin(this.origin))}ngOnDestroy(){this._dirChangeSubscription.unsubscribe(),this._translateTabComplete.complete()}_onTranslateTabStarted(t){const n=this._isCenterPosition(t.toState);this._beforeCentering.emit(n),n&&this._onCentering.emit(this._elementRef.nativeElement.clientHeight)}_getLayoutDirection(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}_isCenterPosition(t){return"center"==t||"left-origin-center"==t||"right-origin-center"==t}_computePositionAnimationState(t=this._getLayoutDirection()){this._position=this._positionIndex<0?"ltr"==t?"left":"right":this._positionIndex>0?"ltr"==t?"right":"left":"center"}_computePositionFromOrigin(t){const n=this._getLayoutDirection();return"ltr"==n&&t<=0||"rtl"==n&&t>0?"left-origin-center":"right-origin-center"}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.SBq),e.Y36(te.Is,8),e.Y36(e.sBO))},i.\u0275dir=e.lG2({type:i,inputs:{_content:["content","_content"],origin:"origin",animationDuration:"animationDuration",preserveContent:"preserveContent",position:"position"},outputs:{_onCentering:"_onCentering",_beforeCentering:"_beforeCentering",_afterLeavingCenter:"_afterLeavingCenter",_onCentered:"_onCentered"}}),i})(),Pe=(()=>{class i extends wn{constructor(t,n,a){super(t,n,a)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.SBq),e.Y36(te.Is,8),e.Y36(e.sBO))},i.\u0275cmp=e.Xpm({type:i,selectors:[["mat-tab-body"]],viewQuery:function(t,n){if(1&t&&e.Gf(ee.Pl,5),2&t){let a;e.iGM(a=e.CRH())&&(n._portalHost=a.first)}},hostAttrs:[1,"mat-mdc-tab-body"],features:[e.qOj],decls:3,vars:6,consts:[["cdkScrollable","",1,"mat-mdc-tab-body-content"],["content",""],["matTabBodyHost",""]],template:function(t,n){1&t&&(e.TgZ(0,"div",0,1),e.NdJ("@translateTab.start",function(o){return n._onTranslateTabStarted(o)})("@translateTab.done",function(o){return n._translateTabComplete.next(o)}),e.YNc(2,sn,0,0,"ng-template",2),e.qZA()),2&t&&e.Q6J("@translateTab",e.WLB(3,ln,n._position,e.VKq(1,cn,n.animationDuration)))},dependencies:[Mn],styles:['.mat-mdc-tab-body{top:0;left:0;right:0;bottom:0;position:absolute;display:block;overflow:hidden;outline:0;flex-basis:100%}.mat-mdc-tab-body.mat-mdc-tab-body-active{position:relative;overflow-x:hidden;overflow-y:auto;z-index:1;flex-grow:1}.mat-mdc-tab-group.mat-mdc-tab-group-dynamic-height .mat-mdc-tab-body.mat-mdc-tab-body-active{overflow-y:hidden}.mat-mdc-tab-body-content{height:100%;overflow:auto}.mat-mdc-tab-group-dynamic-height .mat-mdc-tab-body-content{overflow:hidden}.mat-mdc-tab-body-content[style*="visibility: hidden"]{display:none}'],encapsulation:2,data:{animation:[yn.translateTab]}}),i})();const In=new e.OlP("MatTabContent");let Zn=(()=>{class i{constructor(t){this.template=t}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.Rgc))},i.\u0275dir=e.lG2({type:i,selectors:[["","matTabContent",""]],features:[e._Bn([{provide:In,useExisting:i}])]}),i})();const kn=new e.OlP("MatTabLabel"),qe=new e.OlP("MAT_TAB");let An=(()=>{class i extends ee.ig{constructor(t,n,a){super(t,n),this._closestTab=a}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.Rgc),e.Y36(e.s_b),e.Y36(qe,8))},i.\u0275dir=e.lG2({type:i,selectors:[["","mat-tab-label",""],["","matTabLabel",""]],features:[e._Bn([{provide:kn,useExisting:i}]),e.qOj]}),i})();const xe="mdc-tab-indicator--active",Be="mdc-tab-indicator--no-transition";class On{constructor(r){this._items=r}hide(){this._items.forEach(r=>r.deactivateInkBar())}alignToElement(r){const t=this._items.find(a=>a.elementRef.nativeElement===r),n=this._currentItem;if(t!==n&&(n?.deactivateInkBar(),t)){const a=n?.elementRef.nativeElement.getBoundingClientRect?.();t.activateInkBar(a),this._currentItem=t}}}function Nn(i){return class extends i{constructor(...r){super(...r),this._fitToContent=!1}get fitInkBarToContent(){return this._fitToContent}set fitInkBarToContent(r){const t=(0,N.Ig)(r);this._fitToContent!==t&&(this._fitToContent=t,this._inkBarElement&&this._appendInkBarElement())}activateInkBar(r){const t=this.elementRef.nativeElement;if(!r||!t.getBoundingClientRect||!this._inkBarContentElement)return void t.classList.add(xe);const n=t.getBoundingClientRect(),a=r.width/n.width,o=r.left-n.left;t.classList.add(Be),this._inkBarContentElement.style.setProperty("transform",`translateX(${o}px) scaleX(${a})`),t.getBoundingClientRect(),t.classList.remove(Be),t.classList.add(xe),this._inkBarContentElement.style.setProperty("transform","")}deactivateInkBar(){this.elementRef.nativeElement.classList.remove(xe)}ngOnInit(){this._createInkBarElement()}ngOnDestroy(){this._inkBarElement?.remove(),this._inkBarElement=this._inkBarContentElement=null}_createInkBarElement(){const r=this.elementRef.nativeElement.ownerDocument||document;this._inkBarElement=r.createElement("span"),this._inkBarContentElement=r.createElement("span"),this._inkBarElement.className="mdc-tab-indicator",this._inkBarContentElement.className="mdc-tab-indicator__content mdc-tab-indicator__content--underline",this._inkBarElement.appendChild(this._inkBarContentElement),this._appendInkBarElement()}_appendInkBarElement(){(this._fitToContent?this.elementRef.nativeElement.querySelector(".mdc-tab__content"):this.elementRef.nativeElement).appendChild(this._inkBarElement)}}}const En=(0,h.Id)(class{}),Ln=Nn((()=>{class i extends En{constructor(t){super(),this.elementRef=t}focus(){this.elementRef.nativeElement.focus()}getOffsetLeft(){return this.elementRef.nativeElement.offsetLeft}getOffsetWidth(){return this.elementRef.nativeElement.offsetWidth}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.SBq))},i.\u0275dir=e.lG2({type:i,features:[e.qOj]}),i})());let Je=(()=>{class i extends Ln{}return i.\u0275fac=function(){let r;return function(n){return(r||(r=e.n5z(i)))(n||i)}}(),i.\u0275dir=e.lG2({type:i,selectors:[["","matTabLabelWrapper",""]],hostVars:3,hostBindings:function(t,n){2&t&&(e.uIk("aria-disabled",!!n.disabled),e.ekj("mat-mdc-tab-disabled",n.disabled))},inputs:{disabled:"disabled",fitInkBarToContent:"fitInkBarToContent"},features:[e.qOj]}),i})();const Sn=(0,h.Id)(class{}),Ge=new e.OlP("MAT_TAB_GROUP");let Fn=(()=>{class i extends Sn{get content(){return this._contentPortal}constructor(t,n){super(),this._viewContainerRef=t,this._closestTabGroup=n,this.textLabel="",this._contentPortal=null,this._stateChanges=new me.xQ,this.position=null,this.origin=null,this.isActive=!1}ngOnChanges(t){(t.hasOwnProperty("textLabel")||t.hasOwnProperty("disabled"))&&this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}ngOnInit(){this._contentPortal=new ee.UE(this._explicitContent||this._implicitContent,this._viewContainerRef)}_setTemplateLabelInput(t){t&&t._closestTab===this&&(this._templateLabel=t)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.s_b),e.Y36(Ge,8))},i.\u0275dir=e.lG2({type:i,viewQuery:function(t,n){if(1&t&&e.Gf(e.Rgc,7),2&t){let a;e.iGM(a=e.CRH())&&(n._implicitContent=a.first)}},inputs:{textLabel:["label","textLabel"],ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],labelClass:"labelClass",bodyClass:"bodyClass"},features:[e.qOj,e.TTD]}),i})(),Te=(()=>{class i extends Fn{constructor(){super(...arguments),this._explicitContent=void 0}get templateLabel(){return this._templateLabel}set templateLabel(t){this._setTemplateLabelInput(t)}}return i.\u0275fac=function(){let r;return function(n){return(r||(r=e.n5z(i)))(n||i)}}(),i.\u0275cmp=e.Xpm({type:i,selectors:[["mat-tab"]],contentQueries:function(t,n,a){if(1&t&&(e.Suo(a,Zn,7,e.Rgc),e.Suo(a,An,5)),2&t){let o;e.iGM(o=e.CRH())&&(n._explicitContent=o.first),e.iGM(o=e.CRH())&&(n.templateLabel=o.first)}},inputs:{disabled:"disabled"},exportAs:["matTab"],features:[e._Bn([{provide:qe,useExisting:i}]),e.qOj],ngContentSelectors:Ue,decls:1,vars:0,template:function(t,n){1&t&&(e.F$t(),e.YNc(0,dn,1,0,"ng-template"))},encapsulation:2}),i})();const Qe=(0,_e.i$)({passive:!0});let Pn=(()=>{class i{get disablePagination(){return this._disablePagination}set disablePagination(t){this._disablePagination=(0,N.Ig)(t)}get selectedIndex(){return this._selectedIndex}set selectedIndex(t){t=(0,N.su)(t),this._selectedIndex!=t&&(this._selectedIndexChanged=!0,this._selectedIndex=t,this._keyManager&&this._keyManager.updateActiveItem(t))}constructor(t,n,a,o,s,c,d){this._elementRef=t,this._changeDetectorRef=n,this._viewportRuler=a,this._dir=o,this._ngZone=s,this._platform=c,this._animationMode=d,this._scrollDistance=0,this._selectedIndexChanged=!1,this._destroyed=new me.xQ,this._showPaginationControls=!1,this._disableScrollAfter=!0,this._disableScrollBefore=!0,this._stopScrolling=new me.xQ,this._disablePagination=!1,this._selectedIndex=0,this.selectFocusedIndex=new e.vpe,this.indexFocused=new e.vpe,s.runOutsideAngular(()=>{(0,fe.R)(t.nativeElement,"mouseleave").pipe((0,ie.R)(this._destroyed)).subscribe(()=>{this._stopInterval()})})}ngAfterViewInit(){(0,fe.R)(this._previousPaginator.nativeElement,"touchstart",Qe).pipe((0,ie.R)(this._destroyed)).subscribe(()=>{this._handlePaginatorPress("before")}),(0,fe.R)(this._nextPaginator.nativeElement,"touchstart",Qe).pipe((0,ie.R)(this._destroyed)).subscribe(()=>{this._handlePaginatorPress("after")})}ngAfterContentInit(){const t=this._dir?this._dir.change:(0,z.of)("ltr"),n=this._viewportRuler.change(150),a=()=>{this.updatePagination(),this._alignInkBarToSelectedTab()};this._keyManager=new De.Em(this._items).withHorizontalOrientation(this._getLayoutDirection()).withHomeAndEnd().withWrap().skipPredicate(()=>!1),this._keyManager.updateActiveItem(this._selectedIndex),this._ngZone.onStable.pipe((0,F.q)(1)).subscribe(a),(0,be.T)(t,n,this._items.changes,this._itemsResized()).pipe((0,ie.R)(this._destroyed)).subscribe(()=>{this._ngZone.run(()=>{Promise.resolve().then(()=>{this._scrollDistance=Math.max(0,Math.min(this._getMaxScrollDistance(),this._scrollDistance)),a()})}),this._keyManager.withHorizontalOrientation(this._getLayoutDirection())}),this._keyManager.change.subscribe(o=>{this.indexFocused.emit(o),this._setTabFocus(o)})}_itemsResized(){return"function"!=typeof ResizeObserver?tn.E:this._items.changes.pipe((0,Ce.O)(this._items),(0,H.w)(t=>new nn.y(n=>this._ngZone.runOutsideAngular(()=>{const a=new ResizeObserver(o=>n.next(o));return t.forEach(o=>a.observe(o.elementRef.nativeElement)),()=>{a.disconnect()}}))),(0,rn.T)(1),(0,ce.h)(t=>t.some(n=>n.contentRect.width>0&&n.contentRect.height>0)))}ngAfterContentChecked(){this._tabLabelCount!=this._items.length&&(this.updatePagination(),this._tabLabelCount=this._items.length,this._changeDetectorRef.markForCheck()),this._selectedIndexChanged&&(this._scrollToLabel(this._selectedIndex),this._checkScrollingControls(),this._alignInkBarToSelectedTab(),this._selectedIndexChanged=!1,this._changeDetectorRef.markForCheck()),this._scrollDistanceChanged&&(this._updateTabScrollPosition(),this._scrollDistanceChanged=!1,this._changeDetectorRef.markForCheck())}ngOnDestroy(){this._keyManager?.destroy(),this._destroyed.next(),this._destroyed.complete(),this._stopScrolling.complete()}_handleKeydown(t){if(!(0,Q.Vb)(t))switch(t.keyCode){case Q.K5:case Q.L_:if(this.focusIndex!==this.selectedIndex){const n=this._items.get(this.focusIndex);n&&!n.disabled&&(this.selectFocusedIndex.emit(this.focusIndex),this._itemSelected(t))}break;default:this._keyManager.onKeydown(t)}}_onContentChanges(){const t=this._elementRef.nativeElement.textContent;t!==this._currentTextContent&&(this._currentTextContent=t||"",this._ngZone.run(()=>{this.updatePagination(),this._alignInkBarToSelectedTab(),this._changeDetectorRef.markForCheck()}))}updatePagination(){this._checkPaginationEnabled(),this._checkScrollingControls(),this._updateTabScrollPosition()}get focusIndex(){return this._keyManager?this._keyManager.activeItemIndex:0}set focusIndex(t){!this._isValidIndex(t)||this.focusIndex===t||!this._keyManager||this._keyManager.setActiveItem(t)}_isValidIndex(t){return!this._items||!!this._items.toArray()[t]}_setTabFocus(t){if(this._showPaginationControls&&this._scrollToLabel(t),this._items&&this._items.length){this._items.toArray()[t].focus();const n=this._tabListContainer.nativeElement;n.scrollLeft="ltr"==this._getLayoutDirection()?0:n.scrollWidth-n.offsetWidth}}_getLayoutDirection(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}_updateTabScrollPosition(){if(this.disablePagination)return;const t=this.scrollDistance,n="ltr"===this._getLayoutDirection()?-t:t;this._tabList.nativeElement.style.transform=`translateX(${Math.round(n)}px)`,(this._platform.TRIDENT||this._platform.EDGE)&&(this._tabListContainer.nativeElement.scrollLeft=0)}get scrollDistance(){return this._scrollDistance}set scrollDistance(t){this._scrollTo(t)}_scrollHeader(t){return this._scrollTo(this._scrollDistance+("before"==t?-1:1)*this._tabListContainer.nativeElement.offsetWidth/3)}_handlePaginatorClick(t){this._stopInterval(),this._scrollHeader(t)}_scrollToLabel(t){if(this.disablePagination)return;const n=this._items?this._items.toArray()[t]:null;if(!n)return;const a=this._tabListContainer.nativeElement.offsetWidth,{offsetLeft:o,offsetWidth:s}=n.elementRef.nativeElement;let c,d;"ltr"==this._getLayoutDirection()?(c=o,d=c+s):(d=this._tabListInner.nativeElement.offsetWidth-o,c=d-s);const u=this.scrollDistance,f=this.scrollDistance+a;c<u?this.scrollDistance-=u-c:d>f&&(this.scrollDistance+=Math.min(d-f,c-u))}_checkPaginationEnabled(){if(this.disablePagination)this._showPaginationControls=!1;else{const t=this._tabListInner.nativeElement.scrollWidth>this._elementRef.nativeElement.offsetWidth;t||(this.scrollDistance=0),t!==this._showPaginationControls&&this._changeDetectorRef.markForCheck(),this._showPaginationControls=t}}_checkScrollingControls(){this.disablePagination?this._disableScrollAfter=this._disableScrollBefore=!0:(this._disableScrollBefore=0==this.scrollDistance,this._disableScrollAfter=this.scrollDistance==this._getMaxScrollDistance(),this._changeDetectorRef.markForCheck())}_getMaxScrollDistance(){return this._tabListInner.nativeElement.scrollWidth-this._tabListContainer.nativeElement.offsetWidth||0}_alignInkBarToSelectedTab(){const t=this._items&&this._items.length?this._items.toArray()[this.selectedIndex]:null,n=t?t.elementRef.nativeElement:null;n?this._inkBar.alignToElement(n):this._inkBar.hide()}_stopInterval(){this._stopScrolling.next()}_handlePaginatorPress(t,n){n&&null!=n.button&&0!==n.button||(this._stopInterval(),(0,an.H)(650,100).pipe((0,ie.R)((0,be.T)(this._stopScrolling,this._destroyed))).subscribe(()=>{const{maxScrollDistance:a,distance:o}=this._scrollHeader(t);(0===o||o>=a)&&this._stopInterval()}))}_scrollTo(t){if(this.disablePagination)return{maxScrollDistance:0,distance:0};const n=this._getMaxScrollDistance();return this._scrollDistance=Math.max(0,Math.min(n,t)),this._scrollDistanceChanged=!0,this._checkScrollingControls(),{maxScrollDistance:n,distance:this._scrollDistance}}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.SBq),e.Y36(e.sBO),e.Y36(ve.rL),e.Y36(te.Is,8),e.Y36(e.R0b),e.Y36(_e.t4),e.Y36(e.QbO,8))},i.\u0275dir=e.lG2({type:i,inputs:{disablePagination:"disablePagination"}}),i})(),qn=(()=>{class i extends Pn{get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=(0,N.Ig)(t)}constructor(t,n,a,o,s,c,d){super(t,n,a,o,s,c,d),this._disableRipple=!1}_itemSelected(t){t.preventDefault()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.SBq),e.Y36(e.sBO),e.Y36(ve.rL),e.Y36(te.Is,8),e.Y36(e.R0b),e.Y36(_e.t4),e.Y36(e.QbO,8))},i.\u0275dir=e.lG2({type:i,inputs:{disableRipple:"disableRipple"},features:[e.qOj]}),i})(),Bn=(()=>{class i extends qn{constructor(t,n,a,o,s,c,d){super(t,n,a,o,s,c,d)}ngAfterContentInit(){this._inkBar=new On(this._items),super.ngAfterContentInit()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.SBq),e.Y36(e.sBO),e.Y36(ve.rL),e.Y36(te.Is,8),e.Y36(e.R0b),e.Y36(_e.t4),e.Y36(e.QbO,8))},i.\u0275cmp=e.Xpm({type:i,selectors:[["mat-tab-header"]],contentQueries:function(t,n,a){if(1&t&&e.Suo(a,Je,4),2&t){let o;e.iGM(o=e.CRH())&&(n._items=o)}},viewQuery:function(t,n){if(1&t&&(e.Gf(mn,7),e.Gf(_n,7),e.Gf(un,7),e.Gf(pn,5),e.Gf(gn,5)),2&t){let a;e.iGM(a=e.CRH())&&(n._tabListContainer=a.first),e.iGM(a=e.CRH())&&(n._tabList=a.first),e.iGM(a=e.CRH())&&(n._tabListInner=a.first),e.iGM(a=e.CRH())&&(n._nextPaginator=a.first),e.iGM(a=e.CRH())&&(n._previousPaginator=a.first)}},hostAttrs:[1,"mat-mdc-tab-header"],hostVars:4,hostBindings:function(t,n){2&t&&e.ekj("mat-mdc-tab-header-pagination-controls-enabled",n._showPaginationControls)("mat-mdc-tab-header-rtl","rtl"==n._getLayoutDirection())},inputs:{selectedIndex:"selectedIndex"},outputs:{selectFocusedIndex:"selectFocusedIndex",indexFocused:"indexFocused"},features:[e.qOj],ngContentSelectors:Ue,decls:13,vars:10,consts:[["aria-hidden","true","type","button","mat-ripple","","tabindex","-1",1,"mat-mdc-tab-header-pagination","mat-mdc-tab-header-pagination-before",3,"matRippleDisabled","disabled","click","mousedown","touchend"],["previousPaginator",""],[1,"mat-mdc-tab-header-pagination-chevron"],[1,"mat-mdc-tab-label-container",3,"keydown"],["tabListContainer",""],["role","tablist",1,"mat-mdc-tab-list",3,"cdkObserveContent"],["tabList",""],[1,"mat-mdc-tab-labels"],["tabListInner",""],["aria-hidden","true","type","button","mat-ripple","","tabindex","-1",1,"mat-mdc-tab-header-pagination","mat-mdc-tab-header-pagination-after",3,"matRippleDisabled","disabled","mousedown","click","touchend"],["nextPaginator",""]],template:function(t,n){1&t&&(e.F$t(),e.TgZ(0,"button",0,1),e.NdJ("click",function(){return n._handlePaginatorClick("before")})("mousedown",function(o){return n._handlePaginatorPress("before",o)})("touchend",function(){return n._stopInterval()}),e._UZ(2,"div",2),e.qZA(),e.TgZ(3,"div",3,4),e.NdJ("keydown",function(o){return n._handleKeydown(o)}),e.TgZ(5,"div",5,6),e.NdJ("cdkObserveContent",function(){return n._onContentChanges()}),e.TgZ(7,"div",7,8),e.Hsn(9),e.qZA()()(),e.TgZ(10,"button",9,10),e.NdJ("mousedown",function(o){return n._handlePaginatorPress("after",o)})("click",function(){return n._handlePaginatorClick("after")})("touchend",function(){return n._stopInterval()}),e._UZ(12,"div",2),e.qZA()),2&t&&(e.ekj("mat-mdc-tab-header-pagination-disabled",n._disableScrollBefore),e.Q6J("matRippleDisabled",n._disableScrollBefore||n.disableRipple)("disabled",n._disableScrollBefore||null),e.xp6(3),e.ekj("_mat-animation-noopable","NoopAnimations"===n._animationMode),e.xp6(7),e.ekj("mat-mdc-tab-header-pagination-disabled",n._disableScrollAfter),e.Q6J("matRippleDisabled",n._disableScrollAfter||n.disableRipple)("disabled",n._disableScrollAfter||null))},dependencies:[h.wG,en.wD],styles:[".mat-mdc-tab-header{display:flex;overflow:hidden;position:relative;flex-shrink:0;--mdc-tab-indicator-active-indicator-height:2px;--mdc-tab-indicator-active-indicator-shape:0;--mdc-secondary-navigation-tab-container-height:48px}.mat-mdc-tab-header-pagination{-webkit-user-select:none;user-select:none;position:relative;display:none;justify-content:center;align-items:center;min-width:32px;cursor:pointer;z-index:2;-webkit-tap-highlight-color:rgba(0,0,0,0);touch-action:none;box-sizing:content-box;background:none;border:none;outline:0;padding:0}.mat-mdc-tab-header-pagination::-moz-focus-inner{border:0}.mat-mdc-tab-header-pagination .mat-ripple-element{opacity:.12;background-color:var(--mat-tab-header-inactive-ripple-color)}.mat-mdc-tab-header-pagination-controls-enabled .mat-mdc-tab-header-pagination{display:flex}.mat-mdc-tab-header-pagination-before,.mat-mdc-tab-header-rtl .mat-mdc-tab-header-pagination-after{padding-left:4px}.mat-mdc-tab-header-pagination-before .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-header-rtl .mat-mdc-tab-header-pagination-after .mat-mdc-tab-header-pagination-chevron{transform:rotate(-135deg)}.mat-mdc-tab-header-rtl .mat-mdc-tab-header-pagination-before,.mat-mdc-tab-header-pagination-after{padding-right:4px}.mat-mdc-tab-header-rtl .mat-mdc-tab-header-pagination-before .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-header-pagination-after .mat-mdc-tab-header-pagination-chevron{transform:rotate(45deg)}.mat-mdc-tab-header-pagination-chevron{border-style:solid;border-width:2px 2px 0 0;height:8px;width:8px;border-color:var(--mat-tab-header-pagination-icon-color)}.mat-mdc-tab-header-pagination-disabled{box-shadow:none;cursor:default;pointer-events:none}.mat-mdc-tab-header-pagination-disabled .mat-mdc-tab-header-pagination-chevron{opacity:.4}.mat-mdc-tab-list{flex-grow:1;position:relative;transition:transform 500ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-mdc-tab-list{transition:none}._mat-animation-noopable span.mdc-tab-indicator__content,._mat-animation-noopable span.mdc-tab__text-label{transition:none}.mat-mdc-tab-label-container{display:flex;flex-grow:1;overflow:hidden;z-index:1}.mat-mdc-tab-labels{display:flex;flex:1 0 auto}[mat-align-tabs=center]>.mat-mdc-tab-header .mat-mdc-tab-labels{justify-content:center}[mat-align-tabs=end]>.mat-mdc-tab-header .mat-mdc-tab-labels{justify-content:flex-end}.mat-mdc-tab::before{margin:5px}.cdk-high-contrast-active .mat-mdc-tab[aria-disabled=true]{color:GrayText}"],encapsulation:2}),i})();const He=new e.OlP("MAT_TABS_CONFIG");let Jn=0;const Gn=(0,h.pj)((0,h.Kr)(class{constructor(i){this._elementRef=i}}),"primary");let Qn=(()=>{class i extends Gn{get dynamicHeight(){return this._dynamicHeight}set dynamicHeight(t){this._dynamicHeight=(0,N.Ig)(t)}get selectedIndex(){return this._selectedIndex}set selectedIndex(t){this._indexToSelect=(0,N.su)(t,null)}get animationDuration(){return this._animationDuration}set animationDuration(t){this._animationDuration=/^\d+$/.test(t+"")?t+"ms":t}get contentTabIndex(){return this._contentTabIndex}set contentTabIndex(t){this._contentTabIndex=(0,N.su)(t,null)}get disablePagination(){return this._disablePagination}set disablePagination(t){this._disablePagination=(0,N.Ig)(t)}get preserveContent(){return this._preserveContent}set preserveContent(t){this._preserveContent=(0,N.Ig)(t)}get backgroundColor(){return this._backgroundColor}set backgroundColor(t){const n=this._elementRef.nativeElement.classList;n.remove("mat-tabs-with-background",`mat-background-${this.backgroundColor}`),t&&n.add("mat-tabs-with-background",`mat-background-${t}`),this._backgroundColor=t}constructor(t,n,a,o){super(t),this._changeDetectorRef=n,this._animationMode=o,this._tabs=new e.n_E,this._indexToSelect=0,this._lastFocusedTabIndex=null,this._tabBodyWrapperHeight=0,this._tabsSubscription=ne.w.EMPTY,this._tabLabelSubscription=ne.w.EMPTY,this._dynamicHeight=!1,this._selectedIndex=null,this.headerPosition="above",this._disablePagination=!1,this._preserveContent=!1,this.selectedIndexChange=new e.vpe,this.focusChange=new e.vpe,this.animationDone=new e.vpe,this.selectedTabChange=new e.vpe(!0),this._groupId=Jn++,this.animationDuration=a&&a.animationDuration?a.animationDuration:"500ms",this.disablePagination=!(!a||null==a.disablePagination)&&a.disablePagination,this.dynamicHeight=!(!a||null==a.dynamicHeight)&&a.dynamicHeight,this.contentTabIndex=a?.contentTabIndex??null,this.preserveContent=!!a?.preserveContent}ngAfterContentChecked(){const t=this._indexToSelect=this._clampTabIndex(this._indexToSelect);if(this._selectedIndex!=t){const n=null==this._selectedIndex;if(!n){this.selectedTabChange.emit(this._createChangeEvent(t));const a=this._tabBodyWrapper.nativeElement;a.style.minHeight=a.clientHeight+"px"}Promise.resolve().then(()=>{this._tabs.forEach((a,o)=>a.isActive=o===t),n||(this.selectedIndexChange.emit(t),this._tabBodyWrapper.nativeElement.style.minHeight="")})}this._tabs.forEach((n,a)=>{n.position=a-t,null!=this._selectedIndex&&0==n.position&&!n.origin&&(n.origin=t-this._selectedIndex)}),this._selectedIndex!==t&&(this._selectedIndex=t,this._lastFocusedTabIndex=null,this._changeDetectorRef.markForCheck())}ngAfterContentInit(){this._subscribeToAllTabChanges(),this._subscribeToTabLabels(),this._tabsSubscription=this._tabs.changes.subscribe(()=>{const t=this._clampTabIndex(this._indexToSelect);if(t===this._selectedIndex){const n=this._tabs.toArray();let a;for(let o=0;o<n.length;o++)if(n[o].isActive){this._indexToSelect=this._selectedIndex=o,this._lastFocusedTabIndex=null,a=n[o];break}!a&&n[t]&&Promise.resolve().then(()=>{n[t].isActive=!0,this.selectedTabChange.emit(this._createChangeEvent(t))})}this._changeDetectorRef.markForCheck()})}_subscribeToAllTabChanges(){this._allTabs.changes.pipe((0,Ce.O)(this._allTabs)).subscribe(t=>{this._tabs.reset(t.filter(n=>n._closestTabGroup===this||!n._closestTabGroup)),this._tabs.notifyOnChanges()})}ngOnDestroy(){this._tabs.destroy(),this._tabsSubscription.unsubscribe(),this._tabLabelSubscription.unsubscribe()}realignInkBar(){this._tabHeader&&this._tabHeader._alignInkBarToSelectedTab()}updatePagination(){this._tabHeader&&this._tabHeader.updatePagination()}focusTab(t){const n=this._tabHeader;n&&(n.focusIndex=t)}_focusChanged(t){this._lastFocusedTabIndex=t,this.focusChange.emit(this._createChangeEvent(t))}_createChangeEvent(t){const n=new Hn;return n.index=t,this._tabs&&this._tabs.length&&(n.tab=this._tabs.toArray()[t]),n}_subscribeToTabLabels(){this._tabLabelSubscription&&this._tabLabelSubscription.unsubscribe(),this._tabLabelSubscription=(0,be.T)(...this._tabs.map(t=>t._stateChanges)).subscribe(()=>this._changeDetectorRef.markForCheck())}_clampTabIndex(t){return Math.min(this._tabs.length-1,Math.max(t||0,0))}_getTabLabelId(t){return`mat-tab-label-${this._groupId}-${t}`}_getTabContentId(t){return`mat-tab-content-${this._groupId}-${t}`}_setTabBodyWrapperHeight(t){if(!this._dynamicHeight||!this._tabBodyWrapperHeight)return;const n=this._tabBodyWrapper.nativeElement;n.style.height=this._tabBodyWrapperHeight+"px",this._tabBodyWrapper.nativeElement.offsetHeight&&(n.style.height=t+"px")}_removeTabBodyWrapperHeight(){const t=this._tabBodyWrapper.nativeElement;this._tabBodyWrapperHeight=t.clientHeight,t.style.height="",this.animationDone.emit()}_handleClick(t,n,a){n.focusIndex=a,t.disabled||(this.selectedIndex=a)}_getTabIndex(t){return t===(this._lastFocusedTabIndex??this.selectedIndex)?0:-1}_tabFocusChanged(t,n){t&&"mouse"!==t&&"touch"!==t&&(this._tabHeader.focusIndex=n)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.SBq),e.Y36(e.sBO),e.Y36(He,8),e.Y36(e.QbO,8))},i.\u0275dir=e.lG2({type:i,inputs:{dynamicHeight:"dynamicHeight",selectedIndex:"selectedIndex",headerPosition:"headerPosition",animationDuration:"animationDuration",contentTabIndex:"contentTabIndex",disablePagination:"disablePagination",preserveContent:"preserveContent",backgroundColor:"backgroundColor"},outputs:{selectedIndexChange:"selectedIndexChange",focusChange:"focusChange",animationDone:"animationDone",selectedTabChange:"selectedTabChange"},features:[e.qOj]}),i})(),je=(()=>{class i extends Qn{get fitInkBarToContent(){return this._fitInkBarToContent}set fitInkBarToContent(t){this._fitInkBarToContent=(0,N.Ig)(t),this._changeDetectorRef.markForCheck()}get stretchTabs(){return this._stretchTabs}set stretchTabs(t){this._stretchTabs=(0,N.Ig)(t)}constructor(t,n,a,o){super(t,n,a,o),this._fitInkBarToContent=!1,this._stretchTabs=!0,this.fitInkBarToContent=!(!a||null==a.fitInkBarToContent)&&a.fitInkBarToContent,this.stretchTabs=!a||null==a.stretchTabs||a.stretchTabs}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.SBq),e.Y36(e.sBO),e.Y36(He,8),e.Y36(e.QbO,8))},i.\u0275cmp=e.Xpm({type:i,selectors:[["mat-tab-group"]],contentQueries:function(t,n,a){if(1&t&&e.Suo(a,Te,5),2&t){let o;e.iGM(o=e.CRH())&&(n._allTabs=o)}},viewQuery:function(t,n){if(1&t&&(e.Gf(hn,5),e.Gf(fn,5)),2&t){let a;e.iGM(a=e.CRH())&&(n._tabBodyWrapper=a.first),e.iGM(a=e.CRH())&&(n._tabHeader=a.first)}},hostAttrs:["ngSkipHydration","true",1,"mat-mdc-tab-group"],hostVars:6,hostBindings:function(t,n){2&t&&e.ekj("mat-mdc-tab-group-dynamic-height",n.dynamicHeight)("mat-mdc-tab-group-inverted-header","below"===n.headerPosition)("mat-mdc-tab-group-stretch-tabs",n.stretchTabs)},inputs:{color:"color",disableRipple:"disableRipple",fitInkBarToContent:"fitInkBarToContent",stretchTabs:["mat-stretch-tabs","stretchTabs"]},exportAs:["matTabGroup"],features:[e._Bn([{provide:Ge,useExisting:i}]),e.qOj],decls:6,vars:7,consts:[[3,"selectedIndex","disableRipple","disablePagination","indexFocused","selectFocusedIndex"],["tabHeader",""],["class","mdc-tab mat-mdc-tab mat-mdc-focus-indicator","role","tab","matTabLabelWrapper","","cdkMonitorElementFocus","",3,"id","mdc-tab--active","ngClass","disabled","fitInkBarToContent","click","cdkFocusChange",4,"ngFor","ngForOf"],[1,"mat-mdc-tab-body-wrapper"],["tabBodyWrapper",""],["role","tabpanel",3,"id","mat-mdc-tab-body-active","ngClass","content","position","origin","animationDuration","preserveContent","_onCentered","_onCentering",4,"ngFor","ngForOf"],["role","tab","matTabLabelWrapper","","cdkMonitorElementFocus","",1,"mdc-tab","mat-mdc-tab","mat-mdc-focus-indicator",3,"id","ngClass","disabled","fitInkBarToContent","click","cdkFocusChange"],["tabNode",""],[1,"mdc-tab__ripple"],["mat-ripple","",1,"mat-mdc-tab-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mdc-tab__content"],[1,"mdc-tab__text-label"],[3,"ngIf","ngIfElse"],["tabTextLabel",""],[3,"cdkPortalOutlet"],["role","tabpanel",3,"id","ngClass","content","position","origin","animationDuration","preserveContent","_onCentered","_onCentering"]],template:function(t,n){1&t&&(e.TgZ(0,"mat-tab-header",0,1),e.NdJ("indexFocused",function(o){return n._focusChanged(o)})("selectFocusedIndex",function(o){return n.selectedIndex=o}),e.YNc(2,xn,9,17,"div",2),e.qZA(),e.TgZ(3,"div",3,4),e.YNc(5,Tn,1,11,"mat-tab-body",5),e.qZA()),2&t&&(e.Q6J("selectedIndex",n.selectedIndex||0)("disableRipple",n.disableRipple)("disablePagination",n.disablePagination),e.xp6(2),e.Q6J("ngForOf",n._tabs),e.xp6(1),e.ekj("_mat-animation-noopable","NoopAnimations"===n._animationMode),e.xp6(2),e.Q6J("ngForOf",n._tabs))},dependencies:[_.mk,_.sg,_.O5,ee.Pl,h.wG,De.kH,Pe,Je,Bn],styles:['.mdc-tab{min-width:90px;padding-right:24px;padding-left:24px;display:flex;flex:1 0 auto;justify-content:center;box-sizing:border-box;margin:0;padding-top:0;padding-bottom:0;border:none;outline:none;text-align:center;white-space:nowrap;cursor:pointer;-webkit-appearance:none;z-index:1}.mdc-tab::-moz-focus-inner{padding:0;border:0}.mdc-tab[hidden]{display:none}.mdc-tab--min-width{flex:0 1 auto}.mdc-tab__content{display:flex;align-items:center;justify-content:center;height:inherit;pointer-events:none}.mdc-tab__text-label{transition:150ms color linear;display:inline-block;line-height:1;z-index:2}.mdc-tab__icon{transition:150ms color linear;z-index:2}.mdc-tab--stacked .mdc-tab__content{flex-direction:column;align-items:center;justify-content:center}.mdc-tab--stacked .mdc-tab__text-label{padding-top:6px;padding-bottom:4px}.mdc-tab--active .mdc-tab__text-label,.mdc-tab--active .mdc-tab__icon{transition-delay:100ms}.mdc-tab:not(.mdc-tab--stacked) .mdc-tab__icon+.mdc-tab__text-label{padding-left:8px;padding-right:0}[dir=rtl] .mdc-tab:not(.mdc-tab--stacked) .mdc-tab__icon+.mdc-tab__text-label,.mdc-tab:not(.mdc-tab--stacked) .mdc-tab__icon+.mdc-tab__text-label[dir=rtl]{padding-left:0;padding-right:8px}.mdc-tab-indicator{display:flex;position:absolute;top:0;left:0;justify-content:center;width:100%;height:100%;pointer-events:none;z-index:1}.mdc-tab-indicator__content{transform-origin:left;opacity:0}.mdc-tab-indicator__content--underline{align-self:flex-end;box-sizing:border-box;width:100%;border-top-style:solid}.mdc-tab-indicator__content--icon{align-self:center;margin:0 auto}.mdc-tab-indicator--active .mdc-tab-indicator__content{opacity:1}.mdc-tab-indicator .mdc-tab-indicator__content{transition:250ms transform cubic-bezier(0.4, 0, 0.2, 1)}.mdc-tab-indicator--no-transition .mdc-tab-indicator__content{transition:none}.mdc-tab-indicator--fade .mdc-tab-indicator__content{transition:150ms opacity linear}.mdc-tab-indicator--active.mdc-tab-indicator--fade .mdc-tab-indicator__content{transition-delay:100ms}.mat-mdc-tab-ripple{position:absolute;top:0;left:0;bottom:0;right:0;pointer-events:none}.mat-mdc-tab{-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;text-decoration:none;background:none;font-family:var(--mat-tab-header-label-text-font);font-size:var(--mat-tab-header-label-text-size);letter-spacing:var(--mat-tab-header-label-text-letter-spacing);line-height:var(--mat-tab-header-label-text-line-height);font-weight:var(--mat-tab-header-label-text-weight)}.mat-mdc-tab .mdc-tab-indicator__content--underline{border-color:var(--mdc-tab-indicator-active-indicator-color)}.mat-mdc-tab .mdc-tab-indicator__content--underline{border-top-width:var(--mdc-tab-indicator-active-indicator-height)}.mat-mdc-tab .mdc-tab-indicator__content--underline{border-radius:var(--mdc-tab-indicator-active-indicator-shape)}.mat-mdc-tab:not(.mdc-tab--stacked){height:var(--mdc-secondary-navigation-tab-container-height)}.mat-mdc-tab:not(:disabled).mdc-tab--active .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):hover.mdc-tab--active .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):focus.mdc-tab--active .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):active.mdc-tab--active .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:disabled.mdc-tab--active .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):not(.mdc-tab--active) .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):hover:not(.mdc-tab--active) .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):focus:not(.mdc-tab--active) .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):active:not(.mdc-tab--active) .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:disabled:not(.mdc-tab--active) .mdc-tab__icon{fill:currentColor}.mat-mdc-tab.mdc-tab{flex-grow:0}.mat-mdc-tab:hover .mdc-tab__text-label{color:var(--mat-tab-header-inactive-hover-label-text-color)}.mat-mdc-tab:focus .mdc-tab__text-label{color:var(--mat-tab-header-inactive-focus-label-text-color)}.mat-mdc-tab.mdc-tab--active .mdc-tab__text-label{color:var(--mat-tab-header-active-label-text-color)}.mat-mdc-tab.mdc-tab--active .mdc-tab__ripple::before,.mat-mdc-tab.mdc-tab--active .mat-ripple-element{background-color:var(--mat-tab-header-active-ripple-color)}.mat-mdc-tab.mdc-tab--active:hover .mdc-tab__text-label{color:var(--mat-tab-header-active-hover-label-text-color)}.mat-mdc-tab.mdc-tab--active:hover .mdc-tab-indicator__content--underline{border-color:var(--mat-tab-header-active-hover-indicator-color)}.mat-mdc-tab.mdc-tab--active:focus .mdc-tab__text-label{color:var(--mat-tab-header-active-focus-label-text-color)}.mat-mdc-tab.mdc-tab--active:focus .mdc-tab-indicator__content--underline{border-color:var(--mat-tab-header-active-focus-indicator-color)}.mat-mdc-tab.mat-mdc-tab-disabled{opacity:.4;pointer-events:none}.mat-mdc-tab.mat-mdc-tab-disabled .mdc-tab__ripple::before,.mat-mdc-tab.mat-mdc-tab-disabled .mat-ripple-element{background-color:var(--mat-tab-header-disabled-ripple-color)}.mat-mdc-tab .mdc-tab__ripple::before{content:"";display:block;position:absolute;top:0;left:0;right:0;bottom:0;opacity:0;pointer-events:none;background-color:var(--mat-tab-header-inactive-ripple-color)}.mat-mdc-tab .mdc-tab__text-label{color:var(--mat-tab-header-inactive-label-text-color);display:inline-flex;align-items:center}.mat-mdc-tab .mdc-tab__content{position:relative;pointer-events:auto}.mat-mdc-tab:hover .mdc-tab__ripple::before{opacity:.04}.mat-mdc-tab.cdk-program-focused .mdc-tab__ripple::before,.mat-mdc-tab.cdk-keyboard-focused .mdc-tab__ripple::before{opacity:.12}.mat-mdc-tab .mat-ripple-element{opacity:.12;background-color:var(--mat-tab-header-inactive-ripple-color)}.mat-mdc-tab-group.mat-mdc-tab-group-stretch-tabs>.mat-mdc-tab-header .mat-mdc-tab{flex-grow:1}.mat-mdc-tab-group{display:flex;flex-direction:column;max-width:100%}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination{background-color:var(--mat-tab-header-with-background-background-color)}.mat-mdc-tab-group.mat-tabs-with-background.mat-primary>.mat-mdc-tab-header .mat-mdc-tab .mdc-tab__text-label{color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background.mat-primary>.mat-mdc-tab-header .mdc-tab-indicator__content--underline{border-color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background:not(.mat-primary)>.mat-mdc-tab-header .mat-mdc-tab:not(.mdc-tab--active) .mdc-tab__text-label{color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background:not(.mat-primary)>.mat-mdc-tab-header .mat-mdc-tab:not(.mdc-tab--active) .mdc-tab-indicator__content--underline{border-color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-mdc-focus-indicator::before,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mat-mdc-focus-indicator::before{border-color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-ripple-element,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mdc-tab__ripple::before,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mat-ripple-element,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mdc-tab__ripple::before{background-color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mat-mdc-tab-header-pagination-chevron{color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-mdc-tab-group-inverted-header{flex-direction:column-reverse}.mat-mdc-tab-group.mat-mdc-tab-group-inverted-header .mdc-tab-indicator__content--underline{align-self:flex-start}.mat-mdc-tab-body-wrapper{position:relative;overflow:hidden;display:flex;transition:height 500ms cubic-bezier(0.35, 0, 0.25, 1)}.mat-mdc-tab-body-wrapper._mat-animation-noopable{transition:none !important;animation:none !important}'],encapsulation:2}),i})();class Hn{}var ue=l(2423);function jn(i,r){1&i&&(e.TgZ(0,"div",17),e._uU(1," Options Available "),e.qZA())}function $n(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"a-counter",18),e.NdJ("ngModelChange",function(a){e.CHM(t);const o=e.oxw().$implicit,s=e.oxw(5);return e.KtG(s.updateItemQuantity(o,a))}),e.qZA()}if(2&i){const t=e.oxw().$implicit;e.Q6J("ngModel",t.quantity)}}function Yn(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",19)(1,"div",20)(2,"button",21)(3,"app-icon"),e._uU(4,"remove"),e.qZA()()(),e.TgZ(5,"div",22),e._uU(6),e.qZA(),e.TgZ(7,"button",23),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,o=e.oxw(5);return e.KtG(o.addItem(a))}),e.TgZ(8,"app-icon"),e._uU(9,"add"),e.qZA()()()}if(2&i){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("matTooltip",t.quantity?"Items with options must be removed from order confirmation page":""),e.xp6(1),e.Q6J("disabled",!0),e.xp6(4),e.hij(" ",t.quantity," ")}}function Vn(i,r){if(1&i&&(e.TgZ(0,"div",11)(1,"div",12)(2,"div",12),e._uU(3),e.qZA(),e.YNc(4,jn,2,0,"div",13),e.qZA(),e.TgZ(5,"div",14),e._uU(6),e.ALo(7,"currency"),e.qZA(),e.YNc(8,$n,1,1,"a-counter",15),e.YNc(9,Yn,10,3,"div",16),e.qZA()),2&i){const t=r.$implicit,n=e.oxw(5);e.xp6(3),e.hij(" ",t.name," "),e.xp6(1),e.Q6J("ngIf",t.options.length),e.xp6(2),e.hij(" ",e.xi3(7,5,t.unit_price/100,n.code)," "),e.xp6(2),e.Q6J("ngIf",!t.options.length),e.xp6(1),e.Q6J("ngIf",t.options.length)}}const $e=function(){return{}};function Wn(i,r){if(1&i&&(e.TgZ(0,"mat-tab",8)(1,"div",9),e.YNc(2,Vn,10,8,"div",10),e.qZA()()),2&i){const t=e.oxw().$implicit,n=e.oxw(3);e.Q6J("label",t),e.xp6(2),e.Q6J("ngForOf",(n.menu_items||e.DdM(2,$e))[t])}}function zn(i,r){if(1&i&&(e.ynx(0),e.YNc(1,Wn,3,3,"mat-tab",7),e.BQk()),2&i){const t=r.$implicit,n=e.oxw(3);e.xp6(1),e.Q6J("ngIf",(n.menu_items||e.DdM(1,$e))[t].length)}}function Kn(i,r){if(1&i&&(e.ynx(0),e.TgZ(1,"mat-tab-group"),e.YNc(2,zn,2,2,"ng-container",6),e.qZA(),e.BQk()),2&i){const t=e.oxw(2);e.xp6(2),e.Q6J("ngForOf",t.categories)}}function Xn(i,r){if(1&i&&(e.TgZ(0,"div",4),e.YNc(1,Kn,3,1,"ng-container",5),e.qZA()),2&i){const t=e.oxw(),n=e.MAs(5);e.xp6(1),e.Q6J("ngIf",!t.show_order_details)("ngIfElse",n)}}function ei(i,r){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",26),e._uU(2," Cancel "),e.qZA(),e.TgZ(3,"button",27),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.show_order_details=!0)}),e._uU(4," Confirm "),e.qZA(),e.BQk()}if(2&i){const t=e.oxw(2);e.xp6(3),e.Q6J("disabled",!t.order.item_count)("matBadge",t.order.item_count)("matBadgeHidden",!t.order.item_count)}}function ti(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",28),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.show_order_details=!1)}),e._uU(1," Back "),e.qZA(),e.TgZ(2,"button",29),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.saveOrder())}),e._uU(3," Save Order "),e.qZA()}}function ni(i,r){if(1&i&&(e.TgZ(0,"footer",24),e.YNc(1,ei,5,3,"ng-container",5),e.YNc(2,ti,4,0,"ng-template",null,25,e.W1O),e.qZA()),2&i){const t=e.MAs(3),n=e.oxw();e.xp6(1),e.Q6J("ngIf",!n.show_order_details)("ngIfElse",t)}}function ii(i,r){if(1&i&&(e.TgZ(0,"div",30),e._UZ(1,"mat-spinner",31),e.TgZ(2,"p"),e._uU(3),e.qZA()()),2&i){const t=e.oxw();e.xp6(3),e.Oqu(t.loading)}}function ai(i,r){if(1&i&&(e.TgZ(0,"div",37),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit,n=e.oxw(2);e.Q6J("matTooltip",n.optionsFor(t)),e.xp6(1),e.AsE(" ",t.options.length," option",1===t.options.length?"":"s"," selected ")}}function oi(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",34)(1,"div",12)(2,"div",12),e._uU(3),e.qZA(),e.YNc(4,ai,2,3,"div",35),e.qZA(),e.TgZ(5,"div",14),e._uU(6),e.ALo(7,"currency"),e.qZA(),e.TgZ(8,"a-counter",36),e.NdJ("ngModelChange",function(a){const s=e.CHM(t).$implicit,c=e.oxw(2);return e.KtG(c.updateItemQuantity(s,a))}),e.qZA()()}if(2&i){const t=r.$implicit,n=e.oxw(2);e.xp6(3),e.Oqu(t.name),e.xp6(1),e.Q6J("ngIf",t.options.length),e.xp6(2),e.hij(" ",e.xi3(7,4,t.total_cost/100,n.code)," "),e.xp6(2),e.Q6J("ngModel",t.quantity)}}function ri(i,r){if(1&i&&(e.TgZ(0,"header",32)(1,"h3"),e._uU(2,"Confirm Order"),e.qZA()(),e.TgZ(3,"div",9),e.YNc(4,oi,9,7,"div",33),e.qZA()),2&i){const t=e.oxw();e.xp6(4),e.Q6J("ngForOf",t.order.items)}}let Ye=(()=>{class i extends g.cx{get code(){return this._org.currency_code}constructor(t,n){super(),this._org=t,this._data=n,this.event=new e.vpe,this.loading="",this.menu_items={},this.categories=[],this.loading="Loading menu..."}ngOnInit(){var t=this;return(0,p.Z)(function*(){t.loading="Loading menu...",t.order=new R.G(t._data.order),t.rules=yield t._data.getCateringConfig(t.order.event?.space?.level?.parent_id),t._data.menu.subscribe(n=>{t.loading="Loading menu...";const a=(0,g.Tw)(n.map(s=>s.category)),o={};for(const s of a)o[s]=n.filter(c=>c.category===s&&Fe(c,t.rules,t.order.event));t.categories=a,t.menu_items=o,t.updateMenuQuantities(),t.timeout("clear_loading",()=>t.loading="",1e3)})})()}addItem(t,n=!0){const a=this.order.items.find(o=>o.id===t.id&&o.options.length===o.options.reduce((s,c)=>s+(t.options.find(d=>c.id===d.id)?1:0),0));n&&t.options?.length?this._data.selectOptions(t.options).then(o=>{const s=new M.U({...t,options:o});this.addItem(s,!1)}):this.order=new R.G(a?{...this.order,items:this.order.items.filter(o=>!(o.id===t.id&&o.options_string===t.options_string)).concat([new M.U({...t,quantity:a.quantity+1})])}:{...this.order,items:this.order.items.concat([new M.U({...t,quantity:1})])}),this.updateMenuQuantities()}removeItem(t){this.order=new R.G({...this.order,items:this.order.items.filter(n=>n.id!==t.id&&n.options_string===t.options_string)}),this.updateMenuQuantities()}updateItemQuantity(t,n){const a=this.order.items.find(s=>s.id===t.id&&s.options_string===t.options_string);let o=[...this.order.items];o=a?this.order.items.filter(s=>!(s.id===t.id&&s.options_string===t.options_string)).concat([new M.U({...t,quantity:n})]):this.order.items.concat([new M.U({...t,quantity:n})]),o.sort((s,c)=>s.name.localeCompare(c.name)),this.order=new R.G({...this.order,items:o}),this.updateMenuQuantities()}updateMenuQuantities(){for(const t in this.menu_items)for(const n of this.menu_items[t])n.quantity=this.order.items.reduce((a,o)=>o.id===n.id?a+o.quantity:a,0)}optionsFor(t){return t.options.map(n=>n.name).join("\n")}saveOrder(){this.event.emit({reason:"done",metadata:{order:this.order}})}confirmOrder(){this.show_order_details=!0}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(X.w7),e.Y36(T.WI))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-catering-order-modal"]],outputs:{event:"event"},features:[e.qOj],decls:6,vars:3,consts:[["class","main min-w-[20rem]",4,"ngIf","ngIfElse"],["class","flex items-center justify-center space-x-2 p-2 border-t border-gray-200",4,"ngIf"],["load_state",""],["order_details",""],[1,"main","min-w-[20rem]"],[4,"ngIf","ngIfElse"],[4,"ngFor","ngForOf"],[3,"label",4,"ngIf"],[3,"label"],[1,"list"],["item","","class","flex items-center p-2 border-b border-gray-200",4,"ngFor","ngForOf"],["item","",1,"flex","items-center","p-2","border-b","border-gray-200"],[1,"flex-1","w-1/2"],["class","text-xs no-underline",4,"ngIf"],[1,"bg-primary","text-xs","rounded","px-4","py-2","mx-2","text-white","font-medium"],["ngDefaultControl","",3,"ngModel","ngModelChange",4,"ngIf"],["class","flex items-center",4,"ngIf"],[1,"text-xs","no-underline"],["ngDefaultControl","",3,"ngModel","ngModelChange"],[1,"flex","items-center"],[3,"matTooltip"],["icon","","matRipple","",3,"disabled"],[1,"count","h-12","w-12","flex","items-center","justify-center"],["icon","","matRipple","",3,"click"],[1,"flex","items-center","justify-center","space-x-2","p-2","border-t","border-gray-200"],["order_actions",""],["btn","","matRipple","","mat-dialog-close","",1,"inverse"],["confirm","","btn","","matRipple","","matBadgeColor","warn",3,"disabled","matBadge","matBadgeHidden","click"],["matRipple","",1,"inverse",3,"click"],["save","","btn","","matRipple","",3,"click"],[1,"flex","flex-col","w-64","p-8","items-center","space-y-2"],["diameter","32"],[1,"h-[3.25rem]"],["item","","class","flex items-center p-2 border-b border-gray-50",4,"ngFor","ngForOf"],["item","",1,"flex","items-center","p-2","border-b","border-gray-50"],["class","text-xs underline",3,"matTooltip",4,"ngIf"],[3,"ngModel","ngModelChange"],[1,"text-xs","underline",3,"matTooltip"]],template:function(t,n){if(1&t&&(e.YNc(0,Xn,2,2,"div",0),e.YNc(1,ni,4,2,"footer",1),e.YNc(2,ii,4,1,"ng-template",null,2,e.W1O),e.YNc(4,ri,5,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(3);e.Q6J("ngIf",!n.loading)("ngIfElse",a),e.xp6(1),e.Q6J("ngIf",!n.loading)}},dependencies:[_.sg,_.O5,Te,je,T.ZT,ue.gM,m.Fj,m.JJ,m.On,x.o,h.wG,L.Ou,ge.R,_.H9],styles:[".list[_ngcontent-%COMP%]{height:24em;min-width:32em;max-width:calc(100vw - 1em)}footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:12em}input[_ngcontent-%COMP%]{position:relative;width:100%;padding:1em;border:none;border-radius:0!important;border-top:1px solid #ccc;border-bottom:1px solid #ccc;outline:none;font-size:1em}input[_ngcontent-%COMP%]:focus{border:none;border-top:2px solid var(--primary);border-bottom:2px solid var(--primary);box-shadow:none}input.error[_ngcontent-%COMP%]::placeholder{color:rgba(var(--error),.45)}\n/*# sourceMappingURL=catering-order-modal.component.ts-angular-inline--82.css.map*/"]}),i})();var j=l(8046);function si(i,r){if(1&i&&(e.TgZ(0,"div",18),e._uU(1),e.ALo(2,"currency"),e.qZA()),2&i){const t=e.oxw().$implicit,n=e.oxw(3);e.xp6(1),e.hij(" +",e.xi3(2,1,t.unit_price/100,n.code)," ")}}function ci(i,r){if(1&i&&(e.TgZ(0,"mat-radio-button",14)(1,"div",15)(2,"div",16),e._uU(3),e.qZA(),e.YNc(4,si,3,4,"div",17),e.qZA()()),2&i){const t=r.$implicit;e.Q6J("value",t.id),e.xp6(3),e.hij(" ",t.name," "),e.xp6(1),e.Q6J("ngIf",t.unit_price)}}function li(i,r){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"mat-radio-group",10),e.NdJ("ngModelChange",function(a){e.CHM(t);const o=e.oxw().$implicit,s=e.oxw();return e.KtG(s.updateGroupOption(o,a))}),e.TgZ(2,"mat-radio-button",11)(3,"span",12),e._uU(4,"None"),e.qZA()(),e.YNc(5,ci,5,3,"mat-radio-button",13),e.qZA(),e.BQk()}if(2&i){const t=e.oxw().$implicit;e.xp6(5),e.Q6J("ngForOf",null==t?null:t.options)}}function di(i,r){if(1&i&&(e.TgZ(0,"div",18),e._uU(1),e.ALo(2,"currency"),e.qZA()),2&i){const t=e.oxw().$implicit,n=e.oxw(3);e.xp6(1),e.hij(" +",e.xi3(2,1,t.unit_price/100,n.code)," ")}}function mi(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"mat-checkbox",20),e.NdJ("ngModelChange",function(a){const s=e.CHM(t).$implicit,c=e.oxw(3);return e.KtG(c.option_state[s.id]=a)}),e.TgZ(1,"div",15)(2,"div",16),e._uU(3),e.qZA(),e.YNc(4,di,3,4,"div",17),e.qZA()()}if(2&i){const t=r.$implicit,n=e.oxw(3);e.Q6J("ngModel",n.option_state[t.id]),e.xp6(3),e.hij(" ",t.name," "),e.xp6(1),e.Q6J("ngIf",t.unit_price)}}function _i(i,r){if(1&i&&e.YNc(0,mi,5,3,"mat-checkbox",19),2&i){const t=e.oxw().$implicit;e.Q6J("ngForOf",null==t?null:t.options)}}function ui(i,r){if(1&i&&(e.TgZ(0,"div",5)(1,"div",6),e._uU(2),e.qZA(),e.TgZ(3,"div",7),e.YNc(4,li,6,1,"ng-container",8),e.YNc(5,_i,1,1,"ng-template",null,9,e.W1O),e.qZA()()),2&i){const t=r.$implicit,n=e.MAs(6);e.uIk("group",t.name),e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Q6J("ngIf",!t.multiple)("ngIfElse",n)}}let Ve=(()=>{class i{constructor(t){this._data=t,this.event=new e.vpe,this.option_state={},this.code=this._data.code;const n=(0,Ae.Tw)(this._data.options.map(o=>o.group||"Other")),a=[];for(const o of n){const s=this._data.options.filter(c=>c.group===o);a.push({name:o,multiple:!!s.find(c=>c.multiple),options:s})}this.groups=a}updateGroupOption(t,n){for(const a of t.options)this.option_state[a.id]=a.id===n}saveOptions(){const t=this._data.options.filter(n=>this.option_state[n.id]);this.event.emit({reason:"done",metadata:{options:t}})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(T.WI))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-catering-options-modal"]],outputs:{event:"event"},decls:11,vars:1,consts:[["icon","","mat-dialog-close",""],[1,"overflow-auto"],["class","pt-1 pb-2 border-b border-gray-200",4,"ngFor","ngForOf"],[1,"p-2"],["btn","","matRipple","",1,"w-32",3,"click"],[1,"pt-1","pb-2","border-b","border-gray-200"],[1,"font-medium","p-2","capitalize"],[1,"flex","flex-col","pl-6"],[4,"ngIf","ngIfElse"],["multi_options",""],["aria-label","Select an option","ngModel","",1,"flex","flex-col",3,"ngModelChange"],["value","",1,"my-1","mx-0"],[1,"font-medium","p-2"],["class","my-1 mx-0",3,"value",4,"ngFor","ngForOf"],[1,"my-1","mx-0",3,"value"],[1,"flex","items-center","justify-center"],[1,"font-medium","p-2","flex-1","w-1/2"],["class","opacity-60 text-xs",4,"ngIf"],[1,"opacity-60","text-xs"],[3,"ngModel","ngModelChange",4,"ngFor","ngForOf"],[3,"ngModel","ngModelChange"]],template:function(t,n){1&t&&(e.TgZ(0,"header")(1,"h3"),e._uU(2,"Select options"),e.qZA(),e.TgZ(3,"button",0)(4,"app-icon"),e._uU(5,"close"),e.qZA()()(),e.TgZ(6,"main",1),e.YNc(7,ui,7,4,"div",2),e.qZA(),e.TgZ(8,"footer",3)(9,"button",4),e.NdJ("click",function(){return n.saveOptions()}),e._uU(10," Save "),e.qZA()()),2&t&&(e.xp6(7),e.Q6J("ngForOf",n.groups))},dependencies:[_.sg,_.O5,T.ZT,D.oG,j.VQ,j.U0,m.JJ,m.On,x.o,h.wG,_.H9],styles:["main[_ngcontent-%COMP%]{min-height:24em;width:24rem;max-width:calc(100vw - 2rem)}\n/*# sourceMappingURL=catering-order-options-modal.component.ts-angular-inline--83.css.map*/"]}),i})();function pi(i,r){1&i&&(e.TgZ(0,"button",4)(1,"app-icon"),e._uU(2,"close"),e.qZA()())}function gi(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"main")(1,"div",5)(2,"app-icon",6),e._uU(3,"upload"),e.qZA(),e.TgZ(4,"p"),e._uU(5,"Click to select file or Drag and drop files"),e.qZA(),e.TgZ(6,"input",7),e.NdJ("change",function(a){e.CHM(t);const o=e.oxw();return e.KtG(o.handleFileEvent(a))}),e.qZA()(),e.TgZ(7,"div",8)(8,"button",9),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.downloadTemplate())}),e._uU(9," Download Template "),e.qZA()()()}}function hi(i,r){if(1&i&&(e.TgZ(0,"main",10),e._UZ(1,"mat-spinner",11),e.TgZ(2,"p"),e._uU(3),e.qZA()()),2&i){const t=e.oxw();e.xp6(3),e.Oqu(t.loading)}}let We=(()=>{class i{constructor(){this.event=new e.vpe}handleFileEvent(t){this.loading="Processing menu data...";const n=t.target;if(!n?.files)return this.loading="";const a=n.files;if(!a.length)return this.loading="";const o=a[0],s=new FileReader;s.addEventListener("loadend",c=>{const u=(0,g.n5)(c.target.result);this.loading="",this.event.emit({reason:"done",metadata:u.filter(f=>"item"===(f.type||"").toLowerCase()).map(f=>new M.U({...f,options:u.filter(C=>"option"===(C.type||"").toLowerCase()&&C.tags===f.id).map(C=>({id:C.id,name:C.name,group:C.category,multiple:C.multiple,unit_price:C.unit_price}))}))})}),s.readAsText(o)}downloadTemplate(){(0,g.Sv)("import-menu-template.csv","ID,Type,Name,Unit Price,Category,Description,Tags,Multiple\nitem-1,item,Coffee,200,Drink,Wake Up,,\noption-1,option,1 Sugar,20,Sugars,,item-1,false")}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["catering-import-menu-modal"]],outputs:{event:"event"},decls:7,vars:3,consts:[[1,"h-12","bg-primary","flex","items-center","justify-between","px-4"],["icon","","mat-dialog-close","",4,"ngIf"],[4,"ngIf","ngIfElse"],["load_state",""],["icon","","mat-dialog-close",""],[1,"relative","flex","flex-col","items-center","justify-center","space-y-2","h-[24rem]","w-[24rem]","border-4","border-gray-200","border-dashed","rounded-xl","hover:bg-gray-100","m-4","p-4","cursor-pointer"],[1,"text-4xl"],["type","file",1,"absolute","inset-0","opacity-0",3,"change"],[1,"flex","items-center","justify-center","px-4","pb-4"],["matRipple","",1,"clear","underline","w-48",3,"click"],[1,"flex","flex-col","items-center","justify-center","space-y-2","p-8","h-[24rem]","w-[24rem]"],["diameter","32"]],template:function(t,n){if(1&t&&(e.TgZ(0,"header",0)(1,"h2"),e._uU(2,"Import Catering Menu"),e.qZA(),e.YNc(3,pi,3,0,"button",1),e.qZA(),e.YNc(4,gi,10,0,"main",2),e.YNc(5,hi,4,1,"ng-template",null,3,e.W1O)),2&t){const a=e.MAs(6);e.xp6(3),e.Q6J("ngIf",!n.loading),e.xp6(1),e.Q6J("ngIf",!n.loading)("ngIfElse",a)}},dependencies:[_.O5,T.ZT,x.o,h.wG,L.Ou]}),i})(),ae=(()=>{class i extends g.cx{get is_editable(){return!this.zone||this.zone===this._org.building?.id}get categories(){const t=this._menu.getValue();return(0,g.Tw)(t.map(n=>n.category))}constructor(t,n,a){var o;super(),o=this,this._org=t,this._dialog=n,this._settings=a,this._updated=new y.X(0),this._menu=new y.X([]),this._loading=new y.X(!1),this._currency=new y.X("USD"),this.menu=this._menu.asObservable(),this.loading=this._loading.asObservable(),this.currency=this._currency.asObservable(),this.settings=this._org.active_building.pipe((0,ce.h)(s=>!!s),(0,H.w)(s=>(0,S.rlq)(s.id,"catering-settings").pipe((0,le.K)(c=>(0,z.of)({})))),(0,k.U)(s=>s.details||{}),(0,de.b)(s=>this._settings.post("require_catering_notes",!!s?.require_notes)),(0,K.d)(1)),this.charge_codes=this.settings.pipe((0,k.U)(s=>s.charge_codes||[])),this.availability=this.settings.pipe((0,k.U)(s=>s.disabled_rooms||[])),this.zone="",this.subscription("building",this._org.active_building.subscribe(function(){var s=(0,p.Z)(function*(c){if(c){const d=(yield o.getCateringForZone(c.id)).map(u=>new M.U(u));o._currency.next(o._settings.get("app.currency")||c.currency||"USD"),o._menu.next(d)}});return function(c){return s.apply(this,arguments)}}()))}manageCateringOrder(t){var n=this;return(0,p.Z)(function*(){const a=n._dialog.open(Ye,{data:{code:n._currency.getValue(),order:t,menu:n.menu,loading:n.loading,getCateringConfig:s=>n.getCateringConfig(s),selectOptions:s=>n.selectOptions(s)}}),o=yield Promise.race([a.componentInstance.event.pipe((0,E.P)(s=>"done"===s.reason)).toPromise(),a.afterClosed().toPromise()]);return a.close(),o?.metadata?.order||t})()}addItem(t=new M.U){var n=this;return(0,p.Z)(function*(){const a=n._dialog.open(ke,{data:{item:t,categories:n.categories}}),o=yield Promise.race([a.componentInstance.event.pipe((0,E.P)(d=>"done"===d.reason)).toPromise(),a.afterClosed().toPromise()]);if("done"!==o?.reason)return;const s=n._menu.getValue(),c=s.findIndex(d=>d.id===t.id);c>=0?s.splice(c,1,o.metadata.item):s.push(o.metadata.item),n.updateMenu(n._org.building.id,s).then(()=>{n._menu.next([...s]),a.close()},()=>a.componentInstance.loading=!1)})()}updateItem(t){const n=this._menu.getValue(),a=n.findIndex(o=>o.id===t.id);a>=0?n.splice(a,1,t):n.push(t),this.updateMenu(this._org.building.id,n).then(()=>this._menu.next([...n]))}addOption(t,n={}){var a=this;return(0,p.Z)(function*(){const o=(0,g.Tw)(t.options.map(f=>f.group)),s=a._dialog.open(Oe,{data:{parent:t,option:n,types:o}}),c=yield Promise.race([s.componentInstance.event.pipe((0,E.P)(f=>"done"===f.reason)).toPromise(),s.afterClosed().toPromise()]);if("done"!==c?.reason)return;const d=a._menu.getValue(),u=d.findIndex(f=>f.id===t.id);u>=0?d.splice(u,1,c.metadata.item):d.push(c.metadata.item),a.updateMenu(a._org.building.id,d).then(()=>{a._menu.next([...d]),s.close()},()=>s.componentInstance.loading=!1)})()}selectOptions(t){var n=this;return(0,p.Z)(function*(){const a=n._dialog.open(Ve,{data:{code:n._currency.getValue(),options:t}}),o=yield Promise.race([a.componentInstance.event.pipe((0,E.P)(s=>"done"===s.reason)).toPromise(),a.afterClosed().toPromise()]);return"done"!==o?.reason?[]:(a.close(),o.metadata.options)})()}deleteItem(t){var n=this;return(0,p.Z)(function*(){const a=yield(0,g._5)({title:"Delete Catering Item",content:`Are you sure you wish to remove the catering item ${t.name} from the menu?`,icon:{type:"icon",class:"material-icons",content:"delete"}},n._dialog);if("done"!==a.reason)return;a.loading("Removing catering item...");const o=n._menu.getValue().filter(s=>t.id!==s.id);n.updateMenu(n._org.building.id,o).then(()=>{n._menu.next([...o]),a.close()},()=>a.loading(""))})()}deleteOption(t,n){var a=this;return(0,p.Z)(function*(){const o=yield(0,g._5)({title:"Delete Catering Item Option",content:`Are you sure you wish to remove the catering option "${n.name}" from "${t.name}"?`,icon:{type:"icon",class:"material-icons",content:"delete"}},a._dialog);if("done"!==o.reason)return;o.loading("Removing catering item option...");const s=a._menu.getValue();s.splice(s.findIndex(c=>c.id===t.id),1,new M.U({...t,options:t.options.filter(c=>c.id!==n.id)})),a.updateMenu(a._org.building.id,s).then(()=>{a._menu.next([...s]),o.close()},()=>o.loading(""))})()}editConfig(){var t=this;return(0,p.Z)(function*(){const n=yield t.getCateringConfig(t._org.building.id),{require_notes:a}=yield t.settings.pipe((0,F.q)(1)).toPromise(),o=t._menu.getValue(),s=(0,g.Tw)((0,g.xH)(o.map(u=>[u.category,...u.tags]))),c=t._dialog.open(Ze,{data:{config:n,types:s,require_notes:a,saveNotes:u=>t.saveSettings({require_notes:u})}}),d=yield Promise.race([c.componentInstance.event.pipe((0,E.P)(u=>"done"===u.reason)).toPromise(),c.afterClosed().toPromise()]);"done"===d?.reason&&t.updateConfig(t._org.building.id,d.metadata).then(()=>c.close(),()=>c.componentInstance.loading=!1)})()}importMenu(){var t=this;return(0,p.Z)(function*(){const n=t._dialog.open(We),a=yield Promise.race([n.componentInstance.event.pipe((0,E.P)(d=>"done"===d.reason)).toPromise(),n.afterClosed().toPromise()]);if("done"!==a?.reason)return;n.componentInstance.loading="Updating menu...";const o=t._menu.getValue(),s=t._org.building,c=(0,g.Tw)(a.metadata.concat(o),"id");yield t.updateMenu(s.id,c).catch(d=>{throw(0,g.cB)("Error importing catering menu"),n.close(),d}),(0,g.t5)(`Successfully imported catering menu. ${a.metadata.length} item(s) added.`),n.close()})()}updateMenu(t,n){return(0,S.Ymr)(t,{id:t,name:"catering",details:n,description:`Catering menu for ${t}`}).toPromise()}saveSettings(t){var n=this;return(0,p.Z)(function*(){const a=yield n.settings.pipe((0,F.q)(1)).toPromise();return(0,S.Ymr)(n._org.building.id,{id:n._org.building.id,name:"catering-settings",details:{...a,...t},description:`Catering settings for ${n._org.building.id}`}).toPromise()})()}getCateringForZone(t){return(0,p.Z)(function*(){const n=(yield(0,S.rlq)(t,"catering").toPromise()).details;return n instanceof Array?n:[]})()}getCateringConfig(t=this._org.building.id){return(0,p.Z)(function*(){const n=(yield(0,S.rlq)(t,"catering_config").toPromise()).details;return n instanceof Array?n:[]})()}updateConfig(t,n){return(0,S.Ymr)(t,{id:t,name:"catering_config",details:n,description:`Catering menu config for ${t}`}).toPromise()}addItemToOrder(t,n){let a=t.items;const o=a.find(c=>c.id===n.id&&n.options?.length===c.options?.reduce((d,u)=>d+(n.options.find(f=>u.id===f.id)?1:0),0));return o?o.quantity+=1:a=a.concat([new M.U({...n,quantity:1})]),new R.G({...t,items:a,event:null})}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(X.w7),e.LFG(T.uw),e.LFG(g.gb))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Qa(i,r){if(1&i&&(e.TgZ(0,"mat-option",8),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.name," ")}}l(9314),l(7716),l(823),l(1810),l(9377),l(3200),l(4211),l(3902),l(4475),l(2581),l(8840);const Ha=function(){return["/welcome"]};let ja=(()=>{class i{constructor(t,n,a){this._router=t,this._checkin=n,this._catering=a,this.menu=this._catering.menu.pipe((0,k.U)(o=>o.filter(s=>s.tags.find(c=>"drink"===c.toLowerCase()))))}update(){var t=this;return(0,p.Z)(function*(){if(!t.beverage)return t.next();const n=yield t._checkin.event.pipe((0,E.P)(o=>!!o)).toPromise();if(!n)return(0,g.cB)("Unable to load event data.");const a=(n.ext("catering")?n.ext("catering")[0]:null)||new R.G;yield(0,V.eJ)(n.id,new V.ym({...n,extension_data:{...n.extension_data,catering:[...n.extension_data.catering?.filter(o=>o.id!==a.id)||[],new R.G({...a,items:[...a.items,new M.U({...t.beverage,quantity:1})]})]}})).toPromise(),(0,g.t5)("Successfully update event."),t.next()})()}next(){this._router.navigate(["/welcome"])}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(w.F0),e.Y36(q),e.Y36(ae))},i.\u0275cmp=e.Xpm({type:i,selectors:[["checkin-preferences"]],decls:13,vars:7,consts:[[1,"bg-white","rounded","shadow","overflow-hidden","relative","flex","flex-col","items-center","my-4","p-4","mx-auto"],[1,"text-xl","mb-2","w-full"],[1,"w-full"],["appearance","outline",1,"w-full"],["placeholder","Select beverage",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["btn","","matRipple","",1,"w-32",3,"click"],["icon","","matRipple","",1,"absolute","top-0","right-0",3,"routerLink"],[3,"value"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"h3",1),e._uU(2,"Would you like a drink?"),e.qZA(),e.TgZ(3,"div",2)(4,"mat-form-field",3)(5,"mat-select",4),e.NdJ("ngModelChange",function(o){return n.beverage=o}),e.YNc(6,Qa,2,2,"mat-option",5),e.ALo(7,"async"),e.qZA()()(),e.TgZ(8,"button",6),e.NdJ("click",function(){return n.update()}),e._uU(9),e.qZA(),e.TgZ(10,"a",7)(11,"app-icon"),e._uU(12,"close"),e.qZA()()()),2&t&&(e.xp6(5),e.Q6J("ngModel",n.beverage),e.xp6(1),e.Q6J("ngForOf",e.lcZ(7,4,n.menu)),e.xp6(3),e.hij(" ",n.beverage?"Update":"Continue"," "),e.xp6(1),e.Q6J("routerLink",e.DdM(6,Ha)))},dependencies:[_.sg,m.JJ,m.On,x.o,h.ey,Z.KE,Ie.gD,h.wG,w.rH,_.Ov],styles:["[_nghost-%COMP%] > div[_ngcontent-%COMP%]{width:32rem;max-width:calc(100vw - 2rem)}\n/*# sourceMappingURL=checkin-preferences.component.ts-angular-inline--92.css.map*/"]}),i})();const lt=(()=>{class i{constructor(t,n,a,o,s){this._legacyCanvasSize=i.DEFAULT_CANVAS_SIZE,this._preferredCamera="environment",this._maxScansPerSecond=25,this._lastScanTimestamp=-1,this._destroyed=this._flashOn=this._paused=this._active=!1,this.$video=t,this.$canvas=document.createElement("canvas"),a&&"object"==typeof a?this._onDecode=n:(console.warn(a||o||s?"You're using a deprecated version of the QrScanner constructor which will be removed in the future":"Note that the type of the scan result passed to onDecode will change in the future. To already switch to the new api today, you can pass returnDetailedScanResult: true."),this._legacyOnDecode=n),this._onDecodeError=(n="object"==typeof a?a:{}).onDecodeError||("function"==typeof a?a:this._onDecodeError),this._calculateScanRegion=n.calculateScanRegion||("function"==typeof o?o:this._calculateScanRegion),this._preferredCamera=n.preferredCamera||s||this._preferredCamera,this._legacyCanvasSize="number"==typeof a?a:"number"==typeof o?o:this._legacyCanvasSize,this._maxScansPerSecond=n.maxScansPerSecond||this._maxScansPerSecond,this._onPlay=this._onPlay.bind(this),this._onLoadedMetaData=this._onLoadedMetaData.bind(this),this._onVisibilityChange=this._onVisibilityChange.bind(this),this._updateOverlay=this._updateOverlay.bind(this),t.disablePictureInPicture=!0,t.playsInline=!0,t.muted=!0;let c=!1;if(t.hidden&&(t.hidden=!1,c=!0),document.body.contains(t)||(document.body.appendChild(t),c=!0),a=t.parentElement,n.highlightScanRegion||n.highlightCodeOutline){if(o=!!n.overlay,this.$overlay=n.overlay||document.createElement("div"),(s=this.$overlay.style).position="absolute",s.display="none",s.pointerEvents="none",this.$overlay.classList.add("scan-region-highlight"),!o&&n.highlightScanRegion){this.$overlay.innerHTML='<svg class="scan-region-highlight-svg" viewBox="0 0 238 238" preserveAspectRatio="none" style="position:absolute;width:100%;height:100%;left:0;top:0;fill:none;stroke:#e9b213;stroke-width:4;stroke-linecap:round;stroke-linejoin:round"><path d="M31 2H10a8 8 0 0 0-8 8v21M207 2h21a8 8 0 0 1 8 8v21m0 176v21a8 8 0 0 1-8 8h-21m-176 0H10a8 8 0 0 1-8-8v-21"/></svg>';try{this.$overlay.firstElementChild.animate({transform:["scale(.98)","scale(1.01)"]},{duration:400,iterations:1/0,direction:"alternate",easing:"ease-in-out"})}catch{}a.insertBefore(this.$overlay,this.$video.nextSibling)}n.highlightCodeOutline&&(this.$overlay.insertAdjacentHTML("beforeend",'<svg class="code-outline-highlight" preserveAspectRatio="none" style="display:none;width:100%;height:100%;fill:none;stroke:#e9b213;stroke-width:5;stroke-dasharray:25;stroke-linecap:round;stroke-linejoin:round"><polygon/></svg>'),this.$codeOutlineHighlight=this.$overlay.lastElementChild)}this._scanRegion=this._calculateScanRegion(t),requestAnimationFrame(()=>{let d=window.getComputedStyle(t);"none"===d.display&&(t.style.setProperty("display","block","important"),c=!0),"visible"!==d.visibility&&(t.style.setProperty("visibility","visible","important"),c=!0),c&&(console.warn("QrScanner has overwritten the video hiding style to avoid Safari stopping the playback."),t.style.opacity="0",t.style.width="0",t.style.height="0",this.$overlay&&this.$overlay.parentElement&&this.$overlay.parentElement.removeChild(this.$overlay),delete this.$overlay,delete this.$codeOutlineHighlight),this.$overlay&&this._updateOverlay()}),t.addEventListener("play",this._onPlay),t.addEventListener("loadedmetadata",this._onLoadedMetaData),document.addEventListener("visibilitychange",this._onVisibilityChange),window.addEventListener("resize",this._updateOverlay),this._qrEnginePromise=i.createQrEngine()}static set WORKER_PATH(t){console.warn("Setting QrScanner.WORKER_PATH is not required and not supported anymore. Have a look at the README for new setup instructions.")}static hasCamera(){return(0,p.Z)(function*(){try{return!!(yield i.listCameras(!1)).length}catch{return!1}})()}static listCameras(t=!1){return(0,p.Z)(function*(){if(!navigator.mediaDevices)return[];let a,n=function(){var o=(0,p.Z)(function*(){return(yield navigator.mediaDevices.enumerateDevices()).filter(s=>"videoinput"===s.kind)});return function(){return o.apply(this,arguments)}}();try{t&&(yield n()).every(o=>!o.label)&&(a=yield navigator.mediaDevices.getUserMedia({audio:!1,video:!0}))}catch{}try{return(yield n()).map((o,s)=>({id:o.deviceId,label:o.label||(0===s?"Default Camera":`Camera ${s+1}`)}))}finally{a&&(console.warn("Call listCameras after successfully starting a QR scanner to avoid creating a temporary video stream"),i._stopVideoStream(a))}})()}hasFlash(){var t=this;return(0,p.Z)(function*(){let n;try{if(t.$video.srcObject){if(!(t.$video.srcObject instanceof MediaStream))return!1;n=t.$video.srcObject}else n=(yield t._getCameraStream()).stream;return"torch"in n.getVideoTracks()[0].getSettings()}catch{return!1}finally{n&&n!==t.$video.srcObject&&(console.warn("Call hasFlash after successfully starting the scanner to avoid creating a temporary video stream"),i._stopVideoStream(n))}})()}isFlashOn(){return this._flashOn}toggleFlash(){var t=this;return(0,p.Z)(function*(){t._flashOn?yield t.turnFlashOff():yield t.turnFlashOn()})()}turnFlashOn(){var t=this;return(0,p.Z)(function*(){if(!t._flashOn&&!t._destroyed&&(t._flashOn=!0,t._active&&!t._paused))try{if(!(yield t.hasFlash()))throw"No flash available";yield t.$video.srcObject.getVideoTracks()[0].applyConstraints({advanced:[{torch:!0}]})}catch(n){throw t._flashOn=!1,n}})()}turnFlashOff(){var t=this;return(0,p.Z)(function*(){t._flashOn&&(t._flashOn=!1,yield t._restartVideoStream())})()}destroy(){this.$video.removeEventListener("loadedmetadata",this._onLoadedMetaData),this.$video.removeEventListener("play",this._onPlay),document.removeEventListener("visibilitychange",this._onVisibilityChange),window.removeEventListener("resize",this._updateOverlay),this._destroyed=!0,this._flashOn=!1,this.stop(),i._postWorkerMessage(this._qrEnginePromise,"close")}start(){var t=this;return(0,p.Z)(function*(){if(t._destroyed)throw Error("The QR scanner can not be started as it had been destroyed.");if((!t._active||t._paused)&&("https:"!==window.location.protocol&&console.warn("The camera stream is only accessible if the page is transferred via https."),t._active=!0,!document.hidden))if(t._paused=!1,t.$video.srcObject)yield t.$video.play();else try{let{stream:n,facingMode:a}=yield t._getCameraStream();!t._active||t._paused?i._stopVideoStream(n):(t._setVideoMirror(a),t.$video.srcObject=n,yield t.$video.play(),t._flashOn&&(t._flashOn=!1,t.turnFlashOn().catch(()=>{})))}catch(n){if(!t._paused)throw t._active=!1,n}})()}stop(){this.pause(),this._active=!1}pause(t=!1){var n=this;return(0,p.Z)(function*(){if(n._paused=!0,!n._active)return!0;n.$video.pause(),n.$overlay&&(n.$overlay.style.display="none");let a=()=>{n.$video.srcObject instanceof MediaStream&&(i._stopVideoStream(n.$video.srcObject),n.$video.srcObject=null)};return t?(a(),!0):(yield new Promise(o=>setTimeout(o,300)),!!n._paused&&(a(),!0))})()}setCamera(t){var n=this;return(0,p.Z)(function*(){t!==n._preferredCamera&&(n._preferredCamera=t,yield n._restartVideoStream())})()}static scanImage(t,n,a,o,s=!1,c=!1){return(0,p.Z)(function*(){let d,u=!1;n&&("scanRegion"in n||"qrEngine"in n||"canvas"in n||"disallowCanvasResizing"in n||"alsoTryWithoutScanRegion"in n||"returnDetailedScanResult"in n)?(d=n.scanRegion,a=n.qrEngine,o=n.canvas,s=n.disallowCanvasResizing||!1,c=n.alsoTryWithoutScanRegion||!1,u=!0):console.warn(n||a||o||s||c?"You're using a deprecated api for scanImage which will be removed in the future.":"Note that the return type of scanImage will change in the future. To already switch to the new api today, you can pass returnDetailedScanResult: true."),n=!!a;try{let f,C,O;if([a,f]=yield Promise.all([a||i.createQrEngine(),i._loadImage(t)]),[o,C]=i._drawToCanvas(f,d,o,s),a instanceof Worker){let b=a;n||i._postWorkerMessageSync(b,"inversionMode","both"),O=yield new Promise((v,A)=>{let J,Y,U,pe=-1;Y=P=>{P.data.id===pe&&(b.removeEventListener("message",Y),b.removeEventListener("error",U),clearTimeout(J),null!==P.data.data?v({data:P.data.data,cornerPoints:i._convertPoints(P.data.cornerPoints,d)}):A(i.NO_QR_CODE_FOUND))},U=P=>{b.removeEventListener("message",Y),b.removeEventListener("error",U),clearTimeout(J),A("Scanner error: "+(P?P.message||P:"Unknown Error"))},b.addEventListener("message",Y),b.addEventListener("error",U),J=setTimeout(()=>U("timeout"),1e4);let oe=C.getImageData(0,0,o.width,o.height);pe=i._postWorkerMessageSync(b,"decode",oe,[oe.data.buffer])})}else O=yield Promise.race([new Promise((b,v)=>window.setTimeout(()=>v("Scanner error: timeout"),1e4)),(0,p.Z)(function*(){try{var[b]=yield a.detect(o);if(!b)throw i.NO_QR_CODE_FOUND;return{data:b.rawValue,cornerPoints:i._convertPoints(b.cornerPoints,d)}}catch(v){if(/not implemented|service unavailable/.test(b=v.message||v))return i._disableBarcodeDetector=!0,i.scanImage(t,{scanRegion:d,canvas:o,disallowCanvasResizing:s,alsoTryWithoutScanRegion:c});throw`Scanner error: ${b}`}})()]);return u?O:O.data}catch(f){if(!d||!c)throw f;let C=yield i.scanImage(t,{qrEngine:a,canvas:o,disallowCanvasResizing:s});return u?C:C.data}finally{n||i._postWorkerMessage(a,"close")}})()}setGrayscaleWeights(t,n,a,o=!0){i._postWorkerMessage(this._qrEnginePromise,"grayscaleWeights",{red:t,green:n,blue:a,useIntegerApproximation:o})}setInversionMode(t){i._postWorkerMessage(this._qrEnginePromise,"inversionMode",t)}static createQrEngine(t){return(0,p.Z)(function*(){if(t&&console.warn("Specifying a worker path is not required and not supported anymore."),t=()=>l.e("node_modules_qr-scanner_qr-scanner-worker_min_js").then(l.bind(l,9872)).then(a=>a.createWorker()),i._disableBarcodeDetector||!("BarcodeDetector"in window)||!BarcodeDetector.getSupportedFormats||!(yield BarcodeDetector.getSupportedFormats()).includes("qr_code"))return t();let n=navigator.userAgentData;return n&&n.brands.some(({brand:a})=>/Chromium/i.test(a))&&/mac ?OS/i.test(n.platform)&&(yield n.getHighEntropyValues(["architecture","platformVersion"]).then(({architecture:a,platformVersion:o})=>/arm/i.test(a||"arm")&&13<=parseInt(o||"13")).catch(()=>!0))?t():new BarcodeDetector({formats:["qr_code"]})})()}_onPlay(){this._scanRegion=this._calculateScanRegion(this.$video),this._updateOverlay(),this.$overlay&&(this.$overlay.style.display=""),this._scanFrame()}_onLoadedMetaData(){this._scanRegion=this._calculateScanRegion(this.$video),this._updateOverlay()}_onVisibilityChange(){document.hidden?this.pause():this._active&&this.start()}_calculateScanRegion(t){let n=Math.round(.6666666666666666*Math.min(t.videoWidth,t.videoHeight));return{x:Math.round((t.videoWidth-n)/2),y:Math.round((t.videoHeight-n)/2),width:n,height:n,downScaledWidth:this._legacyCanvasSize,downScaledHeight:this._legacyCanvasSize}}_updateOverlay(){requestAnimationFrame(()=>{if(this.$overlay){var t=this.$video,n=t.videoWidth,a=t.videoHeight,o=t.offsetWidth,s=t.offsetHeight,c=t.offsetLeft,d=t.offsetTop,u=window.getComputedStyle(t),f=u.objectFit,C=n/a,O=o/s;switch(f){case"none":var b=n,v=a;break;case"fill":b=o,v=s;break;default:("cover"===f?C>O:C<O)?b=(v=s)*C:v=(b=o)/C,"scale-down"===f&&(b=Math.min(b,n),v=Math.min(v,a))}var[A,J]=u.objectPosition.split(" ").map((U,pe)=>{const oe=parseFloat(U);return U.endsWith("%")?(pe?s-v:o-b)*oe/100:oe});O=this._scanRegion.height||a,f=this._scanRegion.x||0;var Y=this._scanRegion.y||0;(C=this.$overlay.style).width=(u=this._scanRegion.width||n)/n*b+"px",C.height=O/a*v+"px",C.top=`${d+J+Y/a*v}px`,a=/scaleX\(-1\)/.test(t.style.transform),C.left=`${c+(a?o-A-b:A)+(a?n-f-u:f)/n*b}px`,C.transform=t.style.transform}})}static _convertPoints(t,n){if(!n)return t;let a=n.x||0,o=n.y||0,s=n.width&&n.downScaledWidth?n.width/n.downScaledWidth:1;n=n.height&&n.downScaledHeight?n.height/n.downScaledHeight:1;for(let c of t)c.x=c.x*s+a,c.y=c.y*n+o;return t}_scanFrame(){var t=this;!this._active||this.$video.paused||this.$video.ended||("requestVideoFrameCallback"in this.$video?this.$video.requestVideoFrameCallback.bind(this.$video):requestAnimationFrame)((0,p.Z)(function*(){if(!(1>=t.$video.readyState)){var n=Date.now()-t._lastScanTimestamp,a=1e3/t._maxScansPerSecond;n<a&&(yield new Promise(s=>setTimeout(s,a-n))),t._lastScanTimestamp=Date.now();try{var o=yield i.scanImage(t.$video,{scanRegion:t._scanRegion,qrEngine:t._qrEnginePromise,canvas:t.$canvas})}catch(s){if(!t._active)return;t._onDecodeError(s)}!i._disableBarcodeDetector||(yield t._qrEnginePromise)instanceof Worker||(t._qrEnginePromise=i.createQrEngine()),o?(t._onDecode?t._onDecode(o):t._legacyOnDecode&&t._legacyOnDecode(o.data),t.$codeOutlineHighlight&&(clearTimeout(t._codeOutlineHighlightRemovalTimeout),t._codeOutlineHighlightRemovalTimeout=void 0,t.$codeOutlineHighlight.setAttribute("viewBox",`${t._scanRegion.x||0} ${t._scanRegion.y||0} ${t._scanRegion.width||t.$video.videoWidth} ${t._scanRegion.height||t.$video.videoHeight}`),t.$codeOutlineHighlight.firstElementChild.setAttribute("points",o.cornerPoints.map(({x:s,y:c})=>`${s},${c}`).join(" ")),t.$codeOutlineHighlight.style.display="")):t.$codeOutlineHighlight&&!t._codeOutlineHighlightRemovalTimeout&&(t._codeOutlineHighlightRemovalTimeout=setTimeout(()=>t.$codeOutlineHighlight.style.display="none",100))}t._scanFrame()}))}_onDecodeError(t){t!==i.NO_QR_CODE_FOUND&&console.log(t)}_getCameraStream(){var t=this;return(0,p.Z)(function*(){if(!navigator.mediaDevices)throw"Camera not found.";let n=/^(environment|user)$/.test(t._preferredCamera)?"facingMode":"deviceId",a=[{width:{min:1024}},{width:{min:768}},{}],o=a.map(s=>Object.assign({},s,{[n]:{exact:t._preferredCamera}}));for(let s of[...o,...a])try{let c=yield navigator.mediaDevices.getUserMedia({video:s,audio:!1});return{stream:c,facingMode:t._getFacingMode(c)||(s.facingMode?t._preferredCamera:"environment"===t._preferredCamera?"user":"environment")}}catch{}throw"Camera not found."})()}_restartVideoStream(){var t=this;return(0,p.Z)(function*(){let n=t._paused;(yield t.pause(!0))&&!n&&t._active&&(yield t.start())})()}static _stopVideoStream(t){for(let n of t.getTracks())n.stop(),t.removeTrack(n)}_setVideoMirror(t){this.$video.style.transform="scaleX("+("user"===t?-1:1)+")"}_getFacingMode(t){return(t=t.getVideoTracks()[0])?/rear|back|environment/i.test(t.label)?"environment":/front|user|face/i.test(t.label)?"user":null:null}static _drawToCanvas(t,n,a,o=!1){a=a||document.createElement("canvas");let s=n&&n.x?n.x:0,c=n&&n.y?n.y:0,d=n&&n.width?n.width:t.videoWidth||t.width,u=n&&n.height?n.height:t.videoHeight||t.height;return o||(o=n&&n.downScaledWidth?n.downScaledWidth:d,n=n&&n.downScaledHeight?n.downScaledHeight:u,a.width!==o&&(a.width=o),a.height!==n&&(a.height=n)),(n=a.getContext("2d",{alpha:!1})).imageSmoothingEnabled=!1,n.drawImage(t,s,c,d,u,0,0,a.width,a.height),[a,n]}static _loadImage(t){return(0,p.Z)(function*(){if(t instanceof Image)return yield i._awaitImageLoad(t),t;if(t instanceof HTMLVideoElement||t instanceof HTMLCanvasElement||t instanceof SVGImageElement||"OffscreenCanvas"in window&&t instanceof OffscreenCanvas||"ImageBitmap"in window&&t instanceof ImageBitmap)return t;if(!(t instanceof File||t instanceof Blob||t instanceof URL||"string"==typeof t))throw"Unsupported image type.";{let n=new Image;n.src=t instanceof File||t instanceof Blob?URL.createObjectURL(t):t.toString();try{return yield i._awaitImageLoad(n),n}finally{(t instanceof File||t instanceof Blob)&&URL.revokeObjectURL(n.src)}}})()}static _awaitImageLoad(t){return(0,p.Z)(function*(){t.complete&&0!==t.naturalWidth||(yield new Promise((n,a)=>{let o=s=>{t.removeEventListener("load",o),t.removeEventListener("error",o),s instanceof ErrorEvent?a("Image load error"):n()};t.addEventListener("load",o),t.addEventListener("error",o)}))})()}static _postWorkerMessage(t,n,a,o){return(0,p.Z)(function*(){return i._postWorkerMessageSync(yield t,n,a,o)})()}static _postWorkerMessageSync(t,n,a,o){if(!(t instanceof Worker))return-1;let s=i._workerMessageId++;return t.postMessage({id:s,type:n,data:a},o),s}}return i.DEFAULT_CANVAS_SIZE=400,i.NO_QR_CODE_FOUND="No QR code found",i._disableBarcodeDetector=!1,i._workerMessageId=0,i})(),$a=["video"],Ya=["checkin-qr-scan",""],Va=function(){return["/welcome"]};let Wa=(()=>{class i{constructor(t,n){this._checkin=t,this._router=n}ngOnInit(){this.setupQRReader()}ngOnDestroy(){this._video_el.nativeElement.srcObject&&this._video_el.nativeElement.srcObject.getTracks().forEach(t=>t?.stop()),this._reader?.stop()}checkQRCode(t){var n=this;return(0,p.Z)(function*(){const a=t.split(",");if(2!==a.length)return(0,g.cB)("Invalid QRCode"),void n.setupQRReader();yield n._checkin.loadGuestAndEvent(a[0],a[1]).catch(o=>{throw n.handleError(o.message||o),o}),n._router.navigate(["/checkin","details"])})()}checkEmail(t){var n=this;return(0,p.Z)(function*(){!t||!t.includes("@")||t.length<5||(yield n._checkin.loadGuestAndEvent(t).catch(a=>{throw n.handleError("Unable to find visitor or a meeting associated with the given email address."),a}),n._router.navigate(["/checkin","details"]))})()}setupQRReader(){navigator.mediaDevices?.getUserMedia&&navigator.mediaDevices.getUserMedia({video:!0}).then(t=>this._video_el.nativeElement.srcObject=t).catch(t=>console.error("Unable to fetch media devices!",t)),lt&&(this._reader=new lt(this._video_el.nativeElement,t=>this.checkQRCode(t)),this._reader.start())}handleError(t){this._checkin.setError(t?.statusText||t),this._router.navigate(["/checkin","error"])}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(q),e.Y36(w.F0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["","checkin-qr-scan",""]],viewQuery:function(t,n){if(1&t&&e.Gf($a,7),2&t){let a;e.iGM(a=e.CRH())&&(n._video_el=a.first)}},attrs:Ya,decls:18,vars:3,consts:[[1,"bg-white","rounded","shadow","overflow-hidden","relative","flex","flex-col","items-center"],[1,"mt-6","mb-4"],["appearance","outline"],["matInput","","placeholder","Enter email...","type","email","autocomplete","off",3,"ngModel","ngModelChange","blur","keyup.enter"],[1,"relative","rounded","m-4","bg-gray-200","border","border-gray-500","overflow-hidden"],[1,"absolute","top-1/2","left-1/2","-translate-x-1/2","-translate-y-1/2","opacity-30","flex","flex-col","items-center","space-y-2"],[1,"text-6xl"],["id","qr-stream","playsinline","","width","640","height","480","autoplay","",1,"object-cover"],["video",""],["icon","","matRipple","",1,"absolute","top-0","right-0",3,"routerLink"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"p",1),e._uU(2," Please enter your email address or scan your QR code "),e.qZA(),e.TgZ(3,"mat-form-field",2)(4,"input",3),e.NdJ("ngModelChange",function(o){return n.email=o})("blur",function(){return n.checkEmail(n.email)})("keyup.enter",function(){return n.checkEmail(n.email)}),e.qZA(),e.TgZ(5,"mat-error"),e._uU(6,"Invalid email format"),e.qZA()(),e.TgZ(7,"div",4)(8,"div",5)(9,"app-icon",6),e._uU(10,"videocam_off"),e.qZA(),e.TgZ(11,"p"),e._uU(12,"Camera feed loading or is not available"),e.qZA()(),e._UZ(13,"video",7,8),e.qZA(),e.TgZ(15,"a",9)(16,"app-icon"),e._uU(17,"close"),e.qZA()()()),2&t&&(e.xp6(4),e.Q6J("ngModel",n.email),e.xp6(11),e.Q6J("routerLink",e.DdM(2,Va)))},dependencies:[m.Fj,m.JJ,m.On,x.o,Z.KE,Z.TO,h.wG,B.Nt,w.rH],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;width:100%;background-color:#00000080}video[_ngcontent-%COMP%]{width:36rem;height:27rem}mat-form-field[_ngcontent-%COMP%]{width:36rem}a[_ngcontent-%COMP%]{position:absolute}\n/*# sourceMappingURL=checkin-qr-scan.component.ts-angular-inline--93.css.map*/"]}),i})();function za(i,r){1&i&&(e.TgZ(0,"p"),e._uU(1," Please wait in the lobby. "),e.qZA())}function Ka(i,r){1&i&&(e.TgZ(0,"p"),e._uU(1," Please use the vistor access lift over there. "),e.qZA())}const Xa=function(){return["/welcome"]};function eo(i,r){if(1&i&&(e.TgZ(0,"div",1)(1,"h3",2),e._uU(2,"You are checked in!"),e.qZA(),e.TgZ(3,"p",3),e._uU(4),e.ALo(5,"date"),e.ALo(6,"async"),e.ALo(7,"async"),e._UZ(8,"br"),e._uU(9),e.ALo(10,"async"),e.qZA(),e.YNc(11,za,2,0,"p",4),e.ALo(12,"async"),e.YNc(13,Ka,2,0,"p",4),e.ALo(14,"async"),e.TgZ(15,"a",5),e._uU(16," Done "),e.qZA()()),2&i){const t=e.oxw();let n,a,o;e.xp6(4),e.AsE(" Welcome, you have a meeting at ",e.xi3(5,6,(null==(n=e.lcZ(6,9,t.event))?null:n.date)||"","shortDate")," with ",(null==e.lcZ(7,11,t.event).organiser?null:e.lcZ(7,11,t.event).organiser.name)||"","."),e.xp6(5),e.hij(" ",(null==e.lcZ(10,13,t.event).organiser?null:e.lcZ(10,13,t.event).organiser.name)||""," has been notified and will be with you shortly.\xa0 "),e.xp6(2),e.Q6J("ngIf",!(null!=(a=e.lcZ(12,15,t.event))&&a.can_access_lift)),e.xp6(2),e.Q6J("ngIf",null==(o=e.lcZ(14,17,t.event))?null:o.can_access_lift),e.xp6(2),e.Q6J("routerLink",e.DdM(19,Xa))}}let to=(()=>{class i{constructor(t,n){this._checkin=t,this._router=n,this.event=this._checkin.event,this.guest=this._checkin.guest}ngOnInit(){this.event.pipe((0,E.P)()).subscribe(t=>t?"":this.previous())}previous(){this._router.navigate(["/checkin"])}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(q),e.Y36(w.F0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["checkin-results"]],decls:2,vars:3,consts:[["class","bg-white rounded shadow overflow-hidden relative flex flex-col items-center my-4 p-4 mx-auto space-y-4",4,"ngIf"],[1,"bg-white","rounded","shadow","overflow-hidden","relative","flex","flex-col","items-center","my-4","p-4","mx-auto","space-y-4"],[1,"text-xl"],[1,"text-center"],[4,"ngIf"],["button","","btn","","matRipple","",1,"w-32",3,"routerLink"]],template:function(t,n){1&t&&(e.YNc(0,eo,17,20,"div",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,n.event))},dependencies:[_.O5,h.wG,w.rH,_.Ov,_.uU],styles:["[_nghost-%COMP%]{position:absolute;display:flex;align-items:center;justify-content:center;inset:0;background-color:#00000080}[_nghost-%COMP%] > div[_ngcontent-%COMP%]{width:32rem;max-width:calc(100vw - 2rem)}\n/*# sourceMappingURL=checkin-result.component.ts-angular-inline--94.css.map*/"]}),i})();function no(i,r){if(1&i&&(e.TgZ(0,"p",5),e._uU(1),e.ALo(2,"async"),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(e.lcZ(2,1,t.error))}}const io=function(){return["/welcome"]};let ao=(()=>{class i{constructor(t){this._checkin=t,this.error=this._checkin.error}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(q))},i.\u0275cmp=e.Xpm({type:i,selectors:[["checkin-error"]],decls:9,vars:5,consts:[[1,"bg-white","rounded","shadow","overflow-hidden","relative","flex","flex-col","items-center","my-4","mx-auto","p-4"],[1,"text-2xl","mb-4"],["class","mb-2",4,"ngIf"],[1,"mb-4"],["btn","","btn","","matRipple","",1,"w-32",3,"routerLink"],[1,"mb-2"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"h3",1),e._uU(2,"Please see reception."),e.qZA(),e.YNc(3,no,3,3,"p",2),e.ALo(4,"async"),e.TgZ(5,"p",3),e._uU(6,"Our staff at reception will assist you."),e.qZA(),e.TgZ(7,"a",4),e._uU(8," Back "),e.qZA()()),2&t&&(e.xp6(3),e.Q6J("ngIf",e.lcZ(4,2,n.error)),e.xp6(4),e.Q6J("routerLink",e.DdM(4,io)))},dependencies:[_.O5,h.wG,w.rH,_.Ov],styles:["[_nghost-%COMP%]{position:absolute;display:flex;align-items:center;justify-content:center;inset:0;background-color:#00000080}[_nghost-%COMP%] > div[_ngcontent-%COMP%]{width:28rem;max-width:calc(100vw - 2rem)}\n/*# sourceMappingURL=checkin-error.component.ts-angular-inline--95.css.map*/"]}),i})();const oo=["checkin-covid",""],ro=function(){return["/welcome"]};let so=(()=>{class i{constructor(t,n){this._router=t,this._checkin=n}confirm(){if(!this.symptoms||!this.contact)return(0,g.cB)("Please select yes or no for each question");this._checkin.updateGuest({covid:"true"===this.contact,symptoms:"true"===this.symptoms}),"false"===this.symptoms&&"false"===this.contact?this._router.navigate(["/checkin","results"]):(this._checkin.setError("Please get tested for COVID-19 and self-isolate at home for 14 days"),this._router.navigate(["/checkin","error"]))}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(w.F0),e.Y36(q))},i.\u0275cmp=e.Xpm({type:i,selectors:[["","checkin-covid",""]],attrs:oo,decls:55,vars:5,consts:[[1,"bg-white","rounded","p-4","relative","overflow-y-auto","overflow-x-hidden"],[1,"text-xl","font-medium","mb-4"],[1,"list-decimal","list-inside"],[1,"list-disc","list-inside","px-4","mb-4"],["aria-label","Has Symptoms",3,"ngModel","ngModelChange"],["value","true"],["value","false",1,"ml-4"],[1,"my-4"],["aria-label","COVID contact or self-isolated",3,"ngModel","ngModelChange"],["btn","","matRipple","",3,"click"],["icon","","matRipple","",1,"absolute","top-0","right-0",3,"routerLink"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"h3",1),e._uU(2,"COVID Disclaimer"),e.qZA(),e.TgZ(3,"ol",2)(4,"li"),e._uU(5," Do you have any of the following symptoms?"),e._UZ(6,"br")(7,"br"),e.TgZ(8,"ul",3)(9,"li"),e._uU(10,"Fever"),e.qZA(),e.TgZ(11,"li"),e._uU(12,"Cough"),e.qZA(),e.TgZ(13,"li"),e._uU(14,"Shortness of breath"),e.qZA(),e.TgZ(15,"li"),e._uU(16,"Chills"),e.qZA(),e.TgZ(17,"li"),e._uU(18,"Body aches"),e.qZA(),e.TgZ(19,"li"),e._uU(20,"Sore or scratchy throat"),e.qZA(),e.TgZ(21,"li"),e._uU(22,"Headache"),e.qZA(),e.TgZ(23,"li"),e._uU(24,"Runny nose"),e.qZA(),e.TgZ(25,"li"),e._uU(26,"Muscle pain"),e.qZA(),e.TgZ(27,"li"),e._uU(28,"Vomitting"),e.qZA(),e.TgZ(29,"li"),e._uU(30,"Nausea"),e.qZA(),e.TgZ(31,"li"),e._uU(32,"Diarrhoa"),e.qZA(),e.TgZ(33,"li"),e._uU(34,"Loss of taste or smell"),e.qZA()(),e.TgZ(35,"mat-radio-group",4),e.NdJ("ngModelChange",function(o){return n.symptoms=o}),e.TgZ(36,"mat-radio-button",5),e._uU(37,"Yes"),e.qZA(),e.TgZ(38,"mat-radio-button",6),e._uU(39,"No"),e.qZA()()(),e._UZ(40,"hr",7),e.TgZ(41,"li"),e._uU(42," Have you been in contact with a COVID-19 case in the last 14 days or been asked to self-isolate by a health offical?"),e._UZ(43,"br")(44,"br"),e.TgZ(45,"mat-radio-group",8),e.NdJ("ngModelChange",function(o){return n.contact=o}),e.TgZ(46,"mat-radio-button",5),e._uU(47,"Yes"),e.qZA(),e.TgZ(48,"mat-radio-button",6),e._uU(49,"No"),e.qZA()()()(),e.TgZ(50,"button",9),e.NdJ("click",function(){return n.confirm()}),e._uU(51,"Confirm"),e.qZA(),e.TgZ(52,"a",10)(53,"app-icon"),e._uU(54,"close"),e.qZA()()()),2&t&&(e.xp6(35),e.Q6J("ngModel",n.symptoms),e.xp6(10),e.Q6J("ngModel",n.contact),e.xp6(7),e.Q6J("routerLink",e.DdM(4,ro)),e.uIk("disabled",!n.symptoms&&!n.contact))},dependencies:[m.JJ,m.On,x.o,h.wG,j.VQ,j.U0,w.rH],styles:["[_nghost-%COMP%]{position:absolute;display:flex;align-items:center;justify-content:center;inset:0;background-color:#00000080}[_nghost-%COMP%] > div[_ngcontent-%COMP%]{width:32rem;max-width:calc(100vw - 2rem);max-height:calc(100% - 2rem)}.absolute[_ngcontent-%COMP%]{position:absolute}button[_ngcontent-%COMP%]{margin:1rem 11rem 0;width:8rem}\n/*# sourceMappingURL=checkin-covid.component.ts-angular-inline--96.css.map*/"]}),i})();var co=l(3925);const lo=["app-checkin",""],mo=[{path:"",component:(()=>{class i{get background(){return this._settings.get("app.home.background")}constructor(t){this._settings=t}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(g.gb))},i.\u0275cmp=e.Xpm({type:i,selectors:[["","app-checkin",""]],attrs:lo,decls:3,vars:2,consts:[[1,"w-full"],[1,"flex-1","w-full","bg-center","bg-cover","relative"]],template:function(t,n){1&t&&(e._UZ(0,"a-topbar-header",0),e.TgZ(1,"div",1),e._UZ(2,"router-outlet"),e.qZA()),2&t&&(e.xp6(1),e.Udp("background-image","url("+n.background+")"))},dependencies:[co.B,w.lC],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%;width:100%}\n/*# sourceMappingURL=checkin.component.ts-angular-inline--97.css.map*/"]}),i})(),children:[{path:"scan",component:Wa},{path:"details",component:ft},{path:"preferences",component:ja},{path:"photo",component:Tt},{path:"results",component:to},{path:"error",component:ao},{path:"covid",component:so},{path:"**",redirectTo:"scan"}]},{path:"**",redirectTo:""}];let _o=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[_.ez,m.u5,m.UX,dt.q,w.Bz.forChild(mo)]}),i})()}}]);
//# sourceMappingURL=apps_visitor-kiosk_src_app_checkin_checkin_module_ts.js.map