{"version":3,"file":"apps_concierge_src_app_desks_desks_module_ts.js","mappings":"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","names":["i0","_r9","ctx_r8","setOptions","group","members","ctx_r10","tmp_0_0","ctx_r1","options","tmp_1_0","tmp_2_0","tmp_3_0","tmp_4_0","tmp_5_0","tmp_6_0","tmp_7_0","$event","_r12","ctx_r11","form","patchValue","secondary_resource","ctx_r4","value","_c20","_r14","ctx_r13","ctx_r5","_c23","NewDeskFormDetailsComponent_div_0_section_41_p_8_Template","ctx_r6","ctx_r7","date","duration","NewDeskFormDetailsComponent_div_0_section_1_Template","NewDeskFormDetailsComponent_div_0_div_8_Template","_r17","ctx_r16","NewDeskFormDetailsComponent_div_0_mat_checkbox_37_Template","NewDeskFormDetailsComponent_div_0_div_38_Template","NewDeskFormDetailsComponent_div_0_section_39_Template","NewDeskFormDetailsComponent_div_0_section_41_Template","NewDeskFormDetailsComponent_div_0_section_42_Template","ctx_r0","allow_groups","can_book_for_others","end_date","get","allow_all_day","can_book_lockers","tmp_13_0","contains","has_assets","NewDeskFormDetailsComponent","AsyncHandler","building","this","_org","bld","_settings","can_recurr","needs_reason","allow_time_changes","endOfDay","addDays","Date","now","constructor","_state","super","find","EventEmitter","buildings","building_list","levels","active_levels","features","from_id","recurrence_options","o","setFeature","f","e","ngOnChanges","changes","subscription","valueChanges","subscribe","list","length","setBookingAsset","resources","selected_desk","id","desk","asset_id","undefined","asset_name","name","map_id","description","booking_type","zones","zone","parent_id","booking_asset","t","i1","i2","i3","core","Xpm","selectors","inputs","outputs","decls","vars","consts","i18n_0","$localize","NewDeskFormDetailsComponent_div_0_Template","ctx","_r5","save","ctx_r3","loading","DeskBookModalComponent","_booking_form","_dialog_ref","event","BehaviorSubject","_this","_asyncToGenerator","next","postForm","catch","_","notifyError","emit","reason","metadata","notifySuccess","close","template","rf","DeskBookModalComponent_main_7_Template","DeskBookModalComponent_footer_9_Template","DeskBookModalComponent_ng_template_11_Template","_r2","data_r18","row_r19","_r21","row","ctx_r20","remove","DeskRestrictionModalComponent_ng_container_7_main_1_ng_template_2_Template","DeskRestrictionModalComponent_ng_container_7_main_1_ng_template_4_Template","DeskRestrictionModalComponent_ng_container_7_main_1_ng_template_6_Template","DeskRestrictionModalComponent_ng_container_7_main_1_ng_template_8_Template","restrictions","_c0","_c1","_c2","_r8","_r10","_r23","ctx_r22","add","ctx_r24","DeskRestrictionModalComponent_ng_container_7_main_1_Template","DeskRestrictionModalComponent_ng_container_7_footer_2_Template","adding","_r4","row_r28","_r30","ctx_r29","selected","ctx_r27","_r32","ctx_r31","start_date","ctx_r33","ctx_r34","search","DeskRestrictionModalComponent_ng_template_10_ng_template_14_Template","ctx_r35","ctx_r36","addRestriction","_r25","desk_list","_c3","_c4","_c5","_r26","DeskRestrictionModalComponent","_desks","startOfDay","desks","ngOnInit","initialised","pipe","first","toPromise","showMetadata","details","Array","restriction","filter","_this2","take","push","start","valueOf","end","assets","map","_this3","disableClose","updateMetadata","isBefore","DeskRestrictionModalComponent_ng_container_2_Template","DeskRestrictionModalComponent_ng_container_7_Template","DeskRestrictionModalComponent_ng_template_8_Template","DeskRestrictionModalComponent_ng_template_10_Template","level_r7","display_name","newDeskBooking","_r11","newDesk","_r13","ctx_r12","loadCSVData","_r15","ctx_r14","downloadTemplate","manageRestrictions","DesksTopbarComponent","_route","_router","_dialog","filters","manage","is_map","setDate","setFilters","updateZones","navigate","relativeTo","queryParams","zone_ids","join","queryParamsHandling","queryParamMap","params","has","split","level","levelWithID","approve","reject","url","includes","events","_ref","lvl","_x","apply","arguments","addDesks","Desk","randomInt","open","data","loadTextFileFromInputEvent","m","csvToJson","console","error","bookable","groups","toJSON","jsonToCsv","downloadFile","booking","showBooking","approveDesk","_this4","rejectDesk","i4","DesksTopbarComponent_mat_option_5_Template","DesksTopbarComponent_mat_option_6_Template","DesksTopbarComponent_button_8_Template","DesksTopbarComponent_button_9_Template","DesksTopbarComponent_button_10_Template","DesksTopbarComponent_button_11_Template","DesksTopbarComponent_button_12_Template","tmp_8_0","DesksComponent","startPolling","NavigationEnd","url_parts","path","parts","ngOnDestroy","stopPolling","attrs","DesksComponent_mat_progress_bar_13_Template","row_r13","row_r14","row_r15","user_email","DeskBookingsComponent_ng_template_8_div_3_Template","user_name","booked_by_name","booked_by_email","data_r19","DeskBookingsComponent_ng_template_14_app_icon_2_Template","row_r20","_r24","ctx_r23","checkin","ctx_r25","ctx_r26","extension_data","checkin_qr_code","_r22","DeskBookingsComponent","bookings","i","rejectAll","rejectAllDesks","d","runMethod","checkinDesk","fn","DeskBookingsComponent_ng_template_4_Template","DeskBookingsComponent_ng_template_6_Template","DeskBookingsComponent_ng_template_8_Template","DeskBookingsComponent_ng_template_10_Template","DeskBookingsComponent_ng_template_12_Template","DeskBookingsComponent_ng_template_14_Template","_r0","_r6","DeskMapViewComponent","_desk","_desks_state","map_url","styles","map_styles","positions","map_positions","actions","map_actions","map_features","setHost","u","host","opts","setLevel","ExploreDesksService","zoom","center","restoredCtx","row_r12","key_r13","key","setRowValue","data_r11","_r20","row_r17","key_r18","ctx_r19","data_r16","row_r22","data_r21","row_r25","_r28","removeDesk","loadQrCode","qr_code","_r31","ctx_r30","changed","ctx_r9","_r33","ctx_r32","DesksManageComponent","Object","keys","new_desk_count","resp","openConfirmModal","title","content","icon","updated_desks","message","unique","status","clearNewDesks","item","generateQRCode","location","origin","encodeURIComponent","dragging","combineLatest","new_desks","n","concat","handleDrag","type","DesksManageComponent_ng_template_4_Template","DesksManageComponent_ng_template_6_Template","DesksManageComponent_ng_template_8_Template","DesksManageComponent_ng_template_10_Template","DesksManageComponent_div_12_Template","DesksManageComponent_div_13_Template","DesksManageComponent_div_14_Template","ROUTES","component","NewDesksComponent","NewDesksComponent_mat_progress_bar_7_Template","children","redirectTo","DesksModule","oAB","cJS","CommonModule","FormsModule","MatTabsModule","ReactiveFormsModule","UIModule","SharedExploreModule","SharedBookingsModule","FormFieldsModule","MatRadioModule","MatFormFieldModule","MatCheckboxModule","MatInputModule","RouterModule"],"sourceRoot":"webpack:///","sources":["./apps/workplace/src/app/book/new-desk-flow/new-desk-form-details.component.ts","./apps/concierge/src/app/desks/desk-book-modal.component.ts","./apps/concierge/src/app/desks/desk-restriction-modal.component.ts","./apps/concierge/src/app/desks/desks-topbar.component.ts","./apps/concierge/src/app/desks/desks.component.ts","./apps/concierge/src/app/desks/desk-bookings.component.ts","./apps/concierge/src/app/desks/desk-map-view.component.ts","./apps/concierge/src/app/desks/desks-manage.component.ts","./apps/concierge/src/app/desks/new-desks.component.ts","./apps/concierge/src/app/desks/desks.module.ts"],"sourcesContent":["import {\n    Component,\n    EventEmitter,\n    Input,\n    Output,\n    SimpleChanges,\n} from '@angular/core';\nimport { FormGroup } from '@angular/forms';\nimport { BookingFormService } from '@placeos/bookings';\nimport { AsyncHandler, SettingsService } from '@placeos/common';\nimport { Desk, OrganisationService } from '@placeos/organisation';\nimport { addDays, endOfDay } from 'date-fns';\n\n@Component({\n    selector: 'new-desk-form-details',\n    styles: [],\n    template: `\n        <!-- <div class=\"m-2 bg-yellow-500 p-2 text-center rounded shadow text-sm\">\n            The selected desk hasn't been booked. Please book the desk to be\n            able to check-in.\n        </div> -->\n        <div\n            class=\"p-0 sm:py-4 sm:px-16 divide-y divide-gray-300 space-y-2\"\n            *ngIf=\"form\"\n            [formGroup]=\"form\"\n        >\n            <section class=\"flex items-center\" *ngIf=\"allow_groups\">\n                <button\n                    matRipple\n                    class=\"relative h-16 flex items-center justify-center flex-1 space-x-2\"\n                    [class.text-primary]=\"!(options | async)?.group\"\n                    [class.opacity-60]=\"(options | async)?.group\"\n                    (click)=\"setOptions({ group: false, members: [] })\"\n                >\n                    <app-icon class=\"text-2xl\">person</app-icon>\n                    <div class=\"\" i18n>Single</div>\n                    <div\n                        class=\"absolute h-2 inset-x-0 bottom-0 !m-0\"\n                        [class.bg-gray-200]=\"(options | async)?.group\"\n                        [class.bg-primary]=\"!(options | async)?.group\"\n                    ></div>\n                </button>\n                <button\n                    matRipple\n                    class=\"relative h-16 flex items-center justify-center flex-1 space-x-2\"\n                    [class.text-primary]=\"(options | async)?.group\"\n                    [class.opacity-60]=\"!(options | async)?.group\"\n                    (click)=\"setOptions({ group: true })\"\n                >\n                    <app-icon class=\"text-2xl\">group_add</app-icon>\n                    <div class=\"\" i18n>Group</div>\n                    <div\n                        class=\"absolute h-2 inset-x-0 bottom-0 !m-0\"\n                        [class.bg-gray-200]=\"!(options | async)?.group\"\n                        [class.bg-primary]=\"(options | async)?.group\"\n                    ></div>\n                </button>\n            </section>\n            <section class=\"p-2\" [class.!border-none]=\"allow_groups\">\n                <h3 class=\"space-x-2 flex items-center mb-4\">\n                    <div\n                        class=\"bg-black/20 rounded-full h-6 w-6 flex items-center justify-center\"\n                    >\n                        1\n                    </div>\n                    <div class=\"text-xl\" i18n>Details</div>\n                </h3>\n                <div\n                    class=\"w-full\"\n                    *ngIf=\"can_book_for_others && !(options | async)?.group\"\n                >\n                    <label for=\"title\">Host<span>*</span></label>\n                    <a-user-search-field\n                        formControlName=\"user\"\n                    ></a-user-search-field>\n                </div>\n                <div class=\"flex items-center flex-wrap sm:space-x-2\">\n                    <div class=\"flex-1 min-w-[256px]\">\n                        <label for=\"title\">Add Title<span>*</span></label>\n                        <mat-form-field appearance=\"outline\" class=\"w-full\">\n                            <input\n                                matInput\n                                name=\"title\"\n                                formControlName=\"title\"\n                                placeholder=\"e.g. Focus Time\"\n                            />\n                            <mat-error i18n\n                                >Booking title is required.</mat-error\n                            >\n                        </mat-form-field>\n                    </div>\n                    <div class=\"flex-1 min-w-[256px]\">\n                        <label for=\"date\" i18n>Date<span>*</span></label>\n                        <a-date-field\n                            name=\"date\"\n                            formControlName=\"date\"\n                            [to]=\"end_date\"\n                            i18n\n                        >\n                            Date and time must be in the future\n                        </a-date-field>\n                    </div>\n                </div>\n                <div class=\"flex items-center space-x-2\">\n                    <div class=\"flex-1 w-1/3\">\n                        <label for=\"start-time\" i18n\n                            >Start Time<span>*</span></label\n                        >\n                        <a-time-field\n                            name=\"start-time\"\n                            [ngModel]=\"form.value.date\"\n                            (ngModelChange)=\"form.patchValue({ date: $event })\"\n                            [ngModelOptions]=\"{ standalone: true }\"\n                        ></a-time-field>\n                    </div>\n                    <div class=\"flex-1 w-1/3 relative\">\n                        <label for=\"end-time\" i18n\n                            >End Time<span>*</span></label\n                        >\n                        <a-duration-field\n                            name=\"end-time\"\n                            formControlName=\"duration\"\n                            [time]=\"form.get('date')?.value\"\n                            [max]=\"12 * 60\"\n                            [min]=\"60\"\n                            [step]=\"60\"\n                        >\n                        </a-duration-field>\n                        <mat-checkbox\n                            formControlName=\"all_day\"\n                            *ngIf=\"allow_all_day\"\n                            class=\"absolute -top-2 right-0\"\n                            i18n\n                        >\n                            All Day\n                        </mat-checkbox>\n                    </div>\n                </div>\n                <div\n                    class=\"flex items-center space-x-2\"\n                    *ngIf=\"can_book_lockers\"\n                >\n                    <div class=\"flex-1 w-1/3\">\n                        <mat-checkbox\n                            [ngModel]=\"!!form.value.secondary_resource\"\n                            (ngModelChange)=\"\n                                form.patchValue({\n                                    secondary_resource: $event ? 'locker' : ''\n                                })\n                            \"\n                            [ngModelOptions]=\"{ standalone: true }\"\n                            i18n\n                        >\n                            Require locker\n                        </mat-checkbox>\n                    </div>\n                </div>\n            </section>\n            <section class=\"p-2\" *ngIf=\"(options | async)?.group\">\n                <h3 class=\"space-x-2 flex items-center\">\n                    <div\n                        class=\"bg-black/20 rounded-full h-6 w-6 flex items-center justify-center\"\n                    >\n                        2\n                    </div>\n                    <div class=\"text-xl\" i18n>Group Members</div>\n                    <div class=\"flex-1 w-px\"></div>\n                </h3>\n                <div class=\"overflow-hidden\">\n                    <a-user-list-field\n                        class=\"mt-4\"\n                        [ngModel]=\"(options | async)?.members || []\"\n                        (ngModelChange)=\"setOptions({ members: $event })\"\n                        [ngModelOptions]=\"{ standalone: true }\"\n                    ></a-user-list-field>\n                </div>\n            </section>\n            <section class=\"p-2\" *ngIf=\"form.contains('resources')\">\n                <h3 class=\"space-x-2 flex items-center mb-4\">\n                    <div\n                        class=\"bg-black/20 rounded-full h-6 w-6 flex items-center justify-center\"\n                    >\n                        {{ (options | async)?.group ? 3 : 2 }}\n                    </div>\n                    <div class=\"text-xl\" i18n>Desk</div>\n                </h3>\n                <desk-list-field formControlName=\"resources\"></desk-list-field>\n                <p\n                    *ngIf=\"(options | async)?.group\"\n                    class=\"text-center rounded px-2 py-1 bg-yellow-400 shadow text-xs\"\n                >\n                    Desks nearby to the selected desk will booked for group\n                    members\n                </p>\n            </section>\n            <section class=\"p-2\" *ngIf=\"has_assets\">\n                <h3 class=\"space-x-2 flex items-center mb-4\">\n                    <div\n                        class=\"bg-black/20 rounded-full h-6 w-6 flex items-center justify-center\"\n                    >\n                        {{ (options | async)?.group ? 4 : 3 }}\n                    </div>\n                    <div class=\"text-xl\" i18n>Request Asset</div>\n                </h3>\n                <asset-list-field\n                    [date]=\"form.value.date\"\n                    [duration]=\"form.value.duration\"\n                    formControlName=\"assets\"\n                ></asset-list-field>\n            </section>\n        </div>\n    `,\n})\nexport class NewDeskFormDetailsComponent extends AsyncHandler {\n    @Input() public form: FormGroup;\n    @Output() public find = new EventEmitter<void>();\n    /** List of available buildings to select */\n    public readonly buildings = this._org.building_list;\n    /** List of available levels for the selected building */\n    public readonly levels = this._org.active_levels;\n    /** List of set options for desk booking */\n    public readonly options = this._state.options;\n    /** List of set options for desk booking */\n    public readonly features = this._state.features;\n\n    /** Selected desk for booking */\n    public selected_desk: Desk;\n    public from_id = false;\n\n    public readonly recurrence_options = ['daily', 'weekly', 'monthly'];\n\n    public get building() {\n        return this._org.building;\n    }\n    public set building(bld) {\n        this._org.building = bld;\n    }\n\n    public readonly setOptions = (o) => this._state.setOptions(o);\n\n    public readonly setFeature = (f, e) => this._state.setFeature(f, e);\n\n    public get can_book_for_others() {\n        return this._settings.get('app.desks.can_book_for_others');\n    }\n\n    public get can_book_lockers() {\n        return this._settings.get('app.desks.can_book_lockers');\n    }\n    public get can_recurr() {\n        return this._settings.get('app.desks.recurrence_allowed');\n    }\n\n    public get allow_groups() {\n        return this._settings.get('app.desks.allow_groups');\n    }\n\n    public get has_assets() {\n        return !!this._settings.get('app.desks.has_assets');\n    }\n\n    public get needs_reason() {\n        return this._settings.get('app.desks.needs_reason') === true;\n    }\n\n    public get allow_time_changes() {\n        return !!this._settings.get('app.desks.allow_time_changes');\n    }\n\n    public get allow_all_day() {\n        return (\n            this.allow_time_changes &&\n            !!this._settings.get('app.desks.allow_all_day')\n        );\n    }\n\n    public get end_date() {\n        return endOfDay(\n            addDays(\n                Date.now(),\n                this._settings.get('app.desks.available_period') || 90\n            )\n        );\n    }\n\n    constructor(\n        private _state: BookingFormService,\n        private _org: OrganisationService,\n        private _settings: SettingsService\n    ) {\n        super();\n    }\n\n    public ngOnChanges(changes: SimpleChanges) {\n        if (changes.form && this.form) {\n            this.subscription(\n                'change',\n                this.form.get('resources')?.valueChanges?.subscribe((list) => {\n                    list?.length ? this.setBookingAsset(list[0]) : '';\n                })\n            );\n            if (this.form.value.resources?.length) {\n                this.setBookingAsset(this.form.value.resources[0]);\n            }\n            if (this.selected_desk?.id) {\n                this.form.patchValue({ resources: [this.selected_desk] });\n            }\n        }\n    }\n\n    private setBookingAsset(desk: Desk) {\n        this._state.form.patchValue({ asset_id: undefined });\n        if (!desk) return;\n        this.selected_desk = desk;\n        this._state.form.patchValue({\n            asset_id: desk?.id,\n            asset_name: desk.name,\n            map_id: desk?.map_id || desk?.id,\n            description: desk.name,\n            booking_type: 'desk',\n            zones: desk.zone ? [desk.zone?.parent_id, desk.zone?.id] : [],\n            booking_asset: desk,\n        });\n    }\n}\n","import { Component, Output, EventEmitter } from '@angular/core';\nimport { MatDialogRef } from '@angular/material/dialog';\nimport { BookingFormService } from '@placeos/bookings';\nimport { DialogEvent, notifyError, notifySuccess } from '@placeos/common';\nimport { BehaviorSubject } from 'rxjs';\n\n@Component({\n    selector: 'desk-book-modal',\n    template: `\n        <header>\n            <h2>New Desk Booking</h2>\n            <div class=\"flex-1 w-0\"></div>\n            <button icon mat-dialog-close>\n                <app-icon>close</app-icon>\n            </button>\n        </header>\n        <main\n            *ngIf=\"!(loading | async); else load_state\"\n            class=\"overflow-auto p-4\"\n        >\n            <new-desk-form-details [form]=\"form\"></new-desk-form-details>\n        </main>\n        <footer\n            *ngIf=\"!(loading | async)\"\n            class=\"flex justify-center items-center p-2 border-t border-gray-200\"\n        >\n            <button btn matRipple class=\"w-32\" (click)=\"save()\">Save</button>\n        </footer>\n        <ng-template #load_state>\n            <main\n                loading\n                class=\"h-64 flex flex-col items-center justify-center\"\n            >\n                <mat-spinner [diameter]=\"48\" class=\"mb-4\"></mat-spinner>\n                <p>{{ loading | async }}</p>\n            </main>\n        </ng-template>\n    `,\n    styles: [``],\n})\nexport class DeskBookModalComponent {\n    @Output() public event = new EventEmitter<DialogEvent>();\n    public readonly loading = new BehaviorSubject(false);\n\n    public get form() {\n        return this._booking_form.form;\n    }\n\n    constructor(\n        private _booking_form: BookingFormService,\n        private _dialog_ref: MatDialogRef<DeskBookModalComponent>\n    ) {}\n\n    public async save() {\n        this.loading.next(true);\n        const event = await this._booking_form.postForm().catch((_) => {\n            notifyError(_);\n            this.loading.next(false);\n            throw _;\n        });\n        this.event.emit({ reason: 'done', metadata: event });\n        notifySuccess('Successfully created booking');\n        this._dialog_ref.close();\n        this.loading.next(false);\n    }\n}\n","import { Component } from '@angular/core';\nimport { MatDialogRef } from '@angular/material/dialog';\nimport { notifyError, notifySuccess } from '@placeos/common';\nimport { Desk, OrganisationService } from '@placeos/organisation';\nimport { showMetadata, updateMetadata } from '@placeos/ts-client';\nimport { endOfDay, isBefore, startOfDay } from 'date-fns';\nimport { first, take } from 'rxjs/operators';\nimport { DesksStateService } from './desks-state.service';\nimport { AssetRestriction } from '@placeos/bookings';\n\n@Component({\n    selector: 'desk-restriction-modal',\n    template: `\n        <header class=\"flex items-center justify-between\">\n            <h2>\n                <ng-container *ngIf=\"adding\">Add</ng-container> Desk\n                Restrictions\n            </h2>\n            <button btn icon matRipple mat-dialog-close>\n                <app-icon>close</app-icon>\n            </button>\n        </header>\n        <ng-container *ngIf=\"!loading; else load_state\">\n            <main\n                class=\"h-[65vh] overflow-auto\"\n                *ngIf=\"!adding; else add_state\"\n            >\n                <custom-table\n                    class=\"block w-[calc(80vw)]\"\n                    [dataSource]=\"restrictions\"\n                    [columns]=\"['start', 'duration', 'assets', 'actions']\"\n                    [display_column]=\"['Date', 'Period', 'No. of Desks', ' ']\"\n                    [template]=\"{\n                        start: date_template,\n                        duration: duration_template,\n                        assets: count_template,\n                        actions: actions_template\n                    }\"\n                    empty=\"No desk restrictions set\"\n                ></custom-table>\n                <ng-template #date_template let-data=\"data\">\n                    {{ data | date: 'mediumDate' }}\n                </ng-template>\n                <ng-template #duration_template let-data=\"data\">\n                    {{ data }}\n                </ng-template>\n                <ng-template #count_template let-data=\"data\">\n                    {{ data?.length || '0' }} desk(s)\n                </ng-template>\n                <ng-template #actions_template let-row=\"row\">\n                    <button btn icon matRipple (click)=\"remove(row)\">\n                        <app-icon>delete</app-icon>\n                    </button>\n                </ng-template>\n            </main>\n            <footer\n                class=\"flex items-center justify-end space-x-2 p-2 border-t border-gray-200\"\n                *ngIf=\"!adding\"\n            >\n                <button btn matRipple class=\"inverse\" (click)=\"add()\">\n                    Add Restriction\n                </button>\n                <button btn matRipple (click)=\"save()\">\n                    Save Restrictions\n                </button>\n            </footer>\n        </ng-container>\n        <ng-template #load_state>\n            <div\n                class=\"flex flex-col items-center justify-center w-[20rem] h-[16rem] space-y-2\"\n            >\n                <mat-spinner [diameter]=\"32\"></mat-spinner>\n                <p>Saving desk restriction changes...</p>\n            </div>\n        </ng-template>\n        <ng-template #add_state>\n            <main class=\"flex flex-col h-[65vh] overflow-auto\">\n                <div class=\"flex items-center space-x-2 px-2 pt-2\">\n                    <mat-form-field appearance=\"outline\" class=\"flex-1\">\n                        <mat-date-range-input [rangePicker]=\"picker\">\n                            <input\n                                matStartDate\n                                placeholder=\"Start date\"\n                                [(ngModel)]=\"start_date\"\n                            />\n                            <input\n                                matEndDate\n                                placeholder=\"End date\"\n                                [(ngModel)]=\"end_date\"\n                            />\n                        </mat-date-range-input>\n                        <mat-datepicker-toggle\n                            matIconSuffix\n                            [for]=\"picker\"\n                        ></mat-datepicker-toggle>\n                        <mat-date-range-picker #picker></mat-date-range-picker>\n                    </mat-form-field>\n                    <mat-form-field appearance=\"outline\" class=\"flex-1\">\n                        <app-icon matPrefix>search</app-icon>\n                        <input\n                            matInput\n                            [(ngModel)]=\"search\"\n                            placeholder=\"Filter desks\"\n                        />\n                    </mat-form-field>\n                </div>\n                <custom-table\n                    class=\"block w-[calc(65vw)]\"\n                    [dataSource]=\"desk_list\"\n                    [filter]=\"search\"\n                    [columns]=\"['toggle', 'name', 'map_id']\"\n                    [display_column]=\"[' ', 'name', 'MapID']\"\n                    [template]=\"{\n                        toggle: toggle_template\n                    }\"\n                    empty=\"No desk restrictions set\"\n                ></custom-table>\n                <ng-template #toggle_template let-row=\"row\">\n                    <mat-checkbox\n                        [(ngModel)]=\"selected[row.id || row.map_id]\"\n                    ></mat-checkbox>\n                </ng-template>\n            </main>\n            <footer\n                class=\"flex items-center justify-end space-x-2 p-2 border-t border-gray-200\"\n            >\n                <button\n                    btn\n                    matRipple\n                    class=\"inverse w-32\"\n                    (click)=\"adding = false\"\n                >\n                    Back\n                </button>\n                <button btn matRipple (click)=\"addRestriction()\" class=\"w-32\">\n                    Add to Restrictions\n                </button>\n            </footer>\n        </ng-template>\n    `,\n    styles: [``],\n})\nexport class DeskRestrictionModalComponent {\n    public loading = false;\n    public adding = false;\n    public search = '';\n    public selected: Record<string, boolean> = {};\n    public start_date = startOfDay(Date.now());\n    public end_date = endOfDay(Date.now());\n    public restrictions: AssetRestriction[] = [];\n    public readonly desk_list = this._desks.desks;\n\n    constructor(\n        private _desks: DesksStateService,\n        private _org: OrganisationService,\n        private _dialog_ref: MatDialogRef<DeskRestrictionModalComponent>\n    ) {}\n\n    public async ngOnInit() {\n        await this._org.initialised.pipe(first((_) => _)).toPromise();\n        showMetadata(this._org.building.id, 'desk_restrictions').subscribe(\n            ({ details }) => {\n                this.restrictions = details instanceof Array ? details : [];\n            }\n        );\n    }\n\n    public add() {\n        this.search = '';\n        this.start_date = startOfDay(Date.now());\n        this.end_date = endOfDay(Date.now());\n        this.selected = {};\n        this.adding = true;\n    }\n\n    public remove(restriction: AssetRestriction) {\n        this.restrictions = this.restrictions.filter((_) => _ !== restriction);\n    }\n\n    public async addRestriction() {\n        const desks = await this.desk_list.pipe(take(1)).toPromise();\n        this.restrictions.push({\n            start: this.start_date.valueOf(),\n            end: this.end_date.valueOf(),\n            assets: desks.filter((_) => this.selected[_.id]).map((_) => _.id),\n        });\n        this.adding = false;\n    }\n\n    public async save() {\n        this.loading = true;\n        this._dialog_ref.disableClose = true;\n        await updateMetadata(this._org.building.id, {\n            name: 'desk_restrictions',\n            description: 'Desk restrictions',\n            details: this.restrictions.filter((_) =>\n                isBefore(Date.now(), _.end)\n            ),\n        })\n            .toPromise()\n            .catch((_) => {\n                this.loading = false;\n                this._dialog_ref.disableClose = false;\n                notifyError('Failed to update desk restrictions');\n                throw _;\n            });\n        this.loading = false;\n        this._dialog_ref.disableClose = false;\n        this._dialog_ref.close();\n        notifySuccess('Successfully updated desk restrictions');\n    }\n}\n","import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { first, take } from 'rxjs/operators';\n\nimport {\n    AsyncHandler,\n    csvToJson,\n    downloadFile,\n    jsonToCsv,\n    loadTextFileFromInputEvent,\n    notifyError,\n    notifySuccess,\n} from '@placeos/common';\nimport { Desk, OrganisationService } from '@placeos/organisation';\nimport { DesksStateService } from './desks-state.service';\nimport { showBooking } from '@placeos/bookings';\nimport { randomInt } from '@placeos/common';\nimport { MatDialog } from '@angular/material/dialog';\nimport { DeskBookModalComponent } from './desk-book-modal.component';\nimport { DeskRestrictionModalComponent } from './desk-restriction-modal.component';\n\n@Component({\n    selector: 'desks-topbar',\n    template: `\n        <div\n            class=\"flex items-center bg-white dark:bg-neutral-700 h-20 px-4 border-b border-gray-300 dark:border-neutral-500 space-x-2\"\n        >\n            <mat-form-field appearance=\"outline\">\n                <mat-select\n                    [ngModel]=\"\n                        (filters | async).zones\n                            ? (filters | async).zones[0]\n                            : 'All'\n                    \"\n                    (ngModelChange)=\"updateZones([$event])\"\n                    placeholder=\"All Levels\"\n                >\n                    <mat-option value=\"All\" *ngIf=\"!is_map\"\n                        >All Levels</mat-option\n                    >\n                    <mat-option\n                        *ngFor=\"let level of levels | async\"\n                        [value]=\"level.id\"\n                    >\n                        {{ level.display_name || level.name }}\n                    </mat-option>\n                </mat-select>\n            </mat-form-field>\n            <button\n                btn\n                matRipple\n                *ngIf=\"!manage\"\n                class=\"mx-2 w-36\"\n                matTooltip=\"New Desk Booking\"\n                (click)=\"newDeskBooking()\"\n            >\n                New Booking\n            </button>\n            <button\n                btn\n                icon\n                matRipple\n                *ngIf=\"manage\"\n                class=\"bg-primary mx-2 text-white rounded\"\n                (click)=\"newDesk()\"\n                matTooltip=\"New Desk\"\n            >\n                <app-icon>add</app-icon>\n            </button>\n            <button\n                btn\n                icon\n                matRipple\n                *ngIf=\"manage\"\n                class=\"bg-primary relative text-white rounded\"\n                matTooltip=\"Upload Desks CSV\"\n            >\n                <app-icon>cloud_upload</app-icon>\n                <input\n                    type=\"file\"\n                    class=\"absolute inset-0 opacity-0\"\n                    (change)=\"loadCSVData($event)\"\n                />\n            </button>\n            <button\n                btn\n                icon\n                matRipple\n                *ngIf=\"manage\"\n                class=\"bg-primary mx-2 text-white rounded\"\n                (click)=\"downloadTemplate()\"\n                matTooltip=\"Download Template Desk CSV\"\n            >\n                <app-icon>download</app-icon>\n            </button>\n            <button\n                btn\n                icon\n                matRipple\n                *ngIf=\"manage\"\n                class=\"bg-primary mx-2 text-white rounded\"\n                (click)=\"manageRestrictions()\"\n                matTooltip=\"Desk Restrictions\"\n            >\n                <app-icon>lock_open</app-icon>\n            </button>\n            <div class=\"flex-1 w-2\"></div>\n            <searchbar\n                class=\"mr-2\"\n                [model]=\"(filters | async)?.search\"\n                (modelChange)=\"setFilters({ search: $event })\"\n            ></searchbar>\n            <date-options (dateChange)=\"setDate($event)\"></date-options>\n        </div>\n    `,\n    styles: [\n        `\n            mat-form-field {\n                height: 3.25em;\n                width: 8em;\n            }\n        `,\n    ],\n})\nexport class DesksTopbarComponent extends AsyncHandler implements OnInit {\n    /** List of levels for the active building */\n    public readonly levels = this._org.active_levels;\n    /** List of levels for the active building */\n    public readonly filters = this._desks.filters;\n\n    public manage = false;\n    public is_map = false;\n    /** Set filtered date */\n    public readonly setDate = (date) => this._desks.setFilters({ date });\n    public readonly setFilters = (o) => this._desks.setFilters(o);\n    /** Update active zones for desks */\n    public readonly updateZones = (zones: string[]) => {\n        this._router.navigate([], {\n            relativeTo: this._route,\n            queryParams: { zone_ids: zones.join(',') },\n            queryParamsHandling: 'merge',\n        });\n        this._desks.setFilters({ zones });\n    };\n\n    constructor(\n        private _desks: DesksStateService,\n        private _org: OrganisationService,\n        private _route: ActivatedRoute,\n        private _router: Router,\n        private _dialog: MatDialog\n    ) {\n        super();\n    }\n\n    public async ngOnInit() {\n        await this._org.initialised.pipe(first((_) => _)).toPromise();\n        this.subscription(\n            'route.query',\n            this._route.queryParamMap.subscribe((params) => {\n                if (params.has('zone_ids')) {\n                    const zones = params.get('zone_ids').split(',');\n                    if (zones.length) {\n                        this.updateZones(zones);\n                        const level = this._org.levelWithID(zones);\n                        if (!level) return;\n                        this._org.building = this._org.buildings.find(\n                            (bld) => bld.id === level.parent_id\n                        );\n                    }\n                }\n                if (params.has('date')) {\n                    this.setDate(new Date(+params.get('date')));\n                }\n                if (params.has('approve')) {\n                    this.approve(params.get('approve'));\n                } else if (params.has('reject')) {\n                    this.reject(params.get('reject'));\n                }\n                this.manage = this._router.url?.includes('manage');\n                this.is_map = this._router.url?.includes('map');\n            })\n        );\n        this.subscription(\n            'router.events',\n            this._router.events.subscribe(() => {\n                this.manage = this._router.url?.includes('manage');\n                this.is_map = this._router.url?.includes('map');\n            })\n        );\n        this.subscription(\n            'levels',\n            this._org.active_levels.subscribe(async (levels) => {\n                const filters = await this.filters.pipe(take(1)).toPromise();\n                const zones =\n                    filters?.zones?.filter(\n                        (zone) =>\n                            levels.find((lvl) => lvl.id === zone) ||\n                            zone === 'All'\n                    ) || [];\n                if (!zones.length && levels.length) {\n                    zones.push(levels[0].id);\n                }\n                this.updateZones(zones);\n            })\n        );\n        this.manage = this._router.url?.includes('manage');\n        this.is_map = this._router.url?.includes('map');\n    }\n\n    public newDesk() {\n        this._desks.addDesks([new Desk({ id: `desk-${randomInt(999_999)}` })]);\n        notifySuccess(\n            'New desk added to local data. Make sure to save the desk before using it.'\n        );\n    }\n\n    public newDeskBooking() {\n        this._dialog.open(DeskBookModalComponent, {});\n    }\n\n    public manageRestrictions() {\n        this._dialog.open(DeskRestrictionModalComponent, {});\n    }\n\n    public async loadCSVData(event: InputEvent) {\n        const data = await loadTextFileFromInputEvent(event).catch(([m, e]) => {\n            notifyError(m);\n            throw e;\n        });\n        try {\n            const list = csvToJson(data) || [];\n            this._desks.addDesks(\n                list.map(\n                    (_) =>\n                        new Desk({\n                            ..._,\n                            id: _.id || `desk-${randomInt(999_999)}`,\n                        })\n                )\n            );\n        } catch (e) {\n            console.error(e);\n        }\n    }\n\n    public downloadTemplate() {\n        const desk: any = new Desk({\n            id: 'desk-123',\n            name: 'Test Desk',\n            bookable: true,\n            groups: ['test-desk-group', 'desk-bookers'],\n            features: ['Standing Desk', 'Dual Monitor'],\n        }).toJSON();\n        const data = jsonToCsv([desk]);\n        downloadFile('desk-template.csv', data);\n    }\n\n    /**\n     * Aprrove a desk booking\n     * @param id Booking ID to approve\n     */\n    private async approve(id: string) {\n        const booking = await showBooking(id).toPromise();\n        if (booking) {\n            this._desks.approveDesk(booking);\n        }\n    }\n\n    /**\n     * Reject a desk booking\n     * @param id Booking ID to reject\n     */\n    private async reject(id: string) {\n        const booking = await showBooking(id).toPromise();\n        if (booking) {\n            this._desks.rejectDesk(booking);\n        }\n    }\n}\n","import { Component, OnDestroy, OnInit } from '@angular/core';\nimport { NavigationEnd, Router } from '@angular/router';\nimport { AsyncHandler } from '@placeos/common';\nimport { DesksStateService } from './desks-state.service';\n\n@Component({\n    selector: '[app-desks]',\n    template: `\n        <sidebar></sidebar>\n        <main\n            class=\"flex-1 relative w-1/2 flex flex-col bg-gray-200 dark:bg-neutral-600 overflow-hidden\"\n        >\n            <desks-topbar class=\"w-full\"></desks-topbar>\n            <div class=\"dark\">\n                <nav mat-tab-nav-bar>\n                    <a\n                        mat-tab-link\n                        [routerLink]=\"['/book', 'desks', 'events']\"\n                        queryParamsHandling=\"merge\"\n                        [active]=\"path === 'events'\"\n                    >\n                        Bookings\n                    </a>\n                    <a\n                        mat-tab-link\n                        [routerLink]=\"['/book', 'desks', 'map']\"\n                        queryParamsHandling=\"merge\"\n                        [active]=\"path === 'map'\"\n                    >\n                        Map View\n                    </a>\n                    <a\n                        mat-tab-link\n                        [routerLink]=\"['/book', 'desks', 'manage']\"\n                        queryParamsHandling=\"merge\"\n                        [active]=\"path === 'manage'\"\n                    >\n                        Manage Desks\n                    </a>\n                </nav>\n            </div>\n            <div class=\"flex-1 h-1/2 w-full relative overflow-auto\">\n                <router-outlet></router-outlet>\n            </div>\n            <mat-progress-bar\n                class=\"w-full\"\n                *ngIf=\"loading | async\"\n                mode=\"indeterminate\"\n            ></mat-progress-bar>\n        </main>\n    `,\n    styles: [\n        `\n            :host {\n                display: flex;\n                height: 100%;\n                width: 100%;\n            }\n        `,\n    ],\n})\nexport class DesksComponent extends AsyncHandler implements OnInit, OnDestroy {\n    public readonly loading = this._state.loading;\n    public path: string;\n\n    constructor(private _state: DesksStateService, private _router: Router) {\n        super();\n    }\n\n    public ngOnInit() {\n        this._state.startPolling();\n        this.subscription(\n            'router.events',\n            this._router.events.subscribe((e) => {\n                if (e instanceof NavigationEnd) {\n                    const url_parts = this._router.url?.split('/') || [''];\n                    this.path = url_parts[parts.length - 1].split('?')[0];\n                }\n            })\n        );\n        const parts = this._router.url?.split('/') || [''];\n        this.path = parts[parts.length - 1].split('?')[0];\n    }\n\n    public ngOnDestroy() {\n        super.ngOnDestroy();\n        this._state.stopPolling();\n    }\n}\n","import { Component } from '@angular/core';\n\nimport { DesksStateService } from './desks-state.service';\nimport { map } from 'rxjs/operators';\n\n@Component({\n    selector: 'desk-bookings',\n    template: `\n        <div class=\"overflow-auto h-full w-full\">\n            <custom-table\n                class=\"min-w-[85rem] block\"\n                [dataSource]=\"bookings\"\n                [filter]=\"(filters | async)?.search\"\n                [columns]=\"[\n                    'user_name',\n                    'group',\n                    'desk_name',\n                    'date',\n                    'status',\n                    'approver_name',\n                    'checked_in',\n                    'actions'\n                ]\"\n                [display_column]=\"[\n                    'Person',\n                    'Group',\n                    'Desk',\n                    'Period',\n                    'Status',\n                    'Approver',\n                    'Checked In',\n                    ' '\n                ]\"\n                [column_size]=\"[\n                    '14r',\n                    '10r',\n                    '10r',\n                    '10r',\n                    '7r',\n                    '10r',\n                    '8r',\n                    'flex'\n                ]\"\n                [template]=\"{\n                    user_name: user_template,\n                    desk_name: desk_template,\n                    date: date_template,\n                    status: status_template,\n                    checked_in: bool_template,\n                    access: bool_template,\n                    actions: action_template\n                }\"\n                [empty]=\"\n                    (filters | async)?.search\n                        ? 'No matching desk bookings'\n                        : 'There are no desk booking for the currently selected date.'\n                \"\n            ></custom-table>\n            <ng-template #date_template let-row=\"row\">\n                {{ row.date | date: 'shortTime' }} &ndash;\n                {{ row.end | date: 'shortTime' }}\n            </ng-template>\n            <ng-template #desk_template let-row=\"row\">\n                {{ row.asset_name || row.asset_id }}\n            </ng-template>\n            <ng-template #user_template let-row=\"row\">\n                <div class=\"flex flex-col justify-center\">\n                    <div class=\"select-all\">\n                        {{\n                            row.user_name ||\n                                row.user_email ||\n                                row.booked_by_name ||\n                                row.booked_by_email\n                        }}\n                    </div>\n                    <div\n                        *ngIf=\"row.user_name\"\n                        class=\"text-xs opacity-30 select-all\"\n                    >\n                        {{ row.user_email }}\n                    </div>\n                </div>\n            </ng-template>\n            <ng-template #status_template let-data=\"data\">\n                <span\n                    class=\"capitalize text-white px-2 py-1 rounded border border-gray-200\"\n                    [class.bg-success]=\"data === 'approved'\"\n                    [class.bg-pending]=\"data === 'tentative'\"\n                    [class.bg-error]=\"\n                        data === 'cancelled' ||\n                        data === 'declined' ||\n                        data === 'ended'\n                    \"\n                >\n                    {{ data }}\n                </span>\n            </ng-template>\n            <ng-template #bool_template let-data=\"data\">\n                <div\n                    [class.bg-red-500]=\"!data\"\n                    [class.bg-green-500]=\"data\"\n                    class=\"rounded h-8 w-8 flex items-center justify-center text-2xl text-white mx-auto\"\n                >\n                    <app-icon>{{ data ? 'done' : 'close' }}</app-icon>\n                </div>\n            </ng-template>\n            <ng-template #action_template let-row=\"row\">\n                <div class=\"flex items-center justify-end space-x-2 w-full\">\n                    <button\n                        icon\n                        matRipple\n                        [disabled]=\"!row.extension_data?.checkin_qr_code\"\n                        [matMenuTriggerFor]=\"menu\"\n                        matTooltip=\"View Desk QR code\"\n                        title=\"\"\n                    >\n                        <app-icon *ngIf=\"row.extension_data?.checkin_qr_code\">\n                            qr_code\n                        </app-icon>\n                    </button>\n                    <action-icon matTooltip=\"Check-in\" (click)=\"checkin(row)\">\n                        how_to_reg\n                    </action-icon>\n                    <button\n                        icon\n                        matRipple\n                        (click)=\"approve(row)\"\n                        matTooltip=\"Approve Desk\"\n                        title=\"\"\n                    >\n                        <app-icon>event_available</app-icon>\n                    </button>\n                    <button\n                        icon\n                        matRipple\n                        (click)=\"reject(row)\"\n                        matTooltip=\"Reject Desk\"\n                        title=\"\"\n                    >\n                        <app-icon>event_busy</app-icon>\n                    </button>\n                    <mat-menu #menu=\"matMenu\">\n                        <div\n                            class=\"p-2 mx-4 my-2 rounded-lg border border-black\"\n                        >\n                            <img\n                                class=\"w-48\"\n                                [src]=\"row.extension_data?.checkin_qr_code\"\n                            />\n                        </div>\n                        <div mat-menu-item class=\"underline\">\n                            <button btn matRipple class=\"w-full\">\n                                Print QR Code\n                            </button>\n                        </div>\n                    </mat-menu>\n                </div>\n            </ng-template>\n        </div>\n        <button\n            icon\n            matRipple\n            class=\"absolute bottom-2 right-2 bg-white shadow\"\n            [matMenuTriggerFor]=\"menu\"\n        >\n            <app-icon>more_vert</app-icon>\n        </button>\n        <mat-menu #menu=\"matMenu\">\n            <button mat-menu-item (click)=\"rejectAll()\">Reject All</button>\n        </mat-menu>\n    `,\n    styles: [\n        `\n            :host {\n                position: relative;\n                display: flex;\n                flex-direction: column;\n                height: 100%;\n                width: 100%;\n            }\n        `,\n    ],\n})\nexport class DeskBookingsComponent {\n    public loading: string;\n    public readonly filters = this._state.filters;\n    public readonly bookings = this._state.bookings.pipe(\n        map((i) =>\n            i.map((booking) => ({\n                ...booking,\n                end: booking.date + booking.duration * 60 * 1000,\n            }))\n        )\n    );\n\n    public readonly rejectAll = () => this._state.rejectAllDesks();\n\n    public readonly checkin = (d) =>\n        this.runMethod('checkin', async () => this._state.checkinDesk(d));\n    public readonly approve = (d) =>\n        this.runMethod('approve', async () => this._state.approveDesk(d));\n    public readonly reject = (d) =>\n        this.runMethod('reject', async () => this._state.rejectDesk(d));\n\n    constructor(private _state: DesksStateService) {}\n\n    private async runMethod(name: string, fn: () => Promise<any>) {\n        this.loading = name;\n        await fn().catch((i) => null);\n        this.loading = '';\n    }\n}\n","import { Component, OnInit } from '@angular/core';\nimport { ExploreDesksService, ExploreStateService } from '@placeos/explore';\n\nimport { DesksStateService } from './desks-state.service';\nimport { AsyncHandler } from '@placeos/common';\nimport { OrganisationService } from '@placeos/organisation';\n\n@Component({\n    selector: 'desk-map-view',\n    template: `\n        <div map class=\"h-full w-full relative\">\n            <i-map\n                [src]=\"url | async\"\n                [zoom]=\"(positions | async).zoom\"\n                [center]=\"(positions | async).center\"\n                [styles]=\"styles | async\"\n                [features]=\"features | async\"\n                [actions]=\"actions | async\"\n            ></i-map>\n            <explore-zoom-controls\n                class=\"absolute bottom-2 right-2\"\n            ></explore-zoom-controls>\n            <div class=\"absolute top-0 left-0 p-2 text-black\">\n                <a-user-search-field\n                    [ngModel]=\"null\"\n                    (ngModelChange)=\"setHost($event)\"\n                    class=\"white\"\n                    placeholder=\"User for bookings...\"\n                ></a-user-search-field>\n            </div>\n            <div\n                info\n                class=\"absolute bottom-0 rounded p-2 m-2 bg-white dark:bg-neutral-700 shadow text-center\"\n            >\n                Click/Tap an available desk to book it.\n            </div>\n        </div>\n    `,\n    styles: [\n        `\n            :host {\n                display: flex;\n                flex-direction: column;\n                position: relative;\n                height: 100%;\n                width: 100%;\n            }\n\n            [info] {\n                left: 50%;\n                transform: translateX(-50%);\n            }\n        `,\n    ],\n    providers: [ExploreDesksService],\n})\nexport class DeskMapViewComponent extends AsyncHandler implements OnInit {\n    /** Observable for the active map */\n    public readonly url = this._state.map_url;\n    /** Observable for the active map */\n    public readonly styles = this._state.map_styles;\n    /** Observable for the active map */\n    public readonly positions = this._state.map_positions;\n    /** Observable for the active map */\n    public readonly actions = this._state.map_actions;\n    /** Observable for the active map */\n    public readonly features = this._state.map_features;\n\n    public readonly setHost = (u) => this._desks_state.setOptions({ host: u });\n\n    constructor(\n        private _state: ExploreStateService,\n        private _desk: DesksStateService,\n        private _desks_state: ExploreDesksService,\n        private _org: OrganisationService\n    ) {\n        super();\n    }\n\n    public ngOnInit(): void {\n        this.subscription(\n            'date',\n            this._desk.filters.subscribe((opts) => {\n                const level = this._org.levelWithID(opts.zones);\n                if (level) this._state.setLevel(level.id);\n                this._desks_state.setOptions({\n                    date: opts.date || Date.now(),\n                    zones: opts.zones,\n                });\n            })\n        );\n    }\n}\n","import { Component } from '@angular/core';\nimport { MatDialog } from '@angular/material/dialog';\nimport {\n    AsyncHandler,\n    csvToJson,\n    loadTextFileFromInputEvent,\n    notifyError,\n    notifySuccess,\n    openConfirmModal,\n    randomInt,\n    unique,\n} from '@placeos/common';\nimport { Desk, OrganisationService } from '@placeos/organisation';\nimport { updateMetadata } from '@placeos/ts-client';\nimport { generateQRCode } from 'libs/common/src/lib/qr-code';\nimport { combineLatest } from 'rxjs';\nimport { map, take } from 'rxjs/operators';\nimport { DesksStateService } from './desks-state.service';\n\nconst QR_CODES = {};\n\n@Component({\n    selector: 'desks-manage',\n    template: `\n        <div\n            class=\"w-full h-full overflow-auto relative\"\n            (dragenter)=\"handleDrag('enter', $event)\"\n            (window:dragend)=\"handleDrag('end', $event)\"\n        >\n            <custom-table\n                class=\"min-w-[72rem] block\"\n                [dataSource]=\"desks\"\n                [filter]=\"(filters | async)?.search\"\n                [columns]=\"[\n                    'map_id',\n                    'bookable',\n                    'name',\n                    'groups',\n                    'features',\n                    'actions'\n                ]\"\n                [display_column]=\"[\n                    'ID',\n                    'Bookable',\n                    'Name',\n                    'Groups',\n                    'Features',\n                    ' '\n                ]\"\n                [column_size]=\"['8r', '6r', '12r', 'flex', '16r', '10r']\"\n                [template]=\"{\n                    map_id: text_edit_template,\n                    name: text_edit_template,\n                    bookable: bookable_edit_template,\n                    groups: list_edit_template,\n                    features: list_edit_template,\n                    actions: action_template\n                }\"\n                [empty]=\"\n                    (filters | async)?.search\n                        ? 'No matching desks'\n                        : 'No desks for selected level'\n                \"\n                [pagination]=\"true\"\n                [page_size]=\"20\"\n            ></custom-table>\n            <ng-template\n                #list_edit_template\n                let-data=\"data\"\n                let-row=\"row\"\n                let-key=\"key\"\n            >\n                <item-list-field\n                    class=\"w-full\"\n                    hide-outline\n                    [placeholder]=\"\n                        key === 'groups' ? 'User Groups' : 'Features'\n                    \"\n                    [name]=\"key\"\n                    [ngModel]=\"\n                        (changes[row.id] ? changes[row.id][key] : null) || data\n                    \"\n                    (ngModelChange)=\"setRowValue(row.id, key, $event)\"\n                >\n                </item-list-field>\n            </ng-template>\n            <ng-template\n                #text_edit_template\n                let-data=\"data\"\n                let-row=\"row\"\n                let-key=\"key\"\n            >\n                <div class=\"w-full h-12\" hide-outline>\n                    <mat-form-field class=\"h-12 w-full\" appearance=\"outline\">\n                        <input\n                            matInput\n                            [placeholder]=\"key\"\n                            [name]=\"key\"\n                            [ngModel]=\"\n                                (changes[row.id]\n                                    ? changes[row.id][key]\n                                    : null) || data\n                            \"\n                            (ngModelChange)=\"setRowValue(row.id, key, $event)\"\n                        />\n                    </mat-form-field>\n                </div>\n            </ng-template>\n            <ng-template #bookable_edit_template let-data=\"data\" let-row=\"row\">\n                <div class=\"flex items-center justify-center pl-4\">\n                    <mat-checkbox\n                        [ngModel]=\"changes[row.id]?.bookable ?? data\"\n                        (ngModelChange)=\"\n                            setRowValue(row.id, 'bookable', $event)\n                        \"\n                    ></mat-checkbox>\n                </div>\n            </ng-template>\n            <ng-template #action_template let-row=\"row\">\n                <div class=\"flex items-center justify-end space-x-2\">\n                    <div\n                        class=\"p-2 text-2xl text-pending\"\n                        [class.opacity-0]=\"!changes[row.id]\"\n                        matTooltip=\"Desk has unsaved changes\"\n                    >\n                        <app-icon>warning</app-icon>\n                    </div>\n                    <button icon (click)=\"removeDesk(row)\">\n                        <app-icon>delete</app-icon>\n                    </button>\n                    <button\n                        icon\n                        matRipple\n                        [matMenuTriggerFor]=\"menu\"\n                        (click)=\"loadQrCode(row)\"\n                    >\n                        <app-icon>qr_code</app-icon>\n                    </button>\n                    <mat-menu #menu=\"matMenu\">\n                        <div\n                            class=\"p-2 mx-4 my-2 rounded-lg border border-black\"\n                        >\n                            <img class=\"w-48\" [src]=\"row.qr_code\" />\n                        </div>\n                        <div mat-menu-item class=\"underline\">\n                            <button btn matRipple class=\"w-full\">\n                                Print QR Code\n                            </button>\n                        </div>\n                    </mat-menu>\n                </div>\n            </ng-template>\n            <div\n                class=\"fixed bottom-2 left-1/2 transform -translate-x-1/2 p-4 rounded bg-white shadow\"\n                *ngIf=\"changed > 0\"\n            >\n                <p class=\"mb-2 text-xl\">\n                    {{ changed }} Desk(s) with unsaved changes\n                </p>\n                <div class=\"flex items-center justify-center\">\n                    <button save btn matRipple (click)=\"save()\">\n                        Save Changes\n                    </button>\n                </div>\n            </div>\n            <div\n                class=\"absolute inset-0 flex flex-col items-center justify-center space-y-2 bg-white bg-opacity-60\"\n                *ngIf=\"loading\"\n            >\n                <mat-spinner diameter=\"32\"></mat-spinner>\n                <p>{{ loading }}</p>\n            </div>\n            <div\n                *ngIf=\"dragging\"\n                class=\"absolute inset-0 bg-black/60 flex items-center justify-center\"\n            >\n                <div class=\"bg-white p-4 rounded shadow\">\n                    <div\n                        class=\"border-4 border-gray-300 border-dashed rounded flex flex-col items-center justify-center w-64 h-64\"\n                    >\n                        Drop CSV file to add desks\n                    </div>\n                </div>\n                <input\n                    type=\"file\"\n                    class=\"absolute inset-0 opacity-0\"\n                    (change)=\"loadCSVData($event)\"\n                />\n            </div>\n        </div>\n    `,\n    styles: [``],\n})\nexport class DesksManageComponent extends AsyncHandler {\n    public changes = {};\n    public loading: string;\n    public dragging = false;\n    public readonly filters = this._state.filters;\n    public readonly desks = combineLatest([\n        this._state.desks,\n        this._state.new_desks,\n    ]).pipe(map(([d, n]) => d.concat(n)));\n\n    public get changed() {\n        return (\n            (Object.keys(this.changes).length || 0) +\n            (this._state.new_desk_count || 0)\n        );\n    }\n\n    public setRowValue(id: string, key: string, value: any) {\n        if (!this.changes[id]) this.changes[id] = {};\n        this.changes[id][key] = value;\n    }\n\n    public async removeDesk(desk: Desk) {\n        const resp = await openConfirmModal(\n            {\n                title: 'Remove desk',\n                content: `Remove desk ${desk.name}?`,\n                icon: { content: 'delete' },\n            },\n            this._dialog\n        );\n        if (resp.reason !== 'done') return;\n        resp.close();\n        const desks = await this.desks.pipe(take(1)).toPromise();\n        const updated_desks = desks.filter((_) => _.id !== desk.id);\n        const filters = await this.filters.pipe(take(1)).toPromise();\n        const level = this._org.levelWithID(filters.zones);\n        this.loading = 'Removing desk...';\n        await updateMetadata(level.id, {\n            name: 'desks',\n            description: 'desks',\n            details: updated_desks,\n        })\n            .toPromise()\n            .catch((e) => {\n                this.loading = '';\n                notifyError(`Error saving desk data. Error: ${e.message || e}`);\n                throw e;\n            });\n        notifySuccess('Successfully updated desks');\n        this._state.setFilters({});\n        this.loading = '';\n        this.changes = {};\n    }\n\n    public async save() {\n        this.loading = 'Saving changes to desks...';\n        const desks = await this.desks.pipe(take(1)).toPromise();\n        const updated_desks = unique(\n            desks.map((_) =>\n                new Desk({ ..._, ...(this.changes[_.id] || {}) }).toJSON()\n            ),\n            'id'\n        );\n        const filters = await this.filters.pipe(take(1)).toPromise();\n        const level = this._org.levelWithID(filters.zones);\n        await updateMetadata(level.id, {\n            name: 'desks',\n            description: 'desks',\n            details: updated_desks,\n        })\n            .toPromise()\n            .catch((e) => {\n                this.loading = '';\n                const msg =\n                    e?.status === 403\n                        ? 'You do not have the required permissions to save desk changes.'\n                        : e.message || e;\n                notifyError(`Error saving desk data. Error: ${msg}`);\n                throw e;\n            });\n        notifySuccess('Successfully updated desks');\n        this._state.clearNewDesks();\n        this.loading = '';\n        this.changes = {};\n    }\n\n    public loadQrCode(item: any) {\n        item.qr_code = generateQRCode(\n            `${\n                location.origin\n            }/workplace/#/book/code?asset_id=${encodeURIComponent(item.id)}`\n        );\n    }\n\n    constructor(\n        private _state: DesksStateService,\n        private _org: OrganisationService,\n        private _dialog: MatDialog\n    ) {\n        super();\n    }\n\n    public async loadCSVData(event: InputEvent) {\n        this.loading = 'Loading CSV file...';\n        this.dragging = false;\n        const data = await loadTextFileFromInputEvent(event).catch(([m, e]) => {\n            notifyError(m);\n            throw e;\n        });\n        try {\n            const list = csvToJson(data) || [];\n            this._state.addDesks(\n                list.map(\n                    (_) =>\n                        new Desk({\n                            ..._,\n                            id: _.id || `desk-${randomInt(999_999)}`,\n                        })\n                )\n            );\n        } catch (e) {\n            console.error(e);\n        }\n        this.loading = '';\n    }\n\n    public handleDrag(type: 'enter' | 'leave' | 'end', event: DragEvent) {\n        this.dragging = type === 'enter';\n    }\n}\n","import { Component, OnDestroy, OnInit } from '@angular/core';\nimport { NavigationEnd, Router } from '@angular/router';\nimport { AsyncHandler } from '@placeos/common';\nimport { DesksStateService } from './desks-state.service';\n\n@Component({\n    selector: '[app-new-desks]',\n    template: `\n        <app-topbar></app-topbar>\n        <div class=\"flex flex-1 h-px\">\n            <app-sidebar></app-sidebar>\n            <main class=\"flex flex-col flex-1 w-1/2 h-full\">\n                <desks-topbar class=\"w-full\"></desks-topbar>\n                <div class=\"flex-1 h-1/2 w-full relative overflow-auto\">\n                    <router-outlet></router-outlet>\n                </div>\n                <mat-progress-bar\n                    class=\"w-full\"\n                    *ngIf=\"loading | async\"\n                    mode=\"indeterminate\"\n                ></mat-progress-bar>\n            </main>\n        </div>\n    `,\n    styles: [\n        `\n            :host {\n                display: flex;\n                flex-direction: column;\n                height: 100%;\n                width: 100%;\n                background-color: #fff;\n            }\n        `,\n    ],\n})\nexport class NewDesksComponent\n    extends AsyncHandler\n    implements OnInit, OnDestroy\n{\n    public readonly loading = this._state.loading;\n    public path: string;\n\n    constructor(private _state: DesksStateService, private _router: Router) {\n        super();\n    }\n\n    public ngOnInit() {\n        this._state.startPolling();\n        this.subscription(\n            'router.events',\n            this._router.events.subscribe((e) => {\n                if (e instanceof NavigationEnd) {\n                    const url_parts = this._router.url?.split('/') || [''];\n                    this.path = url_parts[parts.length - 1].split('?')[0];\n                }\n            })\n        );\n        const parts = this._router.url?.split('/') || [''];\n        this.path = parts[parts.length - 1].split('?')[0];\n    }\n\n    public ngOnDestroy() {\n        super.ngOnDestroy();\n        this._state.stopPolling();\n    }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { RouterModule, Route } from '@angular/router';\n\nimport { MatRadioModule } from '@angular/material/radio';\nimport { MatTabsModule } from '@angular/material/tabs';\n\nimport { SharedExploreModule } from '@placeos/explore';\nimport { UIModule } from '../ui/ui.module';\n\nimport { DesksComponent } from './desks.component';\nimport { DeskBookingsComponent } from './desk-bookings.component';\nimport { DesksTopbarComponent } from './desks-topbar.component';\nimport { DeskMapViewComponent } from './desk-map-view.component';\nimport { DesksManageComponent } from './desks-manage.component';\nimport { MatFormFieldModule } from '@angular/material/form-field';\nimport { MatCheckboxModule } from '@angular/material/checkbox';\nimport { MatInputModule } from '@angular/material/input';\n\nimport { NewDeskFormDetailsComponent } from 'apps/workplace/src/app/book/new-desk-flow/new-desk-form-details.component';\nimport { DeskBookModalComponent } from './desk-book-modal.component';\nimport { SharedBookingsModule } from '@placeos/bookings';\nimport { DeskRestrictionModalComponent } from './desk-restriction-modal.component';\nimport { FormFieldsModule } from '@placeos/form-fields';\nimport { NewDesksComponent } from './new-desks.component';\n\nconst ROUTES: Route[] = [\n    {\n        path: 'new',\n        component: NewDesksComponent,\n        children: [\n            { path: 'events', component: DeskBookingsComponent },\n            { path: 'map', component: DeskMapViewComponent },\n            { path: 'manage', component: DesksManageComponent },\n            { path: '**', redirectTo: 'events' },\n        ],\n    },\n    {\n        path: '',\n        component: DesksComponent,\n        children: [\n            { path: 'events', component: DeskBookingsComponent },\n            { path: 'map', component: DeskMapViewComponent },\n            { path: 'manage', component: DesksManageComponent },\n            { path: '**', redirectTo: 'events' },\n        ],\n    },\n];\n\n@NgModule({\n    declarations: [\n        NewDesksComponent,\n        DesksComponent,\n        DeskBookingsComponent,\n        DesksTopbarComponent,\n        DeskMapViewComponent,\n        DesksManageComponent,\n        NewDeskFormDetailsComponent,\n        DeskBookModalComponent,\n        DeskRestrictionModalComponent,\n    ],\n    imports: [\n        CommonModule,\n        FormsModule,\n        MatTabsModule,\n        ReactiveFormsModule,\n        UIModule,\n        SharedExploreModule,\n        SharedBookingsModule,\n        FormFieldsModule,\n        MatRadioModule,\n        MatFormFieldModule,\n        MatCheckboxModule,\n        MatInputModule,\n        RouterModule.forChild(ROUTES),\n    ],\n})\nexport class DesksModule {}\n"],"x_google_ignoreList":[]}