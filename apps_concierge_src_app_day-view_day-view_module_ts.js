"use strict";(self.webpackChunkconcierge=self.webpackChunkconcierge||[]).push([["apps_concierge_src_app_day-view_day-view_module_ts"],{6916:(U,w,a)=>{a.r(w),a.d(w,{DayViewModule:()=>gt});var p=a(316),h=a(4456),v=a(6842),F=a(363),m=a(2333),e=a(8559),$=a(4605),u=a(9204),T=a(7871),y=a(2185),d=a(1972),G=a(4584),E=a(4950),I=a(5175),_=a(5060),D=a(8827),R=a(9434);const z=()=>({class:"material-icons",content:"add"});function S(n,l){if(1&n&&(e.j41(0,"mat-option",12),e.EFF(1),e.k0s()),2&n){const t=l.$implicit;e.Y8G("value",t.id),e.R7$(),e.SpI(" ",t.display_name||t.name," ")}}function A(n,l){if(1&n&&(e.j41(0,"mat-option",12),e.EFF(1),e.k0s()),2&n){const t=l.$implicit;e.Y8G("value",t.id),e.R7$(),e.SpI(" ",t.name," ")}}function P(n,l){if(1&n){const t=e.RV6();e.j41(0,"mat-slide-toggle",13),e.nI1(1,"async"),e.bIt("ngModelChange",function(i){e.eBV(t);const s=e.XpG();return e.Njj(s.updateUIOptions({show_overflow:i}))}),e.j41(2,"div",14),e.EFF(3,"Setup / Breakdown"),e.k0s()()}if(2&n){let t;const o=e.XpG();e.Y8G("ngModel",null==(t=e.bMT(1,1,o.ui_options))?null:t.show_overflow)}}let L=(()=>{class n extends m.Tv{updateUIOptions(t){this._state.setUIOptions(t)}get allow_setup_breakdown(){return this._settings.get("app.events.allow_setup_breakdown")}constructor(t,o,i,s,r){super(),this._state=t,this._org=o,this._route=i,this._router=s,this._settings=r,this.zones=[],this.types=[{id:"internal",name:"Internal"},{id:"external",name:"External"},{id:"cancelled",name:"Cancelled"}],this.type_list=this.types.map(c=>`${c.id}`),this.levels=this._org.active_levels,this.ui_options=this._state.options,this.setDate=c=>this._state.setDate(c),this.newBooking=c=>this._state.newBooking(c),this.updateZones=c=>{this._router.navigate([],{relativeTo:this._route,queryParams:{zone_ids:c.join(",")}}),this._state.setZones(c)},this.updateTypes=c=>this._state.setFilters({hide_type:this.types.reduce((f,g)=>(c.includes(g.id)||f.push(g),f),[])})}ngOnInit(){var t=this;return(0,u.A)(function*(){yield t._org.initialised.pipe((0,T.$)(o=>o)).toPromise(),t.subscription("route.query",t._route.queryParamMap.subscribe(o=>{if(o.has("zone_ids")){const i=o.get("zone_ids").split(",");if(i.length){t.zones=i;const s=t._org.levelWithID(i);if(!s)return;t._org.building=t._org.buildings.find(r=>r.id===s.parent_id)}}})),t.subscription("levels",t._org.active_levels.subscribe(o=>{t.zones=t.zones.filter(i=>o.find(s=>s.id===i)),!t.zones.length&&o.length&&t.zones.push(o[0].id),t.updateZones(t.zones)})),t.updateTypes(t.type_list)})()}static#e=this.\u0275fac=function(o){return new(o||n)(e.rXU(d.G),e.rXU(y.yb),e.rXU(v.nX),e.rXU(v.Ix),e.rXU(m.h$))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["dayview-topbar"]],features:[e.Vt3],decls:18,vars:9,consts:[[1,"flex","items-center","px-4","h-20","bg-base-100","border-b","border-base-200"],["btn","","matRipple","","new","",1,"w-12","xl:w-auto","overflow-hidden",3,"click"],[1,"flex","items-center"],[1,"mr-2",3,"icon"],[1,"hidden","xl:block"],["appearance","outline"],["multiple","","placeholder","All Levels",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["multiple","","placeholder","No Events",3,"ngModelChange","ngModel"],["class","m-2",3,"ngModel","ngModelChange",4,"ngIf"],[1,"flex-1","w-0"],[3,"dateChange"],[3,"value"],[1,"m-2",3,"ngModelChange","ngModel"],[1,"text-xs"]],template:function(o,i){1&o&&(e.j41(0,"div",0)(1,"button",1),e.bIt("click",function(){return i.newBooking()}),e.j41(2,"div",2),e.nrm(3,"app-icon",3),e.j41(4,"div",4),e.EFF(5,"New Booking"),e.k0s()()(),e.j41(6,"mat-form-field",5)(7,"mat-select",6),e.mxI("ngModelChange",function(r){return e.DH7(i.zones,r)||(i.zones=r),r}),e.bIt("ngModelChange",function(r){return i.updateZones(r)}),e.DNE(8,S,2,2,"mat-option",7),e.nI1(9,"async"),e.k0s()(),e.j41(10,"mat-form-field",5)(11,"mat-select",8),e.mxI("ngModelChange",function(r){return e.DH7(i.type_list,r)||(i.type_list=r),r}),e.bIt("ngModelChange",function(r){return i.updateTypes(r)}),e.j41(12,"mat-select-trigger"),e.EFF(13,"Legend"),e.k0s(),e.DNE(14,A,2,2,"mat-option",7),e.k0s()(),e.DNE(15,P,4,3,"mat-slide-toggle",9),e.nrm(16,"div",10),e.j41(17,"date-options",11),e.bIt("dateChange",function(r){return i.setDate(r)}),e.k0s()()),2&o&&(e.R7$(3),e.Y8G("icon",e.lJ4(8,z)),e.R7$(4),e.R50("ngModel",i.zones),e.R7$(),e.Y8G("ngForOf",e.bMT(9,6,i.levels)),e.R7$(3),e.R50("ngModel",i.type_list),e.R7$(3),e.Y8G("ngForOf",i.types),e.R7$(),e.Y8G("ngIf",i.allow_setup_breakdown))},dependencies:[p.Sq,p.bT,h.BC,h.vS,G.o,E.rl,I.VO,I.$2,_.wT,D.sG,_.r6,R.R,p.Jj],styles:["button[_ngcontent-%COMP%]{min-width:0;padding:0 .85rem}mat-form-field[_ngcontent-%COMP%]{height:3.25em;width:8em;margin-left:1em}mat-slide-toggle[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:5.5em;white-space:initial;line-height:1.2em}\n\n/*# sourceMappingURL=dayview-topbar.component.ts-angular-inline--63.css.map*/"]})}return n})();var j=a(3998),H=a(1536),C=a(2175),J=a(8627),Z=a(1963),W=a(9314),b=a(5443),B=a(7841),O=a(2168),Q=a(2232),K=a(6354),x=a(6671),q=a(9675),X=a(3240),N=a(1874),M=a(8113);function ee(n,l){if(1&n&&e.nrm(0,"div"),2&n){const t=e.XpG();e.HbH("overflow-block absolute rounded overflow-hidden w-full "+t.type),e.xc7("top",100*t.overflow_top+"%")("height",100*t.overflow_height+"%")}}function te(n,l){if(1&n&&(e.j41(0,"div",6)(1,"app-icon",7),e.EFF(2,"title"),e.k0s(),e.EFF(3),e.k0s()),2&n){const t=e.XpG(2);e.R7$(3),e.SpI(" ",t.event.title," ")}}function ne(n,l){if(1&n&&(e.j41(0,"div",6)(1,"app-icon",7),e.EFF(2,"schedule"),e.k0s(),e.EFF(3),e.k0s()),2&n){const t=e.XpG(2);e.R7$(3),e.SpI(" ",t.time," ")}}function oe(n,l){if(1&n&&(e.j41(0,"div",6)(1,"app-icon",7),e.EFF(2,"people"),e.k0s(),e.EFF(3),e.k0s()),2&n){const t=e.XpG(2);e.R7$(3),e.Lme(" ",t.event.attendees.length," Attendee",1===t.event.attendees.length?"":"s"," ")}}function ie(n,l){if(1&n){const t=e.RV6();e.j41(0,"div",3),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.view(i.event))}),e.j41(1,"div",4),e.EFF(2),e.k0s(),e.DNE(3,te,4,1,"div",5)(4,ne,4,1,"div",5)(5,oe,4,2,"div",5),e.k0s()}if(2&n){const t=e.XpG();e.HbH("absolute rounded overflow-hidden text-sm border border-base-200 shadow-sm z-10 hover:z-30 "+t.type),e.xc7("top",100*t.top+"%")("height",100*t.height+"%"),e.R7$(2),e.JRh(null==t.event.organiser?null:t.event.organiser.name),e.R7$(),e.Y8G("ngIf",t.event.duration>30),e.R7$(),e.Y8G("ngIf",t.event.duration>60),e.R7$(),e.Y8G("ngIf",t.event.duration>90)}}function se(n,l){if(1&n&&(e.j41(0,"div",8)(1,"div")(2,"app-icon"),e.EFF(3),e.k0s()(),e.j41(4,"div",9),e.EFF(5),e.nI1(6,"date"),e.k0s()()),2&n){const t=e.XpG();e.xc7("top",100*t.top+"%")("height",100*t.height+"%"),e.R7$(),e.HbH("icon flex items-center justify-center mr-2 text-3xl rounded h-12 w-12 text-pending "+t.event.ext("cleaning_status")),e.R7$(2),e.JRh("done"===t.event.ext("cleaning_status")?"done":"warning"),e.R7$(2),e.Lme(" ","done"===t.event.ext("cleaning_status")?"Finished":"Scheduled to"," clean at ",e.i5U(6,9,t.event.ext("cleaning_time")||1e3*t.event.event_end,t.time_format)," ")}}const k=1440;let le=(()=>{class n{get time(){const t=new Date(this.event.date);return(0,x.GP)(t,this.time_format)+" - "+(0,x.GP)((0,q.z)(t,this.event.duration),this.time_format)}get type(){return this.event.guests.length?"external":"declined"===this.event.status?"cancelled":"internal"}get time_format(){return this._settings.time_format}constructor(t,o){this._state=t,this._settings=o,this.top=-999,this.height=0,this.overflow_top=-999,this.overflow_height=0,this.ui_options=this._state.options,this.view=i=>this._state.setEvent(i)}ngOnChanges(t){if(t.event&&this.event){const o=(0,X.o)(new Date(this.event.date)),i=(0,N.o)(new Date(this.event.date),o);this.top=i/k,this.height=this.event.duration/k,this.overflow_top=(i-(this.event.setup_time||0))/k,this.overflow_height=(this.event.duration+(this.event.setup_time||0)+(this.event.breakdown_time||0))/k}}static#e=this.\u0275fac=function(o){return new(o||n)(e.rXU(d.G),e.rXU(m.h$))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["dayview-event"]],inputs:{event:"event"},features:[e.OA$],decls:5,vars:7,consts:[[3,"class","top","height",4,"ngIf"],["event","","matRipple","",3,"class","top","height","click",4,"ngIf"],["cleaning","","class","absolute rounded overflow-hidden flex w-full shadow p-2 bg-base-100 z-20 hover:!h-48",3,"top","height",4,"ngIf"],["event","","matRipple","",3,"click"],[1,"px-2","py-1","font-medium"],["class","py-1 flex items-center",4,"ngIf"],[1,"py-1","flex","items-center"],[1,"mx-2"],["cleaning","",1,"absolute","rounded","overflow-hidden","flex","w-full","shadow","p-2","bg-base-100","z-20","hover:!h-48"],[1,"flex-1","w-1/2"]],template:function(o,i){if(1&o&&(e.DNE(0,ee,1,6,"div",0),e.nI1(1,"async"),e.DNE(2,ie,6,10,"div",1)(3,se,7,12,"div",2),e.nI1(4,"async")),2&o){let s,r;e.Y8G("ngIf",null==(s=e.bMT(1,3,i.ui_options))?null:s.show_overflow),e.R7$(2),e.Y8G("ngIf",i.event),e.R7$(),e.Y8G("ngIf",i.event&&(null==(r=e.bMT(4,5,i.ui_options))?null:r.show_cleaning))}},dependencies:[p.bT,_.r6,R.R,p.Jj,p.vh],styles:["[event][_ngcontent-%COMP%]{background-color:#ccc;width:12rem;z-index:100;transition:box-shadow .2s}[event][_ngcontent-%COMP%]:hover{box-shadow:0 1px 3px 1px #0003,0 1px 1px #00000024,0 2px 1px -1px #0000001f!important;cursor:pointer}.overflow-block[_ngcontent-%COMP%]{opacity:.3;width:12rem}.internal[_ngcontent-%COMP%]{background-color:#1565c0;color:#fff}.icon[_ngcontent-%COMP%]{background-color:#f0f0f0}.icon.done[_ngcontent-%COMP%]{color:#21a453}.external[_ngcontent-%COMP%]{background-color:#ad1457;color:#fff}.cancelled[_ngcontent-%COMP%]{background-color:#ccc}\n\n/*# sourceMappingURL=dayview-event.component.ts-angular-inline--66.css.map*/"]})}return n})();function ae(n,l){1&n&&e.nrm(0,"dayview-event",2),2&n&&e.Y8G("event",l.$implicit)}function re(n,l){if(1&n&&(e.qex(0),e.DNE(1,ae,1,1,"dayview-event",1),e.nI1(2,"async"),e.bVm()),2&n){const t=e.XpG();e.R7$(),e.Y8G("ngForOf",e.bMT(2,1,t.events))}}let ce=(()=>{class n extends m.Tv{constructor(t){super(),this._state=t,this.events=this._state.filtered.pipe((0,b.T)(o=>o.filter(i=>i.resources.find(s=>this.space.email===s.email))))}ngOnInit(){this.subscription("events",this._state.filtered.subscribe())}static#e=this.\u0275fac=function(o){return new(o||n)(e.rXU(d.G))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["dayview-space"]],inputs:{space:"space"},features:[e.Vt3],decls:1,vars:1,consts:[[4,"ngIf"],[3,"event",4,"ngFor","ngForOf"],[3,"event"]],template:function(o,i){1&o&&e.DNE(0,re,3,3,"ng-container",0),2&o&&e.Y8G("ngIf",i.space)},dependencies:[p.Sq,p.bT,le,p.Jj],styles:["[_nghost-%COMP%]{position:relative}\n\n/*# sourceMappingURL=dayview-space.component.ts-angular-inline--65.css.map*/"]})}return n})();function pe(n,l){if(1&n&&(e.j41(0,"div",15)(1,"div",16),e.EFF(2),e.k0s(),e.nrm(3,"div",17),e.k0s()),2&n){const t=l.$implicit,o=e.XpG();e.xc7("transform","translateY(-"+o.scroll.y+"px)"),e.R7$(2),e.SpI(" ",t," ")}}function de(n,l){if(1&n&&(e.j41(0,"div",18),e.nrm(1,"div",19),e.j41(2,"div",20),e.EFF(3),e.k0s()()),2&n){const t=l.$implicit,o=e.XpG();e.xc7("transform","translateX(-"+o.scroll.x+"px)"),e.R7$(3),e.SpI(" ",t.display_name||t.name," ")}}function me(n,l){1&n&&e.nrm(0,"dayview-space",21),2&n&&e.Y8G("space",l.$implicit)}function fe(n,l){if(1&n&&(e.nrm(0,"div",22),e.nI1(1,"async")),2&n){let t;const o=l.index,i=e.XpG();e.xc7("width",12*(null==(t=e.bMT(1,4,i.space_list))?null:t.length)+"rem")("top",4*o+"rem")}}function ge(n,l){1&n&&e.nrm(0,"mat-progress-bar",23)}function ue(n,l){if(1&n&&(e.nrm(0,"view-event-details",24),e.nI1(1,"async")),2&n){const t=e.XpG();e.Y8G("event",e.bMT(1,1,t.event))}}const ve=new Array(24).fill(0).map((n,l)=>(l%12==0?12:l%12)+(l>=12?" PM":" AM"));let he=(()=>{class n extends m.Tv{constructor(t,o){super(),this._org=t,this._state=o,this.blocks=ve,this.scroll={x:0,y:0},this.loading=this._state.loading,this.event=this._state.event,this.spaces=this._org.active_building.pipe((0,J.p)(i=>!!i),(0,Z.n)(({id:i})=>(0,j.BbB)({zone_id:i,limit:1e3}).pipe((0,W.W)(()=>(0,H.of)({data:[]})))),(0,b.T)(({data:i})=>i.map(s=>new O.$x({...s,level:this._org.levelWithID(s.zones)}))),(0,B.t)(1)),this.space_list=(0,C.zV)([this.spaces,this._state.zones]).pipe((0,b.T)(([i,s])=>i.filter(r=>!s?.length||r.zones.find(c=>s.includes(c)))||[]))}ngOnInit(){this._state.startPolling()}ngOnDestroy(){this._state.stopPolling()}onScroll(t){requestAnimationFrame(()=>this.scroll={x:t.srcElement.scrollLeft,y:t.srcElement.scrollTop})}static#e=this.\u0275fac=function(o){return new(o||n)(e.rXU(y.yb),e.rXU(d.G))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["dayview-timeline"]],features:[e.Vt3],decls:19,vars:14,consts:[["scroll_el",""],[1,"absolute","inset-0","flex"],[1,"time","h-full","w-24","overflow-hidden","bg-base-100","relative"],["header","",1,"relative","h-16","z-50"],[1,"bg-base-100","absolute","top-0","left-0","right-0","bottom-8"],["change-transform","","class","relative h-16 border-r border-base-300 z-10",3,"transform",4,"ngFor","ngForOf"],[1,"absolute","h-8","w-px","top-8","right-0","bg-base-300"],[1,"h-full","flex-1","flex","flex-col","w-1/2"],["header","",1,"flex","relative","overflow-hidden","border-b","border-base-300","border-opacity-50","bg-base-100","h-16","w-full"],["change-transform","","class","relative h-16 w-48 min-w-[12rem]",3,"transform",4,"ngFor","ngForOf"],["content","",1,"relative","flex","flex-1","overflow-auto",3,"scroll"],["class","w-48 min-w-[12rem] h-[96rem] border-r border-base-300",3,"space",4,"ngFor","ngForOf"],["class","absolute bg-base-300 h-px min-w-full left-0",3,"width","top",4,"ngFor","ngForOf"],["mode","indeterminate","class","absolute bottom-0 left-0 right-0",4,"ngIf"],[3,"event",4,"ngIf"],["change-transform","",1,"relative","h-16","border-r","border-base-300","z-10"],[1,"absolute","text-center","w-full","text-xs","top-0","transform","-translate-y-1/2","opacity-40"],[1,"absolute","h-px","w-2","top-0","right-0","bg-base-300"],["change-transform","",1,"relative","h-16","w-48","min-w-[12rem]"],["bar","",1,"absolute","h-8","w-px","bottom-0","-left-px","bg-base-300"],[1,"name","m-2","text-center"],[1,"w-48","min-w-[12rem]","h-[96rem]","border-r","border-base-300",3,"space"],[1,"absolute","bg-base-300","h-px","min-w-full","left-0"],["mode","indeterminate",1,"absolute","bottom-0","left-0","right-0"],[3,"event"]],template:function(o,i){if(1&o){const s=e.RV6();e.j41(0,"div",1)(1,"div",2)(2,"div",3),e.nrm(3,"div",4),e.k0s(),e.DNE(4,pe,4,3,"div",5),e.nrm(5,"div",6),e.k0s(),e.j41(6,"div",7)(7,"div",8),e.DNE(8,de,4,3,"div",9),e.nI1(9,"async"),e.k0s(),e.j41(10,"div",10,0),e.bIt("scroll",function(c){return e.eBV(s),e.Njj(i.onScroll(c))}),e.DNE(12,me,1,1,"dayview-space",11),e.nI1(13,"async"),e.DNE(14,fe,2,6,"div",12),e.k0s()(),e.DNE(15,ge,1,0,"mat-progress-bar",13),e.nI1(16,"async"),e.DNE(17,ue,2,3,"view-event-details",14),e.nI1(18,"async"),e.k0s()}2&o&&(e.R7$(4),e.Y8G("ngForOf",i.blocks),e.R7$(4),e.Y8G("ngForOf",e.bMT(9,6,i.space_list)),e.R7$(4),e.Y8G("ngForOf",e.bMT(13,8,i.space_list)),e.R7$(2),e.Y8G("ngForOf",i.blocks),e.R7$(),e.Y8G("ngIf",e.bMT(16,10,i.loading)),e.R7$(2),e.Y8G("ngIf",e.bMT(18,12,i.event)))},dependencies:[p.Sq,p.bT,Q.x,K.HM,ce,p.Jj],styles:["[_nghost-%COMP%]{position:relative;height:100%;width:100%}[change-transform][_ngcontent-%COMP%]{will-change:transform}\n\n/*# sourceMappingURL=dayview-timeline.component.ts-angular-inline--64.css.map*/"]})}return n})();const _e=["app-dayview",""];let be=(()=>{class n{get links(){return this._settings.get("app.general.menu")||[]}constructor(t,o){this._settings=t,this._router=o}ngOnInit(){this.links.find(t=>t.route.includes("day-view"))||this._router.navigate([`/${this.links[0].route}`])}static#e=this.\u0275fac=function(o){return new(o||n)(e.rXU(m.h$),e.rXU(v.Ix))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["","app-dayview",""]],attrs:_e,decls:4,vars:0,consts:[[1,"h-full"],[1,"relative","overflow-hidden","flex","flex-col","flex-1","w-1/2","h-full","bg-base-200"]],template:function(o,i){1&o&&(e.nrm(0,"sidebar",0),e.j41(1,"main",1),e.nrm(2,"dayview-topbar")(3,"dayview-timeline"),e.k0s())},dependencies:[$.k,L,he],styles:["[_nghost-%COMP%]{display:flex;height:100%;width:100%}\n\n/*# sourceMappingURL=day-view.component.ts-angular-inline--62.css.map*/"]})}return n})();var ye=a(8390),xe=a(5566),we=a(5189),Te=a(6843),Re=a(3602),ke=a(7024),V=a(1034),Fe=a(3206),Ie=a(1257),je=a(3330),Ce=a(2587);const Me=["scroll_container"],$e=()=>[];function Ge(n,l){1&n&&(e.j41(0,"div",24),e.EFF(1," Today "),e.k0s())}function Ee(n,l){if(1&n&&(e.j41(0,"div",25),e.EFF(1),e.k0s()),2&n){const t=l.$implicit;e.R7$(),e.SpI(" ",t.display_name||t.name," ")}}function De(n,l){if(1&n&&(e.j41(0,"div",26),e.nrm(1,"div",27),e.j41(2,"div",28),e.EFF(3),e.k0s()()),2&n){const t=l.$implicit,o=e.XpG();e.R7$(3),e.SpI(" ",o.formatHour(t)," ")}}function Be(n,l){if(1&n&&e.nrm(0,"div",29),2&n){const t=e.XpG();e.xc7("top",t.timeToOffset(t.now)+"px")}}function Oe(n,l){1&n&&e.nrm(0,"div",30)}function Xe(n,l){1&n&&e.nrm(0,"div",31)}function Ne(n,l){if(1&n&&(e.j41(0,"div",32),e.nrm(1,"div",33),e.k0s()),2&n){const t=e.XpG();e.xc7("top",t.timeToOffset(t.now)-t.offset_y-(48-t.offset_y%48)+48+"px")}}function Ve(n,l){1&n&&(e.qex(0),e.nrm(1,"div",38),e.bVm())}function Ye(n,l){if(1&n&&(e.qex(0),e.nrm(1,"div",39),e.j41(2,"p",40),e.EFF(3),e.nI1(4,"date"),e.k0s(),e.j41(5,"p",40),e.EFF(6),e.k0s(),e.bVm()),2&n){const t=e.XpG(2).$implicit,o=e.XpG(2);e.R7$(),e.AVh("bg-secondary","cancelled"!==t.status)("bg-error","cancelled"===t.status),e.R7$(),e.AVh("opacity-60","cancelled"===t.status),e.R7$(),e.Lme(" ",t.all_day?"All Day":e.i5U(4,11,t.date,o.time_format)," \u2013 ",(null==t.organiser?null:t.organiser.name)||t.hjost," "),e.R7$(2),e.AVh("opacity-60","cancelled"===t.status),e.R7$(),e.SpI(" ",t.title," ")}}function Ue(n,l){if(1&n){const t=e.RV6();e.j41(0,"div",35),e.bIt("click",function(){e.eBV(t);const i=e.XpG().$implicit,s=e.XpG().$implicit,r=e.XpG();return e.Njj(r.viewEvent(i,s.id))}),e.j41(1,"div",36),e.DNE(2,Ve,2,0,"ng-container",37)(3,Ye,7,14,"ng-container",37),e.k0s()()}if(2&n){const t=e.XpG().$implicit,o=e.XpG().index,i=e.XpG();e.xc7("left",14*o+.125+"rem")("top",i.timeToOffset(t.date)+"px")("height",i.endToOffset(t.duration)+"px"),e.AVh("pointer-events-none",t.is_system_event),e.R7$(),e.AVh("opacity-60","done"===t.state)("!rounded-none",t.is_system_event)("!border-secondary",t.is_system_event),e.R7$(),e.Y8G("ngIf",t.is_system_event),e.R7$(),e.Y8G("ngIf",!t.is_system_event)}}function ze(n,l){if(1&n&&(e.qex(0),e.DNE(1,Ue,4,16,"div",34),e.nI1(2,"async"),e.bVm()),2&n){let t;const o=l.$implicit,i=e.XpG(2);e.R7$(),e.Y8G("ngIf",!o.is_system_event||(null==(t=e.bMT(2,1,i.ui_options))?null:t.show_overflow))}}function Se(n,l){if(1&n&&(e.qex(0),e.DNE(1,ze,3,3,"ng-container",23),e.nI1(2,"async"),e.bVm()),2&n){const t=l.$implicit,o=e.XpG();e.R7$(),e.Y8G("ngForOf",e.bMT(2,1,o.events)[t.id]||e.lJ4(3,$e))}}let Ae=(()=>{class n extends m.Tv{get now(){return(0,Fe.c)(Date.now()).valueOf()}get time_format(){return this._settings.time_format}constructor(t,o,i){super(),this._state=t,this._dialog=o,this._settings=i,this.offset_x=0,this.offset_y=0,this.w_slots=[],this.h_slots=[],this.hours=Array.from({length:24},(s,r)=>r),this.ui_options=this._state.options,this.spaces=this._state.spaces,this.date=this._state.date,this.is_today=this.date.pipe((0,b.T)(s=>(0,Ie.r)(s,Date.now()))),this.events=(0,C.zV)([this._state.spaces,this._state.filtered]).pipe((0,b.T)(([s,r])=>{const c={};for(const f of s)c[f.id]=r.filter(g=>g.resources.find(Y=>Y.id===f.id||Y.email===f.email)||g.system?.id===f.id||g.system?.email===f.email);return c}),(0,B.t)(1)),this.edit=s=>this._state.newBooking(s),this.setDate=s=>this._state.setDate(s)}formatHour(t){const o=(0,je.a)(Date.now(),t);return this._settings.get("app.use_24_hour_time")?(0,x.GP)(o,"HH:00"):(0,x.GP)(o,"h a")}ngOnInit(){this.subscription("poll",this._state.startPolling()),this.interval("scroll",()=>this.onScroll(),1e3),Date.now(),this.onResize()}timeToOffset(t){const o=(0,N.o)(t,(0,X.o)(t));return 48*Math.max(0,o/60)}endToOffset(t){return 48*Math.min(24,t/60)}onResize(){const t=Math.floor(window.innerWidth/224)+1,o=Math.floor(window.innerHeight/48);this.w_slots=Array.from({length:t},(i,s)=>s),this.h_slots=Array.from({length:o},(i,s)=>s)}onScroll(){this.offset_x=this._scroll_container.nativeElement.scrollLeft,this.offset_y=this._scroll_container.nativeElement.scrollTop}viewEvent(t,o){var i=this;if(t.is_system_event)return;const s=this._dialog.open(M.bQ,{data:t});s.componentInstance.hide_edit=!this._settings.get("app.events.allow_edit"),this.subscription("remove",s.componentInstance.remove.subscribe(()=>this.remove(t,o))),this.subscription("edit",s.componentInstance.edit.subscribe(()=>this.edit(t))),this.subscription("actions",s.componentInstance.action.subscribe(function(){var r=(0,u.A)(function*(c){if(!c.includes("breakdown"))return;const g=yield i._dialog.open(M.Nm,{data:t}).afterClosed().toPromise();g&&i._state.replace(g)});return function(c){return r.apply(this,arguments)}}()))}remove(t,o){var i=this;return(0,u.A)(function*(){const s=`${(0,x.GP)(t.date,"dd MMM yyyy "+i.time_format)}`,c=`Delete the booking for ${t.space?.display_name} at ${s}`,f=yield(0,m.GE)({title:"Delete booking",content:c,icon:{content:"delete"}},i._dialog);"done"===f.reason&&(f.loading("Requesting booking deletion..."),yield(0,M.Dk)(t.id,{calendar:t.calendar||t.mailbox||t.host,system_id:o}).toPromise().catch(g=>{throw(0,m.UG)(`Unable to delete booking. ${g}`),f.close(),g}),(0,m.VX)("Successfully deleted booking."),i._dialog.closeAll())})()}static#e=this.\u0275fac=function(o){return new(o||n)(e.rXU(d.G),e.rXU(Ce.bZ),e.rXU(m.h$))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["room-bookings-timeline"]],viewQuery:function(o,i){if(1&o&&e.GBs(Me,7),2&o){let s;e.mGM(s=e.lsd())&&(i._scroll_container=s.first)}},features:[e.Vt3],decls:34,vars:42,consts:[["scroll_container",""],[1,"relative","flex","items-center","justify-center","p-2","space-x-2","border-b","border-base-200"],[3,"dateChange","date","is_new"],["class","absolute top-1/2 -translate-y-1/2 left-4 text-info text-sm",4,"ngIf"],[1,"flex","flex-col","w-full","flex-1","overflow-hidden",3,"resize"],["header","",1,"flex","items-center","w-full","h-16"],["times","",1,"w-16","h-full","flex","flex-col","items-center","justify-end","text-xs","pb-2","opacity-60"],["spaces","",1,"relative","flex-1","h-full","overflow-hidden","border-r","border-base-200"],[1,"flex","absolute","inset-y-0"],["class","flex flex-col items-center justify-center h-full w-56",4,"ngFor","ngForOf"],["content","",1,"flex","w-full","flex-1","h-px"],["times","",1,"relative","w-16","h-full","overflow-y-hidden","overflow-x-visible","border-r","border-base-200"],[1,"absolute","inset-x-0"],["class","relative block h-12",4,"ngFor","ngForOf"],["class","absolute bg-secondary right-0 translate-x-1/2 -translate-y-1/2 h-2 w-2 rounded-full z-30",3,"top",4,"ngIf"],["spaces","",1,"relative","flex-1","h-full","overflow-hidden","w-px"],[1,"absolute","top-0","flex","h-full","pointer-events-none"],["class","w-56 h-full border-r border-base-200",4,"ngFor","ngForOf"],[1,"absolute","left-0","w-full","pointer-events-none"],["class","h-12 w-full border-t border-base-200",4,"ngFor","ngForOf"],["class","absolute inset-x-0 -translate-y-px h-0.5 bg-secondary z-30",3,"top",4,"ngIf"],[1,"relative","w-full","h-full","overflow-auto","z-10",3,"scroll"],[1,"overflow-hidden","relative"],[4,"ngFor","ngForOf"],[1,"absolute","top-1/2","-translate-y-1/2","left-4","text-info","text-sm"],[1,"flex","flex-col","items-center","justify-center","h-full","w-56"],[1,"relative","block","h-12"],[1,"absolute","top-0","right-0","w-2","h-px","bg-base-200"],[1,"absolute","top-0","right-3","-translate-y-1/2","text-xs","opacity-60"],[1,"absolute","bg-secondary","right-0","translate-x-1/2","-translate-y-1/2","h-2","w-2","rounded-full","z-30"],[1,"w-56","h-full","border-r","border-base-200"],[1,"h-12","w-full","border-t","border-base-200"],[1,"absolute","inset-x-0","-translate-y-px","h-0.5","bg-secondary","z-30"],[1,"absolute","bg-secondary","top-1/2","left-0","-translate-x-1/2","-translate-y-1/2","h-2","w-2","rounded-full"],["event","","class","absolute w-[13.625rem] hover:opacity-90",3,"left","top","height","pointer-events-none","click",4,"ngIf"],["event","",1,"absolute","w-[13.625rem]","hover:opacity-90",3,"click"],[1,"relative","w-full","h-full","shadow","bg-base-100","border","border-base-200","hover:bg-base-200","rounded-lg","overflow-hidden","px-3","py-1","text-xs"],[4,"ngIf"],[1,"absolute","inset-0","bg-secondary","opacity-50"],[1,"absolute","left-0","inset-y-0","w-1"],[1,"truncate"]],template:function(o,i){if(1&o){const s=e.RV6();e.j41(0,"div",1)(1,"date-options",2),e.nI1(2,"async"),e.bIt("dateChange",function(c){return e.eBV(s),e.Njj(i.setDate(c))}),e.k0s(),e.DNE(3,Ge,2,0,"div",3),e.nI1(4,"async"),e.k0s(),e.j41(5,"div",4),e.bIt("resize",function(){return e.eBV(s),e.Njj(i.onResize())},!1,e.tSv),e.j41(6,"div",5)(7,"div",6),e.EFF(8),e.nI1(9,"async"),e.nI1(10,"date"),e.k0s(),e.j41(11,"div",7)(12,"div",8),e.DNE(13,Ee,2,1,"div",9),e.nI1(14,"async"),e.k0s()()(),e.j41(15,"div",10)(16,"div",11)(17,"div",12),e.DNE(18,De,4,1,"div",13)(19,Be,1,2,"div",14),e.nI1(20,"async"),e.k0s()(),e.j41(21,"div",15)(22,"div",16),e.DNE(23,Oe,1,0,"div",17),e.k0s(),e.j41(24,"div",18),e.DNE(25,Xe,1,0,"div",19)(26,Ne,2,2,"div",20),e.nI1(27,"async"),e.k0s(),e.j41(28,"div",21,0),e.bIt("scroll",function(){return e.eBV(s),e.Njj(i.onScroll())}),e.j41(30,"div",22),e.nI1(31,"async"),e.DNE(32,Se,3,4,"ng-container",23),e.nI1(33,"async"),e.k0s()()()()()}if(2&o){let s;e.R7$(),e.Y8G("date",e.bMT(2,23,i.date))("is_new",!0),e.R7$(2),e.Y8G("ngIf",e.bMT(4,25,i.is_today)),e.R7$(5),e.SpI(" ",e.i5U(10,29,e.bMT(9,27,i.date),"z")," "),e.R7$(4),e.xc7("left",-i.offset_x+"px"),e.R7$(),e.Y8G("ngForOf",e.bMT(14,32,i.spaces)),e.R7$(4),e.xc7("top",-i.offset_y+"px"),e.R7$(),e.Y8G("ngForOf",i.hours),e.R7$(),e.Y8G("ngIf",e.bMT(20,34,i.is_today)),e.R7$(3),e.xc7("left",-i.offset_x%224+"px"),e.R7$(),e.Y8G("ngForOf",i.w_slots),e.R7$(),e.xc7("top",-i.offset_y%48+"px"),e.R7$(),e.Y8G("ngForOf",i.h_slots),e.R7$(),e.Y8G("ngIf",e.bMT(27,36,i.is_today)),e.R7$(4),e.xc7("height","72rem")("width",14*(null==(s=e.bMT(31,38,i.spaces))?null:s.length)+"rem"),e.R7$(2),e.Y8G("ngForOf",e.bMT(33,40,i.spaces))}},dependencies:[p.Sq,p.bT,G.o,p.Jj,p.vh],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column}\n\n/*# sourceMappingURL=room-timeline.component.ts-angular-inline--73.css.map*/"]})}return n})();var Pe=a(1134),Le=a(3208),He=a(2011);function Je(n,l){1&n&&(e.j41(0,"div",10),e.nrm(1,"img",11),e.j41(2,"p"),e.EFF(3,"No pending requests"),e.k0s()())}function Ze(n,l){if(1&n&&(e.nrm(0,"img",25),e.nI1(1,"space"),e.nI1(2,"async")),2&n){let t;const o=e.XpG().$implicit;e.Y8G("source",null==(t=e.bMT(2,3,e.bMT(1,1,null==o.resources[0]?null:o.resources[0].email)))?null:t.images[0])}}function We(n,l){if(1&n){const t=e.RV6();e.j41(0,"div",12)(1,"h3"),e.EFF(2),e.k0s(),e.j41(3,"p",13),e.EFF(4),e.nI1(5,"date"),e.k0s(),e.j41(6,"div",14),e.DNE(7,Ze,3,5,"img",15),e.k0s(),e.j41(8,"div",16)(9,"div",17)(10,"app-icon",18),e.EFF(11,"place"),e.k0s()(),e.j41(12,"div",19),e.EFF(13),e.nI1(14,"space"),e.nI1(15,"async"),e.nI1(16,"space"),e.nI1(17,"async"),e.k0s()(),e.j41(18,"div",16)(19,"div",17)(20,"app-icon",18),e.EFF(21,"person"),e.k0s()(),e.j41(22,"div",19),e.EFF(23),e.k0s()(),e.j41(24,"div",20)(25,"button",21),e.bIt("click",function(){const i=e.eBV(t).$implicit,s=e.XpG();return e.Njj(s.approve(i))}),e.j41(26,"div"),e.EFF(27),e.k0s(),e.j41(28,"app-icon",22),e.EFF(29,"done"),e.k0s()(),e.j41(30,"button",23),e.bIt("click",function(){const i=e.eBV(t).$implicit,s=e.XpG();return e.Njj(s.reject(i))}),e.j41(31,"div"),e.EFF(32),e.k0s(),e.j41(33,"app-icon",24),e.EFF(34,"close"),e.k0s()()()()}if(2&n){let t;const o=l.$implicit,i=e.XpG();e.R7$(2),e.JRh(o.title),e.R7$(2),e.SpI(" ",e.i5U(5,9,o.date,"medium")," "),e.R7$(3),e.Y8G("ngIf",o.resources.length),e.R7$(6),e.SpI(" ",(null==(t=o.resources.length&&e.bMT(15,14,e.bMT(14,12,null==o.resources[0]?null:o.resources[0].email)))?null:t.display_name)||(null==(t=e.bMT(17,18,e.bMT(16,16,null==o.resources[0]?null:o.resources[0].email)))?null:t.name)||"No Location"," "),e.R7$(10),e.SpI(" ",(null==o.organiser?null:o.organiser.name)||o.host," "),e.R7$(2),e.Y8G("disabled","accept"===i.status[o.id]),e.R7$(2),e.SpI(" ","accept"===i.status[o.id]?"Approved":"Approve"," "),e.R7$(3),e.Y8G("disabled","decline"===i.status[o.id]),e.R7$(2),e.SpI(" ","decline"===i.status[o.id]?"Declined":"Decline"," ")}}function Qe(n,l){1&n&&(e.j41(0,"div",26),e.nrm(1,"div",27)(2,"mat-spinner",28),e.j41(3,"p",29),e.EFF(4,"Processing..."),e.k0s()())}function Ke(n,l){if(1&n){const t=e.RV6();e.j41(0,"button",30),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.show=!i.show)}),e.j41(1,"app-icon"),e.EFF(2,"chevron_left"),e.k0s()()}}let qe=(()=>{class n{constructor(t,o){this._state=t,this._org=o,this.show=!0,this.loading=!1,this.status={},this.pending=this._state.pending}approve(t){var o=this;return(0,u.A)(function*(){const i=o._org.binding("approvals");if(!i)return;const s=(0,j.f_4)(i,"RoomBookingApproval",1);s&&(o.loading=!0,yield s.execute("accept_event",[t.mailbox,t.id]).catch(),o.loading=!1,o.status[t.id]="accept")})()}reject(t){var o=this;return(0,u.A)(function*(){const i=o._org.binding("approvals");if(!i)return;const s=(0,j.f_4)(i,"RoomBookingApproval",1);s&&(o.loading=!0,yield s.execute("decline_event",[t.mailbox,t.id]).catch(),o.loading=!1,o.status[t.id]="decline")})()}static#e=this.\u0275fac=function(o){return new(o||n)(e.rXU(d.G),e.rXU(y.yb))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["room-bookings-approvals"]],decls:18,vars:13,consts:[[1,"flex","flex-col","h-full","overflow-hidden","border-l","border-base-200"],[1,"flex","items-center","p-2","border-b","border-base-200","space-x-2"],["btn","","icon","","matRipple","",1,"bg-base-200",3,"click"],[1,"flex-1"],["btn","","icon","","matRipple",""],[1,"flex-1","overflow-auto","p-2","space-y-2"],["class","w-full h-full flex flex-col items-center justify-center space-y-2",4,"ngIf"],["class","relative border border-base-200 p-2 w-full rounded",4,"ngFor","ngForOf"],["class","absolute bottom-0 left-0 right-0 top-14 p-2 flex flex-col items-center justify-center space-y-2",4,"ngIf"],["btn","","icon","","matRipple","","class","bg-warning absolute top-2 -left-8 shadow text-warning-content",3,"click",4,"ngIf"],[1,"w-full","h-full","flex","flex-col","items-center","justify-center","space-y-2"],["src","assets/icons/no-pending.svg"],[1,"relative","border","border-base-200","p-2","w-full","rounded"],[1,"opacity-30","text-xs","mb-2"],[1,"w-64","h-32","overflow-hidden","mb-2","bg-base-200"],["auth","","class","object-cover min-w-full min-h-full",3,"source",4,"ngIf"],[1,"flex","items-center","space-x-2","mb-2"],[1,"h-8","w-8","bg-base-200","rounded-full","flex","items-center","justify-center"],[1,"text-xl"],[1,"flex-1","text-xs"],[1,"flex","items-center","space-x-2"],["btn","","matRipple","",1,"border-success","bg-success-light","text-black","flex","flex-1","items-center","space-x-2",3,"click","disabled"],[1,"text-success"],["btn","","matRipple","",1,"border-error","bg-error-light","text-black","flex","flex-1","items-center","space-x-2",3,"click","disabled"],[1,"text-error"],["auth","",1,"object-cover","min-w-full","min-h-full",3,"source"],[1,"absolute","bottom-0","left-0","right-0","top-14","p-2","flex","flex-col","items-center","justify-center","space-y-2"],[1,"absolute","inset-0","bg-base-100","opacity-80","z-0"],["diameter","32"],[1,"relative","z-10"],["btn","","icon","","matRipple","",1,"bg-warning","absolute","top-2","-left-8","shadow","text-warning-content",3,"click"]],template:function(o,i){if(1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"button",2),e.bIt("click",function(){return i.show=!i.show}),e.j41(3,"app-icon"),e.EFF(4,"chevron_right"),e.k0s()(),e.j41(5,"h3",3),e.EFF(6),e.nI1(7,"async"),e.k0s(),e.j41(8,"button",4)(9,"app-icon"),e.EFF(10,"search"),e.k0s()()(),e.j41(11,"div",5),e.DNE(12,Je,4,0,"div",6),e.nI1(13,"async"),e.DNE(14,We,35,20,"div",7),e.nI1(15,"async"),e.k0s(),e.DNE(16,Qe,5,0,"div",8),e.k0s(),e.DNE(17,Ke,3,0,"button",9)),2&o){let s,r;e.xc7("width",i.show?"":"0px"),e.R7$(6),e.SpI(" Pending Approval (",(null==(s=e.bMT(7,7,i.pending))?null:s.length)||"0",") "),e.R7$(6),e.Y8G("ngIf",!(null!=(r=e.bMT(13,9,i.pending))&&r.length)),e.R7$(2),e.Y8G("ngForOf",e.bMT(15,11,i.pending)),e.R7$(2),e.Y8G("ngIf",i.loading),e.R7$(),e.Y8G("ngIf",!i.show)}},dependencies:[p.Sq,p.bT,Pe.LG,_.r6,R.R,Le.U,p.Jj,p.vh,He.J],styles:["[_nghost-%COMP%]{display:block;position:relative;height:100%}\n\n/*# sourceMappingURL=room-approvals.component.ts-angular-inline--74.css.map*/"]})}return n})();var et=a(6062);const tt=(n,l)=>l.id;function nt(n,l){if(1&n&&(e.j41(0,"div",24),e.EFF(1),e.nI1(2,"building"),e.j41(3,"span",25),e.EFF(4," - "),e.k0s()()),2&n){let t;const o=e.XpG().$implicit;e.R7$(),e.SpI(" ",null==(t=e.bMT(2,1,o.parent_id))?null:t.display_name," ")}}function ot(n,l){if(1&n&&(e.j41(0,"mat-option",21)(1,"div",22),e.DNE(2,nt,5,3,"div",23),e.j41(3,"div"),e.EFF(4),e.k0s()()()),2&n){const t=l.$implicit,o=e.XpG();e.Y8G("value",t.id),e.R7$(2),e.Y8G("ngIf",o.use_region),e.R7$(2),e.SpI(" ",t.display_name||t.name," ")}}function it(n,l){1&n&&e.nrm(0,"div",10)}function st(n,l){if(1&n){const t=e.RV6();e.qex(0),e.DNE(1,it,1,0,"div",26),e.j41(2,"mat-slide-toggle",27),e.nI1(3,"async"),e.bIt("ngModelChange",function(i){e.eBV(t);const s=e.XpG();return e.Njj(s.updateUIOptions({show_overflow:i}))}),e.j41(4,"div",28),e.EFF(5,"Setup / Breakdown"),e.k0s()(),e.bVm()}if(2&n){let t;const o=e.XpG();e.R7$(),e.Y8G("ngIf",!o.use_region),e.R7$(),e.Y8G("ngModel",null==(t=e.bMT(3,2,o.ui_options))?null:t.show_overflow)}}function lt(n,l){if(1&n){const t=e.RV6();e.j41(0,"mat-checkbox",29),e.bIt("ngModelChange",function(i){const s=e.eBV(t).$implicit,r=e.XpG();return e.Njj(r.setFilter(s.id,!i))}),e.EFF(1),e.k0s()}if(2&n){const t=l.$implicit,o=e.XpG();e.Y8G("ngModel",!o.type_list.includes(t.id)),e.R7$(),e.SpI(" ",t.name," ")}}function at(n,l){if(1&n){const t=e.RV6();e.j41(0,"div",18),e.nrm(1,"div",31),e.j41(2,"div"),e.EFF(3),e.k0s(),e.j41(4,"button",32),e.bIt("click",function(){e.eBV(t);const i=e.XpG().$implicit,s=e.XpG();return e.Njj(s.setFilter(i.id,!0))}),e.j41(5,"app-icon"),e.EFF(6,"close"),e.k0s()()()}if(2&n){const t=e.XpG().$implicit;e.R7$(),e.xc7("background-color",t.color),e.R7$(2),e.JRh(t.name)}}function rt(n,l){if(1&n&&e.DNE(0,at,7,3,"div",30),2&n){const t=l.$implicit,o=e.XpG();e.Y8G("ngIf",!o.type_list.includes(t.id))}}function ct(n,l){1&n&&e.nrm(0,"room-bookings-approvals")}const pt=[];let dt=(()=>{class n extends m.Tv{get type_list(){return this._state.filters.hide_type||pt}get has_approvals(){return this._org.binding("approvals")}get allow_setup_breakdown(){return this._settings.get("app.events.allow_setup_breakdown")}get use_region(){return this._settings.get("app.use_region")}constructor(t,o,i,s,r){super(),this._org=t,this._state=o,this._router=i,this._route=s,this._settings=r,this.zones=this._state.zones,this.ui_options=this._state.options,this.levels=(0,C.zV)([this._org.active_building,this._org.active_region]).pipe((0,b.T)(([c,f])=>this.use_region?this._org.levelsForRegion(f):this._org.levelsForBuilding(c))),this.updateZones=c=>{this._router.navigate([],{relativeTo:this._route,queryParams:{zone_ids:c.join(",")}}),this._state.setZones(c)},this.updateUIOptions=c=>this._state.setUIOptions(c),this.newBooking=c=>this._state.newBooking(c),this.types=[{id:"internal",name:"Internal",color:"#D81B60"},{id:"external",name:"External",color:"#1E88E5"},{id:"cancelled",name:"Cancelled",color:"#eeeeee"}]}ngOnInit(){var t=this;this.subscription("route.query",this._route.queryParamMap.subscribe(o=>{if(!this.use_region&&o.has("zone_ids")){const i=o.get("zone_ids").split(",");if(i.length){const s=this._org.levelWithID(i);if(!s)return;this._org.building=this._org.buildings.find(r=>r.id===s.parent_id)}}})),this.subscription("levels",this._org.active_levels.subscribe(function(){var o=(0,u.A)(function*(i){if(t.use_region)return;const s=(yield t.zones.pipe((0,Re.s)(1)).toPromise()).filter(r=>i.find(c=>c.id===r));!s.length&&i.length&&s.push(i[0].id),t.updateZones(s)});return function(i){return o.apply(this,arguments)}}())),this.subscription("region",this._org.active_region.subscribe(o=>this.updateZones([o.id])))}setFilter(t,o){let s=this._state.filters.hide_type||[];s=s.filter(r=>r!==t),o&&s.push(t),this._state.setFilters({hide_type:s})}static#e=this.\u0275fac=function(o){return new(o||n)(e.rXU(y.yb),e.rXU(d.G),e.rXU(v.Ix),e.rXU(v.nX),e.rXU(m.h$))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["room-bookings"]],features:[e.Vt3],decls:33,vars:10,consts:[["menu","matMenu"],[1,"absolute","inset-0","flex","flex-col","overflow-hidden","pl-8"],[1,"flex","items-center","justify-between","w-full","py-4","pr-8"],[1,"text-2xl","font-medium"],["btn","","matRipple","",1,"space-x-2",3,"click"],[1,"w-full","flex","items-center"],["appearance","outline",1,"no-subscript","w-52"],["placeholder","All Levels","multiple","",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"border-l","h-full","ml-8","mr-4"],[1,"flex","items-center","space-x-2","max-w-[calc(100%-16rem)]","flex-1"],["btn","","matRipple","",1,"inverse",3,"matMenuTriggerFor"],[1,"mx-2"],[1,""],[1,"flex","flex-col","space-y-2","overflow-hidden","w-48"],[3,"ngModel","ngModelChange",4,"ngFor","ngForOf"],[1,"flex","items-center","overflow-x-auto","flex-1","w-px","space-x-2","px-2"],[1,"flex","items-center","border","border-base-200","rounded-3xl"],[1,"flex","w-full","flex-1","h-px","border-t","mt-4","border-base-200"],[1,"flex-1"],[3,"value"],[1,"flex","flex-col-reverse"],["class","text-xs opacity-30",4,"ngIf"],[1,"text-xs","opacity-30"],[1,"opacity-0"],["class","border-l h-full ml-8 mr-4",4,"ngIf"],[1,"m-2",3,"ngModelChange","ngModel"],[1,"text-xs"],[3,"ngModelChange","ngModel"],["class","flex items-center border border-base-200 rounded-3xl",4,"ngIf"],[1,"h-4","w-4","m-2","rounded-full"],["icon","","matRipple","",3,"click"]],template:function(o,i){if(1&o){const s=e.RV6();e.j41(0,"div",1)(1,"div",2)(2,"h2",3),e.EFF(3,"Room Bookings"),e.k0s(),e.j41(4,"button",4),e.bIt("click",function(){return e.eBV(s),e.Njj(i.newBooking())}),e.j41(5,"div"),e.EFF(6,"New Booking"),e.k0s(),e.j41(7,"app-icon"),e.EFF(8,"add"),e.k0s()()(),e.j41(9,"div",5)(10,"mat-form-field",6)(11,"mat-select",7),e.nI1(12,"async"),e.bIt("ngModelChange",function(c){return e.eBV(s),e.Njj(i.updateZones(c))}),e.DNE(13,ot,5,3,"mat-option",8),e.nI1(14,"async"),e.k0s()(),e.DNE(15,st,6,4,"ng-container",9),e.nrm(16,"div",10),e.j41(17,"div",11)(18,"button",12)(19,"app-icon"),e.EFF(20,"filter_list"),e.k0s(),e.j41(21,"div",13),e.EFF(22,"Filters"),e.k0s()(),e.j41(23,"mat-menu",14,0)(25,"div",15),e.DNE(26,lt,2,2,"mat-checkbox",16),e.k0s()(),e.j41(27,"div",17),e.Z7z(28,rt,1,1,"div",18,tt),e.k0s()()(),e.j41(30,"div",19),e.nrm(31,"room-bookings-timeline",20),e.DNE(32,ct,1,0,"room-bookings-approvals",9),e.k0s()()}if(2&o){const s=e.sdS(24);e.R7$(11),e.Y8G("ngModel",e.bMT(12,6,i.zones)),e.R7$(2),e.Y8G("ngForOf",e.bMT(14,8,i.levels)),e.R7$(2),e.Y8G("ngIf",i.allow_setup_breakdown),e.R7$(3),e.Y8G("matMenuTriggerFor",s),e.R7$(8),e.Y8G("ngForOf",i.types),e.R7$(2),e.Dyx(i.types),e.R7$(4),e.Y8G("ngIf",i.has_approvals)}},dependencies:[p.Sq,p.bT,h.BC,h.vS,E.rl,I.VO,_.wT,ke.So,D.sG,V.kk,V.Cp,_.r6,R.R,Ae,qe,p.Jj,et.b]})}return n})();const mt=["app-new-dayview",""],ft=[{path:"",component:be},{path:"new",component:(()=>{class n{static#e=this.\u0275fac=function(o){return new(o||n)};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["","app-new-dayview",""]],attrs:mt,decls:5,vars:0,consts:[[1,"flex","flex-1","h-px"],[1,"relative","flex","flex-col","flex-1","w-1/2","h-full"]],template:function(o,i){1&o&&(e.nrm(0,"app-topbar"),e.j41(1,"div",0),e.nrm(2,"app-sidebar"),e.j41(3,"main",1),e.nrm(4,"room-bookings"),e.k0s()())},dependencies:[we.S,Te.c,dt],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%;width:100%;background-color:var(--b1)}\n\n/*# sourceMappingURL=new-dayview.component.ts-angular-inline--75.css.map*/"]})}return n})()}];let gt=(()=>{class n{static#e=this.\u0275fac=function(o){return new(o||n)};static#t=this.\u0275mod=e.$C({type:n});static#n=this.\u0275inj=e.G2t({imports:[p.MD,h.YN,F.r,O.lx,ye.kR,xe.bR,v.iI.forChild(ft)]})}return n})()},8390:(U,w,a)=>{a.d(w,{g8:()=>m,kR:()=>p.k,Gp:()=>e.Gp,N8:()=>T.N8,SZ:()=>T.SZ,is:()=>u.is});var p=a(1081),F=(a(3924),a(4621),a(9908));class m{constructor(d={}){this.type=d.type||d.location||"other",this.position=d.position||d.map_id||d.asset_id||{x:d.x/d.map_width||0,y:d.y/d.map_height||0},this.variance=d.variance||0,this.last_seen=d.last_seen||(0,F._)(new Date),this.level=d.level,this.building=d.building,this.at_location=!!d.at_location,this.coordinates_from=d.coordinates_from||"top-left"}}var e=a(3693),u=(a(4129),a(6039)),T=a(2372)}}]);
//# sourceMappingURL=apps_concierge_src_app_day-view_day-view_module_ts.js.map