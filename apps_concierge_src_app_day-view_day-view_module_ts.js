"use strict";(self.webpackChunkconcierge=self.webpackChunkconcierge||[]).push([["apps_concierge_src_app_day-view_day-view_module_ts"],{9240:(se,h,s)=>{s.r(h),s.d(h,{DayViewModule:()=>ne});var p=s(6477),m=s(9542),d=s(6585),T=s(5454),g=s(1426),e=s(6839),b=s(6866),w=s(3320),A=s(1670),C=s(5912),v=s(3194),R=s(3910),U=s(8750),k=s(6508),f=s(7728),O=s(4291),u=s(5306),B=s(5845),_=s(312),x=s(8987),y=s(9377),F=s(7716),M=s(6942),D=s(9128),J=s(9830),N=s(7486);const Y=["scroll_container"];function z(n,l){1&n&&(e.TgZ(0,"div",24),e._uU(1," Today "),e.qZA())}function j(n,l){if(1&n&&(e.TgZ(0,"div",25),e._uU(1),e.qZA()),2&n){const o=l.$implicit;e.xp6(1),e.hij(" ",o.display_name||o.name," ")}}function L(n,l){if(1&n&&(e.TgZ(0,"div",26),e._UZ(1,"div",27),e.TgZ(2,"div",28),e._uU(3),e.qZA()()),2&n){const o=l.$implicit;e.xp6(3),e.AsE(" ",o%12?o%12:"12","",o>=12?"PM":"AM"," ")}}function Q(n,l){1&n&&e._UZ(0,"div",29)}function I(n,l){1&n&&e._UZ(0,"div",30)}function P(n,l){if(1&n){const o=e.EpF();e.TgZ(0,"div",32),e.NdJ("click",function(){const r=e.CHM(o).$implicit,a=e.oxw(2);return e.KtG(a.viewEvent(r))}),e._UZ(1,"div",33),e.TgZ(2,"p",34),e._uU(3),e.ALo(4,"date"),e.qZA(),e.TgZ(5,"p",34),e._uU(6),e.qZA()()}if(2&n){const o=l.$implicit,t=e.oxw().index,i=e.oxw();e.Udp("left",14*t+.125+"rem")("top",i.timeToOffset(o.date)+"px")("height",i.endToOffset(o.date,o.duration)+"px"),e.xp6(3),e.AsE(" ",e.xi3(4,9,o.date,"shortTime")," \u2013 ",(null==o.organiser?null:o.organiser.name)||o.hjost," "),e.xp6(3),e.Oqu(o.title)}}const E=function(){return[]};function G(n,l){if(1&n&&(e.ynx(0),e.YNc(1,P,7,12,"div",31),e.ALo(2,"async"),e.BQk()),2&n){const o=l.$implicit,t=e.oxw();e.xp6(1),e.Q6J("ngForOf",e.lcZ(2,1,t.events)[o.id]||e.DdM(3,E))}}let V=(()=>{class n extends g.cx{get is_today(){return(0,B.Z)(this.date,Date.now())}constructor(o,t){super(),this._state=o,this._dialog=t,this.date=Date.now(),this.offset_x=0,this.offset_y=0,this.w_slots=[],this.h_slots=[],this.hours=Array.from({length:24},(i,r)=>r),this.spaces=this._state.spaces,this.events=(0,F.aj)([this._state.spaces,this._state.filtered]).pipe((0,M.U)(([i,r])=>{const a={};for(const c of i)a[c.id]=r.filter(ie=>ie.resources.find(Z=>Z.id===c.id||Z.email===c.email));return a}),(0,D.d)(1)),this.resetDate=()=>{this.date=Date.now(),this._state.setDate(this.date)},this.previousDate=()=>{this.date=(0,_.Z)(this.date,-1).valueOf(),this._state.setDate(this.date)},this.nextDate=()=>{this.date=(0,_.Z)(this.date,1).valueOf(),this._state.setDate(this.date)}}ngOnInit(){this.subscription("poll",this._state.startPolling()),this.onResize()}timeToOffset(o){return(0,x.Z)(o,(0,y.Z)(o))/60*48}endToOffset(o,t){return 48*((0,x.Z)(o,(0,y.Z)(o))/60+t/60)}onResize(){const o=Math.floor(window.innerWidth/224)+1,t=Math.floor(window.innerHeight/48);this.w_slots=Array.from({length:o},(i,r)=>r),this.h_slots=Array.from({length:t},(i,r)=>r)}onScroll(){this.offset_x=this._scroll_container.nativeElement.scrollLeft,this.offset_y=this._scroll_container.nativeElement.scrollTop}viewEvent(o){this._dialog.open(J.$o,{data:o})}}return n.\u0275fac=function(o){return new(o||n)(e.Y36(v.Y),e.Y36(N.uw))},n.\u0275cmp=e.Xpm({type:n,selectors:[["room-bookings-timeline"]],viewQuery:function(o,t){if(1&o&&e.Gf(Y,7),2&o){let i;e.iGM(i=e.CRH())&&(t._scroll_container=i.first)}},features:[e.qOj],decls:37,vars:32,consts:[[1,"relative","flex","items-center","justify-center","p-2","space-x-2","border-b","border-gray-200"],[1,"text-2xl"],[3,"dblclick"],["btn","","icon","","matRipple","",3,"click"],["class","absolute top-1/2 -translate-y-1/2 left-4 text-blue-500 text-sm",4,"ngIf"],[1,"flex","flex-col","w-full","flex-1","overflow-hidden",3,"resize"],["header","",1,"flex","items-center","w-full","h-16"],["times","",1,"w-16","h-full","flex","flex-col","items-center","justify-end","text-xs","pb-2","opacity-60"],["spaces","",1,"relative","flex-1","h-full","overflow-hidden","border-r","border-gray-200"],[1,"flex","absolute","inset-y-0"],["class","flex flex-col items-center justify-center h-full w-56",4,"ngFor","ngForOf"],["content","",1,"flex","w-full","flex-1","h-px"],["times","",1,"relative","w-16","h-full","overflow-hidden","border-r","border-gray-200"],[1,"absolute","inset-x-0"],["class","relative block h-12",4,"ngFor","ngForOf"],["spaces","",1,"relative","flex-1","h-full","overflow-hidden","w-px"],[1,"absolute","top-0","flex","h-full","pointer-events-none"],["class","w-56 h-full border-r border-gray-200",4,"ngFor","ngForOf"],[1,"absolute","left-0","w-full","pointer-events-none"],["class","h-12 w-full border-t border-gray-200",4,"ngFor","ngForOf"],[1,"relative","w-full","h-full","overflow-auto",3,"scroll"],["scroll_container",""],[1,"overflow-hidden","relative"],[4,"ngFor","ngForOf"],[1,"absolute","top-1/2","-translate-y-1/2","left-4","text-blue-500","text-sm"],[1,"flex","flex-col","items-center","justify-center","h-full","w-56"],[1,"relative","block","h-12"],[1,"absolute","top-0","right-0","w-2","h-px","bg-gray-200"],[1,"absolute","top-0","right-3","-translate-y-1/2","text-xs","opacity-60"],[1,"w-56","h-full","border-r","border-gray-200"],[1,"h-12","w-full","border-t","border-gray-200"],["event","","class","absolute w-[13.625rem] bg-gray-100 shadow hover:border-gray-300 rounded-lg border border-gray-100 overflow-hidden px-3 py-2 text-xs",3,"left","top","height","click",4,"ngFor","ngForOf"],["event","",1,"absolute","w-[13.625rem]","bg-gray-100","shadow","hover:border-gray-300","rounded-lg","border","border-gray-100","overflow-hidden","px-3","py-2","text-xs",3,"click"],[1,"absolute","left-0","inset-y-0","w-1","bg-pink-600"],[1,"truncate"]],template:function(o,t){if(1&o&&(e.TgZ(0,"div",0)(1,"app-icon",1),e._uU(2,"event"),e.qZA(),e.TgZ(3,"h3",2),e.NdJ("dblclick",function(){return t.resetDate()}),e._uU(4),e.ALo(5,"date"),e.qZA(),e.TgZ(6,"button",3),e.NdJ("click",function(){return t.previousDate()}),e.TgZ(7,"app-icon"),e._uU(8,"chevron_left"),e.qZA()(),e.TgZ(9,"button",3),e.NdJ("click",function(){return t.nextDate()}),e.TgZ(10,"app-icon"),e._uU(11,"chevron_right"),e.qZA()(),e.YNc(12,z,2,0,"div",4),e.qZA(),e.TgZ(13,"div",5),e.NdJ("resize",function(){return t.onResize()},!1,e.Jf7),e.TgZ(14,"div",6)(15,"div",7),e._uU(16),e.ALo(17,"date"),e.qZA(),e.TgZ(18,"div",8)(19,"div",9),e.YNc(20,j,2,1,"div",10),e.ALo(21,"async"),e.qZA()()(),e.TgZ(22,"div",11)(23,"div",12)(24,"div",13),e.YNc(25,L,4,2,"div",14),e.qZA()(),e.TgZ(26,"div",15)(27,"div",16),e.YNc(28,Q,1,0,"div",17),e.qZA(),e.TgZ(29,"div",18),e.YNc(30,I,1,0,"div",19),e.qZA(),e.TgZ(31,"div",20,21),e.NdJ("scroll",function(){return t.onScroll()}),e.TgZ(33,"div",22),e.ALo(34,"async"),e.YNc(35,G,3,4,"ng-container",23),e.ALo(36,"async"),e.qZA()()()()()),2&o){let i;e.xp6(4),e.hij(" ",e.xi3(5,20,t.date,"mediumDate")," "),e.xp6(8),e.Q6J("ngIf",t.is_today),e.xp6(4),e.hij(" ",e.xi3(17,23,t.date,"z")," "),e.xp6(3),e.Udp("left",-t.offset_x+"px"),e.xp6(1),e.Q6J("ngForOf",e.lcZ(21,26,t.spaces)),e.xp6(4),e.Udp("top",-t.offset_y+"px"),e.xp6(1),e.Q6J("ngForOf",t.hours),e.xp6(2),e.Udp("left",-t.offset_x%224+"px"),e.xp6(1),e.Q6J("ngForOf",t.w_slots),e.xp6(1),e.Udp("top",-t.offset_y%48+"px"),e.xp6(1),e.Q6J("ngForOf",t.h_slots),e.xp6(3),e.Udp("height","72rem")("width",14*(null==(i=e.lcZ(34,28,t.spaces))?null:i.length)+"rem"),e.xp6(2),e.Q6J("ngForOf",e.lcZ(36,30,t.spaces))}},dependencies:[p.sg,p.O5,f.wG,u.o,p.Ov,p.uU],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column}\n/*# sourceMappingURL=room-timeline.component.ts-angular-inline--69.css.map*/"]}),n})();function $(n,l){if(1&n){const o=e.EpF();e.TgZ(0,"button",7),e.NdJ("click",function(){e.CHM(o);const i=e.oxw();return e.KtG(i.show=!i.show)}),e.TgZ(1,"app-icon"),e._uU(2,"chevron_left"),e.qZA()()}}let q=(()=>{class n{constructor(){this.show=!0,this.approvals=[]}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["room-bookings-approvals"]],decls:12,vars:4,consts:[[1,"flex","flex-col","h-full","overflow-hidden","border-l","border-gray-200"],[1,"flex","items-center","p-2","border-b","border-gray-200","space-x-2"],["btn","","icon","","matRipple","",1,"bg-gray-200",3,"click"],[1,"flex-1"],["btn","","icon","","matRipple",""],[1,"flex-1","overflow-auto"],["btn","","icon","","matRipple","","class","bg-pending absolute top-2 -left-8 shadow text-white",3,"click",4,"ngIf"],["btn","","icon","","matRipple","",1,"bg-pending","absolute","top-2","-left-8","shadow","text-white",3,"click"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"button",2),e.NdJ("click",function(){return t.show=!t.show}),e.TgZ(3,"app-icon"),e._uU(4,"chevron_right"),e.qZA()(),e.TgZ(5,"h3",3),e._uU(6),e.qZA(),e.TgZ(7,"button",4)(8,"app-icon"),e._uU(9,"search"),e.qZA()()(),e._UZ(10,"div",5),e.qZA(),e.YNc(11,$,3,0,"button",6)),2&o&&(e.Udp("width",t.show?"":"0px"),e.xp6(6),e.hij(" Pending Approval (",t.approvals.length||"0",") "),e.xp6(5),e.Q6J("ngIf",!t.show))},dependencies:[p.O5,f.wG,u.o],styles:["[_nghost-%COMP%]{display:block;position:relative;height:100%}\n/*# sourceMappingURL=room-approvals.component.ts-angular-inline--70.css.map*/"]}),n})();function S(n,l){if(1&n&&(e.TgZ(0,"mat-option",13),e._uU(1),e.qZA()),2&n){const o=l.$implicit;e.Q6J("value",o.id),e.xp6(1),e.hij(" ",o.display_name||o.name," ")}}let H=(()=>{class n extends g.cx{constructor(o,t,i,r){super(),this._org=o,this._state=t,this._router=i,this._route=r,this.zones=this._state.zones,this.ui_options=this._state.options,this.levels=this._org.active_levels,this.updateZones=a=>{this._router.navigate([],{relativeTo:this._route,queryParams:{zone_ids:a.join(",")}}),this._state.setZones(a)},this.updateUIOptions=a=>this._state.setUIOptions(a)}ngOnInit(){var o=this;this.subscription("route.query",this._route.queryParamMap.subscribe(t=>{if(t.has("zone_ids")){const i=t.get("zone_ids").split(",");if(i.length){const r=this._org.levelWithID(i);if(!r)return;this._org.building=this._org.buildings.find(a=>a.id===r.parent_id)}}})),this.subscription("levels",this._org.active_levels.subscribe(function(){var t=(0,A.Z)(function*(i){const r=(yield o.zones.pipe((0,R.q)(1)).toPromise()).filter(a=>i.find(c=>c.id===a));!r.length&&i.length&&r.push(i[0].id),o.updateZones(r)});return function(i){return t.apply(this,arguments)}}()))}}return n.\u0275fac=function(o){return new(o||n)(e.Y36(C.w7),e.Y36(v.Y),e.Y36(d.F0),e.Y36(d.gz))},n.\u0275cmp=e.Xpm({type:n,selectors:[["room-bookings"]],features:[e.qOj],decls:23,vars:9,consts:[[1,"absolute","inset-0","flex","flex-col","overflow-hidden","pl-8"],[1,"flex","items-center","justify-between","w-full","py-4","pr-8"],[1,"text-2xl","font-medium"],["btn","","matRipple","",1,"space-x-2"],[1,"w-full","flex","items-center"],["appearance","outline",1,"h-[3.5rem]"],["multiple","","placeholder","All Levels",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"border-l","h-full","ml-8","mr-4"],[1,"m-2",3,"ngModel","ngModelChange"],[1,"text-xs"],[1,"flex","w-full","flex-1","h-px","border-t","mt-4","border-gray-200"],[1,"flex-1"],[3,"value"]],template:function(o,t){if(1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h2",2),e._uU(3,"Room Bookings"),e.qZA(),e.TgZ(4,"button",3)(5,"div"),e._uU(6,"New Booking"),e.qZA(),e.TgZ(7,"app-icon"),e._uU(8,"add"),e.qZA()()(),e.TgZ(9,"div",4)(10,"mat-form-field",5)(11,"mat-select",6),e.NdJ("ngModelChange",function(r){return t.updateZones(r)}),e.ALo(12,"async"),e.YNc(13,S,2,2,"mat-option",7),e.ALo(14,"async"),e.qZA()(),e._UZ(15,"div",8),e.TgZ(16,"mat-slide-toggle",9),e.NdJ("ngModelChange",function(r){return t.updateUIOptions({show_overflow:r})}),e.ALo(17,"async"),e.TgZ(18,"div",10),e._uU(19,"Setup / Breakdown"),e.qZA()()(),e.TgZ(20,"div",11),e._UZ(21,"room-bookings-timeline",12)(22,"room-bookings-approvals"),e.qZA()()),2&o){let i;e.xp6(11),e.Q6J("ngModel",e.lcZ(12,3,t.zones)),e.xp6(2),e.Q6J("ngForOf",e.lcZ(14,5,t.levels)),e.xp6(3),e.Q6J("ngModel",null==(i=e.lcZ(17,7,t.ui_options))?null:i.show_overflow)}},dependencies:[p.sg,m.JJ,m.On,U.KE,k.gD,f.ey,O.Rr,f.wG,u.o,V,q,p.Ov]}),n})();const X=["app-dayview",""];let K=(()=>{class n{get links(){return this._settings.get("app.general.menu")||[]}constructor(o,t){this._settings=o,this._router=t}ngOnInit(){this.links.find(o=>o.route.includes("day-view"))||this._router.navigate([`/${this.links[0].route}`])}}return n.\u0275fac=function(o){return new(o||n)(e.Y36(g.gb),e.Y36(d.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["","app-dayview",""]],attrs:X,decls:5,vars:0,consts:[[1,"flex","flex-1","h-px"],[1,"relative","flex","flex-col","flex-1","w-1/2","h-full"]],template:function(o,t){1&o&&(e._UZ(0,"app-topbar"),e.TgZ(1,"div",0),e._UZ(2,"app-sidebar"),e.TgZ(3,"main",1),e._UZ(4,"room-bookings"),e.qZA()())},dependencies:[b.O,w.u,H],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%;width:100%;background-color:#fff}\n/*# sourceMappingURL=day-view.component.ts-angular-inline--52.css.map*/"]}),n})();var W=s(2886),ee=s(5533),oe=s(1950);const te=[{path:"",component:K}];let ne=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[p.ez,m.u5,T.v,W.YR,ee.PP,oe.uy,d.Bz.forChild(te)]}),n})()}}]);
//# sourceMappingURL=apps_concierge_src_app_day-view_day-view_module_ts.js.map