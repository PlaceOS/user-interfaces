{"version":3,"file":"apps_concierge_src_app_catering_catering_module_ts.js","mappings":"yaA2BoBA,wBAIIA,SACJA,kCAHIA,oBAEAA,wFAIZA,oBAMIA,yDAASA,kBAAS,GAElBA,sBACJA,iDACAA,oBAIIA,yDAASA,qBAAY,GAErBA,yBACJA,iDACAA,oBAIIA,yDAASA,qBAAY,GAErBA,yBACJA,iDACAA,oBAIIA,yDAASA,8BAAqB,GAE9BA,+BACJA,iDACAA,oBAIIA,yDAASA,yBAAgB,GAEzBA,0BACJA,SAeN,MAAOC,UAAgCC,KA4BzCC,YACYC,EACAC,EACAC,EACAC,EACAC,EACAC,GAERC,QAPQC,eACAA,iBACAA,YACAA,cACAA,eACAA,eAhCLA,WAAkB,GAQTA,YAASA,KAAKL,KAAKM,cAEnBD,aAAWE,GACtBF,KAAKP,QAAQU,QAAU,IAAKH,KAAKP,QAAQU,QAASD,QAEvCF,iBAAeI,IAC3BJ,KAAKH,QAAQQ,SAAS,GAAI,CACtBC,WAAYN,KAAKJ,OACjBW,YAAa,CAAEC,SAAUJ,EAAEK,KAAK,QAEpCT,KAAKP,QAAQU,QAAU,IAAKH,KAAKP,QAAQU,QAASO,MAAO,CAACN,IAC1DJ,KAAKN,UAAUiB,KAAOP,EAAE,IAAMJ,KAAKN,UAAUiB,MAGjCX,aAAU,IAAMA,KAAKN,UAAUkB,UAC/BZ,gBAAa,IAAMA,KAAKN,UAAUmB,aAClCb,gBAAa,IAAMA,KAAKN,UAAUoB,YAWlD,CA/BWC,eACP,OAAOf,KAAKL,KAAKoB,QACrB,CA+BaC,WAAQ,2CACXC,EAAKtB,KAAKuB,YAAYC,QAAKC,KAAOC,GAAMA,IAAIC,YAClDL,EAAKvB,UAAUiB,MACVM,EAAKxB,QAAQU,SAASO,OAAS,IAAI,IAAMO,EAAKtB,KAAKoB,UAAUQ,GAClEN,EAAKO,aACD,cACAP,EAAKrB,OAAO6B,cAAcC,UAAWC,IACjC,GAAIA,EAAOC,IAAI,YAAa,CACxB,MAAMlB,EAAQiB,EAAOE,IAAI,YAAYC,MAAM,KAC3C,IAAKpB,EAAMqB,OAAQ,OACnB,MAAMC,EAAQf,EAAKtB,KAAKsC,YAAYvB,GAEpC,GADAO,EAAKP,MAAQA,GACRsB,EAAO,OACZf,EAAKtB,KAAKoB,SAAWE,EAAKtB,KAAKuC,UAAUC,KACpCC,GAAQA,EAAIb,KAAOS,EAAMK,eAK1CpB,EAAKO,aACD,eACAP,EAAKrB,OAAO0C,SAASZ,UAChBC,GACIV,EAAKsB,KAAOZ,EAAOC,IAAI,QAAUD,EAAOE,IAAI,QAAU,KAGnEZ,EAAKO,aACD,SACAP,EAAKtB,KAAKM,cAAcyB,UAAWc,IAC/BvB,EAAKP,MAAQO,EAAKP,MAAM+B,OAAQ9B,GAC5B6B,EAAOL,KAAMO,GAAQA,EAAInB,KAAOZ,KAE/BM,EAAKP,MAAMqB,QAAUS,EAAOT,QAC7Bd,EAAKP,MAAMiC,KAAKH,EAAO,GAAGjB,IAE9BN,EAAK2B,YAAY3B,EAAKP,MAAK,GAEjC,EArCe,EAsCrB,CAEOmC,sBACH7C,KAAKF,QAAQgD,KAAKC,IACtB,CAEOC,iBACHhD,KAAKF,QAAQgD,KAAKG,KACtB,wBCpKQ5D,iBAIIA,oEACJA,8BAGQA,sDAIAA,2BDmEPC,EAAwB,oCAAxBA,GAAuB4D,0EAAvB5D,EAAwB,sBAAxBA,EAAuB6D,ueA1E5B9D,iBAEC,qBAFDA,CAEC,kBAGWA,iDAAmB,GAAC+D,GAApB/D,CAAsB,mCACLgE,kBAAqB,GAGtChE,wBAAoCA,wBAAWA,QAC/CA,+CAMJA,UAEJA,0BAUAA,0BAQAA,0BAQAA,2BAQAA,2BAQAA,kBAEAA,2BAAcA,sCAAcgE,YAAe,GAAEhE,iBAzDrCA,qCAIYA,4DAEUA,8CAQzBA,0GAUAA,uCAQAA,uCAQAA,uCAQAA,kXC1CGA,iBAGC,SAHDA,CAGC,YAaWA,kBAGAA,mBAAmBA,6BAAiBA,UAExCA,kBAGIA,6CACJA,UAEJA,gBAIC,YAQOA,mBAGAA,oBAAmBA,2BAAcA,UAErCA,mBAGIA,mEAEJA,mBA1CAA,wCAKIA,2DAkBJA,wCAKIA,6DA+C1B,MAAOiE,UAA0B/D,KAInCC,YAAoBI,GAChBG,QADgBC,aAEpB,CAEOgB,WACHhB,KAAKwB,aACD,eACAxB,KAAKJ,OAAO0C,SAASZ,UAChBC,GACI3B,KAAKuC,KAAOZ,EAAOC,IAAI,QAAUD,EAAOE,IAAI,QAAU,IAGvE,EAhBSyB,EAAkB,oCAAlBA,GAAiBJ,cAAjBI,EAAkB,sBAAlBA,EAAiBH,klCAvGtB9D,mBACAA,kBAGIA,6BACAA,uBAMAA,iBACIA,WACIA,uCAIAA,iCAIAA,wBAoDJA,QACJA,iBAnEKA,uCAKaA,kCAELA,wCAIAA,+aCXzB,MAAMkE,EAAkB,CACpB,CAAEC,KAAM,GAAIC,UAAWH,GACvB,CAAEE,KAAM,QAASC,UAAWH,IAe1B,MAAOI,KAAc,oCAAdA,EAAc,EAAdA,EAAc,sBAAdA,MAAc,0BATnBC,KACAC,KACAC,IACAC,KACAC,KACAC,KACAC,cAAsBV,KAAO","names":["i0","CateringTopbarComponent","BaseClass","constructor","_orders","_catering","_org","_route","_router","_dialog","super","this","active_levels","date","filters","z","navigate","relativeTo","queryParams","zone_ids","join","zones","zone","addItem","editConfig","importMenu","building","ngOnInit","_this","initialised","pipe","first","_","toPromise","id","subscription","queryParamMap","subscribe","params","has","get","split","length","level","levelWithID","buildings","find","bld","parent_id","paramMap","page","levels","filter","lvl","push","updateZones","setRoomAvailability","open","CateringRoomsStateModalComponent","setChargeCodes","ChargeCodeListModalComponent","core","selectors","$event","ctx","CateringComponent","ROUTES","path","component","CateringModule","CommonModule","FormsModule","UIModule","MatTabsModule","MatChipsModule","SharedCateringModule","RouterModule"],"sourceRoot":"webpack:///","sources":["./apps/concierge/src/app/catering/catering-topbar.component.ts","./apps/concierge/src/app/catering/catering.component.ts","./apps/concierge/src/app/catering/catering.module.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { first } from 'rxjs/operators';\n\nimport { BaseClass } from '@placeos/common';\nimport { OrganisationService } from '@placeos/organisation';\nimport {\n    CateringOrdersService,\n    CateringStateService,\n    ChargeCodeListModalComponent,\n} from '@placeos/catering';\nimport { CateringRoomsStateModalComponent } from 'libs/catering/src/lib/catering-rooms-state-modal.component';\nimport { MatDialog } from '@angular/material/dialog';\n\n@Component({\n    selector: 'catering-topbar',\n    template: `\n        <div\n            class=\"flex items-center bg-white dark:bg-neutral-700 h-20 px-4 border-b border-gray-300 dark:border-neutral-500 space-x-2\"\n        >\n            <mat-form-field appearance=\"outline\">\n                <mat-select\n                    [(ngModel)]=\"zones[0]\"\n                    (ngModelChange)=\"updateZones([$event])\"\n                    placeholder=\"All Levels\"\n                >\n                    <mat-option [value]=\"building?.id\"> All Levels </mat-option>\n                    <mat-option\n                        *ngFor=\"let level of levels | async\"\n                        [value]=\"level.id\"\n                    >\n                        {{ level.display_name || level.name }}\n                    </mat-option>\n                </mat-select>\n            </mat-form-field>\n            <button\n                *ngIf=\"\n                    page === 'menu' && (!zones[0] || zones[0] === building?.id)\n                \"\n                btn\n                matRipple\n                (click)=\"addItem()\"\n            >\n                Add Item\n            </button>\n            <button\n                *ngIf=\"page === 'menu'\"\n                btn\n                matRipple\n                (click)=\"editConfig()\"\n            >\n                Edit Config\n            </button>\n            <button\n                *ngIf=\"page === 'menu'\"\n                btn\n                matRipple\n                (click)=\"importMenu()\"\n            >\n                Import Menu\n            </button>\n            <button\n                *ngIf=\"page === 'menu'\"\n                btn\n                matRipple\n                (click)=\"setRoomAvailability()\"\n            >\n                Room Availability\n            </button>\n            <button\n                *ngIf=\"page === 'menu'\"\n                btn\n                matRipple\n                (click)=\"setChargeCodes()\"\n            >\n                Charge Codes\n            </button>\n            <div class=\"flex-1 w-2\"></div>\n            <!-- <searchbar class=\"mr-2\"></searchbar> -->\n            <date-options (dateChange)=\"setDate($event)\"></date-options>\n        </div>\n    `,\n    styles: [\n        `\n            mat-form-field {\n                height: 3.25em;\n                width: 8em;\n            }\n        `,\n    ],\n})\nexport class CateringTopbarComponent extends BaseClass implements OnInit {\n    /** List of selected levels */\n    public zones: string[] = [];\n    /** Currently active page */\n    public page: string;\n    /** Active Building */\n    public get building() {\n        return this._org.building;\n    }\n    /** List of levels for the active building */\n    public readonly levels = this._org.active_levels;\n    /** Set filtered date */\n    public readonly setDate = (date) =>\n        (this._orders.filters = { ...this._orders.filters, date });\n    /** List of levels for the active building */\n    public readonly updateZones = (z) => {\n        this._router.navigate([], {\n            relativeTo: this._route,\n            queryParams: { zone_ids: z.join(',') },\n        });\n        this._orders.filters = { ...this._orders.filters, zones: [z] };\n        this._catering.zone = z[0] || this._catering.zone;\n    };\n\n    public readonly addItem = () => this._catering.addItem();\n    public readonly editConfig = () => this._catering.editConfig();\n    public readonly importMenu = () => this._catering.importMenu();\n\n    constructor(\n        private _orders: CateringOrdersService,\n        private _catering: CateringStateService,\n        private _org: OrganisationService,\n        private _route: ActivatedRoute,\n        private _router: Router,\n        private _dialog: MatDialog\n    ) {\n        super();\n    }\n\n    public async ngOnInit() {\n        await this._org.initialised.pipe(first((_) => _)).toPromise();\n        this._catering.zone =\n            (this._orders.filters?.zones || [])[0] || this._org.building?.id;\n        this.subscription(\n            'route.query',\n            this._route.queryParamMap.subscribe((params) => {\n                if (params.has('zone_ids')) {\n                    const zones = params.get('zone_ids').split(',');\n                    if (!zones.length) return;\n                    const level = this._org.levelWithID(zones);\n                    this.zones = zones;\n                    if (!level) return;\n                    this._org.building = this._org.buildings.find(\n                        (bld) => bld.id === level.parent_id\n                    );\n                }\n            })\n        );\n        this.subscription(\n            'route.params',\n            this._route.paramMap.subscribe(\n                (params) =>\n                    (this.page = params.has('view') ? params.get('view') : '')\n            )\n        );\n        this.subscription(\n            'levels',\n            this._org.active_levels.subscribe((levels) => {\n                this.zones = this.zones.filter((zone) =>\n                    levels.find((lvl) => lvl.id === zone)\n                );\n                if (!this.zones.length && levels.length) {\n                    this.zones.push(levels[0].id);\n                }\n                this.updateZones(this.zones);\n            })\n        );\n    }\n\n    public setRoomAvailability() {\n        this._dialog.open(CateringRoomsStateModalComponent);\n    }\n\n    public setChargeCodes() {\n        this._dialog.open(ChargeCodeListModalComponent);\n    }\n}\n","import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { BaseClass } from '@placeos/common';\n\n@Component({\n    selector: '[app-catering]',\n    template: `\n        <sidebar></sidebar>\n        <main\n            class=\"relative w-full flex flex-col bg-gray-200 dark:bg-neutral-600\"\n        >\n            <catering-topbar class=\"relative z-10\"></catering-topbar>\n            <div\n                class=\"p-2 flex items-center justify-center bg-blue-600 text-white text-sm\"\n                *ngIf=\"page === 'menu'\"\n            >\n                To edit the menu select \"All Levels\" from the top left\n            </div>\n            <div class=\"flex flex-1 h-1/2 w-full overflow-auto\">\n                <ng-container [ngSwitch]=\"page\">\n                    <catering-order-list\n                        *ngSwitchCase=\"'orders'\"\n                        class=\"flex-1\"\n                    ></catering-order-list>\n                    <catering-menu\n                        *ngSwitchCase=\"'menu'\"\n                        class=\"flex-1\"\n                    ></catering-menu>\n                    <div\n                        *ngSwitchDefault\n                        class=\"flex flex-1 flex-wrap items-center justify-center\"\n                    >\n                        <a\n                            matRipple\n                            class=\"rounded flex flex-col items-center bg-white dark:bg-neutral-700 shadow text-black dark:text-white\"\n                            [routerLink]=\"['/catering', 'menu']\"\n                        >\n                            <div\n                                name=\"img\"\n                                class=\"relative w-full flex flex-1 items-center justify-center text-2xl text-white bg-center bg-cover\"\n                                [style.background-image]=\"\n                                    'url(assets/menus.jpg)'\n                                \"\n                            >\n                                <div\n                                    class=\"absolute inset-0 bg-black opacity-60 z-0\"\n                                ></div>\n                                <span class=\"z-10\">Menus and Pricing</span>\n                            </div>\n                            <div\n                                class=\"p-2 h-14 w-full text-sm text-center flex items-center justify-center\"\n                            >\n                                View and Edit Menus and Pricing\n                            </div>\n                        </a>\n                        <a\n                            matRipple\n                            class=\"rounded flex flex-col items-center bg-white dark:bg-neutral-700 shadow text-black dark:text-white\"\n                            [routerLink]=\"['/catering', 'orders']\"\n                        >\n                            <div\n                                name=\"img\"\n                                class=\"relative w-full flex flex-1 items-center justify-center text-2xl text-white bg-center bg-cover\"\n                                [style.background-image]=\"\n                                    'url(assets/orders.jpg)'\n                                \"\n                            >\n                                <div\n                                    class=\"absolute inset-0 bg-black opacity-60 z-0\"\n                                ></div>\n                                <span class=\"z-10\">Today's Orders</span>\n                            </div>\n                            <div\n                                class=\"p-2 h-14 w-full text-sm text-center flex items-center justify-center\"\n                            >\n                                View Catering Orders and their statuses upon\n                                arrival\n                            </div>\n                        </a>\n                    </div>\n                </ng-container>\n            </div>\n        </main>\n    `,\n    styles: [\n        `\n            :host {\n                display: flex;\n                height: 100%;\n                width: 100%;\n            }\n\n            a {\n                width: 28rem;\n                height: 16rem;\n                margin-left: 0.5rem;\n                text-decoration: none;\n                transition: background 200ms;\n            }\n\n            a:hover {\n                opacity: 0.8;\n            }\n\n            a:first-child {\n                margin: 0;\n            }\n        `,\n    ],\n})\nexport class CateringComponent extends BaseClass implements OnInit {\n    /** Page being displayed */\n    public page: string;\n\n    constructor(private _route: ActivatedRoute) {\n        super();\n    }\n\n    public ngOnInit() {\n        this.subscription(\n            'route.params',\n            this._route.paramMap.subscribe(\n                (params) =>\n                    (this.page = params.has('view') ? params.get('view') : '')\n            )\n        );\n    }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { RouterModule, Route } from '@angular/router';\n\nimport { MatTabsModule } from '@angular/material/tabs';\nimport { MatChipsModule } from '@angular/material/chips';\n\nimport { UIModule } from '../ui/ui.module';\n\nimport { CateringComponent } from './catering.component';\nimport { CateringTopbarComponent } from './catering-topbar.component';\nimport { SharedCateringModule } from '@placeos/catering';\n\nconst ROUTES: Route[] = [\n    { path: '', component: CateringComponent },\n    { path: ':view', component: CateringComponent },\n];\n\n@NgModule({\n    declarations: [CateringComponent, CateringTopbarComponent],\n    imports: [\n        CommonModule,\n        FormsModule,\n        UIModule,\n        MatTabsModule,\n        MatChipsModule,\n        SharedCateringModule,\n        RouterModule.forChild(ROUTES),\n    ],\n})\nexport class CateringModule {}\n"],"x_google_ignoreList":[]}