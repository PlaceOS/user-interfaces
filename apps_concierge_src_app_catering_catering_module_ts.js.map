{"version":3,"file":"apps_concierge_src_app_catering_catering_module_ts.js","mappings":"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","names":["i0","tmp_3_0","level_r1","parent_id","display_name","CateringTopbarComponent_mat_option_8_div_2_Template","id","ctx_r1","use_region","name","_r3","addItem","_r4","editConfig","_r5","importMenu","_r6","setRoomAvailability","_r7","setChargeCodes","$event","_r8","setDate","CateringTopbarComponent","AsyncHandler","building","this","_org","_settings","get","constructor","_orders","_catering","_route","_router","_dialog","super","zones","filters","levels","combineLatest","active_building","active_region","pipe","map","bld","region","levelsForRegion","levelsForBuilding","date","setSearch","str","search","updateZones","z","navigate","relativeTo","queryParams","zone_ids","join","zone","ngOnInit","_this","_asyncToGenerator","initialised","first","_","toPromise","subscription","queryParamMap","subscribe","params","has","split","length","level","levelWithID","buildings","find","paramMap","page","_this2","ref","open","AvailableRoomsStateModalComponent","data","type","disabled_rooms","availability","take","componentInstance","change","_ref","list","saveSettings","catch","loading","_x","apply","arguments","ChargeCodeListModalComponent","static","t","i1","i2","i3","i4","i5","core","VBU","selectors","features","decls","vars","consts","template","rf","ctx","CateringTopbarComponent_mat_option_8_Template","CateringTopbarComponent_div_10_Template","CateringTopbarComponent_button_11_Template","CateringTopbarComponent_button_12_Template","CateringTopbarComponent_button_13_Template","CateringTopbarComponent_button_14_Template","CateringTopbarComponent_button_15_Template","CateringTopbarComponent_div_16_Template","CateringTopbarComponent_date_options_17_Template","_c1","_c2","CateringComponent","attrs","_c0","CateringComponent_div_3_Template","CateringComponent_catering_order_list_6_Template","CateringComponent_catering_menu_7_Template","CateringComponent_div_8_Template","NewCateringComponent","NewCateringComponent_div_6_Template","NewCateringComponent_catering_order_list_9_Template","NewCateringComponent_catering_menu_10_Template","NewCateringComponent_div_11_Template","ROUTES","path","component","CateringModule","$C","G2t","CommonModule","FormsModule","UIModule","MatTabsModule","MatChipsModule","SharedCateringModule","RouterModule","forChild"],"ignoreList":[],"sourceRoot":"webpack:///","sources":["./apps/concierge/src/app/catering/catering-topbar.component.ts","./apps/concierge/src/app/catering/catering.component.ts","./apps/concierge/src/app/catering/new-catering.component.ts","./apps/concierge/src/app/catering/catering.module.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { first, map, take } from 'rxjs/operators';\n\nimport { AsyncHandler, SettingsService } from '@placeos/common';\nimport { OrganisationService } from '@placeos/organisation';\nimport {\n    CateringOrdersService,\n    CateringStateService,\n    ChargeCodeListModalComponent,\n} from '@placeos/catering';\nimport { MatDialog } from '@angular/material/dialog';\nimport { AvailableRoomsStateModalComponent } from '@placeos/components';\nimport { combineLatest } from 'rxjs';\n\n@Component({\n    selector: 'catering-topbar',\n    template: `\n        <div class=\"flex items-center w-full pt-4 pb-2 px-8 space-x-2\">\n            <h2 class=\"text-2xl font-medium\">\n                Catering {{ page === 'menu' ? 'Menu' : 'Orders' }}\n            </h2>\n            <div class=\"flex-1 w-px\"></div>\n            <searchbar\n                class=\"mr-2\"\n                [model]=\"filters?.search\"\n                (modelChange)=\"setSearch($event)\"\n            ></searchbar>\n        </div>\n        <div class=\"flex items-center bg-base-100 h-20 px-8 space-x-2\">\n            <mat-form-field appearance=\"outline\" class=\"no-subscript w-60\">\n                <mat-select\n                    [ngModel]=\"filters?.zones\"\n                    (ngModelChange)=\"updateZones($event)\"\n                    placeholder=\"All Levels\"\n                    multiple\n                >\n                    <mat-option\n                        *ngFor=\"let level of levels | async\"\n                        [value]=\"level.id\"\n                    >\n                        <div class=\"flex flex-col-reverse\">\n                            <div class=\"text-xs opacity-30\" *ngIf=\"use_region\">\n                                {{ (level.parent_id | building)?.display_name }}\n                                <span class=\"opacity-0\"> - </span>\n                            </div>\n                            <div>\n                                {{ level.display_name || level.name }}\n                            </div>\n                        </div>\n                    </mat-option>\n                </mat-select>\n            </mat-form-field>\n            <div *ngIf=\"page === 'menu'\" class=\"flex-1 w-2\"></div>\n            <button\n                *ngIf=\"\n                    page === 'menu' && (!zones[0] || zones[0] === building?.id)\n                \"\n                icon\n                matRipple\n                matTooltip=\"Add Item\"\n                class=\"bg-secondary text-secondary-content rounded h-12 w-12\"\n                (click)=\"addItem()\"\n            >\n                <app-icon class=\"text-2xl\">add</app-icon>\n            </button>\n            <button\n                *ngIf=\"page === 'menu'\"\n                icon\n                matRipple\n                matTooltip=\"Edit Config\"\n                class=\"bg-secondary text-secondary-content rounded h-12 w-12\"\n                (click)=\"editConfig()\"\n            >\n                <app-icon class=\"text-2xl\">menu_book</app-icon>\n            </button>\n            <button\n                *ngIf=\"page === 'menu'\"\n                icon\n                matRipple\n                matTooltip=\"Import Menu\"\n                class=\"bg-secondary text-secondary-content rounded h-12 w-12\"\n                (click)=\"importMenu()\"\n            >\n                <app-icon class=\"text-2xl\">cloud_upload</app-icon>\n            </button>\n            <button\n                *ngIf=\"page === 'menu'\"\n                icon\n                matRipple\n                matTooltip=\"Room Availability\"\n                class=\"bg-secondary text-secondary-content rounded h-12 w-12\"\n                (click)=\"setRoomAvailability()\"\n            >\n                <app-icon class=\"text-2xl\">event_available</app-icon>\n            </button>\n            <button\n                *ngIf=\"page === 'menu'\"\n                icon\n                matRipple\n                matTooltip=\"Charge Codes\"\n                class=\"bg-secondary text-secondary-content rounded h-12 w-12\"\n                (click)=\"setChargeCodes()\"\n            >\n                <app-icon class=\"text-2xl\">payments</app-icon>\n            </button>\n            <div *ngIf=\"page !== 'menu'\" class=\"flex-1 w-2\"></div>\n            <!-- <searchbar class=\"mr-2\"></searchbar> -->\n            <date-options\n                *ngIf=\"page !== 'menu'\"\n                (dateChange)=\"setDate($event)\"\n            ></date-options>\n        </div>\n    `,\n    styles: [\n        `\n            mat-form-field {\n                height: 3.25em;\n                width: 8em;\n            }\n        `,\n    ],\n})\nexport class CateringTopbarComponent extends AsyncHandler implements OnInit {\n    /** List of selected levels */\n    public zones: string[] = [];\n    /** Currently active page */\n    public page: string;\n    public readonly filters = this._orders.filters;\n    /** List of levels for the active building */\n    public readonly levels = combineLatest([\n        this._org.active_building,\n        this._org.active_region,\n    ]).pipe(\n        map(([bld, region]) =>\n            this._settings.get('app.use_region')\n                ? this._org.levelsForRegion(region)\n                : this._org.levelsForBuilding(bld)\n        )\n    );\n    /** Set filtered date */\n    public readonly setDate = (date) =>\n        (this._orders.filters = { ...this._orders.filters, date });\n    public readonly setSearch = (str) =>\n        (this._orders.filters = { ...this._orders.filters, search: str });\n    /** List of levels for the active building */\n    public readonly updateZones = (z) => {\n        this._router.navigate([], {\n            relativeTo: this._route,\n            queryParams: { zone_ids: z.join(',') },\n        });\n        this._orders.filters = { ...this._orders.filters, zones: [z] };\n        this._catering.zone = z[0];\n    };\n\n    public readonly addItem = () => this._catering.addItem();\n    public readonly editConfig = () => this._catering.editConfig();\n    public readonly importMenu = () => this._catering.importMenu();\n\n    public get building() {\n        return this._org.building;\n    }\n\n    public get use_region() {\n        return !!this._settings.get('app.use_region');\n    }\n\n    constructor(\n        private _orders: CateringOrdersService,\n        private _catering: CateringStateService,\n        private _org: OrganisationService,\n        private _route: ActivatedRoute,\n        private _router: Router,\n        private _dialog: MatDialog,\n        private _settings: SettingsService\n    ) {\n        super();\n    }\n\n    public async ngOnInit() {\n        await this._org.initialised.pipe(first((_) => _)).toPromise();\n        this._catering.zone =\n            (this._orders.filters?.zones || [])[0] || this._org.building?.id;\n        this.subscription(\n            'route.query',\n            this._route.queryParamMap.subscribe((params) => {\n                if (params.has('zone_ids')) {\n                    const zones = params.get('zone_ids').split(',');\n                    if (!zones.length) return;\n                    const level = this._org.levelWithID(zones);\n                    this.zones = zones;\n                    if (!level) return;\n                    this._org.building = this._org.buildings.find(\n                        (bld) => bld.id === level.parent_id\n                    );\n                }\n            })\n        );\n        this.subscription(\n            'route.params',\n            this._route.paramMap.subscribe(\n                (params) =>\n                    (this.page = params.has('view') ? params.get('view') : '')\n            )\n        );\n    }\n\n    public async setRoomAvailability() {\n        const ref = this._dialog.open(AvailableRoomsStateModalComponent, {\n            data: {\n                type: 'Catering',\n                disabled_rooms: await this._catering.availability\n                    .pipe(take(1))\n                    .toPromise(),\n            },\n        });\n        this.subscription(\n            'room-availability',\n            ref.componentInstance.change.subscribe(async (list) => {\n                await this._catering\n                    .saveSettings({ disabled_rooms: list })\n                    .catch();\n                ref.componentInstance.loading = false;\n            })\n        );\n    }\n\n    public setChargeCodes() {\n        this._dialog.open(ChargeCodeListModalComponent);\n    }\n}\n","import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { AsyncHandler } from '@placeos/common';\n\n@Component({\n    selector: '[app-catering]',\n    template: `\n        <sidebar></sidebar>\n        <main class=\"relative w-full flex flex-col bg-base-200\">\n            <catering-topbar class=\"relative z-10\"></catering-topbar>\n            <div\n                class=\"p-2 flex items-center justify-center bg-info text-info-content text-sm\"\n                *ngIf=\"page === 'menu'\"\n            >\n                To edit the menu select \"All Levels\" from the top left\n            </div>\n            <div class=\"flex flex-1 h-1/2 w-full overflow-auto\">\n                <ng-container [ngSwitch]=\"page\">\n                    <catering-order-list\n                        *ngSwitchCase=\"'orders'\"\n                        class=\"flex-1\"\n                    ></catering-order-list>\n                    <catering-menu\n                        *ngSwitchCase=\"'menu'\"\n                        class=\"flex-1\"\n                    ></catering-menu>\n                    <div\n                        *ngSwitchDefault\n                        class=\"flex flex-1 flex-wrap items-center justify-center\"\n                    >\n                        <a\n                            matRipple\n                            class=\"rounded flex flex-col items-center bg-base-100 shadow text-black\"\n                            [routerLink]=\"['/book', 'catering', 'menu']\"\n                        >\n                            <div\n                                name=\"img\"\n                                class=\"relative w-full flex flex-1 items-center justify-center text-2xl text-white bg-center bg-cover\"\n                                [style.background-image]=\"\n                                    'url(assets/menus.jpg)'\n                                \"\n                            >\n                                <div\n                                    class=\"absolute inset-0 bg-neutral opacity-60 z-0\"\n                                ></div>\n                                <span class=\"z-10\">Menus and Pricing</span>\n                            </div>\n                            <div\n                                class=\"p-2 h-14 w-full text-sm text-center flex items-center justify-center\"\n                            >\n                                View and Edit Menus and Pricing\n                            </div>\n                        </a>\n                        <a\n                            matRipple\n                            class=\"rounded flex flex-col items-center bg-base-100 shadow text-black\"\n                            [routerLink]=\"['/book', 'catering', 'orders']\"\n                        >\n                            <div\n                                name=\"img\"\n                                class=\"relative w-full flex flex-1 items-center justify-center text-2xl text-white bg-center bg-cover\"\n                                [style.background-image]=\"\n                                    'url(assets/orders.jpg)'\n                                \"\n                            >\n                                <div\n                                    class=\"absolute inset-0 bg-neutral opacity-60 z-0\"\n                                ></div>\n                                <span class=\"z-10\">Today's Orders</span>\n                            </div>\n                            <div\n                                class=\"p-2 h-14 w-full text-sm text-center flex items-center justify-center\"\n                            >\n                                View Catering Orders and their statuses upon\n                                arrival\n                            </div>\n                        </a>\n                    </div>\n                </ng-container>\n            </div>\n        </main>\n    `,\n    styles: [\n        `\n            :host {\n                display: flex;\n                height: 100%;\n                width: 100%;\n            }\n\n            a {\n                width: 28rem;\n                height: 16rem;\n                margin-left: 0.5rem;\n                text-decoration: none;\n                transition: background 200ms;\n            }\n\n            a:hover {\n                opacity: 0.8;\n            }\n\n            a:first-child {\n                margin: 0;\n            }\n        `,\n    ],\n})\nexport class CateringComponent extends AsyncHandler implements OnInit {\n    /** Page being displayed */\n    public page: string;\n\n    constructor(private _route: ActivatedRoute) {\n        super();\n    }\n\n    public ngOnInit() {\n        this.subscription(\n            'route.params',\n            this._route.paramMap.subscribe(\n                (params) =>\n                    (this.page = params.has('view') ? params.get('view') : '')\n            )\n        );\n    }\n}\n","import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { AsyncHandler } from '@placeos/common';\n\n@Component({\n    selector: '[app-new-catering]',\n    template: `\n        <app-topbar></app-topbar>\n        <div class=\"flex flex-1 h-px\">\n            <app-sidebar></app-sidebar>\n            <main class=\"flex flex-col flex-1 w-1/2 h-full\">\n                <catering-topbar class=\"relative z-10\"></catering-topbar>\n                <div class=\"flex flex-col px-8 flex-1 h-1/2\">\n                    <div\n                        class=\"p-2 flex items-center justify-center bg-info text-white text-sm mb-4 rounded\"\n                        *ngIf=\"page === 'menu'\"\n                    >\n                        To edit the menu de-select all levels from the top left\n                    </div>\n                    <div class=\"flex flex-1 h-1/2 w-full overflow-auto\">\n                        <ng-container [ngSwitch]=\"page\">\n                            <catering-order-list\n                                *ngSwitchCase=\"'orders'\"\n                                class=\"flex-1\"\n                            ></catering-order-list>\n                            <catering-menu\n                                *ngSwitchCase=\"'menu'\"\n                                class=\"flex-1\"\n                            ></catering-menu>\n                            <div\n                                *ngSwitchDefault\n                                class=\"flex flex-1 flex-wrap items-center justify-center\"\n                            >\n                                <a\n                                    matRipple\n                                    class=\"rounded flex flex-col items-center bg-base-100 shadow text-black\"\n                                    [routerLink]=\"['/catering', 'menu']\"\n                                >\n                                    <div\n                                        name=\"img\"\n                                        class=\"relative w-full flex flex-1 items-center justify-center text-2xl text-white bg-center bg-cover\"\n                                        [style.background-image]=\"\n                                            'url(assets/menus.jpg)'\n                                        \"\n                                    >\n                                        <div\n                                            class=\"absolute inset-0 bg-neutral opacity-60 z-0\"\n                                        ></div>\n                                        <span class=\"z-10\"\n                                            >Menus and Pricing</span\n                                        >\n                                    </div>\n                                    <div\n                                        class=\"p-2 h-14 w-full text-sm text-center flex items-center justify-center\"\n                                    >\n                                        View and Edit Menus and Pricing\n                                    </div>\n                                </a>\n                                <a\n                                    matRipple\n                                    class=\"rounded flex flex-col items-center bg-base-100 shadow text-black\"\n                                    [routerLink]=\"['/catering', 'orders']\"\n                                >\n                                    <div\n                                        name=\"img\"\n                                        class=\"relative w-full flex flex-1 items-center justify-center text-2xl text-white bg-center bg-cover\"\n                                        [style.background-image]=\"\n                                            'url(assets/orders.jpg)'\n                                        \"\n                                    >\n                                        <div\n                                            class=\"absolute inset-0 bg-neutral opacity-60 z-0\"\n                                        ></div>\n                                        <span class=\"z-10\">Today's Orders</span>\n                                    </div>\n                                    <div\n                                        class=\"p-2 h-14 w-full text-sm text-center flex items-center justify-center\"\n                                    >\n                                        View Catering Orders and their statuses\n                                        upon arrival\n                                    </div>\n                                </a>\n                            </div>\n                        </ng-container>\n                    </div>\n                </div>\n            </main>\n        </div>\n    `,\n    styles: [\n        `\n            :host {\n                display: flex;\n                flex-direction: column;\n                height: 100%;\n                width: 100%;\n                background-color: var(--b1);\n            }\n\n            a {\n                width: 28rem;\n                height: 16rem;\n                margin-left: 0.5rem;\n                text-decoration: none;\n                transition: background 200ms;\n            }\n\n            a:hover {\n                opacity: 0.8;\n            }\n\n            a:first-child {\n                margin: 0;\n            }\n        `,\n    ],\n})\nexport class NewCateringComponent extends AsyncHandler implements OnInit {\n    /** Page being displayed */\n    public page: string;\n\n    constructor(private _route: ActivatedRoute) {\n        super();\n    }\n\n    public ngOnInit() {\n        this.subscription(\n            'route.params',\n            this._route.paramMap.subscribe(\n                (params) =>\n                    (this.page = params.has('view') ? params.get('view') : '')\n            )\n        );\n    }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { RouterModule, Route } from '@angular/router';\n\nimport { MatTabsModule } from '@angular/material/tabs';\nimport { MatChipsModule } from '@angular/material/chips';\n\nimport { UIModule } from '../ui/ui.module';\n\nimport { CateringComponent } from './catering.component';\nimport { CateringTopbarComponent } from './catering-topbar.component';\nimport { SharedCateringModule } from '@placeos/catering';\nimport { NewCateringComponent } from './new-catering.component';\n\nconst ROUTES: Route[] = [\n    { path: '', component: CateringComponent },\n    { path: 'new', component: NewCateringComponent },\n    { path: ':view', component: CateringComponent },\n    { path: 'new/:view', component: NewCateringComponent },\n];\n\n@NgModule({\n    declarations: [\n        CateringComponent,\n        NewCateringComponent,\n        CateringTopbarComponent,\n    ],\n    imports: [\n        CommonModule,\n        FormsModule,\n        UIModule,\n        MatTabsModule,\n        MatChipsModule,\n        SharedCateringModule,\n        RouterModule.forChild(ROUTES),\n    ],\n})\nexport class CateringModule {}\n"],"x_google_ignoreList":[]}