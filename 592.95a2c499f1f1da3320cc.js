(self.webpackChunkplaceos=self.webpackChunkplaceos||[]).push([[592],{2592:(e,t,n)=>{"use strict";n.r(t),n.d(t,{VisitorCheckinModule:()=>ne});var i=n(1511),o=n(6073),r=n(6898),s=n(3782),a=n(4762),c=n(3530),l=n(634),h=n(3206),u=n(6905),d=n(4587),m=n(4941),g=n(8512),f=n(2619);let p=(()=>{class e{constructor(){this._event=new g.X(null),this._guest=new g.X(null),this._photo=new g.X(""),this._error=new g.X(""),this._form=new g.X(null),this.event=this._event.asObservable(),this.guest=this._guest.asObservable(),this.error=this._error.asObservable(),this.form=this._form.asObservable()}clear(){this._guest.next(null),this._event.next(null),this._photo.next(null)}setPhoto(e){this._photo.next(e)}setError(e){this._error.next(e)}loadGuestAndEvent(e,t){return(0,a.mG)(this,void 0,void 0,function*(){const n=yield(0,d.pP)(e).toPromise();if(t){const e=yield(0,u.Vh)(t).toPromise();return this._guest.next(n),this._event.next(e),this._form.next((0,d.en)(n,e.host)),{guest:n,event:e}}const i=yield(0,d.n2)(e).toPromise(),o=new Date,r=i.filter(e=>(0,m.Z)(new Date(e.date),o));if(r.sort((e,t)=>e.date-t.date),r.length<=0)throw new Error(`No meetings for with guest "${e}" today`);return this._guest.next(n),this._event.next(r[0]),this._form.next((0,d.en)(n,r[0].host)),{guest:n,event:r[0]}})}updateGuest(e){return(0,a.mG)(this,void 0,void 0,function*(){const t=this._guest.getValue(),n=this._form.getValue();t&&n&&(yield(0,l.Ymr)(t.email,{name:"preferences",details:Object.assign(Object.assign(Object.assign({},t),n.value),e||{})}))})}checkinGuest(){var e,t;return(0,a.mG)(this,void 0,void 0,function*(){const n=this._guest.getValue(),i=this._event.getValue();n&&i&&(yield(0,u.rq)(i.id,n.email,!0,{system_id:(null===(e=i.system)||void 0===e?void 0:e.id)||(null===(t=i.resources[0])||void 0===t?void 0:t.id)}))})}printPass(){try{return new Promise(e=>setTimeout(()=>e(""),5e3))}catch(e){(0,h.cB)("Error printing visitor pass")}return Promise.reject()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=f.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var v=n(6283),_=n(6756),Z=n(5980),b=n(1548),y=n(7806);const w=["checkin-details",""],k=function(){return["/welcome"]};function x(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"form",2),f.ALo(1,"async"),f.TgZ(2,"h3",3),f._uU(3,"Confirm Details"),f.qZA(),f.TgZ(4,"div",4),f.TgZ(5,"label",5),f._uU(6,"Host"),f.qZA(),f.TgZ(7,"mat-form-field",6),f._UZ(8,"input",7),f.TgZ(9,"mat-error"),f._uU(10," The email address of your host is required "),f.qZA(),f.qZA(),f.qZA(),f.TgZ(11,"div",4),f.TgZ(12,"label",8),f._uU(13,"Name"),f.qZA(),f.TgZ(14,"mat-form-field",6),f._UZ(15,"input",9),f.TgZ(16,"mat-error"),f._uU(17,"Please enter your full name"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(18,"div",4),f.TgZ(19,"label",10),f._uU(20,"Email"),f.qZA(),f.TgZ(21,"mat-form-field",6),f._UZ(22,"input",11),f.TgZ(23,"mat-error"),f._uU(24,"A valid email address is required"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(25,"div",4),f.TgZ(26,"label",10),f._uU(27,"Phone Number"),f.qZA(),f.TgZ(28,"mat-form-field",6),f._UZ(29,"input",12),f.qZA(),f.qZA(),f.TgZ(30,"div",4),f.TgZ(31,"label",10),f._uU(32,"Organisation / Company"),f.qZA(),f.TgZ(33,"mat-form-field",6),f._UZ(34,"input",13),f.qZA(),f.qZA(),f.TgZ(35,"button",14),f.NdJ("click",function(){return f.CHM(e),f.oxw().updateGuest()}),f._uU(36,"Next"),f.qZA(),f.TgZ(37,"a",15),f.TgZ(38,"app-icon"),f._uU(39,"close"),f.qZA(),f.qZA(),f.qZA()}if(2&e){const e=f.oxw();f.Q6J("formGroup",f.lcZ(1,2,e.form)),f.xp6(37),f.Q6J("routerLink",f.DdM(4,k))}}function A(e,t){1&e&&(f.TgZ(0,"div",16),f._UZ(1,"mat-spinner",17),f.TgZ(2,"div",18),f._uU(3," Updating data and checking in... "),f.qZA(),f.qZA()),2&e&&(f.xp6(1),f.Q6J("diameter",48))}let T=(()=>{class e{constructor(e,t){this._checkin=e,this._router=t,this.form=this._checkin.form,this.loading=!1}ngOnInit(){this.form.pipe((0,c.P)()).subscribe(e=>e?"":this.previous())}updateGuest(){return(0,a.mG)(this,void 0,void 0,function*(){this.loading=!0,yield this._checkin.updateGuest(),yield this._checkin.checkinGuest(),this.loading=!1,this._router.navigate(["/checkin","covid"])})}previous(){this._router.navigate(["/checkin","scan"])}}return e.\u0275fac=function(t){return new(t||e)(f.Y36(p),f.Y36(r.F0))},e.\u0275cmp=f.Xpm({type:e,selectors:[["","checkin-details",""]],attrs:w,decls:4,vars:4,consts:[["class","bg-white rounded shadow overflow-hidden relative flex flex-col items-center my-4 mx-auto",3,"formGroup",4,"ngIf","ngIfElse"],["load_state",""],[1,"bg-white","rounded","shadow","overflow-hidden","relative","flex","flex-col","items-center","my-4","mx-auto",3,"formGroup"],[1,"text-2xl","m-4"],["field","",1,"flex","flex-col"],["form","host"],["appearance","outline"],["matInput","","name","host","formControlName","host","placeholder","Host's Email Address"],["form","name"],["matInput","","name","name","formControlName","name","placeholder","Full Name"],["form","email"],["matInput","","name","email","formControlName","email","placeholder","Email Address"],["matInput","","name","phone","formControlName","phone","placeholder","Phone Number"],["matInput","","name","phone","formControlName","phone","placeholder","Organisation / Company"],["mat-button","",3,"click"],["mat-icon-button","",1,"absolute","top-0","right-0",3,"routerLink"],[1,"flex","flex-col","items-center","m-auto"],[3,"diameter"],[1,"my-4","text-lg","text-white"]],template:function(e,t){if(1&e&&(f.YNc(0,x,40,5,"form",0),f.ALo(1,"async"),f.YNc(2,A,4,1,"ng-template",null,1,f.W1O)),2&e){const e=f.MAs(3);f.Q6J("ngIf",f.lcZ(1,2,t.form)&&!t.loading)("ngIfElse",e)}},directives:[i.O5,o._Y,o.JL,o.sg,v.KE,_.Nt,o.Fj,o.JJ,o.u,v.TO,Z.lW,Z.zs,r.yS,b.o,y.$g],pipes:[i.Ov],styles:["[_nghost-%COMP%]{position:absolute;top:0;left:0;right:0;bottom:0;background-color:rgba(0,0,0,.5)}form[_ngcontent-%COMP%]{width:32rem;max-width:calc(100vw - 2rem)}[field][_ngcontent-%COMP%]{width:calc(100% - 2rem)}.absolute[_ngcontent-%COMP%]{position:absolute}button[_ngcontent-%COMP%]{margin-bottom:1rem;width:8rem}"]}),e})(),q=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=f.Xpm({type:e,selectors:[["checkin-group"]],decls:0,vars:0,template:function(e,t){},styles:[""]}),e})();var O=n(4291);const U=function(){return["/welcome"]};function C(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"div",2),f.TgZ(1,"h3",3),f._uU(2,"Take a photo to continue"),f.qZA(),f.TgZ(3,"a-take-photo",4),f.NdJ("photoAccepted",function(t){return f.CHM(e),f.oxw().handlePhoto(t)}),f.qZA(),f.TgZ(4,"a",5),f.TgZ(5,"app-icon"),f._uU(6,"close"),f.qZA(),f.qZA(),f.qZA()}2&e&&(f.xp6(4),f.Q6J("routerLink",f.DdM(1,U)))}function P(e,t){1&e&&(f.TgZ(0,"div",6),f._UZ(1,"mat-spinner",7),f.TgZ(2,"div",8),f._uU(3," Printing guest pass... "),f.qZA(),f.qZA()),2&e&&(f.xp6(1),f.Q6J("diameter",48))}let E=(()=>{class e{constructor(e,t){this._checkin=e,this._router=t}handlePhoto(e){return(0,a.mG)(this,void 0,void 0,function*(){if(!e)return(0,h.cB)("Error saving image, please try again");this.loading=!0,this._checkin.setPhoto(e),yield this._checkin.printPass().catch(e=>{throw this.loading=!1,(0,h.cB)(e),e}),this.loading=!1,this._router.navigate(["/checkin","results"])})}}return e.\u0275fac=function(t){return new(t||e)(f.Y36(p),f.Y36(r.F0))},e.\u0275cmp=f.Xpm({type:e,selectors:[["checkin-photo"]],decls:3,vars:2,consts:[["class","bg-white rounded shadow overflow-hidden relative flex flex-col items-center p-4",4,"ngIf","ngIfElse"],["load_state",""],[1,"bg-white","rounded","shadow","overflow-hidden","relative","flex","flex-col","items-center","p-4"],[1,"text-xl","mb-4"],[3,"photoAccepted"],["mat-icon-button","",1,"absolute","top-0","right-0",3,"routerLink"],[1,"flex","flex-col","items-center","m-auto"],[3,"diameter"],[1,"my-4","text-lg","text-white"]],template:function(e,t){if(1&e&&(f.YNc(0,C,7,2,"div",0),f.YNc(1,P,4,1,"ng-template",null,1,f.W1O)),2&e){const e=f.MAs(2);f.Q6J("ngIf",!t.loading)("ngIfElse",e)}},directives:[i.O5,O.Q,Z.zs,r.yS,b.o,y.$g],styles:["[_nghost-%COMP%]{display:flex;align-items:center;justify-content:center;top:0;left:0;right:0;bottom:0;background-color:rgba(0,0,0,.5)}.absolute[_ngcontent-%COMP%], [_nghost-%COMP%]{position:absolute}"]}),e})();function M(e,t){if(1&e&&f._UZ(0,"form",5),2&e){const e=f.oxw();f.Q6J("formGroup",e.form)}}const L=function(){return["/welcome"]};let I=(()=>{class e{constructor(e){this._router=e}next(){this._router.navigate(["/welcome"])}}return e.\u0275fac=function(t){return new(t||e)(f.Y36(r.F0))},e.\u0275cmp=f.Xpm({type:e,selectors:[["checkin-preferences"]],decls:9,vars:3,consts:[[1,"bg-white","rounded","shadow","overflow-hidden","relative","flex","flex-col","items-center","my-4","p-4","mx-auto"],[1,"text-xl"],[3,"formGroup",4,"ngIf"],["mat-button","",3,"click"],["mat-icon-button","",1,"absolute","top-0","right-0",3,"routerLink"],[3,"formGroup"]],template:function(e,t){1&e&&(f.TgZ(0,"div",0),f.TgZ(1,"h3",1),f._uU(2,"Would you like a drink?"),f.qZA(),f.YNc(3,M,1,1,"form",2),f.TgZ(4,"button",3),f.NdJ("click",function(){return t.next()}),f._uU(5,"Update"),f.qZA(),f.TgZ(6,"a",4),f.TgZ(7,"app-icon"),f._uU(8,"close"),f.qZA(),f.qZA(),f.qZA()),2&e&&(f.xp6(3),f.Q6J("ngIf",t.form),f.xp6(3),f.Q6J("routerLink",f.DdM(2,L)))},directives:[i.O5,Z.lW,Z.zs,r.yS,b.o,o._Y,o.JL,o.sg],styles:[".absolute[_ngcontent-%COMP%]{position:absolute}"]}),e})();class D{static hasCamera(){return navigator.mediaDevices?navigator.mediaDevices.enumerateDevices().then(e=>e.some(e=>"videoinput"===e.kind)).catch(()=>!1):Promise.resolve(!1)}constructor(e,t,n=this._onDecodeError.bind(this),i=D.DEFAULT_CANVAS_SIZE,o="environment"){this.$video=e,this.$canvas=document.createElement("canvas"),this._onDecode=t,this._preferredFacingMode=o,this._active=!1,this._paused=!1,this._flashOn=!1,"number"==typeof n?(i=n,console.warn("You're using a deprecated version of the QrScanner constructor which will be removed in the future")):this._onDecodeError=n,this.$canvas.width=i,this.$canvas.height=i,this._sourceRect={x:0,y:0,width:i,height:i},this._updateSourceRect=this._updateSourceRect.bind(this),this._onPlay=this._onPlay.bind(this),this._onVisibilityChange=this._onVisibilityChange.bind(this),this.$video.playsInline=!0,this.$video.muted=!0,this.$video.disablePictureInPicture=!0,this.$video.addEventListener("loadedmetadata",this._updateSourceRect),this.$video.addEventListener("play",this._onPlay),document.addEventListener("visibilitychange",this._onVisibilityChange),this._qrEnginePromise=D.createQrEngine()}hasFlash(){if(!("ImageCapture"in window))return Promise.resolve(!1);const e=this.$video.srcObject?this.$video.srcObject.getVideoTracks()[0]:null;return e?new ImageCapture(e).getPhotoCapabilities().then(e=>e.fillLightMode.includes("flash")).catch(e=>(console.warn(e),!1)):Promise.reject("Camera not started or not available")}isFlashOn(){return this._flashOn}toggleFlash(){return this._setFlash(!this._flashOn)}turnFlashOff(){return this._setFlash(!1)}turnFlashOn(){return this._setFlash(!0)}destroy(){this.$video.removeEventListener("loadedmetadata",this._updateSourceRect),this.$video.removeEventListener("play",this._onPlay),document.removeEventListener("visibilitychange",this._onVisibilityChange),this.stop(),D._postWorkerMessage(this._qrEnginePromise,"close")}start(){if(this._active&&!this._paused)return Promise.resolve();if("https:"!==window.location.protocol&&console.warn("The camera stream is only accessible if the page is transferred via https."),this._active=!0,this._paused=!1,document.hidden)return Promise.resolve();if(clearTimeout(this._offTimeout),this._offTimeout=null,this.$video.srcObject)return this.$video.play(),Promise.resolve();let e=this._preferredFacingMode;return this._getCameraStream(e,!0).catch(()=>(e="environment"===e?"user":"environment",this._getCameraStream())).then(t=>{e=this._getFacingMode(t)||e,this.$video.srcObject=t,this.$video.play(),this._setVideoMirror(e)}).catch(e=>{throw this._active=!1,e})}stop(){this.pause(),this._active=!1}pause(){this._paused=!0,this._active&&(this.$video.pause(),this._offTimeout||(this._offTimeout=setTimeout(()=>{const e=this.$video.srcObject?this.$video.srcObject.getTracks():[];for(const t of e)t.stop();this.$video.srcObject=null,this._offTimeout=null},300)))}static scanImage(e,t=null,n=null,i=null,o=!1,r=!1){const s=n instanceof Worker;let a=Promise.all([n||D.createQrEngine(),D._loadImage(e)]).then(([e,r])=>{let a;return n=e,[i,a]=this._drawToCanvas(r,t,i,o),n instanceof Worker?(s||n.postMessage({type:"inversionMode",data:"both"}),new Promise((e,t)=>{let o,r,s;r=i=>{"qrResult"===i.data.type&&(n.removeEventListener("message",r),n.removeEventListener("error",s),clearTimeout(o),null!==i.data.data?e(i.data.data):t(D.NO_QR_CODE_FOUND))},s=e=>{n.removeEventListener("message",r),n.removeEventListener("error",s),clearTimeout(o),t("Scanner error: "+(e?e.message||e:"Unknown Error"))},n.addEventListener("message",r),n.addEventListener("error",s),o=setTimeout(()=>s("timeout"),1e4);const c=a.getImageData(0,0,i.width,i.height);n.postMessage({type:"decode",data:c},[c.data.buffer])})):new Promise((e,t)=>{const o=setTimeout(()=>t("Scanner error: timeout"),1e4);n.detect(i).then(n=>{n.length?e(n[0].rawValue):t(D.NO_QR_CODE_FOUND)}).catch(e=>t("Scanner error: "+(e.message||e))).finally(()=>clearTimeout(o))})});return t&&r&&(a=a.catch(()=>D.scanImage(e,null,n,i,o))),a=a.finally(()=>{s||D._postWorkerMessage(n,"close")}),a}setGrayscaleWeights(e,t,n,i=!0){D._postWorkerMessage(this._qrEnginePromise,"grayscaleWeights",{red:e,green:t,blue:n,useIntegerApproximation:i})}setInversionMode(e){D._postWorkerMessage(this._qrEnginePromise,"inversionMode",e)}static createQrEngine(e=D.WORKER_PATH){return("BarcodeDetector"in window?BarcodeDetector.getSupportedFormats():Promise.resolve([])).then(t=>-1!==t.indexOf("qr_code")?new BarcodeDetector({formats:["qr_code"]}):new Worker(e))}_onPlay(){this._updateSourceRect(),this._scanFrame()}_onVisibilityChange(){document.hidden?this.pause():this._active&&this.start()}_updateSourceRect(){const e=Math.min(this.$video.videoWidth,this.$video.videoHeight),t=Math.round(2/3*e);this._sourceRect.width=this._sourceRect.height=t,this._sourceRect.x=(this.$video.videoWidth-t)/2,this._sourceRect.y=(this.$video.videoHeight-t)/2}_scanFrame(){if(!this._active||this.$video.paused||this.$video.ended)return!1;requestAnimationFrame(()=>{this.$video.readyState<=1?this._scanFrame():this._qrEnginePromise.then(e=>D.scanImage(this.$video,this._sourceRect,e,this.$canvas,!0)).then(this._onDecode,e=>{this._active&&(-1!==(e.message||e).indexOf("service unavailable")&&(this._qrEnginePromise=D.createQrEngine()),this._onDecodeError(e))}).then(()=>this._scanFrame())})}_onDecodeError(e){e!==D.NO_QR_CODE_FOUND&&console.log(e)}_getCameraStream(e,t=!1){const n=[{width:{min:1024}},{width:{min:768}},{}];return e&&(t&&(e={exact:e}),n.forEach(t=>t.facingMode=e)),this._getMatchingCameraStream(n)}_getMatchingCameraStream(e){return navigator.mediaDevices&&0!==e.length?navigator.mediaDevices.getUserMedia({video:e.shift()}).catch(()=>this._getMatchingCameraStream(e)):Promise.reject("Camera not found.")}_setFlash(e){return this.hasFlash().then(t=>t?this.$video.srcObject.getVideoTracks()[0].applyConstraints({advanced:[{torch:e}]}):Promise.reject("No flash available")).then(()=>this._flashOn=e)}_setVideoMirror(e){this.$video.style.transform="scaleX("+("user"===e?-1:1)+")"}_getFacingMode(e){const t=e.getVideoTracks()[0];return t?/rear|back|environment/i.test(t.label)?"environment":/front|user|face/i.test(t.label)?"user":null:null}static _drawToCanvas(e,t=null,n=null,i=!1){n=n||document.createElement("canvas");const o=t&&t.x?t.x:0,r=t&&t.y?t.y:0,s=t&&t.width?t.width:e.width||e.videoWidth,a=t&&t.height?t.height:e.height||e.videoHeight;i||n.width===s&&n.height===a||(n.width=s,n.height=a);const c=n.getContext("2d",{alpha:!1});return c.imageSmoothingEnabled=!1,c.drawImage(e,o,r,s,a,0,0,n.width,n.height),[n,c]}static _loadImage(e){if(e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||window.ImageBitmap&&e instanceof window.ImageBitmap||window.OffscreenCanvas&&e instanceof window.OffscreenCanvas)return Promise.resolve(e);if(e instanceof Image)return D._awaitImageLoad(e).then(()=>e);if(e instanceof File||e instanceof Blob||e instanceof URL||"string"==typeof e){const t=new Image;return t.src=e instanceof File||e instanceof Blob?URL.createObjectURL(e):e,D._awaitImageLoad(t).then(()=>((e instanceof File||e instanceof Blob)&&URL.revokeObjectURL(t.src),t))}return Promise.reject("Unsupported image type.")}static _awaitImageLoad(e){return new Promise((t,n)=>{if(e.complete&&0!==e.naturalWidth)t();else{let i,o;i=()=>{e.removeEventListener("load",i),e.removeEventListener("error",o),t()},o=()=>{e.removeEventListener("load",i),e.removeEventListener("error",o),n("Image load error")},e.addEventListener("load",i),e.addEventListener("error",o)}})}static _postWorkerMessage(e,t,n){return Promise.resolve(e).then(e=>{e instanceof Worker&&e.postMessage({type:t,data:n})})}}D.DEFAULT_CANVAS_SIZE=400,D.NO_QR_CODE_FOUND="No QR code found",D.WORKER_PATH="qr-scanner-worker.min.js";const N=["video"],Q=["checkin-qr-scan",""],F=function(){return["/welcome"]};let R=(()=>{class e{constructor(e,t){this._checkin=e,this._router=t}ngOnInit(){this.setupQRReader()}ngOnDestroy(){this._video_el.nativeElement.srcObject&&this._video_el.nativeElement.srcObject.getTracks().forEach(e=>null==e?void 0:e.stop()),this._reader.stop()}checkQRCode(e){return(0,a.mG)(this,void 0,void 0,function*(){const t=e.split(",");if(2!==t.length)return(0,h.cB)("Invalid QRCode"),void this.setupQRReader();yield this._checkin.loadGuestAndEvent(t[0],t[1]).catch(e=>{throw this.handleError(e.message||e),e}),this._router.navigate(["/checkin","details"])})}checkEmail(e){return(0,a.mG)(this,void 0,void 0,function*(){!e||!e.includes("@")||e.length<5||(yield this._checkin.loadGuestAndEvent(e).catch(e=>{throw this.handleError(e.message||e),e}),this._router.navigate(["/checkin","details"]))})}setupQRReader(){navigator.mediaDevices.getUserMedia&&navigator.mediaDevices.getUserMedia({video:!0}).then(e=>this._video_el.nativeElement.srcObject=e).catch(e=>console.error("Unable to fetch media devices!",e)),this._reader=new D(this._video_el.nativeElement,e=>this.checkQRCode(e)),this._reader.start()}handleError(e){this._checkin.setError(e),this._router.navigate(["/checkin","error"])}}return e.\u0275fac=function(t){return new(t||e)(f.Y36(p),f.Y36(r.F0))},e.\u0275cmp=f.Xpm({type:e,selectors:[["","checkin-qr-scan",""]],viewQuery:function(e,t){if(1&e&&f.Gf(N,5),2&e){let e;f.iGM(e=f.CRH())&&(t._video_el=e.first)}},attrs:Q,decls:12,vars:3,consts:[[1,"bg-white","rounded","shadow","overflow-hidden","relative","flex","flex-col","items-center"],[1,"mt-6","mb-4"],["appearance","outline"],["matInput","","placeholder","Enter email...","type","email","autocomplete","off",3,"ngModel","ngModelChange","blur","keyup.enter"],["id","qr-stream","playsinline","","width","640","height","480","autoplay","",1,"rounded","m-4","bg-gray-200","border","border-gray-500"],["video",""],["mat-icon-button","",1,"absolute","top-0","right-0",3,"routerLink"]],template:function(e,t){1&e&&(f.TgZ(0,"div",0),f.TgZ(1,"p",1),f._uU(2," Please enter your email address or scan your QR code "),f.qZA(),f.TgZ(3,"mat-form-field",2),f.TgZ(4,"input",3),f.NdJ("ngModelChange",function(e){return t.email=e})("blur",function(){return t.checkEmail(t.email)})("keyup.enter",function(){return t.checkEmail(t.email)}),f.qZA(),f.TgZ(5,"mat-error"),f._uU(6,"Invalid email format"),f.qZA(),f.qZA(),f._UZ(7,"video",4,5),f.TgZ(9,"a",6),f.TgZ(10,"app-icon"),f._uU(11,"close"),f.qZA(),f.qZA(),f.qZA()),2&e&&(f.xp6(4),f.Q6J("ngModel",t.email),f.xp6(5),f.Q6J("routerLink",f.DdM(2,F)))},directives:[v.KE,_.Nt,o.Fj,o.JJ,o.On,v.TO,Z.zs,r.yS,b.o],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;width:100%;background-color:rgba(0,0,0,.5)}video[_ngcontent-%COMP%]{height:27rem}mat-form-field[_ngcontent-%COMP%], video[_ngcontent-%COMP%]{width:36rem}a[_ngcontent-%COMP%]{position:absolute}"]}),e})();function J(e,t){1&e&&(f.ynx(0),f._uU(1," Please wait in the lobby. "),f.BQk())}function $(e,t){1&e&&(f.ynx(0),f._uU(1," Please use the vistor access lift over there. "),f.BQk())}const S=function(){return["/checkin","preferences"]};function j(e,t){if(1&e&&(f.TgZ(0,"div",1),f.TgZ(1,"h3",2),f._uU(2,"You are checked in!"),f.qZA(),f.TgZ(3,"p",3),f._uU(4),f.ALo(5,"date"),f.ALo(6,"async"),f.ALo(7,"async"),f._UZ(8,"br"),f._uU(9),f.ALo(10,"async"),f.YNc(11,J,2,0,"ng-container",4),f.ALo(12,"async"),f.YNc(13,$,2,0,"ng-container",4),f.ALo(14,"async"),f.qZA(),f.TgZ(15,"a",5),f._uU(16," Done "),f.qZA(),f.qZA()),2&e){const e=f.oxw();let t,n,i;f.xp6(4),f.AsE(" Welcome, you have a meeting at ",f.xi3(5,6,(null==(t=f.lcZ(6,9,e.event))?null:t.event_start)||"","shortDate")," with ",(null==f.lcZ(7,11,e.event).organiser?null:f.lcZ(7,11,e.event).organiser.name)||"","."),f.xp6(5),f.hij(" ",(null==f.lcZ(10,13,e.event).organiser?null:f.lcZ(10,13,e.event).organiser.name)||""," has been notified and will be with you shortly.\xa0 "),f.xp6(2),f.Q6J("ngIf",!(null!=(n=f.lcZ(12,15,e.event))&&n.can_access_lift)),f.xp6(2),f.Q6J("ngIf",null==(i=f.lcZ(14,17,e.event))?null:i.can_access_lift),f.xp6(2),f.Q6J("routerLink",f.DdM(19,S))}}let Y=(()=>{class e{constructor(e,t){this._checkin=e,this._router=t,this.event=this._checkin.event,this.guest=this._checkin.guest}ngOnInit(){this.event.pipe((0,c.P)()).subscribe(e=>e?"":this.previous())}previous(){this._router.navigate(["/checkin"])}}return e.\u0275fac=function(t){return new(t||e)(f.Y36(p),f.Y36(r.F0))},e.\u0275cmp=f.Xpm({type:e,selectors:[["checkin-results"]],decls:2,vars:3,consts:[["class","bg-white rounded shadow overflow-hidden relative flex flex-col items-center my-4 p-4 mx-auto",4,"ngIf"],[1,"bg-white","rounded","shadow","overflow-hidden","relative","flex","flex-col","items-center","my-4","p-4","mx-auto"],[1,"text-xl"],[1,"text-center","my-4"],[4,"ngIf"],["button","","mat-button","",3,"routerLink"]],template:function(e,t){1&e&&(f.YNc(0,j,17,20,"div",0),f.ALo(1,"async")),2&e&&f.Q6J("ngIf",f.lcZ(1,1,t.event))},directives:[i.O5,Z.zs,r.yS],pipes:[i.Ov,i.uU],styles:["[_nghost-%COMP%]{position:absolute;display:flex;align-items:center;justify-content:center;top:0;left:0;right:0;bottom:0;background-color:rgba(0,0,0,.5)}[_nghost-%COMP%] > div[_ngcontent-%COMP%]{width:32rem;max-width:calc(100vw - 2rem)}[button][_ngcontent-%COMP%]{min-width:8rem}"]}),e})();function G(e,t){if(1&e&&(f.TgZ(0,"p",5),f._uU(1),f.ALo(2,"async"),f.qZA()),2&e){const e=f.oxw();f.xp6(1),f.Oqu(f.lcZ(2,1,e.error))}}const V=function(){return["/welcome"]};let W=(()=>{class e{constructor(e){this._checkin=e,this.error=this._checkin.error}}return e.\u0275fac=function(t){return new(t||e)(f.Y36(p))},e.\u0275cmp=f.Xpm({type:e,selectors:[["checkin-error"]],decls:9,vars:5,consts:[[1,"bg-white","rounded","shadow","overflow-hidden","relative","flex","flex-col","items-center","my-4","mx-auto","p-4"],[1,"text-xl","mb-4"],["class","mb-2",4,"ngIf"],[1,"mb-4"],["button","","mat-button","",3,"routerLink"],[1,"mb-2"]],template:function(e,t){1&e&&(f.TgZ(0,"div",0),f.TgZ(1,"h3",1),f._uU(2,"Please see reception."),f.qZA(),f.YNc(3,G,3,3,"p",2),f.ALo(4,"async"),f.TgZ(5,"p",3),f._uU(6,"Our staff at reception will assist you."),f.qZA(),f.TgZ(7,"a",4),f._uU(8,"Back"),f.qZA(),f.qZA()),2&e&&(f.xp6(3),f.Q6J("ngIf",f.lcZ(4,2,t.error)),f.xp6(4),f.Q6J("routerLink",f.DdM(4,V)))},directives:[i.O5,Z.zs,r.yS],pipes:[i.Ov],styles:["[_nghost-%COMP%]{position:absolute;display:flex;align-items:center;justify-content:center;top:0;left:0;right:0;bottom:0;background-color:rgba(0,0,0,.5)}[_nghost-%COMP%] > div[_ngcontent-%COMP%]{width:28rem;max-width:calc(100vw - 2rem)}"]}),e})();var B=n(4810);const X=["checkin-covid",""],H=function(){return["/welcome"]};let z=(()=>{class e{constructor(e,t){this._router=e,this._checkin=t}confirm(){if(!this.symptoms||!this.contact)return(0,h.cB)("Please select yes or no for each question");this._checkin.updateGuest({covid:"true"===this.contact,symptoms:"true"===this.symptoms}),"false"===this.symptoms&&"false"===this.contact?this._router.navigate(["/checkin","results"]):(this._checkin.setError("Please get tested for COVID-19 and self-isolate at home for 14 days"),this._router.navigate(["/checkin","error"]))}}return e.\u0275fac=function(t){return new(t||e)(f.Y36(r.F0),f.Y36(p))},e.\u0275cmp=f.Xpm({type:e,selectors:[["","checkin-covid",""]],attrs:X,decls:55,vars:5,consts:[[1,"bg-white","rounded","p-4","relative","overflow-y-auto","overflow-x-hidden"],[1,"text-xl","font-medium","mb-4"],[1,"list-decimal","list-inside"],[1,"list-disc","list-inside","px-4","mb-4"],["aria-label","Has Symptoms",3,"ngModel","ngModelChange"],["value","true"],["value","false",1,"ml-4"],[1,"my-4"],["aria-label","COVID contact or self-isolated",3,"ngModel","ngModelChange"],["mat-button","",3,"click"],["mat-icon-button","",1,"absolute","top-0","right-0",3,"disabled","routerLink"]],template:function(e,t){1&e&&(f.TgZ(0,"div",0),f.TgZ(1,"h3",1),f._uU(2,"COVID Disclaimer"),f.qZA(),f.TgZ(3,"ol",2),f.TgZ(4,"li"),f._uU(5," Do you have any of the following symptoms?"),f._UZ(6,"br"),f._UZ(7,"br"),f.TgZ(8,"ul",3),f.TgZ(9,"li"),f._uU(10,"Fever"),f.qZA(),f.TgZ(11,"li"),f._uU(12,"Cough"),f.qZA(),f.TgZ(13,"li"),f._uU(14,"Shortness of breath"),f.qZA(),f.TgZ(15,"li"),f._uU(16,"Chills"),f.qZA(),f.TgZ(17,"li"),f._uU(18,"Body aches"),f.qZA(),f.TgZ(19,"li"),f._uU(20,"Sore or scratchy throat"),f.qZA(),f.TgZ(21,"li"),f._uU(22,"Headache"),f.qZA(),f.TgZ(23,"li"),f._uU(24,"Runny nose"),f.qZA(),f.TgZ(25,"li"),f._uU(26,"Muscle pain"),f.qZA(),f.TgZ(27,"li"),f._uU(28,"Vomitting"),f.qZA(),f.TgZ(29,"li"),f._uU(30,"Nausea"),f.qZA(),f.TgZ(31,"li"),f._uU(32,"Diarrhoa"),f.qZA(),f.TgZ(33,"li"),f._uU(34,"Loss of taste or smell"),f.qZA(),f.qZA(),f.TgZ(35,"mat-radio-group",4),f.NdJ("ngModelChange",function(e){return t.symptoms=e}),f.TgZ(36,"mat-radio-button",5),f._uU(37,"Yes"),f.qZA(),f.TgZ(38,"mat-radio-button",6),f._uU(39,"No"),f.qZA(),f.qZA(),f.qZA(),f._UZ(40,"hr",7),f.TgZ(41,"li"),f._uU(42," Have you been in contact with a COVID-19 case in the last 14 days or been asked to self-isolate by a health offical?"),f._UZ(43,"br"),f._UZ(44,"br"),f.TgZ(45,"mat-radio-group",8),f.NdJ("ngModelChange",function(e){return t.contact=e}),f.TgZ(46,"mat-radio-button",5),f._uU(47,"Yes"),f.qZA(),f.TgZ(48,"mat-radio-button",6),f._uU(49,"No"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(50,"button",9),f.NdJ("click",function(){return t.confirm()}),f._uU(51,"Confirm"),f.qZA(),f.TgZ(52,"a",10),f.TgZ(53,"app-icon"),f._uU(54,"close"),f.qZA(),f.qZA(),f.qZA()),2&e&&(f.xp6(35),f.Q6J("ngModel",t.symptoms),f.xp6(10),f.Q6J("ngModel",t.contact),f.xp6(7),f.Q6J("disabled",!t.symptoms&&!t.contact)("routerLink",f.DdM(4,H)))},directives:[B.VQ,o.JJ,o.On,B.U0,Z.lW,Z.zs,r.yS,b.o],styles:["[_nghost-%COMP%]{position:absolute;display:flex;align-items:center;justify-content:center;top:0;left:0;right:0;bottom:0;background-color:rgba(0,0,0,.5)}[_nghost-%COMP%] > div[_ngcontent-%COMP%]{width:32rem;max-width:calc(100vw - 2rem);max-height:calc(100% - 2rem)}.absolute[_ngcontent-%COMP%]{position:absolute}button[_ngcontent-%COMP%]{margin:1rem 11rem 0;width:8rem}"]}),e})();var K=n(2873);const ee=["app-checkin",""],te=[{path:"",component:(()=>{class e{constructor(e){this._settings=e}get background(){return this._settings.get("app.home.background")}}return e.\u0275fac=function(t){return new(t||e)(f.Y36(h.gb))},e.\u0275cmp=f.Xpm({type:e,selectors:[["","app-checkin",""]],attrs:ee,decls:3,vars:2,consts:[[1,"w-full"],[1,"flex-1","w-full","bg-center","bg-cover","relative"]],template:function(e,t){1&e&&(f._UZ(0,"a-topbar-header",0),f.TgZ(1,"div",1),f._UZ(2,"router-outlet"),f.qZA()),2&e&&(f.xp6(1),f.Udp("background-image","url("+t.background+")"))},directives:[K.B,r.lC],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%;width:100%}"]}),e})(),children:[{path:"scan",component:R},{path:"details",component:T},{path:"group",component:q},{path:"preferences",component:I},{path:"photo",component:E},{path:"results",component:Y},{path:"error",component:W},{path:"covid",component:z},{path:"**",redirectTo:"scan"}]},{path:"**",redirectTo:""}];let ne=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=f.oAB({type:e}),e.\u0275inj=f.cJS({imports:[[i.ez,o.u5,o.UX,s.X,r.Bz.forChild(te)]]}),e})()}}]);