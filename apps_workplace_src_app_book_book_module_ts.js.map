{"version":3,"sources":["./node_modules/@angular/material/fesm2015/button-toggle.js","./apps/workplace/src/app/book/book.component.ts","./node_modules/qr-scanner/src/qr-scanner.js","./apps/workplace/src/app/book/code-flow.component.ts","./apps/workplace/src/app/book/desk-flow/detailed-form.component.ts","./apps/workplace/src/app/book/desk-flow/map.component.ts","./apps/workplace/src/app/book/desk-flow/confirm.component.ts","./apps/workplace/src/app/book/flow-success.component.ts","./apps/workplace/src/app/book/desk-flow/form.component.ts","./apps/workplace/src/app/book/desk-flow.component.ts","./apps/workplace/src/app/book/space-flow/find-item.component.ts","./apps/workplace/src/app/book/space-flow/find.component.ts","./apps/workplace/src/app/book/space-flow/confirm.component.ts","./apps/workplace/src/app/book/space-flow/detailed-form.component.ts","./apps/workplace/src/app/book/space-flow/form.component.ts","./apps/workplace/src/app/book/space-flow.component.ts","./apps/workplace/src/app/book/book.module.ts","./node_modules/date-fns/_lib/requiredArgs/index.js","./node_modules/date-fns/_lib/toInteger/index.js","./node_modules/date-fns/setHours/index.js","./node_modules/date-fns/toDate/index.js"],"names":["_c0","_c1","MAT_BUTTON_TOGGLE_DEFAULT_OPTIONS","MAT_BUTTON_TOGGLE_GROUP","MAT_BUTTON_TOGGLE_GROUP_VALUE_ACCESSOR","provide","useExisting","MatButtonToggleGroup","multi","uniqueIdCounter","MatButtonToggleChange","source","value","this","_changeDetector","defaultOptions","_vertical","_multiple","_disabled","_controlValueAccessorChangeFn","_onTouched","_name","valueChange","change","appearance","_buttonToggles","forEach","toggle","name","_markForCheck","selected","_selectionModel","multiple","map","undefined","newValue","_setSelectionByValue","emit","select","filter","checked","markForCheck","fn","isDisabled","disabled","Array","isArray","length","event","isUserInput","deferEvents","deselect","Promise","resolve","then","_updateModelValue","isSelected","_rawValue","some","_clearSelection","currentValue","_selectValue","clear","correspondingOption","find","_emitChangeEvent","ɵfac","t","ɵdir","type","selectors","contentQueries","rf","ctx","dirIndex","MatButtonToggle","_t","hostAttrs","hostVars","hostBindings","vertical","inputs","outputs","exportAs","features","MatButtonToggleBase","_MatButtonToggleMixinBase","toggleGroup","_changeDetectorRef","_elementRef","_focusMonitor","defaultTabIndex","super","_isSingleSelector","_checked","ariaLabelledby","parsedTabIndex","Number","tabIndex","buttonToggleGroup","id","_appearance","_isSelected","_syncButtonToggle","group","_isPrechecked","monitor","stopMonitoring","options","_buttonElement","nativeElement","focus","newChecked","ɵcmp","viewQuery","first","disableRipple","ariaLabel","ngContentSelectors","decls","vars","consts","template","_onButtonClick","_r0","buttonId","directives","styles","encapsulation","changeDetection","MatButtonToggleModule","ɵmod","ɵinj","imports","BookComponent","QrScanner","navigator","mediaDevices","enumerateDevices","devices","device","kind","catch","video","onDecode","canvasSizeOrOnDecodeError","_onDecodeError","bind","canvasSize","DEFAULT_CANVAS_SIZE","preferredFacingMode","$video","$canvas","document","createElement","_onDecode","_preferredFacingMode","_active","_paused","_flashOn","console","warn","width","height","_sourceRect","x","y","_updateSourceRect","_onPlay","_onVisibilityChange","playsInline","muted","disablePictureInPicture","addEventListener","_qrEnginePromise","createQrEngine","window","track","srcObject","getVideoTracks","ImageCapture","getPhotoCapabilities","result","fillLightMode","includes","error","reject","_setFlash","removeEventListener","stop","_postWorkerMessage","location","protocol","hidden","clearTimeout","_offTimeout","play","facingMode","_getCameraStream","stream","_getFacingMode","_setVideoMirror","e","pause","setTimeout","tracks","getTracks","imageOrFileOrUrl","sourceRect","qrEngine","canvas","fixedCanvasSize","alsoTryWithoutSourceRect","gotExternalWorker","Worker","promise","all","_loadImage","engine","image","canvasContext","_drawToCanvas","postMessage","data","timeout","onMessage","onError","NO_QR_CODE_FOUND","message","imageData","getImageData","buffer","detect","scanResults","rawValue","finally","scanImage","red","green","blue","useIntegerApproximation","inversionMode","workerPath","WORKER_PATH","BarcodeDetector","getSupportedFormats","supportedFormats","indexOf","formats","_scanFrame","start","smallestDimension","Math","min","videoWidth","videoHeight","sourceRectSize","round","paused","ended","requestAnimationFrame","readyState","log","exact","constraintsToTry","constraint","_getMatchingCameraStream","getUserMedia","shift","on","hasFlash","applyConstraints","advanced","torch","style","transform","videoStream","videoTrack","test","label","sourceRectX","sourceRectY","sourceRectWidth","sourceRectHeight","context","getContext","alpha","imageSmoothingEnabled","drawImage","imageOrFileOrBlobOrUrl","HTMLCanvasElement","HTMLVideoElement","ImageBitmap","OffscreenCanvas","Image","_awaitImageLoad","File","Blob","URL","src","createObjectURL","revokeObjectURL","complete","naturalWidth","onLoad","qrEngineOrQrEnginePromise","BookCodeFlowComponent","_router","is_scanning","menu","_video_el","_qr_scanner","r","handleQrCode","url","regex","params","match","exec","navigate","split","DeskFlowDetailedFormComponent","_state","_org","_settings","buildings","building_list","levels","active_levels","recurrence_options","setOptions","o","building","bld","get","DeskFlowMapComponent","_explore","map_url","map_styles","positions","map_positions","map_features","actions","map_actions","labels","map_labels","level","desks","available_assets","loading","form","option_details","combineLatest","valueChanges","pipe","startWith","recurrence","pattern","end","recurr_end","date","interval","days_of_week","details","format","zone_id","setLevel","_active_desk","BehaviorSubject","makeBooking","confirmPost","getValue","subscription","assets","debounceTime","subscribe","available","status","desk","active","bookable","d","map_id","fill","opacity","push","action","callback","setActiveDesk","setStyles","setActions","setFeatures","active_desk","content","zone","next","patchValue","asset_id","$event","stopPropagation","DeskFlowConfirmComponent","FlowSuccessComponent","route","DeskFlowFormComponent","time","quick_times","addDays","Date","valueOf","clearForm","initialised","_","levelsForBuilding","addMinutes","roundToNearestMinutes","nearestTo","title","findDesk","markAllAsTouched","valid","quickBook","BookDeskFlowComponent","_route","view","last_success","toPromise","loadForm","newForm","paramMap","param","has","setView","queryParamMap","SpaceFlowFindItemComponent","_dialog","bookChange","book","open","maxWidth","maxHeight","space","bookSpace","viewLocation","SpaceFlowFindComponent","_spaces","book_space","quick_capacities","space_list","active_building","spaces","available_spaces","opts","take","zone_ids","setBuilding","resources","s","confirmBooking","system","SpaceFlowConfirmComponent","show_spaces","show_people","postForm","DetailBookSpaceFormComponent","SpaceFlowFormComponent","capacity","findSpace","BookSpaceFlowComponent","ROUTES","path","component","children","redirectTo","BookModule","Object","defineProperty","exports","default","required","args","TypeError","module","dirtyNumber","NaN","number","isNaN","ceil","floor","dirtyDate","dirtyHours","_index3","arguments","_index2","hours","_index","setHours","_interopRequireDefault","obj","__esModule","argument","argStr","prototype","toString","call","getTime","Error","stack"],"mappings":"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","file":"apps_workplace_src_app_book_book_module_ts.js","sourcesContent":["import { FocusMonitor } from '@angular/cdk/a11y';\nimport { coerceBooleanProperty } from '@angular/cdk/coercion';\nimport { SelectionModel } from '@angular/cdk/collections';\nimport { InjectionToken, forwardRef, EventEmitter, Directive, ChangeDetectorRef, Optional, Inject, ContentChildren, Input, Output, Component, ViewEncapsulation, ChangeDetectionStrategy, ElementRef, Attribute, ViewChild, NgModule } from '@angular/core';\nimport { NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { mixinDisableRipple, MatCommonModule, MatRippleModule } from '@angular/material/core';\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Injection token that can be used to configure the\n * default options for all button toggles within an app.\n */\nimport * as ɵngcc0 from '@angular/core';\nimport * as ɵngcc1 from '@angular/cdk/a11y';\nimport * as ɵngcc2 from '@angular/material/core';\n\nconst _c0 = [\"button\"];\nconst _c1 = [\"*\"];\nconst MAT_BUTTON_TOGGLE_DEFAULT_OPTIONS = new InjectionToken('MAT_BUTTON_TOGGLE_DEFAULT_OPTIONS');\n/**\n * Injection token that can be used to reference instances of `MatButtonToggleGroup`.\n * It serves as alternative token to the actual `MatButtonToggleGroup` class which\n * could cause unnecessary retention of the class and its component metadata.\n */\nconst MAT_BUTTON_TOGGLE_GROUP = new InjectionToken('MatButtonToggleGroup');\n/**\n * Provider Expression that allows mat-button-toggle-group to register as a ControlValueAccessor.\n * This allows it to support [(ngModel)].\n * @docs-private\n */\nconst MAT_BUTTON_TOGGLE_GROUP_VALUE_ACCESSOR = {\n    provide: NG_VALUE_ACCESSOR,\n    useExisting: forwardRef(() => MatButtonToggleGroup),\n    multi: true\n};\n// Counter used to generate unique IDs.\nlet uniqueIdCounter = 0;\n/** Change event object emitted by MatButtonToggle. */\nclass MatButtonToggleChange {\n    constructor(\n    /** The MatButtonToggle that emits the event. */\n    source, \n    /** The value assigned to the MatButtonToggle. */\n    value) {\n        this.source = source;\n        this.value = value;\n    }\n}\n/** Exclusive selection button toggle group that behaves like a radio-button group. */\nclass MatButtonToggleGroup {\n    constructor(_changeDetector, defaultOptions) {\n        this._changeDetector = _changeDetector;\n        this._vertical = false;\n        this._multiple = false;\n        this._disabled = false;\n        /**\n         * The method to be called in order to update ngModel.\n         * Now `ngModel` binding is not supported in multiple selection mode.\n         */\n        this._controlValueAccessorChangeFn = () => { };\n        /** onTouch function registered via registerOnTouch (ControlValueAccessor). */\n        this._onTouched = () => { };\n        this._name = `mat-button-toggle-group-${uniqueIdCounter++}`;\n        /**\n         * Event that emits whenever the value of the group changes.\n         * Used to facilitate two-way data binding.\n         * @docs-private\n         */\n        this.valueChange = new EventEmitter();\n        /** Event emitted when the group's value changes. */\n        this.change = new EventEmitter();\n        this.appearance =\n            defaultOptions && defaultOptions.appearance ? defaultOptions.appearance : 'standard';\n    }\n    /** `name` attribute for the underlying `input` element. */\n    get name() { return this._name; }\n    set name(value) {\n        this._name = value;\n        if (this._buttonToggles) {\n            this._buttonToggles.forEach(toggle => {\n                toggle.name = this._name;\n                toggle._markForCheck();\n            });\n        }\n    }\n    /** Whether the toggle group is vertical. */\n    get vertical() { return this._vertical; }\n    set vertical(value) {\n        this._vertical = coerceBooleanProperty(value);\n    }\n    /** Value of the toggle group. */\n    get value() {\n        const selected = this._selectionModel ? this._selectionModel.selected : [];\n        if (this.multiple) {\n            return selected.map(toggle => toggle.value);\n        }\n        return selected[0] ? selected[0].value : undefined;\n    }\n    set value(newValue) {\n        this._setSelectionByValue(newValue);\n        this.valueChange.emit(this.value);\n    }\n    /** Selected button toggles in the group. */\n    get selected() {\n        const selected = this._selectionModel ? this._selectionModel.selected : [];\n        return this.multiple ? selected : (selected[0] || null);\n    }\n    /** Whether multiple button toggles can be selected. */\n    get multiple() { return this._multiple; }\n    set multiple(value) {\n        this._multiple = coerceBooleanProperty(value);\n    }\n    /** Whether multiple button toggle group is disabled. */\n    get disabled() { return this._disabled; }\n    set disabled(value) {\n        this._disabled = coerceBooleanProperty(value);\n        if (this._buttonToggles) {\n            this._buttonToggles.forEach(toggle => toggle._markForCheck());\n        }\n    }\n    ngOnInit() {\n        this._selectionModel = new SelectionModel(this.multiple, undefined, false);\n    }\n    ngAfterContentInit() {\n        this._selectionModel.select(...this._buttonToggles.filter(toggle => toggle.checked));\n    }\n    /**\n     * Sets the model value. Implemented as part of ControlValueAccessor.\n     * @param value Value to be set to the model.\n     */\n    writeValue(value) {\n        this.value = value;\n        this._changeDetector.markForCheck();\n    }\n    // Implemented as part of ControlValueAccessor.\n    registerOnChange(fn) {\n        this._controlValueAccessorChangeFn = fn;\n    }\n    // Implemented as part of ControlValueAccessor.\n    registerOnTouched(fn) {\n        this._onTouched = fn;\n    }\n    // Implemented as part of ControlValueAccessor.\n    setDisabledState(isDisabled) {\n        this.disabled = isDisabled;\n    }\n    /** Dispatch change event with current selection and group value. */\n    _emitChangeEvent() {\n        const selected = this.selected;\n        const source = Array.isArray(selected) ? selected[selected.length - 1] : selected;\n        const event = new MatButtonToggleChange(source, this.value);\n        this._controlValueAccessorChangeFn(event.value);\n        this.change.emit(event);\n    }\n    /**\n     * Syncs a button toggle's selected state with the model value.\n     * @param toggle Toggle to be synced.\n     * @param select Whether the toggle should be selected.\n     * @param isUserInput Whether the change was a result of a user interaction.\n     * @param deferEvents Whether to defer emitting the change events.\n     */\n    _syncButtonToggle(toggle, select, isUserInput = false, deferEvents = false) {\n        // Deselect the currently-selected toggle, if we're in single-selection\n        // mode and the button being toggled isn't selected at the moment.\n        if (!this.multiple && this.selected && !toggle.checked) {\n            this.selected.checked = false;\n        }\n        if (this._selectionModel) {\n            if (select) {\n                this._selectionModel.select(toggle);\n            }\n            else {\n                this._selectionModel.deselect(toggle);\n            }\n        }\n        else {\n            deferEvents = true;\n        }\n        // We need to defer in some cases in order to avoid \"changed after checked errors\", however\n        // the side-effect is that we may end up updating the model value out of sequence in others\n        // The `deferEvents` flag allows us to decide whether to do it on a case-by-case basis.\n        if (deferEvents) {\n            Promise.resolve().then(() => this._updateModelValue(isUserInput));\n        }\n        else {\n            this._updateModelValue(isUserInput);\n        }\n    }\n    /** Checks whether a button toggle is selected. */\n    _isSelected(toggle) {\n        return this._selectionModel && this._selectionModel.isSelected(toggle);\n    }\n    /** Determines whether a button toggle should be checked on init. */\n    _isPrechecked(toggle) {\n        if (typeof this._rawValue === 'undefined') {\n            return false;\n        }\n        if (this.multiple && Array.isArray(this._rawValue)) {\n            return this._rawValue.some(value => toggle.value != null && value === toggle.value);\n        }\n        return toggle.value === this._rawValue;\n    }\n    /** Updates the selection state of the toggles in the group based on a value. */\n    _setSelectionByValue(value) {\n        this._rawValue = value;\n        if (!this._buttonToggles) {\n            return;\n        }\n        if (this.multiple && value) {\n            if (!Array.isArray(value) && (typeof ngDevMode === 'undefined' || ngDevMode)) {\n                throw Error('Value must be an array in multiple-selection mode.');\n            }\n            this._clearSelection();\n            value.forEach((currentValue) => this._selectValue(currentValue));\n        }\n        else {\n            this._clearSelection();\n            this._selectValue(value);\n        }\n    }\n    /** Clears the selected toggles. */\n    _clearSelection() {\n        this._selectionModel.clear();\n        this._buttonToggles.forEach(toggle => toggle.checked = false);\n    }\n    /** Selects a value if there's a toggle that corresponds to it. */\n    _selectValue(value) {\n        const correspondingOption = this._buttonToggles.find(toggle => {\n            return toggle.value != null && toggle.value === value;\n        });\n        if (correspondingOption) {\n            correspondingOption.checked = true;\n            this._selectionModel.select(correspondingOption);\n        }\n    }\n    /** Syncs up the group's value with the model and emits the change event. */\n    _updateModelValue(isUserInput) {\n        // Only emit the change event for user input.\n        if (isUserInput) {\n            this._emitChangeEvent();\n        }\n        // Note: we emit this one no matter whether it was a user interaction, because\n        // it is used by Angular to sync up the two-way data binding.\n        this.valueChange.emit(this.value);\n    }\n}\nMatButtonToggleGroup.ɵfac = function MatButtonToggleGroup_Factory(t) { return new (t || MatButtonToggleGroup)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(MAT_BUTTON_TOGGLE_DEFAULT_OPTIONS, 8)); };\nMatButtonToggleGroup.ɵdir = /*@__PURE__*/ ɵngcc0.ɵɵdefineDirective({ type: MatButtonToggleGroup, selectors: [[\"mat-button-toggle-group\"]], contentQueries: function MatButtonToggleGroup_ContentQueries(rf, ctx, dirIndex) { if (rf & 1) {\n        ɵngcc0.ɵɵcontentQuery(dirIndex, MatButtonToggle, 5);\n    } if (rf & 2) {\n        let _t;\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx._buttonToggles = _t);\n    } }, hostAttrs: [\"role\", \"group\", 1, \"mat-button-toggle-group\"], hostVars: 5, hostBindings: function MatButtonToggleGroup_HostBindings(rf, ctx) { if (rf & 2) {\n        ɵngcc0.ɵɵattribute(\"aria-disabled\", ctx.disabled);\n        ɵngcc0.ɵɵclassProp(\"mat-button-toggle-vertical\", ctx.vertical)(\"mat-button-toggle-group-appearance-standard\", ctx.appearance === \"standard\");\n    } }, inputs: { appearance: \"appearance\", name: \"name\", vertical: \"vertical\", value: \"value\", multiple: \"multiple\", disabled: \"disabled\" }, outputs: { valueChange: \"valueChange\", change: \"change\" }, exportAs: [\"matButtonToggleGroup\"], features: [ɵngcc0.ɵɵProvidersFeature([\n            MAT_BUTTON_TOGGLE_GROUP_VALUE_ACCESSOR,\n            { provide: MAT_BUTTON_TOGGLE_GROUP, useExisting: MatButtonToggleGroup },\n        ])] });\nMatButtonToggleGroup.ctorParameters = () => [\n    { type: ChangeDetectorRef },\n    { type: undefined, decorators: [{ type: Optional }, { type: Inject, args: [MAT_BUTTON_TOGGLE_DEFAULT_OPTIONS,] }] }\n];\nMatButtonToggleGroup.propDecorators = {\n    _buttonToggles: [{ type: ContentChildren, args: [forwardRef(() => MatButtonToggle), {\n                    // Note that this would technically pick up toggles\n                    // from nested groups, but that's not a case that we support.\n                    descendants: true\n                },] }],\n    appearance: [{ type: Input }],\n    name: [{ type: Input }],\n    vertical: [{ type: Input }],\n    value: [{ type: Input }],\n    valueChange: [{ type: Output }],\n    multiple: [{ type: Input }],\n    disabled: [{ type: Input }],\n    change: [{ type: Output }]\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(MatButtonToggleGroup, [{\n        type: Directive,\n        args: [{\n                selector: 'mat-button-toggle-group',\n                providers: [\n                    MAT_BUTTON_TOGGLE_GROUP_VALUE_ACCESSOR,\n                    { provide: MAT_BUTTON_TOGGLE_GROUP, useExisting: MatButtonToggleGroup },\n                ],\n                host: {\n                    'role': 'group',\n                    'class': 'mat-button-toggle-group',\n                    '[attr.aria-disabled]': 'disabled',\n                    '[class.mat-button-toggle-vertical]': 'vertical',\n                    '[class.mat-button-toggle-group-appearance-standard]': 'appearance === \"standard\"'\n                },\n                exportAs: 'matButtonToggleGroup'\n            }]\n    }], function () { return [{ type: ɵngcc0.ChangeDetectorRef }, { type: undefined, decorators: [{\n                type: Optional\n            }, {\n                type: Inject,\n                args: [MAT_BUTTON_TOGGLE_DEFAULT_OPTIONS]\n            }] }]; }, { valueChange: [{\n            type: Output\n        }], change: [{\n            type: Output\n        }], appearance: [{\n            type: Input\n        }], name: [{\n            type: Input\n        }], vertical: [{\n            type: Input\n        }], value: [{\n            type: Input\n        }], multiple: [{\n            type: Input\n        }], disabled: [{\n            type: Input\n        }], _buttonToggles: [{\n            type: ContentChildren,\n            args: [forwardRef(() => MatButtonToggle), {\n                    // Note that this would technically pick up toggles\n                    // from nested groups, but that's not a case that we support.\n                    descendants: true\n                }]\n        }] }); })();\n// Boilerplate for applying mixins to the MatButtonToggle class.\n/** @docs-private */\nclass MatButtonToggleBase {\n}\nconst _MatButtonToggleMixinBase = mixinDisableRipple(MatButtonToggleBase);\n/** Single button inside of a toggle group. */\nclass MatButtonToggle extends _MatButtonToggleMixinBase {\n    constructor(toggleGroup, _changeDetectorRef, _elementRef, _focusMonitor, defaultTabIndex, defaultOptions) {\n        super();\n        this._changeDetectorRef = _changeDetectorRef;\n        this._elementRef = _elementRef;\n        this._focusMonitor = _focusMonitor;\n        this._isSingleSelector = false;\n        this._checked = false;\n        /**\n         * Users can specify the `aria-labelledby` attribute which will be forwarded to the input element\n         */\n        this.ariaLabelledby = null;\n        this._disabled = false;\n        /** Event emitted when the group value changes. */\n        this.change = new EventEmitter();\n        const parsedTabIndex = Number(defaultTabIndex);\n        this.tabIndex = (parsedTabIndex || parsedTabIndex === 0) ? parsedTabIndex : null;\n        this.buttonToggleGroup = toggleGroup;\n        this.appearance =\n            defaultOptions && defaultOptions.appearance ? defaultOptions.appearance : 'standard';\n    }\n    /** Unique ID for the underlying `button` element. */\n    get buttonId() { return `${this.id}-button`; }\n    /** The appearance style of the button. */\n    get appearance() {\n        return this.buttonToggleGroup ? this.buttonToggleGroup.appearance : this._appearance;\n    }\n    set appearance(value) {\n        this._appearance = value;\n    }\n    /** Whether the button is checked. */\n    get checked() {\n        return this.buttonToggleGroup ? this.buttonToggleGroup._isSelected(this) : this._checked;\n    }\n    set checked(value) {\n        const newValue = coerceBooleanProperty(value);\n        if (newValue !== this._checked) {\n            this._checked = newValue;\n            if (this.buttonToggleGroup) {\n                this.buttonToggleGroup._syncButtonToggle(this, this._checked);\n            }\n            this._changeDetectorRef.markForCheck();\n        }\n    }\n    /** Whether the button is disabled. */\n    get disabled() {\n        return this._disabled || (this.buttonToggleGroup && this.buttonToggleGroup.disabled);\n    }\n    set disabled(value) { this._disabled = coerceBooleanProperty(value); }\n    ngOnInit() {\n        const group = this.buttonToggleGroup;\n        this._isSingleSelector = group && !group.multiple;\n        this.id = this.id || `mat-button-toggle-${uniqueIdCounter++}`;\n        if (this._isSingleSelector) {\n            this.name = group.name;\n        }\n        if (group) {\n            if (group._isPrechecked(this)) {\n                this.checked = true;\n            }\n            else if (group._isSelected(this) !== this._checked) {\n                // As as side effect of the circular dependency between the toggle group and the button,\n                // we may end up in a state where the button is supposed to be checked on init, but it\n                // isn't, because the checked value was assigned too early. This can happen when Ivy\n                // assigns the static input value before the `ngOnInit` has run.\n                group._syncButtonToggle(this, this._checked);\n            }\n        }\n    }\n    ngAfterViewInit() {\n        this._focusMonitor.monitor(this._elementRef, true);\n    }\n    ngOnDestroy() {\n        const group = this.buttonToggleGroup;\n        this._focusMonitor.stopMonitoring(this._elementRef);\n        // Remove the toggle from the selection once it's destroyed. Needs to happen\n        // on the next tick in order to avoid \"changed after checked\" errors.\n        if (group && group._isSelected(this)) {\n            group._syncButtonToggle(this, false, false, true);\n        }\n    }\n    /** Focuses the button. */\n    focus(options) {\n        this._buttonElement.nativeElement.focus(options);\n    }\n    /** Checks the button toggle due to an interaction with the underlying native button. */\n    _onButtonClick() {\n        const newChecked = this._isSingleSelector ? true : !this._checked;\n        if (newChecked !== this._checked) {\n            this._checked = newChecked;\n            if (this.buttonToggleGroup) {\n                this.buttonToggleGroup._syncButtonToggle(this, this._checked, true);\n                this.buttonToggleGroup._onTouched();\n            }\n        }\n        // Emit a change event when it's the single selector\n        this.change.emit(new MatButtonToggleChange(this, this.value));\n    }\n    /**\n     * Marks the button toggle as needing checking for change detection.\n     * This method is exposed because the parent button toggle group will directly\n     * update bound properties of the radio button.\n     */\n    _markForCheck() {\n        // When the group value changes, the button will not be notified.\n        // Use `markForCheck` to explicit update button toggle's status.\n        this._changeDetectorRef.markForCheck();\n    }\n}\nMatButtonToggle.ɵfac = function MatButtonToggle_Factory(t) { return new (t || MatButtonToggle)(ɵngcc0.ɵɵdirectiveInject(MAT_BUTTON_TOGGLE_GROUP, 8), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.FocusMonitor), ɵngcc0.ɵɵinjectAttribute('tabindex'), ɵngcc0.ɵɵdirectiveInject(MAT_BUTTON_TOGGLE_DEFAULT_OPTIONS, 8)); };\nMatButtonToggle.ɵcmp = /*@__PURE__*/ ɵngcc0.ɵɵdefineComponent({ type: MatButtonToggle, selectors: [[\"mat-button-toggle\"]], viewQuery: function MatButtonToggle_Query(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵviewQuery(_c0, 5);\n    } if (rf & 2) {\n        let _t;\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx._buttonElement = _t.first);\n    } }, hostAttrs: [\"role\", \"presentation\", 1, \"mat-button-toggle\"], hostVars: 12, hostBindings: function MatButtonToggle_HostBindings(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵlistener(\"focus\", function MatButtonToggle_focus_HostBindingHandler() { return ctx.focus(); });\n    } if (rf & 2) {\n        ɵngcc0.ɵɵattribute(\"aria-label\", null)(\"aria-labelledby\", null)(\"id\", ctx.id)(\"name\", null);\n        ɵngcc0.ɵɵclassProp(\"mat-button-toggle-standalone\", !ctx.buttonToggleGroup)(\"mat-button-toggle-checked\", ctx.checked)(\"mat-button-toggle-disabled\", ctx.disabled)(\"mat-button-toggle-appearance-standard\", ctx.appearance === \"standard\");\n    } }, inputs: { disableRipple: \"disableRipple\", ariaLabelledby: [\"aria-labelledby\", \"ariaLabelledby\"], tabIndex: \"tabIndex\", appearance: \"appearance\", checked: \"checked\", disabled: \"disabled\", id: \"id\", name: \"name\", ariaLabel: [\"aria-label\", \"ariaLabel\"], value: \"value\" }, outputs: { change: \"change\" }, exportAs: [\"matButtonToggle\"], features: [ɵngcc0.ɵɵInheritDefinitionFeature], ngContentSelectors: _c1, decls: 6, vars: 9, consts: [[\"type\", \"button\", 1, \"mat-button-toggle-button\", \"mat-focus-indicator\", 3, \"id\", \"disabled\", \"click\"], [\"button\", \"\"], [1, \"mat-button-toggle-label-content\"], [1, \"mat-button-toggle-focus-overlay\"], [\"matRipple\", \"\", 1, \"mat-button-toggle-ripple\", 3, \"matRippleTrigger\", \"matRippleDisabled\"]], template: function MatButtonToggle_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵprojectionDef();\n        ɵngcc0.ɵɵelementStart(0, \"button\", 0, 1);\n        ɵngcc0.ɵɵlistener(\"click\", function MatButtonToggle_Template_button_click_0_listener() { return ctx._onButtonClick(); });\n        ɵngcc0.ɵɵelementStart(2, \"span\", 2);\n        ɵngcc0.ɵɵprojection(3);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelement(4, \"span\", 3);\n        ɵngcc0.ɵɵelement(5, \"span\", 4);\n    } if (rf & 2) {\n        const _r0 = ɵngcc0.ɵɵreference(1);\n        ɵngcc0.ɵɵproperty(\"id\", ctx.buttonId)(\"disabled\", ctx.disabled || null);\n        ɵngcc0.ɵɵattribute(\"tabindex\", ctx.disabled ? -1 : ctx.tabIndex)(\"aria-pressed\", ctx.checked)(\"name\", ctx.name || null)(\"aria-label\", ctx.ariaLabel)(\"aria-labelledby\", ctx.ariaLabelledby);\n        ɵngcc0.ɵɵadvance(5);\n        ɵngcc0.ɵɵproperty(\"matRippleTrigger\", _r0)(\"matRippleDisabled\", ctx.disableRipple || ctx.disabled);\n    } }, directives: [ɵngcc2.MatRipple], styles: [\".mat-button-toggle-standalone,.mat-button-toggle-group{position:relative;display:inline-flex;flex-direction:row;white-space:nowrap;overflow:hidden;border-radius:2px;-webkit-tap-highlight-color:transparent}.cdk-high-contrast-active .mat-button-toggle-standalone,.cdk-high-contrast-active .mat-button-toggle-group{outline:solid 1px}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.mat-button-toggle-group-appearance-standard{border-radius:4px}.cdk-high-contrast-active .mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.cdk-high-contrast-active .mat-button-toggle-group-appearance-standard{outline:0}.mat-button-toggle-vertical{flex-direction:column}.mat-button-toggle-vertical .mat-button-toggle-label-content{display:block}.mat-button-toggle{white-space:nowrap;position:relative}.mat-button-toggle .mat-icon svg{vertical-align:top}.mat-button-toggle.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:1}.cdk-high-contrast-active .mat-button-toggle.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:.5}.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{opacity:.04}.mat-button-toggle-appearance-standard.cdk-keyboard-focused:not(.mat-button-toggle-disabled) .mat-button-toggle-focus-overlay{opacity:.12}.cdk-high-contrast-active .mat-button-toggle-appearance-standard.cdk-keyboard-focused:not(.mat-button-toggle-disabled) .mat-button-toggle-focus-overlay{opacity:.5}@media(hover: none){.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{display:none}}.mat-button-toggle-label-content{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;display:inline-block;line-height:36px;padding:0 16px;position:relative}.mat-button-toggle-appearance-standard .mat-button-toggle-label-content{padding:0 12px}.mat-button-toggle-label-content>*{vertical-align:middle}.mat-button-toggle-focus-overlay{border-radius:inherit;pointer-events:none;opacity:0;top:0;left:0;right:0;bottom:0;position:absolute}.mat-button-toggle-checked .mat-button-toggle-focus-overlay{border-bottom:solid 36px}.cdk-high-contrast-active .mat-button-toggle-checked .mat-button-toggle-focus-overlay{opacity:.5;height:0}.cdk-high-contrast-active .mat-button-toggle-checked.mat-button-toggle-appearance-standard .mat-button-toggle-focus-overlay{border-bottom:solid 500px}.mat-button-toggle .mat-button-toggle-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-button-toggle-button{border:0;background:none;color:inherit;padding:0;margin:0;font:inherit;outline:none;width:100%;cursor:pointer}.mat-button-toggle-disabled .mat-button-toggle-button{cursor:default}.mat-button-toggle-button::-moz-focus-inner{border:0}\\n\"], encapsulation: 2, changeDetection: 0 });\nMatButtonToggle.ctorParameters = () => [\n    { type: MatButtonToggleGroup, decorators: [{ type: Optional }, { type: Inject, args: [MAT_BUTTON_TOGGLE_GROUP,] }] },\n    { type: ChangeDetectorRef },\n    { type: ElementRef },\n    { type: FocusMonitor },\n    { type: String, decorators: [{ type: Attribute, args: ['tabindex',] }] },\n    { type: undefined, decorators: [{ type: Optional }, { type: Inject, args: [MAT_BUTTON_TOGGLE_DEFAULT_OPTIONS,] }] }\n];\nMatButtonToggle.propDecorators = {\n    ariaLabel: [{ type: Input, args: ['aria-label',] }],\n    ariaLabelledby: [{ type: Input, args: ['aria-labelledby',] }],\n    _buttonElement: [{ type: ViewChild, args: ['button',] }],\n    id: [{ type: Input }],\n    name: [{ type: Input }],\n    value: [{ type: Input }],\n    tabIndex: [{ type: Input }],\n    appearance: [{ type: Input }],\n    checked: [{ type: Input }],\n    disabled: [{ type: Input }],\n    change: [{ type: Output }]\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(MatButtonToggle, [{\n        type: Component,\n        args: [{\n                selector: 'mat-button-toggle',\n                template: \"<button #button class=\\\"mat-button-toggle-button mat-focus-indicator\\\"\\n        type=\\\"button\\\"\\n        [id]=\\\"buttonId\\\"\\n        [attr.tabindex]=\\\"disabled ? -1 : tabIndex\\\"\\n        [attr.aria-pressed]=\\\"checked\\\"\\n        [disabled]=\\\"disabled || null\\\"\\n        [attr.name]=\\\"name || null\\\"\\n        [attr.aria-label]=\\\"ariaLabel\\\"\\n        [attr.aria-labelledby]=\\\"ariaLabelledby\\\"\\n        (click)=\\\"_onButtonClick()\\\">\\n  <span class=\\\"mat-button-toggle-label-content\\\">\\n    <ng-content></ng-content>\\n  </span>\\n</button>\\n\\n<span class=\\\"mat-button-toggle-focus-overlay\\\"></span>\\n<span class=\\\"mat-button-toggle-ripple\\\" matRipple\\n     [matRippleTrigger]=\\\"button\\\"\\n     [matRippleDisabled]=\\\"this.disableRipple || this.disabled\\\">\\n</span>\\n\",\n                encapsulation: ViewEncapsulation.None,\n                exportAs: 'matButtonToggle',\n                changeDetection: ChangeDetectionStrategy.OnPush,\n                inputs: ['disableRipple'],\n                host: {\n                    '[class.mat-button-toggle-standalone]': '!buttonToggleGroup',\n                    '[class.mat-button-toggle-checked]': 'checked',\n                    '[class.mat-button-toggle-disabled]': 'disabled',\n                    '[class.mat-button-toggle-appearance-standard]': 'appearance === \"standard\"',\n                    'class': 'mat-button-toggle',\n                    '[attr.aria-label]': 'null',\n                    '[attr.aria-labelledby]': 'null',\n                    '[attr.id]': 'id',\n                    '[attr.name]': 'null',\n                    '(focus)': 'focus()',\n                    'role': 'presentation'\n                },\n                styles: [\".mat-button-toggle-standalone,.mat-button-toggle-group{position:relative;display:inline-flex;flex-direction:row;white-space:nowrap;overflow:hidden;border-radius:2px;-webkit-tap-highlight-color:transparent}.cdk-high-contrast-active .mat-button-toggle-standalone,.cdk-high-contrast-active .mat-button-toggle-group{outline:solid 1px}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.mat-button-toggle-group-appearance-standard{border-radius:4px}.cdk-high-contrast-active .mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.cdk-high-contrast-active .mat-button-toggle-group-appearance-standard{outline:0}.mat-button-toggle-vertical{flex-direction:column}.mat-button-toggle-vertical .mat-button-toggle-label-content{display:block}.mat-button-toggle{white-space:nowrap;position:relative}.mat-button-toggle .mat-icon svg{vertical-align:top}.mat-button-toggle.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:1}.cdk-high-contrast-active .mat-button-toggle.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:.5}.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{opacity:.04}.mat-button-toggle-appearance-standard.cdk-keyboard-focused:not(.mat-button-toggle-disabled) .mat-button-toggle-focus-overlay{opacity:.12}.cdk-high-contrast-active .mat-button-toggle-appearance-standard.cdk-keyboard-focused:not(.mat-button-toggle-disabled) .mat-button-toggle-focus-overlay{opacity:.5}@media(hover: none){.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{display:none}}.mat-button-toggle-label-content{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;display:inline-block;line-height:36px;padding:0 16px;position:relative}.mat-button-toggle-appearance-standard .mat-button-toggle-label-content{padding:0 12px}.mat-button-toggle-label-content>*{vertical-align:middle}.mat-button-toggle-focus-overlay{border-radius:inherit;pointer-events:none;opacity:0;top:0;left:0;right:0;bottom:0;position:absolute}.mat-button-toggle-checked .mat-button-toggle-focus-overlay{border-bottom:solid 36px}.cdk-high-contrast-active .mat-button-toggle-checked .mat-button-toggle-focus-overlay{opacity:.5;height:0}.cdk-high-contrast-active .mat-button-toggle-checked.mat-button-toggle-appearance-standard .mat-button-toggle-focus-overlay{border-bottom:solid 500px}.mat-button-toggle .mat-button-toggle-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-button-toggle-button{border:0;background:none;color:inherit;padding:0;margin:0;font:inherit;outline:none;width:100%;cursor:pointer}.mat-button-toggle-disabled .mat-button-toggle-button{cursor:default}.mat-button-toggle-button::-moz-focus-inner{border:0}\\n\"]\n            }]\n    }], function () { return [{ type: MatButtonToggleGroup, decorators: [{\n                type: Optional\n            }, {\n                type: Inject,\n                args: [MAT_BUTTON_TOGGLE_GROUP]\n            }] }, { type: ɵngcc0.ChangeDetectorRef }, { type: ɵngcc0.ElementRef }, { type: ɵngcc1.FocusMonitor }, { type: String, decorators: [{\n                type: Attribute,\n                args: ['tabindex']\n            }] }, { type: undefined, decorators: [{\n                type: Optional\n            }, {\n                type: Inject,\n                args: [MAT_BUTTON_TOGGLE_DEFAULT_OPTIONS]\n            }] }]; }, { ariaLabelledby: [{\n            type: Input,\n            args: ['aria-labelledby']\n        }], change: [{\n            type: Output\n        }], tabIndex: [{\n            type: Input\n        }], appearance: [{\n            type: Input\n        }], checked: [{\n            type: Input\n        }], disabled: [{\n            type: Input\n        }], id: [{\n            type: Input\n        }], name: [{\n            type: Input\n        }], ariaLabel: [{\n            type: Input,\n            args: ['aria-label']\n        }], _buttonElement: [{\n            type: ViewChild,\n            args: ['button']\n        }], value: [{\n            type: Input\n        }] }); })();\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nclass MatButtonToggleModule {\n}\nMatButtonToggleModule.ɵfac = function MatButtonToggleModule_Factory(t) { return new (t || MatButtonToggleModule)(); };\nMatButtonToggleModule.ɵmod = /*@__PURE__*/ ɵngcc0.ɵɵdefineNgModule({ type: MatButtonToggleModule });\nMatButtonToggleModule.ɵinj = /*@__PURE__*/ ɵngcc0.ɵɵdefineInjector({ imports: [[MatCommonModule, MatRippleModule], MatCommonModule] });\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(MatButtonToggleModule, [{\n        type: NgModule,\n        args: [{\n                imports: [MatCommonModule, MatRippleModule],\n                exports: [MatCommonModule, MatButtonToggleGroup, MatButtonToggle],\n                declarations: [MatButtonToggleGroup, MatButtonToggle]\n            }]\n    }], null, null); })();\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(MatButtonToggleModule, { declarations: function () { return [MatButtonToggleGroup, MatButtonToggle]; }, imports: function () { return [MatCommonModule, MatRippleModule]; }, exports: function () { return [MatCommonModule, MatButtonToggleGroup, MatButtonToggle]; } }); })();\n\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { MAT_BUTTON_TOGGLE_DEFAULT_OPTIONS, MAT_BUTTON_TOGGLE_GROUP, MAT_BUTTON_TOGGLE_GROUP_VALUE_ACCESSOR, MatButtonToggle, MatButtonToggleChange, MatButtonToggleGroup, MatButtonToggleModule };\n\n//# sourceMappingURL=button-toggle.js.map","import { Component } from '@angular/core';\n\n@Component({\n    selector: 'placeos-book',\n    template: `\n        <topbar></topbar>\n        <div class=\"flex-1 flex sm:flex-row flex-col-reverse h-1/2\">\n            <nav-menu class=\"relative z-10\"></nav-menu>\n            <main\n                class=\"relative flex flex-col flex-1 h-1/2 sm:h-auto overflow-hidden\"\n            >\n                <router-outlet></router-outlet>\n            </main>\n        </div>\n    `,\n    styles: [\n        `\n            :host {\n                display: flex;\n                flex-direction: column;\n                height: 100%;\n                width: 100%;\n            }\n        `,\n    ],\n})\nexport class BookComponent {}\n","export default class QrScanner {\n    /* async */\n    static hasCamera() {\n        if (!navigator.mediaDevices) return Promise.resolve(false);\n        // note that enumerateDevices can always be called and does not prompt the user for permission. However, device\n        // labels are only readable if served via https and an active media stream exists or permanent permission is\n        // given. That doesn't matter for us though as we don't require labels.\n        return navigator.mediaDevices.enumerateDevices()\n            .then(devices => devices.some(device => device.kind === 'videoinput'))\n            .catch(() => false);\n    }\n\n    constructor(\n        video,\n        onDecode,\n        canvasSizeOrOnDecodeError = this._onDecodeError.bind(this),\n        canvasSize = QrScanner.DEFAULT_CANVAS_SIZE,\n        preferredFacingMode = 'environment'\n    ) {\n        this.$video = video;\n        this.$canvas = document.createElement('canvas');\n        this._onDecode = onDecode;\n        this._preferredFacingMode = preferredFacingMode;\n        this._active = false;\n        this._paused = false;\n        this._flashOn = false;\n\n        if (typeof canvasSizeOrOnDecodeError === 'number') {\n            // legacy function signature where canvas size is the third argument\n            canvasSize = canvasSizeOrOnDecodeError;\n            console.warn('You\\'re using a deprecated version of the QrScanner constructor which will be removed in '\n                + 'the future');\n        } else {\n            this._onDecodeError = canvasSizeOrOnDecodeError;\n        }\n\n        this.$canvas.width = canvasSize;\n        this.$canvas.height = canvasSize;\n        this._sourceRect = {\n            x: 0,\n            y: 0,\n            width: canvasSize,\n            height: canvasSize\n        };\n\n        this._updateSourceRect = this._updateSourceRect.bind(this);\n        this._onPlay = this._onPlay.bind(this);\n        this._onVisibilityChange = this._onVisibilityChange.bind(this);\n\n        // Allow inline playback on iPhone instead of requiring full screen playback,\n        // see https://webkit.org/blog/6784/new-video-policies-for-ios/\n        this.$video.playsInline = true;\n        // Allow play() on iPhone without requiring a user gesture. Should not really be needed as camera stream\n        // includes no audio, but just to be safe.\n        this.$video.muted = true;\n        this.$video.disablePictureInPicture = true;\n        this.$video.addEventListener('loadedmetadata', this._updateSourceRect);\n        this.$video.addEventListener('play', this._onPlay);\n        document.addEventListener('visibilitychange', this._onVisibilityChange);\n\n        this._qrEnginePromise = QrScanner.createQrEngine();\n    }\n\n    /* async */\n    hasFlash() {\n        if (!('ImageCapture' in window)) {\n            return Promise.resolve(false);\n        }\n\n        const track = this.$video.srcObject ? this.$video.srcObject.getVideoTracks()[0] : null;\n        if (!track) {\n            return Promise.reject('Camera not started or not available');\n        }\n\n        const imageCapture = new ImageCapture(track);\n        return imageCapture.getPhotoCapabilities()\n            .then((result) => {\n                return result.fillLightMode.includes('flash');\n            })\n            .catch((error) => {\n                console.warn(error);\n                return false;\n            });\n    }\n\n    isFlashOn() {\n      return this._flashOn;\n    }\n\n    /* async */\n    toggleFlash() {\n      return this._setFlash(!this._flashOn);\n    }\n\n    /* async */\n    turnFlashOff() {\n      return this._setFlash(false);\n    }\n\n    /* async */\n    turnFlashOn() {\n      return this._setFlash(true);\n    }\n\n    destroy() {\n        this.$video.removeEventListener('loadedmetadata', this._updateSourceRect);\n        this.$video.removeEventListener('play', this._onPlay);\n        document.removeEventListener('visibilitychange', this._onVisibilityChange);\n\n        this.stop();\n        QrScanner._postWorkerMessage(this._qrEnginePromise, 'close');\n    }\n\n    /* async */\n    start() {\n        if (this._active && !this._paused) {\n            return Promise.resolve();\n        }\n        if (window.location.protocol !== 'https:') {\n            // warn but try starting the camera anyways\n            console.warn('The camera stream is only accessible if the page is transferred via https.');\n        }\n        this._active = true;\n        this._paused = false;\n        if (document.hidden) {\n            // camera will be started as soon as tab is in foreground\n            return Promise.resolve();\n        }\n        clearTimeout(this._offTimeout);\n        this._offTimeout = null;\n        if (this.$video.srcObject) {\n            // camera stream already/still set\n            this.$video.play();\n            return Promise.resolve();\n        }\n\n        let facingMode = this._preferredFacingMode;\n        return this._getCameraStream(facingMode, true)\n            .catch(() => {\n                // We (probably) don't have a camera of the requested facing mode\n                facingMode = facingMode === 'environment' ? 'user' : 'environment';\n                return this._getCameraStream(); // throws if camera is not accessible (e.g. due to not https)\n            })\n            .then(stream => {\n                // Try to determine the facing mode from the stream, otherwise use our guess. Note that the guess is not\n                // always accurate as Safari returns cameras of different facing mode, even for exact constraints.\n                facingMode = this._getFacingMode(stream) || facingMode;\n                this.$video.srcObject = stream;\n                this.$video.play();\n                this._setVideoMirror(facingMode);\n            })\n            .catch(e => {\n                this._active = false;\n                throw e;\n            });\n    }\n\n    stop() {\n        this.pause();\n        this._active = false;\n    }\n\n    pause() {\n        this._paused = true;\n        if (!this._active) {\n            return;\n        }\n        this.$video.pause();\n        if (this._offTimeout) {\n            return;\n        }\n        this._offTimeout = setTimeout(() => {\n            const tracks = this.$video.srcObject ? this.$video.srcObject.getTracks() : [];\n            for (const track of tracks) {\n                track.stop(); //  note that this will also automatically turn the flashlight off\n            }\n            this.$video.srcObject = null;\n            this._offTimeout = null;\n        }, 300);\n    }\n\n    /* async */\n    static scanImage(imageOrFileOrUrl, sourceRect=null, qrEngine=null, canvas=null, fixedCanvasSize=false,\n                     alsoTryWithoutSourceRect=false) {\n        const gotExternalWorker = qrEngine instanceof Worker;\n\n        let promise = Promise.all([\n            qrEngine || QrScanner.createQrEngine(),\n            QrScanner._loadImage(imageOrFileOrUrl),\n        ]).then(([engine, image]) => {\n            qrEngine = engine;\n            let canvasContext;\n            [canvas, canvasContext] = this._drawToCanvas(image, sourceRect, canvas, fixedCanvasSize);\n\n            if (qrEngine instanceof Worker) {\n                if (!gotExternalWorker) {\n                    // Enable scanning of inverted color qr codes. Not using _postWorkerMessage as it's async\n                    qrEngine.postMessage({ type: 'inversionMode', data: 'both' });\n                }\n                return new Promise((resolve, reject) => {\n                    let timeout, onMessage, onError;\n                    onMessage = event => {\n                        if (event.data.type !== 'qrResult') {\n                            return;\n                        }\n                        qrEngine.removeEventListener('message', onMessage);\n                        qrEngine.removeEventListener('error', onError);\n                        clearTimeout(timeout);\n                        if (event.data.data !== null) {\n                            resolve(event.data.data);\n                        } else {\n                            reject(QrScanner.NO_QR_CODE_FOUND);\n                        }\n                    };\n                    onError = (e) => {\n                        qrEngine.removeEventListener('message', onMessage);\n                        qrEngine.removeEventListener('error', onError);\n                        clearTimeout(timeout);\n                        const errorMessage = !e ? 'Unknown Error' : (e.message || e);\n                        reject('Scanner error: ' + errorMessage);\n                    };\n                    qrEngine.addEventListener('message', onMessage);\n                    qrEngine.addEventListener('error', onError);\n                    timeout = setTimeout(() => onError('timeout'), 10000);\n                    const imageData = canvasContext.getImageData(0, 0, canvas.width, canvas.height);\n                    qrEngine.postMessage({\n                        type: 'decode',\n                        data: imageData\n                    }, [imageData.data.buffer]);\n                });\n            } else {\n                return new Promise((resolve, reject) => {\n                    const timeout = setTimeout(() => reject('Scanner error: timeout'), 10000);\n                    qrEngine.detect(canvas).then(scanResults => {\n                        if (!scanResults.length) {\n                            reject(QrScanner.NO_QR_CODE_FOUND);\n                        } else {\n                            resolve(scanResults[0].rawValue);\n                        }\n                    }).catch((e) => reject('Scanner error: ' + (e.message || e))).finally(() => clearTimeout(timeout));\n                });\n            }\n        });\n\n        if (sourceRect && alsoTryWithoutSourceRect) {\n            promise = promise.catch(() => QrScanner.scanImage(imageOrFileOrUrl, null, qrEngine, canvas, fixedCanvasSize));\n        }\n\n        promise = promise.finally(() => {\n            if (gotExternalWorker) return;\n            QrScanner._postWorkerMessage(qrEngine, 'close');\n        });\n\n        return promise;\n    }\n\n    setGrayscaleWeights(red, green, blue, useIntegerApproximation = true) {\n        // Note that for the native BarcodeDecoder, this is a no-op. However, the native implementations work also\n        // well with colored qr codes.\n        QrScanner._postWorkerMessage(\n            this._qrEnginePromise,\n            'grayscaleWeights',\n            { red, green, blue, useIntegerApproximation }\n        );\n    }\n\n    setInversionMode(inversionMode) {\n        // Note that for the native BarcodeDecoder, this is a no-op. However, the native implementations scan normal\n        // and inverted qr codes by default\n        QrScanner._postWorkerMessage(this._qrEnginePromise, 'inversionMode', inversionMode);\n    }\n\n    /* async */\n    static createQrEngine(workerPath = QrScanner.WORKER_PATH) {\n        return ('BarcodeDetector' in window ? BarcodeDetector.getSupportedFormats() : Promise.resolve([]))\n            .then((supportedFormats) => supportedFormats.indexOf('qr_code') !== -1\n                ? new BarcodeDetector({ formats: ['qr_code'] })\n                : new Worker(workerPath)\n            );\n    }\n\n    _onPlay() {\n        this._updateSourceRect();\n        this._scanFrame();\n    }\n\n    _onVisibilityChange() {\n        if (document.hidden) {\n            this.pause();\n        } else if (this._active) {\n            this.start();\n        }\n    }\n\n    _updateSourceRect() {\n        const smallestDimension = Math.min(this.$video.videoWidth, this.$video.videoHeight);\n        const sourceRectSize = Math.round(2 / 3 * smallestDimension);\n        this._sourceRect.width = this._sourceRect.height = sourceRectSize;\n        this._sourceRect.x = (this.$video.videoWidth - sourceRectSize) / 2;\n        this._sourceRect.y = (this.$video.videoHeight - sourceRectSize) / 2;\n    }\n\n    _scanFrame() {\n        if (!this._active || this.$video.paused || this.$video.ended) return false;\n        // using requestAnimationFrame to avoid scanning if tab is in background\n        requestAnimationFrame(() => {\n            if (this.$video.readyState <= 1) {\n                // Skip scans until the video is ready as drawImage() only works correctly on a video with readyState\n                // > 1, see https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/drawImage#Notes.\n                // This also avoids false positives for videos paused after a successful scan which remains visible on\n                // the canvas until the video is started again and ready.\n                this._scanFrame();\n                return;\n            }\n            this._qrEnginePromise\n                .then((qrEngine) => QrScanner.scanImage(this.$video, this._sourceRect, qrEngine, this.$canvas, true))\n                .then(this._onDecode, (error) => {\n                    if (!this._active) return;\n                    const errorMessage = error.message || error;\n                    if (errorMessage.indexOf('service unavailable') !== -1) {\n                        // When the native BarcodeDetector crashed, create a new one\n                        this._qrEnginePromise = QrScanner.createQrEngine();\n                    }\n                    this._onDecodeError(error);\n                })\n                .then(() => this._scanFrame());\n        });\n    }\n\n    _onDecodeError(error) {\n        // default error handler; can be overwritten in the constructor\n        if (error === QrScanner.NO_QR_CODE_FOUND) return;\n        console.log(error);\n    }\n\n    _getCameraStream(facingMode, exact = false) {\n        const constraintsToTry = [{\n            width: { min: 1024 }\n        }, {\n            width: { min: 768 }\n        }, {}];\n\n        if (facingMode) {\n            if (exact) {\n                facingMode = { exact: facingMode };\n            }\n            constraintsToTry.forEach(constraint => constraint.facingMode = facingMode);\n        }\n        return this._getMatchingCameraStream(constraintsToTry);\n    }\n\n    _getMatchingCameraStream(constraintsToTry) {\n        if (!navigator.mediaDevices || constraintsToTry.length === 0) {\n            return Promise.reject('Camera not found.');\n        }\n        return navigator.mediaDevices.getUserMedia({\n            video: constraintsToTry.shift()\n        }).catch(() => this._getMatchingCameraStream(constraintsToTry));\n    }\n\n    /* async */\n    _setFlash(on) {\n        return this.hasFlash().then((hasFlash) => {\n            if (!hasFlash) return Promise.reject('No flash available');\n            // Note that the video track is guaranteed to exist at this point\n            return this.$video.srcObject.getVideoTracks()[0].applyConstraints({\n                advanced: [{ torch: on }],\n            });\n        }).then(() => this._flashOn = on);\n    }\n\n    _setVideoMirror(facingMode) {\n        // in user facing mode mirror the video to make it easier for the user to position the QR code\n        const scaleFactor = facingMode==='user'? -1 : 1;\n        this.$video.style.transform = 'scaleX(' + scaleFactor + ')';\n    }\n\n    _getFacingMode(videoStream) {\n        const videoTrack = videoStream.getVideoTracks()[0];\n        if (!videoTrack) return null; // unknown\n        // inspired by https://github.com/JodusNodus/react-qr-reader/blob/master/src/getDeviceId.js#L13\n        return /rear|back|environment/i.test(videoTrack.label)\n            ? 'environment'\n            : /front|user|face/i.test(videoTrack.label)\n                ? 'user'\n                : null; // unknown\n    }\n\n    static _drawToCanvas(image, sourceRect=null, canvas=null, fixedCanvasSize=false) {\n        canvas = canvas || document.createElement('canvas');\n        const sourceRectX = sourceRect && sourceRect.x? sourceRect.x : 0;\n        const sourceRectY = sourceRect && sourceRect.y? sourceRect.y : 0;\n        const sourceRectWidth = sourceRect && sourceRect.width? sourceRect.width : image.width || image.videoWidth;\n        const sourceRectHeight = sourceRect && sourceRect.height? sourceRect.height : image.height || image.videoHeight;\n        if (!fixedCanvasSize && (canvas.width !== sourceRectWidth || canvas.height !== sourceRectHeight)) {\n            canvas.width = sourceRectWidth;\n            canvas.height = sourceRectHeight;\n        }\n        const context = canvas.getContext('2d', { alpha: false });\n        context.imageSmoothingEnabled = false; // gives less blurry images\n        context.drawImage(image, sourceRectX, sourceRectY, sourceRectWidth, sourceRectHeight, 0, 0, canvas.width, canvas.height);\n        return [canvas, context];\n    }\n\n    /* async */\n    static _loadImage(imageOrFileOrBlobOrUrl) {\n        if (imageOrFileOrBlobOrUrl instanceof HTMLCanvasElement || imageOrFileOrBlobOrUrl instanceof HTMLVideoElement\n            || window.ImageBitmap && imageOrFileOrBlobOrUrl instanceof window.ImageBitmap\n            || window.OffscreenCanvas && imageOrFileOrBlobOrUrl instanceof window.OffscreenCanvas) {\n            return Promise.resolve(imageOrFileOrBlobOrUrl);\n        } else if (imageOrFileOrBlobOrUrl instanceof Image) {\n            return QrScanner._awaitImageLoad(imageOrFileOrBlobOrUrl).then(() => imageOrFileOrBlobOrUrl);\n        } else if (imageOrFileOrBlobOrUrl instanceof File || imageOrFileOrBlobOrUrl instanceof Blob\n            || imageOrFileOrBlobOrUrl instanceof URL || typeof(imageOrFileOrBlobOrUrl)==='string') {\n            const image = new Image();\n            if (imageOrFileOrBlobOrUrl instanceof File || imageOrFileOrBlobOrUrl instanceof Blob) {\n                image.src = URL.createObjectURL(imageOrFileOrBlobOrUrl);\n            } else {\n                image.src = imageOrFileOrBlobOrUrl;\n            }\n            return QrScanner._awaitImageLoad(image).then(() => {\n                if (imageOrFileOrBlobOrUrl instanceof File || imageOrFileOrBlobOrUrl instanceof Blob) {\n                    URL.revokeObjectURL(image.src);\n                }\n                return image;\n            });\n        } else {\n            return Promise.reject('Unsupported image type.');\n        }\n    }\n\n    /* async */\n    static _awaitImageLoad(image) {\n        return new Promise((resolve, reject) => {\n            if (image.complete && image.naturalWidth!==0) {\n                // already loaded\n                resolve();\n            } else {\n                let onLoad, onError;\n                onLoad = () => {\n                    image.removeEventListener('load', onLoad);\n                    image.removeEventListener('error', onError);\n                    resolve();\n                };\n                onError = () => {\n                    image.removeEventListener('load', onLoad);\n                    image.removeEventListener('error', onError);\n                    reject('Image load error');\n                };\n                image.addEventListener('load', onLoad);\n                image.addEventListener('error', onError);\n            }\n        });\n    }\n\n    /* async */\n    static _postWorkerMessage(qrEngineOrQrEnginePromise, type, data) {\n        return Promise.resolve(qrEngineOrQrEnginePromise).then((qrEngine) => {\n            if (!(qrEngine instanceof Worker)) return;\n            qrEngine.postMessage({ type, data });\n        });\n    }\n}\nQrScanner.DEFAULT_CANVAS_SIZE = 400;\nQrScanner.NO_QR_CODE_FOUND = 'No QR code found';\nQrScanner.WORKER_PATH = 'qr-scanner-worker.min.js';\n","import {\n    Component,\n    OnInit,\n    Output,\n    EventEmitter,\n    ViewChild,\n    ElementRef,\n    OnDestroy,\n} from '@angular/core';\nimport { Router } from '@angular/router';\nimport QrScanner from 'qr-scanner';\n\n@Component({\n    selector: 'book-code-flow',\n    template: `\n        <div\n            class=\"flex-1 overflow-hidden flex items-center justify-center bg-black relative\"\n        >\n            <video\n                class=\"min-w-full min-h-full object-cover\"\n                id=\"video\"\n                #video\n            ></video>\n            <div\n                class=\"absolute text-white text-center inset-0 flex flex-col items-center justify-center\"\n            >\n                <div\n                    class=\"flex flex-col z-10 justify-end items-center relative\"\n                    *ngIf=\"is_scanning\"\n                >\n                    <h2 class=\"text-3xl mb-1 uppercase subpixel-antialiased\">\n                        Scan QR Code\n                    </h2>\n                    <span class=\" mb-4 \">\n                        Scan the QR code outisde a PlaceOS room or space.\n                    </span>\n                </div>\n                <div\n                    class=\"flex flex-col z-10 justify-end items-center relative\"\n                    *ngIf=\"!is_scanning\"\n                >\n                    <h2 class=\"text-3xl mb-1 uppercase subpixel-antialiased\">\n                        Enter Room ID\n                    </h2>\n                    <span class=\"mb-4\">\n                        Enter the room ID number outisde a PlaceOS room or\n                        space.\n                    </span>\n                </div>\n                <div class=\"flex items-center justify-center\">\n                    <div\n                        box\n                        class=\"rounded-2xl h-64 w-64 transition-all flex items-center justify-center p-8 m-8 space-x-2\"\n                        [class.input]=\"!is_scanning\"\n                    >\n                        <span class=\"uppercase\">Booking ID</span>\n                        <input\n                            matInput\n                            class=\"border-none bg-none w-full text-3xl text-left\"\n                            [(ngModel)]=\"room_code\"\n                            name=\"booking-id\"\n                            placeholder=\"e.g. 12102910\"\n                        />\n                    </div>\n                </div>\n                <div\n                    class=\"m-4 p-2 flex items-center space-x-2 bg-white bg-opacity-50 rounded\"\n                >\n                    <button\n                        mat-button\n                        [class]=\"\n                            'flex-1 text-black border-none w-40 ' +\n                            (is_scanning\n                                ? 'bg-white'\n                                : 'bg-transparent hover:bg-white bg-opacity-50')\n                        \"\n                        (click)=\"is_scanning = true\"\n                    >\n                        Scan Code\n                    </button>\n                    <button\n                        mat-button\n                        [class]=\"\n                            'flex-1 text-black border-none w-40 ' +\n                            (!is_scanning\n                                ? 'bg-white'\n                                : 'bg-transparent hover:bg-white bg-opacity-50')\n                        \"\n                        (click)=\"is_scanning = false\"\n                    >\n                        Enter Code\n                    </button>\n                </div>\n            </div>\n        </div>\n    `,\n    styles: [\n        `\n            :host {\n                width: 100%;\n                height: 100vh;\n                display: flex;\n                flex-direction: column;\n            }\n\n            [box] {\n                box-shadow: 0px 0px 0px 100vw rgba(0, 0, 0, 0.5);\n            }\n\n            [box] > * {\n                display: none;\n            }\n\n            [box].input {\n                width: 32rem !important;\n                max-width: calc(100% - 2rem) !important;\n                padding: 1rem !important;\n                height: 4rem !important;\n                color: black !important;\n                background: white;\n                box-shadow: 0px 0px 0px 100vw rgba(0, 0, 0, 0.8);\n            }\n\n            [box].input > * {\n                display: initial;\n            }\n\n            [box] span {\n                font-family: var(--heading-font);\n                font-weight: 500;\n                text-transform: uppercase;\n                letter-spacing: 0.05em;\n            }\n        `,\n    ],\n})\nexport class BookCodeFlowComponent implements OnInit, OnDestroy {\n    /** Boolean to toggle scan/code */\n    public is_scanning = true;\n    /** Room Code input value */\n    public room_code: string;\n    /** Menu event */\n    @Output() public menu = new EventEmitter(false);\n    /** Video element to emit camera feed */\n    @ViewChild('video', { static: true })\n    private _video_el: ElementRef<HTMLVideoElement>;\n\n    private _qr_scanner;\n\n    constructor(private _router: Router) {}\n\n    public ngOnDestroy() {\n        if (this._video_el.nativeElement.srcObject) {\n            (this._video_el.nativeElement.srcObject as any)\n                .getTracks()\n                .forEach((track) => track?.stop());\n        }\n        this._qr_scanner.stop();\n    }\n\n    public ngOnInit(): void {\n        if (navigator.mediaDevices.getUserMedia) {\n            navigator.mediaDevices\n                .getUserMedia({ video: true })\n                .then(\n                    (stream) =>\n                        (this._video_el.nativeElement.srcObject = stream)\n                )\n                .catch((e) =>\n                    console.error('Unable to fetch media devices!', e)\n                );\n        }\n        this._qr_scanner = new QrScanner(this._video_el.nativeElement, (r) =>\n            this.handleQrCode(r)\n        );\n        this._qr_scanner.start();\n    }\n\n    private handleQrCode(result: string) {\n        const url = result;\n        const hashindex = url.indexOf('/#/');\n        // could just whole page redirect to url\n        if (hashindex > 0) {\n            const regex = /[?&]([^=#]+)=([^&#]*)/g;\n            const params = {};\n            let match;\n            while ((match = regex.exec(url))) {\n                params[match[1]] = match[2];\n            }\n            this._router.navigate([url.split('/#')[1].split('?')[0]], params);\n        }\n    }\n}\n","import { Component, Input } from '@angular/core';\nimport { FormGroup } from '@angular/forms';\nimport { BookingStateService } from '@placeos/bookings';\nimport { SettingsService } from '@placeos/common';\nimport { OrganisationService } from '@placeos/organisation';\n\n@Component({\n    selector: 'detailed-book-desks-form',\n    template: `\n        <form *ngIf=\"form\" [formGroup]=\"form\">\n            <div\n                class=\"w-[640px] max-w-[calc(100%-2rem)] mx-auto mb-4\"\n                *ngIf=\"allow_groups\"\n            >\n                <mat-button-toggle-group\n                    class=\"w-full\"\n                    [ngModel]=\"(options | async)?.group ? 'group' : 'single'\"\n                    (ngModelChange)=\"\n                        setOptions({\n                            group: $event === 'group'\n                        })\n                    \"\n                    [ngModelOptions]=\"{ standalone: true }\"\n                >\n                    <mat-button-toggle class=\"w-1/2\" value=\"single\">\n                        Single\n                    </mat-button-toggle>\n                    <mat-button-toggle class=\"w-1/2\" value=\"group\">\n                        Group\n                    </mat-button-toggle>\n                </mat-button-toggle-group>\n            </div>\n            <div\n                class=\"flex flex-col sm:flex-row space-x-0 sm:space-x-2 w-[640px] max-w-[calc(100%-2rem)] mx-auto\"\n            >\n                <div class=\"flex flex-col flex-1 w-full sm:w-1/4\">\n                    <label>Date</label>\n                    <a-date-field formControlName=\"date\">\n                        Date and time must be in the future\n                    </a-date-field>\n                </div>\n                <div\n                    class=\"flex flex-col flex-1 w-full sm:w-1/4\"\n                    *ngIf=\"(buildings | async)?.length > 1\"\n                >\n                    <label>Building</label>\n                    <mat-form-field appearance=\"outline\">\n                        <mat-select\n                            placeholder=\"Select building\"\n                            [(ngModel)]=\"building\"\n                            (ngModelChange)=\"\n                                setOptions({\n                                    zone_id: $event?.id\n                                })\n                            \"\n                            [ngModelOptions]=\"{ standalone: true }\"\n                        >\n                            <mat-option\n                                *ngFor=\"let bld of buildings | async\"\n                                [value]=\"bld\"\n                            >\n                                {{ bld.display_name || bld.name }}\n                            </mat-option>\n                        </mat-select>\n                    </mat-form-field>\n                </div>\n                <div\n                    class=\"flex flex-col flex-1 w-full sm:w-1/4\"\n                    *ngIf=\"(levels | async)?.length > 1\"\n                >\n                    <label>Level</label>\n                    <mat-form-field appearance=\"outline\">\n                        <mat-select\n                            placeholder=\"Any Level\"\n                            ngModel\n                            [disabled]=\"!building\"\n                            (ngModelChange)=\"\n                                setOptions({\n                                    zone_id: $event || building.id\n                                })\n                            \"\n                            [ngModelOptions]=\"{ standalone: true }\"\n                        >\n                            <mat-option\n                                *ngFor=\"let lvl of levels | async\"\n                                [value]=\"lvl.id\"\n                            >\n                                {{ lvl.display_name || lvl.name }}\n                            </mat-option>\n                        </mat-select>\n                    </mat-form-field>\n                </div>\n            </div>\n            <div\n                class=\"flex flex-col flex-1 w-[640px] max-w-[calc(100%-2rem)] mx-auto\"\n            >\n                <label>Reason</label>\n                <mat-form-field class=\"w-full\" appearance=\"outline\">\n                    <input\n                        matInput\n                        formControlName=\"description\"\n                        placeholder=\"Reason for booking...\"\n                    />\n                </mat-form-field>\n            </div>\n            <div\n                class=\"flex flex-col flex-1 w-[640px] max-w-[calc(100%-2rem)] mx-auto\"\n                *ngIf=\"(options | async)?.group\"\n            >\n                <label>Group Members</label>\n                <a-user-list-field\n                    [simple]=\"true\"\n                    [ngModel]=\"(options | async)?.members || []\"\n                    (ngModelChange)=\"setOptions({ members: $event })\"\n                    [ngModelOptions]=\"{ standalone: true }\"\n                ></a-user-list-field>\n            </div>\n            <div\n                class=\"flex flex-col sm:flex-row space-x-0 sm:space-x-2 w-[640px] max-w-[calc(100%-2rem)] mx-auto\"\n                *ngIf=\"can_recurr\"\n            >\n                <div class=\"flex flex-col flex-1 w-full sm:w-1/3\">\n                    <label>Recurrence Period</label>\n                    <mat-form-field appearance=\"outline\">\n                        <mat-select\n                            [ngModel]=\"(options | async)?.recurrence_pattern\"\n                            (ngModelChange)=\"setOptions({ pattern: $event })\"\n                            [ngModelOptions]=\"{ standalone: true }\"\n                            placeholder=\"None\"\n                        >\n                            <mat-option value=\"none\">None</mat-option>\n                            <mat-option\n                                *ngFor=\"let opt of recurrence_options\"\n                                [value]=\"opt\"\n                            >\n                                <span class=\"capitalize\">{{ opt }}</span>\n                            </mat-option>\n                        </mat-select>\n                    </mat-form-field>\n                </div>\n                <div class=\"flex flex-col flex-1 w-full sm:w-1/3\">\n                    <label>Recurrence End</label>\n                    <a-date-field\n                        [disabled]=\"\n                            !(options | async)?.pattern ||\n                            (options | async)?.pattern === 'none'\n                        \"\n                        [ngModel]=\"\n                            (options | async)?.recurr_end || form?.value?.date\n                        \"\n                        (ngModelChange)=\"\n                            setOptions({\n                                recurr_end: $event\n                            })\n                        \"\n                        [ngModelOptions]=\"{ standalone: true }\"\n                    >\n                        Date and time must be in the future\n                    </a-date-field>\n                </div>\n            </div>\n            <div\n                class=\"flex flex-col flex-1 w-[640px] max-w-[calc(100%-2rem)] mx-auto\"\n                *ngIf=\"(features | async)?.length\"\n            >\n                <label>Desk Features</label>\n                <mat-form-field class=\"w-full\" appearance=\"outline\">\n                    <mat-select\n                        multiple\n                        [ngModel]=\"(options | async)?.features || []\"\n                        (ngModelChange)=\"\n                            setOptions({\n                                features: $event || []\n                            })\n                        \"\n                        [ngModelOptions]=\"{ standalone: true }\"\n                        placeholder=\"Any Feature\"\n                    >\n                        <mat-option\n                            *ngFor=\"let opt of features | async\"\n                            class=\"capitalize\"\n                            [value]=\"opt\"\n                        >\n                            {{ opt }}\n                        </mat-option>\n                    </mat-select>\n                </mat-form-field>\n            </div>\n        </form>\n    `,\n    styles: [``],\n})\nexport class DeskFlowDetailedFormComponent {\n    @Input() public form: FormGroup;\n    /** List of available buildings to select */\n    public readonly buildings = this._org.building_list;\n    /** List of available levels for the selected building */\n    public readonly levels = this._org.active_levels;\n    /** List of set options for desk booking */\n    public readonly options = this._state.options;\n    /** List of set options for desk booking */\n    public readonly features = this._state.features;\n\n    public readonly recurrence_options = ['daily', 'weekly', 'monthly'];\n\n    public get building() {\n        return this._org.building;\n    }\n    public set building(bld) {\n        this._org.building = bld;\n    }\n\n    public readonly setOptions = (o) => this._state.setOptions(o);\n\n    public get can_recurr() {\n        return this._settings.get('app.desks.recurrence_allowed');\n    }\n\n    public get allow_groups() {\n        return this._settings.get('app.desks.allow_groups');\n    }\n\n    constructor(\n        private _state: BookingStateService,\n        private _org: OrganisationService,\n        private _settings: SettingsService\n    ) {}\n}\n","import { Component, OnInit } from '@angular/core';\nimport { BookingStateService } from '@placeos/bookings';\nimport { BaseClass, formatRecurrence } from '@placeos/common';\nimport { ExploreStateService } from '@placeos/explore';\nimport { Desk } from '@placeos/organisation';\nimport { format } from 'date-fns';\nimport { BehaviorSubject, combineLatest, of } from 'rxjs';\nimport { debounceTime, map, startWith } from 'rxjs/operators';\n\n@Component({\n    selector: 'desk-flow-map',\n    template: `\n        <div topbar class=\"\">\n            <a\n                button\n                class=\"clear h-[2.75rem] text-white\"\n                mat-button\n                [routerLink]=\"['/book', 'desks', 'form']\"\n            >\n                <div class=\"flex items-center justify-center h-full\">\n                    <app-icon class=\"text-xl\">arrow_back</app-icon>\n                    <span class=\"ml-2 mx-4\">Back</span>\n                </div>\n            </a>\n        </div>\n        <div class=\"flex flex-col flex-1 h-1/2 w-full \">\n            <h2 class=\"text-2xl px-4 pt-4 text-center\">Available Desks</h2>\n            <an-action-field\n                class=\"my-4 mx-auto w-[640px] max-w-[calc(100vw-2rem)]\"\n                [matMenuTriggerFor]=\"menu\"\n            >\n                {{ (option_details | async) || 'No Filters' }}\n            </an-action-field>\n            <mat-menu #menu=\"matMenu\">\n                <div\n                    (click)=\"$event.stopPropagation(); ($event.preventDefault)\"\n                    class=\"pt-4 max-h-[65vh] overflow-auto\"\n                >\n                    <detailed-book-desks-form\n                        [form]=\"form\"\n                    ></detailed-book-desks-form>\n                </div>\n            </mat-menu>\n            <div listing class=\"flex flex-1 h-1/2 relative space-x-2\">\n                <ul\n                    class=\"list-style-none w-full sm:w-[20rem] bg-gray-100 p-2 pb-32 overflow-auto h-full rounded-tr-lg space-y-2\"\n                >\n                    <div class=\"px-2 sticky top-0 bg-gray-100 w-full z-10\">\n                        {{ (desks | async)?.length || '0' }} matches available\n                    </div>\n                    <li\n                        matRipple\n                        *ngFor=\"let desk of desks | async\"\n                        [attr.desk-id]=\"desk.id\"\n                        class=\"flex items-center p-2 bg-white rounded shadow cursor-pointer space-x-2 min-h-[5rem] border\"\n                        [class.border-primary]=\"active_desk?.id === desk.id\"\n                        (click)=\"setActiveDesk(desk)\"\n                    >\n                        <app-icon class=\"text-2xl\">place</app-icon>\n                        <div class=\"flex flex-col w-1/2 flex-1\">\n                            <div name class=\"\">{{ desk.name }}</div>\n                            <div level class=\"text-xs\">\n                                {{\n                                    desk.zone?.display_name ||\n                                        desk.zone.name ||\n                                        '&lt;No Level&gt;'\n                                }}\n                            </div>\n                            <div features class=\"w-full flex flex-wrap\">\n                                <div\n                                    *ngFor=\"let feat of desk.features || []\"\n                                    class=\"text-xs bg-primary text-white rounded-xl px-2 py-1 mt-1 mr-2\"\n                                >\n                                    {{ feat }}\n                                </div>\n                            </div>\n                        </div>\n                    </li>\n                </ul>\n                <div\n                    class=\"hidden sm:block flex-1 bg-gray-200 rounded-tl-lg border-l border-t border-gray-300 relative overflow-hidden h-full\"\n                >\n                    <i-map\n                        [src]=\"url | async\"\n                        [zoom]=\"(positions | async)?.zoom\"\n                        [center]=\"(positions | async)?.center\"\n                        [styles]=\"styles | async\"\n                        [features]=\"features | async\"\n                        [actions]=\"actions | async\"\n                        [labels]=\"labels | async\"\n                        [focus]=\"active_desk?.map_id || active_desk?.id\"\n                    ></i-map>\n                    <div\n                        class=\"absolute top-2 left-2 bg-white rounded-3xl h-10 px-3 flex items-center border border-gray-300\"\n                        *ngIf=\"level | async\"\n                    >\n                        {{\n                            (level | async)?.display_name ||\n                                (level | async)?.name\n                        }}\n                    </div>\n                </div>\n                <div\n                    *ngIf=\"loading | async\"\n                    class=\"absolute inset-0 bg-white bg-opacity-60 flex flex-col items-center justify-center space-y-2 !m-0 z-20\"\n                >\n                    <mat-spinner [diameter]=\"32\"></mat-spinner>\n                    <p>{{ loading | async }}</p>\n                </div>\n                <div\n                    selection\n                    class=\"absolute bottom-2 left-1/2 transform -translate-x-1/2 p-2 bg-white shadow rounded w-[24rem] max-w-[calc(100vw-1rem)] space-y-2 !m-0 border border-gray-200\"\n                    *ngIf=\"active_desk\"\n                >\n                    <div class=\"\">\n                        <div name class=\"\">{{ active_desk.name }}</div>\n                        <div level class=\"text-xs\">\n                            {{\n                                active_desk.zone?.display_name ||\n                                    active_desk.zone.name ||\n                                    '&lt;No Level&gt;'\n                            }}\n                        </div>\n                    </div>\n                    <div class=\"flex items-center space-x-2\">\n                        <button\n                            mat-button\n                            class=\"inverse flex-1\"\n                            (click)=\"setActiveDesk(null)\"\n                        >\n                            Clear\n                        </button>\n                        <button\n                            mat-button\n                            class=\"flex-1\"\n                            (click)=\"makeBooking()\"\n                        >\n                            Book\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    `,\n    styles: [\n        `\n            :host {\n                height: 100%;\n                width: 100%;\n                display: flex;\n                flex-direction: column;\n            }\n\n            [topbar] {\n                background-color: #00539f;\n            }\n        `,\n    ],\n})\nexport class DeskFlowMapComponent extends BaseClass implements OnInit {\n    /** Observable for the active map */\n    public readonly url = this._explore.map_url;\n    /** Observable for the active map */\n    public readonly styles = this._explore.map_styles;\n    /** Observable for the active map */\n    public readonly positions = this._explore.map_positions;\n    /** Observable for the active map */\n    public readonly features = this._explore.map_features;\n    /** Observable for the active map */\n    public readonly actions = this._explore.map_actions;\n    /** Observable for the labels map */\n    public readonly labels = this._explore.map_labels;\n    public readonly level = this._explore.level;\n\n    public readonly desks = this._state.available_assets;\n\n    public readonly loading = this._state.loading;\n\n    public readonly form = this._state.form;\n\n    public readonly option_details = combineLatest([\n        this._state.options,\n        this.form.valueChanges.pipe(startWith({})),\n    ]).pipe(\n        map(([options]) => {\n            const form = this._state.form;\n            const recurrence = formatRecurrence({\n                pattern: options.pattern as any,\n                end: options.recurr_end,\n                start: form.value.date,\n                interval: 1,\n                days_of_week: -1,\n            });\n            const details = `${format(form.value.date, 'dd MMM yyyy')}${\n                options.pattern && options.pattern !== 'none'\n                    ? ', ' + recurrence\n                    : ''\n            }${options.group ? ', ' + options.group : ''}, ${\n                options.features?.length || 'Any'\n            } Feature${(options.features?.length || 0) < 2 ? '' : 's'}`;\n            if (options.zone_id) this._explore.setLevel(options.zone_id);\n            return details;\n        })\n    );\n\n    private _active_desk = new BehaviorSubject<Desk>(null);\n\n    public readonly makeBooking = () => this._state.confirmPost();\n\n    public get active_desk(): Desk {\n        return this._active_desk.getValue();\n    }\n\n    constructor(\n        private _state: BookingStateService,\n        private _explore: ExploreStateService\n    ) {\n        super();\n    }\n\n    public ngOnInit() {\n        this.subscription(\n            'assets-statue',\n            combineLatest([\n                this._state.assets,\n                this._state.available_assets,\n                this._active_desk,\n            ])\n                .pipe(debounceTime(200))\n                .subscribe(([assets, available]) => {\n                    const status = {};\n                    const actions = [];\n                    for (const desk of assets) {\n                        const active =\n                            desk.bookable &&\n                            available.find((d) => d.id === desk.id);\n                        status[`#${desk.map_id || desk.id}`] = {\n                            fill: desk.bookable\n                                ? available.find((d) => d.id === desk.id)\n                                    ? '#43a047'\n                                    : '#e53935'\n                                : '#999',\n                            opacity: 0.6,\n                        };\n                        if (active)\n                            actions.push({\n                                id: desk.map_id || desk.id,\n                                action: 'click',\n                                callback: () => this.setActiveDesk(desk as any),\n                            });\n                    }\n                    this._explore.setStyles('desks', status);\n                    this._explore.setActions('desks', actions);\n                    this._explore.setFeatures(\n                        'desks',\n                        this.active_desk\n                            ? [\n                                  {\n                                      location:\n                                          this.active_desk.map_id ||\n                                          this.active_desk.id,\n                                      content: `\n                    <span class=\"flex h-2 w-2 rounded-full absolute top-1/4 left-1/4 transform -translate-x-1/2 -translate-y-1/2\" >\n                        <span class=\"animate-ping absolute inline-flex h-full w-full rounded-full bg-primary opacity-75\"></span>\n                        <span class=\"relative inline-flex rounded-full h-2 w-2 bg-primary\"></span>\n                    </span>`,\n                                  },\n                              ]\n                            : []\n                    );\n                })\n        );\n    }\n\n    public setActiveDesk(desk: Desk) {\n        this._explore.setLevel(desk?.zone?.id);\n        this._active_desk.next(desk);\n        this._state.form.patchValue({ asset_id: desk?.id });\n    }\n}\n","import { Component } from '@angular/core';\n\n@Component({\n    selector: 'desk-flow-confirm',\n    template: `\n        <div topbar class=\"\">\n            <a\n                button\n                class=\"clear h-[2.75rem] text-white\"\n                mat-button\n                [routerLink]=\"['/book', 'desks', 'map']\"\n            >\n                <div class=\"flex items-center justify-center h-full\">\n                    <app-icon class=\"text-xl\">arrow_back</app-icon>\n                    <span class=\"ml-2 mx-4\">Back</span>\n                </div>\n            </a>\n        </div>\n    `,\n    styles: [\n        `\n            :host {\n                height: 100%;\n                width: 100%;\n                display: flex;\n                flex-direction: column;\n            }\n\n            [topbar] {\n                background-color: #00539f;\n            }\n        `,\n    ],\n})\nexport class DeskFlowConfirmComponent {}\n","import { Component, Input } from '@angular/core';\n\n@Component({\n    selector: 'flow-success',\n    template: `\n        <div\n            name=\"success\"\n            class=\"fixed inset-0 flex flex-col bg-secondary items-center justify-center z-50\"\n        >\n            <div class=\"text-4xl rounded-full bg-white text-success mb-4\">\n                <app-icon>done</app-icon>\n            </div>\n            <div class=\"text-center text-lg text-white mb-4\">\n                Thank you, you {{ type }} booking was successful!<br />\n                An event has been added to your calendar\n            </div>\n            <div class=\"flex items-center space-x-2\">\n                <a\n                    button\n                    mat-button\n                    class=\"w-32\"\n                    [routerLink]=\"['/book', route]\"\n                    [queryParams]=\"{}\"\n                >\n                    New Booking\n                </a>\n                <a\n                    button\n                    mat-button\n                    class=\"w-32\"\n                    [routerLink]=\"['/schedule']\"\n                    [queryParams]=\"{ email: calendar }\"\n                >\n                    My Day\n                </a>\n            </div>\n        </div>\n    `,\n    styles: [``],\n})\nexport class FlowSuccessComponent {\n    @Input() public calendar: string;\n    @Input() public route = 'spaces';\n    @Input() public type = 'space';\n}\n","import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { BookingStateService } from '@placeos/bookings';\nimport { OrganisationService } from '@placeos/organisation';\nimport { addDays, addMinutes, roundToNearestMinutes } from 'date-fns';\nimport setHours from 'date-fns/setHours';\nimport { first } from 'rxjs/operators';\n\n@Component({\n    selector: 'desk-flow-form',\n    template: `\n        <section quick class=\"text-white\">\n            <div class=\"w-[640px] max-w-[calc(100%-2rem)] mx-auto pb-2\">\n                <h2 class=\"text-xl uppercase font-medium mb-2 mt-4\">\n                    Quick Book Desk\n                </h2>\n                <div class=\"flex flex-col sm:flex-row space-x-0 sm:space-x-2\">\n                    <mat-form-field\n                        class=\"sm:flex-2 h-[3.25rem]\"\n                        overlay\n                        appearance=\"outline\"\n                    >\n                        <mat-select\n                            name=\"time\"\n                            [(ngModel)]=\"time\"\n                            placeholder=\"Now\"\n                        >\n                            <mat-option\n                                *ngFor=\"let item of quick_times\"\n                                [value]=\"item.value\"\n                            >\n                                {{ item.name }}\n                            </mat-option>\n                        </mat-select>\n                    </mat-form-field>\n                    <mat-form-field\n                        class=\"sm:flex-2 h-[3.25rem]\"\n                        overlay\n                        appearance=\"outline\"\n                    >\n                        <mat-select\n                            name=\"level\"\n                            [(ngModel)]=\"level\"\n                            placeholder=\"Any Level\"\n                        >\n                            <mat-option\n                                *ngFor=\"let item of levels\"\n                                [value]=\"item.id\"\n                            >\n                                {{ item.display_name || item.name }}\n                            </mat-option>\n                        </mat-select>\n                    </mat-form-field>\n                    <button\n                        class=\"sm:flex-1 h-[2.75rem] mt-1 mb-2\"\n                        mat-button\n                        (click)=\"quickBook()\"\n                    >\n                        <div class=\"flex items-center justify-center\">\n                            <app-icon class=\"text-xl\">search</app-icon>\n                            <span class=\"ml-2 mx-4\">Find Desk</span>\n                        </div>\n                    </button>\n                </div>\n            </div>\n        </section>\n        <section class=\"bg-gray-300\">\n            <div class=\"w-[640px] max-w-[calc(100%-2rem)] mx-auto\">\n                <h2 class=\"text-xl uppercase font-medium my-4\">OR</h2>\n            </div>\n        </section>\n        <section class=\"flex-1 min-h-[50%]\">\n            <h2\n                class=\"text-xl uppercase font-medium mb-2 mt-4 w-[640px] max-w-[calc(100%-2rem)] mx-auto\"\n            >\n                {{ is_edit ? 'Edit' : 'Detailed' }} Booking\n            </h2>\n            <detailed-book-desks-form [form]=\"form\"></detailed-book-desks-form>\n            <div class=\"mb-4 border-b border-gray-300 w-full\"></div>\n            <div\n                class=\"flex flex-col sm:flex-row items-center justify-center space-x-0 space-y-2 sm:space-y-0 sm:space-x-2 w-[640px] max-w-[calc(100%-2rem)] mx-auto mb-4\"\n            >\n                <button\n                    class=\"sm:flex-1 w-full sm:w-auto h-[2.75rem] inverse\"\n                    mat-button\n                    (click)=\"clearForm()\"\n                >\n                    <div class=\"flex items-center justify-center\">\n                        <app-icon class=\"text-xl\">clear</app-icon>\n                        <span class=\"ml-2 mx-4\">{{\n                            is_edit ? 'Cancel Edit' : 'Clear Form'\n                        }}</span>\n                    </div>\n                </button>\n                <button\n                    class=\"sm:flex-1 w-full sm:w-auto h-[2.75rem]\"\n                    mat-button\n                    (click)=\"findDesk()\"\n                >\n                    <div class=\"flex items-center justify-center\">\n                        <app-icon class=\"text-xl\">search</app-icon>\n                        <span class=\"ml-2 mx-4\">{{\n                            is_edit ? 'Update Desk' : 'Find Desk'\n                        }}</span>\n                    </div>\n                </button>\n            </div>\n        </section>\n    `,\n    styles: [\n        `\n            :host {\n                height: 100%;\n                width: 100%;\n                display: flex;\n                flex-direction: column;\n                overflow: auto;\n            }\n\n            [quick] {\n                background-color: #007ac8;\n            }\n        `,\n    ],\n})\nexport class DeskFlowFormComponent implements OnInit {\n    public time = 0;\n    public level = '';\n\n    public readonly quick_times = [\n        { name: 'Now', value: 0 },\n        {\n            name: 'Tomorrow',\n            value: setHours(addDays(new Date(), 1), 9).valueOf(),\n        },\n    ];\n\n    public levels = [];\n\n    public get is_edit() {\n        return !!this.form?.get('id')?.value;\n    }\n\n    public get form() {\n        return this._state.form;\n    }\n\n    public readonly clearForm = () => {\n        this.time = 0;\n        this.level = this._org.building.id;\n        this._state.clearForm();\n    };\n\n    constructor(\n        private _state: BookingStateService,\n        private _router: Router,\n        private _org: OrganisationService\n    ) {}\n\n    public async ngOnInit() {\n        await this._org.initialised.pipe(first((_) => _));\n        await this._org.active_levels.pipe(first((_) => _?.length > 0));\n        this.level = this._org.building?.id;\n        this.levels = [\n            { id: this._org.building?.id, name: 'Any Level' },\n            ...this._org.levelsForBuilding(this._org.building),\n        ];\n    }\n\n    public quickBook() {\n        this.form.patchValue({\n            date: (this.time < 24 * 60\n                ? addMinutes(\n                      roundToNearestMinutes(new Date(), { nearestTo: 5 }),\n                      this.time\n                  )\n                : setHours(addDays(new Date(), 1), 8)\n            ).valueOf(),\n            title: 'Ad-hoc Desk Booking',\n        });\n        this.findDesk();\n    }\n\n    public findDesk() {\n        this.form.markAllAsTouched();\n        if (!this.form.valid) return;\n        this._router.navigate(['/book', 'desks', 'map']);\n    }\n}\n","import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { BookingStateService } from '@placeos/bookings';\nimport { BaseClass } from '@placeos/common';\nimport { OrganisationService } from '@placeos/organisation';\nimport { first } from 'rxjs/operators';\n\n@Component({\n    selector: 'placeos-book-desk-flow',\n    template: `\n        <div class=\"bg-white h-full w-full\">\n            <ng-container [ngSwitch]=\"view\">\n                <ng-container *ngSwitchCase=\"'map'\">\n                    <desk-flow-map></desk-flow-map>\n                </ng-container>\n                <ng-container *ngSwitchCase=\"'confirm'\">\n                    <desk-flow-confirm></desk-flow-confirm>\n                </ng-container>\n                <ng-container *ngSwitchCase=\"'success'\">\n                    <flow-success\n                        type=\"desk\"\n                        route=\"desks\"\n                        [calendar]=\"last_success?.user_email\"\n                    ></flow-success>\n                </ng-container>\n                <ng-container *ngSwitchDefault>\n                    <desk-flow-form></desk-flow-form>\n                </ng-container>\n            </ng-container>\n        </div>\n    `,\n    styles: [\n        `\n            :host {\n                height: 100%;\n                width: 100%;\n            }\n        `,\n    ],\n})\nexport class BookDeskFlowComponent extends BaseClass implements OnInit {\n    public get view() {\n        return this._state.view;\n    }\n    public get last_success() {\n        return this._state.last_success;\n    }\n\n    constructor(\n        private _state: BookingStateService,\n        private _route: ActivatedRoute,\n        private _org: OrganisationService\n    ) {\n        super();\n    }\n\n    public async ngOnInit() {\n        await this._org.initialised.pipe(first((_) => _)).toPromise();\n        this._state.loadForm();\n        if (!this._state.form) this._state.newForm();\n        this.subscription(\n            'route.params',\n            this._route.paramMap.subscribe((param) => {\n                if (param.has('step'))\n                    this._state.setView(param.get('step') as any);\n            })\n        );\n        this.subscription(\n            'route.query',\n            this._route.queryParamMap.subscribe((param) => {\n                if (param.has('success'))\n                    this._state.setView(param.get('success') as any);\n            })\n        );\n    }\n}\n","import { Component, EventEmitter, Input, Output } from '@angular/core';\nimport { MatDialog } from '@angular/material/dialog';\nimport { Space } from '@placeos/spaces';\nimport { ViewRoomModalComponent } from '../../overlays/view-room-modal.component';\n\n@Component({\n    selector: 'space-flow-find-item',\n    template: `\n        <div\n            class=\"flex items-center bg-white p-2 my-2 shadow w-[640px] max-w-[calc(100%-2rem)] mx-auto rounded\"\n        >\n            <div class=\"flex flex-col flex-1 space-y-2 \">\n                <div class=\"flex items-center\">\n                    <div class=\"p-2 rounded-full bg-gray-300 mr-2\">\n                        <app-icon>place</app-icon>\n                    </div>\n                    <span\n                        >{{ space?.level?.display_name || space?.level?.name }},\n                        {{ space?.display_name || space?.name }}</span\n                    >\n                </div>\n                <div class=\"flex items-center\">\n                    <div class=\"p-2 rounded-full bg-gray-300 mr-2\">\n                        <app-icon>group</app-icon>\n                    </div>\n                    <span>{{ space?.capacity || 0 }} People</span>\n                </div>\n            </div>\n            <div class=\"flex flex-col space-y-2 ml-2\">\n                <button\n                    mat-button\n                    [class.bg-pending]=\"book\"\n                    [class.border-pending]=\"book\"\n                    (click)=\"bookSpace()\"\n                >\n                    {{ multiple ? (book ? 'Remove' : 'Select') : 'Book' }}\n                </button>\n                <button mat-button class=\"inverse\" (click)=\"viewLocation()\">\n                    Map\n                </button>\n            </div>\n        </div>\n    `,\n    styles: [\n        `\n            button {\n                width: 8rem;\n            }\n        `,\n    ],\n})\nexport class SpaceFlowFindItemComponent {\n    /** Space to display details for */\n    @Input() public space: Space;\n    /** Whether space should be booked */\n    @Input() public multiple: boolean;\n    /** Whether space should be booked */\n    @Input() public book: boolean;\n    /** Emitter for changes to book value */\n    @Output() public bookChange = new EventEmitter<boolean>();\n\n    constructor(private _dialog: MatDialog) {}\n\n    public bookSpace() {\n        this.book = !this.book;\n        this.bookChange.emit(this.book);\n    }\n\n    public viewLocation() {\n        this._dialog.open(ViewRoomModalComponent, {\n            width: '32em',\n            maxWidth: '95vw',\n            maxHeight: '95vh',\n            data: { space: this.space },\n        });\n    }\n}\n","import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { HashMap, SettingsService } from '@placeos/common';\nimport { EventStateService } from '@placeos/events';\nimport { OrganisationService } from '@placeos/organisation';\nimport { Space, SpacesService } from '@placeos/spaces';\nimport { combineLatest } from 'rxjs';\nimport { filter, first, map, take } from 'rxjs/operators';\n\n@Component({\n    selector: 'space-flow-find',\n    template: `\n        <div topbar class=\"\">\n            <a\n                button\n                class=\"clear h-[2.75rem] text-white\"\n                mat-button\n                [routerLink]=\"['/book', 'spaces', 'form']\"\n            >\n                <div class=\"flex items-center justify-center h-full\">\n                    <app-icon class=\"text-xl\">arrow_back</app-icon>\n                    <span class=\"ml-2 mx-4\">Back</span>\n                </div>\n            </a>\n        </div>\n        <div filters>\n            <div class=\"w-[640px] max-w-[calc(100%-2rem)] mx-auto py-4\">\n                <h2 class=\"text-xl uppercase font-medium text-white\">\n                    Available Spaces\n                </h2>\n                <div\n                    class=\"flex flex-col items-center sm:flex-row space-x-0 sm:space-x-2\"\n                >\n                    <mat-form-field\n                        overlay\n                        buildings\n                        class=\"w-full sm:w-auto sm:flex-1 h-[3.25rem]\"\n                        *ngIf=\"(buildings | async)?.length > 1\"\n                        appearance=\"outline\"\n                    >\n                        <mat-select\n                            placeholder=\"Select Building...\"\n                            [ngModel]=\"building | async\"\n                            (ngModelChange)=\"setBuilding($event)\"\n                        >\n                            <mat-option\n                                *ngFor=\"let bld of buildings | async\"\n                                [value]=\"bld\"\n                            >\n                                {{ bld.display_name || bld.name }}\n                            </mat-option>\n                        </mat-select>\n                    </mat-form-field>\n                    <mat-form-field\n                        class=\"w-full sm:w-auto sm:flex-1 h-[3.25rem]\"\n                        overlay\n                        *ngIf=\"(levels | async)?.length > 0\"\n                        appearance=\"outline\"\n                    >\n                        <mat-select\n                            placeholder=\"Level\"\n                            [ngModel]=\"\n                                (options | async)?.zone_ids?.length\n                                    ? (options | async)?.zone_ids[0]\n                                    : ''\n                            \"\n                            (ngModelChange)=\"setOptions({ zone_ids: [$event] })\"\n                        >\n                            <mat-option\n                                *ngFor=\"let item of levels | async\"\n                                [value]=\"item.id\"\n                            >\n                                {{ item.display_name || item.name }}\n                            </mat-option>\n                        </mat-select>\n                    </mat-form-field>\n                    <mat-form-field\n                        class=\"w-full sm:w-auto sm:flex-1 h-[3.25rem] hidden sm:block\"\n                        overlay\n                        appearance=\"outline\"\n                    >\n                        <mat-select\n                            placeholder=\"Any Capacity\"\n                            [ngModel]=\"(options | async)?.capacity\"\n                            (ngModelChange)=\"setOptions({ capacity: $event })\"\n                        >\n                            <mat-option\n                                *ngFor=\"let item of quick_capacities\"\n                                [value]=\"item.value\"\n                            >\n                                {{ item.name }}\n                            </mat-option>\n                        </mat-select>\n                    </mat-form-field>\n                </div>\n            </div>\n        </div>\n        <div class=\"flex-1 w-full bg-gray-100 overflow-auto\">\n            <ng-container *ngIf=\"!(loading | async); else load_state\">\n                <ng-container\n                    *ngIf=\"(spaces | async)?.length > 0; else empty_state\"\n                >\n                    <space-flow-find-item\n                        *ngFor=\"let space of spaces | async\"\n                        class=\"w-[640px] max-w-[calc(100%-2rem)] mx-auto \"\n                        [space]=\"space\"\n                        [multiple]=\"multiple\"\n                        [(book)]=\"book_space[space.id]\"\n                        (bookChange)=\"handleBookEvent(space, $event)\"\n                    ></space-flow-find-item>\n                    <p class=\"p-4 text-center opacity-60\">\n                        End of available spaces list\n                    </p>\n                </ng-container>\n            </ng-container>\n        </div>\n        <div *ngIf=\"multiple\" class=\"bg-white border-t border-gray-200\">\n            <div\n                class=\"flex items-center w-[640px] max-w-[calc(100%-2rem)] mx-auto p-2\"\n            >\n                <div class=\"flex-1 underline\" [matMenuTriggerFor]=\"menu\">\n                    {{ space_list.length }} space(s) selected\n                </div>\n                <button\n                    class=\"w-32\"\n                    [disabled]=\"!space_list.length\"\n                    mat-button\n                    (click)=\"confirmBooking()\"\n                >\n                    Book\n                </button>\n            </div>\n            <mat-menu #menu=\"matMenu\" yPosition=\"above\">\n                <div\n                    class=\"flex items-center pointer-events-none leading-tight\"\n                    mat-menu-item\n                    *ngFor=\"let space of space_list\"\n                >\n                    <div class=\"flex flex-col mr-4\">\n                        <div>{{ space.display_name || space.name }}</div>\n                        <div class=\"text-xs opacity-70\">\n                            {{ space.level?.display_name || space.level?.name }}\n                            ~ {{ space.capacity || '2+' }} People\n                        </div>\n                    </div>\n                    <button\n                        mat-icon-button\n                        class=\"pointer-events-auto\"\n                        (click)=\"\n                            this.handleBookEvent(space, false);\n                            $event.stopPropagation()\n                        \"\n                    >\n                        <app-icon>close</app-icon>\n                    </button>\n                </div>\n                <div\n                    mat-menu-item\n                    class=\" opacity-60\"\n                    *ngIf=\"!space_list?.length\"\n                >\n                    No selected spaces\n                </div>\n            </mat-menu>\n        </div>\n        <ng-template #load_state>\n            <div\n                class=\"h-full w-full flex flex-col items-center justify-center space-y-2\"\n            >\n                <mat-spinner [diameter]=\"32\"></mat-spinner>\n                <p>Retrieving available spaces...</p>\n            </div>\n        </ng-template>\n        <ng-template #empty_state>\n            <div\n                class=\"h-full w-full flex flex-col items-center justify-center space-y-2 p-8 text-center\"\n            >\n                <p>\n                    No available spaces for selected time, capacity or level(s)\n                </p>\n            </div>\n        </ng-template>\n    `,\n    styles: [\n        `\n            :host {\n                height: 100%;\n                width: 100%;\n                display: flex;\n                flex-direction: column;\n            }\n\n            [topbar] {\n                background-color: #00539f;\n            }\n\n            [filters] {\n                background-color: #007ac8;\n            }\n        `,\n    ],\n})\nexport class SpaceFlowFindComponent implements OnInit {\n    public book_space: HashMap<boolean> = {};\n    public quick_capacities = [\n        { name: 'Any Capacity', value: 0 },\n        { name: 'Small (1 - 4)', value: 1 },\n        { name: 'Medium (5 - 12)', value: 5 },\n        { name: 'Large (13 - 32)', value: 13 },\n        { name: 'Huge (32+)', value: 33 },\n    ];\n\n    public space_list: Space[] = [];\n\n    /** List of available buildings */\n    public readonly buildings = this._org.building_list;\n    /** Currently active building */\n    public readonly building = this._org.active_building;\n\n    public readonly levels = combineLatest([\n        this.building,\n        this._state.options,\n    ]).pipe(\n        filter(([_]) => !!_),\n        map(([bld]) => [\n            {\n                id: this._org.building.id,\n                name: 'All Levels',\n            },\n            ...this._org.levelsForBuilding(bld),\n        ])\n    );\n\n    public readonly loading = this._state.loading;\n    public readonly options = this._state.options;\n\n    public readonly spaces = this._state.available_spaces;\n    public async setBuilding(bld) {\n        const opts = await this.options.pipe(take(1)).toPromise();\n        if (bld) this._org.building = bld;\n        const levels = this._org.levelsForBuilding(this._org.building);\n        const lvl = levels.find((_) => opts.zone_ids?.includes(_.id));\n        if (!lvl && levels.length) {\n            this.setOptions({ zone_ids: [levels[0].id] });\n        }\n    }\n\n    public readonly setOptions = (o) => this._state.setOptions(o);\n\n    public get multiple() {\n        return this._settings.get('app.booking.multiple_spaces') ?? true;\n    }\n\n    constructor(\n        private _org: OrganisationService,\n        private _spaces: SpacesService,\n        private _state: EventStateService,\n        private _settings: SettingsService,\n        private _router: Router\n    ) {}\n\n    public async ngOnInit() {\n        await this._org.initialised.pipe(first((_) => !!_)).toPromise();\n        await this._spaces.initialised.pipe(first((_) => !!_)).toPromise();\n        this.setBuilding(this._org.building);\n        this.book_space = {};\n        const resources = this._state.form?.get('resources')?.value || [];\n        console.log('Resources:', resources);\n        resources.forEach((_) => (this.book_space[_.id] = true));\n        this.space_list = this._spaces.filter((s) => this.book_space[s.id]);\n    }\n\n    public handleBookEvent(space: Space, book: boolean) {\n        if (this.multiple) {\n            this.book_space[space.id] = book;\n        } else {\n            this.book_space = {};\n            this.book_space[space.id] = book;\n            this.confirmBooking();\n        }\n        this.space_list = this._spaces.filter((s) => this.book_space[s.id]);\n    }\n\n    public confirmBooking() {\n        const spaces = this._spaces.filter((s) => this.book_space[s.id]);\n        this._state.form.patchValue({ resources: spaces, system: spaces[0] });\n        this._router.navigate(['/book', 'spaces', 'confirm']);\n    }\n}\n","import { Component } from '@angular/core';\nimport { notifyError } from '@placeos/common';\nimport { EventStateService } from '@placeos/events';\n\n@Component({\n    selector: 'space-flow-confirm',\n    template: `\n        <div topbar class=\"\">\n            <a\n                button\n                class=\"clear h-[2.75rem] text-white\"\n                mat-button\n                [routerLink]=\"['/book', 'spaces', 'find']\"\n            >\n                <div class=\"flex items-center justify-center h-full\">\n                    <app-icon class=\"text-xl\">arrow_back</app-icon>\n                    <span class=\"ml-2 mx-4\">Back</span>\n                </div>\n            </a>\n        </div>\n        <div\n            class=\"flex flex-col items-center space-y-2 w-[640px] max-w-[calc(100%-2rem)] mx-auto mb-4\"\n        >\n            <h2 class=\"text-xl uppercase font-medium w-full my-4\">\n                Your meeting details\n            </h2>\n            <div\n                class=\"flex items-center py-2 space-x-2 border-b border-gray-200 w-full\"\n            >\n                <div class=\"p-2 rounded-full bg-gray-300 mr-2\">\n                    <app-icon>event</app-icon>\n                </div>\n                <div class=\"flex-1 truncate\">\n                    {{ form.get('date')?.value | date: 'longDate' }} at\n                    {{ form.get('date')?.value | date: 'shortTime' }} ~\n                    {{\n                        form.get('date')?.value +\n                            form.get('duration')?.value * 60 * 1000\n                            | date: 'shortTime'\n                    }}\n                </div>\n                <a\n                    mat-button\n                    class=\"clear underline\"\n                    [routerLink]=\"['/book', 'spaces', 'form']\"\n                    >Edit</a\n                >\n            </div>\n            <div\n                class=\"flex items-center py-2 space-x-2 border-b border-gray-200 w-full\"\n            >\n                <div class=\"p-2 rounded-full bg-gray-300 mr-2\">\n                    <app-icon>schedule</app-icon>\n                </div>\n                <div class=\"flex-1 truncate\">\n                    {{ form.get('duration')?.value }} minutes\n                </div>\n                <a\n                    mat-button\n                    class=\"clear underline\"\n                    [routerLink]=\"['/book', 'spaces', 'form']\"\n                    >Edit</a\n                >\n            </div>\n            <div class=\"border-b border-gray-200 w-full\">\n                <div class=\"flex items-center py-2 space-x-2 \">\n                    <div class=\"p-2 rounded-full bg-gray-300 mr-2\">\n                        <app-icon>place</app-icon>\n                    </div>\n                    <div class=\"flex-1 truncate\">\n                        {{ form.get('resources')?.value?.length }} Space(s)\n                    </div>\n                    <button\n                        mat-button\n                        [disabled]=\"!form.get('resources')?.value?.length\"\n                        class=\"clear bg-transparent border-none underline\"\n                        (click)=\"show_spaces = !show_spaces\"\n                    >\n                        {{ show_spaces ? 'Hide' : 'Show' }}\n                    </button>\n                    <a\n                        mat-button\n                        class=\"clear underline\"\n                        [routerLink]=\"['/book', 'spaces', 'find']\"\n                        >Edit</a\n                    >\n                </div>\n                <div\n                    list\n                    [style.height]=\"\n                        !show_spaces\n                            ? '0'\n                            : form.get('resources')?.value?.length * 2.5 + 'rem'\n                    \"\n                    class=\"overflow-hidden\"\n                >\n                    <div\n                        class=\"flex items-center h-10 pl-12\"\n                        *ngFor=\"let space of form.get('resources')?.value\"\n                    >\n                        <span\n                            >{{ space.display_name || space.name }} [{{\n                                space.level?.display_name || space.level?.name\n                            }}]</span\n                        >\n\n                        <button\n                            mat-button\n                            class=\"bg-transparent border-none underline\"\n                        >\n                            Map\n                        </button>\n                    </div>\n                </div>\n            </div>\n            <div class=\"border-b border-gray-200 w-full\">\n                <div class=\"flex items-center py-2 space-x-2 \">\n                    <div class=\"p-2 rounded-full bg-gray-300 mr-2\">\n                        <app-icon>group</app-icon>\n                    </div>\n                    <div class=\"flex-1 truncate\">\n                        {{ form.get('attendees')?.value?.length || 0 }}\n                        Attendee(s)\n                    </div>\n                    <button\n                        mat-button\n                        [disabled]=\"!form.get('attendees')?.value?.length\"\n                        class=\"clear bg-transparent border-none underline\"\n                        (click)=\"show_people = !show_people\"\n                    >\n                        {{ show_people ? 'Hide' : 'Show' }}\n                    </button>\n                    <a\n                        mat-button\n                        class=\"clear underline\"\n                        [routerLink]=\"['/book', 'spaces', 'form']\"\n                        >Edit</a\n                    >\n                </div>\n                <div\n                    list\n                    [style.height]=\"\n                        !show_people\n                            ? '0'\n                            : form.get('attendees')?.value?.length * 3 + 'rem'\n                    \"\n                    class=\"overflow-hidden\"\n                >\n                    <div\n                        class=\"flex items-center h-12 pl-12 space-x-2\"\n                        *ngFor=\"let user of form.get('attendees')?.value\"\n                    >\n                        <a-user-avatar\n                            class=\"text-sm\"\n                            [user]=\"user\"\n                        ></a-user-avatar>\n                        <span>{{ user.name || user.email }}</span>\n                    </div>\n                </div>\n            </div>\n            <button\n                mat-button\n                class=\"w-32\"\n                [disabled]=\"loading\"\n                (click)=\"postForm()\"\n            >\n                <span *ngIf=\"!loading\">Confirm</span>\n                <mat-spinner class=\"mx-auto\" [diameter]=\"24\" *ngIf=\"loading\"></mat-spinner>\n            </button>\n        </div>\n        <\n    `,\n    styles: [\n        `\n            :host {\n                height: 100%;\n                width: 100%;\n                display: flex;\n                flex-direction: column;\n            }\n\n            [topbar] {\n                background-color: #00539f;\n            }\n\n            [list] {\n                transition: height 200ms;\n            }\n        `,\n    ],\n})\nexport class SpaceFlowConfirmComponent {\n    public show_spaces = false;\n    public show_people = false;\n    public loading = false;\n\n    public readonly postForm = async () => {\n        this.loading = true;\n        console.log('Form:', this.form);\n        await this._state.postForm().catch((_) => notifyError(_));\n        this.loading = false;\n    };\n\n    public get form() {\n        return this._state.form;\n    }\n\n    constructor(private _state: EventStateService) {}\n}\n","import { Component, Input } from '@angular/core';\nimport { FormGroup } from '@angular/forms';\n\n@Component({\n    selector: 'detailed-book-space-form',\n    template: `\n        <form *ngIf=\"form\" [formGroup]=\"form\">\n            <section class=\"mb-4 border-b border-gray-300\">\n                <div\n                    class=\"flex flex-col sm:flex-row space-x-0 sm:space-x-2 w-[640px] max-w-[calc(100%-2rem)] mx-auto\"\n                >\n                    <div class=\"flex flex-col flex-1 w-full sm:w-1/3\">\n                        <label>Date</label>\n                        <a-date-field formControlName=\"date\">\n                            Date and time must be in the future\n                        </a-date-field>\n                    </div>\n                    <div class=\"flex flex-col flex-1 w-full sm:w-1/3\">\n                        <label>Start Time</label>\n                        <a-time-field formControlName=\"date\"></a-time-field>\n                    </div>\n                    <div class=\"flex flex-col flex-1 w-full sm:w-1/3\">\n                        <label>End Time</label>\n                        <a-duration-field\n                            formControlName=\"duration\"\n                            [time]=\"form.get('date')?.value\"\n                        >\n                    </a-duration-field>\n                    </div>\n                </div>\n            </section>\n            <section class=\"mb-4 border-b border-gray-300\">\n                <div\n                    class=\"flex flex-col w-[640px] max-w-[calc(100%-2rem)] mx-auto\"\n                >\n                    <label>Attendees</label>\n                    <a-user-list-field\n                        formControlName=\"attendees\"\n                    ></a-user-list-field>\n                </div>\n            </section>\n            <section class=\"mb-4 border-b border-gray-300\">\n                <div\n                    class=\"w-[640px] max-w-[calc(100%-2rem)] mx-auto\"\n                >\n                    <div class=\"flex flex-col\">\n                        <label>Meeting Subject <span>*</span></label>\n                        <mat-form-field appearance=\"outline\">\n                            <input\n                                matInput\n                                formControlName=\"title\"\n                                placeholder=\"Meeting title\"\n                            />\n                            <mat-error>Meeting Subject is required</mat-error>\n                        </mat-form-field>\n                    </div>\n                    <div class=\"flex flex-col resize-y\">\n                        <label>Notes</label>\n                        <mat-form-field appearance=\"outline\">\n                            <textarea\n                                matInput\n                                formControlName=\"body\"\n                                placeholder=\"Add meeting notes here...\"\n                            ></textarea>\n                        </mat-form-field>\n                    </div>\n                </div>\n            </section>\n        </form>\n    `,\n    styles: [``],\n})\nexport class DetailBookSpaceFormComponent {\n    @Input() public form: FormGroup;\n}\n","import { Component } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { EventStateService } from '@placeos/events';\nimport { addDays, addMinutes, roundToNearestMinutes, setHours } from 'date-fns';\n\n@Component({\n    selector: 'space-flow-form',\n    template: `\n        <section quick class=\"text-white\" *ngIf=\"!is_edit\">\n            <div class=\"w-[640px] max-w-[calc(100%-2rem)] mx-auto pb-2\">\n                <h2 class=\"text-xl uppercase font-medium mb-2 mt-4\">\n                    Quick Book Space\n                </h2>\n                <div class=\"flex flex-col sm:flex-row space-x-0 sm:space-x-2\">\n                    <mat-form-field\n                        class=\"sm:flex-2 h-[3.25rem]\"\n                        overlay\n                        appearance=\"outline\"\n                    >\n                        <mat-select\n                            name=\"time\"\n                            [(ngModel)]=\"time\"\n                            placeholder=\"Now\"\n                        >\n                            <mat-option\n                                *ngFor=\"let item of quick_times\"\n                                [value]=\"item.value\"\n                            >\n                                {{ item.name }}\n                            </mat-option>\n                        </mat-select>\n                    </mat-form-field>\n                    <mat-form-field\n                        class=\"sm:flex-2 h-[3.25rem]\"\n                        overlay\n                        appearance=\"outline\"\n                    >\n                        <mat-select\n                            name=\"capacity\"\n                            [(ngModel)]=\"capacity\"\n                            placeholder=\"Any Capacity\"\n                        >\n                            <mat-option\n                                *ngFor=\"let item of quick_capacities\"\n                                [value]=\"item.value\"\n                            >\n                                {{ item.name }}\n                            </mat-option>\n                        </mat-select>\n                    </mat-form-field>\n                    <button\n                        class=\"sm:flex-1 h-[2.75rem] mt-1 mb-2\"\n                        mat-button\n                        (click)=\"quickBook()\"\n                    >\n                        <div class=\"flex items-center justify-center\">\n                            <app-icon class=\"text-xl\">search</app-icon>\n                            <span class=\"ml-2 mx-4\">Find Space</span>\n                        </div>\n                    </button>\n                </div>\n            </div>\n        </section>\n        <section class=\"bg-gray-300\" *ngIf=\"!is_edit\">\n            <div class=\"w-[640px] max-w-[calc(100%-2rem)] mx-auto\">\n                <h2 class=\"text-xl uppercase font-medium my-4\">OR</h2>\n            </div>\n        </section>\n        <section class=\"flex-1 min-h-[50%]\">\n            <h2\n                class=\"text-xl uppercase font-medium mb-2 mt-4 w-[640px] max-w-[calc(100%-2rem)] mx-auto\"\n            >\n                {{ is_edit ? 'Edit' : 'Detailed' }} Booking\n            </h2>\n            <detailed-book-space-form [form]=\"form\"></detailed-book-space-form>\n            <div\n                class=\"flex flex-col sm:flex-row items-center justify-center space-x-0 space-y-2 sm:space-y-0 sm:space-x-2 w-[640px] max-w-[calc(100%-2rem)] mx-auto mb-4\"\n            >\n                <button\n                    class=\"sm:flex-1 w-full sm:w-auto h-[2.75rem] inverse\"\n                    mat-button\n                    (click)=\"clearForm()\"\n                >\n                    <div class=\"flex items-center justify-center\">\n                        <app-icon class=\"text-xl\">clear</app-icon>\n                        <span class=\"ml-2 mx-4\">{{ is_edit ? 'Cancel Edit' : 'Clear Form' }}</span>\n                    </div>\n                </button>\n                <button\n                    class=\"sm:flex-1 w-full sm:w-auto h-[2.75rem]\"\n                    mat-button\n                    (click)=\"findSpace()\"\n                >\n                    <div class=\"flex items-center justify-center\">\n                        <app-icon class=\"text-xl\">search</app-icon>\n                        <span class=\"ml-2 mx-4\">{{ is_edit ? 'Update Spaces' : 'Find Space'}}</span>\n                    </div>\n                </button>\n                <button\n                    class=\"sm:flex-1 w-full sm:w-auto h-[2.75rem]\"\n                    mat-button\n                    (click)=\"confirmBooking()\"\n                >\n                    <div class=\"flex items-center justify-center\">\n                        <app-icon class=\"text-xl\">event_available</app-icon>\n                        <span class=\"ml-2 mx-4\">{{ is_edit ? 'Confirm changes' : 'Book without Space'}}</span>\n                    </div>\n                </button>\n            </div>\n        </section>\n    `,\n    styles: [\n        `\n            :host {\n                height: 100%;\n                width: 100%;\n                display: flex;\n                flex-direction: column;\n                overflow: auto;\n            }\n\n            [quick] {\n                background-color: #007ac8;\n            }\n        `,\n    ],\n})\nexport class SpaceFlowFormComponent {\n    public time = 0;\n    public capacity = 0;\n\n    public readonly quick_times = [\n        { name: 'Now', value: 0 },\n        { name: 'Later Today', value: 120 },\n        {\n            name: 'Tomorrow',\n            value: setHours(addDays(new Date(), 1), 9).valueOf(),\n        },\n    ];\n\n    public readonly quick_capacities = [\n        { name: 'Any Capacity', value: 0 },\n        { name: 'Small (1 - 4)', value: 1 },\n        { name: 'Medium (5 - 12)', value: 5 },\n        { name: 'Large (13 - 32)', value: 13 },\n        { name: 'Huge (32+)', value: 33 },\n    ];\n\n    public get is_edit() {\n        return !!this.form?.get('id')?.value;\n    }\n\n    public get form() {\n        return this._state.form;\n    }\n\n    public readonly clearForm = () => {\n        this.time = this.capacity = 0;\n        this._state.clearForm();\n    };\n\n    constructor(private _state: EventStateService, private _router: Router) {}\n\n    public quickBook() {\n        this.form.patchValue({\n            date: (this.time < 24 * 60\n                ? addMinutes(\n                      roundToNearestMinutes(new Date(), { nearestTo: 5 }),\n                      this.time\n                  )\n                : setHours(addDays(new Date(), 1), 8)\n            ).valueOf(),\n            title: 'Ad-hoc Meeting',\n        });\n        this._state.setOptions({ capacity: this.capacity });\n        this._router.navigate(['/book', 'spaces', 'find']);\n    }\n\n    public findSpace() {\n        this.form.markAllAsTouched();\n        if (!this.form.valid) return;\n        this._router.navigate(['/book', 'spaces', 'find']);\n    }\n\n    public confirmBooking() {\n        this.form.markAllAsTouched();\n        if (!this.form.valid) return;\n        this._router.navigate(['/book', 'spaces', 'confirm']);\n    }\n}\n","import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { BaseClass } from '@placeos/common';\nimport { EventStateService } from '@placeos/events';\n\n@Component({\n    selector: 'placeos-book-space-flow',\n    template: `\n        <div class=\"bg-white h-full w-full\">\n            <ng-container [ngSwitch]=\"view\">\n                <ng-container *ngSwitchCase=\"'find'\">\n                    <space-flow-find></space-flow-find>\n                </ng-container>\n                <ng-container *ngSwitchCase=\"'confirm'\">\n                    <space-flow-confirm></space-flow-confirm>\n                </ng-container>\n                <ng-container *ngSwitchCase=\"'success'\">\n                    <flow-success [calendar]=\"last_success?.host\"></flow-success>\n                </ng-container>\n                <ng-container *ngSwitchDefault>\n                    <space-flow-form></space-flow-form>\n                </ng-container>\n            </ng-container>\n        </div>\n    `,\n    styles: [\n        `\n            :host {\n                height: 100%;\n                width: 100%;\n            }\n        `,\n    ],\n})\nexport class BookSpaceFlowComponent extends BaseClass implements OnInit {\n    public get view() {\n        return this._state.view;\n    }\n    public get last_success() {\n        return this._state.last_success;\n    }\n\n    constructor(\n        private _state: EventStateService,\n        private _route: ActivatedRoute\n    ) {\n        super();\n    }\n\n    public ngOnInit() {\n        this._state.loadForm();\n        if (!this._state.form) this._state.newForm();\n        this.subscription(\n            'route.params',\n            this._route.paramMap.subscribe((param) => {\n                if (param.has('step'))\n                    this._state.setView(param.get('step') as any);\n            })\n        );\n        this.subscription(\n            'route.query',\n            this._route.queryParamMap.subscribe((param) => {\n                if (param.has('success'))\n                    this._state.setView(param.get('success') as any);\n            })\n        );\n    }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { MatButtonToggleModule } from '@angular/material/button-toggle';\nimport { Route, RouterModule } from '@angular/router';\n\nimport { BookComponent } from './book.component';\nimport { BookCodeFlowComponent } from './code-flow.component';\nimport { BookDeskFlowComponent } from './desk-flow.component';\nimport { DeskFlowConfirmComponent } from './desk-flow/confirm.component';\nimport { DeskFlowFormComponent } from './desk-flow/form.component';\nimport { DeskFlowDetailedFormComponent } from './desk-flow/detailed-form.component';\nimport { DeskFlowMapComponent } from './desk-flow/map.component';\nimport { FlowSuccessComponent } from './flow-success.component';\nimport { BookSpaceFlowComponent } from './space-flow.component';\nimport { SpaceFlowConfirmComponent } from './space-flow/confirm.component';\nimport { DetailBookSpaceFormComponent } from './space-flow/detailed-form.component';\nimport { SpaceFlowFindItemComponent } from './space-flow/find-item.component';\nimport { SpaceFlowFindComponent } from './space-flow/find.component';\nimport { SpaceFlowFormComponent } from './space-flow/form.component';\nimport { SharedComponentModule } from '../components/shared.module';\n\nconst ROUTES: Route[] = [\n    {\n        path: '',\n        component: BookComponent,\n        children: [\n            { path: 'code', component: BookCodeFlowComponent },\n            { path: 'desks', redirectTo: 'desks/form' },\n            { path: 'desks/:step', component: BookDeskFlowComponent },\n            { path: 'spaces', redirectTo: 'spaces/form' },\n            { path: 'spaces/:step', component: BookSpaceFlowComponent },\n            { path: '*', redirectTo: 'spaces/form' },\n        ],\n    },\n    { path: '*', redirectTo: 'spaces/form' },\n];\n\n@NgModule({\n    declarations: [\n        BookComponent,\n        BookSpaceFlowComponent,\n        SpaceFlowFormComponent,\n        SpaceFlowFindComponent,\n        SpaceFlowFindItemComponent,\n        SpaceFlowConfirmComponent,\n        DetailBookSpaceFormComponent,\n        BookDeskFlowComponent,\n        DeskFlowFormComponent,\n        DeskFlowDetailedFormComponent,\n        DeskFlowMapComponent,\n        DeskFlowConfirmComponent,\n        BookCodeFlowComponent,\n        FlowSuccessComponent,\n    ],\n    imports: [\n        CommonModule,\n        SharedComponentModule,\n        ReactiveFormsModule,\n        MatButtonToggleModule,\n        FormsModule,\n        RouterModule.forChild(ROUTES),\n    ],\n})\nexport class BookModule {}\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = requiredArgs;\n\nfunction requiredArgs(required, args) {\n  if (args.length < required) {\n    throw new TypeError(required + ' argument' + (required > 1 ? 's' : '') + ' required, but only ' + args.length + ' present');\n  }\n}\n\nmodule.exports = exports.default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = toInteger;\n\nfunction toInteger(dirtyNumber) {\n  if (dirtyNumber === null || dirtyNumber === true || dirtyNumber === false) {\n    return NaN;\n  }\n\n  var number = Number(dirtyNumber);\n\n  if (isNaN(number)) {\n    return number;\n  }\n\n  return number < 0 ? Math.ceil(number) : Math.floor(number);\n}\n\nmodule.exports = exports.default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = setHours;\n\nvar _index = _interopRequireDefault(require(\"../_lib/toInteger/index.js\"));\n\nvar _index2 = _interopRequireDefault(require(\"../toDate/index.js\"));\n\nvar _index3 = _interopRequireDefault(require(\"../_lib/requiredArgs/index.js\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * @name setHours\n * @category Hour Helpers\n * @summary Set the hours to the given date.\n *\n * @description\n * Set the hours to the given date.\n *\n * ### v2.0.0 breaking changes:\n *\n * - [Changes that are common for the whole library](https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#Common-Changes).\n *\n * @param {Date|Number} date - the date to be changed\n * @param {Number} hours - the hours of the new date\n * @returns {Date} the new date with the hours set\n * @throws {TypeError} 2 arguments required\n *\n * @example\n * // Set 4 hours to 1 September 2014 11:30:00:\n * var result = setHours(new Date(2014, 8, 1, 11, 30), 4)\n * //=> Mon Sep 01 2014 04:30:00\n */\nfunction setHours(dirtyDate, dirtyHours) {\n  (0, _index3.default)(2, arguments);\n  var date = (0, _index2.default)(dirtyDate);\n  var hours = (0, _index.default)(dirtyHours);\n  date.setHours(hours);\n  return date;\n}\n\nmodule.exports = exports.default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = toDate;\n\nvar _index = _interopRequireDefault(require(\"../_lib/requiredArgs/index.js\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * @name toDate\n * @category Common Helpers\n * @summary Convert the given argument to an instance of Date.\n *\n * @description\n * Convert the given argument to an instance of Date.\n *\n * If the argument is an instance of Date, the function returns its clone.\n *\n * If the argument is a number, it is treated as a timestamp.\n *\n * If the argument is none of the above, the function returns Invalid Date.\n *\n * **Note**: *all* Date arguments passed to any *date-fns* function is processed by `toDate`.\n *\n * @param {Date|Number} argument - the value to convert\n * @returns {Date} the parsed date in the local time zone\n * @throws {TypeError} 1 argument required\n *\n * @example\n * // Clone the date:\n * const result = toDate(new Date(2014, 1, 11, 11, 30, 30))\n * //=> Tue Feb 11 2014 11:30:30\n *\n * @example\n * // Convert the timestamp to date:\n * const result = toDate(1392098430000)\n * //=> Tue Feb 11 2014 11:30:30\n */\nfunction toDate(argument) {\n  (0, _index.default)(1, arguments);\n  var argStr = Object.prototype.toString.call(argument); // Clone the date\n\n  if (argument instanceof Date || typeof argument === 'object' && argStr === '[object Date]') {\n    // Prevent the date to lose the milliseconds when passed to new Date() in IE10\n    return new Date(argument.getTime());\n  } else if (typeof argument === 'number' || argStr === '[object Number]') {\n    return new Date(argument);\n  } else {\n    if ((typeof argument === 'string' || argStr === '[object String]') && typeof console !== 'undefined') {\n      // eslint-disable-next-line no-console\n      console.warn(\"Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule\"); // eslint-disable-next-line no-console\n\n      console.warn(new Error().stack);\n    }\n\n    return new Date(NaN);\n  }\n}\n\nmodule.exports = exports.default;"],"sourceRoot":"webpack:///"}