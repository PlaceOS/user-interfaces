(self.webpackChunkconcierge=self.webpackChunkconcierge||[]).push([["apps_concierge_src_app_reports_reports_module_ts"],{1622:(fe,oe,E)=>{"use strict";E.r(oe),E.d(oe,{ReportsModule:()=>Nt});var F=E(8267),Q=E(8346),D=E(1733),t=E(9323),S=E(1211),e=E(4001),i=E(2146),a=E(8806),d=E(4452),n=E(3867),s=E(4555),u=E(8222),f=E(3231),p=E(7794),c=E(9735),g=E(5012),y=E(5178),x=E(8975),A=E(4057),T=E(2726),q=E(5131),G=864e5;function P(r,v){(0,q.Z)(2,arguments);var o=(0,c.Z)(r),l=(0,c.Z)(v),_=o.getTime()-(0,T.Z)(o),m=l.getTime()-(0,T.Z)(l);return Math.round((_-m)/G)}function b(r,v){var o=r.getFullYear()-v.getFullYear()||r.getMonth()-v.getMonth()||r.getDate()-v.getDate()||r.getHours()-v.getHours()||r.getMinutes()-v.getMinutes()||r.getSeconds()-v.getSeconds()||r.getMilliseconds()-v.getMilliseconds();return o<0?-1:o>0?1:o}function O(r,v){(0,q.Z)(2,arguments);var o=(0,A.Z)(r),l=(0,A.Z)(v),_=b(o,l),m=Math.abs(P(o,l));o.setDate(o.getDate()-_*m);var w=Number(b(o,l)===-_),L=_*(m-w);return 0===L?0:L}var R=E(5269),N=E(6613),j=E(4008),h=E(1119),Z=E(8252),M=E(899),k=E(9820),I=E(9026),X=E(592),U=E(8377),B=E(8537);let V=(()=>{class r{constructor(o){this._org=o,this._generate=new j.xQ,this._loading=new h.X(""),this._active_bookings=new h.X([]),this._options=new h.X({start:new Date,end:new Date}),this._bookings_list=this._generate.pipe((0,k.b)(500),(0,I.w)(l=>{var _;const m=this._options.getValue();if(this._loading.next("Loading report details..."),!(null==m?void 0:m.type)&&!(null===(_=null==m?void 0:m.zones)||void 0===_?void 0:_.length))return(0,Z.of)([]);const w=(0,c.Z)((null==m?void 0:m.start)?new Date(m.start):new Date).valueOf(),L=(0,g.Z)((null==m?void 0:m.end)?new Date(m.end):w).valueOf(),z=(null==m?void 0:m.zones)?m.zones.filter(J=>"All"!==J).join(","):"",Y={period_start:Math.floor(w/1e3),period_end:Math.floor(L/1e3)};return"desks"===m.type?(0,f.F2)(Object.assign(Object.assign({},Y),{zones:z,type:"desk"})):(0,p.u$)(Object.assign(Object.assign({},Y),{zone_ids:z}))}),(0,X.K)(l=>[]),(0,U.U)(l=>(this._loading.next(""),(null==l?void 0:l.length)||(0,n.cB)("No bookings for the selected levels and period"),this._active_bookings.next(l||[]),l)),(0,B.d)()),this.loading=this._loading.asObservable(),this.options=this._options.asObservable(),this.bookings=this._active_bookings.asObservable(),this.counts=this._options.pipe((0,k.b)(500),(0,I.w)(l=>{const _=(l.zones||[]).filter(m=>-1!==m&&"All"!==m);return Promise.all(_.map(m=>(0,u.rlq)(m,"desks").pipe((0,U.U)(w=>[m,w.details.length])).toPromise()))}),(0,X.K)(l=>[]),(0,U.U)(l=>{const _={};return this._active_bookings.next([]),l.forEach(([m,w])=>_[m]=w),_}),(0,B.d)()),this.stats=(0,M.aj)([this.counts,this.bookings]).pipe((0,U.U)(([l,_])=>_[0]instanceof p.ym?function(r,v=8){const o=r.reduce((w,L)=>w+L.attendees.length,0),l=r.reduce((w,L)=>{var z;return w+(null===(z=L.system)||void 0===z?void 0:z.capacity)},0),_=Math.floor(r.reduce((w,L)=>w+L.duration,0)/(60*v)*100)/100,m=Math.floor(o/l*100)/100;return{count:r.length,avg_length:Math.floor(r.reduce((w,L)=>w+L.duration,0)/r.length*100)/100,efficiency:Math.floor((_+m)/2*100)/100,total_users:o,total_capacity:l,occupancy:m,utilisation:_,events:r}}(_,8*this.duration):function(r,v=1,o={}){const l=Object.keys(o).reduce((m,w)=>m+(o[w]||0),0),_=Math.floor(r.length/l/v*100)/100;return{total:l,count:r.length,utilisation:_,events:r}}(_||[],this.duration,l))),this.day_list=(0,M.aj)([this.options,this.stats]).pipe((0,U.U)(([l,_])=>{const{start:m}=l;let w=(0,c.Z)(m);const L=(0,g.Z)(l.end||w),z=[];for(;(0,y.Z)(w,L);){const Y=(0,c.Z)(w).valueOf(),J=(0,g.Z)(Y).valueOf(),K=_.events.filter(W=>(0,n.MZ)(Y,J,W.date,W.date+60*W.duration*1e3));z.push({date:Y,total:_.total,free:_.total-K.length,approved:K.reduce((W,C)=>W+(C.approved?1:0),0),count:K.length,utilisation:(K.length/_.total*100).toFixed(1)}),w=(0,x.Z)(w,1)}return z}),(0,B.d)(1)),this._bookings_list.subscribe(l=>l)}get duration(){const o=this._options.getValue();return Math.abs(O((0,c.Z)(o.start),(0,R.Z)((0,g.Z)(o.end),1)))}generateReport(){this._generate.next((new Date).valueOf())}setOptions(o){var l,_,m,w,L,z,Y;(null===(l=o.zones)||void 0===l?void 0:l.includes("All"))?o.zones=["All",...this._org.levelsForBuilding(this._org.building).map(J=>J.id)]:o.zones&&(null===(m=null===(_=this._options.getValue())||void 0===_?void 0:_.zones)||void 0===m?void 0:m.includes("All"))&&(o.zones=[]),(null===(w=o.start)||void 0===w?void 0:w.valueOf())!==(null===(L=this._options.getValue().start)||void 0===L?void 0:L.valueOf())&&(null===(z=o.end)||void 0===z?void 0:z.valueOf())!==(null===(Y=this._options.getValue().end)||void 0===Y?void 0:Y.valueOf())&&this._options.next(Object.assign(Object.assign({},this._options.getValue()),o))}downloadReport(){const o=this._options.getValue(),l=this._active_bookings.getValue();(0,n.Sv)(`report+${o.type}+${(0,N.Z)(o.start,"yyyy-MM-dd")}+${(0,N.Z)(o.end,"yyyy-MM-dd")}.csv`,(0,n.o3)(l.map(_=>{const m=_.toJSON();return delete m.zones,delete m.server_names,m})))}}return r.\u0275fac=function(o){return new(o||r)(e.LFG(s.w7))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var ee=E(3981),ae=E(1036),me=E(2157),se=E(6506),ie=E(7752),le=E(9372);function _e(r,v){if(1&r&&(e.TgZ(0,"mat-option",13),e._uU(1),e.qZA()),2&r){const o=v.$implicit;e.Q6J("value",o.id),e.xp6(1),e.hij(" ",o.display_name||o.name," ")}}function ye(r,v){1&r&&e._UZ(0,"mat-spinner",14),2&r&&e.Q6J("diameter",32)}function xe(r,v){1&r&&(e.TgZ(0,"p"),e._uU(1,"Generate Report"),e.qZA())}let Ze=(()=>{class r extends n.KG{constructor(o,l,_){super(),this._state=o,this._org=l,this._route=_,this.zones=[],this.types=[{id:"internal",name:"Internal"},{id:"external",name:"External"},{id:"cancelled",name:"Cancelled"}],this.type_list=this.types.map(m=>`${m.id}`),this.levels=this._org.active_levels,this.loading=this._state.loading,this.bookings=this._state.bookings,this.options=this._state.options,this.generateReport=()=>this._state.generateReport(),this.downloadReport=()=>this._state.downloadReport(),this.setStartDate=m=>this._state.setOptions({start:new Date(m)}),this.setEndDate=m=>this._state.setOptions({end:new Date(m)}),this.setZones=m=>this._state.setOptions({zones:m})}ngOnInit(){return(0,a.mG)(this,void 0,void 0,function*(){yield this._org.initialised.pipe((0,d.P)(o=>o)).toPromise(),this.subscription("route.query",this._route.queryParamMap.subscribe(o=>{if(o.has("zone_ids")){const l=o.get("zone_ids").split(",");if(l.length){const _=this._org.levelWithID(l);if(!_)return;this._org.building=this._org.buildings.find(m=>m.id===_.parent_id),this.setZones(l)}}}))})}}return r.\u0275fac=function(o){return new(o||r)(e.Y36(V),e.Y36(s.w7),e.Y36(D.gz))},r.\u0275cmp=e.Xpm({type:r,selectors:[["reports-options"]],features:[e.qOj],decls:27,vars:28,consts:[["appearance","outline",1,"w-48"],["multiple","","placeholder","Select Levels...",3,"ngModel","ngModelChange"],["value","All"],[3,"value",4,"ngFor","ngForOf"],["appearance","outline",1,"w-64"],[3,"rangePicker"],["matStartDate","","placeholder","Start date",3,"ngModel","ngModelChange"],["matEndDate","","placeholder","End date",3,"ngModel","ngModelChange"],["matSuffix","",3,"for"],["picker",""],["mat-button","",1,"ml-4",3,"disabled","click"],[3,"diameter",4,"ngIf"],[4,"ngIf"],[3,"value"],[3,"diameter"]],template:function(o,l){if(1&o&&(e.TgZ(0,"mat-form-field",0),e.TgZ(1,"mat-select",1),e.NdJ("ngModelChange",function(m){return l.setZones(m)}),e.ALo(2,"async"),e.TgZ(3,"mat-option",2),e._uU(4,"All Levels"),e.qZA(),e.YNc(5,_e,2,2,"mat-option",3),e.ALo(6,"async"),e.qZA(),e.qZA(),e.TgZ(7,"mat-form-field",4),e.TgZ(8,"mat-date-range-input",5),e.TgZ(9,"input",6),e.NdJ("ngModelChange",function(m){return m?l.setStartDate(m):""}),e.ALo(10,"async"),e.qZA(),e.TgZ(11,"input",7),e.NdJ("ngModelChange",function(m){return m?l.setEndDate(m):""}),e.ALo(12,"async"),e.qZA(),e.qZA(),e._UZ(13,"mat-datepicker-toggle",8),e._UZ(14,"mat-date-range-picker",null,9),e.qZA(),e.TgZ(16,"button",10),e.NdJ("click",function(){return l.generateReport()}),e.ALo(17,"async"),e.ALo(18,"async"),e.YNc(19,ye,1,1,"mat-spinner",11),e.ALo(20,"async"),e.YNc(21,xe,2,0,"p",12),e.ALo(22,"async"),e.qZA(),e.TgZ(23,"button",10),e.NdJ("click",function(){return l.downloadReport()}),e.ALo(24,"async"),e.TgZ(25,"p"),e._uU(26,"Download Report"),e.qZA(),e.qZA()),2&o){const _=e.MAs(15);let m,w,L,z,Y;e.xp6(1),e.Q6J("ngModel",null==(m=e.lcZ(2,10,l.options))?null:m.zones),e.xp6(4),e.Q6J("ngForOf",e.lcZ(6,12,l.levels)),e.xp6(3),e.Q6J("rangePicker",_),e.xp6(1),e.Q6J("ngModel",null==(w=e.lcZ(10,14,l.options))?null:w.start),e.xp6(2),e.Q6J("ngModel",null==(L=e.lcZ(12,16,l.options))?null:L.end),e.xp6(2),e.Q6J("for",_),e.xp6(3),e.Q6J("disabled",!!e.lcZ(17,18,l.loading)||!(null!=(z=e.lcZ(18,20,l.options))&&null!=z.zones&&z.zones.length)),e.xp6(3),e.Q6J("ngIf",e.lcZ(20,22,l.loading)),e.xp6(2),e.Q6J("ngIf",!e.lcZ(22,24,l.loading)),e.xp6(2),e.Q6J("disabled",!(null!=(Y=e.lcZ(24,26,l.bookings))&&Y.length))}},directives:[ee.KE,ae.gD,Q.JJ,Q.On,me.ey,F.sg,se.wx,se.zY,Q.Fj,se.By,se.nW,ee.R9,se._g,ie.lW,F.O5,le.$g],pipes:[F.Ov],styles:["[_nghost-%COMP%]{display:flex;align-items:center;background-color:#fff;height:5em;padding:0 1em}button[_ngcontent-%COMP%]{min-width:0;padding:0 .85rem}mat-form-field[_ngcontent-%COMP%]{height:3.25em;margin-left:1em}mat-slide-toggle[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:5.5em;white-space:initial;line-height:1.2em}\n/*# sourceMappingURL=reports-options.component.ts-angular-inline--71.css.map*/"]}),r})();var te=E(9680);const Ae=function(){return["/reports","desks"]},be=function(){return["/reports","spaces"]},we=function(){return["/reports","catering"]};let Oe=(()=>{class r{}return r.\u0275fac=function(o){return new(o||r)},r.\u0275cmp=e.Xpm({type:r,selectors:[["reports-menu"],["","reports-menu",""]],decls:30,vars:6,consts:[["matRipple","",1,"h-64","w-64","m-4","p-4","flex","flex-col","items-center","justify-center","bg-white","rounded","shadow","hover:bg-gray-100",3,"routerLink"],[1,"text-8xl"],[1,"text-xl","font-bold","mb-4"],[1,"flex","items-center"],[1,"ml-2"]],template:function(o,l){1&o&&(e.TgZ(0,"a",0),e.TgZ(1,"app-icon",1),e._uU(2,"room"),e.qZA(),e.TgZ(3,"h3",2),e._uU(4,"Desks"),e.qZA(),e.TgZ(5,"div",3),e.TgZ(6,"p"),e._uU(7,"View Report"),e.qZA(),e.TgZ(8,"app-icon",4),e._uU(9,"chevron_right"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(10,"a",0),e.TgZ(11,"app-icon",1),e._uU(12,"meeting_room"),e.qZA(),e.TgZ(13,"h3",2),e._uU(14,"Rooms"),e.qZA(),e.TgZ(15,"div",3),e.TgZ(16,"p"),e._uU(17,"View Report"),e.qZA(),e.TgZ(18,"app-icon",4),e._uU(19,"chevron_right"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(20,"a",0),e.TgZ(21,"app-icon",1),e._uU(22,"room_service"),e.qZA(),e.TgZ(23,"h3",2),e._uU(24,"Catering"),e.qZA(),e.TgZ(25,"div",3),e.TgZ(26,"p"),e._uU(27,"View Report"),e.qZA(),e.TgZ(28,"app-icon",4),e._uU(29,"chevron_right"),e.qZA(),e.qZA(),e.qZA()),2&o&&(e.Q6J("routerLink",e.DdM(3,Ae)),e.xp6(10),e.Q6J("routerLink",e.DdM(4,be)),e.xp6(10),e.Q6J("routerLink",e.DdM(5,we)))},directives:[D.yS,me.wG,te.o],styles:["[_nghost-%COMP%]{display:flex;align-items:center;justify-content:center;background:var(--bg)}\n/*# sourceMappingURL=reports-menu.component.ts-angular-inline--73.css.map*/"]}),r})();const Te=["app-reports",""];function Me(r,v){1&r&&e._UZ(0,"div",4)}let Se=(()=>{class r{constructor(o){this._router=o}get path(){const o=this._router.url.split("/");return o[o.length-1]}}return r.\u0275fac=function(o){return new(o||r)(e.Y36(D.F0))},r.\u0275cmp=e.Xpm({type:r,selectors:[["","app-reports",""]],attrs:Te,decls:6,vars:1,consts:[[1,"h-full"],[1,"relative","overflow-hidden","flex","flex-col","flex-1","w-1/2","h-full"],[1,"flex-1","h-1/2","w-full","overflow-auto"],["reports-menu","","class","absolute inset-0",4,"ngIf"],["reports-menu","",1,"absolute","inset-0"]],template:function(o,l){1&o&&(e._UZ(0,"sidebar",0),e.TgZ(1,"main",1),e._UZ(2,"reports-options"),e.TgZ(3,"div",2),e._UZ(4,"router-outlet"),e.qZA(),e.YNc(5,Me,1,0,"div",3),e.qZA()),2&o&&(e.xp6(5),e.Q6J("ngIf","reports"===l.path))},directives:[i.k,Ze,D.lC,F.O5,Oe],styles:["[_nghost-%COMP%]{display:flex;height:100%;width:100%;background:var(--bg)}\n/*# sourceMappingURL=reports.component.ts-angular-inline--70.css.map*/"]}),r})();var Ue=E(258),Le=E(9148),Re=E(7438);let Ee=(()=>{class r{constructor(o){this._state=o,this.total_count=this._state.stats.pipe((0,U.U)(l=>l.count||0)),this.avg_length=this._state.stats.pipe((0,U.U)(l=>(0,Re.Z)({minutes:l.avg_length||0}))),this.efficiency=this._state.stats.pipe((0,U.U)(l=>(100*(l.efficiency||0)).toFixed(1))),this.total_users=this._state.stats.pipe((0,U.U)(l=>l.total_users||0)),this.total_capacity=this._state.stats.pipe((0,U.U)(l=>l.total_capacity||0)),this.occupancy=this._state.stats.pipe((0,U.U)(l=>(100*(l.occupancy||0)).toFixed(1))),this.utilisation=this._state.stats.pipe((0,U.U)(l=>(100*(l.utilisation||0)).toFixed(1)))}}return r.\u0275fac=function(o){return new(o||r)(e.Y36(V))},r.\u0275cmp=e.Xpm({type:r,selectors:[["report-spaces-overall"]],decls:44,vars:21,consts:[[1,"m-4","p-4","rounded","bg-white","shadow","flex","justify-center","items-center","space-x-2"],[1,"flex","flex-col","items-center","flex-1"],[1,"flex-1","flex","flex-col","items-center","justify-center"]],template:function(o,l){1&o&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"h3"),e._uU(3,"Total Bookings"),e.qZA(),e.TgZ(4,"p"),e._uU(5),e.ALo(6,"async"),e.qZA(),e.qZA(),e.TgZ(7,"div",1),e.TgZ(8,"h3"),e._uU(9,"Average Bookings Length"),e.qZA(),e.TgZ(10,"p"),e._uU(11),e.ALo(12,"async"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(13,"div",0),e.TgZ(14,"div",2),e.TgZ(15,"h3"),e._uU(16,"Overall Efficiency"),e.qZA(),e.TgZ(17,"p"),e._uU(18),e.ALo(19,"async"),e.qZA(),e.qZA(),e.TgZ(20,"div",2),e.TgZ(21,"h3"),e._uU(22,"Occupancy"),e.qZA(),e.TgZ(23,"p"),e._uU(24),e.ALo(25,"async"),e.qZA(),e.qZA(),e.TgZ(26,"div",2),e.TgZ(27,"h3"),e._uU(28,"Total Attendees"),e.qZA(),e.TgZ(29,"p"),e._uU(30),e.ALo(31,"async"),e.qZA(),e.qZA(),e.TgZ(32,"div",2),e.TgZ(33,"h3"),e._uU(34,"Total Capacity"),e.qZA(),e.TgZ(35,"p"),e._uU(36),e.ALo(37,"async"),e.qZA(),e.qZA(),e.TgZ(38,"div",2),e.TgZ(39,"h3"),e._uU(40,"Utilisation"),e.qZA(),e.TgZ(41,"p"),e._uU(42),e.ALo(43,"async"),e.qZA(),e.qZA(),e.qZA()),2&o&&(e.xp6(5),e.Oqu(e.lcZ(6,7,l.total_count)||0),e.xp6(6),e.Oqu(e.lcZ(12,9,l.avg_length)||"None"),e.xp6(7),e.hij("",e.lcZ(19,11,l.efficiency)||0,"%"),e.xp6(6),e.hij("",e.lcZ(25,13,l.occupancy)||0,"%"),e.xp6(6),e.Oqu(e.lcZ(31,15,l.total_users)||0),e.xp6(6),e.Oqu(e.lcZ(37,17,l.total_capacity)||0),e.xp6(6),e.hij("",e.lcZ(43,19,l.utilisation)||0,"%"))},pipes:[F.Ov],styles:["h3[_ngcontent-%COMP%]{font-weight:500}p[_ngcontent-%COMP%]:not([simple]){font-size:1.75rem}\n/*# sourceMappingURL=report-spaces-overall.component.ts-angular-inline--74.css.map*/"]}),r})();var re=E(6928),ne=E(5966);const ze=function(){return["name","capacity","count","utilisation","avg_attendees","occupancy"]},Ne=function(){return["Name","Capacity","Meeting Count","Utilisation","Avg. Attendees","Occupancy"]},qe=function(){return["flex"]};let ke=(()=>{class r{constructor(o){this._reports=o,this.space_list=(0,M.aj)([this._reports.stats,this._reports.options]).pipe((0,k.b)(300),(0,U.U)(([l,{start:_,end:m}])=>{let w=[];for(const z of l.events){const Y=z.resources||[];for(const J of Y){w.find(W=>W.id===J.id)||w.push({id:J.id,name:J.display_name||J.name,capacity:J.capacity||1,count:0,attendees:0,avg_attendees:0,usage:0,utilisation:0,occupancy:0});const K=w.find(W=>W.id===J.id);K.count+=1,K.usage+=z.duration,K.attendees+=z.attendees.length}}const L=O(m,_);for(const z of w)z.avg_attendees=Math.floor(z.attendees/z.count*100)/100,z.utilisation=Math.floor(z.usage/60/8/L*100)/100,z.occupancy=Math.floor(z.avg_attendees/z.capacity*100)/100;return w})),this.download=()=>(0,a.mG)(this,void 0,void 0,function*(){const l=yield this.space_list.pipe((0,re.q)(1)).toPromise();(0,n.Sv)("report-spaces-usage.csv",(0,n.o3)(l))})}}return r.\u0275fac=function(o){return new(o||r)(e.Y36(V))},r.\u0275cmp=e.Xpm({type:r,selectors:[["report-spaces-space-listing"]],decls:8,vars:8,consts:[[1,"m-4","rounded","bg-white","shadow","overflow-hidden"],[1,"border-b","border-gray-300","px-4","py-2","flex","items-center"],[1,"font-bold","text-xl","flex-1"],["mat-icon-button","",3,"click"],[3,"dataSource","pagination","columns","display_column","column_size"]],template:function(o,l){1&o&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"h3",2),e._uU(3,"Space Utilisation"),e.qZA(),e.TgZ(4,"button",3),e.NdJ("click",function(){return l.download()}),e.TgZ(5,"app-icon"),e._uU(6,"download"),e.qZA(),e.qZA(),e.qZA(),e._UZ(7,"custom-table",4),e.qZA()),2&o&&(e.xp6(7),e.Q6J("dataSource",l.space_list)("pagination",!0)("columns",e.DdM(5,ze))("display_column",e.DdM(6,Ne))("column_size",e.DdM(7,qe)))},directives:[ie.lW,te.o,ne.C],styles:[""]}),r})();const De=function(){return["name","capacity","count","avg_attendees","occupancy"]},je=function(){return["Name","Capacity","Meeting Count","Avg. Attendees","Occupancy"]},Pe=function(){return["flex"]};let Be=(()=>{class r{constructor(o){this._reports=o,this.user_list=(0,M.aj)([this._reports.stats]).pipe((0,k.b)(300),(0,U.U)(([l])=>{let _=[];for(const m of l.events){const w=m.attendees||[],L=m.resources.reduce((z,Y)=>z+Y.capacity,0)||1;for(const z of w){_.find(J=>J.email===z.email)||_.push({id:z.email,name:z.name,capacity:L,count:0,attendees:0,avg_attendees:0,occupancy:0});const Y=_.find(J=>J.id===z.email);Y.count+=1,Y.attendees+=m.attendees.length}}for(const m of _)m.avg_attendees=Math.floor(m.attendees/m.count*100)/100,m.occupancy=Math.floor(m.avg_attendees/m.capacity*100)/100;return _}),(0,B.d)(1)),this.download=()=>(0,a.mG)(this,void 0,void 0,function*(){const l=yield this.user_list.pipe((0,re.q)(1)).toPromise();(0,n.Sv)("report-space-attendee-usage.csv",(0,n.o3)(l))})}}return r.\u0275fac=function(o){return new(o||r)(e.Y36(V))},r.\u0275cmp=e.Xpm({type:r,selectors:[["report-spaces-user-listing"]],decls:8,vars:8,consts:[[1,"m-4","rounded","bg-white","shadow","overflow-hidden"],[1,"border-b","border-gray-300","px-4","py-2","flex","items-center"],[1,"font-bold","text-xl","flex-1"],["mat-icon-button","",3,"click"],[3,"dataSource","pagination","columns","display_column","column_size"]],template:function(o,l){1&o&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"h3",2),e._uU(3,"Staff Utilisation"),e.qZA(),e.TgZ(4,"button",3),e.NdJ("click",function(){return l.download()}),e.TgZ(5,"app-icon"),e._uU(6,"download"),e.qZA(),e.qZA(),e.qZA(),e._UZ(7,"custom-table",4),e.qZA()),2&o&&(e.xp6(7),e.Q6J("dataSource",l.user_list)("pagination",!0)("columns",e.DdM(5,De))("display_column",e.DdM(6,je))("column_size",e.DdM(7,Pe)))},directives:[ie.lW,te.o,ne.C],styles:[""]}),r})();const Ie=["report-spaces",""];function Ye(r,v){1&r&&(e.ynx(0),e._UZ(1,"report-spaces-overall"),e._UZ(2,"report-spaces-space-listing"),e._UZ(3,"report-spaces-user-listing"),e.BQk())}function Fe(r,v){if(1&r&&(e.ynx(0),e.YNc(1,Ye,4,0,"ng-container",0),e.ALo(2,"async"),e.BQk()),2&r){const o=e.oxw(),l=e.MAs(5);e.xp6(1),e.Q6J("ngIf",e.lcZ(2,2,o.total_count))("ngIfElse",l)}}function Qe(r,v){1&r&&(e.TgZ(0,"div",3),e._UZ(1,"mat-spinner",4),e.TgZ(2,"p",5),e._uU(3,"Loading report data..."),e.qZA(),e.qZA()),2&r&&(e.xp6(1),e.Q6J("diameter",32))}function Ge(r,v){1&r&&(e.TgZ(0,"div",3),e.TgZ(1,"p",5),e._uU(2," Select levels and time period to generate a report. "),e.qZA(),e.qZA())}let Je=(()=>{class r{constructor(o){this._state=o,this.total_count=this._state.stats.pipe((0,U.U)(l=>l.count||0)),this.loading=this._state.loading}ngOnInit(){this._state.setOptions({type:"events"})}}return r.\u0275fac=function(o){return new(o||r)(e.Y36(V))},r.\u0275cmp=e.Xpm({type:r,selectors:[["","report-spaces",""]],attrs:Ie,decls:6,vars:4,consts:[[4,"ngIf","ngIfElse"],["load_state",""],["empty_state",""],[1,"h-full","w-full","flex","flex-col","items-center","p-8"],[1,"mb-4",3,"diameter"],["simple",""]],template:function(o,l){if(1&o&&(e.YNc(0,Fe,3,4,"ng-container",0),e.ALo(1,"async"),e.YNc(2,Qe,4,1,"ng-template",null,1,e.W1O),e.YNc(4,Ge,3,0,"ng-template",null,2,e.W1O)),2&o){const _=e.MAs(3);e.Q6J("ngIf",!e.lcZ(1,2,l.loading))("ngIfElse",_)}},directives:[F.O5,Ee,ke,Be,le.$g],pipes:[F.Ov],styles:[""]}),r})();var ge=E(4760);let Xe=(()=>{class r extends n.KG{constructor(o,l){super(),this._state=o,this._org=l,this.day_list=this._state.day_list,this.stats=(0,M.aj)([this._state.options,this._state.counts])}ngOnInit(){this.subscription("day_list",this.day_list.subscribe(o=>this.updateDailyChart(o))),this.subscription("stats",this.stats.subscribe(([o,l])=>this.updateLevelChart(o,l)))}updateDailyChart(o){const l={labels:o.map(_=>(0,N.Z)(_.date,"dd MMM")),series:[o.map(_=>_.utilisation)]};this._day_chart=new ge.Line("#day-chart",l)}updateLevelChart(o,l){let{zones:_}=o||{};_.includes("All")&&(_=this._org.levels.filter(w=>w.parent_id===this._org.building.id).map(w=>w.id));const m={labels:(_||[]).map(w=>{const L=this._org.levelWithID([w]);return(null==L?void 0:L.display_name)||L.name||""}),series:(_||[]).map(w=>l[w])};this._level_chart=new ge.Pie("#level-chart",m)}}return r.\u0275fac=function(o){return new(o||r)(e.Y36(V),e.Y36(s.w7))},r.\u0275cmp=e.Xpm({type:r,selectors:[["report-desks-charts"]],features:[e.qOj],decls:11,vars:0,consts:[[1,"flex","items-center","space-x-4","w-full","px-4"],[1,"bg-white","rounded","shadow","flex-1"],[1,"border-b","border-gray-300","p-4","text-xl","font-bold"],["id","day-chart",1,"ct-chart","ct-octave"],["util_chart",""],["id","level-chart",1,"ct-chart","ct-octave"],["level_chart",""]],template:function(o,l){1&o&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e._uU(3," Daily Utilisation "),e.qZA(),e._UZ(4,"div",3,4),e.qZA(),e.TgZ(6,"div",1),e.TgZ(7,"div",2),e._uU(8," Level Utilisation "),e.qZA(),e._UZ(9,"div",5,6),e.qZA(),e.qZA())},styles:["[_nghost-%COMP%]{display:block}\n/*# sourceMappingURL=report-desks-charts.component.ts-angular-inline--86.css.map*/"]}),r})();function He(r,v){1&r&&(e._uU(0),e.ALo(1,"date")),2&r&&e.hij(" ",e.xi3(1,1,v.data,"mediumDate")," ")}function Ve(r,v){1&r&&e._uU(0),2&r&&e.hij(" ",v.data||"0","% ")}const We=function(){return["date","usage","approved","count","utilisation"]},$e=function(){return["Date","Used Desks","Approved Bookings","Total Requests","Utilisation"]},Ke=function(){return["flex"]},Ce=function(r,v,o){return{date:r,usage:v,utilisation:o}};let et=(()=>{class r{constructor(o){this._state=o,this.day_list=this._state.day_list,this.download=()=>(0,a.mG)(this,void 0,void 0,function*(){let l=yield this.day_list.pipe((0,re.q)(1)).toPromise();l=l.map(_=>Object.assign(Object.assign({},_),{date:(0,N.Z)(_.date,"MMMM d, y(EEE)")})),(0,n.Sv)("desks-usage.csv",(0,n.o3)(l))})}}return r.\u0275fac=function(o){return new(o||r)(e.Y36(V))},r.\u0275cmp=e.Xpm({type:r,selectors:[["report-desks-overall-list"]],decls:12,vars:13,consts:[[1,"m-4","rounded","bg-white","shadow","overflow-hidden"],[1,"border-b","border-gray-300","p-4","flex","items-center"],[1,"font-bold","text-xl","flex-1"],["mat-icon-button","",3,"click"],["red-header","",3,"dataSource","pagination","columns","display_column","column_size","template"],["date_view",""],["percent_view",""]],template:function(o,l){if(1&o&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"h3",2),e._uU(3,"Daily Utilisation"),e.qZA(),e.TgZ(4,"button",3),e.NdJ("click",function(){return l.download()}),e.TgZ(5,"app-icon"),e._uU(6,"download"),e.qZA(),e.qZA(),e.qZA(),e._UZ(7,"custom-table",4),e.YNc(8,He,2,4,"ng-template",null,5,e.W1O),e.YNc(10,Ve,1,1,"ng-template",null,6,e.W1O),e.qZA()),2&o){const _=e.MAs(9),m=e.MAs(11);e.xp6(7),e.Q6J("dataSource",l.day_list)("pagination",!0)("columns",e.DdM(6,We))("display_column",e.DdM(7,$e))("column_size",e.DdM(8,Ke))("template",e.kEZ(9,Ce,_,m,m))}},directives:[ie.lW,te.o,ne.C],pipes:[F.uU],encapsulation:2}),r})();function tt(r,v){1&r&&e._uU(0),2&r&&e.hij(" ",v.data||"0","% ")}const nt=function(){return["name","avg_usage","approved","count","utilisation"]},st=function(){return["Level","Avg. Used Desks","Approved Bookings","Total Requests","Utilisation"]},it=function(){return["flex"]},rt=function(r){return{utilisation:r}};let ot=(()=>{class r{constructor(o,l){this._state=o,this._org=l,this.level_list=(0,M.aj)([this._state.options,this._state.stats,this._state.counts]).pipe((0,U.U)(([_,m,w])=>{const{start:L,end:z,zones:Y}=_,J=O(z,L),K=[];for(const W of Y){if("All"===W)continue;const C=this._org.levelWithID([W]),de=w[W]||0,pe=m.events.filter(qt=>qt.zones.includes(W));let ce=(de*J-pe.length)/J;ce%1!=0&&(ce=ce.toFixed(2)),K.push({name:(null==C?void 0:C.display_name)||(null==C?void 0:C.name),free:ce,total:de,count:pe.length,utilisation:(pe.length/(de*J)*100||0).toFixed(2)})}return K}),(0,B.d)(1)),this.download=()=>(0,a.mG)(this,void 0,void 0,function*(){let _=yield this.level_list.pipe((0,re.q)(1)).toPromise();(0,n.Sv)("desks-levels-usage.csv",(0,n.o3)(_))})}}return r.\u0275fac=function(o){return new(o||r)(e.Y36(V),e.Y36(s.w7))},r.\u0275cmp=e.Xpm({type:r,selectors:[["report-desks-levels-list"]],decls:11,vars:11,consts:[[1,"px-4","mb-4","w-full"],[1,"rounded","bg-white","shadow","overflow-hidden","w-full"],[1,"border-b","border-gray-300","p-4","flex","items-center"],[1,"font-bold","text-xl","flex-1"],["mat-icon-button","",3,"click"],["red-header","",3,"dataSource","pagination","columns","display_column","column_size","template"],["percent_view",""]],template:function(o,l){if(1&o&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"h3",3),e._uU(4,"Level Utilisation"),e.qZA(),e.TgZ(5,"button",4),e.NdJ("click",function(){return l.download()}),e.TgZ(6,"app-icon"),e._uU(7,"download"),e.qZA(),e.qZA(),e.qZA(),e._UZ(8,"custom-table",5),e.YNc(9,tt,1,1,"ng-template",null,6,e.W1O),e.qZA(),e.qZA()),2&o){const _=e.MAs(10);e.xp6(8),e.Q6J("dataSource",l.level_list)("pagination",!0)("columns",e.DdM(6,nt))("display_column",e.DdM(7,st))("column_size",e.DdM(8,it))("template",e.VKq(9,rt,_))}},directives:[ie.lW,te.o,ne.C],encapsulation:2}),r})();const at=["report-desks",""];function lt(r,v){if(1&r&&(e.ynx(0),e.TgZ(1,"div",3),e.TgZ(2,"div",4),e.TgZ(3,"h3"),e._uU(4,"Total Bookings"),e.qZA(),e.TgZ(5,"p"),e._uU(6),e.ALo(7,"async"),e.qZA(),e.qZA(),e.TgZ(8,"div",4),e.TgZ(9,"h3"),e._uU(10,"Utilisation"),e.qZA(),e.TgZ(11,"p"),e._uU(12),e.ALo(13,"async"),e.qZA(),e.qZA(),e.qZA(),e._UZ(14,"report-desks-charts"),e._UZ(15,"report-desks-overall-list"),e._UZ(16,"report-desks-levels-list"),e.BQk()),2&r){const o=e.oxw(2);e.xp6(6),e.Oqu(e.lcZ(7,2,o.total_count)||0),e.xp6(6),e.hij("",e.lcZ(13,4,o.utilisation)||0,"%")}}function ct(r,v){if(1&r&&(e.ynx(0),e.YNc(1,lt,17,6,"ng-container",0),e.ALo(2,"async"),e.BQk()),2&r){const o=e.oxw(),l=e.MAs(5);e.xp6(1),e.Q6J("ngIf",e.lcZ(2,2,o.total_count))("ngIfElse",l)}}function ut(r,v){1&r&&(e.TgZ(0,"div",5),e._UZ(1,"mat-spinner",6),e.TgZ(2,"p",7),e._uU(3,"Loading report data..."),e.qZA(),e.qZA()),2&r&&(e.xp6(1),e.Q6J("diameter",32))}function dt(r,v){1&r&&(e.TgZ(0,"div",5),e.TgZ(1,"p",7),e._uU(2," Select levels and time period to generate a report. "),e.qZA(),e.qZA())}let pt=(()=>{class r{constructor(o){this._state=o,this.total_count=this._state.stats.pipe((0,U.U)(l=>l.count||0)),this.utilisation=this._state.stats.pipe((0,U.U)(l=>(100*(l.utilisation||0)).toFixed(1))),this.loading=this._state.loading}ngOnInit(){this._state.setOptions({type:"desks"})}}return r.\u0275fac=function(o){return new(o||r)(e.Y36(V))},r.\u0275cmp=e.Xpm({type:r,selectors:[["","report-desks",""]],attrs:at,decls:6,vars:4,consts:[[4,"ngIf","ngIfElse"],["load_state",""],["empty_state",""],[1,"m-4","p-4","rounded","bg-white","shadow","flex","justify-center","items-center","space-x-2"],[1,"flex","flex-col","items-center","flex-1"],[1,"h-full","w-full","flex","flex-col","items-center","p-8"],[1,"mb-4",3,"diameter"],["simple",""]],template:function(o,l){if(1&o&&(e.YNc(0,ct,3,4,"ng-container",0),e.ALo(1,"async"),e.YNc(2,ut,4,1,"ng-template",null,1,e.W1O),e.YNc(4,dt,3,0,"ng-template",null,2,e.W1O)),2&o){const _=e.MAs(3);e.Q6J("ngIf",!e.lcZ(1,2,l.loading))("ngIfElse",_)}},directives:[F.O5,Xe,et,ot,le.$g],pipes:[F.Ov],styles:["h3[_ngcontent-%COMP%]{font-weight:500}p[_ngcontent-%COMP%]:not([simple]){font-size:1.75rem}\n/*# sourceMappingURL=report-desks.component.ts-angular-inline--72.css.map*/"]}),r})();var he=E(9434);let ue=(()=>{class r{constructor(o){this._reports=o,this.catering_orders=this._reports.bookings.pipe((0,U.U)(l=>(0,n.xH)(l.filter(m=>{var w,L;return null===(L=null===(w=m.extension_data)||void 0===w?void 0:w.catering)||void 0===L?void 0:L.length}).map(m=>{var w;return null===(w=m.extension_data)||void 0===w?void 0:w.catering.map(L=>new he.GX(Object.assign(Object.assign({},L),{deliver_at:m.date,event:m})))})).filter(m=>m).sort((m,w)=>{var L,z;return(null===(L=m.event)||void 0===L?void 0:L.date)-(null===(z=w.event)||void 0===z?void 0:z.date)})),(0,B.d)(1)),this.catering_items=this.catering_orders.pipe((0,U.U)(l=>{var _;const m=[];for(const w of l)for(const L of(null==w?void 0:w.items)||[]){const z=m.findIndex(Y=>L.options_string===Y.options_string);z>=0?L[z]=new he.Ud(Object.assign(Object.assign({},L),{quantity:(null==L?void 0:L.quantity)+(null===(_=L[z])||void 0===_?void 0:_.quantity)})):m.push(L)}return m.sort((w,L)=>L.quantity-w.quantity)})),this.stats=(0,M.aj)([this.catering_orders,this.catering_items]).pipe((0,U.U)(([l,_])=>{const m=l.reduce((w,L)=>w+L.total_cost,0);return{order_count:l.length,unique_items:_.length,item_count:l.reduce((w,L)=>w+L.item_count,0),total_cost:m,avg_cost:m/l.length}}))}downloadOrders(){return(0,a.mG)(this,void 0,void 0,function*(){const o=yield this.catering_orders.pipe((0,re.q)(1)).toPromise(),l=(0,n.o3)(o);return(0,n.Sv)("catering-orders.csv",l)})}}return r.\u0275fac=function(o){return new(o||r)(e.LFG(V))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),ft=(()=>{class r{constructor(o){this._report=o,this.stats=this._report.stats}}return r.\u0275fac=function(o){return new(o||r)(e.Y36(ue))},r.\u0275cmp=e.Xpm({type:r,selectors:[["catering-report-overall"]],decls:32,vars:19,consts:[[1,"bg-white","shadow","rounded","m-2","px-8","w-48","h-24","flex","flex-col","items-center","justify-center"],[1,"text-3xl"],[1,""]],template:function(o,l){if(1&o&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e._uU(2),e.ALo(3,"async"),e.qZA(),e.TgZ(4,"div",2),e._uU(5,"Orders"),e.qZA(),e.qZA(),e.TgZ(6,"div",0),e.TgZ(7,"div",1),e._uU(8),e.ALo(9,"async"),e.qZA(),e.TgZ(10,"div",2),e._uU(11,"Unique Items"),e.qZA(),e.qZA(),e.TgZ(12,"div",0),e.TgZ(13,"div",1),e._uU(14),e.ALo(15,"async"),e.qZA(),e.TgZ(16,"div",2),e._uU(17,"Ordered Items"),e.qZA(),e.qZA(),e.TgZ(18,"div",0),e.TgZ(19,"div",1),e._uU(20),e.ALo(21,"currency"),e.ALo(22,"async"),e.qZA(),e.TgZ(23,"div",2),e._uU(24,"Total"),e.qZA(),e.qZA(),e.TgZ(25,"div",0),e.TgZ(26,"div",1),e._uU(27),e.ALo(28,"currency"),e.ALo(29,"async"),e.qZA(),e.TgZ(30,"div",2),e._uU(31,"Order Average"),e.qZA(),e.qZA()),2&o){let _,m,w,L,z;e.xp6(2),e.hij(" ",(null==(_=e.lcZ(3,5,l.stats))?null:_.order_count)||"0"," "),e.xp6(6),e.hij(" ",(null==(m=e.lcZ(9,7,l.stats))?null:m.unique_items)||"0"," "),e.xp6(6),e.Oqu((null==(w=e.lcZ(15,9,l.stats))?null:w.item_count)||"0"),e.xp6(6),e.hij(" ",e.lcZ(21,11,(null==(L=e.lcZ(22,13,l.stats))?null:L.total_cost)/100||0)," "),e.xp6(7),e.hij(" ",e.lcZ(28,15,(null==(z=e.lcZ(29,17,l.stats))?null:z.avg_cost)/100||0)," ")}},pipes:[F.Ov,F.H9],styles:["[_nghost-%COMP%]{display:flex;flex-wrap:wrap;align-items:center;justify-content:center;padding:.5rem}\n/*# sourceMappingURL=catering-report-overall.component.ts-angular-inline--85.css.map*/"]}),r})();var ve=E(4731);function mt(r,v){if(1&r&&(e._uU(0),e.ALo(1,"date"),e.ALo(2,"date")),2&r){const o=v.data;e.AsE(" ",e.lcZ(1,2,o)," at ",e.xi3(2,4,o,"shortTime")," ")}}function gt(r,v){1&r&&(e._uU(0),e.ALo(1,"currency")),2&r&&e.hij(" ",e.lcZ(1,1,v.data/100)," ")}const ht=function(){return["deliver_at","item_count","total_cost"]},vt=function(){return["Date","Items","Total Cost"]},_t=function(){return["flex"]},yt=function(r,v){return{deliver_at:r,total_cost:v}};let xt=(()=>{class r{constructor(o){this._report=o,this.orders=this._report.catering_orders,this.download=()=>this._report.downloadOrders()}}return r.\u0275fac=function(o){return new(o||r)(e.Y36(ue))},r.\u0275cmp=e.Xpm({type:r,selectors:[["catering-report-orders"]],decls:12,vars:12,consts:[[1,"w-[64rem]","max-w-[calc(100%-2rem)]","rounded","overflow-hidden","bg-white","shadow","mx-auto","my-2"],[1,"border-b","border-gray-200","flex","items-center","justify-between","px-4"],[1,"py-2","text-xl","font-medium"],["mat-button-icon","","matTooltip","Download list",3,"click"],["empty","No orders for selected period",1,"w-full","h-full",3,"dataSource","columns","display_column","column_size","template","pagination"],["date_state",""],["cost_state",""]],template:function(o,l){if(1&o&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"h2",2),e._uU(3,"Orders"),e.qZA(),e.TgZ(4,"button",3),e.NdJ("click",function(){return l.download()}),e.TgZ(5,"app-icon"),e._uU(6,"download"),e.qZA(),e.qZA(),e.qZA(),e._UZ(7,"custom-table",4),e.YNc(8,mt,3,7,"ng-template",null,5,e.W1O),e.YNc(10,gt,2,3,"ng-template",null,6,e.W1O),e.qZA()),2&o){const _=e.MAs(9),m=e.MAs(11);e.xp6(7),e.Q6J("dataSource",l.orders)("columns",e.DdM(6,ht))("display_column",e.DdM(7,vt))("column_size",e.DdM(8,_t))("template",e.WLB(9,yt,_,m))("pagination",!0)}},directives:[ve.gM,te.o,ne.C],pipes:[F.uU,F.H9],styles:[""]}),r})();function Zt(r,v){if(1&r&&(e.TgZ(0,"span",7),e._uU(1),e.qZA()),2&r){const o=e.oxw().data,l=e.oxw();e.Q6J("matTooltip",l.options(o)),e.xp6(1),e.hij(" ",o.length," option(s) ")}}function At(r,v){1&r&&e.YNc(0,Zt,2,2,"span",6),2&r&&e.Q6J("ngIf",v.data.length)}function bt(r,v){1&r&&(e._uU(0),e.ALo(1,"currency")),2&r&&e.hij(" ",e.lcZ(1,1,(v.data||0)/100)," ")}const wt=function(){return["name","options","quantity","unit_price","total_cost"]},Ot=function(){return["Name","Options","Quantity","Unit Price","Total Cost"]},Tt=function(){return["flex"]},Mt=function(r,v,o){return{options:r,unit_price:v,total_cost:o}};let St=(()=>{class r{constructor(o){this._report=o,this.items=this._report.catering_items}options(o){return o.map(l=>l.name).join("\n")}}return r.\u0275fac=function(o){return new(o||r)(e.Y36(ue))},r.\u0275cmp=e.Xpm({type:r,selectors:[["catering-report-items"]],decls:9,vars:13,consts:[[1,"w-[64rem]","max-w-[calc(100%-2rem)]","rounded","overflow-hidden","bg-white","shadow","mx-auto","my-2"],[1,"border-b","border-gray-200","flex","items-center","justify-between","px-4"],[1,"py-2","text-xl","font-medium"],["empty","No orders for selected period",1,"w-full","h-full",3,"dataSource","columns","display_column","column_size","template","pagination"],["option_state",""],["cost_state",""],["class","text-xs px-2 py-1 rounded bg-gray-300",3,"matTooltip",4,"ngIf"],[1,"text-xs","px-2","py-1","rounded","bg-gray-300",3,"matTooltip"]],template:function(o,l){if(1&o&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"h2",2),e._uU(3,"Ordered Items"),e.qZA(),e.qZA(),e._UZ(4,"custom-table",3),e.YNc(5,At,1,1,"ng-template",null,4,e.W1O),e.YNc(7,bt,2,3,"ng-template",null,5,e.W1O),e.qZA()),2&o){const _=e.MAs(6),m=e.MAs(8);e.xp6(4),e.Q6J("dataSource",l.items)("columns",e.DdM(6,wt))("display_column",e.DdM(7,Ot))("column_size",e.DdM(8,Tt))("template",e.kEZ(9,Mt,_,m,m))("pagination",!0)}},directives:[ne.C,F.O5,ve.gM],pipes:[F.H9],styles:[""]}),r})();function Ut(r,v){1&r&&(e.TgZ(0,"div",4),e._UZ(1,"catering-report-overall"),e._UZ(2,"catering-report-orders"),e._UZ(3,"catering-report-items"),e.qZA())}function Lt(r,v){if(1&r&&(e.ynx(0),e.YNc(1,Ut,4,0,"div",3),e.ALo(2,"async"),e.BQk()),2&r){const o=e.oxw(),l=e.MAs(5);e.xp6(1),e.Q6J("ngIf",e.lcZ(2,2,o.total_count))("ngIfElse",l)}}function Rt(r,v){1&r&&(e.TgZ(0,"div",5),e._UZ(1,"mat-spinner",6),e.TgZ(2,"p",7),e._uU(3,"Loading report data..."),e.qZA(),e.qZA()),2&r&&(e.xp6(1),e.Q6J("diameter",32))}function Et(r,v){1&r&&(e.TgZ(0,"div",5),e.TgZ(1,"p",7),e._uU(2," Select levels and time period to generate a report. "),e.qZA(),e.qZA())}const zt=[{path:"",component:Se,children:[{path:""},{path:"spaces",component:Je},{path:"desks",component:pt},{path:"catering",component:(()=>{class r{constructor(o){this._state=o,this.total_count=this._state.stats.pipe((0,U.U)(l=>l.count||0)),this.loading=this._state.loading}ngOnInit(){this._state.setOptions({type:"events"})}}return r.\u0275fac=function(o){return new(o||r)(e.Y36(V))},r.\u0275cmp=e.Xpm({type:r,selectors:[["catering-report"]],decls:6,vars:4,consts:[[4,"ngIf","ngIfElse"],["load_state",""],["empty_state",""],["class","h-full w-full",4,"ngIf","ngIfElse"],[1,"h-full","w-full"],[1,"h-full","w-full","flex","flex-col","items-center","p-8"],[1,"mb-4",3,"diameter"],["simple",""]],template:function(o,l){if(1&o&&(e.YNc(0,Lt,3,4,"ng-container",0),e.ALo(1,"async"),e.YNc(2,Rt,4,1,"ng-template",null,1,e.W1O),e.YNc(4,Et,3,0,"ng-template",null,2,e.W1O)),2&o){const _=e.MAs(3);e.Q6J("ngIf",!e.lcZ(1,2,l.loading))("ngIfElse",_)}},directives:[F.O5,ft,xt,St,le.$g],pipes:[F.Ov],styles:[""]}),r})()},{path:"**",redirectTo:"desks"}]}];let Nt=(()=>{class r{}return r.\u0275fac=function(o){return new(o||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[F.ez,Q.u5,t.v,Ue.YR,Le.PP,S.TU,D.Bz.forChild(zt)]]}),r})()},4760:function(fe,oe){var F,Q;Q=this,F=function(){return Q.Chartist=function(){var Q={version:"0.11.4"};return function(D,t){"use strict";var S=D.window,e=D.document;t.namespaces={svg:"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/xmlns/",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",ct:"http://gionkunz.github.com/chartist-js/ct"},t.noop=function(i){return i},t.alphaNumerate=function(i){return String.fromCharCode(97+i%26)},t.extend=function(i){var a,d,n;for(i=i||{},a=1;a<arguments.length;a++)for(var s in d=arguments[a])i[s]="object"!=typeof(n=d[s])||null===n||n instanceof Array?n:t.extend(i[s],n);return i},t.replaceAll=function(i,a,d){return i.replace(new RegExp(a,"g"),d)},t.ensureUnit=function(i,a){return"number"==typeof i&&(i+=a),i},t.quantity=function(i){if("string"==typeof i){var a=/^(\d+)\s*(.*)$/g.exec(i);return{value:+a[1],unit:a[2]||void 0}}return{value:i}},t.querySelector=function(i){return i instanceof Node?i:e.querySelector(i)},t.times=function(i){return Array.apply(null,new Array(i))},t.sum=function(i,a){return i+(a||0)},t.mapMultiply=function(i){return function(a){return a*i}},t.mapAdd=function(i){return function(a){return a+i}},t.serialMap=function(i,a){var d=[],n=Math.max.apply(null,i.map(function(s){return s.length}));return t.times(n).forEach(function(s,u){var f=i.map(function(p){return p[u]});d[u]=a.apply(null,f)}),d},t.roundWithPrecision=function(i,a){var d=Math.pow(10,a||t.precision);return Math.round(i*d)/d},t.precision=8,t.escapingMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"},t.serialize=function(i){return null==i?i:("number"==typeof i?i=""+i:"object"==typeof i&&(i=JSON.stringify({data:i})),Object.keys(t.escapingMap).reduce(function(a,d){return t.replaceAll(a,d,t.escapingMap[d])},i))},t.deserialize=function(i){if("string"!=typeof i)return i;i=Object.keys(t.escapingMap).reduce(function(a,d){return t.replaceAll(a,t.escapingMap[d],d)},i);try{i=void 0!==(i=JSON.parse(i)).data?i.data:i}catch(a){}return i},t.createSvg=function(i,a,d,n){var s;return a=a||"100%",d=d||"100%",Array.prototype.slice.call(i.querySelectorAll("svg")).filter(function(f){return f.getAttributeNS(t.namespaces.xmlns,"ct")}).forEach(function(f){i.removeChild(f)}),(s=new t.Svg("svg").attr({width:a,height:d}).addClass(n))._node.style.width=a,s._node.style.height=d,i.appendChild(s._node),s},t.normalizeData=function(i,a,d){var n,s={raw:i,normalized:{}};return s.normalized.series=t.getDataArray({series:i.series||[]},a,d),n=s.normalized.series.every(function(u){return u instanceof Array})?Math.max.apply(null,s.normalized.series.map(function(u){return u.length})):s.normalized.series.length,s.normalized.labels=(i.labels||[]).slice(),Array.prototype.push.apply(s.normalized.labels,t.times(Math.max(0,n-s.normalized.labels.length)).map(function(){return""})),a&&t.reverseData(s.normalized),s},t.safeHasProperty=function(i,a){return null!==i&&"object"==typeof i&&i.hasOwnProperty(a)},t.isDataHoleValue=function(i){return null==i||"number"==typeof i&&isNaN(i)},t.reverseData=function(i){i.labels.reverse(),i.series.reverse();for(var a=0;a<i.series.length;a++)"object"==typeof i.series[a]&&void 0!==i.series[a].data?i.series[a].data.reverse():i.series[a]instanceof Array&&i.series[a].reverse()},t.getDataArray=function(i,a,d){return i.series.map(function n(s){if(t.safeHasProperty(s,"value"))return n(s.value);if(t.safeHasProperty(s,"data"))return n(s.data);if(s instanceof Array)return s.map(n);if(!t.isDataHoleValue(s)){if(d){var u={};return"string"==typeof d?u[d]=t.getNumberOrUndefined(s):u.y=t.getNumberOrUndefined(s),u.x=s.hasOwnProperty("x")?t.getNumberOrUndefined(s.x):u.x,u.y=s.hasOwnProperty("y")?t.getNumberOrUndefined(s.y):u.y,u}return t.getNumberOrUndefined(s)}})},t.normalizePadding=function(i,a){return a=a||0,"number"==typeof i?{top:i,right:i,bottom:i,left:i}:{top:"number"==typeof i.top?i.top:a,right:"number"==typeof i.right?i.right:a,bottom:"number"==typeof i.bottom?i.bottom:a,left:"number"==typeof i.left?i.left:a}},t.getMetaData=function(i,a){var d=i.data?i.data[a]:i[a];return d?d.meta:void 0},t.orderOfMagnitude=function(i){return Math.floor(Math.log(Math.abs(i))/Math.LN10)},t.projectLength=function(i,a,d){return a/d.range*i},t.getAvailableHeight=function(i,a){return Math.max((t.quantity(a.height).value||i.height())-(a.chartPadding.top+a.chartPadding.bottom)-a.axisX.offset,0)},t.getHighLow=function(i,a,d){var n={high:void 0===(a=t.extend({},a,d?a["axis"+d.toUpperCase()]:{})).high?-Number.MAX_VALUE:+a.high,low:void 0===a.low?Number.MAX_VALUE:+a.low},s=void 0===a.high,u=void 0===a.low;return(s||u)&&function f(p){if(void 0!==p)if(p instanceof Array)for(var c=0;c<p.length;c++)f(p[c]);else{var g=d?+p[d]:+p;s&&g>n.high&&(n.high=g),u&&g<n.low&&(n.low=g)}}(i),(a.referenceValue||0===a.referenceValue)&&(n.high=Math.max(a.referenceValue,n.high),n.low=Math.min(a.referenceValue,n.low)),n.high<=n.low&&(0===n.low?n.high=1:n.low<0?n.high=0:(n.high>0||(n.high=1),n.low=0)),n},t.isNumeric=function(i){return null!==i&&isFinite(i)},t.isFalseyButZero=function(i){return!i&&0!==i},t.getNumberOrUndefined=function(i){return t.isNumeric(i)?+i:void 0},t.isMultiValue=function(i){return"object"==typeof i&&("x"in i||"y"in i)},t.getMultiValue=function(i,a){return t.isMultiValue(i)?t.getNumberOrUndefined(i[a||"y"]):t.getNumberOrUndefined(i)},t.rho=function(i){if(1===i)return i;function a(f,p){return f%p==0?p:a(p,f%p)}function d(f){return f*f+1}var u,n=2,s=2;if(i%2==0)return 2;do{n=d(n)%i,s=d(d(s))%i,u=a(Math.abs(n-s),i)}while(1===u);return u},t.getBounds=function(i,a,d,n){var s,f,p,u=0,c={high:a.high,low:a.low};c.valueRange=c.high-c.low,c.oom=t.orderOfMagnitude(c.valueRange),c.step=Math.pow(10,c.oom),c.min=Math.floor(c.low/c.step)*c.step,c.max=Math.ceil(c.high/c.step)*c.step,c.range=c.max-c.min,c.numberOfSteps=Math.round(c.range/c.step);var y=t.projectLength(i,c.step,c)<d,x=n?t.rho(c.range):0;if(n&&t.projectLength(i,1,c)>=d)c.step=1;else if(n&&x<c.step&&t.projectLength(i,x,c)>=d)c.step=x;else for(;;){if(y&&t.projectLength(i,c.step,c)<=d)c.step*=2;else{if(y||!(t.projectLength(i,c.step/2,c)>=d))break;if(c.step/=2,n&&c.step%1!=0){c.step*=2;break}}if(u++>1e3)throw new Error("Exceeded maximum number of iterations while optimizing scale step!")}var A=2221e-19;function T(P,b){return P===(P+=b)&&(P*=1+(b>0?A:-A)),P}for(c.step=Math.max(c.step,A),f=c.min,p=c.max;f+c.step<=c.low;)f=T(f,c.step);for(;p-c.step>=c.high;)p=T(p,-c.step);c.min=f,c.max=p,c.range=c.max-c.min;var q=[];for(s=c.min;s<=c.max;s=T(s,c.step)){var G=t.roundWithPrecision(s);G!==q[q.length-1]&&q.push(G)}return c.values=q,c},t.polarToCartesian=function(i,a,d,n){var s=(n-90)*Math.PI/180;return{x:i+d*Math.cos(s),y:a+d*Math.sin(s)}},t.createChartRect=function(i,a,d){var n=!(!a.axisX&&!a.axisY),s=n?a.axisY.offset:0,u=n?a.axisX.offset:0,f=i.width()||t.quantity(a.width).value||0,p=i.height()||t.quantity(a.height).value||0,c=t.normalizePadding(a.chartPadding,d);f=Math.max(f,s+c.left+c.right),p=Math.max(p,u+c.top+c.bottom);var g={padding:c,width:function(){return this.x2-this.x1},height:function(){return this.y1-this.y2}};return n?("start"===a.axisX.position?(g.y2=c.top+u,g.y1=Math.max(p-c.bottom,g.y2+1)):(g.y2=c.top,g.y1=Math.max(p-c.bottom-u,g.y2+1)),"start"===a.axisY.position?(g.x1=c.left+s,g.x2=Math.max(f-c.right,g.x1+1)):(g.x1=c.left,g.x2=Math.max(f-c.right-s,g.x1+1))):(g.x1=c.left,g.x2=Math.max(f-c.right,g.x1+1),g.y2=c.top,g.y1=Math.max(p-c.bottom,g.y2+1)),g},t.createGrid=function(i,a,d,n,s,u,f,p){var c={};c[d.units.pos+"1"]=i,c[d.units.pos+"2"]=i,c[d.counterUnits.pos+"1"]=n,c[d.counterUnits.pos+"2"]=n+s;var g=u.elem("line",c,f.join(" "));p.emit("draw",t.extend({type:"grid",axis:d,index:a,group:u,element:g},c))},t.createGridBackground=function(i,a,d,n){var s=i.elem("rect",{x:a.x1,y:a.y2,width:a.width(),height:a.height()},d,!0);n.emit("draw",{type:"gridBackground",group:i,element:s})},t.createLabel=function(i,a,d,n,s,u,f,p,c,g,y){var x,A={};if(A[s.units.pos]=i+f[s.units.pos],A[s.counterUnits.pos]=f[s.counterUnits.pos],A[s.units.len]=a,A[s.counterUnits.len]=Math.max(0,u-10),g){var T=e.createElement("span");T.className=c.join(" "),T.setAttribute("xmlns",t.namespaces.xhtml),T.innerText=n[d],T.style[s.units.len]=Math.round(A[s.units.len])+"px",T.style[s.counterUnits.len]=Math.round(A[s.counterUnits.len])+"px",x=p.foreignObject(T,t.extend({style:"overflow: visible;"},A))}else x=p.elem("text",A,c.join(" ")).text(n[d]);y.emit("draw",t.extend({type:"label",axis:s,index:d,group:p,element:x,text:n[d]},A))},t.getSeriesOption=function(i,a,d){if(i.name&&a.series&&a.series[i.name]){var n=a.series[i.name];return n.hasOwnProperty(d)?n[d]:a[d]}return a[d]},t.optionsProvider=function(i,a,d){var s,f,n=t.extend({},i),u=[];function p(y){var x=s;if(s=t.extend({},n),a)for(f=0;f<a.length;f++)S.matchMedia(a[f][0]).matches&&(s=t.extend(s,a[f][1]));d&&y&&d.emit("optionsChanged",{previousOptions:x,currentOptions:s})}if(!S.matchMedia)throw"window.matchMedia not found! Make sure you're using a polyfill.";if(a)for(f=0;f<a.length;f++){var g=S.matchMedia(a[f][0]);g.addListener(p),u.push(g)}return p(),{removeMediaQueryListeners:function(){u.forEach(function(y){y.removeListener(p)})},getCurrentOptions:function(){return t.extend({},s)}}},t.splitIntoSegments=function(i,a,d){d=t.extend({},{increasingX:!1,fillHoles:!1},d);for(var s=[],u=!0,f=0;f<i.length;f+=2)void 0===t.getMultiValue(a[f/2].value)?d.fillHoles||(u=!0):(d.increasingX&&f>=2&&i[f]<=i[f-2]&&(u=!0),u&&(s.push({pathCoordinates:[],valueData:[]}),u=!1),s[s.length-1].pathCoordinates.push(i[f],i[f+1]),s[s.length-1].valueData.push(a[f/2]));return s}}(this||global,Q),function(D,t){"use strict";t.Interpolation={},t.Interpolation.none=function(S){return S=t.extend({},{fillHoles:!1},S),function(a,d){for(var n=new t.Svg.Path,s=!0,u=0;u<a.length;u+=2){var f=a[u],p=a[u+1],c=d[u/2];void 0!==t.getMultiValue(c.value)?(s?n.move(f,p,!1,c):n.line(f,p,!1,c),s=!1):S.fillHoles||(s=!0)}return n}},t.Interpolation.simple=function(S){S=t.extend({},{divisor:2,fillHoles:!1},S);var i=1/Math.max(1,S.divisor);return function(d,n){for(var u,f,p,s=new t.Svg.Path,c=0;c<d.length;c+=2){var g=d[c],y=d[c+1],x=(g-u)*i,A=n[c/2];void 0!==A.value?(void 0===p?s.move(g,y,!1,A):s.curve(u+x,f,g-x,y,g,y,!1,A),u=g,f=y,p=A):S.fillHoles||(u=g=p=void 0)}return s}},t.Interpolation.cardinal=function(S){S=t.extend({},{tension:1,fillHoles:!1},S);var i=Math.min(1,Math.max(0,S.tension)),a=1-i;return function d(n,s){var u=t.splitIntoSegments(n,s,{fillHoles:S.fillHoles});if(u.length){if(u.length>1){var f=[];return u.forEach(function(A){f.push(d(A.pathCoordinates,A.valueData))}),t.Svg.Path.join(f)}if(s=u[0].valueData,(n=u[0].pathCoordinates).length<=4)return t.Interpolation.none()(n,s);for(var p=(new t.Svg.Path).move(n[0],n[1],!1,s[0]),g=0,y=n.length;y-2>g;g+=2){var x=[{x:+n[g-2],y:+n[g-1]},{x:+n[g],y:+n[g+1]},{x:+n[g+2],y:+n[g+3]},{x:+n[g+4],y:+n[g+5]}];y-4===g?x[3]=x[2]:g||(x[0]={x:+n[g],y:+n[g+1]}),p.curve(i*(6*x[1].x-x[0].x+x[2].x)/6+a*x[2].x,i*(6*x[1].y-x[0].y+x[2].y)/6+a*x[2].y,i*(x[1].x+6*x[2].x-x[3].x)/6+a*x[2].x,i*(x[1].y+6*x[2].y-x[3].y)/6+a*x[2].y,x[2].x,x[2].y,!1,s[(g+2)/2])}return p}return t.Interpolation.none()([])}},t.Interpolation.monotoneCubic=function(S){return S=t.extend({},{fillHoles:!1},S),function i(a,d){var n=t.splitIntoSegments(a,d,{fillHoles:S.fillHoles,increasingX:!0});if(n.length){if(n.length>1){var s=[];return n.forEach(function(q){s.push(i(q.pathCoordinates,q.valueData))}),t.Svg.Path.join(s)}if(d=n[0].valueData,(a=n[0].pathCoordinates).length<=4)return t.Interpolation.none()(a,d);var p,T,u=[],f=[],c=a.length/2,g=[],y=[],x=[],A=[];for(p=0;p<c;p++)u[p]=a[2*p],f[p]=a[2*p+1];for(p=0;p<c-1;p++)x[p]=f[p+1]-f[p],A[p]=u[p+1]-u[p],y[p]=x[p]/A[p];for(g[0]=y[0],g[c-1]=y[c-2],p=1;p<c-1;p++)0===y[p]||0===y[p-1]||y[p-1]>0!=y[p]>0?g[p]=0:(g[p]=3*(A[p-1]+A[p])/((2*A[p]+A[p-1])/y[p-1]+(A[p]+2*A[p-1])/y[p]),isFinite(g[p])||(g[p]=0));for(T=(new t.Svg.Path).move(u[0],f[0],!1,d[0]),p=0;p<c-1;p++)T.curve(u[p]+A[p]/3,f[p]+g[p]*A[p]/3,u[p+1]-A[p]/3,f[p+1]-g[p+1]*A[p]/3,u[p+1],f[p+1],!1,d[p+1]);return T}return t.Interpolation.none()([])}},t.Interpolation.step=function(S){return S=t.extend({},{postpone:!0,fillHoles:!1},S),function(a,d){for(var s,u,f,n=new t.Svg.Path,p=0;p<a.length;p+=2){var c=a[p],g=a[p+1],y=d[p/2];void 0!==y.value?(void 0===f?n.move(c,g,!1,y):(S.postpone?n.line(c,u,!1,f):n.line(s,g,!1,y),n.line(c,g,!1,y)),s=c,u=g,f=y):S.fillHoles||(s=u=f=void 0)}return n}}}(this||global,Q),function(D,t){"use strict";t.EventEmitter=function(){var S=[];return{addEventHandler:function(d,n){S[d]=S[d]||[],S[d].push(n)},removeEventHandler:function(d,n){S[d]&&(n?(S[d].splice(S[d].indexOf(n),1),0===S[d].length&&delete S[d]):delete S[d])},emit:function(d,n){S[d]&&S[d].forEach(function(s){s(n)}),S["*"]&&S["*"].forEach(function(s){s(d,n)})}}}}(this||global,Q),function(D,t){"use strict";function S(a){var d=[];if(a.length)for(var n=0;n<a.length;n++)d.push(a[n]);return d}t.Class={extend:function(a,d){var n=d||this.prototype||t.Class,s=Object.create(n);t.Class.cloneDefinitions(s,a);var u=function(){var p,f=s.constructor||function(){};return p=this===t?Object.create(s):this,f.apply(p,Array.prototype.slice.call(arguments,0)),p};return u.prototype=s,u.super=n,u.extend=this.extend,u},cloneDefinitions:function(){var a=S(arguments),d=a[0];return a.splice(1,a.length-1).forEach(function(n){Object.getOwnPropertyNames(n).forEach(function(s){delete d[s],Object.defineProperty(d,s,Object.getOwnPropertyDescriptor(n,s))})}),d}}}(this||global,Q),function(D,t){"use strict";var S=D.window;function n(){S.addEventListener("resize",this.resizeListener),this.optionsProvider=t.optionsProvider(this.options,this.responsiveOptions,this.eventEmitter),this.eventEmitter.addEventHandler("optionsChanged",function(){this.update()}.bind(this)),this.options.plugins&&this.options.plugins.forEach(function(u){u instanceof Array?u[0](this,u[1]):u(this)}.bind(this)),this.eventEmitter.emit("data",{type:"initial",data:this.data}),this.createChart(this.optionsProvider.getCurrentOptions()),this.initializeTimeoutId=void 0}t.Base=t.Class.extend({constructor:function(u,f,p,c,g){this.container=t.querySelector(u),this.data=f||{},this.data.labels=this.data.labels||[],this.data.series=this.data.series||[],this.defaultOptions=p,this.options=c,this.responsiveOptions=g,this.eventEmitter=t.EventEmitter(),this.supportsForeignObject=t.Svg.isSupported("Extensibility"),this.supportsAnimations=t.Svg.isSupported("AnimationEventsAttribute"),this.resizeListener=function(){this.update()}.bind(this),this.container&&(this.container.__chartist__&&this.container.__chartist__.detach(),this.container.__chartist__=this),this.initializeTimeoutId=setTimeout(n.bind(this),0)},optionsProvider:void 0,container:void 0,svg:void 0,eventEmitter:void 0,createChart:function(){throw new Error("Base chart type can't be instantiated!")},update:function(u,f,p){return u&&(this.data=u||{},this.data.labels=this.data.labels||[],this.data.series=this.data.series||[],this.eventEmitter.emit("data",{type:"update",data:this.data})),f&&(this.options=t.extend({},p?this.options:this.defaultOptions,f),this.initializeTimeoutId||(this.optionsProvider.removeMediaQueryListeners(),this.optionsProvider=t.optionsProvider(this.options,this.responsiveOptions,this.eventEmitter))),this.initializeTimeoutId||this.createChart(this.optionsProvider.getCurrentOptions()),this},detach:function(){return this.initializeTimeoutId?S.clearTimeout(this.initializeTimeoutId):(S.removeEventListener("resize",this.resizeListener),this.optionsProvider.removeMediaQueryListeners()),this},on:function(u,f){return this.eventEmitter.addEventHandler(u,f),this},off:function(u,f){return this.eventEmitter.removeEventHandler(u,f),this},version:t.version,supportsForeignObject:!1})}(this||global,Q),function(D,t){"use strict";var S=D.document;t.Svg=t.Class.extend({constructor:function(h,Z,M,k,I){h instanceof Element?this._node=h:(this._node=S.createElementNS(t.namespaces.svg,h),"svg"===h&&this.attr({"xmlns:ct":t.namespaces.ct})),Z&&this.attr(Z),M&&this.addClass(M),k&&(I&&k._node.firstChild?k._node.insertBefore(this._node,k._node.firstChild):k._node.appendChild(this._node))},attr:function(h,Z){return"string"==typeof h?Z?this._node.getAttributeNS(Z,h):this._node.getAttribute(h):(Object.keys(h).forEach(function(M){if(void 0!==h[M])if(-1!==M.indexOf(":")){var k=M.split(":");this._node.setAttributeNS(t.namespaces[k[0]],M,h[M])}else this._node.setAttribute(M,h[M])}.bind(this)),this)},elem:function(h,Z,M,k){return new t.Svg(h,Z,M,this,k)},parent:function(){return this._node.parentNode instanceof SVGElement?new t.Svg(this._node.parentNode):null},root:function(){for(var h=this._node;"svg"!==h.nodeName;)h=h.parentNode;return new t.Svg(h)},querySelector:function(h){var Z=this._node.querySelector(h);return Z?new t.Svg(Z):null},querySelectorAll:function(h){var Z=this._node.querySelectorAll(h);return Z.length?new t.Svg.List(Z):null},getNode:function(){return this._node},foreignObject:function(h,Z,M,k){if("string"==typeof h){var I=S.createElement("div");I.innerHTML=h,h=I.firstChild}h.setAttribute("xmlns",t.namespaces.xmlns);var X=this.elem("foreignObject",Z,M,k);return X._node.appendChild(h),X},text:function(h){return this._node.appendChild(S.createTextNode(h)),this},empty:function(){for(;this._node.firstChild;)this._node.removeChild(this._node.firstChild);return this},remove:function(){return this._node.parentNode.removeChild(this._node),this.parent()},replace:function(h){return this._node.parentNode.replaceChild(h._node,this._node),h},append:function(h,Z){return Z&&this._node.firstChild?this._node.insertBefore(h._node,this._node.firstChild):this._node.appendChild(h._node),this},classes:function(){return this._node.getAttribute("class")?this._node.getAttribute("class").trim().split(/\s+/):[]},addClass:function(h){return this._node.setAttribute("class",this.classes(this._node).concat(h.trim().split(/\s+/)).filter(function(Z,M,k){return k.indexOf(Z)===M}).join(" ")),this},removeClass:function(h){var Z=h.trim().split(/\s+/);return this._node.setAttribute("class",this.classes(this._node).filter(function(M){return-1===Z.indexOf(M)}).join(" ")),this},removeAllClasses:function(){return this._node.setAttribute("class",""),this},height:function(){return this._node.getBoundingClientRect().height},width:function(){return this._node.getBoundingClientRect().width},animate:function(h,Z,M){return void 0===Z&&(Z=!0),Object.keys(h).forEach(function(I){function X(U,B){var $,V,ee,H={};U.easing&&(ee=U.easing instanceof Array?U.easing:t.Svg.Easing[U.easing],delete U.easing),U.begin=t.ensureUnit(U.begin,"ms"),U.dur=t.ensureUnit(U.dur,"ms"),ee&&(U.calcMode="spline",U.keySplines=ee.join(" "),U.keyTimes="0;1"),B&&(U.fill="freeze",H[I]=U.from,this.attr(H),V=t.quantity(U.begin||0).value,U.begin="indefinite"),$=this.elem("animate",t.extend({attributeName:I},U)),B&&setTimeout(function(){try{$._node.beginElement()}catch(ae){H[I]=U.to,this.attr(H),$.remove()}}.bind(this),V),M&&$._node.addEventListener("beginEvent",function(){M.emit("animationBegin",{element:this,animate:$._node,params:U})}.bind(this)),$._node.addEventListener("endEvent",function(){M&&M.emit("animationEnd",{element:this,animate:$._node,params:U}),B&&(H[I]=U.to,this.attr(H),$.remove())}.bind(this))}h[I]instanceof Array?h[I].forEach(function(U){X.bind(this)(U,!1)}.bind(this)):X.bind(this)(h[I],Z)}.bind(this)),this}}),t.Svg.isSupported=function(h){return S.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#"+h,"1.1")},t.Svg.Easing={easeInSine:[.47,0,.745,.715],easeOutSine:[.39,.575,.565,1],easeInOutSine:[.445,.05,.55,.95],easeInQuad:[.55,.085,.68,.53],easeOutQuad:[.25,.46,.45,.94],easeInOutQuad:[.455,.03,.515,.955],easeInCubic:[.55,.055,.675,.19],easeOutCubic:[.215,.61,.355,1],easeInOutCubic:[.645,.045,.355,1],easeInQuart:[.895,.03,.685,.22],easeOutQuart:[.165,.84,.44,1],easeInOutQuart:[.77,0,.175,1],easeInQuint:[.755,.05,.855,.06],easeOutQuint:[.23,1,.32,1],easeInOutQuint:[.86,0,.07,1],easeInExpo:[.95,.05,.795,.035],easeOutExpo:[.19,1,.22,1],easeInOutExpo:[1,0,0,1],easeInCirc:[.6,.04,.98,.335],easeOutCirc:[.075,.82,.165,1],easeInOutCirc:[.785,.135,.15,.86],easeInBack:[.6,-.28,.735,.045],easeOutBack:[.175,.885,.32,1.275],easeInOutBack:[.68,-.55,.265,1.55]},t.Svg.List=t.Class.extend({constructor:function(h){var Z=this;this.svgElements=[];for(var M=0;M<h.length;M++)this.svgElements.push(new t.Svg(h[M]));Object.keys(t.Svg.prototype).filter(function(k){return-1===["constructor","parent","querySelector","querySelectorAll","replace","append","classes","height","width"].indexOf(k)}).forEach(function(k){Z[k]=function(){var I=Array.prototype.slice.call(arguments,0);return Z.svgElements.forEach(function(X){t.Svg.prototype[k].apply(X,I)}),Z}})}})}(this||global,Q),function(D,t){"use strict";var S={m:["x","y"],l:["x","y"],c:["x1","y1","x2","y2","x","y"],a:["rx","ry","xAr","lAf","sf","x","y"]},e={accuracy:3};function i(b,O,R,N,j,h){var Z=t.extend({command:j?b.toLowerCase():b.toUpperCase()},O,h?{data:h}:{});R.splice(N,0,Z)}function a(b,O){b.forEach(function(R,N){S[R.command.toLowerCase()].forEach(function(j,h){O(R,j,N,h,b)})})}t.Svg.Path=t.Class.extend({constructor:function(b,O){this.pathElements=[],this.pos=0,this.close=b,this.options=t.extend({},e,O)},position:function(b){return void 0!==b?(this.pos=Math.max(0,Math.min(this.pathElements.length,b)),this):this.pos},remove:function(b){return this.pathElements.splice(this.pos,b),this},move:function(b,O,R,N){return i("M",{x:+b,y:+O},this.pathElements,this.pos++,R,N),this},line:function(b,O,R,N){return i("L",{x:+b,y:+O},this.pathElements,this.pos++,R,N),this},curve:function(b,O,R,N,j,h,Z,M){return i("C",{x1:+b,y1:+O,x2:+R,y2:+N,x:+j,y:+h},this.pathElements,this.pos++,Z,M),this},arc:function(b,O,R,N,j,h,Z,M,k){return i("A",{rx:+b,ry:+O,xAr:+R,lAf:+N,sf:+j,x:+h,y:+Z},this.pathElements,this.pos++,M,k),this},scale:function(b,O){return a(this.pathElements,function(R,N){R[N]*="x"===N[0]?b:O}),this},translate:function(b,O){return a(this.pathElements,function(R,N){R[N]+="x"===N[0]?b:O}),this},transform:function(b){return a(this.pathElements,function(O,R,N,j,h){var Z=b(O,R,N,j,h);(Z||0===Z)&&(O[R]=Z)}),this},parse:function(b){var O=b.replace(/([A-Za-z])([0-9])/g,"$1 $2").replace(/([0-9])([A-Za-z])/g,"$1 $2").split(/[\s,]+/).reduce(function(j,h){return h.match(/[A-Za-z]/)&&j.push([]),j[j.length-1].push(h),j},[]);"Z"===O[O.length-1][0].toUpperCase()&&O.pop();var R=O.map(function(j){var h=j.shift(),Z=S[h.toLowerCase()];return t.extend({command:h},Z.reduce(function(M,k,I){return M[k]=+j[I],M},{}))}),N=[this.pos,0];return Array.prototype.push.apply(N,R),Array.prototype.splice.apply(this.pathElements,N),this.pos+=R.length,this},stringify:function(){var b=Math.pow(10,this.options.accuracy);return this.pathElements.reduce(function(O,R){var N=S[R.command.toLowerCase()].map(function(j){return this.options.accuracy?Math.round(R[j]*b)/b:R[j]}.bind(this));return O+R.command+N.join(",")}.bind(this),"")+(this.close?"Z":"")},clone:function(b){var O=new t.Svg.Path(b||this.close);return O.pos=this.pos,O.pathElements=this.pathElements.slice().map(function(N){return t.extend({},N)}),O.options=t.extend({},this.options),O},splitByCommand:function(b){var O=[new t.Svg.Path];return this.pathElements.forEach(function(R){R.command===b.toUpperCase()&&0!==O[O.length-1].pathElements.length&&O.push(new t.Svg.Path),O[O.length-1].pathElements.push(R)}),O}}),t.Svg.Path.elementDescriptions=S,t.Svg.Path.join=function(b,O,R){for(var N=new t.Svg.Path(O,R),j=0;j<b.length;j++)for(var h=b[j],Z=0;Z<h.pathElements.length;Z++)N.pathElements.push(h.pathElements[Z]);return N}}(this||global,Q),function(D,t){"use strict";var i={x:{pos:"x",len:"width",dir:"horizontal",rectStart:"x1",rectEnd:"x2",rectOffset:"y2"},y:{pos:"y",len:"height",dir:"vertical",rectStart:"y2",rectEnd:"y1",rectOffset:"x1"}};t.Axis=t.Class.extend({constructor:function(n,s,u,f){this.units=n,this.counterUnits=n===i.x?i.y:i.x,this.chartRect=s,this.axisLength=s[n.rectEnd]-s[n.rectStart],this.gridOffset=s[n.rectOffset],this.ticks=u,this.options=f},createGridAndLabels:function(n,s,u,f,p){var c=f["axis"+this.units.pos.toUpperCase()],g=this.ticks.map(this.projectValue.bind(this)),y=this.ticks.map(c.labelInterpolationFnc);g.forEach(function(x,A){var q,T={x:0,y:0};q=g[A+1]?g[A+1]-x:Math.max(this.axisLength-x,30),(!t.isFalseyButZero(y[A])||""===y[A])&&("x"===this.units.pos?(x=this.chartRect.x1+x,T.x=f.axisX.labelOffset.x,T.y="start"===f.axisX.position?this.chartRect.padding.top+f.axisX.labelOffset.y+(u?5:20):this.chartRect.y1+f.axisX.labelOffset.y+(u?5:20)):(x=this.chartRect.y1-x,T.y=f.axisY.labelOffset.y-(u?q:0),T.x="start"===f.axisY.position?u?this.chartRect.padding.left+f.axisY.labelOffset.x:this.chartRect.x1-10:this.chartRect.x2+f.axisY.labelOffset.x+10),c.showGrid&&t.createGrid(x,A,this,this.gridOffset,this.chartRect[this.counterUnits.len](),n,[f.classNames.grid,f.classNames[this.units.dir]],p),c.showLabel&&t.createLabel(x,q,A,y,this,c.offset,T,s,[f.classNames.label,f.classNames[this.units.dir],"start"===c.position?f.classNames[c.position]:f.classNames.end],u,p))}.bind(this))},projectValue:function(n,s,u){throw new Error("Base axis can't be instantiated!")}}),t.Axis.units=i}(this||global,Q),function(D,t){"use strict";t.AutoScaleAxis=t.Axis.extend({constructor:function(d,n,s,u){var f=u.highLow||t.getHighLow(n,u,d.pos);this.bounds=t.getBounds(s[d.rectEnd]-s[d.rectStart],f,u.scaleMinSpace||20,u.onlyInteger),this.range={min:this.bounds.min,max:this.bounds.max},t.AutoScaleAxis.super.constructor.call(this,d,s,this.bounds.values,u)},projectValue:function(d){return this.axisLength*(+t.getMultiValue(d,this.units.pos)-this.bounds.min)/this.bounds.range}})}(this||global,Q),function(D,t){"use strict";t.FixedScaleAxis=t.Axis.extend({constructor:function(d,n,s,u){var f=u.highLow||t.getHighLow(n,u,d.pos);this.divisor=u.divisor||1,this.ticks=u.ticks||t.times(this.divisor).map(function(p,c){return f.low+(f.high-f.low)/this.divisor*c}.bind(this)),this.ticks.sort(function(p,c){return p-c}),this.range={min:f.low,max:f.high},t.FixedScaleAxis.super.constructor.call(this,d,s,this.ticks,u),this.stepLength=this.axisLength/this.divisor},projectValue:function(d){return this.axisLength*(+t.getMultiValue(d,this.units.pos)-this.range.min)/(this.range.max-this.range.min)}})}(this||global,Q),function(D,t){"use strict";t.StepAxis=t.Axis.extend({constructor:function(d,n,s,u){t.StepAxis.super.constructor.call(this,d,s,u.ticks,u);var f=Math.max(1,u.ticks.length-(u.stretch?1:0));this.stepLength=this.axisLength/f},projectValue:function(d,n){return this.stepLength*n}})}(this||global,Q),function(D,t){"use strict";var i={axisX:{offset:30,position:"end",labelOffset:{x:0,y:0},showLabel:!0,showGrid:!0,labelInterpolationFnc:t.noop,type:void 0},axisY:{offset:40,position:"start",labelOffset:{x:0,y:0},showLabel:!0,showGrid:!0,labelInterpolationFnc:t.noop,type:void 0,scaleMinSpace:20,onlyInteger:!1},width:void 0,height:void 0,showLine:!0,showPoint:!0,showArea:!1,areaBase:0,lineSmooth:!0,showGridBackground:!1,low:void 0,high:void 0,chartPadding:{top:15,right:15,bottom:5,left:10},fullWidth:!1,reverseData:!1,classNames:{chart:"ct-chart-line",label:"ct-label",labelGroup:"ct-labels",series:"ct-series",line:"ct-line",point:"ct-point",area:"ct-area",grid:"ct-grid",gridGroup:"ct-grids",gridBackground:"ct-grid-background",vertical:"ct-vertical",horizontal:"ct-horizontal",start:"ct-start",end:"ct-end"}};t.Line=t.Base.extend({constructor:function(n,s,u,f){t.Line.super.constructor.call(this,n,s,i,t.extend({},i,u),f)},createChart:function(n){var s=t.normalizeData(this.data,n.reverseData,!0);this.svg=t.createSvg(this.container,n.width,n.height,n.classNames.chart);var g,y,u=this.svg.elem("g").addClass(n.classNames.gridGroup),f=this.svg.elem("g"),p=this.svg.elem("g").addClass(n.classNames.labelGroup),c=t.createChartRect(this.svg,n,i.padding);g=void 0===n.axisX.type?new t.StepAxis(t.Axis.units.x,s.normalized.series,c,t.extend({},n.axisX,{ticks:s.normalized.labels,stretch:n.fullWidth})):n.axisX.type.call(t,t.Axis.units.x,s.normalized.series,c,n.axisX),y=void 0===n.axisY.type?new t.AutoScaleAxis(t.Axis.units.y,s.normalized.series,c,t.extend({},n.axisY,{high:t.isNumeric(n.high)?n.high:n.axisY.high,low:t.isNumeric(n.low)?n.low:n.axisY.low})):n.axisY.type.call(t,t.Axis.units.y,s.normalized.series,c,n.axisY),g.createGridAndLabels(u,p,this.supportsForeignObject,n,this.eventEmitter),y.createGridAndLabels(u,p,this.supportsForeignObject,n,this.eventEmitter),n.showGridBackground&&t.createGridBackground(u,c,n.classNames.gridBackground,this.eventEmitter),s.raw.series.forEach(function(x,A){var T=f.elem("g");T.attr({"ct:series-name":x.name,"ct:meta":t.serialize(x.meta)}),T.addClass([n.classNames.series,x.className||n.classNames.series+"-"+t.alphaNumerate(A)].join(" "));var q=[],G=[];s.normalized.series[A].forEach(function(h,Z){var M={x:c.x1+g.projectValue(h,Z,s.normalized.series[A]),y:c.y1-y.projectValue(h,Z,s.normalized.series[A])};q.push(M.x,M.y),G.push({value:h,valueIndex:Z,meta:t.getMetaData(x,Z)})}.bind(this));var P={lineSmooth:t.getSeriesOption(x,n,"lineSmooth"),showPoint:t.getSeriesOption(x,n,"showPoint"),showLine:t.getSeriesOption(x,n,"showLine"),showArea:t.getSeriesOption(x,n,"showArea"),areaBase:t.getSeriesOption(x,n,"areaBase")},O=("function"==typeof P.lineSmooth?P.lineSmooth:P.lineSmooth?t.Interpolation.monotoneCubic():t.Interpolation.none())(q,G);if(P.showPoint&&O.pathElements.forEach(function(h){var Z=T.elem("line",{x1:h.x,y1:h.y,x2:h.x+.01,y2:h.y},n.classNames.point).attr({"ct:value":[h.data.value.x,h.data.value.y].filter(t.isNumeric).join(","),"ct:meta":t.serialize(h.data.meta)});this.eventEmitter.emit("draw",{type:"point",value:h.data.value,index:h.data.valueIndex,meta:h.data.meta,series:x,seriesIndex:A,axisX:g,axisY:y,group:T,element:Z,x:h.x,y:h.y})}.bind(this)),P.showLine){var R=T.elem("path",{d:O.stringify()},n.classNames.line,!0);this.eventEmitter.emit("draw",{type:"line",values:s.normalized.series[A],path:O.clone(),chartRect:c,index:A,series:x,seriesIndex:A,seriesMeta:x.meta,axisX:g,axisY:y,group:T,element:R})}if(P.showArea&&y.range){var N=Math.max(Math.min(P.areaBase,y.range.max),y.range.min),j=c.y1-y.projectValue(N);O.splitByCommand("M").filter(function(Z){return Z.pathElements.length>1}).map(function(Z){var M=Z.pathElements[0],k=Z.pathElements[Z.pathElements.length-1];return Z.clone(!0).position(0).remove(1).move(M.x,j).line(M.x,M.y).position(Z.pathElements.length+1).line(k.x,j)}).forEach(function(Z){var M=T.elem("path",{d:Z.stringify()},n.classNames.area,!0);this.eventEmitter.emit("draw",{type:"area",values:s.normalized.series[A],path:Z.clone(),series:x,seriesIndex:A,axisX:g,axisY:y,chartRect:c,index:A,group:T,element:M})}.bind(this))}}.bind(this)),this.eventEmitter.emit("created",{bounds:y.bounds,chartRect:c,axisX:g,axisY:y,svg:this.svg,options:n})}})}(this||global,Q),function(D,t){"use strict";var i={axisX:{offset:30,position:"end",labelOffset:{x:0,y:0},showLabel:!0,showGrid:!0,labelInterpolationFnc:t.noop,scaleMinSpace:30,onlyInteger:!1},axisY:{offset:40,position:"start",labelOffset:{x:0,y:0},showLabel:!0,showGrid:!0,labelInterpolationFnc:t.noop,scaleMinSpace:20,onlyInteger:!1},width:void 0,height:void 0,high:void 0,low:void 0,referenceValue:0,chartPadding:{top:15,right:15,bottom:5,left:10},seriesBarDistance:15,stackBars:!1,stackMode:"accumulate",horizontalBars:!1,distributeSeries:!1,reverseData:!1,showGridBackground:!1,classNames:{chart:"ct-chart-bar",horizontalBars:"ct-horizontal-bars",label:"ct-label",labelGroup:"ct-labels",series:"ct-series",bar:"ct-bar",grid:"ct-grid",gridGroup:"ct-grids",gridBackground:"ct-grid-background",vertical:"ct-vertical",horizontal:"ct-horizontal",start:"ct-start",end:"ct-end"}};t.Bar=t.Base.extend({constructor:function(n,s,u,f){t.Bar.super.constructor.call(this,n,s,i,t.extend({},i,u),f)},createChart:function(n){var s,u;n.distributeSeries?(s=t.normalizeData(this.data,n.reverseData,n.horizontalBars?"x":"y")).normalized.series=s.normalized.series.map(function(O){return[O]}):s=t.normalizeData(this.data,n.reverseData,n.horizontalBars?"x":"y"),this.svg=t.createSvg(this.container,n.width,n.height,n.classNames.chart+(n.horizontalBars?" "+n.classNames.horizontalBars:""));var f=this.svg.elem("g").addClass(n.classNames.gridGroup),p=this.svg.elem("g"),c=this.svg.elem("g").addClass(n.classNames.labelGroup);if(n.stackBars&&0!==s.normalized.series.length){var g=t.serialMap(s.normalized.series,function(){return Array.prototype.slice.call(arguments).map(function(R){return R}).reduce(function(R,N){return{x:R.x+(N&&N.x)||0,y:R.y+(N&&N.y)||0}},{x:0,y:0})});u=t.getHighLow([g],n,n.horizontalBars?"x":"y")}else u=t.getHighLow(s.normalized.series,n,n.horizontalBars?"x":"y");u.high=+n.high||(0===n.high?0:u.high),u.low=+n.low||(0===n.low?0:u.low);var x,A,T,q,G,y=t.createChartRect(this.svg,n,i.padding);A=n.distributeSeries&&n.stackBars?s.normalized.labels.slice(0,1):s.normalized.labels,n.horizontalBars?(x=q=void 0===n.axisX.type?new t.AutoScaleAxis(t.Axis.units.x,s.normalized.series,y,t.extend({},n.axisX,{highLow:u,referenceValue:0})):n.axisX.type.call(t,t.Axis.units.x,s.normalized.series,y,t.extend({},n.axisX,{highLow:u,referenceValue:0})),T=G=void 0===n.axisY.type?new t.StepAxis(t.Axis.units.y,s.normalized.series,y,{ticks:A}):n.axisY.type.call(t,t.Axis.units.y,s.normalized.series,y,n.axisY)):(T=q=void 0===n.axisX.type?new t.StepAxis(t.Axis.units.x,s.normalized.series,y,{ticks:A}):n.axisX.type.call(t,t.Axis.units.x,s.normalized.series,y,n.axisX),x=G=void 0===n.axisY.type?new t.AutoScaleAxis(t.Axis.units.y,s.normalized.series,y,t.extend({},n.axisY,{highLow:u,referenceValue:0})):n.axisY.type.call(t,t.Axis.units.y,s.normalized.series,y,t.extend({},n.axisY,{highLow:u,referenceValue:0})));var P=n.horizontalBars?y.x1+x.projectValue(0):y.y1-x.projectValue(0),b=[];T.createGridAndLabels(f,c,this.supportsForeignObject,n,this.eventEmitter),x.createGridAndLabels(f,c,this.supportsForeignObject,n,this.eventEmitter),n.showGridBackground&&t.createGridBackground(f,y,n.classNames.gridBackground,this.eventEmitter),s.raw.series.forEach(function(O,R){var j,h,N=R-(s.raw.series.length-1)/2;j=n.distributeSeries&&!n.stackBars?T.axisLength/s.normalized.series.length/2:n.distributeSeries&&n.stackBars?T.axisLength/2:T.axisLength/s.normalized.series[R].length/2,(h=p.elem("g")).attr({"ct:series-name":O.name,"ct:meta":t.serialize(O.meta)}),h.addClass([n.classNames.series,O.className||n.classNames.series+"-"+t.alphaNumerate(R)].join(" ")),s.normalized.series[R].forEach(function(Z,M){var k,I,X,U;if(U=n.distributeSeries&&!n.stackBars?R:n.distributeSeries&&n.stackBars?0:M,k=n.horizontalBars?{x:y.x1+x.projectValue(Z&&Z.x?Z.x:0,M,s.normalized.series[R]),y:y.y1-T.projectValue(Z&&Z.y?Z.y:0,U,s.normalized.series[R])}:{x:y.x1+T.projectValue(Z&&Z.x?Z.x:0,U,s.normalized.series[R]),y:y.y1-x.projectValue(Z&&Z.y?Z.y:0,M,s.normalized.series[R])},T instanceof t.StepAxis&&(T.options.stretch||(k[T.units.pos]+=j*(n.horizontalBars?-1:1)),k[T.units.pos]+=n.stackBars||n.distributeSeries?0:N*n.seriesBarDistance*(n.horizontalBars?-1:1)),b[M]=(X=b[M]||P)-(P-k[T.counterUnits.pos]),void 0!==Z){var B={};B[T.units.pos+"1"]=k[T.units.pos],B[T.units.pos+"2"]=k[T.units.pos],!n.stackBars||"accumulate"!==n.stackMode&&n.stackMode?(B[T.counterUnits.pos+"1"]=P,B[T.counterUnits.pos+"2"]=k[T.counterUnits.pos]):(B[T.counterUnits.pos+"1"]=X,B[T.counterUnits.pos+"2"]=b[M]),B.x1=Math.min(Math.max(B.x1,y.x1),y.x2),B.x2=Math.min(Math.max(B.x2,y.x1),y.x2),B.y1=Math.min(Math.max(B.y1,y.y2),y.y1),B.y2=Math.min(Math.max(B.y2,y.y2),y.y1);var H=t.getMetaData(O,M);I=h.elem("line",B,n.classNames.bar).attr({"ct:value":[Z.x,Z.y].filter(t.isNumeric).join(","),"ct:meta":t.serialize(H)}),this.eventEmitter.emit("draw",t.extend({type:"bar",value:Z,index:M,meta:H,series:O,seriesIndex:R,axisX:q,axisY:G,chartRect:y,group:h,element:I},B))}}.bind(this))}.bind(this)),this.eventEmitter.emit("created",{bounds:x.bounds,chartRect:y,axisX:q,axisY:G,svg:this.svg,options:n})}})}(this||global,Q),function(D,t){"use strict";var i={width:void 0,height:void 0,chartPadding:5,classNames:{chartPie:"ct-chart-pie",chartDonut:"ct-chart-donut",series:"ct-series",slicePie:"ct-slice-pie",sliceDonut:"ct-slice-donut",sliceDonutSolid:"ct-slice-donut-solid",label:"ct-label"},startAngle:0,total:void 0,donut:!1,donutSolid:!1,donutWidth:60,showLabel:!0,labelOffset:0,labelPosition:"inside",labelInterpolationFnc:t.noop,labelDirection:"neutral",reverseData:!1,ignoreEmptyValues:!1};function a(s,u,f){var p=u.x>s.x;return p&&"explode"===f||!p&&"implode"===f?"start":p&&"implode"===f||!p&&"explode"===f?"end":"middle"}t.Pie=t.Base.extend({constructor:function(s,u,f,p){t.Pie.super.constructor.call(this,s,u,i,t.extend({},i,f),p)},createChart:function(s){var p,c,g,y,x,u=t.normalizeData(this.data),f=[],A=s.startAngle;this.svg=t.createSvg(this.container,s.width,s.height,s.donut?s.classNames.chartDonut:s.classNames.chartPie),c=t.createChartRect(this.svg,s,i.padding),g=Math.min(c.width()/2,c.height()/2),x=s.total||u.normalized.series.reduce(function(P,b){return P+b},0);var T=t.quantity(s.donutWidth);"%"===T.unit&&(T.value*=g/100),g-=s.donut&&!s.donutSolid?T.value/2:0,y="outside"===s.labelPosition||s.donut&&!s.donutSolid?g:"center"===s.labelPosition?0:s.donutSolid?g-T.value/2:g/2,y+=s.labelOffset;var q={x:c.x1+c.width()/2,y:c.y2+c.height()/2},G=1===u.raw.series.filter(function(P){return P.hasOwnProperty("value")?0!==P.value:0!==P}).length;u.raw.series.forEach(function(P,b){f[b]=this.svg.elem("g",null,null)}.bind(this)),s.showLabel&&(p=this.svg.elem("g",null,null)),u.raw.series.forEach(function(P,b){if(0!==u.normalized.series[b]||!s.ignoreEmptyValues){f[b].attr({"ct:series-name":P.name}),f[b].addClass([s.classNames.series,P.className||s.classNames.series+"-"+t.alphaNumerate(b)].join(" "));var O=x>0?A+u.normalized.series[b]/x*360:0,R=Math.max(0,A-(0===b||G?0:.2));O-R>=359.99&&(O=R+359.99);var h,Z,M,N=t.polarToCartesian(q.x,q.y,g,R),j=t.polarToCartesian(q.x,q.y,g,O),k=new t.Svg.Path(!s.donut||s.donutSolid).move(j.x,j.y).arc(g,g,0,O-A>180,0,N.x,N.y);s.donut?s.donutSolid&&(h=t.polarToCartesian(q.x,q.y,M=g-T.value,A-(0===b||G?0:.2)),Z=t.polarToCartesian(q.x,q.y,M,O),k.line(h.x,h.y),k.arc(M,M,0,O-A>180,1,Z.x,Z.y)):k.line(q.x,q.y);var I=s.classNames.slicePie;s.donut&&(I=s.classNames.sliceDonut,s.donutSolid&&(I=s.classNames.sliceDonutSolid));var X=f[b].elem("path",{d:k.stringify()},I);if(X.attr({"ct:value":u.normalized.series[b],"ct:meta":t.serialize(P.meta)}),s.donut&&!s.donutSolid&&(X._node.style.strokeWidth=T.value+"px"),this.eventEmitter.emit("draw",{type:"slice",value:u.normalized.series[b],totalDataSum:x,index:b,meta:P.meta,series:P,group:f[b],element:X,path:k.clone(),center:q,radius:g,startAngle:A,endAngle:O}),s.showLabel){var U,B;U=1===u.raw.series.length?{x:q.x,y:q.y}:t.polarToCartesian(q.x,q.y,y,A+(O-A)/2),B=u.normalized.labels&&!t.isFalseyButZero(u.normalized.labels[b])?u.normalized.labels[b]:u.normalized.series[b];var H=s.labelInterpolationFnc(B,b);if(H||0===H){var $=p.elem("text",{dx:U.x,dy:U.y,"text-anchor":a(q,U,s.labelDirection)},s.classNames.label).text(""+H);this.eventEmitter.emit("draw",{type:"label",index:b,group:p,element:$,text:""+H,x:U.x,y:U.y})}}A=O}}.bind(this)),this.eventEmitter.emit("created",{chartRect:c,svg:this.svg,options:s})},determineAnchorPosition:a})}(this||global,Q),Q}()}.apply(oe,[]),void 0!==F&&(fe.exports=F)}}]);
//# sourceMappingURL=apps_concierge_src_app_reports_reports_module_ts.js.map