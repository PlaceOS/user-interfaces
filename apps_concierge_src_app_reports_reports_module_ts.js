(self.webpackChunkplaceos=self.webpackChunkplaceos||[]).push([["apps_concierge_src_app_reports_reports_module_ts"],{6777:(t,e,n)=>{"use strict";n.r(e),n.d(e,{ReportsModule:()=>fe});var i=n(1511),s=n(6073),o=n(6898),a=n(787),r=n(3005),l=n(2619),c=n(1490),u=n(4762),d=n(3530),h=n(6687),p=n(6817),g=n(6839),f=n(4266),m=n(205),v=n(8125),x=n(9310),y=n(3848),_=n(5090),b=n(7953),Z=n(6280),w=864e5;function A(t,e){(0,Z.Z)(2,arguments);var n=(0,m.Z)(t),i=(0,m.Z)(e),s=n.getTime()-(0,b.Z)(n),o=i.getTime()-(0,b.Z)(i);return Math.round((s-o)/w)}function O(t,e){var n=t.getFullYear()-e.getFullYear()||t.getMonth()-e.getMonth()||t.getDate()-e.getDate()||t.getHours()-e.getHours()||t.getMinutes()-e.getMinutes()||t.getSeconds()-e.getSeconds()||t.getMilliseconds()-e.getMilliseconds();return n<0?-1:n>0?1:n}function M(t,e){(0,Z.Z)(2,arguments);var n=(0,_.Z)(t),i=(0,_.Z)(e),s=O(n,i),o=Math.abs(A(n,i));n.setDate(n.getDate()-s*o);var a=Number(O(n,i)===-s),r=s*(o-a);return 0===r?0:r}var U=n(804),q=n(4441),T=n(5959),S=n(8512),E=n(878),z=n(3080),k=n(7701),C=n(4689),L=n(7727),N=n(9996),j=n(8303),I=n(1496);let D=(()=>{class t{constructor(t){this._org=t,this._generate=new T.xQ,this._loading=new S.X(""),this._active_bookings=new S.X([]),this._options=new S.X({start:new Date,end:new Date}),this._bookings_list=this._generate.pipe((0,k.b)(500),(0,C.w)(t=>{var e;const n=this._options.getValue();if(this._loading.next("Loading report details..."),!(null==n?void 0:n.type)&&!(null===(e=null==n?void 0:n.zones)||void 0===e?void 0:e.length))return(0,E.of)([]);const i=(0,m.Z)((null==n?void 0:n.start)?new Date(n.start):new Date).valueOf(),s=(0,v.Z)((null==n?void 0:n.end)?new Date(n.end):i).valueOf(),o=(null==n?void 0:n.zones)?n.zones.filter(t=>"All"!==t).join(","):"",a={period_start:Math.floor(i/1e3),period_end:Math.floor(s/1e3)};return"desks"===n.type?(0,g.F2)(Object.assign(Object.assign({},a),{zones:o,type:"desk"})):(0,f.u$)(Object.assign(Object.assign({},a),{zone_ids:o}))}),(0,L.K)(t=>[]),(0,N.U)(t=>(this._loading.next(""),(null==t?void 0:t.length)||(0,h.cB)("No bookings for the selected levels and period"),this._active_bookings.next(t||[]),t)),(0,j.d)()),this.loading=this._loading.asObservable(),this.options=this._options.asObservable(),this.bookings=this._active_bookings.asObservable(),this.counts=this._options.pipe((0,k.b)(500),(0,C.w)(t=>{const e=(t.zones||[]).filter(t=>-1!==t&&"All"!==t);return Promise.all(e.map(t=>(0,p.rlq)(t,"desks").pipe((0,N.U)(e=>[t,e.details.length])).toPromise()))}),(0,L.K)(t=>[]),(0,N.U)(t=>{const e={};return this._active_bookings.next([]),t.forEach(([t,n])=>e[t]=n),e}),(0,j.d)()),this.stats=(0,z.aj)([this.counts,this.bookings]).pipe((0,N.U)(([t,e])=>e[0]instanceof f.ym?function(t,e=8){const n=t.reduce((t,e)=>t+e.attendees.length,0),i=t.reduce((t,e)=>{var n;return t+(null===(n=e.system)||void 0===n?void 0:n.capacity)},0),s=t.reduce((t,e)=>t+e.duration,0)/(60*e),o=n/i;return{count:t.length,avg_length:t.reduce((t,e)=>t+e.duration,0)/t.length,efficiency:(s+o)/2,total_users:n,total_capacity:i,occupancy:o,utilisation:s,events:t}}(e,8*this.duration):function(t,e=1,n={}){const i=Object.keys(n).reduce((t,e)=>t+(n[e]||0),0);return{total:i,count:t.length,utilisation:t.length/i/e,events:t}}(e||[],this.duration,t))),this.day_list=(0,z.aj)([this.options,this.stats]).pipe((0,N.U)(([t,e])=>{const{start:n}=t;let i=(0,m.Z)(n);const s=(0,v.Z)(t.end||i),o=[];for(;(0,x.Z)(i,s);){const t=(0,m.Z)(i).valueOf(),n=(0,v.Z)(t).valueOf(),s=e.events.filter(e=>(0,h.MZ)(t,n,e.date,e.date+60*e.duration*1e3));o.push({date:t,total:e.total,free:e.total-s.length,approved:s.reduce((t,e)=>t+(e.approved?1:0),0),count:s.length,utilisation:(s.length/e.total*100).toFixed(1)}),i=(0,y.Z)(i,1)}return o}),(0,j.d)(1)),this._bookings_list.subscribe(t=>t)}get duration(){const t=this._options.getValue();return Math.abs(M((0,m.Z)(t.start),(0,U.Z)((0,v.Z)(t.end),1)))}generateReport(){this._generate.next((new Date).valueOf())}setOptions(t){var e,n,i,s,o,a,r;(null===(e=t.zones)||void 0===e?void 0:e.includes("All"))?t.zones=["All",...this._org.levelsForBuilding(this._org.building).map(t=>t.id)]:t.zones&&(null===(i=null===(n=this._options.getValue())||void 0===n?void 0:n.zones)||void 0===i?void 0:i.includes("All"))&&(t.zones=[]),(null===(s=t.start)||void 0===s?void 0:s.valueOf())!==(null===(o=this._options.getValue().start)||void 0===o?void 0:o.valueOf())&&(null===(a=t.end)||void 0===a?void 0:a.valueOf())!==(null===(r=this._options.getValue().end)||void 0===r?void 0:r.valueOf())&&this._options.next(Object.assign(Object.assign({},this._options.getValue()),t))}downloadReport(){const t=this._options.getValue(),e=this._active_bookings.getValue();(0,h.Sv)(`report+${t.type}+${(0,q.Z)(t.start,"yyyy-MM-dd")}+${(0,q.Z)(t.end,"yyyy-MM-dd")}.csv`,(0,h.o3)(e.map(t=>{const e=t.toJSON();return delete e.zones,delete e.server_names,e})))}}return t.\u0275fac=function(e){return new(e||t)(l.LFG(I.w7))},t.\u0275prov=l.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var P=n(6283),B=n(4786),Y=n(1522),Q=n(5812),X=n(5980),V=n(7806);function J(t,e){if(1&t&&(l.TgZ(0,"mat-option",13),l._uU(1),l.qZA()),2&t){const t=e.$implicit;l.Q6J("value",t.id),l.xp6(1),l.hij(" ",t.display_name||t.name," ")}}function R(t,e){1&t&&l._UZ(0,"mat-spinner",14),2&t&&l.Q6J("diameter",32)}function G(t,e){1&t&&(l.TgZ(0,"p"),l._uU(1,"Generate Report"),l.qZA())}let F=(()=>{class t extends h.KG{constructor(t,e,n){super(),this._state=t,this._org=e,this._route=n,this.zones=[],this.types=[{id:"internal",name:"Internal"},{id:"external",name:"External"},{id:"cancelled",name:"Cancelled"}],this.type_list=this.types.map(t=>`${t.id}`),this.levels=this._org.active_levels,this.loading=this._state.loading,this.bookings=this._state.bookings,this.options=this._state.options,this.generateReport=()=>this._state.generateReport(),this.downloadReport=()=>this._state.downloadReport(),this.setStartDate=t=>this._state.setOptions({start:new Date(t)}),this.setEndDate=t=>this._state.setOptions({end:new Date(t)}),this.setZones=t=>this._state.setOptions({zones:t})}ngOnInit(){return(0,u.mG)(this,void 0,void 0,function*(){yield this._org.initialised.pipe((0,d.P)(t=>t)).toPromise(),this.subscription("route.query",this._route.queryParamMap.subscribe(t=>{if(t.has("zone_ids")){const e=t.get("zone_ids").split(",");if(e.length){const t=this._org.levelWithID(e);if(!t)return;this._org.building=this._org.buildings.find(e=>e.id===t.parent_id),this.setZones(e)}}}))})}}return t.\u0275fac=function(e){return new(e||t)(l.Y36(D),l.Y36(I.w7),l.Y36(o.gz))},t.\u0275cmp=l.Xpm({type:t,selectors:[["reports-options"]],features:[l.qOj],decls:27,vars:28,consts:[["appearance","outline",1,"w-48"],["multiple","","placeholder","Select Levels...",3,"ngModel","ngModelChange"],["value","All"],[3,"value",4,"ngFor","ngForOf"],["appearance","outline",1,"w-64"],[3,"rangePicker"],["matStartDate","","placeholder","Start date",3,"ngModel","ngModelChange"],["matEndDate","","placeholder","End date",3,"ngModel","ngModelChange"],["matSuffix","",3,"for"],["picker",""],["mat-button","",1,"ml-4",3,"disabled","click"],[3,"diameter",4,"ngIf"],[4,"ngIf"],[3,"value"],[3,"diameter"]],template:function(t,e){if(1&t&&(l.TgZ(0,"mat-form-field",0),l.TgZ(1,"mat-select",1),l.NdJ("ngModelChange",function(t){return e.setZones(t)}),l.ALo(2,"async"),l.TgZ(3,"mat-option",2),l._uU(4,"All Levels"),l.qZA(),l.YNc(5,J,2,2,"mat-option",3),l.ALo(6,"async"),l.qZA(),l.qZA(),l.TgZ(7,"mat-form-field",4),l.TgZ(8,"mat-date-range-input",5),l.TgZ(9,"input",6),l.NdJ("ngModelChange",function(t){return t?e.setStartDate(t):""}),l.ALo(10,"async"),l.qZA(),l.TgZ(11,"input",7),l.NdJ("ngModelChange",function(t){return t?e.setEndDate(t):""}),l.ALo(12,"async"),l.qZA(),l.qZA(),l._UZ(13,"mat-datepicker-toggle",8),l._UZ(14,"mat-date-range-picker",null,9),l.qZA(),l.TgZ(16,"button",10),l.NdJ("click",function(){return e.generateReport()}),l.ALo(17,"async"),l.ALo(18,"async"),l.YNc(19,R,1,1,"mat-spinner",11),l.ALo(20,"async"),l.YNc(21,G,2,0,"p",12),l.ALo(22,"async"),l.qZA(),l.TgZ(23,"button",10),l.NdJ("click",function(){return e.downloadReport()}),l.ALo(24,"async"),l.TgZ(25,"p"),l._uU(26,"Download Report"),l.qZA(),l.qZA()),2&t){const t=l.MAs(15);let n,i,s,o,a;l.xp6(1),l.Q6J("ngModel",null==(n=l.lcZ(2,10,e.options))?null:n.zones),l.xp6(4),l.Q6J("ngForOf",l.lcZ(6,12,e.levels)),l.xp6(3),l.Q6J("rangePicker",t),l.xp6(1),l.Q6J("ngModel",null==(i=l.lcZ(10,14,e.options))?null:i.start),l.xp6(2),l.Q6J("ngModel",null==(s=l.lcZ(12,16,e.options))?null:s.end),l.xp6(2),l.Q6J("for",t),l.xp6(3),l.Q6J("disabled",!!l.lcZ(17,18,e.loading)||!(null!=(o=l.lcZ(18,20,e.options))&&null!=o.zones&&o.zones.length)),l.xp6(3),l.Q6J("ngIf",l.lcZ(20,22,e.loading)),l.xp6(2),l.Q6J("ngIf",!l.lcZ(22,24,e.loading)),l.xp6(2),l.Q6J("disabled",!(null!=(a=l.lcZ(24,26,e.bookings))&&a.length))}},directives:[P.KE,B.gD,s.JJ,s.On,Y.ey,i.sg,Q.wx,Q.zY,s.Fj,Q.By,Q.nW,P.R9,Q._g,X.lW,i.O5,V.$g],pipes:[i.Ov],styles:["[_nghost-%COMP%]{display:flex;align-items:center;background-color:#fff;height:5em;padding:0 1em}button[_ngcontent-%COMP%]{min-width:0;padding:0 .85rem}mat-form-field[_ngcontent-%COMP%]{height:3.25em;margin-left:1em}mat-slide-toggle[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:5.5em;white-space:normal;line-height:1.2em}"]}),t})();var H=n(1548);const W=function(){return["/reports","desks"]},$=function(){return["/reports","spaces"]},K=function(){return["/reports","catering"]};let tt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=l.Xpm({type:t,selectors:[["reports-menu"],["","reports-menu",""]],decls:30,vars:6,consts:[["matRipple","",1,"h-64","w-64","m-4","p-4","flex","flex-col","items-center","justify-center","bg-white","rounded","shadow","hover:bg-gray-100",3,"routerLink"],[1,"text-8xl"],[1,"text-xl","font-bold","mb-4"],[1,"flex","items-center"],[1,"ml-2"]],template:function(t,e){1&t&&(l.TgZ(0,"a",0),l.TgZ(1,"app-icon",1),l._uU(2,"room"),l.qZA(),l.TgZ(3,"h3",2),l._uU(4,"Desks"),l.qZA(),l.TgZ(5,"div",3),l.TgZ(6,"p"),l._uU(7,"View Report"),l.qZA(),l.TgZ(8,"app-icon",4),l._uU(9,"chevron_right"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(10,"a",0),l.TgZ(11,"app-icon",1),l._uU(12,"meeting_room"),l.qZA(),l.TgZ(13,"h3",2),l._uU(14,"Rooms"),l.qZA(),l.TgZ(15,"div",3),l.TgZ(16,"p"),l._uU(17,"View Report"),l.qZA(),l.TgZ(18,"app-icon",4),l._uU(19,"chevron_right"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(20,"a",0),l.TgZ(21,"app-icon",1),l._uU(22,"room_service"),l.qZA(),l.TgZ(23,"h3",2),l._uU(24,"Catering"),l.qZA(),l.TgZ(25,"div",3),l.TgZ(26,"p"),l._uU(27,"View Report"),l.qZA(),l.TgZ(28,"app-icon",4),l._uU(29,"chevron_right"),l.qZA(),l.qZA(),l.qZA()),2&t&&(l.Q6J("routerLink",l.DdM(3,W)),l.xp6(10),l.Q6J("routerLink",l.DdM(4,$)),l.xp6(10),l.Q6J("routerLink",l.DdM(5,K)))},directives:[o.yS,Y.wG,H.o],styles:["[_nghost-%COMP%]{display:flex;align-items:center;justify-content:center;background:var(--bg)}"]}),t})();const et=["app-reports",""];function nt(t,e){1&t&&l._UZ(0,"div",4)}let it=(()=>{class t{constructor(t){this._router=t}get path(){const t=this._router.url.split("/");return t[t.length-1]}}return t.\u0275fac=function(e){return new(e||t)(l.Y36(o.F0))},t.\u0275cmp=l.Xpm({type:t,selectors:[["","app-reports",""]],attrs:et,decls:6,vars:1,consts:[[1,"h-full"],[1,"relative","overflow-hidden","flex","flex-col","flex-1","w-1/2","h-full"],[1,"flex-1","h-1/2","w-full","overflow-auto"],["reports-menu","","class","absolute inset-0",4,"ngIf"],["reports-menu","",1,"absolute","inset-0"]],template:function(t,e){1&t&&(l._UZ(0,"sidebar",0),l.TgZ(1,"main",1),l._UZ(2,"reports-options"),l.TgZ(3,"div",2),l._UZ(4,"router-outlet"),l.qZA(),l.YNc(5,nt,1,0,"div",3),l.qZA()),2&t&&(l.xp6(5),l.Q6J("ngIf","reports"===e.path))},directives:[c.k,F,o.lC,i.O5,tt],styles:["[_nghost-%COMP%]{display:flex;height:100%;width:100%;background:var(--bg)}"]}),t})();var st=n(7209),ot=n(4587),at=n(8276);let rt=(()=>{class t{constructor(t){this._state=t,this.total_count=this._state.stats.pipe((0,N.U)(t=>t.count||0)),this.avg_length=this._state.stats.pipe((0,N.U)(t=>(0,at.Z)({minutes:t.avg_length||0}))),this.efficiency=this._state.stats.pipe((0,N.U)(t=>(100*(t.efficiency||0)).toFixed(1))),this.total_users=this._state.stats.pipe((0,N.U)(t=>t.total_users||0)),this.total_capacity=this._state.stats.pipe((0,N.U)(t=>t.total_capacity||0)),this.occupancy=this._state.stats.pipe((0,N.U)(t=>(100*(t.occupancy||0)).toFixed(1))),this.utilisation=this._state.stats.pipe((0,N.U)(t=>(100*(t.utilisation||0)).toFixed(1)))}}return t.\u0275fac=function(e){return new(e||t)(l.Y36(D))},t.\u0275cmp=l.Xpm({type:t,selectors:[["report-spaces-overall"]],decls:44,vars:21,consts:[[1,"m-4","p-4","rounded","bg-white","shadow","flex","justify-center","items-center","space-x-2"],[1,"flex","flex-col","items-center","flex-1"],[1,"flex-1","flex","flex-col","items-center","justify-center"]],template:function(t,e){1&t&&(l.TgZ(0,"div",0),l.TgZ(1,"div",1),l.TgZ(2,"h3"),l._uU(3,"Total Bookings"),l.qZA(),l.TgZ(4,"p"),l._uU(5),l.ALo(6,"async"),l.qZA(),l.qZA(),l.TgZ(7,"div",1),l.TgZ(8,"h3"),l._uU(9,"Average Bookings Length"),l.qZA(),l.TgZ(10,"p"),l._uU(11),l.ALo(12,"async"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(13,"div",0),l.TgZ(14,"div",2),l.TgZ(15,"h3"),l._uU(16,"Overall Efficiency"),l.qZA(),l.TgZ(17,"p"),l._uU(18),l.ALo(19,"async"),l.qZA(),l.qZA(),l.TgZ(20,"div",2),l.TgZ(21,"h3"),l._uU(22,"Occupancy"),l.qZA(),l.TgZ(23,"p"),l._uU(24),l.ALo(25,"async"),l.qZA(),l.qZA(),l.TgZ(26,"div",2),l.TgZ(27,"h3"),l._uU(28,"Total Attendees"),l.qZA(),l.TgZ(29,"p"),l._uU(30),l.ALo(31,"async"),l.qZA(),l.qZA(),l.TgZ(32,"div",2),l.TgZ(33,"h3"),l._uU(34,"Total Capacity"),l.qZA(),l.TgZ(35,"p"),l._uU(36),l.ALo(37,"async"),l.qZA(),l.qZA(),l.TgZ(38,"div",2),l.TgZ(39,"h3"),l._uU(40,"Utilisation"),l.qZA(),l.TgZ(41,"p"),l._uU(42),l.ALo(43,"async"),l.qZA(),l.qZA(),l.qZA()),2&t&&(l.xp6(5),l.Oqu(l.lcZ(6,7,e.total_count)||0),l.xp6(6),l.Oqu(l.lcZ(12,9,e.avg_length)||"None"),l.xp6(7),l.hij("",l.lcZ(19,11,e.efficiency)||0,"%"),l.xp6(6),l.hij("",l.lcZ(25,13,e.occupancy)||0,"%"),l.xp6(6),l.Oqu(l.lcZ(31,15,e.total_users)||0),l.xp6(6),l.Oqu(l.lcZ(37,17,e.total_capacity)||0),l.xp6(6),l.hij("",l.lcZ(43,19,e.utilisation)||0,"%"))},pipes:[i.Ov],styles:["h3[_ngcontent-%COMP%]{font-weight:500}p[_ngcontent-%COMP%]:not([simple]){font-size:1.75rem}"]}),t})();var lt=n(611),ct=n(1354);const ut=function(){return["name","capacity","count","utilisation","avg_attendees","occupancy"]},dt=function(){return["Name","Capacity","Meeting Count","Utilisation","Avg. Attendees","Occupancy"]},ht=function(){return["flex"]};let pt=(()=>{class t{constructor(t){this._reports=t,this.space_list=(0,z.aj)([this._reports.stats,this._reports.options]).pipe((0,k.b)(300),(0,N.U)(([t,{start:e,end:n}])=>{let i=[];for(const o of t.events){const t=o.resources||[];for(const e of t){i.find(t=>t.id===e.id)||i.push({id:e.id,name:e.display_name||e.name,capacity:e.capacity||1,count:0,attendees:0,avg_attendees:0,usage:0,utilisation:0,occupancy:0});const t=i.find(t=>t.id===e.id);t.count+=1,t.usage+=o.duration,t.attendees+=o.attendees.length}}const s=M(n,e);for(const o of i)o.avg_attendees=o.attendees/o.count,o.utilisation=o.usage/60/8/s,o.occupancy=o.avg_attendees/o.capacity;return i})),this.download=()=>(0,u.mG)(this,void 0,void 0,function*(){const t=yield this.space_list.pipe((0,lt.q)(1)).toPromise();(0,h.Sv)("report-spaces-usage.csv",(0,h.o3)(t))})}}return t.\u0275fac=function(e){return new(e||t)(l.Y36(D))},t.\u0275cmp=l.Xpm({type:t,selectors:[["report-spaces-space-listing"]],decls:8,vars:8,consts:[[1,"m-4","rounded","bg-white","shadow","overflow-hidden"],[1,"border-b","border-gray-300","px-4","py-2","flex","items-center"],[1,"font-bold","text-xl","flex-1"],["mat-icon-button","",3,"click"],[3,"dataSource","pagination","columns","display_column","column_size"]],template:function(t,e){1&t&&(l.TgZ(0,"div",0),l.TgZ(1,"div",1),l.TgZ(2,"h3",2),l._uU(3,"Space Utilisation"),l.qZA(),l.TgZ(4,"button",3),l.NdJ("click",function(){return e.download()}),l.TgZ(5,"app-icon"),l._uU(6,"download"),l.qZA(),l.qZA(),l.qZA(),l._UZ(7,"custom-table",4),l.qZA()),2&t&&(l.xp6(7),l.Q6J("dataSource",e.space_list)("pagination",!0)("columns",l.DdM(5,ut))("display_column",l.DdM(6,dt))("column_size",l.DdM(7,ht)))},directives:[X.lW,H.o,ct.C],styles:[""]}),t})();const gt=function(){return["name","capacity","count","avg_attendees","occupancy"]},ft=function(){return["Name","Capacity","Meeting Count","Avg. Attendees","Occupancy"]},mt=function(){return["flex"]};let vt=(()=>{class t{constructor(t){this._reports=t,this.user_list=(0,z.aj)([this._reports.stats]).pipe((0,k.b)(300),(0,N.U)(([t])=>{let e=[];for(const n of t.events){const t=n.attendees||[],i=n.resources.reduce((t,e)=>t+e.capacity,0)||1;for(const s of t){e.find(t=>t.email===s.email)||e.push({id:s.email,name:s.name,capacity:i,count:0,attendees:0,avg_attendees:0,occupancy:0});const t=e.find(t=>t.id===s.email);t.count+=1,t.attendees+=n.attendees.length}}for(const n of e)n.avg_attendees=n.attendees/n.count,n.occupancy=n.avg_attendees/n.capacity;return e}),(0,j.d)(1)),this.download=()=>(0,u.mG)(this,void 0,void 0,function*(){const t=yield this.user_list.pipe((0,lt.q)(1)).toPromise();(0,h.Sv)("report-space-attendee-usage.csv",(0,h.o3)(t))})}}return t.\u0275fac=function(e){return new(e||t)(l.Y36(D))},t.\u0275cmp=l.Xpm({type:t,selectors:[["report-spaces-user-listing"]],decls:8,vars:8,consts:[[1,"m-4","rounded","bg-white","shadow","overflow-hidden"],[1,"border-b","border-gray-300","px-4","py-2","flex","items-center"],[1,"font-bold","text-xl","flex-1"],["mat-icon-button","",3,"click"],[3,"dataSource","pagination","columns","display_column","column_size"]],template:function(t,e){1&t&&(l.TgZ(0,"div",0),l.TgZ(1,"div",1),l.TgZ(2,"h3",2),l._uU(3,"Staff Utilisation"),l.qZA(),l.TgZ(4,"button",3),l.NdJ("click",function(){return e.download()}),l.TgZ(5,"app-icon"),l._uU(6,"download"),l.qZA(),l.qZA(),l.qZA(),l._UZ(7,"custom-table",4),l.qZA()),2&t&&(l.xp6(7),l.Q6J("dataSource",e.user_list)("pagination",!0)("columns",l.DdM(5,gt))("display_column",l.DdM(6,ft))("column_size",l.DdM(7,mt)))},directives:[X.lW,H.o,ct.C],styles:[""]}),t})();const xt=["report-spaces",""];function yt(t,e){1&t&&(l.ynx(0),l._UZ(1,"report-spaces-overall"),l._UZ(2,"report-spaces-space-listing"),l._UZ(3,"report-spaces-user-listing"),l.BQk())}function _t(t,e){if(1&t&&(l.ynx(0),l.YNc(1,yt,4,0,"ng-container",0),l.ALo(2,"async"),l.BQk()),2&t){const t=l.oxw(),e=l.MAs(5);l.xp6(1),l.Q6J("ngIf",l.lcZ(2,2,t.total_count))("ngIfElse",e)}}function bt(t,e){1&t&&(l.TgZ(0,"div",3),l._UZ(1,"mat-spinner",4),l.TgZ(2,"p",5),l._uU(3,"Loading report data..."),l.qZA(),l.qZA()),2&t&&(l.xp6(1),l.Q6J("diameter",32))}function Zt(t,e){1&t&&(l.TgZ(0,"div",3),l.TgZ(1,"p",5),l._uU(2," Select levels and time period to generate a report. "),l.qZA(),l.qZA())}let wt=(()=>{class t{constructor(t){this._state=t,this.total_count=this._state.stats.pipe((0,N.U)(t=>t.count||0)),this.loading=this._state.loading}ngOnInit(){this._state.setOptions({type:"events"})}}return t.\u0275fac=function(e){return new(e||t)(l.Y36(D))},t.\u0275cmp=l.Xpm({type:t,selectors:[["","report-spaces",""]],attrs:xt,decls:6,vars:4,consts:[[4,"ngIf","ngIfElse"],["load_state",""],["empty_state",""],[1,"h-full","w-full","flex","flex-col","items-center","p-8"],[1,"mb-4",3,"diameter"],["simple",""]],template:function(t,e){if(1&t&&(l.YNc(0,_t,3,4,"ng-container",0),l.ALo(1,"async"),l.YNc(2,bt,4,1,"ng-template",null,1,l.W1O),l.YNc(4,Zt,3,0,"ng-template",null,2,l.W1O)),2&t){const t=l.MAs(3);l.Q6J("ngIf",!l.lcZ(1,2,e.loading))("ngIfElse",t)}},directives:[i.O5,rt,pt,vt,V.$g],pipes:[i.Ov],styles:[""]}),t})();var At=n(5059);let Ot=(()=>{class t extends h.KG{constructor(t,e){super(),this._state=t,this._org=e,this.day_list=this._state.day_list,this.stats=(0,z.aj)([this._state.options,this._state.counts])}ngOnInit(){this.subscription("day_list",this.day_list.subscribe(t=>this.updateDailyChart(t))),this.subscription("stats",this.stats.subscribe(([t,e])=>this.updateLevelChart(t,e)))}updateDailyChart(t){const e={labels:t.map(t=>(0,q.Z)(t.date,"dd MMM")),series:[t.map(t=>t.utilisation)]};this._day_chart=new At.Line("#day-chart",e)}updateLevelChart(t,e){let{zones:n}=t||{};n.includes("All")&&(n=this._org.levels.filter(t=>t.parent_id===this._org.building.id).map(t=>t.id));const i={labels:(n||[]).map(t=>{const e=this._org.levelWithID([t]);return(null==e?void 0:e.display_name)||e.name||""}),series:(n||[]).map(t=>e[t])};this._level_chart=new At.Pie("#level-chart",i)}}return t.\u0275fac=function(e){return new(e||t)(l.Y36(D),l.Y36(I.w7))},t.\u0275cmp=l.Xpm({type:t,selectors:[["report-desks-charts"]],features:[l.qOj],decls:11,vars:0,consts:[[1,"flex","items-center","space-x-4","w-full","px-4"],[1,"bg-white","rounded","shadow","flex-1"],[1,"border-b","border-gray-300","p-4","text-xl","font-bold"],["id","day-chart",1,"ct-chart","ct-octave"],["util_chart",""],["id","level-chart",1,"ct-chart","ct-octave"],["level_chart",""]],template:function(t,e){1&t&&(l.TgZ(0,"div",0),l.TgZ(1,"div",1),l.TgZ(2,"div",2),l._uU(3," Daily Utilisation "),l.qZA(),l._UZ(4,"div",3,4),l.qZA(),l.TgZ(6,"div",1),l.TgZ(7,"div",2),l._uU(8," Level Utilisation "),l.qZA(),l._UZ(9,"div",5,6),l.qZA(),l.qZA())},styles:["[_nghost-%COMP%]{display:block}"]}),t})();function Mt(t,e){1&t&&(l._uU(0),l.ALo(1,"date")),2&t&&l.hij(" ",l.xi3(1,1,e.data,"mediumDate")," ")}function Ut(t,e){1&t&&l._uU(0),2&t&&l.hij(" ",e.data||"0","% ")}const qt=function(){return["date","usage","approved","count","utilisation"]},Tt=function(){return["Date","Used Desks","Approved Bookings","Total Requests","Utilisation"]},St=function(){return["flex"]},Et=function(t,e,n){return{date:t,usage:e,utilisation:n}};let zt=(()=>{class t{constructor(t){this._state=t,this.day_list=this._state.day_list,this.download=()=>(0,u.mG)(this,void 0,void 0,function*(){let t=yield this.day_list.pipe((0,lt.q)(1)).toPromise();t=t.map(t=>Object.assign(Object.assign({},t),{date:(0,q.Z)(t.date,"MMMM d, y(EEE)")})),(0,h.Sv)("desks-usage.csv",(0,h.o3)(t))})}}return t.\u0275fac=function(e){return new(e||t)(l.Y36(D))},t.\u0275cmp=l.Xpm({type:t,selectors:[["report-desks-overall-list"]],decls:12,vars:13,consts:[[1,"m-4","rounded","bg-white","shadow","overflow-hidden"],[1,"border-b","border-gray-300","p-4","flex","items-center"],[1,"font-bold","text-xl","flex-1"],["mat-icon-button","",3,"click"],["red-header","",3,"dataSource","pagination","columns","display_column","column_size","template"],["date_view",""],["percent_view",""]],template:function(t,e){if(1&t&&(l.TgZ(0,"div",0),l.TgZ(1,"div",1),l.TgZ(2,"h3",2),l._uU(3,"Daily Utilisation"),l.qZA(),l.TgZ(4,"button",3),l.NdJ("click",function(){return e.download()}),l.TgZ(5,"app-icon"),l._uU(6,"download"),l.qZA(),l.qZA(),l.qZA(),l._UZ(7,"custom-table",4),l.YNc(8,Mt,2,4,"ng-template",null,5,l.W1O),l.YNc(10,Ut,1,1,"ng-template",null,6,l.W1O),l.qZA()),2&t){const t=l.MAs(9),n=l.MAs(11);l.xp6(7),l.Q6J("dataSource",e.day_list)("pagination",!0)("columns",l.DdM(6,qt))("display_column",l.DdM(7,Tt))("column_size",l.DdM(8,St))("template",l.kEZ(9,Et,t,n,n))}},directives:[X.lW,H.o,ct.C],pipes:[i.uU],encapsulation:2}),t})();function kt(t,e){1&t&&l._uU(0),2&t&&l.hij(" ",e.data||"0","% ")}const Ct=function(){return["name","avg_usage","approved","count","utilisation"]},Lt=function(){return["Level","Avg. Used Desks","Approved Bookings","Total Requests","Utilisation"]},Nt=function(){return["flex"]},jt=function(t){return{utilisation:t}};let It=(()=>{class t{constructor(t,e){this._state=t,this._org=e,this.level_list=(0,z.aj)([this._state.options,this._state.stats,this._state.counts]).pipe((0,N.U)(([t,e,n])=>{const{start:i,end:s,zones:o}=t,a=M(s,i),r=[];for(const l of o){if("All"===l)continue;const t=this._org.levelWithID([l]),i=n[l]||0,s=e.events.filter(t=>t.zones.includes(l));let o=(i*a-s.length)/a;o%1!=0&&(o=o.toFixed(2)),r.push({name:(null==t?void 0:t.display_name)||(null==t?void 0:t.name),free:o,total:i,count:s.length,utilisation:(s.length/(i*a)*100||0).toFixed(2)})}return r}),(0,j.d)(1)),this.download=()=>(0,u.mG)(this,void 0,void 0,function*(){let t=yield this.level_list.pipe((0,lt.q)(1)).toPromise();(0,h.Sv)("desks-levels-usage.csv",(0,h.o3)(t))})}}return t.\u0275fac=function(e){return new(e||t)(l.Y36(D),l.Y36(I.w7))},t.\u0275cmp=l.Xpm({type:t,selectors:[["report-desks-levels-list"]],decls:11,vars:11,consts:[[1,"px-4","mb-4","w-full"],[1,"rounded","bg-white","shadow","overflow-hidden","w-full"],[1,"border-b","border-gray-300","p-4","flex","items-center"],[1,"font-bold","text-xl","flex-1"],["mat-icon-button","",3,"click"],["red-header","",3,"dataSource","pagination","columns","display_column","column_size","template"],["percent_view",""]],template:function(t,e){if(1&t&&(l.TgZ(0,"div",0),l.TgZ(1,"div",1),l.TgZ(2,"div",2),l.TgZ(3,"h3",3),l._uU(4,"Level Utilisation"),l.qZA(),l.TgZ(5,"button",4),l.NdJ("click",function(){return e.download()}),l.TgZ(6,"app-icon"),l._uU(7,"download"),l.qZA(),l.qZA(),l.qZA(),l._UZ(8,"custom-table",5),l.YNc(9,kt,1,1,"ng-template",null,6,l.W1O),l.qZA(),l.qZA()),2&t){const t=l.MAs(10);l.xp6(8),l.Q6J("dataSource",e.level_list)("pagination",!0)("columns",l.DdM(6,Ct))("display_column",l.DdM(7,Lt))("column_size",l.DdM(8,Nt))("template",l.VKq(9,jt,t))}},directives:[X.lW,H.o,ct.C],encapsulation:2}),t})();const Dt=["report-desks",""];function Pt(t,e){if(1&t&&(l.ynx(0),l.TgZ(1,"div",3),l.TgZ(2,"div",4),l.TgZ(3,"h3"),l._uU(4,"Total Bookings"),l.qZA(),l.TgZ(5,"p"),l._uU(6),l.ALo(7,"async"),l.qZA(),l.qZA(),l.TgZ(8,"div",4),l.TgZ(9,"h3"),l._uU(10,"Utilisation"),l.qZA(),l.TgZ(11,"p"),l._uU(12),l.ALo(13,"async"),l.qZA(),l.qZA(),l.qZA(),l._UZ(14,"report-desks-charts"),l._UZ(15,"report-desks-overall-list"),l._UZ(16,"report-desks-levels-list"),l.BQk()),2&t){const t=l.oxw(2);l.xp6(6),l.Oqu(l.lcZ(7,2,t.total_count)||0),l.xp6(6),l.hij("",l.lcZ(13,4,t.utilisation)||0,"%")}}function Bt(t,e){if(1&t&&(l.ynx(0),l.YNc(1,Pt,17,6,"ng-container",0),l.ALo(2,"async"),l.BQk()),2&t){const t=l.oxw(),e=l.MAs(5);l.xp6(1),l.Q6J("ngIf",l.lcZ(2,2,t.total_count))("ngIfElse",e)}}function Yt(t,e){1&t&&(l.TgZ(0,"div",5),l._UZ(1,"mat-spinner",6),l.TgZ(2,"p",7),l._uU(3,"Loading report data..."),l.qZA(),l.qZA()),2&t&&(l.xp6(1),l.Q6J("diameter",32))}function Qt(t,e){1&t&&(l.TgZ(0,"div",5),l.TgZ(1,"p",7),l._uU(2," Select levels and time period to generate a report. "),l.qZA(),l.qZA())}let Xt=(()=>{class t{constructor(t){this._state=t,this.total_count=this._state.stats.pipe((0,N.U)(t=>t.count||0)),this.utilisation=this._state.stats.pipe((0,N.U)(t=>(100*(t.utilisation||0)).toFixed(1))),this.loading=this._state.loading}ngOnInit(){this._state.setOptions({type:"desks"})}}return t.\u0275fac=function(e){return new(e||t)(l.Y36(D))},t.\u0275cmp=l.Xpm({type:t,selectors:[["","report-desks",""]],attrs:Dt,decls:6,vars:4,consts:[[4,"ngIf","ngIfElse"],["load_state",""],["empty_state",""],[1,"m-4","p-4","rounded","bg-white","shadow","flex","justify-center","items-center","space-x-2"],[1,"flex","flex-col","items-center","flex-1"],[1,"h-full","w-full","flex","flex-col","items-center","p-8"],[1,"mb-4",3,"diameter"],["simple",""]],template:function(t,e){if(1&t&&(l.YNc(0,Bt,3,4,"ng-container",0),l.ALo(1,"async"),l.YNc(2,Yt,4,1,"ng-template",null,1,l.W1O),l.YNc(4,Qt,3,0,"ng-template",null,2,l.W1O)),2&t){const t=l.MAs(3);l.Q6J("ngIf",!l.lcZ(1,2,e.loading))("ngIfElse",t)}},directives:[i.O5,Ot,zt,It,V.$g],pipes:[i.Ov],styles:["h3[_ngcontent-%COMP%]{font-weight:500}p[_ngcontent-%COMP%]:not([simple]){font-size:1.75rem}"]}),t})();var Vt=n(5510);let Jt=(()=>{class t{constructor(t){this._reports=t,this.catering_orders=this._reports.bookings.pipe((0,N.U)(t=>(0,h.xH)(t.filter(t=>{var e,n;return null===(n=null===(e=t.extension_data)||void 0===e?void 0:e.catering)||void 0===n?void 0:n.length}).map(t=>{var e;return null===(e=t.extension_data)||void 0===e?void 0:e.catering.map(e=>new Vt.GX(Object.assign(Object.assign({},e),{deliver_at:t.date,event:t})))})).filter(t=>t).sort((t,e)=>{var n,i;return(null===(n=t.event)||void 0===n?void 0:n.date)-(null===(i=e.event)||void 0===i?void 0:i.date)})),(0,j.d)(1)),this.catering_items=this.catering_orders.pipe((0,N.U)(t=>{var e;const n=[];for(const i of t)for(const t of(null==i?void 0:i.items)||[]){const i=n.findIndex(e=>t.options_string===e.options_string);i>=0?t[i]=new Vt.Ud(Object.assign(Object.assign({},t),{quantity:(null==t?void 0:t.quantity)+(null===(e=t[i])||void 0===e?void 0:e.quantity)})):n.push(t)}return n.sort((t,e)=>e.quantity-t.quantity)})),this.stats=(0,z.aj)([this.catering_orders,this.catering_items]).pipe((0,N.U)(([t,e])=>{const n=t.reduce((t,e)=>t+e.total_cost,0);return{order_count:t.length,unique_items:e.length,item_count:t.reduce((t,e)=>t+e.item_count,0),total_cost:n,avg_cost:n/t.length}}))}downloadOrders(){return(0,u.mG)(this,void 0,void 0,function*(){const t=yield this.catering_orders.pipe((0,lt.q)(1)).toPromise(),e=(0,h.o3)(t);return(0,h.Sv)("catering-orders.csv",e)})}}return t.\u0275fac=function(e){return new(e||t)(l.LFG(D))},t.\u0275prov=l.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Rt=(()=>{class t{constructor(t){this._report=t,this.stats=this._report.stats}}return t.\u0275fac=function(e){return new(e||t)(l.Y36(Jt))},t.\u0275cmp=l.Xpm({type:t,selectors:[["catering-report-overall"]],decls:32,vars:19,consts:[[1,"bg-white","shadow","rounded","m-2","px-8","w-48","h-24","flex","flex-col","items-center","justify-center"],[1,"text-3xl"],[1,""]],template:function(t,e){if(1&t&&(l.TgZ(0,"div",0),l.TgZ(1,"div",1),l._uU(2),l.ALo(3,"async"),l.qZA(),l.TgZ(4,"div",2),l._uU(5,"Orders"),l.qZA(),l.qZA(),l.TgZ(6,"div",0),l.TgZ(7,"div",1),l._uU(8),l.ALo(9,"async"),l.qZA(),l.TgZ(10,"div",2),l._uU(11,"Unique Items"),l.qZA(),l.qZA(),l.TgZ(12,"div",0),l.TgZ(13,"div",1),l._uU(14),l.ALo(15,"async"),l.qZA(),l.TgZ(16,"div",2),l._uU(17,"Ordered Items"),l.qZA(),l.qZA(),l.TgZ(18,"div",0),l.TgZ(19,"div",1),l._uU(20),l.ALo(21,"currency"),l.ALo(22,"async"),l.qZA(),l.TgZ(23,"div",2),l._uU(24,"Total"),l.qZA(),l.qZA(),l.TgZ(25,"div",0),l.TgZ(26,"div",1),l._uU(27),l.ALo(28,"currency"),l.ALo(29,"async"),l.qZA(),l.TgZ(30,"div",2),l._uU(31,"Order Average"),l.qZA(),l.qZA()),2&t){let t,n,i,s,o;l.xp6(2),l.hij(" ",(null==(t=l.lcZ(3,5,e.stats))?null:t.order_count)||"0"," "),l.xp6(6),l.hij(" ",(null==(n=l.lcZ(9,7,e.stats))?null:n.unique_items)||"0"," "),l.xp6(6),l.Oqu((null==(i=l.lcZ(15,9,e.stats))?null:i.item_count)||"0"),l.xp6(6),l.hij(" ",l.lcZ(21,11,(null==(s=l.lcZ(22,13,e.stats))?null:s.total_cost)/100||0)," "),l.xp6(7),l.hij(" ",l.lcZ(28,15,(null==(o=l.lcZ(29,17,e.stats))?null:o.avg_cost)/100||0)," ")}},pipes:[i.Ov,i.H9],styles:["[_nghost-%COMP%]{display:flex;flex-wrap:wrap;align-items:center;justify-content:center;padding:.5rem}"]}),t})();var Gt=n(6828);function Ft(t,e){if(1&t&&(l._uU(0),l.ALo(1,"date"),l.ALo(2,"date")),2&t){const t=e.data;l.AsE(" ",l.lcZ(1,2,t)," at ",l.xi3(2,4,t,"shortTime")," ")}}function Ht(t,e){1&t&&(l._uU(0),l.ALo(1,"currency")),2&t&&l.hij(" ",l.lcZ(1,1,e.data/100)," ")}const Wt=function(){return["deliver_at","item_count","total_cost"]},$t=function(){return["Date","Items","Total Cost"]},Kt=function(){return["flex"]},te=function(t,e){return{deliver_at:t,total_cost:e}};let ee=(()=>{class t{constructor(t){this._report=t,this.orders=this._report.catering_orders,this.download=()=>this._report.downloadOrders()}}return t.\u0275fac=function(e){return new(e||t)(l.Y36(Jt))},t.\u0275cmp=l.Xpm({type:t,selectors:[["catering-report-orders"]],decls:12,vars:12,consts:[[1,"w-[64rem]","max-w-[calc(100%-2rem)]","rounded","overflow-hidden","bg-white","shadow","mx-auto","my-2"],[1,"border-b","border-gray-200","flex","items-center","justify-between","px-4"],[1,"py-2","text-xl","font-medium"],["mat-button-icon","","matTooltip","Download list",3,"click"],["empty","No orders for selected period",1,"w-full","h-full",3,"dataSource","columns","display_column","column_size","template","pagination"],["date_state",""],["cost_state",""]],template:function(t,e){if(1&t&&(l.TgZ(0,"div",0),l.TgZ(1,"div",1),l.TgZ(2,"h2",2),l._uU(3,"Orders"),l.qZA(),l.TgZ(4,"button",3),l.NdJ("click",function(){return e.download()}),l.TgZ(5,"app-icon"),l._uU(6,"download"),l.qZA(),l.qZA(),l.qZA(),l._UZ(7,"custom-table",4),l.YNc(8,Ft,3,7,"ng-template",null,5,l.W1O),l.YNc(10,Ht,2,3,"ng-template",null,6,l.W1O),l.qZA()),2&t){const t=l.MAs(9),n=l.MAs(11);l.xp6(7),l.Q6J("dataSource",e.orders)("columns",l.DdM(6,Wt))("display_column",l.DdM(7,$t))("column_size",l.DdM(8,Kt))("template",l.WLB(9,te,t,n))("pagination",!0)}},directives:[Gt.gM,H.o,ct.C],pipes:[i.uU,i.H9],styles:[""]}),t})();function ne(t,e){if(1&t&&(l.TgZ(0,"span",7),l._uU(1),l.qZA()),2&t){const t=l.oxw().data,e=l.oxw();l.Q6J("matTooltip",e.options(t)),l.xp6(1),l.hij(" ",t.length," option(s) ")}}function ie(t,e){1&t&&l.YNc(0,ne,2,2,"span",6),2&t&&l.Q6J("ngIf",e.data.length)}function se(t,e){1&t&&(l._uU(0),l.ALo(1,"currency")),2&t&&l.hij(" ",l.lcZ(1,1,(e.data||0)/100)," ")}const oe=function(){return["name","options","quantity","unit_price","total_cost"]},ae=function(){return["Name","Options","Quantity","Unit Price","Total Cost"]},re=function(){return["flex"]},le=function(t,e,n){return{options:t,unit_price:e,total_cost:n}};let ce=(()=>{class t{constructor(t){this._report=t,this.items=this._report.catering_items}options(t){return t.map(t=>t.name).join("\n")}}return t.\u0275fac=function(e){return new(e||t)(l.Y36(Jt))},t.\u0275cmp=l.Xpm({type:t,selectors:[["catering-report-items"]],decls:9,vars:13,consts:[[1,"w-[64rem]","max-w-[calc(100%-2rem)]","rounded","overflow-hidden","bg-white","shadow","mx-auto","my-2"],[1,"border-b","border-gray-200","flex","items-center","justify-between","px-4"],[1,"py-2","text-xl","font-medium"],["empty","No orders for selected period",1,"w-full","h-full",3,"dataSource","columns","display_column","column_size","template","pagination"],["option_state",""],["cost_state",""],["class","text-xs px-2 py-1 rounded bg-gray-300",3,"matTooltip",4,"ngIf"],[1,"text-xs","px-2","py-1","rounded","bg-gray-300",3,"matTooltip"]],template:function(t,e){if(1&t&&(l.TgZ(0,"div",0),l.TgZ(1,"div",1),l.TgZ(2,"h2",2),l._uU(3,"Ordered Items"),l.qZA(),l.qZA(),l._UZ(4,"custom-table",3),l.YNc(5,ie,1,1,"ng-template",null,4,l.W1O),l.YNc(7,se,2,3,"ng-template",null,5,l.W1O),l.qZA()),2&t){const t=l.MAs(6),n=l.MAs(8);l.xp6(4),l.Q6J("dataSource",e.items)("columns",l.DdM(6,oe))("display_column",l.DdM(7,ae))("column_size",l.DdM(8,re))("template",l.kEZ(9,le,t,n,n))("pagination",!0)}},directives:[ct.C,i.O5,Gt.gM],pipes:[i.H9],styles:[""]}),t})();function ue(t,e){1&t&&(l.TgZ(0,"div",4),l._UZ(1,"catering-report-overall"),l._UZ(2,"catering-report-orders"),l._UZ(3,"catering-report-items"),l.qZA())}function de(t,e){if(1&t&&(l.ynx(0),l.YNc(1,ue,4,0,"div",3),l.ALo(2,"async"),l.BQk()),2&t){const t=l.oxw(),e=l.MAs(5);l.xp6(1),l.Q6J("ngIf",l.lcZ(2,2,t.total_count))("ngIfElse",e)}}function he(t,e){1&t&&(l.TgZ(0,"div",5),l._UZ(1,"mat-spinner",6),l.TgZ(2,"p",7),l._uU(3,"Loading report data..."),l.qZA(),l.qZA()),2&t&&(l.xp6(1),l.Q6J("diameter",32))}function pe(t,e){1&t&&(l.TgZ(0,"div",5),l.TgZ(1,"p",7),l._uU(2," Select levels and time period to generate a report. "),l.qZA(),l.qZA())}const ge=[{path:"",component:it,children:[{path:""},{path:"spaces",component:wt},{path:"desks",component:Xt},{path:"catering",component:(()=>{class t{constructor(t){this._state=t,this.total_count=this._state.stats.pipe((0,N.U)(t=>t.count||0)),this.loading=this._state.loading}ngOnInit(){this._state.setOptions({type:"events"})}}return t.\u0275fac=function(e){return new(e||t)(l.Y36(D))},t.\u0275cmp=l.Xpm({type:t,selectors:[["catering-report"]],decls:6,vars:4,consts:[[4,"ngIf","ngIfElse"],["load_state",""],["empty_state",""],["class","h-full w-full",4,"ngIf","ngIfElse"],[1,"h-full","w-full"],[1,"h-full","w-full","flex","flex-col","items-center","p-8"],[1,"mb-4",3,"diameter"],["simple",""]],template:function(t,e){if(1&t&&(l.YNc(0,de,3,4,"ng-container",0),l.ALo(1,"async"),l.YNc(2,he,4,1,"ng-template",null,1,l.W1O),l.YNc(4,pe,3,0,"ng-template",null,2,l.W1O)),2&t){const t=l.MAs(3);l.Q6J("ngIf",!l.lcZ(1,2,e.loading))("ngIfElse",t)}},directives:[i.O5,Rt,ee,ce,V.$g],pipes:[i.Ov],styles:[""]}),t})()},{path:"**",redirectTo:"desks"}]}];let fe=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=l.oAB({type:t}),t.\u0275inj=l.cJS({imports:[[i.ez,s.u5,a.v,st.YR,ot.PP,r.TU,o.Bz.forChild(ge)]]}),t})()},5059:function(t,e){var n,i;i=this,void 0===(n=(function(){return i.Chartist=function(){var t={version:"0.11.4"};return function(t,e){"use strict";var n=t.window,i=t.document;e.namespaces={svg:"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/xmlns/",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",ct:"http://gionkunz.github.com/chartist-js/ct"},e.noop=function(t){return t},e.alphaNumerate=function(t){return String.fromCharCode(97+t%26)},e.extend=function(t){var n,i,s;for(t=t||{},n=1;n<arguments.length;n++)for(var o in i=arguments[n])t[o]="object"!=typeof(s=i[o])||null===s||s instanceof Array?s:e.extend(t[o],s);return t},e.replaceAll=function(t,e,n){return t.replace(new RegExp(e,"g"),n)},e.ensureUnit=function(t,e){return"number"==typeof t&&(t+=e),t},e.quantity=function(t){if("string"==typeof t){var e=/^(\d+)\s*(.*)$/g.exec(t);return{value:+e[1],unit:e[2]||void 0}}return{value:t}},e.querySelector=function(t){return t instanceof Node?t:i.querySelector(t)},e.times=function(t){return Array.apply(null,new Array(t))},e.sum=function(t,e){return t+(e||0)},e.mapMultiply=function(t){return function(e){return e*t}},e.mapAdd=function(t){return function(e){return e+t}},e.serialMap=function(t,n){var i=[],s=Math.max.apply(null,t.map(function(t){return t.length}));return e.times(s).forEach(function(e,s){var o=t.map(function(t){return t[s]});i[s]=n.apply(null,o)}),i},e.roundWithPrecision=function(t,n){var i=Math.pow(10,n||e.precision);return Math.round(t*i)/i},e.precision=8,e.escapingMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"},e.serialize=function(t){return null==t?t:("number"==typeof t?t=""+t:"object"==typeof t&&(t=JSON.stringify({data:t})),Object.keys(e.escapingMap).reduce(function(t,n){return e.replaceAll(t,n,e.escapingMap[n])},t))},e.deserialize=function(t){if("string"!=typeof t)return t;t=Object.keys(e.escapingMap).reduce(function(t,n){return e.replaceAll(t,e.escapingMap[n],n)},t);try{t=void 0!==(t=JSON.parse(t)).data?t.data:t}catch(n){}return t},e.createSvg=function(t,n,i,s){var o;return n=n||"100%",i=i||"100%",Array.prototype.slice.call(t.querySelectorAll("svg")).filter(function(t){return t.getAttributeNS(e.namespaces.xmlns,"ct")}).forEach(function(e){t.removeChild(e)}),(o=new e.Svg("svg").attr({width:n,height:i}).addClass(s))._node.style.width=n,o._node.style.height=i,t.appendChild(o._node),o},e.normalizeData=function(t,n,i){var s,o={raw:t,normalized:{}};return o.normalized.series=e.getDataArray({series:t.series||[]},n,i),s=o.normalized.series.every(function(t){return t instanceof Array})?Math.max.apply(null,o.normalized.series.map(function(t){return t.length})):o.normalized.series.length,o.normalized.labels=(t.labels||[]).slice(),Array.prototype.push.apply(o.normalized.labels,e.times(Math.max(0,s-o.normalized.labels.length)).map(function(){return""})),n&&e.reverseData(o.normalized),o},e.safeHasProperty=function(t,e){return null!==t&&"object"==typeof t&&t.hasOwnProperty(e)},e.isDataHoleValue=function(t){return null==t||"number"==typeof t&&isNaN(t)},e.reverseData=function(t){t.labels.reverse(),t.series.reverse();for(var e=0;e<t.series.length;e++)"object"==typeof t.series[e]&&void 0!==t.series[e].data?t.series[e].data.reverse():t.series[e]instanceof Array&&t.series[e].reverse()},e.getDataArray=function(t,n,i){return t.series.map(function t(n){if(e.safeHasProperty(n,"value"))return t(n.value);if(e.safeHasProperty(n,"data"))return t(n.data);if(n instanceof Array)return n.map(t);if(!e.isDataHoleValue(n)){if(i){var s={};return"string"==typeof i?s[i]=e.getNumberOrUndefined(n):s.y=e.getNumberOrUndefined(n),s.x=n.hasOwnProperty("x")?e.getNumberOrUndefined(n.x):s.x,s.y=n.hasOwnProperty("y")?e.getNumberOrUndefined(n.y):s.y,s}return e.getNumberOrUndefined(n)}})},e.normalizePadding=function(t,e){return e=e||0,"number"==typeof t?{top:t,right:t,bottom:t,left:t}:{top:"number"==typeof t.top?t.top:e,right:"number"==typeof t.right?t.right:e,bottom:"number"==typeof t.bottom?t.bottom:e,left:"number"==typeof t.left?t.left:e}},e.getMetaData=function(t,e){var n=t.data?t.data[e]:t[e];return n?n.meta:void 0},e.orderOfMagnitude=function(t){return Math.floor(Math.log(Math.abs(t))/Math.LN10)},e.projectLength=function(t,e,n){return e/n.range*t},e.getAvailableHeight=function(t,n){return Math.max((e.quantity(n.height).value||t.height())-(n.chartPadding.top+n.chartPadding.bottom)-n.axisX.offset,0)},e.getHighLow=function(t,n,i){var s={high:void 0===(n=e.extend({},n,i?n["axis"+i.toUpperCase()]:{})).high?-Number.MAX_VALUE:+n.high,low:void 0===n.low?Number.MAX_VALUE:+n.low},o=void 0===n.high,a=void 0===n.low;return(o||a)&&function t(e){if(void 0!==e)if(e instanceof Array)for(var n=0;n<e.length;n++)t(e[n]);else{var r=i?+e[i]:+e;o&&r>s.high&&(s.high=r),a&&r<s.low&&(s.low=r)}}(t),(n.referenceValue||0===n.referenceValue)&&(s.high=Math.max(n.referenceValue,s.high),s.low=Math.min(n.referenceValue,s.low)),s.high<=s.low&&(0===s.low?s.high=1:s.low<0?s.high=0:(s.high>0||(s.high=1),s.low=0)),s},e.isNumeric=function(t){return null!==t&&isFinite(t)},e.isFalseyButZero=function(t){return!t&&0!==t},e.getNumberOrUndefined=function(t){return e.isNumeric(t)?+t:void 0},e.isMultiValue=function(t){return"object"==typeof t&&("x"in t||"y"in t)},e.getMultiValue=function(t,n){return e.isMultiValue(t)?e.getNumberOrUndefined(t[n||"y"]):e.getNumberOrUndefined(t)},e.rho=function(t){if(1===t)return t;function e(t,n){return t%n==0?n:e(n,t%n)}function n(t){return t*t+1}var i,s=2,o=2;if(t%2==0)return 2;do{s=n(s)%t,o=n(n(o))%t,i=e(Math.abs(s-o),t)}while(1===i);return i},e.getBounds=function(t,n,i,s){var o,a,r,l=0,c={high:n.high,low:n.low};c.valueRange=c.high-c.low,c.oom=e.orderOfMagnitude(c.valueRange),c.step=Math.pow(10,c.oom),c.min=Math.floor(c.low/c.step)*c.step,c.max=Math.ceil(c.high/c.step)*c.step,c.range=c.max-c.min,c.numberOfSteps=Math.round(c.range/c.step);var u=e.projectLength(t,c.step,c)<i,d=s?e.rho(c.range):0;if(s&&e.projectLength(t,1,c)>=i)c.step=1;else if(s&&d<c.step&&e.projectLength(t,d,c)>=i)c.step=d;else for(;;){if(u&&e.projectLength(t,c.step,c)<=i)c.step*=2;else{if(u||!(e.projectLength(t,c.step/2,c)>=i))break;if(c.step/=2,s&&c.step%1!=0){c.step*=2;break}}if(l++>1e3)throw new Error("Exceeded maximum number of iterations while optimizing scale step!")}var h=2221e-19;function p(t,e){return t===(t+=e)&&(t*=1+(e>0?h:-h)),t}for(c.step=Math.max(c.step,h),a=c.min,r=c.max;a+c.step<=c.low;)a=p(a,c.step);for(;r-c.step>=c.high;)r=p(r,-c.step);c.min=a,c.max=r,c.range=c.max-c.min;var g=[];for(o=c.min;o<=c.max;o=p(o,c.step)){var f=e.roundWithPrecision(o);f!==g[g.length-1]&&g.push(f)}return c.values=g,c},e.polarToCartesian=function(t,e,n,i){var s=(i-90)*Math.PI/180;return{x:t+n*Math.cos(s),y:e+n*Math.sin(s)}},e.createChartRect=function(t,n,i){var s=!(!n.axisX&&!n.axisY),o=s?n.axisY.offset:0,a=s?n.axisX.offset:0,r=t.width()||e.quantity(n.width).value||0,l=t.height()||e.quantity(n.height).value||0,c=e.normalizePadding(n.chartPadding,i);r=Math.max(r,o+c.left+c.right),l=Math.max(l,a+c.top+c.bottom);var u={padding:c,width:function(){return this.x2-this.x1},height:function(){return this.y1-this.y2}};return s?("start"===n.axisX.position?(u.y2=c.top+a,u.y1=Math.max(l-c.bottom,u.y2+1)):(u.y2=c.top,u.y1=Math.max(l-c.bottom-a,u.y2+1)),"start"===n.axisY.position?(u.x1=c.left+o,u.x2=Math.max(r-c.right,u.x1+1)):(u.x1=c.left,u.x2=Math.max(r-c.right-o,u.x1+1))):(u.x1=c.left,u.x2=Math.max(r-c.right,u.x1+1),u.y2=c.top,u.y1=Math.max(l-c.bottom,u.y2+1)),u},e.createGrid=function(t,n,i,s,o,a,r,l){var c={};c[i.units.pos+"1"]=t,c[i.units.pos+"2"]=t,c[i.counterUnits.pos+"1"]=s,c[i.counterUnits.pos+"2"]=s+o;var u=a.elem("line",c,r.join(" "));l.emit("draw",e.extend({type:"grid",axis:i,index:n,group:a,element:u},c))},e.createGridBackground=function(t,e,n,i){var s=t.elem("rect",{x:e.x1,y:e.y2,width:e.width(),height:e.height()},n,!0);i.emit("draw",{type:"gridBackground",group:t,element:s})},e.createLabel=function(t,n,s,o,a,r,l,c,u,d,h){var p,g={};if(g[a.units.pos]=t+l[a.units.pos],g[a.counterUnits.pos]=l[a.counterUnits.pos],g[a.units.len]=n,g[a.counterUnits.len]=Math.max(0,r-10),d){var f=i.createElement("span");f.className=u.join(" "),f.setAttribute("xmlns",e.namespaces.xhtml),f.innerText=o[s],f.style[a.units.len]=Math.round(g[a.units.len])+"px",f.style[a.counterUnits.len]=Math.round(g[a.counterUnits.len])+"px",p=c.foreignObject(f,e.extend({style:"overflow: visible;"},g))}else p=c.elem("text",g,u.join(" ")).text(o[s]);h.emit("draw",e.extend({type:"label",axis:a,index:s,group:c,element:p,text:o[s]},g))},e.getSeriesOption=function(t,e,n){if(t.name&&e.series&&e.series[t.name]){var i=e.series[t.name];return i.hasOwnProperty(n)?i[n]:e[n]}return e[n]},e.optionsProvider=function(t,i,s){var o,a,r=e.extend({},t),l=[];function c(t){var l=o;if(o=e.extend({},r),i)for(a=0;a<i.length;a++)n.matchMedia(i[a][0]).matches&&(o=e.extend(o,i[a][1]));s&&t&&s.emit("optionsChanged",{previousOptions:l,currentOptions:o})}if(!n.matchMedia)throw"window.matchMedia not found! Make sure you're using a polyfill.";if(i)for(a=0;a<i.length;a++){var u=n.matchMedia(i[a][0]);u.addListener(c),l.push(u)}return c(),{removeMediaQueryListeners:function(){l.forEach(function(t){t.removeListener(c)})},getCurrentOptions:function(){return e.extend({},o)}}},e.splitIntoSegments=function(t,n,i){i=e.extend({},{increasingX:!1,fillHoles:!1},i);for(var s=[],o=!0,a=0;a<t.length;a+=2)void 0===e.getMultiValue(n[a/2].value)?i.fillHoles||(o=!0):(i.increasingX&&a>=2&&t[a]<=t[a-2]&&(o=!0),o&&(s.push({pathCoordinates:[],valueData:[]}),o=!1),s[s.length-1].pathCoordinates.push(t[a],t[a+1]),s[s.length-1].valueData.push(n[a/2]));return s}}(this||global,t),function(t,e){"use strict";e.Interpolation={},e.Interpolation.none=function(t){return t=e.extend({},{fillHoles:!1},t),function(n,i){for(var s=new e.Svg.Path,o=!0,a=0;a<n.length;a+=2){var r=n[a],l=n[a+1],c=i[a/2];void 0!==e.getMultiValue(c.value)?(o?s.move(r,l,!1,c):s.line(r,l,!1,c),o=!1):t.fillHoles||(o=!0)}return s}},e.Interpolation.simple=function(t){t=e.extend({},{divisor:2,fillHoles:!1},t);var n=1/Math.max(1,t.divisor);return function(i,s){for(var o,a,r,l=new e.Svg.Path,c=0;c<i.length;c+=2){var u=i[c],d=i[c+1],h=(u-o)*n,p=s[c/2];void 0!==p.value?(void 0===r?l.move(u,d,!1,p):l.curve(o+h,a,u-h,d,u,d,!1,p),o=u,a=d,r=p):t.fillHoles||(o=u=r=void 0)}return l}},e.Interpolation.cardinal=function(t){t=e.extend({},{tension:1,fillHoles:!1},t);var n=Math.min(1,Math.max(0,t.tension)),i=1-n;return function s(o,a){var r=e.splitIntoSegments(o,a,{fillHoles:t.fillHoles});if(r.length){if(r.length>1){var l=[];return r.forEach(function(t){l.push(s(t.pathCoordinates,t.valueData))}),e.Svg.Path.join(l)}if(a=r[0].valueData,(o=r[0].pathCoordinates).length<=4)return e.Interpolation.none()(o,a);for(var c=(new e.Svg.Path).move(o[0],o[1],!1,a[0]),u=0,d=o.length;d-2>u;u+=2){var h=[{x:+o[u-2],y:+o[u-1]},{x:+o[u],y:+o[u+1]},{x:+o[u+2],y:+o[u+3]},{x:+o[u+4],y:+o[u+5]}];d-4===u?h[3]=h[2]:u||(h[0]={x:+o[u],y:+o[u+1]}),c.curve(n*(6*h[1].x-h[0].x+h[2].x)/6+i*h[2].x,n*(6*h[1].y-h[0].y+h[2].y)/6+i*h[2].y,n*(h[1].x+6*h[2].x-h[3].x)/6+i*h[2].x,n*(h[1].y+6*h[2].y-h[3].y)/6+i*h[2].y,h[2].x,h[2].y,!1,a[(u+2)/2])}return c}return e.Interpolation.none()([])}},e.Interpolation.monotoneCubic=function(t){return t=e.extend({},{fillHoles:!1},t),function n(i,s){var o=e.splitIntoSegments(i,s,{fillHoles:t.fillHoles,increasingX:!0});if(o.length){if(o.length>1){var a=[];return o.forEach(function(t){a.push(n(t.pathCoordinates,t.valueData))}),e.Svg.Path.join(a)}if(s=o[0].valueData,(i=o[0].pathCoordinates).length<=4)return e.Interpolation.none()(i,s);var r,l,c=[],u=[],d=i.length/2,h=[],p=[],g=[],f=[];for(r=0;r<d;r++)c[r]=i[2*r],u[r]=i[2*r+1];for(r=0;r<d-1;r++)g[r]=u[r+1]-u[r],f[r]=c[r+1]-c[r],p[r]=g[r]/f[r];for(h[0]=p[0],h[d-1]=p[d-2],r=1;r<d-1;r++)0===p[r]||0===p[r-1]||p[r-1]>0!=p[r]>0?h[r]=0:(h[r]=3*(f[r-1]+f[r])/((2*f[r]+f[r-1])/p[r-1]+(f[r]+2*f[r-1])/p[r]),isFinite(h[r])||(h[r]=0));for(l=(new e.Svg.Path).move(c[0],u[0],!1,s[0]),r=0;r<d-1;r++)l.curve(c[r]+f[r]/3,u[r]+h[r]*f[r]/3,c[r+1]-f[r]/3,u[r+1]-h[r+1]*f[r]/3,c[r+1],u[r+1],!1,s[r+1]);return l}return e.Interpolation.none()([])}},e.Interpolation.step=function(t){return t=e.extend({},{postpone:!0,fillHoles:!1},t),function(n,i){for(var s,o,a,r=new e.Svg.Path,l=0;l<n.length;l+=2){var c=n[l],u=n[l+1],d=i[l/2];void 0!==d.value?(void 0===a?r.move(c,u,!1,d):(t.postpone?r.line(c,o,!1,a):r.line(s,u,!1,d),r.line(c,u,!1,d)),s=c,o=u,a=d):t.fillHoles||(s=o=a=void 0)}return r}}}(this||global,t),function(t,e){"use strict";e.EventEmitter=function(){var t=[];return{addEventHandler:function(e,n){t[e]=t[e]||[],t[e].push(n)},removeEventHandler:function(e,n){t[e]&&(n?(t[e].splice(t[e].indexOf(n),1),0===t[e].length&&delete t[e]):delete t[e])},emit:function(e,n){t[e]&&t[e].forEach(function(t){t(n)}),t["*"]&&t["*"].forEach(function(t){t(e,n)})}}}}(this||global,t),function(t,e){"use strict";function n(t){var e=[];if(t.length)for(var n=0;n<t.length;n++)e.push(t[n]);return e}e.Class={extend:function(t,n){var i=n||this.prototype||e.Class,s=Object.create(i);e.Class.cloneDefinitions(s,t);var o=function(){var t,n=s.constructor||function(){};return t=this===e?Object.create(s):this,n.apply(t,Array.prototype.slice.call(arguments,0)),t};return o.prototype=s,o.super=i,o.extend=this.extend,o},cloneDefinitions:function(){var t=n(arguments),e=t[0];return t.splice(1,t.length-1).forEach(function(t){Object.getOwnPropertyNames(t).forEach(function(n){delete e[n],Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}),e}}}(this||global,t),function(t,e){"use strict";var n=t.window;function i(){n.addEventListener("resize",this.resizeListener),this.optionsProvider=e.optionsProvider(this.options,this.responsiveOptions,this.eventEmitter),this.eventEmitter.addEventHandler("optionsChanged",(function(){this.update()}).bind(this)),this.options.plugins&&this.options.plugins.forEach((function(t){t instanceof Array?t[0](this,t[1]):t(this)}).bind(this)),this.eventEmitter.emit("data",{type:"initial",data:this.data}),this.createChart(this.optionsProvider.getCurrentOptions()),this.initializeTimeoutId=void 0}e.Base=e.Class.extend({constructor:function(t,n,s,o,a){this.container=e.querySelector(t),this.data=n||{},this.data.labels=this.data.labels||[],this.data.series=this.data.series||[],this.defaultOptions=s,this.options=o,this.responsiveOptions=a,this.eventEmitter=e.EventEmitter(),this.supportsForeignObject=e.Svg.isSupported("Extensibility"),this.supportsAnimations=e.Svg.isSupported("AnimationEventsAttribute"),this.resizeListener=(function(){this.update()}).bind(this),this.container&&(this.container.__chartist__&&this.container.__chartist__.detach(),this.container.__chartist__=this),this.initializeTimeoutId=setTimeout(i.bind(this),0)},optionsProvider:void 0,container:void 0,svg:void 0,eventEmitter:void 0,createChart:function(){throw new Error("Base chart type can't be instantiated!")},update:function(t,n,i){return t&&(this.data=t||{},this.data.labels=this.data.labels||[],this.data.series=this.data.series||[],this.eventEmitter.emit("data",{type:"update",data:this.data})),n&&(this.options=e.extend({},i?this.options:this.defaultOptions,n),this.initializeTimeoutId||(this.optionsProvider.removeMediaQueryListeners(),this.optionsProvider=e.optionsProvider(this.options,this.responsiveOptions,this.eventEmitter))),this.initializeTimeoutId||this.createChart(this.optionsProvider.getCurrentOptions()),this},detach:function(){return this.initializeTimeoutId?n.clearTimeout(this.initializeTimeoutId):(n.removeEventListener("resize",this.resizeListener),this.optionsProvider.removeMediaQueryListeners()),this},on:function(t,e){return this.eventEmitter.addEventHandler(t,e),this},off:function(t,e){return this.eventEmitter.removeEventHandler(t,e),this},version:e.version,supportsForeignObject:!1})}(this||global,t),function(t,e){"use strict";var n=t.document;e.Svg=e.Class.extend({constructor:function(t,i,s,o,a){t instanceof Element?this._node=t:(this._node=n.createElementNS(e.namespaces.svg,t),"svg"===t&&this.attr({"xmlns:ct":e.namespaces.ct})),i&&this.attr(i),s&&this.addClass(s),o&&(a&&o._node.firstChild?o._node.insertBefore(this._node,o._node.firstChild):o._node.appendChild(this._node))},attr:function(t,n){return"string"==typeof t?n?this._node.getAttributeNS(n,t):this._node.getAttribute(t):(Object.keys(t).forEach((function(n){if(void 0!==t[n])if(-1!==n.indexOf(":")){var i=n.split(":");this._node.setAttributeNS(e.namespaces[i[0]],n,t[n])}else this._node.setAttribute(n,t[n])}).bind(this)),this)},elem:function(t,n,i,s){return new e.Svg(t,n,i,this,s)},parent:function(){return this._node.parentNode instanceof SVGElement?new e.Svg(this._node.parentNode):null},root:function(){for(var t=this._node;"svg"!==t.nodeName;)t=t.parentNode;return new e.Svg(t)},querySelector:function(t){var n=this._node.querySelector(t);return n?new e.Svg(n):null},querySelectorAll:function(t){var n=this._node.querySelectorAll(t);return n.length?new e.Svg.List(n):null},getNode:function(){return this._node},foreignObject:function(t,i,s,o){if("string"==typeof t){var a=n.createElement("div");a.innerHTML=t,t=a.firstChild}t.setAttribute("xmlns",e.namespaces.xmlns);var r=this.elem("foreignObject",i,s,o);return r._node.appendChild(t),r},text:function(t){return this._node.appendChild(n.createTextNode(t)),this},empty:function(){for(;this._node.firstChild;)this._node.removeChild(this._node.firstChild);return this},remove:function(){return this._node.parentNode.removeChild(this._node),this.parent()},replace:function(t){return this._node.parentNode.replaceChild(t._node,this._node),t},append:function(t,e){return e&&this._node.firstChild?this._node.insertBefore(t._node,this._node.firstChild):this._node.appendChild(t._node),this},classes:function(){return this._node.getAttribute("class")?this._node.getAttribute("class").trim().split(/\s+/):[]},addClass:function(t){return this._node.setAttribute("class",this.classes(this._node).concat(t.trim().split(/\s+/)).filter(function(t,e,n){return n.indexOf(t)===e}).join(" ")),this},removeClass:function(t){var e=t.trim().split(/\s+/);return this._node.setAttribute("class",this.classes(this._node).filter(function(t){return-1===e.indexOf(t)}).join(" ")),this},removeAllClasses:function(){return this._node.setAttribute("class",""),this},height:function(){return this._node.getBoundingClientRect().height},width:function(){return this._node.getBoundingClientRect().width},animate:function(t,n,i){return void 0===n&&(n=!0),Object.keys(t).forEach((function(s){function o(t,n){var o,a,r,l={};t.easing&&(r=t.easing instanceof Array?t.easing:e.Svg.Easing[t.easing],delete t.easing),t.begin=e.ensureUnit(t.begin,"ms"),t.dur=e.ensureUnit(t.dur,"ms"),r&&(t.calcMode="spline",t.keySplines=r.join(" "),t.keyTimes="0;1"),n&&(t.fill="freeze",l[s]=t.from,this.attr(l),a=e.quantity(t.begin||0).value,t.begin="indefinite"),o=this.elem("animate",e.extend({attributeName:s},t)),n&&setTimeout((function(){try{o._node.beginElement()}catch(e){l[s]=t.to,this.attr(l),o.remove()}}).bind(this),a),i&&o._node.addEventListener("beginEvent",(function(){i.emit("animationBegin",{element:this,animate:o._node,params:t})}).bind(this)),o._node.addEventListener("endEvent",(function(){i&&i.emit("animationEnd",{element:this,animate:o._node,params:t}),n&&(l[s]=t.to,this.attr(l),o.remove())}).bind(this))}t[s]instanceof Array?t[s].forEach((function(t){o.bind(this)(t,!1)}).bind(this)):o.bind(this)(t[s],n)}).bind(this)),this}}),e.Svg.isSupported=function(t){return n.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#"+t,"1.1")},e.Svg.Easing={easeInSine:[.47,0,.745,.715],easeOutSine:[.39,.575,.565,1],easeInOutSine:[.445,.05,.55,.95],easeInQuad:[.55,.085,.68,.53],easeOutQuad:[.25,.46,.45,.94],easeInOutQuad:[.455,.03,.515,.955],easeInCubic:[.55,.055,.675,.19],easeOutCubic:[.215,.61,.355,1],easeInOutCubic:[.645,.045,.355,1],easeInQuart:[.895,.03,.685,.22],easeOutQuart:[.165,.84,.44,1],easeInOutQuart:[.77,0,.175,1],easeInQuint:[.755,.05,.855,.06],easeOutQuint:[.23,1,.32,1],easeInOutQuint:[.86,0,.07,1],easeInExpo:[.95,.05,.795,.035],easeOutExpo:[.19,1,.22,1],easeInOutExpo:[1,0,0,1],easeInCirc:[.6,.04,.98,.335],easeOutCirc:[.075,.82,.165,1],easeInOutCirc:[.785,.135,.15,.86],easeInBack:[.6,-.28,.735,.045],easeOutBack:[.175,.885,.32,1.275],easeInOutBack:[.68,-.55,.265,1.55]},e.Svg.List=e.Class.extend({constructor:function(t){var n=this;this.svgElements=[];for(var i=0;i<t.length;i++)this.svgElements.push(new e.Svg(t[i]));Object.keys(e.Svg.prototype).filter(function(t){return-1===["constructor","parent","querySelector","querySelectorAll","replace","append","classes","height","width"].indexOf(t)}).forEach(function(t){n[t]=function(){var i=Array.prototype.slice.call(arguments,0);return n.svgElements.forEach(function(n){e.Svg.prototype[t].apply(n,i)}),n}})}})}(this||global,t),function(t,e){"use strict";var n={m:["x","y"],l:["x","y"],c:["x1","y1","x2","y2","x","y"],a:["rx","ry","xAr","lAf","sf","x","y"]},i={accuracy:3};function s(t,n,i,s,o,a){var r=e.extend({command:o?t.toLowerCase():t.toUpperCase()},n,a?{data:a}:{});i.splice(s,0,r)}function o(t,e){t.forEach(function(i,s){n[i.command.toLowerCase()].forEach(function(n,o){e(i,n,s,o,t)})})}e.Svg.Path=e.Class.extend({constructor:function(t,n){this.pathElements=[],this.pos=0,this.close=t,this.options=e.extend({},i,n)},position:function(t){return void 0!==t?(this.pos=Math.max(0,Math.min(this.pathElements.length,t)),this):this.pos},remove:function(t){return this.pathElements.splice(this.pos,t),this},move:function(t,e,n,i){return s("M",{x:+t,y:+e},this.pathElements,this.pos++,n,i),this},line:function(t,e,n,i){return s("L",{x:+t,y:+e},this.pathElements,this.pos++,n,i),this},curve:function(t,e,n,i,o,a,r,l){return s("C",{x1:+t,y1:+e,x2:+n,y2:+i,x:+o,y:+a},this.pathElements,this.pos++,r,l),this},arc:function(t,e,n,i,o,a,r,l,c){return s("A",{rx:+t,ry:+e,xAr:+n,lAf:+i,sf:+o,x:+a,y:+r},this.pathElements,this.pos++,l,c),this},scale:function(t,e){return o(this.pathElements,function(n,i){n[i]*="x"===i[0]?t:e}),this},translate:function(t,e){return o(this.pathElements,function(n,i){n[i]+="x"===i[0]?t:e}),this},transform:function(t){return o(this.pathElements,function(e,n,i,s,o){var a=t(e,n,i,s,o);(a||0===a)&&(e[n]=a)}),this},parse:function(t){var i=t.replace(/([A-Za-z])([0-9])/g,"$1 $2").replace(/([0-9])([A-Za-z])/g,"$1 $2").split(/[\s,]+/).reduce(function(t,e){return e.match(/[A-Za-z]/)&&t.push([]),t[t.length-1].push(e),t},[]);"Z"===i[i.length-1][0].toUpperCase()&&i.pop();var s=i.map(function(t){var i=t.shift(),s=n[i.toLowerCase()];return e.extend({command:i},s.reduce(function(e,n,i){return e[n]=+t[i],e},{}))}),o=[this.pos,0];return Array.prototype.push.apply(o,s),Array.prototype.splice.apply(this.pathElements,o),this.pos+=s.length,this},stringify:function(){var t=Math.pow(10,this.options.accuracy);return this.pathElements.reduce((function(e,i){var s=n[i.command.toLowerCase()].map((function(e){return this.options.accuracy?Math.round(i[e]*t)/t:i[e]}).bind(this));return e+i.command+s.join(",")}).bind(this),"")+(this.close?"Z":"")},clone:function(t){var n=new e.Svg.Path(t||this.close);return n.pos=this.pos,n.pathElements=this.pathElements.slice().map(function(t){return e.extend({},t)}),n.options=e.extend({},this.options),n},splitByCommand:function(t){var n=[new e.Svg.Path];return this.pathElements.forEach(function(i){i.command===t.toUpperCase()&&0!==n[n.length-1].pathElements.length&&n.push(new e.Svg.Path),n[n.length-1].pathElements.push(i)}),n}}),e.Svg.Path.elementDescriptions=n,e.Svg.Path.join=function(t,n,i){for(var s=new e.Svg.Path(n,i),o=0;o<t.length;o++)for(var a=t[o],r=0;r<a.pathElements.length;r++)s.pathElements.push(a.pathElements[r]);return s}}(this||global,t),function(t,e){"use strict";var n={x:{pos:"x",len:"width",dir:"horizontal",rectStart:"x1",rectEnd:"x2",rectOffset:"y2"},y:{pos:"y",len:"height",dir:"vertical",rectStart:"y2",rectEnd:"y1",rectOffset:"x1"}};e.Axis=e.Class.extend({constructor:function(t,e,i,s){this.units=t,this.counterUnits=t===n.x?n.y:n.x,this.chartRect=e,this.axisLength=e[t.rectEnd]-e[t.rectStart],this.gridOffset=e[t.rectOffset],this.ticks=i,this.options=s},createGridAndLabels:function(t,n,i,s,o){var a=s["axis"+this.units.pos.toUpperCase()],r=this.ticks.map(this.projectValue.bind(this)),l=this.ticks.map(a.labelInterpolationFnc);r.forEach((function(c,u){var d,h={x:0,y:0};d=r[u+1]?r[u+1]-c:Math.max(this.axisLength-c,30),e.isFalseyButZero(l[u])&&""!==l[u]||("x"===this.units.pos?(c=this.chartRect.x1+c,h.x=s.axisX.labelOffset.x,h.y="start"===s.axisX.position?this.chartRect.padding.top+s.axisX.labelOffset.y+(i?5:20):this.chartRect.y1+s.axisX.labelOffset.y+(i?5:20)):(c=this.chartRect.y1-c,h.y=s.axisY.labelOffset.y-(i?d:0),h.x="start"===s.axisY.position?i?this.chartRect.padding.left+s.axisY.labelOffset.x:this.chartRect.x1-10:this.chartRect.x2+s.axisY.labelOffset.x+10),a.showGrid&&e.createGrid(c,u,this,this.gridOffset,this.chartRect[this.counterUnits.len](),t,[s.classNames.grid,s.classNames[this.units.dir]],o),a.showLabel&&e.createLabel(c,d,u,l,this,a.offset,h,n,[s.classNames.label,s.classNames[this.units.dir],"start"===a.position?s.classNames[a.position]:s.classNames.end],i,o))}).bind(this))},projectValue:function(t,e,n){throw new Error("Base axis can't be instantiated!")}}),e.Axis.units=n}(this||global,t),function(t,e){"use strict";e.AutoScaleAxis=e.Axis.extend({constructor:function(t,n,i,s){var o=s.highLow||e.getHighLow(n,s,t.pos);this.bounds=e.getBounds(i[t.rectEnd]-i[t.rectStart],o,s.scaleMinSpace||20,s.onlyInteger),this.range={min:this.bounds.min,max:this.bounds.max},e.AutoScaleAxis.super.constructor.call(this,t,i,this.bounds.values,s)},projectValue:function(t){return this.axisLength*(+e.getMultiValue(t,this.units.pos)-this.bounds.min)/this.bounds.range}})}(this||global,t),function(t,e){"use strict";e.FixedScaleAxis=e.Axis.extend({constructor:function(t,n,i,s){var o=s.highLow||e.getHighLow(n,s,t.pos);this.divisor=s.divisor||1,this.ticks=s.ticks||e.times(this.divisor).map((function(t,e){return o.low+(o.high-o.low)/this.divisor*e}).bind(this)),this.ticks.sort(function(t,e){return t-e}),this.range={min:o.low,max:o.high},e.FixedScaleAxis.super.constructor.call(this,t,i,this.ticks,s),this.stepLength=this.axisLength/this.divisor},projectValue:function(t){return this.axisLength*(+e.getMultiValue(t,this.units.pos)-this.range.min)/(this.range.max-this.range.min)}})}(this||global,t),function(t,e){"use strict";e.StepAxis=e.Axis.extend({constructor:function(t,n,i,s){e.StepAxis.super.constructor.call(this,t,i,s.ticks,s);var o=Math.max(1,s.ticks.length-(s.stretch?1:0));this.stepLength=this.axisLength/o},projectValue:function(t,e){return this.stepLength*e}})}(this||global,t),function(t,e){"use strict";var n={axisX:{offset:30,position:"end",labelOffset:{x:0,y:0},showLabel:!0,showGrid:!0,labelInterpolationFnc:e.noop,type:void 0},axisY:{offset:40,position:"start",labelOffset:{x:0,y:0},showLabel:!0,showGrid:!0,labelInterpolationFnc:e.noop,type:void 0,scaleMinSpace:20,onlyInteger:!1},width:void 0,height:void 0,showLine:!0,showPoint:!0,showArea:!1,areaBase:0,lineSmooth:!0,showGridBackground:!1,low:void 0,high:void 0,chartPadding:{top:15,right:15,bottom:5,left:10},fullWidth:!1,reverseData:!1,classNames:{chart:"ct-chart-line",label:"ct-label",labelGroup:"ct-labels",series:"ct-series",line:"ct-line",point:"ct-point",area:"ct-area",grid:"ct-grid",gridGroup:"ct-grids",gridBackground:"ct-grid-background",vertical:"ct-vertical",horizontal:"ct-horizontal",start:"ct-start",end:"ct-end"}};e.Line=e.Base.extend({constructor:function(t,i,s,o){e.Line.super.constructor.call(this,t,i,n,e.extend({},n,s),o)},createChart:function(t){var i=e.normalizeData(this.data,t.reverseData,!0);this.svg=e.createSvg(this.container,t.width,t.height,t.classNames.chart);var s,o,a=this.svg.elem("g").addClass(t.classNames.gridGroup),r=this.svg.elem("g"),l=this.svg.elem("g").addClass(t.classNames.labelGroup),c=e.createChartRect(this.svg,t,n.padding);s=void 0===t.axisX.type?new e.StepAxis(e.Axis.units.x,i.normalized.series,c,e.extend({},t.axisX,{ticks:i.normalized.labels,stretch:t.fullWidth})):t.axisX.type.call(e,e.Axis.units.x,i.normalized.series,c,t.axisX),o=void 0===t.axisY.type?new e.AutoScaleAxis(e.Axis.units.y,i.normalized.series,c,e.extend({},t.axisY,{high:e.isNumeric(t.high)?t.high:t.axisY.high,low:e.isNumeric(t.low)?t.low:t.axisY.low})):t.axisY.type.call(e,e.Axis.units.y,i.normalized.series,c,t.axisY),s.createGridAndLabels(a,l,this.supportsForeignObject,t,this.eventEmitter),o.createGridAndLabels(a,l,this.supportsForeignObject,t,this.eventEmitter),t.showGridBackground&&e.createGridBackground(a,c,t.classNames.gridBackground,this.eventEmitter),i.raw.series.forEach((function(n,a){var l=r.elem("g");l.attr({"ct:series-name":n.name,"ct:meta":e.serialize(n.meta)}),l.addClass([t.classNames.series,n.className||t.classNames.series+"-"+e.alphaNumerate(a)].join(" "));var u=[],d=[];i.normalized.series[a].forEach((function(t,r){var l={x:c.x1+s.projectValue(t,r,i.normalized.series[a]),y:c.y1-o.projectValue(t,r,i.normalized.series[a])};u.push(l.x,l.y),d.push({value:t,valueIndex:r,meta:e.getMetaData(n,r)})}).bind(this));var h={lineSmooth:e.getSeriesOption(n,t,"lineSmooth"),showPoint:e.getSeriesOption(n,t,"showPoint"),showLine:e.getSeriesOption(n,t,"showLine"),showArea:e.getSeriesOption(n,t,"showArea"),areaBase:e.getSeriesOption(n,t,"areaBase")},p=("function"==typeof h.lineSmooth?h.lineSmooth:h.lineSmooth?e.Interpolation.monotoneCubic():e.Interpolation.none())(u,d);if(h.showPoint&&p.pathElements.forEach((function(i){var r=l.elem("line",{x1:i.x,y1:i.y,x2:i.x+.01,y2:i.y},t.classNames.point).attr({"ct:value":[i.data.value.x,i.data.value.y].filter(e.isNumeric).join(","),"ct:meta":e.serialize(i.data.meta)});this.eventEmitter.emit("draw",{type:"point",value:i.data.value,index:i.data.valueIndex,meta:i.data.meta,series:n,seriesIndex:a,axisX:s,axisY:o,group:l,element:r,x:i.x,y:i.y})}).bind(this)),h.showLine){var g=l.elem("path",{d:p.stringify()},t.classNames.line,!0);this.eventEmitter.emit("draw",{type:"line",values:i.normalized.series[a],path:p.clone(),chartRect:c,index:a,series:n,seriesIndex:a,seriesMeta:n.meta,axisX:s,axisY:o,group:l,element:g})}if(h.showArea&&o.range){var f=Math.max(Math.min(h.areaBase,o.range.max),o.range.min),m=c.y1-o.projectValue(f);p.splitByCommand("M").filter(function(t){return t.pathElements.length>1}).map(function(t){var e=t.pathElements[0],n=t.pathElements[t.pathElements.length-1];return t.clone(!0).position(0).remove(1).move(e.x,m).line(e.x,e.y).position(t.pathElements.length+1).line(n.x,m)}).forEach((function(e){var r=l.elem("path",{d:e.stringify()},t.classNames.area,!0);this.eventEmitter.emit("draw",{type:"area",values:i.normalized.series[a],path:e.clone(),series:n,seriesIndex:a,axisX:s,axisY:o,chartRect:c,index:a,group:l,element:r})}).bind(this))}}).bind(this)),this.eventEmitter.emit("created",{bounds:o.bounds,chartRect:c,axisX:s,axisY:o,svg:this.svg,options:t})}})}(this||global,t),function(t,e){"use strict";var n={axisX:{offset:30,position:"end",labelOffset:{x:0,y:0},showLabel:!0,showGrid:!0,labelInterpolationFnc:e.noop,scaleMinSpace:30,onlyInteger:!1},axisY:{offset:40,position:"start",labelOffset:{x:0,y:0},showLabel:!0,showGrid:!0,labelInterpolationFnc:e.noop,scaleMinSpace:20,onlyInteger:!1},width:void 0,height:void 0,high:void 0,low:void 0,referenceValue:0,chartPadding:{top:15,right:15,bottom:5,left:10},seriesBarDistance:15,stackBars:!1,stackMode:"accumulate",horizontalBars:!1,distributeSeries:!1,reverseData:!1,showGridBackground:!1,classNames:{chart:"ct-chart-bar",horizontalBars:"ct-horizontal-bars",label:"ct-label",labelGroup:"ct-labels",series:"ct-series",bar:"ct-bar",grid:"ct-grid",gridGroup:"ct-grids",gridBackground:"ct-grid-background",vertical:"ct-vertical",horizontal:"ct-horizontal",start:"ct-start",end:"ct-end"}};e.Bar=e.Base.extend({constructor:function(t,i,s,o){e.Bar.super.constructor.call(this,t,i,n,e.extend({},n,s),o)},createChart:function(t){var i,s;t.distributeSeries?(i=e.normalizeData(this.data,t.reverseData,t.horizontalBars?"x":"y")).normalized.series=i.normalized.series.map(function(t){return[t]}):i=e.normalizeData(this.data,t.reverseData,t.horizontalBars?"x":"y"),this.svg=e.createSvg(this.container,t.width,t.height,t.classNames.chart+(t.horizontalBars?" "+t.classNames.horizontalBars:""));var o=this.svg.elem("g").addClass(t.classNames.gridGroup),a=this.svg.elem("g"),r=this.svg.elem("g").addClass(t.classNames.labelGroup);if(t.stackBars&&0!==i.normalized.series.length){var l=e.serialMap(i.normalized.series,function(){return Array.prototype.slice.call(arguments).map(function(t){return t}).reduce(function(t,e){return{x:t.x+(e&&e.x)||0,y:t.y+(e&&e.y)||0}},{x:0,y:0})});s=e.getHighLow([l],t,t.horizontalBars?"x":"y")}else s=e.getHighLow(i.normalized.series,t,t.horizontalBars?"x":"y");s.high=+t.high||(0===t.high?0:s.high),s.low=+t.low||(0===t.low?0:s.low);var c,u,d,h,p,g=e.createChartRect(this.svg,t,n.padding);u=t.distributeSeries&&t.stackBars?i.normalized.labels.slice(0,1):i.normalized.labels,t.horizontalBars?(c=h=void 0===t.axisX.type?new e.AutoScaleAxis(e.Axis.units.x,i.normalized.series,g,e.extend({},t.axisX,{highLow:s,referenceValue:0})):t.axisX.type.call(e,e.Axis.units.x,i.normalized.series,g,e.extend({},t.axisX,{highLow:s,referenceValue:0})),d=p=void 0===t.axisY.type?new e.StepAxis(e.Axis.units.y,i.normalized.series,g,{ticks:u}):t.axisY.type.call(e,e.Axis.units.y,i.normalized.series,g,t.axisY)):(d=h=void 0===t.axisX.type?new e.StepAxis(e.Axis.units.x,i.normalized.series,g,{ticks:u}):t.axisX.type.call(e,e.Axis.units.x,i.normalized.series,g,t.axisX),c=p=void 0===t.axisY.type?new e.AutoScaleAxis(e.Axis.units.y,i.normalized.series,g,e.extend({},t.axisY,{highLow:s,referenceValue:0})):t.axisY.type.call(e,e.Axis.units.y,i.normalized.series,g,e.extend({},t.axisY,{highLow:s,referenceValue:0})));var f=t.horizontalBars?g.x1+c.projectValue(0):g.y1-c.projectValue(0),m=[];d.createGridAndLabels(o,r,this.supportsForeignObject,t,this.eventEmitter),c.createGridAndLabels(o,r,this.supportsForeignObject,t,this.eventEmitter),t.showGridBackground&&e.createGridBackground(o,g,t.classNames.gridBackground,this.eventEmitter),i.raw.series.forEach((function(n,s){var o,r,l=s-(i.raw.series.length-1)/2;o=t.distributeSeries&&!t.stackBars?d.axisLength/i.normalized.series.length/2:t.distributeSeries&&t.stackBars?d.axisLength/2:d.axisLength/i.normalized.series[s].length/2,(r=a.elem("g")).attr({"ct:series-name":n.name,"ct:meta":e.serialize(n.meta)}),r.addClass([t.classNames.series,n.className||t.classNames.series+"-"+e.alphaNumerate(s)].join(" ")),i.normalized.series[s].forEach((function(a,u){var v,x,y,_;if(_=t.distributeSeries&&!t.stackBars?s:t.distributeSeries&&t.stackBars?0:u,v=t.horizontalBars?{x:g.x1+c.projectValue(a&&a.x?a.x:0,u,i.normalized.series[s]),y:g.y1-d.projectValue(a&&a.y?a.y:0,_,i.normalized.series[s])}:{x:g.x1+d.projectValue(a&&a.x?a.x:0,_,i.normalized.series[s]),y:g.y1-c.projectValue(a&&a.y?a.y:0,u,i.normalized.series[s])},d instanceof e.StepAxis&&(d.options.stretch||(v[d.units.pos]+=o*(t.horizontalBars?-1:1)),v[d.units.pos]+=t.stackBars||t.distributeSeries?0:l*t.seriesBarDistance*(t.horizontalBars?-1:1)),m[u]=(y=m[u]||f)-(f-v[d.counterUnits.pos]),void 0!==a){var b={};b[d.units.pos+"1"]=v[d.units.pos],b[d.units.pos+"2"]=v[d.units.pos],!t.stackBars||"accumulate"!==t.stackMode&&t.stackMode?(b[d.counterUnits.pos+"1"]=f,b[d.counterUnits.pos+"2"]=v[d.counterUnits.pos]):(b[d.counterUnits.pos+"1"]=y,b[d.counterUnits.pos+"2"]=m[u]),b.x1=Math.min(Math.max(b.x1,g.x1),g.x2),b.x2=Math.min(Math.max(b.x2,g.x1),g.x2),b.y1=Math.min(Math.max(b.y1,g.y2),g.y1),b.y2=Math.min(Math.max(b.y2,g.y2),g.y1);var Z=e.getMetaData(n,u);x=r.elem("line",b,t.classNames.bar).attr({"ct:value":[a.x,a.y].filter(e.isNumeric).join(","),"ct:meta":e.serialize(Z)}),this.eventEmitter.emit("draw",e.extend({type:"bar",value:a,index:u,meta:Z,series:n,seriesIndex:s,axisX:h,axisY:p,chartRect:g,group:r,element:x},b))}}).bind(this))}).bind(this)),this.eventEmitter.emit("created",{bounds:c.bounds,chartRect:g,axisX:h,axisY:p,svg:this.svg,options:t})}})}(this||global,t),function(t,e){"use strict";var n={width:void 0,height:void 0,chartPadding:5,classNames:{chartPie:"ct-chart-pie",chartDonut:"ct-chart-donut",series:"ct-series",slicePie:"ct-slice-pie",sliceDonut:"ct-slice-donut",sliceDonutSolid:"ct-slice-donut-solid",label:"ct-label"},startAngle:0,total:void 0,donut:!1,donutSolid:!1,donutWidth:60,showLabel:!0,labelOffset:0,labelPosition:"inside",labelInterpolationFnc:e.noop,labelDirection:"neutral",reverseData:!1,ignoreEmptyValues:!1};function i(t,e,n){var i=e.x>t.x;return i&&"explode"===n||!i&&"implode"===n?"start":i&&"implode"===n||!i&&"explode"===n?"end":"middle"}e.Pie=e.Base.extend({constructor:function(t,i,s,o){e.Pie.super.constructor.call(this,t,i,n,e.extend({},n,s),o)},createChart:function(t){var s,o,a,r,l,c=e.normalizeData(this.data),u=[],d=t.startAngle;this.svg=e.createSvg(this.container,t.width,t.height,t.donut?t.classNames.chartDonut:t.classNames.chartPie),o=e.createChartRect(this.svg,t,n.padding),a=Math.min(o.width()/2,o.height()/2),l=t.total||c.normalized.series.reduce(function(t,e){return t+e},0);var h=e.quantity(t.donutWidth);"%"===h.unit&&(h.value*=a/100),a-=t.donut&&!t.donutSolid?h.value/2:0,r="outside"===t.labelPosition||t.donut&&!t.donutSolid?a:"center"===t.labelPosition?0:t.donutSolid?a-h.value/2:a/2,r+=t.labelOffset;var p={x:o.x1+o.width()/2,y:o.y2+o.height()/2},g=1===c.raw.series.filter(function(t){return t.hasOwnProperty("value")?0!==t.value:0!==t}).length;c.raw.series.forEach((function(t,e){u[e]=this.svg.elem("g",null,null)}).bind(this)),t.showLabel&&(s=this.svg.elem("g",null,null)),c.raw.series.forEach((function(n,o){if(0!==c.normalized.series[o]||!t.ignoreEmptyValues){u[o].attr({"ct:series-name":n.name}),u[o].addClass([t.classNames.series,n.className||t.classNames.series+"-"+e.alphaNumerate(o)].join(" "));var f=l>0?d+c.normalized.series[o]/l*360:0,m=Math.max(0,d-(0===o||g?0:.2));f-m>=359.99&&(f=m+359.99);var v,x,y,_=e.polarToCartesian(p.x,p.y,a,m),b=e.polarToCartesian(p.x,p.y,a,f),Z=new e.Svg.Path(!t.donut||t.donutSolid).move(b.x,b.y).arc(a,a,0,f-d>180,0,_.x,_.y);t.donut?t.donutSolid&&(v=e.polarToCartesian(p.x,p.y,y=a-h.value,d-(0===o||g?0:.2)),x=e.polarToCartesian(p.x,p.y,y,f),Z.line(v.x,v.y),Z.arc(y,y,0,f-d>180,1,x.x,x.y)):Z.line(p.x,p.y);var w=t.classNames.slicePie;t.donut&&(w=t.classNames.sliceDonut,t.donutSolid&&(w=t.classNames.sliceDonutSolid));var A=u[o].elem("path",{d:Z.stringify()},w);if(A.attr({"ct:value":c.normalized.series[o],"ct:meta":e.serialize(n.meta)}),t.donut&&!t.donutSolid&&(A._node.style.strokeWidth=h.value+"px"),this.eventEmitter.emit("draw",{type:"slice",value:c.normalized.series[o],totalDataSum:l,index:o,meta:n.meta,series:n,group:u[o],element:A,path:Z.clone(),center:p,radius:a,startAngle:d,endAngle:f}),t.showLabel){var O,M;O=1===c.raw.series.length?{x:p.x,y:p.y}:e.polarToCartesian(p.x,p.y,r,d+(f-d)/2),M=c.normalized.labels&&!e.isFalseyButZero(c.normalized.labels[o])?c.normalized.labels[o]:c.normalized.series[o];var U=t.labelInterpolationFnc(M,o);if(U||0===U){var q=s.elem("text",{dx:O.x,dy:O.y,"text-anchor":i(p,O,t.labelDirection)},t.classNames.label).text(""+U);this.eventEmitter.emit("draw",{type:"label",index:o,group:s,element:q,text:""+U,x:O.x,y:O.y})}}d=f}}).bind(this)),this.eventEmitter.emit("created",{chartRect:o,svg:this.svg,options:t})},determineAnchorPosition:i})}(this||global,t),t}()}).apply(e,[]))||(t.exports=n)}}]);
//# sourceMappingURL=apps_concierge_src_app_reports_reports_module_ts.js.map