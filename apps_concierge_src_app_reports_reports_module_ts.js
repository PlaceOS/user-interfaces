(self.webpackChunkconcierge=self.webpackChunkconcierge||[]).push([["apps_concierge_src_app_reports_reports_module_ts"],{3303:function(Te,pe){var Y,G;G=this,Y=function(){return G.Chartist=function(){var G={version:"0.11.4"};return function(P,t){"use strict";var S=P.window,e=P.document;t.namespaces={svg:"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/xmlns/",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",ct:"http://gionkunz.github.com/chartist-js/ct"},t.noop=function(a){return a},t.alphaNumerate=function(a){return String.fromCharCode(97+a%26)},t.extend=function(a){var i,d,n;for(a=a||{},i=1;i<arguments.length;i++)for(var r in d=arguments[i])a[r]="object"!=typeof(n=d[r])||null===n||n instanceof Array?n:t.extend(a[r],n);return a},t.replaceAll=function(a,i,d){return a.replace(new RegExp(i,"g"),d)},t.ensureUnit=function(a,i){return"number"==typeof a&&(a+=i),a},t.quantity=function(a){if("string"==typeof a){var i=/^(\d+)\s*(.*)$/g.exec(a);return{value:+i[1],unit:i[2]||void 0}}return{value:a}},t.querySelector=function(a){return a instanceof Node?a:e.querySelector(a)},t.times=function(a){return Array.apply(null,new Array(a))},t.sum=function(a,i){return a+(i||0)},t.mapMultiply=function(a){return function(i){return i*a}},t.mapAdd=function(a){return function(i){return i+a}},t.serialMap=function(a,i){var d=[],n=Math.max.apply(null,a.map(function(r){return r.length}));return t.times(n).forEach(function(r,c){var m=a.map(function(f){return f[c]});d[c]=i.apply(null,m)}),d},t.roundWithPrecision=function(a,i){var d=Math.pow(10,i||t.precision);return Math.round(a*d)/d},t.precision=8,t.escapingMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"},t.serialize=function(a){return null==a?a:("number"==typeof a?a=""+a:"object"==typeof a&&(a=JSON.stringify({data:a})),Object.keys(t.escapingMap).reduce(function(i,d){return t.replaceAll(i,d,t.escapingMap[d])},a))},t.deserialize=function(a){if("string"!=typeof a)return a;a=Object.keys(t.escapingMap).reduce(function(i,d){return t.replaceAll(i,t.escapingMap[d],d)},a);try{a=void 0!==(a=JSON.parse(a)).data?a.data:a}catch{}return a},t.createSvg=function(a,i,d,n){var r;return i=i||"100%",d=d||"100%",Array.prototype.slice.call(a.querySelectorAll("svg")).filter(function(m){return m.getAttributeNS(t.namespaces.xmlns,"ct")}).forEach(function(m){a.removeChild(m)}),(r=new t.Svg("svg").attr({width:i,height:d}).addClass(n))._node.style.width=i,r._node.style.height=d,a.appendChild(r._node),r},t.normalizeData=function(a,i,d){var n,r={raw:a,normalized:{}};return r.normalized.series=t.getDataArray({series:a.series||[]},i,d),n=r.normalized.series.every(function(c){return c instanceof Array})?Math.max.apply(null,r.normalized.series.map(function(c){return c.length})):r.normalized.series.length,r.normalized.labels=(a.labels||[]).slice(),Array.prototype.push.apply(r.normalized.labels,t.times(Math.max(0,n-r.normalized.labels.length)).map(function(){return""})),i&&t.reverseData(r.normalized),r},t.safeHasProperty=function(a,i){return null!==a&&"object"==typeof a&&a.hasOwnProperty(i)},t.isDataHoleValue=function(a){return null==a||"number"==typeof a&&isNaN(a)},t.reverseData=function(a){a.labels.reverse(),a.series.reverse();for(var i=0;i<a.series.length;i++)"object"==typeof a.series[i]&&void 0!==a.series[i].data?a.series[i].data.reverse():a.series[i]instanceof Array&&a.series[i].reverse()},t.getDataArray=function(a,i,d){return a.series.map(function n(r){if(t.safeHasProperty(r,"value"))return n(r.value);if(t.safeHasProperty(r,"data"))return n(r.data);if(r instanceof Array)return r.map(n);if(!t.isDataHoleValue(r)){if(d){var c={};return"string"==typeof d?c[d]=t.getNumberOrUndefined(r):c.y=t.getNumberOrUndefined(r),c.x=r.hasOwnProperty("x")?t.getNumberOrUndefined(r.x):c.x,c.y=r.hasOwnProperty("y")?t.getNumberOrUndefined(r.y):c.y,c}return t.getNumberOrUndefined(r)}})},t.normalizePadding=function(a,i){return i=i||0,"number"==typeof a?{top:a,right:a,bottom:a,left:a}:{top:"number"==typeof a.top?a.top:i,right:"number"==typeof a.right?a.right:i,bottom:"number"==typeof a.bottom?a.bottom:i,left:"number"==typeof a.left?a.left:i}},t.getMetaData=function(a,i){var d=a.data?a.data[i]:a[i];return d?d.meta:void 0},t.orderOfMagnitude=function(a){return Math.floor(Math.log(Math.abs(a))/Math.LN10)},t.projectLength=function(a,i,d){return i/d.range*a},t.getAvailableHeight=function(a,i){return Math.max((t.quantity(i.height).value||a.height())-(i.chartPadding.top+i.chartPadding.bottom)-i.axisX.offset,0)},t.getHighLow=function(a,i,d){var n={high:void 0===(i=t.extend({},i,d?i["axis"+d.toUpperCase()]:{})).high?-Number.MAX_VALUE:+i.high,low:void 0===i.low?Number.MAX_VALUE:+i.low},r=void 0===i.high,c=void 0===i.low;return(r||c)&&function m(f){if(void 0!==f)if(f instanceof Array)for(var u=0;u<f.length;u++)m(f[u]);else{var _=d?+f[d]:+f;r&&_>n.high&&(n.high=_),c&&_<n.low&&(n.low=_)}}(a),(i.referenceValue||0===i.referenceValue)&&(n.high=Math.max(i.referenceValue,n.high),n.low=Math.min(i.referenceValue,n.low)),n.high<=n.low&&(0===n.low?n.high=1:n.low<0?n.high=0:(n.high>0||(n.high=1),n.low=0)),n},t.isNumeric=function(a){return null!==a&&isFinite(a)},t.isFalseyButZero=function(a){return!a&&0!==a},t.getNumberOrUndefined=function(a){return t.isNumeric(a)?+a:void 0},t.isMultiValue=function(a){return"object"==typeof a&&("x"in a||"y"in a)},t.getMultiValue=function(a,i){return t.isMultiValue(a)?t.getNumberOrUndefined(a[i||"y"]):t.getNumberOrUndefined(a)},t.rho=function(a){if(1===a)return a;function i(m,f){return m%f==0?f:i(f,m%f)}function d(m){return m*m+1}var c,n=2,r=2;if(a%2==0)return 2;do{n=d(n)%a,r=d(d(r))%a,c=i(Math.abs(n-r),a)}while(1===c);return c},t.getBounds=function(a,i,d,n){var r,m,f,c=0,u={high:i.high,low:i.low};u.valueRange=u.high-u.low,u.oom=t.orderOfMagnitude(u.valueRange),u.step=Math.pow(10,u.oom),u.min=Math.floor(u.low/u.step)*u.step,u.max=Math.ceil(u.high/u.step)*u.step,u.range=u.max-u.min,u.numberOfSteps=Math.round(u.range/u.step);var y=t.projectLength(a,u.step,u)<d,w=n?t.rho(u.range):0;if(n&&t.projectLength(a,1,u)>=d)u.step=1;else if(n&&w<u.step&&t.projectLength(a,w,u)>=d)u.step=w;else for(;;){if(y&&t.projectLength(a,u.step,u)<=d)u.step*=2;else{if(y||!(t.projectLength(a,u.step/2,u)>=d))break;if(u.step/=2,n&&u.step%1!=0){u.step*=2;break}}if(c++>1e3)throw new Error("Exceeded maximum number of iterations while optimizing scale step!")}var A=2221e-19;function O(j,Z){return j===(j+=Z)&&(j*=1+(Z>0?A:-A)),j}for(u.step=Math.max(u.step,A),m=u.min,f=u.max;m+u.step<=u.low;)m=O(m,u.step);for(;f-u.step>=u.high;)f=O(f,-u.step);u.min=m,u.max=f,u.range=u.max-u.min;var z=[];for(r=u.min;r<=u.max;r=O(r,u.step)){var C=t.roundWithPrecision(r);C!==z[z.length-1]&&z.push(C)}return u.values=z,u},t.polarToCartesian=function(a,i,d,n){var r=(n-90)*Math.PI/180;return{x:a+d*Math.cos(r),y:i+d*Math.sin(r)}},t.createChartRect=function(a,i,d){var n=!(!i.axisX&&!i.axisY),r=n?i.axisY.offset:0,c=n?i.axisX.offset:0,m=a.width()||t.quantity(i.width).value||0,f=a.height()||t.quantity(i.height).value||0,u=t.normalizePadding(i.chartPadding,d);m=Math.max(m,r+u.left+u.right),f=Math.max(f,c+u.top+u.bottom);var _={padding:u,width:function(){return this.x2-this.x1},height:function(){return this.y1-this.y2}};return n?("start"===i.axisX.position?(_.y2=u.top+c,_.y1=Math.max(f-u.bottom,_.y2+1)):(_.y2=u.top,_.y1=Math.max(f-u.bottom-c,_.y2+1)),"start"===i.axisY.position?(_.x1=u.left+r,_.x2=Math.max(m-u.right,_.x1+1)):(_.x1=u.left,_.x2=Math.max(m-u.right-r,_.x1+1))):(_.x1=u.left,_.x2=Math.max(m-u.right,_.x1+1),_.y2=u.top,_.y1=Math.max(f-u.bottom,_.y2+1)),_},t.createGrid=function(a,i,d,n,r,c,m,f){var u={};u[d.units.pos+"1"]=a,u[d.units.pos+"2"]=a,u[d.counterUnits.pos+"1"]=n,u[d.counterUnits.pos+"2"]=n+r;var _=c.elem("line",u,m.join(" "));f.emit("draw",t.extend({type:"grid",axis:d,index:i,group:c,element:_},u))},t.createGridBackground=function(a,i,d,n){var r=a.elem("rect",{x:i.x1,y:i.y2,width:i.width(),height:i.height()},d,!0);n.emit("draw",{type:"gridBackground",group:a,element:r})},t.createLabel=function(a,i,d,n,r,c,m,f,u,_,y){var w,A={};if(A[r.units.pos]=a+m[r.units.pos],A[r.counterUnits.pos]=m[r.counterUnits.pos],A[r.units.len]=i,A[r.counterUnits.len]=Math.max(0,c-10),_){var O=e.createElement("span");O.className=u.join(" "),O.setAttribute("xmlns",t.namespaces.xhtml),O.innerText=n[d],O.style[r.units.len]=Math.round(A[r.units.len])+"px",O.style[r.counterUnits.len]=Math.round(A[r.counterUnits.len])+"px",w=f.foreignObject(O,t.extend({style:"overflow: visible;"},A))}else w=f.elem("text",A,u.join(" ")).text(n[d]);y.emit("draw",t.extend({type:"label",axis:r,index:d,group:f,element:w,text:n[d]},A))},t.getSeriesOption=function(a,i,d){if(a.name&&i.series&&i.series[a.name]){var n=i.series[a.name];return n.hasOwnProperty(d)?n[d]:i[d]}return i[d]},t.optionsProvider=function(a,i,d){var r,m,n=t.extend({},a),c=[];function f(y){var w=r;if(r=t.extend({},n),i)for(m=0;m<i.length;m++)S.matchMedia(i[m][0]).matches&&(r=t.extend(r,i[m][1]));d&&y&&d.emit("optionsChanged",{previousOptions:w,currentOptions:r})}if(!S.matchMedia)throw"window.matchMedia not found! Make sure you're using a polyfill.";if(i)for(m=0;m<i.length;m++){var _=S.matchMedia(i[m][0]);_.addListener(f),c.push(_)}return f(),{removeMediaQueryListeners:function u(){c.forEach(function(y){y.removeListener(f)})},getCurrentOptions:function(){return t.extend({},r)}}},t.splitIntoSegments=function(a,i,d){d=t.extend({},{increasingX:!1,fillHoles:!1},d);for(var r=[],c=!0,m=0;m<a.length;m+=2)void 0===t.getMultiValue(i[m/2].value)?d.fillHoles||(c=!0):(d.increasingX&&m>=2&&a[m]<=a[m-2]&&(c=!0),c&&(r.push({pathCoordinates:[],valueData:[]}),c=!1),r[r.length-1].pathCoordinates.push(a[m],a[m+1]),r[r.length-1].valueData.push(i[m/2]));return r}}(this||global,G),function(P,t){"use strict";t.Interpolation={},t.Interpolation.none=function(S){return S=t.extend({},{fillHoles:!1},S),function(i,d){for(var n=new t.Svg.Path,r=!0,c=0;c<i.length;c+=2){var m=i[c],f=i[c+1],u=d[c/2];void 0!==t.getMultiValue(u.value)?(r?n.move(m,f,!1,u):n.line(m,f,!1,u),r=!1):S.fillHoles||(r=!0)}return n}},t.Interpolation.simple=function(S){S=t.extend({},{divisor:2,fillHoles:!1},S);var a=1/Math.max(1,S.divisor);return function(d,n){for(var c,m,f,r=new t.Svg.Path,u=0;u<d.length;u+=2){var _=d[u],y=d[u+1],w=(_-c)*a,A=n[u/2];void 0!==A.value?(void 0===f?r.move(_,y,!1,A):r.curve(c+w,m,_-w,y,_,y,!1,A),c=_,m=y,f=A):S.fillHoles||(c=_=f=void 0)}return r}},t.Interpolation.cardinal=function(S){S=t.extend({},{tension:1,fillHoles:!1},S);var a=Math.min(1,Math.max(0,S.tension)),i=1-a;return function d(n,r){var c=t.splitIntoSegments(n,r,{fillHoles:S.fillHoles});if(c.length){if(c.length>1){var m=[];return c.forEach(function(A){m.push(d(A.pathCoordinates,A.valueData))}),t.Svg.Path.join(m)}if(r=c[0].valueData,(n=c[0].pathCoordinates).length<=4)return t.Interpolation.none()(n,r);for(var f=(new t.Svg.Path).move(n[0],n[1],!1,r[0]),_=0,y=n.length;y-2>_;_+=2){var w=[{x:+n[_-2],y:+n[_-1]},{x:+n[_],y:+n[_+1]},{x:+n[_+2],y:+n[_+3]},{x:+n[_+4],y:+n[_+5]}];y-4===_?w[3]=w[2]:_||(w[0]={x:+n[_],y:+n[_+1]}),f.curve(a*(6*w[1].x-w[0].x+w[2].x)/6+i*w[2].x,a*(6*w[1].y-w[0].y+w[2].y)/6+i*w[2].y,a*(w[1].x+6*w[2].x-w[3].x)/6+i*w[2].x,a*(w[1].y+6*w[2].y-w[3].y)/6+i*w[2].y,w[2].x,w[2].y,!1,r[(_+2)/2])}return f}return t.Interpolation.none()([])}},t.Interpolation.monotoneCubic=function(S){return S=t.extend({},{fillHoles:!1},S),function a(i,d){var n=t.splitIntoSegments(i,d,{fillHoles:S.fillHoles,increasingX:!0});if(n.length){if(n.length>1){var r=[];return n.forEach(function(z){r.push(a(z.pathCoordinates,z.valueData))}),t.Svg.Path.join(r)}if(d=n[0].valueData,(i=n[0].pathCoordinates).length<=4)return t.Interpolation.none()(i,d);var f,O,c=[],m=[],u=i.length/2,_=[],y=[],w=[],A=[];for(f=0;f<u;f++)c[f]=i[2*f],m[f]=i[2*f+1];for(f=0;f<u-1;f++)w[f]=m[f+1]-m[f],A[f]=c[f+1]-c[f],y[f]=w[f]/A[f];for(_[0]=y[0],_[u-1]=y[u-2],f=1;f<u-1;f++)0===y[f]||0===y[f-1]||y[f-1]>0!=y[f]>0?_[f]=0:(_[f]=3*(A[f-1]+A[f])/((2*A[f]+A[f-1])/y[f-1]+(A[f]+2*A[f-1])/y[f]),isFinite(_[f])||(_[f]=0));for(O=(new t.Svg.Path).move(c[0],m[0],!1,d[0]),f=0;f<u-1;f++)O.curve(c[f]+A[f]/3,m[f]+_[f]*A[f]/3,c[f+1]-A[f]/3,m[f+1]-_[f+1]*A[f]/3,c[f+1],m[f+1],!1,d[f+1]);return O}return t.Interpolation.none()([])}},t.Interpolation.step=function(S){return S=t.extend({},{postpone:!0,fillHoles:!1},S),function(i,d){for(var r,c,m,n=new t.Svg.Path,f=0;f<i.length;f+=2){var u=i[f],_=i[f+1],y=d[f/2];void 0!==y.value?(void 0===m?n.move(u,_,!1,y):(S.postpone?n.line(u,c,!1,m):n.line(r,_,!1,y),n.line(u,_,!1,y)),r=u,c=_,m=y):S.fillHoles||(r=c=m=void 0)}return n}}}(this||global,G),function(P,t){"use strict";t.EventEmitter=function(){var S=[];return{addEventHandler:function e(d,n){S[d]=S[d]||[],S[d].push(n)},removeEventHandler:function a(d,n){S[d]&&(n?(S[d].splice(S[d].indexOf(n),1),0===S[d].length&&delete S[d]):delete S[d])},emit:function i(d,n){S[d]&&S[d].forEach(function(r){r(n)}),S["*"]&&S["*"].forEach(function(r){r(d,n)})}}}}(this||global,G),function(P,t){"use strict";function S(i){var d=[];if(i.length)for(var n=0;n<i.length;n++)d.push(i[n]);return d}t.Class={extend:function e(i,d){var n=d||this.prototype||t.Class,r=Object.create(n);t.Class.cloneDefinitions(r,i);var c=function(){var f,m=r.constructor||function(){};return f=this===t?Object.create(r):this,m.apply(f,Array.prototype.slice.call(arguments,0)),f};return c.prototype=r,c.super=n,c.extend=this.extend,c},cloneDefinitions:function a(){var i=S(arguments),d=i[0];return i.splice(1,i.length-1).forEach(function(n){Object.getOwnPropertyNames(n).forEach(function(r){delete d[r],Object.defineProperty(d,r,Object.getOwnPropertyDescriptor(n,r))})}),d}}}(this||global,G),function(P,t){"use strict";var S=P.window;function n(){S.addEventListener("resize",this.resizeListener),this.optionsProvider=t.optionsProvider(this.options,this.responsiveOptions,this.eventEmitter),this.eventEmitter.addEventHandler("optionsChanged",function(){this.update()}.bind(this)),this.options.plugins&&this.options.plugins.forEach(function(c){c instanceof Array?c[0](this,c[1]):c(this)}.bind(this)),this.eventEmitter.emit("data",{type:"initial",data:this.data}),this.createChart(this.optionsProvider.getCurrentOptions()),this.initializeTimeoutId=void 0}t.Base=t.Class.extend({constructor:function r(c,m,f,u,_){this.container=t.querySelector(c),this.data=m||{},this.data.labels=this.data.labels||[],this.data.series=this.data.series||[],this.defaultOptions=f,this.options=u,this.responsiveOptions=_,this.eventEmitter=t.EventEmitter(),this.supportsForeignObject=t.Svg.isSupported("Extensibility"),this.supportsAnimations=t.Svg.isSupported("AnimationEventsAttribute"),this.resizeListener=function(){this.update()}.bind(this),this.container&&(this.container.__chartist__&&this.container.__chartist__.detach(),this.container.__chartist__=this),this.initializeTimeoutId=setTimeout(n.bind(this),0)},optionsProvider:void 0,container:void 0,svg:void 0,eventEmitter:void 0,createChart:function(){throw new Error("Base chart type can't be instantiated!")},update:function e(c,m,f){return c&&(this.data=c||{},this.data.labels=this.data.labels||[],this.data.series=this.data.series||[],this.eventEmitter.emit("data",{type:"update",data:this.data})),m&&(this.options=t.extend({},f?this.options:this.defaultOptions,m),this.initializeTimeoutId||(this.optionsProvider.removeMediaQueryListeners(),this.optionsProvider=t.optionsProvider(this.options,this.responsiveOptions,this.eventEmitter))),this.initializeTimeoutId||this.createChart(this.optionsProvider.getCurrentOptions()),this},detach:function a(){return this.initializeTimeoutId?S.clearTimeout(this.initializeTimeoutId):(S.removeEventListener("resize",this.resizeListener),this.optionsProvider.removeMediaQueryListeners()),this},on:function i(c,m){return this.eventEmitter.addEventHandler(c,m),this},off:function d(c,m){return this.eventEmitter.removeEventHandler(c,m),this},version:t.version,supportsForeignObject:!1})}(this||global,G),function(P,t){"use strict";var S=P.document;t.Svg=t.Class.extend({constructor:function e(x,b,L,E,q){x instanceof Element?this._node=x:(this._node=S.createElementNS(t.namespaces.svg,x),"svg"===x&&this.attr({"xmlns:ct":t.namespaces.ct})),b&&this.attr(b),L&&this.addClass(L),E&&(q&&E._node.firstChild?E._node.insertBefore(this._node,E._node.firstChild):E._node.appendChild(this._node))},attr:function a(x,b){return"string"==typeof x?b?this._node.getAttributeNS(b,x):this._node.getAttribute(x):(Object.keys(x).forEach(function(L){if(void 0!==x[L])if(-1!==L.indexOf(":")){var E=L.split(":");this._node.setAttributeNS(t.namespaces[E[0]],L,x[L])}else this._node.setAttribute(L,x[L])}.bind(this)),this)},elem:function i(x,b,L,E){return new t.Svg(x,b,L,this,E)},parent:function d(){return this._node.parentNode instanceof SVGElement?new t.Svg(this._node.parentNode):null},root:function n(){for(var x=this._node;"svg"!==x.nodeName;)x=x.parentNode;return new t.Svg(x)},querySelector:function r(x){var b=this._node.querySelector(x);return b?new t.Svg(b):null},querySelectorAll:function c(x){var b=this._node.querySelectorAll(x);return b.length?new t.Svg.List(b):null},getNode:function m(){return this._node},foreignObject:function f(x,b,L,E){if("string"==typeof x){var q=S.createElement("div");q.innerHTML=x,x=q.firstChild}x.setAttribute("xmlns",t.namespaces.xmlns);var W=this.elem("foreignObject",b,L,E);return W._node.appendChild(x),W},text:function u(x){return this._node.appendChild(S.createTextNode(x)),this},empty:function _(){for(;this._node.firstChild;)this._node.removeChild(this._node.firstChild);return this},remove:function y(){return this._node.parentNode.removeChild(this._node),this.parent()},replace:function w(x){return this._node.parentNode.replaceChild(x._node,this._node),x},append:function A(x,b){return b&&this._node.firstChild?this._node.insertBefore(x._node,this._node.firstChild):this._node.appendChild(x._node),this},classes:function O(){return this._node.getAttribute("class")?this._node.getAttribute("class").trim().split(/\s+/):[]},addClass:function z(x){return this._node.setAttribute("class",this.classes(this._node).concat(x.trim().split(/\s+/)).filter(function(b,L,E){return E.indexOf(b)===L}).join(" ")),this},removeClass:function C(x){var b=x.trim().split(/\s+/);return this._node.setAttribute("class",this.classes(this._node).filter(function(L){return-1===b.indexOf(L)}).join(" ")),this},removeAllClasses:function j(){return this._node.setAttribute("class",""),this},height:function Z(){return this._node.getBoundingClientRect().height},width:function M(){return this._node.getBoundingClientRect().width},animate:function T(x,b,L){return void 0===b&&(b=!0),Object.keys(x).forEach(function(q){function W(I,F){var V,fe,te,$={};I.easing&&(te=I.easing instanceof Array?I.easing:t.Svg.Easing[I.easing],delete I.easing),I.begin=t.ensureUnit(I.begin,"ms"),I.dur=t.ensureUnit(I.dur,"ms"),te&&(I.calcMode="spline",I.keySplines=te.join(" "),I.keyTimes="0;1"),F&&(I.fill="freeze",$[q]=I.from,this.attr($),fe=t.quantity(I.begin||0).value,I.begin="indefinite"),V=this.elem("animate",t.extend({attributeName:q},I)),F&&setTimeout(function(){try{V._node.beginElement()}catch{$[q]=I.to,this.attr($),V.remove()}}.bind(this),fe),L&&V._node.addEventListener("beginEvent",function(){L.emit("animationBegin",{element:this,animate:V._node,params:I})}.bind(this)),V._node.addEventListener("endEvent",function(){L&&L.emit("animationEnd",{element:this,animate:V._node,params:I}),F&&($[q]=I.to,this.attr($),V.remove())}.bind(this))}x[q]instanceof Array?x[q].forEach(function(I){W.bind(this)(I,!1)}.bind(this)):W.bind(this)(x[q],b)}.bind(this)),this}}),t.Svg.isSupported=function(x){return S.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#"+x,"1.1")},t.Svg.Easing={easeInSine:[.47,0,.745,.715],easeOutSine:[.39,.575,.565,1],easeInOutSine:[.445,.05,.55,.95],easeInQuad:[.55,.085,.68,.53],easeOutQuad:[.25,.46,.45,.94],easeInOutQuad:[.455,.03,.515,.955],easeInCubic:[.55,.055,.675,.19],easeOutCubic:[.215,.61,.355,1],easeInOutCubic:[.645,.045,.355,1],easeInQuart:[.895,.03,.685,.22],easeOutQuart:[.165,.84,.44,1],easeInOutQuart:[.77,0,.175,1],easeInQuint:[.755,.05,.855,.06],easeOutQuint:[.23,1,.32,1],easeInOutQuint:[.86,0,.07,1],easeInExpo:[.95,.05,.795,.035],easeOutExpo:[.19,1,.22,1],easeInOutExpo:[1,0,0,1],easeInCirc:[.6,.04,.98,.335],easeOutCirc:[.075,.82,.165,1],easeInOutCirc:[.785,.135,.15,.86],easeInBack:[.6,-.28,.735,.045],easeOutBack:[.175,.885,.32,1.275],easeInOutBack:[.68,-.55,.265,1.55]},t.Svg.List=t.Class.extend({constructor:function k(x){var b=this;this.svgElements=[];for(var L=0;L<x.length;L++)this.svgElements.push(new t.Svg(x[L]));Object.keys(t.Svg.prototype).filter(function(E){return-1===["constructor","parent","querySelector","querySelectorAll","replace","append","classes","height","width"].indexOf(E)}).forEach(function(E){b[E]=function(){var q=Array.prototype.slice.call(arguments,0);return b.svgElements.forEach(function(W){t.Svg.prototype[E].apply(W,q)}),b}})}})}(this||global,G),function(P,t){"use strict";var S={m:["x","y"],l:["x","y"],c:["x1","y1","x2","y2","x","y"],a:["rx","ry","xAr","lAf","sf","x","y"]},e={accuracy:3};function a(Z,M,T,N,k,x){var b=t.extend({command:k?Z.toLowerCase():Z.toUpperCase()},M,x?{data:x}:{});T.splice(N,0,b)}function i(Z,M){Z.forEach(function(T,N){S[T.command.toLowerCase()].forEach(function(k,x){M(T,k,N,x,Z)})})}t.Svg.Path=t.Class.extend({constructor:function d(Z,M){this.pathElements=[],this.pos=0,this.close=Z,this.options=t.extend({},e,M)},position:function n(Z){return void 0!==Z?(this.pos=Math.max(0,Math.min(this.pathElements.length,Z)),this):this.pos},remove:function r(Z){return this.pathElements.splice(this.pos,Z),this},move:function c(Z,M,T,N){return a("M",{x:+Z,y:+M},this.pathElements,this.pos++,T,N),this},line:function m(Z,M,T,N){return a("L",{x:+Z,y:+M},this.pathElements,this.pos++,T,N),this},curve:function f(Z,M,T,N,k,x,b,L){return a("C",{x1:+Z,y1:+M,x2:+T,y2:+N,x:+k,y:+x},this.pathElements,this.pos++,b,L),this},arc:function u(Z,M,T,N,k,x,b,L,E){return a("A",{rx:+Z,ry:+M,xAr:+T,lAf:+N,sf:+k,x:+x,y:+b},this.pathElements,this.pos++,L,E),this},scale:function w(Z,M){return i(this.pathElements,function(T,N){T[N]*="x"===N[0]?Z:M}),this},translate:function A(Z,M){return i(this.pathElements,function(T,N){T[N]+="x"===N[0]?Z:M}),this},transform:function O(Z){return i(this.pathElements,function(M,T,N,k,x){var b=Z(M,T,N,k,x);(b||0===b)&&(M[T]=b)}),this},parse:function _(Z){var M=Z.replace(/([A-Za-z])([0-9])/g,"$1 $2").replace(/([0-9])([A-Za-z])/g,"$1 $2").split(/[\s,]+/).reduce(function(k,x){return x.match(/[A-Za-z]/)&&k.push([]),k[k.length-1].push(x),k},[]);"Z"===M[M.length-1][0].toUpperCase()&&M.pop();var T=M.map(function(k){var x=k.shift(),b=S[x.toLowerCase()];return t.extend({command:x},b.reduce(function(L,E,q){return L[E]=+k[q],L},{}))}),N=[this.pos,0];return Array.prototype.push.apply(N,T),Array.prototype.splice.apply(this.pathElements,N),this.pos+=T.length,this},stringify:function y(){var Z=Math.pow(10,this.options.accuracy);return this.pathElements.reduce(function(M,T){var N=S[T.command.toLowerCase()].map(function(k){return this.options.accuracy?Math.round(T[k]*Z)/Z:T[k]}.bind(this));return M+T.command+N.join(",")}.bind(this),"")+(this.close?"Z":"")},clone:function z(Z){var M=new t.Svg.Path(Z||this.close);return M.pos=this.pos,M.pathElements=this.pathElements.slice().map(function(N){return t.extend({},N)}),M.options=t.extend({},this.options),M},splitByCommand:function C(Z){var M=[new t.Svg.Path];return this.pathElements.forEach(function(T){T.command===Z.toUpperCase()&&0!==M[M.length-1].pathElements.length&&M.push(new t.Svg.Path),M[M.length-1].pathElements.push(T)}),M}}),t.Svg.Path.elementDescriptions=S,t.Svg.Path.join=function j(Z,M,T){for(var N=new t.Svg.Path(M,T),k=0;k<Z.length;k++)for(var x=Z[k],b=0;b<x.pathElements.length;b++)N.pathElements.push(x.pathElements[b]);return N}}(this||global,G),function(P,t){"use strict";var a={x:{pos:"x",len:"width",dir:"horizontal",rectStart:"x1",rectEnd:"x2",rectOffset:"y2"},y:{pos:"y",len:"height",dir:"vertical",rectStart:"y2",rectEnd:"y1",rectOffset:"x1"}};t.Axis=t.Class.extend({constructor:function i(n,r,c,m){this.units=n,this.counterUnits=n===a.x?a.y:a.x,this.chartRect=r,this.axisLength=r[n.rectEnd]-r[n.rectStart],this.gridOffset=r[n.rectOffset],this.ticks=c,this.options=m},createGridAndLabels:function d(n,r,c,m,f){var u=m["axis"+this.units.pos.toUpperCase()],_=this.ticks.map(this.projectValue.bind(this)),y=this.ticks.map(u.labelInterpolationFnc);_.forEach(function(w,A){var z,O={x:0,y:0};z=_[A+1]?_[A+1]-w:Math.max(this.axisLength-w,30),(!t.isFalseyButZero(y[A])||""===y[A])&&("x"===this.units.pos?(w=this.chartRect.x1+w,O.x=m.axisX.labelOffset.x,O.y="start"===m.axisX.position?this.chartRect.padding.top+m.axisX.labelOffset.y+(c?5:20):this.chartRect.y1+m.axisX.labelOffset.y+(c?5:20)):(w=this.chartRect.y1-w,O.y=m.axisY.labelOffset.y-(c?z:0),O.x="start"===m.axisY.position?c?this.chartRect.padding.left+m.axisY.labelOffset.x:this.chartRect.x1-10:this.chartRect.x2+m.axisY.labelOffset.x+10),u.showGrid&&t.createGrid(w,A,this,this.gridOffset,this.chartRect[this.counterUnits.len](),n,[m.classNames.grid,m.classNames[this.units.dir]],f),u.showLabel&&t.createLabel(w,z,A,y,this,u.offset,O,r,[m.classNames.label,m.classNames[this.units.dir],"start"===u.position?m.classNames[u.position]:m.classNames.end],c,f))}.bind(this))},projectValue:function(n,r,c){throw new Error("Base axis can't be instantiated!")}}),t.Axis.units=a}(this||global,G),function(P,t){"use strict";t.AutoScaleAxis=t.Axis.extend({constructor:function a(d,n,r,c){var m=c.highLow||t.getHighLow(n,c,d.pos);this.bounds=t.getBounds(r[d.rectEnd]-r[d.rectStart],m,c.scaleMinSpace||20,c.onlyInteger),this.range={min:this.bounds.min,max:this.bounds.max},t.AutoScaleAxis.super.constructor.call(this,d,r,this.bounds.values,c)},projectValue:function i(d){return this.axisLength*(+t.getMultiValue(d,this.units.pos)-this.bounds.min)/this.bounds.range}})}(this||global,G),function(P,t){"use strict";t.FixedScaleAxis=t.Axis.extend({constructor:function a(d,n,r,c){var m=c.highLow||t.getHighLow(n,c,d.pos);this.divisor=c.divisor||1,this.ticks=c.ticks||t.times(this.divisor).map(function(f,u){return m.low+(m.high-m.low)/this.divisor*u}.bind(this)),this.ticks.sort(function(f,u){return f-u}),this.range={min:m.low,max:m.high},t.FixedScaleAxis.super.constructor.call(this,d,r,this.ticks,c),this.stepLength=this.axisLength/this.divisor},projectValue:function i(d){return this.axisLength*(+t.getMultiValue(d,this.units.pos)-this.range.min)/(this.range.max-this.range.min)}})}(this||global,G),function(P,t){"use strict";t.StepAxis=t.Axis.extend({constructor:function a(d,n,r,c){t.StepAxis.super.constructor.call(this,d,r,c.ticks,c);var m=Math.max(1,c.ticks.length-(c.stretch?1:0));this.stepLength=this.axisLength/m},projectValue:function i(d,n){return this.stepLength*n}})}(this||global,G),function(P,t){"use strict";var a={axisX:{offset:30,position:"end",labelOffset:{x:0,y:0},showLabel:!0,showGrid:!0,labelInterpolationFnc:t.noop,type:void 0},axisY:{offset:40,position:"start",labelOffset:{x:0,y:0},showLabel:!0,showGrid:!0,labelInterpolationFnc:t.noop,type:void 0,scaleMinSpace:20,onlyInteger:!1},width:void 0,height:void 0,showLine:!0,showPoint:!0,showArea:!1,areaBase:0,lineSmooth:!0,showGridBackground:!1,low:void 0,high:void 0,chartPadding:{top:15,right:15,bottom:5,left:10},fullWidth:!1,reverseData:!1,classNames:{chart:"ct-chart-line",label:"ct-label",labelGroup:"ct-labels",series:"ct-series",line:"ct-line",point:"ct-point",area:"ct-area",grid:"ct-grid",gridGroup:"ct-grids",gridBackground:"ct-grid-background",vertical:"ct-vertical",horizontal:"ct-horizontal",start:"ct-start",end:"ct-end"}};t.Line=t.Base.extend({constructor:function d(n,r,c,m){t.Line.super.constructor.call(this,n,r,a,t.extend({},a,c),m)},createChart:function i(n){var r=t.normalizeData(this.data,n.reverseData,!0);this.svg=t.createSvg(this.container,n.width,n.height,n.classNames.chart);var _,y,c=this.svg.elem("g").addClass(n.classNames.gridGroup),m=this.svg.elem("g"),f=this.svg.elem("g").addClass(n.classNames.labelGroup),u=t.createChartRect(this.svg,n,a.padding);_=void 0===n.axisX.type?new t.StepAxis(t.Axis.units.x,r.normalized.series,u,t.extend({},n.axisX,{ticks:r.normalized.labels,stretch:n.fullWidth})):n.axisX.type.call(t,t.Axis.units.x,r.normalized.series,u,n.axisX),y=void 0===n.axisY.type?new t.AutoScaleAxis(t.Axis.units.y,r.normalized.series,u,t.extend({},n.axisY,{high:t.isNumeric(n.high)?n.high:n.axisY.high,low:t.isNumeric(n.low)?n.low:n.axisY.low})):n.axisY.type.call(t,t.Axis.units.y,r.normalized.series,u,n.axisY),_.createGridAndLabels(c,f,this.supportsForeignObject,n,this.eventEmitter),y.createGridAndLabels(c,f,this.supportsForeignObject,n,this.eventEmitter),n.showGridBackground&&t.createGridBackground(c,u,n.classNames.gridBackground,this.eventEmitter),r.raw.series.forEach(function(w,A){var O=m.elem("g");O.attr({"ct:series-name":w.name,"ct:meta":t.serialize(w.meta)}),O.addClass([n.classNames.series,w.className||n.classNames.series+"-"+t.alphaNumerate(A)].join(" "));var z=[],C=[];r.normalized.series[A].forEach(function(x,b){var L={x:u.x1+_.projectValue(x,b,r.normalized.series[A]),y:u.y1-y.projectValue(x,b,r.normalized.series[A])};z.push(L.x,L.y),C.push({value:x,valueIndex:b,meta:t.getMetaData(w,b)})}.bind(this));var j={lineSmooth:t.getSeriesOption(w,n,"lineSmooth"),showPoint:t.getSeriesOption(w,n,"showPoint"),showLine:t.getSeriesOption(w,n,"showLine"),showArea:t.getSeriesOption(w,n,"showArea"),areaBase:t.getSeriesOption(w,n,"areaBase")},M=("function"==typeof j.lineSmooth?j.lineSmooth:j.lineSmooth?t.Interpolation.monotoneCubic():t.Interpolation.none())(z,C);if(j.showPoint&&M.pathElements.forEach(function(x){var b=O.elem("line",{x1:x.x,y1:x.y,x2:x.x+.01,y2:x.y},n.classNames.point).attr({"ct:value":[x.data.value.x,x.data.value.y].filter(t.isNumeric).join(","),"ct:meta":t.serialize(x.data.meta)});this.eventEmitter.emit("draw",{type:"point",value:x.data.value,index:x.data.valueIndex,meta:x.data.meta,series:w,seriesIndex:A,axisX:_,axisY:y,group:O,element:b,x:x.x,y:x.y})}.bind(this)),j.showLine){var T=O.elem("path",{d:M.stringify()},n.classNames.line,!0);this.eventEmitter.emit("draw",{type:"line",values:r.normalized.series[A],path:M.clone(),chartRect:u,index:A,series:w,seriesIndex:A,seriesMeta:w.meta,axisX:_,axisY:y,group:O,element:T})}if(j.showArea&&y.range){var N=Math.max(Math.min(j.areaBase,y.range.max),y.range.min),k=u.y1-y.projectValue(N);M.splitByCommand("M").filter(function(b){return b.pathElements.length>1}).map(function(b){var L=b.pathElements[0],E=b.pathElements[b.pathElements.length-1];return b.clone(!0).position(0).remove(1).move(L.x,k).line(L.x,L.y).position(b.pathElements.length+1).line(E.x,k)}).forEach(function(b){var L=O.elem("path",{d:b.stringify()},n.classNames.area,!0);this.eventEmitter.emit("draw",{type:"area",values:r.normalized.series[A],path:b.clone(),series:w,seriesIndex:A,axisX:_,axisY:y,chartRect:u,index:A,group:O,element:L})}.bind(this))}}.bind(this)),this.eventEmitter.emit("created",{bounds:y.bounds,chartRect:u,axisX:_,axisY:y,svg:this.svg,options:n})}})}(this||global,G),function(P,t){"use strict";var a={axisX:{offset:30,position:"end",labelOffset:{x:0,y:0},showLabel:!0,showGrid:!0,labelInterpolationFnc:t.noop,scaleMinSpace:30,onlyInteger:!1},axisY:{offset:40,position:"start",labelOffset:{x:0,y:0},showLabel:!0,showGrid:!0,labelInterpolationFnc:t.noop,scaleMinSpace:20,onlyInteger:!1},width:void 0,height:void 0,high:void 0,low:void 0,referenceValue:0,chartPadding:{top:15,right:15,bottom:5,left:10},seriesBarDistance:15,stackBars:!1,stackMode:"accumulate",horizontalBars:!1,distributeSeries:!1,reverseData:!1,showGridBackground:!1,classNames:{chart:"ct-chart-bar",horizontalBars:"ct-horizontal-bars",label:"ct-label",labelGroup:"ct-labels",series:"ct-series",bar:"ct-bar",grid:"ct-grid",gridGroup:"ct-grids",gridBackground:"ct-grid-background",vertical:"ct-vertical",horizontal:"ct-horizontal",start:"ct-start",end:"ct-end"}};t.Bar=t.Base.extend({constructor:function d(n,r,c,m){t.Bar.super.constructor.call(this,n,r,a,t.extend({},a,c),m)},createChart:function i(n){var r,c;n.distributeSeries?(r=t.normalizeData(this.data,n.reverseData,n.horizontalBars?"x":"y")).normalized.series=r.normalized.series.map(function(M){return[M]}):r=t.normalizeData(this.data,n.reverseData,n.horizontalBars?"x":"y"),this.svg=t.createSvg(this.container,n.width,n.height,n.classNames.chart+(n.horizontalBars?" "+n.classNames.horizontalBars:""));var m=this.svg.elem("g").addClass(n.classNames.gridGroup),f=this.svg.elem("g"),u=this.svg.elem("g").addClass(n.classNames.labelGroup);if(n.stackBars&&0!==r.normalized.series.length){var _=t.serialMap(r.normalized.series,function(){return Array.prototype.slice.call(arguments).map(function(T){return T}).reduce(function(T,N){return{x:T.x+(N&&N.x)||0,y:T.y+(N&&N.y)||0}},{x:0,y:0})});c=t.getHighLow([_],n,n.horizontalBars?"x":"y")}else c=t.getHighLow(r.normalized.series,n,n.horizontalBars?"x":"y");c.high=+n.high||(0===n.high?0:c.high),c.low=+n.low||(0===n.low?0:c.low);var w,A,O,z,C,y=t.createChartRect(this.svg,n,a.padding);A=n.distributeSeries&&n.stackBars?r.normalized.labels.slice(0,1):r.normalized.labels,n.horizontalBars?(w=z=void 0===n.axisX.type?new t.AutoScaleAxis(t.Axis.units.x,r.normalized.series,y,t.extend({},n.axisX,{highLow:c,referenceValue:0})):n.axisX.type.call(t,t.Axis.units.x,r.normalized.series,y,t.extend({},n.axisX,{highLow:c,referenceValue:0})),O=C=void 0===n.axisY.type?new t.StepAxis(t.Axis.units.y,r.normalized.series,y,{ticks:A}):n.axisY.type.call(t,t.Axis.units.y,r.normalized.series,y,n.axisY)):(O=z=void 0===n.axisX.type?new t.StepAxis(t.Axis.units.x,r.normalized.series,y,{ticks:A}):n.axisX.type.call(t,t.Axis.units.x,r.normalized.series,y,n.axisX),w=C=void 0===n.axisY.type?new t.AutoScaleAxis(t.Axis.units.y,r.normalized.series,y,t.extend({},n.axisY,{highLow:c,referenceValue:0})):n.axisY.type.call(t,t.Axis.units.y,r.normalized.series,y,t.extend({},n.axisY,{highLow:c,referenceValue:0})));var j=n.horizontalBars?y.x1+w.projectValue(0):y.y1-w.projectValue(0),Z=[];O.createGridAndLabels(m,u,this.supportsForeignObject,n,this.eventEmitter),w.createGridAndLabels(m,u,this.supportsForeignObject,n,this.eventEmitter),n.showGridBackground&&t.createGridBackground(m,y,n.classNames.gridBackground,this.eventEmitter),r.raw.series.forEach(function(M,T){var k,x,N=T-(r.raw.series.length-1)/2;k=n.distributeSeries&&!n.stackBars?O.axisLength/r.normalized.series.length/2:n.distributeSeries&&n.stackBars?O.axisLength/2:O.axisLength/r.normalized.series[T].length/2,(x=f.elem("g")).attr({"ct:series-name":M.name,"ct:meta":t.serialize(M.meta)}),x.addClass([n.classNames.series,M.className||n.classNames.series+"-"+t.alphaNumerate(T)].join(" ")),r.normalized.series[T].forEach(function(b,L){var E,q,W,I;if(I=n.distributeSeries&&!n.stackBars?T:n.distributeSeries&&n.stackBars?0:L,E=n.horizontalBars?{x:y.x1+w.projectValue(b&&b.x?b.x:0,L,r.normalized.series[T]),y:y.y1-O.projectValue(b&&b.y?b.y:0,I,r.normalized.series[T])}:{x:y.x1+O.projectValue(b&&b.x?b.x:0,I,r.normalized.series[T]),y:y.y1-w.projectValue(b&&b.y?b.y:0,L,r.normalized.series[T])},O instanceof t.StepAxis&&(O.options.stretch||(E[O.units.pos]+=k*(n.horizontalBars?-1:1)),E[O.units.pos]+=n.stackBars||n.distributeSeries?0:N*n.seriesBarDistance*(n.horizontalBars?-1:1)),Z[L]=(W=Z[L]||j)-(j-E[O.counterUnits.pos]),void 0!==b){var F={};F[O.units.pos+"1"]=E[O.units.pos],F[O.units.pos+"2"]=E[O.units.pos],!n.stackBars||"accumulate"!==n.stackMode&&n.stackMode?(F[O.counterUnits.pos+"1"]=j,F[O.counterUnits.pos+"2"]=E[O.counterUnits.pos]):(F[O.counterUnits.pos+"1"]=W,F[O.counterUnits.pos+"2"]=Z[L]),F.x1=Math.min(Math.max(F.x1,y.x1),y.x2),F.x2=Math.min(Math.max(F.x2,y.x1),y.x2),F.y1=Math.min(Math.max(F.y1,y.y2),y.y1),F.y2=Math.min(Math.max(F.y2,y.y2),y.y1);var $=t.getMetaData(M,L);q=x.elem("line",F,n.classNames.bar).attr({"ct:value":[b.x,b.y].filter(t.isNumeric).join(","),"ct:meta":t.serialize($)}),this.eventEmitter.emit("draw",t.extend({type:"bar",value:b,index:L,meta:$,series:M,seriesIndex:T,axisX:z,axisY:C,chartRect:y,group:x,element:q},F))}}.bind(this))}.bind(this)),this.eventEmitter.emit("created",{bounds:w.bounds,chartRect:y,axisX:z,axisY:C,svg:this.svg,options:n})}})}(this||global,G),function(P,t){"use strict";var a={width:void 0,height:void 0,chartPadding:5,classNames:{chartPie:"ct-chart-pie",chartDonut:"ct-chart-donut",series:"ct-series",slicePie:"ct-slice-pie",sliceDonut:"ct-slice-donut",sliceDonutSolid:"ct-slice-donut-solid",label:"ct-label"},startAngle:0,total:void 0,donut:!1,donutSolid:!1,donutWidth:60,showLabel:!0,labelOffset:0,labelPosition:"inside",labelInterpolationFnc:t.noop,labelDirection:"neutral",reverseData:!1,ignoreEmptyValues:!1};function i(r,c,m){var f=c.x>r.x;return f&&"explode"===m||!f&&"implode"===m?"start":f&&"implode"===m||!f&&"explode"===m?"end":"middle"}t.Pie=t.Base.extend({constructor:function n(r,c,m,f){t.Pie.super.constructor.call(this,r,c,a,t.extend({},a,m),f)},createChart:function d(r){var f,u,_,y,w,c=t.normalizeData(this.data),m=[],A=r.startAngle;this.svg=t.createSvg(this.container,r.width,r.height,r.donut?r.classNames.chartDonut:r.classNames.chartPie),u=t.createChartRect(this.svg,r,a.padding),_=Math.min(u.width()/2,u.height()/2),w=r.total||c.normalized.series.reduce(function(j,Z){return j+Z},0);var O=t.quantity(r.donutWidth);"%"===O.unit&&(O.value*=_/100),_-=r.donut&&!r.donutSolid?O.value/2:0,y="outside"===r.labelPosition||r.donut&&!r.donutSolid?_:"center"===r.labelPosition?0:r.donutSolid?_-O.value/2:_/2,y+=r.labelOffset;var z={x:u.x1+u.width()/2,y:u.y2+u.height()/2},C=1===c.raw.series.filter(function(j){return j.hasOwnProperty("value")?0!==j.value:0!==j}).length;c.raw.series.forEach(function(j,Z){m[Z]=this.svg.elem("g",null,null)}.bind(this)),r.showLabel&&(f=this.svg.elem("g",null,null)),c.raw.series.forEach(function(j,Z){if(0!==c.normalized.series[Z]||!r.ignoreEmptyValues){m[Z].attr({"ct:series-name":j.name}),m[Z].addClass([r.classNames.series,j.className||r.classNames.series+"-"+t.alphaNumerate(Z)].join(" "));var M=w>0?A+c.normalized.series[Z]/w*360:0,T=Math.max(0,A-(0===Z||C?0:.2));M-T>=359.99&&(M=T+359.99);var x,b,L,N=t.polarToCartesian(z.x,z.y,_,T),k=t.polarToCartesian(z.x,z.y,_,M),E=new t.Svg.Path(!r.donut||r.donutSolid).move(k.x,k.y).arc(_,_,0,M-A>180,0,N.x,N.y);r.donut?r.donutSolid&&(x=t.polarToCartesian(z.x,z.y,L=_-O.value,A-(0===Z||C?0:.2)),b=t.polarToCartesian(z.x,z.y,L,M),E.line(x.x,x.y),E.arc(L,L,0,M-A>180,1,b.x,b.y)):E.line(z.x,z.y);var q=r.classNames.slicePie;r.donut&&(q=r.classNames.sliceDonut,r.donutSolid&&(q=r.classNames.sliceDonutSolid));var W=m[Z].elem("path",{d:E.stringify()},q);if(W.attr({"ct:value":c.normalized.series[Z],"ct:meta":t.serialize(j.meta)}),r.donut&&!r.donutSolid&&(W._node.style.strokeWidth=O.value+"px"),this.eventEmitter.emit("draw",{type:"slice",value:c.normalized.series[Z],totalDataSum:w,index:Z,meta:j.meta,series:j,group:m[Z],element:W,path:E.clone(),center:z,radius:_,startAngle:A,endAngle:M}),r.showLabel){var I,F;I=1===c.raw.series.length?{x:z.x,y:z.y}:t.polarToCartesian(z.x,z.y,y,A+(M-A)/2),F=c.normalized.labels&&!t.isFalseyButZero(c.normalized.labels[Z])?c.normalized.labels[Z]:c.normalized.series[Z];var $=r.labelInterpolationFnc(F,Z);if($||0===$){var V=f.elem("text",{dx:I.x,dy:I.y,"text-anchor":i(z,I,r.labelDirection)},r.classNames.label).text(""+$);this.eventEmitter.emit("draw",{type:"label",index:Z,group:f,element:V,text:""+$,x:I.x,y:I.y})}}A=M}}.bind(this)),this.eventEmitter.emit("created",{chartRect:u,svg:this.svg,options:r})},determineAnchorPosition:i})}(this||global,G),G}()}.apply(pe,[]),void 0!==Y&&(Te.exports=Y)},5989:(Te,pe,U)=>{"use strict";U.r(pe),U.d(pe,{ReportsModule:()=>gn});var Y=U(2954),G=U(3557),P=U(3473),t=U(3045),S=U(4218),e=U(9609),a=U(4945),i=U(9112),d=U(4626),n=U(5306);const r=function(){return["/reports","desks"]};function c(o,g){1&o&&(e.TgZ(0,"a",1)(1,"app-icon",2),e._uU(2,"room"),e.qZA(),e.TgZ(3,"h3",3),e._uU(4,"Desks"),e.qZA(),e.TgZ(5,"div",4)(6,"p"),e._uU(7,"View Report"),e.qZA(),e.TgZ(8,"app-icon",5),e._uU(9,"chevron_right"),e.qZA()()()),2&o&&e.Q6J("routerLink",e.DdM(1,r))}const m=function(){return["/reports","spaces"]};function f(o,g){1&o&&(e.TgZ(0,"a",1)(1,"app-icon",2),e._uU(2,"meeting_room"),e.qZA(),e.TgZ(3,"h3",3),e._uU(4,"Rooms"),e.qZA(),e.TgZ(5,"div",4)(6,"p"),e._uU(7,"View Report"),e.qZA(),e.TgZ(8,"app-icon",5),e._uU(9,"chevron_right"),e.qZA()()()),2&o&&e.Q6J("routerLink",e.DdM(1,m))}const u=function(){return["/reports","catering"]};function _(o,g){1&o&&(e.TgZ(0,"a",1)(1,"app-icon",2),e._uU(2,"room_service"),e.qZA(),e.TgZ(3,"h3",3),e._uU(4,"Catering"),e.qZA(),e.TgZ(5,"div",4)(6,"p"),e._uU(7,"View Report"),e.qZA(),e.TgZ(8,"app-icon",5),e._uU(9,"chevron_right"),e.qZA()()()),2&o&&e.Q6J("routerLink",e.DdM(1,u))}const y=function(){return["/reports","contact-tracing"]};function w(o,g){1&o&&(e.TgZ(0,"a",1)(1,"app-icon",2),e._uU(2,"connect_without_contact"),e.qZA(),e.TgZ(3,"h3",3),e._uU(4,"Contact Tracing"),e.qZA(),e.TgZ(5,"div",4)(6,"p"),e._uU(7,"View Report"),e.qZA(),e.TgZ(8,"app-icon",5),e._uU(9,"chevron_right"),e.qZA()()()),2&o&&e.Q6J("routerLink",e.DdM(1,y))}const A=["desks","spaces","catering","contact-tracing"];let O=(()=>{class o{constructor(s){this._settings=s}get features(){return this._settings.get("app.reports.features")||A}}return o.\u0275fac=function(s){return new(s||o)(e.Y36(i.gb))},o.\u0275cmp=e.Xpm({type:o,selectors:[["reports-menu"],["","reports-menu",""]],decls:4,vars:4,consts:[["matRipple","","class","h-64 w-64 m-4 p-4 flex flex-col items-center justify-center bg-white dark:bg-neutral-700 rounded shadow hover:opacity-80",3,"routerLink",4,"ngIf"],["matRipple","",1,"h-64","w-64","m-4","p-4","flex","flex-col","items-center","justify-center","bg-white","dark:bg-neutral-700","rounded","shadow","hover:opacity-80",3,"routerLink"],[1,"text-8xl"],[1,"text-xl","font-bold","mb-4"],[1,"flex","items-center"],[1,"ml-2"]],template:function(s,l){1&s&&(e.YNc(0,c,10,2,"a",0),e.YNc(1,f,10,2,"a",0),e.YNc(2,_,10,2,"a",0),e.YNc(3,w,10,2,"a",0)),2&s&&(e.Q6J("ngIf",l.features.includes("desks")),e.xp6(1),e.Q6J("ngIf",l.features.includes("spaces")),e.xp6(1),e.Q6J("ngIf",l.features.includes("catering")),e.xp6(1),e.Q6J("ngIf",l.features.includes("contact-tracing")))},dependencies:[Y.O5,d.wG,n.o,P.yS],styles:["[_nghost-%COMP%]{display:flex;flex-direction:row!important;align-items:center;justify-content:center;background:inherit}\n/*# sourceMappingURL=reports-menu.component.ts-angular-inline--100.css.map*/"]}),o})();const z=["app-reports",""];function C(o,g){1&o&&e._UZ(0,"div",3)}let j=(()=>{class o{constructor(s){this._router=s}get path(){const s=this._router.url.split("/");return s[s.length-1]}}return o.\u0275fac=function(s){return new(s||o)(e.Y36(P.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["","app-reports",""]],attrs:z,decls:4,vars:1,consts:[[1,"h-full"],[1,"relative","overflow-hidden","flex","flex-col","flex-1","w-1/2","h-full","bg-gray-300","dark:bg-neutral-600"],["reports-menu","","class","absolute inset-0",4,"ngIf"],["reports-menu","",1,"absolute","inset-0"]],template:function(s,l){1&s&&(e._UZ(0,"sidebar",0),e.TgZ(1,"main",1),e._UZ(2,"router-outlet"),e.YNc(3,C,1,0,"div",2),e.qZA()),2&s&&(e.xp6(3),e.Q6J("ngIf","reports"===l.path))},dependencies:[Y.O5,a.k,P.lC,O],styles:["[_nghost-%COMP%]{display:flex;height:100%;width:100%}main[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:not(router-outlet){display:flex;flex-direction:column;width:100%;height:100%}\n/*# sourceMappingURL=reports.component.ts-angular-inline--96.css.map*/"]}),o})();var Z=U(2886),M=U(4380),T=U(1415),N=U(3155),k=U(6221),x=U(1091),b=U(1722),L=U(9830),E=U(3841),q=U(5039),W=U(586),I=U(5868),F=U(3403),$=U(7807),V=U(4875),fe=U(6671),te=U(8406),ne=U(3815),ae=U(8005),me=U(572),ue=U(3800),ge=U(1325),X=U(9258),re=U(7693),Ie=U(6198);let ee=(()=>{class o{constructor(s){var l=this;this._org=s,this._space_pipe=new Ie.X(this._org),this._generate=new fe.xQ,this._loading=new te.X(""),this._active_bookings=new te.X([]),this._options=new te.X({start:new Date,end:new Date}),this._bookings_list=this._generate.pipe((0,me.b)(500),(0,ue.w)(p=>{const h=this._options.getValue();if(this._loading.next("Loading report details..."),!h?.type&&!h?.zones?.length)return(0,ne.of)([]);const v=(0,E.Z)(h?.start?new Date(h.start):new Date).valueOf(),R=(0,q.Z)(h?.end?new Date(h.end):v).valueOf(),Q=h?.zones?h.zones.filter(D=>"All"!==D).join(","):"",B={period_start:Math.floor(v/1e3),period_end:Math.floor(R/1e3)};return"desks"===h.type?(0,b.F2)({...B,zones:Q,type:"desk"}):(0,L.u$)({...B,zone_ids:Q}).pipe((0,ue.w)(function(){var D=(0,T.Z)(function*(K){return Promise.all(K.map(function(){var H=(0,T.Z)(function*(J){return new L.ym({...J,resources:yield Promise.all(J.resources.map(se=>l._space_pipe.transform(se.id||se.email)))})});return function(J){return H.apply(this,arguments)}}()))});return function(K){return D.apply(this,arguments)}}()))}),(0,ge.K)(p=>[]),(0,X.U)(p=>(this._loading.next(""),p?.length||(0,i.cB)("No bookings for the selected levels and period"),this._active_bookings.next(p||[]),p)),(0,re.d)()),this.loading=this._loading.asObservable(),this.options=this._options.asObservable(),this.bookings=this._active_bookings.asObservable(),this.counts=this._options.pipe((0,me.b)(500),(0,ue.w)(p=>{const h=(p.zones||[]).filter(v=>-1!==v&&"All"!==v);return Promise.all(h.map(v=>(0,x.rlq)(v,"desks").pipe((0,X.U)(R=>[v,R.details.length])).toPromise()))}),(0,ge.K)(p=>[]),(0,X.U)(p=>{const h={};return this._active_bookings.next([]),p.forEach(([v,R])=>h[v]=R),h}),(0,re.d)()),this.stats=(0,ae.aj)([this.counts,this.bookings]).pipe((0,ue.w)(function(){var p=(0,T.Z)(function*([h,v]){return v[0]instanceof L.ym?function De(o,g=8){g=Math.max(1,g);const s=o.reduce((v,R)=>v+R.attendees.length,0),l=o.reduce((v,R)=>v+R.system?.capacity,0),p=Math.floor(o.reduce((v,R)=>v+R.duration,0)/(60*g)*100)/100,h=Math.floor(s/l*100)/100;return{count:o.length,avg_length:Math.floor(o.reduce((v,R)=>v+R.duration,0)/o.length*100)/100,efficiency:Math.floor((p+h)/2*100)/100,total_users:s,total_capacity:l,occupancy:h,utilisation:p,events:o}}(v,8*l.duration):function Ne(o,g=1,s={}){g=Math.max(1,g);const l=Object.keys(s).reduce((h,v)=>h+(s[v]||0),0),p=Math.floor(o.length/l/g*1e4)/1e4;return{total:l,count:o.length,utilisation:p,events:o}}(v||[],l.duration,h)});return function(h){return p.apply(this,arguments)}}())),this.day_list=(0,ae.aj)([this.options,this.stats]).pipe((0,X.U)(([p,h])=>{const{start:v}=p;let R=(0,E.Z)(v);const Q=(0,q.Z)(p.end||R),B=[];for(;(0,W.Z)(R,Q);){const D=(0,E.Z)(R).valueOf(),K=(0,q.Z)(D).valueOf(),H=h.events.filter(J=>(0,i.MZ)(D,K,J.date,J.date+60*J.duration*1e3));B.push({date:D,total:h.total,free:h.total-H.length,approved:H.reduce((J,se)=>J+(se.approved?1:0),0),count:H.length,utilisation:(H.length/h.total*100).toFixed(1)}),R=(0,I.Z)(R,1)}return B}),(0,re.d)(1)),this._bookings_list.subscribe(p=>p)}get duration(){const s=this._options.getValue();return Math.max(1,Math.abs((0,F.Z)((0,E.Z)(s.start),(0,$.Z)((0,q.Z)(s.end),1))))}generateReport(){this._generate.next((new Date).valueOf())}setOptions(s){s.zones?.includes("All")?s.zones=["All",...this._org.levelsForBuilding(this._org.building).map(l=>l.id)]:s.zones&&this._options.getValue()?.zones?.includes("All")&&(s.zones=[]),s.start?.valueOf()!==this._options.getValue().start?.valueOf()&&s.end?.valueOf()!==this._options.getValue().end?.valueOf()&&this._options.next({...this._options.getValue(),...s})}downloadReport(){const s=this._options.getValue(),l=this._active_bookings.getValue();(0,i.Sv)(`report+${s.type}+${(0,V.Z)(s.start,"yyyy-MM-dd")}+${(0,V.Z)(s.end,"yyyy-MM-dd")}.csv`,(0,i.o3)(l.map(p=>{const h=p.toJSON();return delete h.zones,delete h.server_names,delete h.extension_data,h})))}}return o.\u0275fac=function(s){return new(s||o)(e.LFG(k.w7))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var ie=U(5432),he=U(952),Pe=U(7943),oe=U(4678),_e=U(3139);function je(o,g){if(1&o&&(e.TgZ(0,"mat-option",14),e._uU(1),e.qZA()),2&o){const s=g.$implicit;e.Q6J("value",s.id),e.xp6(1),e.hij(" ",s.display_name||s.name," ")}}function Be(o,g){1&o&&e._UZ(0,"mat-spinner",15),2&o&&e.Q6J("diameter",32)}function Ye(o,g){1&o&&(e.TgZ(0,"p"),e._uU(1,"Generate Report"),e.qZA())}let ve=(()=>{class o extends i.KG{constructor(s,l,p,h){super(),this._state=s,this._org=l,this._route=p,this._router=h,this.zones=[],this.types=[{id:"internal",name:"Internal"},{id:"external",name:"External"},{id:"cancelled",name:"Cancelled"}],this.type_list=this.types.map(v=>`${v.id}`),this.levels=this._org.active_levels,this.loading=this._state.loading,this.bookings=this._state.bookings,this.options=this._state.options,this.page="",this.generateReport=()=>this._state.generateReport(),this.downloadReport=()=>this._state.downloadReport(),this.setStartDate=v=>this._state.setOptions({start:new Date(v)}),this.setEndDate=v=>this._state.setOptions({end:new Date(v)}),this.setZones=v=>this._state.setOptions({zones:v})}ngOnInit(){var s=this;return(0,T.Z)(function*(){yield s._org.initialised.pipe((0,N.P)(l=>l)).toPromise(),s.page=s._router.url,s.subscription("routing",s._router.events.subscribe(()=>{s.page=s._router.url})),s.subscription("route.query",s._route.queryParamMap.subscribe(l=>{if(l.has("zone_ids")){const p=l.get("zone_ids").split(",");if(p.length){const h=s._org.levelWithID(p);if(!h)return;s._org.building=s._org.buildings.find(v=>v.id===h.parent_id),s.setZones(p)}}}))})()}}return o.\u0275fac=function(s){return new(s||o)(e.Y36(ee),e.Y36(k.w7),e.Y36(P.gz),e.Y36(P.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["reports-options"]],features:[e.qOj],decls:28,vars:28,consts:[[1,"bg-white","dark:bg-neutral-700","h-20","w-full","flex","items-center","px-2","shadow","z-20","border-b","border-gray-200"],["appearance","outline",1,"w-48"],["multiple","","placeholder","Select Levels...",3,"ngModel","ngModelChange"],["value","All"],[3,"value",4,"ngFor","ngForOf"],["appearance","outline",1,"w-64"],[3,"rangePicker"],["matStartDate","","placeholder","Start date",3,"ngModel","ngModelChange"],["matEndDate","","placeholder","End date",3,"ngModel","ngModelChange"],["matSuffix","",3,"for"],["picker",""],["mat-button","",1,"ml-4",3,"disabled","click"],[3,"diameter",4,"ngIf"],[4,"ngIf"],[3,"value"],[3,"diameter"]],template:function(s,l){if(1&s&&(e.TgZ(0,"div",0)(1,"mat-form-field",1)(2,"mat-select",2),e.NdJ("ngModelChange",function(h){return l.setZones(h)}),e.ALo(3,"async"),e.TgZ(4,"mat-option",3),e._uU(5,"All Levels"),e.qZA(),e.YNc(6,je,2,2,"mat-option",4),e.ALo(7,"async"),e.qZA()(),e.TgZ(8,"mat-form-field",5)(9,"mat-date-range-input",6)(10,"input",7),e.NdJ("ngModelChange",function(h){return h?l.setStartDate(h):""}),e.ALo(11,"async"),e.qZA(),e.TgZ(12,"input",8),e.NdJ("ngModelChange",function(h){return h?l.setEndDate(h):""}),e.ALo(13,"async"),e.qZA()(),e._UZ(14,"mat-datepicker-toggle",9)(15,"mat-date-range-picker",null,10),e.qZA(),e.TgZ(17,"button",11),e.NdJ("click",function(){return l.generateReport()}),e.ALo(18,"async"),e.ALo(19,"async"),e.YNc(20,Be,1,1,"mat-spinner",12),e.ALo(21,"async"),e.YNc(22,Ye,2,0,"p",13),e.ALo(23,"async"),e.qZA(),e.TgZ(24,"button",11),e.NdJ("click",function(){return l.downloadReport()}),e.ALo(25,"async"),e.TgZ(26,"p"),e._uU(27,"Download Report"),e.qZA()()()),2&s){const p=e.MAs(16);let h,v,R,Q,B;e.xp6(2),e.Q6J("ngModel",null==(h=e.lcZ(3,10,l.options))?null:h.zones),e.xp6(4),e.Q6J("ngForOf",e.lcZ(7,12,l.levels)),e.xp6(3),e.Q6J("rangePicker",p),e.xp6(1),e.Q6J("ngModel",null==(v=e.lcZ(11,14,l.options))?null:v.start),e.xp6(2),e.Q6J("ngModel",null==(R=e.lcZ(13,16,l.options))?null:R.end),e.xp6(2),e.Q6J("for",p),e.xp6(3),e.Q6J("disabled",!!e.lcZ(18,18,l.loading)||!(null!=(Q=e.lcZ(19,20,l.options))&&null!=Q.zones&&Q.zones.length)),e.xp6(3),e.Q6J("ngIf",e.lcZ(21,22,l.loading)),e.xp6(2),e.Q6J("ngIf",!e.lcZ(23,24,l.loading)),e.xp6(2),e.Q6J("disabled",!(null!=(B=e.lcZ(25,26,l.bookings))&&B.length))}},dependencies:[Y.sg,Y.O5,G.Fj,G.JJ,G.On,ie.lW,he.KE,he.R9,Pe.gD,d.ey,oe.nW,oe.wx,oe.zY,oe.By,oe._g,_e.Ou,Y.Ov],styles:["button[_ngcontent-%COMP%]{min-width:0;padding:0 .85rem}mat-form-field[_ngcontent-%COMP%]{height:3.25em;margin-left:1em}mat-slide-toggle[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:5.5em;white-space:initial;line-height:1.2em}\n/*# sourceMappingURL=reports-options.component.ts-angular-inline--97.css.map*/"]}),o})();var qe=U(85),Je=U(5816),Se=U(3949),we=U(3537),Ue=U(9014);function Qe(o){(0,Ue.Z)(1,arguments);var g=(0,we.Z)(o),s=g.getDay();return 0===s||6===s}var Fe=U(9354),Le=U(8916);function Ge(o,g){if(1&o&&(e.TgZ(0,"div",0)(1,"div",3)(2,"h3"),e._uU(3,"No show count"),e.qZA(),e.TgZ(4,"p"),e._uU(5),e.ALo(6,"async"),e.qZA()(),e.TgZ(7,"div",3)(8,"h3"),e._uU(9,"% of No show Bookings"),e.qZA(),e.TgZ(10,"p"),e._uU(11),e.ALo(12,"async"),e.qZA()(),e.TgZ(13,"div",3)(14,"h3"),e._uU(15,"Total in-room attendance"),e.qZA(),e.TgZ(16,"p"),e._uU(17),e.ALo(18,"async"),e.qZA()()()),2&o){const s=e.oxw();e.xp6(5),e.Oqu(e.lcZ(6,3,s.no_shows)||0),e.xp6(6),e.hij("",e.lcZ(12,5,s.no_show_percent)||0,"%"),e.xp6(6),e.Oqu(e.lcZ(18,7,s.attendance)||0)}}let Ce=(()=>{class o{constructor(s){this._state=s,this.business_days=this._state.options.pipe((0,X.U)(({start:l,end:p})=>function Xe(o,g){(0,Ue.Z)(2,arguments);var s=(0,we.Z)(o),l=(0,we.Z)(g);if(!(0,Se.Z)(s)||!(0,Se.Z)(l))return NaN;var p=(0,qe.Z)(s,l),h=p<0?-1:1,v=(0,Fe.Z)(p/7),R=5*v;for(l=(0,I.Z)(l,7*v);!(0,Je.Z)(s,l);)R+=Qe(l)?0:h,l=(0,I.Z)(l,h);return 0===R?0:R}((0,E.Z)(p||Date.now()),(0,q.Z)(l||Date.now()))||1)),this.total_count=this._state.stats.pipe((0,X.U)(l=>l.count||0)),this.avg_length=this._state.stats.pipe((0,X.U)(l=>(0,Le.Z)({minutes:l.avg_length||0}))),this.attendance=this._state.stats.pipe((0,X.U)(({events:l})=>l.reduce((p,{extension_data:h})=>p+(+h?.people_count?.max||0),0))),this.no_shows=this._state.stats.pipe((0,X.U)(({events:l})=>l.reduce((p,{extension_data:h})=>p+ +h?.people_count?.max?1:0,0))),this.no_show_percent=this._state.stats.pipe((0,X.U)(({events:l})=>Math.floor(l.reduce((p,{extension_data:h})=>p+ +h?.people_count?.max?1:0,0)/l.length*1e4)/100)),this.has_attendance=this._state.stats.pipe((0,X.U)(({events:l})=>!!l.find(({extension_data:p})=>!!p?.people_count)))}}return o.\u0275fac=function(s){return new(s||o)(e.Y36(ee))},o.\u0275cmp=e.Xpm({type:o,selectors:[["report-spaces-overall"]],decls:21,vars:12,consts:[[1,"m-4","p-4","rounded","bg-white","dark:bg-neutral-700","shadow","flex","justify-center","items-center","space-x-2"],[1,"flex","flex-col","items-center","flex-1"],["class","m-4 p-4 rounded bg-white dark:bg-neutral-700 shadow flex justify-center items-center space-x-2",4,"ngIf"],[1,"flex-1","flex","flex-col","items-center","justify-center"]],template:function(s,l){1&s&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h3"),e._uU(3,"Business Days"),e.qZA(),e.TgZ(4,"p"),e._uU(5),e.ALo(6,"async"),e.qZA()(),e.TgZ(7,"div",1)(8,"h3"),e._uU(9,"Total Bookings"),e.qZA(),e.TgZ(10,"p"),e._uU(11),e.ALo(12,"async"),e.qZA()(),e.TgZ(13,"div",1)(14,"h3"),e._uU(15,"Average Booking Length"),e.qZA(),e.TgZ(16,"p"),e._uU(17),e.ALo(18,"async"),e.qZA()()(),e.YNc(19,Ge,19,9,"div",2),e.ALo(20,"async")),2&s&&(e.xp6(5),e.Oqu(e.lcZ(6,4,l.business_days)||0),e.xp6(6),e.Oqu(e.lcZ(12,6,l.total_count)||0),e.xp6(6),e.Oqu(e.lcZ(18,8,l.avg_length)||"None"),e.xp6(2),e.Q6J("ngIf",e.lcZ(20,10,l.has_attendance)))},dependencies:[Y.O5,Y.Ov],styles:["h3[_ngcontent-%COMP%]{font-weight:500}p[_ngcontent-%COMP%]:not([simple]){font-size:1.75rem}\n/*# sourceMappingURL=report-spaces-overall.component.ts-angular-inline--101.css.map*/"]}),o})();var le=U(2629),ce=U(1110);const Ve=function(){return["flex"]};let We=(()=>{class o{constructor(s){var l=this;this._reports=s,this.space_list=(0,ae.aj)([this._reports.stats,this._reports.options]).pipe((0,me.b)(300),(0,X.U)(([p,{start:h,end:v}])=>{let R=[],Q=!1;for(const D of p.events){const K=(0,i.Tw)(D.resources,"email")||[D.system];for(const H of K){let J=R.find(se=>se.id===H.id||se.id?.toLowerCase()===H.email.toLowerCase());if(!J){if(J={id:H.id||H.email,name:H.display_name||H.name,capacity:H.capacity||1,count:0,attendance:0,avg_attendance:0,min_attendance:99,max_attendance:0,attendees:0,avg_attendees:0,usage:0,no_shows:0,utilisation:0,occupancy:0},!J.id||!J.name)continue;R.push(J)}0===D.extension_data?.people_count?.max&&(J.no_shows+=1),J.count+=1,J.attendance+=D.extension_data?.people_count?.max??0,J.avg_attendance+=D.extension_data?.people_count?.avg??0,J.min_attendance=Math.min(J.max_attendance,D.extension_data?.people_count?.max??99),J.max_attendance=Math.max(J.max_attendance,D.extension_data?.people_count?.max??0),J.usage+=D.duration,J.attendees+=D.attendees.length,Q=Q||!!D.extension_data.people_count}}const B=Math.max(1,(0,F.Z)(v,h)+1);for(const D of R)D.avg_attendees=Math.floor(D.attendees/D.count*100)/100,D.avg_attendance=Math.floor(D.attendance/D.count*100)/100,D.utilisation=Math.floor(D.usage/60/8/B*1e4)/100+"%",D.min_attendance=99===D.min_attendance?"?":D.min_attendance,D.occupancy=Math.floor(D.avg_attendees/D.capacity*1e4)/100+"%",(D.attendance<0||!Q)&&(D.attendance="?",D.avg_attendance="?");return R})),this.has_attendance=this.space_list.pipe((0,X.U)(p=>!!p.find(({attendance:h})=>"?"!==h))),this.column_list=this.has_attendance.pipe((0,X.U)(p=>p?["name","capacity","count","utilisation","avg_attendees","attendance","avg_attendance","no_shows","min_attendance","max_attendance"]:["name","capacity","count","utilisation","avg_attendees"])),this.column_name_list=this.has_attendance.pipe((0,X.U)(p=>p?["Name","Room Capacity","Bookings","% Time booked during office hrs","Avg. invitees per booking","Total In-room Attendance","Avg. In-room Attendance","No Shows","Min. In-room Attendance","Max. In-room Attendance"]:["Name","Room Capacity","Bookings","% Time booked during office hrs","Avg. invitees per booking"])),this.download=(0,T.Z)(function*(){const p=yield l.space_list.pipe((0,le.q)(1)).toPromise();(0,i.Sv)("report-spaces-usage.csv",(0,i.o3)(p))})}}return o.\u0275fac=function(s){return new(s||o)(e.Y36(ee))},o.\u0275cmp=e.Xpm({type:o,selectors:[["report-spaces-space-listing"]],decls:10,vars:10,consts:[[1,"m-4","rounded","bg-white","dark:bg-neutral-700","shadow","overflow-hidden"],[1,"border-b","border-gray-300","dark:border-neutral-500","px-4","py-2","flex","items-center"],[1,"font-bold","text-xl","flex-1"],["mat-icon-button","",3,"click"],[3,"dataSource","pagination","columns","display_column","column_size"]],template:function(s,l){1&s&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h3",2),e._uU(3,"Room Utilisation"),e.qZA(),e.TgZ(4,"button",3),e.NdJ("click",function(){return l.download()}),e.TgZ(5,"app-icon"),e._uU(6,"download"),e.qZA()()(),e._UZ(7,"custom-table",4),e.ALo(8,"async"),e.ALo(9,"async"),e.qZA()),2&s&&(e.xp6(7),e.Q6J("dataSource",l.space_list)("pagination",!0)("columns",e.lcZ(8,5,l.column_list))("display_column",e.lcZ(9,7,l.column_name_list))("column_size",e.DdM(9,Ve)))},dependencies:[ie.lW,n.o,ce.C,Y.Ov]}),o})();const He=function(){return["name","count","avg_attendees","occupancy","no_shows"]},$e=function(){return["Name","Bookings","Avg. Attendees","Occupancy","No Shows"]},Ke=function(){return["flex"]};let et=(()=>{class o{constructor(s){var l=this;this._reports=s,this.user_list=(0,ae.aj)([this._reports.stats]).pipe((0,me.b)(300),(0,X.U)(([p])=>{let h=[];for(const v of p.events){const R=v.attendees?.find(D=>D.email===v.host);if(!R)continue;const Q=Math.max(v.resources.reduce((D,K)=>D+K.capacity,0)||1,1);let B=h.find(D=>D.id?.toLowerCase()===R.email.toLowerCase());B||(B={id:R.email,name:R.name,capacity:Q,count:0,attendees:0,avg_attendees:0,no_shows:0,occupancy:0},h.push(B)),0===v.extension_data?.people_count?.max&&(B.no_shows+=1),B.count+=1,B.attendees+=v.attendees.length}for(const v of h)v.avg_attendees=Math.floor(v.attendees/v.count*100)/100,v.occupancy=Math.floor(v.avg_attendees/v.capacity*100)/100;return h}),(0,re.d)(1)),this.download=(0,T.Z)(function*(){const p=yield l.user_list.pipe((0,le.q)(1)).toPromise();(0,i.Sv)("report-space-attendee-usage.csv",(0,i.o3)(p))})}}return o.\u0275fac=function(s){return new(s||o)(e.Y36(ee))},o.\u0275cmp=e.Xpm({type:o,selectors:[["report-spaces-user-listing"]],decls:8,vars:8,consts:[[1,"m-4","rounded","bg-white","dark:bg-neutral-700","shadow","overflow-hidden"],[1,"border-b","border-gray-300","dark:border-neutral-500","px-4","py-2","flex","items-center"],[1,"font-bold","text-xl","flex-1"],["mat-icon-button","",3,"click"],[3,"dataSource","pagination","columns","display_column","column_size"]],template:function(s,l){1&s&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h3",2),e._uU(3,"Meeting Organisers"),e.qZA(),e.TgZ(4,"button",3),e.NdJ("click",function(){return l.download()}),e.TgZ(5,"app-icon"),e._uU(6,"download"),e.qZA()()(),e._UZ(7,"custom-table",4),e.qZA()),2&s&&(e.xp6(7),e.Q6J("dataSource",l.user_list)("pagination",!0)("columns",e.DdM(5,He))("display_column",e.DdM(6,$e))("column_size",e.DdM(7,Ke)))},dependencies:[ie.lW,n.o,ce.C]}),o})();const tt=["report-spaces",""];function nt(o,g){1&o&&(e.ynx(0),e._UZ(1,"report-spaces-overall")(2,"report-spaces-space-listing")(3,"report-spaces-user-listing"),e.BQk())}function ot(o,g){if(1&o&&(e.ynx(0),e.YNc(1,nt,4,0,"ng-container",1),e.ALo(2,"async"),e.BQk()),2&o){const s=e.oxw(),l=e.MAs(7);e.xp6(1),e.Q6J("ngIf",e.lcZ(2,2,s.total_count))("ngIfElse",l)}}function st(o,g){1&o&&(e.TgZ(0,"div",4),e._UZ(1,"mat-spinner",5),e.TgZ(2,"p",6),e._uU(3,"Loading report data..."),e.qZA()()),2&o&&(e.xp6(1),e.Q6J("diameter",32))}function rt(o,g){1&o&&(e.TgZ(0,"div",4)(1,"p",6),e._uU(2," Select levels and time period to generate a report. "),e.qZA()())}let at=(()=>{class o{constructor(s){this._state=s,this.total_count=this._state.stats.pipe((0,X.U)(l=>l.count||0)),this.loading=this._state.loading}ngOnInit(){this._state.setOptions({type:"events"})}}return o.\u0275fac=function(s){return new(s||o)(e.Y36(ee))},o.\u0275cmp=e.Xpm({type:o,selectors:[["","report-spaces",""]],attrs:tt,decls:8,vars:4,consts:[[1,"relative","flex-1","h-1/2","w-full","overflow-auto","z-0"],[4,"ngIf","ngIfElse"],["load_state",""],["empty_state",""],[1,"h-full","w-full","flex","flex-col","items-center","p-8"],[1,"mb-4",3,"diameter"],["simple",""]],template:function(s,l){if(1&s&&(e._UZ(0,"reports-options"),e.TgZ(1,"div",0),e.YNc(2,ot,3,4,"ng-container",1),e.ALo(3,"async"),e.qZA(),e.YNc(4,st,4,1,"ng-template",null,2,e.W1O),e.YNc(6,rt,3,0,"ng-template",null,3,e.W1O)),2&s){const p=e.MAs(5);e.xp6(2),e.Q6J("ngIf",!e.lcZ(3,2,l.loading))("ngIfElse",p)}},dependencies:[Y.O5,_e.Ou,ve,Ce,We,et,Y.Ov],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%}\n/*# sourceMappingURL=report-spaces.component.ts-angular-inline--98.css.map*/"]}),o})();function it(o,g){1&o&&(e._uU(0),e.ALo(1,"date")),2&o&&e.hij(" ",e.xi3(1,1,g.data,"mediumDate")," ")}function lt(o,g){1&o&&e._uU(0),2&o&&e.hij(" ",g.data||"0","% ")}const ct=function(){return["date","usage","approved","count","utilisation"]},ut=function(){return["Date","Used Desks","Approved Bookings","Total Requests","Utilisation"]},dt=function(){return["flex"]},pt=function(o,g,s){return{date:o,usage:g,utilisation:s}};let ft=(()=>{class o{constructor(s){var l=this;this._state=s,this.day_list=this._state.day_list,this.download=(0,T.Z)(function*(){let p=yield l.day_list.pipe((0,le.q)(1)).toPromise();p=p.map(h=>({...h,date:(0,V.Z)(h.date,"MMMM d, y(EEE)")})),(0,i.Sv)("desks-usage.csv",(0,i.o3)(p))})}}return o.\u0275fac=function(s){return new(s||o)(e.Y36(ee))},o.\u0275cmp=e.Xpm({type:o,selectors:[["report-desks-overall-list"]],decls:12,vars:13,consts:[[1,"m-4","rounded","bg-white","dark:bg-neutral-700","shadow","overflow-hidden"],[1,"border-b","border-gray-300","dark:border-neutral-500","p-4","flex","items-center"],[1,"font-bold","text-xl","flex-1"],["mat-icon-button","",3,"click"],["red-header","",3,"dataSource","pagination","columns","display_column","column_size","template"],["date_view",""],["percent_view",""]],template:function(s,l){if(1&s&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h3",2),e._uU(3,"Daily Utilisation"),e.qZA(),e.TgZ(4,"button",3),e.NdJ("click",function(){return l.download()}),e.TgZ(5,"app-icon"),e._uU(6,"download"),e.qZA()()(),e._UZ(7,"custom-table",4),e.YNc(8,it,2,4,"ng-template",null,5,e.W1O),e.YNc(10,lt,1,1,"ng-template",null,6,e.W1O),e.qZA()),2&s){const p=e.MAs(9),h=e.MAs(11);e.xp6(7),e.Q6J("dataSource",l.day_list)("pagination",!0)("columns",e.DdM(6,ct))("display_column",e.DdM(7,ut))("column_size",e.DdM(8,dt))("template",e.kEZ(9,pt,p,h,h))}},dependencies:[ie.lW,n.o,ce.C,Y.uU],encapsulation:2}),o})();function mt(o,g){1&o&&e._uU(0),2&o&&e.hij(" ",g.data||"0","% ")}const gt=function(){return["name","avg_usage","approved","count","utilisation"]},ht=function(){return["Level","Avg. Used Desks","Approved Bookings","Total Requests","Utilisation"]},_t=function(){return["flex"]},vt=function(o){return{utilisation:o}};let xt=(()=>{class o{constructor(s,l){var p=this;this._state=s,this._org=l,this.level_list=(0,ae.aj)([this._state.options,this._state.stats,this._state.counts]).pipe((0,X.U)(([h,v,R])=>{const{start:Q,end:B,zones:D}=h,K=(0,F.Z)(B,Q)||1,H=[];for(const J of D){if("All"===J)continue;const se=this._org.levelWithID([J]),Me=R[J]||0,de=v.events.filter(Oe=>Oe.zones.includes(J));let ye=(Me*K-de.length)/K;ye%1!=0&&(ye=ye.toFixed(2)),H.push({name:se?.display_name||se?.name,free:ye,approved:de.filter(Oe=>Oe.approved).length||0,avg_usage:de.length/K,total:Me,count:de.length,utilisation:(de.length/((Me||1)*K)*100||0).toFixed(2)})}return H}),(0,re.d)(1)),this.download=(0,T.Z)(function*(){let h=yield p.level_list.pipe((0,le.q)(1)).toPromise();(0,i.Sv)("desks-levels-usage.csv",(0,i.o3)(h))})}}return o.\u0275fac=function(s){return new(s||o)(e.Y36(ee),e.Y36(k.w7))},o.\u0275cmp=e.Xpm({type:o,selectors:[["report-desks-levels-list"]],decls:11,vars:11,consts:[[1,"px-4","mb-4","w-full"],[1,"rounded","bg-white","dark:bg-neutral-700","shadow","overflow-hidden","w-full"],[1,"border-b","border-gray-300","dark:border-neutral-500","p-4","flex","items-center"],[1,"font-bold","text-xl","flex-1"],["mat-icon-button","",3,"click"],["red-header","",3,"dataSource","pagination","columns","display_column","column_size","template"],["percent_view",""]],template:function(s,l){if(1&s&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),e._uU(4,"Level Utilisation"),e.qZA(),e.TgZ(5,"button",4),e.NdJ("click",function(){return l.download()}),e.TgZ(6,"app-icon"),e._uU(7,"download"),e.qZA()()(),e._UZ(8,"custom-table",5),e.YNc(9,mt,1,1,"ng-template",null,6,e.W1O),e.qZA()()),2&s){const p=e.MAs(10);e.xp6(8),e.Q6J("dataSource",l.level_list)("pagination",!0)("columns",e.DdM(6,gt))("display_column",e.DdM(7,ht))("column_size",e.DdM(8,_t))("template",e.VKq(9,vt,p))}},dependencies:[ie.lW,n.o,ce.C],encapsulation:2}),o})();var Re=U(3303);let yt=(()=>{class o extends i.KG{constructor(s,l){super(),this._state=s,this._org=l,this.day_list=this._state.day_list,this.stats=(0,ae.aj)([this._state.options,this._state.counts])}ngOnInit(){this.subscription("day_list",this.day_list.subscribe(s=>this.updateDailyChart(s))),this.subscription("stats",this.stats.subscribe(([s,l])=>this.updateLevelChart(s,l)))}updateDailyChart(s){const l={labels:s.map(p=>(0,V.Z)(p.date,"dd MMM")),series:[s.map(p=>p.utilisation)]};this._day_chart=new Re.Line("#day-chart",l)}updateLevelChart(s,l){let{zones:p}=s||{};p.includes("All")&&(p=this._org.levels.filter(v=>v.parent_id===this._org.building.id).map(v=>v.id));const h={labels:(p||[]).map(v=>{const R=this._org.levelWithID([v]);return R?.display_name||R.name||""}),series:(p||[]).map(v=>l[v])};this._level_chart=new Re.Pie("#level-chart",h)}}return o.\u0275fac=function(s){return new(s||o)(e.Y36(ee),e.Y36(k.w7))},o.\u0275cmp=e.Xpm({type:o,selectors:[["report-desks-charts"]],features:[e.qOj],decls:11,vars:0,consts:[[1,"flex","items-center","space-x-4","w-full","px-4"],[1,"bg-white","dark:bg-neutral-700","rounded","shadow","flex-1"],[1,"border-b","border-gray-300","dark:border-neutral-500","p-4","text-xl","font-bold"],["id","day-chart",1,"ct-chart","ct-octave"],["util_chart",""],["id","level-chart",1,"ct-chart","ct-octave"],["level_chart",""]],template:function(s,l){1&s&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3," Daily Utilisation "),e.qZA(),e._UZ(4,"div",3,4),e.qZA(),e.TgZ(6,"div",1)(7,"div",2),e._uU(8," Level Utilisation "),e.qZA(),e._UZ(9,"div",5,6),e.qZA()())},styles:["[_nghost-%COMP%]{display:block}\n/*# sourceMappingURL=report-desks-charts.component.ts-angular-inline--116.css.map*/"]}),o})();const wt=["report-desks",""];function bt(o,g){if(1&o&&(e.ynx(0),e.TgZ(1,"div",4)(2,"div",5)(3,"h3"),e._uU(4,"Total Bookings"),e.qZA(),e.TgZ(5,"p"),e._uU(6),e.ALo(7,"async"),e.qZA()(),e.TgZ(8,"div",5)(9,"h3"),e._uU(10,"Utilisation"),e.qZA(),e.TgZ(11,"p"),e._uU(12),e.ALo(13,"async"),e.qZA()()(),e._UZ(14,"report-desks-charts")(15,"report-desks-overall-list")(16,"report-desks-levels-list"),e.BQk()),2&o){const s=e.oxw(2);e.xp6(6),e.Oqu(e.lcZ(7,2,s.total_count)||0),e.xp6(6),e.hij("",e.lcZ(13,4,s.utilisation)||0,"%")}}function At(o,g){if(1&o&&(e.ynx(0),e.YNc(1,bt,17,6,"ng-container",1),e.ALo(2,"async"),e.BQk()),2&o){const s=e.oxw(),l=e.MAs(7);e.xp6(1),e.Q6J("ngIf",e.lcZ(2,2,s.total_count))("ngIfElse",l)}}function Zt(o,g){1&o&&(e.TgZ(0,"div",6),e._UZ(1,"mat-spinner",7),e.TgZ(2,"p",8),e._uU(3,"Loading report data..."),e.qZA()()),2&o&&(e.xp6(1),e.Q6J("diameter",32))}function Mt(o,g){1&o&&(e.TgZ(0,"div",6)(1,"p",8),e._uU(2," Select levels and time period to generate a report. "),e.qZA()())}let Ot=(()=>{class o{constructor(s){this._state=s,this.total_count=this._state.stats.pipe((0,X.U)(l=>l.count||0)),this.utilisation=this._state.stats.pipe((0,X.U)(l=>(100*(l.utilisation||0)).toFixed(1))),this.loading=this._state.loading}ngOnInit(){this._state.setOptions({type:"desks"})}}return o.\u0275fac=function(s){return new(s||o)(e.Y36(ee))},o.\u0275cmp=e.Xpm({type:o,selectors:[["","report-desks",""]],attrs:wt,decls:8,vars:4,consts:[[1,"flex-1","h-1/2","w-full","overflow-auto"],[4,"ngIf","ngIfElse"],["load_state",""],["empty_state",""],[1,"m-4","p-4","rounded","bg-white","shadow","flex","justify-center","items-center","space-x-2"],[1,"flex","flex-col","items-center","flex-1"],[1,"h-full","w-full","flex","flex-col","items-center","p-8"],[1,"mb-4",3,"diameter"],["simple",""]],template:function(s,l){if(1&s&&(e._UZ(0,"reports-options"),e.TgZ(1,"div",0),e.YNc(2,At,3,4,"ng-container",1),e.ALo(3,"async"),e.YNc(4,Zt,4,1,"ng-template",null,2,e.W1O),e.YNc(6,Mt,3,0,"ng-template",null,3,e.W1O),e.qZA()),2&s){const p=e.MAs(5);e.xp6(2),e.Q6J("ngIf",!e.lcZ(3,2,l.loading))("ngIfElse",p)}},dependencies:[Y.O5,_e.Ou,ve,ft,xt,yt,Y.Ov],styles:["h3[_ngcontent-%COMP%]{font-weight:500}p[_ngcontent-%COMP%]:not([simple]){font-size:1.75rem}\n/*# sourceMappingURL=report-desks.component.ts-angular-inline--99.css.map*/"]}),o})();var Ee=U(7237);let be=(()=>{class o{constructor(s){this._reports=s,this.catering_orders=this._reports.bookings.pipe((0,X.U)(l=>(0,i.xH)(l.filter(h=>h.extension_data?.catering?.length).map(h=>h.extension_data?.catering.map(v=>new Ee.GX({...v,deliver_at:h.date,event:h})))).filter(h=>h).sort((h,v)=>h.event?.date-v.event?.date)),(0,re.d)(1)),this.catering_items=this.catering_orders.pipe((0,X.U)(l=>{const p=[];for(const h of l)for(const v of h?.items||[]){const R=p.findIndex(Q=>v.options_string===Q.options_string);R>=0?v[R]=new Ee.Ud({...v,quantity:v?.quantity+v[R]?.quantity}):p.push(v)}return p.sort((h,v)=>v.quantity-h.quantity)})),this.stats=(0,ae.aj)([this.catering_orders,this.catering_items]).pipe((0,X.U)(([l,p])=>{const h=l.reduce((v,R)=>v+R.total_cost,0);return{order_count:l.length,unique_items:p.length,item_count:l.reduce((v,R)=>v+R.item_count,0),total_cost:h,avg_cost:h/l.length}}))}downloadOrders(){var s=this;return(0,T.Z)(function*(){const l=yield s.catering_orders.pipe((0,le.q)(1)).toPromise(),p=(0,i.o3)(l);return(0,i.Sv)("catering-orders.csv",p)})()}}return o.\u0275fac=function(s){return new(s||o)(e.LFG(ee))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),Tt=(()=>{class o{constructor(s,l){this._report=s,this._org=l,this.stats=this._report.stats}get code(){return this._org.currency_code}}return o.\u0275fac=function(s){return new(s||o)(e.Y36(be),e.Y36(k.w7))},o.\u0275cmp=e.Xpm({type:o,selectors:[["catering-report-overall"]],decls:32,vars:21,consts:[[1,"bg-white","dark:bg-neutral-700","shadow","rounded","m-2","px-8","w-48","h-24","flex","flex-col","items-center","justify-center"],["count","",1,"text-3xl"],[1,""],["unique","",1,"text-3xl"],["items","",1,"text-3xl"],["total","",1,"text-3xl"],["average","",1,"text-3xl"]],template:function(s,l){if(1&s&&(e.TgZ(0,"div",0)(1,"div",1),e._uU(2),e.ALo(3,"async"),e.qZA(),e.TgZ(4,"div",2),e._uU(5,"Orders"),e.qZA()(),e.TgZ(6,"div",0)(7,"div",3),e._uU(8),e.ALo(9,"async"),e.qZA(),e.TgZ(10,"div",2),e._uU(11,"Unique Items"),e.qZA()(),e.TgZ(12,"div",0)(13,"div",4),e._uU(14),e.ALo(15,"async"),e.qZA(),e.TgZ(16,"div",2),e._uU(17,"Ordered Items"),e.qZA()(),e.TgZ(18,"div",0)(19,"div",5),e._uU(20),e.ALo(21,"currency"),e.ALo(22,"async"),e.qZA(),e.TgZ(23,"div",2),e._uU(24,"Total"),e.qZA()(),e.TgZ(25,"div",0)(26,"div",6),e._uU(27),e.ALo(28,"currency"),e.ALo(29,"async"),e.qZA(),e.TgZ(30,"div",2),e._uU(31,"Order Average"),e.qZA()()),2&s){let p,h,v,R,Q;e.xp6(2),e.hij(" ",(null==(p=e.lcZ(3,5,l.stats))?null:p.order_count)||"0"," "),e.xp6(6),e.hij(" ",(null==(h=e.lcZ(9,7,l.stats))?null:h.unique_items)||"0"," "),e.xp6(6),e.Oqu((null==(v=e.lcZ(15,9,l.stats))?null:v.item_count)||"0"),e.xp6(6),e.hij(" ",e.xi3(21,11,(null==(R=e.lcZ(22,14,l.stats))?null:R.total_cost)/100||0,l.code)," "),e.xp6(7),e.hij(" ",e.xi3(28,16,(null==(Q=e.lcZ(29,19,l.stats))?null:Q.avg_cost)/100||0,l.code)," ")}},dependencies:[Y.Ov,Y.H9],styles:["[_nghost-%COMP%]{display:flex;flex-wrap:wrap;align-items:center;justify-content:center;padding:.5rem}\n/*# sourceMappingURL=catering-report-overall.component.ts-angular-inline--115.css.map*/"]}),o})();var Ae=U(5504);function St(o,g){if(1&o&&(e._uU(0),e.ALo(1,"date"),e.ALo(2,"date")),2&o){const s=g.data;e.AsE(" ",e.lcZ(1,2,s)," at ",e.xi3(2,4,s,"shortTime")," ")}}function Ut(o,g){if(1&o&&(e._uU(0),e.ALo(1,"currency")),2&o){const s=g.data,l=e.oxw();e.hij(" ",e.xi3(1,1,s/100,l.code)," ")}}const Lt=function(){return["deliver_at","item_count","total_cost"]},Rt=function(){return["Date","Items","Total Cost"]},Et=function(){return["flex"]},kt=function(o,g){return{deliver_at:o,total_cost:g}};let zt=(()=>{class o{constructor(s,l){this._report=s,this._org=l,this.orders=this._report.catering_orders,this.download=()=>this._report.downloadOrders()}get code(){return this._org.currency_code}}return o.\u0275fac=function(s){return new(s||o)(e.Y36(be),e.Y36(k.w7))},o.\u0275cmp=e.Xpm({type:o,selectors:[["catering-report-orders"]],decls:12,vars:12,consts:[[1,"w-[64rem]","max-w-[calc(100%-2rem)]","rounded","overflow-hidden","bg-white","dark:bg-neutral-700","shadow","mx-auto","my-2"],[1,"border-b","border-gray-200","dark:border-neutral-500","flex","items-center","justify-between","px-4"],[1,"py-2","text-xl","font-medium"],["mat-button-icon","","matTooltip","Download list",3,"click"],["empty","No orders for selected period",1,"w-full","h-full",3,"dataSource","columns","display_column","column_size","template","pagination"],["date_state",""],["cost_state",""]],template:function(s,l){if(1&s&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h2",2),e._uU(3,"Orders"),e.qZA(),e.TgZ(4,"button",3),e.NdJ("click",function(){return l.download()}),e.TgZ(5,"app-icon"),e._uU(6,"download"),e.qZA()()(),e._UZ(7,"custom-table",4),e.YNc(8,St,3,7,"ng-template",null,5,e.W1O),e.YNc(10,Ut,2,4,"ng-template",null,6,e.W1O),e.qZA()),2&s){const p=e.MAs(9),h=e.MAs(11);e.xp6(7),e.Q6J("dataSource",l.orders)("columns",e.DdM(6,Lt))("display_column",e.DdM(7,Rt))("column_size",e.DdM(8,Et))("template",e.WLB(9,kt,p,h))("pagination",!0)}},dependencies:[Ae.gM,n.o,ce.C,Y.H9,Y.uU]}),o})();function Nt(o,g){if(1&o&&(e.TgZ(0,"span",7),e._uU(1),e.qZA()),2&o){const s=e.oxw().data,l=e.oxw();e.Q6J("matTooltip",l.options(s)),e.xp6(1),e.hij(" ",s.length," option(s) ")}}function Dt(o,g){1&o&&e.YNc(0,Nt,2,2,"span",6),2&o&&e.Q6J("ngIf",g.data.length)}function It(o,g){if(1&o&&(e._uU(0),e.ALo(1,"currency")),2&o){const s=g.data,l=e.oxw();e.hij(" ",e.xi3(1,1,(s||0)/100,l.code)," ")}}const Pt=function(){return["name","options","quantity","unit_price","total_cost"]},jt=function(){return["Name","Options","Quantity","Unit Price","Total Cost"]},Bt=function(){return["flex"]},Yt=function(o,g,s){return{options:o,unit_price:g,total_cost:s}};let qt=(()=>{class o{constructor(s,l){this._report=s,this._org=l,this.items=this._report.catering_items}get code(){return this._org.currency_code}options(s){return s.map(l=>l.name).join("\n")}}return o.\u0275fac=function(s){return new(s||o)(e.Y36(be),e.Y36(k.w7))},o.\u0275cmp=e.Xpm({type:o,selectors:[["catering-report-items"]],decls:9,vars:13,consts:[[1,"w-[64rem]","max-w-[calc(100%-2rem)]","rounded","overflow-hidden","bg-white","dark:bg-neutral-700","shadow","mx-auto","my-2"],[1,"border-b","border-gray-200","dark:border-neutral-500","flex","items-center","justify-between","px-4"],[1,"py-2","text-xl","font-medium"],["empty","No orders for selected period",1,"w-full","h-full",3,"dataSource","columns","display_column","column_size","template","pagination"],["option_state",""],["cost_state",""],["class","text-xs px-2 py-1 rounded bg-gray-300",3,"matTooltip",4,"ngIf"],[1,"text-xs","px-2","py-1","rounded","bg-gray-300",3,"matTooltip"]],template:function(s,l){if(1&s&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h2",2),e._uU(3,"Ordered Items"),e.qZA()(),e._UZ(4,"custom-table",3),e.YNc(5,Dt,1,1,"ng-template",null,4,e.W1O),e.YNc(7,It,2,4,"ng-template",null,5,e.W1O),e.qZA()),2&s){const p=e.MAs(6),h=e.MAs(8);e.xp6(4),e.Q6J("dataSource",l.items)("columns",e.DdM(6,Pt))("display_column",e.DdM(7,jt))("column_size",e.DdM(8,Bt))("template",e.kEZ(9,Yt,p,h,h))("pagination",!0)}},dependencies:[Y.O5,Ae.gM,ce.C,Y.H9]}),o})();function Jt(o,g){1&o&&(e.TgZ(0,"div",5),e._UZ(1,"catering-report-overall")(2,"catering-report-orders")(3,"catering-report-items"),e.qZA())}function Qt(o,g){if(1&o&&(e.ynx(0),e.YNc(1,Jt,4,0,"div",4),e.ALo(2,"async"),e.BQk()),2&o){const s=e.oxw(),l=e.MAs(7);e.xp6(1),e.Q6J("ngIf",e.lcZ(2,2,s.total_count))("ngIfElse",l)}}function Ft(o,g){1&o&&(e.TgZ(0,"div",6),e._UZ(1,"mat-spinner",7),e.TgZ(2,"p",8),e._uU(3,"Loading report data..."),e.qZA()()),2&o&&(e.xp6(1),e.Q6J("diameter",32))}function Xt(o,g){1&o&&(e.TgZ(0,"div",6)(1,"p",8),e._uU(2," Select levels and time period to generate a report. "),e.qZA()())}let Gt=(()=>{class o{constructor(s){this._state=s,this.total_count=this._state.stats.pipe((0,X.U)(l=>l.count||0)),this.loading=this._state.loading}ngOnInit(){this._state.setOptions({type:"events"})}}return o.\u0275fac=function(s){return new(s||o)(e.Y36(ee))},o.\u0275cmp=e.Xpm({type:o,selectors:[["catering-report"]],decls:8,vars:4,consts:[[1,"flex-1","h-1/2","w-full","overflow-auto"],[4,"ngIf","ngIfElse"],["load_state",""],["empty_state",""],["class","h-full w-full",4,"ngIf","ngIfElse"],[1,"h-full","w-full"],[1,"h-full","w-full","flex","flex-col","items-center","p-8"],[1,"mb-4",3,"diameter"],["simple",""]],template:function(s,l){if(1&s&&(e._UZ(0,"reports-options"),e.TgZ(1,"div",0),e.YNc(2,Qt,3,4,"ng-container",1),e.ALo(3,"async"),e.YNc(4,Ft,4,1,"ng-template",null,2,e.W1O),e.YNc(6,Xt,3,0,"ng-template",null,3,e.W1O),e.qZA()),2&s){const p=e.MAs(5);e.xp6(2),e.Q6J("ngIf",!e.lcZ(3,2,l.loading))("ngIfElse",p)}},dependencies:[Y.O5,_e.Ou,ve,Tt,zt,qt,Y.Ov]}),o})();var ke=U(7895),Ct=U(2606),Vt=U(4266),Wt=U(1265);const xe={};let Ze=(()=>{class o{transform(s){return s?(xe[s]||(xe[s]=(0,M.VE)(s).pipe((0,X.U)(l=>l[0]||new M.mO({id:s,name:s})),(0,ge.K)(l=>(0,ne.of)(new M.mO({id:s,name:s}))),(0,re.d)(1))),xe[s]):(0,ne.of)(null)}static addUser(s){xe[s.id]=(0,ne.of)(s).pipe((0,re.d)(1))}}return o.\u0275fac=function(s){return new(s||o)},o.\u0275pipe=e.Yjl({name:"user",type:o,pure:!0}),o})(),ze=(()=>{class o{constructor(s,l){this._org=s,this._reports=l,this._loading=new te.X(""),this._generate=new te.X(0),this._options=new te.X({start:(0,E.Z)(Date.now()),end:(0,q.Z)(Date.now())}),this.events=(0,ae.aj)([this._options,this._generate]).pipe((0,Ct.x)((p,h)=>p[1]===h[1]),(0,Vt.h)(([p,h])=>!!h),(0,ue.w)(([{start:p,end:h,user:v}])=>{if(!v)return(0,ne.of)([]);this._loading.next("Loading contact events...");const R=(0,x.rTZ)(this.system_id,"ContactTracing");return v=v||(0,i.ar)(),Ze.addUser(v),this.system_id&&R?R.execute("close_contacts",[v.email,v.username,(0,ke.Z)(p),(0,ke.Z)(h)]).catch(Q=>((0,i.cB)(`${Q?.msg||JSON.stringify(Q)}`),[])):(0,ne.of)([])}),(0,X.U)(p=>{const h=this._options.getValue().user||(0,i.ar)();return p.map(v=>({mac_address:v.mac_address,date:1e3*v.contact_time,duration:Math.floor(v.duration/60)||0,user_id:h.id,user:h.name,contact_id:v.username,distance:1}))}),(0,ge.K)(p=>((0,i.cB)(`${p?.msg||JSON.stringify(p)}`),(0,ne.of)([]))),(0,Wt.b)(p=>this._loading.next("")),(0,re.d)(1)),this.options=this._options.asObservable(),this.loading=this._loading.asObservable()}get system_id(){return this._org.binding("contact_tracing")}setOptions(s){this._options.next({...this._options.getValue(),...s})}generateReport(){this._generate.next(Date.now())}downloadReport(){var s=this;return(0,T.Z)(function*(){const{start:l,end:p}=yield s._reports.options.pipe((0,le.q)(1)).toPromise(),h=yield s.events.pipe((0,le.q)(1)).toPromise(),v=new Ze,R=yield Promise.all(h.map(function(){var Q=(0,T.Z)(function*(B){return{"MAC Address":B.mac_address,Date:(0,V.Z)(B.date,"dd MMM yyyy, h:mm a"),"User Name":B.user,"Contact Name":(yield v.transform(B.contact_id).toPromise())?.name||("null"!==B.contact_id?B.contact_id:null)||B.mac_address,Duration:`${Math.floor(B.duration/60)?Math.floor(B.duration/60)+"h ":""}${Math.floor(B.duration%60)+"m"}`,Distance:B.distance}});return function(B){return Q.apply(this,arguments)}}()));(0,i.Sv)(`report+contact-tracing+${(0,V.Z)(l,"yyyy-MM-dd")}+${(0,V.Z)(p,"yyyy-MM-dd")}.csv`,(0,i.o3)(R))})()}}return o.\u0275fac=function(s){return new(s||o)(e.LFG(k.w7),e.LFG(ee))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var Ht=U(9697);let $t=(()=>{class o{constructor(s){this._state=s,this.options=this._state.options,this.setOptions=l=>this._state.setOptions(l),this.generate=()=>this._state.generateReport()}}return o.\u0275fac=function(s){return new(s||o)(e.Y36(ze))},o.\u0275cmp=e.Xpm({type:o,selectors:[["contact-tracing-options"]],decls:15,vars:14,consts:[[1,"flex","items-center","space-x-2","w-full","p-2","bg-white","dark:bg-neutral-700","shadow"],["appearance","outline",1,"w-[18rem]"],[3,"rangePicker"],["matStartDate","","placeholder","Start date",3,"ngModel","ngModelChange"],["matEndDate","","placeholder","End date",3,"ngModel","ngModelChange"],["matSuffix","",3,"for"],["picker",""],["placeholder","Search for user to trace...",1,"w-64","h-12","mb-2","mt-1",3,"ngModel","ngModelChange"],["mat-button","",3,"disabled","click"]],template:function(s,l){if(1&s&&(e.TgZ(0,"div",0)(1,"mat-form-field",1)(2,"mat-date-range-input",2)(3,"input",3),e.NdJ("ngModelChange",function(h){return h?l.setOptions({start:h,user:null}):""}),e.ALo(4,"async"),e.qZA(),e.TgZ(5,"input",4),e.NdJ("ngModelChange",function(h){return h?l.setOptions({end:h,user:null}):""}),e.ALo(6,"async"),e.qZA()(),e._UZ(7,"mat-datepicker-toggle",5)(8,"mat-date-range-picker",null,6),e.qZA(),e.TgZ(10,"a-user-search-field",7),e.NdJ("ngModelChange",function(h){return l.setOptions({user:h})}),e.ALo(11,"async"),e.qZA(),e.TgZ(12,"button",8),e.NdJ("click",function(){return l.generate()}),e.ALo(13,"async"),e._uU(14," Generate Report "),e.qZA()()),2&s){const p=e.MAs(9);let h,v,R,Q;e.xp6(2),e.Q6J("rangePicker",p),e.xp6(1),e.Q6J("ngModel",null==(h=e.lcZ(4,6,l.options))?null:h.start),e.xp6(2),e.Q6J("ngModel",null==(v=e.lcZ(6,8,l.options))?null:v.end),e.xp6(2),e.Q6J("for",p),e.xp6(3),e.Q6J("ngModel",null==(R=e.lcZ(11,10,l.options))?null:R.user),e.xp6(2),e.Q6J("disabled",!(null!=(Q=e.lcZ(13,12,l.options))&&Q.user))}},dependencies:[G.Fj,G.JJ,G.On,ie.lW,he.KE,he.R9,oe.nW,oe.wx,oe.zY,oe.By,oe._g,Ht.d,Y.Ov],styles:["mat-form-field[_ngcontent-%COMP%]{height:3.25rem}\n/*# sourceMappingURL=contact-tracing-options.component.ts-angular-inline--118.css.map*/"]}),o})();function Kt(o,g){if(1&o&&(e.TgZ(0,"span",16),e._uU(1),e.qZA()),2&o){const s=e.oxw().data,l=e.oxw(3);e.Q6J("matTooltip",l.options(s)),e.xp6(1),e.hij(" ",s.length," option(s) ")}}function en(o,g){1&o&&e.YNc(0,Kt,2,2,"span",15),2&o&&e.Q6J("ngIf",g.data.length)}function tn(o,g){if(1&o&&(e._uU(0),e.ALo(1,"async"),e.ALo(2,"user")),2&o){const l=g.row;let p;e.Oqu((null==(p=e.lcZ(1,1,e.lcZ(2,3,g.data)))?null:p.name)||l.mac_address)}}function nn(o,g){if(1&o&&(e._uU(0),e.ALo(1,"date"),e.ALo(2,"date")),2&o){const s=g.data;e.AsE(" ",e.xi3(1,2,s,"mediumDate"),", ",e.xi3(2,5,s,"shortTime")," ")}}function on(o,g){if(1&o&&e._uU(0),2&o){const s=g.data,l=e.oxw(3);e.hij(" ",l.formatDuration(s||0)||"Less than a minute"," ")}}function sn(o,g){1&o&&e._uU(0),2&o&&e.hij(" ",g.data,"m ")}const rn=function(){return["date","user_id","contact_id","duration"]},an=function(){return["Time of Contact","Person","Close Contact","Duration"]},ln=function(){return["12r","14r","flex","10r"]},cn=function(o,g,s,l,p,h){return{options:o,date:g,distance:s,user_id:l,contact_id:p,duration:h}};function un(o,g){if(1&o&&(e.TgZ(0,"div",6)(1,"div",7)(2,"h2",8),e._uU(3,"Contact Events"),e.qZA()(),e._UZ(4,"custom-table",9),e.YNc(5,en,1,1,"ng-template",null,10,e.W1O),e.YNc(7,tn,3,5,"ng-template",null,11,e.W1O),e.YNc(9,nn,3,8,"ng-template",null,12,e.W1O),e.YNc(11,on,1,1,"ng-template",null,13,e.W1O),e.YNc(13,sn,1,1,"ng-template",null,14,e.W1O),e.qZA()),2&o){const s=e.MAs(6),l=e.MAs(8),p=e.MAs(10),h=e.MAs(12),v=e.MAs(14),R=e.oxw(2);e.xp6(4),e.Q6J("dataSource",R.tracing_events)("columns",e.DdM(7,rn))("display_column",e.DdM(8,an))("column_size",e.DdM(9,ln))("template",e.HTZ(10,cn,s,p,v,l,l,h))("pagination",!0)("page_size",30)}}function dn(o,g){if(1&o&&(e.ynx(0),e.YNc(1,un,15,17,"div",5),e.ALo(2,"async"),e.BQk()),2&o){const s=e.oxw(),l=e.MAs(10);let p;e.xp6(1),e.Q6J("ngIf",null==(p=e.lcZ(2,2,s.options))?null:p.user)("ngIfElse",l)}}function pn(o,g){if(1&o&&(e.TgZ(0,"div",17),e._UZ(1,"map-spinner",18),e.TgZ(2,"p"),e._uU(3),e.ALo(4,"async"),e.qZA()()),2&o){const s=e.oxw();e.xp6(3),e.Oqu(e.lcZ(4,1,s.loading))}}function fn(o,g){1&o&&(e.TgZ(0,"div",17)(1,"p",19),e._uU(2,"Select a user from the topbar to begin"),e.qZA()())}const mn=[{path:"",component:j,children:[{path:"",component:ve},{path:"spaces",component:at},{path:"desks",component:Ot},{path:"catering",component:Gt},{path:"contact-tracing",component:(()=>{class o{constructor(s){this._state=s,this.loading=this._state.loading,this.options=this._state.options,this.tracing_events=this._state.events,this.setOptions=l=>this._state.setOptions(l),this.downloadReport=()=>this._state.downloadReport(),this.formatDuration=l=>(0,Le.Z)({hours:Math.floor(l/60),minutes:l%60})}}return o.\u0275fac=function(s){return new(s||o)(e.Y36(ze))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-contact-tracing-report"]],decls:11,vars:4,consts:[[1,"flex-1","h-1/2","w-full","overflow-auto"],[4,"ngIf","ngIfElse"],["mat-icon-button","","matTooltip","Download Report",1,"bg-white","dark:bg-neutral-700","absolute","bottom-2","left-2","shadow",3,"click"],["load_state",""],["empty_state",""],["class","w-[64rem] max-w-[calc(100%-2rem)] rounded overflow-hidden bg-white dark:bg-neutral-700 shadow mx-auto my-2",4,"ngIf","ngIfElse"],[1,"w-[64rem]","max-w-[calc(100%-2rem)]","rounded","overflow-hidden","bg-white","dark:bg-neutral-700","shadow","mx-auto","my-2"],[1,"border-b","border-gray-200","dark:border-neutral-500","flex","items-center","justify-between","px-4"],[1,"py-2","text-xl","font-medium"],["empty","No contact records for selected period",1,"w-full","h-full",3,"dataSource","columns","display_column","column_size","template","pagination","page_size"],["option_state",""],["user_state",""],["date_state",""],["duration_state",""],["distance_state",""],["class","text-xs px-2 py-1 rounded bg-gray-300 dark:bg-neutral-600",3,"matTooltip",4,"ngIf"],[1,"text-xs","px-2","py-1","rounded","bg-gray-300","dark:bg-neutral-600",3,"matTooltip"],[1,"p-8","flex","flex-col","items-center","justify-center","space-y-2"],["diameter","32"],[1,"opacity-60"]],template:function(s,l){if(1&s&&(e._UZ(0,"contact-tracing-options"),e.TgZ(1,"div",0),e.YNc(2,dn,3,4,"ng-container",1),e.ALo(3,"async"),e.qZA(),e.TgZ(4,"button",2),e.NdJ("click",function(){return l.downloadReport()}),e.TgZ(5,"app-icon"),e._uU(6,"download"),e.qZA()(),e.YNc(7,pn,5,3,"ng-template",null,3,e.W1O),e.YNc(9,fn,3,0,"ng-template",null,4,e.W1O)),2&s){const p=e.MAs(8);e.xp6(2),e.Q6J("ngIf",!e.lcZ(3,2,l.loading))("ngIfElse",p)}},dependencies:[Y.O5,ie.lW,Ae.gM,n.o,ce.C,$t,Y.Ov,Y.uU,Ze],styles:["[_nghost-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column}\n/*# sourceMappingURL=contact-tracing-report.component.ts-angular-inline--117.css.map*/"]}),o})()},{path:"**",redirectTo:"desks",pathMatch:"full"}]}];let gn=(()=>{class o{}return o.\u0275fac=function(s){return new(s||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[Y.ez,G.u5,t.v,Z.YR,M.PP,S.TU,P.Bz.forChild(mn)]}),o})()}}]);
//# sourceMappingURL=apps_concierge_src_app_reports_reports_module_ts.js.map