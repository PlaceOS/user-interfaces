"use strict";(self.webpackChunkconcierge=self.webpackChunkconcierge||[]).push([["apps_concierge_src_app_reports_reports_module_ts"],{9986:(Oe,yt,g)=>{g.r(yt),g.d(yt,{ReportsModule:()=>Ii});var y=g(60316),W=g(34456),V=g(26842),Nt=g(40363),Lt=g(24624),t=g(68559),ie=g(74605),_=g(82333),O=g(85060),U=g(69434);const M=()=>["/reports","desks"],Ae=()=>["/reports","bookings"],Se=()=>["/reports","catering"],Ne=()=>["/reports","contact-tracing"],Le=s=>["/reports",s];function De(s,i){1&s&&(t.j41(0,"a",4)(1,"app-icon",5),t.EFF(2,"room"),t.k0s(),t.j41(3,"h3",6),t.EFF(4,"Desks"),t.k0s(),t.j41(5,"div",7)(6,"p"),t.EFF(7,"View Report"),t.k0s(),t.j41(8,"app-icon",8),t.EFF(9,"chevron_right"),t.k0s()()()),2&s&&t.Y8G("routerLink",t.lJ4(1,M))}function Ge(s,i){1&s&&(t.j41(0,"a",4)(1,"app-icon",5),t.EFF(2,"meeting_room"),t.k0s(),t.j41(3,"h3",6),t.EFF(4,"Rooms"),t.k0s(),t.j41(5,"div",7)(6,"p"),t.EFF(7,"View Report"),t.k0s(),t.j41(8,"app-icon",8),t.EFF(9,"chevron_right"),t.k0s()()()),2&s&&t.Y8G("routerLink",t.lJ4(1,Ae))}function Be(s,i){1&s&&(t.j41(0,"a",4)(1,"app-icon",5),t.EFF(2,"room_service"),t.k0s(),t.j41(3,"h3",6),t.EFF(4,"Catering"),t.k0s(),t.j41(5,"div",7)(6,"p"),t.EFF(7,"View Report"),t.k0s(),t.j41(8,"app-icon",8),t.EFF(9,"chevron_right"),t.k0s()()()),2&s&&t.Y8G("routerLink",t.lJ4(1,Se))}function Ve(s,i){1&s&&(t.j41(0,"a",4)(1,"app-icon",5),t.EFF(2,"connect_without_contact"),t.k0s(),t.j41(3,"h3",6),t.EFF(4,"Contact Tracing"),t.k0s(),t.j41(5,"div",7)(6,"p"),t.EFF(7,"View Report"),t.k0s(),t.j41(8,"app-icon",8),t.EFF(9,"chevron_right"),t.k0s()()()),2&s&&t.Y8G("routerLink",t.lJ4(1,Ne))}function Ue(s,i){if(1&s&&(t.j41(0,"a",4)(1,"app-icon",5),t.EFF(2),t.k0s(),t.j41(3,"h3",6),t.EFF(4),t.k0s(),t.j41(5,"div",7)(6,"p"),t.EFF(7,"View Report"),t.k0s(),t.j41(8,"app-icon",8),t.EFF(9,"chevron_right"),t.k0s()()()),2&s){const e=i.$implicit;t.Y8G("routerLink",t.eq3(3,Le,e.id)),t.R7$(2),t.JRh(e.icon),t.R7$(2),t.JRh(e.name)}}const ze=["desks","spaces","catering","contact-tracing"];let oe=(()=>{class s{get custom_reports(){return this._settings.get("app.custom_reports")||[]}get features(){return this._settings.get("app.reports.features")||ze}constructor(e){this._settings=e}static#t=this.\u0275fac=function(n){return new(n||s)(t.rXU(_.h$))};static#e=this.\u0275cmp=t.VBU({type:s,selectors:[["reports-menu"],["","reports-menu",""]],decls:7,vars:5,consts:[[1,"absolute","inset-0","flex","items-center","justify-center","bg-base-200","overflow-auto"],[1,"grid","w-full","justify-items-center"],["matRipple","","class","h-64 w-64 p-4 flex flex-col items-center justify-center bg-base-100 rounded shadow hover:opacity-80 border border-base-200",3,"routerLink",4,"ngIf"],["matRipple","","class","h-64 w-64 p-4 flex flex-col items-center justify-center bg-base-100 rounded shadow hover:opacity-80 border border-base-200",3,"routerLink",4,"ngFor","ngForOf"],["matRipple","",1,"h-64","w-64","p-4","flex","flex-col","items-center","justify-center","bg-base-100","rounded","shadow","hover:opacity-80","border","border-base-200",3,"routerLink"],[1,"text-8xl"],[1,"text-xl","font-bold","mb-4"],[1,"flex","items-center"],[1,"ml-2"]],template:function(n,o){1&n&&(t.j41(0,"div",0)(1,"div",1),t.DNE(2,De,10,2,"a",2)(3,Ge,10,2,"a",2)(4,Be,10,2,"a",2)(5,Ve,10,2,"a",2)(6,Ue,10,5,"a",3),t.k0s()()),2&n&&(t.R7$(2),t.Y8G("ngIf",o.features.includes("desks")),t.R7$(),t.Y8G("ngIf",o.features.includes("spaces")),t.R7$(),t.Y8G("ngIf",o.features.includes("catering")),t.R7$(),t.Y8G("ngIf",o.features.includes("contact-tracing")),t.R7$(),t.Y8G("ngForOf",o.custom_reports))},dependencies:[y.Sq,y.bT,O.r6,U.R,V.Wk],styles:["[_nghost-%COMP%]{display:flex;flex-direction:row!important;align-items:center;justify-content:center;background:inherit}.grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(16rem,1fr));gap:1rem}\n\n/*# sourceMappingURL=reports-menu.component.ts-angular-inline--136.css.map*/"]})}return s})();const $e=["app-reports",""];function Ye(s,i){1&s&&t.nrm(0,"div",3)}let Xe=(()=>{class s{get path(){const e=this._router.url.split("/");return e[e.length-1]}constructor(e){this._router=e}static#t=this.\u0275fac=function(n){return new(n||s)(t.rXU(V.Ix))};static#e=this.\u0275cmp=t.VBU({type:s,selectors:[["","app-reports",""]],attrs:$e,decls:4,vars:1,consts:[[1,"h-full","screen-only"],[1,"relative","overflow-hidden","flex","flex-col","flex-1","w-1/2","h-full","bg-base-200"],["reports-menu","","class","absolute inset-0 screen-only",4,"ngIf"],["reports-menu","",1,"absolute","inset-0","screen-only"]],template:function(n,o){1&n&&(t.nrm(0,"sidebar",0),t.j41(1,"main",1),t.nrm(2,"router-outlet"),t.DNE(3,Ye,1,0,"div",2),t.k0s()),2&n&&(t.R7$(3),t.Y8G("ngIf","reports"===o.path))},dependencies:[y.bT,ie.k,V.n3,oe],styles:["[_nghost-%COMP%]{display:flex;height:100%;width:100%}main[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:not(router-outlet){display:flex;flex-direction:column;width:100%;height:100%}\n\n/*# sourceMappingURL=reports.component.ts-angular-inline--132.css.map*/"]})}return s})();var re=g(22168),bt=g(68390),A=g(89204),w=g(35443),Pe=g(57871),Q=g(12185),ae=g(3998),Je=g(57915),Dt=g(68113),z=g(83866),le=g(38216),tt=g(27419),He=g(53838),et=g(13264),lt=g(88402),xt=g(67450),We=g(92561),Qe=g(33119),st=g(90521),Z=g(71536),Ze=g(68757),$=g(42175),wt=g(19803),it=g(71963),ct=g(29314),Y=g(7841),tn=g(22011);const Gt={0:"sunday",1:"monday",2:"tuesday",3:"wednesday",4:"thurday",5:"friday",6:"saturday"};let S=(()=>{class s{get duration(){const e=this._options.getValue(),n=this._settings.get("app.reports.ignore_days")?.map(l=>"string"==typeof l?l.toLowerCase():(0,z.A)((0,le.A)(new Date,l),"eeee").toLowerCase())||[];let o=(0,tt.A)(e.start);const r=(0,He.A)((0,et.A)(e.end),1);let a=0;for(;o.valueOf()<r.valueOf();)n.includes(Gt[o.getDay()])||a++,o=(0,lt.A)(o,1);return Math.max(1,a)}constructor(e,n){var o=this;this._org=e,this._settings=n,this._space_pipe=new tn.J(this._org),this._generate=new Qe.B7,this._loading=new st.t(""),this._active_bookings=new st.t([]),this._options=new st.t({start:new Date,end:new Date}),this._bookings_list=this._generate.pipe((0,wt.B)(500),(0,it.n)(r=>{const a=this._options.getValue();if(this._loading.next("Loading report details..."),!a?.type&&!a?.zones?.length)return(0,Z.of)([]);const l=(0,tt.A)(a.start||Date.now()),c=(0,et.A)(a.end||l),p=a?.zones?a.zones.filter(f=>"All"!==f).join(","):"",u={period_start:(0,xt.A)(l),period_end:(0,xt.A)(c)};return"desks"===a.type?(0,Je.u3)({...u,zones:p,type:"desk",limit:1e3}):(0,Dt.dP)({...u,zone_ids:p,limit:1e3}).pipe((0,it.n)(function(){var f=(0,A.A)(function*(d){return Promise.all(d.map(function(){var h=(0,A.A)(function*(m){return new Dt.LR({...m,resources:(yield Promise.all(m.resources.map(x=>o._space_pipe.transform(x.id||x.email)))).filter(x=>a.zones.find(v=>x.zones.includes(v)))})});return function(m){return h.apply(this,arguments)}}()))});return function(d){return f.apply(this,arguments)}}()))}),(0,ct.W)(r=>[]),(0,w.T)(r=>{this._loading.next(""),r?.length||(0,_.UG)("No bookings for the selected levels and period");const a=this._settings.get("app.reports.ignore_days")?.map(l=>"string"==typeof l?l.toLowerCase():(0,z.A)((0,le.A)(new Date,l),"eeee").toLowerCase())||[];return r=r.filter(l=>!a.includes(Gt[new Date(l.date).getDay()])),this._active_bookings.next(r||[]),r}),(0,Y.t)(1)),this.loading=this._loading.asObservable(),this.options=this._options.asObservable(),this.bookings=this._active_bookings.asObservable(),this.spaces=this._options.pipe((0,it.n)(({zones:r})=>{const a=this._settings.get("app.use_region");return r?.length||(r=[(a?this._org.building?.parent_id:this._org.building?.id)||this._org.building?.id]),(0,Ze.p)(r.map(l=>(0,re.Ot)(l).pipe((0,ct.W)(()=>(0,Z.of)([])))))}),(0,w.T)(r=>(0,_.Bq)(r)),(0,Y.t)(1)),this.counts=this._options.pipe((0,wt.B)(500),(0,it.n)(r=>{const a=(r.zones||[]).filter(l=>-1!==l&&"All"!==l);return"events"===r.type?this.spaces.pipe((0,w.T)(l=>a.map(c=>[c,l.filter(p=>p.zones.includes(c)).length]))):Promise.all(a.map(l=>(0,ae.bpY)(l,"desks").pipe((0,w.T)(c=>[l,c.details.length])).toPromise()))}),(0,ct.W)(r=>[]),(0,w.T)(r=>{const a={};return this._active_bookings.next([]),r.forEach(([l,c])=>a[l]=c),a}),(0,Y.t)()),this.stats=(0,$.zV)([this.counts,this.bookings]).pipe((0,it.n)(function(){var r=(0,A.A)(function*([a,l]){return l[0]instanceof Dt.LR?function qe(s,i=8,e={}){i=Math.max(1,i);const n=s.reduce((c,p)=>c+p.attendees.length,0),o=s.reduce((c,p)=>c+p.system?.capacity,0),r=Math.floor(s.reduce((c,p)=>c+p.duration,0)/(60*i)*100)/100,a=Math.floor(n/o*100)/100,l=Object.keys(e).reduce((c,p)=>c+(e[p]||0),0);return{count:s.length,avg_length:Math.floor(s.reduce((c,p)=>c+p.duration,0)/s.length*100)/100,efficiency:Math.floor((r+a)/2*100)/100,total:l,total_users:n,total_capacity:o,occupancy:a,utilisation:r,events:s}}(l,8*o.duration,a):function Ke(s,i=1,e={}){i=Math.max(1,i);const n=Object.keys(e).reduce((r,a)=>r+(e[a]||0),0),o=Math.floor(s.length/n/i*1e4)/1e4;return{total:n,count:s.length,utilisation:o,events:s}}(l||[],o.duration,a)});return function(a){return r.apply(this,arguments)}}())),this.day_list=(0,$.zV)([this.options,this.stats]).pipe((0,w.T)(([r,a])=>{const{start:l}=r;let c=(0,tt.A)(l);const p=(0,et.A)(r.end||c),u=[],f=this._settings.get("app.reports.ignore_days")?.map(d=>d.toLowerCase())||[];for(console.log("Stats:",a);(0,We.A)(c,p);){if(f.includes(Gt[c.getDay()])){c=(0,lt.A)(c,1);continue}const d=(0,tt.A)(c).valueOf(),h=(0,et.A)(d).valueOf(),m=a.events.filter(v=>(0,_.dH)(d,h,v.date,v.date+60*v.duration*1e3)),x="desks"===r.type?(0,_.Am)(m,"system_id").length:(0,_.Am)(m,"asset_id").length;u.push({date:d,total:a.total,usage:x,free:a.total-m.length,approved:m.reduce((v,T)=>v+(T.approved||"approved"===T.status?1:0),0),count:m.length,utilisation:(m.length/a.total*100).toFixed(1)}),c=(0,lt.A)(c,1)}return u}),(0,Y.t)(1)),this._bookings_list.subscribe(r=>r)}generateReport(){this._generate.next((new Date).valueOf())}setOptions(e){e.zones?.includes("All")?e.zones=["All",...this._org.levelsForBuilding(this._org.building).map(n=>n.id)]:e.zones&&this._options.getValue()?.zones?.includes("All")&&(e.zones=[]),e.start?.valueOf()!==this._options.getValue().start?.valueOf()&&e.end?.valueOf()!==this._options.getValue().end?.valueOf()&&this._options.next({...this._options.getValue(),...e})}downloadReport(){const e=this._options.getValue(),n=this._active_bookings.getValue();(0,_.PE)(`report+${e.type}+${(0,z.A)(e.start,"yyyy-MM-dd")}+${(0,z.A)(e.end,"yyyy-MM-dd")}.tsv`,(0,_.SL)(n.map(o=>{const r=o.toJSON();return delete r.zones,delete r.server_names,delete r.extension_data,r}),"\t"))}static#t=this.\u0275fac=function(n){return new(n||s)(t.KVO(Q.yb),t.KVO(_.h$))};static#e=this.\u0275prov=t.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();var Bt=g(24950),en=g(25175),Rt=g(41134),nn=g(5472),sn=g(56062);function on(s,i){if(1&s&&(t.j41(0,"div",14),t.EFF(1),t.nI1(2,"building"),t.j41(3,"span",15),t.EFF(4," - "),t.k0s()()),2&s){let e;const n=t.XpG().$implicit;t.R7$(),t.SpI(" ",null==(e=t.bMT(2,1,n.parent_id))?null:e.display_name," ")}}function rn(s,i){if(1&s&&(t.j41(0,"mat-option",11)(1,"div",12),t.DNE(2,on,5,3,"div",13),t.j41(3,"div"),t.EFF(4),t.k0s()()()),2&s){const e=i.$implicit,n=t.XpG();t.Y8G("value",e.id),t.R7$(2),t.Y8G("ngIf",n.use_region),t.R7$(2),t.JRh(e.display_name||e.name)}}function an(s,i){1&s&&t.nrm(0,"mat-spinner",16),2&s&&t.Y8G("diameter",32)}function ln(s,i){1&s&&(t.j41(0,"p"),t.EFF(1,"Generate Report"),t.k0s())}function cn(s,i){if(1&s){const e=t.RV6();t.j41(0,"button",17),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.print())}),t.j41(1,"app-icon"),t.EFF(2,"print"),t.k0s()()}}let Ct=(()=>{class s extends _.Tv{get use_region(){return!!this._settings.get("app.use_region")}constructor(e,n,o,r,a){super(),this._state=e,this._org=n,this._settings=o,this._route=r,this._router=a,this.printing=new t.bkB,this.zones=[],this.types=[{id:"internal",name:"Internal"},{id:"external",name:"External"},{id:"cancelled",name:"Cancelled"}],this.type_list=this.types.map(l=>`${l.id}`),this.levels=(0,$.zV)([this._org.active_building,this._org.active_region]).pipe((0,w.T)(([l,c])=>this._settings.get("app.use_region")?this._org.levelsForRegion(c):this._org.levelsForBuilding(l))),this.loading=this._state.loading,this.bookings=this._state.bookings,this.options=this._state.options,this.page="",this.generateReport=()=>this._state.generateReport(),this.downloadReport=()=>this._state.downloadReport(),this.setStartDate=l=>{l instanceof Date&&(l=l.valueOf()),this._router.navigate([],{relativeTo:this._route,queryParams:{start:l},queryParamsHandling:"merge"})},this.setEndDate=l=>{l instanceof Date&&(l=l.valueOf()),this._router.navigate([],{relativeTo:this._route,queryParams:{end:l},queryParamsHandling:"merge"})},this.setZones=l=>{this._state.setOptions({zones:l}),this._router.navigate([],{relativeTo:this._route,queryParams:{zone_ids:l.join(",")},queryParamsHandling:"merge"})}}ngOnInit(){var e=this;return(0,A.A)(function*(){yield e._org.initialised.pipe((0,Pe.$)(n=>n)).toPromise(),e.page=e._router.url,e.subscription("routing",e._router.events.subscribe(()=>{e.page=e._router.url})),e.subscription("route.query",e._route.queryParamMap.subscribe(n=>{if(n.has("zone_ids")){const o=n.get("zone_ids").split(",");if(o.length){const r=e._org.levelWithID(o);if(!r)return;e._org.building=e._org.buildings.find(a=>a.id===r.parent_id),e.setZones(o)}}n.has("start")&&e._state.setOptions({start:new Date(+n.get("start"))}),n.has("end")&&e._state.setOptions({end:new Date(+n.get("end"))})}))})()}print(){this.printing.emit(!0),setTimeout(()=>{window.print(),this.printing.emit(!1)},300)}static#t=this.\u0275fac=function(n){return new(n||s)(t.rXU(S),t.rXU(Q.yb),t.rXU(_.h$),t.rXU(V.nX),t.rXU(V.Ix))};static#e=this.\u0275cmp=t.VBU({type:s,selectors:[["reports-options"]],outputs:{printing:"printing"},features:[t.Vt3],decls:25,vars:27,consts:[["startDate",""],["endDate",""],[1,"bg-base-100","h-20","w-full","flex","items-center","space-x-4","p-2","shadow","z-20","border-b","border-base-200","print:hidden"],["appearance","outline",1,"w-60","no-subscript"],["placeholder","All Levels","multiple","",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"ngModelChange","ngModel"],["btn","","matRipple","",3,"click","disabled"],[3,"diameter",4,"ngIf"],[4,"ngIf"],["icon","","matRipple","","class","h-12 w-12 rounded bg-secondary text-secondary-content",3,"click",4,"ngIf"],[3,"value"],[1,"flex","flex-col-reverse"],["class","text-xs opacity-30",4,"ngIf"],[1,"text-xs","opacity-30"],[1,"opacity-0"],[3,"diameter"],["icon","","matRipple","",1,"h-12","w-12","rounded","bg-secondary","text-secondary-content",3,"click"]],template:function(n,o){if(1&n){const r=t.RV6();t.j41(0,"div",2)(1,"mat-form-field",3)(2,"mat-select",4),t.mxI("ngModelChange",function(l){return t.eBV(r),t.DH7(o.zones,l)||(o.zones=l),t.Njj(l)}),t.bIt("ngModelChange",function(l){return t.eBV(r),t.Njj(o.setZones(l))}),t.DNE(3,rn,5,3,"mat-option",5),t.nI1(4,"async"),t.k0s()(),t.j41(5,"date-range-field")(6,"input",6,0),t.nI1(8,"async"),t.bIt("ngModelChange",function(l){return t.eBV(r),t.Njj(l?o.setStartDate(l):"")}),t.k0s(),t.j41(9,"input",6,1),t.nI1(11,"async"),t.bIt("ngModelChange",function(l){return t.eBV(r),t.Njj(l?o.setEndDate(l):"")}),t.k0s()(),t.j41(12,"button",7),t.nI1(13,"async"),t.nI1(14,"async"),t.bIt("click",function(){return t.eBV(r),t.Njj(o.generateReport())}),t.DNE(15,an,1,1,"mat-spinner",8),t.nI1(16,"async"),t.DNE(17,ln,2,0,"p",9),t.nI1(18,"async"),t.k0s(),t.j41(19,"button",7),t.nI1(20,"async"),t.bIt("click",function(){return t.eBV(r),t.Njj(o.downloadReport())}),t.j41(21,"p"),t.EFF(22,"Download Data"),t.k0s()(),t.DNE(23,cn,3,0,"button",10),t.nI1(24,"async"),t.k0s()}if(2&n){let r,a,l,c,p;t.R7$(2),t.R50("ngModel",o.zones),t.R7$(),t.Y8G("ngForOf",t.bMT(4,9,o.levels)),t.R7$(3),t.Y8G("ngModel",null==(r=t.bMT(8,11,o.options))?null:r.start),t.R7$(3),t.Y8G("ngModel",null==(a=t.bMT(11,13,o.options))?null:a.end),t.R7$(3),t.Y8G("disabled",!!t.bMT(13,15,o.loading)||!(null!=(l=t.bMT(14,17,o.options))&&null!=l.zones&&l.zones.length)),t.R7$(3),t.Y8G("ngIf",t.bMT(16,19,o.loading)),t.R7$(2),t.Y8G("ngIf",!t.bMT(18,21,o.loading)),t.R7$(2),t.Y8G("disabled",!(null!=(c=t.bMT(20,23,o.bookings))&&c.length)),t.R7$(4),t.Y8G("ngIf",null==(p=t.bMT(24,25,o.bookings))?null:p.length)}},dependencies:[y.Sq,y.bT,W.me,W.BC,W.vS,Bt.rl,en.VO,O.wT,Rt.LG,O.r6,nn.T,U.R,y.Jj,sn.b],styles:["button[_ngcontent-%COMP%]{min-width:0;padding:0 .85rem}mat-slide-toggle[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:5.5em;white-space:initial;line-height:1.2em}\n\n/*# sourceMappingURL=reports-options.component.ts-angular-inline--133.css.map*/"]})}return s})();var Et=g(74846),pn=g(25395),un=g(26078),ce=g(60150),Vt=g(59103),pe=g(64507);function dn(s){(0,pe.A)(1,arguments);var e=(0,Vt.A)(s).getDay();return 0===e||6===e}var mn=g(13144),Ut=g(5689);function fn(s,i){if(1&s&&(t.j41(0,"div",3)(1,"div",4)(2,"h3"),t.EFF(3,"No show count"),t.k0s(),t.j41(4,"p"),t.EFF(5),t.nI1(6,"async"),t.k0s()(),t.j41(7,"div",4)(8,"h3"),t.EFF(9,"% of No show Bookings"),t.k0s(),t.j41(10,"p"),t.EFF(11),t.nI1(12,"async"),t.k0s()(),t.j41(13,"div",4)(14,"h3"),t.EFF(15,"Total in-room attendance"),t.k0s(),t.j41(16,"p"),t.EFF(17),t.nI1(18,"async"),t.k0s()()()),2&s){const e=t.XpG();t.R7$(5),t.JRh(t.bMT(6,3,e.no_shows)||0),t.R7$(6),t.SpI("",t.bMT(12,5,e.no_show_percent)||0,"%"),t.R7$(6),t.JRh(t.bMT(18,7,e.attendance)||0)}}let gn=(()=>{class s{constructor(e){this._state=e,this.business_days=this._state.options.pipe((0,w.T)(({start:n,end:o})=>function hn(s,i){(0,pe.A)(2,arguments);var e=(0,Vt.A)(s),n=(0,Vt.A)(i);if(!(0,ce.A)(e)||!(0,ce.A)(n))return NaN;var o=(0,pn.A)(e,n),r=o<0?-1:1,a=(0,mn.A)(o/7),l=5*a;for(n=(0,lt.A)(n,7*a);!(0,un.A)(e,n);)l+=dn(n)?0:r,n=(0,lt.A)(n,r);return 0===l?0:l}((0,tt.A)(o||Date.now()),(0,et.A)(n||Date.now()))||1)),this.total_count=this._state.stats.pipe((0,w.T)(n=>n.count||0)),this.avg_length=this._state.stats.pipe((0,w.T)(n=>(0,Ut.A)({minutes:Math.floor(n.avg_length||0)}))),this.attendance=this._state.stats.pipe((0,w.T)(({events:n})=>n.reduce((o,{extension_data:r})=>o+(+r?.people_count?.max||0),0))),this.no_shows=this._state.stats.pipe((0,w.T)(({events:n})=>n.reduce((o,{extension_data:r})=>o+ +r?.people_count?.max?1:0,0))),this.no_show_percent=this._state.stats.pipe((0,w.T)(({events:n})=>Math.floor(n.reduce((o,{extension_data:r})=>o+ +r?.people_count?.max?1:0,0)/n.length*1e4)/100)),this.has_attendance=this._state.stats.pipe((0,w.T)(({events:n})=>!!n.find(({extension_data:o})=>!!o?.people_count)))}static#t=this.\u0275fac=function(n){return new(n||s)(t.rXU(S))};static#e=this.\u0275cmp=t.VBU({type:s,selectors:[["report-spaces-overall"]],decls:21,vars:12,consts:[[1,"m-4","p-4","rounded","bg-base-100","border","border-base-200","shadow","flex","justify-center","items-center","space-x-2"],[1,"flex","flex-col","items-center","flex-1"],["class","m-4 p-4 rounded bg-base-100 shadow flex justify-center items-center space-x-2",4,"ngIf"],[1,"m-4","p-4","rounded","bg-base-100","shadow","flex","justify-center","items-center","space-x-2"],[1,"flex-1","flex","flex-col","items-center","justify-center"]],template:function(n,o){1&n&&(t.j41(0,"div",0)(1,"div",1)(2,"h3"),t.EFF(3,"Business Days"),t.k0s(),t.j41(4,"p"),t.EFF(5),t.nI1(6,"async"),t.k0s()(),t.j41(7,"div",1)(8,"h3"),t.EFF(9,"Total Bookings"),t.k0s(),t.j41(10,"p"),t.EFF(11),t.nI1(12,"async"),t.k0s()(),t.j41(13,"div",1)(14,"h3"),t.EFF(15,"Average Booking Length"),t.k0s(),t.j41(16,"p"),t.EFF(17),t.nI1(18,"async"),t.k0s()()(),t.DNE(19,fn,19,9,"div",2),t.nI1(20,"async")),2&n&&(t.R7$(5),t.JRh(t.bMT(6,4,o.business_days)||0),t.R7$(6),t.JRh(t.bMT(12,6,o.total_count)||0),t.R7$(6),t.JRh(t.bMT(18,8,o.avg_length)||"None"),t.R7$(2),t.Y8G("ngIf",t.bMT(20,10,o.has_attendance)))},dependencies:[y.bT,y.Jj],styles:["h3[_ngcontent-%COMP%]{font-weight:500}p[_ngcontent-%COMP%]:not([simple]){font-size:1.75rem}\n\n/*# sourceMappingURL=report-spaces-overall.component.ts-angular-inline--137.css.map*/"]})}return s})();var X=g(33602),K=g(12993);const _n=()=>["date","approved","count","utilisation"],vn=()=>["Date","Approved Bookings","Total Requests","Utilisation"],yn=()=>["flex"],bn=(s,i,e)=>({date:s,usage:i,utilisation:e});function xn(s,i){if(1&s){const e=t.RV6();t.j41(0,"button",8),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.download())}),t.j41(1,"app-icon"),t.EFF(2,"download"),t.k0s()()}}function wn(s,i){1&s&&(t.EFF(0),t.nI1(1,"date")),2&s&&t.SpI(" ",t.i5U(1,1,i.data,"mediumDate")," ")}function Rn(s,i){1&s&&t.EFF(0),2&s&&t.SpI(" ",i.data||"0","% ")}let Cn=(()=>{class s{constructor(e){var n=this;this._state=e,this.print=!1,this.day_list=this._state.day_list,this.download=(0,A.A)(function*(){let o=yield n.day_list.pipe((0,X.s)(1)).toPromise();o=o.map(r=>({...r,date:(0,z.A)(r.date,"MMMM d, y(EEE)")})),(0,_.PE)("spaces-usage.csv",(0,_.SL)(o))})}static#t=this.\u0275fac=function(n){return new(n||s)(t.rXU(S))};static#e=this.\u0275cmp=t.VBU({type:s,selectors:[["report-spaces-overall-list"]],inputs:{print:"print"},decls:11,vars:14,consts:[["date_view",""],["percent_view",""],[1,"pb-2","w-full"],[1,"m-4","rounded","bg-base-100","border","border-base-200","shadow","overflow-hidden"],[1,"border-b","border-base-200","p-4","flex","items-center"],[1,"font-bold","text-xl","flex-1"],["icon","","matRipple","",3,"click",4,"ngIf"],["red-header","",3,"dataSource","pagination","columns","display_column","column_size","template"],["icon","","matRipple","",3,"click"]],template:function(n,o){if(1&n&&(t.j41(0,"div",2)(1,"div",3)(2,"div",4)(3,"h3",5),t.EFF(4,"Daily Utilisation"),t.k0s(),t.DNE(5,xn,3,0,"button",6),t.k0s(),t.nrm(6,"custom-table",7),t.DNE(7,wn,2,4,"ng-template",null,0,t.C5r)(9,Rn,1,1,"ng-template",null,1,t.C5r),t.k0s()()),2&n){const r=t.sdS(8),a=t.sdS(10);t.R7$(5),t.Y8G("ngIf",!o.print),t.R7$(),t.Y8G("dataSource",o.day_list)("pagination",!o.print)("columns",t.lJ4(7,_n))("display_column",t.lJ4(8,vn))("column_size",t.lJ4(9,yn))("template",t.sMw(10,bn,r,a,a))}},dependencies:[y.bT,O.r6,U.R,K.r,y.vh],encapsulation:2})}return s})();var ue=g(92793);const En=()=>["flex"];function Mn(s,i){if(1&s){const e=t.RV6();t.j41(0,"button",5),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.download())}),t.j41(1,"app-icon"),t.EFF(2,"download"),t.k0s()()}}let Tn=(()=>{class s{constructor(e){var n=this;this._reports=e,this.print=!1,this.space_list=(0,$.zV)([this._reports.stats,this._reports.options]).pipe((0,wt.B)(300),(0,w.T)(([o,{start:r,end:a}])=>{let l=[],c=!1;for(const u of o.events){const f=(0,_.Am)(u.resources,"email")||[u.system];for(const d of f){let h=l.find(m=>m.id===d.id||m.id?.toLowerCase()===d.email.toLowerCase());if(!h){if(h={id:d.id||d.email,name:d.display_name||d.name,capacity:d.capacity||1,booking_count:0,attendance:0,avg_attendance:0,min_attendance:99,max_attendance:0,attendees:0,avg_attendees:0,usage:0,no_shows:0,utilisation:0,occupancy:0},!h.id||!h.name)continue;l.push(h)}0===u.extension_data?.people_count?.max&&(h.no_shows+=1),h.booking_count+=1,h.attendance+=u.extension_data?.people_count?.max??0,h.avg_attendance+=u.extension_data?.people_count?.avg??0,h.min_attendance=Math.min(h.max_attendance,u.extension_data?.people_count?.max??99),h.max_attendance=Math.max(h.max_attendance,u.extension_data?.people_count?.max??0),h.usage+=u.duration,h.attendees+=u.attendees.length,c=c||!!u.extension_data.people_count}}const p=Math.max(1,(0,ue.A)(a,r)+1);for(const u of l)u.avg_attendees=Math.floor(u.attendees/u.booking_count*100)/100,u.avg_attendance=Math.floor(u.attendance/u.booking_count*100)/100,u.utilisation=`${Math.floor(u.usage/60/8/p*100)}%`,u.min_attendance=99===u.min_attendance?"?":u.min_attendance,u.occupancy=Math.floor(u.avg_attendees/u.capacity*1e3)/10+"%",(u.attendance<0||!c)&&(u.attendance="?",u.avg_attendance="?");return l})),this.has_attendance=this.space_list.pipe((0,w.T)(o=>!!o.find(({attendance:r})=>"?"!==r))),this.column_list=this.has_attendance.pipe((0,w.T)(o=>o?["name","capacity","booking_count","utilisation","avg_attendees","no_shows","min_attendance","max_attendance","occupancy"]:["name","capacity","booking_count","utilisation","avg_attendees","occupancy"])),this.column_name_list=this.has_attendance.pipe((0,w.T)(o=>o?["Name","Room Capacity","Bookings","% Time booked during office hrs","Avg. invitees per booking","No Shows","Min. In-room Attendance","Max. In-room Attendance","Occupancy %"]:["Name","Room Capacity","Bookings","% Time booked during office hrs","Avg. invitees per booking"])),this.download=(0,A.A)(function*(){const o=yield n.space_list.pipe((0,X.s)(1)).toPromise();for(const r of o)delete r.attendance,delete r.avg_attendance,delete r.no_shows,delete r.min_attendance,delete r.max_attendance;(0,_.PE)("report-spaces-usage.csv",(0,_.SL)(o))})}static#t=this.\u0275fac=function(n){return new(n||s)(t.rXU(S))};static#e=this.\u0275cmp=t.VBU({type:s,selectors:[["report-spaces-space-listing"]],inputs:{print:"print"},decls:8,vars:11,consts:[[1,"m-4","rounded","bg-base-100","border","border-base-200","shadow","overflow-hidden"],[1,"border-b","border-base-200","px-4","py-2","flex","items-center"],[1,"font-bold","text-xl","flex-1"],["icon","","matRipple","",3,"click",4,"ngIf"],[3,"dataSource","pagination","columns","display_column","column_size"],["icon","","matRipple","",3,"click"]],template:function(n,o){1&n&&(t.j41(0,"div",0)(1,"div",1)(2,"h3",2),t.EFF(3,"Room Utilisation"),t.k0s(),t.DNE(4,Mn,3,0,"button",3),t.k0s(),t.nrm(5,"custom-table",4),t.nI1(6,"async"),t.nI1(7,"async"),t.k0s()),2&n&&(t.R7$(4),t.Y8G("ngIf",!o.print),t.R7$(),t.Y8G("dataSource",o.space_list)("pagination",!o.print)("columns",t.bMT(6,6,o.column_list))("display_column",t.bMT(7,8,o.column_name_list))("column_size",t.lJ4(10,En)))},dependencies:[y.bT,O.r6,U.R,K.r,y.Jj]})}return s})();const Fn=()=>["name","booking_count","avg_attendees","total_time","no_shows"],jn=()=>["Name","Bookings","Avg. Invitees per Booking","Total Booked Time","No Shows"],kn=()=>["flex"];function In(s,i){if(1&s){const e=t.RV6();t.j41(0,"button",5),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.download())}),t.j41(1,"app-icon"),t.EFF(2,"download"),t.k0s()()}}let On=(()=>{class s{constructor(e){var n=this;this._reports=e,this.print=!1,this.user_list=(0,$.zV)([this._reports.stats]).pipe((0,wt.B)(300),(0,w.T)(([o])=>{let r=[];for(const a of o.events){const l=a.attendees?.find(u=>u.email===a.extension_data?.host_override||u.email===a.host);if(!l)continue;const c=Math.max(a.resources.reduce((u,f)=>u+f.capacity,0)||1,1);let p=r.find(u=>u.id?.toLowerCase()===l.email.toLowerCase());p||(p={id:l.email,name:l.name,capacity:c,booking_count:0,attendees:0,avg_attendees:0,no_shows:0,occupancy:0,total_time:0},r.push(p)),0===a.extension_data?.people_count?.max&&(p.no_shows+=1),p.booking_count+=1,p.attendees+=a.attendees.length,p.total_time+=a.duration||15}for(const a of r)a.avg_attendees=Math.floor(a.attendees/a.booking_count*100)/100,a.occupancy=Math.floor(a.avg_attendees/a.capacity*100)/100,a.total_time=(0,Ut.A)({hours:Math.floor(a.total_time/60),minutes:a.total_time%60});return r}),(0,Y.t)(1)),this.download=(0,A.A)(function*(){const o=yield n.user_list.pipe((0,X.s)(1)).toPromise();for(const r of o)delete r.attendance,delete r.avg_attendance,delete r.min_attendance,delete r.max_attendance,delete r.occupancy;(0,_.PE)("report-space-attendee-usage.csv",(0,_.SL)(o))})}static#t=this.\u0275fac=function(n){return new(n||s)(t.rXU(S))};static#e=this.\u0275cmp=t.VBU({type:s,selectors:[["report-spaces-user-listing"]],inputs:{print:"print"},decls:6,vars:9,consts:[[1,"m-4","rounded","bg-base-100","border","border-base-200","shadow","overflow-hidden"],[1,"border-b","border-base-200","px-4","py-2","flex","items-center"],[1,"font-bold","text-xl","flex-1"],["icon","","matRipple","",3,"click",4,"ngIf"],[3,"dataSource","pagination","columns","display_column","column_size"],["icon","","matRipple","",3,"click"]],template:function(n,o){1&n&&(t.j41(0,"div",0)(1,"div",1)(2,"h3",2),t.EFF(3,"Meeting Organisers"),t.k0s(),t.DNE(4,In,3,0,"button",3),t.k0s(),t.nrm(5,"custom-table",4),t.k0s()),2&n&&(t.R7$(4),t.Y8G("ngIf",!o.print),t.R7$(),t.Y8G("dataSource",o.user_list)("pagination",!o.print)("columns",t.lJ4(6,Fn))("display_column",t.lJ4(7,jn))("column_size",t.lJ4(8,kn)))},dependencies:[y.bT,O.r6,U.R,K.r]})}return s})();const An=["report-spaces",""];function Sn(s,i){if(1&s&&(t.qex(0),t.j41(1,"div",5)(2,"div",6),t.nrm(3,"img",7)(4,"div",8),t.j41(5,"h2",9),t.EFF(6," Rooms Report "),t.k0s()()(),t.nrm(7,"report-spaces-overall")(8,"report-spaces-overall-list",10)(9,"report-spaces-space-listing",10)(10,"report-spaces-user-listing",10),t.bVm()),2&s){const e=t.XpG(2);t.R7$(3),t.Y8G("src",e.logo.src,t.B4B),t.R7$(5),t.Y8G("print",e.printing),t.R7$(),t.Y8G("print",e.printing),t.R7$(),t.Y8G("print",e.printing)}}function Nn(s,i){if(1&s&&(t.qex(0),t.DNE(1,Sn,11,4,"ng-container",4),t.nI1(2,"async"),t.bVm()),2&s){const e=t.XpG(),n=t.sdS(7);t.R7$(),t.Y8G("ngIf",t.bMT(2,2,e.total_count))("ngIfElse",n)}}function Ln(s,i){1&s&&(t.j41(0,"div",11),t.nrm(1,"mat-spinner",12),t.j41(2,"p",13),t.EFF(3,"Loading report data..."),t.k0s()()),2&s&&(t.R7$(),t.Y8G("diameter",32))}function Dn(s,i){1&s&&(t.j41(0,"div",14)(1,"p",13),t.EFF(2," Select levels and time period to generate a report. "),t.k0s()())}let Gn=(()=>{class s{get logo(){return this._settings.get("app.logo_light")||{}}constructor(e,n){this._state=e,this._settings=n,this.printing=!1,this.total_count=this._state.stats.pipe((0,w.T)(o=>o.count||0)),this.loading=this._state.loading}ngOnInit(){this._state.setOptions({type:"events"})}static#t=this.\u0275fac=function(n){return new(n||s)(t.rXU(S),t.rXU(_.h$))};static#e=this.\u0275cmp=t.VBU({type:s,selectors:[["","report-spaces",""]],attrs:An,decls:8,vars:4,consts:[["load_state",""],["empty_state",""],[3,"printing"],["printable","",1,"relative","flex-1","h-1/2","w-full","overflow-auto","print:overflow-visible","print:h-auto"],[4,"ngIf","ngIfElse"],[1,"w-full"],[1,"flex","items-center","m-4","p-4","rounded","bg-base-200","overflow-hidden"],[1,"h-12",3,"src"],[1,"flex-1"],[1,"text-2xl","font-medium","px-2"],[3,"print"],[1,"h-full","w-full","flex","flex-col","items-center","p-8"],[1,"mb-4",3,"diameter"],["simple",""],[1,"h-full","w-full","flex","flex-col","items-center","p-8","screen-only"]],template:function(n,o){if(1&n){const r=t.RV6();t.j41(0,"reports-options",2),t.bIt("printing",function(l){return t.eBV(r),t.Njj(o.printing=l)}),t.k0s(),t.j41(1,"div",3),t.DNE(2,Nn,3,4,"ng-container",4),t.nI1(3,"async"),t.k0s(),t.DNE(4,Ln,4,1,"ng-template",null,0,t.C5r)(6,Dn,3,0,"ng-template",null,1,t.C5r)}if(2&n){const r=t.sdS(5);t.R7$(2),t.Y8G("ngIf",!t.bMT(3,2,o.loading))("ngIfElse",r)}},dependencies:[y.bT,Rt.LG,Et.L,Ct,gn,Cn,Tn,On,y.Jj],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%}\n\n/*# sourceMappingURL=report-spaces.component.ts-angular-inline--134.css.map*/"]})}return s})();const Bn=()=>["date","approved","count","utilisation"],Vn=()=>["Date","Approved Bookings","Total Requests","Utilisation"],Un=()=>["flex"],zn=(s,i,e)=>({date:s,usage:i,utilisation:e});function $n(s,i){if(1&s){const e=t.RV6();t.j41(0,"button",8),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.download())}),t.j41(1,"app-icon"),t.EFF(2,"download"),t.k0s()()}}function Yn(s,i){1&s&&(t.EFF(0),t.nI1(1,"date")),2&s&&t.SpI(" ",t.i5U(1,1,i.data,"mediumDate")," ")}function Xn(s,i){1&s&&t.EFF(0),2&s&&t.SpI(" ",i.data||"0","% ")}let Pn=(()=>{class s{constructor(e){var n=this;this._state=e,this.print=!1,this.day_list=this._state.day_list,this.download=(0,A.A)(function*(){let o=yield n.day_list.pipe((0,X.s)(1)).toPromise();o=o.map(r=>({...r,date:(0,z.A)(r.date,"MMMM d, y(EEE)")})),(0,_.PE)("desks-usage.csv",(0,_.SL)(o))})}static#t=this.\u0275fac=function(n){return new(n||s)(t.rXU(S))};static#e=this.\u0275cmp=t.VBU({type:s,selectors:[["report-desks-overall-list"]],inputs:{print:"print"},decls:11,vars:14,consts:[["date_view",""],["percent_view",""],[1,"pb-2","w-full"],[1,"m-4","rounded","bg-base-100","border","border-base-200","shadow","overflow-hidden"],[1,"border-b","border-base-200","p-4","flex","items-center"],[1,"font-bold","text-xl","flex-1"],["icon","","matRipple","",3,"click",4,"ngIf"],["red-header","",3,"dataSource","pagination","columns","display_column","column_size","template"],["icon","","matRipple","",3,"click"]],template:function(n,o){if(1&n&&(t.j41(0,"div",2)(1,"div",3)(2,"div",4)(3,"h3",5),t.EFF(4,"Daily Utilisation"),t.k0s(),t.DNE(5,$n,3,0,"button",6),t.k0s(),t.nrm(6,"custom-table",7),t.DNE(7,Yn,2,4,"ng-template",null,0,t.C5r)(9,Xn,1,1,"ng-template",null,1,t.C5r),t.k0s()()),2&n){const r=t.sdS(8),a=t.sdS(10);t.R7$(5),t.Y8G("ngIf",!o.print),t.R7$(),t.Y8G("dataSource",o.day_list)("pagination",!o.print)("columns",t.lJ4(7,Bn))("display_column",t.lJ4(8,Vn))("column_size",t.lJ4(9,Un))("template",t.sMw(10,zn,r,a,a))}},dependencies:[y.bT,O.r6,U.R,K.r,y.vh],encapsulation:2})}return s})();const Jn=()=>["name","avg_usage","approved","count","utilisation"],Hn=()=>["Level","Avg. Used Desks","Approved Bookings","Total Requests","Utilisation"],Wn=()=>["flex"],Qn=s=>({utilisation:s});function Zn(s,i){if(1&s){const e=t.RV6();t.j41(0,"button",7),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.download())}),t.j41(1,"app-icon"),t.EFF(2,"download"),t.k0s()()}}function Kn(s,i){1&s&&t.EFF(0),2&s&&t.SpI(" ",i.data||"0","% ")}let qn=(()=>{class s{constructor(e,n){var o=this;this._state=e,this._org=n,this.print=!1,this.level_list=(0,$.zV)([this._state.options,this._state.stats,this._state.counts]).pipe((0,w.T)(([r,a,l])=>{const{start:c,end:p,zones:u}=r,f=(0,ue.A)(p,c)||1,d=[];for(const h of u){if("All"===h)continue;const m=this._org.levelWithID([h]),x=l[h]||0,v=a.events.filter(L=>L.zones.includes(h));let T=(x*f-v.length)/f;T%1!=0&&(T=T.toFixed(2)),d.push({name:m?.display_name||m?.name,free:T,approved:v.filter(L=>L.approved).length||0,avg_usage:(v.length/f||0).toFixed(2),total:x,count:v.length,utilisation:(v.length/((x||1)*f)*100||0).toFixed(2)})}return d}),(0,Y.t)(1)),this.download=(0,A.A)(function*(){let r=yield o.level_list.pipe((0,X.s)(1)).toPromise();(0,_.PE)("desks-levels-usage.csv",(0,_.SL)(r))})}static#t=this.\u0275fac=function(n){return new(n||s)(t.rXU(S),t.rXU(Q.yb))};static#e=this.\u0275cmp=t.VBU({type:s,selectors:[["report-desks-levels-list"]],inputs:{print:"print"},decls:9,vars:12,consts:[["percent_view",""],[1,"px-4","pb-2","w-full"],[1,"rounded","bg-base-100","border","border-base-200","shadow","overflow-hidden","w-full"],[1,"border-b","border-base-200","p-4","flex","items-center"],[1,"font-bold","text-xl","flex-1"],["icon","","matRipple","",3,"click",4,"ngIf"],["red-header","",3,"dataSource","pagination","columns","display_column","column_size","template"],["icon","","matRipple","",3,"click"]],template:function(n,o){if(1&n&&(t.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"h3",4),t.EFF(4,"Level Utilisation"),t.k0s(),t.DNE(5,Zn,3,0,"button",5),t.k0s(),t.nrm(6,"custom-table",6),t.DNE(7,Kn,1,1,"ng-template",null,0,t.C5r),t.k0s()()),2&n){const r=t.sdS(8);t.R7$(5),t.Y8G("ngIf",!o.print),t.R7$(),t.Y8G("dataSource",o.level_list)("pagination",!o.print)("columns",t.lJ4(7,Jn))("display_column",t.lJ4(8,Hn))("column_size",t.lJ4(9,Wn))("template",t.eq3(10,Qn,r))}},dependencies:[y.bT,O.r6,U.R,K.r],encapsulation:2})}return s})();const pt={svg:"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/xmlns/",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",ct:"http://gionkunz.github.com/chartist-js/ct"},ts=8,Mt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};function de(s,i){return"number"==typeof s?s+i:s}function Tt(s){if("string"==typeof s){const i=/^(\d+)\s*(.*)$/g.exec(s);return{value:i?+i[1]:0,unit:i?.[2]||void 0}}return{value:Number(s)}}function zt(s){return String.fromCharCode(97+s%26)}const $t=2221e-19;function ut(s,i,e){return i/e.range*s}function ns(s,i){const e=Math.pow(10,i||ts);return Math.round(s*e)/e}function Yt(s,i,e,n){const o=(n-90)*Math.PI/180;return{x:s+e*Math.cos(o),y:i+e*Math.sin(o)}}function nt(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(var i=arguments.length,e=new Array(i>1?i-1:0),n=1;n<i;n++)e[n-1]=arguments[n];for(let o=0;o<e.length;o++){const r=e[o];for(const a in r){const l=r[a];s[a]="object"!=typeof l||null===l||l instanceof Array?l:nt(s[a],l)}}return s}const dt=s=>s;function Ft(s,i){return Array.from({length:s},i?(e,n)=>i(n):()=>{})}const os=(s,i)=>s+(i||0);function C(s,i){return null!==s&&"object"==typeof s&&Reflect.has(s,i)}function mt(s){return null!==s&&isFinite(s)}function me(s){return!s&&0!==s}function ot(s){return mt(s)?Number(s):void 0}function fe(s,i){const e=Array.isArray(s)?s[i]:C(s,"data")?s.data[i]:null;return C(e,"meta")?e.meta:void 0}function ge(s){return null==s||"number"==typeof s&&isNaN(s)}function jt(s){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"y";return function cs(s){return"object"==typeof s&&null!==s&&(Reflect.has(s,"x")||Reflect.has(s,"y"))}(s)&&C(s,i)?ot(s[i]):ot(s)}function Xt(s){let o,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],e=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;const r={labels:(s.labels||[]).slice(),series:ds(s.series,e,n)},a=r.labels.length;return function as(s){return!!Array.isArray(s)&&s.every(Array.isArray)}(r.series)?(o=Math.max(a,...r.series.map(l=>l.length)),r.series.forEach(l=>{l.push(...Ft(Math.max(0,o-l.length)))})):o=r.series.length,r.labels.push(...Ft(Math.max(0,o-a),()=>"")),i&&function ps(s){var i;null===(i=s.labels)||void 0===i||i.reverse(),s.series.reverse();for(const e of s.series)C(e,"data")?e.data.reverse():Array.isArray(e)&&e.reverse()}(r),r}function _e(s,i){if(!ge(s))return i?function us(s,i){let e,n;if("object"!=typeof s){const o=ot(s);"x"===i?e=o:n=o}else C(s,"x")&&(e=ot(s.x)),C(s,"y")&&(n=ot(s.y));if(void 0!==e||void 0!==n)return{x:e,y:n}}(s,i):ot(s)}function Pt(s,i){return Array.isArray(s)?s.map(e=>C(e,"value")?_e(e.value,i):_e(e,i)):Pt(s.data,i)}function ds(s,i,e){if(function ls(s){return Array.isArray(s)&&s.every(i=>Array.isArray(i)||C(i,"data"))}(s))return s.map(o=>Pt(o,i));const n=Pt(s,i);return e?n.map(o=>[o]):n}function ht(s){let i="";return null==s?s:(i="number"==typeof s?""+s:"object"==typeof s?JSON.stringify({data:s}):String(s),Object.keys(Mt).reduce((e,n)=>e.replaceAll(n,Mt[n]),i))}class ms{call(i,e){return this.svgElements.forEach(n=>Reflect.apply(n[i],n,e)),this}attr(){for(var i=arguments.length,e=new Array(i),n=0;n<i;n++)e[n]=arguments[n];return this.call("attr",e)}elem(){for(var i=arguments.length,e=new Array(i),n=0;n<i;n++)e[n]=arguments[n];return this.call("elem",e)}root(){for(var i=arguments.length,e=new Array(i),n=0;n<i;n++)e[n]=arguments[n];return this.call("root",e)}getNode(){for(var i=arguments.length,e=new Array(i),n=0;n<i;n++)e[n]=arguments[n];return this.call("getNode",e)}foreignObject(){for(var i=arguments.length,e=new Array(i),n=0;n<i;n++)e[n]=arguments[n];return this.call("foreignObject",e)}text(){for(var i=arguments.length,e=new Array(i),n=0;n<i;n++)e[n]=arguments[n];return this.call("text",e)}empty(){for(var i=arguments.length,e=new Array(i),n=0;n<i;n++)e[n]=arguments[n];return this.call("empty",e)}remove(){for(var i=arguments.length,e=new Array(i),n=0;n<i;n++)e[n]=arguments[n];return this.call("remove",e)}addClass(){for(var i=arguments.length,e=new Array(i),n=0;n<i;n++)e[n]=arguments[n];return this.call("addClass",e)}removeClass(){for(var i=arguments.length,e=new Array(i),n=0;n<i;n++)e[n]=arguments[n];return this.call("removeClass",e)}removeAllClasses(){for(var i=arguments.length,e=new Array(i),n=0;n<i;n++)e[n]=arguments[n];return this.call("removeAllClasses",e)}animate(){for(var i=arguments.length,e=new Array(i),n=0;n<i;n++)e[n]=arguments[n];return this.call("animate",e)}constructor(i){this.svgElements=[];for(let e=0;e<i.length;e++)this.svgElements.push(new xe(i[e]))}}const ye={easeInSine:[.47,0,.745,.715],easeOutSine:[.39,.575,.565,1],easeInOutSine:[.445,.05,.55,.95],easeInQuad:[.55,.085,.68,.53],easeOutQuad:[.25,.46,.45,.94],easeInOutQuad:[.455,.03,.515,.955],easeInCubic:[.55,.055,.675,.19],easeOutCubic:[.215,.61,.355,1],easeInOutCubic:[.645,.045,.355,1],easeInQuart:[.895,.03,.685,.22],easeOutQuart:[.165,.84,.44,1],easeInOutQuart:[.77,0,.175,1],easeInQuint:[.755,.05,.855,.06],easeOutQuint:[.23,1,.32,1],easeInOutQuint:[.86,0,.07,1],easeInExpo:[.95,.05,.795,.035],easeOutExpo:[.19,1,.22,1],easeInOutExpo:[1,0,0,1],easeInCirc:[.6,.04,.98,.335],easeOutCirc:[.075,.82,.165,1],easeInOutCirc:[.785,.135,.15,.86],easeInBack:[.6,-.28,.735,.045],easeOutBack:[.175,.885,.32,1.275],easeInOutBack:[.68,-.55,.265,1.55]};function be(s,i,e){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4?arguments[4]:void 0;const{easing:r,...a}=e,l={};let c,p;r&&(c=Array.isArray(r)?r:ye[r]),a.begin=de(a.begin,"ms"),a.dur=de(a.dur,"ms"),c&&(a.calcMode="spline",a.keySplines=c.join(" "),a.keyTimes="0;1"),n&&(a.fill="freeze",l[i]=a.from,s.attr(l),p=Tt(a.begin||0).value,a.begin="indefinite");const u=s.elem("animate",{attributeName:i,...a});n&&setTimeout(()=>{try{u._node.beginElement()}catch{l[i]=a.to,s.attr(l),u.remove()}},p);const f=u.getNode();o&&f.addEventListener("beginEvent",()=>o.emit("animationBegin",{element:s,animate:f,params:e})),f.addEventListener("endEvent",()=>{o&&o.emit("animationEnd",{element:s,animate:f,params:e}),n&&(l[i]=a.to,s.attr(l),u.remove())})}let xe=(()=>{class s{attr(e,n){return"string"==typeof e?n?this._node.getAttributeNS(n,e):this._node.getAttribute(e):(Object.keys(e).forEach(o=>{if(void 0!==e[o])if(-1!==o.indexOf(":")){const r=o.split(":");this._node.setAttributeNS(pt[r[0]],o,String(e[o]))}else this._node.setAttribute(o,String(e[o]))}),this)}elem(e,n,o){return new s(e,n,o,this,arguments.length>3&&void 0!==arguments[3]&&arguments[3])}parent(){return this._node.parentNode instanceof SVGElement?new s(this._node.parentNode):null}root(){let e=this._node;for(;"svg"!==e.nodeName&&e.parentElement;)e=e.parentElement;return new s(e)}querySelector(e){const n=this._node.querySelector(e);return n?new s(n):null}querySelectorAll(e){const n=this._node.querySelectorAll(e);return new ms(n)}getNode(){return this._node}foreignObject(e,n,o){let a,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if("string"==typeof e){const c=document.createElement("div");c.innerHTML=e,a=c.firstChild}else a=e;a instanceof Element&&a.setAttribute("xmlns",pt.xmlns);const l=this.elem("foreignObject",n,o,r);return l._node.appendChild(a),l}text(e){return this._node.appendChild(document.createTextNode(e)),this}empty(){for(;this._node.firstChild;)this._node.removeChild(this._node.firstChild);return this}remove(){var e;return null===(e=this._node.parentNode)||void 0===e||e.removeChild(this._node),this.parent()}replace(e){var n;return null===(n=this._node.parentNode)||void 0===n||n.replaceChild(e._node,this._node),e}append(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&this._node.firstChild?this._node.insertBefore(e._node,this._node.firstChild):this._node.appendChild(e._node),this}classes(){const e=this._node.getAttribute("class");return e?e.trim().split(/\s+/):[]}addClass(e){return this._node.setAttribute("class",this.classes().concat(e.trim().split(/\s+/)).filter(function(n,o,r){return r.indexOf(n)===o}).join(" ")),this}removeClass(e){const n=e.trim().split(/\s+/);return this._node.setAttribute("class",this.classes().filter(o=>-1===n.indexOf(o)).join(" ")),this}removeAllClasses(){return this._node.setAttribute("class",""),this}height(){return this._node.getBoundingClientRect().height}width(){return this._node.getBoundingClientRect().width}animate(e){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=arguments.length>2?arguments[2]:void 0;return Object.keys(e).forEach(r=>{const a=e[r];Array.isArray(a)?a.forEach(l=>be(this,r,l,!1,o)):be(this,r,a,n,o)}),this}constructor(e,n,o,r,a=!1){e instanceof Element?this._node=e:(this._node=document.createElementNS(pt.svg,e),"svg"===e&&this.attr({"xmlns:ct":pt.ct})),n&&this.attr(n),o&&this.addClass(o),r&&(a&&r._node.firstChild?r._node.insertBefore(this._node,r._node.firstChild):r._node.appendChild(this._node))}}return s.Easing=ye,s})();function Jt(s){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"100%",e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"100%",n=arguments.length>3?arguments[3]:void 0;Array.from(s.querySelectorAll("svg")).filter(r=>r.getAttributeNS(pt.xmlns,"ct")).forEach(r=>s.removeChild(r));const o=new xe("svg").attr({width:i,height:e}).attr({style:"width: ".concat(i,"; height: ").concat(e,";")});return n&&o.addClass(n),s.appendChild(o.getNode()),o}function Ht(s,i){var e,n,o,r;const a=!(!i.axisX&&!i.axisY),l=(null===(e=i.axisY)||void 0===e?void 0:e.offset)||0,c=(null===(n=i.axisX)||void 0===n?void 0:n.offset)||0,p=null===(o=i.axisY)||void 0===o?void 0:o.position,u=null===(r=i.axisX)||void 0===r?void 0:r.position;let f=s.width()||Tt(i.width).value||0,d=s.height()||Tt(i.height).value||0;const h=function hs(s){return"number"==typeof s?{top:s,right:s,bottom:s,left:s}:void 0===s?{top:0,right:0,bottom:0,left:0}:{top:"number"==typeof s.top?s.top:0,right:"number"==typeof s.right?s.right:0,bottom:"number"==typeof s.bottom?s.bottom:0,left:"number"==typeof s.left?s.left:0}}(i.chartPadding);f=Math.max(f,l+h.left+h.right),d=Math.max(d,c+h.top+h.bottom);const m={x1:0,x2:0,y1:0,y2:0,padding:h,width(){return this.x2-this.x1},height(){return this.y1-this.y2}};return a?("start"===u?(m.y2=h.top+c,m.y1=Math.max(d-h.bottom,m.y2+1)):(m.y2=h.top,m.y1=Math.max(d-h.bottom-c,m.y2+1)),"start"===p?(m.x1=h.left+l,m.x2=Math.max(f-h.right,m.x1+1)):(m.x1=h.left,m.x2=Math.max(f-h.right-l,m.x1+1))):(m.x1=h.left,m.x2=Math.max(f-h.right,m.x1+1),m.y2=h.top,m.y1=Math.max(d-h.bottom,m.y2+1)),m}function Re(s,i,e){let n;const o=[];function r(l){const c=n;n=nt({},s),i&&i.forEach(p=>{window.matchMedia(p[0]).matches&&(n=nt(n,p[1]))}),e&&l&&e.emit("optionsChanged",{previousOptions:c,currentOptions:n})}if(!window.matchMedia)throw new Error("window.matchMedia not found! Make sure you're using a polyfill.");return i&&i.forEach(l=>{const c=window.matchMedia(l[0]);c.addEventListener("change",r),o.push(c)}),r(),{removeMediaQueryListeners:function a(){o.forEach(l=>l.removeEventListener("change",r))},getCurrentOptions:()=>n}}const Wt={m:["x","y"],l:["x","y"],c:["x1","y1","x2","y2","x","y"],a:["rx","ry","xAr","lAf","sf","x","y"]},_s={accuracy:3};function It(s,i,e,n,o,r){const a={command:o?s.toLowerCase():s.toUpperCase(),...i,...r?{data:r}:{}};e.splice(n,0,a)}function Qt(s,i){s.forEach((e,n)=>{Wt[e.command.toLowerCase()].forEach((o,r)=>{i(e,o,n,r,s)})})}class N{static join(i){const o=new N(arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2?arguments[2]:void 0);for(let r=0;r<i.length;r++){const a=i[r];for(let l=0;l<a.pathElements.length;l++)o.pathElements.push(a.pathElements[l])}return o}position(i){return void 0!==i?(this.pos=Math.max(0,Math.min(this.pathElements.length,i)),this):this.pos}remove(i){return this.pathElements.splice(this.pos,i),this}move(i,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3?arguments[3]:void 0;return It("M",{x:+i,y:+e},this.pathElements,this.pos++,n,o),this}line(i,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3?arguments[3]:void 0;return It("L",{x:+i,y:+e},this.pathElements,this.pos++,n,o),this}curve(i,e,n,o,r,a){let l=arguments.length>6&&void 0!==arguments[6]&&arguments[6],c=arguments.length>7?arguments[7]:void 0;return It("C",{x1:+i,y1:+e,x2:+n,y2:+o,x:+r,y:+a},this.pathElements,this.pos++,l,c),this}arc(i,e,n,o,r,a,l){let c=arguments.length>7&&void 0!==arguments[7]&&arguments[7],p=arguments.length>8?arguments[8]:void 0;return It("A",{rx:i,ry:e,xAr:n,lAf:o,sf:r,x:a,y:l},this.pathElements,this.pos++,c,p),this}parse(i){const e=i.replace(/([A-Za-z])(-?[0-9])/g,"$1 $2").replace(/([0-9])([A-Za-z])/g,"$1 $2").split(/[\s,]+/).reduce((o,r)=>(r.match(/[A-Za-z]/)&&o.push([]),o[o.length-1].push(r),o),[]);"Z"===e[e.length-1][0].toUpperCase()&&e.pop();const n=e.map(o=>{const r=o.shift(),a=Wt[r.toLowerCase()];return{command:r,...a.reduce((l,c,p)=>(l[c]=+o[p],l),{})}});return this.pathElements.splice(this.pos,0,...n),this.pos+=n.length,this}stringify(){const i=Math.pow(10,this.options.accuracy);return this.pathElements.reduce((e,n)=>{const o=Wt[n.command.toLowerCase()].map(r=>{const a=n[r];return this.options.accuracy?Math.round(a*i)/i:a});return e+n.command+o.join(",")},"")+(this.close?"Z":"")}scale(i,e){return Qt(this.pathElements,(n,o)=>{n[o]*="x"===o[0]?i:e}),this}translate(i,e){return Qt(this.pathElements,(n,o)=>{n[o]+="x"===o[0]?i:e}),this}transform(i){return Qt(this.pathElements,(e,n,o,r,a)=>{const l=i(e,n,o,r,a);(l||0===l)&&(e[n]=l)}),this}clone(){const e=new N(arguments.length>0&&void 0!==arguments[0]&&arguments[0]||this.close);return e.pos=this.pos,e.pathElements=this.pathElements.slice().map(n=>({...n})),e.options={...this.options},e}splitByCommand(i){const e=[new N];return this.pathElements.forEach(n=>{n.command===i.toUpperCase()&&0!==e[e.length-1].pathElements.length&&e.push(new N),e[e.length-1].pathElements.push(n)}),e}constructor(i=!1,e){this.close=i,this.pathElements=[],this.pos=0,this.options={..._s,...e}}}function rt(s){const i={fillHoles:!1,...s};return function(n,o){const r=new N;let a=!0;for(let l=0;l<n.length;l+=2){const c=n[l],p=n[l+1],u=o[l/2];void 0!==jt(u.value)?(a?r.move(c,p,!1,u):r.line(c,p,!1,u),a=!1):i.fillHoles||(a=!0)}return r}}function Ce(s){const i={fillHoles:!1,...s};return function e(n,o){const r=function ve(s,i,e){const n={increasingX:!1,fillHoles:!1,...e},o=[];let r=!0;for(let a=0;a<s.length;a+=2)void 0===jt(i[a/2].value)?n.fillHoles||(r=!0):(n.increasingX&&a>=2&&s[a]<=s[a-2]&&(r=!0),r&&(o.push({pathCoordinates:[],valueData:[]}),r=!1),o[o.length-1].pathCoordinates.push(s[a],s[a+1]),o[o.length-1].valueData.push(i[a/2]));return o}(n,o,{fillHoles:i.fillHoles,increasingX:!0});if(r.length){if(r.length>1)return N.join(r.map(a=>e(a.pathCoordinates,a.valueData)));{if(o=r[0].valueData,(n=r[0].pathCoordinates).length<=4)return rt()(n,o);const a=[],l=[],c=n.length/2,p=[],u=[],f=[],d=[];for(let m=0;m<c;m++)a[m]=n[2*m],l[m]=n[2*m+1];for(let m=0;m<c-1;m++)f[m]=l[m+1]-l[m],d[m]=a[m+1]-a[m],u[m]=f[m]/d[m];p[0]=u[0],p[c-1]=u[c-2];for(let m=1;m<c-1;m++)0===u[m]||0===u[m-1]||u[m-1]>0!=u[m]>0?p[m]=0:(p[m]=3*(d[m-1]+d[m])/((2*d[m]+d[m-1])/u[m-1]+(d[m]+2*d[m-1])/u[m]),isFinite(p[m])||(p[m]=0));const h=(new N).move(a[0],l[0],!1,o[0]);for(let m=0;m<c-1;m++)h.curve(a[m]+d[m]/3,l[m]+p[m]*d[m]/3,a[m+1]-d[m]/3,l[m+1]-p[m+1]*d[m]/3,a[m+1],l[m+1],!1,o[m+1]);return h}}return rt()([],[])}}class xs{on(i,e){const{allListeners:n,listeners:o}=this;"*"===i?n.add(e):(o.has(i)||o.set(i,new Set),o.get(i).add(e))}off(i,e){const{allListeners:n,listeners:o}=this;if("*"===i)e?n.delete(e):n.clear();else if(o.has(i)){const r=o.get(i);e?r.delete(e):r.clear(),r.size||o.delete(i)}}emit(i,e){const{allListeners:n,listeners:o}=this;o.has(i)&&o.get(i).forEach(r=>r(e)),n.forEach(r=>r(i,e))}constructor(){this.listeners=new Map,this.allListeners=new Set}}const Zt=new WeakMap;class Kt{update(i,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];var o;return i&&(this.data=i||{},this.data.labels=this.data.labels||[],this.data.series=this.data.series||[],this.eventEmitter.emit("data",{type:"update",data:this.data})),e&&(this.options=nt({},n?this.options:this.defaultOptions,e),!this.initializeTimeoutId)&&(null===(o=this.optionsProvider)||void 0===o||o.removeMediaQueryListeners(),this.optionsProvider=Re(this.options,this.responsiveOptions,this.eventEmitter)),!this.initializeTimeoutId&&this.optionsProvider&&this.createChart(this.optionsProvider.getCurrentOptions()),this}detach(){var i;return this.initializeTimeoutId?window.clearTimeout(this.initializeTimeoutId):(window.removeEventListener("resize",this.resizeListener),null===(i=this.optionsProvider)||void 0===i||i.removeMediaQueryListeners()),Zt.delete(this.container),this}on(i,e){return this.eventEmitter.on(i,e),this}off(i,e){return this.eventEmitter.off(i,e),this}initialize(){window.addEventListener("resize",this.resizeListener),this.optionsProvider=Re(this.options,this.responsiveOptions,this.eventEmitter),this.eventEmitter.on("optionsChanged",()=>this.update()),this.options.plugins&&this.options.plugins.forEach(i=>{Array.isArray(i)?i[0](this,i[1]):i(this)}),this.eventEmitter.emit("data",{type:"initial",data:this.data}),this.createChart(this.optionsProvider.getCurrentOptions()),this.initializeTimeoutId=null}constructor(i,e,n,o,r){this.data=e,this.defaultOptions=n,this.options=o,this.responsiveOptions=r,this.eventEmitter=new xs,this.resizeListener=()=>this.update(),this.initializeTimeoutId=setTimeout(()=>this.initialize(),0);const a="string"==typeof i?document.querySelector(i):i;if(!a)throw new Error("Target element is not found");this.container=a;const l=Zt.get(a);l&&l.detach(),Zt.set(a,this)}}const k={x:{pos:"x",len:"width",dir:"horizontal",rectStart:"x1",rectEnd:"x2",rectOffset:"y2"},y:{pos:"y",len:"height",dir:"vertical",rectStart:"y2",rectEnd:"y1",rectOffset:"x1"}};class qt{createGridAndLabels(i,e,n,o){const r="x"===this.units.pos?n.axisX:n.axisY,a=this.ticks.map((c,p)=>this.projectValue(c,p)),l=this.ticks.map(r.labelInterpolationFnc);a.forEach((c,p)=>{const u=l[p],f={x:0,y:0};let d;d=a[p+1]?a[p+1]-c:Math.max(this.axisLength-c,this.axisLength/this.ticks.length),(""===u||!me(u))&&("x"===this.units.pos?(c=this.chartRect.x1+c,f.x=n.axisX.labelOffset.x,f.y="start"===n.axisX.position?this.chartRect.padding.top+n.axisX.labelOffset.y+5:this.chartRect.y1+n.axisX.labelOffset.y+5):(c=this.chartRect.y1-c,f.y=n.axisY.labelOffset.y-d,f.x="start"===n.axisY.position?this.chartRect.padding.left+n.axisY.labelOffset.x:this.chartRect.x2+n.axisY.labelOffset.x+10),r.showGrid&&function fs(s,i,e,n,o,r,a,l){const c={["".concat(e.units.pos,"1")]:s,["".concat(e.units.pos,"2")]:s,["".concat(e.counterUnits.pos,"1")]:n,["".concat(e.counterUnits.pos,"2")]:n+o},p=r.elem("line",c,a.join(" "));l.emit("draw",{type:"grid",axis:e,index:i,group:r,element:p,...c})}(c,p,this,this.gridOffset,this.chartRect[this.counterUnits.len](),i,[n.classNames.grid,n.classNames[this.units.dir]],o),r.showLabel&&function gs(s,i,e,n,o,r,a,l,c,p){const u={[o.units.pos]:s+a[o.units.pos],[o.counterUnits.pos]:a[o.counterUnits.pos],[o.units.len]:i,[o.counterUnits.len]:Math.max(0,r-10)},f=Math.round(u[o.units.len]),d=Math.round(u[o.counterUnits.len]),h=document.createElement("span");h.className=c.join(" "),h.style[o.units.len]=f+"px",h.style[o.counterUnits.len]=d+"px",h.textContent=String(n);const m=l.foreignObject(h,{style:"overflow: visible;",...u});p.emit("draw",{type:"label",axis:o,index:e,group:l,element:m,text:n,...u})}(c,d,p,u,this,r.offset,f,e,[n.classNames.label,n.classNames[this.units.dir],"start"===r.position?n.classNames[r.position]:n.classNames.end],o))})}constructor(i,e,n){this.units=i,this.chartRect=e,this.ticks=n,this.counterUnits=i===k.x?k.y:k.x,this.axisLength=e[this.units.rectEnd]-e[this.units.rectStart],this.gridOffset=e[this.units.rectOffset]}}class te extends qt{projectValue(i){const e=Number(jt(i,this.units.pos));return this.axisLength*(e-this.bounds.min)/this.bounds.range}constructor(i,e,n,o){const r=o.highLow||function kt(s,i,e){const n={high:void 0===(i={...i,...e?"x"===e?i.axisX:i.axisY:{}}).high?-Number.MAX_VALUE:+i.high,low:void 0===i.low?Number.MAX_VALUE:+i.low},o=void 0===i.high,r=void 0===i.low;return(o||r)&&function a(l){if(!ge(l))if(Array.isArray(l))for(let c=0;c<l.length;c++)a(l[c]);else{const c=Number(e&&C(l,e)?l[e]:l);o&&c>n.high&&(n.high=c),r&&c<n.low&&(n.low=c)}}(s),(i.referenceValue||0===i.referenceValue)&&(n.high=Math.max(i.referenceValue,n.high),n.low=Math.min(i.referenceValue,n.low)),n.high<=n.low&&(0===n.low?n.high=1:n.low<0?n.high=0:(n.high>0||(n.high=1),n.low=0)),n}(e,o,i.pos),a=function is(s,i,e){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const o={high:i.high,low:i.low,valueRange:0,oom:0,step:0,min:0,max:0,range:0,numberOfSteps:0,values:[]};o.valueRange=o.high-o.low,o.oom=function es(s){return Math.floor(Math.log(Math.abs(s))/Math.LN10)}(o.valueRange),o.step=Math.pow(10,o.oom),o.min=Math.floor(o.low/o.step)*o.step,o.max=Math.ceil(o.high/o.step)*o.step,o.range=o.max-o.min,o.numberOfSteps=Math.round(o.range/o.step);const a=ut(s,o.step,o)<e,l=n?function ss(s){if(1===s)return s;function i(a,l){return a%l==0?l:i(l,a%l)}function e(a){return a*a+1}let r,n=2,o=2;if(s%2==0)return 2;do{n=e(n)%s,o=e(e(o))%s,r=i(Math.abs(n-o),s)}while(1===r);return r}(o.range):0;if(n&&ut(s,1,o)>=e)o.step=1;else if(n&&l<o.step&&ut(s,l,o)>=e)o.step=l;else{let d=0;for(;;){if(a&&ut(s,o.step,o)<=e)o.step*=2;else{if(a||!(ut(s,o.step/2,o)>=e))break;if(o.step/=2,n&&o.step%1!=0){o.step*=2;break}}if(d++>1e3)throw new Error("Exceeded maximum number of iterations while optimizing scale step!")}}function c(d,h){return d===(d+=h)&&(d*=1+(h>0?$t:-$t)),d}o.step=Math.max(o.step,$t);let p=o.min,u=o.max;for(;p+o.step<=o.low;)p=c(p,o.step);for(;u-o.step>=o.high;)u=c(u,-o.step);o.min=p,o.max=u,o.range=o.max-o.min;const f=[];for(let d=o.min;d<=o.max;d=c(d,o.step)){const h=ns(d);h!==f[f.length-1]&&f.push(h)}return o.values=f,o}(n[i.rectEnd]-n[i.rectStart],r,o.scaleMinSpace||20,o.onlyInteger),l={min:a.min,max:a.max};super(i,n,a.values),this.bounds=a,this.range=l}}class Ot extends qt{projectValue(i,e){return this.stepLength*e}constructor(i,e,n,o){const r=o.ticks||[];super(i,n,r);const a=Math.max(1,r.length-(o.stretch?1:0));this.stepLength=this.axisLength/a,this.stretch=!!o.stretch}}function ft(s,i,e){var n;if(C(s,"name")&&s.name&&null!==(n=i.series)&&void 0!==n&&n[s.name]){const r=(i?.series[s.name])[e];return void 0===r?i[e]:r}return i[e]}const Ee={axisX:{offset:30,position:"end",labelOffset:{x:0,y:0},showLabel:!0,showGrid:!0,labelInterpolationFnc:dt,type:void 0},axisY:{offset:40,position:"start",labelOffset:{x:0,y:0},showLabel:!0,showGrid:!0,labelInterpolationFnc:dt,type:void 0,scaleMinSpace:20,onlyInteger:!1},width:void 0,height:void 0,showLine:!0,showPoint:!0,showArea:!1,areaBase:0,lineSmooth:!0,showGridBackground:!1,low:void 0,high:void 0,chartPadding:{top:15,right:15,bottom:5,left:10},fullWidth:!1,reverseData:!1,classNames:{chart:"ct-chart-line",label:"ct-label",labelGroup:"ct-labels",series:"ct-series",line:"ct-line",point:"ct-point",area:"ct-area",grid:"ct-grid",gridGroup:"ct-grids",gridBackground:"ct-grid-background",vertical:"ct-vertical",horizontal:"ct-horizontal",start:"ct-start",end:"ct-end"}};class ws extends Kt{createChart(i){const{data:e}=this,n=Xt(e,i.reverseData,!0),o=Jt(this.container,i.width,i.height,i.classNames.chart);this.svg=o;const r=o.elem("g").addClass(i.classNames.gridGroup),a=o.elem("g"),l=o.elem("g").addClass(i.classNames.labelGroup),c=Ht(o,i);let p,u;p=void 0===i.axisX.type?new Ot(k.x,n.series,c,{...i.axisX,ticks:n.labels,stretch:i.fullWidth}):new i.axisX.type(k.x,n.series,c,i.axisX),u=void 0===i.axisY.type?new te(k.y,n.series,c,{...i.axisY,high:mt(i.high)?i.high:i.axisY.high,low:mt(i.low)?i.low:i.axisY.low}):new i.axisY.type(k.y,n.series,c,i.axisY),p.createGridAndLabels(r,l,i,this.eventEmitter),u.createGridAndLabels(r,l,i,this.eventEmitter),i.showGridBackground&&function we(s,i,e,n){const o=s.elem("rect",{x:i.x1,y:i.y2,width:i.width(),height:i.height()},e,!0);n.emit("draw",{type:"gridBackground",group:s,element:o})}(r,c,i.classNames.gridBackground,this.eventEmitter),function he(s,i){let n=0;s[arguments.length>2&&void 0!==arguments[2]&&arguments[2]?"reduceRight":"reduce"]((o,r,a)=>i(r,n++,a),void 0)}(e.series,(f,d)=>{const h=a.elem("g"),m=C(f,"name")&&f.name,x=C(f,"className")&&f.className,v=C(f,"meta")?f.meta:void 0;m&&h.attr({"ct:series-name":m}),v&&h.attr({"ct:meta":ht(v)}),h.addClass([i.classNames.series,x||"".concat(i.classNames.series,"-").concat(zt(d))].join(" "));const T=[],L=[];n.series[d].forEach((b,R)=>{const E={x:c.x1+p.projectValue(b,R,n.series[d]),y:c.y1-u.projectValue(b,R,n.series[d])};T.push(E.x,E.y),L.push({value:b,valueIndex:R,meta:fe(f,R)})});const G={lineSmooth:ft(f,i,"lineSmooth"),showPoint:ft(f,i,"showPoint"),showLine:ft(f,i,"showLine"),showArea:ft(f,i,"showArea"),areaBase:ft(f,i,"areaBase")};let P;P="function"==typeof G.lineSmooth?G.lineSmooth:G.lineSmooth?Ce():rt();const F=P(T,L);if(G.showPoint&&F.pathElements.forEach(b=>{const{data:R}=b,E=h.elem("line",{x1:b.x,y1:b.y,x2:b.x+.01,y2:b.y},i.classNames.point);if(R){let j,B;C(R.value,"x")&&(j=R.value.x),C(R.value,"y")&&(B=R.value.y),E.attr({"ct:value":[j,B].filter(mt).join(","),"ct:meta":ht(R.meta)})}this.eventEmitter.emit("draw",{type:"point",value:R?.value,index:R?.valueIndex||0,meta:R?.meta,series:f,seriesIndex:d,axisX:p,axisY:u,group:h,element:E,x:b.x,y:b.y,chartRect:c})}),G.showLine){const b=h.elem("path",{d:F.stringify()},i.classNames.line,!0);this.eventEmitter.emit("draw",{type:"line",values:n.series[d],path:F.clone(),chartRect:c,index:d,series:f,seriesIndex:d,meta:v,axisX:p,axisY:u,group:h,element:b})}if(G.showArea&&u.range){const b=Math.max(Math.min(G.areaBase,u.range.max),u.range.min),R=c.y1-u.projectValue(b);F.splitByCommand("M").filter(E=>E.pathElements.length>1).map(E=>{const j=E.pathElements[0],B=E.pathElements[E.pathElements.length-1];return E.clone(!0).position(0).remove(1).move(j.x,R).line(j.x,j.y).position(E.pathElements.length+1).line(B.x,R)}).forEach(E=>{const j=h.elem("path",{d:E.stringify()},i.classNames.area,!0);this.eventEmitter.emit("draw",{type:"area",values:n.series[d],path:E.clone(),series:f,seriesIndex:d,axisX:p,axisY:u,chartRect:c,index:d,group:h,element:j,meta:v})})}},i.reverseData),this.eventEmitter.emit("created",{chartRect:c,axisX:p,axisY:u,svg:o,options:i})}constructor(i,e,n,o){super(i,e,Ee,nt({},Ee,n),o),this.data=e}}const Te={width:void 0,height:void 0,chartPadding:5,classNames:{chartPie:"ct-chart-pie",chartDonut:"ct-chart-donut",series:"ct-series",slicePie:"ct-slice-pie",sliceDonut:"ct-slice-donut",label:"ct-label"},startAngle:0,total:void 0,donut:!1,donutWidth:60,showLabel:!0,labelOffset:0,labelPosition:"inside",labelInterpolationFnc:dt,labelDirection:"neutral",ignoreEmptyValues:!1};function Cs(s,i,e){const n=i.x>s.x;return n&&"explode"===e||!n&&"implode"===e?"start":n&&"implode"===e||!n&&"explode"===e?"end":"middle"}class Es extends Kt{createChart(i){const{data:e}=this,n=Xt(e),o=[];let r,a,l=i.startAngle;const c=Jt(this.container,i.width,i.height,i.donut?i.classNames.chartDonut:i.classNames.chartPie);this.svg=c;const p=Ht(c,i);let u=Math.min(p.width()/2,p.height()/2);const f=i.total||n.series.reduce(os,0),d=Tt(i.donutWidth);"%"===d.unit&&(d.value*=u/100),u-=i.donut?d.value/2:0,a="outside"===i.labelPosition||i.donut?u:"center"===i.labelPosition?0:u/2,i.labelOffset&&(a+=i.labelOffset);const h={x:p.x1+p.width()/2,y:p.y2+p.height()/2},m=1===e.series.filter(x=>C(x,"value")?0!==x.value:0!==x).length;e.series.forEach((x,v)=>o[v]=c.elem("g")),i.showLabel&&(r=c.elem("g")),e.series.forEach((x,v)=>{var T,L;if(0===n.series[v]&&i.ignoreEmptyValues)return;const G=C(x,"name")&&x.name,P=C(x,"className")&&x.className,F=C(x,"meta")?x.meta:void 0;G&&o[v].attr({"ct:series-name":G}),o[v].addClass([null===(T=i.classNames)||void 0===T?void 0:T.series,P||"".concat(null===(L=i.classNames)||void 0===L?void 0:L.series,"-").concat(zt(v))].join(" "));let b=f>0?l+n.series[v]/f*360:0;const R=Math.max(0,l-(0===v||m?0:.2));b-R>=359.99&&(b=R+359.99);const E=Yt(h.x,h.y,u,R),j=Yt(h.x,h.y,u,b),B=new N(!i.donut).move(j.x,j.y).arc(u,u,0,+(b-l>180),0,E.x,E.y);i.donut||B.line(h.x,h.y);const _t=o[v].elem("path",{d:B.stringify()},i.donut?i.classNames.sliceDonut:i.classNames.slicePie);if(_t.attr({"ct:value":n.series[v],"ct:meta":ht(F)}),i.donut&&_t.attr({style:"stroke-width: "+d.value+"px"}),this.eventEmitter.emit("draw",{type:"slice",value:n.series[v],totalDataSum:f,index:v,meta:F,series:x,group:o[v],element:_t,path:B.clone(),center:h,radius:u,startAngle:l,endAngle:b,chartRect:p}),i.showLabel){let H,J;H=1===e.series.length?{x:h.x,y:h.y}:Yt(h.x,h.y,a,l+(b-l)/2),J=n.labels&&!me(n.labels[v])?n.labels[v]:n.series[v];const D=i.labelInterpolationFnc(J,v);if(D||0===D){const at=r.elem("text",{dx:H.x,dy:H.y,"text-anchor":Cs(h,H,i.labelDirection)},i.classNames.label).text(String(D));this.eventEmitter.emit("draw",{type:"label",index:v,group:r,element:at,text:""+D,chartRect:p,series:x,meta:F,...H})}}l=b}),this.eventEmitter.emit("created",{chartRect:p,svg:c,options:i})}constructor(i,e,n,o){super(i,e,Te,nt({},Te,n),o),this.data=e}}let Ms=(()=>{class s extends _.Tv{constructor(e,n){super(),this._state=e,this._org=n,this.print=!1,this.day_list=this._state.day_list,this.stats=(0,$.zV)([this._state.options,this._state.counts])}ngOnInit(){this.subscription("day_list",this.day_list.subscribe(e=>this.updateDailyChart(e))),this.subscription("stats",this.stats.subscribe(([e,n])=>this.updateLevelChart(e,n)))}ngOnChanges(e){e.print&&this.timeout("update_charts",()=>this.updateCharts(),50)}updateCharts(){var e=this;return(0,A.A)(function*(){const n=yield e.day_list.pipe((0,X.s)(1)).toPromise();e.updateDailyChart(n);const o=yield e.stats.pipe((0,X.s)(1)).toPromise();e.updateLevelChart(o[0],o[1])})()}updateDailyChart(e){const n={labels:e.map(o=>(0,z.A)(o.date,"dd MMM")),series:[e.map(o=>o.utilisation)]};this._day_chart=new ws("#day-chart",n)}updateLevelChart(e,n){let{zones:o}=e||{};o.includes("All")&&(o=this._org.levels.filter(l=>l.parent_id===this._org.building.id).map(l=>l.id));const r=(o||[]).filter(l=>(n[l]||0)>0),a={labels:r.map(l=>{const c=this._org.levelWithID([l]);return c?.display_name||c.name||""}),series:r.map(l=>n[l]||0)};this._level_chart=new Es("#level-chart",a)}static#t=this.\u0275fac=function(n){return new(n||s)(t.rXU(S),t.rXU(Q.yb))};static#e=this.\u0275cmp=t.VBU({type:s,selectors:[["report-desks-charts"]],inputs:{print:"print"},features:[t.Vt3,t.OA$],decls:11,vars:4,consts:[["util_chart",""],["level_chart",""],[1,"flex","items-center","space-x-4","w-full","px-4",3,"resize"],[1,"bg-base-100","border","border-base-200","rounded","shadow","flex-1"],[1,"border-b","border-base-200","p-4","text-xl","font-bold"],["id","day-chart",1,"ct-chart","ct-octave","max-w-full","h-56"],["id","level-chart",1,"ct-chart","ct-octave","max-w-full","h-56"]],template:function(n,o){if(1&n){const r=t.RV6();t.j41(0,"div",2),t.bIt("resize",function(){return t.eBV(r),t.Njj(o.updateCharts())},!1,t.tSv),t.j41(1,"div",3)(2,"div",4),t.EFF(3," Daily Utilisation "),t.k0s(),t.nrm(4,"div",5,0),t.k0s(),t.j41(6,"div",3)(7,"div",4),t.EFF(8," Level Utilisation "),t.k0s(),t.nrm(9,"div",6,1),t.k0s()()}2&n&&(t.R7$(4),t.xc7("width",o.print?"8cm":"auto"),t.R7$(5),t.xc7("width",o.print?"8cm":"auto"))},styles:["[_nghost-%COMP%]{display:block}\n\n/*# sourceMappingURL=report-desks-charts.component.ts-angular-inline--140.css.map*/"]})}return s})();const Ts=["report-desks",""];function Fs(s,i){if(1&s&&(t.qex(0),t.j41(1,"div",5)(2,"div",6),t.nrm(3,"img",7)(4,"div",8),t.j41(5,"h2",9),t.EFF(6," Desks Report "),t.k0s()()(),t.j41(7,"div",10)(8,"div",11)(9,"h3"),t.EFF(10,"Total Bookings"),t.k0s(),t.j41(11,"p"),t.EFF(12),t.nI1(13,"async"),t.k0s()(),t.j41(14,"div",11)(15,"h3"),t.EFF(16,"Utilisation"),t.k0s(),t.j41(17,"p"),t.EFF(18),t.nI1(19,"async"),t.k0s()()(),t.nrm(20,"report-desks-charts",12)(21,"report-desks-overall-list",12)(22,"report-desks-levels-list",12),t.bVm()),2&s){const e=t.XpG(2);t.R7$(3),t.Y8G("src",e.logo.src,t.B4B),t.R7$(9),t.JRh(t.bMT(13,6,e.total_count)||0),t.R7$(6),t.SpI("",t.bMT(19,8,e.utilisation)||0,"%"),t.R7$(2),t.Y8G("print",e.printing),t.R7$(),t.Y8G("print",e.printing),t.R7$(),t.Y8G("print",e.printing)}}function js(s,i){if(1&s&&(t.qex(0),t.DNE(1,Fs,23,10,"ng-container",4),t.nI1(2,"async"),t.bVm()),2&s){const e=t.XpG(),n=t.sdS(7);t.R7$(),t.Y8G("ngIf",t.bMT(2,2,e.total_count))("ngIfElse",n)}}function ks(s,i){1&s&&(t.j41(0,"div",13),t.nrm(1,"mat-spinner",14),t.j41(2,"p",15),t.EFF(3,"Loading report data..."),t.k0s()()),2&s&&(t.R7$(),t.Y8G("diameter",32))}function Is(s,i){1&s&&(t.j41(0,"div",16)(1,"p",15),t.EFF(2," Select levels and time period to generate a report. "),t.k0s()())}let Os=(()=>{class s{get logo(){return this._settings.get("app.logo_light")||{}}constructor(e,n){this._state=e,this._settings=n,this.printing=!1,this.total_count=this._state.stats.pipe((0,w.T)(o=>o.count||0)),this.utilisation=this._state.stats.pipe((0,w.T)(o=>(100*(o.utilisation||0)).toFixed(1))),this.loading=this._state.loading}print(){this.printing=!0,setTimeout(()=>{window.print(),this.printing=!1},300)}ngOnInit(){this._state.setOptions({type:"desks"})}static#t=this.\u0275fac=function(n){return new(n||s)(t.rXU(S),t.rXU(_.h$))};static#e=this.\u0275cmp=t.VBU({type:s,selectors:[["","report-desks",""]],attrs:Ts,decls:8,vars:4,consts:[["load_state",""],["empty_state",""],[3,"printing"],["printable","",1,"relative","flex-1","h-1/2","w-full","overflow-auto","print:overflow-visible","print:h-auto"],[4,"ngIf","ngIfElse"],[1,"w-full"],[1,"flex","items-center","m-4","p-4","rounded","bg-base-200","overflow-hidden"],[1,"h-12",3,"src"],[1,"flex-1"],[1,"text-2xl","font-medium","px-2"],[1,"m-4","p-4","rounded","bg-base-100","shadow","flex","justify-center","items-center","space-x-2"],[1,"flex","flex-col","items-center","flex-1"],[3,"print"],[1,"h-full","w-full","flex","flex-col","items-center","p-8"],[1,"mb-4",3,"diameter"],["simple",""],[1,"h-full","w-full","flex","flex-col","items-center","p-8","screen-only"]],template:function(n,o){if(1&n){const r=t.RV6();t.j41(0,"reports-options",2),t.bIt("printing",function(l){return t.eBV(r),t.Njj(o.printing=l)}),t.k0s(),t.j41(1,"div",3),t.DNE(2,js,3,4,"ng-container",4),t.nI1(3,"async"),t.DNE(4,ks,4,1,"ng-template",null,0,t.C5r)(6,Is,3,0,"ng-template",null,1,t.C5r),t.k0s()}if(2&n){const r=t.sdS(5);t.R7$(2),t.Y8G("ngIf",!t.bMT(3,2,o.loading))("ngIfElse",r)}},dependencies:[y.bT,Rt.LG,Et.L,Ct,Pn,qn,Ms,y.Jj],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%}h3[_ngcontent-%COMP%]{font-weight:500}p[_ngcontent-%COMP%]:not([simple]){font-size:1.75rem}\n\n/*# sourceMappingURL=report-desks.component.ts-angular-inline--135.css.map*/"]})}return s})();var As=g(75566);let ee=(()=>{class s{constructor(e){this._reports=e,this.catering_orders=(0,$.zV)([this._reports.options,this._reports.bookings]).pipe((0,w.T)(([{start:n,end:o},r])=>{const a=(0,tt.A)(n).valueOf(),l=(0,et.A)(o).valueOf();return(0,_.Bq)(r.map(u=>u.valid_catering||[])).filter(u=>u.deliver_at_time>=a&&u.deliver_at_time<l&&"cancelled"!==u.status).sort((u,f)=>u.event?.date-f.event?.date)}),(0,Y.t)(1)),this.catering_items=this.catering_orders.pipe((0,w.T)(n=>{const o=[];for(const r of n)for(const a of r?.items||[]){const l=o.findIndex(c=>a.options_string===c.options_string);l>=0?a[l]=new As.TI({...a,quantity:a?.quantity+a[l]?.quantity}):o.push(a)}return o.sort((r,a)=>a.quantity-r.quantity)})),this.stats=(0,$.zV)([this.catering_orders,this.catering_items]).pipe((0,w.T)(([n,o])=>{const r=n.reduce((a,l)=>a+l.total_cost,0);return{order_count:n.length,unique_items:o.length,item_count:n.reduce((a,l)=>a+l.item_count,0),total_cost:r,avg_cost:r/n.length}}))}downloadOrders(){var e=this;return(0,A.A)(function*(){const n=yield e.catering_orders.pipe((0,X.s)(1)).toPromise(),o=(0,_.SL)(n);return(0,_.PE)("catering-orders.csv",o)})()}static#t=this.\u0275fac=function(n){return new(n||s)(t.KVO(S))};static#e=this.\u0275prov=t.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})(),Ss=(()=>{class s{get code(){return this._org.currency_code}constructor(e,n){this._report=e,this._org=n,this.stats=this._report.stats}static#t=this.\u0275fac=function(n){return new(n||s)(t.rXU(ee),t.rXU(Q.yb))};static#e=this.\u0275cmp=t.VBU({type:s,selectors:[["catering-report-overall"]],decls:32,vars:21,consts:[[1,"bg-base-100","shadow","rounded","m-2","px-8","w-48","h-24","flex","flex-col","items-center","justify-center"],["count","",1,"text-3xl"],[1,""],["unique","",1,"text-3xl"],["items","",1,"text-3xl"],["total","",1,"text-3xl"],["average","",1,"text-3xl"]],template:function(n,o){if(1&n&&(t.j41(0,"div",0)(1,"div",1),t.EFF(2),t.nI1(3,"async"),t.k0s(),t.j41(4,"div",2),t.EFF(5,"Orders"),t.k0s()(),t.j41(6,"div",0)(7,"div",3),t.EFF(8),t.nI1(9,"async"),t.k0s(),t.j41(10,"div",2),t.EFF(11,"Unique Items"),t.k0s()(),t.j41(12,"div",0)(13,"div",4),t.EFF(14),t.nI1(15,"async"),t.k0s(),t.j41(16,"div",2),t.EFF(17,"Ordered Items"),t.k0s()(),t.j41(18,"div",0)(19,"div",5),t.EFF(20),t.nI1(21,"async"),t.nI1(22,"currency"),t.k0s(),t.j41(23,"div",2),t.EFF(24,"Total"),t.k0s()(),t.j41(25,"div",0)(26,"div",6),t.EFF(27),t.nI1(28,"async"),t.nI1(29,"currency"),t.k0s(),t.j41(30,"div",2),t.EFF(31,"Order Average"),t.k0s()()),2&n){let r,a,l,c,p;t.R7$(2),t.SpI(" ",(null==(r=t.bMT(3,5,o.stats))?null:r.order_count)||"0"," "),t.R7$(6),t.SpI(" ",(null==(a=t.bMT(9,7,o.stats))?null:a.unique_items)||"0"," "),t.R7$(6),t.SpI(" ",(null==(l=t.bMT(15,9,o.stats))?null:l.item_count)||"0"," "),t.R7$(6),t.SpI(" ",t.i5U(22,13,(null==(c=t.bMT(21,11,o.stats))?null:c.total_cost)/100||0,o.code)," "),t.R7$(7),t.SpI(" ",t.i5U(29,18,(null==(p=t.bMT(28,16,o.stats))?null:p.avg_cost)/100||0,o.code)," ")}},dependencies:[y.Jj,y.oe],styles:["[_nghost-%COMP%]{display:flex;flex-wrap:wrap;align-items:center;justify-content:center;padding:.5rem}\n\n/*# sourceMappingURL=catering-report-overall.component.ts-angular-inline--139.css.map*/"]})}return s})();var ne=g(80640);const Ns=()=>["deliver_at","item_count","total_cost"],Ls=()=>["Date","Items","Total Cost"],Ds=()=>["flex"],Gs=(s,i)=>({deliver_at:s,total_cost:i});function Bs(s,i){if(1&s&&(t.EFF(0),t.nI1(1,"date"),t.nI1(2,"date")),2&s){const e=i.data,n=t.XpG();t.Lme(" ",t.bMT(1,2,e)," at ",t.i5U(2,4,e,n.time_format)," ")}}function Vs(s,i){if(1&s&&(t.EFF(0),t.nI1(1,"currency")),2&s){const e=i.data,n=t.XpG();t.SpI(" ",t.i5U(1,1,e/100,n.code)," ")}}let Us=(()=>{class s{get code(){return this._org.currency_code}get time_format(){return this._settings.time_format}constructor(e,n,o){this._report=e,this._org=n,this._settings=o,this.orders=this._report.catering_orders,this.download=()=>this._report.downloadOrders()}static#t=this.\u0275fac=function(n){return new(n||s)(t.rXU(ee),t.rXU(Q.yb),t.rXU(_.h$))};static#e=this.\u0275cmp=t.VBU({type:s,selectors:[["catering-report-orders"]],decls:12,vars:12,consts:[["date_state",""],["cost_state",""],[1,"w-[64rem]","max-w-[calc(100%-2rem)]","rounded","overflow-hidden","bg-base-100","shadow","mx-auto","my-2"],[1,"border-b","border-base-200","flex","items-center","justify-between","px-4"],[1,"py-2","text-xl","font-medium"],["matRipple-icon","","matTooltip","Download list",3,"click"],["empty","No orders for selected period",1,"w-full","h-full",3,"dataSource","columns","display_column","column_size","template","pagination"]],template:function(n,o){if(1&n){const r=t.RV6();t.j41(0,"div",2)(1,"div",3)(2,"h2",4),t.EFF(3,"Orders"),t.k0s(),t.j41(4,"button",5),t.bIt("click",function(){return t.eBV(r),t.Njj(o.download())}),t.j41(5,"app-icon"),t.EFF(6,"download"),t.k0s()()(),t.nrm(7,"custom-table",6),t.DNE(8,Bs,3,7,"ng-template",null,0,t.C5r)(10,Vs,2,4,"ng-template",null,1,t.C5r),t.k0s()}if(2&n){const r=t.sdS(9),a=t.sdS(11);t.R7$(7),t.Y8G("dataSource",o.orders)("columns",t.lJ4(6,Ns))("display_column",t.lJ4(7,Ls))("column_size",t.lJ4(8,Ds))("template",t.l_i(9,Gs,r,a))("pagination",!0)}},dependencies:[ne.oV,U.R,K.r,y.oe,y.vh]})}return s})();const zs=()=>["name","options","quantity","unit_price","total_cost"],$s=()=>["Name","Options","Quantity","Unit Price","Total Cost"],Ys=()=>["flex"],Xs=(s,i,e)=>({options:s,unit_price:i,total_cost:e});function Ps(s,i){if(1&s&&(t.j41(0,"span",7),t.EFF(1),t.k0s()),2&s){const e=t.XpG().data,n=t.XpG();t.Y8G("matTooltip",n.options(e)),t.R7$(),t.SpI(" ",e.length," option(s) ")}}function Js(s,i){1&s&&t.DNE(0,Ps,2,2,"span",6),2&s&&t.Y8G("ngIf",i.data.length)}function Hs(s,i){if(1&s&&(t.EFF(0),t.nI1(1,"currency")),2&s){const e=i.data,n=t.XpG();t.SpI(" ",t.i5U(1,1,(e||0)/100,n.code)," ")}}let Ws=(()=>{class s{get code(){return this._org.currency_code}constructor(e,n){this._report=e,this._org=n,this.items=this._report.catering_items}options(e){return e.map(n=>n.name).join("\n")}static#t=this.\u0275fac=function(n){return new(n||s)(t.rXU(ee),t.rXU(Q.yb))};static#e=this.\u0275cmp=t.VBU({type:s,selectors:[["catering-report-items"]],decls:9,vars:13,consts:[["option_state",""],["cost_state",""],[1,"w-[64rem]","max-w-[calc(100%-2rem)]","rounded","overflow-hidden","bg-base-100","shadow","mx-auto","my-2"],[1,"border-b","border-base-200","flex","items-center","justify-between","px-4"],[1,"py-2","text-xl","font-medium"],["empty","No orders for selected period",1,"w-full","h-full",3,"dataSource","columns","display_column","column_size","template","pagination"],["class","text-xs px-2 py-1 rounded bg-base-200",3,"matTooltip",4,"ngIf"],[1,"text-xs","px-2","py-1","rounded","bg-base-200",3,"matTooltip"]],template:function(n,o){if(1&n&&(t.j41(0,"div",2)(1,"div",3)(2,"h2",4),t.EFF(3,"Ordered Items"),t.k0s()(),t.nrm(4,"custom-table",5),t.DNE(5,Js,1,1,"ng-template",null,0,t.C5r)(7,Hs,2,4,"ng-template",null,1,t.C5r),t.k0s()),2&n){const r=t.sdS(6),a=t.sdS(8);t.R7$(4),t.Y8G("dataSource",o.items)("columns",t.lJ4(6,zs))("display_column",t.lJ4(7,$s))("column_size",t.lJ4(8,Ys))("template",t.sMw(9,Xs,r,a,a))("pagination",!0)}},dependencies:[y.bT,ne.oV,K.r,y.oe]})}return s})();function Qs(s,i){if(1&s&&(t.j41(0,"div",6)(1,"div",7)(2,"div",8),t.nrm(3,"img",9)(4,"div",10),t.j41(5,"h2",11),t.EFF(6," Rooms Report "),t.k0s()()(),t.nrm(7,"catering-report-overall")(8,"catering-report-orders")(9,"catering-report-items"),t.k0s()),2&s){const e=t.XpG(2);t.R7$(3),t.Y8G("src",e.logo.src,t.B4B)}}function Zs(s,i){if(1&s&&(t.qex(0),t.DNE(1,Qs,10,1,"div",5),t.nI1(2,"async"),t.bVm()),2&s){const e=t.XpG(),n=t.sdS(7);t.R7$(),t.Y8G("ngIf",t.bMT(2,2,e.total_count))("ngIfElse",n)}}function Ks(s,i){1&s&&(t.j41(0,"div",12),t.nrm(1,"mat-spinner",13),t.j41(2,"p",14),t.EFF(3,"Loading report data..."),t.k0s()()),2&s&&(t.R7$(),t.Y8G("diameter",32))}function qs(s,i){1&s&&(t.j41(0,"div",15)(1,"p",14),t.EFF(2," Select levels and time period to generate a report. "),t.k0s()())}let ti=(()=>{class s{get logo(){return this._settings.get("app.logo_light")||{}}constructor(e,n){this._state=e,this._settings=n,this.printing=!1,this.total_count=this._state.stats.pipe((0,w.T)(o=>o.count||0)),this.loading=this._state.loading}ngOnInit(){this._state.setOptions({type:"events"})}static#t=this.\u0275fac=function(n){return new(n||s)(t.rXU(S),t.rXU(_.h$))};static#e=this.\u0275cmp=t.VBU({type:s,selectors:[["catering-report"]],decls:8,vars:4,consts:[["load_state",""],["empty_state",""],[3,"printing"],["printable","",1,"relative","flex-1","h-1/2","w-full","overflow-auto","print:overflow-visible","print:h-auto"],[4,"ngIf","ngIfElse"],["class","h-full w-full","printable","",4,"ngIf","ngIfElse"],["printable","",1,"h-full","w-full"],[1,"w-full"],[1,"flex","items-center","m-4","p-4","rounded","bg-base-200","overflow-hidden"],[1,"h-12",3,"src"],[1,"flex-1"],[1,"text-2xl","font-medium","px-2"],[1,"h-full","w-full","flex","flex-col","items-center","p-8"],[1,"mb-4",3,"diameter"],["simple",""],[1,"h-full","w-full","flex","flex-col","items-center","p-8","screen-only"]],template:function(n,o){if(1&n){const r=t.RV6();t.j41(0,"reports-options",2),t.bIt("printing",function(l){return t.eBV(r),t.Njj(o.printing=l)}),t.k0s(),t.j41(1,"div",3),t.DNE(2,Zs,3,4,"ng-container",4),t.nI1(3,"async"),t.DNE(4,Ks,4,1,"ng-template",null,0,t.C5r)(6,qs,3,0,"ng-template",null,1,t.C5r),t.k0s()}if(2&n){const r=t.sdS(5);t.R7$(2),t.Y8G("ngIf",!t.bMT(3,2,o.loading))("ngIfElse",r)}},dependencies:[y.bT,Rt.LG,Et.L,Ct,Ss,Us,Ws,y.Jj],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%}\n\n/*# sourceMappingURL=catering-report.component.ts-angular-inline--138.css.map*/"]})}return s})();var ei=g(6109),ni=g(8627),si=g(66e3);const At={};let se=(()=>{class s{transform(e){return e?(At[e]||(At[e]=(0,bt.N8)(e).pipe((0,w.T)(n=>n[0]||new bt.Gp({id:e,name:e})),(0,ct.W)(n=>(0,Z.of)(new bt.Gp({id:e,name:e}))),(0,Y.t)(1))),At[e]):(0,Z.of)(null)}static addUser(e){At[e.id]=(0,Z.of)(e).pipe((0,Y.t)(1))}static#t=this.\u0275fac=function(n){return new(n||s)};static#e=this.\u0275pipe=t.EJ8({name:"user",type:s,pure:!0})}return s})(),Fe=(()=>{class s{get system_id(){return this._org.binding("contact_tracing")}get time_format(){return this._settings.time_format}constructor(e,n,o){this._org=e,this._reports=n,this._settings=o,this._loading=new st.t(""),this._generate=new st.t(0),this._options=new st.t({start:(0,tt.A)(Date.now()),end:(0,et.A)(Date.now())}),this.events=(0,$.zV)([this._options,this._generate]).pipe((0,ei.F)((r,a)=>r[1]===a[1]),(0,ni.p)(([r,a])=>!!a),(0,it.n)(([{start:r,end:a,user:l}])=>{if(!l)return(0,Z.of)([]);this._loading.next("Loading contact events...");const c=(0,ae.f_4)(this.system_id,"ContactTracing");return l=l||(0,_.Ny)(),se.addUser(l),this.system_id&&c?c.execute("close_contacts",[l.email,l.username,(0,xt.A)(r),(0,xt.A)(a)]).catch(p=>((0,_.UG)(`${p?.msg||JSON.stringify(p)}`),[])):(0,Z.of)([])}),(0,w.T)(r=>{const a=this._options.getValue().user||(0,_.Ny)();return r.map(l=>({mac_address:l.mac_address,date:1e3*l.contact_time,duration:Math.floor(l.duration/60)||0,user_id:a.id,user:a.name,contact_id:l.username,distance:1}))}),(0,ct.W)(r=>((0,_.UG)(`${r?.msg||JSON.stringify(r)}`),(0,Z.of)([]))),(0,si.M)(r=>this._loading.next("")),(0,Y.t)(1)),this.options=this._options.asObservable(),this.loading=this._loading.asObservable()}setOptions(e){this._options.next({...this._options.getValue(),...e})}generateReport(){this._generate.next(Date.now())}downloadReport(){var e=this;return(0,A.A)(function*(){const{start:n,end:o}=yield e._reports.options.pipe((0,X.s)(1)).toPromise(),r=yield e.events.pipe((0,X.s)(1)).toPromise(),a=new se,l=yield Promise.all(r.map(function(){var c=(0,A.A)(function*(p){return{"MAC Address":p.mac_address,Date:(0,z.A)(p.date,"dd MMM yyyy, "+e.time_format),"User Name":p.user,"Contact Name":(yield a.transform(p.contact_id).toPromise())?.name||("null"!==p.contact_id?p.contact_id:null)||p.mac_address,Duration:`${Math.floor(p.duration/60)?Math.floor(p.duration/60)+"h ":""}${Math.floor(p.duration%60)+"m"}`,Distance:p.distance}});return function(p){return c.apply(this,arguments)}}()));(0,_.PE)(`report+contact-tracing+${(0,z.A)(n,"yyyy-MM-dd")}+${(0,z.A)(o,"yyyy-MM-dd")}.csv`,(0,_.SL)(l))})()}static#t=this.\u0275fac=function(n){return new(n||s)(t.KVO(Q.yb),t.KVO(S),t.KVO(_.h$))};static#e=this.\u0275prov=t.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();var gt=g(61977),ii=g(18e3);let oi=(()=>{class s{constructor(e){this._state=e,this.options=this._state.options,this.setOptions=n=>this._state.setOptions(n),this.generate=()=>this._state.generateReport()}static#t=this.\u0275fac=function(n){return new(n||s)(t.rXU(Fe))};static#e=this.\u0275cmp=t.VBU({type:s,selectors:[["contact-tracing-options"]],decls:15,vars:14,consts:[["picker",""],[1,"flex","items-center","space-x-2","w-full","p-2","bg-base-100","shadow"],["appearance","outline",1,"w-[18rem]"],[3,"rangePicker"],["matStartDate","","placeholder","Start date",3,"ngModelChange","ngModel"],["matEndDate","","placeholder","End date",3,"ngModelChange","ngModel"],["matSuffix","",3,"for"],["placeholder","Search for user to trace...",1,"w-64","h-12","mb-2","mt-1",3,"ngModelChange","ngModel"],["btn","","matRipple","",3,"click","disabled"]],template:function(n,o){if(1&n){const r=t.RV6();t.j41(0,"div",1)(1,"mat-form-field",2)(2,"mat-date-range-input",3)(3,"input",4),t.nI1(4,"async"),t.bIt("ngModelChange",function(l){return t.eBV(r),t.Njj(l?o.setOptions({start:l,user:null}):"")}),t.k0s(),t.j41(5,"input",5),t.nI1(6,"async"),t.bIt("ngModelChange",function(l){return t.eBV(r),t.Njj(l?o.setOptions({end:l,user:null}):"")}),t.k0s()(),t.nrm(7,"mat-datepicker-toggle",6)(8,"mat-date-range-picker",null,0),t.k0s(),t.j41(10,"a-user-search-field",7),t.nI1(11,"async"),t.bIt("ngModelChange",function(l){return t.eBV(r),t.Njj(o.setOptions({user:l}))}),t.k0s(),t.j41(12,"button",8),t.nI1(13,"async"),t.bIt("click",function(){return t.eBV(r),t.Njj(o.generate())}),t.EFF(14," Generate Report "),t.k0s()()}if(2&n){let r,a,l,c;const p=t.sdS(9);t.R7$(2),t.Y8G("rangePicker",p),t.R7$(),t.Y8G("ngModel",null==(r=t.bMT(4,6,o.options))?null:r.start),t.R7$(2),t.Y8G("ngModel",null==(a=t.bMT(6,8,o.options))?null:a.end),t.R7$(2),t.Y8G("for",p),t.R7$(3),t.Y8G("ngModel",null==(l=t.bMT(11,10,o.options))?null:l.user),t.R7$(2),t.Y8G("disabled",!(null!=(c=t.bMT(13,12,o.options))&&c.user))}},dependencies:[W.me,W.BC,W.vS,Bt.rl,Bt.yw,gt.bU,gt.el,gt.xR,gt.IG,gt.SG,O.r6,ii.$,y.Jj],styles:["mat-form-field[_ngcontent-%COMP%]{height:3.25rem}\n\n/*# sourceMappingURL=contact-tracing-options.component.ts-angular-inline--142.css.map*/"]})}return s})();const ri=()=>["date","user_id","contact_id","duration"],ai=()=>["Time of Contact","Person","Close Contact","Duration"],li=()=>["12r","14r","flex","10r"],ci=(s,i,e,n,o,r)=>({options:s,date:i,distance:e,user_id:n,contact_id:o,duration:r});function pi(s,i){if(1&s&&(t.j41(0,"span",22),t.EFF(1),t.k0s()),2&s){const e=t.XpG().data,n=t.XpG(3);t.Y8G("matTooltip",n.options(e)),t.R7$(),t.SpI(" ",e.length," option(s) ")}}function ui(s,i){1&s&&t.DNE(0,pi,2,2,"span",21),2&s&&t.Y8G("ngIf",i.data.length)}function di(s,i){if(1&s&&(t.EFF(0),t.nI1(1,"user"),t.nI1(2,"async")),2&s){let e;const o=i.row;t.JRh((null==(e=t.bMT(2,3,t.bMT(1,1,i.data)))?null:e.name)||o.mac_address)}}function mi(s,i){if(1&s&&(t.EFF(0),t.nI1(1,"date"),t.nI1(2,"date")),2&s){const e=i.data,n=t.XpG(3);t.Lme(" ",t.i5U(1,2,e,"mediumDate"),", ",t.i5U(2,5,e,n.time_format)," ")}}function hi(s,i){if(1&s&&t.EFF(0),2&s){const e=i.data,n=t.XpG(3);t.SpI(" ",n.formatDuration(e||0)||"Less than a minute"," ")}}function fi(s,i){1&s&&t.EFF(0),2&s&&t.SpI(" ",i.data,"m ")}function gi(s,i){if(1&s&&(t.j41(0,"div",12)(1,"div",13)(2,"div",14),t.nrm(3,"img",15)(4,"div",16),t.j41(5,"h2",17),t.EFF(6," Contact Tracing Report "),t.k0s()()(),t.j41(7,"div",18)(8,"h2",19),t.EFF(9,"Contact Events"),t.k0s()(),t.nrm(10,"custom-table",20),t.DNE(11,ui,1,1,"ng-template",null,2,t.C5r)(13,di,3,5,"ng-template",null,3,t.C5r)(15,mi,3,8,"ng-template",null,4,t.C5r)(17,hi,1,1,"ng-template",null,5,t.C5r)(19,fi,1,1,"ng-template",null,6,t.C5r),t.k0s()),2&s){const e=t.sdS(12),n=t.sdS(14),o=t.sdS(16),r=t.sdS(18),a=t.sdS(20),l=t.XpG(2);t.R7$(3),t.Y8G("src",l.logo.src,t.B4B),t.R7$(7),t.Y8G("dataSource",l.tracing_events)("columns",t.lJ4(8,ri))("display_column",t.lJ4(9,ai))("column_size",t.lJ4(10,li))("template",t.l4e(11,ci,e,o,a,n,n,r))("pagination",!0)("page_size",30)}}function _i(s,i){if(1&s&&(t.qex(0),t.DNE(1,gi,21,18,"div",11),t.nI1(2,"async"),t.bVm()),2&s){let e;const n=t.XpG(),o=t.sdS(10);t.R7$(),t.Y8G("ngIf",null==(e=t.bMT(2,2,n.options))?null:e.user)("ngIfElse",o)}}function vi(s,i){if(1&s&&(t.j41(0,"div",23),t.nrm(1,"map-spinner",24),t.j41(2,"p"),t.EFF(3),t.nI1(4,"async"),t.k0s()()),2&s){const e=t.XpG();t.R7$(3),t.JRh(t.bMT(4,1,e.loading))}}function yi(s,i){1&s&&(t.j41(0,"div",25)(1,"p",26),t.EFF(2,"Select a user from the topbar to begin"),t.k0s()())}let bi=(()=>{class s{get time_format(){return this._settings.time_format}get logo(){return this._settings.get("app.logo_light")||{}}constructor(e,n){this._state=e,this._settings=n,this.printing=!1,this.loading=this._state.loading,this.options=this._state.options,this.tracing_events=this._state.events,this.setOptions=o=>this._state.setOptions(o),this.downloadReport=()=>this._state.downloadReport(),this.formatDuration=o=>(0,Ut.A)({hours:Math.floor(o/60),minutes:o%60})}static#t=this.\u0275fac=function(n){return new(n||s)(t.rXU(Fe),t.rXU(_.h$))};static#e=this.\u0275cmp=t.VBU({type:s,selectors:[["app-contact-tracing-report"]],decls:11,vars:4,consts:[["load_state",""],["empty_state",""],["option_state",""],["user_state",""],["date_state",""],["duration_state",""],["distance_state",""],[3,"printing"],["printable","",1,"relative","flex-1","h-1/2","w-full","overflow-auto","print:overflow-visible","print:h-auto"],[4,"ngIf","ngIfElse"],["icon","","matRipple","","matTooltip","Download Report",1,"bg-base-100","absolute","bottom-2","left-2","shadow",3,"click"],["class","w-[64rem] max-w-[calc(100%-2rem)] rounded overflow-hidden bg-base-100 shadow mx-auto my-2","printable","",4,"ngIf","ngIfElse"],["printable","",1,"w-[64rem]","max-w-[calc(100%-2rem)]","rounded","overflow-hidden","bg-base-100","shadow","mx-auto","my-2"],[1,"w-full"],[1,"flex","items-center","m-4","p-4","rounded","bg-base-200","overflow-hidden"],[1,"h-12",3,"src"],[1,"flex-1"],[1,"text-2xl","font-medium","px-2"],[1,"border-b","border-base-200","flex","items-center","justify-between","px-4"],[1,"py-2","text-xl","font-medium"],["empty","No contact records for selected period",1,"w-full","h-full",3,"dataSource","columns","display_column","column_size","template","pagination","page_size"],["class","text-xs px-2 py-1 rounded bg-base-200",3,"matTooltip",4,"ngIf"],[1,"text-xs","px-2","py-1","rounded","bg-base-200",3,"matTooltip"],[1,"p-8","flex","flex-col","items-center","justify-center","space-y-2"],["diameter","32"],[1,"p-8","flex","flex-col","items-center","justify-center","space-y-2","screen-only"],[1,"opacity-60"]],template:function(n,o){if(1&n){const r=t.RV6();t.j41(0,"contact-tracing-options",7),t.bIt("printing",function(l){return t.eBV(r),t.Njj(o.printing=l)}),t.k0s(),t.j41(1,"div",8),t.DNE(2,_i,3,4,"ng-container",9),t.nI1(3,"async"),t.k0s(),t.j41(4,"button",10),t.bIt("click",function(){return t.eBV(r),t.Njj(o.downloadReport())}),t.j41(5,"app-icon"),t.EFF(6,"download"),t.k0s()(),t.DNE(7,vi,5,3,"ng-template",null,0,t.C5r)(9,yi,3,0,"ng-template",null,1,t.C5r)}if(2&n){const r=t.sdS(8);t.R7$(2),t.Y8G("ngIf",!t.bMT(3,2,o.loading))("ngIfElse",r)}},dependencies:[y.bT,ne.oV,O.r6,U.R,K.r,Et.L,oi,y.Jj,y.vh,se],styles:["[_nghost-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column}\n\n/*# sourceMappingURL=contact-tracing-report.component.ts-angular-inline--141.css.map*/"]})}return s})();var xi=g(26781);function wi(s,i){if(1&s&&(t.nrm(0,"iframe",1),t.nI1(1,"safe")),2&s){const e=t.XpG();t.Y8G("src",t.i5U(1,1,e.report_url,"resource"),t.f$h)}}const Ri={};let Ci=(()=>{class s extends _.Tv{get report_url(){let e=(this._settings.get("app.custom_reports")||[]).find(o=>o.id===this.id)||Ri;return e.url?e.url+(e.url.includes("?")?"&":"?")+"kiosk=tv"+(e.api_key?`&key=${encodeURIComponent(e.api_key)}`:""):""}constructor(e,n){super(),this._settings=e,this._route=n,this.id=""}ngOnInit(){this.subscription("route.params",this._route.paramMap.subscribe(e=>this.id=e.get("id")||""))}static#t=this.\u0275fac=function(n){return new(n||s)(t.rXU(_.h$),t.rXU(V.nX))};static#e=this.\u0275cmp=t.VBU({type:s,selectors:[["custom-report"]],features:[t.Vt3],decls:1,vars:1,consts:[["class","w-full h-full",3,"src",4,"ngIf"],[1,"w-full","h-full",3,"src"]],template:function(n,o){1&n&&t.DNE(0,wi,2,4,"iframe",0),2&n&&t.Y8G("ngIf",o.id)},dependencies:[y.bT,xi.m],styles:["[_nghost-%COMP%]{height:100%;width:100%}\n\n/*# sourceMappingURL=custom-report.component.ts-angular-inline--143.css.map*/"]})}return s})();var Ei=g(45189),Mi=g(96843);const Ti=["app-new-reports",""];function Fi(s,i){1&s&&t.nrm(0,"div",4)}const je=[{path:"",component:Ct},{path:"bookings",component:Gn},{path:"desks",component:Os},{path:"catering",component:ti},{path:"contact-tracing",component:bi},{path:":id",component:Ci},{path:"**",redirectTo:"desks",pathMatch:"full"}],ki=[{path:"new",component:(()=>{class s{get path(){const e=this._router.url.split("/");return e[e.length-1]}constructor(e){this._router=e}static#t=this.\u0275fac=function(n){return new(n||s)(t.rXU(V.Ix))};static#e=this.\u0275cmp=t.VBU({type:s,selectors:[["","app-new-reports",""]],attrs:Ti,decls:6,vars:1,consts:[[1,"screen-only"],[1,"flex","flex-1","h-px"],[1,"flex","flex-col","flex-1","w-1/2","h-full","relative"],["reports-menu","","class","absolute inset-0 screen-only",4,"ngIf"],["reports-menu","",1,"absolute","inset-0","screen-only"]],template:function(n,o){1&n&&(t.nrm(0,"app-topbar",0),t.j41(1,"div",1),t.nrm(2,"app-sidebar",0),t.j41(3,"main",2),t.nrm(4,"router-outlet"),t.DNE(5,Fi,1,0,"div",3),t.k0s()()),2&n&&(t.R7$(5),t.Y8G("ngIf","reports"===o.path))},dependencies:[y.bT,Ei.S,Mi.c,V.n3,oe],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%;width:100%;background-color:var(--b1)}main[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:not(router-outlet){display:flex;flex-direction:column;width:100%;height:100%}\n\n/*# sourceMappingURL=new-reports.component.ts-angular-inline--144.css.map*/"]})}return s})(),children:je},{path:"",component:Xe,children:je}];let Ii=(()=>{class s{static#t=this.\u0275fac=function(n){return new(n||s)};static#e=this.\u0275mod=t.$C({type:s});static#n=this.\u0275inj=t.G2t({imports:[y.MD,W.YN,Nt.r,re.lx,bt.kR,Lt.Ou,V.iI.forChild(ki)]})}return s})()},68390:(Oe,yt,g)=>{g.d(yt,{g8:()=>Lt,kR:()=>y.k,Gp:()=>t.Gp,N8:()=>O.N8,SZ:()=>O.SZ,is:()=>_.is});var y=g(11081),Nt=(g(11543),g(7282),g(67450));class Lt{constructor(M={}){this.type=M.type||M.location||"other",this.position=M.position||M.map_id||M.asset_id||{x:M.x/M.map_width||0,y:M.y/M.map_height||0},this.variance=M.variance||0,this.last_seen=M.last_seen||(0,Nt.A)(new Date),this.level=M.level,this.building=M.building,this.at_location=!!M.at_location,this.coordinates_from=M.coordinates_from||"top-left"}}var t=g(93693),_=(g(24129),g(86039)),O=g(2372)}}]);
//# sourceMappingURL=apps_concierge_src_app_reports_reports_module_ts.js.map